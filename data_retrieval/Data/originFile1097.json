{"items":[{"tags":["java","sonarqube"],"owner":{"account_id":12173170,"reputation":33,"user_id":8887147,"display_name":"Cengiz Alt&#252;rk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661008545,"creation_date":1661008545,"question_id":73427831,"body_markdown":"I updated sonarqube from 8.9.8-community to 9.6.0-comunity. i faced below error. How can i fix ?\r\n\r\n```\r\n2022.08.20 14:58:48 WARN  web[][o.s.a.s.w.WebService$Action] The response example is not set on action api/analysis_cache/get\r\n2022.08.20 14:58:48 WARN  web[][o.s.a.s.w.WebService$Action] The response example is not set on action api/alm_integrations/check_pat\r\n2022.08.20 14:58:48 WARN  web[][o.s.c.a.AnnotationConfigApplicationContext] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jdk.internal.loader.ClassLoaders$AppClassLoader@6a6824be-org.sonar.server.ws.WebServiceEngine&#39;: Initialization of bean failed; nested exception is java.lang.IllegalStateException: The action &#39;create_bitbucketcloud&#39; is defined multiple times in the web service &#39;api/alm_settings&#39;\r\n2022.08.20 14:58:48 ERROR web[][o.s.s.p.Platform] Background initialization failed. Stopping SonarQube\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jdk.internal.loader.ClassLoaders$AppClassLoader@6a6824be-org.sonar.server.ws.WebServiceEngine&#39;: Initialization of bean failed; nested exception is java.lang.IllegalStateException: The action &#39;create_bitbucketcloud&#39; is defined multiple times in the web service &#39;api/alm_settings&#39;\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat \r\nCaused by: java.lang.IllegalStateException: The action &#39;create_bitbucketcloud&#39; is defined multiple times in the web service &#39;api/alm_settings&#39;\r\n\tat org.sonar.api.server.ws.WebService$NewController.createAction(WebService.java:177)\r\n\tat com.github.mc1arke.sonarqube.plugin.server.pullrequest.ws.action.CreateAction.define(Crea\r\n\r\n ","title":"Sonarqube java.lang.IllegalStateException: The action &#39;create_bitbucketcloud&#39; is defined multiple times","body":"<p>I updated sonarqube from 8.9.8-community to 9.6.0-comunity. i faced below error. How can i fix ?</p>\n<pre><code>2022.08.20 14:58:48 WARN  web[][o.s.a.s.w.WebService$Action] The response example is not set on action api/analysis_cache/get\n2022.08.20 14:58:48 WARN  web[][o.s.a.s.w.WebService$Action] The response example is not set on action api/alm_integrations/check_pat\n2022.08.20 14:58:48 WARN  web[][o.s.c.a.AnnotationConfigApplicationContext] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdk.internal.loader.ClassLoaders$AppClassLoader@6a6824be-org.sonar.server.ws.WebServiceEngine': Initialization of bean failed; nested exception is java.lang.IllegalStateException: The action 'create_bitbucketcloud' is defined multiple times in the web service 'api/alm_settings'\n2022.08.20 14:58:48 ERROR web[][o.s.s.p.Platform] Background initialization failed. Stopping SonarQube\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdk.internal.loader.ClassLoaders$AppClassLoader@6a6824be-org.sonar.server.ws.WebServiceEngine': Initialization of bean failed; nested exception is java.lang.IllegalStateException: The action 'create_bitbucketcloud' is defined multiple times in the web service 'api/alm_settings'\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at \nCaused by: java.lang.IllegalStateException: The action 'create_bitbucketcloud' is defined multiple times in the web service 'api/alm_settings'\n    at org.sonar.api.server.ws.WebService$NewController.createAction(WebService.java:177)\n    at com.github.mc1arke.sonarqube.plugin.server.pullrequest.ws.action.CreateAction.define(Crea\n\n \n</code></pre>\n"},{"tags":["java","apache-spark","cassandra","spark-cassandra-connector"],"comments":[{"owner":{"account_id":2860204,"reputation":4706,"user_id":2455626,"accept_rate":50,"display_name":"Avihoo Mamka"},"score":0,"creation_date":1457356649,"post_id":35844700,"comment_id":59354822,"body_markdown":"Where do you set `cassandraRDD2`? It seems it&#39;s always a null.","body":"Where do you set <code>cassandraRDD2</code>? It seems it&#39;s always a null."},{"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"score":0,"creation_date":1457356762,"post_id":35844700,"comment_id":59354890,"body_markdown":"In the if condition ,I&#39;m assigning cassandraRDD2 to  cassandraRDD.","body":"In the if condition ,I&#39;m assigning cassandraRDD2 to  cassandraRDD."},{"owner":{"account_id":2860204,"reputation":4706,"user_id":2455626,"accept_rate":50,"display_name":"Avihoo Mamka"},"score":0,"creation_date":1457356792,"post_id":35844700,"comment_id":59354915,"body_markdown":"How do you execute `null.isEmpty()`? Because this is what your&#39;e doing there","body":"How do you execute <code>null.isEmpty()</code>? Because this is what your&#39;e doing there"},{"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"score":0,"creation_date":1457356886,"post_id":35844700,"comment_id":59354985,"body_markdown":"Yes I forget to change it to if(cassandraRDD2==null) , but then why do i need to cast it ?","body":"Yes I forget to change it to if(cassandraRDD2==null) , but then why do i need to cast it ?"},{"owner":{"account_id":2860204,"reputation":4706,"user_id":2455626,"accept_rate":50,"display_name":"Avihoo Mamka"},"score":0,"creation_date":1457357034,"post_id":35844700,"comment_id":59355081,"body_markdown":"Regardless the problem you&#39;re talking about, why do you have the `if` statement as its always true?","body":"Regardless the problem you&#39;re talking about, why do you have the <code>if</code> statement as its always true?"},{"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"score":1,"creation_date":1457357211,"post_id":35844700,"comment_id":59355194,"body_markdown":"I omitted some part of the code , as the if and else conditon running inside a loop , as once if statement is true , after cassandraRDD2 assigning it to cassandraRDD , it will go in else part. Then the need to cast arises , I hope I&#39;m clear. I made the hanges Just now. Sorry about that.","body":"I omitted some part of the code , as the if and else conditon running inside a loop , as once if statement is true , after cassandraRDD2 assigning it to cassandraRDD , it will go in else part. Then the need to cast arises , I hope I&#39;m clear. I made the hanges Just now. Sorry about that."},{"owner":{"account_id":2860204,"reputation":4706,"user_id":2455626,"accept_rate":50,"display_name":"Avihoo Mamka"},"score":0,"creation_date":1457357528,"post_id":35844700,"comment_id":59355431,"body_markdown":"The problem is according to [this](https://spark.apache.org/docs/1.6.0/api/java/org/apache/spark/api/java/JavaRDD.html) - The `union()` method returns `JavaRDD&lt;T&gt;` and not your type.","body":"The problem is according to <a href=\"https://spark.apache.org/docs/1.6.0/api/java/org/apache/spark/api/java/JavaRDD.html\" rel=\"nofollow noreferrer\">this</a> - The <code>union()</code> method returns <code>JavaRDD&lt;T&gt;</code> and not your type."},{"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"score":0,"creation_date":1457357703,"post_id":35844700,"comment_id":59355551,"body_markdown":"So which is the best way , Shall I apply a cast , or change the type to JavaRDD&lt;CassandraRow&gt; ?","body":"So which is the best way , Shall I apply a cast , or change the type to JavaRDD&lt;CassandraRow&gt; ?"}],"answers":[{"tags":[],"owner":{"account_id":2860204,"reputation":4706,"user_id":2455626,"accept_rate":50,"display_name":"Avihoo Mamka"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1457439851,"creation_date":1457357772,"answer_id":35845220,"question_id":35844700,"body_markdown":"The problem happens because according to the [docs](https://spark.apache.org/docs/1.6.0/api/java/org/apache/spark/api/java/JavaRDD.html):\r\n\r\n&gt; **Method:** \tunion(JavaRDD&lt;T&gt; other) Return the union of this RDD and another one.\r\n&gt; \r\n&gt; **Return Value**: JavaRDD&lt;T&gt;\r\n\r\nAnd therefore the mismatch.\r\n\r\nBecause according to [this](https://github.com/datastax/spark-cassandra-connector/blob/master/spark-cassandra-connector-java/src/main/java/com/datastax/spark/connector/japi/rdd/CassandraJavaRDD.java):\r\n\r\n    public class CassandraJavaRDD&lt;R&gt; extends JavaRDD&lt;R&gt; {\r\n    ...\r\n    }\r\n\r\nThe `CassandraJavaRDD` class extends `JavaRDD` so you can use:\r\n\r\n\r\n    JavaRDD&lt;CassandraRow&gt; cassandraRDD = null;\r\n    JavaRDD&lt;CassandraRow&gt; cassandraRDD2 = null;\r\n\r\nand therefore the return value of the `union()` method will match its type.","title":"Can not union two CassandraJavaRDD&lt;CassandraRow&gt; in Spark","body":"<p>The problem happens because according to the <a href=\"https://spark.apache.org/docs/1.6.0/api/java/org/apache/spark/api/java/JavaRDD.html\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p><strong>Method:</strong>   union(JavaRDD other) Return the union of this RDD and another one.</p>\n  \n  <p><strong>Return Value</strong>: JavaRDD</p>\n</blockquote>\n\n<p>And therefore the mismatch.</p>\n\n<p>Because according to <a href=\"https://github.com/datastax/spark-cassandra-connector/blob/master/spark-cassandra-connector-java/src/main/java/com/datastax/spark/connector/japi/rdd/CassandraJavaRDD.java\" rel=\"nofollow\">this</a>:</p>\n\n<pre><code>public class CassandraJavaRDD&lt;R&gt; extends JavaRDD&lt;R&gt; {\n...\n}\n</code></pre>\n\n<p>The <code>CassandraJavaRDD</code> class extends <code>JavaRDD</code> so you can use:</p>\n\n<pre><code>JavaRDD&lt;CassandraRow&gt; cassandraRDD = null;\nJavaRDD&lt;CassandraRow&gt; cassandraRDD2 = null;\n</code></pre>\n\n<p>and therefore the return value of the <code>union()</code> method will match its type.</p>\n"}],"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":464,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35845220,"answer_count":1,"score":1,"last_activity_date":1661008536,"creation_date":1457356344,"question_id":35844700,"body_markdown":"As there is a limit to query the data from Cassandra, I&#39;m trying to read the data batch by batch using Spark and storing it in a RDD.\r\n\r\nAnd then I&#39;m  adding all the RDD , using union function.\r\n\r\nHere is my code .\r\n\r\n\tprivate void getDataFromCassandra(JavaSparkContext sc) {\r\n\t\t\r\n\t\t\r\n\t\tCassandraJavaRDD&lt;CassandraRow&gt; cassandraRDD = null ;\r\n\t\tCassandraJavaRDD&lt;CassandraRow&gt; cassandraRDD2  = null;\r\n\r\n        While(Some Condition)\r\n\t\t\r\n\t\t cassandraRDD = CassandraJavaUtil\r\n\t\t\t\t\t.javaFunctions(sc).cassandraTable(&quot;dmp&quot;, &quot;table&quot;).select(&quot;abc&quot;, &quot;xyz&quot;)\r\n\t\t\t\t\t.where(&quot;pid IN (&#39;&quot; + sb + &quot;&#39;)&quot;);\r\n\t\t\r\n\t\tif(cassandraRDD2==null){\r\n\t\t\r\n\t\t\r\n\t\t cassandraRDD2=cassandraRDD;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tcassandraRDD2 =  cassandraRDD2.union(cassandraRDD);\r\n\t\t}\r\n\t}\t\t      \r\n}\r\n\r\nBut in the union I&#39;m getting the following error.\r\n\r\nType mismatch: cannot convert from JavaRDD&lt;CassandraRow&gt; to CassandraJavaRDD&lt;CassandraRow&gt; \r\n\r\nThough the Both the RDD&#39;s is of similar type.\r\n\r\nSo 1) shall I apply a Cast as \r\n\r\n     cassandraRDD2 =  (CassandraJavaRDD&lt;CassandraRow&gt;) cassandraRDD2.union(cassandraRDD);\r\n\r\n2) Or Change the Type of one of the RDD to JavaRDD&lt;CassandraRow&gt;\r\n","title":"Can not union two CassandraJavaRDD&lt;CassandraRow&gt; in Spark","body":"<p>As there is a limit to query the data from Cassandra, I'm trying to read the data batch by batch using Spark and storing it in a RDD.</p>\n\n<p>And then I'm  adding all the RDD , using union function.</p>\n\n<p>Here is my code .</p>\n\n<pre><code>private void getDataFromCassandra(JavaSparkContext sc) {\n\n\n    CassandraJavaRDD&lt;CassandraRow&gt; cassandraRDD = null ;\n    CassandraJavaRDD&lt;CassandraRow&gt; cassandraRDD2  = null;\n\n    While(Some Condition)\n\n     cassandraRDD = CassandraJavaUtil\n                .javaFunctions(sc).cassandraTable(\"dmp\", \"table\").select(\"abc\", \"xyz\")\n                .where(\"pid IN ('\" + sb + \"')\");\n\n    if(cassandraRDD2==null){\n\n\n     cassandraRDD2=cassandraRDD;\n    }\n    else{\n        cassandraRDD2 =  cassandraRDD2.union(cassandraRDD);\n    }\n}             \n</code></pre>\n\n<p>}</p>\n\n<p>But in the union I'm getting the following error.</p>\n\n<p>Type mismatch: cannot convert from JavaRDD to CassandraJavaRDD </p>\n\n<p>Though the Both the RDD's is of similar type.</p>\n\n<p>So 1) shall I apply a Cast as </p>\n\n<pre><code> cassandraRDD2 =  (CassandraJavaRDD&lt;CassandraRow&gt;) cassandraRDD2.union(cassandraRDD);\n</code></pre>\n\n<p>2) Or Change the Type of one of the RDD to JavaRDD</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":13495527,"reputation":549,"user_id":9736497,"display_name":"Alexandros Kourtis"},"score":0,"creation_date":1597591995,"post_id":63438495,"comment_id":112177005,"body_markdown":"Can you upload the code? please provide more details...","body":"Can you upload the code? please provide more details..."}],"answers":[{"tags":[],"owner":{"account_id":18696932,"reputation":185,"user_id":13630035,"display_name":"gabopushups"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1597591111,"creation_date":1597591111,"answer_id":63438540,"question_id":63438495,"body_markdown":"Perhaps you don&#39;t have the main method included. If that is not the problem, try right clicking your class in the project tree and look for an option that says &quot;Set as main class&quot; or something like that","title":"Java error: Could not find or load main class - Netbeans IDE","body":"<p>Perhaps you don't have the main method included. If that is not the problem, try right clicking your class in the project tree and look for an option that says &quot;Set as main class&quot; or something like that</p>\n"},{"tags":[],"owner":{"account_id":13495527,"reputation":549,"user_id":9736497,"display_name":"Alexandros Kourtis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597650947,"creation_date":1597592495,"answer_id":63438816,"question_id":63438495,"body_markdown":"Possible Fixes:\r\n\r\n**Fix 1**\r\n 1. Go to project properties (right click on the folder of your project in netbeans)\r\n 2. On left tab where it shows the categories, click on the &quot;Run&quot; selection\r\n 3. Then click on Browse to find the Main class you use on your project\r\n\r\n**Fix 2**\r\n1. Go to C:\\Users\\name\\AppData\\Local\\Netbeans \r\n2. delete the Cache folder.\r\n3. Rebuild and Run \r\n\r\n**Fix 3**\r\nDownload most recent version of Netbeans\r\n\r\n**Fix 4**\r\nDownload most recent version of JDK and configure Netbeans to use that","title":"Java error: Could not find or load main class - Netbeans IDE","body":"<p>Possible Fixes:</p>\n<p><strong>Fix 1</strong></p>\n<ol>\n<li>Go to project properties (right click on the folder of your project in netbeans)</li>\n<li>On left tab where it shows the categories, click on the &quot;Run&quot; selection</li>\n<li>Then click on Browse to find the Main class you use on your project</li>\n</ol>\n<p><strong>Fix 2</strong></p>\n<ol>\n<li>Go to C:\\Users\\name\\AppData\\Local\\Netbeans</li>\n<li>delete the Cache folder.</li>\n<li>Rebuild and Run</li>\n</ol>\n<p><strong>Fix 3</strong>\nDownload most recent version of Netbeans</p>\n<p><strong>Fix 4</strong>\nDownload most recent version of JDK and configure Netbeans to use that</p>\n"}],"owner":{"account_id":19308308,"reputation":11,"user_id":14114643,"display_name":"supreme_leader"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6182,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1661007903,"creation_date":1597590837,"question_id":63438495,"body_markdown":"So I was making a java program in Netbeans IDE 8.2 and when I tried to run it, I got this error: \r\n\r\n    Error: Could not find or load main class helloworld.HelloWorld\r\n    C:\\Users\\name\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53: Java returned: 1\r\n    BUILD FAILED (total time: 1 second)\r\n(Assume that helloworld is my project name and HelloWorld is my class name)\r\n\r\nEverything was fine before, and I can&#39;t think of what I did that would cause this error to happen. This is the first time this error has happened to me so I don&#39;t know what to do. The code doesn&#39;t seem to have any errors.\r\n\r\nOther projects of mine seemed to also have the exact same problem even though I haven&#39;t opened or edited them in weeks prior to this error occurring.\r\n\r\nI tried many other ways but none of them seems to do the trick. Including deleting the cache folder and setting the main class through the properties tab.\r\n\r\nHere&#39;s a screenshot of my code with the error, my name is crossed out:\r\n[![enter image description here][1]][1]\r\nEven if I type my code directly in the main class, which is class6homework.java, the error still occurs but it says class6homework.class6homework instead of the one in the screenshot.\r\n\r\nAny ideas on how I could fix this?\r\n\r\nUPDATE: I got it to work by moving the folder that contains the project to my desktop, didn&#39;t know why it wouldn&#39;t work in my original location. Thanks for the help.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/io28h.png","title":"Java error: Could not find or load main class - Netbeans IDE","body":"<p>So I was making a java program in Netbeans IDE 8.2 and when I tried to run it, I got this error:</p>\n<pre><code>Error: Could not find or load main class helloworld.HelloWorld\nC:\\Users\\name\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53: Java returned: 1\nBUILD FAILED (total time: 1 second)\n</code></pre>\n<p>(Assume that helloworld is my project name and HelloWorld is my class name)</p>\n<p>Everything was fine before, and I can't think of what I did that would cause this error to happen. This is the first time this error has happened to me so I don't know what to do. The code doesn't seem to have any errors.</p>\n<p>Other projects of mine seemed to also have the exact same problem even though I haven't opened or edited them in weeks prior to this error occurring.</p>\n<p>I tried many other ways but none of them seems to do the trick. Including deleting the cache folder and setting the main class through the properties tab.</p>\n<p>Here's a screenshot of my code with the error, my name is crossed out:\n<a href=\"https://i.stack.imgur.com/io28h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/io28h.png\" alt=\"enter image description here\" /></a>\nEven if I type my code directly in the main class, which is class6homework.java, the error still occurs but it says class6homework.class6homework instead of the one in the screenshot.</p>\n<p>Any ideas on how I could fix this?</p>\n<p>UPDATE: I got it to work by moving the folder that contains the project to my desktop, didn't know why it wouldn't work in my original location. Thanks for the help.</p>\n"},{"tags":["java","multithreading","java.util.concurrent","concurrenthashmap","javaagents"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1661851262,"post_id":73425360,"comment_id":129863910,"body_markdown":"What’s the point of this `ConcurrentStack` class? There’s already `ConcurrentLinkedDeque` provided by Java. But why maintaining this stack of queues at all, instead of just creating a new queue for a thread when needed? Then, your program won’t crash when encountering more than 16 threads but just do its work. Besides that, you start threads but don’t wait for their completion. So it’s not surprising that some of them didn’t perform the intended action(s) yet when you print the recorded data.","body":"What’s the point of this <code>ConcurrentStack</code> class? There’s already <code>ConcurrentLinkedDeque</code> provided by Java. But why maintaining this stack of queues at all, instead of just creating a new queue for a thread when needed? Then, your program won’t crash when encountering more than 16 threads but just do its work. Besides that, you start threads but don’t wait for their completion. So it’s not surprising that some of them didn’t perform the intended action(s) yet when you print the recorded data."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1661889365,"post_id":73425360,"comment_id":129878311,"body_markdown":"So when do you perform `printOutput()` and how do you ensure that it does not happen concurrently to the other operations?","body":"So when do you perform <code>printOutput()</code> and how do you ensure that it does not happen concurrently to the other operations?"}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661007270,"creation_date":1661006772,"answer_id":73427610,"question_id":73425360,"body_markdown":"If `getByThreadId` is called by different threads the use of overlapping get-put will fail and lose one of the values. It&#39;s better to replace with atomic action to ensure all one queue per entry:\r\n\r\n    queueMap.computeIfAbsent(id, k -&gt; new ConcurrentLinkedQueue&lt;&gt;() /* or queueStack.pop() */);\r\n","title":"ConcurrentHashMap of &lt;String, ConcurrentLinkedQueue&gt; pairs not consistently registering additions","body":"<p>If <code>getByThreadId</code> is called by different threads the use of overlapping get-put will fail and lose one of the values. It's better to replace with atomic action to ensure all one queue per entry:</p>\n<pre><code>queueMap.computeIfAbsent(id, k -&gt; new ConcurrentLinkedQueue&lt;&gt;() /* or queueStack.pop() */);\n</code></pre>\n"}],"owner":{"account_id":24236396,"reputation":104,"user_id":18189469,"display_name":"WobbleMeister"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661007270,"creation_date":1660985821,"question_id":73425360,"body_markdown":"**Background**\r\n\r\nI have a program, which by use of a Java agent and ASM, adds to a static `ConcurrentHashMap` containing `ConcurrentLinkedQueues` of `Object` arrays (termed as `ThreadMarker`s in the below snippets). The map&#39;s keys are thread ids and its values are queues of `ThreadMarker`s. Each queue is added to with every new `LINENUMBER` bytecode instruction encountered in a given .class file, where the thread that encountered the line uses its `id` attribute to identify which queue to add to, in the map.\r\n\r\n**Code**\r\n(Note, `QueueMapMediator`&#39;s map&#39;s queues needn&#39;t be `ConcurrentLinkedQueue`s - they are each only accessed by a single thread).\r\n```\r\npublic class QueueMapMediator {\r\n\r\n    private static final ConcurrentHashMap&lt;String, ConcurrentLinkedQueue&lt;ThreadMarker&gt;&gt; queueMap;\r\n\r\n    private static final int CAPACITY;\r\n\r\n    private static final ConcurrentStack&lt;ConcurrentLinkedQueue&lt;ThreadMarker&gt;&gt; queueStack;\r\n\r\n    static {\r\n        CAPACITY = 16; // arbitrary limit - may be assigned any power of 2\r\n        queueMap = new ConcurrentHashMap&lt;&gt;(CAPACITY &lt;&lt; 4, 0.75f, CAPACITY &lt;&lt; 4);\r\n        queueStack = new ConcurrentStack&lt;&gt;();\r\n        for (int i = 0; i &lt; CAPACITY; i++) {\r\n            queueStack.push(new ConcurrentLinkedQueue&lt;&gt;());\r\n        }\r\n    }\r\n    /**\r\n     * Instantiation disallowed\r\n     */\r\n    private QueueMapMediator() {\r\n    }\r\n\r\n    private static ConcurrentLinkedQueue&lt;ThreadMarker&gt; newQueue(String id) {\r\n        ConcurrentLinkedQueue&lt;ThreadMarker&gt; q = queueStack.pop();\r\n        queueMap.put(id, q);\r\n        return q;\r\n    }\r\n\r\n    /**\r\n     * Used by java agent to get map entry pertaining to\r\n     * currently executing thread.\r\n     *\r\n     * @param id    Thread id stored as a key in queueMap\r\n     * @return      value associated with key of value id\r\n     */\r\n    public static ConcurrentLinkedQueue&lt;ThreadMarker&gt; getByThreadId(String id) {\r\n        ConcurrentLinkedQueue&lt;ThreadMarker&gt; q = queueMap.get(id);\r\n        return q != null ? q : newQueue(id);\r\n    }\r\n\r\n    public static String[][] output() {\r\n        return queueMap.entrySet().stream()\r\n                .map(m -&gt; m.getValue().stream().map(e -&gt; new String[]{\r\n                                String.valueOf(e.getElements()[0]),\r\n                                String.valueOf(e.getElements()[1]),\r\n                                String.valueOf(e.getElements()[2]),\r\n                                m.getKey()})\r\n                        .toArray(String[][]::new))\r\n                .flatMap(Arrays::stream)\r\n                .sorted(QueueMapMediator::compareThreadNanos)\r\n                .toArray(String[][]::new);\r\n    }\r\n\r\n    /**\r\n     * @param curr      A String array containing ThreadMarker information\r\n     * @param other     A String array containing ThreadMarker information\r\n     * @return          int result of comparison\r\n     */\r\n    private static int compareThreadNanos(String[] curr, String[] other) {\r\n        long time1 = Long.parseLong(curr[0]);\r\n        long time2 = Long.parseLong(other[0]);\r\n        return Long.compare(time1, time2);\r\n    }\r\n\r\n    public static void printOutput() {\r\n        for (String[] arr : output()) {\r\n            System.out.println(Arrays.toString(arr));\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n```\r\npublic class Agent {\r\n\r\n    static final long START_TIME = System.nanoTime();\r\n\r\n    public static void premain(String args, Instrumentation instrumentation) {\r\n        instrumentation.addTransformer((new ClassFileTransformer() {\r\n            @Override\r\n            public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined, ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {\r\n                if (loader == null) { // bootstrap loader caught by this check - will not load user&#39;s code\r\n                    return null;\r\n                }\r\n\r\n                if (className.startsWith(&quot;application/&quot;)) {\r\n                    return classfileBuffer;\r\n                }\r\n\r\n                ClassNode cn = new ClassNode(ASM9);\r\n                ClassReader cr1 = new ClassReader(classfileBuffer);\r\n                cr1.accept(cn, 0);\r\n\r\n                for (MethodNode mn : cn.methods) {\r\n                    InsnList insns = mn.instructions;\r\n\r\n                    if (insns.size() == 0) {\r\n                        continue;\r\n                    }\r\n\r\n                    int lineNum = -1;\r\n                    int l1 = -1;\r\n                    int l2 = -1;\r\n                    AbstractInsnNode node;\r\n                    int numAdded;\r\n                    for (int i = 0; i &lt; insns.size(); i++) {\r\n                        node = insns.get(i);\r\n                        if (node instanceof LineNumberNode) {\r\n                            lineNum = ((LineNumberNode) node).line;\r\n                        } else if (node instanceof LabelNode) {\r\n                            if (l1 == -1) {\r\n                                l1 = i;\r\n                            } else {\r\n                                l2 = i;\r\n                            }\r\n                        } else if (node instanceof FrameNode) {\r\n                            l1 = i;\r\n                        }\r\n\r\n                        if (lineNum &gt; -1 &amp;&amp; l1 &lt; l2) {\r\n                            InsnList addedInsns = new InsnList();\r\n                            addedInsns.add(new MethodInsnNode(INVOKESTATIC, &quot;java/lang/Thread&quot;,\r\n                                    &quot;currentThread&quot;, &quot;()Ljava/lang/Thread;&quot;, false));\r\n                            addedInsns.add(new MethodInsnNode(INVOKEVIRTUAL, &quot;java/lang/Thread&quot;,\r\n                                    &quot;getId&quot;, &quot;()J&quot;, false));\r\n                            addedInsns.add(new MethodInsnNode(INVOKESTATIC, &quot;java/lang/String&quot;,\r\n                                    &quot;valueOf&quot;, &quot;(J)Ljava/lang/String;&quot;, false));\r\n                            addedInsns.add(new MethodInsnNode(INVOKESTATIC, &quot;application/QueueMapMediator&quot;,\r\n                                    &quot;getByThreadId&quot;,\r\n                                    &quot;(Ljava/lang/String;)Ljava/util/concurrent/ConcurrentLinkedQueue;&quot;,\r\n                                    false));\r\n                            addedInsns.add(new TypeInsnNode(NEW, &quot;application/ThreadMarker&quot;));\r\n                            addedInsns.add(new InsnNode(DUP));\r\n                            addedInsns.add(new MethodInsnNode(INVOKESTATIC, &quot;java/lang/System&quot;,\r\n                                    &quot;nanoTime&quot;, &quot;()J&quot;, false));\r\n                            addedInsns.add(new LdcInsnNode(START_TIME));\r\n                            addedInsns.add(new InsnNode(LSUB));\r\n                            addedInsns.add(new IntInsnNode(BIPUSH, lineNum));\r\n                            addedInsns.add(new LdcInsnNode(className));\r\n                            addedInsns.add(new MethodInsnNode(INVOKESPECIAL, &quot;application/ThreadMarker&quot;,\r\n                                    &quot;&lt;init&gt;&quot;, &quot;(JILjava/lang/String;)V&quot;));\r\n                            addedInsns.add(new MethodInsnNode(INVOKEVIRTUAL,\r\n                                    &quot;java/util/concurrent/ConcurrentLinkedQueue&quot;,\r\n                                    &quot;add&quot;, &quot;(Ljava/lang/Object;)Z&quot;, false));\r\n                            addedInsns.add(new InsnNode(POP));\r\n\r\n                            numAdded = addedInsns.size();\r\n                            insns.insert(insns.get(l1), addedInsns);\r\n                            lineNum = -1;\r\n\r\n                            i += numAdded - 1; // -1 to counteract i incrementing with next iteration\r\n                            l1 = -1;\r\n                            l2 = -1;\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                ClassWriter cw1 = new ClassWriter(ClassWriter.COMPUTE_MAXS);\r\n                cn.accept(cw1);\r\n                return cw1.toByteArray();\r\n\r\n            }\r\n\r\n        }));\r\n\r\n    }\r\n\r\n}\r\n```\r\n```\r\n/**\r\n * @param &lt;E&gt;   type contained in Stack\r\n * @author      Brian Goetz and Tim Peierls\r\n */\r\npublic class ConcurrentStack &lt;E&gt; {\r\n    AtomicReference&lt;Node&lt;E&gt;&gt; top = new AtomicReference&lt;&gt;();\r\n    public void push(E item) {\r\n        Node&lt;E&gt; newHead = new Node&lt;E&gt;(item);\r\n        Node&lt;E&gt; oldHead;\r\n        do {\r\n            oldHead = top.get();\r\n            newHead.next = oldHead;\r\n        } while (!top.compareAndSet(oldHead, newHead));\r\n    }\r\n    public E pop() {\r\n        Node&lt;E&gt; oldHead;\r\n        Node&lt;E&gt; newHead;\r\n        do {\r\n            oldHead = top.get();\r\n            if (oldHead == null)\r\n                return null;\r\n            newHead = oldHead.next;\r\n        } while (!top.compareAndSet(oldHead, newHead));\r\n        return oldHead.item;\r\n    }\r\n    private static class Node &lt;E&gt; {\r\n        public final E item;\r\n        public Node&lt;E&gt; next;\r\n        public Node(E item) {\r\n            this.item = item;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Problem**\r\n\r\nI&#39;m generally getting the expected output (i.e. as many entries per thread as there should be, given the number of source lines they respectively encounter), however occasionally - usually first time running after some time - some entries are missing.\r\n\r\n**Example**\r\n\r\nIf I have the following simple multithreaded program:\r\n\r\n```\r\n1  package test.usercode;\r\n2 \r\n3  import application.QueueMapMediator;\r\n4\r\n5  public class BasicMultithreadedPrinting {\r\n6\r\n7      public static void main(String[] args) throws InterruptedException {\r\n8          for (int i = 0; i &lt; 3; i++) {\r\n9              Thread th = new Thread(() -&gt; {\r\n10                 System.out.println(&quot;Hello&quot;);\r\n11                 System.out.println(&quot;Hello again&quot;);\r\n12                 System.out.println(&quot;Hello once more&quot;);\r\n13             });\r\n14             th.start();\r\n15         }\r\n16         QueueMapMediator.printOutput(); // included to view result of instrumentation\r\n17     }\r\n18 }\r\n```\r\n\r\nIf I instrument it using the above agent, I might get the following unexpected output:\r\n\r\n```\r\nHello\r\nHello\r\nHello\r\nHello again\r\nHello again\r\nHello once more\r\nHello again\r\nHello once more\r\nHello once more\r\n[44959100, 8, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45050000, 9, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45701600, 14, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45762500, 8, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45767300, 9, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45776400, 14, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45813400, 8, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45817400, 9, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45825400, 14, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45862800, 8, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45866700, 9, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45868500, 16, test/usercode/BasicMultithreadedPrinting, 1]\r\n[45892200, 10, test/usercode/BasicMultithreadedPrinting, 23]\r\n[45938500, 11, test/usercode/BasicMultithreadedPrinting, 23]\r\n[46329900, 11, test/usercode/BasicMultithreadedPrinting, 25]\r\n[46500300, 12, test/usercode/BasicMultithreadedPrinting, 23]\r\n[46656400, 12, test/usercode/BasicMultithreadedPrinting, 25]\r\n```\r\n\r\n...where one of the spawned threads doesn&#39;t register at all and another with `id` 25, only registered 2 of 3 lines it encountered. I have since tried adding strategically placed `print` lines to work out where the fault is occurring, but, I haven&#39;t been able to reproduce the issue yet.\r\n\r\nThanks in advance to anyone who makes it through this rather long question. I&#39;ve included a fair amount of code in the hope that it yields more meaningful suggestions. I&#39;ve included the `javaagents` tag on the off-chance the agent has something to do with the issue described and I&#39;m not seeing it.\r\n ","title":"ConcurrentHashMap of &lt;String, ConcurrentLinkedQueue&gt; pairs not consistently registering additions","body":"<p><strong>Background</strong></p>\n<p>I have a program, which by use of a Java agent and ASM, adds to a static <code>ConcurrentHashMap</code> containing <code>ConcurrentLinkedQueues</code> of <code>Object</code> arrays (termed as <code>ThreadMarker</code>s in the below snippets). The map's keys are thread ids and its values are queues of <code>ThreadMarker</code>s. Each queue is added to with every new <code>LINENUMBER</code> bytecode instruction encountered in a given .class file, where the thread that encountered the line uses its <code>id</code> attribute to identify which queue to add to, in the map.</p>\n<p><strong>Code</strong>\n(Note, <code>QueueMapMediator</code>'s map's queues needn't be <code>ConcurrentLinkedQueue</code>s - they are each only accessed by a single thread).</p>\n<pre><code>public class QueueMapMediator {\n\n    private static final ConcurrentHashMap&lt;String, ConcurrentLinkedQueue&lt;ThreadMarker&gt;&gt; queueMap;\n\n    private static final int CAPACITY;\n\n    private static final ConcurrentStack&lt;ConcurrentLinkedQueue&lt;ThreadMarker&gt;&gt; queueStack;\n\n    static {\n        CAPACITY = 16; // arbitrary limit - may be assigned any power of 2\n        queueMap = new ConcurrentHashMap&lt;&gt;(CAPACITY &lt;&lt; 4, 0.75f, CAPACITY &lt;&lt; 4);\n        queueStack = new ConcurrentStack&lt;&gt;();\n        for (int i = 0; i &lt; CAPACITY; i++) {\n            queueStack.push(new ConcurrentLinkedQueue&lt;&gt;());\n        }\n    }\n    /**\n     * Instantiation disallowed\n     */\n    private QueueMapMediator() {\n    }\n\n    private static ConcurrentLinkedQueue&lt;ThreadMarker&gt; newQueue(String id) {\n        ConcurrentLinkedQueue&lt;ThreadMarker&gt; q = queueStack.pop();\n        queueMap.put(id, q);\n        return q;\n    }\n\n    /**\n     * Used by java agent to get map entry pertaining to\n     * currently executing thread.\n     *\n     * @param id    Thread id stored as a key in queueMap\n     * @return      value associated with key of value id\n     */\n    public static ConcurrentLinkedQueue&lt;ThreadMarker&gt; getByThreadId(String id) {\n        ConcurrentLinkedQueue&lt;ThreadMarker&gt; q = queueMap.get(id);\n        return q != null ? q : newQueue(id);\n    }\n\n    public static String[][] output() {\n        return queueMap.entrySet().stream()\n                .map(m -&gt; m.getValue().stream().map(e -&gt; new String[]{\n                                String.valueOf(e.getElements()[0]),\n                                String.valueOf(e.getElements()[1]),\n                                String.valueOf(e.getElements()[2]),\n                                m.getKey()})\n                        .toArray(String[][]::new))\n                .flatMap(Arrays::stream)\n                .sorted(QueueMapMediator::compareThreadNanos)\n                .toArray(String[][]::new);\n    }\n\n    /**\n     * @param curr      A String array containing ThreadMarker information\n     * @param other     A String array containing ThreadMarker information\n     * @return          int result of comparison\n     */\n    private static int compareThreadNanos(String[] curr, String[] other) {\n        long time1 = Long.parseLong(curr[0]);\n        long time2 = Long.parseLong(other[0]);\n        return Long.compare(time1, time2);\n    }\n\n    public static void printOutput() {\n        for (String[] arr : output()) {\n            System.out.println(Arrays.toString(arr));\n        }\n    }\n\n}\n</code></pre>\n<pre><code>public class Agent {\n\n    static final long START_TIME = System.nanoTime();\n\n    public static void premain(String args, Instrumentation instrumentation) {\n        instrumentation.addTransformer((new ClassFileTransformer() {\n            @Override\n            public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined, ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {\n                if (loader == null) { // bootstrap loader caught by this check - will not load user's code\n                    return null;\n                }\n\n                if (className.startsWith(&quot;application/&quot;)) {\n                    return classfileBuffer;\n                }\n\n                ClassNode cn = new ClassNode(ASM9);\n                ClassReader cr1 = new ClassReader(classfileBuffer);\n                cr1.accept(cn, 0);\n\n                for (MethodNode mn : cn.methods) {\n                    InsnList insns = mn.instructions;\n\n                    if (insns.size() == 0) {\n                        continue;\n                    }\n\n                    int lineNum = -1;\n                    int l1 = -1;\n                    int l2 = -1;\n                    AbstractInsnNode node;\n                    int numAdded;\n                    for (int i = 0; i &lt; insns.size(); i++) {\n                        node = insns.get(i);\n                        if (node instanceof LineNumberNode) {\n                            lineNum = ((LineNumberNode) node).line;\n                        } else if (node instanceof LabelNode) {\n                            if (l1 == -1) {\n                                l1 = i;\n                            } else {\n                                l2 = i;\n                            }\n                        } else if (node instanceof FrameNode) {\n                            l1 = i;\n                        }\n\n                        if (lineNum &gt; -1 &amp;&amp; l1 &lt; l2) {\n                            InsnList addedInsns = new InsnList();\n                            addedInsns.add(new MethodInsnNode(INVOKESTATIC, &quot;java/lang/Thread&quot;,\n                                    &quot;currentThread&quot;, &quot;()Ljava/lang/Thread;&quot;, false));\n                            addedInsns.add(new MethodInsnNode(INVOKEVIRTUAL, &quot;java/lang/Thread&quot;,\n                                    &quot;getId&quot;, &quot;()J&quot;, false));\n                            addedInsns.add(new MethodInsnNode(INVOKESTATIC, &quot;java/lang/String&quot;,\n                                    &quot;valueOf&quot;, &quot;(J)Ljava/lang/String;&quot;, false));\n                            addedInsns.add(new MethodInsnNode(INVOKESTATIC, &quot;application/QueueMapMediator&quot;,\n                                    &quot;getByThreadId&quot;,\n                                    &quot;(Ljava/lang/String;)Ljava/util/concurrent/ConcurrentLinkedQueue;&quot;,\n                                    false));\n                            addedInsns.add(new TypeInsnNode(NEW, &quot;application/ThreadMarker&quot;));\n                            addedInsns.add(new InsnNode(DUP));\n                            addedInsns.add(new MethodInsnNode(INVOKESTATIC, &quot;java/lang/System&quot;,\n                                    &quot;nanoTime&quot;, &quot;()J&quot;, false));\n                            addedInsns.add(new LdcInsnNode(START_TIME));\n                            addedInsns.add(new InsnNode(LSUB));\n                            addedInsns.add(new IntInsnNode(BIPUSH, lineNum));\n                            addedInsns.add(new LdcInsnNode(className));\n                            addedInsns.add(new MethodInsnNode(INVOKESPECIAL, &quot;application/ThreadMarker&quot;,\n                                    &quot;&lt;init&gt;&quot;, &quot;(JILjava/lang/String;)V&quot;));\n                            addedInsns.add(new MethodInsnNode(INVOKEVIRTUAL,\n                                    &quot;java/util/concurrent/ConcurrentLinkedQueue&quot;,\n                                    &quot;add&quot;, &quot;(Ljava/lang/Object;)Z&quot;, false));\n                            addedInsns.add(new InsnNode(POP));\n\n                            numAdded = addedInsns.size();\n                            insns.insert(insns.get(l1), addedInsns);\n                            lineNum = -1;\n\n                            i += numAdded - 1; // -1 to counteract i incrementing with next iteration\n                            l1 = -1;\n                            l2 = -1;\n                        }\n\n                    }\n\n                }\n\n                ClassWriter cw1 = new ClassWriter(ClassWriter.COMPUTE_MAXS);\n                cn.accept(cw1);\n                return cw1.toByteArray();\n\n            }\n\n        }));\n\n    }\n\n}\n</code></pre>\n<pre><code>/**\n * @param &lt;E&gt;   type contained in Stack\n * @author      Brian Goetz and Tim Peierls\n */\npublic class ConcurrentStack &lt;E&gt; {\n    AtomicReference&lt;Node&lt;E&gt;&gt; top = new AtomicReference&lt;&gt;();\n    public void push(E item) {\n        Node&lt;E&gt; newHead = new Node&lt;E&gt;(item);\n        Node&lt;E&gt; oldHead;\n        do {\n            oldHead = top.get();\n            newHead.next = oldHead;\n        } while (!top.compareAndSet(oldHead, newHead));\n    }\n    public E pop() {\n        Node&lt;E&gt; oldHead;\n        Node&lt;E&gt; newHead;\n        do {\n            oldHead = top.get();\n            if (oldHead == null)\n                return null;\n            newHead = oldHead.next;\n        } while (!top.compareAndSet(oldHead, newHead));\n        return oldHead.item;\n    }\n    private static class Node &lt;E&gt; {\n        public final E item;\n        public Node&lt;E&gt; next;\n        public Node(E item) {\n            this.item = item;\n        }\n    }\n}\n</code></pre>\n<p><strong>Problem</strong></p>\n<p>I'm generally getting the expected output (i.e. as many entries per thread as there should be, given the number of source lines they respectively encounter), however occasionally - usually first time running after some time - some entries are missing.</p>\n<p><strong>Example</strong></p>\n<p>If I have the following simple multithreaded program:</p>\n<pre><code>1  package test.usercode;\n2 \n3  import application.QueueMapMediator;\n4\n5  public class BasicMultithreadedPrinting {\n6\n7      public static void main(String[] args) throws InterruptedException {\n8          for (int i = 0; i &lt; 3; i++) {\n9              Thread th = new Thread(() -&gt; {\n10                 System.out.println(&quot;Hello&quot;);\n11                 System.out.println(&quot;Hello again&quot;);\n12                 System.out.println(&quot;Hello once more&quot;);\n13             });\n14             th.start();\n15         }\n16         QueueMapMediator.printOutput(); // included to view result of instrumentation\n17     }\n18 }\n</code></pre>\n<p>If I instrument it using the above agent, I might get the following unexpected output:</p>\n<pre><code>Hello\nHello\nHello\nHello again\nHello again\nHello once more\nHello again\nHello once more\nHello once more\n[44959100, 8, test/usercode/BasicMultithreadedPrinting, 1]\n[45050000, 9, test/usercode/BasicMultithreadedPrinting, 1]\n[45701600, 14, test/usercode/BasicMultithreadedPrinting, 1]\n[45762500, 8, test/usercode/BasicMultithreadedPrinting, 1]\n[45767300, 9, test/usercode/BasicMultithreadedPrinting, 1]\n[45776400, 14, test/usercode/BasicMultithreadedPrinting, 1]\n[45813400, 8, test/usercode/BasicMultithreadedPrinting, 1]\n[45817400, 9, test/usercode/BasicMultithreadedPrinting, 1]\n[45825400, 14, test/usercode/BasicMultithreadedPrinting, 1]\n[45862800, 8, test/usercode/BasicMultithreadedPrinting, 1]\n[45866700, 9, test/usercode/BasicMultithreadedPrinting, 1]\n[45868500, 16, test/usercode/BasicMultithreadedPrinting, 1]\n[45892200, 10, test/usercode/BasicMultithreadedPrinting, 23]\n[45938500, 11, test/usercode/BasicMultithreadedPrinting, 23]\n[46329900, 11, test/usercode/BasicMultithreadedPrinting, 25]\n[46500300, 12, test/usercode/BasicMultithreadedPrinting, 23]\n[46656400, 12, test/usercode/BasicMultithreadedPrinting, 25]\n</code></pre>\n<p>...where one of the spawned threads doesn't register at all and another with <code>id</code> 25, only registered 2 of 3 lines it encountered. I have since tried adding strategically placed <code>print</code> lines to work out where the fault is occurring, but, I haven't been able to reproduce the issue yet.</p>\n<p>Thanks in advance to anyone who makes it through this rather long question. I've included a fair amount of code in the hope that it yields more meaningful suggestions. I've included the <code>javaagents</code> tag on the off-chance the agent has something to do with the issue described and I'm not seeing it.</p>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1660994361,"post_id":73426219,"comment_id":129668155,"body_markdown":"Just print `area` inside of the loop after you print `radius`.","body":"Just print <code>area</code> inside of the loop after you print <code>radius</code>."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1660995649,"creation_date":1660995649,"answer_id":73426401,"question_id":73426219,"body_markdown":"You did not post the full code, but from your output one can guess you have something like this:\r\n\r\n    int radius = 0;\r\n    double area = 0.0;\r\n    for (int i = 3; i &lt;= 5; i++)\r\n    {\r\n        radius = i;\r\n        area = (Math.PI * (radius * radius));\r\n        System.out.println (radius)\r\n    }\r\n    System.out.println(&quot;Radius: &quot; + radius);\r\n    System.out.println(&quot;Area: &quot; + area);\r\n\r\nWith that your program loops over i = 3, 4, 5; for each i it calculates the area and prints the radius.\r\nOnly when the loop is over it prints radius and area - and exactly that is what you see in the output.\r\n\r\nChange your code as commented by Federico to look like this:\r\n\r\n    int radius = 0;\r\n    double area = 0.0;\r\n    for (int i = 3; i &lt;= 5; i++)\r\n    {\r\n        radius = i;\r\n        area = (Math.PI * (radius * radius));\r\n        System.out.println(&quot;Radius: &quot; + radius);\r\n        System.out.println(&quot;Area: &quot; + area);\r\n    }\r\n\r\nThen it will loop over the same values, and for each perform the calculation and print the result.","title":"How do I apply a mathematical equation to each number in a for loop?","body":"<p>You did not post the full code, but from your output one can guess you have something like this:</p>\n<pre><code>int radius = 0;\ndouble area = 0.0;\nfor (int i = 3; i &lt;= 5; i++)\n{\n    radius = i;\n    area = (Math.PI * (radius * radius));\n    System.out.println (radius)\n}\nSystem.out.println(&quot;Radius: &quot; + radius);\nSystem.out.println(&quot;Area: &quot; + area);\n</code></pre>\n<p>With that your program loops over i = 3, 4, 5; for each i it calculates the area and prints the radius.\nOnly when the loop is over it prints radius and area - and exactly that is what you see in the output.</p>\n<p>Change your code as commented by Federico to look like this:</p>\n<pre><code>int radius = 0;\ndouble area = 0.0;\nfor (int i = 3; i &lt;= 5; i++)\n{\n    radius = i;\n    area = (Math.PI * (radius * radius));\n    System.out.println(&quot;Radius: &quot; + radius);\n    System.out.println(&quot;Area: &quot; + area);\n}\n</code></pre>\n<p>Then it will loop over the same values, and for each perform the calculation and print the result.</p>\n"},{"tags":[],"owner":{"account_id":26114945,"reputation":26,"user_id":19808242,"display_name":"Mando"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661007268,"creation_date":1660998538,"answer_id":73426708,"question_id":73426219,"body_markdown":"Assuming you are using java 8, take advantage of it.\r\n\r\n```java\r\nIntStream\r\n    .range(3, 6)\r\n    .forEach(radius -&gt; {\r\n        float area = (float) (Math.PI * (radius * radius));\r\n        System.out.println(&quot;Radius: &quot; + radius);\r\n        System.out.println(&quot;Area: &quot; + area);\r\n    });\r\n```","title":"How do I apply a mathematical equation to each number in a for loop?","body":"<p>Assuming you are using java 8, take advantage of it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>IntStream\n    .range(3, 6)\n    .forEach(radius -&gt; {\n        float area = (float) (Math.PI * (radius * radius));\n        System.out.println(&quot;Radius: &quot; + radius);\n        System.out.println(&quot;Area: &quot; + area);\n    });\n</code></pre>\n"}],"owner":{"account_id":20045822,"reputation":45,"user_id":14695508,"display_name":"NobleRuckus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":73426401,"answer_count":2,"score":-3,"last_activity_date":1661007268,"creation_date":1660994154,"question_id":73426219,"body_markdown":"I&#39;ve done some searching around and tried some solutions I&#39;ve found, but a lot of them result in the same problem I am having. I&#39;d like to apply a mathematical equation to each number of a for loop. The problem I am having is that the equation only occurs on the last number in that for loop. For example:\r\n\r\n```\r\nfor (int i = 3; i &lt;= 5; i++)\r\n{\r\n\tradius = i;\r\n\tarea = (Math.PI * (radius * radius));\r\n    System.out.println (radius)\r\n}\r\n```\r\n\r\nMy code is much more extensive than this, but this is the part I am having issues with. It prints:\r\n\r\n```\r\n3\r\n4\r\n5\r\nRadius: 5\r\nArea: 78.53981633974483\r\n```\r\nI tried using for each loop, while loop, putting the numbers in a variable to pull from, I&#39;m kind of at my wits end on what to try myself without asking. I&#39;d like the for loop to look like:\r\n\r\n```\r\n3\r\nRadius: 3\r\nArea: //... the area with radius 3...\r\n4\r\nRadius: 4\r\nArea: //... the area with radius 4...\r\n5\r\nRadius: 5\r\nArea: //...area with radius 5...\r\n```\r\nHow would I go about going through each iteration of the for loop and apply the mathematical equation to it?","title":"How do I apply a mathematical equation to each number in a for loop?","body":"<p>I've done some searching around and tried some solutions I've found, but a lot of them result in the same problem I am having. I'd like to apply a mathematical equation to each number of a for loop. The problem I am having is that the equation only occurs on the last number in that for loop. For example:</p>\n<pre><code>for (int i = 3; i &lt;= 5; i++)\n{\n    radius = i;\n    area = (Math.PI * (radius * radius));\n    System.out.println (radius)\n}\n</code></pre>\n<p>My code is much more extensive than this, but this is the part I am having issues with. It prints:</p>\n<pre><code>3\n4\n5\nRadius: 5\nArea: 78.53981633974483\n</code></pre>\n<p>I tried using for each loop, while loop, putting the numbers in a variable to pull from, I'm kind of at my wits end on what to try myself without asking. I'd like the for loop to look like:</p>\n<pre><code>3\nRadius: 3\nArea: //... the area with radius 3...\n4\nRadius: 4\nArea: //... the area with radius 4...\n5\nRadius: 5\nArea: //...area with radius 5...\n</code></pre>\n<p>How would I go about going through each iteration of the for loop and apply the mathematical equation to it?</p>\n"},{"tags":["java","lombok","mapstruct"],"comments":[{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1660894853,"post_id":73410550,"comment_id":129645936,"body_markdown":"It looks like MapStruct thinks it&#39;s dealing with a regular Java bean (with a no-args constructor, getters and setters). Did you regenerate the MapStruct mappers, or are you compiling the code with an old mapper that was originally built when `SomeClass` was still a regular class?","body":"It looks like MapStruct thinks it&#39;s dealing with a regular Java bean (with a no-args constructor, getters and setters). Did you regenerate the MapStruct mappers, or are you compiling the code with an old mapper that was originally built when <code>SomeClass</code> was still a regular class?"},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":1,"creation_date":1660897613,"post_id":73410550,"comment_id":129646830,"body_markdown":"I believe that the problem is the same as in https://stackoverflow.com/questions/47676369/mapstruct-and-lombok-not-working-together and the `lombok-mapstruct-binding` dependency is missing","body":"I believe that the problem is the same as in <a href=\"https://stackoverflow.com/questions/47676369/mapstruct-and-lombok-not-working-together\" title=\"mapstruct and lombok not working together\">stackoverflow.com/questions/47676369/&hellip;</a> and the <code>lombok-mapstruct-binding</code> dependency is missing"},{"owner":{"account_id":4865123,"reputation":325,"user_id":4665047,"accept_rate":58,"display_name":"sant016"},"score":0,"creation_date":1660923915,"post_id":73410550,"comment_id":129656310,"body_markdown":"This mapstruct lombok binding dependency was already added. Version is 0.2.0, which is why I don&#39;t think that doesn&#39;t resolve the issue","body":"This mapstruct lombok binding dependency was already added. Version is 0.2.0, which is why I don&#39;t think that doesn&#39;t resolve the issue"}],"owner":{"account_id":4865123,"reputation":325,"user_id":4665047,"accept_rate":58,"display_name":"sant016"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660897625,"answer_count":0,"score":0,"last_activity_date":1661007087,"creation_date":1660866854,"question_id":73410550,"body_markdown":"I&#39;m moving some code from Java 11 to Java 17 and I&#39;m having an issue using Mapstruct to convert a class to a record (that was previously a class).\r\n\r\nLet&#39;s say I have this record\r\n\r\n```java\r\npublic record SomeRecord(String a, String b, String c) {}\r\n```\r\n\r\nAnd I have this other class using Lombok annotations:\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class SomeClass{\r\n  private String x;\r\n  private String y;\r\n  private String z;\r\n}\r\n```\r\n\r\nLater in my mapping I have a function to convert from `SomeClass` to `SomeRecord`\r\n\r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface Mapper {\r\n\r\n  @Mapping(target = &quot;c&quot;, source = &quot;someClass.z&quot;, qualifiedByName = &quot;mapperFunction&quot;)\r\n  SomeRecord toSomeRecord(SomeClass someClass);\r\n\r\n  @Named(&quot;mapperFunction&quot;)\r\n  static String someTransformation(String s) {\r\n    //implementation not relevant\r\n  }\r\n}\r\n```\r\n\r\nAnd I&#39;m getting two compiling errors:\r\n - First it says that &quot;Unknown property &#39;c&#39; in result type SomeRecord. Did you mean &#39;null&#39;?&quot;\r\n - Secondly it states that there&#39;s no &quot;accessible parameterless constructor for `SomeRecord`&quot;.\r\n\r\nI did research and found that mapstruct is supporting java records so it&#39;s not clear for me why these errors are occurring. \r\n\r\nI&#39;m using:\r\n - mapstruct 1.5.2.Final (latest as of publication date)\r\n - lombok 1.18.22\r\n - openjdk 17.0.4\r\n\r\nNote: Maybe it is evident that I should also move `SomeClass` to a record, but for now please assume this is not possible.\r\n\r\n**Edit:** I&#39;m also using Mapstruct + lombok binding and these errors are happening despite.","title":"Mapstruct not working properly with Java 17 records","body":"<p>I'm moving some code from Java 11 to Java 17 and I'm having an issue using Mapstruct to convert a class to a record (that was previously a class).</p>\n<p>Let's say I have this record</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record SomeRecord(String a, String b, String c) {}\n</code></pre>\n<p>And I have this other class using Lombok annotations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class SomeClass{\n  private String x;\n  private String y;\n  private String z;\n}\n</code></pre>\n<p>Later in my mapping I have a function to convert from <code>SomeClass</code> to <code>SomeRecord</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface Mapper {\n\n  @Mapping(target = &quot;c&quot;, source = &quot;someClass.z&quot;, qualifiedByName = &quot;mapperFunction&quot;)\n  SomeRecord toSomeRecord(SomeClass someClass);\n\n  @Named(&quot;mapperFunction&quot;)\n  static String someTransformation(String s) {\n    //implementation not relevant\n  }\n}\n</code></pre>\n<p>And I'm getting two compiling errors:</p>\n<ul>\n<li>First it says that &quot;Unknown property 'c' in result type SomeRecord. Did you mean 'null'?&quot;</li>\n<li>Secondly it states that there's no &quot;accessible parameterless constructor for <code>SomeRecord</code>&quot;.</li>\n</ul>\n<p>I did research and found that mapstruct is supporting java records so it's not clear for me why these errors are occurring.</p>\n<p>I'm using:</p>\n<ul>\n<li>mapstruct 1.5.2.Final (latest as of publication date)</li>\n<li>lombok 1.18.22</li>\n<li>openjdk 17.0.4</li>\n</ul>\n<p>Note: Maybe it is evident that I should also move <code>SomeClass</code> to a record, but for now please assume this is not possible.</p>\n<p><strong>Edit:</strong> I'm also using Mapstruct + lombok binding and these errors are happening despite.</p>\n"},{"tags":["java","oop","design-patterns","google-cloud-pubsub"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1660764190,"post_id":73391989,"comment_id":129612567,"body_markdown":"can you construct the `Publisher` inside the `SubscriptionType` enum? If this is acceptable for you I can provide a solution. I mean without using `@Value` unluckily","body":"can you construct the <code>Publisher</code> inside the <code>SubscriptionType</code> enum? If this is acceptable for you I can provide a solution. I mean without using <code>@Value</code> unluckily"}],"answers":[{"tags":[],"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661006827,"creation_date":1660766889,"answer_id":73394360,"question_id":73391989,"body_markdown":"You could do it without declaring the `@Bean` inside `NotificationPublisherConfiguration`, but be aware that this makes `NotificationService` quite impossible to test because you can&#39;t mock the injected beans, you can&#39;t use `@Value` properties and also each call to `publishMessage` will create a new `Publisher` but I think this can be solved somehow for example using a static method in a bean as stated [here](https://stackoverflow.com/questions/12537851/accessing-spring-beans-in-static-method)(if this is feasible you can also use injection and `@Value` and you will also be able to test `NotificationService` Mocking the static methods that will return the beans but I’ve not tryied) or maybe better with a sort of factory that produces singletons (also here you can mock the static methods an so you will be able to test)\r\n```\r\npublic enum SubscriptionType {\r\n    WEBSOCKET {\r\n        @Override\r\n\t\tprotected Publisher getPublisher() throws Exception {\r\n\t\t\treturn Publisher.newBuilder(\r\n                ProjectTopicName.newBuilder()\r\n                        .setProject(&quot;you must hardcode the string&quot;)\r\n                        .setTopic(&quot;you must hardcode the string&quot;)\r\n                        .build()\r\n             ).build();\r\n\t\t}\r\n    },\r\n    GRPC {\r\n        @Override\r\n\t\tprotected Publisher getPublisher() throws Exception {\r\n            return Publisher.newBuilder(\r\n                ProjectTopicName.newBuilder()\r\n                        .setProject(&quot;you must hardcode the string&quot;)\r\n                        .setTopic(&quot;you must hardcode the string&quot;)\r\n                        .build()\r\n         ).build();\r\n    };\r\n    \r\n    protected abstract Publisher getPublisher() throws Exception;\r\n\r\n    public void publishMessage(String eventBody) {\r\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\r\n            .setData(eventBody)\r\n            .build();\r\n\r\n        ApiFuture&lt;String&gt; publish;\r\n\r\n        try {\r\n            publish = getPublisher().publish(pubsubMessage);\r\n            log.debug(&quot;Message published: {}, on {}&quot;, pubsubMessage, name());\r\n        } catch (Exception e) {}\r\n    }\r\n    \r\n}\r\n```\r\nand your `NotificationService` becomes:\r\n```\r\npublic class NotificationService {\r\n\r\npublic void post(Map&lt;SubscriptionType, Set&lt;String&gt;, String eventBody&gt; subscriptionIdsByProtocol) throws Exception {\r\n\r\n    for (Map.Entry&lt;SubscriptionType, Set&lt;String&gt;&gt; entry : subscriptionIdsByProtocol.entrySet()) {\r\n        entry.getKey().publishMessage(eventBody);\r\n    }\r\n}\r\n```\r\n\r\nYou can also write the enum like this it solves the singleton problem but makes the code untestable:\r\n```\r\npublic enum SubscriptionType {\r\n    WEBSOCKET(Publisher.newBuilder(\r\n                ProjectTopicName.newBuilder()\r\n                        .setProject(&quot;you must hardcode the string&quot;)\r\n                        .setTopic(&quot;you must hardcode the string&quot;)\r\n                        .build()),\r\n    GRPC(Publisher.newBuilder(\r\n                ProjectTopicName.newBuilder()\r\n                        .setProject(&quot;you must hardcode the string&quot;)\r\n                        .setTopic(&quot;you must hardcode the string&quot;)\r\n                        .build());\r\n    \r\n    private Publisher publisher;\r\n\r\n    private SubscriptionType(Publisher publisher) {\r\n        this.publisher = publisher;\r\n    }\r\n\r\n    public void publishMessage(String eventBody) {\r\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\r\n            .setData(eventBody)\r\n            .build();\r\n\r\n        ApiFuture&lt;String&gt; publish;\r\n\r\n        try {\r\n            publish = publisher.publish(pubsubMessage);\r\n            log.debug(&quot;Message published: {}, on {}&quot;, pubsubMessage, name());\r\n        } catch (Exception e) {}\r\n    }\r\n    \r\n}\r\n```\r\nI still prefer a factory, that makes the code testble.\r\n\r\nOtherwise you can try to mock `Publisher.newBuilder` and this will solve all the testing problems but you still can’t use `@Value`\r\n\r\n**Edit**: I&#39;ve had the time to play a little bit with it this is the solution i come with:\r\n1) you can have the configuration class:\r\n```\r\n@Configuration\r\npublic class NotificationPublisherConfiguration {\r\n\r\n    @Bean(name=&quot;websocketPublisher&quot;)\r\n    public Publisher websocketPublisher(@Value(&quot;${gcp.projectId}&quot;) String gcpProjectId, @Value(&quot;${gcp.pubsub.notificationWebsocket}&quot;) String topicId) throws Exception {\r\n\r\n        return Publisher.newBuilder(\r\n                ProjectTopicName.newBuilder()\r\n                        .setProject(gcpProjectId)\r\n                        .setTopic(topicId)\r\n                        .build()\r\n        ).build();\r\n    }\r\n\r\n    @Bean(name=&quot;grpcPublisher&quot;)\r\n    public Publisher grpcPublisher(@Value(&quot;${gcp.projectId}&quot;) String gcpProjectId, @Value(&quot;${gcp.pubsub.notificationGrpc}&quot;) String topicId) throws Exception {\r\n        \r\n        return Publisher.newBuilder(\r\n                ProjectTopicName.newBuilder()\r\n                        .setProject(gcpProjectId)\r\n                        .setTopic(topicId)\r\n                        .build()\r\n        ).build();\r\n    }\r\n}\r\n```\r\n2) We will use a component as factory:\r\n```\r\n@Component\r\npublic class PublisherFactory implements InitializingBean {\r\n\t\r\n\tprivate static final HashMap&lt;SubscriptionType, Publisher&gt; map = new HashMap&lt;&gt;();\r\n\t\r\n\t@Autowired\r\n\t@Qualifier(&quot;websocketPublisher&quot;)\r\n\tprivate Publisher webSocketPublisher;\r\n\t\r\n\t@Autowired\r\n\t@Qualifier(&quot;grpcPublisher&quot;)\r\n\tprivate Publisher grpcPublisher;\r\n\t\r\n\t@Override\r\n    public void afterPropertiesSet() throws Exception {\r\n        map.map(SubscriptionType.WEBSOCKET, webSocketPublisher);\r\n        map.put(SubscriptionType.GRPC, grpcPublisher);\r\n    }\r\n\t\r\n\tpublic static Publisher getPublisher(SubscriptionType protocol) {\r\n\t\treturn map.get(protocol);\r\n\t}\r\n\r\n}\r\n```\r\n3) the enum will look like this:\r\n```\r\npublic enum SubscriptionType {\r\n\tWEBSOCKET {\r\n\t\t@Override\r\n\t\tprotected String getPublisher() {\r\n\t\t\treturn PublisherFactory.getPublisher(this);\r\n\t\t}\r\n\t},\r\n\tGRPC {\r\n\t\t@Override\r\n\t\tprotected String getPublisher() {\r\n\t\t\treturn PublisherFactory.getPublisher(this);\r\n\t\t}\r\n\t};\r\n\t\r\n\tprotected abstract String getPublisher();\r\n\r\n    public void publishMessage(String eventBody) {\r\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\r\n            .setData(eventBody)\r\n            .build();\r\n\r\n        ApiFuture&lt;String&gt; publish;\r\n\r\n        try {\r\n            publish = getPublisher().publish(pubsubMessage);\r\n            log.debug(&quot;Message published: {}, on {}&quot;, pubsubMessage, name());\r\n        } catch (Exception e) {}\r\n    }\r\n}\r\n```\r\n4) The notification service:\r\n```\r\npublic class NotificationService {\r\n\r\npublic void post(Map&lt;SubscriptionType, Set&lt;String&gt;, String eventBody&gt; subscriptionIdsByProtocol) throws Exception {\r\n\r\n    for (Map.Entry&lt;SubscriptionType, Set&lt;String&gt;&gt; entry : subscriptionIdsByProtocol.entrySet()) {\r\n        entry.getKey().publishMessage(eventBody);\r\n    }\r\n}\r\n```\r\nWhit this you can test and use injection and @Value","title":"Choose dependency object based on Enum","body":"<p>You could do it without declaring the <code>@Bean</code> inside <code>NotificationPublisherConfiguration</code>, but be aware that this makes <code>NotificationService</code> quite impossible to test because you can't mock the injected beans, you can't use <code>@Value</code> properties and also each call to <code>publishMessage</code> will create a new <code>Publisher</code> but I think this can be solved somehow for example using a static method in a bean as stated <a href=\"https://stackoverflow.com/questions/12537851/accessing-spring-beans-in-static-method\">here</a>(if this is feasible you can also use injection and <code>@Value</code> and you will also be able to test <code>NotificationService</code> Mocking the static methods that will return the beans but I’ve not tryied) or maybe better with a sort of factory that produces singletons (also here you can mock the static methods an so you will be able to test)</p>\n<pre><code>public enum SubscriptionType {\n    WEBSOCKET {\n        @Override\n        protected Publisher getPublisher() throws Exception {\n            return Publisher.newBuilder(\n                ProjectTopicName.newBuilder()\n                        .setProject(&quot;you must hardcode the string&quot;)\n                        .setTopic(&quot;you must hardcode the string&quot;)\n                        .build()\n             ).build();\n        }\n    },\n    GRPC {\n        @Override\n        protected Publisher getPublisher() throws Exception {\n            return Publisher.newBuilder(\n                ProjectTopicName.newBuilder()\n                        .setProject(&quot;you must hardcode the string&quot;)\n                        .setTopic(&quot;you must hardcode the string&quot;)\n                        .build()\n         ).build();\n    };\n    \n    protected abstract Publisher getPublisher() throws Exception;\n\n    public void publishMessage(String eventBody) {\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\n            .setData(eventBody)\n            .build();\n\n        ApiFuture&lt;String&gt; publish;\n\n        try {\n            publish = getPublisher().publish(pubsubMessage);\n            log.debug(&quot;Message published: {}, on {}&quot;, pubsubMessage, name());\n        } catch (Exception e) {}\n    }\n    \n}\n</code></pre>\n<p>and your <code>NotificationService</code> becomes:</p>\n<pre><code>public class NotificationService {\n\npublic void post(Map&lt;SubscriptionType, Set&lt;String&gt;, String eventBody&gt; subscriptionIdsByProtocol) throws Exception {\n\n    for (Map.Entry&lt;SubscriptionType, Set&lt;String&gt;&gt; entry : subscriptionIdsByProtocol.entrySet()) {\n        entry.getKey().publishMessage(eventBody);\n    }\n}\n</code></pre>\n<p>You can also write the enum like this it solves the singleton problem but makes the code untestable:</p>\n<pre><code>public enum SubscriptionType {\n    WEBSOCKET(Publisher.newBuilder(\n                ProjectTopicName.newBuilder()\n                        .setProject(&quot;you must hardcode the string&quot;)\n                        .setTopic(&quot;you must hardcode the string&quot;)\n                        .build()),\n    GRPC(Publisher.newBuilder(\n                ProjectTopicName.newBuilder()\n                        .setProject(&quot;you must hardcode the string&quot;)\n                        .setTopic(&quot;you must hardcode the string&quot;)\n                        .build());\n    \n    private Publisher publisher;\n\n    private SubscriptionType(Publisher publisher) {\n        this.publisher = publisher;\n    }\n\n    public void publishMessage(String eventBody) {\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\n            .setData(eventBody)\n            .build();\n\n        ApiFuture&lt;String&gt; publish;\n\n        try {\n            publish = publisher.publish(pubsubMessage);\n            log.debug(&quot;Message published: {}, on {}&quot;, pubsubMessage, name());\n        } catch (Exception e) {}\n    }\n    \n}\n</code></pre>\n<p>I still prefer a factory, that makes the code testble.</p>\n<p>Otherwise you can try to mock <code>Publisher.newBuilder</code> and this will solve all the testing problems but you still can’t use <code>@Value</code></p>\n<p><strong>Edit</strong>: I've had the time to play a little bit with it this is the solution i come with:</p>\n<ol>\n<li>you can have the configuration class:</li>\n</ol>\n<pre><code>@Configuration\npublic class NotificationPublisherConfiguration {\n\n    @Bean(name=&quot;websocketPublisher&quot;)\n    public Publisher websocketPublisher(@Value(&quot;${gcp.projectId}&quot;) String gcpProjectId, @Value(&quot;${gcp.pubsub.notificationWebsocket}&quot;) String topicId) throws Exception {\n\n        return Publisher.newBuilder(\n                ProjectTopicName.newBuilder()\n                        .setProject(gcpProjectId)\n                        .setTopic(topicId)\n                        .build()\n        ).build();\n    }\n\n    @Bean(name=&quot;grpcPublisher&quot;)\n    public Publisher grpcPublisher(@Value(&quot;${gcp.projectId}&quot;) String gcpProjectId, @Value(&quot;${gcp.pubsub.notificationGrpc}&quot;) String topicId) throws Exception {\n        \n        return Publisher.newBuilder(\n                ProjectTopicName.newBuilder()\n                        .setProject(gcpProjectId)\n                        .setTopic(topicId)\n                        .build()\n        ).build();\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li>We will use a component as factory:</li>\n</ol>\n<pre><code>@Component\npublic class PublisherFactory implements InitializingBean {\n    \n    private static final HashMap&lt;SubscriptionType, Publisher&gt; map = new HashMap&lt;&gt;();\n    \n    @Autowired\n    @Qualifier(&quot;websocketPublisher&quot;)\n    private Publisher webSocketPublisher;\n    \n    @Autowired\n    @Qualifier(&quot;grpcPublisher&quot;)\n    private Publisher grpcPublisher;\n    \n    @Override\n    public void afterPropertiesSet() throws Exception {\n        map.map(SubscriptionType.WEBSOCKET, webSocketPublisher);\n        map.put(SubscriptionType.GRPC, grpcPublisher);\n    }\n    \n    public static Publisher getPublisher(SubscriptionType protocol) {\n        return map.get(protocol);\n    }\n\n}\n</code></pre>\n<ol start=\"3\">\n<li>the enum will look like this:</li>\n</ol>\n<pre><code>public enum SubscriptionType {\n    WEBSOCKET {\n        @Override\n        protected String getPublisher() {\n            return PublisherFactory.getPublisher(this);\n        }\n    },\n    GRPC {\n        @Override\n        protected String getPublisher() {\n            return PublisherFactory.getPublisher(this);\n        }\n    };\n    \n    protected abstract String getPublisher();\n\n    public void publishMessage(String eventBody) {\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\n            .setData(eventBody)\n            .build();\n\n        ApiFuture&lt;String&gt; publish;\n\n        try {\n            publish = getPublisher().publish(pubsubMessage);\n            log.debug(&quot;Message published: {}, on {}&quot;, pubsubMessage, name());\n        } catch (Exception e) {}\n    }\n}\n</code></pre>\n<ol start=\"4\">\n<li>The notification service:</li>\n</ol>\n<pre><code>public class NotificationService {\n\npublic void post(Map&lt;SubscriptionType, Set&lt;String&gt;, String eventBody&gt; subscriptionIdsByProtocol) throws Exception {\n\n    for (Map.Entry&lt;SubscriptionType, Set&lt;String&gt;&gt; entry : subscriptionIdsByProtocol.entrySet()) {\n        entry.getKey().publishMessage(eventBody);\n    }\n}\n</code></pre>\n<p>Whit this you can test and use injection and @Value</p>\n"},{"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660814259,"creation_date":1660814259,"answer_id":73400427,"question_id":73391989,"body_markdown":"You can use [Strategy pattern][1] to select a desired algorithm at runtime. However, it is necessary to store these algorithms somewhere. This is a place where [Factory pattern][2] can be used. \r\n\r\nSo let me show an example. I am sorry, I do not know Java, but let me show an example via C#. Code does not use special features of language, so you can apply it to Java.\r\n\r\nSo let&#39;s create an abstract class that will define common behaviour for all Publishers:\r\n\r\n\tpublic abstract class Publisher\r\n\t{ \r\n\t\tpublic abstract void Publish();\r\n\t}\r\n\r\nAnd its concrete implementations `WebSocketPublisher ` and `GrpcPublisher `:\r\n\r\n\tpublic class WebSocketPublisher : Publisher\r\n\t{\r\n\t\tpublic override void Publish()\r\n\t\t{\r\n\t\t\tConsole.WriteLine(&quot;Message published through WebSocket.&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic class GrpcPublisher : Publisher\r\n\t{\r\n\t\tpublic override void Publish()\r\n\t\t{\r\n\t\t\tConsole.WriteLine($&quot;Message published through Grpc.&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\nThen we need a place to store these strategies and take it when it is necessary. This is a place where `Factory` pattern can be used:\r\n\r\n\tpublic enum SubscriptionType \r\n\t{\r\n\t\tWebSocket, Grpc\r\n\t}\r\n\r\n\r\n\tpublic class PublisherFactory\r\n\t{\r\n\t\tprivate Dictionary&lt;SubscriptionType, Publisher&gt; _pubisherByType = \r\n            new Dictionary&lt;SubscriptionType, Publisher&gt;()\r\n\t\t{\r\n\t\t\t{ SubscriptionType.WebSocket, new  WebSocketPublisher () },\r\n\t\t\t{ SubscriptionType.Grpc, new GrpcPublisher () },\r\n\t\t};\r\n\r\n\t\tpublic Publisher GetInstanceByType(SubscriptionType courtType) =&gt; \r\n            _pubisherByType[courtType];\r\n\t}\r\n\t\r\nAnd then you can call the above code like this:\r\n\r\n\tPublisherFactory courtFactory = new PublisherFactory();\r\n\tPublisher publisher = courtFactory.GetInstanceByType(SubscriptionType.WebSocket);\r\n\tpublisher.Publish(); // OUTPUT: &quot;Message published through WebSocket.&quot;\r\n\t\r\nSo, here we&#39;ve applied open closed principle. I mean you will add new functionality by adding new classes that will be derived from `Court`\tclass.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Strategy_pattern\r\n  [2]: https://en.wikipedia.org/wiki/Factory_method_pattern","title":"Choose dependency object based on Enum","body":"<p>You can use <a href=\"https://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow noreferrer\">Strategy pattern</a> to select a desired algorithm at runtime. However, it is necessary to store these algorithms somewhere. This is a place where <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">Factory pattern</a> can be used.</p>\n<p>So let me show an example. I am sorry, I do not know Java, but let me show an example via C#. Code does not use special features of language, so you can apply it to Java.</p>\n<p>So let's create an abstract class that will define common behaviour for all Publishers:</p>\n<pre><code>public abstract class Publisher\n{ \n    public abstract void Publish();\n}\n</code></pre>\n<p>And its concrete implementations <code>WebSocketPublisher </code> and <code>GrpcPublisher </code>:</p>\n<pre><code>public class WebSocketPublisher : Publisher\n{\n    public override void Publish()\n    {\n        Console.WriteLine(&quot;Message published through WebSocket.&quot;);\n    }\n}\n\npublic class GrpcPublisher : Publisher\n{\n    public override void Publish()\n    {\n        Console.WriteLine($&quot;Message published through Grpc.&quot;);\n    }\n}\n</code></pre>\n<p>Then we need a place to store these strategies and take it when it is necessary. This is a place where <code>Factory</code> pattern can be used:</p>\n<pre><code>public enum SubscriptionType \n{\n    WebSocket, Grpc\n}\n\n\npublic class PublisherFactory\n{\n    private Dictionary&lt;SubscriptionType, Publisher&gt; _pubisherByType = \n        new Dictionary&lt;SubscriptionType, Publisher&gt;()\n    {\n        { SubscriptionType.WebSocket, new  WebSocketPublisher () },\n        { SubscriptionType.Grpc, new GrpcPublisher () },\n    };\n\n    public Publisher GetInstanceByType(SubscriptionType courtType) =&gt; \n        _pubisherByType[courtType];\n}\n</code></pre>\n<p>And then you can call the above code like this:</p>\n<pre><code>PublisherFactory courtFactory = new PublisherFactory();\nPublisher publisher = courtFactory.GetInstanceByType(SubscriptionType.WebSocket);\npublisher.Publish(); // OUTPUT: &quot;Message published through WebSocket.&quot;\n</code></pre>\n<p>So, here we've applied open closed principle. I mean you will add new functionality by adding new classes that will be derived from <code>Court</code> class.</p>\n"}],"owner":{"account_id":4132740,"reputation":1332,"user_id":3390154,"accept_rate":38,"display_name":"BrownTownCoder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1661006827,"creation_date":1660753943,"question_id":73391989,"body_markdown":"My service needs to put a message on a PubSub based on the Enum of Protocol in the message. \r\n\r\nThese are the PubSub Config\r\n\r\n    public class NotificationPublisherConfiguration {\r\n    \r\n        @Bean(name=&quot;websocketPublisher&quot;)\r\n        public Publisher websocketPublisher(@Value(&quot;${gcp.projectId}&quot;) String gcpProjectId, @Value(&quot;${gcp.pubsub.notificationWebsocket}&quot;) String topicId) throws Exception {\r\n\r\n            return Publisher.newBuilder(\r\n                    ProjectTopicName.newBuilder()\r\n                            .setProject(gcpProjectId)\r\n                            .setTopic(topicId)\r\n                            .build()\r\n            ).build();\r\n        }\r\n    \r\n        @Bean(name=&quot;grpcPublisher&quot;)\r\n        public Publisher grpcPublisher(@Value(&quot;${gcp.projectId}&quot;) String gcpProjectId, @Value(&quot;${gcp.pubsub.notificationGrpc}&quot;) String topicId) throws Exception {\r\n            \r\n            return Publisher.newBuilder(\r\n                    ProjectTopicName.newBuilder()\r\n                            .setProject(gcpProjectId)\r\n                            .setTopic(topicId)\r\n                            .build()\r\n            ).build();\r\n        }\r\n    }\r\n\r\nNow in my service class, I have set it up below.\r\n\r\n\r\n    public class NotificationService {\r\n\r\n\r\n    private final Publisher websocketPublisher;\r\n    private final Publisher grpcPublisher;\r\n\r\n\r\n\r\n    public void post(Map&lt;SubscriptionType, Set&lt;String&gt;, String eventBody&gt; subscriptionIdsByProtocol) throws Exception {\r\n\r\n        for (Map.Entry&lt;SubscriptionType, Set&lt;String&gt;&gt; entry : subscriptionIdsByProtocol.entrySet()) {\r\n\r\n            if (entry.getKey().equals(SubscriptionType.WEBSOCKET)) {\r\n                publishMessage (eventBody, websocketPublisher, entry.getKey());\r\n            } else if (entry.getKey().equals(SubscriptionType.GRPC)) {\r\n                publishMessage(eventBody, grpcPublisher, entry.getKey());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private void publishMessage(String eventBody, Publisher publisher, SubscriptionType subscriptionType) {\r\n\r\n\r\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\r\n                .setData(eventBody)\r\n                .build();\r\n\r\n        ApiFuture&lt;String&gt; publish;\r\n\r\n        try {\r\n            publish = publisher.publish(pubsubMessage);\r\n            log.debug(&quot;Message published: {}, on {}&quot;, pubsubMessage, subscriptionType.toString());\r\n        } catch (Exception e) {}\r\n      }\r\n    }\r\n\r\nI am pretty sure there is a better way to do this so that I don&#39;t need to change a lot of code when a new protocol is introduced, and we need to put the message on a new PubSub as well. Can someone suggest what design pattern I can use here? \r\n\r\nThanks","title":"Choose dependency object based on Enum","body":"<p>My service needs to put a message on a PubSub based on the Enum of Protocol in the message.</p>\n<p>These are the PubSub Config</p>\n<pre><code>public class NotificationPublisherConfiguration {\n\n    @Bean(name=&quot;websocketPublisher&quot;)\n    public Publisher websocketPublisher(@Value(&quot;${gcp.projectId}&quot;) String gcpProjectId, @Value(&quot;${gcp.pubsub.notificationWebsocket}&quot;) String topicId) throws Exception {\n\n        return Publisher.newBuilder(\n                ProjectTopicName.newBuilder()\n                        .setProject(gcpProjectId)\n                        .setTopic(topicId)\n                        .build()\n        ).build();\n    }\n\n    @Bean(name=&quot;grpcPublisher&quot;)\n    public Publisher grpcPublisher(@Value(&quot;${gcp.projectId}&quot;) String gcpProjectId, @Value(&quot;${gcp.pubsub.notificationGrpc}&quot;) String topicId) throws Exception {\n        \n        return Publisher.newBuilder(\n                ProjectTopicName.newBuilder()\n                        .setProject(gcpProjectId)\n                        .setTopic(topicId)\n                        .build()\n        ).build();\n    }\n}\n</code></pre>\n<p>Now in my service class, I have set it up below.</p>\n<pre><code>public class NotificationService {\n\n\nprivate final Publisher websocketPublisher;\nprivate final Publisher grpcPublisher;\n\n\n\npublic void post(Map&lt;SubscriptionType, Set&lt;String&gt;, String eventBody&gt; subscriptionIdsByProtocol) throws Exception {\n\n    for (Map.Entry&lt;SubscriptionType, Set&lt;String&gt;&gt; entry : subscriptionIdsByProtocol.entrySet()) {\n\n        if (entry.getKey().equals(SubscriptionType.WEBSOCKET)) {\n            publishMessage (eventBody, websocketPublisher, entry.getKey());\n        } else if (entry.getKey().equals(SubscriptionType.GRPC)) {\n            publishMessage(eventBody, grpcPublisher, entry.getKey());\n        }\n    }\n}\n\n\nprivate void publishMessage(String eventBody, Publisher publisher, SubscriptionType subscriptionType) {\n\n\n    PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\n            .setData(eventBody)\n            .build();\n\n    ApiFuture&lt;String&gt; publish;\n\n    try {\n        publish = publisher.publish(pubsubMessage);\n        log.debug(&quot;Message published: {}, on {}&quot;, pubsubMessage, subscriptionType.toString());\n    } catch (Exception e) {}\n  }\n}\n</code></pre>\n<p>I am pretty sure there is a better way to do this so that I don't need to change a lot of code when a new protocol is introduced, and we need to put the message on a new PubSub as well. Can someone suggest what design pattern I can use here?</p>\n<p>Thanks</p>\n"},{"tags":["java","android","bluetooth"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":2,"creation_date":1660925254,"post_id":73419310,"comment_id":129656716,"body_markdown":"It would be extremely beneficial to post the stacktrace you get when it crashes.","body":"It would be extremely beneficial to post the stacktrace you get when it crashes."},{"owner":{"account_id":26109074,"reputation":1,"user_id":19803316,"display_name":"Schurkee"},"score":0,"creation_date":1660929264,"post_id":73419310,"comment_id":129657839,"body_markdown":"any ideas on how to do that? couldn&#39;t find a way online... I&#39;m testing the app directly on my phone via USB btw","body":"any ideas on how to do that? couldn&#39;t find a way online... I&#39;m testing the app directly on my phone via USB btw"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660954778,"post_id":73419310,"comment_id":129663374,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":26109074,"reputation":1,"user_id":19803316,"display_name":"Schurkee"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1661006728,"creation_date":1660957057,"answer_id":73423462,"question_id":73419310,"body_markdown":"after a lot of trial and error it finally worked and I have no idea how because I&#39;m pretty sure I used this same code before and it kept crashing but now it doesn&#39;t so here is the entire MAinActivity.java \r\n\r\n\r\n    package com.example.ledcontroller;\r\n    \r\n    import android.Manifest;\r\n    import android.app.Activity;\r\n    import android.bluetooth.BluetoothAdapter;\r\n    import android.bluetooth.BluetoothManager;\r\n    import android.content.Intent;\r\n    import android.content.pm.PackageManager;\r\n    import android.os.Bundle;\r\n    import android.widget.ImageButton;\r\n    import android.widget.ImageView;\r\n    import android.widget.Toast;\r\n    \r\n    import androidx.activity.result.ActivityResultLauncher;\r\n    import androidx.activity.result.contract.ActivityResultContracts;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.core.content.ContextCompat;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private final ActivityResultLauncher&lt;String&gt; requestPermissionLauncher =\r\n                registerForActivityResult(new ActivityResultContracts.RequestPermission(), isGranted -&gt; {\r\n                    if (isGranted) {\r\n                        Toast.makeText(getApplicationContext(), &quot;Permission Granted&quot;, Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        Toast.makeText(getApplicationContext(), &quot;Permission not Granted&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n    \r\n        ActivityResultLauncher&lt;Intent&gt; someActivityResultLauncher = registerForActivityResult(\r\n                new ActivityResultContracts.StartActivityForResult(),\r\n                result -&gt; {\r\n                    if (result.getResultCode() == Activity.RESULT_OK) {\r\n                        // There are no request codes\r\n                        Intent data = result.getData();\r\n                    }\r\n                });\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            //Set Bluetooth status src\r\n            ImageView BtUnchecked = findViewById(R.id.not_connected);\r\n            ImageView BtChecked = findViewById(R.id.connected);\r\n    \r\n    \r\n            //BtUnchecked.setImageResource(R.drawable.ic_uncheck_grey);\r\n            //BtChecked.setImageResource(R.drawable.ic_check);\r\n    \r\n            //Settings button function\r\n            ImageButton sett = findViewById(R.id.settingsbtn);\r\n    \r\n            sett.setOnClickListener(view -&gt; {\r\n                Intent intent = new Intent(MainActivity.this, SettingsActivity.class);\r\n                startActivity(intent);\r\n            });\r\n    \r\n            //Color Picker button function\r\n            ImageButton colorpick = findViewById(R.id.colorPickerbtn);\r\n    \r\n            colorpick.setOnClickListener(view -&gt; {\r\n                Intent intent = new Intent(MainActivity.this, ColorPickerActivity.class);\r\n                startActivity(intent);\r\n            });\r\n    \r\n            //Modes button function\r\n            ImageButton modes = findViewById(R.id.modesbtn);\r\n    \r\n            modes.setOnClickListener(view -&gt; {\r\n                Intent intent = new Intent(MainActivity.this, ModesActivity.class);\r\n                startActivity(intent);\r\n            });\r\n    \r\n            //Bluetooth button function\r\n    \r\n            BluetoothManager bluetoothManager = getSystemService(BluetoothManager.class);\r\n            BluetoothAdapter bluetoothAdapter = bluetoothManager.getAdapter();\r\n    \r\n    \r\n    \r\n            ImageButton bluetooth = findViewById(R.id.bluetoothbtn);\r\n    \r\n            bluetooth.setOnClickListener(view -&gt; {\r\n                if (!bluetoothAdapter.isEnabled()){\r\n                    if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT) == PackageManager.PERMISSION_GRANTED) {\r\n                        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n                        someActivityResultLauncher.launch(enableBtIntent);\r\n                    } else {\r\n                        requestPermissionLauncher.launch(Manifest.permission.BLUETOOTH_CONNECT);\r\n                    }\r\n                }if (bluetoothAdapter.isEnabled()){\r\n                    if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT) == PackageManager.PERMISSION_GRANTED) {\r\n                    bluetoothAdapter.disable();\r\n                    Toast.makeText(getApplicationContext(), &quot;if done&quot;, Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    requestPermissionLauncher.launch(Manifest.permission.BLUETOOTH_CONNECT);\r\n                    Toast.makeText(getApplicationContext(), &quot;else done&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                }\r\n            });\r\n        }\r\n    \r\n    }\r\n\r\nIf anyone knows any way to make the code better that would be appreciated!\r\n\r\nEDIT: I updated the if (bluetoothAdapter.isEnabled()) to request permission in case you reinstall the app and the Bluetooth is already enabled so the app doesn&#39;t crash anymore when pressing the button","title":"App crashes at onActivityResult() api 31 Bluetooth","body":"<p>after a lot of trial and error it finally worked and I have no idea how because I'm pretty sure I used this same code before and it kept crashing but now it doesn't so here is the entire MAinActivity.java</p>\n<pre><code>package com.example.ledcontroller;\n\nimport android.Manifest;\nimport android.app.Activity;\nimport android.bluetooth.BluetoothAdapter;\nimport android.bluetooth.BluetoothManager;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.widget.ImageButton;\nimport android.widget.ImageView;\nimport android.widget.Toast;\n\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.contract.ActivityResultContracts;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.content.ContextCompat;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private final ActivityResultLauncher&lt;String&gt; requestPermissionLauncher =\n            registerForActivityResult(new ActivityResultContracts.RequestPermission(), isGranted -&gt; {\n                if (isGranted) {\n                    Toast.makeText(getApplicationContext(), &quot;Permission Granted&quot;, Toast.LENGTH_SHORT).show();\n                } else {\n                    Toast.makeText(getApplicationContext(), &quot;Permission not Granted&quot;, Toast.LENGTH_SHORT).show();\n                }\n            });\n\n    ActivityResultLauncher&lt;Intent&gt; someActivityResultLauncher = registerForActivityResult(\n            new ActivityResultContracts.StartActivityForResult(),\n            result -&gt; {\n                if (result.getResultCode() == Activity.RESULT_OK) {\n                    // There are no request codes\n                    Intent data = result.getData();\n                }\n            });\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        //Set Bluetooth status src\n        ImageView BtUnchecked = findViewById(R.id.not_connected);\n        ImageView BtChecked = findViewById(R.id.connected);\n\n\n        //BtUnchecked.setImageResource(R.drawable.ic_uncheck_grey);\n        //BtChecked.setImageResource(R.drawable.ic_check);\n\n        //Settings button function\n        ImageButton sett = findViewById(R.id.settingsbtn);\n\n        sett.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(MainActivity.this, SettingsActivity.class);\n            startActivity(intent);\n        });\n\n        //Color Picker button function\n        ImageButton colorpick = findViewById(R.id.colorPickerbtn);\n\n        colorpick.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(MainActivity.this, ColorPickerActivity.class);\n            startActivity(intent);\n        });\n\n        //Modes button function\n        ImageButton modes = findViewById(R.id.modesbtn);\n\n        modes.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(MainActivity.this, ModesActivity.class);\n            startActivity(intent);\n        });\n\n        //Bluetooth button function\n\n        BluetoothManager bluetoothManager = getSystemService(BluetoothManager.class);\n        BluetoothAdapter bluetoothAdapter = bluetoothManager.getAdapter();\n\n\n\n        ImageButton bluetooth = findViewById(R.id.bluetoothbtn);\n\n        bluetooth.setOnClickListener(view -&gt; {\n            if (!bluetoothAdapter.isEnabled()){\n                if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT) == PackageManager.PERMISSION_GRANTED) {\n                    Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n                    someActivityResultLauncher.launch(enableBtIntent);\n                } else {\n                    requestPermissionLauncher.launch(Manifest.permission.BLUETOOTH_CONNECT);\n                }\n            }if (bluetoothAdapter.isEnabled()){\n                if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT) == PackageManager.PERMISSION_GRANTED) {\n                bluetoothAdapter.disable();\n                Toast.makeText(getApplicationContext(), &quot;if done&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                requestPermissionLauncher.launch(Manifest.permission.BLUETOOTH_CONNECT);\n                Toast.makeText(getApplicationContext(), &quot;else done&quot;, Toast.LENGTH_SHORT).show();\n            }\n            }\n        });\n    }\n\n}\n</code></pre>\n<p>If anyone knows any way to make the code better that would be appreciated!</p>\n<p>EDIT: I updated the if (bluetoothAdapter.isEnabled()) to request permission in case you reinstall the app and the Bluetooth is already enabled so the app doesn't crash anymore when pressing the button</p>\n"}],"owner":{"account_id":26109074,"reputation":1,"user_id":19803316,"display_name":"Schurkee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661006728,"creation_date":1660924291,"question_id":73419310,"body_markdown":"So I&#39;m trying to make an app that connects to Bluetooth but whatever I do I can&#39;t get the permission dialog to appear I tried the method provided by android using startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT); but it&#39;s deprecated so I did some research and found that I need to use  ActivityResultLauncher&lt;Intent&gt; but the app crashes when trying to call it here is the code\r\n\r\n    ActivityResultLauncher&lt;Intent&gt; startForResult = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n            @Override\r\n            public void onActivityResult(ActivityResult result) {\r\n                if (result != null &amp;&amp; result.getResultCode() == RESULT_OK){\r\n                    if (result.getData() != null ){\r\n                        Intent data = result.getData();\r\n                    }\r\n                }\r\n            }\r\n    \r\n        });\r\n\r\n**Inside onCreate**\r\n\r\n    BluetoothManager bluetoothManager = getSystemService(BluetoothManager.class);\r\n            BluetoothAdapter bluetoothAdapter = bluetoothManager.getAdapter();\r\n            if (bluetoothAdapter == null) {\r\n                // Device doesn&#39;t support Bluetooth\r\n                //Toast.makeText(getApplicationContext(), &quot;Device doesn&#39;t support Bluetooth&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                //Toast.makeText(getApplicationContext(), &quot;Device does support Bluetooth&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n    \r\n            if (!bluetoothAdapter.isEnabled()) {\r\n                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n    \r\n                startForResult.launch(enableBtIntent);\r\n                //startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\r\n    \r\n            }\r\n**PS:** I don&#39;t care about older API as the app is just for me to control led strips in my room via Bluetooth","title":"App crashes at onActivityResult() api 31 Bluetooth","body":"<p>So I'm trying to make an app that connects to Bluetooth but whatever I do I can't get the permission dialog to appear I tried the method provided by android using startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT); but it's deprecated so I did some research and found that I need to use  ActivityResultLauncher but the app crashes when trying to call it here is the code</p>\n<pre><code>ActivityResultLauncher&lt;Intent&gt; startForResult = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\n        @Override\n        public void onActivityResult(ActivityResult result) {\n            if (result != null &amp;&amp; result.getResultCode() == RESULT_OK){\n                if (result.getData() != null ){\n                    Intent data = result.getData();\n                }\n            }\n        }\n\n    });\n</code></pre>\n<p><strong>Inside onCreate</strong></p>\n<pre><code>BluetoothManager bluetoothManager = getSystemService(BluetoothManager.class);\n        BluetoothAdapter bluetoothAdapter = bluetoothManager.getAdapter();\n        if (bluetoothAdapter == null) {\n            // Device doesn't support Bluetooth\n            //Toast.makeText(getApplicationContext(), &quot;Device doesn't support Bluetooth&quot;, Toast.LENGTH_SHORT).show();\n        } else {\n            //Toast.makeText(getApplicationContext(), &quot;Device does support Bluetooth&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n        if (!bluetoothAdapter.isEnabled()) {\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n\n            startForResult.launch(enableBtIntent);\n            //startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\n\n        }\n</code></pre>\n<p><strong>PS:</strong> I don't care about older API as the app is just for me to control led strips in my room via Bluetooth</p>\n"},{"tags":["java","typecasting-operator"],"comments":[{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":0,"creation_date":1604590042,"post_id":64699277,"comment_id":114398256,"body_markdown":"I don&#39;t think we can know what your problem is from what you show here.  Ideally, you should show the whole file that this method comes from, along with the filename.  Also provide the whole file for the Customer class.  If these files are too big to do that, then cut out unimportant information but keep all of the structure, as that&#39;s what&#39;s going to be important to this question.  Then, explain to us how these two files are located on your disk, relative to each other.  Does &quot;same source package&quot; mean the two files are in the same directory?","body":"I don&#39;t think we can know what your problem is from what you show here.  Ideally, you should show the whole file that this method comes from, along with the filename.  Also provide the whole file for the Customer class.  If these files are too big to do that, then cut out unimportant information but keep all of the structure, as that&#39;s what&#39;s going to be important to this question.  Then, explain to us how these two files are located on your disk, relative to each other.  Does &quot;same source package&quot; mean the two files are in the same directory?"},{"owner":{"account_id":19782045,"reputation":367,"user_id":14486852,"display_name":"Sathimantha Malalasekera"},"score":0,"creation_date":1604591315,"post_id":64699277,"comment_id":114398929,"body_markdown":"This is perplexing. Can you tell which code line is pointed out by the compiler?","body":"This is perplexing. Can you tell which code line is pointed out by the compiler?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1661344937,"post_id":64699277,"comment_id":129749392,"body_markdown":"Can you please add the sourcecode of `Customer` and also the snippet of code that you use to serialize to the file? Does serialization and deserialization happen in the same run of the code? Does `Customer` have a field `serialVersionUID` set?","body":"Can you please add the sourcecode of <code>Customer</code> and also the snippet of code that you use to serialize to the file? Does serialization and deserialization happen in the same run of the code? Does <code>Customer</code> have a field <code>serialVersionUID</code> set?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1661344996,"post_id":64699277,"comment_id":129749421,"body_markdown":"And totally unrelated: why is your error message for the `ClassCastException` saying that the __Employee__ class is not found, while the classes name is `Customer` ?","body":"And totally unrelated: why is your error message for the <code>ClassCastException</code> saying that the <b>Employee</b> class is not found, while the classes name is <code>Customer</code> ?"}],"answers":[{"tags":[],"owner":{"account_id":19782045,"reputation":367,"user_id":14486852,"display_name":"Sathimantha Malalasekera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604592494,"creation_date":1604591933,"answer_id":64700786,"question_id":64699277,"body_markdown":"Why do you call the function a getter if it&#39;s not returning anything? Off hand though, I can point out few errors in the code. The `fileIn.close();` line is redundant. The stream is already closed by `in.close()`.  Most importantly, you don&#39;t need those `return;` statements. Essentially you can strip down the code to this:\r\n```java\r\n    public void getEmployee() {\r\n        try {\r\n            Customer e = new Customer();\r\n            FileInputStream fileIn = new FileInputStream(&quot;Customers.ser&quot;);\r\n            ObjectInputStream in = new ObjectInputStream(fileIn);\r\n            Customer cu = (Customer) in.readObject();\r\n            in.close();\r\n        } catch (IOException | ClassNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\n**Edit**&lt;br&gt;Hang on a second. If it&#39;s a `&quot;java.lang.ClassNotFoundException: Customer&quot;` you are getting, the problem is not here. It&#39;s most probably in the Serialization part. You&#39;re probably trying cast a blank file into Customer. Open the saved `Customers.ser` in a text editor. If you don&#39;t see a semblance of the data you stored, it&#39;s probably a problem with the serialization.","title":"Type Casting Error while i try to do deserialization","body":"<p>Why do you call the function a getter if it's not returning anything? Off hand though, I can point out few errors in the code. The <code>fileIn.close();</code> line is redundant. The stream is already closed by <code>in.close()</code>.  Most importantly, you don't need those <code>return;</code> statements. Essentially you can strip down the code to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void getEmployee() {\n        try {\n            Customer e = new Customer();\n            FileInputStream fileIn = new FileInputStream(&quot;Customers.ser&quot;);\n            ObjectInputStream in = new ObjectInputStream(fileIn);\n            Customer cu = (Customer) in.readObject();\n            in.close();\n        } catch (IOException | ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p><strong>Edit</strong><br>Hang on a second. If it's a <code>&quot;java.lang.ClassNotFoundException: Customer&quot;</code> you are getting, the problem is not here. It's most probably in the Serialization part. You're probably trying cast a blank file into Customer. Open the saved <code>Customers.ser</code> in a text editor. If you don't see a semblance of the data you stored, it's probably a problem with the serialization.</p>\n"},{"tags":[],"owner":{"account_id":26115782,"reputation":1,"user_id":19808953,"display_name":"user19808953"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1661006537,"creation_date":1661006537,"answer_id":73427587,"question_id":64699277,"body_markdown":"Change from\r\n  Customer e = new Customer();\r\nto \r\n  // Declare your object but don&#39;t instantiate(&quot;new&quot;) .\r\n  Customer e = null;\r\n","title":"Type Casting Error while i try to do deserialization","body":"<p>Change from\nCustomer e = new Customer();\nto\n// Declare your object but don't instantiate(&quot;new&quot;) .\nCustomer e = null;</p>\n"}],"owner":{"account_id":19021181,"reputation":41,"user_id":13885235,"display_name":"Dunmol"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1661006537,"creation_date":1604586628,"question_id":64699277,"body_markdown":"Why is it giving me the error &quot;java.lang.ClassNotFoundException: Customer&quot; When i have the Customer class in the Same source package as the funcion that is calling it.\r\n\r\n    public void getEmployee() {\r\n    Customer cu =null;\r\n      try {\r\n         Customer e = new Customer();\r\n         FileInputStream fileIn = new FileInputStream(&quot;Customers.ser&quot;);\r\n         ObjectInputStream in = new ObjectInputStream(fileIn);\r\n         cu =(Customer) in.readObject();\r\n         in.close();\r\n         fileIn.close();\r\n      } catch (IOException i) {\r\n         i.printStackTrace();\r\n         return;\r\n      } catch (ClassNotFoundException c) {\r\n         System.out.println(&quot;Employee class not found&quot;);\r\n         c.printStackTrace();\r\n         return;\r\n      }\r\n    }","title":"Type Casting Error while i try to do deserialization","body":"<p>Why is it giving me the error &quot;java.lang.ClassNotFoundException: Customer&quot; When i have the Customer class in the Same source package as the funcion that is calling it.</p>\n<pre><code>public void getEmployee() {\nCustomer cu =null;\n  try {\n     Customer e = new Customer();\n     FileInputStream fileIn = new FileInputStream(&quot;Customers.ser&quot;);\n     ObjectInputStream in = new ObjectInputStream(fileIn);\n     cu =(Customer) in.readObject();\n     in.close();\n     fileIn.close();\n  } catch (IOException i) {\n     i.printStackTrace();\n     return;\n  } catch (ClassNotFoundException c) {\n     System.out.println(&quot;Employee class not found&quot;);\n     c.printStackTrace();\n     return;\n  }\n}\n</code></pre>\n"},{"tags":["java","swing","jtree"],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661006339,"creation_date":1661006339,"answer_id":73427567,"question_id":73427541,"body_markdown":"Your class `WarnaRender` does not extends `DefaultTreeCellRenderer` so you can not cast it to this class.\r\n\r\nSo extend from it:\r\n\r\n`public class WarnaRender extends DefaultTreeCellRenderer {`","title":"class cannot be cast to class javax.swing.tree.DefaultTreeCellRenderer error","body":"<p>Your class <code>WarnaRender</code> does not extends <code>DefaultTreeCellRenderer</code> so you can not cast it to this class.</p>\n<p>So extend from it:</p>\n<p><code>public class WarnaRender extends DefaultTreeCellRenderer {</code></p>\n"}],"owner":{"account_id":24322779,"reputation":1,"user_id":18262861,"display_name":"Moon Light"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1661006339,"creation_date":1661006070,"question_id":73427541,"body_markdown":"    public class jtre extends javax.swing.JFrame {\r\n        static{\r\n        \r\n            try{\r\n                \r\n        UIManager.setLookAndFeel(NimbusLookAndFeel.class.getName());\r\n            }catch (ClassNotFoundException ex){\r\n                \r\n            } catch (InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\r\n                Logger.getLogger(jtre.class.getName()).log(Level.SEVERE, null, ex);}}\r\n       \r\n        public jtre() {\r\n            initComponents();\r\n             jTree1.setCellRenderer(new WarnaRender());\r\n            \r\n            DefaultTreeCellRenderer renderer = (DefaultTreeCellRenderer)jTree1.getCellRenderer();\r\n             Icon closedIcon = new ImageIcon(&quot;/images/ve.png&quot;);\r\n             Icon openIcon = new ImageIcon(&quot;/images/veya.png&quot;);\r\n             Icon leafIcon = new ImageIcon(&quot;/images/xor.png&quot;);\r\n             renderer.setClosedIcon(closedIcon);\r\n             renderer.setOpenIcon(openIcon);\r\n             renderer.setLeafIcon(leafIcon);   }\r\n     \r\n    public class WarnaRender implements TreeCellRenderer{\r\n    \r\n        @Override\r\n        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {\r\n            JLabel label = new JLabel();\r\n            label.setText(value.toString());\r\n            label.setOpaque(true);\r\n            if(row %2 == 1){\r\n            label.setBackground(Color.RED);\r\n            label.setForeground(Color.WHITE);\r\n           } else {\r\n            \r\n            label.setBackground(Color.GREEN);\r\n            label.setForeground(Color.RED); } \r\n            return label;}}   \r\n        \r\n         \r\n\r\nI make a class which is called WarnaRender for coloring each node of jtree. My code is working. After that I want to add icons to jtree and I encountered an error which is &quot;ClassCastException: class WarnaRender cannot be cast to class javax.swing.tree.DefaultTreeCellRenderer (WarnaRender is in unnamed module of loader &#39;app&#39;; javax.swing.tree.DefaultTreeCellRenderer is in module java.desktop of loader &#39;bootstrap&#39;)&quot;. How can ı solve this problem? Can you help me. I investigated this error in the İnternet but I couldnt find the solution. Please help my code. Thank you.","title":"class cannot be cast to class javax.swing.tree.DefaultTreeCellRenderer error","body":"<pre><code>public class jtre extends javax.swing.JFrame {\n    static{\n    \n        try{\n            \n    UIManager.setLookAndFeel(NimbusLookAndFeel.class.getName());\n        }catch (ClassNotFoundException ex){\n            \n        } catch (InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\n            Logger.getLogger(jtre.class.getName()).log(Level.SEVERE, null, ex);}}\n   \n    public jtre() {\n        initComponents();\n         jTree1.setCellRenderer(new WarnaRender());\n        \n        DefaultTreeCellRenderer renderer = (DefaultTreeCellRenderer)jTree1.getCellRenderer();\n         Icon closedIcon = new ImageIcon(&quot;/images/ve.png&quot;);\n         Icon openIcon = new ImageIcon(&quot;/images/veya.png&quot;);\n         Icon leafIcon = new ImageIcon(&quot;/images/xor.png&quot;);\n         renderer.setClosedIcon(closedIcon);\n         renderer.setOpenIcon(openIcon);\n         renderer.setLeafIcon(leafIcon);   }\n \npublic class WarnaRender implements TreeCellRenderer{\n\n    @Override\n    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {\n        JLabel label = new JLabel();\n        label.setText(value.toString());\n        label.setOpaque(true);\n        if(row %2 == 1){\n        label.setBackground(Color.RED);\n        label.setForeground(Color.WHITE);\n       } else {\n        \n        label.setBackground(Color.GREEN);\n        label.setForeground(Color.RED); } \n        return label;}}   \n    \n     \n</code></pre>\n<p>I make a class which is called WarnaRender for coloring each node of jtree. My code is working. After that I want to add icons to jtree and I encountered an error which is &quot;ClassCastException: class WarnaRender cannot be cast to class javax.swing.tree.DefaultTreeCellRenderer (WarnaRender is in unnamed module of loader 'app'; javax.swing.tree.DefaultTreeCellRenderer is in module java.desktop of loader 'bootstrap')&quot;. How can ı solve this problem? Can you help me. I investigated this error in the İnternet but I couldnt find the solution. Please help my code. Thank you.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":420150,"reputation":1063,"user_id":797704,"accept_rate":100,"display_name":"richarbernal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337287984,"creation_date":1337287984,"answer_id":10643336,"question_id":10643174,"body_markdown":"I don&#39;t know why do you need this, BTW you can put a static global variable, like this:\r\n\r\n    class WellNamedClass{\r\n\r\n    public static final boolean DEBUG = true;\r\n    ...\r\n    }\r\n\r\nAnd check your debug method with an if statement, like:\r\n\r\n    if(WellNamedClass.DEBUG){\r\n        debugOnlyMethod();\r\n    }\r\n\r\nStarting with java you could play with this.\r\n\r\nWhen you get more experience, you could try annotations, aop, or any other advanced programming technique.","title":"Debug-only methods or interface in Java/Android","body":"<p>I don't know why do you need this, BTW you can put a static global variable, like this:</p>\n\n<pre><code>class WellNamedClass{\n\npublic static final boolean DEBUG = true;\n...\n}\n</code></pre>\n\n<p>And check your debug method with an if statement, like:</p>\n\n<pre><code>if(WellNamedClass.DEBUG){\n    debugOnlyMethod();\n}\n</code></pre>\n\n<p>Starting with java you could play with this.</p>\n\n<p>When you get more experience, you could try annotations, aop, or any other advanced programming technique.</p>\n"},{"tags":[],"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337288214,"creation_date":1337288214,"answer_id":10643391,"question_id":10643174,"body_markdown":"&gt; This could work, but then you have to manually change code to get a\r\n&gt; debug vs. a release build.\r\n\r\nOne popular approach is to pass system property using `-D` flag to the VM. You can then either use `System.getProperty` directly or initialize a `static field` from that property.\r\n\r\n`System.getenv` will also work.","title":"Debug-only methods or interface in Java/Android","body":"<blockquote>\n  <p>This could work, but then you have to manually change code to get a\n  debug vs. a release build.</p>\n</blockquote>\n\n<p>One popular approach is to pass system property using <code>-D</code> flag to the VM. You can then either use <code>System.getProperty</code> directly or initialize a <code>static field</code> from that property.</p>\n\n<p><code>System.getenv</code> will also work.</p>\n"},{"tags":[],"owner":{"account_id":345641,"reputation":2024,"user_id":678687,"accept_rate":72,"display_name":"SirPentor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1338005154,"creation_date":1338005154,"answer_id":10763487,"question_id":10643174,"body_markdown":"I think the method we&#39;re going to use is have a JNI call into our native component that will tell us whether we are running in debug mode. We have to have the native component anyway, and will make a few JNI calls at startup so it&#39;s a relatively simple solution, since C++ has a preprocessor.","title":"Debug-only methods or interface in Java/Android","body":"<p>I think the method we're going to use is have a JNI call into our native component that will tell us whether we are running in debug mode. We have to have the native component anyway, and will make a few JNI calls at startup so it's a relatively simple solution, since C++ has a preprocessor.</p>\n"},{"tags":[],"owner":{"account_id":1011622,"reputation":415,"user_id":5424329,"display_name":"Victor Ude"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661006319,"creation_date":1661006319,"answer_id":73427564,"question_id":10643174,"body_markdown":"Long overdue but it might help anyone else who ends up here in the future.\r\n\r\nSimple answer; **do not** use conditional logic to determine what state the build is in. [Configure a build variant][1] and use the appropriate source sets for your configured build. It seems like more work up front but ultimately will save you a ton of time and trouble in the long run.\r\n\r\n\r\n  [1]: https://developer.android.com/studio/build/build-variants","title":"Debug-only methods or interface in Java/Android","body":"<p>Long overdue but it might help anyone else who ends up here in the future.</p>\n<p>Simple answer; <strong>do not</strong> use conditional logic to determine what state the build is in. <a href=\"https://developer.android.com/studio/build/build-variants\" rel=\"nofollow noreferrer\">Configure a build variant</a> and use the appropriate source sets for your configured build. It seems like more work up front but ultimately will save you a ton of time and trouble in the long run.</p>\n"}],"owner":{"account_id":345641,"reputation":2024,"user_id":678687,"accept_rate":72,"display_name":"SirPentor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2692,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":10763487,"answer_count":4,"score":1,"last_activity_date":1661006319,"creation_date":1337287211,"question_id":10643174,"body_markdown":"I&#39;m a newbie to Android and Java--lots of experience with C/C++/C#.\r\n\r\nI have in interface that looks like this:\r\n\r\n    class WellNamedClass {\r\n        void greatMethodToCallWhenever() { /*...*/ }\r\n\r\n        void debugOnlyMethod() { /*...*/ }\r\n    }\r\n\r\nIn the the languages mentioned above, I would either #ifdef the entire debugOnlyMethod method out or #ifdef the implementation out so it simply does nothing, but Java doesn&#39;t have a preprocessor.\r\n\r\nI&#39;m totally comfortable with having the code there and checking at run-time whether we are in a debug build, but I can&#39;t even find a way of doing that.\r\n\r\nI&#39;ve found suggestions like [this one][1] where you create a class with a constant indicating whether debug (or whatever else you want) is enabled. This could work, but then you have to manually change code to get a debug vs. a release build.\r\n\r\nHas anyone else solved this problem? Thanks.\r\n\r\n  [1]: https://stackoverflow.com/questions/32041/how-to-remove-debug-statements-from-production-code-in-java","title":"Debug-only methods or interface in Java/Android","body":"<p>I'm a newbie to Android and Java--lots of experience with C/C++/C#.</p>\n\n<p>I have in interface that looks like this:</p>\n\n<pre><code>class WellNamedClass {\n    void greatMethodToCallWhenever() { /*...*/ }\n\n    void debugOnlyMethod() { /*...*/ }\n}\n</code></pre>\n\n<p>In the the languages mentioned above, I would either #ifdef the entire debugOnlyMethod method out or #ifdef the implementation out so it simply does nothing, but Java doesn't have a preprocessor.</p>\n\n<p>I'm totally comfortable with having the code there and checking at run-time whether we are in a debug build, but I can't even find a way of doing that.</p>\n\n<p>I've found suggestions like <a href=\"https://stackoverflow.com/questions/32041/how-to-remove-debug-statements-from-production-code-in-java\">this one</a> where you create a class with a constant indicating whether debug (or whatever else you want) is enabled. This could work, but then you have to manually change code to get a debug vs. a release build.</p>\n\n<p>Has anyone else solved this problem? Thanks.</p>\n"},{"tags":["java","eclipse","selenium","selenium-webdriver","user-input"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647432211,"creation_date":1646866968,"answer_id":71416990,"question_id":71404665,"body_markdown":"To continue automation after entering OTP manually using [Selenium](https://stackoverflow.com/a/54482491/7429447) would be to use the [Scanner](https://www.w3schools.com/java/java_user_input.asp) class as follows:\r\n\r\n\tdriver.findElement(By.xpath(&quot;xpath_mobile_field&quot;)).sendKeys(&quot;9818414799&quot;);\r\n\tscanner_user = new Scanner(System.in);\r\n    System.out.println(&quot;Enter the OTP: &quot;);\r\n    String user = scanner_user.nextLine();\r\n    driver.findElement(By.xpath(&quot;xpath_otp_field&quot;)).sendKeys(user);\r\n\r\n\r\n----------\r\n\r\n\r\n        \r\nReferences\r\n----------\r\nYou can find a couple of relevant detailed discussions in:\r\n\r\n- [Get user input from IDE/Console in selenium webderiver](https://stackoverflow.com/a/45144131/7429447)","title":"How to continue automation after entering OTP manually using Selenium and Java","body":"<p>To continue automation after entering OTP manually using <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> would be to use the <a href=\"https://www.w3schools.com/java/java_user_input.asp\" rel=\"nofollow noreferrer\">Scanner</a> class as follows:</p>\n<pre><code>driver.findElement(By.xpath(&quot;xpath_mobile_field&quot;)).sendKeys(&quot;9818414799&quot;);\nscanner_user = new Scanner(System.in);\nSystem.out.println(&quot;Enter the OTP: &quot;);\nString user = scanner_user.nextLine();\ndriver.findElement(By.xpath(&quot;xpath_otp_field&quot;)).sendKeys(user);\n</code></pre>\n<hr />\n<h2>References</h2>\n<p>You can find a couple of relevant detailed discussions in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/45144131/7429447\">Get user input from IDE/Console in selenium webderiver</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19876330,"reputation":62,"user_id":14561220,"display_name":"boludoz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661005509,"creation_date":1660628416,"answer_id":73369221,"question_id":71404665,"body_markdown":"You don&#39;t need to enter that manually, you can use someone&#39;s otp generator library, like pyotp in python.\r\n\r\n    import pyotp\r\n    totp = pyotp.TOTP(&#39;HASHXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#39;)\r\n    ida2f = totp.now()\r\n\r\nfor java do you have \r\nhttps://github.com/BastiaanJansen/otp-java\r\n\r\nTo resolve the OTP, you generally need to select the &quot;iframe&quot; first, for example in python.\r\n\r\n                                try:\r\n                                    iframe = driver.find_element(By.XPATH, &#39;//*[@id=&quot;xxxxxOTP&quot;]&#39;)\r\n                                    driver.switch_to.frame(iframe)\r\n\r\n                                    iKeys = 0\r\n                                    for strs in ida2f:\r\n                                        iKeys = iKeys + 1\r\n                                        driver.find_element(By.XPATH, f&#39;//*[@id=&quot;xxxx-html&quot;]/body/div[2]/div[1]/div/div/div/fieldset/div/input[{iKeys}]&#39;).click()\r\n                                        time.sleep(0.1)\r\n                                        driver.find_element(By.XPATH, f&#39;//*[@id=&quot;xxxx-html&quot;]/body/div[2]/div[1]/div/div/div/fieldset/div/input[{iKeys}]&#39;).send_keys(strs)\r\n                                        time.sleep(0.1)\r\n\r\n                                    driver.switch_to.default_content()\r\n                                    time.sleep(3)\r\n                                except:\r\n                                    continue\r\n\r\nTo be reliable, I like to send key by key, and remember about the **iframe**, it is very important.\r\n\r\nFor example (java):\r\n\r\n    driver.switchTo().frame(&quot;xxxxxxx&quot;);\r\n\r\nAnd remember go to default frame after:\r\n\r\n    switchTo().defaultContent();","title":"How to continue automation after entering OTP manually using Selenium and Java","body":"<p>You don't need to enter that manually, you can use someone's otp generator library, like pyotp in python.</p>\n<pre><code>import pyotp\ntotp = pyotp.TOTP('HASHXXXXXXXXXXXXXXXXXXXXXXXXXXXXX')\nida2f = totp.now()\n</code></pre>\n<p>for java do you have\n<a href=\"https://github.com/BastiaanJansen/otp-java\" rel=\"nofollow noreferrer\">https://github.com/BastiaanJansen/otp-java</a></p>\n<p>To resolve the OTP, you generally need to select the &quot;iframe&quot; first, for example in python.</p>\n<pre><code>                            try:\n                                iframe = driver.find_element(By.XPATH, '//*[@id=&quot;xxxxxOTP&quot;]')\n                                driver.switch_to.frame(iframe)\n\n                                iKeys = 0\n                                for strs in ida2f:\n                                    iKeys = iKeys + 1\n                                    driver.find_element(By.XPATH, f'//*[@id=&quot;xxxx-html&quot;]/body/div[2]/div[1]/div/div/div/fieldset/div/input[{iKeys}]').click()\n                                    time.sleep(0.1)\n                                    driver.find_element(By.XPATH, f'//*[@id=&quot;xxxx-html&quot;]/body/div[2]/div[1]/div/div/div/fieldset/div/input[{iKeys}]').send_keys(strs)\n                                    time.sleep(0.1)\n\n                                driver.switch_to.default_content()\n                                time.sleep(3)\n                            except:\n                                continue\n</code></pre>\n<p>To be reliable, I like to send key by key, and remember about the <strong>iframe</strong>, it is very important.</p>\n<p>For example (java):</p>\n<pre><code>driver.switchTo().frame(&quot;xxxxxxx&quot;);\n</code></pre>\n<p>And remember go to default frame after:</p>\n<pre><code>switchTo().defaultContent();\n</code></pre>\n"}],"owner":{"account_id":24498938,"reputation":21,"user_id":18414799,"display_name":"upen kale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1037,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1661005509,"creation_date":1646803297,"question_id":71404665,"body_markdown":"Using selenium webdriver I am testing login page and some more tabs using eclipse, maven, testng, but in Login page there is OTP verification. So I put OTP manually so. How to continue next proces as a automation?\r\n","title":"How to continue automation after entering OTP manually using Selenium and Java","body":"<p>Using selenium webdriver I am testing login page and some more tabs using eclipse, maven, testng, but in Login page there is OTP verification. So I put OTP manually so. How to continue next proces as a automation?</p>\n"},{"tags":["java","docker","docker-compose"],"answers":[{"tags":[],"owner":{"account_id":25855624,"reputation":31,"user_id":19588932,"display_name":"Aliaksandr Vysotskiy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661005274,"creation_date":1661005274,"answer_id":73427456,"question_id":73227590,"body_markdown":"I solved the problem. My problem was that I don&#39;t understand how docker&#39;s volume works. I thought that need to write root where my docker app is run, but need to write any path in right path (in my case `/root/projects/example_PROD/backend`) and saves files in app there.","title":"Docker doesn&#39;t save permanently files, which create my java app","body":"<p>I solved the problem. My problem was that I don't understand how docker's volume works. I thought that need to write root where my docker app is run, but need to write any path in right path (in my case <code>/root/projects/example_PROD/backend</code>) and saves files in app there.</p>\n"}],"owner":{"account_id":25855624,"reputation":31,"user_id":19588932,"display_name":"Aliaksandr Vysotskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73427456,"answer_count":1,"score":-1,"last_activity_date":1661005274,"creation_date":1659559350,"question_id":73227590,"body_markdown":"My java app (backend) create some files during work. And when i make rebuild after some changes, this file deletes and my app need to create it again. How to save this files permanently? I try to create volume but it doesn&#39;t work.\r\n\r\nThis is my docker-compose config:\r\n\r\n    version: &#39;3&#39;\r\n    \r\n    services:\r\n      examledb:\r\n        container_name: examle-docker-db\r\n        image: postgres\r\n        volumes:\r\n          - examle-docker-db:/var/lib/postgresql/data\r\n        ports:\r\n          - &quot;5555:5432&quot;\r\n        expose:\r\n          - &quot;5555&quot;\r\n        environment:\r\n          - POSTGRES_PASSWORD=password\r\n          - POSTGRES_USER=postgres\r\n          - POSTGRES_DB=examle\r\n          - PGDATA=/var/lib/postgresql/data/pgdata\r\n        networks:\r\n          - examle-docker-network\r\n        restart: unless-stopped\r\n    \r\n      backend:\r\n        container_name: examle-docker-backend\r\n        build: ./backend\r\n        volumes:\r\n          - /var/lib/docker/volumes/example_prod_example-backend-volume/_data:/root/projects/example_PROD/backend\r\n        ports:\r\n          - &quot;8080:8080&quot;\r\n          - &quot;8888:8888&quot;\r\n        depends_on:\r\n          - examledb\r\n        networks:\r\n          - examle-docker-network\r\n        environment:\r\n          SPRING_DATASOURCE_URL: jdbc:postgresql://examle-docker-db:5432/examle\r\n        restart: unless-stopped\r\n    \r\n      frontend:\r\n        container_name: examle-docker-frontend\r\n        build: ./frontend\r\n        restart: unless-stopped\r\n        command: serve -s dist/vu4y-frontend -l 4200\r\n        networks:\r\n          - examle-docker-network\r\n    \r\n      nginx:\r\n        image: nginx:stable\r\n        container_name: examle-docker-nginx\r\n        ports:\r\n          - &quot;80:80&quot;\r\n          - &quot;443:443&quot;\r\n        volumes:\r\n          - ./data/nginx:/etc/nginx/conf.d\r\n          - ./data/certbot/conf:/etc/letsencrypt\r\n          - ./data/certbot/www:/var/www/certbot\r\n        depends_on:\r\n          - frontend\r\n          - backend\r\n        networks:\r\n          - examle-docker-network\r\n        command: &quot;/bin/sh -c &#39;while :; do sleep 6h &amp; wait $${!}; nginx -s reload; done &amp; nginx -g \\&quot;daemon off;\\&quot;&#39;&quot;\r\n      certbot:\r\n        image: certbot/certbot\r\n        restart: unless-stopped\r\n        volumes:\r\n          - ./data/certbot/conf:/etc/letsencrypt\r\n          - ./data/certbot/www:/var/www/certbot\r\n        networks:\r\n          - examle-docker-network\r\n        entrypoint: &quot;/bin/sh -c &#39;trap exit TERM; while :; do certbot renew; sleep 12h &amp; wait $${!}; done;&#39;&quot;\r\n    \r\n    volumes:\r\n      examle-docker-db: { }\r\n    \r\n    networks:\r\n      examle-docker-network:\r\n        driver: bridge\r\n\r\nAlso I try to create volume like this:\r\n\r\n    volumes:\r\n      - example-backend-volume:/root/projects/example_PROD/backend\r\n\r\nIt also doesn&#39;t work.\r\n\r\nMy docker-compose.yml layout in /root/projects/Example\r\n\r\nAny advice will be very helpful. All files creates inside backend folder in the same category with src and pom.xml.","title":"Docker doesn&#39;t save permanently files, which create my java app","body":"<p>My java app (backend) create some files during work. And when i make rebuild after some changes, this file deletes and my app need to create it again. How to save this files permanently? I try to create volume but it doesn't work.</p>\n<p>This is my docker-compose config:</p>\n<pre><code>version: '3'\n\nservices:\n  examledb:\n    container_name: examle-docker-db\n    image: postgres\n    volumes:\n      - examle-docker-db:/var/lib/postgresql/data\n    ports:\n      - &quot;5555:5432&quot;\n    expose:\n      - &quot;5555&quot;\n    environment:\n      - POSTGRES_PASSWORD=password\n      - POSTGRES_USER=postgres\n      - POSTGRES_DB=examle\n      - PGDATA=/var/lib/postgresql/data/pgdata\n    networks:\n      - examle-docker-network\n    restart: unless-stopped\n\n  backend:\n    container_name: examle-docker-backend\n    build: ./backend\n    volumes:\n      - /var/lib/docker/volumes/example_prod_example-backend-volume/_data:/root/projects/example_PROD/backend\n    ports:\n      - &quot;8080:8080&quot;\n      - &quot;8888:8888&quot;\n    depends_on:\n      - examledb\n    networks:\n      - examle-docker-network\n    environment:\n      SPRING_DATASOURCE_URL: jdbc:postgresql://examle-docker-db:5432/examle\n    restart: unless-stopped\n\n  frontend:\n    container_name: examle-docker-frontend\n    build: ./frontend\n    restart: unless-stopped\n    command: serve -s dist/vu4y-frontend -l 4200\n    networks:\n      - examle-docker-network\n\n  nginx:\n    image: nginx:stable\n    container_name: examle-docker-nginx\n    ports:\n      - &quot;80:80&quot;\n      - &quot;443:443&quot;\n    volumes:\n      - ./data/nginx:/etc/nginx/conf.d\n      - ./data/certbot/conf:/etc/letsencrypt\n      - ./data/certbot/www:/var/www/certbot\n    depends_on:\n      - frontend\n      - backend\n    networks:\n      - examle-docker-network\n    command: &quot;/bin/sh -c 'while :; do sleep 6h &amp; wait $${!}; nginx -s reload; done &amp; nginx -g \\&quot;daemon off;\\&quot;'&quot;\n  certbot:\n    image: certbot/certbot\n    restart: unless-stopped\n    volumes:\n      - ./data/certbot/conf:/etc/letsencrypt\n      - ./data/certbot/www:/var/www/certbot\n    networks:\n      - examle-docker-network\n    entrypoint: &quot;/bin/sh -c 'trap exit TERM; while :; do certbot renew; sleep 12h &amp; wait $${!}; done;'&quot;\n\nvolumes:\n  examle-docker-db: { }\n\nnetworks:\n  examle-docker-network:\n    driver: bridge\n</code></pre>\n<p>Also I try to create volume like this:</p>\n<pre><code>volumes:\n  - example-backend-volume:/root/projects/example_PROD/backend\n</code></pre>\n<p>It also doesn't work.</p>\n<p>My docker-compose.yml layout in /root/projects/Example</p>\n<p>Any advice will be very helpful. All files creates inside backend folder in the same category with src and pom.xml.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","liquibase"],"comments":[{"owner":{"account_id":5833633,"reputation":166,"user_id":4597394,"accept_rate":57,"display_name":"Bilal Djaghout"},"score":1,"creation_date":1661005370,"post_id":73427434,"comment_id":129670258,"body_markdown":"I suggest reading about flyway, then read about flyway with spring boot.","body":"I suggest reading about flyway, then read about flyway with spring boot."},{"owner":{"account_id":5833633,"reputation":166,"user_id":4597394,"accept_rate":57,"display_name":"Bilal Djaghout"},"score":1,"creation_date":1661005542,"post_id":73427434,"comment_id":129670304,"body_markdown":"Database migrations are like the source version control. In the case of flyway, you can use both DDL and/or DML for creating table or manipulating data. in your case you&#39;ll need an alter table migration.","body":"Database migrations are like the source version control. In the case of flyway, you can use both DDL and/or DML for creating table or manipulating data. in your case you&#39;ll need an alter table migration."}],"owner":{"account_id":5033795,"reputation":55,"user_id":4043239,"accept_rate":78,"display_name":"Henrik Varga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":708,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661005085,"creation_date":1661005085,"question_id":73427434,"body_markdown":"So I&#39;ve read tons and tons of posts, forums, question and answers about this topic but I am still quite unsure about what migration means.\r\n\r\nLet me first introduce you to my problem.\r\n\r\nI have a Spring Boot backend working with MySQL Database with the help of Spring JPA Entities.\r\n\r\nNow my problem is the following:\r\n\r\nI already have a Spring JPA Entity defined as follows:\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\npublic class Blog {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String title;\r\n    private String content;\r\n    private LocalDateTime createdAt = LocalDateTime.now();\r\n}\r\n```\r\n\r\nAfter having this entity persisted to the database, I realized that the simple ```String title``` wouldn&#39;t be enough as it maps to a varchar(255) making my Blog posts couldn&#39;t exceed 255 characters.\r\n\r\nSo I would like to change this in the database without running any custom built SQL scripts to modify the column type in the table.\r\n\r\nI have something in mind like I would modify the current JPA Entity as follows:\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\npublic class Blog {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String title;\r\n    @Lob // &lt;--- Notice the Lob here\r\n    private String content;\r\n    private LocalDateTime createdAt = LocalDateTime.now();\r\n}\r\n```\r\n\r\nIf I am right, the Large Object annotation would mean that in the Database the column type becomes longtext allowing a lot more characters than 255 so my blog posts would fit.\r\n\r\nSo in short this is how I stumbled upon the topic of Database Migration I am just unsure if that is the thing I need in this situation. Can you please confirm if I am right about this, also can you please suggest possible solutions for this particular problem? I know there is a tool called Liquibase used for migrations which is quite popular. Should I go for it, or is there somthing else I would need?\r\n\r\nThanks in advance for the help.","title":"Database Migration with Spring JPA","body":"<p>So I've read tons and tons of posts, forums, question and answers about this topic but I am still quite unsure about what migration means.</p>\n<p>Let me first introduce you to my problem.</p>\n<p>I have a Spring Boot backend working with MySQL Database with the help of Spring JPA Entities.</p>\n<p>Now my problem is the following:</p>\n<p>I already have a Spring JPA Entity defined as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\npublic class Blog {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String title;\n    private String content;\n    private LocalDateTime createdAt = LocalDateTime.now();\n}\n</code></pre>\n<p>After having this entity persisted to the database, I realized that the simple <code>String title</code> wouldn't be enough as it maps to a varchar(255) making my Blog posts couldn't exceed 255 characters.</p>\n<p>So I would like to change this in the database without running any custom built SQL scripts to modify the column type in the table.</p>\n<p>I have something in mind like I would modify the current JPA Entity as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\npublic class Blog {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String title;\n    @Lob // &lt;--- Notice the Lob here\n    private String content;\n    private LocalDateTime createdAt = LocalDateTime.now();\n}\n</code></pre>\n<p>If I am right, the Large Object annotation would mean that in the Database the column type becomes longtext allowing a lot more characters than 255 so my blog posts would fit.</p>\n<p>So in short this is how I stumbled upon the topic of Database Migration I am just unsure if that is the thing I need in this situation. Can you please confirm if I am right about this, also can you please suggest possible solutions for this particular problem? I know there is a tool called Liquibase used for migrations which is quite popular. Should I go for it, or is there somthing else I would need?</p>\n<p>Thanks in advance for the help.</p>\n"},{"tags":["java","android","counter","interstitial"],"comments":[{"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"score":0,"creation_date":1660693538,"post_id":73301801,"comment_id":129591496,"body_markdown":"What&#39;s the error code in logcat? please add your logcat errors","body":"What&#39;s the error code in logcat? please add your logcat errors"},{"owner":{"display_name":"user19585404"},"score":0,"creation_date":1660705323,"post_id":73301801,"comment_id":129593209,"body_markdown":"there are no errrors","body":"there are no errrors"},{"owner":{"display_name":"user19585404"},"score":0,"creation_date":1660757124,"post_id":73301801,"comment_id":129610161,"body_markdown":"Ok, I deleted the interstialAd() from the onCreate, but after adding it back, the ads appear again","body":"Ok, I deleted the interstialAd() from the onCreate, but after adding it back, the ads appear again"},{"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"score":1,"creation_date":1660761214,"post_id":73301801,"comment_id":129611503,"body_markdown":"It&#39;s recommended to add ads codes in onStart or onViewCreated if you used fragment","body":"It&#39;s recommended to add ads codes in onStart or onViewCreated if you used fragment"}],"answers":[{"tags":[],"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661004843,"creation_date":1661003362,"answer_id":73427228,"question_id":73301801,"body_markdown":"**This is my old app I implemented InterstitialAd on it**\r\n\r\nfirst, create two vars one for interstitial ad and the other to store the number of the clicks\r\n\r\n```\r\nprivate static byte clickNumber = 0;\r\nprivate InterstitialAd interstitialAd;\r\n```\r\n\r\nsecond in onCreate prepare the advertisement\r\n\r\n```\r\ninterstitialAd = new InterstitialAd(this);\r\ninterstitialAd.setAdUnitId(&quot;ca-app-pub-3940256099942544/1033173712&quot;);\r\ninterstitialAd.loadAd(new AdRequest.Builder().build());\r\n```\r\n\r\n\r\nthe ad method shows the ad when the targeted click is reached e.g 3 clicks\r\n\r\n```\r\n  public static void detailsActivityInterstitial(){\r\n        interstitialAd.setAdListener(new AdListener() {\r\n            @Override\r\n            public void onAdLoaded() {\r\n                // Code to be executed when an ad finishes loading.\r\n                if(clickNumber == 3){\r\n                    interstitialAd.show();\r\n                }else {\r\n                    clickNumber++;\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onAdFailedToLoad(int errorCode) {\r\n                // Code to be executed when an ad request fails.\r\n                Log.e(&quot;onAdFailedToLoad&quot;,&quot;detailsActivityInterstitial&quot; + errorCode);\r\n            }\r\n\r\n            @Override\r\n            public void onAdOpened() {\r\n                // Code to be executed when the ad is displayed.\r\n            }\r\n\r\n            @Override\r\n            public void onAdLeftApplication() {\r\n                // Code to be executed when the user has left the app.\r\n                clickNumber = 0;\r\n            }\r\n\r\n            @Override\r\n            public void onAdClosed() {\r\n                // Code to be executed when the interstitial ad is closed.\r\n                clickNumber = 0;\r\n\r\n            }\r\n        });\r\n    }\r\n```\r\n\r\nand finally, call the method in `onStart` method when user is connected\r\n\r\n\r\n```\r\n if(Utils.hasNetworkAccess(this)) {\r\nMobileAds.initialize(this, getString(R.string.ADMOB_APP_ID));\r\ndetailsActivityInterstitial();\r\n}\r\n```\r\n\r\n\r\nAlso, there are [**Google sample ads**][1] on GitHub for every type of AdMob ads, you can use it as a reference, the following one is for interstitial, It simulates the display of an ad in a game\r\n\r\nthe layout\r\n\r\n```\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/container&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MyActivity&quot;\r\n    tools:ignore=&quot;MergeRootFrame&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/game_title&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_marginTop=&quot;50dp&quot;\r\n        android:text=&quot;@string/impossible_game&quot;\r\n        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/timer&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_below=&quot;@+id/game_title&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/retry_button&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_centerVertical=&quot;true&quot;\r\n        android:text=&quot;Retry&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\n\r\nThe activity class\r\n\r\n```\r\n/**\r\n * Main Activity. Inflates main activity xml.\r\n */\r\n@SuppressLint(&quot;SetTextI18n&quot;)\r\npublic class MyActivity extends AppCompatActivity {\r\n\r\n    private static final long GAME_LENGTH_MILLISECONDS = 3000;\r\n    private static final String AD_UNIT_ID = &quot;ca-app-pub-3940256099942544/1033173712&quot;;\r\n    private static final String TAG = &quot;MyActivity&quot;;\r\n\r\n    private InterstitialAd interstitialAd;\r\n    private CountDownTimer countDownTimer;\r\n    private Button retryButton;\r\n    private boolean gameIsInProgress;\r\n    private long timerMilliseconds;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_my);\r\n\r\n        // Log the Mobile Ads SDK version.\r\n        Log.d(TAG, &quot;Google Mobile Ads SDK Version: &quot; + MobileAds.getVersion());\r\n\r\n        // Initialize the Mobile Ads SDK.\r\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n            @Override\r\n            public void onInitializationComplete(InitializationStatus initializationStatus) {}\r\n        });\r\n\r\n    loadAd();\r\n\r\n        // Create the &quot;retry&quot; button, which tries to show an interstitial between game plays.\r\n        retryButton = findViewById(R.id.retry_button);\r\n        retryButton.setVisibility(View.INVISIBLE);\r\n        retryButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                showInterstitial();\r\n            }\r\n        });\r\n\r\n        startGame();\r\n    }\r\n\r\n  public void loadAd() {\r\n    AdRequest adRequest = new AdRequest.Builder().build();\r\n    InterstitialAd.load(\r\n        this,\r\n        AD_UNIT_ID,\r\n        adRequest,\r\n        new InterstitialAdLoadCallback() {\r\n          @Override\r\n          public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n            // The mInterstitialAd reference will be null until\r\n            // an ad is loaded.\r\n            MyActivity.this.interstitialAd = interstitialAd;\r\n            Log.i(TAG, &quot;onAdLoaded&quot;);\r\n            Toast.makeText(MyActivity.this, &quot;onAdLoaded()&quot;, Toast.LENGTH_SHORT).show();\r\n            interstitialAd.setFullScreenContentCallback(\r\n                new FullScreenContentCallback() {\r\n                  @Override\r\n                  public void onAdDismissedFullScreenContent() {\r\n                    // Called when fullscreen content is dismissed.\r\n                    // Make sure to set your reference to null so you don&#39;t\r\n                    // show it a second time.\r\n                    MyActivity.this.interstitialAd = null;\r\n                    Log.d(&quot;TAG&quot;, &quot;The ad was dismissed.&quot;);\r\n                  }\r\n\r\n                  @Override\r\n                  public void onAdFailedToShowFullScreenContent(AdError adError) {\r\n                    // Called when fullscreen content failed to show.\r\n                    // Make sure to set your reference to null so you don&#39;t\r\n                    // show it a second time.\r\n                    MyActivity.this.interstitialAd = null;\r\n                    Log.d(&quot;TAG&quot;, &quot;The ad failed to show.&quot;);\r\n                  }\r\n\r\n                  @Override\r\n                  public void onAdShowedFullScreenContent() {\r\n                    // Called when fullscreen content is shown.\r\n                    Log.d(&quot;TAG&quot;, &quot;The ad was shown.&quot;);\r\n                  }\r\n                });\r\n          }\r\n\r\n          @Override\r\n          public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n            // Handle the error\r\n            Log.i(TAG, loadAdError.getMessage());\r\n            interstitialAd = null;\r\n\r\n            String error =\r\n                String.format(\r\n                    &quot;domain: %s, code: %d, message: %s&quot;,\r\n                    loadAdError.getDomain(), loadAdError.getCode(), loadAdError.getMessage());\r\n            Toast.makeText(\r\n                    MyActivity.this, &quot;onAdFailedToLoad() with error: &quot; + error, Toast.LENGTH_SHORT)\r\n                .show();\r\n          }\r\n        });\r\n  }\r\n\r\n    private void createTimer(final long milliseconds) {\r\n        // Create the game timer, which counts down to the end of the level\r\n        // and shows the &quot;retry&quot; button.\r\n        if (countDownTimer != null) {\r\n            countDownTimer.cancel();\r\n        }\r\n\r\n        final TextView textView = findViewById(R.id.timer);\r\n\r\n        countDownTimer = new CountDownTimer(milliseconds, 50) {\r\n            @Override\r\n            public void onTick(long millisUnitFinished) {\r\n                timerMilliseconds = millisUnitFinished;\r\n                textView.setText(&quot;seconds remaining: &quot; + ((millisUnitFinished / 1000) + 1));\r\n            }\r\n\r\n            @Override\r\n            public void onFinish() {\r\n                gameIsInProgress = false;\r\n                textView.setText(&quot;done!&quot;);\r\n                retryButton.setVisibility(View.VISIBLE);\r\n            }\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        // Start or resume the game.\r\n        super.onResume();\r\n\r\n        if (gameIsInProgress) {\r\n            resumeGame(timerMilliseconds);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onPause() {\r\n        // Cancel the timer if the game is paused.\r\n        countDownTimer.cancel();\r\n        super.onPause();\r\n    }\r\n\r\n    private void showInterstitial() {\r\n    // Show the ad if it&#39;s ready. Otherwise toast and restart the game.\r\n    if (interstitialAd != null) {\r\n      interstitialAd.show(this);\r\n        } else {\r\n            Toast.makeText(this, &quot;Ad did not load&quot;, Toast.LENGTH_SHORT).show();\r\n            startGame();\r\n        }\r\n    }\r\n\r\n    private void startGame() {\r\n    // Request a new ad if one isn&#39;t already loaded, hide the button, and kick off the timer.\r\n    if (interstitialAd == null) {\r\n      loadAd();\r\n        }\r\n\r\n        retryButton.setVisibility(View.INVISIBLE);\r\n        resumeGame(GAME_LENGTH_MILLISECONDS);\r\n    }\r\n\r\n    private void resumeGame(long milliseconds) {\r\n        // Create a new timer for the correct length and start it.\r\n        gameIsInProgress = true;\r\n        timerMilliseconds = milliseconds;\r\n        createTimer(milliseconds);\r\n        countDownTimer.start();\r\n    }\r\n}\r\n```\r\n\r\nThis video from the Google Admob channel shows [**the Best practices to win with AdMob interstitial ads**][2]\r\n\r\n\r\n  [1]: https://github.com/googleads/googleads-mobile-android-examples\r\n  [2]: https://youtu.be/Ccrj8D0m1KA","title":"How can I make the interstitial ad appear when the button counter reaches the targeted number?","body":"<p><strong>This is my old app I implemented InterstitialAd on it</strong></p>\n<p>first, create two vars one for interstitial ad and the other to store the number of the clicks</p>\n<pre><code>private static byte clickNumber = 0;\nprivate InterstitialAd interstitialAd;\n</code></pre>\n<p>second in onCreate prepare the advertisement</p>\n<pre><code>interstitialAd = new InterstitialAd(this);\ninterstitialAd.setAdUnitId(&quot;ca-app-pub-3940256099942544/1033173712&quot;);\ninterstitialAd.loadAd(new AdRequest.Builder().build());\n</code></pre>\n<p>the ad method shows the ad when the targeted click is reached e.g 3 clicks</p>\n<pre><code>  public static void detailsActivityInterstitial(){\n        interstitialAd.setAdListener(new AdListener() {\n            @Override\n            public void onAdLoaded() {\n                // Code to be executed when an ad finishes loading.\n                if(clickNumber == 3){\n                    interstitialAd.show();\n                }else {\n                    clickNumber++;\n                }\n\n            }\n\n            @Override\n            public void onAdFailedToLoad(int errorCode) {\n                // Code to be executed when an ad request fails.\n                Log.e(&quot;onAdFailedToLoad&quot;,&quot;detailsActivityInterstitial&quot; + errorCode);\n            }\n\n            @Override\n            public void onAdOpened() {\n                // Code to be executed when the ad is displayed.\n            }\n\n            @Override\n            public void onAdLeftApplication() {\n                // Code to be executed when the user has left the app.\n                clickNumber = 0;\n            }\n\n            @Override\n            public void onAdClosed() {\n                // Code to be executed when the interstitial ad is closed.\n                clickNumber = 0;\n\n            }\n        });\n    }\n</code></pre>\n<p>and finally, call the method in <code>onStart</code> method when user is connected</p>\n<pre><code> if(Utils.hasNetworkAccess(this)) {\nMobileAds.initialize(this, getString(R.string.ADMOB_APP_ID));\ndetailsActivityInterstitial();\n}\n</code></pre>\n<p>Also, there are <a href=\"https://github.com/googleads/googleads-mobile-android-examples\" rel=\"noreferrer\"><strong>Google sample ads</strong></a> on GitHub for every type of AdMob ads, you can use it as a reference, the following one is for interstitial, It simulates the display of an ad in a game</p>\n<p>the layout</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/container&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MyActivity&quot;\n    tools:ignore=&quot;MergeRootFrame&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/game_title&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginTop=&quot;50dp&quot;\n        android:text=&quot;@string/impossible_game&quot;\n        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/timer&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@+id/game_title&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/retry_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_centerVertical=&quot;true&quot;\n        android:text=&quot;Retry&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>The activity class</p>\n<pre><code>/**\n * Main Activity. Inflates main activity xml.\n */\n@SuppressLint(&quot;SetTextI18n&quot;)\npublic class MyActivity extends AppCompatActivity {\n\n    private static final long GAME_LENGTH_MILLISECONDS = 3000;\n    private static final String AD_UNIT_ID = &quot;ca-app-pub-3940256099942544/1033173712&quot;;\n    private static final String TAG = &quot;MyActivity&quot;;\n\n    private InterstitialAd interstitialAd;\n    private CountDownTimer countDownTimer;\n    private Button retryButton;\n    private boolean gameIsInProgress;\n    private long timerMilliseconds;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_my);\n\n        // Log the Mobile Ads SDK version.\n        Log.d(TAG, &quot;Google Mobile Ads SDK Version: &quot; + MobileAds.getVersion());\n\n        // Initialize the Mobile Ads SDK.\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\n            @Override\n            public void onInitializationComplete(InitializationStatus initializationStatus) {}\n        });\n\n    loadAd();\n\n        // Create the &quot;retry&quot; button, which tries to show an interstitial between game plays.\n        retryButton = findViewById(R.id.retry_button);\n        retryButton.setVisibility(View.INVISIBLE);\n        retryButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                showInterstitial();\n            }\n        });\n\n        startGame();\n    }\n\n  public void loadAd() {\n    AdRequest adRequest = new AdRequest.Builder().build();\n    InterstitialAd.load(\n        this,\n        AD_UNIT_ID,\n        adRequest,\n        new InterstitialAdLoadCallback() {\n          @Override\n          public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n            // The mInterstitialAd reference will be null until\n            // an ad is loaded.\n            MyActivity.this.interstitialAd = interstitialAd;\n            Log.i(TAG, &quot;onAdLoaded&quot;);\n            Toast.makeText(MyActivity.this, &quot;onAdLoaded()&quot;, Toast.LENGTH_SHORT).show();\n            interstitialAd.setFullScreenContentCallback(\n                new FullScreenContentCallback() {\n                  @Override\n                  public void onAdDismissedFullScreenContent() {\n                    // Called when fullscreen content is dismissed.\n                    // Make sure to set your reference to null so you don't\n                    // show it a second time.\n                    MyActivity.this.interstitialAd = null;\n                    Log.d(&quot;TAG&quot;, &quot;The ad was dismissed.&quot;);\n                  }\n\n                  @Override\n                  public void onAdFailedToShowFullScreenContent(AdError adError) {\n                    // Called when fullscreen content failed to show.\n                    // Make sure to set your reference to null so you don't\n                    // show it a second time.\n                    MyActivity.this.interstitialAd = null;\n                    Log.d(&quot;TAG&quot;, &quot;The ad failed to show.&quot;);\n                  }\n\n                  @Override\n                  public void onAdShowedFullScreenContent() {\n                    // Called when fullscreen content is shown.\n                    Log.d(&quot;TAG&quot;, &quot;The ad was shown.&quot;);\n                  }\n                });\n          }\n\n          @Override\n          public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n            // Handle the error\n            Log.i(TAG, loadAdError.getMessage());\n            interstitialAd = null;\n\n            String error =\n                String.format(\n                    &quot;domain: %s, code: %d, message: %s&quot;,\n                    loadAdError.getDomain(), loadAdError.getCode(), loadAdError.getMessage());\n            Toast.makeText(\n                    MyActivity.this, &quot;onAdFailedToLoad() with error: &quot; + error, Toast.LENGTH_SHORT)\n                .show();\n          }\n        });\n  }\n\n    private void createTimer(final long milliseconds) {\n        // Create the game timer, which counts down to the end of the level\n        // and shows the &quot;retry&quot; button.\n        if (countDownTimer != null) {\n            countDownTimer.cancel();\n        }\n\n        final TextView textView = findViewById(R.id.timer);\n\n        countDownTimer = new CountDownTimer(milliseconds, 50) {\n            @Override\n            public void onTick(long millisUnitFinished) {\n                timerMilliseconds = millisUnitFinished;\n                textView.setText(&quot;seconds remaining: &quot; + ((millisUnitFinished / 1000) + 1));\n            }\n\n            @Override\n            public void onFinish() {\n                gameIsInProgress = false;\n                textView.setText(&quot;done!&quot;);\n                retryButton.setVisibility(View.VISIBLE);\n            }\n        };\n    }\n\n    @Override\n    public void onResume() {\n        // Start or resume the game.\n        super.onResume();\n\n        if (gameIsInProgress) {\n            resumeGame(timerMilliseconds);\n        }\n    }\n\n    @Override\n    public void onPause() {\n        // Cancel the timer if the game is paused.\n        countDownTimer.cancel();\n        super.onPause();\n    }\n\n    private void showInterstitial() {\n    // Show the ad if it's ready. Otherwise toast and restart the game.\n    if (interstitialAd != null) {\n      interstitialAd.show(this);\n        } else {\n            Toast.makeText(this, &quot;Ad did not load&quot;, Toast.LENGTH_SHORT).show();\n            startGame();\n        }\n    }\n\n    private void startGame() {\n    // Request a new ad if one isn't already loaded, hide the button, and kick off the timer.\n    if (interstitialAd == null) {\n      loadAd();\n        }\n\n        retryButton.setVisibility(View.INVISIBLE);\n        resumeGame(GAME_LENGTH_MILLISECONDS);\n    }\n\n    private void resumeGame(long milliseconds) {\n        // Create a new timer for the correct length and start it.\n        gameIsInProgress = true;\n        timerMilliseconds = milliseconds;\n        createTimer(milliseconds);\n        countDownTimer.start();\n    }\n}\n</code></pre>\n<p>This video from the Google Admob channel shows <a href=\"https://youtu.be/Ccrj8D0m1KA\" rel=\"noreferrer\"><strong>the Best practices to win with AdMob interstitial ads</strong></a></p>\n"}],"owner":{"display_name":"user19585404"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":629,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":73427228,"answer_count":1,"score":3,"last_activity_date":1661004843,"creation_date":1660114037,"question_id":73301801,"body_markdown":"When the button counter reaches the targeted clicks, I show an interstitial ad. The interstitial ad was working fine until I left the project for quite a while and today when I returned to it, it wasn&#39;t working. I have two different interstitial ads that I want to show on different amounts of clicks, but neither of them are working.\r\n\r\n**Home.java**\r\n\r\n \r\n\r\n  \r\n        int countClicksNext = 0;\r\n        int countClicksCopy = 0;\r\n        \r\n        int triggerClicksNav = 7;\r\n        int triggerClicks = 3; \r\n    \r\n     protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.home_activity);\r\n             \r\n             // Ads\r\n    \r\n            MobileAds.initialize(this, initializationStatus -&gt; {\r\n            });\r\n    \r\n            AdView mAdView = findViewById(R.id.adView);\r\n    \r\n            AdRequest adRequest = new AdRequest.Builder().build();\r\n            mAdView.loadAd(adRequest);\r\n            mAdView.setAdListener(new AdListener() {\r\n                @Override\r\n                public void onAdLoaded() {\r\n                    super.onAdLoaded();\r\n                }\r\n    \r\n                @Override\r\n                public void onAdFailedToLoad(@NotNull LoadAdError adError) {\r\n                    super.onAdFailedToLoad(adError);\r\n                    mAdView.loadAd(adRequest);\r\n                }\r\n    \r\n                @Override\r\n                public void onAdOpened() {\r\n                    super.onAdOpened();\r\n                }\r\n    \r\n                @Override\r\n                public void onAdClicked() {\r\n                    super.onAdClicked();\r\n                }\r\n    \r\n                @Override\r\n                public void onAdClosed() {\r\n                    super.onAdClosed();\r\n                }\r\n            });\r\n    \r\n     }\r\n    \r\n    \r\n    \r\n        @SuppressLint(&quot;SetTextI18n&quot;)\r\n        private void next() {\r\n            countClicksNext++;\r\n            position = (position + 1) % quotes_list.size();\r\n            quotesTxt.setText(quotes_list.get(position));\r\n            countTxt.setText(position + &quot;/&quot; + quotes_list.size());\r\n            if (mInterstitialAd != null &amp;&amp; countClicksNext &gt;= triggerClicksNav) {\r\n               showAd();\r\n            }\r\n        }\r\n    \r\n       \r\n    \r\n    \r\n        private void copy() {\r\n            countClicksCopy++;\r\n            ClipboardManager clipboardManager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);\r\n            ClipData clipData = ClipData.newPlainText(&quot;text&quot;, quotesTxt.getText());\r\n            if (clipboardManager != null) {\r\n                clipboardManager.setPrimaryClip(clipData);\r\n            }\r\n            Toast.makeText(getApplicationContext(), &quot;Copied&quot;, Toast.LENGTH_SHORT).show();\r\n            if (mInterstitialAd != null &amp;&amp; countClicksCopy &gt;= triggerClicks) {\r\n               showAdOth();\r\n            }\r\n    \r\n        }\r\n    \r\n       \r\n    \r\n     private void showAd() {\r\n            mInterstitialAd.show(HomeActivity.this);\r\n            mInterstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\r\n                @Override\r\n                public void onAdDismissedFullScreenContent() {\r\n                    super.onAdDismissedFullScreenContent();\r\n                    mInterstitialAd = null;\r\n                    intertitalAd();\r\n                  \r\n                   countClicksNext = 0;\r\n                 \r\n                }\r\n            });\r\n        }\r\n        private void showAdOth() {\r\n            mInterstitialAd.show(HomeActivity.this);\r\n            mInterstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\r\n                @Override\r\n                public void onAdDismissedFullScreenContent() {\r\n                    super.onAdDismissedFullScreenContent();\r\n                    mInterstitialAd = null;\r\n                    intertitalAdOth();\r\n                    countClicksCopy = 0;\r\n                    \r\n                }\r\n            });\r\n        }\r\n    \r\n        public void intertitalAd() {\r\n    \r\n            AdRequest adRequest = new AdRequest.Builder().build();\r\n    \r\n    \r\n            InterstitialAd.load(this, &quot;ca-app-pub-3940256099942544/1033173712&quot;, adRequest,\r\n                    new InterstitialAdLoadCallback() {\r\n                        @Override\r\n                        public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n                            // The mInterstitialAd reference will be null until\r\n                            // an ad is loaded.\r\n                            mInterstitialAd = interstitialAd;\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n                            // Handle the error\r\n                            mInterstitialAd = null;\r\n                        }\r\n                    });\r\n    \r\n        }\r\n        public void intertitalAdOth() { \r\n    \r\n            AdRequest adRequest = new AdRequest.Builder().build();\r\n    \r\n    \r\n            InterstitialAd.load(this, &quot;ca-app-pub-3940256099942544/8691691433&quot;, adRequest,\r\n                    new InterstitialAdLoadCallback() {\r\n                        @Override\r\n                        public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n                            // The mInterstitialAd reference will be null until\r\n                            // an ad is loaded.\r\n                            mInterstitialAd = interstitialAd;\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n                            // Handle the error\r\n                            mInterstitialAd = null;\r\n                        }\r\n                    });\r\n    \r\n        }\r\n\r\n","title":"How can I make the interstitial ad appear when the button counter reaches the targeted number?","body":"<p>When the button counter reaches the targeted clicks, I show an interstitial ad. The interstitial ad was working fine until I left the project for quite a while and today when I returned to it, it wasn't working. I have two different interstitial ads that I want to show on different amounts of clicks, but neither of them are working.</p>\n<p><strong>Home.java</strong></p>\n<pre><code>    int countClicksNext = 0;\n    int countClicksCopy = 0;\n    \n    int triggerClicksNav = 7;\n    int triggerClicks = 3; \n\n protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.home_activity);\n         \n         // Ads\n\n        MobileAds.initialize(this, initializationStatus -&gt; {\n        });\n\n        AdView mAdView = findViewById(R.id.adView);\n\n        AdRequest adRequest = new AdRequest.Builder().build();\n        mAdView.loadAd(adRequest);\n        mAdView.setAdListener(new AdListener() {\n            @Override\n            public void onAdLoaded() {\n                super.onAdLoaded();\n            }\n\n            @Override\n            public void onAdFailedToLoad(@NotNull LoadAdError adError) {\n                super.onAdFailedToLoad(adError);\n                mAdView.loadAd(adRequest);\n            }\n\n            @Override\n            public void onAdOpened() {\n                super.onAdOpened();\n            }\n\n            @Override\n            public void onAdClicked() {\n                super.onAdClicked();\n            }\n\n            @Override\n            public void onAdClosed() {\n                super.onAdClosed();\n            }\n        });\n\n }\n\n\n\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    private void next() {\n        countClicksNext++;\n        position = (position + 1) % quotes_list.size();\n        quotesTxt.setText(quotes_list.get(position));\n        countTxt.setText(position + &quot;/&quot; + quotes_list.size());\n        if (mInterstitialAd != null &amp;&amp; countClicksNext &gt;= triggerClicksNav) {\n           showAd();\n        }\n    }\n\n   \n\n\n    private void copy() {\n        countClicksCopy++;\n        ClipboardManager clipboardManager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);\n        ClipData clipData = ClipData.newPlainText(&quot;text&quot;, quotesTxt.getText());\n        if (clipboardManager != null) {\n            clipboardManager.setPrimaryClip(clipData);\n        }\n        Toast.makeText(getApplicationContext(), &quot;Copied&quot;, Toast.LENGTH_SHORT).show();\n        if (mInterstitialAd != null &amp;&amp; countClicksCopy &gt;= triggerClicks) {\n           showAdOth();\n        }\n\n    }\n\n   \n\n private void showAd() {\n        mInterstitialAd.show(HomeActivity.this);\n        mInterstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\n            @Override\n            public void onAdDismissedFullScreenContent() {\n                super.onAdDismissedFullScreenContent();\n                mInterstitialAd = null;\n                intertitalAd();\n              \n               countClicksNext = 0;\n             \n            }\n        });\n    }\n    private void showAdOth() {\n        mInterstitialAd.show(HomeActivity.this);\n        mInterstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\n            @Override\n            public void onAdDismissedFullScreenContent() {\n                super.onAdDismissedFullScreenContent();\n                mInterstitialAd = null;\n                intertitalAdOth();\n                countClicksCopy = 0;\n                \n            }\n        });\n    }\n\n    public void intertitalAd() {\n\n        AdRequest adRequest = new AdRequest.Builder().build();\n\n\n        InterstitialAd.load(this, &quot;ca-app-pub-3940256099942544/1033173712&quot;, adRequest,\n                new InterstitialAdLoadCallback() {\n                    @Override\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n                        // The mInterstitialAd reference will be null until\n                        // an ad is loaded.\n                        mInterstitialAd = interstitialAd;\n                    }\n\n                    @Override\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n                        // Handle the error\n                        mInterstitialAd = null;\n                    }\n                });\n\n    }\n    public void intertitalAdOth() { \n\n        AdRequest adRequest = new AdRequest.Builder().build();\n\n\n        InterstitialAd.load(this, &quot;ca-app-pub-3940256099942544/8691691433&quot;, adRequest,\n                new InterstitialAdLoadCallback() {\n                    @Override\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n                        // The mInterstitialAd reference will be null until\n                        // an ad is loaded.\n                        mInterstitialAd = interstitialAd;\n                    }\n\n                    @Override\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n                        // Handle the error\n                        mInterstitialAd = null;\n                    }\n                });\n\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","docker","spring-cloud"],"comments":[{"owner":{"account_id":2386002,"reputation":5151,"user_id":2086966,"accept_rate":73,"display_name":"smilyface"},"score":0,"creation_date":1660835306,"post_id":73388637,"comment_id":129632048,"body_markdown":"I could see `GET request for &quot;http://configserver:9191/discovery-server/default&quot;` got a `Connection Refused` exception. I searched for this API in your github. Couldn&#39;t find. Is it really exists? @qwercan","body":"I could see <code>GET request for &quot;http:&#47;&#47;configserver:9191&#47;discovery-server&#47;default&quot;</code> got a <code>Connection Refused</code> exception. I searched for this API in your github. Couldn&#39;t find. Is it really exists? @qwercan"},{"owner":{"account_id":2386002,"reputation":5151,"user_id":2086966,"accept_rate":73,"display_name":"smilyface"},"score":0,"creation_date":1660905472,"post_id":73388637,"comment_id":129649370,"body_markdown":"Always, provide at least 20 lines in a stacktrace","body":"Always, provide at least 20 lines in a stacktrace"}],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660919365,"creation_date":1660741701,"answer_id":73389048,"question_id":73388637,"body_markdown":"By looks of your docker-compose , you have wrongly used `SPRING_DATASOURCE_DRIVER_CLASS_NAME`.\r\n\r\nit should be\r\n\r\n    SPRING_DATASOURCE_DRIVER_CLASS_NAME = com.mysql.jdbc.Driver\r\n    SPRING_DATASOURCE_DIALECT = org.hibernate.dialect.MySQL8Dialect ","title":"Spring Microservices Docker Issues (Connection Refused and Database Connection)","body":"<p>By looks of your docker-compose , you have wrongly used <code>SPRING_DATASOURCE_DRIVER_CLASS_NAME</code>.</p>\n<p>it should be</p>\n<pre><code>SPRING_DATASOURCE_DRIVER_CLASS_NAME = com.mysql.jdbc.Driver\nSPRING_DATASOURCE_DIALECT = org.hibernate.dialect.MySQL8Dialect \n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":917,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73389048,"answer_count":1,"score":0,"last_activity_date":1661004515,"creation_date":1660739932,"question_id":73388637,"body_markdown":"I&#39;m trying to make an example of **Spring Cloud**. I have problem on **Docker** side.\r\nwhen I run **docker-compose**,\r\n1) **Keycloak**,**rabbitmq**,**mysql** and **config server** are running.\r\n\r\n2) Here is my error i**n Eureka Server**\r\n\r\n    **Connect Timeout Exception** \r\n````\r\nRequest execution error. endpoint=DefaultEndpoint{ serviceUrl=&#39;http://eurekaserver:8761\r\n/eureka/}, exception=I/O error on GET request for &quot;http://eurekaserver:8761/eureka/apps/&quot;: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection\r\n refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection refused) sta\r\ncktrace=org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://eurekaserver:8761/eureka/apps/&quot;: Connect to eurekaserver:8761 [eurekaserver/172.22.\r\n0.6] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed:\r\nConnection refused (Connection refused)\r\n````\r\n\r\n3 ) Here is my error in **API Gateway**\r\n````\r\n    DiscoveryClient_API-GATEWAY/5b93576f14b7:api-gateway:8600: registering service...\r\n2022-08-18 21:15:16.082  INFO 1 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl=&#39;http://localhost:8761/eu\r\nreka/}, exception=I/O error on POST request for &quot;http://localhost:8761/eureka/apps/API-GATEWAY&quot;: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection\r\nrefused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused) stacktrace=\r\norg.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;http://localhost:8761/eureka/apps/API-GATEWAY&quot;: Connect to localhost:8761 [localhost/127.0.0.1] f\r\nailed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection re\r\nfused (Connection refused)\r\n````\r\n\r\n4 ) Here is my error in **Management Service**\r\n````\r\n    Request execution error. endpoint=DefaultEndpoint{ serviceUrl=&#39;http://eurekaserver:8761\r\n/eureka/}, exception=I/O error on POST request for &quot;http://eurekaserver:8761/eureka/apps/MANAGEMENT-SERVICE&quot;: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection\r\nrefused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Conn\r\nection refused) stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;http://eurekaserver:8761/eureka/apps/MANAGEMENT-SERVICE&quot;: Connect to e\r\nurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8\r\n761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection refused)\r\n````\r\n\r\n5) Here is my errors in **User Service, Advertisement Service and Report Service**\r\n````\r\n    DiscoveryClient_USER-SERVICE/468d01e02e11:user-service:9000: registering service...\r\n2022-08-18 21:10:59.300  INFO 1 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl=&#39;http://eurekaserver:8761\r\n/eureka/}, exception=I/O error on POST request for &quot;http://eurekaserver:8761/eureka/apps/USER-SERVICE&quot;: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refuse\r\nd (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection\r\n refused) stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;http://eurekaserver:8761/eureka/apps/USER-SERVICE&quot;: Connect to eurekaserver:\r\n8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekas\r\nerver/172.22.0.6] failed: Connection refused (Connection refused)\r\n````\r\nHere is my **docker compose file**.\r\n\r\n    services:\r\n    \r\n      database:\r\n        container_name: mysql-database\r\n        image: &#39;mysql:latest&#39;\r\n        ports:\r\n          - &quot;3366:3306&quot;\r\n        restart: always\r\n        environment:\r\n          #MYSQL_DATABASE: &quot;springbootuser&quot;\r\n          MYSQL_USER: &quot;springmicroserviceuser&quot;\r\n          MYSQL_PASSWORD: &quot;111111&quot;\r\n          MYSQL_ROOT_PASSWORD: &quot;111111&quot;\r\n        volumes:\r\n          - db-data:/var/lib/mysql\r\n        networks:\r\n          - backend\r\n        healthcheck:\r\n          test: [&quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot;]\r\n          timeout: 20s\r\n          retries: 10\r\n    \r\n      keycloak:\r\n        image: quay.io/keycloak/keycloak:18.0.2\r\n        environment:\r\n          - KEYCLOAK_ADMIN=admin\r\n          - KEYCLOAK_ADMIN_PASSWORD=admin\r\n        ports:\r\n          - &quot;8181:8080&quot;\r\n        networks:\r\n          - backend\r\n        command:\r\n          - start-dev\r\n    \r\n      rabbitmq:\r\n        image: &quot;rabbitmq:3-management&quot;\r\n        container_name: &quot;rmq3&quot;\r\n        environment:\r\n          RABBITMQ_DEFAULT_USER: &quot;rabbitmq&quot;\r\n          RABBITMQ_DEFAULT_PASS: &quot;123456&quot;\r\n        ports:\r\n          - &quot;5672:5672&quot;\r\n          - &quot;15672:15672&quot;\r\n        networks:\r\n          - backend\r\n    \r\n      configserver:\r\n        image: configserver\r\n        container_name: configServer\r\n        build:\r\n          context: ./configserver\r\n          dockerfile: Dockerfile\r\n        #environment:\r\n          #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          #CONFIGSERVER_PORT: &quot;9191&quot;\r\n        ports:\r\n          - &quot;9191:9191&quot;\r\n        networks:\r\n          - backend\r\n    \r\n      eurekaserver:\r\n        image: eurekaserver\r\n        ports:\r\n          - &quot;8761:8761&quot;\r\n        build:\r\n          context: ./discoveryserver\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          #CONFIGSERVER_PORT: &quot;9191&quot;\r\n          SPRING_CLOUD_CONFIG_URI: &quot;http://configserver:9191&quot;\r\n          EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          #EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n        depends_on:\r\n          configserver:\r\n            condition: service_started\r\n        networks:\r\n          - backend\r\n    \r\n    \r\n      gatewayserver:\r\n        image: gatewayserver\r\n        ports:\r\n          - &quot;8600:8600&quot;\r\n        build:\r\n          context: ./api-gateway\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          PROFILE: &quot;default&quot;\r\n          SERVER_PORT: &quot;8600&quot;\r\n          #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          SPRING_CLOUD_CONFIG_URI: &quot;http://configserver:9191&quot;\r\n          EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          #EUREKASERVER_PORT: &quot;8761&quot;\r\n          #CONFIGSERVER_PORT: &quot;9191&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n        depends_on:\r\n          configserver:\r\n            condition: service_started\r\n          eurekaserver:\r\n            condition: service_started\r\n          userservice:\r\n            condition: service_started\r\n          managementservice:\r\n            condition: service_started\r\n          advertisementservice:\r\n            condition: service_started\r\n          reportservice:\r\n            condition: service_started\r\n        networks:\r\n          - backend\r\n    \r\n      userservice:\r\n        image: user-service\r\n        build:\r\n          context: ./user-service\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          SERVER_PORT: &quot;9000&quot;\r\n          #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          #CONFIGSERVER_PORT: &quot;9191&quot;\r\n          SPRING_CLOUD_CONFIG_URI: &quot;http://configserver:9191&quot;\r\n          EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          #EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n          DATABASE_HOST: database\r\n          DATABASE_USER: springmicroserviceuser\r\n          DATABASE_PASSWORD: 111111\r\n          DATABASE_NAME: springbootuser\r\n          DATABASE_PORT: 3306\r\n          SPRING_APPLICATION_JSON: &#39;{\r\n                  &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\r\n          }&#39;\r\n        depends_on:\r\n          database:\r\n            condition: service_healthy\r\n          configserver:\r\n            condition: service_started\r\n          eurekaserver:\r\n            condition: service_started\r\n          keycloak:\r\n            condition: service_started\r\n        ports:\r\n          - &quot;9000:9000&quot;\r\n        networks:\r\n          - backend\r\n    \r\n      managementservice:\r\n        image: management-service\r\n        build:\r\n          context: ./management-service\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          SERVER_PORT: &quot;9002&quot;\r\n          #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          #CONFIGSERVER_PORT: &quot;9191&quot;\r\n          SPRING_CLOUD_CONFIG_URI: &quot;http://configserver:9191&quot;\r\n          EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          #EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n        depends_on:\r\n          configserver:\r\n            condition: service_started\r\n          eurekaserver:\r\n            condition: service_started\r\n        ports:\r\n          - &quot;9002:9002&quot;\r\n        networks:\r\n          - backend\r\n    \r\n      advertisementservice:\r\n        image: advertisement-service\r\n        build:\r\n          context: ./advertisement-service\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          SERVER_PORT: &quot;9001&quot;\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n          EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n          DATABASE_HOST: database\r\n          DATABASE_USER: springmicroserviceuser\r\n          DATABASE_PASSWORD: 111111\r\n          DATABASE_NAME: springbootadvertisement\r\n          DATABASE_PORT: 3306\r\n          SPRING_APPLICATION_JSON: &#39;{\r\n                      &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\r\n          }&#39;\r\n        depends_on:\r\n          database:\r\n            condition: service_healthy\r\n          configserver:\r\n            condition: service_started\r\n          eurekaserver:\r\n            condition: service_started\r\n          rabbitmq:\r\n            condition: service_started\r\n        ports:\r\n          - &quot;9001:9001&quot;\r\n        networks:\r\n          - backend\r\n    \r\n    \r\n      reportservice:\r\n        image: report-service\r\n        build:\r\n          context: ./report-service\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          SERVER_PORT: &quot;9003&quot;\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n          EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n          DATABASE_HOST: database\r\n          DATABASE_USER: springmicroserviceuser\r\n          DATABASE_PASSWORD: 111111\r\n          DATABASE_NAME: springbootreport\r\n          DATABASE_PORT: 3306\r\n          SPRING_APPLICATION_JSON: &#39;{\r\n                          &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\r\n          }&#39;\r\n        depends_on:\r\n          database:\r\n            condition: service_healthy\r\n          configserver:\r\n            condition: service_started\r\n          eurekaserver:\r\n            condition: service_started\r\n          rabbitmq:\r\n            condition: service_started\r\n        ports:\r\n          - &quot;9003:9003&quot;\r\n        networks:\r\n          - backend\r\n    \r\n    networks:\r\n      backend:\r\n        driver: bridge\r\n    \r\n    \r\n    volumes:\r\n      db-data:\r\n\r\nHere is the project link : [Link][1]\r\n\r\nHere are some screenshots for my issues : [Link][2]\r\n\r\n**1st Edited** : I defined them for user, report and advertisement service. \r\n\r\n    SPRING_DATASOURCE_DRIVER_CLASS_NAME: java.sql.Driver\r\n    SPRING_DATASOURCE_DIALECT: org.hibernate.dialect.MySQL8Dialect\r\n\r\nI got errors shown below.\r\n\r\n    Caused by: java.lang.RuntimeException: Failed to instantiate class java.sql.Driver\r\n    java.lang.NoSuchMethodException: java.sql.Driver.&lt;init&gt;()\r\n\r\n**2nd Editted** : Here is the logs of eureka server : [Link][3]\r\n\r\n**3rd Editted** : Updated docker-compose.yml\r\n\r\n**4th Editted** : Here is the logs of eureka server : [Link][4]\r\n\r\n**5th Editted** : Here is the new logs of each services : [Link][5]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/SpringBootMicroservices\r\n  [2]: https://drive.google.com/drive/folders/1H_lrfkOIzx8JBN2Q6Re0NxIAQqoDAVgu?usp=sharing\r\n  [3]: https://drive.google.com/file/d/168X4pcXWMU1POrOqchEJouP9Gqs2rfUS/view?usp=sharing\r\n  [4]: https://drive.google.com/file/d/1lWraNDr6KjB1vcGK04GFsgHN8imFpK5_/view?usp=sharing\r\n  [5]: https://drive.google.com/drive/folders/1ff9IidkjpwjpR8PNKzvIKJzDWakgwvVb?usp=sharing","title":"Spring Microservices Docker Issues (Connection Refused and Database Connection)","body":"<p>I'm trying to make an example of <strong>Spring Cloud</strong>. I have problem on <strong>Docker</strong> side.\nwhen I run <strong>docker-compose</strong>,</p>\n<ol>\n<li><p><strong>Keycloak</strong>,<strong>rabbitmq</strong>,<strong>mysql</strong> and <strong>config server</strong> are running.</p>\n</li>\n<li><p>Here is my error i<strong>n Eureka Server</strong></p>\n<p><strong>Connect Timeout Exception</strong></p>\n</li>\n</ol>\n<pre><code>Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://eurekaserver:8761\n/eureka/}, exception=I/O error on GET request for &quot;http://eurekaserver:8761/eureka/apps/&quot;: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection\n refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection refused) sta\ncktrace=org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://eurekaserver:8761/eureka/apps/&quot;: Connect to eurekaserver:8761 [eurekaserver/172.22.\n0.6] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed:\nConnection refused (Connection refused)\n</code></pre>\n<p>3 ) Here is my error in <strong>API Gateway</strong></p>\n<pre><code>    DiscoveryClient_API-GATEWAY/5b93576f14b7:api-gateway:8600: registering service...\n2022-08-18 21:15:16.082  INFO 1 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8761/eu\nreka/}, exception=I/O error on POST request for &quot;http://localhost:8761/eureka/apps/API-GATEWAY&quot;: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection\nrefused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused) stacktrace=\norg.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;http://localhost:8761/eureka/apps/API-GATEWAY&quot;: Connect to localhost:8761 [localhost/127.0.0.1] f\nailed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection re\nfused (Connection refused)\n</code></pre>\n<p>4 ) Here is my error in <strong>Management Service</strong></p>\n<pre><code>    Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://eurekaserver:8761\n/eureka/}, exception=I/O error on POST request for &quot;http://eurekaserver:8761/eureka/apps/MANAGEMENT-SERVICE&quot;: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection\nrefused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Conn\nection refused) stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;http://eurekaserver:8761/eureka/apps/MANAGEMENT-SERVICE&quot;: Connect to e\nurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8\n761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection refused)\n</code></pre>\n<ol start=\"5\">\n<li>Here is my errors in <strong>User Service, Advertisement Service and Report Service</strong></li>\n</ol>\n<pre><code>    DiscoveryClient_USER-SERVICE/468d01e02e11:user-service:9000: registering service...\n2022-08-18 21:10:59.300  INFO 1 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://eurekaserver:8761\n/eureka/}, exception=I/O error on POST request for &quot;http://eurekaserver:8761/eureka/apps/USER-SERVICE&quot;: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refuse\nd (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection\n refused) stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;http://eurekaserver:8761/eureka/apps/USER-SERVICE&quot;: Connect to eurekaserver:\n8761 [eurekaserver/172.22.0.6] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to eurekaserver:8761 [eurekas\nerver/172.22.0.6] failed: Connection refused (Connection refused)\n</code></pre>\n<p>Here is my <strong>docker compose file</strong>.</p>\n<pre><code>services:\n\n  database:\n    container_name: mysql-database\n    image: 'mysql:latest'\n    ports:\n      - &quot;3366:3306&quot;\n    restart: always\n    environment:\n      #MYSQL_DATABASE: &quot;springbootuser&quot;\n      MYSQL_USER: &quot;springmicroserviceuser&quot;\n      MYSQL_PASSWORD: &quot;111111&quot;\n      MYSQL_ROOT_PASSWORD: &quot;111111&quot;\n    volumes:\n      - db-data:/var/lib/mysql\n    networks:\n      - backend\n    healthcheck:\n      test: [&quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot;]\n      timeout: 20s\n      retries: 10\n\n  keycloak:\n    image: quay.io/keycloak/keycloak:18.0.2\n    environment:\n      - KEYCLOAK_ADMIN=admin\n      - KEYCLOAK_ADMIN_PASSWORD=admin\n    ports:\n      - &quot;8181:8080&quot;\n    networks:\n      - backend\n    command:\n      - start-dev\n\n  rabbitmq:\n    image: &quot;rabbitmq:3-management&quot;\n    container_name: &quot;rmq3&quot;\n    environment:\n      RABBITMQ_DEFAULT_USER: &quot;rabbitmq&quot;\n      RABBITMQ_DEFAULT_PASS: &quot;123456&quot;\n    ports:\n      - &quot;5672:5672&quot;\n      - &quot;15672:15672&quot;\n    networks:\n      - backend\n\n  configserver:\n    image: configserver\n    container_name: configServer\n    build:\n      context: ./configserver\n      dockerfile: Dockerfile\n    #environment:\n      #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      #CONFIGSERVER_PORT: &quot;9191&quot;\n    ports:\n      - &quot;9191:9191&quot;\n    networks:\n      - backend\n\n  eurekaserver:\n    image: eurekaserver\n    ports:\n      - &quot;8761:8761&quot;\n    build:\n      context: ./discoveryserver\n      dockerfile: Dockerfile\n    environment:\n      #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      #CONFIGSERVER_PORT: &quot;9191&quot;\n      SPRING_CLOUD_CONFIG_URI: &quot;http://configserver:9191&quot;\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\n      #EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n    depends_on:\n      configserver:\n        condition: service_started\n    networks:\n      - backend\n\n\n  gatewayserver:\n    image: gatewayserver\n    ports:\n      - &quot;8600:8600&quot;\n    build:\n      context: ./api-gateway\n      dockerfile: Dockerfile\n    environment:\n      PROFILE: &quot;default&quot;\n      SERVER_PORT: &quot;8600&quot;\n      #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      SPRING_CLOUD_CONFIG_URI: &quot;http://configserver:9191&quot;\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\n      #EUREKASERVER_PORT: &quot;8761&quot;\n      #CONFIGSERVER_PORT: &quot;9191&quot;\n      WAIT_HOSTS: configserver:9191\n    depends_on:\n      configserver:\n        condition: service_started\n      eurekaserver:\n        condition: service_started\n      userservice:\n        condition: service_started\n      managementservice:\n        condition: service_started\n      advertisementservice:\n        condition: service_started\n      reportservice:\n        condition: service_started\n    networks:\n      - backend\n\n  userservice:\n    image: user-service\n    build:\n      context: ./user-service\n      dockerfile: Dockerfile\n    environment:\n      SERVER_PORT: &quot;9000&quot;\n      #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      #CONFIGSERVER_PORT: &quot;9191&quot;\n      SPRING_CLOUD_CONFIG_URI: &quot;http://configserver:9191&quot;\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\n      #EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n      DATABASE_HOST: database\n      DATABASE_USER: springmicroserviceuser\n      DATABASE_PASSWORD: 111111\n      DATABASE_NAME: springbootuser\n      DATABASE_PORT: 3306\n      SPRING_APPLICATION_JSON: '{\n              &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\n      }'\n    depends_on:\n      database:\n        condition: service_healthy\n      configserver:\n        condition: service_started\n      eurekaserver:\n        condition: service_started\n      keycloak:\n        condition: service_started\n    ports:\n      - &quot;9000:9000&quot;\n    networks:\n      - backend\n\n  managementservice:\n    image: management-service\n    build:\n      context: ./management-service\n      dockerfile: Dockerfile\n    environment:\n      SERVER_PORT: &quot;9002&quot;\n      #CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      #CONFIGSERVER_PORT: &quot;9191&quot;\n      SPRING_CLOUD_CONFIG_URI: &quot;http://configserver:9191&quot;\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\n      #EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n    depends_on:\n      configserver:\n        condition: service_started\n      eurekaserver:\n        condition: service_started\n    ports:\n      - &quot;9002:9002&quot;\n    networks:\n      - backend\n\n  advertisementservice:\n    image: advertisement-service\n    build:\n      context: ./advertisement-service\n      dockerfile: Dockerfile\n    environment:\n      SERVER_PORT: &quot;9001&quot;\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\n      EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n      DATABASE_HOST: database\n      DATABASE_USER: springmicroserviceuser\n      DATABASE_PASSWORD: 111111\n      DATABASE_NAME: springbootadvertisement\n      DATABASE_PORT: 3306\n      SPRING_APPLICATION_JSON: '{\n                  &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\n      }'\n    depends_on:\n      database:\n        condition: service_healthy\n      configserver:\n        condition: service_started\n      eurekaserver:\n        condition: service_started\n      rabbitmq:\n        condition: service_started\n    ports:\n      - &quot;9001:9001&quot;\n    networks:\n      - backend\n\n\n  reportservice:\n    image: report-service\n    build:\n      context: ./report-service\n      dockerfile: Dockerfile\n    environment:\n      SERVER_PORT: &quot;9003&quot;\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: &quot;http://eurekaserver:8761/eureka/&quot;\n      EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n      DATABASE_HOST: database\n      DATABASE_USER: springmicroserviceuser\n      DATABASE_PASSWORD: 111111\n      DATABASE_NAME: springbootreport\n      DATABASE_PORT: 3306\n      SPRING_APPLICATION_JSON: '{\n                      &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\n      }'\n    depends_on:\n      database:\n        condition: service_healthy\n      configserver:\n        condition: service_started\n      eurekaserver:\n        condition: service_started\n      rabbitmq:\n        condition: service_started\n    ports:\n      - &quot;9003:9003&quot;\n    networks:\n      - backend\n\nnetworks:\n  backend:\n    driver: bridge\n\n\nvolumes:\n  db-data:\n</code></pre>\n<p>Here is the project link : <a href=\"https://github.com/Rapter1990/SpringBootMicroservices\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Here are some screenshots for my issues : <a href=\"https://drive.google.com/drive/folders/1H_lrfkOIzx8JBN2Q6Re0NxIAQqoDAVgu?usp=sharing\" rel=\"nofollow noreferrer\">Link</a></p>\n<p><strong>1st Edited</strong> : I defined them for user, report and advertisement service.</p>\n<pre><code>SPRING_DATASOURCE_DRIVER_CLASS_NAME: java.sql.Driver\nSPRING_DATASOURCE_DIALECT: org.hibernate.dialect.MySQL8Dialect\n</code></pre>\n<p>I got errors shown below.</p>\n<pre><code>Caused by: java.lang.RuntimeException: Failed to instantiate class java.sql.Driver\njava.lang.NoSuchMethodException: java.sql.Driver.&lt;init&gt;()\n</code></pre>\n<p><strong>2nd Editted</strong> : Here is the logs of eureka server : <a href=\"https://drive.google.com/file/d/168X4pcXWMU1POrOqchEJouP9Gqs2rfUS/view?usp=sharing\" rel=\"nofollow noreferrer\">Link</a></p>\n<p><strong>3rd Editted</strong> : Updated docker-compose.yml</p>\n<p><strong>4th Editted</strong> : Here is the logs of eureka server : <a href=\"https://drive.google.com/file/d/1lWraNDr6KjB1vcGK04GFsgHN8imFpK5_/view?usp=sharing\" rel=\"nofollow noreferrer\">Link</a></p>\n<p><strong>5th Editted</strong> : Here is the new logs of each services : <a href=\"https://drive.google.com/drive/folders/1ff9IidkjpwjpR8PNKzvIKJzDWakgwvVb?usp=sharing\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","unix","tree","treeview","composite"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1660761125,"post_id":73391431,"comment_id":129611479,"body_markdown":"Please be more specific than “What do I need to do so it will work?”  What about the program’s behavior is different from what you were expecting?","body":"Please be more specific than “What do I need to do so it will work?”  What about the program’s behavior is different from what you were expecting?"},{"owner":{"account_id":14573041,"reputation":25,"user_id":10601389,"display_name":"May Sohatchevzzki"},"score":0,"creation_date":1661072688,"post_id":73391431,"comment_id":129680265,"body_markdown":"add the comparison","body":"add the comparison"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1661108610,"post_id":73391431,"comment_id":129688037,"body_markdown":"I gather you want the last line to print `└──` rather than `├──`?","body":"I gather you want the last line to print <code>└──</code> rather than <code>├──</code>?"}],"owner":{"account_id":14573041,"reputation":25,"user_id":10601389,"display_name":"May Sohatchevzzki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661004087,"creation_date":1660751412,"question_id":73391431,"body_markdown":"I am trying really hard to make my code to print the files and the directories in the same way that the command &#39;tree&#39; in unix print.\r\n\r\nWhat do I need to do so it will work? I&#39;m stuck on it to much hours :(\r\n\r\nThis is the class I created for simple implementation of tree command using the composite design pattern:\r\n\r\n\r\n```\r\nimport java.io.File;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class TreePrint {\r\n    private final Directory root;\r\n\r\n    public TreePrint(String path) {\r\n        root = new Directory(path);\r\n    }\r\n\r\n    public void printTree(){\r\n        root.print(0);\r\n    }\r\n\r\n    private interface FileSystemComponent {\r\n        void print(int level);\r\n    }\r\n\r\n    private static class FileComponent implements FileSystemComponent{\r\n        private final String fileName;\r\n\r\n        public FileComponent(String name) {\r\n            fileName = name;\r\n        }\r\n\r\n        @Override\r\n        public void print(int level) {\r\n            printLevel(level);\r\n            System.out.println(fileName);\r\n        }\r\n    }\r\n\r\n    private static class Directory implements FileSystemComponent{\r\n        private final String directoryName;\r\n        private final List&lt;FileSystemComponent&gt; fileList = new ArrayList&lt;&gt;();\r\n\r\n        public Directory(String path) {\r\n            File directory = new File(path);\r\n            if(!directory.exists()){\r\n                throw new IllegalArgumentException(&quot;Invalid path, please try again&quot;);\r\n            }\r\n\r\n            directoryName = directory.getName();\r\n            File[] components = directory.listFiles();\r\n\r\n            if(null != components) {\r\n                for (File file : components) {\r\n                    if (file.isDirectory()) {\r\n                        fileList.add(new Directory(file.getPath()));\r\n                    } else {\r\n                        fileList.add(new FileComponent(file.getName()));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void print(int level) {\r\n            printLevel(level);\r\n            System.out.println(colorTextToBlue(directoryName));\r\n            for(FileSystemComponent file : fileList) {\r\n                file.print(level + 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    private static void printLevel(int level){\r\n        System.out.print(&quot;├──&quot;);\r\n        for (int i = 0; i &lt; level; ++i) {\r\n            System.out.print(&quot;──&quot;);\r\n        }\r\n    }\r\n\r\n    private static String colorTextToBlue(String text){\r\n        final String blueBold = &quot;\\033[1;34m&quot;;\r\n        final String reset = &quot;\\033[0m&quot;;\r\n\r\n        return blueBold + text + reset;\r\n    }\r\n}\r\n```\r\n\r\nFor example, I want to print like this:\r\n```\r\n├── makefile\r\n├── quiz19.c\r\n├── stack_min.c\r\n└── stack_min.h\r\n```\r\n\r\nbut it&#39;s print like this:\r\n```\r\n├──quiz19\r\n├────makefile\r\n├────quiz19.c\r\n├────stack_min.c\r\n├────stack_min.h\r\n```\r\n\r\n(I still wan&#39;t the root on top, but i just want the lines to be the same like int the last file)","title":"How to print in my class like tree command in unix?","body":"<p>I am trying really hard to make my code to print the files and the directories in the same way that the command 'tree' in unix print.</p>\n<p>What do I need to do so it will work? I'm stuck on it to much hours :(</p>\n<p>This is the class I created for simple implementation of tree command using the composite design pattern:</p>\n<pre><code>import java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class TreePrint {\n    private final Directory root;\n\n    public TreePrint(String path) {\n        root = new Directory(path);\n    }\n\n    public void printTree(){\n        root.print(0);\n    }\n\n    private interface FileSystemComponent {\n        void print(int level);\n    }\n\n    private static class FileComponent implements FileSystemComponent{\n        private final String fileName;\n\n        public FileComponent(String name) {\n            fileName = name;\n        }\n\n        @Override\n        public void print(int level) {\n            printLevel(level);\n            System.out.println(fileName);\n        }\n    }\n\n    private static class Directory implements FileSystemComponent{\n        private final String directoryName;\n        private final List&lt;FileSystemComponent&gt; fileList = new ArrayList&lt;&gt;();\n\n        public Directory(String path) {\n            File directory = new File(path);\n            if(!directory.exists()){\n                throw new IllegalArgumentException(&quot;Invalid path, please try again&quot;);\n            }\n\n            directoryName = directory.getName();\n            File[] components = directory.listFiles();\n\n            if(null != components) {\n                for (File file : components) {\n                    if (file.isDirectory()) {\n                        fileList.add(new Directory(file.getPath()));\n                    } else {\n                        fileList.add(new FileComponent(file.getName()));\n                    }\n                }\n            }\n        }\n\n        @Override\n        public void print(int level) {\n            printLevel(level);\n            System.out.println(colorTextToBlue(directoryName));\n            for(FileSystemComponent file : fileList) {\n                file.print(level + 1);\n            }\n        }\n    }\n\n    private static void printLevel(int level){\n        System.out.print(&quot;├──&quot;);\n        for (int i = 0; i &lt; level; ++i) {\n            System.out.print(&quot;──&quot;);\n        }\n    }\n\n    private static String colorTextToBlue(String text){\n        final String blueBold = &quot;\\033[1;34m&quot;;\n        final String reset = &quot;\\033[0m&quot;;\n\n        return blueBold + text + reset;\n    }\n}\n</code></pre>\n<p>For example, I want to print like this:</p>\n<pre><code>├── makefile\n├── quiz19.c\n├── stack_min.c\n└── stack_min.h\n</code></pre>\n<p>but it's print like this:</p>\n<pre><code>├──quiz19\n├────makefile\n├────quiz19.c\n├────stack_min.c\n├────stack_min.h\n</code></pre>\n<p>(I still wan't the root on top, but i just want the lines to be the same like int the last file)</p>\n"},{"tags":["java","spring-boot","spring-thymeleaf"],"comments":[{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1660992653,"post_id":73425539,"comment_id":129667830,"body_markdown":"Please specify clearly what you have to do and where you getting a problem","body":"Please specify clearly what you have to do and where you getting a problem"},{"owner":{"account_id":20501264,"reputation":47,"user_id":15045151,"display_name":"Deni Bakulić"},"score":0,"creation_date":1660993805,"post_id":73425539,"comment_id":129668052,"body_markdown":"When I start up my page and login as admin I have a button that activates the above controller. The controller is supposed to open up a template with the data provided in the browser. The problem is it does not open it and it doesn&#39;t give any type of error. On a blank page is literally typed out all-families which is the name of the template.","body":"When I start up my page and login as admin I have a button that activates the above controller. The controller is supposed to open up a template with the data provided in the browser. The problem is it does not open it and it doesn&#39;t give any type of error. On a blank page is literally typed out all-families which is the name of the template."},{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1661003776,"post_id":73425539,"comment_id":129669886,"body_markdown":"Could you show the complete code for the controller? You might have marked it `@RestController` or `@ResponseBody`.","body":"Could you show the complete code for the controller? You might have marked it <code>@RestController</code> or <code>@ResponseBody</code>."},{"owner":{"account_id":20501264,"reputation":47,"user_id":15045151,"display_name":"Deni Bakulić"},"score":0,"creation_date":1661077104,"post_id":73425539,"comment_id":129681133,"body_markdown":"Although it is random but my answer below fixed the issues. Regarding your question I did check that before and it is @Controller","body":"Although it is random but my answer below fixed the issues. Regarding your question I did check that before and it is @Controller"}],"answers":[{"tags":[],"owner":{"account_id":20501264,"reputation":47,"user_id":15045151,"display_name":"Deni Bakulić"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661003496,"creation_date":1661003496,"answer_id":73427244,"question_id":73425539,"body_markdown":"I was able to fix the issue by copying the code into a new class and changing the class request mapping path from /family to /families. For some reason /family just doesn&#39;t work.","title":"Controller printing the template name","body":"<p>I was able to fix the issue by copying the code into a new class and changing the class request mapping path from /family to /families. For some reason /family just doesn't work.</p>\n"}],"owner":{"account_id":20501264,"reputation":47,"user_id":15045151,"display_name":"Deni Bakulić"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661003496,"creation_date":1660987656,"question_id":73425539,"body_markdown":"I have a little problem when I push a button on my page that should just get a template and display it, it doesn&#39;t happen but the actual template name is printed on a white page in browser. I have a completely same controller set up and template for a different objects and it works. I am working with Java, Spring Boot and Thymeleaf.\r\n\r\nThis is my controller in question. The controller class path is `/family`.\r\n```\r\n@GetMapping(&quot;/all&quot;)\r\npublic String getFamilyList(Model model) {\r\n    List&lt;Family&gt; list = familyService.getAllFamilies();\r\n    model.addAttribute(&quot;families&quot;, list);\r\n    return &quot;all-families&quot;;\r\n}\r\n```\r\n\r\nThis is the button from the template that works fine\r\n```\r\n&lt;a th:href=&quot;@{/family/all}&quot; class=&quot;btn btn-success&quot;&gt;Family list&lt;/a&gt;\r\n```\r\n\r\nThis is the all-families template\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n&lt;title&gt;List of all families&lt;/title&gt;\r\n&lt;link rel=&quot;stylesheet&quot;\r\n\thref=&quot;https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css&quot;\r\n\tintegrity=&quot;sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T&quot;\r\n\tcrossorigin=&quot;anonymous&quot;&gt;\r\n&lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/css/main.css}&quot; /&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n\t&lt;div class=&quot;navbar navbar-expand-lg static-top&quot;&gt;\r\n\t\t&lt;a class=&quot;navbar-brand&quot; href=&quot;/&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;\r\n\t\t\t&lt;img th:src=&quot;@{/images/plantIcon.png}&quot; alt=&quot;...&quot; height=&quot;36&quot; /&gt;\r\n\t\t&lt;/a&gt;\r\n\t\t&lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;\r\n\t\t\t&lt;ul class=&quot;navbar-nav ms-auto&quot;&gt;\r\n\t\t\t\t&lt;li class=&quot;nav-item&quot;&gt;\r\n\t\t\t\t\t&lt;a class=&quot;nav-link&quot; href=&quot;/&quot;&gt;Home&lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;\r\n\t\t\t\t&lt;/li&gt;\r\n\t\t\t\t&lt;li class=&quot;nav-item&quot;&gt;\r\n\t\t\t\t\t&lt;a class=&quot;nav-link&quot; href=&quot;/herbarium/all/user&quot;&gt;Herbarium&lt;/a&gt;\r\n\t\t\t\t&lt;/li&gt;\r\n\t\t\t\t&lt;li class=&quot;nav-item&quot;&gt;\r\n\t\t\t\t\t&lt;a class=&quot;nav-link&quot; href=&quot;/userLists/user/{id}(id=${current.userId})&quot;&gt;Lists&lt;/a&gt;\r\n\t\t\t\t&lt;/li&gt;\r\n\t\t\t\t&lt;li class=&quot;nav-item&quot;&gt;\r\n\t\t\t\t\t&lt;a class=&quot;nav-link&quot; href=&quot;/family/search&quot;&gt;Find&lt;/a&gt;\r\n\t\t\t\t&lt;/li&gt;\r\n\t\t\t&lt;/ul&gt;\r\n\t\t&lt;/div&gt;\r\n\t&lt;/div&gt;\r\n\r\n\t&lt;div class=&quot;container&quot;&gt;\r\n\t\t&lt;a th:href=&quot;@{/family}&quot; class=&quot;btn btn-success&quot;&gt;Add Family&lt;/a&gt;\r\n\t\t&lt;br&gt;&lt;/br&gt;\r\n\t\t&lt;table class=&quot;table&quot;&gt;\r\n\t\t\t&lt;thead&gt;\r\n\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t&lt;th scope=&quot;col&quot;&gt;Name&lt;/th&gt;\r\n\t\t\t\t\t&lt;th scope=&quot;col&quot;&gt;Info link&lt;/th&gt;\r\n\t\t\t\t\t&lt;th scope=&quot;col&quot; colspan=&quot;2&quot;&gt;&lt;/th&gt;\r\n\t\t\t\t&lt;/tr&gt;\r\n\t\t\t&lt;/thead&gt;\r\n\t\t\t&lt;tbody&gt;\r\n\t\t\t\t&lt;tr th:each=&quot;family: ${families}&quot;&gt;\r\n\t\t\t\t\t&lt;td th:text=&quot;${family.name}&quot;&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;td th:text=&quot;${family.link}&quot;&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;\r\n\t\t\t\t\t\t&lt;a th:href=&quot;@{/family/update/{id}(id=${family.familyId})}&quot; class=&quot;btn btn-info&quot;&gt;Update family&lt;/a&gt;\r\n\t\t\t\t\t&lt;/td&gt;\r\n\t\t\t\t\t&lt;td&gt;\r\n\t\t\t\t\t\t&lt;a th:href=&quot;@{/family/delete/{id}(id=${family.familyId})}&quot; class=&quot;btn btn-danger&quot;&gt;Delete family&lt;/a&gt;\r\n\t\t\t\t\t&lt;/td&gt;\r\n\t\t\t\t&lt;/tr&gt;\r\n\t\t\t&lt;/tbody&gt;\r\n\t\t&lt;/table&gt;\r\n\t&lt;/div&gt;\r\n\r\n\t&lt;footer id=&quot;sticky-footer&quot; class=&quot;flex-shrink-0 py-4 text-white-50&quot;&gt;\r\n\t\t&lt;div&gt;\r\n\t\t\t&lt;small&gt;Copyright &amp;copy; Online Herbarium&lt;/small&gt;\r\n\t\t&lt;/div&gt;\r\n\t&lt;/footer&gt;\r\n\t&lt;script src=&quot;https://code.jquery.com/jquery-3.3.1.slim.min.js&quot;\r\n\t\tintegrity=&quot;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&quot;\r\n\t\tcrossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n\t&lt;script\r\n\t\tsrc=&quot;https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js&quot;\r\n\t\tintegrity=&quot;sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1&quot;\r\n\t\tcrossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n\t&lt;script\r\n\t\tsrc=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js&quot;\r\n\t\tintegrity=&quot;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&quot;\r\n\t\tcrossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n\t&lt;script\r\n\t\tsrc=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css&quot;\r\n\t\tintegrity=&quot;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&quot;\r\n\t\tcrossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n","title":"Controller printing the template name","body":"<p>I have a little problem when I push a button on my page that should just get a template and display it, it doesn't happen but the actual template name is printed on a white page in browser. I have a completely same controller set up and template for a different objects and it works. I am working with Java, Spring Boot and Thymeleaf.</p>\n<p>This is my controller in question. The controller class path is <code>/family</code>.</p>\n<pre><code>@GetMapping(&quot;/all&quot;)\npublic String getFamilyList(Model model) {\n    List&lt;Family&gt; list = familyService.getAllFamilies();\n    model.addAttribute(&quot;families&quot;, list);\n    return &quot;all-families&quot;;\n}\n</code></pre>\n<p>This is the button from the template that works fine</p>\n<pre><code>&lt;a th:href=&quot;@{/family/all}&quot; class=&quot;btn btn-success&quot;&gt;Family list&lt;/a&gt;\n</code></pre>\n<p>This is the all-families template</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://thymeleaf.org&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;List of all families&lt;/title&gt;\n&lt;link rel=&quot;stylesheet&quot;\n    href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css&quot;\n    integrity=&quot;sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T&quot;\n    crossorigin=&quot;anonymous&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/css/main.css}&quot; /&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div class=&quot;navbar navbar-expand-lg static-top&quot;&gt;\n        &lt;a class=&quot;navbar-brand&quot; href=&quot;/&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;\n            &lt;img th:src=&quot;@{/images/plantIcon.png}&quot; alt=&quot;...&quot; height=&quot;36&quot; /&gt;\n        &lt;/a&gt;\n        &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;\n            &lt;ul class=&quot;navbar-nav ms-auto&quot;&gt;\n                &lt;li class=&quot;nav-item&quot;&gt;\n                    &lt;a class=&quot;nav-link&quot; href=&quot;/&quot;&gt;Home&lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;\n                &lt;/li&gt;\n                &lt;li class=&quot;nav-item&quot;&gt;\n                    &lt;a class=&quot;nav-link&quot; href=&quot;/herbarium/all/user&quot;&gt;Herbarium&lt;/a&gt;\n                &lt;/li&gt;\n                &lt;li class=&quot;nav-item&quot;&gt;\n                    &lt;a class=&quot;nav-link&quot; href=&quot;/userLists/user/{id}(id=${current.userId})&quot;&gt;Lists&lt;/a&gt;\n                &lt;/li&gt;\n                &lt;li class=&quot;nav-item&quot;&gt;\n                    &lt;a class=&quot;nav-link&quot; href=&quot;/family/search&quot;&gt;Find&lt;/a&gt;\n                &lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;a th:href=&quot;@{/family}&quot; class=&quot;btn btn-success&quot;&gt;Add Family&lt;/a&gt;\n        &lt;br&gt;&lt;/br&gt;\n        &lt;table class=&quot;table&quot;&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th scope=&quot;col&quot;&gt;Name&lt;/th&gt;\n                    &lt;th scope=&quot;col&quot;&gt;Info link&lt;/th&gt;\n                    &lt;th scope=&quot;col&quot; colspan=&quot;2&quot;&gt;&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n                &lt;tr th:each=&quot;family: ${families}&quot;&gt;\n                    &lt;td th:text=&quot;${family.name}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${family.link}&quot;&gt;&lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;a th:href=&quot;@{/family/update/{id}(id=${family.familyId})}&quot; class=&quot;btn btn-info&quot;&gt;Update family&lt;/a&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;a th:href=&quot;@{/family/delete/{id}(id=${family.familyId})}&quot; class=&quot;btn btn-danger&quot;&gt;Delete family&lt;/a&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n\n    &lt;footer id=&quot;sticky-footer&quot; class=&quot;flex-shrink-0 py-4 text-white-50&quot;&gt;\n        &lt;div&gt;\n            &lt;small&gt;Copyright &amp;copy; Online Herbarium&lt;/small&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.3.1.slim.min.js&quot;\n        integrity=&quot;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n    &lt;script\n        src=&quot;https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js&quot;\n        integrity=&quot;sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n    &lt;script\n        src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js&quot;\n        integrity=&quot;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n    &lt;script\n        src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css&quot;\n        integrity=&quot;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","option-type","java-14","java-record","preview-feature"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1594948948,"post_id":62945049,"comment_id":111312762,"body_markdown":"What about simply `record MyRecord (String id, Optional&lt;String&gt; value) {}`?","body":"What about simply <code>record MyRecord (String id, Optional&lt;String&gt; value) {}</code>?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1594949033,"post_id":62945049,"comment_id":111312779,"body_markdown":"Or ```\n    record MyRecord (String id, Optional&lt;String&gt; value) {\n        public static MyRecord create(String id, @Nullable String value) {\n            return new MyRecord(id, Optional.ofNullable(value));\n        }\n    }\n```","body":"Or ```     record MyRecord (String id, Optional&lt;String&gt; value) {         public static MyRecord create(String id, @Nullable String value) {             return new MyRecord(id, Optional.ofNullable(value));         }     } ```"},{"owner":{"account_id":246034,"reputation":900,"user_id":519910,"accept_rate":87,"display_name":"Leikingo"},"score":6,"creation_date":1594970981,"post_id":62945049,"comment_id":111318407,"body_markdown":"While possible, at least my understanding of the preferred use of `Optional` is *not* to use them as arguments or members though.","body":"While possible, at least my understanding of the preferred use of <code>Optional</code> is <i>not</i> to use them as arguments or members though."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1594971975,"post_id":62945049,"comment_id":111318816,"body_markdown":"Agreed that a lot of people say that. I don&#39;t see a problem in this case, especially if clients of the record just use the `create()` method above.","body":"Agreed that a lot of people say that. I don&#39;t see a problem in this case, especially if clients of the record just use the <code>create()</code> method above."},{"owner":{"account_id":246034,"reputation":900,"user_id":519910,"accept_rate":87,"display_name":"Leikingo"},"score":0,"creation_date":1594973014,"post_id":62945049,"comment_id":111319331,"body_markdown":"From the usage/ client perspective I think you are absolutely right, but I think the use of Optional breaks the serialization contract...","body":"From the usage/ client perspective I think you are absolutely right, but I think the use of Optional breaks the serialization contract..."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1594982341,"post_id":62945049,"comment_id":111324005,"body_markdown":"Yes, it does break Serialisation, but I don&#39;t think that&#39;s often a requirement today. Most &#39;serialisation&#39; is to JSON, which con just omit empty optionals","body":"Yes, it does break Serialisation, but I don&#39;t think that&#39;s often a requirement today. Most &#39;serialisation&#39; is to JSON, which con just omit empty optionals"},{"owner":{"account_id":112963,"reputation":28051,"user_id":297776,"accept_rate":94,"display_name":"soc"},"score":0,"creation_date":1646153006,"post_id":62945049,"comment_id":126050847,"body_markdown":"At my place, we mandated the use of `Optional` in `record`s and it was the right choice from a reliability, readability and maintenance perspective.","body":"At my place, we mandated the use of <code>Optional</code> in <code>record</code>s and it was the right choice from a reliability, readability and maintenance perspective."}],"answers":[{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1661003353,"creation_date":1594970318,"answer_id":62949014,"question_id":62945049,"body_markdown":"A `record` comprises attributes that primarily define its state. The derivation of the accessors, constructors, etc. is completely based on this state of the records.\r\n\r\nNow in your example, the state of the attribute `value` is `null`, hence the access using the default implementation ends up providing the true state. To provide customized access to this attribute you are instead looking for an overridden API that wraps the actual state and further provides an `Optional` return type.\r\n\r\nOf course, as you mentioned one of the ways to deal with it would be to have a custom implementation included in the record definition itself\r\n\r\n    record MyClass(String id, String value) {\r\n        \r\n        Optional&lt;String&gt; getValue() {\r\n            return Optional.ofNullable(value());\r\n        }\r\n    }\r\n\r\n\r\nAlternatively, you could decouple the read and write APIs from the data carrier in a separate class and pass on the record instance to them for custom accesses.\r\n\r\n\r\nThe most relevant quote from [JEP 384: Records](https://openjdk.java.net/jeps/384) that I found would be(formatting mine):\r\n\r\n&gt; A record declares its state -- the group of variables -- and commits\r\n&gt; to an API that matches that state. This means that *records give up a\r\n&gt; freedom that classes usually enjoy -- the ability to decouple a\r\n&gt; class&#39;s API from its internal representation* -- but in return, records\r\n&gt; become significantly more concise.","title":"Java records with nullable components","body":"<p>A <code>record</code> comprises attributes that primarily define its state. The derivation of the accessors, constructors, etc. is completely based on this state of the records.</p>\n<p>Now in your example, the state of the attribute <code>value</code> is <code>null</code>, hence the access using the default implementation ends up providing the true state. To provide customized access to this attribute you are instead looking for an overridden API that wraps the actual state and further provides an <code>Optional</code> return type.</p>\n<p>Of course, as you mentioned one of the ways to deal with it would be to have a custom implementation included in the record definition itself</p>\n<pre><code>record MyClass(String id, String value) {\n    \n    Optional&lt;String&gt; getValue() {\n        return Optional.ofNullable(value());\n    }\n}\n</code></pre>\n<p>Alternatively, you could decouple the read and write APIs from the data carrier in a separate class and pass on the record instance to them for custom accesses.</p>\n<p>The most relevant quote from <a href=\"https://openjdk.java.net/jeps/384\" rel=\"noreferrer\">JEP 384: Records</a> that I found would be(formatting mine):</p>\n<blockquote>\n<p>A record declares its state -- the group of variables -- and commits\nto an API that matches that state. This means that <em>records give up a\nfreedom that classes usually enjoy -- the ability to decouple a\nclass's API from its internal representation</em> -- but in return, records\nbecome significantly more concise.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":246034,"reputation":900,"user_id":519910,"accept_rate":87,"display_name":"Leikingo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595026761,"creation_date":1595026761,"answer_id":62962790,"question_id":62945049,"body_markdown":"Credits go to [Holger](https://stackoverflow.com/users/2711488/holger)! I really like his proposed way of questioning the actual need of `null`. Thus with a short example, I wanted to give his approach a bit more space, even if a bit convoluted for this use-case.  \r\n\r\n```\r\ninterface ConversionResult&lt;T&gt; {\r\n    String raw();\r\n\r\n    default Optional&lt;T&gt; value(){\r\n        return Optional.empty();\r\n    }\r\n\r\n    default Optional&lt;String&gt; error(){\r\n        return Optional.empty();\r\n    }\r\n\r\n    default void ifOk(Consumer&lt;T&gt; okAction) {\r\n        value().ifPresent(okAction);\r\n    }\r\n\r\n    default void okOrError(Consumer&lt;T&gt; okAction, Consumer&lt;String&gt; errorAction){\r\n        value().ifPresent(okAction);\r\n        error().ifPresent(errorAction);\r\n    }\r\n\r\n    static ConversionResult&lt;LocalDate&gt; ofDate(String raw, String pattern){\r\n        try {\r\n            var value = LocalDate.parse(raw, DateTimeFormatter.ofPattern(pattern));\r\n            return new Ok&lt;&gt;(raw, value);  \r\n        } catch (Exception e){\r\n            var error = String.format(&quot;Invalid date value &#39;%s&#39;. Expected pattern &#39;%s&#39;.&quot;, raw, pattern);\r\n            return new Error&lt;&gt;(raw, error);\r\n        }\r\n    }\r\n\r\n    // more conversion operations\r\n\r\n}\r\n\r\nrecord Ok&lt;T&gt;(String raw, T actualValue) implements ConversionResult&lt;T&gt; {\r\n    public Optional&lt;T&gt; value(){\r\n        return Optional.of(actualValue);\r\n    }\r\n}\r\n\r\nrecord Error&lt;T&gt;(String raw, String actualError) implements ConversionResult&lt;T&gt; {\r\n    public Optional&lt;String&gt; error(){\r\n        return Optional.of(actualError);\r\n    }\r\n}\r\n```\r\n\r\nUsage would be something like\r\n\r\n```\r\nvar okConv = ConversionResult.ofDate(&quot;12.03.2020&quot;, &quot;dd.MM.yyyy&quot;);\r\nokConv.okOrError(\r\n    v -&gt; System.out.println(&quot;SUCCESS: &quot;+v), \r\n    e -&gt; System.err.println(&quot;FAILURE: &quot;+e)\r\n);\r\nSystem.out.println(okConv);\r\n\r\n\r\nSystem.out.println();\r\nvar failedConv = ConversionResult.ofDate(&quot;12.03.2020&quot;, &quot;yyyy-MM-dd&quot;);\r\nfailedConv.okOrError(\r\n    v -&gt; System.out.println(&quot;SUCCESS: &quot;+v), \r\n    e -&gt; System.err.println(&quot;FAILURE: &quot;+e)\r\n);\r\nSystem.out.println(failedConv);\r\n```\r\n\r\nwhich leads to the following output...\r\n\r\n```\r\nSUCCESS: 2020-03-12\r\nOk[raw=12.03.2020, actualValue=2020-03-12]\r\n\r\nFAILURE: Invalid date value &#39;12.03.2020&#39;. Expected pattern &#39;yyyy-MM-dd&#39;.\r\nError[raw=12.03.2020, actualError=Invalid date value &#39;12.03.2020&#39;. Expected pattern &#39;yyyy-MM-dd&#39;.]\r\n```\r\n\r\nThe only minor issue is that the `toString` prints now the `actual...` variants. And of course we do not NEED to use records for this.","title":"Java records with nullable components","body":"<p>Credits go to <a href=\"https://stackoverflow.com/users/2711488/holger\">Holger</a>! I really like his proposed way of questioning the actual need of <code>null</code>. Thus with a short example, I wanted to give his approach a bit more space, even if a bit convoluted for this use-case.</p>\n<pre><code>interface ConversionResult&lt;T&gt; {\n    String raw();\n\n    default Optional&lt;T&gt; value(){\n        return Optional.empty();\n    }\n\n    default Optional&lt;String&gt; error(){\n        return Optional.empty();\n    }\n\n    default void ifOk(Consumer&lt;T&gt; okAction) {\n        value().ifPresent(okAction);\n    }\n\n    default void okOrError(Consumer&lt;T&gt; okAction, Consumer&lt;String&gt; errorAction){\n        value().ifPresent(okAction);\n        error().ifPresent(errorAction);\n    }\n\n    static ConversionResult&lt;LocalDate&gt; ofDate(String raw, String pattern){\n        try {\n            var value = LocalDate.parse(raw, DateTimeFormatter.ofPattern(pattern));\n            return new Ok&lt;&gt;(raw, value);  \n        } catch (Exception e){\n            var error = String.format(&quot;Invalid date value '%s'. Expected pattern '%s'.&quot;, raw, pattern);\n            return new Error&lt;&gt;(raw, error);\n        }\n    }\n\n    // more conversion operations\n\n}\n\nrecord Ok&lt;T&gt;(String raw, T actualValue) implements ConversionResult&lt;T&gt; {\n    public Optional&lt;T&gt; value(){\n        return Optional.of(actualValue);\n    }\n}\n\nrecord Error&lt;T&gt;(String raw, String actualError) implements ConversionResult&lt;T&gt; {\n    public Optional&lt;String&gt; error(){\n        return Optional.of(actualError);\n    }\n}\n</code></pre>\n<p>Usage would be something like</p>\n<pre><code>var okConv = ConversionResult.ofDate(&quot;12.03.2020&quot;, &quot;dd.MM.yyyy&quot;);\nokConv.okOrError(\n    v -&gt; System.out.println(&quot;SUCCESS: &quot;+v), \n    e -&gt; System.err.println(&quot;FAILURE: &quot;+e)\n);\nSystem.out.println(okConv);\n\n\nSystem.out.println();\nvar failedConv = ConversionResult.ofDate(&quot;12.03.2020&quot;, &quot;yyyy-MM-dd&quot;);\nfailedConv.okOrError(\n    v -&gt; System.out.println(&quot;SUCCESS: &quot;+v), \n    e -&gt; System.err.println(&quot;FAILURE: &quot;+e)\n);\nSystem.out.println(failedConv);\n</code></pre>\n<p>which leads to the following output...</p>\n<pre><code>SUCCESS: 2020-03-12\nOk[raw=12.03.2020, actualValue=2020-03-12]\n\nFAILURE: Invalid date value '12.03.2020'. Expected pattern 'yyyy-MM-dd'.\nError[raw=12.03.2020, actualError=Invalid date value '12.03.2020'. Expected pattern 'yyyy-MM-dd'.]\n</code></pre>\n<p>The only minor issue is that the <code>toString</code> prints now the <code>actual...</code> variants. And of course we do not NEED to use records for this.</p>\n"},{"tags":[],"owner":{"account_id":19390118,"reputation":42,"user_id":14178986,"display_name":"akfp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598562283,"creation_date":1598562283,"answer_id":63624156,"question_id":62945049,"body_markdown":"Don&#39;t have the rep to comment, but I just wanted to point out that you&#39;ve essentially reinvented the Either datatype. https://hackage.haskell.org/package/base-4.14.0.0/docs/Data-Either.html or https://www.scala-lang.org/api/2.9.3/scala/Either.html. I find Try, Either, and Validation to be incredibly useful for parsing and there are a few java libraries with this functionality that I use: https://github.com/aol/cyclops/tree/master/cyclops and https://www.vavr.io/vavr-docs/#_either.\r\n\r\nUnfortunately, I think your main question is still open (and I&#39;d be interested in finding an answer).\r\n\r\ndoing something like\r\n``` \r\nRecordA(String a)\r\nRecordAandB(String a, Integer b)\r\n```\r\nto deal with an immutable data carrier with a null b seems bad, but wrapping recordA(String a, Integer b) to have an Optional&lt;Integer&gt; getB somewhere else seems contra-productive. There&#39;s almost no point to the record class then and I think the lombok @Value is still the best answer. I&#39;m just concerned that it won&#39;t play well with deconstruction for pattern matching.","title":"Java records with nullable components","body":"<p>Don't have the rep to comment, but I just wanted to point out that you've essentially reinvented the Either datatype. <a href=\"https://hackage.haskell.org/package/base-4.14.0.0/docs/Data-Either.html\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/base-4.14.0.0/docs/Data-Either.html</a> or <a href=\"https://www.scala-lang.org/api/2.9.3/scala/Either.html\" rel=\"nofollow noreferrer\">https://www.scala-lang.org/api/2.9.3/scala/Either.html</a>. I find Try, Either, and Validation to be incredibly useful for parsing and there are a few java libraries with this functionality that I use: <a href=\"https://github.com/aol/cyclops/tree/master/cyclops\" rel=\"nofollow noreferrer\">https://github.com/aol/cyclops/tree/master/cyclops</a> and <a href=\"https://www.vavr.io/vavr-docs/#_either\" rel=\"nofollow noreferrer\">https://www.vavr.io/vavr-docs/#_either</a>.</p>\n<p>Unfortunately, I think your main question is still open (and I'd be interested in finding an answer).</p>\n<p>doing something like</p>\n<pre><code>RecordA(String a)\nRecordAandB(String a, Integer b)\n</code></pre>\n<p>to deal with an immutable data carrier with a null b seems bad, but wrapping recordA(String a, Integer b) to have an Optional getB somewhere else seems contra-productive. There's almost no point to the record class then and I think the lombok @Value is still the best answer. I'm just concerned that it won't play well with deconstruction for pattern matching.</p>\n"},{"tags":[],"owner":{"account_id":300561,"reputation":6020,"user_id":607767,"accept_rate":89,"display_name":"Lovro Pandžić"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1627454112,"creation_date":1627454112,"answer_id":68555495,"question_id":62945049,"body_markdown":"Due to restrictions placed on records, namely that canonical constructor type needs to match accessor type, a pragmatic way to use `Optional` with records would be to define it as a property type:\r\n\r\n```java\r\nrecord MyRecord (String id, Optional&lt;String&gt; value){\r\n}\r\n```\r\n\r\nA point has been made that this is problematic due to the fact that null might be passed as a value to the constructor. This can be solved by forbidding such `MyRecord` invariants through canonical constructor:\r\n```java\r\nrecord MyRecord(String id, Optional&lt;String&gt; value) {\r\n\r\n    MyRecord(String id, Optional&lt;String&gt; value) {\r\n        this.id = id;\r\n        this.value = Objects.requireNonNull(value);\r\n    }\r\n}\r\n```\r\n\r\nIn practice most common libraries or frameworks (e.g. Jackson, Spring) have support for recognizing Optional type and translating null into `Optional.empty()` automatically so whether this is an issue that needs to be tackled in your particular instance depends on context. I recommend researching support for Optional in your codebase before cluttering your code possibly unnecessary.","title":"Java records with nullable components","body":"<p>Due to restrictions placed on records, namely that canonical constructor type needs to match accessor type, a pragmatic way to use <code>Optional</code> with records would be to define it as a property type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record MyRecord (String id, Optional&lt;String&gt; value){\n}\n</code></pre>\n<p>A point has been made that this is problematic due to the fact that null might be passed as a value to the constructor. This can be solved by forbidding such <code>MyRecord</code> invariants through canonical constructor:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record MyRecord(String id, Optional&lt;String&gt; value) {\n\n    MyRecord(String id, Optional&lt;String&gt; value) {\n        this.id = id;\n        this.value = Objects.requireNonNull(value);\n    }\n}\n</code></pre>\n<p>In practice most common libraries or frameworks (e.g. Jackson, Spring) have support for recognizing Optional type and translating null into <code>Optional.empty()</code> automatically so whether this is an issue that needs to be tackled in your particular instance depends on context. I recommend researching support for Optional in your codebase before cluttering your code possibly unnecessary.</p>\n"}],"owner":{"account_id":246034,"reputation":900,"user_id":519910,"accept_rate":87,"display_name":"Leikingo"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20260,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":62949014,"answer_count":4,"score":19,"last_activity_date":1661003353,"creation_date":1594942798,"question_id":62945049,"body_markdown":"I really like the addition of records in Java 14, at least as a preview feature, as it helps to reduce my need to use lombok for simple, immutable &quot;data holders&quot;. But I&#39;m having an issue with the implementation of nullable components. I&#39;m trying to avoid returning `null` in my codebase to indicate that a value might not be present. Therefore I currently often use something like the following pattern with lombok.\r\n\r\n```\r\n@Value\r\npublic class MyClass {\r\n String id;\r\n @Nullable String value;\r\n\r\n Optional&lt;String&gt; getValue() { // overwrite the generated getter\r\n  return Optional.ofNullable(this.value);\r\n }\r\n}\r\n```\r\n\r\nWhen I try the same pattern now with records, this is not allowed stating `incorrect component accessor return type`.\r\n\r\n```\r\nrecord MyRecord (String id, @Nullable String value){\r\n Optional&lt;String&gt; value(){\r\n  return Optional.ofNullable(this.value); \r\n }\r\n}\r\n``` \r\n\r\nSince I thought the usage of `Optional`s as return types is now preferred, I&#39;m really wondering why this restriction is in place. Is my understanding of the usage wrong? How can I achieve the same, without adding another accessor with another signature which does not hide the default one? Should `Optional` not be used in this case at all?","title":"Java records with nullable components","body":"<p>I really like the addition of records in Java 14, at least as a preview feature, as it helps to reduce my need to use lombok for simple, immutable &quot;data holders&quot;. But I'm having an issue with the implementation of nullable components. I'm trying to avoid returning <code>null</code> in my codebase to indicate that a value might not be present. Therefore I currently often use something like the following pattern with lombok.</p>\n<pre><code>@Value\npublic class MyClass {\n String id;\n @Nullable String value;\n\n Optional&lt;String&gt; getValue() { // overwrite the generated getter\n  return Optional.ofNullable(this.value);\n }\n}\n</code></pre>\n<p>When I try the same pattern now with records, this is not allowed stating <code>incorrect component accessor return type</code>.</p>\n<pre><code>record MyRecord (String id, @Nullable String value){\n Optional&lt;String&gt; value(){\n  return Optional.ofNullable(this.value); \n }\n}\n</code></pre>\n<p>Since I thought the usage of <code>Optional</code>s as return types is now preferred, I'm really wondering why this restriction is in place. Is my understanding of the usage wrong? How can I achieve the same, without adding another accessor with another signature which does not hide the default one? Should <code>Optional</code> not be used in this case at all?</p>\n"},{"tags":["java","multithreading","java-stream","completable-future","spring-async"],"answers":[{"tags":[],"owner":{"account_id":26114945,"reputation":26,"user_id":19808242,"display_name":"Mando"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661002983,"creation_date":1661002983,"answer_id":73427184,"question_id":73341693,"body_markdown":"Async - This will make the processing asynchronous and make it work independently.\r\n\r\nJava 8 parallelStream - creates subsequent threads based on the input data and processes it simultaneously.\r\n\r\nIn your case, the data will be processed by independently in multiple threads.","title":"Difference between Spring Async, Async with CompletableFuture and Java8 parallel stream","body":"<p>Async - This will make the processing asynchronous and make it work independently.</p>\n<p>Java 8 parallelStream - creates subsequent threads based on the input data and processes it simultaneously.</p>\n<p>In your case, the data will be processed by independently in multiple threads.</p>\n"}],"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661002983,"creation_date":1660366326,"question_id":73341693,"body_markdown":"I am working on list to validate list data and then map it to Db Entity using MapStruct and finally save list in multiple table as batch process - parent and child table using Spring data JPA. I am using parallel stream to achieve to complete this process. Also I need result of persisted data in response where all final data I am exporting to one file to upload.\r\n\r\n***Which one suite best in my case and why?***\r\n\r\n    List&lt;Data&gt; data; //10K records\r\n    \r\n    converting into list of list with 1K records\r\n    List&lt;List&lt;Data&gt;&gt; datalist; //1K records in each list\r\n    \r\n    datalist.parrallelStream.foreach( data-&gt; \r\n    {\r\n        validate(data);\r\n        List&lt;Entity&gt; list = mapToEntity(data);\r\n        EntityRepo.saveAll(list); //batch_size = 1000; oracle db\r\n    }\r\n    ) \r\n    \r\n    class Entity {\r\n    @Id\r\n    String id; // generating Id manually in my code using UUID. \r\n    }","title":"Difference between Spring Async, Async with CompletableFuture and Java8 parallel stream","body":"<p>I am working on list to validate list data and then map it to Db Entity using MapStruct and finally save list in multiple table as batch process - parent and child table using Spring data JPA. I am using parallel stream to achieve to complete this process. Also I need result of persisted data in response where all final data I am exporting to one file to upload.</p>\n<p><em><strong>Which one suite best in my case and why?</strong></em></p>\n<pre><code>List&lt;Data&gt; data; //10K records\n\nconverting into list of list with 1K records\nList&lt;List&lt;Data&gt;&gt; datalist; //1K records in each list\n\ndatalist.parrallelStream.foreach( data-&gt; \n{\n    validate(data);\n    List&lt;Entity&gt; list = mapToEntity(data);\n    EntityRepo.saveAll(list); //batch_size = 1000; oracle db\n}\n) \n\nclass Entity {\n@Id\nString id; // generating Id manually in my code using UUID. \n}\n</code></pre>\n"},{"tags":["java","design-patterns","enums"],"answers":[{"tags":[],"owner":{"account_id":1455702,"reputation":15672,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660944021,"creation_date":1660944021,"answer_id":73422356,"question_id":73418511,"body_markdown":"The first example is just a lookup. You could achieve the same with a `Map&lt;Integer, Type&gt;`. Occasionally this makes sense as a deserialization pattern, but more often it raises the question of why a client is passing [primitives](https://refactoring.guru/smells/primitive-obsession) to get polymorphic behavior.\r\n\r\nIn the second example, it is redundant to return a Type from an enum instance, because an enum instance already _is_ a Type. In Java, the enum can do all of things the Type could do, so just move the Type-specific methods into the respective enum instance. You don&#39;t need to create a [parallel hierarchy](https://refactoring.guru/smells/parallel-inheritance-hierarchies).\r\n\r\nIn short, neither of these examples are good solutions.","title":"Java Enum - what&#39;s the difference between enum has override logic and enum abstract factory and each class has override logic?","body":"<p>The first example is just a lookup. You could achieve the same with a <code>Map&lt;Integer, Type&gt;</code>. Occasionally this makes sense as a deserialization pattern, but more often it raises the question of why a client is passing <a href=\"https://refactoring.guru/smells/primitive-obsession\" rel=\"nofollow noreferrer\">primitives</a> to get polymorphic behavior.</p>\n<p>In the second example, it is redundant to return a Type from an enum instance, because an enum instance already <em>is</em> a Type. In Java, the enum can do all of things the Type could do, so just move the Type-specific methods into the respective enum instance. You don't need to create a <a href=\"https://refactoring.guru/smells/parallel-inheritance-hierarchies\" rel=\"nofollow noreferrer\">parallel hierarchy</a>.</p>\n<p>In short, neither of these examples are good solutions.</p>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661002868,"creation_date":1661002868,"answer_id":73427171,"question_id":73418511,"body_markdown":"I find it hard to follow why you&#39;d use either form in the manner you&#39;ve stated for use as &quot;abstract factory&quot; - it would help if you edit the question with more details as the code you have suggests it is determining some &quot;isSkip()&quot; capability of a type. \r\n\r\nThe first form is not a very readable way to declare an enum: The `@Override isSkip()` causes an unnecessary new anonymous class, and you can&#39;t derive classes from the enum so the `abstract public boolean isSkip()` declaration is pointless. \r\n\r\nAs an alternative I&#39;d suggest a concise definition which sets up `isSkip` capability as constructor parameter, or with a map of enums, or with method `isSkip()` as below:\r\n\r\n    enum Type {\r\n        TYPE_A, TYPE_B, TYPE_C; // etc\r\n        public boolean isSkip() {\r\n            return this == TYPE_A;\r\n        };\r\n    }\r\n\r\nThis way you can reference with `Type.XYZ.isSkip()`. You can also use the `IType` interface on the enum as below if there are other classes you need to share this `isSkip` capability:\r\n\r\n    enum Type  implements IType {\r\n    ...\r\n    }\r\n","title":"Java Enum - what&#39;s the difference between enum has override logic and enum abstract factory and each class has override logic?","body":"<p>I find it hard to follow why you'd use either form in the manner you've stated for use as &quot;abstract factory&quot; - it would help if you edit the question with more details as the code you have suggests it is determining some &quot;isSkip()&quot; capability of a type.</p>\n<p>The first form is not a very readable way to declare an enum: The <code>@Override isSkip()</code> causes an unnecessary new anonymous class, and you can't derive classes from the enum so the <code>abstract public boolean isSkip()</code> declaration is pointless.</p>\n<p>As an alternative I'd suggest a concise definition which sets up <code>isSkip</code> capability as constructor parameter, or with a map of enums, or with method <code>isSkip()</code> as below:</p>\n<pre><code>enum Type {\n    TYPE_A, TYPE_B, TYPE_C; // etc\n    public boolean isSkip() {\n        return this == TYPE_A;\n    };\n}\n</code></pre>\n<p>This way you can reference with <code>Type.XYZ.isSkip()</code>. You can also use the <code>IType</code> interface on the enum as below if there are other classes you need to share this <code>isSkip</code> capability:</p>\n<pre><code>enum Type  implements IType {\n...\n}\n</code></pre>\n"}],"owner":{"account_id":12565200,"reputation":17,"user_id":9141436,"display_name":"shfshfdl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1661002868,"creation_date":1660920246,"question_id":73418511,"body_markdown":"I&#39;m trying to use enum more effeciently.\r\n\r\nFirst question is If I use like below, Is it some kind of strategy pattern?\r\nCaller side call like Type.get(0).isSkip()\r\n\r\n    public enum Type {\r\n        TYPE_A(0) {\r\n            @Override\r\n            public boolean isSkip() {\r\n                return true;\r\n            }\r\n\r\n        abstract public boolean isSkip();\r\n\r\nCaller side call like \r\n\r\n    Type.get(0).isSkip()\r\n\r\n\r\nAnd second question is recently I found enum abstract factory pattern like\r\n\r\n    interface IType {\r\n        public boolean isSkip();\r\n    }\r\n    \r\n    public class Type {\r\n        class Type_A implements IType {\r\n            public Type_A() {}\r\n            @Override public boolean isSkip() {\r\n            }\r\n        }\r\n    }\r\n\r\nand Enum class just do factory things like\r\n\r\n    interface IFactory\r\n    {\r\n        public IType get();\r\n    };\r\n\r\n    public enum EnumAbstractFactory implements IFactory{\r\n        A {\r\n            public IType get() {\r\n                return new Type_A();\r\n            }\r\n        }\r\n\r\nWhat&#39;s the advantage of abstract factory method better then just Enum class has logic?\r\nWhich one is better solution?\r\n\r\n","title":"Java Enum - what&#39;s the difference between enum has override logic and enum abstract factory and each class has override logic?","body":"<p>I'm trying to use enum more effeciently.</p>\n<p>First question is If I use like below, Is it some kind of strategy pattern?\nCaller side call like Type.get(0).isSkip()</p>\n<pre><code>public enum Type {\n    TYPE_A(0) {\n        @Override\n        public boolean isSkip() {\n            return true;\n        }\n\n    abstract public boolean isSkip();\n</code></pre>\n<p>Caller side call like</p>\n<pre><code>Type.get(0).isSkip()\n</code></pre>\n<p>And second question is recently I found enum abstract factory pattern like</p>\n<pre><code>interface IType {\n    public boolean isSkip();\n}\n\npublic class Type {\n    class Type_A implements IType {\n        public Type_A() {}\n        @Override public boolean isSkip() {\n        }\n    }\n}\n</code></pre>\n<p>and Enum class just do factory things like</p>\n<pre><code>interface IFactory\n{\n    public IType get();\n};\n\npublic enum EnumAbstractFactory implements IFactory{\n    A {\n        public IType get() {\n            return new Type_A();\n        }\n    }\n</code></pre>\n<p>What's the advantage of abstract factory method better then just Enum class has logic?\nWhich one is better solution?</p>\n"},{"tags":["java","java-stream","spring-async"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1660454350,"post_id":73349280,"comment_id":129534395,"body_markdown":"I don&#39;t see a question.","body":"I don&#39;t see a question."},{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1660550254,"post_id":73349280,"comment_id":129550553,"body_markdown":"My question is : Can I use Spring Async and Java8 parallel stream together in one call? How thread allocation will work here.","body":"My question is : Can I use Spring Async and Java8 parallel stream together in one call? How thread allocation will work here."}],"answers":[{"tags":[],"owner":{"account_id":26114945,"reputation":26,"user_id":19808242,"display_name":"Mando"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661002450,"creation_date":1661000253,"answer_id":73426891,"question_id":73349280,"body_markdown":"Nope, it won&#39;t work as you are expecting.\r\n\r\nbecause of,  **files.foreach(file-&gt;processFile(file));**\r\n\r\ngood option would be\r\n```java\r\n// 10 - Number of threads\r\n\r\nExecutorService executorService = Executors.newFixedThreadPool(10);\r\n\r\nfiles.foreach(file -&gt; executorService.execute(() -&gt; processFile(file)));\r\n```\r\n\r\nThings to note, inside process method you are using parallelStream, that will subsequently create more threads based on the size of data.\r\n\r\nA good practice would be, partition your data before processing.","title":"Can I use Spring Async and Java8 parallel stream together","body":"<p>Nope, it won't work as you are expecting.</p>\n<p>because of,  <strong>files.foreach(file-&gt;processFile(file));</strong></p>\n<p>good option would be</p>\n<pre class=\"lang-java prettyprint-override\"><code>// 10 - Number of threads\n\nExecutorService executorService = Executors.newFixedThreadPool(10);\n\nfiles.foreach(file -&gt; executorService.execute(() -&gt; processFile(file)));\n</code></pre>\n<p>Things to note, inside process method you are using parallelStream, that will subsequently create more threads based on the size of data.</p>\n<p>A good practice would be, partition your data before processing.</p>\n"}],"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":297,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73426891,"answer_count":1,"score":0,"last_activity_date":1661002450,"creation_date":1660454300,"question_id":73349280,"body_markdown":"Basically, Using one Scheduler I want to process multiple csv file at same time. \r\nFile can have 1 to 10K records in it. I want to process each file parallelly and also if  records&gt;1K, I want to process that file&#39;s records parallelly. \r\n\r\nLet&#39;s say 1OK records with 10 different thread.  \r\n\r\nMy task is to read one DB tables from where I have FTP file path URL. and process those csv files, validate csv data and ultimately save into DB table.\r\n\r\n    List&lt;CSVFileRecords&gt; files = filesRepo.findAll();\r\n    \r\n    files.foreach(file-&gt;processFile(file));\r\n    \r\n    @Async\r\n    void processFile(file) {\r\n      InputStream i = getStream(file); //download file\r\n      List&lt;Data&gt; data = csvParser.csvToBean(i); //consider 10K records\r\n    \r\n      List&lt;List&lt;Data&gt;&gt; dataList = getListOfList(data);\r\n        \r\n      dataList.parallelStream().foreach(data-&gt; processData(data));\r\n    \r\n    }\r\n    \r\n    List&lt;Response&gt; processData(data) {\r\n        validate();\r\n        saveAll();\r\n     }\r\n\r\n","title":"Can I use Spring Async and Java8 parallel stream together","body":"<p>Basically, Using one Scheduler I want to process multiple csv file at same time.\nFile can have 1 to 10K records in it. I want to process each file parallelly and also if  records&gt;1K, I want to process that file's records parallelly.</p>\n<p>Let's say 1OK records with 10 different thread.</p>\n<p>My task is to read one DB tables from where I have FTP file path URL. and process those csv files, validate csv data and ultimately save into DB table.</p>\n<pre><code>List&lt;CSVFileRecords&gt; files = filesRepo.findAll();\n\nfiles.foreach(file-&gt;processFile(file));\n\n@Async\nvoid processFile(file) {\n  InputStream i = getStream(file); //download file\n  List&lt;Data&gt; data = csvParser.csvToBean(i); //consider 10K records\n\n  List&lt;List&lt;Data&gt;&gt; dataList = getListOfList(data);\n    \n  dataList.parallelStream().foreach(data-&gt; processData(data));\n\n}\n\nList&lt;Response&gt; processData(data) {\n    validate();\n    saveAll();\n }\n</code></pre>\n"},{"tags":["java","postgresql","jdbc","spring-data-jpa","full-text-search"],"comments":[{"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"score":0,"creation_date":1661009444,"post_id":73427117,"comment_id":129671156,"body_markdown":"If you are using to_tsquery directly, then is is expected that you know what you are doing.  If you make an error, then you get an error.  There are more robust variants (names ending in &#39;to_tsquery&#39;) more suitable for casual users.","body":"If you are using to_tsquery directly, then is is expected that you know what you are doing.  If you make an error, then you get an error.  There are more robust variants (names ending in &#39;to_tsquery&#39;) more suitable for casual users."},{"owner":{"account_id":20045925,"reputation":75,"user_id":14944208,"display_name":"SnejOK"},"score":0,"creation_date":1661019529,"post_id":73427117,"comment_id":129673308,"body_markdown":"@jjanes Thanks for the comment. I&#39;ve looked at other to_tsquery alternatives like (websearch_to_tsquery or plainto_tsquery) but they don&#39;t seem to have the ```:* ```operator I need.","body":"@jjanes Thanks for the comment. I&#39;ve looked at other to_tsquery alternatives like (websearch_to_tsquery or plainto_tsquery) but they don&#39;t seem to have the <code>:* </code>operator I need."}],"owner":{"account_id":20045925,"reputation":75,"user_id":14944208,"display_name":"SnejOK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661002382,"creation_date":1661002382,"question_id":73427117,"body_markdown":"I want to implement a full-text search using postgres where users can find news by title.\r\n\r\nNow I have it implemented like this:\r\n\r\n    @Query(value = &quot;SELECT * &quot; +\r\n                &quot;FROM content, &quot; +\r\n                &quot;to_tsquery(concat(regexp_replace(trim(:search), &#39;\\\\W+&#39;, &#39;:* &amp; &#39;), &#39;:*&#39;)) as q &quot; +\r\n                &quot;WHERE make_tsvector(title, title_original, title_other, title_jp) @@ q &quot; +\r\n                &quot;ORDER BY ts_rank(make_tsvector(title, title_original, title_other, title_jp), q) DESC&quot;, nativeQuery = true)\r\n        Page&lt;Content&gt; searchContentByTitle(@Param(&quot;search&quot;) String search, Pageable pageable);\r\n\r\nWhere is the main problem - `to_tsquery(concat(regexp_replace(trim(:search), &#39;\\\\W+&#39;, &#39;:* &amp; &#39;), &#39;:*&#39;))`\r\nIf the user enters any special character in the search query, for example (`cats &amp;`) - this will cause an error or break the search.\r\n\r\nIs there a way to escape special characters before inserting them into a query? Is there a java tool for this? How can this be solved with postgresql?","title":"How to ignore special characters in to_tsquery search (Postgresql)","body":"<p>I want to implement a full-text search using postgres where users can find news by title.</p>\n<p>Now I have it implemented like this:</p>\n<pre><code>@Query(value = &quot;SELECT * &quot; +\n            &quot;FROM content, &quot; +\n            &quot;to_tsquery(concat(regexp_replace(trim(:search), '\\\\W+', ':* &amp; '), ':*')) as q &quot; +\n            &quot;WHERE make_tsvector(title, title_original, title_other, title_jp) @@ q &quot; +\n            &quot;ORDER BY ts_rank(make_tsvector(title, title_original, title_other, title_jp), q) DESC&quot;, nativeQuery = true)\n    Page&lt;Content&gt; searchContentByTitle(@Param(&quot;search&quot;) String search, Pageable pageable);\n</code></pre>\n<p>Where is the main problem - <code>to_tsquery(concat(regexp_replace(trim(:search), '\\\\W+', ':* &amp; '), ':*'))</code>\nIf the user enters any special character in the search query, for example (<code>cats &amp;</code>) - this will cause an error or break the search.</p>\n<p>Is there a way to escape special characters before inserting them into a query? Is there a java tool for this? How can this be solved with postgresql?</p>\n"},{"tags":["java","swing","joptionpane"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1479489781,"post_id":40681943,"comment_id":68595829,"body_markdown":"`but that&#39;s not working.` - so did you try the other suggestions in that link?","body":"<code>but that&#39;s not working.</code> - so did you try the other suggestions in that link?"}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1479489936,"creation_date":1479489936,"answer_id":40682803,"question_id":40681943,"body_markdown":"You can add a listener to the component so that the listener is invoked when the option pane is made visible and you can then request focus on the component.\r\n\r\nCheck out `RequestFocusListener` class found in [Dialog Focus](https://tips4java.wordpress.com/2010/03/14/dialog-focus/) for a reusable solution.","title":"How do I request focus on a JPasswordField inside a JOptionPane?","body":"<p>You can add a listener to the component so that the listener is invoked when the option pane is made visible and you can then request focus on the component.</p>\n\n<p>Check out <code>RequestFocusListener</code> class found in <a href=\"https://tips4java.wordpress.com/2010/03/14/dialog-focus/\" rel=\"nofollow noreferrer\">Dialog Focus</a> for a reusable solution.</p>\n"},{"tags":[],"owner":{"account_id":17629418,"reputation":111,"user_id":12793815,"display_name":"nuclear_party"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661002049,"creation_date":1661002049,"answer_id":73427097,"question_id":40681943,"body_markdown":"Provided solutions didn&#39;t work for me. Following code worked in my case:\r\n\r\n        passwordField.setFocusable(true);\r\n        passwordField.requestFocusInWindow();\r\n        passwordField.setCaretPosition(0);\r\n\r\nnote that **JFrame which contains password field has to be visible** before calling `.requestFocusInWindow()`","title":"How do I request focus on a JPasswordField inside a JOptionPane?","body":"<p>Provided solutions didn't work for me. Following code worked in my case:</p>\n<pre><code>    passwordField.setFocusable(true);\n    passwordField.requestFocusInWindow();\n    passwordField.setCaretPosition(0);\n</code></pre>\n<p>note that <strong>JFrame which contains password field has to be visible</strong> before calling <code>.requestFocusInWindow()</code></p>\n"}],"owner":{"account_id":2006064,"reputation":7616,"user_id":1795924,"accept_rate":82,"display_name":"Ericson Willians"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40682803,"answer_count":2,"score":2,"last_activity_date":1661002049,"creation_date":1479486708,"question_id":40681943,"body_markdown":"[I&#39;ve learned in this other question that it&#39;s possible by overriding the addNotify method][1], but that&#39;s not working. Here&#39;s my code:\r\n\r\n    private boolean accessPasswordFrame(String titleText, String labelText, String errorMessage, int accessType) {\r\n\t\tJPasswordField passwordField = new JPasswordField() {\r\n\t\t\tpublic void addNotify() {\r\n\t\t        super.addNotify();\r\n\t\t        requestFocus();\r\n\t\t    }\r\n\t\t};\r\n\t\tfinal JComponent[] inputs = new JComponent[] {\r\n\t\t\tnew JLabel(labelText),\r\n\t\t\tpasswordField\r\n\t\t};\r\n\t\tint result = JOptionPane.showConfirmDialog(frame, inputs, titleText, JOptionPane.OK_CANCEL_OPTION);\r\n\t\tif (result == JOptionPane.OK_OPTION) {\r\n\t\t\tString rootPass = new String(passwordField.getPassword());\r\n\t\t\tif (accessType == ADMIN_TYPE) {\r\n\t\t\t\tif (rootPass.equals(ROOT_PASSWORD)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tJOptionPane.showMessageDialog(null,\r\n\t\t\t\t\t\t\terrorMessage, &quot;Erro&quot;,\r\n\t\t\t\t\t\t\tJOptionPane.ERROR_MESSAGE);\r\n\t\t\t\t}\r\n\t\t\t} else if (accessType == USER_TYPE) {\r\n\t\t\t\tif (PasswordFrame.getPasswords() != null) {\r\n\t\t\t\t\tfor (Map.Entry&lt;String, String&gt; e : PasswordFrame.getPasswords().entrySet()) {\r\n\t\t\t\t\t\tif (rootPass.equals(e.getValue())) {\r\n\t\t\t\t\t\t\tlastUser = e.getKey();\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tJOptionPane.showMessageDialog(null,\r\n\t\t\t\t\t\t\t\t\terrorMessage, &quot;Erro&quot;,\r\n\t\t\t\t\t\t\t\t\tJOptionPane.ERROR_MESSAGE);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tJOptionPane.showMessageDialog(null,\r\n\t\t\t\t\t\t\t&quot;Usu&#225;rios cadastrados n&#227;o existem.&quot;, &quot;Erro&quot;,\r\n\t\t\t\t\t\t\tJOptionPane.ERROR_MESSAGE);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nOnce the JOptionPane appears, the default focus is on the &quot;Ok&quot; button:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAnd if I just `requestFocus()` before showing the dialog, it doesn&#39;t work as well.\r\n\r\n  [1]: https://stackoverflow.com/questions/6478394/how-to-set-focus-on-specific-jtextfield-inside-joptionpane-when-created\r\n  [2]: https://i.stack.imgur.com/EreJc.png","title":"How do I request focus on a JPasswordField inside a JOptionPane?","body":"<p><a href=\"https://stackoverflow.com/questions/6478394/how-to-set-focus-on-specific-jtextfield-inside-joptionpane-when-created\">I've learned in this other question that it's possible by overriding the addNotify method</a>, but that's not working. Here's my code:</p>\n\n<pre><code>private boolean accessPasswordFrame(String titleText, String labelText, String errorMessage, int accessType) {\n    JPasswordField passwordField = new JPasswordField() {\n        public void addNotify() {\n            super.addNotify();\n            requestFocus();\n        }\n    };\n    final JComponent[] inputs = new JComponent[] {\n        new JLabel(labelText),\n        passwordField\n    };\n    int result = JOptionPane.showConfirmDialog(frame, inputs, titleText, JOptionPane.OK_CANCEL_OPTION);\n    if (result == JOptionPane.OK_OPTION) {\n        String rootPass = new String(passwordField.getPassword());\n        if (accessType == ADMIN_TYPE) {\n            if (rootPass.equals(ROOT_PASSWORD)) {\n                return true;\n            } else {\n                JOptionPane.showMessageDialog(null,\n                        errorMessage, \"Erro\",\n                        JOptionPane.ERROR_MESSAGE);\n            }\n        } else if (accessType == USER_TYPE) {\n            if (PasswordFrame.getPasswords() != null) {\n                for (Map.Entry&lt;String, String&gt; e : PasswordFrame.getPasswords().entrySet()) {\n                    if (rootPass.equals(e.getValue())) {\n                        lastUser = e.getKey();\n                        return true;\n                    } else {\n                        JOptionPane.showMessageDialog(null,\n                                errorMessage, \"Erro\",\n                                JOptionPane.ERROR_MESSAGE);\n                    }\n                }\n            } else {\n                JOptionPane.showMessageDialog(null,\n                        \"Usuários cadastrados não existem.\", \"Erro\",\n                        JOptionPane.ERROR_MESSAGE);\n            }\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>Once the JOptionPane appears, the default focus is on the \"Ok\" button:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EreJc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EreJc.png\" alt=\"enter image description here\"></a></p>\n\n<p>And if I just <code>requestFocus()</code> before showing the dialog, it doesn't work as well.</p>\n"},{"tags":["java","spring-boot","file-upload"],"comments":[{"owner":{"account_id":3072614,"reputation":12296,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":0,"creation_date":1660749099,"post_id":73390122,"comment_id":129607124,"body_markdown":"code paste is broken. notice the syntax highlighting. please take the [tour], then [edit] your question to fix it.","body":"code paste is broken. notice the syntax highlighting. please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, then <a href=\"https://stackoverflow.com/posts/73390122/edit\">edit</a> your question to fix it."},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1660912306,"post_id":73390122,"comment_id":129651868,"body_markdown":"It is best to get your application working first - then you can focus on whether / what you might want to change if there are performance problems. It&#39;s hard to give guidance from this code sample and lack of information on the server, client, types of discs or memory limitations, method (and limitation / cost) of the upload.","body":"It is best to get your application working first - then you can focus on whether / what you might want to change if there are performance problems. It&#39;s hard to give guidance from this code sample and lack of information on the server, client, types of discs or memory limitations, method (and limitation / cost) of the upload."},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1660998661,"post_id":73390122,"comment_id":129668899,"body_markdown":"Still difficult to answer. In your case consider: Does you server have enough memory to run without saving images locally? What format does the image recognition app use? Will performance be OK if saving to files first? Does your user agreement allow you to save locally? Would the user be upset if the upload crashed near the end and they had to start from beginning, compared to resume from last successful upload?","body":"Still difficult to answer. In your case consider: Does you server have enough memory to run without saving images locally? What format does the image recognition app use? Will performance be OK if saving to files first? Does your user agreement allow you to save locally? Would the user be upset if the upload crashed near the end and they had to start from beginning, compared to resume from last successful upload?"},{"owner":{"account_id":12597518,"reputation":11,"user_id":9161509,"display_name":"claire_fontaine"},"score":0,"creation_date":1660998916,"post_id":73390122,"comment_id":129668944,"body_markdown":"I know. I am having trouble breaking the problem down because there are so many unknows but the writing and your previous comments already help me to see it clearer, so thank you!","body":"I know. I am having trouble breaking the problem down because there are so many unknows but the writing and your previous comments already help me to see it clearer, so thank you!"}],"owner":{"account_id":12597518,"reputation":11,"user_id":9161509,"display_name":"claire_fontaine"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661001624,"creation_date":1660745979,"question_id":73390122,"body_markdown":"I want to save a large amount of images on a server from mobile upload in Java for face recognition, probably like 5-10 image of 5 Mb size on average with large time gaps inbetween. I use several docker container for the java backend which run the image processing pipeline, face detection and face recognition with each have around 8 Mb RAM.\r\n\r\nThe user is expected to label the uploaded images right away after the upload, in case the face identification did not work. Thus, every uploaded image should run as fast as possible through the image processing pipeline.\r\n\r\nFirst, consider the frontend upload view with thymeleaf where the image are uploaded as JPEG and PNG mainly\r\n```\r\n&lt;body&gt;\r\n    &lt;form style=&quot;&quot;&gt;\r\n      &lt;input type=&quot;file&quot; id=&quot;files&quot; multiple method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; th:action=&quot;@{/uploadImage}&quot;/&gt;&lt;br/&gt;\r\n      &lt;output id=&quot;selectedFiles&quot;&gt;&lt;/output&gt;\r\n      &lt;input id=&quot;uploadButton&quot; type=&quot;button&quot; value=&quot;Upload&quot; style=&quot;&quot;/&gt;\r\n    &lt;/form&gt;  \r\n&lt;/body&gt;\r\n```\r\n\r\nSecondly, the loading of multiple images into memory with the help of a corresponding model uploadedFile for multiple Multipart files and saving them on the local file system on the server:\r\n```\r\n@RequestMapping(&quot;/saveImage&quot;)\r\n    public void saveFile(HttpServletRequest servletRequest,\r\n            @ModelAttribute UploadedFile uploadedFile,\r\n            BindingResult bindingResult, Model model) {\r\n \r\n        MultipartFile multipartFile = uploadedFile.getMultipartFile();\r\n        String fileName = multipartFile.getOriginalFilename();\r\n        try {\r\n            File file = new File(servletRequest.getServletContext().getRealPath(&quot;/&quot;), fileName);\r\n            multipartFile.transferTo(file);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\nMy first question is if it is still best practise to save the images temporally first in the local file system on the server before further processing or should the images be directly stored in the db?\r\n\r\nSecondly, would it make sense to have another docker container only for image processing, ie checking if a certain path is not empty and firing up the image processing pipeline on itself?\r\n\r\nThank you for any tip towards one or the other direction!","title":"Best practises to save many large images in Java Spring in 2022","body":"<p>I want to save a large amount of images on a server from mobile upload in Java for face recognition, probably like 5-10 image of 5 Mb size on average with large time gaps inbetween. I use several docker container for the java backend which run the image processing pipeline, face detection and face recognition with each have around 8 Mb RAM.</p>\n<p>The user is expected to label the uploaded images right away after the upload, in case the face identification did not work. Thus, every uploaded image should run as fast as possible through the image processing pipeline.</p>\n<p>First, consider the frontend upload view with thymeleaf where the image are uploaded as JPEG and PNG mainly</p>\n<pre><code>&lt;body&gt;\n    &lt;form style=&quot;&quot;&gt;\n      &lt;input type=&quot;file&quot; id=&quot;files&quot; multiple method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; th:action=&quot;@{/uploadImage}&quot;/&gt;&lt;br/&gt;\n      &lt;output id=&quot;selectedFiles&quot;&gt;&lt;/output&gt;\n      &lt;input id=&quot;uploadButton&quot; type=&quot;button&quot; value=&quot;Upload&quot; style=&quot;&quot;/&gt;\n    &lt;/form&gt;  \n&lt;/body&gt;\n</code></pre>\n<p>Secondly, the loading of multiple images into memory with the help of a corresponding model uploadedFile for multiple Multipart files and saving them on the local file system on the server:</p>\n<pre><code>@RequestMapping(&quot;/saveImage&quot;)\n    public void saveFile(HttpServletRequest servletRequest,\n            @ModelAttribute UploadedFile uploadedFile,\n            BindingResult bindingResult, Model model) {\n \n        MultipartFile multipartFile = uploadedFile.getMultipartFile();\n        String fileName = multipartFile.getOriginalFilename();\n        try {\n            File file = new File(servletRequest.getServletContext().getRealPath(&quot;/&quot;), fileName);\n            multipartFile.transferTo(file);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>My first question is if it is still best practise to save the images temporally first in the local file system on the server before further processing or should the images be directly stored in the db?</p>\n<p>Secondly, would it make sense to have another docker container only for image processing, ie checking if a certain path is not empty and firing up the image processing pipeline on itself?</p>\n<p>Thank you for any tip towards one or the other direction!</p>\n"},{"tags":["java","android","unityads"],"comments":[{"owner":{"account_id":10085326,"reputation":1624,"user_id":7454155,"accept_rate":33,"display_name":"Raj Suvariya"},"score":1,"creation_date":1586351377,"post_id":61031542,"comment_id":108096146,"body_markdown":"Check if unityAdsError has getMessage() or check the other parameter String s.","body":"Check if unityAdsError has getMessage() or check the other parameter String s."},{"owner":{"account_id":13833956,"reputation":129,"user_id":9986025,"display_name":"geggiamarti"},"score":0,"creation_date":1586376972,"post_id":61031542,"comment_id":108109909,"body_markdown":"@RajSuvariya ok, thank you. By logging s parameter it give that I was use my app id as placement id :( Do you want to answer? I will accept","body":"@RajSuvariya ok, thank you. By logging s parameter it give that I was use my app id as placement id :( Do you want to answer? I will accept"}],"answers":[{"tags":[],"owner":{"account_id":10085326,"reputation":1624,"user_id":7454155,"accept_rate":33,"display_name":"Raj Suvariya"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1586414153,"creation_date":1586414153,"answer_id":61115270,"question_id":61031542,"body_markdown":"If you check the callback closely the onUnityAdsError has 2 params, first provides the error code and the second param provides you information about what went wrong.\r\n\r\n    @Override\r\n    public void onUnityAdsError(UnityAds.UnityAdsError unityAdsError, String reason) {\r\n         onAdError(unityAdsError.toString()); //my callback for errors, here results INVALID_ARGUMENT error\r\n    }\r\n\r\nSo just check the reason and you should be able to find out what is going wrong in your integration.","title":"Unity ads returns INVALID_ARGUMENT","body":"<p>If you check the callback closely the onUnityAdsError has 2 params, first provides the error code and the second param provides you information about what went wrong.</p>\n\n<pre><code>@Override\npublic void onUnityAdsError(UnityAds.UnityAdsError unityAdsError, String reason) {\n     onAdError(unityAdsError.toString()); //my callback for errors, here results INVALID_ARGUMENT error\n}\n</code></pre>\n\n<p>So just check the reason and you should be able to find out what is going wrong in your integration.</p>\n"},{"tags":[],"owner":{"account_id":11343846,"reputation":433,"user_id":8316956,"display_name":"Humayun MHA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661001151,"creation_date":1661001151,"answer_id":73426981,"question_id":61031542,"body_markdown":"Here are some methods which you can follow to solve this INVALID_ARGUMENT problem\r\n\r\n**1.** Make sure you are implementing the right Initialization code in your app. There are 2 types of Initialization.\r\n\r\n 1. Only Unity ads Initialization\r\n 2. Mediation Initialization\r\n\r\nand both methods have their own banner, interstitial, and rewarded ad code.\r\n\r\n**2.** Make sure you enable test mode as Boolean. (i.e: private Boolean testMode = true;) (make sure to do false this before publish on store)\r\n\r\n**3.** You can add your mobile phone as a test device to get test ads on your phone forcefully. for this, you have to first copy the Ad ID of your device. For that, go to your mobile settings &gt; Google &gt; Ads &gt; This device&#39;s advertising ID. copy that ID and go to unity dashboard &gt; Monetization &gt; Testing &gt; Add Test Device. Add your device Ads ID here with any name, and now you will be able to see test ads on the device.","title":"Unity ads returns INVALID_ARGUMENT","body":"<p>Here are some methods which you can follow to solve this INVALID_ARGUMENT problem</p>\n<p><strong>1.</strong> Make sure you are implementing the right Initialization code in your app. There are 2 types of Initialization.</p>\n<ol>\n<li>Only Unity ads Initialization</li>\n<li>Mediation Initialization</li>\n</ol>\n<p>and both methods have their own banner, interstitial, and rewarded ad code.</p>\n<p><strong>2.</strong> Make sure you enable test mode as Boolean. (i.e: private Boolean testMode = true;) (make sure to do false this before publish on store)</p>\n<p><strong>3.</strong> You can add your mobile phone as a test device to get test ads on your phone forcefully. for this, you have to first copy the Ad ID of your device. For that, go to your mobile settings &gt; Google &gt; Ads &gt; This device's advertising ID. copy that ID and go to unity dashboard &gt; Monetization &gt; Testing &gt; Add Test Device. Add your device Ads ID here with any name, and now you will be able to see test ads on the device.</p>\n"}],"owner":{"account_id":13833956,"reputation":129,"user_id":9986025,"display_name":"geggiamarti"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2073,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61115270,"answer_count":2,"score":1,"last_activity_date":1661001151,"creation_date":1586019257,"question_id":61031542,"body_markdown":"I&#39;ve integrated UnityAds on my Android app (that is not published yet).\r\nI get app id and placement id from database on my server. \r\nApp id and placement id are correct, I&#39;ve copied and pasted about 30 times for be sure of it.\r\nSo, when I try to get an ad in test mode, it give me the INVALID_ARGUMENT error.\r\n[Here][1] an explaination of the error code by Unity, but as you can see it is a little generic.\r\n\r\nI have an object that simply represents an ad service (like admob, FAN, inmobi etc)\r\nIn this case the object is called advert, and here it&#39;s how I show an ad with Unity:\r\n```\r\nprotected void showUnity(){\r\n    UnityAds.initialize(this, advert.getApiKey(), true); //advert.getApiKey() returns the app id\r\n    UnityAds.addListener(new IUnityAdsListener() {\r\n        @Override\r\n        public void onUnityAdsReady(String s) {\r\n            Log.i(TAG, &quot;onUnityAdsReady &quot;+s);\r\n            if(s.equals(advert.getUnitId()) &amp;&amp; !unityReady)\r\n                UnityAds.show(ActivityAd.this, advert.getUnitId()); //advert.getUnitId() returns the placement id\r\n        }\r\n\r\n        @Override\r\n        public void onUnityAdsStart(String s) {\r\n            Log.i(TAG, &quot;onUnityAdsStart &quot;+s);\r\n            unityReady = true;\r\n        }\r\n\r\n        @Override\r\n        public void onUnityAdsFinish(String s, UnityAds.FinishState finishState) {\r\n            if (finishState.compareTo(UnityAds.FinishState.COMPLETED) == 0) {\r\n                onAdReward(); //my callback for reward\r\n            } else if (finishState.compareTo(UnityAds.FinishState.SKIPPED) == 0) {\r\n                onAdClosed(); //my callback for ad close\r\n            } else if (finishState.compareTo(UnityAds.FinishState.ERROR) == 0) {\r\n                onAdError(finishState.toString()); //my callback for errors\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onUnityAdsError(UnityAds.UnityAdsError unityAdsError, String s) {\r\n            onAdError(unityAdsError.toString()); //my callback for errors, here results INVALID_ARGUMENT error\r\n        }\r\n    });\r\n}\r\n```\r\n\r\nDoes anyone know what is wrong? Thanks in advance\r\n\r\n  [1]: https://github.com/Unity-Technologies/unity-ads-android/wiki/sdk_android_api_errors","title":"Unity ads returns INVALID_ARGUMENT","body":"<p>I've integrated UnityAds on my Android app (that is not published yet).\nI get app id and placement id from database on my server. \nApp id and placement id are correct, I've copied and pasted about 30 times for be sure of it.\nSo, when I try to get an ad in test mode, it give me the INVALID_ARGUMENT error.\n<a href=\"https://github.com/Unity-Technologies/unity-ads-android/wiki/sdk_android_api_errors\" rel=\"nofollow noreferrer\">Here</a> an explaination of the error code by Unity, but as you can see it is a little generic.</p>\n\n<p>I have an object that simply represents an ad service (like admob, FAN, inmobi etc)\nIn this case the object is called advert, and here it's how I show an ad with Unity:</p>\n\n<pre><code>protected void showUnity(){\n    UnityAds.initialize(this, advert.getApiKey(), true); //advert.getApiKey() returns the app id\n    UnityAds.addListener(new IUnityAdsListener() {\n        @Override\n        public void onUnityAdsReady(String s) {\n            Log.i(TAG, \"onUnityAdsReady \"+s);\n            if(s.equals(advert.getUnitId()) &amp;&amp; !unityReady)\n                UnityAds.show(ActivityAd.this, advert.getUnitId()); //advert.getUnitId() returns the placement id\n        }\n\n        @Override\n        public void onUnityAdsStart(String s) {\n            Log.i(TAG, \"onUnityAdsStart \"+s);\n            unityReady = true;\n        }\n\n        @Override\n        public void onUnityAdsFinish(String s, UnityAds.FinishState finishState) {\n            if (finishState.compareTo(UnityAds.FinishState.COMPLETED) == 0) {\n                onAdReward(); //my callback for reward\n            } else if (finishState.compareTo(UnityAds.FinishState.SKIPPED) == 0) {\n                onAdClosed(); //my callback for ad close\n            } else if (finishState.compareTo(UnityAds.FinishState.ERROR) == 0) {\n                onAdError(finishState.toString()); //my callback for errors\n            }\n        }\n\n        @Override\n        public void onUnityAdsError(UnityAds.UnityAdsError unityAdsError, String s) {\n            onAdError(unityAdsError.toString()); //my callback for errors, here results INVALID_ARGUMENT error\n        }\n    });\n}\n</code></pre>\n\n<p>Does anyone know what is wrong? Thanks in advance</p>\n"},{"tags":["java","loops","numbers","primes"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1660909691,"post_id":73415938,"comment_id":129650824,"body_markdown":"This is a case where you would benefit from learning and applying the [Rubber Duck Debugging](https://rubberduckdebugging.com) technique.   Seriously.   Debugging your own code is a skill that is essential for a programmer.","body":"This is a case where you would benefit from learning and applying the <a href=\"https://rubberduckdebugging.com\" rel=\"nofollow noreferrer\">Rubber Duck Debugging</a> technique.   Seriously.   Debugging your own code is a skill that is essential for a programmer."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1660917771,"post_id":73415938,"comment_id":129653944,"body_markdown":"There are many fine examples of computing prime numbers on this site.  I recommend you search for them.  And as you go thru your code, decide what a value should be based on your logic.  Then put in a print statement to see if that is true.  The best, first step toward debugging is to use print statements.","body":"There are many fine examples of computing prime numbers on this site.  I recommend you search for them.  And as you go thru your code, decide what a value should be based on your logic.  Then put in a print statement to see if that is true.  The best, first step toward debugging is to use print statements."},{"owner":{"account_id":20130908,"reputation":13,"user_id":14763248,"display_name":"Dhruva"},"score":0,"creation_date":1660998480,"post_id":73415938,"comment_id":129668876,"body_markdown":"Thank you I will definitely learn the rubber duck debugging. I tried printing the values at each stage to get to the wrong part of my code but that did not yield anything fruitful. I also searched online and understood their solutions But I wanted to implement them this way. Thank you so much for your help I will surely follow your advice.","body":"Thank you I will definitely learn the rubber duck debugging. I tried printing the values at each stage to get to the wrong part of my code but that did not yield anything fruitful. I also searched online and understood their solutions But I wanted to implement them this way. Thank you so much for your help I will surely follow your advice."}],"answers":[{"tags":[],"owner":{"account_id":7139308,"reputation":2282,"user_id":5457643,"display_name":"Turamarth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660908688,"creation_date":1660908688,"answer_id":73416115,"question_id":73415938,"body_markdown":"You have to reset your flag `fl` back to 0 at the start of every iteration of the outer loop.  \r\nAt the moment once you encounter a non-prime (i.e. 4) it will set the value to 1 and then keep it for the remaining numbers.","title":"Prime Numbers In a given range in Java","body":"<p>You have to reset your flag <code>fl</code> back to 0 at the start of every iteration of the outer loop.<br />\nAt the moment once you encounter a non-prime (i.e. 4) it will set the value to 1 and then keep it for the remaining numbers.</p>\n"},{"tags":[],"owner":{"account_id":25802749,"reputation":1420,"user_id":19544859,"display_name":"mikyll98"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661001105,"creation_date":1660909631,"answer_id":73416304,"question_id":73415938,"body_markdown":"As pointed out by [Turamarth](https://stackoverflow.com/users/5457643/turamarth), you need to reset the flag at each iteration. I also suggest you to loop until `i &lt;= n2`, otherwise you would miss the last number, and add an input check.\r\n\r\n```java\r\npublic static void main(String args[])\r\n{\r\n\tint n1;\r\n\tint n2;\r\n\tboolean flag;\r\n\t\r\n\tScanner sc = new Scanner(System.in);\r\n    System.out.print(&quot;Enter the range: &quot;);\r\n    n1 = sc.nextInt();\r\n    n2 = sc.nextInt();\r\n    sc.close();\r\n    \r\n\tif (n1 &lt; 2)\r\n\t\tn1 = 2;\r\n\tif (n2 &lt; 2)\r\n    {\r\n\t\tSystem.out.println(&quot;No prime numbers in range.&quot;);\r\n\t\treturn;\r\n\t}\r\n\t\r\n    System.out.println(&quot;Result: &quot;);\r\n    for(int i = n1; i &lt;= n2; i++)\r\n    {\r\n    \tflag = false;\r\n        for(int j = 2; j &lt; i; j++)\r\n        { \r\n            if(i % j == 0)\r\n            {\r\n                flag = true;\r\n            }\r\n        }\r\n        if(!flag)\r\n            System.out.println(i);\r\n    }\r\n}\r\n```\r\n\r\nExample with [1, 19]:\r\n```no-lang\r\nEnter the range: 1 19\r\nResult: \r\n2\r\n3\r\n5\r\n7\r\n11\r\n13\r\n17\r\n19\r\n```\r\n\r\n### Optimizations\r\nConsider that:\r\n- you could break out from the second loop when you find a divisor (`i % j == 0`), by putting a `break;` statement inside the if condition;\r\n- after 2 all prime numbers are odd, therefore when `i &gt;= 3` you can increase it by 2: `i += 2`.","title":"Prime Numbers In a given range in Java","body":"<p>As pointed out by <a href=\"https://stackoverflow.com/users/5457643/turamarth\">Turamarth</a>, you need to reset the flag at each iteration. I also suggest you to loop until <code>i &lt;= n2</code>, otherwise you would miss the last number, and add an input check.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String args[])\n{\n    int n1;\n    int n2;\n    boolean flag;\n    \n    Scanner sc = new Scanner(System.in);\n    System.out.print(&quot;Enter the range: &quot;);\n    n1 = sc.nextInt();\n    n2 = sc.nextInt();\n    sc.close();\n    \n    if (n1 &lt; 2)\n        n1 = 2;\n    if (n2 &lt; 2)\n    {\n        System.out.println(&quot;No prime numbers in range.&quot;);\n        return;\n    }\n    \n    System.out.println(&quot;Result: &quot;);\n    for(int i = n1; i &lt;= n2; i++)\n    {\n        flag = false;\n        for(int j = 2; j &lt; i; j++)\n        { \n            if(i % j == 0)\n            {\n                flag = true;\n            }\n        }\n        if(!flag)\n            System.out.println(i);\n    }\n}\n</code></pre>\n<p>Example with [1, 19]:</p>\n<pre><code>Enter the range: 1 19\nResult: \n2\n3\n5\n7\n11\n13\n17\n19\n</code></pre>\n<h3>Optimizations</h3>\n<p>Consider that:</p>\n<ul>\n<li>you could break out from the second loop when you find a divisor (<code>i % j == 0</code>), by putting a <code>break;</code> statement inside the if condition;</li>\n<li>after 2 all prime numbers are odd, therefore when <code>i &gt;= 3</code> you can increase it by 2: <code>i += 2</code>.</li>\n</ul>\n"}],"owner":{"account_id":20130908,"reputation":13,"user_id":14763248,"display_name":"Dhruva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1509,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73416304,"answer_count":2,"score":0,"last_activity_date":1661001105,"creation_date":1660907749,"question_id":73415938,"body_markdown":"I am trying to take the input from the user for a range and then finding all the prime numbers in that range. I am using the logic that any nuber that is greater than 2 and less than itself, which is not divisible by any number in this range (2 to less than itself) is a prime number.\r\n```import java.util.*;\r\npublic class Main\r\n{\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tSystem.out.print(&quot;Enter the range : &quot;);\r\n\t\tint n1=sc.nextInt();\r\n\t\tint n2=sc.nextInt();\r\n\t\tint fl=0;\r\n\t\tfor(int i=n1;i&lt;n2;i++)\r\n\t\t{\r\n\t\t    for(int j=2;j&lt;i;j++)\r\n\t\t    { \r\n\t\t        if(i % j == 0)\r\n\t\t        {\r\n\t\t            fl=1;\r\n\t\t        }\r\n\t\t    }\r\n\t\t    if(fl == 0)\r\n\t\t        System.out.println(i);\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n```\r\nThis is the output I am getting:\r\n1\r\n2\r\n3\r\n\r\n\r\nWhen the range is 1 to 20 (No more than 3).\r\nPlease help me out.","title":"Prime Numbers In a given range in Java","body":"<p>I am trying to take the input from the user for a range and then finding all the prime numbers in that range. I am using the logic that any nuber that is greater than 2 and less than itself, which is not divisible by any number in this range (2 to less than itself) is a prime number.</p>\n<pre><code>public class Main\n{\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;Enter the range : &quot;);\n        int n1=sc.nextInt();\n        int n2=sc.nextInt();\n        int fl=0;\n        for(int i=n1;i&lt;n2;i++)\n        {\n            for(int j=2;j&lt;i;j++)\n            { \n                if(i % j == 0)\n                {\n                    fl=1;\n                }\n            }\n            if(fl == 0)\n                System.out.println(i);\n        }\n        \n    }\n}\n</code></pre>\n<p>This is the output I am getting:\n1\n2\n3</p>\n<p>When the range is 1 to 20 (No more than 3).\nPlease help me out.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":8070087,"reputation":875,"user_id":6083135,"accept_rate":83,"display_name":"Daksh Agrawal"},"score":0,"creation_date":1525259926,"post_id":50133361,"comment_id":87284627,"body_markdown":"What did you try?","body":"What did you try?"},{"owner":{"account_id":6615214,"reputation":9083,"user_id":5108735,"display_name":"Jon Goodwin"},"score":1,"creation_date":1525260097,"post_id":50133361,"comment_id":87284749,"body_markdown":"It **must** have created the `.apk file` for it to **run** on the emulator !","body":"It <b>must</b> have created the <code>.apk file</code> for it to <b>run</b> on the emulator !"}],"answers":[{"tags":[],"owner":{"account_id":12239608,"reputation":125,"user_id":8933053,"display_name":"Dimitar Georgiev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660999393,"creation_date":1525262763,"answer_id":50134274,"question_id":50133361,"body_markdown":"If for some unknown reason this is true, here is a way to do this yourself in one button click.\r\n\r\n[This is the image to know where to click!][1]\r\n\r\nAnd here is the path you need to select if you do not see the image:\r\nOn the top menu part click on _Build_ --&gt; _Build(APKs)_. \r\n\r\nAfter the process finish you will be able to find the APK here:\r\n`YOUR_PROJECT_FOLDER\\app\\build\\outputs\\apk\\debug`\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cRYL3.jpg","title":"Android Studio not creating the .apk file when imported a project","body":"<p>If for some unknown reason this is true, here is a way to do this yourself in one button click.</p>\n<p><a href=\"https://i.stack.imgur.com/cRYL3.jpg\" rel=\"nofollow noreferrer\">This is the image to know where to click!</a></p>\n<p>And here is the path you need to select if you do not see the image:\nOn the top menu part click on <em>Build</em> --&gt; <em>Build(APKs)</em>.</p>\n<p>After the process finish you will be able to find the APK here:\n<code>YOUR_PROJECT_FOLDER\\app\\build\\outputs\\apk\\debug</code></p>\n"}],"owner":{"account_id":11561387,"reputation":127,"user_id":8470954,"display_name":"Sarthak Mahapatra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":335,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1660999393,"creation_date":1525259805,"question_id":50133361,"body_markdown":"I have imported a project into android studios 3.1.1 which is using android google maps api. When I am running the project it is not creating the .apk file for the project so that I can test it in my phone. It works fine with the emulator but it is not creating the app.apk file in the output","title":"Android Studio not creating the .apk file when imported a project","body":"<p>I have imported a project into android studios 3.1.1 which is using android google maps api. When I am running the project it is not creating the .apk file for the project so that I can test it in my phone. It works fine with the emulator but it is not creating the app.apk file in the output</p>\n"},{"tags":["java","json","javafx","uiviewcontroller","scenebuilder"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1660918744,"post_id":73418013,"comment_id":129654332,"body_markdown":"You have already put the relevant annotations on the pojos(looks like gson if i remember correctly). Did you try to read the file? If you did, show the code so we can understand your problem. If not, why not?","body":"You have already put the relevant annotations on the pojos(looks like gson if i remember correctly). Did you try to read the file? If you did, show the code so we can understand your problem. If not, why not?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1661004159,"post_id":73418013,"comment_id":129669960,"body_markdown":"https://stackoverflow.com/questions/70302119/show-json-in-tableview/70302970#70302970","body":"<a href=\"https://stackoverflow.com/questions/70302119/show-json-in-tableview/70302970#70302970\" title=\"show json in tableview\">stackoverflow.com/questions/70302119/show-json-in-tableview/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":25802749,"reputation":1420,"user_id":19544859,"display_name":"mikyll98"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660919000,"creation_date":1660919000,"answer_id":73418258,"question_id":73418013,"body_markdown":"You could use [gson](https://github.com/google/gson) to parse the json.\r\n\r\nHere&#39;s an example on how to read/load the data of your `customer.json` file:\r\n\r\n```java\r\npublic void saveCustomers(Customer[] customers, String filename) {\r\n\ttry(FileWriter writer = new FileWriter(filename)) {\r\n\t\tGson gson = new GsonBuilder().setPrettyPrinting().create();\r\n\t\tgson.toJson(customers, writer);\r\n        \r\n\t} catch (JsonIOException | IOException e) {\r\n\t\te.printStackTrace();\r\n\t\t// handle exception\r\n\t}\r\n}\r\n\r\npublic Customer[] loadCustomers(String filename) {\r\n\tCustomer[] customers;\r\n\ttry (FileReader reader = new FileReader(filename)) {\r\n\t\tGson gson = new GsonBuilder().create();\r\n\t\t\r\n\t\tcustomers = gson.fromJson(reader, Customer[].class);\r\n\t\t\r\n\t} catch (NullPointerException | IOException | JsonIOException | JsonSyntaxException e) {\r\n\t\te.printStackTrace();\r\n\t\t// handle exception\r\n\t}\r\n\treturn customers;\r\n}\r\n```\r\n\r\n","title":"How can I read a JSON file and display it to a TableView in JavaFX?","body":"<p>You could use <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">gson</a> to parse the json.</p>\n<p>Here's an example on how to read/load the data of your <code>customer.json</code> file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void saveCustomers(Customer[] customers, String filename) {\n    try(FileWriter writer = new FileWriter(filename)) {\n        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n        gson.toJson(customers, writer);\n        \n    } catch (JsonIOException | IOException e) {\n        e.printStackTrace();\n        // handle exception\n    }\n}\n\npublic Customer[] loadCustomers(String filename) {\n    Customer[] customers;\n    try (FileReader reader = new FileReader(filename)) {\n        Gson gson = new GsonBuilder().create();\n        \n        customers = gson.fromJson(reader, Customer[].class);\n        \n    } catch (NullPointerException | IOException | JsonIOException | JsonSyntaxException e) {\n        e.printStackTrace();\n        // handle exception\n    }\n    return customers;\n}\n</code></pre>\n"}],"owner":{"account_id":26108254,"reputation":13,"user_id":19802615,"display_name":"NewCoderBH1694"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":247,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1660999187,"accepted_answer_id":73418258,"answer_count":1,"score":-2,"last_activity_date":1660999180,"creation_date":1660917822,"question_id":73418013,"body_markdown":"I am struggling with this concept. I have a local JSON file, named customers.json, with 1000 customers containing a bunch of information about them. \r\n\r\n```json\r\n&quot;Customers&quot;: [{\r\n    &quot;id&quot;: 1,\r\n    &quot;gender&quot;: &quot;female&quot;,\r\n    &quot;firstName&quot;: &quot;Rose&quot;,\r\n    &quot;lastName&quot;: &quot;Ruffner&quot;,\r\n    &quot;streetAddress&quot;: &quot;3846 St. Paul Street&quot;,\r\n    &quot;city&quot;: &quot;St Catharines&quot;,\r\n    &quot;province&quot;: &quot;ON&quot;,\r\n    &quot;postalCode&quot;: &quot;L2S 3A1&quot;,\r\n    &quot;emailAddress&quot;: &quot;RoseMRuffner@pookmail.com&quot;,\r\n    &quot;ccType&quot;: &quot;Visa&quot;,\r\n    &quot;bloodType&quot;: &quot;B+&quot;,\r\n    &quot;phoneNumber&quot;: &quot;905-401-7824&quot;,\r\n    &quot;pounds&quot;: 226.6,\r\n    &quot;heightInCM&quot;: 156,\r\n    &quot;purchases&quot;:\r\n    [\r\n      {\r\n      &quot;id&quot;: 78,\r\n      &quot;sku&quot;: &quot;woo-vneck-tee-blue&quot;,\r\n      &quot;name&quot;: &quot;V-Neck T-Shirt - Blue&quot;,\r\n      &quot;salePrice&quot;: 14.0,\r\n      &quot;regularPrice&quot;: 15.0,\r\n      &quot;image&quot;: &quot;https://woocommercecore.mystagingwebsite.com/wp-content/uploads/2017/12/vnech-tee-blue-1.jpg&quot;\r\n    },\r\n```\r\n\r\nNow, I need to access the id, firstName, lastName, phoneNumber and sum of their total purchases put into a TableView using JavaFX. My biggest struggle is finding the simplest way to read the data from the JSON file!\r\n\r\nIf someone could help explain how I can read the customers.json file and populate the data into the id, firstName, lastName and sumOfTotalPurchases columns in a TableView, that would be greatly appreciated. \r\n\r\nI have a class made called APIManager, even though this is not technically an API, which is where I need to read the JSON data. Then I have to use this data in the Initialize method of my TableViewController.\r\n\r\nIf you could, please give me the simplest way to do this.\r\n\r\nHere is all the code I have written below:\r\n\r\nMy Customer Class:\r\n\r\n    public class Customer {\r\n    \r\n        @SerializedName(&quot;id&quot;)\r\n        private String m_customerId;\r\n    \r\n        @SerializedName(&quot;firstName&quot;)\r\n        private String m_firstName;\r\n    \r\n        @SerializedName(&quot;lastName&quot;)\r\n        private String m_lastName;\r\n    \r\n        @SerializedName(&quot;phoneNumber&quot;)\r\n        private String m_phoneNumber;\r\n    \r\n        @SerializedName(&quot;purchases&quot;)\r\n        private Product[] m_product;\r\n    \r\n        public Customer(){}\r\n    \r\n        public Customer(String customerId, String firstName, String lastName, String phoneNumber, Product[] product)\r\n        {\r\n            this.m_customerId = customerId;\r\n            this.m_firstName = firstName;\r\n            this.m_lastName = lastName;\r\n            this.m_phoneNumber = phoneNumber;\r\n            this.m_product = product;\r\n        }\r\n    \r\n        public String getCustomerId() {\r\n            return m_customerId;\r\n        }\r\n    \r\n        public String getFirstName() {\r\n            return m_firstName;\r\n        }\r\n    \r\n        public String getLastName() {\r\n            return m_lastName;\r\n        }\r\n    \r\n        public String getPhoneNumber() {\r\n            return m_phoneNumber;\r\n        }\r\n    \r\n        public Product[] getProduct() {\r\n            return m_product;\r\n        }\r\n\r\nMy Products Class:\r\n\r\n    public class Product {\r\n    \r\n          @SerializedName(&quot;sku&quot;)\r\n          private String m_sku;\r\n    \r\n          @SerializedName(&quot;name&quot;)\r\n          private String m_name;\r\n    \r\n          @SerializedName(&quot;salePrice&quot;)\r\n          private double m_salePrice;\r\n    \r\n          @SerializedName(&quot;regularPrice&quot;)\r\n          private double m_regularPrice;\r\n    \r\n          @SerializedName(&quot;image&quot;)\r\n          private String m_imageURL;\r\n    \r\n          public Product(){}\r\n    \r\n          public Product(String sku, String name, double salePrice, double regularPrice, String imageURL){\r\n                this.m_sku = sku;\r\n                this.m_name = name;\r\n                this.m_salePrice = salePrice;\r\n                this.m_regularPrice = regularPrice;\r\n                this.m_imageURL = imageURL;\r\n          }\r\n    \r\n          public String getSku() {\r\n            return m_sku;\r\n          }\r\n    \r\n          public String getName() {\r\n            return m_name;\r\n          }\r\n    \r\n          public double getSalePrice() {\r\n            return m_salePrice;\r\n          }\r\n    \r\n          public double getRegularPrice() {\r\n            return m_regularPrice;\r\n          }\r\n    \r\n          public String getImageURL() {\r\n            return m_imageURL;\r\n          }\r\n    \r\n          @Override\r\n          public String toString(){\r\n            return m_name +&quot;- $&quot; + m_salePrice;\r\n          }\r\n\r\nMy APIManager Class:\r\n\r\n    public class APIManager\r\n    {\r\n        /********************* SINGLETON SECTION *****************************/\r\n        // Step 1. private static instance member variable\r\n        private static APIManager m_instance = null;\r\n        // Step 2. make the default constructor private\r\n        private APIManager() {}\r\n        // Step 3. create a public static entry point / instance method\r\n        public static APIManager Instance()\r\n        {\r\n            // Step 4. Check if the private instance member variable is null\r\n            if(m_instance == null)\r\n            {\r\n                // Step 5. Instantiate a new APIManager instance\r\n                m_instance = new APIManager();\r\n            }\r\n            return m_instance;\r\n        }\r\n        /*********************************************************************/\r\n    \r\n        /* TODO -- Fill in with useful methods to read Customer information */\r\n    \r\n    }\r\n\r\nAnd my TableViewController Class:\r\n\r\n    public class TableViewController implements Initializable {\r\n        @FXML\r\n        private Label saleLabel;\r\n    \r\n        @FXML\r\n        private Label msrpLabel;\r\n    \r\n        @FXML\r\n        private Label savingsLabel;\r\n    \r\n        @FXML\r\n        private Label rowsInTableLabel;\r\n    \r\n        @FXML\r\n        private TableView&lt;Customer&gt; tableView;\r\n    \r\n        @FXML\r\n        private TableColumn&lt;Customer, Integer&gt; idColumn;\r\n    \r\n        @FXML\r\n        private TableColumn&lt;Customer, String&gt; firstNameColumn;\r\n    \r\n        @FXML\r\n        private TableColumn&lt;Customer, String&gt; lastNameColumn;\r\n    \r\n        @FXML\r\n        private TableColumn&lt;Customer, String&gt; phoneColumn;\r\n    \r\n        @FXML\r\n        private TableColumn&lt;Customer, String&gt; totalPurchaseColumn;\r\n    \r\n        @FXML\r\n        private ListView&lt;Product&gt; purchaseListView;\r\n    \r\n        @FXML\r\n        private ImageView imageView;\r\n    \r\n        @FXML\r\n        private void top10Customers()\r\n        {\r\n            System.out.println(&quot;called method top10Customers()&quot;);\r\n        }\r\n    \r\n        @FXML\r\n        private void customersSavedOver5()\r\n        {\r\n            System.out.println(&quot;called method customersSavedOver5()&quot;);\r\n        }\r\n    \r\n        @FXML\r\n        private void loadAllCustomers()\r\n        {\r\n            System.out.println(&quot;called method loadAllCustomers&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void initialize(URL url, ResourceBundle resourceBundle) {\r\n    \r\n        }\r\n    }\r\n\r\n\r\n","title":"How can I read a JSON file and display it to a TableView in JavaFX?","body":"<p>I am struggling with this concept. I have a local JSON file, named customers.json, with 1000 customers containing a bunch of information about them.</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;Customers&quot;: [{\n    &quot;id&quot;: 1,\n    &quot;gender&quot;: &quot;female&quot;,\n    &quot;firstName&quot;: &quot;Rose&quot;,\n    &quot;lastName&quot;: &quot;Ruffner&quot;,\n    &quot;streetAddress&quot;: &quot;3846 St. Paul Street&quot;,\n    &quot;city&quot;: &quot;St Catharines&quot;,\n    &quot;province&quot;: &quot;ON&quot;,\n    &quot;postalCode&quot;: &quot;L2S 3A1&quot;,\n    &quot;emailAddress&quot;: &quot;RoseMRuffner@pookmail.com&quot;,\n    &quot;ccType&quot;: &quot;Visa&quot;,\n    &quot;bloodType&quot;: &quot;B+&quot;,\n    &quot;phoneNumber&quot;: &quot;905-401-7824&quot;,\n    &quot;pounds&quot;: 226.6,\n    &quot;heightInCM&quot;: 156,\n    &quot;purchases&quot;:\n    [\n      {\n      &quot;id&quot;: 78,\n      &quot;sku&quot;: &quot;woo-vneck-tee-blue&quot;,\n      &quot;name&quot;: &quot;V-Neck T-Shirt - Blue&quot;,\n      &quot;salePrice&quot;: 14.0,\n      &quot;regularPrice&quot;: 15.0,\n      &quot;image&quot;: &quot;https://woocommercecore.mystagingwebsite.com/wp-content/uploads/2017/12/vnech-tee-blue-1.jpg&quot;\n    },\n</code></pre>\n<p>Now, I need to access the id, firstName, lastName, phoneNumber and sum of their total purchases put into a TableView using JavaFX. My biggest struggle is finding the simplest way to read the data from the JSON file!</p>\n<p>If someone could help explain how I can read the customers.json file and populate the data into the id, firstName, lastName and sumOfTotalPurchases columns in a TableView, that would be greatly appreciated.</p>\n<p>I have a class made called APIManager, even though this is not technically an API, which is where I need to read the JSON data. Then I have to use this data in the Initialize method of my TableViewController.</p>\n<p>If you could, please give me the simplest way to do this.</p>\n<p>Here is all the code I have written below:</p>\n<p>My Customer Class:</p>\n<pre><code>public class Customer {\n\n    @SerializedName(&quot;id&quot;)\n    private String m_customerId;\n\n    @SerializedName(&quot;firstName&quot;)\n    private String m_firstName;\n\n    @SerializedName(&quot;lastName&quot;)\n    private String m_lastName;\n\n    @SerializedName(&quot;phoneNumber&quot;)\n    private String m_phoneNumber;\n\n    @SerializedName(&quot;purchases&quot;)\n    private Product[] m_product;\n\n    public Customer(){}\n\n    public Customer(String customerId, String firstName, String lastName, String phoneNumber, Product[] product)\n    {\n        this.m_customerId = customerId;\n        this.m_firstName = firstName;\n        this.m_lastName = lastName;\n        this.m_phoneNumber = phoneNumber;\n        this.m_product = product;\n    }\n\n    public String getCustomerId() {\n        return m_customerId;\n    }\n\n    public String getFirstName() {\n        return m_firstName;\n    }\n\n    public String getLastName() {\n        return m_lastName;\n    }\n\n    public String getPhoneNumber() {\n        return m_phoneNumber;\n    }\n\n    public Product[] getProduct() {\n        return m_product;\n    }\n</code></pre>\n<p>My Products Class:</p>\n<pre><code>public class Product {\n\n      @SerializedName(&quot;sku&quot;)\n      private String m_sku;\n\n      @SerializedName(&quot;name&quot;)\n      private String m_name;\n\n      @SerializedName(&quot;salePrice&quot;)\n      private double m_salePrice;\n\n      @SerializedName(&quot;regularPrice&quot;)\n      private double m_regularPrice;\n\n      @SerializedName(&quot;image&quot;)\n      private String m_imageURL;\n\n      public Product(){}\n\n      public Product(String sku, String name, double salePrice, double regularPrice, String imageURL){\n            this.m_sku = sku;\n            this.m_name = name;\n            this.m_salePrice = salePrice;\n            this.m_regularPrice = regularPrice;\n            this.m_imageURL = imageURL;\n      }\n\n      public String getSku() {\n        return m_sku;\n      }\n\n      public String getName() {\n        return m_name;\n      }\n\n      public double getSalePrice() {\n        return m_salePrice;\n      }\n\n      public double getRegularPrice() {\n        return m_regularPrice;\n      }\n\n      public String getImageURL() {\n        return m_imageURL;\n      }\n\n      @Override\n      public String toString(){\n        return m_name +&quot;- $&quot; + m_salePrice;\n      }\n</code></pre>\n<p>My APIManager Class:</p>\n<pre><code>public class APIManager\n{\n    /********************* SINGLETON SECTION *****************************/\n    // Step 1. private static instance member variable\n    private static APIManager m_instance = null;\n    // Step 2. make the default constructor private\n    private APIManager() {}\n    // Step 3. create a public static entry point / instance method\n    public static APIManager Instance()\n    {\n        // Step 4. Check if the private instance member variable is null\n        if(m_instance == null)\n        {\n            // Step 5. Instantiate a new APIManager instance\n            m_instance = new APIManager();\n        }\n        return m_instance;\n    }\n    /*********************************************************************/\n\n    /* TODO -- Fill in with useful methods to read Customer information */\n\n}\n</code></pre>\n<p>And my TableViewController Class:</p>\n<pre><code>public class TableViewController implements Initializable {\n    @FXML\n    private Label saleLabel;\n\n    @FXML\n    private Label msrpLabel;\n\n    @FXML\n    private Label savingsLabel;\n\n    @FXML\n    private Label rowsInTableLabel;\n\n    @FXML\n    private TableView&lt;Customer&gt; tableView;\n\n    @FXML\n    private TableColumn&lt;Customer, Integer&gt; idColumn;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; firstNameColumn;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; lastNameColumn;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; phoneColumn;\n\n    @FXML\n    private TableColumn&lt;Customer, String&gt; totalPurchaseColumn;\n\n    @FXML\n    private ListView&lt;Product&gt; purchaseListView;\n\n    @FXML\n    private ImageView imageView;\n\n    @FXML\n    private void top10Customers()\n    {\n        System.out.println(&quot;called method top10Customers()&quot;);\n    }\n\n    @FXML\n    private void customersSavedOver5()\n    {\n        System.out.println(&quot;called method customersSavedOver5()&quot;);\n    }\n\n    @FXML\n    private void loadAllCustomers()\n    {\n        System.out.println(&quot;called method loadAllCustomers&quot;);\n    }\n\n    @Override\n    public void initialize(URL url, ResourceBundle resourceBundle) {\n\n    }\n}\n</code></pre>\n"},{"tags":["java","launchdarkly","feature-flags"],"answers":[{"tags":[],"owner":{"account_id":20107567,"reputation":36,"user_id":14744696,"display_name":"Steve Rice"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649691556,"creation_date":1649691556,"answer_id":71830605,"question_id":71826425,"body_markdown":"There is overlap between the two solutions. However, there are some key differences, which may or may not matter to you, depending on your use-case. \r\n\r\nFor example, AWS AppConfig has native integrations with other AWS services like Lambda; see this video: https://www.youtube.com/watch?v=sq2HcRMLaLU. Pricing is different too (AWS AppConfig is pay-as-you-go). And per your question, AWS AppConfig does have AWS Java SDK support: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/appconfig/AmazonAppConfigClient.html\r\n\r\nFYI - I work on AWS AppConfig.\r\n\r\n\r\n\r\n","title":"Feature Flag Capability","body":"<p>There is overlap between the two solutions. However, there are some key differences, which may or may not matter to you, depending on your use-case.</p>\n<p>For example, AWS AppConfig has native integrations with other AWS services like Lambda; see this video: <a href=\"https://www.youtube.com/watch?v=sq2HcRMLaLU\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=sq2HcRMLaLU</a>. Pricing is different too (AWS AppConfig is pay-as-you-go). And per your question, AWS AppConfig does have AWS Java SDK support: <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/appconfig/AmazonAppConfigClient.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/appconfig/AmazonAppConfigClient.html</a></p>\n<p>FYI - I work on AWS AppConfig.</p>\n"}],"owner":{"account_id":2458401,"reputation":729,"user_id":2143023,"accept_rate":11,"display_name":"Yosefarr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":459,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1661030709,"accepted_answer_id":71830605,"answer_count":1,"score":-2,"last_activity_date":1660997879,"creation_date":1649673763,"question_id":71826425,"body_markdown":"I want to migrate me services to use Feature Flag Capabilities from: [LaunchDarkly][1] to [AWS AppConfig feature flags][2]\r\n\r\nAre they work the same?\r\n\r\nWhat are the major differences?\r\n\r\nCan I use Java Client?\r\n\r\n\r\n\r\n\r\n  [1]: https://launchdarkly.com/\r\n  [2]: https://aws.amazon.com/blogs/mt/using-aws-appconfig-feature-flags/","title":"Feature Flag Capability","body":"<p>I want to migrate me services to use Feature Flag Capabilities from: <a href=\"https://launchdarkly.com/\" rel=\"nofollow noreferrer\">LaunchDarkly</a> to <a href=\"https://aws.amazon.com/blogs/mt/using-aws-appconfig-feature-flags/\" rel=\"nofollow noreferrer\">AWS AppConfig feature flags</a></p>\n<p>Are they work the same?</p>\n<p>What are the major differences?</p>\n<p>Can I use Java Client?</p>\n"},{"tags":["java","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":18064369,"reputation":48565,"user_id":13130697,"display_name":"Dharmaraj"},"score":0,"creation_date":1660980166,"post_id":73424779,"comment_id":129665775,"body_markdown":"The document seems to be empty ie. doesn&#39;t exist (but maybe has a sub-collection). Try adding a field in it and it should so up.","body":"The document seems to be empty ie. doesn&#39;t exist (but maybe has a sub-collection). Try adding a field in it and it should so up."},{"owner":{"account_id":18530507,"reputation":15,"user_id":13501420,"display_name":"irfan  yaqub"},"score":0,"creation_date":1660980523,"post_id":73424779,"comment_id":129665824,"body_markdown":"Thanks for your reply but If you look into the image provided inquestion &quot;Database Image &quot;there is the document in it.","body":"Thanks for your reply but If you look into the image provided inquestion &quot;Database Image &quot;there is the document in it."},{"owner":{"account_id":18064369,"reputation":48565,"user_id":13130697,"display_name":"Dharmaraj"},"score":0,"creation_date":1660980583,"post_id":73424779,"comment_id":129665831,"body_markdown":"The document ID is italic that indicates it&#39;s empty/inexistent.","body":"The document ID is italic that indicates it&#39;s empty/inexistent."},{"owner":{"account_id":18530507,"reputation":15,"user_id":13501420,"display_name":"irfan  yaqub"},"score":0,"creation_date":1660981214,"post_id":73424779,"comment_id":129665924,"body_markdown":"You are absolutely right, i have created another document and i fetched the document. Thanks","body":"You are absolutely right, i have created another document and i fetched the document. Thanks"},{"owner":{"account_id":18530507,"reputation":15,"user_id":13501420,"display_name":"irfan  yaqub"},"score":0,"creation_date":1660981573,"post_id":73424779,"comment_id":129665963,"body_markdown":"and idk why its in italic ... but yeah problem solved.","body":"and idk why its in italic ... but yeah problem solved."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1660984138,"post_id":73424779,"comment_id":129666373,"body_markdown":"Shouldn&#39;t your comment be an answer, @Dharmaraj?","body":"Shouldn&#39;t your comment be an answer, @Dharmaraj?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1661155958,"post_id":73424779,"comment_id":129695743,"body_markdown":"Why did you delete this [question](https://stackoverflow.com/questions/73426102/why-creating-multiple-documents-at-same-time-with-subcollection-appear-as-italic)?","body":"Why did you delete this <a href=\"https://stackoverflow.com/questions/73426102/why-creating-multiple-documents-at-same-time-with-subcollection-appear-as-italic\">question</a>?"}],"answers":[{"tags":[],"owner":{"account_id":18064369,"reputation":48565,"user_id":13130697,"display_name":"Dharmaraj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660986210,"creation_date":1660986210,"answer_id":73425403,"question_id":73424779,"body_markdown":"The `Math 101` document in the provided screenshot _does not exist_ (as indicated by the italic document ID) but there&#39;s a sub collection `assignmentData` in it. If you still want to query all document in `OpenAssignments` then it&#39;ll be best to add a field in the document to actually create it. \r\n\r\nIf your goal is to query `assignmentData` documents of all OpenAssignments then you can use a [Collection Group](https://firebase.google.com/docs/firestore/query-data/queries#collection-group-query) query instead.  \r\n\r\nAlso checkout: https://stackoverflow.com/q/70539221/13130697","title":"Why the documents (that have further sub collection) size is 0 when you call .collection(&quot;collName&quot;). get()?","body":"<p>The <code>Math 101</code> document in the provided screenshot <em>does not exist</em> (as indicated by the italic document ID) but there's a sub collection <code>assignmentData</code> in it. If you still want to query all document in <code>OpenAssignments</code> then it'll be best to add a field in the document to actually create it.</p>\n<p>If your goal is to query <code>assignmentData</code> documents of all OpenAssignments then you can use a <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#collection-group-query\" rel=\"nofollow noreferrer\">Collection Group</a> query instead.</p>\n<p>Also checkout: <a href=\"https://stackoverflow.com/q/70539221/13130697\">Firestore query returns no documents even though they are shown in the console in italics</a></p>\n"}],"owner":{"account_id":18530507,"reputation":15,"user_id":13501420,"display_name":"irfan  yaqub"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73425403,"answer_count":1,"score":1,"last_activity_date":1660997857,"creation_date":1660979812,"question_id":73424779,"body_markdown":"I have a similar problem as this question [question][1], but no one has answered yet.  I have a collection that has documents and those documents have further collections. When I try to get these documents I receive 0 documents. [database image][2]\r\n\r\nCode\r\n\r\n    db.collection(&quot;teachers&quot;).document(&quot;irfany&quot;).collection(&quot;OpenAssignments&quot;).\r\n            get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n        @Override\r\n        public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n            if (task.isSuccessful()) {\r\n                Log.d(&quot;getdocumentSize&quot;, task.getResult().size() + &quot; =&gt; &quot;);\r\n\r\n                for (QueryDocumentSnapshot document : task.getResult()) {\r\n\r\n                }\r\n            } else {\r\n                Log.d(&quot;Error&quot;, &quot;Error getting documents: &quot;, task.getException());\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n**Output**  D/getdocumentSize: 0 =&gt; \r\n\r\n  [1]: https://stackoverflow.com/questions/52614242/why-is-firestore-documentsnapshot-data-size-always-zero\r\n  [2]: https://i.stack.imgur.com/ZCsZO.png","title":"Why the documents (that have further sub collection) size is 0 when you call .collection(&quot;collName&quot;). get()?","body":"<p>I have a similar problem as this question <a href=\"https://stackoverflow.com/questions/52614242/why-is-firestore-documentsnapshot-data-size-always-zero\">question</a>, but no one has answered yet.  I have a collection that has documents and those documents have further collections. When I try to get these documents I receive 0 documents. <a href=\"https://i.stack.imgur.com/ZCsZO.png\" rel=\"nofollow noreferrer\">database image</a></p>\n<p>Code</p>\n<pre><code>db.collection(&quot;teachers&quot;).document(&quot;irfany&quot;).collection(&quot;OpenAssignments&quot;).\n        get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            Log.d(&quot;getdocumentSize&quot;, task.getResult().size() + &quot; =&gt; &quot;);\n\n            for (QueryDocumentSnapshot document : task.getResult()) {\n\n            }\n        } else {\n            Log.d(&quot;Error&quot;, &quot;Error getting documents: &quot;, task.getException());\n        }\n    }\n});\n</code></pre>\n<p><strong>Output</strong>  D/getdocumentSize: 0 =&gt;</p>\n"},{"tags":["java","android","dart","flutter"],"comments":[{"owner":{"account_id":9945900,"reputation":3598,"user_id":8164116,"display_name":"Daksh Gargas"},"score":1,"creation_date":1545128928,"post_id":53830949,"comment_id":94510326,"body_markdown":"Please post your `MainActivity` class which extends `FlutterActivity`","body":"Please post your <code>MainActivity</code> class which extends <code>FlutterActivity</code>"},{"owner":{"account_id":5635379,"reputation":3281,"user_id":6822876,"accept_rate":74,"display_name":"Carrein"},"score":0,"creation_date":1545141258,"post_id":53830949,"comment_id":94517198,"body_markdown":"Updated with the full class body.","body":"Updated with the full class body."},{"owner":{"account_id":879403,"reputation":632265,"user_id":217408,"accept_rate":97,"display_name":"G&#252;nter Z&#246;chbauer"},"score":0,"creation_date":1545141557,"post_id":53830949,"comment_id":94517386,"body_markdown":"Are you behind a proxy (do you have a proxy configured for Internet access)?","body":"Are you behind a proxy (do you have a proxy configured for Internet access)?"},{"owner":{"account_id":5635379,"reputation":3281,"user_id":6822876,"accept_rate":74,"display_name":"Carrein"},"score":0,"creation_date":1545141732,"post_id":53830949,"comment_id":94517479,"body_markdown":"No. I have tried running two new projects on different PCs with different connections and it is still stuck.","body":"No. I have tried running two new projects on different PCs with different connections and it is still stuck."}],"answers":[{"tags":[],"owner":{"account_id":9033685,"reputation":3280,"user_id":6730482,"display_name":"Siavash"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1552557782,"creation_date":1552557782,"answer_id":55159637,"question_id":53830949,"body_markdown":"I had the same problem. In my case `flutter clean` fixed the issue. The cause of problem for me was a rename in Android package. After renaming the package you might need to clean the flutter old build files.","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>I had the same problem. In my case <code>flutter clean</code> fixed the issue. The cause of problem for me was a rename in Android package. After renaming the package you might need to clean the flutter old build files.</p>\n"},{"tags":[],"owner":{"account_id":11607924,"reputation":55,"user_id":8502980,"display_name":"Fitsum Ayalew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625781934,"creation_date":1571612091,"answer_id":58477952,"question_id":53830949,"body_markdown":"I have faced the same problem and fixed it by including all supporting platforms in my app level build file like this [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KmjhQ.png","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>I have faced the same problem and fixed it by including all supporting platforms in my app level build file like this <a href=\"https://i.stack.imgur.com/KmjhQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KmjhQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8747,"reputation":3417,"user_id":15904,"accept_rate":92,"display_name":"David Conlisk"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1587202983,"creation_date":1587199863,"answer_id":61286489,"question_id":53830949,"body_markdown":"I had this problem and eventually tracked it down to the fact that I&#39;d changed the package name of my project to com.test.**MyAppName** in the AndroidManifest. This is not a valid Dart package name. You can verify this by trying to create a new project using \r\n\r\n`flutter create --org com.test MyAppName`\r\n\r\nThis results in the error message:\r\n\r\n&gt; &quot;MyAppName&quot; is not a valid Dart package name.\r\n&gt; \r\n&gt; \r\n&gt; From the [Pubspec format\r\n&gt; description](https://www.dartlang.org/tools/pub/pubspec.html):\r\n&gt; \r\n&gt; **DO** use `lowercase_with_underscores` for package names.\r\n&gt; \r\n&gt; Package names should be all lowercase, with underscores to separate\r\n&gt; words, `just_like_this`.  Use only basic Latin letters and Arabic\r\n&gt; digits: [a-z0-9_]. Also, make sure the name is a valid Dart identifier\r\n&gt; -- that it doesn&#39;t start with digits and isn&#39;t a reserved word.\r\n\r\nThe solution for me was to recreate my project with the desired values by running\r\n\r\n`flutter create --org com.test my_app_name`\r\n\r\nand copying across the lib folder, pubspec file, any assets, etc. This should fix the problem. Note that this results in the kotlin folder (android/app/main/kotlin) having subfolders set up correctly based on the domain that you specified, e.g. kotlin/com/test/ for com.test","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>I had this problem and eventually tracked it down to the fact that I'd changed the package name of my project to com.test.<strong>MyAppName</strong> in the AndroidManifest. This is not a valid Dart package name. You can verify this by trying to create a new project using </p>\n\n<p><code>flutter create --org com.test MyAppName</code></p>\n\n<p>This results in the error message:</p>\n\n<blockquote>\n  <p>\"MyAppName\" is not a valid Dart package name.</p>\n  \n  <p>From the <a href=\"https://www.dartlang.org/tools/pub/pubspec.html\" rel=\"nofollow noreferrer\">Pubspec format\n  description</a>:</p>\n  \n  <p><strong>DO</strong> use <code>lowercase_with_underscores</code> for package names.</p>\n  \n  <p>Package names should be all lowercase, with underscores to separate\n  words, <code>just_like_this</code>.  Use only basic Latin letters and Arabic\n  digits: [a-z0-9_]. Also, make sure the name is a valid Dart identifier\n  -- that it doesn't start with digits and isn't a reserved word.</p>\n</blockquote>\n\n<p>The solution for me was to recreate my project with the desired values by running</p>\n\n<p><code>flutter create --org com.test my_app_name</code></p>\n\n<p>and copying across the lib folder, pubspec file, any assets, etc. This should fix the problem. Note that this results in the kotlin folder (android/app/main/kotlin) having subfolders set up correctly based on the domain that you specified, e.g. kotlin/com/test/ for com.test</p>\n"},{"tags":[],"owner":{"account_id":8747,"reputation":3417,"user_id":15904,"accept_rate":92,"display_name":"David Conlisk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587203194,"creation_date":1587203194,"answer_id":61287122,"question_id":53830949,"body_markdown":"Another way to recreate this issue is to change the application&#39;s android:name attribute in the AndroidManifest from the default value of io.flutter.app.FlutterApplication to something else (in my example com.test.my_app_name). The purpose of this attribute is detailed in the comments in the standard AndroidManifest created by flutter:\r\n\r\n     &lt;!-- io.flutter.app.FlutterApplication is an android.app.Application\r\n          that calls FlutterMain.startInitialization(this); in its onCreate\r\n          method. In most cases you can leave this as-is, but you if you want \r\n          to provide additional functionality it is fine to subclass or\r\n          reimplement FlutterApplication and put your custom class here. --&gt;\r\n\r\nSo do not change that value unless it is to use your own custom class - this is not just a label.","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>Another way to recreate this issue is to change the application's android:name attribute in the AndroidManifest from the default value of io.flutter.app.FlutterApplication to something else (in my example com.test.my_app_name). The purpose of this attribute is detailed in the comments in the standard AndroidManifest created by flutter:</p>\n\n<pre><code> &lt;!-- io.flutter.app.FlutterApplication is an android.app.Application\n      that calls FlutterMain.startInitialization(this); in its onCreate\n      method. In most cases you can leave this as-is, but you if you want \n      to provide additional functionality it is fine to subclass or\n      reimplement FlutterApplication and put your custom class here. --&gt;\n</code></pre>\n\n<p>So do not change that value unless it is to use your own custom class - this is not just a label.</p>\n"},{"tags":[],"owner":{"account_id":8747,"reputation":3417,"user_id":15904,"accept_rate":92,"display_name":"David Conlisk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1587203341,"creation_date":1587203341,"answer_id":61287145,"question_id":53830949,"body_markdown":"Another potential cause for this issue is the package specified in your MainActivity.kt is in the wrong format, it should also use the same valid Dart package name, e.g.\r\n\r\n`package com.test.my_app_name`\r\n\r\ninstead of\r\n\r\n`package com.test.MyAppName`","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>Another potential cause for this issue is the package specified in your MainActivity.kt is in the wrong format, it should also use the same valid Dart package name, e.g.</p>\n\n<p><code>package com.test.my_app_name</code></p>\n\n<p>instead of</p>\n\n<p><code>package com.test.MyAppName</code></p>\n"},{"tags":[],"owner":{"account_id":964075,"reputation":10698,"user_id":987846,"accept_rate":67,"display_name":"kakyo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590806678,"creation_date":1590806678,"answer_id":62097182,"question_id":53830949,"body_markdown":"Following [@david-conlisk &#39;s answer][1], it&#39;s also possible that you:\r\n\r\n - renamed the Kotlin package without updating the package line;\r\n   \r\n - copy-pasted the MainActivity code from another class/project, but\r\n   forgot to update the package line\r\n\r\nAll these cases could lead to the same hang and crash.\r\n\r\nIMHO, Android Studio should shift away from the current text-file editing hell, and provide an all-in-one project configuration UI similar to Xcode or VisualStudio. The need for editing multiple Gradle config files, and Android&#39;s own property pages leaves too much room for mistakes.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/61287145/987846","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>Following <a href=\"https://stackoverflow.com/a/61287145/987846\">@david-conlisk 's answer</a>, it's also possible that you:</p>\n\n<ul>\n<li><p>renamed the Kotlin package without updating the package line;</p></li>\n<li><p>copy-pasted the MainActivity code from another class/project, but\nforgot to update the package line</p></li>\n</ul>\n\n<p>All these cases could lead to the same hang and crash.</p>\n\n<p>IMHO, Android Studio should shift away from the current text-file editing hell, and provide an all-in-one project configuration UI similar to Xcode or VisualStudio. The need for editing multiple Gradle config files, and Android's own property pages leaves too much room for mistakes.</p>\n"},{"tags":[],"owner":{"account_id":6998219,"reputation":6362,"user_id":5365164,"display_name":"Sludge"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1601379110,"creation_date":1601379110,"answer_id":64118738,"question_id":53830949,"body_markdown":"If you&#39;re experiencing this and you use Firebase, try downloading and inserting a new copy of your &quot;google-services.json&quot; file from your Firebase console. Additionally, be sure you follow all of the steps listed in the [Add Firebase to your Flutter App][1] documentation.\r\n\r\nIf you have enabled Crashlytics for it as well, be sure you have enabled it in your Firebase console and have followed the other instructions listed in the [Get Started with Firebase Crashlytics][2] documentation.\r\n\r\nI&#39;m not exactly sure which one of these fixed my issue, but nothing else worked until I checked all steps listed in those two docs.\r\n\r\n  [1]: https://firebase.google.com/docs/flutter/setup?platform=android\r\n  [2]: https://firebase.google.com/docs/crashlytics/get-started?platform=android","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>If you're experiencing this and you use Firebase, try downloading and inserting a new copy of your &quot;google-services.json&quot; file from your Firebase console. Additionally, be sure you follow all of the steps listed in the <a href=\"https://firebase.google.com/docs/flutter/setup?platform=android\" rel=\"nofollow noreferrer\">Add Firebase to your Flutter App</a> documentation.</p>\n<p>If you have enabled Crashlytics for it as well, be sure you have enabled it in your Firebase console and have followed the other instructions listed in the <a href=\"https://firebase.google.com/docs/crashlytics/get-started?platform=android\" rel=\"nofollow noreferrer\">Get Started with Firebase Crashlytics</a> documentation.</p>\n<p>I'm not exactly sure which one of these fixed my issue, but nothing else worked until I checked all steps listed in those two docs.</p>\n"},{"tags":[],"owner":{"account_id":19218256,"reputation":31,"user_id":14042590,"display_name":"이수미"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1611811121,"creation_date":1611810959,"answer_id":65931363,"question_id":53830949,"body_markdown":"First, check if the two names are the same:\r\n\r\n - the package name in `android/app/src/mainAndroidManifest.xml`\r\n - the package name in `android/app/main/kotlin/MainActivity.kt`\r\n\r\nThen, check that the iOS bundle name is similar to the package name. For example:\r\n\r\n - iOS bundle name: `com.example.myAppName`\r\n - Package name: `com.example.my_app_name`\r\n\r\nFinally, check that the name of the Firebase iOS application bundle ID is the same as the iOS bundle name.\r\n\r\nIn Firebase:\r\n\r\n![][1]\r\n\r\nIn Xcode:\r\n\r\n![][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XFB6w.png\r\n  [2]: https://i.stack.imgur.com/umNvr.png","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>First, check if the two names are the same:</p>\n<ul>\n<li>the package name in <code>android/app/src/mainAndroidManifest.xml</code></li>\n<li>the package name in <code>android/app/main/kotlin/MainActivity.kt</code></li>\n</ul>\n<p>Then, check that the iOS bundle name is similar to the package name. For example:</p>\n<ul>\n<li>iOS bundle name: <code>com.example.myAppName</code></li>\n<li>Package name: <code>com.example.my_app_name</code></li>\n</ul>\n<p>Finally, check that the name of the Firebase iOS application bundle ID is the same as the iOS bundle name.</p>\n<p>In Firebase:</p>\n<p><img src=\"https://i.stack.imgur.com/XFB6w.png\" alt=\"\" /></p>\n<p>In Xcode:</p>\n<p><img src=\"https://i.stack.imgur.com/umNvr.png\" alt=\"\" /></p>\n"},{"tags":[],"owner":{"account_id":412554,"reputation":2491,"user_id":785673,"display_name":"0xFK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611907058,"creation_date":1611907058,"answer_id":65950672,"question_id":53830949,"body_markdown":"One of the root cause of this issue is bugs in the ADB command, where some app related process is still running in the background even though the ADB showing app doesn&#39;t exist.\r\nThe workaround of this behavior is to run uninstall from ADB:\r\n\r\n    adb  -s  &lt;deviceID&gt; uninstall &lt;com.example.appname&gt;","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>One of the root cause of this issue is bugs in the ADB command, where some app related process is still running in the background even though the ADB showing app doesn't exist.\nThe workaround of this behavior is to run uninstall from ADB:</p>\n<pre><code>adb  -s  &lt;deviceID&gt; uninstall &lt;com.example.appname&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2987666,"reputation":361,"user_id":2536025,"display_name":"Lee ABK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630316629,"creation_date":1630316629,"answer_id":68981978,"question_id":53830949,"body_markdown":"check what is added recently in pubspec.yaml file, \r\n\r\n1. try removing that and run the app again.\r\n\r\n2. check for any other code to be added with respect to the new thing added in pubspec.yaml","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>check what is added recently in pubspec.yaml file,</p>\n<ol>\n<li><p>try removing that and run the app again.</p>\n</li>\n<li><p>check for any other code to be added with respect to the new thing added in pubspec.yaml</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":23174911,"reputation":1,"user_id":17273588,"display_name":"Can David"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660996751,"creation_date":1660996751,"answer_id":73426527,"question_id":53830949,"body_markdown":"The same problem which I faced was solved by:\r\n\r\nrunning a command inside the sdk platform-tools in cmd\r\n\r\n&gt; adb uninstall &lt;package - name&gt;\r\n\r\n[Command line arguement to be initiated][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FCiki.png","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>The same problem which I faced was solved by:</p>\n<p>running a command inside the sdk platform-tools in cmd</p>\n<blockquote>\n<p>adb uninstall &lt;package - name&gt;</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/FCiki.png\" rel=\"nofollow noreferrer\">Command line arguement to be initiated</a></p>\n"}],"owner":{"account_id":5635379,"reputation":3281,"user_id":6822876,"accept_rate":74,"display_name":"Carrein"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12160,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":11,"score":13,"last_activity_date":1660996751,"creation_date":1545128705,"question_id":53830949,"body_markdown":"I been trying to get write platform code for Flutter to get a background service started. In here, I used a minimal example with no *actual* work done to show that the application simply won&#39;t run. The actual flutter code is not modified at all.\r\n\r\n**MainActivity.java**\r\n\r\n    public class MainActivity extends FlutterActivity {\r\n    \r\n      Intent i = new Intent(this, MainService.class);\r\n    \r\n      @Override\r\n      protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        GeneratedPluginRegistrant.registerWith(this);\r\n      }\r\n    }\r\n\r\n\r\n**MainService.java**\r\n    \r\n    public class MainService extends IntentService {\r\n      public MainService() {\r\n        super(&quot;MainService&quot;);\r\n      }\r\n    \r\n      @Override\r\n      protected void onHandleIntent(Intent Intent) {\r\n      }\r\n    }\r\n\r\n**AndroidManifest.xml**\r\n\r\n     &lt;service android:enabled=&quot;true&quot;\r\n    android:name=&quot;.MainService&quot;&gt;&lt;/service&gt;\r\n\r\nThe buildVersion is &gt;27 and Manifest file has the `service` tag added accordingly.\r\n\r\nCompiling and running with `flutter run -v` will show the following message:\r\n\r\n    ..\r\n    [ +121 ms] Starting: Intent { act=android.intent.action.RUN flg=0x20000000 cmp=com.example.hello/.MainActivity (has extras)}\r\n    [   +1 ms] Waiting for observatory port to be available...\r\n\r\nAnd the installation is stuck.\r\n\r\nIs there a workaround about this? If this is an actual bug in Flutter&#39;s implementation, does it also mean there is **no** way to run a Flutter application in the background?\r\n","title":"Flutter stuck at &#39;waiting for observatory port to be available&#39; if Android background services is used","body":"<p>I been trying to get write platform code for Flutter to get a background service started. In here, I used a minimal example with no <em>actual</em> work done to show that the application simply won't run. The actual flutter code is not modified at all.</p>\n\n<p><strong>MainActivity.java</strong></p>\n\n<pre><code>public class MainActivity extends FlutterActivity {\n\n  Intent i = new Intent(this, MainService.class);\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    GeneratedPluginRegistrant.registerWith(this);\n  }\n}\n</code></pre>\n\n<p><strong>MainService.java</strong></p>\n\n<pre><code>public class MainService extends IntentService {\n  public MainService() {\n    super(\"MainService\");\n  }\n\n  @Override\n  protected void onHandleIntent(Intent Intent) {\n  }\n}\n</code></pre>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre><code> &lt;service android:enabled=\"true\"\nandroid:name=\".MainService\"&gt;&lt;/service&gt;\n</code></pre>\n\n<p>The buildVersion is >27 and Manifest file has the <code>service</code> tag added accordingly.</p>\n\n<p>Compiling and running with <code>flutter run -v</code> will show the following message:</p>\n\n<pre><code>..\n[ +121 ms] Starting: Intent { act=android.intent.action.RUN flg=0x20000000 cmp=com.example.hello/.MainActivity (has extras)}\n[   +1 ms] Waiting for observatory port to be available...\n</code></pre>\n\n<p>And the installation is stuck.</p>\n\n<p>Is there a workaround about this? If this is an actual bug in Flutter's implementation, does it also mean there is <strong>no</strong> way to run a Flutter application in the background?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":19942592,"reputation":9,"user_id":14614018,"display_name":"Rachid Le Laborantin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1660996711,"creation_date":1660996711,"answer_id":73426521,"question_id":73421968,"body_markdown":" Intent intent = new Intent(YourActivity.class, NewActivity.class);\r\n        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_IMMUTABLE);\r\n\r\nPendingIntent  \r\nNotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\r\nnotificationManager.notify(ID, new NotificationCompat.Builder(context, CHANNEL_ID)\r\n  .setOnlyAlertOnce(false)\r\n  .setAutoCancel(true)\r\n  .setCustomContentView(helper.createSmallView(context))\r\n  .setCustomBigContentView(helper.createBigView(context))\r\n  .setContentIntent(pendingIntent)\r\n  .build());","title":"Activity won&#39;t launch from notification when the app is started from notification","body":"<p>Intent intent = new Intent(YourActivity.class, NewActivity.class);\nintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\nPendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_IMMUTABLE);</p>\n<p>PendingIntent<br />\nNotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\nnotificationManager.notify(ID, new NotificationCompat.Builder(context, CHANNEL_ID)\n.setOnlyAlertOnce(false)\n.setAutoCancel(true)\n.setCustomContentView(helper.createSmallView(context))\n.setCustomBigContentView(helper.createBigView(context))\n.setContentIntent(pendingIntent)\n.build());</p>\n"}],"owner":{"account_id":15279608,"reputation":182,"user_id":11235159,"display_name":"stripies"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660996711,"creation_date":1660940884,"question_id":73421968,"body_markdown":"I have an app that sends notifications, and when clicked, opens an activity from my app. If you launch the app and keep the app open and click notifications, it works properly. However, when the app is closed, it doesn&#39;t. This is what happens:\r\n\r\nClose app &gt; receive notification &gt; click notification &gt; opens the correct activity &gt; receive another notification &gt; nothing happens when clicked\r\n\r\nThe intended functionality is for the notification to open the activity regardless if it is already open, and just add it onto the task stack. So if you clicked 3 notifications, the stack would be ActivityA &gt; ActivityA &gt; ActivityA. Here is the code for the notification:\r\n\r\n    NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\r\n    notificationManager.notify(ID, new NotificationCompat.Builder(context, CHANNEL_ID)\r\n      .setOnlyAlertOnce(false)\r\n      .setAutoCancel(true)\r\n      .setCustomContentView(helper.createSmallView(context))\r\n      .setCustomBigContentView(helper.createBigView(context))\r\n      .setContentIntent(PendingIntent.getActivity(context, 1,\r\n        new Intent(context, ActivityA.class),\r\n        PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_ONE_SHOT | PendingIntent.FLAG_IMMUTABLE)\r\n      )\r\n      .build());\r\n\r\nI also tried using a broadcast `PendingIntent`. The `BroadcastReceiver` would be called but the call to `Context#startActivity` did nothing.","title":"Activity won&#39;t launch from notification when the app is started from notification","body":"<p>I have an app that sends notifications, and when clicked, opens an activity from my app. If you launch the app and keep the app open and click notifications, it works properly. However, when the app is closed, it doesn't. This is what happens:</p>\n<p>Close app &gt; receive notification &gt; click notification &gt; opens the correct activity &gt; receive another notification &gt; nothing happens when clicked</p>\n<p>The intended functionality is for the notification to open the activity regardless if it is already open, and just add it onto the task stack. So if you clicked 3 notifications, the stack would be ActivityA &gt; ActivityA &gt; ActivityA. Here is the code for the notification:</p>\n<pre><code>NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\nnotificationManager.notify(ID, new NotificationCompat.Builder(context, CHANNEL_ID)\n  .setOnlyAlertOnce(false)\n  .setAutoCancel(true)\n  .setCustomContentView(helper.createSmallView(context))\n  .setCustomBigContentView(helper.createBigView(context))\n  .setContentIntent(PendingIntent.getActivity(context, 1,\n    new Intent(context, ActivityA.class),\n    PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_ONE_SHOT | PendingIntent.FLAG_IMMUTABLE)\n  )\n  .build());\n</code></pre>\n<p>I also tried using a broadcast <code>PendingIntent</code>. The <code>BroadcastReceiver</code> would be called but the call to <code>Context#startActivity</code> did nothing.</p>\n"},{"tags":["java","xsd","xmlbeans","apache-poi-4"],"comments":[{"owner":{"account_id":2359576,"reputation":3386,"user_id":2066598,"display_name":"kiwiwings"},"score":0,"creation_date":1629844539,"post_id":68888829,"comment_id":121793145,"body_markdown":"have you tried POI 5.0.0? ... you only need to add the dependency to poi-ooxml:5.0.0, which depends on / fetches XmlBeans and other libraries. remove all other \n/ old dependencies which were related to POI","body":"have you tried POI 5.0.0? ... you only need to add the dependency to poi-ooxml:5.0.0, which depends on / fetches XmlBeans and other libraries. remove all other  / old dependencies which were related to POI"},{"owner":{"account_id":6477687,"reputation":33,"user_id":5015812,"display_name":"Rambabu Pudi"},"score":0,"creation_date":1630071572,"post_id":68888829,"comment_id":121863108,"body_markdown":"thank you @kiwiwings, Yeah after upgrading POI(from 4.4.1 to 5.0.0) it started working but is xmlbeans 5.0.1 is not compatible with the POI-4.4.1 version?","body":"thank you @kiwiwings, Yeah after upgrading POI(from 4.4.1 to 5.0.0) it started working but is xmlbeans 5.0.1 is not compatible with the POI-4.4.1 version?"},{"owner":{"account_id":2359576,"reputation":3386,"user_id":2066598,"display_name":"kiwiwings"},"score":0,"creation_date":1630087496,"post_id":68888829,"comment_id":121869252,"body_markdown":"short answer: no - I&#39;ve changed so many parts under the hood in XmlBeans to support JPMS, so please use the version which is referenced by POI. Starting with POI 5, we also provide the schemas with every POI release to minimize confusion which schema jar to be used.","body":"short answer: no - I&#39;ve changed so many parts under the hood in XmlBeans to support JPMS, so please use the version which is referenced by POI. Starting with POI 5, we also provide the schemas with every POI release to minimize confusion which schema jar to be used."}],"answers":[{"tags":[],"owner":{"account_id":14954782,"reputation":61,"user_id":10796496,"display_name":"Rohit Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645117822,"creation_date":1645117822,"answer_id":71162507,"question_id":68888829,"body_markdown":"I found the following dependency in my pom.xml code and once i removed it.It worked fine for me.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.servicemix.bundles&lt;/groupId&gt;\r\n        &lt;artifactId&gt;org.apache.servicemix.bundles.poi&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.2_1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nSo remove it and it will work. ","title":"Getting :: java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.put(Ljava/lang/Object;)V","body":"<p>I found the following dependency in my pom.xml code and once i removed it.It worked fine for me.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.servicemix.bundles&lt;/groupId&gt;\n    &lt;artifactId&gt;org.apache.servicemix.bundles.poi&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2_1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>So remove it and it will work.</p>\n"},{"tags":[],"owner":{"account_id":13974753,"reputation":21,"user_id":10092414,"display_name":"Rune Gellein"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649335894,"creation_date":1649335894,"answer_id":71782520,"question_id":68888829,"body_markdown":"I had updated to XMLBeans 5.0.3 earlier.  So to fix this I had to update to latest POI (I had the 4.x.x series of POI earlier):\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n    \t&lt;version&gt;5.2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Getting :: java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.put(Ljava/lang/Object;)V","body":"<p>I had updated to XMLBeans 5.0.3 earlier.  So to fix this I had to update to latest POI (I had the 4.x.x series of POI earlier):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;5.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18668697,"reputation":1,"user_id":13608056,"display_name":"Anye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653640124,"creation_date":1653640007,"answer_id":72402559,"question_id":68888829,"body_markdown":"I solved this problem by simply removing all packages of xmlbeans in my repository and reloading maven projects. \r\n\r\nIn most cases, if a `java.lang.NoSuchMethodError` error occurs, the cause could be a dependency package conflict.","title":"Getting :: java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.put(Ljava/lang/Object;)V","body":"<p>I solved this problem by simply removing all packages of xmlbeans in my repository and reloading maven projects.</p>\n<p>In most cases, if a <code>java.lang.NoSuchMethodError</code> error occurs, the cause could be a dependency package conflict.</p>\n"},{"tags":[],"owner":{"account_id":26114806,"reputation":1,"user_id":19808123,"display_name":"Nitish Rout"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660996082,"creation_date":1660996082,"answer_id":73426456,"question_id":68888829,"body_markdown":"    &lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    You can try this also or can move to higher/lower dependency","title":"Getting :: java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.put(Ljava/lang/Object;)V","body":"<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n&lt;/dependency&gt;\nYou can try this also or can move to higher/lower dependency\n</code></pre>\n"}],"owner":{"account_id":6477687,"reputation":33,"user_id":5015812,"display_name":"Rambabu Pudi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3283,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1660996082,"creation_date":1629703993,"question_id":68888829,"body_markdown":"I am using the Poi(poi, poi-ooxml-schemas,poi-ooxml-4.4.1 ) api for export-import operation, and now upgraded xmlbeans from 3.0.2 to 5.0.1 version, after upgrading the xmlbeans-5.0.1 getting error while creating new SXSSFWorkbook(100);\r\n\r\n.... java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.put(Ljava/lang/Object;)V\r\njava.lang.NoClassDefFoundError: Could not initialize class org.apache.poi.xssf.model.SharedStringsTable\r\n\r\nand using jaxb-api-2.4.0-b180830.0359 version.","title":"Getting :: java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.put(Ljava/lang/Object;)V","body":"<p>I am using the Poi(poi, poi-ooxml-schemas,poi-ooxml-4.4.1 ) api for export-import operation, and now upgraded xmlbeans from 3.0.2 to 5.0.1 version, after upgrading the xmlbeans-5.0.1 getting error while creating new SXSSFWorkbook(100);</p>\n<p>.... java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.put(Ljava/lang/Object;)V\njava.lang.NoClassDefFoundError: Could not initialize class org.apache.poi.xssf.model.SharedStringsTable</p>\n<p>and using jaxb-api-2.4.0-b180830.0359 version.</p>\n"},{"tags":["java","spring","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1660996066,"creation_date":1560289848,"answer_id":56552126,"question_id":56551368,"body_markdown":"When you manually assign partitions like that, you are responsible for distributing the partitions across the instances.\r\n\r\nThe group is ignored for the purpose of partition distribution, but is still used to track offsets, if needed.\r\n\r\nYou must use group management and let Kafka do the partition assignment for you, or assign the partitions manually for each instance.\r\n\r\nInstead of `topicPartitions`, use `topics = &quot;data.all&quot;`","title":"Multiple Kafka Listeners With Same GroupId All Receiving Message","body":"<p>When you manually assign partitions like that, you are responsible for distributing the partitions across the instances.</p>\n<p>The group is ignored for the purpose of partition distribution, but is still used to track offsets, if needed.</p>\n<p>You must use group management and let Kafka do the partition assignment for you, or assign the partitions manually for each instance.</p>\n<p>Instead of <code>topicPartitions</code>, use <code>topics = &quot;data.all&quot;</code></p>\n"},{"tags":[],"owner":{"account_id":11203626,"reputation":106,"user_id":8219895,"display_name":"Rishi Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1570019950,"creation_date":1570019950,"answer_id":58201694,"question_id":56551368,"body_markdown":"What happens when you don&#39;t assign partition manually\r\n\r\nProducer Side\r\n-\r\n - When producer sends a message without any strategy or specifying to which partition message should go then kafka tries to use round robin technic and splits all messages among all available partition.\r\n- Message in 2 partitions are unique because maximum of only 1 consumer is recommended to listen to a particular partition of a topic.\r\n\r\nConsumer Side\r\n-\r\n - For example there are 2 partitions of a topic\r\n - Then a consumer(let say `A`) joins with consumer group (lets say `consumer`)\r\n - Partition reassignment happens whenever new consumer joins and 2 partitions get assigned to `A` as we have only one consumer group `consumer`\r\n - Now, consumer `B` tries to join same consumer group `consumer` then again partition reassignment will happen and both A &amp; B will get partition to listen to messages\r\n - As we have only 2 partitions, even if we add more consumers to same consumer group, there will be only 2 consumer who will be listening to the messages sent to the topic because at a time only 2 consumers can get 1-1 partition. To maintain exclusivity of the message consumed at consumer.\r\n\r\n\r\nWhat is happening in your case is, more than 1 consumer is listening to same partitions so all the consumers who are listening to same partitions within same consumer group also, will receive messages from that partition. So mutual exclusivity between consumers in a consumer group is lost due to more than 1 consumer is listening same partitions.","title":"Multiple Kafka Listeners With Same GroupId All Receiving Message","body":"<p>What happens when you don't assign partition manually</p>\n\n<h2>Producer Side</h2>\n\n<ul>\n<li>When producer sends a message without any strategy or specifying to which partition message should go then kafka tries to use round robin technic and splits all messages among all available partition.\n\n<ul>\n<li>Message in 2 partitions are unique because maximum of only 1 consumer is recommended to listen to a particular partition of a topic.</li>\n</ul></li>\n</ul>\n\n<h2>Consumer Side</h2>\n\n<ul>\n<li>For example there are 2 partitions of a topic</li>\n<li>Then a consumer(let say <code>A</code>) joins with consumer group (lets say <code>consumer</code>)</li>\n<li>Partition reassignment happens whenever new consumer joins and 2 partitions get assigned to <code>A</code> as we have only one consumer group <code>consumer</code></li>\n<li>Now, consumer <code>B</code> tries to join same consumer group <code>consumer</code> then again partition reassignment will happen and both A &amp; B will get partition to listen to messages</li>\n<li>As we have only 2 partitions, even if we add more consumers to same consumer group, there will be only 2 consumer who will be listening to the messages sent to the topic because at a time only 2 consumers can get 1-1 partition. To maintain exclusivity of the message consumed at consumer.</li>\n</ul>\n\n<p>What is happening in your case is, more than 1 consumer is listening to same partitions so all the consumers who are listening to same partitions within same consumer group also, will receive messages from that partition. So mutual exclusivity between consumers in a consumer group is lost due to more than 1 consumer is listening same partitions.</p>\n"}],"owner":{"account_id":172595,"reputation":1196,"user_id":400723,"accept_rate":95,"display_name":"Derek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4691,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56552126,"answer_count":2,"score":2,"last_activity_date":1660996066,"creation_date":1560285517,"question_id":56551368,"body_markdown":"I have a kafka listener configured in our Spring Boot application as follows:\r\n\r\n    @KafkaListener(topicPartitions = @TopicPartition(topic = &#39;data.all&#39;, partitions = { &quot;0&quot;, &quot;1&quot;, &quot;2&quot; }), groupId = &quot;kms&quot;)\r\n    public void listen(ObjectNode message) throws JsonProcessingException {\r\n        // Code to convert to json string and write to ElasticSearch\r\n    }\r\n\r\nThis application gets deployed to and run on 3 servers and, despite all having the group id of `kms`, they all get a copy of the message which means I get 3 identical records in Elastic. When I&#39;m running an instance locally, 4 copies get written.\r\n\r\nI&#39;ve confirmed that the producer is only writing 1 message to the topic by checking the count of all messages on the topic before and after the write occurs; it only increases by 1. How can I prevent this?","title":"Multiple Kafka Listeners With Same GroupId All Receiving Message","body":"<p>I have a kafka listener configured in our Spring Boot application as follows:</p>\n\n<pre><code>@KafkaListener(topicPartitions = @TopicPartition(topic = 'data.all', partitions = { \"0\", \"1\", \"2\" }), groupId = \"kms\")\npublic void listen(ObjectNode message) throws JsonProcessingException {\n    // Code to convert to json string and write to ElasticSearch\n}\n</code></pre>\n\n<p>This application gets deployed to and run on 3 servers and, despite all having the group id of <code>kms</code>, they all get a copy of the message which means I get 3 identical records in Elastic. When I'm running an instance locally, 4 copies get written.</p>\n\n<p>I've confirmed that the producer is only writing 1 message to the topic by checking the count of all messages on the topic before and after the write occurs; it only increases by 1. How can I prevent this?</p>\n"},{"tags":["java","spring-boot","ehcache","spring-micrometer"],"answers":[{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660995460,"creation_date":1660992670,"answer_id":73426051,"question_id":70178625,"body_markdown":"If you have `spring-boot-starter-cache` also in the classpath, you have access to the metrics defined by `micrometer` in [JCacheMetrics](https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/cache/JCacheMetrics.java#L132-L135) and [CacheMeterBinder](https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/cache/CacheMeterBinder.java#L58-L88) classes. You can access them by injecting a `MeterRegistry` bean. Code to log the metrics could look like below:\r\n\r\n```java\r\nimport java.util.Collections;\r\nimport java.util.Map;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport io.micrometer.core.instrument.FunctionCounter;\r\nimport io.micrometer.core.instrument.Gauge;\r\nimport io.micrometer.core.instrument.Meter;\r\nimport io.micrometer.core.instrument.MeterRegistry;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@Slf4j\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class CacheUtil {\r\n    private final MeterRegistry meterRegistry;\r\n\r\n    public void logCacheMetrics() {\r\n        LOGGER.info(&quot;Cache metrics: size={}, hits={}, misses={}, puts={}, evictions={}, removals={}&quot;,\r\n                getGaugeValue(&quot;cache.size&quot;),\r\n                getFunctionCounterValue(&quot;cache.gets&quot;, Collections.singletonMap(&quot;result&quot;, &quot;hit&quot;)),\r\n                getFunctionCounterValue(&quot;cache.gets&quot;, Collections.singletonMap(&quot;result&quot;, &quot;miss&quot;)),\r\n                getFunctionCounterValue(&quot;cache.puts&quot;),\r\n                getFunctionCounterValue(&quot;cache.evictions&quot;),\r\n                getGaugeValue(&quot;cache.removals&quot;));\r\n    }\r\n\r\n    private Meter getMeter(String meterName, Map&lt;String, String&gt; tags) {\r\n        return meterRegistry.getMeters().stream()\r\n                .filter(meter -&gt; meter.getId().getName().equals(meterName) &amp;&amp;\r\n                        (tags.isEmpty()\r\n                                || tags.entrySet().stream()\r\n                                        .allMatch(inputTag -&gt; meter.getId().getTags().stream()\r\n                                                .anyMatch(meterTag -&gt; meterTag.getKey().equals(inputTag.getKey())\r\n                                                        &amp;&amp; meterTag.getValue().equals(inputTag.getValue())))))\r\n                .findFirst()\r\n                .orElse(null);\r\n    }\r\n\r\n    private double getGaugeValue(String gaugeName) {\r\n        Gauge gauge = (Gauge) getMeter(gaugeName, Collections.emptyMap());\r\n\r\n        return gauge != null ? gauge.value() : 0;\r\n    }\r\n\r\n    private double getFunctionCounterValue(String counterName, Map&lt;String, String&gt; tags) {\r\n        FunctionCounter counter = (FunctionCounter) getMeter(counterName, tags);\r\n\r\n        return counter != null ? counter.count() : 0;\r\n    }\r\n\r\n    private double getFunctionCounterValue(String counterName) {\r\n        return getFunctionCounterValue(counterName, Collections.emptyMap());\r\n    }\r\n}\r\n```\r\n\r\nThis produces logs that look something like below:\r\n\r\n```\r\n06:34:53.821 [http-nio-8080-exec-6] INFO  i.g.d.u.CacheUtil - Cache metrics: size=0.0, hits=12.0, misses=2.0, puts=2.0, evictions=0.0, removals=0.0\r\n06:34:54.257 [http-nio-8080-exec-7] INFO  i.g.d.u.CacheUtil - Cache metrics: size=0.0, hits=13.0, misses=2.0, puts=2.0, evictions=0.0, removals=0.0\r\n```\r\n\r\nNote that as these metrics are common to different cache implementations, some metrics(like size and evictions in this case) might show as 0 as they might not have been recorded for Ehcache. Sample application that logs these metrics at runtime can be found on [github](https://github.com/devatherock/spring-boot-demo/tree/ehcache)","title":"Spring Boot 2.x Batch application, how to access Micrometer cache metrics for logging?","body":"<p>If you have <code>spring-boot-starter-cache</code> also in the classpath, you have access to the metrics defined by <code>micrometer</code> in <a href=\"https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/cache/JCacheMetrics.java#L132-L135\" rel=\"nofollow noreferrer\">JCacheMetrics</a> and <a href=\"https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/cache/CacheMeterBinder.java#L58-L88\" rel=\"nofollow noreferrer\">CacheMeterBinder</a> classes. You can access them by injecting a <code>MeterRegistry</code> bean. Code to log the metrics could look like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Collections;\nimport java.util.Map;\n\nimport org.springframework.stereotype.Component;\n\nimport io.micrometer.core.instrument.FunctionCounter;\nimport io.micrometer.core.instrument.Gauge;\nimport io.micrometer.core.instrument.Meter;\nimport io.micrometer.core.instrument.MeterRegistry;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\n@Component\n@RequiredArgsConstructor\npublic class CacheUtil {\n    private final MeterRegistry meterRegistry;\n\n    public void logCacheMetrics() {\n        LOGGER.info(&quot;Cache metrics: size={}, hits={}, misses={}, puts={}, evictions={}, removals={}&quot;,\n                getGaugeValue(&quot;cache.size&quot;),\n                getFunctionCounterValue(&quot;cache.gets&quot;, Collections.singletonMap(&quot;result&quot;, &quot;hit&quot;)),\n                getFunctionCounterValue(&quot;cache.gets&quot;, Collections.singletonMap(&quot;result&quot;, &quot;miss&quot;)),\n                getFunctionCounterValue(&quot;cache.puts&quot;),\n                getFunctionCounterValue(&quot;cache.evictions&quot;),\n                getGaugeValue(&quot;cache.removals&quot;));\n    }\n\n    private Meter getMeter(String meterName, Map&lt;String, String&gt; tags) {\n        return meterRegistry.getMeters().stream()\n                .filter(meter -&gt; meter.getId().getName().equals(meterName) &amp;&amp;\n                        (tags.isEmpty()\n                                || tags.entrySet().stream()\n                                        .allMatch(inputTag -&gt; meter.getId().getTags().stream()\n                                                .anyMatch(meterTag -&gt; meterTag.getKey().equals(inputTag.getKey())\n                                                        &amp;&amp; meterTag.getValue().equals(inputTag.getValue())))))\n                .findFirst()\n                .orElse(null);\n    }\n\n    private double getGaugeValue(String gaugeName) {\n        Gauge gauge = (Gauge) getMeter(gaugeName, Collections.emptyMap());\n\n        return gauge != null ? gauge.value() : 0;\n    }\n\n    private double getFunctionCounterValue(String counterName, Map&lt;String, String&gt; tags) {\n        FunctionCounter counter = (FunctionCounter) getMeter(counterName, tags);\n\n        return counter != null ? counter.count() : 0;\n    }\n\n    private double getFunctionCounterValue(String counterName) {\n        return getFunctionCounterValue(counterName, Collections.emptyMap());\n    }\n}\n</code></pre>\n<p>This produces logs that look something like below:</p>\n<pre><code>06:34:53.821 [http-nio-8080-exec-6] INFO  i.g.d.u.CacheUtil - Cache metrics: size=0.0, hits=12.0, misses=2.0, puts=2.0, evictions=0.0, removals=0.0\n06:34:54.257 [http-nio-8080-exec-7] INFO  i.g.d.u.CacheUtil - Cache metrics: size=0.0, hits=13.0, misses=2.0, puts=2.0, evictions=0.0, removals=0.0\n</code></pre>\n<p>Note that as these metrics are common to different cache implementations, some metrics(like size and evictions in this case) might show as 0 as they might not have been recorded for Ehcache. Sample application that logs these metrics at runtime can be found on <a href=\"https://github.com/devatherock/spring-boot-demo/tree/ehcache\" rel=\"nofollow noreferrer\">github</a></p>\n"}],"owner":{"account_id":910975,"reputation":14592,"user_id":944849,"accept_rate":87,"display_name":"user944849"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":500,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660995460,"creation_date":1638327650,"question_id":70178625,"body_markdown":"Using Spring Boot 2.5.7, Micrometer 1.7.6, Ehcache 3.9.7, and have `spring-boot-starter-actuator` on the classpath. I&#39;m building a _batch_ application (not a web app, no exposed actuator APIs). I have an `ehcache.xml` configured to enable statistics:\r\n\r\n```lang-xml\r\n    &lt;eh:service&gt;\r\n        &lt;jsr107:defaults enable-management=&quot;true&quot; enable-statistics=&quot;true&quot;/&gt;\r\n    &lt;/eh:service&gt;\r\n\r\n    &lt;eh:cache alias=&quot;myCache&quot; uses-template=&quot;default&quot;&gt;\r\n      &lt;eh:key-type&gt;java.lang.String&lt;/eh:key-type&gt;\r\n      &lt;eh:value-type&gt;java.lang.String&lt;/eh:value-type&gt;\r\n      &lt;eh:listeners&gt;\r\n        &lt;eh:listener&gt;\r\n          &lt;eh:class&gt;com.company.package.MyListener&lt;/eh:class&gt;\r\n          &lt;!-- more event config ... --&gt;\r\n        &lt;/eh:listener&gt;\r\n      &lt;/eh:listeners&gt;\r\n    &lt;/eh:cache&gt;\r\n```\r\n\r\nI would like to code the listener to periodically write cache statistics to a log. Pseudocode would look something like:\r\n\r\n```lang-java\r\n    @Autowired\r\n    CacheManager mgr;  \r\n\r\n    mgr.getCacheNames().forEach( cacheName -&gt; {\r\n        writeCacheStats(cacheName);\r\n    });\r\n\r\n    void writeCacheStats(String cacheName) {\r\n        // get statistics for cacheName from Micrometer or Boot... HOW?\r\n        // write statistics to log\r\n    }\r\n```\r\n\r\nI have combed through Spring Boot Actuator and Micrometer docs plus several blog posts and cannot figure out how to do this. Most of the docs seem to assume one is monitoring via APIs, which is not what I need. It seems like a basic use case so I suspect I&#39;m missing something obvious. I&#39;m hoping someone can point me in the right direction.","title":"Spring Boot 2.x Batch application, how to access Micrometer cache metrics for logging?","body":"<p>Using Spring Boot 2.5.7, Micrometer 1.7.6, Ehcache 3.9.7, and have <code>spring-boot-starter-actuator</code> on the classpath. I'm building a <em>batch</em> application (not a web app, no exposed actuator APIs). I have an <code>ehcache.xml</code> configured to enable statistics:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;eh:service&gt;\n        &lt;jsr107:defaults enable-management=&quot;true&quot; enable-statistics=&quot;true&quot;/&gt;\n    &lt;/eh:service&gt;\n\n    &lt;eh:cache alias=&quot;myCache&quot; uses-template=&quot;default&quot;&gt;\n      &lt;eh:key-type&gt;java.lang.String&lt;/eh:key-type&gt;\n      &lt;eh:value-type&gt;java.lang.String&lt;/eh:value-type&gt;\n      &lt;eh:listeners&gt;\n        &lt;eh:listener&gt;\n          &lt;eh:class&gt;com.company.package.MyListener&lt;/eh:class&gt;\n          &lt;!-- more event config ... --&gt;\n        &lt;/eh:listener&gt;\n      &lt;/eh:listeners&gt;\n    &lt;/eh:cache&gt;\n</code></pre>\n<p>I would like to code the listener to periodically write cache statistics to a log. Pseudocode would look something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Autowired\n    CacheManager mgr;  \n\n    mgr.getCacheNames().forEach( cacheName -&gt; {\n        writeCacheStats(cacheName);\n    });\n\n    void writeCacheStats(String cacheName) {\n        // get statistics for cacheName from Micrometer or Boot... HOW?\n        // write statistics to log\n    }\n</code></pre>\n<p>I have combed through Spring Boot Actuator and Micrometer docs plus several blog posts and cannot figure out how to do this. Most of the docs seem to assume one is monitoring via APIs, which is not what I need. It seems like a basic use case so I suspect I'm missing something obvious. I'm hoping someone can point me in the right direction.</p>\n"},{"tags":["java","global-variables","void"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1660988597,"post_id":73425583,"comment_id":129667014,"body_markdown":"There are no restrictions on local variables so you can use one when calculating the squared sum, so you can leave m unchanged.","body":"There are no restrictions on local variables so you can use one when calculating the squared sum, so you can leave m unchanged."}],"answers":[{"tags":[],"owner":{"account_id":26114270,"reputation":11,"user_id":19807661,"display_name":"a_imr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660994124,"creation_date":1660994124,"answer_id":73426215,"question_id":73425583,"body_markdown":"Your assignment does not ask for static variables. It only says that the class Beam should have two instance variables i.e. m &amp; sum. You can always use local variables within the functions and store values in those.\r\n\r\nThe following steps should solve the problem:\r\n\r\n 1. You do not have to make m &amp; sum static. Same goes for all the functions. Static functions can be called without making an object of the class. This would not be the case here.\r\n 2. You don&#39;t need the int flag = m; line either. Delete that.\r\n 3. Instead of modifying m, create a local variable within the function initially initialized to the value of m and then modify that variable instead. It&#39;s completely okay to do that. You can create as many local variables as you want and still meet the conditions for this assignment.\r\n 4. Create a separate class called main for the main function. Create an instance of the beam class there and call the functions.\r\n\r\nHere&#39;s the code for how I solved this problem:\r\n\r\nP.S. Your logic for the squareSum function is also correct. Just don&#39;t modify m. Create a local variable instead (I created quot in my code). \r\n\r\n    import java.util.*;\r\n    \r\n    class Beam\r\n    {\r\n        int m;\r\n        int sum;\r\n        \r\n        public Beam()\r\n        {\r\n            m = 0;\r\n            sum = 0;\r\n        }\r\n        \r\n        void getNum()\r\n        {\r\n            System.out.print(&quot;Enter a number  &quot;);\r\n            Scanner sc = new Scanner(System.in);\r\n            this.m = sc.nextInt();\r\n        }\r\n        \r\n        void squareSum()\r\n        {\r\n            int mod, quot = m, div = 10;\r\n            \r\n            while(quot &gt;= div/10 )\r\n            {\r\n                mod = quot%div;\r\n                sum = sum + mod*mod;\r\n                quot = quot/div;\r\n            }\r\n        }\r\n        \r\n        void isBeam()\r\n        {\r\n            if(sum&gt;m)\r\n            {\r\n                System.out.println(&quot;The integer &quot; + m + &quot; is a beam number&quot;);\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;The integer &quot; + m + &quot; is not a beam number&quot;);\r\n            }\r\n        }\r\n    }\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            Beam b = new Beam();\r\n            b.getNum();\r\n            b.squareSum();\r\n            b.isBeam();\r\n            \r\n        }\r\n    }\r\n","title":"Beam number program seems impossible to write using multiple void methods","body":"<p>Your assignment does not ask for static variables. It only says that the class Beam should have two instance variables i.e. m &amp; sum. You can always use local variables within the functions and store values in those.</p>\n<p>The following steps should solve the problem:</p>\n<ol>\n<li>You do not have to make m &amp; sum static. Same goes for all the functions. Static functions can be called without making an object of the class. This would not be the case here.</li>\n<li>You don't need the int flag = m; line either. Delete that.</li>\n<li>Instead of modifying m, create a local variable within the function initially initialized to the value of m and then modify that variable instead. It's completely okay to do that. You can create as many local variables as you want and still meet the conditions for this assignment.</li>\n<li>Create a separate class called main for the main function. Create an instance of the beam class there and call the functions.</li>\n</ol>\n<p>Here's the code for how I solved this problem:</p>\n<p>P.S. Your logic for the squareSum function is also correct. Just don't modify m. Create a local variable instead (I created quot in my code).</p>\n<pre><code>import java.util.*;\n\nclass Beam\n{\n    int m;\n    int sum;\n    \n    public Beam()\n    {\n        m = 0;\n        sum = 0;\n    }\n    \n    void getNum()\n    {\n        System.out.print(&quot;Enter a number  &quot;);\n        Scanner sc = new Scanner(System.in);\n        this.m = sc.nextInt();\n    }\n    \n    void squareSum()\n    {\n        int mod, quot = m, div = 10;\n        \n        while(quot &gt;= div/10 )\n        {\n            mod = quot%div;\n            sum = sum + mod*mod;\n            quot = quot/div;\n        }\n    }\n    \n    void isBeam()\n    {\n        if(sum&gt;m)\n        {\n            System.out.println(&quot;The integer &quot; + m + &quot; is a beam number&quot;);\n        }\n        else\n        {\n            System.out.println(&quot;The integer &quot; + m + &quot; is not a beam number&quot;);\n        }\n    }\n}\n\nclass Main {\n    public static void main(String[] args) {\n        Beam b = new Beam();\n        b.getNum();\n        b.squareSum();\n        b.isBeam();\n        \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25074637,"reputation":1,"user_id":18928177,"display_name":"Gobardas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660994124,"creation_date":1660988112,"question_id":73425583,"body_markdown":"A Beam number is a number in which the sum of the squares of the digits of the number is larger than the number itself.\r\n\r\nFor example: In the no. 25, sum of the square of digits = 2^2 + 5^2 = 4 + 25 = 29 (greater than the number accepted)\r\n\r\nHence 25 is a Beam number.\r\n\r\nI am a student and am trying to write a program for a practical assignment, but I can&#39;t seem to find any solutions. Here is a picture of the assignment: [Assignment pic][1]\r\n\r\nHere is my attempt:\r\n\r\n    import java.util.Scanner;\r\n    class Beam3meth\r\n    {\r\n        static int sum,m;\r\n        public static void getNum()\r\n        {\r\n            System.out.println(&quot;\\f&quot;);//clearing the screen\r\n            Scanner sc= new Scanner(System.in);\r\n            System.out.println(&quot;Enter the number&quot;);\r\n            m = sc.nextInt(); \r\n            int flag = m;\r\n        }\r\n        public static void squareSum()\r\n        {\r\n            sum  = 0;\r\n            while (m &gt; 0)\r\n            {\r\n                sum = sum + (m%10)*(m%10);\r\n                m = m/10;\r\n            }\r\n        }\r\n        public static void isBeam()\r\n        {\r\n            if (sum &gt; flag)\r\n            {\r\n                System.out.println(&quot;It is a Beam number&quot;);\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;It is not a Beam number&quot;);\r\n            }\r\n        }\r\n        public static void main()\r\n        {\r\n            Beam3meth obj = new Beam3meth();\r\n            obj.getNum();\r\n            obj.squareSum();\r\n            obj.isBeam();\r\n            \r\n        }\r\n        \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aNZ7J.png\r\n\r\n\r\nThe problem is that there can only be 2 global variables (which have to be used in 2 or more methods), as specified in the assignment details. But then there is also flag variable (which is used to copy m&#39;s value before it gets reduced to 0), which has to be used in 2 methods. All 3 methods have to be void as well, so you can&#39;t do any Call By Reference / return a value. What changes should I make so as to accommodate all restrictions?","title":"Beam number program seems impossible to write using multiple void methods","body":"<p>A Beam number is a number in which the sum of the squares of the digits of the number is larger than the number itself.</p>\n<p>For example: In the no. 25, sum of the square of digits = 2^2 + 5^2 = 4 + 25 = 29 (greater than the number accepted)</p>\n<p>Hence 25 is a Beam number.</p>\n<p>I am a student and am trying to write a program for a practical assignment, but I can't seem to find any solutions. Here is a picture of the assignment: <a href=\"https://i.stack.imgur.com/aNZ7J.png\" rel=\"nofollow noreferrer\">Assignment pic</a></p>\n<p>Here is my attempt:</p>\n<pre><code>import java.util.Scanner;\nclass Beam3meth\n{\n    static int sum,m;\n    public static void getNum()\n    {\n        System.out.println(&quot;\\f&quot;);//clearing the screen\n        Scanner sc= new Scanner(System.in);\n        System.out.println(&quot;Enter the number&quot;);\n        m = sc.nextInt(); \n        int flag = m;\n    }\n    public static void squareSum()\n    {\n        sum  = 0;\n        while (m &gt; 0)\n        {\n            sum = sum + (m%10)*(m%10);\n            m = m/10;\n        }\n    }\n    public static void isBeam()\n    {\n        if (sum &gt; flag)\n        {\n            System.out.println(&quot;It is a Beam number&quot;);\n        }\n        else\n        {\n            System.out.println(&quot;It is not a Beam number&quot;);\n        }\n    }\n    public static void main()\n    {\n        Beam3meth obj = new Beam3meth();\n        obj.getNum();\n        obj.squareSum();\n        obj.isBeam();\n        \n    }\n    \n}\n</code></pre>\n<p>The problem is that there can only be 2 global variables (which have to be used in 2 or more methods), as specified in the assignment details. But then there is also flag variable (which is used to copy m's value before it gets reduced to 0), which has to be used in 2 methods. All 3 methods have to be void as well, so you can't do any Call By Reference / return a value. What changes should I make so as to accommodate all restrictions?</p>\n"},{"tags":["java","android","broadcastreceiver","sms","smsmanager"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":1,"creation_date":1647003719,"post_id":71436647,"comment_id":126269672,"body_markdown":"I&#39;m not sure if I understand exactly what you&#39;re asking, but your app only works with SMS specifically. It does not work with MMS, RCS, or whatever other types of messages that your actual messaging app can handle. Are you sure that the messages you&#39;re missing are SMS? Most messaging apps these days rarely use SMS all the time, but those are the only ones that you have any access to. You can&#39;t really spy on user&#39;s messages anymore without being their main SMS app, and therefore a full-blown messaging client.","body":"I&#39;m not sure if I understand exactly what you&#39;re asking, but your app only works with SMS specifically. It does not work with MMS, RCS, or whatever other types of messages that your actual messaging app can handle. Are you sure that the messages you&#39;re missing are SMS? Most messaging apps these days rarely use SMS all the time, but those are the only ones that you have any access to. You can&#39;t really spy on user&#39;s messages anymore without being their main SMS app, and therefore a full-blown messaging client."}],"answers":[{"tags":[],"owner":{"account_id":14877845,"reputation":59,"user_id":10743418,"display_name":"Lin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1647397332,"creation_date":1646993144,"answer_id":71436814,"question_id":71436647,"body_markdown":"already register your receiver yet?\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        \r\n        registerReceiver(messageReciver , new  IntentFilter(YOUR FILTER));\r\n    }\r\n---------------------\r\ntry this\r\n\r\nAndroidManifest.xml\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_SMS&quot;/&gt;\r\n\r\n    &lt;application&gt;\r\n        // add this\r\n        &lt;receiver android:name=&quot;.MessageReciver&quot;&gt;\r\n            &lt;intent-filter android:priority=&quot;1&quot;&gt;\r\n                &lt;action android:name=&quot;android.provider.Telephony.SMS_RECEIVED&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n         &lt;/receiver&gt;\r\n    &lt;/application&gt;\r\n\r\n\r\nMainActivity.java \r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        \r\n        if ( ContextCompat.checkSelfPermission(\r\n                this,\r\n                Manifest.permission.RECEIVE_SMS\r\n        ) != PackageManager.PERMISSION_GRANTED\r\n        ) {\r\n            ActivityCompat.requestPermissions(this, new String[]{ Manifest.permission.RECEIVE_SMS}, 1);\r\n        }\r\n    }","title":"Broadcast Receiver Not receive messages from Mobile default messags application Why?","body":"<p>already register your receiver yet?</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    \n    registerReceiver(messageReciver , new  IntentFilter(YOUR FILTER));\n}\n</code></pre>\n<hr />\n<p>try this</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.RECEIVE_SMS&quot;/&gt;\n\n&lt;application&gt;\n    // add this\n    &lt;receiver android:name=&quot;.MessageReciver&quot;&gt;\n        &lt;intent-filter android:priority=&quot;1&quot;&gt;\n            &lt;action android:name=&quot;android.provider.Telephony.SMS_RECEIVED&quot; /&gt;\n        &lt;/intent-filter&gt;\n     &lt;/receiver&gt;\n&lt;/application&gt;\n</code></pre>\n<p>MainActivity.java</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    \n    if ( ContextCompat.checkSelfPermission(\n            this,\n            Manifest.permission.RECEIVE_SMS\n    ) != PackageManager.PERMISSION_GRANTED\n    ) {\n        ActivityCompat.requestPermissions(this, new String[]{ Manifest.permission.RECEIVE_SMS}, 1);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26114363,"reputation":11,"user_id":19807745,"display_name":"Marian Kulisch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660991257,"creation_date":1660991257,"answer_id":73425892,"question_id":71436647,"body_markdown":"It&#39;s true, since some month before I have the same problem. If wifi is off and LTE is off, then MMS and SMS actions are broadcasted with sms_received or wap_push_received are recognized by broadcast receiver intent.\r\n\r\nIn new Smartphones these messages are marked by green color. \r\n\r\nBut if the sender phone turn on wifi or turn on LTE data mode, then shit happens.\r\n\r\nThese sms or mms over wifi or over LTE are now CHAT messages. These chat messages are not broadcasted by sms_received or wap_push_received. These CHAT messages are blue marked on modern phones. If you try to send messages (sms or mms) to an smartphone with wifi off or LTE off, you will be informed that now your messages will be send only as normal SMS or MMS.\r\n\r\nYou can find these CHAT messages over contentresolver content://im/chat\r\n\r\nUnfortunately I doesn&#39;t know yet, how to receive broadcasted chat messages. For now I pull every 1 second the contentresolver for new chat messages.","title":"Broadcast Receiver Not receive messages from Mobile default messags application Why?","body":"<p>It's true, since some month before I have the same problem. If wifi is off and LTE is off, then MMS and SMS actions are broadcasted with sms_received or wap_push_received are recognized by broadcast receiver intent.</p>\n<p>In new Smartphones these messages are marked by green color.</p>\n<p>But if the sender phone turn on wifi or turn on LTE data mode, then shit happens.</p>\n<p>These sms or mms over wifi or over LTE are now CHAT messages. These chat messages are not broadcasted by sms_received or wap_push_received. These CHAT messages are blue marked on modern phones. If you try to send messages (sms or mms) to an smartphone with wifi off or LTE off, you will be informed that now your messages will be send only as normal SMS or MMS.</p>\n<p>You can find these CHAT messages over contentresolver content://im/chat</p>\n<p>Unfortunately I doesn't know yet, how to receive broadcasted chat messages. For now I pull every 1 second the contentresolver for new chat messages.</p>\n"}],"owner":{"account_id":22144548,"reputation":77,"user_id":16394065,"display_name":"preeti"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":867,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":71436814,"answer_count":2,"score":-1,"last_activity_date":1660991257,"creation_date":1646992328,"question_id":71436647,"body_markdown":"In BroadcastReceiver i want to receive sms from default Mobile application.\r\n\r\nBut when user send sms without internet connect then i receive, but when user (send sms via wifi or Mobile Network) i unable to read message.    \r\n\r\n    \r\n    public class MessageReciver extends BroadcastReceiver {\r\n\r\n    private static MessageListener mListener;\r\n    public static final String reciveSMS=&quot;android.provider.Telephony.SMS_RECEIVED&quot;;\r\n    public static final String TAG =&quot;SmsBroadcastReceiver&quot;;\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        Log.i(&quot;fsdfdsfdsfdgfdsg  &quot;,&quot;  rerwerw&quot;);\r\n        if (intent.getAction().equals(&quot;android.provider.Telephony.SMS_RECEIVED&quot;)) {\r\n            Bundle data = intent.getExtras();\r\n            Object[] pdus = (Object[]) data.get(&quot;pdus&quot;);\r\n            String formate = data.getString(&quot;format&quot;);\r\n\r\n            for (int i = 0; i &lt; pdus.length; i++) {\r\n                SmsMessage smsMessage = null;\r\n                if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.M) \r\n                 {\r\n                    smsMessage = SmsMessage.createFromPdu((byte[]) pdus[i], formate);\r\n                } else {\r\n                    smsMessage = SmsMessage.createFromPdu((byte[]) pdus[i]);\r\n                }\r\n                String message = smsMessage.getMessageBody();\r\n                Toast.makeText(context, &quot;Message Received: &quot; + message, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n   }\r\n\r\nI have&#39;t understand why i face this problem , because Broadcast receiver can send or receive broadcast messages from the Android system and other Android apps. It only receive (sms without using internet), But every mobile messages application have default enable option(Use wifi or data for messaging when available).\r\n \r\n  Anyone please help ***receive sms from default Mobile Messages Application***\r\n\r\n","title":"Broadcast Receiver Not receive messages from Mobile default messags application Why?","body":"<p>In BroadcastReceiver i want to receive sms from default Mobile application.</p>\n<p>But when user send sms without internet connect then i receive, but when user (send sms via wifi or Mobile Network) i unable to read message.</p>\n<pre><code>public class MessageReciver extends BroadcastReceiver {\n\nprivate static MessageListener mListener;\npublic static final String reciveSMS=&quot;android.provider.Telephony.SMS_RECEIVED&quot;;\npublic static final String TAG =&quot;SmsBroadcastReceiver&quot;;\n@Override\npublic void onReceive(Context context, Intent intent) {\n    Log.i(&quot;fsdfdsfdsfdgfdsg  &quot;,&quot;  rerwerw&quot;);\n    if (intent.getAction().equals(&quot;android.provider.Telephony.SMS_RECEIVED&quot;)) {\n        Bundle data = intent.getExtras();\n        Object[] pdus = (Object[]) data.get(&quot;pdus&quot;);\n        String formate = data.getString(&quot;format&quot;);\n\n        for (int i = 0; i &lt; pdus.length; i++) {\n            SmsMessage smsMessage = null;\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.M) \n             {\n                smsMessage = SmsMessage.createFromPdu((byte[]) pdus[i], formate);\n            } else {\n                smsMessage = SmsMessage.createFromPdu((byte[]) pdus[i]);\n            }\n            String message = smsMessage.getMessageBody();\n            Toast.makeText(context, &quot;Message Received: &quot; + message, Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>I have't understand why i face this problem , because Broadcast receiver can send or receive broadcast messages from the Android system and other Android apps. It only receive (sms without using internet), But every mobile messages application have default enable option(Use wifi or data for messaging when available).</p>\n<p>Anyone please help <em><strong>receive sms from default Mobile Messages Application</strong></em></p>\n"},{"tags":["java","mongodb","spring-boot","mongotemplate"],"answers":[{"tags":[],"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1592540668,"creation_date":1592540668,"answer_id":62463234,"question_id":62461582,"body_markdown":"An example:\r\n\r\nConsider a document in a collection:\r\n\r\n    { _id: 1234, name: &quot;J. Doe&quot;, colors: [ &quot;red&quot;, &quot;black&quot; ] }\r\n\r\nAnd the following aggregation from the `mongo` shell:\r\n\r\n    db.collection.agregate( [\r\n      { $project: { _id: 0, colors: 1 } }\r\n    ] )\r\n\r\nThis returns: `{ &quot;colors&quot; : [ &quot;red&quot;, &quot;black&quot; ] }`\r\n\r\nThis can also be run with the following command:\r\n\r\n    db.runCommand( { \r\n      aggregate: &quot;collection&quot;, \r\n      pipeline: [ { $project: { _id: 0, colors: 1 } } ],  \r\n      cursor: { } \r\n    } )\r\n\r\nAnd, its translation using Spring Data&#39;s `MongoTemplate`:\r\n\r\n    String jsonCommand = &quot;{ aggregate: &#39;collection&#39;, pipeline: [ { $project: { _id: 0, colors: 1 } } ], cursor: { } }&quot;;\r\n    Document resultDoc = mongoTemplate.executeCommand(jsonCommand);\r\n\r\n\r\nThe output document `resultDoc` has a format like the following:\r\n\r\n    {\r\n            &quot;cursor&quot; : {\r\n                    &quot;firstBatch&quot; : [\r\n                            {\r\n                                    &quot;colors&quot; : [\r\n                                            &quot;red&quot;,\r\n                                            &quot;black&quot;\r\n                                    ]\r\n                            }\r\n                    ],\r\n                    &quot;id&quot; : NumberLong(0),\r\n                    &quot;ns&quot; : &quot;test.colors&quot;\r\n            },\r\n            &quot;ok&quot; : 1\r\n    }\r\n\r\nTo know more about the `db.runCommand(...)` method see MongoDB documentation at: [Database Commands](https://docs.mongodb.com/manual/reference/command/) and [Database Command Aggregate](https://docs.mongodb.com/manual/reference/command/aggregate/#dbcmd.aggregate).","title":"How to execute a complex MongoDB native query from Java Springboot","body":"<p>An example:</p>\n\n<p>Consider a document in a collection:</p>\n\n<pre><code>{ _id: 1234, name: \"J. Doe\", colors: [ \"red\", \"black\" ] }\n</code></pre>\n\n<p>And the following aggregation from the <code>mongo</code> shell:</p>\n\n<pre><code>db.collection.agregate( [\n  { $project: { _id: 0, colors: 1 } }\n] )\n</code></pre>\n\n<p>This returns: <code>{ \"colors\" : [ \"red\", \"black\" ] }</code></p>\n\n<p>This can also be run with the following command:</p>\n\n<pre><code>db.runCommand( { \n  aggregate: \"collection\", \n  pipeline: [ { $project: { _id: 0, colors: 1 } } ],  \n  cursor: { } \n} )\n</code></pre>\n\n<p>And, its translation using Spring Data's <code>MongoTemplate</code>:</p>\n\n<pre><code>String jsonCommand = \"{ aggregate: 'collection', pipeline: [ { $project: { _id: 0, colors: 1 } } ], cursor: { } }\";\nDocument resultDoc = mongoTemplate.executeCommand(jsonCommand);\n</code></pre>\n\n<p>The output document <code>resultDoc</code> has a format like the following:</p>\n\n<pre><code>{\n        \"cursor\" : {\n                \"firstBatch\" : [\n                        {\n                                \"colors\" : [\n                                        \"red\",\n                                        \"black\"\n                                ]\n                        }\n                ],\n                \"id\" : NumberLong(0),\n                \"ns\" : \"test.colors\"\n        },\n        \"ok\" : 1\n}\n</code></pre>\n\n<p>To know more about the <code>db.runCommand(...)</code> method see MongoDB documentation at: <a href=\"https://docs.mongodb.com/manual/reference/command/\" rel=\"nofollow noreferrer\">Database Commands</a> and <a href=\"https://docs.mongodb.com/manual/reference/command/aggregate/#dbcmd.aggregate\" rel=\"nofollow noreferrer\">Database Command Aggregate</a>.</p>\n"}],"owner":{"account_id":3605284,"reputation":578,"user_id":3007581,"accept_rate":29,"display_name":"Sameera Manorathna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5730,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660989358,"creation_date":1592527403,"question_id":62461582,"body_markdown":"I have a bit of a complex query of view creation using 3 collections. The query is written in the native level. I need that query to be executed from Java and is there any way that I can execute these types of queries from Java level. Maybe a function that takes a MongoDB native query as a string and executes that on the database level\r\n\r\n    db.createView(&#39;TARGET_COLLECTION&#39;, &#39;SOURCE_COLLECTION_1&#39;, [\r\n      {\r\n        $facet: {\r\n          SOURCE_COLLECTION_1: [\r\n            {$match: {}},\r\n            { $project: { &quot;sourceId&quot;:  {$toString: &quot;$_id&quot;}, &quot;name&quot;: 1, &quot;image&quot;: &quot;$logo&quot; }}\r\n          ],\r\n          SOURCE_COLLECTION_2: [\r\n            {$limit: 1},\r\n            {\r\n              $lookup: {\r\n                from: &#39;SOURCE_COLLECTION_2&#39;,\r\n                localField: &#39;__unexistingfield&#39;,\r\n                foreignField: &#39;__unexistingfield&#39;,\r\n                as: &#39;__col2&#39;\r\n              }\r\n            },\r\n            {$unwind: &#39;$__col2&#39;},\r\n            {$replaceRoot: {newRoot: &#39;$__col2&#39;}},\r\n            { $project: { &quot;sourceId&quot;: {$toString: &quot;$_id&quot;}, &quot;name&quot;: 1, &quot;image&quot;: 1 }}\r\n          ],\r\n    \t  SOURCE_COLLECTION_3: [\r\n            {$limit: 1},\r\n            {\r\n              $lookup: {\r\n                from: &#39;SOURCE_COLLECTION_3&#39;,\r\n                localField: &#39;__unexistingfield&#39;,\r\n                foreignField: &#39;__unexistingfield&#39;,\r\n                as: &#39;__col2&#39;\r\n              }\r\n            },\r\n            {$unwind: &#39;$__col2&#39;},\r\n            {$replaceRoot: {newRoot: &#39;$__col2&#39;}},\r\n            { $project: { &quot;sourceId&quot;:  {$toString: &quot;$_id&quot;}, &quot;name&quot;: 1, &quot;image&quot;: &quot;$logo&quot; }}\r\n          ]\r\n        },\r\n      },\r\n      {$project: {data: {$concatArrays: [&#39;$SOURCE_COLLECTION_1&#39;, &#39;$SOURCE_COLLECTION_2&#39;, &#39;$SOURCE_COLLECTION_3&#39;]}}},\r\n      {$unwind: &#39;$data&#39;},\r\n      {$replaceRoot: {newRoot: &#39;$data&#39;}}\r\n    ])","title":"How to execute a complex MongoDB native query from Java Springboot","body":"<p>I have a bit of a complex query of view creation using 3 collections. The query is written in the native level. I need that query to be executed from Java and is there any way that I can execute these types of queries from Java level. Maybe a function that takes a MongoDB native query as a string and executes that on the database level</p>\n\n<pre><code>db.createView('TARGET_COLLECTION', 'SOURCE_COLLECTION_1', [\n  {\n    $facet: {\n      SOURCE_COLLECTION_1: [\n        {$match: {}},\n        { $project: { \"sourceId\":  {$toString: \"$_id\"}, \"name\": 1, \"image\": \"$logo\" }}\n      ],\n      SOURCE_COLLECTION_2: [\n        {$limit: 1},\n        {\n          $lookup: {\n            from: 'SOURCE_COLLECTION_2',\n            localField: '__unexistingfield',\n            foreignField: '__unexistingfield',\n            as: '__col2'\n          }\n        },\n        {$unwind: '$__col2'},\n        {$replaceRoot: {newRoot: '$__col2'}},\n        { $project: { \"sourceId\": {$toString: \"$_id\"}, \"name\": 1, \"image\": 1 }}\n      ],\n      SOURCE_COLLECTION_3: [\n        {$limit: 1},\n        {\n          $lookup: {\n            from: 'SOURCE_COLLECTION_3',\n            localField: '__unexistingfield',\n            foreignField: '__unexistingfield',\n            as: '__col2'\n          }\n        },\n        {$unwind: '$__col2'},\n        {$replaceRoot: {newRoot: '$__col2'}},\n        { $project: { \"sourceId\":  {$toString: \"$_id\"}, \"name\": 1, \"image\": \"$logo\" }}\n      ]\n    },\n  },\n  {$project: {data: {$concatArrays: ['$SOURCE_COLLECTION_1', '$SOURCE_COLLECTION_2', '$SOURCE_COLLECTION_3']}}},\n  {$unwind: '$data'},\n  {$replaceRoot: {newRoot: '$data'}}\n])\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3034219,"reputation":876,"user_id":2572685,"display_name":"Alexander Makarov"},"score":0,"creation_date":1598792668,"post_id":63657639,"comment_id":112567580,"body_markdown":"did you get an error during your tests execution?","body":"did you get an error during your tests execution?"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598793056,"creation_date":1598793056,"answer_id":63657772,"question_id":63657639,"body_markdown":"You declare the h2 driver in the `test` scope which means it is only available during the test case execution.\r\n\r\nIf you want the h2 driver is also available when executing the application normally , change its scope to the default one (i.e `compile`) should solve the problem :\r\n\r\n``` xml\r\n       &lt;dependency&gt;\r\n                &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n                &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n       &lt;/dependency&gt;\r\n```","title":"How to resolve unable to load driver class: org.h2.Driver in spring-boot application?","body":"<p>You declare the h2 driver in the <code>test</code> scope which means it is only available during the test case execution.</p>\n<p>If you want the h2 driver is also available when executing the application normally , change its scope to the default one (i.e <code>compile</code>) should solve the problem :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>       &lt;dependency&gt;\n                &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n                &lt;artifactId&gt;h2&lt;/artifactId&gt;\n       &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1598794823,"creation_date":1598794823,"answer_id":63658034,"question_id":63657639,"body_markdown":"Make the jar available in runtime. \r\n\r\nModify the scope for h2 dependency in the pom.xml :\r\n\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"How to resolve unable to load driver class: org.h2.Driver in spring-boot application?","body":"<p>Make the jar available in runtime.</p>\n<p>Modify the scope for h2 dependency in the pom.xml :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7602721,"reputation":410,"user_id":5766691,"display_name":"Zaphod Beeblebrox"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636807853,"creation_date":1636807853,"answer_id":69954418,"question_id":63657639,"body_markdown":"In my case the problem was caused by some trailing blank characters after the driver classname in application.properties\r\n\r\nThis fails (dots in the code snippet below should be read as whitespace chars):\r\n\r\n    spring.datasource.driverClassName=org.h2.Driver...\r\n\r\nThis succeeds:\r\n\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n\r\n","title":"How to resolve unable to load driver class: org.h2.Driver in spring-boot application?","body":"<p>In my case the problem was caused by some trailing blank characters after the driver classname in application.properties</p>\n<p>This fails (dots in the code snippet below should be read as whitespace chars):</p>\n<pre><code>spring.datasource.driverClassName=org.h2.Driver...\n</code></pre>\n<p>This succeeds:</p>\n<pre><code>spring.datasource.driverClassName=org.h2.Driver\n</code></pre>\n"}],"owner":{"account_id":16803014,"reputation":65,"user_id":12147858,"display_name":"sriramkailash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7995,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":63658034,"answer_count":3,"score":3,"last_activity_date":1660989347,"creation_date":1598792153,"question_id":63657639,"body_markdown":"I&#39;m facing this error :\r\n\r\n    Error creating bean with name \r\n    &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0;      \r\n     nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: org.h2.Driver\r\n\r\nWhy I&#39;m facing this issue ?\r\n\r\nHere is the pom.xml:\r\n\r\n``` xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.wipro.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;h2sample&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nHere is the application.properties file:\r\n\r\n```\r\nspring.h2.console.enabled=true\r\nspring.datasource.url=jdbc:h2:mem:testdb\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=password\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n```","title":"How to resolve unable to load driver class: org.h2.Driver in spring-boot application?","body":"<p>I'm facing this error :</p>\n<pre><code>Error creating bean with name \n'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration': Unsatisfied dependency expressed through constructor parameter 0;      \n nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: org.h2.Driver\n</code></pre>\n<p>Why I'm facing this issue ?</p>\n<p>Here is the pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.wipro.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;h2sample&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here is the application.properties file:</p>\n<pre><code>spring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n</code></pre>\n"},{"tags":["java","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1660989246,"creation_date":1660989246,"answer_id":73425684,"question_id":73419752,"body_markdown":"The use of the `qualifiedByName` is for mapping methods. What you are looking for is `conditionQualifiedByName` for the `isB` and `isC` methods.\r\n\r\n\r\ne.g.\r\n\r\n```\r\n@Mapper(uses = {...})\r\npublic interface MyMapper {\r\n\r\n\r\n    @Mapping(target = &quot;b1&quot;, source = &quot;a1&quot;, conditionQualifiedByName = &quot;isB&quot;)\r\n    @Mapping(target = &quot;c1&quot;, source = &quot;a1&quot;, conditionQualifiedByName = &quot;isC&quot;)\r\n    @Mapping(target = &quot;b2&quot;, source = &quot;a2&quot;, conditionQualifiedByName = &quot;isB&quot;)\r\n    @Mapping(target = &quot;c2&quot;, source = &quot;a2&quot;, conditionQualifiedByName = &quot;isC&quot;)\r\n    Target toProto(Source source);\r\n\r\n    @Condition\r\n    @Named(&quot;isB&quot;)\r\n    default boolean hasB(A a) {\r\n        return (a instanceof B);\r\n    }\r\n\r\n    @Condition\r\n    @Named(&quot;isC&quot;)\r\n    default boolean hasC(A a) {\r\n        return (a instanceof C);\r\n    }\r\n}\r\n```\r\n\r\nNote: In your other mappers there should be methods that will allow you to map `A` to `B` and `A` to `C`\r\n\r\nNote 2: The name of the presence methods are entirely up to you. The pattern `hasXXX` is only for presence methods that are present in the type itself. e.g. in this has if `Source` had a presence method `hasA1` that would check if `a1` is present or not.\r\n","title":"Conditional Mapping for Target","body":"<p>The use of the <code>qualifiedByName</code> is for mapping methods. What you are looking for is <code>conditionQualifiedByName</code> for the <code>isB</code> and <code>isC</code> methods.</p>\n<p>e.g.</p>\n<pre><code>@Mapper(uses = {...})\npublic interface MyMapper {\n\n\n    @Mapping(target = &quot;b1&quot;, source = &quot;a1&quot;, conditionQualifiedByName = &quot;isB&quot;)\n    @Mapping(target = &quot;c1&quot;, source = &quot;a1&quot;, conditionQualifiedByName = &quot;isC&quot;)\n    @Mapping(target = &quot;b2&quot;, source = &quot;a2&quot;, conditionQualifiedByName = &quot;isB&quot;)\n    @Mapping(target = &quot;c2&quot;, source = &quot;a2&quot;, conditionQualifiedByName = &quot;isC&quot;)\n    Target toProto(Source source);\n\n    @Condition\n    @Named(&quot;isB&quot;)\n    default boolean hasB(A a) {\n        return (a instanceof B);\n    }\n\n    @Condition\n    @Named(&quot;isC&quot;)\n    default boolean hasC(A a) {\n        return (a instanceof C);\n    }\n}\n</code></pre>\n<p>Note: In your other mappers there should be methods that will allow you to map <code>A</code> to <code>B</code> and <code>A</code> to <code>C</code></p>\n<p>Note 2: The name of the presence methods are entirely up to you. The pattern <code>hasXXX</code> is only for presence methods that are present in the type itself. e.g. in this has if <code>Source</code> had a presence method <code>hasA1</code> that would check if <code>a1</code> is present or not.</p>\n"}],"owner":{"account_id":1027355,"reputation":2721,"user_id":1036386,"accept_rate":91,"display_name":"Kalec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3061,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73425684,"answer_count":1,"score":1,"last_activity_date":1660989246,"creation_date":1660926778,"question_id":73419752,"body_markdown":"I&#39;m trying to write Protocol Buffer (gRPC) mappings.\r\n\r\nI have a class structure as follows\r\n\r\n```java\r\npublic abstract class A;\r\npublic class B extends A;\r\npublic class C extends A;\r\n\r\npublic class Source {\r\n    A a1;\r\n    A a2;\r\n}\r\n```\r\n\r\nand I have a proto file that says:\r\n\r\n```proto\r\n\r\nmessage Target {\r\n  oneOf {\r\n    B b1 = 1;\r\n    C c1 = 2;\r\n  }\r\n  oneOf {\r\n    B b2 = 3;\r\n    C c2 = 4;\r\n  }\r\n}\r\n\r\n```\r\n\r\nAKA, proto has two VALID fields, but four real fiels, source has only two fields. And types are complicated. Mapstruct will not understand based on type signature what I want, I need to help it with some qualifiers.\r\n\r\nI also have it set so that any un-mapped target property is an error.\r\n\r\nThis leads me to an awkward situation. As far as I understand, mapstruct has ONLY source conditioning. Only a presence check, I can&#39;t make it a &quot;whatever I want check&quot;.\r\n\r\nIn an ideal world, I would simply write:\r\n\r\n\r\n```java\r\n\r\n@Mapping(target = &quot;b1&quot;, source = &quot;a1&quot;, qualifiedByName = &quot;isB&quot;)\r\n@Mapping(target = &quot;c1&quot;, source = &quot;a1&quot;, qualifiedByName = &quot;isC&quot;)\r\n@Mapping(target = &quot;b2&quot;, source = &quot;a2&quot;, qualifiedByName = &quot;isB&quot;)\r\n@Mapping(target = &quot;c2&quot;, source = &quot;a2&quot;, qualifiedByName = &quot;isC&quot;)\r\nTarget toProto(Source source);\r\n\r\n@Condition\r\n@Named(&quot;isB&quot;)\r\ndefault boolean hasB(A a) {\r\n    return (a instanceof B);\r\n}\r\n\r\n@Condition\r\n@Named(&quot;isC&quot;)\r\ndefault boolean hasC(A a) {\r\n    return (a instanceof C);\r\n}\r\n\r\n```\r\n\r\nWhat I want to generate as code:\r\n\r\n```java\r\nif (hasB(source.a1) { b1 = source.a1; }\r\nif (hasC(source.a1) { c1 = source.a1; } \r\nif (hasB(source.a2) { b2 = source.a2; }\r\nif (hasC(source.a2) { c2 = source.a2; } \r\n```\r\n\r\nWhich seems to be what a source check would generate any way. But I can&#39;t get it to do what I want it to do.\r\n\r\nI can&#39;t leave it without the name qualifier, it can&#39;t know without it.   \r\nI have no idea how to name match.   \r\nIt&#39;s giving an error on the qualifier. \r\n\r\nIf I understand correctly, I can&#39;t write `hasB1` or `hasC1`. It has to be `hasXXX` where `XXX = source property`. That does not work in this scenario, it would HAVE to be `hasYYY` where `YYY = target property`. Only other alternative is qualifiers. Qualifiers aren&#39;t working. I&#39;m stuck. \r\n\r\nWhat other options do I have? An after mapping, how would that look?\r\n\r\nDon&#39;t forget, the `Target` is a gRpc class, the parameter would be a builder, for an after mapping. But I don&#39;t know how I&#39;d write it. \r\n\r\n# EDIT\r\n\r\nAlso, B, and C types are GRPC types, thus they will be mapped with another mapper added in the mapping class with &quot;uses = {...}&quot;\r\n\r\nI would rather, if possible, let mapstruct do it&#39;s thing, rather than convert the mapper into an abstract, autowire the mappers and do it myself.\r\n\r\nBut if this could be done with either an `@AfterMapping` or another way with a qualifier ... then sure, I guess. ","title":"Conditional Mapping for Target","body":"<p>I'm trying to write Protocol Buffer (gRPC) mappings.</p>\n<p>I have a class structure as follows</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class A;\npublic class B extends A;\npublic class C extends A;\n\npublic class Source {\n    A a1;\n    A a2;\n}\n</code></pre>\n<p>and I have a proto file that says:</p>\n<pre><code>\nmessage Target {\n  oneOf {\n    B b1 = 1;\n    C c1 = 2;\n  }\n  oneOf {\n    B b2 = 3;\n    C c2 = 4;\n  }\n}\n\n</code></pre>\n<p>AKA, proto has two VALID fields, but four real fiels, source has only two fields. And types are complicated. Mapstruct will not understand based on type signature what I want, I need to help it with some qualifiers.</p>\n<p>I also have it set so that any un-mapped target property is an error.</p>\n<p>This leads me to an awkward situation. As far as I understand, mapstruct has ONLY source conditioning. Only a presence check, I can't make it a &quot;whatever I want check&quot;.</p>\n<p>In an ideal world, I would simply write:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Mapping(target = &quot;b1&quot;, source = &quot;a1&quot;, qualifiedByName = &quot;isB&quot;)\n@Mapping(target = &quot;c1&quot;, source = &quot;a1&quot;, qualifiedByName = &quot;isC&quot;)\n@Mapping(target = &quot;b2&quot;, source = &quot;a2&quot;, qualifiedByName = &quot;isB&quot;)\n@Mapping(target = &quot;c2&quot;, source = &quot;a2&quot;, qualifiedByName = &quot;isC&quot;)\nTarget toProto(Source source);\n\n@Condition\n@Named(&quot;isB&quot;)\ndefault boolean hasB(A a) {\n    return (a instanceof B);\n}\n\n@Condition\n@Named(&quot;isC&quot;)\ndefault boolean hasC(A a) {\n    return (a instanceof C);\n}\n\n</code></pre>\n<p>What I want to generate as code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (hasB(source.a1) { b1 = source.a1; }\nif (hasC(source.a1) { c1 = source.a1; } \nif (hasB(source.a2) { b2 = source.a2; }\nif (hasC(source.a2) { c2 = source.a2; } \n</code></pre>\n<p>Which seems to be what a source check would generate any way. But I can't get it to do what I want it to do.</p>\n<p>I can't leave it without the name qualifier, it can't know without it.<br />\nI have no idea how to name match.<br />\nIt's giving an error on the qualifier.</p>\n<p>If I understand correctly, I can't write <code>hasB1</code> or <code>hasC1</code>. It has to be <code>hasXXX</code> where <code>XXX = source property</code>. That does not work in this scenario, it would HAVE to be <code>hasYYY</code> where <code>YYY = target property</code>. Only other alternative is qualifiers. Qualifiers aren't working. I'm stuck.</p>\n<p>What other options do I have? An after mapping, how would that look?</p>\n<p>Don't forget, the <code>Target</code> is a gRpc class, the parameter would be a builder, for an after mapping. But I don't know how I'd write it.</p>\n<h1>EDIT</h1>\n<p>Also, B, and C types are GRPC types, thus they will be mapped with another mapper added in the mapping class with &quot;uses = {...}&quot;</p>\n<p>I would rather, if possible, let mapstruct do it's thing, rather than convert the mapper into an abstract, autowire the mappers and do it myself.</p>\n<p>But if this could be done with either an <code>@AfterMapping</code> or another way with a qualifier ... then sure, I guess.</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":20844560,"reputation":774,"user_id":15310387,"display_name":"Mr R"},"score":0,"creation_date":1660967323,"post_id":73423935,"comment_id":129664479,"body_markdown":"If you read the javadoc for [Runtime.exec](https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec(java.lang.String[],%20java.lang.String[],%20java.io.File)) that seems like it&#39;s a wrapper around the C lib exec - i.e. it&#39;s not got a shell that&#39;s processing what you wrote.","body":"If you read the javadoc for <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec(java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20java.io.File)\" rel=\"nofollow noreferrer\">Runtime.exec</a> that seems like it&#39;s a wrapper around the C lib exec - i.e. it&#39;s not got a shell that&#39;s processing what you wrote."},{"owner":{"account_id":20844560,"reputation":774,"user_id":15310387,"display_name":"Mr R"},"score":0,"creation_date":1660967480,"post_id":73423935,"comment_id":129664493,"body_markdown":"For reference [linux exec](https://man7.org/linux/man-pages/man3/exec.3.html)","body":"For reference <a href=\"https://man7.org/linux/man-pages/man3/exec.3.html\" rel=\"nofollow noreferrer\">linux exec</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1660972360,"post_id":73423935,"comment_id":129664893,"body_markdown":"Correct.  If you want to run a shell command line that uses shell built-in command, shell argument expansion, globbing, redirection, etcetera, you need to run the command in a shell; e.g. by effectively using `Runtime.exec` to run something like `/bin/sh -c &quot;your command line&quot;`.   But this question has been asked many, many times before.","body":"Correct.  If you want to run a shell command line that uses shell built-in command, shell argument expansion, globbing, redirection, etcetera, you need to run the command in a shell; e.g. by effectively using <code>Runtime.exec</code> to run something like <code>&#47;bin&#47;sh -c &quot;your command line&quot;</code>.   But this question has been asked many, many times before."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1660973815,"post_id":73423935,"comment_id":129665027,"body_markdown":"@StephenC this Q seems not to be duplicate. In this particular case `nohup` wrapper has no effect because processes spawned via `java.lang.Runtime#exec` are not bound to `tty`, so if TC is actually asking about how to properly &quot;daemonize&quot; spawned application the answer  like &quot;use `sh -c ...`&quot; won&#39;t help much.","body":"@StephenC this Q seems not to be duplicate. In this particular case <code>nohup</code> wrapper has no effect because processes spawned via <code>java.lang.Runtime#exec</code> are not bound to <code>tty</code>, so if TC is actually asking about how to properly &quot;daemonize&quot; spawned application the answer  like &quot;use <code>sh -c ...</code>&quot; won&#39;t help much."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1660975599,"post_id":73423935,"comment_id":129665194,"body_markdown":"In that case, if the purpose of this is to capture the output, then `nohup` won&#39;t work at all.   But unless you use a `/bin/sh -c` or something, the `&amp;` will be treated as a command argument for the `java` command.   And the command won&#39;t be backgrounded.","body":"In that case, if the purpose of this is to capture the output, then <code>nohup</code> won&#39;t work at all.   But unless you use a <code>&#47;bin&#47;sh -c</code> or something, the <code>&amp;</code> will be treated as a command argument for the <code>java</code> command.   And the command won&#39;t be backgrounded."}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660989128,"creation_date":1660981185,"answer_id":73424904,"question_id":73423935,"body_markdown":"**Short story**\r\n\r\nYour expectations are based on observations which are actually irrelevant to java, basically that (&quot;redirecting output to `nohup.out`&quot;) does not work because processes spawned via `java.lang.Runtime#exec` are not bound to `tty`, thus `nohup` `wrapper` has no effect.\r\n\r\n**Long story**\r\n\r\n**Q**: Why do `UNIX` guys need to use `nohup` `wrapper` when they want to spawn long-running process/program?\r\n\r\nWhen we are working from `shell` it&#39;s first three file descriptors (`stdin`, `stdout` and `stderr`) are bound to `tty`, for example:\r\n\r\n```\r\n]# ls -la /proc/self/fd/[0-2]\r\nlrwx------ 1 root root 64 Aug 20 09:29 /proc/self/fd/0 -&gt; /dev/pts/2\r\nlrwx------ 1 root root 64 Aug 20 09:29 /proc/self/fd/1 -&gt; /dev/pts/2\r\nlrwx------ 1 root root 64 Aug 20 09:29 /proc/self/fd/2 -&gt; /dev/pts/2\r\n```\r\n\r\nand any process spawned from `shell` inherits those three file descriptors, for example:\r\n\r\n```\r\n# ping 8.8.8.8\r\nPING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.\r\n\r\n...\r\n\r\n# another shell\r\n# 65681 - pid of ping\r\n# 65654 - pid of shell (parent)\r\n\r\n]# ps -ef | grep ping\r\nroot     65681 65654  0 09:31 pts/2    00:00:00 ping 8.8.8.8\r\nroot     65700 65684  0 09:32 pts/3    00:00:00 grep --color=auto ping\r\n]# ls -la /proc/65681/fd/[0-2]\r\nlrwx------ 1 root root 64 Aug 20 09:32 /proc/65681/fd/0 -&gt; /dev/pts/2\r\nlrwx------ 1 root root 64 Aug 20 09:32 /proc/65681/fd/1 -&gt; /dev/pts/2\r\nlrwx------ 1 root root 64 Aug 20 09:32 /proc/65681/fd/2 -&gt; /dev/pts/2\r\n```\r\n\r\n**Q**: what will happen if we leave our `shell`?\r\n\r\n```\r\n]# kill -9 65654\r\n]# ls -la /proc/65681/fd/[0-2]\r\nls: cannot access /proc/65681/fd/[0-2]: No such file or directory\r\n]# ps -ef | grep 65681\r\nroot     65738 65684  0 09:40 pts/3    00:00:00 grep --color=auto 65681\r\n```\r\n\r\nOperating system was need to close `tty` (we left `shell`), so `OS` sends `SIGHUP` signal to all processes which was using (bound to) that `tty` and closes `tty`\r\n\r\nThe purpose of `nohup` `wrapper` is following: \r\n\r\nit inspects whether first three file descriptors (`stdin`, `stdout` and `stderr`) are bound to `tty` and if so it replaces them by `/dev/null`, `nohup.out` and `nohup.out`:\r\n\r\n```\r\n]# nohup ping 8.8.8.8\r\nnohup: ignoring input and appending output to &#39;nohup.out&#39;\r\n\r\n...\r\n\r\n# another shell\r\n# 65767 - pid of ping\r\n# 65752 - pid of shell (parent)\r\n\r\n]# ps -ef | grep ping\r\nroot     65767 65752  0 09:44 pts/2    00:00:00 ping 8.8.8.8\r\nroot     65773 65684  0 09:45 pts/3    00:00:00 grep --color=auto ping\r\n]# ls -la /proc/65767/fd/[0-2]\r\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/0 -&gt; /dev/null\r\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/1 -&gt; /nohup.out\r\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/2 -&gt; /nohup.out\r\n```\r\n\r\nnow, trying to &quot;leave&quot; our `shell`:\r\n\r\n```\r\n]# kill -9 65752\r\n]# ls -la /proc/65767/fd/[0-2]\r\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/0 -&gt; /dev/null\r\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/1 -&gt; /nohup.out\r\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/2 -&gt; /nohup.out\r\n]# ps -ef | grep ping\r\nroot     65767     1  0 09:44 ?        00:00:00 ping 8.8.8.8\r\nroot     65781 65684  0 09:46 pts/3    00:00:00 grep --color=auto ping\r\n```\r\n\r\nour long-running application is continuing running, everyone is happy - that is `nohup` `wrapper` magic.\r\n\r\nIn regard to your Q... \r\n\r\nIf your goal it to re-implement the same using `Java` you need to do the same in `Java` and do not rely on `nohup` `wrapper`, below are some examples:\r\n\r\nLet&#39;s try using &quot;naive&quot; implementation like:\r\n\r\n```java\r\npublic class Test {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Runtime rt = Runtime.getRuntime();\r\n        rt.exec(&quot;ping 8.8.8.8&quot;);\r\n        Thread.sleep(1_000_000_000);\r\n    }\r\n    \r\n}\r\n```\r\n\r\n```\r\n]# $JAVA_HOME/bin/javac Test.java \r\n]# $JAVA_HOME/bin/java -cp . Test \r\n\r\n# another shell\r\n# 65890 - pid of ping\r\n# 65873 - pid of java (parent)\r\n\r\n]# ps -ef | grep ping\r\nroot     65890 65873  0 09:58 pts/2    00:00:00 ping 8.8.8.8\r\nroot     65895 65684  0 09:59 pts/3    00:00:00 grep --color=auto ping\r\n]# ls -la /proc/65890/fd/[0-2]\r\nlr-x------ 1 root root 64 Aug 20 09:58 /proc/65890/fd/0 -&gt; pipe:[651007]\r\nl-wx------ 1 root root 64 Aug 20 09:58 /proc/65890/fd/1 -&gt; pipe:[651008]\r\nl-wx------ 1 root root 64 Aug 20 09:58 /proc/65890/fd/2 -&gt; pipe:[651009]\r\n```\r\n\r\nnow, instead of seeing file descriptors like &quot;/dev/pts/xxx&quot; we are seeing something weird like `pipe:[xxx]`. What is that? That is `UNIX IPC` - child process sends data to parent process via [anonymous pipe](https://en.wikipedia.org/wiki/Anonymous_pipe). Anonymous pipes are not `tty`s, and that is why `nohup` `wrapper` won&#39;t have any effect, we may demonstrate that using `shell` (neither &quot;nohup.out&quot; in output nor &quot;ignoring input and appending output to &#39;nohup.out&#39;&quot; message):\r\n\r\n```\r\n]# nohup ping 8.8.8.8 &lt;/dev/null 2&gt;&amp;1 | cat\r\n^Z\r\n[1]+  Stopped                 nohup ping 8.8.8.8 &lt; /dev/null 2&gt;&amp;1 | cat\r\n]# ps -ef | grep ping\r\nroot     66840 65684  0 12:38 pts/3    00:00:00 ping 8.8.8.8\r\nroot     66845 65684  0 12:38 pts/3    00:00:00 grep --color=auto ping\r\n]# ls -la /proc/66840/fd/[0-2]\r\nlr-x------ 1 root root 64 Aug 20 12:38 /proc/66840/fd/0 -&gt; /dev/null\r\nl-wx------ 1 root root 64 Aug 20 12:38 /proc/66840/fd/1 -&gt; pipe:[659814]\r\nl-wx------ 1 root root 64 Aug 20 12:38 /proc/66840/fd/2 -&gt; pipe:[659814]\r\n```\r\n\r\nWhat will happen if parent process gets exited? Actually, it depends on whether child process is sending data via [anonymous pipe](https://en.wikipedia.org/wiki/Anonymous_pipe) or not, but in the worst case child process will exit:\r\n\r\n```\r\n]# kill 65873\r\n]# ls -la /proc/65890/fd/[0-2]\r\n]# ps -ef | grep ping\r\nroot     66238 65684  0 10:31 pts/3    00:00:00 grep --color=auto ping\r\n```\r\n\r\nAnd the only reliable way to get the behaviour similar to `nohup` `wrapper` is to &quot;re-implement&quot; `nohup` `wrapper` on Java side:\r\n\r\n\r\n```\r\nimport java.io.File;\r\n\r\npublic class Test {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Process process = new ProcessBuilder(&quot;ping&quot;, &quot;8.8.8.8&quot;)\r\n                .directory(new File(&quot;/tmp&quot;))\r\n                .redirectInput(new File(&quot;/dev/null&quot;))\r\n                .redirectOutput(new File(&quot;/tmp/nohup.out&quot;))\r\n                .redirectError(new File(&quot;/tmp/nohup.out&quot;))\r\n                .start();\r\n        Thread.sleep(1_000_000_000);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\n]# ps -ef | grep ping\r\nroot     66394 66377  0 10:37 pts/2    00:00:00 ping 8.8.8.8\r\nroot     66398 65684  0 10:37 pts/3    00:00:00 grep --color=auto ping\r\n]# kill 66377\r\n]# ls -la /proc/66394/fd/[0-2]\r\nlr-x------ 1 root root 64 Aug 20 10:37 /proc/66394/fd/0 -&gt; /dev/null\r\nl-wx------ 1 root root 64 Aug 20 10:37 /proc/66394/fd/1 -&gt; /tmp/nohup.out\r\nl-wx------ 1 root root 64 Aug 20 10:37 /proc/66394/fd/2 -&gt; /tmp/nohup.out\r\n]# ps -ef | grep 66394\r\nroot     66394     1  0 10:37 pts/2    00:00:00 ping 8.8.8.8\r\nroot     66402 65684  0 10:38 pts/3    00:00:00 grep --color=auto 66394\r\n```\r\n\r\nThus, the java implementation of yours:\r\n\r\n```\r\nnohup java -jar /root/xxxx.jar &amp;\r\n```\r\n\r\nis:\r\n\r\n```java\r\nProcess process = new ProcessBuilder(&quot;java&quot;, &quot;-jar&quot;, &quot;/root/xxxx.jar&quot;)\r\n        .redirectInput(new File(&quot;/dev/null&quot;))\r\n        .redirectOutput(new File(&quot;nohup.out&quot;))\r\n        .redirectError(new File(&quot;nohup.out&quot;))\r\n        .start();\r\n```","title":"Calling a Linux command via java.lang.Runtime.exec","body":"<p><strong>Short story</strong></p>\n<p>Your expectations are based on observations which are actually irrelevant to java, basically that (&quot;redirecting output to <code>nohup.out</code>&quot;) does not work because processes spawned via <code>java.lang.Runtime#exec</code> are not bound to <code>tty</code>, thus <code>nohup</code> <code>wrapper</code> has no effect.</p>\n<p><strong>Long story</strong></p>\n<p><strong>Q</strong>: Why do <code>UNIX</code> guys need to use <code>nohup</code> <code>wrapper</code> when they want to spawn long-running process/program?</p>\n<p>When we are working from <code>shell</code> it's first three file descriptors (<code>stdin</code>, <code>stdout</code> and <code>stderr</code>) are bound to <code>tty</code>, for example:</p>\n<pre><code>]# ls -la /proc/self/fd/[0-2]\nlrwx------ 1 root root 64 Aug 20 09:29 /proc/self/fd/0 -&gt; /dev/pts/2\nlrwx------ 1 root root 64 Aug 20 09:29 /proc/self/fd/1 -&gt; /dev/pts/2\nlrwx------ 1 root root 64 Aug 20 09:29 /proc/self/fd/2 -&gt; /dev/pts/2\n</code></pre>\n<p>and any process spawned from <code>shell</code> inherits those three file descriptors, for example:</p>\n<pre><code># ping 8.8.8.8\nPING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.\n\n...\n\n# another shell\n# 65681 - pid of ping\n# 65654 - pid of shell (parent)\n\n]# ps -ef | grep ping\nroot     65681 65654  0 09:31 pts/2    00:00:00 ping 8.8.8.8\nroot     65700 65684  0 09:32 pts/3    00:00:00 grep --color=auto ping\n]# ls -la /proc/65681/fd/[0-2]\nlrwx------ 1 root root 64 Aug 20 09:32 /proc/65681/fd/0 -&gt; /dev/pts/2\nlrwx------ 1 root root 64 Aug 20 09:32 /proc/65681/fd/1 -&gt; /dev/pts/2\nlrwx------ 1 root root 64 Aug 20 09:32 /proc/65681/fd/2 -&gt; /dev/pts/2\n</code></pre>\n<p><strong>Q</strong>: what will happen if we leave our <code>shell</code>?</p>\n<pre><code>]# kill -9 65654\n]# ls -la /proc/65681/fd/[0-2]\nls: cannot access /proc/65681/fd/[0-2]: No such file or directory\n]# ps -ef | grep 65681\nroot     65738 65684  0 09:40 pts/3    00:00:00 grep --color=auto 65681\n</code></pre>\n<p>Operating system was need to close <code>tty</code> (we left <code>shell</code>), so <code>OS</code> sends <code>SIGHUP</code> signal to all processes which was using (bound to) that <code>tty</code> and closes <code>tty</code></p>\n<p>The purpose of <code>nohup</code> <code>wrapper</code> is following:</p>\n<p>it inspects whether first three file descriptors (<code>stdin</code>, <code>stdout</code> and <code>stderr</code>) are bound to <code>tty</code> and if so it replaces them by <code>/dev/null</code>, <code>nohup.out</code> and <code>nohup.out</code>:</p>\n<pre><code>]# nohup ping 8.8.8.8\nnohup: ignoring input and appending output to 'nohup.out'\n\n...\n\n# another shell\n# 65767 - pid of ping\n# 65752 - pid of shell (parent)\n\n]# ps -ef | grep ping\nroot     65767 65752  0 09:44 pts/2    00:00:00 ping 8.8.8.8\nroot     65773 65684  0 09:45 pts/3    00:00:00 grep --color=auto ping\n]# ls -la /proc/65767/fd/[0-2]\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/0 -&gt; /dev/null\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/1 -&gt; /nohup.out\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/2 -&gt; /nohup.out\n</code></pre>\n<p>now, trying to &quot;leave&quot; our <code>shell</code>:</p>\n<pre><code>]# kill -9 65752\n]# ls -la /proc/65767/fd/[0-2]\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/0 -&gt; /dev/null\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/1 -&gt; /nohup.out\nl-wx------ 1 root root 64 Aug 20 09:45 /proc/65767/fd/2 -&gt; /nohup.out\n]# ps -ef | grep ping\nroot     65767     1  0 09:44 ?        00:00:00 ping 8.8.8.8\nroot     65781 65684  0 09:46 pts/3    00:00:00 grep --color=auto ping\n</code></pre>\n<p>our long-running application is continuing running, everyone is happy - that is <code>nohup</code> <code>wrapper</code> magic.</p>\n<p>In regard to your Q...</p>\n<p>If your goal it to re-implement the same using <code>Java</code> you need to do the same in <code>Java</code> and do not rely on <code>nohup</code> <code>wrapper</code>, below are some examples:</p>\n<p>Let's try using &quot;naive&quot; implementation like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n\n    public static void main(String[] args) throws Exception {\n        Runtime rt = Runtime.getRuntime();\n        rt.exec(&quot;ping 8.8.8.8&quot;);\n        Thread.sleep(1_000_000_000);\n    }\n    \n}\n</code></pre>\n<pre><code>]# $JAVA_HOME/bin/javac Test.java \n]# $JAVA_HOME/bin/java -cp . Test \n\n# another shell\n# 65890 - pid of ping\n# 65873 - pid of java (parent)\n\n]# ps -ef | grep ping\nroot     65890 65873  0 09:58 pts/2    00:00:00 ping 8.8.8.8\nroot     65895 65684  0 09:59 pts/3    00:00:00 grep --color=auto ping\n]# ls -la /proc/65890/fd/[0-2]\nlr-x------ 1 root root 64 Aug 20 09:58 /proc/65890/fd/0 -&gt; pipe:[651007]\nl-wx------ 1 root root 64 Aug 20 09:58 /proc/65890/fd/1 -&gt; pipe:[651008]\nl-wx------ 1 root root 64 Aug 20 09:58 /proc/65890/fd/2 -&gt; pipe:[651009]\n</code></pre>\n<p>now, instead of seeing file descriptors like &quot;/dev/pts/xxx&quot; we are seeing something weird like <code>pipe:[xxx]</code>. What is that? That is <code>UNIX IPC</code> - child process sends data to parent process via <a href=\"https://en.wikipedia.org/wiki/Anonymous_pipe\" rel=\"nofollow noreferrer\">anonymous pipe</a>. Anonymous pipes are not <code>tty</code>s, and that is why <code>nohup</code> <code>wrapper</code> won't have any effect, we may demonstrate that using <code>shell</code> (neither &quot;nohup.out&quot; in output nor &quot;ignoring input and appending output to 'nohup.out'&quot; message):</p>\n<pre><code>]# nohup ping 8.8.8.8 &lt;/dev/null 2&gt;&amp;1 | cat\n^Z\n[1]+  Stopped                 nohup ping 8.8.8.8 &lt; /dev/null 2&gt;&amp;1 | cat\n]# ps -ef | grep ping\nroot     66840 65684  0 12:38 pts/3    00:00:00 ping 8.8.8.8\nroot     66845 65684  0 12:38 pts/3    00:00:00 grep --color=auto ping\n]# ls -la /proc/66840/fd/[0-2]\nlr-x------ 1 root root 64 Aug 20 12:38 /proc/66840/fd/0 -&gt; /dev/null\nl-wx------ 1 root root 64 Aug 20 12:38 /proc/66840/fd/1 -&gt; pipe:[659814]\nl-wx------ 1 root root 64 Aug 20 12:38 /proc/66840/fd/2 -&gt; pipe:[659814]\n</code></pre>\n<p>What will happen if parent process gets exited? Actually, it depends on whether child process is sending data via <a href=\"https://en.wikipedia.org/wiki/Anonymous_pipe\" rel=\"nofollow noreferrer\">anonymous pipe</a> or not, but in the worst case child process will exit:</p>\n<pre><code>]# kill 65873\n]# ls -la /proc/65890/fd/[0-2]\n]# ps -ef | grep ping\nroot     66238 65684  0 10:31 pts/3    00:00:00 grep --color=auto ping\n</code></pre>\n<p>And the only reliable way to get the behaviour similar to <code>nohup</code> <code>wrapper</code> is to &quot;re-implement&quot; <code>nohup</code> <code>wrapper</code> on Java side:</p>\n<pre><code>import java.io.File;\n\npublic class Test {\n\n    public static void main(String[] args) throws Exception {\n        Process process = new ProcessBuilder(&quot;ping&quot;, &quot;8.8.8.8&quot;)\n                .directory(new File(&quot;/tmp&quot;))\n                .redirectInput(new File(&quot;/dev/null&quot;))\n                .redirectOutput(new File(&quot;/tmp/nohup.out&quot;))\n                .redirectError(new File(&quot;/tmp/nohup.out&quot;))\n                .start();\n        Thread.sleep(1_000_000_000);\n    }\n\n}\n</code></pre>\n<pre><code>]# ps -ef | grep ping\nroot     66394 66377  0 10:37 pts/2    00:00:00 ping 8.8.8.8\nroot     66398 65684  0 10:37 pts/3    00:00:00 grep --color=auto ping\n]# kill 66377\n]# ls -la /proc/66394/fd/[0-2]\nlr-x------ 1 root root 64 Aug 20 10:37 /proc/66394/fd/0 -&gt; /dev/null\nl-wx------ 1 root root 64 Aug 20 10:37 /proc/66394/fd/1 -&gt; /tmp/nohup.out\nl-wx------ 1 root root 64 Aug 20 10:37 /proc/66394/fd/2 -&gt; /tmp/nohup.out\n]# ps -ef | grep 66394\nroot     66394     1  0 10:37 pts/2    00:00:00 ping 8.8.8.8\nroot     66402 65684  0 10:38 pts/3    00:00:00 grep --color=auto 66394\n</code></pre>\n<p>Thus, the java implementation of yours:</p>\n<pre><code>nohup java -jar /root/xxxx.jar &amp;\n</code></pre>\n<p>is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Process process = new ProcessBuilder(&quot;java&quot;, &quot;-jar&quot;, &quot;/root/xxxx.jar&quot;)\n        .redirectInput(new File(&quot;/dev/null&quot;))\n        .redirectOutput(new File(&quot;nohup.out&quot;))\n        .redirectError(new File(&quot;nohup.out&quot;))\n        .start();\n</code></pre>\n"}],"owner":{"account_id":21175551,"reputation":2690,"user_id":15570927,"display_name":"Tupac"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73424904,"answer_count":1,"score":2,"last_activity_date":1660989128,"creation_date":1660966980,"question_id":73423935,"body_markdown":" This is my code in Java:\r\n \r\n\r\n     Runtime rt = Runtime.getRuntime();\r\n     Process p = rt.exec(&quot;nohup java -jar /root/xxxx.jar &amp;&quot;);\r\n\r\n\r\nThis command can be executed, I can see that the service is started, but I have not seen the nohup log, why is this?","title":"Calling a Linux command via java.lang.Runtime.exec","body":"<p>This is my code in Java:</p>\n<pre><code> Runtime rt = Runtime.getRuntime();\n Process p = rt.exec(&quot;nohup java -jar /root/xxxx.jar &amp;&quot;);\n</code></pre>\n<p>This command can be executed, I can see that the service is started, but I have not seen the nohup log, why is this?</p>\n"},{"tags":["java","filter","amazon-dynamodb"],"comments":[{"owner":{"account_id":12179143,"reputation":12245,"user_id":8891224,"display_name":"Nadav Har&#39;El"},"score":0,"creation_date":1589710219,"post_id":61775937,"comment_id":109395682,"body_markdown":"This *should* have worked, so I&#39;m wondering what I&#39;m missing. How many schools matched just the name &quot;ABC&quot; (without the additional filtering for the address)? If the number is large, it is possible the first page of responses will indeed be empty after the filtering. Did you verify that you correctly read all the result pages, not just the first one?","body":"This <i>should</i> have worked, so I&#39;m wondering what I&#39;m missing. How many schools matched just the name &quot;ABC&quot; (without the additional filtering for the address)? If the number is large, it is possible the first page of responses will indeed be empty after the filtering. Did you verify that you correctly read all the result pages, not just the first one?"},{"owner":{"account_id":9104891,"reputation":934,"user_id":6775742,"accept_rate":60,"display_name":"T Anna"},"score":0,"creation_date":1589883990,"post_id":61775937,"comment_id":109463289,"body_markdown":"@NadavHar&#39;El I haven&#39;t implemented pagination. Also, I tried testing for the case where i would expect just 10 records and even for that , the response was empty.","body":"@NadavHar&#39;El I haven&#39;t implemented pagination. Also, I tried testing for the case where i would expect just 10 records and even for that , the response was empty."}],"answers":[{"tags":[],"owner":{"account_id":6714059,"reputation":51,"user_id":8953164,"display_name":"Vijay Kharwar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590138735,"creation_date":1590138735,"answer_id":61951572,"question_id":61775937,"body_markdown":"   \r\n\r\n  You need to set HashKeyValues for the DynamoDBQueryExpression and add the page limit\r\n\r\n    private DynamoDBQueryExpression&lt;School&gt; createQueryBySchoolName(String schoolName) {\r\n    String matchSchoolName = &quot;schoolName = :schoolName&quot;;\r\n    Map&lt;String, AttributeValue&gt; schoolNames = new HashMap&lt;&gt;();\r\n    schoolNames.put(&quot;:schoolName&quot;, new AttributeValue().withS(schoolName));\r\n    schoolNames.put(&quot;:streetName&quot;, new AttributeValue().withS(&quot;123 Street&quot;));\r\n\r\n\r\n    return new DynamoDBQueryExpression&lt;Voucher&gt;()\r\n            .withHashKeyValues(schoolName)\r\n            .withIndexName(&quot;schoolName-index&quot;)\r\n            .withKeyConditionExpression(matchSchoolName)\r\n            .withFilterExpression(&quot;details.address.street1 = :streetName&quot;)\r\n            .withExpressionAttributeValues(schoolNames)\r\n            .withConsistentRead(false)\r\n            .withLimit(pPageSize);\r\n}","title":"DynamoDb query with filter expression in Java","body":"<p>You need to set HashKeyValues for the DynamoDBQueryExpression and add the page limit</p>\n\n<pre><code>private DynamoDBQueryExpression&lt;School&gt; createQueryBySchoolName(String schoolName) {\nString matchSchoolName = \"schoolName = :schoolName\";\nMap&lt;String, AttributeValue&gt; schoolNames = new HashMap&lt;&gt;();\nschoolNames.put(\":schoolName\", new AttributeValue().withS(schoolName));\nschoolNames.put(\":streetName\", new AttributeValue().withS(\"123 Street\"));\n\n\nreturn new DynamoDBQueryExpression&lt;Voucher&gt;()\n        .withHashKeyValues(schoolName)\n        .withIndexName(\"schoolName-index\")\n        .withKeyConditionExpression(matchSchoolName)\n        .withFilterExpression(\"details.address.street1 = :streetName\")\n        .withExpressionAttributeValues(schoolNames)\n        .withConsistentRead(false)\n        .withLimit(pPageSize);\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":9557083,"reputation":21,"user_id":7099226,"display_name":"Kaushik Mandal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660988995,"creation_date":1660670996,"answer_id":73378022,"question_id":61775937,"body_markdown":"`.withHashKeyValues(schoolName)` will only accept a Hash Key object as shown in [this image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CNPYH.png","title":"DynamoDb query with filter expression in Java","body":"<p><code>.withHashKeyValues(schoolName)</code> will only accept a Hash Key object as shown in <a href=\"https://i.stack.imgur.com/CNPYH.png\" rel=\"nofollow noreferrer\">this image</a></p>\n"}],"owner":{"account_id":9104891,"reputation":934,"user_id":6775742,"accept_rate":60,"display_name":"T Anna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17271,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1660988995,"creation_date":1589376547,"question_id":61775937,"body_markdown":"I have a DynamoDb table named school-data in AWS.  Below is the existing code to get all the school with a school&#39;s name:\r\n\r\n    private DynamoDBQueryExpression&lt;School&gt; createQueryBySchoolName(String schoolName) {\r\n        String matchSchoolName = &quot;schoolName = :schoolName&quot;;\r\n        Map&lt;String, AttributeValue&gt; schoolNames = new HashMap&lt;&gt;();\r\n        schoolNames.put(&quot;:schoolName&quot;, new AttributeValue().withS(schoolName));\r\n\r\n        return new DynamoDBQueryExpression&lt;School&gt;()\r\n                .withIndexName(&quot;schoolName-index&quot;)\r\n                .withKeyConditionExpression(matchSchoolName)\r\n                .withExpressionAttributeValues(schoolNames)\r\n                .withConsistentRead(false);\r\n    }\r\n\r\nThe above query works fine. But Now I need to fetch all schools with a particular school name and their address . So, below are the 3 columns in the table:\r\n\r\n    id   schoolName  details\r\n\r\nThe data in details column looks like below:\r\n\r\n    {\r\n\t&quot;zone&quot;: &quot;North&quot;,\r\n\t&quot;type&quot;: &quot;Convent&quot;,\r\n\t&quot;address&quot;: {\r\n\t\t&quot;id&quot;: &quot;138&quot;,\r\n\t\t&quot;street1&quot;: &quot;123 Street&quot;,\r\n\t\t&quot;street2&quot;: &quot;456 Road&quot;\r\n\t}\r\n    }\r\n\r\nSo, I need to fetch all the schools with name &#39;ABC&#39; and address street1 as &#39;123 Street&#39;. So, I updated the above query as below:\r\n\r\n    private DynamoDBQueryExpression&lt;School&gt; createQueryBySchoolName(String schoolName) {\r\n        String matchSchoolName = &quot;schoolName = :schoolName&quot;;\r\n        Map&lt;String, AttributeValue&gt; schoolNames = new HashMap&lt;&gt;();\r\n        schoolNames.put(&quot;:schoolName&quot;, new AttributeValue().withS(schoolName));\r\n        schoolNames.put(&quot;:streetName&quot;, new AttributeValue().withS(&quot;123 Street&quot;));\r\n\r\n\r\n        return new DynamoDBQueryExpression&lt;School&gt;()\r\n                .withIndexName(&quot;schoolName-index&quot;)\r\n                .withKeyConditionExpression(matchSchoolName)\r\n                .withFilterExpression(&quot;details.address.street1 = :streetName&quot;)\r\n                .withExpressionAttributeValues(schoolNames)\r\n                .withConsistentRead(false);\r\n    }\r\n\r\nBut, this returns no data. Can you please let me know what am I doing wrong?","title":"DynamoDb query with filter expression in Java","body":"<p>I have a DynamoDb table named school-data in AWS.  Below is the existing code to get all the school with a school's name:</p>\n\n<pre><code>private DynamoDBQueryExpression&lt;School&gt; createQueryBySchoolName(String schoolName) {\n    String matchSchoolName = \"schoolName = :schoolName\";\n    Map&lt;String, AttributeValue&gt; schoolNames = new HashMap&lt;&gt;();\n    schoolNames.put(\":schoolName\", new AttributeValue().withS(schoolName));\n\n    return new DynamoDBQueryExpression&lt;School&gt;()\n            .withIndexName(\"schoolName-index\")\n            .withKeyConditionExpression(matchSchoolName)\n            .withExpressionAttributeValues(schoolNames)\n            .withConsistentRead(false);\n}\n</code></pre>\n\n<p>The above query works fine. But Now I need to fetch all schools with a particular school name and their address . So, below are the 3 columns in the table:</p>\n\n<pre><code>id   schoolName  details\n</code></pre>\n\n<p>The data in details column looks like below:</p>\n\n<pre><code>{\n\"zone\": \"North\",\n\"type\": \"Convent\",\n\"address\": {\n    \"id\": \"138\",\n    \"street1\": \"123 Street\",\n    \"street2\": \"456 Road\"\n}\n}\n</code></pre>\n\n<p>So, I need to fetch all the schools with name 'ABC' and address street1 as '123 Street'. So, I updated the above query as below:</p>\n\n<pre><code>private DynamoDBQueryExpression&lt;School&gt; createQueryBySchoolName(String schoolName) {\n    String matchSchoolName = \"schoolName = :schoolName\";\n    Map&lt;String, AttributeValue&gt; schoolNames = new HashMap&lt;&gt;();\n    schoolNames.put(\":schoolName\", new AttributeValue().withS(schoolName));\n    schoolNames.put(\":streetName\", new AttributeValue().withS(\"123 Street\"));\n\n\n    return new DynamoDBQueryExpression&lt;School&gt;()\n            .withIndexName(\"schoolName-index\")\n            .withKeyConditionExpression(matchSchoolName)\n            .withFilterExpression(\"details.address.street1 = :streetName\")\n            .withExpressionAttributeValues(schoolNames)\n            .withConsistentRead(false);\n}\n</code></pre>\n\n<p>But, this returns no data. Can you please let me know what am I doing wrong?</p>\n"},{"tags":["java","list","dynamic","set","addition"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1618651779,"post_id":67136578,"comment_id":118670288,"body_markdown":"The `set()` method can only overwrite elements at existing indices. The `add()` method adds new elements.","body":"The <code>set()</code> method can only overwrite elements at existing indices. The <code>add()</code> method adds new elements."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1618652719,"post_id":67136578,"comment_id":118670506,"body_markdown":"`set` is used for replacement of *already existing* value in list at specified index. `add` adds new element at the end of list, or at specified index (previous element at that index will not be replaced but shifted right).","body":"<code>set</code> is used for replacement of <i>already existing</i> value in list at specified index. <code>add</code> adds new element at the end of list, or at specified index (previous element at that index will not be replaced but shifted right)."}],"answers":[{"tags":[],"owner":{"account_id":13089743,"reputation":2044,"user_id":9457633,"display_name":"Md Kawser Habib"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618654632,"creation_date":1618652215,"answer_id":67136686,"question_id":67136578,"body_markdown":"Your problem is, you are trying to set a value in a non-existing index. \r\n\r\nTo understand the case you should know the basic difference:\r\n\r\n**set() Parameters**\r\n\r\nThe set() method takes two parameters.\r\n\r\n- index - position of the element to be replaced\r\n- element - new element that is to be stored at index\r\n\r\n**set() Return Values**\r\n\r\n- returns the element previously present at index\r\n- throws IndexOutOfBoundsException, if index is out of range\r\n\r\n**ArrayList set() Vs. add()**\r\n\r\nThe syntax of the add() and set() method looks quite similar.\r\n```\r\n// syntax of add()\r\narraylist.add(int index, E element)\r\n\r\n// syntax of set()\r\narraylist.set(int index, E element)\r\n```\r\nAnd, both the methods are adding a new element to the arraylist. This is why some people consider both methods similar.\r\n\r\nHowever, there is a major difference between them.\r\n\r\n- The set() method adds a new element at the specified position by replacing the older element at that position.\r\n- The add() method adds a new element at the specified position by shifting the older element towards the right position.\r\n\r\nExample:\r\n```\r\nArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\r\nlist.add(&quot;a&quot;);\r\nlist.add(1, &quot;b&quot;);\r\nSystem.out.println(list);\r\n\r\nlist.set(0, &quot;c&quot;);\r\nSystem.out.println(list);\r\n\r\nlist.add(0, &quot;d&quot;);\r\nSystem.out.println(list);\r\n---------------Output -------------------------------------\r\n[a, b]\r\n\r\n[c, b]\r\n\r\n[d, c, b]\r\n```","title":"Difference between set and add methods in list in java","body":"<p>Your problem is, you are trying to set a value in a non-existing index.</p>\n<p>To understand the case you should know the basic difference:</p>\n<p><strong>set() Parameters</strong></p>\n<p>The set() method takes two parameters.</p>\n<ul>\n<li>index - position of the element to be replaced</li>\n<li>element - new element that is to be stored at index</li>\n</ul>\n<p><strong>set() Return Values</strong></p>\n<ul>\n<li>returns the element previously present at index</li>\n<li>throws IndexOutOfBoundsException, if index is out of range</li>\n</ul>\n<p><strong>ArrayList set() Vs. add()</strong></p>\n<p>The syntax of the add() and set() method looks quite similar.</p>\n<pre><code>// syntax of add()\narraylist.add(int index, E element)\n\n// syntax of set()\narraylist.set(int index, E element)\n</code></pre>\n<p>And, both the methods are adding a new element to the arraylist. This is why some people consider both methods similar.</p>\n<p>However, there is a major difference between them.</p>\n<ul>\n<li>The set() method adds a new element at the specified position by replacing the older element at that position.</li>\n<li>The add() method adds a new element at the specified position by shifting the older element towards the right position.</li>\n</ul>\n<p>Example:</p>\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\nlist.add(&quot;a&quot;);\nlist.add(1, &quot;b&quot;);\nSystem.out.println(list);\n\nlist.set(0, &quot;c&quot;);\nSystem.out.println(list);\n\nlist.add(0, &quot;d&quot;);\nSystem.out.println(list);\n---------------Output -------------------------------------\n[a, b]\n\n[c, b]\n\n[d, c, b]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20765357,"reputation":29,"user_id":15249500,"display_name":"LitVitNik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618652232,"creation_date":1618652232,"answer_id":67136690,"question_id":67136578,"body_markdown":"Your problem is setting value by non-existting index. Let&#39;s suppose you have numRows = 4\r\n\r\nSo:\r\n\r\nwhen i == 2:\r\n\r\nj == 0 -&gt; creating element with Index = 0\r\n\r\nj == 1 - &gt; trying to set new element for Index = 1. (There is no element with id = 1, when you have only one element with id = 0)","title":"Difference between set and add methods in list in java","body":"<p>Your problem is setting value by non-existting index. Let's suppose you have numRows = 4</p>\n<p>So:</p>\n<p>when i == 2:</p>\n<p>j == 0 -&gt; creating element with Index = 0</p>\n<p>j == 1 - &gt; trying to set new element for Index = 1. (There is no element with id = 1, when you have only one element with id = 0)</p>\n"}],"owner":{"account_id":21252978,"reputation":1,"user_id":15634967,"display_name":"SHIVAM TYAGI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1914,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660988070,"creation_date":1618651422,"question_id":67136578,"body_markdown":"So I was asked in a question to generate Pascal triangle using 2D List in java.... I was able to find out the solution but... **when I was using the add method() in my program I was not getting any error but when I used the set method I was getting an error of ArrayOutOfBoundIndex for length 1**. Can somebody help me in pointing out the difference.(The line where error was coming has been commented)\r\n\r\n\r\n\r\nInput- numRows = 5\r\nExpected Output- [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]]\r\n\r\n\r\n```\r\n\r\n    public List&lt;List&lt;Integer&gt;&gt; generate(int numRows) {\r\n            List&lt;List&lt;Integer&gt;&gt; Pa = new ArrayList&lt;List&lt;Integer&gt;&gt;();\r\n            List&lt;Integer&gt;row,prev = null;\r\n            \r\n            for(int i = 0 ; i&lt; numRows;i++){\r\n                row=new ArrayList&lt;Integer&gt;();\r\n                for(int j = 0 ; j&lt;=i;j++){\r\n                    if(j==i||j==0)\r\n                        row.add(1);\r\n                    else{\r\n                      // thisLine --&gt;\r\n                        row.set(j,prev.get(j-1)+prev.get(j));\r\n                    }\r\n                    \r\n                }\r\n                prev=row;\r\n                Pa.add(i,row);\r\n            }\r\n            return Pa;\r\n        }\r\n   ``` \r\n\r\n\r\n```**Output using set method** -&gt;**java.lang.IndexOutOfBoundsException: Index 1 out of bounds for length 1**\r\n  at line 64, java.base/jdk.internal.util.Preconditions.outOfBounds\r\n  at line 70, java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex\r\n  at line 248, java.base/jdk.internal.util.Preconditions.checkIndex\r\n  at line 373, java.base/java.util.Objects.checkIndex\r\n  at line 439, java.base/java.util.ArrayList.set\r\n  at line 12, Solution.generate\r\n  at line 54, __DriverSolution__.__helper__\r\n  at line 84, __Driver__.main\r\n```","title":"Difference between set and add methods in list in java","body":"<p>So I was asked in a question to generate Pascal triangle using 2D List in java.... I was able to find out the solution but... <strong>when I was using the add method() in my program I was not getting any error but when I used the set method I was getting an error of ArrayOutOfBoundIndex for length 1</strong>. Can somebody help me in pointing out the difference.(The line where error was coming has been commented)</p>\n<p>Input- numRows = 5\nExpected Output- [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]]</p>\n<pre><code>\n    public List&lt;List&lt;Integer&gt;&gt; generate(int numRows) {\n            List&lt;List&lt;Integer&gt;&gt; Pa = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n            List&lt;Integer&gt;row,prev = null;\n            \n            for(int i = 0 ; i&lt; numRows;i++){\n                row=new ArrayList&lt;Integer&gt;();\n                for(int j = 0 ; j&lt;=i;j++){\n                    if(j==i||j==0)\n                        row.add(1);\n                    else{\n                      // thisLine --&gt;\n                        row.set(j,prev.get(j-1)+prev.get(j));\n                    }\n                    \n                }\n                prev=row;\n                Pa.add(i,row);\n            }\n            return Pa;\n        }\n</code></pre>\n<pre><code>  at line 64, java.base/jdk.internal.util.Preconditions.outOfBounds\n  at line 70, java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex\n  at line 248, java.base/jdk.internal.util.Preconditions.checkIndex\n  at line 373, java.base/java.util.Objects.checkIndex\n  at line 439, java.base/java.util.ArrayList.set\n  at line 12, Solution.generate\n  at line 54, __DriverSolution__.__helper__\n  at line 84, __Driver__.main\n</code></pre>\n"},{"tags":["python","java","android","pdf"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1660674700,"post_id":73377989,"comment_id":129586714,"body_markdown":"Welcome to stackoverflow. This question is way too large for stackoverflow, which is about specific problems in your code. Your question looks like you want us to write the code for you, which tends to lead to downvotes, and even if that&#39;s not the case, it involves pdf extraction, finding the text, and database access. Each could be their own question. Please see [ask].","body":"Welcome to stackoverflow. This question is way too large for stackoverflow, which is about specific problems in your code. Your question looks like you want us to write the code for you, which tends to lead to downvotes, and even if that&#39;s not the case, it involves pdf extraction, finding the text, and database access. Each could be their own question. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":25647583,"reputation":122,"user_id":19415431,"display_name":"Divyansh Gemini"},"score":0,"creation_date":1660717525,"post_id":73377989,"comment_id":129595330,"body_markdown":"@Robert I don&#39;t want someone to write the whole code, I just want the idea for code to identify data of some particular fields from the extracted text. I have done the extraction &amp; database part. Just getting trouble in &quot;how to detect the fields&quot;. If now also you feel that my question is wrong, &quot;Sorry, I&#39;m am a beginner in coding &amp; stackoverflow&quot;.","body":"@Robert I don&#39;t want someone to write the whole code, I just want the idea for code to identify data of some particular fields from the extracted text. I have done the extraction &amp; database part. Just getting trouble in &quot;how to detect the fields&quot;. If now also you feel that my question is wrong, &quot;Sorry, I&#39;m am a beginner in coding &amp; stackoverflow&quot;."},{"owner":{"account_id":447650,"reputation":734,"user_id":841390,"display_name":"astraujums"},"score":0,"creation_date":1661341008,"post_id":73377989,"comment_id":129747845,"body_markdown":"An example of the extracted text would be useful. Also, any information on how consistent is the extracted text, i.e. are the only differences between different PDF files in the parameter values or are the PDF files and extracted text very different.","body":"An example of the extracted text would be useful. Also, any information on how consistent is the extracted text, i.e. are the only differences between different PDF files in the parameter values or are the PDF files and extracted text very different."}],"answers":[{"tags":[],"owner":{"account_id":21863737,"reputation":112,"user_id":16154214,"display_name":"gasper101"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660987597,"creation_date":1660987597,"answer_id":73425534,"question_id":73377989,"body_markdown":"I belive that this is somenthing you are looking for: https://nanonets.com/blog/ocr-with-tesseract/\r\n\r\nUse OCR for character recognition and extraction, and than export that data into some sort of a .csv file so that it would be easier to organize.","title":"Identify data of particular fields from a PDF or a string containing a paragraph","body":"<p>I belive that this is somenthing you are looking for: <a href=\"https://nanonets.com/blog/ocr-with-tesseract/\" rel=\"nofollow noreferrer\">https://nanonets.com/blog/ocr-with-tesseract/</a></p>\n<p>Use OCR for character recognition and extraction, and than export that data into some sort of a .csv file so that it would be easier to organize.</p>\n"}],"owner":{"account_id":25647583,"reputation":122,"user_id":19415431,"display_name":"Divyansh Gemini"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1660987597,"creation_date":1660670790,"question_id":73377989,"body_markdown":"I&#39;m developing an Android app in which I want to Extract Text from the PDF, \r\nIdentify the data from the extracted text, and Store it in the database. \r\n \r\nFor example:\r\n&gt;If I have a HealthReport.pdf in which all health checkup results are written. \r\nI want to identify the data of some particular fields, for example: age, gender, weight, height, blood group, etc. \r\nAnd store it in the database. \r\n \r\nNow I&#39;m able to extract text from the PDF. \r\nBut **I don&#39;t know how to identify data from it** that this is weight, this is gender, this is height, this is weight, etc.\r\n\r\nIf anyone has some idea, plz help...&#128591;&#127995;&#128591;&#127995;","title":"Identify data of particular fields from a PDF or a string containing a paragraph","body":"<p>I'm developing an Android app in which I want to Extract Text from the PDF,\nIdentify the data from the extracted text, and Store it in the database.</p>\n<p>For example:</p>\n<blockquote>\n<p>If I have a HealthReport.pdf in which all health checkup results are written.\nI want to identify the data of some particular fields, for example: age, gender, weight, height, blood group, etc.\nAnd store it in the database.</p>\n</blockquote>\n<p>Now I'm able to extract text from the PDF.\nBut <strong>I don't know how to identify data from it</strong> that this is weight, this is gender, this is height, this is weight, etc.</p>\n<p>If anyone has some idea, plz help...🙏🏻🙏🏻</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":1,"creation_date":1660988432,"post_id":73425497,"comment_id":129666991,"body_markdown":"You should select only a not both a and b","body":"You should select only a not both a and b"},{"owner":{"account_id":24827323,"reputation":11,"user_id":18706932,"display_name":"Stas"},"score":0,"creation_date":1661014501,"post_id":73425497,"comment_id":129672278,"body_markdown":"OOO. Thank you very match!!! It became works.","body":"OOO. Thank you very match!!! It became works."}],"owner":{"account_id":24827323,"reputation":11,"user_id":18706932,"display_name":"Stas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1803,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660987125,"creation_date":1660987125,"question_id":73425497,"body_markdown":"I am new in Hibernate. And can not understand what is wrong.\r\nAll what I did according  examples. \r\nI need get left join result from 2 tables.\r\nFirst table is Product second table is Prod_Party.\r\nRelationship id(Product)to many id_prd(Prod_Party).\r\n\r\nMain\r\n``` lang-java\r\n    public static List&lt;Product&gt; findAllProductWithJpql(Session session) {\r\n        return session.createQuery(&quot;SELECT a , b FROM Product a Left Join Prod_Party b ON a.id = b.id_prd&quot;,\r\n                Product.class).getResultList();\r\n    }\r\n```\r\nProduct Class\r\n```lang-java\r\nimport jakarta.persistence.*;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\n@Entity\r\n@Table(name=&quot;Product&quot;)\r\n\r\npublic class Product {\r\n\r\n\r\n    public Product(String  product_Name) {\r\n        this.product_Name = product_Name;\r\n    }\r\n    public Product() {\r\n\r\n    }\r\n    @OneToMany(\r\n            mappedBy = &quot;product&quot;,\r\n            cascade = CascadeType.ALL,\r\n            orphanRemoval = true\r\n\r\n    )\r\n    private List&lt;Prod_Party&gt; prod_partyList= new ArrayList&lt;&gt;();\r\n\r\n    public List&lt;Prod_Party&gt; getProd_partyList() {\r\n        return prod_partyList;\r\n    }\r\n\r\n    public void setProd_partyList(List&lt;Prod_Party&gt; prod_partyList) {\r\n        this.prod_partyList = prod_partyList;\r\n    }\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    private int id;\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n\r\n\r\n    @Column(name=&quot;Product_Name&quot;)\r\n    private String product_Name;\r\n\r\n    public String getProduct_Name() {\r\n        return product_Name;\r\n    }\r\n\r\n    public void setProduct_Name(String product_Name) {\r\n        this.product_Name = product_Name;\r\n    }\r\n}\r\n\r\n\r\n```\r\nProd_Party Class\r\n``` lang-java\r\nimport jakarta.persistence.*;\r\n@Entity\r\n@Table(name=&quot;Prod_Party&quot;)\r\n\r\npublic class Prod_Party {\r\n        public Prod_Party(int  cost, int id_prd) {\r\n            this.cost = cost;\r\n            this.id_prd=id_prd;\r\n        }\r\n        public Prod_Party() {\r\n        }\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;id_prd&quot;, referencedColumnName = &quot;id&quot;, insertable = false, updatable = false)\r\n    private Product product;\r\n\r\n    public Product getProduct() {\r\n        return product;\r\n    }\r\n\r\n    public void setProduct(Product product) {\r\n        this.product = product;\r\n    }\r\n\r\n    @Id\r\n        @Column(name = &quot;id&quot;)\r\n            @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n        private int id;\r\n\r\n\r\n    @Column(name=&quot;id_prd&quot;)\r\n    private int id_prd;\r\n\r\n    @Column(name=&quot;Cost&quot;)\r\n    private int cost;\r\n\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public int getId_prd() {\r\n        return id_prd;\r\n    }\r\n\r\n    public void setId_prd(int id_prd) {\r\n        this.id_prd = id_prd;\r\n    }\r\n\r\n    public int getCost() {\r\n        return cost;\r\n    }\r\n\r\n    public void setCost(int cost) {\r\n        this.cost = cost;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n```\r\n\r\nException in thread &quot;main&quot; java.lang.IllegalStateException: org.hibernate.query.IllegalQueryOperationException: Query defined multiple selections, return cannot be typed (other that Object[] or Tuple)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:368)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.list(QuerySqmImpl.java:987)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:94)\r\n\tat Main.findAllProductWithJpql(Main.java:52)\r\n\tat Main.main(Main.java:27)\r\nCaused by: org.hibernate.query.IllegalQueryOperationException: Query defined multiple selections, return cannot be typed (other that Object[] or Tuple)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.determineRowTransformer(ConcreteSqmSelectQueryPlan.java:209)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.&lt;init&gt;(ConcreteSqmSelectQueryPlan.java:87)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.buildConcreteSelectQueryPlan(QuerySqmImpl.java:630)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.buildSelectQueryPlan(QuerySqmImpl.java:602)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveSelectQueryPlan(QueryInterpretationCacheStandardImpl.java:83)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.resolveSelectQueryPlan(QuerySqmImpl.java:582)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:537)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:363)\r\n\t... 4 more\r\nThank you.\r\n\r\n","title":"Hibernate error Query defined multiple selections, return cannot be typed (other that Object[] or Tuple)","body":"<p>I am new in Hibernate. And can not understand what is wrong.\nAll what I did according  examples.\nI need get left join result from 2 tables.\nFirst table is Product second table is Prod_Party.\nRelationship id(Product)to many id_prd(Prod_Party).</p>\n<p>Main</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static List&lt;Product&gt; findAllProductWithJpql(Session session) {\n        return session.createQuery(&quot;SELECT a , b FROM Product a Left Join Prod_Party b ON a.id = b.id_prd&quot;,\n                Product.class).getResultList();\n    }\n</code></pre>\n<p>Product Class</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.*;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n\n@Entity\n@Table(name=&quot;Product&quot;)\n\npublic class Product {\n\n\n    public Product(String  product_Name) {\n        this.product_Name = product_Name;\n    }\n    public Product() {\n\n    }\n    @OneToMany(\n            mappedBy = &quot;product&quot;,\n            cascade = CascadeType.ALL,\n            orphanRemoval = true\n\n    )\n    private List&lt;Prod_Party&gt; prod_partyList= new ArrayList&lt;&gt;();\n\n    public List&lt;Prod_Party&gt; getProd_partyList() {\n        return prod_partyList;\n    }\n\n    public void setProd_partyList(List&lt;Prod_Party&gt; prod_partyList) {\n        this.prod_partyList = prod_partyList;\n    }\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private int id;\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n\n\n    @Column(name=&quot;Product_Name&quot;)\n    private String product_Name;\n\n    public String getProduct_Name() {\n        return product_Name;\n    }\n\n    public void setProduct_Name(String product_Name) {\n        this.product_Name = product_Name;\n    }\n}\n\n\n</code></pre>\n<p>Prod_Party Class</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.*;\n@Entity\n@Table(name=&quot;Prod_Party&quot;)\n\npublic class Prod_Party {\n        public Prod_Party(int  cost, int id_prd) {\n            this.cost = cost;\n            this.id_prd=id_prd;\n        }\n        public Prod_Party() {\n        }\n\n    @ManyToOne\n    @JoinColumn(name=&quot;id_prd&quot;, referencedColumnName = &quot;id&quot;, insertable = false, updatable = false)\n    private Product product;\n\n    public Product getProduct() {\n        return product;\n    }\n\n    public void setProduct(Product product) {\n        this.product = product;\n    }\n\n    @Id\n        @Column(name = &quot;id&quot;)\n            @GeneratedValue(strategy=GenerationType.IDENTITY)\n        private int id;\n\n\n    @Column(name=&quot;id_prd&quot;)\n    private int id_prd;\n\n    @Column(name=&quot;Cost&quot;)\n    private int cost;\n\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public int getId_prd() {\n        return id_prd;\n    }\n\n    public void setId_prd(int id_prd) {\n        this.id_prd = id_prd;\n    }\n\n    public int getCost() {\n        return cost;\n    }\n\n    public void setCost(int cost) {\n        this.cost = cost;\n    }\n\n}\n\n\n\n</code></pre>\n<p>Exception in thread &quot;main&quot; java.lang.IllegalStateException: org.hibernate.query.IllegalQueryOperationException: Query defined multiple selections, return cannot be typed (other that Object[] or Tuple)\nat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:368)\nat org.hibernate.query.sqm.internal.QuerySqmImpl.list(QuerySqmImpl.java:987)\nat org.hibernate.query.Query.getResultList(Query.java:94)\nat Main.findAllProductWithJpql(Main.java:52)\nat Main.main(Main.java:27)\nCaused by: org.hibernate.query.IllegalQueryOperationException: Query defined multiple selections, return cannot be typed (other that Object[] or Tuple)\nat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.determineRowTransformer(ConcreteSqmSelectQueryPlan.java:209)\nat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.(ConcreteSqmSelectQueryPlan.java:87)\nat org.hibernate.query.sqm.internal.QuerySqmImpl.buildConcreteSelectQueryPlan(QuerySqmImpl.java:630)\nat org.hibernate.query.sqm.internal.QuerySqmImpl.buildSelectQueryPlan(QuerySqmImpl.java:602)\nat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveSelectQueryPlan(QueryInterpretationCacheStandardImpl.java:83)\nat org.hibernate.query.sqm.internal.QuerySqmImpl.resolveSelectQueryPlan(QuerySqmImpl.java:582)\nat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:537)\nat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:363)\n... 4 more\nThank you.</p>\n"},{"tags":["java","spring-boot","unit-testing","mocking","automated-tests"],"answers":[{"tags":[],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660983938,"creation_date":1660983938,"answer_id":73425169,"question_id":73419100,"body_markdown":"Have you try to use MockMvc? \r\n\r\nWith MockMvc you can perform requests against a mocked servlet environment.\r\nThere won&#39;t be any real HTTP communication for such tests.\r\n\r\nOfficial documentation: [spring.io/testing-web][1]\r\n\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/testing-web/","title":"Spring boot mock method response","body":"<p>Have you try to use MockMvc?</p>\n<p>With MockMvc you can perform requests against a mocked servlet environment.\nThere won't be any real HTTP communication for such tests.</p>\n<p>Official documentation: <a href=\"https://spring.io/guides/gs/testing-web/\" rel=\"nofollow noreferrer\">spring.io/testing-web</a></p>\n"},{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660986924,"creation_date":1660986924,"answer_id":73425478,"question_id":73419100,"body_markdown":"That&#39;s because your client mock is never used:\r\n\r\n&gt; try (CloseableHttpClient client = HttpClients.createDefault()) {\r\n\r\nEither mock `HttpClients.createDefault()` or , maybe better, inject the client into the service instead of creating on the fly.","title":"Spring boot mock method response","body":"<p>That's because your client mock is never used:</p>\n<blockquote>\n<p>try (CloseableHttpClient client = HttpClients.createDefault()) {</p>\n</blockquote>\n<p>Either mock <code>HttpClients.createDefault()</code> or , maybe better, inject the client into the service instead of creating on the fly.</p>\n"}],"owner":{"account_id":4759179,"reputation":93,"user_id":3847044,"display_name":"Matej Martincevic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73425478,"answer_count":2,"score":0,"last_activity_date":1660986924,"creation_date":1660923190,"question_id":73419100,"body_markdown":"I need some help with unit tests. Our company has decided to start using TDD, and I&#39;m supposed to implement that, but I&#39;ve got very limited experience with unit tests in general, so I&#39;m trying to cover some of the old code to get up to speed. That&#39;s when I got stuck with this:\r\n\r\n\tpublic Analytics generateAnalytics(String id, String domain) {\r\n        List&lt;Result&gt; totalResults = new ArrayList&lt;&gt;();\r\n\r\n\t\tfor(String url : ANALYTIC_URLS) {\r\n\t\t\turl += domain;\r\n\t\t\tString scrubbedUrl = url.replace(API_KEY, &quot;XXXXXXXXXX&quot;);\r\n\t\t\tAudit audit = new Audit(id, scrubbedUrl);\r\n\r\n\t\t\ttry {\r\n\t\t\t\ttotalResults.add(new Result(getData(url, audit)));\r\n\t\t\t} catch(Exception e) {\r\n\t\t\t\taudit.setResponse(e.toString());\r\n\t\t\t\tthrow new Exception(e);\r\n\t\t\t} finally {\r\n\t\t\t\tauditRepository.save(audit);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn composeAnalytics(totalResults);\r\n\t}\r\n\r\n\tprivate List&lt;Map&lt;String, String&gt;&gt; getData(String request, Audit audit) throws Exception {\r\n\t\ttry (CloseableHttpClient client = HttpClients.createDefault()) {\r\n            CloseableHttpResponse response = client.execute(new HttpGet(request));\r\n\r\n\t\t\tif(response.getStatusLine().getStatusCode() == 200) {\r\n\t\t\t\treturn readInputStream(response.getEntity().getContent(), audit);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Exception(response.toString());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nMy issue is, when I wanna test the ```generateAnalytics``` method, the ```getData``` method goes and gets data from a live API that costs units per each request. Obviously I wanna stop this from bleeding out all our units during the testing. I&#39;ve tried mocking the ```ClosableHttpClient``` like so:\r\n\r\n\t@Mock\r\n\tCloseableHttpClient client;\r\n\r\n\t@InjectMocks\r\n\tService service;\r\n\r\n\t@Test\r\n\tvoid testTest() throws Exception {\r\n\t\twhen(client.execute(any())).thenReturn(mock(CloseableHttpResponse.class));\r\n\t\t\r\n\t\tservice.generateAnalytics(&quot;123&quot;, &quot;no.com&quot;);\r\n\t\tassertEquals(true, true);\r\n\t}\r\n\r\nThis works when there&#39;s another service that needs to be mocked in one of my other tests, but in this case it still calls the API and drains our units. What should I do about this?","title":"Spring boot mock method response","body":"<p>I need some help with unit tests. Our company has decided to start using TDD, and I'm supposed to implement that, but I've got very limited experience with unit tests in general, so I'm trying to cover some of the old code to get up to speed. That's when I got stuck with this:</p>\n<pre><code>public Analytics generateAnalytics(String id, String domain) {\n    List&lt;Result&gt; totalResults = new ArrayList&lt;&gt;();\n\n    for(String url : ANALYTIC_URLS) {\n        url += domain;\n        String scrubbedUrl = url.replace(API_KEY, &quot;XXXXXXXXXX&quot;);\n        Audit audit = new Audit(id, scrubbedUrl);\n\n        try {\n            totalResults.add(new Result(getData(url, audit)));\n        } catch(Exception e) {\n            audit.setResponse(e.toString());\n            throw new Exception(e);\n        } finally {\n            auditRepository.save(audit);\n        }\n    }\n\n    return composeAnalytics(totalResults);\n}\n\nprivate List&lt;Map&lt;String, String&gt;&gt; getData(String request, Audit audit) throws Exception {\n    try (CloseableHttpClient client = HttpClients.createDefault()) {\n        CloseableHttpResponse response = client.execute(new HttpGet(request));\n\n        if(response.getStatusLine().getStatusCode() == 200) {\n            return readInputStream(response.getEntity().getContent(), audit);\n        } else {\n            throw new Exception(response.toString());\n        }\n    }\n}\n</code></pre>\n<p>My issue is, when I wanna test the <code>generateAnalytics</code> method, the <code>getData</code> method goes and gets data from a live API that costs units per each request. Obviously I wanna stop this from bleeding out all our units during the testing. I've tried mocking the <code>ClosableHttpClient</code> like so:</p>\n<pre><code>@Mock\nCloseableHttpClient client;\n\n@InjectMocks\nService service;\n\n@Test\nvoid testTest() throws Exception {\n    when(client.execute(any())).thenReturn(mock(CloseableHttpResponse.class));\n    \n    service.generateAnalytics(&quot;123&quot;, &quot;no.com&quot;);\n    assertEquals(true, true);\n}\n</code></pre>\n<p>This works when there's another service that needs to be mocked in one of my other tests, but in this case it still calls the API and drains our units. What should I do about this?</p>\n"},{"tags":["java","system","distributed"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1660983419,"post_id":73424980,"comment_id":129666251,"body_markdown":"It works the same as in a non-microservice application.  Assuming that the &quot;instances&quot; are different processes then thread state is not shared across instances.","body":"It works the same as in a non-microservice application.  Assuming that the &quot;instances&quot; are different processes then thread state is not shared across instances."}],"answers":[{"tags":[],"owner":{"account_id":1069956,"reputation":7313,"user_id":1069494,"accept_rate":55,"display_name":"Levi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660982332,"creation_date":1660982332,"answer_id":73424999,"question_id":73424980,"body_markdown":"I&#39;m assuming you are talking about separate machines, but then the question doesn&#39;t really make sense. Your state is stored in a different place (database, cache, key-value store etc.) and the other instances can read from there. If you are talking about in memory state, that is not shared with anyone else implicitly, it has to be written out somewhere. So if you have multithreading question, that only makes sense in the context of a single process.","title":"How Multi Threading works in Distributed systems?","body":"<p>I'm assuming you are talking about separate machines, but then the question doesn't really make sense. Your state is stored in a different place (database, cache, key-value store etc.) and the other instances can read from there. If you are talking about in memory state, that is not shared with anyone else implicitly, it has to be written out somewhere. So if you have multithreading question, that only makes sense in the context of a single process.</p>\n"},{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660983648,"creation_date":1660983648,"answer_id":73425139,"question_id":73424980,"body_markdown":"The key is a proper state sharing...\r\n\r\nIn general you should carefully design the state sharing even if you have a single instance with multiple threads because if you lock the access it might slow down the system from the performance standpoint. It doesnt mean that the state has to be always kept in memory only (what happens when your single instance terminates and gets restarted later again)?\r\n\r\nWhen there are many instances the situation becomes even more complicates because to orchestate all these instance you might want to use tools likd kubernates that in general might take a decision to &quot;move&quot; one of the working instances to another server, or, to start more instances of the same server when the load increases.\r\n\r\nSo how do you manage the state in all that mess? :) Usually you should:\r\n* First of all define/understand the requirements: should the state be in-sync always or the system should be eventually consistent and it ok producd wise.\r\n* Try to keep the system stateless as much as you can at the level of code at least, leave the state sharing to the tools that can deal with that properly (databases)\r\n* If you have to use some kind of shared state, again don&#39;t try to implement that by yourself, use battle-tested solutions (redis, hazelcast, infibispan, etc.) \r\n* If you have to implement the lock - estimate the performance impact and then again, use known solutions rather than try to implement distributed lock by yourself.\r\n","title":"How Multi Threading works in Distributed systems?","body":"<p>The key is a proper state sharing...</p>\n<p>In general you should carefully design the state sharing even if you have a single instance with multiple threads because if you lock the access it might slow down the system from the performance standpoint. It doesnt mean that the state has to be always kept in memory only (what happens when your single instance terminates and gets restarted later again)?</p>\n<p>When there are many instances the situation becomes even more complicates because to orchestate all these instance you might want to use tools likd kubernates that in general might take a decision to &quot;move&quot; one of the working instances to another server, or, to start more instances of the same server when the load increases.</p>\n<p>So how do you manage the state in all that mess? :) Usually you should:</p>\n<ul>\n<li>First of all define/understand the requirements: should the state be in-sync always or the system should be eventually consistent and it ok producd wise.</li>\n<li>Try to keep the system stateless as much as you can at the level of code at least, leave the state sharing to the tools that can deal with that properly (databases)</li>\n<li>If you have to use some kind of shared state, again don't try to implement that by yourself, use battle-tested solutions (redis, hazelcast, infibispan, etc.)</li>\n<li>If you have to implement the lock - estimate the performance impact and then again, use known solutions rather than try to implement distributed lock by yourself.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660985839,"creation_date":1660985004,"answer_id":73425272,"question_id":73424980,"body_markdown":"&gt; When multiple instances of a Java micro-service are running, how does multi-threading work? For example, suppose in Instance 1 some thread modified the state, how that is communicated across different instances? \r\n\r\nIt works the same as in any other application with multiple instances.\r\n\r\nAssuming that each instance is a distinct process, and the processes don&#39;t share memory, threads in different instances *don&#39;t* share Java objects.  \r\n\r\nIf you want state sharing between the micro-service instances, they need to implement that state sharing by doing things like:\r\n\r\n  - externalizing the state to a (shared) database, or\r\n  - passing the state by message passing.\r\n\r\n&gt; Or it&#39;s not possible?\r\n\r\nIt is not possible for threads in different address spaces to directly share Java objects.\r\n\r\nIt is possible to implement a framework where a thread in one address space can use IPC to &quot;call&quot; methods on a Java object in another address space.  But this requires a framework like RMI or CORBA or JAX-WS.  And this is not strictly state sharing.","title":"How Multi Threading works in Distributed systems?","body":"<blockquote>\n<p>When multiple instances of a Java micro-service are running, how does multi-threading work? For example, suppose in Instance 1 some thread modified the state, how that is communicated across different instances?</p>\n</blockquote>\n<p>It works the same as in any other application with multiple instances.</p>\n<p>Assuming that each instance is a distinct process, and the processes don't share memory, threads in different instances <em>don't</em> share Java objects.</p>\n<p>If you want state sharing between the micro-service instances, they need to implement that state sharing by doing things like:</p>\n<ul>\n<li>externalizing the state to a (shared) database, or</li>\n<li>passing the state by message passing.</li>\n</ul>\n<blockquote>\n<p>Or it's not possible?</p>\n</blockquote>\n<p>It is not possible for threads in different address spaces to directly share Java objects.</p>\n<p>It is possible to implement a framework where a thread in one address space can use IPC to &quot;call&quot; methods on a Java object in another address space.  But this requires a framework like RMI or CORBA or JAX-WS.  And this is not strictly state sharing.</p>\n"}],"owner":{"account_id":8941865,"reputation":21,"user_id":6670599,"display_name":"Rohit Rawat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":511,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1660985839,"creation_date":1660982073,"question_id":73424980,"body_markdown":"When mulitple instances of a java microservice are running, how multithreading works? Eg: suppose in Instance 1 some thread modified the state, how that is communicated across different instances? Or it&#39;s not possible?","title":"How Multi Threading works in Distributed systems?","body":"<p>When mulitple instances of a java microservice are running, how multithreading works? Eg: suppose in Instance 1 some thread modified the state, how that is communicated across different instances? Or it's not possible?</p>\n"},{"tags":["java","image","resources","classloader"],"comments":[{"owner":{"account_id":3427640,"reputation":1477,"user_id":2872987,"accept_rate":91,"display_name":"BitNinja"},"score":0,"creation_date":1402861146,"post_id":24233364,"comment_id":37425453,"body_markdown":"Have you read: http://stackoverflow.com/questions/9867273/getresources-returns-null ?","body":"Have you read: <a href=\"http://stackoverflow.com/questions/9867273/getresources-returns-null\" title=\"getresources returns null\">stackoverflow.com/questions/9867273/getresources-returns-nul&zwnj;&#8203;l</a> ?"},{"owner":{"account_id":3677350,"reputation":503,"user_id":3063148,"accept_rate":89,"display_name":"quantumbyte"},"score":0,"creation_date":1402861387,"post_id":24233364,"comment_id":37425522,"body_markdown":"Now I have, but my images are in a package, it is definitely added to the build path. Anything else I can take from there?","body":"Now I have, but my images are in a package, it is definitely added to the build path. Anything else I can take from there?"},{"owner":{"account_id":3427640,"reputation":1477,"user_id":2872987,"accept_rate":91,"display_name":"BitNinja"},"score":1,"creation_date":1402861773,"post_id":24233364,"comment_id":37425641,"body_markdown":"Is image a `java.awt.Image`?","body":"Is image a <code>java.awt.Image</code>?"},{"owner":{"account_id":3677350,"reputation":503,"user_id":3063148,"accept_rate":89,"display_name":"quantumbyte"},"score":0,"creation_date":1402861888,"post_id":24233364,"comment_id":37425681,"body_markdown":"No, it is an [javafx Image](http://docs.oracle.com/javafx/2/api/javafx/scene/image/Image.html)","body":"No, it is an <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/image/Image.html\" rel=\"nofollow noreferrer\">javafx Image</a>"},{"owner":{"account_id":1764995,"reputation":36209,"user_id":1611055,"accept_rate":91,"display_name":"Andreas Fester"},"score":0,"creation_date":1402861996,"post_id":24233364,"comment_id":37425714,"body_markdown":"Have you tried the alternative Image constructor which takes a URL (which can also be a package on the classpath)? (http://docs.oracle.com/javafx/2/api/javafx/scene/image/Image.html#Image(java.lang.String))","body":"Have you tried the alternative Image constructor which takes a URL (which can also be a package on the classpath)? (<a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/image/Image.html#Image(java.lang.String)\" rel=\"nofollow noreferrer\">docs.oracle.com/javafx/2/api/javafx/scene/image/&hellip;</a>)"}],"answers":[{"tags":[],"owner":{"account_id":54172,"reputation":3040,"user_id":162056,"accept_rate":79,"display_name":"daramasala"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1402862531,"creation_date":1402862531,"answer_id":24233610,"question_id":24233364,"body_markdown":"Your images are in a package under the `src` folder. The class loader does not look there for files. The class loader looks for files in your class path.\r\n\r\nIn order for `getResource` to work in your case, you need to put the images in the class path. \r\n\r\nI suggest you copy the image files manually to your build folder (under the same path, e.g. `out/regexgolf2/ui/images` and run your app again. \r\n\r\nIf it works you can start thinking of ways to get the files to the class path (e.g. copy them as part of the build/packaging process or putting them in another folder which is in the class path).","title":"My resource does not load - &quot;Input stream must not be null&quot;","body":"<p>Your images are in a package under the <code>src</code> folder. The class loader does not look there for files. The class loader looks for files in your class path.</p>\n\n<p>In order for <code>getResource</code> to work in your case, you need to put the images in the class path. </p>\n\n<p>I suggest you copy the image files manually to your build folder (under the same path, e.g. <code>out/regexgolf2/ui/images</code> and run your app again. </p>\n\n<p>If it works you can start thinking of ways to get the files to the class path (e.g. copy them as part of the build/packaging process or putting them in another folder which is in the class path).</p>\n"},{"tags":[],"owner":{"account_id":11730484,"reputation":101,"user_id":8586141,"display_name":"Nelson Rodriguez"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1540074568,"creation_date":1540073149,"answer_id":52910501,"question_id":24233364,"body_markdown":"In the case of a netbeans maven javaFX project, the resource (img folder) must be in the resources folder:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dMyJ0.png\r\n\r\nThen you can load the resource, for example:\r\n\r\n    Image escribir = new Image(getClass().getResourceAsStream(&quot;/img/login.png&quot;));","title":"My resource does not load - &quot;Input stream must not be null&quot;","body":"<p>In the case of a netbeans maven javaFX project, the resource (img folder) must be in the resources folder:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dMyJ0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dMyJ0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then you can load the resource, for example:</p>\n\n<pre><code>Image escribir = new Image(getClass().getResourceAsStream(\"/img/login.png\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14501529,"reputation":150,"user_id":10474557,"display_name":"ChromeKK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564140840,"creation_date":1564138147,"answer_id":57218503,"question_id":24233364,"body_markdown":"I have similar problem in IntelliJ, all look fine but didn&#39;t work. In my case, When I rebuild project, all work correct.","title":"My resource does not load - &quot;Input stream must not be null&quot;","body":"<p>I have similar problem in IntelliJ, all look fine but didn't work. In my case, When I rebuild project, all work correct.</p>\n"},{"tags":[],"owner":{"account_id":24122820,"reputation":1,"user_id":18091680,"display_name":"Sergej Manojlovic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648639569,"creation_date":1648637956,"answer_id":71675999,"question_id":24233364,"body_markdown":"I had the same problem in IntelliJ , I wanted to show Image in `ImageView` on button click and this was a solution for me, don&#39;t use `getClass().getResourceAsStream(&quot;imagePath&quot;);`\r\n\r\n\r\n    Image image = new Image(String.valueOf(new File(&quot;/images/image3.png&quot;)));","title":"My resource does not load - &quot;Input stream must not be null&quot;","body":"<p>I had the same problem in IntelliJ , I wanted to show Image in <code>ImageView</code> on button click and this was a solution for me, don't use <code>getClass().getResourceAsStream(&quot;imagePath&quot;);</code></p>\n<pre><code>Image image = new Image(String.valueOf(new File(&quot;/images/image3.png&quot;)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9572330,"reputation":924,"user_id":7930987,"accept_rate":50,"display_name":"BabaNew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650926800,"creation_date":1650926800,"answer_id":72006476,"question_id":24233364,"body_markdown":"You can try:\r\n\r\n    URL url = ClassLoader.getSystemClassLoader().getResource(&quot;img/pic.jpg&quot;);\r\n    Image imProfile = new Image(url.openStream());\r\n    ImageView profileImage = new ImageView(imProfile);","title":"My resource does not load - &quot;Input stream must not be null&quot;","body":"<p>You can try:</p>\n<pre><code>URL url = ClassLoader.getSystemClassLoader().getResource(&quot;img/pic.jpg&quot;);\nImage imProfile = new Image(url.openStream());\nImageView profileImage = new ImageView(imProfile);\n</code></pre>\n"}],"owner":{"account_id":3677350,"reputation":503,"user_id":3063148,"accept_rate":89,"display_name":"quantumbyte"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16831,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":24233610,"answer_count":5,"score":4,"last_activity_date":1660985658,"creation_date":1402860925,"question_id":24233364,"body_markdown":"I read ~4 Stackoverflow Posts ([1](https://stackoverflow.com/questions/3861989/preferred-way-of-loading-resources-in-java), [2](https://stackoverflow.com/questions/3727994/how-do-i-reference-a-resource-in-java)) already, and did everything like it was explained there, but I get a NullPointerException while I try to load an Image.\r\n\r\n    Exception in thread &quot;JavaFX Application Thread&quot; java.lang.NullPointerException: Input stream must not be null\r\n\r\nMy package structure:\r\n\r\n\r\n[![packages][3]][3]\r\n&lt;!-- source: http://i62.tinypic.com/n3b0wl.png --&gt;\r\n\r\n\r\nCode where I try to load the image:\r\n\r\n\tImage image = new Image(this.getClass().getResourceAsStream(&quot;/regexgolf2/ui/img/edit.png&quot;));\r\n\r\nI don&#39;t understand why It does not work.\r\n [3]: https://i.stack.imgur.com/w3jPB.png","title":"My resource does not load - &quot;Input stream must not be null&quot;","body":"<p>I read ~4 Stackoverflow Posts (<a href=\"https://stackoverflow.com/questions/3861989/preferred-way-of-loading-resources-in-java\">1</a>, <a href=\"https://stackoverflow.com/questions/3727994/how-do-i-reference-a-resource-in-java\">2</a>) already, and did everything like it was explained there, but I get a NullPointerException while I try to load an Image.</p>\n\n<pre><code>Exception in thread \"JavaFX Application Thread\" java.lang.NullPointerException: Input stream must not be null\n</code></pre>\n\n<p>My package structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/w3jPB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w3jPB.png\" alt=\"packages\"></a>\n</p>\n\n<p>Code where I try to load the image:</p>\n\n<pre><code>Image image = new Image(this.getClass().getResourceAsStream(\"/regexgolf2/ui/img/edit.png\"));\n</code></pre>\n\n<p>I don't understand why It does not work.</p>\n"},{"tags":["java","if-statement"],"answers":[{"tags":[],"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660971955,"creation_date":1660971955,"answer_id":73424229,"question_id":73424203,"body_markdown":"Like you said if hitAttempt() returns true then call hitDamage().\r\n\r\nIn if condition you don&#39;t need to explicity check **if (condition == true)**, only **if (condition)** will suffice.\r\n\r\n```java\r\nif (hitAttempt()) {\r\n            hitDamage();\r\n        }\r\n```","title":"If else statement (java)","body":"<p>Like you said if hitAttempt() returns true then call hitDamage().</p>\n<p>In if condition you don't need to explicity check <strong>if (condition == true)</strong>, only <strong>if (condition)</strong> will suffice.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (hitAttempt()) {\n            hitDamage();\n        }\n</code></pre>\n"}],"owner":{"account_id":26112686,"reputation":1,"user_id":19806312,"display_name":"Itwasntme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73424229,"answer_count":1,"score":-2,"last_activity_date":1660985198,"creation_date":1660971472,"question_id":73424203,"body_markdown":"I just saw this problem on YouTube. How to use if else boolean in Java? Public fight method calls hitAttempt method. If hitAttempt method returns true, then it will call the hitDamage method. The damage will be display.\r\n\r\nHere&#39;s the code\r\n\r\n```java\r\npublic class Goodman {\r\n    \r\n    // PRIVATE PROPERTIES ::::::::::::::::::::::::::::::::&gt;\r\n    \r\n    private int strength;\r\n    private int speed;\r\n    private int health;\r\n    \r\n    //PUBLIC PROPERTIES :::::::::::::::::::::::::::::::::&gt;\r\n\r\n    public String name;\r\n    \r\n    // GETTERS ::::::::::::::::::::::::::::::::::&gt;\r\n    \r\n    public int getStrength() {\r\n      return strength;\r\n    }\r\n    \r\n    public int getSpeed(){\r\n      return speed;\r\n    }\r\n    \r\n    public int getHealth(){\r\n      return  health;\r\n    }\r\n    \r\n    //CONSTRUCTORS ::::::::::::::::::::::::::::::::::::&gt;\r\n    public Goodman (String name) {\r\n      this.name = name;\r\n     \r\n      generateAbilities();\r\n    }\r\n    \r\n    public void showPowers() {\r\n        System.out.println(&quot;&lt;::::::::::::::::::::::&gt;&quot;);\r\n        System.out.println(&quot;Strength:  &quot; + strength);\r\n        System.out.println(&quot;Speed:     &quot; + speed);\r\n        System.out.println(&quot;Health:    &quot; + health);\r\n        System.out.println(&quot;&lt;::::::::::::::::::::::&gt;&quot;);\r\n    }\r\n    \r\n    // PRIVATE METHODS ::::::::::::::::::::::::::::::&gt;\r\n    private void generateAbilities(){\r\n        this.strength = (int)(Math.random()*100+1);\r\n        this.speed = (int)(Math.random()*100+1);\r\n        this.health = (int)(Math.random()*100+1);     \r\n        this.damage = (int)(Math.random()*100+1);\r\n    }\r\n    \r\n    // PUBLIC METHODS :::::::::::::::::::::::::::::::&gt;\r\n    \r\n    public void fight() {\r\n        System.out.println(this.name + &quot;is fighting&quot;);\r\n    }\r\n   \r\n    public boolean hitAttempt() {\r\n     \r\n    }\r\n   \r\n    public void hitDamage(){\r\n     \r\n    }\r\n}\r\n```","title":"If else statement (java)","body":"<p>I just saw this problem on YouTube. How to use if else boolean in Java? Public fight method calls hitAttempt method. If hitAttempt method returns true, then it will call the hitDamage method. The damage will be display.</p>\n<p>Here's the code</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Goodman {\n    \n    // PRIVATE PROPERTIES ::::::::::::::::::::::::::::::::&gt;\n    \n    private int strength;\n    private int speed;\n    private int health;\n    \n    //PUBLIC PROPERTIES :::::::::::::::::::::::::::::::::&gt;\n\n    public String name;\n    \n    // GETTERS ::::::::::::::::::::::::::::::::::&gt;\n    \n    public int getStrength() {\n      return strength;\n    }\n    \n    public int getSpeed(){\n      return speed;\n    }\n    \n    public int getHealth(){\n      return  health;\n    }\n    \n    //CONSTRUCTORS ::::::::::::::::::::::::::::::::::::&gt;\n    public Goodman (String name) {\n      this.name = name;\n     \n      generateAbilities();\n    }\n    \n    public void showPowers() {\n        System.out.println(&quot;&lt;::::::::::::::::::::::&gt;&quot;);\n        System.out.println(&quot;Strength:  &quot; + strength);\n        System.out.println(&quot;Speed:     &quot; + speed);\n        System.out.println(&quot;Health:    &quot; + health);\n        System.out.println(&quot;&lt;::::::::::::::::::::::&gt;&quot;);\n    }\n    \n    // PRIVATE METHODS ::::::::::::::::::::::::::::::&gt;\n    private void generateAbilities(){\n        this.strength = (int)(Math.random()*100+1);\n        this.speed = (int)(Math.random()*100+1);\n        this.health = (int)(Math.random()*100+1);     \n        this.damage = (int)(Math.random()*100+1);\n    }\n    \n    // PUBLIC METHODS :::::::::::::::::::::::::::::::&gt;\n    \n    public void fight() {\n        System.out.println(this.name + &quot;is fighting&quot;);\n    }\n   \n    public boolean hitAttempt() {\n     \n    }\n   \n    public void hitDamage(){\n     \n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","recursion","dynamic-programming","memoization"],"answers":[{"tags":[],"owner":{"account_id":7611917,"reputation":2415,"user_id":5772498,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660670412,"creation_date":1660670412,"answer_id":73377896,"question_id":73292956,"body_markdown":"You are pretty close but there are some errors. For example, it does not make sense to check station[0][0] all the time (second if statement). And the HashMap should not be needed.\r\n\r\nI wrote a solution that I think works, but I&#39;m not sure you want it. I think you can solve this on your own, which is a lot more awarding. I suggest you start from scratch, and give it another try. Here are a few hints:\r\n\r\nI think you can take these if statements away:\r\n\r\n    if (stations.length == 0)...\r\n    if (stations[0][0] &gt; currentFuel)...\r\n    if (memo.containsKey(key))...\r\n\r\nI think it is easier to follow the code if you don&#39;t change &quot;target&quot; (currently you subtract distance). Instead, add a parameter that tells &quot;helper&quot; how far you have travelled (distance).\r\n\r\nGive it another try, I&#39;m sure you&#39;ll make it. If not, let me know, and I&#39;ll post my code :)\r\n","title":"How to come up with the Recursive solution for Leetcode Minimum Number of Refueling Stops","body":"<p>You are pretty close but there are some errors. For example, it does not make sense to check station[0][0] all the time (second if statement). And the HashMap should not be needed.</p>\n<p>I wrote a solution that I think works, but I'm not sure you want it. I think you can solve this on your own, which is a lot more awarding. I suggest you start from scratch, and give it another try. Here are a few hints:</p>\n<p>I think you can take these if statements away:</p>\n<pre><code>if (stations.length == 0)...\nif (stations[0][0] &gt; currentFuel)...\nif (memo.containsKey(key))...\n</code></pre>\n<p>I think it is easier to follow the code if you don't change &quot;target&quot; (currently you subtract distance). Instead, add a parameter that tells &quot;helper&quot; how far you have travelled (distance).</p>\n<p>Give it another try, I'm sure you'll make it. If not, let me know, and I'll post my code :)</p>\n"},{"tags":[],"owner":{"account_id":7611917,"reputation":2415,"user_id":5772498,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660984724,"creation_date":1660984724,"answer_id":73425248,"question_id":73292956,"body_markdown":"Information wants to be free, so here you go :)\r\n\r\nThis solution uses the same approach as your solution, and it seems to work, so you can look at it to see what needs to be fixed with your code.\r\n\r\n**Sadly it is way to slow**, so execution stops with &quot;Time limit exceeded&quot; at test case #115 that has approx 100 gas stations. So to solve the Leetcode task with recursion, a whole new way of thinking is needed.\r\n\r\n\tpublic int minRefuelStops(int target, int startFuel, int[][] stations) {\r\n\t\tInteger result = helper(-1, startFuel, target, stations, 0);\r\n\t\treturn result == null ? -1 : result.intValue();\r\n\t}\r\n\r\n\tprivate Integer helper(int currentStation, int currentFuel, int target, int[][] stations, int depth) {\r\n\t\tint currentPos = currentStation == -1 ? 0 : stations[currentStation][0];\r\n\t\tif (currentPos + currentFuel &gt;= target) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tInteger best = null;\r\n\t\tfor (int i = currentStation + 1; i &lt; stations.length; i++) {\r\n\t\t\tint stationPos = stations[i][0];\r\n\t\t\tint stationFuel = stations[i][1];\r\n\t\t\t// Check out station that we have not yet passed &amp;&amp; we can reach\r\n\t\t\tif (currentPos &lt; stationPos &amp;&amp; currentPos + currentFuel &gt;= stationPos) {\r\n\t\t\t\t// Drive to station\r\n\t\t\t\tint fuel = currentFuel - (stationPos - currentPos);\r\n\t\t\t\t// Fill up gas\r\n\t\t\t\tfuel += stationFuel;\r\n\t\t\t\t// Continue\r\n\t\t\t\tInteger res = helper(i, fuel, target, stations, depth + 1);\r\n\t\t\t\tif (res != null &amp;&amp; (best == null || res &lt; best)) {\r\n\t\t\t\t\tbest = res;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Return &quot;no can do&quot; or return number of stations (adding *this* station)\r\n\t\treturn best == null ? null : best + 1;\r\n\t}","title":"How to come up with the Recursive solution for Leetcode Minimum Number of Refueling Stops","body":"<p>Information wants to be free, so here you go :)</p>\n<p>This solution uses the same approach as your solution, and it seems to work, so you can look at it to see what needs to be fixed with your code.</p>\n<p><strong>Sadly it is way to slow</strong>, so execution stops with &quot;Time limit exceeded&quot; at test case #115 that has approx 100 gas stations. So to solve the Leetcode task with recursion, a whole new way of thinking is needed.</p>\n<pre><code>public int minRefuelStops(int target, int startFuel, int[][] stations) {\n    Integer result = helper(-1, startFuel, target, stations, 0);\n    return result == null ? -1 : result.intValue();\n}\n\nprivate Integer helper(int currentStation, int currentFuel, int target, int[][] stations, int depth) {\n    int currentPos = currentStation == -1 ? 0 : stations[currentStation][0];\n    if (currentPos + currentFuel &gt;= target) {\n        return 0;\n    }\n\n    Integer best = null;\n    for (int i = currentStation + 1; i &lt; stations.length; i++) {\n        int stationPos = stations[i][0];\n        int stationFuel = stations[i][1];\n        // Check out station that we have not yet passed &amp;&amp; we can reach\n        if (currentPos &lt; stationPos &amp;&amp; currentPos + currentFuel &gt;= stationPos) {\n            // Drive to station\n            int fuel = currentFuel - (stationPos - currentPos);\n            // Fill up gas\n            fuel += stationFuel;\n            // Continue\n            Integer res = helper(i, fuel, target, stations, depth + 1);\n            if (res != null &amp;&amp; (best == null || res &lt; best)) {\n                best = res;\n            }\n        }\n    }\n\n    // Return &quot;no can do&quot; or return number of stations (adding *this* station)\n    return best == null ? null : best + 1;\n}\n</code></pre>\n"}],"owner":{"account_id":18287208,"reputation":23,"user_id":13314829,"display_name":"IkhideIfidon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73425248,"answer_count":2,"score":0,"last_activity_date":1660984724,"creation_date":1660052814,"question_id":73292956,"body_markdown":"I have been trying to implement the ***recursive solution*** for the [Leetcode Minimum Number of Refueling Stops][1]. I came up with the solution below but it doesn&#39;t pass all test cases. I have put so much effort into this. I would appreciate a support.\r\nHere is my code so far:\r\n\r\n```\r\n    static int startTarget;\r\n    private static int helper(int target, int currentFuel, int start, int[][] stations, Map&lt;String, Integer&gt; memo) {\r\n        if (stations.length == 0)\r\n            return currentFuel &lt; target ? -1 : 0;\r\n\r\n        if (stations[0][0] &gt; currentFuel)\r\n            return -1;\r\n\r\n        String key = target + &quot;, &quot; + currentFuel;\r\n        if (memo.containsKey(key))\r\n            return memo.get(key);\r\n\r\n        if (currentFuel &gt;= target)\r\n            return 0;\r\n\r\n        if (start == stations.length)\r\n            return -1;\r\n\r\n        int min = Integer.MAX_VALUE;\r\n        for (int i = start; i &lt; stations.length; i++) {\r\n            int currentDistance = stations[i][0];\r\n            int initialDistance = startTarget - target;\r\n            int distance = currentDistance - initialDistance;\r\n            int fuel = stations[i][1];\r\n\r\n            if ((currentFuel - distance) &gt;= 0) {\r\n                int result = helper(target - distance, currentFuel + fuel - distance, i + 1, stations, memo);\r\n                if (result &gt;= 0 &amp;&amp; result &lt; min)\r\n                    min = 1 + result;\r\n            }\r\n\r\n        }\r\n        min = (min == Integer.MAX_VALUE) ? -1 : min;\r\n        memo.put(key, min);\r\n        return min;\r\n    }\r\n\r\n    public static  int minRefuelStopsBruteForce(int target, int startFuel, int[][] stations) {\r\n        startTarget = target;\r\n        int stops = helper(target, startFuel, 0, stations, new HashMap&lt;&gt;());\r\n        return stops != Integer.MAX_VALUE ? stops : -1;\r\n    }\r\n\r\n\r\n```\r\n\r\nPlease I am only interested in the recursive solution.Thanks\r\n  [1]: https://leetcode.com/problems/minimum-number-of-refueling-stops/","title":"How to come up with the Recursive solution for Leetcode Minimum Number of Refueling Stops","body":"<p>I have been trying to implement the <em><strong>recursive solution</strong></em> for the [Leetcode Minimum Number of Refueling Stops][1]. I came up with the solution below but it doesn't pass all test cases. I have put so much effort into this. I would appreciate a support.\nHere is my code so far:</p>\n<pre><code>    static int startTarget;\n    private static int helper(int target, int currentFuel, int start, int[][] stations, Map&lt;String, Integer&gt; memo) {\n        if (stations.length == 0)\n            return currentFuel &lt; target ? -1 : 0;\n\n        if (stations[0][0] &gt; currentFuel)\n            return -1;\n\n        String key = target + &quot;, &quot; + currentFuel;\n        if (memo.containsKey(key))\n            return memo.get(key);\n\n        if (currentFuel &gt;= target)\n            return 0;\n\n        if (start == stations.length)\n            return -1;\n\n        int min = Integer.MAX_VALUE;\n        for (int i = start; i &lt; stations.length; i++) {\n            int currentDistance = stations[i][0];\n            int initialDistance = startTarget - target;\n            int distance = currentDistance - initialDistance;\n            int fuel = stations[i][1];\n\n            if ((currentFuel - distance) &gt;= 0) {\n                int result = helper(target - distance, currentFuel + fuel - distance, i + 1, stations, memo);\n                if (result &gt;= 0 &amp;&amp; result &lt; min)\n                    min = 1 + result;\n            }\n\n        }\n        min = (min == Integer.MAX_VALUE) ? -1 : min;\n        memo.put(key, min);\n        return min;\n    }\n\n    public static  int minRefuelStopsBruteForce(int target, int startFuel, int[][] stations) {\n        startTarget = target;\n        int stops = helper(target, startFuel, 0, stations, new HashMap&lt;&gt;());\n        return stops != Integer.MAX_VALUE ? stops : -1;\n    }\n\n\n</code></pre>\n<p>Please I am only interested in the recursive solution.Thanks\n[1]: <a href=\"https://leetcode.com/problems/minimum-number-of-refueling-stops/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/minimum-number-of-refueling-stops/</a></p>\n"},{"tags":["java","postgresql","database-migration","flyway"],"answers":[{"tags":[],"owner":{"account_id":142616,"reputation":34832,"user_id":350428,"accept_rate":59,"display_name":"Axel Fontaine"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1521493467,"creation_date":1521493467,"answer_id":49372346,"question_id":49371490,"body_markdown":"You have to place your jar in the `&lt;flyway-install&gt;/jars` directory and use `-locations=classpath:db/migration`. \r\n\r\nSee https://flywaydb.org/documentation/commandline/#installation","title":"Can Flyway migrate from jar?","body":"<p>You have to place your jar in the <code>&lt;flyway-install&gt;/jars</code> directory and use <code>-locations=classpath:db/migration</code>. </p>\n\n<p>See <a href=\"https://flywaydb.org/documentation/commandline/#installation\" rel=\"nofollow noreferrer\">https://flywaydb.org/documentation/commandline/#installation</a></p>\n"},{"tags":[],"owner":{"account_id":1062473,"reputation":305,"user_id":1570821,"display_name":"Seyf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660984349,"creation_date":1660984349,"answer_id":73425212,"question_id":49371490,"body_markdown":"In my case migrations were in `BOOT-INF/classes/sql/migrations` folder of the jar file and flyway couldn&#39;t find it with `-locations=classpath:sql/migrations`\r\nBut it can reach it with full path like `-locations=classpath:BOOT-INF/classes/sql/migrations`","title":"Can Flyway migrate from jar?","body":"<p>In my case migrations were in <code>BOOT-INF/classes/sql/migrations</code> folder of the jar file and flyway couldn't find it with <code>-locations=classpath:sql/migrations</code>\nBut it can reach it with full path like <code>-locations=classpath:BOOT-INF/classes/sql/migrations</code></p>\n"}],"owner":{"account_id":4746587,"reputation":8612,"user_id":3837778,"accept_rate":71,"display_name":"BAE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3985,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1660984349,"creation_date":1521489862,"question_id":49371490,"body_markdown":"I have a subproject which is built into a jar file. There is `src/main/resources/db/migration/V1_1__create_table.sql` in the project.\r\n\r\nHow to run migrate from this jar?\r\n\r\nI tried this `./flyway migrate -url=jdbc:postgresql://127.0.0.1:5432/myproject -user=myproject -password=myproject -locations=classpath:~/src/myproject/target/myproject-0.0.1-SNAPSHOT.jar`, but I have got the following error:\r\n\r\n```Database: jdbc:postgresql://127.0.0.1:5432/myproject (PostgreSQL 9.6)\r\nWARNING: Unable to resolve location classpath:~/src/myproject/target/myprojectn-0/0/1-SNAPSHOT/jar\r\nWARNING: Schema &quot;public&quot; has version 0.0.6, but no migration could be resolved in the configured locations !```\r\n\r\nHow to run migration from the jar? Thanks.","title":"Can Flyway migrate from jar?","body":"<p>I have a subproject which is built into a jar file. There is <code>src/main/resources/db/migration/V1_1__create_table.sql</code> in the project.</p>\n\n<p>How to run migrate from this jar?</p>\n\n<p>I tried this <code>./flyway migrate -url=jdbc:postgresql://127.0.0.1:5432/myproject -user=myproject -password=myproject -locations=classpath:~/src/myproject/target/myproject-0.0.1-SNAPSHOT.jar</code>, but I have got the following error:</p>\n\n<p><code>Database: jdbc:postgresql://127.0.0.1:5432/myproject (PostgreSQL 9.6)\nWARNING: Unable to resolve location classpath:~/src/myproject/target/myprojectn-0/0/1-SNAPSHOT/jar\nWARNING: Schema \"public\" has version 0.0.6, but no migration could be resolved in the configured locations !</code></p>\n\n<p>How to run migration from the jar? Thanks.</p>\n"},{"tags":["java","spring","types","spring-aop"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1660758768,"post_id":73392597,"comment_id":129610702,"body_markdown":"I doubt it.. can you [edit] your question and add sample code as a [mcve]? Also, did you try it? What happened?","body":"I doubt it.. can you <a href=\"https://stackoverflow.com/posts/73392597/edit\">edit</a> your question and add sample code as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Also, did you try it? What happened?"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1660759160,"post_id":73392597,"comment_id":129610831,"body_markdown":"@Robert An MVCE and &quot;what happened&quot; are not suitable for &quot;how does existing advice-proxy infrastructure work?&quot; questions.","body":"@Robert An MVCE and &quot;what happened&quot; are not suitable for &quot;how does existing advice-proxy infrastructure work?&quot; questions."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1660768473,"post_id":73392597,"comment_id":129613925,"body_markdown":"@chrylis-cautiouslyoptimistic- Why not? MCVE to see exactly what the OP is doing. &quot;What happens?&quot; could answer the question already: &quot;Does Proxy downcasts it before sending it to main method?&quot;","body":"@chrylis-cautiouslyoptimistic- Why not? MCVE to see exactly what the OP is doing. &quot;What happens?&quot; could answer the question already: &quot;Does Proxy downcasts it before sending it to main method?&quot;"},{"owner":{"account_id":25864989,"reputation":31,"user_id":19596833,"display_name":"Pranav Kopnar"},"score":0,"creation_date":1660809716,"post_id":73392597,"comment_id":129621820,"body_markdown":"@Robert It displays the string without any error so it means proxy downcasts it to String from Object?","body":"@Robert It displays the string without any error so it means proxy downcasts it to String from Object?"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1660834567,"post_id":73392597,"comment_id":129631675,"body_markdown":"I&#39;d either use a debugger and check, or print the class name. My guess is that it preserves the original object type. There is no casting involved. You can e.g., do `List&lt;X&gt; list = new ArrayList&lt;X&gt;();` and `list` will always be an `ArrayList`, even if the compiler may allow you only to call `List` methods on it. If the pointcut did turn everything into `Object`, it would lose information, and it would break your code: your code would behave differently when a pointcut was involved vs when not, even if the pointuct didn&#39;t do anything. That would be weird.","body":"I&#39;d either use a debugger and check, or print the class name. My guess is that it preserves the original object type. There is no casting involved. You can e.g., do <code>List&lt;X&gt; list = new ArrayList&lt;X&gt;();</code> and <code>list</code> will always be an <code>ArrayList</code>, even if the compiler may allow you only to call <code>List</code> methods on it. If the pointcut did turn everything into <code>Object</code>, it would lose information, and it would break your code: your code would behave differently when a pointcut was involved vs when not, even if the pointuct didn&#39;t do anything. That would be weird."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1660834707,"post_id":73392597,"comment_id":129631762,"body_markdown":"The reason the pointcut uses `Object` is the same as why the `equals` method takes `Object`: that way it can be used with anything. That doesn&#39;t mean the parameter gets actually converted to plain `Object` or that you cannot (manually) cast it to its real class.","body":"The reason the pointcut uses <code>Object</code> is the same as why the <code>equals</code> method takes <code>Object</code>: that way it can be used with anything. That doesn&#39;t mean the parameter gets actually converted to plain <code>Object</code> or that you cannot (manually) cast it to its real class."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1660984463,"post_id":73392597,"comment_id":129666422,"body_markdown":"In the debugger, you are not going to see any casts happening, because the debugger does not display any decompiled byte code for dynamic proxies. Cf. my answer below.","body":"In the debugger, you are not going to see any casts happening, because the debugger does not display any decompiled byte code for dynamic proxies. Cf. my answer below."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660984288,"creation_date":1660982983,"answer_id":73425060,"question_id":73392597,"body_markdown":"There is no casting within the Spring AOP core classes themselves, because they only pass along `Object`s when delegating method calls to AOP proxies. The user is responsible to return the correct type from the `@Around` advice. But of course, there is a final cast, which you can clearly see if you e.g. make the advice return something other than the actual return type of the intercepted method. Then you will see an exception like:\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.String cannot be cast to class de.scrum_master.spring.q59783423.HoldResponse (java.lang.String is in module java.base of loader &#39;bootstrap&#39;; de.scrum_master.spring.q59783423.HoldResponse is in unnamed module of loader &#39;app&#39;)\r\n\tat de.scrum_master.spring.q59783423.HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.execute(&lt;generated&gt;)\r\n\tat de.scrum_master.spring.q59783423.MyApplication.doStuff(MyApplication.java:46)\r\n\tat de.scrum_master.spring.q59783423.MyApplication.main(MyApplication.java:22)\r\n```\r\n\r\nIn this example, I made my around advice falsely return a `String` instead of a `HoldResponse`. You can see that the `ClassCastException` occurs within the dynamic proxy generated by Spring, in this case a CGLIB proxy (could also be a JDK proxy, depending on the circumstances). So there is actually a cast happening, otherwise there would not be a class cast exception.\r\n\r\nWhen dumping the proxy&#39;s byte code using the little agent I described in [this answer](https://stackoverflow.com/a/62748500/1082681), you will see something like:\r\n\r\n```none\r\n  public final doExecute(Lde/scrum_master/spring/q59783423/HoldRequest;)Lde/scrum_master/spring/q59783423/HoldResponse; throws de/scrum_master/spring/q59783423/PaymentServiceException \r\n    ALOAD 0\r\n    GETFIELD de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$CALLBACK_0 : Lorg/springframework/cglib/proxy/MethodInterceptor;\r\n    DUP\r\n    IFNONNULL L0\r\n    POP\r\n    ALOAD 0\r\n    INVOKESTATIC de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$BIND_CALLBACKS (Ljava/lang/Object;)V\r\n    ALOAD 0\r\n    GETFIELD de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$CALLBACK_0 : Lorg/springframework/cglib/proxy/MethodInterceptor;\r\n   L0\r\n    DUP\r\n    IFNULL L1\r\n    ALOAD 0\r\n    GETSTATIC de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$doExecute$0$Method : Ljava/lang/reflect/Method;\r\n    ICONST_1\r\n    ANEWARRAY java/lang/Object\r\n    DUP\r\n    ICONST_0\r\n    ALOAD 1\r\n    AASTORE\r\n    GETSTATIC de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$doExecute$0$Proxy : Lorg/springframework/cglib/proxy/MethodProxy;\r\n    INVOKEINTERFACE org/springframework/cglib/proxy/MethodInterceptor.intercept (Ljava/lang/Object;Ljava/lang/reflect/Method;[Ljava/lang/Object;Lorg/springframework/cglib/proxy/MethodProxy;)Ljava/lang/Object; (itf)\r\n    CHECKCAST de/scrum_master/spring/q59783423/HoldResponse\r\n    ARETURN\r\n   L1\r\n    ALOAD 0\r\n    ALOAD 1\r\n    INVOKESPECIAL de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService.doExecute (Lde/scrum_master/spring/q59783423/HoldRequest;)Lde/scrum_master/spring/q59783423/HoldResponse;\r\n    ARETURN\r\n    MAXSTACK = 7\r\n    MAXLOCALS = 2\r\n```\r\n\r\nPlease especially note\r\n\r\n```none\r\n    INVOKEINTERFACE org/springframework/cglib/proxy/MethodInterceptor.intercept (Ljava/lang/Object;Ljava/lang/reflect/Method;[Ljava/lang/Object;Lorg/springframework/cglib/proxy/MethodProxy;)Ljava/lang/Object; (itf)\r\n    CHECKCAST de/scrum_master/spring/q59783423/HoldResponse\r\n```\r\n\r\nI.e., the proxy calls `org.springframework.cglib.proxy.MethodInterceptor#intercept` and then casts the result to the intercepted method&#39;s return type. There you have your Spring AOP magic.\r\n\r\n_Interesting question, actually._ &#128077;\r\n\r\n---\r\n\r\nBTW, if you wish to make your around advice more specific, you may give it a return type other than `Object`. But then you need to cast the result of `proceed()` before returning it. In Spring AOP, you are responsible for declaring a return type matching the intercepted method(s). In native AspectJ, declaring a specific return type would automatically narrow down matching to joinpoints compatible with the return type, which is not the case in Spring AOP.","title":"Spring AOP @Around advice return type","body":"<p>There is no casting within the Spring AOP core classes themselves, because they only pass along <code>Object</code>s when delegating method calls to AOP proxies. The user is responsible to return the correct type from the <code>@Around</code> advice. But of course, there is a final cast, which you can clearly see if you e.g. make the advice return something other than the actual return type of the intercepted method. Then you will see an exception like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.String cannot be cast to class de.scrum_master.spring.q59783423.HoldResponse (java.lang.String is in module java.base of loader 'bootstrap'; de.scrum_master.spring.q59783423.HoldResponse is in unnamed module of loader 'app')\n    at de.scrum_master.spring.q59783423.HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.execute(&lt;generated&gt;)\n    at de.scrum_master.spring.q59783423.MyApplication.doStuff(MyApplication.java:46)\n    at de.scrum_master.spring.q59783423.MyApplication.main(MyApplication.java:22)\n</code></pre>\n<p>In this example, I made my around advice falsely return a <code>String</code> instead of a <code>HoldResponse</code>. You can see that the <code>ClassCastException</code> occurs within the dynamic proxy generated by Spring, in this case a CGLIB proxy (could also be a JDK proxy, depending on the circumstances). So there is actually a cast happening, otherwise there would not be a class cast exception.</p>\n<p>When dumping the proxy's byte code using the little agent I described in <a href=\"https://stackoverflow.com/a/62748500/1082681\">this answer</a>, you will see something like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>  public final doExecute(Lde/scrum_master/spring/q59783423/HoldRequest;)Lde/scrum_master/spring/q59783423/HoldResponse; throws de/scrum_master/spring/q59783423/PaymentServiceException \n    ALOAD 0\n    GETFIELD de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$CALLBACK_0 : Lorg/springframework/cglib/proxy/MethodInterceptor;\n    DUP\n    IFNONNULL L0\n    POP\n    ALOAD 0\n    INVOKESTATIC de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$BIND_CALLBACKS (Ljava/lang/Object;)V\n    ALOAD 0\n    GETFIELD de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$CALLBACK_0 : Lorg/springframework/cglib/proxy/MethodInterceptor;\n   L0\n    DUP\n    IFNULL L1\n    ALOAD 0\n    GETSTATIC de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$doExecute$0$Method : Ljava/lang/reflect/Method;\n    ICONST_1\n    ANEWARRAY java/lang/Object\n    DUP\n    ICONST_0\n    ALOAD 1\n    AASTORE\n    GETSTATIC de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService$$EnhancerBySpringCGLIB$$13706881.CGLIB$doExecute$0$Proxy : Lorg/springframework/cglib/proxy/MethodProxy;\n    INVOKEINTERFACE org/springframework/cglib/proxy/MethodInterceptor.intercept (Ljava/lang/Object;Ljava/lang/reflect/Method;[Ljava/lang/Object;Lorg/springframework/cglib/proxy/MethodProxy;)Ljava/lang/Object; (itf)\n    CHECKCAST de/scrum_master/spring/q59783423/HoldResponse\n    ARETURN\n   L1\n    ALOAD 0\n    ALOAD 1\n    INVOKESPECIAL de/scrum_master/spring/q59783423/HoldPaymentOrchestrationService.doExecute (Lde/scrum_master/spring/q59783423/HoldRequest;)Lde/scrum_master/spring/q59783423/HoldResponse;\n    ARETURN\n    MAXSTACK = 7\n    MAXLOCALS = 2\n</code></pre>\n<p>Please especially note</p>\n<pre class=\"lang-none prettyprint-override\"><code>    INVOKEINTERFACE org/springframework/cglib/proxy/MethodInterceptor.intercept (Ljava/lang/Object;Ljava/lang/reflect/Method;[Ljava/lang/Object;Lorg/springframework/cglib/proxy/MethodProxy;)Ljava/lang/Object; (itf)\n    CHECKCAST de/scrum_master/spring/q59783423/HoldResponse\n</code></pre>\n<p>I.e., the proxy calls <code>org.springframework.cglib.proxy.MethodInterceptor#intercept</code> and then casts the result to the intercepted method's return type. There you have your Spring AOP magic.</p>\n<p><em>Interesting question, actually.</em> 👍</p>\n<hr />\n<p>BTW, if you wish to make your around advice more specific, you may give it a return type other than <code>Object</code>. But then you need to cast the result of <code>proceed()</code> before returning it. In Spring AOP, you are responsible for declaring a return type matching the intercepted method(s). In native AspectJ, declaring a specific return type would automatically narrow down matching to joinpoints compatible with the return type, which is not the case in Spring AOP.</p>\n"}],"owner":{"account_id":25864989,"reputation":31,"user_id":19596833,"display_name":"Pranav Kopnar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1372,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73425060,"answer_count":1,"score":1,"last_activity_date":1660984288,"creation_date":1660756967,"question_id":73392597,"body_markdown":"I am learning Spring AOP and I know that in @Around advice we use Object return type because the return value of the target method can be of any type.\r\nBut my question is when the return value is downcasted to actual return type?\r\nDoes Proxy downcasts it before sending it to main method(where the target method was called)? \r\n\r\nIn Main - \r\n\r\n    String result = account.getAccountHolderName();\r\n\r\nIn aspect class - \r\n\r\n    @Around(&quot;execution(* getAccountHolderName())&quot;)\r\n    public Object myAroundAdvice(ProceedingJoinPoint joinPoint)  \r\n    {\r\n       Object result = joinPoint.proceed();\r\n\r\n       return result;\r\n    }\r\n\r\nI want to know when the result is downcasted to String class after returning from the advice as an Object","title":"Spring AOP @Around advice return type","body":"<p>I am learning Spring AOP and I know that in @Around advice we use Object return type because the return value of the target method can be of any type.\nBut my question is when the return value is downcasted to actual return type?\nDoes Proxy downcasts it before sending it to main method(where the target method was called)?</p>\n<p>In Main -</p>\n<pre><code>String result = account.getAccountHolderName();\n</code></pre>\n<p>In aspect class -</p>\n<pre><code>@Around(&quot;execution(* getAccountHolderName())&quot;)\npublic Object myAroundAdvice(ProceedingJoinPoint joinPoint)  \n{\n   Object result = joinPoint.proceed();\n\n   return result;\n}\n</code></pre>\n<p>I want to know when the result is downcasted to String class after returning from the advice as an Object</p>\n"},{"tags":["java","math","formula"],"comments":[{"owner":{"account_id":85671,"reputation":40848,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1660851470,"post_id":73406110,"comment_id":129637715,"body_markdown":"Each term in the series is an integer, therefore the series will always be integer valued. Therefore x = 11 will not give you 3.0198773447, it will give an integer which I calculate as -101939302914483595906.","body":"Each term in the series is an integer, therefore the series will always be integer valued. Therefore x = 11 will not give you 3.0198773447, it will give an integer which I calculate as -101939302914483595906."},{"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":1,"creation_date":1660874453,"post_id":73406110,"comment_id":129642305,"body_markdown":"you do not need to iterate the nested for loop from 1 but from last amount instead of computing the same factorials again and again, you should keep the subresult of `(2i)!/i`  as small as possible to not overflow/round too soon...  its basicaly the same as in here (see the second half of this answer:) [My program for calculating pi using Chudnovsky in C++ precision problem](https://stackoverflow.com/a/73258767/2521214)","body":"you do not need to iterate the nested for loop from 1 but from last amount instead of computing the same factorials again and again, you should keep the subresult of <code>(2i)!&#47;i</code>  as small as possible to not overflow/round too soon...  its basicaly the same as in here (see the second half of this answer:) <a href=\"https://stackoverflow.com/a/73258767/2521214\">My program for calculating pi using Chudnovsky in C++ precision problem</a>"},{"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":0,"creation_date":1660983563,"post_id":73406110,"comment_id":129666269,"body_markdown":"also as @PresidentJamesK.Polk suggest the series is integer only, you obviously used floating point `double` with 53 bits of mantissa which got rounded once you hit numbers above `(2^53)-1` however you should not have any digits after decimal point so where did the `3.0198773447` come from? Or You have the equation wrong and it should be `P = 1/2! + 2/4! - ... i/(2i)!`  however that leads to `~0.4244` instead.","body":"also as @PresidentJamesK.Polk suggest the series is integer only, you obviously used floating point <code>double</code> with 53 bits of mantissa which got rounded once you hit numbers above <code>(2^53)-1</code> however you should not have any digits after decimal point so where did the <code>3.0198773447</code> come from? Or You have the equation wrong and it should be <code>P = 1&#47;2! + 2&#47;4! - ... i&#47;(2i)!</code>  however that leads to <code>~0.4244</code> instead."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660838974,"creation_date":1660838974,"answer_id":73406322,"question_id":73406110,"body_markdown":"If you type in `11`, that means `contador1` will become as high as 22 (you will loop 11 times, every loop you first increment `contador`, and `contador1` is twice that, so, 22. In other words, you&#39;ll end up having to calculate 22!.\r\n\r\nThe `int` type __does not hold any arbitrary integer__. It can only hold integers between -2^31 and +2^31-1. If you try to go beyond those bounds, it just loops around. Witness it in action:\r\n\r\n```\r\nint x = Integer.MAX_VALUE; // a constant representing 2^31-1.\r\nint y = x + 1;\r\nSystem.out.println(x);\r\nSystem.out.println(y);\r\n\r\n// Prints: 2147483647\r\n//        -2147483648\r\n```\r\n\r\nWhere&#39;d that minus come from? That&#39;s that whole &#39;loops around&#39; thing. 22! is much lager than than this upper bound. Hence, your code doesn&#39;t work and it also explains why your algorithm tosses a negative number in there.\r\n\r\nYou could choose to use `long` instead which can hold it, but `long`, too, has limits - 2^63-1 to be precise. You could use `double` which goes ever further (up to about `1e308` which is a lot more than 2^63), but doubles are __not accurate__ and the lack of accuracy gets worse as you move further away from 0. Past 2^53 or so, the distance between 2 representable numbers in the `double` range is __more__ than `1`, meaning, `+1` no longer does anything (all operations on `double` values are rounded to the nearest representable double after every operation).\r\n\r\nMore generally trying to do &#39;math&#39; on really large numbers is a non-trivial affair, and your basic `+` and `/` can no longer get the job done. Look up the API of [`BigDecimal`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html) which guarantees you perfect accuracy  at the cost of, naturally, performance. You could use that, and get perfect answers. Though it&#39;ll take a while.","title":"for X terms, find P = (2! /1) + (!4/2) - (!6/3) ... and my code works for every test but one","body":"<p>If you type in <code>11</code>, that means <code>contador1</code> will become as high as 22 (you will loop 11 times, every loop you first increment <code>contador</code>, and <code>contador1</code> is twice that, so, 22. In other words, you'll end up having to calculate 22!.</p>\n<p>The <code>int</code> type <strong>does not hold any arbitrary integer</strong>. It can only hold integers between -2^31 and +2^31-1. If you try to go beyond those bounds, it just loops around. Witness it in action:</p>\n<pre><code>int x = Integer.MAX_VALUE; // a constant representing 2^31-1.\nint y = x + 1;\nSystem.out.println(x);\nSystem.out.println(y);\n\n// Prints: 2147483647\n//        -2147483648\n</code></pre>\n<p>Where'd that minus come from? That's that whole 'loops around' thing. 22! is much lager than than this upper bound. Hence, your code doesn't work and it also explains why your algorithm tosses a negative number in there.</p>\n<p>You could choose to use <code>long</code> instead which can hold it, but <code>long</code>, too, has limits - 2^63-1 to be precise. You could use <code>double</code> which goes ever further (up to about <code>1e308</code> which is a lot more than 2^63), but doubles are <strong>not accurate</strong> and the lack of accuracy gets worse as you move further away from 0. Past 2^53 or so, the distance between 2 representable numbers in the <code>double</code> range is <strong>more</strong> than <code>1</code>, meaning, <code>+1</code> no longer does anything (all operations on <code>double</code> values are rounded to the nearest representable double after every operation).</p>\n<p>More generally trying to do 'math' on really large numbers is a non-trivial affair, and your basic <code>+</code> and <code>/</code> can no longer get the job done. Look up the API of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a> which guarantees you perfect accuracy  at the cost of, naturally, performance. You could use that, and get perfect answers. Though it'll take a while.</p>\n"}],"owner":{"account_id":26099776,"reputation":11,"user_id":19795395,"display_name":"fennekinho"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660983680,"creation_date":1660837928,"question_id":73406110,"body_markdown":"For this formula:\r\n\r\n![formula][1]\r\n\r\n\r\n  \r\nI had to make a method to automate it, and I&#39;ve received 4 examples to try it out.\r\n\r\nx = 1 &gt; p = 2\r\n\r\nx = 3 &gt; p = -226\r\n\r\nx = 4 &gt; p = 9854\r\n\r\nhowever, when I insert 11 the answer should be 3.0198773447 and I receive -1.78316945E8 instead :/\r\n\r\nhere is my code:\r\n```\r\nSystem.out.println(&quot;Insira o numero: &quot;);\r\n    int x = input.nextInt();\r\n    int fat = 1;\r\n   int contador = 0;\r\n   int contador1 = 0;\r\n   double p  = 0;\r\n  for(double i = 1; i &lt;=x; i++){\r\n    fat = 1;\r\n    contador++;\r\n    contador1 = contador* 2;\r\n    for(double j = 1; j &lt;= contador1; j++){\r\n      fat *=j;\r\n\r\n    }\r\n    if(contador &lt;=1){\r\n      p += fat / contador;\r\n    }\r\n    if(contador % 2 ==0 &amp;&amp; contador &gt; 1){ \r\n    p += fat / contador;\r\n    }else if( contador % 2 != 0 &amp;&amp; contador &gt; 1){\r\n      p -= fat / contador;\r\n    }\r\n  }\r\n  System.out.println(p);\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/llPeA.png","title":"for X terms, find P = (2! /1) + (!4/2) - (!6/3) ... and my code works for every test but one","body":"<p>For this formula:</p>\n<p><img src=\"https://i.stack.imgur.com/llPeA.png\" alt=\"formula\" /></p>\n<p>I had to make a method to automate it, and I've received 4 examples to try it out.</p>\n<p>x = 1 &gt; p = 2</p>\n<p>x = 3 &gt; p = -226</p>\n<p>x = 4 &gt; p = 9854</p>\n<p>however, when I insert 11 the answer should be 3.0198773447 and I receive -1.78316945E8 instead :/</p>\n<p>here is my code:</p>\n<pre><code>System.out.println(&quot;Insira o numero: &quot;);\n    int x = input.nextInt();\n    int fat = 1;\n   int contador = 0;\n   int contador1 = 0;\n   double p  = 0;\n  for(double i = 1; i &lt;=x; i++){\n    fat = 1;\n    contador++;\n    contador1 = contador* 2;\n    for(double j = 1; j &lt;= contador1; j++){\n      fat *=j;\n\n    }\n    if(contador &lt;=1){\n      p += fat / contador;\n    }\n    if(contador % 2 ==0 &amp;&amp; contador &gt; 1){ \n    p += fat / contador;\n    }else if( contador % 2 != 0 &amp;&amp; contador &gt; 1){\n      p -= fat / contador;\n    }\n  }\n  System.out.println(p);\n</code></pre>\n"},{"tags":["java","json","gson","pojo"],"comments":[{"owner":{"account_id":4447289,"reputation":738,"user_id":3620242,"display_name":"maddy23285"},"score":0,"creation_date":1660988623,"post_id":73424990,"comment_id":129667021,"body_markdown":"Alternate suggestion, instead of `Map&lt;String, String&gt; keyValuePairs;` you can use `JsonObject keyValuePairs;` I believe this could work.","body":"Alternate suggestion, instead of <code>Map&lt;String, String&gt; keyValuePairs;</code> you can use <code>JsonObject keyValuePairs;</code> I believe this could work."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660983362,"creation_date":1660983362,"answer_id":73425103,"question_id":73424990,"body_markdown":"The `V1` and `V2` types are unnecessary, because in the JSON, the dictionaries you want are directly associated with the keys &quot;v1&quot; and &quot;v2&quot;. Therefore, the types of the fields `v1` and `v2` should be `Map&lt;String, String&gt;`:\r\n\r\n```\r\nclass MyModel {\r\n    private String displayName;\r\n    private String id;\r\n    private StepDetails stepDetails;\r\n\r\n    // getters...\r\n}\r\n\r\nclass StepDetails {\r\n    private Map&lt;String, String&gt; v1;\r\n    private Map&lt;String, String&gt; v2;\r\n\r\n    // getters...\r\n}\r\n```","title":"How to convert json to nested Maps using Gson?","body":"<p>The <code>V1</code> and <code>V2</code> types are unnecessary, because in the JSON, the dictionaries you want are directly associated with the keys &quot;v1&quot; and &quot;v2&quot;. Therefore, the types of the fields <code>v1</code> and <code>v2</code> should be <code>Map&lt;String, String&gt;</code>:</p>\n<pre><code>class MyModel {\n    private String displayName;\n    private String id;\n    private StepDetails stepDetails;\n\n    // getters...\n}\n\nclass StepDetails {\n    private Map&lt;String, String&gt; v1;\n    private Map&lt;String, String&gt; v2;\n\n    // getters...\n}\n</code></pre>\n"}],"owner":{"account_id":4765333,"reputation":2366,"user_id":3851567,"accept_rate":64,"display_name":"David Velasquez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73425103,"answer_count":1,"score":1,"last_activity_date":1660983362,"creation_date":1660982232,"question_id":73424990,"body_markdown":"I have a POJO `MyModel.java`:\r\n\r\n    public class MyModel {\r\n      String displayName;\r\n      String id;\r\n      StepDetails stepDetails;\r\n    }\r\n\r\nIn `StepDetails.java` I have:\r\n\r\n    public class StepDetails {\r\n      V1 v1;\r\n      V2 v2;\r\n    }\r\n\r\nIn `V1.java` and `V2.java`, both are identical with only a Map field `keyValuePairs`:\r\n\r\n    public class V1 {\r\n      Map&lt;String, String&gt; keyValuePairs;\r\n    }\r\n\r\nExample of my json string:\r\n\r\n    {\r\n      &quot;displayName&quot;: &quot;My Name&quot;,\r\n      &quot;id&quot;: &quot;id123&quot;,\r\n      &quot;stepDetails&quot;: {\r\n        &quot;v1&quot;: {\r\n          &quot;key1&quot;: &quot;val1&quot;,\r\n          &quot;key2&quot;: &quot;val2&quot;\r\n        },\r\n        &quot;v2&quot;: {\r\n          &quot;key1&quot;: &quot;val1&quot;,\r\n          &quot;key2&quot;: &quot;val2&quot;\r\n        }\r\n      }\r\n    }\r\n\r\nWhen I try to convert my json string to my model using Gson, the `displayName` and `id` fields in `MyModel` are populated fine, but the maps inside the `v1` and `v2` objects are null. This is what I&#39;m currently doing:\r\n\r\n    MyModel myModel = new Gson().fromJson(jsonString, MyModel.class);\r\n\r\nI&#39;ve looked at several SO posts but they all seem to suggest using some form of `TypeToken` such as:\r\n\r\n    new Gson().fromJson(jsonString, new TypeToken&lt;MyModel&gt;(){}.getType());\r\n\r\nI tried it but the map fields are still not populated.","title":"How to convert json to nested Maps using Gson?","body":"<p>I have a POJO <code>MyModel.java</code>:</p>\n<pre><code>public class MyModel {\n  String displayName;\n  String id;\n  StepDetails stepDetails;\n}\n</code></pre>\n<p>In <code>StepDetails.java</code> I have:</p>\n<pre><code>public class StepDetails {\n  V1 v1;\n  V2 v2;\n}\n</code></pre>\n<p>In <code>V1.java</code> and <code>V2.java</code>, both are identical with only a Map field <code>keyValuePairs</code>:</p>\n<pre><code>public class V1 {\n  Map&lt;String, String&gt; keyValuePairs;\n}\n</code></pre>\n<p>Example of my json string:</p>\n<pre><code>{\n  &quot;displayName&quot;: &quot;My Name&quot;,\n  &quot;id&quot;: &quot;id123&quot;,\n  &quot;stepDetails&quot;: {\n    &quot;v1&quot;: {\n      &quot;key1&quot;: &quot;val1&quot;,\n      &quot;key2&quot;: &quot;val2&quot;\n    },\n    &quot;v2&quot;: {\n      &quot;key1&quot;: &quot;val1&quot;,\n      &quot;key2&quot;: &quot;val2&quot;\n    }\n  }\n}\n</code></pre>\n<p>When I try to convert my json string to my model using Gson, the <code>displayName</code> and <code>id</code> fields in <code>MyModel</code> are populated fine, but the maps inside the <code>v1</code> and <code>v2</code> objects are null. This is what I'm currently doing:</p>\n<pre><code>MyModel myModel = new Gson().fromJson(jsonString, MyModel.class);\n</code></pre>\n<p>I've looked at several SO posts but they all seem to suggest using some form of <code>TypeToken</code> such as:</p>\n<pre><code>new Gson().fromJson(jsonString, new TypeToken&lt;MyModel&gt;(){}.getType());\n</code></pre>\n<p>I tried it but the map fields are still not populated.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":22755735,"reputation":555,"user_id":16915219,"display_name":"JumperBot_"},"score":1,"creation_date":1658401966,"post_id":73064973,"comment_id":129045136,"body_markdown":"I suggest getting help from the code owner/writer themselves since you don&#39;t know how this works and you would certainly not want to ruin it, this persion seems to be a ***Tobias Brunner***.","body":"I suggest getting help from the code owner/writer themselves since you don&#39;t know how this works and you would certainly not want to ruin it, this persion seems to be a <b><i>Tobias Brunner</i></b>."},{"owner":{"account_id":18279520,"reputation":11,"user_id":13308576,"display_name":"Mete Oğuzhan Bayrampınar"},"score":0,"creation_date":1658416467,"post_id":73064973,"comment_id":129051255,"body_markdown":"When I talked to the developer about this problem, he said that this problem can be solved by google, but I don&#39;t understand it.","body":"When I talked to the developer about this problem, he said that this problem can be solved by google, but I don&#39;t understand it."},{"owner":{"account_id":3005837,"reputation":5552,"user_id":2550406,"accept_rate":88,"display_name":"lucidbrot"},"score":0,"creation_date":1658417256,"post_id":73064973,"comment_id":129051551,"body_markdown":"@MeteOğuzhanBayrampınar The link you posted is exactly what is relevant, and it states several options on how to deal with this issue. They are meant for the developer, and the developer will have to apply the fix. That said, you can of course decide to learn to fix it yourself instead. In that case, could you please make clearer why an answer that simply says what your link says is not enough? What have you tried? Where are you stuck?","body":"@MeteOğuzhanBayrampınar The link you posted is exactly what is relevant, and it states several options on how to deal with this issue. They are meant for the developer, and the developer will have to apply the fix. That said, you can of course decide to learn to fix it yourself instead. In that case, could you please make clearer why an answer that simply says what your link says is not enough? What have you tried? Where are you stuck?"},{"owner":{"account_id":18279520,"reputation":11,"user_id":13308576,"display_name":"Mete Oğuzhan Bayrampınar"},"score":0,"creation_date":1658418374,"post_id":73064973,"comment_id":129052000,"body_markdown":"I can solve this problem, but I don&#39;t have a place to test it because I get this error when I try to upload it to google play console. Since I don&#39;t know Java, I wanted to ask someone more knowledgeable about this. @lucidbrot","body":"I can solve this problem, but I don&#39;t have a place to test it because I get this error when I try to upload it to google play console. Since I don&#39;t know Java, I wanted to ask someone more knowledgeable about this. @lucidbrot"},{"owner":{"account_id":271812,"reputation":398,"user_id":562552,"accept_rate":79,"display_name":"Realbitt"},"score":0,"creation_date":1660744778,"post_id":73064973,"comment_id":129605224,"body_markdown":"did u find any solutions for this ?","body":"did u find any solutions for this ?"}],"answers":[{"tags":[],"owner":{"account_id":18279520,"reputation":11,"user_id":13308576,"display_name":"Mete Oğuzhan Bayrampınar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660982145,"creation_date":1660982145,"answer_id":73424988,"question_id":73064973,"body_markdown":"The solution will be as follows.\r\n```\r\n\t/**\r\n\t * Create a pending intent to execute a job.\r\n\t *\r\n\t * @return pending intent\r\n\t */\r\n\tprivate PendingIntent createIntent()\r\n\t{\r\n\t\t/* using component/class doesn&#39;t work with dynamic broadcast receivers */\r\n\t\tIntent intent = new Intent(EXECUTE_JOB);\r\n\t\tintent.setPackage(mContext.getPackageName());\r\n\t\tint flags = 0;\r\n\t\tif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M)\r\n\t\t{\r\n\t\t\tflags |= PendingIntent.FLAG_IMMUTABLE;\r\n\t\t}\r\n\t\treturn PendingIntent.getBroadcast(mContext, 0, intent, flags);\r\n\t}\r\n```","title":"Remediation for Implicit PendingIntent Vulnerability","body":"<p>The solution will be as follows.</p>\n<pre><code>    /**\n     * Create a pending intent to execute a job.\n     *\n     * @return pending intent\n     */\n    private PendingIntent createIntent()\n    {\n        /* using component/class doesn't work with dynamic broadcast receivers */\n        Intent intent = new Intent(EXECUTE_JOB);\n        intent.setPackage(mContext.getPackageName());\n        int flags = 0;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M)\n        {\n            flags |= PendingIntent.FLAG_IMMUTABLE;\n        }\n        return PendingIntent.getBroadcast(mContext, 0, intent, flags);\n    }\n</code></pre>\n"}],"owner":{"account_id":18279520,"reputation":11,"user_id":13308576,"display_name":"Mete Oğuzhan Bayrampınar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73424988,"answer_count":1,"score":1,"last_activity_date":1660982145,"creation_date":1658401042,"question_id":73064973,"body_markdown":"I don&#39;t know much about Java so I wanted to ask you how I can solve this problem.\r\n\r\nWhen I try to publish my Android application, I get the following error. https://i.ibb.co/KGD2906/Screen-Shot-2022-07-18-at-23-18-11.png\r\n\r\nI leave below the solution suggested by Google.\r\nhttps://support.google.com/faqs/answer/10437428\r\n\r\nI found the problem code\r\n```\r\nimport android.app.AlarmManager;\r\nimport android.app.PendingIntent;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.os.Build;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.PriorityQueue;\r\nimport java.util.UUID;\r\n\r\nimport androidx.annotation.RequiresApi;\r\n\r\npublic class Scheduler extends BroadcastReceiver\r\n{\r\n    private final String EXECUTE_JOB = &quot;org.strongswan.android.Scheduler.EXECUTE_JOB&quot;;\r\n    private final Context mContext;\r\n    private final AlarmManager mManager;\r\n    private final PriorityQueue&lt;ScheduledJob&gt; mJobs;\r\n\r\n    public Scheduler(Context context)\r\n    {\r\n        mContext = context;\r\n        mManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);\r\n        mJobs = new PriorityQueue&lt;&gt;();\r\n\r\n        IntentFilter filter = new IntentFilter();\r\n        filter.addAction(EXECUTE_JOB);\r\n        mContext.registerReceiver(this, filter);\r\n    }\r\n\r\n    /**\r\n     * Remove all pending jobs and unregister the receiver.\r\n     * Called via JNI.\r\n     */\r\n    public void Terminate()\r\n    {\r\n        synchronized (this)\r\n        {\r\n            mJobs.clear();\r\n        }\r\n        mManager.cancel(createIntent());\r\n        mContext.unregisterReceiver(this);\r\n    }\r\n\r\n    /**\r\n     * Allocate a job ID. Called via JNI.\r\n     *\r\n     * @return random ID for a new job\r\n     */\r\n    public String allocateId()\r\n    {\r\n        return UUID.randomUUID().toString();\r\n    }\r\n\r\n    /**\r\n     * Create a pending intent to execute a job.\r\n     *\r\n     * @return pending intent\r\n     */\r\n    private PendingIntent createIntent()\r\n    {\r\n        /* using component/class doesn&#39;t work with dynamic broadcast receivers */\r\n        Intent intent = new Intent(EXECUTE_JOB);\r\n        intent.setPackage(mContext.getPackageName());\r\n        return PendingIntent.getBroadcast(mContext, 0, intent, 0);\r\n    }\r\n\r\n    /**\r\n     * Schedule executing a job in the future.\r\n     * Called via JNI from different threads.\r\n     *\r\n     * @param id job ID\r\n     * @param ms delta in milliseconds when the job should be executed\r\n     */\r\n    @RequiresApi(api = Build.VERSION_CODES.M)\r\n    public void scheduleJob(String id, long ms)\r\n    {\r\n        synchronized (this)\r\n        {\r\n            ScheduledJob job = new ScheduledJob(id, System.currentTimeMillis() + ms);\r\n            mJobs.add(job);\r\n\r\n            if (job == mJobs.peek())\r\n            {\t/* update the alarm if the job has to be executed before all others */\r\n                PendingIntent pending = createIntent();\r\n                mManager.setExactAndAllowWhileIdle(AlarmManager.RTC_WAKEUP, job.Time, pending);\r\n            }\r\n        }\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.M)\r\n    @Override\r\n    public void onReceive(Context context, Intent intent)\r\n    {\r\n        ArrayList&lt;ScheduledJob&gt; jobs = new ArrayList&lt;&gt;();\r\n        long now = System.currentTimeMillis();\r\n\r\n        synchronized (this)\r\n        {\r\n            ScheduledJob job = mJobs.peek();\r\n            while (job != null)\r\n            {\r\n                if (job.Time &gt; now)\r\n                {\r\n                    break;\r\n                }\r\n                jobs.add(mJobs.remove());\r\n                job = mJobs.peek();\r\n            }\r\n            if (job != null)\r\n            {\r\n                PendingIntent pending = createIntent();\r\n                mManager.setExactAndAllowWhileIdle(AlarmManager.RTC_WAKEUP, job.Time, pending);\r\n            }\r\n        }\r\n\r\n        for (ScheduledJob job : jobs)\r\n        {\r\n            executeJob(job.Id);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Execute the job with the given ID.\r\n     *\r\n     * @param id job ID\r\n     */\r\n    public native void executeJob(String id);\r\n\r\n    /**\r\n     * Keep track of scheduled jobs.\r\n     */\r\n    private static class ScheduledJob implements Comparable&lt;ScheduledJob&gt;\r\n    {\r\n        String Id;\r\n        long Time;\r\n\r\n        ScheduledJob(String id, long time)\r\n        {\r\n            Id = id;\r\n            Time = time;\r\n        }\r\n\r\n        @Override\r\n        public int compareTo(ScheduledJob o)\r\n        {\r\n            return Long.compare(Time, o.Time);\r\n        }\r\n    }\r\n}\r\n","title":"Remediation for Implicit PendingIntent Vulnerability","body":"<p>I don't know much about Java so I wanted to ask you how I can solve this problem.</p>\n<p>When I try to publish my Android application, I get the following error. <a href=\"https://i.ibb.co/KGD2906/Screen-Shot-2022-07-18-at-23-18-11.png\" rel=\"nofollow noreferrer\">https://i.ibb.co/KGD2906/Screen-Shot-2022-07-18-at-23-18-11.png</a></p>\n<p>I leave below the solution suggested by Google.\n<a href=\"https://support.google.com/faqs/answer/10437428\" rel=\"nofollow noreferrer\">https://support.google.com/faqs/answer/10437428</a></p>\n<p>I found the problem code</p>\n<pre><code>import android.app.AlarmManager;\nimport android.app.PendingIntent;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.os.Build;\n\nimport java.util.ArrayList;\nimport java.util.PriorityQueue;\nimport java.util.UUID;\n\nimport androidx.annotation.RequiresApi;\n\npublic class Scheduler extends BroadcastReceiver\n{\n    private final String EXECUTE_JOB = &quot;org.strongswan.android.Scheduler.EXECUTE_JOB&quot;;\n    private final Context mContext;\n    private final AlarmManager mManager;\n    private final PriorityQueue&lt;ScheduledJob&gt; mJobs;\n\n    public Scheduler(Context context)\n    {\n        mContext = context;\n        mManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);\n        mJobs = new PriorityQueue&lt;&gt;();\n\n        IntentFilter filter = new IntentFilter();\n        filter.addAction(EXECUTE_JOB);\n        mContext.registerReceiver(this, filter);\n    }\n\n    /**\n     * Remove all pending jobs and unregister the receiver.\n     * Called via JNI.\n     */\n    public void Terminate()\n    {\n        synchronized (this)\n        {\n            mJobs.clear();\n        }\n        mManager.cancel(createIntent());\n        mContext.unregisterReceiver(this);\n    }\n\n    /**\n     * Allocate a job ID. Called via JNI.\n     *\n     * @return random ID for a new job\n     */\n    public String allocateId()\n    {\n        return UUID.randomUUID().toString();\n    }\n\n    /**\n     * Create a pending intent to execute a job.\n     *\n     * @return pending intent\n     */\n    private PendingIntent createIntent()\n    {\n        /* using component/class doesn't work with dynamic broadcast receivers */\n        Intent intent = new Intent(EXECUTE_JOB);\n        intent.setPackage(mContext.getPackageName());\n        return PendingIntent.getBroadcast(mContext, 0, intent, 0);\n    }\n\n    /**\n     * Schedule executing a job in the future.\n     * Called via JNI from different threads.\n     *\n     * @param id job ID\n     * @param ms delta in milliseconds when the job should be executed\n     */\n    @RequiresApi(api = Build.VERSION_CODES.M)\n    public void scheduleJob(String id, long ms)\n    {\n        synchronized (this)\n        {\n            ScheduledJob job = new ScheduledJob(id, System.currentTimeMillis() + ms);\n            mJobs.add(job);\n\n            if (job == mJobs.peek())\n            {   /* update the alarm if the job has to be executed before all others */\n                PendingIntent pending = createIntent();\n                mManager.setExactAndAllowWhileIdle(AlarmManager.RTC_WAKEUP, job.Time, pending);\n            }\n        }\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.M)\n    @Override\n    public void onReceive(Context context, Intent intent)\n    {\n        ArrayList&lt;ScheduledJob&gt; jobs = new ArrayList&lt;&gt;();\n        long now = System.currentTimeMillis();\n\n        synchronized (this)\n        {\n            ScheduledJob job = mJobs.peek();\n            while (job != null)\n            {\n                if (job.Time &gt; now)\n                {\n                    break;\n                }\n                jobs.add(mJobs.remove());\n                job = mJobs.peek();\n            }\n            if (job != null)\n            {\n                PendingIntent pending = createIntent();\n                mManager.setExactAndAllowWhileIdle(AlarmManager.RTC_WAKEUP, job.Time, pending);\n            }\n        }\n\n        for (ScheduledJob job : jobs)\n        {\n            executeJob(job.Id);\n        }\n    }\n\n    /**\n     * Execute the job with the given ID.\n     *\n     * @param id job ID\n     */\n    public native void executeJob(String id);\n\n    /**\n     * Keep track of scheduled jobs.\n     */\n    private static class ScheduledJob implements Comparable&lt;ScheduledJob&gt;\n    {\n        String Id;\n        long Time;\n\n        ScheduledJob(String id, long time)\n        {\n            Id = id;\n            Time = time;\n        }\n\n        @Override\n        public int compareTo(ScheduledJob o)\n        {\n            return Long.compare(Time, o.Time);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","google-drive-api"],"comments":[{"owner":{"account_id":4447289,"reputation":738,"user_id":3620242,"display_name":"maddy23285"},"score":0,"creation_date":1660983452,"post_id":73424919,"comment_id":129666256,"body_markdown":"I was also facing the same issue but in my case, I mirrored my google drive account to a local folder. The step I took to resolve this issue is to delete the `.gradle` folder and build again.","body":"I was also facing the same issue but in my case, I mirrored my google drive account to a local folder. The step I took to resolve this issue is to delete the <code>.gradle</code> folder and build again."},{"owner":{"account_id":4583701,"reputation":209,"user_id":3719104,"display_name":"Steve Marcus"},"score":0,"creation_date":1663236931,"post_id":73424919,"comment_id":130193795,"body_markdown":"@maddy23285 thanks yes that seemed to work. I had my drive mirrored to a local folder already, so I deleted the .gradle folder of the project and then had to clean project one last time, now it seems to be behaving well.","body":"@maddy23285 thanks yes that seemed to work. I had my drive mirrored to a local folder already, so I deleted the .gradle folder of the project and then had to clean project one last time, now it seems to be behaving well."}],"owner":{"account_id":4583701,"reputation":209,"user_id":3719104,"display_name":"Steve Marcus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":772,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660981363,"creation_date":1660981363,"question_id":73424919,"body_markdown":"I have my Android Studio project files stored in Google Drive. The newer versions of Google Drive (version 62+) do not seem to behave very well with Android Studio.\r\n\r\nWhilst Google Drive is active and syncing on my PC, and I try to deploy or build an Android project, I get Build failed with the AccessDeniedException error below.\r\n\r\n```\r\njava.nio.file.AccessDeniedException: G:\\xxxxx\\xxxxx\\xxxx\\xxxx\\xxxx\\app\\build\\intermediates\\incremental\\debug\\mergeDebugResources\\merged.dir\\values\r\n\tat java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:89)\r\n\tat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)\r\n\tat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)\r\n\tat java.base/sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:274)\r\n\tat java.base/sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:110)\r\n\tat java.base/java.nio.file.Files.deleteIfExists(Files.java:1181)...\r\n```\r\n\r\nIt always seems to be the build\\intermediates\\incremental\\debug\\mergeDebugResources\\merged.dir\\values folder which Android Studio does not have access to, while Google Drive is in use and syncing files.\r\n\r\nIf I pause the syncing of Google Drive, then there is no issue and everything works fine. I am also aware &#39;Clean Project&#39; and &#39;Invalidate Caches and Restart&#39; will resolve this issue, but it&#39;s not very conducive to working when I have to do this every time I want to deploy the app.\r\n\r\nThe older versions of Google Drive (where it didn&#39;t create dedicated local drives) worked fine. \r\nI also used to have my project files in Dropbox and that also works fine. The issue only seems to be with the newer versions of Google Drive 62+.\r\n\r\nIs there any setting I could look at or a way to prevent this from occurring? I want to have the old functionality back where I could build/deploy without issues using Google Drive as my project storage location. Thanks.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"java.nio.file.AccessDeniedException using Android Studio with Google Drive","body":"<p>I have my Android Studio project files stored in Google Drive. The newer versions of Google Drive (version 62+) do not seem to behave very well with Android Studio.</p>\n<p>Whilst Google Drive is active and syncing on my PC, and I try to deploy or build an Android project, I get Build failed with the AccessDeniedException error below.</p>\n<pre><code>java.nio.file.AccessDeniedException: G:\\xxxxx\\xxxxx\\xxxx\\xxxx\\xxxx\\app\\build\\intermediates\\incremental\\debug\\mergeDebugResources\\merged.dir\\values\n    at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:89)\n    at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)\n    at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)\n    at java.base/sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:274)\n    at java.base/sun.nio.fs.AbstractFileSystemProvider.deleteIfExists(AbstractFileSystemProvider.java:110)\n    at java.base/java.nio.file.Files.deleteIfExists(Files.java:1181)...\n</code></pre>\n<p>It always seems to be the build\\intermediates\\incremental\\debug\\mergeDebugResources\\merged.dir\\values folder which Android Studio does not have access to, while Google Drive is in use and syncing files.</p>\n<p>If I pause the syncing of Google Drive, then there is no issue and everything works fine. I am also aware 'Clean Project' and 'Invalidate Caches and Restart' will resolve this issue, but it's not very conducive to working when I have to do this every time I want to deploy the app.</p>\n<p>The older versions of Google Drive (where it didn't create dedicated local drives) worked fine.\nI also used to have my project files in Dropbox and that also works fine. The issue only seems to be with the newer versions of Google Drive 62+.</p>\n<p>Is there any setting I could look at or a way to prevent this from occurring? I want to have the old functionality back where I could build/deploy without issues using Google Drive as my project storage location. Thanks.</p>\n"},{"tags":["java","spring-boot","enums","spring-bean","method-reference"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1660952603,"post_id":73422396,"comment_id":129663113,"body_markdown":"@user16320675 This discussion seem to be fruitless, we both know the topic. I don&#39;t recall that anywhere in [**JLS**](https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.13) anywhere in the left part of the *method reference* has been referred as an *argument*. Firstly, it might create a confusion with *type arguments* which can be provided in square brackets `&lt;Type&gt;` in front of the right part.","body":"@user16320675 This discussion seem to be fruitless, we both know the topic. I don&#39;t recall that anywhere in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.13\" rel=\"nofollow noreferrer\"><b>JLS</b></a> anywhere in the left part of the <i>method reference</i> has been referred as an <i>argument</i>. Firstly, it might create a confusion with <i>type arguments</i> which can be provided in square brackets <code>&lt;Type&gt;</code> in front of the right part."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1660952619,"post_id":73422396,"comment_id":129663119,"body_markdown":"@user16320675 Secondly, even we decide to call it argument it doesn&#39;t seem to intuitive to mix it with arguments of the Functional interface, since they should be provided at different stages, declaration of the *method reference* and *method reference* is being used. Does it make sense?","body":"@user16320675 Secondly, even we decide to call it argument it doesn&#39;t seem to intuitive to mix it with arguments of the Functional interface, since they should be provided at different stages, declaration of the <i>method reference</i> and <i>method reference</i> is being used. Does it make sense?"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660956313,"creation_date":1660945159,"answer_id":73422493,"question_id":73422396,"body_markdown":"You either have to provide an instance of `Foo` or make method `doAction()` to be `static`, otherwise you can&#39;t access it. Precisely as the error message tells you.\r\n\r\nSo you have two options:\r\n* Provide an instance (for instance via constructor of enum), which judging by the signature of `doAction()` seem to be unnecessary because there&#39;s nothing that points that this method depends somehow on the state of `Foo` instance (unless you&#39;re not going to use some properties of `Foo` in the body of the method which is omitted).\r\n* Add a `static` modifier to the declaration of `doAction()`.\r\n\r\nThe later fix is trivial, here&#39;s a way to apply the first one:\r\n\r\n    private enum MyEnum {\r\n        TGD410(new Foo()); // instance of Foo is provided while initializing enum-member\r\n        \r\n        private MyLambda myLambda;\r\n        \r\n        MyEnum(Foo foo) {\r\n            this.myLambda = foo::doAction;\r\n        }\r\n        \r\n        public void execute(String str1, String str2) {\r\n            myLambda.apply(str1, str2);\r\n        }\r\n    }\r\n_________________________\r\n\r\n&lt;h1&gt;Update&lt;/h1&gt;\r\n\r\nSince clarification that `Foo` is actually a **Bean** in the **Spring Context** changes the question drastically, the answer requires an addition.\r\n\r\nIn not possible to inject `Foo` into the enum directly. There&#39;s a dirty and convoluted workaround with a *static nested class* annotated with `@Component`, having a method annotated with `@PostConstruct` responsible for initialization of the enum-constants (for more detail see [*this question*](https://stackoverflow.com/questions/16318454/inject-bean-into-enum)).\r\n\r\nFrom the perspective of clean coding, it&#39;s better to keep enums free from heavy logic and avoid making them dependent on the state of other objects.\r\n\r\nI&#39;m still suggesting making referenced behavior static, if it&#39;s not feasible, here&#39;s another option on how to avoid tight dependency between enum-members and `Foo`. We can achieve it by introducing an intermediate map `Map&lt;MyEnum,MyLambda&gt;` and extracting the method `execute()` outside of the enum:\r\n\r\n```\r\n@Component\r\npublic class Foo {\r\n    \r\n    private enum MyEnum {\r\n        TGD410\r\n    }\r\n    \r\n    private final Map&lt;MyEnum, MyLambda&gt; enumToLambda = Map.of(\r\n        MyEnum.TGD410, this::doAction\r\n    );\r\n    \r\n    public void execute(MyEnum myEnum, String str1, String str2) {\r\n        enumToLambda.get(myEnum).apply(str1, str2);\r\n    }\r\n    \r\n    public void doAction(String str1, String str2) {\r\n    \r\n    }\r\n    \r\n    @FunctionalInterface\r\n    public interface MyLambda{\r\n        void apply(String str1, String str2);\r\n    }\r\n}\r\n```","title":"How to call lambda from Enum constructor","body":"<p>You either have to provide an instance of <code>Foo</code> or make method <code>doAction()</code> to be <code>static</code>, otherwise you can't access it. Precisely as the error message tells you.</p>\n<p>So you have two options:</p>\n<ul>\n<li>Provide an instance (for instance via constructor of enum), which judging by the signature of <code>doAction()</code> seem to be unnecessary because there's nothing that points that this method depends somehow on the state of <code>Foo</code> instance (unless you're not going to use some properties of <code>Foo</code> in the body of the method which is omitted).</li>\n<li>Add a <code>static</code> modifier to the declaration of <code>doAction()</code>.</li>\n</ul>\n<p>The later fix is trivial, here's a way to apply the first one:</p>\n<pre><code>private enum MyEnum {\n    TGD410(new Foo()); // instance of Foo is provided while initializing enum-member\n    \n    private MyLambda myLambda;\n    \n    MyEnum(Foo foo) {\n        this.myLambda = foo::doAction;\n    }\n    \n    public void execute(String str1, String str2) {\n        myLambda.apply(str1, str2);\n    }\n}\n</code></pre>\n<hr />\n<h1>Update</h1>\n<p>Since clarification that <code>Foo</code> is actually a <strong>Bean</strong> in the <strong>Spring Context</strong> changes the question drastically, the answer requires an addition.</p>\n<p>In not possible to inject <code>Foo</code> into the enum directly. There's a dirty and convoluted workaround with a <em>static nested class</em> annotated with <code>@Component</code>, having a method annotated with <code>@PostConstruct</code> responsible for initialization of the enum-constants (for more detail see <a href=\"https://stackoverflow.com/questions/16318454/inject-bean-into-enum\"><em>this question</em></a>).</p>\n<p>From the perspective of clean coding, it's better to keep enums free from heavy logic and avoid making them dependent on the state of other objects.</p>\n<p>I'm still suggesting making referenced behavior static, if it's not feasible, here's another option on how to avoid tight dependency between enum-members and <code>Foo</code>. We can achieve it by introducing an intermediate map <code>Map&lt;MyEnum,MyLambda&gt;</code> and extracting the method <code>execute()</code> outside of the enum:</p>\n<pre><code>@Component\npublic class Foo {\n    \n    private enum MyEnum {\n        TGD410\n    }\n    \n    private final Map&lt;MyEnum, MyLambda&gt; enumToLambda = Map.of(\n        MyEnum.TGD410, this::doAction\n    );\n    \n    public void execute(MyEnum myEnum, String str1, String str2) {\n        enumToLambda.get(myEnum).apply(str1, str2);\n    }\n    \n    public void doAction(String str1, String str2) {\n    \n    }\n    \n    @FunctionalInterface\n    public interface MyLambda{\n        void apply(String str1, String str2);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8868218,"reputation":928,"user_id":6622697,"display_name":"Peter Kronenberg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1660981231,"creation_date":1660944329,"question_id":73422396,"body_markdown":"I&#39;m trying to set up a enum where each Enum value has a custom method to be called.  However, it tells me that the method must be static.  Is there a way to reference a non-static method?\r\n\r\nMy code looks like this\r\n\r\n```\r\npublic class Foo {\r\n\r\n    private enum MyEnum {\r\n        TGD410(Foo::doAction);\r\n\r\n        private MyLambda myLambda;\r\n\r\n        MyEnum(MyLambda myLambda) {\r\n            this.myLambda = myLambda;\r\n        }\r\n\r\n        public void execute(String str1, String str2) {\r\n            myLambda.apply(str1, str2);\r\n\r\n        }\r\n    }\r\n\r\n    public void doAction(String str1, String str2) {\r\n\r\n    }\r\n\r\n    @FunctionalInterface\r\n    public interface MyLambda{\r\n        void apply(String str1, String str2);\r\n    }\r\n}\r\n\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EM6qo.png\r\n\r\n\r\nIs there some other way to do what I want to do?  I think I need to pass in a reference to the Foo object, but not sure how to specify that, since `this` refers to the Enum\r\n\r\n## Update\r\nUpdating to clarify that I&#39;m using Springboot.  Foo is a bean.  The method in questions uses some other injected values, which is why it can&#39;t be static.\r\n\r\nI&#39;m considering just not using a Lambda and instead putting my method in another POJO (which implements some common interface), which *can* be instantiated","title":"How to call lambda from Enum constructor","body":"<p>I'm trying to set up a enum where each Enum value has a custom method to be called.  However, it tells me that the method must be static.  Is there a way to reference a non-static method?</p>\n<p>My code looks like this</p>\n<pre><code>public class Foo {\n\n    private enum MyEnum {\n        TGD410(Foo::doAction);\n\n        private MyLambda myLambda;\n\n        MyEnum(MyLambda myLambda) {\n            this.myLambda = myLambda;\n        }\n\n        public void execute(String str1, String str2) {\n            myLambda.apply(str1, str2);\n\n        }\n    }\n\n    public void doAction(String str1, String str2) {\n\n    }\n\n    @FunctionalInterface\n    public interface MyLambda{\n        void apply(String str1, String str2);\n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/EM6qo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EM6qo.png\" alt=\"enter image description here\" /></a></p>\n<p>Is there some other way to do what I want to do?  I think I need to pass in a reference to the Foo object, but not sure how to specify that, since <code>this</code> refers to the Enum</p>\n<h2>Update</h2>\n<p>Updating to clarify that I'm using Springboot.  Foo is a bean.  The method in questions uses some other injected values, which is why it can't be static.</p>\n<p>I'm considering just not using a Lambda and instead putting my method in another POJO (which implements some common interface), which <em>can</em> be instantiated</p>\n"},{"tags":["java","python","pycharm","jvm"],"comments":[{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":0,"creation_date":1595962459,"post_id":63140920,"comment_id":111654285,"body_markdown":"What&#39;s the full path of your IntelliJ is installed? Copy and paste the text -- don&#39;t post pictures.","body":"What&#39;s the full path of your IntelliJ is installed? Copy and paste the text -- don&#39;t post pictures."}],"answers":[{"tags":[],"owner":{"account_id":11215277,"reputation":1139,"user_id":8228122,"display_name":"Luke B"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595962459,"creation_date":1595962459,"answer_id":63140983,"question_id":63140920,"body_markdown":"Inside your installation folder of PyCharm, you are probably missing the `idea.properties` file. I tried moving mine and I got the same error as you.\r\n\r\nThe path to the file was `C:\\Program Files\\JetBrains\\PyCharm 2020.1.4\\bin` for me.","title":"Pycharm - Internal Startup issue -java.lang.RuntimeException: Could not find installation home path","body":"<p>Inside your installation folder of PyCharm, you are probably missing the <code>idea.properties</code> file. I tried moving mine and I got the same error as you.</p>\n<p>The path to the file was <code>C:\\Program Files\\JetBrains\\PyCharm 2020.1.4\\bin</code> for me.</p>\n"},{"tags":[],"owner":{"account_id":12246186,"reputation":264,"user_id":8937772,"display_name":"Mehrdad Masoumi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660979930,"creation_date":1660979930,"answer_id":73424786,"question_id":63140920,"body_markdown":"The reason for this problem is a conflict between more than one product of Jetbrains. Please create a simple &quot;idea.properties&quot; file in the bin directory. If the problem not solved copy file from PHPstorm bin directory","title":"Pycharm - Internal Startup issue -java.lang.RuntimeException: Could not find installation home path","body":"<p>The reason for this problem is a conflict between more than one product of Jetbrains. Please create a simple &quot;idea.properties&quot; file in the bin directory. If the problem not solved copy file from PHPstorm bin directory</p>\n"}],"owner":{"account_id":8771794,"reputation":331,"user_id":6558340,"display_name":"Yugendhar Anveshra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3230,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1660979930,"creation_date":1595962196,"question_id":63140920,"body_markdown":"Internal Startup issue -java.lang.RuntimeException: Could not find installation home path . Please make sure bin/idea.properties is present in the installation directory\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nJ0dv.png\r\n\r\n\r\nI have path and java_home variables setup\r\n**Java_home** points to ** C:\\Program Files\\Java\\jdk1.8.0_251\\ **\r\n\r\n","title":"Pycharm - Internal Startup issue -java.lang.RuntimeException: Could not find installation home path","body":"<p>Internal Startup issue -java.lang.RuntimeException: Could not find installation home path . Please make sure bin/idea.properties is present in the installation directory</p>\n<p><a href=\"https://i.stack.imgur.com/nJ0dv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nJ0dv.png\" alt=\"enter image description here\" /></a></p>\n<p>I have path and java_home variables setup\n<strong>Java_home</strong> points to ** C:\\Program Files\\Java\\jdk1.8.0_251\\ **</p>\n"},{"tags":["java","android","gradle","flutter-test"],"comments":[{"owner":{"account_id":15663576,"reputation":2342,"user_id":11301941,"display_name":"George"},"score":0,"creation_date":1660946426,"post_id":73420398,"comment_id":129662080,"body_markdown":"you&#39;re missing &quot;\\&quot; after &quot;C:\\&quot; , It should be &quot;C:\\\\&quot; with the escape character.","body":"you&#39;re missing &quot;\\&quot; after &quot;C:\\&quot; , It should be &quot;C:\\\\&quot; with the escape character."}],"answers":[{"tags":[],"owner":{"account_id":20870509,"reputation":49,"user_id":15330587,"display_name":"Shubham Chakraborty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660979429,"creation_date":1660979429,"answer_id":73424749,"question_id":73420398,"body_markdown":"Uninstall the JDK and then reinstall JDK from the below mentioned site.\r\n\r\n`https://www.oracle.com/java/technologies/downloads/`\r\n\r\nOr\r\n\r\n    click on File -&gt; click on Project Structure\r\n\r\n    [![[1]: https://i.stack.imgur.com/97fbe.png][1]][1]\r\n\r\n     -&gt; click on SDK Location\r\n\r\n    [![[1]: https://i.stack.imgur.com/YbBNQ.png][1]][1]\r\n\r\n     -&gt; click on Gradle JDK and select the JDK\r\n\r\n    [![[1]: https://i.stack.imgur.com/cvnuK.png][1]][1]\r\n\r\n  ","title":"Value &#39;C:Program Files\\Java\\jdk-17.0.2&#39; given for org.gradle.java.home Gradle property is invalid (Java home supplied is invalid)","body":"<p>Uninstall the JDK and then reinstall JDK from the below mentioned site.</p>\n<p><code>https://www.oracle.com/java/technologies/downloads/</code></p>\n<p>Or</p>\n<pre><code>click on File -&gt; click on Project Structure\n\n[![[1]: https://i.stack.imgur.com/97fbe.png][1]][1]\n\n -&gt; click on SDK Location\n\n[![[1]: https://i.stack.imgur.com/YbBNQ.png][1]][1]\n\n -&gt; click on Gradle JDK and select the JDK\n\n[![[1]: https://i.stack.imgur.com/cvnuK.png][1]][1]\n</code></pre>\n"}],"owner":{"account_id":26109901,"reputation":3,"user_id":19804006,"display_name":"Ankit Laller"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":538,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660979429,"creation_date":1660930560,"question_id":73420398,"body_markdown":"```\r\norg.gradle.jvmargs=-Xmx1536M\r\nandroid.useAndroidX=true\r\nandroid.enableJetifier=true\r\norg.gradle.java.home=C:\\Program Files\\\\Java\\\\jdk-17.0.2\r\n```\r\n","title":"Value &#39;C:Program Files\\Java\\jdk-17.0.2&#39; given for org.gradle.java.home Gradle property is invalid (Java home supplied is invalid)","body":"<pre><code>org.gradle.jvmargs=-Xmx1536M\nandroid.useAndroidX=true\nandroid.enableJetifier=true\norg.gradle.java.home=C:\\Program Files\\\\Java\\\\jdk-17.0.2\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":1932818,"reputation":46083,"user_id":1741864,"display_name":"sampson-chen"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1353864178,"creation_date":1353861285,"answer_id":13553026,"question_id":13553009,"body_markdown":"**Update:** \r\n\r\n- As Maxim pointed out, using [HashMap][1] would be a more appropriate choice than [Hashtable][2] here.\r\n- The assumption here is that you are not concerned with concurrency. If synchronized access is needed, use [ConcurrentHashMap][3] instead.\r\n\r\n&lt;hr&gt;\r\n\r\nYou can use a [HashMap][4] to count the occurrences of each unique element in your double array, and that would:\r\n\r\n- Run in linear **O(n)** time, and \r\n- Require **O(n)** space\r\n\r\n**Psuedo code** would be something like this:\r\n\r\n- Iterate through all of the elements of your array once: **O(n)**\r\n  - For each element visited, check to see if its key already exists in the HashMap: **O(1), amortized**\r\n    - If it does not (first time seeing this element), then add it to your HashMap as [key: this element, value: 1]. **O(1)**\r\n    - If it does exist, then increment the value corresponding to the key by 1. **O(1), amortized**\r\n- Having finished building your HashMap, iterate through the map and find the key with the highest associated value - and that&#39;s the element with the highest occurrence. **O(n)**\r\n\r\n**A partial code solution** to give you an idea how to use HashMap:\r\n\r\n    import java.util.HashMap;\r\n    ...\r\n    \r\n        HashMap hm = new HashMap();\r\n        for (int i = 0; i &lt; array.length; i++) {\r\n            Double key = new Double(array[i]);\r\n            if ( hm.containsKey(key) ) {\r\n                value = hm.get(key);\r\n                hm.put(key, value + 1);\r\n            } else {\r\n                hm.put(key, 1);\r\n            }\r\n        }\r\n\r\nI&#39;ll leave as an exercise for how to iterate through the HashMap afterwards to find the key with the highest value; but if you get stuck, just add another comment and I&#39;ll get you more hints =)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html\r\n  [3]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html\r\n  [4]: http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html","title":"Find the element with highest occurrences in an array [java]","body":"<p><strong>Update:</strong> </p>\n\n<ul>\n<li>As Maxim pointed out, using <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">HashMap</a> would be a more appropriate choice than <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html\" rel=\"noreferrer\">Hashtable</a> here.</li>\n<li>The assumption here is that you are not concerned with concurrency. If synchronized access is needed, use <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\">ConcurrentHashMap</a> instead.</li>\n</ul>\n\n<hr>\n\n<p>You can use a <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">HashMap</a> to count the occurrences of each unique element in your double array, and that would:</p>\n\n<ul>\n<li>Run in linear <strong>O(n)</strong> time, and </li>\n<li>Require <strong>O(n)</strong> space</li>\n</ul>\n\n<p><strong>Psuedo code</strong> would be something like this:</p>\n\n<ul>\n<li>Iterate through all of the elements of your array once: <strong>O(n)</strong>\n<ul>\n<li>For each element visited, check to see if its key already exists in the HashMap: <strong>O(1), amortized</strong></li>\n<li>If it does not (first time seeing this element), then add it to your HashMap as [key: this element, value: 1]. <strong>O(1)</strong></li>\n<li>If it does exist, then increment the value corresponding to the key by 1. <strong>O(1), amortized</strong></li>\n</ul></li>\n<li>Having finished building your HashMap, iterate through the map and find the key with the highest associated value - and that's the element with the highest occurrence. <strong>O(n)</strong></li>\n</ul>\n\n<p><strong>A partial code solution</strong> to give you an idea how to use HashMap:</p>\n\n<pre><code>import java.util.HashMap;\n...\n\n    HashMap hm = new HashMap();\n    for (int i = 0; i &lt; array.length; i++) {\n        Double key = new Double(array[i]);\n        if ( hm.containsKey(key) ) {\n            value = hm.get(key);\n            hm.put(key, value + 1);\n        } else {\n            hm.put(key, 1);\n        }\n    }\n</code></pre>\n\n<p>I'll leave as an exercise for how to iterate through the HashMap afterwards to find the key with the highest value; but if you get stuck, just add another comment and I'll get you more hints =)</p>\n"},{"tags":[],"owner":{"account_id":1790949,"reputation":77601,"user_id":1631379,"accept_rate":80,"display_name":"Maxim Shoustin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1353862522,"creation_date":1353861737,"answer_id":13553089,"question_id":13553009,"body_markdown":"Use `Collections.frequency` option:\r\n\r\n     List&lt;String&gt; list = Arrays.asList(&quot;1&quot;, &quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;5&quot;,&quot;5&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;8&quot;);\r\n\t\t  int max = 0;\r\n\t\t  int curr = 0;\r\n\t\t  String currKey =  null;\r\n\t\t  Set&lt;String&gt; unique = new HashSet&lt;String&gt;(list);\r\n\r\n\t\t      for (String key : unique) {\r\n\t\t            curr = Collections.frequency(list, key);\r\n\r\n\t\t           if(max &lt; curr){\r\n\t\t             max = curr;\r\n\t\t             currKey = key;\r\n\t\t            }\r\n\t\t        }\r\n\t\t      \r\n\t\t      System.out.println(&quot;The number &quot;  + currKey + &quot; happens &quot; + max + &quot; times&quot;);\r\n\r\nOutput:\r\n\r\n`The number 12 happens 10 times`","title":"Find the element with highest occurrences in an array [java]","body":"<p>Use <code>Collections.frequency</code> option:</p>\n\n<pre><code> List&lt;String&gt; list = Arrays.asList(\"1\", \"1\",\"1\",\"1\",\"1\",\"1\",\"5\",\"5\",\"12\",\"12\",\"12\",\"12\",\"12\",\"12\",\"12\",\"12\",\"12\",\"12\",\"8\");\n      int max = 0;\n      int curr = 0;\n      String currKey =  null;\n      Set&lt;String&gt; unique = new HashSet&lt;String&gt;(list);\n\n          for (String key : unique) {\n                curr = Collections.frequency(list, key);\n\n               if(max &lt; curr){\n                 max = curr;\n                 currKey = key;\n                }\n            }\n\n          System.out.println(\"The number \"  + currKey + \" happens \" + max + \" times\");\n</code></pre>\n\n<p>Output:</p>\n\n<p><code>The number 12 happens 10 times</code></p>\n"},{"tags":[],"owner":{"account_id":1910852,"reputation":19108,"user_id":1724702,"accept_rate":80,"display_name":"Sachin Joseph"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1353861829,"creation_date":1353861829,"answer_id":13553103,"question_id":13553009,"body_markdown":"I will suggest another method. I don&#39;t know if this would work faster or not.\r\n\r\nQuick sort the array. Use the built in Arrays.sort(&lt;arrayname&gt;) method.\r\n\r\nNow compare the adjacent elements. \r\nConsider this example:\r\n\r\n1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 9 9 9 10 10 10 29 29 29 29 29 29\r\n\r\nWhen the adjacent elements are not equal, you can stop counting that element.","title":"Find the element with highest occurrences in an array [java]","body":"<p>I will suggest another method. I don't know if this would work faster or not.</p>\n\n<p>Quick sort the array. Use the built in Arrays.sort() method.</p>\n\n<p>Now compare the adjacent elements. \nConsider this example:</p>\n\n<p>1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 9 9 9 10 10 10 29 29 29 29 29 29</p>\n\n<p>When the adjacent elements are not equal, you can stop counting that element.</p>\n"},{"tags":[],"owner":{"account_id":11304561,"reputation":11,"user_id":8289562,"display_name":"Tarun Jadhav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502199956,"creation_date":1499785560,"answer_id":45038280,"question_id":13553009,"body_markdown":"    public static void main(String[] args) {\r\n    \r\n       int n;\r\n    \r\n       int[] arr;\r\n    \r\n        Scanner in = new Scanner(System.in);\r\n        System.out.println(&quot;Enter Length of Array&quot;);\r\n        n = in.nextInt();\r\n        arr = new int[n];\r\n        System.out.println(&quot;Enter Elements in array&quot;); \r\n    \r\n        for (int i = 0; i &lt; n; i++) {\r\n            arr[i] = in.nextInt();\r\n        }\r\n    \r\n        int greatest = arr[0];\r\n    \r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            if (arr[i] &gt; greatest) {\r\n                greatest = arr[i];\r\n            }\r\n    \r\n        } \r\n    \r\n        System.out.println(&quot;Greatest Number &quot; + greatest);\r\n    \r\n        int count = 0;\r\n    \r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            if (greatest == arr[i]) {\r\n                count++;\r\n            }\r\n        }\r\n    \r\n        System.out.println(&quot;Number of Occurance of &quot; + greatest + &quot;:&quot; + count + &quot; times&quot;);\r\n    \r\n        in.close();\r\n    }","title":"Find the element with highest occurrences in an array [java]","body":"<pre><code>public static void main(String[] args) {\n\n   int n;\n\n   int[] arr;\n\n    Scanner in = new Scanner(System.in);\n    System.out.println(\"Enter Length of Array\");\n    n = in.nextInt();\n    arr = new int[n];\n    System.out.println(\"Enter Elements in array\"); \n\n    for (int i = 0; i &lt; n; i++) {\n        arr[i] = in.nextInt();\n    }\n\n    int greatest = arr[0];\n\n    for (int i = 0; i &lt; arr.length; i++) {\n        if (arr[i] &gt; greatest) {\n            greatest = arr[i];\n        }\n\n    } \n\n    System.out.println(\"Greatest Number \" + greatest);\n\n    int count = 0;\n\n    for (int i = 0; i &lt; arr.length; i++) {\n        if (greatest == arr[i]) {\n            count++;\n        }\n    }\n\n    System.out.println(\"Number of Occurance of \" + greatest + \":\" + count + \" times\");\n\n    in.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7813980,"reputation":7,"user_id":5909317,"display_name":"Ashish Jadhav"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1507264751,"creation_date":1507264751,"answer_id":46598382,"question_id":13553009,"body_markdown":"You can solve this problem in one loop with without using HashMap or any other data structure in O(1) space complexity.\r\n\r\nInitialize two variables count = 0 and max = 0 (or Integer.MIN_VALUE if you have negative numbers in your array)\r\n\r\nThe idea is you will scan through the array and check the current number,\r\n \r\n- if it is less than your current max...then do nothing\r\n- if it is equal to your max ...then increment the count variable\r\n- if it is greater than your max..then update max to current number and set count to 1\r\n\r\nCode:\r\n\r\n\r\n    int max = 0, count = 0;\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n        int num = array[i];\r\n        if (num == max) {\r\n            count++;\r\n        } else if (num &gt; max) {\r\n            max = num;\r\n            count = 1;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    ","title":"Find the element with highest occurrences in an array [java]","body":"<p>You can solve this problem in one loop with without using HashMap or any other data structure in O(1) space complexity.</p>\n\n<p>Initialize two variables count = 0 and max = 0 (or Integer.MIN_VALUE if you have negative numbers in your array)</p>\n\n<p>The idea is you will scan through the array and check the current number,</p>\n\n<ul>\n<li>if it is less than your current max...then do nothing</li>\n<li>if it is equal to your max ...then increment the count variable</li>\n<li>if it is greater than your max..then update max to current number and set count to 1</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>int max = 0, count = 0;\nfor (int i = 0; i &lt; array.length; i++) {\n    int num = array[i];\n    if (num == max) {\n        count++;\n    } else if (num &gt; max) {\n        max = num;\n        count = 1;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1297214,"reputation":965,"user_id":1247963,"accept_rate":88,"display_name":"codechefvaibhavkashyap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509038637,"creation_date":1509038637,"answer_id":46960330,"question_id":13553009,"body_markdown":"In continuation to the pseudo-code what you&#39;ve written try the below written code:-\r\n\r\n    public static void fetchFrequency(int[] arry) {\r\n    \t\tMap&lt;Integer, Integer&gt; newMap = new TreeMap&lt;Integer, Integer&gt;(Collections.reverseOrder());\r\n    \t\tint num = 0;\r\n    \t\tint count = 0;\r\n    \t\tfor (int i = 0; i &lt; arry.length; i++) {\r\n    \t\t\tif (newMap.containsKey(arry[i])) {\r\n    \t\t\t\tcount = newMap.get(arry[i]);\r\n    \t\t\t\tnewMap.put(arry[i], ++count);\r\n    \t\t\t} else {\r\n    \t\t\t\tnewMap.put(arry[i], 1);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSet&lt;Entry&lt;Integer, Integer&gt;&gt; set = newMap.entrySet();\r\n    \t\tList&lt;Entry&lt;Integer, Integer&gt;&gt; list = new ArrayList&lt;Entry&lt;Integer, Integer&gt;&gt;(set);\r\n    \t\tCollections.sort(list, new Comparator&lt;Map.Entry&lt;Integer, Integer&gt;&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic int compare(Entry&lt;Integer, Integer&gt; o1, Entry&lt;Integer, Integer&gt; o2) {\r\n    \t\t\t\treturn (o2.getValue()).compareTo(o1.getValue());\r\n    \t\t\t}\r\n    \t\t});\r\n    \r\n    \t\tfor (Map.Entry&lt;Integer, Integer&gt; entry : list) {\r\n    \t\t\tSystem.out.println(entry.getKey() + &quot; ==== &quot; + entry.getValue());\r\n    \t\t\tbreak;\r\n    \t\t}\r\n    \t\t//return num;\r\n    \t}\r\n\r\n","title":"Find the element with highest occurrences in an array [java]","body":"<p>In continuation to the pseudo-code what you've written try the below written code:-</p>\n\n<pre><code>public static void fetchFrequency(int[] arry) {\n        Map&lt;Integer, Integer&gt; newMap = new TreeMap&lt;Integer, Integer&gt;(Collections.reverseOrder());\n        int num = 0;\n        int count = 0;\n        for (int i = 0; i &lt; arry.length; i++) {\n            if (newMap.containsKey(arry[i])) {\n                count = newMap.get(arry[i]);\n                newMap.put(arry[i], ++count);\n            } else {\n                newMap.put(arry[i], 1);\n            }\n        }\n        Set&lt;Entry&lt;Integer, Integer&gt;&gt; set = newMap.entrySet();\n        List&lt;Entry&lt;Integer, Integer&gt;&gt; list = new ArrayList&lt;Entry&lt;Integer, Integer&gt;&gt;(set);\n        Collections.sort(list, new Comparator&lt;Map.Entry&lt;Integer, Integer&gt;&gt;() {\n\n            @Override\n            public int compare(Entry&lt;Integer, Integer&gt; o1, Entry&lt;Integer, Integer&gt; o2) {\n                return (o2.getValue()).compareTo(o1.getValue());\n            }\n        });\n\n        for (Map.Entry&lt;Integer, Integer&gt; entry : list) {\n            System.out.println(entry.getKey() + \" ==== \" + entry.getValue());\n            break;\n        }\n        //return num;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8004185,"reputation":1391,"user_id":6037956,"display_name":"Soudipta Dutta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528155241,"creation_date":1527777650,"answer_id":50626931,"question_id":13553009,"body_markdown":"Solution 1: Using HashMap\r\n\r\n\r\n    class test1 {\r\n    \tpublic static void main(String[] args) {\r\n    \t\r\n    \tint[] a = {1,1,2,1,5,6,6,6,8,5,9,7,1};\r\n    \t// max occurences of an array\r\n    \tMap&lt;Integer,Integer&gt; map = new HashMap&lt;&gt;();\r\n    \t  int max = 0 ; int chh = 0 ;\r\n    \t  for(int i = 0 ; i &lt; a.length;i++) {\r\n    \t\t  int ch = a[i];\r\n    \t\t  map.put(ch, map.getOrDefault(ch, 0) +1);\r\n    \t  }//for\r\n    \t  Set&lt;Entry&lt;Integer,Integer&gt;&gt; entrySet =map.entrySet();\r\n    \r\n    \t  for(Entry&lt;Integer,Integer&gt; entry : entrySet) {\r\n    \t\t  if(entry.getValue() &gt; max) {max = entry.getValue();chh = entry.getKey();}\r\n    \t\t  \r\n    \t  }//for\r\n    \tSystem.out.println(&quot;max element =&gt; &quot; + chh);\r\n    \tSystem.out.println(&quot;frequency =&gt; &quot; + max);\r\n    \t}//amin\r\n    }\r\n    /*output =&gt;\r\n    max element =&gt; 1\r\n    frequency =&gt; 4\r\n    \r\n    */\r\n\r\n\r\nSolution 2 : Using count array\r\n\r\n\r\n\r\n    public class test2 {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t int[] a = {1,1,2,1,5,6,6,6,6,6,8,5,9,7,1};\r\n        int max = 0 ; int chh = 0;\r\n        int count[] = new int[a.length];\r\n        for(int i = 0 ; i &lt;a.length ; i++) {\r\n        \tint ch = a[i];\r\n        \tcount[ch] +=1 ;\r\n        }//for\r\n        \r\n        for(int i = 0 ; i &lt;a.length ;i++)  {\r\n        \tint ch = a[i];\r\n        \tif(count[ch] &gt; max) {max = count[ch] ; chh = ch ;}\r\n        }//for\r\n    \t\t System.out.println(chh); \r\n    \t}//main\r\n    }","title":"Find the element with highest occurrences in an array [java]","body":"<p>Solution 1: Using HashMap</p>\n\n<pre><code>class test1 {\n    public static void main(String[] args) {\n\n    int[] a = {1,1,2,1,5,6,6,6,8,5,9,7,1};\n    // max occurences of an array\n    Map&lt;Integer,Integer&gt; map = new HashMap&lt;&gt;();\n      int max = 0 ; int chh = 0 ;\n      for(int i = 0 ; i &lt; a.length;i++) {\n          int ch = a[i];\n          map.put(ch, map.getOrDefault(ch, 0) +1);\n      }//for\n      Set&lt;Entry&lt;Integer,Integer&gt;&gt; entrySet =map.entrySet();\n\n      for(Entry&lt;Integer,Integer&gt; entry : entrySet) {\n          if(entry.getValue() &gt; max) {max = entry.getValue();chh = entry.getKey();}\n\n      }//for\n    System.out.println(\"max element =&gt; \" + chh);\n    System.out.println(\"frequency =&gt; \" + max);\n    }//amin\n}\n/*output =&gt;\nmax element =&gt; 1\nfrequency =&gt; 4\n\n*/\n</code></pre>\n\n<p>Solution 2 : Using count array</p>\n\n<pre><code>public class test2 {\n    public static void main(String[] args) {\n         int[] a = {1,1,2,1,5,6,6,6,6,6,8,5,9,7,1};\n    int max = 0 ; int chh = 0;\n    int count[] = new int[a.length];\n    for(int i = 0 ; i &lt;a.length ; i++) {\n        int ch = a[i];\n        count[ch] +=1 ;\n    }//for\n\n    for(int i = 0 ; i &lt;a.length ;i++)  {\n        int ch = a[i];\n        if(count[ch] &gt; max) {max = count[ch] ; chh = ch ;}\n    }//for\n         System.out.println(chh); \n    }//main\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11493708,"reputation":1256,"user_id":8423763,"display_name":"shubhamr238"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551073554,"creation_date":1551073554,"answer_id":54860170,"question_id":13553009,"body_markdown":"This is how i have implemented in java..\r\n\r\n    import java.io.*;\r\n    class Prog8\r\n    {\r\n    \tpublic static void main(String[] args) throws IOException \r\n    \t{\r\n    \t\tBufferedReader br=new BufferedReader(new InputStreamReader(System.in));\r\n    \t\tSystem.out.println(&quot;Input Array Size:&quot;);\r\n    \t\tint size=Integer.parseInt(br.readLine());\r\n    \t\tint[] arr= new int[size];\r\n    \t\tSystem.out.println(&quot;Input Elements in Array:&quot;);\r\n    \t\tfor(int i=0;i&lt;size;i++)\r\n    \t\t\tarr[i]=Integer.parseInt(br.readLine());\r\n    \t\tint max = 0,pos=0,count = 0;\r\n    \t\tfor (int i = 0; i &lt; arr.length; i++)\r\n    \t\t{\r\n    \t\t\tcount=0;\r\n    \t\t    for (int j = 0; j &lt; arr.length; j++) \r\n    \t\t    {\r\n    \t\t        if (arr[i]==arr[j])\r\n    \t\t            count++;\r\n    \t\t    }\r\n    \t\t    if (count &gt;=max)\r\n    \t\t    {\r\n    \t\t        max = count;\r\n    \t\t        pos=i;\r\n    \t\t    }\r\n    \t\t}\r\n    \r\n    \t\tif(max==1)\r\n    \t\t\tSystem.out.println(&quot;No Duplicate Element.&quot;);\r\n    \t\telse\r\n    \t\t\tSystem.out.println(&quot;Element:&quot;+arr[pos]+&quot; Occourance:&quot;+max);\r\n    \t}\r\n    }","title":"Find the element with highest occurrences in an array [java]","body":"<p>This is how i have implemented in java..</p>\n\n<pre><code>import java.io.*;\nclass Prog8\n{\n    public static void main(String[] args) throws IOException \n    {\n        BufferedReader br=new BufferedReader(new InputStreamReader(System.in));\n        System.out.println(\"Input Array Size:\");\n        int size=Integer.parseInt(br.readLine());\n        int[] arr= new int[size];\n        System.out.println(\"Input Elements in Array:\");\n        for(int i=0;i&lt;size;i++)\n            arr[i]=Integer.parseInt(br.readLine());\n        int max = 0,pos=0,count = 0;\n        for (int i = 0; i &lt; arr.length; i++)\n        {\n            count=0;\n            for (int j = 0; j &lt; arr.length; j++) \n            {\n                if (arr[i]==arr[j])\n                    count++;\n            }\n            if (count &gt;=max)\n            {\n                max = count;\n                pos=i;\n            }\n        }\n\n        if(max==1)\n            System.out.println(\"No Duplicate Element.\");\n        else\n            System.out.println(\"Element:\"+arr[pos]+\" Occourance:\"+max);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15988505,"reputation":119,"user_id":11538257,"display_name":"Aqil Aghamirzayev"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1588854576,"creation_date":1588854576,"answer_id":61657891,"question_id":13553009,"body_markdown":"The solution with Java 8\r\n\r\n       \r\n\r\n           int result = Arrays.stream(array)\r\n               .boxed()\r\n               .collect(Collectors.groupingBy(i-&gt;i,Collectors.counting()))\r\n               .values()\r\n               .stream()\r\n               .max(Comparator.comparingLong(i-&gt;i))\r\n               .orElseThrow(RuntimeException::new));\r\n\r\n","title":"Find the element with highest occurrences in an array [java]","body":"<p>The solution with Java 8</p>\n\n<pre><code>       int result = Arrays.stream(array)\n           .boxed()\n           .collect(Collectors.groupingBy(i-&gt;i,Collectors.counting()))\n           .values()\n           .stream()\n           .max(Comparator.comparingLong(i-&gt;i))\n           .orElseThrow(RuntimeException::new));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12013422,"reputation":582,"user_id":8789323,"display_name":"Nsikan Sylvester"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1597249168,"creation_date":1597249168,"answer_id":63380744,"question_id":13553009,"body_markdown":"Here is Ruby SOlution:\r\n\r\n    def maxOccurence(arr)\r\n\t  m_hash = arr.group_by(&amp;:itself).transform_values(&amp;:count)\r\n\t  elem = 0, elem_count = 0\r\n\t  m_hash.each do |k, v|\r\n\t\tif v &gt; elem_count\r\n\t\t\telem = k\r\n\t\t\telem_count = v\r\n\t\tend\r\n\t  end\r\n\t  &quot;#{elem} occured #{elem_count} times&quot;\r\n    end\r\n\r\n    p maxOccurence([&quot;1&quot;, &quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;5&quot;,&quot;5&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;8&quot;])\r\n\r\noutput: \r\n\r\n    &quot;12 occured 10 times&quot;","title":"Find the element with highest occurrences in an array [java]","body":"<p>Here is Ruby SOlution:</p>\n<pre><code>def maxOccurence(arr)\n  m_hash = arr.group_by(&amp;:itself).transform_values(&amp;:count)\n  elem = 0, elem_count = 0\n  m_hash.each do |k, v|\n    if v &gt; elem_count\n        elem = k\n        elem_count = v\n    end\n  end\n  &quot;#{elem} occured #{elem_count} times&quot;\nend\n\np maxOccurence([&quot;1&quot;, &quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;5&quot;,&quot;5&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;12&quot;,&quot;8&quot;])\n</code></pre>\n<p>output:</p>\n<pre><code>&quot;12 occured 10 times&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18710561,"reputation":448,"user_id":13640736,"display_name":"SOUMEN K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1597315774,"creation_date":1597315774,"answer_id":63393512,"question_id":13553009,"body_markdown":"Here&#39;s a java solution --\r\n\r\n```java\r\n        List&lt;Integer&gt; list = Arrays.asList(1, 2, 2, 3, 2, 1, 3);\r\n        Set&lt;Integer&gt; set = new HashSet(list);\r\n        int max = 0;\r\n        int maxtemp;\r\n        int currentNum = 0;\r\n        for (Integer k : set) {\r\n            maxtemp = Math.max(Collections.frequency(list, k), max);\r\n            currentNum = maxtemp != max ? k : currentNum;\r\n            max = maxtemp;\r\n        }\r\n        System.out.println(&quot;Number :: &quot; + currentNum + &quot; Occurs :: &quot; + max + &quot; times&quot;);\r\n```","title":"Find the element with highest occurrences in an array [java]","body":"<p>Here's a java solution --</p>\n<pre class=\"lang-java prettyprint-override\"><code>        List&lt;Integer&gt; list = Arrays.asList(1, 2, 2, 3, 2, 1, 3);\n        Set&lt;Integer&gt; set = new HashSet(list);\n        int max = 0;\n        int maxtemp;\n        int currentNum = 0;\n        for (Integer k : set) {\n            maxtemp = Math.max(Collections.frequency(list, k), max);\n            currentNum = maxtemp != max ? k : currentNum;\n            max = maxtemp;\n        }\n        System.out.println(&quot;Number :: &quot; + currentNum + &quot; Occurs :: &quot; + max + &quot; times&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22112480,"reputation":21,"user_id":16367155,"display_name":"Rahul Sheth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628533969,"creation_date":1628532033,"answer_id":68716576,"question_id":13553009,"body_markdown":"    int[] array = new int[] { 1, 2, 4, 1, 3, 4, 2, 2, 1, 5, 2, 3, 5 };\r\n    \r\n    Long max = Arrays.stream(array).boxed().collect(Collectors.groupingBy(i -&gt; i, Collectors.counting())).values()\r\n    \t\t\t\t.stream().max(Comparator.comparing(Function.identity())).orElse(0L);\r\n    \t","title":"Find the element with highest occurrences in an array [java]","body":"<pre><code>int[] array = new int[] { 1, 2, 4, 1, 3, 4, 2, 2, 1, 5, 2, 3, 5 };\n\nLong max = Arrays.stream(array).boxed().collect(Collectors.groupingBy(i -&gt; i, Collectors.counting())).values()\n                .stream().max(Comparator.comparing(Function.identity())).orElse(0L);\n    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":11249374,"reputation":401,"user_id":8250946,"display_name":"vikash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660979289,"creation_date":1660979289,"answer_id":73424731,"question_id":13553009,"body_markdown":"Find the element with the highest occurrences in an array using java 8 is given below:\r\n\r\n    final Long maxOccurrencesElement = arr.stream()\r\n                    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\r\n                    .entrySet()\r\n                    .stream()\r\n                    .max((o1, o2) -&gt; o1.getValue().compareTo(o2.getValue()))\r\n                    .get()\r\n                    .getKey();","title":"Find the element with highest occurrences in an array [java]","body":"<p>Find the element with the highest occurrences in an array using java 8 is given below:</p>\n<pre><code>final Long maxOccurrencesElement = arr.stream()\n                .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\n                .entrySet()\n                .stream()\n                .max((o1, o2) -&gt; o1.getValue().compareTo(o2.getValue()))\n                .get()\n                .getKey();\n</code></pre>\n"}],"owner":{"account_id":2078827,"reputation":1236,"user_id":1851402,"accept_rate":50,"display_name":"Blackecho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70665,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":13553026,"answer_count":13,"score":9,"last_activity_date":1660979289,"creation_date":1353861128,"question_id":13553009,"body_markdown":"I have to find the element with highest occurrences in a double array.\r\nI did it like this:\r\n    \r\n    \r\n    int max = 0;\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n\t\t   int count = 0;\r\n           for (int j = 0; j &lt; array.length; j++) {\r\n\t\t\t if (array[i]==array[j])\r\n\t\t\t     count++;\r\n\t   }\r\n      if (count &gt;= max)\r\n          max = count;\r\n     }\r\n\r\nThe program works, but it is too slow! I have to find a better solution, can anyone help me?","title":"Find the element with highest occurrences in an array [java]","body":"<p>I have to find the element with highest occurrences in a double array.\nI did it like this:</p>\n\n<pre><code>int max = 0;\nfor (int i = 0; i &lt; array.length; i++) {\n       int count = 0;\n       for (int j = 0; j &lt; array.length; j++) {\n         if (array[i]==array[j])\n             count++;\n   }\n  if (count &gt;= max)\n      max = count;\n }\n</code></pre>\n\n<p>The program works, but it is too slow! I have to find a better solution, can anyone help me?</p>\n"},{"tags":["java","jvm"],"comments":[{"owner":{"account_id":43373,"reputation":224943,"user_id":126769,"accept_rate":94,"display_name":"nos"},"score":9,"creation_date":1264195770,"post_id":2120654,"comment_id":2057880,"body_markdown":"What are you actually asking ?","body":"What are you actually asking ?"},{"owner":{"account_id":29910,"reputation":113460,"user_id":81179,"accept_rate":100,"display_name":"ChristopheD"},"score":6,"creation_date":1264196494,"post_id":2120654,"comment_id":2057982,"body_markdown":"I personally feel that this should not have been closed (voted to reopen). The question may be thinly formulated but there is a `real` question in there (even though the answer may seem obvious at first sight to some).","body":"I personally feel that this should not have been closed (voted to reopen). The question may be thinly formulated but there is a <code>real</code> question in there (even though the answer may seem obvious at first sight to some)."},{"owner":{"account_id":129124,"reputation":13664,"user_id":327466,"accept_rate":95,"display_name":"KatieK"},"score":0,"creation_date":1354163528,"post_id":2120654,"comment_id":18675551,"body_markdown":"@ChristopheD - could you please clarify the question?","body":"@ChristopheD - could you please clarify the question?"}],"answers":[{"tags":[],"owner":{"account_id":85454,"reputation":5991,"user_id":238242,"accept_rate":93,"display_name":"Chris Kannon"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1264195759,"creation_date":1264195759,"answer_id":2120665,"question_id":2120654,"body_markdown":"The JVM executes Java code, but is written in platform specific languages such as C/C++/ASM etc. The JVM is not written in Java and hence cannot be platform independent.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>The JVM executes Java code, but is written in platform specific languages such as C/C++/ASM etc. The JVM is not written in Java and hence cannot be platform independent.</p>\n"},{"tags":[],"owner":{"account_id":65544,"reputation":26923,"user_id":192801,"accept_rate":90,"display_name":"FrustratedWithFormsDesigner"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1264195791,"creation_date":1264195791,"answer_id":2120670,"question_id":2120654,"body_markdown":"The JVM must be platform dependent to allow your Java to run on the specific platform. A JVM for Windows will translate your Java into different system calls than a JVM for OS X.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>The JVM must be platform dependent to allow your Java to run on the specific platform. A JVM for Windows will translate your Java into different system calls than a JVM for OS X.</p>\n"},{"tags":[],"owner":{"account_id":90976,"reputation":124,"user_id":250099,"display_name":"Neville Flynn"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1264195839,"creation_date":1264195839,"answer_id":2120675,"question_id":2120654,"body_markdown":"Because there needs to be some way to convert the platform-independent application&#39;s Java calls to calls that are compatible with the underlying OS.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>Because there needs to be some way to convert the platform-independent application's Java calls to calls that are compatible with the underlying OS.</p>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1264198079,"creation_date":1264198079,"answer_id":2120894,"question_id":2120654,"body_markdown":"Unless you have a CPU that can directly execute Java bytecode (there are such things) you need to be able to interact with the OS (for things like reading files, connecting to the network, displaying to the screen, etc...).\r\n\r\nYou can write a JVM in other languages (such as [Java][1] or [JavaScript][2]) but ultimately there needs to be something that can interact with the underlying OS. \r\n\r\n\r\n  [1]: http://jikesrvm.org/\r\n  [2]: http://ejohn.org/blog/running-java-in-javascript/","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>Unless you have a CPU that can directly execute Java bytecode (there are such things) you need to be able to interact with the OS (for things like reading files, connecting to the network, displaying to the screen, etc...).</p>\n\n<p>You can write a JVM in other languages (such as <a href=\"http://jikesrvm.org/\" rel=\"noreferrer\">Java</a> or <a href=\"http://ejohn.org/blog/running-java-in-javascript/\" rel=\"noreferrer\">JavaScript</a>) but ultimately there needs to be something that can interact with the underlying OS. </p>\n"},{"tags":[],"owner":{"account_id":629323,"reputation":211,"user_id":385066,"display_name":"aashish"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1315945878,"creation_date":1278464221,"answer_id":3191219,"question_id":2120654,"body_markdown":"I found that this was a great answer to the question:\r\n\r\n&gt; **JVM translates bytecode into machine language**   \r\n&gt;\r\n&gt; Every Java program is\r\n&gt; compiled into an intermediate language called Java bytecode. The JVM\r\n&gt; is used to both translate the bytecode into the machine language for a\r\n&gt; particular computer, and actually execute the corresponding\r\n&gt; machine-language instructions as well. The JVM and bytecode combined\r\n&gt; give Java its status as a &quot;portable&quot; language.\r\n&gt; \r\n&gt; **Machine language is OS dependent** \r\n&gt; \r\n&gt; Given the previous information, it should be easier to deduce an\r\n&gt; answer to the question. Since the JVM must translate the bytecode into\r\n&gt; machine language, and since the machine language depends on the\r\n&gt; operating system being used, it is clear that the JVM is platform\r\n&gt; (operating system) dependent. This fact can be verified by trying to\r\n&gt; download the JVM – you will be given a list of JVM’s corresponding to\r\n&gt; different operating systems, and you will obviously pick whichever JVM\r\n&gt; is targeted for the operating system that you are running.\r\n\r\nQuoted from [Is the JVM Platform Dependent?][1]\r\n\r\n\r\n  [1]: http://www.programmerinterview.com/java/is-jvm-platform-dependent.php","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>I found that this was a great answer to the question:</p>\n\n<blockquote>\n  <p><strong>JVM translates bytecode into machine language</strong>   </p>\n  \n  <p>Every Java program is\n  compiled into an intermediate language called Java bytecode. The JVM\n  is used to both translate the bytecode into the machine language for a\n  particular computer, and actually execute the corresponding\n  machine-language instructions as well. The JVM and bytecode combined\n  give Java its status as a \"portable\" language.</p>\n  \n  <p><strong>Machine language is OS dependent</strong> </p>\n  \n  <p>Given the previous information, it should be easier to deduce an\n  answer to the question. Since the JVM must translate the bytecode into\n  machine language, and since the machine language depends on the\n  operating system being used, it is clear that the JVM is platform\n  (operating system) dependent. This fact can be verified by trying to\n  download the JVM – you will be given a list of JVM’s corresponding to\n  different operating systems, and you will obviously pick whichever JVM\n  is targeted for the operating system that you are running.</p>\n</blockquote>\n\n<p>Quoted from <a href=\"http://www.programmerinterview.com/java/is-jvm-platform-dependent.php\" rel=\"noreferrer\">Is the JVM Platform Dependent?</a></p>\n"},{"tags":[],"owner":{"account_id":1474872,"reputation":41,"user_id":1385535,"display_name":"black.marque"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1336593140,"creation_date":1336593140,"answer_id":10523143,"question_id":2120654,"body_markdown":"No, JVMs are not platform independent. In fact they are platform specific run time environment provided by the vendor. Each platform (Windows, UNIX, Mac etc) has its own JVM to run Java applications. Although the byte code supports connection to multiple databases..\r\n\r\nThink of Music being played in a MP3 player, CD player and old faithful cassette players(Boom Box). The output is always the same, ie music. But the input (media ie .mp3 files for MP3 Players, CDs for CD Players and cassettes for Cassette Players) vary depending on the system [here the systems will be the various Operating Systems like Windows, UNIX, Mac etc..]. Hope i was able to solve your problem..","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>No, JVMs are not platform independent. In fact they are platform specific run time environment provided by the vendor. Each platform (Windows, UNIX, Mac etc) has its own JVM to run Java applications. Although the byte code supports connection to multiple databases..</p>\n\n<p>Think of Music being played in a MP3 player, CD player and old faithful cassette players(Boom Box). The output is always the same, ie music. But the input (media ie .mp3 files for MP3 Players, CDs for CD Players and cassettes for Cassette Players) vary depending on the system [here the systems will be the various Operating Systems like Windows, UNIX, Mac etc..]. Hope i was able to solve your problem..</p>\n"},{"tags":[],"owner":{"account_id":2397003,"reputation":29,"user_id":2095618,"display_name":"Srichandar.Karpuram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361453392,"creation_date":1361453392,"answer_id":15003515,"question_id":2120654,"body_markdown":"simply like - * - makes a +.\r\n\r\nWe all know Java is platform independent\r\n\r\nbut OS where we write the code is platform dependant\r\n\r\nand Output should be platform independent\r\nso, we make jvm (which is in-between and installed with jre) platform dependent so that the output is independent.\r\n","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>simply like - * - makes a +.</p>\n\n<p>We all know Java is platform independent</p>\n\n<p>but OS where we write the code is platform dependant</p>\n\n<p>and Output should be platform independent\nso, we make jvm (which is in-between and installed with jre) platform dependent so that the output is independent.</p>\n"},{"tags":[],"owner":{"account_id":1592898,"reputation":227,"user_id":1475834,"accept_rate":57,"display_name":"PeGiannOS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364641190,"creation_date":1364641190,"answer_id":15717760,"question_id":2120654,"body_markdown":"I think that it could be platform independent if many different languages (each one written in specific different platform )where combined to make it change its own code dynamically.But all these take some great effort to happen and maybe destroy its portability.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>I think that it could be platform independent if many different languages (each one written in specific different platform )where combined to make it change its own code dynamically.But all these take some great effort to happen and maybe destroy its portability.</p>\n"},{"tags":[],"owner":{"account_id":4397554,"reputation":1,"user_id":3584113,"display_name":"Beena"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398753776,"creation_date":1398753776,"answer_id":23357344,"question_id":2120654,"body_markdown":"JVM translate the byte code which is universal to machine code which is machine dependent hence JVM is platform dependent. Due to this byte code java is platform independent.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>JVM translate the byte code which is universal to machine code which is machine dependent hence JVM is platform dependent. Due to this byte code java is platform independent.</p>\n"},{"tags":[],"owner":{"account_id":7214282,"reputation":881,"user_id":5507319,"accept_rate":43,"display_name":"Yirga"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1453480595,"creation_date":1453477880,"answer_id":34950660,"question_id":2120654,"body_markdown":"No, JVM is platform dependent. The code written in Java is not platform dependent. If you write Java code on a Windows operating system you can run that code on Linux or other operating Systems. But the JVM for Windows and Linux is different. JVM are found in JRE and when you download JRE from Oracle it says JRE for Window, Linux and other operating systems ","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>No, JVM is platform dependent. The code written in Java is not platform dependent. If you write Java code on a Windows operating system you can run that code on Linux or other operating Systems. But the JVM for Windows and Linux is different. JVM are found in JRE and when you download JRE from Oracle it says JRE for Window, Linux and other operating systems </p>\n"},{"tags":[],"owner":{"account_id":5373474,"reputation":61,"user_id":4281220,"display_name":"Parineetha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461884751,"creation_date":1461884751,"answer_id":36926926,"question_id":2120654,"body_markdown":"JVM depends on operating system. For the code to be independent, something should be dependent and that is JVM. While downloading JDK it asks for which OS you want to download it for. Which clearly implies that JVM is platform dependent.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>JVM depends on operating system. For the code to be independent, something should be dependent and that is JVM. While downloading JDK it asks for which OS you want to download it for. Which clearly implies that JVM is platform dependent.</p>\n"},{"tags":[],"owner":{"account_id":11305778,"reputation":7,"user_id":8290451,"accept_rate":50,"display_name":"Prashant Tendulkar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1509216543,"creation_date":1509216543,"answer_id":46993262,"question_id":2120654,"body_markdown":"The JVM is not platform independent\r\n\r\nThe key here is that the JVM depends on the operating system – so if you are running Mac OS X you will have a different JVM than if you are running Windows or some other operating system. This fact can be verified by trying to download the JVM for your particular machine – when trying to download it, you will be given a list of JVM’s corresponding to different operating systems, and you will obviously pick whichever JVM is targeted for the operating system that you are running.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>The JVM is not platform independent</p>\n\n<p>The key here is that the JVM depends on the operating system – so if you are running Mac OS X you will have a different JVM than if you are running Windows or some other operating system. This fact can be verified by trying to download the JVM for your particular machine – when trying to download it, you will be given a list of JVM’s corresponding to different operating systems, and you will obviously pick whichever JVM is targeted for the operating system that you are running.</p>\n"},{"tags":[],"owner":{"account_id":16674329,"reputation":11,"user_id":12051129,"display_name":"Bapun Naik"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1568183391,"creation_date":1568179368,"answer_id":57882583,"question_id":2120654,"body_markdown":"JVM is platform dependent because it takes java byte code and generates byte code for the current operating system. So Java software is platform dependent but Java language is platform independent because different operating system have different JVMs.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>JVM is platform dependent because it takes java byte code and generates byte code for the current operating system. So Java software is platform dependent but Java language is platform independent because different operating system have different JVMs.</p>\n"},{"tags":[],"owner":{"account_id":4089262,"reputation":3041,"user_id":3357735,"display_name":"Neethu Lalitha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639395008,"creation_date":1639395008,"answer_id":70333923,"question_id":2120654,"body_markdown":"[![JVM][1]][1]\r\n\r\n\r\nHope this image can make it clear. \r\nWhen you install java on your machine, you are asked to select your OS.\r\nThat means java to be installed on a Windows machine is not the same as the one on a mac.\r\nJava installation comes with JDK, JRE, and JVM that are OS-specific.\r\n\r\nJDK has a compiler that converts your Java code to bytecode and bytecode is platform-independent. JVM can read this bytecode and using an interpreter convert them to OS-specific instructions which vary based on your OS.\r\n\r\nAll JDK, JRE, and JVM are platform-dependent. But JAVA is platform-independent because bytecode is platform-independent.\r\n\r\n\r\n[Content summarized from here ][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LI73p.jpg\r\n  [2]: https://www.youtube.com/watch?v=GXUiEouK7DM&amp;ab_channel=SimpleSnippets","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p><a href=\"https://i.stack.imgur.com/LI73p.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LI73p.jpg\" alt=\"JVM\" /></a></p>\n<p>Hope this image can make it clear.\nWhen you install java on your machine, you are asked to select your OS.\nThat means java to be installed on a Windows machine is not the same as the one on a mac.\nJava installation comes with JDK, JRE, and JVM that are OS-specific.</p>\n<p>JDK has a compiler that converts your Java code to bytecode and bytecode is platform-independent. JVM can read this bytecode and using an interpreter convert them to OS-specific instructions which vary based on your OS.</p>\n<p>All JDK, JRE, and JVM are platform-dependent. But JAVA is platform-independent because bytecode is platform-independent.</p>\n<p><a href=\"https://www.youtube.com/watch?v=GXUiEouK7DM&amp;ab_channel=SimpleSnippets\" rel=\"nofollow noreferrer\">Content summarized from here </a></p>\n"},{"tags":[],"owner":{"account_id":25480252,"reputation":1,"user_id":19276735,"display_name":"Yohan J Walter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660979289,"creation_date":1660979289,"answer_id":73424730,"question_id":2120654,"body_markdown":"It is platform-independent. Because java has bytecode it is platform-independent. So, when it writes once run everywhere.","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>It is platform-independent. Because java has bytecode it is platform-independent. So, when it writes once run everywhere.</p>\n"}],"owner":{"account_id":86591,"reputation":26893,"user_id":240698,"accept_rate":62,"display_name":"giri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51742,"favorite_count":0,"down_vote_count":4,"up_vote_count":20,"accepted_answer_id":2120894,"answer_count":15,"score":16,"last_activity_date":1660979289,"creation_date":1264195646,"question_id":2120654,"body_markdown":"Just curious to know when java is made platform independent then are there any specific reasons JVM is made platform dependent..\r\n","title":"Why is the JVM not platform independent, given that Java (the language) is platform independent?","body":"<p>Just curious to know when java is made platform independent then are there any specific reasons JVM is made platform dependent..</p>\n"},{"tags":["java","android-studio","android-studio-3.1.4"],"comments":[{"owner":{"account_id":980790,"reputation":8154,"user_id":1000551,"display_name":"Vadim Kotov"},"score":0,"creation_date":1555669822,"post_id":51736324,"comment_id":98195665,"body_markdown":"Related - https://stackoverflow.com/questions/54322086/android-studio-could-not-find-main-class-of-scratch-file","body":"Related - <a href=\"https://stackoverflow.com/questions/54322086/android-studio-could-not-find-main-class-of-scratch-file\" title=\"android studio could not find main class of scratch file\">stackoverflow.com/questions/54322086/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":19655799,"reputation":167,"user_id":14388477,"display_name":"Farid Sharif Moghaddam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660977880,"creation_date":1660977880,"answer_id":73424619,"question_id":51736324,"body_markdown":"Scratch file doesn&#39;t require to define class or main function, and you can write your code directly in scratch file (file with `.kts` extension)","title":"Why won&#39;t scratch files work in Android Studio?","body":"<p>Scratch file doesn't require to define class or main function, and you can write your code directly in scratch file (file with <code>.kts</code> extension)</p>\n"}],"owner":{"account_id":6199940,"reputation":1431,"user_id":5194466,"accept_rate":0,"display_name":"Henry"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":765,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1660977880,"creation_date":1533681180,"question_id":51736324,"body_markdown":"I just tried creating and running my first scratch file in Android Studio and it refuses to execute. Once I &quot;get the red out&quot; of the code, and try to execute it, it invariably gives me this message:\r\n\r\n    &quot;C:\\Program Files\\Android\\Android Studio\\jre\\bin\\java&quot; &quot;-javaagent:C:\\Program Files\\Android\\Android Studio\\lib\\idea_rt.jar=55179:C:\\Program Files\\Android\\Android Studio\\bin&quot; -Dfile.encoding=UTF-8 -classpath &quot;C:\\Users\\Kathe\\.AndroidStudio3.1\\system\\compile-server\\cwfrecyclerview_28cee19d\\scratches\\out;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\charsets.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\jce.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\jsse.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\management-agent.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\resources.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\rt.jar;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\common\\build\\intermediates\\classes\\debug;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\common\\build\\generated\\res\\rs\\debug;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\common\\build\\generated\\res\\resValues\\debug;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\runner-1.0.2.aar\\bebf8b46884ec7ad9744d30654e3a8fa\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\android.arch.lifecycle\\common\\1.1.0\\edf3f7bfb84a7521d0599efa3b0113a0ee90f85\\common-1.1.0.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.android.support\\support-annotations\\27.1.1\\39ded76b5e1ce1c5b2688e1d25cdc20ecee32007\\support-annotations-27.1.1.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\animated-vector-drawable-27.1.1.aar\\3026d449b6dd3b8d579b953dbeaad620\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-compat-27.1.1.aar\\ac14c6fd640673d444366972bd8578f3\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-compat-27.1.1.aar\\ac14c6fd640673d444366972bd8578f3\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\viewmodel-1.1.0.aar\\703d03849fead14cd573339ccbf74521\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.squareup\\javawriter\\2.1.1\\67ff45d9ae02e583d0f9b3432a5ebbe05c30c966\\javawriter-2.1.1.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-vector-drawable-27.1.1.aar\\af4e9375156ee99d7b7ed9804dc82dd8\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-core-ui-27.1.1.aar\\c7f11890d5f5b74e3e9d06afa5fbb997\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-core-ui-27.1.1.aar\\c7f11890d5f5b74e3e9d06afa5fbb997\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-core-utils-27.1.1.aar\\dceb3eeaaf1050600bb0d2fe0a889a51\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.google.code.findbugs\\jsr305\\2.0.1\\516c03b21d50a644d538de0f0369c620989cd8f0\\jsr305-2.0.1.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\espresso-core-3.0.2.aar\\4a77e4a6c39a7f16d185757172f44dce\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\javax.inject\\javax.inject\\1\\6975da39a7040257bd51d21a231b76c915872d38\\javax.inject-1.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-fragment-27.1.1.aar\\8608e49b7499a17e38d008d8ae17778a\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\junit\\junit\\4.12\\2973d150c0dc1fefe998f834810d68f278ea58ec\\junit-4.12.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\runtime-1.1.0.aar\\701aa5d0a71a62d398f3390a72488495\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\org.hamcrest\\hamcrest-core\\1.3\\42a25dc3219429f0e5d060061f71acb49bf010a0\\hamcrest-core-1.3.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\monitor-1.0.2.aar\\89f15379b9d3c77bbc24a0702e0e89e9\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\appcompat-v7-27.1.1.aar\\2e2a28cf1aa5a9404e2628890daf92f7\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\appcompat-v7-27.1.1.aar\\2e2a28cf1aa5a9404e2628890daf92f7\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\espresso-idling-resource-3.0.2.aar\\69861e25d616b49fdee29aa342f3e29f\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\livedata-core-1.1.0.aar\\27ba305e2a1bfa0d08b520e6303b8703\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\org.hamcrest\\hamcrest-library\\1.3\\4785a3c21320980282f9f33d0d1264a69040538f\\hamcrest-library-1.3.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\org.hamcrest\\hamcrest-integration\\1.3\\5de0c73fef18917cd85d0ab70bb23818685e4dfd\\hamcrest-integration-1.3.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\android.arch.core\\common\\1.1.0\\8007981f7d7540d89cd18471b8e5dcd2b4f99167\\common-1.1.0.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\net.sf.kxml\\kxml2\\2.3.0\\ccbc77a5fd907ef863c29f3596c6f54ffa4e9442\\kxml2-2.3.0.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\runtime-1.1.0.aar\\386de9b4bfe3bc36c31dc07fc570f845\\jars\\classes.jar;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\app\\build\\intermediates\\classes\\debug;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\app\\build\\generated\\res\\rs\\debug;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\app\\build\\generated\\res\\resValues\\debug;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\transition-27.1.1.aar\\56bbbf66081846793e8e6ad5d263f42d\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\transition-27.1.1.aar\\56bbbf66081846793e8e6ad5d263f42d\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-v4-27.1.1.aar\\b0f15e6eb17547dfb6b002a658bf4690\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\cardview-v7-27.1.1.aar\\e72be1cd03005dd53770e422ef3a9042\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\cardview-v7-27.1.1.aar\\e72be1cd03005dd53770e422ef3a9042\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\recyclerview-v7-27.1.1.aar\\a0c73e0ca8f0a201d40c552d95d0cb2d\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\recyclerview-v7-27.1.1.aar\\a0c73e0ca8f0a201d40c552d95d0cb2d\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-media-compat-27.1.1.aar\\821500d422cac696922838f43bdc0b51\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-media-compat-27.1.1.aar\\821500d422cac696922838f43bdc0b51\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\constraint-layout-1.1.2.aar\\da50e0747597ae74c0ea8e969852a228\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\constraint-layout-1.1.2.aar\\da50e0747597ae74c0ea8e969852a228\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.squareup.okhttp3\\okhttp\\3.7.0\\6edbebdd8868708db718d15c09c4b28037fd487e\\okhttp-3.7.0.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\design-27.1.1.aar\\ae7e21079024390be2e44010a29eeb0b\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\design-27.1.1.aar\\ae7e21079024390be2e44010a29eeb0b\\jars\\classes.jar;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\app\\libs\\RhinoCommon.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.android.support.constraint\\constraint-layout-solver\\1.1.2\\bfc967828daffc35ba01c9ee204d98b664930a0f\\constraint-layout-solver-1.1.2.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.squareup.okio\\okio\\1.12.0\\3742beff8024d0a0073d284b7c5e4cbf73d99b25\\okio-1.12.0.jar&quot; scratch\r\n    Error: Could not find or load main class scratch\r\n    Process finished with exit code 1\r\n\r\n\r\n\r\n\r\nHere&#39;s the code (which resides in a file called scratch.java):\r\n\r\n    \r\n    public class scratch {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            System.out.println(&quot;Hello World&quot;);\r\n        } \r\n    }\r\n\r\n\r\n\r\nWhat am I doing wrong? I&#39;m following the instructions on [this video][1] which works fine for him but doesn&#39;t work at all for me. Have I failed to install something or turn something on within Android Studio?\r\n\r\nI&#39;m running Android Studio 3.1.4 on a Windows 10 laptop. \r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=AmeDNZ-86ig\r\n","title":"Why won&#39;t scratch files work in Android Studio?","body":"<p>I just tried creating and running my first scratch file in Android Studio and it refuses to execute. Once I \"get the red out\" of the code, and try to execute it, it invariably gives me this message:</p>\n\n<pre><code>\"C:\\Program Files\\Android\\Android Studio\\jre\\bin\\java\" \"-javaagent:C:\\Program Files\\Android\\Android Studio\\lib\\idea_rt.jar=55179:C:\\Program Files\\Android\\Android Studio\\bin\" -Dfile.encoding=UTF-8 -classpath \"C:\\Users\\Kathe\\.AndroidStudio3.1\\system\\compile-server\\cwfrecyclerview_28cee19d\\scratches\\out;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\charsets.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\jce.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\jsse.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\management-agent.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\resources.jar;C:\\Program Files\\Android\\Android Studio\\jre\\jre\\lib\\rt.jar;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\common\\build\\intermediates\\classes\\debug;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\common\\build\\generated\\res\\rs\\debug;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\common\\build\\generated\\res\\resValues\\debug;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\runner-1.0.2.aar\\bebf8b46884ec7ad9744d30654e3a8fa\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\android.arch.lifecycle\\common\\1.1.0\\edf3f7bfb84a7521d0599efa3b0113a0ee90f85\\common-1.1.0.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.android.support\\support-annotations\\27.1.1\\39ded76b5e1ce1c5b2688e1d25cdc20ecee32007\\support-annotations-27.1.1.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\animated-vector-drawable-27.1.1.aar\\3026d449b6dd3b8d579b953dbeaad620\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-compat-27.1.1.aar\\ac14c6fd640673d444366972bd8578f3\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-compat-27.1.1.aar\\ac14c6fd640673d444366972bd8578f3\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\viewmodel-1.1.0.aar\\703d03849fead14cd573339ccbf74521\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.squareup\\javawriter\\2.1.1\\67ff45d9ae02e583d0f9b3432a5ebbe05c30c966\\javawriter-2.1.1.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-vector-drawable-27.1.1.aar\\af4e9375156ee99d7b7ed9804dc82dd8\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-core-ui-27.1.1.aar\\c7f11890d5f5b74e3e9d06afa5fbb997\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-core-ui-27.1.1.aar\\c7f11890d5f5b74e3e9d06afa5fbb997\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-core-utils-27.1.1.aar\\dceb3eeaaf1050600bb0d2fe0a889a51\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.google.code.findbugs\\jsr305\\2.0.1\\516c03b21d50a644d538de0f0369c620989cd8f0\\jsr305-2.0.1.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\espresso-core-3.0.2.aar\\4a77e4a6c39a7f16d185757172f44dce\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\javax.inject\\javax.inject\\1\\6975da39a7040257bd51d21a231b76c915872d38\\javax.inject-1.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-fragment-27.1.1.aar\\8608e49b7499a17e38d008d8ae17778a\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\junit\\junit\\4.12\\2973d150c0dc1fefe998f834810d68f278ea58ec\\junit-4.12.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\runtime-1.1.0.aar\\701aa5d0a71a62d398f3390a72488495\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\org.hamcrest\\hamcrest-core\\1.3\\42a25dc3219429f0e5d060061f71acb49bf010a0\\hamcrest-core-1.3.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\monitor-1.0.2.aar\\89f15379b9d3c77bbc24a0702e0e89e9\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\appcompat-v7-27.1.1.aar\\2e2a28cf1aa5a9404e2628890daf92f7\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\appcompat-v7-27.1.1.aar\\2e2a28cf1aa5a9404e2628890daf92f7\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\espresso-idling-resource-3.0.2.aar\\69861e25d616b49fdee29aa342f3e29f\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\livedata-core-1.1.0.aar\\27ba305e2a1bfa0d08b520e6303b8703\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\org.hamcrest\\hamcrest-library\\1.3\\4785a3c21320980282f9f33d0d1264a69040538f\\hamcrest-library-1.3.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\org.hamcrest\\hamcrest-integration\\1.3\\5de0c73fef18917cd85d0ab70bb23818685e4dfd\\hamcrest-integration-1.3.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\android.arch.core\\common\\1.1.0\\8007981f7d7540d89cd18471b8e5dcd2b4f99167\\common-1.1.0.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\net.sf.kxml\\kxml2\\2.3.0\\ccbc77a5fd907ef863c29f3596c6f54ffa4e9442\\kxml2-2.3.0.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\runtime-1.1.0.aar\\386de9b4bfe3bc36c31dc07fc570f845\\jars\\classes.jar;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\app\\build\\intermediates\\classes\\debug;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\app\\build\\generated\\res\\rs\\debug;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\app\\build\\generated\\res\\resValues\\debug;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\transition-27.1.1.aar\\56bbbf66081846793e8e6ad5d263f42d\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\transition-27.1.1.aar\\56bbbf66081846793e8e6ad5d263f42d\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-v4-27.1.1.aar\\b0f15e6eb17547dfb6b002a658bf4690\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\cardview-v7-27.1.1.aar\\e72be1cd03005dd53770e422ef3a9042\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\cardview-v7-27.1.1.aar\\e72be1cd03005dd53770e422ef3a9042\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\recyclerview-v7-27.1.1.aar\\a0c73e0ca8f0a201d40c552d95d0cb2d\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\recyclerview-v7-27.1.1.aar\\a0c73e0ca8f0a201d40c552d95d0cb2d\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-media-compat-27.1.1.aar\\821500d422cac696922838f43bdc0b51\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\support-media-compat-27.1.1.aar\\821500d422cac696922838f43bdc0b51\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\constraint-layout-1.1.2.aar\\da50e0747597ae74c0ea8e969852a228\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\constraint-layout-1.1.2.aar\\da50e0747597ae74c0ea8e969852a228\\jars\\classes.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.squareup.okhttp3\\okhttp\\3.7.0\\6edbebdd8868708db718d15c09c4b28037fd487e\\okhttp-3.7.0.jar;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\design-27.1.1.aar\\ae7e21079024390be2e44010a29eeb0b\\res;C:\\Users\\Kathe\\.gradle\\caches\\transforms-1\\files-1.1\\design-27.1.1.aar\\ae7e21079024390be2e44010a29eeb0b\\jars\\classes.jar;C:\\Users\\Kathe\\Downloads\\android-RuntimePermissions-master\\CWFRecyclerview\\app\\libs\\RhinoCommon.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.android.support.constraint\\constraint-layout-solver\\1.1.2\\bfc967828daffc35ba01c9ee204d98b664930a0f\\constraint-layout-solver-1.1.2.jar;C:\\Users\\Kathe\\.gradle\\caches\\modules-2\\files-2.1\\com.squareup.okio\\okio\\1.12.0\\3742beff8024d0a0073d284b7c5e4cbf73d99b25\\okio-1.12.0.jar\" scratch\nError: Could not find or load main class scratch\nProcess finished with exit code 1\n</code></pre>\n\n<p>Here's the code (which resides in a file called scratch.java):</p>\n\n<pre><code>public class scratch {\n\n    public static void main(String[] args) {\n\n        System.out.println(\"Hello World\");\n    } \n}\n</code></pre>\n\n<p>What am I doing wrong? I'm following the instructions on <a href=\"https://www.youtube.com/watch?v=AmeDNZ-86ig\" rel=\"nofollow noreferrer\">this video</a> which works fine for him but doesn't work at all for me. Have I failed to install something or turn something on within Android Studio?</p>\n\n<p>I'm running Android Studio 3.1.4 on a Windows 10 laptop. </p>\n"},{"tags":["java","json","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660847337,"creation_date":1660817721,"answer_id":73401276,"question_id":73397763,"body_markdown":"One possible solution is to transform the JSON structure, separate String and Object elements before deserialization.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;errorCount\\&quot;: 2,&quot; +\r\n        &quot;    \\&quot;errorIndices\\&quot;: [&quot; +\r\n        &quot;        0,&quot; +\r\n        &quot;        1&quot; +\r\n        &quot;    ],&quot; +\r\n        &quot;    \\&quot;data\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;errorCode\\&quot;: 901,&quot; +\r\n        &quot;            \\&quot;errorMessage\\&quot;: \\&quot;IBad data: Check the data\\&quot;,&quot; +\r\n        &quot;            \\&quot;errorData\\&quot;: \\&quot;xxxx\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;errorCode\\&quot;: 901,&quot; +\r\n        &quot;            \\&quot;errorMessage\\&quot;: \\&quot;IBad data: Check the data\\&quot;,&quot; +\r\n        &quot;            \\&quot;errorData\\&quot;: \\&quot;XZY\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;fun now\\&quot;&quot; +\r\n        &quot;    ]&quot; +\r\n        &quot;}&quot;);\r\n    JsonNode node = josson.getNode(&quot;field(data[isText()]*, errors: data[isObject()]*)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n**Output**\r\n\r\n    {\r\n      &quot;errorCount&quot; : 2,\r\n      &quot;errorIndices&quot; : [ 0, 1 ],\r\n      &quot;data&quot; : [ &quot;fun now&quot; ],\r\n      &quot;errors&quot; : [ {\r\n        &quot;errorCode&quot; : 901,\r\n        &quot;errorMessage&quot; : &quot;IBad data: Check the data&quot;,\r\n        &quot;errorData&quot; : &quot;xxxx&quot;\r\n      }, {\r\n        &quot;errorCode&quot; : 901,\r\n        &quot;errorMessage&quot; : &quot;IBad data: Check the data&quot;,\r\n        &quot;errorData&quot; : &quot;XZY&quot;\r\n      } ]\r\n    }\r\n\r\n**Deserialization**\r\n\r\nI tested this without error.\r\n\r\n    JsonNode node = josson.getNode(&quot;field(data[isText()]*, errors: data[isObject()]*)&quot;);\r\n    ApiResponse apiResponse = new ObjectMapper().readerFor(ApiResponse.class).readValue(node);\r\n\r\nError.java\r\n\r\n    public class Error {\r\n        int errorCode;\r\n        String errorMessage;\r\n        String errorData;\r\n\r\n        public Error() {\r\n        }\r\n\r\n        public void setErrorCode(int errorCode) {\r\n            this.errorCode = errorCode;\r\n        }\r\n\r\n        public void setErrorMessage(String errorMessage) {\r\n            this.errorMessage = errorMessage;\r\n        }\r\n\r\n        public void setErrorData(String errorData) {\r\n            this.errorData = errorData;\r\n        }\r\n    }\r\n\r\nApiResponse.java\r\n\r\n    public class ApiResponse {\r\n        int errorCount;\r\n        int[] errorIndices;\r\n        String[] data;\r\n        Error[] errors;\r\n\r\n        public ApiResponse() {\r\n        }\r\n\r\n        public void setErrorCount(int errorCount) {\r\n            this.errorCount = errorCount;\r\n        }\r\n\r\n        public void setErrorIndices(int[] errorIndices) {\r\n            this.errorIndices = errorIndices;\r\n        }\r\n\r\n        public void setData(String[] data) {\r\n            this.data = data;\r\n        }\r\n\r\n        public void setErrors(Error[] errors) {\r\n            this.errors = errors;\r\n        }\r\n    }\r\n","title":"Variable api JSON responses to bind to Java Object using Jackson","body":"<p>One possible solution is to transform the JSON structure, separate String and Object elements before deserialization.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;errorCount\\&quot;: 2,&quot; +\n    &quot;    \\&quot;errorIndices\\&quot;: [&quot; +\n    &quot;        0,&quot; +\n    &quot;        1&quot; +\n    &quot;    ],&quot; +\n    &quot;    \\&quot;data\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;errorCode\\&quot;: 901,&quot; +\n    &quot;            \\&quot;errorMessage\\&quot;: \\&quot;IBad data: Check the data\\&quot;,&quot; +\n    &quot;            \\&quot;errorData\\&quot;: \\&quot;xxxx\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;errorCode\\&quot;: 901,&quot; +\n    &quot;            \\&quot;errorMessage\\&quot;: \\&quot;IBad data: Check the data\\&quot;,&quot; +\n    &quot;            \\&quot;errorData\\&quot;: \\&quot;XZY\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;fun now\\&quot;&quot; +\n    &quot;    ]&quot; +\n    &quot;}&quot;);\nJsonNode node = josson.getNode(&quot;field(data[isText()]*, errors: data[isObject()]*)&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;errorCount&quot; : 2,\n  &quot;errorIndices&quot; : [ 0, 1 ],\n  &quot;data&quot; : [ &quot;fun now&quot; ],\n  &quot;errors&quot; : [ {\n    &quot;errorCode&quot; : 901,\n    &quot;errorMessage&quot; : &quot;IBad data: Check the data&quot;,\n    &quot;errorData&quot; : &quot;xxxx&quot;\n  }, {\n    &quot;errorCode&quot; : 901,\n    &quot;errorMessage&quot; : &quot;IBad data: Check the data&quot;,\n    &quot;errorData&quot; : &quot;XZY&quot;\n  } ]\n}\n</code></pre>\n<p><strong>Deserialization</strong></p>\n<p>I tested this without error.</p>\n<pre><code>JsonNode node = josson.getNode(&quot;field(data[isText()]*, errors: data[isObject()]*)&quot;);\nApiResponse apiResponse = new ObjectMapper().readerFor(ApiResponse.class).readValue(node);\n</code></pre>\n<p>Error.java</p>\n<pre><code>public class Error {\n    int errorCode;\n    String errorMessage;\n    String errorData;\n\n    public Error() {\n    }\n\n    public void setErrorCode(int errorCode) {\n        this.errorCode = errorCode;\n    }\n\n    public void setErrorMessage(String errorMessage) {\n        this.errorMessage = errorMessage;\n    }\n\n    public void setErrorData(String errorData) {\n        this.errorData = errorData;\n    }\n}\n</code></pre>\n<p>ApiResponse.java</p>\n<pre><code>public class ApiResponse {\n    int errorCount;\n    int[] errorIndices;\n    String[] data;\n    Error[] errors;\n\n    public ApiResponse() {\n    }\n\n    public void setErrorCount(int errorCount) {\n        this.errorCount = errorCount;\n    }\n\n    public void setErrorIndices(int[] errorIndices) {\n        this.errorIndices = errorIndices;\n    }\n\n    public void setData(String[] data) {\n        this.data = data;\n    }\n\n    public void setErrors(Error[] errors) {\n        this.errors = errors;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2254847,"reputation":249,"user_id":1986244,"accept_rate":15,"display_name":"user1986244"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660976133,"creation_date":1660976133,"answer_id":73424495,"question_id":73397763,"body_markdown":"My target was to use Jackson api, and @Raymond approach is using another library. I found custom deserialization appro[ach here][1] \r\nI used the ```SingleAwareListDeserializer``` from the article and updated it to the following. In my case the deserializer in case of String response it is just pushing the String to the list. \r\n```\r\n  if (JsonToken.START_ARRAY.equals(token)) {\r\n            while (p.nextToken() != null) {\r\n                if (JsonToken.START_OBJECT.equals(p.currentToken())) {\r\n                    list.add(deserializeObject(p));\r\n                } else  if (JsonToken.VALUE_STRING.equals(p.currentToken())) {\r\n                 //added this part in case of string response\r\n                list.add(p.getValueAsString());\r\n                } \r\n            }\r\n        }\r\n```\r\nI have the following classes to map the response.\r\n```\r\npublic class Data {\r\n\r\n\tprivate Data() {\r\n\t\t\r\n\t}\r\n\r\n\tprivate String errorCode;\r\n\tprivate String errorMessage;\r\n\tprivate String errorData;\r\n\t\r\n\tpublic String getErrorCode() {\r\n\t\treturn errorCode;\r\n\t}\r\n\tpublic void setErrorCode(String errorCode) {\r\n\t\tthis.errorCode = errorCode;\r\n\t}\r\n\tpublic String getErrorMessage() {\r\n\t\treturn errorMessage;\r\n\t}\r\n\tpublic void setErrorMessage(String errorMessage) {\r\n\t\tthis.errorMessage = errorMessage;\r\n\t}\r\n\tpublic String getErrorData() {\r\n\t\treturn errorData;\r\n\t}\r\n\tpublic void setErrorData(String errorData) {\r\n\t\tthis.errorData = errorData;\r\n\t}\r\n\r\n\t\r\n\t\r\n}\r\n```\r\nBelow ApiResponse\r\n```\r\npublic class ApiResponse {\r\n\r\n\tint errorCount;\r\n\tint[] errorIndices;\r\n\t\r\n\t@JsonDeserialize(using = SingleAwareListDeserializer.class)\r\n\tList&lt;Data&gt; data;\r\n\t\r\n\tpublic int getErrorCount() {\r\n\t\treturn errorCount;\r\n\t}\r\n\tpublic void setErrorCount(int errorCount) {\r\n\t\tthis.errorCount = errorCount;\r\n\t}\r\n\tpublic int[] getErrorIndices() {\r\n\t\treturn errorIndices;\r\n\t}\r\n\tpublic void setErrorIndices(int[] errorIndices) {\r\n\t\tthis.errorIndices = errorIndices;\r\n\t}\r\n\r\n\tpublic List&lt;Data&gt; getData() {\r\n\t\treturn data;\r\n\t}\r\n\tpublic void setData(List&lt;Data&gt; data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\t\r\n}\r\n```\r\nFor testing I used the following,\r\n```\r\npublic void deserializeTest() {\r\n       //case response has a generic List with Data object type and string //value mix\r\n\t\tString objStringWithError = &quot;\\n&quot;\r\n\t\t\t\t+ &quot;{\\n&quot;\r\n\t\t\t\t+ &quot;    \\&quot;errorCount\\&quot;: 2,\\n&quot;\r\n\t\t\t\t+ &quot;    \\&quot;errorIndices\\&quot;: [\\n&quot;\r\n\t\t\t\t+ &quot;        0,\\n&quot;\r\n\t\t\t\t+ &quot;        1\\n&quot;\r\n\t\t\t\t+ &quot;    ],\\n&quot;\r\n\t\t\t\t+ &quot;    \\&quot;data\\&quot;: [\\n&quot;\r\n\t\t\t\t+ &quot;        \\&quot;try now\\&quot;,\\n&quot;\r\n\t\t\t\t+ &quot;        {\\n&quot;\r\n\t\t\t\t+ &quot;            \\&quot;errorCode\\&quot;: 901,\\n&quot;\r\n\t\t\t\t+ &quot;            \\&quot;errorMessage\\&quot;: \\&quot;IBad data: Check the data\\&quot;,\\n&quot;\r\n\t\t\t\t+ &quot;            \\&quot;errorData\\&quot;: \\&quot;xxxx\\&quot;\\n&quot;\r\n\t\t\t\t+ &quot;        },\\n&quot;\r\n\t\t\t\t+ &quot;        {\\n&quot;\r\n\t\t\t\t+ &quot;            \\&quot;errorCode\\&quot;: 901,\\n&quot;\r\n\t\t\t\t+ &quot;            \\&quot;errorMessage\\&quot;: \\&quot;IBad data: Check the data\\&quot;,\\n&quot;\r\n\t\t\t\t+ &quot;            \\&quot;errorData\\&quot;: \\&quot;XZY\\&quot;\\n&quot;\r\n\t\t\t\t+ &quot;        },\\n&quot;\r\n\t\t\t\t+ &quot;        \\&quot;fun now\\&quot;\\n&quot;\r\n\t\t\t\t+ &quot;    ]\\n&quot;\r\n\t\t\t\t+ &quot;}&quot;;\r\n//case response have errorcount, errorIndices fields and array of Strings\r\n\t\tString objStringWithNoError = &quot;{\\&quot;errorCount\\&quot;: 0,\\n&quot;\r\n\t\t\t\t+ &quot;\\&quot;errorIndices\\&quot;: [],\\n&quot;\r\n\t\t\t\t+ &quot;\\&quot;data\\&quot;: [\\n&quot;\r\n\t\t\t\t+ &quot;    \\&quot;fun now\\&quot;,\\n&quot;\r\n\t\t\t\t+ &quot;    \\&quot;try later\\&quot;\\n&quot;\r\n\t\t\t\t+ &quot;]}&quot;;\r\n//case response is only array of strings\r\n\t\tString stringArray = &quot;{\\n&quot;\r\n\t\t\t\t+ &quot;\\&quot;data\\&quot;: [\\n&quot;\r\n\t\t\t\t+ &quot;    \\&quot;fun now\\&quot;,\\n&quot;\r\n\t\t\t\t+ &quot;    \\&quot;try later\\&quot;\\n&quot;\r\n\t\t\t\t+ &quot;]}&quot;;\r\n\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\tApiResponse model = null;\r\n\t\ttry {\r\n\t\t\tmodel = mapper.readValue(objStringWithError, ApiResponse.class);\r\n\t\t} catch (JsonMappingException e) {\r\n\t\t\tSystem.out.println(e.getMessage());\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (JsonProcessingException e) {\r\n\t\t\tSystem.out.println(e.getMessage());\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n```\r\nThe deserializer works in all three cases; I only mentioned first case in my initial question. I have a mix of data types-- a Data type object and String type object, but if the response is all String I still also getting List of String in the ApiResponse data field which converted to List&lt;E&gt; object. What I understood is that the deserializer is creating a generic List object and assigning it to List&lt;Data&gt;. I could not  create field under Data class to hold string value when Deserializer is within this condition.\r\n```if(JsonToken.VALUE_STRING.equals(p.currentToken()))```\r\n  [1]: https://dzone.com/articles/consuming-variable-responses-in-jackson","title":"Variable api JSON responses to bind to Java Object using Jackson","body":"<p>My target was to use Jackson api, and @Raymond approach is using another library. I found custom deserialization appro[ach here][1]\nI used the <code>SingleAwareListDeserializer</code> from the article and updated it to the following. In my case the deserializer in case of String response it is just pushing the String to the list.</p>\n<pre><code>  if (JsonToken.START_ARRAY.equals(token)) {\n            while (p.nextToken() != null) {\n                if (JsonToken.START_OBJECT.equals(p.currentToken())) {\n                    list.add(deserializeObject(p));\n                } else  if (JsonToken.VALUE_STRING.equals(p.currentToken())) {\n                 //added this part in case of string response\n                list.add(p.getValueAsString());\n                } \n            }\n        }\n</code></pre>\n<p>I have the following classes to map the response.</p>\n<pre><code>public class Data {\n\n    private Data() {\n        \n    }\n\n    private String errorCode;\n    private String errorMessage;\n    private String errorData;\n    \n    public String getErrorCode() {\n        return errorCode;\n    }\n    public void setErrorCode(String errorCode) {\n        this.errorCode = errorCode;\n    }\n    public String getErrorMessage() {\n        return errorMessage;\n    }\n    public void setErrorMessage(String errorMessage) {\n        this.errorMessage = errorMessage;\n    }\n    public String getErrorData() {\n        return errorData;\n    }\n    public void setErrorData(String errorData) {\n        this.errorData = errorData;\n    }\n\n    \n    \n}\n</code></pre>\n<p>Below ApiResponse</p>\n<pre><code>public class ApiResponse {\n\n    int errorCount;\n    int[] errorIndices;\n    \n    @JsonDeserialize(using = SingleAwareListDeserializer.class)\n    List&lt;Data&gt; data;\n    \n    public int getErrorCount() {\n        return errorCount;\n    }\n    public void setErrorCount(int errorCount) {\n        this.errorCount = errorCount;\n    }\n    public int[] getErrorIndices() {\n        return errorIndices;\n    }\n    public void setErrorIndices(int[] errorIndices) {\n        this.errorIndices = errorIndices;\n    }\n\n    public List&lt;Data&gt; getData() {\n        return data;\n    }\n    public void setData(List&lt;Data&gt; data) {\n        this.data = data;\n    }\n    \n}\n</code></pre>\n<p>For testing I used the following,</p>\n<pre><code>public void deserializeTest() {\n       //case response has a generic List with Data object type and string //value mix\n        String objStringWithError = &quot;\\n&quot;\n                + &quot;{\\n&quot;\n                + &quot;    \\&quot;errorCount\\&quot;: 2,\\n&quot;\n                + &quot;    \\&quot;errorIndices\\&quot;: [\\n&quot;\n                + &quot;        0,\\n&quot;\n                + &quot;        1\\n&quot;\n                + &quot;    ],\\n&quot;\n                + &quot;    \\&quot;data\\&quot;: [\\n&quot;\n                + &quot;        \\&quot;try now\\&quot;,\\n&quot;\n                + &quot;        {\\n&quot;\n                + &quot;            \\&quot;errorCode\\&quot;: 901,\\n&quot;\n                + &quot;            \\&quot;errorMessage\\&quot;: \\&quot;IBad data: Check the data\\&quot;,\\n&quot;\n                + &quot;            \\&quot;errorData\\&quot;: \\&quot;xxxx\\&quot;\\n&quot;\n                + &quot;        },\\n&quot;\n                + &quot;        {\\n&quot;\n                + &quot;            \\&quot;errorCode\\&quot;: 901,\\n&quot;\n                + &quot;            \\&quot;errorMessage\\&quot;: \\&quot;IBad data: Check the data\\&quot;,\\n&quot;\n                + &quot;            \\&quot;errorData\\&quot;: \\&quot;XZY\\&quot;\\n&quot;\n                + &quot;        },\\n&quot;\n                + &quot;        \\&quot;fun now\\&quot;\\n&quot;\n                + &quot;    ]\\n&quot;\n                + &quot;}&quot;;\n//case response have errorcount, errorIndices fields and array of Strings\n        String objStringWithNoError = &quot;{\\&quot;errorCount\\&quot;: 0,\\n&quot;\n                + &quot;\\&quot;errorIndices\\&quot;: [],\\n&quot;\n                + &quot;\\&quot;data\\&quot;: [\\n&quot;\n                + &quot;    \\&quot;fun now\\&quot;,\\n&quot;\n                + &quot;    \\&quot;try later\\&quot;\\n&quot;\n                + &quot;]}&quot;;\n//case response is only array of strings\n        String stringArray = &quot;{\\n&quot;\n                + &quot;\\&quot;data\\&quot;: [\\n&quot;\n                + &quot;    \\&quot;fun now\\&quot;,\\n&quot;\n                + &quot;    \\&quot;try later\\&quot;\\n&quot;\n                + &quot;]}&quot;;\n\n        ObjectMapper mapper = new ObjectMapper();\n        ApiResponse model = null;\n        try {\n            model = mapper.readValue(objStringWithError, ApiResponse.class);\n        } catch (JsonMappingException e) {\n            System.out.println(e.getMessage());\n            e.printStackTrace();\n        } catch (JsonProcessingException e) {\n            System.out.println(e.getMessage());\n            e.printStackTrace();\n        }\n</code></pre>\n<p>The deserializer works in all three cases; I only mentioned first case in my initial question. I have a mix of data types-- a Data type object and String type object, but if the response is all String I still also getting List of String in the ApiResponse data field which converted to List object. What I understood is that the deserializer is creating a generic List object and assigning it to List. I could not  create field under Data class to hold string value when Deserializer is within this condition.\n<code>if(JsonToken.VALUE_STRING.equals(p.currentToken()))</code>\n[1]: <a href=\"https://dzone.com/articles/consuming-variable-responses-in-jackson\" rel=\"nofollow noreferrer\">https://dzone.com/articles/consuming-variable-responses-in-jackson</a></p>\n"}],"owner":{"account_id":2254847,"reputation":249,"user_id":1986244,"accept_rate":15,"display_name":"user1986244"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660976133,"creation_date":1660799700,"question_id":73397763,"body_markdown":"Currently, I am calling third party api which can give the following two variable responses.\r\nI am working in springboot and using Jackson for transformation of REST responses to Java object.\r\nThe two variables responses are the following\\\r\n**error, and success data response combined**\r\n```\r\n{\r\n    &quot;errorCount&quot;: 2,\r\n    &quot;errorIndices&quot;: [\r\n        0,\r\n        1\r\n    ],\r\n    &quot;data&quot;: [\r\n        {\r\n            &quot;errorCode&quot;: 901,\r\n            &quot;errorMessage&quot;: &quot;IBad data: Check the data&quot;,\r\n            &quot;errorData&quot;: &quot;xxxx&quot;\r\n        },\r\n        {\r\n            &quot;errorCode&quot;: 901,\r\n            &quot;errorMessage&quot;: &quot;IBad data: Check the data&quot;,\r\n            &quot;errorData&quot;: &quot;XZY&quot;\r\n        },\r\n        &quot;fun now&quot;\r\n    ]\r\n}\r\n```\r\n**In case of all success**\r\n```\r\n&quot;{&quot;errorCount&quot;: 0,\r\n&quot;errorIndices&quot;: [],\r\n&quot;data&quot;: [\r\n    &quot;fun now&quot;,\r\n    &quot;try later&quot;\r\n]\r\n}\r\n```\r\nThe below class I created works for all success scenario, \r\n```\r\npublic class ApiResponse {\r\n @JsonProperty\r\n private int errorCount;\r\n  @JsonProperty\r\n private int[] errorIndices;\r\n  @JsonProperty\r\n private String[] data;\r\n\r\n......\r\n\r\n}\r\n```\r\nbut I am unable to convert the first scenario where error and success results are combined. \r\nIs it possible to create java object that can combined the two scenarios using Jackson api? I need some direction on how to achieve that. ","title":"Variable api JSON responses to bind to Java Object using Jackson","body":"<p>Currently, I am calling third party api which can give the following two variable responses.\nI am working in springboot and using Jackson for transformation of REST responses to Java object.\nThe two variables responses are the following<br />\n<strong>error, and success data response combined</strong></p>\n<pre><code>{\n    &quot;errorCount&quot;: 2,\n    &quot;errorIndices&quot;: [\n        0,\n        1\n    ],\n    &quot;data&quot;: [\n        {\n            &quot;errorCode&quot;: 901,\n            &quot;errorMessage&quot;: &quot;IBad data: Check the data&quot;,\n            &quot;errorData&quot;: &quot;xxxx&quot;\n        },\n        {\n            &quot;errorCode&quot;: 901,\n            &quot;errorMessage&quot;: &quot;IBad data: Check the data&quot;,\n            &quot;errorData&quot;: &quot;XZY&quot;\n        },\n        &quot;fun now&quot;\n    ]\n}\n</code></pre>\n<p><strong>In case of all success</strong></p>\n<pre><code>&quot;{&quot;errorCount&quot;: 0,\n&quot;errorIndices&quot;: [],\n&quot;data&quot;: [\n    &quot;fun now&quot;,\n    &quot;try later&quot;\n]\n}\n</code></pre>\n<p>The below class I created works for all success scenario,</p>\n<pre><code>public class ApiResponse {\n @JsonProperty\n private int errorCount;\n  @JsonProperty\n private int[] errorIndices;\n  @JsonProperty\n private String[] data;\n\n......\n\n}\n</code></pre>\n<p>but I am unable to convert the first scenario where error and success results are combined.\nIs it possible to create java object that can combined the two scenarios using Jackson api? I need some direction on how to achieve that.</p>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660975885,"creation_date":1660628794,"answer_id":73369270,"question_id":73362526,"body_markdown":"It is complicated to handle dynamic contents by defining many Classes. I suggest to transform the JSON directly using JSON query library. For example, use *Josson*.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n**Deserialization**\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;success\\&quot;: 1,&quot; +\r\n        &quot;    \\&quot;results\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;            \\&quot;FI\\&quot;: \\&quot;120986750\\&quot;,&quot; +\r\n        &quot;            \\&quot;event_id\\&quot;: \\&quot;5164306\\&quot;,&quot; +\r\n        &quot;            \\&quot;cards\\&quot;: {&quot; +\r\n        &quot;                \\&quot;updated_at\\&quot;: \\&quot;1660559432\\&quot;,&quot; +\r\n        &quot;                \\&quot;key\\&quot;: \\&quot;AAA100\\&quot;,&quot; +\r\n        &quot;                \\&quot;sp\\&quot;: {&quot; +\r\n        &quot;                    \\&quot;cards\\&quot;: {&quot; +\r\n        &quot;                        \\&quot;id\\&quot;: \\&quot;1\\&quot;,&quot; +\r\n        &quot;                        \\&quot;name\\&quot;: \\&quot;Cards\\&quot;,&quot; +\r\n        &quot;                        \\&quot;odds\\&quot;: [&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;101\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;2.200\\&quot;,&quot; +\r\n        &quot;                                \\&quot;header\\&quot;: \\&quot;Over\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;11\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;102\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;8.500\\&quot;,&quot; +\r\n        &quot;                                \\&quot;header\\&quot;: \\&quot;Exactly\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;11\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;103\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;1.909\\&quot;,&quot; +\r\n        &quot;                                \\&quot;header\\&quot;: \\&quot;Under\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;11\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        ]&quot; +\r\n        &quot;                    }&quot; +\r\n        &quot;                }&quot; +\r\n        &quot;            },&quot; +\r\n        &quot;            \\&quot;corners\\&quot;: {&quot; +\r\n        &quot;                \\&quot;updated_at\\&quot;: \\&quot;1660559431\\&quot;,&quot; +\r\n        &quot;                \\&quot;key\\&quot;: \\&quot;AAA200\\&quot;,&quot; +\r\n        &quot;                \\&quot;sp\\&quot;: {&quot; +\r\n        &quot;                    \\&quot;corners\\&quot;: {&quot; +\r\n        &quot;                        \\&quot;id\\&quot;: \\&quot;2\\&quot;,&quot; +\r\n        &quot;                        \\&quot;name\\&quot;: \\&quot;Corners\\&quot;,&quot; +\r\n        &quot;                        \\&quot;odds\\&quot;: [&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;201\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;2.200\\&quot;,&quot; +\r\n        &quot;                                \\&quot;header\\&quot;: \\&quot;Over\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;10\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;202\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;8.500\\&quot;,&quot; +\r\n        &quot;                                \\&quot;header\\&quot;: \\&quot;Exactly\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;10\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;203\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;1.909\\&quot;,&quot; +\r\n        &quot;                                \\&quot;header\\&quot;: \\&quot;Under\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;10\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        ]&quot; +\r\n        &quot;                    },&quot; +\r\n        &quot;                    \\&quot;total_corners\\&quot;: {&quot; +\r\n        &quot;                        \\&quot;id\\&quot;: \\&quot;3\\&quot;,&quot; +\r\n        &quot;                        \\&quot;name\\&quot;: \\&quot;Total Corners\\&quot;,&quot; +\r\n        &quot;                        \\&quot;odds\\&quot;: [&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;204\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;17.000\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;Under 6\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;205\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;4.333\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;6 - 8\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;206\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;2.750\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;9 - 11\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;207\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;3.400\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;12 - 14\\&quot;&quot; +\r\n        &quot;                            },&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;id\\&quot;: \\&quot;208\\&quot;,&quot; +\r\n        &quot;                                \\&quot;odds\\&quot;: \\&quot;5.500\\&quot;,&quot; +\r\n        &quot;                                \\&quot;name\\&quot;: \\&quot;Over 14\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        ]&quot; +\r\n        &quot;                    }&quot; +\r\n        &quot;                }&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    ]&quot; +\r\n        &quot;}&quot;);\r\n\r\n**Transformation**\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;results.map(&quot; +\r\n        &quot;    FI,&quot; +\r\n        &quot;    event_id,&quot; +\r\n        &quot;    categories: entries().[value.isObject()]*&quot; +\r\n        &quot;        .map(category: key,&quot; +\r\n        &quot;             value.updated_at,&quot; +\r\n        &quot;             value.key,&quot; +\r\n        &quot;             details: value.sp.**&quot; +\r\n        &quot;                 .map(market_id: id,&quot; +\r\n        &quot;                      market: name,&quot; +\r\n        &quot;                      odds)&quot; +\r\n        &quot;                 .unwind(odds)&quot; +\r\n        &quot;        ).unwind(details)&quot; +\r\n        &quot;).unwind(categories)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n**Output**\r\n\r\n    [ {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;cards&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559432&quot;,\r\n      &quot;key&quot; : &quot;AAA100&quot;,\r\n      &quot;market_id&quot; : &quot;1&quot;,\r\n      &quot;market&quot; : &quot;Cards&quot;,\r\n      &quot;id&quot; : &quot;101&quot;,\r\n      &quot;odds&quot; : &quot;2.200&quot;,\r\n      &quot;header&quot; : &quot;Over&quot;,\r\n      &quot;name&quot; : &quot;11&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;cards&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559432&quot;,\r\n      &quot;key&quot; : &quot;AAA100&quot;,\r\n      &quot;market_id&quot; : &quot;1&quot;,\r\n      &quot;market&quot; : &quot;Cards&quot;,\r\n      &quot;id&quot; : &quot;102&quot;,\r\n      &quot;odds&quot; : &quot;8.500&quot;,\r\n      &quot;header&quot; : &quot;Exactly&quot;,\r\n      &quot;name&quot; : &quot;11&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;cards&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559432&quot;,\r\n      &quot;key&quot; : &quot;AAA100&quot;,\r\n      &quot;market_id&quot; : &quot;1&quot;,\r\n      &quot;market&quot; : &quot;Cards&quot;,\r\n      &quot;id&quot; : &quot;103&quot;,\r\n      &quot;odds&quot; : &quot;1.909&quot;,\r\n      &quot;header&quot; : &quot;Under&quot;,\r\n      &quot;name&quot; : &quot;11&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;corners&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559431&quot;,\r\n      &quot;key&quot; : &quot;AAA200&quot;,\r\n      &quot;market_id&quot; : &quot;2&quot;,\r\n      &quot;market&quot; : &quot;Corners&quot;,\r\n      &quot;id&quot; : &quot;201&quot;,\r\n      &quot;odds&quot; : &quot;2.200&quot;,\r\n      &quot;header&quot; : &quot;Over&quot;,\r\n      &quot;name&quot; : &quot;10&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;corners&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559431&quot;,\r\n      &quot;key&quot; : &quot;AAA200&quot;,\r\n      &quot;market_id&quot; : &quot;2&quot;,\r\n      &quot;market&quot; : &quot;Corners&quot;,\r\n      &quot;id&quot; : &quot;202&quot;,\r\n      &quot;odds&quot; : &quot;8.500&quot;,\r\n      &quot;header&quot; : &quot;Exactly&quot;,\r\n      &quot;name&quot; : &quot;10&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;corners&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559431&quot;,\r\n      &quot;key&quot; : &quot;AAA200&quot;,\r\n      &quot;market_id&quot; : &quot;2&quot;,\r\n      &quot;market&quot; : &quot;Corners&quot;,\r\n      &quot;id&quot; : &quot;203&quot;,\r\n      &quot;odds&quot; : &quot;1.909&quot;,\r\n      &quot;header&quot; : &quot;Under&quot;,\r\n      &quot;name&quot; : &quot;10&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;corners&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559431&quot;,\r\n      &quot;key&quot; : &quot;AAA200&quot;,\r\n      &quot;market_id&quot; : &quot;3&quot;,\r\n      &quot;market&quot; : &quot;Total Corners&quot;,\r\n      &quot;id&quot; : &quot;204&quot;,\r\n      &quot;odds&quot; : &quot;17.000&quot;,\r\n      &quot;name&quot; : &quot;Under 6&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;corners&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559431&quot;,\r\n      &quot;key&quot; : &quot;AAA200&quot;,\r\n      &quot;market_id&quot; : &quot;3&quot;,\r\n      &quot;market&quot; : &quot;Total Corners&quot;,\r\n      &quot;id&quot; : &quot;205&quot;,\r\n      &quot;odds&quot; : &quot;4.333&quot;,\r\n      &quot;name&quot; : &quot;6 - 8&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;corners&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559431&quot;,\r\n      &quot;key&quot; : &quot;AAA200&quot;,\r\n      &quot;market_id&quot; : &quot;3&quot;,\r\n      &quot;market&quot; : &quot;Total Corners&quot;,\r\n      &quot;id&quot; : &quot;206&quot;,\r\n      &quot;odds&quot; : &quot;2.750&quot;,\r\n      &quot;name&quot; : &quot;9 - 11&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;corners&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559431&quot;,\r\n      &quot;key&quot; : &quot;AAA200&quot;,\r\n      &quot;market_id&quot; : &quot;3&quot;,\r\n      &quot;market&quot; : &quot;Total Corners&quot;,\r\n      &quot;id&quot; : &quot;207&quot;,\r\n      &quot;odds&quot; : &quot;3.400&quot;,\r\n      &quot;name&quot; : &quot;12 - 14&quot;\r\n    }, {\r\n      &quot;FI&quot; : &quot;120986750&quot;,\r\n      &quot;event_id&quot; : &quot;5164306&quot;,\r\n      &quot;category&quot; : &quot;corners&quot;,\r\n      &quot;updated_at&quot; : &quot;1660559431&quot;,\r\n      &quot;key&quot; : &quot;AAA200&quot;,\r\n      &quot;market_id&quot; : &quot;3&quot;,\r\n      &quot;market&quot; : &quot;Total Corners&quot;,\r\n      &quot;id&quot; : &quot;208&quot;,\r\n      &quot;odds&quot; : &quot;5.500&quot;,\r\n      &quot;name&quot; : &quot;Over 14&quot;\r\n    } ]","title":"Parse JSON to Java object with dynamics objects in JSON-response","body":"<p>It is complicated to handle dynamic contents by defining many Classes. I suggest to transform the JSON directly using JSON query library. For example, use <em>Josson</em>.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Deserialization</strong></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;success\\&quot;: 1,&quot; +\n    &quot;    \\&quot;results\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;            \\&quot;FI\\&quot;: \\&quot;120986750\\&quot;,&quot; +\n    &quot;            \\&quot;event_id\\&quot;: \\&quot;5164306\\&quot;,&quot; +\n    &quot;            \\&quot;cards\\&quot;: {&quot; +\n    &quot;                \\&quot;updated_at\\&quot;: \\&quot;1660559432\\&quot;,&quot; +\n    &quot;                \\&quot;key\\&quot;: \\&quot;AAA100\\&quot;,&quot; +\n    &quot;                \\&quot;sp\\&quot;: {&quot; +\n    &quot;                    \\&quot;cards\\&quot;: {&quot; +\n    &quot;                        \\&quot;id\\&quot;: \\&quot;1\\&quot;,&quot; +\n    &quot;                        \\&quot;name\\&quot;: \\&quot;Cards\\&quot;,&quot; +\n    &quot;                        \\&quot;odds\\&quot;: [&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;101\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;2.200\\&quot;,&quot; +\n    &quot;                                \\&quot;header\\&quot;: \\&quot;Over\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;11\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;102\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;8.500\\&quot;,&quot; +\n    &quot;                                \\&quot;header\\&quot;: \\&quot;Exactly\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;11\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;103\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;1.909\\&quot;,&quot; +\n    &quot;                                \\&quot;header\\&quot;: \\&quot;Under\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;11\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        ]&quot; +\n    &quot;                    }&quot; +\n    &quot;                }&quot; +\n    &quot;            },&quot; +\n    &quot;            \\&quot;corners\\&quot;: {&quot; +\n    &quot;                \\&quot;updated_at\\&quot;: \\&quot;1660559431\\&quot;,&quot; +\n    &quot;                \\&quot;key\\&quot;: \\&quot;AAA200\\&quot;,&quot; +\n    &quot;                \\&quot;sp\\&quot;: {&quot; +\n    &quot;                    \\&quot;corners\\&quot;: {&quot; +\n    &quot;                        \\&quot;id\\&quot;: \\&quot;2\\&quot;,&quot; +\n    &quot;                        \\&quot;name\\&quot;: \\&quot;Corners\\&quot;,&quot; +\n    &quot;                        \\&quot;odds\\&quot;: [&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;201\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;2.200\\&quot;,&quot; +\n    &quot;                                \\&quot;header\\&quot;: \\&quot;Over\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;10\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;202\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;8.500\\&quot;,&quot; +\n    &quot;                                \\&quot;header\\&quot;: \\&quot;Exactly\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;10\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;203\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;1.909\\&quot;,&quot; +\n    &quot;                                \\&quot;header\\&quot;: \\&quot;Under\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;10\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        ]&quot; +\n    &quot;                    },&quot; +\n    &quot;                    \\&quot;total_corners\\&quot;: {&quot; +\n    &quot;                        \\&quot;id\\&quot;: \\&quot;3\\&quot;,&quot; +\n    &quot;                        \\&quot;name\\&quot;: \\&quot;Total Corners\\&quot;,&quot; +\n    &quot;                        \\&quot;odds\\&quot;: [&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;204\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;17.000\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;Under 6\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;205\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;4.333\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;6 - 8\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;206\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;2.750\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;9 - 11\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;207\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;3.400\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;12 - 14\\&quot;&quot; +\n    &quot;                            },&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;id\\&quot;: \\&quot;208\\&quot;,&quot; +\n    &quot;                                \\&quot;odds\\&quot;: \\&quot;5.500\\&quot;,&quot; +\n    &quot;                                \\&quot;name\\&quot;: \\&quot;Over 14\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        ]&quot; +\n    &quot;                    }&quot; +\n    &quot;                }&quot; +\n    &quot;            }&quot; +\n    &quot;        }&quot; +\n    &quot;    ]&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><strong>Transformation</strong></p>\n<pre><code>JsonNode node = josson.getNode(\n    &quot;results.map(&quot; +\n    &quot;    FI,&quot; +\n    &quot;    event_id,&quot; +\n    &quot;    categories: entries().[value.isObject()]*&quot; +\n    &quot;        .map(category: key,&quot; +\n    &quot;             value.updated_at,&quot; +\n    &quot;             value.key,&quot; +\n    &quot;             details: value.sp.**&quot; +\n    &quot;                 .map(market_id: id,&quot; +\n    &quot;                      market: name,&quot; +\n    &quot;                      odds)&quot; +\n    &quot;                 .unwind(odds)&quot; +\n    &quot;        ).unwind(details)&quot; +\n    &quot;).unwind(categories)&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>[ {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;cards&quot;,\n  &quot;updated_at&quot; : &quot;1660559432&quot;,\n  &quot;key&quot; : &quot;AAA100&quot;,\n  &quot;market_id&quot; : &quot;1&quot;,\n  &quot;market&quot; : &quot;Cards&quot;,\n  &quot;id&quot; : &quot;101&quot;,\n  &quot;odds&quot; : &quot;2.200&quot;,\n  &quot;header&quot; : &quot;Over&quot;,\n  &quot;name&quot; : &quot;11&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;cards&quot;,\n  &quot;updated_at&quot; : &quot;1660559432&quot;,\n  &quot;key&quot; : &quot;AAA100&quot;,\n  &quot;market_id&quot; : &quot;1&quot;,\n  &quot;market&quot; : &quot;Cards&quot;,\n  &quot;id&quot; : &quot;102&quot;,\n  &quot;odds&quot; : &quot;8.500&quot;,\n  &quot;header&quot; : &quot;Exactly&quot;,\n  &quot;name&quot; : &quot;11&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;cards&quot;,\n  &quot;updated_at&quot; : &quot;1660559432&quot;,\n  &quot;key&quot; : &quot;AAA100&quot;,\n  &quot;market_id&quot; : &quot;1&quot;,\n  &quot;market&quot; : &quot;Cards&quot;,\n  &quot;id&quot; : &quot;103&quot;,\n  &quot;odds&quot; : &quot;1.909&quot;,\n  &quot;header&quot; : &quot;Under&quot;,\n  &quot;name&quot; : &quot;11&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;corners&quot;,\n  &quot;updated_at&quot; : &quot;1660559431&quot;,\n  &quot;key&quot; : &quot;AAA200&quot;,\n  &quot;market_id&quot; : &quot;2&quot;,\n  &quot;market&quot; : &quot;Corners&quot;,\n  &quot;id&quot; : &quot;201&quot;,\n  &quot;odds&quot; : &quot;2.200&quot;,\n  &quot;header&quot; : &quot;Over&quot;,\n  &quot;name&quot; : &quot;10&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;corners&quot;,\n  &quot;updated_at&quot; : &quot;1660559431&quot;,\n  &quot;key&quot; : &quot;AAA200&quot;,\n  &quot;market_id&quot; : &quot;2&quot;,\n  &quot;market&quot; : &quot;Corners&quot;,\n  &quot;id&quot; : &quot;202&quot;,\n  &quot;odds&quot; : &quot;8.500&quot;,\n  &quot;header&quot; : &quot;Exactly&quot;,\n  &quot;name&quot; : &quot;10&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;corners&quot;,\n  &quot;updated_at&quot; : &quot;1660559431&quot;,\n  &quot;key&quot; : &quot;AAA200&quot;,\n  &quot;market_id&quot; : &quot;2&quot;,\n  &quot;market&quot; : &quot;Corners&quot;,\n  &quot;id&quot; : &quot;203&quot;,\n  &quot;odds&quot; : &quot;1.909&quot;,\n  &quot;header&quot; : &quot;Under&quot;,\n  &quot;name&quot; : &quot;10&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;corners&quot;,\n  &quot;updated_at&quot; : &quot;1660559431&quot;,\n  &quot;key&quot; : &quot;AAA200&quot;,\n  &quot;market_id&quot; : &quot;3&quot;,\n  &quot;market&quot; : &quot;Total Corners&quot;,\n  &quot;id&quot; : &quot;204&quot;,\n  &quot;odds&quot; : &quot;17.000&quot;,\n  &quot;name&quot; : &quot;Under 6&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;corners&quot;,\n  &quot;updated_at&quot; : &quot;1660559431&quot;,\n  &quot;key&quot; : &quot;AAA200&quot;,\n  &quot;market_id&quot; : &quot;3&quot;,\n  &quot;market&quot; : &quot;Total Corners&quot;,\n  &quot;id&quot; : &quot;205&quot;,\n  &quot;odds&quot; : &quot;4.333&quot;,\n  &quot;name&quot; : &quot;6 - 8&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;corners&quot;,\n  &quot;updated_at&quot; : &quot;1660559431&quot;,\n  &quot;key&quot; : &quot;AAA200&quot;,\n  &quot;market_id&quot; : &quot;3&quot;,\n  &quot;market&quot; : &quot;Total Corners&quot;,\n  &quot;id&quot; : &quot;206&quot;,\n  &quot;odds&quot; : &quot;2.750&quot;,\n  &quot;name&quot; : &quot;9 - 11&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;corners&quot;,\n  &quot;updated_at&quot; : &quot;1660559431&quot;,\n  &quot;key&quot; : &quot;AAA200&quot;,\n  &quot;market_id&quot; : &quot;3&quot;,\n  &quot;market&quot; : &quot;Total Corners&quot;,\n  &quot;id&quot; : &quot;207&quot;,\n  &quot;odds&quot; : &quot;3.400&quot;,\n  &quot;name&quot; : &quot;12 - 14&quot;\n}, {\n  &quot;FI&quot; : &quot;120986750&quot;,\n  &quot;event_id&quot; : &quot;5164306&quot;,\n  &quot;category&quot; : &quot;corners&quot;,\n  &quot;updated_at&quot; : &quot;1660559431&quot;,\n  &quot;key&quot; : &quot;AAA200&quot;,\n  &quot;market_id&quot; : &quot;3&quot;,\n  &quot;market&quot; : &quot;Total Corners&quot;,\n  &quot;id&quot; : &quot;208&quot;,\n  &quot;odds&quot; : &quot;5.500&quot;,\n  &quot;name&quot; : &quot;Over 14&quot;\n} ]\n</code></pre>\n"}],"owner":{"account_id":10030252,"reputation":11,"user_id":19767912,"display_name":"user982455"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73369270,"answer_count":1,"score":1,"last_activity_date":1660975885,"creation_date":1660574303,"question_id":73362526,"body_markdown":"I am trying to parse a JSON-response to a Java object and then I want to save it to a Postgresql.\r\n\r\nI have the following json-response:\r\n\r\n    {\r\n    \t&quot;success&quot;: 1,\r\n    \t&quot;results&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;FI&quot;: &quot;120986750&quot;,\r\n    \t\t\t&quot;event_id&quot;: &quot;5164306&quot;,\r\n    \t\t\t&quot;cards&quot;: {\r\n    \t\t\t\t&quot;updated_at&quot;: &quot;1660559432&quot;,\r\n    \t\t\t\t&quot;key&quot;: &quot;AAA100&quot;,\r\n    \t\t\t\t&quot;sp&quot;: {\r\n    \t\t\t\t\t&quot;cards&quot;: {\r\n    \t\t\t\t\t\t&quot;id&quot;: &quot;1&quot;,\r\n    \t\t\t\t\t\t&quot;name&quot;: &quot;Cards&quot;,\r\n    \t\t\t\t\t\t&quot;odds&quot;: [\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t&quot;id&quot;: &quot;101&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;2.200&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;header&quot;: &quot;Over&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;name&quot;: &quot;11&quot;\r\n    \t\t\t\t\t\t\t},\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t&quot;id&quot;: &quot;102&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;8.500&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;header&quot;: &quot;Exactly&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;name&quot;: &quot;11&quot;\r\n    \t\t\t\t\t\t\t},\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t&quot;id&quot;: &quot;103&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;1.909&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;header&quot;: &quot;Under&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;name&quot;: &quot;11&quot;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t]\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\t&quot;corners&quot;: {\r\n    \t\t\t\t&quot;updated_at&quot;: &quot;1660559431&quot;,\r\n    \t\t\t\t&quot;key&quot;: &quot;AAA200&quot;,\r\n    \t\t\t\t&quot;sp&quot;: {\r\n    \t\t\t\t\t&quot;corners&quot;: {\r\n    \t\t\t\t\t\t&quot;id&quot;: &quot;2&quot;,\r\n    \t\t\t\t\t\t&quot;name&quot;: &quot;Corners&quot;,\r\n    \t\t\t\t\t\t&quot;odds&quot;: [\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t&quot;id&quot;: &quot;201&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;2.200&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;header&quot;: &quot;Over&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;name&quot;: &quot;10&quot;\r\n    \t\t\t\t\t\t\t},\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t&quot;id&quot;: &quot;202&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;8.500&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;header&quot;: &quot;Exactly&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;name&quot;: &quot;10&quot;\r\n    \t\t\t\t\t\t\t},\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t&quot;id&quot;: &quot;203&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;1.909&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;header&quot;: &quot;Under&quot;,\r\n    \t\t\t\t\t\t\t\t&quot;name&quot;: &quot;10&quot;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t]\r\n    \t\t\t\t\t},\r\n\t\t\t\t\t\t&quot;total_corners&quot;: {\r\n\t\t\t\t\t\t\t&quot;id&quot;: &quot;3&quot;,\r\n\t\t\t\t\t\t\t&quot;name&quot;: &quot;Total Corners&quot;,\r\n\t\t\t\t\t\t\t&quot;odds&quot;: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t&quot;id&quot;: &quot;204&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;17.000&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;name&quot;: &quot;Under 6&quot;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t&quot;id&quot;: &quot;205&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;4.333&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;name&quot;: &quot;6 - 8&quot;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t&quot;id&quot;: &quot;206&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;2.750&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;name&quot;: &quot;9 - 11&quot;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t&quot;id&quot;: &quot;207&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;3.400&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;name&quot;: &quot;12 - 14&quot;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t&quot;id&quot;: &quot;208&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;odds&quot;: &quot;5.500&quot;,\r\n\t\t\t\t\t\t\t\t\t&quot;name&quot;: &quot;Over 14&quot;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t]\r\n    }\r\n\r\nI started to create a class like this:\r\n\r\n    public class PreMatchOdds {\r\n    \r\n    \t@JsonProperty(&quot;success&quot;)\r\n    \tprivate Integer success;\r\n    \t@JsonProperty(&quot;results&quot;)\r\n    \tprivate List&lt;Result&gt; results = null;\r\n    \t@JsonIgnore\r\n    \tprivate Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\r\n    \tprivate final static long serialVersionUID = -8631993296159893856L;\r\n    \r\n    getter and setters..\r\n\r\nThen instead of\r\n\r\n    \t@JsonProperty(&quot;cards&quot;)\r\n    \tprivate Cards cards;\r\n    \r\n    and\r\n    \r\n    \t@JsonProperty(&quot;corners&quot;)\r\n    \tprivate Corners corners;\r\n\r\nI tried with:\r\n\r\n    @JsonProperty(&quot;categories&quot;)\r\n    @JsonAlias({&quot;cards&quot;, &quot;corners&quot;})\r\n    private Categories categories;\r\n\r\nin the Result class\r\n\r\n    public class Result implements Serializable {\r\n    \r\n    \t@JsonProperty(&quot;FI&quot;)\r\n    \tprivate String fi;\r\n    \t@JsonProperty(&quot;event_id&quot;)\r\n    \tprivate String eventId;\r\n    \t\r\n    \t@JsonProperty(&quot;categories&quot;)\r\n    \t@JsonAlias({&quot;cards&quot;, &quot;corners&quot;})\r\n    \tprivate Categories categories;\r\n    \r\n    \t@JsonIgnore\r\n    \tprivate Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\r\n    \tprivate final static long serialVersionUID = -683759794150688410L;\r\n\r\nHow is the proper way to do this or do I have to create a class for each cards and corners object? This is just an example but in my real case I have like 20 of this objects.\r\nI would also like to set the object key name to a variable since I want to map it against a field in the database.\r\n\r\nI have tried and googled but not found what I am looking for or not really understood.\r\nIn the end I would like to save it to a table in a database like this:\r\n\r\n|FI\t|event_id\t|category\t|updated_at\t|key\t|market_id\t|market\t|odds_id\t|odds\t|header\t|handicap\t|name|\r\n|-------|-------|-------|-------|-------|-------|-------|-------|-------|-------|-------|------|\r\n|FI value \t|event_id |value\t|&quot;cards&quot;\t|updated_at\t|AAA100\t|cards.id\t|cards.name\t|odds.id\t|odds.odds\t|odds.header\t|odds.handicap\t|odds.name|\r\n||||\t\t&quot;corners&quot;\t\t|AAA200\t|corners.id\t|corners.name\t|odds.id\t|odds.odds\t|odds.header\t|odds.handicap\t|odds.name|\r\n|Example|||||||||\t\t\t\t\t\t\t\t\t\t\t\r\n|120986750\t|5164306\t|cards\t|1660559432\t|AAA100\t|1\t|Cards\t|101\t|2.2\t|Over\t\t||11|\r\n|120986750\t|5164306\t|cards\t|1660559432\t|AAA100\t|1\t|Cards\t|102\t|8.5\t|Exatly\t\t||11|\r\n|120986750\t|5164306\t|cards\t|1660559432\t|AAA100\t|1\t|Cards\t|103\t|1.909\t|Under\t\t||11|\r\n|120986750\t|5164306\t|corners\t|1660559431\t|AAA200\t|2\t|Corners\t|201\t|2.2\t|Over\t\t||10|\r\n|120986750\t|5164306\t|corners\t|1660559431\t|AAA200\t|2\t|Corners\t|202\t|8.5\t|Exatly\t\t||10|\r\n|120986750\t|5164306\t|corners\t|1660559431\t|AAA200\t|2\t|Corners\t|203\t|1.909\t|Under\t\t||10|","title":"Parse JSON to Java object with dynamics objects in JSON-response","body":"<p>I am trying to parse a JSON-response to a Java object and then I want to save it to a Postgresql.</p>\n<p>I have the following json-response:</p>\n<pre><code>{\n    &quot;success&quot;: 1,\n    &quot;results&quot;: [\n        {\n            &quot;FI&quot;: &quot;120986750&quot;,\n            &quot;event_id&quot;: &quot;5164306&quot;,\n            &quot;cards&quot;: {\n                &quot;updated_at&quot;: &quot;1660559432&quot;,\n                &quot;key&quot;: &quot;AAA100&quot;,\n                &quot;sp&quot;: {\n                    &quot;cards&quot;: {\n                        &quot;id&quot;: &quot;1&quot;,\n                        &quot;name&quot;: &quot;Cards&quot;,\n                        &quot;odds&quot;: [\n                            {\n                                &quot;id&quot;: &quot;101&quot;,\n                                &quot;odds&quot;: &quot;2.200&quot;,\n                                &quot;header&quot;: &quot;Over&quot;,\n                                &quot;name&quot;: &quot;11&quot;\n                            },\n                            {\n                                &quot;id&quot;: &quot;102&quot;,\n                                &quot;odds&quot;: &quot;8.500&quot;,\n                                &quot;header&quot;: &quot;Exactly&quot;,\n                                &quot;name&quot;: &quot;11&quot;\n                            },\n                            {\n                                &quot;id&quot;: &quot;103&quot;,\n                                &quot;odds&quot;: &quot;1.909&quot;,\n                                &quot;header&quot;: &quot;Under&quot;,\n                                &quot;name&quot;: &quot;11&quot;\n                            }\n                        ]\n                    }\n                }\n            },\n            &quot;corners&quot;: {\n                &quot;updated_at&quot;: &quot;1660559431&quot;,\n                &quot;key&quot;: &quot;AAA200&quot;,\n                &quot;sp&quot;: {\n                    &quot;corners&quot;: {\n                        &quot;id&quot;: &quot;2&quot;,\n                        &quot;name&quot;: &quot;Corners&quot;,\n                        &quot;odds&quot;: [\n                            {\n                                &quot;id&quot;: &quot;201&quot;,\n                                &quot;odds&quot;: &quot;2.200&quot;,\n                                &quot;header&quot;: &quot;Over&quot;,\n                                &quot;name&quot;: &quot;10&quot;\n                            },\n                            {\n                                &quot;id&quot;: &quot;202&quot;,\n                                &quot;odds&quot;: &quot;8.500&quot;,\n                                &quot;header&quot;: &quot;Exactly&quot;,\n                                &quot;name&quot;: &quot;10&quot;\n                            },\n                            {\n                                &quot;id&quot;: &quot;203&quot;,\n                                &quot;odds&quot;: &quot;1.909&quot;,\n                                &quot;header&quot;: &quot;Under&quot;,\n                                &quot;name&quot;: &quot;10&quot;\n                            }\n                        ]\n                    },\n                    &quot;total_corners&quot;: {\n                        &quot;id&quot;: &quot;3&quot;,\n                        &quot;name&quot;: &quot;Total Corners&quot;,\n                        &quot;odds&quot;: [\n                            {\n                                &quot;id&quot;: &quot;204&quot;,\n                                &quot;odds&quot;: &quot;17.000&quot;,\n                                &quot;name&quot;: &quot;Under 6&quot;\n                            },\n                            {\n                                &quot;id&quot;: &quot;205&quot;,\n                                &quot;odds&quot;: &quot;4.333&quot;,\n                                &quot;name&quot;: &quot;6 - 8&quot;\n                            },\n                            {\n                                &quot;id&quot;: &quot;206&quot;,\n                                &quot;odds&quot;: &quot;2.750&quot;,\n                                &quot;name&quot;: &quot;9 - 11&quot;\n                            },\n                            {\n                                &quot;id&quot;: &quot;207&quot;,\n                                &quot;odds&quot;: &quot;3.400&quot;,\n                                &quot;name&quot;: &quot;12 - 14&quot;\n                            },\n                            {\n                                &quot;id&quot;: &quot;208&quot;,\n                                &quot;odds&quot;: &quot;5.500&quot;,\n                                &quot;name&quot;: &quot;Over 14&quot;\n                            }\n                        ]\n                    }\n                }\n            }\n        }\n    ]\n}\n</code></pre>\n<p>I started to create a class like this:</p>\n<pre><code>public class PreMatchOdds {\n\n    @JsonProperty(&quot;success&quot;)\n    private Integer success;\n    @JsonProperty(&quot;results&quot;)\n    private List&lt;Result&gt; results = null;\n    @JsonIgnore\n    private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\n    private final static long serialVersionUID = -8631993296159893856L;\n\ngetter and setters..\n</code></pre>\n<p>Then instead of</p>\n<pre><code>    @JsonProperty(&quot;cards&quot;)\n    private Cards cards;\n\nand\n\n    @JsonProperty(&quot;corners&quot;)\n    private Corners corners;\n</code></pre>\n<p>I tried with:</p>\n<pre><code>@JsonProperty(&quot;categories&quot;)\n@JsonAlias({&quot;cards&quot;, &quot;corners&quot;})\nprivate Categories categories;\n</code></pre>\n<p>in the Result class</p>\n<pre><code>public class Result implements Serializable {\n\n    @JsonProperty(&quot;FI&quot;)\n    private String fi;\n    @JsonProperty(&quot;event_id&quot;)\n    private String eventId;\n    \n    @JsonProperty(&quot;categories&quot;)\n    @JsonAlias({&quot;cards&quot;, &quot;corners&quot;})\n    private Categories categories;\n\n    @JsonIgnore\n    private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\n    private final static long serialVersionUID = -683759794150688410L;\n</code></pre>\n<p>How is the proper way to do this or do I have to create a class for each cards and corners object? This is just an example but in my real case I have like 20 of this objects.\nI would also like to set the object key name to a variable since I want to map it against a field in the database.</p>\n<p>I have tried and googled but not found what I am looking for or not really understood.\nIn the end I would like to save it to a table in a database like this:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>FI</th>\n<th>event_id</th>\n<th>category</th>\n<th>updated_at</th>\n<th>key</th>\n<th>market_id</th>\n<th>market</th>\n<th>odds_id</th>\n<th>odds</th>\n<th>header</th>\n<th>handicap</th>\n<th>name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>FI value</td>\n<td>event_id</td>\n<td>value</td>\n<td>&quot;cards&quot;</td>\n<td>updated_at</td>\n<td>AAA100</td>\n<td>cards.id</td>\n<td>cards.name</td>\n<td>odds.id</td>\n<td>odds.odds</td>\n<td>odds.header</td>\n<td>odds.handicap</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td>&quot;corners&quot;</td>\n<td>AAA200</td>\n<td>corners.id</td>\n<td>corners.name</td>\n<td>odds.id</td>\n<td>odds.odds</td>\n<td>odds.header</td>\n<td>odds.handicap</td>\n<td>odds.name</td>\n</tr>\n<tr>\n<td>Example</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>120986750</td>\n<td>5164306</td>\n<td>cards</td>\n<td>1660559432</td>\n<td>AAA100</td>\n<td>1</td>\n<td>Cards</td>\n<td>101</td>\n<td>2.2</td>\n<td>Over</td>\n<td></td>\n<td>11</td>\n</tr>\n<tr>\n<td>120986750</td>\n<td>5164306</td>\n<td>cards</td>\n<td>1660559432</td>\n<td>AAA100</td>\n<td>1</td>\n<td>Cards</td>\n<td>102</td>\n<td>8.5</td>\n<td>Exatly</td>\n<td></td>\n<td>11</td>\n</tr>\n<tr>\n<td>120986750</td>\n<td>5164306</td>\n<td>cards</td>\n<td>1660559432</td>\n<td>AAA100</td>\n<td>1</td>\n<td>Cards</td>\n<td>103</td>\n<td>1.909</td>\n<td>Under</td>\n<td></td>\n<td>11</td>\n</tr>\n<tr>\n<td>120986750</td>\n<td>5164306</td>\n<td>corners</td>\n<td>1660559431</td>\n<td>AAA200</td>\n<td>2</td>\n<td>Corners</td>\n<td>201</td>\n<td>2.2</td>\n<td>Over</td>\n<td></td>\n<td>10</td>\n</tr>\n<tr>\n<td>120986750</td>\n<td>5164306</td>\n<td>corners</td>\n<td>1660559431</td>\n<td>AAA200</td>\n<td>2</td>\n<td>Corners</td>\n<td>202</td>\n<td>8.5</td>\n<td>Exatly</td>\n<td></td>\n<td>10</td>\n</tr>\n<tr>\n<td>120986750</td>\n<td>5164306</td>\n<td>corners</td>\n<td>1660559431</td>\n<td>AAA200</td>\n<td>2</td>\n<td>Corners</td>\n<td>203</td>\n<td>1.909</td>\n<td>Under</td>\n<td></td>\n<td>10</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","jvm","manifest","javaagents"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1660952527,"post_id":73423044,"comment_id":129663106,"body_markdown":"For dynamic attach, your class needs an `agentmain`, not a `premain`. It can have both, through. See the section [Starting an Agent After VM Startup](https://docs.oracle.com/en/java/javase/17/docs/api/java.instrument/java/lang/instrument/package-summary.html) from the `java.lang.instrument` description.","body":"For dynamic attach, your class needs an <code>agentmain</code>, not a <code>premain</code>. It can have both, through. See the section <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.instrument/java/lang/instrument/package-summary.html\" rel=\"nofollow noreferrer\">Starting an Agent After VM Startup</a> from the <code>java.lang.instrument</code> description."},{"owner":{"account_id":21892399,"reputation":3,"user_id":16179188,"display_name":"Yan-Jobs"},"score":0,"creation_date":1660973552,"post_id":73423044,"comment_id":129665001,"body_markdown":"@JohannesKuhn I know that but when I attached it on my manifest it throws me this error: Exception in thread &quot;Attach Listener&quot; Agent failed to start!","body":"@JohannesKuhn I know that but when I attached it on my manifest it throws me this error: Exception in thread &quot;Attach Listener&quot; Agent failed to start!"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660975565,"creation_date":1660975565,"answer_id":73424467,"question_id":73423044,"body_markdown":"You added this to your manifest:\r\n\r\n```none\r\nPremain-Class: me.accessmodifier364.dumper.Dumper\r\nAgent-Class: me.accessmodifier364.dumper.Dumper\r\n```\r\n\r\nBut you forgot to add this to your agent:\r\n\r\n```java\r\npublic static void agentmain(String agentArgs, Instrumentation inst) {\r\n    System.out.println(&quot;Hot-attaching Dumper...&quot;);\r\n    premain(agentArgs, inst);\r\n}\r\n```\r\n\r\nHow about reading a full tutorial? You might start with [this one](https://www.baeldung.com/java-instrumentation), based on Javassist. But instead of Javassist, you may also use whichever tool you prefer, such as Byte Buddy, ASM, BCEL. The basic code structure (manifest, agent main class, transformer) is the same  in all cases.","title":"Failed to find Agent-Class manifest attribute","body":"<p>You added this to your manifest:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Premain-Class: me.accessmodifier364.dumper.Dumper\nAgent-Class: me.accessmodifier364.dumper.Dumper\n</code></pre>\n<p>But you forgot to add this to your agent:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void agentmain(String agentArgs, Instrumentation inst) {\n    System.out.println(&quot;Hot-attaching Dumper...&quot;);\n    premain(agentArgs, inst);\n}\n</code></pre>\n<p>How about reading a full tutorial? You might start with <a href=\"https://www.baeldung.com/java-instrumentation\" rel=\"nofollow noreferrer\">this one</a>, based on Javassist. But instead of Javassist, you may also use whichever tool you prefer, such as Byte Buddy, ASM, BCEL. The basic code structure (manifest, agent main class, transformer) is the same  in all cases.</p>\n"}],"owner":{"account_id":21892399,"reputation":3,"user_id":16179188,"display_name":"Yan-Jobs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":666,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73424467,"answer_count":1,"score":0,"last_activity_date":1660975565,"creation_date":1660950608,"question_id":73423044,"body_markdown":"whenever I try to attach an agent to the JVM I get this error: `Failed to find Agent-Class manifest attribute from /Users/yanjobs/Downloads/Dumper-master-2/out/artifacts/Dumper_master_2_jar/Dumper-master-2.jar`. But when I try to add this parameter (Agent-Class) to my `MANIFEST.MF` the JVM throws me this nice error: `Exception in thread &quot;Attach Listener&quot; Agent failed to start!` and IntelliJ says Invalid agent class (screenshot [here][1]). So... What should I do?\r\nI posted the source [here][2]. \r\n\r\nIf someone got the time to help me, that would be nice :)\r\n- Yan\r\n\r\n  [1]: https://i.stack.imgur.com/LpZzN.png\r\n  [2]: https://github.com/Yan-Jobs/soverflow-dumper","title":"Failed to find Agent-Class manifest attribute","body":"<p>whenever I try to attach an agent to the JVM I get this error: <code>Failed to find Agent-Class manifest attribute from /Users/yanjobs/Downloads/Dumper-master-2/out/artifacts/Dumper_master_2_jar/Dumper-master-2.jar</code>. But when I try to add this parameter (Agent-Class) to my <code>MANIFEST.MF</code> the JVM throws me this nice error: <code>Exception in thread &quot;Attach Listener&quot; Agent failed to start!</code> and IntelliJ says Invalid agent class (screenshot <a href=\"https://i.stack.imgur.com/LpZzN.png\" rel=\"nofollow noreferrer\">here</a>). So... What should I do?\nI posted the source <a href=\"https://github.com/Yan-Jobs/soverflow-dumper\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>If someone got the time to help me, that would be nice :)</p>\n<ul>\n<li>Yan</li>\n</ul>\n"},{"tags":["java","mockito"],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660974822,"creation_date":1660974822,"answer_id":73424414,"question_id":73424326,"body_markdown":"Because you don’t create a mock of `EmailManager` \r\nUsually `@InjectMocks` annotation is use on the class that you’re about to test (`EmailManager` in this case)\r\nThis is a real code that you don’t want to mock (there is no point to write a test that tests a mock) - you always want to test the real code and mocks is just an auxiliary tool to “mimic” the behavior of dependencies\r\n\r\nSo in the `EmailManager` the method `createEml` is real - and file creation is just what it does - you’ve posted the source code of it. This code gets executed during the test. That’s it.\r\n\r\nSo if you want to create a test that doesn’t create any real file you should refactor the file creation part in a way that it will support file creation of “virtual” files in memory. After all not any arbitrarily-written pieces of code can are automatically unit-testable, you have to design the code with “unit-test ability” in mind\r\n","title":"Mock files, but generate real files","body":"<p>Because you don’t create a mock of <code>EmailManager</code>\nUsually <code>@InjectMocks</code> annotation is use on the class that you’re about to test (<code>EmailManager</code> in this case)\nThis is a real code that you don’t want to mock (there is no point to write a test that tests a mock) - you always want to test the real code and mocks is just an auxiliary tool to “mimic” the behavior of dependencies</p>\n<p>So in the <code>EmailManager</code> the method <code>createEml</code> is real - and file creation is just what it does - you’ve posted the source code of it. This code gets executed during the test. That’s it.</p>\n<p>So if you want to create a test that doesn’t create any real file you should refactor the file creation part in a way that it will support file creation of “virtual” files in memory. After all not any arbitrarily-written pieces of code can are automatically unit-testable, you have to design the code with “unit-test ability” in mind</p>\n"}],"owner":{"account_id":24806269,"reputation":1,"user_id":18688252,"display_name":"Tan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660974822,"creation_date":1660973623,"question_id":73424326,"body_markdown":"I use the SpringBoot mail component to generate eml files. When I use mockito to simulate, Why would a real file be generated?\r\n\r\n\r\nThis is my demo \r\n\r\n    @Resource\r\n    private JavaMailSender javaMailSender;\r\n\r\n    public File createEml(String filename) throws IOException, MessagingException {\r\n        File file = new File(filename);\r\n        try(FileOutputStream fos = new FileOutputStream(file)) {\r\n            MimeMessage mimeMessage = javaMailSender.createMimeMessage();\r\n            mimeMessage.writeTo(fos);\r\n        }\r\n        return file;\r\n    }\r\n}\r\n\r\ntest\r\n\r\n    @InjectMocks\r\n    private EmailManager emailManager = new EmailManager();\r\n\r\n    @Mock\r\n    private JavaMailSender javaMailSender;\r\n    \r\n\r\n    @BeforeEach\r\n    private void setUp() {\r\n        MockitoAnnotations.openMocks(this);\r\n    }\r\n\r\n    @Test\r\n    void testCreateEml() throws MessagingException, IOException {\r\n        MimeMessage mimeMessage = Mockito.mock(MimeMessage.class);\r\n        Mockito.doNothing().when(mimeMessage).writeTo(Mockito.any(FileOutputStream.class));\r\n        Mockito.when(javaMailSender.createMimeMessage()).thenReturn(mimeMessage);\r\n        emailManager.createEml(&quot;test.eml&quot;);\r\n    }","title":"Mock files, but generate real files","body":"<p>I use the SpringBoot mail component to generate eml files. When I use mockito to simulate, Why would a real file be generated?</p>\n<p>This is my demo</p>\n<pre><code>@Resource\nprivate JavaMailSender javaMailSender;\n\npublic File createEml(String filename) throws IOException, MessagingException {\n    File file = new File(filename);\n    try(FileOutputStream fos = new FileOutputStream(file)) {\n        MimeMessage mimeMessage = javaMailSender.createMimeMessage();\n        mimeMessage.writeTo(fos);\n    }\n    return file;\n}\n</code></pre>\n<p>}</p>\n<p>test</p>\n<pre><code>@InjectMocks\nprivate EmailManager emailManager = new EmailManager();\n\n@Mock\nprivate JavaMailSender javaMailSender;\n\n\n@BeforeEach\nprivate void setUp() {\n    MockitoAnnotations.openMocks(this);\n}\n\n@Test\nvoid testCreateEml() throws MessagingException, IOException {\n    MimeMessage mimeMessage = Mockito.mock(MimeMessage.class);\n    Mockito.doNothing().when(mimeMessage).writeTo(Mockito.any(FileOutputStream.class));\n    Mockito.when(javaMailSender.createMimeMessage()).thenReturn(mimeMessage);\n    emailManager.createEml(&quot;test.eml&quot;);\n}\n</code></pre>\n"},{"tags":["java","variables","methods"],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660974420,"creation_date":1660972676,"answer_id":73424275,"question_id":73424255,"body_markdown":"# Learn to return values, and pass values\r\n\r\n 1.  Capture the return value coming from your `inputString` method.\r\n 2. Pass that returned value to your `countWords` method.\r\n\r\nChange this:\r\n\r\n    inputString();\r\n    countWords();\r\n\r\n… to this:\r\n\r\n    String input = inputString();  // Capture the return value.\r\n    countWords( input );           // Pass the captured value.\r\n\r\nAnd it looks like `count` in `countWords` is supposed to be the result. So that should be returned to the calling method.\r\n\r\n    String input = WordCounter.inputString();\r\n    int count = WordCounter.countWords( input );\r\n\r\nAnd alter your `countWords` to return that value. Change the declared return type from `void` to `int`. Add a `return` line at the end.\r\n\r\n    public static int countWords( String userInput ){\r\n        … \r\n        return count ;  \r\n    }\r\n\r\n----------\r\n\r\n# OOP\r\n\r\nLooking at the bigger picture, try to avoid `static` as a student learning [object-oriented programming][1]. \r\n\r\nCreate multiple classes, where each class has one main responsibility. If we look at your business problem, we have three responsibilities: \r\n\r\n - Business logic: Analyzing text to count words.\r\n - User interface: Interacting with user on the console.\r\n - An app to run the show, with its `main` method.\r\n\r\nYou might start with three classes.\r\n\r\nFirst, the business logic.\r\n\r\n```java\r\npackage work.basil.example.wordcounter;\r\n\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n\r\n// Takes a string, analyzes to determine a count of words, and returns that count.\r\npublic class WordCounter\r\n{\r\n    private CharSequence text;\r\n\r\n    public WordCounter ( final CharSequence input )\r\n    {\r\n        this.text = input;\r\n    }\r\n\r\n    public int wordCount ( )\r\n    {\r\n        return ThreadLocalRandom.current().nextInt( 0 , 10 ); // Fake method. Put your code here.\r\n    }\r\n\r\n    public CharSequence text ( )\r\n    {\r\n        return this.text;\r\n    }\r\n}\r\n```\r\n\r\nThe console input manager.\r\n\r\n```java\r\npackage work.basil.example.wordcounter;\r\n\r\npublic class ConsoleInputGatherer\r\n{\r\n    public String gatherInput ( )\r\n    {\r\n        // Fake method. Write your code here.\r\n        return &quot;your text goes here.&quot;;\r\n    }\r\n}\r\n```\r\n\r\nAnd the main app.\r\n\r\n```java\r\npackage work.basil.example.wordcounter;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App();\r\n        app.demo();\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        String input = new ConsoleInputGatherer().gatherInput();\r\n        int count = new WordCounter( input ).wordCount();\r\n\r\n        // Report results.\r\n        System.out.println( &quot;Input: &quot; );\r\n        System.out.println( input );\r\n        System.out.println( &quot;… has a word count of: &quot; + count );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nInput: \r\nyour text goes here.\r\n… has a word count of: 3\r\n```\r\n\r\n----------\r\n\r\n# Avoid `char`\r\n\r\n\r\nAnd, by the way, the `char` type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, it is physically incapable of representing most characters. Instead, to work with individual characters, use [code point][2] integer numbers. \r\n\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Object-oriented_programming\r\n  [2]: https://en.wikipedia.org/wiki/Code_point","title":"Using a variable taken from a method in an another method","body":"<h1>Learn to return values, and pass values</h1>\n<ol>\n<li>Capture the return value coming from your <code>inputString</code> method.</li>\n<li>Pass that returned value to your <code>countWords</code> method.</li>\n</ol>\n<p>Change this:</p>\n<pre><code>inputString();\ncountWords();\n</code></pre>\n<p>… to this:</p>\n<pre><code>String input = inputString();  // Capture the return value.\ncountWords( input );           // Pass the captured value.\n</code></pre>\n<p>And it looks like <code>count</code> in <code>countWords</code> is supposed to be the result. So that should be returned to the calling method.</p>\n<pre><code>String input = WordCounter.inputString();\nint count = WordCounter.countWords( input );\n</code></pre>\n<p>And alter your <code>countWords</code> to return that value. Change the declared return type from <code>void</code> to <code>int</code>. Add a <code>return</code> line at the end.</p>\n<pre><code>public static int countWords( String userInput ){\n    … \n    return count ;  \n}\n</code></pre>\n<hr />\n<h1>OOP</h1>\n<p>Looking at the bigger picture, try to avoid <code>static</code> as a student learning <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\">object-oriented programming</a>.</p>\n<p>Create multiple classes, where each class has one main responsibility. If we look at your business problem, we have three responsibilities:</p>\n<ul>\n<li>Business logic: Analyzing text to count words.</li>\n<li>User interface: Interacting with user on the console.</li>\n<li>An app to run the show, with its <code>main</code> method.</li>\n</ul>\n<p>You might start with three classes.</p>\n<p>First, the business logic.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.wordcounter;\n\nimport java.util.concurrent.ThreadLocalRandom;\n\n// Takes a string, analyzes to determine a count of words, and returns that count.\npublic class WordCounter\n{\n    private CharSequence text;\n\n    public WordCounter ( final CharSequence input )\n    {\n        this.text = input;\n    }\n\n    public int wordCount ( )\n    {\n        return ThreadLocalRandom.current().nextInt( 0 , 10 ); // Fake method. Put your code here.\n    }\n\n    public CharSequence text ( )\n    {\n        return this.text;\n    }\n}\n</code></pre>\n<p>The console input manager.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.wordcounter;\n\npublic class ConsoleInputGatherer\n{\n    public String gatherInput ( )\n    {\n        // Fake method. Write your code here.\n        return &quot;your text goes here.&quot;;\n    }\n}\n</code></pre>\n<p>And the main app.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.wordcounter;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App();\n        app.demo();\n    }\n\n    private void demo ( )\n    {\n        String input = new ConsoleInputGatherer().gatherInput();\n        int count = new WordCounter( input ).wordCount();\n\n        // Report results.\n        System.out.println( &quot;Input: &quot; );\n        System.out.println( input );\n        System.out.println( &quot;… has a word count of: &quot; + count );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Input: \nyour text goes here.\n… has a word count of: 3\n</code></pre>\n<hr />\n<h1>Avoid <code>char</code></h1>\n<p>And, by the way, the <code>char</code> type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, it is physically incapable of representing most characters. Instead, to work with individual characters, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers.</p>\n"},{"tags":[],"owner":{"account_id":10958740,"reputation":1,"user_id":8052701,"display_name":"Tamilarasu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660973362,"creation_date":1660973362,"answer_id":73424312,"question_id":73424255,"body_markdown":"This way your code should work\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class WordCounter {\r\n\r\n    public static String inputString(){\r\n        Scanner s = new Scanner(System.in);\r\n        System.out.println(&quot;\\nInput your desired sentence/string: &quot;);\r\n        String userInput = s.nextLine();\r\n        return userInput;\r\n    }\r\n\r\n    public static void countWords(int count, String userInput){\r\n\r\n        count = 1;\r\n\r\n        for (int i = 0; i &lt; userInput.length() - 1; i++)\r\n        {\r\n            if ((userInput.charAt(i) == &#39; &#39;) &amp;&amp; (userInput.charAt(i + 1) != &#39; &#39;))\r\n            {\r\n                count++;\r\n            }\r\n        }\r\n        System.out.print(&quot;Number of words in the sentence/string: &quot; + count);\r\n    }\r\n\r\n    public static void main (String [] args){\r\n        System.out.println(&quot;Word Counter.&quot;);\r\n        String input = inputString();\r\n        countWords(0, input);\r\n    }\r\n\r\n}","title":"Using a variable taken from a method in an another method","body":"<p>This way your code should work</p>\n<p>import java.util.Scanner;</p>\n<p>public class WordCounter {</p>\n<pre><code>public static String inputString(){\n    Scanner s = new Scanner(System.in);\n    System.out.println(&quot;\\nInput your desired sentence/string: &quot;);\n    String userInput = s.nextLine();\n    return userInput;\n}\n\npublic static void countWords(int count, String userInput){\n\n    count = 1;\n\n    for (int i = 0; i &lt; userInput.length() - 1; i++)\n    {\n        if ((userInput.charAt(i) == ' ') &amp;&amp; (userInput.charAt(i + 1) != ' '))\n        {\n            count++;\n        }\n    }\n    System.out.print(&quot;Number of words in the sentence/string: &quot; + count);\n}\n\npublic static void main (String [] args){\n    System.out.println(&quot;Word Counter.&quot;);\n    String input = inputString();\n    countWords(0, input);\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":23223906,"reputation":25,"user_id":17315684,"display_name":"Ezikell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73424275,"answer_count":2,"score":0,"last_activity_date":1660974420,"creation_date":1660972316,"question_id":73424255,"body_markdown":"I want to use the variable that is taken from the inputString() method into the countWords() method below, but I unfortunately run into errors when I try using the latter in the main() method. How do I work around this?\r\n\r\n    import java.util.*;\r\n\r\n    public class WordCounter {\r\n        public static String inputString(){\r\n            Scanner s = new Scanner(System.in);\r\n            System.out.println(&quot;\\nInput your desired sentence/string: &quot;);\r\n            String userInput = s.nextLine();\r\n            return userInput;\r\n        }\r\n\r\n        public static void countWords(int count, String userInput){\r\n\r\n            count = 1;\r\n\r\n            for (int i = 0; i &lt; userInput.length() - 1; i++)\r\n            {\r\n                if ((userInput.charAt(i) == &#39; &#39;) &amp;&amp; (userInput.charAt(i + 1) != &#39; &#39;))\r\n                {\r\n                    count++;\r\n                }\r\n            }\r\n            System.out.print(&quot;Number of words in the sentence/string: &quot; + count);    \r\n        }\r\n\r\n        public static void main (String [] args){\r\n            System.out.println(&quot;Word Counter.&quot;);\r\n            inputString();\r\n            countWords();\r\n        }\r\n    }","title":"Using a variable taken from a method in an another method","body":"<p>I want to use the variable that is taken from the inputString() method into the countWords() method below, but I unfortunately run into errors when I try using the latter in the main() method. How do I work around this?</p>\n<pre><code>import java.util.*;\n\npublic class WordCounter {\n    public static String inputString(){\n        Scanner s = new Scanner(System.in);\n        System.out.println(&quot;\\nInput your desired sentence/string: &quot;);\n        String userInput = s.nextLine();\n        return userInput;\n    }\n\n    public static void countWords(int count, String userInput){\n\n        count = 1;\n\n        for (int i = 0; i &lt; userInput.length() - 1; i++)\n        {\n            if ((userInput.charAt(i) == ' ') &amp;&amp; (userInput.charAt(i + 1) != ' '))\n            {\n                count++;\n            }\n        }\n        System.out.print(&quot;Number of words in the sentence/string: &quot; + count);    \n    }\n\n    public static void main (String [] args){\n        System.out.println(&quot;Word Counter.&quot;);\n        inputString();\n        countWords();\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","android-recyclerview","parent-child"],"answers":[{"tags":[],"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660951970,"creation_date":1660951402,"answer_id":73423084,"question_id":73421454,"body_markdown":"If I understood your question correctly, you want to update the `parent` `textView` adapter from `child` `adapter`.\r\n\r\nYou are using this line of code:\r\n\r\n    rootView = ((Activity) context).getWindow().getDecorView().findViewById(android.R.id.content);\r\n\r\nto be able to access `textview` (`semester_gpa_value`) from the child adapter.\r\n\r\nThere is a better way to achieve this using the `Observer pattern`, just send the text from the child adapter to the parent adapter. this way you will be able to update `semester_gpa_value` from parent adapter, so you don&#39;t need to access it in child adapter.\r\n\r\nSo make these changes in the child adapter:\r\n\r\n    public class ChildAdapter extends RecyclerView.Adapter&lt;ChildAdapter.ChildViewHolder&gt; {\r\n        \r\n        //...\r\n\r\n        public interface ValueChangeListener {\r\n            void onValueChange(String newValue);\r\n        }\r\n\r\n        private ValueChangeListener valueChangeListener;\r\n    \r\n        //...\r\n        class ChildViewHolder extends RecyclerView.ViewHolder {\r\n    \r\n            EditText TIET_credit_hour;\r\n    \r\n            public ChildViewHolder(@NonNull View itemView) {\r\n                super(itemView);\r\n                //...\r\n                TIET_credit_hour = itemView.findViewById(R.id.TIET_credit_hour);\r\n    \r\n                TIET_credit_hour.addTextChangedListener(new TextWatcher() {\r\n                    @Override\r\n                    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}\r\n    \r\n                    @Override\r\n                    public void onTextChanged(CharSequence s, int start, int before, int count) {}\r\n    \r\n                    @Override\r\n                    public void afterTextChanged(Editable s) {\r\n                        if (valueChangeListener != null) {\r\n                            // In this case, I just send the text as is to the parent adapter, but you can do whatever calculations you want before sending it.\r\n                            valueChangeListener.onValueChange(s.toString());\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    \r\n        // this method must be called by parent adapter to listen for text change\r\n        public void setValueChangeListener(ValueChangeListener valueChangeListener) {\r\n            this.valueChangeListener = valueChangeListener;\r\n        }\r\n    }\r\n\r\n  \r\n\r\nIn your parent adapter, just call `childAdapter.setValueChangeListener(yourText)` to be able to receive the text sent by the child adapter:\r\n\r\nParentAdapter.java:\r\n\r\n        @Override\r\n        public void onBindViewHolder(@NonNull ItemViewHolder holder, int position) {\r\n            //...\r\n    \r\n            childAdapter.setValueChangeListener(new ChildAdapter.ValueChangeListener() {\r\n                @Override\r\n                public void onValueChange(String newValue) {\r\n                    //Also here you can do any calculation you want before updating the text view. In this example I just show the text received from the child adapter.\r\n                    holder.semester_gpa_value.setText(newValue);\r\n                }\r\n            });\r\n        }\r\n\r\nAs you can see, we are updating the text view of the parent adapter with the text received from the child adapter.","title":"How to update Parent RecyclerView&#39;s components from child RecyclerView&#39;s components in android Studio using java?","body":"<p>If I understood your question correctly, you want to update the <code>parent</code> <code>textView</code> adapter from <code>child</code> <code>adapter</code>.</p>\n<p>You are using this line of code:</p>\n<pre><code>rootView = ((Activity) context).getWindow().getDecorView().findViewById(android.R.id.content);\n</code></pre>\n<p>to be able to access <code>textview</code> (<code>semester_gpa_value</code>) from the child adapter.</p>\n<p>There is a better way to achieve this using the <code>Observer pattern</code>, just send the text from the child adapter to the parent adapter. this way you will be able to update <code>semester_gpa_value</code> from parent adapter, so you don't need to access it in child adapter.</p>\n<p>So make these changes in the child adapter:</p>\n<pre><code>public class ChildAdapter extends RecyclerView.Adapter&lt;ChildAdapter.ChildViewHolder&gt; {\n    \n    //...\n\n    public interface ValueChangeListener {\n        void onValueChange(String newValue);\n    }\n\n    private ValueChangeListener valueChangeListener;\n\n    //...\n    class ChildViewHolder extends RecyclerView.ViewHolder {\n\n        EditText TIET_credit_hour;\n\n        public ChildViewHolder(@NonNull View itemView) {\n            super(itemView);\n            //...\n            TIET_credit_hour = itemView.findViewById(R.id.TIET_credit_hour);\n\n            TIET_credit_hour.addTextChangedListener(new TextWatcher() {\n                @Override\n                public void beforeTextChanged(CharSequence s, int start, int count, int after) {}\n\n                @Override\n                public void onTextChanged(CharSequence s, int start, int before, int count) {}\n\n                @Override\n                public void afterTextChanged(Editable s) {\n                    if (valueChangeListener != null) {\n                        // In this case, I just send the text as is to the parent adapter, but you can do whatever calculations you want before sending it.\n                        valueChangeListener.onValueChange(s.toString());\n                    }\n                }\n            });\n        }\n    }\n\n    // this method must be called by parent adapter to listen for text change\n    public void setValueChangeListener(ValueChangeListener valueChangeListener) {\n        this.valueChangeListener = valueChangeListener;\n    }\n}\n</code></pre>\n<p>In your parent adapter, just call <code>childAdapter.setValueChangeListener(yourText)</code> to be able to receive the text sent by the child adapter:</p>\n<p>ParentAdapter.java:</p>\n<pre><code>    @Override\n    public void onBindViewHolder(@NonNull ItemViewHolder holder, int position) {\n        //...\n\n        childAdapter.setValueChangeListener(new ChildAdapter.ValueChangeListener() {\n            @Override\n            public void onValueChange(String newValue) {\n                //Also here you can do any calculation you want before updating the text view. In this example I just show the text received from the child adapter.\n                holder.semester_gpa_value.setText(newValue);\n            }\n        });\n    }\n</code></pre>\n<p>As you can see, we are updating the text view of the parent adapter with the text received from the child adapter.</p>\n"}],"owner":{"account_id":26070501,"reputation":1,"user_id":19770261,"display_name":"Safdar Manan Khan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1016,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660973507,"creation_date":1660937295,"question_id":73421454,"body_markdown":"As you can see in the picture I have two recycler Views (Parent and nested Recycler View), the parent recycler View is showing Semesters&#39; list while the nested recycler View is showing subjects&#39; list for that particular Semester. Now the problem is that I want to update the SGPA TextView (0.00) next to Semester TextView when a user enters credit hours and letter grade in particular Semester&#39;s subjects&#39; list ... I am doing it by the following provided code, but it does not satisfy my needs... \r\n\r\n![1]\r\n\r\n**Child Model Class**\r\n\r\n``` package com.calculator.nestedrecyclerview;\r\n\r\npublic class ChildModelClass {\r\n\r\n    String subject_LBL;\r\n    String credit_hours;\r\n    String letter_grade;\r\n    int delete_icon;\r\n\r\n    public ChildModelClass(String subject_LBL, int delete_icon, String credit_hours, String letter_grade) {\r\n        this.subject_LBL = subject_LBL;\r\n        this.delete_icon = delete_icon;\r\n        this.credit_hours = credit_hours;\r\n        this.letter_grade = letter_grade;\r\n    }\r\n\r\n    public String getSubject_LBL() {\r\n        return subject_LBL;\r\n    }\r\n\r\n    public String getCredit_hours() {\r\n        return credit_hours;\r\n    }\r\n\r\n    public void setCredit_hours(String credit_hours) {\r\n        this.credit_hours = credit_hours;\r\n    }\r\n\r\n    public String getLetter_grade() {\r\n        return letter_grade;\r\n    }\r\n\r\n    public void setLetter_grade(String letter_grade) {\r\n        this.letter_grade = letter_grade;\r\n    }\r\n\r\n    public void setSubject_LBL(String subject_LBL) {\r\n        this.subject_LBL = subject_LBL;\r\n    }\r\n\r\n    public int getDelete_icon() {\r\n        return delete_icon;\r\n    }\r\n\r\n    public void setDelete_icon(int delete_icon) {\r\n        this.delete_icon = delete_icon;\r\n    }\r\n\r\n}\r\n ```\r\n\r\n**Child Adapter Class**\r\n\r\n``` package com.calculator.nestedrecyclerview;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.google.android.material.card.MaterialCardView;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class ChildAdapter extends RecyclerView.Adapter&lt;ChildAdapter.ViewHolder&gt; {\r\n\r\n    ArrayList&lt;ChildModelClass&gt; childModelClassList;\r\n    ArrayList&lt;String&gt; credit_hour_arrayList = new ArrayList&lt;&gt;();\r\n//    ArrayList&lt;String&gt; letter_grade_arrayList;\r\n    boolean isOnTextChanged = false;\r\n    int total_credit_hours = 0;\r\n    Context context;\r\n    TextView sGPA_value;\r\n    View rootView;\r\n\r\n    public ChildAdapter(ArrayList&lt;ChildModelClass&gt; childModelClassList,Context context) {\r\n        this.childModelClassList = childModelClassList;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ChildAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\r\n        View v =layoutInflater.inflate(R.layout.child_rv_layout,parent,false);\r\n        context = parent.getContext();\r\n        rootView = ((Activity) context).getWindow().getDecorView().findViewById(android.R.id.content);\r\n        sGPA_value = rootView.findViewById(R.id.semester_gpa_value);\r\n        return new ViewHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ChildAdapter.ViewHolder holder, int position) {\r\n        ChildModelClass list = childModelClassList.get(position);\r\n        holder.TIET_credit_hour.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n                isOnTextChanged = true;\r\n                // list.credit_hours = charSequence.toString();\r\n\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n\r\n                total_credit_hours = 0;\r\n                if (isOnTextChanged) {\r\n                    isOnTextChanged = false;\r\n\r\n                    try {\r\n\r\n                        for (int i = 0; i &lt;= holder.getAdapterPosition(); i++) {\r\n                            if (i != holder.getAdapterPosition()) {\r\n                                credit_hour_arrayList.add(&quot;0&quot;);\r\n                            }else {\r\n                                credit_hour_arrayList.add(&quot;0&quot;);\r\n                                credit_hour_arrayList.set(holder.getAdapterPosition(),editable.toString());\r\n\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        for (int i = 0; i &lt;= credit_hour_arrayList.size() -1; i++) {\r\n                            int tempTotalCreditHours = Integer.parseInt(credit_hour_arrayList.get(i));\r\n                            total_credit_hours = total_credit_hours + tempTotalCreditHours;\r\n                        }\r\n//                        total_final_credit_hours = String.valueOf(total_credit_hours);\r\n                        sGPA_value.setText(String.valueOf(total_credit_hours));\r\n                    }catch (NumberFormatException e) {\r\n                        total_credit_hours = 0;\r\n                        for (int i = 0; i &lt;= holder.getAdapterPosition(); i++) {\r\n                            int newPosition = holder.getAdapterPosition();\r\n                            if (i == newPosition) {\r\n                                credit_hour_arrayList.set(newPosition,&quot;0&quot;);\r\n                            }\r\n                        }\r\n                        for (int i = 0; i &lt; credit_hour_arrayList.size()-1; i++) {\r\n                            int tempTotalCreditHours = Integer.parseInt(credit_hour_arrayList.get(i));\r\n                            total_credit_hours = total_credit_hours + tempTotalCreditHours;\r\n                        }\r\n//                        total_final_credit_hours = String.valueOf(total_credit_hours);\r\n                        sGPA_value.setText(String.valueOf(total_credit_hours));\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        holder.subject_LBL.setText(list.getSubject_LBL());\r\n        holder.delete_icon.setImageResource(list.getDelete_icon());\r\n        holder.TIET_credit_hour.setText(list.getCredit_hours());\r\n        holder.TIET_letter_grade.setText(list.getLetter_grade());\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return childModelClassList.size();\r\n    }\r\n\r\n    @Override\r\n    public long getItemId(int position) {\r\n        return super.getItemId(position);\r\n    }\r\n\r\n    @Override\r\n    public int getItemViewType(int position) {\r\n        return super.getItemViewType(position);\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        ConstraintLayout child_rv_layout, card_view_layout;\r\n        MaterialCardView card_view;\r\n        TextView subject_LBL;\r\n        ImageView delete_icon;\r\n        TextInputLayout TIL_credit_hour, TIL_letter_grade;\r\n        TextInputEditText TIET_credit_hour, TIET_letter_grade;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            child_rv_layout = itemView.findViewById(R.id.child_rv_layout);\r\n            card_view_layout = itemView.findViewById(R.id.card_view_layout);\r\n\r\n            card_view = itemView.findViewById(R.id.card_view);\r\n\r\n            subject_LBL = itemView.findViewById(R.id.subject_LBL);\r\n\r\n            delete_icon = itemView.findViewById(R.id.delete_icon);\r\n\r\n            TIL_credit_hour = itemView.findViewById(R.id.TIL_credit_hour);\r\n            TIL_letter_grade = itemView.findViewById(R.id.TIL_letter_grade);\r\n\r\n            TIET_credit_hour = itemView.findViewById(R.id.TIET_credit_hour);\r\n            TIET_letter_grade = itemView.findViewById(R.id.TIET_letter_grade);\r\n\r\n            delete_icon.setOnClickListener(view -&gt; {\r\n                childModelClassList.remove(getAdapterPosition());\r\n                notifyItemRemoved(getAdapterPosition());\r\n            });\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Parent Model Class**\r\n\r\n``` package com.calculator.nestedrecyclerview;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class ParentModelClass {\r\n\r\n    String semester_LBL;\r\n    String semester_GPA_value;\r\n    ArrayList&lt;ChildModelClass&gt; childModelClassList;\r\n\r\n    public ParentModelClass(String semester_LBL, String semester_GPA_value, ArrayList&lt;ChildModelClass&gt; childModelClassList) {\r\n        this.semester_LBL = semester_LBL;\r\n        this.semester_GPA_value = semester_GPA_value;\r\n        this.childModelClassList = childModelClassList;\r\n    }\r\n\r\n    public String getSemester_LBL() {\r\n        return semester_LBL;\r\n    }\r\n\r\n    public void setSemester_LBL(String semester_LBL) {\r\n        this.semester_LBL = semester_LBL;\r\n    }\r\n\r\n    public String getSemester_GPA_value() {\r\n        return semester_GPA_value;\r\n    }\r\n\r\n    public void setSemester_GPA_value(String semester_GPA_value) {\r\n        this.semester_GPA_value = semester_GPA_value;\r\n    }\r\n}\r\n```\r\n\r\n**Parent Adapter Class**\r\n\r\n``` package com.calculator.nestedrecyclerview;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Context;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class ParentAdapterClass extends RecyclerView.Adapter&lt;ParentAdapterClass.ViewHolder&gt; {\r\n\r\n    ArrayList&lt;ParentModelClass&gt; parentModelClassArrayList;\r\n    Context context;\r\n\r\n    public ParentAdapterClass(ArrayList&lt;ParentModelClass&gt; parentModelClassArrayList, Context context) {\r\n        this.parentModelClassArrayList = parentModelClassArrayList;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ParentAdapterClass.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\r\n        View v =layoutInflater.inflate(R.layout.parent_rv_layout,parent,false);\r\n        return new ViewHolder(v);\r\n    }\r\n\r\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ParentAdapterClass.ViewHolder holder, int position) {\r\n        ParentModelClass list = parentModelClassArrayList.get(position);\r\n\r\n        holder.semester_LBL.setText(list.getSemester_LBL());\r\n        holder.semester_gpa_value.setText(list.getSemester_GPA_value());\r\n\r\n        ChildAdapter childAdapter;\r\n        childAdapter = new ChildAdapter(parentModelClassArrayList.get(position).childModelClassList, context);\r\n        ListDecorator listDecorator = new ListDecorator(0,15,15,0);\r\n        holder.child_rv.addItemDecoration(listDecorator);\r\n        holder.child_rv.setLayoutManager(new LinearLayoutManager(context, LinearLayoutManager.HORIZONTAL, false));\r\n        holder.child_rv.setAdapter(childAdapter);\r\n        holder.child_rv.setHasFixedSize(true);\r\n        childAdapter.notifyDataSetChanged();\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return parentModelClassArrayList.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        ConstraintLayout parent_rv_layout, semester_gpa_display_layout;\r\n        RecyclerView child_rv;\r\n        TextView semester_LBL, semester_gpa_value;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            parent_rv_layout = itemView.findViewById(R.id.parent_rv_layout);\r\n            semester_gpa_display_layout = itemView.findViewById(R.id.semester_gpa_display_layout);\r\n\r\n            child_rv = itemView.findViewById(R.id.child_rv);\r\n\r\n            semester_LBL = itemView.findViewById(R.id.semester_LBL);\r\n            semester_gpa_value = itemView.findViewById(R.id.semester_gpa_value);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**MainActivity**\r\n\r\n``` package com.calculator.nestedrecyclerview;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    ConstraintLayout parent_layout, CGPA_display_layout;\r\n    TextView Label_CGPA, CGPA_value;\r\n    RecyclerView parent_rv;\r\n\r\n    ArrayList&lt;ParentModelClass&gt; parentModelClassArrayList;\r\n    ArrayList&lt;ChildModelClass&gt; childModelClassArrayList;\r\n    ArrayList&lt;ChildModelClass&gt; semester_1;\r\n    ArrayList&lt;ChildModelClass&gt; semester_2;\r\n    ArrayList&lt;ChildModelClass&gt; semester_3;\r\n    ArrayList&lt;ChildModelClass&gt; semester_4;\r\n\r\n\r\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        parent_layout = findViewById(R.id.parent_layout);\r\n        CGPA_display_layout = findViewById(R.id.CGPA_display_layout);\r\n        Label_CGPA = findViewById(R.id.Label_CGPA);\r\n        CGPA_value = findViewById(R.id.CGPA_value);\r\n        parent_rv = findViewById(R.id.parent_rv);\r\n\r\n        childModelClassArrayList = new ArrayList&lt;&gt;();\r\n        semester_1 = new ArrayList&lt;&gt;();\r\n        semester_2 = new ArrayList&lt;&gt;();\r\n        semester_3 = new ArrayList&lt;&gt;();\r\n        semester_4 = new ArrayList&lt;&gt;();\r\n        parentModelClassArrayList = new ArrayList&lt;&gt;();\r\n        ParentAdapterClass parentAdapterClass;\r\n\r\n        semester_1.add(new ChildModelClass(&quot;Subject 1&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_1.add(new ChildModelClass(&quot;Subject 2&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_1.add(new ChildModelClass(&quot;Subject 3&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_1.add(new ChildModelClass(&quot;Subject 4&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n\r\n        semester_2.add(new ChildModelClass(&quot;Subject 1&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_2.add(new ChildModelClass(&quot;Subject 2&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_2.add(new ChildModelClass(&quot;Subject 3&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_2.add(new ChildModelClass(&quot;Subject 4&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n\r\n        semester_3.add(new ChildModelClass(&quot;Subject 1&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_3.add(new ChildModelClass(&quot;Subject 2&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_3.add(new ChildModelClass(&quot;Subject 3&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_3.add(new ChildModelClass(&quot;Subject 4&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n\r\n        semester_4.add(new ChildModelClass(&quot;Subject 1&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_4.add(new ChildModelClass(&quot;Subject 2&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_4.add(new ChildModelClass(&quot;Subject 3&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n        semester_4.add(new ChildModelClass(&quot;Subject 4&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\r\n\r\n        parentModelClassArrayList.add(new ParentModelClass(&quot;Semester 1&quot;, &quot;0.00&quot;, semester_1));\r\n        parentModelClassArrayList.add(new ParentModelClass(&quot;Semester 2&quot;, &quot;0.00&quot;, semester_2));\r\n        parentModelClassArrayList.add(new ParentModelClass(&quot;Semester 3&quot;, &quot;0.00&quot;, semester_3));\r\n        parentModelClassArrayList.add(new ParentModelClass(&quot;Semester 4&quot;, &quot;0.00&quot;, semester_4));\r\n\r\n\r\n        parentAdapterClass = new ParentAdapterClass(parentModelClassArrayList,MainActivity.this);\r\n        ListDecorator listDecorator = new ListDecorator(20, 0,0, 20);\r\n        parent_rv.addItemDecoration(listDecorator);\r\n        parent_rv.setAdapter(parentAdapterClass);\r\n        parent_rv.setHasFixedSize(true);\r\n        parent_rv.setLayoutManager(new LinearLayoutManager(this));\r\n        parentAdapterClass.notifyDataSetChanged();\r\n\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/AbLj0.jpg","title":"How to update Parent RecyclerView&#39;s components from child RecyclerView&#39;s components in android Studio using java?","body":"<p>As you can see in the picture I have two recycler Views (Parent and nested Recycler View), the parent recycler View is showing Semesters' list while the nested recycler View is showing subjects' list for that particular Semester. Now the problem is that I want to update the SGPA TextView (0.00) next to Semester TextView when a user enters credit hours and letter grade in particular Semester's subjects' list ... I am doing it by the following provided code, but it does not satisfy my needs...</p>\n<p><img src=\"https://i.stack.imgur.com/AbLj0.jpg\" alt=\"1\" /></p>\n<p><strong>Child Model Class</strong></p>\n<pre><code>\npublic class ChildModelClass {\n\n    String subject_LBL;\n    String credit_hours;\n    String letter_grade;\n    int delete_icon;\n\n    public ChildModelClass(String subject_LBL, int delete_icon, String credit_hours, String letter_grade) {\n        this.subject_LBL = subject_LBL;\n        this.delete_icon = delete_icon;\n        this.credit_hours = credit_hours;\n        this.letter_grade = letter_grade;\n    }\n\n    public String getSubject_LBL() {\n        return subject_LBL;\n    }\n\n    public String getCredit_hours() {\n        return credit_hours;\n    }\n\n    public void setCredit_hours(String credit_hours) {\n        this.credit_hours = credit_hours;\n    }\n\n    public String getLetter_grade() {\n        return letter_grade;\n    }\n\n    public void setLetter_grade(String letter_grade) {\n        this.letter_grade = letter_grade;\n    }\n\n    public void setSubject_LBL(String subject_LBL) {\n        this.subject_LBL = subject_LBL;\n    }\n\n    public int getDelete_icon() {\n        return delete_icon;\n    }\n\n    public void setDelete_icon(int delete_icon) {\n        this.delete_icon = delete_icon;\n    }\n\n}\n</code></pre>\n<p><strong>Child Adapter Class</strong></p>\n<pre><code>\nimport android.app.Activity;\nimport android.content.Context;\nimport android.text.Editable;\nimport android.text.TextWatcher;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.constraintlayout.widget.ConstraintLayout;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport com.google.android.material.card.MaterialCardView;\nimport com.google.android.material.textfield.TextInputEditText;\nimport com.google.android.material.textfield.TextInputLayout;\n\nimport java.util.ArrayList;\n\npublic class ChildAdapter extends RecyclerView.Adapter&lt;ChildAdapter.ViewHolder&gt; {\n\n    ArrayList&lt;ChildModelClass&gt; childModelClassList;\n    ArrayList&lt;String&gt; credit_hour_arrayList = new ArrayList&lt;&gt;();\n//    ArrayList&lt;String&gt; letter_grade_arrayList;\n    boolean isOnTextChanged = false;\n    int total_credit_hours = 0;\n    Context context;\n    TextView sGPA_value;\n    View rootView;\n\n    public ChildAdapter(ArrayList&lt;ChildModelClass&gt; childModelClassList,Context context) {\n        this.childModelClassList = childModelClassList;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public ChildAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\n        View v =layoutInflater.inflate(R.layout.child_rv_layout,parent,false);\n        context = parent.getContext();\n        rootView = ((Activity) context).getWindow().getDecorView().findViewById(android.R.id.content);\n        sGPA_value = rootView.findViewById(R.id.semester_gpa_value);\n        return new ViewHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ChildAdapter.ViewHolder holder, int position) {\n        ChildModelClass list = childModelClassList.get(position);\n        holder.TIET_credit_hour.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n                isOnTextChanged = true;\n                // list.credit_hours = charSequence.toString();\n\n            }\n\n            @Override\n            public void afterTextChanged(Editable editable) {\n\n                total_credit_hours = 0;\n                if (isOnTextChanged) {\n                    isOnTextChanged = false;\n\n                    try {\n\n                        for (int i = 0; i &lt;= holder.getAdapterPosition(); i++) {\n                            if (i != holder.getAdapterPosition()) {\n                                credit_hour_arrayList.add(&quot;0&quot;);\n                            }else {\n                                credit_hour_arrayList.add(&quot;0&quot;);\n                                credit_hour_arrayList.set(holder.getAdapterPosition(),editable.toString());\n\n                                break;\n                            }\n                        }\n\n                        for (int i = 0; i &lt;= credit_hour_arrayList.size() -1; i++) {\n                            int tempTotalCreditHours = Integer.parseInt(credit_hour_arrayList.get(i));\n                            total_credit_hours = total_credit_hours + tempTotalCreditHours;\n                        }\n//                        total_final_credit_hours = String.valueOf(total_credit_hours);\n                        sGPA_value.setText(String.valueOf(total_credit_hours));\n                    }catch (NumberFormatException e) {\n                        total_credit_hours = 0;\n                        for (int i = 0; i &lt;= holder.getAdapterPosition(); i++) {\n                            int newPosition = holder.getAdapterPosition();\n                            if (i == newPosition) {\n                                credit_hour_arrayList.set(newPosition,&quot;0&quot;);\n                            }\n                        }\n                        for (int i = 0; i &lt; credit_hour_arrayList.size()-1; i++) {\n                            int tempTotalCreditHours = Integer.parseInt(credit_hour_arrayList.get(i));\n                            total_credit_hours = total_credit_hours + tempTotalCreditHours;\n                        }\n//                        total_final_credit_hours = String.valueOf(total_credit_hours);\n                        sGPA_value.setText(String.valueOf(total_credit_hours));\n                    }\n\n                }\n\n            }\n        });\n\n        holder.subject_LBL.setText(list.getSubject_LBL());\n        holder.delete_icon.setImageResource(list.getDelete_icon());\n        holder.TIET_credit_hour.setText(list.getCredit_hours());\n        holder.TIET_letter_grade.setText(list.getLetter_grade());\n    }\n\n    @Override\n    public int getItemCount() {\n        return childModelClassList.size();\n    }\n\n    @Override\n    public long getItemId(int position) {\n        return super.getItemId(position);\n    }\n\n    @Override\n    public int getItemViewType(int position) {\n        return super.getItemViewType(position);\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n\n        ConstraintLayout child_rv_layout, card_view_layout;\n        MaterialCardView card_view;\n        TextView subject_LBL;\n        ImageView delete_icon;\n        TextInputLayout TIL_credit_hour, TIL_letter_grade;\n        TextInputEditText TIET_credit_hour, TIET_letter_grade;\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n\n            child_rv_layout = itemView.findViewById(R.id.child_rv_layout);\n            card_view_layout = itemView.findViewById(R.id.card_view_layout);\n\n            card_view = itemView.findViewById(R.id.card_view);\n\n            subject_LBL = itemView.findViewById(R.id.subject_LBL);\n\n            delete_icon = itemView.findViewById(R.id.delete_icon);\n\n            TIL_credit_hour = itemView.findViewById(R.id.TIL_credit_hour);\n            TIL_letter_grade = itemView.findViewById(R.id.TIL_letter_grade);\n\n            TIET_credit_hour = itemView.findViewById(R.id.TIET_credit_hour);\n            TIET_letter_grade = itemView.findViewById(R.id.TIET_letter_grade);\n\n            delete_icon.setOnClickListener(view -&gt; {\n                childModelClassList.remove(getAdapterPosition());\n                notifyItemRemoved(getAdapterPosition());\n            });\n        }\n    }\n}\n</code></pre>\n<p><strong>Parent Model Class</strong></p>\n<pre><code>\nimport java.util.ArrayList;\n\npublic class ParentModelClass {\n\n    String semester_LBL;\n    String semester_GPA_value;\n    ArrayList&lt;ChildModelClass&gt; childModelClassList;\n\n    public ParentModelClass(String semester_LBL, String semester_GPA_value, ArrayList&lt;ChildModelClass&gt; childModelClassList) {\n        this.semester_LBL = semester_LBL;\n        this.semester_GPA_value = semester_GPA_value;\n        this.childModelClassList = childModelClassList;\n    }\n\n    public String getSemester_LBL() {\n        return semester_LBL;\n    }\n\n    public void setSemester_LBL(String semester_LBL) {\n        this.semester_LBL = semester_LBL;\n    }\n\n    public String getSemester_GPA_value() {\n        return semester_GPA_value;\n    }\n\n    public void setSemester_GPA_value(String semester_GPA_value) {\n        this.semester_GPA_value = semester_GPA_value;\n    }\n}\n</code></pre>\n<p><strong>Parent Adapter Class</strong></p>\n<pre><code>\nimport android.annotation.SuppressLint;\nimport android.content.Context;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.constraintlayout.widget.ConstraintLayout;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.ArrayList;\n\npublic class ParentAdapterClass extends RecyclerView.Adapter&lt;ParentAdapterClass.ViewHolder&gt; {\n\n    ArrayList&lt;ParentModelClass&gt; parentModelClassArrayList;\n    Context context;\n\n    public ParentAdapterClass(ArrayList&lt;ParentModelClass&gt; parentModelClassArrayList, Context context) {\n        this.parentModelClassArrayList = parentModelClassArrayList;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public ParentAdapterClass.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\n        View v =layoutInflater.inflate(R.layout.parent_rv_layout,parent,false);\n        return new ViewHolder(v);\n    }\n\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\n    @Override\n    public void onBindViewHolder(@NonNull ParentAdapterClass.ViewHolder holder, int position) {\n        ParentModelClass list = parentModelClassArrayList.get(position);\n\n        holder.semester_LBL.setText(list.getSemester_LBL());\n        holder.semester_gpa_value.setText(list.getSemester_GPA_value());\n\n        ChildAdapter childAdapter;\n        childAdapter = new ChildAdapter(parentModelClassArrayList.get(position).childModelClassList, context);\n        ListDecorator listDecorator = new ListDecorator(0,15,15,0);\n        holder.child_rv.addItemDecoration(listDecorator);\n        holder.child_rv.setLayoutManager(new LinearLayoutManager(context, LinearLayoutManager.HORIZONTAL, false));\n        holder.child_rv.setAdapter(childAdapter);\n        holder.child_rv.setHasFixedSize(true);\n        childAdapter.notifyDataSetChanged();\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return parentModelClassArrayList.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n\n        ConstraintLayout parent_rv_layout, semester_gpa_display_layout;\n        RecyclerView child_rv;\n        TextView semester_LBL, semester_gpa_value;\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n\n            parent_rv_layout = itemView.findViewById(R.id.parent_rv_layout);\n            semester_gpa_display_layout = itemView.findViewById(R.id.semester_gpa_display_layout);\n\n            child_rv = itemView.findViewById(R.id.child_rv);\n\n            semester_LBL = itemView.findViewById(R.id.semester_LBL);\n            semester_gpa_value = itemView.findViewById(R.id.semester_gpa_value);\n        }\n    }\n}\n</code></pre>\n<p><strong>MainActivity</strong></p>\n<pre><code>\nimport android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.widget.TextView;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.constraintlayout.widget.ConstraintLayout;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.ArrayList;\n\npublic class MainActivity extends AppCompatActivity {\n\n    ConstraintLayout parent_layout, CGPA_display_layout;\n    TextView Label_CGPA, CGPA_value;\n    RecyclerView parent_rv;\n\n    ArrayList&lt;ParentModelClass&gt; parentModelClassArrayList;\n    ArrayList&lt;ChildModelClass&gt; childModelClassArrayList;\n    ArrayList&lt;ChildModelClass&gt; semester_1;\n    ArrayList&lt;ChildModelClass&gt; semester_2;\n    ArrayList&lt;ChildModelClass&gt; semester_3;\n    ArrayList&lt;ChildModelClass&gt; semester_4;\n\n\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        parent_layout = findViewById(R.id.parent_layout);\n        CGPA_display_layout = findViewById(R.id.CGPA_display_layout);\n        Label_CGPA = findViewById(R.id.Label_CGPA);\n        CGPA_value = findViewById(R.id.CGPA_value);\n        parent_rv = findViewById(R.id.parent_rv);\n\n        childModelClassArrayList = new ArrayList&lt;&gt;();\n        semester_1 = new ArrayList&lt;&gt;();\n        semester_2 = new ArrayList&lt;&gt;();\n        semester_3 = new ArrayList&lt;&gt;();\n        semester_4 = new ArrayList&lt;&gt;();\n        parentModelClassArrayList = new ArrayList&lt;&gt;();\n        ParentAdapterClass parentAdapterClass;\n\n        semester_1.add(new ChildModelClass(&quot;Subject 1&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_1.add(new ChildModelClass(&quot;Subject 2&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_1.add(new ChildModelClass(&quot;Subject 3&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_1.add(new ChildModelClass(&quot;Subject 4&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n\n        semester_2.add(new ChildModelClass(&quot;Subject 1&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_2.add(new ChildModelClass(&quot;Subject 2&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_2.add(new ChildModelClass(&quot;Subject 3&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_2.add(new ChildModelClass(&quot;Subject 4&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n\n        semester_3.add(new ChildModelClass(&quot;Subject 1&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_3.add(new ChildModelClass(&quot;Subject 2&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_3.add(new ChildModelClass(&quot;Subject 3&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_3.add(new ChildModelClass(&quot;Subject 4&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n\n        semester_4.add(new ChildModelClass(&quot;Subject 1&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_4.add(new ChildModelClass(&quot;Subject 2&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_4.add(new ChildModelClass(&quot;Subject 3&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n        semester_4.add(new ChildModelClass(&quot;Subject 4&quot;, R.drawable.ic_delete, &quot;&quot;, &quot;&quot;));\n\n        parentModelClassArrayList.add(new ParentModelClass(&quot;Semester 1&quot;, &quot;0.00&quot;, semester_1));\n        parentModelClassArrayList.add(new ParentModelClass(&quot;Semester 2&quot;, &quot;0.00&quot;, semester_2));\n        parentModelClassArrayList.add(new ParentModelClass(&quot;Semester 3&quot;, &quot;0.00&quot;, semester_3));\n        parentModelClassArrayList.add(new ParentModelClass(&quot;Semester 4&quot;, &quot;0.00&quot;, semester_4));\n\n\n        parentAdapterClass = new ParentAdapterClass(parentModelClassArrayList,MainActivity.this);\n        ListDecorator listDecorator = new ListDecorator(20, 0,0, 20);\n        parent_rv.addItemDecoration(listDecorator);\n        parent_rv.setAdapter(parentAdapterClass);\n        parent_rv.setHasFixedSize(true);\n        parent_rv.setLayoutManager(new LinearLayoutManager(this));\n        parentAdapterClass.notifyDataSetChanged();\n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","maven","intellij-idea","boot"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1660979876,"post_id":73423166,"comment_id":129665732,"body_markdown":"Which test framework do you use?","body":"Which test framework do you use?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1660991486,"post_id":73423166,"comment_id":129667599,"body_markdown":"You project has not been imported correct. The source tree does not show that `src/main/java` has been identified as source code (different color blue). I recommend to close the project. Delete the `.idea` directoy as well as `*.iml` file and import the project from scratch....","body":"You project has not been imported correct. The source tree does not show that <code>src&#47;main&#47;java</code> has been identified as source code (different color blue). I recommend to close the project. Delete the <code>.idea</code> directoy as well as <code>*.iml</code> file and import the project from scratch...."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1660996610,"post_id":73423166,"comment_id":129668577,"body_markdown":"I echo what khmarbaise said, but as far as I&#39;m aware, you don&#39;t need to be so drastic to delete the .idea and *.iml files. Reimporting (refreshing) your Maven project from the Maven tab in IntelliJ should be sufficient.","body":"I echo what khmarbaise said, but as far as I&#39;m aware, you don&#39;t need to be so drastic to delete the .idea and *.iml files. Reimporting (refreshing) your Maven project from the Maven tab in IntelliJ should be sufficient."}],"owner":{"account_id":26111736,"reputation":19,"user_id":19805558,"display_name":"Dhia Akermi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660972794,"creation_date":1660952450,"question_id":73423166,"body_markdown":"I&#39;m trying to implement a unit testing for my rest controller but when I click Alt + Enter \r\nI can&#39;t see the create Test option\r\nI tried to reinstall the dependencies, Invalid caches but it didn&#39;t work\r\n\r\n![1]\r\n\r\n\r\n![2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/flAr0.png\r\n  [2]: https://i.stack.imgur.com/JJThQ.png","title":"Why there&#39;s no &quot;Create Test&quot; Option when I click Alt + enter in my Maven Intellij project?","body":"<p>I'm trying to implement a unit testing for my rest controller but when I click Alt + Enter\nI can't see the create Test option\nI tried to reinstall the dependencies, Invalid caches but it didn't work</p>\n<p><img src=\"https://i.stack.imgur.com/flAr0.png\" alt=\"1\" /></p>\n<p><img src=\"https://i.stack.imgur.com/JJThQ.png\" alt=\"2\" /></p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":23257817,"reputation":1,"user_id":17344586,"display_name":"Dihan"},"score":0,"creation_date":1660970674,"post_id":73421843,"comment_id":129664745,"body_markdown":"Update : Finally solve this problem. I was using a dependency which was not found by gradle internet [implementation : &#39;com.android.support:multidex:2.0.1]. After remove that dependency my code run successfully.","body":"Update : Finally solve this problem. I was using a dependency which was not found by gradle internet [implementation : &#39;com.android.support:multidex:2.0.1]. After remove that dependency my code run successfully."}],"answers":[{"tags":[],"owner":{"account_id":6869576,"reputation":427,"user_id":5280535,"display_name":"david"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660941004,"creation_date":1660941004,"answer_id":73421985,"question_id":73421843,"body_markdown":"As response in: \r\nhttps://stackoverflow.com/questions/53932195/android-studio-3-2-1-artifactresolveexception-could-not-resolve-all-artifacts-f  \r\n\r\nCheck if the build gradle is in offline mode","title":"When I open my emulator in my Android Studio then the build output pop up and showing continuously this problem","body":"<p>As response in:\n<a href=\"https://stackoverflow.com/questions/53932195/android-studio-3-2-1-artifactresolveexception-could-not-resolve-all-artifacts-f\">Android studio 3.2.1 ArtifactResolveException: Could not resolve all artifacts for configuration &#39;:classpath&#39;</a></p>\n<p>Check if the build gradle is in offline mode</p>\n"},{"tags":[],"owner":{"account_id":23257817,"reputation":1,"user_id":17344586,"display_name":"Dihan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660970792,"creation_date":1660970792,"answer_id":73424159,"question_id":73421843,"body_markdown":"Update : Finally solve this problem. I was using a dependency which was not found by gradle internet [implementation : &#39;com.android.support:multidex:2.0.1]. After remove that dependency,synchronize it and  my code run successfully.","title":"When I open my emulator in my Android Studio then the build output pop up and showing continuously this problem","body":"<p>Update : Finally solve this problem. I was using a dependency which was not found by gradle internet [implementation : 'com.android.support:multidex:2.0.1]. After remove that dependency,synchronize it and  my code run successfully.</p>\n"}],"owner":{"account_id":23257817,"reputation":1,"user_id":17344586,"display_name":"Dihan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660970792,"creation_date":1660940075,"question_id":73421843,"body_markdown":"Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.","title":"When I open my emulator in my Android Studio then the build output pop up and showing continuously this problem","body":"<p>Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.</p>\n"},{"tags":["java","spring","spring-data","spring-data-r2dbc","r2dbc"],"owner":{"account_id":7644404,"reputation":61,"user_id":5795553,"display_name":"Jo&#227;o Verissimo Ribeiro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1552,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1660969714,"creation_date":1660969714,"question_id":73424096,"body_markdown":"I want to discuss a bit further the usage of Criteria and ReactiveCrudRepository.\r\n\r\nSpring data r2dbc supports [query by example][1]. Which in many cases is too limited. For example, all types other than String are exact-match only.\r\n\r\nNavigating the issues of the project, I found an [answer from @jiangtj][2] and managed to elaborate the following piece of code:\r\n\r\n```java\r\npublic interface UserRepository extends ReactiveCrudRepository&lt;User, Long&gt;, ReactiveSearchRepository&lt;User&gt; {\r\n\r\n}\r\n\r\ninterface ReactiveSearchRepository&lt;T&gt; {\r\n    Flux&lt;T&gt; findAll(Criteria criteria, Class&lt;T&gt; domainType);\r\n\r\n    public Mono&lt;Page&lt;T&gt;&gt; findAll(Criteria criteria, Pageable pageable, Class&lt;T&gt; domainType);\r\n}\r\n```\r\n\r\nAnd then the implementation for `ReactiveSearchRepositoryImpl`:\r\n```java\r\n\r\n@AllArgsConstructor\r\nclass ReactiveSearchRepositoryImpl&lt;T&gt; implements ReactiveSearchRepository&lt;T&gt; {\r\n\r\n    private final R2dbcEntityTemplate r2dbcTemplate;\r\n\r\n    public Flux&lt;T&gt; findAll(Criteria criteria, Class&lt;T&gt; domainType) {\r\n        return r2dbcTemplate.select(domainType)\r\n                .matching(query(criteria))\r\n                .all();\r\n    }\r\n\r\n    public Mono&lt;Page&lt;T&gt;&gt; findAll(Criteria criteria, Pageable pageable, Class&lt;T&gt; domainType) {\r\n        Mono&lt;List&lt;T&gt;&gt; list = r2dbcTemplate.select(domainType)\r\n                .matching(query(criteria).with(pageable))\r\n                .all()\r\n                .collectList();\r\n        Mono&lt;Long&gt; count = r2dbcTemplate.select(domainType)\r\n                .matching(query(criteria))\r\n                .count();\r\n        return Mono.zip(list, count)\r\n                .map(tuple -&gt; new PageImpl&lt;&gt;(tuple.getT1(), pageable, tuple.getT2()));\r\n    }\r\n}\r\n\r\n```\r\n\r\nI&#39;m aware of [Oliver Drotbohm&#39;s view][3] about `Criteria` as a store-specific type. Although the Fluent API supports it out of the box. \r\n\r\nIn my personal view, adding `Criteria` to the Reactive Repositories would empower the framework with a new dimension of querying the DB.\r\n\r\nDoes it make sense?\r\n\r\n  [1]: https://github.com/spring-projects/spring-data-r2dbc/issues/372\r\n  [2]: https://github.com/spring-projects/spring-data-r2dbc/issues/565#issuecomment-821781637\r\n  [3]: https://github.com/spring-projects/spring-data-r2dbc/issues/371#issuecomment-630081500","title":"ReactiveCrudRepository Criteria Query","body":"<p>I want to discuss a bit further the usage of Criteria and ReactiveCrudRepository.</p>\n<p>Spring data r2dbc supports <a href=\"https://github.com/spring-projects/spring-data-r2dbc/issues/372\" rel=\"nofollow noreferrer\">query by example</a>. Which in many cases is too limited. For example, all types other than String are exact-match only.</p>\n<p>Navigating the issues of the project, I found an <a href=\"https://github.com/spring-projects/spring-data-r2dbc/issues/565#issuecomment-821781637\" rel=\"nofollow noreferrer\">answer from @jiangtj</a> and managed to elaborate the following piece of code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserRepository extends ReactiveCrudRepository&lt;User, Long&gt;, ReactiveSearchRepository&lt;User&gt; {\n\n}\n\ninterface ReactiveSearchRepository&lt;T&gt; {\n    Flux&lt;T&gt; findAll(Criteria criteria, Class&lt;T&gt; domainType);\n\n    public Mono&lt;Page&lt;T&gt;&gt; findAll(Criteria criteria, Pageable pageable, Class&lt;T&gt; domainType);\n}\n</code></pre>\n<p>And then the implementation for <code>ReactiveSearchRepositoryImpl</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@AllArgsConstructor\nclass ReactiveSearchRepositoryImpl&lt;T&gt; implements ReactiveSearchRepository&lt;T&gt; {\n\n    private final R2dbcEntityTemplate r2dbcTemplate;\n\n    public Flux&lt;T&gt; findAll(Criteria criteria, Class&lt;T&gt; domainType) {\n        return r2dbcTemplate.select(domainType)\n                .matching(query(criteria))\n                .all();\n    }\n\n    public Mono&lt;Page&lt;T&gt;&gt; findAll(Criteria criteria, Pageable pageable, Class&lt;T&gt; domainType) {\n        Mono&lt;List&lt;T&gt;&gt; list = r2dbcTemplate.select(domainType)\n                .matching(query(criteria).with(pageable))\n                .all()\n                .collectList();\n        Mono&lt;Long&gt; count = r2dbcTemplate.select(domainType)\n                .matching(query(criteria))\n                .count();\n        return Mono.zip(list, count)\n                .map(tuple -&gt; new PageImpl&lt;&gt;(tuple.getT1(), pageable, tuple.getT2()));\n    }\n}\n\n</code></pre>\n<p>I'm aware of <a href=\"https://github.com/spring-projects/spring-data-r2dbc/issues/371#issuecomment-630081500\" rel=\"nofollow noreferrer\">Oliver Drotbohm's view</a> about <code>Criteria</code> as a store-specific type. Although the Fluent API supports it out of the box.</p>\n<p>In my personal view, adding <code>Criteria</code> to the Reactive Repositories would empower the framework with a new dimension of querying the DB.</p>\n<p>Does it make sense?</p>\n"},{"tags":["java","spring","jsp","bean-validation"],"answers":[{"tags":[],"owner":{"account_id":1038817,"reputation":89,"user_id":1045330,"accept_rate":100,"display_name":"PanBrambor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499941653,"creation_date":1499941653,"answer_id":45077974,"question_id":45048365,"body_markdown":"Consider writing a validator for that form, then you can easily suply any text you require, e.g.\r\n\r\n    private void validatePhone(final String phone, final Errors errors) {\r\n            if (StringUtils.isEmpty(phone)) {\r\n                errors.rejectValue(&quot;phoneNumber&quot;, &quot;error.field.required&quot;);\r\n                return;\r\n            }\r\n            if (isNumber(phone)) {\r\n                validateLength(phone, errors, &quot;phoneNumber&quot;, 9);\r\n            } else {\r\n                errors.rejectValue(&quot;phoneNumber&quot;, &quot;error.only.numbers&quot;);\r\n            }\r\n        }","title":"BindingResult does not get message from .properties file and not showig in jsp","body":"<p>Consider writing a validator for that form, then you can easily suply any text you require, e.g.</p>\n\n<pre><code>private void validatePhone(final String phone, final Errors errors) {\n        if (StringUtils.isEmpty(phone)) {\n            errors.rejectValue(\"phoneNumber\", \"error.field.required\");\n            return;\n        }\n        if (isNumber(phone)) {\n            validateLength(phone, errors, \"phoneNumber\", 9);\n        } else {\n            errors.rejectValue(\"phoneNumber\", \"error.only.numbers\");\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15337987,"reputation":29,"user_id":11065763,"display_name":"Sumit Paswan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660967083,"creation_date":1660967083,"answer_id":73423945,"question_id":45048365,"body_markdown":"I know that I am too late for this answer, but still if in case it helps any person in need.\r\nI can see your file name is little incorrect.\r\n\r\n**Resolution:** I think it will work if you try changing your properties file name to **messages.properties** instead of **message.properties**. just append **&quot;s&quot;**. Thank you :) !!\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/q0Q15.png","title":"BindingResult does not get message from .properties file and not showig in jsp","body":"<p>I know that I am too late for this answer, but still if in case it helps any person in need.\nI can see your file name is little incorrect.</p>\n<p><strong>Resolution:</strong> I think it will work if you try changing your properties file name to <strong>messages.properties</strong> instead of <strong>message.properties</strong>. just append <strong>&quot;s&quot;</strong>. Thank you :) !!</p>\n<p><a href=\"https://i.stack.imgur.com/q0Q15.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q0Q15.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":10846480,"reputation":8784,"user_id":7975771,"accept_rate":12,"display_name":"varman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":811,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660967083,"creation_date":1499833149,"question_id":45048365,"body_markdown":"I use **BindingResult** to validate jsp form, Im using **message.properties** file to set all the validation message. When I print the result, it shows , there are some errors in *console*, but not showing the correct message which is in message.properties file and not even showing errors in jsp file. \r\n\r\nDo I need to include anyannotation in controller class to get data from message.properties ?\r\n\r\n**Configuration**\r\n\r\n    //other annotations\r\n    public class WebConfig extends WebMvcConfigurerAdapter{\r\n    \r\n    //other stuffs\r\n     @Bean\r\n    \tpublic MessageSource messageSource() {\r\n    \t\tResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();\r\n    \t\tmessageSource.setBasename(&quot;messages&quot;);\r\n    \t\treturn messageSource;\r\n    \t}\r\n    }\r\n\r\n**message.properties**\r\n\r\n    Size.companyForm.companyName= size is invalid.\r\n\r\n**Model class**\r\n\r\n    public class Company {\r\n        //other stuffs\r\n        @Size(min=2,max=30)\r\n    \tprivate String companyName;\r\n    }\r\n\r\n**Company controller**\r\n\r\n    @RequestMapping(&quot;/add&quot;)\r\n    \tpublic ModelAndView addCompany(Model modelAttr) {\t\t\r\n    \t\t\r\n    \t\tModelAndView model = new ModelAndView(&quot;addCompanyTiles&quot;);\r\n    \t\tmodel.addObject(&quot;companyForm&quot;, new Company());\r\n    \t\treturn model;\r\n    \t}\r\n    \r\n    \t@RequestMapping(value = &quot;/save&quot;, method = RequestMethod.POST)\r\n    \tpublic ModelAndView saveCompany(@ModelAttribute(&quot;companyForm&quot;) @Valid Company company, BindingResult result) {\r\n    \t\t\r\n    \t\tif(result.hasErrors()){\r\n    \t\t\tSystem.out.println(&quot;Errors : &quot;+result.toString());\r\n    \t\t\treturn new ModelAndView(&quot;redirect:/company/add&quot;);\r\n    \t\t}\r\n    \t\tcompanyService.saveOrUpdate(company);\r\n    \t\treturn new ModelAndView(&quot;redirect:/company/list&quot;);\r\n    \t}\r\n\r\n***Here error showing in console*** when I use *System.out.println(&quot;Errors :&quot;+result.toString());*\r\n\r\n    Field error in object &#39;companyForm&#39; on field &#39;companyName&#39;: rejected value []; codes [Size.companyForm.companyName,Size.companyName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [companyForm.companyName,companyName]; arguments []; default message [companyName],30,2]; default message [size must be between 2 and 30]\r\n\r\n**jsp file**\r\n\r\n \r\n\r\n       &lt;form:form action=&quot;${saveURL} &quot; modelAttribute=&quot;companyForm&quot;&gt;\r\n    \r\n            // For easiness, I deleted other fields and styles\r\n            &lt;form:input path=&quot;companyName&quot;/&gt;\r\n            \t&lt;form:errors path=&quot;companyName&quot; class=&quot;help-inline&quot; /&gt;\r\n        &lt;/form:form&gt;","title":"BindingResult does not get message from .properties file and not showig in jsp","body":"<p>I use <strong>BindingResult</strong> to validate jsp form, Im using <strong>message.properties</strong> file to set all the validation message. When I print the result, it shows , there are some errors in <em>console</em>, but not showing the correct message which is in message.properties file and not even showing errors in jsp file. </p>\n\n<p>Do I need to include anyannotation in controller class to get data from message.properties ?</p>\n\n<p><strong>Configuration</strong></p>\n\n<pre><code>//other annotations\npublic class WebConfig extends WebMvcConfigurerAdapter{\n\n//other stuffs\n @Bean\n    public MessageSource messageSource() {\n        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();\n        messageSource.setBasename(\"messages\");\n        return messageSource;\n    }\n}\n</code></pre>\n\n<p><strong>message.properties</strong></p>\n\n<pre><code>Size.companyForm.companyName= size is invalid.\n</code></pre>\n\n<p><strong>Model class</strong></p>\n\n<pre><code>public class Company {\n    //other stuffs\n    @Size(min=2,max=30)\n    private String companyName;\n}\n</code></pre>\n\n<p><strong>Company controller</strong></p>\n\n<pre><code>@RequestMapping(\"/add\")\n    public ModelAndView addCompany(Model modelAttr) {       \n\n        ModelAndView model = new ModelAndView(\"addCompanyTiles\");\n        model.addObject(\"companyForm\", new Company());\n        return model;\n    }\n\n    @RequestMapping(value = \"/save\", method = RequestMethod.POST)\n    public ModelAndView saveCompany(@ModelAttribute(\"companyForm\") @Valid Company company, BindingResult result) {\n\n        if(result.hasErrors()){\n            System.out.println(\"Errors : \"+result.toString());\n            return new ModelAndView(\"redirect:/company/add\");\n        }\n        companyService.saveOrUpdate(company);\n        return new ModelAndView(\"redirect:/company/list\");\n    }\n</code></pre>\n\n<p><strong><em>Here error showing in console</em></strong> when I use <em>System.out.println(\"Errors :\"+result.toString());</em></p>\n\n<pre><code>Field error in object 'companyForm' on field 'companyName': rejected value []; codes [Size.companyForm.companyName,Size.companyName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [companyForm.companyName,companyName]; arguments []; default message [companyName],30,2]; default message [size must be between 2 and 30]\n</code></pre>\n\n<p><strong>jsp file</strong></p>\n\n<pre><code>   &lt;form:form action=\"${saveURL} \" modelAttribute=\"companyForm\"&gt;\n\n        // For easiness, I deleted other fields and styles\n        &lt;form:input path=\"companyName\"/&gt;\n            &lt;form:errors path=\"companyName\" class=\"help-inline\" /&gt;\n    &lt;/form:form&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","redis","lua"],"comments":[{"owner":{"account_id":7257520,"reputation":3637,"user_id":5535604,"accept_rate":100,"display_name":"Anton"},"score":0,"creation_date":1647957620,"post_id":71571279,"comment_id":126497988,"body_markdown":"Lua script itself is fine and produces expected result if you run it as: `redis-cli evalsha $(cat test.lua | redis-cli -x script load) 2 key1 key2 10 11` so try to check how it is being serialized in Java","body":"Lua script itself is fine and produces expected result if you run it as: <code>redis-cli evalsha $(cat test.lua | redis-cli -x script load) 2 key1 key2 10 11</code> so try to check how it is being serialized in Java"}],"answers":[{"tags":[],"owner":{"account_id":26112491,"reputation":26,"user_id":19806164,"display_name":"M.J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660966727,"creation_date":1660966727,"answer_id":73423924,"question_id":71571279,"body_markdown":"This is my way to resolve the problem.\r\n\r\nbefore:\r\n\r\n    template.setKeySerializer(new StringRedisSerializer());\r\n    template.setValueSerializer(new JdkSerializationRedisSerializer());\r\n    \r\n\r\nafter:\r\n\r\n    template.setKeySerializer(new StringRedisSerializer());\r\n    template.setValueSerializer(new GenericToStringSerializer&lt;&gt;(String.class));\r\n\r\n","title":"RedisTemplate + Lua script: command arguments must be strings or integers","body":"<p>This is my way to resolve the problem.</p>\n<p>before:</p>\n<pre><code>template.setKeySerializer(new StringRedisSerializer());\ntemplate.setValueSerializer(new JdkSerializationRedisSerializer());\n</code></pre>\n<p>after:</p>\n<pre><code>template.setKeySerializer(new StringRedisSerializer());\ntemplate.setValueSerializer(new GenericToStringSerializer&lt;&gt;(String.class));\n</code></pre>\n"}],"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2737,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73423924,"answer_count":1,"score":0,"last_activity_date":1660966727,"creation_date":1647948439,"question_id":71571279,"body_markdown":"I want to atomically insert or update a key, insert this key into an index and, optionally, increment a count. To this end, I wrote the following Lua script. In this script, `KEYS[1]` is the element key, `KEYS[2]` is the index key, `ARGV[1]` is the object stored at `KEYS[1]` and `ARGV[2]` is a score.\r\n\r\n```\r\nif not redis.call(&#39;EXISTS&#39;, KEYS[1]) then\r\n  redis.call(&#39;INCR&#39;, KEYS[2] .. &quot;:num&quot;);\r\nend\r\nredis.call(&#39;SET&#39;, KEYS[1], ARGV[1]);\r\nredis.call(&#39;ZADD&#39;, KEYS[2] .. &quot;:idx&quot;, tonumber(ARGV[2]), KEYS[1]);\r\n```\r\n\r\nTo access Redis, I use a `RedisTemplate&lt;String, Object&gt;` instance which uses `GenericFastJsonRedisSerializer` to serialize values. A small working example:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\r\n        configuration.setHostName(&quot;localhost&quot;);\r\n        configuration.setPort(6379);\r\n        LettuceConnectionFactory connectionFactory = new LettuceConnectionFactory(configuration);\r\n        connectionFactory.afterPropertiesSet();\r\n\r\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\r\n        template.setDefaultSerializer(new GenericFastJsonRedisSerializer());\r\n        template.setDefaultSerializer(new GenericFastJsonRedisSerializer());\r\n        template.setKeySerializer(new StringRedisSerializer());\r\n        template.setValueSerializer(new GenericFastJsonRedisSerializer());\r\n        template.setHashKeySerializer(new GenericFastJsonRedisSerializer());\r\n        template.setHashValueSerializer(new GenericFastJsonRedisSerializer());\r\n        template.setConnectionFactory(connectionFactory);\r\n        template.afterPropertiesSet();\r\n\r\n        RedisScript&lt;Object&gt; script = RedisScript.of(new PathResource(Paths.get(&quot;my-script.lua&quot;))); // &lt;- above script\r\n        template.execute(script, Arrays.asList(&quot;value-key&quot;, &quot;index-key&quot;), new Object(), 1.0);\r\n    }\r\n}\r\n```\r\n\r\nHowever, when I run the Lua script, I get the following error:\r\n\r\n```\r\n@user_script: 14: Lua redis() command arguments must be strings or integers\r\n```\r\n\r\nI suppose, this is because the serializer also serializes the score, so Lua cannot read it as number anymore. Hence, how can I avoid that the serializer is applied to all arguments, and only translating my object to JSON?","title":"RedisTemplate + Lua script: command arguments must be strings or integers","body":"<p>I want to atomically insert or update a key, insert this key into an index and, optionally, increment a count. To this end, I wrote the following Lua script. In this script, <code>KEYS[1]</code> is the element key, <code>KEYS[2]</code> is the index key, <code>ARGV[1]</code> is the object stored at <code>KEYS[1]</code> and <code>ARGV[2]</code> is a score.</p>\n<pre><code>if not redis.call('EXISTS', KEYS[1]) then\n  redis.call('INCR', KEYS[2] .. &quot;:num&quot;);\nend\nredis.call('SET', KEYS[1], ARGV[1]);\nredis.call('ZADD', KEYS[2] .. &quot;:idx&quot;, tonumber(ARGV[2]), KEYS[1]);\n</code></pre>\n<p>To access Redis, I use a <code>RedisTemplate&lt;String, Object&gt;</code> instance which uses <code>GenericFastJsonRedisSerializer</code> to serialize values. A small working example:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\n        configuration.setHostName(&quot;localhost&quot;);\n        configuration.setPort(6379);\n        LettuceConnectionFactory connectionFactory = new LettuceConnectionFactory(configuration);\n        connectionFactory.afterPropertiesSet();\n\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n        template.setDefaultSerializer(new GenericFastJsonRedisSerializer());\n        template.setDefaultSerializer(new GenericFastJsonRedisSerializer());\n        template.setKeySerializer(new StringRedisSerializer());\n        template.setValueSerializer(new GenericFastJsonRedisSerializer());\n        template.setHashKeySerializer(new GenericFastJsonRedisSerializer());\n        template.setHashValueSerializer(new GenericFastJsonRedisSerializer());\n        template.setConnectionFactory(connectionFactory);\n        template.afterPropertiesSet();\n\n        RedisScript&lt;Object&gt; script = RedisScript.of(new PathResource(Paths.get(&quot;my-script.lua&quot;))); // &lt;- above script\n        template.execute(script, Arrays.asList(&quot;value-key&quot;, &quot;index-key&quot;), new Object(), 1.0);\n    }\n}\n</code></pre>\n<p>However, when I run the Lua script, I get the following error:</p>\n<pre><code>@user_script: 14: Lua redis() command arguments must be strings or integers\n</code></pre>\n<p>I suppose, this is because the serializer also serializes the score, so Lua cannot read it as number anymore. Hence, how can I avoid that the serializer is applied to all arguments, and only translating my object to JSON?</p>\n"},{"tags":["java","semaphore","java.util.concurrent","compare-and-swap"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1660902265,"post_id":73414754,"comment_id":129648331,"body_markdown":"Because that&#39;s what it&#39;s replacing, because nobody likes the thundering herd now. Some of us never liked it.","body":"Because that&#39;s what it&#39;s replacing, because nobody likes the thundering herd now. Some of us never liked it."},{"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1660904477,"post_id":73414754,"comment_id":129649034,"body_markdown":"@user207421 could you like explain a bit more since some of us(probably just me) is  novice here","body":"@user207421 could you like explain a bit more since some of us(probably just me) is  novice here"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1660964851,"post_id":73414754,"comment_id":129664306,"body_markdown":"I think he is referring to what happens when you use `notifyAll`.  But it isn&#39;t *apropos* ... because the OP would most likely use `notify` rather than `notifyAll` here.   Anyway, read this for some background: http://javaagile.blogspot.com/2012/12/the-thundering-herd.html","body":"I think he is referring to what happens when you use <code>notifyAll</code>.  But it isn&#39;t <i>apropos</i> ... because the OP would most likely use <code>notify</code> rather than <code>notifyAll</code> here.   Anyway, read this for some background: <a href=\"http://javaagile.blogspot.com/2012/12/the-thundering-herd.html\" rel=\"nofollow noreferrer\">javaagile.blogspot.com/2012/12/the-thundering-herd.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660964687,"creation_date":1660920998,"answer_id":73418659,"question_id":73414754,"body_markdown":"You should read the javadocs for `AbstractQueuedSynchronizer`.\r\n\r\n&gt; Why they decided to do it that way? Is it because of performance? \r\n\r\nI can&#39;t tell you with 100% certainty whether this is about performance.  But it is definitely not *all* about performance.\r\n\r\nYou will have noticed that the `FairSync` and `UnfairSync` classes used by `Semaphore` are based on `AbstractQueuedSynchronizer`.  If you look at the API, you will see that it provides richer functionality than you get with Java primitive locks and `wait` / `notify`.  In particular, you will see that it supports fair (FIFO) queuing for threads waiting for events.  The primitive wait / notify mechanisms don&#39;t provide any guarantees of fairness.  \r\n\r\nFair queuing is a requirement for a `Semaphore` created with `fair` set to `true`.\r\n\r\n&gt; Maybe I should also avoid wait/notify and use CAS in my applications.\r\n\r\nPossibly.  It depends on what your goals are.\r\n\r\nBut if your primary goal is performance, then I would recommend NOT trying to re-implement `java.util.concurrent...` classes.  Just use the existing classes as they are.\r\n\r\nAnd if one of your goals is get good performance, you cannot be afraid of using complicated techniques to implement the concurrency primitives. Or of doing your own performance analysis of different approaches and your own performance measurement.\r\n","title":"Why the Semaphore implementation uses CAS (U.compareAndSetInt) instead of wait/notify?","body":"<p>You should read the javadocs for <code>AbstractQueuedSynchronizer</code>.</p>\n<blockquote>\n<p>Why they decided to do it that way? Is it because of performance?</p>\n</blockquote>\n<p>I can't tell you with 100% certainty whether this is about performance.  But it is definitely not <em>all</em> about performance.</p>\n<p>You will have noticed that the <code>FairSync</code> and <code>UnfairSync</code> classes used by <code>Semaphore</code> are based on <code>AbstractQueuedSynchronizer</code>.  If you look at the API, you will see that it provides richer functionality than you get with Java primitive locks and <code>wait</code> / <code>notify</code>.  In particular, you will see that it supports fair (FIFO) queuing for threads waiting for events.  The primitive wait / notify mechanisms don't provide any guarantees of fairness.</p>\n<p>Fair queuing is a requirement for a <code>Semaphore</code> created with <code>fair</code> set to <code>true</code>.</p>\n<blockquote>\n<p>Maybe I should also avoid wait/notify and use CAS in my applications.</p>\n</blockquote>\n<p>Possibly.  It depends on what your goals are.</p>\n<p>But if your primary goal is performance, then I would recommend NOT trying to re-implement <code>java.util.concurrent...</code> classes.  Just use the existing classes as they are.</p>\n<p>And if one of your goals is get good performance, you cannot be afraid of using complicated techniques to implement the concurrency primitives. Or of doing your own performance analysis of different approaches and your own performance measurement.</p>\n"}],"owner":{"account_id":3200715,"reputation":1110,"user_id":2702805,"accept_rate":80,"display_name":"Iaroslav Baranov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73418659,"answer_count":1,"score":0,"last_activity_date":1660964687,"creation_date":1660901852,"question_id":73414754,"body_markdown":"I&#39;ve decided to implement some clasess from the concurrency package from scratch and implemented Semaphore with wait/notify. It seems very easy and intuitive to do so. When I checked the build in implementation, I saw they complicated it all with CAS (Compare And Swap) technique. They did the same for the ReentranceLock implementation.\r\n\r\nWhy they decided to do it that way? Is it because of performance? Maybe I should also avoid wait/notify and use CAS in my applications.\r\n\r\n```\r\npublic class SemaphoreX {\r\n    private int permits;\r\n\r\n    SemaphoreX(int permits){\r\n        this.permits = permits;\r\n    }\r\n\r\n    public synchronized void acquire() throws InterruptedException{\r\n        while(permits == 0){\r\n            wait();\r\n        }\r\n        permits--;\r\n    }\r\n\r\n    public synchronized void release(){\r\n        permits++;\r\n        notify();\r\n    }\r\n}\r\n```\r\n","title":"Why the Semaphore implementation uses CAS (U.compareAndSetInt) instead of wait/notify?","body":"<p>I've decided to implement some clasess from the concurrency package from scratch and implemented Semaphore with wait/notify. It seems very easy and intuitive to do so. When I checked the build in implementation, I saw they complicated it all with CAS (Compare And Swap) technique. They did the same for the ReentranceLock implementation.</p>\n<p>Why they decided to do it that way? Is it because of performance? Maybe I should also avoid wait/notify and use CAS in my applications.</p>\n<pre><code>public class SemaphoreX {\n    private int permits;\n\n    SemaphoreX(int permits){\n        this.permits = permits;\n    }\n\n    public synchronized void acquire() throws InterruptedException{\n        while(permits == 0){\n            wait();\n        }\n        permits--;\n    }\n\n    public synchronized void release(){\n        permits++;\n        notify();\n    }\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":8900519,"reputation":503,"user_id":6644123,"display_name":"shanfeng"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660963170,"creation_date":1660963170,"answer_id":73423745,"question_id":73423594,"body_markdown":"As the IDEA suggests, which shows clone method of the Queue interface is Object.\r\n```\r\nprotected native Object clone() throws CloneNotSupportedException;\r\n```\r\nWe can not call a protected method from outside.  \r\nBut, we can choose an implementation that overrides the clone method from **protected** to **public**.  \r\nWe can directly follow the IDEA recommended.  \r\nJust change Queue to LinkedList.   \r\n```\r\n// Queue&lt;Character&gt; leftover = new LinkedList&lt;&gt;();\r\nLinkedList&lt;Character&gt; leftover = new LinkedList&lt;&gt;();\r\n```","title":"java linkedlist copy : why my compiler show clone method error?","body":"<p>As the IDEA suggests, which shows clone method of the Queue interface is Object.</p>\n<pre><code>protected native Object clone() throws CloneNotSupportedException;\n</code></pre>\n<p>We can not call a protected method from outside.<br />\nBut, we can choose an implementation that overrides the clone method from <strong>protected</strong> to <strong>public</strong>.<br />\nWe can directly follow the IDEA recommended.<br />\nJust change Queue to LinkedList.</p>\n<pre><code>// Queue&lt;Character&gt; leftover = new LinkedList&lt;&gt;();\nLinkedList&lt;Character&gt; leftover = new LinkedList&lt;&gt;();\n</code></pre>\n"}],"owner":{"account_id":11136281,"reputation":45,"user_id":16369817,"display_name":"acfun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73423745,"answer_count":1,"score":1,"last_activity_date":1660963170,"creation_date":1660960299,"question_id":73423594,"body_markdown":"This is my code, in this line \r\n```\r\n tem_left = (LinkedList) leftover.clone();\r\n```\r\nmy Intellij showed red wave line under .clone() method (BTW, how to discribe this red wave line? hint error?) It says clone() has protected access in Java.lang.Object. This is what I found online that copy a Linkedlist to another one. What did i do wrong and how should I correct it?\r\n```\r\npackage lc_771_Jewels;\r\n\r\nimport java.util.*;\r\n\r\nimport java.util.LinkedList;\r\nimport java.util.Queue;\r\n\r\npublic class Jewels_discuss {\r\n    public int count_jewels(String jewels, String stones){\r\n        char[] jewels_kind = jewels.toCharArray();\r\n        char[] stone_list = stones.toCharArray();\r\n        int count = 0;\r\n        Queue&lt;Character&gt; tem_left = new LinkedList&lt;&gt;();\r\n        for (int i = 0; i &lt; stone_list.length; i++) {\r\n           tem_left.offer(stone_list[i]);\r\n        }\r\n        for (int i = 0; i &lt; jewels_kind.length; i++) {\r\n            Queue&lt;Character&gt; leftover = new LinkedList&lt;&gt;();\r\n            char tem_jewel = jewels_kind[i];\r\n            for (int j = 0; j &lt; tem_left.size(); j++) {\r\n                if (tem_jewel!= stone_list[i]  ){\r\n                    leftover.offer(stone_list[i]) ;\r\n                }\r\n                else {\r\n                    count++;\r\n                }\r\n            }\r\n            tem_left = (LinkedList) leftover.clone();\r\n        }\r\n        return count;\r\n    }\r\n}\r\n```\r\n","title":"java linkedlist copy : why my compiler show clone method error?","body":"<p>This is my code, in this line</p>\n<pre><code> tem_left = (LinkedList) leftover.clone();\n</code></pre>\n<p>my Intellij showed red wave line under .clone() method (BTW, how to discribe this red wave line? hint error?) It says clone() has protected access in Java.lang.Object. This is what I found online that copy a Linkedlist to another one. What did i do wrong and how should I correct it?</p>\n<pre><code>package lc_771_Jewels;\n\nimport java.util.*;\n\nimport java.util.LinkedList;\nimport java.util.Queue;\n\npublic class Jewels_discuss {\n    public int count_jewels(String jewels, String stones){\n        char[] jewels_kind = jewels.toCharArray();\n        char[] stone_list = stones.toCharArray();\n        int count = 0;\n        Queue&lt;Character&gt; tem_left = new LinkedList&lt;&gt;();\n        for (int i = 0; i &lt; stone_list.length; i++) {\n           tem_left.offer(stone_list[i]);\n        }\n        for (int i = 0; i &lt; jewels_kind.length; i++) {\n            Queue&lt;Character&gt; leftover = new LinkedList&lt;&gt;();\n            char tem_jewel = jewels_kind[i];\n            for (int j = 0; j &lt; tem_left.size(); j++) {\n                if (tem_jewel!= stone_list[i]  ){\n                    leftover.offer(stone_list[i]) ;\n                }\n                else {\n                    count++;\n                }\n            }\n            tem_left = (LinkedList) leftover.clone();\n        }\n        return count;\n    }\n}\n</code></pre>\n"},{"tags":["java","junit","mockito","spring-test","spring-annotations"],"owner":{"account_id":23280315,"reputation":11,"user_id":17363861,"display_name":"Mukul Maurya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660962879,"creation_date":1660962879,"question_id":73423731,"body_markdown":"When I was writing test case using the Mockito and Junit, I was using the @InjectMocks for the class to be tested. In other parts of project, I also see @Autowired is being used for the class to be tested.\r\n\r\nWhen can I use @InjectMocks and @Autowired? What is the difference between two when we are trying to use them with class to be tested?","title":"junit , Springboot , java , mockito","body":"<p>When I was writing test case using the Mockito and Junit, I was using the @InjectMocks for the class to be tested. In other parts of project, I also see @Autowired is being used for the class to be tested.</p>\n<p>When can I use @InjectMocks and @Autowired? What is the difference between two when we are trying to use them with class to be tested?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22659175,"reputation":29,"user_id":16832572,"display_name":"MoonLight Fanatic"},"score":0,"creation_date":1660960945,"post_id":73423593,"comment_id":129664015,"body_markdown":"Needless to say, I know I can just run my file manager with Runtime, I just don&#39;t get why this key is being so difficult.","body":"Needless to say, I know I can just run my file manager with Runtime, I just don&#39;t get why this key is being so difficult."},{"owner":{"account_id":20844560,"reputation":774,"user_id":15310387,"display_name":"Mr R"},"score":0,"creation_date":1660967747,"post_id":73423593,"comment_id":129664513,"body_markdown":"This thread - [java bind windows key](https://stackoverflow.com/questions/3456300/java-bind-windows-key) looks like it has an answer ...","body":"This thread - <a href=\"https://stackoverflow.com/questions/3456300/java-bind-windows-key\">java bind windows key</a> looks like it has an answer ..."}],"owner":{"account_id":22659175,"reputation":29,"user_id":16832572,"display_name":"MoonLight Fanatic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660960290,"creation_date":1660960290,"question_id":73423593,"body_markdown":"Out of curiosity, I wanted to press the Windows key + t. In my current Linux configuration that would open my file manager, but the windows key is not registering at all. I&#39;ve tried a bunch of things, like using the ctrl + alt key events but they register correctly and they did not simulate a windows key press (this is because of an answer I found to a similar question). I have also tried it with the keycode 524 to no avail. the t is still shown as being pressed.\r\n```\r\n        Robot robo = new Robot();\r\n\r\n        robo.keyPress(KeyEvent.VK_WINDOWS);\r\n        robo.keyPress(KeyEvent.VK_T);\r\n        robo.keyRelease(KeyEvent.VK_WINDOWS);\r\n        robo.keyRelease(KeyEvent.VK_T);\r\n```\r\ncan anyone tell me exactly what I&#39;m missing?","title":"Java Robot class, windows key is not working on linux","body":"<p>Out of curiosity, I wanted to press the Windows key + t. In my current Linux configuration that would open my file manager, but the windows key is not registering at all. I've tried a bunch of things, like using the ctrl + alt key events but they register correctly and they did not simulate a windows key press (this is because of an answer I found to a similar question). I have also tried it with the keycode 524 to no avail. the t is still shown as being pressed.</p>\n<pre><code>        Robot robo = new Robot();\n\n        robo.keyPress(KeyEvent.VK_WINDOWS);\n        robo.keyPress(KeyEvent.VK_T);\n        robo.keyRelease(KeyEvent.VK_WINDOWS);\n        robo.keyRelease(KeyEvent.VK_T);\n</code></pre>\n<p>can anyone tell me exactly what I'm missing?</p>\n"},{"tags":["java","math"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1444138147,"post_id":32971262,"comment_id":53767348,"body_markdown":"Possible duplicate of [round a floating-point number to the next integer value in java](http://stackoverflow.com/questions/8753959/round-a-floating-point-number-to-the-next-integer-value-in-java)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/8753959/round-a-floating-point-number-to-the-next-integer-value-in-java\">round a floating-point number to the next integer value in java</a>"},{"owner":{"account_id":88112,"reputation":51921,"user_id":243943,"accept_rate":89,"display_name":"npinti"},"score":3,"creation_date":1444138203,"post_id":32971262,"comment_id":53767396,"body_markdown":"Why does `489.5435` get promoted to the next integer value but `2.7657` gets only the integral part evaluated?","body":"Why does <code>489.5435</code> get promoted to the next integer value but <code>2.7657</code> gets only the integral part evaluated?"},{"owner":{"account_id":744762,"reputation":1560,"user_id":720655,"display_name":"pelumi"},"score":0,"creation_date":1444138335,"post_id":32971262,"comment_id":53767475,"body_markdown":"have yuou tried `Math.ceil(double)&#39;?","body":"have yuou tried `Math.ceil(double)&#39;?"},{"owner":{"account_id":4127389,"reputation":2900,"user_id":3386144,"accept_rate":73,"display_name":"TNT"},"score":2,"creation_date":1444138348,"post_id":32971262,"comment_id":53767480,"body_markdown":"By &quot;next straight number&quot; do you mean closest even number?","body":"By &quot;next straight number&quot; do you mean closest even number?"},{"owner":{"account_id":7073260,"reputation":97,"user_id":5414190,"accept_rate":100,"display_name":"Jannis"},"score":1,"creation_date":1444138384,"post_id":32971262,"comment_id":53767504,"body_markdown":"yes, i need an even number (x%y=0).","body":"yes, i need an even number (x%y=0)."},{"owner":{"account_id":7073260,"reputation":97,"user_id":5414190,"accept_rate":100,"display_name":"Jannis"},"score":0,"creation_date":1444138455,"post_id":32971262,"comment_id":53767554,"body_markdown":"sry for my english ;)","body":"sry for my english ;)"}],"answers":[{"tags":[],"owner":{"account_id":7007804,"reputation":505,"user_id":5371658,"display_name":"Parker_Halo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444138517,"creation_date":1444138517,"answer_id":32971414,"question_id":32971262,"body_markdown":"    double foo = 3.7754;\r\n    int nextEven;\r\n    \r\n    if (((int)foo)%2 == 0)\r\n        nextEven = (int)foo;\r\n    else\r\n        nextEven = ((int)foo) + 1;\r\n\r\nwill probably do what you need","title":"How to round a double to closest even number","body":"<pre><code>double foo = 3.7754;\nint nextEven;\n\nif (((int)foo)%2 == 0)\n    nextEven = (int)foo;\nelse\n    nextEven = ((int)foo) + 1;\n</code></pre>\n\n<p>will probably do what you need</p>\n"},{"tags":[],"owner":{"account_id":389881,"reputation":53027,"user_id":749588,"accept_rate":65,"display_name":"Jean Logeart"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1444138893,"creation_date":1444138893,"answer_id":32971549,"question_id":32971262,"body_markdown":"Simply:\r\n\r\n    public static long roundEven(double d) {\r\n        return Math.round(d / 2) * 2;\r\n    }\r\n\r\nGives:\r\n\r\n    System.out.println(roundEven(2.999));  // 2 \r\n    System.out.println(roundEven(3.001));  // 4 ","title":"How to round a double to closest even number","body":"<p>Simply:</p>\n\n<pre><code>public static long roundEven(double d) {\n    return Math.round(d / 2) * 2;\n}\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>System.out.println(roundEven(2.999));  // 2 \nSystem.out.println(roundEven(3.001));  // 4 \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3779570,"reputation":567,"user_id":3139440,"display_name":"Torsten Fehre"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1444139837,"creation_date":1444139837,"answer_id":32971894,"question_id":32971262,"body_markdown":"Try `Math.ceil(...)`\r\n\r\n    int roundToNextEven(double d) {\r\n        int hlp = (int)Math.ceil(d);\r\n        if (hlp%2 == 0)\r\n            return hlp;\r\n        return hlp-1;\r\n    }\r\n\r\nThe idea is that if the next ceiling float is not even, we must round to floor instead of rounding to ceil.\r\n\r\nYou can also use `Math.floor(...)` .. the only difference is that you have to round to ceil (add 1 to the result) if the floor is not even\r\n\r\n    int roundToNextEven(double d) {\r\n        int hlp = (int)Math.floor(d);\r\n        if (hlp%2 == 0)\r\n            return hlp;\r\n        return hlp+1;\r\n    }\r\n","title":"How to round a double to closest even number","body":"<p>Try <code>Math.ceil(...)</code></p>\n\n<pre><code>int roundToNextEven(double d) {\n    int hlp = (int)Math.ceil(d);\n    if (hlp%2 == 0)\n        return hlp;\n    return hlp-1;\n}\n</code></pre>\n\n<p>The idea is that if the next ceiling float is not even, we must round to floor instead of rounding to ceil.</p>\n\n<p>You can also use <code>Math.floor(...)</code> .. the only difference is that you have to round to ceil (add 1 to the result) if the floor is not even</p>\n\n<pre><code>int roundToNextEven(double d) {\n    int hlp = (int)Math.floor(d);\n    if (hlp%2 == 0)\n        return hlp;\n    return hlp+1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5192980,"reputation":157,"user_id":4155324,"display_name":"Moises Conejo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660960126,"creation_date":1660960126,"answer_id":73423584,"question_id":32971262,"body_markdown":"    extension DoubleExt on double {\r\n      ///\r\n      ///round the number to its nearest even integer\r\n      double roundToEven() =&gt; (this / 2).round() * 2;\r\n    }\r\n\r\nthen use like this:\r\n\r\n    28.9.roundToEven() =&gt; 28.0\r\n    25.00448.roundToEven() =&gt; 26.0","title":"How to round a double to closest even number","body":"<pre><code>extension DoubleExt on double {\n  ///\n  ///round the number to its nearest even integer\n  double roundToEven() =&gt; (this / 2).round() * 2;\n}\n</code></pre>\n<p>then use like this:</p>\n<pre><code>28.9.roundToEven() =&gt; 28.0\n25.00448.roundToEven() =&gt; 26.0\n</code></pre>\n"}],"owner":{"account_id":7073260,"reputation":97,"user_id":5414190,"accept_rate":100,"display_name":"Jannis"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6357,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":32971549,"answer_count":4,"score":4,"last_activity_date":1660960126,"creation_date":1444138104,"question_id":32971262,"body_markdown":"I want to round a double value to the next even integer number. e.g.: \r\n\r\n- 489.5435 to 490\r\n- 2.7657 to 2\r\n\r\nI&#39;ve tried `Math.rint()`, but it gives me 489 instead of 490. ","title":"How to round a double to closest even number","body":"<p>I want to round a double value to the next even integer number. e.g.: </p>\n\n<ul>\n<li>489.5435 to 490</li>\n<li>2.7657 to 2</li>\n</ul>\n\n<p>I've tried <code>Math.rint()</code>, but it gives me 489 instead of 490. </p>\n"},{"tags":["java","spring-boot","environment-variables","junit5"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1660835475,"post_id":73405438,"comment_id":129632125,"body_markdown":"Why don&#39;t you use an application.properties file?","body":"Why don&#39;t you use an application.properties file?"}],"answers":[{"tags":[],"owner":{"account_id":18781836,"reputation":26,"user_id":13696313,"display_name":"EfeyoPixel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660959886,"creation_date":1660959886,"answer_id":73423574,"question_id":73405438,"body_markdown":"Try adding your property to this location /src/test/resources/application-test.properties\r\n\r\nAdd an @ActiveProfiles(&quot;test&quot;) annotation on the test class and it should be picked up.\r\nSee screenshot below;\r\n\r\n[You can use a profile specific application-{profile}.properties file][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2NIRn.png","title":"How to get properties from .env file in spring boot test","body":"<p>Try adding your property to this location /src/test/resources/application-test.properties</p>\n<p>Add an @ActiveProfiles(&quot;test&quot;) annotation on the test class and it should be picked up.\nSee screenshot below;</p>\n<p><a href=\"https://i.stack.imgur.com/2NIRn.png\" rel=\"nofollow noreferrer\">You can use a profile specific application-{profile}.properties file</a></p>\n"}],"owner":{"account_id":26099381,"reputation":13,"user_id":19795054,"display_name":"Piculi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":575,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73423574,"answer_count":1,"score":1,"last_activity_date":1660959886,"creation_date":1660835319,"question_id":73405438,"body_markdown":"I am trying to setup tests for my spring-boot application. In regular execution I get some values from .env file that I&#39;ve specified in run configuration and get them like so:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n     @Value(&quot;${jdbc.url}&quot;)\r\n     private String jdbcUrl;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nBut when I try to run the simplest of tests, it fails with the exception :\r\n\r\n&gt; Failed to load ApplicationContext\r\njava.lang.IllegalStateException: Failed to load ApplicationContext........\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jpaConfig&#39;: Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;jdbc.url&#39; in value &quot;${jdbc.url}&quot;\r\n\r\nHow do I load properties from the environment in SpringBootTest?\r\n\r\nHere&#39;s my test:\r\n\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = {App.class})\r\n    public class TestingWebApplicationTest {\r\n\r\n        @Test\r\n        public void contextLoads() {\r\n        }\r\n\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n","title":"How to get properties from .env file in spring boot test","body":"<p>I am trying to setup tests for my spring-boot application. In regular execution I get some values from .env file that I've specified in run configuration and get them like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Value(&quot;${jdbc.url}&quot;)\n private String jdbcUrl;\n</code></pre>\n<p>But when I try to run the simplest of tests, it fails with the exception :</p>\n<blockquote>\n<p>Failed to load ApplicationContext\njava.lang.IllegalStateException: Failed to load ApplicationContext........\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaConfig': Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'jdbc.url' in value &quot;${jdbc.url}&quot;</p>\n</blockquote>\n<p>How do I load properties from the environment in SpringBootTest?</p>\n<p>Here's my test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = {App.class})\npublic class TestingWebApplicationTest {\n\n    @Test\n    public void contextLoads() {\n    }\n\n}\n</code></pre>\n\n"},{"tags":["java","hibernate","jpa","java-ee-8","jpa-annotations"],"comments":[{"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"score":0,"creation_date":1660939902,"post_id":73394106,"comment_id":129660699,"body_markdown":"You should use @JoinColumns with multiple join columns","body":"You should use @JoinColumns with multiple join columns"},{"owner":{"account_id":8018579,"reputation":1,"user_id":7008913,"display_name":"ALEJANDRO HERNANDEZ"},"score":0,"creation_date":1660947594,"post_id":73394106,"comment_id":129662323,"body_markdown":"yes one of the must be the @id, but I could refer the fk from the othe table, what i do its duplicate the column &quot;ID_TEMPLATE_DEFAULT&quot; with the type of  the  pk of these table,  and put insertale and updatable with false, but i think there are a better solution","body":"yes one of the must be the @id, but I could refer the fk from the othe table, what i do its duplicate the column &quot;ID_TEMPLATE_DEFAULT&quot; with the type of  the  pk of these table,  and put insertale and updatable with false, but i think there are a better solution"}],"answers":[{"tags":[],"owner":{"account_id":1707584,"reputation":3186,"user_id":1566345,"display_name":"Brian Vosburgh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660958125,"creation_date":1660958125,"answer_id":73423496,"question_id":73394106,"body_markdown":"You can use a derived identity and map `CurTemplate` like this:\r\n```\r\n@Entity\r\n@Table(name = &quot;CUR_TEMPLATE&quot;)\r\n@IdClass(CurTemplatePK.class)\r\n@Getter\r\n@Setter\r\npublic class CurTemplate {\r\n\r\n\t@Id\r\n\t@Column(name = &quot;ID_TEMPLATE&quot;, nullable = false)\r\n\tprivate Long idTemplate;\r\n\r\n\t@Id\r\n\t@ManyToOne(optional = false, fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;ID_REPORT&quot;, foreignKey = @ForeignKey(name = &quot;FK_CUR_PLAN_REFERENCE_CUR_REPO&quot;), referencedColumnName = &quot;ID_REPORT&quot;, insertable = false, updatable = false)\r\n\tprivate CurReport curReport;\r\n\r\n}\r\n```\r\nThen you will need an `@IdClass` like this:\r\n```\r\npublic class CurTemplatePK {\r\n\tLong idTemplate; // matches name of @Id attribute\r\n\tLong curReport; // matches name of @Id attribute and type of CurReport PK\r\n}\r\n```\r\nThen you should use a basic mapping for the default template key and provide a getter for the default template object:\r\n```\r\n@Entity\r\n@Table(name = &quot;CUR_REPORTS&quot;)\r\n@IdClass(CurPlantillaPK.class)\r\n@Getter\r\n@Setter\r\npublic class CurReport {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;ID_REPORT&quot;, nullable = false)\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;NAME_REPORT&quot;, nullable = false, length = 100)\r\n\tprivate String nombreReporte;\r\n\r\n\t@Column(name = &quot;ID_TEMPLATE_DEFAULT&quot;)\r\n\tprivate Long idDefaultTemplate;\r\n\r\n\t@OneToMany(mappedBy = &quot;curReport&quot;)\r\n\tprivate Set&lt;CurTemplate&gt; curTemplates= new LinkedHashSet&lt;&gt;();\r\n\r\n\tpublic CurTemplate getDefaultTemplate() {\r\n\t\treturn this.curTemplates.stream()\r\n\t\t\t\t.filter(template -&gt; template.getIdTemplate().equals(idDefaultTemplate))\r\n\t\t\t\t.findFirst()\r\n\t\t\t\t.orElse(null);\r\n\t{\r\n}\r\n```\r\nIf you want to allow clients to set the default template, you will need to implement a setter that first verifies that the new default template is already in the set `curTemplates`.\r\n","title":"JPA Join Tables with two fields, one of them a primary key","body":"<p>You can use a derived identity and map <code>CurTemplate</code> like this:</p>\n<pre><code>@Entity\n@Table(name = &quot;CUR_TEMPLATE&quot;)\n@IdClass(CurTemplatePK.class)\n@Getter\n@Setter\npublic class CurTemplate {\n\n    @Id\n    @Column(name = &quot;ID_TEMPLATE&quot;, nullable = false)\n    private Long idTemplate;\n\n    @Id\n    @ManyToOne(optional = false, fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;ID_REPORT&quot;, foreignKey = @ForeignKey(name = &quot;FK_CUR_PLAN_REFERENCE_CUR_REPO&quot;), referencedColumnName = &quot;ID_REPORT&quot;, insertable = false, updatable = false)\n    private CurReport curReport;\n\n}\n</code></pre>\n<p>Then you will need an <code>@IdClass</code> like this:</p>\n<pre><code>public class CurTemplatePK {\n    Long idTemplate; // matches name of @Id attribute\n    Long curReport; // matches name of @Id attribute and type of CurReport PK\n}\n</code></pre>\n<p>Then you should use a basic mapping for the default template key and provide a getter for the default template object:</p>\n<pre><code>@Entity\n@Table(name = &quot;CUR_REPORTS&quot;)\n@IdClass(CurPlantillaPK.class)\n@Getter\n@Setter\npublic class CurReport {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID_REPORT&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;NAME_REPORT&quot;, nullable = false, length = 100)\n    private String nombreReporte;\n\n    @Column(name = &quot;ID_TEMPLATE_DEFAULT&quot;)\n    private Long idDefaultTemplate;\n\n    @OneToMany(mappedBy = &quot;curReport&quot;)\n    private Set&lt;CurTemplate&gt; curTemplates= new LinkedHashSet&lt;&gt;();\n\n    public CurTemplate getDefaultTemplate() {\n        return this.curTemplates.stream()\n                .filter(template -&gt; template.getIdTemplate().equals(idDefaultTemplate))\n                .findFirst()\n                .orElse(null);\n    {\n}\n</code></pre>\n<p>If you want to allow clients to set the default template, you will need to implement a setter that first verifies that the new default template is already in the set <code>curTemplates</code>.</p>\n"}],"owner":{"account_id":8018579,"reputation":1,"user_id":7008913,"display_name":"ALEJANDRO HERNANDEZ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660958125,"creation_date":1660765357,"question_id":73394106,"body_markdown":"the problems is when @ManyToOne  make a @Joincolumn ID_REPORT (it&#180;s a primary key ) and   @Joincolumn ID_TEMPLATE_DEFAULT\r\n\r\n&gt; Repeated column in mapping for entity: CurReport column: id_report (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)\r\n\r\n**Code**\r\n\r\n***First table CUR_TEMPLATE***\r\n```\r\nCREATE TABLE CUR_TEMPLATE \r\n   (\t\r\n    ID_REPORT NUMBER(5,0) NOT NULL, \r\n\tID_TEMPLATE NUMBER(5,0) NOT NULL, \r\n\t-- Other fields\r\n   );\r\n \r\nALTER TABLE CUR_TEMPLATE ADD CONSTRAINT PK_CUR_TEMPLATE PRIMARY KEY (ID_REPORT, ID_TEMPLATE)\r\n\r\n-- CUR_TEMPLATE foreign keys\r\nALTER TABLE CUR_TEMPLATE ADD CONSTRAINT FK_CUR_PLAN_REFERENCE_CUR_REPO FOREIGN KEY (ID_REPORT)\r\n\t  REFERENCES CUR_REPORTS (ID_REPORT);\r\n```\r\n\r\n***Second table CUR_REPORTS***\r\n```\r\n\r\n-- CUR_REPORTS definition\r\nCREATE TABLE CUR_REPORTS \r\n   (\t\r\n    ID_REPORT NUMBER(3,0) NOT NULL, \r\n\tNAME_REPORT VARCHAR2(100) NOT NULL, \r\n\t-- other fields \r\n\tID_TEMPLATE_DEFAULT NUMBER(5,0), \r\n\t-- other fields\r\n   ) ;\r\n\r\nALTER TABLE CUR_REPORTS ADD CONSTRAINT PK_CUR_REPORTS PRIMARY KEY (ID_REPORT)\r\n\r\nALTER TABLE CUR_REPORTS CONSTRAINT FK_CUR_REPO_REFERENCE_CUR_PLAN FOREIGN KEY (ID_REPORT, ID_TEMPLATE_DEFAULT)\r\n\t  REFERENCES CUR_TEMPLATE (ID_REPORT, ID_TEMPLATE) \r\n\r\n```\r\n\r\n***First table CUR_REPORTS Entity CurReport***\r\n\r\n```\r\n\r\n@Entity\r\n@Table(name = &quot;CUR_REPORTS&quot;)\r\n@IdClass(CurPlantillaPK.class)\r\n@Getter\r\n@Setter\r\npublic class CurReport {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;ID_REPORT&quot;, nullable = false)\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;NAME_REPORT&quot;, nullable = false, length = 100)\r\n\tprivate String nombreReporte;\r\n\r\n\t@ManyToOne(fetch = FetchType.LAZY) &lt;---WHERE IS THE PROBLEM \r\n\t@JoinColumn(name = &quot;ID_REPORT&quot;, referencedColumnName = &quot;ID_REPORTE&quot;)\r\n\t@JoinColumn(name = &quot;ID_TEMPLATE_DEFAULT&quot;, referencedColumnName = &quot;ID_TEMPLATE&quot;)\r\n\tprivate CurTemplate curTemplate;\r\n\r\n\t@OneToMany(mappedBy = &quot;curReport&quot;)\r\n\tprivate Set&lt;CurTemplate&gt; curTemplates= new LinkedHashSet&lt;&gt;();\r\n}\r\n\r\n```\r\n\r\n***Second table CUR_TEMPLATE Entity CurReport***\r\n\r\n```\r\n\r\n@Entity\r\n@Table(name = &quot;CUR_TEMPLATE&quot;)\r\n@IdClass(CurPlantillaPK.class)\r\n@Getter\r\n@Setter\r\npublic class CurTemplate {\r\n\t\r\n\t@Id\r\n\t@Column(name = &quot;ID_REPORT&quot;, nullable = false)\r\n\tprivate Long idReport;\r\n\r\n\t@Id\r\n\t@Column(name = &quot;ID_TEMPLATE&quot;, nullable = false)\r\n\tprivate Long idTemplate;\r\n\r\n\t\r\n\t@ManyToOne(optional = false, fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;ID_REPORT&quot;, foreignKey = @ForeignKey(name = &quot;FK_CUR_PLAN_REFERENCE_CUR_REPO&quot;), referencedColumnName = &quot;ID_REPORT&quot;, insertable = false, updatable = false)\r\n\tprivate CurReport curReport;\r\n\r\n}\r\n```\r\n\r\n\r\nWhen i add  insertable=false, updatable=false\r\n\r\n&gt; @JoinColumn(name = &quot;ID_REPORT&quot;, referencedColumnName = &quot;ID_REPORT&quot;, insertable=false, updatable=false)\r\n\r\nsaid \r\n\r\n&gt; Mixing insertable and non insertable columns in a property is not allowed: CurTemplate\r\n\r\n\r\n\r\nHow could i map those relationships? \r\nHow resolve the @JoinColumn when one field of the FK are column PK?","title":"JPA Join Tables with two fields, one of them a primary key","body":"<p>the problems is when @ManyToOne  make a @Joincolumn ID_REPORT (it´s a primary key ) and   @Joincolumn ID_TEMPLATE_DEFAULT</p>\n<blockquote>\n<p>Repeated column in mapping for entity: CurReport column: id_report (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)</p>\n</blockquote>\n<p><strong>Code</strong></p>\n<p><em><strong>First table CUR_TEMPLATE</strong></em></p>\n<pre><code>CREATE TABLE CUR_TEMPLATE \n   (    \n    ID_REPORT NUMBER(5,0) NOT NULL, \n    ID_TEMPLATE NUMBER(5,0) NOT NULL, \n    -- Other fields\n   );\n \nALTER TABLE CUR_TEMPLATE ADD CONSTRAINT PK_CUR_TEMPLATE PRIMARY KEY (ID_REPORT, ID_TEMPLATE)\n\n-- CUR_TEMPLATE foreign keys\nALTER TABLE CUR_TEMPLATE ADD CONSTRAINT FK_CUR_PLAN_REFERENCE_CUR_REPO FOREIGN KEY (ID_REPORT)\n      REFERENCES CUR_REPORTS (ID_REPORT);\n</code></pre>\n<p><em><strong>Second table CUR_REPORTS</strong></em></p>\n<pre><code>\n-- CUR_REPORTS definition\nCREATE TABLE CUR_REPORTS \n   (    \n    ID_REPORT NUMBER(3,0) NOT NULL, \n    NAME_REPORT VARCHAR2(100) NOT NULL, \n    -- other fields \n    ID_TEMPLATE_DEFAULT NUMBER(5,0), \n    -- other fields\n   ) ;\n\nALTER TABLE CUR_REPORTS ADD CONSTRAINT PK_CUR_REPORTS PRIMARY KEY (ID_REPORT)\n\nALTER TABLE CUR_REPORTS CONSTRAINT FK_CUR_REPO_REFERENCE_CUR_PLAN FOREIGN KEY (ID_REPORT, ID_TEMPLATE_DEFAULT)\n      REFERENCES CUR_TEMPLATE (ID_REPORT, ID_TEMPLATE) \n\n</code></pre>\n<p><em><strong>First table CUR_REPORTS Entity CurReport</strong></em></p>\n<pre><code>\n@Entity\n@Table(name = &quot;CUR_REPORTS&quot;)\n@IdClass(CurPlantillaPK.class)\n@Getter\n@Setter\npublic class CurReport {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID_REPORT&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;NAME_REPORT&quot;, nullable = false, length = 100)\n    private String nombreReporte;\n\n    @ManyToOne(fetch = FetchType.LAZY) &lt;---WHERE IS THE PROBLEM \n    @JoinColumn(name = &quot;ID_REPORT&quot;, referencedColumnName = &quot;ID_REPORTE&quot;)\n    @JoinColumn(name = &quot;ID_TEMPLATE_DEFAULT&quot;, referencedColumnName = &quot;ID_TEMPLATE&quot;)\n    private CurTemplate curTemplate;\n\n    @OneToMany(mappedBy = &quot;curReport&quot;)\n    private Set&lt;CurTemplate&gt; curTemplates= new LinkedHashSet&lt;&gt;();\n}\n\n</code></pre>\n<p><em><strong>Second table CUR_TEMPLATE Entity CurReport</strong></em></p>\n<pre><code>\n@Entity\n@Table(name = &quot;CUR_TEMPLATE&quot;)\n@IdClass(CurPlantillaPK.class)\n@Getter\n@Setter\npublic class CurTemplate {\n    \n    @Id\n    @Column(name = &quot;ID_REPORT&quot;, nullable = false)\n    private Long idReport;\n\n    @Id\n    @Column(name = &quot;ID_TEMPLATE&quot;, nullable = false)\n    private Long idTemplate;\n\n    \n    @ManyToOne(optional = false, fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;ID_REPORT&quot;, foreignKey = @ForeignKey(name = &quot;FK_CUR_PLAN_REFERENCE_CUR_REPO&quot;), referencedColumnName = &quot;ID_REPORT&quot;, insertable = false, updatable = false)\n    private CurReport curReport;\n\n}\n</code></pre>\n<p>When i add  insertable=false, updatable=false</p>\n<blockquote>\n<p>@JoinColumn(name = &quot;ID_REPORT&quot;, referencedColumnName = &quot;ID_REPORT&quot;, insertable=false, updatable=false)</p>\n</blockquote>\n<p>said</p>\n<blockquote>\n<p>Mixing insertable and non insertable columns in a property is not allowed: CurTemplate</p>\n</blockquote>\n<p>How could i map those relationships?\nHow resolve the @JoinColumn when one field of the FK are column PK?</p>\n"},{"tags":["java","minecraft-fabric"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1655824657,"post_id":72703245,"comment_id":128420615,"body_markdown":"Can you try running `./gradlew -v`?","body":"Can you try running <code>.&#47;gradlew -v</code>?"},{"owner":{"account_id":25368982,"reputation":1,"user_id":19183125,"display_name":"cookies"},"score":0,"creation_date":1655824841,"post_id":72703245,"comment_id":128420679,"body_markdown":"```------------------------------------------------------------\nGradle 7.4\n------------------------------------------------------------\n\nBuild time:   2022-02-08 09:58:38 UTC\nRevision:     f0d9291c04b90b59445041eaa75b2ee744162586\n\nKotlin:       1.5.31\nGroovy:       3.0.9\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          1.8.0_332 (Temurin 25.332-b09)\nOS:           Windows 10 10.0 amd64\n```","body":"<code>------------------------------------------------------------ Gradle 7.4 ------------------------------------------------------------  Build time:   2022-02-08 09:58:38 UTC Revision:     f0d9291c04b90b59445041eaa75b2ee744162586  Kotlin:       1.5.31 Groovy:       3.0.9 Ant:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021 JVM:          1.8.0_332 (Temurin 25.332-b09) OS:           Windows 10 10.0 amd64 </code>"},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1655825220,"post_id":72703245,"comment_id":128420825,"body_markdown":"Update `JAVA_HOME` to point to JDK 17 https://docs.oracle.com/cd/E19182-01/821-0917/inst_jdk_javahome_t/index.html","body":"Update <code>JAVA_HOME</code> to point to JDK 17 <a href=\"https://docs.oracle.com/cd/E19182-01/821-0917/inst_jdk_javahome_t/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19182-01/821-0917/inst_jdk_javahome_t/&hellip;</a>"}],"owner":{"account_id":25368982,"reputation":1,"user_id":19183125,"display_name":"cookies"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660957258,"creation_date":1655824373,"question_id":72703245,"body_markdown":"I have an exception when I write ```./gradlew genSource``` in terminal.\r\n```FAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nBuild file &#39;C:\\Users\\Admin\\Desktop\\fabric-example-mod-1.19\\build.gradle&#39; line: 2\r\n\r\n* What went wrong:\r\nAn exception occurred applying plugin request [id: &#39;fabric-loom&#39;, version: &#39;0.12-SNAPSHOT&#39;]\r\n&gt; Failed to apply plugin &#39;fabric-loom&#39;.\r\n   &gt; You are using an outdated version of Java (8). Java 17 or higher is required.\r\n     The JAVA_HOME environment variable is currently set to (C:\\Program Files\\Eclipse Adoptium\\jdk-8.0.332.9-hotspot\\).\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 2s\r\n```\r\nI saw my version of Java is old, but when I go to *File | Settings | Build, Execution, Deployment | Build Tools | Gradle* and change the Gradle JVM to ProjectSDK and try again, nothing changes.\r\n\r\n![this setting][1]\r\n\r\nJava 17 was downloaded and my Gradle was successfully build. Version of fabric for Minecraft is 1.19.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TxFPc.png","title":"./gradle genSources exception with Java version","body":"<p>I have an exception when I write <code>./gradlew genSource</code> in terminal.</p>\n<pre><code>\n* Where:\nBuild file 'C:\\Users\\Admin\\Desktop\\fabric-example-mod-1.19\\build.gradle' line: 2\n\n* What went wrong:\nAn exception occurred applying plugin request [id: 'fabric-loom', version: '0.12-SNAPSHOT']\n&gt; Failed to apply plugin 'fabric-loom'.\n   &gt; You are using an outdated version of Java (8). Java 17 or higher is required.\n     The JAVA_HOME environment variable is currently set to (C:\\Program Files\\Eclipse Adoptium\\jdk-8.0.332.9-hotspot\\).\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 2s\n</code></pre>\n<p>I saw my version of Java is old, but when I go to <em>File | Settings | Build, Execution, Deployment | Build Tools | Gradle</em> and change the Gradle JVM to ProjectSDK and try again, nothing changes.</p>\n<p><img src=\"https://i.stack.imgur.com/TxFPc.png\" alt=\"this setting\" /></p>\n<p>Java 17 was downloaded and my Gradle was successfully build. Version of fabric for Minecraft is 1.19.</p>\n"},{"tags":["java","timestamp","java-time","rfc3339","offsetdatetime"],"comments":[{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":4,"creation_date":1659965146,"post_id":73277975,"comment_id":129413437,"body_markdown":"LocalDateTime uses the ISO-8601 model.  Although RFC-3339 is largely identical, this is one of the disparities between them.  Specifically, a negative zero offset is not allowed under ISO-8601.  My guess is that Java is making a good faith effort to translate this and makes +00:00 instead (i.e. Z).  You may need a custom class to handle this format.","body":"LocalDateTime uses the ISO-8601 model.  Although RFC-3339 is largely identical, this is one of the disparities between them.  Specifically, a negative zero offset is not allowed under ISO-8601.  My guess is that Java is making a good faith effort to translate this and makes +00:00 instead (i.e. Z).  You may need a custom class to handle this format."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1660103037,"post_id":73277975,"comment_id":129450942,"body_markdown":"java.time handles a UTC offset as a count of seconds within +/- 18 hours so does not distinguish -0 from +0 (and renders 0 as `Z` as you have observed) and hence also does not support an unknown offset. Before parsing you may want an `if`-`else` construct with a condition like `timeStamp.matches(&quot;.*-[0:]+&quot;)` to filter out the timestamps that have an offset of minus 0, that is, unknown in RFC 3339. (I&#39;m unsure about RFC 3339, but `OffsetDateTime.parse(CharSequence)` also accepts `-00:00:00` as an offset, and future releases may accept even more forms.)","body":"java.time handles a UTC offset as a count of seconds within +/- 18 hours so does not distinguish -0 from +0 (and renders 0 as <code>Z</code> as you have observed) and hence also does not support an unknown offset. Before parsing you may want an <code>if</code>-<code>else</code> construct with a condition like <code>timeStamp.matches(&quot;.*-[0:]+&quot;)</code> to filter out the timestamps that have an offset of minus 0, that is, unknown in RFC 3339. (I&#39;m unsure about RFC 3339, but <code>OffsetDateTime.parse(CharSequence)</code> also accepts <code>-00:00:00</code> as an offset, and future releases may accept even more forms.)"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660957120,"creation_date":1659967162,"answer_id":73279091,"question_id":73277975,"body_markdown":"# tl;dr\r\n\r\n    LocalDateTime\r\n    .parse( \r\n        &quot;1970-01-01T00:00:00.0000-00:00&quot;\r\n        .replace( &quot;-00:00&quot; , &quot;&quot; )\r\n    )\r\n\r\n\r\n# Avoid RFC 3339\r\n\r\n[RFC 3339][1] is a self-proclaimed “profile” of the [ISO 8601][2] standard. Unfortunately, RFC 3339 defines some unwise violations of that standard.\r\n\r\nOne of these violations is allowing an offset from UTC of *negative* zero hours-minutes-seconds. In contrast, ISO 8601 wisely forbids such a negative zero. \r\n\r\nIn the RFC the meaning of a negative zero offset is that the true offset is unknown. To quote the RFC:\r\n\r\n&gt; 4.3. Unknown Local Offset Convention\r\n&gt;\r\n&gt;If the time in UTC is known, but the offset to local time is unknown, this can be represented with an offset of &quot;-00:00&quot;.  This differs semantically from an offset of &quot;Z&quot; or &quot;+00:00&quot;, which imply that UTC is the preferred reference point for the specified time.  [RFC2822 \\[IMAIL-UPDATE\\]][3] describes a similar convention for email.\r\n\r\nIn contrast, in ISO 8601 an unknown offset is simply omitted. Omission seems a much smarter course.\r\n\r\nI suggest you educate the publisher of your data about the poor decisions employed in RFC 3339, and recommend they stick to ISO 8601 definitions.\r\n\r\n## `LocalDateTime` class\r\n\r\nIf you must parse strings with the negative zero offset, I suggest you perform simple string manipulation to strip it. Replace the `-00:00` with empty string. Then parse as a `LocalDateTime` which purposely lacks the context of a time zone or offset. A `LocalDateTime` is simply a date with a time-of-day, nothing more.\r\n\r\n    String input = &quot;1970-01-01T00:00:00.0000-00:00&quot; ;\r\n    String modified = input.replace( &quot;-00:00&quot; , &quot;&quot; ) ;\r\n    LocalDateTime ldt = LocalDateTime.parse( modified ) ;\r\n\r\nYou asked:\r\n\r\n&gt; Is there a way to keep the unkown local offset convetion, ideally with OffsetDateTime?\r\n\r\nUsing `OffsetDateTime` here makes no sense. That class represents a date and time as seen with with a particular offset. But you don’t know the intended offset. So **you have only two of the three pieces** required by `OffsetDateTime`. \r\n\r\nInstead, `LocalDateTime` fits your need to represent a date and time without the context of an offset or time zone.\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc3339.html\r\n  [2]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [3]: https://www.rfc-editor.org/rfc/rfc2822","title":"How to keep unknown local offset when converting from RFC3339?","body":"<h1>tl;dr</h1>\n<pre><code>LocalDateTime\n.parse( \n    &quot;1970-01-01T00:00:00.0000-00:00&quot;\n    .replace( &quot;-00:00&quot; , &quot;&quot; )\n)\n</code></pre>\n<h1>Avoid RFC 3339</h1>\n<p><a href=\"https://www.rfc-editor.org/rfc/rfc3339.html\" rel=\"nofollow noreferrer\">RFC 3339</a> is a self-proclaimed “profile” of the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard. Unfortunately, RFC 3339 defines some unwise violations of that standard.</p>\n<p>One of these violations is allowing an offset from UTC of <em>negative</em> zero hours-minutes-seconds. In contrast, ISO 8601 wisely forbids such a negative zero.</p>\n<p>In the RFC the meaning of a negative zero offset is that the true offset is unknown. To quote the RFC:</p>\n<blockquote>\n<p>4.3. Unknown Local Offset Convention</p>\n<p>If the time in UTC is known, but the offset to local time is unknown, this can be represented with an offset of &quot;-00:00&quot;.  This differs semantically from an offset of &quot;Z&quot; or &quot;+00:00&quot;, which imply that UTC is the preferred reference point for the specified time.  <a href=\"https://www.rfc-editor.org/rfc/rfc2822\" rel=\"nofollow noreferrer\">RFC2822 [IMAIL-UPDATE]</a> describes a similar convention for email.</p>\n</blockquote>\n<p>In contrast, in ISO 8601 an unknown offset is simply omitted. Omission seems a much smarter course.</p>\n<p>I suggest you educate the publisher of your data about the poor decisions employed in RFC 3339, and recommend they stick to ISO 8601 definitions.</p>\n<h2><code>LocalDateTime</code> class</h2>\n<p>If you must parse strings with the negative zero offset, I suggest you perform simple string manipulation to strip it. Replace the <code>-00:00</code> with empty string. Then parse as a <code>LocalDateTime</code> which purposely lacks the context of a time zone or offset. A <code>LocalDateTime</code> is simply a date with a time-of-day, nothing more.</p>\n<pre><code>String input = &quot;1970-01-01T00:00:00.0000-00:00&quot; ;\nString modified = input.replace( &quot;-00:00&quot; , &quot;&quot; ) ;\nLocalDateTime ldt = LocalDateTime.parse( modified ) ;\n</code></pre>\n<p>You asked:</p>\n<blockquote>\n<p>Is there a way to keep the unkown local offset convetion, ideally with OffsetDateTime?</p>\n</blockquote>\n<p>Using <code>OffsetDateTime</code> here makes no sense. That class represents a date and time as seen with with a particular offset. But you don’t know the intended offset. So <strong>you have only two of the three pieces</strong> required by <code>OffsetDateTime</code>.</p>\n<p>Instead, <code>LocalDateTime</code> fits your need to represent a date and time without the context of an offset or time zone.</p>\n"}],"owner":{"account_id":15232197,"reputation":49,"user_id":10991012,"display_name":"Nico"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":380,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1660957120,"creation_date":1659962079,"question_id":73277975,"body_markdown":"I recieve a timestamp that follows the RFC3339 standard. The sender used the &quot;Unknown Local Offset Convention&quot; provided by RFC3339 as the users time preference is unkown, so I recieve a timestamp like `1970-01-01T00:00:00.0000-00:00` and I need to preserve the `-00:00` information. I am currenlty parsing the recieved timestamp with \r\n\r\n```\r\nLocalDateTime localTimeStamp = LocalDateTime.parse(timeStamp, DateTimeFormatter.ISO_LOCAL_DATE_TIME);\r\nOffsetDateTime.of(localTimeStamp, ZoneOffset.of(&quot;-00:00&quot;))\r\n```\r\n\r\n but this replaces the `-00:00` with `Z`. Is there a way to keep the unkown local offset convetion, ideally with `OffsetDateTime`?","title":"How to keep unknown local offset when converting from RFC3339?","body":"<p>I recieve a timestamp that follows the RFC3339 standard. The sender used the &quot;Unknown Local Offset Convention&quot; provided by RFC3339 as the users time preference is unkown, so I recieve a timestamp like <code>1970-01-01T00:00:00.0000-00:00</code> and I need to preserve the <code>-00:00</code> information. I am currenlty parsing the recieved timestamp with</p>\n<pre><code>LocalDateTime localTimeStamp = LocalDateTime.parse(timeStamp, DateTimeFormatter.ISO_LOCAL_DATE_TIME);\nOffsetDateTime.of(localTimeStamp, ZoneOffset.of(&quot;-00:00&quot;))\n</code></pre>\n<p>but this replaces the <code>-00:00</code> with <code>Z</code>. Is there a way to keep the unkown local offset convetion, ideally with <code>OffsetDateTime</code>?</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-dataflow","apache-beam"],"answers":[{"tags":[],"owner":{"account_id":5974726,"reputation":1921,"user_id":4696015,"display_name":"chamikara"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660956084,"creation_date":1660956084,"answer_id":73423412,"question_id":73408957,"body_markdown":"You are trying to use the `SpannerIO.readChangeStream()` transform which uses a feature (bundle finalization) that is only supported by Dataflow Runner v2. Please add following pipeline option to make your pipeline run using Dataflow Runner v2.\r\n\r\n    --experiments=use_runner_v2\r\n\r\nPlease see [here][1] for more details.\r\n\r\n\r\n  [1]: https://cloud.google.com/dataflow/docs/guides/deploying-a-pipeline#dataflow-runner-v2","title":"Dataflow Job Fails stating, java.lang.UnsupportedOperationException: BundleFinalizer unsupported by non-portable Dataflow","body":"<p>You are trying to use the <code>SpannerIO.readChangeStream()</code> transform which uses a feature (bundle finalization) that is only supported by Dataflow Runner v2. Please add following pipeline option to make your pipeline run using Dataflow Runner v2.</p>\n<pre><code>--experiments=use_runner_v2\n</code></pre>\n<p>Please see <a href=\"https://cloud.google.com/dataflow/docs/guides/deploying-a-pipeline#dataflow-runner-v2\" rel=\"nofollow noreferrer\">here</a> for more details.</p>\n"}],"owner":{"account_id":14428183,"reputation":137,"user_id":10422248,"display_name":"Sabari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":545,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73423412,"answer_count":1,"score":1,"last_activity_date":1660956084,"creation_date":1660853914,"question_id":73408957,"body_markdown":"We are running a simple Data Flow Job that reads data from a Spanner DB and just displays the Changed Record&#39;s Mod Type. When we deploy the Job in Dataflow it always fails stating, the below error,\r\n\r\n&gt; Error message from worker: java.lang.UnsupportedOperationException: BundleFinalizer unsupported by non-portable Dataflow.\\n        org.apache.beam.runners.dataflow.worker.SplittableProcessFnFactory$SplittableDoFnRunnerFactory.lambda$createRunner$2(SplittableProcessFnFactory.java:172)\\n        org.apache.beam.runners.dataflow.worker.repackaged.org.apache.beam.runners.core.OutputAndTimeBoundedSplittableProcessElementInvoker$1.bundleFinalizer(OutputAndTimeBoundedSplittableProcessElementInvoker.java:206)\\n        org.apache.beam.sdk.io.gcp.spanner.changestreams.dofn.ReadChangeStreamPartitionDoFn$DoFnInvoker.invokeProcessElement(Unknown Source)\\n        org.apache.beam.runners.dataflow.worker.repackaged.org.apache.beam.runners.core.OutputAndTimeBoundedSplittableProcessElementInvoker.invokeProcessElement(OutputAndTimeBoundedSplittableProcessElementInvoker.java:125)\\n        org.apache.beam.runners.dataflow.worker.repackaged.org.apache.beam.runners.core.SplittableParDoViaKeyedWorkItems$ProcessFn.processElement(SplittableParDoViaKeyedWorkItems.java:567)\r\n\r\nBelow is the source code,\r\n\r\n```\r\n\tpublic static void main(String[] args) {\r\n\t\tPipelineOptions pipelineOptions = PipelineOptionsFactory.fromArgs(args).withValidation().create();\r\n\t\tPipeline pipeline = Pipeline.create(pipelineOptions);\r\n\t\tSpannerConfig spannerConfig = SpannerConfig.create().withProjectId(&quot;prj-test-1234&quot;)\r\n\t\t\t\t.withInstanceId(&quot;dbinstance1&quot;).withDatabaseId(&quot;dbtestnew&quot;);\r\n\r\n\t\tPCollection&lt;String&gt; changeRecord = pipeline\r\n\t\t\t\t.apply(SpannerIO.readChangeStream().withSpannerConfig(spannerConfig)\r\n\t\t\t\t\t\t.withChangeStreamName(&quot;dbteststream&quot;).withMetadataDatabase(&quot;testmetadata&quot;))\r\n\t\t\t\t.apply(ParDo.of(new DoFn&lt;DataChangeRecord, String&gt;() {\r\n\t\t\t\t\t@ProcessElement\r\n\t\t\t\t\tpublic void process(ProcessContext context) {\r\n\t\t\t\t\t\tSystem.out.println(&quot;context &quot; + context.element().getModType());\r\n                       context.output(context.element().getModType().name());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}));\r\n\r\n\t\tpipeline.run();\r\n\t}\r\n```","title":"Dataflow Job Fails stating, java.lang.UnsupportedOperationException: BundleFinalizer unsupported by non-portable Dataflow","body":"<p>We are running a simple Data Flow Job that reads data from a Spanner DB and just displays the Changed Record's Mod Type. When we deploy the Job in Dataflow it always fails stating, the below error,</p>\n<blockquote>\n<p>Error message from worker: java.lang.UnsupportedOperationException: BundleFinalizer unsupported by non-portable Dataflow.\\n        org.apache.beam.runners.dataflow.worker.SplittableProcessFnFactory$SplittableDoFnRunnerFactory.lambda$createRunner$2(SplittableProcessFnFactory.java:172)\\n        org.apache.beam.runners.dataflow.worker.repackaged.org.apache.beam.runners.core.OutputAndTimeBoundedSplittableProcessElementInvoker$1.bundleFinalizer(OutputAndTimeBoundedSplittableProcessElementInvoker.java:206)\\n        org.apache.beam.sdk.io.gcp.spanner.changestreams.dofn.ReadChangeStreamPartitionDoFn$DoFnInvoker.invokeProcessElement(Unknown Source)\\n        org.apache.beam.runners.dataflow.worker.repackaged.org.apache.beam.runners.core.OutputAndTimeBoundedSplittableProcessElementInvoker.invokeProcessElement(OutputAndTimeBoundedSplittableProcessElementInvoker.java:125)\\n        org.apache.beam.runners.dataflow.worker.repackaged.org.apache.beam.runners.core.SplittableParDoViaKeyedWorkItems$ProcessFn.processElement(SplittableParDoViaKeyedWorkItems.java:567)</p>\n</blockquote>\n<p>Below is the source code,</p>\n<pre><code>    public static void main(String[] args) {\n        PipelineOptions pipelineOptions = PipelineOptionsFactory.fromArgs(args).withValidation().create();\n        Pipeline pipeline = Pipeline.create(pipelineOptions);\n        SpannerConfig spannerConfig = SpannerConfig.create().withProjectId(&quot;prj-test-1234&quot;)\n                .withInstanceId(&quot;dbinstance1&quot;).withDatabaseId(&quot;dbtestnew&quot;);\n\n        PCollection&lt;String&gt; changeRecord = pipeline\n                .apply(SpannerIO.readChangeStream().withSpannerConfig(spannerConfig)\n                        .withChangeStreamName(&quot;dbteststream&quot;).withMetadataDatabase(&quot;testmetadata&quot;))\n                .apply(ParDo.of(new DoFn&lt;DataChangeRecord, String&gt;() {\n                    @ProcessElement\n                    public void process(ProcessContext context) {\n                        System.out.println(&quot;context &quot; + context.element().getModType());\n                       context.output(context.element().getModType().name());\n                    }\n\n                }));\n\n        pipeline.run();\n    }\n</code></pre>\n"},{"tags":["java","inheritance","constructor","pmd"],"comments":[{"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"score":2,"creation_date":1385373593,"post_id":20189149,"comment_id":30099593,"body_markdown":"Hm....smells like an Inheritance problem. :)","body":"Hm....smells like an Inheritance problem. :)"},{"owner":{"account_id":2971110,"reputation":14744,"user_id":2523147,"accept_rate":38,"display_name":"prime"},"score":1,"creation_date":1385373895,"post_id":20189149,"comment_id":30099776,"body_markdown":"a simple code sample demonstrating your problem will be more useful :)","body":"a simple code sample demonstrating your problem will be more useful :)"}],"answers":[{"tags":[],"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385375249,"creation_date":1385373751,"answer_id":20189236,"question_id":20189149,"body_markdown":"**Instance variables are assigned default values(null in case of custom object).** \r\n\r\n\r\nSo unless you are really assigning some value to your final variables why bother about null assignments?\r\n\r\nAs user has pointed out in the comment above does not stand good for final variables. So what can be done define a no-arg constructor with all final values set to null.\r\n\r\nNow in individual arg constructors place a call to this default constructor by using `this()` as the 1st statement .. then you can assign values depending on the arguments passed.","title":"final optional member variable in Java classes","body":"<p><strong>Instance variables are assigned default values(null in case of custom object).</strong> </p>\n\n<p>So unless you are really assigning some value to your final variables why bother about null assignments?</p>\n\n<p>As user has pointed out in the comment above does not stand good for final variables. So what can be done define a no-arg constructor with all final values set to null.</p>\n\n<p>Now in individual arg constructors place a call to this default constructor by using <code>this()</code> as the 1st statement .. then you can assign values depending on the arguments passed.</p>\n"},{"tags":[],"owner":{"account_id":3408395,"reputation":11432,"user_id":2858934,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1385373805,"creation_date":1385373805,"answer_id":20189252,"question_id":20189149,"body_markdown":"You can use constructor chaining, passing null to the values that are not used in your instance. (You can either use the super constructor if we are discussing inheritance, or a different constructor in the same class.)\r\nAfter all I would reconsider the design of your classes, for example extract the optional part to a different class.","title":"final optional member variable in Java classes","body":"<p>You can use constructor chaining, passing null to the values that are not used in your instance. (You can either use the super constructor if we are discussing inheritance, or a different constructor in the same class.)\nAfter all I would reconsider the design of your classes, for example extract the optional part to a different class.</p>\n"},{"tags":[],"owner":{"account_id":1019699,"reputation":8226,"user_id":1030410,"accept_rate":67,"display_name":"Daniel Trugman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660955358,"creation_date":1660955358,"answer_id":73423368,"question_id":20189149,"body_markdown":"**What you are looking for is the builder pattern.**\r\n\r\nSay you have a class with a constructor that accepts all the values:\r\n```\r\nclass Job {\r\n    private final Integer id;\r\n    private final String name;\r\n    private final Boolean retry;\r\n\r\n    public class Job(Integer id, String name, Boolean retry) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.retry = retry;\r\n    }\r\n}\r\n```\r\n\r\nNow, you want to let other create different flavors of that object while keeping it immutable, removing the default value logic from it and keeping it clean. **You create a new builder class:**\r\n```\r\nclass JobBuilder {\r\n    // Values the user MUST provide are non-initialized and\r\n    // declared as final\r\n    private final Integer id; \r\n\r\n    // Values the user MAY provide are initialized with default values\r\n    // and are not final\r\n    private String name = &quot;[none]&quot;;\r\n    private Boolean retry = true;\r\n\r\n    public class JobBuilder(Integer id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public JobBuilder name(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public JobBuilder retry(Boolean retry) {\r\n        this.retry = retry; \r\n    }\r\n\r\n    public Job build() {\r\n        return new Job(this.id, this.name, this.retry);\r\n    }\r\n}\r\n```\r\n\r\nNow, you can create different job objects easily while enforcing the requirements:\r\n```\r\nJob job1 = JobBuilder(1).name(&quot;firstJob&quot;).retry(false).build();\r\n\r\nJob job2 = JobBuilder(2).name(&quot;secondJob&quot;).build();\r\n\r\nJob job3 = JobBuilder(3).build();\r\n```","title":"final optional member variable in Java classes","body":"<p><strong>What you are looking for is the builder pattern.</strong></p>\n<p>Say you have a class with a constructor that accepts all the values:</p>\n<pre><code>class Job {\n    private final Integer id;\n    private final String name;\n    private final Boolean retry;\n\n    public class Job(Integer id, String name, Boolean retry) {\n        this.id = id;\n        this.name = name;\n        this.retry = retry;\n    }\n}\n</code></pre>\n<p>Now, you want to let other create different flavors of that object while keeping it immutable, removing the default value logic from it and keeping it clean. <strong>You create a new builder class:</strong></p>\n<pre><code>class JobBuilder {\n    // Values the user MUST provide are non-initialized and\n    // declared as final\n    private final Integer id; \n\n    // Values the user MAY provide are initialized with default values\n    // and are not final\n    private String name = &quot;[none]&quot;;\n    private Boolean retry = true;\n\n    public class JobBuilder(Integer id) {\n        this.id = id;\n    }\n\n    public JobBuilder name(String name) {\n        this.name = name;\n    }\n\n    public JobBuilder retry(Boolean retry) {\n        this.retry = retry; \n    }\n\n    public Job build() {\n        return new Job(this.id, this.name, this.retry);\n    }\n}\n</code></pre>\n<p>Now, you can create different job objects easily while enforcing the requirements:</p>\n<pre><code>Job job1 = JobBuilder(1).name(&quot;firstJob&quot;).retry(false).build();\n\nJob job2 = JobBuilder(2).name(&quot;secondJob&quot;).build();\n\nJob job3 = JobBuilder(3).build();\n</code></pre>\n"}],"owner":{"account_id":3635123,"reputation":23,"user_id":3030413,"display_name":"Anish K George"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1124,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":20189252,"answer_count":3,"score":2,"last_activity_date":1660955358,"creation_date":1385373523,"question_id":20189149,"body_markdown":"I have a scenario where some of the final variables declared at class level are optional in some cases.\r\n\r\nThat means I have different constructors. Some of those have to leave the member variables with null values.\r\n\r\nSince I have declared the variable as final, I am forced to initialize those in the constructor. So I have to add *var = null;* statement in the constructor.\r\n\r\nBut explicitly assigning variables to null is considered to be a bad practice and tools like PMD, reports it as a violation. (Controversial rule in PMD. But do not want to switch it off, since I do not want the null assignment to be practiced in other areas of my code)\r\n\r\nAny other suggessions or good practices to achieve this?\r\n","title":"final optional member variable in Java classes","body":"<p>I have a scenario where some of the final variables declared at class level are optional in some cases.</p>\n\n<p>That means I have different constructors. Some of those have to leave the member variables with null values.</p>\n\n<p>Since I have declared the variable as final, I am forced to initialize those in the constructor. So I have to add <em>var = null;</em> statement in the constructor.</p>\n\n<p>But explicitly assigning variables to null is considered to be a bad practice and tools like PMD, reports it as a violation. (Controversial rule in PMD. But do not want to switch it off, since I do not want the null assignment to be practiced in other areas of my code)</p>\n\n<p>Any other suggessions or good practices to achieve this?</p>\n"},{"tags":["java","junit5","junit-jupiter"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1651756769,"post_id":72127811,"comment_id":127442229,"body_markdown":"Does this answer your question? [Are test suites considered deprecated in JUnit5?](https://stackoverflow.com/questions/50565724/are-test-suites-considered-deprecated-in-junit5)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/50565724/are-test-suites-considered-deprecated-in-junit5\">Are test suites considered deprecated in JUnit5?</a>"},{"owner":{"account_id":6410870,"reputation":1740,"user_id":4970679,"display_name":"ahuemmer"},"score":0,"creation_date":1651757155,"post_id":72127811,"comment_id":127442420,"body_markdown":"Do you have something like this in your `build.gradle`: `tasks.named(&#39;test&#39;) {\n\tuseJUnitPlatform()\n}` AFAIK, this is necessary with JUnit 5. :)","body":"Do you have something like this in your <code>build.gradle</code>: <code>tasks.named(&#39;test&#39;) { \tuseJUnitPlatform() }</code> AFAIK, this is necessary with JUnit 5. :)"},{"owner":{"account_id":2666336,"reputation":63,"user_id":2304706,"display_name":"Ren&#233;"},"score":0,"creation_date":1651757364,"post_id":72127811,"comment_id":127442524,"body_markdown":"@cyberbrain Nope","body":"@cyberbrain Nope"},{"owner":{"account_id":2666336,"reputation":63,"user_id":2304706,"display_name":"Ren&#233;"},"score":0,"creation_date":1651757454,"post_id":72127811,"comment_id":127442573,"body_markdown":"@ahuemmer  yep --&gt; test { useJUnitPlatform()....}\nRunning single test methods is working","body":"@ahuemmer  yep --&gt; test { useJUnitPlatform()....} Running single test methods is working"},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1651757465,"post_id":72127811,"comment_id":127442576,"body_markdown":"cannot reproduce any issue. add your imports, gradle config etc that is neccessary context for your question.","body":"cannot reproduce any issue. add your imports, gradle config etc that is neccessary context for your question."}],"answers":[{"tags":[],"owner":{"account_id":2666336,"reputation":63,"user_id":2304706,"display_name":"Ren&#233;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651760263,"creation_date":1651760263,"answer_id":72128736,"question_id":72127811,"body_markdown":"The junit-platform-suite-engine was missing... \r\n\r\nSee: https://junit.org/junit5/docs/current/user-guide/index.html#junit-platform-suite-engine\r\n\r\n```\r\ndependencies {\r\n  testImplementation &quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;\r\n  testRuntimeOnly &quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;\r\n  testImplementation &#39;org.junit.platform:junit-platform-suite-api:1.8.2&#39;\r\n  **testRuntimeOnly &#39;org.junit.platform:junit-platform-suite-engine:1.8.2&#39;**\r\n  \r\n}\r\n```","title":"Junit 5 Test Suites","body":"<p>The junit-platform-suite-engine was missing...</p>\n<p>See: <a href=\"https://junit.org/junit5/docs/current/user-guide/index.html#junit-platform-suite-engine\" rel=\"nofollow noreferrer\">https://junit.org/junit5/docs/current/user-guide/index.html#junit-platform-suite-engine</a></p>\n<pre><code>dependencies {\n  testImplementation &quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;\n  testRuntimeOnly &quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;\n  testImplementation 'org.junit.platform:junit-platform-suite-api:1.8.2'\n  **testRuntimeOnly 'org.junit.platform:junit-platform-suite-engine:1.8.2'**\n  \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660953628,"creation_date":1660953628,"answer_id":73423253,"question_id":72127811,"body_markdown":"Eclipse 4.25 (part of the Eclipse 2022-09 simultaneous release) should improve the support for JUnit 5:\r\n\r\n&gt; ## test suite wizard JUnit 5 support\r\n&gt;\r\n&gt; \tThe **New JUnit Test Suite Wizard** has been enhanced to now allow the creation of a JUnit 5 test suite using the `@Suite` annotation. \r\n&gt;\r\n&gt; To open the **New JUnit Test Suite Wizard** for the current package, go to `New &gt; Other &gt; Java &gt; JUnit &gt; JUnit Test Suite`.\r\n&gt;\r\n&gt; [![Test Suite Wizard -- https://www.eclipse.org/eclipse/news/4.25/images/test-suite-wizard-junit5.png][1]][1]\r\n&gt;\r\n&gt; The result of this is:\r\n&gt;\r\n&gt; [![JUnit 5 Test Suite][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nDTHS.png\r\n  [2]: https://i.stack.imgur.com/YWVpZ.png","title":"Junit 5 Test Suites","body":"<p>Eclipse 4.25 (part of the Eclipse 2022-09 simultaneous release) should improve the support for JUnit 5:</p>\n<blockquote>\n<h2>test suite wizard JUnit 5 support</h2>\n<p>The <strong>New JUnit Test Suite Wizard</strong> has been enhanced to now allow the creation of a JUnit 5 test suite using the <code>@Suite</code> annotation.</p>\n<p>To open the <strong>New JUnit Test Suite Wizard</strong> for the current package, go to <code>New &gt; Other &gt; Java &gt; JUnit &gt; JUnit Test Suite</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/nDTHS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDTHS.png\" alt=\"Test Suite Wizard -- https://www.eclipse.org/eclipse/news/4.25/images/test-suite-wizard-junit5.png\" /></a></p>\n<p>The result of this is:</p>\n<p><a href=\"https://i.stack.imgur.com/YWVpZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YWVpZ.png\" alt=\"JUnit 5 Test Suite\" /></a></p>\n</blockquote>\n"}],"owner":{"account_id":2666336,"reputation":63,"user_id":2304706,"display_name":"Ren&#233;"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2145,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72128736,"answer_count":2,"score":2,"last_activity_date":1660953628,"creation_date":1651756509,"question_id":72127811,"body_markdown":"I&#39;m trying to migrate a Project from JUnit 4 to JUnit 5.8.2 with junit-platform-suite-api 1.8.2. We used to organize our test classes in test suites. But if I use the @Suite annotation with @SelectClasses the test runner finds no test methods at all. When running a specific test class directly everything is fine. This happens in eclipse and gradle builds.\r\n\r\n```\r\nimport org.junit.platform.suite.api.SelectClasses;\r\nimport org.junit.platform.suite.api.Suite;\r\n\r\n@Suite\r\n@SelectClasses({\r\n    TestA.class\r\n})\r\npublic class ImportantTestSuite {\r\n}\r\n```\r\n\r\n```\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.Assertions;\r\n\r\npublic class TestA {\r\n\r\n    @Test\r\n    public void reallyImportantTest() {\r\n        assertEquals(2, 1 + 1)\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nbuild.gradle looks like this\r\n```\r\nplugins {\r\n  id &#39;application&#39;\r\n}\r\n\r\ndependencies {\r\n  testImplementation &quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;\r\n  testImplementation &#39;org.junit.platform:junit-platform-suite-api:1.8.2&#39;\r\n  testRuntimeOnly &quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n    minHeapSize = &#39;1024m&#39;\r\n    maxHeapSize = &#39;1024m&#39;\r\n    include &#39;**/*ImportantTestSuite*&#39;\r\n    ignoreFailures = true\r\n    testLogging {\r\n      exceptionFormat &#39;full&#39;\r\n      events &#39;passed&#39;, &#39;skipped&#39;, &#39;failed&#39;\r\n    }\r\n  }\r\n```\r\n\r\nAny idea how to organize the suites on class basis?\r\n\r\nEdit:\r\n\r\nhttps://stackoverflow.com/questions/50565724/are-test-suites-considered-deprecated-in-junit5\r\n\r\nI already read this answers. As far as I see I&#39;m using that apporach with @Suite and @SelectClasses and not the runner.\r\n","title":"Junit 5 Test Suites","body":"<p>I'm trying to migrate a Project from JUnit 4 to JUnit 5.8.2 with junit-platform-suite-api 1.8.2. We used to organize our test classes in test suites. But if I use the @Suite annotation with @SelectClasses the test runner finds no test methods at all. When running a specific test class directly everything is fine. This happens in eclipse and gradle builds.</p>\n<pre><code>import org.junit.platform.suite.api.SelectClasses;\nimport org.junit.platform.suite.api.Suite;\n\n@Suite\n@SelectClasses({\n    TestA.class\n})\npublic class ImportantTestSuite {\n}\n</code></pre>\n<pre><code>import org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.Assertions;\n\npublic class TestA {\n\n    @Test\n    public void reallyImportantTest() {\n        assertEquals(2, 1 + 1)\n    }\n\n}\n\n</code></pre>\n<p>build.gradle looks like this</p>\n<pre><code>plugins {\n  id 'application'\n}\n\ndependencies {\n  testImplementation &quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;\n  testImplementation 'org.junit.platform:junit-platform-suite-api:1.8.2'\n  testRuntimeOnly &quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;\n}\n\ntest {\n    useJUnitPlatform()\n    minHeapSize = '1024m'\n    maxHeapSize = '1024m'\n    include '**/*ImportantTestSuite*'\n    ignoreFailures = true\n    testLogging {\n      exceptionFormat 'full'\n      events 'passed', 'skipped', 'failed'\n    }\n  }\n</code></pre>\n<p>Any idea how to organize the suites on class basis?</p>\n<p>Edit:</p>\n<p><a href=\"https://stackoverflow.com/questions/50565724/are-test-suites-considered-deprecated-in-junit5\">Are test suites considered deprecated in JUnit5?</a></p>\n<p>I already read this answers. As far as I see I'm using that apporach with @Suite and @SelectClasses and not the runner.</p>\n"},{"tags":["java","maven","dependencies","pom.xml","system-paths"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1660904726,"post_id":73414429,"comment_id":129649126,"body_markdown":"Do not use systemPath at all... Use a repository manager ...You should not use any property like `${pom.*} anymore ...","body":"Do not use systemPath at all... Use a repository manager ...You should not use any property like `${pom.*} anymore ..."},{"owner":{"account_id":11320476,"reputation":21,"user_id":8300946,"display_name":"Rajalingam"},"score":0,"creation_date":1660906793,"post_id":73414429,"comment_id":129649818,"body_markdown":"@khmarbaise I am planning to use local repository only, But my doubt is how its working without warning by using ${pom.basedir} not in {project.basedir}.","body":"@khmarbaise I am planning to use local repository only, But my doubt is how its working without warning by using ${pom.basedir} not in {project.basedir}."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1660908710,"post_id":73414429,"comment_id":129650465,"body_markdown":"Use local repository only? With system path?","body":"Use local repository only? With system path?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1660908790,"post_id":73414429,"comment_id":129650503,"body_markdown":"Local repository only? How to get artifacts into that?","body":"Local repository only? How to get artifacts into that?"},{"owner":{"account_id":11320476,"reputation":21,"user_id":8300946,"display_name":"Rajalingam"},"score":0,"creation_date":1660909829,"post_id":73414429,"comment_id":129650879,"body_markdown":"@khmarbaise   My question is not relevant to repository manager.. My actual question is earlier when I am using System path as ${project.basedir} I got warning message (Please refer above),. but I didn&#39;t see any warning after using System path as ${pom.basedir}.. So What is different here project.basedir vs pom.basedir?","body":"@khmarbaise   My question is not relevant to repository manager.. My actual question is earlier when I am using System path as ${project.basedir} I got warning message (Please refer above),. but I didn&#39;t see any warning after using System path as ${pom.basedir}.. So What is different here project.basedir vs pom.basedir?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1660914653,"post_id":73414429,"comment_id":129652755,"body_markdown":"It is relevatn related to repository manager because if you would use one you don&#39;t have to use systemPath...","body":"It is relevatn related to repository manager because if you would use one you don&#39;t have to use systemPath..."},{"owner":{"account_id":11320476,"reputation":21,"user_id":8300946,"display_name":"Rajalingam"},"score":0,"creation_date":1660918774,"post_id":73414429,"comment_id":129654347,"body_markdown":"@khmarbaise  You understood wrongly, My question is before implementing repository manager.","body":"@khmarbaise  You understood wrongly, My question is before implementing repository manager."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1660920391,"post_id":73414429,"comment_id":129654980,"body_markdown":"1. `pom.basedir` is deprecated and should not be used anymore. 2. Systempath should be avoided if at all possible.","body":"1. <code>pom.basedir</code> is deprecated and should not be used anymore. 2. Systempath should be avoided if at all possible."}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660952079,"creation_date":1660901090,"answer_id":73414594,"question_id":73414429,"body_markdown":"`${basedir}`, `${project.basedir}` and `${pom.basedir}` [are synonyms](https://maven.apache.org/ref/3.8.6/maven-model-builder/#model-interpolation) (you may also check that using something like `mvn help:evaluate -Dexpression=pom.basedir`), your Q just reveals that person who was fixing [MNG-4953](https://issues.apache.org/jira/browse/MNG-4953) didn&#39;t know about that.","title":"Difference between ${pom.basedir} vs ${project.basedir} in pom.xml","body":"<p><code>${basedir}</code>, <code>${project.basedir}</code> and <code>${pom.basedir}</code> <a href=\"https://maven.apache.org/ref/3.8.6/maven-model-builder/#model-interpolation\" rel=\"nofollow noreferrer\">are synonyms</a> (you may also check that using something like <code>mvn help:evaluate -Dexpression=pom.basedir</code>), your Q just reveals that person who was fixing <a href=\"https://issues.apache.org/jira/browse/MNG-4953\" rel=\"nofollow noreferrer\">MNG-4953</a> didn't know about that.</p>\n"}],"owner":{"account_id":11320476,"reputation":21,"user_id":8300946,"display_name":"Rajalingam"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1384,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1660952079,"creation_date":1660900229,"question_id":73414429,"body_markdown":"Getting below warning while build.\r\n\r\nI am using  in pom.xml\r\n\r\n    &lt;systemPath&gt;${project.basedir}/lib/....jar&lt;/systemPath&gt;\r\n\r\n&gt; [WARNING] &#39;dependencies.dependency.systemPath&#39; for ...:jar should not\r\n&gt; point at files within the project directory,\r\n&gt; ${project.basedir}/lib/....jar will be unresolvable by dependent\r\n&gt; projects @ line 25, column 30\r\n\r\nIts resolved now by using `&lt;systemPath&gt;${pom.basedir}/lib`/....jar&lt;/systemPath&gt; in pom.xml\r\n\r\nAnyone please explain, What is difference between ${pom.basedir} vs ${project.basedir} in pom.xml?\r\n\r\n ","title":"Difference between ${pom.basedir} vs ${project.basedir} in pom.xml","body":"<p>Getting below warning while build.</p>\n<p>I am using  in pom.xml</p>\n<pre><code>&lt;systemPath&gt;${project.basedir}/lib/....jar&lt;/systemPath&gt;\n</code></pre>\n<blockquote>\n<p>[WARNING] 'dependencies.dependency.systemPath' for ...:jar should not\npoint at files within the project directory,\n${project.basedir}/lib/....jar will be unresolvable by dependent\nprojects @ line 25, column 30</p>\n</blockquote>\n<p>Its resolved now by using <code>&lt;systemPath&gt;${pom.basedir}/lib</code>/....jar in pom.xml</p>\n<p>Anyone please explain, What is difference between ${pom.basedir} vs ${project.basedir} in pom.xml?</p>\n"},{"tags":["java","comparator"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":2,"creation_date":1660937904,"post_id":73421489,"comment_id":129660234,"body_markdown":"Post what you have so far - it should be a simple condition in the comparator to use a &quot;getDt()&quot; which returns &quot;cdt&quot; if not null OR returns &quot;odt&quot;.  Then do the comparison on the result of &quot;getDt()&quot;.","body":"Post what you have so far - it should be a simple condition in the comparator to use a &quot;getDt()&quot; which returns &quot;cdt&quot; if not null OR returns &quot;odt&quot;.  Then do the comparison on the result of &quot;getDt()&quot;."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1660943546,"post_id":73421489,"comment_id":129661495,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660939147,"creation_date":1660938492,"answer_id":73421606,"question_id":73421489,"body_markdown":"[`Comparator`][1] has all you want. It could be something like this, though I doubt the correctness.\r\n\r\n    List&lt;Order&gt; orders = ...\r\n    orders.sort(Comparator.nullsFirst(Order::getCollectionDT)\r\n                          .reversed()\r\n                          .thenComparing(Order::getOrderingDT));\r\n\r\nThis would do CollectionDT sorted descendingly, the nulls at the end (nullsFirst+reversed), and equal CollectionDTs sorted by OrderingDT.\r\n\r\nThey must implement `Comparable&lt;CollectionDT&gt;` resp. `Comparable&lt;OrderingDT&gt;`.\r\n\r\nIt looks like you want something intertwined.\r\nThen using a simple basic Comparator on compareTo.\r\nMore readable.\r\n\r\n    Comparator&lt;Order&gt; orderComparator = (lhs, rhs) -&gt;\r\n        lhs.getCollectionDT() == null\r\n            ? rhs.getCollectionDT() != null ? 1\r\n            : lhs.getOrderingDT().compareTo(rhs.getOrderingDT())\r\n            : rhs.getCollection() == null ? -1\r\n            : lhs.getCollectionDT().compareTo(rhs.getCollectionDT());\r\n     orders.sort(orderComparator);\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html","title":"Is it possible to create custom java comparator which will compare by two different object properties?","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\"><code>Comparator</code></a> has all you want. It could be something like this, though I doubt the correctness.</p>\n<pre><code>List&lt;Order&gt; orders = ...\norders.sort(Comparator.nullsFirst(Order::getCollectionDT)\n                      .reversed()\n                      .thenComparing(Order::getOrderingDT));\n</code></pre>\n<p>This would do CollectionDT sorted descendingly, the nulls at the end (nullsFirst+reversed), and equal CollectionDTs sorted by OrderingDT.</p>\n<p>They must implement <code>Comparable&lt;CollectionDT&gt;</code> resp. <code>Comparable&lt;OrderingDT&gt;</code>.</p>\n<p>It looks like you want something intertwined.\nThen using a simple basic Comparator on compareTo.\nMore readable.</p>\n<pre><code>Comparator&lt;Order&gt; orderComparator = (lhs, rhs) -&gt;\n    lhs.getCollectionDT() == null\n        ? rhs.getCollectionDT() != null ? 1\n        : lhs.getOrderingDT().compareTo(rhs.getOrderingDT())\n        : rhs.getCollection() == null ? -1\n        : lhs.getCollectionDT().compareTo(rhs.getCollectionDT());\n orders.sort(orderComparator);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1104998,"reputation":872,"user_id":1096587,"display_name":"Liberty Lover"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1660952064,"creation_date":1660952064,"answer_id":73423135,"question_id":73421489,"body_markdown":"I have taken the time to code a demonstration of an answer in Eiffel for anyone who would like to see. You can find that video [here][1]. You can look at the code directly from [Github][2].\r\n\r\nThe primary goal of the demo is to show that objects in Eiffel can be taught how to compare themselves among themselves—such that—when you place them into a list, they auto-sort themselves by the code-rules you provide. This means you can also have descendant child classes that know how to sort themselves along with more generic parents in the same list, so you don&#39;t have to create lists of just one type of object.\r\n\r\nYou can even teach different objects that are otherwise unrelated how to organize themselves in the list, as long as they have some kind of loose inheritance. The Eiffel way of doing this is quite powerful!\r\n\r\nI invite you to watch the video, examine the code on Github, download EiffelStudio (free GPL version) and play with the code directly! If you need help, reach out to me. I am happy to assist you in any way I can!\r\n\r\n\r\n  [1]: https://youtu.be/l302rSA1eNs\r\n  [2]: https://github.com/ljr1981/stack_overflow_answers/blob/main/src/so_73421489/so_73421489_order.e","title":"Is it possible to create custom java comparator which will compare by two different object properties?","body":"<p>I have taken the time to code a demonstration of an answer in Eiffel for anyone who would like to see. You can find that video <a href=\"https://youtu.be/l302rSA1eNs\" rel=\"nofollow noreferrer\">here</a>. You can look at the code directly from <a href=\"https://github.com/ljr1981/stack_overflow_answers/blob/main/src/so_73421489/so_73421489_order.e\" rel=\"nofollow noreferrer\">Github</a>.</p>\n<p>The primary goal of the demo is to show that objects in Eiffel can be taught how to compare themselves among themselves—such that—when you place them into a list, they auto-sort themselves by the code-rules you provide. This means you can also have descendant child classes that know how to sort themselves along with more generic parents in the same list, so you don't have to create lists of just one type of object.</p>\n<p>You can even teach different objects that are otherwise unrelated how to organize themselves in the list, as long as they have some kind of loose inheritance. The Eiffel way of doing this is quite powerful!</p>\n<p>I invite you to watch the video, examine the code on Github, download EiffelStudio (free GPL version) and play with the code directly! If you need help, reach out to me. I am happy to assist you in any way I can!</p>\n"}],"owner":{"account_id":3551464,"reputation":13,"user_id":2966240,"display_name":"andriyky"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"answer_count":2,"score":-2,"last_activity_date":1660952064,"creation_date":1660937595,"question_id":73421489,"body_markdown":"Could you please help me to figure out how to implement comparator which will have the following algorithm?\r\n\r\nLet&#39;s imagine we have class Order which have properties CollectionDT and OrderingDT.\r\n\r\nWhat it&#39;s needed to sort list with Order objects by CollectionDT descending and if CollectionDT is null for some object passed to comparator then sort by OrderingDT.\r\n\r\nThe example and required output:\r\n\r\n    Order1: CollectionDT - 2022-08-17, OrderingDT - 2022-08-17 \r\n    Order2: CollectionDT - null, OrderingDT - 2022-08-18\r\n    Order3: CollectionDT - 2022-08-19, OrderingDT 2022-08-19\r\n\r\nNeeded output:\r\n\r\n    Order3\r\n    Order2\r\n    Order1\r\n","title":"Is it possible to create custom java comparator which will compare by two different object properties?","body":"<p>Could you please help me to figure out how to implement comparator which will have the following algorithm?</p>\n<p>Let's imagine we have class Order which have properties CollectionDT and OrderingDT.</p>\n<p>What it's needed to sort list with Order objects by CollectionDT descending and if CollectionDT is null for some object passed to comparator then sort by OrderingDT.</p>\n<p>The example and required output:</p>\n<pre><code>Order1: CollectionDT - 2022-08-17, OrderingDT - 2022-08-17 \nOrder2: CollectionDT - null, OrderingDT - 2022-08-18\nOrder3: CollectionDT - 2022-08-19, OrderingDT 2022-08-19\n</code></pre>\n<p>Needed output:</p>\n<pre><code>Order3\nOrder2\nOrder1\n</code></pre>\n"},{"tags":["java","spring-boot","ehcache","mockrestserviceserver"],"answers":[{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660951896,"creation_date":1660951896,"answer_id":73423123,"question_id":73088450,"body_markdown":"You can inject the `org.springframework.cache.CacheManager` bean into your tests and use it to clear the cache before or after each test. Assuming there is a cache named `testCache`, a test class that clears the cache would look something like below:\r\n\r\n```java\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.cache.CacheManager;\r\n\r\n@SpringBootTest\r\npublic class IntegrationTest {\r\n\r\n   @Autowired\r\n   private CacheManager cacheManager;\r\n\r\n   @BeforeEach\r\n   public void setup() {\r\n      cacheManager.get(&quot;testCache&quot;).clear();\r\n   }\r\n\r\n   @Test\r\n   public void testSomething() {\r\n\r\n   }\r\n}\r\n```\r\n\r\nYou can find a reference spock-based test that does the same thing on [github](https://github.com/devatherock/spring-boot-demo/blob/ehcache/src/test/groovy/io/github/devatherock/service/MessageServiceSpec.groovy)\r\n","title":"How to clear/ignore ehcache&#39;s data and test via MockRestServiceServer?","body":"<p>You can inject the <code>org.springframework.cache.CacheManager</code> bean into your tests and use it to clear the cache before or after each test. Assuming there is a cache named <code>testCache</code>, a test class that clears the cache would look something like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.cache.CacheManager;\n\n@SpringBootTest\npublic class IntegrationTest {\n\n   @Autowired\n   private CacheManager cacheManager;\n\n   @BeforeEach\n   public void setup() {\n      cacheManager.get(&quot;testCache&quot;).clear();\n   }\n\n   @Test\n   public void testSomething() {\n\n   }\n}\n</code></pre>\n<p>You can find a reference spock-based test that does the same thing on <a href=\"https://github.com/devatherock/spring-boot-demo/blob/ehcache/src/test/groovy/io/github/devatherock/service/MessageServiceSpec.groovy\" rel=\"nofollow noreferrer\">github</a></p>\n"}],"owner":{"account_id":4507375,"reputation":555,"user_id":3664382,"accept_rate":60,"display_name":"thisisdude"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":520,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660951896,"creation_date":1658556664,"question_id":73088450,"body_markdown":"We are running our component test-cases in which we load some data using cache.. Now the problem is when we try other test-cases, we want to reset the cache because it then doesn&#39;t test with the other data. How can we achieve this. We are using spring boot with Java and using Ehcache.\r\n","title":"How to clear/ignore ehcache&#39;s data and test via MockRestServiceServer?","body":"<p>We are running our component test-cases in which we load some data using cache.. Now the problem is when we try other test-cases, we want to reset the cache because it then doesn't test with the other data. How can we achieve this. We are using spring boot with Java and using Ehcache.</p>\n"},{"tags":["java","if-statement","hashmap"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":6,"creation_date":1660948857,"post_id":73422809,"comment_id":129662561,"body_markdown":"FYI Germans speak German, not Dutch.","body":"FYI Germans speak German, not Dutch."}],"answers":[{"tags":[],"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660950432,"creation_date":1660948630,"answer_id":73422849,"question_id":73422809,"body_markdown":"The benefit is that it requires less code to handle the cases and to add a new case.\r\n\r\nThis is what it looks like with a map:\r\n```java\r\nclass Main {\r\n    static Map&lt;String, String&gt; countryToLanguageMap = Map.of(\r\n        &quot;USA&quot;, &quot;english&quot;,\r\n        &quot;Germany&quot;, &quot;dutch&quot;,\r\n        &quot;Brazil&quot;, &quot;Portuguese&quot;\r\n    );\r\n\r\n    static String string_process(String s_in) {\r\n        for (Map.Entry&lt;String, String&gt; entry : countryToLanguageMap.entrySet()) {\r\n            if(s_in.contains(entry.getKey())){\r\n                return entry.getValue();\r\n            }\r\n        }\r\n        return &quot;Unknown&quot;;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String process = string_process(&quot;I am from USA!&quot;);\r\n        System.out.println(&quot;I understand &quot;+process);\r\n    }\r\n}\r\n```\r\n\r\nFor example, let&#39;s suppose you want to add a new case, &quot;UK&quot; with &quot;english&quot;. This is what you would have to add with the map-based version:\r\n```java\r\n        ...\r\n        &quot;UK&quot;, &quot;english&quot;,\r\n        ...\r\n```\r\nwhile with the original version:\r\n```java\r\n     ...\r\n     else if(s_in.contains(&quot;UK&quot;)){\r\n            s_out = &quot;english&quot;;\r\n     }\r\n     ...\r\n\r\n```","title":"Covert if else statement to hasmap in JAVA","body":"<p>The benefit is that it requires less code to handle the cases and to add a new case.</p>\n<p>This is what it looks like with a map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Main {\n    static Map&lt;String, String&gt; countryToLanguageMap = Map.of(\n        &quot;USA&quot;, &quot;english&quot;,\n        &quot;Germany&quot;, &quot;dutch&quot;,\n        &quot;Brazil&quot;, &quot;Portuguese&quot;\n    );\n\n    static String string_process(String s_in) {\n        for (Map.Entry&lt;String, String&gt; entry : countryToLanguageMap.entrySet()) {\n            if(s_in.contains(entry.getKey())){\n                return entry.getValue();\n            }\n        }\n        return &quot;Unknown&quot;;\n    }\n\n    public static void main(String[] args) {\n        String process = string_process(&quot;I am from USA!&quot;);\n        System.out.println(&quot;I understand &quot;+process);\n    }\n}\n</code></pre>\n<p>For example, let's suppose you want to add a new case, &quot;UK&quot; with &quot;english&quot;. This is what you would have to add with the map-based version:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        ...\n        &quot;UK&quot;, &quot;english&quot;,\n        ...\n</code></pre>\n<p>while with the original version:</p>\n<pre class=\"lang-java prettyprint-override\"><code>     ...\n     else if(s_in.contains(&quot;UK&quot;)){\n            s_out = &quot;english&quot;;\n     }\n     ...\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19590806,"reputation":1,"user_id":14337870,"display_name":"Noah Jaussi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660948823,"creation_date":1660948823,"answer_id":73422864,"question_id":73422809,"body_markdown":"In short it would make the code more readable but it the runtime complexity would not change in a notable capacity. Like the other answers you would need to make a global hash-map variable to hold the key-value pairs.","title":"Covert if else statement to hasmap in JAVA","body":"<p>In short it would make the code more readable but it the runtime complexity would not change in a notable capacity. Like the other answers you would need to make a global hash-map variable to hold the key-value pairs.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660950360,"creation_date":1660949933,"answer_id":73422965,"question_id":73422809,"body_markdown":"Here&#39;s a possible solution using Stream API and static Map.\r\n\r\n***Note:** names like `string_process()` are not aligned with Java naming convention and doesn&#39;t provide much information to the reader about its purpose.*\r\n\r\nBasically solution boils down to a combination of methods `filter()`+`findFirst()`, which produces an `Optianal`. In case if optional is empty, default value `&quot;Unknown&quot;` would be provided as a result.\r\n\r\n```\r\nprivate static final Map&lt;String, String&gt; COUNTRY_BY_LANGUAGE =\r\n    Map.of(&quot;USA&quot;, &quot;English&quot;, &quot;Germany&quot;, &quot;German&quot;, &quot;Brazil&quot;, &quot;Portuguese&quot;);\r\n```\r\n\r\n    public static String processCountry(String from) {\r\n        \r\n        return COUNTRY_BY_LANGUAGE.entrySet().stream()\r\n            .filter(entry -&gt; entry.getKey().contains(from))\r\n            .findFirst()\r\n            .map(Map.Entry::getValue)\r\n            .orElse(&quot;Unknown&quot;);\r\n    }","title":"Covert if else statement to hasmap in JAVA","body":"<p>Here's a possible solution using Stream API and static Map.</p>\n<p><em><strong>Note:</strong> names like <code>string_process()</code> are not aligned with Java naming convention and doesn't provide much information to the reader about its purpose.</em></p>\n<p>Basically solution boils down to a combination of methods <code>filter()</code>+<code>findFirst()</code>, which produces an <code>Optianal</code>. In case if optional is empty, default value <code>&quot;Unknown&quot;</code> would be provided as a result.</p>\n<pre><code>private static final Map&lt;String, String&gt; COUNTRY_BY_LANGUAGE =\n    Map.of(&quot;USA&quot;, &quot;English&quot;, &quot;Germany&quot;, &quot;German&quot;, &quot;Brazil&quot;, &quot;Portuguese&quot;);\n</code></pre>\n<pre><code>public static String processCountry(String from) {\n    \n    return COUNTRY_BY_LANGUAGE.entrySet().stream()\n        .filter(entry -&gt; entry.getKey().contains(from))\n        .findFirst()\n        .map(Map.Entry::getValue)\n        .orElse(&quot;Unknown&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":931822,"reputation":253,"user_id":961575,"display_name":"Pavel Repin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660951372,"creation_date":1660950101,"answer_id":73422984,"question_id":73422809,"body_markdown":"Simple brute-force solution without sophisticated algorithms would be:\r\n- build your HashMap\r\n- Loop through keys in hashMap, using &#39;indexOf&#39; method of String checking if index &gt;= 0\r\nThat would be n*k time complexity (n - keyword count, k - Average input string length)\r\n```\r\npublic class Solution {\r\n\r\n    private static final Map&lt;String, String&gt; COUNTRY_TO_LANGUAGE = Map.of(\r\n            &quot;USA&quot;, &quot;English&quot;,\r\n            &quot;Germany&quot;, &quot;Deutsch&quot;, \r\n            &quot;Brazil&quot;, &quot;Portuguese&quot;);\r\n    private static final String UNKNOWN = &quot;Unknown&quot;;\r\n\r\n    public static String find(String greeting) {\r\n        for(String key: COUNTRY_TO_LANGUAGE.keySet()) {\r\n            if (greeting.indexOf(key) &gt;= 0) return COUNTRY_TO_LANGUAGE.get(key);\r\n        }\r\n        return UNKNOWN;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String greeting = &quot;I am from USA!&quot;;\r\n        System.out.println(&quot;I understand &quot; + find(greeting));\r\n    }\r\n}\r\n```\r\nSo instead of adding new if-else block you just update your map.","title":"Covert if else statement to hasmap in JAVA","body":"<p>Simple brute-force solution without sophisticated algorithms would be:</p>\n<ul>\n<li>build your HashMap</li>\n<li>Loop through keys in hashMap, using 'indexOf' method of String checking if index &gt;= 0\nThat would be n*k time complexity (n - keyword count, k - Average input string length)</li>\n</ul>\n<pre><code>public class Solution {\n\n    private static final Map&lt;String, String&gt; COUNTRY_TO_LANGUAGE = Map.of(\n            &quot;USA&quot;, &quot;English&quot;,\n            &quot;Germany&quot;, &quot;Deutsch&quot;, \n            &quot;Brazil&quot;, &quot;Portuguese&quot;);\n    private static final String UNKNOWN = &quot;Unknown&quot;;\n\n    public static String find(String greeting) {\n        for(String key: COUNTRY_TO_LANGUAGE.keySet()) {\n            if (greeting.indexOf(key) &gt;= 0) return COUNTRY_TO_LANGUAGE.get(key);\n        }\n        return UNKNOWN;\n    }\n\n    public static void main(String[] args) {\n        String greeting = &quot;I am from USA!&quot;;\n        System.out.println(&quot;I understand &quot; + find(greeting));\n    }\n}\n</code></pre>\n<p>So instead of adding new if-else block you just update your map.</p>\n"}],"owner":{"account_id":23818332,"reputation":7,"user_id":17826273,"display_name":"Ahmad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73422849,"answer_count":4,"score":0,"last_activity_date":1660951372,"creation_date":1660948166,"question_id":73422809,"body_markdown":"I want to implement a function in java that gets string input and process it. Here is how i implement it using if else statement:\r\n\r\n```\r\nclass Main {\r\n    static String string_process(String s_in) {\r\n        String s_out;\r\n        if(s_in.contains(&quot;USA&quot;)){\r\n            s_out = &quot;english&quot;;\r\n        }\r\n        else if(s_in.contains(&quot;Germany&quot;)){\r\n            s_out = &quot;dutch&quot;;\r\n        }\r\n        else if(s_in.contains(&quot;Brazil&quot;)){\r\n            s_out = &quot;Portuguese&quot;;\r\n        }\r\n        else {\r\n            s_out = &quot;Uknown&quot;;\r\n        }\r\n        return s_out;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String process = string_process(&quot;I am from USA!&quot;);\r\n        System.out.println(&quot;I understand &quot;+process);\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m wondering if i can implement it hashmap. Is there any benefit of doing so in terms of complexity? ","title":"Covert if else statement to hasmap in JAVA","body":"<p>I want to implement a function in java that gets string input and process it. Here is how i implement it using if else statement:</p>\n<pre><code>class Main {\n    static String string_process(String s_in) {\n        String s_out;\n        if(s_in.contains(&quot;USA&quot;)){\n            s_out = &quot;english&quot;;\n        }\n        else if(s_in.contains(&quot;Germany&quot;)){\n            s_out = &quot;dutch&quot;;\n        }\n        else if(s_in.contains(&quot;Brazil&quot;)){\n            s_out = &quot;Portuguese&quot;;\n        }\n        else {\n            s_out = &quot;Uknown&quot;;\n        }\n        return s_out;\n    }\n\n    public static void main(String[] args) {\n        String process = string_process(&quot;I am from USA!&quot;);\n        System.out.println(&quot;I understand &quot;+process);\n    }\n}\n</code></pre>\n<p>I'm wondering if i can implement it hashmap. Is there any benefit of doing so in terms of complexity?</p>\n"},{"tags":["java","android-studio","android-room"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660951166,"creation_date":1660950439,"answer_id":73423020,"question_id":73422314,"body_markdown":"I&#39;d suggest that rather than getting the Employees (Employee list) and then try to get the Salary for each employee, that you instead have a POJO, say **EmployeeWithSalary** that embeds (using the `@Embedded` annotation) the Employee class with the salary. Along the lines of:-\r\n\r\n\r\n    class EmployeeWithSalary {\r\n       @Embedded\r\n       Employee employee;\r\n       double salary;\r\n    }\r\n\r\n\r\nYou could then have a query in the respective `@Dao` annotated interface/abstract class, such as :-\r\n\r\n    @Query(&quot;SELECT *, (SELECT sum(amount) FROM salary WHERE empId=employee.id) AS salary  FROM employee&quot;)\r\n    abstract List&lt;EmployeeWithSalary&gt; getEmployeesWithSalary();\r\n\r\nYou could then have your adapter use the List and the salary would then be available without the need to access the database a second time to extract the salary.\r\n\r\nAs an example/demo consider the following based upon your code :-\r\n\r\n    @Entity\r\n    class Employee {\r\n       @PrimaryKey\r\n       Long id = null;\r\n       @ColumnInfo(index = true)\r\n       String employeeName;\r\n       // etc...\r\n    \r\n       Employee(){}\r\n       @Ignore\r\n       Employee(String employeeName) {\r\n          this.id = null;\r\n          this.employeeName = employeeName;\r\n       }\r\n       @Ignore\r\n       Employee(Long employeeId, String employeeName) {\r\n          this.id = employeeId;\r\n          this.employeeName = employeeName;\r\n       }\r\n    }\r\n\r\n    @Entity\r\n    class Salary {\r\n       @PrimaryKey\r\n       Long salaryId = null;\r\n       long empId;\r\n       double amount;\r\n       // etc ....\r\n    \r\n       Salary(){}\r\n       @Ignore\r\n       Salary(long empId, double amount) {\r\n          this.salaryId = null;\r\n          this.empId = empId;\r\n          this.amount = amount;\r\n       }\r\n    }\r\n\r\n**The new POJO**\r\n\r\n    class EmployeeWithSalary {\r\n       @Embedded\r\n       Employee employee;\r\n       double salary;\r\n    }\r\n\r\n\r\nA basic `@Dao` annotated abstract class (could be an interface,  abstract classes can include methods with bodies)\r\n\r\n    @Dao\r\n    abstract class AllDao {\r\n    \r\n       @Insert(onConflict = OnConflictStrategy.IGNORE)\r\n       abstract long insert(Employee employee);\r\n       @Insert(onConflict = OnConflictStrategy.IGNORE)\r\n       abstract long insert(Salary salary);\r\n    \r\n       @Query(&quot;SELECT *, (SELECT sum(amount) FROM salary WHERE empId=employee.id) AS salary  FROM employee&quot;)\r\n       abstract List&lt;EmployeeWithSalary&gt; getEmployeesWithSalary();\r\n    \r\n    }\r\n\r\nAnd to demonstrate (note that `.allowMainThreadQueries` has been used in the databaseBuilder for brevity of the demo) the following in an activity:-\r\n\r\n        db = TheDatabase.getInstance(this);\r\n        dao = db.getAllDao();\r\n\r\n        long fredId = dao.insert(new Employee(&quot;Fred&quot;));\r\n        long maryId = dao.insert(new Employee(&quot;Mary&quot;));\r\n\r\n        dao.insert(new Salary(fredId,111.33));\r\n        dao.insert(new Salary(fredId,222.66));\r\n        dao.insert(new Salary(fredId,333.999));\r\n\r\n        dao.insert(new Salary(maryId,115.55));\r\n        dao.insert(new Salary(maryId,230.10));\r\n\r\n        for (EmployeeWithSalary ews: dao.getEmployeesWithSalary()) {\r\n            Log.d(&quot;EMPINFO&quot;,&quot;Employee is &quot; + ews.employee.employeeName + &quot; Salary is $&quot; + ews.salary);\r\n        }\r\n\r\nand the log includes:-\r\n\r\n    D/EMPINFO: Employee is Fred Salary is $667.989\r\n    D/EMPINFO: Employee is Mary Salary is $345.65","title":"Using room database to retrieve salaries for employees","body":"<p>I'd suggest that rather than getting the Employees (Employee list) and then try to get the Salary for each employee, that you instead have a POJO, say <strong>EmployeeWithSalary</strong> that embeds (using the <code>@Embedded</code> annotation) the Employee class with the salary. Along the lines of:-</p>\n<pre><code>class EmployeeWithSalary {\n   @Embedded\n   Employee employee;\n   double salary;\n}\n</code></pre>\n<p>You could then have a query in the respective <code>@Dao</code> annotated interface/abstract class, such as :-</p>\n<pre><code>@Query(&quot;SELECT *, (SELECT sum(amount) FROM salary WHERE empId=employee.id) AS salary  FROM employee&quot;)\nabstract List&lt;EmployeeWithSalary&gt; getEmployeesWithSalary();\n</code></pre>\n<p>You could then have your adapter use the List and the salary would then be available without the need to access the database a second time to extract the salary.</p>\n<p>As an example/demo consider the following based upon your code :-</p>\n<pre><code>@Entity\nclass Employee {\n   @PrimaryKey\n   Long id = null;\n   @ColumnInfo(index = true)\n   String employeeName;\n   // etc...\n\n   Employee(){}\n   @Ignore\n   Employee(String employeeName) {\n      this.id = null;\n      this.employeeName = employeeName;\n   }\n   @Ignore\n   Employee(Long employeeId, String employeeName) {\n      this.id = employeeId;\n      this.employeeName = employeeName;\n   }\n}\n\n@Entity\nclass Salary {\n   @PrimaryKey\n   Long salaryId = null;\n   long empId;\n   double amount;\n   // etc ....\n\n   Salary(){}\n   @Ignore\n   Salary(long empId, double amount) {\n      this.salaryId = null;\n      this.empId = empId;\n      this.amount = amount;\n   }\n}\n</code></pre>\n<p><strong>The new POJO</strong></p>\n<pre><code>class EmployeeWithSalary {\n   @Embedded\n   Employee employee;\n   double salary;\n}\n</code></pre>\n<p>A basic <code>@Dao</code> annotated abstract class (could be an interface,  abstract classes can include methods with bodies)</p>\n<pre><code>@Dao\nabstract class AllDao {\n\n   @Insert(onConflict = OnConflictStrategy.IGNORE)\n   abstract long insert(Employee employee);\n   @Insert(onConflict = OnConflictStrategy.IGNORE)\n   abstract long insert(Salary salary);\n\n   @Query(&quot;SELECT *, (SELECT sum(amount) FROM salary WHERE empId=employee.id) AS salary  FROM employee&quot;)\n   abstract List&lt;EmployeeWithSalary&gt; getEmployeesWithSalary();\n\n}\n</code></pre>\n<p>And to demonstrate (note that <code>.allowMainThreadQueries</code> has been used in the databaseBuilder for brevity of the demo) the following in an activity:-</p>\n<pre><code>    db = TheDatabase.getInstance(this);\n    dao = db.getAllDao();\n\n    long fredId = dao.insert(new Employee(&quot;Fred&quot;));\n    long maryId = dao.insert(new Employee(&quot;Mary&quot;));\n\n    dao.insert(new Salary(fredId,111.33));\n    dao.insert(new Salary(fredId,222.66));\n    dao.insert(new Salary(fredId,333.999));\n\n    dao.insert(new Salary(maryId,115.55));\n    dao.insert(new Salary(maryId,230.10));\n\n    for (EmployeeWithSalary ews: dao.getEmployeesWithSalary()) {\n        Log.d(&quot;EMPINFO&quot;,&quot;Employee is &quot; + ews.employee.employeeName + &quot; Salary is $&quot; + ews.salary);\n    }\n</code></pre>\n<p>and the log includes:-</p>\n<pre><code>D/EMPINFO: Employee is Fred Salary is $667.989\nD/EMPINFO: Employee is Mary Salary is $345.65\n</code></pre>\n"}],"owner":{"account_id":20600038,"reputation":9,"user_id":15121497,"display_name":"Taha Younis"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1661102228,"accepted_answer_id":73423020,"answer_count":1,"score":0,"last_activity_date":1660951166,"creation_date":1660943681,"question_id":73422314,"body_markdown":"I encountered a problem while learning the room database, I need help\r\nI have created the room database well and write the employees name in recyclerView\r\nThere is a query that I want to implement, and it collects all employees&#39; salaries and displays them in recyclerView\r\n\r\nI will shorten the codes\r\n\r\n**The Problem**\r\n\r\n    Attempt to invoke virtual method &#39;void com.app.roomdatabase.database.MyViewModel.getSalariesSum(long, com.app.roomdatabase.database.GetSalarySumListener)&#39; on a null object reference\r\n        at com.app.roomdatabase.Adapters.EmployeeSalaryAdapter$viewHolder.bind(EmployeeSalaryAdapter.java:68)\r\n        at com.app.roomdatabase.Adapters.EmployeeSalaryAdapter.onBindViewHolder(EmployeeSalaryAdapter.java:49)\r\n        at com.app.roomdatabase.Adapters.EmployeeSalaryAdapter.onBindViewHolder(EmployeeSalaryAdapter.java:19)\r\n\r\n**The query that i used for retrieve salaries**\r\n\r\n    @Query(&quot;select sum(amount) from salary where empId=:emp_id&quot;)\r\n    double getSalariesSum(long emp_id);\r\n\r\n**Repository**\r\n\r\n     public void getSalariesSum(long emp_id, GetSalarySumListener listener ) {\r\n        MyRoomDatabase.databaseWriteExecuter.execute(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                double value = salaryDAO.getSalariesSum(emp_id);\r\n                listener.onValueSubmit(value);\r\n            }\r\n        });\r\n\r\n**GetSalarySumListener **\r\n\r\n    public interface GetSalarySumListener {\r\n    void onValueSubmit(double value);}\r\n\r\n**ViewModel**\r\n\r\n    public void getSalariesSum(long emp_id, GetSalarySumListener listener ){\r\n        repository.getSalariesSum(emp_id,listener);\r\n    }\r\n\r\n**Adapter**\r\n\r\n    public class EmployeeSalaryAdapter extends RecyclerView.Adapter&lt;EmployeeSalaryAdapter.viewHolder&gt; {\r\n\r\n    List &lt;Employee&gt; employees;\r\n    private MyViewModel mvm;\r\n\r\n    public EmployeeSalaryAdapter(List &lt;Employee&gt; employees, MyViewModel mvm) {\r\n        this.employees = employees;\r\n        this.mvm = mvm;\r\n    }\r\n\r\n    public List &lt;Employee&gt; getEmployees() {\r\n        return employees;\r\n    }\r\n\r\n    public void setEmployees(List &lt;Employee&gt; employees) {\r\n        this.employees = employees;\r\n        notifyDataSetChanged();\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public viewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n\r\n        return new viewHolder(LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.emp_sal_item,parent,false));\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull EmployeeSalaryAdapter.viewHolder holder, int position) {\r\n        Employee employee = employees.get(position);\r\n        holder.bind(employee,mvm);\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return employees.size();\r\n    }\r\n\r\n    public class viewHolder extends RecyclerView.ViewHolder {\r\n        EmpSalItemBinding binding;\r\n        Employee employee;\r\n        public viewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            binding= EmpSalItemBinding.bind(itemView);\r\n\r\n        }\r\n        public void bind(Employee employee, MyViewModel mvm) {\r\n            this.employee = employee;\r\n            binding.empNameTv.setText(employee.getName());\r\n            mvm.getSalariesSum(employee.getId(), new GetSalarySumListener() {\r\n                @Override\r\n                public void onValueSubmit(double value) {\r\n                    binding.empSalaryTv.setText(String.valueOf(value));\r\n                }\r\n            });\r\n        }\r\n    }","title":"Using room database to retrieve salaries for employees","body":"<p>I encountered a problem while learning the room database, I need help\nI have created the room database well and write the employees name in recyclerView\nThere is a query that I want to implement, and it collects all employees' salaries and displays them in recyclerView</p>\n<p>I will shorten the codes</p>\n<p><strong>The Problem</strong></p>\n<pre><code>Attempt to invoke virtual method 'void com.app.roomdatabase.database.MyViewModel.getSalariesSum(long, com.app.roomdatabase.database.GetSalarySumListener)' on a null object reference\n    at com.app.roomdatabase.Adapters.EmployeeSalaryAdapter$viewHolder.bind(EmployeeSalaryAdapter.java:68)\n    at com.app.roomdatabase.Adapters.EmployeeSalaryAdapter.onBindViewHolder(EmployeeSalaryAdapter.java:49)\n    at com.app.roomdatabase.Adapters.EmployeeSalaryAdapter.onBindViewHolder(EmployeeSalaryAdapter.java:19)\n</code></pre>\n<p><strong>The query that i used for retrieve salaries</strong></p>\n<pre><code>@Query(&quot;select sum(amount) from salary where empId=:emp_id&quot;)\ndouble getSalariesSum(long emp_id);\n</code></pre>\n<p><strong>Repository</strong></p>\n<pre><code> public void getSalariesSum(long emp_id, GetSalarySumListener listener ) {\n    MyRoomDatabase.databaseWriteExecuter.execute(new Runnable() {\n        @Override\n        public void run() {\n            double value = salaryDAO.getSalariesSum(emp_id);\n            listener.onValueSubmit(value);\n        }\n    });\n</code></pre>\n<p>**GetSalarySumListener **</p>\n<pre><code>public interface GetSalarySumListener {\nvoid onValueSubmit(double value);}\n</code></pre>\n<p><strong>ViewModel</strong></p>\n<pre><code>public void getSalariesSum(long emp_id, GetSalarySumListener listener ){\n    repository.getSalariesSum(emp_id,listener);\n}\n</code></pre>\n<p><strong>Adapter</strong></p>\n<pre><code>public class EmployeeSalaryAdapter extends RecyclerView.Adapter&lt;EmployeeSalaryAdapter.viewHolder&gt; {\n\nList &lt;Employee&gt; employees;\nprivate MyViewModel mvm;\n\npublic EmployeeSalaryAdapter(List &lt;Employee&gt; employees, MyViewModel mvm) {\n    this.employees = employees;\n    this.mvm = mvm;\n}\n\npublic List &lt;Employee&gt; getEmployees() {\n    return employees;\n}\n\npublic void setEmployees(List &lt;Employee&gt; employees) {\n    this.employees = employees;\n    notifyDataSetChanged();\n}\n\n@NonNull\n@Override\npublic viewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n\n    return new viewHolder(LayoutInflater.from(parent.getContext())\n            .inflate(R.layout.emp_sal_item,parent,false));\n}\n\n@Override\npublic void onBindViewHolder(@NonNull EmployeeSalaryAdapter.viewHolder holder, int position) {\n    Employee employee = employees.get(position);\n    holder.bind(employee,mvm);\n}\n\n@Override\npublic int getItemCount() {\n    return employees.size();\n}\n\npublic class viewHolder extends RecyclerView.ViewHolder {\n    EmpSalItemBinding binding;\n    Employee employee;\n    public viewHolder(@NonNull View itemView) {\n        super(itemView);\n        binding= EmpSalItemBinding.bind(itemView);\n\n    }\n    public void bind(Employee employee, MyViewModel mvm) {\n        this.employee = employee;\n        binding.empNameTv.setText(employee.getName());\n        mvm.getSalariesSum(employee.getId(), new GetSalarySumListener() {\n            @Override\n            public void onValueSubmit(double value) {\n                binding.empSalaryTv.setText(String.valueOf(value));\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","javafx","javafx-8"],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1409156160,"creation_date":1409156160,"answer_id":25532170,"question_id":25531743,"body_markdown":"`lookup(...)` will generally return null until a CSS pass has been made, which usually means you need to do it after showing the stage (but possibly after that).\r\n\r\nBut this is really not the right way to do what you&#39;re trying to do. Define a controller, set an `fx:id` on your `TreeView` and perform the initialization in the controller&#39;s `initialize()` method.","title":"JavaFX-8 - unable to find any node within SplitPane container","body":"<p><code>lookup(...)</code> will generally return null until a CSS pass has been made, which usually means you need to do it after showing the stage (but possibly after that).</p>\n\n<p>But this is really not the right way to do what you're trying to do. Define a controller, set an <code>fx:id</code> on your <code>TreeView</code> and perform the initialization in the controller's <code>initialize()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":16314712,"reputation":1,"user_id":11782213,"display_name":"Nindaime"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660950481,"creation_date":1660950481,"answer_id":73423026,"question_id":25531743,"body_markdown":"In my experience, the JavaFX splitpane has a different structure than other subclasses of the Pane class. I have encountered this issue, how I fixed it was to call the getItems() to get an Item of the splitpane which should be a container type e.g. anchorpane, stackpane etc. then performed the lookup method there and it worked just fine.\r\n\r\n    FXMLLoader pageLoader = new FXMLLoader(LoginPageController.class.getResource(&quot;FriendListPage.fxml&quot;));\r\n            SplitPane friendListPage = (SplitPane) pageLoader.load();    \r\n    \r\n    AnchorPane addFriendSubWindow = (AnchorPane) friendListPage.getItems().get(0);\r\n    \r\n            Button btnCloseFriendWindow = (Button) addFriendSubWindow.lookup(&quot;#btnCloseFriendWindow&quot;);\r\n            \r\n            btnCloseFriendWindow.setOnAction(event -&gt; {\r\n                if(!extraPanelContainer.getChildren().isEmpty())\r\n                    extraPanelContainer.getChildren().clear();\r\n                clearFriendList(friendListPage);\r\n            });\r\n\r\nthe btnCloseFriendWindow.setOnAction() used to return null, till I used this approach.","title":"JavaFX-8 - unable to find any node within SplitPane container","body":"<p>In my experience, the JavaFX splitpane has a different structure than other subclasses of the Pane class. I have encountered this issue, how I fixed it was to call the getItems() to get an Item of the splitpane which should be a container type e.g. anchorpane, stackpane etc. then performed the lookup method there and it worked just fine.</p>\n<pre><code>FXMLLoader pageLoader = new FXMLLoader(LoginPageController.class.getResource(&quot;FriendListPage.fxml&quot;));\n        SplitPane friendListPage = (SplitPane) pageLoader.load();    \n\nAnchorPane addFriendSubWindow = (AnchorPane) friendListPage.getItems().get(0);\n\n        Button btnCloseFriendWindow = (Button) addFriendSubWindow.lookup(&quot;#btnCloseFriendWindow&quot;);\n        \n        btnCloseFriendWindow.setOnAction(event -&gt; {\n            if(!extraPanelContainer.getChildren().isEmpty())\n                extraPanelContainer.getChildren().clear();\n            clearFriendList(friendListPage);\n        });\n</code></pre>\n<p>the btnCloseFriendWindow.setOnAction() used to return null, till I used this approach.</p>\n"}],"owner":{"account_id":4649671,"reputation":314,"user_id":3766891,"accept_rate":100,"display_name":"tty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":25532170,"answer_count":2,"score":0,"last_activity_date":1660950481,"creation_date":1409154843,"question_id":25531743,"body_markdown":"I need to load JavaFX TreeView data at application startup. The problem is node lookup() method always return null.\r\n\r\n**CODE**\r\n\r\n    public class Main extends Application {\r\n    \r\n        public static final String APPLICATION_NAME = &quot;testapp&quot; ;\r\n    \r\n        public static void main(String args[]) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            String fxml = &quot;/fxml/main-window.fxml&quot;;\r\n            String globalCss = &quot;/styles/main.css&quot;;\r\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxml));\r\n            Parent root = (Parent) loader.load();\r\n            Scene scene = new Scene(root);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.getScene().getStylesheets().add(globalCss);\r\n            primaryStage.setMaximized(true);\r\n    \r\n            TreeView treevw = (TreeView) scene.lookup(&quot;#treevw&quot;);\r\n            // lazy init here\r\n    \r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n**FXML**\r\n\r\n[http://pastebin.com/aC2gHMjp][1]\r\n\r\n    java version &quot;1.8.0_20&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_20-b26)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.20-b23, mixed mode)\r\n\r\ni&#39;ve  found [this][2] solution but it doesn&#39;t work for me (both).\r\n\r\nCan anybody please help to solve the issue?\r\n\r\n\r\n  [1]: http://pastebin.com/aC2gHMjp\r\n  [2]: https://stackoverflow.com/questions/12324799/javafx-2-0-fxml-strange-lookup-behaviour","title":"JavaFX-8 - unable to find any node within SplitPane container","body":"<p>I need to load JavaFX TreeView data at application startup. The problem is node lookup() method always return null.</p>\n\n<p><strong>CODE</strong></p>\n\n<pre><code>public class Main extends Application {\n\n    public static final String APPLICATION_NAME = \"testapp\" ;\n\n    public static void main(String args[]) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        String fxml = \"/fxml/main-window.fxml\";\n        String globalCss = \"/styles/main.css\";\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(fxml));\n        Parent root = (Parent) loader.load();\n        Scene scene = new Scene(root);\n        primaryStage.setScene(scene);\n        primaryStage.getScene().getStylesheets().add(globalCss);\n        primaryStage.setMaximized(true);\n\n        TreeView treevw = (TreeView) scene.lookup(\"#treevw\");\n        // lazy init here\n\n        primaryStage.show();\n    }\n}\n</code></pre>\n\n<p><strong>FXML</strong></p>\n\n<p><a href=\"http://pastebin.com/aC2gHMjp\" rel=\"nofollow noreferrer\">http://pastebin.com/aC2gHMjp</a></p>\n\n<pre><code>java version \"1.8.0_20\"\nJava(TM) SE Runtime Environment (build 1.8.0_20-b26)\nJava HotSpot(TM) 64-Bit Server VM (build 25.20-b23, mixed mode)\n</code></pre>\n\n<p>i've  found <a href=\"https://stackoverflow.com/questions/12324799/javafx-2-0-fxml-strange-lookup-behaviour\">this</a> solution but it doesn't work for me (both).</p>\n\n<p>Can anybody please help to solve the issue?</p>\n"},{"tags":["java","hql"],"comments":[{"owner":{"account_id":14679090,"reputation":1359,"user_id":10601203,"display_name":"Jesse"},"score":0,"creation_date":1660950862,"post_id":73423004,"comment_id":129662900,"body_markdown":"Are you looking for a [join](https://stackoverflow.com/a/1167969/10601203) in HQL? Also those fields in `User` are pulled down every single time you get a user, just because of the many-to-many join. They aren&#39;t lazy loading, they&#39;re eager loading. If you&#39;re worried about getting every single result, I would just get rid of that relationship altogether (from the code at least) and just manually query the user id from `Book` when you need the books. This way you can also use [limit and offset](https://stackoverflow.com/a/11655956/10601203) for server side pagination.","body":"Are you looking for a <a href=\"https://stackoverflow.com/a/1167969/10601203\">join</a> in HQL? Also those fields in <code>User</code> are pulled down every single time you get a user, just because of the many-to-many join. They aren&#39;t lazy loading, they&#39;re eager loading. If you&#39;re worried about getting every single result, I would just get rid of that relationship altogether (from the code at least) and just manually query the user id from <code>Book</code> when you need the books. This way you can also use <a href=\"https://stackoverflow.com/a/11655956/10601203\">limit and offset</a> for server side pagination."},{"owner":{"account_id":20070097,"reputation":124,"user_id":14715055,"display_name":"Umut Emre &#214;nder"},"score":0,"creation_date":1660952263,"post_id":73423004,"comment_id":129663074,"body_markdown":"Are you sure about the default fetch type of the ManyToMany annotation? I think it is set to LAZY default. Even so, I use Dto classes in queries, not the entities themselves, and these lists are not there. Therefore, I&#39;m not fetching those fields every time. Still, thanks for the suggestion.","body":"Are you sure about the default fetch type of the ManyToMany annotation? I think it is set to LAZY default. Even so, I use Dto classes in queries, not the entities themselves, and these lists are not there. Therefore, I&#39;m not fetching those fields every time. Still, thanks for the suggestion."}],"owner":{"account_id":20070097,"reputation":124,"user_id":14715055,"display_name":"Umut Emre &#214;nder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660950332,"creation_date":1660950332,"question_id":73423004,"body_markdown":"I am 100% sure I did not fully explain my question in the title. My English wasn&#39;t enough to explain.\r\n\r\nI have 2 Entities. `User` and `Book`. User has a list named `readBooks`. I want to reach the books in that list using HQL.\r\n\r\n```java\r\n@Entity\r\npublic class Book {\r\n ... (nothing about users)\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\npublic class User extends BaseUser {\r\n    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH})\r\n    private List&lt;Book&gt; readList;\r\n\r\n    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH})\r\n    private List&lt;Book&gt; favoriteList;\r\n}\r\n```\r\n\r\n\r\nI know I can easily reach the `readList` with `user.getReadList()`. However, I need to reach that list using HQL so that I can apply server-side pagination and sorting easily by just adding a `Pagable` to the function. \r\n","title":"HQL Command to Get List of Entity of Another Entity","body":"<p>I am 100% sure I did not fully explain my question in the title. My English wasn't enough to explain.</p>\n<p>I have 2 Entities. <code>User</code> and <code>Book</code>. User has a list named <code>readBooks</code>. I want to reach the books in that list using HQL.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Book {\n ... (nothing about users)\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class User extends BaseUser {\n    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH})\n    private List&lt;Book&gt; readList;\n\n    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH})\n    private List&lt;Book&gt; favoriteList;\n}\n</code></pre>\n<p>I know I can easily reach the <code>readList</code> with <code>user.getReadList()</code>. However, I need to reach that list using HQL so that I can apply server-side pagination and sorting easily by just adding a <code>Pagable</code> to the function.</p>\n"},{"tags":["java","tomcat"],"comments":[{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1339792326,"post_id":10993236,"comment_id":14467891,"body_markdown":"Where are your fragments located? What does the document element of your `web.xml` file look like? What version of Tomcat are you running?","body":"Where are your fragments located? What does the document element of your <code>web.xml</code> file look like? What version of Tomcat are you running?"}],"answers":[{"tags":[],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1643303899,"creation_date":1339670624,"answer_id":11031427,"question_id":10993236,"body_markdown":"&gt; Strange thing now is that we have a web-fragment.xml, but some of its contents doesn&#39;t get added to the effective web.xml.\r\n\r\nWell first of all, a `web-fragment.xml` wouldn&#39;t get *physically* included into the main `web.xml`. So when you say it doesn&#39;t get added to the effective `web.xml`, I feel you may be going wrong there.\r\n\r\nWeb fragments allow compoments to register themselves to the main `web.xml` at runtime. The only evidence you will find of this happening is by actually trying to use the compoment.\r\n\r\nI tried out a simple hello-world example with web fragments and got it to work. I used Tomcat 7 for this with a Servlet 3.0 webapp.\r\n\r\nMy main `web.xml` inside `WEB-INF` looks like the below:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;\r\n    \t&lt;display-name&gt;hello-world&lt;/display-name&gt;\r\n    \r\n    \t&lt;absolute-ordering&gt;\r\n    \t\t&lt;name&gt;filters&lt;/name&gt;\r\n    \t&lt;/absolute-ordering&gt;\r\n    &lt;/web-app&gt;\r\n\r\nI figured out that the only way we could register a `web-fragment.xml` was by adhering to the below rules:\r\n\r\n1. It must be named `web-fragment.xml`\r\n2. It must be placed in a JAR file inside `WEB-INF/lib`\r\n3. The `web-fragment.xml` must be present inside the `META-INF` directory of the JAR file.\r\n\r\nMy `web-fragment.xml` looks like:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-fragment xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-fragment_3_0.xsd&quot; id=&quot;WebAppFragment_ID&quot; version=&quot;3.0&quot;&gt;\r\n        &lt;name&gt;filters&lt;/name&gt;\r\n        &lt;filter&gt;\r\n            &lt;filter-name&gt;interceptor&lt;/filter-name&gt;\r\n            &lt;filter-class&gt;com.adarshr.Interceptor&lt;/filter-class&gt;\r\n        &lt;/filter&gt;\r\n        &lt;filter-mapping&gt;\r\n            &lt;filter-name&gt;interceptor&lt;/filter-name&gt;\r\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n        &lt;/filter-mapping&gt;\r\n    &lt;/web-fragment&gt;\r\n\r\nWith the above minimal setup, I was able to get the `Interceptor` filter to get fired, though it was placed in the `web-fragment.xml`.\r\n\r\nFinally, here is my directory structure (generated using http://www.adarshr.com/treegen)\r\n\r\n    +- hello-world\r\n       |\r\n       +- WEB-INF\r\n           |\r\n           +- lib\r\n           |   |\r\n           |   |- my-library.jar\r\n           |\r\n           |- web.xml\r\n\r\n\r\nThe JAR file `my-library.jar` has the below structure:\r\n\r\n    +- my-library.jar\r\n       |\r\n       +- META-INF\r\n           |\r\n           |- web-fragment.xml\r\n\r\nSome references:\r\n\r\n - https://blogs.oracle.com/swchan/entry/servlet_3_0_web_fragment\r\n - http://java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part2.html\r\n","title":"Missing elements from web-fragment.xml in the effective web.xml","body":"<blockquote>\n<p>Strange thing now is that we have a web-fragment.xml, but some of its contents doesn't get added to the effective web.xml.</p>\n</blockquote>\n<p>Well first of all, a <code>web-fragment.xml</code> wouldn't get <em>physically</em> included into the main <code>web.xml</code>. So when you say it doesn't get added to the effective <code>web.xml</code>, I feel you may be going wrong there.</p>\n<p>Web fragments allow compoments to register themselves to the main <code>web.xml</code> at runtime. The only evidence you will find of this happening is by actually trying to use the compoment.</p>\n<p>I tried out a simple hello-world example with web fragments and got it to work. I used Tomcat 7 for this with a Servlet 3.0 webapp.</p>\n<p>My main <code>web.xml</code> inside <code>WEB-INF</code> looks like the below:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;\n    &lt;display-name&gt;hello-world&lt;/display-name&gt;\n\n    &lt;absolute-ordering&gt;\n        &lt;name&gt;filters&lt;/name&gt;\n    &lt;/absolute-ordering&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>I figured out that the only way we could register a <code>web-fragment.xml</code> was by adhering to the below rules:</p>\n<ol>\n<li>It must be named <code>web-fragment.xml</code></li>\n<li>It must be placed in a JAR file inside <code>WEB-INF/lib</code></li>\n<li>The <code>web-fragment.xml</code> must be present inside the <code>META-INF</code> directory of the JAR file.</li>\n</ol>\n<p>My <code>web-fragment.xml</code> looks like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-fragment xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-fragment_3_0.xsd&quot; id=&quot;WebAppFragment_ID&quot; version=&quot;3.0&quot;&gt;\n    &lt;name&gt;filters&lt;/name&gt;\n    &lt;filter&gt;\n        &lt;filter-name&gt;interceptor&lt;/filter-name&gt;\n        &lt;filter-class&gt;com.adarshr.Interceptor&lt;/filter-class&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;interceptor&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n&lt;/web-fragment&gt;\n</code></pre>\n<p>With the above minimal setup, I was able to get the <code>Interceptor</code> filter to get fired, though it was placed in the <code>web-fragment.xml</code>.</p>\n<p>Finally, here is my directory structure (generated using <a href=\"http://www.adarshr.com/treegen\" rel=\"nofollow noreferrer\">http://www.adarshr.com/treegen</a>)</p>\n<pre><code>+- hello-world\n   |\n   +- WEB-INF\n       |\n       +- lib\n       |   |\n       |   |- my-library.jar\n       |\n       |- web.xml\n</code></pre>\n<p>The JAR file <code>my-library.jar</code> has the below structure:</p>\n<pre><code>+- my-library.jar\n   |\n   +- META-INF\n       |\n       |- web-fragment.xml\n</code></pre>\n<p>Some references:</p>\n<ul>\n<li><a href=\"https://blogs.oracle.com/swchan/entry/servlet_3_0_web_fragment\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/swchan/entry/servlet_3_0_web_fragment</a></li>\n<li><a href=\"http://java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part2.html\" rel=\"nofollow noreferrer\">http://java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part2.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3343828,"reputation":41,"user_id":2809412,"display_name":"Beilei Huang"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1379993596,"creation_date":1379992052,"answer_id":18972316,"question_id":10993236,"body_markdown":"Maybe you can check on `web.xml` that `metadata-complete=&quot;true&quot;` is not set. According to the Servlet spec if this flag is set to true, it will not load `web-fragment.xml` or any annotation such as `@WebFilter`","title":"Missing elements from web-fragment.xml in the effective web.xml","body":"<p>Maybe you can check on <code>web.xml</code> that <code>metadata-complete=\"true\"</code> is not set. According to the Servlet spec if this flag is set to true, it will not load <code>web-fragment.xml</code> or any annotation such as <code>@WebFilter</code></p>\n"},{"tags":[],"owner":{"account_id":211729,"reputation":588,"user_id":464087,"display_name":"EricS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660950144,"creation_date":1660950144,"answer_id":73422990,"question_id":10993236,"body_markdown":"I believe you were running into what I explained in answer to [this question][1].\r\n\r\nservet-mappings with the same servlet-name and filter-mappings with the same filter-name occurring in web-fragments are overridden by those in web.xml. They are only additive *across* web-fragments.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/21248491/can-i-refer-a-servlet-or-filter-in-web-xml-from-web-fragment-xml/73422964#73422964","title":"Missing elements from web-fragment.xml in the effective web.xml","body":"<p>I believe you were running into what I explained in answer to <a href=\"https://stackoverflow.com/questions/21248491/can-i-refer-a-servlet-or-filter-in-web-xml-from-web-fragment-xml/73422964#73422964\">this question</a>.</p>\n<p>servet-mappings with the same servlet-name and filter-mappings with the same filter-name occurring in web-fragments are overridden by those in web.xml. They are only additive <em>across</em> web-fragments.</p>\n"}],"owner":{"account_id":342508,"reputation":1337,"user_id":673696,"accept_rate":70,"display_name":"pderaaij"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9168,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1660950144,"creation_date":1339490900,"question_id":10993236,"body_markdown":"In our project we make use of web-fragments to define some servlets so the artifacts easily can be used in other projects.\r\n\r\nStrange thing now is that we have a web-fragment.xml, but some of its contents doesn&#39;t get added to the effective web.xml.\r\n\r\nBy example:\r\n\r\nThe following configurations is present in the effective web.xml:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;filter&gt;\r\n        &lt;filter-name&gt;superUserAutomaticLogon&lt;/filter-name&gt;\r\n        &lt;filter-class&gt;nl.caiw.cool.util.filters.SuperUserAutomaticLogonFilter&lt;/filter-class&gt;\r\n        &lt;async-supported&gt;false&lt;/async-supported&gt;\r\n    &lt;/filter&gt;\r\n\r\nBut the following isn&#39;t:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;filter&gt;\r\n        &lt;filter-name&gt;sitemesh&lt;/filter-name&gt;\r\n        &lt;filter-class&gt;com.opensymphony.module.sitemesh.filter.PageFilter&lt;/filter-class&gt;\r\n    &lt;/filter&gt;\r\n    \r\n    &lt;filter-mapping&gt;\r\n        &lt;filter-name&gt;sitemesh&lt;/filter-name&gt;\r\n        &lt;url-pattern&gt;/toolbox/modules/*&lt;/url-pattern&gt;\r\n    &lt;/filter-mapping&gt;\r\n\r\nWe have tried several things, but we can&#39;t figure it out. Hopefully someone here can send us  in the right direction.\r\n\r\nThanks in advance.\r\n","title":"Missing elements from web-fragment.xml in the effective web.xml","body":"<p>In our project we make use of web-fragments to define some servlets so the artifacts easily can be used in other projects.</p>\n\n<p>Strange thing now is that we have a web-fragment.xml, but some of its contents doesn't get added to the effective web.xml.</p>\n\n<p>By example:</p>\n\n<p>The following configurations is present in the effective web.xml:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter&gt;\n    &lt;filter-name&gt;superUserAutomaticLogon&lt;/filter-name&gt;\n    &lt;filter-class&gt;nl.caiw.cool.util.filters.SuperUserAutomaticLogonFilter&lt;/filter-class&gt;\n    &lt;async-supported&gt;false&lt;/async-supported&gt;\n&lt;/filter&gt;\n</code></pre>\n\n<p>But the following isn't:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter&gt;\n    &lt;filter-name&gt;sitemesh&lt;/filter-name&gt;\n    &lt;filter-class&gt;com.opensymphony.module.sitemesh.filter.PageFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;sitemesh&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/toolbox/modules/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p>We have tried several things, but we can't figure it out. Hopefully someone here can send us  in the right direction.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","velocity"],"answers":[{"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"down_vote_count":0,"up_vote_count":88,"is_accepted":true,"score":88,"last_activity_date":1515087660,"creation_date":1253103135,"answer_id":1432587,"question_id":1432468,"body_markdown":"There is some overhead parsing template. You might see some performance gain by pre-parsing the template if your template is large and you use it repeatedly. You can do something like this,\r\n\r\n    RuntimeServices runtimeServices = RuntimeSingleton.getRuntimeServices();\r\n    StringReader reader = new StringReader(bufferForYourTemplate);\r\n    Template template = new Template();\r\n    template.setRuntimeServices(runtimeServices);\r\n\r\n    /*\r\n     * The following line works for Velocity version up to 1.7\r\n     * For version 2, replace &quot;Template name&quot; with the variable, template\r\n     */\r\n    template.setData(runtimeServices.parse(reader, &quot;Template name&quot;)));\r\n\r\n    template.initDocument();\r\n \r\nThen you can call `template.merge()` over and over again without parsing it everytime.\r\n\r\nBTW, you can pass String directly to `Velocity.evaluate()`.","title":"How to use String as Velocity Template?","body":"<p>There is some overhead parsing template. You might see some performance gain by pre-parsing the template if your template is large and you use it repeatedly. You can do something like this,</p>\n\n<pre><code>RuntimeServices runtimeServices = RuntimeSingleton.getRuntimeServices();\nStringReader reader = new StringReader(bufferForYourTemplate);\nTemplate template = new Template();\ntemplate.setRuntimeServices(runtimeServices);\n\n/*\n * The following line works for Velocity version up to 1.7\n * For version 2, replace \"Template name\" with the variable, template\n */\ntemplate.setData(runtimeServices.parse(reader, \"Template name\")));\n\ntemplate.initDocument();\n</code></pre>\n\n<p>Then you can call <code>template.merge()</code> over and over again without parsing it everytime.</p>\n\n<p>BTW, you can pass String directly to <code>Velocity.evaluate()</code>.</p>\n"},{"tags":[],"owner":{"account_id":1139113,"reputation":18996,"user_id":1123501,"accept_rate":89,"display_name":"Georgios Syngouroglou"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1457017672,"creation_date":1457017672,"answer_id":35775791,"question_id":1432468,"body_markdown":"The above sample code is working for me. It uses Velocity version 1.7 and log4j.  \r\n  \r\n    private static void velocityWithStringTemplateExample() {\r\n        // Initialize the engine.\r\n        VelocityEngine engine = new VelocityEngine();\r\n        engine.setProperty(RuntimeConstants.RUNTIME_LOG_LOGSYSTEM_CLASS, &quot;org.apache.velocity.runtime.log.Log4JLogChute&quot;);\r\n        engine.setProperty(&quot;runtime.log.logsystem.log4j.logger&quot;, LOGGER.getName());\r\n        engine.setProperty(Velocity.RESOURCE_LOADER, &quot;string&quot;);\r\n        engine.addProperty(&quot;string.resource.loader.class&quot;, StringResourceLoader.class.getName());\r\n        engine.addProperty(&quot;string.resource.loader.repository.static&quot;, &quot;false&quot;);\r\n        //  engine.addProperty(&quot;string.resource.loader.modificationCheckInterval&quot;, &quot;1&quot;);\r\n        engine.init();\r\n\r\n        // Initialize my template repository. You can replace the &quot;Hello $w&quot; with your String.\r\n        StringResourceRepository repo = (StringResourceRepository) engine.getApplicationAttribute(StringResourceLoader.REPOSITORY_NAME_DEFAULT);\r\n        repo.putStringResource(&quot;woogie2&quot;, &quot;Hello $w&quot;);\r\n\r\n        // Set parameters for my template.\r\n        VelocityContext context = new VelocityContext();\r\n        context.put(&quot;w&quot;, &quot;world!&quot;);\r\n\r\n        // Get and merge the template with my parameters.\r\n        Template template = engine.getTemplate(&quot;woogie2&quot;);\r\n        StringWriter writer = new StringWriter();\r\n        template.merge(context, writer);\r\n        \r\n        // Show the result.\r\n        System.out.println(writer.toString());\r\n    }\r\n  \r\nA [similar](https://stackoverflow.com/questions/6521871/apaches-velocity-gettemplate-how-to-pass-string-object-instead-of-vm-fil/35775745#35775745) so question.","title":"How to use String as Velocity Template?","body":"<p>The above sample code is working for me. It uses Velocity version 1.7 and log4j.  </p>\n\n<pre><code>private static void velocityWithStringTemplateExample() {\n    // Initialize the engine.\n    VelocityEngine engine = new VelocityEngine();\n    engine.setProperty(RuntimeConstants.RUNTIME_LOG_LOGSYSTEM_CLASS, \"org.apache.velocity.runtime.log.Log4JLogChute\");\n    engine.setProperty(\"runtime.log.logsystem.log4j.logger\", LOGGER.getName());\n    engine.setProperty(Velocity.RESOURCE_LOADER, \"string\");\n    engine.addProperty(\"string.resource.loader.class\", StringResourceLoader.class.getName());\n    engine.addProperty(\"string.resource.loader.repository.static\", \"false\");\n    //  engine.addProperty(\"string.resource.loader.modificationCheckInterval\", \"1\");\n    engine.init();\n\n    // Initialize my template repository. You can replace the \"Hello $w\" with your String.\n    StringResourceRepository repo = (StringResourceRepository) engine.getApplicationAttribute(StringResourceLoader.REPOSITORY_NAME_DEFAULT);\n    repo.putStringResource(\"woogie2\", \"Hello $w\");\n\n    // Set parameters for my template.\n    VelocityContext context = new VelocityContext();\n    context.put(\"w\", \"world!\");\n\n    // Get and merge the template with my parameters.\n    Template template = engine.getTemplate(\"woogie2\");\n    StringWriter writer = new StringWriter();\n    template.merge(context, writer);\n\n    // Show the result.\n    System.out.println(writer.toString());\n}\n</code></pre>\n\n<p>A <a href=\"https://stackoverflow.com/questions/6521871/apaches-velocity-gettemplate-how-to-pass-string-object-instead-of-vm-fil/35775745#35775745\">similar</a> so question.</p>\n"},{"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1508843434,"creation_date":1508843434,"answer_id":46909004,"question_id":1432468,"body_markdown":"Velocity 2 can be integrated into the JSR223 [Java Scripting Language Framework][1] which make another option to transform string as a template:\r\n\r\n    ScriptEngineManager manager = new ScriptEngineManager();\r\n    manager.registerEngineName(&quot;velocity&quot;, new VelocityScriptEngineFactory());\r\n    ScriptEngine engine = manager.getEngineByName(&quot;velocity&quot;);\r\n    \r\n    \r\n    System.setProperty(VelocityScriptEngine.VELOCITY_PROPERTIES, &quot;path/to/velocity.properties&quot;);\r\n    String script = &quot;Hello $world&quot;;\r\n    Writer writer = new StringWriter();\r\n    engine.getContext().setWriter(writer);\r\n    Object result = engine.eval(script);\r\n    System.out.println(writer);\r\n\r\n[1]:http://velocity.apache.org/engine/2.0/developer-guide.html#velocity-scripting","title":"How to use String as Velocity Template?","body":"<p>Velocity 2 can be integrated into the JSR223 <a href=\"http://velocity.apache.org/engine/2.0/developer-guide.html#velocity-scripting\" rel=\"nofollow noreferrer\">Java Scripting Language Framework</a> which make another option to transform string as a template:</p>\n\n<pre><code>ScriptEngineManager manager = new ScriptEngineManager();\nmanager.registerEngineName(\"velocity\", new VelocityScriptEngineFactory());\nScriptEngine engine = manager.getEngineByName(\"velocity\");\n\n\nSystem.setProperty(VelocityScriptEngine.VELOCITY_PROPERTIES, \"path/to/velocity.properties\");\nString script = \"Hello $world\";\nWriter writer = new StringWriter();\nengine.getContext().setWriter(writer);\nObject result = engine.eval(script);\nSystem.out.println(writer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14867653,"reputation":21,"user_id":10736161,"display_name":"otmek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543784120,"creation_date":1543784120,"answer_id":53584523,"question_id":1432468,"body_markdown":"    RuntimeServices rs = RuntimeSingleton.getRuntimeServices();            \r\n    StringReader sr = new StringReader(&quot;Username is $username&quot;);\r\n    SimpleNode sn = rs.parse(sr, &quot;User Information&quot;);\r\n     \r\n    Template t = new Template();\r\n        t.setRuntimeServices(rs);\r\n        t.setData(sn);\r\n        t.initDocument();\r\n     \r\n    VelocityContext vc = new VelocityContext();\r\n    vc.put(&quot;username&quot;, &quot;John&quot;);\r\n     \r\n    StringWriter sw = new StringWriter();\r\n    t.merge(vc, sw);\r\n         \r\n    System.out.println(sw.toString());","title":"How to use String as Velocity Template?","body":"<pre><code>RuntimeServices rs = RuntimeSingleton.getRuntimeServices();            \nStringReader sr = new StringReader(\"Username is $username\");\nSimpleNode sn = rs.parse(sr, \"User Information\");\n\nTemplate t = new Template();\n    t.setRuntimeServices(rs);\n    t.setData(sn);\n    t.initDocument();\n\nVelocityContext vc = new VelocityContext();\nvc.put(\"username\", \"John\");\n\nStringWriter sw = new StringWriter();\nt.merge(vc, sw);\n\nSystem.out.println(sw.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1660947869,"creation_date":1576768580,"answer_id":59412507,"question_id":1432468,"body_markdown":"This works in Velocity 2.1\r\n\r\n```java\r\n// Initialize the engine\r\nVelocityEngine velocityEngine = new VelocityEngine();\r\nvelocityEngine.setProperty(Velocity.RESOURCE_LOADERS, &quot;string&quot;);\r\nvelocityEngine.setProperty(&quot;resource.loader.string.class&quot;, StringResourceLoader.class.getName());\r\nvelocityEngine.setProperty(&quot;resource.loader.string.cache&quot;, true);\r\nvelocityEngine.setProperty(&quot;resource.loader.string.modification_check_interval&quot;, 60);\r\nvelocityEngine.init();\r\n\r\n// Add template to repository\r\nStringResourceRepository repository = StringResourceLoader.getRepository();\r\nrepository.putStringResource(&quot;hello_world&quot;, &quot;Hello $w&quot;);\r\n\r\n// Set parameters\r\nVelocityContext context = new VelocityContext();\r\ncontext.put(&quot;w&quot;, &quot;world!&quot;);\r\n\r\n// Process the template\r\nStringWriter writer = new StringWriter();\r\nvelocityEngine.getTemplate(&quot;hello_world&quot;).merge( context, writer );\r\n\r\nSystem.out.println(writer.toString());\r\n```","title":"How to use String as Velocity Template?","body":"<p>This works in Velocity 2.1</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Initialize the engine\nVelocityEngine velocityEngine = new VelocityEngine();\nvelocityEngine.setProperty(Velocity.RESOURCE_LOADERS, &quot;string&quot;);\nvelocityEngine.setProperty(&quot;resource.loader.string.class&quot;, StringResourceLoader.class.getName());\nvelocityEngine.setProperty(&quot;resource.loader.string.cache&quot;, true);\nvelocityEngine.setProperty(&quot;resource.loader.string.modification_check_interval&quot;, 60);\nvelocityEngine.init();\n\n// Add template to repository\nStringResourceRepository repository = StringResourceLoader.getRepository();\nrepository.putStringResource(&quot;hello_world&quot;, &quot;Hello $w&quot;);\n\n// Set parameters\nVelocityContext context = new VelocityContext();\ncontext.put(&quot;w&quot;, &quot;world!&quot;);\n\n// Process the template\nStringWriter writer = new StringWriter();\nvelocityEngine.getTemplate(&quot;hello_world&quot;).merge( context, writer );\n\nSystem.out.println(writer.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5124438,"reputation":2515,"user_id":4107038,"accept_rate":44,"display_name":"Rajat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612440347,"creation_date":1612440347,"answer_id":66045272,"question_id":1432468,"body_markdown":"If you are looking for just variable substitution then following works\r\n\r\n    public String velocityEvaluate(final String template, final NotificationDTO notificationDTO) {\r\n        final Map&lt;String, String&gt; context = getContextMap(notificationDTO);\r\n        final VelocityContext velocityContext = new VelocityContext(context);\r\n        final StringWriter stringWriter = new StringWriter();\r\n        final StringReader reader = new StringReader(template);\r\n        Velocity.evaluate(velocityContext, stringWriter, &quot;Velocity String Template Evaluation&quot;, reader);\r\n        return stringWriter.toString();\r\n    }","title":"How to use String as Velocity Template?","body":"<p>If you are looking for just variable substitution then following works</p>\n<pre><code>public String velocityEvaluate(final String template, final NotificationDTO notificationDTO) {\n    final Map&lt;String, String&gt; context = getContextMap(notificationDTO);\n    final VelocityContext velocityContext = new VelocityContext(context);\n    final StringWriter stringWriter = new StringWriter();\n    final StringReader reader = new StringReader(template);\n    Velocity.evaluate(velocityContext, stringWriter, &quot;Velocity String Template Evaluation&quot;, reader);\n    return stringWriter.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25676540,"reputation":1,"user_id":19439889,"display_name":"Apurv Sheth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656470928,"creation_date":1656470928,"answer_id":72795243,"question_id":1432468,"body_markdown":"In case if any one looking to transform from json string to json object, in that case, need to convert json string to JsonNode &amp; store it in context.\r\nFor Ex:\r\n   \r\n\r\n    String jsonDataAsString = &quot;{&quot;name&quot;: &quot;Aps&quot;}&quot;;\r\n    JsonNode nodes = new ObjectMapper().readTree(jsonDataAsString );\r\n    VelocityContext velocityContext = new VelocityContext();\r\n    velocityContext.put(&quot;root&quot;, nodes);\r\n\r\nthen in your template, you can refer originating data which are set as &quot;root&quot; via &quot;$root.&quot;+property\r\n\r\n    $root.name\r\n\r\nHope it helps someone.","title":"How to use String as Velocity Template?","body":"<p>In case if any one looking to transform from json string to json object, in that case, need to convert json string to JsonNode &amp; store it in context.\nFor Ex:</p>\n<pre><code>String jsonDataAsString = &quot;{&quot;name&quot;: &quot;Aps&quot;}&quot;;\nJsonNode nodes = new ObjectMapper().readTree(jsonDataAsString );\nVelocityContext velocityContext = new VelocityContext();\nvelocityContext.put(&quot;root&quot;, nodes);\n</code></pre>\n<p>then in your template, you can refer originating data which are set as &quot;root&quot; via &quot;$root.&quot;+property</p>\n<pre><code>$root.name\n</code></pre>\n<p>Hope it helps someone.</p>\n"}],"owner":{"account_id":876819,"reputation":810,"user_id":129427,"display_name":"tomsame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47030,"favorite_count":0,"down_vote_count":0,"up_vote_count":66,"accepted_answer_id":1432587,"answer_count":7,"score":66,"last_activity_date":1660947869,"creation_date":1253101454,"question_id":1432468,"body_markdown":"What is the best way to create Velocity Template from a String?\r\n\r\nI&#39;m aware of *Velocity.evaluate* method where I can pass String or StringReader, but I&#39;m curios is there a better way to do it (e.g. any advantage of creating an instance of Template).","title":"How to use String as Velocity Template?","body":"<p>What is the best way to create Velocity Template from a String?</p>\n\n<p>I'm aware of <em>Velocity.evaluate</em> method where I can pass String or StringReader, but I'm curios is there a better way to do it (e.g. any advantage of creating an instance of Template).</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","confluent-platform"],"answers":[{"tags":[],"owner":{"account_id":6384814,"reputation":60263,"user_id":4953079,"display_name":"Matthias J. Sax"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587401175,"creation_date":1587245916,"answer_id":61296587,"question_id":61245480,"body_markdown":"&gt; Is it to be expected that the Kafka Streams app remains in a RUNNING state when it has no active consumers? If yes: why?\r\n\r\nIt depends on the version. In older version (2.1.x and older), Kafka Streams would indeed stay in RUNNING state, even if all threads died. This issue is fixed in `v2.2.0` via https://issues.apache.org/jira/browse/KAFKA-7657.\r\n\r\n&gt; How can we detect (programatically / via metrics) that a Kafka Streams app has entered such a zombie state where it has no active consumer?\r\n\r\nEven in older versions, you can register an uncaught exception handler on the `KafkaStreams` client. This handler is invoked each time a `StreamThreads` dies.\r\n\r\nBtw: In upcoming 2.6.0 release, a new metric `alive-stream-threads` is added to track the number of running threads: https://issues.apache.org/jira/browse/KAFKA-9753","title":"How to detect a Kafka Streams app in zombie state","body":"<blockquote>\n  <p>Is it to be expected that the Kafka Streams app remains in a RUNNING state when it has no active consumers? If yes: why?</p>\n</blockquote>\n\n<p>It depends on the version. In older version (2.1.x and older), Kafka Streams would indeed stay in RUNNING state, even if all threads died. This issue is fixed in <code>v2.2.0</code> via <a href=\"https://issues.apache.org/jira/browse/KAFKA-7657\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/KAFKA-7657</a>.</p>\n\n<blockquote>\n  <p>How can we detect (programatically / via metrics) that a Kafka Streams app has entered such a zombie state where it has no active consumer?</p>\n</blockquote>\n\n<p>Even in older versions, you can register an uncaught exception handler on the <code>KafkaStreams</code> client. This handler is invoked each time a <code>StreamThreads</code> dies.</p>\n\n<p>Btw: In upcoming 2.6.0 release, a new metric <code>alive-stream-threads</code> is added to track the number of running threads: <a href=\"https://issues.apache.org/jira/browse/KAFKA-9753\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/KAFKA-9753</a></p>\n"},{"tags":[],"owner":{"account_id":15140333,"reputation":166,"user_id":10925514,"display_name":"S Blee-G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660947744,"creation_date":1660947744,"answer_id":73422767,"question_id":61245480,"body_markdown":"FYI there&#39;s a similar discussion going on right now on the user mailing list -- subject line &quot;kafka stream zombie state&quot;\r\n\r\nI&#39;ll start by telling you guys what I said there, since there seem to be some misconceptions in the conversation so far: basically, the error message is kind of misleading because it implies this is being logged by consumer itself and that it is *currently* sending this LeaveGroup/has noticed already that it missed the poll interval. But this message is actually getting logged by the heartbeat thread when *it* notices that the main consumer thread hasn&#39;t polled within the max poll timeout, and is technically just marking it as &quot;needs to rejoin&quot; so that the consumer knows to send this LeaveGroup when it finally does poll again. However, if the consumer thread is actually stuck somewhere in the user/application code and cannot break out to continue the poll loop, then the consumer will never actually trigger a rebalance, try to rejoin, send a LeaveGroup request, etc. So that&#39;s why the state continues to be RUNNING rather than REBALANCING.\r\n\r\nFor the above reason, metrics like `num-alive-stream-threads` won&#39;t help either, since the thread isn&#39;t dying -- it&#39;s just stuck. In fact even if the thread became unstuck, it would just rejoin and then continue as usual, it wouldn&#39;t &quot;die&quot; (since that only occurs when encountering a fatal exception).\r\n\r\nLong story short: the broker and heartbeat thread have noticed that the consumer is no longer in the group, but the StreamThread is likely stuck somewhere in the topology and thus the consumer itself actually has no idea that it&#39;s been kicked out of the consumer group","title":"How to detect a Kafka Streams app in zombie state","body":"<p>FYI there's a similar discussion going on right now on the user mailing list -- subject line &quot;kafka stream zombie state&quot;</p>\n<p>I'll start by telling you guys what I said there, since there seem to be some misconceptions in the conversation so far: basically, the error message is kind of misleading because it implies this is being logged by consumer itself and that it is <em>currently</em> sending this LeaveGroup/has noticed already that it missed the poll interval. But this message is actually getting logged by the heartbeat thread when <em>it</em> notices that the main consumer thread hasn't polled within the max poll timeout, and is technically just marking it as &quot;needs to rejoin&quot; so that the consumer knows to send this LeaveGroup when it finally does poll again. However, if the consumer thread is actually stuck somewhere in the user/application code and cannot break out to continue the poll loop, then the consumer will never actually trigger a rebalance, try to rejoin, send a LeaveGroup request, etc. So that's why the state continues to be RUNNING rather than REBALANCING.</p>\n<p>For the above reason, metrics like <code>num-alive-stream-threads</code> won't help either, since the thread isn't dying -- it's just stuck. In fact even if the thread became unstuck, it would just rejoin and then continue as usual, it wouldn't &quot;die&quot; (since that only occurs when encountering a fatal exception).</p>\n<p>Long story short: the broker and heartbeat thread have noticed that the consumer is no longer in the group, but the StreamThread is likely stuck somewhere in the topology and thus the consumer itself actually has no idea that it's been kicked out of the consumer group</p>\n"}],"owner":{"account_id":6079898,"reputation":103,"user_id":4745990,"display_name":"Pieter Hameete"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1025,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1660947744,"creation_date":1587024460,"question_id":61245480,"body_markdown":"One of our Kafka Streams Application&#39;s StreamThread consumers entered a zombie state after producing the following log message:\r\n\r\n&gt; [Consumer clientId=notification-processor-db9aa8a3-6c3b-453b-b8c8-106bf2fa257d-StreamThread-1-consumer, groupId=notification-processor] Member notification-processor-db9aa8a3-6c3b-453b-b8c8-106bf2fa257d-StreamThread-1-consumer-b2b9eac3-c374-43e2-bbc3-d9ee514a3c16 sending LeaveGroup request to coordinator ****:9092 (id: 2147483646 rack: null) due to consumer poll timeout has expired. This means the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spending too much time processing messages. You can address this either by increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\r\n\r\nIt seems the StreamThread&#39;s Kafka Consumer has left the consumer group, but the Kafka Streams App remained in a RUNNING state while not consuming any new records.\r\n\r\nI would like to detect that a Kafka Streams App has entered such a zombie state so it can be shut down and replaced with a new instance. Normally we do this via a Kubernetes health check that verifies that the Kafka Streams App is in a RUNNING or REPARTITIONING state, but that is not working for this case.\r\n\r\nTherefore I have two questions:\r\n\r\n 1.  Is it to be expected that the Kafka Streams app remains in a RUNNING state when it has no active consumers? If yes: why?\r\n 2. How can we detect (programatically / via metrics) that a Kafka Streams app has entered such a zombie state where it has no active consumer?\r\n\r\n\r\n","title":"How to detect a Kafka Streams app in zombie state","body":"<p>One of our Kafka Streams Application's StreamThread consumers entered a zombie state after producing the following log message:</p>\n\n<blockquote>\n  <p>[Consumer clientId=notification-processor-db9aa8a3-6c3b-453b-b8c8-106bf2fa257d-StreamThread-1-consumer, groupId=notification-processor] Member notification-processor-db9aa8a3-6c3b-453b-b8c8-106bf2fa257d-StreamThread-1-consumer-b2b9eac3-c374-43e2-bbc3-d9ee514a3c16 sending LeaveGroup request to coordinator ****:9092 (id: 2147483646 rack: null) due to consumer poll timeout has expired. This means the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spending too much time processing messages. You can address this either by increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.</p>\n</blockquote>\n\n<p>It seems the StreamThread's Kafka Consumer has left the consumer group, but the Kafka Streams App remained in a RUNNING state while not consuming any new records.</p>\n\n<p>I would like to detect that a Kafka Streams App has entered such a zombie state so it can be shut down and replaced with a new instance. Normally we do this via a Kubernetes health check that verifies that the Kafka Streams App is in a RUNNING or REPARTITIONING state, but that is not working for this case.</p>\n\n<p>Therefore I have two questions:</p>\n\n<ol>\n<li>Is it to be expected that the Kafka Streams app remains in a RUNNING state when it has no active consumers? If yes: why?</li>\n<li>How can we detect (programatically / via metrics) that a Kafka Streams app has entered such a zombie state where it has no active consumer?</li>\n</ol>\n"},{"tags":["java","junit","jacoco","completable-future"],"answers":[{"tags":[],"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660945209,"creation_date":1660944768,"answer_id":73422447,"question_id":73422306,"body_markdown":"What I do usually to make this kind of methods testable is using a CountDownLatch.\r\n\r\nFor example, you may modify your class by creating another method (that you can make private but visible only for testing through the appropriate annotation so that the users of your API do not see it) that takes in input a CountDownLatch:\r\n\r\n    public void sendMessageAsync(final PublishRequest request, CountDownLatch latch) {\r\n\r\n        final CompletableFuture&lt;PublishResponse&gt; responseCompletableFuture = m_serviceAClient.publish(request);\r\n\r\n        responseCompletableFuture.whenCompleteAsync((response, exception) -&gt; {\r\n           if (exception != null) {\r\n                try {\r\n                    m_serviceBClient.sendMessage(request.getMessage())\r\n                } catch (Exception e) {\r\n                   log.error(&quot;Failed to send message to fallback service.&quot;);\r\n                }\r\n             } else {\r\n                log.info(&quot;Successfully called service client&quot;);   \r\n             }\r\n          }\r\n        latch.countDown();\r\n        return;\r\n    }\r\n\r\nThen in your test, you create a CountDownLatch with count 1 and await for it before the test ends:\r\n\r\n    CountDownLatch testLatch = new CountDownLatch(1);\r\n    MyClass.sendMessageAsync(new PublishRequest(&quot;test-message&quot;), testLatch);\r\n    testLatch.await(1, TimeUnit.MINUTES);\r\n\r\nLike that, you make your method testable even if it is asynchronous. Of course, you will create a method with the original signature (without latch) that simply calls the new method by passing a sample latch that will be ignored by production code.\r\n\r\nTo give some further explanation, the CountDownLatch is a concurrent utility that allows you to countDown in a multi-threading context (meaning one thread can countdown and the other threads will see the same value) and also allows you to .await (with a timeout if wanted) that the CountDown reaches zero before the thread which await is released. It is a pretty practical way to let another thread doing some work while the main thread waits for that work to be done (in your case, your test thread waits for the completable future thread to do what it has to do before to complete the test)    ","title":"Junit test async method call in Completable Future in Java","body":"<p>What I do usually to make this kind of methods testable is using a CountDownLatch.</p>\n<p>For example, you may modify your class by creating another method (that you can make private but visible only for testing through the appropriate annotation so that the users of your API do not see it) that takes in input a CountDownLatch:</p>\n<pre><code>public void sendMessageAsync(final PublishRequest request, CountDownLatch latch) {\n\n    final CompletableFuture&lt;PublishResponse&gt; responseCompletableFuture = m_serviceAClient.publish(request);\n\n    responseCompletableFuture.whenCompleteAsync((response, exception) -&gt; {\n       if (exception != null) {\n            try {\n                m_serviceBClient.sendMessage(request.getMessage())\n            } catch (Exception e) {\n               log.error(&quot;Failed to send message to fallback service.&quot;);\n            }\n         } else {\n            log.info(&quot;Successfully called service client&quot;);   \n         }\n      }\n    latch.countDown();\n    return;\n}\n</code></pre>\n<p>Then in your test, you create a CountDownLatch with count 1 and await for it before the test ends:</p>\n<pre><code>CountDownLatch testLatch = new CountDownLatch(1);\nMyClass.sendMessageAsync(new PublishRequest(&quot;test-message&quot;), testLatch);\ntestLatch.await(1, TimeUnit.MINUTES);\n</code></pre>\n<p>Like that, you make your method testable even if it is asynchronous. Of course, you will create a method with the original signature (without latch) that simply calls the new method by passing a sample latch that will be ignored by production code.</p>\n<p>To give some further explanation, the CountDownLatch is a concurrent utility that allows you to countDown in a multi-threading context (meaning one thread can countdown and the other threads will see the same value) and also allows you to .await (with a timeout if wanted) that the CountDown reaches zero before the thread which await is released. It is a pretty practical way to let another thread doing some work while the main thread waits for that work to be done (in your case, your test thread waits for the completable future thread to do what it has to do before to complete the test)</p>\n"}],"owner":{"account_id":4827450,"reputation":33,"user_id":3896549,"display_name":"alchems"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":967,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660945209,"creation_date":1660943618,"question_id":73422306,"body_markdown":"I have a method:\r\n\r\n```\r\npublic sendMessageAsync(final PublishRequest request) {\r\n\r\n    final CompletableFuture&lt;PublishResponse&gt; responseCompletableFuture = m_serviceAClient.publish(request);\r\n\r\n    responseCompletableFuture.whenCompleteAsync((response, exception) -&gt; {\r\n       if (exception != null) {\r\n            try {\r\n                m_serviceBClient.sendMessage(request.getMessage())\r\n            } catch (Exception e) {\r\n               log.error(&quot;Failed to send message to fallback service.&quot;);\r\n            }\r\n         } else {\r\n            log.info(&quot;Successfully called service client&quot;);   \r\n         }\r\n      }\r\n    return;\r\n}\r\n```\r\n\r\nUnit test:\r\n\r\n```\r\npublic void testsendMessageAsyncWhenServiceAThrowsException() {\r\n        CompletableFuture&lt;PublishResponse&gt; failedFuture = CompletableFuture.failedFuture(\r\n                new RuntimeException(&quot;Failed to publish message to Service A&quot;));\r\n        doReturn(failedFuture).when(mockServiceAClient).publish(any(PublishRequest.class));\r\n        doReturn(&quot;message-id&quot;).when(mockServiceBClient).sendMessage(anyString());\r\n        MyClass.sendMessageAsync(new PublishRequest(&quot;test-message&quot;));\r\n}\r\n```\r\n\r\nI do not see the jacoco unit test coverage covering the line `m_serviceBClient.sendMessage(request.getMessage())`.\r\n\r\nI believe this is because by the time future callback handler executes, the junit test is already finished, so the code coverage tool doesn&#39;t detect the future callback statement coverage.","title":"Junit test async method call in Completable Future in Java","body":"<p>I have a method:</p>\n<pre><code>public sendMessageAsync(final PublishRequest request) {\n\n    final CompletableFuture&lt;PublishResponse&gt; responseCompletableFuture = m_serviceAClient.publish(request);\n\n    responseCompletableFuture.whenCompleteAsync((response, exception) -&gt; {\n       if (exception != null) {\n            try {\n                m_serviceBClient.sendMessage(request.getMessage())\n            } catch (Exception e) {\n               log.error(&quot;Failed to send message to fallback service.&quot;);\n            }\n         } else {\n            log.info(&quot;Successfully called service client&quot;);   \n         }\n      }\n    return;\n}\n</code></pre>\n<p>Unit test:</p>\n<pre><code>public void testsendMessageAsyncWhenServiceAThrowsException() {\n        CompletableFuture&lt;PublishResponse&gt; failedFuture = CompletableFuture.failedFuture(\n                new RuntimeException(&quot;Failed to publish message to Service A&quot;));\n        doReturn(failedFuture).when(mockServiceAClient).publish(any(PublishRequest.class));\n        doReturn(&quot;message-id&quot;).when(mockServiceBClient).sendMessage(anyString());\n        MyClass.sendMessageAsync(new PublishRequest(&quot;test-message&quot;));\n}\n</code></pre>\n<p>I do not see the jacoco unit test coverage covering the line <code>m_serviceBClient.sendMessage(request.getMessage())</code>.</p>\n<p>I believe this is because by the time future callback handler executes, the junit test is already finished, so the code coverage tool doesn't detect the future callback statement coverage.</p>\n"},{"tags":["java","ssl-certificate","x509certificate"],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660944670,"creation_date":1660943954,"answer_id":73422346,"question_id":73418165,"body_markdown":"**This is common/standard for LetsEncrypt certs**, see https://letsencrypt.org/docs/dst-root-ca-x3-expiration-september-2021 and as linked there https://letsencrypt.org/2020/12/21/extending-android-compatibility.html (and also dozens of Qs on this and several other Stacks last Sept-Oct when the DST X3 expiration occurred, essentially all of them due to OpenSSL 1.0.2 which mishandled it). From the transparency logs (per the Sectigo viewer) it appears badssl didn&#39;t have any LetsEncrypt cert before 2022-02, and after then might or might not have used it for the base domain you specify.\r\n\r\nThe server always _sends_ the &#39;temporary&#39; (2024) cross cert -- with issuer DST X3 shown in your display -- but a non-obsolete client can ignore it and use (_substitute_) the root -- with issuer ISRG and expiration 2035 -- which contains the same subject name and subject key so it verifies the lower-level cert(s). A browser like Firefox or Chrome/Edge shows you the cert chain _found_ (and substituted) from the local truststore not necessarily the one received. Similarly `openssl s_client -showcerts` shows in PEM the certs received, and that&#39;s what your command looks at, but the callback trace at the beginning, on stderr which your command discarded, shows the cert chain that was actually validated, followed by on stdout the cert chain received, and (given 1.1.0 up with a decent truststore i.e. cacert.pem file or similar) the validation will succeed like this:\r\n```\r\n$ openssl s_client -connect badssl.com:443 -servername badssl.com \r\ndepth=2 C = US, O = Internet Security Research Group, CN = ISRG Root X1\r\nverify return:1\r\ndepth=1 C = US, O = Let&#39;s Encrypt, CN = R3\r\nverify return:1\r\ndepth=0 CN = *.badssl.com\r\nverify return:1\r\nCONNECTED(00000003)\r\n---\r\nCertificate chain\r\n 0 s:CN = *.badssl.com\r\n   i:C = US, O = Let&#39;s Encrypt, CN = R3\r\n 1 s:C = US, O = Let&#39;s Encrypt, CN = R3\r\n   i:C = US, O = Internet Security Research Group, CN = ISRG Root X1\r\n 2 s:C = US, O = Internet Security Research Group, CN = ISRG Root X1\r\n   i:O = Digital Signature Trust Co., CN = DST Root CA X3\r\n... (much) more\r\n```\r\nThe cert _sent_ at depth=2 was ISRG-cross-DST but the one validated, substituted from the truststore, was ISRG-root; we can tell by the _absence_ of a verify error which would be printed if nonzero.\r\n\r\nJava CertPathValidator only checks the chain you give it, and thus may fail on recent versions since the expired DST X3 root has been removed from the default truststore at least in Oracle builds (OpenJDK may vary, especially where it is built to use a platform-provided truststore, as is typical on Linux). But Java does not check anchor expiration, so if you use an older truststore that had DST X3, or manually add it back, this succeeds. \r\n\r\nHowever the JSSE default TrustManager is not limited to validating the chain received; it tries that first, but if that fails it tries to _build_ an alternate and valid chain (for the same leaf) with CertPathBuilder, which succeeds for this case using the ISRG root. (AFAICT this re-built path isn&#39;t available on any API, which can be a nuisance.) That&#39;s why when you connect to a server with a bad cert the exception thrown and usually displayed/logged says &quot;path building failed&quot; -- it first tried validating as received, which failed, then it tried building (and validating), which also failed, and _then_ it threw.\r\n\r\nThat behavior -- trying to find an alternate chain if needed -- is generally considered best practice, and probably what you should do it you want to write your own TrustManager for SSL/TLS, though it is not required by any applicable standard I know of. Browsers can also fill in chain/intermediate certs if the server fails to send them as required, if the available cert(s) has(have) AIA with caIssuer usable; Java CertPathBuilder can do this but not by default.\r\n\r\nIncidentally you can also show in PEM the cert chain (sent and) received -- not validated at all -- with `keytool -printcert -sslserver badssl.com -rfc`. If you leave off `-rfc` it decodes each cert in a form similar to `openssl x509 -text`, which is convenient if you just want to look at one or a few field(s) as here, but doesn&#39;t give you the definitive cert encoding usable for additional checking or processing later. ","title":"Badssl.com showing different certificate chains when accessed via browser or via java CertPathValidator?","body":"<p><strong>This is common/standard for LetsEncrypt certs</strong>, see <a href=\"https://letsencrypt.org/docs/dst-root-ca-x3-expiration-september-2021\" rel=\"nofollow noreferrer\">https://letsencrypt.org/docs/dst-root-ca-x3-expiration-september-2021</a> and as linked there <a href=\"https://letsencrypt.org/2020/12/21/extending-android-compatibility.html\" rel=\"nofollow noreferrer\">https://letsencrypt.org/2020/12/21/extending-android-compatibility.html</a> (and also dozens of Qs on this and several other Stacks last Sept-Oct when the DST X3 expiration occurred, essentially all of them due to OpenSSL 1.0.2 which mishandled it). From the transparency logs (per the Sectigo viewer) it appears badssl didn't have any LetsEncrypt cert before 2022-02, and after then might or might not have used it for the base domain you specify.</p>\n<p>The server always <em>sends</em> the 'temporary' (2024) cross cert -- with issuer DST X3 shown in your display -- but a non-obsolete client can ignore it and use (<em>substitute</em>) the root -- with issuer ISRG and expiration 2035 -- which contains the same subject name and subject key so it verifies the lower-level cert(s). A browser like Firefox or Chrome/Edge shows you the cert chain <em>found</em> (and substituted) from the local truststore not necessarily the one received. Similarly <code>openssl s_client -showcerts</code> shows in PEM the certs received, and that's what your command looks at, but the callback trace at the beginning, on stderr which your command discarded, shows the cert chain that was actually validated, followed by on stdout the cert chain received, and (given 1.1.0 up with a decent truststore i.e. cacert.pem file or similar) the validation will succeed like this:</p>\n<pre><code>$ openssl s_client -connect badssl.com:443 -servername badssl.com \ndepth=2 C = US, O = Internet Security Research Group, CN = ISRG Root X1\nverify return:1\ndepth=1 C = US, O = Let's Encrypt, CN = R3\nverify return:1\ndepth=0 CN = *.badssl.com\nverify return:1\nCONNECTED(00000003)\n---\nCertificate chain\n 0 s:CN = *.badssl.com\n   i:C = US, O = Let's Encrypt, CN = R3\n 1 s:C = US, O = Let's Encrypt, CN = R3\n   i:C = US, O = Internet Security Research Group, CN = ISRG Root X1\n 2 s:C = US, O = Internet Security Research Group, CN = ISRG Root X1\n   i:O = Digital Signature Trust Co., CN = DST Root CA X3\n... (much) more\n</code></pre>\n<p>The cert <em>sent</em> at depth=2 was ISRG-cross-DST but the one validated, substituted from the truststore, was ISRG-root; we can tell by the <em>absence</em> of a verify error which would be printed if nonzero.</p>\n<p>Java CertPathValidator only checks the chain you give it, and thus may fail on recent versions since the expired DST X3 root has been removed from the default truststore at least in Oracle builds (OpenJDK may vary, especially where it is built to use a platform-provided truststore, as is typical on Linux). But Java does not check anchor expiration, so if you use an older truststore that had DST X3, or manually add it back, this succeeds.</p>\n<p>However the JSSE default TrustManager is not limited to validating the chain received; it tries that first, but if that fails it tries to <em>build</em> an alternate and valid chain (for the same leaf) with CertPathBuilder, which succeeds for this case using the ISRG root. (AFAICT this re-built path isn't available on any API, which can be a nuisance.) That's why when you connect to a server with a bad cert the exception thrown and usually displayed/logged says &quot;path building failed&quot; -- it first tried validating as received, which failed, then it tried building (and validating), which also failed, and <em>then</em> it threw.</p>\n<p>That behavior -- trying to find an alternate chain if needed -- is generally considered best practice, and probably what you should do it you want to write your own TrustManager for SSL/TLS, though it is not required by any applicable standard I know of. Browsers can also fill in chain/intermediate certs if the server fails to send them as required, if the available cert(s) has(have) AIA with caIssuer usable; Java CertPathBuilder can do this but not by default.</p>\n<p>Incidentally you can also show in PEM the cert chain (sent and) received -- not validated at all -- with <code>keytool -printcert -sslserver badssl.com -rfc</code>. If you leave off <code>-rfc</code> it decodes each cert in a form similar to <code>openssl x509 -text</code>, which is convenient if you just want to look at one or a few field(s) as here, but doesn't give you the definitive cert encoding usable for additional checking or processing later.</p>\n"}],"owner":{"account_id":26107437,"reputation":13,"user_id":19801936,"display_name":"zgael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":292,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73422346,"answer_count":1,"score":1,"last_activity_date":1660944670,"creation_date":1660918521,"question_id":73418165,"body_markdown":"Context and testing with Java :\r\n-----------------------\r\n\r\nI&#39;ve been using [Badssl][1] to test certificate verification for a tiny Java client.\r\nIt used to work well in January.\r\nBut as of today, there&#39;s something failing : the certificate for Badssl base domain (badssl.com) is not verified anymore by the following piece of code : \r\n\r\n```\r\npublic static void main(String[] args) throws KeyStoreException, IOException, CertificateException, NoSuchAlgorithmException {\r\n        KeyStore keystore=KeyStore.getInstance(&quot;JKS&quot;);\r\n        FileInputStream stream = new FileInputStream(getTrustStore());\r\n        keystore.load(stream, getTrustStorePassword());\r\n\r\n        X509TrustManager secureTrustManager = new X509TrustManager() {\r\n            @Override\r\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n            }\r\n\r\n            @Override\r\n            public void checkServerTrusted(X509Certificate[] chain, String authType) {\r\n                PKIXParameters params = null;\r\n                try {\r\n                    CertPath certPath = CertificateFactory.getInstance(&quot;X.509&quot;).generateCertPath(Arrays.asList(chain));\r\n                    params = new PKIXParameters(keystore);\r\n                    params.setRevocationEnabled(true);\r\n                    CertPathValidator.getInstance(&quot;PKIX&quot;).validate(certPath, params);\r\n                } catch (CertPathValidatorException e) {\r\n                    if (e.getMessage().startsWith(&quot;Certificate has been revoked&quot;)) {\r\n                        System.out.println(&quot;One certificate of the trust chain has been revoked : &quot; + e.getMessage());\r\n                    } else {\r\n                        System.out.println(chain[2]); // Displays the root CA - ISRG X1\r\n\r\n                        System.out.println(&quot;============TRUSTANCHORS==============&quot;);\r\n                        // Displays all trusted certs, including ISRG X1\r\n                        for (TrustAnchor t : params.getTrustAnchors()) {\r\n                            System.out.println(t.toString());\r\n                        }\r\n                        // This is where the code unexpectedly exits\r\n                        System.out.println(&quot;Unexpected error during certificate revocation validation : &quot; + e.getMessage());\r\n                    }\r\n                } catch (InvalidAlgorithmParameterException | NoSuchAlgorithmException | CertificateException | KeyStoreException e) {\r\n                    System.out.println(&quot;Unexpected error during certificate revocation validation : &quot; + e.getMessage());\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                return null;\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\nThe error message that comes along with the exit is :\r\n\r\n&gt; Path does not chain with any of the trust anchors\r\n\r\nI&#39;ve been digging around, (hence the System.out in the middle), and found out that there is a slight difference between the certificate my webclient gets, and the certificate in Java&#39;s truststore : \r\n\r\nFirst System.out (displaying badssl.com certificate chain - expiry in 2024):\r\n------------------------------------------------------------------------\r\n\r\n```\r\nVersion: V3\r\n  Subject: CN=ISRG Root X1, O=Internet Security Research Group, C=US\r\n  Signature Algorithm: SHA256withRSA, OID = 1.2.840.113549.1.1.11\r\n\r\n  Key:  Sun RSA public key, 4096 bits\r\n  params: null\r\n  modulus: 709477870415445373015359016562426660610553770685944520893298396600226760899977879191004898543350831842119174188613678136510262472550532722234131754439181090009824131001234702144200501816519311599904090606194984753842587622398776018408050245574116028550608708896478977104703101364577377554823893350339376892984086676842821506637376561471221178677513035811884589888230947855482554780924844280661412982827405878164907670403886160896655313460186264922042760067692235383478494519985672059698752915965998412445946254227413232257276525240006651483130792248112417425846451951438781260632137645358927568158361961710185115502577127010922344394993078948994750404287047493247048147066090211292167313905862438457453781042040498702821432013765502024105065778257759178356925494156447570322373310256999609083201778278588599854706241788119448943034477370959349516873162063461521707809689839710972753590949570167489887658749686740890549110678989462474318310617765270337415238713770800711236563610171101328052424145478220993016515262478543813796899677215192789612682845145008993144513547444131126029557147570005369943143213525671105288817016183804256755470528641042403865830064493168693765438364296560479053823886598989258655438933191724193029337334607\r\n  public exponent: 65537\r\n  Validity: [From: Wed Jan 20 20:14:03 CET 2021,\r\n               To: Mon Sep 30 20:14:03 CEST 2024]\r\n  Issuer: CN=DST Root CA X3, O=Digital Signature Trust Co.\r\n  SerialNumber: [    40017721 37d4e942 b8ee76aa 3c640ab7]\r\n```\r\n\r\nSecond System.out (displaying java&#39;s truststore - expiry in 2035):\r\n------------------------------------------------------------------\r\n\r\n```\r\nVersion: V3\r\n  Subject: CN=ISRG Root X1, O=Internet Security Research Group, C=US\r\n  Signature Algorithm: SHA256withRSA, OID = 1.2.840.113549.1.1.11\r\n\r\n  Key:  Sun RSA public key, 4096 bits\r\n  params: null\r\n  modulus: 709477870415445373015359016562426660610553770685944520893298396600226760899977879191004898543350831842119174188613678136510262472550532722234131754439181090009824131001234702144200501816519311599904090606194984753842587622398776018408050245574116028550608708896478977104703101364577377554823893350339376892984086676842821506637376561471221178677513035811884589888230947855482554780924844280661412982827405878164907670403886160896655313460186264922042760067692235383478494519985672059698752915965998412445946254227413232257276525240006651483130792248112417425846451951438781260632137645358927568158361961710185115502577127010922344394993078948994750404287047493247048147066090211292167313905862438457453781042040498702821432013765502024105065778257759178356925494156447570322373310256999609083201778278588599854706241788119448943034477370959349516873162063461521707809689839710972753590949570167489887658749686740890549110678989462474318310617765270337415238713770800711236563610171101328052424145478220993016515262478543813796899677215192789612682845145008993144513547444131126029557147570005369943143213525671105288817016183804256755470528641042403865830064493168693765438364296560479053823886598989258655438933191724193029337334607\r\n  public exponent: 65537\r\n  Validity: [From: Thu Jun 04 13:04:38 CEST 2015,\r\n               To: Mon Jun 04 13:04:38 CEST 2035]\r\n  Issuer: CN=ISRG Root X1, O=Internet Security Research Group, C=US\r\n  SerialNumber: [    8210cfb0 d240e359 4463e0bb 63828b00]\r\n```\r\n\r\nSo it appears what I have in my truststore doesn&#39;t match what badssl.com sends me. \r\n\r\nTest with web browsers :\r\n------------------------\r\n\r\nStill, when I browse badssl.com (Tried with multiple browsers), it works properly (the certificate chain send contains the 2035 expiry date certificate contained in my OS (and in the Java truststore).\r\n\r\nTest with openssl CLI :\r\n-----------------------\r\n\r\nI performed another test via openssl command line (get badssl.com certificate via openssl, then just format it in human-readable fashion) : \r\n\r\n`openssl s_client -showcerts -connect badssl.com:443 &lt;/dev/null 2&gt;/dev/null| sed -n &#39;/BEGIN CERTIFICATE/,/END CERTIFICATE/p&#39; | tac | sed &#39;/BEGIN CERT/q&#39; | tac | openssl x509 -text -noout&#39;` \r\n\r\nAnd I also get the 2024 expiry date.\r\n\r\nSummary :\r\n---------\r\n\r\nSo it seems to me badssl.com is sending me a different certificate chain when I call him : \r\n- via browser (tried out edge, chromium, firefox) -&gt; 2035.\r\n- via Java or openssl CLI -&gt; 2024.\r\n\r\nAm I missing something, or is this some weird behavior on badssl side ? \r\nPlus, should Java TrustManager validate this cert, despite the strange certificate chain send by badssl ? \r\nTL;DR : Should I correct my Java code or should some things change on badssl side to make it work ?\r\n\r\nAlso, if something has an explanation of how that odd behavior is possible (side effect of a specific configuration, load balancer not updated, ...), I would be grateful to understand how that can happen !\r\n\r\nThanks!\r\n\r\n  [1]: https://badssl.com","title":"Badssl.com showing different certificate chains when accessed via browser or via java CertPathValidator?","body":"<h2>Context and testing with Java :</h2>\n<p>I've been using <a href=\"https://badssl.com\" rel=\"nofollow noreferrer\">Badssl</a> to test certificate verification for a tiny Java client.\nIt used to work well in January.\nBut as of today, there's something failing : the certificate for Badssl base domain (badssl.com) is not verified anymore by the following piece of code :</p>\n<pre><code>public static void main(String[] args) throws KeyStoreException, IOException, CertificateException, NoSuchAlgorithmException {\n        KeyStore keystore=KeyStore.getInstance(&quot;JKS&quot;);\n        FileInputStream stream = new FileInputStream(getTrustStore());\n        keystore.load(stream, getTrustStorePassword());\n\n        X509TrustManager secureTrustManager = new X509TrustManager() {\n            @Override\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            }\n\n            @Override\n            public void checkServerTrusted(X509Certificate[] chain, String authType) {\n                PKIXParameters params = null;\n                try {\n                    CertPath certPath = CertificateFactory.getInstance(&quot;X.509&quot;).generateCertPath(Arrays.asList(chain));\n                    params = new PKIXParameters(keystore);\n                    params.setRevocationEnabled(true);\n                    CertPathValidator.getInstance(&quot;PKIX&quot;).validate(certPath, params);\n                } catch (CertPathValidatorException e) {\n                    if (e.getMessage().startsWith(&quot;Certificate has been revoked&quot;)) {\n                        System.out.println(&quot;One certificate of the trust chain has been revoked : &quot; + e.getMessage());\n                    } else {\n                        System.out.println(chain[2]); // Displays the root CA - ISRG X1\n\n                        System.out.println(&quot;============TRUSTANCHORS==============&quot;);\n                        // Displays all trusted certs, including ISRG X1\n                        for (TrustAnchor t : params.getTrustAnchors()) {\n                            System.out.println(t.toString());\n                        }\n                        // This is where the code unexpectedly exits\n                        System.out.println(&quot;Unexpected error during certificate revocation validation : &quot; + e.getMessage());\n                    }\n                } catch (InvalidAlgorithmParameterException | NoSuchAlgorithmException | CertificateException | KeyStoreException e) {\n                    System.out.println(&quot;Unexpected error during certificate revocation validation : &quot; + e.getMessage());\n                }\n            }\n\n            @Override\n            public X509Certificate[] getAcceptedIssuers() {\n                return null;\n            }\n        };\n    }\n</code></pre>\n<p>The error message that comes along with the exit is :</p>\n<blockquote>\n<p>Path does not chain with any of the trust anchors</p>\n</blockquote>\n<p>I've been digging around, (hence the System.out in the middle), and found out that there is a slight difference between the certificate my webclient gets, and the certificate in Java's truststore :</p>\n<h2>First System.out (displaying badssl.com certificate chain - expiry in 2024):</h2>\n<pre><code>Version: V3\n  Subject: CN=ISRG Root X1, O=Internet Security Research Group, C=US\n  Signature Algorithm: SHA256withRSA, OID = 1.2.840.113549.1.1.11\n\n  Key:  Sun RSA public key, 4096 bits\n  params: null\n  modulus: 709477870415445373015359016562426660610553770685944520893298396600226760899977879191004898543350831842119174188613678136510262472550532722234131754439181090009824131001234702144200501816519311599904090606194984753842587622398776018408050245574116028550608708896478977104703101364577377554823893350339376892984086676842821506637376561471221178677513035811884589888230947855482554780924844280661412982827405878164907670403886160896655313460186264922042760067692235383478494519985672059698752915965998412445946254227413232257276525240006651483130792248112417425846451951438781260632137645358927568158361961710185115502577127010922344394993078948994750404287047493247048147066090211292167313905862438457453781042040498702821432013765502024105065778257759178356925494156447570322373310256999609083201778278588599854706241788119448943034477370959349516873162063461521707809689839710972753590949570167489887658749686740890549110678989462474318310617765270337415238713770800711236563610171101328052424145478220993016515262478543813796899677215192789612682845145008993144513547444131126029557147570005369943143213525671105288817016183804256755470528641042403865830064493168693765438364296560479053823886598989258655438933191724193029337334607\n  public exponent: 65537\n  Validity: [From: Wed Jan 20 20:14:03 CET 2021,\n               To: Mon Sep 30 20:14:03 CEST 2024]\n  Issuer: CN=DST Root CA X3, O=Digital Signature Trust Co.\n  SerialNumber: [    40017721 37d4e942 b8ee76aa 3c640ab7]\n</code></pre>\n<h2>Second System.out (displaying java's truststore - expiry in 2035):</h2>\n<pre><code>Version: V3\n  Subject: CN=ISRG Root X1, O=Internet Security Research Group, C=US\n  Signature Algorithm: SHA256withRSA, OID = 1.2.840.113549.1.1.11\n\n  Key:  Sun RSA public key, 4096 bits\n  params: null\n  modulus: 709477870415445373015359016562426660610553770685944520893298396600226760899977879191004898543350831842119174188613678136510262472550532722234131754439181090009824131001234702144200501816519311599904090606194984753842587622398776018408050245574116028550608708896478977104703101364577377554823893350339376892984086676842821506637376561471221178677513035811884589888230947855482554780924844280661412982827405878164907670403886160896655313460186264922042760067692235383478494519985672059698752915965998412445946254227413232257276525240006651483130792248112417425846451951438781260632137645358927568158361961710185115502577127010922344394993078948994750404287047493247048147066090211292167313905862438457453781042040498702821432013765502024105065778257759178356925494156447570322373310256999609083201778278588599854706241788119448943034477370959349516873162063461521707809689839710972753590949570167489887658749686740890549110678989462474318310617765270337415238713770800711236563610171101328052424145478220993016515262478543813796899677215192789612682845145008993144513547444131126029557147570005369943143213525671105288817016183804256755470528641042403865830064493168693765438364296560479053823886598989258655438933191724193029337334607\n  public exponent: 65537\n  Validity: [From: Thu Jun 04 13:04:38 CEST 2015,\n               To: Mon Jun 04 13:04:38 CEST 2035]\n  Issuer: CN=ISRG Root X1, O=Internet Security Research Group, C=US\n  SerialNumber: [    8210cfb0 d240e359 4463e0bb 63828b00]\n</code></pre>\n<p>So it appears what I have in my truststore doesn't match what badssl.com sends me.</p>\n<h2>Test with web browsers :</h2>\n<p>Still, when I browse badssl.com (Tried with multiple browsers), it works properly (the certificate chain send contains the 2035 expiry date certificate contained in my OS (and in the Java truststore).</p>\n<h2>Test with openssl CLI :</h2>\n<p>I performed another test via openssl command line (get badssl.com certificate via openssl, then just format it in human-readable fashion) :</p>\n<p><code>openssl s_client -showcerts -connect badssl.com:443 &lt;/dev/null 2&gt;/dev/null| sed -n '/BEGIN CERTIFICATE/,/END CERTIFICATE/p' | tac | sed '/BEGIN CERT/q' | tac | openssl x509 -text -noout'</code></p>\n<p>And I also get the 2024 expiry date.</p>\n<h2>Summary :</h2>\n<p>So it seems to me badssl.com is sending me a different certificate chain when I call him :</p>\n<ul>\n<li>via browser (tried out edge, chromium, firefox) -&gt; 2035.</li>\n<li>via Java or openssl CLI -&gt; 2024.</li>\n</ul>\n<p>Am I missing something, or is this some weird behavior on badssl side ?\nPlus, should Java TrustManager validate this cert, despite the strange certificate chain send by badssl ?\nTL;DR : Should I correct my Java code or should some things change on badssl side to make it work ?</p>\n<p>Also, if something has an explanation of how that odd behavior is possible (side effect of a specific configuration, load balancer not updated, ...), I would be grateful to understand how that can happen !</p>\n<p>Thanks!</p>\n"},{"tags":["java","reactjs","xml","xml-parsing"],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660944561,"creation_date":1660944561,"answer_id":73422428,"question_id":73420816,"body_markdown":"Obviously the XML parser doesn&#39;t know that the CDATA section contains XML (CDATA means &quot;character data&quot;, that is it&#39;s explicitly telling the parser to treat the content as plain text, not as markup). So the only way to handle this is to put it through two stages of parsing: the second stage reads the text node representing the CDATA section, and parses it again, grafting the resulting node tree into the original tree.\r\n\r\nNote that the output you want isn&#39;t well-formed XML: you can&#39;t have an XML declaration in the middle of the document. With that qualification, you can achieve the desired effect in XSLT 3.0 as:\r\n\r\n    &lt;xsl:transform xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n      version=&quot;3.0&quot;&gt;\r\n      &lt;xsl:mode on-no-match=&quot;shallow-copy&quot;/&gt;\r\n      &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\r\n      &lt;xsl:template match=&quot;data&quot;&gt;\r\n        &lt;xsl:copy-of select=&quot;parse-xml(.)&quot;/&gt;\r\n      &lt;/xsl:template&gt;\r\n    &lt;/xsl:transform&gt;\r\n\r\nwhich you can run from Java with the help of the Saxon library. (Disclaimer: my company&#39;s product.) The free open-source version will do the job. ","title":"How can an xml string containing an embedded CDATA xml string be formatted as &#39;pretty&#39; xml","body":"<p>Obviously the XML parser doesn't know that the CDATA section contains XML (CDATA means &quot;character data&quot;, that is it's explicitly telling the parser to treat the content as plain text, not as markup). So the only way to handle this is to put it through two stages of parsing: the second stage reads the text node representing the CDATA section, and parses it again, grafting the resulting node tree into the original tree.</p>\n<p>Note that the output you want isn't well-formed XML: you can't have an XML declaration in the middle of the document. With that qualification, you can achieve the desired effect in XSLT 3.0 as:</p>\n<pre><code>&lt;xsl:transform xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n  version=&quot;3.0&quot;&gt;\n  &lt;xsl:mode on-no-match=&quot;shallow-copy&quot;/&gt;\n  &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\n  &lt;xsl:template match=&quot;data&quot;&gt;\n    &lt;xsl:copy-of select=&quot;parse-xml(.)&quot;/&gt;\n  &lt;/xsl:template&gt;\n&lt;/xsl:transform&gt;\n</code></pre>\n<p>which you can run from Java with the help of the Saxon library. (Disclaimer: my company's product.) The free open-source version will do the job.</p>\n"}],"owner":{"account_id":11460157,"reputation":11,"user_id":8400045,"display_name":"Mons"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660944561,"creation_date":1660933199,"question_id":73420816,"body_markdown":"I have an xml string containing an  embedded CDATA xml string. I need to format &#39;pretty&#39; xml \r\n\r\nExample string:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;\r\n    &lt;catalog&gt;\r\n        &lt;book id=\\&quot;b1\\&quot;&gt;    \r\n            &lt;title&gt;XML Developer&#39;s Guide&lt;/title&gt;\r\n            &lt;description&gt;An in-depth look at creating applications with XML.&lt;/description&gt;\r\n\t        &lt;data&gt;\r\n            &lt;![CDATA[&lt;?xml version=\\&quot;1.0\\&quot;  encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;&lt;details&gt;&lt;author&gt;Gambardella, Matthew&lt;/author&gt;&lt;genre&gt;Computer&lt;/genre&gt;&lt;price&gt;44.95&lt;/price&gt;&lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;&lt;/details&gt;]]&gt;\r\n           &lt;/data&gt;\r\n       &lt;/book&gt;\r\n    &lt;/catalog&gt;\r\n \r\nWhat is the easiest way in java or reactjs to create a pretty string:\r\n \r\n    &lt;?xml version=&quot;1.0&quot; encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;\r\n    &lt;catalog&gt;\r\n        &lt;book id=\\&quot;b1\\&quot;&gt;    \r\n\t        &lt;title&gt;XML Developer&#39;s Guide&lt;/title&gt;\r\n\t\t    &lt;description&gt;An in-depth look at creating applications with XML.&lt;/description&gt;\r\n\t\t    &lt;data&gt;\r\n\t\t        &lt;?xml version=\\&quot;1.0\\&quot;  encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;\r\n\t\t        &lt;details&gt;\r\n\t\t\t        &lt;author&gt;Gambardella, Matthew&lt;/author&gt;\r\n\t\t\t        &lt;genre&gt;Computer&lt;/genre&gt;\r\n\t\t\t        &lt;price&gt;44.95&lt;/price&gt;\r\n\t\t\t        &lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;\r\n\t\t        &lt;/details&gt;\r\n\t        &lt;/data&gt;\r\n        &lt;/book&gt;\r\n    &lt;/catalog&gt;\r\n \r\nI feel this cannot be done in reactjs and I would need to use java to extract the inner xml and create 2 xml: \r\n \r\n    &lt;?xml version=&quot;1.0&quot; encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;\r\n    &lt;catalog&gt;\r\n        &lt;book id=\\&quot;b1\\&quot;&gt;    \r\n\t        &lt;title&gt;XML Developer&#39;s Guide&lt;/title&gt;\r\n\t\t    &lt;description&gt;An in-depth look at creating applications with XML.&lt;/description&gt;\r\n        &lt;/book&gt;\r\n    &lt;/catalog&gt;\r\n \r\n    &lt;?xml version=&quot;1.0&quot; encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;yes\\&quot;?&gt;\r\n    &lt;data&gt;\r\n        &lt;details&gt;\r\n\t        &lt;author&gt;Gambardella, Matthew&lt;/author&gt;\r\n\t\t    &lt;genre&gt;Computer&lt;/genre&gt;\r\n\t\t    &lt;price&gt;44.95&lt;/price&gt;\r\n\t\t    &lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;\r\n        &lt;/details&gt;\r\n    &lt;/data&gt;\r\n\r\nI would appreciate any ideas or alternatives using reactjs or java?","title":"How can an xml string containing an embedded CDATA xml string be formatted as &#39;pretty&#39; xml","body":"<p>I have an xml string containing an  embedded CDATA xml string. I need to format 'pretty' xml</p>\n<p>Example string:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;\n&lt;catalog&gt;\n    &lt;book id=\\&quot;b1\\&quot;&gt;    \n        &lt;title&gt;XML Developer's Guide&lt;/title&gt;\n        &lt;description&gt;An in-depth look at creating applications with XML.&lt;/description&gt;\n        &lt;data&gt;\n        &lt;![CDATA[&lt;?xml version=\\&quot;1.0\\&quot;  encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;&lt;details&gt;&lt;author&gt;Gambardella, Matthew&lt;/author&gt;&lt;genre&gt;Computer&lt;/genre&gt;&lt;price&gt;44.95&lt;/price&gt;&lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;&lt;/details&gt;]]&gt;\n       &lt;/data&gt;\n   &lt;/book&gt;\n&lt;/catalog&gt;\n</code></pre>\n<p>What is the easiest way in java or reactjs to create a pretty string:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;\n&lt;catalog&gt;\n    &lt;book id=\\&quot;b1\\&quot;&gt;    \n        &lt;title&gt;XML Developer's Guide&lt;/title&gt;\n        &lt;description&gt;An in-depth look at creating applications with XML.&lt;/description&gt;\n        &lt;data&gt;\n            &lt;?xml version=\\&quot;1.0\\&quot;  encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;\n            &lt;details&gt;\n                &lt;author&gt;Gambardella, Matthew&lt;/author&gt;\n                &lt;genre&gt;Computer&lt;/genre&gt;\n                &lt;price&gt;44.95&lt;/price&gt;\n                &lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;\n            &lt;/details&gt;\n        &lt;/data&gt;\n    &lt;/book&gt;\n&lt;/catalog&gt;\n</code></pre>\n<p>I feel this cannot be done in reactjs and I would need to use java to extract the inner xml and create 2 xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;no\\&quot;?&gt;\n&lt;catalog&gt;\n    &lt;book id=\\&quot;b1\\&quot;&gt;    \n        &lt;title&gt;XML Developer's Guide&lt;/title&gt;\n        &lt;description&gt;An in-depth look at creating applications with XML.&lt;/description&gt;\n    &lt;/book&gt;\n&lt;/catalog&gt;\n\n&lt;?xml version=&quot;1.0&quot; encoding-\\&quot;UTF-8\\&quot; standlaone=\\&quot;yes\\&quot;?&gt;\n&lt;data&gt;\n    &lt;details&gt;\n        &lt;author&gt;Gambardella, Matthew&lt;/author&gt;\n        &lt;genre&gt;Computer&lt;/genre&gt;\n        &lt;price&gt;44.95&lt;/price&gt;\n        &lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;\n    &lt;/details&gt;\n&lt;/data&gt;\n</code></pre>\n<p>I would appreciate any ideas or alternatives using reactjs or java?</p>\n"},{"tags":["java","javafx","javafx-webengine","jfxpanel","javafx-webview"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1660943158,"post_id":73422187,"comment_id":129661391,"body_markdown":"Your `JFXPanel` is in a `JFrame`. Just react to the `JFrame` closing.","body":"Your <code>JFXPanel</code> is in a <code>JFrame</code>. Just react to the <code>JFrame</code> closing."},{"owner":{"account_id":26110397,"reputation":31,"user_id":19804428,"display_name":"Grant Sanders"},"score":0,"creation_date":1660943655,"post_id":73422187,"comment_id":129661511,"body_markdown":"This was my first thought, but then how do I go about accessing the WebEngine object that is defined within the createScene method? I tried declaring the engine and view globally, but then I run into issues with the javaFX thread not having started yet.\n\nthanks!","body":"This was my first thought, but then how do I go about accessing the WebEngine object that is defined within the createScene method? I tried declaring the engine and view globally, but then I run into issues with the javaFX thread not having started yet.  thanks!"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1660944245,"post_id":73422187,"comment_id":129661641,"body_markdown":"Not sure the problem. Just declare them as instance variables.","body":"Not sure the problem. Just declare them as instance variables."}],"answers":[{"tags":[],"owner":{"account_id":26110397,"reputation":31,"user_id":19804428,"display_name":"Grant Sanders"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660944346,"creation_date":1660944346,"answer_id":73422399,"question_id":73422187,"body_markdown":"Found a solution- I was able to set a listener on the engine in the scene builder method, this way, every time the browser visits a new URL it automatically updates a private variable. \r\n\r\n\r\nin createScene():\r\n```\r\nauthBrowser.getLoadWorker().stateProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n            if (Worker.State.SUCCEEDED.equals(newValue)) {\r\n                setCode(authBrowser.getLocation());\r\n            }\r\n        });\r\n```","title":"How to set an action to occur whenever JFXPanel is closed?","body":"<p>Found a solution- I was able to set a listener on the engine in the scene builder method, this way, every time the browser visits a new URL it automatically updates a private variable.</p>\n<p>in createScene():</p>\n<pre><code>authBrowser.getLoadWorker().stateProperty().addListener((observable, oldValue, newValue) -&gt; {\n            if (Worker.State.SUCCEEDED.equals(newValue)) {\n                setCode(authBrowser.getLocation());\n            }\n        });\n</code></pre>\n"}],"owner":{"account_id":26110397,"reputation":31,"user_id":19804428,"display_name":"Grant Sanders"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73422399,"answer_count":1,"score":0,"last_activity_date":1660944346,"creation_date":1660942627,"question_id":73422187,"body_markdown":"I&#39;m building a Swing application and I&#39;m using JFXPanel to bring up a WebView for user authentication. I need to return the url that the WebEngine is sent to after a successful user sign-on- but I don&#39;t know how to pull the URL from the view at the time the window is closed. I&#39;m aware of Stage.setOnHiding, but this can&#39;t apply here since JFXPanels don&#39;t act as stages, though they contain a scene. \r\n\r\nI&#39;m very new to JavaFX so if this code snippet demonstrates bad conventions, I&#39;d be happy to hear it!\r\n\r\n```\r\nprivate static void buildAuthBrowser() {\r\n\t\tJFrame frame = new JFrame(&quot;frame&quot;);\r\n\t\tfinal JFXPanel fxPanel = new JFXPanel();\r\n\t\tframe.add(fxPanel);\r\n\t\tframe.setSize(800, 600);\r\n\t\tframe.setLocationRelativeTo(null);\r\n\t\tframe.setVisible(true);\r\n\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tPlatform.runLater(new Runnable() {\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\r\n\t\t\t\tinitFX(fxPanel);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tprivate static void initFX(JFXPanel fxPanel) {\r\n\t\t// fx thread\r\n\t\tScene scene = createScene();\r\n\r\n\t\tfxPanel.setScene(scene);\r\n\r\n\t}\r\n\r\n\tprivate static Scene createScene() {\r\n\t\tGroup root = new Group();\r\n\t\tScene scene = new Scene(root);\r\n\t\tWebView view = new WebView();\r\n\t\tWebEngine browser = view.getEngine();\r\n\t\tbrowser.load(auth.getUrl());\r\n\t\troot.getChildren().add(view);\r\n\t\treturn (scene);\r\n\t}\r\n```\r\n\r\n","title":"How to set an action to occur whenever JFXPanel is closed?","body":"<p>I'm building a Swing application and I'm using JFXPanel to bring up a WebView for user authentication. I need to return the url that the WebEngine is sent to after a successful user sign-on- but I don't know how to pull the URL from the view at the time the window is closed. I'm aware of Stage.setOnHiding, but this can't apply here since JFXPanels don't act as stages, though they contain a scene.</p>\n<p>I'm very new to JavaFX so if this code snippet demonstrates bad conventions, I'd be happy to hear it!</p>\n<pre><code>private static void buildAuthBrowser() {\n        JFrame frame = new JFrame(&quot;frame&quot;);\n        final JFXPanel fxPanel = new JFXPanel();\n        frame.add(fxPanel);\n        frame.setSize(800, 600);\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        Platform.runLater(new Runnable() {\n            @Override\n            public void run() {\n\n                initFX(fxPanel);\n            }\n        });\n\n    }\n\n    private static void initFX(JFXPanel fxPanel) {\n        // fx thread\n        Scene scene = createScene();\n\n        fxPanel.setScene(scene);\n\n    }\n\n    private static Scene createScene() {\n        Group root = new Group();\n        Scene scene = new Scene(root);\n        WebView view = new WebView();\n        WebEngine browser = view.getEngine();\n        browser.load(auth.getUrl());\n        root.getChildren().add(view);\n        return (scene);\n    }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8895,"page":1097,"page_size":100}
