{"items":[{"tags":["java","spring","spring-boot","hibernate","spring-transactions"],"answers":[{"comments":[{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":0,"creation_date":1684467659,"post_id":76278475,"comment_id":134524944,"body_markdown":"I don&#39;t haver any Spring aspects dependencies, but I&#39;m aware that some parte of Spring are aspects dependent. Could you share which AOP depencies you have in your project?","body":"I don&#39;t haver any Spring aspects dependencies, but I&#39;m aware that some parte of Spring are aspects dependent. Could you share which AOP depencies you have in your project?"}],"tags":[],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684393422,"creation_date":1684393422,"answer_id":76278475,"question_id":76275898,"body_markdown":"We had similar behaviour in our project as we have aop configuration which will close the transaction in case of runtime exception, which leads to this issue as there is no open transaction to do the further activity.\r\n\r\nPlease check if you have such a configuration in your project.","title":"java.lang.IllegalStateException: Session/EntityManager is closed when unique constraint is violated","body":"<p>We had similar behaviour in our project as we have aop configuration which will close the transaction in case of runtime exception, which leads to this issue as there is no open transaction to do the further activity.</p>\n<p>Please check if you have such a configuration in your project.</p>\n"}],"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684393422,"creation_date":1684354429,"question_id":76275898,"body_markdown":"I have a unique constraint in the database, everytime that constraint is violated I get the following exception:\r\n\r\n\tjava.lang.IllegalStateException: Session/EntityManager is closed\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.checkOpen(AbstractSharedSessionContract.java:409) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\r\n\t\tat org.hibernate.engine.spi.SharedSessionContractImplementor.checkOpen(SharedSessionContractImplementor.java:164) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\r\n\t\tat org.hibernate.internal.SessionImpl.clear(SessionImpl.java:352) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\t\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.8.jar:6.0.8]\r\n\t\tat jdk.proxy2/jdk.proxy2.$Proxy142.clear(Unknown Source) ~[na:na]\r\n\t\tat org.springframework.orm.jpa.JpaTransactionManager.doRollback(JpaTransactionManager.java:598) ~[spring-orm-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.doRollbackOnCommitException(AbstractPlatformTransactionManager.java:892) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:775) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:660) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:410) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat br.com.viahub.vendedor.api.dataprovider.gateway.VendedorGatewayImpl$$SpringCGLIB$$0.salvarVendedor(&lt;generated&gt;) ~[classes/:na]\r\n\t\tat br.com.viahub.vendedor.api.usecase.SalvarVendedorInteractor.execute(SalvarVendedorInteractor.java:77) ~[classes/:na]\r\n\t\tat br.com.viahub.vendedor.api.delivery.rest.VendedorRestController.save(VendedorRestController.java:96) ~[classes/:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\t\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:141) ~[spring-context-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.8.jar:6.0.8]\r\n\t\tat br.com.viahub.vendedor.api.delivery.rest.VendedorRestController$$SpringCGLIB$$0.save(&lt;generated&gt;) ~[classes/:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\t\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.8.jar:6.0]\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.8.jar:6.0.8]\r\n\t\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.8.jar:6.0]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\nMy code:\r\n\r\n\t@Override\r\n\t@Transactional\r\n\tpublic VendedorSummaryDTO salvarVendedor(final VendedorSummaryDTO vendedor, final FilialDTO filialDTO) {\r\n\t\treturn this.vendedorMapper.fromVendedorToVendedorSummaryDTO(this.vendedorRepository\r\n\t\t\t\t.save(this.vendedorMapper.fromVendedorSummaryDTOAndFilialDTOToVendedor(vendedor, filialDTO)));\r\n\t}\r\n\r\n\tpublic interface VendedorRepository extends JpaRepository&lt;Vendedor, String&gt; {\r\n\t}\r\n\r\nBy reading the stack trace, I&#39;ve guessed that this problem only occurs when this constraint is violated because the exception happens when Hibernate tries to rollback the transaction. I tested by submitting another request with a different payload that does not violate the unique constraint and it worked. Does anybody have a clue about what this problem is?\r\n\r\nI&#39;m using spring-boot 3.0.6 and hibernate-core 6.1.7.","title":"java.lang.IllegalStateException: Session/EntityManager is closed when unique constraint is violated","body":"<p>I have a unique constraint in the database, everytime that constraint is violated I get the following exception:</p>\n<pre><code>java.lang.IllegalStateException: Session/EntityManager is closed\n    at org.hibernate.internal.AbstractSharedSessionContract.checkOpen(AbstractSharedSessionContract.java:409) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.engine.spi.SharedSessionContractImplementor.checkOpen(SharedSessionContractImplementor.java:164) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.internal.SessionImpl.clear(SessionImpl.java:352) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.8.jar:6.0.8]\n    at jdk.proxy2/jdk.proxy2.$Proxy142.clear(Unknown Source) ~[na:na]\n    at org.springframework.orm.jpa.JpaTransactionManager.doRollback(JpaTransactionManager.java:598) ~[spring-orm-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.doRollbackOnCommitException(AbstractPlatformTransactionManager.java:892) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:775) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:660) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:410) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.8.jar:6.0.8]\n    at br.com.viahub.vendedor.api.dataprovider.gateway.VendedorGatewayImpl$$SpringCGLIB$$0.salvarVendedor(&lt;generated&gt;) ~[classes/:na]\n    at br.com.viahub.vendedor.api.usecase.SalvarVendedorInteractor.execute(SalvarVendedorInteractor.java:77) ~[classes/:na]\n    at br.com.viahub.vendedor.api.delivery.rest.VendedorRestController.save(VendedorRestController.java:96) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:141) ~[spring-context-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.8.jar:6.0.8]\n    at br.com.viahub.vendedor.api.delivery.rest.VendedorRestController$$SpringCGLIB$$0.save(&lt;generated&gt;) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.8.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.8.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>My code:</p>\n<pre><code>@Override\n@Transactional\npublic VendedorSummaryDTO salvarVendedor(final VendedorSummaryDTO vendedor, final FilialDTO filialDTO) {\n    return this.vendedorMapper.fromVendedorToVendedorSummaryDTO(this.vendedorRepository\n            .save(this.vendedorMapper.fromVendedorSummaryDTOAndFilialDTOToVendedor(vendedor, filialDTO)));\n}\n\npublic interface VendedorRepository extends JpaRepository&lt;Vendedor, String&gt; {\n}\n</code></pre>\n<p>By reading the stack trace, I've guessed that this problem only occurs when this constraint is violated because the exception happens when Hibernate tries to rollback the transaction. I tested by submitting another request with a different payload that does not violate the unique constraint and it worked. Does anybody have a clue about what this problem is?</p>\n<p>I'm using spring-boot 3.0.6 and hibernate-core 6.1.7.</p>\n"},{"tags":["java","mybatis","spring-mybatis","mybatis-generator"],"comments":[{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1682699266,"post_id":76131385,"comment_id":134261933,"body_markdown":"Was this `when tesst=‘“IId&quot;` a typo ?","body":"Was this <code>when tesst=‘“IId&quot;</code> a typo ?"},{"owner":{"account_id":9446173,"reputation":23,"user_id":7024852,"display_name":"Inked"},"score":0,"creation_date":1682726998,"post_id":76131385,"comment_id":134266215,"body_markdown":"Yea ignore this, it’s a typo. Everything worked if I downgrade mybatis to 3.0","body":"Yea ignore this, it’s a typo. Everything worked if I downgrade mybatis to 3.0"},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1682791662,"post_id":76131385,"comment_id":134272084,"body_markdown":"By the looks of the error alone it looks like there is an issue with the type handler used for a parameter mapping in your MyBatis configuration that was either default on the previous version and needs to be explicit on the newer (mainly because you updated Jackson? Not entirely sure about this), so try configuring a type handler for it it is something like: `&lt;typeHandlers&gt;&lt;typeHandler javaType=&quot;com.fasterxml.jackson.databind.node.ArrayNode&quot; handler=&quot;what.ever.package.ArrayNodeHandler&quot;/&gt;&lt;/typeHandlers&gt;&quot;` or whatever version of this for the new Jackson.","body":"By the looks of the error alone it looks like there is an issue with the type handler used for a parameter mapping in your MyBatis configuration that was either default on the previous version and needs to be explicit on the newer (mainly because you updated Jackson? Not entirely sure about this), so try configuring a type handler for it it is something like: <code>&lt;typeHandlers&gt;&lt;typeHandler javaType=&quot;com.fasterxml.jackson.databind.node.ArrayNode&quot; handler=&quot;what.ever.package.ArrayNodeHandler&quot;&#47;&gt;&lt;&#47;typeHandlers&zwnj;&#8203;&gt;&quot;</code> or whatever version of this for the new Jackson."},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1682791832,"post_id":76131385,"comment_id":134272105,"body_markdown":"Also check that the version you are using for myBatis is compatible with the version you are using for Jackson library. It might be another source of the problem","body":"Also check that the version you are using for myBatis is compatible with the version you are using for Jackson library. It might be another source of the problem"},{"owner":{"account_id":9446173,"reputation":23,"user_id":7024852,"display_name":"Inked"},"score":0,"creation_date":1683128827,"post_id":76131385,"comment_id":134319960,"body_markdown":"Thanks @JorgeCampos for looking into this. However I’m unable to find any  ArrayNodeHandler implementation. I’m also unsure about it, I doubt if it really exists?","body":"Thanks @JorgeCampos for looking into this. However I’m unable to find any  ArrayNodeHandler implementation. I’m also unsure about it, I doubt if it really exists?"},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1683131631,"post_id":76131385,"comment_id":134320630,"body_markdown":"Hmm that might be the problem them. can you check whether the previous version of jackson or mybatis has it ?","body":"Hmm that might be the problem them. can you check whether the previous version of jackson or mybatis has it ?"},{"owner":{"account_id":9446173,"reputation":23,"user_id":7024852,"display_name":"Inked"},"score":0,"creation_date":1684392921,"post_id":76131385,"comment_id":134512201,"body_markdown":"@JorgeCampos   However I tried to create new type handler for jsonArrayNode.    Like mentioned on post- but this time I’m not getting any error but I’m getting wrong results. Seems like it’s is not generating correct prepared statement","body":"@JorgeCampos   However I tried to create new type handler for jsonArrayNode.    Like mentioned on post- but this time I’m not getting any error but I’m getting wrong results. Seems like it’s is not generating correct prepared statement"},{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1684622453,"post_id":76131385,"comment_id":134544567,"body_markdown":"@Inked The XML syntax is clearly invalid. It&#39;s hard to help without accurate info, but it seems that the element type of the collection `item.value` was changed during the upgrade (possibly because of some change made in Jackson?). If you could provide a test case that reproduces the same issue (i.e. the test passes with version 3.0.x, but fails with 3.5.11), I would take a look when I have time. Here are some project [templates and examples](https://github.com/harawata/mybatis-issues). Please try to make the project as simple as possible.","body":"@Inked The XML syntax is clearly invalid. It&#39;s hard to help without accurate info, but it seems that the element type of the collection <code>item.value</code> was changed during the upgrade (possibly because of some change made in Jackson?). If you could provide a test case that reproduces the same issue (i.e. the test passes with version 3.0.x, but fails with 3.5.11), I would take a look when I have time. Here are some project <a href=\"https://github.com/harawata/mybatis-issues\" rel=\"nofollow noreferrer\">templates and examples</a>. Please try to make the project as simple as possible."}],"owner":{"account_id":9446173,"reputation":23,"user_id":7024852,"display_name":"Inked"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684393183,"creation_date":1682698050,"question_id":76131385,"body_markdown":"I was trying to upgrade my spring version from 4 to 5.3.23\r\nAlso updated Jackson databind to 2.13.5\r\nWhile doing so I needed to upgrade mybatis from 3.0 to 3.5.11\r\nAlso mybatis-spring from 1.0 to 2.1.0\r\n\r\n\r\nWhile upgrading, i found strange behaviour happening to mybatis requests.\r\n\r\nI’m getting an error -\r\n\r\n```\r\njava.lang.IllegalStateException: Type handler was null on parameter mapping for property &#39;__frch_token_1&#39;. It was either not specified and/or could not be found for the javaType\r\n\r\n(com.fasterxml.jackson.databind.node.ArrayNode): jdbcType (null) combination. ### Cause:\r\n\r\njava.lang.IllegalStateException: Type handler was null on parameter mapping for property __frch_token_1&#39;. It was either not specified and/or could not be found for the javaType\r\n\r\n(com.fasterxml.jackson.databind.node.ArrayNode):\r\n\r\njdbcType (null) combination.\r\n\r\n```\r\n\r\n\r\nWith earlier version of mybatis, it was working fine.\r\n\r\nI’m passing multiple or single parameter from drop down from front end on iName column\r\n\r\nIt’s breaking at for each loop, it seems.\r\n\r\n```\r\n\r\n&lt;select id=&quot;getByCriteria&quot; resultMap=&quot;xyzResultMap&quot;&gt;\r\n\r\n&lt;![CDATA[SELECT ]]&gt;\r\n\r\n&lt;include refid=&quot;columns&quot; /&gt;\r\n\r\n&lt;![CDATA[ FROM Table ]]&gt; != null&quot;&gt;\r\n\r\n&lt;if test=&quot;criteria &lt;where&gt;\r\n\r\n&lt;foreach collection &quot;criteria&quot; item=&quot;item&quot; separator=&quot;AND&quot;&gt;\r\n &lt;!-- column name --&gt;\r\n\r\n&lt;choose&gt;\r\n\r\n&lt;when test=‘“Id&quot;.equals (item.fieldName)’&gt;Eid&lt;/when&gt; \r\n&lt;when test=‘&quot;Name&quot;.equals(item.fieldName)’&gt; iName&lt;/when&gt; \r\n\r\n\r\n&lt;otherwise&gt;/* unknown field name ${item.fieldName} */&lt;/otherwise&gt;\r\n\r\n&lt;/choose&gt; \r\n&lt;!-- operator and search value --&gt;\r\n\r\n&lt;choose&gt;\r\n\r\n&lt;when test=’&quot;equals&quot;.equals(item.operator)&#39;&gt;= #{item.value}&lt;/when&gt;\r\n\r\n&lt;when test=’&quot;iCaptains&quot;.equals(item.operator)&#39;&gt; like UPPER(&#39;%${item.value}%&#39;)&lt;/wh\r\n\r\n&lt;when test=’&quot;inSet&quot;.equals(item. operator)&#39;&gt;&lt;![CDATA[ IN (]]&gt;\r\n\r\n&lt;foreach collection=&quot;item.value&quot; item- &quot;token&quot; separator=&quot;, &quot;&gt;\r\n\r\n&lt;![CDATA[ #{token}]]&gt;\r\n\r\n&lt;/foreach&gt;&lt;![CDATA[)]]&gt;\r\n\r\n/when&gt;\r\n\r\n&lt;otherwise&gt;/* unknown field name ${item.operator} */&lt;/otherwise&gt;\r\n\r\n&lt;/choose&gt; &lt;/foreach&gt;\r\n\r\n&lt;/where&gt;\r\n&lt;/if&gt;\r\n\r\n```\r\n\r\n\r\nCan somebody give me insights about this issue .\r\n\r\n\r\nAfter implementing arraynodetype handler I was able to remove that error but I’m not getting correct results.\r\n\r\nSeems like prepared statement is not generated correctly.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9iCQi.jpg","title":"Mybatis upgrade issues related to parameters","body":"<p>I was trying to upgrade my spring version from 4 to 5.3.23\nAlso updated Jackson databind to 2.13.5\nWhile doing so I needed to upgrade mybatis from 3.0 to 3.5.11\nAlso mybatis-spring from 1.0 to 2.1.0</p>\n<p>While upgrading, i found strange behaviour happening to mybatis requests.</p>\n<p>I’m getting an error -</p>\n<pre><code>java.lang.IllegalStateException: Type handler was null on parameter mapping for property '__frch_token_1'. It was either not specified and/or could not be found for the javaType\n\n(com.fasterxml.jackson.databind.node.ArrayNode): jdbcType (null) combination. ### Cause:\n\njava.lang.IllegalStateException: Type handler was null on parameter mapping for property __frch_token_1'. It was either not specified and/or could not be found for the javaType\n\n(com.fasterxml.jackson.databind.node.ArrayNode):\n\njdbcType (null) combination.\n\n</code></pre>\n<p>With earlier version of mybatis, it was working fine.</p>\n<p>I’m passing multiple or single parameter from drop down from front end on iName column</p>\n<p>It’s breaking at for each loop, it seems.</p>\n<pre><code>\n&lt;select id=&quot;getByCriteria&quot; resultMap=&quot;xyzResultMap&quot;&gt;\n\n&lt;![CDATA[SELECT ]]&gt;\n\n&lt;include refid=&quot;columns&quot; /&gt;\n\n&lt;![CDATA[ FROM Table ]]&gt; != null&quot;&gt;\n\n&lt;if test=&quot;criteria &lt;where&gt;\n\n&lt;foreach collection &quot;criteria&quot; item=&quot;item&quot; separator=&quot;AND&quot;&gt;\n &lt;!-- column name --&gt;\n\n&lt;choose&gt;\n\n&lt;when test=‘“Id&quot;.equals (item.fieldName)’&gt;Eid&lt;/when&gt; \n&lt;when test=‘&quot;Name&quot;.equals(item.fieldName)’&gt; iName&lt;/when&gt; \n\n\n&lt;otherwise&gt;/* unknown field name ${item.fieldName} */&lt;/otherwise&gt;\n\n&lt;/choose&gt; \n&lt;!-- operator and search value --&gt;\n\n&lt;choose&gt;\n\n&lt;when test=’&quot;equals&quot;.equals(item.operator)'&gt;= #{item.value}&lt;/when&gt;\n\n&lt;when test=’&quot;iCaptains&quot;.equals(item.operator)'&gt; like UPPER('%${item.value}%')&lt;/wh\n\n&lt;when test=’&quot;inSet&quot;.equals(item. operator)'&gt;&lt;![CDATA[ IN (]]&gt;\n\n&lt;foreach collection=&quot;item.value&quot; item- &quot;token&quot; separator=&quot;, &quot;&gt;\n\n&lt;![CDATA[ #{token}]]&gt;\n\n&lt;/foreach&gt;&lt;![CDATA[)]]&gt;\n\n/when&gt;\n\n&lt;otherwise&gt;/* unknown field name ${item.operator} */&lt;/otherwise&gt;\n\n&lt;/choose&gt; &lt;/foreach&gt;\n\n&lt;/where&gt;\n&lt;/if&gt;\n\n</code></pre>\n<p>Can somebody give me insights about this issue .</p>\n<p>After implementing arraynodetype handler I was able to remove that error but I’m not getting correct results.</p>\n<p>Seems like prepared statement is not generated correctly.</p>\n<p><a href=\"https://i.stack.imgur.com/9iCQi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9iCQi.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","git","hook","checkstyle"],"comments":[{"owner":{"account_id":1001793,"reputation":2131,"user_id":1016482,"accept_rate":50,"display_name":"rveach"},"score":0,"creation_date":1528389926,"post_id":50741967,"comment_id":88500360,"body_markdown":"I never used this or pre-commit hooks before but I assume `path to java executable` means the path to your `java.exe` file. It is optional because usually it is on the classpath. This `perl` program should already be an executable. I am not sure if the git utility knows how to execute it on windows or if you need another utility that knows how to.","body":"I never used this or pre-commit hooks before but I assume <code>path to java executable</code> means the path to your <code>java.exe</code> file. It is optional because usually it is on the classpath. This <code>perl</code> program should already be an executable. I am not sure if the git utility knows how to execute it on windows or if you need another utility that knows how to."},{"owner":{"account_id":10412436,"reputation":427,"user_id":7677457,"display_name":"L.Rex"},"score":0,"creation_date":1528391936,"post_id":50741967,"comment_id":88501331,"body_markdown":"I assumed the same. I added the path to the java.exe but it still doesnt work. Yeah since it&#39;s obviously a script i thought that it is an executable too. But it doesnt work so i wondered if its not..","body":"I assumed the same. I added the path to the java.exe but it still doesnt work. Yeah since it&#39;s obviously a script i thought that it is an executable too. But it doesnt work so i wondered if its not.."}],"answers":[{"comments":[{"owner":{"account_id":2258311,"reputation":1709,"user_id":1988983,"accept_rate":85,"display_name":"Noah Martin"},"score":0,"creation_date":1579522931,"post_id":50748292,"comment_id":105783413,"body_markdown":"Thank you for the fix, but by using this fix for me it just fails every time, even when no check failed.","body":"Thank you for the fix, but by using this fix for me it just fails every time, even when no check failed."}],"tags":[],"owner":{"account_id":10412436,"reputation":427,"user_id":7677457,"display_name":"L.Rex"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1529054285,"creation_date":1528397324,"answer_id":50748292,"question_id":50741967,"body_markdown":"Okay seems as i found a solution finally. I added some comments to the instructions how i made it work.\r\n\r\n \r\n\r\n     1. checkstyle&#39;s jar file somewhere\r\n     2. a checkstyle XML check file somewhere\r\n     3. To configure git:\r\n       * git config --add checkstyle.jar &lt;location of jar&gt;\r\n       * git config --add checkstyle.checkfile &lt;location of checkfile&gt;\r\n       * git config --add java.command &lt;path to java executale&gt; [optional\r\n        defaults to assuming it&#39;s in your path]\r\n\r\n**I checked my config (can be found in the .git directory of your git reposirtory) and it looked like this:**     \r\n \r\n\r\n     ...    \r\n     [checkstyle]   \r\n     checkfile = C:\\\\Users\\\\schuster\\\\Desktop\\\\checkstyle\r\n     jar = C:\\\\Users\\\\schuster\\\\Desktop\\\\checkstyle    \r\n      ...   \r\n**So since im Working on Windows i changed it to:**\r\n\r\n    ...\r\n    [checkstyle]\r\n    \tcheckfile = C:/Users/schuster/Desktop/checkstyle/google_checks.xml\r\n    \tjar = C:/Users/schuster/Desktop/checkstyle/checkstyle.jar\r\n    ...\r\n.\r\n\r\n     4. Put this in your .git/hooks directory as pre-commit\r\n**&#39;This&#39; is the file i linked when i stated my problem. So this file needs to be in the /hooks directory. But it has to be renamed as one of the existing samples which are already in there. Since my hook is a pre-commit hook i took the &quot;pre-commit&quot; filename. Next this file has to become an executable. To do that type in `chmod +x pre-commit` in the /hooks directory of your git repository. If you work with Windows do that using the Git Bash.**\r\n\r\n\r\n**EDIT :**\r\n------\r\n\r\nIn case someone want to use this script and is wondering why it doesnt abort even if checks fail - here is how to fix it.\r\nin line 58  \r\n         `if (&amp;run_and_log_system ($command))`  \r\n          has to be chanted to  \r\n         `if (!&amp;run_and_log_system ($command))`\r\n\r\n","title":"add checkstyle as pre-commit git hook","body":"<p>Okay seems as i found a solution finally. I added some comments to the instructions how i made it work.</p>\n\n<pre><code> 1. checkstyle's jar file somewhere\n 2. a checkstyle XML check file somewhere\n 3. To configure git:\n   * git config --add checkstyle.jar &lt;location of jar&gt;\n   * git config --add checkstyle.checkfile &lt;location of checkfile&gt;\n   * git config --add java.command &lt;path to java executale&gt; [optional\n    defaults to assuming it's in your path]\n</code></pre>\n\n<p><strong>I checked my config (can be found in the .git directory of your git reposirtory) and it looked like this:</strong>     </p>\n\n<pre><code> ...    \n [checkstyle]   \n checkfile = C:\\\\Users\\\\schuster\\\\Desktop\\\\checkstyle\n jar = C:\\\\Users\\\\schuster\\\\Desktop\\\\checkstyle    \n  ...   \n</code></pre>\n\n<p><strong>So since im Working on Windows i changed it to:</strong></p>\n\n<pre><code>...\n[checkstyle]\n    checkfile = C:/Users/schuster/Desktop/checkstyle/google_checks.xml\n    jar = C:/Users/schuster/Desktop/checkstyle/checkstyle.jar\n...\n</code></pre>\n\n<p>.</p>\n\n<pre><code> 4. Put this in your .git/hooks directory as pre-commit\n</code></pre>\n\n<p><strong>'This' is the file i linked when i stated my problem. So this file needs to be in the /hooks directory. But it has to be renamed as one of the existing samples which are already in there. Since my hook is a pre-commit hook i took the \"pre-commit\" filename. Next this file has to become an executable. To do that type in <code>chmod +x pre-commit</code> in the /hooks directory of your git repository. If you work with Windows do that using the Git Bash.</strong></p>\n\n<h2><strong>EDIT :</strong></h2>\n\n<p>In case someone want to use this script and is wondering why it doesnt abort even if checks fail - here is how to fix it.\nin line 58<br>\n         <code>if (&amp;run_and_log_system ($command))</code><br>\n          has to be chanted to<br>\n         <code>if (!&amp;run_and_log_system ($command))</code></p>\n"},{"tags":[],"owner":{"account_id":9361080,"reputation":31,"user_id":6947379,"display_name":"gauravuniverse"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589434693,"creation_date":1589434693,"answer_id":61790062,"question_id":50741967,"body_markdown":"After configure checkstyle.jar and checkstyle.checkfile. If it does not abort on checks fail here is the fix.\r\n\r\nAt line 58\r\n\r\n```if (&amp;run_and_log_system ($command))```\r\n\r\nReplace with below\r\n\r\n```\r\n$command .= &quot; | grep WARN &quot;;\r\nif (!&amp;run_and_log_system ($command))\r\n```\r\n","title":"add checkstyle as pre-commit git hook","body":"<p>After configure checkstyle.jar and checkstyle.checkfile. If it does not abort on checks fail here is the fix.</p>\n\n<p>At line 58</p>\n\n<p><code>if (&amp;run_and_log_system ($command))</code></p>\n\n<p>Replace with below</p>\n\n<pre><code>$command .= \" | grep WARN \";\nif (!&amp;run_and_log_system ($command))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":109341,"reputation":494,"user_id":289767,"accept_rate":74,"display_name":"javafueled"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664139422,"creation_date":1664139422,"answer_id":73847793,"question_id":50741967,"body_markdown":"I&#39;ve open sourced and released Commit Controls, a ZIP package that aims to natively make connecting Checkstyle in a project much easier in Javaland.\r\n\r\n[The project homepage with documentation][1]. Hope this project eases most use cases.\r\n\r\n\r\n  [1]: https://gitlab.com/another15y/commit-controls/","title":"add checkstyle as pre-commit git hook","body":"<p>I've open sourced and released Commit Controls, a ZIP package that aims to natively make connecting Checkstyle in a project much easier in Javaland.</p>\n<p><a href=\"https://gitlab.com/another15y/commit-controls/\" rel=\"nofollow noreferrer\">The project homepage with documentation</a>. Hope this project eases most use cases.</p>\n"}],"owner":{"account_id":10412436,"reputation":427,"user_id":7677457,"display_name":"L.Rex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10125,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":50748292,"answer_count":3,"score":16,"last_activity_date":1684393141,"creation_date":1528376586,"question_id":50741967,"body_markdown":"I am trying to add this: https://gist.github.com/davetron5000/37350 checkstyle code format check as pre-commit git hook. \r\n\r\nI followed the instructions below but it doesn&#39;t work.\r\n\r\nSteps I&#39;ve tried:\r\n\r\n&gt; 1. Checkstyle&#39;s jar file somewhere\r\n&gt; 2. Checkstyle XML check file somewhere\r\n&gt; 3. To configure git:\r\n&gt;    * `git config --add checkstyle.jar &lt;location of jar&gt;`\r\n&gt;    * `git config --add checkstyle.checkfile &lt;location of checkfile&gt;`\r\n&gt;    * `git config --add java.command &lt;path to java executable&gt; [optional, defaults to assuming it&#39;s in your path]`\r\n&gt; 4. Put this in your .git/hooks directory as pre-commit\r\n\r\nMaybe it doesn&#39;t work because I dont understand what `git config --add java.command &lt;path to java executable&gt;` means. But it says it&#39;s optional  If that&#39;s not the problem maybe I need to make the script-file an executable somehow?\r\n\r\nps: OS is Windows","title":"add checkstyle as pre-commit git hook","body":"<p>I am trying to add this: <a href=\"https://gist.github.com/davetron5000/37350\" rel=\"noreferrer\">https://gist.github.com/davetron5000/37350</a> checkstyle code format check as pre-commit git hook. </p>\n\n<p>I followed the instructions below but it doesn't work.</p>\n\n<p>Steps I've tried:</p>\n\n<blockquote>\n  <ol>\n  <li>Checkstyle's jar file somewhere</li>\n  <li>Checkstyle XML check file somewhere</li>\n  <li>To configure git:\n  \n  <ul>\n  <li><code>git config --add checkstyle.jar &lt;location of jar&gt;</code></li>\n  <li><code>git config --add checkstyle.checkfile &lt;location of checkfile&gt;</code></li>\n  <li><code>git config --add java.command &lt;path to java executable&gt; [optional, defaults to assuming it's in your path]</code></li>\n  </ul></li>\n  <li>Put this in your .git/hooks directory as pre-commit</li>\n  </ol>\n</blockquote>\n\n<p>Maybe it doesn't work because I dont understand what <code>git config --add java.command &lt;path to java executable&gt;</code> means. But it says it's optional  If that's not the problem maybe I need to make the script-file an executable somehow?</p>\n\n<p>ps: OS is Windows</p>\n"},{"tags":["java","spring-boot","spring-cloud","spring-cloud-gateway"],"comments":[{"owner":{"account_id":12807728,"reputation":311,"user_id":10891247,"display_name":"ZahraAsgharzade"},"score":0,"creation_date":1637062410,"post_id":67914461,"comment_id":123719662,"body_markdown":"did your problem solve ?? I have same config in gateway but I&#39;m still getting CORS error","body":"did your problem solve ?? I have same config in gateway but I&#39;m still getting CORS error"}],"answers":[{"comments":[{"owner":{"account_id":4485425,"reputation":169,"user_id":3648235,"accept_rate":0,"display_name":"user3648235"},"score":0,"creation_date":1623392762,"post_id":67916341,"comment_id":120070868,"body_markdown":"Thanks. But I already had that. no change. \nI even have this in my Gateway Security Config:\nhttp.csrf().disable().cors().and().build();\n\nAny other idea please ?","body":"Thanks. But I already had that. no change.  I even have this in my Gateway Security Config: http.csrf().disable().cors().and().build();  Any other idea please ?"}],"tags":[],"owner":{"account_id":15117599,"reputation":586,"user_id":10909386,"display_name":"isa_toltar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623309013,"creation_date":1623309013,"answer_id":67916341,"question_id":67914461,"body_markdown":"Can you add add-to-simple-url-handler-mapping property to your application.yml like below and try again\r\n\r\n    cloud:\r\n    gateway:\r\n      globalcors:\r\n        cors-configurations:\r\n          &#39;[/**]&#39;:\r\n            allowedOrigins: &quot;*&quot;\r\n            allowedMethods: &quot;*&quot;\r\n        add-to-simple-url-handler-mapping: true","title":"Error with CORS configuration on Spring Cloud Gateway","body":"<p>Can you add add-to-simple-url-handler-mapping property to your application.yml like below and try again</p>\n<pre><code>cloud:\ngateway:\n  globalcors:\n    cors-configurations:\n      '[/**]':\n        allowedOrigins: &quot;*&quot;\n        allowedMethods: &quot;*&quot;\n    add-to-simple-url-handler-mapping: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5789937,"reputation":1148,"user_id":4567795,"display_name":"twobiers"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626097286,"creation_date":1626097286,"answer_id":68348395,"question_id":67914461,"body_markdown":"In your `CorsConfiguration` you are setting the CORS headers only when it&#39;s a CORS request and don&#39;t if its a preflight request. The preflight request is the one which fails. So you need to remove the `if (CorsUtils.isCorsRequest(request))` condition.","title":"Error with CORS configuration on Spring Cloud Gateway","body":"<p>In your <code>CorsConfiguration</code> you are setting the CORS headers only when it's a CORS request and don't if its a preflight request. The preflight request is the one which fails. So you need to remove the <code>if (CorsUtils.isCorsRequest(request))</code> condition.</p>\n"},{"tags":[],"owner":{"account_id":4243913,"reputation":86,"user_id":3473122,"display_name":"Alyson Xavier Leite"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631652910,"creation_date":1631652910,"answer_id":69184425,"question_id":67914461,"body_markdown":"for the maven users, try add the following dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFix for me","title":"Error with CORS configuration on Spring Cloud Gateway","body":"<p>for the maven users, try add the following dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Fix for me</p>\n"},{"tags":[],"owner":{"account_id":27769927,"reputation":1,"user_id":21200389,"display_name":"hajubal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684392948,"creation_date":1684392887,"answer_id":76278431,"question_id":67914461,"body_markdown":"Use option &quot;allowed-origin-patterns: &#39;*&#39;&quot;. All CORS requests permitted.\r\n\r\n    spring:\r\n      cloud:\r\n        gateway:\r\n          globalcors:\r\n            cors-configurations:\r\n              &#39;[/**]&#39; :\r\n                allowed-origin-patterns: &#39;*&#39;","title":"Error with CORS configuration on Spring Cloud Gateway","body":"<p>Use option &quot;allowed-origin-patterns: '*'&quot;. All CORS requests permitted.</p>\n<pre><code>spring:\n  cloud:\n    gateway:\n      globalcors:\n        cors-configurations:\n          '[/**]' :\n            allowed-origin-patterns: '*'\n</code></pre>\n"}],"owner":{"account_id":4485425,"reputation":169,"user_id":3648235,"accept_rate":0,"display_name":"user3648235"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2949,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1684392948,"creation_date":1623296970,"question_id":67914461,"body_markdown":"Please Help. I am using Spring Cloud Gateway \r\nI keep getting this Cors error:\r\n\r\n**Access to XMLHttpRequest at &#39;http://localhost:8084/users/files&#39; from origin &#39;http://localhost:4200&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.**\r\n\r\nHere is my application.yml file \r\n```spring:\r\n  cloud:\r\n    gateway:\r\n      globalcors:\r\n        cors-configurations:\r\n          &#39;[/**]&#39;:\r\n            allowedOrigins: &quot;*&quot;\r\n            allowedMethods: &quot;*&quot;\r\n```\r\n\r\nHere is my Route Config:\r\n```@Bean\r\n\tpublic RouteLocator myRoutes(RouteLocatorBuilder builder) {\r\n\t\t\r\n\t    return builder.routes()\r\n\t    \t\t.route(r -&gt; r.path(&quot;/users/**&quot;)\r\n\t    \t\t\t\t.filters(f -&gt; f.filter(authFilter))\r\n                        .uri(&quot;http://localhost:8080/&quot;))\r\n \r\n\t            .build();\r\n\t}\r\n```\r\n\r\nHere is my CorsConfiguration File.\r\n\r\n```@Configuration\r\npublic class CorsConfiguration {\r\n\r\n  private static final String ALLOWED_HEADERS = &quot;x-requested-with, authorization, Content-Type, Content-Length, Authorization, credential, X-XSRF-TOKEN&quot;;\r\n  private static final String ALLOWED_METHODS = &quot;GET, PUT, POST, DELETE, OPTIONS, PATCH&quot;;\r\n  private static final String ALLOWED_ORIGIN = &quot;*&quot;;\r\n  private static final String MAX_AGE = &quot;7200&quot;; //2 hours (2 * 60 * 60) \r\n\r\n  @Bean\r\n  public WebFilter corsFilter() {\r\n    return (ServerWebExchange ctx, WebFilterChain chain) -&gt; {\r\n      ServerHttpRequest request = ctx.getRequest();\r\n      if (CorsUtils.isCorsRequest(request)) {\r\n        ServerHttpResponse response = ctx.getResponse();\r\n        HttpHeaders headers = response.getHeaders();\r\n        headers.add(&quot;Access-Control-Allow-Origin&quot;, ALLOWED_ORIGIN);\r\n        headers.add(&quot;Access-Control-Allow-Methods&quot;, ALLOWED_METHODS);\r\n        headers.add(&quot;Access-Control-Max-Age&quot;, MAX_AGE); //OPTION how long the results of a preflight request (that is the information contained in the Access-Control-Allow-Methods and Access-Control-Allow-Headers headers) can be cached. \r\n        headers.add(&quot;Access-Control-Allow-Headers&quot;,ALLOWED_HEADERS);\r\n        if (request.getMethod() == HttpMethod.OPTIONS) {\r\n          response.setStatusCode(HttpStatus.OK);\r\n          return Mono.empty();\r\n        }\r\n      }\r\n      return chain.filter(ctx);\r\n    };\r\n  }\r\n\r\n}\r\n```\r\n","title":"Error with CORS configuration on Spring Cloud Gateway","body":"<p>Please Help. I am using Spring Cloud Gateway\nI keep getting this Cors error:</p>\n<p><strong>Access to XMLHttpRequest at 'http://localhost:8084/users/files' from origin 'http://localhost:4200' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.</strong></p>\n<p>Here is my application.yml file</p>\n<pre><code>  cloud:\n    gateway:\n      globalcors:\n        cors-configurations:\n          '[/**]':\n            allowedOrigins: &quot;*&quot;\n            allowedMethods: &quot;*&quot;\n</code></pre>\n<p>Here is my Route Config:</p>\n<pre><code>    public RouteLocator myRoutes(RouteLocatorBuilder builder) {\n        \n        return builder.routes()\n                .route(r -&gt; r.path(&quot;/users/**&quot;)\n                        .filters(f -&gt; f.filter(authFilter))\n                        .uri(&quot;http://localhost:8080/&quot;))\n \n                .build();\n    }\n</code></pre>\n<p>Here is my CorsConfiguration File.</p>\n<pre><code>public class CorsConfiguration {\n\n  private static final String ALLOWED_HEADERS = &quot;x-requested-with, authorization, Content-Type, Content-Length, Authorization, credential, X-XSRF-TOKEN&quot;;\n  private static final String ALLOWED_METHODS = &quot;GET, PUT, POST, DELETE, OPTIONS, PATCH&quot;;\n  private static final String ALLOWED_ORIGIN = &quot;*&quot;;\n  private static final String MAX_AGE = &quot;7200&quot;; //2 hours (2 * 60 * 60) \n\n  @Bean\n  public WebFilter corsFilter() {\n    return (ServerWebExchange ctx, WebFilterChain chain) -&gt; {\n      ServerHttpRequest request = ctx.getRequest();\n      if (CorsUtils.isCorsRequest(request)) {\n        ServerHttpResponse response = ctx.getResponse();\n        HttpHeaders headers = response.getHeaders();\n        headers.add(&quot;Access-Control-Allow-Origin&quot;, ALLOWED_ORIGIN);\n        headers.add(&quot;Access-Control-Allow-Methods&quot;, ALLOWED_METHODS);\n        headers.add(&quot;Access-Control-Max-Age&quot;, MAX_AGE); //OPTION how long the results of a preflight request (that is the information contained in the Access-Control-Allow-Methods and Access-Control-Allow-Headers headers) can be cached. \n        headers.add(&quot;Access-Control-Allow-Headers&quot;,ALLOWED_HEADERS);\n        if (request.getMethod() == HttpMethod.OPTIONS) {\n          response.setStatusCode(HttpStatus.OK);\n          return Mono.empty();\n        }\n      }\n      return chain.filter(ctx);\n    };\n  }\n\n}\n</code></pre>\n"},{"tags":["java","android","mp3"],"owner":{"account_id":6384435,"reputation":145,"user_id":4952812,"display_name":"Kate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684392639,"creation_date":1684392639,"question_id":76278401,"body_markdown":"The main idea is to have an App that can read an mp3 with looping option in this way:\r\nFor example, my mp3 of 3min have 3 parts, I want to iterate this mp3 like:\r\nPart 1: 3 times, Part 2: 3 times, Part 1 &amp; 2: 3 times and so one so forth...\r\n\r\nMy need is to know how can I add landmarks? should I use metadata and set tags like : [PART_1: 00:30:00, PART_2: .....] ? \r\nHow can I loop from those landmarks?\r\n\r\nThank you,","title":"Java/Android Custumised MP3 Player : how to set landmarks in a MP3 Player","body":"<p>The main idea is to have an App that can read an mp3 with looping option in this way:\nFor example, my mp3 of 3min have 3 parts, I want to iterate this mp3 like:\nPart 1: 3 times, Part 2: 3 times, Part 1 &amp; 2: 3 times and so one so forth...</p>\n<p>My need is to know how can I add landmarks? should I use metadata and set tags like : [PART_1: 00:30:00, PART_2: .....] ?\nHow can I loop from those landmarks?</p>\n<p>Thank you,</p>\n"},{"tags":["java","spring-boot","spring-annotations","aspect"],"owner":{"account_id":5869143,"reputation":665,"user_id":4621980,"display_name":"Sanat Chandravanshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684392434,"creation_date":1684392434,"question_id":76278381,"body_markdown":"I have below annotation for method:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(Element.Method))\r\n    public @interface Memcacheable {\r\n    \tint expiresAfterSeconds() default -1;\r\n    \tString cacheKey();\r\n    \tString cacheType() default &quot;MemCache&quot;;\r\n    }\r\n\r\nand I have below annotation for parameter:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(Element.Parameter))\r\n    public @interface CacheKey {\r\n    }\r\n\r\nAnd I have below method with annotates @Memcacheable:\r\n\r\n    @Memcacheable(cacheKey = &quot;abc&quot;)\r\n        public static String getDefaultShopShareSettings( Integer userId) {\r\n    }\r\n\r\nI want to show compilation error or force to above method to use annotation @cacheKey for parameter(userId)\r\n","title":"I want to show compilation error or force to above method to use annotation @cacheKey for parameter(userId)","body":"<p>I have below annotation for method:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(Element.Method))\npublic @interface Memcacheable {\n    int expiresAfterSeconds() default -1;\n    String cacheKey();\n    String cacheType() default &quot;MemCache&quot;;\n}\n</code></pre>\n<p>and I have below annotation for parameter:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(Element.Parameter))\npublic @interface CacheKey {\n}\n</code></pre>\n<p>And I have below method with annotates @Memcacheable:</p>\n<pre><code>@Memcacheable(cacheKey = &quot;abc&quot;)\n    public static String getDefaultShopShareSettings( Integer userId) {\n}\n</code></pre>\n<p>I want to show compilation error or force to above method to use annotation @cacheKey for parameter(userId)</p>\n"},{"tags":["java","networking","network-programming"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1684394107,"post_id":76278344,"comment_id":134512373,"body_markdown":"Those `http.proxy` settings are for, err, HTTP. They have no effect on a `Socket` or `SSLSocket`. Try it with an `HttpsURLConnection`, which is what you should be using anyway for a website.","body":"Those <code>http.proxy</code> settings are for, err, HTTP. They have no effect on a <code>Socket</code> or <code>SSLSocket</code>. Try it with an <code>HttpsURLConnection</code>, which is what you should be using anyway for a website."},{"owner":{"account_id":1916343,"reputation":402,"user_id":1728856,"accept_rate":40,"display_name":"Cagin Uludamar"},"score":0,"creation_date":1684398077,"post_id":76278344,"comment_id":134513001,"body_markdown":"Yes HttpsURLConnection works. Dived a bit deeper to see why SSLSocket does not work but it seems beyond my expertise..","body":"Yes HttpsURLConnection works. Dived a bit deeper to see why SSLSocket does not work but it seems beyond my expertise.."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1684457511,"post_id":76278344,"comment_id":134524114,"body_markdown":"It doesn&#39;t work because it doesn&#39;t use those properties. `HttpsURLConnection` does not ignore them .Pretty simple. There&#39;s no reason why a socket should care about HTTP proxy settings. It doesn&#39;t know what protocol it is going to speak.","body":"It doesn&#39;t work because it doesn&#39;t use those properties. <code>HttpsURLConnection</code> does not ignore them .Pretty simple. There&#39;s no reason why a socket should care about HTTP proxy settings. It doesn&#39;t know what protocol it is going to speak."}],"owner":{"account_id":1916343,"reputation":402,"user_id":1728856,"accept_rate":40,"display_name":"Cagin Uludamar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":547,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684392085,"creation_date":1684392085,"question_id":76278344,"body_markdown":"I&#39;m trying to make an https connection:\r\n\r\n    public static void main(String[] args) throws UnknownHostException, IOException {\r\n\t\t\r\n\t\t/*None of these worked:\r\n\t\tSystem.setProperty(&quot;http.proxyHost&quot;, &quot;prxgm.aknet.akb&quot;);\r\n\t\tSystem.setProperty(&quot;http.proxyPort&quot;, &quot;8080&quot;);\r\n\t\tSystem.setProperty(&quot;https.proxyHost&quot;, &quot;prxgm.aknet.akb&quot;);\r\n\t\tSystem.setProperty(&quot;https.proxyPort&quot;, &quot;8080&quot;);\r\n\t\tSystem.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\r\n\t\t*/\r\n\t\t\r\n\t\t/*neither this helped:\r\n\t\tProxySearch proxySearch = new ProxySearch();\r\n\t\tproxySearch.addStrategy(Strategy.OS_DEFAULT); \r\n\t\tProxySelector proxySelector = proxySearch.getProxySelector(); \r\n\t\tProxySelector.setDefault(proxySelector); \r\n\t\t*/\r\n\r\n\t\tString host = //&quot;services.gradle.org&quot;\r\n\t\t\t\t&quot;www.yapikredi.com.tr&quot;\r\n\t\t\t\t;\r\n\t\tInteger port = 443;\r\n\t\tSSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n\t\tSSLSocket sslsocket = (SSLSocket) sslsocketfactory\r\n\t\t  .createSocket(host, port);\r\n\t\tInputStream in = sslsocket.getInputStream();\r\n\t\tOutputStream out = sslsocket.getOutputStream();\r\n\r\n\t\tout.write(1);\r\n\t\twhile (in.available() &gt; 0) {\r\n\t\t    System.out.print(in.read());\r\n\t\t}\r\n\r\n\t\tSystem.out.println(&quot;Secured connection performed successfully&quot;);\r\n\t}\r\n\r\nI get this exception:\r\n\r\n    Exception in thread &quot;main&quot; java.net.ConnectException: Connection timed out: connect\r\n\tat java.base/sun.nio.ch.Net.connect0(Native Method)\r\n\tat java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n\tat java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:576)\r\n\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n\tat java.base/java.net.Socket.connect(Socket.java:666)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.&lt;init&gt;(SSLSocketImpl.java:163)\r\n\tat java.base/sun.security.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:88)\r\n\tat SSLDeneme.main(SSLDeneme.java:25)\r\n\r\nI can open https://www.yapikredi.com.tr in my browser, so I think Java proxy settings are not correct.\r\n\r\nThis I&#39;ve tried these without luck so far:\r\n\r\n 1. Set proxy settings using Run Configuration in eclipse: -Dhttp.proxyHost=prxgm.aknet.akb -Dhttp.proxyPort=8080 -Dhttps.proxyHost=prxgm.aknet.akb -Dhttps.proxyPort=8080\r\n 2. Set proxy settings from the Java code as commented out in the code above.\r\n 3. \r\ntracert www.yapikredi.com.tr prints:\r\n\r\n\tTracing route to www.yapikredi.com.tr [193.254.228.224] over a maximum of 30 hops:\r\n\t  1    &lt;1 ms    &lt;1 ms    &lt;1 ms  10.215.144.1\r\n\t  2     1 ms    &lt;1 ms    &lt;1 ms  10.215.252.3\r\n\t  3     1 ms    &lt;1 ms    &lt;1 ms  10.243.226.61\r\n\t  4     *        *        *     Request timed out.\r\n\t  5     *        *        *     Request timed out.\r\n\t  6     *        *        *     Request timed out.\r\n\t  7     *        *        *     Request timed out.\r\n\t  8     *        *        *     Request timed out.\r\n\t  9     *        *        *     Request timed out.\r\n\t 10     *        *        *     Request timed out.\r\n\t 11     *        *        *     Request timed out.\r\n\t 12     *        *        *     Request timed out.\r\n\t 13     *        *        *     Request timed out.\r\n\t 14     *        *        *     Request timed out.\r\n\t 15     *        *        *     Request timed out.\r\n\t 16     *        *        *     Request timed out.\r\n\t 17     *        *        *     Request timed out.\r\n\t 18     *        *        *     Request timed out.\r\n\t 19     *        *        *     Request timed out.\r\n\t 20     *        *        *     Request timed out.\r\n\t 21     *        *        *     Request timed out.\r\n\t 22     *        *        *     Request timed out.\r\n\t 23     *        *        *     Request timed out.\r\n\t 24     *        *        *     Request timed out.\r\n\t 25     *        *        *     Request timed out.\r\n\t 26     *        *        *     Request timed out.\r\n\t 27     *        *        *     Request timed out.\r\n\t 28     *        *        *     Request timed out.\r\n\t 29     *        *        *     Request timed out.\r\n\t 30     *        *        *     Request timed out.\r\n\r\n\tTrace complete.\r\n 4. \r\nping to destination time outs (ping may be disabled in our system):\r\n\r\n    ping www.yapikredi.com.tr\r\n\tPinging www.yapikredi.com.tr [193.254.228.224] with 32 bytes of data:\r\n\tRequest timed out.\r\n\tRequest timed out.\r\n\tRequest timed out.\r\n\tRequest timed out.\r\n\tPing statistics for 193.254.228.224:\r\n\t\tPackets: Sent = 4, Received = 0, Lost = 4 (100% loss),\r\n 5. telnet www.yapikredi.com.tr times out.\r\n 6. The code above, and all telnet tracert etc checks work ok for an address that by-passes proxy (a.k.a. https://www.akbank.com)\r\n 7. [Proxy-Vole][1] library [suggested here][2] didn&#39;t help either.\r\n\r\nWhat else can I check?\r\n\r\n\r\n  [1]: http://code.google.com/p/proxy-vole/\r\n  [2]: https://stackoverflow.com/a/10325919/1728856","title":"java.net.ConnectException: Connection timed out: connect. Have tried everything so far","body":"<p>I'm trying to make an https connection:</p>\n<pre><code>public static void main(String[] args) throws UnknownHostException, IOException {\n    \n    /*None of these worked:\n    System.setProperty(&quot;http.proxyHost&quot;, &quot;prxgm.aknet.akb&quot;);\n    System.setProperty(&quot;http.proxyPort&quot;, &quot;8080&quot;);\n    System.setProperty(&quot;https.proxyHost&quot;, &quot;prxgm.aknet.akb&quot;);\n    System.setProperty(&quot;https.proxyPort&quot;, &quot;8080&quot;);\n    System.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\n    */\n    \n    /*neither this helped:\n    ProxySearch proxySearch = new ProxySearch();\n    proxySearch.addStrategy(Strategy.OS_DEFAULT); \n    ProxySelector proxySelector = proxySearch.getProxySelector(); \n    ProxySelector.setDefault(proxySelector); \n    */\n\n    String host = //&quot;services.gradle.org&quot;\n            &quot;www.yapikredi.com.tr&quot;\n            ;\n    Integer port = 443;\n    SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\n    SSLSocket sslsocket = (SSLSocket) sslsocketfactory\n      .createSocket(host, port);\n    InputStream in = sslsocket.getInputStream();\n    OutputStream out = sslsocket.getOutputStream();\n\n    out.write(1);\n    while (in.available() &gt; 0) {\n        System.out.print(in.read());\n    }\n\n    System.out.println(&quot;Secured connection performed successfully&quot;);\n}\n</code></pre>\n<p>I get this exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.net.ConnectException: Connection timed out: connect\nat java.base/sun.nio.ch.Net.connect0(Native Method)\nat java.base/sun.nio.ch.Net.connect(Net.java:579)\nat java.base/sun.nio.ch.Net.connect(Net.java:568)\nat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:576)\nat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\nat java.base/java.net.Socket.connect(Socket.java:666)\nat java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\nat java.base/sun.security.ssl.SSLSocketImpl.&lt;init&gt;(SSLSocketImpl.java:163)\nat java.base/sun.security.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:88)\nat SSLDeneme.main(SSLDeneme.java:25)\n</code></pre>\n<p>I can open <a href=\"https://www.yapikredi.com.tr\" rel=\"nofollow noreferrer\">https://www.yapikredi.com.tr</a> in my browser, so I think Java proxy settings are not correct.</p>\n<p>This I've tried these without luck so far:</p>\n<ol>\n<li>Set proxy settings using Run Configuration in eclipse: -Dhttp.proxyHost=prxgm.aknet.akb -Dhttp.proxyPort=8080 -Dhttps.proxyHost=prxgm.aknet.akb -Dhttps.proxyPort=8080</li>\n<li>Set proxy settings from the Java code as commented out in the code above.</li>\n<li></li>\n</ol>\n<p>tracert <a href=\"http://www.yapikredi.com.tr\" rel=\"nofollow noreferrer\">www.yapikredi.com.tr</a> prints:</p>\n<pre><code>Tracing route to www.yapikredi.com.tr [193.254.228.224] over a maximum of 30 hops:\n  1    &lt;1 ms    &lt;1 ms    &lt;1 ms  10.215.144.1\n  2     1 ms    &lt;1 ms    &lt;1 ms  10.215.252.3\n  3     1 ms    &lt;1 ms    &lt;1 ms  10.243.226.61\n  4     *        *        *     Request timed out.\n  5     *        *        *     Request timed out.\n  6     *        *        *     Request timed out.\n  7     *        *        *     Request timed out.\n  8     *        *        *     Request timed out.\n  9     *        *        *     Request timed out.\n 10     *        *        *     Request timed out.\n 11     *        *        *     Request timed out.\n 12     *        *        *     Request timed out.\n 13     *        *        *     Request timed out.\n 14     *        *        *     Request timed out.\n 15     *        *        *     Request timed out.\n 16     *        *        *     Request timed out.\n 17     *        *        *     Request timed out.\n 18     *        *        *     Request timed out.\n 19     *        *        *     Request timed out.\n 20     *        *        *     Request timed out.\n 21     *        *        *     Request timed out.\n 22     *        *        *     Request timed out.\n 23     *        *        *     Request timed out.\n 24     *        *        *     Request timed out.\n 25     *        *        *     Request timed out.\n 26     *        *        *     Request timed out.\n 27     *        *        *     Request timed out.\n 28     *        *        *     Request timed out.\n 29     *        *        *     Request timed out.\n 30     *        *        *     Request timed out.\n\nTrace complete.\n</code></pre>\n<ol start=\"4\">\n<li></li>\n</ol>\n<p>ping to destination time outs (ping may be disabled in our system):</p>\n<pre><code>ping www.yapikredi.com.tr\nPinging www.yapikredi.com.tr [193.254.228.224] with 32 bytes of data:\nRequest timed out.\nRequest timed out.\nRequest timed out.\nRequest timed out.\nPing statistics for 193.254.228.224:\n    Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),\n</code></pre>\n<ol start=\"5\">\n<li>telnet <a href=\"http://www.yapikredi.com.tr\" rel=\"nofollow noreferrer\">www.yapikredi.com.tr</a> times out.</li>\n<li>The code above, and all telnet tracert etc checks work ok for an address that by-passes proxy (a.k.a. <a href=\"https://www.akbank.com\" rel=\"nofollow noreferrer\">https://www.akbank.com</a>)</li>\n<li><a href=\"http://code.google.com/p/proxy-vole/\" rel=\"nofollow noreferrer\">Proxy-Vole</a> library <a href=\"https://stackoverflow.com/a/10325919/1728856\">suggested here</a> didn't help either.</li>\n</ol>\n<p>What else can I check?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1686549227,"post_id":76278286,"comment_id":134807921,"body_markdown":"Hey Дархан. Have you tried my solution above, does it work for you?","body":"Hey Дархан. Have you tried my solution above, does it work for you?"}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684391418,"creation_date":1684391418,"answer_id":76278286,"question_id":76275503,"body_markdown":"The problem lies in the following line of code:\r\n\r\n    RootRef.child(&quot;Users&quot;).child(phone).updateChildren(userDataMap).addOnCompleteListener(/*.../*);\r\n\r\nThe [DatabaseReference#updateChildren(@NonNull Map&lt;String, Object&gt; update)][1] takes an argument of type `Map&lt;String, Object&gt;`. The `userDataMap` object is defined as:\r\n\r\n    HashMap&lt;String, Object&gt; userDataMap = new HashMap&lt;&gt;();\r\n    //&#128070;\r\n\r\nWhich is HashMap, not a Map, hence the error. To solve this, you need to simply change the type of the object like this:\r\n\r\n    Map&lt;String, Object&gt; userDataMap = new HashMap&lt;&gt;();\r\n    //&#128070;\r\n\r\nAnd your error will be gone.\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/database/DatabaseReference#updateChildren(java.util.Map%3Cjava.lang.String,java.lang.Object%3E)","title":"error: method updateChildren in class DatabaseReference cannot be applied to given types;","body":"<p>The problem lies in the following line of code:</p>\n<pre><code>RootRef.child(&quot;Users&quot;).child(phone).updateChildren(userDataMap).addOnCompleteListener(/*.../*);\n</code></pre>\n<p>The <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/database/DatabaseReference#updateChildren(java.util.Map%3Cjava.lang.String,java.lang.Object%3E)\" rel=\"nofollow noreferrer\">DatabaseReference#updateChildren(@NonNull Map&lt;String, Object&gt; update)</a> takes an argument of type <code>Map&lt;String, Object&gt;</code>. The <code>userDataMap</code> object is defined as:</p>\n<pre><code>HashMap&lt;String, Object&gt; userDataMap = new HashMap&lt;&gt;();\n//👆\n</code></pre>\n<p>Which is HashMap, not a Map, hence the error. To solve this, you need to simply change the type of the object like this:</p>\n<pre><code>Map&lt;String, Object&gt; userDataMap = new HashMap&lt;&gt;();\n//👆\n</code></pre>\n<p>And your error will be gone.</p>\n"}],"owner":{"account_id":28622872,"reputation":1,"user_id":21915539,"display_name":"Дархан Нуришев"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684391519,"creation_date":1684350844,"question_id":76275503,"body_markdown":"My English is bad. I can&#39;t solve this problem. I do not know how to change the code to make everything work:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    RootRef.child(&quot;Users&quot;).child(phone).updateChildren(userDataMap).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n\r\n```                                               ^\r\n  required: Map&lt;String,Object&gt;,CompletionListener\r\n  found:    HashMap&lt;String,Object&gt;\r\n  reason: actual and formal argument lists differ in length\r\n```\r\n\r\nMy code:\r\n\r\n\r\n```\r\ntyppackage com.example.remont_okon;\r\n\r\nimport static java.util.Collections.*;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.service.autofill.UserData;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.Collections;\r\nimport java.util.HashMap;\r\nimport java.util.Objects;\r\n\r\npublic class RegisterActivity extends AppCompatActivity {\r\n\r\n    private Button registerbutton;\r\n    private EditText usernameinput,phoneinput,passwordinput;\r\n    private ProgressDialog loandingbar;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_register);\r\n        registerbutton = (Button) findViewById(R.id.register_button);\r\n        usernameinput = (EditText) findViewById(R.id.register_username_input);\r\n        phoneinput = (EditText) findViewById(R.id.register_phone_input);\r\n        passwordinput = (EditText) findViewById(R.id.register_password_input);\r\n        loandingbar = new ProgressDialog(this);\r\n        registerbutton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                CreateAccount();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void CreateAccount() {\r\n        String username = usernameinput.getText().toString();\r\n        String phone = phoneinput.getText().toString();\r\n        String passsword = passwordinput.getText().toString();\r\n\r\n        if(TextUtils.isEmpty(username)){\r\n            Toast.makeText(this, &quot;Введите Имя&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        else if(TextUtils.isEmpty(phone)){\r\n            Toast.makeText(this, &quot;Введите Телефон&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        else if(TextUtils.isEmpty(passsword)){\r\n            Toast.makeText(this, &quot;Введите пароль&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        else\r\n        {\r\n            loandingbar.setTitle(&quot;Создание аккаунта&quot;);\r\n            loandingbar.setMessage(&quot;Пожалуйста подождите&quot;);\r\n            loandingbar.setCanceledOnTouchOutside(false);\r\n            loandingbar.show();\r\n\r\n            ValidatePhone(username,phone,passsword);\r\n        }\r\n\r\n    }\r\n\r\n    private void ValidatePhone(final String username, final String phone, final String passsword) {\r\n        final DatabaseReference RootRef;\r\n        RootRef = FirebaseDatabase.getInstance().getReference();\r\n\r\n\r\n        RootRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                if(!(dataSnapshot.child(&quot;Users&quot;).child(phone).exists()))\r\n                {\r\n                    HashMap&lt;String, Object&gt; userDataMap = new HashMap&lt;&gt;();\r\n                    userDataMap.put(&quot;phone&quot;, phone );\r\n                    userDataMap.put(&quot;name&quot;, username );\r\n                    userDataMap.put(&quot;password&quot;, passsword );\r\n\r\n                    RootRef.child(&quot;Users&quot;).child(phone).updateChildren(userDataMap).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                            if (task.isSuccessful()) {\r\n                                loandingbar.dismiss();\r\n                                Toast.makeText(RegisterActivity.this, &quot;Регистрация прошла успешно&quot;, Toast.LENGTH_SHORT).show();\r\n                                Intent loginIntent = new Intent(RegisterActivity.this, LoginActivity.class);\r\n                                startActivity(loginIntent);\r\n\r\n                            } else {\r\n                                loandingbar.dismiss();\r\n                                Toast.makeText(RegisterActivity.this, &quot;Регистрация не прошла успешно&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    Toast.makeText(RegisterActivity.this, &quot;Номре&quot; + phone + &quot;Уже зарегестрирован&quot;, Toast.LENGTH_SHORT).show();\r\n                    loandingbar.dismiss();\r\n                    Intent loginIntent = new Intent(RegisterActivity.this, LoginActivity.class);\r\n                    startActivity(loginIntent);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI have already installed updates and downgraded versions of packages. At the moment, my gradle file looks like this.\r\n\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    // Add the Google services Gradle plugin\r\n    id &#39;com.google.gms.google-services&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.remont_okon&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.remont_okon&quot;\r\n        minSdk 24\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation (&#39;com.ibm.watson:ibm-watson:7.0.0&#39;){\r\n        exclude group: &#39;com.google.code.findbugs&#39;, module: &#39;annotations&#39;\r\n    }\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.3.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;com.google.firebase:firebase-analytics:17.2.1&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:16.0.4&#39;\r\n    implementation &#39;com.google.firebase:firebase-admin:9.1.1&#39;\r\n    implementation platform(&#39;com.google.firebase:firebase-bom:32.0.0&#39;)\r\n    implementation &#39;com.google.firebase:firebase-analytics&#39;\r\n    implementation &#39;com.github.rey5137:material:1.2.5&#39;\r\n    implementation &#39;com.google.firebase:firebase-firestore:24.1.0&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/01CEE.png","title":"error: method updateChildren in class DatabaseReference cannot be applied to given types;","body":"<p>My English is bad. I can't solve this problem. I do not know how to change the code to make everything work:</p>\n<p><a href=\"https://i.stack.imgur.com/01CEE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/01CEE.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>RootRef.child(&quot;Users&quot;).child(phone).updateChildren(userDataMap).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n</code></pre>\n<pre><code>  required: Map&lt;String,Object&gt;,CompletionListener\n  found:    HashMap&lt;String,Object&gt;\n  reason: actual and formal argument lists differ in length\n</code></pre>\n<p>My code:</p>\n<pre><code>typpackage com.example.remont_okon;\n\nimport static java.util.Collections.*;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.app.ProgressDialog;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.service.autofill.UserData;\nimport android.text.TextUtils;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\n\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Objects;\n\npublic class RegisterActivity extends AppCompatActivity {\n\n    private Button registerbutton;\n    private EditText usernameinput,phoneinput,passwordinput;\n    private ProgressDialog loandingbar;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_register);\n        registerbutton = (Button) findViewById(R.id.register_button);\n        usernameinput = (EditText) findViewById(R.id.register_username_input);\n        phoneinput = (EditText) findViewById(R.id.register_phone_input);\n        passwordinput = (EditText) findViewById(R.id.register_password_input);\n        loandingbar = new ProgressDialog(this);\n        registerbutton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                CreateAccount();\n            }\n        });\n\n\n    }\n\n    private void CreateAccount() {\n        String username = usernameinput.getText().toString();\n        String phone = phoneinput.getText().toString();\n        String passsword = passwordinput.getText().toString();\n\n        if(TextUtils.isEmpty(username)){\n            Toast.makeText(this, &quot;Введите Имя&quot;, Toast.LENGTH_SHORT).show();\n        }\n        else if(TextUtils.isEmpty(phone)){\n            Toast.makeText(this, &quot;Введите Телефон&quot;, Toast.LENGTH_SHORT).show();\n        }\n        else if(TextUtils.isEmpty(passsword)){\n            Toast.makeText(this, &quot;Введите пароль&quot;, Toast.LENGTH_SHORT).show();\n        }\n        else\n        {\n            loandingbar.setTitle(&quot;Создание аккаунта&quot;);\n            loandingbar.setMessage(&quot;Пожалуйста подождите&quot;);\n            loandingbar.setCanceledOnTouchOutside(false);\n            loandingbar.show();\n\n            ValidatePhone(username,phone,passsword);\n        }\n\n    }\n\n    private void ValidatePhone(final String username, final String phone, final String passsword) {\n        final DatabaseReference RootRef;\n        RootRef = FirebaseDatabase.getInstance().getReference();\n\n\n        RootRef.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n                if(!(dataSnapshot.child(&quot;Users&quot;).child(phone).exists()))\n                {\n                    HashMap&lt;String, Object&gt; userDataMap = new HashMap&lt;&gt;();\n                    userDataMap.put(&quot;phone&quot;, phone );\n                    userDataMap.put(&quot;name&quot;, username );\n                    userDataMap.put(&quot;password&quot;, passsword );\n\n                    RootRef.child(&quot;Users&quot;).child(phone).updateChildren(userDataMap).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                        @Override\n                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                            if (task.isSuccessful()) {\n                                loandingbar.dismiss();\n                                Toast.makeText(RegisterActivity.this, &quot;Регистрация прошла успешно&quot;, Toast.LENGTH_SHORT).show();\n                                Intent loginIntent = new Intent(RegisterActivity.this, LoginActivity.class);\n                                startActivity(loginIntent);\n\n                            } else {\n                                loandingbar.dismiss();\n                                Toast.makeText(RegisterActivity.this, &quot;Регистрация не прошла успешно&quot;, Toast.LENGTH_SHORT).show();\n                            }\n                        }\n                    });\n                }\n                else {\n                    Toast.makeText(RegisterActivity.this, &quot;Номре&quot; + phone + &quot;Уже зарегестрирован&quot;, Toast.LENGTH_SHORT).show();\n                    loandingbar.dismiss();\n                    Intent loginIntent = new Intent(RegisterActivity.this, LoginActivity.class);\n                    startActivity(loginIntent);\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n}\n\n</code></pre>\n<p>I have already installed updates and downgraded versions of packages. At the moment, my gradle file looks like this.</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    // Add the Google services Gradle plugin\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    namespace 'com.example.remont_okon'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.remont_okon&quot;\n        minSdk 24\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation ('com.ibm.watson:ibm-watson:7.0.0'){\n        exclude group: 'com.google.code.findbugs', module: 'annotations'\n    }\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'androidx.cardview:cardview:1.0.0'\n    implementation 'androidx.recyclerview:recyclerview:1.3.0'\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.google.firebase:firebase-analytics:17.2.1'\n    implementation 'com.google.firebase:firebase-database:16.0.4'\n    implementation 'com.google.firebase:firebase-admin:9.1.1'\n    implementation platform('com.google.firebase:firebase-bom:32.0.0')\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.github.rey5137:material:1.2.5'\n    implementation 'com.google.firebase:firebase-firestore:24.1.0'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":21584472,"reputation":690,"user_id":15915172,"display_name":"Rakesh Saini"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684391474,"creation_date":1684391474,"answer_id":76278294,"question_id":76278188,"body_markdown":"If you want to apply this like googles speech listener starts &quot;Listening...&quot;\r\n\r\nThen you can use this below example.\r\n\r\n**Shape: Create a Drawable shape, (name: dot_background)**\r\n\r\n    &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n       android:shape=&quot;oval&quot;&gt;\r\n      &lt;solid android:color=&quot;#808080&quot; /&gt;\r\n    &lt;/shape&gt;\r\n\r\n**xml part , (name: activity_main)**\r\n\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:id=&quot;@+id/dots_container&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/dot1&quot;\r\n        android:layout_width=&quot;12dp&quot;\r\n        android:layout_height=&quot;12dp&quot;\r\n        android:background=&quot;@drawable/dot_background&quot;\r\n        android:visibility=&quot;invisible&quot; /&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/dot2&quot;\r\n        android:layout_width=&quot;12dp&quot;\r\n        android:layout_height=&quot;12dp&quot;\r\n        android:background=&quot;@drawable/dot_background&quot;\r\n        android:visibility=&quot;invisible&quot; /&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/dot3&quot;\r\n        android:layout_width=&quot;12dp&quot;\r\n        android:layout_height=&quot;12dp&quot;\r\n        android:background=&quot;@drawable/dot_background&quot;\r\n        android:visibility=&quot;invisible&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n**Java File:**\r\n\r\n\r\n        import android.os.Bundle;\r\n        import android.os.Handler;\r\n        import android.support.v7.app.AppCompatActivity;\r\n        import android.view.animation.AlphaAnimation;\r\n        import android.view.animation.Animation;\r\n        import android.widget.ImageView;\r\n        import android.widget.LinearLayout;\r\n\r\n        public class MainActivity extends AppCompatActivity {\r\n\r\n            private static final long DOTS_ANIMATION_DELAY = 500; // Delay between dot visibility changes\r\n\r\n            private LinearLayout dotsContainer;\r\n            private Handler handler;\r\n            private Runnable dotsAnimationRunnable;\r\n            private boolean isVisible = false;\r\n\r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_main);\r\n\r\n                dotsContainer = findViewById(R.id.dots_container);\r\n                handler = new Handler();\r\n\r\n                dotsAnimationRunnable = new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        toggleDotsVisibility();\r\n                        handler.postDelayed(this, DOTS_ANIMATION_DELAY);\r\n                    }\r\n                };\r\n            }\r\n\r\n            @Override\r\n            protected void onResume() {\r\n                super.onResume();\r\n                startDotsAnimation();\r\n            }\r\n\r\n            @Override\r\n            protected void onPause() {\r\n                super.onPause();\r\n                stopDotsAnimation();\r\n            }\r\n\r\n            private void startDotsAnimation() {\r\n                handler.postDelayed(dotsAnimationRunnable, DOTS_ANIMATION_DELAY);\r\n            }\r\n\r\n            private void stopDotsAnimation() {\r\n                handler.removeCallbacks(dotsAnimationRunnable);\r\n            }\r\n\r\n            private void toggleDotsVisibility() {\r\n                for (int i = 0; i &lt; dotsContainer.getChildCount(); i++) {\r\n                    ImageView dot = (ImageView) dotsContainer.getChildAt(i);\r\n                    if (isVisible) {\r\n                        fadeOut(dot);\r\n                    } else {\r\n                        fadeIn(dot);\r\n                    }\r\n                }\r\n                isVisible = !isVisible;\r\n            }\r\n\r\n            private void fadeIn(ImageView dot) {\r\n                Animation fadeInAnimation = new AlphaAnimation(0, 1);\r\n                fadeInAnimation.setDuration(300);\r\n                dot.startAnimation(fadeInAnimation);\r\n                dot.setVisibility(ImageView.VISIBLE);\r\n            }\r\n\r\n            private void fadeOut(ImageView dot) {\r\n                Animation fadeOutAnimation = new AlphaAnimation(1, 0);\r\n                fadeOutAnimation.setDuration(300);\r\n                dot.startAnimation(fadeOutAnimation);\r\n                dot.setVisibility(ImageView.INVISIBLE);\r\n            }\r\n        }\r\n\r\n    \r\n\r\n\r\n\r\n","title":"Android: append a character to my textview after every second","body":"<p>If you want to apply this like googles speech listener starts &quot;Listening...&quot;</p>\n<p>Then you can use this below example.</p>\n<p><strong>Shape: Create a Drawable shape, (name: dot_background)</strong></p>\n<pre><code>&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n   android:shape=&quot;oval&quot;&gt;\n  &lt;solid android:color=&quot;#808080&quot; /&gt;\n&lt;/shape&gt;\n</code></pre>\n<p><strong>xml part , (name: activity_main)</strong></p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nandroid:id=&quot;@+id/dots_container&quot;\nandroid:layout_width=&quot;wrap_content&quot;\nandroid:layout_height=&quot;wrap_content&quot;\nandroid:orientation=&quot;horizontal&quot;&gt;\n\n&lt;ImageView\n    android:id=&quot;@+id/dot1&quot;\n    android:layout_width=&quot;12dp&quot;\n    android:layout_height=&quot;12dp&quot;\n    android:background=&quot;@drawable/dot_background&quot;\n    android:visibility=&quot;invisible&quot; /&gt;\n\n&lt;ImageView\n    android:id=&quot;@+id/dot2&quot;\n    android:layout_width=&quot;12dp&quot;\n    android:layout_height=&quot;12dp&quot;\n    android:background=&quot;@drawable/dot_background&quot;\n    android:visibility=&quot;invisible&quot; /&gt;\n\n&lt;ImageView\n    android:id=&quot;@+id/dot3&quot;\n    android:layout_width=&quot;12dp&quot;\n    android:layout_height=&quot;12dp&quot;\n    android:background=&quot;@drawable/dot_background&quot;\n    android:visibility=&quot;invisible&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p><strong>Java File:</strong></p>\n<pre><code>    import android.os.Bundle;\n    import android.os.Handler;\n    import android.support.v7.app.AppCompatActivity;\n    import android.view.animation.AlphaAnimation;\n    import android.view.animation.Animation;\n    import android.widget.ImageView;\n    import android.widget.LinearLayout;\n\n    public class MainActivity extends AppCompatActivity {\n\n        private static final long DOTS_ANIMATION_DELAY = 500; // Delay between dot visibility changes\n\n        private LinearLayout dotsContainer;\n        private Handler handler;\n        private Runnable dotsAnimationRunnable;\n        private boolean isVisible = false;\n\n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n\n            dotsContainer = findViewById(R.id.dots_container);\n            handler = new Handler();\n\n            dotsAnimationRunnable = new Runnable() {\n                @Override\n                public void run() {\n                    toggleDotsVisibility();\n                    handler.postDelayed(this, DOTS_ANIMATION_DELAY);\n                }\n            };\n        }\n\n        @Override\n        protected void onResume() {\n            super.onResume();\n            startDotsAnimation();\n        }\n\n        @Override\n        protected void onPause() {\n            super.onPause();\n            stopDotsAnimation();\n        }\n\n        private void startDotsAnimation() {\n            handler.postDelayed(dotsAnimationRunnable, DOTS_ANIMATION_DELAY);\n        }\n\n        private void stopDotsAnimation() {\n            handler.removeCallbacks(dotsAnimationRunnable);\n        }\n\n        private void toggleDotsVisibility() {\n            for (int i = 0; i &lt; dotsContainer.getChildCount(); i++) {\n                ImageView dot = (ImageView) dotsContainer.getChildAt(i);\n                if (isVisible) {\n                    fadeOut(dot);\n                } else {\n                    fadeIn(dot);\n                }\n            }\n            isVisible = !isVisible;\n        }\n\n        private void fadeIn(ImageView dot) {\n            Animation fadeInAnimation = new AlphaAnimation(0, 1);\n            fadeInAnimation.setDuration(300);\n            dot.startAnimation(fadeInAnimation);\n            dot.setVisibility(ImageView.VISIBLE);\n        }\n\n        private void fadeOut(ImageView dot) {\n            Animation fadeOutAnimation = new AlphaAnimation(1, 0);\n            fadeOutAnimation.setDuration(300);\n            dot.startAnimation(fadeOutAnimation);\n            dot.setVisibility(ImageView.INVISIBLE);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":28625477,"reputation":81,"user_id":21917572,"display_name":"abhishek_6198"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76278294,"answer_count":1,"score":1,"last_activity_date":1684391474,"creation_date":1684390437,"question_id":76278188,"body_markdown":"I want to append a dot(**.**) to my `textview` after every second. When it reaches 3 dots, it should reset to a single dot and continue the loop like this:\r\n```\r\nmytext.\r\nmytext..\r\nmytext...\r\nmytext.\r\nmytext..\r\nmytext...\r\n\r\nand so on\r\n```\r\nMy java code:\r\n```\r\nMaterialTextView txt = alertdialog.findViewById(R.id.dialogtext);\r\n\r\nnew Timer().scheduleAtFixedRate(new TimerTask(){\r\n    @Override\r\n    public void run(){\r\n        for(int i=0; i&lt;3; i++){\r\n            for(int j=0; j&lt;i; j++){\r\n                   //I am stuck here                         \r\n            }\r\n        }\r\n    }\r\n},0,1000);\r\n```\r\n\r\n\r\n\r\nI have no idea, how to write the logic for getting my desired objective. Please guide me.","title":"Android: append a character to my textview after every second","body":"<p>I want to append a dot(<strong>.</strong>) to my <code>textview</code> after every second. When it reaches 3 dots, it should reset to a single dot and continue the loop like this:</p>\n<pre><code>mytext.\nmytext..\nmytext...\nmytext.\nmytext..\nmytext...\n\nand so on\n</code></pre>\n<p>My java code:</p>\n<pre><code>MaterialTextView txt = alertdialog.findViewById(R.id.dialogtext);\n\nnew Timer().scheduleAtFixedRate(new TimerTask(){\n    @Override\n    public void run(){\n        for(int i=0; i&lt;3; i++){\n            for(int j=0; j&lt;i; j++){\n                   //I am stuck here                         \n            }\n        }\n    }\n},0,1000);\n</code></pre>\n<p>I have no idea, how to write the logic for getting my desired objective. Please guide me.</p>\n"},{"tags":["java","spring-boot","oauth-2.0","jwt"],"answers":[{"tags":[],"owner":{"account_id":1060897,"reputation":33,"user_id":8200108,"display_name":"tanneraphid34"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684390969,"creation_date":1684390969,"answer_id":76278238,"question_id":73418185,"body_markdown":"Signature validation of access token fails if the &quot;kid&quot; (key identifier) in the access token header does not have a corresponding kid in the JWKS.\r\n\r\nIn your case each instance of the Auth Server is generating a new `kid` due to `UUID.randomUUID().toString()` used here. So access_token generated in one instance will fail signature validation in second instance and vice versa.\r\n\r\nFix for this would be to generate and inject a static UUID.\r\n\r\n    private static RSAKey generateRsa() {\r\n        RSAPublicKey publicKey = RsaKeyProperties.getPublicKey();\r\n        RSAPrivateKey privateKey = RsaKeyProperties.getPrivateKey();\r\n\r\n        return new RSAKey.Builder(publicKey)\r\n                .privateKey(privateKey)\r\n                .keyID(&quot;9a9b9b7c-33d8-40f0-bd64-d85c7a5aa33a&quot;)\r\n                .build();\r\n    }\r\n\r\nNOTE: I&#39;ve only added a static id as an example here. You should ideally store this value securely and retrieve it during the startup of the Auth Server Service.","title":"Spring Boot OAuth 2 Authorization Server JWK value is different when there are multiple instances and JWT validation at the resource server fails","body":"<p>Signature validation of access token fails if the &quot;kid&quot; (key identifier) in the access token header does not have a corresponding kid in the JWKS.</p>\n<p>In your case each instance of the Auth Server is generating a new <code>kid</code> due to <code>UUID.randomUUID().toString()</code> used here. So access_token generated in one instance will fail signature validation in second instance and vice versa.</p>\n<p>Fix for this would be to generate and inject a static UUID.</p>\n<pre><code>private static RSAKey generateRsa() {\n    RSAPublicKey publicKey = RsaKeyProperties.getPublicKey();\n    RSAPrivateKey privateKey = RsaKeyProperties.getPrivateKey();\n\n    return new RSAKey.Builder(publicKey)\n            .privateKey(privateKey)\n            .keyID(&quot;9a9b9b7c-33d8-40f0-bd64-d85c7a5aa33a&quot;)\n            .build();\n}\n</code></pre>\n<p>NOTE: I've only added a static id as an example here. You should ideally store this value securely and retrieve it during the startup of the Auth Server Service.</p>\n"}],"owner":{"account_id":19634754,"reputation":51,"user_id":14372221,"display_name":"Pradeep N S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684390969,"creation_date":1660918618,"question_id":73418185,"body_markdown":"I have an Authorization Server deployed in the cloud (PCF) with multiple instances. While retrieving user info (resource server), I am getting the error below. As per my observation, each instance generates a different JWK source. When the request goes to the instance where the token was generated it works fine. But when a request goes to another instance, the following error occurs:\r\n\r\n**o.s.s.o.s.r.a.JwtAuthenticationProvider : Failed to authenticate since the JWT was invalid**  \r\n\r\nI have customized RSA keys to read from a properties file.\r\n\r\n```\r\n@Bean\r\n\t@Order(Ordered.HIGHEST_PRECEDENCE)\r\n\tpublic SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\r\n\t\tOAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n\t\thttp.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\r\n @Bean\r\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\r\n        RSAKey rsaKey = generateRsa();\r\n        JWKSet jwkSet = new JWKSet(rsaKey);\r\n        return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\r\n    }\r\n\r\n\r\n    private static RSAKey generateRsa() {\r\n        RSAPublicKey publicKey = RsaKeyProperties.getPublicKey();\r\n        RSAPrivateKey privateKey = RsaKeyProperties.getPrivateKey();\r\n\r\n        return new RSAKey.Builder(publicKey)\r\n                .privateKey(privateKey)\r\n                .keyID(UUID.randomUUID().toString())\r\n                .build();\r\n    }\r\n\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\r\n            &lt;version&gt;0.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n```\r\nNote: Session store type is Redis","title":"Spring Boot OAuth 2 Authorization Server JWK value is different when there are multiple instances and JWT validation at the resource server fails","body":"<p>I have an Authorization Server deployed in the cloud (PCF) with multiple instances. While retrieving user info (resource server), I am getting the error below. As per my observation, each instance generates a different JWK source. When the request goes to the instance where the token was generated it works fine. But when a request goes to another instance, the following error occurs:</p>\n<p><strong>o.s.s.o.s.r.a.JwtAuthenticationProvider : Failed to authenticate since the JWT was invalid</strong></p>\n<p>I have customized RSA keys to read from a properties file.</p>\n<pre><code>@Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n        return http.build();\n    }\n\n\n @Bean\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\n        RSAKey rsaKey = generateRsa();\n        JWKSet jwkSet = new JWKSet(rsaKey);\n        return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\n    }\n\n\n    private static RSAKey generateRsa() {\n        RSAPublicKey publicKey = RsaKeyProperties.getPublicKey();\n        RSAPrivateKey privateKey = RsaKeyProperties.getPrivateKey();\n\n        return new RSAKey.Builder(publicKey)\n                .privateKey(privateKey)\n                .keyID(UUID.randomUUID().toString())\n                .build();\n    }\n\n       &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\n            &lt;version&gt;0.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>Note: Session store type is Redis</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":32380,"reputation":134957,"user_id":89806,"accept_rate":58,"display_name":"moinudin"},"score":1,"creation_date":1293910284,"post_id":4575387,"comment_id":5021903,"body_markdown":"Sounds like homework. What have you tried?","body":"Sounds like homework. What have you tried?"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":4,"creation_date":1293910708,"post_id":4575387,"comment_id":5021959,"body_markdown":"What&#39;s the standard answer for all things related to Date in Java?  Try JODA....","body":"What&#39;s the standard answer for all things related to Date in Java?  Try JODA...."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1293910917,"post_id":4575387,"comment_id":5021980,"body_markdown":"Try Joda, or Calendar if you have to.","body":"Try Joda, or Calendar if you have to."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1684346734,"post_id":4575387,"comment_id":134506537,"body_markdown":"Use java.time. (1) Get today from `LocalDate.now(ZoneId.systemDefault())`. (2) Get tomorrow form `today.plusDays(1)`. (3) Get the 2nd Wednesday of this month from `today.with(TemporalAdjusters.dayOfWeekInMonth(2, DayOfWeek.WEDNESDAY)`. (4) Get the last Wednesday from `today.with(TemporalAdjusters.lastInMonth(DayOfWeek.WEDNESDAY)`. (5) Compare the dates using their `equals()` methods to determine whether today or tomorrow is equal to either the 2nd or the last Wednesday. (to be continued)","body":"Use java.time. (1) Get today from <code>LocalDate.now(ZoneId.systemDefault())</code>. (2) Get tomorrow form <code>today.plusDays(1)</code>. (3) Get the 2nd Wednesday of this month from <code>today.with(TemporalAdjusters.dayOfWeekInMonth(2, DayOfWeek.WEDNESDAY)</code>. (4) Get the last Wednesday from <code>today.with(TemporalAdjusters.lastInMonth(DayOfWeek.WEDNESDAY&zwnj;&#8203;)</code>. (5) Compare the dates using their <code>equals()</code> methods to determine whether today or tomorrow is equal to either the 2nd or the last Wednesday. (to be continued)"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1684346744,"post_id":4575387,"comment_id":134506539,"body_markdown":"(continued) (6) Realize that in case tomorrow happened to fall in the next month, it can neither be the 2nd nor the last Wednesday of that month, so we are done.","body":"(continued) (6) Realize that in case tomorrow happened to fall in the next month, it can neither be the 2nd nor the last Wednesday of that month, so we are done."}],"answers":[{"comments":[{"owner":{"account_id":15510,"reputation":30708,"user_id":32834,"accept_rate":79,"display_name":"Frank"},"score":0,"creation_date":1293915434,"post_id":4575728,"comment_id":5022436,"body_markdown":"So it seems I&#39;ve to do some calculation.","body":"So it seems I&#39;ve to do some calculation."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":2,"creation_date":1293915442,"post_id":4575728,"comment_id":5022438,"body_markdown":"The fourth isn&#39;t necessarily the last. A month can contain five Wednesdays.","body":"The fourth isn&#39;t necessarily the last. A month can contain five Wednesdays."},{"owner":{"account_id":85749,"reputation":43318,"user_id":238884,"accept_rate":60,"display_name":"Michael Lorton"},"score":0,"creation_date":1293918260,"post_id":4575728,"comment_id":5022749,"body_markdown":"Ah, I put in the street-cleaning rules in *my* neighborhood: as I wrote, the first and the fourth.  If you just want the last, take the number of days in the current month, subtract 7, compare to current date...","body":"Ah, I put in the street-cleaning rules in <i>my</i> neighborhood: as I wrote, the first and the fourth.  If you just want the last, take the number of days in the current month, subtract 7, compare to current date..."}],"tags":[],"owner":{"account_id":85749,"reputation":43318,"user_id":238884,"accept_rate":60,"display_name":"Michael Lorton"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293915320,"creation_date":1293915320,"answer_id":4575728,"question_id":4575387,"body_markdown":"You having a problem with street-cleaning?\r\n\r\nCalendar will tell you if it&#39;s a Wednesday (`day.get(DAY_OF_WEEK) == WEDNESDAY`) and the day of the month.  If it&#39;s a Wednesday between the 8th and 15th, it&#39;s the second of the month; between 22nd and the 29th, it&#39;s the fourth.","title":"How to detect if today or tomorrow is the 2nd or last Wed of the month in Java?","body":"<p>You having a problem with street-cleaning?</p>\n\n<p>Calendar will tell you if it's a Wednesday (<code>day.get(DAY_OF_WEEK) == WEDNESDAY</code>) and the day of the month.  If it's a Wednesday between the 8th and 15th, it's the second of the month; between 22nd and the 29th, it's the fourth.</p>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1684345978,"post_id":4577086,"comment_id":134506381,"body_markdown":"This was a good (although not so elaborate) answer 12 years ago. Joda-Time has later been replaced by [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html).","body":"This was a good (although not so elaborate) answer 12 years ago. Joda-Time has later been replaced by <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"tags":[],"owner":{"account_id":253401,"reputation":1583,"user_id":532070,"accept_rate":25,"display_name":"Ratna Dinakar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1293941602,"creation_date":1293941602,"answer_id":4577086,"question_id":4575387,"body_markdown":"Use Joda Time Library, which has DateTime class and all the utility methods needed like plusDays(int),plusWeeks(int)","title":"How to detect if today or tomorrow is the 2nd or last Wed of the month in Java?","body":"<p>Use Joda Time Library, which has DateTime class and all the utility methods needed like plusDays(int),plusWeeks(int)</p>\n"},{"comments":[{"owner":{"account_id":11438896,"reputation":723,"user_id":8385208,"display_name":"Abhishek Pankar"},"score":3,"creation_date":1684350310,"post_id":76274263,"comment_id":134507221,"body_markdown":"I think this needs some more details to it","body":"I think this needs some more details to it"}],"tags":[],"owner":{"account_id":28621965,"reputation":1,"user_id":21914816,"display_name":"Ronald Hamersma"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684340816,"creation_date":1684340816,"answer_id":76274263,"question_id":4575387,"body_markdown":"Use math ceiling function.\r\nAfter having found that it is a wednesday you use ceiling(DayOfTheMonth/7).\r\nThe result tells you the how maniest occurence of the wednesday in this month this is.","title":"How to detect if today or tomorrow is the 2nd or last Wed of the month in Java?","body":"<p>Use math ceiling function.\nAfter having found that it is a wednesday you use ceiling(DayOfTheMonth/7).\nThe result tells you the how maniest occurence of the wednesday in this month this is.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684390876,"creation_date":1684388363,"answer_id":76278027,"question_id":4575387,"body_markdown":"Expanding on the smart [Comment by Ole V.V.][1]…\r\n\r\n# tl;dr\r\n\r\n```\r\nLocalDate today = LocalDate.now ( ZoneId.of ( &quot;America/Edmonton&quot; ) );\r\nLocalDate tomorrow = today.plusDays ( 1 );\r\n\r\nLocalDate secondWed = today.with ( TemporalAdjusters.dayOfWeekInMonth ( 2 , DayOfWeek.WEDNESDAY ) );\r\nLocalDate lastWed = today.with ( TemporalAdjusters.lastInMonth ( DayOfWeek.WEDNESDAY ) );\r\n\r\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\r\n        Set.of ( today , tomorrow )\r\n                .stream ( )\r\n                .anyMatch (\r\n                        Set.of ( secondWed , lastWed ) :: contains\r\n                );\r\n```\r\n\r\n# *java.time*\r\n\r\nIn modern Java, we have the industry-leading *java.time* classes to do date-time handling.\r\n\r\nTo represent a date-only value, without time-of-day, without time zone, use `LocalDate`.\r\n\r\nCapture the current date. This involves a time zone; for any given moment the date varies around the globe by time zone.\r\n\r\n    ZoneId z = ZoneId.of( &quot;Africa/Tunis&quot; ) ;  // Or ZoneId.systemDefault()\r\n    LocalDate today = LocalDate.now( z ) ;\r\n\r\nDetermine tomorrow&#39;s date.\r\n\r\n    LocalDate tomorrow = today.plusDays( 1 ) ;\r\n\r\nDetermine the second Wednesday of today&#39;s month. A `TemporalAdjuster` moves from one day to another. The utility class `TemporalAdjusters` contains several handy temporal adjusters. The `DayOfWeek` class defines enums objects for each day of the week.\r\n\r\n    LocalDate secondWed = \r\n        today.with( \r\n            TemporalAdjusters.dayOfWeekInMonth( 2 , DayOfWeek.WEDNESDAY )\r\n        ) ;\r\n\r\n And the last Wednesday of the month.\r\n\r\n    LocalDate lastWed = \r\n        today.with(\r\n            TemporalAdjusters.lastInMonth( DayOfWeek.WEDNESDAY )\r\n        ) ;\r\n\r\nThe date for `tomorrow` could land in the following month. I assume you want to consider only the current month, the month containing `today`. \r\n\r\nSee if today matches either:\r\n\r\n    boolean todayIsEitherSecondOrLastWed = \r\n        today.isEqual( secondWed ) || \r\n        today.isEqual( lastWed ) ;\r\n\r\nDitto for tomorrow.\r\n\r\n    boolean tomorrowIsEitherSecondOrLastWed = \r\n        tomorrow.isEqual( secondWed ) || \r\n        tomorrow.isEqual( lastWed ) ;\r\n\r\nFinal comparison.\r\n\r\n```java\r\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth = \r\n    todayIsEitherSecondOrLastWed || tomorrowIsEitherSecondOrLastWed ;\r\n```\r\n\r\nWe could use [`Set`][2] collections of our dates.\r\n\r\n```java\r\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\r\n    Set.of( secondWed , lastWed ).contains( today ) ||\r\n    Set.of( secondWed , lastWed ).contains( tomorrow ) ;\r\n```\r\n\r\nOr we could get fancy, using streams and lambdas to compare two sets. Fun, but not necessarily better.\r\n\r\n```java\r\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\r\n        Set.of ( today , tomorrow )\r\n                .stream ( )\r\n                .anyMatch (\r\n                        ( LocalDate localDate ) -&gt; Set.of ( secondWed , lastWed ).contains ( localDate )\r\n                );\r\n```\r\n\r\nMore briefly, using a method reference:\r\n\r\n```java\r\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\r\n        Set.of ( today , tomorrow )\r\n                .stream ( )\r\n                .anyMatch (\r\n                        Set.of ( secondWed , lastWed ) :: contains\r\n                );\r\n```\r\n\r\n## Full code example\r\n\r\n```java\r\nLocalDate today = LocalDate.now ( ZoneId.of ( &quot;Africa/Tunis&quot; ) );\r\nLocalDate tomorrow = today.plusDays ( 1 );\r\n\r\nLocalDate secondWed = today.with ( TemporalAdjusters.dayOfWeekInMonth ( 2 , DayOfWeek.WEDNESDAY ) );\r\nLocalDate lastWed = today.with ( TemporalAdjusters.lastInMonth ( DayOfWeek.WEDNESDAY ) );\r\n\r\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\r\n        Set.of ( today , tomorrow )\r\n                .stream ( )\r\n                .anyMatch (\r\n                        Set.of ( secondWed , lastWed ) :: contains\r\n                );\r\n\r\nSystem.out.println ( &quot;today = &quot; + today + &quot; | tomorrow = &quot; + tomorrow );\r\nSystem.out.println ( &quot;secondWed = &quot; + secondWed + &quot; | lastWed = &quot; + lastWed );\r\nSystem.out.println ( &quot;eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth = &quot; + eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth );\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\ntoday = 2023-05-18 | tomorrow = 2023-05-19\r\nsecondWed = 2023-05-10 | lastWed = 2023-05-31\r\neitherTodayOrTomorrowIsSecondOrLastWednesday = false\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4575387/how-to-detect-if-today-or-tomorrow-is-the-2nd-or-last-wed-of-the-month-in-java/76274263#comment134506537_4575387\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html","title":"How to detect if today or tomorrow is the 2nd or last Wed of the month in Java?","body":"<p>Expanding on the smart <a href=\"https://stackoverflow.com/questions/4575387/how-to-detect-if-today-or-tomorrow-is-the-2nd-or-last-wed-of-the-month-in-java/76274263#comment134506537_4575387\">Comment by Ole V.V.</a>…</p>\n<h1>tl;dr</h1>\n<pre><code>LocalDate today = LocalDate.now ( ZoneId.of ( &quot;America/Edmonton&quot; ) );\nLocalDate tomorrow = today.plusDays ( 1 );\n\nLocalDate secondWed = today.with ( TemporalAdjusters.dayOfWeekInMonth ( 2 , DayOfWeek.WEDNESDAY ) );\nLocalDate lastWed = today.with ( TemporalAdjusters.lastInMonth ( DayOfWeek.WEDNESDAY ) );\n\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n        Set.of ( today , tomorrow )\n                .stream ( )\n                .anyMatch (\n                        Set.of ( secondWed , lastWed ) :: contains\n                );\n</code></pre>\n<h1><em>java.time</em></h1>\n<p>In modern Java, we have the industry-leading <em>java.time</em> classes to do date-time handling.</p>\n<p>To represent a date-only value, without time-of-day, without time zone, use <code>LocalDate</code>.</p>\n<p>Capture the current date. This involves a time zone; for any given moment the date varies around the globe by time zone.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Africa/Tunis&quot; ) ;  // Or ZoneId.systemDefault()\nLocalDate today = LocalDate.now( z ) ;\n</code></pre>\n<p>Determine tomorrow's date.</p>\n<pre><code>LocalDate tomorrow = today.plusDays( 1 ) ;\n</code></pre>\n<p>Determine the second Wednesday of today's month. A <code>TemporalAdjuster</code> moves from one day to another. The utility class <code>TemporalAdjusters</code> contains several handy temporal adjusters. The <code>DayOfWeek</code> class defines enums objects for each day of the week.</p>\n<pre><code>LocalDate secondWed = \n    today.with( \n        TemporalAdjusters.dayOfWeekInMonth( 2 , DayOfWeek.WEDNESDAY )\n    ) ;\n</code></pre>\n<p>And the last Wednesday of the month.</p>\n<pre><code>LocalDate lastWed = \n    today.with(\n        TemporalAdjusters.lastInMonth( DayOfWeek.WEDNESDAY )\n    ) ;\n</code></pre>\n<p>The date for <code>tomorrow</code> could land in the following month. I assume you want to consider only the current month, the month containing <code>today</code>.</p>\n<p>See if today matches either:</p>\n<pre><code>boolean todayIsEitherSecondOrLastWed = \n    today.isEqual( secondWed ) || \n    today.isEqual( lastWed ) ;\n</code></pre>\n<p>Ditto for tomorrow.</p>\n<pre><code>boolean tomorrowIsEitherSecondOrLastWed = \n    tomorrow.isEqual( secondWed ) || \n    tomorrow.isEqual( lastWed ) ;\n</code></pre>\n<p>Final comparison.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth = \n    todayIsEitherSecondOrLastWed || tomorrowIsEitherSecondOrLastWed ;\n</code></pre>\n<p>We could use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a> collections of our dates.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n    Set.of( secondWed , lastWed ).contains( today ) ||\n    Set.of( secondWed , lastWed ).contains( tomorrow ) ;\n</code></pre>\n<p>Or we could get fancy, using streams and lambdas to compare two sets. Fun, but not necessarily better.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n        Set.of ( today , tomorrow )\n                .stream ( )\n                .anyMatch (\n                        ( LocalDate localDate ) -&gt; Set.of ( secondWed , lastWed ).contains ( localDate )\n                );\n</code></pre>\n<p>More briefly, using a method reference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n        Set.of ( today , tomorrow )\n                .stream ( )\n                .anyMatch (\n                        Set.of ( secondWed , lastWed ) :: contains\n                );\n</code></pre>\n<h2>Full code example</h2>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate today = LocalDate.now ( ZoneId.of ( &quot;Africa/Tunis&quot; ) );\nLocalDate tomorrow = today.plusDays ( 1 );\n\nLocalDate secondWed = today.with ( TemporalAdjusters.dayOfWeekInMonth ( 2 , DayOfWeek.WEDNESDAY ) );\nLocalDate lastWed = today.with ( TemporalAdjusters.lastInMonth ( DayOfWeek.WEDNESDAY ) );\n\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n        Set.of ( today , tomorrow )\n                .stream ( )\n                .anyMatch (\n                        Set.of ( secondWed , lastWed ) :: contains\n                );\n\nSystem.out.println ( &quot;today = &quot; + today + &quot; | tomorrow = &quot; + tomorrow );\nSystem.out.println ( &quot;secondWed = &quot; + secondWed + &quot; | lastWed = &quot; + lastWed );\nSystem.out.println ( &quot;eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth = &quot; + eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>today = 2023-05-18 | tomorrow = 2023-05-19\nsecondWed = 2023-05-10 | lastWed = 2023-05-31\neitherTodayOrTomorrowIsSecondOrLastWednesday = false\n</code></pre>\n"}],"owner":{"account_id":15510,"reputation":30708,"user_id":32834,"accept_rate":79,"display_name":"Frank"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":4577086,"answer_count":4,"score":2,"last_activity_date":1684390876,"creation_date":1293910146,"question_id":4575387,"body_markdown":"How to detect if today or tomorrow is the 2nd or last Wed of the month in Java ? Any sample code ?","title":"How to detect if today or tomorrow is the 2nd or last Wed of the month in Java?","body":"<p>How to detect if today or tomorrow is the 2nd or last Wed of the month in Java ? Any sample code ?</p>\n"},{"tags":["java","websphere","classloader","noclassdeffounderror","appserver"],"comments":[{"owner":{"account_id":9651072,"reputation":1933,"user_id":7162232,"display_name":"Jarid"},"score":0,"creation_date":1619186239,"post_id":67225549,"comment_id":118836330,"body_markdown":"Can you share the stack of any nested &quot;Caused by&quot; exception? Usually a NoClassDefFoundError is caused by an underlying ClassNotFoundException, which will often have a stack that tells what class loader was used.","body":"Can you share the stack of any nested &quot;Caused by&quot; exception? Usually a NoClassDefFoundError is caused by an underlying ClassNotFoundException, which will often have a stack that tells what class loader was used."},{"owner":{"account_id":8950703,"reputation":13,"user_id":10070556,"display_name":"Kumar Kundanani"},"score":0,"creation_date":1619341324,"post_id":67225549,"comment_id":118871223,"body_markdown":"The shared stack is the only one which is nested. After analyzing native_stderr.log file we found that only few of the classes from package com.google.common.util.concurrent are getting loaded and remaining classes are not, hence there is also no entry for them in the native_syserr.log file. Class loader used to load classes was CompoundClassLoader. For better understanding sharing complete stack trace in new edit.","body":"The shared stack is the only one which is nested. After analyzing native_stderr.log file we found that only few of the classes from package com.google.common.util.concurrent are getting loaded and remaining classes are not, hence there is also no entry for them in the native_syserr.log file. Class loader used to load classes was CompoundClassLoader. For better understanding sharing complete stack trace in new edit."},{"owner":{"account_id":461468,"reputation":768,"user_id":863177,"accept_rate":90,"display_name":"swap310"},"score":0,"creation_date":1633563965,"post_id":67225549,"comment_id":122796108,"body_markdown":"@KumarKundanani: were you able to find a solution for this?","body":"@KumarKundanani: were you able to find a solution for this?"}],"answers":[{"tags":[],"owner":{"account_id":28625469,"reputation":1,"user_id":21917565,"display_name":"IT-farmer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684390237,"creation_date":1684390237,"answer_id":76278175,"question_id":67225549,"body_markdown":"you may miss the InternalFutureFailureAccess.class and this is in another jar which named failureaccess-1.0.1.jar 。 check the jar or the InternalFutureFailureAccess.class is in your classpath.","title":"Getting NoClassDefFoundError for class SettableFuture present in com.google.common.util.concurrent package of guava-30.0-jre.jar only in Websphere","body":"<p>you may miss the InternalFutureFailureAccess.class and this is in another jar which named failureaccess-1.0.1.jar 。 check the jar or the InternalFutureFailureAccess.class is in your classpath.</p>\n"}],"owner":{"account_id":8950703,"reputation":13,"user_id":10070556,"display_name":"Kumar Kundanani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":996,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684390237,"creation_date":1619162084,"question_id":67225549,"body_markdown":"On enabling class trace, found that WebSphere is loading other classes present in the same package (com.google.common.util.concurrent) from same guava-30.0-jre.jar\r\n\r\nTotal classes present in com.google.common.util.concurrent package: 310\r\nand Total classes loaded: 285 (as per class load trace)\r\n\r\nSolutions tried:\r\n1. Class load order is set to Parent Last\r\n2. Have also explicitly set jar path in Generic JVM Arguments under Application servers &gt; server1 &gt; Process definition &gt; Java Virtual Machine\r\n3. Also tried creating a shared library and referencing it with the web app deployed. Steps followed to create shared library are from [this URL][1]\r\n4. JAR File is also okay and decompiling without any issue\r\n5. Machine Restart\r\n\r\nBelow is a stack trace for reference:\r\n\r\n    Caused by: java.lang.NoClassDefFoundError: com/google/common/util/concurrent/SettableFuture\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.&lt;init&gt;(LocalCache.java:3472) ~[?:?]\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.&lt;init&gt;(LocalCache.java:3476) ~[?:?]\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2134) ~[?:?]\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2045) ~[?:?]\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:3951) ~[?:?]\r\n\tat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3974) ~[?:?]\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4935) ~[?:?]\r\n\tat com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4941) ~[?:?]\r\n\tat com.google.inject.internal.Annotations$AnnotationChecker.hasAnnotations(Annotations.java:248) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.internal.Annotations.isBindingAnnotation(Annotations.java:314) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.internal.Annotations.findBindingAnnotation(Annotations.java:295) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.internal.ProviderMethodsModule.getKey(ProviderMethodsModule.java:280) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.internal.ProviderMethodsModule.createProviderMethod(ProviderMethodsModule.java:264) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.internal.ProviderMethodsModule.getProviderMethods(ProviderMethodsModule.java:144) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.internal.ProviderMethodsModule.configure(ProviderMethodsModule.java:123) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:340) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:349) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.spi.Elements.getElements(Elements.java:110) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:138) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.Guice.createInjector(Guice.java:96) ~[guice-4.0.jar:?]\r\n\tat com.google.inject.Guice.createInjector(Guice.java:73) ~[guice-4.0.jar:?]\r\n\r\nPlease note everything works fine when the same web app is deployed in WebLogic, Tomcat and JBoss\r\n\r\n  [1]: https://www.ibm.com/support/pages/how-create-shared-library-and-associate-it-application-server-or-enterprise-application-websphere-application-server","title":"Getting NoClassDefFoundError for class SettableFuture present in com.google.common.util.concurrent package of guava-30.0-jre.jar only in Websphere","body":"<p>On enabling class trace, found that WebSphere is loading other classes present in the same package (com.google.common.util.concurrent) from same guava-30.0-jre.jar</p>\n<p>Total classes present in com.google.common.util.concurrent package: 310\nand Total classes loaded: 285 (as per class load trace)</p>\n<p>Solutions tried:</p>\n<ol>\n<li>Class load order is set to Parent Last</li>\n<li>Have also explicitly set jar path in Generic JVM Arguments under Application servers &gt; server1 &gt; Process definition &gt; Java Virtual Machine</li>\n<li>Also tried creating a shared library and referencing it with the web app deployed. Steps followed to create shared library are from <a href=\"https://www.ibm.com/support/pages/how-create-shared-library-and-associate-it-application-server-or-enterprise-application-websphere-application-server\" rel=\"nofollow noreferrer\">this URL</a></li>\n<li>JAR File is also okay and decompiling without any issue</li>\n<li>Machine Restart</li>\n</ol>\n<p>Below is a stack trace for reference:</p>\n<pre><code>Caused by: java.lang.NoClassDefFoundError: com/google/common/util/concurrent/SettableFuture\nat com.google.common.cache.LocalCache$LoadingValueReference.&lt;init&gt;(LocalCache.java:3472) ~[?:?]\nat com.google.common.cache.LocalCache$LoadingValueReference.&lt;init&gt;(LocalCache.java:3476) ~[?:?]\nat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2134) ~[?:?]\nat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2045) ~[?:?]\nat com.google.common.cache.LocalCache.get(LocalCache.java:3951) ~[?:?]\nat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3974) ~[?:?]\nat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4935) ~[?:?]\nat com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4941) ~[?:?]\nat com.google.inject.internal.Annotations$AnnotationChecker.hasAnnotations(Annotations.java:248) ~[guice-4.0.jar:?]\nat com.google.inject.internal.Annotations.isBindingAnnotation(Annotations.java:314) ~[guice-4.0.jar:?]\nat com.google.inject.internal.Annotations.findBindingAnnotation(Annotations.java:295) ~[guice-4.0.jar:?]\nat com.google.inject.internal.ProviderMethodsModule.getKey(ProviderMethodsModule.java:280) ~[guice-4.0.jar:?]\nat com.google.inject.internal.ProviderMethodsModule.createProviderMethod(ProviderMethodsModule.java:264) ~[guice-4.0.jar:?]\nat com.google.inject.internal.ProviderMethodsModule.getProviderMethods(ProviderMethodsModule.java:144) ~[guice-4.0.jar:?]\nat com.google.inject.internal.ProviderMethodsModule.configure(ProviderMethodsModule.java:123) ~[guice-4.0.jar:?]\nat com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:340) ~[guice-4.0.jar:?]\nat com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:349) ~[guice-4.0.jar:?]\nat com.google.inject.spi.Elements.getElements(Elements.java:110) ~[guice-4.0.jar:?]\nat com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:138) ~[guice-4.0.jar:?]\nat com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104) ~[guice-4.0.jar:?]\nat com.google.inject.Guice.createInjector(Guice.java:96) ~[guice-4.0.jar:?]\nat com.google.inject.Guice.createInjector(Guice.java:73) ~[guice-4.0.jar:?]\n</code></pre>\n<p>Please note everything works fine when the same web app is deployed in WebLogic, Tomcat and JBoss</p>\n"},{"tags":["java","spring","spring-boot","spring-batch","liquibase"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1573633681,"post_id":58827480,"comment_id":103941171,"body_markdown":"`the job will create the necessary metadata tables automatically`: that&#39;s not correct, Spring Batch does not create tables automatically, it is up to you to do it manually or tell Spring boot to do it for you (as in your case). You need to make sure your liquibase script runs before the job so that Spring Batch can find the tables and report its meta-data.","body":"<code>the job will create the necessary metadata tables automatically</code>: that&#39;s not correct, Spring Batch does not create tables automatically, it is up to you to do it manually or tell Spring boot to do it for you (as in your case). You need to make sure your liquibase script runs before the job so that Spring Batch can find the tables and report its meta-data."},{"owner":{"account_id":5590610,"reputation":118,"user_id":5416477,"display_name":"lpbearden"},"score":0,"creation_date":1573658110,"post_id":58827480,"comment_id":103954395,"body_markdown":"That might just be improper wording on my end sorry about that, since I have `initialize-schema: always` set the schema is created before a job is ran. Edited the question to make that more explicit. Also, liquibase does run first, the main question is can liquibase somehow create those metadata tables without them being explicitly in the changelog.","body":"That might just be improper wording on my end sorry about that, since I have <code>initialize-schema: always</code> set the schema is created before a job is ran. Edited the question to make that more explicit. Also, liquibase does run first, the main question is can liquibase somehow create those metadata tables without them being explicitly in the changelog."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1573723591,"post_id":58827480,"comment_id":103978787,"body_markdown":"ok thanks for the clarification. `the main question is can liquibase somehow create those metadata tables without them being explicitly in the changelog.`: this is a liquibase question rather than a spring batch question. I&#39;m not too familiar with liquibase, so I will let someone with better knowledge about it answer your quetion.","body":"ok thanks for the clarification. <code>the main question is can liquibase somehow create those metadata tables without them being explicitly in the changelog.</code>: this is a liquibase question rather than a spring batch question. I&#39;m not too familiar with liquibase, so I will let someone with better knowledge about it answer your quetion."}],"answers":[{"comments":[{"owner":{"account_id":5590610,"reputation":118,"user_id":5416477,"display_name":"lpbearden"},"score":0,"creation_date":1573752321,"post_id":58854924,"comment_id":103995887,"body_markdown":"Ah, awesome, thanks for pointing this out. I didn&#39;t realize you could specify an sqlFile.","body":"Ah, awesome, thanks for pointing this out. I didn&#39;t realize you could specify an sqlFile."},{"owner":{"account_id":191407,"reputation":1614,"user_id":431294,"display_name":"Pablo"},"score":0,"creation_date":1656587102,"post_id":58854924,"comment_id":128612043,"body_markdown":"For other databases, sql files can be found in  [github repo](https://github.com/spring-projects/spring-batch/tree/main/spring-batch-core/src/main/resources/org/springframework/batch/core)","body":"For other databases, sql files can be found in  <a href=\"https://github.com/spring-projects/spring-batch/tree/main/spring-batch-core/src/main/resources/org/springframework/batch/core\" rel=\"nofollow noreferrer\">github repo</a>"}],"tags":[],"owner":{"account_id":4329394,"reputation":1778,"user_id":3535298,"display_name":"veljkost"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1573728342,"creation_date":1573728342,"answer_id":58854924,"question_id":58827480,"body_markdown":"Yes, you can reference the schema files that already exist in Spring Batch project. In `org.springframework.batch.core` package you can find schema-*.sql files where * is the name of the targeted db. Since you are running on mysql, your change set would look something like this:\r\n\r\n    - changeSet:\r\n      id: 1234\r\n      author: adam.sandler\r\n      changes:\r\n          - sqlFile:\r\n                encoding: utf8\r\n                path: classpath:/org/springframework/batch/core/schema-mysql.sql\r\n                relativeToChangelogFile: false\r\n                splitStatements: true\r\n                stripComments: true","title":"Can you initialize Spring Batch metadata tables with Liquibase?","body":"<p>Yes, you can reference the schema files that already exist in Spring Batch project. In <code>org.springframework.batch.core</code> package you can find schema-*.sql files where * is the name of the targeted db. Since you are running on mysql, your change set would look something like this:</p>\n\n<pre><code>- changeSet:\n  id: 1234\n  author: adam.sandler\n  changes:\n      - sqlFile:\n            encoding: utf8\n            path: classpath:/org/springframework/batch/core/schema-mysql.sql\n            relativeToChangelogFile: false\n            splitStatements: true\n            stripComments: true\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5590610,"reputation":118,"user_id":5416477,"display_name":"lpbearden"},"score":0,"creation_date":1606937325,"post_id":65088728,"comment_id":115117631,"body_markdown":"While this should work, our goal was to manage all database schema via liquibase to prevent any conflicts.","body":"While this should work, our goal was to manage all database schema via liquibase to prevent any conflicts."}],"tags":[],"owner":{"account_id":5440010,"reputation":4502,"user_id":4328343,"display_name":"Mohhamed Nabil"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606818392,"creation_date":1606818392,"answer_id":65088728,"question_id":58827480,"body_markdown":"To auto-migrate to your database without the use of liquabase add \r\n\r\n    spring.batch.initialize-schema=always\r\n\r\nto your application.properties file, it will auto migrate to the embedded data-source","title":"Can you initialize Spring Batch metadata tables with Liquibase?","body":"<p>To auto-migrate to your database without the use of liquabase add</p>\n<pre><code>spring.batch.initialize-schema=always\n</code></pre>\n<p>to your application.properties file, it will auto migrate to the embedded data-source</p>\n"},{"tags":[],"owner":{"account_id":174697,"reputation":212,"user_id":404227,"display_name":"Tim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682073828,"creation_date":1682073828,"answer_id":76072386,"question_id":58827480,"body_markdown":"For XML change sets I had to add a delimiter as well:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;databaseChangeLog\r\n    \txmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \tlogicalFilePath=&quot;/common/run-once/feature-base.xml&quot;\r\n    \txsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog \r\n                                 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.0.xsd&quot;&gt;\r\n    \t&lt;changeSet author=&quot;tim.doege&quot; id=&quot;feature/spring-batch&quot;&gt;\r\n\t    \t&lt;sqlFile dbms=&quot;mysql&quot; encoding=&quot;UTF-8&quot;\r\n\t    \t\tpath=&quot;classpath:/org/springframework/batch/core/schema-mysql.sql&quot;\r\n    \t\t\trelativeToChangelogFile=&quot;false&quot; splitStatements=&quot;true&quot;\r\n\t\t    \tendDelimiter=&quot;;&quot; stripComments=&quot;true&quot; /&gt;\r\n\t    &lt;/changeSet&gt;\r\n    &lt;/databaseChangeLog&gt;","title":"Can you initialize Spring Batch metadata tables with Liquibase?","body":"<p>For XML change sets I had to add a delimiter as well:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;databaseChangeLog\n    xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    logicalFilePath=&quot;/common/run-once/feature-base.xml&quot;\n    xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog \n                             http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.0.xsd&quot;&gt;\n    &lt;changeSet author=&quot;tim.doege&quot; id=&quot;feature/spring-batch&quot;&gt;\n        &lt;sqlFile dbms=&quot;mysql&quot; encoding=&quot;UTF-8&quot;\n            path=&quot;classpath:/org/springframework/batch/core/schema-mysql.sql&quot;\n            relativeToChangelogFile=&quot;false&quot; splitStatements=&quot;true&quot;\n            endDelimiter=&quot;;&quot; stripComments=&quot;true&quot; /&gt;\n    &lt;/changeSet&gt;\n&lt;/databaseChangeLog&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1684396634,"post_id":76278173,"comment_id":134512751,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76278173/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28593754,"reputation":1,"user_id":21892400,"display_name":"Qasim"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684390226,"creation_date":1684390226,"answer_id":76278173,"question_id":58827480,"body_markdown":"For sql changesets, I had to download and unzip the jar to find schema-postgresql.sql and copy and paste the SQL statements into Liquibase. ","title":"Can you initialize Spring Batch metadata tables with Liquibase?","body":"<p>For sql changesets, I had to download and unzip the jar to find schema-postgresql.sql and copy and paste the SQL statements into Liquibase.</p>\n"}],"owner":{"account_id":5590610,"reputation":118,"user_id":5416477,"display_name":"lpbearden"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4618,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":58854924,"answer_count":4,"score":5,"last_activity_date":1684390226,"creation_date":1573596823,"question_id":58827480,"body_markdown":"Currently I have a setup like below. On running the batch job locally the job will create the necessary metadata tables automatically using the `data-source` property values since `initialize-schema` is set to always. Liquibase will also run and create any tables listed in its changelog.\r\n\r\nHere is my `application.yml` file\r\n\r\n    spring:\r\n      batch:\r\n        initialize-schema: always\r\n        job:\r\n          enabled: true\r\n      liquibase:\r\n        url: db_url\r\n        user: deploy_user\r\n        password: deploy_pass\r\n        change-log: classpath:db/changelog/db.changelog-master.yaml\r\n        enabled: true\r\n    data-source:\r\n      mysql:\r\n        user: r_user\r\n        password: r_pass\r\n        jdbc-url: db_url\r\n\r\nHere is my `db.changelog-master.yaml` file.\r\n\r\n    databaseChangeLog:\r\n\r\n      - changeSet:\r\n        dbms: mysql\r\n        id: create-sample-table\r\n        author: me\r\n        sql: CREATE TABLE sample_table (\r\n          sample_id VARCHAR(255) NOT NULL,\r\n          sample_text TEXT,\r\n          PRIMARY KEY (samoke_id)\r\n          ) ENGINE=InnoDB DEFAULT\r\n          CHARSET=utf8 COLLATE=utf8_bin;\r\n\r\nMysql datasource config:\r\n\r\n    @Configuration\r\n    public class DataSourceConfiguration {\r\n\r\n        @Primary\r\n        @Bean(name = &quot;mySQLDataSource&quot;)\r\n        @ConfigurationProperties(&quot;data-source.mysql&quot;)\r\n        public DataSource mySQLDataSource() {\r\n            return DataSourceBuilder.create().type(HikariDataSource.class).build();\r\n        }\r\n    }\r\n\r\nLiquibase Configuration (probably posting more than what&#39;s needed):\r\n\r\n```\r\n@Configuration\r\n@EnableConfigurationProperties(LiquibaseProperties.class)\r\npublic class LiquibaseConfiguration {\r\n    private static final Logger LOG = LoggerFactory.getLogger(LiquibaseConfiguration.class);\r\n\r\n    @Autowired\r\n    private LiquibaseProperties liquibaseProperties;\r\n\r\n\r\n    public DataSource liquibaseDataSource() {\r\n        DataSourceBuilder factory = DataSourceBuilder\r\n                .create()\r\n                .url(liquibaseProperties.getUrl())\r\n                .username(liquibaseProperties.getUser())\r\n                .password(liquibaseProperties.getPassword());\r\n\r\n        return factory.build();\r\n    }\r\n\r\n    public void testLiquibaseConnection() throws SQLException {\r\n\r\n        LOG.info(&quot;Testing connection to Liquibase (in case PCF restarts and we have stale dynamic secrets)...&quot;);\r\n        liquibaseDataSource().getConnection();\r\n        LOG.info(&quot;Testing connection to Liquibase (in case PCF restarts and we have stale dynamic secrets)... Succeeded&quot;);\r\n    }\r\n\r\n    @Bean\r\n    public SpringLiquibase liquibase() {\r\n        try {\r\n            testLiquibaseConnection();\r\n        } catch (Exception ex) {\r\n            LOG.warn(&quot;WARNING: Could not connect to the database using &quot; + liquibaseProperties.getUser() + &quot;, so we will be skipping the Liquibase Migration for now. &quot;, ex);\r\n            return null;\r\n        }\r\n        SpringLiquibase liquibase = new SpringLiquibase();\r\n        liquibase.setChangeLog(this.liquibaseProperties.getChangeLog());\r\n        liquibase.setContexts(this.liquibaseProperties.getContexts());\r\n        liquibase.setDataSource(liquibaseDataSource());\r\n        liquibase.setDefaultSchema(this.liquibaseProperties.getDefaultSchema());\r\n        liquibase.setDropFirst(this.liquibaseProperties.isDropFirst());\r\n        liquibase.setShouldRun(this.liquibaseProperties.isEnabled());\r\n        liquibase.setLabels(this.liquibaseProperties.getLabels());\r\n        liquibase.setChangeLogParameters(this.liquibaseProperties.getParameters());\r\n        return liquibase;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe issue is we have different credentials for creating/deploying tables and reading/writing to tables in our deployed environments. So the below setup will work to create tables via Liquibase, but fail creating the metadata tables due to having the incorrect credentials upon deployment. Our current work-around to get the metadata tables created is to deploy with the `data-source` properties having deploy credentials, run the job to initialize the tables and then redeploy with read/write credentials. (We can&#39;t just leave the deploy credentials for reads because they have very short TTL). \r\n\r\nIs it possible to create the metadata tables for Spring Batch via Liquibase automatically? Specifically, without adding the creation SQL manually to the changelog files?\r\n\r\n\r\n\r\n**UPDATE:**\r\n\r\nUsing veljkost&#39;s answer below having a changelog file that looks like this works:\r\n```\r\ndatabaseChangeLog:\r\n  - changeSet:\r\n      dbms: mysql\r\n      id: create-spring-batch-metadata\r\n      author: dev.me\r\n      changes:\r\n        - sqlFile:\r\n            encoding: UTF-8\r\n            path: classpath:/org/springframework/batch/core/schema-mysql.sql\r\n            relativeToChangelogFile: false\r\n            splitStatements: true\r\n            stripComments: true\r\n```","title":"Can you initialize Spring Batch metadata tables with Liquibase?","body":"<p>Currently I have a setup like below. On running the batch job locally the job will create the necessary metadata tables automatically using the <code>data-source</code> property values since <code>initialize-schema</code> is set to always. Liquibase will also run and create any tables listed in its changelog.</p>\n\n<p>Here is my <code>application.yml</code> file</p>\n\n<pre><code>spring:\n  batch:\n    initialize-schema: always\n    job:\n      enabled: true\n  liquibase:\n    url: db_url\n    user: deploy_user\n    password: deploy_pass\n    change-log: classpath:db/changelog/db.changelog-master.yaml\n    enabled: true\ndata-source:\n  mysql:\n    user: r_user\n    password: r_pass\n    jdbc-url: db_url\n</code></pre>\n\n<p>Here is my <code>db.changelog-master.yaml</code> file.</p>\n\n<pre><code>databaseChangeLog:\n\n  - changeSet:\n    dbms: mysql\n    id: create-sample-table\n    author: me\n    sql: CREATE TABLE sample_table (\n      sample_id VARCHAR(255) NOT NULL,\n      sample_text TEXT,\n      PRIMARY KEY (samoke_id)\n      ) ENGINE=InnoDB DEFAULT\n      CHARSET=utf8 COLLATE=utf8_bin;\n</code></pre>\n\n<p>Mysql datasource config:</p>\n\n<pre><code>@Configuration\npublic class DataSourceConfiguration {\n\n    @Primary\n    @Bean(name = \"mySQLDataSource\")\n    @ConfigurationProperties(\"data-source.mysql\")\n    public DataSource mySQLDataSource() {\n        return DataSourceBuilder.create().type(HikariDataSource.class).build();\n    }\n}\n</code></pre>\n\n<p>Liquibase Configuration (probably posting more than what's needed):</p>\n\n<pre><code>@Configuration\n@EnableConfigurationProperties(LiquibaseProperties.class)\npublic class LiquibaseConfiguration {\n    private static final Logger LOG = LoggerFactory.getLogger(LiquibaseConfiguration.class);\n\n    @Autowired\n    private LiquibaseProperties liquibaseProperties;\n\n\n    public DataSource liquibaseDataSource() {\n        DataSourceBuilder factory = DataSourceBuilder\n                .create()\n                .url(liquibaseProperties.getUrl())\n                .username(liquibaseProperties.getUser())\n                .password(liquibaseProperties.getPassword());\n\n        return factory.build();\n    }\n\n    public void testLiquibaseConnection() throws SQLException {\n\n        LOG.info(\"Testing connection to Liquibase (in case PCF restarts and we have stale dynamic secrets)...\");\n        liquibaseDataSource().getConnection();\n        LOG.info(\"Testing connection to Liquibase (in case PCF restarts and we have stale dynamic secrets)... Succeeded\");\n    }\n\n    @Bean\n    public SpringLiquibase liquibase() {\n        try {\n            testLiquibaseConnection();\n        } catch (Exception ex) {\n            LOG.warn(\"WARNING: Could not connect to the database using \" + liquibaseProperties.getUser() + \", so we will be skipping the Liquibase Migration for now. \", ex);\n            return null;\n        }\n        SpringLiquibase liquibase = new SpringLiquibase();\n        liquibase.setChangeLog(this.liquibaseProperties.getChangeLog());\n        liquibase.setContexts(this.liquibaseProperties.getContexts());\n        liquibase.setDataSource(liquibaseDataSource());\n        liquibase.setDefaultSchema(this.liquibaseProperties.getDefaultSchema());\n        liquibase.setDropFirst(this.liquibaseProperties.isDropFirst());\n        liquibase.setShouldRun(this.liquibaseProperties.isEnabled());\n        liquibase.setLabels(this.liquibaseProperties.getLabels());\n        liquibase.setChangeLogParameters(this.liquibaseProperties.getParameters());\n        return liquibase;\n    }\n\n}\n</code></pre>\n\n<p>The issue is we have different credentials for creating/deploying tables and reading/writing to tables in our deployed environments. So the below setup will work to create tables via Liquibase, but fail creating the metadata tables due to having the incorrect credentials upon deployment. Our current work-around to get the metadata tables created is to deploy with the <code>data-source</code> properties having deploy credentials, run the job to initialize the tables and then redeploy with read/write credentials. (We can't just leave the deploy credentials for reads because they have very short TTL). </p>\n\n<p>Is it possible to create the metadata tables for Spring Batch via Liquibase automatically? Specifically, without adding the creation SQL manually to the changelog files?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Using veljkost's answer below having a changelog file that looks like this works:</p>\n\n<pre><code>databaseChangeLog:\n  - changeSet:\n      dbms: mysql\n      id: create-spring-batch-metadata\n      author: dev.me\n      changes:\n        - sqlFile:\n            encoding: UTF-8\n            path: classpath:/org/springframework/batch/core/schema-mysql.sql\n            relativeToChangelogFile: false\n            splitStatements: true\n            stripComments: true\n</code></pre>\n"},{"tags":["java","android","firebase","plugins","firebase-storage"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1683800301,"post_id":76226242,"comment_id":134423399,"body_markdown":"Have you tried to remove the versions from the Firebase dependencies since you are already sing BOM?","body":"Have you tried to remove the versions from the Firebase dependencies since you are already sing BOM?"}],"answers":[{"tags":[],"owner":{"account_id":1188587,"reputation":628,"user_id":1161991,"accept_rate":45,"display_name":"Shefy Gur-ary"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684390196,"creation_date":1684390196,"answer_id":76278165,"question_id":76226242,"body_markdown":"Answer:\r\n\r\nThe plugin was for Unity and worked with unit activity. \r\nIt turned out I had to add Firebase to the Unity project. \r\nOr I guess any other activity that would use the plugin. ","title":"I got java.lang.NoClassDefFoundError for FirebaseStorage on Android Plugin","body":"<p>Answer:</p>\n<p>The plugin was for Unity and worked with unit activity.\nIt turned out I had to add Firebase to the Unity project.\nOr I guess any other activity that would use the plugin.</p>\n"}],"owner":{"account_id":1188587,"reputation":628,"user_id":1161991,"accept_rate":45,"display_name":"Shefy Gur-ary"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684390196,"creation_date":1683798123,"question_id":76226242,"body_markdown":"I&#39;m working with FirebaseStorage on a plugin model. \r\nI was able to make it work on a standalone android app, but when I try to add it to a plugin, I get the java.lang.NoClassDefFoundError\r\n\r\nHere is my build.gradle for the plugin. \r\n  \r\n```\r\nbuildscript {\r\n    dependencies {\r\n\r\n        // Add the dependency for the Google services Gradle plugin\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n    repositories {\r\n        google() // Make sure Google&#39;s Maven repository is added\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n}\r\n\r\nplugins {\r\n    id &#39;com.android.library&#39;\r\n}\r\n\r\napply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\n\r\n\r\nandroid {\r\n    namespace &#39;com.shefyg.uapaa1module&#39;\r\n    compileSdk 32\r\n\r\n    defaultConfig {\r\n        minSdk 21\r\n        targetSdk 32\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        consumerProguardFiles &quot;consumer-rules.pro&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation platform(&#39;com.google.firebase:firebase-bom:32.0.0&#39;)\r\n    //implementation &#39;com.google.firebase:firebase-core:21.1.1&#39; // Firebase Core\r\n    implementation &#39;com.google.firebase:firebase-database:20.2.1&#39; // Firebase Realtime Database\r\n    implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-storage:20.2.0&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n}\r\n\r\n```\r\n\r\nPlease advise, thanks.\r\n\r\n\r\n","title":"I got java.lang.NoClassDefFoundError for FirebaseStorage on Android Plugin","body":"<p>I'm working with FirebaseStorage on a plugin model.\nI was able to make it work on a standalone android app, but when I try to add it to a plugin, I get the java.lang.NoClassDefFoundError</p>\n<p>Here is my build.gradle for the plugin.</p>\n<pre><code>buildscript {\n    dependencies {\n\n        // Add the dependency for the Google services Gradle plugin\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n    repositories {\n        google() // Make sure Google's Maven repository is added\n        mavenCentral()  // Maven Central repository\n    }\n}\n\nplugins {\n    id 'com.android.library'\n}\n\napply plugin: 'com.google.gms.google-services'\n\n\n\nandroid {\n    namespace 'com.shefyg.uapaa1module'\n    compileSdk 32\n\n    defaultConfig {\n        minSdk 21\n        targetSdk 32\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        consumerProguardFiles &quot;consumer-rules.pro&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation platform('com.google.firebase:firebase-bom:32.0.0')\n    //implementation 'com.google.firebase:firebase-core:21.1.1' // Firebase Core\n    implementation 'com.google.firebase:firebase-database:20.2.1' // Firebase Realtime Database\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'com.google.firebase:firebase-storage:20.2.0'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n\n</code></pre>\n<p>Please advise, thanks.</p>\n"},{"tags":["java","mysql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1684350736,"post_id":76274035,"comment_id":134507321,"body_markdown":"what does the TestDb.test_table look like exactly? Do you have other constraints on the fields you are modifying? Something as simple as modifying a value used as the target of a foreign key in another table can cause table locks outside of where you are looking. Most DBs have mechanisms to show what is holding onto which locks.","body":"what does the TestDb.test_table look like exactly? Do you have other constraints on the fields you are modifying? Something as simple as modifying a value used as the target of a foreign key in another table can cause table locks outside of where you are looking. Most DBs have mechanisms to show what is holding onto which locks."},{"owner":{"account_id":9106779,"reputation":742,"user_id":7050476,"display_name":"afarah"},"score":0,"creation_date":1684351995,"post_id":76274035,"comment_id":134507588,"body_markdown":"@Chris It&#39;s fairly simple - no foreign keys, the primary key is the aforementioned uuid which is `VARCHAR(36) NOT NULL`, other columns are also `VARCHAR`, `INTEGER`, and `TIMESTAMP`. No manually created indices. I&#39;ll see if I can get information on the locks when the deadlock is detected.","body":"@Chris It&#39;s fairly simple - no foreign keys, the primary key is the aforementioned uuid which is <code>VARCHAR(36) NOT NULL</code>, other columns are also <code>VARCHAR</code>, <code>INTEGER</code>, and <code>TIMESTAMP</code>. No manually created indices. I&#39;ll see if I can get information on the locks when the deadlock is detected."},{"owner":{"account_id":9106779,"reputation":742,"user_id":7050476,"display_name":"afarah"},"score":0,"creation_date":1684420611,"post_id":76274035,"comment_id":134517570,"body_markdown":"@Chris Unlike I previously thought, there is indeed an index in that table... Precisely on the column being updated (`state`). I&#39;ve used `show engine innodb status` and it has details on which locks were held and which locks were waited on during the deadlock. It seems like both transactions somehow held an insert intention X lock on the index? I don&#39;t understand. I&#39;ve pasted the output [here](https://pastebin.com/raw/p4L9wmLu), but I can create a new question (maybe on another StackExchange site) if you think it&#39;s best.","body":"@Chris Unlike I previously thought, there is indeed an index in that table... Precisely on the column being updated (<code>state</code>). I&#39;ve used <code>show engine innodb status</code> and it has details on which locks were held and which locks were waited on during the deadlock. It seems like both transactions somehow held an insert intention X lock on the index? I don&#39;t understand. I&#39;ve pasted the output <a href=\"https://pastebin.com/raw/p4L9wmLu\" rel=\"nofollow noreferrer\">here</a>, but I can create a new question (maybe on another StackExchange site) if you think it&#39;s best."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1684432970,"post_id":76274035,"comment_id":134520479,"body_markdown":"Locks involving indexes and constraints strains what I know, so a separate, more specific question now that you know the root cause is probably best. The answer here is that everything IS working by design because your actual update is requiring a more general lock on a specific index that all your transactions and updates on this table seem to need to lock. How to get around that - you&#39;d need to show the index for a good solution and hopefully a MySQL expert might help, but simplest hack is just to remove the index - I don&#39;t know how many states you&#39;ve, but seems overly general anyway.","body":"Locks involving indexes and constraints strains what I know, so a separate, more specific question now that you know the root cause is probably best. The answer here is that everything IS working by design because your actual update is requiring a more general lock on a specific index that all your transactions and updates on this table seem to need to lock. How to get around that - you&#39;d need to show the index for a good solution and hopefully a MySQL expert might help, but simplest hack is just to remove the index - I don&#39;t know how many states you&#39;ve, but seems overly general anyway."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684349784,"post_id":76274464,"comment_id":134507110,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76274464/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":13880682,"reputation":19,"user_id":10021124,"display_name":"yora"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1684389960,"creation_date":1684342366,"answer_id":76274464,"question_id":76274035,"body_markdown":"To avoid long waiting transactions you can break data fetch and saving part in to 2 methods and limit the transaction duration to save single object. It can reduce deadlock chances.          \r\n\r\n    class Service {\r\n    \r\n    \t\t@Autowired\r\n    \t\tprivate Repository dao;\r\n    \r\n    \t\t// Not Transactional\r\n    \t\tpublic List&lt;?&gt; UpdateAndReturn() {\r\n    \t\t \r\n    \t\t  //marked @Transactional(value = TxType.SUPPORTS) or no tansaction.\r\n    \t\t  List&lt;?&gt; objs  = dao.readAll();\r\n    \t\t  \r\n    \t\t  for(Obj obj:objs) {\r\n                  //marked @Transactional(value = TxType.REQUIRED)\r\n                  Obj o = dao.getById(obj.getId());\r\n    \t\t\t  //  modifications\r\n    \t\t\t  //marked @Transactional(value = TxType.REQUIRED)\r\n    \t\t\t  dao.save(o);\r\n    \t\t  }\r\n    \t\t  return objs;\r\n    \t\t }\r\n    \t}","title":"Deadlock with concurrent SELECT FOR UPDATE SKIP LOCKED and UPDATE on the result set?","body":"<p>To avoid long waiting transactions you can break data fetch and saving part in to 2 methods and limit the transaction duration to save single object. It can reduce deadlock chances.</p>\n<pre><code>class Service {\n\n        @Autowired\n        private Repository dao;\n\n        // Not Transactional\n        public List&lt;?&gt; UpdateAndReturn() {\n         \n          //marked @Transactional(value = TxType.SUPPORTS) or no tansaction.\n          List&lt;?&gt; objs  = dao.readAll();\n          \n          for(Obj obj:objs) {\n              //marked @Transactional(value = TxType.REQUIRED)\n              Obj o = dao.getById(obj.getId());\n              //  modifications\n              //marked @Transactional(value = TxType.REQUIRED)\n              dao.save(o);\n          }\n          return objs;\n         }\n    }\n</code></pre>\n"}],"owner":{"account_id":9106779,"reputation":742,"user_id":7050476,"display_name":"afarah"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684389960,"creation_date":1684339172,"question_id":76274035,"body_markdown":"We have a method that looks like this:\r\n\r\n    @Transactional\r\n    public UpdateTestObjsResponse updateTestObjs() {\r\n        objs = repository.findAllReadyTestObjsForOwnerX(); // SELECT ... FOR UPDATE SKIP LOCKED native query\r\n        LOGGER.info(&quot;==DEBUG== RowCount=&quot; + objs.size());\r\n        for (TestObj obj: objs) {\r\n            LOGGER.info(&quot;==DEBUG== RowUuid=&quot; + obj.getUuid());\r\n            // ...\r\n            obj.setState(&#39;WAITING&#39;);\r\n            repository.save(obj);\r\n        }\r\n        return getResponseObj(objs);\r\n    }\r\n\r\nInvoking this method concurrently results in a deadlock being detected for reasons that escape me, and it seems the transaction is committed before the `UPDATE` which is somewhat unexpected to me:\r\n\r\n```\r\n{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.406314Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.406352Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = &#39;9f95191b-af31-40c9-b5d8-a3c48e6a69b0&#39; AND state = &#39;READY&#39; ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\r\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = &#39;9f95191b-af31-40c9-b5d8-a3c48e6a69b0&#39; AND state = &#39;READY&#39; ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:545,&quot;description&quot;:&quot;==DEBUG== RowCount=1&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438215Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:545,&quot;description&quot;:&quot;==DEBUG== RowCount=4&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438205Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=3469af18-f55d-408a-9231-e5fbb68c76f8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438439Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=6338750b-aa50-487d-8e0d-739cd16d9adb&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438459Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=d0dda3df-9532-402b-8aab-2ca3d362d032&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446588Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;commit&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:98,&quot;description&quot;:&quot;committing&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446875Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=fadcbae6-1ce9-46bc-bfe6-1d3c1f88c89b&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446991Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=e139e56e-7945-4818-adf1-4de51c4832c8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.447205Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;commit&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:98,&quot;description&quot;:&quot;committing&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.447403Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n&quot;Hibernate: update test_table set owner_uuid=?, state=?, timestamp=?, where obj_uuid=?&quot;\r\n&quot;Hibernate: update test_table set owner_uuid=?, state=?, timestamp=?, where obj_uuid=?&quot;\r\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;WARN&quot;,&quot;line&quot;:137,&quot;description&quot;:&quot;SQL Error: 1213, SQLState: 40001&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.472873Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;ERROR&quot;,&quot;line&quot;:142,&quot;description&quot;:&quot;Deadlock found when trying to get lock; try restarting transaction&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.473116Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;rollback&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:131,&quot;description&quot;:&quot;rollback() called on an inactive transaction&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.478103Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n&quot;&quot;\r\n```\r\n\r\nHere, `updateTestObjs` is annotated with `@Transacational` from `org.springframework.transaction.annotation.Transactional` and declared as a public method in the service, being called from the controller, to which two requests are made in parallel, resulting in the logs above. I verified the database engine is InnoDB, which supports transactions and the `FOR UPDATE SKIP LOCKED` directives. Furthermore, I&#39;m not overwriting the default isolation level, so I&#39;d expect Spring to use InnoDB&#39;s default of `READ_COMMITTED`. This is to say I&#39;ve checked some common pitfalls reported in other questions.\r\n\r\nI&#39;ve tried manually managing the transaction as such to see what happens:\r\n\r\n```\r\n    @Autowired\r\n    private EntityManagerFactory emf;\r\n\r\n    @Autowired\r\n    private PlatformTransactionManager transactionManager;\r\n\r\n\r\npublic UpdateTestObjsResponse updateTestObjs() {\r\n    var transactionTemplate = new TransactionTemplate(transactionManager);\r\n    EntityManager em = emf.createEntityManager();\r\n    EntityTransaction tx = em.getTransaction();\r\n    tx.begin();\r\n    try {\r\n        Query sel = em.createNativeQuery(&quot;SELECT * FROM TestDb.test_table WHERE owner_uuid = &#39;9f95191b-af31-40c9-b5d8-a3c48e6a69b0&#39; AND state = &#39;READY&#39; ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;, TestObj.class);\r\n        transactionTemplate.execute(\r\n            status -&gt; {\r\n                List&lt;TestObj&gt; objs = sel.getResultList();\r\n                LOGGER.info(&quot;==DEBUG== RowCount=&quot; + objs.size());\r\n                for (TestObj obj : objs) {\r\n                    LOGGER.info(&quot;==DEBUG== RowUuid=&quot; + obj.getUuid());\r\n                    Query upd = em.createNativeQuery(&quot;UPDATE TestDb.test_table SET state = &#39;WAITING&#39; WHERE obj_uuid = ?&quot;);\r\n                    upd.setParameter(1, obj.getUuid());\r\n                    upd.executeUpdate();\r\n                }\r\n                return objs.size();\r\n            });\r\n        tx.commit();\r\n    } catch (Exception e) {\r\n        tx.rollback();\r\n        LOGGER.error(e);\r\n    } finally {\r\n        em.close();\r\n    }\r\n    return getResponseObj(objs);\r\n}\r\n```\r\n\r\nThis avoids the transaction being commited before the `UPDATE`, but also results in a deadlock. For completeness, here are the logs:\r\n\r\n```\r\n{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.055847Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.055917Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = &#39;9f95191b-af31-40c9-b5d8-a3c48e6a69b0&#39; AND state = &#39;READY&#39; ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\r\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = &#39;9f95191b-af31-40c9-b5d8-a3c48e6a69b0&#39; AND state = &#39;READY&#39; ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\r\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:553,&quot;description&quot;:&quot;==DEBUG== RowCount=1&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073758Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:553,&quot;description&quot;:&quot;==DEBUG== RowCount=4&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073758Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=e139e56e-7945-4818-adf1-4de51c4832c8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073985Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=6338750b-aa50-487d-8e0d-739cd16d9adb&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073990Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n&quot;Hibernate: UPDATE TestDb.test_table SET state = &#39;WAITING&#39; WHERE obj_uuid = ?&quot;\r\n&quot;Hibernate: UPDATE TestDb.test_table SET state = &#39;WAITING&#39; WHERE obj_uuid = ?&quot;\r\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=d0dda3df-9532-402b-8aab-2ca3d362d032&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.083935Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n&quot;Hibernate: UPDATE TestDb.test_table SET state = &#39;WAITING&#39; WHERE obj_uuid = ?&quot;\r\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=3469af18-f55d-408a-9231-e5fbb68c76f8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.087683Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;WARN&quot;,&quot;line&quot;:137,&quot;description&quot;:&quot;SQL Error: 1213, SQLState: 40001&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.087787Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n```\r\n\r\nFinally, if I do not use `FOR UPDATE SKIP LOCKED` in the original code, no deadlock occurs but overlapping objects are selected by both method calls, which is undesirable:\r\n\r\n```\r\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = &#39;9f95191b-af31-40c9-b5d8-a3c48e6a69b0&#39; AND state = &#39;READY&#39; ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\r\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = &#39;9f95191b-af31-40c9-b5d8-a3c48e6a69b0&#39; AND state = &#39;READY&#39; ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:544,&quot;description&quot;:&quot;==DEBUG== RowCount=5&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:39:13.235097Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;4651077f-076f-49e0-a4cb-06d3cc575993&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:544,&quot;description&quot;:&quot;==DEBUG== RowCount=5&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:39:13.235097Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6d0f3cf1-d75f-4502-b577-b8efc0871f72&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\r\n```\r\n\r\nRegardless of this implementation being suitable or not when parallel requests are to be expected, why is a deadlock detected with `FOR UPDATE SKIP LOCKED`?","title":"Deadlock with concurrent SELECT FOR UPDATE SKIP LOCKED and UPDATE on the result set?","body":"<p>We have a method that looks like this:</p>\n<pre><code>@Transactional\npublic UpdateTestObjsResponse updateTestObjs() {\n    objs = repository.findAllReadyTestObjsForOwnerX(); // SELECT ... FOR UPDATE SKIP LOCKED native query\n    LOGGER.info(&quot;==DEBUG== RowCount=&quot; + objs.size());\n    for (TestObj obj: objs) {\n        LOGGER.info(&quot;==DEBUG== RowUuid=&quot; + obj.getUuid());\n        // ...\n        obj.setState('WAITING');\n        repository.save(obj);\n    }\n    return getResponseObj(objs);\n}\n</code></pre>\n<p>Invoking this method concurrently results in a deadlock being detected for reasons that escape me, and it seems the transaction is committed before the <code>UPDATE</code> which is somewhat unexpected to me:</p>\n<pre><code>{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.406314Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.406352Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:545,&quot;description&quot;:&quot;==DEBUG== RowCount=1&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438215Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:545,&quot;description&quot;:&quot;==DEBUG== RowCount=4&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438205Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=3469af18-f55d-408a-9231-e5fbb68c76f8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438439Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=6338750b-aa50-487d-8e0d-739cd16d9adb&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438459Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=d0dda3df-9532-402b-8aab-2ca3d362d032&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446588Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;commit&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:98,&quot;description&quot;:&quot;committing&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446875Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=fadcbae6-1ce9-46bc-bfe6-1d3c1f88c89b&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446991Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=e139e56e-7945-4818-adf1-4de51c4832c8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.447205Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;commit&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:98,&quot;description&quot;:&quot;committing&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.447403Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: update test_table set owner_uuid=?, state=?, timestamp=?, where obj_uuid=?&quot;\n&quot;Hibernate: update test_table set owner_uuid=?, state=?, timestamp=?, where obj_uuid=?&quot;\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;WARN&quot;,&quot;line&quot;:137,&quot;description&quot;:&quot;SQL Error: 1213, SQLState: 40001&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.472873Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;ERROR&quot;,&quot;line&quot;:142,&quot;description&quot;:&quot;Deadlock found when trying to get lock; try restarting transaction&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.473116Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;rollback&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:131,&quot;description&quot;:&quot;rollback() called on an inactive transaction&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.478103Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;&quot;\n</code></pre>\n<p>Here, <code>updateTestObjs</code> is annotated with <code>@Transacational</code> from <code>org.springframework.transaction.annotation.Transactional</code> and declared as a public method in the service, being called from the controller, to which two requests are made in parallel, resulting in the logs above. I verified the database engine is InnoDB, which supports transactions and the <code>FOR UPDATE SKIP LOCKED</code> directives. Furthermore, I'm not overwriting the default isolation level, so I'd expect Spring to use InnoDB's default of <code>READ_COMMITTED</code>. This is to say I've checked some common pitfalls reported in other questions.</p>\n<p>I've tried manually managing the transaction as such to see what happens:</p>\n<pre><code>    @Autowired\n    private EntityManagerFactory emf;\n\n    @Autowired\n    private PlatformTransactionManager transactionManager;\n\n\npublic UpdateTestObjsResponse updateTestObjs() {\n    var transactionTemplate = new TransactionTemplate(transactionManager);\n    EntityManager em = emf.createEntityManager();\n    EntityTransaction tx = em.getTransaction();\n    tx.begin();\n    try {\n        Query sel = em.createNativeQuery(&quot;SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;, TestObj.class);\n        transactionTemplate.execute(\n            status -&gt; {\n                List&lt;TestObj&gt; objs = sel.getResultList();\n                LOGGER.info(&quot;==DEBUG== RowCount=&quot; + objs.size());\n                for (TestObj obj : objs) {\n                    LOGGER.info(&quot;==DEBUG== RowUuid=&quot; + obj.getUuid());\n                    Query upd = em.createNativeQuery(&quot;UPDATE TestDb.test_table SET state = 'WAITING' WHERE obj_uuid = ?&quot;);\n                    upd.setParameter(1, obj.getUuid());\n                    upd.executeUpdate();\n                }\n                return objs.size();\n            });\n        tx.commit();\n    } catch (Exception e) {\n        tx.rollback();\n        LOGGER.error(e);\n    } finally {\n        em.close();\n    }\n    return getResponseObj(objs);\n}\n</code></pre>\n<p>This avoids the transaction being commited before the <code>UPDATE</code>, but also results in a deadlock. For completeness, here are the logs:</p>\n<pre><code>{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.055847Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.055917Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:553,&quot;description&quot;:&quot;==DEBUG== RowCount=1&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073758Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:553,&quot;description&quot;:&quot;==DEBUG== RowCount=4&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073758Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=e139e56e-7945-4818-adf1-4de51c4832c8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073985Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=6338750b-aa50-487d-8e0d-739cd16d9adb&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073990Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: UPDATE TestDb.test_table SET state = 'WAITING' WHERE obj_uuid = ?&quot;\n&quot;Hibernate: UPDATE TestDb.test_table SET state = 'WAITING' WHERE obj_uuid = ?&quot;\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=d0dda3df-9532-402b-8aab-2ca3d362d032&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.083935Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: UPDATE TestDb.test_table SET state = 'WAITING' WHERE obj_uuid = ?&quot;\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=3469af18-f55d-408a-9231-e5fbb68c76f8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.087683Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;WARN&quot;,&quot;line&quot;:137,&quot;description&quot;:&quot;SQL Error: 1213, SQLState: 40001&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.087787Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n</code></pre>\n<p>Finally, if I do not use <code>FOR UPDATE SKIP LOCKED</code> in the original code, no deadlock occurs but overlapping objects are selected by both method calls, which is undesirable:</p>\n<pre><code>&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:544,&quot;description&quot;:&quot;==DEBUG== RowCount=5&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:39:13.235097Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;4651077f-076f-49e0-a4cb-06d3cc575993&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:544,&quot;description&quot;:&quot;==DEBUG== RowCount=5&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:39:13.235097Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6d0f3cf1-d75f-4502-b577-b8efc0871f72&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n</code></pre>\n<p>Regardless of this implementation being suitable or not when parallel requests are to be expected, why is a deadlock detected with <code>FOR UPDATE SKIP LOCKED</code>?</p>\n"},{"tags":["java","ssl","keystore","private-key"],"comments":[{"owner":{"account_id":3701398,"reputation":116692,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":0,"creation_date":1626189868,"post_id":68364615,"comment_id":120824154,"body_markdown":"The new certificate does not magically show up in your keystore. You have to explicitly do it and deploy your program again so that it makes use of the new certificate.","body":"The new certificate does not magically show up in your keystore. You have to explicitly do it and deploy your program again so that it makes use of the new certificate."},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1626191313,"post_id":68364615,"comment_id":120824833,"body_markdown":"With a traditional setup it is not possible, but maybe you can give this a try: https://github.com/Hakky54/java-tutorials/tree/main/instant-server-ssl-reloading I demonstrate here how you can change the server certificates without redeploying/restarting it. But for this you probably need to refactor your code","body":"With a traditional setup it is not possible, but maybe you can give this a try: <a href=\"https://github.com/Hakky54/java-tutorials/tree/main/instant-server-ssl-reloading\" rel=\"nofollow noreferrer\">github.com/Hakky54/java-tutorials/tree/main/&hellip;</a> I demonstrate here how you can change the server certificates without redeploying/restarting it. But for this you probably need to refactor your code"},{"owner":{"account_id":22199335,"reputation":21,"user_id":16440277,"display_name":"annann"},"score":0,"creation_date":1626210027,"post_id":68364615,"comment_id":120831344,"body_markdown":"steffen ullrich , as keystore holds private key and not changed . suppose if i got the matched public key on local trusted certifacte store . it should be work ?","body":"steffen ullrich , as keystore holds private key and not changed . suppose if i got the matched public key on local trusted certifacte store . it should be work ?"}],"answers":[{"comments":[{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1686516322,"post_id":76278080,"comment_id":134805495,"body_markdown":"It is possible, see here for an example https://github.com/Hakky54/java-tutorials/tree/main/instant-server-ssl-reloading","body":"It is possible, see here for an example <a href=\"https://github.com/Hakky54/java-tutorials/tree/main/instant-server-ssl-reloading\" rel=\"nofollow noreferrer\">github.com/Hakky54/java-tutorials/tree/main/&hellip;</a>"},{"owner":{"account_id":9533229,"reputation":652,"user_id":7084163,"display_name":"vmayorow"},"score":0,"creation_date":1686574282,"post_id":76278080,"comment_id":134812840,"body_markdown":"You are talking about the certificate renewal for the web server. Renewing the web server certificate is certainly possible! Unfortunately this approach does not work for Android application development.","body":"You are talking about the certificate renewal for the web server. Renewing the web server certificate is certainly possible! Unfortunately this approach does not work for Android application development."},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1686574434,"post_id":76278080,"comment_id":134812884,"body_markdown":"The OP didn&#39;t asked for Android","body":"The OP didn&#39;t asked for Android"},{"owner":{"account_id":9533229,"reputation":652,"user_id":7084163,"display_name":"vmayorow"},"score":0,"creation_date":1686574717,"post_id":76278080,"comment_id":134812956,"body_markdown":"Oops, didn&#39;t notice that. I think you need to add your comment as an answer.","body":"Oops, didn&#39;t notice that. I think you need to add your comment as an answer."},{"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"score":0,"creation_date":1686576051,"post_id":76278080,"comment_id":134813289,"body_markdown":"I dropped a comment on his question, however he didn&#39;t respond. Thanks again for your suggestion, maybe I will just add it anyway as answer","body":"I dropped a comment on his question, however he didn&#39;t respond. Thanks again for your suggestion, maybe I will just add it anyway as answer"}],"tags":[],"owner":{"account_id":9533229,"reputation":652,"user_id":7084163,"display_name":"vmayorow"},"comment_count":5,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684389184,"creation_date":1684389184,"answer_id":76278080,"question_id":68364615,"body_markdown":"Here is the set of commands I used to create the new certificate for the same private key.\r\n\r\n1. Extract the private key from the legacy JKS\r\n\r\n       keytool -importkeystore -srckeystore legacykeystore.jks -srcalias mykey -destalias mykey -destkeystore keystore.p12 -deststoretype PKCS12 -destkeypass 123456\r\n\r\n       openssl pkcs12 -in keystore.p12 -nodes -nocerts -out privatekey.pem\r\n\r\nThe password 123456 is just a temporary stub used only at step 4.\r\n\r\n2. Generate the new CSR\r\n\r\n       openssl req -out certreq.csr -key privatekey.pem -new\r\n\r\n3. Generate the new certificate\r\n\r\n       openssl x509 -req -days 18000 -in certreq.csr -signkey privatekey.pem -sha256 -out newcert.pem\r\n\r\n4. Convert key and cert to pkcs12\r\n\r\n       openssl pkcs12 -export -out newkeystore.p12 -inkey privatekey.pem -in newcert.pem\r\n\r\nHere you input a temporary password to a PKCS12 keystore (123456).\r\n\r\n5. Convert pkcs12 to jks\r\n\r\n       keytool -importkeystore -destkeystore newkeystore.jks -srckeystore newkeystore.p12 -srcstoretype PKCS12 -srcalias 1 -destalias mykey -destkeypass keypassword\r\n\r\nThe keystore password is entered from the keyboard input, and the key alias and password are specified as the command line parameters\r\n\r\nI was able to sign the new version of the app with the new keystore. Also, I was able to verify that the keys in the legacy and new keystores are the same.\r\n\r\nHowever, when I tried to update the app signed with the legacy keystore, to the app signed with the new keystore, I first got the message:\r\n\r\n    Play Protect doesn&#39;t recognize this app&#39;s developer.\r\n\r\nAfter I confirmed the update, I got another message:\r\n\r\n    App not installed as package conflicts with an existing package.\r\n\r\nWhich makes me thinking that **it is not possible to renew the certificate** at all, even if the private keys are the same. So you have to live with your first keystore forever (obviously, it&#39;s a bad practice of Android, not to provide any option to renew the developer certificates).\r\n\r\n","title":"How to renew certificate with same keystore (same private key) without deploy to my java program again","body":"<p>Here is the set of commands I used to create the new certificate for the same private key.</p>\n<ol>\n<li><p>Extract the private key from the legacy JKS</p>\n<pre><code>keytool -importkeystore -srckeystore legacykeystore.jks -srcalias mykey -destalias mykey -destkeystore keystore.p12 -deststoretype PKCS12 -destkeypass 123456\n\nopenssl pkcs12 -in keystore.p12 -nodes -nocerts -out privatekey.pem\n</code></pre>\n</li>\n</ol>\n<p>The password 123456 is just a temporary stub used only at step 4.</p>\n<ol start=\"2\">\n<li><p>Generate the new CSR</p>\n<pre><code>openssl req -out certreq.csr -key privatekey.pem -new\n</code></pre>\n</li>\n<li><p>Generate the new certificate</p>\n<pre><code>openssl x509 -req -days 18000 -in certreq.csr -signkey privatekey.pem -sha256 -out newcert.pem\n</code></pre>\n</li>\n<li><p>Convert key and cert to pkcs12</p>\n<pre><code>openssl pkcs12 -export -out newkeystore.p12 -inkey privatekey.pem -in newcert.pem\n</code></pre>\n</li>\n</ol>\n<p>Here you input a temporary password to a PKCS12 keystore (123456).</p>\n<ol start=\"5\">\n<li><p>Convert pkcs12 to jks</p>\n<pre><code>keytool -importkeystore -destkeystore newkeystore.jks -srckeystore newkeystore.p12 -srcstoretype PKCS12 -srcalias 1 -destalias mykey -destkeypass keypassword\n</code></pre>\n</li>\n</ol>\n<p>The keystore password is entered from the keyboard input, and the key alias and password are specified as the command line parameters</p>\n<p>I was able to sign the new version of the app with the new keystore. Also, I was able to verify that the keys in the legacy and new keystores are the same.</p>\n<p>However, when I tried to update the app signed with the legacy keystore, to the app signed with the new keystore, I first got the message:</p>\n<pre><code>Play Protect doesn't recognize this app's developer.\n</code></pre>\n<p>After I confirmed the update, I got another message:</p>\n<pre><code>App not installed as package conflicts with an existing package.\n</code></pre>\n<p>Which makes me thinking that <strong>it is not possible to renew the certificate</strong> at all, even if the private keys are the same. So you have to live with your first keystore forever (obviously, it's a bad practice of Android, not to provide any option to renew the developer certificates).</p>\n"}],"owner":{"account_id":22199335,"reputation":21,"user_id":16440277,"display_name":"annann"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1250,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1684389184,"creation_date":1626187464,"question_id":68364615,"body_markdown":"I got a program which read keystore(.jks) located inside the .jar \r\nMy current certificate is expired soon , and I already export the private key from keystore and renewal a new certificate .\r\nI would like to know is that possible keep the keystore(.jks)  unchange and using same private key and same keystore without deploy my program again .\r\n(For client side , I will import the new valid certificate to window certificate trusted store)\r\n\r\nThe program is using java and keystore create SSLcontext \r\n\r\nThanks","title":"How to renew certificate with same keystore (same private key) without deploy to my java program again","body":"<p>I got a program which read keystore(.jks) located inside the .jar\nMy current certificate is expired soon , and I already export the private key from keystore and renewal a new certificate .\nI would like to know is that possible keep the keystore(.jks)  unchange and using same private key and same keystore without deploy my program again .\n(For client side , I will import the new valid certificate to window certificate trusted store)</p>\n<p>The program is using java and keystore create SSLcontext</p>\n<p>Thanks</p>\n"},{"tags":["java","axis"],"answers":[{"tags":[],"owner":{"account_id":11869922,"reputation":137,"user_id":8686431,"display_name":"Moon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684389100,"creation_date":1684389100,"answer_id":76278074,"question_id":76232787,"body_markdown":"User simple java with HTTP to call:\r\n\r\npublic class getSoupResponse {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        String urlString = &quot;https:128.0.0.1/test/wsdl&quot;;\r\n        URL url = new URL(urlString);\r\n\r\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n\r\n        if(urlString.startsWith(&quot;https&quot;)){\r\n            HttpsURLConnection https = (HttpsURLConnection) connection;\r\n            trustAllHosts(https);\r\n            https.setHostnameVerifier(DO_NOT_VERIFY);\r\n        }\r\n\r\n\r\n        connection.setRequestMethod(&quot;POST&quot;);\r\n        connection.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml;charset=UTF-8&quot;);\r\n        connection.setDoInput(true);\r\n        connection.setDoOutput(true);\r\n\r\n        String soupXML = getXML();\r\n        OutputStream os = connection.getOutputStream();\r\n        os.write(soupXML.getBytes(StandardCharsets.UTF_8));\r\n\r\n        int responseCode = connection.getResponseCode();\r\n        if(200==responseCode){\r\n            InputStream inputStream = connection.getInputStream();\r\n            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\r\n            BufferedReader bufferedReader = new BufferedReader(inputStreamReader);\r\n\r\n            StringBuilder stringBuilder = new StringBuilder();\r\n            String temp;\r\n            while (null != (temp = bufferedReader.readLine())){\r\n                stringBuilder.append(temp);\r\n            }\r\n\r\n            JSONObject object = XML.toJSONObject(stringBuilder.toString());\r\n            System.out.println(object);\r\n            inputStream.close();\r\n            inputStreamReader.close();\r\n            bufferedReader.close();\r\n        }\r\n        os.close();\r\n    }\r\n\r\n    private static String getXML(){\r\n\r\n\t\t//your soupXML request in soupUI\r\n        return &quot;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:ghe=&quot;http://gheo1.test.com&quot;&gt;\r\n\t\t\t\t\t&lt;soapenv:Header&gt;\r\n\t\t\t\t\t&lt;/soapenv:Header&gt;\r\n\t\t\t\t\t&lt;soapenv:Body&gt;\r\n\t\t\t\t\t&lt;/soapenv:Body&gt;\r\n\t\t\t\t&lt;/soapenv:Envelope&gt;&quot;;\r\n    }\r\n\r\n    private static final TrustManager[] trustAllCerts = new TrustManager[]{\r\n\r\n            new X509TrustManager() {\r\n                @Override\r\n                public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return new X509Certificate[]{};\r\n                }\r\n            }\r\n    };\r\n\r\n    private static final HostnameVerifier DO_NOT_VERIFY = (s, sslSession) -&gt; true;\r\n\r\n    private static SSLSocketFactory trustAllHosts(HttpsURLConnection connection){\r\n\r\n        SSLSocketFactory oldFactory = connection.getSSLSocketFactory();\r\n        try {\r\n            SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);\r\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n            SSLSocketFactory newFactory = sc.getSocketFactory();\r\n            connection.setSSLSocketFactory(newFactory);\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n        return oldFactory;\r\n    }\r\n}\r\n","title":"how to call Soup webservice according the WSDL file use axis when there is header info","body":"<p>User simple java with HTTP to call:</p>\n<p>public class getSoupResponse {</p>\n<pre><code>public static void main(String[] args) throws IOException {\n\n    String urlString = &quot;https:128.0.0.1/test/wsdl&quot;;\n    URL url = new URL(urlString);\n\n    HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n\n    if(urlString.startsWith(&quot;https&quot;)){\n        HttpsURLConnection https = (HttpsURLConnection) connection;\n        trustAllHosts(https);\n        https.setHostnameVerifier(DO_NOT_VERIFY);\n    }\n\n\n    connection.setRequestMethod(&quot;POST&quot;);\n    connection.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml;charset=UTF-8&quot;);\n    connection.setDoInput(true);\n    connection.setDoOutput(true);\n\n    String soupXML = getXML();\n    OutputStream os = connection.getOutputStream();\n    os.write(soupXML.getBytes(StandardCharsets.UTF_8));\n\n    int responseCode = connection.getResponseCode();\n    if(200==responseCode){\n        InputStream inputStream = connection.getInputStream();\n        InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\n        BufferedReader bufferedReader = new BufferedReader(inputStreamReader);\n\n        StringBuilder stringBuilder = new StringBuilder();\n        String temp;\n        while (null != (temp = bufferedReader.readLine())){\n            stringBuilder.append(temp);\n        }\n\n        JSONObject object = XML.toJSONObject(stringBuilder.toString());\n        System.out.println(object);\n        inputStream.close();\n        inputStreamReader.close();\n        bufferedReader.close();\n    }\n    os.close();\n}\n\nprivate static String getXML(){\n\n    //your soupXML request in soupUI\n    return &quot;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:ghe=&quot;http://gheo1.test.com&quot;&gt;\n                &lt;soapenv:Header&gt;\n                &lt;/soapenv:Header&gt;\n                &lt;soapenv:Body&gt;\n                &lt;/soapenv:Body&gt;\n            &lt;/soapenv:Envelope&gt;&quot;;\n}\n\nprivate static final TrustManager[] trustAllCerts = new TrustManager[]{\n\n        new X509TrustManager() {\n            @Override\n            public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {\n\n            }\n\n            @Override\n            public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {\n\n            }\n\n            @Override\n            public X509Certificate[] getAcceptedIssuers() {\n                return new X509Certificate[]{};\n            }\n        }\n};\n\nprivate static final HostnameVerifier DO_NOT_VERIFY = (s, sslSession) -&gt; true;\n\nprivate static SSLSocketFactory trustAllHosts(HttpsURLConnection connection){\n\n    SSLSocketFactory oldFactory = connection.getSSLSocketFactory();\n    try {\n        SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);\n        sc.init(null, trustAllCerts, new java.security.SecureRandom());\n        SSLSocketFactory newFactory = sc.getSocketFactory();\n        connection.setSSLSocketFactory(newFactory);\n    }catch (Exception e){\n        e.printStackTrace();\n    }\n    return oldFactory;\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":11869922,"reputation":137,"user_id":8686431,"display_name":"Moon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76278074,"answer_count":1,"score":0,"last_activity_date":1684389100,"creation_date":1683859019,"question_id":76232787,"body_markdown":"EndPoint = &quot;https:128.0.0.1/test/wsdl&quot;;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:ghe=&quot;http://gheo1.test.com&quot;&gt;\r\n       &lt;soapenv:Header&gt;\r\n          &lt;wsse:Security xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\r\n             &lt;wsse:UsernameToken&gt;\r\n                &lt;wsse:Username&gt;test_user&lt;/wsse:Username&gt;\r\n                &lt;wsse:Password Type=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText&quot;&gt;test123&lt;/wsse:Password&gt;\r\n             &lt;/wsse:UsernameToken&gt;\r\n          &lt;/wsse:Security&gt;\r\n           &lt;soapheader:loginInformation xmlns:soapheader=&quot;com.test.common&quot;&gt;\r\n          \t &lt;soapheader:loginUserID&gt;USERID&lt;/soapheader:loginUserID&gt;\r\n          \t &lt;soapheader:loginUserType&gt;CUSTOMER&lt;/soapheader:loginUserType&gt; \r\n          \t &lt;soapheader:loginUserUniqueKey&gt;123456&lt;/soapheader:loginUserUniqueKey&gt;\r\n          \t &lt;soapheader:loginUserRole&gt;CUSTOMER&lt;/soapheader:loginUserRole&gt;\r\n          &lt;/soapheader:loginInformation&gt;      \r\n       &lt;/soapenv:Header&gt;\r\n       &lt;soapenv:Body&gt;\r\n          &lt;ghe:Request&gt;\r\n             &lt;!--Optional:--&gt;\r\n             &lt;arg0&gt;\r\n                &lt;!--Optional:--&gt;\r\n                &lt;accountNumber&gt;123&lt;/accountNumber&gt;\r\n                &lt;!--Optional:--&gt;\r\n                &lt;groupNumber&gt;456&lt;/groupNumber&gt;\r\n                &lt;!--Optional:--&gt;\r\n                &lt;authGroupNumber&gt;789&lt;/authGroupNumber&gt;\r\n                &lt;!--Optional:--&gt;\r\n                &lt;authAccountNumber&gt;123&lt;/authAccountNumber&gt;\r\n                &lt;!--Optional:--&gt;\r\n                &lt;authCertificateNumber&gt;555&lt;/authCertificateNumber&gt;\r\n             &lt;/arg0&gt;\r\n          &lt;/ghe:Request&gt;\r\n       &lt;/soapenv:Body&gt;\r\n    &lt;/soapenv:Envelope&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n    \r\n\r\nI have a WSDL file as above, and I don&#39;t know how to call this with header info.\r\n\r\nanyone can help me to give a java axis sample use above xml, thanks.\r\n\r\nUse other webservice framework is ok.","title":"how to call Soup webservice according the WSDL file use axis when there is header info","body":"<p>EndPoint = &quot;https:128.0.0.1/test/wsdl&quot;;</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ghe=\"http://gheo1.test.com\"&gt;\n   &lt;soapenv:Header&gt;\n      &lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n         &lt;wsse:UsernameToken&gt;\n            &lt;wsse:Username&gt;test_user&lt;/wsse:Username&gt;\n            &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\"&gt;test123&lt;/wsse:Password&gt;\n         &lt;/wsse:UsernameToken&gt;\n      &lt;/wsse:Security&gt;\n       &lt;soapheader:loginInformation xmlns:soapheader=\"com.test.common\"&gt;\n         &lt;soapheader:loginUserID&gt;USERID&lt;/soapheader:loginUserID&gt;\n         &lt;soapheader:loginUserType&gt;CUSTOMER&lt;/soapheader:loginUserType&gt; \n         &lt;soapheader:loginUserUniqueKey&gt;123456&lt;/soapheader:loginUserUniqueKey&gt;\n         &lt;soapheader:loginUserRole&gt;CUSTOMER&lt;/soapheader:loginUserRole&gt;\n      &lt;/soapheader:loginInformation&gt;      \n   &lt;/soapenv:Header&gt;\n   &lt;soapenv:Body&gt;\n      &lt;ghe:Request&gt;\n         &lt;!--Optional:--&gt;\n         &lt;arg0&gt;\n            &lt;!--Optional:--&gt;\n            &lt;accountNumber&gt;123&lt;/accountNumber&gt;\n            &lt;!--Optional:--&gt;\n            &lt;groupNumber&gt;456&lt;/groupNumber&gt;\n            &lt;!--Optional:--&gt;\n            &lt;authGroupNumber&gt;789&lt;/authGroupNumber&gt;\n            &lt;!--Optional:--&gt;\n            &lt;authAccountNumber&gt;123&lt;/authAccountNumber&gt;\n            &lt;!--Optional:--&gt;\n            &lt;authCertificateNumber&gt;555&lt;/authCertificateNumber&gt;\n         &lt;/arg0&gt;\n      &lt;/ghe:Request&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I have a WSDL file as above, and I don't know how to call this with header info.</p>\n<p>anyone can help me to give a java axis sample use above xml, thanks.</p>\n<p>Use other webservice framework is ok.</p>\n"},{"tags":["java","spring","elasticsearch","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653548839,"creation_date":1653548839,"answer_id":72388045,"question_id":72380663,"body_markdown":"As mentioned in [this][1] GitHub issue, you can not directly filter source using annotation and you need to use `NativeSearchQueryBuilder` for same.\r\n\r\nYou can check [this][2] SO answer written by Val for NativeSearch query builder.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-data-elasticsearch/issues/1378\r\n  [2]: https://stackoverflow.com/a/39461862/5489276","title":"How to return one field from a query (Spring Data Elasticsearch)","body":"<p>As mentioned in <a href=\"https://github.com/spring-projects/spring-data-elasticsearch/issues/1378\" rel=\"nofollow noreferrer\">this</a> GitHub issue, you can not directly filter source using annotation and you need to use <code>NativeSearchQueryBuilder</code> for same.</p>\n<p>You can check <a href=\"https://stackoverflow.com/a/39461862/5489276\">this</a> SO answer written by Val for NativeSearch query builder.</p>\n"},{"comments":[{"owner":{"account_id":6801671,"reputation":311,"user_id":5234799,"display_name":"Sandeep Khantwal"},"score":0,"creation_date":1666077601,"post_id":72389174,"comment_id":130843748,"body_markdown":"That custom repository implementation is a life saver. Thanks.","body":"That custom repository implementation is a life saver. Thanks."},{"owner":{"account_id":7972620,"reputation":303,"user_id":6016749,"display_name":"Shruti"},"score":0,"creation_date":1679387967,"post_id":72389174,"comment_id":133708218,"body_markdown":"@SandeepKhantwal Can you help with some working example of custom repo","body":"@SandeepKhantwal Can you help with some working example of custom repo"},{"owner":{"account_id":6801671,"reputation":311,"user_id":5234799,"display_name":"Sandeep Khantwal"},"score":0,"creation_date":1684418769,"post_id":72389174,"comment_id":134517112,"body_markdown":"@Shruti - answer posted in this thread with code example","body":"@Shruti - answer posted in this thread with code example"}],"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653555005,"creation_date":1653555005,"answer_id":72389174,"question_id":72380663,"body_markdown":"There is currently a [pull request](https://github.com/spring-projects/spring-data-elasticsearch/pull/2151) being worked on that will allow to add source includes and source excludes to repository methods that are annotated with the `@Query` annotation, so this will be available in the next version.\r\n\r\nBesides that, it is possible to set the source filter values to any provided implementation of the `Query` interface (`StringQuery`, `CriteriaQuery`, `NativeSearchQuery`). You&#39;d need to create a repository fragment (see https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#repositories.custom-implementations) to add a function that builds and uses one of these queries if you wish to integrate it in a repository.\r\n\r\nThe entity you use to read the data would need to have a property that matches the returned values like\r\n\r\n```java\r\n@Document(indexName=&quot;populationstreamassignment&quot;)\r\npublic class Returned {\r\n  @Id\r\n  private String id;\r\n  @Field(type= FieldType.text)\r\n  private String memberId\r\n  // getter and setter\r\n}\r\n```\r\n","title":"How to return one field from a query (Spring Data Elasticsearch)","body":"<p>There is currently a <a href=\"https://github.com/spring-projects/spring-data-elasticsearch/pull/2151\" rel=\"nofollow noreferrer\">pull request</a> being worked on that will allow to add source includes and source excludes to repository methods that are annotated with the <code>@Query</code> annotation, so this will be available in the next version.</p>\n<p>Besides that, it is possible to set the source filter values to any provided implementation of the <code>Query</code> interface (<code>StringQuery</code>, <code>CriteriaQuery</code>, <code>NativeSearchQuery</code>). You'd need to create a repository fragment (see <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#repositories.custom-implementations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#repositories.custom-implementations</a>) to add a function that builds and uses one of these queries if you wish to integrate it in a repository.</p>\n<p>The entity you use to read the data would need to have a property that matches the returned values like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Document(indexName=&quot;populationstreamassignment&quot;)\npublic class Returned {\n  @Id\n  private String id;\n  @Field(type= FieldType.text)\n  private String memberId\n  // getter and setter\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6801671,"reputation":311,"user_id":5234799,"display_name":"Sandeep Khantwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684388778,"creation_date":1684388778,"answer_id":76278053,"question_id":72380663,"body_markdown":"@Shruti - pls note the CustomRepoImpl will be automatically searched by spring given the package is in the search path of spring boot. The name of the Impl should be (interface-name)Impl\r\n\r\n    @Repository\r\n    public interface NormalRepo extends ElasticsearchRepository&lt;User, String&gt;, CustomRepo {\r\n    \r\n      Optional&lt;Instant&gt; findByName(String name);\r\n    }\r\n    \r\n    public interface CustomRepo {\r\n      Optional&lt;Instant&gt; findByName(String name);\r\n    }\r\n    \r\n    public class CustomRepoImpl implements CustomRepo {\r\n      Optional&lt;Instant&gt; findByName(String name) {\r\n        // your implementation\r\n      }\r\n    }","title":"How to return one field from a query (Spring Data Elasticsearch)","body":"<p>@Shruti - pls note the CustomRepoImpl will be automatically searched by spring given the package is in the search path of spring boot. The name of the Impl should be (interface-name)Impl</p>\n<pre><code>@Repository\npublic interface NormalRepo extends ElasticsearchRepository&lt;User, String&gt;, CustomRepo {\n\n  Optional&lt;Instant&gt; findByName(String name);\n}\n\npublic interface CustomRepo {\n  Optional&lt;Instant&gt; findByName(String name);\n}\n\npublic class CustomRepoImpl implements CustomRepo {\n  Optional&lt;Instant&gt; findByName(String name) {\n    // your implementation\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":10778144,"reputation":712,"user_id":7929423,"display_name":"cluis92"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1684388778,"creation_date":1653493519,"question_id":72380663,"body_markdown":"I am writing a query; in Kibana it&#39;s easy \r\n```\r\nGET populationstreamassignment/_search\r\n{\r\n    &quot;query&quot;: {\r\n    &quot;match&quot;: {\r\n      &quot;healthyChildrenIndicator&quot;: true\r\n    }\r\n  }, \r\n  &quot;_source&quot;: &quot;memberId&quot;\r\n}\r\n```\r\nWhat I want to do is get a list of all the memberId&#39;s for &#39;healthy children&#39;. But I want to translate this to java syntax.\r\n```\r\nimport java.util.List;\r\nimport java.util.UUID;\r\nimport org.springframework.data.elasticsearch.annotations.Query;\r\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\r\n\r\n/**\r\n Spring Data Elasticsearch repository for the {@link PopulationStreamAssignment} entity.\r\n */\r\npublic interface PopulationStreamAssignmentSearchRepository extends ElasticsearchRepository&lt;PopulationStreamAssignment, Long&gt; {\r\n\r\n    @Query(&quot;{\\&quot;match\\&quot;: {\\&quot;?0\\&quot;: \\&quot;?1\\&quot;}}&quot;)\r\n    List&lt;UUID&gt; getMemberIdsByPopulationStream(String popStream, Boolean criteria);\r\n\r\n}\r\n```\r\n\r\nThis query has a few problems. Here is where I have questions..\r\n\r\n 1. How can I specify &quot;_source&quot; so that I only return the memberId field?\r\n 2. memberId is a UUID, can I have it directly return memberId&#39;s as a List of Values?\r\n\r\n\r\n","title":"How to return one field from a query (Spring Data Elasticsearch)","body":"<p>I am writing a query; in Kibana it's easy</p>\n<pre><code>GET populationstreamassignment/_search\n{\n    &quot;query&quot;: {\n    &quot;match&quot;: {\n      &quot;healthyChildrenIndicator&quot;: true\n    }\n  }, \n  &quot;_source&quot;: &quot;memberId&quot;\n}\n</code></pre>\n<p>What I want to do is get a list of all the memberId's for 'healthy children'. But I want to translate this to java syntax.</p>\n<pre><code>import java.util.List;\nimport java.util.UUID;\nimport org.springframework.data.elasticsearch.annotations.Query;\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n\n/**\n Spring Data Elasticsearch repository for the {@link PopulationStreamAssignment} entity.\n */\npublic interface PopulationStreamAssignmentSearchRepository extends ElasticsearchRepository&lt;PopulationStreamAssignment, Long&gt; {\n\n    @Query(&quot;{\\&quot;match\\&quot;: {\\&quot;?0\\&quot;: \\&quot;?1\\&quot;}}&quot;)\n    List&lt;UUID&gt; getMemberIdsByPopulationStream(String popStream, Boolean criteria);\n\n}\n</code></pre>\n<p>This query has a few problems. Here is where I have questions..</p>\n<ol>\n<li>How can I specify &quot;_source&quot; so that I only return the memberId field?</li>\n<li>memberId is a UUID, can I have it directly return memberId's as a List of Values?</li>\n</ol>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":1,"creation_date":1684124773,"post_id":76250531,"comment_id":134465293,"body_markdown":"Nothing wrong i found till now from your code . Make sure your conditions are satisfying as no code is there out of the condition so by putting breakpoints or logs make sure conditions are satisfying","body":"Nothing wrong i found till now from your code . Make sure your conditions are satisfying as no code is there out of the condition so by putting breakpoints or logs make sure conditions are satisfying"},{"owner":{"account_id":17167775,"reputation":185,"user_id":12425619,"display_name":"Emil"},"score":0,"creation_date":1684126320,"post_id":76250531,"comment_id":134465424,"body_markdown":"I didn&#39;t find anything wrong in the code you&#39;ve presented, so it may be a problem outside of that scope. There&#39;s a lot that you could optimize in terms of readability though. Since most if statements include one another you could nest them e.g. check if `numberT &gt; 4` and then check all others inside that. Furthermore a lot of that dialog code is doubled and could be moved to its own method that just takes in the onClick action.","body":"I didn&#39;t find anything wrong in the code you&#39;ve presented, so it may be a problem outside of that scope. There&#39;s a lot that you could optimize in terms of readability though. Since most if statements include one another you could nest them e.g. check if <code>numberT &gt; 4</code> and then check all others inside that. Furthermore a lot of that dialog code is doubled and could be moved to its own method that just takes in the onClick action."},{"owner":{"account_id":28602029,"reputation":1,"user_id":21898740,"display_name":"Dr. FOK"},"score":0,"creation_date":1684165595,"post_id":76250531,"comment_id":134473698,"body_markdown":"I also think there is no error in code and the first condiotion is met as my numberT and numberD both are 5. However, Alert Dialog does not appear when I click the btn2.","body":"I also think there is no error in code and the first condiotion is met as my numberT and numberD both are 5. However, Alert Dialog does not appear when I click the btn2."}],"answers":[{"tags":[],"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684388712,"creation_date":1684388712,"answer_id":76278048,"question_id":76250531,"body_markdown":"It is as logcat says. The main thread is being blocked due to code performing too many calculations on the UI thread.\r\nTry doing all calculations on a separate thread and then joining to main (UI) thread on completion of your calculations.\r\nThe Android Activity is a linear UI thread - it will throw errors if it is getting even slightly blocked in its order of visible components update.\r\n\r\nYou will require some multithreading knowledge in at least Java to properly handle this.","title":"Android Studio Calculation Result not response","body":"<p>It is as logcat says. The main thread is being blocked due to code performing too many calculations on the UI thread.\nTry doing all calculations on a separate thread and then joining to main (UI) thread on completion of your calculations.\nThe Android Activity is a linear UI thread - it will throw errors if it is getting even slightly blocked in its order of visible components update.</p>\n<p>You will require some multithreading knowledge in at least Java to properly handle this.</p>\n"}],"owner":{"account_id":28602029,"reputation":1,"user_id":21898740,"display_name":"Dr. FOK"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684388712,"creation_date":1684117697,"question_id":76250531,"body_markdown":"I am inexperianced in Android Studio or Java and try to learn. I want to change values of 5 TextViews when Button click, based on some IF Conditions but nothing happens. I check the Logcat which informs \r\n\r\n&quot;Skipped 39 frames!  The application may be doing too much work on its main thread.&quot;\r\nMy code is as below:\r\n\r\n```\r\n`btn2.setOnClickListener(new View.OnClickListener() {@Overridepublic void onClick(View v) {\r\n            getCalculations();\r\n        }\r\n    });\r\n\r\n}\r\n\r\nprivate void getCalculations() {\r\n            String valueT = txtT.getText().toString();\r\n            String valueD = txtD.getText().toString();\r\n            String valueS = txtS.getText().toString();\r\n            String valueC = txtC.getText().toString();\r\n            String valueA = txtA.getText().toString();\r\n            int numberT = Integer.parseInt(valueT);\r\n            int numberD = Integer.parseInt(valueD);\r\n            int numberS = Integer.parseInt(valueS);\r\n            int numberC = Integer.parseInt(valueC);\r\n            int numberA = Integer.parseInt(valueA);\r\n            if (numberT &gt; 4 &amp;&amp; numberD &lt; 0){\r\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\r\n                adb.setTitle(&quot;Notice&quot;);\r\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege2));\r\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        int scoreD = numberD -1;\r\n                        int scoreT = numberT -5;\r\n                        int scoreA = numberA -500;\r\n                        txtT.setText(String.valueOf(scoreT));\r\n                        txtD.setText(String.valueOf(scoreD));\r\n                        txtA.setText(String.valueOf(scoreA));\r\n                    }\r\n                });\r\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n\r\n                    }\r\n                });\r\n                adb.show();\r\n            } else if (numberT &gt; 4 &amp;&amp; numberD == 0 &amp;&amp; numberC &lt; 10) {\r\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\r\n                adb.setTitle(&quot;Notice&quot;);\r\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege2));\r\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        int scoreT = numberT -5;\r\n                        int scoreA = numberA -500;\r\n                        int scoreC = numberC +1;\r\n                        int scoreS = numberS -1;\r\n                        txtT.setText(String.valueOf(scoreT));\r\n                        txtA.setText(String.valueOf(scoreA));\r\n                        txtC.setText(String.valueOf(scoreC));\r\n                        txtS.setText(String.valueOf(scoreS));\r\n                    }\r\n                });\r\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n\r\n                    }\r\n                });\r\n                adb.show();\r\n            }\r\n            if (numberT &gt; 4 &amp;&amp; numberD == 0 &amp;&amp; numberC == 10) {\r\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\r\n                adb.setTitle(&quot;Notice&quot;);\r\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege3));\r\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n\r\n                    }\r\n                });\r\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n\r\n                    }\r\n                });\r\n                adb.show();\r\n            }\r\n            if (numberT &lt; 5) {\r\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\r\n                adb.setTitle(&quot;Notice&quot;);\r\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege4));\r\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n\r\n                    }\r\n                });\r\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n\r\n                    }\r\n                });\r\n                adb.show();\r\n            }\r\n\r\n        }\r\n```\r\n\r\n\\`","title":"Android Studio Calculation Result not response","body":"<p>I am inexperianced in Android Studio or Java and try to learn. I want to change values of 5 TextViews when Button click, based on some IF Conditions but nothing happens. I check the Logcat which informs</p>\n<p>&quot;Skipped 39 frames!  The application may be doing too much work on its main thread.&quot;\nMy code is as below:</p>\n<pre><code>`btn2.setOnClickListener(new View.OnClickListener() {@Overridepublic void onClick(View v) {\n            getCalculations();\n        }\n    });\n\n}\n\nprivate void getCalculations() {\n            String valueT = txtT.getText().toString();\n            String valueD = txtD.getText().toString();\n            String valueS = txtS.getText().toString();\n            String valueC = txtC.getText().toString();\n            String valueA = txtA.getText().toString();\n            int numberT = Integer.parseInt(valueT);\n            int numberD = Integer.parseInt(valueD);\n            int numberS = Integer.parseInt(valueS);\n            int numberC = Integer.parseInt(valueC);\n            int numberA = Integer.parseInt(valueA);\n            if (numberT &gt; 4 &amp;&amp; numberD &lt; 0){\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\n                adb.setTitle(&quot;Notice&quot;);\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege2));\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        int scoreD = numberD -1;\n                        int scoreT = numberT -5;\n                        int scoreA = numberA -500;\n                        txtT.setText(String.valueOf(scoreT));\n                        txtD.setText(String.valueOf(scoreD));\n                        txtA.setText(String.valueOf(scoreA));\n                    }\n                });\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.show();\n            } else if (numberT &gt; 4 &amp;&amp; numberD == 0 &amp;&amp; numberC &lt; 10) {\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\n                adb.setTitle(&quot;Notice&quot;);\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege2));\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        int scoreT = numberT -5;\n                        int scoreA = numberA -500;\n                        int scoreC = numberC +1;\n                        int scoreS = numberS -1;\n                        txtT.setText(String.valueOf(scoreT));\n                        txtA.setText(String.valueOf(scoreA));\n                        txtC.setText(String.valueOf(scoreC));\n                        txtS.setText(String.valueOf(scoreS));\n                    }\n                });\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.show();\n            }\n            if (numberT &gt; 4 &amp;&amp; numberD == 0 &amp;&amp; numberC == 10) {\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\n                adb.setTitle(&quot;Notice&quot;);\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege3));\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.show();\n            }\n            if (numberT &lt; 5) {\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\n                adb.setTitle(&quot;Notice&quot;);\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege4));\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.show();\n            }\n\n        }\n</code></pre>\n<p>`</p>\n"},{"tags":["java","android","pdf","telegram","android-fileprovider"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684317960,"post_id":76270462,"comment_id":134499714,"body_markdown":"Use file.exists() and file.canRead() before you start the intent.","body":"Use file.exists() and file.canRead() before you start the intent."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684318037,"post_id":76270462,"comment_id":134499732,"body_markdown":"You do not have to set clip data.","body":"You do not have to set clip data."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684318095,"post_id":76270462,"comment_id":134499744,"body_markdown":"You do not have to set a write flag.","body":"You do not have to set a write flag."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684318147,"post_id":76270462,"comment_id":134499754,"body_markdown":"Share with other apps. Does that go ok?","body":"Share with other apps. Does that go ok?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684319342,"post_id":76270462,"comment_id":134500007,"body_markdown":"??? I have no idea what you did to solve your issue.","body":"??? I have no idea what you did to solve your issue."},{"owner":{"account_id":22117307,"reputation":3,"user_id":16371177,"display_name":"Mahdi"},"score":0,"creation_date":1684321219,"post_id":76270462,"comment_id":134500400,"body_markdown":"well I use `file.exists()` and also  `file.canRead()` before start the intent","body":"well I use <code>file.exists()</code> and also  <code>file.canRead()</code> before start the intent"},{"owner":{"account_id":22117307,"reputation":3,"user_id":16371177,"display_name":"Mahdi"},"score":0,"creation_date":1684321341,"post_id":76270462,"comment_id":134500428,"body_markdown":"set clip data and set a write flag was wrong as you mentioned but they did not related to my problem\nactually I had added them because of this problem but it was not a right work","body":"set clip data and set a write flag was wrong as you mentioned but they did not related to my problem actually I had added them because of this problem but it was not a right work"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684323256,"post_id":76270462,"comment_id":134500813,"body_markdown":"Did you solve your problem meanwhile? And what did you do with exists() and canRead()? You are supposed to comment in them as we have no idea what you do. You said you used them but are they both true? Or what?","body":"Did you solve your problem meanwhile? And what did you do with exists() and canRead()? You are supposed to comment in them as we have no idea what you do. You said you used them but are they both true? Or what?"},{"owner":{"account_id":22117307,"reputation":3,"user_id":16371177,"display_name":"Mahdi"},"score":0,"creation_date":1684328224,"post_id":76270462,"comment_id":134501945,"body_markdown":"In fact before `startActvity` I use this code `if(file.exist()&amp;&amp; file.canRead())`\nand I do not have any idea why it works:)","body":"In fact before <code>startActvity</code> I use this code <code>if(file.exist()&amp;&amp; file.canRead())</code> and I do not have any idea why it works:)"}],"answers":[{"tags":[],"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684387605,"creation_date":1684387605,"answer_id":76277962,"question_id":76270462,"body_markdown":"Post Android 10 file access has changed. Please refer to my answer [here](\r\nhttps://stackoverflow.com/questions/66642726/java-io-filenotfoundexception-open-failed-eexist-file-exists-android-11/66645800#66645800).\r\n","title":"Sending a PDF file from external storage to Telegram via FileProvider give Error in Android 10","body":"<p>Post Android 10 file access has changed. Please refer to my answer <a href=\"https://stackoverflow.com/questions/66642726/java-io-filenotfoundexception-open-failed-eexist-file-exists-android-11/66645800#66645800\">here</a>.</p>\n"}],"owner":{"account_id":22117307,"reputation":3,"user_id":16371177,"display_name":"Mahdi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684387605,"creation_date":1684315130,"question_id":76270462,"body_markdown":"well I can store pdf file in external storage correctly.\r\nbut the problem is when I want to send it via fileProvider to telegram it got this error &quot;unsupported attachment&quot; in telegram app.\r\n\r\nthis is my code to share pdf:\r\n\r\n\r\n```\r\nFile file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).getAbsolutePath(), viewModel.getUserData().getCaseNo() + &quot;.pdf&quot;);\r\n        Uri uri = FileProvider.getUriForFile(requireContext(), &quot;com.nsard.provider&quot;, file);\r\n        Intent intent = new Intent(Intent.ACTION_SEND);\r\n        intent.putExtra(Intent.EXTRA_STREAM, uri);\r\n        intent.setClipData(ClipData.newRawUri(&quot;&quot;, uri))\r\n        intent.setDataAndType(uri, requireContext().getContentResolver().getType(uri));\r\n        intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\r\n        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n        Snackbar.make(binding.getRoot(), file.getPath() + &quot;\\n&quot; + uri.getPath(), Snackbar.LENGTH_SHORT).show();\r\n        startActivity(Intent.createChooser(intent, &quot;Open with&quot;));\r\n```\r\n\r\n\r\nI also try this solution [attachment problem](https://stackoverflow.com/questions/60089599/unsupported-attachment)\r\nbut it did not solve.\r\n\r\nthe point is that in android lower it works correctly but in 10+ face error.\r\n\r\nthanks.","title":"Sending a PDF file from external storage to Telegram via FileProvider give Error in Android 10","body":"<p>well I can store pdf file in external storage correctly.\nbut the problem is when I want to send it via fileProvider to telegram it got this error &quot;unsupported attachment&quot; in telegram app.</p>\n<p>this is my code to share pdf:</p>\n<pre><code>File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).getAbsolutePath(), viewModel.getUserData().getCaseNo() + &quot;.pdf&quot;);\n        Uri uri = FileProvider.getUriForFile(requireContext(), &quot;com.nsard.provider&quot;, file);\n        Intent intent = new Intent(Intent.ACTION_SEND);\n        intent.putExtra(Intent.EXTRA_STREAM, uri);\n        intent.setClipData(ClipData.newRawUri(&quot;&quot;, uri))\n        intent.setDataAndType(uri, requireContext().getContentResolver().getType(uri));\n        intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\n        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n        Snackbar.make(binding.getRoot(), file.getPath() + &quot;\\n&quot; + uri.getPath(), Snackbar.LENGTH_SHORT).show();\n        startActivity(Intent.createChooser(intent, &quot;Open with&quot;));\n</code></pre>\n<p>I also try this solution <a href=\"https://stackoverflow.com/questions/60089599/unsupported-attachment\">attachment problem</a>\nbut it did not solve.</p>\n<p>the point is that in android lower it works correctly but in 10+ face error.</p>\n<p>thanks.</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684387349,"creation_date":1684387349,"answer_id":76277948,"question_id":76272087,"body_markdown":"A flimsy solution would be to use __mime types__ and only accept ones related to images. But this leaves your program vulnerable to abuse as a simply diguised non image file with let&#39;s say png extension could make your app behave unpredictably.\r\n\r\nI would suggest opening an input stream using the file uri, reading **a chunk of beginning data** of the file in binary and only accepting files that have headers specific to image files.\r\n\r\nPopular file formats have _headers_ which is basically some unique combination of binary code placed at the beginning of a file to identify the file as that specific format. BMP, PNG, JPEG, ICO, etc image files have different headers. All we have to do is read the header length amount of data from the file and see if it is consistent with any image file headers and this way we have a more reliable way of ensuring file formats.\r\n\r\nOn a relatively higher level, the data is represented and compared usually in hex format rather than binary.\r\n\r\nHope this helps.","title":"How to check if a media file is a video and not an image in Android Studio","body":"<p>A flimsy solution would be to use <strong>mime types</strong> and only accept ones related to images. But this leaves your program vulnerable to abuse as a simply diguised non image file with let's say png extension could make your app behave unpredictably.</p>\n<p>I would suggest opening an input stream using the file uri, reading <strong>a chunk of beginning data</strong> of the file in binary and only accepting files that have headers specific to image files.</p>\n<p>Popular file formats have <em>headers</em> which is basically some unique combination of binary code placed at the beginning of a file to identify the file as that specific format. BMP, PNG, JPEG, ICO, etc image files have different headers. All we have to do is read the header length amount of data from the file and see if it is consistent with any image file headers and this way we have a more reliable way of ensuring file formats.</p>\n<p>On a relatively higher level, the data is represented and compared usually in hex format rather than binary.</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":19471482,"reputation":351,"user_id":14243745,"display_name":"OEThe11"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684387349,"creation_date":1684326313,"question_id":76272087,"body_markdown":"So I have this comparison window, where the app compares a sample image to a image that was either uploaded or taken by the phones camera. This comparison window also pops up when the user takes or uploads videos. But that&#39;s where the issue is. It is only meant to compare images and not videos. Every time I decline a video from matching a sample picture, the app crashes. So the solution would be having the comparison window only pop up when an image is being uploaded and have the videos uploaded without the comparison window. \r\n\r\nSo I think the code here controls when the comparison window pops up when the user uploads a video or an image\r\n\r\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n    \r\n            if (mediaLoadManager.isMediaEditRequestCode(requestCode)) {\r\n                val newUri = mediaLoadManager.handleLoadMediaResult(\r\n                    requestCode, resultCode, data,\r\n                    requireContext().applicationContext\r\n                ) { tmpMediaInfo -&gt;\r\n                    if (tmpMediaInfo.errorMsg != null) {\r\n                        processViewModel.updateMediaCount(null)\r\n                        processViewModel.updateMediaListInfoAfterEditError(tmpMediaInfo.errorMsg)\r\n                    } else {\r\n                        processViewModel.updateMediaListInfoAfterEdit(tmpMediaInfo)\r\n                        progressDialogMediaCompress?.show()\r\n                    }\r\n    \r\n                }\r\n    \r\n                processViewModel.pictureDescriptionAndCompressionLiveData.observe(viewLifecycleOwner,\r\n                    EventObserver { pictureDescriptionAndCompression -&gt;\r\n                        // if condition is true, show &quot;showDoesThePictureTakenResemblesTheSample&quot;\r\n                        if (pictureDescriptionAndCompression != PICTURE_DESCRIPTION_NOT_AVAILABLE) {\r\n                            if (newUri != null &amp;&amp; pictureDescriptionAndCompression == SiteSurveyTypeProgressViewModel.COMPRESSED) {\r\n                                progressDialogMediaCompress?.dismiss()\r\n                                processViewModel.updateMediaCount(newUri)\r\n                                switchToUI(UiType.COMPARE_MEDIA_DIALOG_FRAGMENT, args = Bundle().apply {\r\n                                    putParcelable(KEY_MEDIA_URI, newUri)\r\n                                }, parentFragmentManager)\r\n                            }else if (pictureDescriptionAndCompression == SiteSurveyTypeProgressViewModel.NOT_COMPRESSED){\r\n                                progressDialogMediaCompress?.dismiss()\r\n                                showMediaSizeTooLargeAlert()\r\n                            }\r\n                        }\r\n                    })\r\n    \r\n            }\r\n        } \r\n\r\nAny suggestions will be appreciated, Thank you. ","title":"How to check if a media file is a video and not an image in Android Studio","body":"<p>So I have this comparison window, where the app compares a sample image to a image that was either uploaded or taken by the phones camera. This comparison window also pops up when the user takes or uploads videos. But that's where the issue is. It is only meant to compare images and not videos. Every time I decline a video from matching a sample picture, the app crashes. So the solution would be having the comparison window only pop up when an image is being uploaded and have the videos uploaded without the comparison window.</p>\n<p>So I think the code here controls when the comparison window pops up when the user uploads a video or an image</p>\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n\n        if (mediaLoadManager.isMediaEditRequestCode(requestCode)) {\n            val newUri = mediaLoadManager.handleLoadMediaResult(\n                requestCode, resultCode, data,\n                requireContext().applicationContext\n            ) { tmpMediaInfo -&gt;\n                if (tmpMediaInfo.errorMsg != null) {\n                    processViewModel.updateMediaCount(null)\n                    processViewModel.updateMediaListInfoAfterEditError(tmpMediaInfo.errorMsg)\n                } else {\n                    processViewModel.updateMediaListInfoAfterEdit(tmpMediaInfo)\n                    progressDialogMediaCompress?.show()\n                }\n\n            }\n\n            processViewModel.pictureDescriptionAndCompressionLiveData.observe(viewLifecycleOwner,\n                EventObserver { pictureDescriptionAndCompression -&gt;\n                    // if condition is true, show &quot;showDoesThePictureTakenResemblesTheSample&quot;\n                    if (pictureDescriptionAndCompression != PICTURE_DESCRIPTION_NOT_AVAILABLE) {\n                        if (newUri != null &amp;&amp; pictureDescriptionAndCompression == SiteSurveyTypeProgressViewModel.COMPRESSED) {\n                            progressDialogMediaCompress?.dismiss()\n                            processViewModel.updateMediaCount(newUri)\n                            switchToUI(UiType.COMPARE_MEDIA_DIALOG_FRAGMENT, args = Bundle().apply {\n                                putParcelable(KEY_MEDIA_URI, newUri)\n                            }, parentFragmentManager)\n                        }else if (pictureDescriptionAndCompression == SiteSurveyTypeProgressViewModel.NOT_COMPRESSED){\n                            progressDialogMediaCompress?.dismiss()\n                            showMediaSizeTooLargeAlert()\n                        }\n                    }\n                })\n\n        }\n    } \n</code></pre>\n<p>Any suggestions will be appreciated, Thank you.</p>\n"},{"tags":["java","sftp","filezilla","apache-mina","sshd"],"answers":[{"comments":[{"owner":{"account_id":7587638,"reputation":53,"user_id":5756196,"display_name":"nlsn"},"score":1,"creation_date":1452498204,"post_id":34658783,"comment_id":57178522,"body_markdown":"Thanks for your time. This seems to work out. :) I also reported this to the Apache Mina SSHD project. https://issues.apache.org/jira/browse/SSHD-622","body":"Thanks for your time. This seems to work out. :) I also reported this to the Apache Mina SSHD project. <a href=\"https://issues.apache.org/jira/browse/SSHD-622\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/SSHD-622</a>"},{"owner":{"account_id":10867187,"reputation":217,"user_id":7990195,"accept_rate":0,"display_name":"Bhanu"},"score":0,"creation_date":1579761428,"post_id":34658783,"comment_id":105876047,"body_markdown":"Hi @nlsn, I am trying to achieve the same sort of virtual directory structure but stuck in creating root directory. If you have you working code base, is it ok if you could share it so that i can refer to it. Below is the code which i worked out so far.  https://stackoverflow.com/questions/59822992/creating-a-virtual-file-system-using-virtualfilesystemfactory-and-apache-mina-ss?noredirect=1#comment105817956_59822992","body":"Hi @nlsn, I am trying to achieve the same sort of virtual directory structure but stuck in creating root directory. If you have you working code base, is it ok if you could share it so that i can refer to it. Below is the code which i worked out so far.  <a href=\"https://stackoverflow.com/questions/59822992/creating-a-virtual-file-system-using-virtualfilesystemfactory-and-apache-mina-ss?noredirect=1#comment105817956_59822992\" title=\"creating a virtual file system using virtualfilesystemfactory and apache mina ss\">stackoverflow.com/questions/59822992/&hellip;</a>"}],"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684387308,"creation_date":1452179995,"answer_id":34658783,"question_id":34651653,"body_markdown":"The problem is solved in Apache Mina SSHD 1.1.0, see   \r\n\r\n- https://issues.apache.org/jira/browse/SSHD-622  \r\n- https://github.com/apache/mina-sshd/commit/2bd4f5709b433495d040249dcb83e5025b6c9227\r\n\r\n---\r\n\r\nKeeping the solution for earlier versions:\r\n\r\nThe problem is partly on both sides, the Mina SSHD server and the FileZilla client.\r\n\r\nIn the SFTP version 3 (that FileZilla uses), an entry for each file contains both a structured metadata and a display-only string (aka `longname` field) with a similar format as in the *nix `ls -l` command. That display-only string should not be parsed.\r\n\r\nBut FileZilla does parse it, instead of using the structured metadata (except for a file timestamp). An internal `psftp` process that FileZilla uses to implement the SFTP protocol provides only this information to a parent FileZilla process (an `sftp_cmd_ls` function):\r\n\r\n&lt;!-- language: lang-c --&gt;\r\n\r\n    if (ournames[i]-&gt;attrs.flags &amp; SSH_FILEXFER_ATTR_ACMODTIME) {\r\n   \t\tmtime = ournames[i]-&gt;attrs.mtime;\r\n    }\r\n    fzprintf(sftpListentry, &quot;%lu %s&quot;, mtime, ournames[i]-&gt;longname);\r\n\r\nThe Mina SSHD/SFTP (the `SftpSubsystem` class), when listing the `.` and `..` meta-directories, incorrectly uses a current folder name and a parent folder name in the display-only string, instead of the `.` and `..`. It correctly uses the `.` and `..` in the structured medata (a `shortname` field).\r\n\r\n---\r\n\r\nFileZilla reads the wrong names from the listing and gets confused, treating the entries as actual subdirectory entries, instead of the meta-directories.\r\n\r\nIn the root directory, both the `.` and `..` are probably listed as `/`. The FileZilla trims everything until the last `/`, leading to the empty entry (and the two same-named [empty-named] entries are probably merged into one).\r\n\r\nSo instead of\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    .\r\n    ..\r\n    upload\r\n    download\r\n\r\nthe FileZilla sees\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    / [treated as an empty string]\r\n    / [treated as an empty string and ignored as duplicate]\r\n    upload\r\n    download   \r\n\r\nIn the `upload` directory, the `.` is listed as `upload` and the `..` as `/` (leading to the empty entry).\r\n\r\nSo instead of\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    .\r\n    ..\r\n\r\nthe FileZilla sees\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    upload\r\n    / [treated as an empty string]\r\n\r\n---\r\n\r\nWinSCP, on the contrary, never uses the display-only string to resolve the file/directory name. And mainly (if the server supports that, what Mina SSHD does) uses the SFTP version 4, that does not even include the display-only string.\r\n\r\n---\r\n\r\nTo fix the problem, you need pass a `shortName` parameter of `SftpSubsystem.writeDirEntry` method to the called `.getLongName` method. And modify the `.getLongName` to use `shortName` in the string it returns instead of `getShortName(f)`.\r\n\r\nSee below a modified code of `SftpSubsystem` with comments describing the changes. The code is from Mina SSHD version 1.0\r\n\r\n    protected void writeDirEntry(int id, DirectoryHandle dir, Buffer buffer, int index, Path f, String shortName, LinkOption... options) throws IOException {\r\n       ...\r\n        if (version == SFTP_V3) {\r\n            // added shortName argument\r\n            String longName = getLongName(f, options, shortName);\r\n        } else {\r\n        ...\r\n    }\r\n\r\n    // added shortName parameter\r\n    protected String getLongName(Path f, LinkOption... options, String shortName) throws IOException {\r\n        // added shortName argument\r\n        return getLongName(f, true, options, shortName);\r\n    }\r\n\r\n    // added shortName parameter\r\n    private String getLongName(Path f, boolean sendAttrs, LinkOption... options, String shortName) throws IOException {\r\n        ...\r\n        // added shortName argument\r\n        return getLongName(f, attributes, shortName);\r\n    }\r\n\r\n    // added shortName parameter\r\n    private String getLongName(Path f, Map&lt;String, ?&gt; attributes, String shortName) throws IOException {\r\n        ...\r\n        return (SftpHelper.getBool(isDirectory) ? &quot;d&quot; : (SftpHelper.getBool(isLink) ? &quot;l&quot; : &quot;-&quot;))\r\n                + PosixFilePermissions.toString(perms) + &quot;  &quot;\r\n                + (attributes.containsKey(&quot;nlink&quot;) ? attributes.get(&quot;nlink&quot;) : &quot;1&quot;)\r\n                + &quot; &quot; + username + &quot; &quot; + group + &quot; &quot; + lengthString + &quot; &quot;\r\n                + UnixDateFormat.getUnixDate((FileTime) attributes.get(&quot;lastModifiedTime&quot;))\r\n                // using shortName instead of getShortName(f) \r\n                + &quot; &quot; + shortName;\r\n    }\r\n\r\n    // + you need to modify sendPath to pass getShortName(f) \r\n    //   to its call to getLongName\r\n\r\n*I do not do Java, so excuse any broken code.*\r\n\r\n---\r\n\r\nConsider reporting the bug to the Mina SSHD project. Link the issue here, if you do.","title":"Apache Mina SSHD - FileZilla shows wrong directory structure","body":"<p>The problem is solved in Apache Mina SSHD 1.1.0, see</p>\n<ul>\n<li><a href=\"https://issues.apache.org/jira/browse/SSHD-622\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/SSHD-622</a></li>\n<li><a href=\"https://github.com/apache/mina-sshd/commit/2bd4f5709b433495d040249dcb83e5025b6c9227\" rel=\"nofollow noreferrer\">https://github.com/apache/mina-sshd/commit/2bd4f5709b433495d040249dcb83e5025b6c9227</a></li>\n</ul>\n<hr />\n<p>Keeping the solution for earlier versions:</p>\n<p>The problem is partly on both sides, the Mina SSHD server and the FileZilla client.</p>\n<p>In the SFTP version 3 (that FileZilla uses), an entry for each file contains both a structured metadata and a display-only string (aka <code>longname</code> field) with a similar format as in the *nix <code>ls -l</code> command. That display-only string should not be parsed.</p>\n<p>But FileZilla does parse it, instead of using the structured metadata (except for a file timestamp). An internal <code>psftp</code> process that FileZilla uses to implement the SFTP protocol provides only this information to a parent FileZilla process (an <code>sftp_cmd_ls</code> function):</p>\n<pre class=\"lang-c prettyprint-override\"><code>if (ournames[i]-&gt;attrs.flags &amp; SSH_FILEXFER_ATTR_ACMODTIME) {\n    mtime = ournames[i]-&gt;attrs.mtime;\n}\nfzprintf(sftpListentry, &quot;%lu %s&quot;, mtime, ournames[i]-&gt;longname);\n</code></pre>\n<p>The Mina SSHD/SFTP (the <code>SftpSubsystem</code> class), when listing the <code>.</code> and <code>..</code> meta-directories, incorrectly uses a current folder name and a parent folder name in the display-only string, instead of the <code>.</code> and <code>..</code>. It correctly uses the <code>.</code> and <code>..</code> in the structured medata (a <code>shortname</code> field).</p>\n<hr />\n<p>FileZilla reads the wrong names from the listing and gets confused, treating the entries as actual subdirectory entries, instead of the meta-directories.</p>\n<p>In the root directory, both the <code>.</code> and <code>..</code> are probably listed as <code>/</code>. The FileZilla trims everything until the last <code>/</code>, leading to the empty entry (and the two same-named [empty-named] entries are probably merged into one).</p>\n<p>So instead of</p>\n<pre class=\"lang-none prettyprint-override\"><code>.\n..\nupload\ndownload\n</code></pre>\n<p>the FileZilla sees</p>\n<pre class=\"lang-none prettyprint-override\"><code>/ [treated as an empty string]\n/ [treated as an empty string and ignored as duplicate]\nupload\ndownload   \n</code></pre>\n<p>In the <code>upload</code> directory, the <code>.</code> is listed as <code>upload</code> and the <code>..</code> as <code>/</code> (leading to the empty entry).</p>\n<p>So instead of</p>\n<pre class=\"lang-none prettyprint-override\"><code>.\n..\n</code></pre>\n<p>the FileZilla sees</p>\n<pre class=\"lang-none prettyprint-override\"><code>upload\n/ [treated as an empty string]\n</code></pre>\n<hr />\n<p>WinSCP, on the contrary, never uses the display-only string to resolve the file/directory name. And mainly (if the server supports that, what Mina SSHD does) uses the SFTP version 4, that does not even include the display-only string.</p>\n<hr />\n<p>To fix the problem, you need pass a <code>shortName</code> parameter of <code>SftpSubsystem.writeDirEntry</code> method to the called <code>.getLongName</code> method. And modify the <code>.getLongName</code> to use <code>shortName</code> in the string it returns instead of <code>getShortName(f)</code>.</p>\n<p>See below a modified code of <code>SftpSubsystem</code> with comments describing the changes. The code is from Mina SSHD version 1.0</p>\n<pre><code>protected void writeDirEntry(int id, DirectoryHandle dir, Buffer buffer, int index, Path f, String shortName, LinkOption... options) throws IOException {\n   ...\n    if (version == SFTP_V3) {\n        // added shortName argument\n        String longName = getLongName(f, options, shortName);\n    } else {\n    ...\n}\n\n// added shortName parameter\nprotected String getLongName(Path f, LinkOption... options, String shortName) throws IOException {\n    // added shortName argument\n    return getLongName(f, true, options, shortName);\n}\n\n// added shortName parameter\nprivate String getLongName(Path f, boolean sendAttrs, LinkOption... options, String shortName) throws IOException {\n    ...\n    // added shortName argument\n    return getLongName(f, attributes, shortName);\n}\n\n// added shortName parameter\nprivate String getLongName(Path f, Map&lt;String, ?&gt; attributes, String shortName) throws IOException {\n    ...\n    return (SftpHelper.getBool(isDirectory) ? &quot;d&quot; : (SftpHelper.getBool(isLink) ? &quot;l&quot; : &quot;-&quot;))\n            + PosixFilePermissions.toString(perms) + &quot;  &quot;\n            + (attributes.containsKey(&quot;nlink&quot;) ? attributes.get(&quot;nlink&quot;) : &quot;1&quot;)\n            + &quot; &quot; + username + &quot; &quot; + group + &quot; &quot; + lengthString + &quot; &quot;\n            + UnixDateFormat.getUnixDate((FileTime) attributes.get(&quot;lastModifiedTime&quot;))\n            // using shortName instead of getShortName(f) \n            + &quot; &quot; + shortName;\n}\n\n// + you need to modify sendPath to pass getShortName(f) \n//   to its call to getLongName\n</code></pre>\n<p><em>I do not do Java, so excuse any broken code.</em></p>\n<hr />\n<p>Consider reporting the bug to the Mina SSHD project. Link the issue here, if you do.</p>\n"}],"owner":{"account_id":7587638,"reputation":53,"user_id":5756196,"display_name":"nlsn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1163,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":34658783,"answer_count":1,"score":3,"last_activity_date":1684387308,"creation_date":1452159242,"question_id":34651653,"body_markdown":"I set up an SSH Server as an SFTP Server with Apache Mina SSHD. I implemented my own `FileSystemFactory`, so that specific directories are created for the user that logs in. When I open a connection to the server with FileZilla, the directory structure is displayed wrong.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn the root directory view, an empty folder is displayed. This one does not exist. There should only be two directories. &quot;Upload&quot; and &quot;Download&quot;.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhen I open the upload directory, I once again see an empty directory which should not be shown because it does not exist. Furthermore, another upload directory is shown. I can&#39;t open it, because it says /upload/upload does not exist, which is true, but I can&#39;t figure out why it is shown.\r\n\r\nWhen I connect with WinSCP, I don&#39;t get this display error. Does anyone know why it happens or how to solve it?\r\n\r\nEDIT:\r\n\r\n`FileSystemFactory` implementation: \r\n\r\n    public class CustomFileSystemFactory implements FileSystemFactory {\r\n      private String defaultHomeDir;\r\n      private FileSystem fileSystem;\r\n    \r\n      public CustomFileSystemFactory(String defaultHomeDir){\r\n        this.defaultHomeDir = defaultHomeDir;\r\n      }\r\n    \r\n      public String getDefaultHome(){\r\n        return defaultHomeDir;\r\n      }\r\n    \r\n      public FileSystem getFileSystem(){\r\n        return fileSystem;\r\n      }\r\n    \r\n      @Override\r\n      public FileSystem createFileSystem(Session session) throws IOException {\r\n        Path dir = computeRootDir(session.getUsername());\r\n        if (dir == null) {\r\n          throw new InvalidPathException(session.getUsername(), &quot;Cannot resolve home directory&quot;);\r\n        }\r\n    \r\n        if(!Files.exists(dir)){\r\n          Files.createDirectory(dir);\r\n        }\r\n        setupFolders(session.getUsername());\r\n        FileSystem fileSystem = new RootedFileSystemProvider().newFileSystem(dir, Collections.emptyMap());\r\n        return fileSystem;\r\n      }\r\n    \r\n      protected Path computeRootDir(String username){\r\n        Path path = Paths.get(defaultHomeDir + Utils.getPrincipalExtId(username) + &quot;/&quot;);\r\n        return path;\r\n      }\r\n    \r\n      protected void setupFolders(String username) throws IOException {\r\n        Path homeDir = computeRootDir(username);\r\n        File uploadFolder = new File(homeDir + &quot;/upload/&quot;);\r\n        File downloadFolder = new File(homeDir + &quot;/download/&quot;);\r\n        if(!uploadFolder.exists()){\r\n          uploadFolder.mkdirs();\r\n        }\r\n        if(!downloadFolder.exists()){\r\n          downloadFolder.mkdirs();\r\n        }\r\n      }\r\n    }\r\n\r\nThis is the WinSCP Log on Debug Level 2:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    . 2016-01-07 14:46:46.909 Listing directory &quot;/&quot;.\r\n    &gt; 2016-01-07 14:46:46.909 Type: SSH_FXP_OPENDIR, Size: 10, Number: 4107\r\n    &gt; 2016-01-07 14:46:46.909 0B,00,00,10,0B,00,00,00,01,2F,\r\n    . 2016-01-07 14:46:46.909 Sent 14 bytes\r\n    . 2016-01-07 14:46:46.909 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:46.909 Looking for network events\r\n    . 2016-01-07 14:46:46.909 Timeout waiting for network events\r\n    . 2016-01-07 14:46:46.909 Waiting for another 4 bytes\r\n    . 2016-01-07 14:46:46.909 Looking for incoming data\r\n    . 2016-01-07 14:46:46.909 Looking for network events\r\n    . 2016-01-07 14:46:46.913 Detected network event\r\n    . 2016-01-07 14:46:46.913 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:46.913 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:46.913 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:46.913 Received 45 bytes (0)\r\n    . 2016-01-07 14:46:46.913 Read 4 bytes (41 pending)\r\n    . 2016-01-07 14:46:46.913 Read 41 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:46.913 Type: SSH_FXP_HANDLE, Size: 41, Number: 4107\r\n    &lt; 2016-01-07 14:46:46.913 66,00,00,10,0B,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\r\n    &lt; 2016-01-07 14:46:46.913 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\r\n    &gt; 2016-01-07 14:46:46.913 Type: SSH_FXP_READDIR, Size: 41, Number: 4364\r\n    &gt; 2016-01-07 14:46:46.913 0C,00,00,11,0C,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\r\n    &gt; 2016-01-07 14:46:46.913 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\r\n    . 2016-01-07 14:46:46.913 Sent 45 bytes\r\n    . 2016-01-07 14:46:46.914 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:46.914 Looking for network events\r\n    . 2016-01-07 14:46:46.914 Timeout waiting for network events\r\n    . 2016-01-07 14:46:46.914 Waiting for another 4 bytes\r\n    . 2016-01-07 14:46:46.914 Looking for incoming data\r\n    . 2016-01-07 14:46:46.914 Looking for network events\r\n    . 2016-01-07 14:46:46.924 Detected network event\r\n    . 2016-01-07 14:46:46.924 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:46.924 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:46.924 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:46.925 Received 1113 bytes (0)\r\n    . 2016-01-07 14:46:46.925 Read 4 bytes (1109 pending)\r\n    . 2016-01-07 14:46:46.925 Read 1109 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:46.925 Type: SSH_FXP_NAME, Size: 1109, Number: 4364\r\n    &lt; 2016-01-07 14:46:46.925 68,00,00,11,0C,00,00,00,03,00,00,00,01,2E,00,00,00,7C,02,00,00,41,B6,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,01,\r\n    &lt; 2016-01-07 14:46:46.925 37,00,00,00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,\r\n    &lt; 2016-01-07 14:46:46.925 45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,\r\n    &lt; 2016-01-07 14:46:46.925 52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,\r\n    &lt; 2016-01-07 14:46:46.925 53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,\r\n    &lt; 2016-01-07 14:46:46.925 54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,03,00,12,\r\n    &lt; 2016-01-07 14:46:46.925 00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,\r\n    &lt; 2016-01-07 14:46:46.925 65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,\r\n    &lt; 2016-01-07 14:46:46.925 52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,\r\n    &lt; 2016-01-07 14:46:46.925 65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,\r\n    &lt; 2016-01-07 14:46:46.925 2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,\r\n    &lt; 2016-01-07 14:46:46.925 72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,08,64,6F,77,6E,6C,6F,61,64,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,7C,02,00,00,41,B6,00,00,00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,00,56,8E,52,55,00,00,01,54,00,00,00,08,00,00,00,00,00,00,00,03,00,1F,\r\n    &lt; 2016-01-07 14:46:46.925 01,FF,00,00,00,0D,44,55,53,5C,6E,6D,65,63,6B,6D,61,6E,6E,00,00,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,\r\n    &lt; 2016-01-07 14:46:46.925 6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,\r\n    &lt; 2016-01-07 14:46:46.925 72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,\r\n    &lt; 2016-01-07 14:46:46.925 2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,\r\n    &lt; 2016-01-07 14:46:46.925 53,54,45,4D,00,00,00,00,00,00,00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,\r\n    &lt; 2016-01-07 14:46:46.925 46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,\r\n    &lt; 2016-01-07 14:46:46.925 65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,\r\n    &lt; 2016-01-07 14:46:46.925 5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,\r\n    &lt; 2016-01-07 14:46:46.925 72,00,00,00,06,75,70,6C,6F,61,64,00,00,00,7C,02,00,00,41,B6,00,00,00,00,56,\r\n    &lt; 2016-01-07 14:46:46.925 8E,51,ED,00,00,00,00,56,8E,51,ED,00,00,00,00,56,8E,51,ED,00,00,01,37,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,45,46,49,\r\n    &lt; 2016-01-07 14:46:46.925 4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,\r\n    &lt; 2016-01-07 14:46:46.925 41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,00,00,1F,\r\n    &lt; 2016-01-07 14:46:46.925 01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,\r\n    &lt; 2016-01-07 14:46:46.925 4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,54,4F,52,\r\n    &lt; 2016-01-07 14:46:46.925 49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,03,00,12,00,A9,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,65,72,00,\r\n    &lt; 2016-01-07 14:46:46.925 00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,\r\n    &lt; 2016-01-07 14:46:46.925 C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,\r\n    &lt; 2016-01-07 14:46:46.925 74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,2D,41,55,\r\n    &lt; 2016-01-07 14:46:46.926 54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,\r\n    &lt; 2016-01-07 14:46:46.926 20,42,65,6E,75,74,7A,65,72,\r\n    &gt; 2016-01-07 14:46:46.926 Type: SSH_FXP_READDIR, Size: 41, Number: 4620\r\n    &gt; 2016-01-07 14:46:46.926 0C,00,00,12,0C,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\r\n    &gt; 2016-01-07 14:46:46.926 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\r\n    . 2016-01-07 14:46:46.926 Sent 45 bytes\r\n    . 2016-01-07 14:46:46.926 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:46.926 Looking for network events\r\n    . 2016-01-07 14:46:46.926 Timeout waiting for network events\r\n    . 2016-01-07 14:46:46.926 Read file &#39;.&#39; from listing\r\n    . 2016-01-07 14:46:46.926 Read file &#39;download&#39; from listing\r\n    . 2016-01-07 14:46:46.926 Read file &#39;upload&#39; from listing\r\n    . 2016-01-07 14:46:46.926 Waiting for another 4 bytes\r\n    . 2016-01-07 14:46:46.926 Looking for incoming data\r\n    . 2016-01-07 14:46:46.926 Looking for network events\r\n    . 2016-01-07 14:46:46.926 Detected network event\r\n    . 2016-01-07 14:46:46.926 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:46.926 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:46.926 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:46.926 Received 46 bytes (0)\r\n    . 2016-01-07 14:46:46.926 Read 4 bytes (42 pending)\r\n    . 2016-01-07 14:46:46.926 Read 42 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:46.926 Type: SSH_FXP_STATUS, Size: 42, Number: 4620\r\n    &lt; 2016-01-07 14:46:46.926 65,00,00,12,0C,00,00,00,01,00,00,00,19,44,69,72,65,63,74,6F,72,79,20,72,65,\r\n    &lt; 2016-01-07 14:46:46.926 61,64,69,6E,67,20,69,73,20,64,6F,6E,65,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:46.926 Status code: 1\r\n    &gt; 2016-01-07 14:46:46.926 Type: SSH_FXP_CLOSE, Size: 41, Number: 4868\r\n    &gt; 2016-01-07 14:46:46.926 04,00,00,13,04,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\r\n    &gt; 2016-01-07 14:46:46.926 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\r\n    . 2016-01-07 14:46:46.926 Sent 45 bytes\r\n    . 2016-01-07 14:46:46.926 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:46.926 Looking for network events\r\n    . 2016-01-07 14:46:46.926 Timeout waiting for network events\r\n    . 2016-01-07 14:46:46.927 download;D;0;2016-01-07T11:56:05.000Z;&quot;&quot; [0];&quot;&quot; [0];rw-rw-rw-;1\r\n    . 2016-01-07 14:46:46.927 upload;D;0;2016-01-07T11:54:21.000Z;&quot;&quot; [0];&quot;&quot; [0];rw-rw-rw-;1\r\n    . 2016-01-07 14:46:47.009 Startup conversation with host finished.\r\n    . 2016-01-07 14:46:47.122 Session upkeep\r\n    . 2016-01-07 14:46:47.122 Looking for network events\r\n    . 2016-01-07 14:46:47.122 Detected network event\r\n    . 2016-01-07 14:46:47.122 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:47.122 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:47.122 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:47.122 Received 21 bytes (0)\r\n    . 2016-01-07 14:46:47.124 Session upkeep\r\n    . 2016-01-07 14:46:47.124 Looking for network events\r\n    . 2016-01-07 14:46:47.124 Timeout waiting for network events\r\n    . 2016-01-07 14:46:47.257 Session upkeep\r\n    . 2016-01-07 14:46:47.257 Looking for network events\r\n    . 2016-01-07 14:46:47.257 Timeout waiting for network events\r\n    . 2016-01-07 14:46:47.768 Session upkeep\r\n    . 2016-01-07 14:46:47.768 Looking for network events\r\n    . 2016-01-07 14:46:47.768 Timeout waiting for network events\r\n    . 2016-01-07 14:46:48.267 Session upkeep\r\n    . 2016-01-07 14:46:48.267 Looking for network events\r\n    . 2016-01-07 14:46:48.267 Timeout waiting for network events\r\n    . 2016-01-07 14:46:48.781 Session upkeep\r\n    . 2016-01-07 14:46:48.782 Looking for network events\r\n    . 2016-01-07 14:46:48.782 Timeout waiting for network events\r\n    . 2016-01-07 14:46:48.832 Cached directory change via &quot;download&quot; to &quot;/download&quot;.\r\n    . 2016-01-07 14:46:48.832 Getting current directory name.\r\n    . 2016-01-07 14:46:48.832 Listing directory &quot;/download&quot;.\r\n    &gt; 2016-01-07 14:46:48.832 Type: SSH_FXP_OPENDIR, Size: 18, Number: 5131\r\n    &gt; 2016-01-07 14:46:48.832 0B,00,00,14,0B,00,00,00,09,2F,64,6F,77,6E,6C,6F,61,64,\r\n    . 2016-01-07 14:46:48.832 Sent 22 bytes\r\n    . 2016-01-07 14:46:48.832 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:48.832 Looking for network events\r\n    . 2016-01-07 14:46:48.834 Timeout waiting for network events\r\n    . 2016-01-07 14:46:48.834 Read 4 bytes (17 pending)\r\n    . 2016-01-07 14:46:48.834 Read 17 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:48.834 Type: SSH_FXP_STATUS, Size: 17, Number: 4868\r\n    &lt; 2016-01-07 14:46:48.834 65,00,00,13,04,00,00,00,00,00,00,00,00,00,00,00,00,\r\n    . 2016-01-07 14:46:48.834 Discarding reserved response\r\n    . 2016-01-07 14:46:48.834 Waiting for another 4 bytes\r\n    . 2016-01-07 14:46:48.834 Looking for incoming data\r\n    . 2016-01-07 14:46:48.834 Looking for network events\r\n    . 2016-01-07 14:46:48.834 Detected network event\r\n    . 2016-01-07 14:46:48.834 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:48.834 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:48.834 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:48.834 Received 45 bytes (0)\r\n    . 2016-01-07 14:46:48.834 Read 4 bytes (41 pending)\r\n    . 2016-01-07 14:46:48.834 Read 41 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:48.834 Type: SSH_FXP_HANDLE, Size: 41, Number: 5131\r\n    &lt; 2016-01-07 14:46:48.834 66,00,00,14,0B,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\r\n    &lt; 2016-01-07 14:46:48.834 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\r\n    &gt; 2016-01-07 14:46:48.834 Type: SSH_FXP_READDIR, Size: 41, Number: 5388\r\n    &gt; 2016-01-07 14:46:48.834 0C,00,00,15,0C,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\r\n    &gt; 2016-01-07 14:46:48.834 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\r\n    . 2016-01-07 14:46:48.835 Sent 45 bytes\r\n    . 2016-01-07 14:46:48.835 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:48.835 Looking for network events\r\n    . 2016-01-07 14:46:48.835 Timeout waiting for network events\r\n    . 2016-01-07 14:46:48.835 Waiting for another 4 bytes\r\n    . 2016-01-07 14:46:48.835 Looking for incoming data\r\n    . 2016-01-07 14:46:48.835 Looking for network events\r\n    . 2016-01-07 14:46:48.840 Detected network event\r\n    . 2016-01-07 14:46:48.840 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:48.840 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:48.840 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:48.840 Received 749 bytes (0)\r\n    . 2016-01-07 14:46:48.840 Read 4 bytes (745 pending)\r\n    . 2016-01-07 14:46:48.840 Read 745 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:48.840 Type: SSH_FXP_NAME, Size: 745, Number: 5388\r\n    &lt; 2016-01-07 14:46:48.840 68,00,00,15,0C,00,00,00,02,00,00,00,01,2E,00,00,00,7C,02,00,00,41,B6,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,00,01,\r\n    &lt; 2016-01-07 14:46:48.840 54,00,00,00,08,00,00,00,00,00,00,00,03,00,1F,01,FF,00,00,00,0D,44,55,53,5C,\r\n    &lt; 2016-01-07 14:46:48.840 6E,6D,65,63,6B,6D,61,6E,6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,\r\n    &lt; 2016-01-07 14:46:48.840 56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,\r\n    &lt; 2016-01-07 14:46:48.840 72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,\r\n    &lt; 2016-01-07 14:46:48.840 49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,\r\n    &lt; 2016-01-07 14:46:48.840 54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,\r\n    &lt; 2016-01-07 14:46:48.840 54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,\r\n    &lt; 2016-01-07 14:46:48.840 6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,\r\n    &lt; 2016-01-07 14:46:48.840 41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,\r\n    &lt; 2016-01-07 14:46:48.840 74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,\r\n    &lt; 2016-01-07 14:46:48.840 69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,02,2E,2E,00,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 7C,02,00,00,41,B6,00,00,00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 00,56,79,11,96,00,00,01,37,00,00,00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,\r\n    &lt; 2016-01-07 14:46:48.840 00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,\r\n    &lt; 2016-01-07 14:46:48.840 72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,\r\n    &lt; 2016-01-07 14:46:48.840 52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,\r\n    &lt; 2016-01-07 14:46:48.840 6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,\r\n    &lt; 2016-01-07 14:46:48.840 49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 00,00,00,00,00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,\r\n    &lt; 2016-01-07 14:46:48.840 54,5C,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,\r\n    &lt; 2016-01-07 14:46:48.840 27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,\r\n    &lt; 2016-01-07 14:46:48.840 7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,\r\n    &lt; 2016-01-07 14:46:48.840 00,00,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,\r\n    &lt; 2016-01-07 14:46:48.841 6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,\r\n    &gt; 2016-01-07 14:46:48.841 Type: SSH_FXP_READDIR, Size: 41, Number: 5644\r\n    &gt; 2016-01-07 14:46:48.841 0C,00,00,16,0C,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\r\n    &gt; 2016-01-07 14:46:48.841 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\r\n    . 2016-01-07 14:46:48.841 Sent 45 bytes\r\n    . 2016-01-07 14:46:48.841 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:48.841 Looking for network events\r\n    . 2016-01-07 14:46:48.841 Timeout waiting for network events\r\n    . 2016-01-07 14:46:48.841 Read file &#39;.&#39; from listing\r\n    . 2016-01-07 14:46:48.841 Read file &#39;..&#39; from listing\r\n    . 2016-01-07 14:46:48.841 Waiting for another 4 bytes\r\n    . 2016-01-07 14:46:48.841 Looking for incoming data\r\n    . 2016-01-07 14:46:48.841 Looking for network events\r\n    . 2016-01-07 14:46:48.841 Detected network event\r\n    . 2016-01-07 14:46:48.841 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:48.841 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:48.841 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:48.841 Received 46 bytes (0)\r\n    . 2016-01-07 14:46:48.841 Read 4 bytes (42 pending)\r\n    . 2016-01-07 14:46:48.841 Read 42 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:48.841 Type: SSH_FXP_STATUS, Size: 42, Number: 5644\r\n    &lt; 2016-01-07 14:46:48.841 65,00,00,16,0C,00,00,00,01,00,00,00,19,44,69,72,65,63,74,6F,72,79,20,72,65,\r\n    &lt; 2016-01-07 14:46:48.841 61,64,69,6E,67,20,69,73,20,64,6F,6E,65,00,00,00,00,\r\n    &lt; 2016-01-07 14:46:48.842 Status code: 1\r\n    &gt; 2016-01-07 14:46:48.842 Type: SSH_FXP_CLOSE, Size: 41, Number: 5892\r\n    &gt; 2016-01-07 14:46:48.842 04,00,00,17,04,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\r\n    &gt; 2016-01-07 14:46:48.842 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\r\n    . 2016-01-07 14:46:48.842 Sent 45 bytes\r\n    . 2016-01-07 14:46:48.842 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:48.842 Looking for network events\r\n    . 2016-01-07 14:46:48.842 Timeout waiting for network events\r\n    . 2016-01-07 14:46:48.842 ..;D;0;2015-12-22T09:02:14.000Z;&quot;&quot; [0];&quot;&quot; [0];rw-rw-rw-;1\r\n    . 2016-01-07 14:46:49.283 Session upkeep\r\n    . 2016-01-07 14:46:49.283 Looking for network events\r\n    . 2016-01-07 14:46:49.283 Detected network event\r\n    . 2016-01-07 14:46:49.283 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:49.283 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:49.283 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:49.283 Received 21 bytes (0)\r\n    . 2016-01-07 14:46:49.472 Cached directory change via &quot;..&quot; to &quot;/&quot;.\r\n    . 2016-01-07 14:46:49.472 Getting current directory name.\r\n    . 2016-01-07 14:46:49.473 Directory content loaded from cache.\r\n    . 2016-01-07 14:46:49.795 Session upkeep\r\n    . 2016-01-07 14:46:49.795 Looking for network events\r\n    . 2016-01-07 14:46:49.795 Timeout waiting for network events\r\n    . 2016-01-07 14:46:49.880 Cached directory change via &quot;upload&quot; to &quot;/upload&quot;.\r\n    . 2016-01-07 14:46:49.880 Getting current directory name.\r\n    . 2016-01-07 14:46:49.881 Listing directory &quot;/upload&quot;.\r\n    &gt; 2016-01-07 14:46:49.881 Type: SSH_FXP_OPENDIR, Size: 16, Number: 6155\r\n    &gt; 2016-01-07 14:46:49.881 0B,00,00,18,0B,00,00,00,07,2F,75,70,6C,6F,61,64,\r\n    . 2016-01-07 14:46:49.881 Sent 20 bytes\r\n    . 2016-01-07 14:46:49.881 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:49.881 Looking for network events\r\n    . 2016-01-07 14:46:49.882 Timeout waiting for network events\r\n    . 2016-01-07 14:46:49.882 Read 4 bytes (17 pending)\r\n    . 2016-01-07 14:46:49.882 Read 17 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:49.882 Type: SSH_FXP_STATUS, Size: 17, Number: 5892\r\n    &lt; 2016-01-07 14:46:49.882 65,00,00,17,04,00,00,00,00,00,00,00,00,00,00,00,00,\r\n    . 2016-01-07 14:46:49.882 Discarding reserved response\r\n    . 2016-01-07 14:46:49.882 Waiting for another 4 bytes\r\n    . 2016-01-07 14:46:49.882 Looking for incoming data\r\n    . 2016-01-07 14:46:49.882 Looking for network events\r\n    . 2016-01-07 14:46:49.882 Detected network event\r\n    . 2016-01-07 14:46:49.882 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:49.883 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:49.883 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:49.883 Received 45 bytes (0)\r\n    . 2016-01-07 14:46:49.883 Read 4 bytes (41 pending)\r\n    . 2016-01-07 14:46:49.883 Read 41 bytes (0 pending)\r\n    &lt; 2016-01-07 14:46:49.883 Type: SSH_FXP_HANDLE, Size: 41, Number: 6155\r\n    &lt; 2016-01-07 14:46:49.883 66,00,00,18,0B,00,00,00,20,30,38,61,36,35,34,38,66,61,36,39,63,66,31,64,37,\r\n    &lt; 2016-01-07 14:46:49.883 65,31,33,34,32,33,63,32,61,30,32,30,35,33,63,37,\r\n    &gt; 2016-01-07 14:46:49.883 Type: SSH_FXP_READDIR, Size: 41, Number: 6412\r\n    &gt; 2016-01-07 14:46:49.883 0C,00,00,19,0C,00,00,00,20,30,38,61,36,35,34,38,66,61,36,39,63,66,31,64,37,\r\n    &gt; 2016-01-07 14:46:49.883 65,31,33,34,32,33,63,32,61,30,32,30,35,33,63,37,\r\n    . 2016-01-07 14:46:49.883 Sent 45 bytes\r\n    . 2016-01-07 14:46:49.883 There are 0 bytes remaining in the send buffer\r\n    . 2016-01-07 14:46:49.883 Looking for network events\r\n    . 2016-01-07 14:46:49.883 Timeout waiting for network events\r\n    . 2016-01-07 14:46:49.883 Waiting for another 4 bytes\r\n    . 2016-01-07 14:46:49.883 Looking for incoming data\r\n    . 2016-01-07 14:46:49.883 Looking for network events\r\n    . 2016-01-07 14:46:49.889 Detected network event\r\n    . 2016-01-07 14:46:49.890 Enumerating network events for socket 1084\r\n    . 2016-01-07 14:46:49.890 Enumerated 1 network events making 1 cumulative events for socket 1084\r\n    . 2016-01-07 14:46:49.890 Handling network read event on socket 1084 with error 0\r\n    . 2016-01-07 14:46:49.890 Received 720 bytes (0)\r\n    . 2016-01-07 14:46:49.890 Read 4 bytes (716 pending)\r\n    . 2016-01-07 14:46:49.890 Read 716 bytes (0 pending)\r\n\r\nGreetings\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/YWFrR.png\r\n  [2]: http://i.stack.imgur.com/USS9N.png","title":"Apache Mina SSHD - FileZilla shows wrong directory structure","body":"<p>I set up an SSH Server as an SFTP Server with Apache Mina SSHD. I implemented my own <code>FileSystemFactory</code>, so that specific directories are created for the user that logs in. When I open a connection to the server with FileZilla, the directory structure is displayed wrong.</p>\n\n<p><a href=\"https://i.stack.imgur.com/YWFrR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YWFrR.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the root directory view, an empty folder is displayed. This one does not exist. There should only be two directories. \"Upload\" and \"Download\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/USS9N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/USS9N.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I open the upload directory, I once again see an empty directory which should not be shown because it does not exist. Furthermore, another upload directory is shown. I can't open it, because it says /upload/upload does not exist, which is true, but I can't figure out why it is shown.</p>\n\n<p>When I connect with WinSCP, I don't get this display error. Does anyone know why it happens or how to solve it?</p>\n\n<p>EDIT:</p>\n\n<p><code>FileSystemFactory</code> implementation: </p>\n\n<pre><code>public class CustomFileSystemFactory implements FileSystemFactory {\n  private String defaultHomeDir;\n  private FileSystem fileSystem;\n\n  public CustomFileSystemFactory(String defaultHomeDir){\n    this.defaultHomeDir = defaultHomeDir;\n  }\n\n  public String getDefaultHome(){\n    return defaultHomeDir;\n  }\n\n  public FileSystem getFileSystem(){\n    return fileSystem;\n  }\n\n  @Override\n  public FileSystem createFileSystem(Session session) throws IOException {\n    Path dir = computeRootDir(session.getUsername());\n    if (dir == null) {\n      throw new InvalidPathException(session.getUsername(), \"Cannot resolve home directory\");\n    }\n\n    if(!Files.exists(dir)){\n      Files.createDirectory(dir);\n    }\n    setupFolders(session.getUsername());\n    FileSystem fileSystem = new RootedFileSystemProvider().newFileSystem(dir, Collections.emptyMap());\n    return fileSystem;\n  }\n\n  protected Path computeRootDir(String username){\n    Path path = Paths.get(defaultHomeDir + Utils.getPrincipalExtId(username) + \"/\");\n    return path;\n  }\n\n  protected void setupFolders(String username) throws IOException {\n    Path homeDir = computeRootDir(username);\n    File uploadFolder = new File(homeDir + \"/upload/\");\n    File downloadFolder = new File(homeDir + \"/download/\");\n    if(!uploadFolder.exists()){\n      uploadFolder.mkdirs();\n    }\n    if(!downloadFolder.exists()){\n      downloadFolder.mkdirs();\n    }\n  }\n}\n</code></pre>\n\n<p>This is the WinSCP Log on Debug Level 2:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>. 2016-01-07 14:46:46.909 Listing directory \"/\".\n&gt; 2016-01-07 14:46:46.909 Type: SSH_FXP_OPENDIR, Size: 10, Number: 4107\n&gt; 2016-01-07 14:46:46.909 0B,00,00,10,0B,00,00,00,01,2F,\n. 2016-01-07 14:46:46.909 Sent 14 bytes\n. 2016-01-07 14:46:46.909 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:46.909 Looking for network events\n. 2016-01-07 14:46:46.909 Timeout waiting for network events\n. 2016-01-07 14:46:46.909 Waiting for another 4 bytes\n. 2016-01-07 14:46:46.909 Looking for incoming data\n. 2016-01-07 14:46:46.909 Looking for network events\n. 2016-01-07 14:46:46.913 Detected network event\n. 2016-01-07 14:46:46.913 Enumerating network events for socket 1084\n. 2016-01-07 14:46:46.913 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:46.913 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:46.913 Received 45 bytes (0)\n. 2016-01-07 14:46:46.913 Read 4 bytes (41 pending)\n. 2016-01-07 14:46:46.913 Read 41 bytes (0 pending)\n&lt; 2016-01-07 14:46:46.913 Type: SSH_FXP_HANDLE, Size: 41, Number: 4107\n&lt; 2016-01-07 14:46:46.913 66,00,00,10,0B,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\n&lt; 2016-01-07 14:46:46.913 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\n&gt; 2016-01-07 14:46:46.913 Type: SSH_FXP_READDIR, Size: 41, Number: 4364\n&gt; 2016-01-07 14:46:46.913 0C,00,00,11,0C,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\n&gt; 2016-01-07 14:46:46.913 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\n. 2016-01-07 14:46:46.913 Sent 45 bytes\n. 2016-01-07 14:46:46.914 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:46.914 Looking for network events\n. 2016-01-07 14:46:46.914 Timeout waiting for network events\n. 2016-01-07 14:46:46.914 Waiting for another 4 bytes\n. 2016-01-07 14:46:46.914 Looking for incoming data\n. 2016-01-07 14:46:46.914 Looking for network events\n. 2016-01-07 14:46:46.924 Detected network event\n. 2016-01-07 14:46:46.924 Enumerating network events for socket 1084\n. 2016-01-07 14:46:46.924 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:46.924 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:46.925 Received 1113 bytes (0)\n. 2016-01-07 14:46:46.925 Read 4 bytes (1109 pending)\n. 2016-01-07 14:46:46.925 Read 1109 bytes (0 pending)\n&lt; 2016-01-07 14:46:46.925 Type: SSH_FXP_NAME, Size: 1109, Number: 4364\n&lt; 2016-01-07 14:46:46.925 68,00,00,11,0C,00,00,00,03,00,00,00,01,2E,00,00,00,7C,02,00,00,41,B6,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,01,\n&lt; 2016-01-07 14:46:46.925 37,00,00,00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,\n&lt; 2016-01-07 14:46:46.925 45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,\n&lt; 2016-01-07 14:46:46.925 52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,\n&lt; 2016-01-07 14:46:46.925 53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,\n&lt; 2016-01-07 14:46:46.925 54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,03,00,12,\n&lt; 2016-01-07 14:46:46.925 00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,\n&lt; 2016-01-07 14:46:46.925 65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,\n&lt; 2016-01-07 14:46:46.925 52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,\n&lt; 2016-01-07 14:46:46.925 65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,\n&lt; 2016-01-07 14:46:46.925 2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,\n&lt; 2016-01-07 14:46:46.925 72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,08,64,6F,77,6E,6C,6F,61,64,00,\n&lt; 2016-01-07 14:46:46.925 00,00,7C,02,00,00,41,B6,00,00,00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,56,8E,52,55,00,00,01,54,00,00,00,08,00,00,00,00,00,00,00,03,00,1F,\n&lt; 2016-01-07 14:46:46.925 01,FF,00,00,00,0D,44,55,53,5C,6E,6D,65,63,6B,6D,61,6E,6E,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,\n&lt; 2016-01-07 14:46:46.925 6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,\n&lt; 2016-01-07 14:46:46.925 72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,\n&lt; 2016-01-07 14:46:46.925 2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,\n&lt; 2016-01-07 14:46:46.925 53,54,45,4D,00,00,00,00,00,00,00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,\n&lt; 2016-01-07 14:46:46.925 46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,\n&lt; 2016-01-07 14:46:46.925 65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,\n&lt; 2016-01-07 14:46:46.925 5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,\n&lt; 2016-01-07 14:46:46.925 72,00,00,00,06,75,70,6C,6F,61,64,00,00,00,7C,02,00,00,41,B6,00,00,00,00,56,\n&lt; 2016-01-07 14:46:46.925 8E,51,ED,00,00,00,00,56,8E,51,ED,00,00,00,00,56,8E,51,ED,00,00,01,37,00,00,\n&lt; 2016-01-07 14:46:46.925 00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,45,46,49,\n&lt; 2016-01-07 14:46:46.925 4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,\n&lt; 2016-01-07 14:46:46.925 41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,00,00,1F,\n&lt; 2016-01-07 14:46:46.925 01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,\n&lt; 2016-01-07 14:46:46.925 4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,54,4F,52,\n&lt; 2016-01-07 14:46:46.925 49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,03,00,12,00,A9,00,\n&lt; 2016-01-07 14:46:46.925 00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,65,72,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,\n&lt; 2016-01-07 14:46:46.925 C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,\n&lt; 2016-01-07 14:46:46.925 74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,2D,41,55,\n&lt; 2016-01-07 14:46:46.926 54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,\n&lt; 2016-01-07 14:46:46.926 20,42,65,6E,75,74,7A,65,72,\n&gt; 2016-01-07 14:46:46.926 Type: SSH_FXP_READDIR, Size: 41, Number: 4620\n&gt; 2016-01-07 14:46:46.926 0C,00,00,12,0C,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\n&gt; 2016-01-07 14:46:46.926 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\n. 2016-01-07 14:46:46.926 Sent 45 bytes\n. 2016-01-07 14:46:46.926 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:46.926 Looking for network events\n. 2016-01-07 14:46:46.926 Timeout waiting for network events\n. 2016-01-07 14:46:46.926 Read file '.' from listing\n. 2016-01-07 14:46:46.926 Read file 'download' from listing\n. 2016-01-07 14:46:46.926 Read file 'upload' from listing\n. 2016-01-07 14:46:46.926 Waiting for another 4 bytes\n. 2016-01-07 14:46:46.926 Looking for incoming data\n. 2016-01-07 14:46:46.926 Looking for network events\n. 2016-01-07 14:46:46.926 Detected network event\n. 2016-01-07 14:46:46.926 Enumerating network events for socket 1084\n. 2016-01-07 14:46:46.926 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:46.926 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:46.926 Received 46 bytes (0)\n. 2016-01-07 14:46:46.926 Read 4 bytes (42 pending)\n. 2016-01-07 14:46:46.926 Read 42 bytes (0 pending)\n&lt; 2016-01-07 14:46:46.926 Type: SSH_FXP_STATUS, Size: 42, Number: 4620\n&lt; 2016-01-07 14:46:46.926 65,00,00,12,0C,00,00,00,01,00,00,00,19,44,69,72,65,63,74,6F,72,79,20,72,65,\n&lt; 2016-01-07 14:46:46.926 61,64,69,6E,67,20,69,73,20,64,6F,6E,65,00,00,00,00,\n&lt; 2016-01-07 14:46:46.926 Status code: 1\n&gt; 2016-01-07 14:46:46.926 Type: SSH_FXP_CLOSE, Size: 41, Number: 4868\n&gt; 2016-01-07 14:46:46.926 04,00,00,13,04,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\n&gt; 2016-01-07 14:46:46.926 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\n. 2016-01-07 14:46:46.926 Sent 45 bytes\n. 2016-01-07 14:46:46.926 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:46.926 Looking for network events\n. 2016-01-07 14:46:46.926 Timeout waiting for network events\n. 2016-01-07 14:46:46.927 download;D;0;2016-01-07T11:56:05.000Z;\"\" [0];\"\" [0];rw-rw-rw-;1\n. 2016-01-07 14:46:46.927 upload;D;0;2016-01-07T11:54:21.000Z;\"\" [0];\"\" [0];rw-rw-rw-;1\n. 2016-01-07 14:46:47.009 Startup conversation with host finished.\n. 2016-01-07 14:46:47.122 Session upkeep\n. 2016-01-07 14:46:47.122 Looking for network events\n. 2016-01-07 14:46:47.122 Detected network event\n. 2016-01-07 14:46:47.122 Enumerating network events for socket 1084\n. 2016-01-07 14:46:47.122 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:47.122 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:47.122 Received 21 bytes (0)\n. 2016-01-07 14:46:47.124 Session upkeep\n. 2016-01-07 14:46:47.124 Looking for network events\n. 2016-01-07 14:46:47.124 Timeout waiting for network events\n. 2016-01-07 14:46:47.257 Session upkeep\n. 2016-01-07 14:46:47.257 Looking for network events\n. 2016-01-07 14:46:47.257 Timeout waiting for network events\n. 2016-01-07 14:46:47.768 Session upkeep\n. 2016-01-07 14:46:47.768 Looking for network events\n. 2016-01-07 14:46:47.768 Timeout waiting for network events\n. 2016-01-07 14:46:48.267 Session upkeep\n. 2016-01-07 14:46:48.267 Looking for network events\n. 2016-01-07 14:46:48.267 Timeout waiting for network events\n. 2016-01-07 14:46:48.781 Session upkeep\n. 2016-01-07 14:46:48.782 Looking for network events\n. 2016-01-07 14:46:48.782 Timeout waiting for network events\n. 2016-01-07 14:46:48.832 Cached directory change via \"download\" to \"/download\".\n. 2016-01-07 14:46:48.832 Getting current directory name.\n. 2016-01-07 14:46:48.832 Listing directory \"/download\".\n&gt; 2016-01-07 14:46:48.832 Type: SSH_FXP_OPENDIR, Size: 18, Number: 5131\n&gt; 2016-01-07 14:46:48.832 0B,00,00,14,0B,00,00,00,09,2F,64,6F,77,6E,6C,6F,61,64,\n. 2016-01-07 14:46:48.832 Sent 22 bytes\n. 2016-01-07 14:46:48.832 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:48.832 Looking for network events\n. 2016-01-07 14:46:48.834 Timeout waiting for network events\n. 2016-01-07 14:46:48.834 Read 4 bytes (17 pending)\n. 2016-01-07 14:46:48.834 Read 17 bytes (0 pending)\n&lt; 2016-01-07 14:46:48.834 Type: SSH_FXP_STATUS, Size: 17, Number: 4868\n&lt; 2016-01-07 14:46:48.834 65,00,00,13,04,00,00,00,00,00,00,00,00,00,00,00,00,\n. 2016-01-07 14:46:48.834 Discarding reserved response\n. 2016-01-07 14:46:48.834 Waiting for another 4 bytes\n. 2016-01-07 14:46:48.834 Looking for incoming data\n. 2016-01-07 14:46:48.834 Looking for network events\n. 2016-01-07 14:46:48.834 Detected network event\n. 2016-01-07 14:46:48.834 Enumerating network events for socket 1084\n. 2016-01-07 14:46:48.834 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:48.834 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:48.834 Received 45 bytes (0)\n. 2016-01-07 14:46:48.834 Read 4 bytes (41 pending)\n. 2016-01-07 14:46:48.834 Read 41 bytes (0 pending)\n&lt; 2016-01-07 14:46:48.834 Type: SSH_FXP_HANDLE, Size: 41, Number: 5131\n&lt; 2016-01-07 14:46:48.834 66,00,00,14,0B,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\n&lt; 2016-01-07 14:46:48.834 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\n&gt; 2016-01-07 14:46:48.834 Type: SSH_FXP_READDIR, Size: 41, Number: 5388\n&gt; 2016-01-07 14:46:48.834 0C,00,00,15,0C,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\n&gt; 2016-01-07 14:46:48.834 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\n. 2016-01-07 14:46:48.835 Sent 45 bytes\n. 2016-01-07 14:46:48.835 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:48.835 Looking for network events\n. 2016-01-07 14:46:48.835 Timeout waiting for network events\n. 2016-01-07 14:46:48.835 Waiting for another 4 bytes\n. 2016-01-07 14:46:48.835 Looking for incoming data\n. 2016-01-07 14:46:48.835 Looking for network events\n. 2016-01-07 14:46:48.840 Detected network event\n. 2016-01-07 14:46:48.840 Enumerating network events for socket 1084\n. 2016-01-07 14:46:48.840 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:48.840 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:48.840 Received 749 bytes (0)\n. 2016-01-07 14:46:48.840 Read 4 bytes (745 pending)\n. 2016-01-07 14:46:48.840 Read 745 bytes (0 pending)\n&lt; 2016-01-07 14:46:48.840 Type: SSH_FXP_NAME, Size: 745, Number: 5388\n&lt; 2016-01-07 14:46:48.840 68,00,00,15,0C,00,00,00,02,00,00,00,01,2E,00,00,00,7C,02,00,00,41,B6,00,00,\n&lt; 2016-01-07 14:46:48.840 00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,00,01,\n&lt; 2016-01-07 14:46:48.840 54,00,00,00,08,00,00,00,00,00,00,00,03,00,1F,01,FF,00,00,00,0D,44,55,53,5C,\n&lt; 2016-01-07 14:46:48.840 6E,6D,65,63,6B,6D,61,6E,6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,\n&lt; 2016-01-07 14:46:48.840 56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,\n&lt; 2016-01-07 14:46:48.840 72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,\n&lt; 2016-01-07 14:46:48.840 49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,\n&lt; 2016-01-07 14:46:48.840 54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,\n&lt; 2016-01-07 14:46:48.840 54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,\n&lt; 2016-01-07 14:46:48.840 6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,\n&lt; 2016-01-07 14:46:48.840 41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,\n&lt; 2016-01-07 14:46:48.840 74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,\n&lt; 2016-01-07 14:46:48.840 69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,02,2E,2E,00,00,00,\n&lt; 2016-01-07 14:46:48.840 7C,02,00,00,41,B6,00,00,00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,56,79,11,96,00,00,01,37,00,00,00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,\n&lt; 2016-01-07 14:46:48.840 00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,\n&lt; 2016-01-07 14:46:48.840 72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,\n&lt; 2016-01-07 14:46:48.840 52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,\n&lt; 2016-01-07 14:46:48.840 6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,\n&lt; 2016-01-07 14:46:48.840 49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,\n&lt; 2016-01-07 14:46:48.840 00,00,00,00,00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,\n&lt; 2016-01-07 14:46:48.840 54,5C,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,\n&lt; 2016-01-07 14:46:48.840 27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,\n&lt; 2016-01-07 14:46:48.840 7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,\n&lt; 2016-01-07 14:46:48.840 00,00,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,\n&lt; 2016-01-07 14:46:48.841 6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,\n&gt; 2016-01-07 14:46:48.841 Type: SSH_FXP_READDIR, Size: 41, Number: 5644\n&gt; 2016-01-07 14:46:48.841 0C,00,00,16,0C,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\n&gt; 2016-01-07 14:46:48.841 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\n. 2016-01-07 14:46:48.841 Sent 45 bytes\n. 2016-01-07 14:46:48.841 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:48.841 Looking for network events\n. 2016-01-07 14:46:48.841 Timeout waiting for network events\n. 2016-01-07 14:46:48.841 Read file '.' from listing\n. 2016-01-07 14:46:48.841 Read file '..' from listing\n. 2016-01-07 14:46:48.841 Waiting for another 4 bytes\n. 2016-01-07 14:46:48.841 Looking for incoming data\n. 2016-01-07 14:46:48.841 Looking for network events\n. 2016-01-07 14:46:48.841 Detected network event\n. 2016-01-07 14:46:48.841 Enumerating network events for socket 1084\n. 2016-01-07 14:46:48.841 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:48.841 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:48.841 Received 46 bytes (0)\n. 2016-01-07 14:46:48.841 Read 4 bytes (42 pending)\n. 2016-01-07 14:46:48.841 Read 42 bytes (0 pending)\n&lt; 2016-01-07 14:46:48.841 Type: SSH_FXP_STATUS, Size: 42, Number: 5644\n&lt; 2016-01-07 14:46:48.841 65,00,00,16,0C,00,00,00,01,00,00,00,19,44,69,72,65,63,74,6F,72,79,20,72,65,\n&lt; 2016-01-07 14:46:48.841 61,64,69,6E,67,20,69,73,20,64,6F,6E,65,00,00,00,00,\n&lt; 2016-01-07 14:46:48.842 Status code: 1\n&gt; 2016-01-07 14:46:48.842 Type: SSH_FXP_CLOSE, Size: 41, Number: 5892\n&gt; 2016-01-07 14:46:48.842 04,00,00,17,04,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\n&gt; 2016-01-07 14:46:48.842 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\n. 2016-01-07 14:46:48.842 Sent 45 bytes\n. 2016-01-07 14:46:48.842 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:48.842 Looking for network events\n. 2016-01-07 14:46:48.842 Timeout waiting for network events\n. 2016-01-07 14:46:48.842 ..;D;0;2015-12-22T09:02:14.000Z;\"\" [0];\"\" [0];rw-rw-rw-;1\n. 2016-01-07 14:46:49.283 Session upkeep\n. 2016-01-07 14:46:49.283 Looking for network events\n. 2016-01-07 14:46:49.283 Detected network event\n. 2016-01-07 14:46:49.283 Enumerating network events for socket 1084\n. 2016-01-07 14:46:49.283 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:49.283 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:49.283 Received 21 bytes (0)\n. 2016-01-07 14:46:49.472 Cached directory change via \"..\" to \"/\".\n. 2016-01-07 14:46:49.472 Getting current directory name.\n. 2016-01-07 14:46:49.473 Directory content loaded from cache.\n. 2016-01-07 14:46:49.795 Session upkeep\n. 2016-01-07 14:46:49.795 Looking for network events\n. 2016-01-07 14:46:49.795 Timeout waiting for network events\n. 2016-01-07 14:46:49.880 Cached directory change via \"upload\" to \"/upload\".\n. 2016-01-07 14:46:49.880 Getting current directory name.\n. 2016-01-07 14:46:49.881 Listing directory \"/upload\".\n&gt; 2016-01-07 14:46:49.881 Type: SSH_FXP_OPENDIR, Size: 16, Number: 6155\n&gt; 2016-01-07 14:46:49.881 0B,00,00,18,0B,00,00,00,07,2F,75,70,6C,6F,61,64,\n. 2016-01-07 14:46:49.881 Sent 20 bytes\n. 2016-01-07 14:46:49.881 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:49.881 Looking for network events\n. 2016-01-07 14:46:49.882 Timeout waiting for network events\n. 2016-01-07 14:46:49.882 Read 4 bytes (17 pending)\n. 2016-01-07 14:46:49.882 Read 17 bytes (0 pending)\n&lt; 2016-01-07 14:46:49.882 Type: SSH_FXP_STATUS, Size: 17, Number: 5892\n&lt; 2016-01-07 14:46:49.882 65,00,00,17,04,00,00,00,00,00,00,00,00,00,00,00,00,\n. 2016-01-07 14:46:49.882 Discarding reserved response\n. 2016-01-07 14:46:49.882 Waiting for another 4 bytes\n. 2016-01-07 14:46:49.882 Looking for incoming data\n. 2016-01-07 14:46:49.882 Looking for network events\n. 2016-01-07 14:46:49.882 Detected network event\n. 2016-01-07 14:46:49.882 Enumerating network events for socket 1084\n. 2016-01-07 14:46:49.883 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:49.883 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:49.883 Received 45 bytes (0)\n. 2016-01-07 14:46:49.883 Read 4 bytes (41 pending)\n. 2016-01-07 14:46:49.883 Read 41 bytes (0 pending)\n&lt; 2016-01-07 14:46:49.883 Type: SSH_FXP_HANDLE, Size: 41, Number: 6155\n&lt; 2016-01-07 14:46:49.883 66,00,00,18,0B,00,00,00,20,30,38,61,36,35,34,38,66,61,36,39,63,66,31,64,37,\n&lt; 2016-01-07 14:46:49.883 65,31,33,34,32,33,63,32,61,30,32,30,35,33,63,37,\n&gt; 2016-01-07 14:46:49.883 Type: SSH_FXP_READDIR, Size: 41, Number: 6412\n&gt; 2016-01-07 14:46:49.883 0C,00,00,19,0C,00,00,00,20,30,38,61,36,35,34,38,66,61,36,39,63,66,31,64,37,\n&gt; 2016-01-07 14:46:49.883 65,31,33,34,32,33,63,32,61,30,32,30,35,33,63,37,\n. 2016-01-07 14:46:49.883 Sent 45 bytes\n. 2016-01-07 14:46:49.883 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:49.883 Looking for network events\n. 2016-01-07 14:46:49.883 Timeout waiting for network events\n. 2016-01-07 14:46:49.883 Waiting for another 4 bytes\n. 2016-01-07 14:46:49.883 Looking for incoming data\n. 2016-01-07 14:46:49.883 Looking for network events\n. 2016-01-07 14:46:49.889 Detected network event\n. 2016-01-07 14:46:49.890 Enumerating network events for socket 1084\n. 2016-01-07 14:46:49.890 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:49.890 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:49.890 Received 720 bytes (0)\n. 2016-01-07 14:46:49.890 Read 4 bytes (716 pending)\n. 2016-01-07 14:46:49.890 Read 716 bytes (0 pending)\n</code></pre>\n\n<p>Greetings</p>\n"},{"tags":["java","amazon-web-services","spring-boot","tomcat","apache-kafka"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1684414630,"post_id":76277927,"comment_id":134516138,"body_markdown":"http://www.masterspringboot.com/apache-kafka/how-to-monitor-kafka-using-jmx/","body":"<a href=\"http://www.masterspringboot.com/apache-kafka/how-to-monitor-kafka-using-jmx/\" rel=\"nofollow noreferrer\">masterspringboot.com/apache-kafka/&hellip;</a>"},{"owner":{"account_id":5319774,"reputation":343,"user_id":4243562,"display_name":"acearch"},"score":0,"creation_date":1684587534,"post_id":76277927,"comment_id":134540648,"body_markdown":"Thanks for the link but am looking for something at startup when a spring boot application starts up. The aws msk configs are in bootstrap and if it doesnt connect then service does not start up is the requirement. So the focus is not on monitoring the kafka topic but on stopping service from startup on failing kafka connections and other kafka related failures.","body":"Thanks for the link but am looking for something at startup when a spring boot application starts up. The aws msk configs are in bootstrap and if it doesnt connect then service does not start up is the requirement. So the focus is not on monitoring the kafka topic but on stopping service from startup on failing kafka connections and other kafka related failures."}],"owner":{"account_id":5319774,"reputation":343,"user_id":4243562,"display_name":"acearch"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684387079,"creation_date":1684387079,"question_id":76277927,"body_markdown":"Suppose one is in a Spring boot microservice and one connects to a Amazon msk cluster. The configurations for connecting to the cluster are mentioned in the bootstrap yml within the microservice resources directory. The sasl scram combination is used to authenticate the service to the cluster. \r\nNow one wants to test that connection to the kafka cluster has succeeded during microservice startup else stop the microservice from starting up. \r\nIs there a way to write java code to test this connectivity between service and cluster and throw an exception as a log and prevent the service from starting up and log the exact exception for debugging purposes. Thanks!! ","title":"Checking connection to Kafka Aws Msk cluster","body":"<p>Suppose one is in a Spring boot microservice and one connects to a Amazon msk cluster. The configurations for connecting to the cluster are mentioned in the bootstrap yml within the microservice resources directory. The sasl scram combination is used to authenticate the service to the cluster.\nNow one wants to test that connection to the kafka cluster has succeeded during microservice startup else stop the microservice from starting up.\nIs there a way to write java code to test this connectivity between service and cluster and throw an exception as a log and prevent the service from starting up and log the exact exception for debugging purposes. Thanks!!</p>\n"},{"tags":["java","netbeans","ide"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1684394496,"post_id":76277925,"comment_id":134512423,"body_markdown":"I don&#39;t have that problem with NetBeans 17, but someone else did - see Bug Report [NetBeans 17 Background Scanning of Projects doesn&#39;t ever complete, without throwing an Unexpected Exception #5793](https://github.com/apache/netbeans/issues/5793). Restart NetBeans and let the scanning run for 5 or 10 minutes, then check the NetBeans log file (**View &gt; IDE Log**). Update your question if there is anything relevant in that log&#39;s most recent entries.","body":"I don&#39;t have that problem with NetBeans 17, but someone else did - see Bug Report <a href=\"https://github.com/apache/netbeans/issues/5793\" rel=\"nofollow noreferrer\">NetBeans 17 Background Scanning of Projects doesn&#39;t ever complete, without throwing an Unexpected Exception #5793</a>. Restart NetBeans and let the scanning run for 5 or 10 minutes, then check the NetBeans log file (<b>View &gt; IDE Log</b>). Update your question if there is anything relevant in that log&#39;s most recent entries."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1684394747,"post_id":76277925,"comment_id":134512468,"body_markdown":"Another thing to try is to close some of your projects, and then restart NetBeans to see if the problem is diminished, or goes away completely. If the problem persists, repeat the cycle of closing a few more projects and then restarting NetBeans. That approach is tedious, but it may allow you to determine whether the files of some specific project(s) provoke the problem. You could also try playing with the _Ignored Files Pattern_ field, which is on the same screen as the _Enable auto-scanning of sources_ checkbox.","body":"Another thing to try is to close some of your projects, and then restart NetBeans to see if the problem is diminished, or goes away completely. If the problem persists, repeat the cycle of closing a few more projects and then restarting NetBeans. That approach is tedious, but it may allow you to determine whether the files of some specific project(s) provoke the problem. You could also try playing with the <i>Ignored Files Pattern</i> field, which is on the same screen as the <i>Enable auto-scanning of sources</i> checkbox."},{"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"score":0,"creation_date":1684401528,"post_id":76277925,"comment_id":134513645,"body_markdown":"@skomisa thank you for your tips, I will check them soon. It was my favorite IDE, but with this issue, I had to change to IntellJ.","body":"@skomisa thank you for your tips, I will check them soon. It was my favorite IDE, but with this issue, I had to change to IntellJ."}],"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684386950,"creation_date":1684386950,"question_id":76277925,"body_markdown":"Netbeans has been very annoying, I used Netbeans 8 with Maven projects before and it didn&#39;t have this issue, but since I had to update to java 11 and use Netbeans 17, this problem appears. It is completely unusable IDE to me anymore.\r\n\r\nWhen I opened Netbeans, it has a popup saying &quot;Background scanning of projects&quot; and it has been taking more than 10 minutes to run???\r\n\r\nI don&#39;t have Tools -&gt; Options -&gt; Miscellaneous -&gt; Files (Enable auto-scanning of sources) checkbox enabled.\r\n\r\nI noticed that Netbeans is trying to scan my **build directory** as well which I don&#39;t understand why it wants to do that.\r\n","title":"Netbeans 17 - How to stop background scanning of projects?","body":"<p>Netbeans has been very annoying, I used Netbeans 8 with Maven projects before and it didn't have this issue, but since I had to update to java 11 and use Netbeans 17, this problem appears. It is completely unusable IDE to me anymore.</p>\n<p>When I opened Netbeans, it has a popup saying &quot;Background scanning of projects&quot; and it has been taking more than 10 minutes to run???</p>\n<p>I don't have Tools -&gt; Options -&gt; Miscellaneous -&gt; Files (Enable auto-scanning of sources) checkbox enabled.</p>\n<p>I noticed that Netbeans is trying to scan my <strong>build directory</strong> as well which I don't understand why it wants to do that.</p>\n"},{"tags":["java","spring-boot","nullpointerexception"],"comments":[{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684385778,"post_id":76272883,"comment_id":134511374,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684385991,"post_id":76272883,"comment_id":134511389,"body_markdown":"Please do a debug and see whether `projetRepository` is null or not","body":"Please do a debug and see whether <code>projetRepository</code> is null or not"}],"owner":{"account_id":21975423,"reputation":89,"user_id":16251325,"display_name":"Moe_blg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684386035,"creation_date":1684331488,"question_id":76272883,"body_markdown":"I&#39;m trying to add an entity Projet which has a list property of another entity Sprint. These are the two entities\r\n\r\nProjet:\r\n\r\n    import com.fasterxml.jackson.annotation.JsonIgnore;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    import javax.persistence.*;\r\n    import java.util.List;\r\n    \r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    public class Projet {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int id;\r\n        private String title;\r\n        private String description;\r\n        @ManyToMany(mappedBy = &quot;projets&quot;)\r\n        private List&lt;User&gt; users;\r\n        @OneToMany(mappedBy = &quot;projet&quot;)\r\n        @JsonIgnore\r\n        private List&lt;Sprint&gt; sprints;\r\n    }\r\n\r\nSprint:\r\n\r\n    import com.fasterxml.jackson.annotation.JsonIgnore;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    import javax.persistence.*;\r\n    import java.util.Date;\r\n    \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class Sprint {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int id;\r\n        private String description;\r\n        @Temporal(TemporalType.DATE)\r\n        private Date startDate;\r\n        @ManyToOne\r\n        @JsonIgnore\r\n        private Projet projet;\r\n    }\r\n\r\nI have a repository interface, ProjetRepository:\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    import tn.esprit.spring.entities.Projet;\r\n    \r\n    @Repository\r\n    public interface ProjetRepository extends JpaRepository&lt;Projet, Integer&gt; {\r\n    }\r\n\r\nA service interface, IProjetService:\r\n\r\n    import tn.esprit.spring.entities.Projet;\r\n    \r\n    public interface IProjetService {\r\n        public Projet addProject (Projet project);\r\n    }\r\n\r\nAnd a service implementation class, ProjetService:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Service;\r\n    import tn.esprit.spring.entities.Projet;\r\n    import tn.esprit.spring.entities.Sprint;\r\n    import tn.esprit.spring.repositories.ProjetRepository;\r\n    \r\n    import java.util.List;\r\n    \r\n    @Service\r\n    public class ProjetService implements IProjetService{\r\n        @Autowired\r\n        ProjetRepository projetRepository;\r\n        @Override\r\n        public Projet addProject(Projet projet) {\r\n            List&lt;Sprint&gt; sprints = projet.getSprints();\r\n            for ( Sprint sprint: sprints) {\r\n                sprint.setProjet(projet);\r\n            }\r\n            return projetRepository.save(projet);\r\n        }\r\n    }\r\n\r\nThis is the controller, ProjetController:\r\n\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import tn.esprit.spring.entities.Projet;\r\n    import tn.esprit.spring.services.IProjetService;\r\n    \r\n    @RequiredArgsConstructor\r\n    @RequestMapping(&quot;/projet&quot;)\r\n    @RestController\r\n    public class ProjetController {\r\n        @Autowired\r\n        IProjetService projetService;\r\n        @PostMapping(&quot;/addProjet&quot;)\r\n        public Projet addProject (@RequestBody Projet project){\r\n            return projetService.addProject(project);\r\n        }\r\n    }\r\n\r\nThis is the test application, SpringTestApplication:\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.domain.EntityScan;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    \r\n    @SpringBootApplication\r\n    \r\n    @EntityScan(basePackages = {&quot;tn.esprit.spring.entities&quot;})\r\n    @ComponentScan(basePackages = {&quot;tn.esprit.spring.controllers&quot;, &quot;tn.esprit.spring.services&quot;\r\n            , &quot;tn.esprit.spring.repositories&quot;})\r\n    \r\n    @EnableJpaRepositories(basePackages = {&quot;tn.esprit.spring.repositories&quot;})\r\n    \r\n    public class SpringTestApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(SpringTestApplication.class, args);\r\n        }\r\n    \r\n    }\r\n\r\nWhen testing the addProjet method on Postman on this url using Post method http://localhost:8085/Exam/projet/addProjet using this request body:\r\n\r\n    {\r\n        &quot;title&quot;: &quot;MAP&quot;,\r\n        &quot;description&quot;: &quot;Gestion de Mandats, Assignations et Projets&quot;,\r\n        &quot;sprints&quot;: [\r\n            {\r\n                &quot;description&quot;: &quot;Sprint Projets&quot;,\r\n                &quot;startDate&quot;: &quot;2023-05-27&quot;\r\n            }\r\n        ]\r\n    }\r\n\r\nIn Postman response body:\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-05-17T13:45:51.279+00:00&quot;,\r\n        &quot;status&quot;: 500,\r\n        &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n        &quot;path&quot;: &quot;/Exam/projet/addProjet&quot;\r\n    }\r\n\r\nIn IDE console:\r\n\r\n    java.lang.NullPointerException: null\r\n    \tat tn.esprit.spring.services.ProjetService.addProject(ProjetService.java:21) ~[classes/:na]\r\n    \tat tn.esprit.spring.controllers.ProjetController.addProject(ProjetController.java:20) ~[classes/:na]\r\n\r\nWhich points to here:\r\n\r\n    return projetRepository.save(projet);\r\n\r\nI really don&#39;t understand what the issue is, could anyone please help ?\r\n\r\nEDIT: I also get this error in console: `2023-05-17 14:56:42.938 ERROR 8448 --- [nio-8085-exec-4] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/Exam] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause`","title":"Spring Boot: NullPointerException while saving two entities at the same time","body":"<p>I'm trying to add an entity Projet which has a list property of another entity Sprint. These are the two entities</p>\n<p>Projet:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport java.util.List;\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Getter\n@Setter\npublic class Projet {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String title;\n    private String description;\n    @ManyToMany(mappedBy = &quot;projets&quot;)\n    private List&lt;User&gt; users;\n    @OneToMany(mappedBy = &quot;projet&quot;)\n    @JsonIgnore\n    private List&lt;Sprint&gt; sprints;\n}\n</code></pre>\n<p>Sprint:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport java.util.Date;\n\n@Entity\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Sprint {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String description;\n    @Temporal(TemporalType.DATE)\n    private Date startDate;\n    @ManyToOne\n    @JsonIgnore\n    private Projet projet;\n}\n</code></pre>\n<p>I have a repository interface, ProjetRepository:</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport tn.esprit.spring.entities.Projet;\n\n@Repository\npublic interface ProjetRepository extends JpaRepository&lt;Projet, Integer&gt; {\n}\n</code></pre>\n<p>A service interface, IProjetService:</p>\n<pre><code>import tn.esprit.spring.entities.Projet;\n\npublic interface IProjetService {\n    public Projet addProject (Projet project);\n}\n</code></pre>\n<p>And a service implementation class, ProjetService:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport tn.esprit.spring.entities.Projet;\nimport tn.esprit.spring.entities.Sprint;\nimport tn.esprit.spring.repositories.ProjetRepository;\n\nimport java.util.List;\n\n@Service\npublic class ProjetService implements IProjetService{\n    @Autowired\n    ProjetRepository projetRepository;\n    @Override\n    public Projet addProject(Projet projet) {\n        List&lt;Sprint&gt; sprints = projet.getSprints();\n        for ( Sprint sprint: sprints) {\n            sprint.setProjet(projet);\n        }\n        return projetRepository.save(projet);\n    }\n}\n</code></pre>\n<p>This is the controller, ProjetController:</p>\n<pre><code>import lombok.RequiredArgsConstructor;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport tn.esprit.spring.entities.Projet;\nimport tn.esprit.spring.services.IProjetService;\n\n@RequiredArgsConstructor\n@RequestMapping(&quot;/projet&quot;)\n@RestController\npublic class ProjetController {\n    @Autowired\n    IProjetService projetService;\n    @PostMapping(&quot;/addProjet&quot;)\n    public Projet addProject (@RequestBody Projet project){\n        return projetService.addProject(project);\n    }\n}\n</code></pre>\n<p>This is the test application, SpringTestApplication:</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n@SpringBootApplication\n\n@EntityScan(basePackages = {&quot;tn.esprit.spring.entities&quot;})\n@ComponentScan(basePackages = {&quot;tn.esprit.spring.controllers&quot;, &quot;tn.esprit.spring.services&quot;\n        , &quot;tn.esprit.spring.repositories&quot;})\n\n@EnableJpaRepositories(basePackages = {&quot;tn.esprit.spring.repositories&quot;})\n\npublic class SpringTestApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringTestApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>When testing the addProjet method on Postman on this url using Post method http://localhost:8085/Exam/projet/addProjet using this request body:</p>\n<pre><code>{\n    &quot;title&quot;: &quot;MAP&quot;,\n    &quot;description&quot;: &quot;Gestion de Mandats, Assignations et Projets&quot;,\n    &quot;sprints&quot;: [\n        {\n            &quot;description&quot;: &quot;Sprint Projets&quot;,\n            &quot;startDate&quot;: &quot;2023-05-27&quot;\n        }\n    ]\n}\n</code></pre>\n<p>In Postman response body:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-05-17T13:45:51.279+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;path&quot;: &quot;/Exam/projet/addProjet&quot;\n}\n</code></pre>\n<p>In IDE console:</p>\n<pre><code>java.lang.NullPointerException: null\n    at tn.esprit.spring.services.ProjetService.addProject(ProjetService.java:21) ~[classes/:na]\n    at tn.esprit.spring.controllers.ProjetController.addProject(ProjetController.java:20) ~[classes/:na]\n</code></pre>\n<p>Which points to here:</p>\n<pre><code>return projetRepository.save(projet);\n</code></pre>\n<p>I really don't understand what the issue is, could anyone please help ?</p>\n<p>EDIT: I also get this error in console: <code>2023-05-17 14:56:42.938 ERROR 8448 --- [nio-8085-exec-4] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/Exam] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause</code></p>\n"},{"tags":["java","hibernate","persistence","aspectj","hibernate-entitymanager"],"comments":[{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684300662,"post_id":76268713,"comment_id":134496311,"body_markdown":"Does this answer your question? [&quot;No Persistence Unit Found&quot; error](https://stackoverflow.com/questions/6985378/no-persistence-unit-found-error)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6985378/no-persistence-unit-found-error\">&quot;No Persistence Unit Found&quot; error</a>"},{"owner":{"account_id":26398340,"reputation":11,"user_id":20049137,"display_name":"rob"},"score":0,"creation_date":1684302976,"post_id":76268713,"comment_id":134496581,"body_markdown":"its partially resolved the issue but it still can&#39;t create the bean","body":"its partially resolved the issue but it still can&#39;t create the bean"},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684303329,"post_id":76268713,"comment_id":134496634,"body_markdown":"Please check this one - https://stackoverflow.com/questions/43498590/error-creating-bean-with-name-entitymanagerfactory-defined-in-servletcontext-r","body":"Please check this one - <a href=\"https://stackoverflow.com/questions/43498590/error-creating-bean-with-name-entitymanagerfactory-defined-in-servletcontext-r\" title=\"error creating bean with name entitymanagerfactory defined in servletcontext r\">stackoverflow.com/questions/43498590/&hellip;</a>"},{"owner":{"account_id":26398340,"reputation":11,"user_id":20049137,"display_name":"rob"},"score":0,"creation_date":1684304350,"post_id":76268713,"comment_id":134496780,"body_markdown":"nope still the same error updated the hibernate-jpa-2.0-api to hibernate-jpa-2.1-api","body":"nope still the same error updated the hibernate-jpa-2.0-api to hibernate-jpa-2.1-api"},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684317312,"post_id":76268713,"comment_id":134499575,"body_markdown":"Can you update with the complete log?","body":"Can you update with the complete log?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1684319589,"post_id":76268713,"comment_id":134500062,"body_markdown":"Welcome to SO. Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). If it is too much code to post here, even though it is minimal, feel free to link to a GitHub reprository reproducing your problem. Thank you.","body":"Welcome to SO. Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. If it is too much code to post here, even though it is minimal, feel free to link to a GitHub reprository reproducing your problem. Thank you."}],"owner":{"account_id":26398340,"reputation":11,"user_id":20049137,"display_name":"rob"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684385238,"creation_date":1684299772,"question_id":76268713,"body_markdown":"I&#39;m using \r\n\r\n 1. `JDK 1.8`\r\n 2. `MySQL` 8.0.31\r\n 3. `Spring` version 5.3.27\r\n 4. `Aspectj` version 1.8.10\r\n 5. `log4j-api(core, web)` version 2.17.1  \r\n\r\nupdating the log trace\r\n\r\n    May 17, 2023 12:16:20 PM org.apache.catalina.core.ApplicationContext log\r\n    INFO: Initializing Spring root WebApplicationContext\r\n    log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    May 17, 2023 12:16:22 PM org.apache.catalina.core.StandardContext listenerStart\r\n    May 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\r\n    INFO: registered local arg resolver com.metaparadigm.jsonrpc.HttpServletRequestArgResolver for local class javax.servlet.http.HttpServletRequest with context javax.servlet.http.HttpServletRequest\r\n    May 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\r\n    INFO: registered local arg resolver com.metaparadigm.jsonrpc.HttpSessionArgResolver for local class javax.servlet.http.HttpSession with context javax.servlet.http.HttpServletRequest\r\n    May 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\r\n    INFO: registered local arg resolver com.metaparadigm.jsonrpc.JSONRPCBridgeServletArgResolver for local class com.metaparadigm.jsonrpc.JSONRPCBridge with context javax.servlet.http.HttpServletRequest\r\n    May 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext listenerStart\r\n    SEVERE: Exception sending context initialized event to listener instance of class [com.demoweb.web.util.demoWebContextListener]\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [META-INF/demoweb-backend/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.annotations.common.reflection.java.JavaReflectionManager.injectClassLoaderDelegate(Lorg/hibernate/annotations/common/reflection/ClassLoaderDelegate;)V\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\r\n    \tat com.demoweb.web.util.demoWebContextListener.contextInitialized(demoWebContextListener.java:55)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4494)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4946)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:662)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:689)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1888)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:582)\r\n    \tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)\r\n    \tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1617)\r\n    \tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:318)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:898)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:795)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:871)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:249)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:917)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\r\n    Caused by: java.lang.NoSuchMethodError: org.hibernate.annotations.common.reflection.java.JavaReflectionManager.injectClassLoaderDelegate(Lorg/hibernate/annotations/common/reflection/ClassLoaderDelegate;)V\r\n    \tat org.hibernate.boot.internal.BootstrapContextImpl.generateHcannReflectionManager(BootstrapContextImpl.java:316)\r\n    \tat org.hibernate.boot.internal.BootstrapContextImpl.&lt;init&gt;(BootstrapContextImpl.java:89)\r\n    \tat org.hibernate.boot.internal.MetadataBuilderImpl.&lt;init&gt;(MetadataBuilderImpl.java:124)\r\n    \tat org.hibernate.boot.MetadataSources.getMetadataBuilder(MetadataSources.java:136)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:218)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:167)\r\n    \tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:52)\r\n    \tat com.demoweb.backend.util.demoLocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(demoLocalContainerEntityManagerFactoryBean.java:235)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\r\n    \t... 53 more\r\n    \r\n    May 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext startInternal\r\n    SEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\r\n    May 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext startInternal\r\n    SEVERE: Context [] startup failed due to previous errors\r\n    May 17, 2023 12:16:23 PM org.apache.catalina.core.ApplicationContext log\r\n    INFO: Closing Spring root WebApplicationContext\r\n    May 17, 2023 12:16:23 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\n    WARNING: The web application [ROOT] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n     java.lang.Object.wait(Native Method)\r\n     java.lang.Object.wait(Object.java:502)\r\n     java.util.TimerThread.mainLoop(Timer.java:526)\r\n     java.util.TimerThread.run(Timer.java:505)\r\n    May 17, 2023 12:16:23 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\n    WARNING: The web application [ROOT] appears to have started a thread named [mysql-cj-abandoned-connection-cleanup] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n     java.lang.Object.wait(Native Method)\r\n     java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\r\n     com.mysql.cj.jdbc.AbandonedConnectionCleanupThread.run(AbandonedConnectionCleanupThread.java:91)\r\n     java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n     java.lang.Thread.run(Thread.java:748)\r\n    May 17, 2023 12:16:23 PM org.apache.catalina.startup.HostConfig deployDescriptor\r\n    INFO: Deployment of deployment descriptor [D:\\apache-tomcat-9.0.74\\apache-tomcat-9.0.74\\conf\\Catalina\\localhost\\ROOT.xml] has finished in [22,712] ms\r\n    May 17, 2023 12:16:23 PM org.apache.catalina.startup.HostConfig deployWAR\r\n    INFO: Deploying web application archive [D:\\apache-tomcat-9.0.74\\apache-tomcat-9.0.74\\webapps\\abc.war]\r\n    \r\n\r\n**Dependencies**\r\n\r\n    &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;5.3.7.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;5.1.1.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;hibernate-search&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.4.1.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;5.3.7.Final&lt;/version&gt;\r\n    \t\t&lt;exclusions&gt;\r\n    \t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t&lt;groupId&gt;cglib&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;cglib&lt;/artifactId&gt;\r\n    \t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t&lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;/exclusion&gt;\r\n    \t\t&lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n**applicationcontext.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:jdbc=&quot;http://www.springframework.org/schema/jdbc&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n    \txmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:jpa=&quot;http://www.springframework.org/schema/data/jpa&quot;\r\n    \r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n    \t\thttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd\r\n    \t\thttp://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\r\n    \t\thttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\r\n    \t\thttp://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\r\n    \t\thttp://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd&quot;&gt;\r\n    \r\n    \t&lt;context:spring-configured /&gt;\r\n    \t\r\n    \t&lt;context:property-placeholder location=&quot;classpath:META-INF/demoweb-backend.properties&quot; /&gt;\r\n    \t\r\n    \t\r\n    \t&lt;util:properties id=&quot;demoProperties&quot; location=&quot;file:///${catalina.home}/conf/demo.properties&quot;/&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;entityManagerFactory&quot;\r\n    \t\tclass=&quot;com.demoweb.backend.util.demoLocalContainerEntityManagerFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;demowebDataSource&quot; /&gt;\r\n    \t\t&lt;property name=&quot;persistenceUnitName&quot; value=&quot;demoweb&quot; /&gt;\r\n    \t\t&lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n    \t\t\t&lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;\r\n    \t\t\t\t&lt;property name=&quot;generateDdl&quot; value=&quot;${demoweb.database.generateddl}&quot; /&gt;\r\n    \t\t\t\t&lt;property name=&quot;databasePlatform&quot; value=&quot;${demoweb.database.platform}&quot; /&gt;\r\n    \t\t\t\t&lt;property name=&quot;showSql&quot; value=&quot;false&quot; /&gt;\r\n    \t\t\t&lt;/bean&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\r\n    \t\t&lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t  \r\n    \t&lt;bean id=&quot;entityManager&quot; class=&quot;org.springframework.orm.jpa.support.SharedEntityManagerBean&quot;&gt;\r\n        \t&lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot;/&gt;\r\n      \t&lt;/bean&gt;\r\n    \r\n    \t&lt;tx:annotation-driven mode=&quot;aspectj&quot; transaction-manager=&quot;transactionManager&quot;  proxy-target-class=&quot;true&quot;/&gt;\r\n    \t&lt;jpa:repositories base-package=&quot;com.demoweb.backend.repository&quot; /&gt;\r\n    \t\r\n    &lt;/beans&gt;\r\n\r\ni&#39;m not sure whats wrong with my bean i&#39;m currentely upgrading my application which is causing this error. If some can point me in correct direction really appriciate the help.\r\n\r\n \r\nRemoving the hibernate conflitcs resolved the &quot; No persistence unit with name&quot; but its still can&#39;t create bean.\r\n\r\n\r\n","title":"unable to create bean error with name &#39;entityManagerFactory&#39; bean","body":"<p>I'm using</p>\n<ol>\n<li><code>JDK 1.8</code></li>\n<li><code>MySQL</code> 8.0.31</li>\n<li><code>Spring</code> version 5.3.27</li>\n<li><code>Aspectj</code> version 1.8.10</li>\n<li><code>log4j-api(core, web)</code> version 2.17.1</li>\n</ol>\n<p>updating the log trace</p>\n<pre><code>May 17, 2023 12:16:20 PM org.apache.catalina.core.ApplicationContext log\nINFO: Initializing Spring root WebApplicationContext\nlog4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).\nlog4j:WARN Please initialize the log4j system properly.\nMay 17, 2023 12:16:22 PM org.apache.catalina.core.StandardContext listenerStart\nMay 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\nINFO: registered local arg resolver com.metaparadigm.jsonrpc.HttpServletRequestArgResolver for local class javax.servlet.http.HttpServletRequest with context javax.servlet.http.HttpServletRequest\nMay 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\nINFO: registered local arg resolver com.metaparadigm.jsonrpc.HttpSessionArgResolver for local class javax.servlet.http.HttpSession with context javax.servlet.http.HttpServletRequest\nMay 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\nINFO: registered local arg resolver com.metaparadigm.jsonrpc.JSONRPCBridgeServletArgResolver for local class com.metaparadigm.jsonrpc.JSONRPCBridge with context javax.servlet.http.HttpServletRequest\nMay 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class [com.demoweb.web.util.demoWebContextListener]\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/demoweb-backend/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.annotations.common.reflection.java.JavaReflectionManager.injectClassLoaderDelegate(Lorg/hibernate/annotations/common/reflection/ClassLoaderDelegate;)V\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\n    at com.demoweb.web.util.demoWebContextListener.contextInitialized(demoWebContextListener.java:55)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4494)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4946)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:662)\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:689)\n    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1888)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:582)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1617)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:318)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:898)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:795)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:871)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:249)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:917)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\nCaused by: java.lang.NoSuchMethodError: org.hibernate.annotations.common.reflection.java.JavaReflectionManager.injectClassLoaderDelegate(Lorg/hibernate/annotations/common/reflection/ClassLoaderDelegate;)V\n    at org.hibernate.boot.internal.BootstrapContextImpl.generateHcannReflectionManager(BootstrapContextImpl.java:316)\n    at org.hibernate.boot.internal.BootstrapContextImpl.&lt;init&gt;(BootstrapContextImpl.java:89)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.&lt;init&gt;(MetadataBuilderImpl.java:124)\n    at org.hibernate.boot.MetadataSources.getMetadataBuilder(MetadataSources.java:136)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:218)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:167)\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:52)\n    at com.demoweb.backend.util.demoLocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(demoLocalContainerEntityManagerFactoryBean.java:235)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\n    ... 53 more\n\nMay 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\nMay 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: Context [] startup failed due to previous errors\nMay 17, 2023 12:16:23 PM org.apache.catalina.core.ApplicationContext log\nINFO: Closing Spring root WebApplicationContext\nMay 17, 2023 12:16:23 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nWARNING: The web application [ROOT] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n java.lang.Object.wait(Native Method)\n java.lang.Object.wait(Object.java:502)\n java.util.TimerThread.mainLoop(Timer.java:526)\n java.util.TimerThread.run(Timer.java:505)\nMay 17, 2023 12:16:23 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nWARNING: The web application [ROOT] appears to have started a thread named [mysql-cj-abandoned-connection-cleanup] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n java.lang.Object.wait(Native Method)\n java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\n com.mysql.cj.jdbc.AbandonedConnectionCleanupThread.run(AbandonedConnectionCleanupThread.java:91)\n java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n java.lang.Thread.run(Thread.java:748)\nMay 17, 2023 12:16:23 PM org.apache.catalina.startup.HostConfig deployDescriptor\nINFO: Deployment of deployment descriptor [D:\\apache-tomcat-9.0.74\\apache-tomcat-9.0.74\\conf\\Catalina\\localhost\\ROOT.xml] has finished in [22,712] ms\nMay 17, 2023 12:16:23 PM org.apache.catalina.startup.HostConfig deployWAR\nINFO: Deploying web application archive [D:\\apache-tomcat-9.0.74\\apache-tomcat-9.0.74\\webapps\\abc.war]\n</code></pre>\n<p><strong>Dependencies</strong></p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n        &lt;version&gt;5.1.1.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-search&lt;/artifactId&gt;\n        &lt;version&gt;3.4.1.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7.Final&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;cglib&lt;/groupId&gt;\n                &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;dom4j&lt;/groupId&gt;\n                &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>applicationcontext.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:jdbc=&quot;http://www.springframework.org/schema/jdbc&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:jpa=&quot;http://www.springframework.org/schema/data/jpa&quot;\n\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd\n        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\n        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd&quot;&gt;\n\n    &lt;context:spring-configured /&gt;\n    \n    &lt;context:property-placeholder location=&quot;classpath:META-INF/demoweb-backend.properties&quot; /&gt;\n    \n    \n    &lt;util:properties id=&quot;demoProperties&quot; location=&quot;file:///${catalina.home}/conf/demo.properties&quot;/&gt;\n    \n    &lt;bean id=&quot;entityManagerFactory&quot;\n        class=&quot;com.demoweb.backend.util.demoLocalContainerEntityManagerFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;demowebDataSource&quot; /&gt;\n        &lt;property name=&quot;persistenceUnitName&quot; value=&quot;demoweb&quot; /&gt;\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\n            &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;\n                &lt;property name=&quot;generateDdl&quot; value=&quot;${demoweb.database.generateddl}&quot; /&gt;\n                &lt;property name=&quot;databasePlatform&quot; value=&quot;${demoweb.database.platform}&quot; /&gt;\n                &lt;property name=&quot;showSql&quot; value=&quot;false&quot; /&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\n        &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;\n    &lt;/bean&gt;\n      \n    &lt;bean id=&quot;entityManager&quot; class=&quot;org.springframework.orm.jpa.support.SharedEntityManagerBean&quot;&gt;\n        &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot;/&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven mode=&quot;aspectj&quot; transaction-manager=&quot;transactionManager&quot;  proxy-target-class=&quot;true&quot;/&gt;\n    &lt;jpa:repositories base-package=&quot;com.demoweb.backend.repository&quot; /&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<p>i'm not sure whats wrong with my bean i'm currentely upgrading my application which is causing this error. If some can point me in correct direction really appriciate the help.</p>\n<p>Removing the hibernate conflitcs resolved the &quot; No persistence unit with name&quot; but its still can't create bean.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15165138,"reputation":459,"user_id":10942864,"display_name":"Stitt"},"score":0,"creation_date":1684384150,"post_id":76277716,"comment_id":134511239,"body_markdown":"You are checking if 2300 is before midnight of the *same* day, hence why its returning false. See this link for more info http://www.java2s.com/Tutorials/Java/java.time/LocalTime/1040__LocalTime.MIDNIGHT.htm\n\nI would suggest checking if the startTime and Endtime have the same date, and if not, it is bleeding over","body":"You are checking if 2300 is before midnight of the <i>same</i> day, hence why its returning false. See this link for more info <a href=\"http://www.java2s.com/Tutorials/Java/java.time/LocalTime/1040__LocalTime.MIDNIGHT.htm\" rel=\"nofollow noreferrer\">java2s.com/Tutorials/Java/java.time/LocalTime/&hellip;</a>  I would suggest checking if the startTime and Endtime have the same date, and if not, it is bleeding over"},{"owner":{"account_id":15965463,"reputation":81,"user_id":11521276,"display_name":"thottivelli"},"score":0,"creation_date":1684385339,"post_id":76277716,"comment_id":134511341,"body_markdown":"I appreciate the answers everyone. I have a better understanding of the same day limitations that LocalTime has. I marked an answer of accepted that accomplished my needs without having to use a LocalDateTime object.","body":"I appreciate the answers everyone. I have a better understanding of the same day limitations that LocalTime has. I marked an answer of accepted that accomplished my needs without having to use a LocalDateTime object."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1684386437,"post_id":76277716,"comment_id":134511427,"body_markdown":"_All_ LocalTimes are technically after midnight","body":"<i>All</i> LocalTimes are technically after midnight"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1684415364,"post_id":76277716,"comment_id":134516329,"body_markdown":"@LouisWasserman Correct (except 00:00 *is* midnight). Or if talking midnight at the end of the day they are all before midnight since they only go up to 23:59:59.999999999.","body":"@LouisWasserman Correct (except 00:00 <i>is</i> midnight). Or if talking midnight at the end of the day they are all before midnight since they only go up to 23:59:59.999999999."}],"answers":[{"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1684390492,"post_id":76277763,"comment_id":134511866,"body_markdown":"That&#39;s assuming that the data you are receiving is good data. For example, if someone accidentally puts 16:00 as their startTime and 08:00 as their endTime, they will get 16 hours of pay instead of 8 hours. The only way to prevent this is to recreate the date functionality (either here, or do it further upstream), hence my point about &quot;use a different tool&quot;.","body":"That&#39;s assuming that the data you are receiving is good data. For example, if someone accidentally puts 16:00 as their startTime and 08:00 as their endTime, they will get 16 hours of pay instead of 8 hours. The only way to prevent this is to recreate the date functionality (either here, or do it further upstream), hence my point about &quot;use a different tool&quot;."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1684391149,"post_id":76277763,"comment_id":134511936,"body_markdown":"Correct, but at that point, validation is trivial to do. Doing the same when you only have `LocalTime` is not possible unless you are using another tool instead, or using another tool alongside `LocalTime`.","body":"Correct, but at that point, validation is trivial to do. Doing the same when you only have <code>LocalTime</code> is not possible unless you are using another tool instead, or using another tool alongside <code>LocalTime</code>."}],"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684384537,"creation_date":1684384537,"answer_id":76277763,"question_id":76277716,"body_markdown":"As with all things, when in doubt, check the documentation.\r\n\r\nHere is the documentation for the various parts of your code.\r\n\r\n* [`LocalTime#parse(String)`][1]\r\n* [`LocalTime#MIDNIGHT`][2]\r\n* [`LocalTime#isBefore(LocalTime)`][3]\r\n\r\nThe important one is the `LocalTime::isBefore` method. Look at what it says.\r\n\r\n*Checks if this time is before the specified time. The comparison is based on the time-line position of the time **within a day**.*\r\n\r\nThat bolded part isn&#39;t completely clear, but what that means is that, it is going to ask if `23` is before `0` ***on the same day***.\r\n\r\nMore specifically, if May 18 23:00 is before May 18 00:00. As you can see, the answer is false because you accidentally asked for the same day.\r\n\r\nYou need to use a different tool, likely [`LocalDateTime`][4], to be able to solve this problem. Let me know if you have trouble using that tool instead and I can post an example.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#parse(java.lang.CharSequence)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#MIDNIGHT\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#isBefore(java.time.LocalTime)\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDateTime.html","title":"Java - How to check is a LocalTime object is before midnight","body":"<p>As with all things, when in doubt, check the documentation.</p>\n<p>Here is the documentation for the various parts of your code.</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#parse(java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>LocalTime#parse(String)</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#MIDNIGHT\" rel=\"nofollow noreferrer\"><code>LocalTime#MIDNIGHT</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#isBefore(java.time.LocalTime)\" rel=\"nofollow noreferrer\"><code>LocalTime#isBefore(LocalTime)</code></a></li>\n</ul>\n<p>The important one is the <code>LocalTime::isBefore</code> method. Look at what it says.</p>\n<p><em>Checks if this time is before the specified time. The comparison is based on the time-line position of the time <strong>within a day</strong>.</em></p>\n<p>That bolded part isn't completely clear, but what that means is that, it is going to ask if <code>23</code> is before <code>0</code> <em><strong>on the same day</strong></em>.</p>\n<p>More specifically, if May 18 23:00 is before May 18 00:00. As you can see, the answer is false because you accidentally asked for the same day.</p>\n<p>You need to use a different tool, likely <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a>, to be able to solve this problem. Let me know if you have trouble using that tool instead and I can post an example.</p>\n"},{"comments":[{"owner":{"account_id":15965463,"reputation":81,"user_id":11521276,"display_name":"thottivelli"},"score":0,"creation_date":1684385240,"post_id":76277769,"comment_id":134511333,"body_markdown":"Thank you for this answer. Im marking this as accepted since it didn&#39;t require me to use LocalDateTime. The POJO I am working on is used heavily throughout our library and it is already using LocalTimes for my situation :)","body":"Thank you for this answer. Im marking this as accepted since it didn&#39;t require me to use LocalDateTime. The POJO I am working on is used heavily throughout our library and it is already using LocalTimes for my situation :)"}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1684384577,"creation_date":1684384577,"answer_id":76277769,"question_id":76277716,"body_markdown":"According to the [documentation][1], for both `isBefore` and `isAfter`:\r\n\r\n&gt; The comparison is based on the time-line position of the time within a day.\r\n\r\nThese methods assume that the times you are comparing are on the same day, so you cannot use these to check if the period &quot;bleeds into&quot; the second day.\r\n\r\nAssuming a shift must be less than 24 hours, you can check if it &quot;bleeds into&quot; the second day by checking if the end is before the start. This takes advantage of this &quot;assuming the two times are in the same day&quot; characteristic of `isBefore`. If `isBefore` thinks that `endTime` is before `startTime`, that must mean `endTime` is in the next day.\r\n\r\n```\r\nendTime.isBefore(startTime)\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalTime.html#isAfter(java.time.LocalTime)","title":"Java - How to check is a LocalTime object is before midnight","body":"<p>According to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalTime.html#isAfter(java.time.LocalTime)\" rel=\"noreferrer\">documentation</a>, for both <code>isBefore</code> and <code>isAfter</code>:</p>\n<blockquote>\n<p>The comparison is based on the time-line position of the time within a day.</p>\n</blockquote>\n<p>These methods assume that the times you are comparing are on the same day, so you cannot use these to check if the period &quot;bleeds into&quot; the second day.</p>\n<p>Assuming a shift must be less than 24 hours, you can check if it &quot;bleeds into&quot; the second day by checking if the end is before the start. This takes advantage of this &quot;assuming the two times are in the same day&quot; characteristic of <code>isBefore</code>. If <code>isBefore</code> thinks that <code>endTime</code> is before <code>startTime</code>, that must mean <code>endTime</code> is in the next day.</p>\n<pre><code>endTime.isBefore(startTime)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1684385782,"post_id":76277780,"comment_id":134511375,"body_markdown":"Actually, that would be `ZonedDateTime` rather than `LocalDateTime`. The first accounts for time zone rules with temporal anomalies such as Daylight Saving Time (DST) , while the second lacks any concept of time zone or offset-from-UTC.","body":"Actually, that would be <code>ZonedDateTime</code> rather than <code>LocalDateTime</code>. The first accounts for time zone rules with temporal anomalies such as Daylight Saving Time (DST) , while the second lacks any concept of time zone or offset-from-UTC."}],"tags":[],"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684384691,"creation_date":1684384691,"answer_id":76277780,"question_id":76277716,"body_markdown":"`LocalTime` only knows the time. It doesn&#39;t know anything about the date. [LocalTime.MIDNIGHT][1] is `The time of midnight at the start of the day, &#39;00:00&#39;.`. That&#39;s the reason why your code is working like that.\r\n\r\n    startTime.isBefore(LocalTime.MIDNIGHT) == false\r\n\r\nbecause `23:00` is after `00:00`.\r\n\r\nIn the case of\r\n\r\n    endTime.isAfter(LocalTime.MIDNIGHT)) == true\r\n\r\nbecause `7:00` is after `00:00`\r\n\r\nYou should consider to use [LocalDateTime][2] \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html#MIDNIGHT\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html","title":"Java - How to check is a LocalTime object is before midnight","body":"<p><code>LocalTime</code> only knows the time. It doesn't know anything about the date. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html#MIDNIGHT\" rel=\"nofollow noreferrer\">LocalTime.MIDNIGHT</a> is <code>The time of midnight at the start of the day, '00:00'.</code>. That's the reason why your code is working like that.</p>\n<pre><code>startTime.isBefore(LocalTime.MIDNIGHT) == false\n</code></pre>\n<p>because <code>23:00</code> is after <code>00:00</code>.</p>\n<p>In the case of</p>\n<pre><code>endTime.isAfter(LocalTime.MIDNIGHT)) == true\n</code></pre>\n<p>because <code>7:00</code> is after <code>00:00</code></p>\n<p>You should consider to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\">LocalDateTime</a></p>\n"}],"owner":{"account_id":15965463,"reputation":81,"user_id":11521276,"display_name":"thottivelli"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76277769,"answer_count":3,"score":2,"last_activity_date":1684384825,"creation_date":1684383788,"question_id":76277716,"body_markdown":"I am trying to determine if a particular LocalTime is before Midnight. Background basically I want to know if a shift&#39;s start/end time bleed over into the next day. For example if a shift was scheduled for 23:00 - 07:00, then this would be considered bleeding into the next day since the end time is after midnight and the start time is before. \r\n\r\nI began to implement this by seeing if the start time is before midnight, and seeing if the end time is after midnight. This would meet the criteria of being overlapping into the next day.\r\n\r\nIn Java my code looks like this\r\n\r\n    public boolean checkTime() {\r\n            \r\n            final LocalTime startTime = LocalTime.parse(&quot;23:00&quot;);\r\n            final LocalTime endTime = LocalTime.parse(&quot;07:00&quot;);\r\n    \r\n            return startTime.isBefore(LocalTime.MIDNIGHT) //false\r\n                    &amp;&amp; endTime.isAfter(LocalTime.MIDNIGHT)) //true;\r\n    }\r\n\r\nWhy does it return false for the start time being not before midnight? Isn&#39;t the time of 23:00 one hour before midnight? I would expect this to return true. Maybe I am misunderstanding something? I am working with LocalTimes and not using LocalDateTimes\r\n","title":"Java - How to check is a LocalTime object is before midnight","body":"<p>I am trying to determine if a particular LocalTime is before Midnight. Background basically I want to know if a shift's start/end time bleed over into the next day. For example if a shift was scheduled for 23:00 - 07:00, then this would be considered bleeding into the next day since the end time is after midnight and the start time is before.</p>\n<p>I began to implement this by seeing if the start time is before midnight, and seeing if the end time is after midnight. This would meet the criteria of being overlapping into the next day.</p>\n<p>In Java my code looks like this</p>\n<pre><code>public boolean checkTime() {\n        \n        final LocalTime startTime = LocalTime.parse(&quot;23:00&quot;);\n        final LocalTime endTime = LocalTime.parse(&quot;07:00&quot;);\n\n        return startTime.isBefore(LocalTime.MIDNIGHT) //false\n                &amp;&amp; endTime.isAfter(LocalTime.MIDNIGHT)) //true;\n}\n</code></pre>\n<p>Why does it return false for the start time being not before midnight? Isn't the time of 23:00 one hour before midnight? I would expect this to return true. Maybe I am misunderstanding something? I am working with LocalTimes and not using LocalDateTimes</p>\n"},{"tags":["java","iteration","global-variables"],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684384816,"creation_date":1684384816,"answer_id":76277785,"question_id":76277514,"body_markdown":"The expression `res + backTrace(n, row + 1, columns, record1, record2)` is evaluated left to right. This means the value of `res` is read _before_ calling `backTrace`, and doesn’t reflect the change to the value that happens within that method call.\r\n\r\nIf you reverse the order of arguments to `backTrace(n, row + 1, columns, record1, record2) + res`, this avoids the problem, however this may still make the code hard to understand. Most people expect addition to be commutative. This assumption is violated in code where evaluation of one of the operands affects the value of the other. It would be clearer to rewrite the method to avoid using the non-local variable `res`:\r\n\r\n```java\r\nclass Solution {\r\n    public static void main(String[] args) throws IOException {\r\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\r\n        String line;\r\n        while ((line = in.readLine()) != null) {\r\n            int n = Integer.parseInt(line);\r\n\r\n            int ret = new Solution().totalNQueens(n);\r\n\r\n            String out = String.valueOf(ret);\r\n\r\n            System.out.print(out);\r\n        }\r\n    }\r\n\r\n    public int totalNQueens(int n) {\r\n        Set&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\r\n        Set&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\r\n        Set&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\r\n        return backTrace(n, 0, columns, record1, record2);\r\n    }\r\n\r\n    private int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\r\n        if (n == row) {\r\n            return 1;\r\n        }\r\n        int res = 0;\r\n        for (int i = 0; i &lt; n; i++) {\r\n            if (columns.contains(i)) {\r\n                continue;\r\n            }\r\n            int check1 = row - i;\r\n            if (record1.contains(check1)) {\r\n                continue;\r\n            }\r\n            int check2 = row + i;\r\n            if (record2.contains(check2)) {\r\n                continue;\r\n            }\r\n            columns.add(i);\r\n            record1.add(check1);\r\n            record2.add(check2);\r\n            System.out.println(&quot;res start:&quot; + res);\r\n            res += backTrace(n, row + 1, columns, record1, record2);\r\n            System.out.println(&quot;res end:&quot; + res);\r\n            columns.remove(i);\r\n            record1.remove(check1);\r\n            record2.remove(check2);\r\n        }\r\n        return res;\r\n    }\r\n}\r\n```","title":"Java use global variable reset in iteration","body":"<p>The expression <code>res + backTrace(n, row + 1, columns, record1, record2)</code> is evaluated left to right. This means the value of <code>res</code> is read <em>before</em> calling <code>backTrace</code>, and doesn’t reflect the change to the value that happens within that method call.</p>\n<p>If you reverse the order of arguments to <code>backTrace(n, row + 1, columns, record1, record2) + res</code>, this avoids the problem, however this may still make the code hard to understand. Most people expect addition to be commutative. This assumption is violated in code where evaluation of one of the operands affects the value of the other. It would be clearer to rewrite the method to avoid using the non-local variable <code>res</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public static void main(String[] args) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n        String line;\n        while ((line = in.readLine()) != null) {\n            int n = Integer.parseInt(line);\n\n            int ret = new Solution().totalNQueens(n);\n\n            String out = String.valueOf(ret);\n\n            System.out.print(out);\n        }\n    }\n\n    public int totalNQueens(int n) {\n        Set&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\n        return backTrace(n, 0, columns, record1, record2);\n    }\n\n    private int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\n        if (n == row) {\n            return 1;\n        }\n        int res = 0;\n        for (int i = 0; i &lt; n; i++) {\n            if (columns.contains(i)) {\n                continue;\n            }\n            int check1 = row - i;\n            if (record1.contains(check1)) {\n                continue;\n            }\n            int check2 = row + i;\n            if (record2.contains(check2)) {\n                continue;\n            }\n            columns.add(i);\n            record1.add(check1);\n            record2.add(check2);\n            System.out.println(&quot;res start:&quot; + res);\n            res += backTrace(n, row + 1, columns, record1, record2);\n            System.out.println(&quot;res end:&quot; + res);\n            columns.remove(i);\n            record1.remove(check1);\n            record2.remove(check2);\n        }\n        return res;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23488495,"reputation":3,"user_id":17539777,"display_name":"Harutya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76277785,"answer_count":1,"score":0,"last_activity_date":1684384816,"creation_date":1684380028,"question_id":76277514,"body_markdown":"I have the code work with iteration in a single thread enviorment:\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\nclass Solution {\r\n\tint res = 0;\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\tBufferedReader in = new BufferedReader(new InputStreamReader(System.in));\r\n\t\tString line;\r\n\t\twhile ((line = in.readLine()) != null) {\r\n\t\t\tint n = Integer.parseInt(line);\r\n\r\n\t\t\tint ret = new Solution().totalNQueens(n);\r\n\r\n\t\t\tString out = String.valueOf(ret);\r\n\r\n\t\t\tSystem.out.print(out);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic int totalNQueens(int n) {\r\n\t\tSet&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\r\n\t\tSet&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\r\n\t\tSet&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\r\n\t\tbackTrace(n, 0, columns, record1, record2);\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\r\n\t\tif (n == row) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\tif (columns.contains(i)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tint check1 = row - i;\r\n\t\t\tif (record1.contains(check1)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tint check2 = row + i;\r\n\t\t\tif (record2.contains(check2)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tcolumns.add(i);\r\n\t\t\trecord1.add(check1);\r\n\t\t\trecord2.add(check2);\r\n\t\t\tSystem.out.println(&quot;res start:&quot; + res);\r\n\t\t\tres = res + backTrace(n, row + 1, columns, record1, record2);\r\n\t\t\tSystem.out.println(&quot;res end:&quot; + res);\r\n\t\t\tcolumns.remove(i);\r\n\t\t\trecord1.remove(check1);\r\n\t\t\trecord2.remove(check2);\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n}\r\n```\r\nthe result of the code is below, and it seems the `res` reset when `res = res + backTrace(n, row + 1, columns, record1, record2);`\r\n```\r\nres start:0\r\nres start:0\r\nres end:0\r\nres start:0\r\nres start:0\r\nres end:0\r\nres end:0\r\nres end:0\r\nres start:0\r\nres start:0\r\nres start:0\r\nres start:0\r\nres end:1\r\nres end:0\r\nres end:0\r\nres end:0\r\nres start:0\r\nres start:0\r\nres start:0\r\nres start:0\r\n```\r\n\r\nand when we change the code, let a new variable to save the result of backTrace, and it works fine.\r\n```\r\npackage com.nbp.cdncp.vpe.api.controller;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\nclass Solution {\r\n\tint res = 0;\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\tBufferedReader in = new BufferedReader(new InputStreamReader(System.in));\r\n\t\tString line;\r\n\t\twhile ((line = in.readLine()) != null) {\r\n\t\t\tint n = Integer.parseInt(line);\r\n\r\n\t\t\tint ret = new Solution().totalNQueens(n);\r\n\r\n\t\t\tString out = String.valueOf(ret);\r\n\r\n\t\t\tSystem.out.print(out);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic int totalNQueens(int n) {\r\n\t\tSet&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\r\n\t\tSet&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\r\n\t\tSet&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\r\n\t\tbackTrace(n, 0, columns, record1, record2);\r\n\t\treturn res;\r\n\t}\r\n\r\n\tprivate int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\r\n\t\tif (n == row) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\tif (columns.contains(i)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tint check1 = row - i;\r\n\t\t\tif (record1.contains(check1)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tint check2 = row + i;\r\n\t\t\tif (record2.contains(check2)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tcolumns.add(i);\r\n\t\t\trecord1.add(check1);\r\n\t\t\trecord2.add(check2);\r\n\t\t\tSystem.out.println(&quot;res start:&quot; + res);\r\n\t\t\tvar a = backTrace(n, row + 1, columns, record1, record2);\r\n\t\t\tres += a;\r\n\t\t\tSystem.out.println(&quot;res end:&quot; + res);\r\n\t\t\tcolumns.remove(i);\r\n\t\t\trecord1.remove(check1);\r\n\t\t\trecord2.remove(check2);\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n}\r\n```\r\nthe result:\r\n```\r\nres start:0\r\nres start:0\r\nres end:0\r\nres start:0\r\nres start:0\r\nres end:0\r\nres end:0\r\nres end:0\r\nres start:0\r\nres start:0\r\nres start:0\r\nres start:0\r\nres end:1\r\nres end:1\r\nres end:1\r\nres end:1\r\nres start:1\r\nres start:1\r\nres start:1\r\nres start:1\r\nres end:2\r\nres end:2\r\nres end:2\r\nres end:2\r\nres start:2\r\nres start:2\r\nres start:2\r\nres end:2\r\nres end:2\r\nres start:2\r\nres end:2\r\nres end:2\r\n2\r\n```\r\n\r\n\r\nWhy this happens in a single thread environment","title":"Java use global variable reset in iteration","body":"<p>I have the code work with iteration in a single thread enviorment:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.HashSet;\nimport java.util.Set;\n\nclass Solution {\n    int res = 0;\n\n    public static void main(String[] args) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n        String line;\n        while ((line = in.readLine()) != null) {\n            int n = Integer.parseInt(line);\n\n            int ret = new Solution().totalNQueens(n);\n\n            String out = String.valueOf(ret);\n\n            System.out.print(out);\n        }\n    }\n\n    public int totalNQueens(int n) {\n        Set&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\n        backTrace(n, 0, columns, record1, record2);\n        return res;\n    }\n\n    private int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\n        if (n == row) {\n            return 1;\n        }\n        for (int i = 0; i &lt; n; i++) {\n            if (columns.contains(i)) {\n                continue;\n            }\n            int check1 = row - i;\n            if (record1.contains(check1)) {\n                continue;\n            }\n            int check2 = row + i;\n            if (record2.contains(check2)) {\n                continue;\n            }\n            columns.add(i);\n            record1.add(check1);\n            record2.add(check2);\n            System.out.println(&quot;res start:&quot; + res);\n            res = res + backTrace(n, row + 1, columns, record1, record2);\n            System.out.println(&quot;res end:&quot; + res);\n            columns.remove(i);\n            record1.remove(check1);\n            record2.remove(check2);\n        }\n        return 0;\n    }\n}\n</code></pre>\n<p>the result of the code is below, and it seems the <code>res</code> reset when <code>res = res + backTrace(n, row + 1, columns, record1, record2);</code></p>\n<pre><code>res start:0\nres start:0\nres end:0\nres start:0\nres start:0\nres end:0\nres end:0\nres end:0\nres start:0\nres start:0\nres start:0\nres start:0\nres end:1\nres end:0\nres end:0\nres end:0\nres start:0\nres start:0\nres start:0\nres start:0\n</code></pre>\n<p>and when we change the code, let a new variable to save the result of backTrace, and it works fine.</p>\n<pre><code>package com.nbp.cdncp.vpe.api.controller;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.HashSet;\nimport java.util.Set;\n\nclass Solution {\n    int res = 0;\n\n    public static void main(String[] args) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n        String line;\n        while ((line = in.readLine()) != null) {\n            int n = Integer.parseInt(line);\n\n            int ret = new Solution().totalNQueens(n);\n\n            String out = String.valueOf(ret);\n\n            System.out.print(out);\n        }\n    }\n\n    public int totalNQueens(int n) {\n        Set&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\n        backTrace(n, 0, columns, record1, record2);\n        return res;\n    }\n\n    private int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\n        if (n == row) {\n            return 1;\n        }\n        for (int i = 0; i &lt; n; i++) {\n            if (columns.contains(i)) {\n                continue;\n            }\n            int check1 = row - i;\n            if (record1.contains(check1)) {\n                continue;\n            }\n            int check2 = row + i;\n            if (record2.contains(check2)) {\n                continue;\n            }\n            columns.add(i);\n            record1.add(check1);\n            record2.add(check2);\n            System.out.println(&quot;res start:&quot; + res);\n            var a = backTrace(n, row + 1, columns, record1, record2);\n            res += a;\n            System.out.println(&quot;res end:&quot; + res);\n            columns.remove(i);\n            record1.remove(check1);\n            record2.remove(check2);\n        }\n        return 0;\n    }\n}\n</code></pre>\n<p>the result:</p>\n<pre><code>res start:0\nres start:0\nres end:0\nres start:0\nres start:0\nres end:0\nres end:0\nres end:0\nres start:0\nres start:0\nres start:0\nres start:0\nres end:1\nres end:1\nres end:1\nres end:1\nres start:1\nres start:1\nres start:1\nres start:1\nres end:2\nres end:2\nres end:2\nres end:2\nres start:2\nres start:2\nres start:2\nres end:2\nres end:2\nres start:2\nres end:2\nres end:2\n2\n</code></pre>\n<p>Why this happens in a single thread environment</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1533893,"reputation":396,"user_id":1430422,"display_name":"Micha"},"score":1,"creation_date":1485552689,"post_id":41903311,"comment_id":70989037,"body_markdown":"That is what SharedPreferences are for. They&#39;re written to the filesystem.","body":"That is what SharedPreferences are for. They&#39;re written to the filesystem."}],"answers":[{"tags":[],"owner":{"account_id":7979628,"reputation":1144,"user_id":6021490,"accept_rate":75,"display_name":"skbrhmn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485554344,"creation_date":1485553456,"answer_id":41903503,"question_id":41903311,"body_markdown":"You could save the results in SharedPreferences every time they are updated. It will be stored there even if your app is killed. You could check for the values from SharedPreferences each time you start the activity again and set the checks accordingly.\r\n\r\nSetting up the SharedPreference:\r\n\r\n    SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);\r\n\r\nUpdating or editing sharedPreferences, you may add this to whenever you update the check buttons or during your onClick:\r\n\r\n    SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);\r\n    SharedPreferences.Editor editor = sharedPref.edit();\r\n    editor.putBoolean(&quot;checkBox1&quot;, true);\r\n    editor.commit();\r\n\r\nYou may read from sharedPreference:\r\n\r\n    Boolean defaultValue = sharedPref.getBoolean(&quot;checkBox1&quot;, defaultValue);\r\n\r\nYou can also look at the Android [documentation][1] or this [tutorial][2].\r\n\r\n\r\n  [1]: https://developer.android.com/training/basics/data-storage/shared-preferences.html#ReadSharedPreference\r\n  [2]: https://www.tutorialspoint.com/android/android_shared_preferences.htm","title":"How to save checkbox state even after app is closed","body":"<p>You could save the results in SharedPreferences every time they are updated. It will be stored there even if your app is killed. You could check for the values from SharedPreferences each time you start the activity again and set the checks accordingly.</p>\n\n<p>Setting up the SharedPreference:</p>\n\n<pre><code>SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);\n</code></pre>\n\n<p>Updating or editing sharedPreferences, you may add this to whenever you update the check buttons or during your onClick:</p>\n\n<pre><code>SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);\nSharedPreferences.Editor editor = sharedPref.edit();\neditor.putBoolean(\"checkBox1\", true);\neditor.commit();\n</code></pre>\n\n<p>You may read from sharedPreference:</p>\n\n<pre><code>Boolean defaultValue = sharedPref.getBoolean(\"checkBox1\", defaultValue);\n</code></pre>\n\n<p>You can also look at the Android <a href=\"https://developer.android.com/training/basics/data-storage/shared-preferences.html#ReadSharedPreference\" rel=\"nofollow noreferrer\">documentation</a> or this <a href=\"https://www.tutorialspoint.com/android/android_shared_preferences.htm\" rel=\"nofollow noreferrer\">tutorial</a>.</p>\n"},{"comments":[{"owner":{"account_id":10069733,"reputation":98,"user_id":7443725,"accept_rate":75,"display_name":"Dexter Fury Kombat Zone"},"score":0,"creation_date":1485673951,"post_id":41903505,"comment_id":71017992,"body_markdown":"Can you please explain more or show me how to add it to my code I can&#39;t seem to make it work...thanks","body":"Can you please explain more or show me how to add it to my code I can&#39;t seem to make it work...thanks"},{"owner":{"account_id":6684282,"reputation":342,"user_id":5156186,"display_name":"Sabriael"},"score":0,"creation_date":1485691016,"post_id":41903505,"comment_id":71022087,"body_markdown":"This should work: \nIn create method after setContentView: \n\n`final SharedPreferences sharedPref = RemindersActivity.this.getPreferences(Context.MODE_PRIVATE); \nboolean isMyValueChecked = sharedPref.getBoolean(&quot;checkbox&quot;, false); \nCheckBox checbox = (CheckBox) findViewById(R.id.checkbox_alert); \nchecbox.setChecked(isMyValueChecked);`\n\nin checkbox_alert.setOnClickListener: \n\n`SharedPreferences.Editor editor = sharedPref.edit(); \neditor.putBoolean(&quot;checkbox&quot;, ((CheckBox) view).isChecked()); \neditor.commit();` On create loading value from preferences, on click saving actual value.","body":"This should work:  In create method after setContentView:   <code>final SharedPreferences sharedPref = RemindersActivity.this.getPreferences(Context.MODE_PRIVATE);  boolean isMyValueChecked = sharedPref.getBoolean(&quot;checkbox&quot;, false);  CheckBox checbox = (CheckBox) findViewById(R.id.checkbox_alert);  checbox.setChecked(isMyValueChecked);</code>  in checkbox_alert.setOnClickListener:   <code>SharedPreferences.Editor editor = sharedPref.edit();  editor.putBoolean(&quot;checkbox&quot;, ((CheckBox) view).isChecked());  editor.commit();</code> On create loading value from preferences, on click saving actual value."}],"tags":[],"owner":{"account_id":6684282,"reputation":342,"user_id":5156186,"display_name":"Sabriael"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1485553479,"creation_date":1485553479,"answer_id":41903505,"question_id":41903311,"body_markdown":"Use shared preferences for this:\r\n\r\nTo write data to shared preferences use for example:\r\n\r\n    SharedPreferences sharedPref = activity.getPreferences(Context.MODE_PRIVATE);\r\n    SharedPreferences.Editor editor = sharedPref.edit();\r\n    editor.putBoolean(&quot;checkbox&quot;, checkbox.isChecked())); //first value -preference name, secend value -preference value\r\n    editor.commit();\r\n\r\nTo read from shared preferences:\r\n\r\n    SharedPreferences sharedPref = activity.getPreferences(Context.MODE_PRIVATE);\r\n    boolean isMyValueChecked = sharedPref.getBoolean(&quot;checkbox&quot;, false);//first value -preference name, secend value - default value if checbox not found\r\n","title":"How to save checkbox state even after app is closed","body":"<p>Use shared preferences for this:</p>\n\n<p>To write data to shared preferences use for example:</p>\n\n<pre><code>SharedPreferences sharedPref = activity.getPreferences(Context.MODE_PRIVATE);\nSharedPreferences.Editor editor = sharedPref.edit();\neditor.putBoolean(\"checkbox\", checkbox.isChecked())); //first value -preference name, secend value -preference value\neditor.commit();\n</code></pre>\n\n<p>To read from shared preferences:</p>\n\n<pre><code>SharedPreferences sharedPref = activity.getPreferences(Context.MODE_PRIVATE);\nboolean isMyValueChecked = sharedPref.getBoolean(\"checkbox\", false);//first value -preference name, secend value - default value if checbox not found\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8378642,"reputation":51,"user_id":6293866,"display_name":"Nikolas Manes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485554159,"creation_date":1485554159,"answer_id":41903673,"question_id":41903311,"body_markdown":"You have to use SharedPreferences as Micha, skbrhmn and Sabriael advise you to do. Follow the guide in the link below to help you how to do it.\r\n\r\nhttps://developer.android.com/training/basics/data-storage/shared-preferences.html\r\n\r\nmore details about SharedPreferences interface...\r\n\r\nhttps://developer.android.com/reference/android/content/SharedPreferences.html","title":"How to save checkbox state even after app is closed","body":"<p>You have to use SharedPreferences as Micha, skbrhmn and Sabriael advise you to do. Follow the guide in the link below to help you how to do it.</p>\n\n<p><a href=\"https://developer.android.com/training/basics/data-storage/shared-preferences.html\" rel=\"nofollow noreferrer\">https://developer.android.com/training/basics/data-storage/shared-preferences.html</a></p>\n\n<p>more details about SharedPreferences interface...</p>\n\n<p><a href=\"https://developer.android.com/reference/android/content/SharedPreferences.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/content/SharedPreferences.html</a></p>\n"},{"tags":[],"owner":{"account_id":9852526,"reputation":19,"user_id":7298148,"display_name":"Mohammad Sadegh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555157045,"creation_date":1555157045,"answer_id":55665228,"question_id":41903311,"body_markdown":"Here you can see my complete Java coding for this issue:\r\n    In onCreate Method() put these codes and your problem will get solved. My activity here is called SettingsActivity.\r\n\r\n        final SharedPreferences sharedPref = SettingsActivity.this.getPreferences(Context.MODE_PRIVATE);\r\n        boolean isMyValueChecked = sharedPref.getBoolean(&quot;checkbox&quot;, false);\r\n\r\n                CheckBox checkBox = (CheckBox) findViewById(R.id.chk_box_music);\r\n        checkBox.setChecked(isMyValueChecked);\r\n        checkBox.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                SharedPreferences.Editor editor = sharedPref.edit();\r\n                editor.putBoolean(&quot;checkbox&quot;, ((CheckBox) view).isChecked());\r\n                editor.commit();\r\n                if(checkBox.isChecked()){\r\n                    startService(new Intent(SettingsActivity.this, MyService.class));\r\n                }else{\r\n                    stopService(new Intent(SettingsActivity.this, MyService.class));\r\n                }\r\n            }\r\n        });","title":"How to save checkbox state even after app is closed","body":"<p>Here you can see my complete Java coding for this issue:\n    In onCreate Method() put these codes and your problem will get solved. My activity here is called SettingsActivity.</p>\n\n<pre><code>    final SharedPreferences sharedPref = SettingsActivity.this.getPreferences(Context.MODE_PRIVATE);\n    boolean isMyValueChecked = sharedPref.getBoolean(\"checkbox\", false);\n\n            CheckBox checkBox = (CheckBox) findViewById(R.id.chk_box_music);\n    checkBox.setChecked(isMyValueChecked);\n    checkBox.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            SharedPreferences.Editor editor = sharedPref.edit();\n            editor.putBoolean(\"checkbox\", ((CheckBox) view).isChecked());\n            editor.commit();\n            if(checkBox.isChecked()){\n                startService(new Intent(SettingsActivity.this, MyService.class));\n            }else{\n                stopService(new Intent(SettingsActivity.this, MyService.class));\n            }\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":10069733,"reputation":98,"user_id":7443725,"accept_rate":75,"display_name":"Dexter Fury Kombat Zone"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2826,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":41903505,"answer_count":4,"score":0,"last_activity_date":1684383217,"creation_date":1485552581,"question_id":41903311,"body_markdown":"Hello can anyone please help on how to save my checkbox state, when i leave the Activity, refresh or close the app my ckeckbox resets to unchecked. I have try to search around but i unable to make it save, below is my code\r\n\r\n        package com.example.android.xb;\r\n    \r\n    import android.app.AlarmManager;\r\n    import android.app.Dialog;\r\n    import android.app.PendingIntent;\r\n    import android.app.TimePickerDialog;\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.view.View;\r\n    import android.widget.CheckBox;\r\n    import android.widget.TextView;\r\n    import android.widget.TimePicker;\r\n    \r\n    import java.util.Calendar;\r\n    \r\n    public class RemindersActivity extends AppCompatActivity {\r\n    \r\n        Calendar calender = Calendar.getInstance();\r\n    \r\n        private TextView timePicker;\r\n    \r\n    \r\n        private int pHour;\r\n        private int pMinute;\r\n    \r\n        static final int TIME_DIALOG_ID = 0;\r\n    \r\n        private TimePickerDialog.OnTimeSetListener mTimeSetListener =\r\n                new TimePickerDialog.OnTimeSetListener() {\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n    \r\n                        pHour = hourOfDay;\r\n                        pMinute = minute;\r\n                        updateDisplay();\r\n    \r\n                    }\r\n                };\r\n    \r\n        private void updateDisplay() {\r\n            timePicker.setText(new StringBuilder()\r\n                    .append(pad(pHour)).append(&quot;:&quot;)\r\n                    .append(pad(pMinute)));\r\n        }\r\n    \r\n        private static String pad(int c) {\r\n            if (c &gt;= 10)\r\n                return String.valueOf(c);\r\n            else\r\n                return &quot;0&quot; + String.valueOf(c);\r\n        }\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_reminders);\r\n            \r\n            \r\n            // Display for up button\r\n            getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n            \r\n            // Setting up the onlick listener\r\n            findViewById(R.id.checkbox_alert).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n    \r\n                    if (((CheckBox) view).isChecked()) {\r\n                        \r\n                        \r\n                        // Time setup for notification to pop up\r\n                        calender.set(Calendar.HOUR_OF_DAY, pHour);\r\n                        calender.set(Calendar.MINUTE, pMinute);\r\n                        \r\n                        // Setting up the notification on checkbox checked\r\n                        Intent intent = new Intent(getApplicationContext(), NotificationReceiver.class);\r\n    \r\n                        PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 100,\r\n                                intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n    \r\n                        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);\r\n                        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calender.getTimeInMillis(),\r\n                                alarmManager.INTERVAL_DAY, pendingIntent);\r\n    \r\n    \r\n                    }\r\n                }\r\n    \r\n    \r\n            });\r\n            \r\n            // Setting up the onclick listener for time textView\r\n            timePicker = (TextView) findViewById(R.id.time_set);\r\n    \r\n            timePicker.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    showDialog(TIME_DIALOG_ID);\r\n                }\r\n            });\r\n    \r\n            final Calendar calendar = Calendar.getInstance();\r\n            pHour = calendar.get(Calendar.HOUR_OF_DAY);\r\n            pMinute = calendar.get(Calendar.MINUTE);\r\n    \r\n            updateDisplay();\r\n    \r\n        }\r\n    \r\n        @Override\r\n        protected Dialog onCreateDialog(int id) {\r\n            switch (id) {\r\n                case TIME_DIALOG_ID:\r\n                    return new TimePickerDialog(this, mTimeSetListener, pHour, pMinute, false);\r\n    \r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to save checkbox state even after app is closed","body":"<p>Hello can anyone please help on how to save my checkbox state, when i leave the Activity, refresh or close the app my ckeckbox resets to unchecked. I have try to search around but i unable to make it save, below is my code</p>\n\n<pre><code>    package com.example.android.xb;\n\nimport android.app.AlarmManager;\nimport android.app.Dialog;\nimport android.app.PendingIntent;\nimport android.app.TimePickerDialog;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.support.v7.app.AppCompatActivity;\nimport android.view.View;\nimport android.widget.CheckBox;\nimport android.widget.TextView;\nimport android.widget.TimePicker;\n\nimport java.util.Calendar;\n\npublic class RemindersActivity extends AppCompatActivity {\n\n    Calendar calender = Calendar.getInstance();\n\n    private TextView timePicker;\n\n\n    private int pHour;\n    private int pMinute;\n\n    static final int TIME_DIALOG_ID = 0;\n\n    private TimePickerDialog.OnTimeSetListener mTimeSetListener =\n            new TimePickerDialog.OnTimeSetListener() {\n                @Override\n                public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\n\n                    pHour = hourOfDay;\n                    pMinute = minute;\n                    updateDisplay();\n\n                }\n            };\n\n    private void updateDisplay() {\n        timePicker.setText(new StringBuilder()\n                .append(pad(pHour)).append(\":\")\n                .append(pad(pMinute)));\n    }\n\n    private static String pad(int c) {\n        if (c &gt;= 10)\n            return String.valueOf(c);\n        else\n            return \"0\" + String.valueOf(c);\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_reminders);\n\n\n        // Display for up button\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n\n        // Setting up the onlick listener\n        findViewById(R.id.checkbox_alert).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                if (((CheckBox) view).isChecked()) {\n\n\n                    // Time setup for notification to pop up\n                    calender.set(Calendar.HOUR_OF_DAY, pHour);\n                    calender.set(Calendar.MINUTE, pMinute);\n\n                    // Setting up the notification on checkbox checked\n                    Intent intent = new Intent(getApplicationContext(), NotificationReceiver.class);\n\n                    PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 100,\n                            intent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n                    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);\n                    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calender.getTimeInMillis(),\n                            alarmManager.INTERVAL_DAY, pendingIntent);\n\n\n                }\n            }\n\n\n        });\n\n        // Setting up the onclick listener for time textView\n        timePicker = (TextView) findViewById(R.id.time_set);\n\n        timePicker.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                showDialog(TIME_DIALOG_ID);\n            }\n        });\n\n        final Calendar calendar = Calendar.getInstance();\n        pHour = calendar.get(Calendar.HOUR_OF_DAY);\n        pMinute = calendar.get(Calendar.MINUTE);\n\n        updateDisplay();\n\n    }\n\n    @Override\n    protected Dialog onCreateDialog(int id) {\n        switch (id) {\n            case TIME_DIALOG_ID:\n                return new TimePickerDialog(this, mTimeSetListener, pHour, pMinute, false);\n\n        }\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","webapi"],"owner":{"account_id":28527063,"reputation":17,"user_id":21834984,"display_name":"user21834984"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684383152,"creation_date":1684382138,"question_id":76277626,"body_markdown":"I am working on an Android Studio project in which I get data from an API. I tried to get the data when I insert login information and get `userId` invisible, for example I want to put it in `Integer` instead of `TextView`. I have used `retrofit` to get data from the web API. When I tried to get the `userId`, I got an error with `int As Null value`. How can I solve it?\r\n\r\nMy web API code:\r\n```\r\n[HttpGet]\r\n        public IHttpActionResult getUser(string userName, string passWord)\r\n        {\r\n            List&lt;Person&gt; api = new List&lt;Person&gt;();\r\n            SqlConnection mainconn = new SqlConnection(ConfigurationManager.ConnectionStrings[&quot;MyConn&quot;].ConnectionString);\r\n            SqlCommand da = new SqlCommand(&quot;Select UserID, username, password from tblLogin where username = &#39;&quot; + userName + &quot;&#39; and password = &#39;&quot; + passWord + &quot;&#39;&quot;, mainconn);\r\n            mainconn.Open();\r\n            SqlDataReader dr = da.ExecuteReader();\r\n            while(dr.Read())\r\n            {\r\n                api.Add(new Person()\r\n                {\r\n                    UserID = Convert.ToDecimal(dr.GetValue(0)),\r\n                    username = Convert.ToString(dr.GetValue(1)),\r\n                    password = Convert.ToString(dr.GetValue(2))\r\n                });\r\n            }\r\n            var Response = new ApiResults\r\n            {\r\n                Results = api\r\n            };\r\n            if (api.Count &gt; 0)\r\n            {\r\n                return Ok(Response);\r\n            }\r\n            else\r\n            {\r\n                return Ok(&quot;No Data Found&quot;);\r\n            };\r\n        }\r\n```\r\n\r\nMy Java code:\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    Button btnLogin;\r\n    EditText edUsername, edPassword;\r\n    TextView txtPersonEye;\r\n    Integer id;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        btnLogin = findViewById(R.id.btnLogin);\r\n        edUsername = findViewById(R.id.etUsername);\r\n        edPassword = findViewById(R.id.etPassword);\r\n\r\n        btnLogin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if(TextUtils.isEmpty(edUsername.getText().toString()) || TextUtils.isEmpty(edPassword.getText().toString())) {\r\n                    String message = &quot;Please Insert Username and Password&quot;;\r\n                    Toast.makeText(MainActivity.this,message,Toast.LENGTH_LONG).show();\r\n                } else {\r\n                    LoginRequest loginRequest = new LoginRequest();\r\n                    loginRequest.setUsername(edUsername.getText().toString());\r\n                    loginRequest.setPassword(edPassword.getText().toString());\r\n                    loginUser(loginRequest);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\nLoginRequest loginRequest = new LoginRequest();\r\n        id = loginRequest.setUserId(loginRequest.getUserId());\r\n        IdGet(loginRequest);\r\n\r\n    public void IdGet(LoginRequest loginRequest)\r\n    {\r\n        Call&lt;LoginResponse&gt; loginResponseCall = ApiClient.getService().PersonEyeGet(id);\r\n        loginResponseCall.enqueue(new Callback&lt;LoginResponse&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;LoginResponse&gt; call, Response&lt;LoginResponse&gt; response) {\r\n                if(response.isSuccessful()) {\r\n                    LoginResponse loginResponse = response.body();\r\n                }\r\n                else\r\n                {\r\n                    String message = &quot;No User Found&quot;;\r\n                    Toast.makeText(Visitor.this, message, Toast.LENGTH_LONG).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call&lt;LoginResponse&gt; call, Throwable t) {\r\n                String message = &quot;User Data Missing&quot;;\r\n                Toast.makeText(Visitor.this, message, Toast.LENGTH_LONG).show();\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nLogin request:\r\n```\r\npublic class LoginRequest {\r\n\r\n    public Integer UserID;\r\n    private String username;\r\n    private String password;\r\n\r\n    public Integer getUserID() {\r\n        return UserID;\r\n    }\r\n\r\n    public void setUserID(Integer userID) {\r\n        UserID = userID;\r\n    }\r\n\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n}\r\n```\r\n\r\nLogin response:\r\n```\r\npublic class LoginResponse implements Serializable {\r\n\r\n    private Integer UserID;\r\n    private String username;\r\n    private List&lt;LoginRequest&gt; loginRequests = null;\r\n\r\n    public Integer getUserID() {\r\n        return UserID;\r\n    }\r\n\r\n    public void setUserID(Integer userID) {\r\n        UserID = userID;\r\n    }\r\n\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public List&lt;LoginRequest&gt; getLoginRequests(){\r\n        return loginRequests;\r\n    }\r\n\r\n    public void setLoginRequests(List&lt;LoginRequest&gt; loginRequests) {\r\n        this.loginRequests = loginRequests;\r\n    }\r\n}\r\n```\r\n\r\nApiClient:\r\n```\r\npublic class ApiClient {\r\n    public static Retrofit getRetrofit() {\r\n\r\n        HttpLoggingInterceptor httpLoggingInterceptor = new HttpLoggingInterceptor();\r\n        httpLoggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\r\n\r\n        OkHttpClient okHttpClient = new OkHttpClient.Builder().addInterceptor(httpLoggingInterceptor).build();\r\n\r\n\r\n        Retrofit retrofit = new Retrofit.Builder()\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .baseUrl(&quot;http://XXX.XX.XXX.X/webapi/&quot;)\r\n                .client(okHttpClient)\r\n                .build();\r\n\r\n        return retrofit;\r\n    }\r\n\r\n    public static UserService getService() {\r\n        UserService userService = getRetrofit().create(UserService.class);\r\n\r\n        return userService;\r\n    }\r\n}\r\n```\r\nAny help in this matter is welcome.","title":"how to get userId when login into android studio project","body":"<p>I am working on an Android Studio project in which I get data from an API. I tried to get the data when I insert login information and get <code>userId</code> invisible, for example I want to put it in <code>Integer</code> instead of <code>TextView</code>. I have used <code>retrofit</code> to get data from the web API. When I tried to get the <code>userId</code>, I got an error with <code>int As Null value</code>. How can I solve it?</p>\n<p>My web API code:</p>\n<pre><code>[HttpGet]\n        public IHttpActionResult getUser(string userName, string passWord)\n        {\n            List&lt;Person&gt; api = new List&lt;Person&gt;();\n            SqlConnection mainconn = new SqlConnection(ConfigurationManager.ConnectionStrings[&quot;MyConn&quot;].ConnectionString);\n            SqlCommand da = new SqlCommand(&quot;Select UserID, username, password from tblLogin where username = '&quot; + userName + &quot;' and password = '&quot; + passWord + &quot;'&quot;, mainconn);\n            mainconn.Open();\n            SqlDataReader dr = da.ExecuteReader();\n            while(dr.Read())\n            {\n                api.Add(new Person()\n                {\n                    UserID = Convert.ToDecimal(dr.GetValue(0)),\n                    username = Convert.ToString(dr.GetValue(1)),\n                    password = Convert.ToString(dr.GetValue(2))\n                });\n            }\n            var Response = new ApiResults\n            {\n                Results = api\n            };\n            if (api.Count &gt; 0)\n            {\n                return Ok(Response);\n            }\n            else\n            {\n                return Ok(&quot;No Data Found&quot;);\n            };\n        }\n</code></pre>\n<p>My Java code:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    Button btnLogin;\n    EditText edUsername, edPassword;\n    TextView txtPersonEye;\n    Integer id;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        btnLogin = findViewById(R.id.btnLogin);\n        edUsername = findViewById(R.id.etUsername);\n        edPassword = findViewById(R.id.etPassword);\n\n        btnLogin.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if(TextUtils.isEmpty(edUsername.getText().toString()) || TextUtils.isEmpty(edPassword.getText().toString())) {\n                    String message = &quot;Please Insert Username and Password&quot;;\n                    Toast.makeText(MainActivity.this,message,Toast.LENGTH_LONG).show();\n                } else {\n                    LoginRequest loginRequest = new LoginRequest();\n                    loginRequest.setUsername(edUsername.getText().toString());\n                    loginRequest.setPassword(edPassword.getText().toString());\n                    loginUser(loginRequest);\n                }\n            }\n        });\n    }\n\nLoginRequest loginRequest = new LoginRequest();\n        id = loginRequest.setUserId(loginRequest.getUserId());\n        IdGet(loginRequest);\n\n    public void IdGet(LoginRequest loginRequest)\n    {\n        Call&lt;LoginResponse&gt; loginResponseCall = ApiClient.getService().PersonEyeGet(id);\n        loginResponseCall.enqueue(new Callback&lt;LoginResponse&gt;() {\n            @Override\n            public void onResponse(Call&lt;LoginResponse&gt; call, Response&lt;LoginResponse&gt; response) {\n                if(response.isSuccessful()) {\n                    LoginResponse loginResponse = response.body();\n                }\n                else\n                {\n                    String message = &quot;No User Found&quot;;\n                    Toast.makeText(Visitor.this, message, Toast.LENGTH_LONG).show();\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;LoginResponse&gt; call, Throwable t) {\n                String message = &quot;User Data Missing&quot;;\n                Toast.makeText(Visitor.this, message, Toast.LENGTH_LONG).show();\n            }\n        });\n    }\n}\n</code></pre>\n<p>Login request:</p>\n<pre><code>public class LoginRequest {\n\n    public Integer UserID;\n    private String username;\n    private String password;\n\n    public Integer getUserID() {\n        return UserID;\n    }\n\n    public void setUserID(Integer userID) {\n        UserID = userID;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n}\n</code></pre>\n<p>Login response:</p>\n<pre><code>public class LoginResponse implements Serializable {\n\n    private Integer UserID;\n    private String username;\n    private List&lt;LoginRequest&gt; loginRequests = null;\n\n    public Integer getUserID() {\n        return UserID;\n    }\n\n    public void setUserID(Integer userID) {\n        UserID = userID;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public List&lt;LoginRequest&gt; getLoginRequests(){\n        return loginRequests;\n    }\n\n    public void setLoginRequests(List&lt;LoginRequest&gt; loginRequests) {\n        this.loginRequests = loginRequests;\n    }\n}\n</code></pre>\n<p>ApiClient:</p>\n<pre><code>public class ApiClient {\n    public static Retrofit getRetrofit() {\n\n        HttpLoggingInterceptor httpLoggingInterceptor = new HttpLoggingInterceptor();\n        httpLoggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\n\n        OkHttpClient okHttpClient = new OkHttpClient.Builder().addInterceptor(httpLoggingInterceptor).build();\n\n\n        Retrofit retrofit = new Retrofit.Builder()\n                .addConverterFactory(GsonConverterFactory.create())\n                .baseUrl(&quot;http://XXX.XX.XXX.X/webapi/&quot;)\n                .client(okHttpClient)\n                .build();\n\n        return retrofit;\n    }\n\n    public static UserService getService() {\n        UserService userService = getRetrofit().create(UserService.class);\n\n        return userService;\n    }\n}\n</code></pre>\n<p>Any help in this matter is welcome.</p>\n"},{"tags":["java","spring-boot","tomcat","google-cloud-api-gateway"],"comments":[{"owner":{"account_id":10642654,"reputation":66,"user_id":7837181,"display_name":"impune"},"score":0,"creation_date":1684388496,"post_id":76277639,"comment_id":134511637,"body_markdown":"Does Tomcat throw any exceptions?","body":"Does Tomcat throw any exceptions?"},{"owner":{"account_id":24326117,"reputation":2235,"user_id":18265638,"display_name":"Sathi Aiswarya"},"score":0,"creation_date":1684394938,"post_id":76277639,"comment_id":134512492,"body_markdown":"You need to encode the URL before triggering the API Request.","body":"You need to encode the URL before triggering the API Request."}],"owner":{"account_id":3092274,"reputation":83,"user_id":2618166,"display_name":"Bhushan Phalak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684382331,"creation_date":1684382331,"question_id":76277639,"body_markdown":"I have Implemented cloud API Gateway with eureka service discovery.\r\n\r\nWhen I am calling my REST end point using API Gateway URL with query parameter including &quot;^&quot; special character, I am getting **400 Bad Request** Response.\r\n*http://localhost:8080/gateway/api/v1/test?value=ABC^XYZ*\r\n\r\nIf I am calling direct API end point without API Gateway its working fine\r\n*http://localhost:8080/api/v1/test?value=ABC^XYZ*\r\n\r\nIn property file I am using below setting in both projects\r\n**server.tomcat.relaxed-query-char=^**\r\n\r\nPlease help me what is an exact issue.\r\n\r\nThanks\r\n\r\n\r\n","title":"Cloud Api Gateway not working with ^ special character","body":"<p>I have Implemented cloud API Gateway with eureka service discovery.</p>\n<p>When I am calling my REST end point using API Gateway URL with query parameter including &quot;^&quot; special character, I am getting <strong>400 Bad Request</strong> Response.\n<em>http://localhost:8080/gateway/api/v1/test?value=ABC^XYZ</em></p>\n<p>If I am calling direct API end point without API Gateway its working fine\n<em>http://localhost:8080/api/v1/test?value=ABC^XYZ</em></p>\n<p>In property file I am using below setting in both projects\n<strong>server.tomcat.relaxed-query-char=^</strong></p>\n<p>Please help me what is an exact issue.</p>\n<p>Thanks</p>\n"},{"tags":["java","android","sqlite"],"answers":[{"comments":[{"owner":{"account_id":27597815,"reputation":1,"user_id":21063664,"display_name":"John Roald Comargo"},"score":0,"creation_date":1684373577,"post_id":76274921,"comment_id":134510472,"body_markdown":"I have already tried that last night but I am still getting the same error","body":"I have already tried that last night but I am still getting the same error"},{"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"score":0,"creation_date":1684380527,"post_id":76274921,"comment_id":134510934,"body_markdown":"I have edited my answer with the changes I had suggested. Please check the answer again. It has the output also. It should work for you also.","body":"I have edited my answer with the changes I had suggested. Please check the answer again. It has the output also. It should work for you also."},{"owner":{"account_id":27597815,"reputation":1,"user_id":21063664,"display_name":"John Roald Comargo"},"score":0,"creation_date":1685112495,"post_id":76274921,"comment_id":134620569,"body_markdown":"Thank you it appears that all I needed to do was to uninstall and install the app from the emulator to make it work XDD I appreciate the help very much ^ ^","body":"Thank you it appears that all I needed to do was to uninstall and install the app from the emulator to make it work XDD I appreciate the help very much ^ ^"}],"tags":[],"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684380459,"creation_date":1684345901,"answer_id":76274921,"question_id":76273868,"body_markdown":"One mistake is, in the method addProject(), you are opening the database in the Read mode (getReadableDatabase()). It has to be in the Write mode getWritableDatabase() for inserting data into table. Also, after you insert the data, make it a point to close it by calling the close() method.\r\n\r\nI tried running this code snippet with the changes I suggested, on my laptop and its working very fine. Its creating the database with 2 tables Users and Project. Also, its inserting the data into the Project table.  I have attached the image of the output (database inspector) where you can clearly see the 2 tables and the new record inserted into Project table. You can check it out.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    private EditText projectName, description, team, projectManager;\r\n    Button done;\r\n    userDB db;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        projectName = findViewById(R.id.projectName);\r\n        description = findViewById(R.id.description);\r\n        team = findViewById(R.id.team);\r\n        projectManager = findViewById(R.id.projectManager);\r\n        done = findViewById(R.id.button);\r\n\r\n        done.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String projectname = projectName.getText().toString().trim();\r\n                String desc = description.getText().toString().trim();\r\n                String Team = team.getText().toString().trim();\r\n                String projectmanage = projectManager.getText().toString().trim();\r\n\r\n                if(projectname.equals(&quot;&quot;) || desc.equals(&quot;&quot;) || Team.equals(&quot;&quot;) ||\r\n                        projectmanage.equals(&quot;&quot;)){\r\n                    Toast.makeText(MainActivity.this, &quot;All Fields are Required&quot;, Toast.LENGTH_SHORT).show();\r\n                }else{\r\n                    db = new userDB(MainActivity.this);\r\n                    db.addProject(projectName.getText().toString().trim(),\r\n                            description.getText().toString().trim(),\r\n                            team.getText().toString().trim(),\r\n                            projectManager.getText().toString().trim());\r\n\r\n                    db.queryDB();\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nHere is the userDB class\r\n\r\n    public class userDB extends SQLiteOpenHelper {\r\n\r\n    private static final String DATABASE_NAME = &quot;myDB&quot;;\r\n    private static final int DATABASE_VERSION = 1;\r\n\r\n    private static final String TABLE_NAME = &quot;Users&quot;;\r\n    private static final String COLUMN_ID = &quot;_id&quot;;\r\n    private static final String COLUMN_USERNAME = &quot;Username&quot;;\r\n    private static final String COLUMN_PASSWORD = &quot;Password&quot;;\r\n    //    Column and table for new project\r\n    private static final String PROJECT_TABLE = &quot;Project&quot;;\r\n    private static final String COLUMN_id = &quot;id&quot;;\r\n    private static final String COLUMN_PROJECT_NAME = &quot;projectName&quot;;\r\n    private static final String COLUMN_DESCRIPTION = &quot;description&quot;;\r\n    private static final String COLUMN_TEAM = &quot;team&quot;;\r\n    private static final String COLUMN_PROJECT_MANAGER = &quot;Project_Manager&quot;;\r\n\r\n    private Context context ;\r\n    public userDB(Context context) {\r\n        super(context, DATABASE_NAME, null, DATABASE_VERSION);\r\n        context = context;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        String query =  &quot;CREATE TABLE &quot; + TABLE_NAME +\r\n                &quot;(&quot; + COLUMN_ID +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\r\n                COLUMN_USERNAME + &quot; TEXT, &quot; +\r\n                COLUMN_PASSWORD + &quot; TEXT);&quot;;\r\n\r\n        String project = &quot;CREATE TABLE &quot; + PROJECT_TABLE +\r\n                &quot;(&quot; + COLUMN_id +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\r\n                COLUMN_PROJECT_NAME + &quot; TEXT, &quot; +\r\n                COLUMN_DESCRIPTION + &quot; TEXT, &quot; +\r\n                COLUMN_TEAM + &quot; TEXT, &quot; +\r\n                COLUMN_PROJECT_MANAGER + &quot; TEXT);&quot;;\r\n        db.execSQL(project);\r\n        db.execSQL(query);\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int i, int i1) {\r\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\r\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + PROJECT_TABLE);\r\n        onCreate(db);\r\n\r\n    }\r\n\r\n    public void addProject(String projectName, String Description, String team, String projectManager){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n        cv.put(COLUMN_PROJECT_NAME, projectName);\r\n        cv.put(COLUMN_DESCRIPTION, Description);\r\n        cv.put(COLUMN_TEAM, team);\r\n        cv.put(COLUMN_PROJECT_MANAGER, projectManager);\r\n        long result = db.insert(PROJECT_TABLE, null ,cv);\r\n        if(result == -1){\r\n            Toast.makeText(context, &quot;Failed to add new project&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Successfully added new project&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        db.close();\r\n    }\r\n\r\n    public void queryDB() {\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        Cursor cursor = db.query(TABLE_NAME, null, null,\r\n                null, null, null, null, null);\r\n        if (cursor != null) {\r\n            if (cursor.moveToFirst()) {\r\n                for (int i = 0; i &lt; cursor.getCount(); i++){\r\n                    //TODO: replace numbers with column count constants\r\n                    Toast.makeText(context, cursor.getString(0), Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n            cursor.close();\r\n        }\r\n        db.close();\r\n    }\r\n}\r\n\r\nAnd the output (Database inspector) is here:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZolMd.jpg","title":"Why does android studio kept telling me I havent made a project table in my database even though I made one?","body":"<p>One mistake is, in the method addProject(), you are opening the database in the Read mode (getReadableDatabase()). It has to be in the Write mode getWritableDatabase() for inserting data into table. Also, after you insert the data, make it a point to close it by calling the close() method.</p>\n<p>I tried running this code snippet with the changes I suggested, on my laptop and its working very fine. Its creating the database with 2 tables Users and Project. Also, its inserting the data into the Project table.  I have attached the image of the output (database inspector) where you can clearly see the 2 tables and the new record inserted into Project table. You can check it out.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nprivate EditText projectName, description, team, projectManager;\nButton done;\nuserDB db;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    projectName = findViewById(R.id.projectName);\n    description = findViewById(R.id.description);\n    team = findViewById(R.id.team);\n    projectManager = findViewById(R.id.projectManager);\n    done = findViewById(R.id.button);\n\n    done.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            String projectname = projectName.getText().toString().trim();\n            String desc = description.getText().toString().trim();\n            String Team = team.getText().toString().trim();\n            String projectmanage = projectManager.getText().toString().trim();\n\n            if(projectname.equals(&quot;&quot;) || desc.equals(&quot;&quot;) || Team.equals(&quot;&quot;) ||\n                    projectmanage.equals(&quot;&quot;)){\n                Toast.makeText(MainActivity.this, &quot;All Fields are Required&quot;, Toast.LENGTH_SHORT).show();\n            }else{\n                db = new userDB(MainActivity.this);\n                db.addProject(projectName.getText().toString().trim(),\n                        description.getText().toString().trim(),\n                        team.getText().toString().trim(),\n                        projectManager.getText().toString().trim());\n\n                db.queryDB();\n            }\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n<p>Here is the userDB class</p>\n<pre><code>public class userDB extends SQLiteOpenHelper {\n\nprivate static final String DATABASE_NAME = &quot;myDB&quot;;\nprivate static final int DATABASE_VERSION = 1;\n\nprivate static final String TABLE_NAME = &quot;Users&quot;;\nprivate static final String COLUMN_ID = &quot;_id&quot;;\nprivate static final String COLUMN_USERNAME = &quot;Username&quot;;\nprivate static final String COLUMN_PASSWORD = &quot;Password&quot;;\n//    Column and table for new project\nprivate static final String PROJECT_TABLE = &quot;Project&quot;;\nprivate static final String COLUMN_id = &quot;id&quot;;\nprivate static final String COLUMN_PROJECT_NAME = &quot;projectName&quot;;\nprivate static final String COLUMN_DESCRIPTION = &quot;description&quot;;\nprivate static final String COLUMN_TEAM = &quot;team&quot;;\nprivate static final String COLUMN_PROJECT_MANAGER = &quot;Project_Manager&quot;;\n\nprivate Context context ;\npublic userDB(Context context) {\n    super(context, DATABASE_NAME, null, DATABASE_VERSION);\n    context = context;\n}\n\n@Override\npublic void onCreate(SQLiteDatabase db) {\n    String query =  &quot;CREATE TABLE &quot; + TABLE_NAME +\n            &quot;(&quot; + COLUMN_ID +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n            COLUMN_USERNAME + &quot; TEXT, &quot; +\n            COLUMN_PASSWORD + &quot; TEXT);&quot;;\n\n    String project = &quot;CREATE TABLE &quot; + PROJECT_TABLE +\n            &quot;(&quot; + COLUMN_id +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n            COLUMN_PROJECT_NAME + &quot; TEXT, &quot; +\n            COLUMN_DESCRIPTION + &quot; TEXT, &quot; +\n            COLUMN_TEAM + &quot; TEXT, &quot; +\n            COLUMN_PROJECT_MANAGER + &quot; TEXT);&quot;;\n    db.execSQL(project);\n    db.execSQL(query);\n}\n\n@Override\npublic void onUpgrade(SQLiteDatabase db, int i, int i1) {\n    db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\n    db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + PROJECT_TABLE);\n    onCreate(db);\n\n}\n\npublic void addProject(String projectName, String Description, String team, String projectManager){\n    SQLiteDatabase db = this.getWritableDatabase();\n    ContentValues cv = new ContentValues();\n    cv.put(COLUMN_PROJECT_NAME, projectName);\n    cv.put(COLUMN_DESCRIPTION, Description);\n    cv.put(COLUMN_TEAM, team);\n    cv.put(COLUMN_PROJECT_MANAGER, projectManager);\n    long result = db.insert(PROJECT_TABLE, null ,cv);\n    if(result == -1){\n        Toast.makeText(context, &quot;Failed to add new project&quot;, Toast.LENGTH_SHORT).show();\n    }else{\n        Toast.makeText(context, &quot;Successfully added new project&quot;, Toast.LENGTH_SHORT).show();\n    }\n    db.close();\n}\n\npublic void queryDB() {\n    SQLiteDatabase db = this.getReadableDatabase();\n    Cursor cursor = db.query(TABLE_NAME, null, null,\n            null, null, null, null, null);\n    if (cursor != null) {\n        if (cursor.moveToFirst()) {\n            for (int i = 0; i &lt; cursor.getCount(); i++){\n                //TODO: replace numbers with column count constants\n                Toast.makeText(context, cursor.getString(0), Toast.LENGTH_SHORT).show();\n            }\n        }\n        cursor.close();\n    }\n    db.close();\n}\n</code></pre>\n<p>}</p>\n<p>And the output (Database inspector) is here:\n<a href=\"https://i.stack.imgur.com/ZolMd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZolMd.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":27597815,"reputation":1,"user_id":21063664,"display_name":"John Roald Comargo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684380459,"creation_date":1684338021,"question_id":76273868,"body_markdown":"I made two table one for user and one for project but project is not being made for some reason\r\n```\r\n    private static final String TABLE_NAME = &quot;Users&quot;;\r\n    private static final String COLUMN_ID = &quot;_id&quot;;\r\n    private static final String COLUMN_USERNAME = &quot;Username&quot;;\r\n    private static final String COLUMN_PASSWORD = &quot;Password&quot;;\r\n//    Column and table for new project\r\n    private static final String PROJECT_TABLE = &quot;Project&quot;;\r\n    private static final String COLUMN_id = &quot;id&quot;;\r\n    private static final String COLUMN_PROJECT_NAME = &quot;projectName&quot;;\r\n    private static final String COLUMN_DESCRIPTION = &quot;description&quot;;\r\n    private static final String COLUMN_TEAM = &quot;team&quot;;\r\n    private static final String COLUMN_PROJECT_MANAGER = &quot;Project_Manager&quot;;\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        String query =  &quot;CREATE TABLE &quot; + TABLE_NAME +\r\n                &quot;(&quot; + COLUMN_ID +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\r\n                COLUMN_USERNAME + &quot; TEXT, &quot; +\r\n                COLUMN_PASSWORD + &quot; TEXT);&quot;;\r\n\r\n        String project = &quot;CREATE TABLE &quot; + PROJECT_TABLE +\r\n                &quot;(&quot; + COLUMN_id +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\r\n                COLUMN_PROJECT_NAME + &quot; TEXT, &quot; +\r\n                COLUMN_DESCRIPTION + &quot; TEXT, &quot; +\r\n                COLUMN_TEAM + &quot; TEXT, &quot; +\r\n                COLUMN_PROJECT_MANAGER + &quot; TEXT);&quot;;\r\n        db.execSQL(project);\r\n        db.execSQL(query);\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int i, int i1) {\r\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\r\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + PROJECT_TABLE);\r\n        onCreate(db);\r\n\r\n    }\r\n\r\n    void addProject(String projectName, String Description, String team, String projectManager){\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n        cv.put(COLUMN_PROJECT_NAME, projectName);\r\n        cv.put(COLUMN_DESCRIPTION, Description);\r\n        cv.put(COLUMN_TEAM, team);\r\n        cv.put(COLUMN_PROJECT_MANAGER, projectManager);\r\n        long result = db.insert(PROJECT_TABLE, null ,cv);\r\n        if(result == -1){\r\n            Toast.makeText(context, &quot;Failed to add new project&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Successfully added new project&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n``` \r\nin my project java class I thought that maybe the data is not properly being inserted to the database so what I did was in the db.addProject I coded it to get the strings and text but it still didnt work\r\n```\r\n\r\npublic class Board extends AppCompatActivity {\r\n    private EditText projectName, description, team, projectManager;\r\n    Button done;\r\n    userDB db;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_board);\r\n        projectName = findViewById(R.id.projectName);\r\n        description = findViewById(R.id.description);\r\n        team = findViewById(R.id.team);\r\n        projectManager = findViewById(R.id.projectManager);\r\n        done = findViewById(R.id.button);\r\n\r\n        done.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String projectname = projectName.getText().toString().trim();\r\n                String desc = description.getText().toString().trim();\r\n                String Team = team.getText().toString().trim();\r\n                String projectmanage = projectManager.getText().toString().trim();\r\n\r\n                if(projectname.equals(&quot;&quot;) || desc.equals(&quot;&quot;) || Team.equals(&quot;&quot;) ||\r\n                projectmanage.equals(&quot;&quot;)){\r\n                    Toast.makeText(Board.this, &quot;All Fields are Required&quot;, Toast.LENGTH_SHORT).show();\r\n                }else{\r\n                    db = new userDB(Board.this);\r\n                    db.addProject(projectName.getText().toString().trim(),\r\n                            description.getText().toString().trim(),\r\n                            team.getText().toString().trim(),\r\n                            projectManager.getText().toString().trim());\r\n                    Intent intent = new Intent(Board.this, MainActivity.class);\r\n                    startActivity(intent);\r\n                    finish();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nI have tried retconning some syntaxes but it all ends up in the same error. I have been stuck with this same error for 3 hrs and I dont know what to do anymore ;-;","title":"Why does android studio kept telling me I havent made a project table in my database even though I made one?","body":"<p>I made two table one for user and one for project but project is not being made for some reason</p>\n<pre><code>    private static final String TABLE_NAME = &quot;Users&quot;;\n    private static final String COLUMN_ID = &quot;_id&quot;;\n    private static final String COLUMN_USERNAME = &quot;Username&quot;;\n    private static final String COLUMN_PASSWORD = &quot;Password&quot;;\n//    Column and table for new project\n    private static final String PROJECT_TABLE = &quot;Project&quot;;\n    private static final String COLUMN_id = &quot;id&quot;;\n    private static final String COLUMN_PROJECT_NAME = &quot;projectName&quot;;\n    private static final String COLUMN_DESCRIPTION = &quot;description&quot;;\n    private static final String COLUMN_TEAM = &quot;team&quot;;\n    private static final String COLUMN_PROJECT_MANAGER = &quot;Project_Manager&quot;;\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        String query =  &quot;CREATE TABLE &quot; + TABLE_NAME +\n                &quot;(&quot; + COLUMN_ID +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n                COLUMN_USERNAME + &quot; TEXT, &quot; +\n                COLUMN_PASSWORD + &quot; TEXT);&quot;;\n\n        String project = &quot;CREATE TABLE &quot; + PROJECT_TABLE +\n                &quot;(&quot; + COLUMN_id +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n                COLUMN_PROJECT_NAME + &quot; TEXT, &quot; +\n                COLUMN_DESCRIPTION + &quot; TEXT, &quot; +\n                COLUMN_TEAM + &quot; TEXT, &quot; +\n                COLUMN_PROJECT_MANAGER + &quot; TEXT);&quot;;\n        db.execSQL(project);\n        db.execSQL(query);\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int i, int i1) {\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + PROJECT_TABLE);\n        onCreate(db);\n\n    }\n\n    void addProject(String projectName, String Description, String team, String projectManager){\n        SQLiteDatabase db = this.getReadableDatabase();\n        ContentValues cv = new ContentValues();\n        cv.put(COLUMN_PROJECT_NAME, projectName);\n        cv.put(COLUMN_DESCRIPTION, Description);\n        cv.put(COLUMN_TEAM, team);\n        cv.put(COLUMN_PROJECT_MANAGER, projectManager);\n        long result = db.insert(PROJECT_TABLE, null ,cv);\n        if(result == -1){\n            Toast.makeText(context, &quot;Failed to add new project&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added new project&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n</code></pre>\n<p>in my project java class I thought that maybe the data is not properly being inserted to the database so what I did was in the db.addProject I coded it to get the strings and text but it still didnt work</p>\n<pre><code>\npublic class Board extends AppCompatActivity {\n    private EditText projectName, description, team, projectManager;\n    Button done;\n    userDB db;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_board);\n        projectName = findViewById(R.id.projectName);\n        description = findViewById(R.id.description);\n        team = findViewById(R.id.team);\n        projectManager = findViewById(R.id.projectManager);\n        done = findViewById(R.id.button);\n\n        done.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String projectname = projectName.getText().toString().trim();\n                String desc = description.getText().toString().trim();\n                String Team = team.getText().toString().trim();\n                String projectmanage = projectManager.getText().toString().trim();\n\n                if(projectname.equals(&quot;&quot;) || desc.equals(&quot;&quot;) || Team.equals(&quot;&quot;) ||\n                projectmanage.equals(&quot;&quot;)){\n                    Toast.makeText(Board.this, &quot;All Fields are Required&quot;, Toast.LENGTH_SHORT).show();\n                }else{\n                    db = new userDB(Board.this);\n                    db.addProject(projectName.getText().toString().trim(),\n                            description.getText().toString().trim(),\n                            team.getText().toString().trim(),\n                            projectManager.getText().toString().trim());\n                    Intent intent = new Intent(Board.this, MainActivity.class);\n                    startActivity(intent);\n                    finish();\n                }\n            }\n        });\n\n\n    }\n}\n</code></pre>\n<p>I have tried retconning some syntaxes but it all ends up in the same error. I have been stuck with this same error for 3 hrs and I dont know what to do anymore ;-;</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1683630265,"post_id":76207607,"comment_id":134392792,"body_markdown":"[We need proper info](https://technojeeves.com/index.php/aliasjava1/77-doesntwork)","body":"<a href=\"https://technojeeves.com/index.php/aliasjava1/77-doesntwork\" rel=\"nofollow noreferrer\">We need proper info</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683638742,"post_id":76207607,"comment_id":134394883,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684380227,"creation_date":1684379888,"answer_id":76277507,"question_id":76207607,"body_markdown":"The documentation for `ServletRequest.setCharacterEncoding` says the following.\r\n\r\n&gt; ... This method must be called prior to reading request parameters or reading input using getReader(). Otherwise, it has no effect.\r\n\r\n[ServletRequest (JavaEE 7 JavaDoc)](https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#setCharacterEncoding-java.lang.String-)\r\n\r\n\r\nIf that doesn&#39;t help, you can convert your `byte` array to a new `String` object, and supply the charset.\r\n\r\n```java\r\ntry (InputStream stream = new DataInputStream(request.getInputStream())) {\r\n    byte[] bytes = stream.readAllBytes();\r\n    String string = new String(bytes, StandardCharsets.UTF_8);\r\n}\r\n```\r\n\r\nAdditionally, you can try using the following, as opposed to explicitly typing &quot;UTF-8&quot;.\r\n\r\n```java\r\nrequest.setCharacterEncoding(StandardCharsets.UTF_8.name());","title":"request.getParamater encoding utf-8","body":"<p>The documentation for <code>ServletRequest.setCharacterEncoding</code> says the following.</p>\n<blockquote>\n<p>... This method must be called prior to reading request parameters or reading input using getReader(). Otherwise, it has no effect.</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#setCharacterEncoding-java.lang.String-\" rel=\"nofollow noreferrer\">ServletRequest (JavaEE 7 JavaDoc)</a></p>\n<p>If that doesn't help, you can convert your <code>byte</code> array to a new <code>String</code> object, and supply the charset.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (InputStream stream = new DataInputStream(request.getInputStream())) {\n    byte[] bytes = stream.readAllBytes();\n    String string = new String(bytes, StandardCharsets.UTF_8);\n}\n</code></pre>\n<p>Additionally, you can try using the following, as opposed to explicitly typing &quot;UTF-8&quot;.</p>\n<pre class=\"lang-java prettyprint-override\"><code>request.setCharacterEncoding(StandardCharsets.UTF_8.name());\n</code></pre>\n"}],"owner":{"account_id":28555910,"reputation":1,"user_id":21860120,"display_name":"Ng&#244; Ph&#250;c Trường"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684380227,"creation_date":1683623342,"question_id":76207607,"body_markdown":"I want to get my parameters from the request (characters with accents) but it doesn&#39;t work.\r\n\r\n\r\n I tried to user request.setCharacterEncoding(&quot;UTF-8&quot;) but it didn&#39;t work either.\r\nhow can i solve this problem?\r\nthanks.","title":"request.getParamater encoding utf-8","body":"<p>I want to get my parameters from the request (characters with accents) but it doesn't work.</p>\n<p>I tried to user request.setCharacterEncoding(&quot;UTF-8&quot;) but it didn't work either.\nhow can i solve this problem?\nthanks.</p>\n"},{"tags":["java","dfd"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1571675902,"post_id":58490605,"comment_id":103311402,"body_markdown":"https://stackoverflow.com/questions/10474008/how-to-create-data-flow-diagrams-using-java","body":"<a href=\"https://stackoverflow.com/questions/10474008/how-to-create-data-flow-diagrams-using-java\" title=\"how to create data flow diagrams using java\">stackoverflow.com/questions/10474008/&hellip;</a>"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1571675909,"post_id":58490605,"comment_id":103311408,"body_markdown":"https://stackoverflow.com/questions/12743107/how-to-create-data-flow-diagram-for-java-source-code","body":"<a href=\"https://stackoverflow.com/questions/12743107/how-to-create-data-flow-diagram-for-java-source-code\" title=\"how to create data flow diagram for java source code\">stackoverflow.com/questions/12743107/&hellip;</a>"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1571675918,"post_id":58490605,"comment_id":103311412,"body_markdown":"https://stackoverflow.com/questions/6732408/how-can-i-make-a-flow-diagram-of-my-program","body":"<a href=\"https://stackoverflow.com/questions/6732408/how-can-i-make-a-flow-diagram-of-my-program\" title=\"how can i make a flow diagram of my program\">stackoverflow.com/questions/6732408/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"score":0,"creation_date":1684389864,"post_id":76277441,"comment_id":134511787,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76277441/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28624646,"reputation":1,"user_id":21916916,"display_name":"brandy merino"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684378736,"creation_date":1684378736,"answer_id":76277441,"question_id":58490605,"body_markdown":"public class Pregunta1 {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Scanner teclado = new Scanner(System.in);\r\n\r\n        String alumno;\r\n        double n1, n2, n3, promedio;\r\n\r\n        System.out.print(&quot;Nombre de alumno: &quot;);\r\n        alumno = teclado.nextLine();\r\n        System.out.print(&quot;Nota1: &quot;);\r\n        n1 = Double.parseDouble(teclado.nextLine());\r\n        System.out.print(&quot;Nota1: &quot;);\r\n        n2 = Double.parseDouble(teclado.nextLine());\r\n        System.out.print(&quot;Nota1: &quot;);\r\n        n3 = Double.parseDouble(teclado.nextLine());\r\n\r\n        promedio = (n1 + n2 + n3) / 3;\r\n        System.out.println(&quot;promedio: &quot; + promedio);\r\n\r\n        if (promedio &gt;= 7) {\r\n            System.out.println(&quot;Promocionado&quot;);\r\n        } else if (promedio &gt;= 4 &amp;&amp; promedio &lt; 7) {\r\n            System.out.println(&quot;Regular&quot;);\r\n        } else if (promedio &lt; 4) {\r\n            System.out.println(&quot;Reprobado&quot;);\r\n        }\r\n    }\r\n\r\n}\r\n","title":"How to convert a Java source code into a data flow diagram","body":"<p>public class Pregunta1 {</p>\n<pre><code>public static void main(String[] args) {\n\n    Scanner teclado = new Scanner(System.in);\n\n    String alumno;\n    double n1, n2, n3, promedio;\n\n    System.out.print(&quot;Nombre de alumno: &quot;);\n    alumno = teclado.nextLine();\n    System.out.print(&quot;Nota1: &quot;);\n    n1 = Double.parseDouble(teclado.nextLine());\n    System.out.print(&quot;Nota1: &quot;);\n    n2 = Double.parseDouble(teclado.nextLine());\n    System.out.print(&quot;Nota1: &quot;);\n    n3 = Double.parseDouble(teclado.nextLine());\n\n    promedio = (n1 + n2 + n3) / 3;\n    System.out.println(&quot;promedio: &quot; + promedio);\n\n    if (promedio &gt;= 7) {\n        System.out.println(&quot;Promocionado&quot;);\n    } else if (promedio &gt;= 4 &amp;&amp; promedio &lt; 7) {\n        System.out.println(&quot;Regular&quot;);\n    } else if (promedio &lt; 4) {\n        System.out.println(&quot;Reprobado&quot;);\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":14553713,"reputation":1172,"user_id":10511841,"display_name":"Tharindu Pradeep"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":871,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1684378736,"creation_date":1571675736,"question_id":58490605,"body_markdown":"What is the best method to convert **java source code into a data flow diagram**? And also is there any method to identify the main elements in a data flow diagram by referring the java source code programmatically.","title":"How to convert a Java source code into a data flow diagram","body":"<p>What is the best method to convert <strong>java source code into a data flow diagram</strong>? And also is there any method to identify the main elements in a data flow diagram by referring the java source code programmatically.</p>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"answers":[{"comments":[{"owner":{"account_id":5501941,"reputation":57,"user_id":4371021,"display_name":"Dipak Kadam"},"score":0,"creation_date":1684348275,"post_id":76274957,"comment_id":134506832,"body_markdown":"I have changed my system name hp to root but still in error its reflecting as hp..\njava.sql.SQLException: Access denied for user &#39;hp&#39;@&#39;localhost&#39; (using password: NO)\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) l-","body":"I have changed my system name hp to root but still in error its reflecting as hp.. java.sql.SQLException: Access denied for user &#39;hp&#39;@&#39;localhost&#39; (using password: NO) \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQL&zwnj;&#8203;Error.java:130) l-"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684348370,"post_id":76274957,"comment_id":134506843,"body_markdown":"Still the same problem. It is not using the user from the properties.","body":"Still the same problem. It is not using the user from the properties."}],"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684346235,"creation_date":1684346235,"answer_id":76274957,"question_id":76274843,"body_markdown":"The error says user &quot;hp&quot; but your properties say user &quot;Admin&quot;. Also the password doesn&#39;t match. Your applications is using the wrong credentials. That both passwords have very bad quality for security is a different issue.","title":"Access denied for user &#39;hp&#39;@&#39;localhost&#39; (using password: NO) in SpringBoot application","body":"<p>The error says user &quot;hp&quot; but your properties say user &quot;Admin&quot;. Also the password doesn't match. Your applications is using the wrong credentials. That both passwords have very bad quality for security is a different issue.</p>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684351003,"creation_date":1684351003,"answer_id":76275517,"question_id":76274843,"body_markdown":"Kindly check the spelling mistake of datasource:\r\n   \r\n    spring.jpa.hibernate.ddl-auto=update  \r\n    spring.datasource.url=jdbc:mysql://localhost:3306/db?createDatabaseIfNotExist=true   \r\n    spring.datasource.username=root  //your db user name  \r\n    spring.datasource.password=root  //your db user password \r\n    spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect  \r\n    #If your MySql version 5 then use MySQL5Dialect\r\n    spring.data.jpa.repositories.enabled=true\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.database=mysql","title":"Access denied for user &#39;hp&#39;@&#39;localhost&#39; (using password: NO) in SpringBoot application","body":"<p>Kindly check the spelling mistake of datasource:</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update  \nspring.datasource.url=jdbc:mysql://localhost:3306/db?createDatabaseIfNotExist=true   \nspring.datasource.username=root  //your db user name  \nspring.datasource.password=root  //your db user password \nspring.datasource.driverClassName=com.mysql.cj.jdbc.Driver\nspring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect  \n#If your MySql version 5 then use MySQL5Dialect\nspring.data.jpa.repositories.enabled=true\nspring.jpa.show-sql=true\nspring.jpa.database=mysql\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8794729,"reputation":15307,"user_id":6572971,"display_name":"Alien"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684377592,"creation_date":1684377592,"answer_id":76277384,"question_id":76274843,"body_markdown":"Typo alert!!\r\n\r\n    datasourse -&gt; datasource\r\n    dailect -&gt; dialect","title":"Access denied for user &#39;hp&#39;@&#39;localhost&#39; (using password: NO) in SpringBoot application","body":"<p>Typo alert!!</p>\n<pre><code>datasourse -&gt; datasource\ndailect -&gt; dialect\n</code></pre>\n"}],"owner":{"account_id":5501941,"reputation":57,"user_id":4371021,"display_name":"Dipak Kadam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":249,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1685007854,"answer_count":3,"score":-1,"last_activity_date":1684377592,"creation_date":1684345342,"question_id":76274843,"body_markdown":"Trying to connect with MySQL server with my SpringBoot application but facing above issue, can someone suggest? \r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/myblog\r\n    spring.datasourse.username=Admin\r\n    spring.datasourse.password=Admin\r\n    \r\n    spring.jpa.properties.hibernate.dailect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.hibernate.ddl-auto=update \r\n\r\n\r\nError as per below\r\n\r\n    java.sql.SQLException: Access denied for user &#39;hp&#39;@&#39;localhost&#39; (using password: NO)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\r\n    \tat co","title":"Access denied for user &#39;hp&#39;@&#39;localhost&#39; (using password: NO) in SpringBoot application","body":"<p>Trying to connect with MySQL server with my SpringBoot application but facing above issue, can someone suggest?</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/myblog\nspring.datasourse.username=Admin\nspring.datasourse.password=Admin\n\nspring.jpa.properties.hibernate.dailect=org.hibernate.dialect.MySQLDialect\nspring.jpa.hibernate.ddl-auto=update \n</code></pre>\n<p>Error as per below</p>\n<pre><code>java.sql.SQLException: Access denied for user 'hp'@'localhost' (using password: NO)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\n    at co\n</code></pre>\n"},{"tags":["java","android","kotlin","textview","effect"],"answers":[{"tags":[],"owner":{"account_id":22589321,"reputation":39,"user_id":16772693,"display_name":"ninh312"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684293894,"creation_date":1684293894,"answer_id":76268365,"question_id":76268070,"body_markdown":"I found the solution to my problem, I will post the answer here for anyone who needs it\r\n\r\n     tv.setShadowLayer(\r\n                    10f,     // radius: The radius of the shadow\r\n                    0f,      // dx: The horizontal offset of the shadow\r\n                    0f,      // dy: The vertical offset of the shadow\r\n                    Color.RED // shadowColor: The color of the shadow\r\n                )\r\n\r\n                // You can also customize other properties of the TextView\r\n                tv.setTypeface(null, Typeface.BOLD)","title":"How to create glow effect for textview","body":"<p>I found the solution to my problem, I will post the answer here for anyone who needs it</p>\n<pre><code> tv.setShadowLayer(\n                10f,     // radius: The radius of the shadow\n                0f,      // dx: The horizontal offset of the shadow\n                0f,      // dy: The vertical offset of the shadow\n                Color.RED // shadowColor: The color of the shadow\n            )\n\n            // You can also customize other properties of the TextView\n            tv.setTypeface(null, Typeface.BOLD)\n</code></pre>\n"}],"owner":{"account_id":22589321,"reputation":39,"user_id":16772693,"display_name":"ninh312"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1684377383,"creation_date":1684287852,"question_id":76268070,"body_markdown":"I have an application written in kotlin, in my app have function add the desired user text line. Adding text is relatively easy, but I was asked to add effects to the text. Anyone with any ideas please help me\r\n\r\nThis is the effect i need to add[![enter image description here](https://i.stack.imgur.com/Q7DVa.png)](https://i.stack.imgur.com/Q7DVa.png)","title":"How to create glow effect for textview","body":"<p>I have an application written in kotlin, in my app have function add the desired user text line. Adding text is relatively easy, but I was asked to add effects to the text. Anyone with any ideas please help me</p>\n<p>This is the effect i need to add<a href=\"https://i.stack.imgur.com/Q7DVa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q7DVa.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["javascript","java","android"],"answers":[{"tags":[],"owner":{"account_id":28624148,"reputation":1,"user_id":21916518,"display_name":"Vez Droid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684373625,"creation_date":1684373536,"answer_id":76277183,"question_id":76277071,"body_markdown":"Try this. First, create these three variables in your class.\r\n\r\n    private String sFileName, sUrl, sUserAgent;\r\n\r\nThen in your onCreate in your activity, create a download listener for your webview.\r\n\r\n        myWebview.setDownloadListener(new DownloadListener() {\r\n            @Override\r\n            public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimetype, long contentLength) {\r\n                String filename = URLUtil.guessFileName(url,contentDisposition,getFileType(url));\r\n                sFileName = filename;\r\n                sUrl = url;\r\n                sUserAgent = userAgent;\r\n                if (Build.VERSION.SDK_INT&gt;=Build.VERSION_CODES.M){\r\n                    if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                            == PackageManager.PERMISSION_GRANTED){\r\n                        downloadFile(filename,url,userAgent);\r\n                    }else {\r\n                        requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},1001);\r\n                    }\r\n                }else {\r\n                    downloadFile(filename,url,userAgent);\r\n                }\r\n\r\n            }\r\n        });\r\n\r\nAdd a webchrome client in OnCreate.\r\n\r\n       myWebview.setWebChromeClient(new WebChromeClient(){\r\n            @Override\r\n            public void onPermissionRequest(PermissionRequest request) {\r\n                super.onPermissionRequest(request);\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                    request.grant(request.getResources());\r\n                }\r\n            }\r\n\r\n        WebSettings webSettings = myWebview.getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n    }\r\n\r\n\r\nPermission is needed for writing files on your device. Add this to your OnRequestPermissionsResult code.\r\n\r\n      @Override\r\n        public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n            super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n            if (requestCode==1001){\r\n                if (grantResults.length&gt;0&amp;&amp;grantResults[0]== PackageManager.PERMISSION_GRANTED){\r\n                    if (!sUrl.equals(&quot;&quot;)&amp;&amp;!sFileName.equals(&quot;&quot;)&amp;&amp;!sUserAgent.equals(&quot;&quot;)){\r\n                        downloadFile(sFileName,sUrl,sUserAgent);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\nThen create a function called downloadFile.\r\n\r\n    private void downloadFile(String filename, String url, String userAgent) {\r\n        try {\r\n            DownloadManager.Request request = new DownloadManager.Request(\r\n                    Uri.parse(url));\r\n\r\n            request.allowScanningByMediaScanner();\r\n            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED); //Notify client once download is completed!\r\n            request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, filename);\r\n            DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);\r\n            dm.enqueue(request);\r\n\r\n            Toast.makeText(this, &quot;Downloading File...&quot;, Toast.LENGTH_LONG).show();\r\n\r\n            sUrl = &quot;&quot;;\r\n            sFileName = &quot;&quot;;\r\n            sUserAgent = &quot;&quot;;\r\n        }catch (Exception ignored){\r\n            Toast.makeText(this, ignored.toString(), Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\nThis should work assuming the javascript code in your webpage is also working.","title":"How can I allow downloading of files inside my android webview app?","body":"<p>Try this. First, create these three variables in your class.</p>\n<pre><code>private String sFileName, sUrl, sUserAgent;\n</code></pre>\n<p>Then in your onCreate in your activity, create a download listener for your webview.</p>\n<pre><code>    myWebview.setDownloadListener(new DownloadListener() {\n        @Override\n        public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimetype, long contentLength) {\n            String filename = URLUtil.guessFileName(url,contentDisposition,getFileType(url));\n            sFileName = filename;\n            sUrl = url;\n            sUserAgent = userAgent;\n            if (Build.VERSION.SDK_INT&gt;=Build.VERSION_CODES.M){\n                if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                        == PackageManager.PERMISSION_GRANTED){\n                    downloadFile(filename,url,userAgent);\n                }else {\n                    requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},1001);\n                }\n            }else {\n                downloadFile(filename,url,userAgent);\n            }\n\n        }\n    });\n</code></pre>\n<p>Add a webchrome client in OnCreate.</p>\n<pre><code>   myWebview.setWebChromeClient(new WebChromeClient(){\n        @Override\n        public void onPermissionRequest(PermissionRequest request) {\n            super.onPermissionRequest(request);\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n                request.grant(request.getResources());\n            }\n        }\n\n    WebSettings webSettings = myWebview.getSettings();\n    webSettings.setJavaScriptEnabled(true);\n}\n</code></pre>\n<p>Permission is needed for writing files on your device. Add this to your OnRequestPermissionsResult code.</p>\n<pre><code>  @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode==1001){\n            if (grantResults.length&gt;0&amp;&amp;grantResults[0]== PackageManager.PERMISSION_GRANTED){\n                if (!sUrl.equals(&quot;&quot;)&amp;&amp;!sFileName.equals(&quot;&quot;)&amp;&amp;!sUserAgent.equals(&quot;&quot;)){\n                    downloadFile(sFileName,sUrl,sUserAgent);\n                }\n            }\n        }\n    }\n</code></pre>\n<p>Then create a function called downloadFile.</p>\n<pre><code>private void downloadFile(String filename, String url, String userAgent) {\n    try {\n        DownloadManager.Request request = new DownloadManager.Request(\n                Uri.parse(url));\n\n        request.allowScanningByMediaScanner();\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED); //Notify client once download is completed!\n        request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, filename);\n        DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);\n        dm.enqueue(request);\n\n        Toast.makeText(this, &quot;Downloading File...&quot;, Toast.LENGTH_LONG).show();\n\n        sUrl = &quot;&quot;;\n        sFileName = &quot;&quot;;\n        sUserAgent = &quot;&quot;;\n    }catch (Exception ignored){\n        Toast.makeText(this, ignored.toString(), Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n<p>This should work assuming the javascript code in your webpage is also working.</p>\n"}],"owner":{"account_id":27816764,"reputation":11,"user_id":21237985,"display_name":"JackM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":878,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684373625,"creation_date":1684371108,"question_id":76277071,"body_markdown":"I need to make my android webview app be able to download files when the download is initiated by code on the webpage.\r\n\r\nI am not at all familiar with android app development, or Java for that matter, so please have patience. On my webpage that the webview app accesses, there is javascript code that initiates a download using a blob object, like so:\r\n\r\n\r\n```\r\nlet blob = new Blob([filestring]);\r\nlet downloadUrl = URL.createObjectURL(blob);\r\nlet link = document.createElement(&#39;a&#39;);\r\nlink.href = downloadUrl;\r\nlink.download = currentpage + &#39;.csv&#39;;\r\nlink.click();\r\nURL.revokeObjectURL(downloadUrl);\r\n```\r\n\r\nI have tried to allow the download to work inside of the webview application, but when I pressing the button that runs the above javascript code on the page, the webview application crashes. I cannot figure out why this doesn&#39;t work.\r\n\r\nHere is the MainActivity.java file:\r\n\r\n\r\n```\r\npackage com.example.stockapptestbeta;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.webkit.CookieManager;\r\nimport android.webkit.DownloadListener;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\nimport android.app.DownloadManager;\r\nimport android.webkit.URLUtil;\r\nimport android.os.Environment;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private WebView mywebView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        \r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        mywebView=(WebView) findViewById(R.id.webview);\r\n        mywebView.setWebViewClient(new WebViewClient(){\r\n            @Override\r\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n                view.loadUrl(url);\r\n                return true;\r\n            }\r\n        });\r\n        mywebView.getSettings().setUserAgentString(&quot;Mozilla/5.0 (StockAppAndroid) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/107.0.5304.105 Mobile Safari/537.36&quot;);\r\n        mywebView.loadUrl(&quot;http://192.168.0.22&quot;);\r\n        mywebView.setDownloadListener(new DownloadListener() {\r\n            @Override\r\n            public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimeType, long contentLength) {\r\n                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\r\n                request.setMimeType(mimeType);\r\n                String cookies = CookieManager.getInstance().getCookie(url);\r\n                request.addRequestHeader(&quot;cookie&quot;, cookies);\r\n                request.addRequestHeader(&quot;User-Agent&quot;, userAgent);\r\n                request.setDescription(&quot;Downloading file&quot;);\r\n                request.setTitle(URLUtil.guessFileName(url, contentDisposition, mimeType));\r\n                request.allowScanningByMediaScanner();\r\n                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n                request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, URLUtil.guessFileName(url, contentDisposition, mimeType));\r\n\r\n                DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);\r\n                dm.enqueue(request);\r\n            }\r\n        });\r\n        WebSettings webSettings=mywebView.getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n    }\r\n\r\n    public class mywebClient extends WebViewClient {\r\n        @Override\r\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\r\n            super.onPageStarted(view,url,favicon);\r\n        }\r\n        public void onPageFinished(WebView view, String url, Bitmap favicon) {\r\n            super.onPageFinished(view,url);\r\n            CookieManager.getInstance().flush();\r\n        }\r\n        @Override\r\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n            view.loadUrl(url);\r\n            return true;\r\n        }\r\n    }\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (mywebView.canGoBack()) {\r\n            mywebView.goBack();\r\n        } else {\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd here is the AndroidManifest.xml file:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&gt;&lt;/uses-permission&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;&gt;&lt;/uses-permission&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:configChanges=&quot;orientation|screenSize&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.StockAppTestBeta&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:configChanges=&quot;keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize&quot;\r\n            &gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;android.app.lib_name&quot;\r\n                android:value=&quot;&quot; /&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nDoes anybody know how to make this download functionality work? Thanks for taking the time to read my question.\r\n","title":"How can I allow downloading of files inside my android webview app?","body":"<p>I need to make my android webview app be able to download files when the download is initiated by code on the webpage.</p>\n<p>I am not at all familiar with android app development, or Java for that matter, so please have patience. On my webpage that the webview app accesses, there is javascript code that initiates a download using a blob object, like so:</p>\n<pre><code>let blob = new Blob([filestring]);\nlet downloadUrl = URL.createObjectURL(blob);\nlet link = document.createElement('a');\nlink.href = downloadUrl;\nlink.download = currentpage + '.csv';\nlink.click();\nURL.revokeObjectURL(downloadUrl);\n</code></pre>\n<p>I have tried to allow the download to work inside of the webview application, but when I pressing the button that runs the above javascript code on the page, the webview application crashes. I cannot figure out why this doesn't work.</p>\n<p>Here is the MainActivity.java file:</p>\n<pre><code>package com.example.stockapptestbeta;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.graphics.Bitmap;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.webkit.CookieManager;\nimport android.webkit.DownloadListener;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\nimport android.app.DownloadManager;\nimport android.webkit.URLUtil;\nimport android.os.Environment;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private WebView mywebView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        \n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mywebView=(WebView) findViewById(R.id.webview);\n        mywebView.setWebViewClient(new WebViewClient(){\n            @Override\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\n                view.loadUrl(url);\n                return true;\n            }\n        });\n        mywebView.getSettings().setUserAgentString(&quot;Mozilla/5.0 (StockAppAndroid) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/107.0.5304.105 Mobile Safari/537.36&quot;);\n        mywebView.loadUrl(&quot;http://192.168.0.22&quot;);\n        mywebView.setDownloadListener(new DownloadListener() {\n            @Override\n            public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimeType, long contentLength) {\n                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\n                request.setMimeType(mimeType);\n                String cookies = CookieManager.getInstance().getCookie(url);\n                request.addRequestHeader(&quot;cookie&quot;, cookies);\n                request.addRequestHeader(&quot;User-Agent&quot;, userAgent);\n                request.setDescription(&quot;Downloading file&quot;);\n                request.setTitle(URLUtil.guessFileName(url, contentDisposition, mimeType));\n                request.allowScanningByMediaScanner();\n                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\n                request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, URLUtil.guessFileName(url, contentDisposition, mimeType));\n\n                DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);\n                dm.enqueue(request);\n            }\n        });\n        WebSettings webSettings=mywebView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n    }\n\n    public class mywebClient extends WebViewClient {\n        @Override\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\n            super.onPageStarted(view,url,favicon);\n        }\n        public void onPageFinished(WebView view, String url, Bitmap favicon) {\n            super.onPageFinished(view,url);\n            CookieManager.getInstance().flush();\n        }\n        @Override\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            view.loadUrl(url);\n            return true;\n        }\n    }\n    @Override\n    public void onBackPressed() {\n        if (mywebView.canGoBack()) {\n            mywebView.goBack();\n        } else {\n            super.onBackPressed();\n        }\n    }\n}\n</code></pre>\n<p>And here is the AndroidManifest.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&gt;&lt;/uses-permission&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;&gt;&lt;/uses-permission&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:configChanges=&quot;orientation|screenSize&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.StockAppTestBeta&quot;\n        android:usesCleartextTraffic=&quot;true&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:configChanges=&quot;keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize&quot;\n            &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;&quot; /&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Does anybody know how to make this download functionality work? Thanks for taking the time to read my question.</p>\n"},{"tags":["java","object","methods","program-entry-point"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1564983034,"post_id":57352625,"comment_id":101192906,"body_markdown":"Nope, just call `new MainClass()` or whatever the main class name is.  Some example code will help.","body":"Nope, just call <code>new MainClass()</code> or whatever the main class name is.  Some example code will help."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1564983051,"post_id":57352625,"comment_id":101192912,"body_markdown":"No, it&#39;s not true that it depends on compiler.  Did you try creating an object of that class?  What happened when you did?","body":"No, it&#39;s not true that it depends on compiler.  Did you try creating an object of that class?  What happened when you did?"},{"owner":{"account_id":11448531,"reputation":665,"user_id":8391546,"display_name":"abj1305"},"score":0,"creation_date":1564984361,"post_id":57352625,"comment_id":101193230,"body_markdown":"Possible duplicate https://stackoverflow.com/questions/2550310/can-a-main-method-of-class-be-invoked-from-another-class-in-java","body":"Possible duplicate <a href=\"https://stackoverflow.com/questions/2550310/can-a-main-method-of-class-be-invoked-from-another-class-in-java\" title=\"can a main method of class be invoked from another class in java\">stackoverflow.com/questions/2550310/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7486911,"reputation":444,"user_id":5689806,"accept_rate":50,"display_name":"Propagandian"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1684364033,"creation_date":1564983783,"answer_id":57352738,"question_id":57352625,"body_markdown":"Yes, you can. The main method is just an entry point. The class is like any other, except it has an additional `public static` method. The main method is static and therefore not part of the instance of the object, but you shouldn&#39;t be using the main method anyway except for starting the program.\r\n\r\n```Java\r\npublic class Scratchpad {\r\n\r\n    public static void main(String[] args) {\r\n        Scratchpad scratchpad = new Scratchpad();\r\n        scratchpad.someMethod();\r\n    }\r\n\r\n    public Scratchpad() {\r\n    }\r\n\r\n    private void someMethod() {\r\n        System.out.println(&quot;Non-static method prints&quot;);\r\n    }\r\n}\r\n```","title":"Can we create an object of the class in which main function is defined in Java?","body":"<p>Yes, you can. The main method is just an entry point. The class is like any other, except it has an additional <code>public static</code> method. The main method is static and therefore not part of the instance of the object, but you shouldn't be using the main method anyway except for starting the program.</p>\n<pre><code>public class Scratchpad {\n\n    public static void main(String[] args) {\n        Scratchpad scratchpad = new Scratchpad();\n        scratchpad.someMethod();\n    }\n\n    public Scratchpad() {\n    }\n\n    private void someMethod() {\n        System.out.println(&quot;Non-static method prints&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":264034,"reputation":134,"user_id":550037,"display_name":"Bhanu Boppana"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564988032,"creation_date":1564988032,"answer_id":57353523,"question_id":57352625,"body_markdown":"Yes, you can create object for the class which has main method. There is no difference in this class and a class which don&#39;t have main method with respect to creating objects and using.","title":"Can we create an object of the class in which main function is defined in Java?","body":"<p>Yes, you can create object for the class which has main method. There is no difference in this class and a class which don't have main method with respect to creating objects and using.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684373582,"creation_date":1684373582,"answer_id":76277185,"question_id":57352625,"body_markdown":"The `main` method is not limited to one class, you can place it within any class.\r\n\r\nAs for different JVM implementations having different standards, that I am unsure of.  \r\nIt doesn&#39;t sound correct, being unable to instantiate the class within itself would create constraints.\r\n\r\n```java\r\nclass Example {\r\n    public static void main(String[] args) {\r\n        Example example = new Example();\r\n    }\r\n}\r\n```","title":"Can we create an object of the class in which main function is defined in Java?","body":"<p>The <code>main</code> method is not limited to one class, you can place it within any class.</p>\n<p>As for different JVM implementations having different standards, that I am unsure of.<br />\nIt doesn't sound correct, being unable to instantiate the class within itself would create constraints.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Example {\n    public static void main(String[] args) {\n        Example example = new Example();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7127999,"reputation":115,"user_id":5474425,"display_name":"user5474425"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6464,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1684373582,"creation_date":1564982987,"question_id":57352625,"body_markdown":"Is it possible to create object of class in which main method resides.I have been searching for this answer but I have been told that it depends on compiler some compiler will allow while others will not.Is that true?","title":"Can we create an object of the class in which main function is defined in Java?","body":"<p>Is it possible to create object of class in which main method resides.I have been searching for this answer but I have been told that it depends on compiler some compiler will allow while others will not.Is that true?</p>\n"},{"tags":["java","uri","crop","onactivityresult"],"owner":{"account_id":17083164,"reputation":48,"user_id":12361104,"display_name":"Neldison"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684373476,"creation_date":1684373476,"question_id":76277182,"body_markdown":"I&#39;m working on an app where user can upload three images at once but I&#39;m having problem handling the onActivityResult() method. I can Crop one image using the codes below\r\n\r\n```\r\nprivate ImageView image1; \r\n\r\n// I need to crop three images this time. image1,  image2 and image3\r\n\r\nprivate Uri imageUri; \r\n\r\n@Override\r\nprotected void onCreate(Bundle saveInstanceState) {\r\n\r\nsuper.onCreate(saveInstanceState);\r\n\r\nsetContentView(R.layout.my_layout);\r\n\r\nimage1 = findViewById(R.id.image1);\r\n\r\nimage1.setOnclickListener(new View.OnClickListener(){\r\n@Override\r\npublic void onClick(View v) {\r\nCropImage.activity().start(MyActivity.this);\r\n  }\r\n }\r\n}\r\n\r\n@Override\r\nprotected void onActivityResult(\r\nint requestCode,  int resultCode,  Intent data) {\r\nsuper.onActivityResult(requestCode, resultCode, data);\r\n\r\nif(requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {\r\nCropImage.ActivityResult result = CropImage.getActivityResult(data);\r\n\r\nimageUri = result.getUri();\r\n\r\nimage1.setImageURI(imageUri);\r\n }\r\n}\r\n```\r\nMy problem now is that I want to Crop three images but I don&#39;t know how to call each one of them in onActivityResult().","title":"How To Crop Multiple Images Separately","body":"<p>I'm working on an app where user can upload three images at once but I'm having problem handling the onActivityResult() method. I can Crop one image using the codes below</p>\n<pre><code>private ImageView image1; \n\n// I need to crop three images this time. image1,  image2 and image3\n\nprivate Uri imageUri; \n\n@Override\nprotected void onCreate(Bundle saveInstanceState) {\n\nsuper.onCreate(saveInstanceState);\n\nsetContentView(R.layout.my_layout);\n\nimage1 = findViewById(R.id.image1);\n\nimage1.setOnclickListener(new View.OnClickListener(){\n@Override\npublic void onClick(View v) {\nCropImage.activity().start(MyActivity.this);\n  }\n }\n}\n\n@Override\nprotected void onActivityResult(\nint requestCode,  int resultCode,  Intent data) {\nsuper.onActivityResult(requestCode, resultCode, data);\n\nif(requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {\nCropImage.ActivityResult result = CropImage.getActivityResult(data);\n\nimageUri = result.getUri();\n\nimage1.setImageURI(imageUri);\n }\n}\n</code></pre>\n<p>My problem now is that I want to Crop three images but I don't know how to call each one of them in onActivityResult().</p>\n"},{"tags":["java"],"owner":{"account_id":378670,"reputation":3959,"user_id":731548,"accept_rate":33,"display_name":"cquezel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1684372736,"creation_date":1679421053,"question_id":75804762,"body_markdown":"I have this exception while unserializing an object:\r\n\r\njava.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.\r\n\r\nAt serialization, the a.b.c.BaseClass.aField does contain a List that was created like this \r\n\r\n    return List.copyOf(originalList);\r\n\r\nI have a “simple” workaround to fix the problem by changing the previous line to:\r\n\r\n    return originalList.\r\n\r\nNote that the list may be shared by multiple instances of a.b.c.BaseClass. \r\nStack:\r\n\r\n    Caused by: java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.\r\n    \tat java.base/java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2227)\r\n    \tat java.base/java.io.ObjectStreamClass$FieldReflector.checkObjectFieldValueTypes(ObjectStreamClass.java:2191)\r\n    \tat java.base/java.io.ObjectStreamClass.checkObjFieldValueTypes(ObjectStreamClass.java:1478)\r\n    \tat java.base/java.io.ObjectInputStream$FieldValues.defaultCheckFieldValues(ObjectInputStream.java:2657)\r\n    \tat java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2471)\r\n    \tat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2242)\r\n    \tat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1742)\r\n    \tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\r\n    \tat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\r\n    \t… \r\n\r\nIf I break and debug at the exception point:\r\n\r\n \r\n\r\n       private void setObjFieldValues(Object obj, Object[] vals, boolean dryRun) {\r\n            if (obj == null) {\r\n                throw new NullPointerException();\r\n            }\r\n            for (int i = numPrimFields; i &lt; fields.length; i++) {\r\n                long key = writeKeys[i];\r\n                if (key == Unsafe.INVALID_FIELD_OFFSET) {\r\n                    continue;           // discard value\r\n                }\r\n                switch (typeCodes[i]) {\r\n                    case &#39;L&#39;, &#39;[&#39; -&gt; {\r\n                        Object val = vals[offsets[i]];\r\n                        if (val != null &amp;&amp;\r\n                            !types[i - numPrimFields].isInstance(val))\r\n                        {\r\n                            Field f = fields[i].getField();\r\n                            throw new ClassCastException(\r\n                                &quot;cannot assign instance of &quot; +\r\n                                val.getClass().getName() + &quot; to field &quot; +\r\n                                f.getDeclaringClass().getName() + &quot;.&quot; +\r\n                                f.getName() + &quot; of type &quot; +\r\n                                f.getType().getName() + &quot; in instance of &quot; +\r\n                                obj.getClass().getName());\r\n                        }\r\n                        if (!dryRun)\r\n                            unsafe.putReference(obj, key, val);\r\n                    }\r\n                    default -&gt; throw new InternalError();\r\n                }\r\n            }\r\n        }\r\n\r\nIn my scenario, \r\n\r\n- obj is an instance of a.b.c.SubClass \r\n- vals has 26 elements of    which index 17 is a CollSer \r\n- dryRun is true \r\n- The “i” value is 20.    \r\n- typecode[i] is ‘L’ \r\n- numPrimFields is 3 \r\n- offset[i] is 17    \r\n- types[i - numPrimFields] is java.util.List \r\n- val is a CollSer    (array null, tag 1 (IMM_LIST))\r\n\r\nThe line:\r\n\r\n    !types[i - numPrimFields].isInstance(val)\r\n\r\nFails because java.util.List is not an instance of java.util.CollSer\r\nI think (not sure) CollSer should probably have already been replaced by a List by CollSer’s readResolve.\r\n\r\nAm I doing something wrong?\r\n\r\nUnfortunately, this is a huge object being serialized (215 classes, 900MB on disk, error stack trace is 4200 lines) so I can’t easily reproduce the error using a simple test.\r\nMy env:\r\n- openjdk version &quot;17&quot; 2021-09-14\r\n- OpenJDK Runtime Environment (build 17+35-2724)\r\n- OpenJDK 64-Bit Server VM (build 17+35-2724, mixed mode, sharing)\r\n\r\n(tested with version &quot;20&quot; also)\r\n\r\nThis question is probably a duplicate of https://stackoverflow.com/q/65613929/731548\r\nthat has been flagged as answered without a real solution.\r\n\r\n\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=8304814\r\n\r\nI think the problem is more specifically centered on the serialization of java.util.ImmutableCollections$List12.","title":"ClassCastException when unserializing an immutable List: cannot assign instance of java.util.CollSer to field of type java.util.List","body":"<p>I have this exception while unserializing an object:</p>\n<p>java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.</p>\n<p>At serialization, the a.b.c.BaseClass.aField does contain a List that was created like this</p>\n<pre><code>return List.copyOf(originalList);\n</code></pre>\n<p>I have a “simple” workaround to fix the problem by changing the previous line to:</p>\n<pre><code>return originalList.\n</code></pre>\n<p>Note that the list may be shared by multiple instances of a.b.c.BaseClass.\nStack:</p>\n<pre><code>Caused by: java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.\n    at java.base/java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2227)\n    at java.base/java.io.ObjectStreamClass$FieldReflector.checkObjectFieldValueTypes(ObjectStreamClass.java:2191)\n    at java.base/java.io.ObjectStreamClass.checkObjFieldValueTypes(ObjectStreamClass.java:1478)\n    at java.base/java.io.ObjectInputStream$FieldValues.defaultCheckFieldValues(ObjectInputStream.java:2657)\n    at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2471)\n    at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2242)\n    at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1742)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\n    … \n</code></pre>\n<p>If I break and debug at the exception point:</p>\n<pre><code>   private void setObjFieldValues(Object obj, Object[] vals, boolean dryRun) {\n        if (obj == null) {\n            throw new NullPointerException();\n        }\n        for (int i = numPrimFields; i &lt; fields.length; i++) {\n            long key = writeKeys[i];\n            if (key == Unsafe.INVALID_FIELD_OFFSET) {\n                continue;           // discard value\n            }\n            switch (typeCodes[i]) {\n                case 'L', '[' -&gt; {\n                    Object val = vals[offsets[i]];\n                    if (val != null &amp;&amp;\n                        !types[i - numPrimFields].isInstance(val))\n                    {\n                        Field f = fields[i].getField();\n                        throw new ClassCastException(\n                            &quot;cannot assign instance of &quot; +\n                            val.getClass().getName() + &quot; to field &quot; +\n                            f.getDeclaringClass().getName() + &quot;.&quot; +\n                            f.getName() + &quot; of type &quot; +\n                            f.getType().getName() + &quot; in instance of &quot; +\n                            obj.getClass().getName());\n                    }\n                    if (!dryRun)\n                        unsafe.putReference(obj, key, val);\n                }\n                default -&gt; throw new InternalError();\n            }\n        }\n    }\n</code></pre>\n<p>In my scenario,</p>\n<ul>\n<li>obj is an instance of a.b.c.SubClass</li>\n<li>vals has 26 elements of    which index 17 is a CollSer</li>\n<li>dryRun is true</li>\n<li>The “i” value is 20.</li>\n<li>typecode[i] is ‘L’</li>\n<li>numPrimFields is 3</li>\n<li>offset[i] is 17</li>\n<li>types[i - numPrimFields] is java.util.List</li>\n<li>val is a CollSer    (array null, tag 1 (IMM_LIST))</li>\n</ul>\n<p>The line:</p>\n<pre><code>!types[i - numPrimFields].isInstance(val)\n</code></pre>\n<p>Fails because java.util.List is not an instance of java.util.CollSer\nI think (not sure) CollSer should probably have already been replaced by a List by CollSer’s readResolve.</p>\n<p>Am I doing something wrong?</p>\n<p>Unfortunately, this is a huge object being serialized (215 classes, 900MB on disk, error stack trace is 4200 lines) so I can’t easily reproduce the error using a simple test.\nMy env:</p>\n<ul>\n<li>openjdk version &quot;17&quot; 2021-09-14</li>\n<li>OpenJDK Runtime Environment (build 17+35-2724)</li>\n<li>OpenJDK 64-Bit Server VM (build 17+35-2724, mixed mode, sharing)</li>\n</ul>\n<p>(tested with version &quot;20&quot; also)</p>\n<p>This question is probably a duplicate of <a href=\"https://stackoverflow.com/q/65613929/731548\">Map in ActiveMQ ObjectMessage throws ClassCastException: cannot assign instance of java.util.CollSer?</a>\nthat has been flagged as answered without a real solution.</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8304814\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=8304814</a></p>\n<p>I think the problem is more specifically centered on the serialization of java.util.ImmutableCollections$List12.</p>\n"},{"tags":["java","oop","overriding"],"comments":[{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1684337679,"post_id":76273764,"comment_id":134504499,"body_markdown":"If there is such an occasion it is very rare. Overriding methods goes hand in hand with polymorphism.","body":"If there is such an occasion it is very rare. Overriding methods goes hand in hand with polymorphism."},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684337854,"post_id":76273764,"comment_id":134504552,"body_markdown":"Polymorphism can only be achieved when there is inheritance accompanied by overriding. Overriding is all about bringing a change and without change how can one achieve Poly-Morphism (multiple forms/outcomes during multiple instance)","body":"Polymorphism can only be achieved when there is inheritance accompanied by overriding. Overriding is all about bringing a change and without change how can one achieve Poly-Morphism (multiple forms/outcomes during multiple instance)"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1684337892,"post_id":76273764,"comment_id":134504560,"body_markdown":"Subclassing can be augmentation w/o overrides, e.g., a base class provides common functionality, and subclasses extend/use that functionality without replacing it. This isn&#39;t as unusual as the preceding comments imply *(for better or worse)*. *(Whether or not subclassing is the **best** approach, then, is a separate conversation, e.g., composition may make more sense.)*","body":"Subclassing can be augmentation w/o overrides, e.g., a base class provides common functionality, and subclasses extend/use that functionality without replacing it. This isn&#39;t as unusual as the preceding comments imply <i>(for better or worse)</i>. <i>(Whether or not subclassing is the <b>best</b> approach, then, is a separate conversation, e.g., composition may make more sense.)</i>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1684337908,"post_id":76273764,"comment_id":134504567,"body_markdown":"Polymorphism is a broader concept than subclassing/overriding. Overloading, for example, also is a form of Polymorphism. Generics too.","body":"Polymorphism is a broader concept than subclassing/overriding. Overloading, for example, also is a form of Polymorphism. Generics too."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1684368105,"post_id":76276679,"comment_id":134510024,"body_markdown":"Doesn&#39;t answer the question that was asked in any way.","body":"Doesn&#39;t answer the question that was asked in any way."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684369007,"post_id":76276679,"comment_id":134510099,"body_markdown":"In what way?  I&#39;ve defined the difference between using polymorphism with and without overriding methods.  If anything, that is the exact answer.","body":"In what way?  I&#39;ve defined the difference between using polymorphism with and without overriding methods.  If anything, that is the exact answer."},{"owner":{"account_id":28233491,"reputation":11,"user_id":21582360,"display_name":"Arthur Bittencourt"},"score":0,"creation_date":1684371266,"post_id":76276679,"comment_id":134510244,"body_markdown":"So, how can i apply the polymorphism in methods B and C ?, polimorphism means many forms to call a method, but if the method cant be override, how can i apply ?","body":"So, how can i apply the polymorphism in methods B and C ?, polimorphism means many forms to call a method, but if the method cant be override, how can i apply ?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684371865,"post_id":76276679,"comment_id":134510301,"body_markdown":"The polymorphism of `methodB` would be that, depending on the implementing class, and whether or not that class chose to override the method, a different implementation may or may not be executed.  And, the polymorphism of `methodC` would be that no matter what class is calling the method, the same code is executed.  This is in terms of &quot;overriding&quot;, which is different from &quot;overloading&quot;.","body":"The polymorphism of <code>methodB</code> would be that, depending on the implementing class, and whether or not that class chose to override the method, a different implementation may or may not be executed.  And, the polymorphism of <code>methodC</code> would be that no matter what class is calling the method, the same code is executed.  This is in terms of &quot;overriding&quot;, which is different from &quot;overloading&quot;."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684372655,"post_id":76276679,"comment_id":134510386,"body_markdown":"@ArthurBittencourt I updated my answer to provide some clarity.","body":"@ArthurBittencourt I updated my answer to provide some clarity."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684373009,"post_id":76276679,"comment_id":134510413,"body_markdown":"@ArthurBittencourt, your initial question is, &quot;how can one be used without the other&quot;.  You don&#39;t need to override the method to consider it polymorphic.  What makes it polymorphism is that the implementing class that is accessing the method is different from another.  So, it is multiple objects utilizing a single method, which may or may not be overridden.  So, &quot;poly&quot; meaning many, and &quot;morphic&quot; meaning ability-to-change.","body":"@ArthurBittencourt, your initial question is, &quot;how can one be used without the other&quot;.  You don&#39;t need to override the method to consider it polymorphic.  What makes it polymorphism is that the implementing class that is accessing the method is different from another.  So, it is multiple objects utilizing a single method, which may or may not be overridden.  So, &quot;poly&quot; meaning many, and &quot;morphic&quot; meaning ability-to-change."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684373253,"post_id":76276679,"comment_id":134510437,"body_markdown":"Additionally, you&#39;re saying that if the method can&#39;t be overridden, then how is it polymorphism.  The &quot;poly&quot; part is in reference to the multiple classes that can implement it, and not the method.  The &quot;morphism&quot; part is in reference to the method, which has the ability to change.","body":"Additionally, you&#39;re saying that if the method can&#39;t be overridden, then how is it polymorphism.  The &quot;poly&quot; part is in reference to the multiple classes that can implement it, and not the method.  The &quot;morphism&quot; part is in reference to the method, which has the ability to change."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":7,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684372514,"creation_date":1684363977,"answer_id":76276679,"question_id":76273764,"body_markdown":"Overriding is only required if you&#39;re extending an `abstract` class which contains `abstract` methods, or implementing an `interface` which contains un-implemented methods.\r\n\r\nFor example, the `Object` class, which all Java classes inherently extend, includes methods that can optionally be overridden, such as `toString`.\r\n\r\nConsider the following `abstract class`.\r\n\r\n```java\r\nabstract class Example {\r\n    String stringA = &quot;stack&quot;;\r\n    String stringB = &quot;overflow&quot;;\r\n\r\n    private String methodA() {\r\n        return stringA + &quot; &quot; + stringB;\r\n    }\r\n\r\n    protected int methodB(int value) {\r\n        return value + 100;\r\n    }\r\n\r\n    public abstract int methodC(int valueA, int valueB);\r\n}\r\n```\r\n`methodA` cannot be overridden; it is marked as `private`.  \r\n`methodB` can optionally be overridden, although it is not required.  \r\n`methodC` requires an implementation, thus is overridable.\r\n\r\nInterfaces are similar.\r\n\r\n```java\r\ninterface Example {\r\n    String stringA = &quot;stack&quot;;\r\n    String stringB = &quot;overflow&quot;;\r\n\r\n    private String methodA() {\r\n        return stringA + &quot; &quot; + stringB;\r\n    }\r\n\r\n    default int methodB(int value) {\r\n        return value + 100;\r\n    }\r\n\r\n    int methodC(int valueA, int valueB);\r\n}\r\n```\r\n`methodA` cannot be overridden; it is marked as `private`.  \r\n`methodB` can optionally be overridden, although it is not required.  \r\n`methodC` requires an implementation, thus is overridable.\r\n\r\nFor more information on this topic, see https://docs.oracle.com/javase/tutorial/java/IandI/override.html.\r\n\r\nAs a way to demonstrate the polymorphism of the `interface`, consider the following two implementing classes.\r\n\r\n```java\r\nclass ExampleImplA implements Example {\r\n    @Override\r\n    public int methodC(int valueA, int valueB) {\r\n        return valueA * valueB;\r\n    }\r\n}\r\n\r\nclass ExampleImplB implements Example {\r\n    @Override\r\n    public int methodC(int valueA, int valueB) {\r\n        return valueA - valueB;\r\n    }\r\n}\r\n```\r\nNow, from another class, if you created a list of `Example`&#39;s, supplying a different implementation for each item, if you called `methodC` on each of the list items, a different implementation of `methodC` will be executed.\r\n```java\r\nvoid method() {\r\n    List&lt;Example&gt; list = new ArrayList&lt;&gt;();\r\n    list.add(new ExampleImplA());\r\n    list.add(new ExampleImplB());\r\n    for (Example example : list)\r\n        example.methodC(1, 2);\r\n}\r\n```","title":"How i can definy the limit between polymorphism and override method?","body":"<p>Overriding is only required if you're extending an <code>abstract</code> class which contains <code>abstract</code> methods, or implementing an <code>interface</code> which contains un-implemented methods.</p>\n<p>For example, the <code>Object</code> class, which all Java classes inherently extend, includes methods that can optionally be overridden, such as <code>toString</code>.</p>\n<p>Consider the following <code>abstract class</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class Example {\n    String stringA = &quot;stack&quot;;\n    String stringB = &quot;overflow&quot;;\n\n    private String methodA() {\n        return stringA + &quot; &quot; + stringB;\n    }\n\n    protected int methodB(int value) {\n        return value + 100;\n    }\n\n    public abstract int methodC(int valueA, int valueB);\n}\n</code></pre>\n<p><code>methodA</code> cannot be overridden; it is marked as <code>private</code>.<br />\n<code>methodB</code> can optionally be overridden, although it is not required.<br />\n<code>methodC</code> requires an implementation, thus is overridable.</p>\n<p>Interfaces are similar.</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Example {\n    String stringA = &quot;stack&quot;;\n    String stringB = &quot;overflow&quot;;\n\n    private String methodA() {\n        return stringA + &quot; &quot; + stringB;\n    }\n\n    default int methodB(int value) {\n        return value + 100;\n    }\n\n    int methodC(int valueA, int valueB);\n}\n</code></pre>\n<p><code>methodA</code> cannot be overridden; it is marked as <code>private</code>.<br />\n<code>methodB</code> can optionally be overridden, although it is not required.<br />\n<code>methodC</code> requires an implementation, thus is overridable.</p>\n<p>For more information on this topic, see <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/override.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/IandI/override.html</a>.</p>\n<p>As a way to demonstrate the polymorphism of the <code>interface</code>, consider the following two implementing classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ExampleImplA implements Example {\n    @Override\n    public int methodC(int valueA, int valueB) {\n        return valueA * valueB;\n    }\n}\n\nclass ExampleImplB implements Example {\n    @Override\n    public int methodC(int valueA, int valueB) {\n        return valueA - valueB;\n    }\n}\n</code></pre>\n<p>Now, from another class, if you created a list of <code>Example</code>'s, supplying a different implementation for each item, if you called <code>methodC</code> on each of the list items, a different implementation of <code>methodC</code> will be executed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void method() {\n    List&lt;Example&gt; list = new ArrayList&lt;&gt;();\n    list.add(new ExampleImplA());\n    list.add(new ExampleImplB());\n    for (Example example : list)\n        example.methodC(1, 2);\n}\n</code></pre>\n"}],"owner":{"account_id":28233491,"reputation":11,"user_id":21582360,"display_name":"Arthur Bittencourt"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684372514,"creation_date":1684337337,"question_id":76273764,"body_markdown":"I&#39;m studying OOP in Java, and i already understand the concepts about polymorphism and @override methods, but how one can be used without another?\r\n\r\n\r\nI would like to understand if there is an occasion of using polymorphism in which method overwriting is not used.","title":"How i can definy the limit between polymorphism and override method?","body":"<p>I'm studying OOP in Java, and i already understand the concepts about polymorphism and @override methods, but how one can be used without another?</p>\n<p>I would like to understand if there is an occasion of using polymorphism in which method overwriting is not used.</p>\n"},{"tags":["java","dns"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1684324338,"post_id":76270467,"comment_id":134501049,"body_markdown":"The SAN (subject alternative name) is the **name** of the server in the TLS (SSL is *ancient*) certificate. You can [disable hostname verification](https://stackoverflow.com/questions/6031258/java-ssl-how-to-disable-hostname-verification). Or you can modify DNS to actually resolve abc.xyz.com. This behavior is required by the protocol. And you&#39;d see a very similar message if you tried to access the URL in a browser.","body":"The SAN (subject alternative name) is the <b>name</b> of the server in the TLS (SSL is <i>ancient</i>) certificate. You can <a href=\"https://stackoverflow.com/questions/6031258/java-ssl-how-to-disable-hostname-verification\">disable hostname verification</a>. Or you can modify DNS to actually resolve abc.xyz.com. This behavior is required by the protocol. And you&#39;d see a very similar message if you tried to access the URL in a browser."},{"owner":{"account_id":3200009,"reputation":7174,"user_id":2702249,"accept_rate":57,"display_name":"Om Sao"},"score":0,"creation_date":1684330655,"post_id":76270467,"comment_id":134502598,"body_markdown":"@ElliottFrisch: Thank you. I am using `HttpURLConnection` class in Java. I found that there is API available in `HttpsURLConnection` class to disable SSL validation.","body":"@ElliottFrisch: Thank you. I am using <code>HttpURLConnection</code> class in Java. I found that there is API available in <code>HttpsURLConnection</code> class to disable SSL validation."}],"answers":[{"tags":[],"owner":{"account_id":3200009,"reputation":7174,"user_id":2702249,"accept_rate":57,"display_name":"Om Sao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684371596,"creation_date":1684371596,"answer_id":76277106,"question_id":76270467,"body_markdown":"The simplest way I found is to provide value `true` to `HttpsURLConnection.setHostnameVerifier()`\r\n\r\nYou need to override the method `public boolean verify(String hostname, SSLSession session)` for returning `true` everytime.\r\n\r\n\r\nBelow is an example: \r\n\r\n\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.lang.Exception;\r\n    import java.net.URL;\r\n    \r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.HttpsURLConnection;\r\n    import javax.net.ssl.SSLSession;\r\n    \r\n    public class SkipVerification implements Runnable {\r\n    \r\n        private static final String TAG = SkipVerification.class.toString();\r\n        private String server_port;\r\n        private String serverIP;\r\n    \r\n        public SkipVerification(String serverIP, String server_port){\r\n            this.serverIP = serverIP;\r\n            this.server_port = server_port;\r\n        }\r\n    \r\n        public void run() {\r\n            try {\r\n                HostnameVerifier hostnameVerifier = new HostnameVerifier() {\r\n                    @Override\r\n                    public boolean verify(String hostname, SSLSession session) {\r\n                        return true;\r\n                    }\r\n                };\r\n    \r\n                URL url = new URL(&quot;https://&quot; + serverIP + &quot;:&quot; + server_port + &quot;/json&quot;);\r\n                InputStream inStream = null;\r\n    \r\n                try {\r\n                    HttpsURLConnection urlConnection = (HttpsURLConnection)url.openConnection();\r\n                    urlConnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n                    urlConnection.setHostnameVerifier(hostnameVerifier);\r\n                    inStream = urlConnection.getInputStream();\r\n                    BufferedReader reader = new BufferedReader(new InputStreamReader(inStream));\r\n                } catch (Exception e) {\r\n                    Log.e(TAG, &quot;error fetching data from server&quot;, e);\r\n                } finally {\r\n                    if (inStream != null) {\r\n                        inStream.close();\r\n                    }\r\n                }\r\n            } catch (Exception e) {\r\n                Log.e(TAG, &quot;error initializing SkipVerificationn thread&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThis works when using `HttpsURLConnection` class. For other implementation, please refer to comment to question by **@Elliott Frisch**.","title":"Resolve the hostname in Java code and use it","body":"<p>The simplest way I found is to provide value <code>true</code> to <code>HttpsURLConnection.setHostnameVerifier()</code></p>\n<p>You need to override the method <code>public boolean verify(String hostname, SSLSession session)</code> for returning <code>true</code> everytime.</p>\n<p>Below is an example:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.Exception;\nimport java.net.URL;\n\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.HttpsURLConnection;\nimport javax.net.ssl.SSLSession;\n\npublic class SkipVerification implements Runnable {\n\n    private static final String TAG = SkipVerification.class.toString();\n    private String server_port;\n    private String serverIP;\n\n    public SkipVerification(String serverIP, String server_port){\n        this.serverIP = serverIP;\n        this.server_port = server_port;\n    }\n\n    public void run() {\n        try {\n            HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n                @Override\n                public boolean verify(String hostname, SSLSession session) {\n                    return true;\n                }\n            };\n\n            URL url = new URL(&quot;https://&quot; + serverIP + &quot;:&quot; + server_port + &quot;/json&quot;);\n            InputStream inStream = null;\n\n            try {\n                HttpsURLConnection urlConnection = (HttpsURLConnection)url.openConnection();\n                urlConnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n                urlConnection.setHostnameVerifier(hostnameVerifier);\n                inStream = urlConnection.getInputStream();\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inStream));\n            } catch (Exception e) {\n                Log.e(TAG, &quot;error fetching data from server&quot;, e);\n            } finally {\n                if (inStream != null) {\n                    inStream.close();\n                }\n            }\n        } catch (Exception e) {\n            Log.e(TAG, &quot;error initializing SkipVerificationn thread&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>This works when using <code>HttpsURLConnection</code> class. For other implementation, please refer to comment to question by <strong>@Elliott Frisch</strong>.</p>\n"}],"owner":{"account_id":3200009,"reputation":7174,"user_id":2702249,"accept_rate":57,"display_name":"Om Sao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76277106,"answer_count":1,"score":0,"last_activity_date":1684371596,"creation_date":1684315148,"question_id":76270467,"body_markdown":"I am connecting to a service through my Java code. Let&#39;s call FQDN or hostname of service as: `abc.xyz.com`.\r\n\r\nMy Java implementation returns exception:\r\n \r\n\r\n    java.net.UnknownHostException: dfour6gtsg5a.streaming.us-phoenix-1.oci.oraclecloud.com\r\n    \tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:567)\r\n    \tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n    \tat java.base/java.net.Socket.connect(Socket.java:633)\r\n    \tat java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\r\n    \tat java.base/sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:174)\r\n    \tat java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\r\n    \tat java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:532)\r\n    \tat java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:637)\r\n    \tat java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\r\n    \tat java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\r\n    \tat \r\n\r\nNow, when I include entry of FQDN of service and IPAddress in `/etc/hosts` as below: \r\n\r\n    127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\r\n    ...\r\n    100.70.125.57 abc.xyz.com\r\n\r\nSame Java implementation works correctly as service FQDN get resolved to IP address correctly.\r\n\r\nIf I try to run Java implementation with IPAddress, I get below error:\r\n\r\n    javax.net.ssl.SSLHandshakeException: No subject alternative names matching IP address 100.70.125.57 found\r\n    \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\r\n    \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\r\n    \tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:654)\r\n    \tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:473)\r\n    \tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369)\r\n    \tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396)\r\n\r\nIn production environment, I will not have access to `/etc/hosts` for editing.\r\n\r\nHow can I resolve the Service FQDN to the IPAddress inside my Java implementation?\r\n\r\n\r\n\r\n","title":"Resolve the hostname in Java code and use it","body":"<p>I am connecting to a service through my Java code. Let's call FQDN or hostname of service as: <code>abc.xyz.com</code>.</p>\n<p>My Java implementation returns exception:</p>\n<pre><code>java.net.UnknownHostException: dfour6gtsg5a.streaming.us-phoenix-1.oci.oraclecloud.com\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:567)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n    at java.base/java.net.Socket.connect(Socket.java:633)\n    at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\n    at java.base/sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:174)\n    at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:532)\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:637)\n    at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\n    at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\n    at \n</code></pre>\n<p>Now, when I include entry of FQDN of service and IPAddress in <code>/etc/hosts</code> as below:</p>\n<pre><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n...\n100.70.125.57 abc.xyz.com\n</code></pre>\n<p>Same Java implementation works correctly as service FQDN get resolved to IP address correctly.</p>\n<p>If I try to run Java implementation with IPAddress, I get below error:</p>\n<pre><code>javax.net.ssl.SSLHandshakeException: No subject alternative names matching IP address 100.70.125.57 found\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:654)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:473)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369)\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396)\n</code></pre>\n<p>In production environment, I will not have access to <code>/etc/hosts</code> for editing.</p>\n<p>How can I resolve the Service FQDN to the IPAddress inside my Java implementation?</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":1582945,"reputation":113,"user_id":1467885,"accept_rate":25,"display_name":"user1467885"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1340320013,"creation_date":1340320013,"answer_id":11148089,"question_id":11111653,"body_markdown":"I have found the solution after hours of fiddling. I am using VisualJVM now instead but they operate in the same way by connecting to a local socket and setting up a JMX connection.\r\n\r\nFirstly Both jvmmonitor/visualjm and your java app MUST be running under the same user.\r\n\r\nThe user must have write access to the tmp directry on linux /tmp/.\r\n\r\nWhen any java app is launched a local file with the process PID for the java program is created in hsperfdata_myusername folder in tmp which is used by java profiling software to connect to the jvm running your java program.\r\n\r\nIf you launch a java program from a terminal and the current directory of the terminal is not your home directory, eg. launching from  MYNAME:/home/myname/project/myjavaapp$ you may find that you can connect to the jvm but not be able to sample or profile it. Making the current directory your home directory should solve this problem. \r\n\r\n","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>I have found the solution after hours of fiddling. I am using VisualJVM now instead but they operate in the same way by connecting to a local socket and setting up a JMX connection.</p>\n\n<p>Firstly Both jvmmonitor/visualjm and your java app MUST be running under the same user.</p>\n\n<p>The user must have write access to the tmp directry on linux /tmp/.</p>\n\n<p>When any java app is launched a local file with the process PID for the java program is created in hsperfdata_myusername folder in tmp which is used by java profiling software to connect to the jvm running your java program.</p>\n\n<p>If you launch a java program from a terminal and the current directory of the terminal is not your home directory, eg. launching from  MYNAME:/home/myname/project/myjavaapp$ you may find that you can connect to the jvm but not be able to sample or profile it. Making the current directory your home directory should solve this problem. </p>\n"},{"tags":[],"owner":{"account_id":1476756,"reputation":1921,"user_id":1386969,"accept_rate":80,"display_name":"lidox"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1463642254,"creation_date":1406641002,"answer_id":25016721,"question_id":11111653,"body_markdown":"You have to change the .ini file of Eclipse\r\n\r\nJust add:\r\n\r\n    -vm C:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\r\n\r\nHere is the eclipse.ini file in full:\r\n\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.0.201.R35x_v20090715.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.0.200.v20090519\r\n    -product\r\n    org.eclipse.epp.package.jee.product\r\n    --launcher.XXMaxPermSize\r\n    256M\r\n    -showsplash\r\n    org.eclipse.platform\r\n    --launcher.XXMaxPermSize\r\n    256m\r\n    -vm\r\n    C:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.5\r\n    -Xms40m\r\n    -Xmx512m","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>You have to change the .ini file of Eclipse</p>\n\n<p>Just add:</p>\n\n<pre><code>-vm C:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\n</code></pre>\n\n<p>Here is the eclipse.ini file in full:</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.0.201.R35x_v20090715.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_1.0.200.v20090519\n-product\norg.eclipse.epp.package.jee.product\n--launcher.XXMaxPermSize\n256M\n-showsplash\norg.eclipse.platform\n--launcher.XXMaxPermSize\n256m\n-vm\nC:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-Xms40m\n-Xmx512m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93838,"reputation":13057,"user_id":256544,"display_name":"splash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432042556,"creation_date":1432042556,"answer_id":30327251,"question_id":11111653,"body_markdown":"This solution from the [JVisualVM Troubleshooting Guide][1] also helps me for jvmmonitor:\r\n\r\n&gt; **Local Applications Cannot Be Monitored**\r\n&gt; \r\n&gt; **Description:** An error dialog saying that local applications cannot be\r\n&gt; monitored is shown immediately after VisualVM startup. Locally running\r\n&gt; Java applications are displayed as &lt;Unknown Application&gt; (pid ###).\r\n&gt; \r\n&gt; **Resolution:**  This can happen on Windows systems if the username\r\n&gt; contains capitalized letters. In this case, username is `UserName` but\r\n&gt; the jvmstat directory created by JDK is `%TMP%\\hsperfdata_username`. To\r\n&gt; workaround the problem, exit all Java applications, delete the\r\n&gt; `%TMP%\\hsperfdata_username` directory and create new\r\n&gt; `%TMP%\\hsperfdata_UserName` directory.\r\n\r\n\r\n  [1]: https://visualvm.java.net/troubleshooting.html","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>This solution from the <a href=\"https://visualvm.java.net/troubleshooting.html\" rel=\"nofollow\">JVisualVM Troubleshooting Guide</a> also helps me for jvmmonitor:</p>\n\n<blockquote>\n  <p><strong>Local Applications Cannot Be Monitored</strong></p>\n  \n  <p><strong>Description:</strong> An error dialog saying that local applications cannot be\n  monitored is shown immediately after VisualVM startup. Locally running\n  Java applications are displayed as  (pid ###).</p>\n  \n  <p><strong>Resolution:</strong>  This can happen on Windows systems if the username\n  contains capitalized letters. In this case, username is <code>UserName</code> but\n  the jvmstat directory created by JDK is <code>%TMP%\\hsperfdata_username</code>. To\n  workaround the problem, exit all Java applications, delete the\n  <code>%TMP%\\hsperfdata_username</code> directory and create new\n  <code>%TMP%\\hsperfdata_UserName</code> directory.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4072211,"reputation":2941,"user_id":3344832,"accept_rate":50,"display_name":"Mohamed Ennahdi El Idrissi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570914083,"creation_date":1533553261,"answer_id":51706069,"question_id":11111653,"body_markdown":"Did you check the directive in this [JVMMonitor&#39;s FAQ](http://www.jvmmonitor.org/doc/#Cannot_Find_JVMs)?\r\n\r\nIf the problem persists, run Eclipse as an Administrator, at least once after the installation of JVM Monitor plugin.\r\n\r\nThis solved the problem for me.","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>Did you check the directive in this <a href=\"http://www.jvmmonitor.org/doc/#Cannot_Find_JVMs\" rel=\"nofollow noreferrer\">JVMMonitor's FAQ</a>?</p>\n\n<p>If the problem persists, run Eclipse as an Administrator, at least once after the installation of JVM Monitor plugin.</p>\n\n<p>This solved the problem for me.</p>\n"},{"tags":[],"owner":{"account_id":9757211,"reputation":49,"user_id":7233526,"display_name":"Mohammed_Moulla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684371558,"creation_date":1684371558,"answer_id":76277100,"question_id":11111653,"body_markdown":"after try the first solution (change ini file) it not worked\r\nand I just but the jdk path in the preferences : \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eTY8f.png","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>after try the first solution (change ini file) it not worked\nand I just but the jdk path in the preferences :</p>\n<p><a href=\"https://i.stack.imgur.com/eTY8f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eTY8f.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1582945,"reputation":113,"user_id":1467885,"accept_rate":25,"display_name":"user1467885"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5562,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1684371558,"creation_date":1340155406,"question_id":11111653,"body_markdown":"I am trying to use jvmmonitor to profile my app in eclipse but there are no jvms listed, not even the running eclipse jvm and when I start my app the new jvm does not appear. \r\n \r\n[The docs][1] say &gt;\r\n\r\n&gt; At least one JVM (Eclipse itself) should be shown on JVM Explorer. If no JVM is shown, it is likely that Eclipse is not started with supported JDK. For example, JRE might be used instead of JDK. \r\nTo solve the issue, \r\n Check the value of system property java.home with Help &gt; About Eclipse &gt; Installation Details &gt; Configuration. You may see that the supported JDK is not specified to java.home. \r\n Close Eclipse. \r\n To enforce using a desired JDK on Eclipse, specify the option -vm to the eclipse executable, or alternatively specify it in eclipse.ini. See the   Workbench User Guide to learn how to specify that option. \r\n Start Eclipse.\r\n\r\nThe java.home property in the eclipse config says /home/myname/programs/jdk/jre\r\n\r\nI have tried to change it but nothing will. my -vm is already set to the jdk directory and my linux .profile and .bashrc exports to the JAVA_HOME to the jdk directory but java.home in eclipse still says /home/myname/programs/jdk/jre\r\n\r\n\r\nI have also set the jdk root directory to /home/myname/programs/jdk/ in the java&gt;monitor&gt;tools  preferences page but still no luck.\r\n\r\nI have uninstalled jvmmonitor and reinstalled it completely but there is no change.\r\n\r\nI am running eclipse indigo with jdk 7 and jvmmonitor 3.8\r\n\r\nThis is driving me nuts now, any ideas would be most welcome\r\n\r\nThanks in advance\r\n\r\n  [1]: http://www.jvmmonitor.org/doc/index.html#FAQ","title":"jvmmonitor not listing any JVMs in eclipse","body":"<p>I am trying to use jvmmonitor to profile my app in eclipse but there are no jvms listed, not even the running eclipse jvm and when I start my app the new jvm does not appear. </p>\n\n<p><a href=\"http://www.jvmmonitor.org/doc/index.html#FAQ\" rel=\"nofollow\">The docs</a> say ></p>\n\n<blockquote>\n  <p>At least one JVM (Eclipse itself) should be shown on JVM Explorer. If no JVM is shown, it is likely that Eclipse is not started with supported JDK. For example, JRE might be used instead of JDK. \n  To solve the issue, \n   Check the value of system property java.home with Help > About Eclipse > Installation Details > Configuration. You may see that the supported JDK is not specified to java.home. \n   Close Eclipse. \n   To enforce using a desired JDK on Eclipse, specify the option -vm to the eclipse executable, or alternatively specify it in eclipse.ini. See the   Workbench User Guide to learn how to specify that option. \n   Start Eclipse.</p>\n</blockquote>\n\n<p>The java.home property in the eclipse config says /home/myname/programs/jdk/jre</p>\n\n<p>I have tried to change it but nothing will. my -vm is already set to the jdk directory and my linux .profile and .bashrc exports to the JAVA_HOME to the jdk directory but java.home in eclipse still says /home/myname/programs/jdk/jre</p>\n\n<p>I have also set the jdk root directory to /home/myname/programs/jdk/ in the java>monitor>tools  preferences page but still no luck.</p>\n\n<p>I have uninstalled jvmmonitor and reinstalled it completely but there is no change.</p>\n\n<p>I am running eclipse indigo with jdk 7 and jvmmonitor 3.8</p>\n\n<p>This is driving me nuts now, any ideas would be most welcome</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684367832,"post_id":76276868,"comment_id":134510001,"body_markdown":"If `getId` is returning `null` then check when it&#39;s assigned, in the `createRecord` method.  It sounds like the database call is returning `null`.","body":"If <code>getId</code> is returning <code>null</code> then check when it&#39;s assigned, in the <code>createRecord</code> method.  It sounds like the database call is returning <code>null</code>."},{"owner":{"account_id":5877528,"reputation":93,"user_id":4627963,"display_name":"Tony Narvarte"},"score":0,"creation_date":1684368014,"post_id":76276868,"comment_id":134510016,"body_markdown":"I didn&#39;t explain it well. let me reword my question. I reworded my psuedo code.","body":"I didn&#39;t explain it well. let me reword my question. I reworded my psuedo code."}],"answers":[{"comments":[{"owner":{"account_id":5877528,"reputation":93,"user_id":4627963,"display_name":"Tony Narvarte"},"score":0,"creation_date":1684419450,"post_id":76277091,"comment_id":134517281,"body_markdown":"Thank you. This is what I was looking for. The thenAnswer examples I came across didn&#39;t address how to handle side effects of mocking an input mutation.","body":"Thank you. This is what I was looking for. The thenAnswer examples I came across didn&#39;t address how to handle side effects of mocking an input mutation."}],"tags":[],"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684371468,"creation_date":1684371468,"answer_id":76277091,"question_id":76276868,"body_markdown":"If you require some additional mocking behavior other than simply returning a value, you can use `thenAnswer` instead of `thenReturn` in your `when` mocking stub.\r\n\r\nI hope this (overly) simplified example helps:\r\n```java\r\n   @Mock\r\n   private Bar executor;\r\n\r\n   @Test\r\n   public void testMutation() {\r\n      Foo foo = new Foo();\r\n\r\n      when(executor.mutate(foo)).thenAnswer(a -&gt; {\r\n         int mockedId = 10;\r\n         Foo input = a.getArgument(0);\r\n         input.setId(mockedId); // mutate the parameter from the method signature\r\n         return mockedId;\r\n      });\r\n\r\n      executor.mutate(foo);\r\n      Assertions.assertEquals(10, foo.getId());\r\n   }\r\n\r\n   //---- boiler plate code of the DTO and method that mutates the value\r\n   public class Bar {\r\n\r\n      public int mutate(Foo input) {\r\n         input.setId(3);\r\n         return 3;\r\n      }\r\n   }\r\n\r\n   public class Foo {\r\n      private int id;\r\n\r\n      public int getId() {\r\n         return id;\r\n      }\r\n\r\n      public void setId(int id) {\r\n         this.id = id;\r\n      }\r\n   }\r\n```","title":"Mocking a method that edits the input","body":"<p>If you require some additional mocking behavior other than simply returning a value, you can use <code>thenAnswer</code> instead of <code>thenReturn</code> in your <code>when</code> mocking stub.</p>\n<p>I hope this (overly) simplified example helps:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   @Mock\n   private Bar executor;\n\n   @Test\n   public void testMutation() {\n      Foo foo = new Foo();\n\n      when(executor.mutate(foo)).thenAnswer(a -&gt; {\n         int mockedId = 10;\n         Foo input = a.getArgument(0);\n         input.setId(mockedId); // mutate the parameter from the method signature\n         return mockedId;\n      });\n\n      executor.mutate(foo);\n      Assertions.assertEquals(10, foo.getId());\n   }\n\n   //---- boiler plate code of the DTO and method that mutates the value\n   public class Bar {\n\n      public int mutate(Foo input) {\n         input.setId(3);\n         return 3;\n      }\n   }\n\n   public class Foo {\n      private int id;\n\n      public int getId() {\n         return id;\n      }\n\n      public void setId(int id) {\n         this.id = id;\n      }\n   }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5877528,"reputation":93,"user_id":4627963,"display_name":"Tony Narvarte"},"score":0,"creation_date":1684419513,"post_id":76277095,"comment_id":134517297,"body_markdown":"Thanks. This was what I was looking for. Hadnt used thenAnswer before.","body":"Thanks. This was what I was looking for. Hadnt used thenAnswer before."}],"tags":[],"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684371492,"creation_date":1684371492,"answer_id":76277095,"question_id":76276868,"body_markdown":"My guess is that you are **only mocking** the **value return** but **not the side effect** inside the **dao method**. You are passing the `RecordDto` as parameter, doing something and also calling methods that modify the state of the parameter received. The solution for that would be to use `doAnswer` that lets you not only return a value, you can add some extra logic. So, your test should look like this:\r\n\r\n    @Test\r\n    public void test() {\r\n        dao = mock(Dao.class);\r\n        RecordDto input = new RecordDto();\r\n        Integer someRandomId = 15;\r\n        Integer randomRowsUpdated = 3;\r\n        Answer&lt;Integer&gt; answer = new Answer&lt;Integer&gt;() {\r\n            public Integer answer(InvocationOnMock invocation) {\r\n                RecordDto input = invocation.getArgument(0, RecordDto.class); // get the argument received in `createRecord`\r\n                input.setId(someRandomId); // set the new id\r\n                return randomRowsUpdated; // the value to be returned by `createdRecord`\r\n            }\r\n        };\r\n        doAnswer(answer).when(dao).createRecord(input); // using doAnswer instead of doReturn\r\n        createSomething(input);\r\n    }\r\n\r\nThat would be the quick solution. \r\n\r\nI would say that this is not exactly the best approach. Doing side effects inside a method could cause bugs in a future and it will hard to know the root cause of the problem or even debug. Returning a `RecordDto` or another custom object that lets you now the new id and the affected rows or something similar will make your tests easier to setup and also make the assertion.","title":"Mocking a method that edits the input","body":"<p>My guess is that you are <strong>only mocking</strong> the <strong>value return</strong> but <strong>not the side effect</strong> inside the <strong>dao method</strong>. You are passing the <code>RecordDto</code> as parameter, doing something and also calling methods that modify the state of the parameter received. The solution for that would be to use <code>doAnswer</code> that lets you not only return a value, you can add some extra logic. So, your test should look like this:</p>\n<pre><code>@Test\npublic void test() {\n    dao = mock(Dao.class);\n    RecordDto input = new RecordDto();\n    Integer someRandomId = 15;\n    Integer randomRowsUpdated = 3;\n    Answer&lt;Integer&gt; answer = new Answer&lt;Integer&gt;() {\n        public Integer answer(InvocationOnMock invocation) {\n            RecordDto input = invocation.getArgument(0, RecordDto.class); // get the argument received in `createRecord`\n            input.setId(someRandomId); // set the new id\n            return randomRowsUpdated; // the value to be returned by `createdRecord`\n        }\n    };\n    doAnswer(answer).when(dao).createRecord(input); // using doAnswer instead of doReturn\n    createSomething(input);\n}\n</code></pre>\n<p>That would be the quick solution.</p>\n<p>I would say that this is not exactly the best approach. Doing side effects inside a method could cause bugs in a future and it will hard to know the root cause of the problem or even debug. Returning a <code>RecordDto</code> or another custom object that lets you now the new id and the affected rows or something similar will make your tests easier to setup and also make the assertion.</p>\n"}],"owner":{"account_id":5877528,"reputation":93,"user_id":4627963,"display_name":"Tony Narvarte"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76277095,"answer_count":2,"score":0,"last_activity_date":1684371492,"creation_date":1684367161,"question_id":76276868,"body_markdown":"I am trying to mock a dao method that creates a record then sets the id on the input.\r\n\r\nhere is some psuedo code\r\n\r\nsample test\r\n\r\n    RecordDto input = new RecordDto();\r\n    input.setId(null);\r\n    input.setName(&quot;test&quot;);\r\n    \r\n    when(dao.createRecord(any(RecordDto.class)).thenReturn(1);\r\n    \r\n    createSomething(input);\r\n\r\nmethod to mock\r\n\r\n    public int createRecord(RecordDto input) {\r\n       int updatedRowCount = 0;\r\n       int primaryKey = db call to create record\r\n       rows += primary != null ? 1 : 0;\r\n       input.setId(primaryKey) &lt;-\r\n       return updateRowCount;\r\n    }\r\n\r\nclass under test\r\n\r\n    public void createSomething(RecordDto input)\r\n       int rowsUpdated = dao.createRecord(input);\r\n       if (input.getId() != null) {\r\n          do something &lt;- this code can not be reached from my test\r\n          because my mock only sets the return value. It needs to also\r\n          modify the input.id.\r\n       }\r\n\r\nOnce the method is called in my real class input has an id. My mock just returns a 1 for the row count but the id is still null.\r\n\r\n   \r\n\r\n","title":"Mocking a method that edits the input","body":"<p>I am trying to mock a dao method that creates a record then sets the id on the input.</p>\n<p>here is some psuedo code</p>\n<p>sample test</p>\n<pre><code>RecordDto input = new RecordDto();\ninput.setId(null);\ninput.setName(&quot;test&quot;);\n\nwhen(dao.createRecord(any(RecordDto.class)).thenReturn(1);\n\ncreateSomething(input);\n</code></pre>\n<p>method to mock</p>\n<pre><code>public int createRecord(RecordDto input) {\n   int updatedRowCount = 0;\n   int primaryKey = db call to create record\n   rows += primary != null ? 1 : 0;\n   input.setId(primaryKey) &lt;-\n   return updateRowCount;\n}\n</code></pre>\n<p>class under test</p>\n<pre><code>public void createSomething(RecordDto input)\n   int rowsUpdated = dao.createRecord(input);\n   if (input.getId() != null) {\n      do something &lt;- this code can not be reached from my test\n      because my mock only sets the return value. It needs to also\n      modify the input.id.\n   }\n</code></pre>\n<p>Once the method is called in my real class input has an id. My mock just returns a 1 for the row count but the id is still null.</p>\n"},{"tags":["java","sql-server","jdbc","glassfish-5"],"comments":[{"owner":{"account_id":6317022,"reputation":3182,"user_id":4906586,"accept_rate":88,"display_name":"Al-un"},"score":0,"creation_date":1507716594,"post_id":46683881,"comment_id":80318550,"body_markdown":"It looks like [SSL is mandatory for Microsoft SQL server](https://blogs.msdn.microsoft.com/jdbcteam/2008/09/09/the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption/). Silly question: have you tried to a [SSL-enabled](https://learn.microsoft.com/en-us/sql/connect/jdbc/connecting-with-ssl-encryption) configuration?","body":"It looks like <a href=\"https://blogs.msdn.microsoft.com/jdbcteam/2008/09/09/the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption/\" rel=\"nofollow noreferrer\">SSL is mandatory for Microsoft SQL server</a>. Silly question: have you tried to a <a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/connecting-with-ssl-encryption\" rel=\"nofollow noreferrer\">SSL-enabled</a> configuration?"},{"owner":{"account_id":6689986,"reputation":943,"user_id":5159766,"accept_rate":70,"display_name":"jenny"},"score":0,"creation_date":1507721234,"post_id":46683881,"comment_id":80321471,"body_markdown":"Actually I haven&#39;t because at the moment I don&#39;t need SSL...\nI had no problem connecting to the same db with a glassfish-4 installation though.","body":"Actually I haven&#39;t because at the moment I don&#39;t need SSL... I had no problem connecting to the same db with a glassfish-4 installation though."},{"owner":{"account_id":8655,"reputation":20729,"user_id":15689,"accept_rate":91,"display_name":"Brian Knoblauch"},"score":0,"creation_date":1512403914,"post_id":46683881,"comment_id":82233020,"body_markdown":"Exact same issue here (unable to upgrade to GlassFish 5.0 because of this, despite it working fine on 4.1.1), were you ever able to get this fixed?","body":"Exact same issue here (unable to upgrade to GlassFish 5.0 because of this, despite it working fine on 4.1.1), were you ever able to get this fixed?"},{"owner":{"account_id":6689986,"reputation":943,"user_id":5159766,"accept_rate":70,"display_name":"jenny"},"score":0,"creation_date":1512458827,"post_id":46683881,"comment_id":82254619,"body_markdown":"Sorry, I never got the time to try it out again... I&#39;m stuck with 4.1.1 as well for now..","body":"Sorry, I never got the time to try it out again... I&#39;m stuck with 4.1.1 as well for now.."}],"answers":[{"comments":[{"owner":{"account_id":8655,"reputation":20729,"user_id":15689,"accept_rate":91,"display_name":"Brian Knoblauch"},"score":0,"creation_date":1515766473,"post_id":47828264,"comment_id":83437760,"body_markdown":"Unfortunately this does not work in my case.  The errors persist.","body":"Unfortunately this does not work in my case.  The errors persist."}],"tags":[],"owner":{"account_id":12505593,"reputation":56,"user_id":9102524,"display_name":"Nicolas Gaudin"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1513328073,"creation_date":1513325778,"answer_id":47828264,"question_id":46683881,"body_markdown":"Facing also this issue with *Glassfish 5* on *Windows 10*, disabling elliptic curves did the trick, just add:\r\n\r\n    -Dcom.sun.net.ssl.enableECC=false\r\n\r\nto glassfish JVM options and restart server.\r\nposted workaround on glassfish issue tracker to help them fix it quickly \r\n","title":"JDBC connection pool ping error in Glassfish","body":"<p>Facing also this issue with <em>Glassfish 5</em> on <em>Windows 10</em>, disabling elliptic curves did the trick, just add:</p>\n\n<pre><code>-Dcom.sun.net.ssl.enableECC=false\n</code></pre>\n\n<p>to glassfish JVM options and restart server.\nposted workaround on glassfish issue tracker to help them fix it quickly </p>\n"},{"tags":[],"owner":{"account_id":28165739,"reputation":1,"user_id":21524965,"display_name":"Nen patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680161637,"creation_date":1680161637,"answer_id":75885330,"question_id":46683881,"body_markdown":"this happens when password you have set in phpMyAdmin and in payara console is different, check the password \r\nfor that\r\ngo to xampp-&gt;Apache-&gt;config-&gt;config.inc.php\r\ncheck password in that file \r\nand keep the same password in payara or glassfish console.","title":"JDBC connection pool ping error in Glassfish","body":"<p>this happens when password you have set in phpMyAdmin and in payara console is different, check the password\nfor that\ngo to xampp-&gt;Apache-&gt;config-&gt;config.inc.php\ncheck password in that file\nand keep the same password in payara or glassfish console.</p>\n"}],"owner":{"account_id":6689986,"reputation":943,"user_id":5159766,"accept_rate":70,"display_name":"jenny"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5500,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":47828264,"answer_count":2,"score":2,"last_activity_date":1684371254,"creation_date":1507711911,"question_id":46683881,"body_markdown":"I am trying to create a jdbc connection pool in glassfish 5 for a Microsoft SQL Server database. I am using the `mssql-jdbc-6.2.2.jre8.jar` and the latest SQLExpress server version (MSSQL14.SQLEXPRESS)\r\n\r\nResource Type: `javax.sql.DataSource`\r\n\r\nDatasource Classname: `com.microsoft.sqlserver.jdbc.SQLServerDataSource`\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\nThe connection pool is created successfully but when i try to ping, I get this error:\r\n\r\n&gt; Ping Connection Pool failed for sql_tire_pool. Connection could not be\r\n&gt; allocated because: The driver could not establish a secure connection\r\n&gt; to SQL Server by using Secure Sockets Layer (SSL) encryption. Error:\r\n&gt; &quot;Unsupported curveId: 29&quot;.\r\n&gt; ClientConnectionId:f86f1ef8-29c4-4e39-b112-f5da9cbfe13d Please check\r\n&gt; the server.log for more details.\r\n\r\n\r\nAnd this is the server log:\r\n\r\n\r\n&gt; [2017-10-11T10:55:11.747+0300] [glassfish 5.0] [WARNING]\r\n&gt; [test.connection.pool.failed]\r\n&gt; [javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service]\r\n&gt; [tid: _ThreadID=125 _ThreadName=admin-listener(7)] [timeMillis:\r\n&gt; 1507708511747] [levelValue: 900] [[   RAR8054: Exception while\r\n&gt; creating an unpooled [test] connection for pool [ test_pool ],\r\n&gt; Connection could not be allocated because: The driver could not\r\n&gt; establish a secure connection to SQL Server by using Secure Sockets\r\n&gt; Layer (SSL) encryption. Error: &quot;Unsupported curveId: 29&quot;.\r\n&gt; ClientConnectionId:4c325981-4c97-4db2-b4fb-f7aafca4f03b]]\r\n&gt; \r\n&gt; [2017-10-11T10:55:11.750+0300] [glassfish 5.0] [SEVERE] []\r\n&gt; [org.glassfish.admingui] [tid: _ThreadID=51\r\n&gt; _ThreadName=admin-listener(3)] [timeMillis: 1507708511750] [levelValue: 1000] [[   RestResponse.getResponse() gives FAILURE. \r\n&gt; endpoint =\r\n&gt; &#39;http://localhost:4848/management/domain/resources/ping-connection-pool.json&#39;;\r\n&gt; attrs = &#39;{id=test_pool}&#39;]]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7Sse7.png\r\n  [2]: https://i.stack.imgur.com/7H5uO.png\r\n\r\n\r\nI am running Windows 10 and also everything is running locally (Glassfish installation, SQL server)\r\n\r\n\r\n**UPDATE**\r\n\r\nUsing the accepted answer&#39;s solution, the problem is partially solved.The connection pool now successfuly pings the database, but I encounter the same problem as the same error is thrown in the glassfish log when my application tries to run a query through jpa/hibernate.","title":"JDBC connection pool ping error in Glassfish","body":"<p>I am trying to create a jdbc connection pool in glassfish 5 for a Microsoft SQL Server database. I am using the <code>mssql-jdbc-6.2.2.jre8.jar</code> and the latest SQLExpress server version (MSSQL14.SQLEXPRESS)</p>\n\n<p>Resource Type: <code>javax.sql.DataSource</code></p>\n\n<p>Datasource Classname: <code>com.microsoft.sqlserver.jdbc.SQLServerDataSource</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/7Sse7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Sse7.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/7H5uO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7H5uO.png\" alt=\"enter image description here\"></a>\nThe connection pool is created successfully but when i try to ping, I get this error:</p>\n\n<blockquote>\n  <p>Ping Connection Pool failed for sql_tire_pool. Connection could not be\n  allocated because: The driver could not establish a secure connection\n  to SQL Server by using Secure Sockets Layer (SSL) encryption. Error:\n  \"Unsupported curveId: 29\".\n  ClientConnectionId:f86f1ef8-29c4-4e39-b112-f5da9cbfe13d Please check\n  the server.log for more details.</p>\n</blockquote>\n\n<p>And this is the server log:</p>\n\n<blockquote>\n  <p>[2017-10-11T10:55:11.747+0300] [glassfish 5.0] [WARNING]\n  [test.connection.pool.failed]\n  [javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service]\n  [tid: _ThreadID=125 _ThreadName=admin-listener(7)] [timeMillis:\n  1507708511747] [levelValue: 900] [[   RAR8054: Exception while\n  creating an unpooled [test] connection for pool [ test_pool ],\n  Connection could not be allocated because: The driver could not\n  establish a secure connection to SQL Server by using Secure Sockets\n  Layer (SSL) encryption. Error: \"Unsupported curveId: 29\".\n  ClientConnectionId:4c325981-4c97-4db2-b4fb-f7aafca4f03b]]</p>\n  \n  <p>[2017-10-11T10:55:11.750+0300] [glassfish 5.0] [SEVERE] []\n  [org.glassfish.admingui] [tid: _ThreadID=51\n  _ThreadName=admin-listener(3)] [timeMillis: 1507708511750] [levelValue: 1000] [[   RestResponse.getResponse() gives FAILURE. \n  endpoint =\n  '<a href=\"http://localhost:4848/management/domain/resources/ping-connection-pool.json\" rel=\"nofollow noreferrer\">http://localhost:4848/management/domain/resources/ping-connection-pool.json</a>';\n  attrs = '{id=test_pool}']]</p>\n</blockquote>\n\n<p>I am running Windows 10 and also everything is running locally (Glassfish installation, SQL server)</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Using the accepted answer's solution, the problem is partially solved.The connection pool now successfuly pings the database, but I encounter the same problem as the same error is thrown in the glassfish log when my application tries to run a query through jpa/hibernate.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":2,"creation_date":1684344260,"post_id":76274686,"comment_id":134505985,"body_markdown":"You can use this answer to set whatever decimal separator you need [How to change the decimal separator of DecimalFormat from comma to dot/point?](https://stackoverflow.com/questions/5054132/how-to-change-the-decimal-separator-of-decimalformat-from-comma-to-dot-point)","body":"You can use this answer to set whatever decimal separator you need <a href=\"https://stackoverflow.com/questions/5054132/how-to-change-the-decimal-separator-of-decimalformat-from-comma-to-dot-point\">How to change the decimal separator of DecimalFormat from comma to dot/point?</a>"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1684344611,"post_id":76274686,"comment_id":134506061,"body_markdown":"`resultSigiop.getString(&quot;aaun_md_area&quot;)` should probably be `resultSigiop.getDouble(&quot;aaun_md_area&quot;)`. You are reading the value as a String from the database and writing that String straight to the file.","body":"<code>resultSigiop.getString(&quot;aaun_md_area&quot;)</code> should probably be <code>resultSigiop.getDouble(&quot;aaun_md_area&quot;)</code>. You are reading the value as a String from the database and writing that String straight to the file."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684370666,"creation_date":1684370666,"answer_id":76277048,"question_id":76274686,"body_markdown":"You could use the `String.replace` method, replacing a `.` with a `,`.\r\n\r\n```java\r\nfw.append(resultSigiop.getString(&quot;aaun_md_area&quot;).replace(&#39;.&#39;, &#39;,&#39;));","title":"Java File, change decimal dot for a comma when exporting in txt","body":"<p>You could use the <code>String.replace</code> method, replacing a <code>.</code> with a <code>,</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>fw.append(resultSigiop.getString(&quot;aaun_md_area&quot;).replace('.', ','));\n</code></pre>\n"}],"owner":{"account_id":7190531,"reputation":175,"user_id":5491043,"display_name":"AllPower"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1684370666,"creation_date":1684344123,"question_id":76274686,"body_markdown":"I do a database search, assemble the columns and export a txt\r\n\r\nBut in the column (&quot;aaun_md_area) that is a number, instead of a comma, a dot is being applied, making it difficult to count in excel.\r\n\r\nThe column that is decimal that I need to change, is the &quot;aaun_md_area&quot; column\r\n\r\nHow to export using a comma?\r\n\r\n    File arquivo = new File(path);\r\n     try (FileWriter fw = new FileWriter(arquivo))\r\n\t\t{ fw.append(&quot;Witdh&quot;);\r\n          fw.append(&quot;Area&quot;);\r\n\t\t}\r\n\r\n    for (int i = 0;i&lt;listaRt.length; i++){\r\n      rts.add(listaRt[i]);\r\n      ResultSet resultSigiop = stSigiop.executeQuery(sqlSigiop.replace(&quot;:1&quot;, \r\n      rts.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;)));\r\n           while(resultSigiop.next()) \r\n\t\t\t\t{\r\n                   fw.append(resultSigiop.getString(&quot;ssrt_cd_status_subitem_rt&quot;));\r\n\t\t\t\t   fw.append(&#39;\\t&#39;);\r\n\t\t\t\t   fw.append(resultSigiop.getString(&quot;aaun_md_area&quot;));\r\n\t\t\t\t   fw.append(&#39;\\n&#39;);\t\r\n\t\t\t    }\r\n\t\t\t\t\tfw.flush();\r\n\t\t\t\t\t\r\n\t\t\t\t} catch(IOException ex){\r\n\t\t\t\t\tthrow ex;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\trts = new ArrayList&lt;String&gt;();\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\tfw.close();\r\n\t\t\t\r\n\t\t}\r\n\t\tcatch(IOException ex){\r\n\t\t\tthrow ex;\r\n\t\t}\r\n\t\t\r\n    }","title":"Java File, change decimal dot for a comma when exporting in txt","body":"<p>I do a database search, assemble the columns and export a txt</p>\n<p>But in the column (&quot;aaun_md_area) that is a number, instead of a comma, a dot is being applied, making it difficult to count in excel.</p>\n<p>The column that is decimal that I need to change, is the &quot;aaun_md_area&quot; column</p>\n<p>How to export using a comma?</p>\n<pre><code>File arquivo = new File(path);\n try (FileWriter fw = new FileWriter(arquivo))\n    { fw.append(&quot;Witdh&quot;);\n      fw.append(&quot;Area&quot;);\n    }\n\nfor (int i = 0;i&lt;listaRt.length; i++){\n  rts.add(listaRt[i]);\n  ResultSet resultSigiop = stSigiop.executeQuery(sqlSigiop.replace(&quot;:1&quot;, \n  rts.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;)));\n       while(resultSigiop.next()) \n            {\n               fw.append(resultSigiop.getString(&quot;ssrt_cd_status_subitem_rt&quot;));\n               fw.append('\\t');\n               fw.append(resultSigiop.getString(&quot;aaun_md_area&quot;));\n               fw.append('\\n'); \n            }\n                fw.flush();\n                \n            } catch(IOException ex){\n                throw ex;\n            }\n            \n            rts = new ArrayList&lt;String&gt;();\n        }   \n        \n        fw.close();\n        \n    }\n    catch(IOException ex){\n        throw ex;\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","image","graphics2d"],"comments":[{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":1,"creation_date":1423559321,"post_id":28427566,"comment_id":45187009,"body_markdown":"A typical screen hat appx. 72 dpi. A typical printer may have 720 dpi. So in order to exploit the printer resolution, you&#39;ll have to increase the image size significantly (probably: As high as possible without causing an OutOfMemoryError...)","body":"A typical screen hat appx. 72 dpi. A typical printer may have 720 dpi. So in order to exploit the printer resolution, you&#39;ll have to increase the image size significantly (probably: As high as possible without causing an OutOfMemoryError...)"},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423559784,"post_id":28427566,"comment_id":45187258,"body_markdown":"i made that by doing this:\n\nsize.width *= 5;\nsize.height *= 5;\n\nThe initial image had resolution: 594 X 840 and size 38.7KB,\nand the new image has resolution 2970 X 4200 and size 3.67 MB, but the same low quality..","body":"i made that by doing this:  size.width *= 5; size.height *= 5;  The initial image had resolution: 594 X 840 and size 38.7KB, and the new image has resolution 2970 X 4200 and size 3.67 MB, but the same low quality.."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1423560577,"post_id":28427566,"comment_id":45187711,"body_markdown":"You&#39;re capturing the image @ 72dpi...scaling it is only going to make it look worse","body":"You&#39;re capturing the image @ 72dpi...scaling it is only going to make it look worse"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423560636,"post_id":28427566,"comment_id":45187749,"body_markdown":"A better solution be to actually use the printer api and print the contents to PDF, maybe even consider using something like Jasper Reports","body":"A better solution be to actually use the printer api and print the contents to PDF, maybe even consider using something like Jasper Reports"},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423563824,"post_id":28427566,"comment_id":45189598,"body_markdown":"How can i capturate the image as 90dp or bigger..?","body":"How can i capturate the image as 90dp or bigger..?"},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1423564226,"post_id":28427566,"comment_id":45189832,"body_markdown":"You could export to a vector rather than png or jpg - that way you get your high resolution whatever the scale.  There&#39;s a method in the accepted answer [here](http://stackoverflow.com/questions/811916/export-jpanel-to-vector-graphics).  Good output options are eps or pdf as suggested by @MadProgrammer.  SVG also good, but not all programs will open them. If you have a reason to have png - I think you might be best to get rid of that class you have found - it will always output the image at screen resolution and as mentioned, simply scaling it up to scale it down won&#39;t help.","body":"You could export to a vector rather than png or jpg - that way you get your high resolution whatever the scale.  There&#39;s a method in the accepted answer <a href=\"http://stackoverflow.com/questions/811916/export-jpanel-to-vector-graphics\">here</a>.  Good output options are eps or pdf as suggested by @MadProgrammer.  SVG also good, but not all programs will open them. If you have a reason to have png - I think you might be best to get rid of that class you have found - it will always output the image at screen resolution and as mentioned, simply scaling it up to scale it down won&#39;t help."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1423564394,"post_id":28427566,"comment_id":45189916,"body_markdown":"I was about to go into details of getting higher resolution png, when googling &quot;jpanel paint resolution&quot; [revealed this answer](http://stackoverflow.com/a/26923692/838992).  As your image is mostly text, you&#39;d be best to used the third option presented in that answer.","body":"I was about to go into details of getting higher resolution png, when googling &quot;jpanel paint resolution&quot; <a href=\"http://stackoverflow.com/a/26923692/838992\">revealed this answer</a>.  As your image is mostly text, you&#39;d be best to used the third option presented in that answer."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1423565450,"post_id":28427566,"comment_id":45190508,"body_markdown":"possible duplicate of [Getting High Resolution Image from JPanel](http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel\">Getting High Resolution Image from JPanel</a>"},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423566289,"post_id":28427566,"comment_id":45190955,"body_markdown":"This isn&#39;t what i need: http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel  .\nThis link works good for images, but i have a lot of JLabels and the text of JLabels is loosing the quality. I need a solution to increase the quality of text. I will try to export to a Vector..","body":"This isn&#39;t what i need: <a href=\"http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel\" title=\"getting high resolution image from jpanel\">stackoverflow.com/questions/26923282/&hellip;</a>  . This link works good for images, but i have a lot of JLabels and the text of JLabels is loosing the quality. I need a solution to increase the quality of text. I will try to export to a Vector.."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1423598713,"post_id":28427566,"comment_id":45211173,"body_markdown":"@Ghita You really need to get away from the components and use the print api and render the output directly with the Graphics API, this is capable of printing at a much higher dpi, but you&#39;ll need a PDF or image printer driver","body":"@Ghita You really need to get away from the components and use the print api and render the output directly with the Graphics API, this is capable of printing at a much higher dpi, but you&#39;ll need a PDF or image printer driver"},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423639646,"post_id":28427566,"comment_id":45225719,"body_markdown":"@MadProgrammer i don&#39;t know how to do that....Could you give me an example? Thank you!","body":"@MadProgrammer i don&#39;t know how to do that....Could you give me an example? Thank you!"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1423654395,"post_id":28427566,"comment_id":45233633,"body_markdown":"What&#39;s the code for the panel look like...really don&#39;t want to try and replicate all myself","body":"What&#39;s the code for the panel look like...really don&#39;t want to try and replicate all myself"},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1423747249,"post_id":28427566,"comment_id":45279592,"body_markdown":"Are you sure the third option on the answer quoted doesn&#39;t work for you?  Here&#39;s an example of it I knocked up [png](https://www.dropbox.com/s/t8wfwoh3y27jigp/Test.png?dl=0) - full code [here](https://www.dropbox.com/s/fvj2lc3d9mhpopy/PanelRenderer.java?dl=0).  You can see the text in the output png can be displayed really quite big with v. little feathering on the edges.  Obviously I still support export as vector as best option and second @MadProgrammer request to link to your panel as is so we don&#39;t have to replicate.","body":"Are you sure the third option on the answer quoted doesn&#39;t work for you?  Here&#39;s an example of it I knocked up <a href=\"https://www.dropbox.com/s/t8wfwoh3y27jigp/Test.png?dl=0\" rel=\"nofollow noreferrer\">png</a> - full code <a href=\"https://www.dropbox.com/s/fvj2lc3d9mhpopy/PanelRenderer.java?dl=0\" rel=\"nofollow noreferrer\">here</a>.  You can see the text in the output png can be displayed really quite big with v. little feathering on the edges.  Obviously I still support export as vector as best option and second @MadProgrammer request to link to your panel as is so we don&#39;t have to replicate."},{"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"score":0,"creation_date":1423747704,"post_id":28427566,"comment_id":45279896,"body_markdown":"@JRichardSnape you&#39;re the best!!!!!!!!!!! The code works very good!! Thank you a lot for this!! You are the best!","body":"@JRichardSnape you&#39;re the best!!!!!!!!!!! The code works very good!! Thank you a lot for this!! You are the best!"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684368020,"creation_date":1423799461,"answer_id":28492187,"question_id":28427566,"body_markdown":"Let&#39;s start with the obvious...\r\n\r\n- A A4 sheet of paper is 21.0cm x 29.7cm.\r\n- At 300dpi, that makes it 2480.315x3507.874 pixels\r\n- At 72dpi, that makes it 595.2756x841.8898 pixels\r\n\r\nWhy&#39;s this important?  Java renders to the screen at 72dpi, but is capable of printing at 300dpi (above and below, but this is nice figure).  This means, roughly, you&#39;d to scale the screen image UP by 4 times.  Up scaling is never pleasant, as demonstrated [here](https://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel/26923692#26923692)\r\n\r\nA better solution would be work with the printer DPI and scale the image down to the screen.\r\n\r\nFor convenience sake, you can use something like...\r\n\r\n\tpublic static final float CM_PER_INCH = 0.393700787f;\r\n\r\n\tpublic static float cmsToPixel(float cms, float dpi) {\r\n\t\treturn cmToInches(cms) * dpi;\r\n\t}\r\n\r\n\tpublic static float cmToInches(float cms) {\r\n\t\treturn cms * CM_PER_INCH;\r\n\t}\r\n\r\nTo convert from cm&#39;s to pixels at a given DPI.\r\n\r\nNow to the fun part.  You &quot;could&quot; use Swing components to render the basic layout, it might be easier, but you&#39;d have to scale the graphics down, as the core printer API assumes a DPI of 72 (don&#39;t ask).  Now scaling down generally results in a better output, but there is another solution.\r\n\r\nInstead, you could use the Graphics 2D API and generate the output yourself...\r\n\r\n\tpublic static class Ticket {\r\n\r\n\t\tpublic enum TextAlignment {\r\n\r\n\t\t\tLEFT,\r\n\t\t\tRIGHT,\r\n\t\t\tCENTRE\r\n\t\t}\r\n\r\n\t\tprotected static final int STUB_NUMBER_Y_POS = 12;\r\n\r\n\t\tprivate Font plainFont;\r\n\t\tprivate Font boldFont;\r\n\r\n\t\tprivate Stroke dashedStroke;\r\n\r\n\t\tpublic void paint(Graphics2D g2d, double pageWidth, double pageHeight, int stubNumber) {\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n\t\t\tg2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n\r\n\t\t\tpaintLeftStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\r\n\t\t\tpaintBody((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\r\n\t\t\tpaintRightStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\r\n\t\t\tpaintEndStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\r\n\r\n\t\t\tg2d = (Graphics2D) g2d.create();\r\n\t\t\tg2d.setColor(Color.GRAY);\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(0, pageHeight - 1, pageWidth, pageHeight - 1));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected void paintLeftStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\r\n\r\n\t\t\tgraphics.setColor(Color.BLACK);\r\n\t\t\tdouble stubWidth = pageWidth / 4;\r\n\r\n\t\t\tGraphics2D g2d = (Graphics2D) graphics.create();\r\n\r\n\t\t\tFont font = getBoldFont().deriveFont(18f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\r\n\t\t\t// Did mention I hate doing inline transformations :P\r\n\t\t\tg2d.rotate(Math.toRadians(-90), stubWidth / 2, pageHeight / 2);\r\n\t\t\tg2d.translate(0, -((stubWidth - pageHeight) / 2));\r\n\r\n\t\t\tString lines[] = {&quot;MORATUFIESTA&quot;, &quot;&quot;, &quot;Sat. 3 Auguest 2015&quot;, &quot;Adult - $3&quot;};\r\n\t\t\tdouble x = 2;\r\n\t\t\tdouble y = 0;\r\n\t\t\tdouble maxWidth = 0;\r\n\t\t\tfor (String text : lines) {\r\n\r\n\t\t\t\tx = calculateHorizontalCenterPositionFor(text, fm, stubWidth);\r\n\t\t\t\tmaxWidth = Math.max(maxWidth, fm.stringWidth(text));\r\n\t\t\t\tg2d.drawString(text, (int) Math.round(x), (int) Math.round(y + fm.getAscent()));\r\n\t\t\t\ty += fm.getHeight();\r\n\r\n\t\t\t}\r\n\t\t\tdouble blockWidth = y;\r\n\r\n\t\t\t// Easier then trying to undo the transformation...\r\n\t\t\tg2d.dispose();\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\r\n\t\t\tString text = &quot;Low&quot;;\r\n\r\n\t\t\tfont = getPlainFont().deriveFont(6f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tfm = g2d.getFontMetrics();\r\n\t\t\tdouble xPos = calculateHorizontalCenterPositionFor(text, fm, blockWidth) + 2;\r\n\t\t\tdouble yPos = (pageHeight - maxWidth) / 2;\r\n\t\t\tg2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos - fm.getAscent()));\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tdrawStubNumber(g2d, stubWidth - 8 - fm.getHeight() - fm.getAscent(), STUB_NUMBER_Y_POS, stubNumber);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected Stroke getDashedStroke() {\r\n\r\n\t\t\tif (dashedStroke == null) {\r\n\r\n\t\t\t\tfloat dash[] = {10.0f};\r\n\t\t\t\tdashedStroke = new BasicStroke(1, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND, 10f, dash, 0.0f);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn dashedStroke;\r\n\r\n\t\t}\r\n\r\n\t\tpublic Font getPlainFont() {\r\n\r\n\t\t\tif (plainFont == null) {\r\n\r\n\t\t\t\tplainFont = UIManager.getFont(&quot;Label.font&quot;);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn plainFont;\r\n\r\n\t\t}\r\n\r\n\t\tpublic Font getBoldFont() {\r\n\r\n\t\t\tif (boldFont == null) {\r\n\r\n\t\t\t\tboldFont = getPlainFont();\r\n\t\t\t\tboldFont = boldFont.deriveFont(Font.BOLD);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn boldFont;\r\n\r\n\t\t}\r\n\r\n\t\tprotected double calculateHorizontalCenterPositionFor(String text, FontMetrics fm, double width) {\r\n\t\t\treturn (width - fm.stringWidth(text)) / 2d;\r\n\t\t}\r\n\r\n\t\tprotected void paintBody(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\r\n\r\n\t\t\tint padding = 8;\r\n\t\t\tdouble xOffset = pageWidth / 4d;\r\n\t\t\t\r\n\t\t\tgraphics.setColor(Color.BLACK);\r\n\r\n\t\t\tdouble bodyWidth = (pageWidth / 2d);\r\n\t\t\tGraphics2D g2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tg2d.setFont(getPlainFont().deriveFont(12f));\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\t\t\tString text = &quot;Moratu Fiesta&quot;;\r\n\t\t\tdouble xPos = bodyWidth - fm.stringWidth(text) - padding;\r\n\t\t\tdouble yPos = padding;\r\n\r\n\t\t\tg2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos + fm.getAscent()));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tFont plainFont = getPlainFont().deriveFont(9.5f);\r\n\t\t\tTextLine[] addressLines01 = new TextLine[]{\r\n\t\t\t\tnew TextLine(&quot;61 Railway Pde North&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;Glen Waverley&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;03 9836 8673&quot;, plainFont)\r\n\t\t\t};\r\n\t\t\tTextLine[] addressLines02 = new TextLine[]{\r\n\t\t\t\tnew TextLine(&quot;1120, Glen Huntly&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;Glen Huntly&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;03 9571 5544&quot;, plainFont)\r\n\t\t\t};\r\n\t\t\tTextLine[] sponsorLines = new TextLine[]{\r\n\t\t\t\tnew TextLine(&quot;Proudly supported by&quot;, plainFont),\r\n\t\t\t\tnew TextLine(&quot;Quality Groceries&quot;, plainFont.deriveFont(Font.BOLD)),\r\n\t\t\t\tnew TextLine(&quot;Visit for all your grocery needs&quot;, plainFont)\r\n\t\t\t};\r\n\r\n\t\t\tArea area = new Area();\r\n\t\t\taddTo(g2d, area, addressLines01);\r\n\t\t\taddTo(g2d, area, addressLines02);\r\n\t\t\taddTo(g2d, area, sponsorLines);\r\n\t\t\tint height = area.getBounds().height;\r\n\t\t\tdouble bottomBlockYPos = pageHeight - height - padding;\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tdrawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, addressLines01);\r\n\t\t\tdrawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, sponsorLines);\r\n\t\t\tdrawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, addressLines02);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tplainFont = getPlainFont().deriveFont(10f);\r\n\t\t\tTextLine[] textLines = new TextLine[]{\r\n\t\t\t\tnew TextLine(&quot;On Saturday, August 3, 2013 from 6.30pm till midnight&quot;, plainFont.deriveFont(Font.BOLD)),\r\n\t\t\t\tnew TextLine(&quot;At 21, Sacred Heart Parish Hall, Johnson Street, Oakleigh&quot;, plainFont)\r\n\t\t\t};\r\n\t\t\tint blockHeight = getSizeFor(g2d, textLines).height;\r\n\t\t\tdouble mainBlockYPos = (pageHeight - blockHeight) / 2;\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tdrawTextLines(g2d, 0, mainBlockYPos, bodyWidth, TextAlignment.CENTRE, textLines);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tFont boldFont = getBoldFont().deriveFont(9f);\r\n\t\t\tdouble upperYPos = (mainBlockYPos + blockHeight);\r\n\t\t\tdouble middleBlockYPos = upperYPos + ((bottomBlockYPos - upperYPos) / 2) - (g2d.getFontMetrics(boldFont).getHeight() / 2);\r\n\t\t\tdrawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, new TextLine(&quot;Melway Ref, 69 FB&quot;, boldFont));\r\n\t\t\tdrawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, new TextLine(&quot;Music by REDEMPTION&quot;, boldFont));\r\n\t\t\tdrawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, new TextLine(&quot;Donations $30&quot;, boldFont));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(bodyWidth, 0, bodyWidth, pageHeight));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tdrawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected void drawStubNumber(Graphics2D g2d, double x, double y, int stubNumber) {\r\n\r\n\t\t\tFont font = getBoldFont().deriveFont(18f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\r\n\t\t\tString text = Integer.toString(stubNumber);\r\n\r\n\t\t\tg2d.translate(x, y);\r\n\t\t\tg2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\r\n\r\n\t\t\tg2d.drawString(text, 0, fm.getAscent());\r\n\t\t\tg2d.dispose();\r\n\t\t}\r\n\r\n\t\tprotected void paintRightStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\r\n\r\n\t\t\tgraphics.setColor(Color.BLACK);\r\n\t\t\t\r\n\t\t\tint padding = 8;\r\n\t\t\tdouble xOffset = (pageWidth / 4d) * 3;\r\n\t\t\tdouble stubWidth = (pageWidth / 4d) / 2;\r\n\r\n\t\t\tGraphics2D g2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tdrawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tString text = &quot;Cafe Little Hut&quot;;\r\n\t\t\tFont font = getPlainFont().deriveFont(23f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\r\n\t\t\tdouble x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2d);\r\n\t\t\tdouble y = ((pageHeight - fm.getHeight()) / 2d);\r\n\r\n\t\t\tg2d.translate(x, y);\r\n\t\t\tg2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\r\n\r\n\t\t\tg2d.drawString(text, 0, fm.getAscent());\r\n\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected void paintEndStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\r\n\r\n\t\t\tgraphics.setColor(Color.BLACK);\r\n\t\t\t\r\n\t\t\tint padding = 8;\r\n\t\t\tdouble stubWidth = (pageWidth / 4d) / 2;\r\n\t\t\tdouble xOffset = ((pageWidth / 4d) * 3 + stubWidth);\r\n\r\n\t\t\tGraphics2D g2d = (Graphics2D) graphics.create();\r\n\t\t\tg2d.translate(xOffset, 0);\r\n\t\t\tg2d.setStroke(getDashedStroke());\r\n\t\t\tg2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tdrawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tg2d = (Graphics2D) graphics.create();\r\n\t\t\tString text = &quot;Entrance&quot;;\r\n\t\t\tFont font = getBoldFont().deriveFont(32f);\r\n\t\t\tg2d.setFont(font);\r\n\t\t\tFontMetrics fm = g2d.getFontMetrics();\r\n\r\n\t\t\tdouble x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2);\r\n\t\t\tdouble y = ((pageHeight - fm.getHeight()) / 2);\r\n\r\n\t\t\tg2d.translate(x, y);\r\n\t\t\tg2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\r\n\r\n\t\t\tg2d.drawString(text, 0, fm.getAscent());\r\n\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tprotected Dimension drawTextLines(Graphics2D g2d, double xPos, double yPos, double width, TextAlignment textAlignment, TextLine... textLines) {\r\n\r\n\t\t\tArea area = new Area();\r\n\r\n\t\t\tfor (TextLine textLine : textLines) {\r\n\t\t\t\tg2d.translate(xPos, yPos);\r\n\t\t\t\tDimension size = textLine.getBounds(g2d);\r\n\t\t\t\ttextLine.paint(g2d, width, textAlignment);\r\n\t\t\t\tarea.add(new Area(new Rectangle2D.Double(xPos, yPos, size.width, size.height)));\r\n\t\t\t\tg2d.translate(-xPos, -yPos);\r\n\t\t\t\tyPos += size.height;\r\n\t\t\t}\r\n\r\n\t\t\treturn area.getBounds().getSize();\r\n\r\n\t\t}\r\n\r\n\t\tprotected void addTo(Graphics2D g2d, Area area, TextLine... textLines) {\r\n\r\n\t\t\tarea.add(new Area(new Rectangle(getSizeFor(g2d, textLines))));\r\n\r\n\t\t}\r\n\r\n\t\tprotected Dimension getSizeFor(Graphics2D g2d, TextLine... textLines) {\r\n\r\n\t\t\tint yPos = 0;\r\n\t\t\tint width = 0;\r\n\t\t\tfor (TextLine textLine : textLines) {\r\n\t\t\t\tDimension size = textLine.getBounds(g2d);\r\n\t\t\t\tyPos += size.height;\r\n\t\t\t\twidth = Math.max(size.width, width);\r\n\t\t\t}\r\n\r\n\t\t\treturn new Dimension(width, yPos);\r\n\r\n\t\t}\r\n\r\n\t\tprotected class TextLine {\r\n\r\n\t\t\tprivate String text;\r\n\t\t\tprivate Font font;\r\n\r\n\t\t\tpublic TextLine(String text, Font font) {\r\n\t\t\t\tthis.text = text;\r\n\t\t\t\tthis.font = font;\r\n\t\t\t}\r\n\r\n\t\t\tpublic String getText() {\r\n\t\t\t\treturn text;\r\n\t\t\t}\r\n\r\n\t\t\tpublic Font getFont() {\r\n\t\t\t\treturn font;\r\n\t\t\t}\r\n\r\n\t\t\tpublic Dimension getBounds(Graphics2D g2d) {\r\n\t\t\t\tFontMetrics fm = g2d.getFontMetrics(getFont());\r\n\t\t\t\treturn new Dimension(fm.stringWidth(text), fm.getHeight());\r\n\t\t\t}\r\n\r\n\t\t\tpublic void paint(Graphics2D g2d, double width, TextAlignment textAlignment) {\r\n\t\t\t\tDimension bounds = getBounds(g2d);\r\n\t\t\t\tFontMetrics fm = g2d.getFontMetrics(getFont());\r\n\t\t\t\tg2d.setFont(font);\r\n\t\t\t\tdouble x = 0;\r\n\t\t\t\tswitch (textAlignment) {\r\n\t\t\t\t\tcase CENTRE:\r\n\t\t\t\t\t\tx = (width - bounds.width) / 2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase RIGHT:\r\n\t\t\t\t\t\tx = width - bounds.width;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tg2d.drawString(getText(), (int) Math.round(x), fm.getAscent());\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\nWhy would you do that?  It&#39;s easier to wrap a `Printable` around and print to a printer and you can also &quot;paint&quot; to a component (or image)\r\n\r\nFor example...\r\n\r\n\tpublic class TicketPrintable implements Printable {\r\n\r\n\t\tprivate Ticket ticket;\r\n\r\n\t\tpublic TicketPrintable(Ticket ticket) {\r\n\t\t\tthis.ticket = ticket;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\r\n\t\t\tint result = NO_SUCH_PAGE;\r\n\t\t\tif (pageIndex == 0) {\r\n\t\t\t\tGraphics2D g2d = (Graphics2D) graphics;\r\n\t\t\t\tdouble width = pageFormat.getImageableWidth();\r\n\t\t\t\tdouble height = pageFormat.getImageableHeight();\r\n\r\n\t\t\t\tg2d.translate((int) pageFormat.getImageableX(),\r\n\t\t\t\t\t\t\t\t(int) pageFormat.getImageableY());\r\n\t\t\t\t\r\n\t\t\t\tdouble ticketHeight = height / 4d;\r\n\t\t\t\tfor (int index = 0; index &lt; 4; index++) {\r\n\t\t\t\t\r\n\t\t\t\t\tticket.paint(g2d, width, ticketHeight, index + 1);\r\n\t\t\t\t\tg2d.translate(0, ticketHeight);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult = PAGE_EXISTS;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t}\r\n\r\nAnd to print it, you would use something like...\r\n\r\n\tPrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\r\n\taset.add(MediaSizeName.ISO_A4);\r\n\taset.add(new PrinterResolution(300, 300, PrinterResolution.DPI));\r\n\taset.add(new MediaPrintableArea(0, 0, 210, 297, MediaPrintableArea.MM));\r\n\r\n\tPrinterJob pj = PrinterJob.getPrinterJob();\r\n\tpj.setPrintable(new TicketPrintable(new Ticket()));\r\n\r\n\tif (pj.printDialog(aset)) {\r\n\t\ttry {\r\n\t\t\tpj.print(aset);\r\n\t\t} catch (PrinterException ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nOn the screen it looks like...\r\n\r\n![Screen][1]\r\n\r\nOn paper it looks like (scaled down for SO)\r\n\r\n![Printed][2]\r\n\r\nNow having said that, I would strongly encourage you to learn JasperReports, which makes this all so much simpler...\r\n\r\n**Updated**\r\n\r\nSo, I was sitting in traffic and thought to myself, I wonder if I can just use scaling to render the `Ticket` to an image, so I thought I&#39;d give it a try...\r\n\r\nThe top image is 72dpi, the bottom image is scaled to 300dpi\r\n\r\n![ScaleComparison][3]\r\n\r\n\tdouble pageWidth = cmsToPixel(21.0f, 300f);\r\n\tdouble pageHeight = cmsToPixel(29.7f, 300f);\r\n\tdouble imageWidth = cmsToPixel(21.0f, 72f);\r\n\tdouble imageHeight = cmsToPixel(29.7f, 72f);\r\n\r\n\tdouble scaleFactor = ImageUtilities.getScaleFactorToFit(\r\n\t\t\tnew Dimension((int) Math.round(imageWidth), (int) Math.round(imageHeight)),\r\n\t\t\tnew Dimension((int) Math.round(pageWidth), (int) Math.round(pageHeight)));\r\n\r\n\tint width = (int) Math.round(pageWidth);\r\n\tint height = (int) Math.round(pageHeight);\r\n\r\n\tBufferedImage img = new BufferedImage(\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tBufferedImage.TYPE_INT_ARGB);\r\n\tGraphics2D g2d = img.createGraphics();\r\n\tg2d.setColor(Color.WHITE);\r\n\tg2d.fill(new Rectangle2D.Double(0, 0, img.getWidth(), img.getHeight()));\r\n\tg2d.scale(scaleFactor, scaleFactor);\r\n\r\n\tTicket ticket = new Ticket();\r\n\tticket.paint(g2d, img.getWidth() / scaleFactor, (img.getHeight() / scaleFactor) / 4, 1);\r\n\tg2d.dispose();\r\n\r\n\ttry {\r\n\t\tImageIO.write(img, &quot;png&quot;, new File(&quot;Ticket.png&quot;));\r\n\t} catch (IOException ex) {\r\n\t\tex.printStackTrace();\r\n\t}\r\n\r\nScale factor algorithms\r\n\r\n\tpublic static double getScaleFactorToFit(Dimension original, Dimension toFit) {\r\n\r\n\t\tdouble dScale = 1d;\r\n\r\n\t\tif (original != null &amp;&amp; toFit != null) {\r\n\r\n\t\t\tdouble dScaleWidth = getScaleFactor(original.width, toFit.width);\r\n\t\t\tdouble dScaleHeight = getScaleFactor(original.height, toFit.height);\r\n\r\n\t\t\tdScale = Math.min(dScaleHeight, dScaleWidth);\r\n\r\n\t\t}\r\n\r\n\t\treturn dScale;\r\n\r\n\t}\r\n\r\n\r\n\tpublic static double getScaleFactor(int iMasterSize, int iTargetSize) {\r\n\r\n\t\tdouble dScale = 1;\r\n\t\tif (iMasterSize &gt; iTargetSize) {\r\n\r\n\t\t\tdScale = (double) iTargetSize / (double) iMasterSize;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdScale = (double) iTargetSize / (double) iMasterSize;\r\n\r\n\t\t}\r\n\r\n\t\treturn dScale;\r\n\r\n\t}\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Nx6k7.png\r\n  [2]: http://i.stack.imgur.com/4o5EF.png\r\n  [3]: http://i.stack.imgur.com/o2ANT.png\r\n\r\n**Note:** This is only really going to work for text and primitive graphics, you put an image into this and it won&#39;t work, the image will be scaled up and look crappy, as demonstrated in the linked answer from before.  In that case, you&#39;d have to design the form to render at 300+dpi and scale the image down to 72dpi","title":"Save JPanel as Image HD Quality","body":"<p>Let's start with the obvious...</p>\n<ul>\n<li>A A4 sheet of paper is 21.0cm x 29.7cm.</li>\n<li>At 300dpi, that makes it 2480.315x3507.874 pixels</li>\n<li>At 72dpi, that makes it 595.2756x841.8898 pixels</li>\n</ul>\n<p>Why's this important?  Java renders to the screen at 72dpi, but is capable of printing at 300dpi (above and below, but this is nice figure).  This means, roughly, you'd to scale the screen image UP by 4 times.  Up scaling is never pleasant, as demonstrated <a href=\"https://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel/26923692#26923692\">here</a></p>\n<p>A better solution would be work with the printer DPI and scale the image down to the screen.</p>\n<p>For convenience sake, you can use something like...</p>\n<pre><code>public static final float CM_PER_INCH = 0.393700787f;\n\npublic static float cmsToPixel(float cms, float dpi) {\n    return cmToInches(cms) * dpi;\n}\n\npublic static float cmToInches(float cms) {\n    return cms * CM_PER_INCH;\n}\n</code></pre>\n<p>To convert from cm's to pixels at a given DPI.</p>\n<p>Now to the fun part.  You &quot;could&quot; use Swing components to render the basic layout, it might be easier, but you'd have to scale the graphics down, as the core printer API assumes a DPI of 72 (don't ask).  Now scaling down generally results in a better output, but there is another solution.</p>\n<p>Instead, you could use the Graphics 2D API and generate the output yourself...</p>\n<pre><code>public static class Ticket {\n\n    public enum TextAlignment {\n\n        LEFT,\n        RIGHT,\n        CENTRE\n    }\n\n    protected static final int STUB_NUMBER_Y_POS = 12;\n\n    private Font plainFont;\n    private Font boldFont;\n\n    private Stroke dashedStroke;\n\n    public void paint(Graphics2D g2d, double pageWidth, double pageHeight, int stubNumber) {\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n\n        paintLeftStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintBody((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintRightStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintEndStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n\n        g2d = (Graphics2D) g2d.create();\n        g2d.setColor(Color.GRAY);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(0, pageHeight - 1, pageWidth, pageHeight - 1));\n        g2d.dispose();\n\n    }\n\n    protected void paintLeftStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        double stubWidth = pageWidth / 4;\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n\n        Font font = getBoldFont().deriveFont(18f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        // Did mention I hate doing inline transformations :P\n        g2d.rotate(Math.toRadians(-90), stubWidth / 2, pageHeight / 2);\n        g2d.translate(0, -((stubWidth - pageHeight) / 2));\n\n        String lines[] = {&quot;MORATUFIESTA&quot;, &quot;&quot;, &quot;Sat. 3 Auguest 2015&quot;, &quot;Adult - $3&quot;};\n        double x = 2;\n        double y = 0;\n        double maxWidth = 0;\n        for (String text : lines) {\n\n            x = calculateHorizontalCenterPositionFor(text, fm, stubWidth);\n            maxWidth = Math.max(maxWidth, fm.stringWidth(text));\n            g2d.drawString(text, (int) Math.round(x), (int) Math.round(y + fm.getAscent()));\n            y += fm.getHeight();\n\n        }\n        double blockWidth = y;\n\n        // Easier then trying to undo the transformation...\n        g2d.dispose();\n        g2d = (Graphics2D) graphics.create();\n\n        String text = &quot;Low&quot;;\n\n        font = getPlainFont().deriveFont(6f);\n        g2d.setFont(font);\n        fm = g2d.getFontMetrics();\n        double xPos = calculateHorizontalCenterPositionFor(text, fm, blockWidth) + 2;\n        double yPos = (pageHeight - maxWidth) / 2;\n        g2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos - fm.getAscent()));\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, stubWidth - 8 - fm.getHeight() - fm.getAscent(), STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n    }\n\n    protected Stroke getDashedStroke() {\n\n        if (dashedStroke == null) {\n\n            float dash[] = {10.0f};\n            dashedStroke = new BasicStroke(1, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND, 10f, dash, 0.0f);\n\n        }\n\n        return dashedStroke;\n\n    }\n\n    public Font getPlainFont() {\n\n        if (plainFont == null) {\n\n            plainFont = UIManager.getFont(&quot;Label.font&quot;);\n\n        }\n\n        return plainFont;\n\n    }\n\n    public Font getBoldFont() {\n\n        if (boldFont == null) {\n\n            boldFont = getPlainFont();\n            boldFont = boldFont.deriveFont(Font.BOLD);\n\n        }\n\n        return boldFont;\n\n    }\n\n    protected double calculateHorizontalCenterPositionFor(String text, FontMetrics fm, double width) {\n        return (width - fm.stringWidth(text)) / 2d;\n    }\n\n    protected void paintBody(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        int padding = 8;\n        double xOffset = pageWidth / 4d;\n        \n        graphics.setColor(Color.BLACK);\n\n        double bodyWidth = (pageWidth / 2d);\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setFont(getPlainFont().deriveFont(12f));\n        FontMetrics fm = g2d.getFontMetrics();\n        String text = &quot;Moratu Fiesta&quot;;\n        double xPos = bodyWidth - fm.stringWidth(text) - padding;\n        double yPos = padding;\n\n        g2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos + fm.getAscent()));\n        g2d.dispose();\n\n        Font plainFont = getPlainFont().deriveFont(9.5f);\n        TextLine[] addressLines01 = new TextLine[]{\n            new TextLine(&quot;61 Railway Pde North&quot;, plainFont),\n            new TextLine(&quot;Glen Waverley&quot;, plainFont),\n            new TextLine(&quot;03 9836 8673&quot;, plainFont)\n        };\n        TextLine[] addressLines02 = new TextLine[]{\n            new TextLine(&quot;1120, Glen Huntly&quot;, plainFont),\n            new TextLine(&quot;Glen Huntly&quot;, plainFont),\n            new TextLine(&quot;03 9571 5544&quot;, plainFont)\n        };\n        TextLine[] sponsorLines = new TextLine[]{\n            new TextLine(&quot;Proudly supported by&quot;, plainFont),\n            new TextLine(&quot;Quality Groceries&quot;, plainFont.deriveFont(Font.BOLD)),\n            new TextLine(&quot;Visit for all your grocery needs&quot;, plainFont)\n        };\n\n        Area area = new Area();\n        addTo(g2d, area, addressLines01);\n        addTo(g2d, area, addressLines02);\n        addTo(g2d, area, sponsorLines);\n        int height = area.getBounds().height;\n        double bottomBlockYPos = pageHeight - height - padding;\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, addressLines01);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, sponsorLines);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, addressLines02);\n        g2d.dispose();\n\n        plainFont = getPlainFont().deriveFont(10f);\n        TextLine[] textLines = new TextLine[]{\n            new TextLine(&quot;On Saturday, August 3, 2013 from 6.30pm till midnight&quot;, plainFont.deriveFont(Font.BOLD)),\n            new TextLine(&quot;At 21, Sacred Heart Parish Hall, Johnson Street, Oakleigh&quot;, plainFont)\n        };\n        int blockHeight = getSizeFor(g2d, textLines).height;\n        double mainBlockYPos = (pageHeight - blockHeight) / 2;\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        drawTextLines(g2d, 0, mainBlockYPos, bodyWidth, TextAlignment.CENTRE, textLines);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        Font boldFont = getBoldFont().deriveFont(9f);\n        double upperYPos = (mainBlockYPos + blockHeight);\n        double middleBlockYPos = upperYPos + ((bottomBlockYPos - upperYPos) / 2) - (g2d.getFontMetrics(boldFont).getHeight() / 2);\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, new TextLine(&quot;Melway Ref, 69 FB&quot;, boldFont));\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, new TextLine(&quot;Music by REDEMPTION&quot;, boldFont));\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, new TextLine(&quot;Donations $30&quot;, boldFont));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(bodyWidth, 0, bodyWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n    }\n\n    protected void drawStubNumber(Graphics2D g2d, double x, double y, int stubNumber) {\n\n        Font font = getBoldFont().deriveFont(18f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        String text = Integer.toString(stubNumber);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n        g2d.dispose();\n    }\n\n    protected void paintRightStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        \n        int padding = 8;\n        double xOffset = (pageWidth / 4d) * 3;\n        double stubWidth = (pageWidth / 4d) / 2;\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        String text = &quot;Cafe Little Hut&quot;;\n        Font font = getPlainFont().deriveFont(23f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        double x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2d);\n        double y = ((pageHeight - fm.getHeight()) / 2d);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n\n        g2d.dispose();\n\n    }\n\n    protected void paintEndStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        \n        int padding = 8;\n        double stubWidth = (pageWidth / 4d) / 2;\n        double xOffset = ((pageWidth / 4d) * 3 + stubWidth);\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        String text = &quot;Entrance&quot;;\n        Font font = getBoldFont().deriveFont(32f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        double x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2);\n        double y = ((pageHeight - fm.getHeight()) / 2);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n\n        g2d.dispose();\n\n    }\n\n    protected Dimension drawTextLines(Graphics2D g2d, double xPos, double yPos, double width, TextAlignment textAlignment, TextLine... textLines) {\n\n        Area area = new Area();\n\n        for (TextLine textLine : textLines) {\n            g2d.translate(xPos, yPos);\n            Dimension size = textLine.getBounds(g2d);\n            textLine.paint(g2d, width, textAlignment);\n            area.add(new Area(new Rectangle2D.Double(xPos, yPos, size.width, size.height)));\n            g2d.translate(-xPos, -yPos);\n            yPos += size.height;\n        }\n\n        return area.getBounds().getSize();\n\n    }\n\n    protected void addTo(Graphics2D g2d, Area area, TextLine... textLines) {\n\n        area.add(new Area(new Rectangle(getSizeFor(g2d, textLines))));\n\n    }\n\n    protected Dimension getSizeFor(Graphics2D g2d, TextLine... textLines) {\n\n        int yPos = 0;\n        int width = 0;\n        for (TextLine textLine : textLines) {\n            Dimension size = textLine.getBounds(g2d);\n            yPos += size.height;\n            width = Math.max(size.width, width);\n        }\n\n        return new Dimension(width, yPos);\n\n    }\n\n    protected class TextLine {\n\n        private String text;\n        private Font font;\n\n        public TextLine(String text, Font font) {\n            this.text = text;\n            this.font = font;\n        }\n\n        public String getText() {\n            return text;\n        }\n\n        public Font getFont() {\n            return font;\n        }\n\n        public Dimension getBounds(Graphics2D g2d) {\n            FontMetrics fm = g2d.getFontMetrics(getFont());\n            return new Dimension(fm.stringWidth(text), fm.getHeight());\n        }\n\n        public void paint(Graphics2D g2d, double width, TextAlignment textAlignment) {\n            Dimension bounds = getBounds(g2d);\n            FontMetrics fm = g2d.getFontMetrics(getFont());\n            g2d.setFont(font);\n            double x = 0;\n            switch (textAlignment) {\n                case CENTRE:\n                    x = (width - bounds.width) / 2;\n                    break;\n                case RIGHT:\n                    x = width - bounds.width;\n                    break;\n            }\n            g2d.drawString(getText(), (int) Math.round(x), fm.getAscent());\n        }\n\n    }\n\n}\n</code></pre>\n<p>Why would you do that?  It's easier to wrap a <code>Printable</code> around and print to a printer and you can also &quot;paint&quot; to a component (or image)</p>\n<p>For example...</p>\n<pre><code>public class TicketPrintable implements Printable {\n\n    private Ticket ticket;\n\n    public TicketPrintable(Ticket ticket) {\n        this.ticket = ticket;\n    }\n\n    @Override\n    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\n        int result = NO_SUCH_PAGE;\n        if (pageIndex == 0) {\n            Graphics2D g2d = (Graphics2D) graphics;\n            double width = pageFormat.getImageableWidth();\n            double height = pageFormat.getImageableHeight();\n\n            g2d.translate((int) pageFormat.getImageableX(),\n                            (int) pageFormat.getImageableY());\n            \n            double ticketHeight = height / 4d;\n            for (int index = 0; index &lt; 4; index++) {\n            \n                ticket.paint(g2d, width, ticketHeight, index + 1);\n                g2d.translate(0, ticketHeight);\n                \n            }\n\n            result = PAGE_EXISTS;\n        }\n        return result;\n    }\n\n}\n</code></pre>\n<p>And to print it, you would use something like...</p>\n<pre><code>PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\naset.add(MediaSizeName.ISO_A4);\naset.add(new PrinterResolution(300, 300, PrinterResolution.DPI));\naset.add(new MediaPrintableArea(0, 0, 210, 297, MediaPrintableArea.MM));\n\nPrinterJob pj = PrinterJob.getPrinterJob();\npj.setPrintable(new TicketPrintable(new Ticket()));\n\nif (pj.printDialog(aset)) {\n    try {\n        pj.print(aset);\n    } catch (PrinterException ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n<p>On the screen it looks like...</p>\n<p><img src=\"https://i.stack.imgur.com/Nx6k7.png\" alt=\"Screen\" /></p>\n<p>On paper it looks like (scaled down for SO)</p>\n<p><img src=\"https://i.stack.imgur.com/4o5EF.png\" alt=\"Printed\" /></p>\n<p>Now having said that, I would strongly encourage you to learn JasperReports, which makes this all so much simpler...</p>\n<p><strong>Updated</strong></p>\n<p>So, I was sitting in traffic and thought to myself, I wonder if I can just use scaling to render the <code>Ticket</code> to an image, so I thought I'd give it a try...</p>\n<p>The top image is 72dpi, the bottom image is scaled to 300dpi</p>\n<p><img src=\"https://i.stack.imgur.com/o2ANT.png\" alt=\"ScaleComparison\" /></p>\n<pre><code>double pageWidth = cmsToPixel(21.0f, 300f);\ndouble pageHeight = cmsToPixel(29.7f, 300f);\ndouble imageWidth = cmsToPixel(21.0f, 72f);\ndouble imageHeight = cmsToPixel(29.7f, 72f);\n\ndouble scaleFactor = ImageUtilities.getScaleFactorToFit(\n        new Dimension((int) Math.round(imageWidth), (int) Math.round(imageHeight)),\n        new Dimension((int) Math.round(pageWidth), (int) Math.round(pageHeight)));\n\nint width = (int) Math.round(pageWidth);\nint height = (int) Math.round(pageHeight);\n\nBufferedImage img = new BufferedImage(\n        width,\n        height,\n        BufferedImage.TYPE_INT_ARGB);\nGraphics2D g2d = img.createGraphics();\ng2d.setColor(Color.WHITE);\ng2d.fill(new Rectangle2D.Double(0, 0, img.getWidth(), img.getHeight()));\ng2d.scale(scaleFactor, scaleFactor);\n\nTicket ticket = new Ticket();\nticket.paint(g2d, img.getWidth() / scaleFactor, (img.getHeight() / scaleFactor) / 4, 1);\ng2d.dispose();\n\ntry {\n    ImageIO.write(img, &quot;png&quot;, new File(&quot;Ticket.png&quot;));\n} catch (IOException ex) {\n    ex.printStackTrace();\n}\n</code></pre>\n<p>Scale factor algorithms</p>\n<pre><code>public static double getScaleFactorToFit(Dimension original, Dimension toFit) {\n\n    double dScale = 1d;\n\n    if (original != null &amp;&amp; toFit != null) {\n\n        double dScaleWidth = getScaleFactor(original.width, toFit.width);\n        double dScaleHeight = getScaleFactor(original.height, toFit.height);\n\n        dScale = Math.min(dScaleHeight, dScaleWidth);\n\n    }\n\n    return dScale;\n\n}\n\n\npublic static double getScaleFactor(int iMasterSize, int iTargetSize) {\n\n    double dScale = 1;\n    if (iMasterSize &gt; iTargetSize) {\n\n        dScale = (double) iTargetSize / (double) iMasterSize;\n\n    } else {\n\n        dScale = (double) iTargetSize / (double) iMasterSize;\n\n    }\n\n    return dScale;\n\n}\n</code></pre>\n<p><strong>Note:</strong> This is only really going to work for text and primitive graphics, you put an image into this and it won't work, the image will be scaled up and look crappy, as demonstrated in the linked answer from before.  In that case, you'd have to design the form to render at 300+dpi and scale the image down to 72dpi</p>\n"}],"owner":{"account_id":5053347,"reputation":23,"user_id":4057253,"accept_rate":0,"display_name":"Ghita"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1379,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684368020,"creation_date":1423558733,"question_id":28427566,"body_markdown":"I am trying to save a JPanel as Image (Png, Jpg, whatever) but with Graphics2D the Quality is very low. My JPanel contains mostly text and  I want to print the panel 4 times on a A4 paper size, so that it fills the page.\r\nBut the text is like washed-out when i print the image. I tried to create an A3 image then print it to the smaller A4 size. The quality increases very little, almost insignificantly.\r\n\r\nHere is the function i use to generate the image, based on this ScreenImage.Class i found [here][1] :\r\n\r\n    public void exportToPNG(JRootPane panel){\r\n\t\tDimension size = panel.getSize();\r\n\t\tBufferedImage image = new BufferedImage(\r\n\t\t\t\tsize.width, size.height * 4 /* use the same image 4 times */\r\n\t\t\t\t, BufferedImage.TYPE_INT_RGB);\r\n\t\tGraphics2D g2 = image.createGraphics();\r\n\t\t\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n\t\tg2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n\r\n\t\tg2.drawImage(ScreenImage.createImage(panel), 0, 0, size.width, size.height, null);\r\n\t\tg2.drawImage(ScreenImage.createImage(panel), 0, size.height, size.width, size.height, null);\r\n        g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 2, size.width, size.height, null);\r\n        g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 3, size.width, size.height, null);\r\n\r\n        \r\n        try{\r\n            ImageIO.write(image, &quot;png&quot;, new File(&quot;D:\\\\test-image.png&quot;));\r\n        \r\n        }\r\n        catch(Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n\t}\r\n\r\n\r\nHere is a sample image i generated:\r\n[click the link..][2]\r\n\r\nYou should see that washed-out effect on the image even when zooming-in a little.\r\n\r\nIs there a way to increase the quality? or a dedicated library?\r\n\r\n\r\n  [1]: https://tips4java.wordpress.com/2008/10/13/screen-image/\r\n  [2]: https://i.stack.imgur.com/MshWC.png","title":"Save JPanel as Image HD Quality","body":"<p>I am trying to save a JPanel as Image (Png, Jpg, whatever) but with Graphics2D the Quality is very low. My JPanel contains mostly text and  I want to print the panel 4 times on a A4 paper size, so that it fills the page.\nBut the text is like washed-out when i print the image. I tried to create an A3 image then print it to the smaller A4 size. The quality increases very little, almost insignificantly.</p>\n\n<p>Here is the function i use to generate the image, based on this ScreenImage.Class i found <a href=\"https://tips4java.wordpress.com/2008/10/13/screen-image/\" rel=\"nofollow\">here</a> :</p>\n\n<pre><code>public void exportToPNG(JRootPane panel){\n    Dimension size = panel.getSize();\n    BufferedImage image = new BufferedImage(\n            size.width, size.height * 4 /* use the same image 4 times */\n            , BufferedImage.TYPE_INT_RGB);\n    Graphics2D g2 = image.createGraphics();\n\n    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n    g2.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n    g2.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n\n    g2.drawImage(ScreenImage.createImage(panel), 0, 0, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 2, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 3, size.width, size.height, null);\n\n\n    try{\n        ImageIO.write(image, \"png\", new File(\"D:\\\\test-image.png\"));\n\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Here is a sample image i generated:\n<a href=\"https://i.stack.imgur.com/MshWC.png\" rel=\"nofollow\">click the link..</a></p>\n\n<p>You should see that washed-out effect on the image even when zooming-in a little.</p>\n\n<p>Is there a way to increase the quality? or a dedicated library?</p>\n"},{"tags":["java","lambda","mockito"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1684372243,"post_id":76276845,"comment_id":134510343,"body_markdown":"Does this answer your question? [Mockito verify that a specific lambda has been passed as an argument in mock&#39;s method](https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m\">Mockito verify that a specific lambda has been passed as an argument in mock&#39;s method</a>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1684391106,"post_id":76276845,"comment_id":134511928,"body_markdown":"What do you mean by &quot;I can&#39;t perform any verify() on the headers() function.&quot; I don&#39;t see any verify in your question, and you haven&#39;t explained what happens when you call it.","body":"What do you mean by &quot;I can&#39;t perform any verify() on the headers() function.&quot; I don&#39;t see any verify in your question, and you haven&#39;t explained what happens when you call it."},{"owner":{"account_id":28623835,"reputation":1,"user_id":21916281,"display_name":"Milton Ortegon"},"score":0,"creation_date":1684714428,"post_id":76276845,"comment_id":134552715,"body_markdown":"Thank you Gast&#243;n. You are right, that answered my question.","body":"Thank you Gast&#243;n. You are right, that answered my question."},{"owner":{"account_id":28623835,"reputation":1,"user_id":21916281,"display_name":"Milton Ortegon"},"score":0,"creation_date":1684714511,"post_id":76276845,"comment_id":134552723,"body_markdown":"This answers my question [https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m](https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m)","body":"This answers my question <a href=\"https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m\">https://stackoverflow.com/questions/41462913/mockito-verify-&zwnj;&#8203;that-a-specific-lamb&zwnj;&#8203;da-has-been-passed-a&zwnj;&#8203;s-an-argument-in-moc&zwnj;&#8203;ks-m</a>"}],"owner":{"account_id":28623835,"reputation":1,"user_id":21916281,"display_name":"Milton Ortegon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684367201,"creation_date":1684366682,"question_id":76276845,"body_markdown":"I am creating a Spring WebClient and adding some personalized headers to the builder:\r\n```\r\n@Component\r\npublic class ApiClient {\r\n\r\n    private final WebClient client;\r\n    \r\n    public Mono&lt;Optional&lt;String&gt;&gt; getApiInfo(final String header) {\r\n        return client\r\n                .get()\r\n                .uri(URI)\r\n                .headers(requestHeaders -&gt; {\r\n                    requestHeaders.add(&quot;Header_name&quot;, &quot;Header_Value&quot;);\r\n                    if (StringUtils.isNotBlank(forwardedHost)) {\r\n                        requestHeaders.add(&quot;Second_header&quot;, header);\r\n                    }\r\n                })\r\n                .retrieve()\r\n                .\r\n\t\t\t\t.\r\n\t\t\t\t.\r\n\t}\r\n}\r\n```\r\nHow can I validate that headers were added by just using Mockito?\r\n\r\nI mocked every builder step, but I can&#39;t perform any verify() on the headers() function.","title":"Using Mockito, how can I perform verify on the parameters I send to a lambda expression?","body":"<p>I am creating a Spring WebClient and adding some personalized headers to the builder:</p>\n<pre><code>@Component\npublic class ApiClient {\n\n    private final WebClient client;\n    \n    public Mono&lt;Optional&lt;String&gt;&gt; getApiInfo(final String header) {\n        return client\n                .get()\n                .uri(URI)\n                .headers(requestHeaders -&gt; {\n                    requestHeaders.add(&quot;Header_name&quot;, &quot;Header_Value&quot;);\n                    if (StringUtils.isNotBlank(forwardedHost)) {\n                        requestHeaders.add(&quot;Second_header&quot;, header);\n                    }\n                })\n                .retrieve()\n                .\n                .\n                .\n    }\n}\n</code></pre>\n<p>How can I validate that headers were added by just using Mockito?</p>\n<p>I mocked every builder step, but I can't perform any verify() on the headers() function.</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":12572780,"reputation":3,"user_id":9146328,"display_name":"Alfonso Pimienta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684366959,"creation_date":1684366959,"question_id":76276860,"body_markdown":"I&#39;m experiencing an issue with a test case in my `ProductRepositoryTest` class. The test case `findByActive_ActiveProductsExist` is failing with an `AssertionError`. Here is the error message:\r\n\r\n```\r\njava.lang.AssertionError: \r\nExpecting ArrayList:\r\n[Product [id=2, productType=Scanner, productDescription=Scanner de alta resoluci&#243;n, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resoluci&#243;n &#243;ptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\r\nto contain only:\r\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null],\r\nProduct [id=2, productType=Scanner, productDescription=Scanner de alta resoluci&#243;n, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resoluci&#243;n &#243;ptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\r\nbut could not find the following element(s):\r\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\r\n```\r\n\r\nThe test case is intended to verify that the `findByActive` method in the `ProductRepository` returns the correct list of active products. However, the assertion is failing because the expected list is not found in the actual list.\r\n\r\nI noticed that there are differences between the input and output IDs. The `activeProduct1` has an expected ID of 1, but the output shows an ID of 2. Similarly, the `activeProduct2` has an expected ID of 2, but the output shows an ID of 4.\r\n\r\nHere is the code for reference:\r\n\r\n```java\r\npackage com.saajf.manager.eewaapro;\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\nimport java.sql.Date;\r\nimport java.util.List;\r\nimport javax.transaction.Transactional;\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\r\nimport com.saajf.manager.eewaapro.domain.entities.Product;\r\nimport com.saajf.manager.eewaapro.infrastructure.repositories.ProductRepository;\r\n@DataJpaTest\r\n@Transactional\r\npublic class ProductRepositoryTest {\r\n@Autowired\r\nprivate ProductRepository productRepository;\r\n@Autowired\r\nprivate TestEntityManager entityManager;\r\n@BeforeEach\r\nvoid setUp() {\r\n// Limpiar los datos de prueba antes de cada prueba\r\nproductRepository.deleteAll();\r\n}\r\n@AfterEach\r\nvoid tearDown() {\r\n// Limpiar los datos de prueba despu&#233;s de cada prueba\r\nproductRepository.deleteAll();\r\n}\r\n@Test\r\n@Transactional\r\nvoid findByActive_ActiveProductsExist() {\r\nProduct activeProduct1 = new Product();\r\nactiveProduct1.setId(1);\r\nactiveProduct1 = new Product(1, &quot;PC&quot;, &quot;Potente ordenador de escritorio&quot;, &quot;Dell&quot;, &quot;XPS 8900&quot;, &quot;1234567890ABCDEF&quot;,\r\n&quot;Intel Core i7, 16GB RAM, 2TB HDD&quot;, &quot;DISPONIBLE&quot;, &quot;Oficina principal&quot;, null, new Date(0), true,\r\n&quot;Activo&quot;);\r\nProduct activeProduct2 = new Product();\r\nactiveProduct2.setId(2);\r\nactiveProduct2 = new Product(2, &quot;Scanner&quot;, &quot;Scanner de alta resoluci&#243;n&quot;, &quot;Canon&quot;, &quot;Canoscan 9000F Mark II&quot;,\r\n&quot;1234567890ABCDEF&quot;, &quot;Resoluci&#243;n &#243;ptica de 9600 x 9600 ppp&quot;, &quot;EN_USO&quot;, &quot;Oficina principal&quot;, 1,\r\nnew Date(0), true, &quot;Activo&quot;);\r\nProduct inactiveProduct1 = new Product(3, &quot;Impresora&quot;, &quot;Impresora l&#225;ser monocrom&#225;tica&quot;, &quot;HP&quot;,\r\n&quot;LaserJet Pro M15w&quot;, &quot;1234567890ABCDEF&quot;, &quot;Impresi&#243;n r&#225;pida a 19 ppm&quot;, &quot;EN_USO&quot;, &quot;Almac&#233;n&quot;, null,\r\nnew Date(0), false, &quot;Inactivo&quot;);\r\nproductRepository.save(activeProduct1);\r\nproductRepository.save(activeProduct2);\r\nproductRepository.save(inactiveProduct1);\r\n// Verificar el ID asignado al activeProduct1\r\nSystem.out.println(&quot;ID del activeProduct1: &quot; + activeProduct1.getId());\r\nSystem.out.println(&quot;ID del activeProduct2: &quot; + activeProduct2.getId());\r\nList&lt;Product&gt; activeProducts = productRepository.findByActive(true);\r\nfor (Product product : activeProducts) {\r\nSystem.out.println(&quot;ID: &quot; + product.getId());\r\n}\r\nassertThat(activeProducts).containsOnly(activeProduct1, activeProduct2);\r\n}\r\n@Test\r\n@Transactional\r\nvoid findByProductSerialNumber_ProductExists() {\r\nProduct product = new Product();\r\nproduct.setProductSerialNumber(&quot;SN223686007&quot;);\r\nproduct.setProductType(&quot;Electronics&quot;);\r\nproduct.setProductDescription(&quot;Personal Computer&quot;);\r\nproduct.setProductBrand(&quot;Apple&quot;);\r\nproduct.setProductModel(&quot;MacBook Pro&quot;);\r\nproduct.setProductTechnicalFeatures(&quot;M1 chip, 8GB RAM, 256GB SSD&quot;);\r\nproduct.setProductUsageStatus(&quot;Nuevo&quot;);\r\nproduct.setProductLocation(&quot;Office&quot;);\r\nproduct.setAssignedUserProduct(2);\r\nproduct.setProductPurchaseDate(Date.valueOf(&quot;2023-05-11&quot;));\r\nproduct.setActive(false);\r\nproduct.setStatus(&quot;EN_USO&quot;);\r\nentityManager.merge(product);\r\nentityManager.flush();\r\nentityManager.clear();\r\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;SN223686007&quot;);\r\nassertThat(foundProduct).isNotNull();\r\nassertThat(foundProduct.getProductSerialNumber()).isEqualTo(&quot;SN223686007&quot;);\r\n}\r\n@Test\r\n@Transactional\r\nvoid findByProductSerialNumber_ProductNotExists() {\r\n// Intentar buscar un producto por un n&#250;mero de serie inexistente\r\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;XYZ789&quot;);\r\n// Verificar que el producto encontrado sea nulo\r\nassertThat(foundProduct).isNull();\r\n}\r\n}\r\n```\r\n\r\n\r\nI ran the test cases in the class.","title":"AssertionError in test findByActive_ActiveProductsExist","body":"<p>I'm experiencing an issue with a test case in my <code>ProductRepositoryTest</code> class. The test case <code>findByActive_ActiveProductsExist</code> is failing with an <code>AssertionError</code>. Here is the error message:</p>\n<pre><code>java.lang.AssertionError: \nExpecting ArrayList:\n[Product [id=2, productType=Scanner, productDescription=Scanner de alta resolución, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resolución óptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\nto contain only:\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null],\nProduct [id=2, productType=Scanner, productDescription=Scanner de alta resolución, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resolución óptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\nbut could not find the following element(s):\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\n</code></pre>\n<p>The test case is intended to verify that the <code>findByActive</code> method in the <code>ProductRepository</code> returns the correct list of active products. However, the assertion is failing because the expected list is not found in the actual list.</p>\n<p>I noticed that there are differences between the input and output IDs. The <code>activeProduct1</code> has an expected ID of 1, but the output shows an ID of 2. Similarly, the <code>activeProduct2</code> has an expected ID of 2, but the output shows an ID of 4.</p>\n<p>Here is the code for reference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.saajf.manager.eewaapro;\nimport static org.assertj.core.api.Assertions.assertThat;\nimport java.sql.Date;\nimport java.util.List;\nimport javax.transaction.Transactional;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\nimport com.saajf.manager.eewaapro.domain.entities.Product;\nimport com.saajf.manager.eewaapro.infrastructure.repositories.ProductRepository;\n@DataJpaTest\n@Transactional\npublic class ProductRepositoryTest {\n@Autowired\nprivate ProductRepository productRepository;\n@Autowired\nprivate TestEntityManager entityManager;\n@BeforeEach\nvoid setUp() {\n// Limpiar los datos de prueba antes de cada prueba\nproductRepository.deleteAll();\n}\n@AfterEach\nvoid tearDown() {\n// Limpiar los datos de prueba después de cada prueba\nproductRepository.deleteAll();\n}\n@Test\n@Transactional\nvoid findByActive_ActiveProductsExist() {\nProduct activeProduct1 = new Product();\nactiveProduct1.setId(1);\nactiveProduct1 = new Product(1, &quot;PC&quot;, &quot;Potente ordenador de escritorio&quot;, &quot;Dell&quot;, &quot;XPS 8900&quot;, &quot;1234567890ABCDEF&quot;,\n&quot;Intel Core i7, 16GB RAM, 2TB HDD&quot;, &quot;DISPONIBLE&quot;, &quot;Oficina principal&quot;, null, new Date(0), true,\n&quot;Activo&quot;);\nProduct activeProduct2 = new Product();\nactiveProduct2.setId(2);\nactiveProduct2 = new Product(2, &quot;Scanner&quot;, &quot;Scanner de alta resolución&quot;, &quot;Canon&quot;, &quot;Canoscan 9000F Mark II&quot;,\n&quot;1234567890ABCDEF&quot;, &quot;Resolución óptica de 9600 x 9600 ppp&quot;, &quot;EN_USO&quot;, &quot;Oficina principal&quot;, 1,\nnew Date(0), true, &quot;Activo&quot;);\nProduct inactiveProduct1 = new Product(3, &quot;Impresora&quot;, &quot;Impresora láser monocromática&quot;, &quot;HP&quot;,\n&quot;LaserJet Pro M15w&quot;, &quot;1234567890ABCDEF&quot;, &quot;Impresión rápida a 19 ppm&quot;, &quot;EN_USO&quot;, &quot;Almacén&quot;, null,\nnew Date(0), false, &quot;Inactivo&quot;);\nproductRepository.save(activeProduct1);\nproductRepository.save(activeProduct2);\nproductRepository.save(inactiveProduct1);\n// Verificar el ID asignado al activeProduct1\nSystem.out.println(&quot;ID del activeProduct1: &quot; + activeProduct1.getId());\nSystem.out.println(&quot;ID del activeProduct2: &quot; + activeProduct2.getId());\nList&lt;Product&gt; activeProducts = productRepository.findByActive(true);\nfor (Product product : activeProducts) {\nSystem.out.println(&quot;ID: &quot; + product.getId());\n}\nassertThat(activeProducts).containsOnly(activeProduct1, activeProduct2);\n}\n@Test\n@Transactional\nvoid findByProductSerialNumber_ProductExists() {\nProduct product = new Product();\nproduct.setProductSerialNumber(&quot;SN223686007&quot;);\nproduct.setProductType(&quot;Electronics&quot;);\nproduct.setProductDescription(&quot;Personal Computer&quot;);\nproduct.setProductBrand(&quot;Apple&quot;);\nproduct.setProductModel(&quot;MacBook Pro&quot;);\nproduct.setProductTechnicalFeatures(&quot;M1 chip, 8GB RAM, 256GB SSD&quot;);\nproduct.setProductUsageStatus(&quot;Nuevo&quot;);\nproduct.setProductLocation(&quot;Office&quot;);\nproduct.setAssignedUserProduct(2);\nproduct.setProductPurchaseDate(Date.valueOf(&quot;2023-05-11&quot;));\nproduct.setActive(false);\nproduct.setStatus(&quot;EN_USO&quot;);\nentityManager.merge(product);\nentityManager.flush();\nentityManager.clear();\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;SN223686007&quot;);\nassertThat(foundProduct).isNotNull();\nassertThat(foundProduct.getProductSerialNumber()).isEqualTo(&quot;SN223686007&quot;);\n}\n@Test\n@Transactional\nvoid findByProductSerialNumber_ProductNotExists() {\n// Intentar buscar un producto por un número de serie inexistente\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;XYZ789&quot;);\n// Verificar que el producto encontrado sea nulo\nassertThat(foundProduct).isNull();\n}\n}\n</code></pre>\n<p>I ran the test cases in the class.</p>\n"},{"tags":["java","git","github","jgit"],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684365337,"creation_date":1684365337,"answer_id":76276760,"question_id":76276462,"body_markdown":"Looking at [`org.eclipse.jgit.api / Class AddCommand / addFilepattern()`][1], I see:\r\n\r\n&gt; Add a path to a file/directory whose content should be added.\r\n&gt;\r\n&gt; A directory name (e.g. `dir` to add `dir/file1` and `dir/file2`) can also be given to add all files in the directory, recursively.  \r\nFileglobs (e.g. *.c) are not yet supported.\r\n&gt;\r\n&gt; Parameters:  \r\n&gt; `filepattern` - **repository-relative path** of file/directory to add (with `/` as separator)\r\n\r\nThe term &quot;repository-relative&quot; in the documentation for the addFilepattern() method means that the file pattern should be specified relative to the root directory of the repository.\r\n\r\n```\r\n/repo\r\n   /dir1\r\n      file1.txt\r\n   /dir2\r\n      file2.txt\r\n```\r\n\r\nIf you want to add file1.txt to the staging area, you would use addFilepattern(&quot;dir1/file1.txt&quot;), even if the current working directory is dir1 or dir2. This is because the path is relative to the root of the repository (/repo), not the current working directory.\r\n\r\nIf you try to add a file that doesn&#39;t exist in the repository (from the root directory perspective), it won&#39;t be staged, and no changes will be registered when you commit.\r\n\r\nDouble-check the value of postname in `git.add().addFilepattern(postname).call();`, to make sure it is a valid paramter.\r\n\r\n  [1]: https://javadoc.io/doc/org.eclipse.jgit/org.eclipse.jgit/latest/org.eclipse.jgit/org/eclipse/jgit/api/AddCommand.html","title":"Using JGit to modify a repo doesn&#39;t change anything even after committing","body":"<p>Looking at <a href=\"https://javadoc.io/doc/org.eclipse.jgit/org.eclipse.jgit/latest/org.eclipse.jgit/org/eclipse/jgit/api/AddCommand.html\" rel=\"nofollow noreferrer\"><code>org.eclipse.jgit.api / Class AddCommand / addFilepattern()</code></a>, I see:</p>\n<blockquote>\n<p>Add a path to a file/directory whose content should be added.</p>\n<p>A directory name (e.g. <code>dir</code> to add <code>dir/file1</code> and <code>dir/file2</code>) can also be given to add all files in the directory, recursively.<br />\nFileglobs (e.g. *.c) are not yet supported.</p>\n<p>Parameters:<br />\n<code>filepattern</code> - <strong>repository-relative path</strong> of file/directory to add (with <code>/</code> as separator)</p>\n</blockquote>\n<p>The term &quot;repository-relative&quot; in the documentation for the addFilepattern() method means that the file pattern should be specified relative to the root directory of the repository.</p>\n<pre><code>/repo\n   /dir1\n      file1.txt\n   /dir2\n      file2.txt\n</code></pre>\n<p>If you want to add file1.txt to the staging area, you would use addFilepattern(&quot;dir1/file1.txt&quot;), even if the current working directory is dir1 or dir2. This is because the path is relative to the root of the repository (/repo), not the current working directory.</p>\n<p>If you try to add a file that doesn't exist in the repository (from the root directory perspective), it won't be staged, and no changes will be registered when you commit.</p>\n<p>Double-check the value of postname in <code>git.add().addFilepattern(postname).call();</code>, to make sure it is a valid paramter.</p>\n"},{"comments":[{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1684556985,"post_id":76276856,"comment_id":134537954,"body_markdown":"OK, strange that it is the only pattern working.","body":"OK, strange that it is the only pattern working."}],"tags":[],"owner":{"account_id":26472979,"reputation":51,"user_id":20113319,"display_name":"Glitch"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684366873,"creation_date":1684366873,"answer_id":76276856,"question_id":76276462,"body_markdown":"I eventually decided to use \r\n```\r\ngit.add().addFilepattern(&quot;*&quot;).call();\r\n```\r\nwhich was the only thing that worked","title":"Using JGit to modify a repo doesn&#39;t change anything even after committing","body":"<p>I eventually decided to use</p>\n<pre><code>git.add().addFilepattern(&quot;*&quot;).call();\n</code></pre>\n<p>which was the only thing that worked</p>\n"}],"owner":{"account_id":26472979,"reputation":51,"user_id":20113319,"display_name":"Glitch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76276856,"answer_count":2,"score":1,"last_activity_date":1684366873,"creation_date":1684360797,"question_id":76276462,"body_markdown":"Here is my code:\r\n\r\n```st = &quot;&quot;;\r\n\t\t\t\t\t\t\tpostbody = usabled;\r\n\t\t\t\t\t\t\tString pathToClone = &quot;./repo&quot;;\r\n\t\t\t\t\t        Git git = Git.cloneRepository()\r\n\t\t\t\t\t                .setURI(&quot;https://github.com/Glitch31415/rws.git&quot;)\r\n\t\t\t\t\t                .setDirectory(new File(pathToClone))\r\n\t\t\t\t\t                .call();\r\n\t\t\t\t\t        System.out.println(&quot;remade local repo&quot;);\r\n\t\t\t\t\t        if (windows == true) {\r\n\t\t\t\t\t\t        new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot;, postname);\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t        else {\r\n\t\t\t\t\t\t        new File(git.getRepository().getDirectory().getParent() + &quot;/community/&quot;, postname);\r\n\t\t\t\t\t        }\r\n\t\t\t\t        \r\n\t\t\t\t\t        try {\r\n\t\t\t\t\t        \tFileWriter myWriter;\r\n\t\t\t\t\t        \tif (windows == true) {\r\n\t\t\t\t\t\t            myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\r\n\t\t\t\t\t\t\t        System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\r\n\t\t\t\t\t        \t}\r\n\t\t\t\t\t        \telse {\r\n\t\t\t\t\t\t            myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\r\n\t\t\t\t\t\t\t        System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\r\n\t\t\t\t\t        \t}\r\n\r\n\t\t\t\t\t            myWriter.write(postbody);\r\n\t\t\t\t\t            System.out.println(&quot;wrote &quot; + postbody);\r\n\t\t\t\t\t            myWriter.close();\r\n\t\t\t\t\t          } catch (IOException e) {\r\n\t\t\t\t\t            e.printStackTrace();\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t        git.add().addFilepattern(postname).call();\r\n\t\t\t\t\t        try {\r\n\t\t\t\t\t        \ttry {\r\n\t\t\t\t\t        \t\tFile myObj;\r\n\t\t\t\t\t        \t\tif (windows == true) {\r\n\t\t\t\t\t\t        \t      myObj = new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\r\n\t\t\t\t\t        \t\t}\r\n\t\t\t\t\t        \t\telse {\r\n\t\t\t\t\t\t        \t      myObj = new File(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\r\n\t\t\t\t\t        \t\t}\r\n\r\n\t\t\t\t\t        \t      Scanner myReader = new Scanner(myObj);\r\n\t\t\t\t\t        \t      while (myReader.hasNextLine()) {\r\n\t\t\t\t\t        \t        st = st + myReader.nextLine() + &quot;\\n&quot;;\r\n\t\t\t\t\t        \t      }\r\n\t\t\t\t\t        \t      myReader.close();\r\n\t\t\t\t\t        \t    } catch (FileNotFoundException e) {\r\n\t\t\t\t\t        \t      e.printStackTrace();\r\n\t\t\t\t\t        \t    }\r\n\t\t\t\t\t            System.out.println(&quot;index was read as &#39;&quot; + st + &quot;&#39;&quot;);\r\n\t\t\t\t\t            FileWriter myWriter;\r\n\t\t\t\t\t            if (windows == true) {\r\n\t\t\t\t\t\t            myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\r\n\t\t\t\t\t            }\r\n\t\t\t\t\t            else {\r\n\t\t\t\t\t\t            myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\r\n\t\t\t\t\t            }\r\n\r\n\t\t\t\t\t            \r\n\t\t\t\t\t            myWriter.write(st+postname+&quot;\\n&quot;);\r\n\t\t\t\t\t            myWriter.close();\r\n\t\t\t\t\t          } catch (IOException e) {\r\n\t\t\t\t\t            e.printStackTrace();\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t        git.add().addFilepattern(&quot;/community/index&quot;).call();\r\n\t\t\t\t\t        git.commit().setMessage(&quot;Committed from server&quot;).call();\r\n\t\t\t\t\t        PushCommand pushCommand = git.push();\r\n\t\t\t\t\t        pushCommand.setCredentialsProvider(new UsernamePasswordCredentialsProvider(&quot;key&quot;, &quot;&quot;));\r\n\t\t\t\t\t        pushCommand.call();\r\n\t\t\t\t\t        Path directory = Path.of(pathToClone);\r\n\t\t\t\t\t        Files.walk(directory)\r\n\t\t\t                .sorted(Comparator.reverseOrder())\r\n\t\t\t                .map(Path::toFile)\r\n\t\t\t                .forEach(File::delete);\r\n```\r\n\r\nThis code creates a new file, writes to it, then modifies another file and appends something onto the end of it. All this works in the local cloned repo. But, when I run commit and push, nothing changes in the online repo. It says there was a new commit, but it also says &quot;Showing 0 changed files with 0 additions and 0 deletions.&quot; Basically an empty commit. What am I doing wrong? How do I just copy the local repo into the online one?\r\nAlso, if the git.add() command is in the wrong spot, it&#39;s because I moved it in front of the changes to try to fix the problem. It used to be behind them.","title":"Using JGit to modify a repo doesn&#39;t change anything even after committing","body":"<p>Here is my code:</p>\n<pre><code>                            postbody = usabled;\n                            String pathToClone = &quot;./repo&quot;;\n                            Git git = Git.cloneRepository()\n                                    .setURI(&quot;https://github.com/Glitch31415/rws.git&quot;)\n                                    .setDirectory(new File(pathToClone))\n                                    .call();\n                            System.out.println(&quot;remade local repo&quot;);\n                            if (windows == true) {\n                                new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot;, postname);\n                            }\n                            else {\n                                new File(git.getRepository().getDirectory().getParent() + &quot;/community/&quot;, postname);\n                            }\n                        \n                            try {\n                                FileWriter myWriter;\n                                if (windows == true) {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\n                                    System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\n                                }\n                                else {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\n                                    System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\n                                }\n\n                                myWriter.write(postbody);\n                                System.out.println(&quot;wrote &quot; + postbody);\n                                myWriter.close();\n                              } catch (IOException e) {\n                                e.printStackTrace();\n                            }\n                            git.add().addFilepattern(postname).call();\n                            try {\n                                try {\n                                    File myObj;\n                                    if (windows == true) {\n                                          myObj = new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\n                                    }\n                                    else {\n                                          myObj = new File(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\n                                    }\n\n                                      Scanner myReader = new Scanner(myObj);\n                                      while (myReader.hasNextLine()) {\n                                        st = st + myReader.nextLine() + &quot;\\n&quot;;\n                                      }\n                                      myReader.close();\n                                    } catch (FileNotFoundException e) {\n                                      e.printStackTrace();\n                                    }\n                                System.out.println(&quot;index was read as '&quot; + st + &quot;'&quot;);\n                                FileWriter myWriter;\n                                if (windows == true) {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\n                                }\n                                else {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\n                                }\n\n                                \n                                myWriter.write(st+postname+&quot;\\n&quot;);\n                                myWriter.close();\n                              } catch (IOException e) {\n                                e.printStackTrace();\n                            }\n                            git.add().addFilepattern(&quot;/community/index&quot;).call();\n                            git.commit().setMessage(&quot;Committed from server&quot;).call();\n                            PushCommand pushCommand = git.push();\n                            pushCommand.setCredentialsProvider(new UsernamePasswordCredentialsProvider(&quot;key&quot;, &quot;&quot;));\n                            pushCommand.call();\n                            Path directory = Path.of(pathToClone);\n                            Files.walk(directory)\n                            .sorted(Comparator.reverseOrder())\n                            .map(Path::toFile)\n                            .forEach(File::delete);\n</code></pre>\n<p>This code creates a new file, writes to it, then modifies another file and appends something onto the end of it. All this works in the local cloned repo. But, when I run commit and push, nothing changes in the online repo. It says there was a new commit, but it also says &quot;Showing 0 changed files with 0 additions and 0 deletions.&quot; Basically an empty commit. What am I doing wrong? How do I just copy the local repo into the online one?\nAlso, if the git.add() command is in the wrong spot, it's because I moved it in front of the changes to try to fix the problem. It used to be behind them.</p>\n"},{"tags":["java","spring-boot","thymeleaf","pdf-generation","itext7"],"owner":{"account_id":18753354,"reputation":1,"user_id":13673967,"display_name":"sophie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684366607,"creation_date":1684366607,"question_id":76276840,"body_markdown":"I want to generate in SpringBoot pdf file from html with styles and with using cyrillic letters. Is there any solution so that I could convert html file as it is to pdf, including cyrillic alphabet and style?\r\n```\r\n @GetMapping(&quot;/generatePDF&quot;)\r\n    public void generateInvoice(HttpServletResponse response, HttpServletRequest request){\r\n\r\n        try (OutputStream outputStream = response.getOutputStream()) {\r\n            response.setContentType(MediaType.APPLICATION_PDF_VALUE);\r\n\r\n            Context context = new Context();\r\n            context.setVariable(&quot;user&quot;, userService.findUserById(1L));\r\n\r\n            String htmlContent = templateEngine.process(&quot;welcome&quot;, context);\r\n\r\n            Document document = Jsoup.parse(htmlContent);\r\n            document.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\r\n            document.outputSettings().charset(StandardCharsets.UTF_8);\r\n\r\n            String modifiedHtml = document.html().replaceAll(&quot;&amp;nbsp;&quot;, &quot; &quot;);\r\n            ITextRenderer renderer = new ITextRenderer();\r\n\r\n            renderer.getFontResolver().addFont(&quot;src/main/java/com/example/textpdf/Arial Unicode MS.ttf&quot;, &quot;Identity-H&quot;, BaseFont.EMBEDDED);\r\n\r\n            renderer.setDocumentFromString(modifiedHtml);\r\n            renderer.layout();\r\n            renderer.createPDF(outputStream);\r\n        } catch (IOException | DocumentException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nand welcome.html file: \r\n \r\n```\r\n   &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta content=&#39;text/html; charset=utf-8&#39; charset=&quot;UTF-8&quot;/&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;h3 style=&quot;text-align: center; color: green&quot;&gt;\r\n    &lt;span style=&quot;font-family: Arial, sans-serif; font-size:16px; font-weight: normal;color: blue&quot; th:text=&quot;&#39;Привіт &#39;+ ${user.firstName + &#39; &#39; + user.lastName}&quot;&gt;&lt;/span&gt;\r\n&lt;/h3&gt;\r\n&lt;h2&gt;Привет&lt;/h2&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nI also tried to use Paragraph class but it doesn&#39;t add styles of html file.","title":"Generate PDF with Cyrillic letters using IText","body":"<p>I want to generate in SpringBoot pdf file from html with styles and with using cyrillic letters. Is there any solution so that I could convert html file as it is to pdf, including cyrillic alphabet and style?</p>\n<pre><code> @GetMapping(&quot;/generatePDF&quot;)\n    public void generateInvoice(HttpServletResponse response, HttpServletRequest request){\n\n        try (OutputStream outputStream = response.getOutputStream()) {\n            response.setContentType(MediaType.APPLICATION_PDF_VALUE);\n\n            Context context = new Context();\n            context.setVariable(&quot;user&quot;, userService.findUserById(1L));\n\n            String htmlContent = templateEngine.process(&quot;welcome&quot;, context);\n\n            Document document = Jsoup.parse(htmlContent);\n            document.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\n            document.outputSettings().charset(StandardCharsets.UTF_8);\n\n            String modifiedHtml = document.html().replaceAll(&quot;&amp;nbsp;&quot;, &quot; &quot;);\n            ITextRenderer renderer = new ITextRenderer();\n\n            renderer.getFontResolver().addFont(&quot;src/main/java/com/example/textpdf/Arial Unicode MS.ttf&quot;, &quot;Identity-H&quot;, BaseFont.EMBEDDED);\n\n            renderer.setDocumentFromString(modifiedHtml);\n            renderer.layout();\n            renderer.createPDF(outputStream);\n        } catch (IOException | DocumentException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>and welcome.html file:</p>\n<pre><code>   &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta content='text/html; charset=utf-8' charset=&quot;UTF-8&quot;/&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3 style=&quot;text-align: center; color: green&quot;&gt;\n    &lt;span style=&quot;font-family: Arial, sans-serif; font-size:16px; font-weight: normal;color: blue&quot; th:text=&quot;'Привіт '+ ${user.firstName + ' ' + user.lastName}&quot;&gt;&lt;/span&gt;\n&lt;/h3&gt;\n&lt;h2&gt;Привет&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I also tried to use Paragraph class but it doesn't add styles of html file.</p>\n"},{"tags":["java","spring-boot","maven","lombok","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":8059842,"reputation":41,"user_id":6075710,"display_name":"Oladipupo Aina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586573569,"creation_date":1586573569,"answer_id":61151532,"question_id":61143001,"body_markdown":"Eventually resolved this by overriding the default compile goal during the compile phase using execution as shown below:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.7.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;Compile With Annotation Processing&lt;/id&gt;\r\n                &lt;phase&gt;compile&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;compile&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;annotationProcessorPaths&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.18.12&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.2.0.Final&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                    &lt;/annotationProcessorPaths&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\r\n                        &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;","title":"How to use multiple annotation processors with maven-compiler-plugin","body":"<p>Eventually resolved this by overriding the default compile goal during the compile phase using execution as shown below:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.7.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;Compile With Annotation Processing&lt;/id&gt;\n            &lt;phase&gt;compile&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;annotationProcessorPaths&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;version&gt;1.18.12&lt;/version&gt;\n                    &lt;/path&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                        &lt;version&gt;1.2.0.Final&lt;/version&gt;\n                    &lt;/path&gt;\n                &lt;/annotationProcessorPaths&gt;\n                &lt;compilerArgs&gt;\n                    &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\n                    &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5043954,"reputation":11,"user_id":4050555,"display_name":"Việt Đỗ"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684365992,"creation_date":1648008838,"answer_id":71581751,"question_id":61143001,"body_markdown":"If your lombok and mapstruct don&#39;t play well with each other, you can use ```lombok-mapstruct-binding``` to resolve the conflict (You don&#39;t need to put it in the ```execution``` tag). The key is to include the binding artifact in the same place with the lombok and mapstruct annotation processors configuration. It works splendid in my case!\r\n    \r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          ..\r\n          &lt;configuration&gt;\r\n            ..\r\n            &lt;annotationProcessorPaths&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n              &lt;version&gt;1.18.20&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n              &lt;version&gt;0.2.0&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n              &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n            &lt;/path&gt;\r\n          &lt;/annotationProcessorPaths&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;plugins&gt;\r\n    &lt;build&gt;","title":"How to use multiple annotation processors with maven-compiler-plugin","body":"<p>If your lombok and mapstruct don't play well with each other, you can use <code>lombok-mapstruct-binding</code> to resolve the conflict (You don't need to put it in the <code>execution</code> tag). The key is to include the binding artifact in the same place with the lombok and mapstruct annotation processors configuration. It works splendid in my case!</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      ..\n      &lt;configuration&gt;\n        ..\n        &lt;annotationProcessorPaths&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n          &lt;version&gt;1.18.20&lt;/version&gt;\n        &lt;/path&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n          &lt;version&gt;0.2.0&lt;/version&gt;\n        &lt;/path&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n          &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n          &lt;version&gt;1.4.2.Final&lt;/version&gt;\n        &lt;/path&gt;\n      &lt;/annotationProcessorPaths&gt;\n    &lt;/plugin&gt;\n  &lt;plugins&gt;\n&lt;build&gt;\n</code></pre>\n"}],"owner":{"account_id":8059842,"reputation":41,"user_id":6075710,"display_name":"Oladipupo Aina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3272,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1684365992,"creation_date":1586530755,"question_id":61143001,"body_markdown":"I have a spring boot project that has lombok and mapstruct and uses maven as the build tool. I need the annotations to be processed at compile time with the resultant generated sources packaged with the final jar. The build is successful. However, the final jar is missing the mapstruct implementation class. The error when I try to start the spring boot application is:\r\n\r\n&gt; ***************************\r\n&gt;  APPLICATION FAILED TO START\r\n&gt; ***************************\r\n&gt; \r\n&gt; Description:\r\n&gt; \r\n&gt; Field salesforceObjectMapper in\r\n&gt; com.some_org.service.salesforce.object.processor.SalesforceObjectProcessor\r\n&gt; required a bean of type\r\n&gt; &#39;com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper&#39;\r\n&gt; that could not be found.\r\n&gt; \r\n&gt; \r\n&gt; Action:\r\n&gt; \r\n&gt; Consider defining a bean of type\r\n&gt; &#39;com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper&#39;\r\n&gt; in your configuration.\r\n\r\nHere is my maven-compiler-plugin setup:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.7.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;source&gt;1.8&lt;/source&gt;\r\n            &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;annotationProcessorPaths&gt;\r\n                &lt;path&gt;\r\n                    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.18.12&lt;/version&gt;\r\n                &lt;/path&gt;\r\n                &lt;path&gt;\r\n                    &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.2.0.Final&lt;/version&gt;\r\n                &lt;/path&gt;\r\n            &lt;/annotationProcessorPaths&gt;\r\n            &lt;compilerArgs&gt;\r\n                &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\r\n                &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\r\n            &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n","title":"How to use multiple annotation processors with maven-compiler-plugin","body":"<p>I have a spring boot project that has lombok and mapstruct and uses maven as the build tool. I need the annotations to be processed at compile time with the resultant generated sources packaged with the final jar. The build is successful. However, the final jar is missing the mapstruct implementation class. The error when I try to start the spring boot application is:</p>\n\n<blockquote>\n  <hr>\n  \n  <p>APPLICATION FAILED TO START</p>\n  \n  <hr>\n  \n  <p>Description:</p>\n  \n  <p>Field salesforceObjectMapper in\n  com.some_org.service.salesforce.object.processor.SalesforceObjectProcessor\n  required a bean of type\n  'com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper'\n  that could not be found.</p>\n  \n  <p>Action:</p>\n  \n  <p>Consider defining a bean of type\n  'com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper'\n  in your configuration.</p>\n</blockquote>\n\n<p>Here is my maven-compiler-plugin setup:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.7.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n        &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;version&gt;1.18.12&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                &lt;version&gt;1.2.0.Final&lt;/version&gt;\n            &lt;/path&gt;\n        &lt;/annotationProcessorPaths&gt;\n        &lt;compilerArgs&gt;\n            &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\n            &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\n        &lt;/compilerArgs&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","inheritance","constructor"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1684352982,"post_id":76275687,"comment_id":134507775,"body_markdown":"If you mean &quot;advertisement&quot;, the abbreviation in English is &quot;ad&quot; with a single &quot;d&quot;, fyi.","body":"If you mean &quot;advertisement&quot;, the abbreviation in English is &quot;ad&quot; with a single &quot;d&quot;, fyi."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1684353277,"post_id":76275687,"comment_id":134507821,"body_markdown":"What you need is to call the superconstructor in `PrintedAdd`, and yes, you will have to repeat the variables.","body":"What you need is to call the superconstructor in <code>PrintedAdd</code>, and yes, you will have to repeat the variables."},{"owner":{"account_id":957259,"reputation":29625,"user_id":982341,"display_name":"GreyBeardedGeek"},"score":0,"creation_date":1684366468,"post_id":76275687,"comment_id":134509850,"body_markdown":"For help in removing a lot boiler-plate code, you might want to have a look at Project Lombok - https://projectlombok.org","body":"For help in removing a lot boiler-plate code, you might want to have a look at Project Lombok - <a href=\"https://projectlombok.org\" rel=\"nofollow noreferrer\">projectlombok.org</a>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684365631,"creation_date":1684353667,"answer_id":76275808,"question_id":76275687,"body_markdown":"In your code:\r\n\r\n    PrintedAdd ad2 = new PrintedAdd(10,20,30);\r\n\r\nThis new `PrintedAdd` object (also an `Advertisement`) has `null` in its two inherited member fields, `ID` and `description`. You neglected to invoke a constructor (or setters) to specify those values, so they default to `null`.  \r\n\r\nSo yes, if you want a subclass to have 5 fields, 2 inherited, and 3 defined on the subclass itself, at run time you need to pass 5 values (primitives or object references). You can pass to a constructor, and/or you can pass via setter methods. Or you could use a [dependency injection][1] framework such as [*Jakarta Contexts and Dependency Injection*][2], [*Google Guice*][3], or [*Spring*][4]. Otherwise, you get default values in member field; for object references that means `null`. \r\n\r\nIn your particular case, your objects are read-only, with getters but no setters. So that eliminates the setters option. And in your case, a dependency injection framework is not appropriate, as that is for providing resources and services, not for individual values such as an ID or description. So, that leaves the constructor option. &#128073; You should write the subclass to have a constructor taking 5 arguments, for the 2 inherited fields and the 3 subclass-specific fields.\r\n\r\nBe aware that a subclass’ constructor can call a superclass’ constructor. See existing Question such as [*Calling superclass from a subclass constructor in Java*](https://stackoverflow.com/q/19326229/642706). \r\n\r\n\r\n\r\nHere is some example code, and some notes.\r\n\r\n- Your superclass should be marked `abstract` as you intend only to instantiate the subclasses, never the superclass. You may want to read [*Constructors in Java Abstract Classes*](https://www.baeldung.com/java-abstract-classes-constructors) by [baeldung][5]. And read Question, [*Can an abstract class have a constructor?*](https://stackoverflow.com/q/260666/642706). \r\n- Since you know all subclasses at compile time, and do not expect new ones to be dynamically added at runtime, you can [seal the superclass][6]. Sealed classes and interfaces restrict which other classes or interfaces may extend or implement them. (Not important for your Question, just a note for modern Java programming.)\r\n- In Java naming conventions, a member field should be name with an initial lowercase letter. So, `first`, not `First`. And `id`, not `ID`. All uppercase by convention means a [constant][7]. \r\n- For simplicity, I replaced your multiple member fields on `PrintAd` to a single `LocalDate`. \r\n- &#128073; Note how it makes sense to pass the id and description in each constructor — there is no other way to discern what the value should be for those fields.\r\n\r\nThe superclass:\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.util.Objects;\r\nimport java.util.UUID;\r\n\r\npublic abstract sealed class Advertisement\r\n        permits PrintAd, WebAd, RadioAd\r\n{\r\n    // Member fields. Read-only, via getter methods.\r\n\r\n    private final UUID id;\r\n    private final String description;\r\n\r\n    // Constructors\r\n\r\n    public Advertisement ( final UUID id ,\r\n                           final String description )\r\n    {\r\n        this.id = id;\r\n        this.description = description;\r\n    }\r\n\r\n    // Getters\r\n\r\n    public UUID getId ( )\r\n    {\r\n        return id;\r\n    }\r\n\r\n    public String getDescription ( )\r\n    {\r\n        return description;\r\n    }\r\n\r\n    // `Object` overrides\r\n\r\n    @Override\r\n    public boolean equals ( Object o )\r\n    {\r\n        if ( this == o ) return true;\r\n        if ( o == null || getClass ( ) != o.getClass ( ) ) return false;\r\n        Advertisement that = ( Advertisement ) o;\r\n        return Objects.equals ( id , that.id );\r\n    }\r\n\r\n    @Override\r\n    public int hashCode ( )\r\n    {\r\n        return Objects.hash ( id );\r\n    }\r\n\r\n    @Override\r\n    public String toString ( )\r\n    {\r\n        return &quot;Advertisement[&quot; +\r\n                &quot;id=&quot; + id + &quot;, &quot; +\r\n                &quot;description=&quot; + description + &#39;]&#39;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nEach of the subclasses, with a third one `RadioAd` just for fun:\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.UUID;\r\n\r\npublic final class PrintAd extends Advertisement\r\n{\r\n    private final LocalDate runDate;\r\n\r\n    public PrintAd ( final UUID id , final String description , final LocalDate runDate )\r\n    {\r\n        super ( id , description );\r\n        this.runDate = runDate;\r\n    }\r\n\r\n    public LocalDate getRunDate ( )\r\n    {\r\n        return runDate;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.net.URL;\r\nimport java.util.UUID;\r\n\r\npublic final class WebAd extends Advertisement\r\n{\r\n    private final URL url;\r\n\r\n    public WebAd ( final UUID id , final String description , final URL url )\r\n    {\r\n        super ( id , description );\r\n        this.url = url;\r\n    }\r\n\r\n    public URL getUrl ( )\r\n    {\r\n        return url;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.time.LocalTime;\r\nimport java.util.UUID;\r\n\r\npublic final class RadioAd extends Advertisement\r\n{\r\n    private final LocalTime airTime;\r\n\r\n    public RadioAd ( final UUID id , final String description , final LocalTime airTime )\r\n    {\r\n        super ( id , description );\r\n        this.airTime = airTime;\r\n    }\r\n\r\n    public LocalTime getAirTime ( )\r\n    {\r\n        return this.airTime;\r\n    }\r\n}\r\n```\r\n\r\nAnd an app to exercise those business logic classes.\r\n\r\n```java\r\npackage work.basil.example.advertising;\r\n\r\nimport java.net.MalformedURLException;\r\nimport java.net.URI;\r\nimport java.time.LocalDate;\r\nimport java.time.LocalTime;\r\nimport java.util.List;\r\nimport java.util.UUID;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        List &lt; Advertisement &gt; ads = null;\r\n        try\r\n        {\r\n            ads =\r\n                    List.of (\r\n                            new PrintAd (\r\n                                    UUID.fromString ( &quot;a71330e7-131f-4d10-beac-4e8ffc21887f&quot; ) ,\r\n                                    &quot;Example print ad.&quot; ,\r\n                                    LocalDate.now ( )\r\n                            ) ,\r\n                            new WebAd (\r\n                                    UUID.fromString ( &quot;8aafa2cf-03dc-452b-a84d-c61d75964955&quot; ) ,\r\n                                    &quot;Example web ad.&quot; ,\r\n                                    URI.create ( &quot;https://www.DailyBugle.com/ads&quot; ).toURL ( )\r\n                            ) ,\r\n                            new RadioAd (\r\n                                    UUID.fromString ( &quot;e21b187c-01e2-44da-9a26-5debb9146cf6&quot; ) ,\r\n                                    &quot;Example radio ad.&quot; ,\r\n                                    LocalTime.NOON\r\n                            )\r\n                    );\r\n        }\r\n        catch ( MalformedURLException e ) { throw new RuntimeException ( e ); }\r\n\r\n        System.out.println ( &quot;ads = &quot; + ads );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n&gt;ads = [Advertisement[id=a71330e7-131f-4d10-beac-4e8ffc21887f, description=Example print ad.], Advertisement[id=8aafa2cf-03dc-452b-a84d-c61d75964955, description=Example web ad.], Advertisement[id=e21b187c-01e2-44da-9a26-5debb9146cf6, description=Example radio ad.]]\r\n\r\n\r\n----------\r\n\r\n\r\nTo learn more, see the [*The Java Tutorials*][8] provided by Oracle Corp free of cost:\r\n\r\n - [*Controlling Access to Members of a Class*][9]\r\n - [*Inheritance*][10]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Dependency_injection\r\n  [2]: https://jakarta.ee/specifications/cdi/\r\n  [3]: https://en.wikipedia.org/wiki/Google_Guice\r\n  [4]: https://en.wikipedia.org/wiki/Spring_Framework#Inversion_of_control_container_(dependency_injection)\r\n  [5]: https://www.baeldung.com/author/baeldung\r\n  [6]: https://openjdk.org/jeps/409\r\n  [7]: https://en.wikipedia.org/wiki/Constant_(computer_programming)\r\n  [8]: https://docs.oracle.com/javase/tutorial/index.html\r\n  [9]: https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\r\n  [10]: https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html","title":"Is there a way to not have to write the variables and the constructor for every child class","body":"<p>In your code:</p>\n<pre><code>PrintedAdd ad2 = new PrintedAdd(10,20,30);\n</code></pre>\n<p>This new <code>PrintedAdd</code> object (also an <code>Advertisement</code>) has <code>null</code> in its two inherited member fields, <code>ID</code> and <code>description</code>. You neglected to invoke a constructor (or setters) to specify those values, so they default to <code>null</code>.</p>\n<p>So yes, if you want a subclass to have 5 fields, 2 inherited, and 3 defined on the subclass itself, at run time you need to pass 5 values (primitives or object references). You can pass to a constructor, and/or you can pass via setter methods. Or you could use a <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">dependency injection</a> framework such as <a href=\"https://jakarta.ee/specifications/cdi/\" rel=\"nofollow noreferrer\"><em>Jakarta Contexts and Dependency Injection</em></a>, <a href=\"https://en.wikipedia.org/wiki/Google_Guice\" rel=\"nofollow noreferrer\"><em>Google Guice</em></a>, or <a href=\"https://en.wikipedia.org/wiki/Spring_Framework#Inversion_of_control_container_(dependency_injection)\" rel=\"nofollow noreferrer\"><em>Spring</em></a>. Otherwise, you get default values in member field; for object references that means <code>null</code>.</p>\n<p>In your particular case, your objects are read-only, with getters but no setters. So that eliminates the setters option. And in your case, a dependency injection framework is not appropriate, as that is for providing resources and services, not for individual values such as an ID or description. So, that leaves the constructor option. 👉 You should write the subclass to have a constructor taking 5 arguments, for the 2 inherited fields and the 3 subclass-specific fields.</p>\n<p>Be aware that a subclass’ constructor can call a superclass’ constructor. See existing Question such as <a href=\"https://stackoverflow.com/q/19326229/642706\"><em>Calling superclass from a subclass constructor in Java</em></a>.</p>\n<p>Here is some example code, and some notes.</p>\n<ul>\n<li>Your superclass should be marked <code>abstract</code> as you intend only to instantiate the subclasses, never the superclass. You may want to read <a href=\"https://www.baeldung.com/java-abstract-classes-constructors\" rel=\"nofollow noreferrer\"><em>Constructors in Java Abstract Classes</em></a> by <a href=\"https://www.baeldung.com/author/baeldung\" rel=\"nofollow noreferrer\">baeldung</a>. And read Question, <a href=\"https://stackoverflow.com/q/260666/642706\"><em>Can an abstract class have a constructor?</em></a>.</li>\n<li>Since you know all subclasses at compile time, and do not expect new ones to be dynamically added at runtime, you can <a href=\"https://openjdk.org/jeps/409\" rel=\"nofollow noreferrer\">seal the superclass</a>. Sealed classes and interfaces restrict which other classes or interfaces may extend or implement them. (Not important for your Question, just a note for modern Java programming.)</li>\n<li>In Java naming conventions, a member field should be name with an initial lowercase letter. So, <code>first</code>, not <code>First</code>. And <code>id</code>, not <code>ID</code>. All uppercase by convention means a <a href=\"https://en.wikipedia.org/wiki/Constant_(computer_programming)\" rel=\"nofollow noreferrer\">constant</a>.</li>\n<li>For simplicity, I replaced your multiple member fields on <code>PrintAd</code> to a single <code>LocalDate</code>.</li>\n<li>👉 Note how it makes sense to pass the id and description in each constructor — there is no other way to discern what the value should be for those fields.</li>\n</ul>\n<p>The superclass:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.util.Objects;\nimport java.util.UUID;\n\npublic abstract sealed class Advertisement\n        permits PrintAd, WebAd, RadioAd\n{\n    // Member fields. Read-only, via getter methods.\n\n    private final UUID id;\n    private final String description;\n\n    // Constructors\n\n    public Advertisement ( final UUID id ,\n                           final String description )\n    {\n        this.id = id;\n        this.description = description;\n    }\n\n    // Getters\n\n    public UUID getId ( )\n    {\n        return id;\n    }\n\n    public String getDescription ( )\n    {\n        return description;\n    }\n\n    // `Object` overrides\n\n    @Override\n    public boolean equals ( Object o )\n    {\n        if ( this == o ) return true;\n        if ( o == null || getClass ( ) != o.getClass ( ) ) return false;\n        Advertisement that = ( Advertisement ) o;\n        return Objects.equals ( id , that.id );\n    }\n\n    @Override\n    public int hashCode ( )\n    {\n        return Objects.hash ( id );\n    }\n\n    @Override\n    public String toString ( )\n    {\n        return &quot;Advertisement[&quot; +\n                &quot;id=&quot; + id + &quot;, &quot; +\n                &quot;description=&quot; + description + ']';\n    }\n\n}\n</code></pre>\n<p>Each of the subclasses, with a third one <code>RadioAd</code> just for fun:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic final class PrintAd extends Advertisement\n{\n    private final LocalDate runDate;\n\n    public PrintAd ( final UUID id , final String description , final LocalDate runDate )\n    {\n        super ( id , description );\n        this.runDate = runDate;\n    }\n\n    public LocalDate getRunDate ( )\n    {\n        return runDate;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.net.URL;\nimport java.util.UUID;\n\npublic final class WebAd extends Advertisement\n{\n    private final URL url;\n\n    public WebAd ( final UUID id , final String description , final URL url )\n    {\n        super ( id , description );\n        this.url = url;\n    }\n\n    public URL getUrl ( )\n    {\n        return url;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.time.LocalTime;\nimport java.util.UUID;\n\npublic final class RadioAd extends Advertisement\n{\n    private final LocalTime airTime;\n\n    public RadioAd ( final UUID id , final String description , final LocalTime airTime )\n    {\n        super ( id , description );\n        this.airTime = airTime;\n    }\n\n    public LocalTime getAirTime ( )\n    {\n        return this.airTime;\n    }\n}\n</code></pre>\n<p>And an app to exercise those business logic classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.net.MalformedURLException;\nimport java.net.URI;\nimport java.time.LocalDate;\nimport java.time.LocalTime;\nimport java.util.List;\nimport java.util.UUID;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        List &lt; Advertisement &gt; ads = null;\n        try\n        {\n            ads =\n                    List.of (\n                            new PrintAd (\n                                    UUID.fromString ( &quot;a71330e7-131f-4d10-beac-4e8ffc21887f&quot; ) ,\n                                    &quot;Example print ad.&quot; ,\n                                    LocalDate.now ( )\n                            ) ,\n                            new WebAd (\n                                    UUID.fromString ( &quot;8aafa2cf-03dc-452b-a84d-c61d75964955&quot; ) ,\n                                    &quot;Example web ad.&quot; ,\n                                    URI.create ( &quot;https://www.DailyBugle.com/ads&quot; ).toURL ( )\n                            ) ,\n                            new RadioAd (\n                                    UUID.fromString ( &quot;e21b187c-01e2-44da-9a26-5debb9146cf6&quot; ) ,\n                                    &quot;Example radio ad.&quot; ,\n                                    LocalTime.NOON\n                            )\n                    );\n        }\n        catch ( MalformedURLException e ) { throw new RuntimeException ( e ); }\n\n        System.out.println ( &quot;ads = &quot; + ads );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>ads = [Advertisement[id=a71330e7-131f-4d10-beac-4e8ffc21887f, description=Example print ad.], Advertisement[id=8aafa2cf-03dc-452b-a84d-c61d75964955, description=Example web ad.], Advertisement[id=e21b187c-01e2-44da-9a26-5debb9146cf6, description=Example radio ad.]]</p>\n</blockquote>\n<hr />\n<p>To learn more, see the <a href=\"https://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\"><em>The Java Tutorials</em></a> provided by Oracle Corp free of cost:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow noreferrer\"><em>Controlling Access to Members of a Class</em></a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html\" rel=\"nofollow noreferrer\"><em>Inheritance</em></a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1684356448,"post_id":76275881,"comment_id":134508409,"body_markdown":"making `ID` static will not help getting an ID for each instance - it will just be a count of how many were created. `ad.getID()` will return the same value as `ad2.getID()` - they are both returning the value of the *static* ID, a class variable, **not** an instance variable","body":"making <code>ID</code> static will not help getting an ID for each instance - it will just be a count of how many were created. <code>ad.getID()</code> will return the same value as <code>ad2.getID()</code> - they are both returning the value of the <i>static</i> ID, a class variable, <b>not</b> an instance variable"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1684357077,"post_id":76275881,"comment_id":134508520,"body_markdown":"( and static initialization block is an *overkill* in this scenario IMHO )","body":"( and static initialization block is an <i>overkill</i> in this scenario IMHO )"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684363476,"post_id":76275881,"comment_id":134509495,"body_markdown":"@user16320675, I had the correct idea, except I wrote the code incorrectly.  I changed it to what I was intending to recommend.","body":"@user16320675, I had the correct idea, except I wrote the code incorrectly.  I changed it to what I was intending to recommend."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684363756,"creation_date":1684354293,"answer_id":76275881,"question_id":76275687,"body_markdown":"One way to complete this task is to create a static field within the `Advertisement` class.\r\n\r\nThen, within your `Advertisement` constructor, increment this field by `1`, and assign it to your `ID` field.\r\n\r\nConsider the following.\r\n\r\n```java\r\npublic class Advertisement {\r\n    private static int universalId = 0;\r\n\r\n    private int ID;\r\n    private String description;\r\n\r\n    protected Advertisement() {\r\n        ID = universalId++;\r\n    }\r\n\r\n    public Advertisement(String description) {\r\n        this();\r\n        this.description = description;\r\n    }\r\n\r\n    public int getID() {\r\n        return ID;\r\n    }\r\n}\r\n```\r\n\r\nThen, for your sub-classes, within their constructors&#39;, make a call to the super constructor, as follows.\r\n\r\n```java\r\npublic class PrintedAdd extends Advertisement {\r\n    private int First;   //first page cost\r\n    private int Middle;  //middle page cost\r\n    private int Last;    //last page cost\r\n\r\n    public PrintedAdd(int First, int Middle, int Last) {\r\n        super();\r\n        this.First = First;\r\n        this.Middle = Middle;\r\n        this.Last = Last;\r\n    }\r\n\r\n    public int getFirst() {\r\n        return First;\r\n    }\r\n}\r\n```\r\n\r\nThus, making a call to `ad.getID()` should produce `0`, and making a call to `ad2.getID()` should produce `1`.","title":"Is there a way to not have to write the variables and the constructor for every child class","body":"<p>One way to complete this task is to create a static field within the <code>Advertisement</code> class.</p>\n<p>Then, within your <code>Advertisement</code> constructor, increment this field by <code>1</code>, and assign it to your <code>ID</code> field.</p>\n<p>Consider the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Advertisement {\n    private static int universalId = 0;\n\n    private int ID;\n    private String description;\n\n    protected Advertisement() {\n        ID = universalId++;\n    }\n\n    public Advertisement(String description) {\n        this();\n        this.description = description;\n    }\n\n    public int getID() {\n        return ID;\n    }\n}\n</code></pre>\n<p>Then, for your sub-classes, within their constructors', make a call to the super constructor, as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PrintedAdd extends Advertisement {\n    private int First;   //first page cost\n    private int Middle;  //middle page cost\n    private int Last;    //last page cost\n\n    public PrintedAdd(int First, int Middle, int Last) {\n        super();\n        this.First = First;\n        this.Middle = Middle;\n        this.Last = Last;\n    }\n\n    public int getFirst() {\n        return First;\n    }\n}\n</code></pre>\n<p>Thus, making a call to <code>ad.getID()</code> should produce <code>0</code>, and making a call to <code>ad2.getID()</code> should produce <code>1</code>.</p>\n"}],"owner":{"account_id":16238085,"reputation":131,"user_id":11725128,"display_name":"Spiros Skouras"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1684365631,"creation_date":1684352699,"question_id":76275687,"body_markdown":"Creating a program that manages advertisements. Every ad will have 2 common attributes 1: ID, 2: Description.  \r\nDepending if the ad is for a webpage or for a newspaper for example it will have different costs per page, words or duration it is shown.\r\n\r\nI have 3 files\r\n\r\n1. Main.java\r\n2. Advertisement.java\r\n3. PrintedAd.java\r\n4. WebpageAd.java\r\n\r\n**Advertisement.java**\r\n```\r\npublic class Advertisement{\r\n\r\n    private int ID;\r\n    private String description;\r\n\r\n    // Constructor\r\n    public Advertisement(int ID, String description){\r\n        this.ID = ID;\r\n        this.description = description;\r\n    }\r\n    public int getID() {\r\n        return ID;\r\n    }\r\n```\r\n\r\n**PrintedAd.java**\r\n```\r\npublic class PrintedAd extends Advertisement{\r\n\r\n        private int First;   //first page cost\r\n        private int Middle;  //middle page cost\r\n        private int Last;    //last page cost\r\n\r\n    public PrintedAd(int First, int Middle, int Last){\r\n        this.First = First;\r\n        this.Middle = Middle;\r\n        this.Last = Last;\r\n    }\r\n    public int getFirst() {\r\n        return First;\r\n    }\r\n```\r\n\r\n**Main.java**\r\n```\r\npublic class Main{\r\n    public static void main(String[] args) {\r\n        \r\n        Advertisement ad = new Advertisement(34567, &quot;test&quot;);\r\n        System.out.println(ad.getID());\r\n\r\n        PrintedAdd ad2 = new PrintedAdd(10,20,30);\r\n        System.out.println(ad2);\r\n    }\r\n}\r\n```\r\n(had to change var names to make it more readable so if any &quot;dumb&quot; errors appear please understand)\r\nCreating 2 different variables from these 2 classes works fine.\r\n\r\nEven though the variable ad2 is an ad and needs to have an ID number and a description I am unable to do both the Advertisement and PrintedAd attributes.\r\n\r\nWhat I am asking is if there a way for me to not have to write the variables and the constructor for every child class.\r\nIf I were to add to every type of ad this it would solve the issue I believe but still asking if there is a way: \r\n\r\n```\r\n    private int ID;\r\n    private String description;\r\n\r\n    // Constructor\r\n    public Advertisement(int ID, String description){\r\n        this.ID = ID;\r\n        this.description = description;\r\n    }\r\n```","title":"Is there a way to not have to write the variables and the constructor for every child class","body":"<p>Creating a program that manages advertisements. Every ad will have 2 common attributes 1: ID, 2: Description.<br />\nDepending if the ad is for a webpage or for a newspaper for example it will have different costs per page, words or duration it is shown.</p>\n<p>I have 3 files</p>\n<ol>\n<li>Main.java</li>\n<li>Advertisement.java</li>\n<li>PrintedAd.java</li>\n<li>WebpageAd.java</li>\n</ol>\n<p><strong>Advertisement.java</strong></p>\n<pre><code>public class Advertisement{\n\n    private int ID;\n    private String description;\n\n    // Constructor\n    public Advertisement(int ID, String description){\n        this.ID = ID;\n        this.description = description;\n    }\n    public int getID() {\n        return ID;\n    }\n</code></pre>\n<p><strong>PrintedAd.java</strong></p>\n<pre><code>public class PrintedAd extends Advertisement{\n\n        private int First;   //first page cost\n        private int Middle;  //middle page cost\n        private int Last;    //last page cost\n\n    public PrintedAd(int First, int Middle, int Last){\n        this.First = First;\n        this.Middle = Middle;\n        this.Last = Last;\n    }\n    public int getFirst() {\n        return First;\n    }\n</code></pre>\n<p><strong>Main.java</strong></p>\n<pre><code>public class Main{\n    public static void main(String[] args) {\n        \n        Advertisement ad = new Advertisement(34567, &quot;test&quot;);\n        System.out.println(ad.getID());\n\n        PrintedAdd ad2 = new PrintedAdd(10,20,30);\n        System.out.println(ad2);\n    }\n}\n</code></pre>\n<p>(had to change var names to make it more readable so if any &quot;dumb&quot; errors appear please understand)\nCreating 2 different variables from these 2 classes works fine.</p>\n<p>Even though the variable ad2 is an ad and needs to have an ID number and a description I am unable to do both the Advertisement and PrintedAd attributes.</p>\n<p>What I am asking is if there a way for me to not have to write the variables and the constructor for every child class.\nIf I were to add to every type of ad this it would solve the issue I believe but still asking if there is a way:</p>\n<pre><code>    private int ID;\n    private String description;\n\n    // Constructor\n    public Advertisement(int ID, String description){\n        this.ID = ID;\n        this.description = description;\n    }\n</code></pre>\n"},{"tags":["java","linux","jvm"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1684342610,"post_id":76274447,"comment_id":134505645,"body_markdown":"You may be able to read the size of the actual library file, but that won’t tell you what memory allocations that library has performed.  I doubt there is any way to do that.","body":"You may be able to read the size of the actual library file, but that won’t tell you what memory allocations that library has performed.  I doubt there is any way to do that."},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1684350159,"post_id":76274447,"comment_id":134507188,"body_markdown":"There is no &quot;total library size&quot;. Please define what exactly you want to measure.","body":"There is no &quot;total library size&quot;. Please define what exactly you want to measure."},{"owner":{"account_id":2931727,"reputation":4256,"user_id":2511795,"display_name":"0andriy"},"score":1,"creation_date":1684365285,"post_id":76274447,"comment_id":134509707,"body_markdown":"Why the heck it has `embedded-linux` tag?","body":"Why the heck it has <code>embedded-linux</code> tag?"},{"owner":{"account_id":28622033,"reputation":1,"user_id":21914867,"display_name":"Islam Gamal Abd El-Naser"},"score":0,"creation_date":1684386341,"post_id":76274447,"comment_id":134511418,"body_markdown":"@VGR, For the Memory allocation I think there are some dynamic analysis tools specified for monitoring this in the run time like Valgrind-Massif tool I think, but how can I get the actual lib size that you have referenced to ?","body":"@VGR, For the Memory allocation I think there are some dynamic analysis tools specified for monitoring this in the run time like Valgrind-Massif tool I think, but how can I get the actual lib size that you have referenced to ?"},{"owner":{"account_id":28622033,"reputation":1,"user_id":21914867,"display_name":"Islam Gamal Abd El-Naser"},"score":0,"creation_date":1684386443,"post_id":76274447,"comment_id":134511428,"body_markdown":"@apangin, I need to measure the memory consumption of this Lib is it clear ?, the Idea that I&#39;m a beginner in the jvm and linux memories staff so I&#39;m not able to understand how the lib is going to be allocated to the memory after loading it, and how we can get its size in the runtime","body":"@apangin, I need to measure the memory consumption of this Lib is it clear ?, the Idea that I&#39;m a beginner in the jvm and linux memories staff so I&#39;m not able to understand how the lib is going to be allocated to the memory after loading it, and how we can get its size in the runtime"},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":2,"creation_date":1684449644,"post_id":76274447,"comment_id":134523358,"body_markdown":"No: &quot;memory consumption&quot; is ambiguous: it can be virtual memory, resident set size, Java heap size, etc. It&#39;s unclear whether you want to count memory mapped sections of the library image or dynamically allocated memory or both. If this library depends on two other libraries, one of which has been loaded before your library and the other one after, which of them would you like to count? You see, the question is not as simple as it may look. Please start by explaining your originial problem (i.e. *why* do you want to measure), this will help us give you the *right* answer, not a random one.","body":"No: &quot;memory consumption&quot; is ambiguous: it can be virtual memory, resident set size, Java heap size, etc. It&#39;s unclear whether you want to count memory mapped sections of the library image or dynamically allocated memory or both. If this library depends on two other libraries, one of which has been loaded before your library and the other one after, which of them would you like to count? You see, the question is not as simple as it may look. Please start by explaining your originial problem (i.e. <i>why</i> do you want to measure), this will help us give you the <i>right</i> answer, not a random one."},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1684450970,"post_id":76274447,"comment_id":134523513,"body_markdown":"You may get some memory stats of the process by reading [`/proc/self/statm`](https://man7.org/linux/man-pages/man5/proc.5.html) pseudofile.","body":"You may get some memory stats of the process by reading <a href=\"https://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\"><code>&#47;proc&#47;self&#47;statm</code></a> pseudofile."},{"owner":{"account_id":28622033,"reputation":1,"user_id":21914867,"display_name":"Islam Gamal Abd El-Naser"},"score":0,"creation_date":1684502131,"post_id":76274447,"comment_id":134530657,"body_markdown":"@apangin, I got what you mean, Okay let me give you a brief about the Idea, The issue that I may have some non functional requirements in my project that state as following:  &quot;Tested_library shouldn&#39;t exceed x ram usage during the runtime.&quot;, Hence I started to search for a mechanism that could give me such an information. As far as I understand, the consumed ram memory of the lib is separated to the size of the loaded library itself in the memory &quot;static size&quot;, in addition to the heab size &quot; which has dynamically allocated memory during runtime.&quot;","body":"@apangin, I got what you mean, Okay let me give you a brief about the Idea, The issue that I may have some non functional requirements in my project that state as following:  &quot;Tested_library shouldn&#39;t exceed x ram usage during the runtime.&quot;, Hence I started to search for a mechanism that could give me such an information. As far as I understand, the consumed ram memory of the lib is separated to the size of the loaded library itself in the memory &quot;static size&quot;, in addition to the heab size &quot; which has dynamically allocated memory during runtime.&quot;"},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1684545976,"post_id":76274447,"comment_id":134537419,"body_markdown":"Measure RSS of the process without library loaded and with the library loaded. The difference will be the approximation of what you are looking for.","body":"Measure RSS of the process without library loaded and with the library loaded. The difference will be the approximation of what you are looking for."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684345291,"creation_date":1684345291,"answer_id":76274835,"question_id":76274447,"body_markdown":"Using Runtime.totalMemory() and freeMemory() is not very precise. It doesn&#39;t consider what other threads of the Java process or your library may be doing. Calling System.gc() is just a suggestion to the JVM to do garbage collection. There is no guarantee it will execute, and when it does it only cleans the heap memory pool, which is only the memory pools the JVM uses for object instances. Whatever your library is doing will not be inside the heap, unless it uses JNI to manipulate Java objects.\r\n\r\nIF you only want to know the memory the shared library file uses in memory in Linux you should refer to Linux-specific answers like https://unix.stackexchange.com/questions/116327/loading-of-shared-libraries-and-ram-usage. This is not a Java question.\r\n\r\n","title":"How to get the size of a loaded library on java application in the runtime","body":"<p>Using Runtime.totalMemory() and freeMemory() is not very precise. It doesn't consider what other threads of the Java process or your library may be doing. Calling System.gc() is just a suggestion to the JVM to do garbage collection. There is no guarantee it will execute, and when it does it only cleans the heap memory pool, which is only the memory pools the JVM uses for object instances. Whatever your library is doing will not be inside the heap, unless it uses JNI to manipulate Java objects.</p>\n<p>IF you only want to know the memory the shared library file uses in memory in Linux you should refer to Linux-specific answers like <a href=\"https://unix.stackexchange.com/questions/116327/loading-of-shared-libraries-and-ram-usage\">https://unix.stackexchange.com/questions/116327/loading-of-shared-libraries-and-ram-usage</a>. This is not a Java question.</p>\n"}],"owner":{"account_id":28622033,"reputation":1,"user_id":21914867,"display_name":"Islam Gamal Abd El-Naser"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684365301,"creation_date":1684342227,"question_id":76274447,"body_markdown":"Kindly I need help to get the size of a specific loaded library in a running Java Application. \r\n\r\nIn details, I&#39;m running a Java application though JVM on Linux. While I&#39;m trying to get the memory consumption of a specific library that is being loaded during the App initialization. \r\n\r\nSo I&#39;m using something like the following:\r\n        \r\n```lang-java\r\npublic class Test \r\n{\r\n     static\r\n     { \r\n        System.loadLibrary(&quot;Tested_Lib&quot;);\r\n     }\r\n\r\n     public int register () { ......}\r\n     public int unregister () { ......}\r\n}\r\n```\r\n\r\nSo what I&#39;m asking for: \r\n1. Is loading the library that way means that the total library size will be loaded to the JVM address space? \r\n2. How to measure the memory consumption of &quot;Tested_Lib&quot; in the running time?\r\n\r\nI have tried the following: \r\n \r\n```lang-java\r\n        System.gc();\r\n        usedMemoryBefore = runtime.totalMemory() - runtime.freeMemory();\r\n \r\n        System.loadLibrary(&quot;Tested_Lib&quot;);\r\n\r\n        usedMemoryAfter = runtime.totalMemory() - runtime.freeMemory();\r\n        libSizeInRam = (usedMemoryAfter - usedMemoryBefore)/KILOBYTE;  \r\n```\r\nwhile the output was not reasonable at all regarding the expected size of the lib. ","title":"How to get the size of a loaded library on java application in the runtime","body":"<p>Kindly I need help to get the size of a specific loaded library in a running Java Application.</p>\n<p>In details, I'm running a Java application though JVM on Linux. While I'm trying to get the memory consumption of a specific library that is being loaded during the App initialization.</p>\n<p>So I'm using something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test \n{\n     static\n     { \n        System.loadLibrary(&quot;Tested_Lib&quot;);\n     }\n\n     public int register () { ......}\n     public int unregister () { ......}\n}\n</code></pre>\n<p>So what I'm asking for:</p>\n<ol>\n<li>Is loading the library that way means that the total library size will be loaded to the JVM address space?</li>\n<li>How to measure the memory consumption of &quot;Tested_Lib&quot; in the running time?</li>\n</ol>\n<p>I have tried the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        System.gc();\n        usedMemoryBefore = runtime.totalMemory() - runtime.freeMemory();\n \n        System.loadLibrary(&quot;Tested_Lib&quot;);\n\n        usedMemoryAfter = runtime.totalMemory() - runtime.freeMemory();\n        libSizeInRam = (usedMemoryAfter - usedMemoryBefore)/KILOBYTE;  \n</code></pre>\n<p>while the output was not reasonable at all regarding the expected size of the lib.</p>\n"},{"tags":["java","wav","ogg","oggvorbis"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684334338,"post_id":76273071,"comment_id":134503579,"body_markdown":"Make sure you&#39;ve got all necessary deps.  vorbis-java-core seems possible","body":"Make sure you&#39;ve got all necessary deps.  vorbis-java-core seems possible"}],"owner":{"account_id":15903408,"reputation":443,"user_id":11475227,"display_name":"Billy Billy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684365059,"creation_date":1684332801,"question_id":76273071,"body_markdown":"I [have an ogg][1] file downloaded from whatsapp. I am trying to convert it to wav. However, reading the input stream is failing  with Unsupported format.\r\n\r\n```\r\n        File file = new File(&quot;audio.ogg&quot;);\r\n        AudioInputStream in = AudioSystem.getAudioInputStream(file);\r\n```\r\nThe exception:\r\n```\r\nException in thread &quot;main&quot; javax.sound.sampled.UnsupportedAudioFileException: File of unsupported format\r\n        at java.desktop/javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1066)\r\n        at org.Convert.main(Convert.java:20)\r\n```\r\n\r\nI added following dependency to no avail.\r\n```\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\r\n    &lt;artifactId&gt;vorbisspi&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.3.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThoughts?\r\n\r\n  [1]: https://file.io/CJWFsXL6IgZa","title":"Convert ogg/oga file to wav using Java","body":"<p>I <a href=\"https://file.io/CJWFsXL6IgZa\" rel=\"nofollow noreferrer\">have an ogg</a> file downloaded from whatsapp. I am trying to convert it to wav. However, reading the input stream is failing  with Unsupported format.</p>\n<pre><code>        File file = new File(&quot;audio.ogg&quot;);\n        AudioInputStream in = AudioSystem.getAudioInputStream(file);\n</code></pre>\n<p>The exception:</p>\n<pre><code>Exception in thread &quot;main&quot; javax.sound.sampled.UnsupportedAudioFileException: File of unsupported format\n        at java.desktop/javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1066)\n        at org.Convert.main(Convert.java:20)\n</code></pre>\n<p>I added following dependency to no avail.</p>\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\n    &lt;artifactId&gt;vorbisspi&lt;/artifactId&gt;\n    &lt;version&gt;1.0.3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Thoughts?</p>\n"},{"tags":["java","quarkus","mutiny"],"comments":[{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1682498370,"post_id":76043558,"comment_id":134223964,"body_markdown":"Could you create a test project somewhere so that I can have a better look?","body":"Could you create a test project somewhere so that I can have a better look?"},{"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"score":0,"creation_date":1682698393,"post_id":76043558,"comment_id":134261740,"body_markdown":"I tried to recreate this problem in a new test project, but i couldn&#39;t. Retries are working as expected now. I see 3.0.1 is released, but even downgrading to 3.0.0.CR2 nothing changed. Maybe i coded something realy stupid, which now i cannot reproduce since i have better knowledge of the framework.","body":"I tried to recreate this problem in a new test project, but i couldn&#39;t. Retries are working as expected now. I see 3.0.1 is released, but even downgrading to 3.0.0.CR2 nothing changed. Maybe i coded something realy stupid, which now i cannot reproduce since i have better knowledge of the framework."},{"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"score":0,"creation_date":1684321280,"post_id":76043558,"comment_id":134500410,"body_markdown":"HI @DavideD&#39;Alto, I managed to reproduce it on new 3.0.3.Final version. Here is test project: https://github.com/sfeliks/retry-test. When SchedulerService throws an error, it is: CompositeException: Multiple exceptions caught:\n\t[Exception 0] java.lang.RuntimeException: Test Runtime\n\t[Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [116]: &#39;vert.x-eventloop-thread-3&#39; current Thread [118]: &#39;executor-thread-2&#39;","body":"HI @DavideD&#39;Alto, I managed to reproduce it on new 3.0.3.Final version. Here is test project: <a href=\"https://github.com/sfeliks/retry-test\" rel=\"nofollow noreferrer\">github.com/sfeliks/retry-test</a>. When SchedulerService throws an error, it is: CompositeException: Multiple exceptions caught: \t[Exception 0] java.lang.RuntimeException: Test Runtime \t[Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [116]: &#39;vert.x-eventloop-thread-3&#39; current Thread [118]: &#39;executor-thread-2&#39;"}],"answers":[{"tags":[],"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682503778,"creation_date":1682503778,"answer_id":76109560,"question_id":76043558,"body_markdown":"In the end retries started working for me, but it&#39;s unclear what fixed it.\r\nThe main changes i did that could help were:\r\n1. I downgraded Quarkus to 2.16 - previous version (3.0.0.CR2) is the main culprit for me\r\n2. I gave up on using @WithSession completely - left it for Quarkus to handle\r\n3. And follow-up to number 2. - i have better undestanding of working with Mutiny streams, so now i just return Uni to the original caller (Rest endpoint and a Scheduler).","title":"Quarkus Mutiny retry fails because on another thread","body":"<p>In the end retries started working for me, but it's unclear what fixed it.\nThe main changes i did that could help were:</p>\n<ol>\n<li>I downgraded Quarkus to 2.16 - previous version (3.0.0.CR2) is the main culprit for me</li>\n<li>I gave up on using @WithSession completely - left it for Quarkus to handle</li>\n<li>And follow-up to number 2. - i have better undestanding of working with Mutiny streams, so now i just return Uni to the original caller (Rest endpoint and a Scheduler).</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"score":0,"creation_date":1684391495,"post_id":76273708,"comment_id":134511983,"body_markdown":"Thank you. Avoiding .withBackoff fixes this issue, indeed,","body":"Thank you. Avoiding .withBackoff fixes this issue, indeed,"},{"owner":{"account_id":18994381,"reputation":146,"user_id":13862869,"display_name":"Kavishka Madhushan"},"score":0,"creation_date":1692774783,"post_id":76273708,"comment_id":135668587,"body_markdown":"Hi. I am facing same Issue. Is this hibernate session exchange between event loop threads are working in 2.16. I am using 2.16,.5.Final version. But I am facing the same issue. But that is not this code. Its invoke by scheduler and go throw number of processing to some kind of insert to db and publish to the client. and do I have a solution to implement or do I want to go with some kind of blocking operation in that scheduler.","body":"Hi. I am facing same Issue. Is this hibernate session exchange between event loop threads are working in 2.16. I am using 2.16,.5.Final version. But I am facing the same issue. But that is not this code. Its invoke by scheduler and go throw number of processing to some kind of insert to db and publish to the client. and do I have a solution to implement or do I want to go with some kind of blocking operation in that scheduler."}],"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684340704,"creation_date":1684336935,"answer_id":76273708,"question_id":76043558,"body_markdown":"The problem is caused by `.withBackoff`.\r\n\r\nHibernate Reactive checks two things when the session is used:\r\n1. The session must be called in a event-loop thread\r\n2. The session must be used in the same thread it has been created.\r\n\r\nIn this case, the first check is failing because of a limitation (or bug) in Mutiny: when retrying using the `.withBackoff` option, the uni runs in a worker thread (and not in the event-loop thread the session was created).\r\nNote that even if you create a new session, the check will fail because the code it&#39;s not running in a worker-thread (and not a event-loop thread).\r\n\r\nThis works with Quarkus 2.16 because there is a check that makes sure that [everything runs in an event-loop thread](https://github.com/quarkusio/quarkus/blob/62070cb257e78d10e5fdfee6b227dad22c3cf261/extensions/panache/hibernate-reactive-panache-common/runtime/src/main/java/io/quarkus/hibernate/reactive/panache/common/runtime/AbstractJpaOperations.java#L130). This check has been removed in Quarkus 3, this is probably a bug.\r\n\r\nAt the moment, I don&#39;t have a workaround, but it should work if you avoid the `.withBackoff` option.\r\n\r\n","title":"Quarkus Mutiny retry fails because on another thread","body":"<p>The problem is caused by <code>.withBackoff</code>.</p>\n<p>Hibernate Reactive checks two things when the session is used:</p>\n<ol>\n<li>The session must be called in a event-loop thread</li>\n<li>The session must be used in the same thread it has been created.</li>\n</ol>\n<p>In this case, the first check is failing because of a limitation (or bug) in Mutiny: when retrying using the <code>.withBackoff</code> option, the uni runs in a worker thread (and not in the event-loop thread the session was created).\nNote that even if you create a new session, the check will fail because the code it's not running in a worker-thread (and not a event-loop thread).</p>\n<p>This works with Quarkus 2.16 because there is a check that makes sure that <a href=\"https://github.com/quarkusio/quarkus/blob/62070cb257e78d10e5fdfee6b227dad22c3cf261/extensions/panache/hibernate-reactive-panache-common/runtime/src/main/java/io/quarkus/hibernate/reactive/panache/common/runtime/AbstractJpaOperations.java#L130\" rel=\"nofollow noreferrer\">everything runs in an event-loop thread</a>. This check has been removed in Quarkus 3, this is probably a bug.</p>\n<p>At the moment, I don't have a workaround, but it should work if you avoid the <code>.withBackoff</code> option.</p>\n"}],"owner":{"account_id":26727445,"reputation":15,"user_id":20330358,"display_name":"Slawomir"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":648,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76273708,"answer_count":2,"score":1,"last_activity_date":1684364966,"creation_date":1681814094,"question_id":76043558,"body_markdown":"I need to write code that will:\r\n- connect to external DB\r\n- query that DB for data\r\n- process this data, meaning create multiple entities in local DB\r\n\r\nI created a method like below:\r\n\r\n```\r\n  @WithSession\r\n  public Uni&lt;Void&gt; retrieveDataAndSaveInLocalDB() {\r\n    final Sample timer = Timer.start(meterRegistry);\r\n    return Uni.createFrom()\r\n        .deferred(() -&gt; Uni.createFrom()\r\n            .item(dbService::connectToDB))\r\n        .onFailure()\r\n        .retry()\r\n        .withBackOff(Duration.ofSeconds(3), Duration.ofMinutes(5))\r\n        .atMost(3)\r\n        .map(this::getListOfEntities)\r\n        .flatMap(entityRepository::persist)\r\n        .call(entityRepository::flush)\r\n        .invoke(() -&gt; timer.stop(meterRegistry.timer(&quot;timer&quot;)))\r\n        .invoke(() -&gt; Log.info(&quot;logged info&quot;));\r\n  }\r\n```\r\nWhen dbService::connectToDB throws an exception, I want to give it another go in a few seconds.\r\nThe problem I have is that when dbService::connectToDB throws an error, retries are done on another thread. Here are the logs:\r\n\r\n```\r\n2023-04-18 12:09:42,926 INFO  [DbService] (vert.x-eventloop-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@b931fa7\r\n2023-04-18 12:09:46,142 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@73903696\r\n2023-04-18 12:09:51,210 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@379aed2d\r\n2023-04-18 12:09:51,237 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (vert.x-eventloop-thread-1) HTTP Request to /sampleendpoint failed, error id: 8dc81df2-e526-4a64-a67d-bf04cbb9e580-1: io.smallrye.mutiny.CompositeException: Multiple exceptions caught:\r\n\t[Exception 0] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: &#39;vert.x-eventloop-thread-1&#39; current Thread [99]: &#39;executor-thread-1&#39;\r\n\t[Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: &#39;vert.x-eventloop-thread-1&#39; current Thread [99]: &#39;executor-thread-1&#39;\r\n\tat io.smallrye.mutiny.groups.UniOnItemOrFailure.lambda$call$1(UniOnItemOrFailure.java:75)\r\n\tat io.smallrye.context.impl.wrappers.SlowContextualBiFunction.apply(SlowContextualBiFunction.java:21)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:86)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnTermination$UniOnTerminationProcessor.onFailure(UniOnTermination.java:52)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.helpers.EmptyUniSubscription.propagateFailureEvent(EmptyUniSubscription.java:40)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:26)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\r\n\tat org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\r\n\tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnTermination.subscribe(UniOnTermination.java:21)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap.subscribe(UniOnItemOrFailureFlatMap.java:27)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:99)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forwardResult(UniCreateFromCompletionStage.java:58)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:887)\r\n\tat java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2325)\r\n\tat java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:144)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forward(UniCreateFromCompletionStage.java:51)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:35)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\r\n\tat org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\r\n\tat io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem$KnownItemSubscription.forward(UniCreateFromKnownItem.java:38)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem.subscribe(UniCreateFromKnownItem.java:23)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni.subscribe(UniOnItemTransformToUni.java:25)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\r\n\tat io.smallrye.mutiny.operators.uni.UniOnItemTransform$UniOnItemTransformProcessor.onItem(UniOnItemTransform.java:43)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromPublisher$PublisherSubscriber.onNext(UniCreateFromPublisher.java:70)\r\n\tat io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\r\n\tat io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\r\n\tat io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\r\n\tat io.smallrye.mutiny.subscription.SerializedSubscriber.onItem(SerializedSubscriber.java:74)\r\n\tat io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.onItem(MultiRetryWhenOp.java:111)\r\n\tat io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\r\n\tat io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromItemSupplier.subscribe(UniCreateFromItemSupplier.java:29)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromDeferredSupplier.subscribe(UniCreateFromDeferredSupplier.java:36)\r\n\tat io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\r\n\tat io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.request(UniToMultiPublisher.java:73)\r\n\tat io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.setOrSwitchUpstream(SwitchableSubscriptionSubscriber.java:205)\r\n\tat io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.onSubscribe(SwitchableSubscriptionSubscriber.java:107)\r\n\tat io.smallrye.mutiny.converters.uni.UniToMultiPublisher.subscribe(UniToMultiPublisher.java:25)\r\n\tat io.smallrye.mutiny.groups.MultiCreate$1.subscribe(MultiCreate.java:165)\r\n\tat io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.resubscribe(MultiRetryWhenOp.java:157)\r\n\tat io.smalliny.operators.multi.MultiRetryWhenOp$TriggerSubscriber.onNext(MultiRetryWhenOp.java:188)\r\n\tat io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\r\n\tat io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\r\n\tat io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapMainSubscriber.tryEmit(MultiConcatMapOp.java:182)\r\n\tat io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapInner.onItem(MultiConcatMapOp.java:285)\r\n\tat io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\r\n\tat io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\r\n\tat io.smallrye.mutiny.operators.uni.UniDelayOnItem$UniDelayOnItemProcessor.lambda$onItem$0(UniDelayOnItem.java:53)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2892)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2883)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$AbstractScheduledFuture.run(EnhancedQueueExecutor.java:2741)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tSuppressed: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: &#39;vert.x-eventloop-thread-1&#39; current Thread [99]: &#39;executor-thread-1&#39;\r\n\t\tat org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\r\n\t\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\r\n\t\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.checkOpenOrWaitingForAutoClose(AbstractSharedSessionContract.java:447)\r\n\t\tat org.hibernate.internal.SessionImpl.checkOpenOrWaitingForAutoClose(SessionImpl.java:616)\r\n\t\tat org.hibernate.internal.SessionImpl.closeWithoutOpenChecks(SessionImpl.java:410)\r\n\t\tat org.hibernate.internal.SessionImpl.close(SessionImpl.java:397)\r\n\t\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactiveClose(ReactiveSessionImpl.java:1738)\r\n\t\tat io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\r\n\t\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\r\n\t\t... 76 more\r\nCaused by: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: &#39;vert.x-eventloop-thread-1&#39; current Thread [99]: &#39;executor-thread-1&#39;\r\n\tat org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\r\n\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\r\n\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\r\n\tat org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactivePersist(ReactiveSessionImpl.java:833)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$2(CompletionStages.java:178)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$7(CompletionStages.java:409)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages$ArrayLoop.next(CompletionStages.java:483)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline.lambda$asyncWhile$1(AsyncTrampoline.java:215)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.unroll(AsyncTrampoline.java:121)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.trampoline(AsyncTrampoline.java:102)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:197)\r\n\tat org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:215)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:410)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:381)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:178)\r\n\tat org.hibernate.reactive.util.impl.CompletionStages.applyToAll(CompletionStages.java:505)\r\n\tat org.hibernate.reactive.mutiny.impl.MutinySessionImpl.lambda$persistAll$10(MutinySessionImpl.java:229)\r\n\tat io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\r\n\tat io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\r\n\t... 51 more\r\n\r\n```\r\n\r\nThe &quot;Connected&quot; line in logs comes from the body of dbService::connectToDB method.\r\n\r\nLogs show that the first execution is on the correct thread, which in my case is &#39;vert.x-eventloop-thread-4&#39;, but then the retries are executed on &#39;executor-thread-1&#39;. If an exception is not thrown in the first execution, all processing goes well. If the first exection fails, but one of the retries succeeds, the exception as above is thrown.\r\n\r\nWhat&#39;s wrong with my code? Starting a new session for each retry is not possible; Quarkus complains that a new session is not on a vert.x-eventloop-thread thread.\r\n\r\nMaybe it&#39;s also worth pointing out that when calling `serviceImpactRepository::persist` I actually want to persist a list of entities, not a single entity.\r\n\r\nI am using a new version of Quarkus (3.0.0.CR2) with Reactive Hibernate.\r\n","title":"Quarkus Mutiny retry fails because on another thread","body":"<p>I need to write code that will:</p>\n<ul>\n<li>connect to external DB</li>\n<li>query that DB for data</li>\n<li>process this data, meaning create multiple entities in local DB</li>\n</ul>\n<p>I created a method like below:</p>\n<pre><code>  @WithSession\n  public Uni&lt;Void&gt; retrieveDataAndSaveInLocalDB() {\n    final Sample timer = Timer.start(meterRegistry);\n    return Uni.createFrom()\n        .deferred(() -&gt; Uni.createFrom()\n            .item(dbService::connectToDB))\n        .onFailure()\n        .retry()\n        .withBackOff(Duration.ofSeconds(3), Duration.ofMinutes(5))\n        .atMost(3)\n        .map(this::getListOfEntities)\n        .flatMap(entityRepository::persist)\n        .call(entityRepository::flush)\n        .invoke(() -&gt; timer.stop(meterRegistry.timer(&quot;timer&quot;)))\n        .invoke(() -&gt; Log.info(&quot;logged info&quot;));\n  }\n</code></pre>\n<p>When dbService::connectToDB throws an exception, I want to give it another go in a few seconds.\nThe problem I have is that when dbService::connectToDB throws an error, retries are done on another thread. Here are the logs:</p>\n<pre><code>2023-04-18 12:09:42,926 INFO  [DbService] (vert.x-eventloop-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@b931fa7\n2023-04-18 12:09:46,142 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@73903696\n2023-04-18 12:09:51,210 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@379aed2d\n2023-04-18 12:09:51,237 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (vert.x-eventloop-thread-1) HTTP Request to /sampleendpoint failed, error id: 8dc81df2-e526-4a64-a67d-bf04cbb9e580-1: io.smallrye.mutiny.CompositeException: Multiple exceptions caught:\n    [Exception 0] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    [Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    at io.smallrye.mutiny.groups.UniOnItemOrFailure.lambda$call$1(UniOnItemOrFailure.java:75)\n    at io.smallrye.context.impl.wrappers.SlowContextualBiFunction.apply(SlowContextualBiFunction.java:21)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:86)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOnTermination$UniOnTerminationProcessor.onFailure(UniOnTermination.java:52)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.helpers.EmptyUniSubscription.propagateFailureEvent(EmptyUniSubscription.java:40)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:26)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\n    at org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnTermination.subscribe(UniOnTermination.java:21)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap.subscribe(UniOnItemOrFailureFlatMap.java:27)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:99)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forwardResult(UniCreateFromCompletionStage.java:58)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:887)\n    at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2325)\n    at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:144)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forward(UniCreateFromCompletionStage.java:51)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:35)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\n    at org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem$KnownItemSubscription.forward(UniCreateFromKnownItem.java:38)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem.subscribe(UniCreateFromKnownItem.java:23)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni.subscribe(UniOnItemTransformToUni.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransform$UniOnItemTransformProcessor.onItem(UniOnItemTransform.java:43)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromPublisher$PublisherSubscriber.onNext(UniCreateFromPublisher.java:70)\n    at io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\n    at io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.subscription.SerializedSubscriber.onItem(SerializedSubscriber.java:74)\n    at io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.onItem(MultiRetryWhenOp.java:111)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromItemSupplier.subscribe(UniCreateFromItemSupplier.java:29)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromDeferredSupplier.subscribe(UniCreateFromDeferredSupplier.java:36)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.request(UniToMultiPublisher.java:73)\n    at io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.setOrSwitchUpstream(SwitchableSubscriptionSubscriber.java:205)\n    at io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.onSubscribe(SwitchableSubscriptionSubscriber.java:107)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher.subscribe(UniToMultiPublisher.java:25)\n    at io.smallrye.mutiny.groups.MultiCreate$1.subscribe(MultiCreate.java:165)\n    at io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.resubscribe(MultiRetryWhenOp.java:157)\n    at io.smalliny.operators.multi.MultiRetryWhenOp$TriggerSubscriber.onNext(MultiRetryWhenOp.java:188)\n    at io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\n    at io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\n    at io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapMainSubscriber.tryEmit(MultiConcatMapOp.java:182)\n    at io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapInner.onItem(MultiConcatMapOp.java:285)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\n    at io.smallrye.mutiny.operators.uni.UniDelayOnItem$UniDelayOnItemProcessor.lambda$onItem$0(UniDelayOnItem.java:53)\n    at org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2892)\n    at org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2883)\n    at org.jboss.threads.EnhancedQueueExecutor$AbstractScheduledFuture.run(EnhancedQueueExecutor.java:2741)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n    Suppressed: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n        at org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\n        at org.hibernate.internal.AbstractSharedSessionContract.checkOpenOrWaitingForAutoClose(AbstractSharedSessionContract.java:447)\n        at org.hibernate.internal.SessionImpl.checkOpenOrWaitingForAutoClose(SessionImpl.java:616)\n        at org.hibernate.internal.SessionImpl.closeWithoutOpenChecks(SessionImpl.java:410)\n        at org.hibernate.internal.SessionImpl.close(SessionImpl.java:397)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactiveClose(ReactiveSessionImpl.java:1738)\n        at io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\n        at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\n        ... 76 more\nCaused by: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    at org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactivePersist(ReactiveSessionImpl.java:833)\n    at org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$2(CompletionStages.java:178)\n    at org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$7(CompletionStages.java:409)\n    at org.hibernate.reactive.util.impl.CompletionStages$ArrayLoop.next(CompletionStages.java:483)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.lambda$asyncWhile$1(AsyncTrampoline.java:215)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.unroll(AsyncTrampoline.java:121)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.trampoline(AsyncTrampoline.java:102)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:197)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:215)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:410)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:381)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:178)\n    at org.hibernate.reactive.util.impl.CompletionStages.applyToAll(CompletionStages.java:505)\n    at org.hibernate.reactive.mutiny.impl.MutinySessionImpl.lambda$persistAll$10(MutinySessionImpl.java:229)\n    at io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\n    ... 51 more\n\n</code></pre>\n<p>The &quot;Connected&quot; line in logs comes from the body of dbService::connectToDB method.</p>\n<p>Logs show that the first execution is on the correct thread, which in my case is 'vert.x-eventloop-thread-4', but then the retries are executed on 'executor-thread-1'. If an exception is not thrown in the first execution, all processing goes well. If the first exection fails, but one of the retries succeeds, the exception as above is thrown.</p>\n<p>What's wrong with my code? Starting a new session for each retry is not possible; Quarkus complains that a new session is not on a vert.x-eventloop-thread thread.</p>\n<p>Maybe it's also worth pointing out that when calling <code>serviceImpactRepository::persist</code> I actually want to persist a list of entities, not a single entity.</p>\n<p>I am using a new version of Quarkus (3.0.0.CR2) with Reactive Hibernate.</p>\n"},{"tags":["java","android","xml","user-interface","layout"],"answers":[{"comments":[{"owner":{"account_id":15882942,"reputation":215,"user_id":11460211,"display_name":"Nilesh Singh Dahiya"},"score":0,"creation_date":1684332234,"post_id":76272510,"comment_id":134503027,"body_markdown":"Let me correct, then i will accept this one is answer, thanks","body":"Let me correct, then i will accept this one is answer, thanks"}],"tags":[],"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684329195,"creation_date":1684329195,"answer_id":76272510,"question_id":76272445,"body_markdown":"Issue is with ```RadioGroup``` height . In your code , ```RadioGroup``` height is ```match_parent``` so replace ```android:layout_height=&quot;match_parent&quot;``` with ```android:layout_height=&quot;wrap_content&quot;``` for ```RadioGroup``` in xml file","title":"Layout Issue : getting layout height to match_parent only after soft keyboard present","body":"<p>Issue is with <code>RadioGroup</code> height . In your code , <code>RadioGroup</code> height is <code>match_parent</code> so replace <code>android:layout_height=&quot;match_parent&quot;</code> with <code>android:layout_height=&quot;wrap_content&quot;</code> for <code>RadioGroup</code> in xml file</p>\n"}],"owner":{"account_id":15882942,"reputation":215,"user_id":11460211,"display_name":"Nilesh Singh Dahiya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76272510,"answer_count":1,"score":1,"last_activity_date":1684364823,"creation_date":1684328768,"question_id":76272445,"body_markdown":"I am trying to create a single activity app that collects data using &quot;EditText&quot; and saves it into a Firebase Realtime Database. I already achieved everything I needed for this project. But after setting everything and getting one successful build, a new build with some changes in activity files gives me following layout issue. **It is fine showing every widget while soft keyboard is present**. If I close the keyboard, **it shrinks to top.** You can see following screenshots for reference. Thanks for trying to help me. The code I used is as follows.\r\n\r\n1. Without keyboard\r\n\r\n[![without keyboard][1]][1]\r\n\r\n\r\n2. While keyboard present\r\n\r\n[![with keyboard][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zme6Q.jpg\r\n  [2]: https://i.stack.imgur.com/FuaqB.jpg\r\n\r\n3.activity_main.xml\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;&gt;\r\n\r\n    &lt;ScrollView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:fillViewport=&quot;true&quot;&gt;\r\n\r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/parent_group&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;।। श्री गणेशाय नम:&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginTop=&quot;8dp&quot;\r\n        android:id=&quot;@+id/start_txt&quot;/&gt;\r\n\r\n\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbname&quot;\r\n        android:hint=&quot;वर / वधु का नाम &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/start_txt&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbpname&quot;\r\n        android:hint=&quot;पिता का नाम &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbname&quot; /&gt;\r\n\r\n                &lt;RadioGroup\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;match_parent&quot;\r\n                    android:id=&quot;@+id/genderrg&quot;\r\n                    android:orientation=&quot;horizontal&quot;\r\n                    android:layout_below=&quot;@+id/gbpname&quot;&gt;\r\n                &lt;RadioButton\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/rbmale&quot;\r\n                    android:text=&quot;वर&quot;\r\n                    android:layout_marginStart=&quot;10dp&quot;\r\n                    android:textSize=&quot;22sp&quot;\r\n                    android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n                    android:layout_weight=&quot;1&quot;/&gt;\r\n                &lt;RadioButton\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/rbfmale&quot;\r\n                    android:text=&quot;वधु&quot;\r\n                    android:layout_marginEnd=&quot;10dp&quot;\r\n                    android:textSize=&quot;22sp&quot;\r\n                    android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n                    android:layout_weight=&quot;1&quot;/&gt;\r\n\r\n                &lt;/RadioGroup&gt;\r\n\r\n\r\n\r\n\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbgotra&quot;\r\n        android:hint=&quot;गोत्र &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/genderrg&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbdob&quot;\r\n        android:hint=&quot;जन्‍म तिथि DD-MM-YYYY &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbgotra&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbheight&quot;\r\n        android:hint=&quot;ऊंचाई&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbdob&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbcolor&quot;\r\n        android:hint=&quot;रंग&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbheight&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbedu&quot;\r\n        android:hint=&quot;शिक्षा &quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbcolor&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbjob&quot;\r\n        android:hint=&quot;व्‍यवसाय&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbedu&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbhobby&quot;\r\n        android:hint=&quot;रूचि के विषय&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbjob&quot;/&gt;\r\n            &lt;EditText\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/gbmail&quot;\r\n                android:hint=&quot;ई-मेल&quot;\r\n                android:textSize=&quot;22sp&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:layout_marginStart=&quot;8dp&quot;\r\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n                android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n                android:layout_below=&quot;@+id/gbhobby&quot;/&gt;\r\n            &lt;EditText\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/gbphone&quot;\r\n                android:hint=&quot;मोबाईल नंबर&quot;\r\n                android:textSize=&quot;22sp&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:layout_marginStart=&quot;8dp&quot;\r\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n                android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n                android:layout_below=&quot;@+id/gbmail&quot;/&gt;\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/gbaddr&quot;\r\n        android:hint=&quot;स्‍थायी पता&quot;\r\n        android:textSize=&quot;22sp&quot;\r\n        android:padding=&quot;8dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:textColor=&quot;@android:color/holo_orange_dark&quot;\r\n        android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\r\n        android:layout_below=&quot;@+id/gbphone&quot;/&gt;\r\n\r\n\r\n            &lt;Button\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/add_details&quot;\r\n                android:text=&quot;जानकारी जोडें&quot;\r\n                android:layout_below=&quot;@id/gbaddr&quot;\r\n                android:layout_margin=&quot;8dp&quot;\r\n                android:textSize=&quot;22sp&quot;\r\n                android:backgroundTint=&quot;@android:color/holo_orange_dark&quot;/&gt;\r\n        \r\n\r\n&lt;/RelativeLayout&gt;\r\n    &lt;/ScrollView&gt;\r\n\r\n\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n\r\n4.MainActivity.java\r\n\r\n    package com.nilesh.rbndj;\r\n    \r\n    import android.os.Bundle;\r\n    import android.os.Handler;\r\n    \r\n    import com.google.android.gms.ads.AdRequest;\r\n    import com.google.android.gms.ads.AdView;\r\n    import com.google.android.material.snackbar.Snackbar;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.view.View;\r\n    \r\n    import androidx.core.view.WindowCompat;\r\n    import androidx.navigation.NavController;\r\n    import androidx.navigation.Navigation;\r\n    import androidx.navigation.ui.AppBarConfiguration;\r\n    import androidx.navigation.ui.NavigationUI;\r\n    \r\n    import com.google.firebase.database.ChildEventListener;\r\n    import com.google.firebase.database.DataSnapshot;\r\n    import com.google.firebase.database.DatabaseError;\r\n    import com.google.firebase.database.DatabaseReference;\r\n    import com.google.firebase.database.FirebaseDatabase;\r\n    import com.nilesh.rbndj.databinding.ActivityMainBinding;\r\n    \r\n    import android.view.Menu;\r\n    import android.view.MenuItem;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.RadioButton;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n    \r\n    \r\n    \r\n        private static final String TAG = &quot;MainActivity&quot;;\r\n        private AdView mAdView;\r\n    \r\n        EditText name,fname,gotra,dob,hght,colorr,edu,job,hobby,mail,phone,addr;\r\n        Button addButton;\r\n        RadioButton male,fmale;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n    //        mAdView = findViewById(R.id.adView);\r\n    //        AdRequest adRequest = new AdRequest.Builder().build();\r\n    //        mAdView.loadAd(adRequest);\r\n    \r\n    \r\n            name = findViewById(R.id.gbname);\r\n            fname = findViewById(R.id.gbpname);\r\n            gotra = findViewById(R.id.gbgotra);\r\n            dob = findViewById(R.id.gbdob);\r\n            hght = findViewById(R.id.gbheight);\r\n            colorr = findViewById(R.id.gbcolor);\r\n            edu = findViewById(R.id.gbedu);\r\n            job = findViewById(R.id.gbjob);\r\n            hobby = findViewById(R.id.gbhobby);\r\n            mail = findViewById(R.id.gbmail);\r\n            phone = findViewById(R.id.gbphone);\r\n            addr = findViewById(R.id.gbaddr);\r\n            addButton = findViewById(R.id.add_details);\r\n            male = findViewById(R.id.rbmale);\r\n            fmale = findViewById(R.id.rbfmale);\r\n    \r\n    \r\n            addButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Members members = new Members();\r\n                    DatabaseReference mDatabase;\r\n    \r\n                    mDatabase = FirebaseDatabase.getInstance().getReference();\r\n    \r\n                    String id, namee, fnamee, gotraa, dobb, hghtt, colorrr, eduu, jobbb, hobbyy, email, phonee, addrr, rbm, rbf;\r\n    \r\n    \r\n                    namee = name.getText().toString();\r\n                    fnamee = fname.getText().toString();\r\n                    gotraa = gotra.getText().toString();\r\n                    dobb = dob.getText().toString();\r\n                    hghtt = hght.getText().toString();\r\n                    colorrr = colorr.getText().toString();\r\n                    eduu = edu.getText().toString();\r\n                    jobbb = job.getText().toString();\r\n                    hobbyy = hobby.getText().toString();\r\n                    email = mail.getText().toString();\r\n                    phonee = phone.getText().toString();\r\n                    addrr = addr.getText().toString();\r\n                    rbm = male.getText().toString();\r\n                    rbf = fmale.getText().toString();\r\n    \r\n                    id = phonee;\r\n    \r\n    \r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;name&quot;).setValue(namee);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;father&quot;).setValue(fnamee);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gotra&quot;).setValue(gotraa);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;dob&quot;).setValue(dobb);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;height&quot;).setValue(hghtt);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;color&quot;).setValue(colorrr);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;education&quot;).setValue(eduu);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;job&quot;).setValue(jobbb);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;hobby&quot;).setValue(hobbyy);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;email&quot;).setValue(email);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;phone&quot;).setValue(phonee);\r\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;address&quot;).setValue(addrr);\r\n    \r\n                    if (male.isChecked()) {\r\n                        members.setGender(rbm);\r\n                        mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbm);\r\n    \r\n                    } else {\r\n                        members.setGender(rbf);\r\n                        mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbf);\r\n                    }\r\n    \r\n                    mDatabase.addChildEventListener(new ChildEventListener() {\r\n                        @Override\r\n                        public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n    //                        if (snapshot.hasChild(&quot;message&quot;)){\r\n    //                            clearForm();\r\n    //                        }\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n    \r\n                        }\r\n    \r\n                        @Override\r\n                        public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n    \r\n                        }\r\n    \r\n                        @Override\r\n                        public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n    \r\n                        }\r\n    \r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n    \r\n                        }\r\n                    });\r\n    \r\n    \r\n                }\r\n            });\r\n    \r\n    \r\n    \r\n    \r\n        }\r\n    \r\n    //    public  void  clearForm() {\r\n    //\r\n    //        ViewGroup group = (ViewGroup) findViewById(R.id.parent_group);\r\n    //        for (int i = 0, count = group.getChildCount(); i &lt; count; ++i) {\r\n    //            View view = group.getChildAt(i);\r\n    //            if (view instanceof EditText) {\r\n    //                ((EditText) view).setText(null);\r\n    //            }\r\n    //        }\r\n\r\n    }\r\n\r\n\r\nI hope this information is enough for you to help solve my issue.\r\n","title":"Layout Issue : getting layout height to match_parent only after soft keyboard present","body":"<p>I am trying to create a single activity app that collects data using &quot;EditText&quot; and saves it into a Firebase Realtime Database. I already achieved everything I needed for this project. But after setting everything and getting one successful build, a new build with some changes in activity files gives me following layout issue. <strong>It is fine showing every widget while soft keyboard is present</strong>. If I close the keyboard, <strong>it shrinks to top.</strong> You can see following screenshots for reference. Thanks for trying to help me. The code I used is as follows.</p>\n<ol>\n<li>Without keyboard</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/Zme6Q.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zme6Q.jpg\" alt=\"without keyboard\" /></a></p>\n<ol start=\"2\">\n<li>While keyboard present</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/FuaqB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FuaqB.jpg\" alt=\"with keyboard\" /></a></p>\n<p>3.activity_main.xml</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:fitsSystemWindows=&quot;true&quot;&gt;\n\n&lt;ScrollView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:fillViewport=&quot;true&quot;&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/parent_group&quot;&gt;\n\n&lt;TextView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;।। श्री गणेशाय नम:&quot;\n    android:textSize=&quot;22sp&quot;\n    android:gravity=&quot;center&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginTop=&quot;8dp&quot;\n    android:id=&quot;@+id/start_txt&quot;/&gt;\n\n\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbname&quot;\n    android:hint=&quot;वर / वधु का नाम &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/start_txt&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbpname&quot;\n    android:hint=&quot;पिता का नाम &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbname&quot; /&gt;\n\n            &lt;RadioGroup\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:id=&quot;@+id/genderrg&quot;\n                android:orientation=&quot;horizontal&quot;\n                android:layout_below=&quot;@+id/gbpname&quot;&gt;\n            &lt;RadioButton\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/rbmale&quot;\n                android:text=&quot;वर&quot;\n                android:layout_marginStart=&quot;10dp&quot;\n                android:textSize=&quot;22sp&quot;\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\n                android:layout_weight=&quot;1&quot;/&gt;\n            &lt;RadioButton\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/rbfmale&quot;\n                android:text=&quot;वधु&quot;\n                android:layout_marginEnd=&quot;10dp&quot;\n                android:textSize=&quot;22sp&quot;\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\n                android:layout_weight=&quot;1&quot;/&gt;\n\n            &lt;/RadioGroup&gt;\n\n\n\n\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbgotra&quot;\n    android:hint=&quot;गोत्र &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/genderrg&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbdob&quot;\n    android:hint=&quot;जन्‍म तिथि DD-MM-YYYY &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbgotra&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbheight&quot;\n    android:hint=&quot;ऊंचाई&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbdob&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbcolor&quot;\n    android:hint=&quot;रंग&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbheight&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbedu&quot;\n    android:hint=&quot;शिक्षा &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbcolor&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbjob&quot;\n    android:hint=&quot;व्‍यवसाय&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbedu&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbhobby&quot;\n    android:hint=&quot;रूचि के विषय&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbjob&quot;/&gt;\n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/gbmail&quot;\n            android:hint=&quot;ई-मेल&quot;\n            android:textSize=&quot;22sp&quot;\n            android:padding=&quot;8dp&quot;\n            android:layout_marginStart=&quot;8dp&quot;\n            android:textColor=&quot;@android:color/holo_orange_dark&quot;\n            android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n            android:layout_below=&quot;@+id/gbhobby&quot;/&gt;\n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/gbphone&quot;\n            android:hint=&quot;मोबाईल नंबर&quot;\n            android:textSize=&quot;22sp&quot;\n            android:padding=&quot;8dp&quot;\n            android:layout_marginStart=&quot;8dp&quot;\n            android:textColor=&quot;@android:color/holo_orange_dark&quot;\n            android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n            android:layout_below=&quot;@+id/gbmail&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbaddr&quot;\n    android:hint=&quot;स्‍थायी पता&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbphone&quot;/&gt;\n\n\n        &lt;Button\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/add_details&quot;\n            android:text=&quot;जानकारी जोडें&quot;\n            android:layout_below=&quot;@id/gbaddr&quot;\n            android:layout_margin=&quot;8dp&quot;\n            android:textSize=&quot;22sp&quot;\n            android:backgroundTint=&quot;@android:color/holo_orange_dark&quot;/&gt;\n    \n</code></pre>\n\n    \n\n<p>4.MainActivity.java</p>\n<pre><code>package com.nilesh.rbndj;\n\nimport android.os.Bundle;\nimport android.os.Handler;\n\nimport com.google.android.gms.ads.AdRequest;\nimport com.google.android.gms.ads.AdView;\nimport com.google.android.material.snackbar.Snackbar;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.view.View;\n\nimport androidx.core.view.WindowCompat;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\nimport androidx.navigation.ui.AppBarConfiguration;\nimport androidx.navigation.ui.NavigationUI;\n\nimport com.google.firebase.database.ChildEventListener;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.nilesh.rbndj.databinding.ActivityMainBinding;\n\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.RadioButton;\n\npublic class MainActivity extends AppCompatActivity {\n\n\n\n\n    private static final String TAG = &quot;MainActivity&quot;;\n    private AdView mAdView;\n\n    EditText name,fname,gotra,dob,hght,colorr,edu,job,hobby,mail,phone,addr;\n    Button addButton;\n    RadioButton male,fmale;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n//        mAdView = findViewById(R.id.adView);\n//        AdRequest adRequest = new AdRequest.Builder().build();\n//        mAdView.loadAd(adRequest);\n\n\n        name = findViewById(R.id.gbname);\n        fname = findViewById(R.id.gbpname);\n        gotra = findViewById(R.id.gbgotra);\n        dob = findViewById(R.id.gbdob);\n        hght = findViewById(R.id.gbheight);\n        colorr = findViewById(R.id.gbcolor);\n        edu = findViewById(R.id.gbedu);\n        job = findViewById(R.id.gbjob);\n        hobby = findViewById(R.id.gbhobby);\n        mail = findViewById(R.id.gbmail);\n        phone = findViewById(R.id.gbphone);\n        addr = findViewById(R.id.gbaddr);\n        addButton = findViewById(R.id.add_details);\n        male = findViewById(R.id.rbmale);\n        fmale = findViewById(R.id.rbfmale);\n\n\n        addButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Members members = new Members();\n                DatabaseReference mDatabase;\n\n                mDatabase = FirebaseDatabase.getInstance().getReference();\n\n                String id, namee, fnamee, gotraa, dobb, hghtt, colorrr, eduu, jobbb, hobbyy, email, phonee, addrr, rbm, rbf;\n\n\n                namee = name.getText().toString();\n                fnamee = fname.getText().toString();\n                gotraa = gotra.getText().toString();\n                dobb = dob.getText().toString();\n                hghtt = hght.getText().toString();\n                colorrr = colorr.getText().toString();\n                eduu = edu.getText().toString();\n                jobbb = job.getText().toString();\n                hobbyy = hobby.getText().toString();\n                email = mail.getText().toString();\n                phonee = phone.getText().toString();\n                addrr = addr.getText().toString();\n                rbm = male.getText().toString();\n                rbf = fmale.getText().toString();\n\n                id = phonee;\n\n\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;name&quot;).setValue(namee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;father&quot;).setValue(fnamee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gotra&quot;).setValue(gotraa);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;dob&quot;).setValue(dobb);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;height&quot;).setValue(hghtt);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;color&quot;).setValue(colorrr);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;education&quot;).setValue(eduu);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;job&quot;).setValue(jobbb);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;hobby&quot;).setValue(hobbyy);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;email&quot;).setValue(email);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;phone&quot;).setValue(phonee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;address&quot;).setValue(addrr);\n\n                if (male.isChecked()) {\n                    members.setGender(rbm);\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbm);\n\n                } else {\n                    members.setGender(rbf);\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbf);\n                }\n\n                mDatabase.addChildEventListener(new ChildEventListener() {\n                    @Override\n                    public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n//                        if (snapshot.hasChild(&quot;message&quot;)){\n//                            clearForm();\n//                        }\n                    }\n\n                    @Override\n                    public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n\n                    }\n\n                    @Override\n                    public void onChildRemoved(@NonNull DataSnapshot snapshot) {\n\n                    }\n\n                    @Override\n                    public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError error) {\n\n                    }\n                });\n\n\n            }\n        });\n\n\n\n\n    }\n\n//    public  void  clearForm() {\n//\n//        ViewGroup group = (ViewGroup) findViewById(R.id.parent_group);\n//        for (int i = 0, count = group.getChildCount(); i &lt; count; ++i) {\n//            View view = group.getChildAt(i);\n//            if (view instanceof EditText) {\n//                ((EditText) view).setText(null);\n//            }\n//        }\n\n}\n</code></pre>\n<p>I hope this information is enough for you to help solve my issue.</p>\n"},{"tags":["java","android","gps"],"comments":[{"owner":{"account_id":25256741,"reputation":67,"user_id":19088347,"display_name":"imad.nyc"},"score":0,"creation_date":1684338130,"post_id":76273864,"comment_id":134504614,"body_markdown":"Could you add more tags to add more information? What language is this, what framework, if any, are you using? There&#39;s a ton of ways to make android apps now so just saying it&#39;s an android question isn&#39;t specific.","body":"Could you add more tags to add more information? What language is this, what framework, if any, are you using? There&#39;s a ton of ways to make android apps now so just saying it&#39;s an android question isn&#39;t specific."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684338417,"post_id":76273864,"comment_id":134504691,"body_markdown":"`NullPointerException`","body":"<code>NullPointerException</code>"},{"owner":{"account_id":28229349,"reputation":25,"user_id":21578797,"display_name":"Luis Daniels"},"score":0,"creation_date":1684338439,"post_id":76273864,"comment_id":134504700,"body_markdown":"Tell me what you need to know. Because I don&#180;t know whatyou need @imad.nyc","body":"Tell me what you need to know. Because I don&#180;t know whatyou need @imad.nyc"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684338722,"post_id":76273864,"comment_id":134504782,"body_markdown":"`try to do: currentLocation.getLongitude(); ` ? That is nowhere in your code.","body":"<code>try to do: currentLocation.getLongitude(); </code> ? That is nowhere in your code."},{"owner":{"account_id":25256741,"reputation":67,"user_id":19088347,"display_name":"imad.nyc"},"score":0,"creation_date":1684339009,"post_id":76273864,"comment_id":134504857,"body_markdown":"@LuisDaniels, tags with the language you&#39;re using (Javascript, Kotlin, etc..) and framework (flutter, react, bazel) would be a good start. Right now it just looks like Javascript? though I&#39;m not sure, I&#39;m not familiar with Javascript.","body":"@LuisDaniels, tags with the language you&#39;re using (Javascript, Kotlin, etc..) and framework (flutter, react, bazel) would be a good start. Right now it just looks like Javascript? though I&#39;m not sure, I&#39;m not familiar with Javascript."},{"owner":{"account_id":28229349,"reputation":25,"user_id":21578797,"display_name":"Luis Daniels"},"score":0,"creation_date":1684339059,"post_id":76273864,"comment_id":134504869,"body_markdown":"I do it in other part. And there is where I get the message @blackapps","body":"I do it in other part. And there is where I get the message @blackapps"},{"owner":{"account_id":28229349,"reputation":25,"user_id":21578797,"display_name":"Luis Daniels"},"score":0,"creation_date":1684339099,"post_id":76273864,"comment_id":134504876,"body_markdown":"I&#180;m using java in android studio @imad.nyc","body":"I&#180;m using java in android studio @imad.nyc"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684344556,"post_id":76273864,"comment_id":134506051,"body_markdown":"You should of course post the code that produces the error. It makes no sense to post other code.","body":"You should of course post the code that produces the error. It makes no sense to post other code."}],"owner":{"account_id":28229349,"reputation":25,"user_id":21578797,"display_name":"Luis Daniels"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684364570,"creation_date":1684338007,"question_id":76273864,"body_markdown":"Here&#39;s the thing. I want to get my current location using GPS. I have done it like the following:\r\n\r\nMy function to get coordinates:\r\n\r\n    private void obtenerCoordenadas() {\r\n            locationListener = new Course.MyLocationListener();\r\n    \r\n            if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                // TODO: Consider calling\r\n                //    ActivityCompat#requestPermissions\r\n                // here to request the missing permissions, and then overriding\r\n                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                //                                          int[] grantResults)\r\n                // to handle the case where the user grants the permission. See the documentation\r\n                // for ActivityCompat#requestPermissions for more details.\r\n                return;\r\n            }\r\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\r\n            Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\r\n    \r\n            if (location != null) {\r\n               /* Toast.makeText(getBaseContext(), &quot;Cambio de localizaci&#243;n&quot;, Toast.LENGTH_SHORT).show();\r\n                lat.setText(&quot;Longitud funcion:&quot; + location.getLongitude());\r\n                lon.setText(&quot;Latitud funcion:&quot; + location.getLatitude());\r\n                currentLocation=location;\r\n    \r\n                textView.setText(&quot;Distancia: &quot;+distance);\r\n                previousLocation=currentLocation;*/\r\n    \r\n            } else {\r\n                Toast.makeText(this, &quot;sin localizacion&quot;, Toast.LENGTH_SHORT).show();\r\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\r\n            }\r\n    \r\n    \r\n        }\r\nand my listener:\r\n\r\n    private class MyLocationListener implements LocationListener {\r\n            @Override\r\n            public void onLocationChanged(Location loc) {\r\n                if (loc != null) {\r\n                    // Toast.makeText(getBaseContext(), &quot;Location changed : Lat: &quot; + loc.getLatitude() + &quot; Lng: &quot; + loc.getLongitude(), Toast.LENGTH_SHORT).show();\r\n                   /* Toast.makeText(Prueba.this, &quot;Cambio de localizaci&#243;n&quot;, Toast.LENGTH_SHORT).show();\r\n                    lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\r\n                    lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\r\n    \r\n    \r\n    \r\n                    String longitude = &quot;Longitude: &quot; + loc.getLongitude();\r\n                    Log.v(TAG, longitude);\r\n                    String latitude = &quot;Latitude: &quot; + loc.getLatitude();\r\n                    Log.v(TAG, latitude);\r\n                    currentLocation=loc;\r\n                    distance= (int)currentLocation.distanceTo(previousLocation);\r\n                    /*textView.setText(&quot;Distancia: &quot;+distance);*/\r\n                    previousLocation=currentLocation;\r\n                   /* lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\r\n                    lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\r\n    \r\n                    /*----------to get City-Name from coordinates ------------- */\r\n                    String cityName = null;\r\n                    Geocoder gcd = new Geocoder(getBaseContext(),\r\n                            Locale.getDefault());\r\n                    List&lt;Address&gt; addresses;\r\n                    try {\r\n                        addresses = gcd.getFromLocation(loc.getLatitude(), loc\r\n                                .getLongitude(), 1);\r\n                        if (addresses.size() &gt; 0)\r\n                            System.out.println(addresses.get(0).getLocality());\r\n                        cityName = addresses.get(0).getLocality();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n    \r\n                /*String s = longitude + &quot;\\n&quot; + latitude +\r\n                        &quot;\\n\\nMy Currrent City is: &quot; + cityName;\r\n                textViewCiudad.setText(s);*/\r\n                } else {\r\n                    if (ActivityCompat.checkSelfPermission(Course.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(Course.this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                        // TODO: Consider calling\r\n                        //    ActivityCompat#requestPermissions\r\n                        // here to request the missing permissions, and then overriding\r\n                        //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                        //                                          int[] grantResults)\r\n                        // to handle the case where the user grants the permission. See the documentation\r\n                        // for ActivityCompat#requestPermissions for more details.\r\n                        return;\r\n                    }\r\n                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 00, locationListener);\r\n    \r\n                }\r\n    \r\n    \r\n            }\r\n    \r\n            @Override\r\n            public void onProviderDisabled(String provider) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n    \r\n            @Override\r\n            public void onProviderEnabled(String provider) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n    \r\n    \r\n            @Override\r\n            public void onStatusChanged(String provider,\r\n                                        int status, Bundle extras) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n        }\r\n\r\nI want to get the location in my &quot;currentLocation&quot; variable but the problem is that when the function &quot;obtenerCoordenadas&quot; is called, and then I try to do: `currentLocation.getLongitude();` I get this error: `Attempt to invoke virtual method &#39;double android.location.Location.getLongitude()&#39; on a null object reference`\r\n\r\nI don&#39;t know why that happens. \r\nAny idea?\r\nThank you.","title":"I want to get the current location in Android using GPS","body":"<p>Here's the thing. I want to get my current location using GPS. I have done it like the following:</p>\n<p>My function to get coordinates:</p>\n<pre><code>private void obtenerCoordenadas() {\n        locationListener = new Course.MyLocationListener();\n\n        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            // TODO: Consider calling\n            //    ActivityCompat#requestPermissions\n            // here to request the missing permissions, and then overriding\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n            //                                          int[] grantResults)\n            // to handle the case where the user grants the permission. See the documentation\n            // for ActivityCompat#requestPermissions for more details.\n            return;\n        }\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\n        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\n\n        if (location != null) {\n           /* Toast.makeText(getBaseContext(), &quot;Cambio de localización&quot;, Toast.LENGTH_SHORT).show();\n            lat.setText(&quot;Longitud funcion:&quot; + location.getLongitude());\n            lon.setText(&quot;Latitud funcion:&quot; + location.getLatitude());\n            currentLocation=location;\n\n            textView.setText(&quot;Distancia: &quot;+distance);\n            previousLocation=currentLocation;*/\n\n        } else {\n            Toast.makeText(this, &quot;sin localizacion&quot;, Toast.LENGTH_SHORT).show();\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\n        }\n\n\n    }\n</code></pre>\n<p>and my listener:</p>\n<pre><code>private class MyLocationListener implements LocationListener {\n        @Override\n        public void onLocationChanged(Location loc) {\n            if (loc != null) {\n                // Toast.makeText(getBaseContext(), &quot;Location changed : Lat: &quot; + loc.getLatitude() + &quot; Lng: &quot; + loc.getLongitude(), Toast.LENGTH_SHORT).show();\n               /* Toast.makeText(Prueba.this, &quot;Cambio de localización&quot;, Toast.LENGTH_SHORT).show();\n                lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\n                lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\n\n\n\n                String longitude = &quot;Longitude: &quot; + loc.getLongitude();\n                Log.v(TAG, longitude);\n                String latitude = &quot;Latitude: &quot; + loc.getLatitude();\n                Log.v(TAG, latitude);\n                currentLocation=loc;\n                distance= (int)currentLocation.distanceTo(previousLocation);\n                /*textView.setText(&quot;Distancia: &quot;+distance);*/\n                previousLocation=currentLocation;\n               /* lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\n                lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\n\n                /*----------to get City-Name from coordinates ------------- */\n                String cityName = null;\n                Geocoder gcd = new Geocoder(getBaseContext(),\n                        Locale.getDefault());\n                List&lt;Address&gt; addresses;\n                try {\n                    addresses = gcd.getFromLocation(loc.getLatitude(), loc\n                            .getLongitude(), 1);\n                    if (addresses.size() &gt; 0)\n                        System.out.println(addresses.get(0).getLocality());\n                    cityName = addresses.get(0).getLocality();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n\n            /*String s = longitude + &quot;\\n&quot; + latitude +\n                    &quot;\\n\\nMy Currrent City is: &quot; + cityName;\n            textViewCiudad.setText(s);*/\n            } else {\n                if (ActivityCompat.checkSelfPermission(Course.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(Course.this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    // TODO: Consider calling\n                    //    ActivityCompat#requestPermissions\n                    // here to request the missing permissions, and then overriding\n                    //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                    //                                          int[] grantResults)\n                    // to handle the case where the user grants the permission. See the documentation\n                    // for ActivityCompat#requestPermissions for more details.\n                    return;\n                }\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 00, locationListener);\n\n            }\n\n\n        }\n\n        @Override\n        public void onProviderDisabled(String provider) {\n            // TODO Auto-generated method stub\n        }\n\n        @Override\n        public void onProviderEnabled(String provider) {\n            // TODO Auto-generated method stub\n        }\n\n\n        @Override\n        public void onStatusChanged(String provider,\n                                    int status, Bundle extras) {\n            // TODO Auto-generated method stub\n        }\n    }\n</code></pre>\n<p>I want to get the location in my &quot;currentLocation&quot; variable but the problem is that when the function &quot;obtenerCoordenadas&quot; is called, and then I try to do: <code>currentLocation.getLongitude();</code> I get this error: <code>Attempt to invoke virtual method 'double android.location.Location.getLongitude()' on a null object reference</code></p>\n<p>I don't know why that happens.\nAny idea?\nThank you.</p>\n"},{"tags":["java","java.util.scanner","charat","binomial-theorem"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1684347114,"post_id":76275028,"comment_id":134506602,"body_markdown":"I don&#39;t understand the purpose of your `error` variable which is only ever set to false.","body":"I don&#39;t understand the purpose of your <code>error</code> variable which is only ever set to false."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1684347439,"post_id":76275028,"comment_id":134506652,"body_markdown":"Save the input to a string, use a regular expression to parse it and capture the individual elements into groups. What exact input do you expect?","body":"Save the input to a string, use a regular expression to parse it and capture the individual elements into groups. What exact input do you expect?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684347455,"post_id":76275028,"comment_id":134506659,"body_markdown":"To clarify your question, you&#39;re requesting from the user to enter just 1 character and 1 number?","body":"To clarify your question, you&#39;re requesting from the user to enter just 1 character and 1 number?"},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684347554,"post_id":76275028,"comment_id":134506685,"body_markdown":"@khelwood it didn&#39;t get copied correctly wait","body":"@khelwood it didn&#39;t get copied correctly wait"},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1684347597,"post_id":76275028,"comment_id":134506693,"body_markdown":"First problem, you&#39;re using the parameter `x` as a limit in `for(long i = 1; i&lt;=x ; i++)`, but within the loop you&#39;re changing `x*=i`. `x` will increase faster than `i`, and the loop won&#39;t work. Use another variable (e.g. `var xf = x`) for the return value, and declare your parameter as `final long x` to ensure it&#39;s not changed.","body":"First problem, you&#39;re using the parameter <code>x</code> as a limit in <code>for(long i = 1; i&lt;=x ; i++)</code>, but within the loop you&#39;re changing <code>x*=i</code>. <code>x</code> will increase faster than <code>i</code>, and the loop won&#39;t work. Use another variable (e.g. <code>var xf = x</code>) for the return value, and declare your parameter as <code>final long x</code> to ensure it&#39;s not changed."},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684347607,"post_id":76275028,"comment_id":134506697,"body_markdown":"@Reilas for now, only one number, space, and a single digit veriable","body":"@Reilas for now, only one number, space, and a single digit veriable"},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684347655,"post_id":76275028,"comment_id":134506703,"body_markdown":"@JohnBayko yup kk","body":"@JohnBayko yup kk"},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1684347732,"post_id":76275028,"comment_id":134506718,"body_markdown":"`error` isn&#39;t being used correctly. Get the base case working first, then add error handling.","body":"<code>error</code> isn&#39;t being used correctly. Get the base case working first, then add error handling."},{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":0,"creation_date":1684348078,"post_id":76275028,"comment_id":134506796,"body_markdown":"@JohnBayko yea done","body":"@JohnBayko yea done"},{"owner":{"account_id":2555632,"reputation":101,"user_id":4430492,"display_name":"John Douma"},"score":0,"creation_date":1686170375,"post_id":76275028,"comment_id":134764235,"body_markdown":"You should initialize xf to be $1$ in your factorial program. It looks like this will return $(x!)x$","body":"You should initialize xf to be $1$ in your factorial program. It looks like this will return $(x!)x$"}],"answers":[{"comments":[{"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"score":1,"creation_date":1684348451,"post_id":76275147,"comment_id":134506858,"body_markdown":"yes StringTokeniser  class can be used here as well as sc.substring","body":"yes StringTokeniser  class can be used here as well as sc.substring"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1684387769,"post_id":76275147,"comment_id":134511554,"body_markdown":"I would *prefer* a `Scanner` instead of `StringTokenizer` - it separates by whitespaces and also can parse integer (and is a bit newer, or less older)","body":"I would <i>prefer</i> a <code>Scanner</code> instead of <code>StringTokenizer</code> - it separates by whitespaces and also can parse integer (and is a bit newer, or less older)"},{"owner":{"account_id":27486633,"reputation":150,"user_id":20972787,"display_name":"JustaNobody"},"score":0,"creation_date":1684430275,"post_id":76275147,"comment_id":134519890,"body_markdown":"@user16320675 Yeah using delimiter would be good for replacing stringtokenizer","body":"@user16320675 Yeah using delimiter would be good for replacing stringtokenizer"}],"tags":[],"owner":{"account_id":27486633,"reputation":150,"user_id":20972787,"display_name":"JustaNobody"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684348308,"creation_date":1684347794,"answer_id":76275147,"question_id":76275028,"body_markdown":"You can read a string and then use stringtokenizer to seperate with black spaces. Then use nextToken() to get the integer and variable seperately.\r\n\r\n`Long.parseLong()` to convert string to long\r\n\r\n```\r\nimport java.util.*;\r\nclass test{\r\n\tpublic static void main(String args[]){\r\n\t\tString str = &quot;12 w&quot;;\r\n\t\tStringTokenizer st = new StringTokenizer(str,&quot; &quot;);\r\n\t\tint x = Integer.parseInt(st.nextToken());\r\n\t\tstr=st.nextToken();\r\n\t\tSystem.out.println(str+&quot;-&quot;+x);\r\n\t}\r\n}\r\n```\r\nHere I used int, you can use long aswell","title":"Finding character at particular location of String","body":"<p>You can read a string and then use stringtokenizer to seperate with black spaces. Then use nextToken() to get the integer and variable seperately.</p>\n<p><code>Long.parseLong()</code> to convert string to long</p>\n<pre><code>import java.util.*;\nclass test{\n    public static void main(String args[]){\n        String str = &quot;12 w&quot;;\n        StringTokenizer st = new StringTokenizer(str,&quot; &quot;);\n        int x = Integer.parseInt(st.nextToken());\n        str=st.nextToken();\n        System.out.println(str+&quot;-&quot;+x);\n    }\n}\n</code></pre>\n<p>Here I used int, you can use long aswell</p>\n"},{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1684356800,"post_id":76275167,"comment_id":134508461,"body_markdown":"`a.substring(indexOf + 1).charAt(0)` would be the same as `a.charAt(indexOf + 1)` - just more method call and intermediate `String` created || In *production* code you would also check if `indexOf` is not `-1`...","body":"<code>a.substring(indexOf + 1).charAt(0)</code> would be the same as <code>a.charAt(indexOf + 1)</code> - just more method call and intermediate <code>String</code> created || In <i>production</i> code you would also check if <code>indexOf</code> is not <code>-1</code>..."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684363041,"post_id":76275167,"comment_id":134509442,"body_markdown":"@user16320675, you&#39;re right, I overlooked that.  I made the change to my answer.","body":"@user16320675, you&#39;re right, I overlooked that.  I made the change to my answer."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684362981,"creation_date":1684347966,"answer_id":76275167,"question_id":76275028,"body_markdown":"You&#39;ll only need one `Scanner` to get the input, which you do with `a = sc.nextLine()`.\r\n\r\nFrom there, find the index of the space, and use the `String.substring` method to derive each value.\r\n\r\n```java\r\nScanner sc = new Scanner(System.in) ;\r\nboolean error = false ;\r\nString a = &quot;&quot; ;\r\ndo {\r\n    if(error)\r\n    {\r\n        System.out.println(&quot;Error; Please try again&quot;) ;\r\n        error = false ;\r\n    }\r\n    System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\r\n    a = sc.nextLine() ;\r\n} while(error) ;\r\n\r\nsc.close() ;\r\n\r\nint indexOf = a.indexOf(&#39; &#39;);\r\nlong number = Long.parseLong(a.substring(0, indexOf));\r\nchar variable = a.charAt(indexOf + 1);\r\n```","title":"Finding character at particular location of String","body":"<p>You'll only need one <code>Scanner</code> to get the input, which you do with <code>a = sc.nextLine()</code>.</p>\n<p>From there, find the index of the space, and use the <code>String.substring</code> method to derive each value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in) ;\nboolean error = false ;\nString a = &quot;&quot; ;\ndo {\n    if(error)\n    {\n        System.out.println(&quot;Error; Please try again&quot;) ;\n        error = false ;\n    }\n    System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\n    a = sc.nextLine() ;\n} while(error) ;\n\nsc.close() ;\n\nint indexOf = a.indexOf(' ');\nlong number = Long.parseLong(a.substring(0, indexOf));\nchar variable = a.charAt(indexOf + 1);\n</code></pre>\n"}],"owner":{"account_id":22223630,"reputation":73,"user_id":16460888,"display_name":"Super Coder"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76275167,"answer_count":2,"score":1,"last_activity_date":1684362981,"creation_date":1684346808,"question_id":76275028,"body_markdown":"As a part of a Binomial expansion program, I created a Scanner class (`sc`) on an entered **number + variable**, and another (`scan`)on the first *term* (*a* in **(a+b)&lt;sup&gt;n&lt;/sup&gt;**)\r\n\r\nHere&#39;s my program till now :\r\n\r\n\r\n``` java\r\nimport java.util.* ;\r\npublic class binomial_expansion\r\n{\r\n    public static long factorial(long x)\r\n    {\r\n        long xf = x ;\r\n        for(long i = 1; i&lt;=x ; i++)\r\n        {\r\n            xf*=i ;\r\n        }\r\n        return xf ;\r\n    }\r\n    \r\n    public static double C(long n, long r)\r\n    {\r\n        double c = factorial(n)/(factorial(n-r)*factorial(r)) ;\r\n        return c ;\r\n    }\r\n    \r\n    public static void main()\r\n    {\r\n        Scanner sc = new Scanner(System.in) ;\r\n        boolean error = false ;\r\n        String a = &quot;&quot; ;\r\n        do {\r\n            if(error)\r\n            {\r\n                System.out.println(&quot;Error; Please try again&quot;) ;\r\n                error = false ;\r\n            }\r\n            System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\r\n            a = sc.nextLine() ;\r\n            if(a==&quot;&quot;) error = true ;\r\n        } while(error) ;\r\n        \r\n        sc.close() ;\r\n        Scanner scan = new Scanner(a) ;\r\n        long x = scan.nextLong() ;\r\n        long x1 = scan.next().charAt(0) ;\r\n    }\r\n}\r\n```\r\n\r\n&lt;br&gt;\r\nThe problem with creating a character variable using `.next().charAt(index)` is that the index number of the character (the single variable) is not known in the string (the length of the integer is not known), and also that the blank space has to be omitted which was entered by the user to separate the integer literal and the character literal. How can the character variable containing the single-digit variable be made ?","title":"Finding character at particular location of String","body":"<p>As a part of a Binomial expansion program, I created a Scanner class (<code>sc</code>) on an entered <strong>number + variable</strong>, and another (<code>scan</code>)on the first <em>term</em> (<em>a</em> in <strong>(a+b)<sup>n</sup></strong>)</p>\n<p>Here's my program till now :</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.* ;\npublic class binomial_expansion\n{\n    public static long factorial(long x)\n    {\n        long xf = x ;\n        for(long i = 1; i&lt;=x ; i++)\n        {\n            xf*=i ;\n        }\n        return xf ;\n    }\n    \n    public static double C(long n, long r)\n    {\n        double c = factorial(n)/(factorial(n-r)*factorial(r)) ;\n        return c ;\n    }\n    \n    public static void main()\n    {\n        Scanner sc = new Scanner(System.in) ;\n        boolean error = false ;\n        String a = &quot;&quot; ;\n        do {\n            if(error)\n            {\n                System.out.println(&quot;Error; Please try again&quot;) ;\n                error = false ;\n            }\n            System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\n            a = sc.nextLine() ;\n            if(a==&quot;&quot;) error = true ;\n        } while(error) ;\n        \n        sc.close() ;\n        Scanner scan = new Scanner(a) ;\n        long x = scan.nextLong() ;\n        long x1 = scan.next().charAt(0) ;\n    }\n}\n</code></pre>\n<br>\nThe problem with creating a character variable using `.next().charAt(index)` is that the index number of the character (the single variable) is not known in the string (the length of the integer is not known), and also that the blank space has to be omitted which was entered by the user to separate the integer literal and the character literal. How can the character variable containing the single-digit variable be made ?\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1684351307,"post_id":76275529,"comment_id":134507447,"body_markdown":"I don&#39;t see any attempt at splitting. Are you looking for the `String.split()` method?","body":"I don&#39;t see any attempt at splitting. Are you looking for the <code>String.split()</code> method?"},{"owner":{"account_id":26242166,"reputation":11,"user_id":19916310,"display_name":"Gojo"},"score":0,"creation_date":1684351396,"post_id":76275529,"comment_id":134507464,"body_markdown":"yes not sure how to split as splitting is coming as &quot;[admin&quot;, &quot;user]&quot;","body":"yes not sure how to split as splitting is coming as &quot;[admin&quot;, &quot;user]&quot;"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684352386,"post_id":76275529,"comment_id":134507665,"body_markdown":"To clarify your question, `getRoles` is a list of comma-separated strings, each of which you&#39;d like to expand into one list, one value per index?","body":"To clarify your question, <code>getRoles</code> is a list of comma-separated strings, each of which you&#39;d like to expand into one list, one value per index?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684361629,"post_id":76275529,"comment_id":134509245,"body_markdown":"This sounds like an [XY](https://xyproblem.info/) problem.","body":"This sounds like an <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">XY</a> problem."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684556757,"post_id":76275529,"comment_id":134537941,"body_markdown":"@Gojo, can you provide the `buildRolesList` method?","body":"@Gojo, can you provide the <code>buildRolesList</code> method?"}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684353588,"creation_date":1684352205,"answer_id":76275649,"question_id":76275529,"body_markdown":"Suppose you have a list of strings like `&quot;[admin, user]&quot;`. Then you do it almost right, just forget to split a string to individual roles.\r\n\r\n```java\r\npublic static void main(String... args) {\r\n    List&lt;String&gt; list = List.of(&quot;[admin, user]&quot;,\r\n                                &quot;[owner, developer]&quot;);\r\n\r\n    Set&lt;String&gt; roles = getRoles(list);\r\n    System.out.println(roles);  // [owner, admin, developer, user]\r\n}\r\n\r\npublic static Set&lt;String&gt; getRoles(List&lt;String&gt; list) {\r\n    return list.stream()\r\n               .map(String::toLowerCase)\r\n               .map(Foo::getRoles)\r\n               .flatMap(Set::stream)\r\n               .collect(Collectors.toSet());\r\n}\r\n\r\nprivate static Set&lt;String&gt; getRoles(String str) {\r\n    return Stream.of(str)\r\n                 .map(s -&gt; s.replace(&quot;[&quot;, &quot;&quot;))\r\n                 .map(s -&gt; s.replace(&quot;]&quot;, &quot;&quot;))\r\n                 .map(s -&gt; s.split(&quot;\\\\s*,\\\\s*&quot;))\r\n                 .flatMap(Arrays::stream)\r\n                 .collect(Collectors.toSet());\r\n}\r\n```","title":"how to split one list value to elements","body":"<p>Suppose you have a list of strings like <code>&quot;[admin, user]&quot;</code>. Then you do it almost right, just forget to split a string to individual roles.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    List&lt;String&gt; list = List.of(&quot;[admin, user]&quot;,\n                                &quot;[owner, developer]&quot;);\n\n    Set&lt;String&gt; roles = getRoles(list);\n    System.out.println(roles);  // [owner, admin, developer, user]\n}\n\npublic static Set&lt;String&gt; getRoles(List&lt;String&gt; list) {\n    return list.stream()\n               .map(String::toLowerCase)\n               .map(Foo::getRoles)\n               .flatMap(Set::stream)\n               .collect(Collectors.toSet());\n}\n\nprivate static Set&lt;String&gt; getRoles(String str) {\n    return Stream.of(str)\n                 .map(s -&gt; s.replace(&quot;[&quot;, &quot;&quot;))\n                 .map(s -&gt; s.replace(&quot;]&quot;, &quot;&quot;))\n                 .map(s -&gt; s.split(&quot;\\\\s*,\\\\s*&quot;))\n                 .flatMap(Arrays::stream)\n                 .collect(Collectors.toSet());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684362898,"creation_date":1684361071,"answer_id":76276478,"question_id":76275529,"body_markdown":"&gt;how to split one list value to elements\r\n\r\nIt looks like you have a list of roles in pairs and want to break that up into separate lists of size 2. `List.toString()` So can&#39;t you instead return a `List&lt;String&gt;` of all the roles and just copy in pairs.  Here is how it would work.\r\n```\r\nList&lt;List&lt;String&gt;&gt; roles = List.of(&quot;admin&quot;, &quot;user&quot;, \r\n                                   &quot;steno&quot;,&quot;typist&quot;));\r\n\r\nList&lt;List&lt;String&gt;&gt; roleLists = new ArrayList&lt;&gt;();\r\n\r\nif (roles.size()%2 != 0) {\r\n     System.out.println(&quot;Roles must be in pairs&quot;);\r\n} else {\r\n     for (int i = 0; i &lt; roles.size(); i+=2) {\r\n        roleLists.add(new ArrayList&lt;&gt;(List.of(roles.get(i),roles.get(i+1))));\r\n     }\r\n}\r\n```\r\nThen when you get the list of lists you can retrieve the values as follows:\r\n```\r\nfor(List&lt;String&gt; lst : roles) {\r\n    System.out.println(&quot;List -&gt; &quot; + lst);\r\n    for(int i = 0; i &lt; lst.size(); i++) {\r\n         System.out.printf(&quot;   %d -&gt; %s%n&quot;, i, lst.get(i));\r\n    }\r\n}\r\n```\r\nprints\r\n```\r\nList -&gt; [admin, user]\r\n   0 -&gt; admin\r\n   1 -&gt; user\r\nList -&gt; [steno, typist]\r\n   0 -&gt; steno\r\n   1 -&gt; typist\r\n\r\n```\r\nOtherwise, just do the following:\r\n```\r\nString s = &quot;[admin, user]&quot;;\r\n\r\nString[] result = s.replaceAll(&quot;[\\\\[\\\\]\\\\s+]+&quot;,&quot;&quot;).split(&quot;,&quot;);\r\nfor (int i = 0; i &lt; result.length; i++) {\r\n    System.out.printf(&quot;%d -&gt; %s%n&quot;, i, result[i]);\r\n}\r\n```\r\nprints\r\n```\r\n0 -&gt; admin\r\n1 -&gt; user\r\n","title":"how to split one list value to elements","body":"<blockquote>\n<p>how to split one list value to elements</p>\n</blockquote>\n<p>It looks like you have a list of roles in pairs and want to break that up into separate lists of size 2. <code>List.toString()</code> So can't you instead return a <code>List&lt;String&gt;</code> of all the roles and just copy in pairs.  Here is how it would work.</p>\n<pre><code>List&lt;List&lt;String&gt;&gt; roles = List.of(&quot;admin&quot;, &quot;user&quot;, \n                                   &quot;steno&quot;,&quot;typist&quot;));\n\nList&lt;List&lt;String&gt;&gt; roleLists = new ArrayList&lt;&gt;();\n\nif (roles.size()%2 != 0) {\n     System.out.println(&quot;Roles must be in pairs&quot;);\n} else {\n     for (int i = 0; i &lt; roles.size(); i+=2) {\n        roleLists.add(new ArrayList&lt;&gt;(List.of(roles.get(i),roles.get(i+1))));\n     }\n}\n</code></pre>\n<p>Then when you get the list of lists you can retrieve the values as follows:</p>\n<pre><code>for(List&lt;String&gt; lst : roles) {\n    System.out.println(&quot;List -&gt; &quot; + lst);\n    for(int i = 0; i &lt; lst.size(); i++) {\n         System.out.printf(&quot;   %d -&gt; %s%n&quot;, i, lst.get(i));\n    }\n}\n</code></pre>\n<p>prints</p>\n<pre><code>List -&gt; [admin, user]\n   0 -&gt; admin\n   1 -&gt; user\nList -&gt; [steno, typist]\n   0 -&gt; steno\n   1 -&gt; typist\n\n</code></pre>\n<p>Otherwise, just do the following:</p>\n<pre><code>String s = &quot;[admin, user]&quot;;\n\nString[] result = s.replaceAll(&quot;[\\\\[\\\\]\\\\s+]+&quot;,&quot;&quot;).split(&quot;,&quot;);\nfor (int i = 0; i &lt; result.length; i++) {\n    System.out.printf(&quot;%d -&gt; %s%n&quot;, i, result[i]);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>0 -&gt; admin\n1 -&gt; user\n</code></pre>\n"}],"owner":{"account_id":26242166,"reputation":11,"user_id":19916310,"display_name":"Gojo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1684362898,"creation_date":1684351089,"question_id":76275529,"body_markdown":"How to get elements from the below list:\r\n```\r\nList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n\r\nList&lt;String&gt; getRoles = \r\nbuildRolesList(list, role).stream()\r\n    .map(String::trim)\r\n    .map(String::toLowerCase)\r\n    .map(str-&gt;str.replace ( &quot;[&quot;,&quot;&quot; ))\r\n    .map(str-&gt;str.replace ( &quot;]&quot;,&quot;&quot; ))\r\n    .collect( Collectors.toCollection ( ArrayList::new ) );\r\n```\r\n`getRoles = &quot;[admin, user]&quot;` ---this is the list I am getting, but the list wanted is `[&quot;admin&quot;,&quot;user&quot;]` splitted\r\n\r\nHow to achieve the list values as `[0---&gt;&quot;admin&quot;,1---&gt;&quot;user&quot;]`\r\n\r\nThe above result is coming in size 1 but wanted it to be size 2","title":"how to split one list value to elements","body":"<p>How to get elements from the below list:</p>\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\nList&lt;String&gt; getRoles = \nbuildRolesList(list, role).stream()\n    .map(String::trim)\n    .map(String::toLowerCase)\n    .map(str-&gt;str.replace ( &quot;[&quot;,&quot;&quot; ))\n    .map(str-&gt;str.replace ( &quot;]&quot;,&quot;&quot; ))\n    .collect( Collectors.toCollection ( ArrayList::new ) );\n</code></pre>\n<p><code>getRoles = &quot;[admin, user]&quot;</code> ---this is the list I am getting, but the list wanted is <code>[&quot;admin&quot;,&quot;user&quot;]</code> splitted</p>\n<p>How to achieve the list values as <code>[0---&gt;&quot;admin&quot;,1---&gt;&quot;user&quot;]</code></p>\n<p>The above result is coming in size 1 but wanted it to be size 2</p>\n"},{"tags":["java","oop","program-entry-point"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1684359638,"post_id":76276343,"comment_id":134508975,"body_markdown":"Where is your `PrivateMain.class` file located and why is your `PrivateMain.java` file not located inside a directory `sample/`?","body":"Where is your <code>PrivateMain.class</code> file located and why is your <code>PrivateMain.java</code> file not located inside a directory <code>sample&#47;</code>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684360391,"post_id":76276343,"comment_id":134509086,"body_markdown":"`javac -d . PrivateMain.java;java sample.PrivateMain`","body":"<code>javac -d . PrivateMain.java;java sample.PrivateMain</code>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684362436,"creation_date":1684362436,"answer_id":76276570,"question_id":76276343,"body_markdown":"## `java PrivateMain` does not work\r\n\r\nThat&#39;s because your class isn&#39;t called that. It&#39;s called `sample.PrivateMain`. If you use `java` in a &#39;I shall give you the name of my class&#39; mode (i.e. not via the `-jar` or `-jmod` launch options), it __has to be__ fully qualified.\r\n\r\n## `java sample.PrivateMain` does not work\r\n\r\nclass names are turned into paths by turning dots into slashes and appending `.class`. In other words, if you run `java sample.PrivateMain`, java starts, and checks every dir in the classpath by __appending `sample/PrivateMain.class` to it__. This doesn&#39;t find your class because your class isn&#39;t in sample/PrivateMain - it&#39;s in ./PrivateMain which isn&#39;t where java is going to look at all.\r\n\r\n## How to fix it\r\n\r\nFor throwaway projects like this, get rid of the `package` declaration. While you&#39;re at it, you can just run `java MyMain.java` - no need to involve `javac`. Once you graduate to more serious projects with multiple source files, and especially, multiple packages, ditch this command line `javac` and `java` stuff and use a build system such as maven or gradle.\r\n\r\nIf you must, for some strange reason, use a package statement, set up your project like so:\r\n\r\n```\r\ncd G:\\javaPract\r\nmkdir sample\r\ncd sample\r\n# put your PrivateMain.java file here\r\njavac PrivateMain.java\r\ncd ..\r\njava -cp . sample.PrivateMain\r\n```\r\n\r\nkey point is, file has to be in `G:\\javaPract\\sample\\PrivateMain.class`, and `G:\\javaPract` (__not__ `G:\\javaPract\\sample`!) has to be on the classpath. Then run `java sample.PrivateMain`.\r\n\r\nGenerally, do not use `CLASSPATH`, just specify with the `-cp` parameter. `CLASSPATH` is a global variable and as a general rule it&#39;s bizarre to limit your computer to only run one java application ever.\r\n\r\n","title":"Unable to execute simple java file from windows command line","body":"<h2><code>java PrivateMain</code> does not work</h2>\n<p>That's because your class isn't called that. It's called <code>sample.PrivateMain</code>. If you use <code>java</code> in a 'I shall give you the name of my class' mode (i.e. not via the <code>-jar</code> or <code>-jmod</code> launch options), it <strong>has to be</strong> fully qualified.</p>\n<h2><code>java sample.PrivateMain</code> does not work</h2>\n<p>class names are turned into paths by turning dots into slashes and appending <code>.class</code>. In other words, if you run <code>java sample.PrivateMain</code>, java starts, and checks every dir in the classpath by <strong>appending <code>sample/PrivateMain.class</code> to it</strong>. This doesn't find your class because your class isn't in sample/PrivateMain - it's in ./PrivateMain which isn't where java is going to look at all.</p>\n<h2>How to fix it</h2>\n<p>For throwaway projects like this, get rid of the <code>package</code> declaration. While you're at it, you can just run <code>java MyMain.java</code> - no need to involve <code>javac</code>. Once you graduate to more serious projects with multiple source files, and especially, multiple packages, ditch this command line <code>javac</code> and <code>java</code> stuff and use a build system such as maven or gradle.</p>\n<p>If you must, for some strange reason, use a package statement, set up your project like so:</p>\n<pre><code>cd G:\\javaPract\nmkdir sample\ncd sample\n# put your PrivateMain.java file here\njavac PrivateMain.java\ncd ..\njava -cp . sample.PrivateMain\n</code></pre>\n<p>key point is, file has to be in <code>G:\\javaPract\\sample\\PrivateMain.class</code>, and <code>G:\\javaPract</code> (<strong>not</strong> <code>G:\\javaPract\\sample</code>!) has to be on the classpath. Then run <code>java sample.PrivateMain</code>.</p>\n<p>Generally, do not use <code>CLASSPATH</code>, just specify with the <code>-cp</code> parameter. <code>CLASSPATH</code> is a global variable and as a general rule it's bizarre to limit your computer to only run one java application ever.</p>\n"}],"owner":{"account_id":1472673,"reputation":33,"user_id":1383816,"accept_rate":20,"display_name":"sampath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1684373714,"answer_count":1,"score":0,"last_activity_date":1684362436,"creation_date":1684359144,"question_id":76276343,"body_markdown":"Unable to execute this code from windows command line\r\n1) I wrote the code as :\r\n\r\n```\r\npackage sample;\r\n\r\npublic class PrivateMain{\r\n\tpublic static void main(String[] args){\r\n\t\tSystem.out.println(&quot;This is from  main&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n2) I have set the classpath using below commands, but still receiving error as &quot;Could not find or load main class&quot;. Am i missing any steps?\r\n\r\n```\r\nG:\\javaPract&gt;javac PrivateMain.java  \r\n\r\nG:\\javaPract&gt;java PrivateMain      \r\nError: Could not find or load main class PrivateMain\r\n\r\nG:\\javaPract&gt;java sample.PrivateMain \r\nError: Could not find or load main class sample.PrivateMain\r\n\r\nG:\\javaPract&gt;set CLASSPATH=%CLASSPATH%;.\r\n\r\nG:\\javaPract&gt;echo %CLASSPATH%\r\nG:\\javaPract;.\r\n\r\nG:\\javaPract&gt;javac PrivateMain.java \r\n\r\nG:\\javaPract&gt;java PrivateMain      \r\nError: Could not find or load main class PrivateMain\r\n\r\nG:\\javaPract&gt;java sample.PrivateMain \r\nError: Could not find or load main class sample.PrivateMain\r\n\r\nG:\\javaPract&gt;\r\n```\r\n3) file contents on G:\\javaPract directory:\r\n\r\n```\r\nG:\\javaPract&gt;dir\r\n Volume in drive G is Learning\r\n Volume Serial Number is 008F-C257\r\n\r\n Directory of G:\\javaPract\r\n\r\n03/21/2023  08:04 AM    &lt;DIR&gt;          .\r\n03/21/2023  08:04 AM    &lt;DIR&gt;          ..\r\n05/17/2023  04:35 PM               280 PrivateMain.java\r\n05/17/2023  04:36 PM               688 PrivateMain.class\r\n```\r\n\r\n\r\n","title":"Unable to execute simple java file from windows command line","body":"<p>Unable to execute this code from windows command line</p>\n<ol>\n<li>I wrote the code as :</li>\n</ol>\n<pre><code>package sample;\n\npublic class PrivateMain{\n    public static void main(String[] args){\n        System.out.println(&quot;This is from  main&quot;);\n    }\n\n}\n</code></pre>\n<ol start=\"2\">\n<li>I have set the classpath using below commands, but still receiving error as &quot;Could not find or load main class&quot;. Am i missing any steps?</li>\n</ol>\n<pre><code>G:\\javaPract&gt;javac PrivateMain.java  \n\nG:\\javaPract&gt;java PrivateMain      \nError: Could not find or load main class PrivateMain\n\nG:\\javaPract&gt;java sample.PrivateMain \nError: Could not find or load main class sample.PrivateMain\n\nG:\\javaPract&gt;set CLASSPATH=%CLASSPATH%;.\n\nG:\\javaPract&gt;echo %CLASSPATH%\nG:\\javaPract;.\n\nG:\\javaPract&gt;javac PrivateMain.java \n\nG:\\javaPract&gt;java PrivateMain      \nError: Could not find or load main class PrivateMain\n\nG:\\javaPract&gt;java sample.PrivateMain \nError: Could not find or load main class sample.PrivateMain\n\nG:\\javaPract&gt;\n</code></pre>\n<ol start=\"3\">\n<li>file contents on G:\\javaPract directory:</li>\n</ol>\n<pre><code>G:\\javaPract&gt;dir\n Volume in drive G is Learning\n Volume Serial Number is 008F-C257\n\n Directory of G:\\javaPract\n\n03/21/2023  08:04 AM    &lt;DIR&gt;          .\n03/21/2023  08:04 AM    &lt;DIR&gt;          ..\n05/17/2023  04:35 PM               280 PrivateMain.java\n05/17/2023  04:36 PM               688 PrivateMain.class\n</code></pre>\n"},{"tags":["java","javafx","java-8","javafx-2","javafx-8"],"comments":[{"owner":{"account_id":1346923,"reputation":56,"user_id":1287474,"display_name":"Majed"},"score":0,"creation_date":1449054620,"post_id":34036207,"comment_id":55837059,"body_markdown":"Are you using maven resource filtering? I&#39;ve just faced the same issue and it turns out to be caused by maven filtering, as I forgot to exclude them from filtering.","body":"Are you using maven resource filtering? I&#39;ve just faced the same issue and it turns out to be caused by maven filtering, as I forgot to exclude them from filtering."},{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449081524,"post_id":34036207,"comment_id":55855370,"body_markdown":"@MajedAbdulaziz Thanks a lot for the reply, but I&#39;m not using maven, I don&#39;t think this is the cause in my case.","body":"@MajedAbdulaziz Thanks a lot for the reply, but I&#39;m not using maven, I don&#39;t think this is the cause in my case."},{"owner":{"account_id":7018296,"reputation":7298,"user_id":5378766,"accept_rate":84,"display_name":"hotzst"},"score":0,"creation_date":1449149658,"post_id":34036207,"comment_id":55887670,"body_markdown":"Where in relation to your source file and the compiled class file is the `Roboto-Thin.ttf` located?","body":"Where in relation to your source file and the compiled class file is the <code>Roboto-Thin.ttf</code> located?"},{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449156636,"post_id":34036207,"comment_id":55892773,"body_markdown":"@hotzst They are all in the same folder `out&gt;production&gt;TeamViewer&gt;sample&gt;Main.class` and `out&gt;production&gt;TeamViewer&gt;sample&gt;Roboto-Thin.ttf`","body":"@hotzst They are all in the same folder <code>out&gt;production&gt;TeamViewer&gt;sample&gt;Main.class</code> and <code>out&gt;production&gt;TeamViewer&gt;sample&gt;Roboto-Thin.ttf</code>"},{"owner":{"account_id":7018296,"reputation":7298,"user_id":5378766,"accept_rate":84,"display_name":"hotzst"},"score":1,"creation_date":1449742356,"post_id":34036207,"comment_id":56143255,"body_markdown":"If you move the project to a different location, which does not have a path containing a space (`Java8%20projects`) does that make a difference? What if you package the application in a jar file and run that one?","body":"If you move the project to a different location, which does not have a path containing a space (<code>Java8%20projects</code>) does that make a difference? What if you package the application in a jar file and run that one?"},{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449757257,"post_id":34036207,"comment_id":56152878,"body_markdown":"@hotzst Thanks a lot, removing the space from `Java8%20projects` to `Java8projects` tends to solve the problem.","body":"@hotzst Thanks a lot, removing the space from <code>Java8%20projects</code> to <code>Java8projects</code> tends to solve the problem."}],"answers":[{"comments":[{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449270622,"post_id":34098531,"comment_id":55950102,"body_markdown":"Thanks for reply, but I&#39;m still getting the same error, Also sorry I had forgotten the `-fx-` prefix but I have just added it","body":"Thanks for reply, but I&#39;m still getting the same error, Also sorry I had forgotten the <code>-fx-</code> prefix but I have just added it"},{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449270698,"post_id":34098531,"comment_id":55950137,"body_markdown":"May be the problem is with Intellij Idea","body":"May be the problem is with Intellij Idea"},{"owner":{"account_id":4400755,"reputation":1015,"user_id":3586536,"display_name":"Prometheus"},"score":0,"creation_date":1449272347,"post_id":34098531,"comment_id":55950682,"body_markdown":"Have you tried compiling/running it with plain javac/java, without an IDE? Just tried it myself and even your original CSS works fine that way.","body":"Have you tried compiling/running it with plain javac/java, without an IDE? Just tried it myself and even your original CSS works fine that way."},{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":0,"creation_date":1449331740,"post_id":34098531,"comment_id":55965154,"body_markdown":"I guess that and even eclipse would work, But I need a solution for `IntelliJ Idea` ,Also It was initially working perfectly but it just suddenly stopped.","body":"I guess that and even eclipse would work, But I need a solution for <code>IntelliJ Idea</code> ,Also It was initially working perfectly but it just suddenly stopped."},{"owner":{"account_id":3310548,"reputation":321,"user_id":2784174,"display_name":"crowde"},"score":0,"creation_date":1550222161,"post_id":34098531,"comment_id":96197601,"body_markdown":"I had this problem today. Even if years later I can add my bit. If you are using Maven and IntelliJ Idea, I found helpful to manually reimport maven projects after importing the font files. It worked after that.","body":"I had this problem today. Even if years later I can add my bit. If you are using Maven and IntelliJ Idea, I found helpful to manually reimport maven projects after importing the font files. It worked after that."}],"tags":[],"owner":{"account_id":4400755,"reputation":1015,"user_id":3586536,"display_name":"Prometheus"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449268035,"creation_date":1449268035,"answer_id":34098531,"question_id":34036207,"body_markdown":"I&#39;m using the e(fx)clipse plugin for Eclipse, which does not recognize your CSS file as valid JavaFX CSS. I do not get the exception when I start the program however, it simply uses the default font.\r\n\r\nWith the following changes, the font is being loaded and displayed.\r\n\r\n    /**/\r\n    @font-face {\r\n        font-family: Roboto; /* removed &#39;&#39; */\r\n        src: url(&quot;Roboto-Thin.ttf&quot;);\r\n    }\r\n    #sampleLabel{\r\n        -fx-font-family: Roboto ; /* added -fx- prefix */\r\n    }","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>I'm using the e(fx)clipse plugin for Eclipse, which does not recognize your CSS file as valid JavaFX CSS. I do not get the exception when I start the program however, it simply uses the default font.</p>\n\n<p>With the following changes, the font is being loaded and displayed.</p>\n\n<pre><code>/**/\n@font-face {\n    font-family: Roboto; /* removed '' */\n    src: url(\"Roboto-Thin.ttf\");\n}\n#sampleLabel{\n    -fx-font-family: Roboto ; /* added -fx- prefix */\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"score":1,"creation_date":1454345578,"post_id":35135133,"comment_id":57991844,"body_markdown":"I had solved it by just removing the space to get rid of the %20, but this also solves the problem. Thanks a lot +1","body":"I had solved it by just removing the space to get rid of the %20, but this also solves the problem. Thanks a lot +1"},{"owner":{"account_id":13794749,"reputation":187,"user_id":9957954,"display_name":"Kaushik"},"score":0,"creation_date":1648041104,"post_id":35135133,"comment_id":126522903,"body_markdown":"Is there a way to do it in CSS? The reason I am asking this is, if we load the font with code, then it&#39;d be a tough task to setFont for each and every element.","body":"Is there a way to do it in CSS? The reason I am asking this is, if we load the font with code, then it&#39;d be a tough task to setFont for each and every element."}],"tags":[],"owner":{"account_id":64048,"reputation":952,"user_id":189280,"accept_rate":70,"display_name":"Terje Dahl"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1454343190,"creation_date":1454343190,"answer_id":35135133,"question_id":34036207,"body_markdown":"I found the possible cause and a work-around:\r\nUnder the hood the css-loader uses the function `Font.loadFont` to load the font-face in your CSS.\r\n`Font.loadFont` simply returns `null` if it fails, which give the &quot;warning&quot;.\r\n\r\nIt seems that this function does not work with `%20` it its path/url-string.\r\nSo you need to resolve the path and then replace it with a space.\r\nThat means you will have to load your fonts with code in stead of with CSS (for now).\r\n\r\nIn Clojure my work-around looks like this:\r\n\r\n    (require &#39;[clojure.java.io :as cio])\r\n    (require &#39;[clojure.string :as s])\r\n    (-&gt; &quot;fonts/SourceCodePro-Regular.ttf&quot; \r\n      cio/resource \r\n      str \r\n      (s/replace &quot;%20&quot; &quot; &quot;) \r\n      (javafx.scene.text.Font/loadFont  10.))\r\n;-)\r\n","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>I found the possible cause and a work-around:\nUnder the hood the css-loader uses the function <code>Font.loadFont</code> to load the font-face in your CSS.\n<code>Font.loadFont</code> simply returns <code>null</code> if it fails, which give the \"warning\".</p>\n\n<p>It seems that this function does not work with <code>%20</code> it its path/url-string.\nSo you need to resolve the path and then replace it with a space.\nThat means you will have to load your fonts with code in stead of with CSS (for now).</p>\n\n<p>In Clojure my work-around looks like this:</p>\n\n<pre><code>(require '[clojure.java.io :as cio])\n(require '[clojure.string :as s])\n(-&gt; \"fonts/SourceCodePro-Regular.ttf\" \n  cio/resource \n  str \n  (s/replace \"%20\" \" \") \n  (javafx.scene.text.Font/loadFont  10.))\n</code></pre>\n\n<p>;-)</p>\n"},{"tags":[],"owner":{"account_id":64048,"reputation":952,"user_id":189280,"accept_rate":70,"display_name":"Terje Dahl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514746427,"creation_date":1514723843,"answer_id":48042484,"question_id":34036207,"body_markdown":"So, almost 2 years later, and I came across my own response to the same problem I still have.\r\n\r\nBut now I have a cooler and more elegant solution, after studying the source code for `com.sun.javafx.css.StyleManager` : Simply parse the stylesheets myself and load the fonts.\r\n\r\nSee relevant source code here: [lines 932-662][1]\r\n\r\n(Yes, this is all in Clojure, but I am sure you can figure it out.)\r\n\r\nI start with this:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn add-stylesheet [^Scene scene path]\r\n      (let [logger (Logging/getCSSLogger)\r\n            level (.level logger)]\r\n        (.setLevel logger PlatformLogger$Level/OFF)  ;; turn off logger\r\n        (-&gt; scene .getStylesheets (.add path))  ;; set stylesheet\r\n        (.setLevel logger level) ;; turn logger back on\r\n        (-&gt; path stylesheet-parsed load-fonts))) ;; parse and load fonts\r\n\r\n(Turning off logging doesn&#39;t work, for some reason).\r\n\r\nThe stylesheet is parsed with this:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn stylesheet-parsed [path]\r\n      (.parse (CSSParser.) (cio/resource path)))\r\n\r\nAnd finally the fonts are loaded with this:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn- load-fonts [^Stylesheet stylesheet]\r\n      (doseq [^FontFace fontface (.getFontFaces stylesheet)]\r\n        (doseq [^FontFace$FontFaceSrc ffsrc (.getSources fontface)]\r\n          (let [src (-&gt; ffsrc .getSrc (cs/replace &quot;%20&quot; &quot; &quot;))] ;; &lt;- sanitizing path for Font/getFont\r\n            (println &quot;Loading font:&quot; src)\r\n            (let [f (Font/loadFont src 10.)]\r\n              (println &quot;Font loaded:&quot; f))))))\r\n\r\nThis works just fine, and looks a lot like the original. An advantage is that here we don&#39;t check for type URL only, so we could theoretically extend it to handle @font-face more extensively.\r\n\r\nHere is a more Clojure-y implementation of `load-fonts` which returns a list of all fonts loaded:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn- load-fontface-src [^FontFace$FontFaceSrc ffsrc]\r\n      (-&gt; ffsrc .getSrc (cs/replace &quot;%20&quot; &quot; &quot;) (Font/loadFont 10.)))\r\n    \r\n    (defn- load-fontface [^FontFace ff]\r\n      (map load-fontface-src (.getSources ff)))\r\n    \r\n    (defn- load-fonts [^Stylesheet stylesheet]\r\n      (vec (flatten (map load-fontface (.getFontFaces stylesheet)))))\r\n\r\nAnd the imports needed:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (import\r\n      &#39;[com.sun.javafx.css.parser CSSParser]\r\n      &#39;[com.sun.javafx.css Stylesheet FontFace FontFace$FontFaceSrc]\r\n      &#39;[com.sun.javafx.util Logging]\r\n      &#39;[sun.util.logging PlatformLogger$Level])\r\n\r\nTODO:  \r\n1. Turn of logging. (It is annoying, though only a problem in development.)  \r\n2. Test to see if any fonts were not loaded, and only then to the alternative parsing and loading.  But probably the simply checking would require as much processing as actually loading the fonts an extra time.\r\n\r\nFIX:\r\nadded `vec` to the left of `flatten`, to ensure that lazy seqs are realized.\r\n\r\n  [1]: http://grepcode.com/file/repo1.maven.org/maven2/net.java.openjfx.backport/openjfx-78-backport/1.8.0-ea-b96.1/com/sun/javafx/css/StyleManager.java#932\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>So, almost 2 years later, and I came across my own response to the same problem I still have.</p>\n\n<p>But now I have a cooler and more elegant solution, after studying the source code for <code>com.sun.javafx.css.StyleManager</code> : Simply parse the stylesheets myself and load the fonts.</p>\n\n<p>See relevant source code here: <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/net.java.openjfx.backport/openjfx-78-backport/1.8.0-ea-b96.1/com/sun/javafx/css/StyleManager.java#932\" rel=\"nofollow noreferrer\">lines 932-662</a></p>\n\n<p>(Yes, this is all in Clojure, but I am sure you can figure it out.)</p>\n\n<p>I start with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn add-stylesheet [^Scene scene path]\n  (let [logger (Logging/getCSSLogger)\n        level (.level logger)]\n    (.setLevel logger PlatformLogger$Level/OFF)  ;; turn off logger\n    (-&gt; scene .getStylesheets (.add path))  ;; set stylesheet\n    (.setLevel logger level) ;; turn logger back on\n    (-&gt; path stylesheet-parsed load-fonts))) ;; parse and load fonts\n</code></pre>\n\n<p>(Turning off logging doesn't work, for some reason).</p>\n\n<p>The stylesheet is parsed with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn stylesheet-parsed [path]\n  (.parse (CSSParser.) (cio/resource path)))\n</code></pre>\n\n<p>And finally the fonts are loaded with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn- load-fonts [^Stylesheet stylesheet]\n  (doseq [^FontFace fontface (.getFontFaces stylesheet)]\n    (doseq [^FontFace$FontFaceSrc ffsrc (.getSources fontface)]\n      (let [src (-&gt; ffsrc .getSrc (cs/replace \"%20\" \" \"))] ;; &lt;- sanitizing path for Font/getFont\n        (println \"Loading font:\" src)\n        (let [f (Font/loadFont src 10.)]\n          (println \"Font loaded:\" f))))))\n</code></pre>\n\n<p>This works just fine, and looks a lot like the original. An advantage is that here we don't check for type URL only, so we could theoretically extend it to handle @font-face more extensively.</p>\n\n<p>Here is a more Clojure-y implementation of <code>load-fonts</code> which returns a list of all fonts loaded:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn- load-fontface-src [^FontFace$FontFaceSrc ffsrc]\n  (-&gt; ffsrc .getSrc (cs/replace \"%20\" \" \") (Font/loadFont 10.)))\n\n(defn- load-fontface [^FontFace ff]\n  (map load-fontface-src (.getSources ff)))\n\n(defn- load-fonts [^Stylesheet stylesheet]\n  (vec (flatten (map load-fontface (.getFontFaces stylesheet)))))\n</code></pre>\n\n<p>And the imports needed:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(import\n  '[com.sun.javafx.css.parser CSSParser]\n  '[com.sun.javafx.css Stylesheet FontFace FontFace$FontFaceSrc]\n  '[com.sun.javafx.util Logging]\n  '[sun.util.logging PlatformLogger$Level])\n</code></pre>\n\n<p>TODO:<br>\n1. Turn of logging. (It is annoying, though only a problem in development.)<br>\n2. Test to see if any fonts were not loaded, and only then to the alternative parsing and loading.  But probably the simply checking would require as much processing as actually loading the fonts an extra time.</p>\n\n<p>FIX:\nadded <code>vec</code> to the left of <code>flatten</code>, to ensure that lazy seqs are realized.</p>\n"},{"tags":[],"owner":{"account_id":15913138,"reputation":137,"user_id":11482560,"display_name":"Fay Boisam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578828197,"creation_date":1578828197,"answer_id":59703303,"question_id":34036207,"body_markdown":"For those who - like me - still have this issue and do not want or know how to use Clojure, here is how to do it in Java only: &lt;br&gt;\r\nBevore adding the stylesheet(s) to your scene, use &lt;code&gt;Font.loadFont(getClass().getResourceAsStream([fontpath...]), [Some font-size, for example 12]);&lt;/code&gt;&lt;br&gt;The font will then be registered in JavaFX and you can use the &lt;code&gt;-fx-font-family&lt;/code&gt; css-Property with the loaded font.\r\n","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>For those who - like me - still have this issue and do not want or know how to use Clojure, here is how to do it in Java only: <br>\nBevore adding the stylesheet(s) to your scene, use <code>Font.loadFont(getClass().getResourceAsStream([fontpath...]), [Some font-size, for example 12]);</code><br>The font will then be registered in JavaFX and you can use the <code>-fx-font-family</code> css-Property with the loaded font.</p>\n"},{"tags":[],"owner":{"account_id":5279842,"reputation":21,"user_id":4215582,"display_name":"Adrian Romero"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607005851,"creation_date":1607005851,"answer_id":65127949,"question_id":34036207,"body_markdown":"\r\nIn my case this is produced by the &#39;-&#39; character in the font file name, replace this with a &#39;_&#39; and it works.\r\n\r\ni identify that the font family must be the same file name but replacing all special characters &#39; &#39; (a blank space) and split the camel case words. \r\n\r\nso:\r\n\r\nbefore (no working):\r\n\r\n    @font-face {\r\n        font-family: &#39;RifficFree Bold&#39;;\r\n        src: url(&quot;../fonts/RifficFree-Bold.ttf&quot;);\r\n    }\r\n    .bingo-number, .label{\r\n        -fx-font-family: &#39;RifficFree Bold&#39;;\r\n    }\r\n\r\nafter (working):\r\n\r\n    @font-face {\r\n        font-family: &#39;Riffic Free Bold&#39;;\r\n        src: url(&quot;../fonts/RifficFree_Bold.ttf&quot;);\r\n    }\r\n    .bingo-number, .label{\r\n        -fx-font-family: &#39;Riffic Free Bold&#39;;\r\n    }","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>In my case this is produced by the '-' character in the font file name, replace this with a '_' and it works.</p>\n<p>i identify that the font family must be the same file name but replacing all special characters ' ' (a blank space) and split the camel case words.</p>\n<p>so:</p>\n<p>before (no working):</p>\n<pre><code>@font-face {\n    font-family: 'RifficFree Bold';\n    src: url(&quot;../fonts/RifficFree-Bold.ttf&quot;);\n}\n.bingo-number, .label{\n    -fx-font-family: 'RifficFree Bold';\n}\n</code></pre>\n<p>after (working):</p>\n<pre><code>@font-face {\n    font-family: 'Riffic Free Bold';\n    src: url(&quot;../fonts/RifficFree_Bold.ttf&quot;);\n}\n.bingo-number, .label{\n    -fx-font-family: 'Riffic Free Bold';\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28319527,"reputation":1,"user_id":21655562,"display_name":"Yasin Ali Marouga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684361663,"creation_date":1684361591,"answer_id":76276518,"question_id":34036207,"body_markdown":"I found a solution on Reddit that worked for me. Here&#39;s the link: [Reddit post][1]\r\n\r\nWhen defining the font family in the CSS stylesheet, make sure to use the exact name mentioned on the first line of the font file.\r\n\r\nFor example, if the first line says &quot;Pixeloid Sans&quot;, the font family should be specified as follows:\r\n\r\n\r\n`-fx-font-family: &quot;Pixeloid Sans&quot;;`\r\n\r\nI also removed the `@font-face` declaration, as it was unnecessary.\r\n\r\nLastly, I should mention that all of my .tff files are located in a folder within /resources.\r\n\r\n\r\n  [1]: https://www.reddit.com/r/javahelp/comments/3pxmkc/javafx_fontface_css_not_working/","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>I found a solution on Reddit that worked for me. Here's the link: <a href=\"https://www.reddit.com/r/javahelp/comments/3pxmkc/javafx_fontface_css_not_working/\" rel=\"nofollow noreferrer\">Reddit post</a></p>\n<p>When defining the font family in the CSS stylesheet, make sure to use the exact name mentioned on the first line of the font file.</p>\n<p>For example, if the first line says &quot;Pixeloid Sans&quot;, the font family should be specified as follows:</p>\n<p><code>-fx-font-family: &quot;Pixeloid Sans&quot;;</code></p>\n<p>I also removed the <code>@font-face</code> declaration, as it was unnecessary.</p>\n<p>Lastly, I should mention that all of my .tff files are located in a folder within /resources.</p>\n"}],"owner":{"account_id":5670287,"reputation":4508,"user_id":4485137,"accept_rate":83,"display_name":"Collins Abitekaniza"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7952,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":35135133,"answer_count":6,"score":11,"last_activity_date":1684361663,"creation_date":1449037539,"question_id":34036207,"body_markdown":"I had already asked a similar question &lt;a href=&quot;https://stackoverflow.com/questions/33973921/javafx-font-face-css-error-loadstylesheetunprivileged&quot;&gt;here&lt;/a&gt; but it seems It wasn&#39;t clear since I had a lot of code in the project and couldn&#39;t post it here So **please** don&#39;t mark as duplicate. \r\n\r\nBecause of that, I then decided to create a new project with just a **Label** in it to make the code small and clean and also to eliminate other **potential suspects** of the error I&#39;m getting.\r\n\r\nSo here is my **Java Source code**\r\n\r\n\tpublic class Main extends Application {\r\n\t\r\n\t\t@Override\r\n\t\tpublic void start(Stage primaryStage) throws Exception {\r\n\t\t\tGroup root = new Group();\r\n\t\r\n\t\t\tLabel label = new Label(&quot;Sample Label&quot;);\r\n\t\t\tlabel.setId(&quot;sampleLabel&quot;);\r\n\t\t\troot.getChildren().add(label);\r\n\t\r\n\t\t\tScene scene = new Scene(root, 300, 275);\r\n\t\t\tscene.getStylesheets().add(getClass().getResource(&quot;applicationStyles.css&quot;).toExternalForm());\r\n\t\t\tprimaryStage.setTitle(&quot;Hello World&quot;);\r\n\t\t\tprimaryStage.setScene(scene);\r\n\t\t\tprimaryStage.show();\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tlaunch(args);\r\n\t\t}\r\n\t}\r\n\r\nAnd this is my **css file**\r\n\r\n    /**/\r\n    @font-face {\r\n        font-family:&#39;Roboto&#39;;\r\n        src:url(&quot;Roboto-Thin.ttf&quot;);\r\n    }\r\n    #sampleLabel{\r\n        -fx-font-family: Roboto ;\r\n    }\r\n\r\nThis is the error I&#39;m getting in Intellij Idea\r\n\r\n    Dec 02, 2015 9:16:34 AM com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\r\n    INFO: Could not load @font-face font [file:/C:/Users/UserName/Desktop/Java8%20projects/TeamViewer/out/production/TeamViewer/sample/Roboto-Thin.ttf]\r\n\r\n&gt; All the project files are in one package and the font file is also present in the out&gt;production&gt;TeamViewer&gt;sample&gt;Roboto-Thin.ttf. I also upgraded from jdk-8u65 to jdk-8u66\r\n\r\nThanks, any help is greatly appreciated.","title":"JavaFx Could not load @font-face font because of com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged","body":"<p>I had already asked a similar question <a href=\"https://stackoverflow.com/questions/33973921/javafx-font-face-css-error-loadstylesheetunprivileged\">here</a> but it seems It wasn't clear since I had a lot of code in the project and couldn't post it here So <strong>please</strong> don't mark as duplicate. </p>\n\n<p>Because of that, I then decided to create a new project with just a <strong>Label</strong> in it to make the code small and clean and also to eliminate other <strong>potential suspects</strong> of the error I'm getting.</p>\n\n<p>So here is my <strong>Java Source code</strong></p>\n\n<pre><code>public class Main extends Application {\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        Group root = new Group();\n\n        Label label = new Label(\"Sample Label\");\n        label.setId(\"sampleLabel\");\n        root.getChildren().add(label);\n\n        Scene scene = new Scene(root, 300, 275);\n        scene.getStylesheets().add(getClass().getResource(\"applicationStyles.css\").toExternalForm());\n        primaryStage.setTitle(\"Hello World\");\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n\n<p>And this is my <strong>css file</strong></p>\n\n<pre><code>/**/\n@font-face {\n    font-family:'Roboto';\n    src:url(\"Roboto-Thin.ttf\");\n}\n#sampleLabel{\n    -fx-font-family: Roboto ;\n}\n</code></pre>\n\n<p>This is the error I'm getting in Intellij Idea</p>\n\n<pre><code>Dec 02, 2015 9:16:34 AM com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\nINFO: Could not load @font-face font [file:/C:/Users/UserName/Desktop/Java8%20projects/TeamViewer/out/production/TeamViewer/sample/Roboto-Thin.ttf]\n</code></pre>\n\n<blockquote>\n  <p>All the project files are in one package and the font file is also present in the out>production>TeamViewer>sample>Roboto-Thin.ttf. I also upgraded from jdk-8u65 to jdk-8u66</p>\n</blockquote>\n\n<p>Thanks, any help is greatly appreciated.</p>\n"},{"tags":["java","character","emoji","grapheme"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480471390,"post_id":40878804,"comment_id":68972886,"body_markdown":"Interesting topic. I tried to find out what kind of character this is (your first example) and I&#39;m wondering if the combinations that are considered these combined emojis are real unicode standards or conventions adopted by vendors. Your first example is a combination of the unicode characters for Woman, Woman, Boy, Boy combined with Zero-width joiners. http://emojipedia.org/emoji/%F0%9F%91%A9%E2%80%8D%F0%9F%91%A9%E2%80%8D%F0%9F%91%A6%E2%80%8D%F0%9F%91%A6/","body":"Interesting topic. I tried to find out what kind of character this is (your first example) and I&#39;m wondering if the combinations that are considered these combined emojis are real unicode standards or conventions adopted by vendors. Your first example is a combination of the unicode characters for Woman, Woman, Boy, Boy combined with Zero-width joiners. <a href=\"http://emojipedia.org/emoji/%F0%9F%91%A9%E2%80%8D%F0%9F%91%A9%E2%80%8D%F0%9F%91%A6%E2%80%8D%F0%9F%91%A6/\" rel=\"nofollow noreferrer\">emojipedia.org/emoji/&hellip;</a>"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480475149,"post_id":40878804,"comment_id":68973868,"body_markdown":"One way of combining characters into emojis is using the zero-width-joiner codepoint (ZWJ/ U+200D). So one way to get the count of visible characters is to go over all unicode codepoints and whenever you encounter the ZWJ, you substract two (for the ZWJ and for the next character which is merged into the previous character). However there are more ways to compose emojis (and unicode characters) so your best bet is to wait for emoji4j to update or to do it yourself.","body":"One way of combining characters into emojis is using the zero-width-joiner codepoint (ZWJ/ U+200D). So one way to get the count of visible characters is to go over all unicode codepoints and whenever you encounter the ZWJ, you substract two (for the ZWJ and for the next character which is merged into the previous character). However there are more ways to compose emojis (and unicode characters) so your best bet is to wait for emoji4j to update or to do it yourself."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480481939,"post_id":40878804,"comment_id":68975726,"body_markdown":"Possible duplicate of [What&#39;s the correct algorithm to determine number of user-perceived-characters?](http://stackoverflow.com/questions/9097572/whats-the-correct-algorithm-to-determine-number-of-user-perceived-characters)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/9097572/whats-the-correct-algorithm-to-determine-number-of-user-perceived-characters\">What&#39;s the correct algorithm to determine number of user-perceived-characters?</a>"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480481975,"post_id":40878804,"comment_id":68975731,"body_markdown":"Doesn&#39;t look like Java supports counting Grapheme Clusters (perceived characters). So the above question/answer should still be valid.","body":"Doesn&#39;t look like Java supports counting Grapheme Clusters (perceived characters). So the above question/answer should still be valid."},{"owner":{"account_id":31954,"reputation":31454,"user_id":88111,"accept_rate":89,"display_name":"Craig Otis"},"score":0,"creation_date":1480512144,"post_id":40878804,"comment_id":68992578,"body_markdown":"It&#39;s a bit different - that question (and some of the comments on it) are avoiding the use of any higher-level functions or third-party bits like the ICU library. (They want to go from `int[]` to emoji count.) I&#39;m just working with Strings and happy to use whatever resources are available. In preliminary testing it looks like the ICU library might work - I&#39;ll make sure then add an answer.","body":"It&#39;s a bit different - that question (and some of the comments on it) are avoiding the use of any higher-level functions or third-party bits like the ICU library. (They want to go from <code>int[]</code> to emoji count.) I&#39;m just working with Strings and happy to use whatever resources are available. In preliminary testing it looks like the ICU library might work - I&#39;ll make sure then add an answer."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1480515798,"post_id":40878804,"comment_id":68995213,"body_markdown":"I tried - didn&#39;t know about the ICU library - and it works, you can just use your code above that uses BreakIterator, as long as use ICU&#39;s version of BreakIterator rather than the java API version. Surprising. I&#39;m reading that even JDK9 is planned to support only Unicode version 8 rather than 9 which is the newest version. So ICU is the way forward.","body":"I tried - didn&#39;t know about the ICU library - and it works, you can just use your code above that uses BreakIterator, as long as use ICU&#39;s version of BreakIterator rather than the java API version. Surprising. I&#39;m reading that even JDK9 is planned to support only Unicode version 8 rather than 9 which is the newest version. So ICU is the way forward."}],"answers":[{"comments":[{"owner":{"account_id":1041836,"reputation":6885,"user_id":1047713,"accept_rate":81,"display_name":"elect"},"score":0,"creation_date":1678685842,"post_id":41222783,"comment_id":133574795,"body_markdown":"Unfortunately there are tons of false positive, like this one: `&quot;\\uD8F6\\uDC0B&quot;`","body":"Unfortunately there are tons of false positive, like this one: <code>&quot;\\uD8F6\\uDC0B&quot;</code>"}],"tags":[],"owner":{"account_id":31954,"reputation":31454,"user_id":88111,"accept_rate":89,"display_name":"Craig Otis"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1482151098,"creation_date":1482151098,"answer_id":41222783,"question_id":40878804,"body_markdown":"I ended up using the [ICU library][1], which worked much better. No changes (aside from import statements) were needed from my original codeblock, as it simply provides a different implementation of `BreakIterator`.\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.ibm.icu/icu4j","title":"How to count grapheme clusters or &quot;perceived&quot; emoji characters in Java","body":"<p>I ended up using the <a href=\"https://mvnrepository.com/artifact/com.ibm.icu/icu4j\" rel=\"noreferrer\">ICU library</a>, which worked much better. No changes (aside from import statements) were needed from my original codeblock, as it simply provides a different implementation of <code>BreakIterator</code>.</p>\n"},{"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1682501966,"post_id":74078861,"comment_id":134224828,"body_markdown":"FYI, the missing support for grapheme clusters with `BreakIterator` that you mention has finally been implemented in Java 20. See [Grapheme support in BreakIterator](https://bugs.openjdk.org/browse/JDK-8291660)","body":"FYI, the missing support for grapheme clusters with <code>BreakIterator</code> that you mention has finally been implemented in Java 20. See <a href=\"https://bugs.openjdk.org/browse/JDK-8291660\" rel=\"nofollow noreferrer\">Grapheme support in BreakIterator</a>"}],"tags":[],"owner":{"account_id":2733131,"reputation":3771,"user_id":2402790,"accept_rate":0,"display_name":"Michael Allan"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682584891,"creation_date":1665831841,"answer_id":74078861,"question_id":40878804,"body_markdown":"JDK 15 [added support](https://bugs.openjdk.org/browse/JDK-8243579) for [extended grapheme clusters](https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries) to the `java.util.regex` package.  Here’s a solution based on that:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    /** Returns the number of grapheme clusters within `text` between positions\r\n      * `start` and `end`.  Omits any partial cluster at the end of the span.\r\n      */\r\n    int columnarSpan( String text, int start, int end ) {\r\n        return columnarSpan( text, start, end, /*wholeOnly*/true ); }\r\n\r\n\r\n    /** @param wholeOnly Whether to omit any partial cluster at the end\r\n      *   of the span.  Iff `true` and `end` bisects the final cluster,\r\n      *   then the final cluster is omitted from the count.\r\n      */\r\n    int columnarSpan( final String text, final int start, final int end,\r\n          final boolean wholeOnly ) {\r\n        graphemeMatcher.reset( text ).region( start, end );\r\n        int count = 0;\r\n        while( graphemeMatcher.find() ) ++count;\r\n        if( wholeOnly  &amp;&amp;  count &gt; 0  &amp;&amp;  end &lt; text.length() ) {\r\n            final int countNext = columnarSpan( text, start, end + 1, false );\r\n            if( countNext == count ) --count; } /* The character at `end` bisects\r\n              the final cluster, which therefore lies partly outside the span.\r\n              Therefore exclude it from the count. */\r\n        return count; }\r\n\r\n\r\n    final Matcher graphemeMatcher = graphemePattern.matcher( &quot;&quot; );\r\n\r\n\r\n    /** The pattern of a grapheme cluster.\r\n      */\r\n    public static final Pattern graphemePattern = Pattern.compile( &quot;\\\\X&quot; ); } /*\r\n      An alternative means of cluster discovery is `java.txt.BreakIterator`.\r\n      Long outdated in this regard,  [https://bugs.openjdk.org/browse/JDK-8174266]\r\n      it was updated for JDK 20.  [https://stackoverflow.com/a/76109241/2402790] */\r\n\r\nCall it like this:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    String emoji = &quot;&#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;;\r\n    int count = columnarSpan( emoji, 0, /*end*/emoji.length() );\r\n    System.out.println( count );\r\n\r\n    ⇒ 2\r\n\r\nNote that it counts whole clusters only. If the given `end` bisects the final cluster — the character at position `end` being part of the same extended cluster as the preceding character — then the final cluster is omitted from the count. For example:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1 );\r\n    System.out.println( count );\r\n\r\n    ⇒ 1\r\n\r\nThis is generally the behaviour you want in order to print a line of text with a character pointer positioned beneath it (e.g. ‘`^`’) pointing *into the cluster* of the character at the given index. To defeat this behaviour (pointing *after the cluster*), call the base method as follows.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1, false );\r\n    System.out.println( count );\r\n\r\n    ⇒ 2\r\n\r\n*(Updated as per Skomisa’s comment.)*","title":"How to count grapheme clusters or &quot;perceived&quot; emoji characters in Java","body":"<p>JDK 15 <a href=\"https://bugs.openjdk.org/browse/JDK-8243579\" rel=\"nofollow noreferrer\">added support</a> for <a href=\"https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries\" rel=\"nofollow noreferrer\">extended grapheme clusters</a> to the <code>java.util.regex</code> package.  Here’s a solution based on that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/** Returns the number of grapheme clusters within `text` between positions\n  * `start` and `end`.  Omits any partial cluster at the end of the span.\n  */\nint columnarSpan( String text, int start, int end ) {\n    return columnarSpan( text, start, end, /*wholeOnly*/true ); }\n\n\n/** @param wholeOnly Whether to omit any partial cluster at the end\n  *   of the span.  Iff `true` and `end` bisects the final cluster,\n  *   then the final cluster is omitted from the count.\n  */\nint columnarSpan( final String text, final int start, final int end,\n      final boolean wholeOnly ) {\n    graphemeMatcher.reset( text ).region( start, end );\n    int count = 0;\n    while( graphemeMatcher.find() ) ++count;\n    if( wholeOnly  &amp;&amp;  count &gt; 0  &amp;&amp;  end &lt; text.length() ) {\n        final int countNext = columnarSpan( text, start, end + 1, false );\n        if( countNext == count ) --count; } /* The character at `end` bisects\n          the final cluster, which therefore lies partly outside the span.\n          Therefore exclude it from the count. */\n    return count; }\n\n\nfinal Matcher graphemeMatcher = graphemePattern.matcher( &quot;&quot; );\n\n\n/** The pattern of a grapheme cluster.\n  */\npublic static final Pattern graphemePattern = Pattern.compile( &quot;\\\\X&quot; ); } /*\n  An alternative means of cluster discovery is `java.txt.BreakIterator`.\n  Long outdated in this regard,  [https://bugs.openjdk.org/browse/JDK-8174266]\n  it was updated for JDK 20.  [https://stackoverflow.com/a/76109241/2402790] */\n</code></pre>\n<p>Call it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String emoji = &quot;👻👩‍👩‍👦‍👦&quot;;\nint count = columnarSpan( emoji, 0, /*end*/emoji.length() );\nSystem.out.println( count );\n\n⇒ 2\n</code></pre>\n<p>Note that it counts whole clusters only. If the given <code>end</code> bisects the final cluster — the character at position <code>end</code> being part of the same extended cluster as the preceding character — then the final cluster is omitted from the count. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1 );\nSystem.out.println( count );\n\n⇒ 1\n</code></pre>\n<p>This is generally the behaviour you want in order to print a line of text with a character pointer positioned beneath it (e.g. ‘<code>^</code>’) pointing <em>into the cluster</em> of the character at the given index. To defeat this behaviour (pointing <em>after the cluster</em>), call the base method as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1, false );\nSystem.out.println( count );\n\n⇒ 2\n</code></pre>\n<p><em>(Updated as per Skomisa’s comment.)</em></p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695836607,"post_id":76109241,"comment_id":136078460,"body_markdown":"Side notes: the `Charset.defaultCharset()` is not really relevant here. Further, you can use `System.out.println(&quot;Java version: &quot; + Runtime.version());` and instead of `s .codePoints().mapToObj(Integer::toHexString).forEach(x -&gt; System.out.print(x + &quot; &quot;));` you can also use `s.codePoints().forEach(x -&gt; System.out.printf(&quot;%04x &quot;, x));`.","body":"Side notes: the <code>Charset.defaultCharset()</code> is not really relevant here. Further, you can use <code>System.out.println(&quot;Java version: &quot; + Runtime.version());</code> and instead of <code>s .codePoints().mapToObj(Integer::toHexString).forEach(x -&gt; System.out.print(x + &quot; &quot;));</code> you can also use <code>s.codePoints().forEach(x -&gt; System.out.printf(&quot;%04x &quot;, x));</code>."}],"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1684360343,"creation_date":1682501660,"answer_id":76109241,"question_id":40878804,"body_markdown":"More than six years after this question was asked, an enhancement to properly process grapheme clusters within a `String` was finally implemented in Java 20, which was released a few weeks ago. See [JDK-8291660 Grapheme support in BreakIterator](https://bugs.openjdk.org/browse/JDK-8291660).\r\n\r\nThere is no change to the API of [the BreakIterator class](https://bugs.openjdk.org/browse/JDK-8291660), but its underlying code now correctly treats a grapheme cluster as a single unit rather than multiple characters.\r\n\r\nHere is a sample application, using the method and data provided in the question without any changes:\r\n\r\n    import java.nio.charset.Charset;\r\n    import java.text.BreakIterator;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws java.io.UnsupportedEncodingException {\r\n            System.out.println(&quot;System.getProperty(\\&quot;java.version\\&quot;): &quot; + System.getProperty(&quot;java.version&quot;));\r\n            System.out.println(&quot;Charset.defaultCharset():&quot; + Charset.defaultCharset());\r\n            Main.printStringInfo(&quot;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;);\r\n            Main.printStringInfo(&quot;&#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;);\r\n        }\r\n    \r\n        static void printStringInfo(String s) {\r\n            System.out.print(&quot;\\nCode points for the String &quot; + s + &quot;:&quot;);\r\n            s.codePoints().mapToObj(Integer::toHexString).forEach(x -&gt; System.out.print(x + &quot; &quot;));\r\n            System.out.println(&quot;\\nThe length of the String &quot; + s + &quot; using String.length() is &quot; + s.length());\r\n            System.out.println(&quot;The length of the String &quot; + s + &quot; using BreakIterator is &quot; + Main.getLength(s));\r\n        }\r\n    \r\n        // Returns the correct number of perceived characters in a String.\r\n        // Requires JDK 20+ to work correctly.\r\n        // Earlier Java releases will incorrectly just count the code points instead.\r\n        // JDK-8291660 &quot;Grapheme support in BreakIterator&quot; (https://bugs.openjdk.org/browse/JDK-8291660) refers.\r\n        public static int getLength(String emoji) {\r\n            BreakIterator it = BreakIterator.getCharacterInstance();\r\n            it.setText(emoji);\r\n            int count = 0;\r\n            while (it.next() != BreakIterator.DONE) {\r\n                count++;\r\n            }\r\n            return count;\r\n        }\r\n    }\r\n\r\nHere is the output, showing the correct grapheme counts (1 and 2) when using JDK 20:\r\n\r\n    C:\\Java\\jdk-20\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53642:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\r\n    System.getProperty(&quot;java.version&quot;): 20-ea\r\n    Charset.defaultCharset():UTF-8\r\n    \r\n    Code points for the String &#128105;‍&#128105;‍&#128102;‍&#128102;:1f469 200d 1f469 200d 1f466 200d 1f466 \r\n    The length of the String &#128105;‍&#128105;‍&#128102;‍&#128102; using String.length() is 11\r\n    The length of the String &#128105;‍&#128105;‍&#128102;‍&#128102; using BreakIterator is 1\r\n    \r\n    Code points for the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \r\n    The length of the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102; using String.length() is 13\r\n    The length of the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102; using BreakIterator is 2\r\n    \r\n    Process finished with exit code 0\r\n\r\n\r\nAnd here is the output for the identical code showing incorrect grapheme counts (7 and 8) when using JDK 17:\r\n\r\n    C:\\Java\\jdk-17.0.2\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53775:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\r\n    System.getProperty(&quot;java.version&quot;): 17.0.2\r\n    Charset.defaultCharset():UTF-8\r\n    \r\n    Code points for the String &#128105;‍&#128105;‍&#128102;‍&#128102;:1f469 200d 1f469 200d 1f466 200d 1f466 \r\n    The length of the String &#128105;‍&#128105;‍&#128102;‍&#128102; using String.length() is 11\r\n    The length of the String &#128105;‍&#128105;‍&#128102;‍&#128102; using BreakIterator is 7\r\n    \r\n    Code points for the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \r\n    The length of the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102; using String.length() is 13\r\n    The length of the String &#128123;&#128105;‍&#128105;‍&#128102;‍&#128102; using BreakIterator is 8\r\n    \r\n    Process finished with exit code 0\r\n\r\nI tested this in _Intellij IDEA 2023.1.1 Preview_ using _[Oracle OpenJDK version 20.0.1](https://jdk.java.net/20/)_ and [Oracle OpenJDK version 17.0.2](https://www.oracle.com/java/technologies/javase/17-0-2-relnotes.html)\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to count grapheme clusters or &quot;perceived&quot; emoji characters in Java","body":"<p>More than six years after this question was asked, an enhancement to properly process grapheme clusters within a <code>String</code> was finally implemented in Java 20, which was released a few weeks ago. See <a href=\"https://bugs.openjdk.org/browse/JDK-8291660\" rel=\"nofollow noreferrer\">JDK-8291660 Grapheme support in BreakIterator</a>.</p>\n<p>There is no change to the API of <a href=\"https://bugs.openjdk.org/browse/JDK-8291660\" rel=\"nofollow noreferrer\">the BreakIterator class</a>, but its underlying code now correctly treats a grapheme cluster as a single unit rather than multiple characters.</p>\n<p>Here is a sample application, using the method and data provided in the question without any changes:</p>\n<pre><code>import java.nio.charset.Charset;\nimport java.text.BreakIterator;\n\npublic class Main {\n\n    public static void main(String[] args) throws java.io.UnsupportedEncodingException {\n        System.out.println(&quot;System.getProperty(\\&quot;java.version\\&quot;): &quot; + System.getProperty(&quot;java.version&quot;));\n        System.out.println(&quot;Charset.defaultCharset():&quot; + Charset.defaultCharset());\n        Main.printStringInfo(&quot;👩‍👩‍👦‍👦&quot;);\n        Main.printStringInfo(&quot;👻👩‍👩‍👦‍👦&quot;);\n    }\n\n    static void printStringInfo(String s) {\n        System.out.print(&quot;\\nCode points for the String &quot; + s + &quot;:&quot;);\n        s.codePoints().mapToObj(Integer::toHexString).forEach(x -&gt; System.out.print(x + &quot; &quot;));\n        System.out.println(&quot;\\nThe length of the String &quot; + s + &quot; using String.length() is &quot; + s.length());\n        System.out.println(&quot;The length of the String &quot; + s + &quot; using BreakIterator is &quot; + Main.getLength(s));\n    }\n\n    // Returns the correct number of perceived characters in a String.\n    // Requires JDK 20+ to work correctly.\n    // Earlier Java releases will incorrectly just count the code points instead.\n    // JDK-8291660 &quot;Grapheme support in BreakIterator&quot; (https://bugs.openjdk.org/browse/JDK-8291660) refers.\n    public static int getLength(String emoji) {\n        BreakIterator it = BreakIterator.getCharacterInstance();\n        it.setText(emoji);\n        int count = 0;\n        while (it.next() != BreakIterator.DONE) {\n            count++;\n        }\n        return count;\n    }\n}\n</code></pre>\n<p>Here is the output, showing the correct grapheme counts (1 and 2) when using JDK 20:</p>\n<pre><code>C:\\Java\\jdk-20\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53642:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\nSystem.getProperty(&quot;java.version&quot;): 20-ea\nCharset.defaultCharset():UTF-8\n\nCode points for the String 👩‍👩‍👦‍👦:1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👩‍👩‍👦‍👦 using String.length() is 11\nThe length of the String 👩‍👩‍👦‍👦 using BreakIterator is 1\n\nCode points for the String 👻👩‍👩‍👦‍👦:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👻👩‍👩‍👦‍👦 using String.length() is 13\nThe length of the String 👻👩‍👩‍👦‍👦 using BreakIterator is 2\n\nProcess finished with exit code 0\n</code></pre>\n<p>And here is the output for the identical code showing incorrect grapheme counts (7 and 8) when using JDK 17:</p>\n<pre><code>C:\\Java\\jdk-17.0.2\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53775:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\nSystem.getProperty(&quot;java.version&quot;): 17.0.2\nCharset.defaultCharset():UTF-8\n\nCode points for the String 👩‍👩‍👦‍👦:1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👩‍👩‍👦‍👦 using String.length() is 11\nThe length of the String 👩‍👩‍👦‍👦 using BreakIterator is 7\n\nCode points for the String 👻👩‍👩‍👦‍👦:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👻👩‍👩‍👦‍👦 using String.length() is 13\nThe length of the String 👻👩‍👩‍👦‍👦 using BreakIterator is 8\n\nProcess finished with exit code 0\n</code></pre>\n<p>I tested this in <em>Intellij IDEA 2023.1.1 Preview</em> using <em><a href=\"https://jdk.java.net/20/\" rel=\"nofollow noreferrer\">Oracle OpenJDK version 20.0.1</a></em> and <a href=\"https://www.oracle.com/java/technologies/javase/17-0-2-relnotes.html\" rel=\"nofollow noreferrer\">Oracle OpenJDK version 17.0.2</a></p>\n"}],"owner":{"account_id":31954,"reputation":31454,"user_id":88111,"accept_rate":89,"display_name":"Craig Otis"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4242,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":41222783,"answer_count":3,"score":19,"last_activity_date":1684360343,"creation_date":1480469656,"question_id":40878804,"body_markdown":"I&#39;m looking to count the number of perceived emoji characters in a provided Java string. I&#39;m currently using the [emoji4j][1] library, but it doesn&#39;t work for grapheme clusters like this one: &#128105;‍&#128105;‍&#128102;‍&#128102;\r\n\r\nCalling `EmojiUtil.getLength(&quot;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;)` returns `4` instead of `1`, and similarly calling `EmojiUtil.getLength(&quot;&#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;)` returns `5` instead of `2`.\r\n\r\nAre there any APIs or methods on `String` in Java that make it easy to count grapheme clusters?\r\n\r\nI&#39;ve been hunting around but understandably the `codePoints()` method on a `String` includes not only the visible emojis, but also the zero width joiners.\r\n\r\nI also attempted this using the `BreakIterator`:\r\n\r\n    public static int getLength(String emoji) {\r\n        BreakIterator it = BreakIterator.getCharacterInstance();\r\n        it.setText(emoji);\r\n        int emojiCount = 0;\r\n        while (it.next() != BreakIterator.DONE) {\r\n            emojiCount++;\r\n        }\r\n        return emojiCount;\r\n    }\r\n\r\nBut it seems to behave identically to the `codePoints()` method, returning `8` for something like `&quot;&#128123;&#128105;‍&#128105;‍&#128102;‍&#128102;&quot;`.\r\n\r\n  [1]: https://github.com/kcthota/emoji4j","title":"How to count grapheme clusters or &quot;perceived&quot; emoji characters in Java","body":"<p>I'm looking to count the number of perceived emoji characters in a provided Java string. I'm currently using the <a href=\"https://github.com/kcthota/emoji4j\" rel=\"noreferrer\">emoji4j</a> library, but it doesn't work for grapheme clusters like this one: 👩‍👩‍👦‍👦</p>\n\n<p>Calling <code>EmojiUtil.getLength(\"👩‍👩‍👦‍👦\")</code> returns <code>4</code> instead of <code>1</code>, and similarly calling <code>EmojiUtil.getLength(\"👻👩‍👩‍👦‍👦\")</code> returns <code>5</code> instead of <code>2</code>.</p>\n\n<p>Are there any APIs or methods on <code>String</code> in Java that make it easy to count grapheme clusters?</p>\n\n<p>I've been hunting around but understandably the <code>codePoints()</code> method on a <code>String</code> includes not only the visible emojis, but also the zero width joiners.</p>\n\n<p>I also attempted this using the <code>BreakIterator</code>:</p>\n\n<pre><code>public static int getLength(String emoji) {\n    BreakIterator it = BreakIterator.getCharacterInstance();\n    it.setText(emoji);\n    int emojiCount = 0;\n    while (it.next() != BreakIterator.DONE) {\n        emojiCount++;\n    }\n    return emojiCount;\n}\n</code></pre>\n\n<p>But it seems to behave identically to the <code>codePoints()</code> method, returning <code>8</code> for something like <code>\"👻👩‍👩‍👦‍👦\"</code>.</p>\n"},{"tags":["java","swing","log4j","log4j2"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684333920,"post_id":76273208,"comment_id":134503457,"body_markdown":"Why not just open the actual log file in your text area?","body":"Why not just open the actual log file in your text area?"},{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":1,"creation_date":1684333924,"post_id":76273208,"comment_id":134503458,"body_markdown":"Does this answer your question? [How to output logs to a JTextArea using Log4j2](https://stackoverflow.com/questions/24005748/how-to-output-logs-to-a-jtextarea-using-log4j2)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24005748/how-to-output-logs-to-a-jtextarea-using-log4j2\">How to output logs to a JTextArea using Log4j2</a>"},{"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"score":0,"creation_date":1684334151,"post_id":76273208,"comment_id":134503522,"body_markdown":"@g00se Because it&#39;s set up to use a new file name each time, based on the date and time of the program being started. I&#39;m not sure how I&#39;d be able to easily identify the newest file.","body":"@g00se Because it&#39;s set up to use a new file name each time, based on the date and time of the program being started. I&#39;m not sure how I&#39;d be able to easily identify the newest file."},{"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"score":0,"creation_date":1684334199,"post_id":76273208,"comment_id":134503535,"body_markdown":"@jonhanson Whilst I could do that, it involves creating a new Appender, something I&#39;d rather not do.","body":"@jonhanson Whilst I could do that, it involves creating a new Appender, something I&#39;d rather not do."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684334500,"post_id":76273208,"comment_id":134503626,"body_markdown":"*it&#39;s set up to use a new file name each time* Example name?","body":"<i>it&#39;s set up to use a new file name each time</i> Example name?"},{"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"score":0,"creation_date":1684334711,"post_id":76273208,"comment_id":134503685,"body_markdown":"@g00se It&#39;s in the format `dd MMM yyyy HH.mm.ss`, so, for example: `17 May 2023 15.44.31.log`","body":"@g00se It&#39;s in the format <code>dd MMM yyyy HH.mm.ss</code>, so, for example: <code>17 May 2023 15.44.31.log</code>"}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684337513,"post_id":76273554,"comment_id":134504466,"body_markdown":"Have to say that brute force iteration could be quite lengthy if the log file&#39;s more than a few days old ;)","body":"Have to say that brute force iteration could be quite lengthy if the log file&#39;s more than a few days old ;)"},{"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"score":0,"creation_date":1684346336,"post_id":76273554,"comment_id":134506454,"body_markdown":"This solution works, thank you for that, but I can&#39;t help but feel it could be a little more elegant - having my program write to a file and then read from it again just for a graphical log seems clunky. I&#39;ll leave this question open for a while, and if no alternatives arise then I shall use this and mark yours as the accepted answer.\n\nThanks again!","body":"This solution works, thank you for that, but I can&#39;t help but feel it could be a little more elegant - having my program write to a file and then read from it again just for a graphical log seems clunky. I&#39;ll leave this question open for a while, and if no alternatives arise then I shall use this and mark yours as the accepted answer.  Thanks again!"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684349511,"post_id":76273554,"comment_id":134507052,"body_markdown":"Well of course, &quot;elegant&quot; could really only be the &#39;proper&#39; solution, which, as you&#39;ve seen, requires quite a lot of code. But another way which would be more efficient would be to sort the files in the log dir by timestamp.","body":"Well of course, &quot;elegant&quot; could really only be the &#39;proper&#39; solution, which, as you&#39;ve seen, requires quite a lot of code. But another way which would be more efficient would be to sort the files in the log dir by timestamp."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684359894,"post_id":76273554,"comment_id":134509019,"body_markdown":"My added method is much more efficient","body":"My added method is much more efficient"}],"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684359832,"creation_date":1684336033,"answer_id":76273554,"question_id":76273208,"body_markdown":"Maybe try something like (quick and dirty - you&#39;d definitely want to guard against endless looping):\r\n\r\n    import java.time.format.*;\r\n    import java.time.*;\r\n    import java.util.Comparator;\r\n    import java.nio.file.*;\r\n    import java.io.IOException;\r\n    \r\n    public class FName {\r\n        public static void main(String[] args) {\r\n            try {\r\n                //System.out.println(FName.getLatestLogFileName(Path.of(&quot;/tmp&quot;)));\r\n                System.out.println(FName.findLatestLogFileName(Path.of(&quot;/tmp&quot;)));\r\n            } catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public static Path findLatestLogFileName(Path logsDir) throws Exception {\r\n            // Tighten this pattern up as necessary\r\n            final String LOGFILE_PAT =&quot;.*\\\\.log&quot;;\r\n            return Files.find(logsDir, 1, (p, attr) -&gt;p.getFileName().toString().matches(LOGFILE_PAT)).\r\n                sorted(Comparator.comparingLong(p -&gt;p.toFile().lastModified())).\r\n                reduce((first, second) -&gt; second).\r\n                orElse(null);\r\n        }\r\n    \r\n        public static Path getLatestLogFileName(Path logsDir) {\r\n            Path result = null;\r\n            LocalDateTime ldt = LocalDateTime.now();\r\n            DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd MMMM uuuu HH.mm.ss&quot;);\r\n            boolean foundLogFile = false;\r\n            while (result == null) {\r\n                Path test = logsDir.resolve(Path.of(dtf.format(ldt) + &quot;.log&quot;));\r\n                if (Files.exists(test)) {\r\n                    result = test;\r\n                } else {\r\n                    ldt = ldt.minusSeconds(1);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n","title":"Print Log4j2 output into JTextArea","body":"<p>Maybe try something like (quick and dirty - you'd definitely want to guard against endless looping):</p>\n<pre><code>import java.time.format.*;\nimport java.time.*;\nimport java.util.Comparator;\nimport java.nio.file.*;\nimport java.io.IOException;\n\npublic class FName {\n    public static void main(String[] args) {\n        try {\n            //System.out.println(FName.getLatestLogFileName(Path.of(&quot;/tmp&quot;)));\n            System.out.println(FName.findLatestLogFileName(Path.of(&quot;/tmp&quot;)));\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n\n    public static Path findLatestLogFileName(Path logsDir) throws Exception {\n        // Tighten this pattern up as necessary\n        final String LOGFILE_PAT =&quot;.*\\\\.log&quot;;\n        return Files.find(logsDir, 1, (p, attr) -&gt;p.getFileName().toString().matches(LOGFILE_PAT)).\n            sorted(Comparator.comparingLong(p -&gt;p.toFile().lastModified())).\n            reduce((first, second) -&gt; second).\n            orElse(null);\n    }\n\n    public static Path getLatestLogFileName(Path logsDir) {\n        Path result = null;\n        LocalDateTime ldt = LocalDateTime.now();\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd MMMM uuuu HH.mm.ss&quot;);\n        boolean foundLogFile = false;\n        while (result == null) {\n            Path test = logsDir.resolve(Path.of(dtf.format(ldt) + &quot;.log&quot;));\n            if (Files.exists(test)) {\n                result = test;\n            } else {\n                ldt = ldt.minusSeconds(1);\n            }\n        }\n        return result;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18318740,"reputation":75,"user_id":13339986,"display_name":"BlockyPenguin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76273554,"answer_count":1,"score":0,"last_activity_date":1684359832,"creation_date":1684333653,"question_id":76273208,"body_markdown":"I have a `JTextArea` in my program which I would like to display the program&#39;s logs. I&#39;ve done some digging and found `OutputStreamAppender` in the Log4j2 documentation, which I assume I could use to output logs to an `OutputStream` which I could then pipe into the `JTextArea`. Unfortunately there isn&#39;t much documentation (at least that I could find) on this. Am I on the right track here? If so, how do I use `OutputStreamAppender`? If not, what should I be doing? I&#39;d rather not create my own Appender.\r\n\r\nThanks","title":"Print Log4j2 output into JTextArea","body":"<p>I have a <code>JTextArea</code> in my program which I would like to display the program's logs. I've done some digging and found <code>OutputStreamAppender</code> in the Log4j2 documentation, which I assume I could use to output logs to an <code>OutputStream</code> which I could then pipe into the <code>JTextArea</code>. Unfortunately there isn't much documentation (at least that I could find) on this. Am I on the right track here? If so, how do I use <code>OutputStreamAppender</code>? If not, what should I be doing? I'd rather not create my own Appender.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","maven","spring-mvc","model-view-controller"],"comments":[{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1684406961,"post_id":76276311,"comment_id":134514634,"body_markdown":"Railway url is invaild , pls provide one another accessable url","body":"Railway url is invaild , pls provide one another accessable url"},{"owner":{"account_id":17458032,"reputation":19,"user_id":12656364,"display_name":"krzysztofskul"},"score":0,"creation_date":1684411064,"post_id":76276311,"comment_id":134515339,"body_markdown":"I generated this url on railway&#39;s dashboard. Any url I create doesn&#39;t work. But when I use  SprongBOOT configuration in my pom.xml everything works fine.","body":"I generated this url on railway&#39;s dashboard. Any url I create doesn&#39;t work. But when I use  SprongBOOT configuration in my pom.xml everything works fine."}],"owner":{"account_id":17458032,"reputation":19,"user_id":12656364,"display_name":"krzysztofskul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684358810,"creation_date":1684358810,"question_id":76276311,"body_markdown":"I try to deploy Java Spring MVC web app which works fine on my localhost with Tomcat, but when deploy on railway.app, it crashes or find nothing when try to use any controller path/address. My webapp configuration files:\r\n\r\npom.xml\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;pl.krzysztofskul&lt;/groupId&gt;\r\n  &lt;artifactId&gt;sensit5&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;name&gt;sensit5&lt;/name&gt;\r\n  &lt;description&gt;A simple sensit5.&lt;/description&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\t&lt;java.version&gt;8&lt;/java.version&gt;\r\n\t&lt;maven-compiler-pluging.version&gt;3.10.1&lt;/maven-compiler-pluging.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.1&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/jstl --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\t&lt;!-- E-MAIL --&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n\t    &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t\t    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n&lt;!--        &lt;version&gt;5.1.8.RELEASE&lt;/version&gt;--&gt;\r\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.7.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${maven-compiler-pluging.version}&lt;/version&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t    &lt;source&gt;${java.version}&lt;/source&gt;\r\n\t\t\t    &lt;target&gt;${java.version}&lt;/target&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n\t\t&lt;plugin&gt;\r\n\t\t  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;3.3.2&lt;/version&gt;\r\n\t\t&lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t     &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t     &lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t     &lt;configuration&gt;\r\n\t\t       &lt;archive&gt;\r\n\t\t         &lt;manifest&gt;\r\n\t\t           &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n\t\t           &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n\t\t           &lt;mainClass&gt;pl.krzysztofskul.sensit5.App&lt;/mainClass&gt;\r\n\t\t         &lt;/manifest&gt;\r\n\t\t       &lt;/archive&gt;\r\n\t\t     &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n\r\n  &lt;reporting&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/reporting&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nApp.class\r\n```\r\npackage pl.krzysztofskul.sensit5;\r\n\r\nimport javax.servlet.Filter;\r\n\r\nimport org.springframework.web.filter.CharacterEncodingFilter;\r\nimport org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\r\n\r\npublic class App extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n\t\r\n    public static void main( String[] args )\r\n    {\r\n        System.out.println( &quot;Hello World sensit5!&quot; );\r\n    }\r\n    \r\n    @Override\r\n    protected Class&lt;?&gt;[] getRootConfigClasses() { return null; }\r\n\r\n    @Override\r\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n        return new Class[]{AppConfig.class};\r\n    }\r\n\r\n    @Override\r\n    protected String[] getServletMappings() {\r\n        return new String[]{&quot;/&quot;};\r\n    }\r\n\r\n    @Override\r\n    protected Filter[] getServletFilters() {\r\n        CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();\r\n        characterEncodingFilter.setEncoding(&quot;UTF-8&quot;);\r\n        return new Filter[] { characterEncodingFilter };\r\n    }\r\n    \r\n}\r\n```\r\nAppConfig.class\r\n```\r\npackage pl.krzysztofskul.sensit5;\r\n\r\nimport java.util.Locale;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.servlet.LocaleContextResolver;\r\nimport org.springframework.web.servlet.ViewResolver;\r\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\nimport org.springframework.web.servlet.i18n.SessionLocaleResolver;\r\nimport org.springframework.web.servlet.view.InternalResourceViewResolver;\r\nimport org.springframework.web.servlet.view.JstlView;\r\n\r\n@Configuration\r\n@EnableWebMvc\r\n@ComponentScan(basePackages = &quot;pl.krzysztofskul.sensit5&quot;)\r\npublic class AppConfig implements WebMvcConfigurer {\r\n\r\n    @Bean\r\n    public ViewResolver internalResourceViewResolver() {\r\n        InternalResourceViewResolver bean = new InternalResourceViewResolver();\r\n        bean.setViewClass(JstlView.class);\r\n        bean.setPrefix(&quot;/WEB-INF/views/&quot;);\r\n        bean.setSuffix(&quot;.jsp&quot;);\r\n        return bean;\r\n    }\r\n\r\n    @Bean(name=&quot;localeResolver&quot;)\r\n    public LocaleContextResolver getLocaleContextResolver() {\r\n        SessionLocaleResolver localeResolver = new SessionLocaleResolver();\r\n        localeResolver.setDefaultLocale(new Locale(&quot;pl&quot;,&quot;PL&quot;));\r\n        return localeResolver;\r\n    }\r\n  \r\n    @Override\r\n    public void addResourceHandlers(ResourceHandlerRegistry handlerRegistry) {\r\n        handlerRegistry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;);\r\n    }\r\n\t\r\n}\r\n```\r\n\r\nHomePageController.class\r\n```\r\npackage pl.krzysztofskul.sensit5;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.ResponseBody;\r\n\r\n@Controller\r\npublic class HomePageController {\r\n\r\n\t@GetMapping({&quot;/home&quot;, &quot;/&quot;})\r\n\tpublic String home() {\r\n\t\treturn &quot;index&quot;;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/test/home&quot;)\r\n\t@ResponseBody\r\n\tpublic String testHome() {\r\n\t\treturn &quot;test home sensit5&quot;;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\n\r\nGihub: https://github.com/krzysztofskul/sensit5.git\r\nRailway: https://sensit5-test.up.railway.app","title":"Java Spring MVC web app crashes after deploy on railway.app","body":"<p>I try to deploy Java Spring MVC web app which works fine on my localhost with Tomcat, but when deploy on railway.app, it crashes or find nothing when try to use any controller path/address. My webapp configuration files:</p>\n<p>pom.xml</p>\n<pre><code>\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;pl.krzysztofskul&lt;/groupId&gt;\n  &lt;artifactId&gt;sensit5&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;name&gt;sensit5&lt;/name&gt;\n  &lt;description&gt;A simple sensit5.&lt;/description&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;java.version&gt;8&lt;/java.version&gt;\n    &lt;maven-compiler-pluging.version&gt;3.10.1&lt;/maven-compiler-pluging.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/jstl --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- E-MAIL --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n            &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n&lt;!--        &lt;version&gt;5.1.8.RELEASE&lt;/version&gt;--&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n            &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n        &lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven-compiler-pluging.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.version}&lt;/source&gt;\n                &lt;target&gt;${java.version}&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.3.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n             &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n             &lt;version&gt;3.1.0&lt;/version&gt;\n             &lt;configuration&gt;\n               &lt;archive&gt;\n                 &lt;manifest&gt;\n                   &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                   &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                   &lt;mainClass&gt;pl.krzysztofskul.sensit5.App&lt;/mainClass&gt;\n                 &lt;/manifest&gt;\n               &lt;/archive&gt;\n             &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n\n  &lt;reporting&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/reporting&gt;\n&lt;/project&gt;\n</code></pre>\n<p>App.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport javax.servlet.Filter;\n\nimport org.springframework.web.filter.CharacterEncodingFilter;\nimport org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\n\npublic class App extends AbstractAnnotationConfigDispatcherServletInitializer {\n    \n    public static void main( String[] args )\n    {\n        System.out.println( &quot;Hello World sensit5!&quot; );\n    }\n    \n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() { return null; }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[]{AppConfig.class};\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[]{&quot;/&quot;};\n    }\n\n    @Override\n    protected Filter[] getServletFilters() {\n        CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();\n        characterEncodingFilter.setEncoding(&quot;UTF-8&quot;);\n        return new Filter[] { characterEncodingFilter };\n    }\n    \n}\n</code></pre>\n<p>AppConfig.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport java.util.Locale;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.LocaleContextResolver;\nimport org.springframework.web.servlet.ViewResolver;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\nimport org.springframework.web.servlet.i18n.SessionLocaleResolver;\nimport org.springframework.web.servlet.view.InternalResourceViewResolver;\nimport org.springframework.web.servlet.view.JstlView;\n\n@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages = &quot;pl.krzysztofskul.sensit5&quot;)\npublic class AppConfig implements WebMvcConfigurer {\n\n    @Bean\n    public ViewResolver internalResourceViewResolver() {\n        InternalResourceViewResolver bean = new InternalResourceViewResolver();\n        bean.setViewClass(JstlView.class);\n        bean.setPrefix(&quot;/WEB-INF/views/&quot;);\n        bean.setSuffix(&quot;.jsp&quot;);\n        return bean;\n    }\n\n    @Bean(name=&quot;localeResolver&quot;)\n    public LocaleContextResolver getLocaleContextResolver() {\n        SessionLocaleResolver localeResolver = new SessionLocaleResolver();\n        localeResolver.setDefaultLocale(new Locale(&quot;pl&quot;,&quot;PL&quot;));\n        return localeResolver;\n    }\n  \n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry handlerRegistry) {\n        handlerRegistry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;);\n    }\n    \n}\n</code></pre>\n<p>HomePageController.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\n@Controller\npublic class HomePageController {\n\n    @GetMapping({&quot;/home&quot;, &quot;/&quot;})\n    public String home() {\n        return &quot;index&quot;;\n    }\n    \n    @GetMapping(&quot;/test/home&quot;)\n    @ResponseBody\n    public String testHome() {\n        return &quot;test home sensit5&quot;;\n    }\n    \n}\n</code></pre>\n<p>Gihub: <a href=\"https://github.com/krzysztofskul/sensit5.git\" rel=\"nofollow noreferrer\">https://github.com/krzysztofskul/sensit5.git</a>\nRailway: <a href=\"https://sensit5-test.up.railway.app\" rel=\"nofollow noreferrer\">https://sensit5-test.up.railway.app</a></p>\n"},{"tags":["java","spring-boot","jpa","design-patterns","dry"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1579075479,"post_id":59747099,"comment_id":105641420,"body_markdown":"Whoever told you there would be multiple DB calls is... misinformed. The _entire point_ of `@MappedSuperclass` is that it&#39;s copied inline into each subclass&#39;s table. (As a note, it&#39;s customary in Java for the backing field to just be named `deleted`.)","body":"Whoever told you there would be multiple DB calls is... misinformed. The <i>entire point</i> of <code>@MappedSuperclass</code> is that it&#39;s copied inline into each subclass&#39;s table. (As a note, it&#39;s customary in Java for the backing field to just be named <code>deleted</code>.)"},{"owner":{"account_id":6811028,"reputation":415,"user_id":6376299,"display_name":"dryleaf"},"score":0,"creation_date":1579075768,"post_id":59747099,"comment_id":105641539,"body_markdown":"Checkout `@Embeddable` and `@Embedded` annotations in spring boot. They can accomplish the same thing without any entity leak.","body":"Checkout <code>@Embeddable</code> and <code>@Embedded</code> annotations in spring boot. They can accomplish the same thing without any entity leak."},{"owner":{"account_id":7307450,"reputation":33,"user_id":5567928,"display_name":"user5567928"},"score":0,"creation_date":1579076505,"post_id":59747099,"comment_id":105641808,"body_markdown":"Thank you guys for helping me out. @chrylis -on strike- Can you explain a bit what you meant by &quot;backing field&quot; please.","body":"Thank you guys for helping me out. @chrylis -on strike- Can you explain a bit what you meant by &quot;backing field&quot; please."},{"owner":{"account_id":1455702,"reputation":15684,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":0,"creation_date":1579104894,"post_id":59747099,"comment_id":105656937,"body_markdown":"The drawback may be coupling between your services. If you modify `BaseEntity`, are you then forced to update and redeploy each service depending on it? That kind of coupling would violate the idea of micro-services.","body":"The drawback may be coupling between your services. If you modify <code>BaseEntity</code>, are you then forced to update and redeploy each service depending on it? That kind of coupling would violate the idea of micro-services."},{"owner":{"account_id":7307450,"reputation":33,"user_id":5567928,"display_name":"user5567928"},"score":0,"creation_date":1579159020,"post_id":59747099,"comment_id":105673690,"body_markdown":"Thank you for yours kind concern @jaco0646, If I modify my base entity, then it would mean that my business requirement requires that modification to be reflected across all micro-service&#39;s entity. Modification will be only done in my base class if that requires to be reflected across entire eco-system, else the modification will be local to entities of individual micro-services. Also can you please tell me more how this is violating the micro-service principles please? My current development is CQRS based granular micro-service, where a single service should have a single concern.","body":"Thank you for yours kind concern @jaco0646, If I modify my base entity, then it would mean that my business requirement requires that modification to be reflected across all micro-service&#39;s entity. Modification will be only done in my base class if that requires to be reflected across entire eco-system, else the modification will be local to entities of individual micro-services. Also can you please tell me more how this is violating the micro-service principles please? My current development is CQRS based granular micro-service, where a single service should have a single concern."},{"owner":{"account_id":7307450,"reputation":33,"user_id":5567928,"display_name":"user5567928"},"score":0,"creation_date":1579162039,"post_id":59747099,"comment_id":105674906,"body_markdown":"@jaco0646, Also I would request you to please explain, if using a common jar as shared library where I have common reusable utilities and functionalities is a bad idea in micro-service world? I have used this shared library concept to define the Base entity. Then how should I structure common codes for interfaces,base classes and utility functions like encryption helpers etc?\nThank you for yours kind attention","body":"@jaco0646, Also I would request you to please explain, if using a common jar as shared library where I have common reusable utilities and functionalities is a bad idea in micro-service world? I have used this shared library concept to define the Base entity. Then how should I structure common codes for interfaces,base classes and utility functions like encryption helpers etc? Thank you for yours kind attention"}],"answers":[{"comments":[{"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"score":0,"creation_date":1639174370,"post_id":59747762,"comment_id":124290156,"body_markdown":"I would add further than you can extend that abstract class with your own abstract class to add in an Long id field (or whatever type you need) using the @Id annotation in it.  I do also like a base abstract class without audit fields for some needs as well.","body":"I would add further than you can extend that abstract class with your own abstract class to add in an Long id field (or whatever type you need) using the @Id annotation in it.  I do also like a base abstract class without audit fields for some needs as well."}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1684358737,"creation_date":1579078073,"answer_id":59747762,"question_id":59747099,"body_markdown":"I don&#39;t see any problems since your entity does not have any fields that can navigate to other entities (i.e does not have field that is mapped with `@OneToMany` / `@ManyToOne`) , so all of its fields are mapped to the same DB table and there is no reasons it will lead to separate database calls to load an entity. \r\n\r\n[tag:spring-data-jpa] also provides a base entity [`AbstractAuditable`][1] which developer can choose to use it rather than create by their own (though using it will increase the coupling of the entity to Spring Data) , so making the base entity as a separate shared JAR and let other projects to use is very common. It is even a good practise if your company have some rules that all entities must have certain set of fields like id , createdBy etc. mainly because it can make the codes DRY as said by you.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-data-jpa/blob/850aaac3710e2d9c12744a538964c27e0c18ba78/spring-data-jpa/src/main/java/org/springframework/data/jpa/domain/AbstractAuditable.java#L42","title":"Drawbacks of creating base class for JPA Entity(domain type object) in a shared library","body":"<p>I don't see any problems since your entity does not have any fields that can navigate to other entities (i.e does not have field that is mapped with <code>@OneToMany</code> / <code>@ManyToOne</code>) , so all of its fields are mapped to the same DB table and there is no reasons it will lead to separate database calls to load an entity.</p>\n<p><a href=\"/questions/tagged/spring-data-jpa\" class=\"post-tag\" title=\"show questions tagged &#39;spring-data-jpa&#39;\" aria-label=\"show questions tagged &#39;spring-data-jpa&#39;\" rel=\"tag\" aria-labelledby=\"tag-spring-data-jpa-tooltip-container\">spring-data-jpa</a> also provides a base entity <a href=\"https://github.com/spring-projects/spring-data-jpa/blob/850aaac3710e2d9c12744a538964c27e0c18ba78/spring-data-jpa/src/main/java/org/springframework/data/jpa/domain/AbstractAuditable.java#L42\" rel=\"nofollow noreferrer\"><code>AbstractAuditable</code></a> which developer can choose to use it rather than create by their own (though using it will increase the coupling of the entity to Spring Data) , so making the base entity as a separate shared JAR and let other projects to use is very common. It is even a good practise if your company have some rules that all entities must have certain set of fields like id , createdBy etc. mainly because it can make the codes DRY as said by you.</p>\n"}],"owner":{"account_id":7307450,"reputation":33,"user_id":5567928,"display_name":"user5567928"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6006,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":59747762,"answer_count":1,"score":2,"last_activity_date":1684358737,"creation_date":1579074939,"question_id":59747099,"body_markdown":"I&#39;m an experienced .net developer recently shifted to java development. I&#39;m working on micro-service using spring boot/cloud. For my work I have created a common jar(shared library) where I&#39;m placing those functionalities and helper methods which are to be reused across different micro-services. \r\n\r\nI&#39;m calling the shared library in my each spring boot micro-service application by adding it their pom file.This is all working great and I&#39;m able to use the shared library in my every micro-service as intended.      \r\n\r\nNow..\r\nI&#39;m using JPA for saving data and hence each micro-service application requires to have an entity class which is using code first way to create persistence in their respective data store.\r\n\r\nSince there are few common fields required in most micro-services I thought the idea of creating a base Entity class in my common jar(shared library) and make entities in my micro-services inherit the base Entity class.\r\n\r\nThis is the base Entity class that I created in my shared library\r\n\r\n    package com.microservice.xcloud.common.entity;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.MappedSuperclass;\r\n    \r\n    @MappedSuperclass\r\n    public class BaseEntity {\r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.AUTO)\r\n    \tLong id;\r\n    \r\n    \t...\r\n    \t\r\n    \t@Column(nullable = true , name = &quot;isDeleted&quot;)\r\n    \tprivate boolean isDeleted;\r\n    \r\n    \tpublic Long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \t...\r\n    \r\n    \tpublic boolean isDeleted() {\r\n    \t\treturn isDeleted;\r\n    \t}\r\n    \r\n    \tpublic void setDeleted(boolean isDeleted) {\r\n    \t\tthis.isDeleted = isDeleted;\r\n    \t}\t\r\n    \t\r\n    }\r\n\r\nNow in my different micro-services I&#39;m inheriting from this class in order to have those fields without writing them again and again.(**DRY** princliple).\r\n\r\nI&#39;ve used this way while working with .net and EF also and found it to be working perfectly well. I would place the base entity in a shared dll and inherit from it in my application.\r\nSo I though of using the same thing for java and I did this in my micro-service application&#39;s Entity class.\r\n\r\n    package com.microservice.xcloud.companyservice.entity;\r\n    \r\n    \r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Table;\r\n    \r\n    import com.microservice.xcloud.common.entity.BaseEntity;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;companymaster&quot;)\r\n    public class CompanyMaster extends BaseEntity{\r\n    \t\r\n    \t\r\n    \t\r\n    \t@Column(nullable = false , name = &quot;companyName&quot;)\r\n    \tprivate String companyName;\r\n    \r\n    \t@Column(nullable = true , name = &quot;description&quot;)\r\n    \tprivate String description;\r\n    \r\n    \t\r\n    \r\n    \tpublic String getCompanyName() {\r\n    \t\treturn companyName;\r\n    \t}\r\n    \r\n    \tpublic void setCompanyName(String companyName) {\r\n    \t\tthis.companyName = companyName;\r\n    \t}\r\n    \r\n    \tpublic String getDescription() {\r\n    \t\treturn description;\r\n    \t}\r\n    \r\n    \tpublic void setDescription(String description) {\r\n    \t\tthis.description = description;\r\n    \t}\r\n    \r\n    \tpublic CompanyMaster() {\r\n    \t\tsuper();\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nPlease note that I have two different applications, \r\n1. Shared java library called common\r\n2. Micro-service application called company-service using the shared library through pom\r\n\r\n    \r\n\r\n    &lt;!-- Shared library --&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.microservice.xcloud&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;common&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${project.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI was told that this is a bad architecture and should not be done this way. Also I was told that this would led to two separate calls to db, one for shared library&#39;s base entity and another for micro-service&#39;s entity class. This is something I never heard about in .net world. Since I&#39;m new to java I need your expert advise.\r\nAs far as I know , in .net world since a shared library is a dll and it can not run seperately and needs to be attached to the application, this is totally out of question.\r\nMy shared library(created using spring boot) has no main method and hence should be attached to the calling micro-service like a dll type jar attaching to exe type of jar.\r\n\r\nThanking you for yours expertise and kind attention\r\n\t\t&lt;!-- ************************************************* --&gt;\r\n\r\n\r\n","title":"Drawbacks of creating base class for JPA Entity(domain type object) in a shared library","body":"<p>I'm an experienced .net developer recently shifted to java development. I'm working on micro-service using spring boot/cloud. For my work I have created a common jar(shared library) where I'm placing those functionalities and helper methods which are to be reused across different micro-services. </p>\n\n<p>I'm calling the shared library in my each spring boot micro-service application by adding it their pom file.This is all working great and I'm able to use the shared library in my every micro-service as intended.      </p>\n\n<p>Now..\nI'm using JPA for saving data and hence each micro-service application requires to have an entity class which is using code first way to create persistence in their respective data store.</p>\n\n<p>Since there are few common fields required in most micro-services I thought the idea of creating a base Entity class in my common jar(shared library) and make entities in my micro-services inherit the base Entity class.</p>\n\n<p>This is the base Entity class that I created in my shared library</p>\n\n<pre><code>package com.microservice.xcloud.common.entity;\n\nimport javax.persistence.Column;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.MappedSuperclass;\n\n@MappedSuperclass\npublic class BaseEntity {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    Long id;\n\n    ...\n\n    @Column(nullable = true , name = \"isDeleted\")\n    private boolean isDeleted;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n    ...\n\n    public boolean isDeleted() {\n        return isDeleted;\n    }\n\n    public void setDeleted(boolean isDeleted) {\n        this.isDeleted = isDeleted;\n    }   \n\n}\n</code></pre>\n\n<p>Now in my different micro-services I'm inheriting from this class in order to have those fields without writing them again and again.(<strong>DRY</strong> princliple).</p>\n\n<p>I've used this way while working with .net and EF also and found it to be working perfectly well. I would place the base entity in a shared dll and inherit from it in my application.\nSo I though of using the same thing for java and I did this in my micro-service application's Entity class.</p>\n\n<pre><code>package com.microservice.xcloud.companyservice.entity;\n\n\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Table;\n\nimport com.microservice.xcloud.common.entity.BaseEntity;\n\n@Entity\n@Table(name = \"companymaster\")\npublic class CompanyMaster extends BaseEntity{\n\n\n\n    @Column(nullable = false , name = \"companyName\")\n    private String companyName;\n\n    @Column(nullable = true , name = \"description\")\n    private String description;\n\n\n\n    public String getCompanyName() {\n        return companyName;\n    }\n\n    public void setCompanyName(String companyName) {\n        this.companyName = companyName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public CompanyMaster() {\n        super();\n\n    }\n}\n</code></pre>\n\n<p>Please note that I have two different applications, \n1. Shared java library called common\n2. Micro-service application called company-service using the shared library through pom</p>\n\n<pre><code>&lt;!-- Shared library --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.microservice.xcloud&lt;/groupId&gt;\n    &lt;artifactId&gt;common&lt;/artifactId&gt;\n    &lt;version&gt;${project.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I was told that this is a bad architecture and should not be done this way. Also I was told that this would led to two separate calls to db, one for shared library's base entity and another for micro-service's entity class. This is something I never heard about in .net world. Since I'm new to java I need your expert advise.\nAs far as I know , in .net world since a shared library is a dll and it can not run seperately and needs to be attached to the application, this is totally out of question.\nMy shared library(created using spring boot) has no main method and hence should be attached to the calling micro-service like a dll type jar attaching to exe type of jar.</p>\n\n<p>Thanking you for yours expertise and kind attention\n        </p>\n"},{"tags":["java","jpa","jackson"],"comments":[{"owner":{"account_id":14999839,"reputation":138,"user_id":10827862,"display_name":"smileis2333"},"score":0,"creation_date":1684487330,"post_id":76276299,"comment_id":134527679,"body_markdown":"could u post the test code about these","body":"could u post the test code about these"}],"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684358706,"creation_date":1684358706,"question_id":76276299,"body_markdown":"I have a JPA entity with circular references to other entities. To solve the serialization issue this causes I have added the @JsonIdentityInfo annotation, like so:\r\n\r\n```\r\nprivate class Child {\r\n\r\n  private long id;\r\n\r\n  @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n  private Parent parent;\r\n}\r\n\r\n```\r\n\r\nThis results in the following serialization:\r\n\r\n```\r\n{\r\n  &quot;id&quot;: 1,\r\n  &quot;parent&quot;: 1\r\n}\r\n```\r\n\r\nThis would be fine normally, however I have a custom JsonSerializer on Parent.id attibute to encode its long id into a String. I would like this custom Serializer to be used by @JsonIdentityInfo.\r\n\r\nHow can I do that?\r\n\r\nI have tried implementing a custom ObjectIdGenerator, but I can&#39;t figure out how to do it or if that&#39;s the way to go about this.","title":"How to use @JsonIdentityInfo with custom attribute serializer","body":"<p>I have a JPA entity with circular references to other entities. To solve the serialization issue this causes I have added the @JsonIdentityInfo annotation, like so:</p>\n<pre><code>private class Child {\n\n  private long id;\n\n  @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\n  private Parent parent;\n}\n\n</code></pre>\n<p>This results in the following serialization:</p>\n<pre><code>{\n  &quot;id&quot;: 1,\n  &quot;parent&quot;: 1\n}\n</code></pre>\n<p>This would be fine normally, however I have a custom JsonSerializer on Parent.id attibute to encode its long id into a String. I would like this custom Serializer to be used by @JsonIdentityInfo.</p>\n<p>How can I do that?</p>\n<p>I have tried implementing a custom ObjectIdGenerator, but I can't figure out how to do it or if that's the way to go about this.</p>\n"},{"tags":["java","image","netbeans","imageicon","gui-builder"],"comments":[{"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"score":0,"creation_date":1338788653,"post_id":10876742,"comment_id":14173933,"body_markdown":"Could you add the source code where you instantiate the `ImageIcon`?","body":"Could you add the source code where you instantiate the <code>ImageIcon</code>?"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1338788835,"post_id":10876742,"comment_id":14173956,"body_markdown":"to change 156th line in FrameView from setVisible(false) to setVisible(true), rest of changes I can&#39;t see from my magic globe (low baterry), for better help sooner post an [SSCCE](http://sscce.org/)","body":"to change 156th line in FrameView from setVisible(false) to setVisible(true), rest of changes I can&#39;t see from my magic globe (low baterry), for better help sooner post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>"},{"owner":{"account_id":1237894,"reputation":725,"user_id":1201103,"accept_rate":90,"display_name":"LastStar007"},"score":0,"creation_date":1338790040,"post_id":10876742,"comment_id":14174193,"body_markdown":"The NetBeans GUIBuilder makes its own source code, but here you go anyway:\n`jLabel1.setIcon(new javax.swing.ImageIcon(&quot;C:\\\\NoSpace\\\\Minesweeper\\\\Minesweeper graphics\\\\one.png&quot;));`","body":"The NetBeans GUIBuilder makes its own source code, but here you go anyway: <code>jLabel1.setIcon(new javax.swing.ImageIcon(&quot;C:\\\\NoSpace\\\\Minesweeper\\\\Minesweeper graphics\\\\one.png&quot;));</code>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1338790501,"post_id":10876742,"comment_id":14174276,"body_markdown":"1) Don&#39;t use a `File` to load an embedded resource. (WAG) 2) For better help sooner, post an [SSCCE](http://sscce.org/). (Excellent generic advice)","body":"1) Don&#39;t use a <code>File</code> to load an embedded resource. (WAG) 2) For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>. (Excellent generic advice)"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1338790748,"post_id":10876742,"comment_id":14174332,"body_markdown":"@LastStar007  That is exceptionally poor advice, even for a comment.  1) Using a `String` that represents a `File` for an application Icon. 2) Using an absolute path for same. 3) Making it platform specific in the path separator.","body":"@LastStar007  That is exceptionally poor advice, even for a comment.  1) Using a <code>String</code> that represents a <code>File</code> for an application Icon. 2) Using an absolute path for same. 3) Making it platform specific in the path separator."},{"owner":{"account_id":470974,"reputation":5658,"user_id":878469,"accept_rate":69,"display_name":"predi"},"score":0,"creation_date":1338815639,"post_id":10876742,"comment_id":14181843,"body_markdown":"Have you tried creating a new package in your src folder, adding the icon there and then using &quot;Image within project&quot;?","body":"Have you tried creating a new package in your src folder, adding the icon there and then using &quot;Image within project&quot;?"},{"owner":{"account_id":1237894,"reputation":725,"user_id":1201103,"accept_rate":90,"display_name":"LastStar007"},"score":0,"creation_date":1338816085,"post_id":10876742,"comment_id":14182035,"body_markdown":"Yes. I&#39;ve also tried importing the image to the same package as the JLabel, to no avail.","body":"Yes. I&#39;ve also tried importing the image to the same package as the JLabel, to no avail."},{"owner":{"account_id":1161303,"reputation":19991,"user_id":1140748,"accept_rate":93,"display_name":"alain.janinm"},"score":0,"creation_date":1338989184,"post_id":10876742,"comment_id":14234550,"body_markdown":"@LastStar007 Did you try in an empty Form? I&#39;ve reproduced your description and it works well! So if your Form is empty I agree there is a problem. If not the image doesn&#39;t show probably because there is a mistake elsewhere. If so consider posting an sscce. You can also try to use Clean and Build before running, maybe you have a pb with netbeans Ant script and he doesn&#39;t update itself to use the new image... To conclude I&#39;ll suggest to use &quot;image within project or &quot;&quot;custom code&quot;  instead of &quot;image chooser&quot; and &quot;external file&quot;. It will be better for portability.","body":"@LastStar007 Did you try in an empty Form? I&#39;ve reproduced your description and it works well! So if your Form is empty I agree there is a problem. If not the image doesn&#39;t show probably because there is a mistake elsewhere. If so consider posting an sscce. You can also try to use Clean and Build before running, maybe you have a pb with netbeans Ant script and he doesn&#39;t update itself to use the new image... To conclude I&#39;ll suggest to use &quot;image within project or &quot;&quot;custom code&quot;  instead of &quot;image chooser&quot; and &quot;external file&quot;. It will be better for portability."},{"owner":{"account_id":1161303,"reputation":19991,"user_id":1140748,"accept_rate":93,"display_name":"alain.janinm"},"score":0,"creation_date":1338989299,"post_id":10876742,"comment_id":14234608,"body_markdown":"This is a nice tutorial -&gt; http://netbeans.org/kb/docs/java/gui-image-display.html","body":"This is a nice tutorial -&gt; <a href=\"http://netbeans.org/kb/docs/java/gui-image-display.html\" rel=\"nofollow noreferrer\">netbeans.org/kb/docs/java/gui-image-display.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":470974,"reputation":5658,"user_id":878469,"accept_rate":69,"display_name":"predi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338978034,"creation_date":1338978034,"answer_id":10912305,"question_id":10876742,"body_markdown":"I found out the hard way that relying on Netbeans GUI builder to do everything for you is a mistake. \r\n\r\nJust create an icon fetching class like the one below, put the icons in it&#39;s package, and use &quot;Custom code&quot; instead of &quot;Image chooser&quot;. Sure the icons will not be visible inside NB. But if they show up when the app is running, who cares about that.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.example.resource.icons;\r\n\r\n    import javax.swing.ImageIcon;\r\n\r\n    public class IconFetch {\r\n\r\n        private static IconFetch instance;\r\n\r\n        private IconFetch(){\r\n        }\r\n\r\n        public static IconFetch getInstance() {\r\n            if (instance == null)\r\n                instance = new IconFetch();\r\n            return instance;\r\n        }\r\n\r\n        public ImageIcon getIcon(String iconName) {\r\n            java.net.URL imgUrl = getClass().getResource(iconName);\r\n            if (imgUrl != null) {\r\n                return new ImageIcon(imgUrl);\r\n            } else {\r\n                throw new IllegalArgumentException(&quot;This icon file does not exist&quot;);\r\n            }\r\n        }\r\n\r\n        public static final String MINESWEEPER_ONE = &quot;one.png&quot;;\r\n    }\r\n\r\nUsage:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    IconFetch.getInstance().getIcon(IconFetch.MINESWEEPER_ONE);\r\n\r\nIf the icon still doesn&#39;t show up after trying this, then something might be wrong with the way you layed out components in your form (the label is there but you can&#39;t see it).\r\n\r\nHope this helps even though it&#39;s a long shot.","title":"Netbeans ImageIcon not displaying","body":"<p>I found out the hard way that relying on Netbeans GUI builder to do everything for you is a mistake. </p>\n\n<p>Just create an icon fetching class like the one below, put the icons in it's package, and use \"Custom code\" instead of \"Image chooser\". Sure the icons will not be visible inside NB. But if they show up when the app is running, who cares about that.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.resource.icons;\n\nimport javax.swing.ImageIcon;\n\npublic class IconFetch {\n\n    private static IconFetch instance;\n\n    private IconFetch(){\n    }\n\n    public static IconFetch getInstance() {\n        if (instance == null)\n            instance = new IconFetch();\n        return instance;\n    }\n\n    public ImageIcon getIcon(String iconName) {\n        java.net.URL imgUrl = getClass().getResource(iconName);\n        if (imgUrl != null) {\n            return new ImageIcon(imgUrl);\n        } else {\n            throw new IllegalArgumentException(\"This icon file does not exist\");\n        }\n    }\n\n    public static final String MINESWEEPER_ONE = \"one.png\";\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>IconFetch.getInstance().getIcon(IconFetch.MINESWEEPER_ONE);\n</code></pre>\n\n<p>If the icon still doesn't show up after trying this, then something might be wrong with the way you layed out components in your form (the label is there but you can't see it).</p>\n\n<p>Hope this helps even though it's a long shot.</p>\n"},{"comments":[{"owner":{"account_id":6737693,"reputation":301,"user_id":5242345,"accept_rate":80,"display_name":"Walter ZAMBOTTI"},"score":0,"creation_date":1614134769,"post_id":42714497,"comment_id":117290483,"body_markdown":"I&#39;m having the same problem.  Converted the folder to a package. Re-imported all the images.  Works fine in the designer but fails to run with .getResource() unable to find the image file.","body":"I&#39;m having the same problem.  Converted the folder to a package. Re-imported all the images.  Works fine in the designer but fails to run with .getResource() unable to find the image file."}],"tags":[],"owner":{"account_id":4874736,"reputation":331,"user_id":3930191,"accept_rate":50,"display_name":"focus1691"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489137327,"creation_date":1489137327,"answer_id":42714497,"question_id":10876742,"body_markdown":"I had the same problem, and predi&#39;s solution wasn&#39;t working either. Then I created a package instead of a folder, and added the images there, and it works now.","title":"Netbeans ImageIcon not displaying","body":"<p>I had the same problem, and predi's solution wasn't working either. Then I created a package instead of a folder, and added the images there, and it works now.</p>\n"},{"tags":[],"owner":{"account_id":5138923,"reputation":11,"user_id":4116884,"display_name":"Lorenzo Prempratya Premvijit"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1623056501,"creation_date":1623056501,"answer_id":67868757,"question_id":10876742,"body_markdown":"I do have a same problem also. But I found the solution.\r\n\r\n1. I create the package in project and put the images inside there.\r\n2. When I build the project, Netbeans will create &#39;target&#39; folder and build .class files.\r\n3. I found that the images that I copied to the package, did not transfer to the &#39;target&#39; folder.\r\n\r\n**Interim solution.**\r\n4. I copy all image to target folder with the same structure. Then I can run the project directly from Netbeans.\r\n5. Incase you clean the project. Do no.4 again.","title":"Netbeans ImageIcon not displaying","body":"<p>I do have a same problem also. But I found the solution.</p>\n<ol>\n<li>I create the package in project and put the images inside there.</li>\n<li>When I build the project, Netbeans will create 'target' folder and build .class files.</li>\n<li>I found that the images that I copied to the package, did not transfer to the 'target' folder.</li>\n</ol>\n<p><strong>Interim solution.</strong>\n4. I copy all image to target folder with the same structure. Then I can run the project directly from Netbeans.\n5. Incase you clean the project. Do no.4 again.</p>\n"}],"owner":{"account_id":1237894,"reputation":725,"user_id":1201103,"accept_rate":90,"display_name":"LastStar007"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9660,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1684358705,"creation_date":1338788521,"question_id":10876742,"body_markdown":"I am using the NetBeans GUIBuilder to make a JPanel Form. I added a JLabel and used NetBeans&#39; interface to give it an icon from an external image (.png). The path is verified and the image shows up on the GUIBuilder screen. It even shows up when I click the &quot;Preview Design&quot; button. It DOES NOT show up when I RUN the project. The rest of the GUI appears as it should. Do any of you know why this happening and/or how to fix it?\r\n\r\nA lot of you have been asking for an SSCCE. Since the code is generated by the NetBeans Form Builder, I have instead included the steps I took to make the JLabel. The areas of focus are circled in red.\r\n\r\n1. Drag and drop a JLabel into the Form Builder.\r\n![Drag and drop a JLabel into the Form Builder.][1]\r\n\r\n2. Open up the JLabel&#39;s properties menu. Enter the empty string (&quot;&quot;) for the `text` field. Click the ellipsis next to `icon`.\r\n![Open up the JLabel&#39;s properties menu. Click the ellipsis next to icon.][2]\r\n\r\n3. Select External Image and click the ellipsis. \r\n![Select External Image and click the ellipsis.][3]\r\n\r\n4. Select the image of choice. In my case it&#39;s a .png.\r\n![Select the image of choice.][4]\r\n\r\n5. Notice that the image appears in the icon preview.\r\n![Notice that the image appears in the icon preview.][5]\r\n\r\n6. Close the icon menu and the properties menu, and notice that the image appears as the JLabel&#39;s icon on the Form Builder. \r\n![Close the icon menu and the properties menu, and notice that the image appears on the Form Builder.][6]\r\n\r\nThank you for accepting an unorthodox SSCCE and thank you in advance for your help.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/71xH4.jpg\r\n  [2]: http://i.stack.imgur.com/Qa8PJ.jpg\r\n  [3]: http://i.stack.imgur.com/2WA54.jpg\r\n  [4]: http://i.stack.imgur.com/GOfHx.jpg\r\n  [5]: http://i.stack.imgur.com/2wKka.jpg\r\n  [6]: http://i.stack.imgur.com/hRTj3.jpg","title":"Netbeans ImageIcon not displaying","body":"<p>I am using the NetBeans GUIBuilder to make a JPanel Form. I added a JLabel and used NetBeans' interface to give it an icon from an external image (.png). The path is verified and the image shows up on the GUIBuilder screen. It even shows up when I click the \"Preview Design\" button. It DOES NOT show up when I RUN the project. The rest of the GUI appears as it should. Do any of you know why this happening and/or how to fix it?</p>\n\n<p>A lot of you have been asking for an SSCCE. Since the code is generated by the NetBeans Form Builder, I have instead included the steps I took to make the JLabel. The areas of focus are circled in red.</p>\n\n<ol>\n<li><p>Drag and drop a JLabel into the Form Builder.\n<img src=\"https://i.stack.imgur.com/71xH4.jpg\" alt=\"Drag and drop a JLabel into the Form Builder.\"></p></li>\n<li><p>Open up the JLabel's properties menu. Enter the empty string (\"\") for the <code>text</code> field. Click the ellipsis next to <code>icon</code>.\n<img src=\"https://i.stack.imgur.com/Qa8PJ.jpg\" alt=\"Open up the JLabel&#39;s properties menu. Click the ellipsis next to icon.\"></p></li>\n<li><p>Select External Image and click the ellipsis. \n<img src=\"https://i.stack.imgur.com/2WA54.jpg\" alt=\"Select External Image and click the ellipsis.\"></p></li>\n<li><p>Select the image of choice. In my case it's a .png.\n<img src=\"https://i.stack.imgur.com/GOfHx.jpg\" alt=\"Select the image of choice.\"></p></li>\n<li><p>Notice that the image appears in the icon preview.\n<img src=\"https://i.stack.imgur.com/2wKka.jpg\" alt=\"Notice that the image appears in the icon preview.\"></p></li>\n<li><p>Close the icon menu and the properties menu, and notice that the image appears as the JLabel's icon on the Form Builder. \n<img src=\"https://i.stack.imgur.com/hRTj3.jpg\" alt=\"Close the icon menu and the properties menu, and notice that the image appears on the Form Builder.\"></p></li>\n</ol>\n\n<p>Thank you for accepting an unorthodox SSCCE and thank you in advance for your help.</p>\n"},{"tags":["java","android","c++","android-ndk"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1684363492,"post_id":76276288,"comment_id":134509497,"body_markdown":"JNIEnv * env = 0; \nJNIEnv ** envptr = &amp;env;   So you&#39;re making a null pointer, then a pointer to a null pointer?  That&#39;s not right, and I&#39;m shocked it didn&#39;t crash.","body":"JNIEnv * env = 0;  JNIEnv ** envptr = &amp;env;   So you&#39;re making a null pointer, then a pointer to a null pointer?  That&#39;s not right, and I&#39;m shocked it didn&#39;t crash."},{"owner":{"account_id":16512724,"reputation":67,"user_id":11931029,"display_name":"dan123123"},"score":0,"creation_date":1684365362,"post_id":76276288,"comment_id":134509715,"body_markdown":"doing that is fine (it is taking the address of the variable `env` which is not what is null...) where I am having difficulty is elsewhere in the code sample. Might you have insights into that? That code to get `env` is used elsewhere in the codebase and functions ok.","body":"doing that is fine (it is taking the address of the variable <code>env</code> which is not what is null...) where I am having difficulty is elsewhere in the code sample. Might you have insights into that? That code to get <code>env</code> is used elsewhere in the codebase and functions ok."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684365545,"post_id":76276288,"comment_id":134509738,"body_markdown":"Unrelated but assigning 0 to a pointer is a bad practice. Use `nullptr` if your compiler supports it or at least `NULL`.","body":"Unrelated but assigning 0 to a pointer is a bad practice. Use <code>nullptr</code> if your compiler supports it or at least <code>NULL</code>."},{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":0,"creation_date":1684368066,"post_id":76276288,"comment_id":134510019,"body_markdown":"Reminder:  Java has garbage collection.  There is no guarantee when or if the garbage collector runs.  This is usually bad for embedded systems.","body":"Reminder:  Java has garbage collection.  There is no guarantee when or if the garbage collector runs.  This is usually bad for embedded systems."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684380622,"post_id":76276288,"comment_id":134510941,"body_markdown":"You should check the result of every JNI operation. And why assign (*envptr) to env? Makes no sense","body":"You should check the result of every JNI operation. And why assign (*envptr) to env? Makes no sense"}],"owner":{"account_id":16512724,"reputation":67,"user_id":11931029,"display_name":"dan123123"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1684917936,"answer_count":0,"score":1,"last_activity_date":1684358592,"creation_date":1684358592,"question_id":76276288,"body_markdown":"I&#39;m working on an Android application that is currently written fully in C++, implemented as a Native Activity and using CMake to build the project.\r\n\r\nCurrently, I&#39;m looking at trying to call methods in a Java derived WebView class from C++, but am having difficulties with how to use build/use this class with the Native Activity.\r\n\r\nMy `build.gradle` is located in the root of the project, and all of the C++ code is in `src/`. Simply adding the Java file to the project, under `src/main/java/com/my/app/CustomWebView.java`.\r\n\r\nand calling:\r\n\r\n```c++\r\nJNIEnv * env = 0; \r\nJNIEnv ** envptr = &amp;env; \r\nJavaVM * jniiptr = gapp-&gt;activity-&gt;vm; \r\njniiptr-&gt;AttachCurrentThread( (JNIEnv**)&amp;env, 0 ); \r\nenv = (*envptr);\r\njclass customWebViewClass = env-&gt;FindClass(&quot;com/my/app/CustomWebView&quot;);\r\n```\r\n\r\nResults in `customWebViewClass` being null.\r\n\r\nI am unsure on what I need to do for this to be found correctly. I haven&#39;t yet modified any build or manifest files (such as `build.gradle` or `AndroidManifest.xml`), and was wondering if I needed to for this java class to be found correctly?\r\n","title":"Using Java classes from native activity android","body":"<p>I'm working on an Android application that is currently written fully in C++, implemented as a Native Activity and using CMake to build the project.</p>\n<p>Currently, I'm looking at trying to call methods in a Java derived WebView class from C++, but am having difficulties with how to use build/use this class with the Native Activity.</p>\n<p>My <code>build.gradle</code> is located in the root of the project, and all of the C++ code is in <code>src/</code>. Simply adding the Java file to the project, under <code>src/main/java/com/my/app/CustomWebView.java</code>.</p>\n<p>and calling:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>JNIEnv * env = 0; \nJNIEnv ** envptr = &amp;env; \nJavaVM * jniiptr = gapp-&gt;activity-&gt;vm; \njniiptr-&gt;AttachCurrentThread( (JNIEnv**)&amp;env, 0 ); \nenv = (*envptr);\njclass customWebViewClass = env-&gt;FindClass(&quot;com/my/app/CustomWebView&quot;);\n</code></pre>\n<p>Results in <code>customWebViewClass</code> being null.</p>\n<p>I am unsure on what I need to do for this to be found correctly. I haven't yet modified any build or manifest files (such as <code>build.gradle</code> or <code>AndroidManifest.xml</code>), and was wondering if I needed to for this java class to be found correctly?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1684356723,"post_id":76276089,"comment_id":134508448,"body_markdown":"Why would it preserve the variable name?","body":"Why would it preserve the variable name?"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":6,"creation_date":1684356734,"post_id":76276089,"comment_id":134508452,"body_markdown":"Variable names are lost during compilation, they are not needed for the bytecode and hence dropped. The decompiler you used just guessed some names for you.","body":"Variable names are lost during compilation, they are not needed for the bytecode and hence dropped. The decompiler you used just guessed some names for you."},{"owner":{"account_id":3930229,"reputation":2278,"user_id":4412979,"accept_rate":50,"display_name":"Vasily Liaskovsky"},"score":3,"creation_date":1684357038,"post_id":76276089,"comment_id":134508509,"body_markdown":"This question is related https://stackoverflow.com/questions/5746894/what-does-the-javac-debugging-information-option-gvars-do","body":"This question is related <a href=\"https://stackoverflow.com/questions/5746894/what-does-the-javac-debugging-information-option-gvars-do\" title=\"what does the javac debugging information option gvars do\">stackoverflow.com/questions/5746894/&hellip;</a>"},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1684359803,"post_id":76276089,"comment_id":134508999,"body_markdown":"@shmosel – Because the decompiled code would look nicer? Ok, I could not imagine any other reason …","body":"@shmosel – Because the decompiled code would look nicer? Ok, I could not imagine any other reason …"}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1684361351,"post_id":76276119,"comment_id":134509211,"body_markdown":"Note that the `attributes` *can* include attributes called `LocalVariableTable` which give information about the names of local variables. But that information is purely informational: it&#39;s useful for debugging, but not necessary for execution. Also the code of the method itself is actually [an attribute](https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.7.3). So attributes are not just annotation-type information, but some fundamentally important parts of the method as well.","body":"Note that the <code>attributes</code> <i>can</i> include attributes called <code>LocalVariableTable</code> which give information about the names of local variables. But that information is purely informational: it&#39;s useful for debugging, but not necessary for execution. Also the code of the method itself is actually <a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.7.3\" rel=\"nofollow noreferrer\">an attribute</a>. So attributes are not just annotation-type information, but some fundamentally important parts of the method as well."}],"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1684356778,"creation_date":1684356778,"answer_id":76276119,"question_id":76276089,"body_markdown":"At the JVM level, a class method is stored as a [`method_info`](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6) struct instance.\r\n\r\n&gt; ```\r\n&gt; method_info {\r\n&gt;     u2             access_flags;\r\n&gt;     u2             name_index;\r\n&gt;     u2             descriptor_index;\r\n&gt;     u2             attributes_count;\r\n&gt;     attribute_info attributes[attributes_count];\r\n&gt; }\r\n&gt; ```\r\n\r\n* `access_flags` stores modifiers like `public` and `final` as bitflags.\r\n* `name_index` stores the name of the method.\r\n* `descriptor_index` stores the [method descriptor](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3), which is its return type and all parameter types.\r\n* `attributes_count` and `attributes` are the runtime-available attributes such as `@Deprecated` that are declared on the method.\r\n\r\nThat&#39;s it. Everything else is gone. The `.class` file doesn&#39;t know the name of your function&#39;s parameter because that name stopped existing the moment it became a `.class` file. The decompiler is reconstructing your method, so it&#39;s using a placeholder name for variables that don&#39;t have names in the JVM instructions.","title":"Why variable in .class files appear as var?","body":"<p>At the JVM level, a class method is stored as a <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6\" rel=\"noreferrer\"><code>method_info</code></a> struct instance.</p>\n<blockquote>\n<pre><code>method_info {\n    u2             access_flags;\n    u2             name_index;\n    u2             descriptor_index;\n    u2             attributes_count;\n    attribute_info attributes[attributes_count];\n}\n</code></pre>\n</blockquote>\n<ul>\n<li><code>access_flags</code> stores modifiers like <code>public</code> and <code>final</code> as bitflags.</li>\n<li><code>name_index</code> stores the name of the method.</li>\n<li><code>descriptor_index</code> stores the <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3\" rel=\"noreferrer\">method descriptor</a>, which is its return type and all parameter types.</li>\n<li><code>attributes_count</code> and <code>attributes</code> are the runtime-available attributes such as <code>@Deprecated</code> that are declared on the method.</li>\n</ul>\n<p>That's it. Everything else is gone. The <code>.class</code> file doesn't know the name of your function's parameter because that name stopped existing the moment it became a <code>.class</code> file. The decompiler is reconstructing your method, so it's using a placeholder name for variables that don't have names in the JVM instructions.</p>\n"}],"owner":{"account_id":27368539,"reputation":21,"user_id":20874980,"display_name":"Artyom"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76276119,"answer_count":1,"score":0,"last_activity_date":1684358346,"creation_date":1684356418,"question_id":76276089,"body_markdown":"I was curious about .class files and the code inside and realised that variables in one of the classes that I compiled is named as ***var0*** which is very interesting.\r\n\r\nI am wondering if someone could explain why.\r\n\r\nJava Code (.java file):\r\n\r\n``` java\r\npublic class StackOverflowExample {\r\n    public static void main(String[] args) {\r\n        loop(50_000);\r\n        System.out.println(&quot;Success!&quot;);\r\n    }\r\n\r\n    public static void loop(int repeats) {\r\n        if (repeats &gt; 0) {\r\n            loop(repeats - 1);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nDecompiled Code (.class file):\r\n\r\n``` java\r\npublic class StackOverflowExample {\r\n    public StackOverflowExample() {\r\n    }\r\n\r\n    public static void main(String[] var0) {\r\n        loop(50000);\r\n        System.out.println(&quot;Success!&quot;);\r\n    }\r\n\r\n    public static void loop(int var0) {\r\n        if (var0 &gt; 0) {\r\n            loop(var0 - 1);\r\n        }\r\n\r\n    }\r\n}\r\n```","title":"Why variable in .class files appear as var?","body":"<p>I was curious about .class files and the code inside and realised that variables in one of the classes that I compiled is named as <em><strong>var0</strong></em> which is very interesting.</p>\n<p>I am wondering if someone could explain why.</p>\n<p>Java Code (.java file):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflowExample {\n    public static void main(String[] args) {\n        loop(50_000);\n        System.out.println(&quot;Success!&quot;);\n    }\n\n    public static void loop(int repeats) {\n        if (repeats &gt; 0) {\n            loop(repeats - 1);\n        }\n    }\n}\n</code></pre>\n<p>Decompiled Code (.class file):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflowExample {\n    public StackOverflowExample() {\n    }\n\n    public static void main(String[] var0) {\n        loop(50000);\n        System.out.println(&quot;Success!&quot;);\n    }\n\n    public static void loop(int var0) {\n        if (var0 &gt; 0) {\n            loop(var0 - 1);\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","json","jackson","jackson-databind"],"answers":[{"comments":[{"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"score":0,"creation_date":1565040631,"post_id":57366300,"comment_id":101218821,"body_markdown":"Yes, I saw that as well, but I&#39;m not sure why the annotations don&#39;t generate that. I would think that the `@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = &quot;BTRFSPhysicalLocationItem&quot;)` would have made that part. According to a website that I read, `include = JsonTypeInfo.As.PROPERTY` is the default selection if not explicitly noted.","body":"Yes, I saw that as well, but I&#39;m not sure why the annotations don&#39;t generate that. I would think that the <code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = &quot;BTRFSPhysicalLocationItem&quot;)</code> would have made that part. According to a website that I read, <code>include = JsonTypeInfo.As.PROPERTY</code> is the default selection if not explicitly noted."},{"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"score":0,"creation_date":1565040659,"post_id":57366300,"comment_id":101218826,"body_markdown":"you forget about `include` - I edited answer (by default I believe it is being set to `NONE`)","body":"you forget about <code>include</code> - I edited answer (by default I believe it is being set to <code>NONE</code>)"},{"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"score":0,"creation_date":1565040759,"post_id":57366300,"comment_id":101218854,"body_markdown":"Just changed it, same error. Also, same output JSON string.","body":"Just changed it, same error. Also, same output JSON string."},{"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"score":0,"creation_date":1565040855,"post_id":57366300,"comment_id":101218890,"body_markdown":"can you provide generated json?","body":"can you provide generated json?"},{"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"score":0,"creation_date":1565040892,"post_id":57366300,"comment_id":101218896,"body_markdown":"`[{&quot;name&quot;:&quot;WanderingEcho&quot;,&quot;location&quot;:&quot;file:///home/sarah/NetBeansProjects/WanderingEcho/&quot;}]` The annotation is set to: `@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = &quot;BTRFSPhysicalLocationItem&quot;)\n\n`","body":"<code>[{&quot;name&quot;:&quot;WanderingEcho&quot;,&quot;location&quot;:&quot;file:&#47;&#47;&#47;home&#47;sarah&#47;NetB&zwnj;&#8203;eansProjects&#47;Wanderi&zwnj;&#8203;ngEcho&#47;&quot;}]</code> The annotation is set to: <code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = &quot;BTRFSPhysicalLocationItem&quot;)  </code>"},{"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"score":0,"creation_date":1565040930,"post_id":57366300,"comment_id":101218903,"body_markdown":"as you see it still missing the `BTRFSPhysicalLocationItem` property","body":"as you see it still missing the <code>BTRFSPhysicalLocationItem</code> property"},{"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"score":0,"creation_date":1565041032,"post_id":57366300,"comment_id":101218934,"body_markdown":"Yep. I need to figure out why the annotations are insufficient for serialization.","body":"Yep. I need to figure out why the annotations are insufficient for serialization."},{"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"score":0,"creation_date":1565050754,"post_id":57366300,"comment_id":101220771,"body_markdown":"Yep, just checked, it ran just fine. Strange solution though. Maybe reified generics wasn&#39;t such a good idea after all.","body":"Yep, just checked, it ran just fine. Strange solution though. Maybe reified generics wasn&#39;t such a good idea after all."}],"tags":[],"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"comment_count":8,"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1565042976,"creation_date":1565040532,"answer_id":57366300,"question_id":57366190,"body_markdown":"In your `json` you are missing the `BTRFSPhysicalLocationItem` - just think about it - how Jackson should know what implementation do you expect?\r\n\r\nIt should look like \r\n \r\n    [\r\n        {\r\n            &quot;BTRFSPhysicalLocationItem&quot;: &quot;Subvolume&quot;,\r\n            &quot;name&quot;: &quot;WanderingEcho&quot;,\r\n            &quot;location&quot;:&quot;file:///home/sarah/NetBeansProjects/WanderingEcho/&quot;\r\n        }\r\n    ]\r\n\r\nif you want Jackson to include the type when serializing the object you also need to add `JsonTypeInfo.As.PROPERTY` as `include` as a parameter of `@JsonTypeInfo` annotation like\r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = &quot;BTRFSPhysicalLocationItem&quot;)\r\n\r\n----\r\n\r\n**EDIT** ok seems that I figured this out - your problem with not generating properties is connected to Java type erasure and well described [here][1]. \r\n\r\ntldr; Jackson has problem with underestanding type - seems `List&lt;Subvolume&gt;` for him does not providing the type of elements. Because he doesn&#39;t know the type he won&#39;t serialize it \r\n\r\nThe solution is to create a helper class that will extends `ArrayList&lt;Subvolume&gt;` like\r\n\r\n    public class SubvolumeList extends ArrayList&lt;Subvolume&gt; {}\r\n\r\n----\r\n\r\nAdditionaly you have a few issues in your code - one is that you should use `use = JsonTypeInfo.Id.NAME` in `@JsonTypeInfo` if you want to deserialize by property value (like `Subvolume`) not by package/class string literal\r\n\r\nSecond is that you should name `@JsonProperty` on `@JsonCreator` parameter list like `@JsonProperty(value = &quot;location&quot;)`\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-databind/issues/336","title":"Jackson 3.1.1 Missing Type ID of Subtype Exception for Polymorphic Type of List?","body":"<p>In your <code>json</code> you are missing the <code>BTRFSPhysicalLocationItem</code> - just think about it - how Jackson should know what implementation do you expect?</p>\n\n<p>It should look like </p>\n\n<pre><code>[\n    {\n        \"BTRFSPhysicalLocationItem\": \"Subvolume\",\n        \"name\": \"WanderingEcho\",\n        \"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"\n    }\n]\n</code></pre>\n\n<p>if you want Jackson to include the type when serializing the object you also need to add <code>JsonTypeInfo.As.PROPERTY</code> as <code>include</code> as a parameter of <code>@JsonTypeInfo</code> annotation like</p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = \"BTRFSPhysicalLocationItem\")\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong> ok seems that I figured this out - your problem with not generating properties is connected to Java type erasure and well described <a href=\"https://github.com/FasterXML/jackson-databind/issues/336\" rel=\"noreferrer\">here</a>. </p>\n\n<p>tldr; Jackson has problem with underestanding type - seems <code>List&lt;Subvolume&gt;</code> for him does not providing the type of elements. Because he doesn't know the type he won't serialize it </p>\n\n<p>The solution is to create a helper class that will extends <code>ArrayList&lt;Subvolume&gt;</code> like</p>\n\n<pre><code>public class SubvolumeList extends ArrayList&lt;Subvolume&gt; {}\n</code></pre>\n\n<hr>\n\n<p>Additionaly you have a few issues in your code - one is that you should use <code>use = JsonTypeInfo.Id.NAME</code> in <code>@JsonTypeInfo</code> if you want to deserialize by property value (like <code>Subvolume</code>) not by package/class string literal</p>\n\n<p>Second is that you should name <code>@JsonProperty</code> on <code>@JsonCreator</code> parameter list like <code>@JsonProperty(value = \"location\")</code></p>\n"},{"tags":[],"owner":{"account_id":6896115,"reputation":413,"user_id":5298002,"display_name":"coder34"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684358238,"creation_date":1684358238,"answer_id":76276263,"question_id":57366190,"body_markdown":"When I stumbled on this post, I was having a similar problem. I had\r\n\r\n```\r\n@JsonTypeInfo(\r\n  use = Id.MINIMAL_CLASS,\r\n  property = &quot;@class&quot;\r\n)\r\npublic class MyClass {\r\n  public int myInt;\r\n}\r\n```\r\nand then\r\n```\r\npublic class MyIntWrapper {\r\n  public Optional&lt;MyInt&gt; maybeMyInt;\r\n}\r\n```\r\n\r\nI wanted to send `MyIntWrapper` over the wire. It was serializing the instances correctly into the JSON, but there was a deserialization issue. I was seeing\r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class com.coder34.MyIntWrapper$Json]: missing type id property &#39;@class&#39; (for POJO property &#39;#temporary-name&#39;)\r\n at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: com.coder34.MyIntWrapper$Json[&quot;maybeMyInt&quot;]) \r\n```\r\n\r\nFollowing @m.antkowicz link about type erasure, I tried adding it to the field. So I removed the annotation from `MyClass` and added it to the field `maybeMyInt` -\r\n```\r\npublic class MyClass {\r\n  public int myInt;\r\n}\r\n```\r\n```\r\npublic class MyIntWrapper {\r\n  @JsonTypeInfo(\r\n    use = Id.MINIMAL_CLASS,\r\n    property = &quot;@class&quot;\r\n  )\r\n  public Optional&lt;MyInt&gt; maybeMyInt;\r\n}\r\n```\r\nand it worked.","title":"Jackson 3.1.1 Missing Type ID of Subtype Exception for Polymorphic Type of List?","body":"<p>When I stumbled on this post, I was having a similar problem. I had</p>\n<pre><code>@JsonTypeInfo(\n  use = Id.MINIMAL_CLASS,\n  property = &quot;@class&quot;\n)\npublic class MyClass {\n  public int myInt;\n}\n</code></pre>\n<p>and then</p>\n<pre><code>public class MyIntWrapper {\n  public Optional&lt;MyInt&gt; maybeMyInt;\n}\n</code></pre>\n<p>I wanted to send <code>MyIntWrapper</code> over the wire. It was serializing the instances correctly into the JSON, but there was a deserialization issue. I was seeing</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class com.coder34.MyIntWrapper$Json]: missing type id property '@class' (for POJO property '#temporary-name')\n at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: com.coder34.MyIntWrapper$Json[&quot;maybeMyInt&quot;]) \n</code></pre>\n<p>Following @m.antkowicz link about type erasure, I tried adding it to the field. So I removed the annotation from <code>MyClass</code> and added it to the field <code>maybeMyInt</code> -</p>\n<pre><code>public class MyClass {\n  public int myInt;\n}\n</code></pre>\n<pre><code>public class MyIntWrapper {\n  @JsonTypeInfo(\n    use = Id.MINIMAL_CLASS,\n    property = &quot;@class&quot;\n  )\n  public Optional&lt;MyInt&gt; maybeMyInt;\n}\n</code></pre>\n<p>and it worked.</p>\n"}],"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43380,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":57366300,"answer_count":2,"score":4,"last_activity_date":1684358238,"creation_date":1565039795,"question_id":57366190,"body_markdown":"I have a concrete object of an abstract class that I&#39;ve made.\r\n\r\nI&#39;m using annotations on the abstract class and the daughter class, but the JSON output doesn&#39;t look right and I keep getting an exception on deserialiation.\r\n\r\nI&#39;m still learning Jackson, and unfortunatly a lot of the tutorials on the subject are outdated.\r\n\r\nHere are the classes with my object mapper at the bottom:\r\n\r\n**Abstract Class:**\r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = &quot;BTRFSPhysicalLocationItem&quot;)\r\n    @JsonSubTypes({\r\n        @Type(name = &quot;Snapshot&quot;, value = Snapshot.class),\r\n        @Type(name = &quot;Backup&quot;, value = Backup.class),\r\n        @Type(name = &quot;Subvolume&quot;, value = Subvolume.class)})\r\n    public abstract class BTRFSPhysicalLocationItem {\r\n    \r\n        private final String name;\r\n        @JsonProperty\r\n        private final Path location;\r\n    \r\n        /**\r\n         * Makes a new subvolume instance with the specified location. May or may\r\n         * not actually exist.\r\n         *\r\n         * @param location The location of the subvolume\r\n         */\r\n        @JsonCreator\r\n        protected BTRFSPhysicalLocationItem(@JsonProperty(value = &quot;location&quot;) Path location) {\r\n            this.location = location;\r\n            this.name = location.getFileName().toString();\r\n        }\r\n\r\n\r\n\r\n**Concrete Class:**\r\n\r\n    public class Subvolume extends BTRFSPhysicalLocationItem {\r\n    \r\n        /**\r\n         * Creates a new subvolume with the specified path.The subvolume may or may\r\n         * not exist at this point.\r\n         *\r\n         * @param location\r\n         */\r\n        @JsonCreator\r\n        public Subvolume(@JsonProperty Path location) {\r\n            super(location);\r\n        }\r\n\r\n**Objectmapper block:**\r\n\r\n    ObjectMapper MAPPER = new ObjectMapper();\r\n    List&lt;Subvolume&gt; SUBVOLUME_LIST = new ArrayList&lt;&gt;();\r\n    //Subvolume is populated by other methods it&#39;s not worth showing them here\r\n    System.out.println(&quot;\\n\\n&quot;);\r\n                    MAPPER.writeValue(System.out, SUBVOLUME_LIST);\r\n                    System.out.println(&quot;\\n\\n\\n&quot;);\r\n                    var s = MAPPER.writeValueAsString(SUBVOLUME_LIST);\r\n                    List&lt;Subvolume&gt; list = MAPPER.readValue(s, new TypeReference&lt;List&lt;Subvolume&gt;&gt;() {\r\n                    });\r\n\r\n**Output JSON:** `[{&quot;name&quot;:&quot;WanderingEcho&quot;,&quot;location&quot;:&quot;file:///home/sarah/NetBeansProjects/WanderingEcho/&quot;}]`\r\n\r\nException:\r\n\r\n    Aug 05, 2019 4:55:14 PM com.protonmail.sarahszabo.wanderingecho.btrfs.BTRFS &lt;clinit&gt;\r\n    SEVERE: null\r\n    com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Missing type id when trying to resolve subtype of [simple type, class com.protonmail.sarahszabo.wanderingecho.btrfs.subvolume.Subvolume]: missing type id property &#39;BTRFSPhysicalLocationItem&#39;\r\n     at [Source: (String)&quot;[{&quot;name&quot;:&quot;WanderingEcho&quot;,&quot;location&quot;:&quot;file:///home/sarah/NetBeansProjects/WanderingEcho/&quot;}]&quot;; line: 1, column: 89] (through reference chain: java.util.ArrayList[0])\r\n\r\nOther answers such as https://stackoverflow.com/questions/22609032/jackson-deserialization-of-polymorphic-types suggest using the `ObjectMapper` methods, but according to the tutorials I&#39;ve read, this shouldn&#39;t be necessary.\r\n\r\nNot sure what I&#39;m doing wrong with the annotations.","title":"Jackson 3.1.1 Missing Type ID of Subtype Exception for Polymorphic Type of List?","body":"<p>I have a concrete object of an abstract class that I've made.</p>\n\n<p>I'm using annotations on the abstract class and the daughter class, but the JSON output doesn't look right and I keep getting an exception on deserialiation.</p>\n\n<p>I'm still learning Jackson, and unfortunatly a lot of the tutorials on the subject are outdated.</p>\n\n<p>Here are the classes with my object mapper at the bottom:</p>\n\n<p><strong>Abstract Class:</strong></p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = \"BTRFSPhysicalLocationItem\")\n@JsonSubTypes({\n    @Type(name = \"Snapshot\", value = Snapshot.class),\n    @Type(name = \"Backup\", value = Backup.class),\n    @Type(name = \"Subvolume\", value = Subvolume.class)})\npublic abstract class BTRFSPhysicalLocationItem {\n\n    private final String name;\n    @JsonProperty\n    private final Path location;\n\n    /**\n     * Makes a new subvolume instance with the specified location. May or may\n     * not actually exist.\n     *\n     * @param location The location of the subvolume\n     */\n    @JsonCreator\n    protected BTRFSPhysicalLocationItem(@JsonProperty(value = \"location\") Path location) {\n        this.location = location;\n        this.name = location.getFileName().toString();\n    }\n</code></pre>\n\n<p><strong>Concrete Class:</strong></p>\n\n<pre><code>public class Subvolume extends BTRFSPhysicalLocationItem {\n\n    /**\n     * Creates a new subvolume with the specified path.The subvolume may or may\n     * not exist at this point.\n     *\n     * @param location\n     */\n    @JsonCreator\n    public Subvolume(@JsonProperty Path location) {\n        super(location);\n    }\n</code></pre>\n\n<p><strong>Objectmapper block:</strong></p>\n\n<pre><code>ObjectMapper MAPPER = new ObjectMapper();\nList&lt;Subvolume&gt; SUBVOLUME_LIST = new ArrayList&lt;&gt;();\n//Subvolume is populated by other methods it's not worth showing them here\nSystem.out.println(\"\\n\\n\");\n                MAPPER.writeValue(System.out, SUBVOLUME_LIST);\n                System.out.println(\"\\n\\n\\n\");\n                var s = MAPPER.writeValueAsString(SUBVOLUME_LIST);\n                List&lt;Subvolume&gt; list = MAPPER.readValue(s, new TypeReference&lt;List&lt;Subvolume&gt;&gt;() {\n                });\n</code></pre>\n\n<p><strong>Output JSON:</strong> <code>[{\"name\":\"WanderingEcho\",\"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"}]</code></p>\n\n<p>Exception:</p>\n\n<pre><code>Aug 05, 2019 4:55:14 PM com.protonmail.sarahszabo.wanderingecho.btrfs.BTRFS &lt;clinit&gt;\nSEVERE: null\ncom.fasterxml.jackson.databind.exc.InvalidTypeIdException: Missing type id when trying to resolve subtype of [simple type, class com.protonmail.sarahszabo.wanderingecho.btrfs.subvolume.Subvolume]: missing type id property 'BTRFSPhysicalLocationItem'\n at [Source: (String)\"[{\"name\":\"WanderingEcho\",\"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"}]\"; line: 1, column: 89] (through reference chain: java.util.ArrayList[0])\n</code></pre>\n\n<p>Other answers such as <a href=\"https://stackoverflow.com/questions/22609032/jackson-deserialization-of-polymorphic-types\">Jackson deserialization of polymorphic types</a> suggest using the <code>ObjectMapper</code> methods, but according to the tutorials I've read, this shouldn't be necessary.</p>\n\n<p>Not sure what I'm doing wrong with the annotations.</p>\n"},{"tags":["java","eclipse","sts-springsourcetoolsuite","pivotal-tc"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1684253868,"post_id":76264982,"comment_id":134490046,"body_markdown":"A workaround could be to clone the run configuration, remove the option and manually start it","body":"A workaround could be to clone the run configuration, remove the option and manually start it"},{"owner":{"account_id":365547,"reputation":4033,"user_id":710530,"accept_rate":67,"display_name":"DavidA"},"score":0,"creation_date":1684344241,"post_id":76264982,"comment_id":134505981,"body_markdown":"@LMC, how do I &#39;manually&#39; start it?  If I edit the configuration (original or clone), and apply then click &#39;run&#39;, it immediately adds it back into the configuration as it starts up.","body":"@LMC, how do I &#39;manually&#39; start it?  If I edit the configuration (original or clone), and apply then click &#39;run&#39;, it immediately adds it back into the configuration as it starts up."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1684352356,"post_id":76264982,"comment_id":134507662,"body_markdown":"Double check the option is not added by another mechanism: settings.gradle, [JAVA_TOOL_OPTIONS, _JAVA_OPTIONS](https://stackoverflow.com/a/40736904/2834978) env var","body":"Double check the option is not added by another mechanism: settings.gradle, <a href=\"https://stackoverflow.com/a/40736904/2834978\">JAVA_TOOL_OPTIONS, _JAVA_OPTIONS</a> env var"},{"owner":{"account_id":365547,"reputation":4033,"user_id":710530,"accept_rate":67,"display_name":"DavidA"},"score":1,"creation_date":1684353783,"post_id":76264982,"comment_id":134507917,"body_markdown":"@LMC unfortunately, no.  In fact, I have found the code in the eclipse-integration-tcserver code base that checks for the param and if not found, adds it back in.  I have added an issue on that project.  Still hoping someone might know of some sort of workaround.","body":"@LMC unfortunately, no.  In fact, I have found the code in the eclipse-integration-tcserver code base that checks for the param and if not found, adds it back in.  I have added an issue on that project.  Still hoping someone might know of some sort of workaround."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1684358405,"post_id":76264982,"comment_id":134508773,"body_markdown":"As a workaround, try adding `-XX:MaxMetaspaceSize=&lt;value&gt;`","body":"As a workaround, try adding <code>-XX:MaxMetaspaceSize=&lt;value&gt;</code>"}],"owner":{"account_id":365547,"reputation":4033,"user_id":710530,"accept_rate":67,"display_name":"DavidA"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684357460,"creation_date":1684252448,"question_id":76264982,"body_markdown":"I am running Spring Tool Suite 4 and have been using pivotal tc server for my local development server.  The pivotal tc server has been displaying a warning for a while that MaxPermSize is deprecated, which hasn&#39;t been a big issue since it is only a warning.\r\n\r\nHowever, I am not attempting to upgrade from Java 11 to Java 17, and now the server will not start up because of the error `Unrecognized VM option &#39;MaxPermSize=256m&#39;`.  Unfortunately, if I attempt to edit the server run configuration and remove the `-XX:MaxPermSize=256m` VM argument, it is automatically added back in.  I assume it is the **Pivotal tc Server Integration for Eclipse** that is adding the argument back in.\r\n\r\nDoes anyone know how to get it to not add the argument back in, since it is preventing the server from starting?\r\n\r\n - STS version: **4.13.0.RELEASE**\r\n - Pivotal tc Server Integration for\r\n   Eclipse version: **4.1.1.202008171738-RELEASE** \r\n - pivotal tc server version: **4.0.2.RELEASE**","title":"Can&#39;t remove MaxPermSize argument from pivotal tc server Eclipse run configuration","body":"<p>I am running Spring Tool Suite 4 and have been using pivotal tc server for my local development server.  The pivotal tc server has been displaying a warning for a while that MaxPermSize is deprecated, which hasn't been a big issue since it is only a warning.</p>\n<p>However, I am not attempting to upgrade from Java 11 to Java 17, and now the server will not start up because of the error <code>Unrecognized VM option 'MaxPermSize=256m'</code>.  Unfortunately, if I attempt to edit the server run configuration and remove the <code>-XX:MaxPermSize=256m</code> VM argument, it is automatically added back in.  I assume it is the <strong>Pivotal tc Server Integration for Eclipse</strong> that is adding the argument back in.</p>\n<p>Does anyone know how to get it to not add the argument back in, since it is preventing the server from starting?</p>\n<ul>\n<li>STS version: <strong>4.13.0.RELEASE</strong></li>\n<li>Pivotal tc Server Integration for\nEclipse version: <strong>4.1.1.202008171738-RELEASE</strong></li>\n<li>pivotal tc server version: <strong>4.0.2.RELEASE</strong></li>\n</ul>\n"},{"tags":["java","spring","spring-boot","web-services","soap"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684305588,"post_id":76267932,"comment_id":134496984,"body_markdown":"`@XmlType` is Jaxb, so why wouldn&#39;t it be possible to us JAXB as you already have it.","body":"<code>@XmlType</code> is Jaxb, so why wouldn&#39;t it be possible to us JAXB as you already have it."},{"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"score":0,"creation_date":1684333619,"post_id":76267932,"comment_id":134503360,"body_markdown":"I&#39;m getting javax.xml.bind.MarshalException\n - with linked exception:\n[com.sun.istack.SAXException2: unable to marshal type &quot;com.test.cxfws.PersonActivityList&quot; as an element because it is missing an @XmlRootElement annotation].","body":"I&#39;m getting javax.xml.bind.MarshalException  - with linked exception: [com.sun.istack.SAXException2: unable to marshal type &quot;com.test.cxfws.PersonActivityList&quot; as an element because it is missing an @XmlRootElement annotation]."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684333946,"post_id":76267932,"comment_id":134503463,"body_markdown":"You get this because there is no `@XmlRootElement` on your xml classes. If you used the proper plugins there will be an `ObjectFactory` which you can use to wrap your element into a `JaxbElement` (there is some `create*` method for that) you can use this to send your object. The same probably applies for the unmarshalling again.","body":"You get this because there is no <code>@XmlRootElement</code> on your xml classes. If you used the proper plugins there will be an <code>ObjectFactory</code> which you can use to wrap your element into a <code>JaxbElement</code> (there is some <code>create*</code> method for that) you can use this to send your object. The same probably applies for the unmarshalling again."},{"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"score":0,"creation_date":1684334710,"post_id":76267932,"comment_id":134503683,"body_markdown":"May I know the plugin and some sample code on it?","body":"May I know the plugin and some sample code on it?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345510,"post_id":76267932,"comment_id":134506253,"body_markdown":"You state you already generated the code, so why would you need an additional plugin? All the needed classes are already in the generated code.","body":"You state you already generated the code, so why would you need an additional plugin? All the needed classes are already in the generated code."},{"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"score":0,"creation_date":1684351605,"post_id":76267932,"comment_id":134507518,"body_markdown":"I have below methods but I&#39;m confused how to use these to wrap the element before sending to SOAP service. public PersonActivityList createPersonActivityList() {return new PersonActivityList();}\n    @XmlElementDecl(\n        namespace = &quot;http://cxfws.jee.test.com/&quot;,\n        name = “personActivityList&quot;\n    )\n    public JAXBElement&lt;PersonActivityList&gt; createPersonActivityList(PersonActivityList var1) {\n        return new JAXBElement(_PersonActivityList_QNAME, PersonActivityList.class, (Class)null, var1);\n    }","body":"I have below methods but I&#39;m confused how to use these to wrap the element before sending to SOAP service. public PersonActivityList createPersonActivityList() {return new PersonActivityList();}     @XmlElementDecl(         namespace = &quot;<a href=\"http://cxfws.jee.test.com/\" rel=\"nofollow noreferrer\">cxfws.jee.test.com</a>&quot;,         name = “personActivityList&quot;     )     public JAXBElement&lt;PersonActivityList&gt; createPersonActivityList(PersonActivityList var1) {         return new JAXBElement(_PersonActivityList_QNAME, PersonActivityList.class, (Class)null, var1);     }"},{"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"score":0,"creation_date":1684356298,"post_id":76267932,"comment_id":134508385,"body_markdown":"I resolved using below code. \npublic class PublicActivity{\n    @Autowired\n    private WebServiceTemplate PersonWebServiceTemplate;\n    \n    public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\n  \nJAXBElement&lt; PersonActivityList &gt; jaxbElement = new ObjectFactory().createPersonActivityList(request);\nJAXBElement&lt;PersonActivityListResponse&gt; response =\n        (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement);\nreturn response.getValue();\n\n\n    }\n}","body":"I resolved using below code.  public class PublicActivity{     @Autowired     private WebServiceTemplate PersonWebServiceTemplate;          public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {    JAXBElement&lt; PersonActivityList &gt; jaxbElement = new ObjectFactory().createPersonActivityList(request); JAXBElement&lt;PersonActivityListResponse&gt; response =         (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement); return response.getValue();       } }"}],"answers":[{"tags":[],"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684356475,"creation_date":1684356475,"answer_id":76276093,"question_id":76267932,"body_markdown":"I used below code and it worked.\r\n\r\n    @Service\r\n    public class PublicActivity {\r\n        @Autowired\r\n        private WebServiceTemplate PersonWebServiceTemplate;\r\n    \r\n        public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\r\n    \r\n            JAXBElement&lt;PersonActivityList&gt; jaxbElement = new ObjectFactory().createPersonActivityList(request);\r\n            JAXBElement&lt;PersonActivityListResponse&gt; response =\r\n                    (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement);\r\n            return response.getValue();\r\n    \r\n    \r\n        }\r\n    }","title":"How to call SOAP service from Spring Boot without marshalling and unmarshalling using JAXB?","body":"<p>I used below code and it worked.</p>\n<pre><code>@Service\npublic class PublicActivity {\n    @Autowired\n    private WebServiceTemplate PersonWebServiceTemplate;\n\n    public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\n\n        JAXBElement&lt;PersonActivityList&gt; jaxbElement = new ObjectFactory().createPersonActivityList(request);\n        JAXBElement&lt;PersonActivityListResponse&gt; response =\n                (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement);\n        return response.getValue();\n\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4384432,"reputation":79,"user_id":3575072,"accept_rate":50,"display_name":"userKG"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76276093,"answer_count":1,"score":0,"last_activity_date":1684356475,"creation_date":1684285007,"question_id":76267932,"body_markdown":"I have a .jar package that I have generated from WSDL of the SOAP service war package. SOAP service doesn&#39;t have an equivalent JAXB-compatible package to use JAXB for marshalling and unmarshalling with WebServiceTemplate.\r\n\r\nI am using the following code to call SOAP service with an equivalent JAXB package but right now I don&#39;t have JAXB equivalent SOAP service package to call in the SOAP client application then how to call SOAP service?\r\n\r\nPersonActivityList.class\r\n\r\n    package com.test.jee.cxfws;\r\n    \r\n    @XmlAccessorType(XmlAccessorType.Field)\r\n    @XmlType(name = &quot;personActivityList&quot;, proOrder = {&quot;request&quot;})\r\n    \r\n    public class PersonActivityList{\r\n    \tprotected PersonActionRequest request;\r\n    \t\r\n    \tpublic PersonActivityList(){}\r\n    \t\r\n    \tpublic PersonActionRequest getRequest() {return this.request;}\r\n    \t\r\n    \tpublic void setRequest(PersonActionRequest var1) {this.request = var1;}\r\n    }\r\n\r\n\r\napp.yml\r\n\r\n    personactivity:\r\n    uri: https:test.com/personactivity/V4\r\n    schema-path: &quot;com.test.jee.cxfws&quot;\r\n    wsdlVersion: 4.0\r\n    appId: pdv\r\n\r\n\r\nPersonConfig.java\r\n\r\n    @Configuration\r\n    public class PersonConfig {\r\n    \r\n        @Value(&quot;${personactivity.uri}&quot;)\r\n        String defaultUri;\r\n    \r\n        @Value(&quot;${personactivity.schema-path}&quot;)\r\n        String schemaPath;\r\n    \r\n    \t// specifically the HTTP message sending functionality\r\n    \t// sets up the HTTP client with appropriate connection settings, including timeouts and SSL/TLS configuration\r\n        @Autowired\r\n        TestConfig testConfig;\r\n    \r\n    \t// is an implementation of a client interceptor\r\n    \t// this interceptor is responsible for adding custom headers to the outgoing requests in a web service client based on the values provided in the appId and userId properties.\r\n        @Autowired\r\n        TESTHeaderInterceptor headerInterceptor;\r\n    \r\n    \tJaxb2Marshaller getJaxb2Marshaller() {\r\n            Jaxb2Marshaller jaxb2Marshaller = new Jaxb2Marshaller();\r\n            jaxb2Marshaller.setContextPath(schemaPath);\r\n            return jaxb2Marshaller;\r\n        }\r\n        \r\n        @Bean (&quot;PersonWebServiceTemplate&quot;)\r\n        public WebServiceTemplate updateWebServiceTemplate() throws Exception {\r\n            SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(MessageFactory.newInstance());\r\n            messageFactory.afterPropertiesSet();\r\n            WebServiceTemplate updateWebServiceTemplate = new WebServiceTemplate(messageFactory);\r\n    \t\t updateWebServiceTemplate.setMarshaller(getJaxb2Marshaller());\r\n            updateWebServiceTemplate.setUnmarshaller(getJaxb2Marshaller());\r\n            updateWebServiceTemplate.setDefaultUri(defaultUri);\r\n            updateWebServiceTemplate.setMessageSender(testConfig.createMessageSender());\r\n            updateWebServiceTemplate.afterPropertiesSet();\r\n            updateWebServiceTemplate.setInterceptors(new ClientInterceptor[]{headerInterceptor});\r\n            return updateWebServiceTemplate;\r\n        }\r\n    \r\n        public String getDefaultUri() {\r\n            return defaultUri;\r\n        }\r\n    }\r\n\r\nPersonActivity.java\r\n\r\n    @Service\r\n    public class PublicActivity{\r\n    \t@Autowired\r\n    \tprivate WebServiceTemplate PersonWebServiceTemplate;\r\n    \t\r\n    \tpublic PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\r\n    \t        PersonActivityListResponse response = (PersonActivityListResponse) PersonWebServiceTemplate.marshalSendAndReceive(request);\r\n    \t\t\treturn response;\r\n    \r\n    \t}\r\n    }\r\n\r\nHow to write the equivalent code to call SOAP service without using JAXB?\r\n\r\n\r\n","title":"How to call SOAP service from Spring Boot without marshalling and unmarshalling using JAXB?","body":"<p>I have a .jar package that I have generated from WSDL of the SOAP service war package. SOAP service doesn't have an equivalent JAXB-compatible package to use JAXB for marshalling and unmarshalling with WebServiceTemplate.</p>\n<p>I am using the following code to call SOAP service with an equivalent JAXB package but right now I don't have JAXB equivalent SOAP service package to call in the SOAP client application then how to call SOAP service?</p>\n<p>PersonActivityList.class</p>\n<pre><code>package com.test.jee.cxfws;\n\n@XmlAccessorType(XmlAccessorType.Field)\n@XmlType(name = &quot;personActivityList&quot;, proOrder = {&quot;request&quot;})\n\npublic class PersonActivityList{\n    protected PersonActionRequest request;\n    \n    public PersonActivityList(){}\n    \n    public PersonActionRequest getRequest() {return this.request;}\n    \n    public void setRequest(PersonActionRequest var1) {this.request = var1;}\n}\n</code></pre>\n<p>app.yml</p>\n<pre><code>personactivity:\nuri: https:test.com/personactivity/V4\nschema-path: &quot;com.test.jee.cxfws&quot;\nwsdlVersion: 4.0\nappId: pdv\n</code></pre>\n<p>PersonConfig.java</p>\n<pre><code>@Configuration\npublic class PersonConfig {\n\n    @Value(&quot;${personactivity.uri}&quot;)\n    String defaultUri;\n\n    @Value(&quot;${personactivity.schema-path}&quot;)\n    String schemaPath;\n\n    // specifically the HTTP message sending functionality\n    // sets up the HTTP client with appropriate connection settings, including timeouts and SSL/TLS configuration\n    @Autowired\n    TestConfig testConfig;\n\n    // is an implementation of a client interceptor\n    // this interceptor is responsible for adding custom headers to the outgoing requests in a web service client based on the values provided in the appId and userId properties.\n    @Autowired\n    TESTHeaderInterceptor headerInterceptor;\n\n    Jaxb2Marshaller getJaxb2Marshaller() {\n        Jaxb2Marshaller jaxb2Marshaller = new Jaxb2Marshaller();\n        jaxb2Marshaller.setContextPath(schemaPath);\n        return jaxb2Marshaller;\n    }\n    \n    @Bean (&quot;PersonWebServiceTemplate&quot;)\n    public WebServiceTemplate updateWebServiceTemplate() throws Exception {\n        SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(MessageFactory.newInstance());\n        messageFactory.afterPropertiesSet();\n        WebServiceTemplate updateWebServiceTemplate = new WebServiceTemplate(messageFactory);\n         updateWebServiceTemplate.setMarshaller(getJaxb2Marshaller());\n        updateWebServiceTemplate.setUnmarshaller(getJaxb2Marshaller());\n        updateWebServiceTemplate.setDefaultUri(defaultUri);\n        updateWebServiceTemplate.setMessageSender(testConfig.createMessageSender());\n        updateWebServiceTemplate.afterPropertiesSet();\n        updateWebServiceTemplate.setInterceptors(new ClientInterceptor[]{headerInterceptor});\n        return updateWebServiceTemplate;\n    }\n\n    public String getDefaultUri() {\n        return defaultUri;\n    }\n}\n</code></pre>\n<p>PersonActivity.java</p>\n<pre><code>@Service\npublic class PublicActivity{\n    @Autowired\n    private WebServiceTemplate PersonWebServiceTemplate;\n    \n    public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\n            PersonActivityListResponse response = (PersonActivityListResponse) PersonWebServiceTemplate.marshalSendAndReceive(request);\n            return response;\n\n    }\n}\n</code></pre>\n<p>How to write the equivalent code to call SOAP service without using JAXB?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684365376,"post_id":76273311,"comment_id":134509719,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684356152,"creation_date":1684356152,"answer_id":76276059,"question_id":76273311,"body_markdown":"I don&#39;t think any serious application will hard code an user name and a password in their `application.properties` configuration file without providing a way to provide your own. And they should clearly document how to do this.\r\n\r\nWhat you can do is to unzip their jar and have a look at `application.properties` file and hopefully they control these values via some environment variables. If this is the case then your problem is solved. If not I am afraid you will have to stick your nose in their decompiled code and try to understand how they load those vales. Those ones from `application.properties` might be just some default values and support a different way of injecting the runtime ones such as bringing them from a config server a secrets vault, etc\r\n\r\nUltimately you should come in touch with the third party provider and ask for support.\r\n\r\nHope some of the above ideas will help.   ","title":"Is there a way to customize application properties for a third party spring boot application without source code","body":"<p>I don't think any serious application will hard code an user name and a password in their <code>application.properties</code> configuration file without providing a way to provide your own. And they should clearly document how to do this.</p>\n<p>What you can do is to unzip their jar and have a look at <code>application.properties</code> file and hopefully they control these values via some environment variables. If this is the case then your problem is solved. If not I am afraid you will have to stick your nose in their decompiled code and try to understand how they load those vales. Those ones from <code>application.properties</code> might be just some default values and support a different way of injecting the runtime ones such as bringing them from a config server a secrets vault, etc</p>\n<p>Ultimately you should come in touch with the third party provider and ask for support.</p>\n<p>Hope some of the above ideas will help.</p>\n"}],"owner":{"account_id":28621116,"reputation":1,"user_id":21914149,"display_name":"codestuck"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684356152,"creation_date":1684334324,"question_id":76273311,"body_markdown":"I have a requirement where we use third party spring boot application jar that can be used as a stand alone application.  In the application properties file, it allows specifying user name and password.  I need to inject secret like this programmatically without source code for the third party spring boot application.  Is there a way to do this?  Thanks.\r\n\r\nI tried using the jar as a dependency but since it is an executable jar, it doesn&#39;t work.","title":"Is there a way to customize application properties for a third party spring boot application without source code","body":"<p>I have a requirement where we use third party spring boot application jar that can be used as a stand alone application.  In the application properties file, it allows specifying user name and password.  I need to inject secret like this programmatically without source code for the third party spring boot application.  Is there a way to do this?  Thanks.</p>\n<p>I tried using the jar as a dependency but since it is an executable jar, it doesn't work.</p>\n"},{"tags":["java","exception","try-catch"],"comments":[{"owner":{"account_id":1432485,"reputation":10153,"user_id":1354590,"accept_rate":100,"display_name":"kuporific"},"score":5,"creation_date":1430687533,"post_id":30019453,"comment_id":48156238,"body_markdown":"Why not put it in the `try` block below the exception throwing call?","body":"Why not put it in the <code>try</code> block below the exception throwing call?"}],"answers":[{"comments":[{"owner":{"account_id":2088642,"reputation":1076,"user_id":1858954,"display_name":"spalac24"},"score":7,"creation_date":1449853610,"post_id":30019480,"comment_id":56201549,"body_markdown":"But what if `doSomething2` throws an exception? I don&#39;t want it to be catched.","body":"But what if <code>doSomething2</code> throws an exception? I don&#39;t want it to be catched."},{"owner":{"account_id":4808328,"reputation":1059,"user_id":3882583,"display_name":"Rani Kheir"},"score":0,"creation_date":1460279424,"post_id":30019480,"comment_id":60659898,"body_markdown":"So you&#39;d want `doSomething2()` to stay in that order, but if it throws an exception it won&#39;t get caught and execute `doSomething3()`? You could place `doSomething2()` in a try catch block of its own (nested try block), and your catch could do nothing like `catch (Exception e) {}`.","body":"So you&#39;d want <code>doSomething2()</code> to stay in that order, but if it throws an exception it won&#39;t get caught and execute <code>doSomething3()</code>? You could place <code>doSomething2()</code> in a try catch block of its own (nested try block), and your catch could do nothing like <code>catch (Exception e) {}</code>."},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":1,"creation_date":1460926177,"post_id":30019480,"comment_id":60953870,"body_markdown":"I want to initialize some final value at `doSomething()`, and if exception is thrown, I then want the final value to hold some fall-back value. How to do that then?","body":"I want to initialize some final value at <code>doSomething()</code>, and if exception is thrown, I then want the final value to hold some fall-back value. How to do that then?"},{"owner":{"account_id":1068638,"reputation":3078,"user_id":1068470,"accept_rate":82,"display_name":"ThePerson"},"score":0,"creation_date":1461189636,"post_id":30019480,"comment_id":61092046,"body_markdown":"If you want to change the value, it isn&#39;t final.","body":"If you want to change the value, it isn&#39;t final."},{"owner":{"account_id":7928636,"reputation":814,"user_id":5987269,"accept_rate":89,"display_name":"pavitran"},"score":0,"creation_date":1483888514,"post_id":30019480,"comment_id":70273448,"body_markdown":"`try {\n    doSomething1();\n    doSomething2();\n    doSomething3();\n} catch (Exception e) {\n    doSomething4();\n}`  \n@ThePerson I want to do someting like `doSomething1,2,3` execute only file all three have no exception how can I achive that?","body":"<code>try {     doSomething1();     doSomething2();     doSomething3(); } catch (Exception e) {     doSomething4(); }</code>   @ThePerson I want to do someting like <code>doSomething1,2,3</code> execute only file all three have no exception how can I achive that?"}],"tags":[],"owner":{"account_id":1068638,"reputation":3078,"user_id":1068470,"accept_rate":82,"display_name":"ThePerson"},"comment_count":5,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1430688265,"creation_date":1430687622,"answer_id":30019480,"question_id":30019453,"body_markdown":"    try {\r\n        doSomething();\r\n        doSomething2();\r\n    } catch (Exception e) {\r\n        doSomething3();\r\n    }\r\n\r\n\r\nIn this example, `doSomething2()` will only be executed if no exception is thrown by `doSomething()`.\r\n\r\nIf an exception is thrown by `doSomething()`, `doSomething2();` will be skipped and execution will jump to `doSomething3();`\r\n\r\nAlso note, `doSomething3()` will be executed if there is an exception thrown by `doSomething2();`\r\n\r\nIf no exception is thrown, `doSomething3();` will not be executed.","title":"Java run code only if no exception is thrown in try and catch block?","body":"<pre><code>try {\n    doSomething();\n    doSomething2();\n} catch (Exception e) {\n    doSomething3();\n}\n</code></pre>\n\n<p>In this example, <code>doSomething2()</code> will only be executed if no exception is thrown by <code>doSomething()</code>.</p>\n\n<p>If an exception is thrown by <code>doSomething()</code>, <code>doSomething2();</code> will be skipped and execution will jump to <code>doSomething3();</code></p>\n\n<p>Also note, <code>doSomething3()</code> will be executed if there is an exception thrown by <code>doSomething2();</code></p>\n\n<p>If no exception is thrown, <code>doSomething3();</code> will not be executed.</p>\n"},{"comments":[{"owner":{"account_id":1816532,"reputation":427,"user_id":1651508,"accept_rate":83,"display_name":"T_T"},"score":3,"creation_date":1434483589,"post_id":30019496,"comment_id":49794449,"body_markdown":"Problem with this becomes: If `SomeException` is very general – if it could be thrown down the line by `codeThatShouldBeRunIfNoExceptionThrown`, or if that method changes to throw that exception in the future – then your catch block will (silently) no longer handle just the original exception.","body":"Problem with this becomes: If <code>SomeException</code> is very general – if it could be thrown down the line by <code>codeThatShouldBeRunIfNoExceptionThrown</code>, or if that method changes to throw that exception in the future – then your catch block will (silently) no longer handle just the original exception."},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1522409658,"post_id":30019496,"comment_id":86154571,"body_markdown":"@pathfinderelite You answer is fine (+1). I updated by focusing on the original requirement.","body":"@pathfinderelite You answer is fine (+1). I updated by focusing on the original requirement."}],"tags":[],"owner":{"account_id":338170,"reputation":3057,"user_id":666884,"display_name":"pathfinderelite"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522409605,"creation_date":1430687679,"answer_id":30019496,"question_id":30019453,"body_markdown":"Just put the code in the `try` block.  If an exception is thrown, it will skip to the `catch` block.  If no exception is thrown, the code will just run.\r\n\r\n    try {\r\n        someMethodThatMayThrowException();\r\n        codeThatShouldBeRunIfNoExceptionThrown();\r\n    } catch (Exception e) {...}","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Just put the code in the <code>try</code> block.  If an exception is thrown, it will skip to the <code>catch</code> block.  If no exception is thrown, the code will just run.</p>\n\n<pre><code>try {\n    someMethodThatMayThrowException();\n    codeThatShouldBeRunIfNoExceptionThrown();\n} catch (Exception e) {...}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1556313,"reputation":13459,"user_id":1447296,"accept_rate":100,"display_name":"adjan"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1430688187,"creation_date":1430687707,"answer_id":30019503,"question_id":30019453,"body_markdown":"Exceptions for flow control is kind of a bad practice. If you insist, use a `boolean` variable.\r\n\r\n\r\n    boolean thrown = false;\r\n\r\n    try {\r\n       //do something\r\n    } catch (Exception e) {\r\n       thrown = true;\r\n    }\r\n\r\n    //do something only if nothing was thrown\r\n\r\n    if (!thrown) { \r\n        // do stuff\r\n    }","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Exceptions for flow control is kind of a bad practice. If you insist, use a <code>boolean</code> variable.</p>\n\n<pre><code>boolean thrown = false;\n\ntry {\n   //do something\n} catch (Exception e) {\n   thrown = true;\n}\n\n//do something only if nothing was thrown\n\nif (!thrown) { \n    // do stuff\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1522409519,"post_id":30019506,"comment_id":86154507,"body_markdown":"The first way is really the natural way to do. The second that introduces a local variable and a reading indirection brings no advantage here.","body":"The first way is really the natural way to do. The second that introduces a local variable and a reading indirection brings no advantage here."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":6,"creation_date":1531210286,"post_id":30019506,"comment_id":89498526,"body_markdown":"@davidxxx &quot;brings no advantage&quot; -- It depends on the use case. There are situations where you might want the second task to be executed outside the `try` block instead of inside. You might not want executions from the second block to be handled the same way as exceptions in the first block.","body":"@davidxxx &quot;brings no advantage&quot; -- It depends on the use case. There are situations where you might want the second task to be executed outside the <code>try</code> block instead of inside. You might not want executions from the second block to be handled the same way as exceptions in the first block."}],"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"comment_count":2,"down_vote_count":1,"up_vote_count":64,"is_accepted":true,"score":63,"last_activity_date":1522329988,"creation_date":1430687724,"answer_id":30019506,"question_id":30019453,"body_markdown":"Here are two ways:\r\n\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        somethingElseAfterwards();\r\n    } catch (...) {\r\n        ...\r\n    }\r\n\r\nOr if you want your second block of code to be outside the `try` block:\r\n    \r\n    boolean success = false;\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        success = true;\r\n    } catch (...) {\r\n        ...\r\n    }\r\n    if (success) {\r\n        somethingElseAfterwards();\r\n    }\r\n\r\nYou could also put the `if` statement in a `finally` block, but there is not enough information in your question to tell if that would be preferable or not.","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Here are two ways:</p>\n\n<pre><code>try {\n    somethingThatMayThrowAnException();\n    somethingElseAfterwards();\n} catch (...) {\n    ...\n}\n</code></pre>\n\n<p>Or if you want your second block of code to be outside the <code>try</code> block:</p>\n\n<pre><code>boolean success = false;\ntry {\n    somethingThatMayThrowAnException();\n    success = true;\n} catch (...) {\n    ...\n}\nif (success) {\n    somethingElseAfterwards();\n}\n</code></pre>\n\n<p>You could also put the <code>if</code> statement in a <code>finally</code> block, but there is not enough information in your question to tell if that would be preferable or not.</p>\n"},{"comments":[{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1522409767,"post_id":49557427,"comment_id":86154610,"body_markdown":"Best part of the accepted answer (first part and not the second :)) with a bonus ! :)","body":"Best part of the accepted answer (first part and not the second :)) with a bonus ! :)"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1522412762,"post_id":49557427,"comment_id":86156197,"body_markdown":"@davidxxx Thanks. Always a pleasure hearing from you ;-)","body":"@davidxxx Thanks. Always a pleasure hearing from you ;-)"}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522330289,"creation_date":1522330289,"answer_id":49557427,"question_id":30019453,"body_markdown":"An enhancement to the proposed\r\n\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        somethingElseAfterwards();\r\n    } catch (...) {\r\n        ...\r\n    }\r\n\r\nfrom the accepted answer. What you should do is:\r\n\r\n    void foo() {\r\n      try {\r\n        doStuff();\r\n      } catch (...) {\r\n        handleException();\r\n      }\r\n    }\r\n\r\nThe above feels like overkill to someone who hasn&#39;t been exposed to &quot;clean code thinking&quot;. \r\n\r\nBut the point here: you do **not** want to mix different abstractions within one method. In other words: you don&#39;t have one try block, and more code following behind that within the same method. \r\n\r\nYou make sure that each and any method contains a straight forward path - you avoid anything that complicates your reading flow. As soon as you get used to writing and reading *such* kind of code you will find that it takes you dramatically less time to understand your code. ","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>An enhancement to the proposed</p>\n\n<pre><code>try {\n    somethingThatMayThrowAnException();\n    somethingElseAfterwards();\n} catch (...) {\n    ...\n}\n</code></pre>\n\n<p>from the accepted answer. What you should do is:</p>\n\n<pre><code>void foo() {\n  try {\n    doStuff();\n  } catch (...) {\n    handleException();\n  }\n}\n</code></pre>\n\n<p>The above feels like overkill to someone who hasn't been exposed to \"clean code thinking\". </p>\n\n<p>But the point here: you do <strong>not</strong> want to mix different abstractions within one method. In other words: you don't have one try block, and more code following behind that within the same method. </p>\n\n<p>You make sure that each and any method contains a straight forward path - you avoid anything that complicates your reading flow. As soon as you get used to writing and reading <em>such</em> kind of code you will find that it takes you dramatically less time to understand your code. </p>\n"},{"tags":[],"owner":{"account_id":5418293,"reputation":26,"user_id":4312815,"display_name":"Mobus Dorphin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592020302,"creation_date":1592020302,"answer_id":62355310,"question_id":30019453,"body_markdown":"I was trying to solve this exact problem when I came across this question, and the answers here helped me think it through and realize, at least in my particular case, this was the wrong question I should have been asking.  \r\n\r\nI wanted to create this method because I was already doing it in main() and wanted to do it elsewhere for portability.  So I copied a block of code that contained a try/catch block.  However, it turns out, I don&#39;t want to copy the catch block at all, because if the creation of the Connection failed, I just wanted to fail completely.  \r\n\r\nIt seems obvious now, but I never wanted to actually catch the exception in the first place.  That code was only there because I copy and pasted it.  So if you find yourself asking this question because you&#39;re in a try block and you might not generate a value, then consider if you just wanted to fail completely and not return anything that way this extra code is unnecessary. ","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>I was trying to solve this exact problem when I came across this question, and the answers here helped me think it through and realize, at least in my particular case, this was the wrong question I should have been asking.  </p>\n\n<p>I wanted to create this method because I was already doing it in main() and wanted to do it elsewhere for portability.  So I copied a block of code that contained a try/catch block.  However, it turns out, I don't want to copy the catch block at all, because if the creation of the Connection failed, I just wanted to fail completely.  </p>\n\n<p>It seems obvious now, but I never wanted to actually catch the exception in the first place.  That code was only there because I copy and pasted it.  So if you find yourself asking this question because you're in a try block and you might not generate a value, then consider if you just wanted to fail completely and not return anything that way this extra code is unnecessary. </p>\n"},{"tags":[],"owner":{"account_id":17017620,"reputation":185,"user_id":12311071,"display_name":"Harry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684355950,"creation_date":1684355950,"answer_id":76276034,"question_id":30019453,"body_markdown":"In my opinion the cleanest way to solve this, if you don&#39;t need the function to anything extra if an exception was raised, is return.\r\n```java\r\ntry  {\r\n    doSomthing();\r\n}\r\ncatch (Exception e) {\r\n    handleException();\r\n    return;\r\n}\r\n\r\nonlyIfSuccess();\r\n```","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>In my opinion the cleanest way to solve this, if you don't need the function to anything extra if an exception was raised, is return.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try  {\n    doSomthing();\n}\ncatch (Exception e) {\n    handleException();\n    return;\n}\n\nonlyIfSuccess();\n</code></pre>\n"}],"owner":{"account_id":1388354,"reputation":17373,"user_id":1319799,"accept_rate":46,"display_name":"Muhammad Umer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61881,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":30019506,"answer_count":7,"score":36,"last_activity_date":1684355950,"creation_date":1430687444,"question_id":30019453,"body_markdown":"How do I make it so the code runs only if there was no exception thrown?\r\n\r\nWith finally code runs whether there was an exception or not.\r\n\r\n    try {\r\n       //do something\r\n    } catch (Exception e) {}\r\n    //do something only if nothing was thrown\r\n","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>How do I make it so the code runs only if there was no exception thrown?</p>\n\n<p>With finally code runs whether there was an exception or not.</p>\n\n<pre><code>try {\n   //do something\n} catch (Exception e) {}\n//do something only if nothing was thrown\n</code></pre>\n"},{"tags":["java","project-reactor","nonblocking","reactive-streams"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684348416,"post_id":76275150,"comment_id":134506849,"body_markdown":"Don&#39;t use `sleep`, that will halt the reactor thread. If you want to pause use `delayElement`.","body":"Don&#39;t use <code>sleep</code>, that will halt the reactor thread. If you want to pause use <code>delayElement</code>."},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":1,"creation_date":1684349678,"post_id":76275150,"comment_id":134507084,"body_markdown":"use `Mono.fromCallable(this::getString)`","body":"use <code>Mono.fromCallable(this::getString)</code>"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":2,"creation_date":1684350360,"post_id":76275150,"comment_id":134507240,"body_markdown":"You block it _before_ the Mono even started, when you call `getString` to pass the resulting into the Mono. Just call it from the inside of a Mono, like `fromCallable`","body":"You block it <i>before</i> the Mono even started, when you call <code>getString</code> to pass the resulting into the Mono. Just call it from the inside of a Mono, like <code>fromCallable</code>"},{"owner":{"account_id":16453853,"reputation":29,"user_id":11886595,"display_name":"Rionash"},"score":0,"creation_date":1684357519,"post_id":76275150,"comment_id":134508608,"body_markdown":"Thank you all for the answer!\nI have another question, if I&#39;d like to use Flux instead of Mono to in this case, but Flux doesn&#39;t provide fromCallable() or fromSupplier() feature, how can I achieve the same result?","body":"Thank you all for the answer! I have another question, if I&#39;d like to use Flux instead of Mono to in this case, but Flux doesn&#39;t provide fromCallable() or fromSupplier() feature, how can I achieve the same result?"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":1,"creation_date":1684358809,"post_id":76275150,"comment_id":134508846,"body_markdown":"Flux is a version of a Publisher with multiple elements, while a `Callable` result is just a single value. That&#39;s why it supposed to be used as a single-element Mono. But if you want to make a Flux with just one element in it you can do `Flux.from(Mono.fromCallable {})`","body":"Flux is a version of a Publisher with multiple elements, while a <code>Callable</code> result is just a single value. That&#39;s why it supposed to be used as a single-element Mono. But if you want to make a Flux with just one element in it you can do <code>Flux.from(Mono.fromCallable {})</code>"}],"answers":[{"comments":[{"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"score":0,"creation_date":1684692091,"post_id":76275996,"comment_id":134550493,"body_markdown":"@rionash Did this answer assist you in resolving your issue?","body":"@rionash Did this answer assist you in resolving your issue?"}],"tags":[],"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684355553,"creation_date":1684355553,"answer_id":76275996,"question_id":76275150,"body_markdown":"First of all, it is crucial to understand that Reactor does not perform any magical conversion of blocking calls to non-blocking ones. To make an end-to-end non-blocking application, you need to use non-blocking drivers, NIO, etc. If you wrap your blocking code to the `Mono` or `Flux`, the thread is still will be blocked. \r\n\r\nAs for your second example, with sleep in the `getString` method. There are two points to pay attention at:\r\n\r\n**The first one**: you use `Mono.just`. The important thing is that it is usually used to provide a known value immediately. It means that the `getString` calculation is happening not in the scope of the reactor chain, but in the main thread during the reactor chain assembling phase. That&#39;s why you see &quot;sequential&quot; behavior. If you replace it with `Mono.fromCallable`, then the calculation will be in the reactor chain (parallel scheduler threads), and you will see the same behavior as in the 1 or 3 examples. \r\n\r\n**The second one**: It&#39;s important to note, that wrapping your `getString` method to the `Mono.fromCallable` does not make your code non-blocking. Your `sleep` still halts the threads of the parallel scheduler. In your production code, your `getString` method will likely be some database call or other service call that should be done via a non-blocking driver or NIO-based lib like Netty. To emulate it use `delayElement` instead of `sleep`, it works in a non-blocking way. Here is an example:\r\n\r\n```java\r\npublic static void main(String[] args) throws InterruptedException {\r\n    for (int i = 0; i &lt; 3; i++) {\r\n        getString()\r\n            .map(s -&gt; {\r\n                System.out.println(Instant.now() + &quot; Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                return s.length();\r\n            })\r\n            .subscribeOn(Schedulers.parallel())\r\n            .subscribe();\r\n        System.out.println(Instant.now() + &quot; Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n    }\r\n\r\n    TimeUnit.SECONDS.sleep(10);\r\n}\r\n\r\npublic static Mono&lt;String&gt; getString() {\r\n    return Mono.delay(Duration.ofSeconds(3))\r\n        .map(it -&gt; &quot;hello world&quot;);\r\n}\r\n```\r\n\r\nIt prints\r\n```java\r\n2023-05-17T20:31:12.099464Z Loop: 0 after MONO\r\n2023-05-17T20:31:12.112953Z Loop: 1 after MONO\r\n2023-05-17T20:31:12.113145Z Loop: 2 after MONO\r\n2023-05-17T20:31:15.105750Z Thread:parallel-2 hello world\r\n2023-05-17T20:31:15.117944Z Thread:parallel-5 hello world\r\n2023-05-17T20:31:15.117944Z Thread:parallel-6 hello world\r\n```\r\n","title":"Mono.just() is still blocking in my use case when the emitted element is pending","body":"<p>First of all, it is crucial to understand that Reactor does not perform any magical conversion of blocking calls to non-blocking ones. To make an end-to-end non-blocking application, you need to use non-blocking drivers, NIO, etc. If you wrap your blocking code to the <code>Mono</code> or <code>Flux</code>, the thread is still will be blocked.</p>\n<p>As for your second example, with sleep in the <code>getString</code> method. There are two points to pay attention at:</p>\n<p><strong>The first one</strong>: you use <code>Mono.just</code>. The important thing is that it is usually used to provide a known value immediately. It means that the <code>getString</code> calculation is happening not in the scope of the reactor chain, but in the main thread during the reactor chain assembling phase. That's why you see &quot;sequential&quot; behavior. If you replace it with <code>Mono.fromCallable</code>, then the calculation will be in the reactor chain (parallel scheduler threads), and you will see the same behavior as in the 1 or 3 examples.</p>\n<p><strong>The second one</strong>: It's important to note, that wrapping your <code>getString</code> method to the <code>Mono.fromCallable</code> does not make your code non-blocking. Your <code>sleep</code> still halts the threads of the parallel scheduler. In your production code, your <code>getString</code> method will likely be some database call or other service call that should be done via a non-blocking driver or NIO-based lib like Netty. To emulate it use <code>delayElement</code> instead of <code>sleep</code>, it works in a non-blocking way. Here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws InterruptedException {\n    for (int i = 0; i &lt; 3; i++) {\n        getString()\n            .map(s -&gt; {\n                System.out.println(Instant.now() + &quot; Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                return s.length();\n            })\n            .subscribeOn(Schedulers.parallel())\n            .subscribe();\n        System.out.println(Instant.now() + &quot; Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n    }\n\n    TimeUnit.SECONDS.sleep(10);\n}\n\npublic static Mono&lt;String&gt; getString() {\n    return Mono.delay(Duration.ofSeconds(3))\n        .map(it -&gt; &quot;hello world&quot;);\n}\n</code></pre>\n<p>It prints</p>\n<pre class=\"lang-java prettyprint-override\"><code>2023-05-17T20:31:12.099464Z Loop: 0 after MONO\n2023-05-17T20:31:12.112953Z Loop: 1 after MONO\n2023-05-17T20:31:12.113145Z Loop: 2 after MONO\n2023-05-17T20:31:15.105750Z Thread:parallel-2 hello world\n2023-05-17T20:31:15.117944Z Thread:parallel-5 hello world\n2023-05-17T20:31:15.117944Z Thread:parallel-6 hello world\n</code></pre>\n"}],"owner":{"account_id":16453853,"reputation":29,"user_id":11886595,"display_name":"Rionash"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684355553,"creation_date":1684347806,"question_id":76275150,"body_markdown":"I have two test that use sleep() to simulate an api call which takes time to process, and test if Mono.just() make it non-blocking.\r\n\r\nIn my first test, I emitted a String directly, but made it blocking in map().\r\n```\r\n    @Test\r\n    public void testMono() throws InterruptedException {\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Mono.just(&quot;Hello World&quot;)\r\n                    .map(s -&gt; {\r\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                        try {\r\n                            sleep(2000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return s.length();\r\n                    })\r\n                    .map(integer -&gt; {\r\n                        try {\r\n                            sleep(3000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return integer.toString();\r\n                    })\r\n                    .subscribeOn(Schedulers.parallel())\r\n\r\n                    .subscribe(System.out::println);\r\n\r\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n        }\r\n\r\n        sleep(10000);\r\n    }\r\n```\r\n\r\nAnd the result is expected as non-blocking, since all the outputs `System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);` show up together at the same time.\r\n\r\nHowever, in the second test, I replace the emitted element from &quot;Hello world&quot; to a blocking getString() method. The purpose of put sleep() in getString() is that, I&#39;d like to simulate the scenario that it&#39;s taking time to get the emitted element. \r\nAnd the result is now blocking since the output shows up one by one after it finished receiving the emitted element.  \r\n```\r\n    @Test\r\n    public void testMono2() throws InterruptedException {\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Mono.just(getString())\r\n                    .map(s -&gt; {\r\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                        try {\r\n                            sleep(2000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return s.length();\r\n                    })\r\n                    .map(integer -&gt; {\r\n                        try {\r\n                            sleep(3000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return integer.toString();\r\n                    })\r\n                    .subscribeOn(Schedulers.parallel())\r\n\r\n                    .subscribe(System.out::println);\r\n\r\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n        }\r\n\r\n        sleep(10000);\r\n    }\r\n\r\n    public String getString(){\r\n        try {\r\n            sleep(2000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return &quot;Hello world&quot;;\r\n    }\r\n```\r\n\r\nAnd in the third test, it&#39;s also acting as non-blocking.\r\n```\r\n    int count = 0;\r\n\r\n    @Test\r\n    public void testFluxSink() throws InterruptedException {\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            System.out.println(&quot;Start Loop: &quot; + i);\r\n            int curLoop = count++;\r\n            Flux.create(fluxSink -&gt; {\r\n                try {\r\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; start sleeping&quot;);\r\n                    sleep(5000);\r\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; end sleeping&quot;);\r\n                    fluxSink.next(onNext());\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }).subscribeOn(Schedulers.parallel()).subscribe(s -&gt; {\r\n                System.out.println(Thread.currentThread());\r\n                System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot;completed receiving&quot; + &quot; &quot; + s);\r\n            });\r\n        }\r\n        sleep(100000);\r\n    }\r\n\r\n    public String onNext() throws InterruptedException {\r\n        sleep(5000);\r\n        return &quot;onNext&quot;;\r\n    }\r\n```\r\n\r\n\r\nWondering if I misunderstand the concept of reactor, and would like to know how did I use it in the wrong way for the 2nd test?\r\n","title":"Mono.just() is still blocking in my use case when the emitted element is pending","body":"<p>I have two test that use sleep() to simulate an api call which takes time to process, and test if Mono.just() make it non-blocking.</p>\n<p>In my first test, I emitted a String directly, but made it blocking in map().</p>\n<pre><code>    @Test\n    public void testMono() throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n            Mono.just(&quot;Hello World&quot;)\n                    .map(s -&gt; {\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                        try {\n                            sleep(2000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return s.length();\n                    })\n                    .map(integer -&gt; {\n                        try {\n                            sleep(3000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return integer.toString();\n                    })\n                    .subscribeOn(Schedulers.parallel())\n\n                    .subscribe(System.out::println);\n\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n        }\n\n        sleep(10000);\n    }\n</code></pre>\n<p>And the result is expected as non-blocking, since all the outputs <code>System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);</code> show up together at the same time.</p>\n<p>However, in the second test, I replace the emitted element from &quot;Hello world&quot; to a blocking getString() method. The purpose of put sleep() in getString() is that, I'd like to simulate the scenario that it's taking time to get the emitted element.\nAnd the result is now blocking since the output shows up one by one after it finished receiving the emitted element.</p>\n<pre><code>    @Test\n    public void testMono2() throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n            Mono.just(getString())\n                    .map(s -&gt; {\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                        try {\n                            sleep(2000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return s.length();\n                    })\n                    .map(integer -&gt; {\n                        try {\n                            sleep(3000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return integer.toString();\n                    })\n                    .subscribeOn(Schedulers.parallel())\n\n                    .subscribe(System.out::println);\n\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n        }\n\n        sleep(10000);\n    }\n\n    public String getString(){\n        try {\n            sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        return &quot;Hello world&quot;;\n    }\n</code></pre>\n<p>And in the third test, it's also acting as non-blocking.</p>\n<pre><code>    int count = 0;\n\n    @Test\n    public void testFluxSink() throws InterruptedException {\n        for (int i = 0; i &lt; 10; i++) {\n            System.out.println(&quot;Start Loop: &quot; + i);\n            int curLoop = count++;\n            Flux.create(fluxSink -&gt; {\n                try {\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; start sleeping&quot;);\n                    sleep(5000);\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; end sleeping&quot;);\n                    fluxSink.next(onNext());\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }).subscribeOn(Schedulers.parallel()).subscribe(s -&gt; {\n                System.out.println(Thread.currentThread());\n                System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot;completed receiving&quot; + &quot; &quot; + s);\n            });\n        }\n        sleep(100000);\n    }\n\n    public String onNext() throws InterruptedException {\n        sleep(5000);\n        return &quot;onNext&quot;;\n    }\n</code></pre>\n<p>Wondering if I misunderstand the concept of reactor, and would like to know how did I use it in the wrong way for the 2nd test?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832232,"post_id":21383139,"comment_id":32248997,"body_markdown":"Which java version are you using?","body":"Which java version are you using?"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1390832252,"post_id":21383139,"comment_id":32249016,"body_markdown":"@Mason It must be Java 7+ because of the `&lt;&gt;`.","body":"@Mason It must be Java 7+ because of the <code>&lt;&gt;</code>."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1390832288,"post_id":21383139,"comment_id":32249042,"body_markdown":"possible duplicate of [java generic and wild card](http://stackoverflow.com/questions/7344330/java-generic-and-wild-card)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/7344330/java-generic-and-wild-card\">java generic and wild card</a>"},{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832384,"post_id":21383139,"comment_id":32249119,"body_markdown":"@Radiodef Never know could have had an error with his initialization of the List.","body":"@Radiodef Never know could have had an error with his initialization of the List."},{"owner":{"account_id":2095246,"reputation":43828,"user_id":1864167,"accept_rate":90,"display_name":"Jeroen Vannevel"},"score":0,"creation_date":1390832418,"post_id":21383139,"comment_id":32249139,"body_markdown":"Just make it `List&lt;Number&gt;` instead of the generic wildcard. You can&#39;t know how the type will get filled in so it will throw an error.","body":"Just make it <code>List&lt;Number&gt;</code> instead of the generic wildcard. You can&#39;t know how the type will get filled in so it will throw an error."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1390832469,"post_id":21383139,"comment_id":32249172,"body_markdown":"@Mason That said, I am actually not sure why this would compile because `&lt;&gt;` implies type inference. You cannot do `new ArrayList&lt;? extends Number&gt;` so I don&#39;t know why the `&lt;&gt;` would be allowed. I am not sure what Java 7 would infer in that case.","body":"@Mason That said, I am actually not sure why this would compile because <code>&lt;&gt;</code> implies type inference. You cannot do <code>new ArrayList&lt;? extends Number&gt;</code> so I don&#39;t know why the <code>&lt;&gt;</code> would be allowed. I am not sure what Java 7 would infer in that case."},{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832549,"post_id":21383139,"comment_id":32249238,"body_markdown":"@Radiodef good point, I need to test.","body":"@Radiodef good point, I need to test."}],"answers":[{"comments":[{"owner":{"account_id":14105282,"reputation":657,"user_id":10189517,"display_name":"HKIT"},"score":0,"creation_date":1665287643,"post_id":21383175,"comment_id":130662997,"body_markdown":"why can&#39;t we add Number type, all elements inside are Number, just like we can get list item as number.","body":"why can&#39;t we add Number type, all elements inside are Number, just like we can get list item as number."},{"owner":{"account_id":1559142,"reputation":4127,"user_id":3084258,"accept_rate":100,"display_name":"Filipp Voronov"},"score":0,"creation_date":1665991504,"post_id":21383175,"comment_id":130820140,"body_markdown":"because for example in a cell with type `Lost&lt;? extends Number&gt;` can be `List&lt;Integer&gt;` and you can&#39;t add `Number` in case it&#39;s 3.14","body":"because for example in a cell with type <code>Lost&lt;? extends Number&gt;</code> can be <code>List&lt;Integer&gt;</code> and you can&#39;t add <code>Number</code> in case it&#39;s 3.14"}],"tags":[],"owner":{"account_id":1559142,"reputation":4127,"user_id":3084258,"accept_rate":100,"display_name":"Filipp Voronov"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390832266,"creation_date":1390832266,"answer_id":21383175,"question_id":21383139,"body_markdown":"Because `List&lt;? extends Number&gt;` means that your variable `l` holds a value of type `List` with **concrete** (but unknown!) type argument that extends `Number`.\r\n\r\nYou can add only `null`, because `l` can hold a `List&lt;MyClass&gt;` for example, where `MyClass` is your class that extends `Number`, but nor `Integer`, nor `Double` value can be casted to `MyClass`.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Because <code>List&lt;? extends Number&gt;</code> means that your variable <code>l</code> holds a value of type <code>List</code> with <strong>concrete</strong> (but unknown!) type argument that extends <code>Number</code>.</p>\n\n<p>You can add only <code>null</code>, because <code>l</code> can hold a <code>List&lt;MyClass&gt;</code> for example, where <code>MyClass</code> is your class that extends <code>Number</code>, but nor <code>Integer</code>, nor <code>Double</code> value can be casted to <code>MyClass</code>.</p>\n"},{"comments":[{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":3,"creation_date":1390832692,"post_id":21383293,"comment_id":32249331,"body_markdown":"Crucially, the wildcard means that the List *once had a type* but *we don&#39;t know what it is anymore*.","body":"Crucially, the wildcard means that the List <i>once had a type</i> but <i>we don&#39;t know what it is anymore</i>."},{"owner":{"account_id":265464,"reputation":38253,"user_id":552438,"display_name":"Anthony Grist"},"score":4,"creation_date":1390832718,"post_id":21383293,"comment_id":32249354,"body_markdown":"&quot;boy, this is harder to explain than it is to understand :)&quot; That&#39;s true of most things, I think.","body":"&quot;boy, this is harder to explain than it is to understand :)&quot; That&#39;s true of most things, I think."},{"owner":{"account_id":65834,"reputation":9352,"user_id":193467,"accept_rate":83,"display_name":"angryITguy"},"score":0,"creation_date":1581385296,"post_id":21383293,"comment_id":106406938,"body_markdown":"@AnthonyGrist true, you have to read it a couple of times, but it is correctly written..","body":"@AnthonyGrist true, you have to read it a couple of times, but it is correctly written.."}],"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"comment_count":3,"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1539674773,"creation_date":1390832562,"answer_id":21383293,"question_id":21383139,"body_markdown":"`List&lt;? extends Number&gt;` does not mean &quot;a list that can hold all objects of subclasses of `Number`&quot;, it means &quot;a list parameterized to one concrete class that extends `Number`&quot;. It&#39;s not the contents of the list itself you are defining, it&#39;s what the parameterized type of the actual list-object assigned to the variable can be (boy, this is harder to explain than it is to understand :) )\r\n\r\nSo, you can do:\r\n\r\n    List&lt;? extends Number&gt; l = new ArrayList&lt;Integer&gt;();\r\n    List&lt;? extends Number&gt; l = new ArrayList&lt;Double&gt;();\r\n\r\nIf you want a list that is able to hold any object of class Number or its subclasses, just do this:\r\n\r\n    List&lt;Number&gt; l = new ArrayList&lt;&gt;();\r\n\r\n    l.add(new Integer(33));\r\n    l.add(new Double(33.3d));\r\n\r\n(The boxing of the values inserted is unnecessary, but there for clarity..)","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p><code>List&lt;? extends Number&gt;</code> does not mean \"a list that can hold all objects of subclasses of <code>Number</code>\", it means \"a list parameterized to one concrete class that extends <code>Number</code>\". It's not the contents of the list itself you are defining, it's what the parameterized type of the actual list-object assigned to the variable can be (boy, this is harder to explain than it is to understand :) )</p>\n\n<p>So, you can do:</p>\n\n<pre><code>List&lt;? extends Number&gt; l = new ArrayList&lt;Integer&gt;();\nList&lt;? extends Number&gt; l = new ArrayList&lt;Double&gt;();\n</code></pre>\n\n<p>If you want a list that is able to hold any object of class Number or its subclasses, just do this:</p>\n\n<pre><code>List&lt;Number&gt; l = new ArrayList&lt;&gt;();\n\nl.add(new Integer(33));\nl.add(new Double(33.3d));\n</code></pre>\n\n<p>(The boxing of the values inserted is unnecessary, but there for clarity..)</p>\n"},{"tags":[],"owner":{"account_id":3200341,"reputation":12790,"user_id":2702504,"accept_rate":68,"display_name":"Keerthivasan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390833018,"creation_date":1390833018,"answer_id":21383465,"question_id":21383139,"body_markdown":"I will add one more way to add the subtypes of `Number` to this list. i.e\r\n\r\n    List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\r\n     l.add(new Integer(3));  //OK\r\n     l.add(new Double(3.3)); //OK\r\n\r\nThis is allowed since the list is parameterized to be any *unknown supertype* of `Number` class. so, compiler allows the known subtype of `Number`. i.e `Integer` and `Double` types\r\n\r\n\r\n\r\n","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>I will add one more way to add the subtypes of <code>Number</code> to this list. i.e</p>\n\n<pre><code>List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\n l.add(new Integer(3));  //OK\n l.add(new Double(3.3)); //OK\n</code></pre>\n\n<p>This is allowed since the list is parameterized to be any <em>unknown supertype</em> of <code>Number</code> class. so, compiler allows the known subtype of <code>Number</code>. i.e <code>Integer</code> and <code>Double</code> types</p>\n"},{"tags":[],"owner":{"account_id":938724,"reputation":35,"user_id":967193,"display_name":"punitusingh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400519229,"creation_date":1400519229,"answer_id":23743411,"question_id":21383139,"body_markdown":"Yes in case of \r\n\r\n    List&lt;? extends Number&gt; \r\n\r\nthis is just a reference, may be the actual object will be \r\n\r\n    List&lt;Integer&gt;\r\n\r\nso you should not be allowed to add new Double(5.0) in a list of Integer.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Yes in case of </p>\n\n<pre><code>List&lt;? extends Number&gt; \n</code></pre>\n\n<p>this is just a reference, may be the actual object will be </p>\n\n<pre><code>List&lt;Integer&gt;\n</code></pre>\n\n<p>so you should not be allowed to add new Double(5.0) in a list of Integer.</p>\n"},{"comments":[{"owner":{"account_id":4823489,"reputation":1072,"user_id":3893543,"accept_rate":84,"display_name":"CBA110"},"score":0,"creation_date":1518729797,"post_id":47585485,"comment_id":84636901,"body_markdown":"Ok so could you give me an example of a list instantiation using &quot;upper bound&quot; and adding elements to it. I don&#39;t think it&#39;s possible! When creating a list you can only use &quot;lower bound&quot; since it&#39;s never going to be immutable. &quot;Upper bound&quot; can still be used with a Collection in a method parameter. Could you confirm this.","body":"Ok so could you give me an example of a list instantiation using &quot;upper bound&quot; and adding elements to it. I don&#39;t think it&#39;s possible! When creating a list you can only use &quot;lower bound&quot; since it&#39;s never going to be immutable. &quot;Upper bound&quot; can still be used with a Collection in a method parameter. Could you confirm this."},{"owner":{"account_id":1974638,"reputation":3842,"user_id":1876775,"accept_rate":68,"display_name":"Zippy"},"score":2,"creation_date":1522954258,"post_id":47585485,"comment_id":86370609,"body_markdown":"&quot;Upper bounded and unbounded wildcard collections are immutable&quot; - not exactly, they can still have elements removed and can also be cleared :-)","body":"&quot;Upper bounded and unbounded wildcard collections are immutable&quot; - not exactly, they can still have elements removed and can also be cleared :-)"},{"owner":{"account_id":8625770,"reputation":2811,"user_id":6459056,"accept_rate":77,"display_name":"aName"},"score":0,"creation_date":1530737444,"post_id":47585485,"comment_id":89343610,"body_markdown":"element of which type ??","body":"element of which type ??"},{"owner":{"account_id":17319340,"reputation":528,"user_id":12545137,"display_name":"Dinh Quang Tuan"},"score":0,"creation_date":1655630622,"post_id":47585485,"comment_id":128373370,"body_markdown":"Your explanation is simple and understandable.","body":"Your explanation is simple and understandable."}],"tags":[],"owner":{"account_id":7769028,"reputation":327,"user_id":5879277,"display_name":"Test1 Test2"},"comment_count":4,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1512161377,"creation_date":1512093022,"answer_id":47585485,"question_id":21383139,"body_markdown":"Upper bounded and unbounded wildcard collections are immutable. \r\n\r\nFor example, you cannot do:\r\n\r\n    List&lt;? extends Number&gt; myList = new ArrayList&lt;Integer&gt;();\r\n    myList.add(new Integer(3)); //will not compile\r\nThis fails to compile because java does not know what type of List `List&lt;? extends Number&gt;` is at compilation time. \r\n\r\nSo the example above, at compile time,  `myList` could be `List&lt;Double&gt;`or `List&lt;Integer&gt;` or a `List` of any subclass of `Number`. And since you cannot add a `Double` to a `List&lt;Integer&gt;` or vise-versa, the compilation fails.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Upper bounded and unbounded wildcard collections are immutable. </p>\n\n<p>For example, you cannot do:</p>\n\n<pre><code>List&lt;? extends Number&gt; myList = new ArrayList&lt;Integer&gt;();\nmyList.add(new Integer(3)); //will not compile\n</code></pre>\n\n<p>This fails to compile because java does not know what type of List <code>List&lt;? extends Number&gt;</code> is at compilation time. </p>\n\n<p>So the example above, at compile time,  <code>myList</code> could be <code>List&lt;Double&gt;</code>or <code>List&lt;Integer&gt;</code> or a <code>List</code> of any subclass of <code>Number</code>. And since you cannot add a <code>Double</code> to a <code>List&lt;Integer&gt;</code> or vise-versa, the compilation fails.</p>\n"},{"comments":[{"owner":{"account_id":14105282,"reputation":657,"user_id":10189517,"display_name":"HKIT"},"score":0,"creation_date":1665287285,"post_id":60374978,"comment_id":130662954,"body_markdown":"why can&#39;t the compiler just add the value as Number to the list for the upperbounded wildcard, it should be fine? just like we can read from upper bounded list item as Number","body":"why can&#39;t the compiler just add the value as Number to the list for the upperbounded wildcard, it should be fine? just like we can read from upper bounded list item as Number"},{"owner":{"account_id":10793477,"reputation":81,"user_id":7940105,"display_name":"flounder"},"score":0,"creation_date":1666177433,"post_id":60374978,"comment_id":130872464,"body_markdown":"@HKIT then we would still have this problem:\n&lt;pre&gt;&lt;code&gt;List&lt;Integer&gt; integers = new ArrayList&lt;Integer&gt;\nList&lt;? extends Number&gt; numbers = integers;\n// now &#39;numbers&#39; and &#39;integers&#39; refer to the same list\nnumbers.add(1.0); // 1.0 extends Number but not Integer, adding this to &#39;integers&#39; would be an error\nfor (Integer integer : integers) {\n    // and we would have problems with casting\n    System.out.println(integer);\n}\n&lt;/code&gt;&lt;/pre&gt;","body":"@HKIT then we would still have this problem: &lt;pre&gt;&lt;code&gt;List&lt;Integer&gt; integers = new ArrayList&lt;Integer&gt; List&lt;? extends Number&gt; numbers = integers; // now &#39;numbers&#39; and &#39;integers&#39; refer to the same list numbers.add(1.0); // 1.0 extends Number but not Integer, adding this to &#39;integers&#39; would be an error for (Integer integer : integers) {     // and we would have problems with casting     System.out.println(integer); } &lt;/code&gt;&lt;/pre&gt;"}],"tags":[],"owner":{"account_id":10793477,"reputation":81,"user_id":7940105,"display_name":"flounder"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1582543663,"creation_date":1582543663,"answer_id":60374978,"question_id":21383139,"body_markdown":"The problem with upper-bounded generics is that the compiler doesn&#39;t know the exact type that is going to be used, for example:\r\n```\r\nList&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\r\nupperBounded = new ArrayList&lt;Double&gt;();\r\n```\r\n`upperBounded` can be a List of Integers as well as a list of Doubles or any other descendant of Number. Now imagine what will happen if Java allowed us to add any subclass of Number to that List.\r\n```\r\nList&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\r\nupperBounded.add(1.0); // compile-time error\r\n```\r\nGood thing that Java prevents us from doing that because this would introduce a lot of bugs.\r\n\r\nThe same applies to the unbounded generic types.\r\n\r\nNow what about the lower-bounded generics?\r\n\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Integer&gt;();\r\nlowerBounded.add(0);\r\n```\r\nThis is is perfectly fine because we are safe to assume that we can add Integers to any List of an Integer superclass and this will not lead to inconsistency, for example:\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\r\nlowerBounded.add(0);\r\n```\r\nHere we have a reference that allows a List of Integers or one of the Integer supertypes. ArrayList of Numbers fits into that definition, so we are able to assign it to that reference. Then we can add an Integer to this list, and this is also fine because a List of Numbers can contain an Integer (because Integer is a Number).\r\n\r\nIt may be surprising, but you can&#39;t add anything not assignable to Integer to this list for the same reason as I explained above for lower-bounded generics.\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\r\nlowerBounded.add(1.0); // compile-time error\r\n```\r\nAs the compiler does not know the List of which exact type will be used, it does not allow us to add anything that could potentially break the promise given by generics.\r\n\r\nHope that helps.\r\n\r\n","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>The problem with upper-bounded generics is that the compiler doesn't know the exact type that is going to be used, for example:</p>\n\n<pre><code>List&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\nupperBounded = new ArrayList&lt;Double&gt;();\n</code></pre>\n\n<p><code>upperBounded</code> can be a List of Integers as well as a list of Doubles or any other descendant of Number. Now imagine what will happen if Java allowed us to add any subclass of Number to that List.</p>\n\n<pre><code>List&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\nupperBounded.add(1.0); // compile-time error\n</code></pre>\n\n<p>Good thing that Java prevents us from doing that because this would introduce a lot of bugs.</p>\n\n<p>The same applies to the unbounded generic types.</p>\n\n<p>Now what about the lower-bounded generics?</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Integer&gt;();\nlowerBounded.add(0);\n</code></pre>\n\n<p>This is is perfectly fine because we are safe to assume that we can add Integers to any List of an Integer superclass and this will not lead to inconsistency, for example:</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\nlowerBounded.add(0);\n</code></pre>\n\n<p>Here we have a reference that allows a List of Integers or one of the Integer supertypes. ArrayList of Numbers fits into that definition, so we are able to assign it to that reference. Then we can add an Integer to this list, and this is also fine because a List of Numbers can contain an Integer (because Integer is a Number).</p>\n\n<p>It may be surprising, but you can't add anything not assignable to Integer to this list for the same reason as I explained above for lower-bounded generics.</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\nlowerBounded.add(1.0); // compile-time error\n</code></pre>\n\n<p>As the compiler does not know the List of which exact type will be used, it does not allow us to add anything that could potentially break the promise given by generics.</p>\n\n<p>Hope that helps.</p>\n"}],"owner":{"account_id":3189208,"reputation":2492,"user_id":2693979,"accept_rate":50,"display_name":"user2693979"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5361,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"answer_count":6,"score":22,"last_activity_date":1684355235,"creation_date":1390832139,"question_id":21383139,"body_markdown":"I have a list with upper bound generics.\r\n\r\n     List&lt;? extends Number&gt; l = new ArrayList&lt;&gt;();\r\n     l.add(new Integer(3));  //ERROR\r\n     l.add(new Double(3.3)); // ERROR\r\n\r\nI don&#39;t understand the problem, because Integer and Double extend Number.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>I have a list with upper bound generics.</p>\n\n<pre><code> List&lt;? extends Number&gt; l = new ArrayList&lt;&gt;();\n l.add(new Integer(3));  //ERROR\n l.add(new Double(3.3)); // ERROR\n</code></pre>\n\n<p>I don't understand the problem, because Integer and Double extend Number.</p>\n"},{"tags":["java","android","flutter","dart","wifi"],"owner":{"account_id":8260582,"reputation":131,"user_id":6212158,"display_name":"Ababwa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684355153,"creation_date":1684355153,"question_id":76275958,"body_markdown":"I have a device emitting a Wi-Fi access point with a known SSID and password. I&#39;m trying to connect my Android phone to that AP programmatically. I can connect my phone to it manually using the Wi-Fi settings, so I&#39;m sure I have the right SSID and password and that the network is up. I&#39;m using Flutter and a MethodChannel to talk to Java from Flutter.\r\n\r\nHere&#39;s my Java-side code:\r\n```\r\npublic class MainActivity extends FlutterActivity {\r\n\tprivate static final String CHANNEL = &quot;wifi&quot;;\r\n\tprivate static final int TIMEOUT = 60000;\r\n\t\r\n\tprivate static ConnectivityManager.NetworkCallback callback;\r\n\t\r\n\t@Override\r\n\tpublic void configureFlutterEngine(FlutterEngine flutterEngine) {\r\n\t\tsuper.configureFlutterEngine(flutterEngine);\r\n\t\tnew MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\r\n\t\t\t.setMethodCallHandler((call, result) -&gt; {\r\n\t\t\t\tConnectivityManager cm = (ConnectivityManager)getApplicationContext()\r\n\t\t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\t\t\tif(call.method.equals(&quot;request&quot;)) {\r\n\t\t\t\t\tString ssid = call.argument(&quot;ssid&quot;);\r\n\t\t\t\t\tString pass = call.argument(&quot;password&quot;);\r\n\t\t\t\t\tif(callback != null) {\r\n\t\t\t\t\t\tcm.unregisterNetworkCallback(callback);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback = new ConnectivityManager.NetworkCallback() {\r\n\t\t\t\t\t\tboolean first = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void onAvailable(Network network) {\r\n\t\t\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\t\t\tfirst = false;\r\n\t\t\t\t\t\t\t\tresult.success(cm.bindProcessToNetwork(network));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void onUnavailable() {\r\n\t\t\t\t\t\t\tcallback = null;\r\n\t\t\t\t\t\t\tresult.success(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tWifiNetworkSpecifier wfNetSpec = new WifiNetworkSpecifier.Builder()\r\n\t\t\t\t\t\t.setSsid(ssid)\r\n\t\t\t\t\t\t.setWpa2Passphrase(pass)\r\n\t\t\t\t\t\t.build();\r\n\t\t\t\t\tNetworkRequest netReq = new NetworkRequest.Builder()\r\n\t\t\t\t\t\t.addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\r\n\t\t\t\t\t\t.setNetworkSpecifier(wfNetSpec)\r\n\t\t\t\t\t\t.build();\r\n\t\t\t\t\tcm.requestNetwork(netReq, callback, TIMEOUT);\r\n\t\t\t\t} else if(call.method.equals(&quot;release&quot;)) {\r\n\t\t\t\t\tif(callback != null) {\r\n\t\t\t\t\t\tcm.unregisterNetworkCallback(callback);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcm.bindProcessToNetwork(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n}\r\n```\r\nHere is my Flutter-side Dart code:\r\n```\r\nconst MethodChannel _channel = MethodChannel(&#39;wifi&#39;);\r\n\r\nFuture&lt;bool&gt; request(String ssid, String password) async {\r\n  return await _channel.invokeMethod&lt;bool&gt;(&#39;request&#39;, {\r\n    &#39;ssid&#39;: ssid,\r\n    &#39;password&#39;: password,\r\n  }) == true;\r\n}\r\n\r\nvoid release() {\r\n  _channel.invokeMethod(&#39;release&#39;);\r\n}\r\n```\r\nThis approach was inspired by the questions below, yet `onAvailable` is never called in my code:\r\n\r\nhttps://stackoverflow.com/questions/68904640/ask-user-to-connect-to-a-specific-wifi-flutter\r\n\r\nhttps://stackoverflow.com/questions/64913185/after-called-bindprocesstonetworknetwork-app-never-connect-to-internet-throug\r\n\r\nWhat is the problem with this approach?\r\n\r\nI&#39;m using a Pixel 4a with Android 13.\r\n\r\nAdditionally, when I call the Dart `request` function, a box will appear on-screen with &quot;Searching for device...&quot; and will fail after 30 seconds with the message &quot;No devices found. Make sure devices are turned on and available to connect.&quot; with options &quot;Cancel&quot; and &quot;Try again&quot;. If I hit &quot;Try again&quot; it will repeat and fail again after 30 seconds. This is not a UI I created. I believe it&#39;s an OS-created UI. What am I doing that is triggering this UI, could it be getting in the way of connecting to the AP, and how might I suppress it?","title":"Android Network Request Fails","body":"<p>I have a device emitting a Wi-Fi access point with a known SSID and password. I'm trying to connect my Android phone to that AP programmatically. I can connect my phone to it manually using the Wi-Fi settings, so I'm sure I have the right SSID and password and that the network is up. I'm using Flutter and a MethodChannel to talk to Java from Flutter.</p>\n<p>Here's my Java-side code:</p>\n<pre><code>public class MainActivity extends FlutterActivity {\n    private static final String CHANNEL = &quot;wifi&quot;;\n    private static final int TIMEOUT = 60000;\n    \n    private static ConnectivityManager.NetworkCallback callback;\n    \n    @Override\n    public void configureFlutterEngine(FlutterEngine flutterEngine) {\n        super.configureFlutterEngine(flutterEngine);\n        new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\n            .setMethodCallHandler((call, result) -&gt; {\n                ConnectivityManager cm = (ConnectivityManager)getApplicationContext()\n                    .getSystemService(Context.CONNECTIVITY_SERVICE);\n                if(call.method.equals(&quot;request&quot;)) {\n                    String ssid = call.argument(&quot;ssid&quot;);\n                    String pass = call.argument(&quot;password&quot;);\n                    if(callback != null) {\n                        cm.unregisterNetworkCallback(callback);\n                    }\n                    callback = new ConnectivityManager.NetworkCallback() {\n                        boolean first = true;\n                        \n                        @Override\n                        public void onAvailable(Network network) {\n                            if(first) {\n                                first = false;\n                                result.success(cm.bindProcessToNetwork(network));\n                            }\n                        }\n                        \n                        @Override\n                        public void onUnavailable() {\n                            callback = null;\n                            result.success(false);\n                        }\n                    };\n                    WifiNetworkSpecifier wfNetSpec = new WifiNetworkSpecifier.Builder()\n                        .setSsid(ssid)\n                        .setWpa2Passphrase(pass)\n                        .build();\n                    NetworkRequest netReq = new NetworkRequest.Builder()\n                        .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\n                        .setNetworkSpecifier(wfNetSpec)\n                        .build();\n                    cm.requestNetwork(netReq, callback, TIMEOUT);\n                } else if(call.method.equals(&quot;release&quot;)) {\n                    if(callback != null) {\n                        cm.unregisterNetworkCallback(callback);\n                    }\n                    cm.bindProcessToNetwork(null);\n                }\n            }\n        );\n    }\n}\n</code></pre>\n<p>Here is my Flutter-side Dart code:</p>\n<pre><code>const MethodChannel _channel = MethodChannel('wifi');\n\nFuture&lt;bool&gt; request(String ssid, String password) async {\n  return await _channel.invokeMethod&lt;bool&gt;('request', {\n    'ssid': ssid,\n    'password': password,\n  }) == true;\n}\n\nvoid release() {\n  _channel.invokeMethod('release');\n}\n</code></pre>\n<p>This approach was inspired by the questions below, yet <code>onAvailable</code> is never called in my code:</p>\n<p><a href=\"https://stackoverflow.com/questions/68904640/ask-user-to-connect-to-a-specific-wifi-flutter\">Ask user to connect to a specific WiFi flutter</a></p>\n<p><a href=\"https://stackoverflow.com/questions/64913185/after-called-bindprocesstonetworknetwork-app-never-connect-to-internet-throug\">after called BindProcessToNetwork(network). APP never connect to internet through mobile data</a></p>\n<p>What is the problem with this approach?</p>\n<p>I'm using a Pixel 4a with Android 13.</p>\n<p>Additionally, when I call the Dart <code>request</code> function, a box will appear on-screen with &quot;Searching for device...&quot; and will fail after 30 seconds with the message &quot;No devices found. Make sure devices are turned on and available to connect.&quot; with options &quot;Cancel&quot; and &quot;Try again&quot;. If I hit &quot;Try again&quot; it will repeat and fail again after 30 seconds. This is not a UI I created. I believe it's an OS-created UI. What am I doing that is triggering this UI, could it be getting in the way of connecting to the AP, and how might I suppress it?</p>\n"},{"tags":["java","spring-boot","graphql","graphql-java","scalar"],"comments":[{"owner":{"account_id":5771601,"reputation":742,"user_id":4554899,"display_name":"Vinay"},"score":1,"creation_date":1684096556,"post_id":76249529,"comment_id":134463110,"body_markdown":"Create a JSON object  of the data and Encode the JSON object into a string using JSON.stringify() or directly convert your Json to string and pass the string as the value of the JSON field in your GraphQL query.","body":"Create a JSON object  of the data and Encode the JSON object into a string using JSON.stringify() or directly convert your Json to string and pass the string as the value of the JSON field in your GraphQL query."},{"owner":{"account_id":3338251,"reputation":19359,"user_id":2805154,"accept_rate":75,"display_name":"Michel Floyd"},"score":0,"creation_date":1684197863,"post_id":76249529,"comment_id":134479112,"body_markdown":"Use *query variables* and stringify the JSON before passing it.","body":"Use <i>query variables</i> and stringify the JSON before passing it."},{"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"score":0,"creation_date":1684217603,"post_id":76249529,"comment_id":134481038,"body_markdown":"I need to pass 100s of key-value pair, so passing it as a string would be difficult. Need to pass it a JSON itself.","body":"I need to pass 100s of key-value pair, so passing it as a string would be difficult. Need to pass it a JSON itself."}],"answers":[{"comments":[{"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"score":0,"creation_date":1684132725,"post_id":76249685,"comment_id":134466182,"body_markdown":"Thank you for the input, But I need to add 10 to 15 key-value pairs like this. So using backslash and double quotes all the time would be difficult for us. That&#39;s why I was looking for a better way to store.","body":"Thank you for the input, But I need to add 10 to 15 key-value pairs like this. So using backslash and double quotes all the time would be difficult for us. That&#39;s why I was looking for a better way to store."},{"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"score":0,"creation_date":1684217724,"post_id":76249685,"comment_id":134481060,"body_markdown":"Hi, I tried your edited version, I am getting the same problem. It&#39;s taking it as NULL. No value is getting passed into the database. Can you please share your full code?","body":"Hi, I tried your edited version, I am getting the same problem. It&#39;s taking it as NULL. No value is getting passed into the database. Can you please share your full code?"}],"tags":[],"owner":{"account_id":16909157,"reputation":163,"user_id":12228688,"display_name":"Skerdi Velo"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354437,"creation_date":1684098461,"answer_id":76249685,"question_id":76249529,"body_markdown":"to pass a JSON value while storing data in GraphQL I tried to use the JSON scalar type that you have already defined in your schema. To pass a JSON value, you can simply provide a valid JSON string as the value for the attributes field in your mutation.\r\nI tried your code and this works for me:\r\n\r\n    import { gql } from &#39;@apollo/client&#39;;\r\n    \r\n    const CREATE_PRODUCT_MUTATION = gql`\r\n      mutation CreateProduct($productRequest: ProductInput!) {\r\n        createProduct(ProductRequest: $productRequest) {\r\n          id\r\n          name\r\n          attributes\r\n        }\r\n      }\r\n    `;\r\n    \r\n    const productRequest = {\r\n      id: 1,\r\n      name: &quot;ABC&quot;,\r\n      attributes: {\r\n        Key1: &quot;Value1&quot;,\r\n        Key2: &quot;Value2&quot;,\r\n        Key3: &quot;Value3&quot;\r\n      }\r\n    };\r\n    \r\n    client.mutate({\r\n      mutation: CREATE_PRODUCT_MUTATION,\r\n      variables: {\r\n        productRequest: productRequest\r\n      }\r\n    }).then(result =&gt; {\r\n      console.log(result.data.createProduct);\r\n    }).catch(error =&gt; {\r\n      console.error(error);\r\n    });\r\n\r\n\r\n\r\nIn this piece of code , I&#39;m passing a JSON string as the value for the attributes field. Which should fix your problem.\r\n","title":"How to pass JSON value from GraphQL to back-end?","body":"<p>to pass a JSON value while storing data in GraphQL I tried to use the JSON scalar type that you have already defined in your schema. To pass a JSON value, you can simply provide a valid JSON string as the value for the attributes field in your mutation.\nI tried your code and this works for me:</p>\n<pre><code>import { gql } from '@apollo/client';\n\nconst CREATE_PRODUCT_MUTATION = gql`\n  mutation CreateProduct($productRequest: ProductInput!) {\n    createProduct(ProductRequest: $productRequest) {\n      id\n      name\n      attributes\n    }\n  }\n`;\n\nconst productRequest = {\n  id: 1,\n  name: &quot;ABC&quot;,\n  attributes: {\n    Key1: &quot;Value1&quot;,\n    Key2: &quot;Value2&quot;,\n    Key3: &quot;Value3&quot;\n  }\n};\n\nclient.mutate({\n  mutation: CREATE_PRODUCT_MUTATION,\n  variables: {\n    productRequest: productRequest\n  }\n}).then(result =&gt; {\n  console.log(result.data.createProduct);\n}).catch(error =&gt; {\n  console.error(error);\n});\n</code></pre>\n<p>In this piece of code , I'm passing a JSON string as the value for the attributes field. Which should fix your problem.</p>\n"}],"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":763,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684354437,"creation_date":1684095824,"question_id":76249529,"body_markdown":"Using the Extended graphQL scalars we can display the &quot;`Map&lt;String, String&gt;`&quot; value as JSON with the help of JSON Scalar. But how to pass JSON value while storing the Data?\r\n\r\nThe schema :\r\n\r\n```\r\nType Mutation{\r\n               createProduct(ProductRequest: ProductInput) : Product\r\n             }\r\n\r\ninput ProductInput{\r\n\tid : Int\r\n\tname: String\r\n\tattributes: JSON\r\n}\r\n```\r\n\r\nThe Query :\r\n\r\n```\r\nmutation {\r\n  createProduct(ProductRequest: {\r\n        id:1,\r\n        name:&quot;ABC&quot;\r\n  attributes:{\r\n    Key: &quot;Value&quot;\r\n  }\r\n  })\r\n  {\r\n    id\r\n    name\r\n    attributes\r\n  }\r\n}\r\n\r\n```\r\n\r\nIf I pass like this, for &quot;Attributes&quot; it&#39;s taking as null. So nothing is getting stored in database. If anybody knows to pass JSON value in graphQL, please let me know. \r\n\r\nI tried passing the data using &quot;PostMapping&quot; and it worked! But I need to pass from GraphQL.","title":"How to pass JSON value from GraphQL to back-end?","body":"<p>Using the Extended graphQL scalars we can display the &quot;<code>Map&lt;String, String&gt;</code>&quot; value as JSON with the help of JSON Scalar. But how to pass JSON value while storing the Data?</p>\n<p>The schema :</p>\n<pre><code>Type Mutation{\n               createProduct(ProductRequest: ProductInput) : Product\n             }\n\ninput ProductInput{\n    id : Int\n    name: String\n    attributes: JSON\n}\n</code></pre>\n<p>The Query :</p>\n<pre><code>mutation {\n  createProduct(ProductRequest: {\n        id:1,\n        name:&quot;ABC&quot;\n  attributes:{\n    Key: &quot;Value&quot;\n  }\n  })\n  {\n    id\n    name\n    attributes\n  }\n}\n\n</code></pre>\n<p>If I pass like this, for &quot;Attributes&quot; it's taking as null. So nothing is getting stored in database. If anybody knows to pass JSON value in graphQL, please let me know.</p>\n<p>I tried passing the data using &quot;PostMapping&quot; and it worked! But I need to pass from GraphQL.</p>\n"},{"tags":["java","testing","mockito"],"comments":[{"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"score":0,"creation_date":1684343925,"post_id":76274587,"comment_id":134505917,"body_markdown":"Just a typo, I edited it","body":"Just a typo, I edited it"},{"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"score":0,"creation_date":1684344060,"post_id":76274587,"comment_id":134505944,"body_markdown":"please add how you create the mock service and the class of it","body":"please add how you create the mock service and the class of it"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1684347402,"post_id":76274587,"comment_id":134506645,"body_markdown":"Could it be possible that Mockito just wants to tell zou the mocked call was never used during the test, so you may have mocked the wrong method/parameter?","body":"Could it be possible that Mockito just wants to tell zou the mocked call was never used during the test, so you may have mocked the wrong method/parameter?"}],"answers":[{"comments":[{"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"score":0,"creation_date":1684344319,"post_id":76274672,"comment_id":134505997,"body_markdown":"This is not working, I already tried that","body":"This is not working, I already tried that"}],"tags":[],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344020,"creation_date":1684344020,"answer_id":76274672,"question_id":76274587,"body_markdown":"you can use use Mockito argument matchers eq() method like below,\r\n\r\nimport the org.mockito.ArgumentMatchers \r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(eq(&quot;parameter1&quot;))).thenReturn(1);\r\n    }\r\n    \r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(eq(&quot;parameter2&quot;))).thenReturn(2);\r\n    }","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>you can use use Mockito argument matchers eq() method like below,</p>\n<p>import the org.mockito.ArgumentMatchers</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(eq(&quot;parameter1&quot;))).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(eq(&quot;parameter2&quot;))).thenReturn(2);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":1,"creation_date":1684353961,"post_id":76275747,"comment_id":134507956,"body_markdown":"&quot;You cannot use a mock with literal arguments.&quot; - this is incorrect. [For example](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#10).","body":"&quot;You cannot use a mock with literal arguments.&quot; - this is incorrect. <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#10\" rel=\"nofollow noreferrer\">For example</a>."},{"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"score":0,"creation_date":1684398886,"post_id":76275747,"comment_id":134513149,"body_markdown":"@dominicoder \nAs far I know you cannot use a mock with direct values, you need to have an argument matcher, simplest case being something like `someMock.someMethod(eq(&quot;string&quot;))`.\nI might be wrong, happy to learn something new, but could you please provide a more useful link to prove your point? the link you sent is the full mockito documentation.","body":"@dominicoder  As far I know you cannot use a mock with direct values, you need to have an argument matcher, simplest case being something like <code>someMock.someMethod(eq(&quot;string&quot;))</code>. I might be wrong, happy to learn something new, but could you please provide a more useful link to prove your point? the link you sent is the full mockito documentation."},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1684438250,"post_id":76275747,"comment_id":134521493,"body_markdown":"See item #10 in the link (I don&#39;t know why the anchor link doesn&#39;t work). - `when(mock.someMethod(&quot;some arg&quot;))\n   .thenThrow(new RuntimeException())\n   .thenReturn(&quot;foo&quot;);`","body":"See item #10 in the link (I don&#39;t know why the anchor link doesn&#39;t work). - <code>when(mock.someMethod(&quot;some arg&quot;))    .thenThrow(new RuntimeException())    .thenReturn(&quot;foo&quot;);</code>"},{"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"score":0,"creation_date":1684482761,"post_id":76275747,"comment_id":134526793,"body_markdown":"thanks for this, I will try it out and figure out how this works. it might be that it was not possible in older mockito library but it is now","body":"thanks for this, I will try it out and figure out how this works. it might be that it was not possible in older mockito library but it is now"}],"tags":[],"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684353232,"creation_date":1684353232,"answer_id":76275747,"question_id":76274587,"body_markdown":"You cannot use a mock with literal arguments.\r\nWhen you want to mock a method and act based on identified argument you need to use ArgumentCaptors\r\n\r\nTake a look at this link\r\nhttps://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation\r\n\r\nIn your case you should do something like\r\n\r\n```\r\n@Test\r\npublic void firstTest() {\r\n    ArgumentCaptor acString = ArgumentCaptor.forClass(String.class);\r\n    Mockito.when(service.getValue(acString.capture()))\r\n        .thenReturn(chooseReturn(acString.value));\r\n\r\n    // run code ...\r\n    // assert ...\r\n}\r\n\r\nprivate int chooseReturn(String arg) {\r\n    if (arg.equals(&quot;parameter1&quot;)) {\r\n        return 1;\r\n    } else if (arg.equals(&quot;parameter2&quot;)) {\r\n        return 2;\r\n    } else {\r\n        throw new InvalidArgumentException(&quot;cannot identify &quot; + arg);\r\n    }\r\n}\r\n```","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>You cannot use a mock with literal arguments.\nWhen you want to mock a method and act based on identified argument you need to use ArgumentCaptors</p>\n<p>Take a look at this link\n<a href=\"https://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation</a></p>\n<p>In your case you should do something like</p>\n<pre><code>@Test\npublic void firstTest() {\n    ArgumentCaptor acString = ArgumentCaptor.forClass(String.class);\n    Mockito.when(service.getValue(acString.capture()))\n        .thenReturn(chooseReturn(acString.value));\n\n    // run code ...\n    // assert ...\n}\n\nprivate int chooseReturn(String arg) {\n    if (arg.equals(&quot;parameter1&quot;)) {\n        return 1;\n    } else if (arg.equals(&quot;parameter2&quot;)) {\n        return 2;\n    } else {\n        throw new InvalidArgumentException(&quot;cannot identify &quot; + arg);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"score":0,"creation_date":1684391808,"post_id":76275874,"comment_id":134512026,"body_markdown":"No, I am calling the method later, I just didn&#39;t include it in my question","body":"No, I am calling the method later, I just didn&#39;t include it in my question"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1684438063,"post_id":76275874,"comment_id":134521453,"body_markdown":"Then, for completeness and clarity, please post a complete example that illustrates exactly what you&#39;re doing and exactly what error you&#39;re getting and exactly where the error is showing up.","body":"Then, for completeness and clarity, please post a complete example that illustrates exactly what you&#39;re doing and exactly what error you&#39;re getting and exactly where the error is showing up."}],"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354233,"creation_date":1684354233,"answer_id":76275874,"question_id":76274587,"body_markdown":"If your tests are literally as shown:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    }\r\n    \r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\r\n    }\r\n\r\nThen the problem is that you have mocked out a return value for a method call but done absolutely nothing that actually causes the methods to be called. So your mocking is &quot;unused&quot; and pointless.\r\n\r\nAdd to your tests to actually do something and verify behavior:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    \r\n        // Do something with service that causes `getValue` to be called with &quot;parameter1&quot;\r\n    \r\n        assertThat(service.someOtherFunctionThatReturnsSomethingBasedOnGetValue()).isEqualTo(1);\r\n    }","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>If your tests are literally as shown:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\n}\n</code></pre>\n<p>Then the problem is that you have mocked out a return value for a method call but done absolutely nothing that actually causes the methods to be called. So your mocking is &quot;unused&quot; and pointless.</p>\n<p>Add to your tests to actually do something and verify behavior:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n\n    // Do something with service that causes `getValue` to be called with &quot;parameter1&quot;\n\n    assertThat(service.someOtherFunctionThatReturnsSomethingBasedOnGetValue()).isEqualTo(1);\n}\n</code></pre>\n"}],"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1684354233,"creation_date":1684343360,"question_id":76274587,"body_markdown":"I am trying to understand how Mockito works and I have come to one issue - I have two different test cases and I want to mock the same method from service but with different parameters. When I tried to do it like that:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    }\r\n\r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\r\n    }\r\n\r\nI get an error:\r\n[MockitoHint] 1. Unused... -&gt; at path.getValue(MyTest.java:95)\r\n[MockitoHint]  ...args ok? -&gt; at path...\r\n\r\nCan someone explain to me why this is happening? When I use Mockito.anyString() as an argument this is not happening anymore...\r\n\r\nMock class:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n\r\n    public class MyTest {\r\n\r\n    @Mock\r\n    private MyService myService;\r\n    \r\n    ...\r\n    \r\n    @InjectMocks\r\n    private TestingService testingService = new TestingService();\r\n    }\r\n\r\n\r\n\r\n","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>I am trying to understand how Mockito works and I have come to one issue - I have two different test cases and I want to mock the same method from service but with different parameters. When I tried to do it like that:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\n}\n</code></pre>\n<p>I get an error:\n[MockitoHint] 1. Unused... -&gt; at path.getValue(MyTest.java:95)\n[MockitoHint]  ...args ok? -&gt; at path...</p>\n<p>Can someone explain to me why this is happening? When I use Mockito.anyString() as an argument this is not happening anymore...</p>\n<p>Mock class:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\n\npublic class MyTest {\n\n@Mock\nprivate MyService myService;\n\n...\n\n@InjectMocks\nprivate TestingService testingService = new TestingService();\n}\n</code></pre>\n"},{"tags":["java","multithreading","executorservice","thread-sleep","forkjoinpool"],"comments":[{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1642537807,"post_id":70761704,"comment_id":125096218,"body_markdown":"What version of Java? It&#39;s like you expect fibers to be implemented?","body":"What version of Java? It&#39;s like you expect fibers to be implemented?"},{"owner":{"account_id":13639787,"reputation":3,"user_id":9840022,"display_name":"Sunny Bhan"},"score":0,"creation_date":1642538332,"post_id":70761704,"comment_id":125096373,"body_markdown":"Hi Nathan, Its Java 15. I expected threads in ForkJoinPool to switch to non blocking task when their current assigned task does some IO. As per Project Loom , ForkJoinPool will be used for Fibers so was expecting it to behave that way. https://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html","body":"Hi Nathan, Its Java 15. I expected threads in ForkJoinPool to switch to non blocking task when their current assigned task does some IO. As per Project Loom , ForkJoinPool will be used for Fibers so was expecting it to behave that way. <a href=\"https://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html\" rel=\"nofollow noreferrer\">cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642537888,"creation_date":1642537888,"answer_id":70762022,"question_id":70761704,"body_markdown":"&gt; If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using Thread.sleep(10000)) , it should pick up another task which is not causing blocking IO.\r\n\r\nThis is not how threads behave.  A thread represents an inflight execution.  It can&#39;t arbitrarily jump to another `Runnable`.  The thread has no way of knowing whether the thread is blocking for I/O or performing intense calculations, _unless_ the threading engine AND the particular I/O is desgined for this (e.g. jdbc vs. r2dbc).\r\n\r\nIn other words if you use Reactor/Spring Reactive/some other reactive programming framework with a traditional blocking I/O, like JDBC, your threads will still hang up waiting for I/O.\r\n\r\nBlocking I/O is often implemented as a loop while polling a socket, there is no way for anything outside the particular I/O to know that this is in fact blocking I/O.\r\n\r\nTo my knowledge the ```ForkJoinPool``` is not reactive, it hands Runnables to threads, that&#39;s it.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<blockquote>\n<p>If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using Thread.sleep(10000)) , it should pick up another task which is not causing blocking IO.</p>\n</blockquote>\n<p>This is not how threads behave.  A thread represents an inflight execution.  It can't arbitrarily jump to another <code>Runnable</code>.  The thread has no way of knowing whether the thread is blocking for I/O or performing intense calculations, <em>unless</em> the threading engine AND the particular I/O is desgined for this (e.g. jdbc vs. r2dbc).</p>\n<p>In other words if you use Reactor/Spring Reactive/some other reactive programming framework with a traditional blocking I/O, like JDBC, your threads will still hang up waiting for I/O.</p>\n<p>Blocking I/O is often implemented as a loop while polling a socket, there is no way for anything outside the particular I/O to know that this is in fact blocking I/O.</p>\n<p>To my knowledge the <code>ForkJoinPool</code> is not reactive, it hands Runnables to threads, that's it.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1642582570,"post_id":70767204,"comment_id":125106091,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/70767204/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23985085,"reputation":16,"user_id":17971986,"display_name":"Alwin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642579852,"creation_date":1642579852,"answer_id":70767204,"question_id":70761704,"body_markdown":"ForkJoinPool is used only as a scheduler as mentioned in the Loom Proposal. Only Virtual Threads have the ability to relinquish the blocking task and switch to another task. Based on what I remember from reading a mail in the loom mailing list,  the loom team is currently not planning to redesign java.util.concurrent&#39;s ForkJoinPool to use Virtual Threads.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>ForkJoinPool is used only as a scheduler as mentioned in the Loom Proposal. Only Virtual Threads have the ability to relinquish the blocking task and switch to another task. Based on what I remember from reading a mail in the loom mailing list,  the loom team is currently not planning to redesign java.util.concurrent's ForkJoinPool to use Virtual Threads.</p>\n"},{"tags":[],"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354161,"creation_date":1684354161,"answer_id":76275864,"question_id":70761704,"body_markdown":"The `ForkJoinPool` cannot arbitrarily detect situations where it should start other tasks to maintain the parallelism and where not.\r\n\r\nSo are work item that is waiting for something has to explicitly tell the `ForkJoinPool` that it should start other tasks to maintain the parallelism.\r\n\r\nTo achieve this you have to use `ForkJoinPool#managedBlock` or any API that uses it underneath.\r\n\r\nIf you for example use `CompletableFuture#join` or `CompletableFuture#get`, then these methods under the hood use `ForkJoinPool#managedBlock` and thus would allow the `ForkJoinPool` to start other tasks to maintain intended parallelism.\r\n\r\nA simple `Thread.sleep` is not working for this.\r\n\r\nIf you replace in your example the `Thread.sleep(10000);` by `CompletableFuture.runAsync(() -&gt; { try { Thread.sleep(10000); } catch (Exception e) {}; }).join();`, then you get exactly the behavior you intended.\r\n\r\n","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>The <code>ForkJoinPool</code> cannot arbitrarily detect situations where it should start other tasks to maintain the parallelism and where not.</p>\n<p>So are work item that is waiting for something has to explicitly tell the <code>ForkJoinPool</code> that it should start other tasks to maintain the parallelism.</p>\n<p>To achieve this you have to use <code>ForkJoinPool#managedBlock</code> or any API that uses it underneath.</p>\n<p>If you for example use <code>CompletableFuture#join</code> or <code>CompletableFuture#get</code>, then these methods under the hood use <code>ForkJoinPool#managedBlock</code> and thus would allow the <code>ForkJoinPool</code> to start other tasks to maintain intended parallelism.</p>\n<p>A simple <code>Thread.sleep</code> is not working for this.</p>\n<p>If you replace in your example the <code>Thread.sleep(10000);</code> by <code>CompletableFuture.runAsync(() -&gt; { try { Thread.sleep(10000); } catch (Exception e) {}; }).join();</code>, then you get exactly the behavior you intended.</p>\n"}],"owner":{"account_id":13639787,"reputation":3,"user_id":9840022,"display_name":"Sunny Bhan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70767204,"answer_count":3,"score":0,"last_activity_date":1684354161,"creation_date":1642536001,"question_id":70761704,"body_markdown":"If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using ```Thread.sleep(10000)```) , it should pick up another task which is not causing blocking IO.\r\nHowever, running below code with parallelism of 1 or 2 with ForkJoinPool the results don&#39;t match it. The Thread doesn&#39;t relinquish the blocking task(i.e task 1 and task2 ) and moves to non blocking ( task 3 ). \r\nIn case of pool size =1 , all tasks execute in sequence whereas I expected Task 3 to complete first as it was non blocking in both cases ( pool size=1 or 2)\r\n\r\nWhat is the actual behaviour of Threads in ForkJoinPool in case of blocking IO ?\r\n\r\n    \tForkJoinPool pool = new  ForkJoinPool(1);\r\n    \t\r\n    \tList&lt;Future&lt;String&gt;&gt; tasks = new ArrayList&lt;Future&lt;String&gt;&gt;();\r\n    \t\r\n\r\n        //Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  {  Thread.sleep(10000); System.out.println(&quot;Task 1 woke up&quot;+ Thread.currentThread().isDaemon()); return &quot;task1&quot;; }));\r\n    \t//Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  { Thread.sleep(10000); System.out.println(&quot;Task 2 woke up&quot;+Thread.currentThread().isDaemon()); return &quot;task2&quot;; }));\r\n    \t//Non Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  {  System.out.println(&quot;Task 3 Runs&quot;+Thread.currentThread().isDaemon()); return &quot;task3&quot;; }));\r\n    \t\r\n    \r\n    \t\r\n    \tint i=0;\r\n    \tSystem.out.println(&quot;pool size = &quot; + pool.getParallelism() + &quot;Thread count=&quot; +pool.getPoolSize() + &quot;Stealing =&quot; + pool.getStealCount());\r\n    \tSystem.out.println(&quot;waiting&quot;);\r\n    \t\r\n    \tString str1 = tasks.get(0).get();\r\n    \tString str2 = tasks.get(1).get();\r\n    \tString str3 = tasks.get(2).get();\r\n    \t\r\n    \tSystem.out.println(&quot;Results = &quot; +  str1+ str2 +str3);\r\n    \t\r\n    \tSystem.out.println(&quot;done&quot;);\r\n    \r\nResults :  \r\n\r\n&gt;//Pool size = 2    \r\n&gt;Task 2 woke uptrue  \r\n&gt;Task 1 woke uptrue  \r\n&gt;Task 3 Runstrue  \r\n\r\n&gt;//Pool size = 1   \r\n&gt;Task 1 woke uptrue  \r\n&gt;Task 2 woke uptrue  \r\n&gt;Task 3 Runstrue  \r\n\r\nAnother observation:  \r\nWhen we submit Task 3( non blocking ) first then only it is invoked first.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using <code>Thread.sleep(10000)</code>) , it should pick up another task which is not causing blocking IO.\nHowever, running below code with parallelism of 1 or 2 with ForkJoinPool the results don't match it. The Thread doesn't relinquish the blocking task(i.e task 1 and task2 ) and moves to non blocking ( task 3 ).\nIn case of pool size =1 , all tasks execute in sequence whereas I expected Task 3 to complete first as it was non blocking in both cases ( pool size=1 or 2)</p>\n<p>What is the actual behaviour of Threads in ForkJoinPool in case of blocking IO ?</p>\n<pre><code>    ForkJoinPool pool = new  ForkJoinPool(1);\n    \n    List&lt;Future&lt;String&gt;&gt; tasks = new ArrayList&lt;Future&lt;String&gt;&gt;();\n    \n\n    //Blocking\n    tasks.add(pool.submit(() -&gt;  {  Thread.sleep(10000); System.out.println(&quot;Task 1 woke up&quot;+ Thread.currentThread().isDaemon()); return &quot;task1&quot;; }));\n    //Blocking\n    tasks.add(pool.submit(() -&gt;  { Thread.sleep(10000); System.out.println(&quot;Task 2 woke up&quot;+Thread.currentThread().isDaemon()); return &quot;task2&quot;; }));\n    //Non Blocking\n    tasks.add(pool.submit(() -&gt;  {  System.out.println(&quot;Task 3 Runs&quot;+Thread.currentThread().isDaemon()); return &quot;task3&quot;; }));\n    \n\n    \n    int i=0;\n    System.out.println(&quot;pool size = &quot; + pool.getParallelism() + &quot;Thread count=&quot; +pool.getPoolSize() + &quot;Stealing =&quot; + pool.getStealCount());\n    System.out.println(&quot;waiting&quot;);\n    \n    String str1 = tasks.get(0).get();\n    String str2 = tasks.get(1).get();\n    String str3 = tasks.get(2).get();\n    \n    System.out.println(&quot;Results = &quot; +  str1+ str2 +str3);\n    \n    System.out.println(&quot;done&quot;);\n</code></pre>\n<p>Results :</p>\n<blockquote>\n<p>//Pool size = 2<br />\nTask 2 woke uptrue<br />\nTask 1 woke uptrue<br />\nTask 3 Runstrue</p>\n</blockquote>\n<blockquote>\n<p>//Pool size = 1<br />\nTask 1 woke uptrue<br />\nTask 2 woke uptrue<br />\nTask 3 Runstrue</p>\n</blockquote>\n<p>Another observation:<br />\nWhen we submit Task 3( non blocking ) first then only it is invoked first.</p>\n"},{"tags":["java","bitmap","unsigned","bitboard"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":2,"creation_date":1684351626,"post_id":76275571,"comment_id":134507522,"body_markdown":"You can use Java type `long`, which is 64 bits wide.  That it is a signed integer type would be an issue in C or C++, but it should not present a problem in Java.  For example, `1L &lt;&lt; 63` is well-defined in Java.","body":"You can use Java type <code>long</code>, which is 64 bits wide.  That it is a signed integer type would be an issue in C or C++, but it should not present a problem in Java.  For example, <code>1L &lt;&lt; 63</code> is well-defined in Java."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1684351982,"post_id":76275571,"comment_id":134507586,"body_markdown":"Side note: there is one unsigned primitive type in Java: `char` is a 16-bit unsigned integer.  Not that I think that helps you.","body":"Side note: there is one unsigned primitive type in Java: <code>char</code> is a 16-bit unsigned integer.  Not that I think that helps you."},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":2,"creation_date":1684352257,"post_id":76275571,"comment_id":134507642,"body_markdown":"There are also classes like [`BitSet`](https://docs.oracle.com/javase/8/docs/api/java/util/BitSet.html) that can help when your goal is to have an easier time. If you want to keep memory space to a minimum it&#39;s probably better to go with sometimes slightly awkward bit operations. E.g. keep in mind that java automatically widens `0xFF` to a full 32bit int","body":"There are also classes like <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> that can help when your goal is to have an easier time. If you want to keep memory space to a minimum it&#39;s probably better to go with sometimes slightly awkward bit operations. E.g. keep in mind that java automatically widens <code>0xFF</code> to a full 32bit int"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1684352403,"post_id":76275571,"comment_id":134507667,"body_markdown":"Are you actually doing bit operations? Otherwise you should use objects that better represent the domain of the problem. You have more tools for that in Java than in C, like objects, enums.","body":"Are you actually doing bit operations? Otherwise you should use objects that better represent the domain of the problem. You have more tools for that in Java than in C, like objects, enums."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1684352797,"post_id":76275571,"comment_id":134507742,"body_markdown":"Like @aled suggests… Enums in Java are much more powerful and flexible than seen in most other languages. An enum in Java can have state (member fields), constructors, and methods. So each enum object per square can store its color, and store what piece rests on it, if you so choose. And `EnumSet` &amp; `EnumMap` can very efficiently store a collection of enum objects.","body":"Like @aled suggests… Enums in Java are much more powerful and flexible than seen in most other languages. An enum in Java can have state (member fields), constructors, and methods. So each enum object per square can store its color, and store what piece rests on it, if you so choose. And <code>EnumSet</code> &amp; <code>EnumMap</code> can very efficiently store a collection of enum objects."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1684352862,"post_id":76275571,"comment_id":134507755,"body_markdown":"I wouldn&#39;t tend to use enums here, if only because chessboards are best expressed as grids with numeric coordinates.  There&#39;s specific advantage to be gained by sticking to numbers.","body":"I wouldn&#39;t tend to use enums here, if only because chessboards are best expressed as grids with numeric coordinates.  There&#39;s specific advantage to be gained by sticking to numbers."},{"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"score":0,"creation_date":1684359109,"post_id":76275571,"comment_id":134508890,"body_markdown":"That long is signed, is problem in Java for me, because I&#39;m not able to handle with the last bit properly, or at least I personely don&#39;t know how to manage it.","body":"That long is signed, is problem in Java for me, because I&#39;m not able to handle with the last bit properly, or at least I personely don&#39;t know how to manage it."},{"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"score":0,"creation_date":1684359182,"post_id":76275571,"comment_id":134508899,"body_markdown":"I am doing bit operations, that&#39;s the point why to use bitboards, there is a far faster moves generator and so on.","body":"I am doing bit operations, that&#39;s the point why to use bitboards, there is a far faster moves generator and so on."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1684361521,"post_id":76275571,"comment_id":134509231,"body_markdown":"The last bit works exactly like all the other bits, you just have to use `&gt;&gt;&gt;` instead of `&gt;&gt;`.","body":"The last bit works exactly like all the other bits, you just have to use <code>&gt;&gt;&gt;</code> instead of <code>&gt;&gt;</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1684370742,"post_id":76275571,"comment_id":134510222,"body_markdown":"Off-topic:  Although Java doesn&#39;t  have an `unsigned` type, it does have some support. Check out the methods in the [Long API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html) .  There is a brief [bitwise operators tutorial](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html) .","body":"Off-topic:  Although Java doesn&#39;t  have an <code>unsigned</code> type, it does have some support. Check out the methods in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html\" rel=\"nofollow noreferrer\">Long API</a> .  There is a brief <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"nofollow noreferrer\">bitwise operators tutorial</a> ."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684352942,"creation_date":1684352942,"answer_id":76275719,"question_id":76275571,"body_markdown":"Signedness doesn&#39;t actually make a significant difference to using numbers as bit masks -- at least, not in Java.\r\n\r\nYou can use a `long` just fine, even though it is signed.  `1L &lt;&lt; 63` works.  Just note that you will want to use `&gt;&gt;&gt;` instead of `&gt;&gt;` to when shifting your mask right.\r\n\r\nNote that if you want to store _more_ than 64 bits, you may wish to use `java.util.BitSet`, which is designed specifically as a bitmap that scales as necessary.","title":"Bitmaps/bitboards in Java","body":"<p>Signedness doesn't actually make a significant difference to using numbers as bit masks -- at least, not in Java.</p>\n<p>You can use a <code>long</code> just fine, even though it is signed.  <code>1L &lt;&lt; 63</code> works.  Just note that you will want to use <code>&gt;&gt;&gt;</code> instead of <code>&gt;&gt;</code> to when shifting your mask right.</p>\n<p>Note that if you want to store <em>more</em> than 64 bits, you may wish to use <code>java.util.BitSet</code>, which is designed specifically as a bitmap that scales as necessary.</p>\n"}],"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684352942,"creation_date":1684351494,"question_id":76275571,"body_markdown":"I&#39;m programming a chess engine in Java and I would like to represent all pieces positions in one variable called bitmap or bitboard. In C++ I would simply use unsigned long, or so-called uint64_t. But because there are no unsigned variables in Java (as far as I know), what is some efficient way, how to implement this method?\r\n\r\nI tried everything I was able to think of","title":"Bitmaps/bitboards in Java","body":"<p>I'm programming a chess engine in Java and I would like to represent all pieces positions in one variable called bitmap or bitboard. In C++ I would simply use unsigned long, or so-called uint64_t. But because there are no unsigned variables in Java (as far as I know), what is some efficient way, how to implement this method?</p>\n<p>I tried everything I was able to think of</p>\n"},{"tags":["java","sap-cloud-foundry"],"comments":[{"owner":{"account_id":2299521,"reputation":619,"user_id":2020124,"display_name":"Apache"},"score":0,"creation_date":1579203074,"post_id":59776499,"comment_id":105697224,"body_markdown":"Hi, welcome to Stack Overflow. Please see this example of [how to create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Hi, welcome to Stack Overflow. Please see this example of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">how to create a Minimal, Reproducible Example</a>"}],"answers":[{"tags":[],"owner":{"account_id":2904628,"reputation":6707,"user_id":2490343,"accept_rate":100,"display_name":"Shiva"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579588553,"creation_date":1579588553,"answer_id":59835417,"question_id":59776499,"body_markdown":"There are a few ways in which you can pass `Environment Variables` in a cloud foundry \r\n\r\n 1. Using the set-env variable command using cf commandline: The general syntax is `cf set-env APP_NAME ENV_VAR_NAME ENV_VAR_VALUE`\r\n 2. Using Manifest file: If you are using manifest file with `cf push` you can set the environamet valriables in it like so. Official documenttaion can be found [here][1]\r\n\r\n    `env:\r\n        ENV_VARIABLE1: value1\r\n        ENV_VARIABLE1: value2`\r\n\r\n 3. Using mtar descriptor: This might be specific to SAP Cloud Foundry, if you are using SAP Cloud platrom and are deploying applications as `mtar`, in the mtar deployment descriptor, you can set the `PROPERTIES` field in under the deployment section to add additional env varables. Additional documentation can be found [here][2]. e.g.\r\n\r\n\r\n    `properties:\r\n          POPULATE_ALBUM_REPOSITORY: true`\r\n\r\n\r\n  [1]: https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html#env-block\r\n  [2]: https://github.com/cloudfoundry-incubator/multiapps-controller/wiki/Deployment-Descriptor","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>There are a few ways in which you can pass <code>Environment Variables</code> in a cloud foundry </p>\n\n<ol>\n<li>Using the set-env variable command using cf commandline: The general syntax is <code>cf set-env APP_NAME ENV_VAR_NAME ENV_VAR_VALUE</code></li>\n<li><p>Using Manifest file: If you are using manifest file with <code>cf push</code> you can set the environamet valriables in it like so. Official documenttaion can be found <a href=\"https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html#env-block\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><code>env:\n    ENV_VARIABLE1: value1\n    ENV_VARIABLE1: value2</code></p></li>\n<li><p>Using mtar descriptor: This might be specific to SAP Cloud Foundry, if you are using SAP Cloud platrom and are deploying applications as <code>mtar</code>, in the mtar deployment descriptor, you can set the <code>PROPERTIES</code> field in under the deployment section to add additional env varables. Additional documentation can be found <a href=\"https://github.com/cloudfoundry-incubator/multiapps-controller/wiki/Deployment-Descriptor\" rel=\"nofollow noreferrer\">here</a>. e.g.</p>\n\n<p><code>properties:\n      POPULATE_ALBUM_REPOSITORY: true</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":575816,"reputation":21,"user_id":229797,"display_name":"Mike Mountrakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684352557,"creation_date":1684352557,"answer_id":76275673,"question_id":59776499,"body_markdown":"Adding to the answer above you can use also:\r\n```\r\ncf set-env myapplication env1=val1 env2=val2 env3=val3 ...\r\n```\r\nwhere `...` is another set of `env=val` to set more than one variable in the same line\r\n\r\nFor large JSON variables you can use:\r\n```\r\nexport MYVAR=`cat mylarge.json`\r\ncf set-env myapplication MIKEVAR &quot;$MYVAR&quot;\r\n```\r\n\r\nFinally, in order to rewrite the entire configuration you can use the following example:\r\n\r\n```\r\ncf curl -X PUT /v2/apps/&lt;app-guid&gt; -d &#39;{&quot;environment_json&quot;:{&quot;ENV1&quot;:&quot;VAL1&quot;, &quot;ENV2&quot;: &quot;VAL2&quot;}}&#39;\r\n```\r\nThat overwrites everything and replaces it with what is in the JSON, so if you have existing env variables you&#39;d have to include those as well as the new ones you want to set.","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>Adding to the answer above you can use also:</p>\n<pre><code>cf set-env myapplication env1=val1 env2=val2 env3=val3 ...\n</code></pre>\n<p>where <code>...</code> is another set of <code>env=val</code> to set more than one variable in the same line</p>\n<p>For large JSON variables you can use:</p>\n<pre><code>export MYVAR=`cat mylarge.json`\ncf set-env myapplication MIKEVAR &quot;$MYVAR&quot;\n</code></pre>\n<p>Finally, in order to rewrite the entire configuration you can use the following example:</p>\n<pre><code>cf curl -X PUT /v2/apps/&lt;app-guid&gt; -d '{&quot;environment_json&quot;:{&quot;ENV1&quot;:&quot;VAL1&quot;, &quot;ENV2&quot;: &quot;VAL2&quot;}}'\n</code></pre>\n<p>That overwrites everything and replaces it with what is in the JSON, so if you have existing env variables you'd have to include those as well as the new ones you want to set.</p>\n"}],"owner":{"account_id":17545520,"reputation":1,"user_id":12726900,"display_name":"Nikita"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684352557,"creation_date":1579202667,"question_id":59776499,"body_markdown":"I have a java application. Which needs json object to start the app. In my local environment I pass this through VM options but not able to figure out this in cloud foundry. \r\n\r\nI tried passing in .profile file but it did not work. In this file I provide export variablename=&quot;{jsonObject}&quot; \r\n\r\nAny help will be appreciated.\r\n\r\nThank you","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>I have a java application. Which needs json object to start the app. In my local environment I pass this through VM options but not able to figure out this in cloud foundry. </p>\n\n<p>I tried passing in .profile file but it did not work. In this file I provide export variablename=\"{jsonObject}\" </p>\n\n<p>Any help will be appreciated.</p>\n\n<p>Thank you</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1684317246,"post_id":76270769,"comment_id":134499560,"body_markdown":"Please note that SO is an english-only site. Also there are too many infos missing. You said that your code doesn&#39;t do what it should. *What* should it do? Where is your code? What is expected and what is actually happening?","body":"Please note that SO is an english-only site. Also there are too many infos missing. You said that your code doesn&#39;t do what it should. <i>What</i> should it do? Where is your code? What is expected and what is actually happening?"},{"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"score":0,"creation_date":1684317729,"post_id":76270769,"comment_id":134499664,"body_markdown":"Sorry first time here","body":"Sorry first time here"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684320376,"post_id":76270769,"comment_id":134500219,"body_markdown":"*&quot;... for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;* - Tell us explicitly what output you are expecting and what output you are getting.   And the inputs ...","body":"<i>&quot;... for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;</i> - Tell us explicitly what output you are expecting and what output you are getting.   And the inputs ..."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1684321551,"post_id":76270769,"comment_id":134500482,"body_markdown":"Which Easter?  In the Western world, Easter in 2023 was April 9th.  In the Orthodox world, April 16th.","body":"Which Easter?  In the Western world, Easter in 2023 was April 9th.  In the Orthodox world, April 16th."},{"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"score":0,"creation_date":1684322410,"post_id":76270769,"comment_id":134500643,"body_markdown":"The easter sunday of the Western world. I`m in europe.","body":"The easter sunday of the Western world. I`m in europe."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684327062,"post_id":76270769,"comment_id":134501661,"body_markdown":"I know that Easter can occur between March 22 and April 25 inclusive.  But its date is determined by the first full moon of Spring.  Your code may well be computing that but using single letters for values does not really explain what you&#39;re doing.  I presume you will fully document your code but you should also use meaningful variable names.","body":"I know that Easter can occur between March 22 and April 25 inclusive.  But its date is determined by the first full moon of Spring.  Your code may well be computing that but using single letters for values does not really explain what you&#39;re doing.  I presume you will fully document your code but you should also use meaningful variable names."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1684331856,"post_id":76270769,"comment_id":134502919,"body_markdown":"@WJS I think at least some of the variables are taken from [this algorithm](https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm) or the ones that follow it.","body":"@WJS I think at least some of the variables are taken from <a href=\"https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm\" rel=\"nofollow noreferrer\">this algorithm</a> or the ones that follow it."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684343366,"post_id":76270769,"comment_id":134505805,"body_markdown":"@VGR Yep.  Interesting article which I may study at some point. But the OP&#39;s problem was using `isBefore` and `isAfter` to check for differences which also include the year.  The OP only wants day of year differences.","body":"@VGR Yep.  Interesting article which I may study at some point. But the OP&#39;s problem was using <code>isBefore</code> and <code>isAfter</code> to check for differences which also include the year.  The OP only wants day of year differences."}],"answers":[{"comments":[{"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"score":0,"creation_date":1684834356,"post_id":76273603,"comment_id":134571460,"body_markdown":"Thanks for the help. By using the comparator the code finaly works. I struggled for at least 1,5 Weeks to find a solution for my problem.","body":"Thanks for the help. By using the comparator the code finaly works. I struggled for at least 1,5 Weeks to find a solution for my problem."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684351843,"creation_date":1684336326,"answer_id":76273603,"question_id":76270769,"body_markdown":"One problem is that you are incrementing years. And using the `isBefore` and `isAfter` methods also include the year which is incorrectly reporting `min` and `max` dates for Easter. Example. `2023-04-09 isBefore 2024-03-31` from a date perspective but not from a `month/day` perspective. Note: I had to print the actual values you were comparing to see what was going on and at first it wasn&#39;t obvious to me.  *Print statements are your friend when it comes to debugging*.  So you just compare the day of the year to previous days of the year for Easter. So here is what I did.\r\n\r\n- define a comparator to compare month and day using the day of year.\r\n- initialize your `min` and `max` to the current year date for Easter.\r\n- then starting with &#39;1&#39;, increment your years.\r\n```\r\nint x = 20;\r\n\r\nint currentYear = 2023;\r\nComparator&lt;LocalDate&gt; comp = Comparator.comparing(LocalDate::getDayOfYear);\r\n\r\nLocalDate ostersonntag = berechneOstersonntag(currentYear);\r\nLocalDate sp&#228;testerOstersonntag = ostersonntag;\r\nLocalDate fr&#252;hesterOstersonntag = ostersonntag;\r\n\r\n    for (int i = 0; i &lt; x; i++) {\r\n       ostersonntag = berechneOstersonntag(currentYear + \r\n    i);\r\n\r\n        if (comp.compare(ostersonntag, sp&#228;testerOstersonntag) &gt; 0) {\r\n            sp&#228;testerOstersonntag = ostersonntag;\r\n        } else if (comp.compare(ostersonntag, fr&#252;hesterOstersonntag) &lt; 0) {\r\n            fr&#252;hesterOstersonntag = ostersonntag;\r\n        }\r\n    }\r\n\r\n    System.out.println(&quot;Spaetester Ostersonntag: &quot; + \r\n    sp&#228;testerOstersonntag);\r\n    System.out.println(&quot;Fruehester Ostersonntag: &quot; + \r\n    fr&#252;hesterOstersonntag);     \r\n}\r\n```\r\nprints\r\n```\r\nSpaetester Ostersonntag: 2038-04-25\r\nFruehester Ostersonntag: 2035-03-25\r\n```\r\nNote:  Another issue is that you and I are using different calculations to determine Easter. I used [this algorithm](https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm) posted by @VGR.  I verified the above using [Easter Dates]( https://www.census.gov/data/software/x13as/genhol/easter-dates.html#par_textimage_1067001717)","title":"Calculation of Easter Sunday with earliest and latest date","body":"<p>One problem is that you are incrementing years. And using the <code>isBefore</code> and <code>isAfter</code> methods also include the year which is incorrectly reporting <code>min</code> and <code>max</code> dates for Easter. Example. <code>2023-04-09 isBefore 2024-03-31</code> from a date perspective but not from a <code>month/day</code> perspective. Note: I had to print the actual values you were comparing to see what was going on and at first it wasn't obvious to me.  <em>Print statements are your friend when it comes to debugging</em>.  So you just compare the day of the year to previous days of the year for Easter. So here is what I did.</p>\n<ul>\n<li>define a comparator to compare month and day using the day of year.</li>\n<li>initialize your <code>min</code> and <code>max</code> to the current year date for Easter.</li>\n<li>then starting with '1', increment your years.</li>\n</ul>\n<pre><code>int x = 20;\n\nint currentYear = 2023;\nComparator&lt;LocalDate&gt; comp = Comparator.comparing(LocalDate::getDayOfYear);\n\nLocalDate ostersonntag = berechneOstersonntag(currentYear);\nLocalDate spätesterOstersonntag = ostersonntag;\nLocalDate frühesterOstersonntag = ostersonntag;\n\n    for (int i = 0; i &lt; x; i++) {\n       ostersonntag = berechneOstersonntag(currentYear + \n    i);\n\n        if (comp.compare(ostersonntag, spätesterOstersonntag) &gt; 0) {\n            spätesterOstersonntag = ostersonntag;\n        } else if (comp.compare(ostersonntag, frühesterOstersonntag) &lt; 0) {\n            frühesterOstersonntag = ostersonntag;\n        }\n    }\n\n    System.out.println(&quot;Spaetester Ostersonntag: &quot; + \n    spätesterOstersonntag);\n    System.out.println(&quot;Fruehester Ostersonntag: &quot; + \n    frühesterOstersonntag);     \n}\n</code></pre>\n<p>prints</p>\n<pre><code>Spaetester Ostersonntag: 2038-04-25\nFruehester Ostersonntag: 2035-03-25\n</code></pre>\n<p>Note:  Another issue is that you and I are using different calculations to determine Easter. I used <a href=\"https://en.wikipedia.org/wiki/Date_of_Easter#Gauss%27s_Easter_algorithm\" rel=\"nofollow noreferrer\">this algorithm</a> posted by @VGR.  I verified the above using <a href=\"https://www.census.gov/data/software/x13as/genhol/easter-dates.html#par_textimage_1067001717\" rel=\"nofollow noreferrer\">Easter Dates</a></p>\n"}],"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76273603,"answer_count":1,"score":0,"last_activity_date":1684351843,"creation_date":1684317078,"question_id":76270769,"body_markdown":"&quot;I have been assigned the task of programming a calculator in Java (C# would also work) that, based on the current year and user input, outputs the dates for the earliest and latest Easter Sunday. The program should work in such a way that the user enters a number representing the number of years to be checked in the future. The current year is 2023. The output should then display the earliest and latest dates on which Easter Sunday occurred within the specified number of years.\r\n\r\nUnfortunately, my code doesn&#39;t seem to solve it. The calculation of Easter Sundays is correct, but for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;\r\n\r\n````\r\n        import java.time.LocalDate;\r\n        import java.util.Scanner;\r\n\r\n        public class Ostersonntag3 {\r\n        public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.print(&quot;Bitte geben Sie eine Anzahl an Jahren ein: &quot;);\r\n        int x = scanner.nextInt();\r\n\r\n        LocalDate sp&#228;testerOstersonntag = LocalDate.MAX;\r\n        LocalDate fr&#252;hesterOstersonntag = LocalDate.MIN;\r\n\r\n        int currentYear = 2023;\r\n\r\n        for (int i = 0; i &lt; x; i++) {\r\n            LocalDate ostersonntag = berechneOstersonntag(currentYear + \r\n        i);\r\n\r\n            if (ostersonntag.isBefore(sp&#228;testerOstersonntag)) {\r\n            \tsp&#228;testerOstersonntag = ostersonntag;\r\n            }\r\n\r\n            if (ostersonntag.isAfter(fr&#252;hesterOstersonntag)) {\r\n            \tfr&#252;hesterOstersonntag = ostersonntag;\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;Spaetester Ostersonntag: &quot; + \r\n        sp&#228;testerOstersonntag);\r\n        System.out.println(&quot;Fruehester Ostersonntag: &quot; + \r\n        fr&#252;hesterOstersonntag);\r\n\r\n        scanner.close();\r\n        }\r\n \r\n        private static LocalDate berechneOstersonntag(int jahr) {\r\n        int a = jahr % 19;\r\n        int b = jahr % 4;\r\n        int c = jahr % 7;\r\n        int m = (8 * (jahr / 100) + 13) / 25 - 2;\r\n        int s = jahr / 100 - jahr / 400 - 2;\r\n        int n = (6 + s) % 7;\r\n        int d = (m + 19 * a) % 30;\r\n\r\n        if (d == 29) {\r\n            d = 28;\r\n        }\r\n\r\n        if (d == 28 &amp;&amp; a &gt;= 11) {\r\n            d = 27;\r\n        }\r\n\r\n        int e = (2 * b + 4 * c + 6 * d + n) % 7;\r\n\r\n        int tag = 21 + d + e + 1;\r\n        int monat;\r\n\r\n        if (tag &gt; 31) {\r\n            tag = tag % 31;\r\n            monat = 4;\r\n        } else {\r\n            monat = 3;\r\n        }\r\n\r\n        return LocalDate.of(jahr, monat, tag);\r\n        }\r\n        }\r\n````\r\n\r\nThe Input is as you can see a number (int) and the Output that i want is a date (for example 2023.04.22, etc.) the dates should represent the earliest and latest easter sunday in the amount of years the user put in. \r\nBut the Output does not seem to be giving me the correct dates:\r\n[(for example the input is 20; the output is 2023.04.16 as the latest easter sunday and 2023.04.20 is the date for the closest easter sunday)\r\n(But if the Input is 200; the output is 2023.04.16 for the latest and 2023.04.14 for the earliest easter sunday)\r\n(And if the input is 30; the output is 2023.04.16 for the latest and 2023.03.31 for the earliest easter sunday)].\r\nThis does not make sense for me like at all??","title":"Calculation of Easter Sunday with earliest and latest date","body":"<p>&quot;I have been assigned the task of programming a calculator in Java (C# would also work) that, based on the current year and user input, outputs the dates for the earliest and latest Easter Sunday. The program should work in such a way that the user enters a number representing the number of years to be checked in the future. The current year is 2023. The output should then display the earliest and latest dates on which Easter Sunday occurred within the specified number of years.</p>\n<p>Unfortunately, my code doesn't seem to solve it. The calculation of Easter Sundays is correct, but for some reason, filtering for the earliest and latest Easter Sunday doesn't seem to work.&quot;</p>\n<pre><code>        import java.time.LocalDate;\n        import java.util.Scanner;\n\n        public class Ostersonntag3 {\n        public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.print(&quot;Bitte geben Sie eine Anzahl an Jahren ein: &quot;);\n        int x = scanner.nextInt();\n\n        LocalDate spätesterOstersonntag = LocalDate.MAX;\n        LocalDate frühesterOstersonntag = LocalDate.MIN;\n\n        int currentYear = 2023;\n\n        for (int i = 0; i &lt; x; i++) {\n            LocalDate ostersonntag = berechneOstersonntag(currentYear + \n        i);\n\n            if (ostersonntag.isBefore(spätesterOstersonntag)) {\n                spätesterOstersonntag = ostersonntag;\n            }\n\n            if (ostersonntag.isAfter(frühesterOstersonntag)) {\n                frühesterOstersonntag = ostersonntag;\n            }\n        }\n\n        System.out.println(&quot;Spaetester Ostersonntag: &quot; + \n        spätesterOstersonntag);\n        System.out.println(&quot;Fruehester Ostersonntag: &quot; + \n        frühesterOstersonntag);\n\n        scanner.close();\n        }\n \n        private static LocalDate berechneOstersonntag(int jahr) {\n        int a = jahr % 19;\n        int b = jahr % 4;\n        int c = jahr % 7;\n        int m = (8 * (jahr / 100) + 13) / 25 - 2;\n        int s = jahr / 100 - jahr / 400 - 2;\n        int n = (6 + s) % 7;\n        int d = (m + 19 * a) % 30;\n\n        if (d == 29) {\n            d = 28;\n        }\n\n        if (d == 28 &amp;&amp; a &gt;= 11) {\n            d = 27;\n        }\n\n        int e = (2 * b + 4 * c + 6 * d + n) % 7;\n\n        int tag = 21 + d + e + 1;\n        int monat;\n\n        if (tag &gt; 31) {\n            tag = tag % 31;\n            monat = 4;\n        } else {\n            monat = 3;\n        }\n\n        return LocalDate.of(jahr, monat, tag);\n        }\n        }\n</code></pre>\n<p>The Input is as you can see a number (int) and the Output that i want is a date (for example 2023.04.22, etc.) the dates should represent the earliest and latest easter sunday in the amount of years the user put in.\nBut the Output does not seem to be giving me the correct dates:\n[(for example the input is 20; the output is 2023.04.16 as the latest easter sunday and 2023.04.20 is the date for the closest easter sunday)\n(But if the Input is 200; the output is 2023.04.16 for the latest and 2023.04.14 for the earliest easter sunday)\n(And if the input is 30; the output is 2023.04.16 for the latest and 2023.03.31 for the earliest easter sunday)].\nThis does not make sense for me like at all??</p>\n"},{"tags":["java","validation"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1684365351,"post_id":76275480,"comment_id":134509712,"body_markdown":"I don&#39;t really understand what you&#39;re asking, but can&#39;t you just add a `boolean allowNull` attribute to the validation annotation and implement it? Or perhaps make optional fields `Optional&lt;String&gt;`, which also requires implementation, but more strongly telegraphs that it is optional (I have done this and it worked very well).","body":"I don&#39;t really understand what you&#39;re asking, but can&#39;t you just add a <code>boolean allowNull</code> attribute to the validation annotation and implement it? Or perhaps make optional fields <code>Optional&lt;String&gt;</code>, which also requires implementation, but more strongly telegraphs that it is optional (I have done this and it worked very well)."}],"owner":{"account_id":17814639,"reputation":63,"user_id":12938483,"display_name":"PoCiTo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684350669,"creation_date":1684350669,"question_id":76275480,"body_markdown":"I have some fields which I want to be validated only for certain validation groups. Also I want these field to be optional, meaning that they can contain null, but otherwise they should have valid value.\r\n\r\nexample:\r\n\r\n```\r\nclass Test{\r\n    @CustomValidation1\r\n    private String alwaysValidatedField;\r\n\r\n    @CustomValidation2(groups = A.class)\r\n    private String mandatoryFieldForGroupA;\r\n    \r\n    @CustomValidation2(groups = {B.class, C.class})\r\n    private String optionalFieldForGroupB_C;\r\n    \r\n    interface A{}\r\n    interface B{}\r\n    interface C{}\r\n}\r\n```\r\n\r\nIs there any way other than creating additional custom validations that do the same but allows null values? ","title":"Java bean validation with optional fields and groups","body":"<p>I have some fields which I want to be validated only for certain validation groups. Also I want these field to be optional, meaning that they can contain null, but otherwise they should have valid value.</p>\n<p>example:</p>\n<pre><code>class Test{\n    @CustomValidation1\n    private String alwaysValidatedField;\n\n    @CustomValidation2(groups = A.class)\n    private String mandatoryFieldForGroupA;\n    \n    @CustomValidation2(groups = {B.class, C.class})\n    private String optionalFieldForGroupB_C;\n    \n    interface A{}\n    interface B{}\n    interface C{}\n}\n</code></pre>\n<p>Is there any way other than creating additional custom validations that do the same but allows null values?</p>\n"},{"tags":["java","jar","helidon"],"comments":[{"owner":{"account_id":59417,"reputation":7474,"user_id":177784,"accept_rate":100,"display_name":"Ashwin Prabhu"},"score":0,"creation_date":1684340905,"post_id":76274101,"comment_id":134505303,"body_markdown":"A simple google returns the following link for MODULES_SILENT_SHELL_DEBUG:\n\nhttps://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\n\nSo it looks like the value of MODULES_SILENT_SHELL_DEBUG is messing up something within Helidon which could be trying to introspect the property value looking for ${} expressions to expand.","body":"A simple google returns the following link for MODULES_SILENT_SHELL_DEBUG:  <a href=\"https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\" rel=\"nofollow noreferrer\">modules.readthedocs.io/en/stable/&hellip;</a>  So it looks like the value of MODULES_SILENT_SHELL_DEBUG is messing up something within Helidon which could be trying to introspect the property value looking for ${} expressions to expand."}],"answers":[{"tags":[],"owner":{"account_id":59417,"reputation":7474,"user_id":177784,"accept_rate":100,"display_name":"Ashwin Prabhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684344114,"creation_date":1684344114,"answer_id":76274685,"question_id":76274101,"body_markdown":"`MODULES_SILENT_SHELL_DEBUG` appears to be an [environment variable][1] defined to a shell script in your specific shell. If you look carefully, you will notice an expression &quot;`${IFS+x}`&quot; which matches the syntax of [token expected by Helidon][2]. This is unfortunate but it looks like you would need to unset the environment variables carrying token-like expressions: ${ref} if you want to use environment variables as a configuration source (which you are very likely to need for any K8s deployments)\r\n\r\nIf this is a VM, resetting the offending envs in the execution shell might be a workaround. If this happens within the docker image, consider using a different base image that does not contain those modules.   \r\n\r\nMeanwhile, you may try your luck by filing a bug report on Helidon config requesting Helidon to ignore token-like expressions for values derived from environment and system properties, as it is highly unlikely they are substitution tokens.\r\n\r\n\r\n  [1]: https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\r\n  [2]: https://helidon.io/docs/v3/#/se/config/advanced-configuration#filters-and-overrides","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p><code>MODULES_SILENT_SHELL_DEBUG</code> appears to be an <a href=\"https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\" rel=\"nofollow noreferrer\">environment variable</a> defined to a shell script in your specific shell. If you look carefully, you will notice an expression &quot;<code>${IFS+x}</code>&quot; which matches the syntax of <a href=\"https://helidon.io/docs/v3/#/se/config/advanced-configuration#filters-and-overrides\" rel=\"nofollow noreferrer\">token expected by Helidon</a>. This is unfortunate but it looks like you would need to unset the environment variables carrying token-like expressions: ${ref} if you want to use environment variables as a configuration source (which you are very likely to need for any K8s deployments)</p>\n<p>If this is a VM, resetting the offending envs in the execution shell might be a workaround. If this happens within the docker image, consider using a different base image that does not contain those modules.</p>\n<p>Meanwhile, you may try your luck by filing a bug report on Helidon config requesting Helidon to ignore token-like expressions for values derived from environment and system properties, as it is highly unlikely they are substitution tokens.</p>\n"},{"tags":[],"owner":{"account_id":1824964,"reputation":468,"user_id":1658022,"display_name":"Romain Grecourt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684350553,"creation_date":1684350553,"answer_id":76275464,"question_id":76274101,"body_markdown":"It seems that you have some exported shell function in your environment.\r\n\r\nYou can try to remove environment variables with names like `BASH_FUNC_`, either manually, one by one or with something like this:\r\n\r\n`unset -f $(env | cut -d &#39;=&#39; -f1 | grep BASH_FUNC_)`\r\n","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p>It seems that you have some exported shell function in your environment.</p>\n<p>You can try to remove environment variables with names like <code>BASH_FUNC_</code>, either manually, one by one or with something like this:</p>\n<p><code>unset -f $(env | cut -d '=' -f1 | grep BASH_FUNC_)</code></p>\n"}],"owner":{"account_id":28621788,"reputation":21,"user_id":21914682,"display_name":"apoorva vejarla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1684350553,"creation_date":1684339714,"question_id":76274101,"body_markdown":"I have a helidon MP java project with helidon 3.1.0 and I&#39;m facing the issue below when I&#39;m trying to run the generated jar file in oracle linux 8 machine where as same jar file works in other machines. Here are the details.\r\njava version: 17.0.6\r\nhelidon version: 3.1.0\r\nOS : Oracle linux 8\r\nThanks for your support in advance.\r\n```\r\nException in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\r\n\tat io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\r\n\tat io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\r\n\tat io.helidon.microprofile.server.Server.create(Server.java:83)\r\n\tat oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\r\nCaused by: org.jboss.weld.exceptions.DefinitionException: Exception List with 1 exceptions:\r\nException 0 :\r\njava.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\r\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = &#39;1&#39; ]; then\r\n case &quot;$-&quot; in\r\n *v*x*)\r\n set +vx;\r\n _mlshdbg=&#39;vx&#39;\r\n ;;\r\n *v*)\r\n set +v;\r\n _mlshdbg=&#39;v&#39;\r\n ;;\r\n *x*)\r\n set +x;\r\n _mlshdbg=&#39;x&#39;\r\n ;;\r\n *)\r\n _mlshdbg=&#39;&#39;\r\n ;;\r\n esac;\r\n fi;\r\n unset _mlre _mlIFS;\r\n if [ -n &quot;${IFS+x}&quot; ]; then\r\n _mlIFS=$IFS;\r\n fi;\r\n IFS=&#39; &#39;;\r\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\r\n do\r\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\r\n if [ -n &quot;`eval &#39;echo ${&#39;$_mlv&#39;+x}&#39;`&quot; ]; then\r\n _mlre=&quot;${_mlre:-}${_mlv}_modquar=&#39;`eval &#39;echo ${&#39;$_mlv&#39;}&#39;`&#39; &quot;;\r\n fi;\r\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\r\n _mlre=&quot;${_mlre:-}${_mlv}=&#39;`eval &#39;echo ${&#39;$_mlrv&#39;:-}&#39;`&#39; &quot;;\r\n fi;\r\n done;\r\n if [ -n &quot;${_mlre:-}&quot; ]; then\r\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &#39;&quot;$@&quot;&#39;`;\r\n else\r\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\r\n fi;\r\n _mlstatus=$?;\r\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\r\n IFS=$_mlIFS;\r\n else\r\n unset IFS;\r\n fi;\r\n unset _mlre _mlv _mlrv _mlIFS;\r\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\r\n set -$_mlshdbg;\r\n fi;\r\n unset _mlshdbg;\r\n return $_mlstatus\r\n} does not exist\r\n\tat io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\tat io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\r\n\tat io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\r\n\tat io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\r\n\tat io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\r\n\tat java.base/java.util.Optional.map(Optional.java:260)\r\n\tat io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\r\n\tat io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\r\n\tat io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\r\n\tat io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\r\n\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\r\n\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\r\n\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\r\n\tat org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\r\n\tat org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\r\n\tat jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\r\n\tat org.jboss.weld.util.Observers.notify(Observers.java:166)\r\n\tat org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\r\n\tat org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\r\n\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\r\n\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\r\n\tat org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\r\n\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\r\n\tat org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\r\n\tat org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\r\n\tat org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\r\n\tat io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\r\n\tat io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\r\n\tat io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\r\n\tat io.helidon.microprofile.server.Server.create(Server.java:83)\r\n\tat oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\r\n\r\n\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:46)\r\n\tat org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\r\n\tat org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\r\n\tat org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\r\n\tat io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\r\n\t... 8 more\r\n\tSuppressed: java.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\r\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = &#39;1&#39; ]; then\r\n case &quot;$-&quot; in\r\n *v*x*)\r\n set +vx;\r\n _mlshdbg=&#39;vx&#39;\r\n ;;\r\n *v*)\r\n set +v;\r\n _mlshdbg=&#39;v&#39;\r\n ;;\r\n *x*)\r\n set +x;\r\n _mlshdbg=&#39;x&#39;\r\n ;;\r\n *)\r\n _mlshdbg=&#39;&#39;\r\n ;;\r\n esac;\r\n fi;\r\n unset _mlre _mlIFS;\r\n if [ -n &quot;${IFS+x}&quot; ]; then\r\n _mlIFS=$IFS;\r\n fi;\r\n IFS=&#39; &#39;;\r\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\r\n do\r\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\r\n if [ -n &quot;`eval &#39;echo ${&#39;$_mlv&#39;+x}&#39;`&quot; ]; then\r\n _mlre=&quot;${_mlre:-}${_mlv}_modquar=&#39;`eval &#39;echo ${&#39;$_mlv&#39;}&#39;`&#39; &quot;;\r\n fi;\r\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\r\n _mlre=&quot;${_mlre:-}${_mlv}=&#39;`eval &#39;echo ${&#39;$_mlrv&#39;:-}&#39;`&#39; &quot;;\r\n fi;\r\n done;\r\n if [ -n &quot;${_mlre:-}&quot; ]; then\r\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &#39;&quot;$@&quot;&#39;`;\r\n else\r\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\r\n fi;\r\n _mlstatus=$?;\r\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\r\n IFS=$_mlIFS;\r\n else\r\n unset IFS;\r\n fi;\r\n unset _mlre _mlv _mlrv _mlIFS;\r\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\r\n set -$_mlshdbg;\r\n fi;\r\n unset _mlshdbg;\r\n return $_mlstatus\r\n} does not exist\r\n\t\tat io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\r\n\t\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\r\n\t\tat java.base/java.util.Optional.map(Optional.java:260)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\r\n\t\tat io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\r\n\t\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\r\n\t\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\r\n\t\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\r\n\t\tat org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\r\n\t\tat org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\r\n\t\tat jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\r\n\t\tat org.jboss.weld.util.Observers.notify(Observers.java:166)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\r\n\t\tat org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\r\n\t\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\r\n\t\t... 19 more```\r\n","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p>I have a helidon MP java project with helidon 3.1.0 and I'm facing the issue below when I'm trying to run the generated jar file in oracle linux 8 machine where as same jar file works in other machines. Here are the details.\njava version: 17.0.6\nhelidon version: 3.1.0\nOS : Oracle linux 8\nThanks for your support in advance.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\n    at io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\n    at io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\n    at io.helidon.microprofile.server.Server.create(Server.java:83)\n    at oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\nCaused by: org.jboss.weld.exceptions.DefinitionException: Exception List with 1 exceptions:\nException 0 :\njava.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = '1' ]; then\n case &quot;$-&quot; in\n *v*x*)\n set +vx;\n _mlshdbg='vx'\n ;;\n *v*)\n set +v;\n _mlshdbg='v'\n ;;\n *x*)\n set +x;\n _mlshdbg='x'\n ;;\n *)\n _mlshdbg=''\n ;;\n esac;\n fi;\n unset _mlre _mlIFS;\n if [ -n &quot;${IFS+x}&quot; ]; then\n _mlIFS=$IFS;\n fi;\n IFS=' ';\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\n do\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\n if [ -n &quot;`eval 'echo ${'$_mlv'+x}'`&quot; ]; then\n _mlre=&quot;${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' &quot;;\n fi;\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\n _mlre=&quot;${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' &quot;;\n fi;\n done;\n if [ -n &quot;${_mlre:-}&quot; ]; then\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash '&quot;$@&quot;'`;\n else\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\n fi;\n _mlstatus=$?;\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\n IFS=$_mlIFS;\n else\n unset IFS;\n fi;\n unset _mlre _mlv _mlrv _mlIFS;\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\n set -$_mlshdbg;\n fi;\n unset _mlshdbg;\n return $_mlstatus\n} does not exist\n    at io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\n    at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n    at io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\n    at io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\n    at io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\n    at io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\n    at java.base/java.util.Optional.map(Optional.java:260)\n    at io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\n    at io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\n    at io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\n    at io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\n    at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\n    at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\n    at org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\n    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n    at org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n    at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n    at jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\n    at org.jboss.weld.util.Observers.notify(Observers.java:166)\n    at org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n    at org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n    at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n    at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n    at org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n    at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\n    at org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\n    at org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\n    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\n    at io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\n    at io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\n    at io.helidon.microprofile.server.Server.create(Server.java:83)\n    at oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\n\n    at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:46)\n    at org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\n    at org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\n    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\n    ... 8 more\n    Suppressed: java.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = '1' ]; then\n case &quot;$-&quot; in\n *v*x*)\n set +vx;\n _mlshdbg='vx'\n ;;\n *v*)\n set +v;\n _mlshdbg='v'\n ;;\n *x*)\n set +x;\n _mlshdbg='x'\n ;;\n *)\n _mlshdbg=''\n ;;\n esac;\n fi;\n unset _mlre _mlIFS;\n if [ -n &quot;${IFS+x}&quot; ]; then\n _mlIFS=$IFS;\n fi;\n IFS=' ';\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\n do\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\n if [ -n &quot;`eval 'echo ${'$_mlv'+x}'`&quot; ]; then\n _mlre=&quot;${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' &quot;;\n fi;\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\n _mlre=&quot;${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' &quot;;\n fi;\n done;\n if [ -n &quot;${_mlre:-}&quot; ]; then\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash '&quot;$@&quot;'`;\n else\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\n fi;\n _mlstatus=$?;\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\n IFS=$_mlIFS;\n else\n unset IFS;\n fi;\n unset _mlre _mlv _mlrv _mlIFS;\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\n set -$_mlshdbg;\n fi;\n unset _mlshdbg;\n return $_mlstatus\n} does not exist\n        at io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\n        at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n        at io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\n        at io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\n        at io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\n        at io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\n        at java.base/java.util.Optional.map(Optional.java:260)\n        at io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\n        at io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\n        at io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\n        at io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\n        at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\n        at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n        at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\n        at org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n        at org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n        at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n        at jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\n        at org.jboss.weld.util.Observers.notify(Observers.java:166)\n        at org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n        at org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n        at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n        at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n        at org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n        at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\n        ... 19 more```\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1684348165,"post_id":76275130,"comment_id":134506811,"body_markdown":"your &quot;End Date&quot; is in seconds, what you calculate is in milliseconds. `book.endDate * 1000` might fix your issue. E.g. `1684159940` when treated as millis would be Tue Jan 20 1970 11:49:19 UTC so it&#39;s way past 1 week ago (see https://currentmillis.com/ for example)","body":"your &quot;End Date&quot; is in seconds, what you calculate is in milliseconds. <code>book.endDate * 1000</code> might fix your issue. E.g. <code>1684159940</code> when treated as millis would be Tue Jan 20 1970 11:49:19 UTC so it&#39;s way past 1 week ago (see <a href=\"https://currentmillis.com/\" rel=\"nofollow noreferrer\">currentmillis.com</a> for example)"},{"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"score":0,"creation_date":1684350205,"post_id":76275130,"comment_id":134507200,"body_markdown":"Yes, you are right, I was actually keeping it as a unix timestamp in the object. However, the Unix timestamp is a value in seconds. I had forgotten that. Thanks for giving me your valuable time.","body":"Yes, you are right, I was actually keeping it as a unix timestamp in the object. However, the Unix timestamp is a value in seconds. I had forgotten that. Thanks for giving me your valuable time."}],"answers":[{"comments":[{"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"score":0,"creation_date":1684349977,"post_id":76275195,"comment_id":134507147,"body_markdown":"Thank you for taking your valuable time to help me. I guess I&#39;m too tired to see the numbers.","body":"Thank you for taking your valuable time to help me. I guess I&#39;m too tired to see the numbers."}],"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684348177,"creation_date":1684348177,"answer_id":76275195,"question_id":76275130,"body_markdown":"The date from the book -which is really a timestamp- doesn&#39;t include milliseconds. Notice that the length has 3 less digits. Multiply it by 1000 to make it comparable to the other timestamp.","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>The date from the book -which is really a timestamp- doesn't include milliseconds. Notice that the length has 3 less digits. Multiply it by 1000 to make it comparable to the other timestamp.</p>\n"},{"comments":[{"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"score":0,"creation_date":1684350088,"post_id":76275399,"comment_id":134507168,"body_markdown":"Thank you for taking your valuable time to help me.","body":"Thank you for taking your valuable time to help me."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684349925,"creation_date":1684349925,"answer_id":76275399,"question_id":76275130,"body_markdown":"It appears that `book.endDate` is returning an incorrectly computed value.\r\n\r\n```java\r\nlong endDateMillis = book.endDate;\r\n```\r\n&gt; I/System.out: End Date: 1684159940\r\n\r\nEssentially, it is off by a multiple of 1000.\r\n\r\nYou can fix this either within the `book` object class, or simply multiply `endDateMillis` by 1000.\r\n\r\n```java\r\nlong endDateMillis = book.endDate * 1000L;\r\n```","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>It appears that <code>book.endDate</code> is returning an incorrectly computed value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long endDateMillis = book.endDate;\n</code></pre>\n<blockquote>\n<p>I/System.out: End Date: 1684159940</p>\n</blockquote>\n<p>Essentially, it is off by a multiple of 1000.</p>\n<p>You can fix this either within the <code>book</code> object class, or simply multiply <code>endDateMillis</code> by 1000.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long endDateMillis = book.endDate * 1000L;\n</code></pre>\n"}],"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76275399,"answer_count":2,"score":1,"last_activity_date":1684349925,"creation_date":1684347690,"question_id":76275130,"body_markdown":"I am working on a project where the user adds a completion date when adding a book. I save it in an object called `FinishedBooks` with the completion date and other data of the book. I list these books in another activity. I have a filter button in the corner of the screen. This button will list the books that have been finished in the last week. I wrote a method for this before, here is my method:\r\n\r\n```java\r\nprivate void lastWeekFilter(List&lt;FinishedBooks&gt; finishedBooks) {\r\n    List&lt;FinishedBooks&gt; lastWeekList = new ArrayList&lt;&gt;();\r\n\r\n    // take now time\r\n    long currentTimeMillis = System.currentTimeMillis();\r\n\r\n    // Calculate the time one week ago\r\n    long oneWeekMillis = 7L * 24L * 60L * 60L * 1000L;\r\n    long oneWeekAgoMillis = currentTimeMillis - oneWeekMillis;\r\n\r\n    // Check each item in the list\r\n    for (FinishedBooks book : finishedBooks) {\r\n        long endDateMillis = book.endDate;\r\n\r\n        System.out.println(&quot;End Date: &quot; + endDateMillis);\r\n        System.out.println(&quot;One Week Ago Millis: &quot; + oneWeekAgoMillis);\r\n        System.out.println(&quot;******************************&quot;);\r\n\r\n        // If the due date falls within the last 1 week, add the item to the filteredList\r\n        if (endDateMillis &gt;= oneWeekAgoMillis &amp;&amp; endDateMillis &lt;= currentTimeMillis) {\r\n            lastWeekList.add(book);\r\n        }\r\n    }\r\n    finishedBooksAdapter.setLastWeekFilter(lastWeekList);\r\n}\r\n```\r\n\r\nMy code didn&#39;t work as I wanted, it never enters the if block. So I used a `System.out.println();` to see if the values meet the if conditions. Here&#39;s my logcat output:\r\n\r\n```\r\nI/System.out: End Date: 1684159940\r\nI/System.out: One Week Ago Millis: 1683740684856\r\nI/System.out: ******************************\r\nI/System.out: End Date: 1683987159\r\nI/System.out: One Week Ago Millis: 1683740684856\r\nI/System.out: ******************************\r\n```\r\n\r\nAlthough my incoming data meets the conditions, the object I want is not included in the list. It does not enter the if block. `lastWeekList.size()` returns 0.\r\n\r\nI am grateful for your help in advance.\r\n\r\nI was expecting the conditions to be met and these objects to be listed, but the list remains empty.\r\n","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>I am working on a project where the user adds a completion date when adding a book. I save it in an object called <code>FinishedBooks</code> with the completion date and other data of the book. I list these books in another activity. I have a filter button in the corner of the screen. This button will list the books that have been finished in the last week. I wrote a method for this before, here is my method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void lastWeekFilter(List&lt;FinishedBooks&gt; finishedBooks) {\n    List&lt;FinishedBooks&gt; lastWeekList = new ArrayList&lt;&gt;();\n\n    // take now time\n    long currentTimeMillis = System.currentTimeMillis();\n\n    // Calculate the time one week ago\n    long oneWeekMillis = 7L * 24L * 60L * 60L * 1000L;\n    long oneWeekAgoMillis = currentTimeMillis - oneWeekMillis;\n\n    // Check each item in the list\n    for (FinishedBooks book : finishedBooks) {\n        long endDateMillis = book.endDate;\n\n        System.out.println(&quot;End Date: &quot; + endDateMillis);\n        System.out.println(&quot;One Week Ago Millis: &quot; + oneWeekAgoMillis);\n        System.out.println(&quot;******************************&quot;);\n\n        // If the due date falls within the last 1 week, add the item to the filteredList\n        if (endDateMillis &gt;= oneWeekAgoMillis &amp;&amp; endDateMillis &lt;= currentTimeMillis) {\n            lastWeekList.add(book);\n        }\n    }\n    finishedBooksAdapter.setLastWeekFilter(lastWeekList);\n}\n</code></pre>\n<p>My code didn't work as I wanted, it never enters the if block. So I used a <code>System.out.println();</code> to see if the values meet the if conditions. Here's my logcat output:</p>\n<pre><code>I/System.out: End Date: 1684159940\nI/System.out: One Week Ago Millis: 1683740684856\nI/System.out: ******************************\nI/System.out: End Date: 1683987159\nI/System.out: One Week Ago Millis: 1683740684856\nI/System.out: ******************************\n</code></pre>\n<p>Although my incoming data meets the conditions, the object I want is not included in the list. It does not enter the if block. <code>lastWeekList.size()</code> returns 0.</p>\n<p>I am grateful for your help in advance.</p>\n<p>I was expecting the conditions to be met and these objects to be listed, but the list remains empty.</p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"owner":{"account_id":24418385,"reputation":731,"user_id":18632985,"display_name":"Hoang Minh Quang FX15045"},"score":0,"creation_date":1684288424,"post_id":76266757,"comment_id":134495163,"body_markdown":"So basically you want a way to compare 2 Columns with Map type?","body":"So basically you want a way to compare 2 Columns with Map type?"},{"owner":{"account_id":27963688,"reputation":1,"user_id":21354969,"display_name":"redisLearner"},"score":0,"creation_date":1684348928,"post_id":76266757,"comment_id":134506952,"body_markdown":"Yes @HoangMinhQuangFX15045","body":"Yes @HoangMinhQuangFX15045"}],"owner":{"account_id":27963688,"reputation":1,"user_id":21354969,"display_name":"redisLearner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684348981,"creation_date":1684268055,"question_id":76266757,"body_markdown":"I have two datasets (baseline and dataset) in this Structure:\r\n\r\n```\r\npublic static final StructType SCHEMA =  new StructType()\r\n.add(KEY, StringType, false)\r\n.add(DATASETS, createMapType(StringType, createArrayType(StringType)), true);\r\n\r\n// Find rows (just same keys) in newDataset (dataset) that are in oldDataset(baseline) but with different values\r\nDataset&lt;Row&gt; joined = dataset\r\n.join(baselineData, dataset.col(KEY).equalTo(baselineData.col(KEY)), &quot;inner&quot;)\r\n.withColumn(&quot;datasets_baseline&quot;, baselineData.col(DATASETS))\r\n.withColumn(&quot;datasets_new&quot;, dataset.col(DATASETS))\r\n.drop(baselineData.col(DATASETS))\r\n.drop(dataset.col(DATASETS));\r\n```\r\n\r\nI couldn&#39;t do datasets_baseline.notEqualTo(datasets_new) because it is a map type.\r\n\r\nIs there any other option to get what I am looking for ?\r\n\r\nTried this :\r\n\r\n```\r\nDataset&lt;Row&gt; newRows = joined     \r\n.select(col(KEY), \r\nexpr(&quot;arrays_zip(datasets_baseline, datasets_new) as datasets_diff&quot;))     \r\n.filter(expr(&quot;exists(transform(datasets_diff, x -&gt; exists(transform(x, y -&gt; y._1 != y._2))), element -&gt; element)&quot;)\r\n.join(dataset, dataset.col(KEY).equalTo(joined.col(KEY)), &quot;inner&quot;)\r\n.select(dataset.col(KEY), dataset.col(DATASETS)); \r\n```\r\nbut different values implies different in order inside the list (map&#39;s value) so this doesn&#39;t work for me.","title":"How to compare two dataset with complex value if they are different or not in spark","body":"<p>I have two datasets (baseline and dataset) in this Structure:</p>\n<pre><code>public static final StructType SCHEMA =  new StructType()\n.add(KEY, StringType, false)\n.add(DATASETS, createMapType(StringType, createArrayType(StringType)), true);\n\n// Find rows (just same keys) in newDataset (dataset) that are in oldDataset(baseline) but with different values\nDataset&lt;Row&gt; joined = dataset\n.join(baselineData, dataset.col(KEY).equalTo(baselineData.col(KEY)), &quot;inner&quot;)\n.withColumn(&quot;datasets_baseline&quot;, baselineData.col(DATASETS))\n.withColumn(&quot;datasets_new&quot;, dataset.col(DATASETS))\n.drop(baselineData.col(DATASETS))\n.drop(dataset.col(DATASETS));\n</code></pre>\n<p>I couldn't do datasets_baseline.notEqualTo(datasets_new) because it is a map type.</p>\n<p>Is there any other option to get what I am looking for ?</p>\n<p>Tried this :</p>\n<pre><code>Dataset&lt;Row&gt; newRows = joined     \n.select(col(KEY), \nexpr(&quot;arrays_zip(datasets_baseline, datasets_new) as datasets_diff&quot;))     \n.filter(expr(&quot;exists(transform(datasets_diff, x -&gt; exists(transform(x, y -&gt; y._1 != y._2))), element -&gt; element)&quot;)\n.join(dataset, dataset.col(KEY).equalTo(joined.col(KEY)), &quot;inner&quot;)\n.select(dataset.col(KEY), dataset.col(DATASETS)); \n</code></pre>\n<p>but different values implies different in order inside the list (map's value) so this doesn't work for me.</p>\n"},{"tags":["java","javascript","currency","currency-formatting"],"comments":[{"owner":{"account_id":2524996,"reputation":2764,"user_id":2194537,"accept_rate":50,"display_name":"Nikhil Talreja"},"score":0,"creation_date":1403235161,"post_id":24319420,"comment_id":37589639,"body_markdown":"http://www.oracle.com/technetwork/java/javase/locales-137662.html","body":"<a href=\"http://www.oracle.com/technetwork/java/javase/locales-137662.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/javase/locales-137662.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":2524996,"reputation":2764,"user_id":2194537,"accept_rate":50,"display_name":"Nikhil Talreja"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1403235611,"creation_date":1403235611,"answer_id":24319555,"question_id":24319420,"body_markdown":"Try this:   \r\n\r\n    NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.forLanguageTag(&quot;pt_BR&quot;));\r\n\r\n ","title":"Currency Locale- How to get the locale for the different countries","body":"<p>Try this:   </p>\n\n<pre><code>NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.forLanguageTag(\"pt_BR\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14340865,"reputation":23,"user_id":10359104,"display_name":"Giulio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684348824,"creation_date":1684348824,"answer_id":76275263,"question_id":24319420,"body_markdown":"UPDATING 2023 (KOTLIN):\r\n\r\nWhen I tried to use &quot;Locale.forLanguageTag(&quot;pt_BR&quot;)&quot; it didn&#39;t work for me, it&#39;s not formatting correctly and it&#39;s showing an unknown character: \r\n\r\n[![unknown character appearing when using Locale.forLanguageTag(&quot;pt_BR&quot;)][1]][1]\r\n\r\n\r\nSo I googled and used the following code and it worked:\r\n```\r\nval brl = NumberFormat.getCurrencyInstance(Locale(&quot;pt&quot;, &quot;BR&quot;))\r\n```\r\n\r\n[![Brazil currency character displayed correctly by using Locale(&quot;pt&quot;, &quot;BR&quot;)][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sngK5.png\r\n  [2]: https://i.stack.imgur.com/uHulP.png","title":"Currency Locale- How to get the locale for the different countries","body":"<p>UPDATING 2023 (KOTLIN):</p>\n<p>When I tried to use &quot;Locale.forLanguageTag(&quot;pt_BR&quot;)&quot; it didn't work for me, it's not formatting correctly and it's showing an unknown character:</p>\n<p><a href=\"https://i.stack.imgur.com/sngK5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sngK5.png\" alt=\"unknown character appearing when using Locale.forLanguageTag(&quot;pt_BR&quot;)\" /></a></p>\n<p>So I googled and used the following code and it worked:</p>\n<pre><code>val brl = NumberFormat.getCurrencyInstance(Locale(&quot;pt&quot;, &quot;BR&quot;))\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uHulP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uHulP.png\" alt=\"Brazil currency character displayed correctly by using Locale(&quot;pt&quot;, &quot;BR&quot;)\" /></a></p>\n"}],"owner":{"account_id":4623031,"reputation":33,"user_id":3747555,"accept_rate":40,"display_name":"pretzels04"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":830,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":24319555,"answer_count":2,"score":0,"last_activity_date":1684348824,"creation_date":1403234378,"question_id":24319420,"body_markdown":"    public  double showinbrl(double amount, double rate) {\r\n    \t\tdouble amountinbrl = amount * rate; \r\n    \t\tNumberFormat brl = NumberFormat.getCurrencyInstance(Locale.BRAZIL); \r\n    \t\tbrl.format(amountinbrl);\r\n    \t\treturn amountinbrl;\r\n    \t}\r\n\r\n\r\nhow to get the locale for the different countries... i cant find locale for brazil..","title":"Currency Locale- How to get the locale for the different countries","body":"<pre><code>public  double showinbrl(double amount, double rate) {\n        double amountinbrl = amount * rate; \n        NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.BRAZIL); \n        brl.format(amountinbrl);\n        return amountinbrl;\n    }\n</code></pre>\n\n<p>how to get the locale for the different countries... i cant find locale for brazil..</p>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684348574,"post_id":76275013,"comment_id":134506883,"body_markdown":"You changed your package structure as well, which is not covered by Spring Boot and thus it isn&#39;t detecting the entities anymore.","body":"You changed your package structure as well, which is not covered by Spring Boot and thus it isn&#39;t detecting the entities anymore."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1684349681,"post_id":76275013,"comment_id":134507085,"body_markdown":"Adding an annotation to include the package in the search path fron https://stackoverflow.com/questions/39539508/spring-data-entities-in-different-packages did not help. I think I still have to remove the duplicate dependency","body":"Adding an annotation to include the package in the search path fron <a href=\"https://stackoverflow.com/questions/39539508/spring-data-entities-in-different-packages\" title=\"spring data entities in different packages\">stackoverflow.com/questions/39539508/&hellip;</a> did not help. I think I still have to remove the duplicate dependency"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684739522,"post_id":76275013,"comment_id":134555150,"body_markdown":"If it is the same you don&#39;t need to remove it. I would suggest to make it compile only instead of implementation.","body":"If it is the same you don&#39;t need to remove it. I would suggest to make it compile only instead of implementation."}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684348014,"creation_date":1684346687,"question_id":76275013,"body_markdown":"In relation to [this][1] question, I have encountered a problem. \r\n\r\nI have two projects, a `authlib` and a `server`. `server` is a spring boot 2.4.4 project with java, and `authlib` is a Kotlin project meant to be used as a library to facilitate web requests to the `server`.\r\n\r\nI decided to move the entity classes from the `server` to the `authlib`, so I could use them directly when handling the web requests and didn&#39;t have to define basically duplicate classes. I use `javax.persistence` for the entity definitions and stuff, so I added the dependency to the build.gradle.kts of the authlib:\r\n\r\n```\r\ndependencies {\r\n    implementation(kotlin(&quot;stdlib&quot;))\r\n    implementation(&quot;org.projectlombok:lombok:1.18.18&quot;)\r\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.9.6&quot;)\r\n\r\n    // https://mvnrepository.com/artifact/javax.persistence/persistence-api\r\n    implementation(&quot;javax.persistence:persistence-api:1.0.2&quot;)\r\n}\r\n```\r\n\r\nThe `server` uses the `authlib` project like this:\r\n\r\n```\r\ndependencies {\r\n    implementation(project(&quot;:authlib&quot;))\r\n\r\n    implementation(&quot;net.dv8tion:JDA:5.0.0-alpha.12&quot;)\r\n    implementation(&quot;com.github.theholywaffle:teamspeak3-api:1.3.0&quot;)\r\n\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-freemarker&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\r\n    implementation(&quot;org.jboss.aerogear:aerogear-otp-java:1.0.0&quot;)\r\n    implementation(&quot;org.mindrot:jbcrypt:0.4&quot;)\r\n    implementation(&quot;org.mariadb.jdbc:mariadb-java-client:1.5.7&quot;)\r\n    implementation(&quot;com.google.code.gson:gson:2.9.0&quot;)\r\n    //implementation(&quot;com.google.api-client:google-api-client:1.32.1&quot;)\r\n    //implementation(&quot;com.google.oauth-client:google-oauth-client-jetty:1.32.1&quot;)\r\n    //implementation(&quot;com.google.apis:google-api-services-youtube:v3-rev20210811-1.32.1&quot;)\r\n\r\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\r\n    runtimeOnly(&quot;mysql:mysql-connector-java&quot;)\r\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\r\n\r\n\r\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-boot-starter:3.0.0&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-swagger2:3.0.0&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-swagger-ui:2.9.2&quot;)\r\n}\r\n```\r\n\r\nThis seemed all fine and dandy to me, except for the fact I had to provide a version number to the `javax.persistence` in the authlib. I thought this would be handled automatically, but oh well. I then built the project and ran it, and it indeed gave me a version conflict:\r\n\r\n```\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n    org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor.getValidationMode(PersistenceUnitInfoDescriptor.java:88)\r\n\r\nThe following method did not exist:\r\n    javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;\r\n\r\nThe method&#39;s class, javax.persistence.spi.PersistenceUnitInfo, is available from the following locations:\r\n    jar:file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar!/javax/persistence/spi/PersistenceUnitInfo.class\r\n    jar:file:/workspace/BOOT-INF/lib/jakarta.persistence-api-2.2.3.jar!/javax/persistence/spi/PersistenceUnitInfo.class\r\n\r\nThe class hierarchy was loaded from the following locations:\r\n    javax.persistence.spi.PersistenceUnitInfo: file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar\r\n\r\n```\r\n\r\nI understand that the problem lies in me basically including two different versions of the persistence api in my server project. However, I do not know how to fix this. Do I have to remove the dependency `javax.persistence` from my `implementation(project(&quot;:authlib&quot;))`? Or is there some other way to prevent this from happening?\r\n\r\nEDIT:\r\n\r\nI decided to try to include the exact version of the jakarta.persistence api in my `authlib` and that did something. However, the error indicates that the problem is unchanged and the persistence api is still present twice:\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean\r\n with name &#39;entityManagerFactory&#39; defined in class path resource \r\n[org/springframework/boot/autoconfigure/orm/jpa\r\n/HibernateJpaConfiguration.class]: Invocation of init method failed; nested \r\nexception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on \r\nnet.xxx.auth.entity.UserSession.user references an unknown entity: \r\nnet.xxx.authlib.entity.User\r\n\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/76268254/does-it-matter-if-an-entity-for-a-jpa-repository-is-defined-in-another-gradle-pr","title":"Remove javax.persistence as duplicate dependency in two part spring boot project","body":"<p>In relation to <a href=\"https://stackoverflow.com/questions/76268254/does-it-matter-if-an-entity-for-a-jpa-repository-is-defined-in-another-gradle-pr\">this</a> question, I have encountered a problem.</p>\n<p>I have two projects, a <code>authlib</code> and a <code>server</code>. <code>server</code> is a spring boot 2.4.4 project with java, and <code>authlib</code> is a Kotlin project meant to be used as a library to facilitate web requests to the <code>server</code>.</p>\n<p>I decided to move the entity classes from the <code>server</code> to the <code>authlib</code>, so I could use them directly when handling the web requests and didn't have to define basically duplicate classes. I use <code>javax.persistence</code> for the entity definitions and stuff, so I added the dependency to the build.gradle.kts of the authlib:</p>\n<pre><code>dependencies {\n    implementation(kotlin(&quot;stdlib&quot;))\n    implementation(&quot;org.projectlombok:lombok:1.18.18&quot;)\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.9.6&quot;)\n\n    // https://mvnrepository.com/artifact/javax.persistence/persistence-api\n    implementation(&quot;javax.persistence:persistence-api:1.0.2&quot;)\n}\n</code></pre>\n<p>The <code>server</code> uses the <code>authlib</code> project like this:</p>\n<pre><code>dependencies {\n    implementation(project(&quot;:authlib&quot;))\n\n    implementation(&quot;net.dv8tion:JDA:5.0.0-alpha.12&quot;)\n    implementation(&quot;com.github.theholywaffle:teamspeak3-api:1.3.0&quot;)\n\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-freemarker&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\n    implementation(&quot;org.jboss.aerogear:aerogear-otp-java:1.0.0&quot;)\n    implementation(&quot;org.mindrot:jbcrypt:0.4&quot;)\n    implementation(&quot;org.mariadb.jdbc:mariadb-java-client:1.5.7&quot;)\n    implementation(&quot;com.google.code.gson:gson:2.9.0&quot;)\n    //implementation(&quot;com.google.api-client:google-api-client:1.32.1&quot;)\n    //implementation(&quot;com.google.oauth-client:google-oauth-client-jetty:1.32.1&quot;)\n    //implementation(&quot;com.google.apis:google-api-services-youtube:v3-rev20210811-1.32.1&quot;)\n\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\n    runtimeOnly(&quot;mysql:mysql-connector-java&quot;)\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\n\n\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\n    testImplementation(&quot;io.springfox:springfox-boot-starter:3.0.0&quot;)\n    testImplementation(&quot;io.springfox:springfox-swagger2:3.0.0&quot;)\n    testImplementation(&quot;io.springfox:springfox-swagger-ui:2.9.2&quot;)\n}\n</code></pre>\n<p>This seemed all fine and dandy to me, except for the fact I had to provide a version number to the <code>javax.persistence</code> in the authlib. I thought this would be handled automatically, but oh well. I then built the project and ran it, and it indeed gave me a version conflict:</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\n    org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor.getValidationMode(PersistenceUnitInfoDescriptor.java:88)\n\nThe following method did not exist:\n    javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;\n\nThe method's class, javax.persistence.spi.PersistenceUnitInfo, is available from the following locations:\n    jar:file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar!/javax/persistence/spi/PersistenceUnitInfo.class\n    jar:file:/workspace/BOOT-INF/lib/jakarta.persistence-api-2.2.3.jar!/javax/persistence/spi/PersistenceUnitInfo.class\n\nThe class hierarchy was loaded from the following locations:\n    javax.persistence.spi.PersistenceUnitInfo: file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar\n\n</code></pre>\n<p>I understand that the problem lies in me basically including two different versions of the persistence api in my server project. However, I do not know how to fix this. Do I have to remove the dependency <code>javax.persistence</code> from my <code>implementation(project(&quot;:authlib&quot;))</code>? Or is there some other way to prevent this from happening?</p>\n<p>EDIT:</p>\n<p>I decided to try to include the exact version of the jakarta.persistence api in my <code>authlib</code> and that did something. However, the error indicates that the problem is unchanged and the persistence api is still present twice:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean\n with name 'entityManagerFactory' defined in class path resource \n[org/springframework/boot/autoconfigure/orm/jpa\n/HibernateJpaConfiguration.class]: Invocation of init method failed; nested \nexception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on \nnet.xxx.auth.entity.UserSession.user references an unknown entity: \nnet.xxx.authlib.entity.User\n\n</code></pre>\n"},{"tags":["java","github","jgit"],"owner":{"account_id":26472979,"reputation":51,"user_id":20113319,"display_name":"Glitch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684347936,"creation_date":1684342111,"question_id":76274433,"body_markdown":"My program needs to add files to a github repo. I&#39;ve looked into JGit, but it&#39;s been extremely confusing. I just want to:\r\nGive the program the url of my repository.\r\nCreate a file with a certain name with some contents.\r\nCommit the file to the repository.\r\n\r\nHow do I do this?! After tons of searching I thought you needed to clone the repository from github, then make your edits, then &quot;push&quot; it back to github. But I couldn&#39;t even get the clone command to work!","title":"How to create a file in an existing github repo (that is on the github website; it&#39;s not local!) using a Java program?","body":"<p>My program needs to add files to a github repo. I've looked into JGit, but it's been extremely confusing. I just want to:\nGive the program the url of my repository.\nCreate a file with a certain name with some contents.\nCommit the file to the repository.</p>\n<p>How do I do this?! After tons of searching I thought you needed to clone the repository from github, then make your edits, then &quot;push&quot; it back to github. But I couldn't even get the clone command to work!</p>\n"},{"tags":["java","qr-code","zxing"],"answers":[{"comments":[{"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"score":0,"creation_date":1670510051,"post_id":74730965,"comment_id":131895393,"body_markdown":"Hi, thanks for the answer.  But unfortunately, I have tried all the level corrections and other hint parameters.  The result is still the same, I can&#39;t generate qr version 1. There is an online generator with the same result but after trying the same properties I still get NG result. https://www.morovia.com/free-online-barcode-generator/qrcode-maker.php","body":"Hi, thanks for the answer.  But unfortunately, I have tried all the level corrections and other hint parameters.  The result is still the same, I can&#39;t generate qr version 1. There is an online generator with the same result but after trying the same properties I still get NG result. <a href=\"https://www.morovia.com/free-online-barcode-generator/qrcode-maker.php\" rel=\"nofollow noreferrer\">morovia.com/free-online-barcode-generator/qrcode-maker.php</a>"}],"tags":[],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670505845,"creation_date":1670505845,"answer_id":74730965,"question_id":74729019,"body_markdown":"QR Codes have some redundancy built in to correct for damaged QR codes. When creating a QR code, you may choose the level of error correction. The higher the level, the more information must be included in the QR code for redundancy and thus the larger the QR code must be. It appears that the level of error correction in your reference is lower than in the QR code you created. You may want to have a look at [this StackOverflow answer](https://stackoverflow.com/a/11968724/5736633) to see how this can be specified in Z-Xing.","title":"Different pattern between qrcode image","body":"<p>QR Codes have some redundancy built in to correct for damaged QR codes. When creating a QR code, you may choose the level of error correction. The higher the level, the more information must be included in the QR code for redundancy and thus the larger the QR code must be. It appears that the level of error correction in your reference is lower than in the QR code you created. You may want to have a look at <a href=\"https://stackoverflow.com/a/11968724/5736633\">this StackOverflow answer</a> to see how this can be specified in Z-Xing.</p>\n"},{"comments":[{"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"score":0,"creation_date":1670556884,"post_id":74737723,"comment_id":131907002,"body_markdown":"Thank you sir, this is what I mean, I have done several ways but haven&#39;t found a way to do the compression in question, can you give an example maybe?","body":"Thank you sir, this is what I mean, I have done several ways but haven&#39;t found a way to do the compression in question, can you give an example maybe?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671017348,"post_id":74737723,"comment_id":132004921,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74737723/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":461214,"reputation":73,"user_id":3814773,"display_name":"oki"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670545504,"creation_date":1670545504,"answer_id":74737723,"question_id":74729019,"body_markdown":"If I checked your expected QR Code have size 41x41 modules which is using version 6.\r\nThe version 6 have only one alignment pattern. Your data contains of 1244 bits and the version 6 only have maximum size 1,088 bits for mixed data bits with lower (L) error correction. So, the exception raised because your data is bigger than maximum capacity of QR Code in Version 6 below.\r\nThe most possible version for your data is version 7 that have 1,248 bits capacity with lower error correction. But this version have more than one alignment pattern.\r\nI suggest you to try to compress your data to lower your size of data.\r\n[Version 6 Size Description source: https://www.qrcode.com/en/about/version.html][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YVrGQ.png","title":"Different pattern between qrcode image","body":"<p>If I checked your expected QR Code have size 41x41 modules which is using version 6.\nThe version 6 have only one alignment pattern. Your data contains of 1244 bits and the version 6 only have maximum size 1,088 bits for mixed data bits with lower (L) error correction. So, the exception raised because your data is bigger than maximum capacity of QR Code in Version 6 below.\nThe most possible version for your data is version 7 that have 1,248 bits capacity with lower error correction. But this version have more than one alignment pattern.\nI suggest you to try to compress your data to lower your size of data.\n<a href=\"https://i.stack.imgur.com/YVrGQ.png\" rel=\"nofollow noreferrer\">Version 6 Size Description source: https://www.qrcode.com/en/about/version.html</a></p>\n"}],"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684347425,"creation_date":1670496211,"question_id":74729019,"body_markdown":"I need to implement an old system that doesn&#39;t have source code.\r\nThe system prints labels with the following qrcode output: (QR version 6 41x41, **alignment patterns** only 1)\r\n\r\n[![Version 1][1]][1]\r\n\r\nI tried to make the program in Java using the Zxing library.\r\nHowever, the resulting output has different as with previous below: (QR version &gt;= 7,**alignment patterns** = 6)\r\n\r\n[![Version 2][2]][2]\r\n\r\nEven if both reading scanners will produce the same output and character length (154@char)\r\n\r\n    &quot;H 4A91K       BB7998  M11AU10406   CBU 4A91471     H 000160        69H 69578 00009Y000                            @N                                      &quot;\r\n\r\nMaybe, it seems related to the qr lower version.\r\nI tried to make a lower qr.version but got the following error:\r\n\r\n    com.google.zxing.WriterException: Data too big for requested version\r\n        at com.google.zxing.qrcode.encoder.Encoder.encode(Encoder.java:123)\r\n        at com.google.zxing.qrcode.QRCodeWriter.encode(QRCodeWriter.java:78)\r\n\r\n\r\nCan anyone help me how to make qrcode output same as version 1 (**alignment patterns** only 1) ?\r\n\r\nThank you for your support.\r\n\r\n  [1]: https://i.stack.imgur.com/9OJv0.png?s=128\r\n  [2]: https://i.stack.imgur.com/z1PTw.png?s=175","title":"Different pattern between qrcode image","body":"<p>I need to implement an old system that doesn't have source code.\nThe system prints labels with the following qrcode output: (QR version 6 41x41, <strong>alignment patterns</strong> only 1)</p>\n<p><a href=\"https://i.stack.imgur.com/9OJv0.png?s=128\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9OJv0.png?s=128\" alt=\"Version 1\" /></a></p>\n<p>I tried to make the program in Java using the Zxing library.\nHowever, the resulting output has different as with previous below: (QR version &gt;= 7,<strong>alignment patterns</strong> = 6)</p>\n<p><a href=\"https://i.stack.imgur.com/z1PTw.png?s=175\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z1PTw.png?s=175\" alt=\"Version 2\" /></a></p>\n<p>Even if both reading scanners will produce the same output and character length (154@char)</p>\n<pre><code>&quot;H 4A91K       BB7998  M11AU10406   CBU 4A91471     H 000160        69H 69578 00009Y000                            @N                                      &quot;\n</code></pre>\n<p>Maybe, it seems related to the qr lower version.\nI tried to make a lower qr.version but got the following error:</p>\n<pre><code>com.google.zxing.WriterException: Data too big for requested version\n    at com.google.zxing.qrcode.encoder.Encoder.encode(Encoder.java:123)\n    at com.google.zxing.qrcode.QRCodeWriter.encode(QRCodeWriter.java:78)\n</code></pre>\n<p>Can anyone help me how to make qrcode output same as version 1 (<strong>alignment patterns</strong> only 1) ?</p>\n<p>Thank you for your support.</p>\n"},{"tags":["java","regex"],"answers":[{"comments":[{"owner":{"account_id":9216321,"reputation":486,"user_id":6847323,"accept_rate":14,"display_name":"srinivas gowda"},"score":0,"creation_date":1495615130,"post_id":6805035,"comment_id":75323257,"body_markdown":"how to do reverse operation of the above like str=str.replace(&quot;\\&quot;,&quot;//&quot;);","body":"how to do reverse operation of the above like str=str.replace(&quot;\\&quot;,&quot;//&quot;);"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1495617699,"post_id":6805035,"comment_id":75325016,"body_markdown":"@srinivasgowda if you mean you want to replace forward slashes with backslashes, just swap the parameters: `str = str.replace(&quot;/&quot;, &quot;\\\\&quot;);`","body":"@srinivasgowda if you mean you want to replace forward slashes with backslashes, just swap the parameters: <code>str = str.replace(&quot;&#47;&quot;, &quot;\\\\&quot;);</code>"},{"owner":{"account_id":9216321,"reputation":486,"user_id":6847323,"accept_rate":14,"display_name":"srinivas gowda"},"score":0,"creation_date":1495618352,"post_id":6805035,"comment_id":75325481,"body_markdown":"No for single backward slash(\\) to double forward slash(//)","body":"No for single backward slash(&#41; to double forward slash(//)"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1495618663,"post_id":6805035,"comment_id":75325728,"body_markdown":"@sri `str = str.replace(&quot;\\\\&quot;, &quot;//&quot;);`","body":"@sri <code>str = str.replace(&quot;\\\\&quot;, &quot;&#47;&#47;&quot;);</code>"},{"owner":{"account_id":2412588,"reputation":694,"user_id":2107357,"display_name":"Umashankar"},"score":0,"creation_date":1535092851,"post_id":6805035,"comment_id":90946667,"body_markdown":"how to replace it globally","body":"how to replace it globally"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1535094235,"post_id":6805035,"comment_id":90947263,"body_markdown":"@Umashankar please read my answer: `replace()` replaces **all** occurrences - ie &quot;globally&quot;","body":"@Umashankar please read my answer: <code>replace()</code> replaces <b>all</b> occurrences - ie &quot;globally&quot;"}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":6,"down_vote_count":2,"up_vote_count":71,"is_accepted":true,"score":69,"last_activity_date":1343869006,"creation_date":1311483747,"answer_id":6805035,"question_id":6805028,"body_markdown":"In java, use this:\r\n\r\n    str = str.replace(&quot;\\\\&quot;, &quot;/&quot;);\r\n\r\nNote that the regex version of replace, ie [`replaceAll()`][1], is not required here; [`replace()`][2] still replaces all occurrences of the search term, but it searches for *literal* Strings, not regex matches.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29","title":"How to replace backward slash to forward slash using java?","body":"<p>In java, use this:</p>\n\n<pre><code>str = str.replace(\"\\\\\", \"/\");\n</code></pre>\n\n<p>Note that the regex version of replace, ie <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\"><code>replaceAll()</code></a>, is not required here; <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29\" rel=\"noreferrer\"><code>replace()</code></a> still replaces all occurrences of the search term, but it searches for <em>literal</em> Strings, not regex matches.</p>\n"},{"comments":[{"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"score":0,"creation_date":1311483963,"post_id":6805045,"comment_id":8080047,"body_markdown":"You need to escape the backslash.","body":"You need to escape the backslash."}],"tags":[],"owner":{"account_id":403973,"reputation":140184,"user_id":772035,"accept_rate":95,"display_name":"Paul"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1311484288,"creation_date":1311483909,"answer_id":6805045,"question_id":6805028,"body_markdown":"If you have:\r\n\r\n`String s = &quot;c:\\\\upload\\\\date\\\\csv\\\\sample.csv&quot;;`\r\n\r\nIn Java, you can just use:\r\n\r\n`s = s.replace(&quot;\\\\&quot;, &quot;/&quot;);`\r\n\r\nWhich will make s equal to:\r\n\r\n`c:/upload/date/csv/sample.csv`","title":"How to replace backward slash to forward slash using java?","body":"<p>If you have:</p>\n\n<p><code>String s = \"c:\\\\upload\\\\date\\\\csv\\\\sample.csv\";</code></p>\n\n<p>In Java, you can just use:</p>\n\n<p><code>s = s.replace(\"\\\\\", \"/\");</code></p>\n\n<p>Which will make s equal to:</p>\n\n<p><code>c:/upload/date/csv/sample.csv</code></p>\n"},{"tags":[],"owner":{"account_id":48093,"reputation":2175,"user_id":142716,"display_name":"Raze"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1311484710,"creation_date":1311484710,"answer_id":6805072,"question_id":6805028,"body_markdown":"The String.replace(CharSequence, CharSequence) example provided by @PaulPRO and @Bohemian will work, but its better to use the String.replace(char, char) version. Slightly faster. Though you won&#39;t have a noticeable speed difference, its better to do such optimisations where possible.\r\n\r\n    String replacedStr = str.replace(&#39;\\\\&#39;, &#39;/&#39;);","title":"How to replace backward slash to forward slash using java?","body":"<p>The String.replace(CharSequence, CharSequence) example provided by @PaulPRO and @Bohemian will work, but its better to use the String.replace(char, char) version. Slightly faster. Though you won't have a noticeable speed difference, its better to do such optimisations where possible.</p>\n\n<pre><code>String replacedStr = str.replace('\\\\', '/');\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7113794,"reputation":141,"user_id":5440798,"display_name":"Vibhu Vikram Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684347353,"creation_date":1684347353,"answer_id":76275091,"question_id":6805028,"body_markdown":"For double back slash (&quot;\\\\\\\\&quot;)\r\n\r\nFor Java you can use string.replaceAll(&quot;\\\\\\\\\\\\\\\\&quot;,&quot;/&quot;)\r\n\r\n&amp;\r\n\r\nFor Kotlin you can use string.replace(&quot;\\\\\\\\\\\\\\\\&quot;.toRegex(),&quot;/&quot;)","title":"How to replace backward slash to forward slash using java?","body":"<p>For double back slash (&quot;\\\\&quot;)</p>\n<p>For Java you can use string.replaceAll(&quot;\\\\\\\\&quot;,&quot;/&quot;)</p>\n<p>&amp;</p>\n<p>For Kotlin you can use string.replace(&quot;\\\\\\\\&quot;.toRegex(),&quot;/&quot;)</p>\n"}],"owner":{"account_id":186312,"reputation":9244,"user_id":423620,"accept_rate":88,"display_name":"Sameek Mishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104284,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":6805035,"answer_count":4,"score":37,"last_activity_date":1684347353,"creation_date":1311483642,"question_id":6805028,"body_markdown":"I&#39;m importing a CSV file to MySQL database. This can be done using `java.mysql` support for forward slash in file path. If user gives the path \r\n\r\n    c:\\upload\\date\\csv\\sample.csv\r\n\r\nMySQL doesn&#39;t support this type of path pattern. I want to search for backslashes in the path and replace them with a forward slash, to give this:\r\n\r\n      c:/upload/date/csv/sample.csv\r\n\r\nHow is that done?","title":"How to replace backward slash to forward slash using java?","body":"<p>I'm importing a CSV file to MySQL database. This can be done using <code>java.mysql</code> support for forward slash in file path. If user gives the path </p>\n\n<pre><code>c:\\upload\\date\\csv\\sample.csv\n</code></pre>\n\n<p>MySQL doesn't support this type of path pattern. I want to search for backslashes in the path and replace them with a forward slash, to give this:</p>\n\n<pre><code>  c:/upload/date/csv/sample.csv\n</code></pre>\n\n<p>How is that done?</p>\n"},{"tags":["java","arrays","oracle","jdbc","plsql"],"answers":[{"tags":[],"owner":{"account_id":28606093,"reputation":1,"user_id":21902007,"display_name":"Dan Sievewright"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684346612,"creation_date":1684338732,"answer_id":76273977,"question_id":56634669,"body_markdown":"That documentation seems a bit out of date as setPlsqlIndexTable is deprecated in ojdbc8.  I can confirm that the example in the documentation does not work, but if you have t_indices defined in a package, then you can use the setObject and createOracleArray method with OracleData.  \r\n\r\n```plsql\r\n    create or replace package pkg_test\r\n    as \r\n        type t_indices is table of pls_integer index by pls_integer;\r\n    end;\r\n```\r\n\r\nThen the call would go through something like\r\n\r\n```java\r\n    void exampleCall() {\r\n\r\n        // set up connection\r\n\r\n        //inputs\r\n        int[] values = {1, 2, 3};\r\n  \r\n        // I&#39;m assuming you&#39;d probably just call a procedure instead of \r\n        // running an anonymous block, but idea is the same.\r\n        OracleCallableStatement procin = (OracleCallableStatement)\r\n          conn.prepareCall(&quot;declare \\n&quot; +\r\n                           &quot;a_indices   pkg_test.t_indices;\\n&quot; +\r\n                           &quot;begin\\n&quot; +\r\n                           &quot;  a_indices := ?;\\n&quot; +\r\n                           &quot;end;&quot;\r\n                          );\r\n\r\n        procin.setObject(1, (OracleData) arg0 -&gt; ((OracleConnection) arg0).createOracleArray(&quot;PKG_TEST.T_INDICES&quot;, values));\r\n\r\n        procin.execute();\r\n    }\r\n```\r\n\r\nI will note that with an associative array like this, converting from the array will mean using a zero-based index.  Instead, you could set up values as a `Map&lt;Integer, Integer&gt;` and have the keys line up with the usual one-based index.  And for associative arrays indexed by VARCHAR2(XX), then use `Map&lt;String, Integer&gt;` as your values.\r\n\r\nHere&#39;s the docs for more details\r\nhttps://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html","title":"Pass array of int from Java to Oracle PlSql","body":"<p>That documentation seems a bit out of date as setPlsqlIndexTable is deprecated in ojdbc8.  I can confirm that the example in the documentation does not work, but if you have t_indices defined in a package, then you can use the setObject and createOracleArray method with OracleData.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>    create or replace package pkg_test\n    as \n        type t_indices is table of pls_integer index by pls_integer;\n    end;\n</code></pre>\n<p>Then the call would go through something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>    void exampleCall() {\n\n        // set up connection\n\n        //inputs\n        int[] values = {1, 2, 3};\n  \n        // I'm assuming you'd probably just call a procedure instead of \n        // running an anonymous block, but idea is the same.\n        OracleCallableStatement procin = (OracleCallableStatement)\n          conn.prepareCall(&quot;declare \\n&quot; +\n                           &quot;a_indices   pkg_test.t_indices;\\n&quot; +\n                           &quot;begin\\n&quot; +\n                           &quot;  a_indices := ?;\\n&quot; +\n                           &quot;end;&quot;\n                          );\n\n        procin.setObject(1, (OracleData) arg0 -&gt; ((OracleConnection) arg0).createOracleArray(&quot;PKG_TEST.T_INDICES&quot;, values));\n\n        procin.execute();\n    }\n</code></pre>\n<p>I will note that with an associative array like this, converting from the array will mean using a zero-based index.  Instead, you could set up values as a <code>Map&lt;Integer, Integer&gt;</code> and have the keys line up with the usual one-based index.  And for associative arrays indexed by VARCHAR2(XX), then use <code>Map&lt;String, Integer&gt;</code> as your values.</p>\n<p>Here's the docs for more details\n<a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html</a></p>\n"}],"owner":{"account_id":16150634,"reputation":21,"user_id":11659178,"display_name":"Arjen van Eerde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1684346612,"creation_date":1560786059,"question_id":56634669,"body_markdown":"When I try to pass a Java array of int to Oracle PLSQL, I get an exception. I use the example that is in the docs, but for me it&#39;s not working.\r\n\r\nI&#39;m using JDK 1.8 and ojdbc8 to an Oracle 18 XE database.\r\n\r\n```java\r\n  @Test\r\n  void flush() {\r\n    try {\r\n      final Driver     oraDriver    = new OracleDriver();\r\n      System.out.println(&quot;Driver Major version is &quot;+oraDriver.getMajorVersion());\r\n      final Properties myProperties = new Properties();\r\n      myProperties.setProperty(&quot;user&quot;, &quot;kafka&quot;);\r\n      myProperties.setProperty(&quot;password&quot;, &quot;kafka&quot;);\r\n      Connection conn = oraDriver.connect(JDBC_URL, myProperties);\r\n      OracleCallableStatement procin = (OracleCallableStatement)\r\n          conn.prepareCall(&quot;declare type t_indices is table of pls_integer index by pls_integer;\\n&quot; +\r\n                           &quot;a_indices   t_indices;\\n&quot; +\r\n                           &quot;begin\\n&quot; +\r\n                           &quot;  a_indices := ?;\\n&quot; +\r\n                           &quot;end;&quot;\r\n                          );\r\n// Associative Array bind value\r\n      int[] values = {1, 2, 3};\r\n\r\n// maximum length of the Associative Array bind value. This\r\n// value defines the maximum possible &quot;currentLen&quot; for batch\r\n// updates. For standalone binds, &quot;maxLen&quot; should be the\r\n// same as &quot;currentLen&quot;.\r\n      int maxLen = values.length;\r\n\r\n// actual size of the Associative Array bind value\r\n      int currentLen = values.length;\r\n\r\n// Associative Array element type\r\n      int elemSqlType = OracleTypes.NUMBER;\r\n\r\n// Associative Array element length in case the element type\r\n// is CHAR, VARCHAR or RAW. This value is ignored for other\r\n// types.\r\n      int elemMaxLen = 0;\r\n\r\n// set the value\r\n      procin.setPlsqlIndexTable(1, values,\r\n                                maxLen, currentLen,\r\n                                elemSqlType, elemMaxLen);\r\n\r\n// execute the call\r\n      procin.execute();\r\n    }\r\n    catch (Exception e) {\r\n      throw new ConnectException(e);\r\n    }\r\n  }\r\n```\r\nThis is based on the example in, chapter &quot;Accessing PL/SQL Associative Arrays&quot;. https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179 .\r\n\r\nThe output / error text is below. I expected no error. What is the solution?\r\n```text\r\nC:\\Ls\\java\\jdk1.8.0\\bin\\java.exe ...\r\nDriver Major version is 18\r\n\r\norg.apache.kafka.connect.errors.ConnectException: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\r\n\tat nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:230)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:181)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:128)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\nCaused by: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494)\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446)\r\n\tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1052)\r\n\tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:537)\r\n\tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:255)\r\n\tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:610)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:249)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:82)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:924)\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1136)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3640)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.executeInternal(T4CCallableStatement.java:1318)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3752)\r\n\tat oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4242)\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1079)\r\n\tat nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:227)\r\n\t... 51 more\r\nCaused by: Error : 6550, Position : 113, Sql = declare type t_indices is table of pls_integer index by pls_integer;\r\na_indices   t_indices;\r\nbegin\r\n  a_indices := :1 ;\r\nend;, OriginalSql = declare type t_indices is table of pls_integer index by pls_integer;\r\na_indices   t_indices;\r\nbegin\r\n  a_indices := ?;\r\nend;, Error Msg = ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)\r\n\t... 66 more\r\n\r\n\r\nProcess finished with exit code -1\r\n```","title":"Pass array of int from Java to Oracle PlSql","body":"<p>When I try to pass a Java array of int to Oracle PLSQL, I get an exception. I use the example that is in the docs, but for me it's not working.</p>\n\n<p>I'm using JDK 1.8 and ojdbc8 to an Oracle 18 XE database.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  @Test\n  void flush() {\n    try {\n      final Driver     oraDriver    = new OracleDriver();\n      System.out.println(\"Driver Major version is \"+oraDriver.getMajorVersion());\n      final Properties myProperties = new Properties();\n      myProperties.setProperty(\"user\", \"kafka\");\n      myProperties.setProperty(\"password\", \"kafka\");\n      Connection conn = oraDriver.connect(JDBC_URL, myProperties);\n      OracleCallableStatement procin = (OracleCallableStatement)\n          conn.prepareCall(\"declare type t_indices is table of pls_integer index by pls_integer;\\n\" +\n                           \"a_indices   t_indices;\\n\" +\n                           \"begin\\n\" +\n                           \"  a_indices := ?;\\n\" +\n                           \"end;\"\n                          );\n// Associative Array bind value\n      int[] values = {1, 2, 3};\n\n// maximum length of the Associative Array bind value. This\n// value defines the maximum possible \"currentLen\" for batch\n// updates. For standalone binds, \"maxLen\" should be the\n// same as \"currentLen\".\n      int maxLen = values.length;\n\n// actual size of the Associative Array bind value\n      int currentLen = values.length;\n\n// Associative Array element type\n      int elemSqlType = OracleTypes.NUMBER;\n\n// Associative Array element length in case the element type\n// is CHAR, VARCHAR or RAW. This value is ignored for other\n// types.\n      int elemMaxLen = 0;\n\n// set the value\n      procin.setPlsqlIndexTable(1, values,\n                                maxLen, currentLen,\n                                elemSqlType, elemMaxLen);\n\n// execute the call\n      procin.execute();\n    }\n    catch (Exception e) {\n      throw new ConnectException(e);\n    }\n  }\n</code></pre>\n\n<p>This is based on the example in, chapter \"Accessing PL/SQL Associative Arrays\". <a href=\"https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179\" rel=\"nofollow noreferrer\">https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179</a> .</p>\n\n<p>The output / error text is below. I expected no error. What is the solution?</p>\n\n<pre><code>C:\\Ls\\java\\jdk1.8.0\\bin\\java.exe ...\nDriver Major version is 18\n\norg.apache.kafka.connect.errors.ConnectException: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n\n    at nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:230)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:185)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:181)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:128)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494)\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446)\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1052)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:537)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:255)\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:610)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:249)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:82)\n    at oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:924)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1136)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3640)\n    at oracle.jdbc.driver.T4CCallableStatement.executeInternal(T4CCallableStatement.java:1318)\n    at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3752)\n    at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4242)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1079)\n    at nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:227)\n    ... 51 more\nCaused by: Error : 6550, Position : 113, Sql = declare type t_indices is table of pls_integer index by pls_integer;\na_indices   t_indices;\nbegin\n  a_indices := :1 ;\nend;, OriginalSql = declare type t_indices is table of pls_integer index by pls_integer;\na_indices   t_indices;\nbegin\n  a_indices := ?;\nend;, Error Msg = ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)\n    ... 66 more\n\n\nProcess finished with exit code -1\n</code></pre>\n"},{"tags":["java","docker","gradle","apache-kafka"],"comments":[{"owner":{"account_id":6926363,"reputation":2155,"user_id":5317332,"display_name":"Alez"},"score":0,"creation_date":1684322563,"post_id":76271198,"comment_id":134500671,"body_markdown":"Can you try running without Docker? Do you have the same issue?","body":"Can you try running without Docker? Do you have the same issue?"},{"owner":{"account_id":6926363,"reputation":2155,"user_id":5317332,"display_name":"Alez"},"score":1,"creation_date":1684322630,"post_id":76271198,"comment_id":134500688,"body_markdown":"I don&#39;t understand why you&#39;re using `RUN bash -c &#39;touch /parallel.jar&#39;`. What are you aiming for?","body":"I don&#39;t understand why you&#39;re using <code>RUN bash -c &#39;touch &#47;parallel.jar&#39;</code>. What are you aiming for?"}],"answers":[{"comments":[{"owner":{"account_id":1889504,"reputation":2570,"user_id":1707976,"accept_rate":43,"display_name":"Dixit Singla"},"score":0,"creation_date":1684410628,"post_id":76274929,"comment_id":134515270,"body_markdown":"Thanks for the suggestion, I created a jar file using `shadowJar`. I am able to run the jar file in my system but when I try to run it in the container getting an error `Error: Unable to access jarfile parallel.jar io.confluent.developer.ParallelConsumerApplication`\ndocker last line is `ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar io.confluent.developer.ParallelConsumerApplication&quot;]`","body":"Thanks for the suggestion, I created a jar file using <code>shadowJar</code>. I am able to run the jar file in my system but when I try to run it in the container getting an error <code>Error: Unable to access jarfile parallel.jar io.confluent.developer.ParallelConsumerApplication</code> docker last line is <code>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar io.confluent.developer.ParallelConsumerApplication&quot;]</code>"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1684443165,"post_id":76274929,"comment_id":134522369,"body_markdown":"I think you meant `&quot;parallel.jar&quot;, &quot;...&quot;]` (separate arguments)? But also, `java -jar` command doesn&#39;t accept a classname , only a JAR file. Anything afterwards is passed as a plain string into `String[] args` of the JAR&#39;s own `MainClass`... Plus, you seem to have ignored my recommendation to use Jib and not write a Dockerfile at all","body":"I think you meant <code>&quot;parallel.jar&quot;, &quot;...&quot;]</code> (separate arguments)? But also, <code>java -jar</code> command doesn&#39;t accept a classname , only a JAR file. Anything afterwards is passed as a plain string into <code>String[] args</code> of the JAR&#39;s own <code>MainClass</code>... Plus, you seem to have ignored my recommendation to use Jib and not write a Dockerfile at all"},{"owner":{"account_id":1889504,"reputation":2570,"user_id":1707976,"accept_rate":43,"display_name":"Dixit Singla"},"score":0,"creation_date":1684476255,"post_id":76274929,"comment_id":134525693,"body_markdown":"I will be taking a look at the Jib as well. It&#39;s just that I was already using the ShadowJar to create the jar file so though of using it to create the docker image. In my local once the jar is created I run the jar by passing the class like this `java -cp build/libs/paralelConsumer.jar io.confluent.developer.ParallelConsumerApplication` where `io.confluent.developer.ParallelConsumerApplication` is the class which contains the main function if I don&#39;t mention the main class I get the error `no main manifest attribute`. So while creating the jar where can I mention about the main class","body":"I will be taking a look at the Jib as well. It&#39;s just that I was already using the ShadowJar to create the jar file so though of using it to create the docker image. In my local once the jar is created I run the jar by passing the class like this <code>java -cp build&#47;libs&#47;paralelConsumer.jar io.confluent.developer.ParallelConsumerApplication</code> where <code>io.confluent.developer.ParallelConsumerApplication</code> is the class which contains the main function if I don&#39;t mention the main class I get the error <code>no main manifest attribute</code>. So while creating the jar where can I mention about the main class"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1684498600,"post_id":76274929,"comment_id":134529863,"body_markdown":"The main class should be an option in the shadowJar config in your grade file. `java -cp` takes a class name, yes. `java -jar` does not","body":"The main class should be an option in the shadowJar config in your grade file. <code>java -cp</code> takes a class name, yes. <code>java -jar</code> does not"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684345964,"creation_date":1684345964,"answer_id":76274929,"question_id":76271198,"body_markdown":"Gradle doesn&#39;t include dependencies, by default. You&#39;d get the same error when running `java jar` outside of the container.\r\n\r\nYou need to use shadow plugin to get dependencies packaged in your JAR.  \r\n\r\nAlternatively, don&#39;t write a Dockerfile manually... Use `jib-gradle-plugin`. Plus, it&#39;ll create a more optimized Docker image, which doesn&#39;t create an Uber JAR like the shadow plugin would. ","title":"Error while running the docker image | JNI error","body":"<p>Gradle doesn't include dependencies, by default. You'd get the same error when running <code>java jar</code> outside of the container.</p>\n<p>You need to use shadow plugin to get dependencies packaged in your JAR.</p>\n<p>Alternatively, don't write a Dockerfile manually... Use <code>jib-gradle-plugin</code>. Plus, it'll create a more optimized Docker image, which doesn't create an Uber JAR like the shadow plugin would.</p>\n"}],"owner":{"account_id":1889504,"reputation":2570,"user_id":1707976,"accept_rate":43,"display_name":"Dixit Singla"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76274929,"answer_count":1,"score":0,"last_activity_date":1684345964,"creation_date":1684319994,"question_id":76271198,"body_markdown":"I am getting an error while running a docker image. I have created a core java application using gradle.\r\n\r\nusing `docker build` command to create the docker image and while running the docker image I am getting the following error\r\n\r\n    Error: A JNI error has occurred, please check your installation and try again\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/kafka/clients/consumer/Consumer\r\n            at java.lang.Class.getDeclaredMethods0(Native Method)\r\n            at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n            at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\r\n            at java.lang.Class.getMethod0(Class.java:3018)\r\n            at java.lang.Class.getMethod(Class.java:1784)\r\n            at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:650)\r\n            at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:632)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.kafka.clients.consumer.Consumer\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n            ... 7 more\r\n\r\nI can see that the error is due to missing kafka consumer library, but I am not able to understand what I have missed in the docker file which is causing this issue.\r\n\r\nHere is the dockerfile\r\n\r\n    FROM openjdk:8\r\n    ADD build/libs/*.jar parallel.jar\r\n    \r\n    RUN bash -c &#39;touch /parallel.jar&#39;\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar&quot;]\r\n\r\nBefore I ran the `docker build` command, I made sure to run the `gradle clean build` command.\r\n\r\nHere are the dependencies I have used in `build.gradle`\r\n\r\n        implementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4&quot;\r\n        implementation &quot;org.apache.avro:avro:1.11.1&quot;\r\n        implementation &quot;io.confluent:kafka-avro-serializer:3.3.0&quot;\r\n        implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\r\n        implementation &quot;org.codehaus.jackson:jackson-core-asl:1.9.13&quot;\r\n        implementation &quot;org.codehaus.jackson:jackson-mapper-asl:1.9.13&quot;\r\n        implementation &quot;org.apache.commons:commons-lang3:3.12.0&quot;\r\n        implementation &quot;org.slf4j:slf4j-simple:2.0.0&quot;\r\n        implementation &quot;me.tongfei:progressbar:0.9.3&quot;\r\n        implementation &#39;org.awaitility:awaitility:4.2.0&#39;\r\n        implementation(&quot;log4j:log4j:1.2.17&quot;)\r\n\r\n","title":"Error while running the docker image | JNI error","body":"<p>I am getting an error while running a docker image. I have created a core java application using gradle.</p>\n<p>using <code>docker build</code> command to create the docker image and while running the docker image I am getting the following error</p>\n<pre><code>Error: A JNI error has occurred, please check your installation and try again\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/kafka/clients/consumer/Consumer\n        at java.lang.Class.getDeclaredMethods0(Native Method)\n        at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n        at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\n        at java.lang.Class.getMethod0(Class.java:3018)\n        at java.lang.Class.getMethod(Class.java:1784)\n        at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:650)\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:632)\nCaused by: java.lang.ClassNotFoundException: org.apache.kafka.clients.consumer.Consumer\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 7 more\n</code></pre>\n<p>I can see that the error is due to missing kafka consumer library, but I am not able to understand what I have missed in the docker file which is causing this issue.</p>\n<p>Here is the dockerfile</p>\n<pre><code>FROM openjdk:8\nADD build/libs/*.jar parallel.jar\n\nRUN bash -c 'touch /parallel.jar'\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar&quot;]\n</code></pre>\n<p>Before I ran the <code>docker build</code> command, I made sure to run the <code>gradle clean build</code> command.</p>\n<p>Here are the dependencies I have used in <code>build.gradle</code></p>\n<pre><code>    implementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4&quot;\n    implementation &quot;org.apache.avro:avro:1.11.1&quot;\n    implementation &quot;io.confluent:kafka-avro-serializer:3.3.0&quot;\n    implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\n    implementation &quot;org.codehaus.jackson:jackson-core-asl:1.9.13&quot;\n    implementation &quot;org.codehaus.jackson:jackson-mapper-asl:1.9.13&quot;\n    implementation &quot;org.apache.commons:commons-lang3:3.12.0&quot;\n    implementation &quot;org.slf4j:slf4j-simple:2.0.0&quot;\n    implementation &quot;me.tongfei:progressbar:0.9.3&quot;\n    implementation 'org.awaitility:awaitility:4.2.0'\n    implementation(&quot;log4j:log4j:1.2.17&quot;)\n</code></pre>\n"},{"tags":["java","mysql","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"score":0,"creation_date":1684235641,"post_id":76262339,"comment_id":134485025,"body_markdown":"What queries does it fire ? Can you provide a bit more information ?","body":"What queries does it fire ? Can you provide a bit more information ?"},{"owner":{"account_id":3701688,"reputation":3357,"user_id":3081206,"display_name":"takendarkk"},"score":0,"creation_date":1684235779,"post_id":76262339,"comment_id":134485053,"body_markdown":"`userRepository.findById(userId)` should only execute 1 query - something like `SELECT * FROM table WHERE id = userId`.","body":"<code>userRepository.findById(userId)</code> should only execute 1 query - something like <code>SELECT * FROM table WHERE id = userId</code>."},{"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"score":0,"creation_date":1684235957,"post_id":76262339,"comment_id":134485089,"body_markdown":"please update question with query logs.","body":"please update question with query logs."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1684237444,"post_id":76262339,"comment_id":134485411,"body_markdown":"`findById` isn&#39;t the problem, your mapping is the problem and the fact that you are using `Lombok`. Don&#39;t use Lombok with entities that only results in trouble. Write your own proper equals/hashcode method as well as toString. THe one generated by Lombok is wrong for JPA usage. I would suggest you start with that and see if it improves, how to write a proper equals/hashCode for JPA can be found [here](https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/). If you want to use lombok only use `@Getter`/`@Setter` but not `@Data`.","body":"<code>findById</code> isn&#39;t the problem, your mapping is the problem and the fact that you are using <code>Lombok</code>. Don&#39;t use Lombok with entities that only results in trouble. Write your own proper equals/hashcode method as well as toString. THe one generated by Lombok is wrong for JPA usage. I would suggest you start with that and see if it improves, how to write a proper equals/hashCode for JPA can be found <a href=\"https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">here</a>. If you want to use lombok only use <code>@Getter</code>/<code>@Setter</code> but not <code>@Data</code>."},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1684257685,"post_id":76262339,"comment_id":134490932,"body_markdown":"Please provide the generated SQL and `SHOW CREATE TABLE`.","body":"Please provide the generated SQL and <code>SHOW CREATE TABLE</code>."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345909,"post_id":76262339,"comment_id":134506363,"body_markdown":"Please show the code that is using this (so the controller, service etc.).","body":"Please show the code that is using this (so the controller, service etc.)."}],"answers":[{"comments":[{"owner":{"account_id":28611909,"reputation":3,"user_id":21906718,"display_name":"Codephetamine"},"score":0,"creation_date":1684342201,"post_id":76262778,"comment_id":134505557,"body_markdown":"I have made the changes that you showed me but it is still firing so many queries when I try issueRepository.findById(issueId). Logs are like 2023-05-17T22:21:00.421+05:30 DEBUG 72248 --- [nio-8080-exec-3] org.hibernate.SQL                        : select i1_0.id,i1_0.community_id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,i1_0.user_id from issue i1_0\norg.hibernate.SQL                       : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=? so many more","body":"I have made the changes that you showed me but it is still firing so many queries when I try issueRepository.findById(issueId). Logs are like 2023-05-17T22:21:00.421+05:30 DEBUG 72248 --- [nio-8080-exec-3] org.hibernate.SQL                        : select i1_0.id,i1_0.community_id,i1_0.date_created,i1_0.description&zwnj;&#8203;,i1_0.is_open,i1_0.t&zwnj;&#8203;itle,i1_0.user_id from issue i1_0 org.hibernate.SQL                       : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.passw&zwnj;&#8203;ord,u1_0.role from user u1_0 where u1_0.id=? so many more"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345819,"post_id":76262778,"comment_id":134506330,"body_markdown":"Did you also include the `toString` and did it for all entities? Make sure you aren&#39;t logging the entities if you haven&#39; overridden the `toString`. That being said if you are using this `User` directly in your controller it will serialize all the fields and thus lazy load all the other fields as well. Finally I would probably remove all the not needed collections from the user, or at least make them uni-directional (so remove them from the `User`) instead of bi-directional. Why would the user need to access the comments, issues etc. etc. directly, you can query them if needed!","body":"Did you also include the <code>toString</code> and did it for all entities? Make sure you aren&#39;t logging the entities if you haven&#39; overridden the <code>toString</code>. That being said if you are using this <code>User</code> directly in your controller it will serialize all the fields and thus lazy load all the other fields as well. Finally I would probably remove all the not needed collections from the user, or at least make them uni-directional (so remove them from the <code>User</code>) instead of bi-directional. Why would the user need to access the comments, issues etc. etc. directly, you can query them if needed!"}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684345689,"creation_date":1684238253,"answer_id":76262778,"question_id":76262339,"body_markdown":"First stop using `@Data` (or better Lombok all together) with JPA entities. When using `@Data` it will generate an `equals`/`hashCode`/`toString` method including all collections (which are lazy) in your entity. (I wrote [a blog][1] about it about 4 years ago and yet we still haven&#39;t learned). \r\n\r\nThose `hashCode` and `equals` method are important as those are used to determine if an object is already in the cache or not. Now to calculate the `hashCode` what do you think will happen.... Exactly queries, queries and some more queries. \r\n\r\nI would suggest to create a `BaseEntity` which include a regular `hashCode`, `equals` and basic `toString` method. Then let all your entities extend this base class. \r\n\r\nNext replace the `@Data` with only `@Getter`/`@Setter` to generate the getters/setters. \r\n\r\n```java\r\n@MappedSuperclass\r\n@Getter\r\npublic abstract BaseEntity {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.AUTO)\r\n  private Long id;\r\n\r\n  @Override\r\n  public int hashCode() {\r\n    return getClass().hashCode();\r\n  }\r\n  \r\n  @Override\r\n  public boolean equals(Object o) {\r\n    if (this == o) return true;\r\n \r\n    if (getClass().isInstance(o) &amp;&amp; o instanceof BaseEntity other) {\r\n      return this.id != null &amp;&amp; Objects.equals(this.id, other.id);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n  public String toString() {\r\n    return String.format(&quot;%s [id=%d]&quot;, getClass().getSimpleName(), this.id);\r\n  }  \r\n}\r\n```\r\n\r\nNow for example let your `Comment` class extend this and drop the usage of `@Data`. \r\n\r\n```\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name = &quot;comment&quot;)\r\npublic class Comment extends BaseEntity {\r\n\r\n    private String content;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;issue_id&quot;)\r\n    private Issue issue;\r\n\r\n    private LocalDate dateCreated;\r\n}\r\n```\r\n\r\nThis should already reduce the number of queries that are being issued. Another optimization you could do is to use bytecode enhancements to lazy load the `Issue` in the `Comment` (the sample ofcourse applies to other fields that can be lazy loaded). But this requires bytecode enhancements.\r\n\r\n[1]: https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/","title":"Too many queries problem with JPA using Mysql","body":"<p>First stop using <code>@Data</code> (or better Lombok all together) with JPA entities. When using <code>@Data</code> it will generate an <code>equals</code>/<code>hashCode</code>/<code>toString</code> method including all collections (which are lazy) in your entity. (I wrote <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">a blog</a> about it about 4 years ago and yet we still haven't learned).</p>\n<p>Those <code>hashCode</code> and <code>equals</code> method are important as those are used to determine if an object is already in the cache or not. Now to calculate the <code>hashCode</code> what do you think will happen.... Exactly queries, queries and some more queries.</p>\n<p>I would suggest to create a <code>BaseEntity</code> which include a regular <code>hashCode</code>, <code>equals</code> and basic <code>toString</code> method. Then let all your entities extend this base class.</p>\n<p>Next replace the <code>@Data</code> with only <code>@Getter</code>/<code>@Setter</code> to generate the getters/setters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\n@Getter\npublic abstract BaseEntity {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  private Long id;\n\n  @Override\n  public int hashCode() {\n    return getClass().hashCode();\n  }\n  \n  @Override\n  public boolean equals(Object o) {\n    if (this == o) return true;\n \n    if (getClass().isInstance(o) &amp;&amp; o instanceof BaseEntity other) {\n      return this.id != null &amp;&amp; Objects.equals(this.id, other.id);\n    }\n    return false;\n  }\n\n  @Override\n  public String toString() {\n    return String.format(&quot;%s [id=%d]&quot;, getClass().getSimpleName(), this.id);\n  }  \n}\n</code></pre>\n<p>Now for example let your <code>Comment</code> class extend this and drop the usage of <code>@Data</code>.</p>\n<pre><code>@AllArgsConstructor\n@Getter\n@Setter\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;comment&quot;)\npublic class Comment extends BaseEntity {\n\n    private String content;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;issue_id&quot;)\n    private Issue issue;\n\n    private LocalDate dateCreated;\n}\n</code></pre>\n<p>This should already reduce the number of queries that are being issued. Another optimization you could do is to use bytecode enhancements to lazy load the <code>Issue</code> in the <code>Comment</code> (the sample ofcourse applies to other fields that can be lazy loaded). But this requires bytecode enhancements.</p>\n"}],"owner":{"account_id":28611909,"reputation":3,"user_id":21906718,"display_name":"Codephetamine"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76262778,"answer_count":1,"score":0,"last_activity_date":1684345689,"creation_date":1684235441,"question_id":76262339,"body_markdown":"I am developing REST application using spring boot and I am trying to optimize the performance of the queries. I am currently using findById from the repositories which is causing performance issues. Code is given below:\r\n\r\nUser Entity\r\n\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Data\r\n@Builder\r\n@Entity\r\n@Table(name=&quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;email&quot;))\r\n@JsonIgnoreProperties({&quot;comments&quot;})\r\npublic class User implements UserDetails {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @NotEmpty(message = &quot;first name should not be empty&quot;)\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n\r\n    @NotEmpty(message = &quot;last name should not be empty&quot;)\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    @Email(message = &quot;Not a valid email&quot;)\r\n    private String email;\r\n\r\n    @NotEmpty\r\n//    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$@!%&amp;*?])[A-Za-z\\\\d#$@!%&amp;*?]{8,}$&quot;,\r\n//            message =&quot;1 Uppercase, 1 Lowercase, 1 special character, 1 number, Min 8 characters &quot;)\r\n    @Size(min = 8, message = &quot;password should have at least 8 characters&quot;)\r\n    private String password;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private Role role;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;,\r\n            cascade = CascadeType.ALL)\r\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;assignees&quot;)\r\n    private Set&lt;Issue&gt; issues = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;voters&quot;)\r\n    private Set&lt;Issue&gt; votedIssues = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;members&quot;)\r\n    private Set&lt;Community&gt; communities = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;requestingMembers&quot;)\r\n    private Set&lt;Community&gt; requestedCommunities = new HashSet&lt;&gt;();\r\n\r\n    @OneToMany(mappedBy = &quot;admin&quot;, cascade = CascadeType.ALL)\r\n    private Set&lt;Community&gt; communitiesCreated = new HashSet&lt;&gt;();\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return List.of(new SimpleGrantedAuthority(role.name()));\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nIssue Entity\r\n\r\n```\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name=&quot;issue&quot;)\r\npublic class Issue {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String title;\r\n    private String description;\r\n    private LocalDate dateCreated;\r\n    private boolean isOpen;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @OneToMany(mappedBy = &quot;issue&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    private List&lt;User&gt; voters = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    private List&lt;User&gt; assignees = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;community_id&quot;)\r\n    private Community community;\r\n\r\n}\r\n```\r\n\r\n\r\nComment Entity\r\n```\r\n\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name = &quot;comment&quot;)\r\npublic class Comment {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String content;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;issue_id&quot;)\r\n    private Issue issue;\r\n\r\n    private LocalDate dateCreated;\r\n}\r\n```\r\n\r\n\r\nRole Enum\r\n\r\n```\r\npublic enum Role {\r\n    CUSTOMER(&quot;CUSTOMER&quot;),\r\n    EXPERT(&quot;EXPERT&quot;),\r\n    ADMIN(&quot;ADMIN&quot;);\r\n\r\n    private String role;\r\n\r\n    Role(String role) {\r\n        this.role = role;\r\n    }\r\n\r\n    public String getRoleName() {\r\n        return role;\r\n    }\r\n}\r\n```\r\n\r\nWhen I do a userRepository.findById(userId) there are so many select queries being fired. I am looking for a way to optimize the queries so that findById produces result in less queries. Currenlty it is making so many queries just for one api request for example :\r\n\r\n    2023-05-16T16:21:48.837+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=?\r\n    2023-05-16T16:21:48.911+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.921+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.927+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.930+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.932+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.933+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.936+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.937+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\r\n    2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.940+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.941+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.942+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.943+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.944+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\r\n    2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.946+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.community_id,i1_0.id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue i1_0 left join user u1_0 on u1_0.id=i1_0.user_id where i1_0.community_id=?\r\n    2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.948+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.949+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.950+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.952+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=? \r\n\r\n**I am expecting just one or two select queries.**\r\n","title":"Too many queries problem with JPA using Mysql","body":"<p>I am developing REST application using spring boot and I am trying to optimize the performance of the queries. I am currently using findById from the repositories which is causing performance issues. Code is given below:</p>\n<p>User Entity</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@Builder\n@Entity\n@Table(name=&quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;email&quot;))\n@JsonIgnoreProperties({&quot;comments&quot;})\npublic class User implements UserDetails {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @NotEmpty(message = &quot;first name should not be empty&quot;)\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @NotEmpty(message = &quot;last name should not be empty&quot;)\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n\n    @Email(message = &quot;Not a valid email&quot;)\n    private String email;\n\n    @NotEmpty\n//    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$@!%&amp;*?])[A-Za-z\\\\d#$@!%&amp;*?]{8,}$&quot;,\n//            message =&quot;1 Uppercase, 1 Lowercase, 1 special character, 1 number, Min 8 characters &quot;)\n    @Size(min = 8, message = &quot;password should have at least 8 characters&quot;)\n    private String password;\n\n    @Enumerated(EnumType.STRING)\n    private Role role;\n\n    @OneToMany(mappedBy = &quot;user&quot;,\n            cascade = CascadeType.ALL)\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;assignees&quot;)\n    private Set&lt;Issue&gt; issues = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;voters&quot;)\n    private Set&lt;Issue&gt; votedIssues = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;members&quot;)\n    private Set&lt;Community&gt; communities = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;requestingMembers&quot;)\n    private Set&lt;Community&gt; requestedCommunities = new HashSet&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;admin&quot;, cascade = CascadeType.ALL)\n    private Set&lt;Community&gt; communitiesCreated = new HashSet&lt;&gt;();\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return List.of(new SimpleGrantedAuthority(role.name()));\n    }\n\n    @Override\n    public String getUsername() {\n        return email;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n<p>Issue Entity</p>\n<pre><code>@AllArgsConstructor\n@Data\n@Entity\n@NoArgsConstructor\n@Table(name=&quot;issue&quot;)\npublic class Issue {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String title;\n    private String description;\n    private LocalDate dateCreated;\n    private boolean isOpen;\n\n    @ManyToOne\n    private User user;\n\n    @OneToMany(mappedBy = &quot;issue&quot;, cascade = CascadeType.ALL)\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;User&gt; voters = new ArrayList&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;User&gt; assignees = new ArrayList&lt;&gt;();\n\n    @ManyToOne\n    @JoinColumn(name = &quot;community_id&quot;)\n    private Community community;\n\n}\n</code></pre>\n<p>Comment Entity</p>\n<pre><code>\n@AllArgsConstructor\n@Data\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;comment&quot;)\npublic class Comment {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String content;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;issue_id&quot;)\n    private Issue issue;\n\n    private LocalDate dateCreated;\n}\n</code></pre>\n<p>Role Enum</p>\n<pre><code>public enum Role {\n    CUSTOMER(&quot;CUSTOMER&quot;),\n    EXPERT(&quot;EXPERT&quot;),\n    ADMIN(&quot;ADMIN&quot;);\n\n    private String role;\n\n    Role(String role) {\n        this.role = role;\n    }\n\n    public String getRoleName() {\n        return role;\n    }\n}\n</code></pre>\n<p>When I do a userRepository.findById(userId) there are so many select queries being fired. I am looking for a way to optimize the queries so that findById produces result in less queries. Currenlty it is making so many queries just for one api request for example :</p>\n<pre><code>2023-05-16T16:21:48.837+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=?\n2023-05-16T16:21:48.911+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.921+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.927+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.930+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.932+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.933+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.936+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.937+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\n2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.940+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.941+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.942+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.943+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.944+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\n2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.946+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.community_id,i1_0.id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue i1_0 left join user u1_0 on u1_0.id=i1_0.user_id where i1_0.community_id=?\n2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.948+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.949+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.950+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.952+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=? \n</code></pre>\n<p><strong>I am expecting just one or two select queries.</strong></p>\n"},{"tags":["java","minecraft-fabric"],"answers":[{"comments":[{"owner":{"account_id":17747824,"reputation":15,"user_id":12886716,"display_name":"Captain"},"score":0,"creation_date":1684508282,"post_id":76274875,"comment_id":134532059,"body_markdown":"Ah got it, thanks a bunch! Sadly cannot give you any points for the answer, so this will suffice and I will focus on that when programming :D","body":"Ah got it, thanks a bunch! Sadly cannot give you any points for the answer, so this will suffice and I will focus on that when programming :D"}],"tags":[],"owner":{"account_id":37136,"reputation":57822,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684345514,"creation_date":1684345514,"answer_id":76274875,"question_id":76138601,"body_markdown":"You can&#39;t make a 2-block-tall block. You have to make two separate blocks or block states - one for the top and one for the bottom.\r\n\r\nFor example, the game only calls your block&#39;s `canReplace` function when *your block* is replaced. It doesn&#39;t call it if the player replaces the air block on top of your block because that&#39;s not your block. So you have to put one of your blocks in that spot and not try to pretend there&#39;s one when there isn&#39;t.\r\n\r\nYour block has a GUI, so it probably has a bunch of tile entity data. You will find it convenient to pick one half (e.g. the bottom) to store the data, and make the top one be a completely boring block that, when you right-click it, acts like you right-clicked the bottom one instead. And if one half sees that the other half is missing, it breaks.","title":"2-Tall Minecraft Block with same interaction on both Blocks","body":"<p>You can't make a 2-block-tall block. You have to make two separate blocks or block states - one for the top and one for the bottom.</p>\n<p>For example, the game only calls your block's <code>canReplace</code> function when <em>your block</em> is replaced. It doesn't call it if the player replaces the air block on top of your block because that's not your block. So you have to put one of your blocks in that spot and not try to pretend there's one when there isn't.</p>\n<p>Your block has a GUI, so it probably has a bunch of tile entity data. You will find it convenient to pick one half (e.g. the bottom) to store the data, and make the top one be a completely boring block that, when you right-click it, acts like you right-clicked the bottom one instead. And if one half sees that the other half is missing, it breaks.</p>\n"}],"owner":{"account_id":17747824,"reputation":15,"user_id":12886716,"display_name":"Captain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76274875,"answer_count":1,"score":1,"last_activity_date":1684345514,"creation_date":1682805032,"question_id":76138601,"body_markdown":"Thank you for any help in advance and sorry if this way to simple.\r\n\r\nVersioning: MC 1.19.3, Fabric\r\nJSON is either a singular one for 2 Tall Block or a Top and Bottom Half\r\n\r\nSo i want to create a GUI displaying Block, which is 2 Blocks tall. I got the Collision working, but it&#39;s still rendering only and not interactable/eats Blocks when placed from above.\r\n\r\nI have read about Custom Entities and or Tiling (Like with doors), but nothing for something simple like my issue. \r\n\r\nMy current working Class looks as follows and works for the bottom Block. I am using the singular JSON currently.\r\n\r\n\r\n```\r\npublic class VendingMachineBlock extends Block {\r\n    private static final VoxelShape SHAPE = Block.createCuboidShape(0, 0, 0, 16, 32, 16);\r\n\r\n    public VendingMachineBlock() {\r\n        super(Settings.of(Material.METAL)\r\n                .nonOpaque()\r\n                .strength(4.0f)\r\n                .requiresTool()\r\n                .sounds(BlockSoundGroup.METAL)\r\n        );\r\n    }\r\n\r\n    public VoxelShape getOutlineShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\r\n        return SHAPE;\r\n    }\r\n\r\n    public VoxelShape getCollisionShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\r\n        return SHAPE;\r\n    }\r\n\r\n    @Override\r\n    public boolean canReplace(BlockState state, ItemPlacementContext context) {\r\n        BlockPos pos = context.getBlockPos();\r\n        if (context.getWorld().getBlockState(pos.down()).isOf(this)) {\r\n            // Prevent block placement in the top part of the VendingMachineBlock\r\n            return false;\r\n        }\r\n        return super.canReplace(state, context);\r\n    }\r\n\r\n    @Override\r\n    public ActionResult onUse(BlockState state, World world, BlockPos pos, PlayerEntity player, Hand hand, BlockHitResult hit) {\r\n        double relativeHitY = hit.getPos().y - pos.getY();\r\n        if (relativeHitY &gt; 0.5 || relativeHitY &lt; 0) {\r\n            // Player is interacting with the top or bottom part of the VendingMachineBlock\r\n            if (!world.isClient) {\r\n                player.sendMessage(Text.of(&quot;Hello, world!&quot;), false);\r\n            }\r\n            return ActionResult.SUCCESS;\r\n        }\r\n        return super.onUse(state, world, pos, player, hand, hit);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI have looked at various videos and even asked Bing AI to find resources for me, but neither the official Docs nor the videos have shown a solution for this &quot;simple&quot; issue. Most of what i have found were dynamic animations of floating blocks above, or far outdated stuff.\r\n\r\nThanks again for reading and sorry if i am just unknowledged. Just trying to get startet with Java and MC Modding again.\r\n\r\nAll the best,\r\nCap","title":"2-Tall Minecraft Block with same interaction on both Blocks","body":"<p>Thank you for any help in advance and sorry if this way to simple.</p>\n<p>Versioning: MC 1.19.3, Fabric\nJSON is either a singular one for 2 Tall Block or a Top and Bottom Half</p>\n<p>So i want to create a GUI displaying Block, which is 2 Blocks tall. I got the Collision working, but it's still rendering only and not interactable/eats Blocks when placed from above.</p>\n<p>I have read about Custom Entities and or Tiling (Like with doors), but nothing for something simple like my issue.</p>\n<p>My current working Class looks as follows and works for the bottom Block. I am using the singular JSON currently.</p>\n<pre><code>public class VendingMachineBlock extends Block {\n    private static final VoxelShape SHAPE = Block.createCuboidShape(0, 0, 0, 16, 32, 16);\n\n    public VendingMachineBlock() {\n        super(Settings.of(Material.METAL)\n                .nonOpaque()\n                .strength(4.0f)\n                .requiresTool()\n                .sounds(BlockSoundGroup.METAL)\n        );\n    }\n\n    public VoxelShape getOutlineShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\n        return SHAPE;\n    }\n\n    public VoxelShape getCollisionShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\n        return SHAPE;\n    }\n\n    @Override\n    public boolean canReplace(BlockState state, ItemPlacementContext context) {\n        BlockPos pos = context.getBlockPos();\n        if (context.getWorld().getBlockState(pos.down()).isOf(this)) {\n            // Prevent block placement in the top part of the VendingMachineBlock\n            return false;\n        }\n        return super.canReplace(state, context);\n    }\n\n    @Override\n    public ActionResult onUse(BlockState state, World world, BlockPos pos, PlayerEntity player, Hand hand, BlockHitResult hit) {\n        double relativeHitY = hit.getPos().y - pos.getY();\n        if (relativeHitY &gt; 0.5 || relativeHitY &lt; 0) {\n            // Player is interacting with the top or bottom part of the VendingMachineBlock\n            if (!world.isClient) {\n                player.sendMessage(Text.of(&quot;Hello, world!&quot;), false);\n            }\n            return ActionResult.SUCCESS;\n        }\n        return super.onUse(state, world, pos, player, hand, hit);\n    }\n}\n</code></pre>\n<p>I have looked at various videos and even asked Bing AI to find resources for me, but neither the official Docs nor the videos have shown a solution for this &quot;simple&quot; issue. Most of what i have found were dynamic animations of floating blocks above, or far outdated stuff.</p>\n<p>Thanks again for reading and sorry if i am just unknowledged. Just trying to get startet with Java and MC Modding again.</p>\n<p>All the best,\nCap</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"score":0,"creation_date":1649570209,"post_id":71813844,"comment_id":126906088,"body_markdown":"why you insert `XHeaderAuthenticationFilter` one time using `FilterRegistrationBean` and another time using `addFilterBefore`?","body":"why you insert <code>XHeaderAuthenticationFilter</code> one time using <code>FilterRegistrationBean</code> and another time using <code>addFilterBefore</code>?"},{"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"score":0,"creation_date":1649570443,"post_id":71813844,"comment_id":126906118,"body_markdown":"@hatefalipoor I&#39;ve included the beans. I have added using FilterRegistrationBean because the filter was getting called multiple times.","body":"@hatefalipoor I&#39;ve included the beans. I have added using FilterRegistrationBean because the filter was getting called multiple times."}],"answers":[{"tags":[],"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649571126,"creation_date":1649570793,"answer_id":71814175,"question_id":71813844,"body_markdown":"The way you register `XHeaderAuthenticationFilter` in `FilterRegistrationBean` causes the problem because you yourself create the `XHeaderAuthenticationFilter` with `new` not `Spring` with all resolving DI stuff. change your code like:\r\n\r\n    @Autowired\r\n    XHeaderAuthenticationFilter xHeaderAuthenticationFilter;\r\n    \r\n    @Bean\r\n    public FilterRegistrationBean filterRegistrationBean() {\r\n    \tFilterRegistrationBean registrationBean = new FilterRegistrationBean();\r\n    \tregistrationBean.setFilter(xHeaderAuthenticationFilter);\r\n    \treturn registrationBean;\r\n    }\r\n\r\nSame applies if you want to register `XHeaderAuthenticationFilter` using `addFilterBefore`","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>The way you register <code>XHeaderAuthenticationFilter</code> in <code>FilterRegistrationBean</code> causes the problem because you yourself create the <code>XHeaderAuthenticationFilter</code> with <code>new</code> not <code>Spring</code> with all resolving DI stuff. change your code like:</p>\n<pre><code>@Autowired\nXHeaderAuthenticationFilter xHeaderAuthenticationFilter;\n\n@Bean\npublic FilterRegistrationBean filterRegistrationBean() {\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(xHeaderAuthenticationFilter);\n    return registrationBean;\n}\n</code></pre>\n<p>Same applies if you want to register <code>XHeaderAuthenticationFilter</code> using <code>addFilterBefore</code></p>\n"},{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345999,"post_id":76274861,"comment_id":134506387,"body_markdown":"If you want to do injection they need to be a bean, there is one thing you need to take care of (and this is mentioned in the documentation as well, but who reads that) that you need a `FilterRegistrationBean` if you use this only in your security filter chain.","body":"If you want to do injection they need to be a bean, there is one thing you need to take care of (and this is mentioned in the documentation as well, but who reads that) that you need a <code>FilterRegistrationBean</code> if you use this only in your security filter chain."},{"owner":{"account_id":18253860,"reputation":418,"user_id":13288265,"display_name":"jksevend"},"score":0,"creation_date":1684346957,"post_id":76274861,"comment_id":134506572,"body_markdown":"ahh so you would define a filterregistrationbean and add filters there, map them to urls without needing to call addFilter in the filterchain?","body":"ahh so you would define a filterregistrationbean and add filters there, map them to urls without needing to call addFilter in the filterchain?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1684347781,"post_id":76274861,"comment_id":134506731,"body_markdown":"No. You would disable them with the `FilterRegistationBean` so that they don&#39;t get added to the regular filter chain. It is just the other way around.","body":"No. You would disable them with the <code>FilterRegistationBean</code> so that they don&#39;t get added to the regular filter chain. It is just the other way around."}],"tags":[],"owner":{"account_id":18253860,"reputation":418,"user_id":13288265,"display_name":"jksevend"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684345454,"creation_date":1684345454,"answer_id":76274861,"question_id":71813844,"body_markdown":"I don&#39;t know whether this will be relevant to you but I would avoid making your onceperrequest filters a bean. \r\n\r\nWe had a problem which took us one week to figure out that for multiple security configurations which are mapped to specific antMatchers, adding a bean filter to one security chain would also trigger the filter in another security chain. Even with with the addFilter line commented! We never called addFilter in our code yet this filter was still picked up.","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>I don't know whether this will be relevant to you but I would avoid making your onceperrequest filters a bean.</p>\n<p>We had a problem which took us one week to figure out that for multiple security configurations which are mapped to specific antMatchers, adding a bean filter to one security chain would also trigger the filter in another security chain. Even with with the addFilter line commented! We never called addFilter in our code yet this filter was still picked up.</p>\n"}],"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1403,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":71814175,"answer_count":2,"score":2,"last_activity_date":1684345454,"creation_date":1649566262,"question_id":71813844,"body_markdown":"I&#39;m not being able to inject beans into my `OncePerRequestFilter`. Here&#39;s the `XHeaderAuthenticationFilter`:\r\n```java\r\n\r\n@Component\r\npublic class XHeaderAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n  public XHeaderAuthenticationFilter() {\r\n    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\r\n  }\r\n\r\n  @Autowired private JwtUtils jwtUtils; // null\r\n  @Autowired private UserService userService; // null\r\n\r\n  @Override\r\n  @SneakyThrows\r\n  protected void doFilterInternal(\r\n      HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\r\n\r\n    String path = request.getRequestURI();\r\n    if (new AntPathMatcher().match(&quot;/getToken&quot;, path)\r\n        || HttpMethod.OPTIONS.name().equalsIgnoreCase(request.getMethod())) {\r\n      filterChain.doFilter(request, response);\r\n      return;\r\n    }\r\n\r\n    String jwt = parseJwt(request);\r\n    jwtUtils.validateJwtToken(jwt); // NullPointerException here\r\n\r\n    // ...\r\n\r\n    filterChain.doFilter(request, response);\r\n  }\r\n}\r\n\r\n```\r\nAnd here the registration part:\r\n```java\r\n  @Bean\r\n  public FilterRegistrationBean filterRegistrationBean() {\r\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\r\n    registrationBean.setFilter(new XHeaderAuthenticationFilter());\r\n    registrationBean.setEnabled(false);\r\n    return registrationBean;\r\n  }\r\n```\r\nI set `enabled` to false as the filter was getting called multiple times. I&#39;m new to SpringSecurity and need much exposure to the concept. I also want to add the configuration part just in case I did something wrong there:\r\n```java\r\n  @Override\r\n  protected void configure(HttpSecurity http) throws Exception {\r\n    http.cors()\r\n        .and()\r\n        .csrf()\r\n        .disable()\r\n        .sessionManagement()\r\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n        .and()\r\n        .authorizeRequests()\r\n        .antMatchers(&quot;/getToken&quot;)\r\n        .permitAll()\r\n        .anyRequest()\r\n        .authenticated()\r\n        .and()\r\n        .exceptionHandling()\r\n        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\r\n        .and()\r\n        .addFilterBefore(\r\n            new XHeaderAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n  }\r\n```\r\n\r\nThere are a lot of fixes for this issue but none worked for me. I don&#39;t know where I&#39;m going wrong.\r\n\r\n## Update 1 ##\r\n\r\nIncluding JwtUtils:\r\n```java\r\n@Component\r\npublic class JwtUtils {\r\n\r\n  @Value(&quot;${security.jwtSecret}&quot;)\r\n  private String jwtSecret;\r\n\r\n  @Value(&quot;${security.jwtExpirationMs}&quot;)\r\n  private int jwtExpirationMs;\r\n\r\n  public String getJWTToken(String username) {}\r\n\r\n  public boolean validateJwtToken(String authToken) {}\r\n\r\n  public Claims getAllClaimsFromToken(String token) {}\r\n}\r\n\r\n```\r\nand UserService:\r\n```java\r\n@Service\r\npublic class UserServiceImpl implements UserService {\r\n\r\n  @Autowired private UserRepository userRepository;\r\n\r\n  @Override\r\n  public User saveUser(UserModel userModel) {}\r\n\r\n  @Override\r\n  public UserModel findUserByEmail(String email) {}\r\n\r\n  @Override\r\n  public UserListViewResponse findAllUsers(Specification&lt;User&gt; userSpecification, Pageable paging) {}\r\n\r\n  @Override\r\n  public UserModel deleteUser(String email) {}\r\n\r\n  private UserListViewResponse populateUserListViewResponse(Page&lt;User&gt; pagedResult) {}\r\n\r\n  private List&lt;User&gt; filterAdmins(List&lt;User&gt; userEntityList) {}\r\n```","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>I'm not being able to inject beans into my <code>OncePerRequestFilter</code>. Here's the <code>XHeaderAuthenticationFilter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Component\npublic class XHeaderAuthenticationFilter extends OncePerRequestFilter {\n\n  public XHeaderAuthenticationFilter() {\n    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n  }\n\n  @Autowired private JwtUtils jwtUtils; // null\n  @Autowired private UserService userService; // null\n\n  @Override\n  @SneakyThrows\n  protected void doFilterInternal(\n      HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\n\n    String path = request.getRequestURI();\n    if (new AntPathMatcher().match(&quot;/getToken&quot;, path)\n        || HttpMethod.OPTIONS.name().equalsIgnoreCase(request.getMethod())) {\n      filterChain.doFilter(request, response);\n      return;\n    }\n\n    String jwt = parseJwt(request);\n    jwtUtils.validateJwtToken(jwt); // NullPointerException here\n\n    // ...\n\n    filterChain.doFilter(request, response);\n  }\n}\n\n</code></pre>\n<p>And here the registration part:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Bean\n  public FilterRegistrationBean filterRegistrationBean() {\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(new XHeaderAuthenticationFilter());\n    registrationBean.setEnabled(false);\n    return registrationBean;\n  }\n</code></pre>\n<p>I set <code>enabled</code> to false as the filter was getting called multiple times. I'm new to SpringSecurity and need much exposure to the concept. I also want to add the configuration part just in case I did something wrong there:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n    http.cors()\n        .and()\n        .csrf()\n        .disable()\n        .sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .authorizeRequests()\n        .antMatchers(&quot;/getToken&quot;)\n        .permitAll()\n        .anyRequest()\n        .authenticated()\n        .and()\n        .exceptionHandling()\n        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\n        .and()\n        .addFilterBefore(\n            new XHeaderAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n  }\n</code></pre>\n<p>There are a lot of fixes for this issue but none worked for me. I don't know where I'm going wrong.</p>\n<h2>Update 1</h2>\n<p>Including JwtUtils:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtUtils {\n\n  @Value(&quot;${security.jwtSecret}&quot;)\n  private String jwtSecret;\n\n  @Value(&quot;${security.jwtExpirationMs}&quot;)\n  private int jwtExpirationMs;\n\n  public String getJWTToken(String username) {}\n\n  public boolean validateJwtToken(String authToken) {}\n\n  public Claims getAllClaimsFromToken(String token) {}\n}\n\n</code></pre>\n<p>and UserService:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class UserServiceImpl implements UserService {\n\n  @Autowired private UserRepository userRepository;\n\n  @Override\n  public User saveUser(UserModel userModel) {}\n\n  @Override\n  public UserModel findUserByEmail(String email) {}\n\n  @Override\n  public UserListViewResponse findAllUsers(Specification&lt;User&gt; userSpecification, Pageable paging) {}\n\n  @Override\n  public UserModel deleteUser(String email) {}\n\n  private UserListViewResponse populateUserListViewResponse(Page&lt;User&gt; pagedResult) {}\n\n  private List&lt;User&gt; filterAdmins(List&lt;User&gt; userEntityList) {}\n</code></pre>\n"},{"tags":["java","math","angle","trigonometry"],"comments":[{"owner":{"account_id":973998,"reputation":138710,"user_id":995876,"display_name":"Esailija"},"score":3,"creation_date":1351340859,"post_id":13100144,"comment_id":17804599,"body_markdown":"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html","body":"<a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"},{"owner":{"account_id":1867252,"reputation":1795,"user_id":1690481,"accept_rate":93,"display_name":"Nitesh Verma"},"score":1,"creation_date":1375440619,"post_id":13100144,"comment_id":26345887,"body_markdown":"System.out.println(Math.round(Math.cos(Math.toRadians(90)));","body":"System.out.println(Math.round(Math.cos(Math.toRadians(90)));"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1684439488,"post_id":13100144,"comment_id":134521727,"body_markdown":"I’m voting to close this question because this is how floating point arithmetic works.  https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html","body":"I’m voting to close this question because this is how floating point arithmetic works.  <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"}],"answers":[{"comments":[{"owner":{"account_id":408372,"reputation":8732,"user_id":778990,"display_name":"ignis"},"score":2,"creation_date":1351341007,"post_id":13100168,"comment_id":17804626,"body_markdown":"That&#39;s the expected IEEE 574 floating point behavior, I wouldn&#39;t call it an &#39;&#39;issue&#39;&#39;. See Esailija&#39;s comment.","body":"That&#39;s the expected IEEE 574 floating point behavior, I wouldn&#39;t call it an &#39;&#39;issue&#39;&#39;. See Esailija&#39;s comment."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1351341197,"post_id":13100168,"comment_id":17804668,"body_markdown":"@ignis The value of Math.cos() is required to be within 1ulp of the correct result. No amount of Goldberg can explain that away.","body":"@ignis The value of Math.cos() is required to be within 1ulp of the correct result. No amount of Goldberg can explain that away."},{"owner":{"display_name":"user85109"},"score":1,"creation_date":1351343266,"post_id":13100168,"comment_id":17805087,"body_markdown":"While I did not vote down your answer, I think the downvote comes from how you stated it. By implying this is an &quot;issue&quot;, a loss of precision, as opposed to the expected result working with floating point arithmetic, you confuse things.","body":"While I did not vote down your answer, I think the downvote comes from how you stated it. By implying this is an &quot;issue&quot;, a loss of precision, as opposed to the expected result working with floating point arithmetic, you confuse things."},{"owner":{"account_id":633608,"reputation":32281,"user_id":391554,"accept_rate":93,"display_name":"Dan D."},"score":0,"creation_date":1351343500,"post_id":13100168,"comment_id":17805131,"body_markdown":"OK, it&#39;s not an issue, I removed the word and explained it a little bit differently.","body":"OK, it&#39;s not an issue, I removed the word and explained it a little bit differently."}],"tags":[],"owner":{"account_id":633608,"reputation":32281,"user_id":391554,"accept_rate":93,"display_name":"Dan D."},"comment_count":4,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1351343440,"creation_date":1351340818,"answer_id":13100168,"question_id":13100144,"body_markdown":"The value is very close to the correct result. It seems like a loss of precision in the floating point operations of transforming degrees to radians.\r\n","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>The value is very close to the correct result. It seems like a loss of precision in the floating point operations of transforming degrees to radians.</p>\n"},{"comments":[{"owner":{"account_id":1900362,"reputation":19274,"user_id":1716339,"display_name":"Aki Suihkonen"},"score":0,"creation_date":1351341033,"post_id":13100182,"comment_id":17804629,"body_markdown":"cos x-pi/2 = sin x ~= x at smaller values and unfortunately 90/180*pi - just that much off of the actual value of pi/2.","body":"cos x-pi/2 = sin x ~= x at smaller values and unfortunately 90/180*pi - just that much off of the actual value of pi/2."}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1351340915,"creation_date":1351340915,"answer_id":13100182,"question_id":13100144,"body_markdown":"See the Javadoc. &quot;The conversion from degrees to radians is generally inexact.&quot;","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>See the Javadoc. \"The conversion from degrees to radians is generally inexact.\"</p>\n"},{"tags":[],"owner":{"account_id":1900362,"reputation":19274,"user_id":1716339,"display_name":"Aki Suihkonen"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1351341292,"creation_date":1351341292,"answer_id":13100229,"question_id":13100144,"body_markdown":"From trigonometry:\r\n\r\n    sin x ~= x, for small values of x\r\n    sin x = cos x+pi/2\r\n\r\nBecause pi/2 can&#39;t be represented exactly in IEEE-754 Floating point, it means, that it must be off by some value x, i.e it is represented by pi/2 +- x, where x &lt; the least significant bit in the floating point system. Which in this case is 2^-53 = 1.1102e-16.\r\n\r\nIn this particular case x ~= 6.123233995736766E-17, which is about 55% of the maximum error.\r\nSo, it&#39;s a rather good result...\r\n\r\n\r\n","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>From trigonometry:</p>\n\n<pre><code>sin x ~= x, for small values of x\nsin x = cos x+pi/2\n</code></pre>\n\n<p>Because pi/2 can't be represented exactly in IEEE-754 Floating point, it means, that it must be off by some value x, i.e it is represented by pi/2 +- x, where x &lt; the least significant bit in the floating point system. Which in this case is 2^-53 = 1.1102e-16.</p>\n\n<p>In this particular case x ~= 6.123233995736766E-17, which is about 55% of the maximum error.\nSo, it's a rather good result...</p>\n"},{"tags":[],"owner":{"display_name":"user85109"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1351348615,"creation_date":1351348615,"answer_id":13101100,"question_id":13100144,"body_markdown":"Standing temporarily on a soapbox, I think people are confused about the concepts of [accuracy versus precision][1]. Is this an issue as some have said? Is it a problem? A bug? Or is it an expected behavior of floating point arithmetic?\r\n\r\n90 degrees is a number that is representable perfectly as an integer, even though a double. But pi/2 radians is a real number that is not represented exactly, so that representation will be slightly inaccurate. The loss is in accuracy. The fact is, this is expected behavior. We should never trust the least significant bits of a result.\r\n\r\nNext, when we compute the value of a trigonometric function, there MAY be an additional loss of accuracy. We don&#39;t get exactly the result that we know to be true in a symbolic sense. Thus sin(pi/3) may not be exactly sqrt(3)/2, but then we can&#39;t represent sqrt(3)/2 exactly anyway. All of this is expected, and is behavior that should be dealt with by good code, not trusting the LSBs of those numbers.\r\n\r\n  [1]: http://www.mathsisfun.com/accuracy-precision.html","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>Standing temporarily on a soapbox, I think people are confused about the concepts of <a href=\"http://www.mathsisfun.com/accuracy-precision.html\" rel=\"nofollow\">accuracy versus precision</a>. Is this an issue as some have said? Is it a problem? A bug? Or is it an expected behavior of floating point arithmetic?</p>\n\n<p>90 degrees is a number that is representable perfectly as an integer, even though a double. But pi/2 radians is a real number that is not represented exactly, so that representation will be slightly inaccurate. The loss is in accuracy. The fact is, this is expected behavior. We should never trust the least significant bits of a result.</p>\n\n<p>Next, when we compute the value of a trigonometric function, there MAY be an additional loss of accuracy. We don't get exactly the result that we know to be true in a symbolic sense. Thus sin(pi/3) may not be exactly sqrt(3)/2, but then we can't represent sqrt(3)/2 exactly anyway. All of this is expected, and is behavior that should be dealt with by good code, not trusting the LSBs of those numbers.</p>\n"},{"tags":[],"owner":{"account_id":28622205,"reputation":1,"user_id":21915007,"display_name":"Rajiv Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344199,"creation_date":1684344199,"answer_id":76274696,"question_id":13100144,"body_markdown":"As value of PI is irrational because of that value of trigonometry function giving approximate value. For precise value in calculator use this:\r\n\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n      \r\n      double b1=Math.cos(Math.toRadians(90));\r\n      //approximate value \r\n      System.out.println(b1);\r\n      //exact value   System.out.println(String.format(&quot;%.15f&quot;,b1));\r\n      // I recommend you to using it upto 15f for precisely value\r\n      double b2=Math.sin(Math.toRadians(30));\r\n      //approximate value \r\n      System.out.println(b2);\r\n      //exact value\r\n      System.out.println(String.format(&quot;%.15f&quot;,b2));\r\n    }\r\n}","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>As value of PI is irrational because of that value of trigonometry function giving approximate value. For precise value in calculator use this:</p>\n<p>public class MyClass {\npublic static void main(String args[]) {</p>\n<pre><code>  double b1=Math.cos(Math.toRadians(90));\n  //approximate value \n  System.out.println(b1);\n  //exact value   System.out.println(String.format(&quot;%.15f&quot;,b1));\n  // I recommend you to using it upto 15f for precisely value\n  double b2=Math.sin(Math.toRadians(30));\n  //approximate value \n  System.out.println(b2);\n  //exact value\n  System.out.println(String.format(&quot;%.15f&quot;,b2));\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":1536892,"reputation":17,"user_id":1432679,"accept_rate":100,"display_name":"user1432679"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5628,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":13100229,"answer_count":5,"score":-1,"last_activity_date":1684344199,"creation_date":1351340591,"question_id":13100144,"body_markdown":"I&#39;ve got a little Problem with the `Math.cos()` method. I know, I have to convert the angle to Radians before using `Math.cos()`. But if I just do:\r\n\r\n    System.out.println(Math.cos(Math.toRadians(90));\r\n\r\nIt outputs: 6.123233995736766E-17\r\n\r\n`Math.sin()` is working well.","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>I've got a little Problem with the <code>Math.cos()</code> method. I know, I have to convert the angle to Radians before using <code>Math.cos()</code>. But if I just do:</p>\n\n<pre><code>System.out.println(Math.cos(Math.toRadians(90));\n</code></pre>\n\n<p>It outputs: 6.123233995736766E-17</p>\n\n<p><code>Math.sin()</code> is working well.</p>\n"},{"tags":["java","sorting","arraylist"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1684341660,"post_id":76274356,"comment_id":134505449,"body_markdown":"Please explain clearly what you are trying to do. What is the exact problem description?","body":"Please explain clearly what you are trying to do. What is the exact problem description?"},{"owner":{"account_id":1976379,"reputation":608,"user_id":1774084,"display_name":"M. Yousfi"},"score":1,"creation_date":1684341780,"post_id":76274356,"comment_id":134505468,"body_markdown":"This is not obvious how you want to sort the remainingList ? please clarify what you want to achieve.","body":"This is not obvious how you want to sort the remainingList ? please clarify what you want to achieve."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684342685,"post_id":76274356,"comment_id":134505664,"body_markdown":"You&#39;re using `k &lt; list.size() - 1` as the condition of your for-loop, are you sure you want the `- 1`?","body":"You&#39;re using <code>k &lt; list.size() - 1</code> as the condition of your for-loop, are you sure you want the <code>- 1</code>?"},{"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"score":0,"creation_date":1684342825,"post_id":76274356,"comment_id":134505698,"body_markdown":"it is a card game , i have my Players Object inside an ArrayList&lt;Players&gt;.\nat the end of a round i have to remove the winning player and let other player keep doing a last round, following the order","body":"it is a card game , i have my Players Object inside an ArrayList&lt;Players&gt;. at the end of a round i have to remove the winning player and let other player keep doing a last round, following the order"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684342906,"post_id":76274356,"comment_id":134505714,"body_markdown":"So, you&#39;re looking to place any players before the removed player, to the end of the list?","body":"So, you&#39;re looking to place any players before the removed player, to the end of the list?"},{"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"score":0,"creation_date":1684343027,"post_id":76274356,"comment_id":134505732,"body_markdown":"@Reilas that&#39;s what i wanted to ask, thank you. I m&#39;not that good at summarizing :)","body":"@Reilas that&#39;s what i wanted to ask, thank you. I m&#39;not that good at summarizing :)"}],"answers":[{"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684343303,"creation_date":1684343303,"answer_id":76274579,"question_id":76274356,"body_markdown":"Instead of creating too many variable to track your iteration, creating new List from existing using subList method might be efficient. For sake of simplicity, I am taking list of integer below:\r\n\r\n```\r\nList&lt;Integer&gt; integerList = List.of(1,2,3,4,5);\r\nInteger objToRemove = 5;\r\nint removeObjectIndex = integerList.indexOf(objToRemove);\r\nList&lt;Integer&gt; finalList = new ArrayList&lt;&gt;(integerList.subList(removeObjectIndex + 1, integerList.size()));\r\nfinalList.addAll(integerList.subList(0, removeObjectIndex));\r\nSystem.out.println(finalList);\r\n```","title":"ArrayList sorting after remove a specific item","body":"<p>Instead of creating too many variable to track your iteration, creating new List from existing using subList method might be efficient. For sake of simplicity, I am taking list of integer below:</p>\n<pre><code>List&lt;Integer&gt; integerList = List.of(1,2,3,4,5);\nInteger objToRemove = 5;\nint removeObjectIndex = integerList.indexOf(objToRemove);\nList&lt;Integer&gt; finalList = new ArrayList&lt;&gt;(integerList.subList(removeObjectIndex + 1, integerList.size()));\nfinalList.addAll(integerList.subList(0, removeObjectIndex));\nSystem.out.println(finalList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344039,"creation_date":1684344039,"answer_id":76274675,"question_id":76274356,"body_markdown":"This will remove the specified player, and place any players that were before that player, to the end of the list.\r\n\r\nKeep in mind, this presumes that `player` exists.\r\n\r\n```java\r\nvoid removePlayer(Players player) {\r\n    int indexOf = list.indexOf(player);\r\n    List&lt;Players&gt; sublist = new ArrayList&lt;&gt;(list.subList(0, indexOf));\r\n    remainingList = new ArrayList&lt;&gt;(list);\r\n    Iterator&lt;Players&gt; iterator = remainingList.iterator();\r\n    int index = 0;\r\n    while (iterator.hasNext() &amp;&amp; index &lt;= indexOf) {\r\n        iterator.next();\r\n        iterator.remove();\r\n        index++;\r\n    }\r\n    remainingList.addAll(sublist);\r\n}\r\n```","title":"ArrayList sorting after remove a specific item","body":"<p>This will remove the specified player, and place any players that were before that player, to the end of the list.</p>\n<p>Keep in mind, this presumes that <code>player</code> exists.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void removePlayer(Players player) {\n    int indexOf = list.indexOf(player);\n    List&lt;Players&gt; sublist = new ArrayList&lt;&gt;(list.subList(0, indexOf));\n    remainingList = new ArrayList&lt;&gt;(list);\n    Iterator&lt;Players&gt; iterator = remainingList.iterator();\n    int index = 0;\n    while (iterator.hasNext() &amp;&amp; index &lt;= indexOf) {\n        iterator.next();\n        iterator.remove();\n        index++;\n    }\n    remainingList.addAll(sublist);\n}\n</code></pre>\n"}],"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1684344039,"creation_date":1684341551,"question_id":76274356,"body_markdown":"i need to sort the elements of an ArrayList&lt;Object&gt; oredering from the elements who is next to the removed one.\r\n\r\nsomethink like this:\r\n\r\nif i have\r\nArraylist&lt;Object&gt; list = [ obj1 , obj2 , obj3, obj4 ]\r\n\r\nand i remove from the list obj2, i have to remain with a list ordered like this:\r\n\r\nArraylist&lt;Object&gt; remainingList = [ obj3, obj4, obj1  ]\r\n\r\ni tryed a for cycle with 2 variables that iterates list.size()-1 times\r\nobj is the element i dont need in remainingLIst \r\n\r\n\t\r\n\r\n       for(int i=list.indexOf(obj),  k= 0 ; k&lt;list.size()-1; k++)\r\n\t\t{\r\n\t\t\tif (i==giocatori.size()) i=0;\r\n\t\t\telse i++;\r\n\t\t\tremainingList.add(List.get(i));\r\n\t\t}\r\n\r\n\r\n\r\nis there a more efficent way to to this?\r\n\t\t","title":"ArrayList sorting after remove a specific item","body":"<p>i need to sort the elements of an ArrayList oredering from the elements who is next to the removed one.</p>\n<p>somethink like this:</p>\n<p>if i have\nArraylist list = [ obj1 , obj2 , obj3, obj4 ]</p>\n<p>and i remove from the list obj2, i have to remain with a list ordered like this:</p>\n<p>Arraylist remainingList = [ obj3, obj4, obj1  ]</p>\n<p>i tryed a for cycle with 2 variables that iterates list.size()-1 times\nobj is the element i dont need in remainingLIst</p>\n<pre><code>   for(int i=list.indexOf(obj),  k= 0 ; k&lt;list.size()-1; k++)\n    {\n        if (i==giocatori.size()) i=0;\n        else i++;\n        remainingList.add(List.get(i));\n    }\n</code></pre>\n<p>is there a more efficent way to to this?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9797,"page":428,"page_size":100}
