{"items":[{"tags":["java","string-formatting"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1680493406,"post_id":75915824,"comment_id":133902281,"body_markdown":"I dont work a lot with String.format, but i think its because each %d expects a variable. you provide only one, so it will not work as expected.","body":"I dont work a lot with String.format, but i think its because each %d expects a variable. you provide only one, so it will not work as expected."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":1,"creation_date":1680493544,"post_id":75915824,"comment_id":133902293,"body_markdown":"you could instead try to load the string into a string builder and insert at the correct indexes the &quot;-&quot;","body":"you could instead try to load the string into a string builder and insert at the correct indexes the &quot;-&quot;"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1680493864,"post_id":75915824,"comment_id":133902317,"body_markdown":"please do research before asking, at the very least study the javadoc of each method you are using ..","body":"please do research before asking, at the very least study the javadoc of each method you are using .."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1680507973,"post_id":75915824,"comment_id":133904129,"body_markdown":"Generally, you shouldn&#39;t use integers to represent things like social security number","body":"Generally, you shouldn&#39;t use integers to represent things like social security number"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680597406,"creation_date":1680496306,"answer_id":75916047,"question_id":75915824,"body_markdown":"`String.format` is the wrong tool for the job. It cannot do what you want. Java sees 3 `%d` values and thus wants you to pass 3 numbers to it.\r\n\r\nYou need to do the work of chopping the number into its parts on your own. You can either use integer wrangling for it, or string wrangling.\r\n\r\n## int wrangling\r\n\r\n.. though you may want to use `long`.\r\n\r\nGiven `123456789`, you need to obtain:\r\n\r\n* `123`\r\n* `45`\r\n* `6789`\r\n\r\nTo that, you can divide by the relevant number: `123456789 / 1000000` is `123`.\r\n\r\nFor `45`, you need to combine modulo and division. First, you want to lop off the 123, which requires modulo, then lop off the 6789 which requires division. `123456789 % 1000000` is `3456789`. Divide that by `10000` and you get `45`. Alternatively, keep &#39;updating&#39; the number: Once you get 123 out subtract that times 1000000.\r\n\r\n```\r\nlong ssn = 123_45_6789L;\r\nint p1 = ssn / 1_00_0000;\r\nint p2 = (ssn % 1_00_0000) / 1_0000;\r\nint p3 = ssn % 1_0000;\r\nreturn String.format(&quot;%03d-%02d-%04d&quot;, p1, p2, p3);\r\n```\r\n\r\n## String wrangling\r\n\r\n(EDIT: Replaced with @OleV.V.&#39;s far more elegant take).\r\n\r\nFirst turn your number into a string then inject the dashes:\r\n\r\n```\r\nlong ssn = 123456789L;\r\nString a = String.format(&quot;%09d&quot;, ssn)\r\n  .replaceFirst(&quot;(\\\\d{3})(\\\\d{2})(\\\\d{4})&quot;, &quot;$1-$2-$3&quot;);\r\n```\r\n\r\neither one works fine - but the second (string wrangling) example strikes me as more readable.","title":"String Format an integer to look like a social security number","body":"<p><code>String.format</code> is the wrong tool for the job. It cannot do what you want. Java sees 3 <code>%d</code> values and thus wants you to pass 3 numbers to it.</p>\n<p>You need to do the work of chopping the number into its parts on your own. You can either use integer wrangling for it, or string wrangling.</p>\n<h2>int wrangling</h2>\n<p>.. though you may want to use <code>long</code>.</p>\n<p>Given <code>123456789</code>, you need to obtain:</p>\n<ul>\n<li><code>123</code></li>\n<li><code>45</code></li>\n<li><code>6789</code></li>\n</ul>\n<p>To that, you can divide by the relevant number: <code>123456789 / 1000000</code> is <code>123</code>.</p>\n<p>For <code>45</code>, you need to combine modulo and division. First, you want to lop off the 123, which requires modulo, then lop off the 6789 which requires division. <code>123456789 % 1000000</code> is <code>3456789</code>. Divide that by <code>10000</code> and you get <code>45</code>. Alternatively, keep 'updating' the number: Once you get 123 out subtract that times 1000000.</p>\n<pre><code>long ssn = 123_45_6789L;\nint p1 = ssn / 1_00_0000;\nint p2 = (ssn % 1_00_0000) / 1_0000;\nint p3 = ssn % 1_0000;\nreturn String.format(&quot;%03d-%02d-%04d&quot;, p1, p2, p3);\n</code></pre>\n<h2>String wrangling</h2>\n<p>(EDIT: Replaced with @OleV.V.'s far more elegant take).</p>\n<p>First turn your number into a string then inject the dashes:</p>\n<pre><code>long ssn = 123456789L;\nString a = String.format(&quot;%09d&quot;, ssn)\n  .replaceFirst(&quot;(\\\\d{3})(\\\\d{2})(\\\\d{4})&quot;, &quot;$1-$2-$3&quot;);\n</code></pre>\n<p>either one works fine - but the second (string wrangling) example strikes me as more readable.</p>\n"}],"owner":{"account_id":26966183,"reputation":3,"user_id":20533003,"display_name":"Michael Teoro Jr."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75916047,"answer_count":1,"score":-2,"last_activity_date":1680597406,"creation_date":1680492208,"question_id":75915824,"body_markdown":"After the users input of a social security number I would like to take the integer that is entered and display is as a social security number. So that XXXXXXXXX becomes XXX-XX-XXXX.\r\n\r\n```\r\n public String getSSNumber()\r\n        {      \r\n            String convert;\r\n            convert = String.valueOf(ssNumber);\r\n            return convert;\r\n        }\r\n\r\n public String toString()\r\n        {\r\n           return (&quot; SSN: &quot; + String.format(&quot;%03d-%02d-%04d&quot;, ssNumber);\r\n        }\r\n```\r\n\r\nThis is the code I tried, and I just can&#39;t seem to get it to work. Forgive the gross code I&#39;m a new student to java.","title":"String Format an integer to look like a social security number","body":"<p>After the users input of a social security number I would like to take the integer that is entered and display is as a social security number. So that XXXXXXXXX becomes XXX-XX-XXXX.</p>\n<pre><code> public String getSSNumber()\n        {      \n            String convert;\n            convert = String.valueOf(ssNumber);\n            return convert;\n        }\n\n public String toString()\n        {\n           return (&quot; SSN: &quot; + String.format(&quot;%03d-%02d-%04d&quot;, ssNumber);\n        }\n</code></pre>\n<p>This is the code I tried, and I just can't seem to get it to work. Forgive the gross code I'm a new student to java.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":4,"creation_date":1680547240,"post_id":75922674,"comment_id":133913840,"body_markdown":"You can&#39;t check &quot;ahead&quot; with `Scanner`&#39;s API.  You have to check one, then the next.","body":"You can&#39;t check &quot;ahead&quot; with <code>Scanner</code>&#39;s API.  You have to check one, then the next."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1680547461,"post_id":75922674,"comment_id":133913899,"body_markdown":"[Scanner.hasNext()](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html#hasNext()) checks  if there is another token, regardless of how the token might be interpreted. [~.hasNextInt()](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html#hasNextInt()) checks if there is another token **and** that token can be interpreted as an integer.","body":"<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html#hasNext()\" rel=\"nofollow noreferrer\">Scanner.hasNext()</a> checks  if there is another token, regardless of how the token might be interpreted. <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html#hasNextInt()\" rel=\"nofollow noreferrer\">~.hasNextInt()</a> checks if there is another token <b>and</b> that token can be interpreted as an integer."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1680547884,"post_id":75922674,"comment_id":133913989,"body_markdown":"If you require tokens to be paired, use `hasNext()` or `hasNextInt()` to check for the first. If true, use `nextInt()` then use `hasNext()` or `hasNextInt()` to check for the second. You&#39;ll have to decide how an unpaired token should be handled.","body":"If you require tokens to be paired, use <code>hasNext()</code> or <code>hasNextInt()</code> to check for the first. If true, use <code>nextInt()</code> then use <code>hasNext()</code> or <code>hasNextInt()</code> to check for the second. You&#39;ll have to decide how an unpaired token should be handled."},{"owner":{"account_id":28205672,"reputation":9,"user_id":21558806,"display_name":"nikk0nikk0ni"},"score":0,"creation_date":1680548684,"post_id":75922674,"comment_id":133914171,"body_markdown":"What do you mean by a token","body":"What do you mean by a token"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1680549052,"post_id":75922674,"comment_id":133914244,"body_markdown":"A `Scanner` is *A simple text scanner which can parse primitive types and strings using regular expressions.  // A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various next methods.*  https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html","body":"A <code>Scanner</code> is <i>A simple text scanner which can parse primitive types and strings using regular expressions.  // A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various next methods.</i>  <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>"},{"owner":{"account_id":28205672,"reputation":9,"user_id":21558806,"display_name":"nikk0nikk0ni"},"score":1,"creation_date":1680549321,"post_id":75922674,"comment_id":133914286,"body_markdown":"I understand you, but what is a token in simple language. Im just new to programming","body":"I understand you, but what is a token in simple language. Im just new to programming"},{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":2,"creation_date":1680550078,"post_id":75922674,"comment_id":133914424,"body_markdown":"What problems did you encounter when you tried `hasNextInt()`, if you want us to help you with that, then show the code and explain what happened.","body":"What problems did you encounter when you tried <code>hasNextInt()</code>, if you want us to help you with that, then show the code and explain what happened."},{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":2,"creation_date":1680550156,"post_id":75922674,"comment_id":133914438,"body_markdown":"@nikk0nikk0ni A &quot;token&quot; is a sequence one or more characters from the input that has some meaning as a group and cannot be divided into smaller pieces. These are like the &quot;words&quot; of a language. For example, the string &quot;123&quot; can be considered a single token that represents the number 123. On the other hand &quot;12+34&quot; might be interpreted as three tokens, the numbers 12 and 34 and the + operator. To understand this in more detail, I recommend that you read about so-called &quot;string parsing&quot;.","body":"@nikk0nikk0ni A &quot;token&quot; is a sequence one or more characters from the input that has some meaning as a group and cannot be divided into smaller pieces. These are like the &quot;words&quot; of a language. For example, the string &quot;123&quot; can be considered a single token that represents the number 123. On the other hand &quot;12+34&quot; might be interpreted as three tokens, the numbers 12 and 34 and the + operator. To understand this in more detail, I recommend that you read about so-called &quot;string parsing&quot;."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1680550443,"post_id":75922674,"comment_id":133914513,"body_markdown":"additional info to previous comment: by default the `Scanner` separates the tokens by one or more whitespaces (including SPACE, TAB, NEWLINE) - so, for example `&quot;123  abc &quot;` will result in two tokens `&quot;123&quot;` and `&quot;abc&quot;` (the delimiter [pattern] can be changed)","body":"additional info to previous comment: by default the <code>Scanner</code> separates the tokens by one or more whitespaces (including SPACE, TAB, NEWLINE) - so, for example <code>&quot;123  abc &quot;</code> will result in two tokens <code>&quot;123&quot;</code> and <code>&quot;abc&quot;</code> (the delimiter [pattern] can be changed)"},{"owner":{"account_id":28205672,"reputation":9,"user_id":21558806,"display_name":"nikk0nikk0ni"},"score":0,"creation_date":1680550486,"post_id":75922674,"comment_id":133914522,"body_markdown":"Thank you 4 explanation","body":"Thank you 4 explanation"},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":2,"creation_date":1680551134,"post_id":75922674,"comment_id":133914635,"body_markdown":"&quot;but what is a token in simple language&quot; each individual thing that you read from the Scanner. The *purpose* of the Scanner is to split up the input into tokens. This kind of information is [easy to search for](https://duckduckgo.com/?q=programming+concepts+token), by the way.","body":"&quot;but what is a token in simple language&quot; each individual thing that you read from the Scanner. The <i>purpose</i> of the Scanner is to split up the input into tokens. This kind of information is <a href=\"https://duckduckgo.com/?q=programming+concepts+token\" rel=\"nofollow noreferrer\">easy to search for</a>, by the way."}],"answers":[{"tags":[],"owner":{"account_id":26708054,"reputation":1,"user_id":20313929,"display_name":"Daniel Zajcev"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1680550565,"creation_date":1680549912,"answer_id":75923099,"question_id":75922674,"body_markdown":"&quot;check = false;&quot; is in the wrong place. Your code ends after an exception in an infinite loop. After the exception, one possibility would be to create a New Scanner Object. You should set &quot;check&quot; to false in the try block.\r\n\r\nIt would look like this:\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Scanner input = new Scanner(System.in);\r\n            int sum = 0;\r\n            int v1,v2;\r\n            boolean check = true;\r\n\r\n\t        while(check == true)\r\n\t        {\r\n\t            try\r\n\t            {\r\n\t        \t    System.out.println(&quot;Write the first number: &quot;);\r\n\t\t            v1 = input.nextInt();\r\n\t\t            System.out.println(&quot;Write the second number: &quot;);\r\n\t\t            v2 = input.nextInt();\r\n\t\t            sum += v1 + v2;\r\n\t\t            System.out.println(&quot;The result of &quot; + v1 + &quot; + &quot; + v2 + &quot; is &quot; + sum);\r\n\t\t            check = false;\r\n\t            }\r\n\t            catch (Throwable e)\r\n\t            {\r\n\t                System.out.println(&quot;The input is not valid! \\nPlease use valid integer values!\\n&quot;);\r\n\t                input = new Scanner(System.in);\r\n\t            }\r\n\t        }\r\n        }\r\n\r\n    }","title":"How to understand how hasNextInt is defined if I use two variables","body":"<p>&quot;check = false;&quot; is in the wrong place. Your code ends after an exception in an infinite loop. After the exception, one possibility would be to create a New Scanner Object. You should set &quot;check&quot; to false in the try block.</p>\n<p>It would look like this:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        int sum = 0;\n        int v1,v2;\n        boolean check = true;\n\n        while(check == true)\n        {\n            try\n            {\n                System.out.println(&quot;Write the first number: &quot;);\n                v1 = input.nextInt();\n                System.out.println(&quot;Write the second number: &quot;);\n                v2 = input.nextInt();\n                sum += v1 + v2;\n                System.out.println(&quot;The result of &quot; + v1 + &quot; + &quot; + v2 + &quot; is &quot; + sum);\n                check = false;\n            }\n            catch (Throwable e)\n            {\n                System.out.println(&quot;The input is not valid! \\nPlease use valid integer values!\\n&quot;);\n                input = new Scanner(System.in);\n            }\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":28205672,"reputation":9,"user_id":21558806,"display_name":"nikk0nikk0ni"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1680596911,"creation_date":1680546693,"question_id":75922674,"body_markdown":"How is `hasNextInt` defined with two variables? For example, if I count two `int` variables and I need to add them if they are both `int`.\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n    Scanner input = new Scanner(System.in);\r\n    int sum = 0;\r\n    int v1,v2;\r\n    boolean check = true;\r\n    while(check)\r\n    {\r\n        try\r\n        {\r\n        v1 = input.nextInt();\r\n        v2 = input.nextInt();\r\n        sum += v1+v2;\r\n            System.out.println(sum);\r\n        }\r\n        catch (Throwable e)\r\n        {\r\n            System.out.println(sum);\r\n            check = false;\r\n        }\r\n    }\r\n    }\r\n\r\n}\r\n```\r\n\r\nI tried to solve this problem through `hasNextInt`, but finally gave up and decided through `try... catch`","title":"How to understand how hasNextInt is defined if I use two variables","body":"<p>How is <code>hasNextInt</code> defined with two variables? For example, if I count two <code>int</code> variables and I need to add them if they are both <code>int</code>.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n    Scanner input = new Scanner(System.in);\n    int sum = 0;\n    int v1,v2;\n    boolean check = true;\n    while(check)\n    {\n        try\n        {\n        v1 = input.nextInt();\n        v2 = input.nextInt();\n        sum += v1+v2;\n            System.out.println(sum);\n        }\n        catch (Throwable e)\n        {\n            System.out.println(sum);\n            check = false;\n        }\n    }\n    }\n\n}\n</code></pre>\n<p>I tried to solve this problem through <code>hasNextInt</code>, but finally gave up and decided through <code>try... catch</code></p>\n"},{"tags":["java","nosuchmethoderror"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1680596354,"post_id":75926682,"comment_id":133920747,"body_markdown":"This error should only happen when compilation of `ch8ps` happened with a different version of `Employee` on the classpath than execution. Are both of those classes in the same file? Can you check if there&#39;s maybe more than one `Employee.class` anywhere in your output directory?","body":"This error should only happen when compilation of <code>ch8ps</code> happened with a different version of <code>Employee</code> on the classpath than execution. Are both of those classes in the same file? Can you check if there&#39;s maybe more than one <code>Employee.class</code> anywhere in your output directory?"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1680602685,"post_id":75926682,"comment_id":133922288,"body_markdown":"I&#39;d say setName is not static, neither getNane, neither the string it sets too. You wouldn&#39;t getName  , do Employee.name in System.out. Put static on setName and the global.   If you want to stop static put Employee into the ch8p constructor with a global for it. Call your ch8p class with simply new ch8p();  recursively in its own main.","body":"I&#39;d say setName is not static, neither getNane, neither the string it sets too. You wouldn&#39;t getName  , do Employee.name in System.out. Put static on setName and the global.   If you want to stop static put Employee into the ch8p constructor with a global for it. Call your ch8p class with simply new ch8p();  recursively in its own main."}],"owner":{"account_id":28210486,"reputation":1,"user_id":21562848,"display_name":"Anonymus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680596263,"creation_date":1680593884,"question_id":75926682,"body_markdown":"Whenever I run this code in VSCode.\r\n\r\n```\r\nclass Employee{\r\n    int salary;\r\n    String name;\r\n\r\n    public int getSalary(){\r\n        return salary;\r\n    }\r\n    public String getName(){\r\n        return name;\r\n    }\r\n    public void setName(String n){\r\n        name = n;\r\n    }\r\n}\r\n\r\npublic class ch8ps {\r\n    public static void main(String[] args) {\r\n        Employee test = new Employee();\r\n\r\n        test.setName(&quot;XYZ&quot;);\r\n        System.out.println(test.getName());\r\n    }\r\n}\r\n```\r\n\r\nIt throws this error.\r\n\r\n```none\r\ncd /home/linux/Desktop/Study\\ Material/Codes/Java ; /usr/bin/env /usr/lib/jvm/jdk-19/bin/java @/tmp/cp_d5gr0ezmyf1mprctrtteedg\r\nec.argfile ch8ps \r\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: &#39;void Employee.setName(java.lang.String)&#39;\r\n        at ch8ps.main(ch8ps.java:20)\r\n```\r\n\r\nand if I comment this line `test.setName(&quot;XYZ&quot;);` It returns same error for this `System.out.println(test.getName());` line too.\r\n\r\nBut, whenever I run this code in IntelliJ idea, it runs perfectly.","title":"Exception in thread &quot;main&quot; java.lang.NoSuchMethodError error shows up in VSCode","body":"<p>Whenever I run this code in VSCode.</p>\n<pre><code>class Employee{\n    int salary;\n    String name;\n\n    public int getSalary(){\n        return salary;\n    }\n    public String getName(){\n        return name;\n    }\n    public void setName(String n){\n        name = n;\n    }\n}\n\npublic class ch8ps {\n    public static void main(String[] args) {\n        Employee test = new Employee();\n\n        test.setName(&quot;XYZ&quot;);\n        System.out.println(test.getName());\n    }\n}\n</code></pre>\n<p>It throws this error.</p>\n<pre class=\"lang-none prettyprint-override\"><code>cd /home/linux/Desktop/Study\\ Material/Codes/Java ; /usr/bin/env /usr/lib/jvm/jdk-19/bin/java @/tmp/cp_d5gr0ezmyf1mprctrtteedg\nec.argfile ch8ps \nException in thread &quot;main&quot; java.lang.NoSuchMethodError: 'void Employee.setName(java.lang.String)'\n        at ch8ps.main(ch8ps.java:20)\n</code></pre>\n<p>and if I comment this line <code>test.setName(&quot;XYZ&quot;);</code> It returns same error for this <code>System.out.println(test.getName());</code> line too.</p>\n<p>But, whenever I run this code in IntelliJ idea, it runs perfectly.</p>\n"},{"tags":["java","spring-boot","spring-webflux","reactive-programming","junit5"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1679071147,"post_id":75768057,"comment_id":133660977,"body_markdown":"Cannot reproduce based on given classes, only change is following https://stackoverflow.com/questions/58348038/springboot2-webflux-webtestclient-always-returns-401-unauthorized to avoid 401","body":"Cannot reproduce based on given classes, only change is following <a href=\"https://stackoverflow.com/questions/58348038/springboot2-webflux-webtestclient-always-returns-401-unauthorized\" title=\"springboot2 webflux webtestclient always returns 401 unauthorized\">stackoverflow.com/questions/58348038/&hellip;</a> to avoid 401"}],"answers":[{"tags":[],"owner":{"account_id":16731772,"reputation":1574,"user_id":12093975,"display_name":"skyho"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680596020,"creation_date":1680596020,"answer_id":75926989,"question_id":75768057,"body_markdown":"```java\r\n@SpringBootTest\r\nclass FluxAndMonoControllerTest {\r\n\r\n\r\n    WebTestClient webTestClient;\r\n\r\n    @Autowired\r\n    ApplicationContext context;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        this.webTestClient = WebTestClient\r\n                .bindToApplicationContext(this.context)\r\n                .configureClient()\r\n                .build();\r\n    }\r\n    @Test\r\n    void returnFlux() {\r\n\r\n        Flux&lt;Integer&gt; response = webTestClient.get().uri(&quot;/flux&quot;)\r\n                .accept(MediaType.APPLICATION_JSON)\r\n                .exchange()\r\n                .expectStatus().isOk()\r\n                .returnResult(Integer.class)\r\n                .getResponseBody();\r\n\r\n        StepVerifier.create(response)\r\n                .expectNext(1)\r\n                .expectNext(2)\r\n                .expectNext(3)\r\n                .expectNext(4)\r\n                .verifyComplete();\r\n    }\r\n\r\n    @Test\r\n    void returnFluxStream() {\r\n\r\n        Flux&lt;Integer&gt; response = webTestClient.get().uri(&quot;/fluxstream&quot;)\r\n                .accept(MediaType.valueOf(MediaType.APPLICATION_NDJSON_VALUE))\r\n                .exchange()\r\n                .expectStatus().isOk()\r\n                .returnResult(Integer.class)\r\n                .getResponseBody();\r\n\r\n        StepVerifier.create(response)\r\n                .expectNext(1)\r\n                .expectNext(2)\r\n                .expectNext(3)\r\n                .expectNext(4)\r\n                .verifyComplete();\r\n    }\r\n}\r\n```","title":"Junit Testing for Reactive Java failing with &quot;Expected :200 OK , Actual :404 NOT_FOUND&quot;","body":"<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass FluxAndMonoControllerTest {\n\n\n    WebTestClient webTestClient;\n\n    @Autowired\n    ApplicationContext context;\n\n    @BeforeEach\n    public void setup() {\n        this.webTestClient = WebTestClient\n                .bindToApplicationContext(this.context)\n                .configureClient()\n                .build();\n    }\n    @Test\n    void returnFlux() {\n\n        Flux&lt;Integer&gt; response = webTestClient.get().uri(&quot;/flux&quot;)\n                .accept(MediaType.APPLICATION_JSON)\n                .exchange()\n                .expectStatus().isOk()\n                .returnResult(Integer.class)\n                .getResponseBody();\n\n        StepVerifier.create(response)\n                .expectNext(1)\n                .expectNext(2)\n                .expectNext(3)\n                .expectNext(4)\n                .verifyComplete();\n    }\n\n    @Test\n    void returnFluxStream() {\n\n        Flux&lt;Integer&gt; response = webTestClient.get().uri(&quot;/fluxstream&quot;)\n                .accept(MediaType.valueOf(MediaType.APPLICATION_NDJSON_VALUE))\n                .exchange()\n                .expectStatus().isOk()\n                .returnResult(Integer.class)\n                .getResponseBody();\n\n        StepVerifier.create(response)\n                .expectNext(1)\n                .expectNext(2)\n                .expectNext(3)\n                .expectNext(4)\n                .verifyComplete();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27688145,"reputation":13,"user_id":21135460,"display_name":"Kartik Mathur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":312,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680596020,"creation_date":1679059125,"question_id":75768057,"body_markdown":"Following is my controller class\r\n\r\n```\r\n@RestController\r\npublic class FluxAndMonoController {\r\n\r\n    @GetMapping(&quot;/flux&quot;)\r\n    public Flux&lt;Integer&gt; returnFlux(){\r\n\r\n        return Flux.just(1, 2, 3, 4)\r\n                .delayElements(Duration.ofSeconds(1))\r\n                .log();\r\n    }\r\n\r\n    @GetMapping(value = &quot;/fluxstream&quot;, produces = MediaType.APPLICATION_NDJSON_VALUE)    \r\n    public Flux&lt;Integer&gt; returnFluxStream(){ \r\n\r\n        return Flux.just(1, 2, 3, 4)\r\n                .delayElements(Duration.ofSeconds(1))\r\n                .log();\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd following is my test for the above controller&#39;s first endpoint (&#39;/flux&#39;)\r\n\r\n```\r\n@WebFluxTest\r\npublic class FluxAndMonoController {\r\n\r\n    @Autowired\r\n    WebTestClient webTestClient;    \r\n\r\n    @Test\r\n    public void flux_approach1(){\r\n\r\n        Flux&lt;Integer&gt; integerFlux = webTestClient.get().uri(&quot;/flux&quot;)\r\n                .accept(MediaType.APPLICATION_JSON)\r\n                .exchange() \r\n                .expectStatus().isOk()\r\n                .returnResult(Integer.class)\r\n                .getResponseBody();\r\n\r\n        StepVerifier.create(integerFlux)\r\n                .expectSubscription()\r\n                .expectNext(1)\r\n                .expectNext(2)\r\n                .expectNext(3)\r\n                .expectNext(4)\r\n                .verifyComplete();\r\n    }\r\n}\r\n```\r\n\r\n\r\nOn running the test, I am receiving the error-\r\n\r\n```\r\n&lt; 404 NOT_FOUND Not Found\r\n&lt; Content-Type: [application/json]\r\n&lt; Content-Length: [131]\r\n\r\n{&quot;timestamp&quot;:&quot;2023-03-17T13:08:45.647+00:00&quot;,&quot;path&quot;:&quot;/flux&quot;,&quot;status&quot;:404,&quot;error&quot;:&quot;Not Found&quot;,&quot;message&quot;:null,&quot;requestId&quot;:&quot;7e94e64e&quot;}\r\n\r\n\r\nStatus expected:&lt;200 OK&gt; but was:&lt;404 NOT_FOUND&gt;\r\nExpected :200 OK\r\nActual   :404 NOT_FOUND\r\n&lt;Click to see difference&gt;\r\n\r\njava.lang.AssertionError: Status expected:&lt;200 OK&gt; but was:&lt;404 NOT_FOUND&gt;\r\n```\r\n\r\nI have tried adding @ExtendWith(SpringExtension.class)\r\n annotation on the controllerTest, but it is not making any difference.\r\nKindly suggest some ideas to overcome this error. Thank you\r\n\r\nP.S.: From postman and browser, the endpoint &#39;/flux&#39; is working fine. The status on postman is 200OK and I&#39;m getting the output as well","title":"Junit Testing for Reactive Java failing with &quot;Expected :200 OK , Actual :404 NOT_FOUND&quot;","body":"<p>Following is my controller class</p>\n<pre><code>@RestController\npublic class FluxAndMonoController {\n\n    @GetMapping(&quot;/flux&quot;)\n    public Flux&lt;Integer&gt; returnFlux(){\n\n        return Flux.just(1, 2, 3, 4)\n                .delayElements(Duration.ofSeconds(1))\n                .log();\n    }\n\n    @GetMapping(value = &quot;/fluxstream&quot;, produces = MediaType.APPLICATION_NDJSON_VALUE)    \n    public Flux&lt;Integer&gt; returnFluxStream(){ \n\n        return Flux.just(1, 2, 3, 4)\n                .delayElements(Duration.ofSeconds(1))\n                .log();\n    }\n\n}\n</code></pre>\n<p>And following is my test for the above controller's first endpoint ('/flux')</p>\n<pre><code>@WebFluxTest\npublic class FluxAndMonoController {\n\n    @Autowired\n    WebTestClient webTestClient;    \n\n    @Test\n    public void flux_approach1(){\n\n        Flux&lt;Integer&gt; integerFlux = webTestClient.get().uri(&quot;/flux&quot;)\n                .accept(MediaType.APPLICATION_JSON)\n                .exchange() \n                .expectStatus().isOk()\n                .returnResult(Integer.class)\n                .getResponseBody();\n\n        StepVerifier.create(integerFlux)\n                .expectSubscription()\n                .expectNext(1)\n                .expectNext(2)\n                .expectNext(3)\n                .expectNext(4)\n                .verifyComplete();\n    }\n}\n</code></pre>\n<p>On running the test, I am receiving the error-</p>\n<pre><code>&lt; 404 NOT_FOUND Not Found\n&lt; Content-Type: [application/json]\n&lt; Content-Length: [131]\n\n{&quot;timestamp&quot;:&quot;2023-03-17T13:08:45.647+00:00&quot;,&quot;path&quot;:&quot;/flux&quot;,&quot;status&quot;:404,&quot;error&quot;:&quot;Not Found&quot;,&quot;message&quot;:null,&quot;requestId&quot;:&quot;7e94e64e&quot;}\n\n\nStatus expected:&lt;200 OK&gt; but was:&lt;404 NOT_FOUND&gt;\nExpected :200 OK\nActual   :404 NOT_FOUND\n&lt;Click to see difference&gt;\n\njava.lang.AssertionError: Status expected:&lt;200 OK&gt; but was:&lt;404 NOT_FOUND&gt;\n</code></pre>\n<p>I have tried adding @ExtendWith(SpringExtension.class)\nannotation on the controllerTest, but it is not making any difference.\nKindly suggest some ideas to overcome this error. Thank you</p>\n<p>P.S.: From postman and browser, the endpoint '/flux' is working fine. The status on postman is 200OK and I'm getting the output as well</p>\n"},{"tags":["java","audio","mp3","extract"],"answers":[{"comments":[{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1243936609,"post_id":938316,"comment_id":746767,"body_markdown":"Hi Jon,\nThanks for your quick answer!\nIn your proposal; is &#39;decodedFormat&#39; a representation of the mp3 data decoded in other format? if I write &quot;din.read()&quot;, am I getting the data bytes in th decoded format?\n\nThanks","body":"Hi Jon, Thanks for your quick answer! In your proposal; is &#39;decodedFormat&#39; a representation of the mp3 data decoded in other format? if I write &quot;din.read()&quot;, am I getting the data bytes in th decoded format?  Thanks"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1243937612,"post_id":938316,"comment_id":746824,"body_markdown":"Yes. That decodedFormat says &quot;I want you to decode as signed PCM data&quot;.","body":"Yes. That decodedFormat says &quot;I want you to decode as signed PCM data&quot;."},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1244020611,"post_id":938316,"comment_id":751861,"body_markdown":"Hi.\nI followed your advise and it worked. To visualize the data I use:\nwhile ((numBytesRead = din.read(audioBytes)) != -1) {}\nThis reads the bytes in &#39;din&#39; and stores them in the array audioBytes. I&#39;ve trying visualizinf the data by using:\nwhile ((numBytesRead = din.read(audioBytes)) != -1) {\nSystem.out.println(&quot;Bytes Decoded value &quot; + audioBytes[0]);}\nI have a question about this data:\nEvery sample uses 16 bits, that&#39;s 2 positions in the array audioBytes, rigth? How could I get the value of every sample? Does the decoded format (wav) has the 44 header bytes?\nThank yoy very much for your help!","body":"Hi. I followed your advise and it worked. To visualize the data I use: while ((numBytesRead = din.read(audioBytes)) != -1) {} This reads the bytes in &#39;din&#39; and stores them in the array audioBytes. I&#39;ve trying visualizinf the data by using: while ((numBytesRead = din.read(audioBytes)) != -1) { System.out.println(&quot;Bytes Decoded value &quot; + audioBytes[0]);} I have a question about this data: Every sample uses 16 bits, that&#39;s 2 positions in the array audioBytes, rigth? How could I get the value of every sample? Does the decoded format (wav) has the 44 header bytes? Thank yoy very much for your help!"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1244021707,"post_id":938316,"comment_id":751930,"body_markdown":"The decoded format here isn&#39;t actually wav - it&#39;s just the data part. Yes, you&#39;ll get one sample per two bytes (and two samples for the same time if it&#39;s stereo). Just fetch both bytes and convert each pair into a 16-bit value. Or if you want, you could change the 16 to 8 in the decodedFormat constructor call...","body":"The decoded format here isn&#39;t actually wav - it&#39;s just the data part. Yes, you&#39;ll get one sample per two bytes (and two samples for the same time if it&#39;s stereo). Just fetch both bytes and convert each pair into a 16-bit value. Or if you want, you could change the 16 to 8 in the decodedFormat constructor call..."},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1244058812,"post_id":938316,"comment_id":754975,"body_markdown":"I&#39;m a little confused. If the audio file is stereo does this mean that in the byte array there are 2 bytes for the 1st sample (left channel) and another 2 bytes for the 1st sample (rigth channel)?","body":"I&#39;m a little confused. If the audio file is stereo does this mean that in the byte array there are 2 bytes for the 1st sample (left channel) and another 2 bytes for the 1st sample (rigth channel)?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1244059602,"post_id":938316,"comment_id":755048,"body_markdown":"Yes. (I&#39;m not sure which order they&#39;re in, whether it&#39;s left then right or right then left, but that&#39;s the basic idea.)","body":"Yes. (I&#39;m not sure which order they&#39;re in, whether it&#39;s left then right or right then left, but that&#39;s the basic idea.)"},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1244099412,"post_id":938316,"comment_id":757125,"body_markdown":"Ok, I&#39;ve checked the order of the bytes in the case the audio file is stereo. I think this is a problem. After getting the audio data sample array I need to start processing it, which involves applying a Hamming window to N samples and then calculating FFT. I&#39;ll keep thinking about it. Thanks!","body":"Ok, I&#39;ve checked the order of the bytes in the case the audio file is stereo. I think this is a problem. After getting the audio data sample array I need to start processing it, which involves applying a Hamming window to N samples and then calculating FFT. I&#39;ll keep thinking about it. Thanks!"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1244102023,"post_id":938316,"comment_id":757256,"body_markdown":"@dedalo: If you only *want* it to decode to mono, change the decodedFormat constructor call. I don&#39;t know whether it will pick one channel or other, or mix the two, but it&#39;s worth a try.","body":"@dedalo: If you only <i>want</i> it to decode to mono, change the decodedFormat constructor call. I don&#39;t know whether it will pick one channel or other, or mix the two, but it&#39;s worth a try."},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1244102854,"post_id":938316,"comment_id":757308,"body_markdown":"This is waht I tried:\n[AudioFormat decodedFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, \n            baseFormat.getSampleRate(),16,\n            1,                           //baseFormat.getChannels(),\n            baseFormat.getChannels() * 2,\n            baseFormat.getSampleRate(),\n            false);\nBut I got an exception I was not able to solve.","body":"This is waht I tried: [AudioFormat decodedFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,              baseFormat.getSampleRate(),16,             1,                           //baseFormat.getChannels(),             baseFormat.getChannels() * 2,             baseFormat.getSampleRate(),             false); But I got an exception I was not able to solve."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1244104523,"post_id":938316,"comment_id":757391,"body_markdown":"You probably need to change the next argument as well (the frame size). If that doesn&#39;t work, please say what the exception was.","body":"You probably need to change the next argument as well (the frame size). If that doesn&#39;t work, please say what the exception was."},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1244150178,"post_id":938316,"comment_id":761370,"body_markdown":"I tried changing the frame size argument but none of the values I used worked. It looks like  it lets me modify the other arguments, but not the one related to stereo/mono. I think the exception is caused by: numBytesRead = din.read(audioBytes).","body":"I tried changing the frame size argument but none of the values I used worked. It looks like  it lets me modify the other arguments, but not the one related to stereo/mono. I think the exception is caused by: numBytesRead = din.read(audioBytes)."},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1244150429,"post_id":938316,"comment_id":761397,"body_markdown":"Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 1at javazoom.spi.mpeg.sampled.convert.DecodedMpegAudioInputStream$DMAISObuffer.append(Unknown Source)at javazoom.jl.decoder.Obuffer.appendSamples(Unknown Source)at javazoom.jl.decoder.SynthesisFilter.compute_pcm_samples(Unknown Source)at javazoom.jl.decoder.SynthesisFilter.calculate_pcm_samples(Unknown Source)at javazoom.jl.decoder.LayerIIIDecoder.decode(Unknown Source)at javazoom.jl.decoder.LayerIIIDecoder.decodeFrame(Unknown Source)","body":"Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 1at javazoom.spi.mpeg.sampled.convert.DecodedMpegAudioInputStrea&zwnj;&#8203;m$DMAISObuffer.appen&zwnj;&#8203;d(Unknown Source)at javazoom.jl.decoder.Obuffer.appendSamples(Unknown Source)at javazoom.jl.decoder.SynthesisFilter.compute_pcm_samples(Unkn&zwnj;&#8203;own Source)at javazoom.jl.decoder.SynthesisFilter.calculate_pcm_samples(Un&zwnj;&#8203;known Source)at javazoom.jl.decoder.LayerIIIDecoder.decode(Unknown Source)at javazoom.jl.decoder.LayerIIIDecoder.decodeFrame(Unknown Source)"},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1244150486,"post_id":938316,"comment_id":761406,"body_markdown":"at javazoom.jl.decoder.Decoder.decodeFrame(Unknown Source)at javazoom.spi.mpeg.sampled.convert.DecodedMpegAudioInputStream.execute(Unknown Source)at org.tritonus.share.TCircularBuffer.read(TCircularBuffer.java:138)at org.tritonus.share.sampled.convert.TAsynchronousFilteredAudioInputStream.read(TAsynchronousFilteredAudioInputStream.java:189)at org.tritonus.share.sampled.convert.TAsynchronousFilteredAudioInputStream.read(TAsynchronousFilteredAudioInputStream.java:175)","body":"at javazoom.jl.decoder.Decoder.decodeFrame(Unknown Source)at javazoom.spi.mpeg.sampled.convert.DecodedMpegAudioInputStrea&zwnj;&#8203;m.execute(Unknown Source)at org.tritonus.share.TCircularBuffer.read(TCircularBuffer.java&zwnj;&#8203;:138)at org.tritonus.share.sampled.convert.TAsynchronousFilteredAudi&zwnj;&#8203;oInputStream.read(TA&zwnj;&#8203;synchronousFilteredA&zwnj;&#8203;udioInputStream.java&zwnj;&#8203;:189)at org.tritonus.share.sampled.convert.TAsynchronousFilteredAudi&zwnj;&#8203;oInputStream.read(TA&zwnj;&#8203;synchronousFilteredA&zwnj;&#8203;udioInputStream.java&zwnj;&#8203;:175)"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1244179611,"post_id":938316,"comment_id":762635,"body_markdown":"Okay, well you&#39;d probably want to debug into that. You may need to handle the stereo to mono conversion yourself.","body":"Okay, well you&#39;d probably want to debug into that. You may need to handle the stereo to mono conversion yourself."},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1245257273,"post_id":938316,"comment_id":817107,"body_markdown":"one last question:when gettin the decodedFormat we&#39;re choosing little endian (big endian = false). If I write &#39;true&#39;, will the data in decodedFormat be stored in big endian format? If so I won&#39;t need to manipulate the bytes in order to get a double value type for each sample.","body":"one last question:when gettin the decodedFormat we&#39;re choosing little endian (big endian = false). If I write &#39;true&#39;, will the data in decodedFormat be stored in big endian format? If so I won&#39;t need to manipulate the bytes in order to get a double value type for each sample."},{"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"score":0,"creation_date":1245621087,"post_id":938316,"comment_id":834694,"body_markdown":"At the end of the process I&#39;ll get a number of arrays containing the mel coefficients, is it possible to use a k-mean algorithm?","body":"At the end of the process I&#39;ll get a number of arrays containing the mel coefficients, is it possible to use a k-mean algorithm?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1245624566,"post_id":938316,"comment_id":834811,"body_markdown":"@dedalo: In terms of big-endianness: Don&#39;t know off hand, but I&#39;d expect so. As for k-mean... no idea, not knowing what it is.","body":"@dedalo: In terms of big-endianness: Don&#39;t know off hand, but I&#39;d expect so. As for k-mean... no idea, not knowing what it is."},{"owner":{"account_id":1352935,"reputation":2213,"user_id":1291961,"accept_rate":79,"display_name":"Anuj Kulkarni"},"score":3,"creation_date":1381019356,"post_id":938316,"comment_id":28417494,"body_markdown":"i tried this sample and got this error : javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input file\n\tat javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1187)","body":"i tried this sample and got this error : javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input file \tat javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSys&zwnj;&#8203;tem.java:1187)"},{"owner":{"account_id":5398427,"reputation":116,"user_id":4298913,"accept_rate":62,"display_name":"Harry Saliba"},"score":0,"creation_date":1453236278,"post_id":938316,"comment_id":57511260,"body_markdown":"I had the same problem as @BigShow and checked the documentation [here](https://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioFileFormat.Type.html) and the list of supported formats **does not include mpeg 3**.  To fix this is converted my mpeg 3 file to wave and the code worked flawlessly.","body":"I had the same problem as @BigShow and checked the documentation <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioFileFormat.Type.html\" rel=\"nofollow noreferrer\">here</a> and the list of supported formats <b>does not include mpeg 3</b>.  To fix this is converted my mpeg 3 file to wave and the code worked flawlessly."},{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":0,"creation_date":1520242781,"post_id":938316,"comment_id":85219516,"body_markdown":"@HarrySaliba - if you install the library that&#39;s linked in the answer, it *adds mp3 to the supported formats*.","body":"@HarrySaliba - if you install the library that&#39;s linked in the answer, it <i>adds mp3 to the supported formats</i>."},{"owner":{"account_id":4102367,"reputation":167,"user_id":3367493,"display_name":"Programmer dude"},"score":1,"creation_date":1566976023,"post_id":938316,"comment_id":101818671,"body_markdown":"I have installed all mp2spi, tritonus, jlayer but when i call AudioInputStream in = AudioSystem.getAudioInputStream(&quot;file.mp3&quot;); in.getFrameLength() always return -1. Any help?","body":"I have installed all mp2spi, tritonus, jlayer but when i call AudioInputStream in = AudioSystem.getAudioInputStream(&quot;file.mp3&quot;); in.getFrameLength() always return -1. Any help?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1566979282,"post_id":938316,"comment_id":101820171,"body_markdown":"@Programmerdude: Please ask a new question with a [mcve] rather than adding comments to a question that&#39;s over 10 years old.","body":"@Programmerdude: Please ask a new question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> rather than adding comments to a question that&#39;s over 10 years old."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":22,"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1680595905,"creation_date":1243927645,"answer_id":938316,"question_id":938304,"body_markdown":"From the [documentation for MP3SPI][1]:\r\n\r\n    File file = new File(filename);\r\n    AudioInputStream in= AudioSystem.getAudioInputStream(file);\r\n    AudioInputStream din = null;\r\n    AudioFormat baseFormat = in.getFormat();\r\n    AudioFormat decodedFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, \r\n                                                baseFormat.getSampleRate(),\r\n                                                16,\r\n                                                baseFormat.getChannels(),\r\n                                                baseFormat.getChannels() * 2,\r\n                                                baseFormat.getSampleRate(),\r\n                                                false);\r\n    din = AudioSystem.getAudioInputStream(decodedFormat, in);\r\n\r\nYou then just read data from `din` - it will be the &quot;raw&quot; data as per `decodedFormat`. (See the [docs for `AudioFormat`][2] for more information.)\r\n\r\n(Note that this sample code doesn&#39;t close the stream or anything like that - use appropriate try/finally blocks as normal.)\r\n\r\n\r\n  [1]: https://web.archive.org/web/20210118201557/http://www.javazoom.net/mp3spi/documents.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/javax/sound/sampled/AudioFormat.html","title":"How to get audio data from a MP3?","body":"<p>From the <a href=\"https://web.archive.org/web/20210118201557/http://www.javazoom.net/mp3spi/documents.html\" rel=\"nofollow noreferrer\">documentation for MP3SPI</a>:</p>\n<pre><code>File file = new File(filename);\nAudioInputStream in= AudioSystem.getAudioInputStream(file);\nAudioInputStream din = null;\nAudioFormat baseFormat = in.getFormat();\nAudioFormat decodedFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, \n                                            baseFormat.getSampleRate(),\n                                            16,\n                                            baseFormat.getChannels(),\n                                            baseFormat.getChannels() * 2,\n                                            baseFormat.getSampleRate(),\n                                            false);\ndin = AudioSystem.getAudioInputStream(decodedFormat, in);\n</code></pre>\n<p>You then just read data from <code>din</code> - it will be the &quot;raw&quot; data as per <code>decodedFormat</code>. (See the <a href=\"http://java.sun.com/javase/6/docs/api/javax/sound/sampled/AudioFormat.html\" rel=\"nofollow noreferrer\">docs for <code>AudioFormat</code></a> for more information.)</p>\n<p>(Note that this sample code doesn't close the stream or anything like that - use appropriate try/finally blocks as normal.)</p>\n"},{"tags":[],"owner":{"account_id":31052,"reputation":3138,"user_id":85021,"accept_rate":75,"display_name":"sybreon"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1243929235,"creation_date":1243929235,"answer_id":938389,"question_id":938304,"body_markdown":"The data that you want are the actual samples, while MP3 represents the data differently. So, like what everyone else has said - you need a library to decode the MP3 data into actual samples for your purpose.","title":"How to get audio data from a MP3?","body":"<p>The data that you want are the actual samples, while MP3 represents the data differently. So, like what everyone else has said - you need a library to decode the MP3 data into actual samples for your purpose.</p>\n"},{"tags":[],"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1243930330,"creation_date":1243930330,"answer_id":938443,"question_id":938304,"body_markdown":"As mentioned in the other answers, you need a decoder to decode MP3 into regular audio samples.\r\n\r\nOne popular option would be [JavaLayer][1] (LGPL).\r\n\r\n\r\n  [1]: http://www.javazoom.net/javalayer/sources.html","title":"How to get audio data from a MP3?","body":"<p>As mentioned in the other answers, you need a decoder to decode MP3 into regular audio samples.</p>\n\n<p>One popular option would be <a href=\"http://www.javazoom.net/javalayer/sources.html\" rel=\"nofollow noreferrer\">JavaLayer</a> (LGPL).</p>\n"}],"owner":{"account_id":40038,"reputation":2551,"user_id":115820,"accept_rate":78,"display_name":"dedalo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40721,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":938316,"answer_count":3,"score":20,"last_activity_date":1680595905,"creation_date":1243927306,"question_id":938304,"body_markdown":"I&#39;m working on an application that has to process audio files. When using mp3 files I&#39;m not sure how to handle data (the data I&#39;m interested in are the the audio bytes, the ones that represent what we hear).\r\n\r\nIf I&#39;m using a wav file I know I have a 44 bytes header and then the data. When it comes to an mp3, I&#39;ve read that they are composed by frames, each frame containing a header and audio data. Is it possible to get all the audio data from a mp3 file? \r\n\r\nI&#39;m using java (I&#39;ve added MP3SPI, Jlayer, and Tritonus) and I&#39;m able to get the bytes from the file, but I&#39;m not sure about what these bytes represent or how to handle then.","title":"How to get audio data from a MP3?","body":"<p>I'm working on an application that has to process audio files. When using mp3 files I'm not sure how to handle data (the data I'm interested in are the the audio bytes, the ones that represent what we hear).</p>\n\n<p>If I'm using a wav file I know I have a 44 bytes header and then the data. When it comes to an mp3, I've read that they are composed by frames, each frame containing a header and audio data. Is it possible to get all the audio data from a mp3 file? </p>\n\n<p>I'm using java (I've added MP3SPI, Jlayer, and Tritonus) and I'm able to get the bytes from the file, but I'm not sure about what these bytes represent or how to handle then.</p>\n"},{"tags":["java","function","class"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1680591890,"post_id":75925814,"comment_id":133919771,"body_markdown":"It&#39;s not clear to me what you want your program to do. What `char` is the user supposed to enter? What do you want the program to do after the user enters this `char`?","body":"It&#39;s not clear to me what you want your program to do. What <code>char</code> is the user supposed to enter? What do you want the program to do after the user enters this <code>char</code>?"},{"owner":{"account_id":26995409,"reputation":9,"user_id":20626259,"display_name":"White"},"score":0,"creation_date":1680594771,"post_id":75925814,"comment_id":133920413,"body_markdown":"Like the letter &#39;s&#39; or &#39;S&#39; and the program would begin the round  for each match","body":"Like the letter &#39;s&#39; or &#39;S&#39; and the program would begin the round  for each match"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1680595142,"post_id":75925814,"comment_id":133920489,"body_markdown":"Do you know how to write Java code that gets a `char` entered by the user?","body":"Do you know how to write Java code that gets a <code>char</code> entered by the user?"}],"answers":[{"comments":[{"owner":{"account_id":26995409,"reputation":9,"user_id":20626259,"display_name":"White"},"score":0,"creation_date":1680626241,"post_id":75926961,"comment_id":133928555,"body_markdown":"Thank you very much for the helping me with my code, it was very insightful I made I am not finished but I made some progress thanks to the help","body":"Thank you very much for the helping me with my code, it was very insightful I made I am not finished but I made some progress thanks to the help"}],"tags":[],"owner":{"account_id":12301810,"reputation":1,"user_id":8975941,"display_name":"robot111"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680595822,"creation_date":1680595822,"answer_id":75926961,"question_id":75925814,"body_markdown":"```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Welcome to the FIFA 2023 World Cup&quot;);\r\n        System.out.println(&quot;Teams that will be facing off in Group A, Group B, Group C &amp; Group D&quot; + &quot;\\n&quot;);\r\n        Teams.print(&quot;A&quot;);\r\n        Teams.print(&quot;B&quot;);\r\n        Teams.print(&quot;C&quot;);\r\n        Teams.print(&quot;D&quot;);\r\n    }\r\n}\r\n\r\n```\r\nTeams.java\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Teams {\r\n\r\n    private static List&lt;String&gt; getGroup(String groupName) {\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        if (&quot;A&quot;.equals(groupName)) {\r\n            list.add(&quot;Argentina&quot;);\r\n            list.add(&quot;Portugal&quot;);\r\n            list.add(&quot;England&quot;);\r\n            list.add(&quot;Germany&quot;);\r\n        } else if (&quot;B&quot;.equals(groupName)) {\r\n            list.add(&quot;United States&quot;);\r\n            list.add(&quot;France&quot;);\r\n            list.add(&quot;Spain&quot;);\r\n            list.add(&quot;Japan&quot;);\r\n        } else if (&quot;C&quot;.equals(groupName)) {\r\n            list.add(&quot;Canada&quot;);\r\n            list.add(&quot;Mexico&quot;);\r\n            list.add(&quot;Poland&quot;);\r\n            list.add(&quot;South Korea&quot;);\r\n        } else {\r\n            list.add(&quot;Uruguay&quot;);\r\n            list.add(&quot;Wales&quot;);\r\n            list.add(&quot;Switzerland&quot;);\r\n            list.add(&quot;Croatia&quot;);\r\n        }\r\n        return list;\r\n    }\r\n\r\n    public static void print(String groupName) {\r\n        List&lt;String&gt; teams = getGroup(groupName);\r\n        System.out.println(&quot;Group &quot; + groupName + &quot;:&quot;);\r\n        System.out.println(teams.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams.get(0) + &quot;\\n&quot;);\r\n        System.out.println(teams.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams.get(1) + &quot;\\n&quot;);\r\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\r\n    }\r\n\r\n}\r\n\r\n```\r\n","title":"World Cup Java Code ( Creating a User Input Which Prompts the User when to Begin a Round)","body":"<pre><code>public class Main {\n    public static void main(String[] args) {\n        System.out.println(&quot;Welcome to the FIFA 2023 World Cup&quot;);\n        System.out.println(&quot;Teams that will be facing off in Group A, Group B, Group C &amp; Group D&quot; + &quot;\\n&quot;);\n        Teams.print(&quot;A&quot;);\n        Teams.print(&quot;B&quot;);\n        Teams.print(&quot;C&quot;);\n        Teams.print(&quot;D&quot;);\n    }\n}\n\n</code></pre>\n<p>Teams.java</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Teams {\n\n    private static List&lt;String&gt; getGroup(String groupName) {\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        if (&quot;A&quot;.equals(groupName)) {\n            list.add(&quot;Argentina&quot;);\n            list.add(&quot;Portugal&quot;);\n            list.add(&quot;England&quot;);\n            list.add(&quot;Germany&quot;);\n        } else if (&quot;B&quot;.equals(groupName)) {\n            list.add(&quot;United States&quot;);\n            list.add(&quot;France&quot;);\n            list.add(&quot;Spain&quot;);\n            list.add(&quot;Japan&quot;);\n        } else if (&quot;C&quot;.equals(groupName)) {\n            list.add(&quot;Canada&quot;);\n            list.add(&quot;Mexico&quot;);\n            list.add(&quot;Poland&quot;);\n            list.add(&quot;South Korea&quot;);\n        } else {\n            list.add(&quot;Uruguay&quot;);\n            list.add(&quot;Wales&quot;);\n            list.add(&quot;Switzerland&quot;);\n            list.add(&quot;Croatia&quot;);\n        }\n        return list;\n    }\n\n    public static void print(String groupName) {\n        List&lt;String&gt; teams = getGroup(groupName);\n        System.out.println(&quot;Group &quot; + groupName + &quot;:&quot;);\n        System.out.println(teams.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams.get(0) + &quot;\\n&quot;);\n        System.out.println(teams.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams.get(1) + &quot;\\n&quot;);\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\n    }\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":26995409,"reputation":9,"user_id":20626259,"display_name":"White"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1680595822,"creation_date":1680586692,"question_id":75925814,"body_markdown":"I am trying to create a class which allows to provide user input using a &#39;char&#39; to allow the user of the program to being each round of a Round 16 World Cup. I am stump as I&#39;ve been trying to create it on a separate class file and then call it to the Main Class whenever it is needed.\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Scanner;\r\n\r\npublic class WorldCupMain {\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Welcome to the FIFA 2023 World Cup&quot;);\r\n        System.out.println(&quot;Teams that will be facing off in Group A, Group B, Group C &amp; Group D&quot; + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Group A:&quot;);\r\n        Teams GroupA = new Teams();\r\n        GroupA.addTeam(&quot;Argentina&quot;);\r\n        GroupA.addTeam(&quot;Portugal&quot;);\r\n        GroupA.addTeam(&quot;England&quot;);\r\n        GroupA.addTeam(&quot;Germany&quot;);\r\n        ArrayList&lt;String&gt; teams = GroupA.getList();\r\n        System.out.println(teams.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams.get(0) + &quot;\\n&quot;);\r\n        System.out.println(teams.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams.get(1) + &quot;\\n&quot;);\r\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\r\n        System.out.println(&quot;Group B:&quot;);\r\n        Teams GroupB = new Teams();\r\n        GroupB.addTeam(&quot;United States&quot;);\r\n        GroupB.addTeam(&quot;France&quot;);\r\n        GroupB.addTeam(&quot;Spain&quot;);\r\n        GroupB.addTeam(&quot;Japan&quot;);\r\n        ArrayList&lt;String&gt; teams2 = GroupB.getList();\r\n        System.out.println(teams2.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams2.get(0) + &quot;\\n&quot;);\r\n        System.out.println(teams2.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams2.get(1) + &quot;\\n&quot;);\r\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\r\n        System.out.println(&quot;Group C:&quot;);\r\n        Teams GroupC = new Teams();\r\n        GroupC.addTeam(&quot;Canada&quot;);\r\n        GroupC.addTeam(&quot;Mexico&quot;);\r\n        GroupC.addTeam(&quot;Poland&quot;);\r\n        GroupC.addTeam(&quot;South Korea&quot;);\r\n        ArrayList&lt;String&gt; teams3 = GroupC.getList();\r\n        System.out.println(teams3.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams3.get(0) + &quot;\\n&quot;);\r\n        System.out.println(teams3.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams3.get(1) + &quot;\\n&quot;);\r\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\r\n        System.out.println(&quot;Group D:&quot;);\r\n        Teams GroupD = new Teams();\r\n        GroupD.addTeam(&quot;Uruguay&quot;);\r\n        GroupD.addTeam(&quot;Wales&quot;);\r\n        GroupD.addTeam(&quot;Switzerland&quot;);\r\n        GroupD.addTeam(&quot;Croatia&quot;);\r\n        ArrayList&lt;String&gt; teams4 = GroupD.getList();\r\n        System.out.println(teams4.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams4.get(0) + &quot;\\n&quot;);\r\n        System.out.println(teams4.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams4.get(1) + &quot;\\n&quot;);\r\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\r\n    }\r\n}\r\n```\r\nTeams.java on a separate class file.\r\n```java\r\nimport java.util.ArrayList;\r\n\r\npublic class Teams {\r\n    /* GROUP A */\r\n    ArrayList&lt;String&gt; groupA;\r\n\r\n    public Teams() {\r\n        groupA = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n    public void addTeam(String team) {\r\n        groupA.add(team);\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getList() {\r\n        return groupA;\r\n    }\r\n}\r\n```\r\nI have been trying to get it to work but I am not quite sure how to. Please any suggestion on what I could do to create a class to perform as a function rather placing it inside of the Main class directly.","title":"World Cup Java Code ( Creating a User Input Which Prompts the User when to Begin a Round)","body":"<p>I am trying to create a class which allows to provide user input using a 'char' to allow the user of the program to being each round of a Round 16 World Cup. I am stump as I've been trying to create it on a separate class file and then call it to the Main Class whenever it is needed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Scanner;\n\npublic class WorldCupMain {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Welcome to the FIFA 2023 World Cup&quot;);\n        System.out.println(&quot;Teams that will be facing off in Group A, Group B, Group C &amp; Group D&quot; + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Group A:&quot;);\n        Teams GroupA = new Teams();\n        GroupA.addTeam(&quot;Argentina&quot;);\n        GroupA.addTeam(&quot;Portugal&quot;);\n        GroupA.addTeam(&quot;England&quot;);\n        GroupA.addTeam(&quot;Germany&quot;);\n        ArrayList&lt;String&gt; teams = GroupA.getList();\n        System.out.println(teams.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams.get(0) + &quot;\\n&quot;);\n        System.out.println(teams.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams.get(1) + &quot;\\n&quot;);\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\n        System.out.println(&quot;Group B:&quot;);\n        Teams GroupB = new Teams();\n        GroupB.addTeam(&quot;United States&quot;);\n        GroupB.addTeam(&quot;France&quot;);\n        GroupB.addTeam(&quot;Spain&quot;);\n        GroupB.addTeam(&quot;Japan&quot;);\n        ArrayList&lt;String&gt; teams2 = GroupB.getList();\n        System.out.println(teams2.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams2.get(0) + &quot;\\n&quot;);\n        System.out.println(teams2.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams2.get(1) + &quot;\\n&quot;);\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\n        System.out.println(&quot;Group C:&quot;);\n        Teams GroupC = new Teams();\n        GroupC.addTeam(&quot;Canada&quot;);\n        GroupC.addTeam(&quot;Mexico&quot;);\n        GroupC.addTeam(&quot;Poland&quot;);\n        GroupC.addTeam(&quot;South Korea&quot;);\n        ArrayList&lt;String&gt; teams3 = GroupC.getList();\n        System.out.println(teams3.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams3.get(0) + &quot;\\n&quot;);\n        System.out.println(teams3.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams3.get(1) + &quot;\\n&quot;);\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\n        System.out.println(&quot;Group D:&quot;);\n        Teams GroupD = new Teams();\n        GroupD.addTeam(&quot;Uruguay&quot;);\n        GroupD.addTeam(&quot;Wales&quot;);\n        GroupD.addTeam(&quot;Switzerland&quot;);\n        GroupD.addTeam(&quot;Croatia&quot;);\n        ArrayList&lt;String&gt; teams4 = GroupD.getList();\n        System.out.println(teams4.get(3) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams4.get(0) + &quot;\\n&quot;);\n        System.out.println(teams4.get(2) + &quot; &quot; + &quot; vs.&quot; + &quot; &quot; + teams4.get(1) + &quot;\\n&quot;);\n        System.out.println(&quot;///////////////////////////////////////////&quot;);\n    }\n}\n</code></pre>\n<p>Teams.java on a separate class file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\n\npublic class Teams {\n    /* GROUP A */\n    ArrayList&lt;String&gt; groupA;\n\n    public Teams() {\n        groupA = new ArrayList&lt;&gt;();\n    }\n\n    public void addTeam(String team) {\n        groupA.add(team);\n    }\n\n    public ArrayList&lt;String&gt; getList() {\n        return groupA;\n    }\n}\n</code></pre>\n<p>I have been trying to get it to work but I am not quite sure how to. Please any suggestion on what I could do to create a class to perform as a function rather placing it inside of the Main class directly.</p>\n"},{"tags":["java","serialization","jackson","wildfly"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1680535843,"post_id":75918282,"comment_id":133911100,"body_markdown":"What kind of error are you seeing? With the Jackson annotations being used it should automatically enable Jackson by default.","body":"What kind of error are you seeing? With the Jackson annotations being used it should automatically enable Jackson by default."},{"owner":{"account_id":3762979,"reputation":61,"user_id":3127347,"display_name":"user3127347"},"score":0,"creation_date":1680558004,"post_id":75918282,"comment_id":133915907,"body_markdown":"Thanks for taking a look.  There is no error on the server side, it&#39;s just returning a different payload to the client from what it did previously.  The client is expecting a Json response of `[ {item1}, {item2} ]` but is now receiving `{ &quot;objects&quot;: [ {item}, {item2}] }` so it reports an error about receiving an object instead of an array.  So it looks like the custom Jackson behaviour is not being applied by the server.","body":"Thanks for taking a look.  There is no error on the server side, it&#39;s just returning a different payload to the client from what it did previously.  The client is expecting a Json response of <code>[ {item1}, {item2} ]</code> but is now receiving <code>{ &quot;objects&quot;: [ {item}, {item2}] }</code> so it reports an error about receiving an object instead of an array.  So it looks like the custom Jackson behaviour is not being applied by the server."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1680568383,"post_id":75918282,"comment_id":133917046,"body_markdown":"You might want to try setting the `resteasy-prefer-jackson-over-jsonb` attribute to `true`. `/subsystem=jaxrs:write-attribute(name=resteasy-prefer-jackson-over-jsonb, value=true)`","body":"You might want to try setting the <code>resteasy-prefer-jackson-over-jsonb</code> attribute to <code>true</code>. <code>&#47;subsystem=jaxrs:write-attribute(name=resteasy-prefer-jackso&zwnj;&#8203;n-over-jsonb, value=true)</code>"},{"owner":{"account_id":3762979,"reputation":61,"user_id":3127347,"display_name":"user3127347"},"score":0,"creation_date":1680570166,"post_id":75918282,"comment_id":133917189,"body_markdown":"Thanks James.  I set it using `-D&quot;resteasy.preferJacksonOverJsonB&quot;=&quot;true&quot;` and it changes the response so that &#39;null&#39; values are included (i.e. now it is ignoring the @JsonInclude(JsonInclude.Include.NON_NULL) annotation on the SomeObject class):\n\n`{ &quot;objects&quot;: [ { &quot;a&quot;: &quot;a1&quot;, &quot;b&quot;: &quot;b1&quot;, &quot;c&quot;: null }, { &quot;a&quot;: &quot;a2&quot;, &quot;b&quot;: null, &quot;c&quot;: &quot;c2&quot; } ] }`","body":"Thanks James.  I set it using <code>-D&quot;resteasy.preferJacksonOverJsonB&quot;=&quot;true&quot;</code> and it changes the response so that &#39;null&#39; values are included (i.e. now it is ignoring the @JsonInclude(JsonInclude.Include.NON_NULL) annotation on the SomeObject class):  <code>{ &quot;objects&quot;: [ { &quot;a&quot;: &quot;a1&quot;, &quot;b&quot;: &quot;b1&quot;, &quot;c&quot;: null }, { &quot;a&quot;: &quot;a2&quot;, &quot;b&quot;: null, &quot;c&quot;: &quot;c2&quot; } ] }</code>"},{"owner":{"account_id":3762979,"reputation":61,"user_id":3127347,"display_name":"user3127347"},"score":0,"creation_date":1680584093,"post_id":75918282,"comment_id":133918574,"body_markdown":"If it helps, I wrote a unit test that calls `new ObjectMapper.writeValueAsString(wrapper)` with an instance of ResponseListWrapper (same as in MainResource) and it correctly returns `[{&quot;a&quot;:&quot;a1&quot;,&quot;b&quot;:&quot;b1&quot;},{&quot;a&quot;:&quot;a2&quot;,&quot;c&quot;:&quot;c2&quot;}]`.  So it&#39;s not a problem with the serializer class or how the classes are annotated.","body":"If it helps, I wrote a unit test that calls <code>new ObjectMapper.writeValueAsString(wrapper)</code> with an instance of ResponseListWrapper (same as in MainResource) and it correctly returns <code>[{&quot;a&quot;:&quot;a1&quot;,&quot;b&quot;:&quot;b1&quot;},{&quot;a&quot;:&quot;a2&quot;,&quot;c&quot;:&quot;c2&quot;}]</code>.  So it&#39;s not a problem with the serializer class or how the classes are annotated."}],"answers":[{"tags":[],"owner":{"account_id":3762979,"reputation":61,"user_id":3127347,"display_name":"user3127347"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680594821,"creation_date":1680594821,"answer_id":75926814,"question_id":75918282,"body_markdown":"Finally tracked down the cause.  We have a custom authentication/login module that was using it&#39;s own copy of the Jackson libraries (jackson-core-2.13.4.jar, jackson-databind-2.13.4.2.jar, jackson-annotations-2.13.4.jar).  I removed them from **module.xml** and instead added the following to the dependencies in module.xml:\r\n```\r\n&lt;module name=&quot;org.jboss.resteasy.resteasy-jaxrs&quot;/&gt;\r\n&lt;module name=&quot;org.jboss.resteasy.resteasy-jackson2-provider&quot;/&gt;\r\n```\r\nAfter restarting Wildfly, the payloads were returned as expected.  I did use the `-D&quot;resteasy.preferJacksonOverJsonB&quot;=&quot;true&quot;` setting as suggested by James (thank you!).","title":"Custom Jackson serialization into Json is not working in Wildfly 26","body":"<p>Finally tracked down the cause.  We have a custom authentication/login module that was using it's own copy of the Jackson libraries (jackson-core-2.13.4.jar, jackson-databind-2.13.4.2.jar, jackson-annotations-2.13.4.jar).  I removed them from <strong>module.xml</strong> and instead added the following to the dependencies in module.xml:</p>\n<pre><code>&lt;module name=&quot;org.jboss.resteasy.resteasy-jaxrs&quot;/&gt;\n&lt;module name=&quot;org.jboss.resteasy.resteasy-jackson2-provider&quot;/&gt;\n</code></pre>\n<p>After restarting Wildfly, the payloads were returned as expected.  I did use the <code>-D&quot;resteasy.preferJacksonOverJsonB&quot;=&quot;true&quot;</code> setting as suggested by James (thank you!).</p>\n"}],"owner":{"account_id":3762979,"reputation":61,"user_id":3127347,"display_name":"user3127347"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":546,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680594821,"creation_date":1680516432,"question_id":75918282,"body_markdown":"I am trying to upgrade a large, complex project from Wildfly 23 to Wildfly 26 but the Json responses are no longer returning the payloads we expect.  Two examples are:\r\n\r\n1) An object that wraps a list is supposed to return a Json array of the wrapped list but instead it is returning the wrapped object along with the list, i.e. it should return `[ ... ]` but it is returning `{ &quot;objects&quot;: [ ... ] }`.\r\n\r\nThe wrapper class uses **@JsonValue** on the list getter method, which is supposed to make this work but the custom serializer on the list class is not being called.\r\n\r\n2) Date fields annotated with ```@JsonFormat(pattern = ...some pattern...)``` do not get formatted.\r\n\r\nIt is a Java 11 project (11.0.14.1, Eclipse Adoptium) that uses Maven 3.6.3 to create a WAR file that is deployed to Wildfly 26 (built on Windows 10 Enterprise and deployed to Windows Server 2019 Standard).  I have created a very cut-down example that illustrates the behaviour (classes/files shown below).\r\n\r\nI build the project using `mvn clean verify` which creates **target\\jsontest.war** then copy this to the **standalone\\deployments** directory where it deploys successfully.  There is a custom login module used, but I don&#39;t believe it is relevant to the issue as the endpoint is being reached.\r\n\r\nThere are 2 warnings in server.log which I do not believe are relevant:\r\n```\r\nWARN  [org.jboss.as.dependency.deprecated] (MSC service thread 1-5) WFLYSRV0221: Deployment &quot;deployment.jsontest.war&quot; is using a deprecated module (&quot;javax.api&quot;) which may be removed in future versions without notice.\r\nWARN  [org.jboss.as.dependency.deprecated] (MSC service thread 1-5) WFLYSRV0221: Deployment &quot;deployment.jsontest.war&quot; is using a deprecated module (&quot;org.jboss.resteasy.resteasy-jaxrs&quot;) which may be removed in future versions without notice.\r\n```\r\n\r\nAny assistance in getting this working would be much appreciated.\r\n\r\n**pom.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jsontest&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.1&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.7.1&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.7&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;jsontest&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;webResources&gt;\r\n                        &lt;resource&gt;\r\n                            &lt;directory&gt;${project.basedir}/src/main/webapp&lt;/directory&gt;\r\n                        &lt;/resource&gt;\r\n                    &lt;/webResources&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nUnder **src/main/java/org/example/jsontest** there are the following classes:\r\n\r\n**MainResource.java**\r\n```\r\npackage org.example.jsontest;\r\n\r\nimport javax.ws.rs.GET;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.core.MediaType;\r\nimport javax.ws.rs.core.Response;\r\nimport java.util.List;\r\n\r\n@Path(&quot;/&quot;)\r\npublic class MainResource {\r\n\r\n    @GET\r\n    @Path(&quot;json&quot;)\r\n    @Produces({ MediaType.APPLICATION_JSON })\r\n    public Response getJsonExample() {\r\n        // We want to return a Json array containing 2 objects\r\n        final SomeObject object1 = new SomeObject().setA(&quot;a1&quot;).setB(&quot;b1&quot;);\r\n        final SomeObject object2 = new SomeObject().setA(&quot;a2&quot;).setC(&quot;c2&quot;);\r\n        final ResponseList&lt;SomeObject&gt; objectList = new ResponseList&lt;&gt;();\r\n        objectList.addAll(List.of(object1, object2));\r\n        final ResponseListWrapper&lt;SomeObject&gt; wrapper = new ResponseListWrapper&lt;&gt;();\r\n        wrapper.setObjects(objectList);\r\n        return Response.ok(wrapper).build();\r\n    }\r\n}\r\n```\r\n\r\n**ResponseListWrapper.java**\r\n```\r\npackage org.example.jsontest;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\nimport com.fasterxml.jackson.annotation.JsonInclude.Include;\r\nimport com.fasterxml.jackson.annotation.JsonValue;\r\n\r\n@JsonInclude(value = Include.NON_NULL)\r\npublic class ResponseListWrapper&lt;T&gt; {\r\n\r\n    private ResponseList&lt;T&gt; objects;\r\n\r\n    public ResponseListWrapper() {\r\n        objects = new ResponseList&lt;&gt;();\r\n    }\r\n\r\n    public ResponseListWrapper(ResponseList&lt;T&gt; objects) {\r\n        setObjects(objects);\r\n    }\r\n\r\n    /**\r\n     * @JsonValue is supposed to indicate that the value from the method is to be used to produce the Json output.\r\n     * We want to return a Json array, not the wrapped object with an array, i.e.\r\n     *\r\n     * [ { &quot;a&quot;: &quot;a1&quot;, &quot;b&quot;: &quot;b1&quot; }, { &quot;a&quot;: &quot;a2&quot;, &quot;c&quot;: &quot;c2&quot; } ]\r\n     *\r\n     * But instead we get the wrapped object:\r\n     * { &quot;objects&quot;: [ { &quot;a&quot;: &quot;a1&quot;, &quot;b&quot;: &quot;b1&quot; }, { &quot;a&quot;: &quot;a2&quot;, &quot;c&quot;: &quot;c2&quot; } ] }\r\n     *\r\n     * ResponseList is annotated with @JsonSerialize(using = JacksonListSerializer.class)\r\n     * but JacksonListSerializer.serialize() is never called.\r\n     *\r\n     */\r\n    @JsonValue\r\n    public ResponseList&lt;T&gt; getObjects() {\r\n        return objects;\r\n    }\r\n\r\n    public void setObjects(ResponseList&lt;T&gt; objects) {\r\n        this.objects = objects;\r\n    }\r\n}\r\n```\r\n\r\n**ResponseList.java**\r\n```\r\npackage org.example.jsontest;\r\n\r\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\n\r\n/**\r\n *\r\n * @JsonSerialize is supposed to tell Jackson to use JacksonListSerializer when generating a Json response but it is not\r\n * being called.\r\n */\r\n@JsonSerialize(using = JacksonListSerializer.class)\r\npublic class ResponseList&lt;T&gt; extends ArrayList&lt;T&gt; {\r\n\r\n    private static final long serialVersionUID = -6120242076197274777L;\r\n\r\n    public ResponseList() {\r\n    }\r\n\r\n    public ResponseList(Collection&lt;? extends T&gt; c) {\r\n        super(c);\r\n    }\r\n\r\n    public ResponseList(int initialCapacity) {\r\n        super(initialCapacity);\r\n    }\r\n}\r\n```\r\n\r\n**JacksonListSerializer.java**\r\n```\r\npackage org.example.jsontest;\r\n\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.JsonSerializer;\r\nimport com.fasterxml.jackson.databind.SerializerProvider;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class JacksonListSerializer extends JsonSerializer&lt;ResponseList&lt;?&gt;&gt; {\r\n\r\n    @Override\r\n    public void serialize(ResponseList&lt;?&gt; list, JsonGenerator generator, SerializerProvider provider)\r\n            throws IOException {\r\n        generator.writeStartArray();\r\n        if (list != null) {\r\n            for (Object item : list) {\r\n                generator.writeObject(item);\r\n            }\r\n        }\r\n        generator.writeEndArray();\r\n    }\r\n}\r\n```\r\n\r\n**SomeObject.java**\r\n```\r\npackage org.example.jsontest;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\n\r\nimport java.io.Serializable;\r\n\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class SomeObject implements Serializable {\r\n\r\n    private static final long serialVersionUID = 6725549179169119963L;\r\n\r\n    private String a;\r\n    private String b;\r\n    private String c;\r\n\r\n    public String getA() {\r\n        return a;\r\n    }\r\n\r\n    public SomeObject setA(final String a) {\r\n        this.a = a;\r\n        return this;\r\n    }\r\n\r\n    public String getB() {\r\n        return b;\r\n    }\r\n\r\n    public SomeObject setB(final String b) {\r\n        this.b = b;\r\n        return this;\r\n    }\r\n\r\n    public String getC() {\r\n        return c;\r\n    }\r\n\r\n    public SomeObject setC(final String c) {\r\n        this.c = c;\r\n        return this;\r\n    }\r\n}\r\n```\r\n\r\nUnder **src/main/webapp** there are the following files:\r\n\r\n**jboss-deployment-structure.xml**\r\n```\r\n&lt;jboss-deployment-structure&gt;\r\n    &lt;deployment&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;module name=&quot;org.wildfly.security.elytron&quot;/&gt;\r\n            &lt;module name=&quot;org.wildfly.extension.elytron&quot;/&gt;\r\n            &lt;module name=&quot;javax.api&quot;/&gt;\r\n            &lt;module name=&quot;org.jboss.resteasy.resteasy-jaxrs&quot;/&gt;\r\n            &lt;module name=&quot;org.jboss.resteasy.resteasy-jackson2-provider&quot;/&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/deployment&gt;\r\n&lt;/jboss-deployment-structure&gt;\r\n```\r\n\r\n**jboss-web.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n\r\n&lt;jboss-web xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://www.jboss.com/xml/ns/javaee&quot;\r\n           version=&quot;6.0&quot;\r\n           xsi:schemaLocation=&quot;http://www.jboss.com/xml/ns/javaee http://www.jboss.org/j2ee/schema/jboss-web_6_0.xsd&quot;&gt;\r\n\r\n    &lt;security-domain&gt;...removed...&lt;/security-domain&gt;\r\n    &lt;context-root&gt;/jsontest&lt;/context-root&gt;\r\n&lt;/jboss-web&gt;\r\n```\r\n\r\n**web.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;\r\n         version=&quot;3.1&quot;&gt;\r\n    &lt;display-name&gt;jsontest&lt;/display-name&gt;\r\n\r\n    &lt;!-- Security related settings have been removed --&gt;\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\n    &lt;session-config&gt;\r\n        &lt;session-timeout&gt;30&lt;/session-timeout&gt;\r\n        &lt;cookie-config&gt;\r\n            &lt;path&gt;/jsontest&lt;/path&gt;\r\n            &lt;http-only&gt;true&lt;/http-only&gt;\r\n            &lt;secure&gt;true&lt;/secure&gt;\r\n        &lt;/cookie-config&gt;\r\n        &lt;tracking-mode&gt;COOKIE&lt;/tracking-mode&gt;\r\n    &lt;/session-config&gt;\r\n&lt;/web-app&gt;\r\n```\r\n","title":"Custom Jackson serialization into Json is not working in Wildfly 26","body":"<p>I am trying to upgrade a large, complex project from Wildfly 23 to Wildfly 26 but the Json responses are no longer returning the payloads we expect.  Two examples are:</p>\n<ol>\n<li>An object that wraps a list is supposed to return a Json array of the wrapped list but instead it is returning the wrapped object along with the list, i.e. it should return <code>[ ... ]</code> but it is returning <code>{ &quot;objects&quot;: [ ... ] }</code>.</li>\n</ol>\n<p>The wrapper class uses <strong>@JsonValue</strong> on the list getter method, which is supposed to make this work but the custom serializer on the list class is not being called.</p>\n<ol start=\"2\">\n<li>Date fields annotated with <code>@JsonFormat(pattern = ...some pattern...)</code> do not get formatted.</li>\n</ol>\n<p>It is a Java 11 project (11.0.14.1, Eclipse Adoptium) that uses Maven 3.6.3 to create a WAR file that is deployed to Wildfly 26 (built on Windows 10 Enterprise and deployed to Windows Server 2019 Standard).  I have created a very cut-down example that illustrates the behaviour (classes/files shown below).</p>\n<p>I build the project using <code>mvn clean verify</code> which creates <strong>target\\jsontest.war</strong> then copy this to the <strong>standalone\\deployments</strong> directory where it deploys successfully.  There is a custom login module used, but I don't believe it is relevant to the issue as the endpoint is being reached.</p>\n<p>There are 2 warnings in server.log which I do not believe are relevant:</p>\n<pre><code>WARN  [org.jboss.as.dependency.deprecated] (MSC service thread 1-5) WFLYSRV0221: Deployment &quot;deployment.jsontest.war&quot; is using a deprecated module (&quot;javax.api&quot;) which may be removed in future versions without notice.\nWARN  [org.jboss.as.dependency.deprecated] (MSC service thread 1-5) WFLYSRV0221: Deployment &quot;deployment.jsontest.war&quot; is using a deprecated module (&quot;org.jboss.resteasy.resteasy-jaxrs&quot;) which may be removed in future versions without notice.\n</code></pre>\n<p>Any assistance in getting this working would be much appreciated.</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;jsontest&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n            &lt;version&gt;8.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.12.7.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.12.7&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;jsontest&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;webResources&gt;\n                        &lt;resource&gt;\n                            &lt;directory&gt;${project.basedir}/src/main/webapp&lt;/directory&gt;\n                        &lt;/resource&gt;\n                    &lt;/webResources&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Under <strong>src/main/java/org/example/jsontest</strong> there are the following classes:</p>\n<p><strong>MainResource.java</strong></p>\n<pre><code>package org.example.jsontest;\n\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.MediaType;\nimport javax.ws.rs.core.Response;\nimport java.util.List;\n\n@Path(&quot;/&quot;)\npublic class MainResource {\n\n    @GET\n    @Path(&quot;json&quot;)\n    @Produces({ MediaType.APPLICATION_JSON })\n    public Response getJsonExample() {\n        // We want to return a Json array containing 2 objects\n        final SomeObject object1 = new SomeObject().setA(&quot;a1&quot;).setB(&quot;b1&quot;);\n        final SomeObject object2 = new SomeObject().setA(&quot;a2&quot;).setC(&quot;c2&quot;);\n        final ResponseList&lt;SomeObject&gt; objectList = new ResponseList&lt;&gt;();\n        objectList.addAll(List.of(object1, object2));\n        final ResponseListWrapper&lt;SomeObject&gt; wrapper = new ResponseListWrapper&lt;&gt;();\n        wrapper.setObjects(objectList);\n        return Response.ok(wrapper).build();\n    }\n}\n</code></pre>\n<p><strong>ResponseListWrapper.java</strong></p>\n<pre><code>package org.example.jsontest;\n\nimport com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.annotation.JsonInclude.Include;\nimport com.fasterxml.jackson.annotation.JsonValue;\n\n@JsonInclude(value = Include.NON_NULL)\npublic class ResponseListWrapper&lt;T&gt; {\n\n    private ResponseList&lt;T&gt; objects;\n\n    public ResponseListWrapper() {\n        objects = new ResponseList&lt;&gt;();\n    }\n\n    public ResponseListWrapper(ResponseList&lt;T&gt; objects) {\n        setObjects(objects);\n    }\n\n    /**\n     * @JsonValue is supposed to indicate that the value from the method is to be used to produce the Json output.\n     * We want to return a Json array, not the wrapped object with an array, i.e.\n     *\n     * [ { &quot;a&quot;: &quot;a1&quot;, &quot;b&quot;: &quot;b1&quot; }, { &quot;a&quot;: &quot;a2&quot;, &quot;c&quot;: &quot;c2&quot; } ]\n     *\n     * But instead we get the wrapped object:\n     * { &quot;objects&quot;: [ { &quot;a&quot;: &quot;a1&quot;, &quot;b&quot;: &quot;b1&quot; }, { &quot;a&quot;: &quot;a2&quot;, &quot;c&quot;: &quot;c2&quot; } ] }\n     *\n     * ResponseList is annotated with @JsonSerialize(using = JacksonListSerializer.class)\n     * but JacksonListSerializer.serialize() is never called.\n     *\n     */\n    @JsonValue\n    public ResponseList&lt;T&gt; getObjects() {\n        return objects;\n    }\n\n    public void setObjects(ResponseList&lt;T&gt; objects) {\n        this.objects = objects;\n    }\n}\n</code></pre>\n<p><strong>ResponseList.java</strong></p>\n<pre><code>package org.example.jsontest;\n\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\n\n/**\n *\n * @JsonSerialize is supposed to tell Jackson to use JacksonListSerializer when generating a Json response but it is not\n * being called.\n */\n@JsonSerialize(using = JacksonListSerializer.class)\npublic class ResponseList&lt;T&gt; extends ArrayList&lt;T&gt; {\n\n    private static final long serialVersionUID = -6120242076197274777L;\n\n    public ResponseList() {\n    }\n\n    public ResponseList(Collection&lt;? extends T&gt; c) {\n        super(c);\n    }\n\n    public ResponseList(int initialCapacity) {\n        super(initialCapacity);\n    }\n}\n</code></pre>\n<p><strong>JacksonListSerializer.java</strong></p>\n<pre><code>package org.example.jsontest;\n\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.SerializerProvider;\n\nimport java.io.IOException;\n\npublic class JacksonListSerializer extends JsonSerializer&lt;ResponseList&lt;?&gt;&gt; {\n\n    @Override\n    public void serialize(ResponseList&lt;?&gt; list, JsonGenerator generator, SerializerProvider provider)\n            throws IOException {\n        generator.writeStartArray();\n        if (list != null) {\n            for (Object item : list) {\n                generator.writeObject(item);\n            }\n        }\n        generator.writeEndArray();\n    }\n}\n</code></pre>\n<p><strong>SomeObject.java</strong></p>\n<pre><code>package org.example.jsontest;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.annotation.JsonInclude;\n\nimport java.io.Serializable;\n\n@JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class SomeObject implements Serializable {\n\n    private static final long serialVersionUID = 6725549179169119963L;\n\n    private String a;\n    private String b;\n    private String c;\n\n    public String getA() {\n        return a;\n    }\n\n    public SomeObject setA(final String a) {\n        this.a = a;\n        return this;\n    }\n\n    public String getB() {\n        return b;\n    }\n\n    public SomeObject setB(final String b) {\n        this.b = b;\n        return this;\n    }\n\n    public String getC() {\n        return c;\n    }\n\n    public SomeObject setC(final String c) {\n        this.c = c;\n        return this;\n    }\n}\n</code></pre>\n<p>Under <strong>src/main/webapp</strong> there are the following files:</p>\n<p><strong>jboss-deployment-structure.xml</strong></p>\n<pre><code>&lt;jboss-deployment-structure&gt;\n    &lt;deployment&gt;\n        &lt;dependencies&gt;\n            &lt;module name=&quot;org.wildfly.security.elytron&quot;/&gt;\n            &lt;module name=&quot;org.wildfly.extension.elytron&quot;/&gt;\n            &lt;module name=&quot;javax.api&quot;/&gt;\n            &lt;module name=&quot;org.jboss.resteasy.resteasy-jaxrs&quot;/&gt;\n            &lt;module name=&quot;org.jboss.resteasy.resteasy-jackson2-provider&quot;/&gt;\n        &lt;/dependencies&gt;\n    &lt;/deployment&gt;\n&lt;/jboss-deployment-structure&gt;\n</code></pre>\n<p><strong>jboss-web.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n\n&lt;jboss-web xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://www.jboss.com/xml/ns/javaee&quot;\n           version=&quot;6.0&quot;\n           xsi:schemaLocation=&quot;http://www.jboss.com/xml/ns/javaee http://www.jboss.org/j2ee/schema/jboss-web_6_0.xsd&quot;&gt;\n\n    &lt;security-domain&gt;...removed...&lt;/security-domain&gt;\n    &lt;context-root&gt;/jsontest&lt;/context-root&gt;\n&lt;/jboss-web&gt;\n</code></pre>\n<p><strong>web.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;\n         version=&quot;3.1&quot;&gt;\n    &lt;display-name&gt;jsontest&lt;/display-name&gt;\n\n    &lt;!-- Security related settings have been removed --&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;session-config&gt;\n        &lt;session-timeout&gt;30&lt;/session-timeout&gt;\n        &lt;cookie-config&gt;\n            &lt;path&gt;/jsontest&lt;/path&gt;\n            &lt;http-only&gt;true&lt;/http-only&gt;\n            &lt;secure&gt;true&lt;/secure&gt;\n        &lt;/cookie-config&gt;\n        &lt;tracking-mode&gt;COOKIE&lt;/tracking-mode&gt;\n    &lt;/session-config&gt;\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["java","android","get","retrofit","retrofit2"],"answers":[{"comments":[{"owner":{"account_id":21792524,"reputation":1,"user_id":16092522,"display_name":"Kailas Mantri"},"score":0,"creation_date":1689526592,"post_id":75926509,"comment_id":135222720,"body_markdown":"Thanks @Nikola, but this is in Kotlin, however I&#39;m using the Java technology to develop the app.  In my Application, I&#39;ve used achieved it using first API call in it, I&#39;ve made a **for loop** to pass the genres result data with respect to id. to pass it in api call.\n\n`for (int i = 0; i &lt; genreResults.size(); i++) {\n                    params.put(&quot;api_key&quot;, URLs.API_KEY);\n                    params.put(&quot;with_genres&quot;, String.valueOf(genreResults.get(i).getId()));`\n\nand called the second API, and set the response using, \n\n`genreResults.get(finalI).setMovieResults(movieResults);`","body":"Thanks @Nikola, but this is in Kotlin, however I&#39;m using the Java technology to develop the app.  In my Application, I&#39;ve used achieved it using first API call in it, I&#39;ve made a <b>for loop</b> to pass the genres result data with respect to id. to pass it in api call.  <code>for (int i = 0; i &lt; genreResults.size(); i++) {                     params.put(&quot;api_key&quot;, URLs.API_KEY);                     params.put(&quot;with_genres&quot;, String.valueOf(genreResults.get(i).getId()));</code>  and called the second API, and set the response using,   <code>genreResults.get(finalI).setMovieResults(movieResults);</code>"}],"tags":[],"owner":{"account_id":268428,"reputation":50179,"user_id":557179,"accept_rate":100,"display_name":"Nikola Despotoski"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680592686,"creation_date":1680592686,"answer_id":75926509,"question_id":75926476,"body_markdown":"Naming of the function is off, rename it to `fun getMovieData()` instead  `MOVIE_DATA_MODEL_CALL` \r\nYou need Retrofit to return a `Flow` then use `flatMap` to call the other. \r\n\r\n`service.getMovieData().flatMap { service.getSecondCall(it.id) }`","title":"how to get the id from First API to utilize in nested call of another API, using retrofit in android Studio?","body":"<p>Naming of the function is off, rename it to <code>fun getMovieData()</code> instead  <code>MOVIE_DATA_MODEL_CALL</code>\nYou need Retrofit to return a <code>Flow</code> then use <code>flatMap</code> to call the other.</p>\n<p><code>service.getMovieData().flatMap { service.getSecondCall(it.id) }</code></p>\n"}],"owner":{"account_id":21792524,"reputation":1,"user_id":16092522,"display_name":"Kailas Mantri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680594748,"creation_date":1680592479,"question_id":75926476,"body_markdown":"I&#39;m trying to fetch the genre&#39;s id from the response of GenresDataModel and want that id to compare with nested api response of MovieDataModel.\r\n\r\nHere I&#39;ve Created an interface method for call retrofit api. where I&#39;ve called \r\n\r\n```\r\n@GET(&quot;3/discover/movie&quot;)\r\n    Call&lt;MovieDataModel&gt; MOVIE_DATA_MODEL_CALL(\r\n            @QueryMap HashMap&lt;String, String&gt; params\r\n    );\r\n```\r\n\r\nFor example, first API contains data of Genres with id and name.\r\n\r\n```\r\n{\r\n    &quot;genres&quot;: [\r\n        {\r\n            &quot;id&quot;: 28,\r\n            &quot;name&quot;: &quot;Action&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: 12,\r\n            &quot;name&quot;: &quot;Adventure&quot;\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nAnd second API has the data which I need to compare in nested API.\r\n```\r\n&quot;release_date&quot;: &quot;2013-08-30&quot;,\r\n&quot;genre_ids&quot;: [\r\n     99,\r\n     10402\r\n  ],\r\n```\r\n\r\n\r\n[The Genre API Model is create, and Set the parameter for second API](https://i.stack.imgur.com/lBm1B.png)\r\n\r\n[In the call of second API, I&#39;m not able to compare the genres Id with movieGenreId](https://i.stack.imgur.com/j9Pqc.png)\r\n\r\n\r\nI&#39;ve tried to store this in Hashmap, however it got failed for on data type with respect to object , list as well as for String.\r\n\r\n**What I&#39;m suppose to do?**\r\n to get the id from the response of first API &amp; to compare them in nested(Second API response) response of another API with &quot;GenresId&quot;.","title":"how to get the id from First API to utilize in nested call of another API, using retrofit in android Studio?","body":"<p>I'm trying to fetch the genre's id from the response of GenresDataModel and want that id to compare with nested api response of MovieDataModel.</p>\n<p>Here I've Created an interface method for call retrofit api. where I've called</p>\n<pre><code>@GET(&quot;3/discover/movie&quot;)\n    Call&lt;MovieDataModel&gt; MOVIE_DATA_MODEL_CALL(\n            @QueryMap HashMap&lt;String, String&gt; params\n    );\n</code></pre>\n<p>For example, first API contains data of Genres with id and name.</p>\n<pre><code>{\n    &quot;genres&quot;: [\n        {\n            &quot;id&quot;: 28,\n            &quot;name&quot;: &quot;Action&quot;\n        },\n        {\n            &quot;id&quot;: 12,\n            &quot;name&quot;: &quot;Adventure&quot;\n        }\n    ]\n}\n</code></pre>\n<p>And second API has the data which I need to compare in nested API.</p>\n<pre><code>&quot;release_date&quot;: &quot;2013-08-30&quot;,\n&quot;genre_ids&quot;: [\n     99,\n     10402\n  ],\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/lBm1B.png\" rel=\"nofollow noreferrer\">The Genre API Model is create, and Set the parameter for second API</a></p>\n<p><a href=\"https://i.stack.imgur.com/j9Pqc.png\" rel=\"nofollow noreferrer\">In the call of second API, I'm not able to compare the genres Id with movieGenreId</a></p>\n<p>I've tried to store this in Hashmap, however it got failed for on data type with respect to object , list as well as for String.</p>\n<p><strong>What I'm suppose to do?</strong>\nto get the id from the response of first API &amp; to compare them in nested(Second API response) response of another API with &quot;GenresId&quot;.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1680564602,"post_id":75924395,"comment_id":133916703,"body_markdown":"Your rewrite changes the meaning, using commonly-accepted rules of precedence.  &#39;C or B and A&#39; means &#39;C or (B and A)&#39;.  And what are you going to do with &#39;(A or B) and (C or D)&#39;?  If you want a parenthesis-free form, consider reverse polish.","body":"Your rewrite changes the meaning, using commonly-accepted rules of precedence.  &#39;C or B and A&#39; means &#39;C or (B and A)&#39;.  And what are you going to do with &#39;(A or B) and (C or D)&#39;?  If you want a parenthesis-free form, consider reverse polish."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1680571440,"post_id":75924395,"comment_id":133917301,"body_markdown":"This site is not a code-writing service. We can help you with *specific* questions about *your* code, ideally accompanied by an [MCVE]. Please show what you have tried, because this site expects some research by the asker and usually showing your attempt at a solution, even if it has errors, clarifies what you want to achieve.","body":"This site is not a code-writing service. We can help you with <i>specific</i> questions about <i>your</i> code, ideally accompanied by an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please show what you have tried, because this site expects some research by the asker and usually showing your attempt at a solution, even if it has errors, clarifies what you want to achieve."}],"owner":{"account_id":19177463,"reputation":375,"user_id":14009894,"display_name":"jimmayhem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680594411,"creation_date":1680564099,"question_id":75924395,"body_markdown":"I need to implement (at least partially) SCIM Filtering specification.   \r\nMy strategy was to recursively go through the string and build binary tree of expression objects, with the first expression to be evaluated as the root.\r\nHowever, I was not able to effectively process expressions with parentheses while doing the tree walk. Therefor, I decided to get rid of parentheses first, which would require placing all elements of the expression in the correct order according to SCIM Filtering rules of precedence, which are:\r\n 1. Expression in parentheses\r\n 2. NOT\r\n 3. AND\r\n 4. OR\r\n\r\nSo a string ```A and (B or (C))``` after reordering is transformed into ```C or B and A``` (don&#39;t mind the capital letters. These are used to substitute actual SCIM filtering expressions). \r\n\r\nI&#39;ve tried to parse the filter string by dividing it with ```split()``` but this approach is very clumsy, since I need to track opening and closing parentheses. What would be the best approach to do this? \r\n","title":"How to reorder expression elements in a string based on rules of SCIM filter precedence?","body":"<p>I need to implement (at least partially) SCIM Filtering specification.<br />\nMy strategy was to recursively go through the string and build binary tree of expression objects, with the first expression to be evaluated as the root.\nHowever, I was not able to effectively process expressions with parentheses while doing the tree walk. Therefor, I decided to get rid of parentheses first, which would require placing all elements of the expression in the correct order according to SCIM Filtering rules of precedence, which are:</p>\n<ol>\n<li>Expression in parentheses</li>\n<li>NOT</li>\n<li>AND</li>\n<li>OR</li>\n</ol>\n<p>So a string <code>A and (B or (C))</code> after reordering is transformed into <code>C or B and A</code> (don't mind the capital letters. These are used to substitute actual SCIM filtering expressions).</p>\n<p>I've tried to parse the filter string by dividing it with <code>split()</code> but this approach is very clumsy, since I need to track opening and closing parentheses. What would be the best approach to do this?</p>\n"},{"tags":["java","android","bluetooth-lowenergy"],"comments":[{"owner":{"account_id":4000458,"reputation":17823,"user_id":3296621,"accept_rate":78,"display_name":"Smutje"},"score":0,"creation_date":1402387277,"post_id":24135682,"comment_id":37241220,"body_markdown":"Have you tried to split `data` into chunks of 20 bytes and create and send multiple `BluetoothGattCharacteristic` in a loop for every chunk?","body":"Have you tried to split <code>data</code> into chunks of 20 bytes and create and send multiple <code>BluetoothGattCharacteristic</code> in a loop for every chunk?"},{"owner":{"account_id":2603144,"reputation":2367,"user_id":2254969,"accept_rate":50,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402387831,"post_id":24135682,"comment_id":37241448,"body_markdown":"what I had tried separately was that in onclick I changed the text three times( some predefined constants) and used  `yableeService.send(text.getBytes());` three times. But that only sent the first characteristic, nothing after that. If I did it wrong could you tell what I should have done?","body":"what I had tried separately was that in onclick I changed the text three times( some predefined constants) and used  <code>yableeService.send(text.getBytes());</code> three times. But that only sent the first characteristic, nothing after that. If I did it wrong could you tell what I should have done?"},{"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402403756,"post_id":24135682,"comment_id":37250878,"body_markdown":"@Smutje: See my editted answer. What else can I do?","body":"@Smutje: See my editted answer. What else can I do?"},{"owner":{"account_id":4393536,"reputation":607,"user_id":3581288,"accept_rate":80,"display_name":"User6006"},"score":0,"creation_date":1461237169,"post_id":24135682,"comment_id":61113245,"body_markdown":"Can you please share your complete code?","body":"Can you please share your complete code?"},{"owner":{"display_name":"user5803705"},"score":0,"creation_date":1519533335,"post_id":24135682,"comment_id":84945928,"body_markdown":"You can just request a MTU update then send the entire packet of data at once. I believe you can sent a max of 512 bytes at the moment (in one packet). I believe there are 2 or more answers below that mention this.","body":"You can just request a MTU update then send the entire packet of data at once. I believe you can sent a max of 512 bytes at the moment (in one packet). I believe there are 2 or more answers below that mention this."}],"answers":[{"comments":[{"owner":{"account_id":2603144,"reputation":2367,"user_id":2254969,"accept_rate":50,"display_name":"Ankit Aggarwal"},"score":1,"creation_date":1402412775,"post_id":24144076,"comment_id":37257297,"body_markdown":"I am sorry but I am new to ble. Could you explain your idea with a code snippet using what I have already written? It will make it clearer for me.","body":"I am sorry but I am new to ble. Could you explain your idea with a code snippet using what I have already written? It will make it clearer for me."},{"owner":{"account_id":2603144,"reputation":2367,"user_id":2254969,"accept_rate":50,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402412834,"post_id":24144076,"comment_id":37257344,"body_markdown":"Should I make another characteristic in the `send` method? Pls explain with code.","body":"Should I make another characteristic in the <code>send</code> method? Pls explain with code."},{"owner":{"account_id":1592942,"reputation":911,"user_id":1475862,"display_name":"Zomb"},"score":0,"creation_date":1402413961,"post_id":24144076,"comment_id":37258124,"body_markdown":"You can&#39;t make another characteristic in the second method, the device you are sending it to needs to have another characteristic that it uses to listen for the last segment of data. The buffering of the data has to happen on the BLE device side. Is the device you are sending the data to designed to work with large packets of data?","body":"You can&#39;t make another characteristic in the second method, the device you are sending it to needs to have another characteristic that it uses to listen for the last segment of data. The buffering of the data has to happen on the BLE device side. Is the device you are sending the data to designed to work with large packets of data?"},{"owner":{"account_id":2603144,"reputation":2367,"user_id":2254969,"accept_rate":50,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402414230,"post_id":24144076,"comment_id":37258306,"body_markdown":"I am not sure. I will have to confirm that. But if that is not possible, then is the other answer possible? That is queueing up the data?","body":"I am not sure. I will have to confirm that. But if that is not possible, then is the other answer possible? That is queueing up the data?"},{"owner":{"account_id":1592942,"reputation":911,"user_id":1475862,"display_name":"Zomb"},"score":0,"creation_date":1402417441,"post_id":24144076,"comment_id":37260405,"body_markdown":"You can queue the data, but the device needs to be able to understand that you are sending one huge chunk of data through multiple writes. If you can get the data split then you need to write it down like @Devunwired mentioned below. To figure out how it works, you have to understand the callback mechanism that Android has which includes how onCharacteristicWrite works. I would recommend working through the example here: http://developer.android.com/guide/topics/connectivity/bluetooth-le.html","body":"You can queue the data, but the device needs to be able to understand that you are sending one huge chunk of data through multiple writes. If you can get the data split then you need to write it down like @Devunwired mentioned below. To figure out how it works, you have to understand the callback mechanism that Android has which includes how onCharacteristicWrite works. I would recommend working through the example here: <a href=\"http://developer.android.com/guide/topics/connectivity/bluetooth-le.html\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/connectivity/&hellip;</a>"},{"owner":{"account_id":2603144,"reputation":2367,"user_id":2254969,"accept_rate":50,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402583466,"post_id":24144076,"comment_id":37336591,"body_markdown":"Also just to confirm, if I add a `Thread.sleep(1000)` the 3 values would be sent right? I know this is not optimal, but I just want to confirm?","body":"Also just to confirm, if I add a <code>Thread.sleep(1000)</code> the 3 values would be sent right? I know this is not optimal, but I just want to confirm?"},{"owner":{"account_id":1592942,"reputation":911,"user_id":1475862,"display_name":"Zomb"},"score":0,"creation_date":1402615514,"post_id":24144076,"comment_id":37353359,"body_markdown":"You should not be doing that. It makes you read and writes very slow and gives you absolutely no feedback if the write happened or not, and what errors are occurring. Without the callback system in place, you will not be able to subscribe to notifications either.","body":"You should not be doing that. It makes you read and writes very slow and gives you absolutely no feedback if the write happened or not, and what errors are occurring. Without the callback system in place, you will not be able to subscribe to notifications either."},{"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402639519,"post_id":24144076,"comment_id":37359348,"body_markdown":"Yes, thanks @Zomb. So finally I am using the `oncharacteristicWrite()` to check for errors, but since the process was too fast I was always receiving the last part of my data. So I have added a `Thread.sleep(100)` after each write which gives enough time to receive the data. Thanks again!","body":"Yes, thanks @Zomb. So finally I am using the <code>oncharacteristicWrite()</code> to check for errors, but since the process was too fast I was always receiving the last part of my data. So I have added a <code>Thread.sleep(100)</code> after each write which gives enough time to receive the data. Thanks again!"},{"owner":{"account_id":2207699,"reputation":3178,"user_id":2372784,"accept_rate":56,"display_name":"zed"},"score":0,"creation_date":1461152508,"post_id":24144076,"comment_id":61066731,"body_markdown":"@Zomb how do you inform the remote device that you will be sending two packets or more?","body":"@Zomb how do you inform the remote device that you will be sending two packets or more?"},{"owner":{"account_id":1592942,"reputation":911,"user_id":1475862,"display_name":"Zomb"},"score":1,"creation_date":1461162801,"post_id":24144076,"comment_id":61075126,"body_markdown":"@zed not sure I understand your question. The remote device is listening to both characteristics. If it sees a write on the first one, it will always assume that there is at least one more write that has to happen. As long as you keep writing to the first one, it will wait. When you have your last packet, you will write it to the second characteristic.","body":"@zed not sure I understand your question. The remote device is listening to both characteristics. If it sees a write on the first one, it will always assume that there is at least one more write that has to happen. As long as you keep writing to the first one, it will wait. When you have your last packet, you will write it to the second characteristic."},{"owner":{"account_id":2207699,"reputation":3178,"user_id":2372784,"accept_rate":56,"display_name":"zed"},"score":0,"creation_date":1461163171,"post_id":24144076,"comment_id":61075408,"body_markdown":"@Zomb So if I want to write a characteristic that is 32 bytes long (e.g. &quot;123456789-123456789-123456789-12&quot;), I would do a `characteristic.setValue(&quot;123456789-123455678&quot;); bluetoothGatt.writeCharacteristic(characteristic);`, how would I inform it that I want to send more data? If in `onCharacteristicWrite()` I write again, only the last set of bytes will be saved &quot;9-123456789-12&quot;.","body":"@Zomb So if I want to write a characteristic that is 32 bytes long (e.g. &quot;123456789-123456789-123456789-12&quot;), I would do a <code>characteristic.setValue(&quot;123456789-123455678&quot;); bluetoothGatt.writeCharacteristic(characteristic);</code>, how would I inform it that I want to send more data? If in <code>onCharacteristicWrite()</code> I write again, only the last set of bytes will be saved &quot;9-123456789-12&quot;."},{"owner":{"account_id":1592942,"reputation":911,"user_id":1475862,"display_name":"Zomb"},"score":1,"creation_date":1461163616,"post_id":24144076,"comment_id":61075785,"body_markdown":"You need two characteristics, so you would do char1.setValue(&quot;123456789-123455678&quot;) and btGatt.writeChar(char1). At this point in time your device caches the char1 value. You then do char2.setValue(9-123456789-12&quot;) and btGatt.writeChar(char2). Now you device knows that all data transmission is complete and it  concatenates char1 and char2.","body":"You need two characteristics, so you would do char1.setValue(&quot;123456789-123455678&quot;) and btGatt.writeChar(char1). At this point in time your device caches the char1 value. You then do char2.setValue(9-123456789-12&quot;) and btGatt.writeChar(char2). Now you device knows that all data transmission is complete and it  concatenates char1 and char2."}],"tags":[],"owner":{"account_id":1592942,"reputation":911,"user_id":1475862,"display_name":"Zomb"},"comment_count":12,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1402411836,"creation_date":1402411836,"answer_id":24144076,"question_id":24135682,"body_markdown":"If you want to send large sets of data over BLE, then your best bet is to use two characteristics, one to send the bulk of your data and the other to send the last segment. This way you don&#39;t need to set the response to WRITE_NO_RESPONSE and use the callback to send the next segment all the way until you get to the last segment, at which point you will write that to the second characteristic which will let the device know that you are done writing the data and that it can concatenate all the data together to form one large data packet.","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>If you want to send large sets of data over BLE, then your best bet is to use two characteristics, one to send the bulk of your data and the other to send the last segment. This way you don't need to set the response to WRITE_NO_RESPONSE and use the callback to send the next segment all the way until you get to the last segment, at which point you will write that to the second characteristic which will let the device know that you are done writing the data and that it can concatenate all the data together to form one large data packet.</p>\n"},{"comments":[{"owner":{"account_id":2603144,"reputation":2367,"user_id":2254969,"accept_rate":50,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402413080,"post_id":24144483,"comment_id":37257515,"body_markdown":"so how does onCharacteristicWrite() work? Could you add a code snippet implmenting onCharacteristicWrite() too? And could you also give an example with multiple characteristics (they will be added in the `send` method right?). I want to test the speeds to see which suits my work. Thanks!","body":"so how does onCharacteristicWrite() work? Could you add a code snippet implmenting onCharacteristicWrite() too? And could you also give an example with multiple characteristics (they will be added in the <code>send</code> method right?). I want to test the speeds to see which suits my work. Thanks!"},{"owner":{"account_id":89296,"reputation":62915,"user_id":246461,"accept_rate":96,"display_name":"devunwired"},"score":0,"creation_date":1402419150,"post_id":24144483,"comment_id":37261468,"body_markdown":"Sample application that should give you a good idea of how to wait for a callback before calling the next function: https://github.com/devunwired/accessory-samples/blob/master/BluetoothGatt/src/com/example/bluetoothgatt/MainActivity.java","body":"Sample application that should give you a good idea of how to wait for a callback before calling the next function: <a href=\"https://github.com/devunwired/accessory-samples/blob/master/BluetoothGatt/src/com/example/bluetoothgatt/MainActivity.java\" rel=\"nofollow noreferrer\">github.com/devunwired/accessory-samples/blob/master/&hellip;</a>"},{"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402420825,"post_id":24144483,"comment_id":37262456,"body_markdown":"I had not implemented onCharacteristicWrite(). I went through your code and I see that you are reading after onCharacteristicWrite(). I don&#39;t want to do this, so can I just have                     @Override\n        public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\n            //After writing the enable flag, next we read the initial value\n            return;\n        }","body":"I had not implemented onCharacteristicWrite(). I went through your code and I see that you are reading after onCharacteristicWrite(). I don&#39;t want to do this, so can I just have                     @Override         public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {             //After writing the enable flag, next we read the initial value             return;         }"},{"owner":{"account_id":89296,"reputation":62915,"user_id":246461,"accept_rate":96,"display_name":"devunwired"},"score":1,"creation_date":1402422200,"post_id":24144483,"comment_id":37263247,"body_markdown":"You can do whatever you like in that callback.  In your case, that would be to send the next write.","body":"You can do whatever you like in that callback.  In your case, that would be to send the next write."},{"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402424009,"post_id":24144483,"comment_id":37264319,"body_markdown":"I cannot send the next write as the onClickListener() and the &quot;send&quot; functions are in two different files and I want to keep onCharacteristicWrite() generic. So can I implement onCharacteristicWrite() and keep it empty with just a return statement (I have added that to the question to show)? I don&#39;t have the hardware with me now and I have to submit this tomorrow that&#39;s why I&#39;m trying to be extra sure.","body":"I cannot send the next write as the onClickListener() and the &quot;send&quot; functions are in two different files and I want to keep onCharacteristicWrite() generic. So can I implement onCharacteristicWrite() and keep it empty with just a return statement (I have added that to the question to show)? I don&#39;t have the hardware with me now and I have to submit this tomorrow that&#39;s why I&#39;m trying to be extra sure."},{"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402424101,"post_id":24144483,"comment_id":37264358,"body_markdown":"So what I am saying is that all code remains same, I just implement a  onCharacteristicWrite() with just a return statement. Will that solve the problem?","body":"So what I am saying is that all code remains same, I just implement a  onCharacteristicWrite() with just a return statement. Will that solve the problem?"},{"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402424505,"post_id":24144483,"comment_id":37264585,"body_markdown":"And instead of `return mBluetoothGatt.writeCharacteristic(characteristic);` being the last line of `send()` I will do `boolean val = mBluetoothGatt.writeCharacteristic(characteristic);` and then `return val`. So before returning the `onCharacteristicWrite()` would be called.","body":"And instead of <code>return mBluetoothGatt.writeCharacteristic(characteristic);</code> being the last line of <code>send()</code> I will do <code>boolean val = mBluetoothGatt.writeCharacteristic(characteristic);</code> and then <code>return val</code>. So before returning the <code>onCharacteristicWrite()</code> would be called."},{"owner":{"account_id":2603144,"reputation":2367,"user_id":2254969,"accept_rate":50,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402583650,"post_id":24144483,"comment_id":37336722,"body_markdown":"@Devunwired Also just to confirm, if I add a `Thread.sleep(1000)` between each will the 3 values be sent right? I know this is not optimal, but I just want to confirm?","body":"@Devunwired Also just to confirm, if I add a <code>Thread.sleep(1000)</code> between each will the 3 values be sent right? I know this is not optimal, but I just want to confirm?"},{"owner":{"account_id":89296,"reputation":62915,"user_id":246461,"accept_rate":96,"display_name":"devunwired"},"score":0,"creation_date":1402694064,"post_id":24144483,"comment_id":37389011,"body_markdown":"They probably will, since that would normally be long enough or the callbacks to fire in between.  But definitely smarter to wait for each callback before sending the next message.","body":"They probably will, since that would normally be long enough or the callbacks to fire in between.  But definitely smarter to wait for each callback before sending the next message."},{"owner":{"account_id":14517,"reputation":2453,"user_id":29941,"accept_rate":71,"display_name":"Sean"},"score":1,"creation_date":1409008304,"post_id":24144483,"comment_id":39795525,"body_markdown":"@Devunwired Would the approach in your answer be faster than sending 20 bytes at a time on a single characteristic or would they end up being equivalent throughput?","body":"@Devunwired Would the approach in your answer be faster than sending 20 bytes at a time on a single characteristic or would they end up being equivalent throughput?"}],"tags":[],"owner":{"account_id":89296,"reputation":62915,"user_id":246461,"accept_rate":96,"display_name":"devunwired"},"comment_count":10,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1402412825,"creation_date":1402412825,"answer_id":24144483,"question_id":24135682,"body_markdown":"You are correct that the BLE specification doesn&#39;t allow write operations to exceed 20 bytes.  If you can&#39;t subdivide your payload over multiple characteristics (which is logically going to be easier to maintain), then your chunking mechanism is the other approach.\r\n\r\nHowever, realize that the BLE stack ***hates*** when you try to queue up multiple operations.  Each read/write is asynchronous, which the result coming via the `onCharacteristicRead()` or `onCharacteristicWrite()` callback on the `BluetoothGattCallback` instance.  The code you&#39;ve written attempts to send three characteristic write operations on top of each other, without waiting for the callback in between. Your code will need to follow a path more like:\r\n\r\n    send(Test1)\r\n      -&gt; Wait for onCharacteristicWrite()\r\n      -&gt; send(Test2)\r\n        -&gt; Wait for onCharacteristicWrite()\r\n        -&gt; send(Test3)\r\n          -&gt; Wait for onCharacteristicWrite()\r\n    Done!\r\n\r\n","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>You are correct that the BLE specification doesn't allow write operations to exceed 20 bytes.  If you can't subdivide your payload over multiple characteristics (which is logically going to be easier to maintain), then your chunking mechanism is the other approach.</p>\n\n<p>However, realize that the BLE stack <strong><em>hates</em></strong> when you try to queue up multiple operations.  Each read/write is asynchronous, which the result coming via the <code>onCharacteristicRead()</code> or <code>onCharacteristicWrite()</code> callback on the <code>BluetoothGattCallback</code> instance.  The code you've written attempts to send three characteristic write operations on top of each other, without waiting for the callback in between. Your code will need to follow a path more like:</p>\n\n<pre><code>send(Test1)\n  -&gt; Wait for onCharacteristicWrite()\n  -&gt; send(Test2)\n    -&gt; Wait for onCharacteristicWrite()\n    -&gt; send(Test3)\n      -&gt; Wait for onCharacteristicWrite()\nDone!\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2603144,"reputation":2367,"user_id":2254969,"accept_rate":50,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402580932,"post_id":24178409,"comment_id":37334682,"body_markdown":"Could you also write your implementation of `onCharacteristicWrite()`? How have you implemented it? Also I did `characteristic.setWriteType(BluetoothGattCharacteristic.WRITE_TYPE_NO_RESPONSE);` and you have not done this. So do you wait for a reply from the ble device? If I don&#39;t want a device what should I do?","body":"Could you also write your implementation of <code>onCharacteristicWrite()</code>? How have you implemented it? Also I did <code>characteristic.setWriteType(BluetoothGattCharacteristic.WRIT&zwnj;&#8203;E_TYPE_NO_RESPONSE);</code> and you have not done this. So do you wait for a reply from the ble device? If I don&#39;t want a device what should I do?"},{"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402594038,"post_id":24178409,"comment_id":37343178,"body_markdown":"@Alex Tran so any idea?","body":"@Alex Tran so any idea?"},{"owner":{"account_id":2970196,"reputation":7818,"user_id":2522405,"accept_rate":79,"display_name":"Huy Tower"},"score":0,"creation_date":1402625660,"post_id":24178409,"comment_id":37355804,"body_markdown":"@AnkitAggarwal : `characteristic.setWriteType(BluetoothGattCharacteristic.WRITE_TYPE_NO_RESPONSE)‌` this is not important ...I have not done ... But u need understand my logic before do it. ` So do you wait for a reply from the ble device?` No need wait for reponse from firmware side, your firmware side should be define the key to set up connection as store data after transfering until received full message content. ` If I don&#39;t want a device` It can not be.","body":"@AnkitAggarwal : <code>characteristic.setWriteType(BluetoothGattCharacteristic.WRIT&zwnj;&#8203;E_TYPE_NO_RESPONSE)‌</code> this is not important ...I have not done ... But u need understand my logic before do it. ` So do you wait for a reply from the ble device?` No need wait for reponse from firmware side, your firmware side should be define the key to set up connection as store data after transfering until received full message content. ` If I don&#39;t want a device` It can not be."},{"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"score":0,"creation_date":1402639682,"post_id":24178409,"comment_id":37359416,"body_markdown":"Yes @AlexTran I did not want to wait for a reply. My firmware sets up connection and then stores the entire data being sent. Thanks!","body":"Yes @AlexTran I did not want to wait for a reply. My firmware sets up connection and then stores the entire data being sent. Thanks!"},{"owner":{"account_id":2970196,"reputation":7818,"user_id":2522405,"accept_rate":79,"display_name":"Huy Tower"},"score":0,"creation_date":1402641997,"post_id":24178409,"comment_id":37360448,"body_markdown":"@AnkitAggarwal : `I did not want to wait for a reply`. If you want reply, i think you need notice `Notify` feature, not `Write` feature.","body":"@AnkitAggarwal : <code>I did not want to wait for a reply</code>. If you want reply, i think you need notice <code>Notify</code> feature, not <code>Write</code> feature."},{"owner":{"account_id":3798789,"reputation":1667,"user_id":3152953,"accept_rate":36,"display_name":"Deepak"},"score":0,"creation_date":1411474461,"post_id":24178409,"comment_id":40707667,"body_markdown":"if i tried to send data like deepakkumargar.. its sends only deepakkum","body":"if i tried to send data like deepakkumargar.. its sends only deepakkum"},{"owner":{"account_id":3798789,"reputation":1667,"user_id":3152953,"accept_rate":36,"display_name":"Deepak"},"score":0,"creation_date":1411474594,"post_id":24178409,"comment_id":40707768,"body_markdown":"why this problem comes to me?","body":"why this problem comes to me?"},{"owner":{"account_id":928328,"reputation":2383,"user_id":958651,"display_name":"AllDayAmazing"},"score":5,"creation_date":1422995056,"post_id":24178409,"comment_id":44966904,"body_markdown":"For something like this, I feel like you should really get a reply via {@code}onCharacteristicWrite(){@code} instead of sleeping the thread for a random amount of time. You remove the risk of (a) not sleeping long enough and (b) sleeping too long, thus make your code very inefficient depending on how many bytes you are sending","body":"For something like this, I feel like you should really get a reply via {@code}onCharacteristicWrite(){@code} instead of sleeping the thread for a random amount of time. You remove the risk of (a) not sleeping long enough and (b) sleeping too long, thus make your code very inefficient depending on how many bytes you are sending"},{"owner":{"account_id":2970196,"reputation":7818,"user_id":2522405,"accept_rate":79,"display_name":"Huy Tower"},"score":0,"creation_date":1432874051,"post_id":24178409,"comment_id":49116565,"body_markdown":"But most important between the writes use a Thread.sleep(200) if you are only writing and not waiting for a response from the firmware.","body":"But most important between the writes use a Thread.sleep(200) if you are only writing and not waiting for a response from the firmware."},{"owner":{"account_id":2207699,"reputation":3178,"user_id":2372784,"accept_rate":56,"display_name":"zed"},"score":2,"creation_date":1461137077,"post_id":24178409,"comment_id":61055820,"body_markdown":"Can someone else please explain this in other words and maybe with a small example? What is the package of BLE? If anybody has implemented it, please send links for code.","body":"Can someone else please explain this in other words and maybe with a small example? What is the package of BLE? If anybody has implemented it, please send links for code."},{"owner":{"account_id":5188589,"reputation":773,"user_id":4152203,"accept_rate":37,"display_name":"Antoine Murion"},"score":0,"creation_date":1470903911,"post_id":24178409,"comment_id":65141926,"body_markdown":"@TranDucHuy: Would you please give the value of BLE.INITIAL_MESSAGE_PACKET, BLE.DEFAULT_BYTES_VIA_BLE, etc....It would definitely help save people time.","body":"@TranDucHuy: Would you please give the value of BLE.INITIAL_MESSAGE_PACKET, BLE.DEFAULT_BYTES_VIA_BLE, etc....It would definitely help save people time."},{"owner":{"account_id":2970196,"reputation":7818,"user_id":2522405,"accept_rate":79,"display_name":"Huy Tower"},"score":0,"creation_date":1471089954,"post_id":24178409,"comment_id":65220771,"body_markdown":"BLE.INITIAL_MESSAGE_PACKET, BLE.DEFAULT_BYTES_VIA_BLE: you need set value (you talk with firmware side to get the value).","body":"BLE.INITIAL_MESSAGE_PACKET, BLE.DEFAULT_BYTES_VIA_BLE: you need set value (you talk with firmware side to get the value)."},{"owner":{"account_id":6239290,"reputation":1459,"user_id":4853459,"accept_rate":50,"display_name":"D.J"},"score":2,"creation_date":1481604165,"post_id":24178409,"comment_id":69431843,"body_markdown":"where is sendingLastPacket() and setTitle().","body":"where is sendingLastPacket() and setTitle()."},{"owner":{"account_id":6634580,"reputation":439,"user_id":5122089,"accept_rate":60,"display_name":"axa"},"score":0,"creation_date":1679956232,"post_id":24178409,"comment_id":133810901,"body_markdown":"&gt;&quot;BLE allows you transfer maximum of 20 bytes.&quot;\n\nHad no one ever evaluated how wrong this statement is?","body":"&gt;&quot;BLE allows you transfer maximum of 20 bytes.&quot;  Had no one ever evaluated how wrong this statement is?"},{"owner":{"account_id":2970196,"reputation":7818,"user_id":2522405,"accept_rate":79,"display_name":"Huy Tower"},"score":0,"creation_date":1700551363,"post_id":24178409,"comment_id":136665287,"body_markdown":"The answer totally correct at 2014, but now it is deprecated answer already.","body":"The answer totally correct at 2014, but now it is deprecated answer already."},{"owner":{"account_id":2970196,"reputation":7818,"user_id":2522405,"accept_rate":79,"display_name":"Huy Tower"},"score":0,"creation_date":1700556184,"post_id":24178409,"comment_id":136666026,"body_markdown":"Old Docs said that : &quot;However, if we intend to exchange larger chunks of data (typically more than 20 bytes of application data from Android) with a BLE device&quot;\n\nMore detail : https://punchthrough.com/android-ble-guide/","body":"Old Docs said that : &quot;However, if we intend to exchange larger chunks of data (typically more than 20 bytes of application data from Android) with a BLE device&quot;  More detail : <a href=\"https://punchthrough.com/android-ble-guide/\" rel=\"nofollow noreferrer\">punchthrough.com/android-ble-guide</a>"}],"tags":[],"owner":{"account_id":2970196,"reputation":7818,"user_id":2522405,"accept_rate":79,"display_name":"Huy Tower"},"comment_count":16,"down_vote_count":4,"up_vote_count":35,"is_accepted":true,"score":31,"last_activity_date":1680594095,"creation_date":1402556841,"answer_id":24178409,"question_id":24135682,"body_markdown":"**UPDATE** : Please see more answer to know there is other way to achive your expect.\r\n\r\nAt 2014, BLE allows you transfer maximum of 20 bytes.\r\n\r\n If you want to send more than 20 bytes, you should define array `byte[]` to  contain how many packets you want. \r\n\r\nFollowing example worked fine if you want to send less than 160 characters (160 bytes).\r\n\r\n*p/s : Let edit following as you want. Do not follow me exactly.*\r\n\r\nActually, when we are using BLE, mobile side and firmware side need to set up the Key (ex. `0x03` ...) to define the connection gate among both sides.\r\n\r\nThe idea is :\r\n\r\n- When we continue to transfer packets, not is the last one. The gate is `byte[1] = 0x01`.\r\n\r\n- If we send the last one, The gate is `byte[1] = 0x00`.\r\n\r\nThe data contruction (20 bytes):\r\n\r\n1 - `Byte 1` - Define the `Gate ID` : ex. Message gate ID `byte[0] = 0x03`.\r\n\r\n2 - `Byte 2` - Define the `recognization` : Is the last packet `0x00` or continue sending packets `0x01`.\r\n\r\n3 - `Byte 3` (Should be 18 bytes after eliminating `Byte 1` &amp; `Byte 2`) - Attach the message content in here.\r\n\r\n*please understand my logic before reading the code below.*\r\n\r\nBelow is an example of sending a Message with many packets, each packet is an array of size 20 bytes.\r\n\r\n    private void sendMessage(BluetoothGattCharacteristic characteristic, String CHARACTERS){\r\n    \t\tbyte[] initial_packet = new byte[3];\r\n    \t\t/**\r\n    \t\t * Indicate byte\r\n    \t\t */\r\n    \t\tinitial_packet[0] = BLE.INITIAL_MESSAGE_PACKET;\r\n    \t\tif (Long.valueOf(\r\n    \t\t\t\tString.valueOf(CHARACTERS.length() + initial_packet.length))\r\n    \t\t\t\t&gt; BLE.DEFAULT_BYTES_VIA_BLE) {\r\n    \t\t\tsendingContinuePacket(characteristic, initial_packet, CHARACTERS);\r\n    \t\t} else {\r\n    \t\t\tsendingLastPacket(characteristic, initial_packet, CHARACTERS);\r\n    \t\t}\r\n    \t}\r\n\r\n    private void sendingContinuePacket(BluetoothGattCharacteristic characteristic,\r\n    \t\t\tbyte[] initial_packet, String CHARACTERS){\r\n    \t\t/**\r\n    \t\t * TODO If data length &gt; Default data can sent via BLE : 20 bytes\r\n    \t\t */\r\n    \t\t// Check the data length is large how many times with Default Data (BLE)\r\n    \t\tint times = Byte.valueOf(String.valueOf(\r\n    \t\t\t\tCHARACTERS.length() / BLE.DEFAULT_BYTES_IN_CONTINUE_PACKET));\r\n    \r\n    \t\tLog.i(TAG, &quot;CHARACTERS.length() &quot; + CHARACTERS.length());\r\n    \t\tLog.i(TAG, &quot;times &quot; + times);\r\n    \t\t\r\n    \t\t// TODO\r\n    \t\t// 100 : Success\r\n    \t\t// 101 : Error\r\n    \t\tbyte[] sending_continue_hex = new byte[BLE.DEFAULT_BYTES_IN_CONTINUE_PACKET];\r\n    \t\tfor (int time = 0; time &lt;= times; time++) {\r\n    \t\t\t/**\r\n    \t\t\t * Wait second before sending continue packet \r\n    \t\t\t */\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(200);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \r\n    \t\t\tif (time == times) {\r\n    \t\t\t\tLog.i(TAG, &quot;LAST PACKET &quot;);\r\n    \t\t\t\t\r\n    \t\t\t\t/**\r\n    \t\t\t\t * If you do not have enough characters to send continue packet,\r\n    \t\t\t\t * This is the last packet that will be sent to the band\r\n    \t\t\t\t */\r\n    \r\n    \t\t\t\t/**\r\n    \t\t\t\t * Packet length byte :\r\n    \t\t\t\t */\r\n    \t\t\t\t/**\r\n    \t\t\t\t * Length of last packet\r\n    \t\t\t\t */\r\n    \t\t\t\tint character_length = CHARACTERS.length()\r\n    \t\t\t\t\t\t- BLE.DEFAULT_BYTES_IN_CONTINUE_PACKET*times;\r\n    \t\t\t\t\r\n    \t\t\t\tinitial_packet[1] = Byte.valueOf(String.valueOf(character_length\r\n    \t\t\t\t\t\t+ BLE.INITIAL_MESSAGE_PACKET_LENGTH));\r\n    \t\t\t\tinitial_packet[2] = BLE.SENDING_LAST_PACKET;\r\n    \t\t\t\t\r\n    \t\t\t\tLog.i(TAG, &quot;character_length &quot; + character_length);\r\n    \r\n    \t\t\t\t/**\r\n    \t\t\t\t * Message\r\n    \t\t\t\t */\r\n    \t\t\t\t// Hex file\r\n    \t\t\t\tbyte[] sending_last_hex = new byte[character_length];\r\n    \t\t\t\t\r\n    \t\t\t\t// Hex file : Get next bytes\r\n    \t\t\t\tfor (int i = 0; i &lt; sending_last_hex.length; i++) {\r\n    \t\t\t\t\tsending_last_hex[i] = \r\n    \t\t\t\t\t\t\tCHARACTERS.getBytes()[sending_continue_hex.length*time + i];\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\t// Merge byte[]\r\n    \t\t\t\tbyte[] last_packet = \r\n    \t\t\t\t\t\tnew byte[character_length + BLE.INITIAL_MESSAGE_PACKET_LENGTH];\r\n    \t\t\t\tSystem.arraycopy(initial_packet, 0, last_packet,\r\n    \t\t\t\t\t\t0, initial_packet.length);\r\n    \t\t\t\tSystem.arraycopy(sending_last_hex, 0, last_packet, \r\n    \t\t\t\t\t\tinitial_packet.length, sending_last_hex.length);\r\n    \r\n    \t\t\t\t// Set value for characteristic\r\n    \t\t\t\tcharacteristic.setValue(last_packet);\r\n    \t\t\t} else {\r\n    \t\t\t\tLog.i(TAG, &quot;CONTINUE PACKET &quot;);\r\n    \t\t\t\t/**\r\n    \t\t\t\t * If you have enough characters to send continue packet,\r\n    \t\t\t\t * This is the continue packet that will be sent to the band\r\n    \t\t\t\t */\r\n    \t\t\t\t/**\r\n    \t\t\t\t * Packet length byte\r\n    \t\t\t\t */\r\n    \t\t\t\tint character_length = sending_continue_hex.length;\r\n    \t\t\t\t\r\n    \t\t\t\t/**\r\n    \t\t\t\t * TODO Default Length : 20 Bytes\r\n    \t\t\t\t */\r\n    \t\t\t\tinitial_packet[1] = Byte.valueOf(String.valueOf(\r\n    \t\t\t\t\t\tcharacter_length + BLE.INITIAL_MESSAGE_PACKET_LENGTH));\r\n    \t\t\t\t\r\n    \t\t\t\t/**\r\n    \t\t\t\t * If sent data length &gt; 20 bytes (Default : BLE allow send 20 bytes one time)\r\n    \t\t\t\t * -&gt; set 01 : continue sending next packet\r\n    \t\t\t\t * else or if after sent until data length &lt; 20 bytes\r\n    \t\t\t\t * -&gt; set 00 : last packet\r\n    \t\t\t\t */\r\n    \t\t\t\tinitial_packet[2] = BLE.SENDING_CONTINUE_PACKET;\r\n    \t\t\t\t/**\r\n    \t\t\t\t * Message\r\n    \t\t\t\t */\r\n    \t\t\t\t// Hex file : Get first 17 bytes\r\n    \t\t\t\tfor (int i = 0; i &lt; sending_continue_hex.length; i++) {\r\n    \t\t\t\t\tLog.i(TAG, &quot;Send stt : &quot; \r\n    \t\t\t\t\t\t\t+ (sending_continue_hex.length*time + i));\r\n    \t\t\t\t\t\r\n    \t\t\t\t\t// Get next bytes\r\n    \t\t\t\t\tsending_continue_hex[i] = \r\n    \t\t\t\t\t\t\tCHARACTERS.getBytes()[sending_continue_hex.length*time + i];\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\t// Merge byte[]\r\n    \t\t\t\tbyte[] sending_continue_packet = \r\n    \t\t\t\t\t\tnew byte[character_length + BLE.INITIAL_MESSAGE_PACKET_LENGTH];\r\n    \t\t\t\tSystem.arraycopy(initial_packet, 0, sending_continue_packet, \r\n    \t\t\t\t\t\t0, initial_packet.length);\r\n    \t\t\t\tSystem.arraycopy(sending_continue_hex, 0, sending_continue_packet, \r\n    \t\t\t\t\t\tinitial_packet.length, sending_continue_hex.length);\r\n    \r\n    \t\t\t\t// Set value for characteristic\r\n    \t\t\t\tcharacteristic.setValue(sending_continue_packet);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t// Write characteristic via BLE\r\n    \t\t\tmBluetoothGatt.writeCharacteristic(characteristic);\r\n    \t\t}\r\n    \t}\r\n\r\n    public boolean writeCharacteristic(BluetoothGattCharacteristic characteristic,\r\n    \t\t\tString data) {\r\n    \t\tif (mBluetoothAdapter == null || mBluetoothGatt == null) {\r\n    \t\t\tLog.w(TAG, &quot;BluetoothAdapter not initialized&quot;);\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \r\n    \t\tif (ActivityBLEController.IS_FIRST_TIME) {\r\n    \t\t\t/**\r\n    \t\t\t * In the first time, \r\n    \t\t\t * should send the Title\r\n    \t\t\t */\r\n    \t\t\tbyte[] merge_title = sendTitle(data);\r\n    \r\n    \t\t\t// Set value for characteristic\r\n    \t\t\tcharacteristic.setValue(merge_title);\r\n    \r\n    \t\t\t// Write characteristic via BLE\r\n    \t\t\tmBluetoothGatt.writeCharacteristic(characteristic);\r\n    \r\n    \t\t\t// Reset\r\n    \t\t\tActivityBLEController.IS_FIRST_TIME = false;\r\n    \r\n    \t\t\treturn true;\r\n    \t\t} else {\r\n    \t\t\t/**\r\n    \t\t\t * In the second time, \r\n    \t\t\t * should send the Message\r\n    \t\t\t */\r\n    \t\t\tif (data.length() &lt;= BLE.LIMIT_CHARACTERS) {\r\n    \t\t\t\tsendMessage(characteristic, data);\r\n    \r\n    \t\t\t\t// Reset\r\n    \t\t\t\tActivityBLEController.IS_FIRST_TIME = true;\t\r\n    \r\n    \t\t\t\treturn true;\r\n    \t\t\t} else {\r\n    \t\t\t\t// Typed character\r\n    \t\t\t\ttyped_character = data.length();\r\n    \r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p><strong>UPDATE</strong> : Please see more answer to know there is other way to achive your expect.</p>\n<p>At 2014, BLE allows you transfer maximum of 20 bytes.</p>\n<p>If you want to send more than 20 bytes, you should define array <code>byte[]</code> to  contain how many packets you want.</p>\n<p>Following example worked fine if you want to send less than 160 characters (160 bytes).</p>\n<p><em>p/s : Let edit following as you want. Do not follow me exactly.</em></p>\n<p>Actually, when we are using BLE, mobile side and firmware side need to set up the Key (ex. <code>0x03</code> ...) to define the connection gate among both sides.</p>\n<p>The idea is :</p>\n<ul>\n<li><p>When we continue to transfer packets, not is the last one. The gate is <code>byte[1] = 0x01</code>.</p>\n</li>\n<li><p>If we send the last one, The gate is <code>byte[1] = 0x00</code>.</p>\n</li>\n</ul>\n<p>The data contruction (20 bytes):</p>\n<p>1 - <code>Byte 1</code> - Define the <code>Gate ID</code> : ex. Message gate ID <code>byte[0] = 0x03</code>.</p>\n<p>2 - <code>Byte 2</code> - Define the <code>recognization</code> : Is the last packet <code>0x00</code> or continue sending packets <code>0x01</code>.</p>\n<p>3 - <code>Byte 3</code> (Should be 18 bytes after eliminating <code>Byte 1</code> &amp; <code>Byte 2</code>) - Attach the message content in here.</p>\n<p><em>please understand my logic before reading the code below.</em></p>\n<p>Below is an example of sending a Message with many packets, each packet is an array of size 20 bytes.</p>\n<pre><code>private void sendMessage(BluetoothGattCharacteristic characteristic, String CHARACTERS){\n        byte[] initial_packet = new byte[3];\n        /**\n         * Indicate byte\n         */\n        initial_packet[0] = BLE.INITIAL_MESSAGE_PACKET;\n        if (Long.valueOf(\n                String.valueOf(CHARACTERS.length() + initial_packet.length))\n                &gt; BLE.DEFAULT_BYTES_VIA_BLE) {\n            sendingContinuePacket(characteristic, initial_packet, CHARACTERS);\n        } else {\n            sendingLastPacket(characteristic, initial_packet, CHARACTERS);\n        }\n    }\n\nprivate void sendingContinuePacket(BluetoothGattCharacteristic characteristic,\n            byte[] initial_packet, String CHARACTERS){\n        /**\n         * TODO If data length &gt; Default data can sent via BLE : 20 bytes\n         */\n        // Check the data length is large how many times with Default Data (BLE)\n        int times = Byte.valueOf(String.valueOf(\n                CHARACTERS.length() / BLE.DEFAULT_BYTES_IN_CONTINUE_PACKET));\n\n        Log.i(TAG, &quot;CHARACTERS.length() &quot; + CHARACTERS.length());\n        Log.i(TAG, &quot;times &quot; + times);\n        \n        // TODO\n        // 100 : Success\n        // 101 : Error\n        byte[] sending_continue_hex = new byte[BLE.DEFAULT_BYTES_IN_CONTINUE_PACKET];\n        for (int time = 0; time &lt;= times; time++) {\n            /**\n             * Wait second before sending continue packet \n             */\n            try {\n                Thread.sleep(200);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n\n            if (time == times) {\n                Log.i(TAG, &quot;LAST PACKET &quot;);\n                \n                /**\n                 * If you do not have enough characters to send continue packet,\n                 * This is the last packet that will be sent to the band\n                 */\n\n                /**\n                 * Packet length byte :\n                 */\n                /**\n                 * Length of last packet\n                 */\n                int character_length = CHARACTERS.length()\n                        - BLE.DEFAULT_BYTES_IN_CONTINUE_PACKET*times;\n                \n                initial_packet[1] = Byte.valueOf(String.valueOf(character_length\n                        + BLE.INITIAL_MESSAGE_PACKET_LENGTH));\n                initial_packet[2] = BLE.SENDING_LAST_PACKET;\n                \n                Log.i(TAG, &quot;character_length &quot; + character_length);\n\n                /**\n                 * Message\n                 */\n                // Hex file\n                byte[] sending_last_hex = new byte[character_length];\n                \n                // Hex file : Get next bytes\n                for (int i = 0; i &lt; sending_last_hex.length; i++) {\n                    sending_last_hex[i] = \n                            CHARACTERS.getBytes()[sending_continue_hex.length*time + i];\n                }\n\n                // Merge byte[]\n                byte[] last_packet = \n                        new byte[character_length + BLE.INITIAL_MESSAGE_PACKET_LENGTH];\n                System.arraycopy(initial_packet, 0, last_packet,\n                        0, initial_packet.length);\n                System.arraycopy(sending_last_hex, 0, last_packet, \n                        initial_packet.length, sending_last_hex.length);\n\n                // Set value for characteristic\n                characteristic.setValue(last_packet);\n            } else {\n                Log.i(TAG, &quot;CONTINUE PACKET &quot;);\n                /**\n                 * If you have enough characters to send continue packet,\n                 * This is the continue packet that will be sent to the band\n                 */\n                /**\n                 * Packet length byte\n                 */\n                int character_length = sending_continue_hex.length;\n                \n                /**\n                 * TODO Default Length : 20 Bytes\n                 */\n                initial_packet[1] = Byte.valueOf(String.valueOf(\n                        character_length + BLE.INITIAL_MESSAGE_PACKET_LENGTH));\n                \n                /**\n                 * If sent data length &gt; 20 bytes (Default : BLE allow send 20 bytes one time)\n                 * -&gt; set 01 : continue sending next packet\n                 * else or if after sent until data length &lt; 20 bytes\n                 * -&gt; set 00 : last packet\n                 */\n                initial_packet[2] = BLE.SENDING_CONTINUE_PACKET;\n                /**\n                 * Message\n                 */\n                // Hex file : Get first 17 bytes\n                for (int i = 0; i &lt; sending_continue_hex.length; i++) {\n                    Log.i(TAG, &quot;Send stt : &quot; \n                            + (sending_continue_hex.length*time + i));\n                    \n                    // Get next bytes\n                    sending_continue_hex[i] = \n                            CHARACTERS.getBytes()[sending_continue_hex.length*time + i];\n                }\n\n                // Merge byte[]\n                byte[] sending_continue_packet = \n                        new byte[character_length + BLE.INITIAL_MESSAGE_PACKET_LENGTH];\n                System.arraycopy(initial_packet, 0, sending_continue_packet, \n                        0, initial_packet.length);\n                System.arraycopy(sending_continue_hex, 0, sending_continue_packet, \n                        initial_packet.length, sending_continue_hex.length);\n\n                // Set value for characteristic\n                characteristic.setValue(sending_continue_packet);\n            }\n            \n            // Write characteristic via BLE\n            mBluetoothGatt.writeCharacteristic(characteristic);\n        }\n    }\n\npublic boolean writeCharacteristic(BluetoothGattCharacteristic characteristic,\n            String data) {\n        if (mBluetoothAdapter == null || mBluetoothGatt == null) {\n            Log.w(TAG, &quot;BluetoothAdapter not initialized&quot;);\n            return false;\n        }\n\n        if (ActivityBLEController.IS_FIRST_TIME) {\n            /**\n             * In the first time, \n             * should send the Title\n             */\n            byte[] merge_title = sendTitle(data);\n\n            // Set value for characteristic\n            characteristic.setValue(merge_title);\n\n            // Write characteristic via BLE\n            mBluetoothGatt.writeCharacteristic(characteristic);\n\n            // Reset\n            ActivityBLEController.IS_FIRST_TIME = false;\n\n            return true;\n        } else {\n            /**\n             * In the second time, \n             * should send the Message\n             */\n            if (data.length() &lt;= BLE.LIMIT_CHARACTERS) {\n                sendMessage(characteristic, data);\n\n                // Reset\n                ActivityBLEController.IS_FIRST_TIME = true; \n\n                return true;\n            } else {\n                // Typed character\n                typed_character = data.length();\n\n                return false;\n            }\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":902263,"reputation":673,"user_id":938081,"display_name":"metch"},"score":0,"creation_date":1463510970,"post_id":29520451,"comment_id":62093217,"body_markdown":"Any official documentation about this feature ? Long write is only supported with ATT write request (acknowledge from the peer device) ?","body":"Any official documentation about this feature ? Long write is only supported with ATT write request (acknowledge from the peer device) ?"},{"owner":{"account_id":5315652,"reputation":167,"user_id":4240646,"display_name":"Zac Siegel"},"score":1,"creation_date":1463591185,"post_id":29520451,"comment_id":62133542,"body_markdown":"There is no official docs but if you look at the device driver code in the AOSP project you can see the capability is supported.","body":"There is no official docs but if you look at the device driver code in the AOSP project you can see the capability is supported."},{"owner":{"account_id":3544472,"reputation":9851,"user_id":2960788,"accept_rate":68,"display_name":"Christopher"},"score":2,"creation_date":1504528164,"post_id":29520451,"comment_id":79034278,"body_markdown":"Where can I find this code? Can you add a link to your answer please? Thank you!","body":"Where can I find this code? Can you add a link to your answer please? Thank you!"}],"tags":[],"owner":{"account_id":5315652,"reputation":167,"user_id":4240646,"display_name":"Zac Siegel"},"comment_count":3,"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1428510971,"creation_date":1428510971,"answer_id":29520451,"question_id":24135682,"body_markdown":"You can actually trigger a BLE Long write if the device on the other end supports it.\r\n\r\nYou can do this by setting the write type to be **BluetoothGattCharacteristic.WRITE_TYPE_DEFAULT**\r\n\r\nIn this case you can send more than 20 bytes.","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>You can actually trigger a BLE Long write if the device on the other end supports it.</p>\n\n<p>You can do this by setting the write type to be <strong>BluetoothGattCharacteristic.WRITE_TYPE_DEFAULT</strong></p>\n\n<p>In this case you can send more than 20 bytes.</p>\n"},{"comments":[{"owner":{"account_id":943529,"reputation":429,"user_id":971220,"display_name":"Mohammad Haseeb"},"score":2,"creation_date":1458785997,"post_id":31333990,"comment_id":60018981,"body_markdown":"That&#39;s true only if the device on the server end supports changing its MTU.","body":"That&#39;s true only if the device on the server end supports changing its MTU."},{"owner":{"account_id":2696411,"reputation":5950,"user_id":2328352,"accept_rate":67,"display_name":"Andr&#233; Fratelli"},"score":0,"creation_date":1470850151,"post_id":31333990,"comment_id":65120938,"body_markdown":"@MohammadHaseeb what happens if it doesn&#39;t? Is there still a reply for negotiating the MTU?","body":"@MohammadHaseeb what happens if it doesn&#39;t? Is there still a reply for negotiating the MTU?"},{"owner":{"account_id":943529,"reputation":429,"user_id":971220,"display_name":"Mohammad Haseeb"},"score":2,"creation_date":1470877496,"post_id":31333990,"comment_id":65132097,"body_markdown":"@Andr&#233;Fratelli No. You don&#39;t receive a response because the server doesn&#39;t acknowledge or support changing MTU.","body":"@Andr&#233;Fratelli No. You don&#39;t receive a response because the server doesn&#39;t acknowledge or support changing MTU."},{"owner":{"account_id":73357,"reputation":17051,"user_id":211292,"accept_rate":67,"display_name":"ThomasW"},"score":0,"creation_date":1470964797,"post_id":31333990,"comment_id":65175158,"body_markdown":"@MohammadHaseeb is right, there is no negotiation. It is necessary to test with an actual device beforehand. Also, I believe larger MTU values are unstable.","body":"@MohammadHaseeb is right, there is no negotiation. It is necessary to test with an actual device beforehand. Also, I believe larger MTU values are unstable."}],"tags":[],"owner":{"account_id":73357,"reputation":17051,"user_id":211292,"accept_rate":67,"display_name":"ThomasW"},"comment_count":4,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1436509991,"creation_date":1436509991,"answer_id":31333990,"question_id":24135682,"body_markdown":"On Lollipop you can send up to 512 bytes. You need to use  [`BluetoothGatt.requestMtu()`][1] with a value of 512. Also, as @Devunwired mentioned you need to wait until any previous operation is complete before calling this.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html#requestMtu(int)","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>On Lollipop you can send up to 512 bytes. You need to use  <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html#requestMtu(int)\" rel=\"noreferrer\"><code>BluetoothGatt.requestMtu()</code></a> with a value of 512. Also, as @Devunwired mentioned you need to wait until any previous operation is complete before calling this.</p>\n"},{"comments":[{"owner":{"account_id":2207699,"reputation":3178,"user_id":2372784,"accept_rate":56,"display_name":"zed"},"score":1,"creation_date":1461153001,"post_id":34828838,"comment_id":61067065,"body_markdown":"This is only supported in Lollipop, and only for devices that support changing MTU size (not very common yet). Also, using the offset parameter has nothing to do with sending bigger chunks, it just overwrites the characteristic read at that offset.","body":"This is only supported in Lollipop, and only for devices that support changing MTU size (not very common yet). Also, using the offset parameter has nothing to do with sending bigger chunks, it just overwrites the characteristic read at that offset."},{"owner":{"account_id":141278,"reputation":12438,"user_id":348183,"accept_rate":97,"display_name":"Albus Dumbledore"},"score":0,"creation_date":1525855811,"post_id":34828838,"comment_id":87515612,"body_markdown":"Surely, you mean `BluetoothGattServerCallback.onCharacteristicReadRequest()`, not `BluetoothGattCallback.onCharacteristicRead()`.","body":"Surely, you mean <code>BluetoothGattServerCallback.onCharacteristicReadRequest()</code>, not <code>BluetoothGattCallback.onCharacteristicRead()</code>."}],"tags":[],"owner":{"account_id":5315639,"reputation":292,"user_id":4240637,"display_name":"Sielar"},"comment_count":2,"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1487929360,"creation_date":1452958977,"answer_id":34828838,"question_id":24135682,"body_markdown":"There are a lot of misleads here.\r\n\r\nBLE is capable of sending much more than 20 bytes, and it can be done easily in android.\r\n\r\nWhat you need to change is the link MTU that is set to 23 by default(only 20 of them can be used to set a value).\r\nAndroid provides fragmentation mechanism if the given packet to send is larger than the current link MTU(this is the purpose of the offset parameter in the `onCharacteristicRead(...)` API).\r\n\r\nSo you can make the MTU bigger, as a request from the central using: `requestMtu(...)` API. The latter will cause a callback call `onMtuChanged` at the peripheral side which will inform him of the new MTU.\r\nAfter this action is done, you can send bigger packets without issuing the Android fragmentation mechanism.\r\n\r\nThe alternatives are to build yourself your own fragmetation mechanism and not to send packets that are bigger then the MTU.\r\nOr rely on the Android mechanism and work with it using the &#39;offset&#39; parameter.","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>There are a lot of misleads here.</p>\n\n<p>BLE is capable of sending much more than 20 bytes, and it can be done easily in android.</p>\n\n<p>What you need to change is the link MTU that is set to 23 by default(only 20 of them can be used to set a value).\nAndroid provides fragmentation mechanism if the given packet to send is larger than the current link MTU(this is the purpose of the offset parameter in the <code>onCharacteristicRead(...)</code> API).</p>\n\n<p>So you can make the MTU bigger, as a request from the central using: <code>requestMtu(...)</code> API. The latter will cause a callback call <code>onMtuChanged</code> at the peripheral side which will inform him of the new MTU.\nAfter this action is done, you can send bigger packets without issuing the Android fragmentation mechanism.</p>\n\n<p>The alternatives are to build yourself your own fragmetation mechanism and not to send packets that are bigger then the MTU.\nOr rely on the Android mechanism and work with it using the 'offset' parameter.</p>\n"},{"tags":[],"owner":{"account_id":5127510,"reputation":576,"user_id":4108976,"display_name":"Doni"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487928163,"creation_date":1482285848,"answer_id":41254016,"question_id":24135682,"body_markdown":"This is the example of implementation using chunk method, but without using **Thread.sleep** , i found it is better and efficient for my application to send more than 20 bit data.\r\n\r\nThe packets will be send after`onCharacteristicWrite()` triggered. i just found out this method will be triggered automatically after peripheral device `(BluetoothGattServer)` sends a `sendResponse()` method.\r\n\r\n\r\nfirstly we have to transform the packet data into chunk with this function:\r\n\r\n    public void sendData(byte [] data){\r\n        int chunksize = 20; //20 byte chunk\r\n        packetSize = (int) Math.ceil( data.length / (double)chunksize); //make this variable public so we can access it on the other function\r\n        \r\n        //this is use as header, so peripheral device know ho much packet will be received.\r\n        characteristicData.setValue(packetSize.toString().getBytes());\r\n        mGatt.writeCharacteristic(characteristicData);\r\n        mGatt.executeReliableWrite();\r\n        \r\n        packets = new byte[packetSize][chunksize];\r\n        packetInteration =0;\r\n        Integer start = 0;\r\n        for(int i = 0; i &lt; packets.length; i++) {\r\n            int end = start+chunksize;\r\n            if(end&gt;data.length){end = data.length;}\r\n            packets[i] = Arrays.copyOfRange(data,start, end);\r\n            start += chunksize;\r\n        }\r\n\r\nafter our data ready, so i put my iteration on this function:\r\n\r\n    @Override\r\n        public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\r\n            if(packetInteration&lt;packetSize){\r\n            characteristicData.setValue(packets[packetInteration]);\r\n            mGatt.writeCharacteristic(characteristicData);\r\n                packetInteration++;\r\n            }\r\n        }\r\n\r\n","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>This is the example of implementation using chunk method, but without using <strong>Thread.sleep</strong> , i found it is better and efficient for my application to send more than 20 bit data.</p>\n\n<p>The packets will be send after<code>onCharacteristicWrite()</code> triggered. i just found out this method will be triggered automatically after peripheral device <code>(BluetoothGattServer)</code> sends a <code>sendResponse()</code> method.</p>\n\n<p>firstly we have to transform the packet data into chunk with this function:</p>\n\n<pre><code>public void sendData(byte [] data){\n    int chunksize = 20; //20 byte chunk\n    packetSize = (int) Math.ceil( data.length / (double)chunksize); //make this variable public so we can access it on the other function\n\n    //this is use as header, so peripheral device know ho much packet will be received.\n    characteristicData.setValue(packetSize.toString().getBytes());\n    mGatt.writeCharacteristic(characteristicData);\n    mGatt.executeReliableWrite();\n\n    packets = new byte[packetSize][chunksize];\n    packetInteration =0;\n    Integer start = 0;\n    for(int i = 0; i &lt; packets.length; i++) {\n        int end = start+chunksize;\n        if(end&gt;data.length){end = data.length;}\n        packets[i] = Arrays.copyOfRange(data,start, end);\n        start += chunksize;\n    }\n</code></pre>\n\n<p>after our data ready, so i put my iteration on this function:</p>\n\n<pre><code>@Override\n    public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\n        if(packetInteration&lt;packetSize){\n        characteristicData.setValue(packets[packetInteration]);\n        mGatt.writeCharacteristic(characteristicData);\n            packetInteration++;\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1858253,"reputation":425,"user_id":1683382,"display_name":"save_jeff"},"score":1,"creation_date":1586080170,"post_id":48970341,"comment_id":107988740,"body_markdown":"FYI it does also change the maximumlength for read and notify not only for write. \nThx very much for the help","body":"FYI it does also change the maximumlength for read and notify not only for write.  Thx very much for the help"}],"tags":[],"owner":{"display_name":"user5803705"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1519534529,"creation_date":1519534529,"answer_id":48970341,"question_id":24135682,"body_markdown":"**You need to request a MTU update.** This is the maximum transmission unit. As it is now, BLE accepts up to 512 bytes in a single packet. However, without requesting this MTU update, your device will not send a packet over 23 bytes (currently).\r\n\r\n---\r\n\r\nUsing your BluetoothGatt object call **requestMtu()**\r\n\r\nHere is a [link][1] to the developer&#39;s page\r\n\r\n[![enter image description here][2]][2]\r\n\r\n---\r\n\r\n**BluetoothGattCallback** will receive the **onMtuChanged()** event as shown below. Upon a successful MTU update, you can send the data as one packet. Here is a [link][3] to this developer page.\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n---\r\n\r\nI typically call requestMtu() after connecting to the **characteristic** that I wish to write to. Good Luck.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html\r\n  [2]: https://i.stack.imgur.com/Q5TAJ.png\r\n  [3]: https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback.html\r\n  [4]: https://i.stack.imgur.com/efwlJ.png","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p><strong>You need to request a MTU update.</strong> This is the maximum transmission unit. As it is now, BLE accepts up to 512 bytes in a single packet. However, without requesting this MTU update, your device will not send a packet over 23 bytes (currently).</p>\n\n<hr>\n\n<p>Using your BluetoothGatt object call <strong>requestMtu()</strong></p>\n\n<p>Here is a <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html\" rel=\"noreferrer\">link</a> to the developer's page</p>\n\n<p><a href=\"https://i.stack.imgur.com/Q5TAJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Q5TAJ.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>BluetoothGattCallback</strong> will receive the <strong>onMtuChanged()</strong> event as shown below. Upon a successful MTU update, you can send the data as one packet. Here is a <a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback.html\" rel=\"noreferrer\">link</a> to this developer page.</p>\n\n<p><a href=\"https://i.stack.imgur.com/efwlJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/efwlJ.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>I typically call requestMtu() after connecting to the <strong>characteristic</strong> that I wish to write to. Good Luck.</p>\n"},{"tags":[],"owner":{"account_id":13921299,"reputation":61,"user_id":10051613,"display_name":"MartinLoren"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1542966699,"creation_date":1542966699,"answer_id":53444264,"question_id":24135682,"body_markdown":"Another solution with Queue and that allow unlimited messages of any size (manage the protocol by yourself to put message delimiters). No Sleep, no additional delays:\r\n\r\n\r\n\r\n    private volatile boolean isWriting; \r\n    private Queue&lt;String&gt; sendQueue; //To be inited with sendQueue = new ConcurrentLinkedQueue&lt;String&gt;();\r\n\r\n    public int send(String data) {\r\n        while (data.length()&gt;20) {\r\n            sendQueue.add(data.substring(0,20));\r\n            data=data.substring(20);\r\n        }\r\n        sendQueue.add(data);\r\n        if (!isWriting) _send();\r\n        return ST_OK; //0\r\n    }\r\n\r\n    private boolean _send() {\r\n        if (sendQueue.isEmpty()) {\r\n            Log.d(&quot;TAG&quot;, &quot;_send(): EMPTY QUEUE&quot;);\r\n            return false;\r\n        }\r\n        Log.d(TAG, &quot;_send(): Sending: &quot;+sendQueue.peek());\r\n        tx.setValue(sendQueue.poll().getBytes(Charset.forName(&quot;UTF-8&quot;)));\r\n        isWriting = true; // Set the write in progress flag\r\n        mGatt.writeCharacteristic(tx);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\r\n        super.onCharacteristicWrite(gatt, characteristic, status);\r\n        if (status == BluetoothGatt.GATT_SUCCESS) {\r\n            Log.d(&quot;TAG&quot;,&quot;onCharacteristicWrite(): Successful&quot;);\r\n        }\r\n        isWriting = false;\r\n        _send();\r\n    }","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>Another solution with Queue and that allow unlimited messages of any size (manage the protocol by yourself to put message delimiters). No Sleep, no additional delays:</p>\n\n<pre><code>private volatile boolean isWriting; \nprivate Queue&lt;String&gt; sendQueue; //To be inited with sendQueue = new ConcurrentLinkedQueue&lt;String&gt;();\n\npublic int send(String data) {\n    while (data.length()&gt;20) {\n        sendQueue.add(data.substring(0,20));\n        data=data.substring(20);\n    }\n    sendQueue.add(data);\n    if (!isWriting) _send();\n    return ST_OK; //0\n}\n\nprivate boolean _send() {\n    if (sendQueue.isEmpty()) {\n        Log.d(\"TAG\", \"_send(): EMPTY QUEUE\");\n        return false;\n    }\n    Log.d(TAG, \"_send(): Sending: \"+sendQueue.peek());\n    tx.setValue(sendQueue.poll().getBytes(Charset.forName(\"UTF-8\")));\n    isWriting = true; // Set the write in progress flag\n    mGatt.writeCharacteristic(tx);\n    return true;\n}\n\n@Override\npublic void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\n    super.onCharacteristicWrite(gatt, characteristic, status);\n    if (status == BluetoothGatt.GATT_SUCCESS) {\n        Log.d(\"TAG\",\"onCharacteristicWrite(): Successful\");\n    }\n    isWriting = false;\n    _send();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2031253,"reputation":301,"user_id":4455594,"display_name":"user1814893"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1605326966,"creation_date":1605326966,"answer_id":64830857,"question_id":24135682,"body_markdown":"I have a very similar answer to Huy Tower, but I have taken the time to write some nicer code to do it. This doesn&#39;t use an arbitrary delay, it instead uses the onCharacteristicWrite callback.I would reference his explanation as an understandign of how this works.\r\n\r\nFirstly, two class scoped variables are declared:\r\n\r\n    private byte[][] byteMessageToWrite;\r\n    private int currentMessageProgress = 0;\r\n\r\nThen three functions are declared as follows:\r\n\r\n    // Send a message\r\n        public void sendMessage(String strMessage) {\r\n            if (characteristic == null || strMessage == null || strMessage.isEmpty()) {\r\n                // Do nothing if there is no device or message to send.\r\n                return;\r\n            }\r\n    \r\n\r\n    \r\n            //Note that byte arrays after the first are written in the onCharacteristicWrite Callback\r\n\r\n            byteMessageToWrite = getMessageByteArray(strMessage);\r\n            writeBytes(byteMessageToWrite[0]);\r\n            currentMessageProgress = 1;\r\n        }\r\n    \r\n        //writes an array of bytes\r\n        //note the max BLE message limit\r\n        private void writeBytes(byte[] bytesToWrite) {\r\n            characteristic.setValue(bytesToWrite);\r\n        }\r\n    \r\n        // Note: BLE Only allows 20 bytes to be written to a characteristic at once. Have to write\r\n        // multiple times if sending larger data. This function breaks a string up to do that.\r\n        // The first byte is reserved as a key\r\n        // Note, the second byte in every 20byte section is either a 1 or a 2. A 2 indicates that it is\r\n        // The last message in the set\r\n        private byte[][] getMessageByteArray(String message) {\r\n            byte[] initBytes = message.getBytes(Charset.forName(&quot;UTF-8&quot;));\r\n            int currentIndex = 0;\r\n            int msgLength = initBytes.length;\r\n    \r\n            int numMessages = (int) (Math.ceil((double) (Math.ceil((double) msgLength) / (double) (BLE_BYTE_LIMIT-2))));\r\n    \r\n            byte[][] retMessage = new byte[numMessages][20];\r\n    \r\n            for (int i = 0; i &lt; numMessages; i++) {\r\n                //set key\r\n                retMessage[i][0] = 0x03;\r\n                //set second byte (indicator of termination)\r\n                if (i == numMessages - 1) {//final message, set byte 1 to 2\r\n                    retMessage[i][1] = 0x02;\r\n                } else {//not final message\r\n                    retMessage[i][1] = 0x01;\r\n                }\r\n                //set other bytes\r\n                for (int ii = 2; ii &lt; BLE_BYTE_LIMIT; ii++) {// fill in the data\r\n                    int index = (i * (BLE_BYTE_LIMIT - 2)) + ii - 2;\r\n                    if(index&gt;=msgLength){\r\n                        // Have reached the end of the message, don&#39;t fill any other bytes\r\n                        return retMessage;\r\n                    }\r\n                    retMessage[i][ii] = initBytes[index];\r\n                }\r\n            }\r\n            return retMessage;\r\n        }\r\n\r\nFinally, in the OnCharacteristicWrite function, I have the following:\r\n\r\n          @Override\r\n        public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\r\n            super.onCharacteristicWrite(gatt, characteristic, status);\r\n            if (currentMessageProgress &lt; byteMessageToWrite.length) {\r\n                //there are more bytes to write\r\n\r\n                writeBytes(byteMessageToWrite[currentMessageProgress]);\r\n                currentMessageProgress++;\r\n            }\r\n        }\r\n\r\nI will also note that instead of using 0x00 and 0x01 as Huy suggested, I have chosen to use 0x01 and 0x02. The reason for this is that I found that my bluetooth device would not successfully read any packets with a 0x00. I cannot explain this. ","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>I have a very similar answer to Huy Tower, but I have taken the time to write some nicer code to do it. This doesn't use an arbitrary delay, it instead uses the onCharacteristicWrite callback.I would reference his explanation as an understandign of how this works.</p>\n<p>Firstly, two class scoped variables are declared:</p>\n<pre><code>private byte[][] byteMessageToWrite;\nprivate int currentMessageProgress = 0;\n</code></pre>\n<p>Then three functions are declared as follows:</p>\n<pre><code>// Send a message\n    public void sendMessage(String strMessage) {\n        if (characteristic == null || strMessage == null || strMessage.isEmpty()) {\n            // Do nothing if there is no device or message to send.\n            return;\n        }\n\n\n\n        //Note that byte arrays after the first are written in the onCharacteristicWrite Callback\n\n        byteMessageToWrite = getMessageByteArray(strMessage);\n        writeBytes(byteMessageToWrite[0]);\n        currentMessageProgress = 1;\n    }\n\n    //writes an array of bytes\n    //note the max BLE message limit\n    private void writeBytes(byte[] bytesToWrite) {\n        characteristic.setValue(bytesToWrite);\n    }\n\n    // Note: BLE Only allows 20 bytes to be written to a characteristic at once. Have to write\n    // multiple times if sending larger data. This function breaks a string up to do that.\n    // The first byte is reserved as a key\n    // Note, the second byte in every 20byte section is either a 1 or a 2. A 2 indicates that it is\n    // The last message in the set\n    private byte[][] getMessageByteArray(String message) {\n        byte[] initBytes = message.getBytes(Charset.forName(&quot;UTF-8&quot;));\n        int currentIndex = 0;\n        int msgLength = initBytes.length;\n\n        int numMessages = (int) (Math.ceil((double) (Math.ceil((double) msgLength) / (double) (BLE_BYTE_LIMIT-2))));\n\n        byte[][] retMessage = new byte[numMessages][20];\n\n        for (int i = 0; i &lt; numMessages; i++) {\n            //set key\n            retMessage[i][0] = 0x03;\n            //set second byte (indicator of termination)\n            if (i == numMessages - 1) {//final message, set byte 1 to 2\n                retMessage[i][1] = 0x02;\n            } else {//not final message\n                retMessage[i][1] = 0x01;\n            }\n            //set other bytes\n            for (int ii = 2; ii &lt; BLE_BYTE_LIMIT; ii++) {// fill in the data\n                int index = (i * (BLE_BYTE_LIMIT - 2)) + ii - 2;\n                if(index&gt;=msgLength){\n                    // Have reached the end of the message, don't fill any other bytes\n                    return retMessage;\n                }\n                retMessage[i][ii] = initBytes[index];\n            }\n        }\n        return retMessage;\n    }\n</code></pre>\n<p>Finally, in the OnCharacteristicWrite function, I have the following:</p>\n<pre><code>      @Override\n    public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {\n        super.onCharacteristicWrite(gatt, characteristic, status);\n        if (currentMessageProgress &lt; byteMessageToWrite.length) {\n            //there are more bytes to write\n\n            writeBytes(byteMessageToWrite[currentMessageProgress]);\n            currentMessageProgress++;\n        }\n    }\n</code></pre>\n<p>I will also note that instead of using 0x00 and 0x01 as Huy suggested, I have chosen to use 0x01 and 0x02. The reason for this is that I found that my bluetooth device would not successfully read any packets with a 0x00. I cannot explain this.</p>\n"}],"owner":{"account_id":1752329,"reputation":787,"user_id":1601136,"accept_rate":57,"display_name":"Ankit Aggarwal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94661,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":24178409,"answer_count":10,"score":62,"last_activity_date":1680594095,"creation_date":1402386786,"question_id":24135682,"body_markdown":"I am able to send data upto 20 bytes by connecting to an external BLE device. How do I send data greater than 20 bytes. I have read that we have to either fragment the data or split characteristic to required parts. If I assume my data is 32 bytes, could you tell me changes I need to make in my code to get this working? Following are the required snippets from my code:\r\n\r\n    public boolean send(byte[] data) {\r\n        if (mBluetoothGatt == null || mBluetoothGattService == null) {\r\n            Log.w(TAG, &quot;BluetoothGatt not initialized&quot;);\r\n            return false;\r\n        }\r\n\r\n        BluetoothGattCharacteristic characteristic =\r\n                mBluetoothGattService.getCharacteristic(UUID_SEND);\r\n\r\n        if (characteristic == null) {\r\n            Log.w(TAG, &quot;Send characteristic not found&quot;);\r\n            return false;\r\n        }\r\n\r\n        characteristic.setValue(data);\r\n        characteristic.setWriteType(BluetoothGattCharacteristic.WRITE_TYPE_NO_RESPONSE);\r\n        return mBluetoothGatt.writeCharacteristic(characteristic);\r\n    }\r\n\r\nThis is the code I used for sending the data. The &quot;send&quot; function is used in the following onclick event.\r\n\r\n    sendValueButton = (Button) findViewById(R.id.sendValue);\r\n        sendValueButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String text = dataEdit.getText().toString();                           \r\n                yableeService.send(text.getBytes());\r\n            }\r\n        });\r\n\r\nWhen the `String text` is greater than 20 bytes then only the first 20 bytes are received. How to rectify this?\r\n\r\nTo test sending multiple characteristics I tried this:\r\n\r\n    sendValueButton = (Button) findViewById(R.id.sendValue);\r\n    sendValueButton.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View v) {\r\n            String text = &quot;Test1&quot;;                           \r\n            yableeService.send(text.getBytes());\r\n\r\n            text = &quot;Test2&quot;;                           \r\n            yableeService.send(text.getBytes());\r\n\r\n            text = &quot;Test3&quot;;                           \r\n            yableeService.send(text.getBytes());\r\n        }\r\n    });\r\nBut I only received &quot;Test3&quot; i.e. the last characteristic. What mistake did I commit? I am new to BLE so please ignore any naiveness\r\n\r\n\r\n***Edit:***\r\n\r\n***After accepting answer*** for anyone who views this later.\r\n\r\nThere are **two** ways to accomplish this.\r\n1. Split up your data and write in a loop as the selected answer does.\r\n2. Split up your data and write using callback i.e. `onCharacterisitcWrite()`. This will save you from errors if there were any during writing.\r\n\r\nBut ***most important*** between the writes use a `Thread.sleep(200)` if you are only writing and not waiting for a response from the firmware. This will ensure that all of your data reaches. Without the `sleep` I was always getting the last packet. If you notice the accepted answer he has also used `sleep` in between.","title":"Android: Sending data &gt;20 bytes by BLE","body":"<p>I am able to send data upto 20 bytes by connecting to an external BLE device. How do I send data greater than 20 bytes. I have read that we have to either fragment the data or split characteristic to required parts. If I assume my data is 32 bytes, could you tell me changes I need to make in my code to get this working? Following are the required snippets from my code:</p>\n\n<pre><code>public boolean send(byte[] data) {\n    if (mBluetoothGatt == null || mBluetoothGattService == null) {\n        Log.w(TAG, \"BluetoothGatt not initialized\");\n        return false;\n    }\n\n    BluetoothGattCharacteristic characteristic =\n            mBluetoothGattService.getCharacteristic(UUID_SEND);\n\n    if (characteristic == null) {\n        Log.w(TAG, \"Send characteristic not found\");\n        return false;\n    }\n\n    characteristic.setValue(data);\n    characteristic.setWriteType(BluetoothGattCharacteristic.WRITE_TYPE_NO_RESPONSE);\n    return mBluetoothGatt.writeCharacteristic(characteristic);\n}\n</code></pre>\n\n<p>This is the code I used for sending the data. The \"send\" function is used in the following onclick event.</p>\n\n<pre><code>sendValueButton = (Button) findViewById(R.id.sendValue);\n    sendValueButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            String text = dataEdit.getText().toString();                           \n            yableeService.send(text.getBytes());\n        }\n    });\n</code></pre>\n\n<p>When the <code>String text</code> is greater than 20 bytes then only the first 20 bytes are received. How to rectify this?</p>\n\n<p>To test sending multiple characteristics I tried this:</p>\n\n<pre><code>sendValueButton = (Button) findViewById(R.id.sendValue);\nsendValueButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        String text = \"Test1\";                           \n        yableeService.send(text.getBytes());\n\n        text = \"Test2\";                           \n        yableeService.send(text.getBytes());\n\n        text = \"Test3\";                           \n        yableeService.send(text.getBytes());\n    }\n});\n</code></pre>\n\n<p>But I only received \"Test3\" i.e. the last characteristic. What mistake did I commit? I am new to BLE so please ignore any naiveness</p>\n\n<p><strong><em>Edit:</em></strong></p>\n\n<p><strong><em>After accepting answer</em></strong> for anyone who views this later.</p>\n\n<p>There are <strong>two</strong> ways to accomplish this.\n1. Split up your data and write in a loop as the selected answer does.\n2. Split up your data and write using callback i.e. <code>onCharacterisitcWrite()</code>. This will save you from errors if there were any during writing.</p>\n\n<p>But <strong><em>most important</em></strong> between the writes use a <code>Thread.sleep(200)</code> if you are only writing and not waiting for a response from the firmware. This will ensure that all of your data reaches. Without the <code>sleep</code> I was always getting the last packet. If you notice the accepted answer he has also used <code>sleep</code> in between.</p>\n"},{"tags":["java","postgresql","jdbc","quarkus","quarkus-panache"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1680498208,"post_id":75915951,"comment_id":133902668,"body_markdown":"Where is an implementation of `PersonRepository`? You should provide at least one","body":"Where is an implementation of <code>PersonRepository</code>? You should provide at least one"},{"owner":{"account_id":10083487,"reputation":109,"user_id":7452937,"display_name":"abhishek narayan"},"score":0,"creation_date":1680498932,"post_id":75915951,"comment_id":133902724,"body_markdown":"@LucaBassoRicci, I am extending the PanacheRepository which took care the implementaions internally.","body":"@LucaBassoRicci, I am extending the PanacheRepository which took care the implementaions internally."},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1680499600,"post_id":75915951,"comment_id":133902781,"body_markdown":"https://quarkus.io/guides/hibernate-orm-panache#defining-your-repository: official doc example created a concrete @applicationscoped bean","body":"<a href=\"https://quarkus.io/guides/hibernate-orm-panache#defining-your-repository\" rel=\"nofollow noreferrer\">quarkus.io/guides/&hellip;</a>: official doc example created a concrete @applicationscoped bean"}],"answers":[{"tags":[],"owner":{"account_id":10083487,"reputation":109,"user_id":7452937,"display_name":"abhishek narayan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680593797,"creation_date":1680593797,"answer_id":75926667,"question_id":75915951,"body_markdown":"By adding the repository class which implements the PanacheRepository interface and then injecting this into the repository class solved my issue.\r\n\r\n    @ApplicationScoped\r\n    public class PersonRepository implements PanacheRepository&lt;Person&gt; {\r\n\r\n       //can also add any custom logic methods based on the requirements\r\n\r\n    }\r\n\r\n**Injecting it in the Resource/controller class:**\r\n\r\n    public class PersonResource {\r\n        @Inject\r\n        PersonRepository repository;\r\n    .........\r\n    .......\r\n    \r\n    }\r\n\r\n\r\n\r\n","title":"Getting javax.enterprise.inject.UnsatisfiedResolutionException when running a Quarkus microservice (Java based) having postgres DB integration","body":"<p>By adding the repository class which implements the PanacheRepository interface and then injecting this into the repository class solved my issue.</p>\n<pre><code>@ApplicationScoped\npublic class PersonRepository implements PanacheRepository&lt;Person&gt; {\n\n   //can also add any custom logic methods based on the requirements\n\n}\n</code></pre>\n<p><strong>Injecting it in the Resource/controller class:</strong></p>\n<pre><code>public class PersonResource {\n    @Inject\n    PersonRepository repository;\n.........\n.......\n\n}\n</code></pre>\n"}],"owner":{"account_id":10083487,"reputation":109,"user_id":7452937,"display_name":"abhishek narayan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2061,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1680593797,"creation_date":1680494436,"question_id":75915951,"body_markdown":"I am new to the Quarkus framework and I am stuck with the below error. Any suggestion would be very helpful on where is the issue.\r\n\r\n**Error:**\r\n`[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type org.abhishek.dao.PersonRepository and qualifiers [@Default]\r\n\t- java member: org.abhishek.resource.PersonResource#repository\r\n\t- declared on CLASS bean [types=[org.abhishek.resource.PersonResource, java.lang.Object], qualifiers=[@Default, @Any], target=org.abhishek.resource.PersonResource]`\r\n\r\n**Entity Class:**\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;persons&quot;)\r\npublic class PersonEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;age&quot;)\r\n    private int age;\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public int getAge() {\r\n        return age;\r\n    }\r\n\r\n    public void setAge(int age) {\r\n        this.age = age;\r\n    }\r\n}\r\n```\r\n\r\n**Repository interfce:**\r\n\r\n```\r\npublic interface PersonRepository extends PanacheRepository&lt;PersonEntity&gt; {\r\n}\r\n```\r\n\r\n**Resource Class**\r\n\r\n```\r\n@ApplicationScoped\r\n@Path(&quot;/persons&quot;)\r\npublic class PersonResource {\r\n\r\n    @Inject\r\n    PersonRepository repository;\r\n\r\n    @GET\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public List&lt;PersonEntity&gt; list() {\r\n        return repository.listAll();\r\n    }\r\n\r\n    @POST\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    public void add(PersonEntity person) {\r\n        repository.persist(person);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI am trying to run my application and connect to the Postgres DB I am running locally on port 5432.\r\n\r\nThe application should be able to connect to the DB and create **persons** table and I would be able to hit the APIs configured. But getting the above error, which I am not able to resolve.","title":"Getting javax.enterprise.inject.UnsatisfiedResolutionException when running a Quarkus microservice (Java based) having postgres DB integration","body":"<p>I am new to the Quarkus framework and I am stuck with the below error. Any suggestion would be very helpful on where is the issue.</p>\n<p><strong>Error:</strong>\n<code>[error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type org.abhishek.dao.PersonRepository and qualifiers [@Default] - java member: org.abhishek.resource.PersonResource#repository - declared on CLASS bean [types=[org.abhishek.resource.PersonResource, java.lang.Object], qualifiers=[@Default, @Any], target=org.abhishek.resource.PersonResource]</code></p>\n<p><strong>Entity Class:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;persons&quot;)\npublic class PersonEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;age&quot;)\n    private int age;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n}\n</code></pre>\n<p><strong>Repository interfce:</strong></p>\n<pre><code>public interface PersonRepository extends PanacheRepository&lt;PersonEntity&gt; {\n}\n</code></pre>\n<p><strong>Resource Class</strong></p>\n<pre><code>@ApplicationScoped\n@Path(&quot;/persons&quot;)\npublic class PersonResource {\n\n    @Inject\n    PersonRepository repository;\n\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    public List&lt;PersonEntity&gt; list() {\n        return repository.listAll();\n    }\n\n    @POST\n    @Consumes(MediaType.APPLICATION_JSON)\n    public void add(PersonEntity person) {\n        repository.persist(person);\n    }\n}\n</code></pre>\n<p>I am trying to run my application and connect to the Postgres DB I am running locally on port 5432.</p>\n<p>The application should be able to connect to the DB and create <strong>persons</strong> table and I would be able to hit the APIs configured. But getting the above error, which I am not able to resolve.</p>\n"},{"tags":["java","android","kotlin","android-sensors"],"comments":[{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":1,"creation_date":1680571815,"post_id":75924418,"comment_id":133917331,"body_markdown":"Are you aware of the [Restrictions of starting activities from the background](https://developer.android.com/guide/components/activities/background-starts)?","body":"Are you aware of the <a href=\"https://developer.android.com/guide/components/activities/background-starts\" rel=\"nofollow noreferrer\">Restrictions of starting activities from the background</a>?"},{"owner":{"account_id":5441953,"reputation":683,"user_id":4329781,"accept_rate":57,"display_name":"StuartDTO"},"score":0,"creation_date":1680593481,"post_id":75924418,"comment_id":133920143,"body_markdown":"@ianhanniballake yes I did, sorry I updated my question I forgot to mention something, take a look please","body":"@ianhanniballake yes I did, sorry I updated my question I forgot to mention something, take a look please"}],"owner":{"account_id":5441953,"reputation":683,"user_id":4329781,"accept_rate":57,"display_name":"StuartDTO"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680593457,"creation_date":1680564407,"question_id":75924418,"body_markdown":"I&#39;m trying to start an Activity from a background service when a condition is meet, I&#39;m checking the logs and it does work because the condition is working, the problem is that the Activity is not launch.\r\n\r\nI&#39;m launching the `Activity` as follows\r\n\r\n```\r\nval intent = Intent(this@MyService.applicationContext, Activity2::class.java).apply {\r\n                    flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TOP\r\n                }\r\n                val pendingIntent = PendingIntent.getActivity(this, 0, intent, 0)\r\n                try {\r\n                    pendingIntent.send()\r\n                } catch (e: CanceledException) {\r\n                    e.printStackTrace()\r\n                }\r\n```\r\n\r\nThe thing is if I meet the condition just before the service starts it works, but if I go to another app and start using it, the activity doesn&#39;t get launch.\r\n\r\nLooking to the [background-starts documentation](https://developer.android.com/guide/components/activities/background-starts) I&#39;ve opted to do the `SYSTEM_ALERT_WINDOW` option where I ask for permissions \r\n\r\n```\r\nprivate fun checkDrawOverlayPermission() {\r\n        if (!Settings.canDrawOverlays(this)) {\r\n            val intent = Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(&quot;package:$packageName&quot;))\r\n            startActivityForResult(intent, OVERLAY_PERMISSION_REQUEST_CODE)\r\n        }\r\n    }\r\n```\r\n\r\nThen on my `Service` it overlays and create a button so when I click it starts the activity but the problem it only happens when the power is connected, otherwise looks like Android kills the Service and can not launch the Activity because of Battery Optimization is there any way where I can whitelist this app to don&#39;t kill services for a X period of time?","title":"Trying to start Activity with PendingIntent from Service and doesn&#39;t show up","body":"<p>I'm trying to start an Activity from a background service when a condition is meet, I'm checking the logs and it does work because the condition is working, the problem is that the Activity is not launch.</p>\n<p>I'm launching the <code>Activity</code> as follows</p>\n<pre><code>val intent = Intent(this@MyService.applicationContext, Activity2::class.java).apply {\n                    flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TOP\n                }\n                val pendingIntent = PendingIntent.getActivity(this, 0, intent, 0)\n                try {\n                    pendingIntent.send()\n                } catch (e: CanceledException) {\n                    e.printStackTrace()\n                }\n</code></pre>\n<p>The thing is if I meet the condition just before the service starts it works, but if I go to another app and start using it, the activity doesn't get launch.</p>\n<p>Looking to the <a href=\"https://developer.android.com/guide/components/activities/background-starts\" rel=\"nofollow noreferrer\">background-starts documentation</a> I've opted to do the <code>SYSTEM_ALERT_WINDOW</code> option where I ask for permissions</p>\n<pre><code>private fun checkDrawOverlayPermission() {\n        if (!Settings.canDrawOverlays(this)) {\n            val intent = Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(&quot;package:$packageName&quot;))\n            startActivityForResult(intent, OVERLAY_PERMISSION_REQUEST_CODE)\n        }\n    }\n</code></pre>\n<p>Then on my <code>Service</code> it overlays and create a button so when I click it starts the activity but the problem it only happens when the power is connected, otherwise looks like Android kills the Service and can not launch the Activity because of Battery Optimization is there any way where I can whitelist this app to don't kill services for a X period of time?</p>\n"},{"tags":["java","spring","classloader","executable-jar"],"comments":[{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":1,"creation_date":1680431443,"post_id":75911406,"comment_id":133894356,"body_markdown":"what java command you use to run it? Have you specify the classpath? I think you should specify it","body":"what java command you use to run it? Have you specify the classpath? I think you should specify it"},{"owner":{"account_id":8038482,"reputation":37,"user_id":6060897,"display_name":"ibrahim "},"score":0,"creation_date":1680592408,"post_id":75911406,"comment_id":133919882,"body_markdown":"Yes, I have specified the classpath, but nothing happens .","body":"Yes, I have specified the classpath, but nothing happens ."}],"answers":[{"tags":[],"owner":{"account_id":8038482,"reputation":37,"user_id":6060897,"display_name":"ibrahim "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680593253,"creation_date":1680593253,"answer_id":75926590,"question_id":75911406,"body_markdown":"Since the code works very well in eclipse, but it fails with java command as .jar file. I have changed some configuration during the export process (export as runnable jar) and it works for me:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7X6Rq.png\r\n\r\nSo, Both the first and the last options in &quot;**Library handling:**&quot; work, except the second one, this the only change that makes difference.\r\n","title":"Reading resources from eclipse and a runable jar","body":"<p>Since the code works very well in eclipse, but it fails with java command as .jar file. I have changed some configuration during the export process (export as runnable jar) and it works for me:\n<a href=\"https://i.stack.imgur.com/7X6Rq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7X6Rq.png\" alt=\"enter image description here\" /></a></p>\n<p>So, Both the first and the last options in &quot;<strong>Library handling:</strong>&quot; work, except the second one, this the only change that makes difference.</p>\n"}],"owner":{"account_id":8038482,"reputation":37,"user_id":6060897,"display_name":"ibrahim "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680593253,"creation_date":1680430631,"question_id":75911406,"body_markdown":"I&#39;m trying to read files in a directory from the runnable jar, but the follwing code works only in eclipse, however, it doesnt work in the running jar using java command \r\n\r\n``` package cc.ff.rr;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.net.URISyntaxException;\r\nimport org.springframework.core.io.ClassPathResource;\r\nimport org.springframework.core.io.Resource;\r\nimport org.springframework.core.io.support.PathMatchingResourcePatternResolver;\r\nimport org.springframework.core.io.support.ResourcePatternResolver;\r\npublic class mmm {\r\n\t\r\npublic static void main(String[] args) throws IOException, URISyntaxException {\r\n\t\tmmm mmm1=new mmm();\r\n\t\tClassLoader classLoader = mmm1.getClass().getClassLoader();\r\n\t\t String locationPattern = &quot;classpath*:/cc/ff/rr/tttt**&quot;;  // tttt is a resource folder contains 2 files nn.txt ,ss.txt \r\n\t\t ResourcePatternResolver resolver = new PathMatchingResourcePatternResolver( );\r\n\t\t //Resource[] resources = resolver.getResources(locationPattern);\r\n\t\t Resource[] resources = resolver.getResources(locationPattern);  ======&gt; \r\n\t\t System.out.println(&quot;Number of files &quot;+resources.length);\r\n\t\t for (Resource resource : resources) {\r\n\t\tSystem.out.println(&quot;file :&quot;+resource.getFilename());\r\n\t\t\t \r\n}```\r\n\r\nin java commande line i&#39;m getting the follwing error  \r\n\r\n&#39;&#39;&#39;\r\njava.io.FileNotFoundException: URL [rsrc:cc/ff/rr/] cannot be resolved to absolute file path because it does not reside in the file system: rsrc:cc/ff/rr/\r\n        at org.springframework.util.ResourceUtils.getFile(ResourceUtils.java:204)\r\n        at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:52)\r\n        at org.springframework.core.io.UrlResource.getFile(UrlResource.java:168)\r\n        at org.springframework.core.io.support.PathMatchingResourcePatternResolver.doFindPathMatchingFileResources(PathMatchingResourcePatternResolver.java:528)\r\n        at org.springframework.core.io.support.PathMatchingResourcePatternResolver.findPathMatchingResources(PathMatchingResourcePatternResolver.java:349)\r\n        at org.springframework.core.io.support.PathMatchingResourcePatternResolver.getResources(PathMatchingResourcePatternResolver.java:267)\r\n        at cc.ff.rr.mmm.main(mmm.java:36)\r\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:61)&#39;&#39;&#39;\r\n\r\nPlease, what is the issue with the code?","title":"Reading resources from eclipse and a runable jar","body":"<p>I'm trying to read files in a directory from the runnable jar, but the follwing code works only in eclipse, however, it doesnt work in the running jar using java command</p>\n<pre><code>\nimport java.io.File;\nimport java.io.IOException;\nimport java.net.URISyntaxException;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.core.io.Resource;\nimport org.springframework.core.io.support.PathMatchingResourcePatternResolver;\nimport org.springframework.core.io.support.ResourcePatternResolver;\npublic class mmm {\n    \npublic static void main(String[] args) throws IOException, URISyntaxException {\n        mmm mmm1=new mmm();\n        ClassLoader classLoader = mmm1.getClass().getClassLoader();\n         String locationPattern = &quot;classpath*:/cc/ff/rr/tttt**&quot;;  // tttt is a resource folder contains 2 files nn.txt ,ss.txt \n         ResourcePatternResolver resolver = new PathMatchingResourcePatternResolver( );\n         //Resource[] resources = resolver.getResources(locationPattern);\n         Resource[] resources = resolver.getResources(locationPattern);  ======&gt; \n         System.out.println(&quot;Number of files &quot;+resources.length);\n         for (Resource resource : resources) {\n        System.out.println(&quot;file :&quot;+resource.getFilename());\n             \n}```\n\nin java commande line i'm getting the follwing error  \n\n'''\njava.io.FileNotFoundException: URL [rsrc:cc/ff/rr/] cannot be resolved to absolute file path because it does not reside in the file system: rsrc:cc/ff/rr/\n        at org.springframework.util.ResourceUtils.getFile(ResourceUtils.java:204)\n        at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:52)\n        at org.springframework.core.io.UrlResource.getFile(UrlResource.java:168)\n        at org.springframework.core.io.support.PathMatchingResourcePatternResolver.doFindPathMatchingFileResources(PathMatchingResourcePatternResolver.java:528)\n        at org.springframework.core.io.support.PathMatchingResourcePatternResolver.findPathMatchingResources(PathMatchingResourcePatternResolver.java:349)\n        at org.springframework.core.io.support.PathMatchingResourcePatternResolver.getResources(PathMatchingResourcePatternResolver.java:267)\n        at cc.ff.rr.mmm.main(mmm.java:36)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:61)'''\n\nPlease, what is the issue with the code?\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1680592892,"post_id":75925182,"comment_id":133919993,"body_markdown":"https://www.geeksforgeeks.org/pollard-p-1-algorithm/","body":"<a href=\"https://www.geeksforgeeks.org/pollard-p-1-algorithm/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/pollard-p-1-algorithm</a>"},{"owner":{"account_id":22571790,"reputation":140,"user_id":16757869,"display_name":"Plegeus"},"score":0,"creation_date":1680594855,"post_id":75925182,"comment_id":133920432,"body_markdown":"Can you provide the numbers that work, and the ones that don’t? Also, be carefull with the intValue function, it only returns the lowest 32 bits and loses information for integers larger than 32 bits…","body":"Can you provide the numbers that work, and the ones that don’t? Also, be carefull with the intValue function, it only returns the lowest 32 bits and loses information for integers larger than 32 bits…"}],"owner":{"account_id":28208245,"reputation":1,"user_id":21560948,"display_name":"adam123"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680593222,"creation_date":1680577002,"question_id":75925182,"body_markdown":"I have a program for [Pollard&#39;s *p* − 1 algorithm][1] but it only factors some numbers and gets stuck on others. (I think it gets stuck when both factors are large primes.) Any ideas to fix it?\r\n\r\n    import java.math.BigInteger;\r\n    import java.util.Scanner;\r\n\r\n    public class Pollard {\r\n\r\n        public static void main(String[] args) {\r\n            Scanner input = new Scanner(System.in);\r\n            System.out.println(&quot;Enter an N to factor: &quot;);\r\n            BigInteger N  = input.nextBigInteger();\r\n            BigInteger a = new BigInteger(&quot;2&quot;);\r\n            BigInteger one = new BigInteger(&quot;1&quot;);\r\n            for (int i = 2; i &lt; N.intValue(); i++) {\r\n                BigInteger aToTheIModN  = a.pow(i).mod(N);\r\n                BigInteger temp = aToTheIModN.subtract(BigInteger.ONE).gcd(N);\r\n                // if gcd(a^i Mod N, N) is greater than 1 then temp is a factor of N\r\n                if (temp.intValue() &gt; one.intValue()) {\r\n                    BigInteger otherFactor = N.divide(temp);\r\n                    System.out.println(&quot;The factors of N are: &quot; + temp + &quot; and &quot; + otherFactor);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Pollard%27s_p_%E2%88%92_1_algorithm","title":"Program for Pollard&#39;s p-1 algorithm not working properly","body":"<p>I have a program for <a href=\"https://en.wikipedia.org/wiki/Pollard%27s_p_%E2%88%92_1_algorithm\" rel=\"nofollow noreferrer\">Pollard's <em>p</em> − 1 algorithm</a> but it only factors some numbers and gets stuck on others. (I think it gets stuck when both factors are large primes.) Any ideas to fix it?</p>\n<pre><code>import java.math.BigInteger;\nimport java.util.Scanner;\n\npublic class Pollard {\n\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter an N to factor: &quot;);\n        BigInteger N  = input.nextBigInteger();\n        BigInteger a = new BigInteger(&quot;2&quot;);\n        BigInteger one = new BigInteger(&quot;1&quot;);\n        for (int i = 2; i &lt; N.intValue(); i++) {\n            BigInteger aToTheIModN  = a.pow(i).mod(N);\n            BigInteger temp = aToTheIModN.subtract(BigInteger.ONE).gcd(N);\n            // if gcd(a^i Mod N, N) is greater than 1 then temp is a factor of N\n            if (temp.intValue() &gt; one.intValue()) {\n                BigInteger otherFactor = N.divide(temp);\n                System.out.println(&quot;The factors of N are: &quot; + temp + &quot; and &quot; + otherFactor);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","json","jackson","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":9941523,"reputation":1018,"user_id":7357959,"display_name":"Tsvetoslav Tsvetkov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680275592,"creation_date":1680275592,"answer_id":75900113,"question_id":75899970,"body_markdown":"You can&#39;t do anything on the Server side but you can define in your model the fields you want to deal with and set on Class level following annotation(to ignore the rest of the fields )\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n","title":"Configure Spring Boot to receive only required JSON data","body":"<p>You can't do anything on the Server side but you can define in your model the fields you want to deal with and set on Class level following annotation(to ignore the rest of the fields )</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\n</code></pre>\n"}],"owner":{"account_id":27723956,"reputation":39,"user_id":21163933,"display_name":"User69"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75900113,"answer_count":1,"score":0,"last_activity_date":1680592770,"creation_date":1680274645,"question_id":75899970,"body_markdown":"When you connect to an api and receive an object as an answer. What I used to do is create  a pojo that matches the object, and than let de data be filled in. Sometimes the api provides hundreds of fields that I don&#39;t need, and I have to create giant pojos, with subpojos etc.. Apparently you can set up Spring Boot so that you only need to receive the part you want want. But I cannot seem to figure out how, nor can I find a tutorial somewhere where it is explained. \r\n\r\nHow can I set up Spring Boot so I can receive the JSON data from an api, but only the attributes I need, not the entire object? \r\n\r\nI don&#39;t want to have to make an entire pojo like this:\r\n\r\n```\r\nclass Receive {\r\n  attribute 1;\r\n  attribute 2;\r\n  attribute 3;\r\n  attribute 4;\r\n  attribute 5;\r\n  attribute 6;\r\n//and so forth\r\n}\r\n\r\n```\r\n\r\nbut set it up so I only have to make what I need to receive, for example:\r\n\r\n```\r\nclass Receive {\r\n  attribute 4;\r\n  attribute 10;\r\n}\r\n\r\n```","title":"Configure Spring Boot to receive only required JSON data","body":"<p>When you connect to an api and receive an object as an answer. What I used to do is create  a pojo that matches the object, and than let de data be filled in. Sometimes the api provides hundreds of fields that I don't need, and I have to create giant pojos, with subpojos etc.. Apparently you can set up Spring Boot so that you only need to receive the part you want want. But I cannot seem to figure out how, nor can I find a tutorial somewhere where it is explained.</p>\n<p>How can I set up Spring Boot so I can receive the JSON data from an api, but only the attributes I need, not the entire object?</p>\n<p>I don't want to have to make an entire pojo like this:</p>\n<pre><code>class Receive {\n  attribute 1;\n  attribute 2;\n  attribute 3;\n  attribute 4;\n  attribute 5;\n  attribute 6;\n//and so forth\n}\n\n</code></pre>\n<p>but set it up so I only have to make what I need to receive, for example:</p>\n<pre><code>class Receive {\n  attribute 4;\n  attribute 10;\n}\n\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4433290,"reputation":688,"user_id":3609883,"display_name":"Crammeur"},"score":0,"creation_date":1533578914,"post_id":51713332,"comment_id":90388080,"body_markdown":"I think is because they have the same `id` `@+id/my_toolbar`. try to change one them","body":"I think is because they have the same <code>id</code> <code>@+id&#47;my_toolbar</code>. try to change one them"},{"owner":{"account_id":4284879,"reputation":2858,"user_id":3503023,"display_name":"Krishna Sharma"},"score":0,"creation_date":1533580129,"post_id":51713332,"comment_id":90388630,"body_markdown":"I don&#39;t think so defining id two places may cause this issue. @Maicake can you please share the full log.","body":"I don&#39;t think so defining id two places may cause this issue. @Maicake can you please share the full log."}],"answers":[{"tags":[],"owner":{"account_id":1722904,"reputation":1631,"user_id":1578222,"display_name":"CodeSmith"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1533579005,"creation_date":1533579005,"answer_id":51713391,"question_id":51713332,"body_markdown":"\r\n`&lt;include android:id=&quot;@+id/my_toolbar&quot; layout=&quot;@layout/my_toolbar&quot;/&gt;`\r\n\r\nRemove the id field here, it&#39;s defined again in the my_toolbar layout.","title":"Toolbar findViewById return null pointer","body":"<p><code>&lt;include android:id=\"@+id/my_toolbar\" layout=\"@layout/my_toolbar\"/&gt;</code></p>\n\n<p>Remove the id field here, it's defined again in the my_toolbar layout.</p>\n"},{"tags":[],"owner":{"account_id":13859796,"reputation":10065,"user_id":10005707,"display_name":"Jaswant Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533582143,"creation_date":1533579191,"answer_id":51713429,"question_id":51713332,"body_markdown":"In your activity_maps.xml \r\ninstead of writing this \r\n\r\n     &lt;include\r\n        android:id=&quot;@+id/my_toolbar&quot;\r\n        layout=&quot;@layout/my_toolbar&quot;/&gt;\r\n\r\nWrite this\r\n\r\n    &lt;include\r\n        layout=&quot;@layout/my_toolbar&quot;/&gt;\r\n\r\nor provide any other id but not this one in your include tag\r\n\r\n    android:id=&quot;@+id/my_toolbar&quot;","title":"Toolbar findViewById return null pointer","body":"<p>In your activity_maps.xml \ninstead of writing this </p>\n\n<pre><code> &lt;include\n    android:id=\"@+id/my_toolbar\"\n    layout=\"@layout/my_toolbar\"/&gt;\n</code></pre>\n\n<p>Write this</p>\n\n<pre><code>&lt;include\n    layout=\"@layout/my_toolbar\"/&gt;\n</code></pre>\n\n<p>or provide any other id but not this one in your include tag</p>\n\n<pre><code>android:id=\"@+id/my_toolbar\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6786761,"reputation":2068,"user_id":5225247,"accept_rate":46,"display_name":"Aalap Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680533859,"creation_date":1533581222,"answer_id":51713886,"question_id":51713332,"body_markdown":"Extract layout as a view in your `MapsActivity` and then form that view get toolbar like this.\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_maps);\r\n            // Get fused location client\r\n            mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\r\n\r\n            //get that view of &lt;include&gt; tag\r\n            //I suggest change the name to something else, same name for include and toolbar will be difficult to understand and read.\r\n            View includeLayout = findViewById(R.id.my_toolbar) //id of include\r\n\r\n            //from that includeToolbar you can get toolbar with the Id.            \r\n            Toolbar myToolbar = (Toolbar) includeLayout.findViewById(R.id.my_toolbar);\r\n            myToolbar.setTitle(&quot;my title&quot;);\r\n\r\n\r\n            setSupportActionBar(myToolbar);\r\n            // Obtain the SupportMapFragment and get notified when the map is ready to be used.\r\n            SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                    .findFragmentById(R.id.map);\r\n            mapFragment.getMapAsync(this);\r\n        }","title":"Toolbar findViewById return null pointer","body":"<p>Extract layout as a view in your <code>MapsActivity</code> and then form that view get toolbar like this.</p>\n<pre><code>    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_maps);\n        // Get fused location client\n        mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\n\n        //get that view of &lt;include&gt; tag\n        //I suggest change the name to something else, same name for include and toolbar will be difficult to understand and read.\n        View includeLayout = findViewById(R.id.my_toolbar) //id of include\n\n        //from that includeToolbar you can get toolbar with the Id.            \n        Toolbar myToolbar = (Toolbar) includeLayout.findViewById(R.id.my_toolbar);\n        myToolbar.setTitle(&quot;my title&quot;);\n\n\n        setSupportActionBar(myToolbar);\n        // Obtain the SupportMapFragment and get notified when the map is ready to be used.\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\n                .findFragmentById(R.id.map);\n        mapFragment.getMapAsync(this);\n    }\n</code></pre>\n"}],"owner":{"account_id":14103152,"reputation":1056,"user_id":10187988,"display_name":"Maicake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1018,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":51713391,"answer_count":3,"score":2,"last_activity_date":1680592274,"creation_date":1533578780,"question_id":51713332,"body_markdown":"I&#39;ve already read links about this problem.\r\nMain solutions were:\r\n\r\n- disable default action bar. I did....\r\n- put findViewById after setContent. I did...\r\n- include the layout in the main activity layout.xml file. I did..\r\n\r\nbut still getting null pointer back. I&#39;m getting crazy because also I can&#39;t see the toolbar in the preview.\r\n\r\n\r\n**styles.xml**\r\n\r\nNo action bar set.\r\n    &lt;resources&gt;\r\n    \r\n        &lt;!-- Base application theme. --&gt;\r\n        &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n            &lt;!-- Customize your theme here. --&gt;\r\n            &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n            &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n        &lt;/style&gt;\r\n    \r\n    &lt;/resources&gt;\r\n\r\n**my_toolbar.xml**\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.v7.widget.Toolbar\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:id=&quot;@+id/my_toolbar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@color/colorPrimary&quot;\r\n        android:theme=&quot;@style/Theme.AppCompat.DayNight.DarkActionBar&quot;&gt;\r\n    \r\n    &lt;/android.support.v7.widget.Toolbar&gt;\r\n\r\n\r\n**activity_maps.xml**\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    \r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;include\r\n            android:id=&quot;@+id/my_toolbar&quot;\r\n            layout=&quot;@layout/my_toolbar&quot;/&gt;\r\n    \r\n    \r\n        &lt;!-- Add Google Maps Fragment to the MainActivity --&gt;\r\n        &lt;fragment xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:id=&quot;@+id/map&quot;\r\n            android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_below=&quot;@id/my_toolbar&quot;\r\n            tools:context=&quot;.MapsActivity&quot; /&gt;\r\n            &lt;!--android:layout_alignParentStart=&quot;true&quot;\r\n            android:layout_alignParentTop=&quot;true&quot;--&gt;\r\n    \r\n    \r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/btClear&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:text=&quot;@string/send_screenshot&quot; /&gt;\r\n    \r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\n\r\n**MapsActivity.java**\r\n\r\n....  \r\n\r\n    @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_maps);\r\n                // Get fused location client\r\n                mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\r\n                Toolbar myToolbar = (Toolbar) findViewById(R.id.my_toolbar);\r\n                myToolbar.setTitle(&quot;my title&quot;);\r\n                setSupportActionBar(myToolbar);\r\n                // Obtain the SupportMapFragment and get notified when the map is ready to be used.\r\n                SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                        .findFragmentById(R.id.map);\r\n                mapFragment.getMapAsync(this);\r\n            }\r\n\r\n....\r\n","title":"Toolbar findViewById return null pointer","body":"<p>I've already read links about this problem.\nMain solutions were:</p>\n<ul>\n<li>disable default action bar. I did....</li>\n<li>put findViewById after setContent. I did...</li>\n<li>include the layout in the main activity layout.xml file. I did..</li>\n</ul>\n<p>but still getting null pointer back. I'm getting crazy because also I can't see the toolbar in the preview.</p>\n<p><strong>styles.xml</strong></p>\n<p>No action bar set.\n</p>\n<pre><code>    &lt;!-- Base application theme. --&gt;\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;/resources&gt;\n</code></pre>\n<p><strong>my_toolbar.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;android.support.v7.widget.Toolbar\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:id=&quot;@+id/my_toolbar&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:background=&quot;@color/colorPrimary&quot;\n    android:theme=&quot;@style/Theme.AppCompat.DayNight.DarkActionBar&quot;&gt;\n\n&lt;/android.support.v7.widget.Toolbar&gt;\n</code></pre>\n<p><strong>activity_maps.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;include\n        android:id=&quot;@+id/my_toolbar&quot;\n        layout=&quot;@layout/my_toolbar&quot;/&gt;\n\n\n    &lt;!-- Add Google Maps Fragment to the MainActivity --&gt;\n    &lt;fragment xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:id=&quot;@+id/map&quot;\n        android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_below=&quot;@id/my_toolbar&quot;\n        tools:context=&quot;.MapsActivity&quot; /&gt;\n        &lt;!--android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;--&gt;\n\n\n\n    &lt;Button\n        android:id=&quot;@+id/btClear&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentBottom=&quot;true&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:text=&quot;@string/send_screenshot&quot; /&gt;\n\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p><strong>MapsActivity.java</strong></p>\n<p>....</p>\n<pre><code>@Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_maps);\n            // Get fused location client\n            mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\n            Toolbar myToolbar = (Toolbar) findViewById(R.id.my_toolbar);\n            myToolbar.setTitle(&quot;my title&quot;);\n            setSupportActionBar(myToolbar);\n            // Obtain the SupportMapFragment and get notified when the map is ready to be used.\n            SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\n                    .findFragmentById(R.id.map);\n            mapFragment.getMapAsync(this);\n        }\n</code></pre>\n<p>....</p>\n"},{"tags":["java","swift"],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1680592170,"creation_date":1680592170,"answer_id":75926440,"question_id":75925219,"body_markdown":"**It&#39;s binary (aka bits).** Ciphertext, and other crypto-related data like signature, tag, nonce, or salt, is binary data made up only of bits, not characters. Java&#39;s `String` only works on characters, so reading your binary file into a `String` and then trying to `getBytes` on it gives partly wrong data, and modern cryptography only works with completely right data.\r\n\r\nYou need to read the file _as bytes_, AND you need to read both the nonce and the ciphertext+tag (which Java crypto treats as a single unit) from the file. There are at least several ways to do this:\r\n\r\n1. probably most straightforward, open the file as a stream (the older I/O type not the java8 type) and `read` each piece. You need to allocate buffers with the correct size, which isn&#39;t hard.\r\n\r\n2. read the whole file as bytes then copy the pieces from the byte array.\r\n\r\n3. read the whole file as bytes, put the contents in a `ByteBuffer` and `get` each piece; again you need to allocate the correct size.\r\n\r\n4. read the whole file as bytes, then pass parts of that array to the crypto routines\r\n\r\nThe following code shows the four possibilities, except I put #4 first because it makes the code structure a bit simpler:\r\n\r\n\t\tCipher c = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n\t\tbyte[] key = &quot;my-xxx-bit-secret-my-secret-my-s&quot;.getBytes(), nonce, ct_tag;\r\n\t\tFile f = new File (args[0]);\r\n\t\tif( args.length == 1 ){ // omit entirely to indicate #4\r\n\t\t\tbyte[] all = Files.readAllBytes(f.toPath());\r\n\t\t\tc.init(Cipher.DECRYPT_MODE, new SecretKeySpec(key,&quot;AES&quot;), new GCMParameterSpec(128,all,0,12));\r\n\t\t\tbyte[] dec = c.doFinal(all,12,all.length-12);\r\n\t\t\tSystem.out.write(dec); System.exit(0);\r\n\t\t}\r\n\t\tif( args[1].equals(&quot;1&quot;) ){\r\n\t\t\tnonce = new byte[12]; ct_tag = new byte[(int)f.length()-12];\r\n\t\t\ttry(InputStream is = new FileInputStream (f) ){ is.read(nonce); is.read(ct_tag); }\r\n\t\t}else if( args[1].equals(&quot;2&quot;) ){\r\n\t\t\tbyte[] all = Files.readAllBytes(f.toPath());\r\n\t\t\tnonce = Arrays.copyOf(all, 12); ct_tag = Arrays.copyOfRange(all, 12, all.length);\r\n\t\t}else if( args[1].equals(&quot;3&quot;) ){\r\n\t\t\tbyte[] all = Files.readAllBytes(f.toPath());\r\n\t\t\tnonce = new byte[12]; ct_tag = new byte[all.length-12];\r\n\t\t\tByteBuffer.wrap(all).get(nonce).get(ct_tag);\r\n\t\t}else throw new Exception (&quot;bad second arg&quot;);\r\n\t\tc.init(Cipher.DECRYPT_MODE, new SecretKeySpec(key,&quot;AES&quot;), new GCMParameterSpec(128, nonce));\r\n\t\tbyte[] dec = c.doFinal(ct_tag);\r\n\t\tSystem.out.write(dec);\r\n","title":"Swift AES GCM encryptor and Java decryption - File issues","body":"<p><strong>It's binary (aka bits).</strong> Ciphertext, and other crypto-related data like signature, tag, nonce, or salt, is binary data made up only of bits, not characters. Java's <code>String</code> only works on characters, so reading your binary file into a <code>String</code> and then trying to <code>getBytes</code> on it gives partly wrong data, and modern cryptography only works with completely right data.</p>\n<p>You need to read the file <em>as bytes</em>, AND you need to read both the nonce and the ciphertext+tag (which Java crypto treats as a single unit) from the file. There are at least several ways to do this:</p>\n<ol>\n<li><p>probably most straightforward, open the file as a stream (the older I/O type not the java8 type) and <code>read</code> each piece. You need to allocate buffers with the correct size, which isn't hard.</p>\n</li>\n<li><p>read the whole file as bytes then copy the pieces from the byte array.</p>\n</li>\n<li><p>read the whole file as bytes, put the contents in a <code>ByteBuffer</code> and <code>get</code> each piece; again you need to allocate the correct size.</p>\n</li>\n<li><p>read the whole file as bytes, then pass parts of that array to the crypto routines</p>\n</li>\n</ol>\n<p>The following code shows the four possibilities, except I put #4 first because it makes the code structure a bit simpler:</p>\n<pre><code>    Cipher c = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n    byte[] key = &quot;my-xxx-bit-secret-my-secret-my-s&quot;.getBytes(), nonce, ct_tag;\n    File f = new File (args[0]);\n    if( args.length == 1 ){ // omit entirely to indicate #4\n        byte[] all = Files.readAllBytes(f.toPath());\n        c.init(Cipher.DECRYPT_MODE, new SecretKeySpec(key,&quot;AES&quot;), new GCMParameterSpec(128,all,0,12));\n        byte[] dec = c.doFinal(all,12,all.length-12);\n        System.out.write(dec); System.exit(0);\n    }\n    if( args[1].equals(&quot;1&quot;) ){\n        nonce = new byte[12]; ct_tag = new byte[(int)f.length()-12];\n        try(InputStream is = new FileInputStream (f) ){ is.read(nonce); is.read(ct_tag); }\n    }else if( args[1].equals(&quot;2&quot;) ){\n        byte[] all = Files.readAllBytes(f.toPath());\n        nonce = Arrays.copyOf(all, 12); ct_tag = Arrays.copyOfRange(all, 12, all.length);\n    }else if( args[1].equals(&quot;3&quot;) ){\n        byte[] all = Files.readAllBytes(f.toPath());\n        nonce = new byte[12]; ct_tag = new byte[all.length-12];\n        ByteBuffer.wrap(all).get(nonce).get(ct_tag);\n    }else throw new Exception (&quot;bad second arg&quot;);\n    c.init(Cipher.DECRYPT_MODE, new SecretKeySpec(key,&quot;AES&quot;), new GCMParameterSpec(128, nonce));\n    byte[] dec = c.doFinal(ct_tag);\n    System.out.write(dec);\n</code></pre>\n"}],"owner":{"account_id":11019580,"reputation":217,"user_id":8094329,"display_name":"nirav dinmali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75926440,"answer_count":1,"score":-1,"last_activity_date":1680592170,"creation_date":1680577644,"question_id":75925219,"body_markdown":"I need to encrypt with swift and decrypt with java around 1000 files in a directory.\r\n\r\n------\r\n\r\nI tested a prototype with a string and it works thanks to answer from https://stackoverflow.com/users/1831987/vgr at\r\nhttps://stackoverflow.com/questions/75918859/swift-aes-gcm-encryptor-and-java-decryption-padding-issues\r\n\r\n-------\r\n\r\nBut when I place that string in a file, it does not work. It works if I print cipher text and tag during encryption and use them separately to decrypt in java, but that&#39;s not how it can be done in real world. The file content which is cipher text+nonce+tag, must be decrypted as a whole. \r\n\r\n-------\r\n\r\nWhat am I doing wrong here please?\r\n\r\n----------\r\n\r\n\r\nSWIFT ENCRYPTOR\r\n\r\n    static func encryptDecryptSingleTestFile() {\r\n            \r\n            do {\r\n                //encrypt\r\n                let data = try Data(contentsOf: URL(fileURLWithPath: filePath1))\r\n                print(&quot;data in original file \\(String(decoding: data, as: UTF8.self))&quot;)\r\n                let sealedBox = try! AES.GCM.seal(data, using: symKey, nonce: nonce)\r\n                let ciphertext = sealedBox.ciphertext.base64EncodedString()\r\n                print(&quot;ciphertext of sealedbox in file: \\(ciphertext)&quot;)\r\n                let tag = sealedBox.tag\r\n                print(&quot;tag of sealedbox in file: \\(tag.base64EncodedString())&quot;)\r\n                try sealedBox.combined!.write(to: URL(fileURLWithPath: filePath2))\r\n    \r\n                \r\n                //DECRYPT - just for testing, actual decrypting will happen in java code\r\n                let data2 = try Data(contentsOf: URL(fileURLWithPath: filePath2))\r\n                print(&quot;data in encrypted file \\(String(decoding: data2, as: UTF8.self))&quot;)\r\n                let sealedBox2 = try AES.GCM.SealedBox(combined: data2)\r\n                let decryptedData = try AES.GCM.open(sealedBox2, using: symKey)\r\n                try decryptedData.write(to: URL(fileURLWithPath: filePath3))\r\n                let ciphertext2 = sealedBox2.ciphertext.base64EncodedString()\r\n                let dataInDecryptedFile = try Data(contentsOf: URL(fileURLWithPath: filePath3))\r\n                print(&quot;data in decrypted file \\(String(decoding: dataInDecryptedFile, as: UTF8.self))&quot;)\r\n    \r\n                \r\n            } catch {\r\n                print(error)\r\n            }\r\n        }\r\n\r\n-------\r\nOUTPUT\r\n\r\n    data in original file: abc\r\n    ciphertext of sealedbox in file: UoRsEQ==\r\n    tag of sealedbox in file: KaryGdpX0t1KwXaDFXEnkw==\r\n    data in encrypted file: ~�g�ա�R��@R�l)���W��J�v�q&#39;�\r\n    data in decrypted file: abc\r\n\r\n------\r\n\r\nJAVA DECRYPTOR\r\n\r\n \r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.Base64;\r\n    \r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.spec.GCMParameterSpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    \r\n    import org.apache.commons.io.FileUtils;\r\n    \r\n    public class FileDecryptro {\r\n        static String secret = &quot;my-xxx-bit-secret-my-secret-my-s&quot;;\r\n        static String nonce = &quot;fv1nixTVoYpSvpdA&quot;;\r\n        //below values are obtained from the swift encryptor class print statements\r\n        static String tag = &quot;KaryGdpX0t1KwXaDFXEnkw==&quot;;\r\n        static String cipherText = &quot;UoRsEQ==&quot;;\r\n    \r\n        public static void main(String args[]) throws Exception {\r\n          \r\n    \t//decrypt with cipher and tag - WORKS\r\n            String decriptedValue = decrypt(cipherText,tag);\r\n            System.out.println(&quot;output from cipher and tag:&quot; + decriptedValue);\r\n            \r\n            //decrypt from file content which has nonce,tag,ciphertext combined. - DOES NOT WORK\r\n            System.out.println(&quot;going to decrypt from file which has nonce, tag, ciphertext combined&quot;);\r\n    \r\n            String inputFileName = &quot;a_e.txt&quot;;\r\n            String inputFileContent = FileUtils.readFileToString(new File(inputFileName));///ciphertext and tag is included\r\n            System.out.println(&quot;inputFileContent:&quot;+inputFileContent);\r\n            String decriptedValue2 = decrypt(inputFileContent.getBytes());\r\n            System.out.println(&quot;output:&quot; + decriptedValue2);\r\n        \r\n            \r\n        }\r\n    \r\n        static String decrypt(byte[] ciphertextWithTagBytes) throws Exception {\r\n    \t\r\n               byte[] keyBytes = secret.getBytes(StandardCharsets.UTF_8);\r\n               byte[] nonceBytes = Base64.getDecoder().decode(nonce);\r\n               \r\n                  //decrypt\r\n               Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n               SecretKeySpec keySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\r\n               GCMParameterSpec gcmSpec = new GCMParameterSpec(128, nonceBytes);\r\n               cipher.init(Cipher.DECRYPT_MODE, keySpec, gcmSpec);\r\n               byte[] plaintextBytes = cipher.doFinal(ciphertextWithTagBytes);\r\n               String plaintext = new String(plaintextBytes, StandardCharsets.UTF_8);\r\n               return plaintext;\r\n               \r\n        }\r\n    \r\n        static String decrypt(String cipherText, String tag) throws Exception {\r\n    \t\r\n    \t\r\n            byte[] keyBytes = secret.getBytes(StandardCharsets.UTF_8);\r\n            byte[] nonceBytes = Base64.getDecoder().decode(nonce);\r\n            \r\n            \r\n            //append tagBytes to cipherText\r\n            byte[] tagBytes = Base64.getDecoder().decode(tag);\r\n            Base64.Decoder decoder = Base64.getDecoder();\r\n            byte[] decodedCipherText = decoder.decode(cipherText);\r\n            byte[] decodedTag = decoder.decode(tag);\r\n            byte[] ciphertextBytes = new byte[decodedCipherText.length + decodedTag.length];\r\n            ByteBuffer.wrap(ciphertextBytes).put(decodedCipherText).put(decodedTag);\r\n            \r\n            //decrypt\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n            SecretKeySpec keySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\r\n            GCMParameterSpec gcmSpec = new GCMParameterSpec(128, nonceBytes);\r\n            cipher.init(Cipher.DECRYPT_MODE, keySpec, gcmSpec);\r\n            byte[] plaintextBytes = cipher.doFinal(ciphertextBytes);\r\n            String plaintext = new String(plaintextBytes, StandardCharsets.UTF_8);\r\n            return plaintext;\r\n            \r\n        }\r\n        \r\n      \r\n     \r\n    }\r\n\r\n-------\r\n\r\nOUTPUT\r\n\r\n    output from cipher and tag:abc\r\n    \r\n    going to decrypt from file which has nonce, tag, ciphertext combined\r\n    inputFileContent:~�g�ա�R��@R�l)���W��J�v�q&#39;�\r\n    Exception in thread &quot;main&quot; javax.crypto.AEADBadTagException: Tag mismatch!\r\n\r\n\r\n\r\n\r\n","title":"Swift AES GCM encryptor and Java decryption - File issues","body":"<p>I need to encrypt with swift and decrypt with java around 1000 files in a directory.</p>\n<hr />\n<p>I tested a prototype with a string and it works thanks to answer from <a href=\"https://stackoverflow.com/users/1831987/vgr\">https://stackoverflow.com/users/1831987/vgr</a> at\n<a href=\"https://stackoverflow.com/questions/75918859/swift-aes-gcm-encryptor-and-java-decryption-padding-issues\">Swift AES GCM encryptor and Java decryption - Padding issues</a></p>\n<hr />\n<p>But when I place that string in a file, it does not work. It works if I print cipher text and tag during encryption and use them separately to decrypt in java, but that's not how it can be done in real world. The file content which is cipher text+nonce+tag, must be decrypted as a whole.</p>\n<hr />\n<p>What am I doing wrong here please?</p>\n<hr />\n<p>SWIFT ENCRYPTOR</p>\n<pre><code>static func encryptDecryptSingleTestFile() {\n        \n        do {\n            //encrypt\n            let data = try Data(contentsOf: URL(fileURLWithPath: filePath1))\n            print(&quot;data in original file \\(String(decoding: data, as: UTF8.self))&quot;)\n            let sealedBox = try! AES.GCM.seal(data, using: symKey, nonce: nonce)\n            let ciphertext = sealedBox.ciphertext.base64EncodedString()\n            print(&quot;ciphertext of sealedbox in file: \\(ciphertext)&quot;)\n            let tag = sealedBox.tag\n            print(&quot;tag of sealedbox in file: \\(tag.base64EncodedString())&quot;)\n            try sealedBox.combined!.write(to: URL(fileURLWithPath: filePath2))\n\n            \n            //DECRYPT - just for testing, actual decrypting will happen in java code\n            let data2 = try Data(contentsOf: URL(fileURLWithPath: filePath2))\n            print(&quot;data in encrypted file \\(String(decoding: data2, as: UTF8.self))&quot;)\n            let sealedBox2 = try AES.GCM.SealedBox(combined: data2)\n            let decryptedData = try AES.GCM.open(sealedBox2, using: symKey)\n            try decryptedData.write(to: URL(fileURLWithPath: filePath3))\n            let ciphertext2 = sealedBox2.ciphertext.base64EncodedString()\n            let dataInDecryptedFile = try Data(contentsOf: URL(fileURLWithPath: filePath3))\n            print(&quot;data in decrypted file \\(String(decoding: dataInDecryptedFile, as: UTF8.self))&quot;)\n\n            \n        } catch {\n            print(error)\n        }\n    }\n</code></pre>\n<hr />\n<p>OUTPUT</p>\n<pre><code>data in original file: abc\nciphertext of sealedbox in file: UoRsEQ==\ntag of sealedbox in file: KaryGdpX0t1KwXaDFXEnkw==\ndata in encrypted file: ~�g�ա�R��@R�l)���W��J�v�q'�\ndata in decrypted file: abc\n</code></pre>\n<hr />\n<p>JAVA DECRYPTOR</p>\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.nio.ByteBuffer;\nimport java.nio.charset.StandardCharsets;\nimport java.util.Base64;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.GCMParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport org.apache.commons.io.FileUtils;\n\npublic class FileDecryptro {\n    static String secret = &quot;my-xxx-bit-secret-my-secret-my-s&quot;;\n    static String nonce = &quot;fv1nixTVoYpSvpdA&quot;;\n    //below values are obtained from the swift encryptor class print statements\n    static String tag = &quot;KaryGdpX0t1KwXaDFXEnkw==&quot;;\n    static String cipherText = &quot;UoRsEQ==&quot;;\n\n    public static void main(String args[]) throws Exception {\n      \n    //decrypt with cipher and tag - WORKS\n        String decriptedValue = decrypt(cipherText,tag);\n        System.out.println(&quot;output from cipher and tag:&quot; + decriptedValue);\n        \n        //decrypt from file content which has nonce,tag,ciphertext combined. - DOES NOT WORK\n        System.out.println(&quot;going to decrypt from file which has nonce, tag, ciphertext combined&quot;);\n\n        String inputFileName = &quot;a_e.txt&quot;;\n        String inputFileContent = FileUtils.readFileToString(new File(inputFileName));///ciphertext and tag is included\n        System.out.println(&quot;inputFileContent:&quot;+inputFileContent);\n        String decriptedValue2 = decrypt(inputFileContent.getBytes());\n        System.out.println(&quot;output:&quot; + decriptedValue2);\n    \n        \n    }\n\n    static String decrypt(byte[] ciphertextWithTagBytes) throws Exception {\n    \n           byte[] keyBytes = secret.getBytes(StandardCharsets.UTF_8);\n           byte[] nonceBytes = Base64.getDecoder().decode(nonce);\n           \n              //decrypt\n           Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n           SecretKeySpec keySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\n           GCMParameterSpec gcmSpec = new GCMParameterSpec(128, nonceBytes);\n           cipher.init(Cipher.DECRYPT_MODE, keySpec, gcmSpec);\n           byte[] plaintextBytes = cipher.doFinal(ciphertextWithTagBytes);\n           String plaintext = new String(plaintextBytes, StandardCharsets.UTF_8);\n           return plaintext;\n           \n    }\n\n    static String decrypt(String cipherText, String tag) throws Exception {\n    \n    \n        byte[] keyBytes = secret.getBytes(StandardCharsets.UTF_8);\n        byte[] nonceBytes = Base64.getDecoder().decode(nonce);\n        \n        \n        //append tagBytes to cipherText\n        byte[] tagBytes = Base64.getDecoder().decode(tag);\n        Base64.Decoder decoder = Base64.getDecoder();\n        byte[] decodedCipherText = decoder.decode(cipherText);\n        byte[] decodedTag = decoder.decode(tag);\n        byte[] ciphertextBytes = new byte[decodedCipherText.length + decodedTag.length];\n        ByteBuffer.wrap(ciphertextBytes).put(decodedCipherText).put(decodedTag);\n        \n        //decrypt\n        Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n        SecretKeySpec keySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\n        GCMParameterSpec gcmSpec = new GCMParameterSpec(128, nonceBytes);\n        cipher.init(Cipher.DECRYPT_MODE, keySpec, gcmSpec);\n        byte[] plaintextBytes = cipher.doFinal(ciphertextBytes);\n        String plaintext = new String(plaintextBytes, StandardCharsets.UTF_8);\n        return plaintext;\n        \n    }\n    \n  \n \n}\n</code></pre>\n<hr />\n<p>OUTPUT</p>\n<pre><code>output from cipher and tag:abc\n\ngoing to decrypt from file which has nonce, tag, ciphertext combined\ninputFileContent:~�g�ա�R��@R�l)���W��J�v�q'�\nException in thread &quot;main&quot; javax.crypto.AEADBadTagException: Tag mismatch!\n</code></pre>\n"},{"tags":["java","spring","spring-batch","sftp"],"answers":[{"comments":[{"owner":{"account_id":1878542,"reputation":785,"user_id":1699206,"accept_rate":76,"display_name":"Shabarinath Volam"},"score":0,"creation_date":1680627866,"post_id":75926423,"comment_id":133929008,"body_markdown":"Thanks for the clarification, but as I have mentioned I will be having the file on the remote server and how to I need to establish an Sftp connection and integrate it with the reader?","body":"Thanks for the clarification, but as I have mentioned I will be having the file on the remote server and how to I need to establish an Sftp connection and integrate it with the reader?"},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1680632505,"post_id":75926423,"comment_id":133930184,"body_markdown":"opening/closing the SFTP session could be done in the `open/close` methods. Those methods are designed for resource initialization/cleanup.","body":"opening/closing the SFTP session could be done in the <code>open&#47;close</code> methods. Those methods are designed for resource initialization/cleanup."},{"owner":{"account_id":1878542,"reputation":785,"user_id":1699206,"accept_rate":76,"display_name":"Shabarinath Volam"},"score":0,"creation_date":1680633701,"post_id":75926423,"comment_id":133930485,"body_markdown":"Thanks for clarification but my question is how come reader knows that it reads from particular remote host (urlResource we are only mentioning the file path) where exactly we need to linkup sftp host details, authentication details with the reader, not sure if I am missing something. It would be really helpful if you can provide some references","body":"Thanks for clarification but my question is how come reader knows that it reads from particular remote host (urlResource we are only mentioning the file path) where exactly we need to linkup sftp host details, authentication details with the reader, not sure if I am missing something. It would be really helpful if you can provide some references"},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1680699635,"post_id":75926423,"comment_id":133942121,"body_markdown":"Unfortunately I don&#39;t have an example with SFTP. But I hope you get the idea.","body":"Unfortunately I don&#39;t have an example with SFTP. But I hope you get the idea."},{"owner":{"account_id":1878542,"reputation":785,"user_id":1699206,"accept_rate":76,"display_name":"Shabarinath Volam"},"score":0,"creation_date":1680762826,"post_id":75926423,"comment_id":133953818,"body_markdown":"Thanks Mahmoud for your time and for providing valuable info, I will explore more into it.","body":"Thanks Mahmoud for your time and for providing valuable info, I will explore more into it."}],"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680591986,"creation_date":1680591986,"answer_id":75926423,"question_id":75922953,"body_markdown":"&gt; can someone please suggest whether I am in the correct direction\r\n\r\nYes, using `URLResource` with the `FlatFileItemReader` is the way to go. The reader will stream data from the remote location in chunks, it will not download the file locally.","title":"Spring batch read remote csv file by chunks and process them by chunks","body":"<blockquote>\n<p>can someone please suggest whether I am in the correct direction</p>\n</blockquote>\n<p>Yes, using <code>URLResource</code> with the <code>FlatFileItemReader</code> is the way to go. The reader will stream data from the remote location in chunks, it will not download the file locally.</p>\n"}],"owner":{"account_id":1878542,"reputation":785,"user_id":1699206,"accept_rate":76,"display_name":"Shabarinath Volam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":356,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680591986,"creation_date":1680548749,"question_id":75922953,"body_markdown":"I have a requirement to read a CSV file (consisting of 40k+ records) by chunks from a remote linux box location and then pass the chunk info to the processer and writer without downloading the file locally, I want to get an idea or references for how to achieve this requirement.\r\n\r\nI have gone through the below approaches but am not really sure whether these approaches read the file in chunks or not, I also see there is ***&quot;sftpremotefiletemplate&quot;*** can someone please suggest whether I am in the correct direction or do I need to use sftpremotefiletemplate (or any other approach)?\r\n\r\n    @Bean\r\n    public Job readRemoteCsvFileJob(Step step1) {\r\n        return jobBuilderFactory.get(&quot;readRemoteCsvFileJob&quot;)\r\n                .incrementer(new RunIdIncrementer())\r\n                .flow(step1)\r\n                .end()\r\n                .build();\r\n    }\r\n    \r\n    @Bean\r\n    public Step step1(ItemReader&lt;MyItem&gt; reader, ItemWriter&lt;MyItem&gt; writer) {\r\n        return stepBuilderFactory.get(&quot;step1&quot;)\r\n                .&lt;MyItem, MyItem&gt;chunk(10)\r\n                .reader(reader)\r\n                .writer(writer)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public FlatFileItemReader&lt;MyItem&gt; reader() {\r\n        FlatFileItemReader&lt;MyItem&gt; reader = new FlatFileItemReader&lt;&gt;();\r\n        reader.setResource(new UrlResource(&quot;/remote-path/myfile.csv&quot;));\r\n        reader.setLineMapper(new DefaultLineMapper&lt;MyItem&gt;() {{\r\n            setLineTokenizer(new DelimitedLineTokenizer() {{\r\n                setNames(new String[]{&quot;field1&quot;, &quot;field2&quot;});\r\n            }});\r\n            setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;MyItem&gt;() {{\r\n                setTargetType(MyItem.class);\r\n            }});\r\n        }});\r\n        return reader;\r\n    }","title":"Spring batch read remote csv file by chunks and process them by chunks","body":"<p>I have a requirement to read a CSV file (consisting of 40k+ records) by chunks from a remote linux box location and then pass the chunk info to the processer and writer without downloading the file locally, I want to get an idea or references for how to achieve this requirement.</p>\n<p>I have gone through the below approaches but am not really sure whether these approaches read the file in chunks or not, I also see there is <em><strong>&quot;sftpremotefiletemplate&quot;</strong></em> can someone please suggest whether I am in the correct direction or do I need to use sftpremotefiletemplate (or any other approach)?</p>\n<pre><code>@Bean\npublic Job readRemoteCsvFileJob(Step step1) {\n    return jobBuilderFactory.get(&quot;readRemoteCsvFileJob&quot;)\n            .incrementer(new RunIdIncrementer())\n            .flow(step1)\n            .end()\n            .build();\n}\n\n@Bean\npublic Step step1(ItemReader&lt;MyItem&gt; reader, ItemWriter&lt;MyItem&gt; writer) {\n    return stepBuilderFactory.get(&quot;step1&quot;)\n            .&lt;MyItem, MyItem&gt;chunk(10)\n            .reader(reader)\n            .writer(writer)\n            .build();\n}\n\n@Bean\npublic FlatFileItemReader&lt;MyItem&gt; reader() {\n    FlatFileItemReader&lt;MyItem&gt; reader = new FlatFileItemReader&lt;&gt;();\n    reader.setResource(new UrlResource(&quot;/remote-path/myfile.csv&quot;));\n    reader.setLineMapper(new DefaultLineMapper&lt;MyItem&gt;() {{\n        setLineTokenizer(new DelimitedLineTokenizer() {{\n            setNames(new String[]{&quot;field1&quot;, &quot;field2&quot;});\n        }});\n        setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;MyItem&gt;() {{\n            setTargetType(MyItem.class);\n        }});\n    }});\n    return reader;\n}\n</code></pre>\n"},{"tags":["java","mongodb","mongodb-java"],"comments":[{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":3,"creation_date":1411371746,"post_id":25968592,"comment_id":40661223,"body_markdown":"MongoDb documentation is actually very good. Did you try?","body":"MongoDb documentation is actually very good. Did you try?"}],"answers":[{"comments":[{"owner":{"account_id":1318788,"reputation":2896,"user_id":1265077,"accept_rate":88,"display_name":"KPrince36"},"score":17,"creation_date":1426706849,"post_id":25968802,"comment_id":46487645,"body_markdown":"According to [mongodb docs](http://docs.mongodb.org/manual/reference/method/db.collection.ensureIndex/)  `ensureIndex()` is deprecated.","body":"According to <a href=\"http://docs.mongodb.org/manual/reference/method/db.collection.ensureIndex/\" rel=\"nofollow noreferrer\">mongodb docs</a>  <code>ensureIndex()</code> is deprecated."},{"owner":{"account_id":45274,"reputation":1488,"user_id":5444623,"display_name":"PeterM"},"score":1,"creation_date":1490858783,"post_id":25968802,"comment_id":73302465,"body_markdown":"`createIndex` will soft-fail in fact (at least at 3.0). On subsequent calls it will return &quot;ok&quot;, but also &quot;note&quot; stating that &quot;all indexes already exist&quot;","body":"<code>createIndex</code> will soft-fail in fact (at least at 3.0). On subsequent calls it will return &quot;ok&quot;, but also &quot;note&quot; stating that &quot;all indexes already exist&quot;"}],"tags":[],"owner":{"account_id":1888905,"reputation":15363,"user_id":1707520,"accept_rate":100,"display_name":"sol4me"},"comment_count":2,"down_vote_count":1,"up_vote_count":41,"is_accepted":true,"score":40,"last_activity_date":1462891354,"creation_date":1411371252,"answer_id":25968802,"question_id":25968592,"body_markdown":"**Update 2:**\r\nThe original answer, as well as the first update, erroneously reference the Mongo shell documentation instead of the Java API.\r\n\r\nIn Java, [`DBCollection.ensureIndex()`][2] was deprecated in version 2.12 and removed in version 3.0. [`DBCollection.createIndex()`][3] is the one that should be used.\r\n\r\n**Update:**  \r\n`db.collection.ensureIndex()` is deprecated since version 3.0.0.  \r\nIs now an alias for [db.collection.createIndex()][1].\r\n\r\n**Original:**  \r\n`createIndex()` is [deprecated since 1.8][1]\r\n\r\nIt was used to create indexes on collections whereas `ensureIndex()` creates an index on the specified **field** if the index does not already exist. Moreover when we execute `createIndex()` twice the second execution will just **fail** whereas with `ensureIndex()` you can invoke it multiple times and it will **not fail**\r\n\r\nAnd one more thing that they changed regarding behavior of `ensureIndex()`, in previous versions of mongodb(versions less then 2.6)  if the index entry for an existing document exceeds the max index key length an **index would be created** but  Mongodb **would not index** such documents whereas in recent version **no index would be created**.\r\n\r\n  [1]: https://docs.mongodb.org/manual/reference/method/db.collection.createIndex/#db.collection.createIndex\r\n  [2]: http://api.mongodb.com/java/2.12/com/mongodb/DBCollection.html#ensureIndex(com.mongodb.DBObject)\r\n  [3]: http://api.mongodb.com/java/current/com/mongodb/DBCollection.html#createIndex-com.mongodb.DBObject-\r\n","title":"Difference between createIndex() and ensureIndex() in java using mongodb","body":"<p><strong>Update 2:</strong>\nThe original answer, as well as the first update, erroneously reference the Mongo shell documentation instead of the Java API.</p>\n\n<p>In Java, <a href=\"http://api.mongodb.com/java/2.12/com/mongodb/DBCollection.html#ensureIndex(com.mongodb.DBObject)\" rel=\"noreferrer\"><code>DBCollection.ensureIndex()</code></a> was deprecated in version 2.12 and removed in version 3.0. <a href=\"http://api.mongodb.com/java/current/com/mongodb/DBCollection.html#createIndex-com.mongodb.DBObject-\" rel=\"noreferrer\"><code>DBCollection.createIndex()</code></a> is the one that should be used.</p>\n\n<p><strong>Update:</strong><br>\n<code>db.collection.ensureIndex()</code> is deprecated since version 3.0.0.<br>\nIs now an alias for <a href=\"https://docs.mongodb.org/manual/reference/method/db.collection.createIndex/#db.collection.createIndex\" rel=\"noreferrer\">db.collection.createIndex()</a>.</p>\n\n<p><strong>Original:</strong><br>\n<code>createIndex()</code> is <a href=\"https://docs.mongodb.org/manual/reference/method/db.collection.createIndex/#db.collection.createIndex\" rel=\"noreferrer\">deprecated since 1.8</a></p>\n\n<p>It was used to create indexes on collections whereas <code>ensureIndex()</code> creates an index on the specified <strong>field</strong> if the index does not already exist. Moreover when we execute <code>createIndex()</code> twice the second execution will just <strong>fail</strong> whereas with <code>ensureIndex()</code> you can invoke it multiple times and it will <strong>not fail</strong></p>\n\n<p>And one more thing that they changed regarding behavior of <code>ensureIndex()</code>, in previous versions of mongodb(versions less then 2.6)  if the index entry for an existing document exceeds the max index key length an <strong>index would be created</strong> but  Mongodb <strong>would not index</strong> such documents whereas in recent version <strong>no index would be created</strong>.</p>\n"},{"comments":[{"owner":{"account_id":5180411,"reputation":273,"user_id":4146304,"display_name":"Jens Grivolla"},"score":0,"creation_date":1413458785,"post_id":26403150,"comment_id":41455480,"body_markdown":"Btw, I can&#39;t comment on @sol4me &#39;s wrong answer due to lack of reputation, nor resurrect my wrongly deleted original answer, or do anything much else for that matter. :-(","body":"Btw, I can&#39;t comment on @sol4me &#39;s wrong answer due to lack of reputation, nor resurrect my wrongly deleted original answer, or do anything much else for that matter. :-("},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1413458805,"post_id":26403150,"comment_id":41455495,"body_markdown":"If you think you are right, post well-written answer, not that kind of useless answer. This is going to be deleted for sure.","body":"If you think you are right, post well-written answer, not that kind of useless answer. This is going to be deleted for sure."},{"owner":{"account_id":5180411,"reputation":273,"user_id":4146304,"display_name":"Jens Grivolla"},"score":2,"creation_date":1413459014,"post_id":26403150,"comment_id":41455606,"body_markdown":"I&#39;m sorry, but what is useless about my answer? I am saying that @sol4me got it wrong, and in the Java API you actually have to use createIndex(). I even reference the corresponding JIRA issue where I managed to clarify this with the MongoDB developers...  \n\nIf I ever got a reply from those who delete my answer I would edit it and not leave all the stuff in there to show how it got deleted. As it is, this is all extremely hostile towards me, after I even made the effort of discussing things with the developers so I could give a correct answer.","body":"I&#39;m sorry, but what is useless about my answer? I am saying that @sol4me got it wrong, and in the Java API you actually have to use createIndex(). I even reference the corresponding JIRA issue where I managed to clarify this with the MongoDB developers...    If I ever got a reply from those who delete my answer I would edit it and not leave all the stuff in there to show how it got deleted. As it is, this is all extremely hostile towards me, after I even made the effort of discussing things with the developers so I could give a correct answer."},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1413459104,"post_id":26403150,"comment_id":41455662,"body_markdown":"You are quoting other comments and arguing instead of simply answering the question. Do as you wish, I just wanted to tell you there is no way for that kind of answer to stay more than a couple of hours","body":"You are quoting other comments and arguing instead of simply answering the question. Do as you wish, I just wanted to tell you there is no way for that kind of answer to stay more than a couple of hours"},{"owner":{"account_id":5180411,"reputation":273,"user_id":4146304,"display_name":"Jens Grivolla"},"score":0,"creation_date":1413459456,"post_id":26403150,"comment_id":41455839,"body_markdown":"My correct answer got deleted twice, without any explanation or any reaction to my request for clarification, so yes, I am seriously pissed and that shows in the repost of my answer. If anybody had the decency to treat me like a human being instead of just deleting my answers (I had neither quoted anybody nor argued at that point), this thread wouldn&#39;t exist.","body":"My correct answer got deleted twice, without any explanation or any reaction to my request for clarification, so yes, I am seriously pissed and that shows in the repost of my answer. If anybody had the decency to treat me like a human being instead of just deleting my answers (I had neither quoted anybody nor argued at that point), this thread wouldn&#39;t exist."},{"owner":{"account_id":5180411,"reputation":273,"user_id":4146304,"display_name":"Jens Grivolla"},"score":0,"creation_date":1413464976,"post_id":26403150,"comment_id":41459308,"body_markdown":"I have now removed my comments about the deletion from the answer. However, I still find it extremely disrespectful to just delete my *correct* answer without comment and without responding to my requests for clarification. @bluefeet why did you delete my post? I already explained that this is the correct answer, all other answers are WRONG. You could at least reply when I ask about it instead of just deleting it again and the related comments. I actually point to this question in the MongoDB JIRA issue, and you just keep deleting my answer, which is THE ONLY CORRECT ONE.","body":"I have now removed my comments about the deletion from the answer. However, I still find it extremely disrespectful to just delete my <i>correct</i> answer without comment and without responding to my requests for clarification. @bluefeet why did you delete my post? I already explained that this is the correct answer, all other answers are WRONG. You could at least reply when I ask about it instead of just deleting it again and the related comments. I actually point to this question in the MongoDB JIRA issue, and you just keep deleting my answer, which is THE ONLY CORRECT ONE."},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1413475658,"post_id":26403150,"comment_id":41466444,"body_markdown":"You really are an annoying one. People who review low quality answers and decide to delete it treat tens of posts a day. There&#39;s nothing personal against you, and they probably don&#39;t even remember you. A message is deleted only if several reviewers considered it had to. If you disagree, you can repost it trying to improve your answer. If it is deleted again, wonder why your answers are systematically deleted and stop accusing the others. If you can&#39;t change your mentality, just don&#39;t participate to SO, which is about cooperation and no competition.","body":"You really are an annoying one. People who review low quality answers and decide to delete it treat tens of posts a day. There&#39;s nothing personal against you, and they probably don&#39;t even remember you. A message is deleted only if several reviewers considered it had to. If you disagree, you can repost it trying to improve your answer. If it is deleted again, wonder why your answers are systematically deleted and stop accusing the others. If you can&#39;t change your mentality, just don&#39;t participate to SO, which is about cooperation and no competition."},{"owner":{"account_id":5180411,"reputation":273,"user_id":4146304,"display_name":"Jens Grivolla"},"score":3,"creation_date":1413532457,"post_id":26403150,"comment_id":41486859,"body_markdown":"Ok, I guess this is it then. My correct and documented answer got deleted twice, scored down twice, while the other answer which is the exact opposite of the correct answer is at +3. Clearly there is not much I can do about it. Thanks @Dici for at least replying. Btw, I&#39;m replying here because I lack reputation to move the discussion to chat as suggested by SO, which is also why my initial answer was not a comment on the existing answer.","body":"Ok, I guess this is it then. My correct and documented answer got deleted twice, scored down twice, while the other answer which is the exact opposite of the correct answer is at +3. Clearly there is not much I can do about it. Thanks @Dici for at least replying. Btw, I&#39;m replying here because I lack reputation to move the discussion to chat as suggested by SO, which is also why my initial answer was not a comment on the existing answer."}],"tags":[],"owner":{"account_id":5180411,"reputation":273,"user_id":4146304,"display_name":"Jens Grivolla"},"comment_count":8,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1490869497,"creation_date":1413458534,"answer_id":26403150,"question_id":25968592,"body_markdown":"In the Java API, `DBCollection.ensureIndex()` is deprecated&lt;s&gt;, exactly the other way around compared to the &quot;normal&quot; MongoDB API (at the time of the response)&lt;/s&gt;. **Update**: This inconsistency appears to have since been resolved, and `db.collection.createIndex()` now substitutes `db.collection.ensureIndex()` in the Mongo shell also.\r\n\r\nAs you can see in https://jira.mongodb.org/browse/JAVA-1097, in Java (which the OP asked about) `ensureIndex()` was deprecated in version \r\n2.12.0 of the Java driver, and [`DBCollection.createIndex()`][1] is the one you need to use. [`DBCollection.ensureIndex()`][2] (link to version 2.12) is not available in the [DBCollection][3] Java API anymore.\r\n\r\n\r\n  [1]: http://api.mongodb.com/java/current/com/mongodb/DBCollection.html#createIndex-com.mongodb.DBObject-\r\n  [2]: http://api.mongodb.com/java/2.12/com/mongodb/DBCollection.html#ensureIndex(com.mongodb.DBObject)\r\n  [3]: http://api.mongodb.com/java/current/com/mongodb/DBCollection.html","title":"Difference between createIndex() and ensureIndex() in java using mongodb","body":"<p>In the Java API, <code>DBCollection.ensureIndex()</code> is deprecated<s>, exactly the other way around compared to the \"normal\" MongoDB API (at the time of the response)</s>. <strong>Update</strong>: This inconsistency appears to have since been resolved, and <code>db.collection.createIndex()</code> now substitutes <code>db.collection.ensureIndex()</code> in the Mongo shell also.</p>\n\n<p>As you can see in <a href=\"https://jira.mongodb.org/browse/JAVA-1097\" rel=\"nofollow noreferrer\">https://jira.mongodb.org/browse/JAVA-1097</a>, in Java (which the OP asked about) <code>ensureIndex()</code> was deprecated in version \n2.12.0 of the Java driver, and <a href=\"http://api.mongodb.com/java/current/com/mongodb/DBCollection.html#createIndex-com.mongodb.DBObject-\" rel=\"nofollow noreferrer\"><code>DBCollection.createIndex()</code></a> is the one you need to use. <a href=\"http://api.mongodb.com/java/2.12/com/mongodb/DBCollection.html#ensureIndex(com.mongodb.DBObject)\" rel=\"nofollow noreferrer\"><code>DBCollection.ensureIndex()</code></a> (link to version 2.12) is not available in the <a href=\"http://api.mongodb.com/java/current/com/mongodb/DBCollection.html\" rel=\"nofollow noreferrer\">DBCollection</a> Java API anymore.</p>\n"},{"tags":[],"owner":{"account_id":1463408,"reputation":4327,"user_id":4660481,"accept_rate":50,"display_name":"GaspardP"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1445444403,"creation_date":1445444403,"answer_id":33264415,"question_id":25968592,"body_markdown":"The `ensureIndex` method found in the java driver (v2.12 and older) would cache whether or not the index exist on the collection. Since multiple clients could potentially change the indexes on a collection, the cache value may sometime be erroneous and the driver would fail to create a missing index.\r\n\r\nFor this reason, the java driver implemented a `createIndex` method with identical behaviour, except it won&#39;t cache the index status.\r\n\r\nWith drivers 2.12 and above, you can replace `ensureIndex` by `createIndex` and expect the same behaviour, except for the performance hit where the driver would formerly think that the index already exists and return without sending the createIndex command to the mongo server.\r\n\r\nAs to why they did not change the behaviour without renaming - that I have no idea.","title":"Difference between createIndex() and ensureIndex() in java using mongodb","body":"<p>The <code>ensureIndex</code> method found in the java driver (v2.12 and older) would cache whether or not the index exist on the collection. Since multiple clients could potentially change the indexes on a collection, the cache value may sometime be erroneous and the driver would fail to create a missing index.</p>\n\n<p>For this reason, the java driver implemented a <code>createIndex</code> method with identical behaviour, except it won't cache the index status.</p>\n\n<p>With drivers 2.12 and above, you can replace <code>ensureIndex</code> by <code>createIndex</code> and expect the same behaviour, except for the performance hit where the driver would formerly think that the index already exists and return without sending the createIndex command to the mongo server.</p>\n\n<p>As to why they did not change the behaviour without renaming - that I have no idea.</p>\n"},{"tags":[],"owner":{"account_id":13832668,"reputation":21,"user_id":9985097,"display_name":"Surender Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531588968,"creation_date":1531588968,"answer_id":51341725,"question_id":25968592,"body_markdown":"Deprecated since version &gt; 3.0.0: \r\ndb.collection.ensureIndex() is now an alias for db.collection.createIndex(). ","title":"Difference between createIndex() and ensureIndex() in java using mongodb","body":"<p>Deprecated since version > 3.0.0: \ndb.collection.ensureIndex() is now an alias for db.collection.createIndex(). </p>\n"},{"tags":[],"owner":{"account_id":9696880,"reputation":9031,"user_id":7193018,"display_name":"Shubham Verma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680591776,"creation_date":1680591776,"answer_id":75926398,"question_id":25968592,"body_markdown":"**Removed in 5.0**\r\n`db.collection.ensureIndex()` has been replaced by `db.collection.createIndex()`.\r\n\r\n**Snapshot:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zJFUW.png","title":"Difference between createIndex() and ensureIndex() in java using mongodb","body":"<p><strong>Removed in 5.0</strong>\n<code>db.collection.ensureIndex()</code> has been replaced by <code>db.collection.createIndex()</code>.</p>\n<p><strong>Snapshot:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/zJFUW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zJFUW.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5034188,"reputation":2539,"user_id":4043524,"accept_rate":50,"display_name":"Amit Chahar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30698,"favorite_count":0,"down_vote_count":0,"up_vote_count":52,"accepted_answer_id":25968802,"answer_count":5,"score":52,"last_activity_date":1680591776,"creation_date":1411370483,"question_id":25968592,"body_markdown":"What is the difference between `createIndex()` and `ensureIndex()` in Java using MongoDB? I googled this but didn&#39;t get a satisfactory answer.","title":"Difference between createIndex() and ensureIndex() in java using mongodb","body":"<p>What is the difference between <code>createIndex()</code> and <code>ensureIndex()</code> in Java using MongoDB? I googled this but didn't get a satisfactory answer.</p>\n"},{"tags":["java","jpa","spring-data","one-to-one"],"comments":[{"owner":{"account_id":5557928,"reputation":2328,"user_id":4408619,"display_name":"Azzabi Haythem"},"score":0,"creation_date":1680428670,"post_id":75911017,"comment_id":133894029,"body_markdown":"you can see  this solution https://stackoverflow.com/questions/67055725/how-to-retrieve-only-a-specific-field-from-child-entity-on-onetoone-relationshi","body":"you can see  this solution <a href=\"https://stackoverflow.com/questions/67055725/how-to-retrieve-only-a-specific-field-from-child-entity-on-onetoone-relationshi\" title=\"how to retrieve only a specific field from child entity on onetoone relationshi\">stackoverflow.com/questions/67055725/&hellip;</a>"},{"owner":{"account_id":17285580,"reputation":21,"user_id":12518271,"display_name":"Manikandan Uthaman"},"score":0,"creation_date":1682312288,"post_id":75911017,"comment_id":134189461,"body_markdown":"The solution mentioned in this post requires us to create another pojo and create queries. I have lots of entities which require createdBy field. Creating custom POJOs for all those is not possible. Is there any way to map JPA projections under @OneToOne annotation?","body":"The solution mentioned in this post requires us to create another pojo and create queries. I have lots of entities which require createdBy field. Creating custom POJOs for all those is not possible. Is there any way to map JPA projections under @OneToOne annotation?"}],"owner":{"account_id":17285580,"reputation":21,"user_id":12518271,"display_name":"Manikandan Uthaman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680591424,"creation_date":1680426027,"question_id":75911017,"body_markdown":"I am working on an application which has an entity called Post. I also have a User Details entity which is mapped with createdBy column in Post entity. I have modeled their relation using @OneToOne annotation in Post entity.\r\n```\r\npublic class Post {\r\n  ... other fields\r\n\r\n  @OneToOne\r\n  @JoinColumn(name=&#39;created_by&#39;, referencedColumnName=&#39;id&#39;)\r\n  public UserDetails createdBy;\r\n}\r\n\r\npublic class UserDetails {\r\n  public Integer id;\r\n  public String name;\r\n  ... other fields\r\n}\r\n```\r\n\r\nWhen i fetch the Post entity, it is returning the user details entity also with all its fields. But i need to read only id and name from user details. I tried to use Projections to achieve this, but i am not able to use user details projection inside Post entity. Is it possible to use a projection inside an entity and map using @OneToOne?\r\nI am using spring-boot-starter-jpa for my project.","title":"JPA projections inside entity","body":"<p>I am working on an application which has an entity called Post. I also have a User Details entity which is mapped with createdBy column in Post entity. I have modeled their relation using @OneToOne annotation in Post entity.</p>\n<pre><code>public class Post {\n  ... other fields\n\n  @OneToOne\n  @JoinColumn(name='created_by', referencedColumnName='id')\n  public UserDetails createdBy;\n}\n\npublic class UserDetails {\n  public Integer id;\n  public String name;\n  ... other fields\n}\n</code></pre>\n<p>When i fetch the Post entity, it is returning the user details entity also with all its fields. But i need to read only id and name from user details. I tried to use Projections to achieve this, but i am not able to use user details projection inside Post entity. Is it possible to use a projection inside an entity and map using @OneToOne?\nI am using spring-boot-starter-jpa for my project.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":0,"creation_date":1320705281,"post_id":5641072,"comment_id":9849743,"body_markdown":"I&#39;ve edited your question to be a better format.  Be sure to spend time formatting your question so people can process it faster.","body":"I&#39;ve edited your question to be a better format.  Be sure to spend time formatting your question so people can process it faster."}],"answers":[{"tags":[],"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1302639326,"creation_date":1302639326,"answer_id":5641086,"question_id":5641072,"body_markdown":"Edit your .classpath file. (Or via the project build path).","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>Edit your .classpath file. (Or via the project build path).</p>\n"},{"comments":[{"owner":{"account_id":735802,"reputation":471,"user_id":704829,"display_name":"sam"},"score":0,"creation_date":1302639727,"post_id":5641104,"comment_id":6431255,"body_markdown":"there are no source folders listed only an error saying i should have src","body":"there are no source folders listed only an error saying i should have src"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1302640489,"post_id":5641104,"comment_id":6431457,"body_markdown":"@sam and where are you sources?","body":"@sam and where are you sources?"},{"owner":{"account_id":1123074,"reputation":20262,"user_id":1110941,"accept_rate":91,"display_name":"prograhammer"},"score":4,"creation_date":1471744677,"post_id":5641104,"comment_id":65469866,"body_markdown":"This worked for me. On the `source` tab I used the `remove` button and removed the folders that were listed but not found.","body":"This worked for me. On the <code>source</code> tab I used the <code>remove</code> button and removed the folders that were listed but not found."}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1302639391,"creation_date":1302639391,"answer_id":5641104,"question_id":5641072,"body_markdown":"Go to the `Build Path` dialog (`right-click project &gt; Build Path &gt; Configure Build Path`) and make sure you have the correct source folder listed, and make sure it exists.\r\n\r\nThe source folder is the one that holds your sources, usuglaly in the form: `project/src/com/yourpackage/...`","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>Go to the <code>Build Path</code> dialog (<code>right-click project &gt; Build Path &gt; Configure Build Path</code>) and make sure you have the correct source folder listed, and make sure it exists.</p>\n\n<p>The source folder is the one that holds your sources, usuglaly in the form: <code>project/src/com/yourpackage/...</code></p>\n"},{"tags":[],"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1302639392,"creation_date":1302639392,"answer_id":5641105,"question_id":5641072,"body_markdown":"Create the src folder in the project.","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>Create the src folder in the project.</p>\n"},{"tags":[],"owner":{"account_id":338578,"reputation":391,"user_id":667530,"display_name":"Don"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1302645563,"creation_date":1302645563,"answer_id":5642124,"question_id":5641072,"body_markdown":"In eclipse, you must be careful to create a &quot;source folder&quot; (File-&gt;New-&gt;Source Folder).  This way, it&#39;s automatically on your classpath, and, more importantly, Eclipse knows that these are compilable files.  It&#39;s picky that way.","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>In eclipse, you must be careful to create a \"source folder\" (File->New->Source Folder).  This way, it's automatically on your classpath, and, more importantly, Eclipse knows that these are compilable files.  It's picky that way.</p>\n"},{"tags":[],"owner":{"account_id":1024226,"reputation":761,"user_id":1033892,"display_name":"Fvergniaud"},"comment_count":0,"down_vote_count":0,"up_vote_count":76,"is_accepted":false,"score":76,"last_activity_date":1320757392,"creation_date":1320675458,"answer_id":8037688,"question_id":5641072,"body_markdown":"Right-Click Project --&gt; Build Path --&gt; Configure Build Path; unselect the SRC, save, select again.\r\n\r\nThis solved my problem.","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>Right-Click Project --> Build Path --> Configure Build Path; unselect the SRC, save, select again.</p>\n\n<p>This solved my problem.</p>\n"},{"tags":[],"owner":{"account_id":98018,"reputation":51575,"user_id":265570,"accept_rate":69,"display_name":"bkaid"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1320861664,"creation_date":1320861664,"answer_id":8069418,"question_id":5641072,"body_markdown":"Right Click Project -&gt; New -&gt; Folder -&gt; Folder Name: src -&gt; Finish","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>Right Click Project -> New -> Folder -> Folder Name: src -> Finish</p>\n"},{"tags":[],"owner":{"account_id":147500,"reputation":101,"user_id":358656,"display_name":"user358656"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1326471756,"creation_date":1326471756,"answer_id":8853745,"question_id":5641072,"body_markdown":"Here&#39;s what worked for me: right click the project-&gt; source -&gt; format\r\nAfter that just drag and drop the source folder into eclipse under the project and select link.\r\n\r\ngood luck!","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>Here's what worked for me: right click the project-> source -> format\nAfter that just drag and drop the source folder into eclipse under the project and select link.</p>\n\n<p>good luck!</p>\n"},{"tags":[],"owner":{"display_name":"user6727670"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1471457604,"creation_date":1471457604,"answer_id":39003641,"question_id":5641072,"body_markdown":"I was confused by this for hours.\r\n\r\nRight click on project -&gt; Build Path -&gt; Configure Build Path -&gt; Add Folder","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>I was confused by this for hours.</p>\n\n<p>Right click on project -> Build Path -> Configure Build Path -> Add Folder</p>\n"},{"tags":[],"owner":{"account_id":12910879,"reputation":21,"user_id":9336614,"display_name":"NightWind"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1520170153,"creation_date":1520170153,"answer_id":49095937,"question_id":5641072,"body_markdown":"One of the build path issue is it cannot find the correct /src/conf source folder. Right click on each project, Build Path &gt; Configure Build Path. Under the Source tab, remove the folder with a red cross icon on the bottom right. It will work for the situation that there is a small red exclamation mark “!“  bedore your project name!","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>One of the build path issue is it cannot find the correct /src/conf source folder. Right click on each project, Build Path > Configure Build Path. Under the Source tab, remove the folder with a red cross icon on the bottom right. It will work for the situation that there is a small red exclamation mark “!“  bedore your project name!</p>\n"},{"tags":[],"owner":{"account_id":7458524,"reputation":651,"user_id":5670939,"display_name":"Radioactive"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523817773,"creation_date":1523817773,"answer_id":49845536,"question_id":5641072,"body_markdown":"If you are facing an error with the folder, such as src/test/java or src/test/resources, just do a right click on the folder and then create a a new folder with the name being src/test/java. This should solve your problem.","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>If you are facing an error with the folder, such as src/test/java or src/test/resources, just do a right click on the folder and then create a a new folder with the name being src/test/java. This should solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":8998563,"reputation":1629,"user_id":6707951,"display_name":"Ajmal V Aliyar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560768488,"creation_date":1560768004,"answer_id":56629604,"question_id":5641072,"body_markdown":"I think it&#39;s because of the .classpath getting saved with the deleted source folder configuration. \r\n\r\n 1. Create the missing folder [ &#39;`src`&#39; in your case] manually inside the root of the project. When I say manually, I meant outside Eclipse, using the file explorer.\r\n\r\n 2. Then, come back to eclipse and refresh the project. Now, the error saying it&#39;s already there will be gone.\r\n\r\n 3. Now, Right click on the **project** &gt; **Build Path** &gt; **Configure Build path**. It should take us to the **Java build path** side menu.\r\n\r\n 4. Make sure we are on the &#39;**Source**&#39; tab. Delete the source folder causing the problem. Now, maybe the folder might show up in the project structure and you may delete that too.","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>I think it's because of the .classpath getting saved with the deleted source folder configuration. </p>\n\n<ol>\n<li><p>Create the missing folder [ '<code>src</code>' in your case] manually inside the root of the project. When I say manually, I meant outside Eclipse, using the file explorer.</p></li>\n<li><p>Then, come back to eclipse and refresh the project. Now, the error saying it's already there will be gone.</p></li>\n<li><p>Now, Right click on the <strong>project</strong> > <strong>Build Path</strong> > <strong>Configure Build path</strong>. It should take us to the <strong>Java build path</strong> side menu.</p></li>\n<li><p>Make sure we are on the '<strong>Source</strong>' tab. Delete the source folder causing the problem. Now, maybe the folder might show up in the project structure and you may delete that too.</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":9271574,"reputation":2976,"user_id":7967164,"display_name":"Dennis Alund"},"score":0,"creation_date":1572924823,"post_id":58703922,"comment_id":103703478,"body_markdown":"Seems to be a few other answers already proposing this as a solution.","body":"Seems to be a few other answers already proposing this as a solution."}],"tags":[],"owner":{"account_id":17029674,"reputation":21,"user_id":12320091,"display_name":"Rakesh Jain"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1572929000,"creation_date":1572923220,"answer_id":58703922,"question_id":5641072,"body_markdown":"Right-Click Project --&gt; Build Path --&gt; Configure Build Path--&gt;source--&gt;(Select missing folder or path)--&gt;Add Folder--&gt;Apply--&gt;Ok\r\n","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>Right-Click Project --> Build Path --> Configure Build Path-->source-->(Select missing folder or path)-->Add Folder-->Apply-->Ok</p>\n"},{"tags":[],"owner":{"account_id":17466849,"reputation":1,"user_id":12663429,"display_name":"user12663429"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578336538,"creation_date":1578336538,"answer_id":59617398,"question_id":5641072,"body_markdown":"Eclipse wouldn&#39;t let me point to an existing (or add a new) source directory.\r\nEclipse&#39;s configuration files can be wonky.  In my case I should have started simple. **Right click the project and click Refresh.**   \r\n\r\n\r\n\r\n ","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>Eclipse wouldn't let me point to an existing (or add a new) source directory.\nEclipse's configuration files can be wonky.  In my case I should have started simple. <strong>Right click the project and click Refresh.</strong>   </p>\n"},{"tags":[],"owner":{"account_id":7189977,"reputation":53,"user_id":5490686,"display_name":"user123456789"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592410465,"creation_date":1592410465,"answer_id":62433560,"question_id":5641072,"body_markdown":"In my case eclipse reported this in the Problems view on the parent project which does not have any code. I just delete the error whenever it is reported on this parent project where src folder is really not needed.","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>In my case eclipse reported this in the Problems view on the parent project which does not have any code. I just delete the error whenever it is reported on this parent project where src folder is really not needed.</p>\n"},{"tags":[],"owner":{"account_id":4764104,"reputation":9906,"user_id":3850730,"accept_rate":83,"display_name":"Sabir Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680591399,"creation_date":1680591399,"answer_id":75926341,"question_id":5641072,"body_markdown":"There was nothing wrong in my project set up , it just started to happen one fine day. To resolve, I had to do just click **Apply and Close** on **Project Build Path Set Up** , without actually changing anything. ","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>There was nothing wrong in my project set up , it just started to happen one fine day. To resolve, I had to do just click <strong>Apply and Close</strong> on <strong>Project Build Path Set Up</strong> , without actually changing anything.</p>\n"}],"owner":{"account_id":735802,"reputation":471,"user_id":704829,"display_name":"sam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132334,"favorite_count":0,"down_vote_count":1,"up_vote_count":47,"answer_count":15,"score":46,"last_activity_date":1680591399,"creation_date":1302639259,"question_id":5641072,"body_markdown":"I imported a jar file into workspace and this is the error I get:\r\n\r\n&gt; Description\tResource\tPath\tLocation\tType &lt;br /&gt;\r\n&gt; Project &#39;Interpreter1&#39; is missing required source folder: &#39;src&#39;\tInterpreter1\t\tBuild path\tBuild Path Problem\r\n\r\nHow can i get rid of this error?","title":"Eclipse Java Missing required source folder: &#39;src&#39;","body":"<p>I imported a jar file into workspace and this is the error I get:</p>\n\n<blockquote>\n  <p>Description   Resource    Path    Location    Type <br />\n  Project 'Interpreter1' is missing required source folder: 'src'   Interpreter1        Build path  Build Path Problem</p>\n</blockquote>\n\n<p>How can i get rid of this error?</p>\n"},{"tags":["java","client-server","opc-ua","opc","unified-automation-sdk"],"comments":[{"owner":{"account_id":301604,"reputation":2728,"user_id":609444,"accept_rate":100,"display_name":"Erez A. Korn"},"score":1,"creation_date":1680609183,"post_id":75926172,"comment_id":133923823,"body_markdown":"Which version of the SDK are you using?","body":"Which version of the SDK are you using?"},{"owner":{"account_id":28210031,"reputation":27,"user_id":21562466,"display_name":"WickedXXX"},"score":0,"creation_date":1680658422,"post_id":75926172,"comment_id":133934371,"body_markdown":"@ErezA.Korn - Using prosys java sdk 4.2.0","body":"@ErezA.Korn - Using prosys java sdk 4.2.0"}],"owner":{"account_id":28210031,"reputation":27,"user_id":21562466,"display_name":"WickedXXX"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1680590218,"creation_date":1680590218,"question_id":75926172,"body_markdown":"Getting problem while adding the custom events to server node hierarchy in OPCUA server code(Prosys java sdk).\r\n\r\n\r\nWhen subscribing to these custom events directly after expanding into Server node in UAExpert, I am able to receive the events, but as per the specifications it is supposed that even when we subscribe to parent node i.e., Server Node, in that case also we should receive the child node events which is the custom event node.\r\nAnd I am not able to receive the child node events (custom event) when subscribing to the Server Node.\r\nHow to add these custom events under the Server node heirachy?","title":"OPCUA custom events","body":"<p>Getting problem while adding the custom events to server node hierarchy in OPCUA server code(Prosys java sdk).</p>\n<p>When subscribing to these custom events directly after expanding into Server node in UAExpert, I am able to receive the events, but as per the specifications it is supposed that even when we subscribe to parent node i.e., Server Node, in that case also we should receive the child node events which is the custom event node.\nAnd I am not able to receive the child node events (custom event) when subscribing to the Server Node.\nHow to add these custom events under the Server node heirachy?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":19534758,"reputation":31,"user_id":14293770,"display_name":"rwd762"},"score":0,"creation_date":1680367276,"post_id":75900202,"comment_id":133888091,"body_markdown":"Everything has been solved. Apparently I was too blind to see I was missing the securityFilterChain Bean ...... beginners mistake","body":"Everything has been solved. Apparently I was too blind to see I was missing the securityFilterChain Bean ...... beginners mistake"}],"owner":{"account_id":19534758,"reputation":31,"user_id":14293770,"display_name":"rwd762"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680590174,"creation_date":1680276154,"question_id":75900202,"body_markdown":"Im currently working on a Spring Boot Rest API.\r\nI have a UserAdministrationController for managing users (adding, removing, editing).\r\n\r\nIn order to secure all related endpoints, I configure my App in the following way:\r\n\r\n```@Bean\r\n    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.httpBasic().and().csrf().disable().authorizeHttpRequests()\r\n                .requestMatchers(&quot;/users/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                .anyRequest().authenticated();\r\n        return http.build();\r\n    }\r\n\r\n\r\nAnd for testing purposes I set up in-memory users:\r\n\r\n@Bean\r\n    public UserDetailsService userDetailsService() {\r\n        UserDetails user = org.springframework.security.core.userdetails.User\r\n                .withUsername(&quot;user&quot;)\r\n                .password(bCryptPasswordEncoder().encode(&quot;password&quot;))\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n        UserDetails user2 = org.springframework.security.core.userdetails.User\r\n                .withUsername(&quot;admin&quot;)\r\n                .password(bCryptPasswordEncoder().encode(&quot;password&quot;))\r\n                .roles(&quot;ADMIN&quot;)\r\n                .build();\r\n        return new InMemoryUserDetailsManager(user,user2);\r\n    }\r\n\r\n```\r\n\r\nAdditionally, I use @PreAuthorize for all my controller methods like that:\r\n\r\n```\r\n @PutMapping(&quot;/users/{id}&quot;)\r\n    @PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)\r\n    public ResponseEntity&lt;?&gt; editUser(@PathVariable String id, @RequestBody User newUser) {\r\n        User updatedUser = userAdministrationService.editUser(id, newUser);\r\n        return ResponseEntity.ok(updatedUser);\r\n    }\r\n```\r\n\r\nNow I want to test this endpoint and essentially I wanna see that whenever someone calls the endpoint without authorization, a 401 or 403.\r\nMy test looks as follows:\r\n\r\n```\r\n@Test\r\n    @WithMockUser(&quot;USER&quot;)\r\n    void editUserTest() throws Exception {\r\n        User modifiedUser = new User(&quot;lisa1&quot;, &quot;pw&quot;, &quot;email@test-mail.com&quot;);\r\n        Mockito.when(userAdministrationService.getUserById(modifiedUser.getId())).thenReturn(Optional.of(modifiedUser));\r\n\r\n        modifiedUser.setId(&quot;randomId&quot;);\r\n        modifiedUser.setRole(Role.ROLE_USER);\r\n\r\n        mockMvc.perform(put(&quot;/users/{id}&quot;, &quot;randomId&quot;).with(user(&quot;user&quot;).roles(&quot;USER&quot;)).with(csrf()).contentType(MediaType.APPLICATION_JSON).content(objectMapper.writeValueAsString(modifiedUser))).andExpect(status().isForbidden());\r\n    }\r\n\r\n```\r\nSo I kinda expect that when using the &quot;USER&quot; Role, I should receive the 403, but in that case I receive status 200.\r\nThis is the output:\r\n\r\n\r\n    MockHttpServletRequest:\r\n          HTTP Method = PUT\r\n          Request URI = /users/randomId\r\n           Parameters = {_csrf=[qS2FHI3G9z0WNlpkAdOU-q-iy3tBmukEaUsWQFiv5Qle90x-yx-1L-j3lVk7BmlRYv6gy5yX5kIirN8pUXkjcj2fhDhtzi5H]}\r\n              Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;198&quot;]\r\n                 Body = {&quot;email&quot;:&quot;email@test-mail.com&quot;,&quot;password&quot;:&quot;pw&quot;,&quot;username&quot;:&quot;lisa1&quot;,&quot;role&quot;:&quot;ROLE_USER&quot;,&quot;id&quot;:&quot;randomId&quot;,&quot;enabled&quot;:false,&quot;accountNonExpired&quot;:false,&quot;credentialsNonExpired&quot;:false,&quot;accountNonLocked&quot;:false}\r\n        Session Attrs = {SPRING_SECURITY_CONTEXT=SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]}\r\n    \r\n    Handler:\r\n                 Type = com.example.server.controller.UserAdministrationController\r\n               Method = com.example.server.controller.UserAdministrationController#editUser(String, User)\r\n    \r\n    Async:\r\n        Async started = false\r\n         Async result = null\r\n    \r\n    Resolved Exception:\r\n                 Type = null\r\n    \r\n    ModelAndView:\r\n            View name = null\r\n                 View = null\r\n                Model = null\r\n    \r\n    FlashMap:\r\n           Attributes = null\r\n    \r\n    MockHttpServletResponse:\r\n               Status = 200\r\n        Error message = null\r\n              Headers = [X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;0&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\r\n         Content type = null\r\n                 Body = \r\n        Forwarded URL = null\r\n       Redirected URL = null\r\n              Cookies = []\r\n    \r\n    java.lang.AssertionError: Status expected:&lt;403&gt; but was:&lt;200&gt;\r\n    Expected :403\r\n    Actual   :200\r\n\r\n\r\nSo this is my setup and for others tests it all works as expected, but Im not really sure whats wrong with my editUserTest.\r\n\r\nI already tried to check wether the securitycontext returns an authorzied ROLE but it was correctly set to USER so it should still return 403, not 200.\r\n\r\nIn Postman its the same. Im using Basic auth with the in-memory &quot;user&quot; and it still authenticates me.\r\n\r\nSo right now Im kinda out of ideas. Anyone has a clue?\r\nThanks a lot in advance and in cases more info is needed, let me know (still new to the whole stackoverflow thingy)\r\n\r\n\r\n\r\n","title":"Spring Boot Controller Test wrongly returning status code 200 instead of 403","body":"<p>Im currently working on a Spring Boot Rest API.\nI have a UserAdministrationController for managing users (adding, removing, editing).</p>\n<p>In order to secure all related endpoints, I configure my App in the following way:</p>\n<pre><code>    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.httpBasic().and().csrf().disable().authorizeHttpRequests()\n                .requestMatchers(&quot;/users/**&quot;).hasRole(&quot;ADMIN&quot;)\n                .anyRequest().authenticated();\n        return http.build();\n    }\n\n\nAnd for testing purposes I set up in-memory users:\n\n@Bean\n    public UserDetailsService userDetailsService() {\n        UserDetails user = org.springframework.security.core.userdetails.User\n                .withUsername(&quot;user&quot;)\n                .password(bCryptPasswordEncoder().encode(&quot;password&quot;))\n                .roles(&quot;USER&quot;)\n                .build();\n        UserDetails user2 = org.springframework.security.core.userdetails.User\n                .withUsername(&quot;admin&quot;)\n                .password(bCryptPasswordEncoder().encode(&quot;password&quot;))\n                .roles(&quot;ADMIN&quot;)\n                .build();\n        return new InMemoryUserDetailsManager(user,user2);\n    }\n\n</code></pre>\n<p>Additionally, I use @PreAuthorize for all my controller methods like that:</p>\n<pre><code> @PutMapping(&quot;/users/{id}&quot;)\n    @PreAuthorize(&quot;hasRole('ADMIN')&quot;)\n    public ResponseEntity&lt;?&gt; editUser(@PathVariable String id, @RequestBody User newUser) {\n        User updatedUser = userAdministrationService.editUser(id, newUser);\n        return ResponseEntity.ok(updatedUser);\n    }\n</code></pre>\n<p>Now I want to test this endpoint and essentially I wanna see that whenever someone calls the endpoint without authorization, a 401 or 403.\nMy test looks as follows:</p>\n<pre><code>@Test\n    @WithMockUser(&quot;USER&quot;)\n    void editUserTest() throws Exception {\n        User modifiedUser = new User(&quot;lisa1&quot;, &quot;pw&quot;, &quot;email@test-mail.com&quot;);\n        Mockito.when(userAdministrationService.getUserById(modifiedUser.getId())).thenReturn(Optional.of(modifiedUser));\n\n        modifiedUser.setId(&quot;randomId&quot;);\n        modifiedUser.setRole(Role.ROLE_USER);\n\n        mockMvc.perform(put(&quot;/users/{id}&quot;, &quot;randomId&quot;).with(user(&quot;user&quot;).roles(&quot;USER&quot;)).with(csrf()).contentType(MediaType.APPLICATION_JSON).content(objectMapper.writeValueAsString(modifiedUser))).andExpect(status().isForbidden());\n    }\n\n</code></pre>\n<p>So I kinda expect that when using the &quot;USER&quot; Role, I should receive the 403, but in that case I receive status 200.\nThis is the output:</p>\n<pre><code>MockHttpServletRequest:\n      HTTP Method = PUT\n      Request URI = /users/randomId\n       Parameters = {_csrf=[qS2FHI3G9z0WNlpkAdOU-q-iy3tBmukEaUsWQFiv5Qle90x-yx-1L-j3lVk7BmlRYv6gy5yX5kIirN8pUXkjcj2fhDhtzi5H]}\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;198&quot;]\n             Body = {&quot;email&quot;:&quot;email@test-mail.com&quot;,&quot;password&quot;:&quot;pw&quot;,&quot;username&quot;:&quot;lisa1&quot;,&quot;role&quot;:&quot;ROLE_USER&quot;,&quot;id&quot;:&quot;randomId&quot;,&quot;enabled&quot;:false,&quot;accountNonExpired&quot;:false,&quot;credentialsNonExpired&quot;:false,&quot;accountNonLocked&quot;:false}\n    Session Attrs = {SPRING_SECURITY_CONTEXT=SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]}\n\nHandler:\n             Type = com.example.server.controller.UserAdministrationController\n           Method = com.example.server.controller.UserAdministrationController#editUser(String, User)\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = null\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 200\n    Error message = null\n          Headers = [X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;0&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\n     Content type = null\n             Body = \n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n\njava.lang.AssertionError: Status expected:&lt;403&gt; but was:&lt;200&gt;\nExpected :403\nActual   :200\n</code></pre>\n<p>So this is my setup and for others tests it all works as expected, but Im not really sure whats wrong with my editUserTest.</p>\n<p>I already tried to check wether the securitycontext returns an authorzied ROLE but it was correctly set to USER so it should still return 403, not 200.</p>\n<p>In Postman its the same. Im using Basic auth with the in-memory &quot;user&quot; and it still authenticates me.</p>\n<p>So right now Im kinda out of ideas. Anyone has a clue?\nThanks a lot in advance and in cases more info is needed, let me know (still new to the whole stackoverflow thingy)</p>\n"},{"tags":["java","mongodb","spring-boot","aggregation","java-17"],"owner":{"account_id":27275195,"reputation":1,"user_id":20795925,"display_name":"Practice Tech"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680590141,"creation_date":1680589921,"question_id":75926139,"body_markdown":"I am new in querying in mongoDb using aggregation and I am stuck with this problem:\r\n\r\nMy Springboot aggregation query could not fetch any data from mongo, but its equivalent query in mongoDbCompass can:\r\n\r\nHere is a snippet of my springboot implementations.\r\n\r\n    public BookingResponse findAllBookingList(BookingRequest request) {\r\n            int page = request.getPage() - 1;\r\n            int limit = request.getLimit();\r\n            String status = request.getStatus();\r\n    \r\n            Aggregation aggregation = null;\r\n    \r\n            if (StringUtils.isNotBlank(status)) {\r\n                aggregation = Aggregation.newAggregation(\r\n                    Aggregation.unwind(&quot;milestones&quot;),\r\n                    Aggregation.sort(Sort.by(&quot;_id&quot;, &quot;milestones.updated_at&quot;).descending()),\r\n                    Aggregation.group(&quot;_id&quot;)\r\n                        .first(&quot;_id&quot;).as(&quot;id&quot;)\r\n                        .first(&quot;booking_number&quot;).as(&quot;bookingNumber&quot;)\r\n                        .first(&quot;shipper_details&quot;).as(&quot;shipperDetails&quot;)\r\n                        .first(&quot;milestones&quot;).as(&quot;latestMilestone&quot;),\r\n                    Aggregation.match(Criteria.where(&quot;latestMilestone.status&quot;).is(status)),\r\n                    Aggregation.project(&quot;id&quot;, &quot;bookingNumber&quot;, &quot;shipperDetails&quot;, &quot;latestMilestone.status&quot;)\r\n                        .and(&quot;latestMilestone&quot;).as(&quot;milestones&quot;)\r\n                        .and(&quot;latestMilestone.status&quot;).as(&quot;status&quot;)\r\n                );\r\n            } else {\r\n                aggregation = Aggregation.newAggregation(\r\n                    Aggregation.sort(Sort.by(&quot;booked_at&quot;).descending()),\r\n                    Aggregation.project(&quot;id&quot;, &quot;bookingNumber&quot;, &quot;shipperDetails&quot;, &quot;latestMilestone.status&quot;)\r\n                        .and(&quot;latestMilestone&quot;).as(&quot;milestones&quot;)\r\n                        .and(&quot;latestMilestone.status&quot;).as(&quot;status&quot;)\r\n                );\r\n            }\r\n    \r\n            AggregationResults&lt;BookingEntity&gt; results = mongoTemplate.aggregate(aggregation,\r\n                &quot;booking&quot;, BookingEntity.class);\r\n    \r\n            List&lt;BookingEntity&gt; resultList = results.getMappedResults();\r\n            resultList.sort(Comparator.comparing(BookingEntity::getBookedAt).reversed());\r\n    \r\n            Page&lt;BookingEntity&gt; pageResult = new PageImpl&lt;&gt;(resultList,\r\n                PageRequest.of(page, limit), resultList.size());\r\n    \r\n            return buildResponse(pageResult, request);\r\n        }\r\n        \r\n        private BookingResponse buildResponse(Page&lt;BookingEntity&gt; results, BookingRequest request) {\r\n            BookingResponse response = new BookingResponse();\r\n            response.setMetadata(constructMetadata(results));\r\n            response.setBookings(\r\n                results.getContent()\r\n                    .stream()\r\n                    .map(bookingMapper::toDTO)\r\n                    .toList()\r\n            );\r\n            response.setStatusCounts(setStatusCount(results));\r\n    \r\n            return response;\r\n        }\r\n\r\nand here is it&#39;s equivalent query that is working in mongoDb Compass\r\n\r\n    [   {\r\n        $unwind: &quot;$milestones&quot;   },   {\r\n        $sort: {\r\n          &quot;_id&quot;: 1,\r\n          &quot;milestones.updated_at&quot;: -1\r\n        }   },   {\r\n        $group: {\r\n          &quot;_id&quot;: &quot;$_id&quot;,\r\n          &quot;id&quot;: { &quot;$first&quot;: &quot;$_id&quot; },\r\n          &quot;bookingNumber&quot;: { &quot;$first&quot;: &quot;$booking_number&quot; },\r\n          &quot;shipperDetails&quot;: { &quot;$first&quot;: &quot;$shipper_details&quot; },\r\n          &quot;latestMilestone&quot;: { &quot;$first&quot;: &quot;$milestones&quot; }\r\n        }   },   {\r\n        $match: {\r\n          &quot;latestMilestone.status&quot;: status\r\n        }   },   {\r\n        $project: {\r\n          &quot;id&quot;: 1,\r\n          &quot;bookingNumber&quot;: 1,\r\n          &quot;shipperDetails&quot;: 1,\r\n          &quot;milestones&quot;: &quot;$latestMilestone&quot;,\r\n          &quot;status&quot;: &quot;$latestMilestone.status&quot;\r\n        }   } ]\r\n\r\n[Sample Successful Query in MongoDB Compass][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/T4aqo.png\r\n\r\nAny insights regarding this delema will be highly appreciated. Thank you.\r\n","title":"Query working in MongoDb using Aggregation but NOT in Springboot","body":"<p>I am new in querying in mongoDb using aggregation and I am stuck with this problem:</p>\n<p>My Springboot aggregation query could not fetch any data from mongo, but its equivalent query in mongoDbCompass can:</p>\n<p>Here is a snippet of my springboot implementations.</p>\n<pre><code>public BookingResponse findAllBookingList(BookingRequest request) {\n        int page = request.getPage() - 1;\n        int limit = request.getLimit();\n        String status = request.getStatus();\n\n        Aggregation aggregation = null;\n\n        if (StringUtils.isNotBlank(status)) {\n            aggregation = Aggregation.newAggregation(\n                Aggregation.unwind(&quot;milestones&quot;),\n                Aggregation.sort(Sort.by(&quot;_id&quot;, &quot;milestones.updated_at&quot;).descending()),\n                Aggregation.group(&quot;_id&quot;)\n                    .first(&quot;_id&quot;).as(&quot;id&quot;)\n                    .first(&quot;booking_number&quot;).as(&quot;bookingNumber&quot;)\n                    .first(&quot;shipper_details&quot;).as(&quot;shipperDetails&quot;)\n                    .first(&quot;milestones&quot;).as(&quot;latestMilestone&quot;),\n                Aggregation.match(Criteria.where(&quot;latestMilestone.status&quot;).is(status)),\n                Aggregation.project(&quot;id&quot;, &quot;bookingNumber&quot;, &quot;shipperDetails&quot;, &quot;latestMilestone.status&quot;)\n                    .and(&quot;latestMilestone&quot;).as(&quot;milestones&quot;)\n                    .and(&quot;latestMilestone.status&quot;).as(&quot;status&quot;)\n            );\n        } else {\n            aggregation = Aggregation.newAggregation(\n                Aggregation.sort(Sort.by(&quot;booked_at&quot;).descending()),\n                Aggregation.project(&quot;id&quot;, &quot;bookingNumber&quot;, &quot;shipperDetails&quot;, &quot;latestMilestone.status&quot;)\n                    .and(&quot;latestMilestone&quot;).as(&quot;milestones&quot;)\n                    .and(&quot;latestMilestone.status&quot;).as(&quot;status&quot;)\n            );\n        }\n\n        AggregationResults&lt;BookingEntity&gt; results = mongoTemplate.aggregate(aggregation,\n            &quot;booking&quot;, BookingEntity.class);\n\n        List&lt;BookingEntity&gt; resultList = results.getMappedResults();\n        resultList.sort(Comparator.comparing(BookingEntity::getBookedAt).reversed());\n\n        Page&lt;BookingEntity&gt; pageResult = new PageImpl&lt;&gt;(resultList,\n            PageRequest.of(page, limit), resultList.size());\n\n        return buildResponse(pageResult, request);\n    }\n    \n    private BookingResponse buildResponse(Page&lt;BookingEntity&gt; results, BookingRequest request) {\n        BookingResponse response = new BookingResponse();\n        response.setMetadata(constructMetadata(results));\n        response.setBookings(\n            results.getContent()\n                .stream()\n                .map(bookingMapper::toDTO)\n                .toList()\n        );\n        response.setStatusCounts(setStatusCount(results));\n\n        return response;\n    }\n</code></pre>\n<p>and here is it's equivalent query that is working in mongoDb Compass</p>\n<pre><code>[   {\n    $unwind: &quot;$milestones&quot;   },   {\n    $sort: {\n      &quot;_id&quot;: 1,\n      &quot;milestones.updated_at&quot;: -1\n    }   },   {\n    $group: {\n      &quot;_id&quot;: &quot;$_id&quot;,\n      &quot;id&quot;: { &quot;$first&quot;: &quot;$_id&quot; },\n      &quot;bookingNumber&quot;: { &quot;$first&quot;: &quot;$booking_number&quot; },\n      &quot;shipperDetails&quot;: { &quot;$first&quot;: &quot;$shipper_details&quot; },\n      &quot;latestMilestone&quot;: { &quot;$first&quot;: &quot;$milestones&quot; }\n    }   },   {\n    $match: {\n      &quot;latestMilestone.status&quot;: status\n    }   },   {\n    $project: {\n      &quot;id&quot;: 1,\n      &quot;bookingNumber&quot;: 1,\n      &quot;shipperDetails&quot;: 1,\n      &quot;milestones&quot;: &quot;$latestMilestone&quot;,\n      &quot;status&quot;: &quot;$latestMilestone.status&quot;\n    }   } ]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/T4aqo.png\" rel=\"nofollow noreferrer\">Sample Successful Query in MongoDB Compass</a></p>\n<p>Any insights regarding this delema will be highly appreciated. Thank you.</p>\n"},{"tags":["java","qr-code"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1680579626,"post_id":75925225,"comment_id":133918109,"body_markdown":"`while (webcam.isOpen()) {` looks suspious as it could be block the Event Dispatching Thread","body":"<code>while (webcam.isOpen()) {</code> looks suspious as it could be block the Event Dispatching Thread"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1680580257,"post_id":75925225,"comment_id":133918166,"body_markdown":"This seems like a prime candidate for a [`SwingWorker`](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)","body":"This seems like a prime candidate for a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\" rel=\"nofollow noreferrer\"><code>SwingWorker</code></a>"},{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1680583969,"post_id":75925225,"comment_id":133918555,"body_markdown":"Why did you remove the code? We can only help with some concrete code that shows what you are trying.","body":"Why did you remove the code? We can only help with some concrete code that shows what you are trying."},{"owner":{"account_id":28208618,"reputation":1,"user_id":21561266,"display_name":"mid"},"score":0,"creation_date":1680590032,"post_id":75925225,"comment_id":133919374,"body_markdown":"I added some additional info.","body":"I added some additional info."}],"owner":{"account_id":28208618,"reputation":1,"user_id":21561266,"display_name":"mid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680589953,"creation_date":1680577762,"question_id":75925225,"body_markdown":"Warning: Beginner, may not understand certain concepts. \r\n\r\nI was coding a QR code scanner, and I was trying to make a popup JFrame window that displays a video feed of the webcam. The issue is that when the window pops up, it displays a blank white screen. The scanner itself works, but the video feed isn&#39;t showing up.\r\n\r\nI tried changing the background color, and the background color didn&#39;t change. I tried setting the JFrame to be undecorated, and the entire frame disappeared. I found this to be quite odd. \r\n\r\nUsing package com.github.sarxos\r\n\r\n\r\nFound another snippet of code that works on its own, but doesn&#39;t work in my program. I coded this program quite terribly, so I won&#39;t be pasting the verbose code. The only thing that I used was 4 action listeners for buttons and keys. Could this be the issue?\r\n\r\nHere is it calling upon the function. \r\n\r\n```java\r\nconfirmButton.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                // gets all the necessary info from the screen before going to next screen\r\n                event = eventName.getText();\r\n                // String monthString = monthDropdown.getText();\r\n\r\n                // get dropdown stuff here\r\n\r\n                // send info to server here\r\n\r\n                // hides the first screen\r\n                firstScreen.setVisible(false);\r\n                firstScreen.dispose();\r\n                // advances to second screen\r\n                secondScreen();\r\n            }\r\n        });\r\n```\r\n\r\nHere is the function:\r\n\r\n```java\r\n public void secondScreen() {\r\n        // set up second screen here\r\n        JFrame secondScreen = new JFrame();\r\n        secondScreen.setLayout(null);\r\n        // secondScreen.setAlwaysOnTop(true);\r\n\r\n        fullScreen(secondScreen);\r\n\r\n        // gets rid of the header\r\n        // secondScreen.setUndecorated(true);\r\n\r\n        // sets the background to dark gray\r\n        secondScreen.getContentPane().setBackground(Color.DARK_GRAY);\r\n        // disables alt-f4\r\n        // secondScreen.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);\r\n\r\n        scanQRCode scanner = new scanQRCode();\r\n        Future&lt;String&gt; scannedQRCode = scanner.getQRCode(secondScreen, (int) dimensions.getWidth(),\r\n                (int) dimensions.getHeight());\r\n\r\n        JButton alternativeLoginButton = new JButton(&quot;Or Login with Student ID&quot;);\r\n        alternativeLoginButton.setBounds((int) (0.5 * dimensions.getWidth() - 100),\r\n                (int) (0.8 * dimensions.getHeight()), 200, 25);\r\n        alternativeLoginButton.setBackground(Color.LIGHT_GRAY);\r\n        alternativeLoginButton.setForeground(Color.BLACK);\r\n\r\n        // manual thingy\r\n        alternativeLoginButton.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                manualStudentId(secondScreen);\r\n            }\r\n        });\r\n\r\n        secondScreen.add(alternativeLoginButton);\r\n\r\n        secondScreen.setAlwaysOnTop(true);\r\n        secondScreen.setVisible(true);\r\n\r\n        try {\r\n            String QRCode_Value = scannedQRCode.get();\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Error in getting QRCode value&quot;);\r\n            // probably shouldn&#39;t ever get here????\r\n        }\r\n    }\r\n\r\n```\r\n\r\nAnd here is the QR Code Scanner:\r\n\r\n```java\r\npublic class scanQRCode {\r\n    private ExecutorService executor = Executors.newSingleThreadExecutor();\r\n    private JFrame jFrame = new JFrame();\r\n\r\n    // puts the QR code in the middle of the screen\r\n    public Future&lt;String&gt; getQRCode(JFrame frame, int width, int height) {\r\n        Callable&lt;String&gt; scanTask = () -&gt; {\r\n            Webcam webcam = Webcam.getDefault(); // Generate Webcam Object\r\n            webcam.setViewSize(new java.awt.Dimension(640, 480));\r\n            WebcamPanel webcamPanel = new WebcamPanel(webcam);\r\n            webcamPanel.setMirrored(false);\r\n            webcamPanel.setBounds((int) (width / 2) - 320, (int) (height / 2) - 240, 640, 480);\r\n            frame.add(webcamPanel);\r\n            // jFrame.setVisible(true);\r\n\r\n            // jFrame.addWindowListener(new WindowAdapter() {\r\n            // @Override\r\n            // public void windowIconified(WindowEvent e) {\r\n            // // the window is minimized, terminate the task here\r\n            // jFrame.dispose();\r\n            // }\r\n            // });\r\n\r\n            // jFrame.addWindowListener(new WindowAdapter() {\r\n            // public void windowClosing(WindowEvent e) {\r\n            // webcam.close();\r\n            // }\r\n            // });\r\n            do {\r\n                try {\r\n                    BufferedImage image = webcam.getImage();\r\n                    System.out.println(image);\r\n                    if (image == null) {\r\n                        continue;\r\n                    }\r\n                    LuminanceSource source = new BufferedImageLuminanceSource(image);\r\n                    BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));\r\n                    Result result = new MultiFormatReader().decode(bitmap);\r\n                    if (result.getText() != null) {\r\n                        jFrame.setVisible(false);\r\n                        jFrame.dispose();\r\n                        webcam.close();\r\n                        return result.getText();\r\n                    }\r\n\r\n                } catch (Exception e) {\r\n                }\r\n            } while (true);\r\n        };\r\n        return executor.submit(scanTask);\r\n    } // End of scanQRCode\r\n\r\n// other code\r\n\r\n}```\r\n","title":"JFrame not displaying camera feed when trying to scan in QR code, and the exit button isn&#39;t working","body":"<p>Warning: Beginner, may not understand certain concepts.</p>\n<p>I was coding a QR code scanner, and I was trying to make a popup JFrame window that displays a video feed of the webcam. The issue is that when the window pops up, it displays a blank white screen. The scanner itself works, but the video feed isn't showing up.</p>\n<p>I tried changing the background color, and the background color didn't change. I tried setting the JFrame to be undecorated, and the entire frame disappeared. I found this to be quite odd.</p>\n<p>Using package com.github.sarxos</p>\n<p>Found another snippet of code that works on its own, but doesn't work in my program. I coded this program quite terribly, so I won't be pasting the verbose code. The only thing that I used was 4 action listeners for buttons and keys. Could this be the issue?</p>\n<p>Here is it calling upon the function.</p>\n<pre class=\"lang-java prettyprint-override\"><code>confirmButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                // gets all the necessary info from the screen before going to next screen\n                event = eventName.getText();\n                // String monthString = monthDropdown.getText();\n\n                // get dropdown stuff here\n\n                // send info to server here\n\n                // hides the first screen\n                firstScreen.setVisible(false);\n                firstScreen.dispose();\n                // advances to second screen\n                secondScreen();\n            }\n        });\n</code></pre>\n<p>Here is the function:</p>\n<pre class=\"lang-java prettyprint-override\"><code> public void secondScreen() {\n        // set up second screen here\n        JFrame secondScreen = new JFrame();\n        secondScreen.setLayout(null);\n        // secondScreen.setAlwaysOnTop(true);\n\n        fullScreen(secondScreen);\n\n        // gets rid of the header\n        // secondScreen.setUndecorated(true);\n\n        // sets the background to dark gray\n        secondScreen.getContentPane().setBackground(Color.DARK_GRAY);\n        // disables alt-f4\n        // secondScreen.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);\n\n        scanQRCode scanner = new scanQRCode();\n        Future&lt;String&gt; scannedQRCode = scanner.getQRCode(secondScreen, (int) dimensions.getWidth(),\n                (int) dimensions.getHeight());\n\n        JButton alternativeLoginButton = new JButton(&quot;Or Login with Student ID&quot;);\n        alternativeLoginButton.setBounds((int) (0.5 * dimensions.getWidth() - 100),\n                (int) (0.8 * dimensions.getHeight()), 200, 25);\n        alternativeLoginButton.setBackground(Color.LIGHT_GRAY);\n        alternativeLoginButton.setForeground(Color.BLACK);\n\n        // manual thingy\n        alternativeLoginButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                manualStudentId(secondScreen);\n            }\n        });\n\n        secondScreen.add(alternativeLoginButton);\n\n        secondScreen.setAlwaysOnTop(true);\n        secondScreen.setVisible(true);\n\n        try {\n            String QRCode_Value = scannedQRCode.get();\n        } catch (Exception e) {\n            System.out.println(&quot;Error in getting QRCode value&quot;);\n            // probably shouldn't ever get here????\n        }\n    }\n\n</code></pre>\n<p>And here is the QR Code Scanner:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class scanQRCode {\n    private ExecutorService executor = Executors.newSingleThreadExecutor();\n    private JFrame jFrame = new JFrame();\n\n    // puts the QR code in the middle of the screen\n    public Future&lt;String&gt; getQRCode(JFrame frame, int width, int height) {\n        Callable&lt;String&gt; scanTask = () -&gt; {\n            Webcam webcam = Webcam.getDefault(); // Generate Webcam Object\n            webcam.setViewSize(new java.awt.Dimension(640, 480));\n            WebcamPanel webcamPanel = new WebcamPanel(webcam);\n            webcamPanel.setMirrored(false);\n            webcamPanel.setBounds((int) (width / 2) - 320, (int) (height / 2) - 240, 640, 480);\n            frame.add(webcamPanel);\n            // jFrame.setVisible(true);\n\n            // jFrame.addWindowListener(new WindowAdapter() {\n            // @Override\n            // public void windowIconified(WindowEvent e) {\n            // // the window is minimized, terminate the task here\n            // jFrame.dispose();\n            // }\n            // });\n\n            // jFrame.addWindowListener(new WindowAdapter() {\n            // public void windowClosing(WindowEvent e) {\n            // webcam.close();\n            // }\n            // });\n            do {\n                try {\n                    BufferedImage image = webcam.getImage();\n                    System.out.println(image);\n                    if (image == null) {\n                        continue;\n                    }\n                    LuminanceSource source = new BufferedImageLuminanceSource(image);\n                    BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));\n                    Result result = new MultiFormatReader().decode(bitmap);\n                    if (result.getText() != null) {\n                        jFrame.setVisible(false);\n                        jFrame.dispose();\n                        webcam.close();\n                        return result.getText();\n                    }\n\n                } catch (Exception e) {\n                }\n            } while (true);\n        };\n        return executor.submit(scanTask);\n    } // End of scanQRCode\n\n// other code\n\n}```\n</code></pre>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":18137094,"reputation":495,"user_id":14254587,"display_name":"Charles Braga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680589439,"creation_date":1680546162,"question_id":75922610,"body_markdown":"I indend to create a request that receive a lot of data of one driver with MultpartFiles and others data:\r\n\r\n\r\n```\r\npublic class Driver {\r\n    private String name;\r\n    private int age;\r\n    private MultipartFile image;\r\n    private MultipartFile document;\r\n    private Car[] cars;\r\n}\r\n\r\npublic class Car {\r\n    private String model;\r\n    private int year;\r\n    private MultipartFile image;\r\n    private MultipartFile document;\r\n}\r\n\r\n```\r\n\r\nSo, I trid to use     \r\n\r\n```\r\npublic ResponseEntity&lt;?&gt; createDriver(@ModelAttribute Driver driver) \r\n```\r\n\r\nHowever it&#39;s not working.\r\n\r\nHow can I make a request saving a object with MultpartFile in JavaSpringboot? Is it possible?\r\n\r\n\r\n","title":"Spring Boot - Request with object with MultpartFile","body":"<p>I indend to create a request that receive a lot of data of one driver with MultpartFiles and others data:</p>\n<pre><code>public class Driver {\n    private String name;\n    private int age;\n    private MultipartFile image;\n    private MultipartFile document;\n    private Car[] cars;\n}\n\npublic class Car {\n    private String model;\n    private int year;\n    private MultipartFile image;\n    private MultipartFile document;\n}\n\n</code></pre>\n<p>So, I trid to use</p>\n<pre><code>public ResponseEntity&lt;?&gt; createDriver(@ModelAttribute Driver driver) \n</code></pre>\n<p>However it's not working.</p>\n<p>How can I make a request saving a object with MultpartFile in JavaSpringboot? Is it possible?</p>\n"},{"tags":["java","algorithm","layout","graphviz"],"comments":[{"owner":{"account_id":485835,"reputation":8478,"user_id":902383,"accept_rate":90,"display_name":"user902383"},"score":0,"creation_date":1372406471,"post_id":17359557,"comment_id":25192152,"body_markdown":"for directed graphs i used sugiyama framework, i never worked with non directed graphs so i&#39;m not sure what is best for them, you can also have a look at force directed graphs","body":"for directed graphs i used sugiyama framework, i never worked with non directed graphs so i&#39;m not sure what is best for them, you can also have a look at force directed graphs"}],"answers":[{"tags":[],"owner":{"account_id":955989,"reputation":10476,"user_id":981284,"accept_rate":94,"display_name":"rlegendi"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1372410245,"creation_date":1372410245,"answer_id":17361030,"question_id":17359557,"body_markdown":"I would recommend using the [GraphStream API](http://graphstream-project.org/). It handles the DOT format and the visualization is quite nice.\r\n\r\n* Watch it in action [in this video](http://www.youtube.com/watch?v=XX5rRF6uxow)\r\n* See the file input [demo here](http://graphstream-project.org/doc/Tutorials/Reading-files-using-FileSource_1.0/)\r\n","title":"Java graph layout algorithms","body":"<p>I would recommend using the <a href=\"http://graphstream-project.org/\" rel=\"noreferrer\">GraphStream API</a>. It handles the DOT format and the visualization is quite nice.</p>\n\n<ul>\n<li>Watch it in action <a href=\"http://www.youtube.com/watch?v=XX5rRF6uxow\" rel=\"noreferrer\">in this video</a></li>\n<li>See the file input <a href=\"http://graphstream-project.org/doc/Tutorials/Reading-files-using-FileSource_1.0/\" rel=\"noreferrer\">demo here</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25905173,"reputation":43,"user_id":19630346,"display_name":"Jamison Jiang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680589059,"creation_date":1680589059,"answer_id":75926054,"question_id":17359557,"body_markdown":"Maybe you can use recently open-sourced [graph-support][1] which is a java version of tiny graphviz.\r\n\r\n\r\n  [1]: https://github.com/jamisonjiang/graph-support","title":"Java graph layout algorithms","body":"<p>Maybe you can use recently open-sourced <a href=\"https://github.com/jamisonjiang/graph-support\" rel=\"nofollow noreferrer\">graph-support</a> which is a java version of tiny graphviz.</p>\n"}],"owner":{"account_id":959539,"reputation":283,"user_id":984200,"accept_rate":71,"display_name":"user984200"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5342,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1680589059,"creation_date":1372404891,"question_id":17359557,"body_markdown":"In my Java application, i need some sort of a layout algorithm. The first approach is as follows:\r\n\r\n- Graphviz package needs to be installed\r\n- Create a dot file\r\n- Call graphviz from java application and parse output (layout)\r\n- Show the graph with the layout from graphviz (attributed dot)\r\n\r\nBut this solution requires the graphviz package installed on the running machines. I want to get rid of this dependency and i am searching for an adequate replacement.\r\n\r\n- Input: Nodes with width and height / edges from node to node with a thickness of the line\r\n- Output: Surrounding bounding box size, positions for nodes and edges\r\n\r\nCan you recommend any good and simple java layout algorithm? Do you have any experiences? \r\n\r\nThanks","title":"Java graph layout algorithms","body":"<p>In my Java application, i need some sort of a layout algorithm. The first approach is as follows:</p>\n\n<ul>\n<li>Graphviz package needs to be installed</li>\n<li>Create a dot file</li>\n<li>Call graphviz from java application and parse output (layout)</li>\n<li>Show the graph with the layout from graphviz (attributed dot)</li>\n</ul>\n\n<p>But this solution requires the graphviz package installed on the running machines. I want to get rid of this dependency and i am searching for an adequate replacement.</p>\n\n<ul>\n<li>Input: Nodes with width and height / edges from node to node with a thickness of the line</li>\n<li>Output: Surrounding bounding box size, positions for nodes and edges</li>\n</ul>\n\n<p>Can you recommend any good and simple java layout algorithm? Do you have any experiences? </p>\n\n<p>Thanks</p>\n"},{"tags":["java","json","transform","jolt"],"comments":[{"owner":{"account_id":11500422,"reputation":2541,"user_id":8428397,"display_name":"Mohammadreza Khedri"},"score":0,"creation_date":1680674527,"post_id":75924991,"comment_id":133936061,"body_markdown":"Why `PID1` is `string` and  `PID2`, `PID3` is `integer` ?","body":"Why <code>PID1</code> is <code>string</code> and  <code>PID2</code>, <code>PID3</code> is <code>integer</code> ?"}],"answers":[{"comments":[{"owner":{"account_id":28208309,"reputation":11,"user_id":21561000,"display_name":"genericcoder"},"score":0,"creation_date":1680616466,"post_id":75925897,"comment_id":133925864,"body_markdown":"hey @Mohammad Reza Khedri, Thank your for answering the question. The jolt spec you provided does not consider the condition part to add new dataType=string field to pid1 if MC value is other.","body":"hey @Mohammad Reza Khedri, Thank your for answering the question. The jolt spec you provided does not consider the condition part to add new dataType=string field to pid1 if MC value is other."},{"owner":{"account_id":11500422,"reputation":2541,"user_id":8428397,"display_name":"Mohammadreza Khedri"},"score":0,"creation_date":1680772497,"post_id":75925897,"comment_id":133955868,"body_markdown":"@genericcoder I asked a question below your question post. please answer it and I&#39;ll fix my answer.","body":"@genericcoder I asked a question below your question post. please answer it and I&#39;ll fix my answer."}],"tags":[],"owner":{"account_id":11500422,"reputation":2541,"user_id":8428397,"display_name":"Mohammadreza Khedri"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680587570,"creation_date":1680587570,"answer_id":75925897,"question_id":75924991,"body_markdown":"You can use following spec:\r\n\r\nIf you want to change your output if `MC` in `OTHER` You can change second `shift` operation as you want.\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;@&quot;: &quot;data[0]&quot;,\r\n      &quot;MC&quot;: {\r\n        &quot;OTHER&quot;: {\r\n          &quot;@3&quot;: &quot;data[1]&quot;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;0&quot;: &quot;&amp;1[&amp;]&quot;,\r\n        &quot;1&quot;: {\r\n          &quot;*&quot;: &quot;&amp;2[&amp;1].&amp;&quot;,\r\n          &quot;mProperty&quot;: {\r\n            &quot;PID1&quot;: {\r\n              &quot;#piid&quot;: &quot;&amp;4[&amp;3].mDefintion.&amp;2[#2].id.value&quot;,\r\n              &quot;@&quot;: &quot;&amp;4[&amp;3].mDefintion.&amp;2[#2].value[0].valueString.value&quot;\r\n            },\r\n            &quot;*&quot;: {\r\n              &quot;$&quot;: &quot;&amp;4[&amp;3].mDefintion.&amp;2[#2].id.value&quot;,\r\n              &quot;@&quot;: &quot;&amp;4[&amp;3].mDefintion.&amp;2[#2].value[0].valueString.value&quot;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: &quot;=lastElement(@0)&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: &quot;&quot;\r\n    }\r\n  }\r\n]\r\n```","title":"Jolt condition spec","body":"<p>You can use following spec:</p>\n<p>If you want to change your output if <code>MC</code> in <code>OTHER</code> You can change second <code>shift</code> operation as you want.</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;@&quot;: &quot;data[0]&quot;,\n      &quot;MC&quot;: {\n        &quot;OTHER&quot;: {\n          &quot;@3&quot;: &quot;data[1]&quot;\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;0&quot;: &quot;&amp;1[&amp;]&quot;,\n        &quot;1&quot;: {\n          &quot;*&quot;: &quot;&amp;2[&amp;1].&amp;&quot;,\n          &quot;mProperty&quot;: {\n            &quot;PID1&quot;: {\n              &quot;#piid&quot;: &quot;&amp;4[&amp;3].mDefintion.&amp;2[#2].id.value&quot;,\n              &quot;@&quot;: &quot;&amp;4[&amp;3].mDefintion.&amp;2[#2].value[0].valueString.value&quot;\n            },\n            &quot;*&quot;: {\n              &quot;$&quot;: &quot;&amp;4[&amp;3].mDefintion.&amp;2[#2].id.value&quot;,\n              &quot;@&quot;: &quot;&amp;4[&amp;3].mDefintion.&amp;2[#2].value[0].valueString.value&quot;\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: &quot;=lastElement(@0)&quot;\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: &quot;&quot;\n    }\n  }\n]\n</code></pre>\n"}],"owner":{"account_id":28208309,"reputation":11,"user_id":21561000,"display_name":"genericcoder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680588423,"creation_date":1680574097,"question_id":75924991,"body_markdown":"I want a conditional transformation where I need to add a property in output if the value of a specific field in input matches my condition. Below is my input and output required.\r\n\r\n**Input:**\r\n\r\n```json\r\n{\r\n  &quot;MC&quot;: &quot;OTHER&quot;,\r\n  &quot;mProperty&quot;: {\r\n    &quot;PID1&quot;: &quot;value1&quot;,\r\n    &quot;PID2&quot;: &quot;value2&quot;,\r\n    &quot;PID3&quot;: &quot;k1&quot;\r\n  }\r\n}\r\n```\r\nCondition - I want to add a new field dataType=string to PID1(or any id), if MC value is OTHER.\r\n\r\n**Expected output (if MC value is OTHER):**\r\n\r\n```json\r\n{\r\n  &quot;mDefintion&quot;: {\r\n    &quot;mProperty&quot;: [\r\n      {\r\n        &quot;id&quot;: {\r\n          &quot;value&quot;: &quot;PID1&quot;\r\n        },\r\n        &quot;value&quot;: [\r\n          {\r\n            &quot;valueString&quot;: {\r\n              &quot;value&quot;: &quot;value1&quot;\r\n            }\r\n          }\r\n        ],\r\n        &quot;datatype&quot;: &quot;string&quot;\r\n      },\r\n      {\r\n        &quot;id&quot;: {\r\n          &quot;value&quot;: &quot;PID2&quot;\r\n        },\r\n        &quot;value&quot;: [\r\n          {\r\n            &quot;valueString&quot;: {\r\n              &quot;value&quot;: &quot;value2&quot;\r\n            }\r\n          }\r\n        ],\r\n        &quot;datatype&quot;: &quot;integer&quot;\r\n      },\r\n      {\r\n        &quot;id&quot;: {\r\n          &quot;value&quot;: &quot;PID3&quot;\r\n        },\r\n        &quot;value&quot;: [\r\n          {\r\n            &quot;valueString&quot;: {\r\n              &quot;value&quot;: &quot;k1&quot;\r\n            }\r\n          }\r\n        ],\r\n        &quot;datatype&quot;: &quot;integer&quot;\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n**Below is the jolt code I am using:**\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: &quot;&amp;&quot;,\r\n      &quot;mProperty&quot;: {\r\n        &quot;PID1&quot;: {\r\n          &quot;#piid&quot;: &quot;mDefintion.mProperty[#2].id.value&quot;,\r\n          &quot;@&quot;: &quot;mDefintion.mProperty[#2].value[0].valueString.value&quot;\r\n        },\r\n        &quot;*&quot;: {\r\n          &quot;$&quot;: &quot;mDefintion.mProperty[#2].id.value&quot;,\r\n          &quot;@&quot;: &quot;mDefintion.mProperty[#2].value[0].valueString.value&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nNo matter how much I try I am unable to get the condition part to work. Below is the output I am getting for the above code - \r\n\r\n```json\r\n{\r\n  &quot;MC&quot;: &quot;OTHER&quot;,\r\n  &quot;mDefintion&quot;: {\r\n    &quot;mProperty&quot;: [\r\n      {\r\n        &quot;id&quot;: {\r\n          &quot;value&quot;: &quot;piid&quot;\r\n        },\r\n        &quot;value&quot;: [\r\n          {\r\n            &quot;valueString&quot;: {\r\n              &quot;value&quot;: &quot;value1&quot;\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        &quot;id&quot;: {\r\n          &quot;value&quot;: &quot;PID2&quot;\r\n        },\r\n        &quot;value&quot;: [\r\n          {\r\n            &quot;valueString&quot;: {\r\n              &quot;value&quot;: &quot;value2&quot;\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        &quot;id&quot;: {\r\n          &quot;value&quot;: &quot;PID3&quot;\r\n        },\r\n        &quot;value&quot;: [\r\n          {\r\n            &quot;valueString&quot;: {\r\n              &quot;value&quot;: &quot;k1&quot;\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n}\r\n```","title":"Jolt condition spec","body":"<p>I want a conditional transformation where I need to add a property in output if the value of a specific field in input matches my condition. Below is my input and output required.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;MC&quot;: &quot;OTHER&quot;,\n  &quot;mProperty&quot;: {\n    &quot;PID1&quot;: &quot;value1&quot;,\n    &quot;PID2&quot;: &quot;value2&quot;,\n    &quot;PID3&quot;: &quot;k1&quot;\n  }\n}\n</code></pre>\n<p>Condition - I want to add a new field dataType=string to PID1(or any id), if MC value is OTHER.</p>\n<p><strong>Expected output (if MC value is OTHER):</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;mDefintion&quot;: {\n    &quot;mProperty&quot;: [\n      {\n        &quot;id&quot;: {\n          &quot;value&quot;: &quot;PID1&quot;\n        },\n        &quot;value&quot;: [\n          {\n            &quot;valueString&quot;: {\n              &quot;value&quot;: &quot;value1&quot;\n            }\n          }\n        ],\n        &quot;datatype&quot;: &quot;string&quot;\n      },\n      {\n        &quot;id&quot;: {\n          &quot;value&quot;: &quot;PID2&quot;\n        },\n        &quot;value&quot;: [\n          {\n            &quot;valueString&quot;: {\n              &quot;value&quot;: &quot;value2&quot;\n            }\n          }\n        ],\n        &quot;datatype&quot;: &quot;integer&quot;\n      },\n      {\n        &quot;id&quot;: {\n          &quot;value&quot;: &quot;PID3&quot;\n        },\n        &quot;value&quot;: [\n          {\n            &quot;valueString&quot;: {\n              &quot;value&quot;: &quot;k1&quot;\n            }\n          }\n        ],\n        &quot;datatype&quot;: &quot;integer&quot;\n      }\n    ]\n  }\n}\n</code></pre>\n<p><strong>Below is the jolt code I am using:</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: &quot;&amp;&quot;,\n      &quot;mProperty&quot;: {\n        &quot;PID1&quot;: {\n          &quot;#piid&quot;: &quot;mDefintion.mProperty[#2].id.value&quot;,\n          &quot;@&quot;: &quot;mDefintion.mProperty[#2].value[0].valueString.value&quot;\n        },\n        &quot;*&quot;: {\n          &quot;$&quot;: &quot;mDefintion.mProperty[#2].id.value&quot;,\n          &quot;@&quot;: &quot;mDefintion.mProperty[#2].value[0].valueString.value&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>No matter how much I try I am unable to get the condition part to work. Below is the output I am getting for the above code -</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;MC&quot;: &quot;OTHER&quot;,\n  &quot;mDefintion&quot;: {\n    &quot;mProperty&quot;: [\n      {\n        &quot;id&quot;: {\n          &quot;value&quot;: &quot;piid&quot;\n        },\n        &quot;value&quot;: [\n          {\n            &quot;valueString&quot;: {\n              &quot;value&quot;: &quot;value1&quot;\n            }\n          }\n        ]\n      },\n      {\n        &quot;id&quot;: {\n          &quot;value&quot;: &quot;PID2&quot;\n        },\n        &quot;value&quot;: [\n          {\n            &quot;valueString&quot;: {\n              &quot;value&quot;: &quot;value2&quot;\n            }\n          }\n        ]\n      },\n      {\n        &quot;id&quot;: {\n          &quot;value&quot;: &quot;PID3&quot;\n        },\n        &quot;value&quot;: [\n          {\n            &quot;valueString&quot;: {\n              &quot;value&quot;: &quot;k1&quot;\n            }\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>\n"},{"tags":["java","code-generation","scaffolding","javapoet"],"answers":[{"tags":[],"owner":{"account_id":27811543,"reputation":1,"user_id":21233839,"display_name":"Yardim Server"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680588276,"creation_date":1680588276,"answer_id":75925966,"question_id":75895547,"body_markdown":"    ParameterSpec parameterOfConst = ParameterSpec.builder(String.class, className)\r\n            .addAnnotation(\r\n                    AnnotationSpec.builder(value)\r\n                            .addMember(&quot;value&quot;, &quot;\\&quot;$${topics.&quot; + className.toLowerCase() + &quot;.command}\\&quot;&quot;)\r\n                            .build())\r\n            .build();\r\nThat is the answer of my question","title":"How can I write Annotation member with using JavaPoet?","body":"<pre><code>ParameterSpec parameterOfConst = ParameterSpec.builder(String.class, className)\n        .addAnnotation(\n                AnnotationSpec.builder(value)\n                        .addMember(&quot;value&quot;, &quot;\\&quot;$${topics.&quot; + className.toLowerCase() + &quot;.command}\\&quot;&quot;)\n                        .build())\n        .build();\n</code></pre>\n<p>That is the answer of my question</p>\n"}],"owner":{"account_id":27811543,"reputation":1,"user_id":21233839,"display_name":"Yardim Server"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1680709499,"accepted_answer_id":75925966,"answer_count":1,"score":-1,"last_activity_date":1680588276,"creation_date":1680244765,"question_id":75895547,"body_markdown":"I want to generate an annotation with its members. The structure of annotation is\r\n\r\n`public className (@Value(&quot;${topics.className.command}&quot;) String className){\r\n}`\r\nBecause of $ sign I take error. Pls help me how can I write this structure?\r\nThe places I wrote as className are variable. This will take from users. \r\n\r\n\r\n```\r\n`ParameterSpec parameterOfConst = ParameterSpec.builder(String.class, className )\r\n                .addAnnotation(\r\n                        AnnotationSpec.builder(value)\r\n                                .addMember(&quot;{$topics.&quot; +&quot;&quot;, &quot;$S&quot;, className.toLowerCase() + &quot;.command}&quot;)\r\n                                .build())`\r\n```","title":"How can I write Annotation member with using JavaPoet?","body":"<p>I want to generate an annotation with its members. The structure of annotation is</p>\n<p><code>public className (@Value(&quot;${topics.className.command}&quot;) String className){ }</code>\nBecause of $ sign I take error. Pls help me how can I write this structure?\nThe places I wrote as className are variable. This will take from users.</p>\n<pre><code>`ParameterSpec parameterOfConst = ParameterSpec.builder(String.class, className )\n                .addAnnotation(\n                        AnnotationSpec.builder(value)\n                                .addMember(&quot;{$topics.&quot; +&quot;&quot;, &quot;$S&quot;, className.toLowerCase() + &quot;.command}&quot;)\n                                .build())`\n</code></pre>\n"},{"tags":["java","spring","spring-boot","concurrency","apache-camel"],"comments":[{"owner":{"account_id":11099552,"reputation":1649,"user_id":8148637,"display_name":"KnockingHeads"},"score":0,"creation_date":1680589993,"post_id":75925925,"comment_id":133919366,"body_markdown":"Seems a classic case of producer consumer problem.  See this for reference:\nhttps://stackoverflow.com/questions/9388838/writing-a-program-with-2-threads-which-prints-alternatively/70694332#70694332","body":"Seems a classic case of producer consumer problem.  See this for reference: <a href=\"https://stackoverflow.com/questions/9388838/writing-a-program-with-2-threads-which-prints-alternatively/70694332#70694332\" title=\"writing a program with 2 threads which prints alternatively\">stackoverflow.com/questions/9388838/&hellip;</a>"},{"owner":{"account_id":7204069,"reputation":25,"user_id":5500320,"display_name":"madStudent"},"score":0,"creation_date":1680615534,"post_id":75925925,"comment_id":133925587,"body_markdown":"Maybe I do not understand it, but this has nothing to do with threads within one app. I would say there has to be some camel configuration to achieve this and I am missing it.","body":"Maybe I do not understand it, but this has nothing to do with threads within one app. I would say there has to be some camel configuration to achieve this and I am missing it."},{"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"score":0,"creation_date":1680628038,"post_id":75925925,"comment_id":133929062,"body_markdown":"See Camel in Action 2nd edition book. It has a chapter on clustering, and this use-case is discussed there, in chapter 12.5.3.","body":"See Camel in Action 2nd edition book. It has a chapter on clustering, and this use-case is discussed there, in chapter 12.5.3."},{"owner":{"account_id":7204069,"reputation":25,"user_id":5500320,"display_name":"madStudent"},"score":0,"creation_date":1681199824,"post_id":75925925,"comment_id":134013724,"body_markdown":"Thanks! I will have a look.","body":"Thanks! I will have a look."},{"owner":{"account_id":7204069,"reputation":25,"user_id":5500320,"display_name":"madStudent"},"score":0,"creation_date":1681272225,"post_id":75925925,"comment_id":134027940,"body_markdown":"So I read that using hazelcast repo would be an optimal solution, so my question is. Would this work also for sftp? And would not I achieve something similar using JdbcMessageIdRepository, since both services use the same db?","body":"So I read that using hazelcast repo would be an optimal solution, so my question is. Would this work also for sftp? And would not I achieve something similar using JdbcMessageIdRepository, since both services use the same db?"}],"owner":{"account_id":7204069,"reputation":25,"user_id":5500320,"display_name":"madStudent"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680587820,"creation_date":1680587820,"question_id":75925925,"body_markdown":"as said in the title, I have two services and each of them have a camel route inside that downloads files from sftp and processes them according to cron expression(they run at the same time). Problem is that despite of having idempotentConsumer in place, services seems to both take the same file and in logs I can see for example &quot;No such file exception&quot; when one instance was about to move or delete the file. I saw that there are options in camel to lets say lock the file but most of them work only for &quot;file&quot; component and not for sftp. Is there a way to assure that only one instance would processes the file without any errors or warnings? This is my configuration.\r\n\r\n    @Bean\r\n    public IdempotentRepository idempotentRepo(final DataSource dataSource) {\r\n        JdbcMessageIdRepository idRepository = new JdbcMessageIdRepository(dataSource, PROCESSOR_RESPONSE);\r\n        idRepository.setTableName(&quot;SCHEMA.CAMEL_MESSAGEPROCESSED&quot;);\r\n        return idRepository;\r\n    }\r\n\r\nAnd this is the route.\r\n\r\n    @Override\r\n    public void configure() {\r\n        from(&quot;sftp?preferredAuthentications=password&amp;password=${password}&amp;scheduler=quartz&amp;scheduler.cron=${cron}&amp;useUserKnownHostsFile=false&amp;delete=true&amp;shuffle=true&quot;)\r\n                .transacted()\r\n                .idempotentConsumer(header(&quot;camelFileAbsolutePath&quot;),\r\n                        idempotentRepository)\r\n                .eager(true)\r\n                .routeId(RouteDownloadResponses.class.getSimpleName())\r\n                .convertBodyTo(byte[].class)\r\n                .andSoOn();\r\n    }\r\n\r\nI saw a lot of posts how to set this up either in route option or using this consumer, but I did not find any solution that would work. Any help would be very appreciated. Thanks!","title":"Concurrency of two services that fetch files from one sftp via camel","body":"<p>as said in the title, I have two services and each of them have a camel route inside that downloads files from sftp and processes them according to cron expression(they run at the same time). Problem is that despite of having idempotentConsumer in place, services seems to both take the same file and in logs I can see for example &quot;No such file exception&quot; when one instance was about to move or delete the file. I saw that there are options in camel to lets say lock the file but most of them work only for &quot;file&quot; component and not for sftp. Is there a way to assure that only one instance would processes the file without any errors or warnings? This is my configuration.</p>\n<pre><code>@Bean\npublic IdempotentRepository idempotentRepo(final DataSource dataSource) {\n    JdbcMessageIdRepository idRepository = new JdbcMessageIdRepository(dataSource, PROCESSOR_RESPONSE);\n    idRepository.setTableName(&quot;SCHEMA.CAMEL_MESSAGEPROCESSED&quot;);\n    return idRepository;\n}\n</code></pre>\n<p>And this is the route.</p>\n<pre><code>@Override\npublic void configure() {\n    from(&quot;sftp?preferredAuthentications=password&amp;password=${password}&amp;scheduler=quartz&amp;scheduler.cron=${cron}&amp;useUserKnownHostsFile=false&amp;delete=true&amp;shuffle=true&quot;)\n            .transacted()\n            .idempotentConsumer(header(&quot;camelFileAbsolutePath&quot;),\n                    idempotentRepository)\n            .eager(true)\n            .routeId(RouteDownloadResponses.class.getSimpleName())\n            .convertBodyTo(byte[].class)\n            .andSoOn();\n}\n</code></pre>\n<p>I saw a lot of posts how to set this up either in route option or using this consumer, but I did not find any solution that would work. Any help would be very appreciated. Thanks!</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3567986,"reputation":392,"user_id":2979045,"display_name":"fshdn19"},"score":0,"creation_date":1680588481,"post_id":75925870,"comment_id":133919135,"body_markdown":"getSupportFragmentManager().getFragments().get(getSupportFragmentManager().getBackStackEntryCount() -&gt; this should be `entryCount - 1`","body":"getSupportFragmentManager().getFragments().get(getSupportFra&zwnj;&#8203;gmentManager().getBa&zwnj;&#8203;ckStackEntryCount() -&gt; this should be <code>entryCount - 1</code>"}],"owner":{"account_id":26260429,"reputation":195,"user_id":19931837,"display_name":"Manisha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680587250,"creation_date":1680587250,"question_id":75925870,"body_markdown":"I have simple code like this in my android application&#39;s main activity.\r\n\r\n    @SuppressLint(&quot;SourceLockedOrientationActivity&quot;)\r\n        @Override\r\n        public void onBackPressed() {\r\n            if (drawer.isDrawerOpen(GravityCompat.START)) {\r\n                drawer.closeDrawer(GravityCompat.START);\r\n            } else {\r\n                if (doubleBackToExitPressedOnce) {\r\n                    super.onBackPressed();\r\n                }\r\n                if (getSupportFragmentManager().getBackStackEntryCount() != 0) {\r\n                    String title;\r\n                    if(!(getSupportFragmentManager().getFragments().get(getSupportFragmentManager().getBackStackEntryCount()) instanceof SupportRequestManagerFragment)) {\r\n                        title = getSupportFragmentManager().getFragments().get(getSupportFragmentManager().getBackStackEntryCount()).getTag();\r\n                    } else {\r\n                        title = getSupportFragmentManager().getFragments().get(getSupportFragmentManager().getBackStackEntryCount()-1).getTag();\r\n                    }\r\n                    if (title != null) {\r\n                        toolbar.setTitle(title);\r\n                        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n                        getWindow().clearFlags(1024);\r\n    \r\n                    }\r\n                    super.onBackPressed();\r\n                } else {\r\n                    this.doubleBackToExitPressedOnce = true;\r\n                    Toast.makeText(this, getResources().getString(R.string.Please_click_BACK_again_to_exit), Toast.LENGTH_SHORT).show();\r\n    \r\n                    new Handler().postDelayed(() -&gt; doubleBackToExitPressedOnce = false, 2000);\r\n                }\r\n            }\r\n        }\r\n\r\nNormally when I run or test app, I am not getting any error but in Google console, I am getting error logged like this\r\n\r\n    com.example.appname.activity.MainActivity.onBackPressed\r\n    java.lang.IndexOutOfBoundsException\r\n\r\nand full details is like this\r\n\r\n    Exception java.lang.IndexOutOfBoundsException: Index: 2, Size: 2\r\n      at java.util.ArrayList.get (ArrayList.java:437)\r\n      at com.example.appname.activity.MainActivity.onBackPressed (MainActivity.java)\r\n      at android.app.Activity.onKeyUp (Activity.java:3707)\r\n      at android.view.KeyEvent.dispatch (KeyEvent.java:2860)\r\n      at android.app.Activity.dispatchKeyEvent (Activity.java:4024)\r\n      at androidx.core.app.ComponentActivity.superDispatchKeyEvent (ComponentActivity.java)\r\n      at androidx.core.view.KeyEventDispatcher.dispatchKeyEvent (KeyEventDispatcher.java)\r\n      at androidx.core.app.ComponentActivity.dispatchKeyEvent (ComponentActivity.java)\r\n      at androidx.appcompat.app.AppCompatActivity.dispatchKeyEvent (AppCompatActivity.java)\r\n      at androidx.appcompat.view.WindowCallbackWrapper.dispatchKeyEvent (WindowCallbackWrapper.java)\r\n      at androidx.appcompat.app.AppCompatDelegateImpl$AppCompatWindowCallback.dispatchKeyEvent (AppCompatDelegateImpl.java)\r\n      at com.android.internal.policy.DecorView.dispatchKeyEvent (DecorView.java:389)\r\n      at android.view.ViewRootImpl$ViewPostImeInputStage.processKeyEvent (ViewRootImpl.java:5563)\r\n      at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess (ViewRootImpl.java:5431)\r\n      at android.view.ViewRootImpl$InputStage.deliver (ViewRootImpl.java:4936)\r\n      at android.view.ViewRootImpl$InputStage.onDeliverToNext (ViewRootImpl.java:4989)\r\n      at android.view.ViewRootImpl$InputStage.forward (ViewRootImpl.java:4955)\r\n      at android.view.ViewRootImpl$AsyncInputStage.forward (ViewRootImpl.java:5095)\r\n      at android.view.ViewRootImpl$InputStage.apply (ViewRootImpl.java:4963)\r\n      at android.view.ViewRootImpl$AsyncInputStage.apply (ViewRootImpl.java:5152)\r\n      at android.view.ViewRootImpl$InputStage.deliver (ViewRootImpl.java:4936)\r\n      at android.view.ViewRootImpl$InputStage.onDeliverToNext (ViewRootImpl.java:4989)\r\n      at android.view.ViewRootImpl$InputStage.forward (ViewRootImpl.java:4955)\r\n      at android.view.ViewRootImpl$InputStage.apply (ViewRootImpl.java:4963)\r\n      at android.view.ViewRootImpl$InputStage.deliver (ViewRootImpl.java:4936)\r\n      at android.view.ViewRootImpl$InputStage.onDeliverToNext (ViewRootImpl.java:4989)\r\n      at android.view.ViewRootImpl$InputStage.forward (ViewRootImpl.java:4955)\r\n      at android.view.ViewRootImpl$AsyncInputStage.forward (ViewRootImpl.java:5128)\r\n      at android.view.ViewRootImpl$ImeInputStage.onFinishedInputEvent (ViewRootImpl.java:5291)\r\n      at android.view.inputmethod.InputMethodManager$PendingEvent.run (InputMethodManager.java:3069)\r\n      at android.view.inputmethod.InputMethodManager.invokeFinishedInputEventCallback (InputMethodManager.java:2612)\r\n      at android.view.inputmethod.InputMethodManager.finishedInputEvent (InputMethodManager.java:2603)\r\n      at android.view.inputmethod.InputMethodManager$ImeInputEventSender.onInputEventFinished (InputMethodManager.java:3046)\r\n      at android.view.InputEventSender.dispatchInputEventFinished (InputEventSender.java:143)\r\n      at android.os.MessageQueue.nativePollOnce\r\n      at android.os.MessageQueue.next (MessageQueue.java:336)\r\n      at android.os.Looper.loop (Looper.java:181)\r\n      at android.app.ActivityThread.main (ActivityThread.java:7590)\r\n      at java.lang.reflect.Method.invoke\r\n      at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:539)\r\n      at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:950)\r\n\r\nI am not getting idea whats wrong with my code. Let me know if any expert here can get the clue for the same.\r\n\r\nThanks","title":"IndexOutOfBoundsException on onBackPressed","body":"<p>I have simple code like this in my android application's main activity.</p>\n<pre><code>@SuppressLint(&quot;SourceLockedOrientationActivity&quot;)\n    @Override\n    public void onBackPressed() {\n        if (drawer.isDrawerOpen(GravityCompat.START)) {\n            drawer.closeDrawer(GravityCompat.START);\n        } else {\n            if (doubleBackToExitPressedOnce) {\n                super.onBackPressed();\n            }\n            if (getSupportFragmentManager().getBackStackEntryCount() != 0) {\n                String title;\n                if(!(getSupportFragmentManager().getFragments().get(getSupportFragmentManager().getBackStackEntryCount()) instanceof SupportRequestManagerFragment)) {\n                    title = getSupportFragmentManager().getFragments().get(getSupportFragmentManager().getBackStackEntryCount()).getTag();\n                } else {\n                    title = getSupportFragmentManager().getFragments().get(getSupportFragmentManager().getBackStackEntryCount()-1).getTag();\n                }\n                if (title != null) {\n                    toolbar.setTitle(title);\n                    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n                    getWindow().clearFlags(1024);\n\n                }\n                super.onBackPressed();\n            } else {\n                this.doubleBackToExitPressedOnce = true;\n                Toast.makeText(this, getResources().getString(R.string.Please_click_BACK_again_to_exit), Toast.LENGTH_SHORT).show();\n\n                new Handler().postDelayed(() -&gt; doubleBackToExitPressedOnce = false, 2000);\n            }\n        }\n    }\n</code></pre>\n<p>Normally when I run or test app, I am not getting any error but in Google console, I am getting error logged like this</p>\n<pre><code>com.example.appname.activity.MainActivity.onBackPressed\njava.lang.IndexOutOfBoundsException\n</code></pre>\n<p>and full details is like this</p>\n<pre><code>Exception java.lang.IndexOutOfBoundsException: Index: 2, Size: 2\n  at java.util.ArrayList.get (ArrayList.java:437)\n  at com.example.appname.activity.MainActivity.onBackPressed (MainActivity.java)\n  at android.app.Activity.onKeyUp (Activity.java:3707)\n  at android.view.KeyEvent.dispatch (KeyEvent.java:2860)\n  at android.app.Activity.dispatchKeyEvent (Activity.java:4024)\n  at androidx.core.app.ComponentActivity.superDispatchKeyEvent (ComponentActivity.java)\n  at androidx.core.view.KeyEventDispatcher.dispatchKeyEvent (KeyEventDispatcher.java)\n  at androidx.core.app.ComponentActivity.dispatchKeyEvent (ComponentActivity.java)\n  at androidx.appcompat.app.AppCompatActivity.dispatchKeyEvent (AppCompatActivity.java)\n  at androidx.appcompat.view.WindowCallbackWrapper.dispatchKeyEvent (WindowCallbackWrapper.java)\n  at androidx.appcompat.app.AppCompatDelegateImpl$AppCompatWindowCallback.dispatchKeyEvent (AppCompatDelegateImpl.java)\n  at com.android.internal.policy.DecorView.dispatchKeyEvent (DecorView.java:389)\n  at android.view.ViewRootImpl$ViewPostImeInputStage.processKeyEvent (ViewRootImpl.java:5563)\n  at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess (ViewRootImpl.java:5431)\n  at android.view.ViewRootImpl$InputStage.deliver (ViewRootImpl.java:4936)\n  at android.view.ViewRootImpl$InputStage.onDeliverToNext (ViewRootImpl.java:4989)\n  at android.view.ViewRootImpl$InputStage.forward (ViewRootImpl.java:4955)\n  at android.view.ViewRootImpl$AsyncInputStage.forward (ViewRootImpl.java:5095)\n  at android.view.ViewRootImpl$InputStage.apply (ViewRootImpl.java:4963)\n  at android.view.ViewRootImpl$AsyncInputStage.apply (ViewRootImpl.java:5152)\n  at android.view.ViewRootImpl$InputStage.deliver (ViewRootImpl.java:4936)\n  at android.view.ViewRootImpl$InputStage.onDeliverToNext (ViewRootImpl.java:4989)\n  at android.view.ViewRootImpl$InputStage.forward (ViewRootImpl.java:4955)\n  at android.view.ViewRootImpl$InputStage.apply (ViewRootImpl.java:4963)\n  at android.view.ViewRootImpl$InputStage.deliver (ViewRootImpl.java:4936)\n  at android.view.ViewRootImpl$InputStage.onDeliverToNext (ViewRootImpl.java:4989)\n  at android.view.ViewRootImpl$InputStage.forward (ViewRootImpl.java:4955)\n  at android.view.ViewRootImpl$AsyncInputStage.forward (ViewRootImpl.java:5128)\n  at android.view.ViewRootImpl$ImeInputStage.onFinishedInputEvent (ViewRootImpl.java:5291)\n  at android.view.inputmethod.InputMethodManager$PendingEvent.run (InputMethodManager.java:3069)\n  at android.view.inputmethod.InputMethodManager.invokeFinishedInputEventCallback (InputMethodManager.java:2612)\n  at android.view.inputmethod.InputMethodManager.finishedInputEvent (InputMethodManager.java:2603)\n  at android.view.inputmethod.InputMethodManager$ImeInputEventSender.onInputEventFinished (InputMethodManager.java:3046)\n  at android.view.InputEventSender.dispatchInputEventFinished (InputEventSender.java:143)\n  at android.os.MessageQueue.nativePollOnce\n  at android.os.MessageQueue.next (MessageQueue.java:336)\n  at android.os.Looper.loop (Looper.java:181)\n  at android.app.ActivityThread.main (ActivityThread.java:7590)\n  at java.lang.reflect.Method.invoke\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:539)\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:950)\n</code></pre>\n<p>I am not getting idea whats wrong with my code. Let me know if any expert here can get the clue for the same.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1680543519,"post_id":75922213,"comment_id":133912967,"body_markdown":"Nothing is the startup logs about problems exposing the second controller? What are the packages of both controllers and the @SpringbootApplication class?","body":"Nothing is the startup logs about problems exposing the second controller? What are the packages of both controllers and the @SpringbootApplication class?"},{"owner":{"account_id":21481623,"reputation":1446,"user_id":15828895,"display_name":"plutownium"},"score":0,"creation_date":1680543692,"post_id":75922213,"comment_id":133913011,"body_markdown":"Boom. You got it. Thank you. Updating OP with the source of the problem and solution","body":"Boom. You got it. Thank you. Updating OP with the source of the problem and solution"}],"owner":{"account_id":21481623,"reputation":1446,"user_id":15828895,"display_name":"plutownium"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680586567,"creation_date":1680543037,"question_id":75922213,"body_markdown":"Here is a controller that works\r\n```\r\n@RestController\r\n@RequestMapping(path = &quot;api/v1/students&quot;)\r\npublic class StudentController {\r\n    @GetMapping(value = &quot;/health2&quot;)\r\n    public String Health2() {\r\n        return &quot;Online!##@@@@&quot;; // works!\r\n    }\r\n\r\n}\r\n```\r\n\r\nNow here is a controller that doesn&#39;t work\r\n```\r\n\r\n@RestController\r\n@RequestMapping(path = &quot;/api/v1/ws&quot;)\r\npublic class RecordingController {\r\n\r\n  @GetMapping(value = &quot;/health&quot;)\r\n  public String foo() {\r\n      return &quot;Running&quot;;\r\n  }\r\n}\r\n```\r\n\r\n`GET http://localhost:8080/api/v1/students/health2` &lt;= &quot;Online!##@@@@&quot;\r\n\r\n`GET http://localhost:8080/api/v1/ws/health` gives\r\n\r\n```\r\n{\r\n    &quot;timestamp&quot;: &quot;2023-04-03T17:26:01.369+00:00&quot;,\r\n    &quot;status&quot;: 404,\r\n    &quot;error&quot;: &quot;Not Found&quot;,\r\n    &quot;message&quot;: &quot;No message available&quot;,\r\n    &quot;path&quot;: &quot;/api/v1/ws/health&quot;\r\n}\r\n```\r\n\r\nHow do I fix it please? My imports all work\r\n\r\nMy expectation is that copying the same forms into another controller will work identically to the previous one\r\n\r\nMy actual result is that the second controller fails but I dont know why\r\n\r\nI tried it also as `@RequestMapping(path = &quot;api/v1/ws&quot;)` but it still fails\r\n\r\nI have restarted my server.\r\n\r\nEdit: Solution\r\n```\r\n// package com.example.messagingstompwebsocket; // remove this\r\npackage hotjar.demo.student; // add this\r\n```","title":"My Spring Boot contoller health check fails even though its the same as the other one","body":"<p>Here is a controller that works</p>\n<pre><code>@RestController\n@RequestMapping(path = &quot;api/v1/students&quot;)\npublic class StudentController {\n    @GetMapping(value = &quot;/health2&quot;)\n    public String Health2() {\n        return &quot;Online!##@@@@&quot;; // works!\n    }\n\n}\n</code></pre>\n<p>Now here is a controller that doesn't work</p>\n<pre><code>\n@RestController\n@RequestMapping(path = &quot;/api/v1/ws&quot;)\npublic class RecordingController {\n\n  @GetMapping(value = &quot;/health&quot;)\n  public String foo() {\n      return &quot;Running&quot;;\n  }\n}\n</code></pre>\n<p><code>GET http://localhost:8080/api/v1/students/health2</code> &lt;= &quot;Online!##@@@@&quot;</p>\n<p><code>GET http://localhost:8080/api/v1/ws/health</code> gives</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-04-03T17:26:01.369+00:00&quot;,\n    &quot;status&quot;: 404,\n    &quot;error&quot;: &quot;Not Found&quot;,\n    &quot;message&quot;: &quot;No message available&quot;,\n    &quot;path&quot;: &quot;/api/v1/ws/health&quot;\n}\n</code></pre>\n<p>How do I fix it please? My imports all work</p>\n<p>My expectation is that copying the same forms into another controller will work identically to the previous one</p>\n<p>My actual result is that the second controller fails but I dont know why</p>\n<p>I tried it also as <code>@RequestMapping(path = &quot;api/v1/ws&quot;)</code> but it still fails</p>\n<p>I have restarted my server.</p>\n<p>Edit: Solution</p>\n<pre><code>// package com.example.messagingstompwebsocket; // remove this\npackage hotjar.demo.student; // add this\n</code></pre>\n"},{"tags":["java","html","xml","string"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684634497,"post_id":75925276,"comment_id":134545262,"body_markdown":"You are using a `CDATA` marked section.  This will cause any characters within it to be parsed as literal characters, and not to be interpreted by the markup parser.","body":"You are using a <code>CDATA</code> marked section.  This will cause any characters within it to be parsed as literal characters, and not to be interpreted by the markup parser."}],"owner":{"account_id":28192436,"reputation":1,"user_id":21547619,"display_name":"Abjal Hossen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680585342,"creation_date":1680578540,"question_id":75925276,"body_markdown":"I try to write some html code in string, but html not working with style. see the screenshot\r\n\r\n[android studio](https://i.stack.imgur.com/ztwZ5.png)","title":"Html code not working with style in String Android Studio","body":"<p>I try to write some html code in string, but html not working with style. see the screenshot</p>\n<p><a href=\"https://i.stack.imgur.com/ztwZ5.png\" rel=\"nofollow noreferrer\">android studio</a></p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":17067635,"reputation":517,"user_id":12349305,"display_name":"Ballo Ibrahima"},"score":0,"creation_date":1680565466,"post_id":75922734,"comment_id":133916802,"body_markdown":"You must remove static  on testrepository declaration","body":"You must remove static  on testrepository declaration"}],"answers":[{"tags":[],"owner":{"account_id":7358121,"reputation":4925,"user_id":5602214,"display_name":"Prashant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680548203,"creation_date":1680548203,"answer_id":75922880,"question_id":75922734,"body_markdown":"you cannot use `@Autowired` to inject dependencies into static fields in Spring Boot.","title":"JPA Repository @Autowired doesn&#39;t work and returns NullPointerException","body":"<p>you cannot use <code>@Autowired</code> to inject dependencies into static fields in Spring Boot.</p>\n"}],"owner":{"account_id":22063129,"reputation":3,"user_id":16325428,"display_name":"Andr&#233; Ribeiro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75922880,"answer_count":1,"score":0,"last_activity_date":1680585173,"creation_date":1680547068,"question_id":75922734,"body_markdown":"I have a simple model and repository that i want to test the &quot;save&quot; method:\r\n\r\n\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@RequiredArgsConstructor\r\n@Entity\r\n@Table(name = &quot;TEST&quot;)\r\npublic class TestModel {\r\n\r\n    @Id\r\n    @NonNull\r\n    @Basic(optional = false)\r\n    @Column(name = &quot;id&quot;)\r\n    private String id;\r\n\r\n    @NonNull\r\n    @Basic(optional = false)\r\n    @Column(name = &quot;testValue&quot;)\r\n    private String testValue;\r\n\r\n}\r\n\r\n@Repository\r\npublic interface TestRepository extends JpaRepository&lt;TestModel, String&gt; {\r\n\r\n}\r\n```\r\n\r\n...and on the main class:\r\n\r\n\r\n```\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\t@Autowired private static TestRepository testRepository;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\r\n\t\tTestModel testModel = new TestModel(&quot;1&quot;, &quot;randomValue&quot;);\r\n\r\n\t\ttestRepository.save(testModel);\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nWhen i try to use the repository to save a simple object, it gaves me NullPointerException pointing to the autowired repository.\r\n\r\nI&#39;ve used so many annotations like ComponentScan (pointing to the repository package), EntityScan (pointing to the entity package) EnabledAutoConfiguration but no one of them works for me.\r\n\r\nI&#39;m using Spring Boot 2.7.10, Spring Data JPA and Spring Web as dependencies in pom.xml.\r\n\r\nSomeone knows what it should be? Thanks!\r\n","title":"JPA Repository @Autowired doesn&#39;t work and returns NullPointerException","body":"<p>I have a simple model and repository that i want to test the &quot;save&quot; method:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@RequiredArgsConstructor\n@Entity\n@Table(name = &quot;TEST&quot;)\npublic class TestModel {\n\n    @Id\n    @NonNull\n    @Basic(optional = false)\n    @Column(name = &quot;id&quot;)\n    private String id;\n\n    @NonNull\n    @Basic(optional = false)\n    @Column(name = &quot;testValue&quot;)\n    private String testValue;\n\n}\n\n@Repository\npublic interface TestRepository extends JpaRepository&lt;TestModel, String&gt; {\n\n}\n</code></pre>\n<p>...and on the main class:</p>\n<pre><code>@SpringBootApplication\npublic class DemoApplication {\n\n    @Autowired private static TestRepository testRepository;\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n\n        TestModel testModel = new TestModel(&quot;1&quot;, &quot;randomValue&quot;);\n\n        testRepository.save(testModel);\n\n    }\n\n}\n</code></pre>\n<p>When i try to use the repository to save a simple object, it gaves me NullPointerException pointing to the autowired repository.</p>\n<p>I've used so many annotations like ComponentScan (pointing to the repository package), EntityScan (pointing to the entity package) EnabledAutoConfiguration but no one of them works for me.</p>\n<p>I'm using Spring Boot 2.7.10, Spring Data JPA and Spring Web as dependencies in pom.xml.</p>\n<p>Someone knows what it should be? Thanks!</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa","repository"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1680528257,"post_id":75919821,"comment_id":133908830,"body_markdown":"Not sure if it&#39;s a typo, but your example here is missing `@Embeddable` on `UserRefId`.","body":"Not sure if it&#39;s a typo, but your example here is missing <code>@Embeddable</code> on <code>UserRefId</code>."},{"owner":{"account_id":8989910,"reputation":11,"user_id":6702196,"display_name":"DoGoodToEveryone"},"score":1,"creation_date":1680528611,"post_id":75919821,"comment_id":133908934,"body_markdown":"its a typo ,@Embeddable  is there","body":"its a typo ,@Embeddable  is there"},{"owner":{"account_id":8989910,"reputation":11,"user_id":6702196,"display_name":"DoGoodToEveryone"},"score":0,"creation_date":1680529328,"post_id":75919821,"comment_id":133909129,"body_markdown":"sorry but got the error ,its throwing error because of return type .It is resolved now .","body":"sorry but got the error ,its throwing error because of return type .It is resolved now ."}],"owner":{"account_id":8989910,"reputation":11,"user_id":6702196,"display_name":"DoGoodToEveryone"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680585040,"creation_date":1680527262,"question_id":75919821,"body_markdown":"I am trying to create a Repository by having @embeddable and Embedded ID .\r\n```@Embeddable \r\npublic class UserRef {  \r\n\r\n  @EmbeddedId\r\n  private UserRefId id;  \r\n}\r\n```\r\n and\r\n```@Embeddable\r\npublic class UserRefId implements Serializable {\r\n\r\n  @NotNull\r\n  @Column(name = &quot;USER_TYPE_CD&quot;)\r\n  private String userTypeCd; \r\n\r\n  @NotNull\r\n  @Column(name = &quot;USER_INTERNAL_CD&quot;)\r\n  private String userInternalCd; \r\n}\r\n```\r\nWhen I am trying to run my application class its throwing:\r\n```\r\n nested exception is java.lang.IllegalArgumentException : Failed to create query for method public abstract repository.UserRefRepository.findById(java.lang.String) !  No property &#39;empty&#39; found for type &#39;UserRef&#39;\r\n```\r\nThis is my repository interface:\r\n```\r\n@Repository\r\npublic interface UserRefRepository extends JpaRepository &lt;UserRef, UserRefId&gt; { \r\n  public Map&lt;String, Map&lt;String, String&gt;&gt;  findById (String refTypeCd); \r\n}\r\n```\r\nI tried changing camelCase too but its not working at all, what am I doing wrong?","title":"Why Spring JPA is not able to create repository and throwing No property &#39;empty&#39; found for type &#39;UserRef","body":"<p>I am trying to create a Repository by having @embeddable and Embedded ID .</p>\n<pre><code>public class UserRef {  \n\n  @EmbeddedId\n  private UserRefId id;  \n}\n</code></pre>\n<p>and</p>\n<pre><code>public class UserRefId implements Serializable {\n\n  @NotNull\n  @Column(name = &quot;USER_TYPE_CD&quot;)\n  private String userTypeCd; \n\n  @NotNull\n  @Column(name = &quot;USER_INTERNAL_CD&quot;)\n  private String userInternalCd; \n}\n</code></pre>\n<p>When I am trying to run my application class its throwing:</p>\n<pre><code> nested exception is java.lang.IllegalArgumentException : Failed to create query for method public abstract repository.UserRefRepository.findById(java.lang.String) !  No property 'empty' found for type 'UserRef'\n</code></pre>\n<p>This is my repository interface:</p>\n<pre><code>@Repository\npublic interface UserRefRepository extends JpaRepository &lt;UserRef, UserRefId&gt; { \n  public Map&lt;String, Map&lt;String, String&gt;&gt;  findById (String refTypeCd); \n}\n</code></pre>\n<p>I tried changing camelCase too but its not working at all, what am I doing wrong?</p>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":2,"creation_date":1680331154,"post_id":75904626,"comment_id":133883681,"body_markdown":"You&#39;re duplicating the `email` variable, so that code shouldn&#39;t even compile.","body":"You&#39;re duplicating the <code>email</code> variable, so that code shouldn&#39;t even compile."}],"owner":{"account_id":22980869,"reputation":33,"user_id":17107814,"display_name":"do hai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680584140,"creation_date":1680330812,"question_id":75904626,"body_markdown":"I have some problems when trying to use @HttpSession in Spring MVC Controller. I want to cut the first letter of an email from login page to home page with session. To avoid session being null when loading first home page when loaded I used if condition but it gives this error:\r\nError creating bean with name &#39;HomeController&#39;: Lookup method resolution failed\r\n\r\n```\r\n@Controller\r\n@RequestMapping(&quot;/&quot;)\r\npublic class HomeController {\r\n    @GetMapping\r\n    @Transactional\r\n    public String Default(@SessionAttribute(&quot;email&quot;) String email,ModelMap modelMap,HttpSession httpSession) {\r\n        if(httpSession.getAttribute(&quot;email&quot;) != null) {\r\n            String email =(String) httpSession.getAttribute(&quot;email&quot;);\r\n            String chacracter = email.substring(0, 1);\r\n            modelMap.addAttribute(&quot;chacracter &quot;, chacracter );\r\n        }\r\n        return &quot;home&quot;;\r\n    }\r\n}\r\n```","title":"HTTP Status 500 - Internal Server Error:Error creating bean with name &#39;HomeController&#39;: Lookup method resolution failed","body":"<p>I have some problems when trying to use @HttpSession in Spring MVC Controller. I want to cut the first letter of an email from login page to home page with session. To avoid session being null when loading first home page when loaded I used if condition but it gives this error:\nError creating bean with name 'HomeController': Lookup method resolution failed</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/&quot;)\npublic class HomeController {\n    @GetMapping\n    @Transactional\n    public String Default(@SessionAttribute(&quot;email&quot;) String email,ModelMap modelMap,HttpSession httpSession) {\n        if(httpSession.getAttribute(&quot;email&quot;) != null) {\n            String email =(String) httpSession.getAttribute(&quot;email&quot;);\n            String chacracter = email.substring(0, 1);\n            modelMap.addAttribute(&quot;chacracter &quot;, chacracter );\n        }\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":15643188,"reputation":2847,"user_id":11286032,"display_name":"Marcelo Paco"},"score":0,"creation_date":1680581454,"post_id":75925447,"comment_id":133918272,"body_markdown":"Please checkout [editing help](https://stackoverflow.com/editing-help) and [ask]","body":"Please checkout <a href=\"https://stackoverflow.com/editing-help\">editing help</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}],"answers":[{"comments":[{"owner":{"account_id":26349910,"reputation":1,"user_id":20007688,"display_name":"David "},"score":0,"creation_date":1680583901,"post_id":75925589,"comment_id":133918544,"body_markdown":"Thankyou , then n=1234, reverse =5*10+4=54 ;at n=123, reverse=54*10+3=543.....thanks","body":"Thankyou , then n=1234, reverse =5*10+4=54 ;at n=123, reverse=54*10+3=543.....thanks"},{"owner":{"account_id":27808716,"reputation":122,"user_id":21231507,"display_name":"Bhavyesh Patel"},"score":0,"creation_date":1680585445,"post_id":75925589,"comment_id":133918727,"body_markdown":"consider to upvoting the answer if answer is satisfied. Happy to help.","body":"consider to upvoting the answer if answer is satisfied. Happy to help."}],"tags":[],"owner":{"account_id":27808716,"reputation":122,"user_id":21231507,"display_name":"Bhavyesh Patel"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680583529,"creation_date":1680583529,"answer_id":75925589,"question_id":75925447,"body_markdown":"First of all you need every last element of that number so for that logic is below.\r\n\r\n    public class reverseNumber {\r\n        public static void main(String[] args) {\r\n    \r\n             System.out.print(&quot;Enter a number :&quot;);\r\n             Scanner sc = new Scanner(System.in);\r\n             int number = sc.nextInt();\r\n    \r\n             int reverse = 0;\r\n    \r\n            while (number != 0) {\r\n                int remainder = number % 10;\r\n                reverse = reverse * 10 + remainder;\r\n                number = number / 10;\r\n            }\r\n    \r\n            System.out.println(&quot;The reverse of the given number is: &quot; + reverse);\r\n        }\r\n    }\r\n\r\n\r\n&gt; &lt;h1&gt;&lt;b&gt;Logic Explanation&lt;/b&gt;&lt;/h1&gt;\r\n\r\n **1**. Loop runs until `reverse` variable will not 0.\r\n\r\n\r\n\r\n    while(number != 0)\r\n\r\n\r\n&lt;br&gt;\r\n\r\n**2**. This gives last number of that variable for Example. If we have 12345 then after this code line runs it gives 5 because when you do the number modulo 10 then it gives last one number.\r\n \r\n\r\n    int remainder = number % 10;\r\n\r\n&lt;br&gt;\r\n\r\n\r\n**3.** In this reverse variable we can store that last number.\r\n\r\n\r\n    reverse = reverse * 10 + remainder;\r\n\r\nThe value of the reverse is 0 at the start then remainder of first time is 5 so the value of the reverse is `(reverse = 0 + 10 + 5)` then at first time value of reverse is 5.\r\n\r\n**4.** after that the original number is divided by 10 and remove last index of that number. for example 12345 then it removes 5 for that number and go on until the number is not 0.\r\n\r\n\r\n    number = number / 10;\r\n\r\n","title":"I try to find the reverse number of the input number in java program .Yeah but i am confused about the logic inside the loop","body":"<p>First of all you need every last element of that number so for that logic is below.</p>\n<pre><code>public class reverseNumber {\n    public static void main(String[] args) {\n\n         System.out.print(&quot;Enter a number :&quot;);\n         Scanner sc = new Scanner(System.in);\n         int number = sc.nextInt();\n\n         int reverse = 0;\n\n        while (number != 0) {\n            int remainder = number % 10;\n            reverse = reverse * 10 + remainder;\n            number = number / 10;\n        }\n\n        System.out.println(&quot;The reverse of the given number is: &quot; + reverse);\n    }\n}\n</code></pre>\n<blockquote>\n<h1><b>Logic Explanation</b></h1>\n</blockquote>\n<p><strong>1</strong>. Loop runs until <code>reverse</code> variable will not 0.</p>\n<pre><code>while(number != 0)\n</code></pre>\n<br>\n<p><strong>2</strong>. This gives last number of that variable for Example. If we have 12345 then after this code line runs it gives 5 because when you do the number modulo 10 then it gives last one number.</p>\n<pre><code>int remainder = number % 10;\n</code></pre>\n<br>\n<p><strong>3.</strong> In this reverse variable we can store that last number.</p>\n<pre><code>reverse = reverse * 10 + remainder;\n</code></pre>\n<p>The value of the reverse is 0 at the start then remainder of first time is 5 so the value of the reverse is <code>(reverse = 0 + 10 + 5)</code> then at first time value of reverse is 5.</p>\n<p><strong>4.</strong> after that the original number is divided by 10 and remove last index of that number. for example 12345 then it removes 5 for that number and go on until the number is not 0.</p>\n<pre><code>number = number / 10;\n</code></pre>\n"}],"owner":{"account_id":26349910,"reputation":1,"user_id":20007688,"display_name":"David "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680583946,"creation_date":1680581326,"question_id":75925447,"body_markdown":"    public static void main(String[] args) {\r\n\t\tint n;\r\n\t\tSystem.out.print(&quot;Enter a number :&quot;);\r\n\t\tScanner sc=new Scanner(System.in);\r\n\t\tn=sc.nextInt();\r\n\t\tint reversednum=0;\r\n\t\twhile(n!=0){\r\n\t\t\tint remainder=n%10;\r\n\t\t\treversednum=reversednum*10+remainder;\r\n\t\t\tn=n/10;\r\n\t\t}\r\n\t    System.out.println(reversednum);\r\n\t}\r\n\r\nfor input n = 123, reversednum = 0 * 10 + 3 = 3 again then n = 12 ,reversednum = 0 * 10 + 2, reversednum = 0 * 10 + 1 is this the logic run inside while loop? Or reversednum = 0 * 10 + 3 = 3, n = 12 reversednum = 3 * 10 + 2; n = 1 reversednum= 32 * 10 + 1; if the second concept is true then it prints 32321 if we print  reversednum inside the while loop.","title":"I try to find the reverse number of the input number in java program .Yeah but i am confused about the logic inside the loop","body":"<pre><code>public static void main(String[] args) {\n    int n;\n    System.out.print(&quot;Enter a number :&quot;);\n    Scanner sc=new Scanner(System.in);\n    n=sc.nextInt();\n    int reversednum=0;\n    while(n!=0){\n        int remainder=n%10;\n        reversednum=reversednum*10+remainder;\n        n=n/10;\n    }\n    System.out.println(reversednum);\n}\n</code></pre>\n<p>for input n = 123, reversednum = 0 * 10 + 3 = 3 again then n = 12 ,reversednum = 0 * 10 + 2, reversednum = 0 * 10 + 1 is this the logic run inside while loop? Or reversednum = 0 * 10 + 3 = 3, n = 12 reversednum = 3 * 10 + 2; n = 1 reversednum= 32 * 10 + 1; if the second concept is true then it prints 32321 if we print  reversednum inside the while loop.</p>\n"},{"tags":["java","hash","gmail-api","dkim"],"owner":{"account_id":28205446,"reputation":1,"user_id":21558611,"display_name":"Seranti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680583943,"creation_date":1680544762,"question_id":75922435,"body_markdown":"I am trying to validate the DKIM Signature of the email I received in my Gmail account. To validate the signature, I am trying to compare the body hash value received in DKIM Signature with the hash of the email body I received. I am using the bean `com.google.api.services.gmail.model.Message` to get my data from Gmail using Java code. The hash which I am calculating and the bodyhash in DKIM Signature are not matching. Since the message body is returned in parts[], I have tried using both plain text and html one to match the one in header. its still not working. \r\n\r\n\r\nI am trying to compute the body hash using below program.\r\n```\r\nimport java.security.MessageDigest;\r\nimport java.security.NoSuchAlgorithmException;\r\n\r\nimport org.apache.james.jdkim.codec.binary.Base64;\r\n\r\npublic class TestBodyHash {\r\n\r\n\tpublic static void main(String[] args) throws NoSuchAlgorithmException {\r\n\t\tString bodyData = &quot;PGRpdiBkaXI9Imx0ciI-VGVzdCBIZWFkZXJzPC9kaXY-DQo=&quot;;\r\n\t\tMessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n\t\tbyte[] bytes = Base64.decodeBase64(bodyData.intern());\r\n\t\tSystem.out.println(new String(bytes));\r\n\t\tbyte[] hash = digest.digest(new String(bytes).getBytes());\r\n\t\tSystem.out.println(&quot;Hash is:&quot; + hash);\r\n\t\tSystem.out.println(&quot;Hash is:&quot; + &quot;SHA-256-&quot; + Base64.encodeBase64String(hash));\r\n\r\n\t}\r\n\r\n}\r\n```\r\nThe DKIM-Signature:\r\n```\r\n{&quot;name&quot;:&quot;DKIM-Signature&quot;,&quot;value&quot;:&quot;v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=google; t=1679956087;        h=to:subject:message-id:date:from:mime-version:from:to:cc:subject         :date:message-id:reply-to;        bh=Ki2uJWkSH103C10Kj1bJx0G+BVr6m0yr/R4PjzqnhkU=;        b=LIzMkSoN77uAFgR/H/yz0JVKFcKFj7wv5CQ7PPKvXFWVrIvx62xCYGs8Djy2rhSYEx         vw1R3VlqERip388piXwk3FDdSYPZ2UtToZFZBTwXxTFErgTwFBpxeVeOjb+XDqPNs1s0         ZGK6NOkw47r33KClGE6qD1j7nrQoW2Ji7IRpcV+bY7Ner2pUSfU7MWKBIGvct5Oz/ios         axng0csVZbkPhiDXcOphBzrwrKF26IWwhT4Q08A36X9TbSNLT30gSzuPsDZCqSKR74UQ         QW1cFXr5mKIDZUfToMdB2P2+HS5PwB4EWPQ14OgC2nfCDLJ0nO69ezbRTigAn6BBGJ+M         jdJg==&quot;}\r\n```\r\nThe payload:\r\n```\r\n{&quot;name&quot;:&quot;Content-Type&quot;,&quot;value&quot;:&quot;multipart/alternative; boundary=\\&quot;000000000000cf4ed605f7e94164\\&quot;&quot;}],&quot;mimeType&quot;:&quot;multipart/alternative&quot;,&quot;partId&quot;:&quot;&quot;,&quot;parts&quot;:[{&quot;body&quot;:{&quot;data&quot;:&quot;VGVzdCBIZWFkZXJzDQo=&quot;,&quot;size&quot;:14},&quot;filename&quot;:&quot;&quot;,&quot;headers&quot;:[{&quot;name&quot;:&quot;Content-Type&quot;,&quot;value&quot;:&quot;text/plain; charset=\\&quot;UTF-8\\&quot;&quot;}],&quot;mimeType&quot;:&quot;text/plain&quot;,&quot;partId&quot;:&quot;0&quot;},{&quot;body&quot;:{&quot;data&quot;:&quot;PGRpdiBkaXI9Imx0ciI-VGVzdCBIZWFkZXJzPC9kaXY-DQo=&quot;,&quot;size&quot;:35},&quot;filename&quot;:&quot;&quot;,&quot;headers&quot;:[{&quot;name&quot;:&quot;Content-Type&quot;,&quot;value&quot;:&quot;text/html; charset=\\&quot;UTF-8\\&quot;&quot;}],&quot;mimeType&quot;:&quot;text/html&quot;,&quot;partId&quot;:&quot;1&quot;}]},&quot;sizeEstimate&quot;:4993,&quot;snippet&quot;:&quot;Test Headers&quot;,&quot;threadId&quot;:&quot;187252f934535794&quot;}\r\n```\r\n\r\n","title":"How is Body Hash in DKIM Signature Calculated using Java","body":"<p>I am trying to validate the DKIM Signature of the email I received in my Gmail account. To validate the signature, I am trying to compare the body hash value received in DKIM Signature with the hash of the email body I received. I am using the bean <code>com.google.api.services.gmail.model.Message</code> to get my data from Gmail using Java code. The hash which I am calculating and the bodyhash in DKIM Signature are not matching. Since the message body is returned in parts[], I have tried using both plain text and html one to match the one in header. its still not working.</p>\n<p>I am trying to compute the body hash using below program.</p>\n<pre><code>import java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\n\nimport org.apache.james.jdkim.codec.binary.Base64;\n\npublic class TestBodyHash {\n\n    public static void main(String[] args) throws NoSuchAlgorithmException {\n        String bodyData = &quot;PGRpdiBkaXI9Imx0ciI-VGVzdCBIZWFkZXJzPC9kaXY-DQo=&quot;;\n        MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n        byte[] bytes = Base64.decodeBase64(bodyData.intern());\n        System.out.println(new String(bytes));\n        byte[] hash = digest.digest(new String(bytes).getBytes());\n        System.out.println(&quot;Hash is:&quot; + hash);\n        System.out.println(&quot;Hash is:&quot; + &quot;SHA-256-&quot; + Base64.encodeBase64String(hash));\n\n    }\n\n}\n</code></pre>\n<p>The DKIM-Signature:</p>\n<pre><code>{&quot;name&quot;:&quot;DKIM-Signature&quot;,&quot;value&quot;:&quot;v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=google; t=1679956087;        h=to:subject:message-id:date:from:mime-version:from:to:cc:subject         :date:message-id:reply-to;        bh=Ki2uJWkSH103C10Kj1bJx0G+BVr6m0yr/R4PjzqnhkU=;        b=LIzMkSoN77uAFgR/H/yz0JVKFcKFj7wv5CQ7PPKvXFWVrIvx62xCYGs8Djy2rhSYEx         vw1R3VlqERip388piXwk3FDdSYPZ2UtToZFZBTwXxTFErgTwFBpxeVeOjb+XDqPNs1s0         ZGK6NOkw47r33KClGE6qD1j7nrQoW2Ji7IRpcV+bY7Ner2pUSfU7MWKBIGvct5Oz/ios         axng0csVZbkPhiDXcOphBzrwrKF26IWwhT4Q08A36X9TbSNLT30gSzuPsDZCqSKR74UQ         QW1cFXr5mKIDZUfToMdB2P2+HS5PwB4EWPQ14OgC2nfCDLJ0nO69ezbRTigAn6BBGJ+M         jdJg==&quot;}\n</code></pre>\n<p>The payload:</p>\n<pre><code>{&quot;name&quot;:&quot;Content-Type&quot;,&quot;value&quot;:&quot;multipart/alternative; boundary=\\&quot;000000000000cf4ed605f7e94164\\&quot;&quot;}],&quot;mimeType&quot;:&quot;multipart/alternative&quot;,&quot;partId&quot;:&quot;&quot;,&quot;parts&quot;:[{&quot;body&quot;:{&quot;data&quot;:&quot;VGVzdCBIZWFkZXJzDQo=&quot;,&quot;size&quot;:14},&quot;filename&quot;:&quot;&quot;,&quot;headers&quot;:[{&quot;name&quot;:&quot;Content-Type&quot;,&quot;value&quot;:&quot;text/plain; charset=\\&quot;UTF-8\\&quot;&quot;}],&quot;mimeType&quot;:&quot;text/plain&quot;,&quot;partId&quot;:&quot;0&quot;},{&quot;body&quot;:{&quot;data&quot;:&quot;PGRpdiBkaXI9Imx0ciI-VGVzdCBIZWFkZXJzPC9kaXY-DQo=&quot;,&quot;size&quot;:35},&quot;filename&quot;:&quot;&quot;,&quot;headers&quot;:[{&quot;name&quot;:&quot;Content-Type&quot;,&quot;value&quot;:&quot;text/html; charset=\\&quot;UTF-8\\&quot;&quot;}],&quot;mimeType&quot;:&quot;text/html&quot;,&quot;partId&quot;:&quot;1&quot;}]},&quot;sizeEstimate&quot;:4993,&quot;snippet&quot;:&quot;Test Headers&quot;,&quot;threadId&quot;:&quot;187252f934535794&quot;}\n</code></pre>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":11163581,"reputation":1050,"user_id":8192914,"display_name":"ganjaam"},"score":1,"creation_date":1680586010,"post_id":75925548,"comment_id":133918793,"body_markdown":"As far as I know, you&#39;ll need to sacrifice the option for video quality if you want to restrict users from copying the video link. Alternatively, you can use Exoplayer and \nthe android-youtubeExtractor library to create your video player with almost whatever feature you want. Although when I tried it, my video used to lag a lot. So you may need to apply some tricks there.","body":"As far as I know, you&#39;ll need to sacrifice the option for video quality if you want to restrict users from copying the video link. Alternatively, you can use Exoplayer and  the android-youtubeExtractor library to create your video player with almost whatever feature you want. Although when I tried it, my video used to lag a lot. So you may need to apply some tricks there."}],"owner":{"account_id":15450913,"reputation":111,"user_id":11146313,"display_name":"Dhruv"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680583711,"creation_date":1680582965,"question_id":75925548,"body_markdown":"I an playing YouTube video in my android application using &quot;PierfrancescoSoffritti&quot; github library. It is working completely fine, The only issue is I don&#39;t want user to copy the video link. While video is been played, there appears settings option, from where where user can change playback speed, quality which is my requirement, but along with that user can also copy video link. How to restrict that?\r\n\r\n\r\n\r\nI have made custom player, but in that video quality option is not supported.  \r\n\r\nWhile using youtube player library(without custom UI) I tried Clipboard manager also to override the copied data, but some how its not working for link","title":"How to restrict user from copying YouTube video link, from my android application","body":"<p>I an playing YouTube video in my android application using &quot;PierfrancescoSoffritti&quot; github library. It is working completely fine, The only issue is I don't want user to copy the video link. While video is been played, there appears settings option, from where where user can change playback speed, quality which is my requirement, but along with that user can also copy video link. How to restrict that?</p>\n<p>I have made custom player, but in that video quality option is not supported.</p>\n<p>While using youtube player library(without custom UI) I tried Clipboard manager also to override the copied data, but some how its not working for link</p>\n"},{"tags":["java","json","serialization","gson","deserialization"],"answers":[{"comments":[{"owner":{"account_id":5351903,"reputation":1369,"user_id":4265824,"accept_rate":45,"display_name":"Ganesh Gudghe"},"score":0,"creation_date":1680318996,"post_id":75901447,"comment_id":133882766,"body_markdown":"thanks for the details information, let me try with solution that you provided. thank you once again.","body":"thanks for the details information, let me try with solution that you provided. thank you once again."}],"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680285542,"creation_date":1680285542,"answer_id":75901447,"question_id":75898865,"body_markdown":"&gt; So is there any way to avoid type conversion\r\n\r\nNo, at least not with your current code. Gson serializes Java arrays as JSON arrays. On deserialization Gson only knows that the field type is `Object` and recognizes that the JSON data contains a JSON array consisting of JSON numbers. In that case it deserializes the data as `List&lt;Double&gt;` (or more specifically `ArrayList&lt;Double&gt;`).\r\n\r\nThe cleanest solution might be to add a type parameter to `RequesterArgument`, representing the type of `data`:\r\n```java\r\npublic class RequesterArgument&lt;T&gt; {\r\n    private T data;\r\n\r\n    ...\r\n}\r\n```\r\n\r\nThe main difference is that when you now use `Gson.fromJson`, you have to provide a `TypeToken` which specifies the actual argument for `T` (see also the [User Guide](https://github.com/google/gson/blob/master/UserGuide.md#serializing-and-deserializing-generic-types)):\r\n```java\r\nTypeToken&lt;RequesterArgument&lt;byte[]&gt;&gt; typeToken = new TypeToken&lt;RequesterArgument&lt;byte[]&gt;&gt;() {};\r\n\r\nRequesterArgument&lt;byte[]&gt; response = new Gson().fromJson(jsonString, typeToken);\r\n```\r\n(Note: Older Gson versions require that you call `typeToken.getType()`)\r\n\r\nIf that solution is not possible for you, another option would be to add a [`@JsonAdapter`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/JsonAdapter.html) annotation to the field, which refers to a custom [`TypeAdapterFactory`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapterFactory.html) whose adapter peeks at the JSON data and then depending on the type tries to deserialize it as `byte[]`.\r\n\r\nAlso, as side note Gson does not require that your classes implement `Serializable`. And also to avoid any misunderstandings, Gson does not use getters and setters, it directly modifies the field value. Though you can of course let your own code call the getters and setters.\r\n","title":"Java Gson byte[] array getting converted into ArrayList","body":"<blockquote>\n<p>So is there any way to avoid type conversion</p>\n</blockquote>\n<p>No, at least not with your current code. Gson serializes Java arrays as JSON arrays. On deserialization Gson only knows that the field type is <code>Object</code> and recognizes that the JSON data contains a JSON array consisting of JSON numbers. In that case it deserializes the data as <code>List&lt;Double&gt;</code> (or more specifically <code>ArrayList&lt;Double&gt;</code>).</p>\n<p>The cleanest solution might be to add a type parameter to <code>RequesterArgument</code>, representing the type of <code>data</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class RequesterArgument&lt;T&gt; {\n    private T data;\n\n    ...\n}\n</code></pre>\n<p>The main difference is that when you now use <code>Gson.fromJson</code>, you have to provide a <code>TypeToken</code> which specifies the actual argument for <code>T</code> (see also the <a href=\"https://github.com/google/gson/blob/master/UserGuide.md#serializing-and-deserializing-generic-types\" rel=\"nofollow noreferrer\">User Guide</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>TypeToken&lt;RequesterArgument&lt;byte[]&gt;&gt; typeToken = new TypeToken&lt;RequesterArgument&lt;byte[]&gt;&gt;() {};\n\nRequesterArgument&lt;byte[]&gt; response = new Gson().fromJson(jsonString, typeToken);\n</code></pre>\n<p>(Note: Older Gson versions require that you call <code>typeToken.getType()</code>)</p>\n<p>If that solution is not possible for you, another option would be to add a <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/JsonAdapter.html\" rel=\"nofollow noreferrer\"><code>@JsonAdapter</code></a> annotation to the field, which refers to a custom <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapterFactory.html\" rel=\"nofollow noreferrer\"><code>TypeAdapterFactory</code></a> whose adapter peeks at the JSON data and then depending on the type tries to deserialize it as <code>byte[]</code>.</p>\n<p>Also, as side note Gson does not require that your classes implement <code>Serializable</code>. And also to avoid any misunderstandings, Gson does not use getters and setters, it directly modifies the field value. Though you can of course let your own code call the getters and setters.</p>\n"}],"owner":{"account_id":5351903,"reputation":1369,"user_id":4265824,"accept_rate":45,"display_name":"Ganesh Gudghe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75901447,"answer_count":1,"score":0,"last_activity_date":1680583307,"creation_date":1680267748,"question_id":75898865,"body_markdown":"\r\nI am using Gson for object serialization and deserialization but **Gson converts byte[] array to ArrayList**\r\n\r\nObject class\r\n\r\n    public class RequesterArgument implements Serializable {\r\n    \r\n     private Object data;\r\n     \r\n         public void setData(Object data) {\r\n            this.data = data;\r\n        }\r\n    \r\n        public Object getData() {\r\n            return data;\r\n        }\r\n    \t\r\n    }\r\n\r\nAnd I have an object array[]\r\n\r\n    byte[] data = {74,97,118,97,73,110,85,115,101};\r\n\r\nnow i am setting this byte[] to my object \r\n\r\n        byte[] data = {74,97,118,97,73,110,85,115,101};\r\n        \r\n        RequesterArgument request = new RequesterArgument();\r\n        request.setData(data);\r\n    \r\n    System.out.println(request.getData().getClass().getName());\r\n\r\nnow the output is **[B** byte\r\n\r\nbut if I convert it to a JSON string \r\n\r\n    String jsonString = new Gson().toJson(request);\r\n\r\nand again try to convert it to the Actual object \r\n\r\n    RequesterArgument response = new Gson().fromJson(jsonString, RequesterArgument.class);\r\n    \r\n    System.out.println(response.getData().getClass().getName());\r\n\r\nand if I try to print the class name not it is giving me the **java.util.ArrayList** type\r\n\r\nSo is there any way to avoid type conversion without changing the actual type?\r\n**Note:  **(if I change Object data to a byte[] data then it is working fine)****\r\n","title":"Java Gson byte[] array getting converted into ArrayList","body":"<p>I am using Gson for object serialization and deserialization but <strong>Gson converts byte[] array to ArrayList</strong></p>\n<p>Object class</p>\n<pre><code>public class RequesterArgument implements Serializable {\n\n private Object data;\n \n     public void setData(Object data) {\n        this.data = data;\n    }\n\n    public Object getData() {\n        return data;\n    }\n    \n}\n</code></pre>\n<p>And I have an object array[]</p>\n<pre><code>byte[] data = {74,97,118,97,73,110,85,115,101};\n</code></pre>\n<p>now i am setting this byte[] to my object</p>\n<pre><code>    byte[] data = {74,97,118,97,73,110,85,115,101};\n    \n    RequesterArgument request = new RequesterArgument();\n    request.setData(data);\n\nSystem.out.println(request.getData().getClass().getName());\n</code></pre>\n<p>now the output is <strong>[B</strong> byte</p>\n<p>but if I convert it to a JSON string</p>\n<pre><code>String jsonString = new Gson().toJson(request);\n</code></pre>\n<p>and again try to convert it to the Actual object</p>\n<pre><code>RequesterArgument response = new Gson().fromJson(jsonString, RequesterArgument.class);\n\nSystem.out.println(response.getData().getClass().getName());\n</code></pre>\n<p>and if I try to print the class name not it is giving me the <strong>java.util.ArrayList</strong> type</p>\n<p>So is there any way to avoid type conversion without changing the actual type?\n<strong>Note:  <strong>(if I change Object data to a byte[] data then it is working fine)</strong></strong></p>\n"},{"tags":["java","rest","spring-mvc","spring-boot","controller"],"comments":[{"owner":{"account_id":1143154,"reputation":19805,"user_id":1126526,"accept_rate":90,"display_name":"manish"},"score":0,"creation_date":1495097502,"post_id":44042412,"comment_id":75111707,"body_markdown":"This is best and easiest done at the web server level. See [NGinx HTTP Limit module](http://nginx.org/en/docs/http/ngx_http_limit_req_module.html) or [Apache Rate Limit](https://httpd.apache.org/docs/trunk/mod/mod_ratelimit.html) module.","body":"This is best and easiest done at the web server level. See <a href=\"http://nginx.org/en/docs/http/ngx_http_limit_req_module.html\" rel=\"nofollow noreferrer\">NGinx HTTP Limit module</a> or <a href=\"https://httpd.apache.org/docs/trunk/mod/mod_ratelimit.html\" rel=\"nofollow noreferrer\">Apache Rate Limit</a> module."},{"owner":{"account_id":10784878,"reputation":2692,"user_id":7934206,"accept_rate":77,"display_name":"Ricky"},"score":0,"creation_date":1495098294,"post_id":44042412,"comment_id":75112290,"body_markdown":"I hope that can limit the accumulated api calls. For example if it restricts 5 calls per minute and we have 10 users then it limits to 50 calls per minute.What happens if one user requested 40 and the rest 10 only within the a few seconds.Will it restrict all the api calls?","body":"I hope that can limit the accumulated api calls. For example if it restricts 5 calls per minute and we have 10 users then it limits to 50 calls per minute.What happens if one user requested 40 and the rest 10 only within the a few seconds.Will it restrict all the api calls?"},{"owner":{"account_id":1141520,"reputation":2369,"user_id":1125284,"display_name":"Zico"},"score":0,"creation_date":1495098603,"post_id":44042412,"comment_id":75112508,"body_markdown":"You can look [here](http://stackoverflow.com/a/38479810/1125284) and I hope [Guava&#39;s RateLimiter](https://dzone.com/articles/ratelimiter-discovering-google) will help you!","body":"You can look <a href=\"http://stackoverflow.com/a/38479810/1125284\">here</a> and I hope <a href=\"https://dzone.com/articles/ratelimiter-discovering-google\" rel=\"nofollow noreferrer\">Guava&#39;s RateLimiter</a> will help you!"},{"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"score":0,"creation_date":1495102666,"post_id":44042412,"comment_id":75115379,"body_markdown":"Take a look at this answer http://stackoverflow.com/q/27595683/1061499. Also this post seems interesting: http://ec2-52-59-233-40.eu-central-1.compute.amazonaws.com/java-spring-mvc-rate-limit/","body":"Take a look at this answer <a href=\"http://stackoverflow.com/q/27595683/1061499\">stackoverflow.com/q/27595683/1061499</a>. Also this post seems interesting: <a href=\"http://ec2-52-59-233-40.eu-central-1.compute.amazonaws.com/java-spring-mvc-rate-limit/\" rel=\"nofollow noreferrer\">ec2-52-59-233-40.eu-central-1.compute.amazonaws.com/&hellip;</a>"},{"owner":{"account_id":4933278,"reputation":492,"user_id":3972310,"accept_rate":50,"display_name":"meleagros"},"score":1,"creation_date":1500840132,"post_id":44042412,"comment_id":77501563,"body_markdown":"Take a look at [Bucket4j](https://github.com/vladimir-bukhtoyarov/bucket4jBucket4j). I&#39;ve started a [Spring Boot Starter for Bucket4j](https://github.com/MarcGiffing/bucket4j-spring-boot-starter)","body":"Take a look at <a href=\"https://github.com/vladimir-bukhtoyarov/bucket4jBucket4j\" rel=\"nofollow noreferrer\">Bucket4j</a>. I&#39;ve started a <a href=\"https://github.com/MarcGiffing/bucket4j-spring-boot-starter\" rel=\"nofollow noreferrer\">Spring Boot Starter for Bucket4j</a>"},{"owner":{"account_id":4434750,"reputation":1949,"user_id":3610891,"accept_rate":62,"display_name":"Onki"},"score":0,"creation_date":1564980337,"post_id":44042412,"comment_id":101192322,"body_markdown":"@Ricky did you explore the options of using the embedded web servers for this purpose. Now we need this functionality for your project. I wanted to know what the final option  you have chosen.","body":"@Ricky did you explore the options of using the embedded web servers for this purpose. Now we need this functionality for your project. I wanted to know what the final option  you have chosen."}],"answers":[{"comments":[{"owner":{"account_id":4434750,"reputation":1949,"user_id":3610891,"accept_rate":62,"display_name":"Onki"},"score":0,"creation_date":1564980430,"post_id":44549726,"comment_id":101192347,"body_markdown":"how about using this functionality in spring boot embedded web servers. I am exploring over this option but not getting any specific lead. Can this be availed on web servers end provided by spring boot.","body":"how about using this functionality in spring boot embedded web servers. I am exploring over this option but not getting any specific lead. Can this be availed on web servers end provided by spring boot."}],"tags":[],"owner":{"account_id":755023,"reputation":6091,"user_id":873641,"accept_rate":86,"display_name":"Daniel Cerecedo"},"comment_count":1,"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1564572083,"creation_date":1497456431,"answer_id":44549726,"question_id":44042412,"body_markdown":"You don&#39;t have that component in Spring.\r\n\r\n - You can build it as part of your solution. Create a filter and register it in your spring context. The filter should check incoming call and count the incoming requests per user during a time window. I would use the [token bucket algorithm][1] as it is the most flexible.\r\n - You can build some component that is independent of your current solution. Create an API Gateway that does the job. You could extend Zuul gateway and, again, use the token bucket algorithm.\r\n - You can use an already built-in component, like Mulesoft ESB that can act as API gateway and supports rate limiting and throttling. Never used it myself.\r\n - And finally, you can use an API Manager that has rate limiting and throttling and much more. Checkout MuleSoft, WSO2, 3Scale,Kong, etc... (most will have a cost, some are open source and have a community edition).\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Token_bucket","title":"How to set rate limit for each user in Spring Boot?","body":"<p>You don't have that component in Spring.</p>\n\n<ul>\n<li>You can build it as part of your solution. Create a filter and register it in your spring context. The filter should check incoming call and count the incoming requests per user during a time window. I would use the <a href=\"https://en.wikipedia.org/wiki/Token_bucket\" rel=\"noreferrer\">token bucket algorithm</a> as it is the most flexible.</li>\n<li>You can build some component that is independent of your current solution. Create an API Gateway that does the job. You could extend Zuul gateway and, again, use the token bucket algorithm.</li>\n<li>You can use an already built-in component, like Mulesoft ESB that can act as API gateway and supports rate limiting and throttling. Never used it myself.</li>\n<li>And finally, you can use an API Manager that has rate limiting and throttling and much more. Checkout MuleSoft, WSO2, 3Scale,Kong, etc... (most will have a cost, some are open source and have a community edition).</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":4434750,"reputation":1949,"user_id":3610891,"accept_rate":62,"display_name":"Onki"},"score":0,"creation_date":1564980453,"post_id":53746180,"comment_id":101192352,"body_markdown":"how about using this functionality in spring boot embedded web servers. I am exploring over this option but not getting any specific lead. Can this be availed on web servers end provided by spring boot.","body":"how about using this functionality in spring boot embedded web servers. I am exploring over this option but not getting any specific lead. Can this be availed on web servers end provided by spring boot."},{"owner":{"account_id":7377225,"reputation":1389,"user_id":5615357,"accept_rate":58,"display_name":"Philippe Simo"},"score":0,"creation_date":1663622272,"post_id":53746180,"comment_id":130279360,"body_markdown":"I tried with bucket4j-spring-boot-starter + spring-boot-starter-data-redis + spring-boot-starter-cache and it works like a charm. I do not recommend using Zuul for the sole purpose of caching.","body":"I tried with bucket4j-spring-boot-starter + spring-boot-starter-data-redis + spring-boot-starter-cache and it works like a charm. I do not recommend using Zuul for the sole purpose of caching."}],"tags":[],"owner":{"account_id":50862,"reputation":2265,"user_id":151813,"accept_rate":86,"display_name":"Lukasz R."},"comment_count":2,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1544690591,"creation_date":1544628112,"answer_id":53746180,"question_id":44042412,"body_markdown":"Spring does not have rate-limiting out of the box.\r\n\r\nThere is [bucket4j-spring-boot-starter][1] project which uses [bucket4j][2] library with token-bucket algorithm to rate-limit access to the REST api. You can configure it via application properties file. There is an option to [limit the access based on IP address or username][3].\r\n\r\nAs an example simple setup which allows a maximum of 5 requests within 10 seconds independently from the user:\r\n\r\n    bucket4j:\r\n\t  enabled: true\r\n\t  filters:\r\n\t  - cache-name: buckets\r\n\t    url: .*\r\n\t    rate-limits:\r\n\t    - bandwidths:\r\n\t      - capacity: 5\r\n\t\ttime: 10\r\n\t\tunit: seconds\r\n\r\nIf you are using [Netflix Zuul][4] you could use [Spring Cloud Zuul RateLimit][5] which uses different storage options: Consul, Redis, Spring Data and Bucket4j.\r\n\r\n\r\n  [1]: https://github.com/MarcGiffing/bucket4j-spring-boot-starter\r\n  [2]: https://github.com/vladimir-bukhtoyarov/bucket4j\r\n  [3]: https://github.com/MarcGiffing/bucket4j-spring-boot-starter#expression\r\n  [4]: https://github.com/Netflix/zuul\r\n  [5]: https://github.com/marcosbarbero/spring-cloud-zuul-ratelimit","title":"How to set rate limit for each user in Spring Boot?","body":"<p>Spring does not have rate-limiting out of the box.</p>\n\n<p>There is <a href=\"https://github.com/MarcGiffing/bucket4j-spring-boot-starter\" rel=\"noreferrer\">bucket4j-spring-boot-starter</a> project which uses <a href=\"https://github.com/vladimir-bukhtoyarov/bucket4j\" rel=\"noreferrer\">bucket4j</a> library with token-bucket algorithm to rate-limit access to the REST api. You can configure it via application properties file. There is an option to <a href=\"https://github.com/MarcGiffing/bucket4j-spring-boot-starter#expression\" rel=\"noreferrer\">limit the access based on IP address or username</a>.</p>\n\n<p>As an example simple setup which allows a maximum of 5 requests within 10 seconds independently from the user:</p>\n\n<pre><code>bucket4j:\n  enabled: true\n  filters:\n  - cache-name: buckets\n    url: .*\n    rate-limits:\n    - bandwidths:\n      - capacity: 5\n    time: 10\n    unit: seconds\n</code></pre>\n\n<p>If you are using <a href=\"https://github.com/Netflix/zuul\" rel=\"noreferrer\">Netflix Zuul</a> you could use <a href=\"https://github.com/marcosbarbero/spring-cloud-zuul-ratelimit\" rel=\"noreferrer\">Spring Cloud Zuul RateLimit</a> which uses different storage options: Consul, Redis, Spring Data and Bucket4j.</p>\n"},{"comments":[{"owner":{"account_id":5807930,"reputation":141,"user_id":4580013,"display_name":"Vijay Satluri"},"score":3,"creation_date":1578218890,"post_id":58774257,"comment_id":105361795,"body_markdown":"Simple &amp; Awesome Solution. Thanks for saving the day.","body":"Simple &amp; Awesome Solution. Thanks for saving the day."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1578792206,"post_id":58774257,"comment_id":105554240,"body_markdown":"@VijaySatluri i made a small improvement. I&#39;ve added `requestCountsPerIpAddress.put(clientIpAddress, requests);` to the if clause `if(requests &gt; MAX_REQUESTS_PER_SECOND){`. This will prevent the ip/requestcount pair from expiring after one second when the spammer continues to bombarde the server with requests. Only when there is a pause of 1 second between requests the entry expires.","body":"@VijaySatluri i made a small improvement. I&#39;ve added <code>requestCountsPerIpAddress.put(clientIpAddress, requests);</code> to the if clause <code>if(requests &gt; MAX_REQUESTS_PER_SECOND){</code>. This will prevent the ip/requestcount pair from expiring after one second when the spammer continues to bombarde the server with requests. Only when there is a pause of 1 second between requests the entry expires."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1578794800,"post_id":58774257,"comment_id":105554535,"body_markdown":"Made one more addition. Its best to not use sendError() or so i&#39;ve found out. This method will not abort the request but will instead continue executing the code in the filter and that of any filters after it. Its better to simply return the filter method without allowing filterchain.dofilter to be called. You simply adjust the content of httpResponse by providing the error status code and a message with the writer() method.","body":"Made one more addition. Its best to not use sendError() or so i&#39;ve found out. This method will not abort the request but will instead continue executing the code in the filter and that of any filters after it. Its better to simply return the filter method without allowing filterchain.dofilter to be called. You simply adjust the content of httpResponse by providing the error status code and a message with the writer() method."},{"owner":{"account_id":6661932,"reputation":3905,"user_id":5140756,"accept_rate":16,"display_name":"Augusto"},"score":1,"creation_date":1595256089,"post_id":58774257,"comment_id":111403922,"body_markdown":"Nice answer, save my job. Thanks.","body":"Nice answer, save my job. Thanks."},{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":2,"creation_date":1596048698,"post_id":58774257,"comment_id":111688438,"body_markdown":"Why doesn&#39;t Spring Boot just include this awesome answer?","body":"Why doesn&#39;t Spring Boot just include this awesome answer?"},{"owner":{"account_id":5577567,"reputation":3383,"user_id":4420543,"accept_rate":56,"display_name":"andras"},"score":3,"creation_date":1622314910,"post_id":58774257,"comment_id":119759884,"body_markdown":"Beware of this answer: it does NOT use the leaky bucket algorithm. Which means that in case of this 5 requests / second setup, the last request of 6 consecutive request done every 0.5 second will be blocked. So this does not actually mean 5 requests / second, but 5 requests at most where each of the requests do not have at least 1 second timeout. Very different.","body":"Beware of this answer: it does NOT use the leaky bucket algorithm. Which means that in case of this 5 requests / second setup, the last request of 6 consecutive request done every 0.5 second will be blocked. So this does not actually mean 5 requests / second, but 5 requests at most where each of the requests do not have at least 1 second timeout. Very different."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":1,"creation_date":1622317068,"post_id":58774257,"comment_id":119760344,"body_markdown":"Feel free to post an improved version if you want @andras","body":"Feel free to post an improved version if you want @andras"},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1642554185,"post_id":58774257,"comment_id":125100162,"body_markdown":"@andras i&#39;ve made an important change to the code which makes it a lot better at throttling requests, please read the EDIT text to understand why.","body":"@andras i&#39;ve made an important change to the code which makes it a lot better at throttling requests, please read the EDIT text to understand why."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1642554199,"post_id":58774257,"comment_id":125100168,"body_markdown":"@VijaySatluri i&#39;ve made an important change to the code which makes it a lot better at throttling requests, please read the EDIT text to understand why.","body":"@VijaySatluri i&#39;ve made an important change to the code which makes it a lot better at throttling requests, please read the EDIT text to understand why."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1642554218,"post_id":58774257,"comment_id":125100172,"body_markdown":"@trilogy i&#39;ve made an important change to the code which makes it a lot better at throttling requests, please read the EDIT text to understand why.","body":"@trilogy i&#39;ve made an important change to the code which makes it a lot better at throttling requests, please read the EDIT text to understand why."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":0,"creation_date":1642554234,"post_id":58774257,"comment_id":125100178,"body_markdown":"@Augusto i&#39;ve made an important change to the code which makes it a lot better at throttling requests, please read the EDIT text to understand why.","body":"@Augusto i&#39;ve made an important change to the code which makes it a lot better at throttling requests, please read the EDIT text to understand why."},{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":0,"creation_date":1642779084,"post_id":58774257,"comment_id":125170325,"body_markdown":"The dependencies don&#39;t work. Is LoadingCache part of Guava or Caffeine?","body":"The dependencies don&#39;t work. Is LoadingCache part of Guava or Caffeine?"},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":1,"creation_date":1642779595,"post_id":58774257,"comment_id":125170539,"body_markdown":"@trilogy its part of Caffeine, please add `import com.github.benmanes.caffeine.cache.LoadingCache`","body":"@trilogy its part of Caffeine, please add <code>import com.github.benmanes.caffeine.cache.LoadingCache</code>"},{"owner":{"account_id":4906361,"reputation":3077,"user_id":3952994,"accept_rate":76,"display_name":"Holm"},"score":0,"creation_date":1652257099,"post_id":58774257,"comment_id":127559842,"body_markdown":"When deriving the “real client IP address” from the X-Forwarded-For header, use the rightmost IP in the list.\n\nThe leftmost IP in the XFF header is commonly considered to be “closest to the client” and “most real”, but it’s trivially spoofable. Don’t use it for anything even close to security-related.\n\nshould be xfHeader.split(&quot;,&quot;).last();","body":"When deriving the “real client IP address” from the X-Forwarded-For header, use the rightmost IP in the list.  The leftmost IP in the XFF header is commonly considered to be “closest to the client” and “most real”, but it’s trivially spoofable. Don’t use it for anything even close to security-related.  should be xfHeader.split(&quot;,&quot;).last();"},{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":0,"creation_date":1655498759,"post_id":58774257,"comment_id":128355126,"body_markdown":"How would you limit this to just one endpoint? I mean you can always check in the filter where was the request performed to, but asking whether there is something more elegant.","body":"How would you limit this to just one endpoint? I mean you can always check in the filter where was the request performed to, but asking whether there is something more elegant."},{"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"score":1,"creation_date":1655569335,"post_id":58774257,"comment_id":128365147,"body_markdown":"@Renis1235 you can use the `HttpServletRequest` object to find out which endpoint is being called. Then you can use that information to only run the throttle code when a specific endpoint is called. `if(httpServletRequest.getRequestURI().contains(&quot;/your-endpoint&quot;)){//rate limit code}`","body":"@Renis1235 you can use the <code>HttpServletRequest</code> object to find out which endpoint is being called. Then you can use that information to only run the throttle code when a specific endpoint is called. <code>if(httpServletRequest.getRequestURI().contains(&quot;&#47;your-endpoi&zwnj;&#8203;nt&quot;)){&#47;&#47;rate limit code}</code>"}],"tags":[],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"comment_count":16,"down_vote_count":1,"up_vote_count":52,"is_accepted":false,"score":51,"last_activity_date":1642557124,"creation_date":1573250256,"answer_id":58774257,"question_id":44042412,"body_markdown":"Here is a solution for those who seek to throttle the requests per second for each user (ip address). This solution requires the [Caffeine library][1] which is a [java 1.8+ rewrite][1] of Google&#39;s `Guava library`. You are going to use the `LoadingCache` class for storing the request counts and client ip addresses. You will also be needing the `javax.servlet-api` dependency because you will want to use a `servlet filter` where the request counting takes place. Heres the code:\r\n\r\n\r\n    import javax.servlet.Filter;\r\n    \r\n    \r\n    @Component\r\n    public class requestThrottleFilter implements Filter {\r\n    \r\n        private int MAX_REQUESTS_PER_SECOND = 5; //or whatever you want it to be\r\n    \r\n        private LoadingCache&lt;String, Integer&gt; requestCountsPerIpAddress;\r\n    \r\n        public requestThrottleFilter(){\r\n          super();\r\n          requestCountsPerIpAddress = Caffeine.newBuilder().\r\n                expireAfterWrite(1, TimeUnit.SECONDS).build(new CacheLoader&lt;String, Integer&gt;() {\r\n            public Integer load(String key) {\r\n                return 0;\r\n            }\r\n        });\r\n        }\r\n    \r\n        @Override\r\n        public void init(FilterConfig filterConfig) throws ServletException {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\r\n                throws IOException, ServletException {\r\n            HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;\r\n            HttpServletResponse httpServletResponse = (HttpServletResponse) servletResponse;\r\n            String clientIpAddress = getClientIP((HttpServletRequest) servletRequest);\r\n            if(isMaximumRequestsPerSecondExceeded(clientIpAddress)){\r\n              httpServletResponse.setStatus(HttpStatus.TOO_MANY_REQUESTS.value());\r\n              httpServletResponse.getWriter().write(&quot;Too many requests&quot;);\r\n              return;\r\n             }\r\n    \r\n            filterChain.doFilter(servletRequest, servletResponse);\r\n        }\r\n    \r\n        private boolean isMaximumRequestsPerSecondExceeded(String clientIpAddress){\r\n          Integer requests = 0;\r\n          requests = requestCountsPerIpAddress.get(clientIpAddress);\r\n          if(requests != null){\r\n              if(requests &gt; MAX_REQUESTS_PER_SECOND) {\r\n                requestCountsPerIpAddress.asMap().remove(clientIpAddress);\r\n                requestCountsPerIpAddress.put(clientIpAddress, requests);\r\n                return true;\r\n            }\r\n\r\n          } else {\r\n            requests = 0;\r\n          }\r\n          requests++;\r\n          requestCountsPerIpAddress.put(clientIpAddress, requests);\r\n          return false;\r\n          }\r\n    \r\n        public String getClientIP(HttpServletRequest request) {\r\n            String xfHeader = request.getHeader(&quot;X-Forwarded-For&quot;);\r\n            if (xfHeader == null){\r\n                return request.getRemoteAddr();\r\n            }\r\n            return xfHeader.split(&quot;,&quot;)[0]; // voor als ie achter een proxy zit\r\n        }\r\n    \r\n        @Override\r\n        public void destroy() {\r\n    \r\n        }\r\n    }\r\n\r\nSo what this basically does is it stores all request making ip addresses in a `LoadingCache`. This is like a special map in which each entry has an expiration time. In the constructor the expiration time is set to 1 second. That means that on the first request an ip address plus its request count is only stored in the LoadingCache for one second. It is automatically removed from the map on expiration. If during that second more requests are coming from the ip address then the `isMaximumRequestsPerSecondExceeded(String clientIpAddress)` will add those requests to the total request count but before that checks whether the maximum request amount per second has already been exceeded. If thats the case it returns true and the filter returns an error response with statuscode 429 which stands for Too many requests.\r\n\r\nThis way only a set amount of requests can be made per user per second.\r\n\r\nHere is the `Caffeine` dependency to add to your `pom.xml` \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\r\n            &lt;artifactId&gt;caffeine&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\nPlease note the `&lt;exclusion&gt;` part. I am using `log4j2` as a logger library instead of Spring&#39;s default `logback` library. If you _are_ using `logback` then you should remove the `&lt;exclusion&gt;` part from these POM dependency or logging will not be enabled for this library.\r\n\r\nEDIT: Make sure you let Spring do a component scan on the package where you have your Filter saved or else the Filter won&#39;t work. Also, because it is annotated with @Component the filter will work for all endpoints by default (/*).\r\n\r\nIf spring detected your filter you should see something like this in the log during startup.\r\n\r\n`o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter:&#39;requestThrottleFilter&#39; to: [/*]`\r\n\r\nEDIT 19-01-2022:\r\n\r\nI&#39;ve noticed that my initial solution has one drawback when it comes to blocking too many requests and i&#39;ve changed the code because of it. I&#39;ll first explain why.\r\n\r\nConsider a user can make 3 requests per second. Lets imagine that within a given second the user makes the first request during the first 200 milliseconds of that second. This causes an entry for that user to be added to `requestCountsPerIpAddress` and entry will automatically expire after one second. Now consider that this same user makes 4 successive requests only in the final 100 milliseconds before the second elapses and the entry is deleted. That means that the user effectively only gets blocked for a mere 100 milliseconds at maximum on the fourth request attempt. After those 100 milliseconds pass he&#39;ll be able to immediately make three new requests.\r\n\r\nAs a consequence of this he is also able to make 5 requests within a second instead of 3. This can happen when there is atleast a 500 millisecond delay between the first request (which creates the entry in the `LoadingCache`) and the next two requests (both made in the last 500 milliseconds before the current entry expires). if the user then immediately makes 3 requests right after the entry expired he will effectively manage to make 5 requests within a timespan of 1 second, whereas only 3 are allowed (2 made during the last 500 ms before the previous entry expired + 3 made during the first 500ms of the new one). So that&#39;s not a very efficient way to throttle the requests.\r\n\r\nI&#39;ve changed the library to caffeine because there are some deadlock issues with guava library. If you want to keep using guava library itself you should add this line `requestCountsPerIpAddress.asMap().remove(clientIpAddress);` right under `if(requests &gt; MAX_REQUESTS_PER_SECOND) {` in the code. What this basically does is remove the current entry for the ip address. Then on the next line it gets added again which resets the expiry time back to one whole second for that entry. \r\n\r\nThis has the effect that anyone who just keeps spamming the REST endpoint with requests will indefinitely get a 409 response back until the user stops sending requests for one second after his last request.\r\n\r\n\r\n  [1]: https://github.com/newrelic/newrelic-java-agent/issues/258","title":"How to set rate limit for each user in Spring Boot?","body":"<p>Here is a solution for those who seek to throttle the requests per second for each user (ip address). This solution requires the <a href=\"https://github.com/newrelic/newrelic-java-agent/issues/258\" rel=\"noreferrer\">Caffeine library</a> which is a <a href=\"https://github.com/newrelic/newrelic-java-agent/issues/258\" rel=\"noreferrer\">java 1.8+ rewrite</a> of Google's <code>Guava library</code>. You are going to use the <code>LoadingCache</code> class for storing the request counts and client ip addresses. You will also be needing the <code>javax.servlet-api</code> dependency because you will want to use a <code>servlet filter</code> where the request counting takes place. Heres the code:</p>\n<pre><code>import javax.servlet.Filter;\n\n\n@Component\npublic class requestThrottleFilter implements Filter {\n\n    private int MAX_REQUESTS_PER_SECOND = 5; //or whatever you want it to be\n\n    private LoadingCache&lt;String, Integer&gt; requestCountsPerIpAddress;\n\n    public requestThrottleFilter(){\n      super();\n      requestCountsPerIpAddress = Caffeine.newBuilder().\n            expireAfterWrite(1, TimeUnit.SECONDS).build(new CacheLoader&lt;String, Integer&gt;() {\n        public Integer load(String key) {\n            return 0;\n        }\n    });\n    }\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n\n    }\n\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\n            throws IOException, ServletException {\n        HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;\n        HttpServletResponse httpServletResponse = (HttpServletResponse) servletResponse;\n        String clientIpAddress = getClientIP((HttpServletRequest) servletRequest);\n        if(isMaximumRequestsPerSecondExceeded(clientIpAddress)){\n          httpServletResponse.setStatus(HttpStatus.TOO_MANY_REQUESTS.value());\n          httpServletResponse.getWriter().write(&quot;Too many requests&quot;);\n          return;\n         }\n\n        filterChain.doFilter(servletRequest, servletResponse);\n    }\n\n    private boolean isMaximumRequestsPerSecondExceeded(String clientIpAddress){\n      Integer requests = 0;\n      requests = requestCountsPerIpAddress.get(clientIpAddress);\n      if(requests != null){\n          if(requests &gt; MAX_REQUESTS_PER_SECOND) {\n            requestCountsPerIpAddress.asMap().remove(clientIpAddress);\n            requestCountsPerIpAddress.put(clientIpAddress, requests);\n            return true;\n        }\n\n      } else {\n        requests = 0;\n      }\n      requests++;\n      requestCountsPerIpAddress.put(clientIpAddress, requests);\n      return false;\n      }\n\n    public String getClientIP(HttpServletRequest request) {\n        String xfHeader = request.getHeader(&quot;X-Forwarded-For&quot;);\n        if (xfHeader == null){\n            return request.getRemoteAddr();\n        }\n        return xfHeader.split(&quot;,&quot;)[0]; // voor als ie achter een proxy zit\n    }\n\n    @Override\n    public void destroy() {\n\n    }\n}\n</code></pre>\n<p>So what this basically does is it stores all request making ip addresses in a <code>LoadingCache</code>. This is like a special map in which each entry has an expiration time. In the constructor the expiration time is set to 1 second. That means that on the first request an ip address plus its request count is only stored in the LoadingCache for one second. It is automatically removed from the map on expiration. If during that second more requests are coming from the ip address then the <code>isMaximumRequestsPerSecondExceeded(String clientIpAddress)</code> will add those requests to the total request count but before that checks whether the maximum request amount per second has already been exceeded. If thats the case it returns true and the filter returns an error response with statuscode 429 which stands for Too many requests.</p>\n<p>This way only a set amount of requests can be made per user per second.</p>\n<p>Here is the <code>Caffeine</code> dependency to add to your <code>pom.xml</code></p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\n        &lt;artifactId&gt;caffeine&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Please note the <code>&lt;exclusion&gt;</code> part. I am using <code>log4j2</code> as a logger library instead of Spring's default <code>logback</code> library. If you <em>are</em> using <code>logback</code> then you should remove the <code>&lt;exclusion&gt;</code> part from these POM dependency or logging will not be enabled for this library.</p>\n<p>EDIT: Make sure you let Spring do a component scan on the package where you have your Filter saved or else the Filter won't work. Also, because it is annotated with @Component the filter will work for all endpoints by default (/*).</p>\n<p>If spring detected your filter you should see something like this in the log during startup.</p>\n<p><code>o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter:'requestThrottleFilter' to: [/*]</code></p>\n<p>EDIT 19-01-2022:</p>\n<p>I've noticed that my initial solution has one drawback when it comes to blocking too many requests and i've changed the code because of it. I'll first explain why.</p>\n<p>Consider a user can make 3 requests per second. Lets imagine that within a given second the user makes the first request during the first 200 milliseconds of that second. This causes an entry for that user to be added to <code>requestCountsPerIpAddress</code> and entry will automatically expire after one second. Now consider that this same user makes 4 successive requests only in the final 100 milliseconds before the second elapses and the entry is deleted. That means that the user effectively only gets blocked for a mere 100 milliseconds at maximum on the fourth request attempt. After those 100 milliseconds pass he'll be able to immediately make three new requests.</p>\n<p>As a consequence of this he is also able to make 5 requests within a second instead of 3. This can happen when there is atleast a 500 millisecond delay between the first request (which creates the entry in the <code>LoadingCache</code>) and the next two requests (both made in the last 500 milliseconds before the current entry expires). if the user then immediately makes 3 requests right after the entry expired he will effectively manage to make 5 requests within a timespan of 1 second, whereas only 3 are allowed (2 made during the last 500 ms before the previous entry expired + 3 made during the first 500ms of the new one). So that's not a very efficient way to throttle the requests.</p>\n<p>I've changed the library to caffeine because there are some deadlock issues with guava library. If you want to keep using guava library itself you should add this line <code>requestCountsPerIpAddress.asMap().remove(clientIpAddress);</code> right under <code>if(requests &gt; MAX_REQUESTS_PER_SECOND) {</code> in the code. What this basically does is remove the current entry for the ip address. Then on the next line it gets added again which resets the expiry time back to one whole second for that entry.</p>\n<p>This has the effect that anyone who just keeps spamming the REST endpoint with requests will indefinitely get a 409 response back until the user stops sending requests for one second after his last request.</p>\n"}],"owner":{"account_id":10784878,"reputation":2692,"user_id":7934206,"accept_rate":77,"display_name":"Ricky"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83834,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"accepted_answer_id":44549726,"answer_count":3,"score":47,"last_activity_date":1680583037,"creation_date":1495095976,"question_id":44042412,"body_markdown":"I am developing a Spring Boot Rest API which handles a lots of incoming request calls. My Controller is something like below:\r\n\r\n\r\n    @RestController\r\n    \r\n    public class ApiController {\r\n        List&lt;ApiObject&gt;  apiDataList;   \r\n    \r\n        @RequestMapping(value=&quot;/data&quot;,produces={MediaType.APPLICATION_JSON_VALUE},method=RequestMethod.GET)\r\n        public ResponseEntity&lt;List&lt;ApiObject&gt;&gt; getData(){                                       \r\n            List&lt;ApiObject&gt; apiDataList=getApiData();\r\n            return new ResponseEntity&lt;List&lt;ApiObject&gt;&gt;(apiDataList,HttpStatus.OK);\r\n        }\r\n        @ResponseBody \r\n        @Async  \r\n        public List&lt;ApiObject&gt;  getApiData(){\r\n            List&lt;ApiObject&gt;  apiDataList3=new List&lt;ApiObject&gt; ();\r\n            //do the processing\r\n            return apiDataList3;\r\n        }\r\n    }\r\n\r\nSo now I wanted to set a ratelimit for each user. Say every user can only request 5 request per minute or something like that. How to set the rate limit for each user to make only 5 api calls per minute and if a user requests more than that I can send a 429 response back? Do we need thier IP Address?\r\n\r\nAny help is appreciated.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to set rate limit for each user in Spring Boot?","body":"<p>I am developing a Spring Boot Rest API which handles a lots of incoming request calls. My Controller is something like below:</p>\n\n<pre><code>@RestController\n\npublic class ApiController {\n    List&lt;ApiObject&gt;  apiDataList;   \n\n    @RequestMapping(value=\"/data\",produces={MediaType.APPLICATION_JSON_VALUE},method=RequestMethod.GET)\n    public ResponseEntity&lt;List&lt;ApiObject&gt;&gt; getData(){                                       \n        List&lt;ApiObject&gt; apiDataList=getApiData();\n        return new ResponseEntity&lt;List&lt;ApiObject&gt;&gt;(apiDataList,HttpStatus.OK);\n    }\n    @ResponseBody \n    @Async  \n    public List&lt;ApiObject&gt;  getApiData(){\n        List&lt;ApiObject&gt;  apiDataList3=new List&lt;ApiObject&gt; ();\n        //do the processing\n        return apiDataList3;\n    }\n}\n</code></pre>\n\n<p>So now I wanted to set a ratelimit for each user. Say every user can only request 5 request per minute or something like that. How to set the rate limit for each user to make only 5 api calls per minute and if a user requests more than that I can send a 429 response back? Do we need thier IP Address?</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["java","csv","file","jar","java.util.scanner"],"comments":[{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":0,"creation_date":1680582069,"post_id":75925479,"comment_id":133918335,"body_markdown":"What&#39;s the code?","body":"What&#39;s the code?"},{"owner":{"account_id":19603747,"reputation":11,"user_id":14347937,"display_name":"Edwin Ryerson"},"score":0,"creation_date":1680582175,"post_id":75925479,"comment_id":133918346,"body_markdown":"@Erwin ```public class Main {\n    private final static String root = &quot;src/main/&quot;;\n    public static void main(String[] args) throws IOException {\n        String[] dirs = {root + &quot;books.csv&quot;, root + &quot;teacher.csv&quot;, root + &quot;users.csv&quot;};\n        Library library = new Library(dirs); // libary instance\n\n        new HomePage(library); // open GUI\n    }\n}```","body":"@Erwin <code>public class Main {     private final static String root = &quot;src&#47;main&#47;&quot;;     public static void main(String[] args) throws IOException {         String[] dirs = {root + &quot;books.csv&quot;, root + &quot;teacher.csv&quot;, root + &quot;users.csv&quot;};         Library library = new Library(dirs); &#47;&#47; libary instance          new HomePage(library); &#47;&#47; open GUI     } }</code>"},{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":0,"creation_date":1680582249,"post_id":75925479,"comment_id":133918354,"body_markdown":"put it in the question, I can&#39;t see it like this","body":"put it in the question, I can&#39;t see it like this"},{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":0,"creation_date":1680582474,"post_id":75925479,"comment_id":133918380,"body_markdown":"what is the line that caused the error? `at main.Library.loadScanner(Library.java:98)`","body":"what is the line that caused the error? <code>at main.Library.loadScanner(Library.java:98)</code>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1680582612,"post_id":75925479,"comment_id":133918390,"body_markdown":"At runtime you do not have a src/main folder. Use Class.getRessource() to load the file, if it is in the classpath","body":"At runtime you do not have a src/main folder. Use Class.getRessource() to load the file, if it is in the classpath"},{"owner":{"account_id":19603747,"reputation":11,"user_id":14347937,"display_name":"Edwin Ryerson"},"score":0,"creation_date":1680582697,"post_id":75925479,"comment_id":133918401,"body_markdown":"@Jens How do I fix that?","body":"@Jens How do I fix that?"},{"owner":{"account_id":19603747,"reputation":11,"user_id":14347937,"display_name":"Edwin Ryerson"},"score":0,"creation_date":1680583172,"post_id":75925479,"comment_id":133918458,"body_markdown":"@Jens I am unfamiliar with Class.getResource(). How would I use it in my main class?","body":"@Jens I am unfamiliar with Class.getResource(). How would I use it in my main class?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1680585256,"post_id":75925479,"comment_id":133918703,"body_markdown":"Does this answer your question? [Reading a resource file from within jar](https://stackoverflow.com/questions/20389255/reading-a-resource-file-from-within-jar)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/20389255/reading-a-resource-file-from-within-jar\">Reading a resource file from within jar</a>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1680590184,"post_id":75925479,"comment_id":133919400,"body_markdown":"@Edwin Ryerson, First decide what you want to achieve? (a) Jar reads a book.csv file placed in a certain directory (b) Jar reads a book.csv file placed in the same directory as Jar (c ) Jar reads a book.csv file inside the Jar.","body":"@Edwin Ryerson, First decide what you want to achieve? (a) Jar reads a book.csv file placed in a certain directory (b) Jar reads a book.csv file placed in the same directory as Jar (c ) Jar reads a book.csv file inside the Jar."}],"owner":{"account_id":19603747,"reputation":11,"user_id":14347937,"display_name":"Edwin Ryerson"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1680582600,"creation_date":1680581828,"question_id":75925479,"body_markdown":"My jar file won&#39;t run. It gives an error in reference to a file that is in the main package.\r\n\r\njava -jar IA.jar\r\n\r\n```\r\nfile not found\r\njava.io.FileNotFoundException: src/main/books.csv (No such file or directory)\r\n\tat java.base/java.io.FileInputStream.open0(Native Method)\r\n\tat java.base/java.io.FileInputStream.open(FileInputStream.java:219)\r\n\tat java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:158)\r\n\tat java.base/java.util.Scanner.&lt;init&gt;(Scanner.java:641)\r\n\tat main.Library.loadScanner(Library.java:98)\r\n\tat main.Library.loadBooks(Library.java:119)\r\n\tat main.Library.&lt;init&gt;(Library.java:25)\r\n\tat main.Main.main(Main.java:17)\r\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.util.Scanner.hasNext()&quot; because &quot;scanner&quot; is null\r\n\tat main.Library.loadScanner(Library.java:107)\r\n\tat main.Library.loadBooks(Library.java:119)\r\n\tat main.Library.&lt;init&gt;(Library.java:25)\r\n\tat main.Main.main(Main.java:17)\r\n```\r\n\r\nThe main class looks like this:\r\n```\r\npublic class Main {\r\n    private final static String root = &quot;src/main/&quot;;\r\n    public static void main(String[] args) throws IOException {\r\n        String[] dirs = {root + &quot;books.csv&quot;, root + &quot;teacher.csv&quot;, root + &quot;users.csv&quot;};\r\n        Library library = new Library(dirs); // libary instance\r\n\r\n        new HomePage(library); // open GUI\r\n    }\r\n}\r\n```\r\n\r\nThe library method loadScanner() is used to open the .csv files which act as a sort of dummy database.\r\n```\r\nprivate ArrayList&lt;String[]&gt; loadScanner(String dir) {\r\n        File myFile1 = new File(dir);\r\n        Scanner scanner = null;\r\n        try {\r\n            scanner = new Scanner(myFile1);\r\n            scanner.useDelimiter(&quot;,&quot;);\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;file not found&quot;);\r\n            e.printStackTrace();\r\n        }\r\n\r\n        ArrayList&lt;String[]&gt; data = new ArrayList&lt;&gt;();\r\n\r\n        while (scanner.hasNext()) {\r\n\r\n            String line = scanner.next();\r\n\r\n            String[] r = line.trim().split(&quot;,&quot;);\r\n            data.add(r);\r\n        }\r\n        return data;\r\n    }\r\n```","title":"When I run my jar file, it doesn&#39;t work because it can&#39;t find books.csv, but it exists at the specified source","body":"<p>My jar file won't run. It gives an error in reference to a file that is in the main package.</p>\n<p>java -jar IA.jar</p>\n<pre><code>file not found\njava.io.FileNotFoundException: src/main/books.csv (No such file or directory)\n    at java.base/java.io.FileInputStream.open0(Native Method)\n    at java.base/java.io.FileInputStream.open(FileInputStream.java:219)\n    at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:158)\n    at java.base/java.util.Scanner.&lt;init&gt;(Scanner.java:641)\n    at main.Library.loadScanner(Library.java:98)\n    at main.Library.loadBooks(Library.java:119)\n    at main.Library.&lt;init&gt;(Library.java:25)\n    at main.Main.main(Main.java:17)\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.util.Scanner.hasNext()&quot; because &quot;scanner&quot; is null\n    at main.Library.loadScanner(Library.java:107)\n    at main.Library.loadBooks(Library.java:119)\n    at main.Library.&lt;init&gt;(Library.java:25)\n    at main.Main.main(Main.java:17)\n</code></pre>\n<p>The main class looks like this:</p>\n<pre><code>public class Main {\n    private final static String root = &quot;src/main/&quot;;\n    public static void main(String[] args) throws IOException {\n        String[] dirs = {root + &quot;books.csv&quot;, root + &quot;teacher.csv&quot;, root + &quot;users.csv&quot;};\n        Library library = new Library(dirs); // libary instance\n\n        new HomePage(library); // open GUI\n    }\n}\n</code></pre>\n<p>The library method loadScanner() is used to open the .csv files which act as a sort of dummy database.</p>\n<pre><code>private ArrayList&lt;String[]&gt; loadScanner(String dir) {\n        File myFile1 = new File(dir);\n        Scanner scanner = null;\n        try {\n            scanner = new Scanner(myFile1);\n            scanner.useDelimiter(&quot;,&quot;);\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;file not found&quot;);\n            e.printStackTrace();\n        }\n\n        ArrayList&lt;String[]&gt; data = new ArrayList&lt;&gt;();\n\n        while (scanner.hasNext()) {\n\n            String line = scanner.next();\n\n            String[] r = line.trim().split(&quot;,&quot;);\n            data.add(r);\n        }\n        return data;\n    }\n</code></pre>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch","elasticsearch-opendistro"],"answers":[{"tags":[],"owner":{"account_id":12210699,"reputation":694,"user_id":8912565,"display_name":"Ravik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680582287,"creation_date":1680582287,"answer_id":75925506,"question_id":75819427,"body_markdown":"Finally after doing more research I found the [documentation link][1] on elastic search. We can execute parameterised queries in the below format:\r\n\r\n     POST /_sql?format=txt\r\n    {\r\n    \t&quot;query&quot;: &quot;SELECT * FROM employee WHERE name= ?&quot;,\r\n    \t&quot;params&quot;: [&quot;Frank Herbert&quot;]\r\n    }\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/7.17/sql-rest-params.html","title":"How to execute parameterized SQL with OpenDistro","body":"<p>Finally after doing more research I found the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/sql-rest-params.html\" rel=\"nofollow noreferrer\">documentation link</a> on elastic search. We can execute parameterised queries in the below format:</p>\n<pre><code> POST /_sql?format=txt\n{\n    &quot;query&quot;: &quot;SELECT * FROM employee WHERE name= ?&quot;,\n    &quot;params&quot;: [&quot;Frank Herbert&quot;]\n}\n</code></pre>\n"}],"owner":{"account_id":12210699,"reputation":694,"user_id":8912565,"display_name":"Ravik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75925506,"answer_count":1,"score":0,"last_activity_date":1680582287,"creation_date":1679548082,"question_id":75819427,"body_markdown":"We are using OpenDistro with elastic search. Before executing the query it is compiled and translated in DSL format. Currently we are passing static SQL queries and each query is compiled before execution.\r\n\r\nLet us take an example \r\nSQL:`Select * from employee where name=&#39;abc&#39;;`\r\n\r\nThis query is executed multiple times with only name being different for each execution. \r\n\r\nWould like to know if there is a way we can execute query like:\r\n`select * from employee where name=?`\r\nand `?` is replaced with a parameter at runtime. \r\n\r\nThis will result in compiling the query only once and only parameter will be replaced during execution.\r\n\r\nI looked at the documentation of opendistro but could not find any example of this.","title":"How to execute parameterized SQL with OpenDistro","body":"<p>We are using OpenDistro with elastic search. Before executing the query it is compiled and translated in DSL format. Currently we are passing static SQL queries and each query is compiled before execution.</p>\n<p>Let us take an example\nSQL:<code>Select * from employee where name='abc';</code></p>\n<p>This query is executed multiple times with only name being different for each execution.</p>\n<p>Would like to know if there is a way we can execute query like:\n<code>select * from employee where name=?</code>\nand <code>?</code> is replaced with a parameter at runtime.</p>\n<p>This will result in compiling the query only once and only parameter will be replaced during execution.</p>\n<p>I looked at the documentation of opendistro but could not find any example of this.</p>\n"},{"tags":["java","amazon-s3","java-8","aws-sdk","aws-sdk-java-2.0"],"answers":[{"comments":[{"owner":{"account_id":5283587,"reputation":811,"user_id":4218216,"display_name":"Arnav Bose"},"score":0,"creation_date":1680709261,"post_id":75925497,"comment_id":133945067,"body_markdown":"This works. I have updated the transfer manager as well, using the new package and pom entry.","body":"This works. I have updated the transfer manager as well, using the new package and pom entry."}],"tags":[],"owner":{"account_id":7501162,"reputation":820,"user_id":5699459,"accept_rate":50,"display_name":"Michael"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1680582107,"creation_date":1680582107,"answer_id":75925497,"question_id":75881298,"body_markdown":"The equivalent is something like below.\r\n\r\nThe transfer manager is in a separate maven package `software.amazon.awssdk.transfer.s3.S3TransferManager`.\r\n\r\nIn the 1.x SDK a lot of classes were `AWS*`, in 2.x it&#39;s now `Aws*` which is sometimes annoyingly subtle.\r\n\r\n```java\r\npublic S3AsyncClient getS3Client(final String s3AK, final String s3SK, final String s3Url, String region) throws Exception {\r\n    AwsCredentials creds = AwsBasicCredentials.create(EncryptDecryptUtils.decrypt(s3AK), EncryptDecryptUtils.decrypt(s3SK));\r\n    AwsCredentialsProvider provider = StaticCredentialsProvider.create(creds);\r\n\r\n    S3EndpointParams endpointParams = S3EndpointParams.builder()\r\n        .endpoint(s3Url)\r\n        .region(Region.of(region))\r\n        // path style access is done by default if the url is not a\r\n        // virtual host IIRC, if not you can force path style with\r\n        // .forcePathStyle(true) // I think you only need this once here or in the client\r\n        .build();\r\n\r\n    Endpoint endpoint = S3EndpointProvider\r\n        .defaultProvider()\r\n        .resolveEndpoint(endpointParams.build()).join();\r\n\r\n    S3AsyncClient s3Client = S3AsyncClient\r\n        .builder()\r\n        .credentialsProvider(awsCreds)\r\n        .endpointOverride(endpoint.url())\r\n        // path style access is done by default if the url is not a\r\n        // virtual host IIRC, if not you can force path style with\r\n        // .forcePathStyle(true) // I think you only need this once here or in the params\r\n        .build();\r\n    return s3Client;\r\n}\r\n```","title":"S3 Client Creation with AWS SDK for Java 2.X","body":"<p>The equivalent is something like below.</p>\n<p>The transfer manager is in a separate maven package <code>software.amazon.awssdk.transfer.s3.S3TransferManager</code>.</p>\n<p>In the 1.x SDK a lot of classes were <code>AWS*</code>, in 2.x it's now <code>Aws*</code> which is sometimes annoyingly subtle.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public S3AsyncClient getS3Client(final String s3AK, final String s3SK, final String s3Url, String region) throws Exception {\n    AwsCredentials creds = AwsBasicCredentials.create(EncryptDecryptUtils.decrypt(s3AK), EncryptDecryptUtils.decrypt(s3SK));\n    AwsCredentialsProvider provider = StaticCredentialsProvider.create(creds);\n\n    S3EndpointParams endpointParams = S3EndpointParams.builder()\n        .endpoint(s3Url)\n        .region(Region.of(region))\n        // path style access is done by default if the url is not a\n        // virtual host IIRC, if not you can force path style with\n        // .forcePathStyle(true) // I think you only need this once here or in the client\n        .build();\n\n    Endpoint endpoint = S3EndpointProvider\n        .defaultProvider()\n        .resolveEndpoint(endpointParams.build()).join();\n\n    S3AsyncClient s3Client = S3AsyncClient\n        .builder()\n        .credentialsProvider(awsCreds)\n        .endpointOverride(endpoint.url())\n        // path style access is done by default if the url is not a\n        // virtual host IIRC, if not you can force path style with\n        // .forcePathStyle(true) // I think you only need this once here or in the params\n        .build();\n    return s3Client;\n}\n</code></pre>\n"}],"owner":{"account_id":5283587,"reputation":811,"user_id":4218216,"display_name":"Arnav Bose"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1976,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75925497,"answer_count":1,"score":0,"last_activity_date":1680582107,"creation_date":1680117338,"question_id":75881298,"body_markdown":"I have an existing functionality where I create S3 client object from encrypted credentials and region in AWS SDK version 1.12.435. Now, I have to upgrade the entire code base to AWS SDK for Java 2 version(2.20.32). I am not seeing an equivalent class for the client credential or transfer manager. Following is my S3 client object creation function in version 1.X\r\n\r\n```\r\npublic AmazonS3 getS3Client(final String s3AK, final String s3SK, final String s3Url, String region) throws Exception {\t\t\t\r\n\t\tAWSStaticCredentialsProvider credentialsProvider = new AWSStaticCredentialsProvider(new BasicAWSCredentials(EncryptDecryptUtils.decrypt(s3AK), EncryptDecryptUtils.decrypt(s3SK)));\t\r\n\t\tAmazonS3 s3Client = AmazonS3ClientBuilder.standard().withPathStyleAccessEnabled(true).withCredentials(credentialsProvider).withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration(s3Url, region)).build();\t\t\r\n\t\treturn s3Client;\r\n}\r\n``` \r\nLet me know how I could replace this way of S3 client creation to an equivalent way in AWS SDK for java 2.X","title":"S3 Client Creation with AWS SDK for Java 2.X","body":"<p>I have an existing functionality where I create S3 client object from encrypted credentials and region in AWS SDK version 1.12.435. Now, I have to upgrade the entire code base to AWS SDK for Java 2 version(2.20.32). I am not seeing an equivalent class for the client credential or transfer manager. Following is my S3 client object creation function in version 1.X</p>\n<pre><code>public AmazonS3 getS3Client(final String s3AK, final String s3SK, final String s3Url, String region) throws Exception {         \n        AWSStaticCredentialsProvider credentialsProvider = new AWSStaticCredentialsProvider(new BasicAWSCredentials(EncryptDecryptUtils.decrypt(s3AK), EncryptDecryptUtils.decrypt(s3SK))); \n        AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withPathStyleAccessEnabled(true).withCredentials(credentialsProvider).withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration(s3Url, region)).build();        \n        return s3Client;\n}\n</code></pre>\n<p>Let me know how I could replace this way of S3 client creation to an equivalent way in AWS SDK for java 2.X</p>\n"},{"tags":["java","java.util.logging","system.out"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1680507459,"post_id":75916976,"comment_id":133904010,"body_markdown":"https://logging.apache.org/log4j/2.x/manual/layouts.html","body":"<a href=\"https://logging.apache.org/log4j/2.x/manual/layouts.html\" rel=\"nofollow noreferrer\">logging.apache.org/log4j/2.x/manual/layouts.html</a>"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1680507515,"post_id":75916976,"comment_id":133904027,"body_markdown":"&quot;Better&quot; for what?","body":"&quot;Better&quot; for what?"},{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":1,"creation_date":1680507525,"post_id":75916976,"comment_id":133904028,"body_markdown":"maybe [this](https://stackoverflow.com/questions/2750346/logger-vs-system-out-println) helps","body":"maybe <a href=\"https://stackoverflow.com/questions/2750346/logger-vs-system-out-println\">this</a> helps"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1680507823,"post_id":75916976,"comment_id":133904099,"body_markdown":"Why do you think that using standard out is bad practice?","body":"Why do you think that using standard out is bad practice?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1680507885,"post_id":75916976,"comment_id":133904114,"body_markdown":"And why not `System.err` for error messages?","body":"And why not <code>System.err</code> for error messages?"},{"owner":{"account_id":20906298,"reputation":332,"user_id":15358155,"display_name":"chameerar"},"score":0,"creation_date":1680508964,"post_id":75916976,"comment_id":133904344,"body_markdown":"@FedericoklezCulloca Better for displaying response message to the user?","body":"@FedericoklezCulloca Better for displaying response message to the user?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1680511397,"post_id":75916976,"comment_id":133904857,"body_markdown":"Response messages are not logs. In this case printing to stdout is the correct thing to do.","body":"Response messages are not logs. In this case printing to stdout is the correct thing to do."}],"answers":[{"tags":[],"owner":{"account_id":27868102,"reputation":34,"user_id":21279235,"display_name":"LQF-developer"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1680508230,"creation_date":1680508230,"answer_id":75917130,"question_id":75916976,"body_markdown":"If you just want to output some information in the commond line ,you can simply use `sout`. But if you want to display prompt information at different levels, `logger` is better. In enterprise development, we only use `log.info() log.err()` Using too much `sout` will make code redundant. But you said it&#39;s just a command line java application, so I think both is ok.","title":"Logger or System.out to show responses of a command line java app","body":"<p>If you just want to output some information in the commond line ,you can simply use <code>sout</code>. But if you want to display prompt information at different levels, <code>logger</code> is better. In enterprise development, we only use <code>log.info() log.err()</code> Using too much <code>sout</code> will make code redundant. But you said it's just a command line java application, so I think both is ok.</p>\n"}],"owner":{"account_id":20906298,"reputation":332,"user_id":15358155,"display_name":"chameerar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680581739,"creation_date":1680507089,"question_id":75916976,"body_markdown":"I am writing a command line java application for a task of converting the content of a file to a json file. In here I want to get the response whether the operation is successful or not printed in the command line. For this I have two options,\r\n\r\n1. To use System.out.println (sout)\r\n2. To use a logger (eg:- java.util.logging.Logger)\r\n\r\nI find the response shown in command line when using `sout` is more clear since it does not show texts related to logging (as an example INFO: My response message).\r\n\r\nOn the other hand I got to know that using `sout` is not a good practice (See Sonar rule [java:s106][1]).\r\n\r\nI want to know which way is better and why?\r\n\r\nHere is my code in the main method with the logger approach.\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n\r\n        try {\r\n            Executor executor = ExecutorFactory.getExecutor(args);\r\n            executor.execute();\r\n        } catch (ExecutorException e) {\r\n            logger.log(Level.INFO, e.getMessage());\r\n        }\r\n    }\r\n```\r\n\r\nLet&#39;s say `e.getMessage()` gives &quot;No matching file found&quot; as the result.\r\n\r\nThis is what I get as the response in the command line.\r\n\r\n```\r\nINFO: No matching file found\r\n```\r\n\r\nI would like it to be more clean. This is what I expect.\r\n\r\n```\r\nNo matching file found\r\n```\r\n\r\nShould I use `sout` for this purpose or is there another way?\r\n\r\n\r\n  [1]: https://rules.sonarsource.com/java/RSPEC-106","title":"Logger or System.out to show responses of a command line java app","body":"<p>I am writing a command line java application for a task of converting the content of a file to a json file. In here I want to get the response whether the operation is successful or not printed in the command line. For this I have two options,</p>\n<ol>\n<li>To use System.out.println (sout)</li>\n<li>To use a logger (eg:- java.util.logging.Logger)</li>\n</ol>\n<p>I find the response shown in command line when using <code>sout</code> is more clear since it does not show texts related to logging (as an example INFO: My response message).</p>\n<p>On the other hand I got to know that using <code>sout</code> is not a good practice (See Sonar rule <a href=\"https://rules.sonarsource.com/java/RSPEC-106\" rel=\"nofollow noreferrer\">java:s106</a>).</p>\n<p>I want to know which way is better and why?</p>\n<p>Here is my code in the main method with the logger approach.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n\n        try {\n            Executor executor = ExecutorFactory.getExecutor(args);\n            executor.execute();\n        } catch (ExecutorException e) {\n            logger.log(Level.INFO, e.getMessage());\n        }\n    }\n</code></pre>\n<p>Let's say <code>e.getMessage()</code> gives &quot;No matching file found&quot; as the result.</p>\n<p>This is what I get as the response in the command line.</p>\n<pre><code>INFO: No matching file found\n</code></pre>\n<p>I would like it to be more clean. This is what I expect.</p>\n<pre><code>No matching file found\n</code></pre>\n<p>Should I use <code>sout</code> for this purpose or is there another way?</p>\n"},{"tags":["java","hibernate"],"owner":{"account_id":28203678,"reputation":1,"user_id":21557110,"display_name":"sumit_sourav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680581438,"creation_date":1680580280,"question_id":75925386,"body_markdown":"I keep getting this error when trying to send SMTP emails using spring boot.\r\norg.springframework.mail.MailSendException:\r\n\r\nFailed messages: javax.mail.MessagingException: can&#39;t determine local email address; message exception details (1) are:\r\nFailed message 1:\r\njavax.mail.MessagingException: **can&#39;t determine local email address**\r\n\r\n\r\napplication.properties:\r\n```\r\n#email configuration\r\nspring.mail.host=smtp.gmail.com\r\nspring.mail.port=587\r\nspring.mail.username=***********@gmail.com\r\nspring.mail.password=***************\r\nspring.mail.properties.mail.smtp.auth=true\r\nspring.mail.properties.mail.smtp.starttls.enable=true\r\n```\r\n\r\n[Implementation file](https://i.stack.imgur.com/S57AM.png)\r\n\r\ncontroller layer called **Leadcontroller.java**\r\n```\r\n@RequestMapping(&quot;/saveLead&quot;)\r\npublic String saveLead(Lead lead, ModelMap model) {\r\n\tleadService.saveLead(lead);\r\n\temailService.sendEmail(lead.getEmail(), &quot;Test&quot;, &quot;Welcome&quot;);\r\n\tmodel.addAttribute(&quot;msg&quot;, &quot;Record is saved!&quot;);\r\n\treturn &quot;create_lead&quot; ;\r\n}\r\n```\r\n\r\nError from console:\r\n```\r\n2023-04-03 19:42:10.359 ERROR 8904 --- [nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.mail.MailSendException: Failed messages: javax.mail.MessagingException: can&#39;t determine local email address; message exceptions (1) are:\r\nFailed message 1: javax.mail.MessagingException: can&#39;t determine local email address] with root cause\r\n\r\norg.springframework.mail.MailSendException: Failed messages: javax.mail.MessagingException: can&#39;t determine local email address\r\n\tat org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:491) ~[spring-context-support-5.3.25.jar:5.3.25]\r\n\tat org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:323) ~[spring-context-support-5.3.25.jar:5.3.25]\r\n\tat org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:312) ~[spring-context-support-5.3.25.jar:5.3.25]\r\n\tat com.marketingapp6.utility.EmailServiceImpl.sendEmail(EmailServiceImpl.java:21) ~[classes/:na]\r\n\tat com.marketingapp6.controller.LeadController.saveLead(LeadController.java:37) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.71.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.25.jar:5.3.25]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.71.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\r\n\tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n```\r\n\r\n\r\n\r\nI m unable to find any error in my code. I don&#39;t where I am going wrong. Please help me","title":"Failed message 1: javax.mail.MessagingException: can&#39;t determine local email address] with root cause","body":"<p>I keep getting this error when trying to send SMTP emails using spring boot.\norg.springframework.mail.MailSendException:</p>\n<p>Failed messages: javax.mail.MessagingException: can't determine local email address; message exception details (1) are:\nFailed message 1:\njavax.mail.MessagingException: <strong>can't determine local email address</strong></p>\n<p>application.properties:</p>\n<pre><code>#email configuration\nspring.mail.host=smtp.gmail.com\nspring.mail.port=587\nspring.mail.username=***********@gmail.com\nspring.mail.password=***************\nspring.mail.properties.mail.smtp.auth=true\nspring.mail.properties.mail.smtp.starttls.enable=true\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/S57AM.png\" rel=\"nofollow noreferrer\">Implementation file</a></p>\n<p>controller layer called <strong>Leadcontroller.java</strong></p>\n<pre><code>@RequestMapping(&quot;/saveLead&quot;)\npublic String saveLead(Lead lead, ModelMap model) {\n    leadService.saveLead(lead);\n    emailService.sendEmail(lead.getEmail(), &quot;Test&quot;, &quot;Welcome&quot;);\n    model.addAttribute(&quot;msg&quot;, &quot;Record is saved!&quot;);\n    return &quot;create_lead&quot; ;\n}\n</code></pre>\n<p>Error from console:</p>\n<pre><code>2023-04-03 19:42:10.359 ERROR 8904 --- [nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.mail.MailSendException: Failed messages: javax.mail.MessagingException: can't determine local email address; message exceptions (1) are:\nFailed message 1: javax.mail.MessagingException: can't determine local email address] with root cause\n\norg.springframework.mail.MailSendException: Failed messages: javax.mail.MessagingException: can't determine local email address\n    at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:491) ~[spring-context-support-5.3.25.jar:5.3.25]\n    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:323) ~[spring-context-support-5.3.25.jar:5.3.25]\n    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:312) ~[spring-context-support-5.3.25.jar:5.3.25]\n    at com.marketingapp6.utility.EmailServiceImpl.sendEmail(EmailServiceImpl.java:21) ~[classes/:na]\n    at com.marketingapp6.controller.LeadController.saveLead(LeadController.java:37) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.71.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.25.jar:5.3.25]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.71.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.25.jar:5.3.25]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.71.jar:9.0.71]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n</code></pre>\n<p>I m unable to find any error in my code. I don't where I am going wrong. Please help me</p>\n"},{"tags":["java","string","math","calculator","evaluate"],"comments":[{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":1,"creation_date":1680536552,"post_id":75921282,"comment_id":133911265,"body_markdown":"You will need to add logic to your parser to identify the `%` operator and convert the number in front of it to a decimal value. On a side note, I recommend that you create a named class whether than using an anonymous class with `new Object{...}`.","body":"You will need to add logic to your parser to identify the <code>%</code> operator and convert the number in front of it to a decimal value. On a side note, I recommend that you create a named class whether than using an anonymous class with <code>new Object{...}</code>."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":3,"creation_date":1680536696,"post_id":75921282,"comment_id":133911312,"body_markdown":"You need to extend the `while ((ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) || ch == &#39;.&#39;)` loop in `parseFactor()` to also accept the `%` character. Then you need to do some manual conversion if `str.substring(startPos, this.pos)` contains that character.","body":"You need to extend the <code>while ((ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) || ch == &#39;.&#39;)</code> loop in <code>parseFactor()</code> to also accept the <code>%</code> character. Then you need to do some manual conversion if <code>str.substring(startPos, this.pos)</code> contains that character."},{"owner":{"account_id":21160156,"reputation":175,"user_id":15558580,"display_name":"Zeninツ"},"score":0,"creation_date":1680537422,"post_id":75921282,"comment_id":133911491,"body_markdown":"Yup, @f1sh this helped me to solve it, thanks! :)","body":"Yup, @f1sh this helped me to solve it, thanks! :)"}],"answers":[{"tags":[],"owner":{"account_id":21160156,"reputation":175,"user_id":15558580,"display_name":"Zeninツ"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1680537526,"creation_date":1680537526,"answer_id":75921452,"question_id":75921282,"body_markdown":"The code to handle % in the expresion, would be a simple modification like in the metoth parseFactor() change it to \r\n\r\n        // M&#233;todo para evaluar los factores\r\n        double parseFactor() {\r\n            double x;\r\n            int startPos = this.pos;\r\n            if (eat(&#39;+&#39;))\r\n                return +parseFactor(); // m&#225;s unario\r\n            if (eat(&#39;-&#39;))\r\n                return -parseFactor(); // menos unario\r\n            while ((ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) || ch == &#39;.&#39; || ch == &#39;%&#39;)\r\n                nextChar();\r\n            // Esto para que funcione con los %\r\n            if (str.substring(startPos, this.pos).contains(&quot;%&quot;))\r\n                x = Double.parseDouble(str.substring(startPos, this.pos).replace(&quot;%&quot;, &quot;&quot;)) / 100;\r\n            else\r\n                x = Double.parseDouble(str.substring(startPos, this.pos));\r\n\r\n            return x;\r\n        }\r\n:)","title":"Evaluate math expressions that have percentages","body":"<p>The code to handle % in the expresion, would be a simple modification like in the metoth parseFactor() change it to</p>\n<pre><code>    // Método para evaluar los factores\n    double parseFactor() {\n        double x;\n        int startPos = this.pos;\n        if (eat('+'))\n            return +parseFactor(); // más unario\n        if (eat('-'))\n            return -parseFactor(); // menos unario\n        while ((ch &gt;= '0' &amp;&amp; ch &lt;= '9') || ch == '.' || ch == '%')\n            nextChar();\n        // Esto para que funcione con los %\n        if (str.substring(startPos, this.pos).contains(&quot;%&quot;))\n            x = Double.parseDouble(str.substring(startPos, this.pos).replace(&quot;%&quot;, &quot;&quot;)) / 100;\n        else\n            x = Double.parseDouble(str.substring(startPos, this.pos));\n\n        return x;\n    }\n</code></pre>\n<p>:)</p>\n"}],"owner":{"account_id":21160156,"reputation":175,"user_id":15558580,"display_name":"Zeninツ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75921452,"answer_count":1,"score":1,"last_activity_date":1680579206,"creation_date":1680536372,"question_id":75921282,"body_markdown":"I am making a Java calculator with graphic interface and have been looking for a function that evaluates a math expression from a string. I found https://stackoverflow.com/questions/3422673/how-to-evaluate-a-math-expression-given-in-string-form. After simplifying it, because my calculator is not that complex, I ended up with this function:\r\n \r\n    // Esto es de StackOverflow, solo que quitando cosas que no se usaban\r\n    // https://stackoverflow.com/questions/3422673/how-to-evaluate-a-math-expression-given-in-string-form\r\n    public double calcular() {\r\n    \r\n        // Obtener la expresi&#243;n matem&#225;tica como una cadena\r\n        String str = this.out.getText();\r\n    \r\n        // Crear un nuevo objeto an&#243;nimo para evaluar la expresi&#243;n\r\n        return new Object() {\r\n            int pos = -1, ch;\r\n    \r\n            // M&#233;todo para obtener el siguiente caracter de la cadena\r\n            void nextChar() {\r\n                ch = (++pos &lt; str.length()) ? str.charAt(pos) : -1;\r\n            }\r\n    \r\n            // M&#233;todo para verificar si el caracter actual coincide con el pasado por\r\n            // par&#225;metro\r\n            boolean eat(int charToEat) {\r\n                while (ch == &#39; &#39;)\r\n                    nextChar();\r\n                if (ch == charToEat) {\r\n                    nextChar();\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n    \r\n            // M&#233;todo principal para evaluar la expresi&#243;n\r\n            double parse() {\r\n                nextChar();\r\n                double x = parseExpression();\r\n                if (pos &lt; str.length())\r\n                    throw new RuntimeException(&quot;No esperado: &quot; + (char) ch);\r\n                return x;\r\n            }\r\n    \r\n            // M&#233;todo para evaluar la expresi&#243;n\r\n            double parseExpression() {\r\n                double x = parseTerm();\r\n                for (;;) {\r\n                    if (eat(&#39;+&#39;))\r\n                        x += parseTerm(); // suma\r\n                    else if (eat(&#39;-&#39;))\r\n                        x -= parseTerm(); // resta\r\n                    else\r\n                        return x;\r\n                }\r\n            }\r\n    \r\n            // M&#233;todo para evaluar los t&#233;rminos\r\n            double parseTerm() {\r\n                double x = parseFactor();\r\n                for (;;) {\r\n                    if (eat(&#39;*&#39;))\r\n                        x *= parseFactor(); // multiplicaci&#243;n\r\n                    else if (eat(&#39;/&#39;))\r\n                        x /= parseFactor(); // divisi&#243;n\r\n                    else\r\n                        return x;\r\n                }\r\n            }\r\n    \r\n            // M&#233;todo para evaluar los factores\r\n            double parseFactor() {\r\n                double x;\r\n                int startPos = this.pos;\r\n                if (eat(&#39;+&#39;))\r\n                    return +parseFactor(); // m&#225;s unario\r\n                if (eat(&#39;-&#39;))\r\n                    return -parseFactor(); // menos unario\r\n                while ((ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) || ch == &#39;.&#39;)\r\n                    nextChar();\r\n                x = Double.parseDouble(str.substring(startPos, this.pos));\r\n                return x;\r\n            }\r\n        }.parse();\r\n    }\r\n\r\nThis is how it triggers the function \r\n\r\n    boton_equ.setOnMouseClicked((event) -&gt; {\r\n        this.out.setText(String.valueOf(calcular()));\r\n    });\r\n\r\nI wanted to add a function that if the string is `(&quot;5*2%&quot;)` it show the result, meaning that it can process `%` symbols. How can I add this functionality to this code?","title":"Evaluate math expressions that have percentages","body":"<p>I am making a Java calculator with graphic interface and have been looking for a function that evaluates a math expression from a string. I found <a href=\"https://stackoverflow.com/questions/3422673/how-to-evaluate-a-math-expression-given-in-string-form\">How to evaluate a math expression given in string form?</a>. After simplifying it, because my calculator is not that complex, I ended up with this function:</p>\n<pre><code>// Esto es de StackOverflow, solo que quitando cosas que no se usaban\n// https://stackoverflow.com/questions/3422673/how-to-evaluate-a-math-expression-given-in-string-form\npublic double calcular() {\n\n    // Obtener la expresión matemática como una cadena\n    String str = this.out.getText();\n\n    // Crear un nuevo objeto anónimo para evaluar la expresión\n    return new Object() {\n        int pos = -1, ch;\n\n        // Método para obtener el siguiente caracter de la cadena\n        void nextChar() {\n            ch = (++pos &lt; str.length()) ? str.charAt(pos) : -1;\n        }\n\n        // Método para verificar si el caracter actual coincide con el pasado por\n        // parámetro\n        boolean eat(int charToEat) {\n            while (ch == ' ')\n                nextChar();\n            if (ch == charToEat) {\n                nextChar();\n                return true;\n            }\n            return false;\n        }\n\n        // Método principal para evaluar la expresión\n        double parse() {\n            nextChar();\n            double x = parseExpression();\n            if (pos &lt; str.length())\n                throw new RuntimeException(&quot;No esperado: &quot; + (char) ch);\n            return x;\n        }\n\n        // Método para evaluar la expresión\n        double parseExpression() {\n            double x = parseTerm();\n            for (;;) {\n                if (eat('+'))\n                    x += parseTerm(); // suma\n                else if (eat('-'))\n                    x -= parseTerm(); // resta\n                else\n                    return x;\n            }\n        }\n\n        // Método para evaluar los términos\n        double parseTerm() {\n            double x = parseFactor();\n            for (;;) {\n                if (eat('*'))\n                    x *= parseFactor(); // multiplicación\n                else if (eat('/'))\n                    x /= parseFactor(); // división\n                else\n                    return x;\n            }\n        }\n\n        // Método para evaluar los factores\n        double parseFactor() {\n            double x;\n            int startPos = this.pos;\n            if (eat('+'))\n                return +parseFactor(); // más unario\n            if (eat('-'))\n                return -parseFactor(); // menos unario\n            while ((ch &gt;= '0' &amp;&amp; ch &lt;= '9') || ch == '.')\n                nextChar();\n            x = Double.parseDouble(str.substring(startPos, this.pos));\n            return x;\n        }\n    }.parse();\n}\n</code></pre>\n<p>This is how it triggers the function</p>\n<pre><code>boton_equ.setOnMouseClicked((event) -&gt; {\n    this.out.setText(String.valueOf(calcular()));\n});\n</code></pre>\n<p>I wanted to add a function that if the string is <code>(&quot;5*2%&quot;)</code> it show the result, meaning that it can process <code>%</code> symbols. How can I add this functionality to this code?</p>\n"},{"tags":["java","sql","object-oriented-database"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1680578493,"post_id":75925248,"comment_id":133918019,"body_markdown":"First up, don&#39;t create 2 prepared statements; reuse the prepared statement. Also, this is highly unusual: `stmt.executeUpdate(CREATE_TABLE_SQL);` - rarely do schema changes live with CRUD code. Good luck with the job.","body":"First up, don&#39;t create 2 prepared statements; reuse the prepared statement. Also, this is highly unusual: <code>stmt.executeUpdate(CREATE_TABLE_SQL);</code> - rarely do schema changes live with CRUD code. Good luck with the job."},{"owner":{"account_id":21699949,"reputation":47,"user_id":16013265,"display_name":"Amazon King"},"score":0,"creation_date":1680579194,"post_id":75925248,"comment_id":133918076,"body_markdown":"yeah it worked after removing execute.","body":"yeah it worked after removing execute."}],"owner":{"account_id":21699949,"reputation":47,"user_id":16013265,"display_name":"Amazon King"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680578169,"creation_date":1680578169,"question_id":75925248,"body_markdown":"The given question ask me to complete the code to insert two rows in the given table as shown in the image. Some part of code is already given in question which I can&#39;t edit and some part of code is hidden and I just have to write the code segment to insert the data. \r\n\r\n\r\nSo , tried below code\r\n```\r\nstmt.executeUpdate(CREATE_TABLE_SQL);\r\nPreparedStatement preparedStmt = conn.prepareStatement(&quot;insert into Players values(?,?,?,?)&quot;);\r\n      preparedStmt.setInt (1, 1);\r\n      preparedStmt.setString (2, &quot;Ram&quot;);\r\n      preparedStmt.setString (3, &quot;Gopal&quot;);\r\n      preparedStmt.setInt(4, 26);\r\n\r\n      int x= preparedStmt.executeUpdate();\r\n          \r\n      PreparedStatement preparedStmt2 = conn.prepareStatement(&quot;insert into Players values(?,?,?,?)&quot;);\r\n\r\n      preparedStmt2.setInt (1, 2);\r\n      preparedStmt2.setString (2, &quot;John&quot;);\r\n      preparedStmt2.setString (3, &quot;Mayer&quot;);\r\n      preparedStmt2.setInt(4, 22);\r\n\r\n           int y= preparedStmt2.executeUpdate();\r\n```\r\nThis code is passing private cases and its shown wrong answer in private case. I can&#39;t figure out where is the mistake. [![MY attempt along with question](https://i.stack.imgur.com/dIR99.jpg)](https://i.stack.imgur.com/dIR99.jpg) \r\nI want to pass private test case.","title":"Complete the code segment to insert the following data using prepared statement in the existing table ‘PLAYERS’","body":"<p>The given question ask me to complete the code to insert two rows in the given table as shown in the image. Some part of code is already given in question which I can't edit and some part of code is hidden and I just have to write the code segment to insert the data.</p>\n<p>So , tried below code</p>\n<pre><code>stmt.executeUpdate(CREATE_TABLE_SQL);\nPreparedStatement preparedStmt = conn.prepareStatement(&quot;insert into Players values(?,?,?,?)&quot;);\n      preparedStmt.setInt (1, 1);\n      preparedStmt.setString (2, &quot;Ram&quot;);\n      preparedStmt.setString (3, &quot;Gopal&quot;);\n      preparedStmt.setInt(4, 26);\n\n      int x= preparedStmt.executeUpdate();\n          \n      PreparedStatement preparedStmt2 = conn.prepareStatement(&quot;insert into Players values(?,?,?,?)&quot;);\n\n      preparedStmt2.setInt (1, 2);\n      preparedStmt2.setString (2, &quot;John&quot;);\n      preparedStmt2.setString (3, &quot;Mayer&quot;);\n      preparedStmt2.setInt(4, 22);\n\n           int y= preparedStmt2.executeUpdate();\n</code></pre>\n<p>This code is passing private cases and its shown wrong answer in private case. I can't figure out where is the mistake. <a href=\"https://i.stack.imgur.com/dIR99.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dIR99.jpg\" alt=\"MY attempt along with question\" /></a>\nI want to pass private test case.</p>\n"},{"tags":["java","spring-boot","rest","kotlin","web-services"],"answers":[{"comments":[{"owner":{"account_id":13722742,"reputation":16988,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1680633601,"post_id":75925226,"comment_id":133930467,"body_markdown":"And not just any `ResponseEntity`, but specifically `ResponseEntity&lt;Unit&gt;` — wrapping the type that explicitly means ‘no useful value’. It&#39;s no wonder that frameworks (and people!) would assume you don&#39;t want anything in the response.","body":"And not just any <code>ResponseEntity</code>, but specifically <code>ResponseEntity&lt;Unit&gt;</code> — wrapping the type that explicitly means ‘no useful value’. It&#39;s no wonder that frameworks (and people!) would assume you don&#39;t want anything in the response."}],"tags":[],"owner":{"account_id":4343593,"reputation":51,"user_id":3546221,"display_name":"user3546221"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680577772,"creation_date":1680577772,"answer_id":75925226,"question_id":75925147,"body_markdown":"Looks like the issue is due to return type of API interface method. You are returning &quot;ResponseEntity&lt;Unit&gt;&quot;, can you change the return type to the expected type and check if that fixes the issue","title":"Springboot API returns null response","body":"<p>Looks like the issue is due to return type of API interface method. You are returning &quot;ResponseEntity&quot;, can you change the return type to the expected type and check if that fixes the issue</p>\n"}],"owner":{"account_id":5137567,"reputation":139,"user_id":5283728,"accept_rate":43,"display_name":"user4974500"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75925226,"answer_count":1,"score":0,"last_activity_date":1680577772,"creation_date":1680576441,"question_id":75925147,"body_markdown":"This API works fine; I can see it hits the server and returns 200. But the response captured in the client code is null. I have checked the response via postman and I can see the status code. Not Sure why client is not able to decode the response  \r\n\r\n\r\n \r\n\r\n    @Bean\r\n            fun buildClient(\r\n                objectMapper: ObjectMapper,\r\n                @Value(&quot;\\${cbase-uri}&quot;) url: String\r\n            ): Client {\r\n                return FeignApiBuilder.builder(Client::class.java, url) { it }\r\n                    .build()\r\n            }\r\n        \r\n         \r\n               \r\n\r\n\r\nAPI interface\r\n\r\n    @Headers(\r\n        &quot;Accept: ${MimeTypeUtils.APPLICATION_JSON_VALUE}&quot;,\r\n        &quot;Content-Type: ${MimeTypeUtils.APPLICATION_JSON_VALUE}&quot;\r\n    )\r\n    interface Client {\r\n        @RequestLine(&quot;POST /v1/test&quot;)\r\n        fun submit(\r\n            request: body\r\n        ): ResponseEntity&lt;Unit&gt;\r\n    }\r\n\r\nImplementation\r\n\r\n```\r\noverride fun test(request: body) {\r\n        try {\r\n            val response = client.submit(request)\r\n            if (response.statusCodeValue == 200) {\r\n                logger.info(&quot;Success&quot;)\r\n                return\r\n            } else {\r\n                throw Exception(&quot;Internal Server Error&quot;)\r\n            }\r\n        } catch (e: Exception) {\r\n            throw Exception(&quot;Exception occurred while calling submit api&quot;, e)\r\n        }\r\n    }\r\n```","title":"Springboot API returns null response","body":"<p>This API works fine; I can see it hits the server and returns 200. But the response captured in the client code is null. I have checked the response via postman and I can see the status code. Not Sure why client is not able to decode the response</p>\n<pre><code>@Bean\n        fun buildClient(\n            objectMapper: ObjectMapper,\n            @Value(&quot;\\${cbase-uri}&quot;) url: String\n        ): Client {\n            return FeignApiBuilder.builder(Client::class.java, url) { it }\n                .build()\n        }\n    \n     \n           \n</code></pre>\n<p>API interface</p>\n<pre><code>@Headers(\n    &quot;Accept: ${MimeTypeUtils.APPLICATION_JSON_VALUE}&quot;,\n    &quot;Content-Type: ${MimeTypeUtils.APPLICATION_JSON_VALUE}&quot;\n)\ninterface Client {\n    @RequestLine(&quot;POST /v1/test&quot;)\n    fun submit(\n        request: body\n    ): ResponseEntity&lt;Unit&gt;\n}\n</code></pre>\n<p>Implementation</p>\n<pre><code>override fun test(request: body) {\n        try {\n            val response = client.submit(request)\n            if (response.statusCodeValue == 200) {\n                logger.info(&quot;Success&quot;)\n                return\n            } else {\n                throw Exception(&quot;Internal Server Error&quot;)\n            }\n        } catch (e: Exception) {\n            throw Exception(&quot;Exception occurred while calling submit api&quot;, e)\n        }\n    }\n</code></pre>\n"},{"tags":["java","mysql","sql","jdbc"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1680329465,"post_id":75904518,"comment_id":133883546,"body_markdown":"I assume that `QueryProcessor` is a [Java] class that you wrote. According to the stack trace you posted, method `getSpecificField`, in that class, is throwing `SQLSyntaxErrorException`. Perhaps you should [edit] your question and post the code of that method?","body":"I assume that <code>QueryProcessor</code> is a [Java] class that you wrote. According to the stack trace you posted, method <code>getSpecificField</code>, in that class, is throwing <code>SQLSyntaxErrorException</code>. Perhaps you should <a href=\"https://stackoverflow.com/posts/75904518/edit\">edit</a> your question and post the code of that method?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1680333640,"post_id":75904518,"comment_id":133883858,"body_markdown":"Please provide a [mre].","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1680340184,"post_id":75904518,"comment_id":133884560,"body_markdown":"Hello, It looks like an issue with a schema in use. The error means: a table &#39;ubli&#39; in the schema &#39;ubli&#39; doesn&#39;t exist. I guess you have a table &#39;ubli&#39; defined in the database but not in the schema &#39;ubli&#39;. In this case try to access the table without a schema.","body":"Hello, It looks like an issue with a schema in use. The error means: a table &#39;ubli&#39; in the schema &#39;ubli&#39; doesn&#39;t exist. I guess you have a table &#39;ubli&#39; defined in the database but not in the schema &#39;ubli&#39;. In this case try to access the table without a schema."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1680359267,"post_id":75904518,"comment_id":133886919,"body_markdown":"check if your table by  table name : `schemaName`.`tableName` is Existing ?","body":"check if your table by  table name : <code>schemaName</code>.<code>tableName</code> is Existing ?"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1680605157,"post_id":75904518,"comment_id":133922855,"body_markdown":"Given the error message `Table &#39;ubli.ubli&#39; doesn&#39;t exist` I&#39;m going to hazard a guess that the table &#39;ubli.ubli&#39; doesn&#39;t exist.","body":"Given the error message <code>Table &#39;ubli.ubli&#39; doesn&#39;t exist</code> I&#39;m going to hazard a guess that the table &#39;ubli.ubli&#39; doesn&#39;t exist."}],"owner":{"account_id":28184698,"reputation":11,"user_id":21541114,"display_name":"Jake Vincent Seraspe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680576383,"creation_date":1680328794,"question_id":75904518,"body_markdown":"I don&#39;t know why I am getting an error.\r\n\r\nI am using a different java class to connect to database. This is my code:\r\n```java\r\npublic class DBConnection {\r\n    static Connection connect;\r\n\r\n    public static void setConnection() {\r\n        try {\r\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n            connect = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/ubli&quot;, &quot;admin&quot;, &quot;admin123&quot;);\r\n        }\r\n        catch(Exception e) {\r\n            JOptionPane.showMessageDialog(null, &quot;ERROR! Can&#39;t Connect to server&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static Connection getConnection() {\r\n        return connect;\r\n    }\r\n```\r\nthis is the getSpecificField code:\r\n``` \r\n\r\n   public String getSpecificField(String query)\r\n\t   {\r\n\t       String record=null;\r\n\t       try\r\n\t       {\r\n\t           rs=stmt.executeQuery(query);\r\n\t           if(rs.first())\r\n\t           {\r\n\t               metadata=rs.getMetaData();\r\n\t               \r\n\t               for(int col=0; col&lt;metadata.getColumnCount(); col++)\r\n\t               {\r\n                           \r\n\t                   record=rs.getString(col);\r\n\t               }\r\n\t           }\r\n\r\n\t       }catch(Exception e)\r\n\t       {\r\n                   e.printStackTrace();\r\n\t    \t   javax.swing.JOptionPane.showMessageDialog(null,&quot;ERROR&quot;);\r\n\t       }\r\n\t       return record;\r\n\t   }\r\n\r\n```\r\n\r\n\r\n\r\nI have this error even though I&#39;m sure that my table exists: \r\n```none\r\njava.sql.SQLSyntaxErrorException: Table &#39;ubli.ubli&#39; doesn&#39;t exist\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n\tat com.mysql.cj.jdbc.StatementImpl.executeQuery(StatementImpl.java:1200)\r\n\tat ub.li.QueryProcessor.getSpecificField(QueryProcessor.java:106)\r\n\tat ub.li.Home.&lt;init&gt;(Home.java:32)\r\n\tat ub.li.UBLI.main(UBLI.java:19)\r\n```\r\nPlease help me with my project.","title":"java.sql.SQLSyntaxErrorException: Table doesn&#39;t exist","body":"<p>I don't know why I am getting an error.</p>\n<p>I am using a different java class to connect to database. This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DBConnection {\n    static Connection connect;\n\n    public static void setConnection() {\n        try {\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            connect = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/ubli&quot;, &quot;admin&quot;, &quot;admin123&quot;);\n        }\n        catch(Exception e) {\n            JOptionPane.showMessageDialog(null, &quot;ERROR! Can't Connect to server&quot;);\n            e.printStackTrace();\n        }\n    }\n\n    public static Connection getConnection() {\n        return connect;\n    }\n</code></pre>\n<p>this is the getSpecificField code:</p>\n<pre><code>\n   public String getSpecificField(String query)\n       {\n           String record=null;\n           try\n           {\n               rs=stmt.executeQuery(query);\n               if(rs.first())\n               {\n                   metadata=rs.getMetaData();\n                   \n                   for(int col=0; col&lt;metadata.getColumnCount(); col++)\n                   {\n                           \n                       record=rs.getString(col);\n                   }\n               }\n\n           }catch(Exception e)\n           {\n                   e.printStackTrace();\n               javax.swing.JOptionPane.showMessageDialog(null,&quot;ERROR&quot;);\n           }\n           return record;\n       }\n\n</code></pre>\n<p>I have this error even though I'm sure that my table exists:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.sql.SQLSyntaxErrorException: Table 'ubli.ubli' doesn't exist\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.StatementImpl.executeQuery(StatementImpl.java:1200)\n    at ub.li.QueryProcessor.getSpecificField(QueryProcessor.java:106)\n    at ub.li.Home.&lt;init&gt;(Home.java:32)\n    at ub.li.UBLI.main(UBLI.java:19)\n</code></pre>\n<p>Please help me with my project.</p>\n"},{"tags":["java","postgresql","spring-boot","jpa","jsonb"],"comments":[{"owner":{"account_id":21215832,"reputation":4327,"user_id":15603477,"display_name":"jian"},"score":1,"creation_date":1680588257,"post_id":75925130,"comment_id":133919102,"body_markdown":"first concatenate string to `$[*].unit`. you can also following examples in https://jdbc.postgresql.org/documentation/query/   (https://onecompiler.com/c/3z4mzn4pw) link is what I do it in c.","body":"first concatenate string to <code>$[*].unit</code>. you can also following examples in <a href=\"https://jdbc.postgresql.org/documentation/query/\" rel=\"nofollow noreferrer\">jdbc.postgresql.org/documentation/query</a>   (<a href=\"https://onecompiler.com/c/3z4mzn4pw\" rel=\"nofollow noreferrer\">onecompiler.com/c/3z4mzn4pw</a>) link is what I do it in c."}],"owner":{"account_id":22777144,"reputation":1,"user_id":16933620,"display_name":"volcano"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680576227,"creation_date":1680576057,"question_id":75925130,"body_markdown":"this is the postgresql query that i&#39;m trying to run:\r\n\r\n```\r\nDELETE FROM tbl WHERE jsonb_path_exists(jsonb_col, &#39;$[*].unit&#39;);\r\n```\r\n\r\nI want to implement the same in jpa repository, I have tried the below:\r\n\r\n```\r\n@Query(value = &quot;DELETE FROM tbl WHERE  jsonb_path_exists(jsonb_col, &#39;$[*].(:jsonb_key)&#39;);&quot;, nativeQuery = true)\r\n```\r\n\r\nBut i&#39;m getting below error:\r\n\r\n```\r\nERROR: syntax error, unexpected &#39;(&#39;, expecting $end at or near &quot;(&quot; of jsonpath input\r\n  Position: 96}\r\n```","title":"equivalent jpa query for postgresql query (json_path_exists())","body":"<p>this is the postgresql query that i'm trying to run:</p>\n<pre><code>DELETE FROM tbl WHERE jsonb_path_exists(jsonb_col, '$[*].unit');\n</code></pre>\n<p>I want to implement the same in jpa repository, I have tried the below:</p>\n<pre><code>@Query(value = &quot;DELETE FROM tbl WHERE  jsonb_path_exists(jsonb_col, '$[*].(:jsonb_key)');&quot;, nativeQuery = true)\n</code></pre>\n<p>But i'm getting below error:</p>\n<pre><code>ERROR: syntax error, unexpected '(', expecting $end at or near &quot;(&quot; of jsonpath input\n  Position: 96}\n</code></pre>\n"},{"tags":["javascript","java","aes","aes-gcm"],"comments":[{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":1,"creation_date":1680588757,"post_id":75925118,"comment_id":133919170,"body_markdown":"Just a quick shot - I&#39;m missing the Base64-decoding in your Java code for ciphertext, IV and gcm-tag. Second (I&#39;m not sure): concatenate ciphertext | gcm-tag before sending to the cipher.final method.","body":"Just a quick shot - I&#39;m missing the Base64-decoding in your Java code for ciphertext, IV and gcm-tag. Second (I&#39;m not sure): concatenate ciphertext | gcm-tag before sending to the cipher.final method."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1680589556,"post_id":75925118,"comment_id":133919291,"body_markdown":"The order of concatenation is wrong. Currently you concatenate tag|ciphertext. You need ciphertext|tag, i.e. swap `encrypted` and `tag` in the update/doFinal lines: `cipher.update(encrypted); byte[] bytes = cipher.doFinal(tag);`. Don&#39;t forget to specify the encoding in `new String()`.","body":"The order of concatenation is wrong. Currently you concatenate tag|ciphertext. You need ciphertext|tag, i.e. swap <code>encrypted</code> and <code>tag</code> in the update/doFinal lines: <code>cipher.update(encrypted); byte[] bytes = cipher.doFinal(tag);</code>. Don&#39;t forget to specify the encoding in <code>new String()</code>."},{"owner":{"account_id":17116762,"reputation":292,"user_id":12386060,"display_name":"Shiladitya Thakur"},"score":0,"creation_date":1693379646,"post_id":75925118,"comment_id":135751181,"body_markdown":"Were you able to work this out? base64 Encoding the iv and tag was giving me size of 16 and 24 bytes respectively so in backend, I used Base64.getDecoder().decode() to decode the iv and tag and got 12 and 16 bytes in iv and tag. Yet I still get &quot;Tag mismatch!&quot; error on cipher.doFinal(encrypted) line.","body":"Were you able to work this out? base64 Encoding the iv and tag was giving me size of 16 and 24 bytes respectively so in backend, I used Base64.getDecoder().decode() to decode the iv and tag and got 12 and 16 bytes in iv and tag. Yet I still get &quot;Tag mismatch!&quot; error on cipher.doFinal(encrypted) line."}],"owner":{"account_id":14119902,"reputation":19,"user_id":10200687,"display_name":"Genos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":249,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1680575889,"creation_date":1680575889,"question_id":75925118,"body_markdown":"## Node.js Encryption Algorithm\r\n\r\n```\r\nimport crypto from &quot;crypto&quot;\r\nfunction(data, key) {\r\n    const iv = crypto.randomBytes(12)\r\n    const cipher = crypto.createCipheriv(&#39;aes-256-gcm&#39;, key, iv)\r\n    let enc = cipher.update(data, &#39;utf8&#39;, &#39;base64&#39;)\r\n    enc += cipher.final(&#39;base64&#39;)\r\n    return [enc, cipher.getAuthTag().toString(&#39;base64&#39;), iv.toString(&quot;base64&quot;)].join(&#39;.&#39;)\r\n}\r\n```\r\n\r\n## Java Decrypt  Algorithm\r\n```\r\npublic static String decrypt(String encryData) throws Exception {\r\n        String[] parts = encryData.split(&quot;\\\\.&quot;);\r\n        byte[] encrypted = parts[0].getBytes();\r\n        byte[] tag = parts[1].getBytes();\r\n        byte[] iv = parts[2].getBytes();\r\n\r\n        GCMParameterSpec ivSpec = new GCMParameterSpec(128, iv);\r\n        Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n        cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(KEY.getBytes(), &quot;AES&quot;), ivSpec);\r\n        cipher.update(tag);\r\n        byte[] bytes = cipher.doFinal(encrypted);\r\n        return new String(bytes);\r\n    }\r\n```\r\n\r\n\r\n\r\n## Java throws the following exception\r\n&lt;font color=&quot;red&quot;&gt;Exception in thread &quot;main&quot; javax.crypto.AEADBadTagException: Tag mismatch!&lt;/font&gt;\r\n","title":"Node.js data encrypted with AES-256-GCM cannot be decrypted with Java","body":"<h2>Node.js Encryption Algorithm</h2>\n<pre><code>import crypto from &quot;crypto&quot;\nfunction(data, key) {\n    const iv = crypto.randomBytes(12)\n    const cipher = crypto.createCipheriv('aes-256-gcm', key, iv)\n    let enc = cipher.update(data, 'utf8', 'base64')\n    enc += cipher.final('base64')\n    return [enc, cipher.getAuthTag().toString('base64'), iv.toString(&quot;base64&quot;)].join('.')\n}\n</code></pre>\n<h2>Java Decrypt  Algorithm</h2>\n<pre><code>public static String decrypt(String encryData) throws Exception {\n        String[] parts = encryData.split(&quot;\\\\.&quot;);\n        byte[] encrypted = parts[0].getBytes();\n        byte[] tag = parts[1].getBytes();\n        byte[] iv = parts[2].getBytes();\n\n        GCMParameterSpec ivSpec = new GCMParameterSpec(128, iv);\n        Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(KEY.getBytes(), &quot;AES&quot;), ivSpec);\n        cipher.update(tag);\n        byte[] bytes = cipher.doFinal(encrypted);\n        return new String(bytes);\n    }\n</code></pre>\n<h2>Java throws the following exception</h2>\n<p>Exception in thread &quot;main&quot; javax.crypto.AEADBadTagException: Tag mismatch!</p>\n"},{"tags":["java","tree","binary-tree"],"comments":[{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1680630219,"post_id":75925079,"comment_id":133929636,"body_markdown":"There is no tree in this piece of code. You have a snippet that creates 6 independent nodes and then a reference to undeclared variable `sb`. Please provide code that can at least run, and which reproduces your issue.","body":"There is no tree in this piece of code. You have a snippet that creates 6 independent nodes and then a reference to undeclared variable <code>sb</code>. Please provide code that can at least run, and which reproduces your issue."}],"owner":{"account_id":26287198,"reputation":1,"user_id":19954700,"display_name":"mckx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680575339,"creation_date":1680575339,"question_id":75925079,"body_markdown":"    //creating a tree\r\n\t\tFcnsTreeNode&lt;String&gt; node1 = new FcnsTreeNode&lt;&gt;(&quot;A&quot;);\r\n\t\tFcnsTreeNode&lt;String&gt; node2 = new FcnsTreeNode&lt;&gt;(&quot;B&quot;);\r\n\t\tFcnsTreeNode&lt;String&gt; node3 = new FcnsTreeNode&lt;&gt;(&quot;C&quot;);\r\n\t\tFcnsTreeNode&lt;String&gt; node4 = new FcnsTreeNode&lt;&gt;(&quot;D&quot;);\r\n\t\tFcnsTreeNode&lt;String&gt; node5 = new FcnsTreeNode&lt;&gt;(&quot;F&quot;);\r\n\t\tFcnsTreeNode&lt;String&gt; node6 = new FcnsTreeNode&lt;&gt;(&quot;G&quot;);\r\n\r\n    public String toStringLevelOrder() {\r\n\t\t    // Return a string of all nodes in the tree rooted at this node\r\n\t\t    // - include all nodes in level order (top-down, left-to-right)\r\n\t\t    // - a single space is padded between two nodes, no space at the end\r\n\t\t    // - return an empty string for null tree\r\n\t\t    //O(n) where n is the size of the tree\r\n\r\n\t\t    StringBuilder sb = new StringBuilder();\r\n\t\t    if (this == null) {\r\n\t\t    \treturn &quot;&quot;;\r\n\t\t    }\r\n\t\t    Queue&lt;FcnsTreeNode&lt;E&gt;&gt; queue = new Queue&lt;&gt;();\r\n\t\t    queue.enqueue(this);\r\n\t\t    while (!queue.isEmpty()) {\r\n\t\t\tFcnsTreeNode&lt;E&gt; node = queue.dequeue();\r\n\t\t\tsb.append(node.getValue()).append(&quot; &quot;);\r\n\t\t\tFcnsTreeNode&lt;E&gt; child = node.getChild();\r\n\t\t\twhile (child != null) {\r\n\t\t\t\tqueue.enqueue(child);\r\n\t\t\t\tchild = child.getSibling();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sb.toString().trim();\r\n\t}\r\n\r\n\r\nMy code output is: &quot;A B C D F G&quot; but it is supposed to be: &quot;A B F C G D&quot;, how do I fix my method, only Java Queues are allowed, no LinkedLists or any other imported methods.","title":"How do I fix my toStringLevelOrder to have the proper output?","body":"<pre><code>//creating a tree\n    FcnsTreeNode&lt;String&gt; node1 = new FcnsTreeNode&lt;&gt;(&quot;A&quot;);\n    FcnsTreeNode&lt;String&gt; node2 = new FcnsTreeNode&lt;&gt;(&quot;B&quot;);\n    FcnsTreeNode&lt;String&gt; node3 = new FcnsTreeNode&lt;&gt;(&quot;C&quot;);\n    FcnsTreeNode&lt;String&gt; node4 = new FcnsTreeNode&lt;&gt;(&quot;D&quot;);\n    FcnsTreeNode&lt;String&gt; node5 = new FcnsTreeNode&lt;&gt;(&quot;F&quot;);\n    FcnsTreeNode&lt;String&gt; node6 = new FcnsTreeNode&lt;&gt;(&quot;G&quot;);\n\npublic String toStringLevelOrder() {\n        // Return a string of all nodes in the tree rooted at this node\n        // - include all nodes in level order (top-down, left-to-right)\n        // - a single space is padded between two nodes, no space at the end\n        // - return an empty string for null tree\n        //O(n) where n is the size of the tree\n\n        StringBuilder sb = new StringBuilder();\n        if (this == null) {\n            return &quot;&quot;;\n        }\n        Queue&lt;FcnsTreeNode&lt;E&gt;&gt; queue = new Queue&lt;&gt;();\n        queue.enqueue(this);\n        while (!queue.isEmpty()) {\n        FcnsTreeNode&lt;E&gt; node = queue.dequeue();\n        sb.append(node.getValue()).append(&quot; &quot;);\n        FcnsTreeNode&lt;E&gt; child = node.getChild();\n        while (child != null) {\n            queue.enqueue(child);\n            child = child.getSibling();\n        }\n    }\n    return sb.toString().trim();\n}\n</code></pre>\n<p>My code output is: &quot;A B C D F G&quot; but it is supposed to be: &quot;A B F C G D&quot;, how do I fix my method, only Java Queues are allowed, no LinkedLists or any other imported methods.</p>\n"},{"tags":["java","javafx","shutdown-hook"],"comments":[{"owner":{"account_id":8361573,"reputation":573,"user_id":6279677,"display_name":"Suchandra T"},"score":0,"creation_date":1680500909,"post_id":75916270,"comment_id":133902925,"body_markdown":"Ankush so this hook beheviour is OS specific. did you get any java error when you shutdown the system?","body":"Ankush so this hook beheviour is OS specific. did you get any java error when you shutdown the system?"},{"owner":{"account_id":28199613,"reputation":11,"user_id":21553629,"display_name":"Ankush Chaudhary"},"score":0,"creation_date":1680501289,"post_id":75916270,"comment_id":133902970,"body_markdown":"No, I did not get any error during shutdown. But I am thinking about internet is available after initiate shutdown? Because I tested hook by setting a preference and it is working fine if i shutdown PC.","body":"No, I did not get any error during shutdown. But I am thinking about internet is available after initiate shutdown? Because I tested hook by setting a preference and it is working fine if i shutdown PC."},{"owner":{"account_id":8361573,"reputation":573,"user_id":6279677,"display_name":"Suchandra T"},"score":1,"creation_date":1680501421,"post_id":75916270,"comment_id":133902980,"body_markdown":"Sure even this is a concern. Ankush what I can suggest is writing a heartbeat kind of program. which on a timely basis writes something to a local file ok. anyways content of the file can anyway you can sync with your code to any other server. this solves many issue.","body":"Sure even this is a concern. Ankush what I can suggest is writing a heartbeat kind of program. which on a timely basis writes something to a local file ok. anyways content of the file can anyway you can sync with your code to any other server. this solves many issue."},{"owner":{"account_id":6795544,"reputation":1900,"user_id":5231001,"accept_rate":75,"display_name":"n247s"},"score":1,"creation_date":1680502624,"post_id":75916270,"comment_id":133903142,"body_markdown":"I am not sure what code needs to be executed. If it is possible to &#39;clean up&#39; after the fact, I would suggest writing the programstate to a file and delete that when handled and shutdown. If the shutdown was ungracefull (i.e. System shutdown without closing the program), you can check that during startup (check if programstate file is present). You can handle the &#39;cleanup&#39; there and than, or simply restore that file-written programstate and continue. I hope this gives a few handles on how to solve the issue. Otherwise please share the nature of task you want to execute on termination.","body":"I am not sure what code needs to be executed. If it is possible to &#39;clean up&#39; after the fact, I would suggest writing the programstate to a file and delete that when handled and shutdown. If the shutdown was ungracefull (i.e. System shutdown without closing the program), you can check that during startup (check if programstate file is present). You can handle the &#39;cleanup&#39; there and than, or simply restore that file-written programstate and continue. I hope this gives a few handles on how to solve the issue. Otherwise please share the nature of task you want to execute on termination."},{"owner":{"account_id":28199613,"reputation":11,"user_id":21553629,"display_name":"Ankush Chaudhary"},"score":0,"creation_date":1680503510,"post_id":75916270,"comment_id":133903294,"body_markdown":"Hello n247s, I am executing code to hit POST API in JVM hook by using java.net.HttpURLConnection. I am not sending any JSON data, the server auto creates data to save, I just have to hit the URL. I am sending a HTTP request on the server in shutdown hook.","body":"Hello n247s, I am executing code to hit POST API in JVM hook by using java.net.HttpURLConnection. I am not sending any JSON data, the server auto creates data to save, I just have to hit the URL. I am sending a HTTP request on the server in shutdown hook."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1680538695,"post_id":75916270,"comment_id":133911807,"body_markdown":"Read the [documentation](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Runtime.html#addShutdownHook(java.lang.Thread)): *&quot;Once the shutdown sequence has begun it is impossible to register a new shutdown hook&quot;*. In the scenario you describe, `launch()` will not exit until the shutdown sequence starts, so your shutdown hook cannot be registered.","body":"Read the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Runtime.html#addShutdownHook(java.lang.Thread)\" rel=\"nofollow noreferrer\">documentation</a>: <i>&quot;Once the shutdown sequence has begun it is impossible to register a new shutdown hook&quot;</i>. In the scenario you describe, <code>launch()</code> will not exit until the shutdown sequence starts, so your shutdown hook cannot be registered."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1680538940,"post_id":75916270,"comment_id":133911862,"body_markdown":"Related: https://stackoverflow.com/questions/42598097/using-javafx-application-stop-method-over-shutdownhook","body":"Related: <a href=\"https://stackoverflow.com/questions/42598097/using-javafx-application-stop-method-over-shutdownhook\" title=\"using javafx application stop method over shutdownhook\">stackoverflow.com/questions/42598097/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680575233,"creation_date":1680575233,"answer_id":75925073,"question_id":75916270,"body_markdown":"As noted in the comments, using a shutdown hook can be a handy way to perform **non-essential tasks**, but -- by its very nature -- cannot be relied upon.\r\n\r\nThis is not limited to Java -- C/C++ has a `finalize` function which is run when an object is garbage collected. This can be helpful in optimizing some tasks, but there is **no guarantee** it will ever be called.\r\n\r\nOne need not look far for ways an application might not shutdown properly: power failure, an uncaught exception or out-of-memory error, even an OS crash will happen sooner rather than later.\r\n\r\nThe heartbeat suggestion is excellent: while the shutdown routine is not guaranteed, your application will startup again eventually (provided you or someone else is still wants to use it!) Check the previous state that was saved in the heartbeat and take any necessary action during startup.","title":"Java shutdown hook not working on system shutdown","body":"<p>As noted in the comments, using a shutdown hook can be a handy way to perform <strong>non-essential tasks</strong>, but -- by its very nature -- cannot be relied upon.</p>\n<p>This is not limited to Java -- C/C++ has a <code>finalize</code> function which is run when an object is garbage collected. This can be helpful in optimizing some tasks, but there is <strong>no guarantee</strong> it will ever be called.</p>\n<p>One need not look far for ways an application might not shutdown properly: power failure, an uncaught exception or out-of-memory error, even an OS crash will happen sooner rather than later.</p>\n<p>The heartbeat suggestion is excellent: while the shutdown routine is not guaranteed, your application will startup again eventually (provided you or someone else is still wants to use it!) Check the previous state that was saved in the heartbeat and take any necessary action during startup.</p>\n"}],"owner":{"account_id":28199613,"reputation":11,"user_id":21553629,"display_name":"Ankush Chaudhary"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1680575233,"creation_date":1680499885,"question_id":75916270,"body_markdown":"I am working on a JavaFX application that is to be run in background in most of time. So i need to execute code if a user close the application. But most of the time application will run in *background/system tray* so user may be forgot to close the application. So I need to hit the URL if user shutdown or restart the computer. After research I found Shutdown hook in java that can be used to excute task before JVM shutdown, so I implemented the Shutdown hook. When I tested it, it is working if i am closing the application, but not working if I shutdown the system.\r\n\r\n```\r\nChild class\r\n\r\npublic class ShutDownTask extends Thread {\r\n    CheckInPageController controller = new CheckInPageController();\r\n    @Override\r\n    public void run() {\r\n        System.out.println(&quot;ShutDown Called&quot;);\r\n        System.out.println(&quot;Performing shutdown&quot;);\r\n        //Hitting a URL here\r\n            controller.checkoutRequest();\r\n\r\n    }\r\n}\r\n\r\nMain class\r\n\r\n    public static void main(String[] args) throws InterruptedException, IOException {\r\n        launch(args);\r\n                ShutDownTask task = new ShutDownTask();\r\n        // add shutdown hook\r\n        Runtime.getRuntime().addShutdownHook(task);\r\n        // exit application\r\n        System.exit(0);\r\n    }\r\n```\r\n\r\n\r\nPlease give me solution of it or tell me why is this happening\r\nThanks in advance","title":"Java shutdown hook not working on system shutdown","body":"<p>I am working on a JavaFX application that is to be run in background in most of time. So i need to execute code if a user close the application. But most of the time application will run in <em>background/system tray</em> so user may be forgot to close the application. So I need to hit the URL if user shutdown or restart the computer. After research I found Shutdown hook in java that can be used to excute task before JVM shutdown, so I implemented the Shutdown hook. When I tested it, it is working if i am closing the application, but not working if I shutdown the system.</p>\n<pre><code>Child class\n\npublic class ShutDownTask extends Thread {\n    CheckInPageController controller = new CheckInPageController();\n    @Override\n    public void run() {\n        System.out.println(&quot;ShutDown Called&quot;);\n        System.out.println(&quot;Performing shutdown&quot;);\n        //Hitting a URL here\n            controller.checkoutRequest();\n\n    }\n}\n\nMain class\n\n    public static void main(String[] args) throws InterruptedException, IOException {\n        launch(args);\n                ShutDownTask task = new ShutDownTask();\n        // add shutdown hook\n        Runtime.getRuntime().addShutdownHook(task);\n        // exit application\n        System.exit(0);\n    }\n</code></pre>\n<p>Please give me solution of it or tell me why is this happening\nThanks in advance</p>\n"},{"tags":["java","node.js","docker","gradle","gitlab"],"comments":[{"owner":{"account_id":688414,"reputation":82638,"user_id":542270,"accept_rate":86,"display_name":"Opal"},"score":0,"creation_date":1539286266,"post_id":52766981,"comment_id":92457899,"body_markdown":"Can you verify the content of this folder: `pwd`/.gradle/nodejs/node-v10.11.0-linux-x64/bin as well as if node&#39;s there and it works?","body":"Can you verify the content of this folder: <code>pwd</code>/.gradle/nodejs/node-v10.11.0-linux-x64/bin as well as if node&#39;s there and it works?"},{"owner":{"account_id":14524918,"reputation":57,"user_id":10491535,"display_name":"Liquid Studios Seattle"},"score":0,"creation_date":1539293271,"post_id":52766981,"comment_id":92461045,"body_markdown":"yes, it contains node, npm and npx and permissions on files are correctly set. I have added the output to the question.","body":"yes, it contains node, npm and npx and permissions on files are correctly set. I have added the output to the question."},{"owner":{"account_id":1838834,"reputation":1494,"user_id":1668675,"accept_rate":100,"display_name":"Marcel"},"score":0,"creation_date":1546872220,"post_id":52766981,"comment_id":94986104,"body_markdown":"@LiquidStudiosSeattle Did you find any solution to this problem. We are also bumping into this problem at the moment.","body":"@LiquidStudiosSeattle Did you find any solution to this problem. We are also bumping into this problem at the moment."}],"answers":[{"tags":[],"owner":{"account_id":15787989,"reputation":2685,"user_id":11392116,"display_name":"Marco R."},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1555876629,"creation_date":1555876629,"answer_id":55786253,"question_id":52766981,"body_markdown":"The `gradle:alpine` image has problems working with node. I solved the problem by switching to the `gradle:slim` image; which works fine with node and the gradle node plugin.","title":"Unable to run node using gradle node plugin","body":"<p>The <code>gradle:alpine</code> image has problems working with node. I solved the problem by switching to the <code>gradle:slim</code> image; which works fine with node and the gradle node plugin.</p>\n"},{"tags":[],"owner":{"account_id":1541684,"reputation":473,"user_id":1436182,"accept_rate":100,"display_name":"deepy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610009851,"creation_date":1610009851,"answer_id":65609328,"question_id":52766981,"body_markdown":"The reason this isn&#39;t working is because alpine uses musl and that requires a different node version, there are unofficial builds available for it, but the gradle plugin does not currently detect musl https://unofficial-builds.nodejs.org/download/release/v13.0.1/\r\n\r\nOne way to get around this would be to use `download = false` conditionally and pre-install node in your CI env, but the easiest way is to just not use a docker image that uses musl.\r\n\r\nThere&#39;s an open issue in the fork for this https://github.com/node-gradle/gradle-node-plugin/issues/51","title":"Unable to run node using gradle node plugin","body":"<p>The reason this isn't working is because alpine uses musl and that requires a different node version, there are unofficial builds available for it, but the gradle plugin does not currently detect musl <a href=\"https://unofficial-builds.nodejs.org/download/release/v13.0.1/\" rel=\"nofollow noreferrer\">https://unofficial-builds.nodejs.org/download/release/v13.0.1/</a></p>\n<p>One way to get around this would be to use <code>download = false</code> conditionally and pre-install node in your CI env, but the easiest way is to just not use a docker image that uses musl.</p>\n<p>There's an open issue in the fork for this <a href=\"https://github.com/node-gradle/gradle-node-plugin/issues/51\" rel=\"nofollow noreferrer\">https://github.com/node-gradle/gradle-node-plugin/issues/51</a></p>\n"},{"tags":[],"owner":{"account_id":347392,"reputation":8392,"user_id":681479,"accept_rate":62,"display_name":"Brian White"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680574150,"creation_date":1680574150,"answer_id":75924995,"question_id":52766981,"body_markdown":"According to https://hub.docker.com/_/gradle\r\n\r\n&gt; **gradle:&amp;lt;version&amp;gt;** This is the defacto image. If you are unsure about\r\n&gt; what your needs are, you probably want to use this one. It is designed\r\n&gt; to be used both as a throw away container (mount your source code and\r\n&gt; start the container to start your app), as well as the base to build\r\n&gt; other images off of.\r\n&gt; \r\n&gt; Some of these tags may have names like focal or jammy in them. These\r\n&gt; are the suite code names for releases of Ubuntu and indicate which\r\n&gt; release the image is based on. If your image needs to install any\r\n&gt; additional packages beyond what comes with the image, you&#39;ll likely\r\n&gt; want to specify one of these explicitly to minimize breakage when\r\n&gt; there are new releases of Ubuntu.\r\n&gt; \r\n&gt; **gradle:&amp;lt;version&amp;gt;-alpine** This image is based on the popular Alpine\r\n&gt; Linux project, available in the alpine official image. Alpine Linux is\r\n&gt; much smaller than most distribution base images (~5MB), and thus leads\r\n&gt; to much slimmer images in general.\r\n&gt; \r\n&gt; This variant is useful when final image size being as small as\r\n&gt; possible is your primary concern. The main caveat to note is that it\r\n&gt; does use musl libc instead of glibc and friends, so software will\r\n&gt; often run into issues depending on the depth of their libc\r\n&gt; requirements/assumptions. See this Hacker News comment thread for more\r\n&gt; discussion of the issues that might arise and some pro/con comparisons\r\n&gt; of using Alpine-based images.\r\n&gt; \r\n&gt; To minimize image size, it&#39;s uncommon for additional related tools\r\n&gt; (such as git or bash) to be included in Alpine-based images. Using\r\n&gt; this image as a base, add the things you need in your own Dockerfile\r\n&gt; (see the alpine image description for examples of how to install\r\n&gt; packages if you are unfamiliar).\r\n\r\nI changed my Dockerfile from\r\n\r\n`FROM gradle:7.6-alpine as builder`\r\n\r\nto\r\n\r\n`FROM gradle:7.6 as builder`\r\n\r\nand the build was able to run the `node` binary.  There are also `-focal` and `-jammy` images (both also worked) but I chose to stay with the default since it won&#39;t be shipped anyway.  I couldn&#39;t find a `-slim` version.\r\n","title":"Unable to run node using gradle node plugin","body":"<p>According to <a href=\"https://hub.docker.com/_/gradle\" rel=\"nofollow noreferrer\">https://hub.docker.com/_/gradle</a></p>\n<blockquote>\n<p><strong>gradle:&lt;version&gt;</strong> This is the defacto image. If you are unsure about\nwhat your needs are, you probably want to use this one. It is designed\nto be used both as a throw away container (mount your source code and\nstart the container to start your app), as well as the base to build\nother images off of.</p>\n<p>Some of these tags may have names like focal or jammy in them. These\nare the suite code names for releases of Ubuntu and indicate which\nrelease the image is based on. If your image needs to install any\nadditional packages beyond what comes with the image, you'll likely\nwant to specify one of these explicitly to minimize breakage when\nthere are new releases of Ubuntu.</p>\n<p><strong>gradle:&lt;version&gt;-alpine</strong> This image is based on the popular Alpine\nLinux project, available in the alpine official image. Alpine Linux is\nmuch smaller than most distribution base images (~5MB), and thus leads\nto much slimmer images in general.</p>\n<p>This variant is useful when final image size being as small as\npossible is your primary concern. The main caveat to note is that it\ndoes use musl libc instead of glibc and friends, so software will\noften run into issues depending on the depth of their libc\nrequirements/assumptions. See this Hacker News comment thread for more\ndiscussion of the issues that might arise and some pro/con comparisons\nof using Alpine-based images.</p>\n<p>To minimize image size, it's uncommon for additional related tools\n(such as git or bash) to be included in Alpine-based images. Using\nthis image as a base, add the things you need in your own Dockerfile\n(see the alpine image description for examples of how to install\npackages if you are unfamiliar).</p>\n</blockquote>\n<p>I changed my Dockerfile from</p>\n<p><code>FROM gradle:7.6-alpine as builder</code></p>\n<p>to</p>\n<p><code>FROM gradle:7.6 as builder</code></p>\n<p>and the build was able to run the <code>node</code> binary.  There are also <code>-focal</code> and <code>-jammy</code> images (both also worked) but I chose to stay with the default since it won't be shipped anyway.  I couldn't find a <code>-slim</code> version.</p>\n"}],"owner":{"account_id":14524918,"reputation":57,"user_id":10491535,"display_name":"Liquid Studios Seattle"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4454,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":55786253,"answer_count":3,"score":5,"last_activity_date":1680574150,"creation_date":1539283499,"question_id":52766981,"body_markdown":"We’re using the gradle node plugin to build our node project from gradle. The gitlab ci template we chose uses the gradle:alpine docker image. In our job we run the gradle wrapper. The build fails with “env: can’t execute ‘node’: No such file or directory”. It builds fine on our linux dev box.\r\n\r\nHere is the stack trace:\r\n\r\n    Caused by: java.io.IOException: Cannot run program &quot;/builds/myueser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin/node&quot; (in directory &quot;/builds/myueser/myproj&quot;): error=2, No such file or directory\r\n    \tat net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)\r\n    \t... 6 more\r\n    Caused by: java.io.IOException: error=2, No such file or directory\r\n\r\n\r\nHere are the pertinent contents from the gitlab-ci.yml:\r\n\r\n    image: gradle:alpine\r\n    \r\n    variables:\r\n     GRADLE_OPTS: &quot;-Dorg.gradle.daemon=false&quot;\r\n     GIT_STRATEGY: clone\r\n    \r\n    before_script:\r\n     - export GRADLE_USER_HOME=`pwd`/.gradle\r\n     - export PATH=`pwd`/.gradle/nodejs/node-v10.11.0-linux-x64/bin:$PATH\r\n    \r\n    deploy-ui:\r\n     stage: deploy\r\n     script: ./gradlew --build-cache assemble deploymyprojWeb --debug\r\n     cache:\r\n       key: &quot;$CI_COMMIT_REF_NAME&quot;\r\n       policy: pull\r\n       paths:\r\n         - build\r\n         - .gradle\r\n\r\nAlso, the following is from the build.gradle file:\r\n\r\n    plugins {\r\n      id &quot;com.moowork.node&quot; version &quot;1.2.0&quot;\r\n      id &#39;com.adarshr.test-logger&#39; version &#39;1.5.0&#39;\r\n    }\r\n    \r\n    apply plugin: &quot;java&quot;\r\n    apply plugin: &quot;groovy&quot;\r\n    \r\n    repositories {\r\n        jcenter()\r\n    }\r\n    \r\n    dependencies {\r\n        testCompile(\r\n                &#39;junit:junit:4.12&#39;,\r\n                &#39;org.codehaus.groovy:groovy-all:2.4.15&#39;,\r\n                &#39;org.spockframework:spock-core:1.1-groovy-2.4&#39;,\r\n                gradleTestKit()\r\n        )\r\n    }\r\n    \r\n    node {\r\n        version = &#39;10.11.0&#39;\r\n        download = true\r\n    }\r\n    \r\n    npm_install {\r\n        args = [&quot;$project.projectDir/myproj&quot;, &#39;--prefix&#39;,&quot;$project.projectDir/myproj&quot;]\r\n    }\r\n    \r\n    task deploymyprojWeb(type: NpmTask) {\r\n        args = [&#39;run&#39;,&#39;deploy&#39;, &#39;--prefix&#39;,&quot;$project.projectDir/myproj&quot;]\r\n    }\r\n    deploymyprojWeb.dependsOn npm_install\r\n    \r\n    wrapper {\r\n       gradleVersion = &#39;4.10.2&#39; //version required\r\n    }\r\n\r\nContent of node distribution folder (/builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin):\r\n\r\n    /builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin/npx\r\n    Exec: true\r\n    Write: true\r\n    Read: true\r\n    /builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin/node\r\n    Exec: true\r\n    Write: true\r\n    Read: true\r\n    /builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin/npm\r\n    Exec: true\r\n    Write: true\r\n    Read: true\r\n\r\nAlso, it&#39;s in the PATH variable:\r\n\r\n    PATH=/builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin:\r\n","title":"Unable to run node using gradle node plugin","body":"<p>We’re using the gradle node plugin to build our node project from gradle. The gitlab ci template we chose uses the gradle:alpine docker image. In our job we run the gradle wrapper. The build fails with “env: can’t execute ‘node’: No such file or directory”. It builds fine on our linux dev box.</p>\n\n<p>Here is the stack trace:</p>\n\n<pre><code>Caused by: java.io.IOException: Cannot run program \"/builds/myueser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin/node\" (in directory \"/builds/myueser/myproj\"): error=2, No such file or directory\n    at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)\n    ... 6 more\nCaused by: java.io.IOException: error=2, No such file or directory\n</code></pre>\n\n<p>Here are the pertinent contents from the gitlab-ci.yml:</p>\n\n<pre><code>image: gradle:alpine\n\nvariables:\n GRADLE_OPTS: \"-Dorg.gradle.daemon=false\"\n GIT_STRATEGY: clone\n\nbefore_script:\n - export GRADLE_USER_HOME=`pwd`/.gradle\n - export PATH=`pwd`/.gradle/nodejs/node-v10.11.0-linux-x64/bin:$PATH\n\ndeploy-ui:\n stage: deploy\n script: ./gradlew --build-cache assemble deploymyprojWeb --debug\n cache:\n   key: \"$CI_COMMIT_REF_NAME\"\n   policy: pull\n   paths:\n     - build\n     - .gradle\n</code></pre>\n\n<p>Also, the following is from the build.gradle file:</p>\n\n<pre><code>plugins {\n  id \"com.moowork.node\" version \"1.2.0\"\n  id 'com.adarshr.test-logger' version '1.5.0'\n}\n\napply plugin: \"java\"\napply plugin: \"groovy\"\n\nrepositories {\n    jcenter()\n}\n\ndependencies {\n    testCompile(\n            'junit:junit:4.12',\n            'org.codehaus.groovy:groovy-all:2.4.15',\n            'org.spockframework:spock-core:1.1-groovy-2.4',\n            gradleTestKit()\n    )\n}\n\nnode {\n    version = '10.11.0'\n    download = true\n}\n\nnpm_install {\n    args = [\"$project.projectDir/myproj\", '--prefix',\"$project.projectDir/myproj\"]\n}\n\ntask deploymyprojWeb(type: NpmTask) {\n    args = ['run','deploy', '--prefix',\"$project.projectDir/myproj\"]\n}\ndeploymyprojWeb.dependsOn npm_install\n\nwrapper {\n   gradleVersion = '4.10.2' //version required\n}\n</code></pre>\n\n<p>Content of node distribution folder (/builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin):</p>\n\n<pre><code>/builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin/npx\nExec: true\nWrite: true\nRead: true\n/builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin/node\nExec: true\nWrite: true\nRead: true\n/builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin/npm\nExec: true\nWrite: true\nRead: true\n</code></pre>\n\n<p>Also, it's in the PATH variable:</p>\n\n<pre><code>PATH=/builds/myuser/myproj/.gradle/nodejs/node-v10.11.0-linux-x64/bin:\n</code></pre>\n"},{"tags":["java","minecraft","bukkit","spigot"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1680297473,"post_id":75902795,"comment_id":133880662,"body_markdown":"Why set the `isRecord() = true` ? Try by replacing with `==`","body":"Why set the <code>isRecord() = true</code> ? Try by replacing with <code>==</code>"},{"owner":{"account_id":26528895,"reputation":3,"user_id":20161423,"display_name":"Daweii"},"score":0,"creation_date":1680369235,"post_id":75902795,"comment_id":133888411,"body_markdown":"Yes, but that would not allow me to know which music disc is played.But thanks anyway.","body":"Yes, but that would not allow me to know which music disc is played.But thanks anyway."}],"answers":[{"comments":[{"owner":{"account_id":26528895,"reputation":3,"user_id":20161423,"display_name":"Daweii"},"score":0,"creation_date":1680455514,"post_id":75913255,"comment_id":133897726,"body_markdown":"Hello but I do not understand how to put it in my code ?","body":"Hello but I do not understand how to put it in my code ?"},{"owner":{"account_id":16493669,"reputation":3050,"user_id":11916773,"display_name":"Lucan"},"score":0,"creation_date":1680459817,"post_id":75913255,"comment_id":133898359,"body_markdown":"@Daweii I&#39;ve added a complete example to help get you going.","body":"@Daweii I&#39;ve added a complete example to help get you going."}],"tags":[],"owner":{"account_id":16493669,"reputation":3050,"user_id":11916773,"display_name":"Lucan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680459763,"creation_date":1680452891,"answer_id":75913255,"question_id":75902795,"body_markdown":"To get the record, if any, playing inside of a JukeBox, you can use the `JukeBox` block state method `getRecord()` like so:\r\n\r\n```java\r\n    ...\r\n    if(!(block.getState() instanceof Jukebox))\r\n        return;\r\n    Jukebox jukebox = (Jukebox) block.getState();\r\n    ItemStack record = jukebox.getRecord();\r\n    ...\r\n```\r\n\r\nYou must ensure that your `block` variable isn&#39;t null before attempting to cast. If there is no disc in the jukebox, the resulting `ItemStack` will be of type `Material.AIR`.\r\n   \r\nEdit: Here&#39;s a complete example:\r\n```java\r\n@EventHandler(ignoreCancelled = true)\r\npublic void onPlayerInteract(PlayerInteractEvent e) {\r\n    // Ensure we want to do something with this event\r\n    if(e.getAction() != Action.LEFT_CLICK_BLOCK\r\n            || e.getClickedBlock() == null\r\n            || e.getClickedBlock().getType() != Material.JUKEBOX\r\n            || !(e.getClickedBlock().getState() instanceof Jukebox)\r\n    ) {\r\n        return;\r\n    }\r\n    Player player = e.getPlayer();\r\n    // Cast the clicked block&#39;s state to JukeBox\r\n    Jukebox jukebox = (Jukebox) e.getClickedBlock().getState();\r\n    // Get the record in the JukeBox\r\n    ItemStack record = jukebox.getRecord();\r\n    // If the record&#39;s material type is AIR, there is nothing playing\r\n    if(record.getType() == Material.AIR){\r\n        player.sendMessage(&quot;There is nothing playing in this JukeBox.&quot;);\r\n        return;\r\n    }\r\n    // Do whatever with the record; below is just an example...\r\n    StringBuilder message = new StringBuilder(&quot;This JukeBox&quot;);\r\n    // Check if it&#39;s currently playing\r\n    if(jukebox.isPlaying()){\r\n        message.append(&quot; is currently &quot;);\r\n    } else {\r\n        // If it&#39;s not playing, that means a record is in the JukeBox, but it&#39;s not playing\r\n        message.append(&quot; was previously &quot;);\r\n    }\r\n    player.sendMessage(message + &quot;playing &quot; + record.getType().name());\r\n}\r\n```","title":"Minecraft Bukkit and Spigot get item in jukebox","body":"<p>To get the record, if any, playing inside of a JukeBox, you can use the <code>JukeBox</code> block state method <code>getRecord()</code> like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    ...\n    if(!(block.getState() instanceof Jukebox))\n        return;\n    Jukebox jukebox = (Jukebox) block.getState();\n    ItemStack record = jukebox.getRecord();\n    ...\n</code></pre>\n<p>You must ensure that your <code>block</code> variable isn't null before attempting to cast. If there is no disc in the jukebox, the resulting <code>ItemStack</code> will be of type <code>Material.AIR</code>.</p>\n<p>Edit: Here's a complete example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EventHandler(ignoreCancelled = true)\npublic void onPlayerInteract(PlayerInteractEvent e) {\n    // Ensure we want to do something with this event\n    if(e.getAction() != Action.LEFT_CLICK_BLOCK\n            || e.getClickedBlock() == null\n            || e.getClickedBlock().getType() != Material.JUKEBOX\n            || !(e.getClickedBlock().getState() instanceof Jukebox)\n    ) {\n        return;\n    }\n    Player player = e.getPlayer();\n    // Cast the clicked block's state to JukeBox\n    Jukebox jukebox = (Jukebox) e.getClickedBlock().getState();\n    // Get the record in the JukeBox\n    ItemStack record = jukebox.getRecord();\n    // If the record's material type is AIR, there is nothing playing\n    if(record.getType() == Material.AIR){\n        player.sendMessage(&quot;There is nothing playing in this JukeBox.&quot;);\n        return;\n    }\n    // Do whatever with the record; below is just an example...\n    StringBuilder message = new StringBuilder(&quot;This JukeBox&quot;);\n    // Check if it's currently playing\n    if(jukebox.isPlaying()){\n        message.append(&quot; is currently &quot;);\n    } else {\n        // If it's not playing, that means a record is in the JukeBox, but it's not playing\n        message.append(&quot; was previously &quot;);\n    }\n    player.sendMessage(message + &quot;playing &quot; + record.getType().name());\n}\n</code></pre>\n"}],"owner":{"account_id":26528895,"reputation":3,"user_id":20161423,"display_name":"Daweii"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75913255,"answer_count":1,"score":0,"last_activity_date":1680574106,"creation_date":1680297332,"question_id":75902795,"body_markdown":"I am creating a plugin, with Bukkit in Minecraft : 1.19.4 and I need to see if there is a **specific Music Disc** in a **JukeBox** when the player right clicks on the block but I can&#39;t find a way to do that.\r\n\r\nSo I tried:\r\n\r\n```java\r\npublic class TestCD implements Listener {\r\n\r\n    @EventHandler\r\n    public void onInteract(PlayerInteractEvent event) {\r\n        Player player = event.getPlayer();\r\n        Action action = event.getAction();\r\n        ItemStack it = event.getItem();\r\n        Block block = event.getClickedBlock();\r\n        BlockData blockD = block.getBlockData();\r\n\r\n\r\n        if (it != null &amp;&amp; action == Action.LEFT_CLICK_BLOCK &amp;&amp; block.getType().equals(Material.JUKEBOX) &amp;&amp; blockD.getMaterial().isRecord() = true) {\r\n            player.sendMessage(&quot;Hello World&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nThen I tried several other things but I don&#39;t remember them.","title":"Minecraft Bukkit and Spigot get item in jukebox","body":"<p>I am creating a plugin, with Bukkit in Minecraft : 1.19.4 and I need to see if there is a <strong>specific Music Disc</strong> in a <strong>JukeBox</strong> when the player right clicks on the block but I can't find a way to do that.</p>\n<p>So I tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestCD implements Listener {\n\n    @EventHandler\n    public void onInteract(PlayerInteractEvent event) {\n        Player player = event.getPlayer();\n        Action action = event.getAction();\n        ItemStack it = event.getItem();\n        Block block = event.getClickedBlock();\n        BlockData blockD = block.getBlockData();\n\n\n        if (it != null &amp;&amp; action == Action.LEFT_CLICK_BLOCK &amp;&amp; block.getType().equals(Material.JUKEBOX) &amp;&amp; blockD.getMaterial().isRecord() = true) {\n            player.sendMessage(&quot;Hello World&quot;);\n        }\n    }\n</code></pre>\n<p>Then I tried several other things but I don't remember them.</p>\n"},{"tags":["java","minecraft","minecraft-forge"],"owner":{"account_id":28185197,"reputation":1,"user_id":21541534,"display_name":"Kyle Hultgren"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680574083,"creation_date":1680335738,"question_id":75904908,"body_markdown":"The problem is that the custom music disc I created gets used when I click on the jukebox but no music plays and when the jukebox is broken or clicked on again the disc does not pop back out. It disappears completely after being used on the jukebox. \r\n\r\nI registerd the RecordItem like this:\r\n```java\r\npublic static final RegistryObject&lt;RecordItem&gt; IMP_TYPE_BEAT_DISC = ITEMS.register(&quot;imp_type_beat_disc&quot;,\r\n        () -&gt; new RecordItem(5, ModSoundEvents.IMP_TYPE_BEAT, new Item.Properties().stacksTo(1).rarity(Rarity.RARE), 3600));\r\n```\r\n\r\nI then loaded up the client and right clicked on the jukebox expecting it to play the song but My disc disappeared without any music\r\n\r\nThen I tried to extend the RecordItem class since I could not edit it and used system chats sent to the player to see if the flow of the code got to the part where it sets the jukebox&#39;s record and changes its state. I found out that it does in fact reach where it is supposed to. I also know that the sound does work because I was able to just trigger it to play when right clicking on another custom item.\r\n```java\r\n@Override\r\n    public InteractionResult useOn(UseOnContext p_43048_) {\r\n        Level level = p_43048_.getLevel();\r\n        Player player = p_43048_.getPlayer();\r\n        BlockPos blockpos = p_43048_.getClickedPos();\r\n        BlockState blockstate = level.getBlockState(blockpos);\r\n        if (blockstate.is(Blocks.JUKEBOX) &amp;&amp; !blockstate.getValue(JukeboxBlock.HAS_RECORD)) {\r\n         ItemStack itemstack = p_43048_.getItemInHand();\r\n         if (!level.isClientSide) {\r\n            BlockEntity blockentity = level.getBlockEntity(blockpos);\r\n            if (blockentity instanceof JukeboxBlockEntity) {\r\n               JukeboxBlockEntity jukeboxblockentity = (JukeboxBlockEntity)blockentity;\r\n               jukeboxblockentity.setFirstItem(itemstack.copy());\r\n               level.gameEvent(GameEvent.BLOCK_CHANGE, blockpos, GameEvent.Context.of(player, blockstate));\r\n               player.sendSystemMessage(Component.literal(&quot;success&quot;));\r\n            }\r\n\r\n            itemstack.shrink(1);\r\n            if (player != null) {\r\n               //player.awardStat(Stats.PLAY_RECORD);\r\n               player.sendSystemMessage(Component.literal(&quot;Award that stat&quot;));\r\n            }\r\n         }\r\n\r\n      } else {\r\n         player.sendSystemMessage(Component.literal(&quot;Not jukebix&quot;));\r\n```\r\nsuccess and award that stat were printed showing that the blockstate changing code did run.\r\n\r\nI&#39;ve tried these things and 1.18.1 is the most recent thing I could find on using RecordItem to implement custom music discs.\r\n`","title":"RecordItem being consumed by jukebox but not changing jukebox block state to play song (Forge 1.19.4)","body":"<p>The problem is that the custom music disc I created gets used when I click on the jukebox but no music plays and when the jukebox is broken or clicked on again the disc does not pop back out. It disappears completely after being used on the jukebox.</p>\n<p>I registerd the RecordItem like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static final RegistryObject&lt;RecordItem&gt; IMP_TYPE_BEAT_DISC = ITEMS.register(&quot;imp_type_beat_disc&quot;,\n        () -&gt; new RecordItem(5, ModSoundEvents.IMP_TYPE_BEAT, new Item.Properties().stacksTo(1).rarity(Rarity.RARE), 3600));\n</code></pre>\n<p>I then loaded up the client and right clicked on the jukebox expecting it to play the song but My disc disappeared without any music</p>\n<p>Then I tried to extend the RecordItem class since I could not edit it and used system chats sent to the player to see if the flow of the code got to the part where it sets the jukebox's record and changes its state. I found out that it does in fact reach where it is supposed to. I also know that the sound does work because I was able to just trigger it to play when right clicking on another custom item.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public InteractionResult useOn(UseOnContext p_43048_) {\n        Level level = p_43048_.getLevel();\n        Player player = p_43048_.getPlayer();\n        BlockPos blockpos = p_43048_.getClickedPos();\n        BlockState blockstate = level.getBlockState(blockpos);\n        if (blockstate.is(Blocks.JUKEBOX) &amp;&amp; !blockstate.getValue(JukeboxBlock.HAS_RECORD)) {\n         ItemStack itemstack = p_43048_.getItemInHand();\n         if (!level.isClientSide) {\n            BlockEntity blockentity = level.getBlockEntity(blockpos);\n            if (blockentity instanceof JukeboxBlockEntity) {\n               JukeboxBlockEntity jukeboxblockentity = (JukeboxBlockEntity)blockentity;\n               jukeboxblockentity.setFirstItem(itemstack.copy());\n               level.gameEvent(GameEvent.BLOCK_CHANGE, blockpos, GameEvent.Context.of(player, blockstate));\n               player.sendSystemMessage(Component.literal(&quot;success&quot;));\n            }\n\n            itemstack.shrink(1);\n            if (player != null) {\n               //player.awardStat(Stats.PLAY_RECORD);\n               player.sendSystemMessage(Component.literal(&quot;Award that stat&quot;));\n            }\n         }\n\n      } else {\n         player.sendSystemMessage(Component.literal(&quot;Not jukebix&quot;));\n</code></pre>\n<p>success and award that stat were printed showing that the blockstate changing code did run.</p>\n<p>I've tried these things and 1.18.1 is the most recent thing I could find on using RecordItem to implement custom music discs.\n`</p>\n"},{"tags":["java","minecraft","spigot"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1680436388,"post_id":75907350,"comment_id":133894965,"body_markdown":"No command is run when clicking on NPC, only some event but they depend of the platform","body":"No command is run when clicking on NPC, only some event but they depend of the platform"}],"answers":[{"tags":[],"owner":{"account_id":20071193,"reputation":26,"user_id":14715914,"display_name":"SandAx3r"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680476728,"creation_date":1680476728,"answer_id":75915057,"question_id":75907350,"body_markdown":"There is not a direct event for that, but you can use &quot;PlayerInteractEntity&quot; and compare if the clicked entity is a Villager or whatever NPC you want.\r\n\r\nSomething like this:\r\n\r\n    @EventHandler\r\n    public void onPlayerInteractEntity(PlayerInteractEntityEvent e) {\r\n        Entity ent = e.getRightClicked();\r\n        \r\n        if (ent instanceof NPC){\r\n        // Do whatever\r\n        }\r\n    }","title":"How can i get the command which executes when you click an npc?","body":"<p>There is not a direct event for that, but you can use &quot;PlayerInteractEntity&quot; and compare if the clicked entity is a Villager or whatever NPC you want.</p>\n<p>Something like this:</p>\n<pre><code>@EventHandler\npublic void onPlayerInteractEntity(PlayerInteractEntityEvent e) {\n    Entity ent = e.getRightClicked();\n    \n    if (ent instanceof NPC){\n    // Do whatever\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20050331,"reputation":11,"user_id":20492083,"display_name":"VanProBRO"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1680574052,"creation_date":1680365374,"question_id":75907350,"body_markdown":"I`m tried to get the command which executes when i click an npc on my server. How can i get this command?\r\n\r\nI tried to use some modded client to get it but it didnt helped.","title":"How can i get the command which executes when you click an npc?","body":"<p>I`m tried to get the command which executes when i click an npc on my server. How can i get this command?</p>\n<p>I tried to use some modded client to get it but it didnt helped.</p>\n"},{"tags":["java","jetty"],"comments":[{"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"score":0,"creation_date":1680637265,"post_id":75924957,"comment_id":133931266,"body_markdown":"[Jetty 9.x is now at End of Community Support](https://github.com/eclipse/jetty.project/issues/7958), you should be upgrading to Jetty 10/11/12 at this point in time.","body":"<a href=\"https://github.com/eclipse/jetty.project/issues/7958\" rel=\"nofollow noreferrer\">Jetty 9.x is now at End of Community Support</a>, you should be upgrading to Jetty 10/11/12 at this point in time."}],"owner":{"account_id":8765800,"reputation":4847,"user_id":6724844,"accept_rate":95,"display_name":"Heisenberg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680573556,"creation_date":1680573556,"question_id":75924957,"body_markdown":"When I work around with `jetty` server , I found following logs\r\n```\r\n[\u001B[1;34mINFO\u001B[m] Logging initialized @3758ms to org.eclipse.jetty.util.log.Slf4jLog\r\n[\u001B[1;34mINFO\u001B[m] Webapp source directory = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test\\src\\main\\webapp\r\n[\u001B[1;34mINFO\u001B[m] Reload Mechanic: automatic\r\n[\u001B[1;34mINFO\u001B[m] nonBlocking:false\r\n[\u001B[1;34mINFO\u001B[m] Classes = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test\\target\\classes\r\n[\u001B[1;34mINFO\u001B[m] Configuring Jetty for project: test\r\n[\u001B[1;34mINFO\u001B[m] Context path = /\r\n[\u001B[1;34mINFO\u001B[m] Tmp directory = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test\\target\\tmp\r\n[\u001B[1;34mINFO\u001B[m] Web defaults = org/eclipse/jetty/webapp/webdefault.xml\r\n[\u001B[1;34mINFO\u001B[m] Web overrides =  none\r\n[\u001B[1;34mINFO\u001B[m] web.xml file = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test/src/main/webapp/WEB-INF/web.xml\r\n[\u001B[1;34mINFO\u001B[m] Webapp directory = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test\\src\\main\\webapp\r\n[\u001B[1;34mINFO\u001B[m] jetty-9.4.22.v20191022; built: 2019-10-22T13:37:13.455Z; git: b1e6b55512e008f7fbdf1cbea4ff8a6446d1073b; jvm 1.8.0_345-b01\r\n[\u001B[1;34mINFO\u001B[m] JVM Runtime does not support Modules\r\n[\u001B[1;34mINFO\u001B[m] Scanning elapsed time=948ms\r\n[\u001B[1;34mINFO\u001B[m] DefaultSessionIdManager workerName=node0\r\n[\u001B[1;34mINFO\u001B[m] No SessionScavenger set, using defaults\r\n[\u001B[1;34mINFO\u001B[m] node0 Scavenging every 660000ms\r\n[\u001B[1;34mINFO\u001B[m] Initializing Spring root WebApplicationContext\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n[\u001B[1;34mINFO\u001B[m] Started o.e.j.m.p.JettyWebAppContext@f1266c6{Struts,/,file:///C:/Users/h-miyashita/Desktop/local%20repository/src/test/src/main/webapp/,AVAILABLE}{file:///C:/Users/h-miyashita/Desktop/local%20repository/src/test/src/main/webapp/}\r\n[\u001B[1;34mINFO\u001B[m] Started ServerConnector@16cbba0f{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\r\n[\u001B[1;34mINFO\u001B[m] Started @8096ms\r\n[\u001B[1;34mINFO\u001B[m] Started Jetty Server\r\n```\r\nI have some questions about this logs...\r\nHow to configure this settings?\r\n\r\n①\r\n```\r\nnonBlocking:false\r\n```\r\nHow to configure this settings?\r\n\r\n②\r\n```\r\nContext path = /\r\n```\r\nI&#39;ve found following output, what is `scavenging` ? is it periodically executed ?\r\nI searched around this , but I am still lost in this info.\r\n\r\n③\r\n```\r\nNo SessionScavenger set, using defaults\r\nnode0 Scavenging every 660000ms\r\n```\r\n\r\nThanks","title":"【jetty server】No SessionScavenger set, using defaults and so on","body":"<p>When I work around with <code>jetty</code> server , I found following logs</p>\n<pre><code>[[1;34mINFO[m] Logging initialized @3758ms to org.eclipse.jetty.util.log.Slf4jLog\n[[1;34mINFO[m] Webapp source directory = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test\\src\\main\\webapp\n[[1;34mINFO[m] Reload Mechanic: automatic\n[[1;34mINFO[m] nonBlocking:false\n[[1;34mINFO[m] Classes = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test\\target\\classes\n[[1;34mINFO[m] Configuring Jetty for project: test\n[[1;34mINFO[m] Context path = /\n[[1;34mINFO[m] Tmp directory = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test\\target\\tmp\n[[1;34mINFO[m] Web defaults = org/eclipse/jetty/webapp/webdefault.xml\n[[1;34mINFO[m] Web overrides =  none\n[[1;34mINFO[m] web.xml file = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test/src/main/webapp/WEB-INF/web.xml\n[[1;34mINFO[m] Webapp directory = C:\\Users\\h-miyashita\\Desktop\\local repository\\src\\test\\src\\main\\webapp\n[[1;34mINFO[m] jetty-9.4.22.v20191022; built: 2019-10-22T13:37:13.455Z; git: b1e6b55512e008f7fbdf1cbea4ff8a6446d1073b; jvm 1.8.0_345-b01\n[[1;34mINFO[m] JVM Runtime does not support Modules\n[[1;34mINFO[m] Scanning elapsed time=948ms\n[[1;34mINFO[m] DefaultSessionIdManager workerName=node0\n[[1;34mINFO[m] No SessionScavenger set, using defaults\n[[1;34mINFO[m] node0 Scavenging every 660000ms\n[[1;34mINFO[m] Initializing Spring root WebApplicationContext\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\n[[1;34mINFO[m] Started o.e.j.m.p.JettyWebAppContext@f1266c6{Struts,/,file:///C:/Users/h-miyashita/Desktop/local%20repository/src/test/src/main/webapp/,AVAILABLE}{file:///C:/Users/h-miyashita/Desktop/local%20repository/src/test/src/main/webapp/}\n[[1;34mINFO[m] Started ServerConnector@16cbba0f{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\n[[1;34mINFO[m] Started @8096ms\n[[1;34mINFO[m] Started Jetty Server\n</code></pre>\n<p>I have some questions about this logs...\nHow to configure this settings?</p>\n<p>①</p>\n<pre><code>nonBlocking:false\n</code></pre>\n<p>How to configure this settings?</p>\n<p>②</p>\n<pre><code>Context path = /\n</code></pre>\n<p>I've found following output, what is <code>scavenging</code> ? is it periodically executed ?\nI searched around this , but I am still lost in this info.</p>\n<p>③</p>\n<pre><code>No SessionScavenger set, using defaults\nnode0 Scavenging every 660000ms\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":10916113,"reputation":43,"user_id":8023862,"display_name":"HKhan"},"score":2,"creation_date":1503767675,"post_id":45896989,"comment_id":78754669,"body_markdown":"I have already put the scope as test in the above code.Also the Class which i used SpringRunner is in /src/test/java folder.But still i get the same error as before.","body":"I have already put the scope as test in the above code.Also the Class which i used SpringRunner is in /src/test/java folder.But still i get the same error as before."},{"owner":{"account_id":1564360,"reputation":1462,"user_id":1453475,"accept_rate":65,"display_name":"mostafa.S"},"score":1,"creation_date":1551972998,"post_id":45896989,"comment_id":96845276,"body_markdown":"actually I had the same problem and by moving the class to test folder it got fixed. @HKhan maybe you need to right click on your project and then go to maven and then click on Update Project. and the clean your project.","body":"actually I had the same problem and by moving the class to test folder it got fixed. @HKhan maybe you need to right click on your project and then go to maven and then click on Update Project. and the clean your project."},{"owner":{"account_id":7616827,"reputation":432,"user_id":5775991,"accept_rate":27,"display_name":"Atom999"},"score":0,"creation_date":1568999886,"post_id":45896989,"comment_id":102467567,"body_markdown":"This fixed for me.. ESPECIALLY that last `*/java/` folder, which is what I was missing.","body":"This fixed for me.. ESPECIALLY that last <code>*&#47;java&#47;</code> folder, which is what I was missing."},{"owner":{"account_id":5224072,"reputation":557,"user_id":4176599,"accept_rate":60,"display_name":"Sahib Khan"},"score":0,"creation_date":1594516066,"post_id":45896989,"comment_id":111153196,"body_markdown":"You are a genius. Thanks","body":"You are a genius. Thanks"}],"tags":[],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"comment_count":4,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1503761335,"creation_date":1503761335,"answer_id":45896989,"question_id":45896905,"body_markdown":"It could be the scope, which is set to `test`.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nPlease make sure that the class that has the `SpringRunner` is in your `/src/test/java` folder.","title":"The import org.springframework.test.context.junit4.SpringRunner cannot be resolved","body":"<p>It could be the scope, which is set to <code>test</code>.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Please make sure that the class that has the <code>SpringRunner</code> is in your <code>/src/test/java</code> folder.</p>\n"},{"comments":[{"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"score":0,"creation_date":1503762123,"post_id":45897085,"comment_id":78752969,"body_markdown":"Should not import springframework dependencies with spring boot, nor should you override the versions if you do. Starters are prefered when possible.","body":"Should not import springframework dependencies with spring boot, nor should you override the versions if you do. Starters are prefered when possible."},{"owner":{"account_id":10916113,"reputation":43,"user_id":8023862,"display_name":"HKhan"},"score":0,"creation_date":1503769460,"post_id":45897085,"comment_id":78755255,"body_markdown":"This worked fine.That error was flew away.But now i can&#39;t clean compile the package.It says that there&#39;s test failures.","body":"This worked fine.That error was flew away.But now i can&#39;t clean compile the package.It says that there&#39;s test failures."},{"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"score":0,"creation_date":1503855308,"post_id":45897085,"comment_id":78773784,"body_markdown":"@HKhan if this was required there is something wrong with your project setup or dependencies that have not downloaded correctly in the .m2 repo. This is not required to to get the spring runner in a spring boot application and it is not recommended.","body":"@HKhan if this was required there is something wrong with your project setup or dependencies that have not downloaded correctly in the .m2 repo. This is not required to to get the spring runner in a spring boot application and it is not recommended."},{"owner":{"account_id":10916113,"reputation":43,"user_id":8023862,"display_name":"HKhan"},"score":0,"creation_date":1504589681,"post_id":45897085,"comment_id":79054659,"body_markdown":"@DarrenForsythe i deleted the whole .m2 repo and re added it.So now it&#39;s working as it should work.Thanks for the guide.","body":"@DarrenForsythe i deleted the whole .m2 repo and re added it.So now it&#39;s working as it should work.Thanks for the guide."}],"tags":[],"owner":{"account_id":11633910,"reputation":21,"user_id":8521004,"display_name":"Sikandar"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1503762009,"creation_date":1503762009,"answer_id":45897085,"question_id":45896905,"body_markdown":"I think a dependency is missing:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.10.RELEASE&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"The import org.springframework.test.context.junit4.SpringRunner cannot be resolved","body":"<p>I think a dependency is missing:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n    &lt;version&gt;4.3.10.RELEASE&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user2053184"},"score":0,"creation_date":1556928957,"post_id":50186229,"comment_id":98607074,"body_markdown":"Perfect, this fixed a bunch of my errors. Although I did go straight to just forcing the update. Now I am unit and integration testing like a pro, semi-pro? :)","body":"Perfect, this fixed a bunch of my errors. Although I did go straight to just forcing the update. Now I am unit and integration testing like a pro, semi-pro? :)"},{"owner":{"account_id":4185130,"reputation":128,"user_id":3429064,"display_name":"fmag"},"score":0,"creation_date":1639413634,"post_id":50186229,"comment_id":124336753,"body_markdown":"Thanks, this worked for me","body":"Thanks, this worked for me"}],"tags":[],"owner":{"account_id":12928741,"reputation":359,"user_id":9348453,"display_name":"da-vinci-code"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1525499870,"creation_date":1525499870,"answer_id":50186229,"question_id":45896905,"body_markdown":"I had the latest eclipse and also the latest junit 4.12 jar but still I use to get this problem. I finally fixed it. Follow these steps:\r\n\r\n1. Close your maven project created in eclipse and close eclipse or STS tool.\r\n2. Go to Maven repository: \r\n\r\n&gt; C:\\Users\\&lt;user/admin&gt;\\.m2\\repository\\org\\springframework\\\r\n\r\n and delete everything inside springframework folder.\r\n\r\n3. Now open eclipse/STS tool and then open your project.\r\n4. The project will build automatically and the error disappears.\r\n5. If it doesn&#39;t then \r\n\r\n&gt; right click on project -&gt; Maven -&gt; Update Project.. -&gt; check the Force\r\n&gt; Update and click OK\r\n\r\n","title":"The import org.springframework.test.context.junit4.SpringRunner cannot be resolved","body":"<p>I had the latest eclipse and also the latest junit 4.12 jar but still I use to get this problem. I finally fixed it. Follow these steps:</p>\n\n<ol>\n<li>Close your maven project created in eclipse and close eclipse or STS tool.</li>\n<li>Go to Maven repository: </li>\n</ol>\n\n<blockquote>\n  <p>C:\\Users\\.m2\\repository\\org\\springframework\\</p>\n</blockquote>\n\n<p>and delete everything inside springframework folder.</p>\n\n<ol start=\"3\">\n<li>Now open eclipse/STS tool and then open your project.</li>\n<li>The project will build automatically and the error disappears.</li>\n<li>If it doesn't then </li>\n</ol>\n\n<blockquote>\n  <p>right click on project -> Maven -> Update Project.. -> check the Force\n  Update and click OK</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3648548,"reputation":2986,"user_id":3041229,"display_name":"ValerioMC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538593564,"creation_date":1538593564,"answer_id":52634072,"question_id":45896905,"body_markdown":"Why are your using a BUILD-SNAPSHOT?\r\n\r\n\r\nIn your pom.xml you have\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\r\nuse version \r\n\r\n    &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;\r\n\r\nor another RELEASE version.\r\n\r\nDon&#39;t override library version unless is really necessary.\r\n\r\n","title":"The import org.springframework.test.context.junit4.SpringRunner cannot be resolved","body":"<p>Why are your using a BUILD-SNAPSHOT?</p>\n\n<p>In your pom.xml you have</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0.BUILD-SNAPSHOT&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>use version </p>\n\n<pre><code>&lt;version&gt;2.0.4.RELEASE&lt;/version&gt;\n</code></pre>\n\n<p>or another RELEASE version.</p>\n\n<p>Don't override library version unless is really necessary.</p>\n"}],"owner":{"account_id":10916113,"reputation":43,"user_id":8023862,"display_name":"HKhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30933,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1680572493,"creation_date":1503760714,"question_id":45896905,"body_markdown":"I&#39;m trying to resolve this from sometime now.But Still i didn&#39;t get it solved.I just downloaded a spring project form spring.io and just imported it as a Maven project to Eclipse IDE.After that i get this above mentioned error.\r\n\r\n**The import org.springframework.test.context.junit4 cannot be resolved**\r\n\r\nI have attached my code below.Together with the full pom.xml content.\r\n\r\n    package com.Ticket.Booking.TicketBooking;\r\n    \r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.junit4.SpringRunner;//I got the error in this line\r\n    \r\n    @RunWith(SpringRunner.class)//Also in this line too.\r\n    @SpringBootTest\r\n    public class TicketBookingApplicationTests {\r\n    \r\n    \t@Test\r\n    \tpublic void contextLoads() {\r\n    \t}\r\n    \r\n    }\r\n\r\nHere&#39;s my pom.xml file.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.Ticket.Booking&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;Ticket-Booking&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;Ticket-Booking&lt;/name&gt;\r\n\t&lt;description&gt;Project For Book Movie Tickets Online.&lt;/description&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.0.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\r\n\t&lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t&lt;/pluginRepositories&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n\r\nPlease help me to solve this issue.It&#39;s very much important for me as a student.","title":"The import org.springframework.test.context.junit4.SpringRunner cannot be resolved","body":"<p>I'm trying to resolve this from sometime now.But Still i didn't get it solved.I just downloaded a spring project form spring.io and just imported it as a Maven project to Eclipse IDE.After that i get this above mentioned error.</p>\n\n<p><strong>The import org.springframework.test.context.junit4 cannot be resolved</strong></p>\n\n<p>I have attached my code below.Together with the full pom.xml content.</p>\n\n<pre><code>package com.Ticket.Booking.TicketBooking;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;//I got the error in this line\n\n@RunWith(SpringRunner.class)//Also in this line too.\n@SpringBootTest\npublic class TicketBookingApplicationTests {\n\n    @Test\n    public void contextLoads() {\n    }\n\n}\n</code></pre>\n\n<p>Here's my pom.xml file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n</code></pre>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    4.0.0</p>\n\n<pre><code>&lt;groupId&gt;com.Ticket.Booking&lt;/groupId&gt;\n&lt;artifactId&gt;Ticket-Booking&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;Ticket-Booking&lt;/name&gt;\n&lt;description&gt;Project For Book Movie Tickets Online.&lt;/description&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0.BUILD-SNAPSHOT&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;spring-snapshots&lt;/id&gt;\n        &lt;name&gt;Spring Snapshots&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n        &lt;id&gt;spring-milestones&lt;/id&gt;\n        &lt;name&gt;Spring Milestones&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n\n&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;spring-snapshots&lt;/id&gt;\n        &lt;name&gt;Spring Snapshots&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;spring-milestones&lt;/id&gt;\n        &lt;name&gt;Spring Milestones&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n</code></pre>\n\n<p></p>\n\n<p>Please help me to solve this issue.It's very much important for me as a student.</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1651457796,"post_id":72077468,"comment_id":127362545,"body_markdown":"_&quot;...it doesn&#39;t work&quot;_?  You need to be more specific than that.","body":"<i>&quot;...it doesn&#39;t work&quot;</i>?  You need to be more specific than that."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1668429660,"post_id":74396813,"comment_id":131395344,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74396813/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"score":0,"creation_date":1668621247,"post_id":74396813,"comment_id":131452145,"body_markdown":"This does not provide an answer to the question. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment); instead, [provide answers that don&#39;t require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead). - [From Review](/review/late-answers/33155414)","body":"This does not provide an answer to the question. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>; instead, <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\">provide answers that don&#39;t require clarification from the asker</a>. - <a href=\"/review/late-answers/33155414\">From Review</a>"}],"tags":[],"owner":{"account_id":26895472,"reputation":11,"user_id":20473467,"display_name":"Renzi Colorado"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668126622,"creation_date":1668126622,"answer_id":74396813,"question_id":72077468,"body_markdown":"Did you see any kind of alert? Like this, or maybe at the bottom, when you first load the project [Error Missing Mandatory ClassPath][1]? If this is your case, try clicking on the message.Netbeans need to donwload some extra files.  I had the same problem and it worked for me\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vNywu.png","title":"Missing mandatory Classpath entries. Resolve Project Problems. in Apache NetBeans","body":"<p>Did you see any kind of alert? Like this, or maybe at the bottom, when you first load the project <a href=\"https://i.stack.imgur.com/vNywu.png\" rel=\"nofollow noreferrer\">Error Missing Mandatory ClassPath</a>? If this is your case, try clicking on the message.Netbeans need to donwload some extra files.  I had the same problem and it worked for me</p>\n"},{"tags":[],"owner":{"account_id":28208124,"reputation":1,"user_id":21560852,"display_name":"Erion Kola"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1680571607,"creation_date":1680571607,"answer_id":75924828,"question_id":72077468,"body_markdown":"click resolve,problems window shows nothing","title":"Missing mandatory Classpath entries. Resolve Project Problems. in Apache NetBeans","body":"<p>click resolve,problems window shows nothing</p>\n"}],"owner":{"account_id":159764,"reputation":2984,"user_id":379371,"accept_rate":20,"display_name":"InfZero"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":762,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1680571607,"creation_date":1651414404,"question_id":72077468,"body_markdown":"I&#39;m working on a Java web application in Apache NetBeans. Everything is working well, but a warning message appears at the package level (first line):\r\n\r\n&gt; Missing mandatory Classpath entries. Resolve Project Problems.\r\n\r\nHere is a screenshot of that problem in the IDE:\r\n\r\n[![Missing mandatory Classpath entries. Resolve Project Problems.][1]][1]\r\n\r\nThe yellow bulb offers me the possibility to solve the problem, but it doesn&#39;t work.\r\n\r\n  [1]: https://i.stack.imgur.com/8tinE.png","title":"Missing mandatory Classpath entries. Resolve Project Problems. in Apache NetBeans","body":"<p>I'm working on a Java web application in Apache NetBeans. Everything is working well, but a warning message appears at the package level (first line):</p>\n<blockquote>\n<p>Missing mandatory Classpath entries. Resolve Project Problems.</p>\n</blockquote>\n<p>Here is a screenshot of that problem in the IDE:</p>\n<p><a href=\"https://i.stack.imgur.com/8tinE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8tinE.png\" alt=\"Missing mandatory Classpath entries. Resolve Project Problems.\" /></a></p>\n<p>The yellow bulb offers me the possibility to solve the problem, but it doesn't work.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1680482696,"post_id":75915340,"comment_id":133901200,"body_markdown":"1. Don&#39;t use `java.util.*` based time/date APIs; 2. Don&#39;t do &quot;maths&quot; based calculations on date/time values, as it&#39;s not as simple as that, instead, make use of the `java.time.*` APIs instead","body":"1. Don&#39;t use <code>java.util.*</code> based time/date APIs; 2. Don&#39;t do &quot;maths&quot; based calculations on date/time values, as it&#39;s not as simple as that, instead, make use of the <code>java.time.*</code> APIs instead"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1680482931,"post_id":75915340,"comment_id":133901222,"body_markdown":"For example, `Duration.between(LocalDateTime.of(2023, Month.JANUARY, 1, 0, 0), LocalDateTime.of(2023, Month.FEBRUARY, 1, 23, 59)).toDays()` prints `31`","body":"For example, <code>Duration.between(LocalDateTime.of(2023, Month.JANUARY, 1, 0, 0), LocalDateTime.of(2023, Month.FEBRUARY, 1, 23, 59)).toDays()</code> prints <code>31</code>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1680483216,"post_id":75915340,"comment_id":133901249,"body_markdown":"You can also make use of `ChronoUnit.DAYS.between(LocalDate.of(2023, Month.JANUARY, 1), LocalDate.of(2023, Month.FEBRUARY, 1))` which is probably easier and closer to what you want","body":"You can also make use of <code>ChronoUnit.DAYS.between(LocalDate.of(2023, Month.JANUARY, 1), LocalDate.of(2023, Month.FEBRUARY, 1))</code> which is probably easier and closer to what you want"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1680483275,"post_id":75915340,"comment_id":133901254,"body_markdown":"That `getDaysBetween` method looks like a rich source of confusing problems.","body":"That <code>getDaysBetween</code> method looks like a rich source of confusing problems."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1680488156,"post_id":75915340,"comment_id":133901774,"body_markdown":"Your colleague’s `getDaysBetween` method is not only using the outdated `Date` class that no none should use, it is also using the wrong approach assuming that a day is always 24 hours. A day can sometimes be 23 hours, 25 hours or some other amounts. Because of summer time (DST) and other time anomalies. That method will occassionally give wrong results.","body":"Your colleague’s <code>getDaysBetween</code> method is not only using the outdated <code>Date</code> class that no none should use, it is also using the wrong approach assuming that a day is always 24 hours. A day can sometimes be 23 hours, 25 hours or some other amounts. Because of summer time (DST) and other time anomalies. That method will occassionally give wrong results."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680488823,"post_id":75915340,"comment_id":133901847,"body_markdown":"Does this answer your question? [Why is January month 0 in Java Calendar?](https://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar\">Why is January month 0 in Java Calendar?</a>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1680489432,"post_id":75915340,"comment_id":133901896,"body_markdown":"Minor points: 1. Your colleague should not cast `long` to `int` without checking for overflow. They should use `Math.toIntExact()`. 2. While using `01` and `02` for January and February may look nice (and seduce you into thinking that its right), you will be surprised when you try `08` for August or `09` for September and your code will not compile. A leading 0 means an octal number, so leave those zeroes out.","body":"Minor points: 1. Your colleague should not cast <code>long</code> to <code>int</code> without checking for overflow. They should use <code>Math.toIntExact()</code>. 2. While using <code>01</code> and <code>02</code> for January and February may look nice (and seduce you into thinking that its right), you will be surprised when you try <code>08</code> for August or <code>09</code> for September and your code will not compile. A leading 0 means an octal number, so leave those zeroes out."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680570944,"creation_date":1680487866,"answer_id":75915612,"question_id":75915340,"body_markdown":"# tl;dr\r\n\r\nIf you really want a count of seconds.\r\n\r\n    Duration\r\n    .between(\r\n        LocalDate\r\n        .of( y1 , m1 , d1 )               // Returns a `LocalDate` object.\r\n        .atStartOfDay( ZoneOffset.UTC )   // Returns a `ZonedDateTime` object.\r\n        .toInstant() ,                    // Returns a `Instant` object.\r\n        LocalDate\r\n        .of( y2 , m2 , d2 ) \r\n        .atStartOfDay( ZoneOffset.UTC )\r\n        .toInstant() ,\r\n    )                                     // Returns a `Duration` object.\r\n    .toSeconds()                          // Returns a `long` primitive value.\r\n\r\nBut if you want to count the number of calendar days between dates, you are working much too hard.\r\n\r\n    long daysElapsed = \r\n        ChronoUnit\r\n        .DAYS\r\n        .between(\r\n            LocalDate.of( 2023 , 1 , 1 ) , \r\n            LocalDate.of( 2023 , 2 , 1 )\r\n        )\r\n    ;\r\n\r\n\r\n# Details\r\n\r\n## Avoid legacy date-time classes\r\n\r\nThe [Answer by Zedki][1] is technically correct but uses terribly flawed date-time classes that were years ago supplanted by the modern *java.time* classes defined by JSR 310.\r\n\r\nOne of the many flaws in the `Calendar` class is that it counts the month number by zero-based index counting. Silly, and confusing: January is 0, December is 11. \r\n\r\nIn contrast, the *java.time* classes use sane counting. Months run 1-12 for January-December.\r\n\r\n\r\n## *java.time*\r\n\r\nThe `java.util.Date` class was replaced by `java.time.Instant`, both representing a moment as seen in UTC, that is, with an offset from UTC of zero hours-minutes-seconds.\r\n\r\nYour inputs of year-month-day can be replaced with a [`java.time.LocalDate`][2] object. That class represents a date-only value, without time-of-day, and without time zone or offset.\r\n\r\nYour method name `getDate` is not very descriptive. Apparently you want to determine the first moment of the day on the specified date as seen in UTC (an offset of zero). So we can use the descriptive name `firstMomentOfTheDayInUtc`. \r\n\r\nTo [determine the first moment of the day][3], always let *java.time* do the work. Never assume the day starts at 00:00. Some days on some dates in some time zones start at another time, such as 01:00. In UTC, we do know that every day starts at 00:00 by definition, but still we can let *java.time* figure that out. We end up with a `ZonedDateTime` object, representing a moment as seen through the wall-clock time of a particular time zone. \r\n\r\nThe `Instant` class is the basic building block of *java.time*. So from our `ZonedDateTime` object we extract an `Instant`, and return the object from our method.\r\n\r\n    private Instant firstMomentOfTheDayInUtc ( LocalDate localDate ) \r\n    {\r\n        ZonedDateTime zdt = localDate.atStartOfDay( ZoneOffset.UTC ) ;\r\n        Instant instant = zdt.toInstant() ;\r\n        return instant ;\r\n    }\r\n\r\nThen you want to get the elapsed time between two of these `Instant` objects as a count of whole seconds. No need for your method `getDaysBetween`, as the code is so simple and brief in *java.time*. \r\n\r\nThe `Duration` class represents a span-of-time not attached to the timeline.\r\n\r\n    Duration duration = Duration.between( instantX , instantY ) ;\r\n\r\nThen interrogate for a total number of seconds. \r\n\r\n    long seconds = duration.toSeconds() ;\r\n\r\nBut seconds is not needed to address your ultimate goal. If you merely want to know the number of elapsed calendar days, use the enum object [`ChronoUnit.DAYS`][4] and its [`between`][5] method.\r\n\r\n    long daysElapsed = \r\n        ChronoUnit.DAYS.between(\r\n            LocalDate.of( 2023 , 1 , 1 ) , \r\n            LocalDate.of( 2023 , 2 , 1 )\r\n        );\r\n   \r\n\r\n # Octal literals\r\n\r\nYour code:\r\n\r\n    getDate(2023, 01, 01)\r\n\r\nAs [commented by Ole V.V.][6], be careful with your numeric literals. Leading with a zero digit marks the literal as an octal (base 8) number rather than a decimal (base 10) number. \r\n\r\n - `01` through `07` you can get away with. Those octals are the same as decimals. \r\n - `08` &amp; `09` are nonsense, and won’t compile.\r\n - `010` is 8, `011` is 9. \r\n\r\n    \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/75915365/642706\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDate.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDate.html#atStartOfDay(java.time.ZoneId)\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/temporal/ChronoUnit.html#DAYS\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/temporal/ChronoUnit.html#between(java.time.temporal.Temporal,java.time.temporal.Temporal)\r\n  [6]: https://stackoverflow.com/questions/75915340/counting-number-of-days-between-date-in-java-using-seconds-results-in-fewer-days/75915612#comment133901896_75915340","title":"Counting number of days between date in Java using seconds results in fewer days?","body":"<h1>tl;dr</h1>\n<p>If you really want a count of seconds.</p>\n<pre><code>Duration\n.between(\n    LocalDate\n    .of( y1 , m1 , d1 )               // Returns a `LocalDate` object.\n    .atStartOfDay( ZoneOffset.UTC )   // Returns a `ZonedDateTime` object.\n    .toInstant() ,                    // Returns a `Instant` object.\n    LocalDate\n    .of( y2 , m2 , d2 ) \n    .atStartOfDay( ZoneOffset.UTC )\n    .toInstant() ,\n)                                     // Returns a `Duration` object.\n.toSeconds()                          // Returns a `long` primitive value.\n</code></pre>\n<p>But if you want to count the number of calendar days between dates, you are working much too hard.</p>\n<pre><code>long daysElapsed = \n    ChronoUnit\n    .DAYS\n    .between(\n        LocalDate.of( 2023 , 1 , 1 ) , \n        LocalDate.of( 2023 , 2 , 1 )\n    )\n;\n</code></pre>\n<h1>Details</h1>\n<h2>Avoid legacy date-time classes</h2>\n<p>The <a href=\"https://stackoverflow.com/a/75915365/642706\">Answer by Zedki</a> is technically correct but uses terribly flawed date-time classes that were years ago supplanted by the modern <em>java.time</em> classes defined by JSR 310.</p>\n<p>One of the many flaws in the <code>Calendar</code> class is that it counts the month number by zero-based index counting. Silly, and confusing: January is 0, December is 11.</p>\n<p>In contrast, the <em>java.time</em> classes use sane counting. Months run 1-12 for January-December.</p>\n<h2><em>java.time</em></h2>\n<p>The <code>java.util.Date</code> class was replaced by <code>java.time.Instant</code>, both representing a moment as seen in UTC, that is, with an offset from UTC of zero hours-minutes-seconds.</p>\n<p>Your inputs of year-month-day can be replaced with a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>java.time.LocalDate</code></a> object. That class represents a date-only value, without time-of-day, and without time zone or offset.</p>\n<p>Your method name <code>getDate</code> is not very descriptive. Apparently you want to determine the first moment of the day on the specified date as seen in UTC (an offset of zero). So we can use the descriptive name <code>firstMomentOfTheDayInUtc</code>.</p>\n<p>To <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDate.html#atStartOfDay(java.time.ZoneId)\" rel=\"nofollow noreferrer\">determine the first moment of the day</a>, always let <em>java.time</em> do the work. Never assume the day starts at 00:00. Some days on some dates in some time zones start at another time, such as 01:00. In UTC, we do know that every day starts at 00:00 by definition, but still we can let <em>java.time</em> figure that out. We end up with a <code>ZonedDateTime</code> object, representing a moment as seen through the wall-clock time of a particular time zone.</p>\n<p>The <code>Instant</code> class is the basic building block of <em>java.time</em>. So from our <code>ZonedDateTime</code> object we extract an <code>Instant</code>, and return the object from our method.</p>\n<pre><code>private Instant firstMomentOfTheDayInUtc ( LocalDate localDate ) \n{\n    ZonedDateTime zdt = localDate.atStartOfDay( ZoneOffset.UTC ) ;\n    Instant instant = zdt.toInstant() ;\n    return instant ;\n}\n</code></pre>\n<p>Then you want to get the elapsed time between two of these <code>Instant</code> objects as a count of whole seconds. No need for your method <code>getDaysBetween</code>, as the code is so simple and brief in <em>java.time</em>.</p>\n<p>The <code>Duration</code> class represents a span-of-time not attached to the timeline.</p>\n<pre><code>Duration duration = Duration.between( instantX , instantY ) ;\n</code></pre>\n<p>Then interrogate for a total number of seconds.</p>\n<pre><code>long seconds = duration.toSeconds() ;\n</code></pre>\n<p>But seconds is not needed to address your ultimate goal. If you merely want to know the number of elapsed calendar days, use the enum object <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/temporal/ChronoUnit.html#DAYS\" rel=\"nofollow noreferrer\"><code>ChronoUnit.DAYS</code></a> and its <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/temporal/ChronoUnit.html#between(java.time.temporal.Temporal,java.time.temporal.Temporal)\" rel=\"nofollow noreferrer\"><code>between</code></a> method.</p>\n<pre><code>long daysElapsed = \n    ChronoUnit.DAYS.between(\n        LocalDate.of( 2023 , 1 , 1 ) , \n        LocalDate.of( 2023 , 2 , 1 )\n    );\n</code></pre>\n<h1>Octal literals</h1>\n<p>Your code:</p>\n<pre><code>getDate(2023, 01, 01)\n</code></pre>\n<p>As <a href=\"https://stackoverflow.com/questions/75915340/counting-number-of-days-between-date-in-java-using-seconds-results-in-fewer-days/75915612#comment133901896_75915340\">commented by Ole V.V.</a>, be careful with your numeric literals. Leading with a zero digit marks the literal as an octal (base 8) number rather than a decimal (base 10) number.</p>\n<ul>\n<li><code>01</code> through <code>07</code> you can get away with. Those octals are the same as decimals.</li>\n<li><code>08</code> &amp; <code>09</code> are nonsense, and won’t compile.</li>\n<li><code>010</code> is 8, <code>011</code> is 9.</li>\n</ul>\n"}],"owner":{"account_id":1803665,"reputation":4255,"user_id":1641300,"accept_rate":36,"display_name":"Tinker"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1680570944,"creation_date":1680482013,"question_id":75915340,"body_markdown":"I have the following helper method \r\n```\r\n    private Date getDate(int year, int month, int day) {\r\n        Calendar cal = Calendar.getInstance();\r\n        cal.set(Calendar.YEAR, year);\r\n        cal.set(Calendar.MONTH, month);\r\n        cal.set(Calendar.DAY_OF_MONTH, day);\r\n        cal.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));\r\n        return cal.getTime();\r\n    }\r\n```\r\n\r\nSomeone in my company implemented this method: \r\n```\r\n    public static int getDaysBetween(Date d1, Date d2) {\r\n        return (int)((d2.getTime() - d1.getTime()) / (1000 * 60 * 60 * 24));\r\n    }\r\n```\r\n\r\n\r\nCan someone explain to me why the answer to the following is **28**?\r\n```\r\n        System.err.println(DateUtils.getDaysBetween(\r\n                getDate(2023, 01, 01), getDate(2023, 02, 01)));\r\n```","title":"Counting number of days between date in Java using seconds results in fewer days?","body":"<p>I have the following helper method</p>\n<pre><code>    private Date getDate(int year, int month, int day) {\n        Calendar cal = Calendar.getInstance();\n        cal.set(Calendar.YEAR, year);\n        cal.set(Calendar.MONTH, month);\n        cal.set(Calendar.DAY_OF_MONTH, day);\n        cal.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));\n        return cal.getTime();\n    }\n</code></pre>\n<p>Someone in my company implemented this method:</p>\n<pre><code>    public static int getDaysBetween(Date d1, Date d2) {\n        return (int)((d2.getTime() - d1.getTime()) / (1000 * 60 * 60 * 24));\n    }\n</code></pre>\n<p>Can someone explain to me why the answer to the following is <strong>28</strong>?</p>\n<pre><code>        System.err.println(DateUtils.getDaysBetween(\n                getDate(2023, 01, 01), getDate(2023, 02, 01)));\n</code></pre>\n"},{"tags":["java","android","kotlin","android-motionlayout"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1680570006,"post_id":75924715,"comment_id":133917177,"body_markdown":"We got the `app:touchRegionId` attribute working for that on a question just the other day, but it was for a side drawer, and the setup was a bit different:  https://drive.google.com/file/d/1EYpqy0AzP-4zxlKoTaWFQklLHDn6-44h/view?usp=drivesdk. I&#39;m not sure if I&#39;m following how yours is set up, exactly.","body":"We got the <code>app:touchRegionId</code> attribute working for that on a question just the other day, but it was for a side drawer, and the setup was a bit different:  <a href=\"https://drive.google.com/file/d/1EYpqy0AzP-4zxlKoTaWFQklLHDn6-44h/view?usp=drivesdk\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1EYpqy0AzP-4zxlKoTaWFQklLHDn6-44h/&hellip;</a>. I&#39;m not sure if I&#39;m following how yours is set up, exactly."},{"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"score":0,"creation_date":1680571199,"post_id":75924715,"comment_id":133917278,"body_markdown":"@MikeM. mine is different , onClick works fine on that view but onSwipe no luck weird","body":"@MikeM. mine is different , onClick works fine on that view but onSwipe no luck weird"},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1680571645,"post_id":75924715,"comment_id":133917317,"body_markdown":"Wait, the `&lt;View&gt;`s at the end of those layouts are the ones you want to drag? Are you sure that doesn&#39;t need to be a direct child of the `MotionLayout`? Also, the start and end sets usually don&#39;t need to be complete copies. You should be able to define most of that in the main layout, and then specify only those things that change in the start and end sets.","body":"Wait, the <code>&lt;View&gt;</code>s at the end of those layouts are the ones you want to drag? Are you sure that doesn&#39;t need to be a direct child of the <code>MotionLayout</code>? Also, the start and end sets usually don&#39;t need to be complete copies. You should be able to define most of that in the main layout, and then specify only those things that change in the start and end sets."},{"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"score":0,"creation_date":1680571856,"post_id":75924715,"comment_id":133917337,"body_markdown":"@MikeM. Yeah the view i want to drag is not a direct child of motion layout and that&#39;s why i think it is not working ..","body":"@MikeM. Yeah the view i want to drag is not a direct child of motion layout and that&#39;s why i think it is not working .."},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1680579381,"post_id":75924715,"comment_id":133918086,"body_markdown":"I just got a chance to put your layouts into Android Studio. I had to substitute all the missing resources and such, but I think I see what you&#39;re doing now. It&#39;s a vertical sliding drawer on the bottom, yeah? I modified that previous example to move the drawer to the bottom, and to resize the main content on the slide, too: https://drive.google.com/file/d/1EhCukZUHIV2Hx29HKeXCMTtLdVZRqcrW/view?usp=share_link. Looks like: https://i.stack.imgur.com/mZv6u.gif. If anything, it might help to show how you could reorganize your layouts to cut down on repeated stuff.","body":"I just got a chance to put your layouts into Android Studio. I had to substitute all the missing resources and such, but I think I see what you&#39;re doing now. It&#39;s a vertical sliding drawer on the bottom, yeah? I modified that previous example to move the drawer to the bottom, and to resize the main content on the slide, too: <a href=\"https://drive.google.com/file/d/1EhCukZUHIV2Hx29HKeXCMTtLdVZRqcrW/view?usp=share_link\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1EhCukZUHIV2Hx29HKeXCMTtLdVZRqcrW/&hellip;</a>. Looks like: <a href=\"https://i.stack.imgur.com/mZv6u.gif\" rel=\"nofollow noreferrer\">i.stack.imgur.com/mZv6u.gif</a>. If anything, it might help to show how you could reorganize your layouts to cut down on repeated stuff."},{"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"score":1,"creation_date":1680620222,"post_id":75924715,"comment_id":133926913,"body_markdown":"@MikeM. Thank you for your time and help , eventually as you said in your other comment that the view to be used for dragging should be direct view of motion layout and that was correct","body":"@MikeM. Thank you for your time and help , eventually as you said in your other comment that the view to be used for dragging should be direct view of motion layout and that was correct"}],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680569948,"creation_date":1680569334,"question_id":75924715,"body_markdown":"I&#39;m using motion layout to drag up and down a panel , it does work fine but the onSwipe() is working on the whole screen whereas i want it only to be sliding up and down when using specific view or dragging it . anyone could help ? Thank you in advance \r\n\r\n\r\n * This my start layout \r\n\r\n```\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/motionLayout&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/init_progress&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;#e6ffffff&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:text=&quot;Initializing...&quot;\r\n        android:textSize=&quot;28sp&quot;\r\n        android:visibility=&quot;visible&quot;/&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/avatar_root&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/linearLayout&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;androidx.cardview.widget.CardView\r\n            android:id=&quot;@+id/fragment_card_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:cardBackgroundColor=&quot;#7A7878&quot;\r\n            app:cardCornerRadius=&quot;0dp&quot;\r\n            app:cardElevation=&quot;0dp&quot;&gt;\r\n\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/image&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:scaleType=&quot;centerCrop&quot;\r\n                android:src=&quot;@drawable/image&quot;/&gt;\r\n\r\n            &lt;ImageButton\r\n                android:id=&quot;@+id/btn_share&quot;\r\n                android:layout_width=&quot;20dp&quot;\r\n                android:layout_height=&quot;30dp&quot;\r\n                android:layout_gravity=&quot;end&quot;\r\n                android:src=&quot;@drawable/ic_share&quot;\r\n                android:scaleType=&quot;fitCenter&quot;\r\n                android:background=&quot;@null&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:layout_marginEnd=&quot;20sp&quot;\r\n                android:layout_marginTop=&quot;10sp&quot;\r\n                android:visibility=&quot;gone&quot;\r\n                android:contentDescription=&quot;btn_share&quot; /&gt;\r\n\r\n            &lt;VideoView\r\n                android:id=&quot;@+id/video_view&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:visibility=&quot;gone&quot; /&gt;\r\n\r\n\r\n            &lt;Button\r\n                android:id=&quot;@+id/avatar_play&quot;\r\n                android:layout_width=&quot;64dp&quot;\r\n                android:layout_height=&quot;64dp&quot;\r\n                android:background=&quot;@drawable/ic_avatar_play&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:scaleType=&quot;fitCenter&quot;\r\n                android:visibility=&quot;gone&quot;/&gt;\r\n\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n\r\n    &lt;/FrameLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/linearLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabLayout\r\n            android:id=&quot;@+id/tabLayout&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;40dp&quot;\r\n            android:layout_marginStart=&quot;20dp&quot;\r\n            android:layout_marginTop=&quot;10sp&quot;\r\n            android:layout_marginEnd=&quot;20dp&quot;\r\n            app:tabBackground=&quot;@drawable/tab_bg&quot;\r\n            app:tabIndicatorHeight=&quot;0dp&quot;\r\n            app:tabMode=&quot;scrollable&quot;\r\n            app:tabSelectedTextColor=&quot;@color/white&quot; /&gt;\r\n\r\n        &lt;androidx.recyclerview.widget.RecyclerView\r\n            android:id=&quot;@+id/rv_bg&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;10dp&quot;\r\n            android:layout_marginTop=&quot;10dp&quot;\r\n            android:layout_marginEnd=&quot;10dp&quot;\r\n            android:layout_marginBottom=&quot;10dp&quot;\r\n            android:visibility=&quot;visible&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/header_root&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;56dp&quot;\r\n        android:gravity=&quot;center_vertical&quot;\r\n        android:padding=&quot;10dp&quot;\r\n        android:visibility=&quot;visible&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/button_back&quot;\r\n            android:layout_width=&quot;24dp&quot;\r\n            android:layout_height=&quot;24dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:contentDescription=&quot;button_back&quot;\r\n            android:onClick=&quot;goBackPressed&quot;\r\n            android:scaleType=&quot;fitCenter&quot;\r\n            android:src=&quot;@drawable/back_btn&quot;\r\n            app:tint=&quot;@color/white&quot; /&gt;\r\n\r\n        &lt;Space\r\n            android:layout_width=&quot;1dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:layout_weight=&quot;3&quot; /&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/save_anim&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_marginStart=&quot;10dp&quot;\r\n                android:layout_marginEnd=&quot;10dp&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:fontFamily=&quot;sans-serif&quot;\r\n                android:onClick=&quot;onSaveAnimation&quot;\r\n                android:text=&quot;Save&quot;\r\n                android:textColor=&quot;@color/white&quot;\r\n                android:textSize=&quot;18sp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:visibility=&quot;visible&quot; /&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/done_anim&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_marginStart=&quot;20dp&quot;\r\n                android:layout_marginEnd=&quot;20dp&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:fontFamily=&quot;sans-serif&quot;\r\n                android:onClick=&quot;onDoneAnimation&quot;\r\n                android:text=&quot;Done&quot;\r\n                android:textColor=&quot;@color/white&quot;\r\n                android:textSize=&quot;18sp&quot;\r\n                android:visibility=&quot;gone&quot; /&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/btn_settings&quot;\r\n            android:layout_width=&quot;24dp&quot;\r\n            android:layout_height=&quot;24dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:layout_margin=&quot;10dp&quot;\r\n            android:background=&quot;@null&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:contentDescription=&quot;btn_settings&quot;\r\n            android:hint=&quot;btn_settings&quot;\r\n            android:scaleType=&quot;fitCenter&quot;\r\n            android:src=&quot;@drawable/button_settings&quot;\r\n            android:visibility=&quot;visible&quot;\r\n            app:tint=&quot;@color/white&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/progress_layout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:visibility=&quot;gone&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:layout_marginBottom=&quot;30dp&quot;\r\n            android:text=&quot;@string/saving_to_gallery&quot;\r\n            android:textColor=&quot;@color/colorBlack&quot;\r\n            android:visibility=&quot;visible&quot; /&gt;\r\n\r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progress_bar&quot;\r\n            style=&quot;@style/Widget.AppCompat.ProgressBar.Horizontal&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;4dp&quot;\r\n            android:paddingRight=&quot;60dp&quot;\r\n            android:paddingLeft=&quot;60dp&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:max=&quot;100&quot;\r\n            android:progress=&quot;0&quot;\r\n             /&gt;\r\n    &lt;/FrameLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/layout&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;60dp&quot;\r\n        android:layout_marginStart=&quot;32dp&quot;\r\n        android:layout_marginEnd=&quot;32dp&quot;\r\n        android:orientation=&quot;horizontal&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/frameLayout&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/btn_mute&quot;\r\n            android:layout_width=&quot;50dp&quot;\r\n            android:layout_height=&quot;50dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:src=&quot;@drawable/selector_mute&quot; /&gt;\r\n\r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/btn_play&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;40dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:layout_marginStart=&quot;50dp&quot;\r\n            android:src=&quot;@drawable/selector_btn_play&quot;\r\n            android:background=&quot;@null&quot;\r\n            android:layout_marginEnd=&quot;50dp&quot;\r\n            android:layout_weight=&quot;1&quot;/&gt;\r\n\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/btn_reset&quot;\r\n            android:layout_width=&quot;50dp&quot;\r\n            android:layout_height=&quot;50dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:src=&quot;@drawable/reset_button&quot;\r\n            app:tint=&quot;@color/white&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/frameLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:minHeight=&quot;50dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;@+id/avatar_root&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/btn_record&quot;\r\n            android:layout_width=&quot;90dp&quot;\r\n            android:layout_height=&quot;90dp&quot;\r\n            android:layout_gravity=&quot;center|bottom&quot;\r\n            android:layout_marginBottom=&quot;80dp&quot;\r\n            android:background=&quot;@null&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:contentDescription=&quot;btn_record&quot;\r\n            android:scaleType=&quot;fitCenter&quot;\r\n            android:src=&quot;@drawable/record_button&quot;\r\n            android:visibility=&quot;visible&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/txt_duration&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center|bottom&quot;\r\n            android:layout_marginRight=&quot;88dp&quot;\r\n            android:layout_marginBottom=&quot;110dp&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:maxLines=&quot;1&quot;\r\n            android:textSize=&quot;18dp&quot;\r\n            android:text=&quot;@string/audio_duration_txt&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:visibility=&quot;visible&quot; /&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/custom_drawer&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;bottom&quot;\r\n            android:visibility=&quot;visible&quot;&gt;\r\n            &lt;View\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;30dp&quot;\r\n                android:background=&quot;@drawable/curvy_layout&quot;/&gt;\r\n\r\n            &lt;View\r\n                android:id=&quot;@+id/line&quot;\r\n                android:layout_width=&quot;50dp&quot;\r\n                android:layout_height=&quot;5dp&quot;\r\n                android:layout_marginBottom=&quot;15dp&quot;\r\n                android:background=&quot;@drawable/line_shape&quot;\r\n                android:layout_gravity=&quot;center|bottom&quot; /&gt;\r\n        &lt;/FrameLayout&gt;\r\n    &lt;/FrameLayout&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n```\r\n\r\n * This is my end layout \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/motionLayout&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/init_progress&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;#e6ffffff&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:text=&quot;Initializing...&quot;\r\n        android:textSize=&quot;28sp&quot;\r\n        android:visibility=&quot;visible&quot;/&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/avatar_root&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/linearLayout&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;androidx.cardview.widget.CardView\r\n            android:id=&quot;@+id/fragment_card_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:cardBackgroundColor=&quot;#7A7878&quot;\r\n            app:cardCornerRadius=&quot;0dp&quot;\r\n            app:cardElevation=&quot;0dp&quot;&gt;\r\n\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/image&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:scaleType=&quot;centerCrop&quot;\r\n                android:src=&quot;@drawable/image&quot;/&gt;\r\n\r\n            &lt;ImageButton\r\n                android:id=&quot;@+id/btn_share&quot;\r\n                android:layout_width=&quot;20dp&quot;\r\n                android:layout_height=&quot;30dp&quot;\r\n                android:layout_gravity=&quot;end&quot;\r\n                android:src=&quot;@drawable/ic_share&quot;\r\n                android:scaleType=&quot;fitCenter&quot;\r\n                android:background=&quot;@null&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:layout_marginEnd=&quot;20sp&quot;\r\n                android:layout_marginTop=&quot;10sp&quot;\r\n                android:visibility=&quot;gone&quot;\r\n                android:contentDescription=&quot;btn_share&quot; /&gt;\r\n\r\n            &lt;VideoView\r\n                android:id=&quot;@+id/video_view&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:visibility=&quot;gone&quot; /&gt;\r\n\r\n\r\n            &lt;Button\r\n                android:id=&quot;@+id/avatar_play&quot;\r\n                android:layout_width=&quot;64dp&quot;\r\n                android:layout_height=&quot;64dp&quot;\r\n                android:background=&quot;@drawable/ic_avatar_play&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:scaleType=&quot;fitCenter&quot;\r\n                android:visibility=&quot;gone&quot;/&gt;\r\n\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n\r\n    &lt;/FrameLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/linearLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabLayout\r\n            android:id=&quot;@+id/tabLayout&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;40dp&quot;\r\n            android:layout_marginStart=&quot;20dp&quot;\r\n            android:layout_marginTop=&quot;10sp&quot;\r\n            android:layout_marginEnd=&quot;20dp&quot;\r\n            app:tabBackground=&quot;@drawable/tab_bg&quot;\r\n            app:tabIndicatorHeight=&quot;0dp&quot;\r\n            app:tabMode=&quot;scrollable&quot;\r\n            app:tabSelectedTextColor=&quot;@color/white&quot; /&gt;\r\n\r\n        &lt;androidx.recyclerview.widget.RecyclerView\r\n            android:id=&quot;@+id/rv_bg&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;10dp&quot;\r\n            android:layout_marginTop=&quot;10dp&quot;\r\n            android:layout_marginEnd=&quot;10dp&quot;\r\n            android:layout_marginBottom=&quot;10dp&quot;\r\n            android:visibility=&quot;visible&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/header_root&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;56dp&quot;\r\n        android:gravity=&quot;center_vertical&quot;\r\n        android:padding=&quot;10dp&quot;\r\n        android:visibility=&quot;visible&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/button_back&quot;\r\n            android:layout_width=&quot;24dp&quot;\r\n            android:layout_height=&quot;24dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:contentDescription=&quot;button_back&quot;\r\n            android:onClick=&quot;goBackPressed&quot;\r\n            android:scaleType=&quot;fitCenter&quot;\r\n            android:src=&quot;@drawable/back_btn&quot;\r\n            app:tint=&quot;@color/white&quot; /&gt;\r\n\r\n        &lt;Space\r\n            android:layout_width=&quot;1dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:layout_weight=&quot;3&quot; /&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/save_anim&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_marginStart=&quot;10dp&quot;\r\n                android:layout_marginEnd=&quot;10dp&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:fontFamily=&quot;sans-serif&quot;\r\n                android:onClick=&quot;onSaveAnimation&quot;\r\n                android:text=&quot;Save&quot;\r\n                android:textColor=&quot;@color/white&quot;\r\n                android:textSize=&quot;18sp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:visibility=&quot;visible&quot; /&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/done_anim&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_marginStart=&quot;20dp&quot;\r\n                android:layout_marginEnd=&quot;20dp&quot;\r\n                android:clickable=&quot;true&quot;\r\n                android:fontFamily=&quot;sans-serif&quot;\r\n                android:onClick=&quot;onDoneAnimation&quot;\r\n                android:text=&quot;Done&quot;\r\n                android:textColor=&quot;@color/white&quot;\r\n                android:textSize=&quot;18sp&quot;\r\n                android:visibility=&quot;gone&quot; /&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/btn_settings&quot;\r\n            android:layout_width=&quot;24dp&quot;\r\n            android:layout_height=&quot;24dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:layout_margin=&quot;10dp&quot;\r\n            android:background=&quot;@null&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:contentDescription=&quot;btn_settings&quot;\r\n            android:hint=&quot;btn_settings&quot;\r\n            android:scaleType=&quot;fitCenter&quot;\r\n            android:src=&quot;@drawable/button_settings&quot;\r\n            android:visibility=&quot;visible&quot;\r\n            app:tint=&quot;@color/white&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/progress_layout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:visibility=&quot;gone&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:layout_marginBottom=&quot;30dp&quot;\r\n            android:text=&quot;@string/saving_to_gallery&quot;\r\n            android:textColor=&quot;@color/colorBlack&quot;\r\n            android:visibility=&quot;visible&quot; /&gt;\r\n\r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progress_bar&quot;\r\n            style=&quot;@style/Widget.AppCompat.ProgressBar.Horizontal&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;4dp&quot;\r\n            android:paddingRight=&quot;60dp&quot;\r\n            android:paddingLeft=&quot;60dp&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:max=&quot;100&quot;\r\n            android:progress=&quot;0&quot;\r\n             /&gt;\r\n    &lt;/FrameLayout&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/layout&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;60dp&quot;\r\n        android:layout_marginStart=&quot;32dp&quot;\r\n        android:layout_marginEnd=&quot;32dp&quot;\r\n        android:orientation=&quot;horizontal&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/frameLayout&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/btn_mute&quot;\r\n            android:layout_width=&quot;50dp&quot;\r\n            android:layout_height=&quot;50dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:src=&quot;@drawable/selector_mute&quot; /&gt;\r\n\r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/btn_play&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;40dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:layout_marginStart=&quot;50dp&quot;\r\n            android:src=&quot;@drawable/selector_btn_play&quot;\r\n            android:background=&quot;@null&quot;\r\n            android:layout_marginEnd=&quot;50dp&quot;\r\n            android:layout_weight=&quot;1&quot;/&gt;\r\n\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/btn_reset&quot;\r\n            android:layout_width=&quot;50dp&quot;\r\n            android:layout_height=&quot;50dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:src=&quot;@drawable/reset_button&quot;\r\n            app:tint=&quot;@color/white&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/frameLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:minHeight=&quot;50dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;@+id/avatar_root&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/btn_record&quot;\r\n            android:layout_width=&quot;90dp&quot;\r\n            android:layout_height=&quot;90dp&quot;\r\n            android:layout_gravity=&quot;center|bottom&quot;\r\n            android:layout_marginBottom=&quot;80dp&quot;\r\n            android:background=&quot;@null&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:contentDescription=&quot;btn_record&quot;\r\n            android:scaleType=&quot;fitCenter&quot;\r\n            android:src=&quot;@drawable/record_button&quot;\r\n            android:visibility=&quot;visible&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/txt_duration&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center|bottom&quot;\r\n            android:layout_marginRight=&quot;88dp&quot;\r\n            android:layout_marginBottom=&quot;110dp&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:maxLines=&quot;1&quot;\r\n            android:textSize=&quot;18dp&quot;\r\n            android:text=&quot;@string/audio_duration_txt&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:visibility=&quot;visible&quot; /&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/custom_drawer&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;bottom&quot;\r\n            android:visibility=&quot;visible&quot;&gt;\r\n            &lt;View\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;30dp&quot;\r\n                android:background=&quot;@drawable/curvy_layout&quot;/&gt;\r\n\r\n            &lt;View\r\n                android:id=&quot;@+id/line&quot;\r\n                android:layout_width=&quot;50dp&quot;\r\n                android:layout_height=&quot;5dp&quot;\r\n                android:layout_marginBottom=&quot;15dp&quot;\r\n                android:background=&quot;@drawable/line_shape&quot;\r\n                android:layout_gravity=&quot;center|bottom&quot; /&gt;\r\n        &lt;/FrameLayout&gt;\r\n    &lt;/FrameLayout&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n```\r\n\r\n * this is the view i want to use to slide up and down ( tried touchAnchor and touchRegionId , it completely disables the animation)\r\n\r\n ```\r\n\r\n &lt;View\r\n                android:id=&quot;@+id/line&quot;\r\n                android:layout_width=&quot;50dp&quot;\r\n                android:layout_height=&quot;5dp&quot;\r\n                android:layout_marginBottom=&quot;15dp&quot;\r\n                android:background=&quot;@drawable/line_shape&quot;\r\n                android:layout_gravity=&quot;center|bottom&quot; /&gt;\r\n\r\n```","title":"Trigger onSwipe() motion layout only when specific view is in touch","body":"<p>I'm using motion layout to drag up and down a panel , it does work fine but the onSwipe() is working on the whole screen whereas i want it only to be sliding up and down when using specific view or dragging it . anyone could help ? Thank you in advance</p>\n<ul>\n<li>This my start layout</li>\n</ul>\n<pre><code>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/motionLayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n\n    &lt;TextView\n        android:id=&quot;@+id/init_progress&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:background=&quot;#e6ffffff&quot;\n        android:gravity=&quot;center&quot;\n        android:text=&quot;Initializing...&quot;\n        android:textSize=&quot;28sp&quot;\n        android:visibility=&quot;visible&quot;/&gt;\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/avatar_root&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/linearLayout&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;androidx.cardview.widget.CardView\n            android:id=&quot;@+id/fragment_card_view&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:cardBackgroundColor=&quot;#7A7878&quot;\n            app:cardCornerRadius=&quot;0dp&quot;\n            app:cardElevation=&quot;0dp&quot;&gt;\n\n            &lt;ImageView\n                android:id=&quot;@+id/image&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:scaleType=&quot;centerCrop&quot;\n                android:src=&quot;@drawable/image&quot;/&gt;\n\n            &lt;ImageButton\n                android:id=&quot;@+id/btn_share&quot;\n                android:layout_width=&quot;20dp&quot;\n                android:layout_height=&quot;30dp&quot;\n                android:layout_gravity=&quot;end&quot;\n                android:src=&quot;@drawable/ic_share&quot;\n                android:scaleType=&quot;fitCenter&quot;\n                android:background=&quot;@null&quot;\n                android:clickable=&quot;true&quot;\n                android:layout_marginEnd=&quot;20sp&quot;\n                android:layout_marginTop=&quot;10sp&quot;\n                android:visibility=&quot;gone&quot;\n                android:contentDescription=&quot;btn_share&quot; /&gt;\n\n            &lt;VideoView\n                android:id=&quot;@+id/video_view&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:visibility=&quot;gone&quot; /&gt;\n\n\n            &lt;Button\n                android:id=&quot;@+id/avatar_play&quot;\n                android:layout_width=&quot;64dp&quot;\n                android:layout_height=&quot;64dp&quot;\n                android:background=&quot;@drawable/ic_avatar_play&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:scaleType=&quot;fitCenter&quot;\n                android:visibility=&quot;gone&quot;/&gt;\n\n        &lt;/androidx.cardview.widget.CardView&gt;\n\n\n    &lt;/FrameLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/linearLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:orientation=&quot;vertical&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;parent&quot;&gt;\n\n        &lt;com.google.android.material.tabs.TabLayout\n            android:id=&quot;@+id/tabLayout&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;40dp&quot;\n            android:layout_marginStart=&quot;20dp&quot;\n            android:layout_marginTop=&quot;10sp&quot;\n            android:layout_marginEnd=&quot;20dp&quot;\n            app:tabBackground=&quot;@drawable/tab_bg&quot;\n            app:tabIndicatorHeight=&quot;0dp&quot;\n            app:tabMode=&quot;scrollable&quot;\n            app:tabSelectedTextColor=&quot;@color/white&quot; /&gt;\n\n        &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=&quot;@+id/rv_bg&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;10dp&quot;\n            android:layout_marginTop=&quot;10dp&quot;\n            android:layout_marginEnd=&quot;10dp&quot;\n            android:layout_marginBottom=&quot;10dp&quot;\n            android:visibility=&quot;visible&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/header_root&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;56dp&quot;\n        android:gravity=&quot;center_vertical&quot;\n        android:padding=&quot;10dp&quot;\n        android:visibility=&quot;visible&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/button_back&quot;\n            android:layout_width=&quot;24dp&quot;\n            android:layout_height=&quot;24dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:contentDescription=&quot;button_back&quot;\n            android:onClick=&quot;goBackPressed&quot;\n            android:scaleType=&quot;fitCenter&quot;\n            android:src=&quot;@drawable/back_btn&quot;\n            app:tint=&quot;@color/white&quot; /&gt;\n\n        &lt;Space\n            android:layout_width=&quot;1dp&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_weight=&quot;3&quot; /&gt;\n\n        &lt;FrameLayout\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/save_anim&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:layout_marginStart=&quot;10dp&quot;\n                android:layout_marginEnd=&quot;10dp&quot;\n                android:clickable=&quot;true&quot;\n                android:fontFamily=&quot;sans-serif&quot;\n                android:onClick=&quot;onSaveAnimation&quot;\n                android:text=&quot;Save&quot;\n                android:textColor=&quot;@color/white&quot;\n                android:textSize=&quot;18sp&quot;\n                android:textStyle=&quot;bold&quot;\n                android:visibility=&quot;visible&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/done_anim&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:layout_marginStart=&quot;20dp&quot;\n                android:layout_marginEnd=&quot;20dp&quot;\n                android:clickable=&quot;true&quot;\n                android:fontFamily=&quot;sans-serif&quot;\n                android:onClick=&quot;onDoneAnimation&quot;\n                android:text=&quot;Done&quot;\n                android:textColor=&quot;@color/white&quot;\n                android:textSize=&quot;18sp&quot;\n                android:visibility=&quot;gone&quot; /&gt;\n        &lt;/FrameLayout&gt;\n\n        &lt;ImageButton\n            android:id=&quot;@+id/btn_settings&quot;\n            android:layout_width=&quot;24dp&quot;\n            android:layout_height=&quot;24dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_margin=&quot;10dp&quot;\n            android:background=&quot;@null&quot;\n            android:clickable=&quot;true&quot;\n            android:contentDescription=&quot;btn_settings&quot;\n            android:hint=&quot;btn_settings&quot;\n            android:scaleType=&quot;fitCenter&quot;\n            android:src=&quot;@drawable/button_settings&quot;\n            android:visibility=&quot;visible&quot;\n            app:tint=&quot;@color/white&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/progress_layout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:visibility=&quot;gone&quot;&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:textSize=&quot;18sp&quot;\n            android:layout_marginBottom=&quot;30dp&quot;\n            android:text=&quot;@string/saving_to_gallery&quot;\n            android:textColor=&quot;@color/colorBlack&quot;\n            android:visibility=&quot;visible&quot; /&gt;\n\n        &lt;ProgressBar\n            android:id=&quot;@+id/progress_bar&quot;\n            style=&quot;@style/Widget.AppCompat.ProgressBar.Horizontal&quot;\n            android:layout_width=&quot;fill_parent&quot;\n            android:layout_height=&quot;4dp&quot;\n            android:paddingRight=&quot;60dp&quot;\n            android:paddingLeft=&quot;60dp&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:max=&quot;100&quot;\n            android:progress=&quot;0&quot;\n             /&gt;\n    &lt;/FrameLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/layout&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;60dp&quot;\n        android:layout_marginStart=&quot;32dp&quot;\n        android:layout_marginEnd=&quot;32dp&quot;\n        android:orientation=&quot;horizontal&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/frameLayout&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/btn_mute&quot;\n            android:layout_width=&quot;50dp&quot;\n            android:layout_height=&quot;50dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:src=&quot;@drawable/selector_mute&quot; /&gt;\n\n        &lt;ImageButton\n            android:id=&quot;@+id/btn_play&quot;\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;40dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_marginStart=&quot;50dp&quot;\n            android:src=&quot;@drawable/selector_btn_play&quot;\n            android:background=&quot;@null&quot;\n            android:layout_marginEnd=&quot;50dp&quot;\n            android:layout_weight=&quot;1&quot;/&gt;\n\n\n        &lt;ImageView\n            android:id=&quot;@+id/btn_reset&quot;\n            android:layout_width=&quot;50dp&quot;\n            android:layout_height=&quot;50dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:src=&quot;@drawable/reset_button&quot;\n            app:tint=&quot;@color/white&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/frameLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:minHeight=&quot;50dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;@+id/avatar_root&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\n\n        &lt;ImageButton\n            android:id=&quot;@+id/btn_record&quot;\n            android:layout_width=&quot;90dp&quot;\n            android:layout_height=&quot;90dp&quot;\n            android:layout_gravity=&quot;center|bottom&quot;\n            android:layout_marginBottom=&quot;80dp&quot;\n            android:background=&quot;@null&quot;\n            android:clickable=&quot;true&quot;\n            android:contentDescription=&quot;btn_record&quot;\n            android:scaleType=&quot;fitCenter&quot;\n            android:src=&quot;@drawable/record_button&quot;\n            android:visibility=&quot;visible&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/txt_duration&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center|bottom&quot;\n            android:layout_marginRight=&quot;88dp&quot;\n            android:layout_marginBottom=&quot;110dp&quot;\n            android:gravity=&quot;center&quot;\n            android:maxLines=&quot;1&quot;\n            android:textSize=&quot;18dp&quot;\n            android:text=&quot;@string/audio_duration_txt&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:visibility=&quot;visible&quot; /&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/custom_drawer&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;bottom&quot;\n            android:visibility=&quot;visible&quot;&gt;\n            &lt;View\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;30dp&quot;\n                android:background=&quot;@drawable/curvy_layout&quot;/&gt;\n\n            &lt;View\n                android:id=&quot;@+id/line&quot;\n                android:layout_width=&quot;50dp&quot;\n                android:layout_height=&quot;5dp&quot;\n                android:layout_marginBottom=&quot;15dp&quot;\n                android:background=&quot;@drawable/line_shape&quot;\n                android:layout_gravity=&quot;center|bottom&quot; /&gt;\n        &lt;/FrameLayout&gt;\n    &lt;/FrameLayout&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n</code></pre>\n<ul>\n<li>This is my end layout</li>\n</ul>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/motionLayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n\n    &lt;TextView\n        android:id=&quot;@+id/init_progress&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:background=&quot;#e6ffffff&quot;\n        android:gravity=&quot;center&quot;\n        android:text=&quot;Initializing...&quot;\n        android:textSize=&quot;28sp&quot;\n        android:visibility=&quot;visible&quot;/&gt;\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/avatar_root&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/linearLayout&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;androidx.cardview.widget.CardView\n            android:id=&quot;@+id/fragment_card_view&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:cardBackgroundColor=&quot;#7A7878&quot;\n            app:cardCornerRadius=&quot;0dp&quot;\n            app:cardElevation=&quot;0dp&quot;&gt;\n\n            &lt;ImageView\n                android:id=&quot;@+id/image&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:scaleType=&quot;centerCrop&quot;\n                android:src=&quot;@drawable/image&quot;/&gt;\n\n            &lt;ImageButton\n                android:id=&quot;@+id/btn_share&quot;\n                android:layout_width=&quot;20dp&quot;\n                android:layout_height=&quot;30dp&quot;\n                android:layout_gravity=&quot;end&quot;\n                android:src=&quot;@drawable/ic_share&quot;\n                android:scaleType=&quot;fitCenter&quot;\n                android:background=&quot;@null&quot;\n                android:clickable=&quot;true&quot;\n                android:layout_marginEnd=&quot;20sp&quot;\n                android:layout_marginTop=&quot;10sp&quot;\n                android:visibility=&quot;gone&quot;\n                android:contentDescription=&quot;btn_share&quot; /&gt;\n\n            &lt;VideoView\n                android:id=&quot;@+id/video_view&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:visibility=&quot;gone&quot; /&gt;\n\n\n            &lt;Button\n                android:id=&quot;@+id/avatar_play&quot;\n                android:layout_width=&quot;64dp&quot;\n                android:layout_height=&quot;64dp&quot;\n                android:background=&quot;@drawable/ic_avatar_play&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:scaleType=&quot;fitCenter&quot;\n                android:visibility=&quot;gone&quot;/&gt;\n\n        &lt;/androidx.cardview.widget.CardView&gt;\n\n\n    &lt;/FrameLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/linearLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\n\n        &lt;com.google.android.material.tabs.TabLayout\n            android:id=&quot;@+id/tabLayout&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;40dp&quot;\n            android:layout_marginStart=&quot;20dp&quot;\n            android:layout_marginTop=&quot;10sp&quot;\n            android:layout_marginEnd=&quot;20dp&quot;\n            app:tabBackground=&quot;@drawable/tab_bg&quot;\n            app:tabIndicatorHeight=&quot;0dp&quot;\n            app:tabMode=&quot;scrollable&quot;\n            app:tabSelectedTextColor=&quot;@color/white&quot; /&gt;\n\n        &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=&quot;@+id/rv_bg&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;10dp&quot;\n            android:layout_marginTop=&quot;10dp&quot;\n            android:layout_marginEnd=&quot;10dp&quot;\n            android:layout_marginBottom=&quot;10dp&quot;\n            android:visibility=&quot;visible&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/header_root&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;56dp&quot;\n        android:gravity=&quot;center_vertical&quot;\n        android:padding=&quot;10dp&quot;\n        android:visibility=&quot;visible&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/button_back&quot;\n            android:layout_width=&quot;24dp&quot;\n            android:layout_height=&quot;24dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:contentDescription=&quot;button_back&quot;\n            android:onClick=&quot;goBackPressed&quot;\n            android:scaleType=&quot;fitCenter&quot;\n            android:src=&quot;@drawable/back_btn&quot;\n            app:tint=&quot;@color/white&quot; /&gt;\n\n        &lt;Space\n            android:layout_width=&quot;1dp&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_weight=&quot;3&quot; /&gt;\n\n        &lt;FrameLayout\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/save_anim&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:layout_marginStart=&quot;10dp&quot;\n                android:layout_marginEnd=&quot;10dp&quot;\n                android:clickable=&quot;true&quot;\n                android:fontFamily=&quot;sans-serif&quot;\n                android:onClick=&quot;onSaveAnimation&quot;\n                android:text=&quot;Save&quot;\n                android:textColor=&quot;@color/white&quot;\n                android:textSize=&quot;18sp&quot;\n                android:textStyle=&quot;bold&quot;\n                android:visibility=&quot;visible&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/done_anim&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:layout_marginStart=&quot;20dp&quot;\n                android:layout_marginEnd=&quot;20dp&quot;\n                android:clickable=&quot;true&quot;\n                android:fontFamily=&quot;sans-serif&quot;\n                android:onClick=&quot;onDoneAnimation&quot;\n                android:text=&quot;Done&quot;\n                android:textColor=&quot;@color/white&quot;\n                android:textSize=&quot;18sp&quot;\n                android:visibility=&quot;gone&quot; /&gt;\n        &lt;/FrameLayout&gt;\n\n        &lt;ImageButton\n            android:id=&quot;@+id/btn_settings&quot;\n            android:layout_width=&quot;24dp&quot;\n            android:layout_height=&quot;24dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_margin=&quot;10dp&quot;\n            android:background=&quot;@null&quot;\n            android:clickable=&quot;true&quot;\n            android:contentDescription=&quot;btn_settings&quot;\n            android:hint=&quot;btn_settings&quot;\n            android:scaleType=&quot;fitCenter&quot;\n            android:src=&quot;@drawable/button_settings&quot;\n            android:visibility=&quot;visible&quot;\n            app:tint=&quot;@color/white&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/progress_layout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:visibility=&quot;gone&quot;&gt;\n\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:textSize=&quot;18sp&quot;\n            android:layout_marginBottom=&quot;30dp&quot;\n            android:text=&quot;@string/saving_to_gallery&quot;\n            android:textColor=&quot;@color/colorBlack&quot;\n            android:visibility=&quot;visible&quot; /&gt;\n\n        &lt;ProgressBar\n            android:id=&quot;@+id/progress_bar&quot;\n            style=&quot;@style/Widget.AppCompat.ProgressBar.Horizontal&quot;\n            android:layout_width=&quot;fill_parent&quot;\n            android:layout_height=&quot;4dp&quot;\n            android:paddingRight=&quot;60dp&quot;\n            android:paddingLeft=&quot;60dp&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:max=&quot;100&quot;\n            android:progress=&quot;0&quot;\n             /&gt;\n    &lt;/FrameLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/layout&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;60dp&quot;\n        android:layout_marginStart=&quot;32dp&quot;\n        android:layout_marginEnd=&quot;32dp&quot;\n        android:orientation=&quot;horizontal&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/frameLayout&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/btn_mute&quot;\n            android:layout_width=&quot;50dp&quot;\n            android:layout_height=&quot;50dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:src=&quot;@drawable/selector_mute&quot; /&gt;\n\n        &lt;ImageButton\n            android:id=&quot;@+id/btn_play&quot;\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;40dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_marginStart=&quot;50dp&quot;\n            android:src=&quot;@drawable/selector_btn_play&quot;\n            android:background=&quot;@null&quot;\n            android:layout_marginEnd=&quot;50dp&quot;\n            android:layout_weight=&quot;1&quot;/&gt;\n\n\n        &lt;ImageView\n            android:id=&quot;@+id/btn_reset&quot;\n            android:layout_width=&quot;50dp&quot;\n            android:layout_height=&quot;50dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:src=&quot;@drawable/reset_button&quot;\n            app:tint=&quot;@color/white&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/frameLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:minHeight=&quot;50dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;@+id/avatar_root&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\n\n        &lt;ImageButton\n            android:id=&quot;@+id/btn_record&quot;\n            android:layout_width=&quot;90dp&quot;\n            android:layout_height=&quot;90dp&quot;\n            android:layout_gravity=&quot;center|bottom&quot;\n            android:layout_marginBottom=&quot;80dp&quot;\n            android:background=&quot;@null&quot;\n            android:clickable=&quot;true&quot;\n            android:contentDescription=&quot;btn_record&quot;\n            android:scaleType=&quot;fitCenter&quot;\n            android:src=&quot;@drawable/record_button&quot;\n            android:visibility=&quot;visible&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/txt_duration&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center|bottom&quot;\n            android:layout_marginRight=&quot;88dp&quot;\n            android:layout_marginBottom=&quot;110dp&quot;\n            android:gravity=&quot;center&quot;\n            android:maxLines=&quot;1&quot;\n            android:textSize=&quot;18dp&quot;\n            android:text=&quot;@string/audio_duration_txt&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:visibility=&quot;visible&quot; /&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/custom_drawer&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;bottom&quot;\n            android:visibility=&quot;visible&quot;&gt;\n            &lt;View\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;30dp&quot;\n                android:background=&quot;@drawable/curvy_layout&quot;/&gt;\n\n            &lt;View\n                android:id=&quot;@+id/line&quot;\n                android:layout_width=&quot;50dp&quot;\n                android:layout_height=&quot;5dp&quot;\n                android:layout_marginBottom=&quot;15dp&quot;\n                android:background=&quot;@drawable/line_shape&quot;\n                android:layout_gravity=&quot;center|bottom&quot; /&gt;\n        &lt;/FrameLayout&gt;\n    &lt;/FrameLayout&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n</code></pre>\n<ul>\n<li>this is the view i want to use to slide up and down ( tried touchAnchor and touchRegionId , it completely disables the animation)</li>\n</ul>\n<pre><code>\n&lt;View\n               android:id=&quot;@+id/line&quot;\n               android:layout_width=&quot;50dp&quot;\n               android:layout_height=&quot;5dp&quot;\n               android:layout_marginBottom=&quot;15dp&quot;\n               android:background=&quot;@drawable/line_shape&quot;\n               android:layout_gravity=&quot;center|bottom&quot; /&gt;\n\n</code></pre>\n"},{"tags":["java","rx-java","rx-java2"],"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1680592305,"post_id":75924688,"comment_id":133919866,"body_markdown":"`.toList().flatMapPublisher(existing -&gt; newObjects.filter(obj -&gt; !existingObjects.contains(obj)))`.","body":"<code>.toList().flatMapPublisher(existing -&gt; newObjects.filter(obj -&gt; !existingObjects.contains(obj)))</code>."}],"owner":{"account_id":28207876,"reputation":1,"user_id":21560652,"display_name":"wozniackia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680568856,"creation_date":1680568856,"question_id":75924688,"body_markdown":"I need to save some data do database.\r\nI have Flowable with data that i get from the server, and Flowable of data from my db.\r\nI need to save only the data that is not already in the db.\r\n\r\nI tried to do this, but I dont like this blocking part, is there a way to do that the reactive way?\r\n```Java\r\nvar existentObjects = repository.findAll().toList().blockingGet() //Single&lt;List&lt;Obj&gt;&gt;\r\nvar newObjects = client.getObjects(); //Flowable&lt;Obj&gt;\r\n\r\nreturn newObjects.filter(obj -&gt; !existentObjects.contains(obj));\r\n```","title":"How do I delete elements from Flowable that exist in second Flowable?","body":"<p>I need to save some data do database.\nI have Flowable with data that i get from the server, and Flowable of data from my db.\nI need to save only the data that is not already in the db.</p>\n<p>I tried to do this, but I dont like this blocking part, is there a way to do that the reactive way?</p>\n<pre><code>var existentObjects = repository.findAll().toList().blockingGet() //Single&lt;List&lt;Obj&gt;&gt;\nvar newObjects = client.getObjects(); //Flowable&lt;Obj&gt;\n\nreturn newObjects.filter(obj -&gt; !existentObjects.contains(obj));\n</code></pre>\n"},{"tags":["java","mockito","junit5","powermock"],"answers":[{"comments":[{"owner":{"account_id":27835226,"reputation":25,"user_id":21252826,"display_name":"Dave"},"score":0,"creation_date":1680620552,"post_id":75924533,"comment_id":133927009,"body_markdown":"This is not working as expected, can we use [LogRecordListener](https://junit.org/junit5/docs/5.7.0/api/org.junit.platform.commons/org/junit/platform/commons/logging/LogRecordListener.html) to verify logs?","body":"This is not working as expected, can we use <a href=\"https://junit.org/junit5/docs/5.7.0/api/org.junit.platform.commons/org/junit/platform/commons/logging/LogRecordListener.html\" rel=\"nofollow noreferrer\">LogRecordListener</a> to verify logs?"}],"tags":[],"owner":{"account_id":27756159,"reputation":21,"user_id":21189592,"display_name":"Alexandre Mercier"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680566066,"creation_date":1680566066,"answer_id":75924533,"question_id":75923957,"body_markdown":"First of all, don&#39;t forget to inject the mocks and to check how many times the method has been called.\r\nIt should look like this:\r\n\r\n    @InjectMocks\r\n    private YourClassUnderTest classUnderTest;\r\n\r\n    @Test\r\n    void testLoggedEvent() {  \r\n    // Call the method under test\r\n    classUnderTest.methodUnderTest();\r\n    \r\n    // Verify that the error method was called once\r\n    verify(logger, times(1)).error(anyString());\r\n\r\n    // Verify that there are no more interactions with the mock logger\r\n    verifyNoMoreInteractions(logger);\r\n    }","title":"How to use Mockito verify to unit test @Slf4j logging in Spring Boot","body":"<p>First of all, don't forget to inject the mocks and to check how many times the method has been called.\nIt should look like this:</p>\n<pre><code>@InjectMocks\nprivate YourClassUnderTest classUnderTest;\n\n@Test\nvoid testLoggedEvent() {  \n// Call the method under test\nclassUnderTest.methodUnderTest();\n\n// Verify that the error method was called once\nverify(logger, times(1)).error(anyString());\n\n// Verify that there are no more interactions with the mock logger\nverifyNoMoreInteractions(logger);\n}\n</code></pre>\n"}],"owner":{"account_id":27835226,"reputation":25,"user_id":21252826,"display_name":"Dave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":732,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680566066,"creation_date":1680557832,"question_id":75923957,"body_markdown":"I have a requirement to inject the logger as a mock and verify the log method invocation without creating a custom appender. But I&#39;m not able to verify that log method invocation with this approach.\r\n\r\n    @Mock\r\n    private Logger logger;\r\n    \r\n    @Test\r\n    void testLoggedEvent() {  \r\n        callTestMethod();\r\n        verify(logger).error(anyString());\r\n        verifyNoMoreInteractions(logger);\r\n    }\r\n\r\n\r\n\r\n","title":"How to use Mockito verify to unit test @Slf4j logging in Spring Boot","body":"<p>I have a requirement to inject the logger as a mock and verify the log method invocation without creating a custom appender. But I'm not able to verify that log method invocation with this approach.</p>\n<pre><code>@Mock\nprivate Logger logger;\n\n@Test\nvoid testLoggedEvent() {  \n    callTestMethod();\n    verify(logger).error(anyString());\n    verifyNoMoreInteractions(logger);\n}\n</code></pre>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1680289995,"post_id":75901780,"comment_id":133879225,"body_markdown":"Related: [Read Huge Excel file(500K rows) in java](https://stackoverflow.com/q/42380765/12567365)","body":"Related: <a href=\"https://stackoverflow.com/q/42380765/12567365\">Read Huge Excel file(500K rows) in java</a>"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":2,"creation_date":1680290072,"post_id":75901780,"comment_id":133879239,"body_markdown":"[More suggestions](https://www.google.com/search?q=apache+poi+read+large+excel+files+site:stackoverflow.com). Maybe some of these approaches will work for you.","body":"<a href=\"https://www.google.com/search?q=apache+poi+read+large+excel+files+site:stackoverflow.com\" rel=\"nofollow noreferrer\">More suggestions</a>. Maybe some of these approaches will work for you."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1680351137,"post_id":75901780,"comment_id":133885801,"body_markdown":"More [here](https://stackoverflow.com/a/75860852/230513).","body":"More <a href=\"https://stackoverflow.com/a/75860852/230513\">here</a>."}],"answers":[{"tags":[],"owner":{"account_id":15521882,"reputation":372,"user_id":11564329,"display_name":"Alexey"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680566056,"creation_date":1680566056,"answer_id":75924531,"question_id":75901780,"body_markdown":"The most popular [suggestion][1] didn&#39;t work for me because it hasn&#39;t been updated for 2 years and has conflicts with the latest Apache POI implementation. I found another repo, that is essentially a fork of the original one but has updates: https://github.com/pjfanning/excel-streaming-reader. This is the code that works for me:\r\n```\r\ntry (InputStream inputStream = Files.newInputStream(file.getFileLocation());\r\n     Workbook workbook = StreamingReader.builder().setAvoidTempFiles(false).bufferSize(4096).open(inputStream)) {\r\n...\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/monitorjbl/excel-streaming-reader","title":"Apache poi application is in stuck while reading file with 500k lines","body":"<p>The most popular <a href=\"https://github.com/monitorjbl/excel-streaming-reader\" rel=\"nofollow noreferrer\">suggestion</a> didn't work for me because it hasn't been updated for 2 years and has conflicts with the latest Apache POI implementation. I found another repo, that is essentially a fork of the original one but has updates: <a href=\"https://github.com/pjfanning/excel-streaming-reader\" rel=\"nofollow noreferrer\">https://github.com/pjfanning/excel-streaming-reader</a>. This is the code that works for me:</p>\n<pre><code>try (InputStream inputStream = Files.newInputStream(file.getFileLocation());\n     Workbook workbook = StreamingReader.builder().setAvoidTempFiles(false).bufferSize(4096).open(inputStream)) {\n...\n}\n</code></pre>\n"}],"owner":{"account_id":15521882,"reputation":372,"user_id":11564329,"display_name":"Alexey"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680566056,"creation_date":1680288180,"question_id":75901780,"body_markdown":"I use the following code to read really large excel files - up to 500k lines with up to 100 columns\r\n```\r\npublic List&lt;ExcelLine&gt; getExcelLines(Path path, int batchSize) {\r\n\r\n    log.info(&quot;Reading excel file&quot;);\r\n\r\n    try (Workbook workbook = WorkbookFactory.create(path.toFile())) {\r\n      Sheet sheet = workbook.getSheetAt(0);\r\n      ...\r\n    }\r\n}\r\n```\r\nThe idea was to read by batches to avoid OutOfMemory error and it works for small files. However, once I call the method with large file, I see `log.info` statement, but then the application is in stuck. So a breakpoint inside the try-with-resources statement is not reachable. \r\n\r\nDoes anybody have ideas what to do in such case?","title":"Apache poi application is in stuck while reading file with 500k lines","body":"<p>I use the following code to read really large excel files - up to 500k lines with up to 100 columns</p>\n<pre><code>public List&lt;ExcelLine&gt; getExcelLines(Path path, int batchSize) {\n\n    log.info(&quot;Reading excel file&quot;);\n\n    try (Workbook workbook = WorkbookFactory.create(path.toFile())) {\n      Sheet sheet = workbook.getSheetAt(0);\n      ...\n    }\n}\n</code></pre>\n<p>The idea was to read by batches to avoid OutOfMemory error and it works for small files. However, once I call the method with large file, I see <code>log.info</code> statement, but then the application is in stuck. So a breakpoint inside the try-with-resources statement is not reachable.</p>\n<p>Does anybody have ideas what to do in such case?</p>\n"},{"tags":["java","jboss","jax-rs","log4j2","jboss7.x"],"answers":[{"comments":[{"owner":{"account_id":8827261,"reputation":913,"user_id":6595116,"accept_rate":95,"display_name":"TimeToCode"},"score":0,"creation_date":1680462672,"post_id":75893864,"comment_id":133898803,"body_markdown":"Thx for your answer. But I need to use a config file, because I want to print them in json format from my web application. It could be in another log file to avoid missing or messed up log messages.","body":"Thx for your answer. But I need to use a config file, because I want to print them in json format from my web application. It could be in another log file to avoid missing or messed up log messages."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1680482607,"post_id":75893864,"comment_id":133901189,"body_markdown":"You can print log messages in JSON format with the logging subsystem. If you don&#39;t want to do that though, then you need to keep the excludes and NOT write to the server.log.","body":"You can print log messages in JSON format with the logging subsystem. If you don&#39;t want to do that though, then you need to keep the excludes and NOT write to the server.log."}],"tags":[],"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680221756,"creation_date":1680221756,"answer_id":75893864,"question_id":75892351,"body_markdown":"You do not want to try to use a different log manager which writes to the `server.log`. The two log managers could end up writing over the file which could result in missing or jumbled log messages.\r\n\r\nThere is [log4j2-jboss-logmanager][1] project which will write log4j2 log messages to the JBoss Log Manager. The module is already present in JBoss EAP 7.4. This means all you should need to do is:\r\n\r\n 1. Remove the `jboss-deployment-structure.xml` or at least remove module exclusions\r\n 2. Add the `&lt;scope&gt;provided&lt;/scope&gt;` to the `org.apache.logging:log4j-api` Maven dependency\r\n 3. Remove the `org.apache.logging:log4j-core`\r\n\r\nThis does not support configuring log4j with a configuration file. It uses the configuration in the logging subsystem for configuration. However, given your configuration this should be fine.\r\n\r\n[1]: https://github.com/jboss-logging/log4j2-jboss-logmanager","title":"Log4j2 isn&#180;t working in JAX-RS servlet project on JBoss 7.4","body":"<p>You do not want to try to use a different log manager which writes to the <code>server.log</code>. The two log managers could end up writing over the file which could result in missing or jumbled log messages.</p>\n<p>There is <a href=\"https://github.com/jboss-logging/log4j2-jboss-logmanager\" rel=\"nofollow noreferrer\">log4j2-jboss-logmanager</a> project which will write log4j2 log messages to the JBoss Log Manager. The module is already present in JBoss EAP 7.4. This means all you should need to do is:</p>\n<ol>\n<li>Remove the <code>jboss-deployment-structure.xml</code> or at least remove module exclusions</li>\n<li>Add the <code>&lt;scope&gt;provided&lt;/scope&gt;</code> to the <code>org.apache.logging:log4j-api</code> Maven dependency</li>\n<li>Remove the <code>org.apache.logging:log4j-core</code></li>\n</ol>\n<p>This does not support configuring log4j with a configuration file. It uses the configuration in the logging subsystem for configuration. However, given your configuration this should be fine.</p>\n"}],"owner":{"account_id":8827261,"reputation":913,"user_id":6595116,"accept_rate":95,"display_name":"TimeToCode"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680565546,"creation_date":1680205334,"question_id":75892351,"body_markdown":"I am working on a JAX-RS servlet project, which is deployed on JBoss (7.4) server, I want to implement Log4j2 (2.20) for application log handling, but when I use the `info` method, it does not show anything in the console or in the `server.log` file of the server.\r\n\r\nI added the Log4j2 dependencies to `lib` folder on my project.\r\n\r\n    log4j-api-2.20.0.jar\r\n    log4j-core-2.20.0.jar\r\n\r\nThis is the configuration for Log4j2 in `src\\main\\resources\\log4j2.xml`.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;WARN&quot;&gt;\r\n    \t&lt;Appenders&gt;\r\n    \t\t&lt;Console name=&quot;LogToConsole&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n    \t\t\t&lt;PatternLayout pattern=&quot;%m%n&quot; /&gt;\r\n    \t\t&lt;/Console&gt;\r\n    \t\t&lt;File name=&quot;LogToFile&quot; fileName=&quot;${sys:jboss.server.log.dir}/server.log&quot; append=&quot;true&quot;&gt;\r\n    \t\t\t&lt;PatternLayout&gt;\r\n    \t\t\t\t&lt;Pattern&gt;%m%n&lt;/Pattern&gt;\r\n    \t\t\t&lt;/PatternLayout&gt;\r\n    \t\t&lt;/File&gt;\r\n    \t&lt;/Appenders&gt;\r\n    \t&lt;Loggers&gt;\r\n    \t\t&lt;Logger name=&quot;com.sematext.blog&quot; level=&quot;info&quot; additivity=&quot;true&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;LogToConsole&quot;/&gt;\r\n            &lt;/Logger&gt;\r\n            &lt;Root level=&quot;info&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;LogToFile&quot;/&gt;\r\n            &lt;/Root&gt;\r\n    \t&lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nI excluded the JBoss logging subsystem in the `src\\main\\webapp\\WEB-INF\\jboss-deployment-structure.xml` file:\r\n\r\n    &lt;jboss-deployment-structure&gt;\r\n    \t&lt;deployment&gt;\r\n    \t\t&lt;exclude-subsystems&gt;\r\n\t\t\t    &lt;subsystem name=&quot;logging&quot; /&gt;\r\n\t\t    &lt;/exclude-subsystems&gt;\r\n    \t&lt;/deployment&gt;\r\n    &lt;/jboss-deployment-structure&gt;\r\n\r\nThis is the class where I&#39;m using it.\r\n\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    import javax.ws.rs.GET;\r\n    import javax.ws.rs.Path;\r\n    import javax.ws.rs.Produces;\r\n    \r\n    public class ExampleServiceImpl implements ExampleService {\r\n\r\n        private static final Logger LOGGER = LogManager.getLogger(ExampleServiceImpl.class);\r\n    \r\n        @GET\r\n    \t@Path(&quot;/getListData&quot;)\r\n    \t@Produces(MediaType.APPLICATION_JSON)\r\n    \t@Override\r\n    \tpublic ExampleResp getListData() {\r\n            LOGGER.info(&quot;Inside of getListData method&quot;);\r\n    \t\tExampleDAOImpl exampleDAOImpl = new ExampleDAOImpl();\r\n    \t\tExampleResp resp = new ExampleResp();\r\n    \t\tresp.setListData(exampleDAOImpl.getData());\r\n    \t\treturn resp;\r\n    \t}\r\n    \r\n    }","title":"Log4j2 isn&#180;t working in JAX-RS servlet project on JBoss 7.4","body":"<p>I am working on a JAX-RS servlet project, which is deployed on JBoss (7.4) server, I want to implement Log4j2 (2.20) for application log handling, but when I use the <code>info</code> method, it does not show anything in the console or in the <code>server.log</code> file of the server.</p>\n<p>I added the Log4j2 dependencies to <code>lib</code> folder on my project.</p>\n<pre><code>log4j-api-2.20.0.jar\nlog4j-core-2.20.0.jar\n</code></pre>\n<p>This is the configuration for Log4j2 in <code>src\\main\\resources\\log4j2.xml</code>.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;LogToConsole&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%m%n&quot; /&gt;\n        &lt;/Console&gt;\n        &lt;File name=&quot;LogToFile&quot; fileName=&quot;${sys:jboss.server.log.dir}/server.log&quot; append=&quot;true&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n        &lt;/File&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.sematext.blog&quot; level=&quot;info&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;LogToConsole&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;LogToFile&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>I excluded the JBoss logging subsystem in the <code>src\\main\\webapp\\WEB-INF\\jboss-deployment-structure.xml</code> file:</p>\n<pre><code>&lt;jboss-deployment-structure&gt;\n    &lt;deployment&gt;\n        &lt;exclude-subsystems&gt;\n            &lt;subsystem name=&quot;logging&quot; /&gt;\n        &lt;/exclude-subsystems&gt;\n    &lt;/deployment&gt;\n&lt;/jboss-deployment-structure&gt;\n</code></pre>\n<p>This is the class where I'm using it.</p>\n<pre><code>import org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\n\npublic class ExampleServiceImpl implements ExampleService {\n\n    private static final Logger LOGGER = LogManager.getLogger(ExampleServiceImpl.class);\n\n    @GET\n    @Path(&quot;/getListData&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    @Override\n    public ExampleResp getListData() {\n        LOGGER.info(&quot;Inside of getListData method&quot;);\n        ExampleDAOImpl exampleDAOImpl = new ExampleDAOImpl();\n        ExampleResp resp = new ExampleResp();\n        resp.setListData(exampleDAOImpl.getData());\n        return resp;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","swagger"],"comments":[{"owner":{"account_id":16125832,"reputation":498,"user_id":11640603,"display_name":"Amit Mishra"},"score":0,"creation_date":1605379812,"post_id":64837274,"comment_id":114634418,"body_markdown":"I&#39;ve not seen anything happening with me. I believe it&#39;s because you&#39;re using http basic. Try using form login instead and see if that allow swagger.","body":"I&#39;ve not seen anything happening with me. I believe it&#39;s because you&#39;re using http basic. Try using form login instead and see if that allow swagger."}],"answers":[{"comments":[{"owner":{"account_id":9709676,"reputation":1447,"user_id":7221628,"accept_rate":100,"display_name":"JGlass"},"score":0,"creation_date":1684372247,"post_id":64837907,"comment_id":134510344,"body_markdown":"Wow, +1 on this, instantly fixed issue - but anyone know why?","body":"Wow, +1 on this, instantly fixed issue - but anyone know why?"}],"tags":[],"owner":{"account_id":2548777,"reputation":240,"user_id":2213003,"accept_rate":75,"display_name":"octo-carrot"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1605384032,"creation_date":1605382807,"answer_id":64837907,"question_id":64837274,"body_markdown":"I had a similar issue the other week, this is how i got mine to work, i needed to add a bunch more matchers than i thought and add in the csrf disable but it seems to work ok. \r\n\r\n    @Bean(name=&quot;configure&quot;)\r\n    @Conditional(DevConditional.class)\r\n    public SecurityWebFilterChain configureDev(ServerHttpSecurity http) throws Exception {\r\n        return http\r\n                .csrf().disable()\r\n                .authorizeExchange()\r\n                .pathMatchers(&quot;/v2/api-docs&quot;).permitAll()\r\n                .pathMatchers(&quot;/configuration/ui&quot;).permitAll()\r\n                .pathMatchers(&quot;/swagger-resources/**&quot;).permitAll()\r\n                .pathMatchers(&quot;/configuration/security&quot;).permitAll()\r\n                .pathMatchers(&quot;/swagger-ui.html&quot;).permitAll()\r\n                .pathMatchers(&quot;/swagger-ui/*&quot;).permitAll()\r\n                .pathMatchers(&quot;/webjars/**&quot;).permitAll()\r\n                .pathMatchers(&quot;/v2/**&quot;).permitAll()\r\n                .and().cors()\r\n                .and().oauth2ResourceServer()\r\n                .jwt().and().and().build();\r\n    }\r\n\r\nI got this &quot;.csrf().disable()&quot; answer from : https://stackoverflow.com/questions/60861050/spring-boot-with-webflux-always-throw-403-status-in-tests ","title":"Swagger POST return 403 Forbidden Spring boot Spring security","body":"<p>I had a similar issue the other week, this is how i got mine to work, i needed to add a bunch more matchers than i thought and add in the csrf disable but it seems to work ok.</p>\n<pre><code>@Bean(name=&quot;configure&quot;)\n@Conditional(DevConditional.class)\npublic SecurityWebFilterChain configureDev(ServerHttpSecurity http) throws Exception {\n    return http\n            .csrf().disable()\n            .authorizeExchange()\n            .pathMatchers(&quot;/v2/api-docs&quot;).permitAll()\n            .pathMatchers(&quot;/configuration/ui&quot;).permitAll()\n            .pathMatchers(&quot;/swagger-resources/**&quot;).permitAll()\n            .pathMatchers(&quot;/configuration/security&quot;).permitAll()\n            .pathMatchers(&quot;/swagger-ui.html&quot;).permitAll()\n            .pathMatchers(&quot;/swagger-ui/*&quot;).permitAll()\n            .pathMatchers(&quot;/webjars/**&quot;).permitAll()\n            .pathMatchers(&quot;/v2/**&quot;).permitAll()\n            .and().cors()\n            .and().oauth2ResourceServer()\n            .jwt().and().and().build();\n}\n</code></pre>\n<p>I got this &quot;.csrf().disable()&quot; answer from : <a href=\"https://stackoverflow.com/questions/60861050/spring-boot-with-webflux-always-throw-403-status-in-tests\">Spring boot with WebFlux always throw 403 status in tests</a></p>\n"},{"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1680900962,"post_id":75924481,"comment_id":133978733,"body_markdown":"That doesn&#39;t add anything to the existing answer.","body":"That doesn&#39;t add anything to the existing answer."}],"tags":[],"owner":{"account_id":21602626,"reputation":1,"user_id":15930483,"display_name":"Vusal Akhundzada"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680565338,"creation_date":1680565338,"answer_id":75924481,"question_id":64837274,"body_markdown":"### I encountered the same problem in Spring Boot 3.&lt;br&gt;\r\n&quot;.csrf().disable()&quot; worked for me.&lt;br&gt;\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .csrf().disable()\r\n                .authorizeHttpRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                ...\r\n                ...\r\n                .build();\r\n    }\r\n","title":"Swagger POST return 403 Forbidden Spring boot Spring security","body":"<h3>I encountered the same problem in Spring Boot 3.<br></h3>\n<p>&quot;.csrf().disable()&quot; worked for me.<br></p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    return http\n            .csrf().disable()\n            .authorizeHttpRequests()\n            .anyRequest().authenticated()\n            .and()\n            ...\n            ...\n            .build();\n}\n</code></pre>\n"}],"owner":{"account_id":19974433,"reputation":41,"user_id":14639114,"display_name":"Gustavo Gutierrez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12942,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1680565338,"creation_date":1605378721,"question_id":64837274,"body_markdown":"i am getting 403 status Forbidden in swagger only for POST method request.\r\nI tried all spring security cfg to solve this but only works on the GET methods.\r\nI am using spring boot, spring security and swagger.\r\n&#191; Could someone please help me ?\r\nHere&#39;s swagger cfg:\r\n```\r\n@Configuration\r\n@EnableSwagger2\r\npublic class SwaggerConfig {\r\n\t\r\n\t@Bean\r\n\tpublic Docket api() {\r\n\t    return new Docket(DocumentationType.SWAGGER_2)  \r\n\t            .select()                                  \r\n\t            .apis(RequestHandlerSelectors.any())              \r\n\t            .paths(PathSelectors.any())                          \r\n\t            .build();\r\n\t}\r\n}\r\n```\r\nAnd here&#39;s the spring security cfg:\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityCFG extends WebSecurityConfigurerAdapter{\r\n\t\r\n\t@Bean\r\n\tpublic PasswordEncoder encoder() {\r\n\t    return new BCryptPasswordEncoder();\r\n\t}\r\n\t\r\n\t@Override\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \tPasswordEncoder encoder = encoder();\r\n    \tauth\r\n          .inMemoryAuthentication()\r\n          .withUser(&quot;carlos&quot;)\r\n          .password(encoder.encode(&quot;admin123&quot;))\r\n          .roles(&quot;USER&quot;)\r\n          .and()\r\n          .withUser(&quot;carlos2&quot;)\r\n          .password(encoder.encode(&quot;admin123&quot;))\r\n          .roles(&quot;USER&quot;, &quot;ADMIN&quot;);\r\n    }\r\n\t\r\n\t@Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n          .authorizeRequests()\r\n          .antMatchers(\r\n                  &quot;/v2/api-docs&quot;, \r\n                  &quot;/swagger-resources/**&quot;,  \r\n                  &quot;/swagger-ui.html&quot;, \r\n                  &quot;/webjars/**&quot; ,\r\n                   /*Probably not needed*/ &quot;/swagger.json&quot;)\r\n          .permitAll()\r\n          .anyRequest()\r\n          .authenticated()\r\n          .and()\r\n          .httpBasic();\r\n    }\r\n\t\r\n    @Override\r\n    public void configure(WebSecurity web) throws Exception {\r\n    \tweb.ignoring().antMatchers(&quot;/v2/api-docs/**&quot;);\r\n        web.ignoring().antMatchers(&quot;/swagger.json&quot;);\r\n        web.ignoring().antMatchers(&quot;/swagger-ui.html&quot;);\r\n        web.ignoring().antMatchers(&quot;/swagger-resources/**&quot;);\r\n        web.ignoring().antMatchers(&quot;/webjars/**&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThank for reading!","title":"Swagger POST return 403 Forbidden Spring boot Spring security","body":"<p>i am getting 403 status Forbidden in swagger only for POST method request.\nI tried all spring security cfg to solve this but only works on the GET methods.\nI am using spring boot, spring security and swagger.\n¿ Could someone please help me ?\nHere's swagger cfg:</p>\n<pre><code>@Configuration\n@EnableSwagger2\npublic class SwaggerConfig {\n    \n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)  \n                .select()                                  \n                .apis(RequestHandlerSelectors.any())              \n                .paths(PathSelectors.any())                          \n                .build();\n    }\n}\n</code></pre>\n<p>And here's the spring security cfg:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityCFG extends WebSecurityConfigurerAdapter{\n    \n    @Bean\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n    \n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        PasswordEncoder encoder = encoder();\n        auth\n          .inMemoryAuthentication()\n          .withUser(&quot;carlos&quot;)\n          .password(encoder.encode(&quot;admin123&quot;))\n          .roles(&quot;USER&quot;)\n          .and()\n          .withUser(&quot;carlos2&quot;)\n          .password(encoder.encode(&quot;admin123&quot;))\n          .roles(&quot;USER&quot;, &quot;ADMIN&quot;);\n    }\n    \n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n          .authorizeRequests()\n          .antMatchers(\n                  &quot;/v2/api-docs&quot;, \n                  &quot;/swagger-resources/**&quot;,  \n                  &quot;/swagger-ui.html&quot;, \n                  &quot;/webjars/**&quot; ,\n                   /*Probably not needed*/ &quot;/swagger.json&quot;)\n          .permitAll()\n          .anyRequest()\n          .authenticated()\n          .and()\n          .httpBasic();\n    }\n    \n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring().antMatchers(&quot;/v2/api-docs/**&quot;);\n        web.ignoring().antMatchers(&quot;/swagger.json&quot;);\n        web.ignoring().antMatchers(&quot;/swagger-ui.html&quot;);\n        web.ignoring().antMatchers(&quot;/swagger-resources/**&quot;);\n        web.ignoring().antMatchers(&quot;/webjars/**&quot;);\n    }\n}\n</code></pre>\n<p>Thank for reading!</p>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":4,"creation_date":1680477355,"post_id":75915077,"comment_id":133900647,"body_markdown":"No. Unlike in java, assignments in kotlin are not expressions, so this cannot be done.","body":"No. Unlike in java, assignments in kotlin are not expressions, so this cannot be done."},{"owner":{"account_id":12694317,"reputation":1,"user_id":9223264,"display_name":"Jaspalsinh Gohil"},"score":0,"creation_date":1680496627,"post_id":75915077,"comment_id":133902542,"body_markdown":"yes you can do that using the init block serves the same purpose as the constructor in Java.","body":"yes you can do that using the init block serves the same purpose as the constructor in Java."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1680564678,"creation_date":1680487114,"answer_id":75915578,"question_id":75915077,"body_markdown":"This works in Java because assignments are expressions that evaluate to the value that is assigned. However, assignments are not expressions in Kotlin, so the same syntax cannot be done.\r\n\r\nIf you want to avoid writing `&quot;Matroskin&quot;` twice, you can use one of the many [scope functions][1] available. I&#39;d use `let`:\r\n```kotlin\r\n&quot;Matroskin&quot;.let {\r\n    firstName = it\r\n    lastName = it\r\n}\r\n```\r\n\r\nSince this is in a constructor, you can also do:\r\n```kotlin\r\nvar firstName = &quot;Matroskin&quot;\r\nvar lastName: String\r\n\r\ninit {\r\n    lastName = firstName\r\n}\r\n```\r\n\r\n&lt;hr&gt;\r\n\r\n(This part is for fun only)\r\n\r\nThat said, you can *technically* abuse Kotlin&#39;s features to achieve similar syntax, by defining an infix function called `=`.\r\n\r\n```kotlin\r\ninfix fun &lt;T&gt; T.`=`(prop: KMutableProperty&lt;T&gt;): T {\r\n    prop.setter.call(prop)\r\n    return this\r\n}\r\n```\r\n\r\n```kotlin\r\n&quot;Matroskin&quot; `=` ::lastName `=` ::firstName\r\n```\r\n\r\nNote that the value to be assigned is ordered first, because infix functions are left associative. You could declare `=` with the arguments reversed, but then the usage needs brackets:\r\n\r\n```kotlin\r\n::lastName `=` (::firstName `=` &quot;Matroskin&quot;)\r\n```\r\n\r\nAlso, this doesn&#39;t count as initialising properties, so Kotlin will complain that `firstName` and `lastName` aren&#39;t initialised if you don&#39;t give them default values:\r\n```kotlin\r\nvar firstName = &quot;&quot;\r\nvar lastName = &quot;&quot;\r\n```\r\n\r\nIf you are using `val`s, then this way is not applicable.\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/scope-functions.html","title":"Assignment chaining in Kotlin?","body":"<p>This works in Java because assignments are expressions that evaluate to the value that is assigned. However, assignments are not expressions in Kotlin, so the same syntax cannot be done.</p>\n<p>If you want to avoid writing <code>&quot;Matroskin&quot;</code> twice, you can use one of the many <a href=\"https://kotlinlang.org/docs/scope-functions.html\" rel=\"nofollow noreferrer\">scope functions</a> available. I'd use <code>let</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>&quot;Matroskin&quot;.let {\n    firstName = it\n    lastName = it\n}\n</code></pre>\n<p>Since this is in a constructor, you can also do:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>var firstName = &quot;Matroskin&quot;\nvar lastName: String\n\ninit {\n    lastName = firstName\n}\n</code></pre>\n<hr>\n<p>(This part is for fun only)</p>\n<p>That said, you can <em>technically</em> abuse Kotlin's features to achieve similar syntax, by defining an infix function called <code>=</code>.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>infix fun &lt;T&gt; T.`=`(prop: KMutableProperty&lt;T&gt;): T {\n    prop.setter.call(prop)\n    return this\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>&quot;Matroskin&quot; `=` ::lastName `=` ::firstName\n</code></pre>\n<p>Note that the value to be assigned is ordered first, because infix functions are left associative. You could declare <code>=</code> with the arguments reversed, but then the usage needs brackets:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>::lastName `=` (::firstName `=` &quot;Matroskin&quot;)\n</code></pre>\n<p>Also, this doesn't count as initialising properties, so Kotlin will complain that <code>firstName</code> and <code>lastName</code> aren't initialised if you don't give them default values:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>var firstName = &quot;&quot;\nvar lastName = &quot;&quot;\n</code></pre>\n<p>If you are using <code>val</code>s, then this way is not applicable.</p>\n"}],"owner":{"account_id":23842063,"reputation":646,"user_id":17846993,"display_name":"bighugedev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75915578,"answer_count":1,"score":2,"last_activity_date":1680564678,"creation_date":1680477091,"question_id":75915077,"body_markdown":"In Java, there is a syntactic sugar construction called `assignment chaining` as shown below:\r\n```java\r\npublic class Cat {\r\n    String firstName;\r\n    String lastName;\r\n\r\n    Cat() {\r\n        lastName = firstName = &quot;Matroskin&quot;; // compiles!\r\n    }\r\n}\r\n```\r\nIs there a way to perform exactly this in Kotlin?","title":"Assignment chaining in Kotlin?","body":"<p>In Java, there is a syntactic sugar construction called <code>assignment chaining</code> as shown below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Cat {\n    String firstName;\n    String lastName;\n\n    Cat() {\n        lastName = firstName = &quot;Matroskin&quot;; // compiles!\n    }\n}\n</code></pre>\n<p>Is there a way to perform exactly this in Kotlin?</p>\n"},{"tags":["java","garbage-collection"],"answers":[{"comments":[{"owner":{"account_id":19779,"reputation":229365,"user_id":46642,"accept_rate":88,"display_name":"R. Martinho Fernandes"},"score":0,"creation_date":1287415066,"post_id":3960569,"comment_id":4233046,"body_markdown":"Well, if the result of `buildList()` overrides `finalize()` it will be disastrous. But let&#39;s hope the code is sane.","body":"Well, if the result of <code>buildList()</code> overrides <code>finalize()</code> it will be disastrous. But let&#39;s hope the code is sane."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1287415607,"post_id":3960569,"comment_id":4233172,"body_markdown":"Objects overriding finalize() gets very special treatment by the garbage collector.","body":"Objects overriding finalize() gets very special treatment by the garbage collector."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287415760,"post_id":3960569,"comment_id":4233189,"body_markdown":"Sure but I&#39;m wondering how it leads to &quot;disastrous&quot; consequences.","body":"Sure but I&#39;m wondering how it leads to &quot;disastrous&quot; consequences."},{"owner":{"account_id":19779,"reputation":229365,"user_id":46642,"accept_rate":88,"display_name":"R. Martinho Fernandes"},"score":0,"creation_date":1287415787,"post_id":3960569,"comment_id":4233197,"body_markdown":"Because objects that override finalize are created along with a &quot;finalizer object&quot; that is responsible for tracking finalization and stuff. This increases the survival rate on gen 0 collections and pushes &quot;finalizer objects&quot; to higher generations, making them harder to collect. Look at the examples here: http://elliottback.com/wp/java-memory-leaks-w-finalize-examples/","body":"Because objects that override finalize are created along with a &quot;finalizer object&quot; that is responsible for tracking finalization and stuff. This increases the survival rate on gen 0 collections and pushes &quot;finalizer objects&quot; to higher generations, making them harder to collect. Look at the examples here: <a href=\"http://elliottback.com/wp/java-memory-leaks-w-finalize-examples/\" rel=\"nofollow noreferrer\">elliottback.com/wp/java-memory-leaks-w-finalize-examples</a>"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287416096,"post_id":3960569,"comment_id":4233254,"body_markdown":"@Martinho: I fail to see how anything in that article deals with the dangers of using finalize methods in loops but rather is a general caution against stupid implementations of `finalize()`, whether in a loop or not.  So how does simply overriding `finalize()` lead to disastrous results?","body":"@Martinho: I fail to see how anything in that article deals with the dangers of using finalize methods in loops but rather is a general caution against stupid implementations of <code>finalize()</code>, whether in a loop or not.  So how does simply overriding <code>finalize()</code> lead to disastrous results?"},{"owner":{"account_id":19779,"reputation":229365,"user_id":46642,"accept_rate":88,"display_name":"R. Martinho Fernandes"},"score":0,"creation_date":1287416614,"post_id":3960569,"comment_id":4233332,"body_markdown":"@Mark: Yeah, that article does not exactly showcase what I meant. The problem is that you&#39;re creating objects that most likely will end up in the old generations, and those will only be collected when you get a full collection. You can end up with out-of-memory errors depending on the loop.","body":"@Mark: Yeah, that article does not exactly showcase what I meant. The problem is that you&#39;re creating objects that most likely will end up in the old generations, and those will only be collected when you get a full collection. You can end up with out-of-memory errors depending on the loop."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287417483,"post_id":3960569,"comment_id":4233508,"body_markdown":"@Martinho: I didn&#39;t think it was possible to get an OOME without a full collection.  I&#39;d really love to see an example of this.  I can understand worse performance, but I would be really surprised to see an OOME.","body":"@Martinho: I didn&#39;t think it was possible to get an OOME without a full collection.  I&#39;d really love to see an example of this.  I can understand worse performance, but I would be really surprised to see an OOME."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287424557,"post_id":3960569,"comment_id":4234873,"body_markdown":"@Martinho: Could it?  I haven&#39;t seen any evidence of that yet.  Java is built around giving guarantees that certain things *won&#39;t* happen, even in extreme circumstances.  If it could happen, and the Java specification says it can&#39;t, that&#39;s a very grave situation that would require critical bug reports, patches, etc.","body":"@Martinho: Could it?  I haven&#39;t seen any evidence of that yet.  Java is built around giving guarantees that certain things <i>won&#39;t</i> happen, even in extreme circumstances.  If it could happen, and the Java specification says it can&#39;t, that&#39;s a very grave situation that would require critical bug reports, patches, etc."}],"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"comment_count":8,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1287414919,"creation_date":1287414919,"answer_id":3960569,"question_id":3960550,"body_markdown":"Lord, no! Java&#39;s GC is much, _much_, **much** smarter than that.","title":"Will Java&#39;s garbage collector go ahead and take care of variables declared within loops?","body":"<p>Lord, no! Java's GC is much, <em>much</em>, <strong>much</strong> smarter than that.</p>\n"},{"comments":[{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287415385,"post_id":3960592,"comment_id":4233125,"body_markdown":"I think he&#39;s more worried that objects assigned to `myList` in previous iterations of the loop will be GC&#39;d, even while still in the loop.  Not after the loop.","body":"I think he&#39;s more worried that objects assigned to <code>myList</code> in previous iterations of the loop will be GC&#39;d, even while still in the loop.  Not after the loop."},{"owner":{"account_id":1108,"reputation":9901,"user_id":1471,"accept_rate":64,"display_name":"Tim Frey"},"score":1,"creation_date":1287415969,"post_id":3960592,"comment_id":4233237,"body_markdown":"I don&#39;t know if this answer is complete enough.  First, integers and other values types are allocated on the stack and have nothing to do with the garbage collection.  Second, myList may or may not be eligible for garbage collection; it depends on whether or not another reference is stored somewhere else in your code.","body":"I don&#39;t know if this answer is complete enough.  First, integers and other values types are allocated on the stack and have nothing to do with the garbage collection.  Second, myList may or may not be eligible for garbage collection; it depends on whether or not another reference is stored somewhere else in your code."},{"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"score":0,"creation_date":1287416256,"post_id":3960592,"comment_id":4233278,"body_markdown":"@Outlaw Programmer: &quot;integers and other values types are allocated on the stack&quot;. Do you have a reference for this claim? I believe the JVM can choose whether to use heap or stack allocation, and will do so based on various heuristics. Or are you talking about primitive types?","body":"@Outlaw Programmer: &quot;integers and other values types are allocated on the stack&quot;. Do you have a reference for this claim? I believe the JVM can choose whether to use heap or stack allocation, and will do so based on various heuristics. Or are you talking about primitive types?"},{"owner":{"account_id":21485,"reputation":24909,"user_id":52233,"display_name":"Alan Geleynse"},"score":0,"creation_date":1287416284,"post_id":3960592,"comment_id":4233284,"body_markdown":"It&#39;s true that variables on the stack would not be garbage collected, I was simply referring to variable scope.  I edited the answer to mention other references though, that is a very good point that I missed.","body":"It&#39;s true that variables on the stack would not be garbage collected, I was simply referring to variable scope.  I edited the answer to mention other references though, that is a very good point that I missed."},{"owner":{"account_id":134312,"reputation":11572,"user_id":336355,"display_name":"Ishtar"},"score":0,"creation_date":1287416475,"post_id":3960592,"comment_id":4233314,"body_markdown":"-1 GC does not clean up variables. And GC has nothing to do with `i`, that&#39;s a primitive stack variable, not an instance on the heap.","body":"-1 GC does not clean up variables. And GC has nothing to do with <code>i</code>, that&#39;s a primitive stack variable, not an instance on the heap."}],"tags":[],"owner":{"account_id":21485,"reputation":24909,"user_id":52233,"display_name":"Alan Geleynse"},"comment_count":5,"down_vote_count":2,"up_vote_count":16,"is_accepted":true,"score":14,"last_activity_date":1287416605,"creation_date":1287415069,"answer_id":3960592,"question_id":3960550,"body_markdown":"The GC will automatically clean up any variables that are no longer in scope.\r\n\r\nA variable declared within a block, such as a for loop, will only be in scope within that block.  Once the code has exited the block, the GC will remove it.  This happens as soon as an iteration of the loop ends, so the list becomes eligible for garbage collection as soon as each iteration of the loop finishes.\r\n\r\nThe scope of a variable is also why `i` would not be valid after your example loop.\r\n\r\nNote that this only is the case if you use the variable only within the loop.  If you pass it to another method that keeps a reference to it, your variable will not be garbage collected.","title":"Will Java&#39;s garbage collector go ahead and take care of variables declared within loops?","body":"<p>The GC will automatically clean up any variables that are no longer in scope.</p>\n\n<p>A variable declared within a block, such as a for loop, will only be in scope within that block.  Once the code has exited the block, the GC will remove it.  This happens as soon as an iteration of the loop ends, so the list becomes eligible for garbage collection as soon as each iteration of the loop finishes.</p>\n\n<p>The scope of a variable is also why <code>i</code> would not be valid after your example loop.</p>\n\n<p>Note that this only is the case if you use the variable only within the loop.  If you pass it to another method that keeps a reference to it, your variable will not be garbage collected.</p>\n"},{"tags":[],"owner":{"account_id":220834,"reputation":119,"user_id":478469,"accept_rate":44,"display_name":"Anant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1287415591,"creation_date":1287415591,"answer_id":3960663,"question_id":3960550,"body_markdown":"you don&#39;t have to bother about the garbage.\r\nJava GC will automatically do this.\r\nBut my suggestion is that as a good developer, you have to make practise\r\nfor freeing the garbage.\r\nAs GC will take some proccesing time.\r\nSo by taking care of ourself we will definetly increase the performance.","title":"Will Java&#39;s garbage collector go ahead and take care of variables declared within loops?","body":"<p>you don't have to bother about the garbage.\nJava GC will automatically do this.\nBut my suggestion is that as a good developer, you have to make practise\nfor freeing the garbage.\nAs GC will take some proccesing time.\nSo by taking care of ourself we will definetly increase the performance.</p>\n"},{"tags":[],"owner":{"account_id":134312,"reputation":11572,"user_id":336355,"display_name":"Ishtar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1287416174,"creation_date":1287416174,"answer_id":3960730,"question_id":3960550,"body_markdown":"The GC reclaims all unreachable instances, when ever it wants to. It does not GC variables. \r\n\r\nThe variables `i` and `myList` live on the stack. When the for loop ends(when they go out of scope), they will be pushed of the stack and so their memory reclaimed. The variables will then be gone. Setting the reference variable `myList` to null just before it goes away, really makes no difference (for GCing the instances). If GC will reclaim the memory for the instance `myList` referred too, really depends on whether you have another reference to the same instance.\r\n\r\nVariables don&#39;t get GCed, instances do. ","title":"Will Java&#39;s garbage collector go ahead and take care of variables declared within loops?","body":"<p>The GC reclaims all unreachable instances, when ever it wants to. It does not GC variables. </p>\n\n<p>The variables <code>i</code> and <code>myList</code> live on the stack. When the for loop ends(when they go out of scope), they will be pushed of the stack and so their memory reclaimed. The variables will then be gone. Setting the reference variable <code>myList</code> to null just before it goes away, really makes no difference (for GCing the instances). If GC will reclaim the memory for the instance <code>myList</code> referred too, really depends on whether you have another reference to the same instance.</p>\n\n<p>Variables don't get GCed, instances do. </p>\n"},{"comments":[{"owner":{"account_id":30211,"reputation":2545,"user_id":82230,"accept_rate":86,"display_name":"slim"},"score":0,"creation_date":1287440512,"post_id":3960906,"comment_id":4237604,"body_markdown":"Does this mean that the GC is not used to manage the memory for variables/instances declared within a block? Once the block has ended, the variables/instances are reclaimed automatically?","body":"Does this mean that the GC is not used to manage the memory for variables/instances declared within a block? Once the block has ended, the variables/instances are reclaimed automatically?"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287445001,"post_id":3960906,"comment_id":4238134,"body_markdown":"No, it doesn&#39;t mean that.  Instances are still put on the heap and reclaimed by the gc.   Remember the block could easily leak a reference to one of those instances.  All I was trying to say was that the scope of a variable is limited to a block, regardless of the control structure being used.","body":"No, it doesn&#39;t mean that.  Instances are still put on the heap and reclaimed by the gc.   Remember the block could easily leak a reference to one of those instances.  All I was trying to say was that the scope of a variable is limited to a block, regardless of the control structure being used."}],"tags":[],"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1287424365,"creation_date":1287417415,"answer_id":3960906,"question_id":3960550,"body_markdown":"It would probably help to understand the syntax behind of the for-loop.  That&#39;s discussed in the [JLS Section 14.14.1][1].\r\n\r\n&gt;     BasicForStatement:\r\n&gt;         for ( ForInitopt ; Expressionopt ; ForUpdateopt ) Statement\r\n&gt; \r\n&gt;     ...\r\n&gt; \r\n&gt;     Statement:\r\n&gt;         StatementWithoutTrailingSubstatement\r\n&gt;         ...\r\n&gt; \r\n&gt;     StatementWithoutTrailingSubstatement:\r\n&gt;         Block\r\n&gt;         EmptyStatement\r\n&gt;         ExpressionStatement\r\n&gt;         ...\r\n&gt; \r\n&gt; \r\n&gt;     Block:\r\n&gt;         { BlockStatementsopt }\r\n&gt; \r\n&gt;     BlockStatements:\r\n&gt;         BlockStatement\r\n&gt;         BlockStatements BlockStatement\r\n&gt; \r\n&gt;     BlockStatement:\r\n&gt;         LocalVariableDeclarationStatement\r\n&gt;         ClassDeclaration\r\n&gt;         Statement\r\n\r\nStatement, as always, can be a single statement or a block (statements surrounded with curly braces).  A block represents a new lexical scope and variables declared therein are local to that block only.  What many people don&#39;t realize is that isn&#39;t unique to the for-loop.  I can put a block statement anywhere in a method:\r\n\r\n     public void someMethod() {\r\n     \r\n         {\r\n             List&lt;String&gt; myList = new ArrayList&lt;String&gt;();\r\n             System.out.println(myList);\r\n         }\r\n         System.out.println(myList.size()); //compile error: myList out of scope\r\n     }\r\n\r\nAnyway this isn&#39;t going where I was intending.  Suffice to say that it has less to do with the fact that it&#39;s a loop and more to do with the fact that it&#39;s a block (if you choose not to use a block statement, you can&#39;t declare new local variables so the problem is irrelevant).      \r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jls/third_edition/html/statements.html#14.14.1\r\n\r\n","title":"Will Java&#39;s garbage collector go ahead and take care of variables declared within loops?","body":"<p>It would probably help to understand the syntax behind of the for-loop.  That's discussed in the <a href=\"http://java.sun.com/docs/books/jls/third_edition/html/statements.html#14.14.1\" rel=\"nofollow\">JLS Section 14.14.1</a>.</p>\n\n<blockquote>\n<pre><code>BasicForStatement:\n    for ( ForInitopt ; Expressionopt ; ForUpdateopt ) Statement\n\n...\n\nStatement:\n    StatementWithoutTrailingSubstatement\n    ...\n\nStatementWithoutTrailingSubstatement:\n    Block\n    EmptyStatement\n    ExpressionStatement\n    ...\n\n\nBlock:\n    { BlockStatementsopt }\n\nBlockStatements:\n    BlockStatement\n    BlockStatements BlockStatement\n\nBlockStatement:\n    LocalVariableDeclarationStatement\n    ClassDeclaration\n    Statement\n</code></pre>\n</blockquote>\n\n<p>Statement, as always, can be a single statement or a block (statements surrounded with curly braces).  A block represents a new lexical scope and variables declared therein are local to that block only.  What many people don't realize is that isn't unique to the for-loop.  I can put a block statement anywhere in a method:</p>\n\n<pre><code> public void someMethod() {\n\n     {\n         List&lt;String&gt; myList = new ArrayList&lt;String&gt;();\n         System.out.println(myList);\n     }\n     System.out.println(myList.size()); //compile error: myList out of scope\n }\n</code></pre>\n\n<p>Anyway this isn't going where I was intending.  Suffice to say that it has less to do with the fact that it's a loop and more to do with the fact that it's a block (if you choose not to use a block statement, you can't declare new local variables so the problem is irrelevant).      </p>\n"},{"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1680901006,"post_id":75924430,"comment_id":133978740,"body_markdown":"This does not provide an answer to the question. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment); instead, [provide answers that don&#39;t require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead). - [From Review](/review/late-answers/34158614)","body":"This does not provide an answer to the question. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>; instead, <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\">provide answers that don&#39;t require clarification from the asker</a>. - <a href=\"/review/late-answers/34158614\">From Review</a>"}],"tags":[],"owner":{"account_id":19413841,"reputation":31,"user_id":14197770,"display_name":"hzhaoc"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680564610,"creation_date":1680564610,"answer_id":75924430,"question_id":3960550,"body_markdown":"@Alan Geleynse mentioned in his/her answer that GC removes unreferenced objects in heap after every block is exited. This is not necessarily true, the timing of running JVM GC can be of by usage, instead of by blocks. What it means is JVM will be allocated some size of heap memory (survivor, eden, old gen) from JVM or OS kernal depending on resources, then when the memory is approaching that allocation limit, GC will run. ","title":"Will Java&#39;s garbage collector go ahead and take care of variables declared within loops?","body":"<p>@Alan Geleynse mentioned in his/her answer that GC removes unreferenced objects in heap after every block is exited. This is not necessarily true, the timing of running JVM GC can be of by usage, instead of by blocks. What it means is JVM will be allocated some size of heap memory (survivor, eden, old gen) from JVM or OS kernal depending on resources, then when the memory is approaching that allocation limit, GC will run.</p>\n"}],"owner":{"account_id":30211,"reputation":2545,"user_id":82230,"accept_rate":86,"display_name":"slim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5069,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":3960592,"answer_count":6,"score":10,"last_activity_date":1680564610,"creation_date":1287414760,"question_id":3960550,"body_markdown":"If I have:\r\n\r\n    for (int i; i != 100; i++) {\r\n        ArrayList&lt;String&gt; myList = buildList();\r\n        //... more work here\r\n    }\r\n\r\nDo I have to set myList to null at the end of my loop to get the GC to reclaim the memory it uses for myList?","title":"Will Java&#39;s garbage collector go ahead and take care of variables declared within loops?","body":"<p>If I have:</p>\n\n<pre><code>for (int i; i != 100; i++) {\n    ArrayList&lt;String&gt; myList = buildList();\n    //... more work here\n}\n</code></pre>\n\n<p>Do I have to set myList to null at the end of my loop to get the GC to reclaim the memory it uses for myList?</p>\n"},{"tags":["java","postgresql","stream","java-stream","reactive"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1680565872,"post_id":75924429,"comment_id":133916843,"body_markdown":"If you want to use r2dbc then use r2dbc. Nothing humane about it. [SomeEntityDao.java](https://github.com/karlnicholas/WebFluxR2dbc/blob/master/src/main/java/com/example/webfluxplay/dao/SomeEntityDao.java).","body":"If you want to use r2dbc then use r2dbc. Nothing humane about it. <a href=\"https://github.com/karlnicholas/WebFluxR2dbc/blob/master/src/main/java/com/example/webfluxplay/dao/SomeEntityDao.java\" rel=\"nofollow noreferrer\">SomeEntityDao.java</a>."}],"owner":{"account_id":120465,"reputation":1592,"user_id":312929,"accept_rate":70,"display_name":"rojanu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680564586,"creation_date":1680564586,"question_id":75924429,"body_markdown":"I&#39;ve come from scala background using akka streams and slick to access DB.\r\n\r\nI&#39;d like to introduce reactive programming to my current workplace, which is a java shop.  I&#39;ve been looking at how to access PostgreSQL using reactive stack, looks like `r2dbc-postgresql` is the way to go.  However, the repo mentions that `This implementation is not intended to be used directly, but rather to be used as the backing implementation for a humane client library to delegate to.` \r\n\r\nSo far, I&#39;ve that Spring Data is an implementation of the `r2dbc-postgresql`. However, I&#39;d like to avoid Spring, if at all possible.\r\n\r\nAre there any other alternatives to Spring Data or `r2dbc`?\r\n\r\nThanks","title":"What are r2dbc-postresql implementations","body":"<p>I've come from scala background using akka streams and slick to access DB.</p>\n<p>I'd like to introduce reactive programming to my current workplace, which is a java shop.  I've been looking at how to access PostgreSQL using reactive stack, looks like <code>r2dbc-postgresql</code> is the way to go.  However, the repo mentions that <code>This implementation is not intended to be used directly, but rather to be used as the backing implementation for a humane client library to delegate to.</code></p>\n<p>So far, I've that Spring Data is an implementation of the <code>r2dbc-postgresql</code>. However, I'd like to avoid Spring, if at all possible.</p>\n<p>Are there any other alternatives to Spring Data or <code>r2dbc</code>?</p>\n<p>Thanks</p>\n"},{"tags":["java","type-conversion","byte","long-integer"],"comments":[{"owner":{"account_id":1972454,"reputation":1909,"user_id":1771050,"accept_rate":25,"display_name":"Raul"},"score":1,"creation_date":1355848185,"post_id":4485128,"comment_id":19232018,"body_markdown":"Another alternative will be Maps.transformValues, a general tooling for converting collections. http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Maps.html","body":"Another alternative will be Maps.transformValues, a general tooling for converting collections. <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Maps.html\" rel=\"nofollow noreferrer\">docs.guava-libraries.googlecode.com/git-history/release/java&zwnj;&#8203;doc/&hellip;</a>"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":1,"creation_date":1464639542,"post_id":4485128,"comment_id":62556550,"body_markdown":"See also http://stackoverflow.com/q/27559449/32453 if your goal is to convert a long into the fewest number of Base64 chars.","body":"See also <a href=\"http://stackoverflow.com/q/27559449/32453\">stackoverflow.com/q/27559449/32453</a> if your goal is to convert a long into the fewest number of Base64 chars."}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1292801315,"post_id":4485196,"comment_id":4906042,"body_markdown":"Clever ... but you create and discard a temporary ByteBuffer for each conversion.  Not good if you are sending multiple longs per message and/or lots of messages.","body":"Clever ... but you create and discard a temporary ByteBuffer for each conversion.  Not good if you are sending multiple longs per message and/or lots of messages."},{"owner":{"account_id":200630,"reputation":27386,"user_id":446591,"accept_rate":65,"display_name":"Brad Mace"},"score":2,"creation_date":1292801480,"post_id":4485196,"comment_id":4906057,"body_markdown":"@Stephen - I was just doing enough to demonstrate how to use ByteBuffer, but I went ahead and added an example of using it in a utility class.","body":"@Stephen - I was just doing enough to demonstrate how to use ByteBuffer, but I went ahead and added an example of using it in a utility class."},{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":9,"creation_date":1314885389,"post_id":4485196,"comment_id":8752817,"body_markdown":"I think the bytesToLong() here would fail as the position after the put is at the end of the buffer, not the beginning. I think you&#39;d get a buffer underflow exception.","body":"I think the bytesToLong() here would fail as the position after the put is at the end of the buffer, not the beginning. I think you&#39;d get a buffer underflow exception."},{"owner":{"account_id":1635218,"reputation":3330,"user_id":1508907,"accept_rate":89,"display_name":"nullptr"},"score":1,"creation_date":1355808592,"post_id":4485196,"comment_id":19199469,"body_markdown":"@BradMace, can you please edit your answer, this answer is wrong per Alex Miller, and using your method [static long bytesToLong(bytes)] I run into troubles.. You should have put bytes in proper location or you should clear buffer. I was getting BufferOverflowException.","body":"@BradMace, can you please edit your answer, this answer is wrong per Alex Miller, and using your method [static long bytesToLong(bytes)] I run into troubles.. You should have put bytes in proper location or you should clear buffer. I was getting BufferOverflowException."},{"owner":{"account_id":2331977,"reputation":1709,"user_id":2045169,"accept_rate":91,"display_name":"jr."},"score":1,"creation_date":1383310445,"post_id":4485196,"comment_id":29307955,"body_markdown":"Great answer. It wasn&#39;t immediately clear to me why you need to &quot;flip&quot;, but I stumbled upon this article which helped a lot! http://tutorials.jenkov.com/java-nio/buffers.html Perhaps flip is a misnomer?","body":"Great answer. It wasn&#39;t immediately clear to me why you need to &quot;flip&quot;, but I stumbled upon this article which helped a lot! <a href=\"http://tutorials.jenkov.com/java-nio/buffers.html\" rel=\"nofollow noreferrer\">tutorials.jenkov.com/java-nio/buffers.html</a> Perhaps flip is a misnomer?"},{"owner":{"account_id":203031,"reputation":1241,"user_id":450448,"display_name":"jvdbogae"},"score":12,"creation_date":1405508329,"post_id":4485196,"comment_id":38452659,"body_markdown":"Pre-Java 8, you can use Long.SIZE/Byte.SIZE instead of Long.BYTES to avoid a magic number.","body":"Pre-Java 8, you can use Long.SIZE/Byte.SIZE instead of Long.BYTES to avoid a magic number."},{"owner":{"account_id":75806,"reputation":2716,"user_id":1170917,"display_name":"Aaron Zinman"},"score":18,"creation_date":1415146515,"post_id":4485196,"comment_id":42079966,"body_markdown":"The reuse of that bytebuffer is highly problematic, and not just for the thread-safety reasons as others commented. Not only would a &#39;.clear()&#39; be needed in between, but what&#39;s not obvious is that calling .array() on the ByteBuffer is returning the backing array versus a copy. Thus if you call repeatedly and hold onto the other results, they&#39;re actually all the same array that repeatedly is overwriting the previous values. The hadoop link in a comment below is the most performant and avoids any of these issues.","body":"The reuse of that bytebuffer is highly problematic, and not just for the thread-safety reasons as others commented. Not only would a &#39;.clear()&#39; be needed in between, but what&#39;s not obvious is that calling .array() on the ByteBuffer is returning the backing array versus a copy. Thus if you call repeatedly and hold onto the other results, they&#39;re actually all the same array that repeatedly is overwriting the previous values. The hadoop link in a comment below is the most performant and avoids any of these issues."},{"owner":{"account_id":8701172,"reputation":321,"user_id":6511006,"display_name":"Snipe3000"},"score":1,"creation_date":1617920216,"post_id":4485196,"comment_id":118452651,"body_markdown":"Anyone else only getting java.nio.BufferOverflowException issues?","body":"Anyone else only getting java.nio.BufferOverflowException issues?"},{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":2,"creation_date":1632322948,"post_id":4485196,"comment_id":122462139,"body_markdown":"the `bytesToLong` method can also do a `return ByteBuffer.wrap(bytes).getLong()`","body":"the <code>bytesToLong</code> method can also do a <code>return ByteBuffer.wrap(bytes).getLong()</code>"}],"tags":[],"owner":{"account_id":200630,"reputation":27386,"user_id":446591,"accept_rate":65,"display_name":"Brad Mace"},"comment_count":9,"down_vote_count":9,"up_vote_count":295,"is_accepted":true,"score":286,"last_activity_date":1481135159,"creation_date":1292793934,"answer_id":4485196,"question_id":4485128,"body_markdown":"    \r\n    public byte[] longToBytes(long x) {\r\n        ByteBuffer buffer = ByteBuffer.allocate(Long.BYTES);\r\n        buffer.putLong(x);\r\n        return buffer.array();\r\n    }\r\n\r\n    public long bytesToLong(byte[] bytes) {\r\n        ByteBuffer buffer = ByteBuffer.allocate(Long.BYTES);\r\n        buffer.put(bytes);\r\n        buffer.flip();//need flip \r\n        return buffer.getLong();\r\n    }\r\n\r\nOr wrapped in a class to avoid repeatedly creating ByteBuffers:\r\n\r\n    public class ByteUtils {\r\n        private static ByteBuffer buffer = ByteBuffer.allocate(Long.BYTES);    \r\n\r\n        public static byte[] longToBytes(long x) {\r\n            buffer.putLong(0, x);\r\n            return buffer.array();\r\n        }\r\n\r\n        public static long bytesToLong(byte[] bytes) {\r\n            buffer.put(bytes, 0, bytes.length);\r\n            buffer.flip();//need flip \r\n            return buffer.getLong();\r\n        }\r\n    }\r\n\r\n---\r\nSince this is getting so popular, I just want to mention that I think you&#39;re better off using a library like Guava in the vast majority of cases. And if you have some strange opposition to libraries, you should probably consider [this answer](https://stackoverflow.com/a/29132118/446591) first for native java solutions. I think the main thing my answer really has going for it is that you don&#39;t have to worry about the endian-ness of the system yourself.\r\n","title":"How do I convert Long to byte[] and back in java","body":"<pre><code>public byte[] longToBytes(long x) {\n    ByteBuffer buffer = ByteBuffer.allocate(Long.BYTES);\n    buffer.putLong(x);\n    return buffer.array();\n}\n\npublic long bytesToLong(byte[] bytes) {\n    ByteBuffer buffer = ByteBuffer.allocate(Long.BYTES);\n    buffer.put(bytes);\n    buffer.flip();//need flip \n    return buffer.getLong();\n}\n</code></pre>\n\n<p>Or wrapped in a class to avoid repeatedly creating ByteBuffers:</p>\n\n<pre><code>public class ByteUtils {\n    private static ByteBuffer buffer = ByteBuffer.allocate(Long.BYTES);    \n\n    public static byte[] longToBytes(long x) {\n        buffer.putLong(0, x);\n        return buffer.array();\n    }\n\n    public static long bytesToLong(byte[] bytes) {\n        buffer.put(bytes, 0, bytes.length);\n        buffer.flip();//need flip \n        return buffer.getLong();\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Since this is getting so popular, I just want to mention that I think you're better off using a library like Guava in the vast majority of cases. And if you have some strange opposition to libraries, you should probably consider <a href=\"https://stackoverflow.com/a/29132118/446591\">this answer</a> first for native java solutions. I think the main thing my answer really has going for it is that you don't have to worry about the endian-ness of the system yourself.</p>\n"},{"comments":[{"owner":{"account_id":1151310,"reputation":988,"user_id":1132959,"accept_rate":100,"display_name":"user1132959"},"score":8,"creation_date":1368385504,"post_id":4485206,"comment_id":23703778,"body_markdown":"He asked how you convert to byte[] and back.  Good answer but didn&#39;t answer the question.  You ask why because you assume it is unnecessary but that&#39;s a wrong assumption.  What if he is doing cross-language or cross-platform?  DataOutputStream won&#39;t help you there.","body":"He asked how you convert to byte[] and back.  Good answer but didn&#39;t answer the question.  You ask why because you assume it is unnecessary but that&#39;s a wrong assumption.  What if he is doing cross-language or cross-platform?  DataOutputStream won&#39;t help you there."},{"owner":{"account_id":10045,"reputation":5505,"user_id":18796,"display_name":"Ian McLaird"},"score":6,"creation_date":1376681231,"post_id":4485206,"comment_id":26816659,"body_markdown":"If he&#39;s doing cross-language or cross-platform, then sending the bytes in a known order is important.  This method does that (it writes them &quot;high byte first&quot;) according to the docs.  The accepted answer does not (it writes them in the &quot;current order&quot; according to the docs).  The question states that he wants to send them over a TCP connection.  The `byte[]` is just a means to that end.","body":"If he&#39;s doing cross-language or cross-platform, then sending the bytes in a known order is important.  This method does that (it writes them &quot;high byte first&quot;) according to the docs.  The accepted answer does not (it writes them in the &quot;current order&quot; according to the docs).  The question states that he wants to send them over a TCP connection.  The <code>byte[]</code> is just a means to that end."},{"owner":{"account_id":9661,"reputation":10754,"user_id":17944,"accept_rate":100,"display_name":"David Phillips"},"score":3,"creation_date":1464216909,"post_id":4485206,"comment_id":62399684,"body_markdown":"@IanMcLaird The accepted answer does use a known order. It creates a new `ByteBuffer` which according to the docs _&quot;The initial order of a byte buffer is always BIG_ENDIAN._","body":"@IanMcLaird The accepted answer does use a known order. It creates a new <code>ByteBuffer</code> which according to the docs <i>&quot;The initial order of a byte buffer is always BIG_ENDIAN.</i>"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":3,"down_vote_count":3,"up_vote_count":19,"is_accepted":false,"score":16,"last_activity_date":1477298632,"creation_date":1292794126,"answer_id":4485206,"question_id":4485128,"body_markdown":"Why do you need the byte[]? why not just write it to the socket?\r\n\r\nI assume you mean *long* rather than *Long*, the latter needs to allow for null values.\r\n\r\n    DataOutputStream dos = new DataOutputStream(\r\n         new BufferedOutputStream(socket.getOutputStream()));\r\n    dos.writeLong(longValue);\r\n    \r\n    DataInputStream dis = new DataInputStream(\r\n         new BufferedInputStream(socket.getInputStream()));\r\n    long longValue = dis.readLong();\r\n","title":"How do I convert Long to byte[] and back in java","body":"<p>Why do you need the byte[]? why not just write it to the socket?</p>\n\n<p>I assume you mean <em>long</em> rather than <em>Long</em>, the latter needs to allow for null values.</p>\n\n<pre><code>DataOutputStream dos = new DataOutputStream(\n     new BufferedOutputStream(socket.getOutputStream()));\ndos.writeLong(longValue);\n\nDataInputStream dis = new DataInputStream(\n     new BufferedInputStream(socket.getInputStream()));\nlong longValue = dis.readLong();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4177,"reputation":32472,"user_id":6198,"accept_rate":86,"display_name":"Matt Solnit"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1292794165,"creation_date":1292794165,"answer_id":4485213,"question_id":4485128,"body_markdown":"If you are already using an `OutputStream` to write to the socket, then [DataOutputStream][1] might be a good fit.  Here is an example:\r\n\r\n    // Assumes you are currently working with a SocketOutputStream.\r\n\r\n    SocketOutputStream outputStream = ...\r\n    long longValue = ...\r\n\r\n    DataOutputStream dataOutputStream = new DataOutputStream(outputStream);\r\n\r\n    dataOutputStream.writeLong(longValue);\r\n    dataOutputStream.flush();\r\n\r\nThere are similar methods for `short`, `int`, `float`, etc.  You can then use [DataInputStream][2] on the receiving side.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/io/DataInputStream.html","title":"How do I convert Long to byte[] and back in java","body":"<p>If you are already using an <code>OutputStream</code> to write to the socket, then <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html\" rel=\"nofollow\">DataOutputStream</a> might be a good fit.  Here is an example:</p>\n\n<pre><code>// Assumes you are currently working with a SocketOutputStream.\n\nSocketOutputStream outputStream = ...\nlong longValue = ...\n\nDataOutputStream dataOutputStream = new DataOutputStream(outputStream);\n\ndataOutputStream.writeLong(longValue);\ndataOutputStream.flush();\n</code></pre>\n\n<p>There are similar methods for <code>short</code>, <code>int</code>, <code>float</code>, etc.  You can then use <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/DataInputStream.html\" rel=\"nofollow\">DataInputStream</a> on the receiving side.</p>\n"},{"tags":[],"owner":{"account_id":117745,"reputation":5429,"user_id":308219,"display_name":"Michael Konietzka"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1292797947,"creation_date":1292797240,"answer_id":4485439,"question_id":4485128,"body_markdown":"Just write the long to a [DataOutputStream][1] with an underlying [ByteArrayOutputStream][2]. From the ByteArrayOutputStream you can get the byte-array via [toByteArray()][3]:\r\n   \r\n    class Main\r\n    {\r\n     \r\n            public static byte[] long2byte(long l) throws IOException\r\n            {\r\n            ByteArrayOutputStream baos=new ByteArrayOutputStream(Long.SIZE/8);\r\n            DataOutputStream dos=new DataOutputStream(baos);\r\n            dos.writeLong(l);\r\n            byte[] result=baos.toByteArray();\r\n            dos.close();    \r\n            return result;\r\n            }\r\n\r\n\r\n            public static long byte2long(byte[] b) throws IOException\r\n            {\r\n            ByteArrayInputStream baos=new ByteArrayInputStream(b);\r\n            DataInputStream dos=new DataInputStream(baos);\r\n            long result=dos.readLong();\r\n            dos.close();\r\n            return result;\r\n            }\r\n           \r\n            \r\n            public static void main (String[] args) throws java.lang.Exception\r\n            {\r\n            \r\n             long l=123456L;\r\n             byte[] b=long2byte(l);\r\n             System.out.println(l+&quot;: &quot;+byte2long(b));       \r\n            }\r\n    }\r\n\r\nWorks for other primitives accordingly. \r\n\r\nHint: For TCP you do not need the byte[] manually. You will use a [Socket][4] `socket` and its streams\r\n\r\n    OutputStream os=socket.getOutputStream(); \r\n    DataOutputStream dos=new DataOutputStream(os);\r\n    dos.writeLong(l);\r\n    //etc ..\r\n\r\ninstead.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html\r\n  [3]: http://download.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html#toByteArray%28%29\r\n  [4]: http://download.oracle.com/javase/6/docs/api/java/net/Socket.html","title":"How do I convert Long to byte[] and back in java","body":"<p>Just write the long to a <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html\" rel=\"nofollow noreferrer\">DataOutputStream</a> with an underlying <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html\" rel=\"nofollow noreferrer\">ByteArrayOutputStream</a>. From the ByteArrayOutputStream you can get the byte-array via <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html#toByteArray%28%29\" rel=\"nofollow noreferrer\">toByteArray()</a>:</p>\n\n<pre><code>class Main\n{\n\n        public static byte[] long2byte(long l) throws IOException\n        {\n        ByteArrayOutputStream baos=new ByteArrayOutputStream(Long.SIZE/8);\n        DataOutputStream dos=new DataOutputStream(baos);\n        dos.writeLong(l);\n        byte[] result=baos.toByteArray();\n        dos.close();    \n        return result;\n        }\n\n\n        public static long byte2long(byte[] b) throws IOException\n        {\n        ByteArrayInputStream baos=new ByteArrayInputStream(b);\n        DataInputStream dos=new DataInputStream(baos);\n        long result=dos.readLong();\n        dos.close();\n        return result;\n        }\n\n\n        public static void main (String[] args) throws java.lang.Exception\n        {\n\n         long l=123456L;\n         byte[] b=long2byte(l);\n         System.out.println(l+\": \"+byte2long(b));       \n        }\n}\n</code></pre>\n\n<p>Works for other primitives accordingly. </p>\n\n<p>Hint: For TCP you do not need the byte[] manually. You will use a <a href=\"http://download.oracle.com/javase/6/docs/api/java/net/Socket.html\" rel=\"nofollow noreferrer\">Socket</a> <code>socket</code> and its streams</p>\n\n<pre><code>OutputStream os=socket.getOutputStream(); \nDataOutputStream dos=new DataOutputStream(os);\ndos.writeLong(l);\n//etc ..\n</code></pre>\n\n<p>instead.</p>\n"},{"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":2,"creation_date":1384617920,"post_id":18768032,"comment_id":29812403,"body_markdown":"you can skip the ArrayList:     public static byte[] longToBytes(long l) {\n            long num = l;\n            byte[] bytes = new byte[8];\n            for (int i = bytes.length - 1, i &gt;= 0; i--) {\n                bytes[i] = (byte)(num &amp; 0xff);\n                num &gt;&gt;= 8;\n            }\n            return bytesp;\n        }","body":"you can skip the ArrayList:     public static byte[] longToBytes(long l) {             long num = l;             byte[] bytes = new byte[8];             for (int i = bytes.length - 1, i &gt;= 0; i--) {                 bytes[i] = (byte)(num &amp; 0xff);                 num &gt;&gt;= 8;             }             return bytesp;         }"},{"owner":{"account_id":11990777,"reputation":957,"user_id":8773964,"display_name":"Big_Bad_E"},"score":0,"creation_date":1558192299,"post_id":18768032,"comment_id":99023415,"body_markdown":"The original method doesn&#39;t work with negative numbers as it gets in an infinite loop in while (l != 0), @eckes&#39;s method doesn&#39;t work with numbers over 127 because he doesn&#39;t account for bytes going negative over 127 cause they are signed.","body":"The original method doesn&#39;t work with negative numbers as it gets in an infinite loop in while (l != 0), @eckes&#39;s method doesn&#39;t work with numbers over 127 because he doesn&#39;t account for bytes going negative over 127 cause they are signed."}],"tags":[],"owner":{"account_id":401495,"reputation":581,"user_id":768085,"display_name":"maziar"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1379001912,"creation_date":1378998608,"answer_id":18768032,"question_id":4485128,"body_markdown":"     public static long bytesToLong(byte[] bytes) {\r\n            if (bytes.length &gt; 8) {\r\n                throw new IllegalMethodParameterException(&quot;byte should not be more than 8 bytes&quot;);\r\n    \r\n            }\r\n            long r = 0;\r\n            for (int i = 0; i &lt; bytes.length; i++) {\r\n                r = r &lt;&lt; 8;\r\n                r += bytes[i];\r\n            }\r\n    \r\n            return r;\r\n        }\r\n\r\n  \r\n\r\n    public static byte[] longToBytes(long l) {\r\n            ArrayList&lt;Byte&gt; bytes = new ArrayList&lt;Byte&gt;();\r\n            while (l != 0) {\r\n                bytes.add((byte) (l % (0xff + 1)));\r\n                l = l &gt;&gt; 8;\r\n            }\r\n            byte[] bytesp = new byte[bytes.size()];\r\n            for (int i = bytes.size() - 1, j = 0; i &gt;= 0; i--, j++) {\r\n                bytesp[j] = bytes.get(i);\r\n            }\r\n            return bytesp;\r\n        }\r\n\r\n","title":"How do I convert Long to byte[] and back in java","body":"<pre><code> public static long bytesToLong(byte[] bytes) {\n        if (bytes.length &gt; 8) {\n            throw new IllegalMethodParameterException(\"byte should not be more than 8 bytes\");\n\n        }\n        long r = 0;\n        for (int i = 0; i &lt; bytes.length; i++) {\n            r = r &lt;&lt; 8;\n            r += bytes[i];\n        }\n\n        return r;\n    }\n\n\n\npublic static byte[] longToBytes(long l) {\n        ArrayList&lt;Byte&gt; bytes = new ArrayList&lt;Byte&gt;();\n        while (l != 0) {\n            bytes.add((byte) (l % (0xff + 1)));\n            l = l &gt;&gt; 8;\n        }\n        byte[] bytesp = new byte[bytes.size()];\n        for (int i = bytes.size() - 1, j = 0; i &gt;= 0; i--, j++) {\n            bytesp[j] = bytes.get(i);\n        }\n        return bytesp;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3095415,"reputation":800,"user_id":2620716,"accept_rate":64,"display_name":"victtim"},"score":0,"creation_date":1535409553,"post_id":18770661,"comment_id":91046490,"body_markdown":"Why does that implementation use XOR (^=) instead of OR?\n\nhttps://github.com/apache/hbase/blob/master/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java","body":"Why does that implementation use XOR (^=) instead of OR?  <a href=\"https://github.com/apache/hbase/blob/master/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java\" rel=\"nofollow noreferrer\">github.com/apache/hbase/blob/master/hbase-common/src/main/ja&zwnj;&#8203;va/&hellip;</a>"}],"tags":[],"owner":{"account_id":889039,"reputation":5931,"user_id":927737,"accept_rate":52,"display_name":"Marquez"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1379006758,"creation_date":1379006758,"answer_id":18770661,"question_id":4485128,"body_markdown":"You could use the implementation in org.apache.hadoop.hbase.util.Bytes http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/util/Bytes.html \r\n\r\nThe source code is here:\r\n\r\nhttp://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hbase/hbase/0.89.20100924-28/org/apache/hadoop/hbase/util/Bytes.java#Bytes.toBytes%28long%29\r\n\r\nLook for the toLong and toBytes methods.\r\n\r\nI believe the software license allows you to take parts of the code and use it but please verify that.","title":"How do I convert Long to byte[] and back in java","body":"<p>You could use the implementation in org.apache.hadoop.hbase.util.Bytes <a href=\"http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/util/Bytes.html\" rel=\"nofollow\">http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/util/Bytes.html</a> </p>\n\n<p>The source code is here:</p>\n\n<p><a href=\"http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hbase/hbase/0.89.20100924-28/org/apache/hadoop/hbase/util/Bytes.java#Bytes.toBytes%28long%29\" rel=\"nofollow\">http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hbase/hbase/0.89.20100924-28/org/apache/hadoop/hbase/util/Bytes.java#Bytes.toBytes%28long%29</a></p>\n\n<p>Look for the toLong and toBytes methods.</p>\n\n<p>I believe the software license allows you to take parts of the code and use it but please verify that.</p>\n"},{"tags":[],"owner":{"account_id":204382,"reputation":10989,"user_id":517336,"accept_rate":88,"display_name":"Sonson123"},"comment_count":0,"down_vote_count":3,"up_vote_count":115,"is_accepted":false,"score":112,"last_activity_date":1454928675,"creation_date":1389286054,"answer_id":21026243,"question_id":4485128,"body_markdown":"You could use the [Byte conversion methods](https://github.com/google/guava/wiki/PrimitivesExplained#byte-conversion-methods) from [Google Guava](https://github.com/google/guava).\r\n\r\nExample:\r\n\r\n    byte[] bytes = Longs.toByteArray(12345L);\r\n","title":"How do I convert Long to byte[] and back in java","body":"<p>You could use the <a href=\"https://github.com/google/guava/wiki/PrimitivesExplained#byte-conversion-methods\">Byte conversion methods</a> from <a href=\"https://github.com/google/guava\">Google Guava</a>.</p>\n\n<p>Example:</p>\n\n<pre><code>byte[] bytes = Longs.toByteArray(12345L);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3660223,"reputation":6093,"user_id":3050249,"display_name":"Miha_x64"},"score":1,"creation_date":1589137257,"post_id":27610608,"comment_id":109167970,"body_markdown":"Thank you, the best!","body":"Thank you, the best!"},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":1,"creation_date":1623965041,"post_id":27610608,"comment_id":120235072,"body_markdown":"This assumes little-endian byte order, and the `long -&gt; byte[]` code added by someone else in a subsequent edit fails for negative numbers :-/","body":"This assumes little-endian byte order, and the <code>long -&gt; byte[]</code> code added by someone else in a subsequent edit fails for negative numbers :-/"}],"tags":[],"owner":{"account_id":23506,"reputation":7505,"user_id":58962,"accept_rate":65,"display_name":"Michael B&#246;ckling"},"comment_count":2,"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1537366758,"creation_date":1419283262,"answer_id":27610608,"question_id":4485128,"body_markdown":"If you are looking for a fast unrolled version, this should do the trick, assuming a byte array called &quot;b&quot; with a length of 8:\r\n\r\n**byte[] -&gt; long**\r\n\r\n    long l = ((long) b[7] &lt;&lt; 56)\r\n           | ((long) b[6] &amp; 0xff) &lt;&lt; 48\r\n           | ((long) b[5] &amp; 0xff) &lt;&lt; 40\r\n           | ((long) b[4] &amp; 0xff) &lt;&lt; 32\r\n           | ((long) b[3] &amp; 0xff) &lt;&lt; 24\r\n           | ((long) b[2] &amp; 0xff) &lt;&lt; 16\r\n           | ((long) b[1] &amp; 0xff) &lt;&lt; 8\r\n           | ((long) b[0] &amp; 0xff);\r\n\r\n**long -&gt; byte[]** as an exact counterpart to the above\r\n\r\n    byte[] b = new byte[] {\r\n           (byte) lng,\r\n           (byte) (lng &gt;&gt; 8),\r\n           (byte) (lng &gt;&gt; 16),\r\n           (byte) (lng &gt;&gt; 24),\r\n           (byte) (lng &gt;&gt; 32),\r\n           (byte) (lng &gt;&gt; 40),\r\n           (byte) (lng &gt;&gt; 48),\r\n           (byte) (lng &gt;&gt; 56)};\r\n","title":"How do I convert Long to byte[] and back in java","body":"<p>If you are looking for a fast unrolled version, this should do the trick, assuming a byte array called \"b\" with a length of 8:</p>\n\n<p><strong>byte[] -> long</strong></p>\n\n<pre><code>long l = ((long) b[7] &lt;&lt; 56)\n       | ((long) b[6] &amp; 0xff) &lt;&lt; 48\n       | ((long) b[5] &amp; 0xff) &lt;&lt; 40\n       | ((long) b[4] &amp; 0xff) &lt;&lt; 32\n       | ((long) b[3] &amp; 0xff) &lt;&lt; 24\n       | ((long) b[2] &amp; 0xff) &lt;&lt; 16\n       | ((long) b[1] &amp; 0xff) &lt;&lt; 8\n       | ((long) b[0] &amp; 0xff);\n</code></pre>\n\n<p><strong>long -> byte[]</strong> as an exact counterpart to the above</p>\n\n<pre><code>byte[] b = new byte[] {\n       (byte) lng,\n       (byte) (lng &gt;&gt; 8),\n       (byte) (lng &gt;&gt; 16),\n       (byte) (lng &gt;&gt; 24),\n       (byte) (lng &gt;&gt; 32),\n       (byte) (lng &gt;&gt; 40),\n       (byte) (lng &gt;&gt; 48),\n       (byte) (lng &gt;&gt; 56)};\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1485205,"reputation":195,"user_id":1393622,"accept_rate":64,"display_name":"Vipul"},"score":1,"creation_date":1438595894,"post_id":29132118,"comment_id":51497800,"body_markdown":"Instead of \nresult |= (b[i] &amp; 0xFF);\nWe could simply use \nresult |= b[i]; as and with 0xFF for a bit doesnt modify anything.","body":"Instead of  result |= (b[i] &amp; 0xFF); We could simply use  result |= b[i]; as and with 0xFF for a bit doesnt modify anything."},{"owner":{"account_id":2762506,"reputation":1130,"user_id":2379112,"display_name":"Brainstorm"},"score":7,"creation_date":1440577557,"post_id":29132118,"comment_id":52325940,"body_markdown":"@Vipul The bitwise-and does matter because when doing just `result |= b[i]` the byte value will first be converted to long which does sign extension. A byte with value -128 (hex `0x80`) will turn into a long with value -128 (hex `0xFFFF FFFF FFFF FF80`). First after the conversion are the values or:ed together. Using bitwise-and protects against this by first converting the byte to an int and cutting off the sign extension: `(byte)0x80 &amp; 0xFF ==&gt; (int)0xFFFF FF80 &amp; 0xFF ==&gt; (int) 0x80`.\nWhy bytes are signed in java is a bit of a mystery to me, but I guess that it&#39;s to fit in with other types.","body":"@Vipul The bitwise-and does matter because when doing just <code>result |= b[i]</code> the byte value will first be converted to long which does sign extension. A byte with value -128 (hex <code>0x80</code>) will turn into a long with value -128 (hex <code>0xFFFF FFFF FFFF FF80</code>). First after the conversion are the values or:ed together. Using bitwise-and protects against this by first converting the byte to an int and cutting off the sign extension: <code>(byte)0x80 &amp; 0xFF ==&gt; (int)0xFFFF FF80 &amp; 0xFF ==&gt; (int) 0x80</code>. Why bytes are signed in java is a bit of a mystery to me, but I guess that it&#39;s to fit in with other types."},{"owner":{"account_id":2533959,"reputation":1871,"user_id":2201566,"accept_rate":80,"display_name":"Mahmoud Hanafy"},"score":0,"creation_date":1456663440,"post_id":29132118,"comment_id":59042719,"body_markdown":"@Brainstorm I tried case -128 with |= b[i] and with |= (b[i] &amp; 0xFF) and the results are the same !!","body":"@Brainstorm I tried case -128 with |= b[i] and with |= (b[i] &amp; 0xFF) and the results are the same !!"},{"owner":{"account_id":1418489,"reputation":1545,"user_id":1343614,"display_name":"Wytze"},"score":0,"creation_date":1456753601,"post_id":29132118,"comment_id":59078648,"body_markdown":"The problem is that the byte gets promoted before the shift is applied which causes strange problems with the sign bit. Therefore we first and (&amp;) it with 0xFF to get the correct value to shift.","body":"The problem is that the byte gets promoted before the shift is applied which causes strange problems with the sign bit. Therefore we first and (&amp;) it with 0xFF to get the correct value to shift."},{"owner":{"account_id":6001069,"reputation":799,"user_id":6033146,"display_name":"jefry jacky"},"score":0,"creation_date":1501225041,"post_id":29132118,"comment_id":77694222,"body_markdown":"I try to convert this data (data = new byte[]{(byte) 0xDB, (byte) 0xA7, 0x53, (byte) 0xF8, (byte) 0xA8, 0x0C, 0x66, 0x8}; ) to long, but it return false value -2619032330856274424, the expected value is 989231983928329832","body":"I try to convert this data (data = new byte[]{(byte) 0xDB, (byte) 0xA7, 0x53, (byte) 0xF8, (byte) 0xA8, 0x0C, 0x66, 0x8}; ) to long, but it return false value -2619032330856274424, the expected value is 989231983928329832"},{"owner":{"account_id":1418489,"reputation":1545,"user_id":1343614,"display_name":"Wytze"},"score":0,"creation_date":1501337340,"post_id":29132118,"comment_id":77740893,"body_markdown":"The hexadecimal representation of 989231983928329832 is 0DBA753F8A80C668. The leading 0 probably fell of causing the conversion error.","body":"The hexadecimal representation of 989231983928329832 is 0DBA753F8A80C668. The leading 0 probably fell of causing the conversion error."},{"owner":{"account_id":931121,"reputation":21661,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1600681202,"post_id":29132118,"comment_id":113153340,"body_markdown":"this is the same as from google guava. at least the first. it should be safe.","body":"this is the same as from google guava. at least the first. it should be safe."},{"owner":{"account_id":4355473,"reputation":17255,"user_id":3554264,"accept_rate":62,"display_name":"Christian Hujer"},"score":1,"creation_date":1607063197,"post_id":29132118,"comment_id":115159711,"body_markdown":"The left-shift by `Long.BYTES` is wrong. It does not communicate the intent. It only works by coincidece: `Long.BYTES` is 8. Replace this with Integer, and it will be wrong. Instead, left-shift by `Byte.SIZE`.","body":"The left-shift by <code>Long.BYTES</code> is wrong. It does not communicate the intent. It only works by coincidece: <code>Long.BYTES</code> is 8. Replace this with Integer, and it will be wrong. Instead, left-shift by <code>Byte.SIZE</code>."},{"owner":{"account_id":1418489,"reputation":1545,"user_id":1343614,"display_name":"Wytze"},"score":0,"creation_date":1607177395,"post_id":29132118,"comment_id":115192747,"body_markdown":"My original answer was edited by someone. I have restored it as it was.","body":"My original answer was edited by someone. I have restored it as it was."}],"tags":[],"owner":{"account_id":1418489,"reputation":1545,"user_id":1343614,"display_name":"Wytze"},"comment_count":9,"down_vote_count":0,"up_vote_count":105,"is_accepted":false,"score":105,"last_activity_date":1607179255,"creation_date":1426710862,"answer_id":29132118,"question_id":4485128,"body_markdown":"I tested the ByteBuffer method against plain bitwise operations but the latter is significantly faster.\r\n\r\n    public static byte[] longToBytes(long l) {\r\n\t\tbyte[] result = new byte[8];\r\n\t\tfor (int i = 7; i &gt;= 0; i--) {\r\n\t\t\tresult[i] = (byte)(l &amp; 0xFF);\r\n\t\t\tl &gt;&gt;= 8;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static long bytesToLong(final byte[] b) {\r\n\t\tlong result = 0;\r\n\t\tfor (int i = 0; i &lt; 8; i++) {\r\n\t\t\tresult &lt;&lt;= 8;\r\n\t\t\tresult |= (b[i] &amp; 0xFF);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\nFor Java 8+ we can use the static variables that were added:\r\n\r\n\tpublic static byte[] longToBytes(long l) {\r\n\t\tbyte[] result = new byte[Long.BYTES];\r\n\t\tfor (int i = Long.BYTES - 1; i &gt;= 0; i--) {\r\n\t\t\tresult[i] = (byte)(l &amp; 0xFF);\r\n\t\t\tl &gt;&gt;= Byte.SIZE;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static long bytesToLong(final byte[] b) {\r\n\t\tlong result = 0;\r\n\t\tfor (int i = 0; i &lt; Long.BYTES; i++) {\r\n\t\t\tresult &lt;&lt;= Byte.SIZE;\r\n\t\t\tresult |= (b[i] &amp; 0xFF);\r\n\t\t}\r\n\t\treturn result;\r\n\t}","title":"How do I convert Long to byte[] and back in java","body":"<p>I tested the ByteBuffer method against plain bitwise operations but the latter is significantly faster.</p>\n<pre><code>public static byte[] longToBytes(long l) {\n    byte[] result = new byte[8];\n    for (int i = 7; i &gt;= 0; i--) {\n        result[i] = (byte)(l &amp; 0xFF);\n        l &gt;&gt;= 8;\n    }\n    return result;\n}\n\npublic static long bytesToLong(final byte[] b) {\n    long result = 0;\n    for (int i = 0; i &lt; 8; i++) {\n        result &lt;&lt;= 8;\n        result |= (b[i] &amp; 0xFF);\n    }\n    return result;\n}\n</code></pre>\n<p>For Java 8+ we can use the static variables that were added:</p>\n<pre><code>public static byte[] longToBytes(long l) {\n    byte[] result = new byte[Long.BYTES];\n    for (int i = Long.BYTES - 1; i &gt;= 0; i--) {\n        result[i] = (byte)(l &amp; 0xFF);\n        l &gt;&gt;= Byte.SIZE;\n    }\n    return result;\n}\n\npublic static long bytesToLong(final byte[] b) {\n    long result = 0;\n    for (int i = 0; i &lt; Long.BYTES; i++) {\n        result &lt;&lt;= Byte.SIZE;\n        result |= (b[i] &amp; 0xFF);\n    }\n    return result;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1806041,"reputation":3307,"user_id":1643115,"accept_rate":100,"display_name":"Kirill Gamazkov"},"score":3,"creation_date":1489252054,"post_id":33707362,"comment_id":72594161,"body_markdown":"Sorry for necroposting, but that&#39;s just wrong. E. g. String.valueOf(0).getBytes()[0] == 0x30. Surprise! String#getBytes will return ASCII-encoded digit symbols, not digits: &#39;0&#39; != 0, but &#39;0&#39; == 0x30","body":"Sorry for necroposting, but that&#39;s just wrong. E. g. String.valueOf(0).getBytes()[0] == 0x30. Surprise! String#getBytes will return ASCII-encoded digit symbols, not digits: &#39;0&#39; != 0, but &#39;0&#39; == 0x30"},{"owner":{"account_id":1191279,"reputation":11552,"user_id":1164004,"accept_rate":79,"display_name":"CodeMonkey"},"score":0,"creation_date":1489305053,"post_id":33707362,"comment_id":72607074,"body_markdown":"Well maybe if you had read my entire answer then you&#39;d seen I have warned about it in the answer itself..","body":"Well maybe if you had read my entire answer then you&#39;d seen I have warned about it in the answer itself.."},{"owner":{"account_id":1806041,"reputation":3307,"user_id":1643115,"accept_rate":100,"display_name":"Kirill Gamazkov"},"score":1,"creation_date":1489749408,"post_id":33707362,"comment_id":72818196,"body_markdown":"Ah, I missed the point that intermediate byte[] data is treated as (almost) opaque. Your trick will do for this scenario.","body":"Ah, I missed the point that intermediate byte[] data is treated as (almost) opaque. Your trick will do for this scenario."}],"tags":[],"owner":{"account_id":1191279,"reputation":11552,"user_id":1164004,"accept_rate":79,"display_name":"CodeMonkey"},"comment_count":3,"down_vote_count":4,"up_vote_count":6,"is_accepted":false,"score":2,"last_activity_date":1447496423,"creation_date":1447496423,"answer_id":33707362,"question_id":4485128,"body_markdown":"I will add another answer which is the fastest one possible ׂ(yes, even more than the accepted answer), BUT it will not work for every single case. HOWEVER, it WILL work for every conceivable scenario:\r\n\r\nYou can simply use String as intermediate. Note, this WILL give you the correct result even though it seems like using String might yield the wrong results AS LONG AS YOU KNOW YOU&#39;RE WORKING WITH &quot;NORMAL&quot; STRINGS. This is a method to increase effectiveness and make the code simpler which in return must use some assumptions on the data strings it operates on.\r\n\r\n**Con of using this method:** If you&#39;re working with some ASCII characters like these symbols in the beginning of the ASCII table, the following lines might fail, but let&#39;s face it - you probably will never use them anyway.\r\n\r\n**Pro of using this method:** Remember that most people usually work with some normal strings without any unusual characters and then the method is the simplest and fastest way to go.\r\n\r\nfrom Long to byte[]:\r\n\r\n    byte[] arr = String.valueOf(longVar).getBytes();\r\n\r\nfrom byte[] to Long:\r\n\r\n    long longVar = Long.valueOf(new String(byteArr)).longValue();\r\n\r\n","title":"How do I convert Long to byte[] and back in java","body":"<p>I will add another answer which is the fastest one possible ׂ(yes, even more than the accepted answer), BUT it will not work for every single case. HOWEVER, it WILL work for every conceivable scenario:</p>\n\n<p>You can simply use String as intermediate. Note, this WILL give you the correct result even though it seems like using String might yield the wrong results AS LONG AS YOU KNOW YOU'RE WORKING WITH \"NORMAL\" STRINGS. This is a method to increase effectiveness and make the code simpler which in return must use some assumptions on the data strings it operates on.</p>\n\n<p><strong>Con of using this method:</strong> If you're working with some ASCII characters like these symbols in the beginning of the ASCII table, the following lines might fail, but let's face it - you probably will never use them anyway.</p>\n\n<p><strong>Pro of using this method:</strong> Remember that most people usually work with some normal strings without any unusual characters and then the method is the simplest and fastest way to go.</p>\n\n<p>from Long to byte[]:</p>\n\n<pre><code>byte[] arr = String.valueOf(longVar).getBytes();\n</code></pre>\n\n<p>from byte[] to Long:</p>\n\n<pre><code>long longVar = Long.valueOf(new String(byteArr)).longValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582910939,"creation_date":1582910939,"answer_id":60456641,"question_id":4485128,"body_markdown":"Here&#39;s another way to convert `byte[]` to `long` using Java 8 or newer:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    private static int bytesToInt(final byte[] bytes, final int offset) {\r\n        assert offset + Integer.BYTES &lt;= bytes.length;\r\n\r\n        return (bytes[offset + Integer.BYTES - 1] &amp; 0xFF) |\r\n                (bytes[offset + Integer.BYTES - 2] &amp; 0xFF) &lt;&lt; Byte.SIZE |\r\n                (bytes[offset + Integer.BYTES - 3] &amp; 0xFF) &lt;&lt; Byte.SIZE * 2 |\r\n                (bytes[offset + Integer.BYTES - 4] &amp; 0xFF) &lt;&lt; Byte.SIZE * 3;\r\n    }\r\n\r\n    private static long bytesToLong(final byte[] bytes, final int offset) {\r\n        return toUnsignedLong(bytesToInt(bytes, offset)) &lt;&lt; Integer.SIZE |\r\n                toUnsignedLong(bytesToInt(bytes, offset + Integer.BYTES));\r\n    }\r\n\r\nConverting a `long` can be expressed as the high- and low-order bits of two integer values subject to a bitwise-OR. Note that the [`toUnsignedLong`][1] is from the `Integer` class and the first call to `toUnsignedLong` may be superfluous.\r\n\r\nThe opposite conversion can be unrolled as well, as others have mentioned.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#toUnsignedLong-int-\r\n","title":"How do I convert Long to byte[] and back in java","body":"<p>Here's another way to convert <code>byte[]</code> to <code>long</code> using Java 8 or newer:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private static int bytesToInt(final byte[] bytes, final int offset) {\n    assert offset + Integer.BYTES &lt;= bytes.length;\n\n    return (bytes[offset + Integer.BYTES - 1] &amp; 0xFF) |\n            (bytes[offset + Integer.BYTES - 2] &amp; 0xFF) &lt;&lt; Byte.SIZE |\n            (bytes[offset + Integer.BYTES - 3] &amp; 0xFF) &lt;&lt; Byte.SIZE * 2 |\n            (bytes[offset + Integer.BYTES - 4] &amp; 0xFF) &lt;&lt; Byte.SIZE * 3;\n}\n\nprivate static long bytesToLong(final byte[] bytes, final int offset) {\n    return toUnsignedLong(bytesToInt(bytes, offset)) &lt;&lt; Integer.SIZE |\n            toUnsignedLong(bytesToInt(bytes, offset + Integer.BYTES));\n}\n</code></pre>\n\n<p>Converting a <code>long</code> can be expressed as the high- and low-order bits of two integer values subject to a bitwise-OR. Note that the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#toUnsignedLong-int-\" rel=\"nofollow noreferrer\"><code>toUnsignedLong</code></a> is from the <code>Integer</code> class and the first call to <code>toUnsignedLong</code> may be superfluous.</p>\n\n<p>The opposite conversion can be unrolled as well, as others have mentioned.</p>\n"},{"tags":[],"owner":{"account_id":14460644,"reputation":2287,"user_id":10445540,"display_name":"Artem Botnev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1592395934,"creation_date":1586357290,"answer_id":61103551,"question_id":4485128,"body_markdown":"Kotlin extensions for Long and ByteArray types:\r\n\r\n    fun Long.toByteArray() = numberToByteArray(Long.SIZE_BYTES) { putLong(this@toByteArray) }\r\n\r\n    private inline fun numberToByteArray(size: Int, bufferFun: ByteBuffer.() -&gt; ByteBuffer): ByteArray =\r\n        ByteBuffer.allocate(size).bufferFun().array()\r\n\r\n    @Throws(NumberFormatException::class)\r\n    fun ByteArray.toLong(): Long = toNumeric(Long.SIZE_BYTES) { long }\r\n\r\n    @Throws(NumberFormatException::class)\r\n    private inline fun &lt;reified T: Number&gt; ByteArray.toNumeric(size: Int, bufferFun: ByteBuffer.() -&gt; T): T {\r\n        if (this.size != size) throw NumberFormatException(&quot;${T::class.java.simpleName} value must contains $size bytes&quot;)\r\n\r\n        return ByteBuffer.wrap(this).bufferFun()\r\n    }\r\n\r\nYou can see full code in my library https://github.com/ArtemBotnev/low-level-extensions","title":"How do I convert Long to byte[] and back in java","body":"<p>Kotlin extensions for Long and ByteArray types:</p>\n\n<pre><code>fun Long.toByteArray() = numberToByteArray(Long.SIZE_BYTES) { putLong(this@toByteArray) }\n\nprivate inline fun numberToByteArray(size: Int, bufferFun: ByteBuffer.() -&gt; ByteBuffer): ByteArray =\n    ByteBuffer.allocate(size).bufferFun().array()\n\n@Throws(NumberFormatException::class)\nfun ByteArray.toLong(): Long = toNumeric(Long.SIZE_BYTES) { long }\n\n@Throws(NumberFormatException::class)\nprivate inline fun &lt;reified T: Number&gt; ByteArray.toNumeric(size: Int, bufferFun: ByteBuffer.() -&gt; T): T {\n    if (this.size != size) throw NumberFormatException(\"${T::class.java.simpleName} value must contains $size bytes\")\n\n    return ByteBuffer.wrap(this).bufferFun()\n}\n</code></pre>\n\n<p>You can see full code in my library <a href=\"https://github.com/ArtemBotnev/low-level-extensions\" rel=\"nofollow noreferrer\">https://github.com/ArtemBotnev/low-level-extensions</a></p>\n"},{"tags":[],"owner":{"account_id":17900854,"reputation":141,"user_id":13005133,"display_name":"HexllioN"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1680564245,"creation_date":1601489397,"answer_id":64143435,"question_id":4485128,"body_markdown":"I find this method to be most friendly.\r\n\r\n    byte[] b = BigInteger.valueOf(x).toByteArray();\r\n\r\n    long l = new BigInteger(b).longValue();","title":"How do I convert Long to byte[] and back in java","body":"<p>I find this method to be most friendly.</p>\n<pre><code>byte[] b = BigInteger.valueOf(x).toByteArray();\n\nlong l = new BigInteger(b).longValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22931464,"reputation":459,"user_id":17065671,"display_name":"Qu&#226;n Anh Mai"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1633283392,"creation_date":1633283392,"answer_id":69427444,"question_id":4485128,"body_markdown":"From Java 9, the best approach is to use `VarHandle`, which will read from the byte array as if it is a long array, for performance make the `VarHandle` instance a static final field.\r\n\r\n    static final VarHandle HANDLE = MethodHandles.byteArrayViewVarHandle(Long.TYPE.arrayType(), ByteOrder.nativeOrder());\r\n    \r\n    static long bytesToLong(byte[] bytes, int offset) {\r\n        return (long)HANDLE.get(bytes, offset);\r\n    }\r\n\r\n    static void longToBytes(byte[] bytes, int offset, long value) {\r\n        HANDLE.set(bytes, offset, value);\r\n    }","title":"How do I convert Long to byte[] and back in java","body":"<p>From Java 9, the best approach is to use <code>VarHandle</code>, which will read from the byte array as if it is a long array, for performance make the <code>VarHandle</code> instance a static final field.</p>\n<pre><code>static final VarHandle HANDLE = MethodHandles.byteArrayViewVarHandle(Long.TYPE.arrayType(), ByteOrder.nativeOrder());\n\nstatic long bytesToLong(byte[] bytes, int offset) {\n    return (long)HANDLE.get(bytes, offset);\n}\n\nstatic void longToBytes(byte[] bytes, int offset, long value) {\n    HANDLE.set(bytes, offset, value);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":2,"creation_date":1635243024,"post_id":69720736,"comment_id":123238419,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/69720736/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":3781624,"reputation":9,"user_id":3140923,"display_name":"Abdel"},"comment_count":1,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1635241113,"creation_date":1635241113,"answer_id":69720736,"question_id":4485128,"body_markdown":"\r\n    static byte[] longToBytes(Long l) {\r\n        return (l + &quot;&quot;).getBytes(StandardCharsets.UTF_8);\r\n    }","title":"How do I convert Long to byte[] and back in java","body":"<pre><code>static byte[] longToBytes(Long l) {\n    return (l + &quot;&quot;).getBytes(StandardCharsets.UTF_8);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10034154,"reputation":479,"user_id":7419493,"display_name":"justis"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1650625097,"creation_date":1650624068,"answer_id":71967433,"question_id":4485128,"body_markdown":"All of the current answers are more complicated than they need to be and I’d hate for anyone locating this thread to walk away without a more concise option.\r\n\r\nYou can do both of these conversions in a single line.\r\n\r\nbyte[] to long:\r\n\r\n    ByteBuffer.wrap(yourBytes).getLong();\r\n    \r\nlong to byte[]:\r\n\r\n    ByteBuffer.wrap(new byte[8]).putLong(yourLong).array();","title":"How do I convert Long to byte[] and back in java","body":"<p>All of the current answers are more complicated than they need to be and I’d hate for anyone locating this thread to walk away without a more concise option.</p>\n<p>You can do both of these conversions in a single line.</p>\n<p>byte[] to long:</p>\n<pre><code>ByteBuffer.wrap(yourBytes).getLong();\n</code></pre>\n<p>long to byte[]:</p>\n<pre><code>ByteBuffer.wrap(new byte[8]).putLong(yourLong).array();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465839,"reputation":6552,"user_id":870207,"accept_rate":0,"display_name":"teknopaul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659618329,"creation_date":1659618329,"answer_id":73236512,"question_id":4485128,"body_markdown":"\r\n    new ObjectMapper().writeValueAsString(1234L).getBytes(); //*\r\n\r\nClearly this is not the ideal solution in terms of bytes, but it&#39;s what everybody seems to do these days.\r\nGiven op wants to convert it back to a double at the other end precision is probably not a concern.\r\n\r\n\r\n(* if its not clear, this says: send it over TCP as JSON)\r\n","title":"How do I convert Long to byte[] and back in java","body":"<pre><code>new ObjectMapper().writeValueAsString(1234L).getBytes(); //*\n</code></pre>\n<p>Clearly this is not the ideal solution in terms of bytes, but it's what everybody seems to do these days.\nGiven op wants to convert it back to a double at the other end precision is probably not a concern.</p>\n<p>(* if its not clear, this says: send it over TCP as JSON)</p>\n"},{"tags":[],"owner":{"account_id":1367378,"reputation":1,"user_id":1303548,"display_name":"Rod_zhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663253227,"creation_date":1663253227,"answer_id":73733251,"question_id":4485128,"body_markdown":"    public static long ToInt64(byte[] buffer) throws OutOfRangeException {\r\n        if (buffer.length &lt; 8) {\r\n            throw new OutOfRangeException();\r\n        }\r\n        long int64 = 0;\r\n        int64 = buffer[0] &amp; 0xffL;\r\n        int64 |= ((long) buffer[1] &lt;&lt; 8) &amp; 0xff00L;\r\n        int64 |= ((long) buffer[2] &lt;&lt; 16) &amp; 0xff0000L;\r\n        int64 |= ((long) buffer[3] &lt;&lt; 24) &amp; 0xff000000L;\r\n        int64 |= ((long) buffer[4] &lt;&lt; 32) &amp; 0xff00000000L;\r\n        int64 |= ((long) buffer[5] &lt;&lt; 40) &amp; 0xff0000000000L;\r\n        int64 |= ((long) buffer[6] &lt;&lt; 48) &amp; 0xff000000000000L;\r\n        int64 |= ((long) buffer[7] &lt;&lt; 56);\r\n        return int64;\r\n    }","title":"How do I convert Long to byte[] and back in java","body":"<pre><code>public static long ToInt64(byte[] buffer) throws OutOfRangeException {\n    if (buffer.length &lt; 8) {\n        throw new OutOfRangeException();\n    }\n    long int64 = 0;\n    int64 = buffer[0] &amp; 0xffL;\n    int64 |= ((long) buffer[1] &lt;&lt; 8) &amp; 0xff00L;\n    int64 |= ((long) buffer[2] &lt;&lt; 16) &amp; 0xff0000L;\n    int64 |= ((long) buffer[3] &lt;&lt; 24) &amp; 0xff000000L;\n    int64 |= ((long) buffer[4] &lt;&lt; 32) &amp; 0xff00000000L;\n    int64 |= ((long) buffer[5] &lt;&lt; 40) &amp; 0xff0000000000L;\n    int64 |= ((long) buffer[6] &lt;&lt; 48) &amp; 0xff000000000000L;\n    int64 |= ((long) buffer[7] &lt;&lt; 56);\n    return int64;\n}\n</code></pre>\n"}],"owner":{"account_id":253120,"reputation":3093,"user_id":531608,"accept_rate":41,"display_name":"Emre801"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":279865,"favorite_count":0,"down_vote_count":1,"up_vote_count":213,"accepted_answer_id":4485196,"answer_count":18,"score":212,"last_activity_date":1680564245,"creation_date":1292793240,"question_id":4485128,"body_markdown":"How do I convert a `long` to a `byte[]` and back in Java?\r\n\r\nI&#39;m trying convert a `long` to a `byte[]` so that I will be able to send the `byte[]` over a TCP connection. On the other side I want to take that `byte[]` and convert it back into a `double`.\r\n","title":"How do I convert Long to byte[] and back in java","body":"<p>How do I convert a <code>long</code> to a <code>byte[]</code> and back in Java?</p>\n\n<p>I'm trying convert a <code>long</code> to a <code>byte[]</code> so that I will be able to send the <code>byte[]</code> over a TCP connection. On the other side I want to take that <code>byte[]</code> and convert it back into a <code>double</code>.</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1680564110,"post_id":75924320,"comment_id":133916650,"body_markdown":"You can either use `instanceOf` to cast the `Object` reference to a `JSONObject`, or loop over the indices of the array and call `transactions.getJSONObject()`, which will throw an exception if one of your elements is not a `JSONObject`.","body":"You can either use <code>instanceOf</code> to cast the <code>Object</code> reference to a <code>JSONObject</code>, or loop over the indices of the array and call <code>transactions.getJSONObject()</code>, which will throw an exception if one of your elements is not a <code>JSONObject</code>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1680564290,"post_id":75924320,"comment_id":133916675,"body_markdown":"Have a look at the declaration of `JSONArray`: `public class JSONArray implements Iterable&lt;Object&gt; `, so when you use a foreach loop, each element will be an `Object`. (of course the actual objects will be `JSONObject`, `JSONArray`, `String` ans so on, but you can&#39;t assume that they are anything more specific than `Object`)","body":"Have a look at the declaration of <code>JSONArray</code>: <code>public class JSONArray implements Iterable&lt;Object&gt; </code>, so when you use a foreach loop, each element will be an <code>Object</code>. (of course the actual objects will be <code>JSONObject</code>, <code>JSONArray</code>, <code>String</code> ans so on, but you can&#39;t assume that they are anything more specific than <code>Object</code>)"}],"answers":[{"comments":[{"owner":{"account_id":7279815,"reputation":29,"user_id":5549950,"display_name":"NIcolaHearn"},"score":0,"creation_date":1680592352,"post_id":75924401,"comment_id":133919873,"body_markdown":"Thanks for answering. It hasn&#39;t worked yet. \n\nIf I do this, I can no longer use &quot;getString&quot; and &quot;getInt&quot;, I think because it doesn&#39;t see the transaction as a JSONObject. But if I try to access &quot;direction&quot; and &quot;amount&quot; in the normal object way e.g. transaction.amount, that doesn&#39;t work either.","body":"Thanks for answering. It hasn&#39;t worked yet.   If I do this, I can no longer use &quot;getString&quot; and &quot;getInt&quot;, I think because it doesn&#39;t see the transaction as a JSONObject. But if I try to access &quot;direction&quot; and &quot;amount&quot; in the normal object way e.g. transaction.amount, that doesn&#39;t work either."},{"owner":{"account_id":7279815,"reputation":29,"user_id":5549950,"display_name":"NIcolaHearn"},"score":0,"creation_date":1680597448,"post_id":75924401,"comment_id":133921010,"body_markdown":"I figured it out, amount is an object inside the main object not an int. That wasn’t the error message I was getting though!","body":"I figured it out, amount is an object inside the main object not an int. That wasn’t the error message I was getting though!"}],"tags":[],"owner":{"account_id":27756159,"reputation":21,"user_id":21189592,"display_name":"Alexandre Mercier"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680564174,"creation_date":1680564174,"answer_id":75924401,"question_id":75924320,"body_markdown":"If you cast each element of the array explicitly, it should work.\r\nLike this:\r\n\r\n    for (Object obj : transactions) {\r\n        JSONObject transaction = (JSONObject) obj;\r\n        if (transaction.getString(&quot;direction&quot;).equals(&quot;OUT&quot;)) {\r\n            int amount = transaction.getInt(&quot;amount&quot;);\r\n            int rounded = (amount + 99) / 100 * 100;\r\n            int roundUpAmount = rounded - amount;\r\n            roundUpAmounts.add(roundUpAmount);\r\n        }\r\n    }","title":"Error in Java project: Type mismatch: cannot convert from element type Object to JSONObject","body":"<p>If you cast each element of the array explicitly, it should work.\nLike this:</p>\n<pre><code>for (Object obj : transactions) {\n    JSONObject transaction = (JSONObject) obj;\n    if (transaction.getString(&quot;direction&quot;).equals(&quot;OUT&quot;)) {\n        int amount = transaction.getInt(&quot;amount&quot;);\n        int rounded = (amount + 99) / 100 * 100;\n        int roundUpAmount = rounded - amount;\n        roundUpAmounts.add(roundUpAmount);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7279815,"reputation":29,"user_id":5549950,"display_name":"NIcolaHearn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680564174,"creation_date":1680562820,"question_id":75924320,"body_markdown":"I am getting this error: &quot;Type mismatch: cannot convert from element type Object to JSONObject&quot;.\r\n\r\nI don&#39;t know what to change because my transactions is a JSONArray of JSONObjects. Does anyone have an idea why this is happening and how to fix it? Thanks!\r\n\r\n```\tpublic ArrayList&lt;Integer&gt; roundUpArray(JSONArray transactions) {\r\n\t\t   for (JSONObject transaction : transactions) {\r\n\t            if (transaction.getString(&quot;direction&quot;).equals(&quot;OUT&quot;)) {\r\n\t\t\t   \t\tint amount = transaction.getInt(&quot;amount&quot;);\r\n\t                int rounded = (amount + 99) / 100 * 100;\r\n\t                int roundUpAmount = rounded - amount;\r\n\t                roundUpAmounts.add(roundUpAmount);\r\n\t            }\r\n\t        } \r\n\t\t   return roundUpAmounts;\r\n\t}\r\n","title":"Error in Java project: Type mismatch: cannot convert from element type Object to JSONObject","body":"<p>I am getting this error: &quot;Type mismatch: cannot convert from element type Object to JSONObject&quot;.</p>\n<p>I don't know what to change because my transactions is a JSONArray of JSONObjects. Does anyone have an idea why this is happening and how to fix it? Thanks!</p>\n<pre><code>           for (JSONObject transaction : transactions) {\n                if (transaction.getString(&quot;direction&quot;).equals(&quot;OUT&quot;)) {\n                    int amount = transaction.getInt(&quot;amount&quot;);\n                    int rounded = (amount + 99) / 100 * 100;\n                    int roundUpAmount = rounded - amount;\n                    roundUpAmounts.add(roundUpAmount);\n                }\n            } \n           return roundUpAmounts;\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1680562610,"post_id":75924266,"comment_id":133916504,"body_markdown":"When included within the context of the application (ie in the resource or source locations), you can&#39;t treat them as files, instead, you need to use `Class#getResource` to obtain a reference to them","body":"When included within the context of the application (ie in the resource or source locations), you can&#39;t treat them as files, instead, you need to use <code>Class#getResource</code> to obtain a reference to them"},{"owner":{"account_id":27061958,"reputation":1,"user_id":20613864,"display_name":"Jens Meier"},"score":0,"creation_date":1680563571,"post_id":75924266,"comment_id":133916600,"body_markdown":"Why? I don&#39;t understand...","body":"Why? I don&#39;t understand..."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1680564367,"post_id":75924266,"comment_id":133916680,"body_markdown":"The problem is in how the image gets stored.  If you include the image in the &quot;resources&quot; directory of your project, the image will be included in the resulting Jar file, when the project is built and exported.  This places the image inside the jar (or zip file) rendering it no longer accessible as a &quot;file on the file system&quot;.  This solves an otherwise annoying issue of having to &quot;find&quot; the image some where on the file system when you don&#39;t actually have any clue where it might actually be - as you working location could be any where, so relative and absolute paths become useless","body":"The problem is in how the image gets stored.  If you include the image in the &quot;resources&quot; directory of your project, the image will be included in the resulting Jar file, when the project is built and exported.  This places the image inside the jar (or zip file) rendering it no longer accessible as a &quot;file on the file system&quot;.  This solves an otherwise annoying issue of having to &quot;find&quot; the image some where on the file system when you don&#39;t actually have any clue where it might actually be - as you working location could be any where, so relative and absolute paths become useless"},{"owner":{"account_id":27061958,"reputation":1,"user_id":20613864,"display_name":"Jens Meier"},"score":0,"creation_date":1680598753,"post_id":75924266,"comment_id":133921316,"body_markdown":"Ah ok, thank you. The problem I see now is that my ImageUtil class needs a static method to load the image. How could I then load the image when getClass() can not be used?!","body":"Ah ok, thank you. The problem I see now is that my ImageUtil class needs a static method to load the image. How could I then load the image when getClass() can not be used?!"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1680643997,"post_id":75924266,"comment_id":133932702,"body_markdown":"`YourClass.class.getResource`","body":"<code>YourClass.class.getResource</code>"}],"owner":{"account_id":27061958,"reputation":1,"user_id":20613864,"display_name":"Jens Meier"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1680562743,"answer_count":0,"score":0,"last_activity_date":1680562808,"creation_date":1680562079,"question_id":75924266,"body_markdown":"I tried it like this:\r\n\r\n```\r\nBufferedImage img = null;\r\ntry {\r\n    img = ImageIO.read(new File(&quot;strawberry.jpg&quot;));\r\n} catch (IOException e) {\r\n}\r\n```\r\nThat did not seem to work for me. My image is in a (eclipse) res-folder.\r\n\r\nWhen I look up the whole path (C:/...) it seems to work. How can  I make it load without the whole thing when it is in the same project?","title":"Load image from folder in project","body":"<p>I tried it like this:</p>\n<pre><code>BufferedImage img = null;\ntry {\n    img = ImageIO.read(new File(&quot;strawberry.jpg&quot;));\n} catch (IOException e) {\n}\n</code></pre>\n<p>That did not seem to work for me. My image is in a (eclipse) res-folder.</p>\n<p>When I look up the whole path (C:/...) it seems to work. How can  I make it load without the whole thing when it is in the same project?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":9700547,"reputation":2180,"user_id":7195666,"display_name":"Vulwsztyn"},"score":0,"creation_date":1680522690,"post_id":75919154,"comment_id":133907351,"body_markdown":"are you sure there is such an element?","body":"are you sure there is such an element?"},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1680560950,"post_id":75919154,"comment_id":133916342,"body_markdown":"Please edit your question and add the relevant error message as text, properly formatted.","body":"Please edit your question and add the relevant error message as text, properly formatted."}],"answers":[{"comments":[{"owner":{"account_id":28199941,"reputation":11,"user_id":21553898,"display_name":"Bhuvana"},"score":0,"creation_date":1680592965,"post_id":75920082,"comment_id":133920028,"body_markdown":"Tried the above code and got error as below hence help in resolving the same.                                                                                                   1. WebDriverwait - Cannot instantiate the type WebDriverwait                                                                   2. until - The method until is undefined for the type WebDriverWait.","body":"Tried the above code and got error as below hence help in resolving the same.                                                                                                   1. WebDriverwait - Cannot instantiate the type WebDriverwait                                                                   2. until - The method until is undefined for the type WebDriverWait."},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1680596230,"post_id":75920082,"comment_id":133920723,"body_markdown":"Have you imported the `WebDriverWait` package? If not, import it in your class and then try. Following is the import statement. `import org.openqa.selenium.support.ui.WebDriverWait;`","body":"Have you imported the <code>WebDriverWait</code> package? If not, import it in your class and then try. Following is the import statement. <code>import org.openqa.selenium.support.ui.WebDriverWait;</code>"},{"owner":{"account_id":28199941,"reputation":11,"user_id":21553898,"display_name":"Bhuvana"},"score":0,"creation_date":1680784381,"post_id":75920082,"comment_id":133958554,"body_markdown":"Thanks. Hi now the code worked. But want to know how you gave the xpath as when i take the xpath it comes as below which doesnt work.                                                           //*[@id=&quot;j_idt87:auto-complete_input&quot;]. This xpath is taken by inspecting choose the course dropdown.","body":"Thanks. Hi now the code worked. But want to know how you gave the xpath as when i take the xpath it comes as below which doesnt work.                                                           //*[@id=&quot;j_idt87:auto-complete_input&quot;]. This xpath is taken by inspecting choose the course dropdown."},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1680784918,"post_id":75920082,"comment_id":133958707,"body_markdown":"`//*[@id=&quot;j_idt87:auto-complete_input&quot;]` - This XPATH expression locates the INPUT tag element, even if you try to click it manually, it won&#39;t do anything, it won&#39;t open the dropdown values(try it). However, `(//button)[1]` - this XPATH expression locates the blue dropdown icon. If you click on it dropdown values display(try it). That&#39;s it. That is the trick. [What should I do when someone answers my question?](https://stackoverflow.com/help/someone-answers)","body":"<code>&#47;&#47;*[@id=&quot;j_idt87:auto-complete_input&quot;]</code> - This XPATH expression locates the INPUT tag element, even if you try to click it manually, it won&#39;t do anything, it won&#39;t open the dropdown values(try it). However, <code>(&#47;&#47;button)[1]</code> - this XPATH expression locates the blue dropdown icon. If you click on it dropdown values display(try it). That&#39;s it. That is the trick. <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680528988,"creation_date":1680528988,"answer_id":75920082,"question_id":75919154,"body_markdown":"Assuming you want to select the dropdown value as below:\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/dflFG.png\r\n\r\nTry the below code:\r\n````\r\ndriver.get(&quot;https://leafground.com/select.xhtml&quot;);\r\n\r\ndriver.findElement(By.xpath(&quot;(//button)[1]&quot;)).click();\r\nnew WebDriverWait(driver, Duration.ofSeconds(20)).until(ExpectedConditions.presenceOfElementLocated(By.xpath(&quot;//li[text()=&#39;Playwright&#39;]&quot;))).click();\r\n````","title":"Exception in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element:","body":"<p>Assuming you want to select the dropdown value as below:\n<a href=\"https://i.stack.imgur.com/dflFG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dflFG.png\" alt=\"enter image description here\" /></a></p>\n<p>Try the below code:</p>\n<pre><code>driver.get(&quot;https://leafground.com/select.xhtml&quot;);\n\ndriver.findElement(By.xpath(&quot;(//button)[1]&quot;)).click();\nnew WebDriverWait(driver, Duration.ofSeconds(20)).until(ExpectedConditions.presenceOfElementLocated(By.xpath(&quot;//li[text()='Playwright']&quot;))).click();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680562150,"creation_date":1680562150,"answer_id":75924271,"question_id":75919154,"body_markdown":"There are a few issues.\r\n\r\n1. The first element with the ID, `j_idt87:auto-complete_input`, is an INPUT and you are clicking it. All this does is put the cursor inside the field. I&#39;m assuming you meant to open the dropdown.\r\n\r\n1. You don&#39;t have any waits. You for sure need a `WebDriverWait` before the second click but probably would be useful to have one before the first click. If you are going to wait until an element is clickable, use `ExpectedConditions.elementToBeClickable()`. Presence is just that the element exists in the DOM, not that it visible or ready to be clicked.\r\n\r\nIf it were me, I would write a method to handle this for you since I&#39;m assuming you will be using this code more than once.\r\n\r\n    public static void selectCourse(String courseName) {\r\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\r\n        wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;button[aria-label=&#39;Show Options&#39;]&quot;))).click();\r\n        wait.until(ExpectedConditions.elementToBeClickable(By.xpath(MessageFormat.format(&quot;//li[text()=&#39;&#39;{0}&#39;&#39;]&quot;, courseName)))).click();\r\n    }\r\n\r\nThen call it from your script as\r\n\r\n    selectCourse(&quot;Appium&quot;);","title":"Exception in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element:","body":"<p>There are a few issues.</p>\n<ol>\n<li><p>The first element with the ID, <code>j_idt87:auto-complete_input</code>, is an INPUT and you are clicking it. All this does is put the cursor inside the field. I'm assuming you meant to open the dropdown.</p>\n</li>\n<li><p>You don't have any waits. You for sure need a <code>WebDriverWait</code> before the second click but probably would be useful to have one before the first click. If you are going to wait until an element is clickable, use <code>ExpectedConditions.elementToBeClickable()</code>. Presence is just that the element exists in the DOM, not that it visible or ready to be clicked.</p>\n</li>\n</ol>\n<p>If it were me, I would write a method to handle this for you since I'm assuming you will be using this code more than once.</p>\n<pre><code>public static void selectCourse(String courseName) {\n    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\n    wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;button[aria-label='Show Options']&quot;))).click();\n    wait.until(ExpectedConditions.elementToBeClickable(By.xpath(MessageFormat.format(&quot;//li[text()=''{0}'']&quot;, courseName)))).click();\n}\n</code></pre>\n<p>Then call it from your script as</p>\n<pre><code>selectCourse(&quot;Appium&quot;);\n</code></pre>\n"}],"owner":{"account_id":28199941,"reputation":11,"user_id":21553898,"display_name":"Bhuvana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1680562150,"creation_date":1680522610,"question_id":75919154,"body_markdown":"\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:/Users/3520/Downloads/chromedriver_win32/chromedriver.exe&quot;);\r\n\tChromeOptions options = new ChromeOptions();\r\n\toptions.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\tChromeDriver driver = new ChromeDriver(options);\r\n\tdriver.get(&quot;https://leafground.com/select.xhtml&quot;);\r\n\r\n    WebElement dropdown3 = driver.findElement(By.id(&quot;j_idt87:auto-complete_input&quot;));\r\n\t\r\n\tActions dd = new Actions(driver);\r\n\tdd.moveToElement(dropdown3).click().perform();\r\n\tWebElement list = driver.findElement(By.xpath(&quot;//*[@id=\\&quot;j_idt87:auto-complete_panel\\&quot;]/ul/li[4]&quot;));\r\n\tlist.click();\r\n\r\nWhen ran above code the same failed. Help in resolving the same.\r\n","title":"Exception in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element:","body":"<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:/Users/3520/Downloads/chromedriver_win32/chromedriver.exe&quot;);\nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);\nChromeDriver driver = new ChromeDriver(options);\ndriver.get(&quot;https://leafground.com/select.xhtml&quot;);\n\nWebElement dropdown3 = driver.findElement(By.id(&quot;j_idt87:auto-complete_input&quot;));\n\nActions dd = new Actions(driver);\ndd.moveToElement(dropdown3).click().perform();\nWebElement list = driver.findElement(By.xpath(&quot;//*[@id=\\&quot;j_idt87:auto-complete_panel\\&quot;]/ul/li[4]&quot;));\nlist.click();\n</code></pre>\n<p>When ran above code the same failed. Help in resolving the same.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":914356,"reputation":1301,"user_id":947497,"display_name":"Jean-Fran&#231;ois Beauchef"},"score":0,"creation_date":1680524202,"post_id":75915944,"comment_id":133907728,"body_markdown":"Thanks. I tried that before, but I had the same result. So I reverted back to `spring.factories`, because I could find more examples with this. But you made me realized that I was misplacing the file. I never noticed there was a `spring` folder after `META-INF`. And now it works. :S Thanks!","body":"Thanks. I tried that before, but I had the same result. So I reverted back to <code>spring.factories</code>, because I could find more examples with this. But you made me realized that I was misplacing the file. I never noticed there was a <code>spring</code> folder after <code>META-INF</code>. And now it works. :S Thanks!"},{"owner":{"account_id":21260902,"reputation":984,"user_id":15641685,"display_name":"Huu Phuong Vu"},"score":0,"creation_date":1680572781,"post_id":75915944,"comment_id":133917425,"body_markdown":"Nice! Glad that I was able to help.","body":"Nice! Glad that I was able to help."}],"tags":[],"owner":{"account_id":21260902,"reputation":984,"user_id":15641685,"display_name":"Huu Phuong Vu"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1680498377,"creation_date":1680494321,"answer_id":75915944,"question_id":75915130,"body_markdown":"In Spring Boot 3, `META-INF/spring.factories` no longer supports registering auto-configurations.\r\n\r\nYou need to register your auto-configuration classes with ` META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports` file. \r\n\r\nThis file should list your configuration classes, with one class name per line. For example:\r\n\r\n```java\r\ncom.example.springlib.configuration.HelloConfiguration\r\ncom.example.springlib.configuration.SomeOtherConfiguration\r\n\r\n```\r\n\r\nAnd by the way, from Spring Boot 2.7, it is recommended to use @AutoConfiguration instead of @Configuration especially when you want to apply multiple auto-configurations in a desired order. \r\n\r\nYou can read more about this in the official doc here: [Creating Your Own Auto-configuration][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.developing-auto-configuration.understanding-auto-configured-beans","title":"Cannot create auto-configurable library for Spring Boot","body":"<p>In Spring Boot 3, <code>META-INF/spring.factories</code> no longer supports registering auto-configurations.</p>\n<p>You need to register your auto-configuration classes with <code> META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> file.</p>\n<p>This file should list your configuration classes, with one class name per line. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>com.example.springlib.configuration.HelloConfiguration\ncom.example.springlib.configuration.SomeOtherConfiguration\n\n</code></pre>\n<p>And by the way, from Spring Boot 2.7, it is recommended to use @AutoConfiguration instead of @Configuration especially when you want to apply multiple auto-configurations in a desired order.</p>\n<p>You can read more about this in the official doc here: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.developing-auto-configuration.understanding-auto-configured-beans\" rel=\"nofollow noreferrer\">Creating Your Own Auto-configuration</a></p>\n"},{"tags":[],"owner":{"account_id":28200974,"reputation":57,"user_id":21554764,"display_name":"Milind Vedi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680518884,"creation_date":1680518884,"answer_id":75918621,"question_id":75915130,"body_markdown":"You can just remove the line \r\n```\r\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=com.example.springlib.configuration.HelloConfiguration\r\n```\r\nif still it doesn&#39;t work just add\r\n```\r\n@EnableAutoConfiguration\r\n``` \r\nabove your main class","title":"Cannot create auto-configurable library for Spring Boot","body":"<p>You can just remove the line</p>\n<pre><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.example.springlib.configuration.HelloConfiguration\n</code></pre>\n<p>if still it doesn't work just add</p>\n<pre><code>@EnableAutoConfiguration\n</code></pre>\n<p>above your main class</p>\n"}],"owner":{"account_id":914356,"reputation":1301,"user_id":947497,"display_name":"Jean-Fran&#231;ois Beauchef"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":635,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75915944,"answer_count":2,"score":1,"last_activity_date":1680560465,"creation_date":1680478174,"question_id":75915130,"body_markdown":"I am trying to do something that seems to be really simple. But I cannot get it to work somehow. There is something I must be missing.\r\n\r\nI have 2 Spring Boot (3.0.5) projects:\r\n* one is a lib called spring-lib\r\n* the other is a web application that uses the lib\r\n\r\nIn my lib I have this configuration class in the package `com.example.springlib.configuration`:\r\n\r\n```java\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;com.example.hello&quot;)\r\npublic class HelloConfiguration {\r\n\r\n    private String text;\r\n\r\n    @Bean\r\n    public HelloService helloService() {\r\n        return new HelloService(text);\r\n    }\r\n}\r\n```\r\n\r\nAnd I have this service in `com.example.springlib.service`:\r\n\r\n```java\r\n@RequiredArgsConstructor\r\npublic class HelloService {\r\n\r\n    private final String hello;\r\n\r\n    public String hello(String name) {\r\n        return String.format(hello, name);\r\n    }\r\n}\r\n```\r\n\r\nIn the `META-INF/spring.factories` file, I have this:\r\n\r\n```\r\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=com.example.springlib.configuration.HelloConfiguration\r\n```\r\n\r\nNow In my web app, I have this controller in `com.example.springweb.web`:\r\n\r\n```java\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class HelloController {\r\n\r\n    private final HelloService helloService;\r\n\r\n    @GetMapping(&quot;/hello/{name}&quot;)\r\n    public HelloResponse convert(@PathVariable String name) {\r\n        var response = new HelloResponse();\r\n        response.setMessage(helloService.hello(name));\r\n        return response;\r\n    }\r\n}\r\n```\r\n\r\nAnd this `application.yml` file:\r\n\r\n```yaml\r\ncom:\r\n  example:\r\n    hello:\r\n      text: Hello %s!\r\n```\r\n\r\nSo there is nothing too complicated here. I was expecting the service to return &quot;Hello Bob!&quot; if I called `/hello/Bob`.\r\n\r\nBut I cannot start the web application. For some reason, the `HelloService` cannot be found. I get this error message:\r\n\r\n```\r\nDescription:\r\n\r\nParameter 0 of constructor in com.example.springweb.web.HelloController required a bean of type &#39;com.example.springlib.service.HelloService&#39; that could not be found.\r\n```\r\n\r\nWhat am I missing? What am I doing wrong?","title":"Cannot create auto-configurable library for Spring Boot","body":"<p>I am trying to do something that seems to be really simple. But I cannot get it to work somehow. There is something I must be missing.</p>\n<p>I have 2 Spring Boot (3.0.5) projects:</p>\n<ul>\n<li>one is a lib called spring-lib</li>\n<li>the other is a web application that uses the lib</li>\n</ul>\n<p>In my lib I have this configuration class in the package <code>com.example.springlib.configuration</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ConfigurationProperties(prefix = &quot;com.example.hello&quot;)\npublic class HelloConfiguration {\n\n    private String text;\n\n    @Bean\n    public HelloService helloService() {\n        return new HelloService(text);\n    }\n}\n</code></pre>\n<p>And I have this service in <code>com.example.springlib.service</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\npublic class HelloService {\n\n    private final String hello;\n\n    public String hello(String name) {\n        return String.format(hello, name);\n    }\n}\n</code></pre>\n<p>In the <code>META-INF/spring.factories</code> file, I have this:</p>\n<pre><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.example.springlib.configuration.HelloConfiguration\n</code></pre>\n<p>Now In my web app, I have this controller in <code>com.example.springweb.web</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequiredArgsConstructor\npublic class HelloController {\n\n    private final HelloService helloService;\n\n    @GetMapping(&quot;/hello/{name}&quot;)\n    public HelloResponse convert(@PathVariable String name) {\n        var response = new HelloResponse();\n        response.setMessage(helloService.hello(name));\n        return response;\n    }\n}\n</code></pre>\n<p>And this <code>application.yml</code> file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>com:\n  example:\n    hello:\n      text: Hello %s!\n</code></pre>\n<p>So there is nothing too complicated here. I was expecting the service to return &quot;Hello Bob!&quot; if I called <code>/hello/Bob</code>.</p>\n<p>But I cannot start the web application. For some reason, the <code>HelloService</code> cannot be found. I get this error message:</p>\n<pre><code>Description:\n\nParameter 0 of constructor in com.example.springweb.web.HelloController required a bean of type 'com.example.springlib.service.HelloService' that could not be found.\n</code></pre>\n<p>What am I missing? What am I doing wrong?</p>\n"},{"tags":["java","jpanel"],"comments":[{"owner":{"account_id":2907729,"reputation":1547,"user_id":2492624,"accept_rate":33,"display_name":"MarAja"},"score":0,"creation_date":1375270936,"post_id":17966773,"comment_id":26265955,"body_markdown":"When I add the line:\n\n    jFrame.setBackground(Color.WHITE);\n\nIt works... Nevertheless, I would like to understand why it doesn&#39;t work with my contentPane. Any idea?\n\nThx.","body":"When I add the line:      jFrame.setBackground(Color.WHITE);  It works... Nevertheless, I would like to understand why it doesn&#39;t work with my contentPane. Any idea?  Thx."}],"answers":[{"comments":[{"owner":{"account_id":2245093,"reputation":658,"user_id":2180100,"accept_rate":62,"display_name":"Sidharth Ghoshal"},"score":0,"creation_date":1389810035,"post_id":17967048,"comment_id":31824240,"body_markdown":"I also have the same problem! I specifically want to be able to click my buttons and alternate the colors but that doesn&#39;t work at all","body":"I also have the same problem! I specifically want to be able to click my buttons and alternate the colors but that doesn&#39;t work at all"}],"tags":[],"owner":{"display_name":"user2637317"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1375264073,"creation_date":1375264073,"answer_id":17967048,"question_id":17966773,"body_markdown":"This could fix it...\r\n\r\n    public class Container extends JPanel\r\n    {\r\n    \tpublic Container() \r\n    \t{\r\n       \t\tsuper();\r\n       \t\tthis.setOpaque(true);\r\n        \tthis.setBackground(Color.WHITE);\r\n    \t}\r\n    }","title":"Set background color in Java on a JPanel doesn&#39;t work","body":"<p>This could fix it...</p>\n\n<pre><code>public class Container extends JPanel\n{\n    public Container() \n    {\n        super();\n        this.setOpaque(true);\n        this.setBackground(Color.WHITE);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1911363,"reputation":7397,"user_id":1725096,"accept_rate":85,"display_name":"Jens Piegsa"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1651211103,"creation_date":1375264659,"answer_id":17967273,"question_id":17966773,"body_markdown":"For some components, the background is switched off by default. The background color is only applied to opaque widgets. Call the following method for all components in your widget hierarchy that should paint their background:\r\n\r\n```java\r\ncomponent.setOpaque(true);\r\n```","title":"Set background color in Java on a JPanel doesn&#39;t work","body":"<p>For some components, the background is switched off by default. The background color is only applied to opaque widgets. Call the following method for all components in your widget hierarchy that should paint their background:</p>\n<pre class=\"lang-java prettyprint-override\"><code>component.setOpaque(true);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2697756,"reputation":547,"user_id":2329326,"display_name":"HelloImKevo"},"score":0,"creation_date":1413245783,"post_id":23894011,"comment_id":41362031,"body_markdown":"Add the call to `super.paintComponent(g);` in the override method to paint the JPanel properly :D","body":"Add the call to <code>super.paintComponent(g);</code> in the override method to paint the JPanel properly :D"},{"owner":{"account_id":1185299,"reputation":7276,"user_id":1159404,"accept_rate":75,"display_name":"Nenad Bulatović"},"score":0,"creation_date":1413275052,"post_id":23894011,"comment_id":41370756,"body_markdown":"It will not work as you think it would. Where would you exactly put that statement?","body":"It will not work as you think it would. Where would you exactly put that statement?"},{"owner":{"account_id":2697756,"reputation":547,"user_id":2329326,"display_name":"HelloImKevo"},"score":0,"creation_date":1413394841,"post_id":23894011,"comment_id":41430985,"body_markdown":"If you change the code to:\n`public CircleDraw() {\n    // ...\n}\n\npublic static void main(String[] args) {\n    new CircleDraw();\n}\n\npublic CirclePanel(Float diameter) {\n    super();\n    this.setOpaque(true);\n    this.setBackground(Color.BLUE);\n    this.diameter = diameter;\n}\n\n@Override\npublic void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    // ...\n}`\n\nThat should work as intended; a blue panel and white circle (if I&#39;m understanding the intent correctly)","body":"If you change the code to: <code>public CircleDraw() {     &#47;&#47; ... }  public static void main(String[] args) {     new CircleDraw(); }  public CirclePanel(Float diameter) {     super();     this.setOpaque(true);     this.setBackground(Color.BLUE);     this.diameter = diameter; }  @Override public void paintComponent(Graphics g) {     super.paintComponent(g);     &#47;&#47; ... }</code>  That should work as intended; a blue panel and white circle (if I&#39;m understanding the intent correctly)"}],"tags":[],"owner":{"account_id":1185299,"reputation":7276,"user_id":1159404,"accept_rate":75,"display_name":"Nenad Bulatović"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413274518,"creation_date":1401206605,"answer_id":23894011,"question_id":17966773,"body_markdown":"I also had that problem, and only that worked out is exactly what OP suggested.\r\n\r\n\r\n\t// Only this works for me\r\n\tthis.setBackground(Color.blue);\r\n\r\nWhole code of example class is here (just for purpose to show where I tried to put/set setBackground();\r\n\r\n    import java.awt.BasicStroke;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.RenderingHints;\r\n    import java.awt.geom.Ellipse2D;\r\n    \r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    \r\n    public class CircleDraw extends JFrame {\r\n    \tFloat diameter = 150f;\r\n    \r\n    \tpublic CircleDraw() {\r\n    \t\tsuper(&quot;Circle Draw&quot;);\r\n    \t\tthis.setSize(300, 300);\r\n    \t\tthis.setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n    \t\tthis.add(new CirclePanel(diameter));\r\n    \t\tthis.setVisible(true);\r\n    \r\n    \t\t// Only this works for me\r\n    \t\tthis.setBackground(Color.blue);\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew CircleDraw();\r\n    \t}\r\n    }\r\n    \r\n    class CirclePanel extends JPanel {\r\n    \r\n    \tFloat diameter;\r\n    \r\n    \tpublic CirclePanel(Float diameter) {\r\n    \t\tsuper();\r\n    \t\t// this.setOpaque(true);\r\n    \t\t// this.setBackground(Color.WHITE);\r\n    \t\tthis.diameter = diameter;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void paintComponent(Graphics g) {\r\n    \r\n    \t\tint panelWidth = this.getSize().width;\r\n    \t\tint panelHeight = this.getSize().height;\r\n    \r\n    \t\tsetPreferredSize(new Dimension(300, 300));\r\n    \t\tGraphics2D comp2D = (Graphics2D) g;\r\n    \t\tcomp2D.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n    \r\n    \t\tcomp2D.setStroke(new BasicStroke(1f));\r\n    \t\t// comp2D.setBackground(Color.white);\r\n    \t\tcomp2D.setPaint(Color.white);\r\n    \r\n    \t\tEllipse2D.Float e1 = new Ellipse2D.Float((panelWidth / 2) - (diameter / 2), (panelHeight / 2) - (diameter / 2), diameter, diameter);\r\n    \t\tcomp2D.draw(e1);\r\n    \t}\r\n    }","title":"Set background color in Java on a JPanel doesn&#39;t work","body":"<p>I also had that problem, and only that worked out is exactly what OP suggested.</p>\n\n<pre><code>// Only this works for me\nthis.setBackground(Color.blue);\n</code></pre>\n\n<p>Whole code of example class is here (just for purpose to show where I tried to put/set setBackground();</p>\n\n<pre><code>import java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\nimport java.awt.geom.Ellipse2D;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class CircleDraw extends JFrame {\n    Float diameter = 150f;\n\n    public CircleDraw() {\n        super(\"Circle Draw\");\n        this.setSize(300, 300);\n        this.setDefaultCloseOperation(EXIT_ON_CLOSE);\n        this.add(new CirclePanel(diameter));\n        this.setVisible(true);\n\n        // Only this works for me\n        this.setBackground(Color.blue);\n    }\n\n    public static void main(String[] args) {\n        new CircleDraw();\n    }\n}\n\nclass CirclePanel extends JPanel {\n\n    Float diameter;\n\n    public CirclePanel(Float diameter) {\n        super();\n        // this.setOpaque(true);\n        // this.setBackground(Color.WHITE);\n        this.diameter = diameter;\n    }\n\n    @Override\n    public void paintComponent(Graphics g) {\n\n        int panelWidth = this.getSize().width;\n        int panelHeight = this.getSize().height;\n\n        setPreferredSize(new Dimension(300, 300));\n        Graphics2D comp2D = (Graphics2D) g;\n        comp2D.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\n        comp2D.setStroke(new BasicStroke(1f));\n        // comp2D.setBackground(Color.white);\n        comp2D.setPaint(Color.white);\n\n        Ellipse2D.Float e1 = new Ellipse2D.Float((panelWidth / 2) - (diameter / 2), (panelHeight / 2) - (diameter / 2), diameter, diameter);\n        comp2D.draw(e1);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28207188,"reputation":1,"user_id":21560079,"display_name":"curtis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680559983,"creation_date":1680559983,"answer_id":75924127,"question_id":17966773,"body_markdown":"you need to include the super function in your override function. IE\r\n\r\n     protected void paintComponent(Graphics g){\r\n        super.paintComponent(g); // this sets the background normaly\r\n        g.setColor(Color.BLACK);\r\n        g.drawLine(0,0,getWidth(),getHeight());\r\n    }","title":"Set background color in Java on a JPanel doesn&#39;t work","body":"<p>you need to include the super function in your override function. IE</p>\n<pre><code> protected void paintComponent(Graphics g){\n    super.paintComponent(g); // this sets the background normaly\n    g.setColor(Color.BLACK);\n    g.drawLine(0,0,getWidth(),getHeight());\n}\n</code></pre>\n"}],"owner":{"account_id":2907729,"reputation":1547,"user_id":2492624,"accept_rate":33,"display_name":"MarAja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40216,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1680559983,"creation_date":1375263400,"question_id":17966773,"body_markdown":"I am working on a &quot;paint-like&quot; application (a little drawing software) to familiarize with Java 2D components. Here is my problem: I have a JFrame whose ContentPane is an instance of a class inheriting from JPanel. I want to set the background color to white but it remains on its default color... The class name corresponding to ContentPane is Container. Here is a simplified code:\r\n\r\n\tpublic class Container extends JPanel {\r\n\r\n\t\tpublic Container() {\r\n\t\t\tsuper();\r\n\t\t\tthis.setBackground(Color.WHITE);\r\n\t\t}\r\n\t}\r\n\r\nThe JFrame constructor contains the line:\r\n    \r\n    this.setContentPane(mainContainer);\r\n\r\nHave I missed something?\r\n\r\nThx.\r\n\r\n\r\n","title":"Set background color in Java on a JPanel doesn&#39;t work","body":"<p>I am working on a \"paint-like\" application (a little drawing software) to familiarize with Java 2D components. Here is my problem: I have a JFrame whose ContentPane is an instance of a class inheriting from JPanel. I want to set the background color to white but it remains on its default color... The class name corresponding to ContentPane is Container. Here is a simplified code:</p>\n\n<pre><code>public class Container extends JPanel {\n\n    public Container() {\n        super();\n        this.setBackground(Color.WHITE);\n    }\n}\n</code></pre>\n\n<p>The JFrame constructor contains the line:</p>\n\n<pre><code>this.setContentPane(mainContainer);\n</code></pre>\n\n<p>Have I missed something?</p>\n\n<p>Thx.</p>\n"},{"tags":["java","hadoop","java-8","mapreduce","data-science"],"owner":{"account_id":24846375,"reputation":25,"user_id":18723865,"display_name":"Data_Science_Mick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680558597,"creation_date":1680558597,"question_id":75924017,"body_markdown":"I am new to Hadoop. I have installed Hadoop version 2.9.2 directly on my local machine. I have configured all files as needed and can verify my node connection via NameNode, DataNode and Resource manager in localhost.\r\n\r\nI am attempting to run a MapReduce job using the example .jar file which comes with my installation. I have loaded a sample text file into HDFS file system and am attempting to run the MapReduce job via &quot;hadoop jar C:\\hadoop-2.9.2\\share\\hadoop\\mapreduce\\hadoop-mapreduce-examples-2.9.2.jar wordcount /user/username/FileName.txt /user/username/wordcount-output/&quot;.\r\n\r\nChecking the log file, screenshot below, it states that there appears to be an issue with the version of JDK on my machine. I have installed JDK 8.0.361. I have included some images and comments below. Would anyone have any suggestions on how to resolve?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI have also correctly set the JAVA_HOME variable. Note that I have tried this both with \\bin included and not included in the file path.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nSimilarly, I have set the path variable correctly too. \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zh18Y.png\r\n  [2]: https://i.stack.imgur.com/Ovfr7.png\r\n  [3]: https://i.stack.imgur.com/LlX2a.png","title":"MapReduce - Hadoop Version 2.9.2 - JDK 8.0.361 issue","body":"<p>I am new to Hadoop. I have installed Hadoop version 2.9.2 directly on my local machine. I have configured all files as needed and can verify my node connection via NameNode, DataNode and Resource manager in localhost.</p>\n<p>I am attempting to run a MapReduce job using the example .jar file which comes with my installation. I have loaded a sample text file into HDFS file system and am attempting to run the MapReduce job via &quot;hadoop jar C:\\hadoop-2.9.2\\share\\hadoop\\mapreduce\\hadoop-mapreduce-examples-2.9.2.jar wordcount /user/username/FileName.txt /user/username/wordcount-output/&quot;.</p>\n<p>Checking the log file, screenshot below, it states that there appears to be an issue with the version of JDK on my machine. I have installed JDK 8.0.361. I have included some images and comments below. Would anyone have any suggestions on how to resolve?</p>\n<p><a href=\"https://i.stack.imgur.com/zh18Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zh18Y.png\" alt=\"enter image description here\" /></a></p>\n<p>I have also correctly set the JAVA_HOME variable. Note that I have tried this both with \\bin included and not included in the file path.</p>\n<p><a href=\"https://i.stack.imgur.com/Ovfr7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ovfr7.png\" alt=\"enter image description here\" /></a></p>\n<p>Similarly, I have set the path variable correctly too.</p>\n<p><a href=\"https://i.stack.imgur.com/LlX2a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LlX2a.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","web"],"owner":{"account_id":8957793,"reputation":41,"user_id":6681519,"display_name":"Constantine Dubovik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680557948,"creation_date":1680557948,"question_id":75923963,"body_markdown":"We&#39;re developing a light loaded single page application store, which is using one application instance for different vendors, separating them by subdomain, for example:\r\n\r\nfirst.shop.com\r\n\r\nsecond.shop.com\r\n\r\nAnd I want to have such resources structure\r\n[![project structure][1]][1]\r\n\r\n\r\nSo call \r\n&gt; first.shop.com/static/main.css\r\n\r\n will return CSS file from \r\n\r\n&gt; /resources/static/first/static/main.css\r\n\r\nI&#39;ve tried to implement filter which taking URL and forwards it accordingly to shop name and resources working fine, but now I&#39;m receiving 404 for home page, and I think it&#39;s because index.html now not in \r\n\r\n&gt; /resources/static/index.html\r\n\r\nbut one more level deeper.\r\n\r\nHere is my configuration for SPA\r\n\r\n    @Controller\r\n    class RouteController {\r\n    \t@RequestMapping(value = {&quot;/{path:[^.]*}&quot;, &quot;/profile/{path:[^.]*}&quot;,&quot;/settings/{path:[^.]*}&quot;})\r\n    \tpublic String redirect() {\r\n    \t\treturn &quot;forward:/&quot;;\r\n    \t}\r\n    }\r\n\r\nand security configuration\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n    \thttp\r\n    \t\t\t.authorizeRequests()\r\n    \t\t\t.expressionHandler(webSecurityExpressionHandler())\r\n    \t\t\t.antMatchers(&quot;/settings/*&quot;).hasAuthority(&quot;STORE_WRITE&quot;)\r\n    \t\t\t.antMatchers(&quot;/settings&quot;).hasAuthority(&quot;STORE_WRITE&quot;)\r\n    \t\t\t.antMatchers(&quot;/profile&quot;).hasAuthority(&quot;STORE_READ&quot;)\r\n    \t\t\t.antMatchers(&quot;/profile/*&quot;).hasAuthority(&quot;STORE_READ&quot;)\r\n    \t\t\t.antMatchers(&quot;/&quot;).permitAll()\r\n    \t\t\t.antMatchers(&quot;/fk-verify.html&quot;).permitAll()\r\n    \t\t\t.antMatchers(&quot;/*.ogg&quot;).permitAll()\r\n    \t\t\t.antMatchers(&quot;/js/**&quot;, &quot;/img/**&quot;, &quot;/fonts/**&quot;,&quot;/css/**&quot;, &quot;/bower_components/**&quot;).permitAll()\r\n    \t\t\t.antMatchers(&quot;/api/**&quot;).permitAll()\r\n    \t\t\t.antMatchers(HttpMethod.POST, &quot;/api/**&quot;).permitAll()\r\n    \t\t\t.antMatchers(&quot;/login/**&quot;).permitAll()\r\n    \t\t\t.antMatchers(&quot;/v3/**&quot;).hasAuthority(&quot;APP_WRITE&quot;)\r\n    \t\t\t.antMatchers(&quot;/swagger-ui/**&quot;).hasAuthority(&quot;APP_WRITE&quot;)\r\n    \t\t\t.antMatchers(&quot;/swagger-resources/**&quot;).hasAuthority(&quot;APP_WRITE&quot;)\r\n    \t\t\t.antMatchers(&quot;/resources/**&quot;, &quot;/webjars/**&quot;, &quot;/built/**&quot;, &quot;/static/**&quot;).permitAll()\r\n    \t\t\t.and()\r\n    \t\t\t.openidLogin()\r\n    \t\t\t.consumerManager(consumerManager())\r\n    \t\t\t.loginPage(&quot;/&quot;).permitAll()\r\n    \t\t\t.authenticationUserDetailsService(authenticationUserDetailsService())\r\n    \t\t\t.failureUrl(&quot;/?fail&quot;)\r\n    \t\t\t.defaultSuccessUrl(&quot;/&quot;, true)\r\n    \t\t\t.and()\r\n    \t\t\t.csrf().disable();\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rldUC.png","title":"Separating static resources depends on subdomain name using Spring Boot 2.6.7","body":"<p>We're developing a light loaded single page application store, which is using one application instance for different vendors, separating them by subdomain, for example:</p>\n<p>first.shop.com</p>\n<p>second.shop.com</p>\n<p>And I want to have such resources structure\n<a href=\"https://i.stack.imgur.com/rldUC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rldUC.png\" alt=\"project structure\" /></a></p>\n<p>So call</p>\n<blockquote>\n<p>first.shop.com/static/main.css</p>\n</blockquote>\n<p>will return CSS file from</p>\n<blockquote>\n<p>/resources/static/first/static/main.css</p>\n</blockquote>\n<p>I've tried to implement filter which taking URL and forwards it accordingly to shop name and resources working fine, but now I'm receiving 404 for home page, and I think it's because index.html now not in</p>\n<blockquote>\n<p>/resources/static/index.html</p>\n</blockquote>\n<p>but one more level deeper.</p>\n<p>Here is my configuration for SPA</p>\n<pre><code>@Controller\nclass RouteController {\n    @RequestMapping(value = {&quot;/{path:[^.]*}&quot;, &quot;/profile/{path:[^.]*}&quot;,&quot;/settings/{path:[^.]*}&quot;})\n    public String redirect() {\n        return &quot;forward:/&quot;;\n    }\n}\n</code></pre>\n<p>and security configuration</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .authorizeRequests()\n            .expressionHandler(webSecurityExpressionHandler())\n            .antMatchers(&quot;/settings/*&quot;).hasAuthority(&quot;STORE_WRITE&quot;)\n            .antMatchers(&quot;/settings&quot;).hasAuthority(&quot;STORE_WRITE&quot;)\n            .antMatchers(&quot;/profile&quot;).hasAuthority(&quot;STORE_READ&quot;)\n            .antMatchers(&quot;/profile/*&quot;).hasAuthority(&quot;STORE_READ&quot;)\n            .antMatchers(&quot;/&quot;).permitAll()\n            .antMatchers(&quot;/fk-verify.html&quot;).permitAll()\n            .antMatchers(&quot;/*.ogg&quot;).permitAll()\n            .antMatchers(&quot;/js/**&quot;, &quot;/img/**&quot;, &quot;/fonts/**&quot;,&quot;/css/**&quot;, &quot;/bower_components/**&quot;).permitAll()\n            .antMatchers(&quot;/api/**&quot;).permitAll()\n            .antMatchers(HttpMethod.POST, &quot;/api/**&quot;).permitAll()\n            .antMatchers(&quot;/login/**&quot;).permitAll()\n            .antMatchers(&quot;/v3/**&quot;).hasAuthority(&quot;APP_WRITE&quot;)\n            .antMatchers(&quot;/swagger-ui/**&quot;).hasAuthority(&quot;APP_WRITE&quot;)\n            .antMatchers(&quot;/swagger-resources/**&quot;).hasAuthority(&quot;APP_WRITE&quot;)\n            .antMatchers(&quot;/resources/**&quot;, &quot;/webjars/**&quot;, &quot;/built/**&quot;, &quot;/static/**&quot;).permitAll()\n            .and()\n            .openidLogin()\n            .consumerManager(consumerManager())\n            .loginPage(&quot;/&quot;).permitAll()\n            .authenticationUserDetailsService(authenticationUserDetailsService())\n            .failureUrl(&quot;/?fail&quot;)\n            .defaultSuccessUrl(&quot;/&quot;, true)\n            .and()\n            .csrf().disable();\n}\n</code></pre>\n"},{"tags":["javascript","java","html","spring-mvc","bootstrap-4"],"comments":[{"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"score":0,"creation_date":1680556188,"post_id":75923780,"comment_id":133915581,"body_markdown":"I hope it&#39;s legit what I just did. I believe it may help folks who struggle with this issue","body":"I hope it&#39;s legit what I just did. I believe it may help folks who struggle with this issue"}],"answers":[{"tags":[],"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680557589,"creation_date":1680556114,"answer_id":75923782,"question_id":75923780,"body_markdown":"The problem you experienced has to do with the fact that you&#39;re following a Bootstrap 5 tutorial while having a Bootstrap 4 import\r\n```html\r\n&lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js&quot;\r\n        integrity=&quot;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&quot;\r\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n```\r\nIn particular, your Bootstrap 4 script doesn&#39;t get what on earth `data-bs-toggle` is\r\n```html\r\n&lt;li class=&quot;nav-item&quot;&gt;\r\n                        &lt;a class=&quot;nav-link&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#add-new-user&quot;&gt;Add New User&lt;/a&gt;\r\n                    &lt;/li&gt;\r\n```\r\nIf you change it to `data-toggle=&quot;tab&quot;`, it&#39;ll work like a charm\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNow, if you&#39;re interested in why they changed `data-toggle` to `data-bs-toggle` in Bootstrap 5, you may want to read [this][2] commit commentary\r\n\r\n&gt; Data attributes for all JavaScript plugins are now namespaced to help distinguish Bootstrap functionality from third parties and your own code. For example, we use `data-bs-toggle` instead of `data-toggle`.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YhgZg.png\r\n  [2]: https://github.com/twbs/bootstrap/commit/b38110aa7de32ec71cec4f03342ff0c7f29f2991","title":"My Bootstrap tabs are not clickable. Why is that?","body":"<p>The problem you experienced has to do with the fact that you're following a Bootstrap 5 tutorial while having a Bootstrap 4 import</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js&quot;\n        integrity=&quot;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>In particular, your Bootstrap 4 script doesn't get what on earth <code>data-bs-toggle</code> is</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;li class=&quot;nav-item&quot;&gt;\n                        &lt;a class=&quot;nav-link&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#add-new-user&quot;&gt;Add New User&lt;/a&gt;\n                    &lt;/li&gt;\n</code></pre>\n<p>If you change it to <code>data-toggle=&quot;tab&quot;</code>, it'll work like a charm</p>\n<p><a href=\"https://i.stack.imgur.com/YhgZg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YhgZg.png\" alt=\"enter image description here\" /></a></p>\n<p>Now, if you're interested in why they changed <code>data-toggle</code> to <code>data-bs-toggle</code> in Bootstrap 5, you may want to read <a href=\"https://github.com/twbs/bootstrap/commit/b38110aa7de32ec71cec4f03342ff0c7f29f2991\" rel=\"nofollow noreferrer\">this</a> commit commentary</p>\n<blockquote>\n<p>Data attributes for all JavaScript plugins are now namespaced to help distinguish Bootstrap functionality from third parties and your own code. For example, we use <code>data-bs-toggle</code> instead of <code>data-toggle</code>.</p>\n</blockquote>\n"}],"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75923782,"answer_count":1,"score":0,"last_activity_date":1680557589,"creation_date":1680556068,"question_id":75923780,"body_markdown":"I&#39;m writing a Bootstrap website. I made some progress but occasionally face some issues I can&#39;t resolve on my own. For example, I added a set of tabs which are supposed to be interactive, but they aren&#39;t. What irks me is that my code is apparently identical to [what](https://www.w3schools.com/bootstrap5/bootstrap_navs.php) *w3schools* show. Here&#39;s my code\r\n```html\r\n&lt;!-- yes, it&#39;s tabs inside another tab --&gt;\r\n&lt;div id=&quot;admin-tab&quot; class=&quot;col-sm-11 m-1&quot;&gt;\r\n&lt;!-- I commented out this div wrap just to see whether it helps, it doesn&#39;t --&gt;\r\n&lt;!--            &lt;div class=&quot;row&quot;&gt;--&gt;\r\n                &lt;ul class=&quot;nav nav-tabs m-1&quot;&gt;\r\n                    &lt;li class=&quot;nav-item&quot;&gt;\r\n                        &lt;a class=&quot;nav-link active&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#users-table&quot;&gt;All Users&lt;/a&gt;\r\n                    &lt;/li&gt;\r\n                    &lt;li class=&quot;nav-item&quot;&gt;\r\n                        &lt;a class=&quot;nav-link&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#add-new-user&quot;&gt;Add New User&lt;/a&gt;\r\n                    &lt;/li&gt;\r\n                &lt;/ul&gt;\r\n&lt;!--            &lt;/div&gt;--&gt;\r\n            &lt;div class=&quot;tab-content&quot;&gt;\r\n                &lt;div id=&quot;users-table&quot; class=&quot;tab-pane container active table-responsive&quot;&gt;\r\n                    &lt;table class=&quot;table table-hover text-center&quot;&gt;\r\n                        &lt;!-- here goes the table --&gt;\r\n                    &lt;/table&gt;\r\n                &lt;/div&gt;\r\n                &lt;div id=&quot;add-new-user&quot; class=&quot;tab-pane container&quot;&gt;\r\n                    &lt;!-- here goes the add-new-user content --&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n```\r\nHere&#39;s *w3*&#39;s code\r\n```html\r\n&lt;!-- Nav tabs --&gt;\r\n&lt;ul class=&quot;nav nav-tabs&quot;&gt;\r\n  &lt;li class=&quot;nav-item&quot;&gt;\r\n    &lt;a class=&quot;nav-link active&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#home&quot;&gt;Home&lt;/a&gt;\r\n  &lt;/li&gt;\r\n  &lt;li class=&quot;nav-item&quot;&gt;\r\n    &lt;a class=&quot;nav-link&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#menu1&quot;&gt;Menu 1&lt;/a&gt;\r\n  &lt;/li&gt;\r\n  &lt;li class=&quot;nav-item&quot;&gt;\r\n    &lt;a class=&quot;nav-link&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#menu2&quot;&gt;Menu 2&lt;/a&gt;\r\n  &lt;/li&gt;\r\n&lt;/ul&gt;\r\n\r\n&lt;!-- Tab panes --&gt;\r\n&lt;div class=&quot;tab-content&quot;&gt;\r\n  &lt;div class=&quot;tab-pane container active&quot; id=&quot;home&quot;&gt;...&lt;/div&gt;\r\n  &lt;div class=&quot;tab-pane container fade&quot; id=&quot;menu1&quot;&gt;...&lt;/div&gt;\r\n  &lt;div class=&quot;tab-pane container fade&quot; id=&quot;menu2&quot;&gt;...&lt;/div&gt;\r\n&lt;/div&gt;\r\n```\r\nConsidering the fact that the pieces are the same, it may have something to do with my `&lt;script&gt;` imports, but Claude (a chat bot) says they are fine\r\n```html\r\n&lt;!-- I decided to show you my head element too, just in case --&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&quot;\r\n          integrity=&quot;sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T&quot; crossorigin=&quot;anonymous&quot;&gt;\r\n    &lt;title&gt;Admin Page&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;!-- some body code --&gt;\r\n&lt;script src=&quot;https://code.jquery.com/jquery-3.3.1.slim.min.js&quot;\r\n        integrity=&quot;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&quot;\r\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js&quot;\r\n        integrity=&quot;sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1&quot;\r\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n&lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js&quot;\r\n        integrity=&quot;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&quot;\r\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\r\n&lt;!-- the imports are just at the end of the body --&gt;\r\n&lt;/body&gt;\r\n```\r\n\r\nI tried double-checking my code to see how it corresponds to the *w3schools* instructions. I also checked [this](https://stackoverflow.com/questions/63045704/navigation-buttons-are-not-clickable-on-my-bootstrap-template) and [this](https://stackoverflow.com/questions/30201273/bootstrap-tabs-are-not-working) posts, but they appear outdated and (no longer) relevant\r\n\r\n**Why are my tabs not clickable and how to I fix it?**","title":"My Bootstrap tabs are not clickable. Why is that?","body":"<p>I'm writing a Bootstrap website. I made some progress but occasionally face some issues I can't resolve on my own. For example, I added a set of tabs which are supposed to be interactive, but they aren't. What irks me is that my code is apparently identical to <a href=\"https://www.w3schools.com/bootstrap5/bootstrap_navs.php\" rel=\"nofollow noreferrer\">what</a> <em>w3schools</em> show. Here's my code</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!-- yes, it's tabs inside another tab --&gt;\n&lt;div id=&quot;admin-tab&quot; class=&quot;col-sm-11 m-1&quot;&gt;\n&lt;!-- I commented out this div wrap just to see whether it helps, it doesn't --&gt;\n&lt;!--            &lt;div class=&quot;row&quot;&gt;--&gt;\n                &lt;ul class=&quot;nav nav-tabs m-1&quot;&gt;\n                    &lt;li class=&quot;nav-item&quot;&gt;\n                        &lt;a class=&quot;nav-link active&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#users-table&quot;&gt;All Users&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;li class=&quot;nav-item&quot;&gt;\n                        &lt;a class=&quot;nav-link&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#add-new-user&quot;&gt;Add New User&lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n&lt;!--            &lt;/div&gt;--&gt;\n            &lt;div class=&quot;tab-content&quot;&gt;\n                &lt;div id=&quot;users-table&quot; class=&quot;tab-pane container active table-responsive&quot;&gt;\n                    &lt;table class=&quot;table table-hover text-center&quot;&gt;\n                        &lt;!-- here goes the table --&gt;\n                    &lt;/table&gt;\n                &lt;/div&gt;\n                &lt;div id=&quot;add-new-user&quot; class=&quot;tab-pane container&quot;&gt;\n                    &lt;!-- here goes the add-new-user content --&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n<p>Here's <em>w3</em>'s code</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!-- Nav tabs --&gt;\n&lt;ul class=&quot;nav nav-tabs&quot;&gt;\n  &lt;li class=&quot;nav-item&quot;&gt;\n    &lt;a class=&quot;nav-link active&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#home&quot;&gt;Home&lt;/a&gt;\n  &lt;/li&gt;\n  &lt;li class=&quot;nav-item&quot;&gt;\n    &lt;a class=&quot;nav-link&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#menu1&quot;&gt;Menu 1&lt;/a&gt;\n  &lt;/li&gt;\n  &lt;li class=&quot;nav-item&quot;&gt;\n    &lt;a class=&quot;nav-link&quot; data-bs-toggle=&quot;tab&quot; href=&quot;#menu2&quot;&gt;Menu 2&lt;/a&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;!-- Tab panes --&gt;\n&lt;div class=&quot;tab-content&quot;&gt;\n  &lt;div class=&quot;tab-pane container active&quot; id=&quot;home&quot;&gt;...&lt;/div&gt;\n  &lt;div class=&quot;tab-pane container fade&quot; id=&quot;menu1&quot;&gt;...&lt;/div&gt;\n  &lt;div class=&quot;tab-pane container fade&quot; id=&quot;menu2&quot;&gt;...&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Considering the fact that the pieces are the same, it may have something to do with my <code>&lt;script&gt;</code> imports, but Claude (a chat bot) says they are fine</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!-- I decided to show you my head element too, just in case --&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&quot;\n          integrity=&quot;sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T&quot; crossorigin=&quot;anonymous&quot;&gt;\n    &lt;title&gt;Admin Page&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;!-- some body code --&gt;\n&lt;script src=&quot;https://code.jquery.com/jquery-3.3.1.slim.min.js&quot;\n        integrity=&quot;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js&quot;\n        integrity=&quot;sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js&quot;\n        integrity=&quot;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&quot;\n        crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n&lt;!-- the imports are just at the end of the body --&gt;\n&lt;/body&gt;\n</code></pre>\n<p>I tried double-checking my code to see how it corresponds to the <em>w3schools</em> instructions. I also checked <a href=\"https://stackoverflow.com/questions/63045704/navigation-buttons-are-not-clickable-on-my-bootstrap-template\">this</a> and <a href=\"https://stackoverflow.com/questions/30201273/bootstrap-tabs-are-not-working\">this</a> posts, but they appear outdated and (no longer) relevant</p>\n<p><strong>Why are my tabs not clickable and how to I fix it?</strong></p>\n"},{"tags":["java","spring","tomcat","thymeleaf","spring-thymeleaf"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":3,"creation_date":1680250006,"post_id":75896193,"comment_id":133869553,"body_markdown":"**bean name &#39;firstController&#39; for bean class [com.dmitryshvalev.springMVC.controllers.FirstController] conflicts with existing, non-compatible bean definition of same name and class**","body":"<b>bean name &#39;firstController&#39; for bean class [com.dmitryshvalev.springMVC.controllers.FirstController] conflicts with existing, non-compatible bean definition of same name and class</b>"},{"owner":{"account_id":28176368,"reputation":1,"user_id":21534084,"display_name":"dimathicc"},"score":0,"creation_date":1680250529,"post_id":75896193,"comment_id":133869660,"body_markdown":"but how I should fix it?","body":"but how I should fix it?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1680251949,"post_id":75896193,"comment_id":133869996,"body_markdown":"Find out: why you have 2? Do you need 2? (If so maybe name it differently!?)","body":"Find out: why you have 2? Do you need 2? (If so maybe name it differently!?)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1680252068,"post_id":75896193,"comment_id":133870025,"body_markdown":"(I &quot;guess&quot;) one is &quot;component-scanned&quot;, the other  (obviously) in `/WEB-INF/applicationContextMVC.xml`","body":"(I &quot;guess&quot;) one is &quot;component-scanned&quot;, the other  (obviously) in <code>&#47;WEB-INF&#47;applicationContextMVC.xml</code>"}],"answers":[{"tags":[],"owner":{"account_id":28206878,"reputation":1,"user_id":21559829,"display_name":"art sem"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680557464,"creation_date":1680557464,"answer_id":75923924,"question_id":75896193,"body_markdown":"Check /target/project_name/WEB-INF folders and delete conflicted files were created early. helped me with same problem","title":"Servlet.init() for servlet dispatcher threw exception","body":"<p>Check /target/project_name/WEB-INF folders and delete conflicted files were created early. helped me with same problem</p>\n"}],"owner":{"account_id":28176368,"reputation":1,"user_id":21534084,"display_name":"dimathicc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680557464,"creation_date":1680249913,"question_id":75896193,"body_markdown":"I&#39;ve started a server and main page shows correctly, but when i go to other tabs nothing works and throws an error `&quot;Servlet.init() for servlet dispatcher threw exception&quot;.`\r\n\r\n\r\n\r\n    HTTP Status 500 – Internal Server Error\r\n    \r\n    Type Exception Report\r\n    \r\n    Message Servlet.init() for servlet [dispatcher] threw exception\r\n    \r\n    Description The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n    \r\n    Exception\r\n    \r\n    jakarta.servlet.ServletException: Servlet.init() для сервлета [dispatcher] throw an exception\r\n    \torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\r\n    \torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n    \torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:676)\r\n    \torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\r\n    \torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\r\n    \torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n    \torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\r\n    \torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1742)\r\n    \torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n    \torg.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \torg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\r\n    \torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tjava.base/java.lang.Thread.run(Thread.java:833)\r\n    Root Cause\r\n    \r\n    org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/applicationContextMVC.xml]\r\n    \torg.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:417)\r\n    \torg.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:338)\r\n    \torg.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)\r\n    \torg.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:184)\r\n    \torg.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:220)\r\n    \torg.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:191)\r\n    \torg.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\r\n    \torg.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\r\n    \torg.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\r\n    \torg.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:672)\r\n    \torg.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554)\r\n    \torg.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:706)\r\n    \torg.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:672)\r\n    \torg.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:720)\r\n    \torg.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:595)\r\n    \torg.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537)\r\n    \torg.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\r\n    \tjakarta.servlet.GenericServlet.init(GenericServlet.java:158)\r\n    \tjakarta.servlet.http.HttpServlet.init(HttpServlet.java:125)\r\n    \torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\r\n    \torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n    \torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:676)\r\n    \torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\r\n    \torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\r\n    \torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n    \torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\r\n    \torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1742)\r\n    \torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n    \torg.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \torg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\r\n    \torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tjava.base/java.lang.Thread.run(Thread.java:833)\r\n    Root Cause\r\n    \r\n    org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name &#39;firstController&#39; for bean class [com.dmitryshvalev.springMVC.controllers.FirstController] conflicts with existing, non-compatible bean definition of same name and class [com.dmitryshvalev.springMVC.config.controllers.FirstController]\r\n    \torg.springframework.context.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPathBeanDefinitionScanner.java:349)\r\n    \torg.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:287)\r\n    \torg.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:90)\r\n    \torg.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)\r\n    \torg.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1390)\r\n    \torg.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1370)\r\n    \torg.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:178)\r\n    \torg.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:149)\r\n    \torg.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:96)\r\n    \torg.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:511)\r\n    \torg.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:391)\r\n    \torg.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:338)\r\n    \torg.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)\r\n    \torg.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:184)\r\n    \torg.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:220)\r\n    \torg.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:191)\r\n    \torg.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\r\n    \torg.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\r\n    \torg.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\r\n    \torg.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:672)\r\n    \torg.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554)\r\n    \torg.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:706)\r\n    \torg.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:672)\r\n    \torg.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:720)\r\n    \torg.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:595)\r\n    \torg.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537)\r\n    \torg.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\r\n    \tjakarta.servlet.GenericServlet.init(GenericServlet.java:158)\r\n    \tjakarta.servlet.http.HttpServlet.init(HttpServlet.java:125)\r\n    \torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\r\n    \torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n    \torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:676)\r\n    \torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\r\n    \torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\r\n    \torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n    \torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\r\n    \torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1742)\r\n    \torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n    \torg.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \torg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\r\n    \torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tjava.base/java.lang.Thread.run(Thread.java:833)\r\n    Note The full stack trace of the root cause is available in the server logs.","title":"Servlet.init() for servlet dispatcher threw exception","body":"<p>I've started a server and main page shows correctly, but when i go to other tabs nothing works and throws an error <code>&quot;Servlet.init() for servlet dispatcher threw exception&quot;.</code></p>\n<pre><code>HTTP Status 500 – Internal Server Error\n\nType Exception Report\n\nMessage Servlet.init() for servlet [dispatcher] threw exception\n\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\n\nException\n\njakarta.servlet.ServletException: Servlet.init() для сервлета [dispatcher] throw an exception\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:676)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1742)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.base/java.lang.Thread.run(Thread.java:833)\nRoot Cause\n\norg.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/applicationContextMVC.xml]\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:417)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:338)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:184)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:220)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:191)\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\n    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\n    org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:672)\n    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554)\n    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:706)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:672)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:720)\n    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:595)\n    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537)\n    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\n    jakarta.servlet.GenericServlet.init(GenericServlet.java:158)\n    jakarta.servlet.http.HttpServlet.init(HttpServlet.java:125)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:676)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1742)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.base/java.lang.Thread.run(Thread.java:833)\nRoot Cause\n\norg.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'firstController' for bean class [com.dmitryshvalev.springMVC.controllers.FirstController] conflicts with existing, non-compatible bean definition of same name and class [com.dmitryshvalev.springMVC.config.controllers.FirstController]\n    org.springframework.context.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPathBeanDefinitionScanner.java:349)\n    org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:287)\n    org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:90)\n    org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)\n    org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1390)\n    org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1370)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:178)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:149)\n    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:96)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:511)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:391)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:338)\n    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:184)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:220)\n    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:191)\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\n    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\n    org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:672)\n    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554)\n    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:706)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:672)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:720)\n    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:595)\n    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537)\n    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169)\n    jakarta.servlet.GenericServlet.init(GenericServlet.java:158)\n    jakarta.servlet.http.HttpServlet.init(HttpServlet.java:125)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:676)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1742)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.base/java.lang.Thread.run(Thread.java:833)\nNote The full stack trace of the root cause is available in the server logs.\n</code></pre>\n"},{"tags":["java","intellij-idea","dto","mapstruct","mapper"],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1680533555,"creation_date":1680533555,"answer_id":75920814,"question_id":75920292,"body_markdown":"The installation of [Mapstruct Support][1] plugin, which provides code completion and other features for projects that use Mapstruct, was the solution in my case.\r\n\r\n\r\n  [1]: https://plugins.jetbrains.com/plugin/10036-mapstruct-support","title":"Mapstruct &quot;Can&#39;t find related attribute&quot;","body":"<p>The installation of <a href=\"https://plugins.jetbrains.com/plugin/10036-mapstruct-support\" rel=\"nofollow noreferrer\">Mapstruct Support</a> plugin, which provides code completion and other features for projects that use Mapstruct, was the solution in my case.</p>\n"}],"owner":{"account_id":18117686,"reputation":198,"user_id":13174149,"display_name":"Charlo Poitras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75920814,"answer_count":1,"score":4,"last_activity_date":1680557428,"creation_date":1680530343,"question_id":75920292,"body_markdown":"I have this Mapper class, I&#39;m trying to combine all tree objects into a single Dto for a the view to use the Dto object :\r\n```java\r\n@Mapping(source = &quot;childSeat.id&quot;, target = &quot;childSeatId&quot;)\r\n@Mapping(source = &quot;childSeatCol.id&quot;, target = &quot;childSeatColId&quot;)\r\n@Mapping(source = &quot;dummyCollision.id&quot;, target = &quot;dummyCollisionId&quot;)\r\nListeDePositionsUniquesDto toDTO(ChildSeat childSeat, ChildSeatCol childSeatCol, DummyCollision dummyCollision);\r\n```\r\nHere is a screenshot from the IDE : [![Ide screenshot][1]][1]\r\nWhen I hover the source error it says : `Can&#39;t find related attribute` \\\r\nHere are my dependencies :\r\n```xml\r\n&lt;!-- MapStruct + Lombok --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;${org.projectlombok.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n...\r\n    &lt;build&gt;\r\n       ...\r\n                    &lt;annotationProcessorPaths&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;${org.projectlombok.version}&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;!-- other annotation processors --&gt;\r\n                        &lt;!-- additional annotation processor required as of Lombok 1.18.16 --&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n                            &lt;version&gt;0.2.0&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                    &lt;/annotationProcessorPaths&gt;\r\n                ...\r\n    &lt;/build&gt;\r\n```\r\n\r\nI&#39;m using Java 1.8, Intellj Idea Utilmate\r\n\r\n  [1]: https://i.stack.imgur.com/2XooD.png","title":"Mapstruct &quot;Can&#39;t find related attribute&quot;","body":"<p>I have this Mapper class, I'm trying to combine all tree objects into a single Dto for a the view to use the Dto object :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapping(source = &quot;childSeat.id&quot;, target = &quot;childSeatId&quot;)\n@Mapping(source = &quot;childSeatCol.id&quot;, target = &quot;childSeatColId&quot;)\n@Mapping(source = &quot;dummyCollision.id&quot;, target = &quot;dummyCollisionId&quot;)\nListeDePositionsUniquesDto toDTO(ChildSeat childSeat, ChildSeatCol childSeatCol, DummyCollision dummyCollision);\n</code></pre>\n<p>Here is a screenshot from the IDE : <a href=\"https://i.stack.imgur.com/2XooD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2XooD.png\" alt=\"Ide screenshot\" /></a>\nWhen I hover the source error it says : <code>Can't find related attribute</code> <br />\nHere are my dependencies :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- MapStruct + Lombok --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${org.projectlombok.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n...\n    &lt;build&gt;\n       ...\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${org.projectlombok.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;!-- other annotation processors --&gt;\n                        &lt;!-- additional annotation processor required as of Lombok 1.18.16 --&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                            &lt;version&gt;0.2.0&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                ...\n    &lt;/build&gt;\n</code></pre>\n<p>I'm using Java 1.8, Intellj Idea Utilmate</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1647029160,"post_id":71438522,"comment_id":126278806,"body_markdown":"Capabilities are deprecated so you might check if chromeoptions has a similar method.  Caps are still available, but the get method might only be for remotedrivers.  (similar to &quot;hascdp&quot;.. this method needs &quot;hascasting&quot; methinks...)  Remotewebdriver is the super-type, so when you choose &quot;Chromedriver&quot; it&#39;ll be set without that option?  I&#39;m not sure &quot;bundleID&quot; has anything to do with Chrome anyway... what is that used for?","body":"Capabilities are deprecated so you might check if chromeoptions has a similar method.  Caps are still available, but the get method might only be for remotedrivers.  (similar to &quot;hascdp&quot;.. this method needs &quot;hascasting&quot; methinks...)  Remotewebdriver is the super-type, so when you choose &quot;Chromedriver&quot; it&#39;ll be set without that option?  I&#39;m not sure &quot;bundleID&quot; has anything to do with Chrome anyway... what is that used for?"},{"owner":{"account_id":24526571,"reputation":11,"user_id":18438955,"display_name":"Llu&#237;s Ramon Armengol Xandri"},"score":1,"creation_date":1647360190,"post_id":71438522,"comment_id":126349099,"body_markdown":"Hi, thanks for your answer! About the bundleID, I&#39;m not sure about what is used for, but the thing is it fails when it does the .toMap() (capabilities is null no that&#39;s why it fails and throws the exception).\nI also noticed that the capabilities are deprecated, but taking a look at the code, even if I use Chromeoptions, internally it casts them to capabilities.","body":"Hi, thanks for your answer! About the bundleID, I&#39;m not sure about what is used for, but the thing is it fails when it does the .toMap() (capabilities is null no that&#39;s why it fails and throws the exception). I also noticed that the capabilities are deprecated, but taking a look at the code, even if I use Chromeoptions, internally it casts them to capabilities."}],"owner":{"account_id":24526571,"reputation":11,"user_id":18438955,"display_name":"Llu&#237;s Ramon Armengol Xandri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680557177,"creation_date":1647001687,"question_id":71438522,"body_markdown":"I&#39;m upgrading the selenium version for my project (from 3.14 to 4.1.2) and I&#39;m having trouble executing the tests locally. I can only reproduce this issue with version 4; if I change to version 3, everything works as expected.\r\n\r\nWhen executing the test, the driver starts, but it fails due to a NullPointerException. After debugging a little bit, I saw that it failed doing ```webDriver.getCapabilities().asMap().get(&quot;bundleID&quot;)```\r\non the method *getProjectType(RemoteWebDriver)* on *WebDriverInstance.java* because &quot;capabilites&quot; field was null.\r\n\r\nWith version 3, this field has values, but in version 4 the values are stored in another field, called &quot;RemoteWebDriver.capabilities&quot;.\r\n\r\nTo create the driver, I simply do it like this:\r\n\r\n```driver = new ChromeDriver();```\r\n\r\nor passing by some already created ChromeOptions (incognito window, no cookies, etc.).\r\n\r\nI&#39;m not having any issues regarding the remote execution, however. Here&#39;s how I do it:\r\n\r\n```driver = new RemoteWebDriver(url, driverOptions);```\r\n\r\nWhere driverOptions are the same used for locally.\r\n\r\nDoes anybody know what I&#39;m doing wrong? It happens with Firefox browser too.","title":"Can&#39;t init webDriver locally with Selenium 4.1.2","body":"<p>I'm upgrading the selenium version for my project (from 3.14 to 4.1.2) and I'm having trouble executing the tests locally. I can only reproduce this issue with version 4; if I change to version 3, everything works as expected.</p>\n<p>When executing the test, the driver starts, but it fails due to a NullPointerException. After debugging a little bit, I saw that it failed doing <code>webDriver.getCapabilities().asMap().get(&quot;bundleID&quot;)</code>\non the method <em>getProjectType(RemoteWebDriver)</em> on <em>WebDriverInstance.java</em> because &quot;capabilites&quot; field was null.</p>\n<p>With version 3, this field has values, but in version 4 the values are stored in another field, called &quot;RemoteWebDriver.capabilities&quot;.</p>\n<p>To create the driver, I simply do it like this:</p>\n<p><code>driver = new ChromeDriver();</code></p>\n<p>or passing by some already created ChromeOptions (incognito window, no cookies, etc.).</p>\n<p>I'm not having any issues regarding the remote execution, however. Here's how I do it:</p>\n<p><code>driver = new RemoteWebDriver(url, driverOptions);</code></p>\n<p>Where driverOptions are the same used for locally.</p>\n<p>Does anybody know what I'm doing wrong? It happens with Firefox browser too.</p>\n"},{"tags":["java","spring","maven","sybase","sqlanywhere"],"answers":[{"comments":[{"owner":{"account_id":17128384,"reputation":53,"user_id":12395021,"display_name":"Arjun G"},"score":0,"creation_date":1680573073,"post_id":75923850,"comment_id":133917455,"body_markdown":"Thank you for the info, I&#39;ll try it out, could you also tell me what jar file I should install and what the maven dependency in my pom should be? Cause when I try to do an import to check if it&#39;s being picked up by pom as expected, it doesn&#39;t do it. Even com.sybase.","body":"Thank you for the info, I&#39;ll try it out, could you also tell me what jar file I should install and what the maven dependency in my pom should be? Cause when I try to do an import to check if it&#39;s being picked up by pom as expected, it doesn&#39;t do it. Even com.sybase."}],"tags":[],"owner":{"account_id":28200974,"reputation":57,"user_id":21554764,"display_name":"Milind Vedi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680556774,"creation_date":1680556774,"answer_id":75923850,"question_id":75916773,"body_markdown":"In getServiceStatuses(){}\r\nuse \r\n&gt;Class.forName(&quot;com.sybase.jdbc4.sqlanywhere.SQLAnywhereDriver&quot;);\r\n//for registering\r\n\r\nFor the second question : Sybase Central is no longer included in the SQL Anywhere 17 package.\r\nSo, try using third party database management tools or command line tools.","title":"Unable to use SQL Anywhere Sybase packages for Java + SQL Anywhere 17 does not install Sybase Central in any systems","body":"<p>In getServiceStatuses(){}\nuse</p>\n<blockquote>\n<p>Class.forName(&quot;com.sybase.jdbc4.sqlanywhere.SQLAnywhereDriver&quot;);\n//for registering</p>\n</blockquote>\n<p>For the second question : Sybase Central is no longer included in the SQL Anywhere 17 package.\nSo, try using third party database management tools or command line tools.</p>\n"}],"owner":{"account_id":17128384,"reputation":53,"user_id":12395021,"display_name":"Arjun G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680556774,"creation_date":1680505265,"question_id":75916773,"body_markdown":"There are two parts to this question. \r\n\r\nI have been trying to install and test SQL Anywhere Sybase connection using an existing project in Eclipse. I did the following:\r\n\r\n- Installed SQL Anywhere 17\r\n- Navigated to the SQL Anywhere 17 Java folder and used the following command to install `sajdbc4.jar`:\r\n\r\n  ```bash\r\n  mvn install:install-file -Dfile=&lt;path/to/sajdbc4.jar&gt; -DgroupId=com.sqlanywhere -DartifactId=sajdbc4 -Dversion=17.0.0 -Dpackaging=jar\r\n  ```\r\n- Added the following POM dependency:\r\n\r\n  ```xml \t\t\r\n  &lt;dependency&gt;\r\n\t&lt;groupId&gt;com.sqlanywhere&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;sajdbc4&lt;/artifactId&gt;\r\n\t&lt;version&gt;17.0.0&lt;/version&gt; \t\t\r\n  &lt;/dependency&gt; \r\n  ``` \r\n\r\n- Tried importing:\r\n    \r\n  `com.sqlanywhere.jdbc4.sqlanywhere.SQLAnywhereDriver`\r\n\r\n  But It gave me a &quot;Cannot be resolved&quot; error\r\n\r\n- Tried ```mvn clean install```, it didn&#39;t work.\r\n   \r\nThis is my code:\r\n```java\r\npublic Map&lt;String,String&gt; getServiceStatuses() throws Exception {\r\n\tvar obj = new HashMap&lt;String,String&gt;();\r\n\tobj.put(&quot;status&quot;,&quot;success&quot;);\r\n   \r\n    Connection conn = null;\r\n    Statement stmt = null;\r\n    try{\r\n      //STEP 2: Register JDBC driver\r\n      Class.forName(&quot;com.sqlanywhere.jdbc4.sqlanywhere&quot;);\r\n     \r\n\t  //STEP 3: Open a connection\r\n      System.out.println(&quot;Connecting to database...&quot;);\r\n      DriverManager.setLoginTimeout(10);\r\n      conn = DriverManager.getConnection(&quot;jdbc:sqlanywhere:uid=abc;pwd=def;eng=xyz&quot;);\r\n      if(conn.isClosed()) {\r\n    \t  System.out.println(&quot;This is closed&quot;);\r\n      } else {\r\n    \t  System.out.println(&quot;This is open&quot;);\r\n      }\r\n      \r\n   } catch(Exception e) {\r\n\t   e.printStackTrace();\r\n   }\r\n   \r\n   return obj;\r\n}\r\n```\r\nNow using this code I haven&#39;t been able to test a SQL Anywhere Sybase driver yet, which brings me to my second question.\r\n\r\nWhen I installed SQL Anywhere 17, Sybase Central, which is required to setup a Sybase SQL Anywhere server in my local didn&#39;t get installed. I tried installing SQL Anywhere 17 in a different machine and it still wouldn&#39;t install Sybase Central. I downloaded the trial version by logging in to their website. I installed the developer  version. I uninstalled and reinstalled and &quot;Custom&quot; this time which still didn&#39;t show the Sybase Central option. I couldn&#39;t find anything helpful online pertaining to this\r\n   \r\nSorry about the horrible formatting, if someone can help me with this it would be great. I am not sure if I installed sajdbc4 within the local mvn repo the right way and I have no way of testing this since I couldn&#39;t install Sybase Central. \r\n","title":"Unable to use SQL Anywhere Sybase packages for Java + SQL Anywhere 17 does not install Sybase Central in any systems","body":"<p>There are two parts to this question.</p>\n<p>I have been trying to install and test SQL Anywhere Sybase connection using an existing project in Eclipse. I did the following:</p>\n<ul>\n<li><p>Installed SQL Anywhere 17</p>\n</li>\n<li><p>Navigated to the SQL Anywhere 17 Java folder and used the following command to install <code>sajdbc4.jar</code>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn install:install-file -Dfile=&lt;path/to/sajdbc4.jar&gt; -DgroupId=com.sqlanywhere -DartifactId=sajdbc4 -Dversion=17.0.0 -Dpackaging=jar\n</code></pre>\n</li>\n<li><p>Added the following POM dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.sqlanywhere&lt;/groupId&gt;\n  &lt;artifactId&gt;sajdbc4&lt;/artifactId&gt;\n  &lt;version&gt;17.0.0&lt;/version&gt;       \n&lt;/dependency&gt; \n</code></pre>\n</li>\n<li><p>Tried importing:</p>\n<p><code>com.sqlanywhere.jdbc4.sqlanywhere.SQLAnywhereDriver</code></p>\n<p>But It gave me a &quot;Cannot be resolved&quot; error</p>\n</li>\n<li><p>Tried <code>mvn clean install</code>, it didn't work.</p>\n</li>\n</ul>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Map&lt;String,String&gt; getServiceStatuses() throws Exception {\n    var obj = new HashMap&lt;String,String&gt;();\n    obj.put(&quot;status&quot;,&quot;success&quot;);\n   \n    Connection conn = null;\n    Statement stmt = null;\n    try{\n      //STEP 2: Register JDBC driver\n      Class.forName(&quot;com.sqlanywhere.jdbc4.sqlanywhere&quot;);\n     \n      //STEP 3: Open a connection\n      System.out.println(&quot;Connecting to database...&quot;);\n      DriverManager.setLoginTimeout(10);\n      conn = DriverManager.getConnection(&quot;jdbc:sqlanywhere:uid=abc;pwd=def;eng=xyz&quot;);\n      if(conn.isClosed()) {\n          System.out.println(&quot;This is closed&quot;);\n      } else {\n          System.out.println(&quot;This is open&quot;);\n      }\n      \n   } catch(Exception e) {\n       e.printStackTrace();\n   }\n   \n   return obj;\n}\n</code></pre>\n<p>Now using this code I haven't been able to test a SQL Anywhere Sybase driver yet, which brings me to my second question.</p>\n<p>When I installed SQL Anywhere 17, Sybase Central, which is required to setup a Sybase SQL Anywhere server in my local didn't get installed. I tried installing SQL Anywhere 17 in a different machine and it still wouldn't install Sybase Central. I downloaded the trial version by logging in to their website. I installed the developer  version. I uninstalled and reinstalled and &quot;Custom&quot; this time which still didn't show the Sybase Central option. I couldn't find anything helpful online pertaining to this</p>\n<p>Sorry about the horrible formatting, if someone can help me with this it would be great. I am not sure if I installed sajdbc4 within the local mvn repo the right way and I have no way of testing this since I couldn't install Sybase Central.</p>\n"},{"tags":["java","optaplanner","recurrence"],"answers":[{"tags":[],"owner":{"account_id":13441459,"reputation":1433,"user_id":9698517,"display_name":"Christopher Chianelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680556648,"creation_date":1680556648,"answer_id":75923843,"question_id":75919550,"body_markdown":"One way to do it is to create a new class, `EmployeeAvailabilityPattern`, which have a method, `appliesToShift(Shift)`, which return true if the Shift matches the availability pattern, false otherwise.\r\nThen the constraint that matches `EmployeeAvailabilityPattern` would look like this:\r\n\r\n```java\r\nprivate static BiConstraintStream&lt;EmployeeAvailabilityPattern, Shift&gt; getConstraintStreamWithAvailabilityPatternIntersections(\r\n            ConstraintFactory constraintFactory, EmployeeAvailabilityState employeeAvailabilityState) {\r\n    return constraintFactory.forEach(EmployeeAvailabilityPattern.class)\r\n        .filter(pattern -&gt; pattern.getState() == employeeAvailabilityState)\r\n        .join(Shift.class,\r\n              equal(EmployeeAvailabilityPattern::getEmployee, Shift::getEmployee))\r\n        .filter((pattern, shift) -&gt; pattern.appliesToShift(shift));\r\n}\r\n\r\nConstraint unavailablePatternEmployeeTimeSlot(ConstraintFactory constraintFactory) {\r\n    return getConstraintStreamWithAvailabilityPatternIntersections(constraintFactory, UNAVAILABLE)\r\n               .penalizeConfigurableLong(CONSTRAINT_UNAVAILABLE_TIME_SLOT_FOR_AN_EMPLOYEE,\r\n                        ((employeeAvailability, shift) -&gt; shift.getLengthInMinutes()));\r\n}\r\n```","title":"How can I handle Recurring Availability in Optaplanner?","body":"<p>One way to do it is to create a new class, <code>EmployeeAvailabilityPattern</code>, which have a method, <code>appliesToShift(Shift)</code>, which return true if the Shift matches the availability pattern, false otherwise.\nThen the constraint that matches <code>EmployeeAvailabilityPattern</code> would look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static BiConstraintStream&lt;EmployeeAvailabilityPattern, Shift&gt; getConstraintStreamWithAvailabilityPatternIntersections(\n            ConstraintFactory constraintFactory, EmployeeAvailabilityState employeeAvailabilityState) {\n    return constraintFactory.forEach(EmployeeAvailabilityPattern.class)\n        .filter(pattern -&gt; pattern.getState() == employeeAvailabilityState)\n        .join(Shift.class,\n              equal(EmployeeAvailabilityPattern::getEmployee, Shift::getEmployee))\n        .filter((pattern, shift) -&gt; pattern.appliesToShift(shift));\n}\n\nConstraint unavailablePatternEmployeeTimeSlot(ConstraintFactory constraintFactory) {\n    return getConstraintStreamWithAvailabilityPatternIntersections(constraintFactory, UNAVAILABLE)\n               .penalizeConfigurableLong(CONSTRAINT_UNAVAILABLE_TIME_SLOT_FOR_AN_EMPLOYEE,\n                        ((employeeAvailability, shift) -&gt; shift.getLengthInMinutes()));\n}\n</code></pre>\n"}],"owner":{"account_id":8773500,"reputation":95,"user_id":6559455,"display_name":"kronaemmanuel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680556648,"creation_date":1680525307,"question_id":75919550,"body_markdown":"I working off of the Optaweb (currently discontinued) platform, and I have an `EmployeeAvailability` class where I can define a `startDateTime` and an `endDateTime` and the state (one of the following: `UNAVAILABLE`, `UNDESIRED`, `DESIRED`). However these are singular events. What I want is for the `EmployeeAvailability` to be a recurring event. Where I can define its recurrence (e.g. every Friday) and then it automatically handles that when planning shifts. How can I do that? I&#39;m not looking for very specific instructions, but higher level understanding of how this could be done.\r\n\r\nFor now, I have tried solving this by setting a flag `isRecurring` on each `EmployeeAvailability` and then when I&#39;m planning the next week, I run a function to duplicate all `EmployeeAvailability` with `isRecurring == True` in the past week. This works for weekly recurrences, but its a pretty manual process.\r\n\r\nIdeally, I would want:\r\n\r\n- Ability to define any recurrence pattern (weekly, monthly, daily etc). Perhaps I can store recurrence via https://www.kanzaki.com/docs/ical/rrule.html\r\n- Not have individual `EmployeeAvailability` objects in database, instead just have one object which defines the recurrence pattern. This object can be then converted into individual objects when they need to be shown on the frontend OR when they need to be solved by the solver?? I&#39;m going off of the recommendation of this: https://github.com/bmoeskau/Extensible/blob/master/recurrence-overview.md\r\n\r\n","title":"How can I handle Recurring Availability in Optaplanner?","body":"<p>I working off of the Optaweb (currently discontinued) platform, and I have an <code>EmployeeAvailability</code> class where I can define a <code>startDateTime</code> and an <code>endDateTime</code> and the state (one of the following: <code>UNAVAILABLE</code>, <code>UNDESIRED</code>, <code>DESIRED</code>). However these are singular events. What I want is for the <code>EmployeeAvailability</code> to be a recurring event. Where I can define its recurrence (e.g. every Friday) and then it automatically handles that when planning shifts. How can I do that? I'm not looking for very specific instructions, but higher level understanding of how this could be done.</p>\n<p>For now, I have tried solving this by setting a flag <code>isRecurring</code> on each <code>EmployeeAvailability</code> and then when I'm planning the next week, I run a function to duplicate all <code>EmployeeAvailability</code> with <code>isRecurring == True</code> in the past week. This works for weekly recurrences, but its a pretty manual process.</p>\n<p>Ideally, I would want:</p>\n<ul>\n<li>Ability to define any recurrence pattern (weekly, monthly, daily etc). Perhaps I can store recurrence via <a href=\"https://www.kanzaki.com/docs/ical/rrule.html\" rel=\"nofollow noreferrer\">https://www.kanzaki.com/docs/ical/rrule.html</a></li>\n<li>Not have individual <code>EmployeeAvailability</code> objects in database, instead just have one object which defines the recurrence pattern. This object can be then converted into individual objects when they need to be shown on the frontend OR when they need to be solved by the solver?? I'm going off of the recommendation of this: <a href=\"https://github.com/bmoeskau/Extensible/blob/master/recurrence-overview.md\" rel=\"nofollow noreferrer\">https://github.com/bmoeskau/Extensible/blob/master/recurrence-overview.md</a></li>\n</ul>\n"},{"tags":["java","automation","appium","ui-automation","appium-ios"],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680556556,"creation_date":1680556556,"answer_id":75923834,"question_id":75890552,"body_markdown":"Use `PageFactory.initElements(driver, this);`\r\n\r\n instead of `PageFactory.initElements(new AppiumFieldDecorator(driver), \r\nthis);\r\n\r\nAlso import org.openqa.selenium.support.FindBy instead of iOSXCUITFindBy\r\n\r\nThis worked for me.","title":"java.lang.NoSuchMethodException: jdk.proxy2.$Proxy40.proxyClassLookup()","body":"<p>Use <code>PageFactory.initElements(driver, this);</code></p>\n<p>instead of `PageFactory.initElements(new AppiumFieldDecorator(driver),\nthis);</p>\n<p>Also import org.openqa.selenium.support.FindBy instead of iOSXCUITFindBy</p>\n<p>This worked for me.</p>\n"}],"owner":{"account_id":28170358,"reputation":1,"user_id":21529023,"display_name":"nef"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680556556,"creation_date":1680192215,"question_id":75890552,"body_markdown":"I am getting the error message &quot;java.lang.RuntimeException: java.lang.NoSuchMethodException: jdk.proxy2.$Proxy40.proxyClassLookup()&quot; when running a test from the command line using the command &quot;-Dtest=ms.testProject.tests.package1.testClass#test1&quot;\r\n\r\n\r\n```\r\n&lt;compiler.version&gt;1.8&lt;/compiler.version&gt;\r\n&lt;maven.surefire.version&gt;3.0.0-M5&lt;/maven.surefire.version&gt;\r\n&lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\r\n&lt;appium.version&gt;7.6.0&lt;/appium.version&gt;\r\n&lt;testng.version&gt;7.3.0&lt;/testng.version&gt;\r\n```\r\n\r\n\r\n```\r\npublic BasePage(AppiumDriver&lt;MobileElement&gt; driver) {\r\n    PageFactory.initElements(new AppiumFieldDecorator(driver), this);\r\n    this.driver = driver;\r\n}\r\n```\r\n\r\n I am using @iOSXCUITFindBy annotations\r\n\r\njDK 1.8\r\n\r\n\r\nI tried changing the JDK version, Maven-Surefire, but nothing helped. When upgrading the Appium version, old annotations are no longer supported, and there are several related issues. Please share your solutions if you have experienced similar problems","title":"java.lang.NoSuchMethodException: jdk.proxy2.$Proxy40.proxyClassLookup()","body":"<p>I am getting the error message &quot;java.lang.RuntimeException: java.lang.NoSuchMethodException: jdk.proxy2.$Proxy40.proxyClassLookup()&quot; when running a test from the command line using the command &quot;-Dtest=ms.testProject.tests.package1.testClass#test1&quot;</p>\n<pre><code>&lt;compiler.version&gt;1.8&lt;/compiler.version&gt;\n&lt;maven.surefire.version&gt;3.0.0-M5&lt;/maven.surefire.version&gt;\n&lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n&lt;appium.version&gt;7.6.0&lt;/appium.version&gt;\n&lt;testng.version&gt;7.3.0&lt;/testng.version&gt;\n</code></pre>\n<pre><code>public BasePage(AppiumDriver&lt;MobileElement&gt; driver) {\n    PageFactory.initElements(new AppiumFieldDecorator(driver), this);\n    this.driver = driver;\n}\n</code></pre>\n<p>I am using @iOSXCUITFindBy annotations</p>\n<p>jDK 1.8</p>\n<p>I tried changing the JDK version, Maven-Surefire, but nothing helped. When upgrading the Appium version, old annotations are no longer supported, and there are several related issues. Please share your solutions if you have experienced similar problems</p>\n"},{"tags":["java","eclipse","spring","class","package"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1464211366,"post_id":37447721,"comment_id":62397569,"body_markdown":"the package is ```com.ant.car``` so what is the main class? Or is that actually ```car```?","body":"the package is <code>com.ant.car</code> so what is the main class? Or is that actually <code>car</code>?"},{"owner":{"account_id":211013,"reputation":840,"user_id":6258497,"display_name":"Eric Swanson"},"score":1,"creation_date":1531325796,"post_id":37447721,"comment_id":89557945,"body_markdown":"None of these worked for me. I&#39;m still working toward a solution. I deleted `./metadata` (entirely resets STS settings by the way), `./bin`, `./build`, running `./gradlew clean`, re-running `./gradlew build`, checking build paths and looking for main class in run configurations (doesn&#39;t seem to exist in Gradle projects), and restarting STS. I&#39;ve tried a few combinations and variations of the above. I CAN run `./gradle bootRun` outside of STS/Eclipse perfectly fine. :(","body":"None of these worked for me. I&#39;m still working toward a solution. I deleted <code>.&#47;metadata</code> (entirely resets STS settings by the way), <code>.&#47;bin</code>, <code>.&#47;build</code>, running <code>.&#47;gradlew clean</code>, re-running <code>.&#47;gradlew build</code>, checking build paths and looking for main class in run configurations (doesn&#39;t seem to exist in Gradle projects), and restarting STS. I&#39;ve tried a few combinations and variations of the above. I CAN run <code>.&#47;gradle bootRun</code> outside of STS/Eclipse perfectly fine. :("},{"owner":{"account_id":2205706,"reputation":3110,"user_id":1964277,"accept_rate":65,"display_name":"rupweb"},"score":1,"creation_date":1579787483,"post_id":37447721,"comment_id":105889401,"body_markdown":"@EricSwanson same for me I had to remove the project from eclipse, remove the .classpath and meta project directories, remove build directory and import the gradle project back into eclipse. Then it started working again... it wasn&#39;t a build.gradle dependency issue.","body":"@EricSwanson same for me I had to remove the project from eclipse, remove the .classpath and meta project directories, remove build directory and import the gradle project back into eclipse. Then it started working again... it wasn&#39;t a build.gradle dependency issue."}],"answers":[{"tags":[],"owner":{"account_id":4453455,"reputation":56,"user_id":3624540,"display_name":"user3624540"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464211406,"creation_date":1464211406,"answer_id":37447864,"question_id":37447721,"body_markdown":"The Error &quot;Could not find or load main class com.ant.car&quot; occur when your class is not in build path. please make sure that .class file is generated and it&#39;s in build path ..","title":"Could not find or load main class in STS/Eclipse","body":"<p>The Error \"Could not find or load main class com.ant.car\" occur when your class is not in build path. please make sure that .class file is generated and it's in build path ..</p>\n"},{"comments":[{"owner":{"account_id":4448460,"reputation":130,"user_id":3621120,"display_name":"szaroblekitny"},"score":1,"creation_date":1544195289,"post_id":37464370,"comment_id":94201648,"body_markdown":"For me it is too far-reaching change, because I lost the whole workspace configuration.","body":"For me it is too far-reaching change, because I lost the whole workspace configuration."}],"tags":[],"owner":{"account_id":3151445,"reputation":2418,"user_id":2664815,"accept_rate":100,"display_name":"aCarella"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1464274431,"creation_date":1464274431,"answer_id":37464370,"question_id":37447721,"body_markdown":"The solution to this was the following:\r\n\r\n - Close Eclipse/STS\r\n - Use a file explorer on your operating system to navigate to your workspace (In my case, I&#39;m on Windows so I used Windows Explorer)\r\n - Delete the `.metadata` directory (or to be safe, copy the directory somewhere else to be safe, then delete it)\r\n - Restart Eclipse/STS\r\n\r\nIs there a more improved answer than this? I don&#39;t want to look like I&#39;m trying to boost my own reputation points, so if someone can provide a better answer then please do so.","title":"Could not find or load main class in STS/Eclipse","body":"<p>The solution to this was the following:</p>\n\n<ul>\n<li>Close Eclipse/STS</li>\n<li>Use a file explorer on your operating system to navigate to your workspace (In my case, I'm on Windows so I used Windows Explorer)</li>\n<li>Delete the <code>.metadata</code> directory (or to be safe, copy the directory somewhere else to be safe, then delete it)</li>\n<li>Restart Eclipse/STS</li>\n</ul>\n\n<p>Is there a more improved answer than this? I don't want to look like I'm trying to boost my own reputation points, so if someone can provide a better answer then please do so.</p>\n"},{"tags":[],"owner":{"account_id":5132601,"reputation":83,"user_id":6274202,"display_name":"Arul Rozario"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1520490669,"creation_date":1520490669,"answer_id":49166785,"question_id":37447721,"body_markdown":"Sometimes the problem can be caused  by some newly added dependencies. Try removing the recently added jars. That&#39;s how I fixed my problem.","title":"Could not find or load main class in STS/Eclipse","body":"<p>Sometimes the problem can be caused  by some newly added dependencies. Try removing the recently added jars. That's how I fixed my problem.</p>\n"},{"tags":[],"owner":{"account_id":3690615,"reputation":1,"user_id":3073264,"display_name":"Dhanu N Joy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524203804,"creation_date":1524203804,"answer_id":49934930,"question_id":37447721,"body_markdown":"I faced the same issue..\r\n\r\njust do follow these steps:\r\n\r\n&gt; STS/Eclipse --&gt; Project --&gt; Enable &quot;Build Automatically&quot;\r\n\r\nthen refresh your project, it will resolve your issue.\r\n\r\nStill not refreshed your projects automatically, just restart your STS and check.\r\n\r\nHope it will help you. ","title":"Could not find or load main class in STS/Eclipse","body":"<p>I faced the same issue..</p>\n\n<p>just do follow these steps:</p>\n\n<blockquote>\n  <p>STS/Eclipse --> Project --> Enable \"Build Automatically\"</p>\n</blockquote>\n\n<p>then refresh your project, it will resolve your issue.</p>\n\n<p>Still not refreshed your projects automatically, just restart your STS and check.</p>\n\n<p>Hope it will help you. </p>\n"},{"tags":[],"owner":{"account_id":7206089,"reputation":1,"user_id":5501647,"display_name":"Kiran Kumar D M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531243356,"creation_date":1531243356,"answer_id":51271026,"question_id":37447721,"body_markdown":"I think .class files are deleted/missing from JavaProject/bin folder.\r\n\r\nTo resolve this issue -&gt;\r\n\r\n1) Just cut paste and save the code contents of all the files that you are using then .class files will be regenerated.\r\n\r\n2) Then run the code and you can see it works fine if there is no syntactical errors.\r\n","title":"Could not find or load main class in STS/Eclipse","body":"<p>I think .class files are deleted/missing from JavaProject/bin folder.</p>\n\n<p>To resolve this issue -></p>\n\n<p>1) Just cut paste and save the code contents of all the files that you are using then .class files will be regenerated.</p>\n\n<p>2) Then run the code and you can see it works fine if there is no syntactical errors.</p>\n"},{"tags":[],"owner":{"account_id":9197179,"reputation":44,"user_id":6835526,"display_name":"Matt Buckborough"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532442634,"creation_date":1532442634,"answer_id":51501220,"question_id":37447721,"body_markdown":"Project -&gt; Clean... -&gt; check project not working -&gt; Clean\r\n\r\nI already had build automatically set, but forcing STS to rebuild it fixed it.","title":"Could not find or load main class in STS/Eclipse","body":"<p>Project -> Clean... -> check project not working -> Clean</p>\n\n<p>I already had build automatically set, but forcing STS to rebuild it fixed it.</p>\n"},{"tags":[],"owner":{"account_id":14047573,"reputation":76,"user_id":10147336,"display_name":"Mariusz"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1533268317,"creation_date":1533264789,"answer_id":51664658,"question_id":37447721,"body_markdown":"Today I ran into the same problem and I tried a lot of answers. Nothing helped. Cleaning the project, build automatically is already checked, deleting `.metadata`, etc.\r\n\r\nEventually I tried this and it worked perfectly:\r\n\r\nmenu Project -&gt; Properties  \r\nJava Build Path, tab Libraries\r\n\r\nRemove the JRE System Library from there, press `Add Library`, take the JRE System Library and press `Next`. Workspace default `JRE` and press `Finish`.","title":"Could not find or load main class in STS/Eclipse","body":"<p>Today I ran into the same problem and I tried a lot of answers. Nothing helped. Cleaning the project, build automatically is already checked, deleting <code>.metadata</code>, etc.</p>\n\n<p>Eventually I tried this and it worked perfectly:</p>\n\n<p>menu Project -> Properties<br>\nJava Build Path, tab Libraries</p>\n\n<p>Remove the JRE System Library from there, press <code>Add Library</code>, take the JRE System Library and press <code>Next</code>. Workspace default <code>JRE</code> and press <code>Finish</code>.</p>\n"},{"tags":[],"owner":{"account_id":3088532,"reputation":71,"user_id":2615206,"display_name":"user2615206"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1537172486,"creation_date":1537171138,"answer_id":52363199,"question_id":37447721,"body_markdown":"What worked for me:\r\n**Menu Project -&gt; Properties**\r\nIn **Java Build Path**, tab **Libraries**\r\nDelete all libraries with a red [x] next to them.\r\n\r\nIn my case, problem happened when I switched from Kepler to STS IDE.","title":"Could not find or load main class in STS/Eclipse","body":"<p>What worked for me:\n<strong>Menu Project -> Properties</strong>\nIn <strong>Java Build Path</strong>, tab <strong>Libraries</strong>\nDelete all libraries with a red [x] next to them.</p>\n\n<p>In my case, problem happened when I switched from Kepler to STS IDE.</p>\n"},{"tags":[],"owner":{"account_id":12366057,"reputation":71,"user_id":9018079,"display_name":"SelvaKumar T"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1570022989,"creation_date":1552761188,"answer_id":55200205,"question_id":37447721,"body_markdown":"Try updating project by right clicking on it. **Maven -&gt; Update Project**","title":"Could not find or load main class in STS/Eclipse","body":"<p>Try updating project by right clicking on it. <strong>Maven -> Update Project</strong></p>\n"},{"tags":[],"owner":{"account_id":2586287,"reputation":346,"user_id":2241925,"accept_rate":40,"display_name":"user2241925"},"comment_count":0,"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1559797380,"creation_date":1559797380,"answer_id":56471139,"question_id":37447721,"body_markdown":"Project -&gt; Clean\r\n\r\n**this is working**","title":"Could not find or load main class in STS/Eclipse","body":"<p>Project -> Clean</p>\n\n<p><strong>this is working</strong></p>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566354180,"creation_date":1566354180,"answer_id":57583650,"question_id":37447721,"body_markdown":"1 ) Clean the Project &lt;br&gt;\r\n2 ) Enable build automatically Option&lt;br&gt; \r\n3 ) Update the maven project by use the short cut &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;F5&lt;/kbd&gt;","title":"Could not find or load main class in STS/Eclipse","body":"<p>1 ) Clean the Project <br>\n2 ) Enable build automatically Option<br> \n3 ) Update the maven project by use the short cut <kbd>Alt</kbd> + <kbd>F5</kbd></p>\n"},{"tags":[],"owner":{"account_id":7936598,"reputation":31,"user_id":5992359,"display_name":"Pawan Gunjkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569699669,"creation_date":1569699669,"answer_id":58149722,"question_id":37447721,"body_markdown":"This issue occurs when the main .class file moved or not found because you changed the directory for committed/shared the project into the git or another repository.\r\n\r\nTo Resolve this issue --&gt;\r\nRemove existing run configuration and new one.\r\nFind the parent pom.xml or project pom.xml and open cmd/command prompt and run the below commands,\r\n\r\n 1. mvn clean install package\r\n 2. mvn eclipse eclipse","title":"Could not find or load main class in STS/Eclipse","body":"<p>This issue occurs when the main .class file moved or not found because you changed the directory for committed/shared the project into the git or another repository.</p>\n\n<p>To Resolve this issue -->\nRemove existing run configuration and new one.\nFind the parent pom.xml or project pom.xml and open cmd/command prompt and run the below commands,</p>\n\n<ol>\n<li>mvn clean install package</li>\n<li>mvn eclipse eclipse</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9414274,"reputation":21,"user_id":7002426,"display_name":"Ratnesh Chauhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574524180,"creation_date":1574524180,"answer_id":59009366,"question_id":37447721,"body_markdown":"Deleting target folder manually and mvn clean install worked for me ","title":"Could not find or load main class in STS/Eclipse","body":"<p>Deleting target folder manually and mvn clean install worked for me </p>\n"},{"tags":[],"owner":{"account_id":13369008,"reputation":456,"user_id":9648137,"display_name":"Ido Bar Lev "},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585809954,"creation_date":1585809954,"answer_id":60985670,"question_id":37447721,"body_markdown":"It worked for me: \r\n&lt;br&gt;\r\n 1. Delete metadata from work-space directory.\r\n&lt;br&gt;\r\n 2. Import the project again, but selected copy to work-space option.\r\n\r\nI think the cause for the error was Non-English characters in the original saved directory.","title":"Could not find or load main class in STS/Eclipse","body":"<p>It worked for me: \n<br>\n 1. Delete metadata from work-space directory.\n<br>\n 2. Import the project again, but selected copy to work-space option.</p>\n\n<p>I think the cause for the error was Non-English characters in the original saved directory.</p>\n"},{"tags":[],"owner":{"account_id":2171071,"reputation":542,"user_id":1923046,"accept_rate":89,"display_name":"Adam Law"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587472715,"creation_date":1587472715,"answer_id":61343756,"question_id":37447721,"body_markdown":"A quick and easy fix is to directly run your SpringBootApplication class (i.e. Right click, Run As -&gt; Spring Boot App). This runs the app and creates a run configuration automatically.","title":"Could not find or load main class in STS/Eclipse","body":"<p>A quick and easy fix is to directly run your SpringBootApplication class (i.e. Right click, Run As -> Spring Boot App). This runs the app and creates a run configuration automatically.</p>\n"},{"tags":[],"owner":{"account_id":8130642,"reputation":108,"user_id":6124047,"display_name":"ntepp jean marc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628244296,"creation_date":1587994034,"answer_id":61459986,"question_id":37447721,"body_markdown":"You can try one of the two solutions below:\r\n**Solution 1**: Right click the project -&gt; Gradle -&gt; Refresh Gradle Project.\r\n\r\n**Solution 2**: Add gradle or maven in your environment variable. My problem was that I had not added gradle in my environment variable. Before, make sure Gradle or maven is installed in your OS.\r\n\r\n","title":"Could not find or load main class in STS/Eclipse","body":"<p>You can try one of the two solutions below:\n<strong>Solution 1</strong>: Right click the project -&gt; Gradle -&gt; Refresh Gradle Project.</p>\n<p><strong>Solution 2</strong>: Add gradle or maven in your environment variable. My problem was that I had not added gradle in my environment variable. Before, make sure Gradle or maven is installed in your OS.</p>\n"},{"tags":[],"owner":{"account_id":21424485,"reputation":1,"user_id":15782025,"display_name":"Wenbo Wang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619591509,"creation_date":1619591509,"answer_id":67294861,"question_id":37447721,"body_markdown":"I spent several hours on this issue, finally it is fixed by doing this:\r\nProperties -&gt; Java Compiler: uncheck the checkbox &quot;use &#39;--release&#39; option&quot;","title":"Could not find or load main class in STS/Eclipse","body":"<p>I spent several hours on this issue, finally it is fixed by doing this:\nProperties -&gt; Java Compiler: uncheck the checkbox &quot;use '--release' option&quot;</p>\n"},{"tags":[],"owner":{"account_id":13870491,"reputation":1226,"user_id":11152084,"display_name":"Lenzman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621670173,"creation_date":1621670173,"answer_id":67647276,"question_id":37447721,"body_markdown":"\r\nThis worked for me to solve the error. (I got this error after removing AWS ToolKit)\r\n 1. **Close** the Eclipse/ STS Eclipse.\r\n 2. Go to the **WorkSpace** folder.\r\n 3. **Delete** the ***.metadata*** folder.\r\n 4. **Open** the eclipse.\r\n 5. Run ***maven install*** on pom.\r\n 6. **Run** the project with your Run configuration. \r\n\r\n ","title":"Could not find or load main class in STS/Eclipse","body":"<p>This worked for me to solve the error. (I got this error after removing AWS ToolKit)</p>\n<ol>\n<li><strong>Close</strong> the Eclipse/ STS Eclipse.</li>\n<li>Go to the <strong>WorkSpace</strong> folder.</li>\n<li><strong>Delete</strong> the <em><strong>.metadata</strong></em> folder.</li>\n<li><strong>Open</strong> the eclipse.</li>\n<li>Run <em><strong>maven install</strong></em> on pom.</li>\n<li><strong>Run</strong> the project with your Run configuration.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10944585,"reputation":1,"user_id":8043158,"display_name":"Santhosh Emmadi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623218573,"creation_date":1623218573,"answer_id":67898421,"question_id":37447721,"body_markdown":" 1. Remove project from STS/Eclipse\r\n 2. Close or Refresh the Eclipse/ STS Eclipse.\r\n 3. Run maven install on pom.\r\n 4. Run the project with your Run configuration.\r\n Tried above mentioned steps to resolved issue. ","title":"Could not find or load main class in STS/Eclipse","body":"<ol>\n<li>Remove project from STS/Eclipse</li>\n<li>Close or Refresh the Eclipse/ STS Eclipse.</li>\n<li>Run maven install on pom.</li>\n<li>Run the project with your Run configuration.\nTried above mentioned steps to resolved issue.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5355682,"reputation":55,"user_id":4268409,"display_name":"bimlesh prasad singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625560180,"creation_date":1625560180,"answer_id":68267086,"question_id":37447721,"body_markdown":"You just need to delete Run Configuration file and restart STS and run command -mvn clean install and try to restart the service","title":"Could not find or load main class in STS/Eclipse","body":"<p>You just need to delete Run Configuration file and restart STS and run command -mvn clean install and try to restart the service</p>\n"},{"tags":[],"owner":{"account_id":18850722,"reputation":1,"user_id":13749925,"display_name":"Twinkle Jaswani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629783282,"creation_date":1629783282,"answer_id":68902241,"question_id":37447721,"body_markdown":"I tried all the answers but finally what worked for me was deleting the project from eclipse workspace and importing it again.\r\n","title":"Could not find or load main class in STS/Eclipse","body":"<p>I tried all the answers but finally what worked for me was deleting the project from eclipse workspace and importing it again.</p>\n"},{"tags":[],"owner":{"account_id":14209280,"reputation":665,"user_id":10264998,"display_name":"Gnk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680556483,"creation_date":1680556483,"answer_id":75923826,"question_id":37447721,"body_markdown":"I had this problem on eclipse sts.\r\nFor me the following steps solved the problem.\r\n\r\nIn Boot Dashboard &gt; left click in your project &gt; Open Config &gt; fill the &quot;Main Type&quot; with your main application.","title":"Could not find or load main class in STS/Eclipse","body":"<p>I had this problem on eclipse sts.\nFor me the following steps solved the problem.</p>\n<p>In Boot Dashboard &gt; left click in your project &gt; Open Config &gt; fill the &quot;Main Type&quot; with your main application.</p>\n"}],"owner":{"account_id":3151445,"reputation":2418,"user_id":2664815,"accept_rate":100,"display_name":"aCarella"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55292,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":56471139,"answer_count":22,"score":8,"last_activity_date":1680556483,"creation_date":1464210793,"question_id":37447721,"body_markdown":"I have a main method in a package in one of my projects. Say, the package is `com.ant.car`. I am trying to run and/or debug this main method, and I keep getting the error `Could not find or load main class com.ant.car`.\r\n\r\nI&#39;ve searched this problem, and it seems like I can&#39;t figure out what is wrong.\r\n\r\n1) I&#39;ve checked run configurations. In Run-&gt;Run Configurations, I&#39;ve checked that the Main class is com.ant.car.\r\n\r\n2) I&#39;ve checked build path. If I right click on the project, I select Build-&gt;Build Path, and under the Libraries tab I make sure there are no missing folders with red Xs next to them.\r\n\r\nNot really sure what else to do. Any suggestions?\r\n\r\n ","title":"Could not find or load main class in STS/Eclipse","body":"<p>I have a main method in a package in one of my projects. Say, the package is <code>com.ant.car</code>. I am trying to run and/or debug this main method, and I keep getting the error <code>Could not find or load main class com.ant.car</code>.</p>\n\n<p>I've searched this problem, and it seems like I can't figure out what is wrong.</p>\n\n<p>1) I've checked run configurations. In Run->Run Configurations, I've checked that the Main class is com.ant.car.</p>\n\n<p>2) I've checked build path. If I right click on the project, I select Build->Build Path, and under the Libraries tab I make sure there are no missing folders with red Xs next to them.</p>\n\n<p>Not really sure what else to do. Any suggestions?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1680602762,"post_id":75923824,"comment_id":133922305,"body_markdown":"Define the distributionManagement... in your own project... too complex? ...","body":"Define the distributionManagement... in your own project... too complex? ..."},{"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"score":0,"creation_date":1680620415,"post_id":75923824,"comment_id":133926959,"body_markdown":"@zforgo it seems like what I&#39;m looking for - thanks!","body":"@zforgo it seems like what I&#39;m looking for - thanks!"},{"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"score":0,"creation_date":1680620442,"post_id":75923824,"comment_id":133926966,"body_markdown":"@khmarbaise have you read second part of the question? &quot;too complex&quot;? It&#39;s NOT my project, I can&#39;t add the section unless I fork it, and doing a fork just to add `distributionManagement` section seems silly at the very least...","body":"@khmarbaise have you read second part of the question? &quot;too complex&quot;? It&#39;s NOT my project, I can&#39;t add the section unless I fork it, and doing a fork just to add <code>distributionManagement</code> section seems silly at the very least..."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1680714160,"post_id":75923824,"comment_id":133946401,"body_markdown":"I&#39;ve read that... but if you use it and it&#39;s not your project... you have to request a change for that or you have to fork it...  and is not published via a repository manager ? And why to your &quot;own repository&quot;???  (Is that a corporate environment?)","body":"I&#39;ve read that... but if you use it and it&#39;s not your project... you have to request a change for that or you have to fork it...  and is not published via a repository manager ? And why to your &quot;own repository&quot;???  (Is that a corporate environment?)"},{"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"score":0,"creation_date":1680732042,"post_id":75923824,"comment_id":133950173,"body_markdown":"Deploying nightly is not usually common (and for good reasons) so demanding project would do so doesn&#39;t seem right. I&#39;m doing certain extensions and custom packaging of the build (as suggested by the projects maintainers!) and I require features/changes that are already in the master (thus x.y.z-SNAPSHOT). The only way to achieve that is either build upstream project before each CI build of our project (based on upstream) or build it once, deployed the SNAPSHOTS that we need (and it&#39;s easier to do to our repository). Is it somewhat clearer? When upstream publishes stable we will switch.","body":"Deploying nightly is not usually common (and for good reasons) so demanding project would do so doesn&#39;t seem right. I&#39;m doing certain extensions and custom packaging of the build (as suggested by the projects maintainers!) and I require features/changes that are already in the master (thus x.y.z-SNAPSHOT). The only way to achieve that is either build upstream project before each CI build of our project (based on upstream) or build it once, deployed the SNAPSHOTS that we need (and it&#39;s easier to do to our repository). Is it somewhat clearer? When upstream publishes stable we will switch."}],"owner":{"account_id":73432,"reputation":1895,"user_id":211453,"accept_rate":36,"display_name":"Wojtek"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1680630591,"answer_count":0,"score":0,"last_activity_date":1680556480,"creation_date":1680556480,"question_id":75923824,"body_markdown":"I want to build and deploy a project to my own repository - how can I specify target repository for `deploy` goal? I know that I can use `deploy:deploy-file` but this only applies for single file. I would like to build complete project (with multiple modules).\r\n\r\nContext: there is a project I use as dependency, but I use snapshot artifacts from `master` branches and original owner doesn&#39;t build/provide snapshot dependencies. I could fork the project, specify `distributionManagement` with repository coordination, but that would be way too complex. Unfortunately &quot;local repository&quot; would be problematic as it&#39;s to be built in CI.","title":"Deploy maven project to custom/own repository (override)","body":"<p>I want to build and deploy a project to my own repository - how can I specify target repository for <code>deploy</code> goal? I know that I can use <code>deploy:deploy-file</code> but this only applies for single file. I would like to build complete project (with multiple modules).</p>\n<p>Context: there is a project I use as dependency, but I use snapshot artifacts from <code>master</code> branches and original owner doesn't build/provide snapshot dependencies. I could fork the project, specify <code>distributionManagement</code> with repository coordination, but that would be way too complex. Unfortunately &quot;local repository&quot; would be problematic as it's to be built in CI.</p>\n"},{"tags":["java","spring-boot","spring-data-mongodb"],"owner":{"account_id":5212096,"reputation":1592,"user_id":4168154,"accept_rate":76,"display_name":"sealabr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680556223,"creation_date":1680536234,"question_id":75921259,"body_markdown":"I&#39;m trying to follow this steps:\r\n\r\nhttps://stackoverflow.com/questions/44707612/log-into-mongodb-with-spring\r\n\r\nI added the dependencies to run in Log\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-data-mongodb-log4j&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.10.4.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\nand appender in logback-spring.xml\r\n\r\n\r\n    \t&lt;appender name=&quot;mongo&quot; class=&quot;org.springframework.data.mongodb.log4j.MongoLog4jAppender&quot;&gt;\r\n\t\t\t&lt;param name=&quot;host&quot; value=&quot;XXXXXXX.mongodb.net&quot;/&gt;\r\n\t\t\t&lt;param name=&quot;port&quot; value=&quot;30000&quot;/&gt;\r\n\t\t\t&lt;param name=&quot;username&quot; value=&quot;fviana&quot;/&gt;\r\n\t\t\t&lt;param name=&quot;password&quot; value=&quot;XXXXXXXXX&quot;/&gt;\r\n\t\t\t&lt;param name=&quot;database&quot; value=&quot;myFirstDatabase&quot;/&gt;\r\n\t\t\t&lt;param name=&quot;collectionPattern&quot; value=&quot;appmart_%X{year}%X{month}&quot;/&gt;\r\n\t\t\t&lt;param name=&quot;warnOrHigherWriteConcern&quot; value=&quot;FSYNC_SAFE&quot;/&gt;\r\n\t\t&lt;/appender&gt;\r\n\r\n\r\nI&#39;m getting this error:\r\n\r\n    java.lang.IllegalStateException: Logback configuration error detected: \r\n    ERROR in ch.qos.logback.core.joran.action.AppenderAction - Could not create an Appender of type [org.springframework.data.mongodb.log4j.MongoLog4jAppender]. ch.qos.logback.core.util.IncompatibleClassException\r\n    ERROR in ch.qos.logback.core.joran.spi.Interpreter@10:92 - ActionException in Action for tag [appender] ch.qos.logback.core.joran.spi.ActionException: ch.qos.logback.core.util.IncompatibleClassException\r\n    ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Could not find an appender named [mongo]. Did you define it below instead of above in the configuration file?\r\n    ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - See http://logback.qos.ch/codes.html#appender_order for more details.\r\n    \tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:154)\r\n    \tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:79)\r\n    \tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:59)\r\n    \tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:113)\r\n    \tat org.springframework.boot.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:295)\r\n    \tat org.springframework.boot.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:270)\r\n    \tat org.springframework.boot.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:235)\r\n    \tat org.springframework.boot.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:212)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:122)\r\n    \tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:75)\r\n    \tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\r\n    \tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:320)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:295)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1082)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1071)\r\n\r\n\r\njava.version = 1.8\r\n\r\nspring-boot.version = 1.5.22.RELEASE","title":"MongoLog4jAppender - Spring Boot - Logs With mongoDB","body":"<p>I'm trying to follow this steps:</p>\n<p><a href=\"https://stackoverflow.com/questions/44707612/log-into-mongodb-with-spring\">Log into Mongodb with Spring</a></p>\n<p>I added the dependencies to run in Log</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-mongodb-log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.10.4.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>and appender in logback-spring.xml</p>\n<pre><code>    &lt;appender name=&quot;mongo&quot; class=&quot;org.springframework.data.mongodb.log4j.MongoLog4jAppender&quot;&gt;\n        &lt;param name=&quot;host&quot; value=&quot;XXXXXXX.mongodb.net&quot;/&gt;\n        &lt;param name=&quot;port&quot; value=&quot;30000&quot;/&gt;\n        &lt;param name=&quot;username&quot; value=&quot;fviana&quot;/&gt;\n        &lt;param name=&quot;password&quot; value=&quot;XXXXXXXXX&quot;/&gt;\n        &lt;param name=&quot;database&quot; value=&quot;myFirstDatabase&quot;/&gt;\n        &lt;param name=&quot;collectionPattern&quot; value=&quot;appmart_%X{year}%X{month}&quot;/&gt;\n        &lt;param name=&quot;warnOrHigherWriteConcern&quot; value=&quot;FSYNC_SAFE&quot;/&gt;\n    &lt;/appender&gt;\n</code></pre>\n<p>I'm getting this error:</p>\n<pre><code>java.lang.IllegalStateException: Logback configuration error detected: \nERROR in ch.qos.logback.core.joran.action.AppenderAction - Could not create an Appender of type [org.springframework.data.mongodb.log4j.MongoLog4jAppender]. ch.qos.logback.core.util.IncompatibleClassException\nERROR in ch.qos.logback.core.joran.spi.Interpreter@10:92 - ActionException in Action for tag [appender] ch.qos.logback.core.joran.spi.ActionException: ch.qos.logback.core.util.IncompatibleClassException\nERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Could not find an appender named [mongo]. Did you define it below instead of above in the configuration file?\nERROR in ch.qos.logback.core.joran.action.AppenderRefAction - See http://logback.qos.ch/codes.html#appender_order for more details.\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:154)\n    at org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:79)\n    at org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:59)\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:113)\n    at org.springframework.boot.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:295)\n    at org.springframework.boot.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:270)\n    at org.springframework.boot.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:235)\n    at org.springframework.boot.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:212)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:122)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:75)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:320)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:295)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1082)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1071)\n</code></pre>\n<p>java.version = 1.8</p>\n<p>spring-boot.version = 1.5.22.RELEASE</p>\n"},{"tags":["java","spring","amazon-web-services","amazon-dynamodb"],"comments":[{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1680556253,"post_id":75923391,"comment_id":133915595,"body_markdown":"ARNs represent Amazon resources. They&#39;re simply identifiers, not values such as credentials. Can you elaborate on the requirement for an ARN here? Or do you mean an IAM Role?","body":"ARNs represent Amazon resources. They&#39;re simply identifiers, not values such as credentials. Can you elaborate on the requirement for an ARN here? Or do you mean an IAM Role?"}],"answers":[{"tags":[],"owner":{"account_id":33299,"reputation":12487,"user_id":93161,"accept_rate":89,"display_name":"Robert Love"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680556220,"creation_date":1680556220,"answer_id":75923796,"question_id":75923391,"body_markdown":"API to connect does not support a user arn, both keys are required.\r\n\r\nTypically, when I develop I setup the credentials and config to do my authentication that I need.   That way I don&#39;t have to pass them around in code.   Then when your code runs on an AWS Compute resource you can specify a Role for your compute instance (examples include:  EC2, Fargate Container, and Lambda).  Then this role can be granted the permissions you need.   \r\n\r\nThis concept is typically more secure as you are not managing any credentials in your application.\r\n\r\nThe only time I have dealt with local credentials is when I developing something installed on the desktop computer.  In those cases, I have used the SSO API to acquire both keys, and the session token.\r\n","title":"DynamoDB Authentication With AWS SDK for Java","body":"<p>API to connect does not support a user arn, both keys are required.</p>\n<p>Typically, when I develop I setup the credentials and config to do my authentication that I need.   That way I don't have to pass them around in code.   Then when your code runs on an AWS Compute resource you can specify a Role for your compute instance (examples include:  EC2, Fargate Container, and Lambda).  Then this role can be granted the permissions you need.</p>\n<p>This concept is typically more secure as you are not managing any credentials in your application.</p>\n<p>The only time I have dealt with local credentials is when I developing something installed on the desktop computer.  In those cases, I have used the SSO API to acquire both keys, and the session token.</p>\n"}],"owner":{"account_id":23301548,"reputation":55,"user_id":17382114,"display_name":"Italo Vieira "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680556220,"creation_date":1680552470,"question_id":75923391,"body_markdown":"I&#39;m using AWS SDK for Java, and I need to authenticate in the database by a ARN User/Role.\r\nHow can I do this? Actually I&#39;m authenticating using accessKey and secretKey, but I need to change (rules of organization) to use ARN.\r\n\r\nActually authenticating by this: \r\n\r\n    @Configuration\r\n    @EnableDynamoDBRepositories(basePackages = &quot;mypackage.repository&quot;)\r\n    public class DynamoDBConfiguration {\r\n    \r\n        @Bean\r\n        public AmazonDynamoDB amazonDynamoDB(AWSCredentials AWSCredentials,\r\n                                             @Value(&quot;${aws.dynamoDBUrl}&quot;) String dynamoDBUrl){\r\n    \r\n            AmazonDynamoDBClientBuilder builder = AmazonDynamoDBClientBuilder.standard()\r\n                    .withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration(dynamoDBUrl, &quot;sa-east-1&quot;))\r\n                    .withCredentials(new AWSStaticCredentialsProvider(AWSCredentials));\r\n            AmazonDynamoDB build = builder.build();\r\n            return build;\r\n        }\r\n    \r\n        @Bean\r\n        public AWSCredentials awsCredentials(@Value(&quot;${aws.accessKey}&quot;) String accessKey,\r\n                                             @Value(&quot;${aws.secretKey}&quot;) String secretKey){\r\n            return new BasicAWSCredentials(accessKey, secretKey);\r\n        }\r\n    \r\n    }\r\n\r\n","title":"DynamoDB Authentication With AWS SDK for Java","body":"<p>I'm using AWS SDK for Java, and I need to authenticate in the database by a ARN User/Role.\nHow can I do this? Actually I'm authenticating using accessKey and secretKey, but I need to change (rules of organization) to use ARN.</p>\n<p>Actually authenticating by this:</p>\n<pre><code>@Configuration\n@EnableDynamoDBRepositories(basePackages = &quot;mypackage.repository&quot;)\npublic class DynamoDBConfiguration {\n\n    @Bean\n    public AmazonDynamoDB amazonDynamoDB(AWSCredentials AWSCredentials,\n                                         @Value(&quot;${aws.dynamoDBUrl}&quot;) String dynamoDBUrl){\n\n        AmazonDynamoDBClientBuilder builder = AmazonDynamoDBClientBuilder.standard()\n                .withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration(dynamoDBUrl, &quot;sa-east-1&quot;))\n                .withCredentials(new AWSStaticCredentialsProvider(AWSCredentials));\n        AmazonDynamoDB build = builder.build();\n        return build;\n    }\n\n    @Bean\n    public AWSCredentials awsCredentials(@Value(&quot;${aws.accessKey}&quot;) String accessKey,\n                                         @Value(&quot;${aws.secretKey}&quot;) String secretKey){\n        return new BasicAWSCredentials(accessKey, secretKey);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","exception","error-handling"],"comments":[{"owner":{"account_id":6460997,"reputation":7359,"user_id":5004822,"accept_rate":41,"display_name":"SledgeHammer"},"score":0,"creation_date":1574144042,"post_id":58926153,"comment_id":104115880,"body_markdown":"Aren&#39;t you using the validation annotations? Those create the error responses for you (and can validate for required params). If you want to customize the error message beyond that, create a @Component that extends DefaultErrorAttributes and override getErrorAttributes.","body":"Aren&#39;t you using the validation annotations? Those create the error responses for you (and can validate for required params). If you want to customize the error message beyond that, create a @Component that extends DefaultErrorAttributes and override getErrorAttributes."},{"owner":{"account_id":10025473,"reputation":321,"user_id":7889427,"display_name":"chronos14"},"score":0,"creation_date":1574311754,"post_id":58926153,"comment_id":104189509,"body_markdown":"@SledgeHammer yeah, I did. but it doesn&#39;t catch the exception if I didn&#39;t put the bracket. I didn&#39;t understand why it works only if I put the bracket, and didn&#39;t recognize the missing body if I remove the bracket. \n\nIf I removed the custom error msg or remove the `@ControllerAdvise` , the default msg error appeared.","body":"@SledgeHammer yeah, I did. but it doesn&#39;t catch the exception if I didn&#39;t put the bracket. I didn&#39;t understand why it works only if I put the bracket, and didn&#39;t recognize the missing body if I remove the bracket.   If I removed the custom error msg or remove the <code>@ControllerAdvise</code> , the default msg error appeared."}],"answers":[{"comments":[{"owner":{"account_id":10025473,"reputation":321,"user_id":7889427,"display_name":"chronos14"},"score":0,"creation_date":1631525184,"post_id":69152498,"comment_id":122236205,"body_markdown":"Thanks! I will try this","body":"Thanks! I will try this"}],"tags":[],"owner":{"account_id":10064594,"reputation":1,"user_id":7440146,"display_name":"jcaronan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631458185,"creation_date":1631458185,"answer_id":69152498,"question_id":58926153,"body_markdown":"This might be late but you might want to try adding this on your ControllerAdvice class, that&#39;s how I caught the *Required request body is missing* error when trying to send an empty request.\r\n\r\n    @ExceptionHandler(HttpMessageNotReadableException.class)\r\n    public ResponseEntity&lt;Object&gt; handleMissingRequestBody(HttpMessageNotReadableException ex) {\r\n        return new ResponseEntity&lt;Object&gt;(ex.getMessage(), HttpStatus.BAD_REQUEST);\r\n    }","title":"How to create custom &quot;Request Body is Missing&quot; error in Spring Boot","body":"<p>This might be late but you might want to try adding this on your ControllerAdvice class, that's how I caught the <em>Required request body is missing</em> error when trying to send an empty request.</p>\n<pre><code>@ExceptionHandler(HttpMessageNotReadableException.class)\npublic ResponseEntity&lt;Object&gt; handleMissingRequestBody(HttpMessageNotReadableException ex) {\n    return new ResponseEntity&lt;Object&gt;(ex.getMessage(), HttpStatus.BAD_REQUEST);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9507708,"reputation":2869,"user_id":7066647,"display_name":"dbaltor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680556213,"creation_date":1680556213,"answer_id":75923795,"question_id":58926153,"body_markdown":"One way of do it is overriding the `handleHttpMessageNotReadable` method in `ResponseEntityExceptionHandler`.  \r\n\r\n\r\n    @Slf4j\r\n    @RestControllerAdvice\r\n    public class RestExceptionHandler extends ResponseEntityExceptionHandler {\r\n    \r\n        // 400 BAD REQUEST HANDLER\r\n        @Override\r\n        protected ResponseEntity&lt;Object&gt; handleHttpMessageNotReadable(HttpMessageNotReadableException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n            val errorMessage = &quot;Request body is missing&quot;;\r\n            log.error(&quot;400 BAD REQUEST: &quot; + errorMessage);\r\n            return this.handleExceptionInternal(ex, errorMessage, headers, status, request);\r\n        }\r\n    }","title":"How to create custom &quot;Request Body is Missing&quot; error in Spring Boot","body":"<p>One way of do it is overriding the <code>handleHttpMessageNotReadable</code> method in <code>ResponseEntityExceptionHandler</code>.</p>\n<pre><code>@Slf4j\n@RestControllerAdvice\npublic class RestExceptionHandler extends ResponseEntityExceptionHandler {\n\n    // 400 BAD REQUEST HANDLER\n    @Override\n    protected ResponseEntity&lt;Object&gt; handleHttpMessageNotReadable(HttpMessageNotReadableException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\n        val errorMessage = &quot;Request body is missing&quot;;\n        log.error(&quot;400 BAD REQUEST: &quot; + errorMessage);\n        return this.handleExceptionInternal(ex, errorMessage, headers, status, request);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10025473,"reputation":321,"user_id":7889427,"display_name":"chronos14"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1495,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1680556213,"creation_date":1574133818,"question_id":58926153,"body_markdown":"To create custom error, we need to know what kind of Exception error it is. The problem is I cannot determine what kind of error the &quot;request body is missing one&quot; is. At first I thought it was categorized as `MethodArgumentNotValidException` , but it doesn&#39;t catch the error.\r\n\r\nI create the Controller Advice for the error\r\n\r\n```java\r\n@Override\r\nprotected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException exception, HttpHeaders headers, HttpStatus status, WebRequest request){\r\n        MyObject&lt;Object&gt; error = MyObject.failure(&quot;Invalid Parameter&quot;);\r\n        log.error(&quot;argument invalid&quot;, exception);\r\n        return new ResponseEntity&lt;Object&gt;(error, new HttpHeaders(), HttpStatus.OK);\r\n}\r\n```\r\n\r\nThe controller\r\n```\r\n@PostMapping(value = &quot;/tes&quot;)\r\npublic MyObject&lt;MyRes&gt; myTest(@Valid @RequestBody MyReq req, HttpServletRequest hsReq) throws Exception{\r\n        return myService.updateTestData(req);\r\n}\r\n```\r\n\r\nI used Postman to call the API.\r\n\r\n*** First Trial with bracket**\r\n\r\n[![with bracket][1]][1]\r\n\r\n*** Second Trial - without bracket**\r\n\r\n[![without bracket][2]][2]\r\n\r\nNo error occurred. \r\n\r\nMy question is, how to handle this error, When no request body attached at all in the request. I want to return the &quot;invalid param&quot; error in this case too.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UgTVK.jpg\r\n  [2]: https://i.stack.imgur.com/JyPMV.jpg","title":"How to create custom &quot;Request Body is Missing&quot; error in Spring Boot","body":"<p>To create custom error, we need to know what kind of Exception error it is. The problem is I cannot determine what kind of error the \"request body is missing one\" is. At first I thought it was categorized as <code>MethodArgumentNotValidException</code> , but it doesn't catch the error.</p>\n\n<p>I create the Controller Advice for the error</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException exception, HttpHeaders headers, HttpStatus status, WebRequest request){\n        MyObject&lt;Object&gt; error = MyObject.failure(\"Invalid Parameter\");\n        log.error(\"argument invalid\", exception);\n        return new ResponseEntity&lt;Object&gt;(error, new HttpHeaders(), HttpStatus.OK);\n}\n</code></pre>\n\n<p>The controller</p>\n\n<pre><code>@PostMapping(value = \"/tes\")\npublic MyObject&lt;MyRes&gt; myTest(@Valid @RequestBody MyReq req, HttpServletRequest hsReq) throws Exception{\n        return myService.updateTestData(req);\n}\n</code></pre>\n\n<p>I used Postman to call the API.</p>\n\n<p><strong>* First Trial with bracket</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/UgTVK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UgTVK.jpg\" alt=\"with bracket\"></a></p>\n\n<p><strong>* Second Trial - without bracket</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/JyPMV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JyPMV.jpg\" alt=\"without bracket\"></a></p>\n\n<p>No error occurred. </p>\n\n<p>My question is, how to handle this error, When no request body attached at all in the request. I want to return the \"invalid param\" error in this case too.</p>\n"},{"tags":["java","validation","javax.validation"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1680551715,"post_id":75923031,"comment_id":133914771,"body_markdown":"Why not make Answer an abstract class/interface and require that subclasses/implementations implement an isValid() method?","body":"Why not make Answer an abstract class/interface and require that subclasses/implementations implement an isValid() method?"},{"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"score":0,"creation_date":1680552208,"post_id":75923031,"comment_id":133914878,"body_markdown":"Because in the DB and the UI they are just an &#39;Answer&#39;, so it doesn&#39;t make a whole lot of sense to parse incoming REST requests into Answer subtypes, only to save them back to the DB as an answer anyway, and vice versa. Especially since we dont have precedent for that in this repo as it stands now.\n\nAnd with this one exception, the API layer doesn&#39;t care about what type of answer this is, just that it is an answer. So, while you probably have a technically correct solution, i think it is overkill for this.","body":"Because in the DB and the UI they are just an &#39;Answer&#39;, so it doesn&#39;t make a whole lot of sense to parse incoming REST requests into Answer subtypes, only to save them back to the DB as an answer anyway, and vice versa. Especially since we dont have precedent for that in this repo as it stands now.  And with this one exception, the API layer doesn&#39;t care about what type of answer this is, just that it is an answer. So, while you probably have a technically correct solution, i think it is overkill for this."}],"answers":[{"tags":[],"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680555840,"creation_date":1680555840,"answer_id":75923747,"question_id":75923031,"body_markdown":"You are looking for: `context.disableDefaultConstraintViolation();`","title":"Javax Validation extra error on validation fail","body":"<p>You are looking for: <code>context.disableDefaultConstraintViolation();</code></p>\n"}],"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680555840,"creation_date":1680549412,"question_id":75923031,"body_markdown":"I have an &#39;Answer&#39; object that may be one of many types of answers (email, phone number, name...) I am writing a custom validator to handle the validation and regardless of the answer type the answer text is stored in a single &#39;value&#39; param.\r\n\r\nHere is what i have got:\r\n\r\nAnnotation definition:\r\n```\r\n@Target({ElementType.PARAMETER})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\n@Constraint(validatedBy = AnswerValidator.class)\r\n\r\npublic @interface ValidateAnswerEmail {\r\n    String message() default &quot;&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n```\r\n\r\nValidator\r\n```\r\npublic class AnswerValidator implements ConstraintValidator&lt;ValidateAnswerEmail, Answer&gt; {\r\n\r\n    @Override\r\n    public boolean isValid(Answer answer, ConstraintValidatorContext context) {\r\n        boolean success = true;\r\n        // validation #1\r\n        // validation #2\r\n        // validation #3\r\n\r\n        return success;\r\n    }\r\n}\r\n```\r\n\r\nMy issue is that i am getting back an extra validation failed message if one of them fails. This appears to be coming from the `return success` returning false and then using the annotations `String message() default &quot;&quot;;` as the error message.\r\n\r\nWondering if i can suppress that validation violation message and only return the ones that i add to the `ConstraintValidatorContext`?\r\n\r\nNo Spring, Vanilla Java.\r\nThanks in advance.\r\n\r\nHere is the message\r\n```\r\nConstraint violations: \r\n (1) Kind: PARAMETER\r\n parameter index: 0\r\n message: Email address: some@User@gmail.com is not a valid email address\r\n root bean: org.company.crs.api.AnswerResource@42475403\r\n property path: updateAnswer.arg0\r\n constraint: @org.company.crs.validator.ValidateAnswerEmail(message=&quot;&quot;, groups={}, payload={})\r\n (2) Kind: PARAMETER\r\n parameter index: 0\r\n message: \r\n root bean: org.company.crs.api.AnswerResource@42475403\r\n property path: updateAnswer.arg0\r\n constraint: @org.company.crs.validator.ValidateAnswerEmail(message=&quot;&quot;, groups={}, payload={})\r\n```","title":"Javax Validation extra error on validation fail","body":"<p>I have an 'Answer' object that may be one of many types of answers (email, phone number, name...) I am writing a custom validator to handle the validation and regardless of the answer type the answer text is stored in a single 'value' param.</p>\n<p>Here is what i have got:</p>\n<p>Annotation definition:</p>\n<pre><code>@Target({ElementType.PARAMETER})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Constraint(validatedBy = AnswerValidator.class)\n\npublic @interface ValidateAnswerEmail {\n    String message() default &quot;&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>Validator</p>\n<pre><code>public class AnswerValidator implements ConstraintValidator&lt;ValidateAnswerEmail, Answer&gt; {\n\n    @Override\n    public boolean isValid(Answer answer, ConstraintValidatorContext context) {\n        boolean success = true;\n        // validation #1\n        // validation #2\n        // validation #3\n\n        return success;\n    }\n}\n</code></pre>\n<p>My issue is that i am getting back an extra validation failed message if one of them fails. This appears to be coming from the <code>return success</code> returning false and then using the annotations <code>String message() default &quot;&quot;;</code> as the error message.</p>\n<p>Wondering if i can suppress that validation violation message and only return the ones that i add to the <code>ConstraintValidatorContext</code>?</p>\n<p>No Spring, Vanilla Java.\nThanks in advance.</p>\n<p>Here is the message</p>\n<pre><code>Constraint violations: \n (1) Kind: PARAMETER\n parameter index: 0\n message: Email address: some@User@gmail.com is not a valid email address\n root bean: org.company.crs.api.AnswerResource@42475403\n property path: updateAnswer.arg0\n constraint: @org.company.crs.validator.ValidateAnswerEmail(message=&quot;&quot;, groups={}, payload={})\n (2) Kind: PARAMETER\n parameter index: 0\n message: \n root bean: org.company.crs.api.AnswerResource@42475403\n property path: updateAnswer.arg0\n constraint: @org.company.crs.validator.ValidateAnswerEmail(message=&quot;&quot;, groups={}, payload={})\n</code></pre>\n"},{"tags":["java","java-server"],"comments":[{"owner":{"account_id":322545,"reputation":2399,"user_id":642006,"display_name":"Mike"},"score":3,"creation_date":1424207329,"post_id":28571086,"comment_id":45452168,"body_markdown":"Try looking up a tutorial on servlets. Example: http://www.tutorialspoint.com/servlets/","body":"Try looking up a tutorial on servlets. Example: <a href=\"http://www.tutorialspoint.com/servlets/\" rel=\"nofollow noreferrer\">tutorialspoint.com/servlets</a>"},{"owner":{"account_id":405481,"reputation":12981,"user_id":774395,"accept_rate":70,"display_name":"DeejUK"},"score":1,"creation_date":1424208788,"post_id":28571086,"comment_id":45452797,"body_markdown":"Spring Boot makes this sort of thing very easy, but as you imply has a *huge* amount of complexity under the hood. It would be as easy as a couple of POM dependencies and about 5 lines of code though. There are good HOWTOs on the Spring Boot website.","body":"Spring Boot makes this sort of thing very easy, but as you imply has a <i>huge</i> amount of complexity under the hood. It would be as easy as a couple of POM dependencies and about 5 lines of code though. There are good HOWTOs on the Spring Boot website."}],"answers":[{"comments":[{"owner":{"account_id":1801353,"reputation":81710,"user_id":1639625,"display_name":"tobias_k"},"score":4,"creation_date":1466175914,"post_id":28571398,"comment_id":63224374,"body_markdown":"Note: The `httpserver` package seems to be &quot;restricted API&quot; in Eclipse. To circumvent, see [here](http://stackoverflow.com/a/29329228/1639625)","body":"Note: The <code>httpserver</code> package seems to be &quot;restricted API&quot; in Eclipse. To circumvent, see <a href=\"http://stackoverflow.com/a/29329228/1639625\">here</a>"}],"tags":[],"owner":{"account_id":1209109,"reputation":7934,"user_id":1178016,"accept_rate":73,"display_name":"xehpuk"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1637932911,"creation_date":1424208363,"answer_id":28571398,"question_id":28571086,"body_markdown":"You could use classes from the package [`com.sun.net.httpserver`](http://docs.oracle.com/javase/8/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html):\r\n\r\n\timport com.sun.net.httpserver.Headers;\r\n\timport com.sun.net.httpserver.HttpServer;\r\n\timport java.io.IOException;\r\n\timport java.io.UnsupportedEncodingException;\r\n\timport java.net.InetSocketAddress;\r\n\timport java.net.URI;\r\n\timport java.net.URLDecoder;\r\n\timport java.nio.charset.Charset;\r\n\timport java.nio.charset.StandardCharsets;\r\n\timport java.util.ArrayList;\r\n\timport java.util.LinkedHashMap;\r\n\timport java.util.List;\r\n\timport java.util.Map;\r\n\r\n\tpublic class JsonServer {\r\n\t\tprivate static final String HOSTNAME = &quot;localhost&quot;;\r\n\t\tprivate static final int PORT = 8080;\r\n\t\tprivate static final int BACKLOG = 1;\r\n\r\n\t\tprivate static final String HEADER_ALLOW = &quot;Allow&quot;;\r\n\t\tprivate static final String HEADER_CONTENT_TYPE = &quot;Content-Type&quot;;\r\n\r\n\t\tprivate static final Charset CHARSET = StandardCharsets.UTF_8;\r\n\r\n\t\tprivate static final int STATUS_OK = 200;\r\n\t\tprivate static final int STATUS_METHOD_NOT_ALLOWED = 405;\r\n\r\n\t\tprivate static final int NO_RESPONSE_LENGTH = -1;\r\n\r\n\t\tprivate static final String METHOD_GET = &quot;GET&quot;;\r\n\t\tprivate static final String METHOD_OPTIONS = &quot;OPTIONS&quot;;\r\n\t\tprivate static final String ALLOWED_METHODS = METHOD_GET + &quot;,&quot; + METHOD_OPTIONS;\r\n\r\n\t\tpublic static void main(final String... args) throws IOException {\r\n\t\t\tfinal HttpServer server = HttpServer.create(new InetSocketAddress(HOSTNAME, PORT), BACKLOG);\r\n\t\t\tserver.createContext(&quot;/func1&quot;, he -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfinal Headers headers = he.getResponseHeaders();\r\n\t\t\t\t\tfinal String requestMethod = he.getRequestMethod().toUpperCase();\r\n\t\t\t\t\tswitch (requestMethod) {\r\n\t\t\t\t\t\tcase METHOD_GET:\r\n\t\t\t\t\t\t\tfinal Map&lt;String, List&lt;String&gt;&gt; requestParameters = getRequestParameters(he.getRequestURI());\r\n\t\t\t\t\t\t\t// do something with the request parameters\r\n\t\t\t\t\t\t\tfinal String responseBody = &quot;[&#39;hello world!&#39;]&quot;;\r\n\t\t\t\t\t\t\theaders.set(HEADER_CONTENT_TYPE, String.format(&quot;application/json; charset=%s&quot;, CHARSET));\r\n\t\t\t\t\t\t\tfinal byte[] rawResponseBody = responseBody.getBytes(CHARSET);\r\n\t\t\t\t\t\t\the.sendResponseHeaders(STATUS_OK, rawResponseBody.length);\r\n\t\t\t\t\t\t\the.getResponseBody().write(rawResponseBody);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase METHOD_OPTIONS:\r\n\t\t\t\t\t\t\theaders.set(HEADER_ALLOW, ALLOWED_METHODS);\r\n\t\t\t\t\t\t\the.sendResponseHeaders(STATUS_OK, NO_RESPONSE_LENGTH);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\theaders.set(HEADER_ALLOW, ALLOWED_METHODS);\r\n\t\t\t\t\t\t\the.sendResponseHeaders(STATUS_METHOD_NOT_ALLOWED, NO_RESPONSE_LENGTH);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t} finally {\r\n\t\t\t\t\the.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tserver.start();\r\n\t\t}\r\n\r\n\t\tprivate static Map&lt;String, List&lt;String&gt;&gt; getRequestParameters(final URI requestUri) {\r\n\t\t\tfinal Map&lt;String, List&lt;String&gt;&gt; requestParameters = new LinkedHashMap&lt;&gt;();\r\n\t\t\tfinal String requestQuery = requestUri.getRawQuery();\r\n\t\t\tif (requestQuery != null) {\r\n\t\t\t\tfinal String[] rawRequestParameters = requestQuery.split(&quot;[&amp;;]&quot;, -1);\r\n\t\t\t\tfor (final String rawRequestParameter : rawRequestParameters) {\r\n\t\t\t\t\tfinal String[] requestParameter = rawRequestParameter.split(&quot;=&quot;, 2);\r\n\t\t\t\t\tfinal String requestParameterName = decodeUrlComponent(requestParameter[0]);\r\n\t\t\t\t\trequestParameters.putIfAbsent(requestParameterName, new ArrayList&lt;&gt;());\r\n\t\t\t\t\tfinal String requestParameterValue = requestParameter.length &gt; 1 ? decodeUrlComponent(requestParameter[1]) : null;\r\n\t\t\t\t\trequestParameters.get(requestParameterName).add(requestParameterValue);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn requestParameters;\r\n\t\t}\r\n\r\n\t\tprivate static String decodeUrlComponent(final String urlComponent) {\r\n\t\t\ttry {\r\n\t\t\t\treturn URLDecoder.decode(urlComponent, CHARSET.name());\r\n\t\t\t} catch (final UnsupportedEncodingException ex) {\r\n\t\t\t\tthrow new InternalError(ex);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nOn a side note, `[&#39;hello world!&#39;]` is invalid JSON. Strings must be enclosed in double quotes.","title":"Java: Simple HTTP Server application that responds in JSON","body":"<p>You could use classes from the package <a href=\"http://docs.oracle.com/javase/8/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html\" rel=\"nofollow noreferrer\"><code>com.sun.net.httpserver</code></a>:</p>\n<pre><code>import com.sun.net.httpserver.Headers;\nimport com.sun.net.httpserver.HttpServer;\nimport java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.net.InetSocketAddress;\nimport java.net.URI;\nimport java.net.URLDecoder;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class JsonServer {\n    private static final String HOSTNAME = &quot;localhost&quot;;\n    private static final int PORT = 8080;\n    private static final int BACKLOG = 1;\n\n    private static final String HEADER_ALLOW = &quot;Allow&quot;;\n    private static final String HEADER_CONTENT_TYPE = &quot;Content-Type&quot;;\n\n    private static final Charset CHARSET = StandardCharsets.UTF_8;\n\n    private static final int STATUS_OK = 200;\n    private static final int STATUS_METHOD_NOT_ALLOWED = 405;\n\n    private static final int NO_RESPONSE_LENGTH = -1;\n\n    private static final String METHOD_GET = &quot;GET&quot;;\n    private static final String METHOD_OPTIONS = &quot;OPTIONS&quot;;\n    private static final String ALLOWED_METHODS = METHOD_GET + &quot;,&quot; + METHOD_OPTIONS;\n\n    public static void main(final String... args) throws IOException {\n        final HttpServer server = HttpServer.create(new InetSocketAddress(HOSTNAME, PORT), BACKLOG);\n        server.createContext(&quot;/func1&quot;, he -&gt; {\n            try {\n                final Headers headers = he.getResponseHeaders();\n                final String requestMethod = he.getRequestMethod().toUpperCase();\n                switch (requestMethod) {\n                    case METHOD_GET:\n                        final Map&lt;String, List&lt;String&gt;&gt; requestParameters = getRequestParameters(he.getRequestURI());\n                        // do something with the request parameters\n                        final String responseBody = &quot;['hello world!']&quot;;\n                        headers.set(HEADER_CONTENT_TYPE, String.format(&quot;application/json; charset=%s&quot;, CHARSET));\n                        final byte[] rawResponseBody = responseBody.getBytes(CHARSET);\n                        he.sendResponseHeaders(STATUS_OK, rawResponseBody.length);\n                        he.getResponseBody().write(rawResponseBody);\n                        break;\n                    case METHOD_OPTIONS:\n                        headers.set(HEADER_ALLOW, ALLOWED_METHODS);\n                        he.sendResponseHeaders(STATUS_OK, NO_RESPONSE_LENGTH);\n                        break;\n                    default:\n                        headers.set(HEADER_ALLOW, ALLOWED_METHODS);\n                        he.sendResponseHeaders(STATUS_METHOD_NOT_ALLOWED, NO_RESPONSE_LENGTH);\n                        break;\n                }\n            } finally {\n                he.close();\n            }\n        });\n        server.start();\n    }\n\n    private static Map&lt;String, List&lt;String&gt;&gt; getRequestParameters(final URI requestUri) {\n        final Map&lt;String, List&lt;String&gt;&gt; requestParameters = new LinkedHashMap&lt;&gt;();\n        final String requestQuery = requestUri.getRawQuery();\n        if (requestQuery != null) {\n            final String[] rawRequestParameters = requestQuery.split(&quot;[&amp;;]&quot;, -1);\n            for (final String rawRequestParameter : rawRequestParameters) {\n                final String[] requestParameter = rawRequestParameter.split(&quot;=&quot;, 2);\n                final String requestParameterName = decodeUrlComponent(requestParameter[0]);\n                requestParameters.putIfAbsent(requestParameterName, new ArrayList&lt;&gt;());\n                final String requestParameterValue = requestParameter.length &gt; 1 ? decodeUrlComponent(requestParameter[1]) : null;\n                requestParameters.get(requestParameterName).add(requestParameterValue);\n            }\n        }\n        return requestParameters;\n    }\n\n    private static String decodeUrlComponent(final String urlComponent) {\n        try {\n            return URLDecoder.decode(urlComponent, CHARSET.name());\n        } catch (final UnsupportedEncodingException ex) {\n            throw new InternalError(ex);\n        }\n    }\n}\n</code></pre>\n<p>On a side note, <code>['hello world!']</code> is invalid JSON. Strings must be enclosed in double quotes.</p>\n"},{"comments":[{"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"score":0,"creation_date":1424209550,"post_id":28571597,"comment_id":45453176,"body_markdown":"Thank you for your answer. How in your code can I define that it will be called only for `func1`? If I get a call with `func2`, I would like to respond differently","body":"Thank you for your answer. How in your code can I define that it will be called only for <code>func1</code>? If I get a call with <code>func2</code>, I would like to respond differently"},{"owner":{"account_id":2198916,"reputation":2007,"user_id":1943878,"accept_rate":90,"display_name":"Rafa"},"score":1,"creation_date":1424211457,"post_id":28571597,"comment_id":45454099,"body_markdown":"One way to do it, map func1 to a class and func2 to another class... there are many other ways to do it, but this is the simplest.","body":"One way to do it, map func1 to a class and func2 to another class... there are many other ways to do it, but this is the simplest."}],"tags":[],"owner":{"account_id":2198916,"reputation":2007,"user_id":1943878,"accept_rate":90,"display_name":"Rafa"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424363556,"creation_date":1424209214,"answer_id":28571597,"question_id":28571086,"body_markdown":"If you are already familiar with servlet you do not need much to create a simple server to achieve what you want. But I would like to emphasize that your needs will likely to increase rapidly and therefore you may need to move to a RESTful framework (e.g.: Spring WS, Apache CXF) down the road.\r\n\r\nYou need to register URIs and get parameters using the standard servlet technology. Maybe you can start here: [http://docs.oracle.com/cd/E13222_01/wls/docs92/webapp/configureservlet.html][1]\r\n\r\nNext, you need a JSON provider and serialize (aka marshall) it in JSON format. I recommend JACKSON. Take a look at this tutorial:\r\n[http://www.sivalabs.in/2011/03/json-processing-using-jackson-java-json.html][2]\r\n\r\n\r\nFinally, your code will look similar to this:\r\n\r\n    public class Func1Servlet extends HttpServlet {\r\n      public void doGet(HttpServletRequest req, HttpServletResponse resp)\r\n        throws ServletException, IOException {\r\n    \r\n        String p1 = req.getParameter(&quot;param1&quot;);\r\n        String p2 = req.getParameter(&quot;param2&quot;);\r\n    \r\n        // Do Something with the params\r\n    \r\n        ResponseJSON resultJSON = new ResponseJSON();\r\n        resultJSON.setProperty1(yourPropert1);\r\n        resultJSON.setProperty2(yourPropert2);\r\n    \r\n        // Convert your JSON object into JSON string\r\n        Writer strWriter = new StringWriter();\r\n        mapper.writeValue(strWriter, resultJSON);\r\n        String resultString = strWriter.toString();\r\n    \r\n        resp.setContentType(&quot;application/json&quot;);\r\n        out.println(resultString );\r\n      }\r\n    }\r\n\r\nMap URLs in your web.xml:\r\n\r\n    &lt;servlet&gt;\r\n      &lt;servlet-name&gt;func1Servlet&lt;/servlet-name&gt;\r\n      &lt;servlet-class&gt;myservlets.func1servlet&lt;/servlet-class&gt;\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n      &lt;servlet-name&gt;func1Servlet&lt;/servlet-name&gt;\r\n      &lt;url-pattern&gt;/func1/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\n\r\nKeep in mind this is a pseudo-code. There are lots you can do to enhance it, adding some utility classes, etc...\r\n\r\nNevertheless, as your project grows your need for a more comprehensive framework becomes more evident.\r\n\r\n\r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/cd/E13222_01/wls/docs92/webapp/configureservlet.html\r\n  [2]: http://www.sivalabs.in/2011/03/json-processing-using-jackson-java-json.html","title":"Java: Simple HTTP Server application that responds in JSON","body":"<p>If you are already familiar with servlet you do not need much to create a simple server to achieve what you want. But I would like to emphasize that your needs will likely to increase rapidly and therefore you may need to move to a RESTful framework (e.g.: Spring WS, Apache CXF) down the road.</p>\n\n<p>You need to register URIs and get parameters using the standard servlet technology. Maybe you can start here: <a href=\"http://docs.oracle.com/cd/E13222_01/wls/docs92/webapp/configureservlet.html\" rel=\"nofollow\">http://docs.oracle.com/cd/E13222_01/wls/docs92/webapp/configureservlet.html</a></p>\n\n<p>Next, you need a JSON provider and serialize (aka marshall) it in JSON format. I recommend JACKSON. Take a look at this tutorial:\n<a href=\"http://www.sivalabs.in/2011/03/json-processing-using-jackson-java-json.html\" rel=\"nofollow\">http://www.sivalabs.in/2011/03/json-processing-using-jackson-java-json.html</a></p>\n\n<p>Finally, your code will look similar to this:</p>\n\n<pre><code>public class Func1Servlet extends HttpServlet {\n  public void doGet(HttpServletRequest req, HttpServletResponse resp)\n    throws ServletException, IOException {\n\n    String p1 = req.getParameter(\"param1\");\n    String p2 = req.getParameter(\"param2\");\n\n    // Do Something with the params\n\n    ResponseJSON resultJSON = new ResponseJSON();\n    resultJSON.setProperty1(yourPropert1);\n    resultJSON.setProperty2(yourPropert2);\n\n    // Convert your JSON object into JSON string\n    Writer strWriter = new StringWriter();\n    mapper.writeValue(strWriter, resultJSON);\n    String resultString = strWriter.toString();\n\n    resp.setContentType(\"application/json\");\n    out.println(resultString );\n  }\n}\n</code></pre>\n\n<p>Map URLs in your web.xml:</p>\n\n<pre><code>&lt;servlet&gt;\n  &lt;servlet-name&gt;func1Servlet&lt;/servlet-name&gt;\n  &lt;servlet-class&gt;myservlets.func1servlet&lt;/servlet-class&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;func1Servlet&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/func1/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>Keep in mind this is a pseudo-code. There are lots you can do to enhance it, adding some utility classes, etc...</p>\n\n<p>Nevertheless, as your project grows your need for a more comprehensive framework becomes more evident.</p>\n"},{"tags":[],"owner":{"account_id":5735131,"reputation":1080,"user_id":4529546,"accept_rate":75,"display_name":"Richard"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424212247,"creation_date":1424212247,"answer_id":28572398,"question_id":28571086,"body_markdown":"You could :\r\n\r\nInstall Apache Tomcat, and just drop a JSP into the ROOT project that implements this.\r\n\r\nI second @xehpuk. It&#39;s not actually that hard to write your own single class HTTP server using just standard Java. If you want to do it in earlier versions you can use NanoHTTPD, which is a pretty well known single class HTTP server implementation.\r\n\r\nI would personally recommend that you look into Apache Sling (pretty much THE Reference implementation of a Java REST api). You could probably implement your requirements here using Sling without ANY programming at all.\r\n\r\nBut as others have suggested, the standard way to do this is to create a [java WAR][1] and deploy it into a &#39;servlet container&#39; such as Tomcat or Jetty etc.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/WAR_%28file_format%29","title":"Java: Simple HTTP Server application that responds in JSON","body":"<p>You could :</p>\n\n<p>Install Apache Tomcat, and just drop a JSP into the ROOT project that implements this.</p>\n\n<p>I second @xehpuk. It's not actually that hard to write your own single class HTTP server using just standard Java. If you want to do it in earlier versions you can use NanoHTTPD, which is a pretty well known single class HTTP server implementation.</p>\n\n<p>I would personally recommend that you look into Apache Sling (pretty much THE Reference implementation of a Java REST api). You could probably implement your requirements here using Sling without ANY programming at all.</p>\n\n<p>But as others have suggested, the standard way to do this is to create a <a href=\"http://en.wikipedia.org/wiki/WAR_%28file_format%29\" rel=\"nofollow\">java WAR</a> and deploy it into a 'servlet container' such as Tomcat or Jetty etc.</p>\n"},{"tags":[],"owner":{"account_id":2812323,"reputation":2352,"user_id":2418306,"accept_rate":80,"display_name":"user2418306"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520534070,"creation_date":1520533730,"answer_id":49180059,"question_id":28571086,"body_markdown":"Run `main` to start the server on port `8080`\r\n\r\n    public class Main {\r\n        public static void main(String[] args) throws LifecycleException {\r\n            Tomcat tomcat = new Tomcat();\r\n            Context context = tomcat.addContext(&quot;&quot;, null);\r\n\r\n            Tomcat.addServlet(context, &quot;func1&quot;, new HttpServlet() {\r\n                protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {\r\n                    Object response = func1(req.getParameter(&quot;param1&quot;), req.getParameter(&quot;param2&quot;));\r\n\r\n                    ObjectMapper mapper = new ObjectMapper();\r\n                    mapper.writeValue(resp.getWriter(), response);\r\n                }\r\n            });\r\n            context.addServletMappingDecoded(&quot;/func1&quot;, &quot;func1&quot;);\r\n\r\n            tomcat.start();\r\n            tomcat.getServer().await();\r\n        }\r\n\r\n        private static String[] func1(String p1, String p2) {\r\n            return new String[] { &quot;hello world&quot;, p1, p2 };\r\n        }\r\n    }\r\n\r\n\r\nGradle dependencies:\r\n\r\n    dependencies {\r\n        compile group: &#39;org.apache.tomcat.embed&#39;, name: &#39;tomcat-embed-core&#39;, version: &#39;8.5.28&#39; // doesn&#39;t work with tomcat 9\r\n        compile group: &#39;com.fasterxml.jackson.core&#39;, name: &#39;jackson-databind&#39;, version: &#39;2.9.4&#39;\r\n    }","title":"Java: Simple HTTP Server application that responds in JSON","body":"<p>Run <code>main</code> to start the server on port <code>8080</code></p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) throws LifecycleException {\n        Tomcat tomcat = new Tomcat();\n        Context context = tomcat.addContext(\"\", null);\n\n        Tomcat.addServlet(context, \"func1\", new HttpServlet() {\n            protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n                Object response = func1(req.getParameter(\"param1\"), req.getParameter(\"param2\"));\n\n                ObjectMapper mapper = new ObjectMapper();\n                mapper.writeValue(resp.getWriter(), response);\n            }\n        });\n        context.addServletMappingDecoded(\"/func1\", \"func1\");\n\n        tomcat.start();\n        tomcat.getServer().await();\n    }\n\n    private static String[] func1(String p1, String p2) {\n        return new String[] { \"hello world\", p1, p2 };\n    }\n}\n</code></pre>\n\n<p>Gradle dependencies:</p>\n\n<pre><code>dependencies {\n    compile group: 'org.apache.tomcat.embed', name: 'tomcat-embed-core', version: '8.5.28' // doesn't work with tomcat 9\n    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.4'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680555761,"creation_date":1680555761,"answer_id":75923740,"question_id":28571086,"body_markdown":"With the new [SeBootStrap API](https://www.atbash.be/2023/01/05/run-your-jakarta-application-without-runtime/), it gets simple:\r\n\r\n```java\r\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\r\n\r\npackage jaxrs.examples.bootstrap;\r\n\r\nimport java.util.Collections;\r\nimport java.util.Set;\r\n\r\nimport jakarta.ws.rs.ApplicationPath;\r\nimport jakarta.ws.rs.GET;\r\nimport jakarta.ws.rs.Path;\r\nimport jakarta.ws.rs.core.Application;\r\n\r\n@ApplicationPath(&quot;helloworld&quot;)\r\n@Path(&quot;hello&quot;)\r\npublic class HelloWorld extends Application {\r\n\r\n    @Override\r\n    public Set&lt;Class&lt;?&gt;&gt; getClasses() {\r\n        return Collections.singleton(HelloWorld.class);\r\n    }\r\n\r\n    @GET\r\n    public String sayHello() {\r\n        return &quot;Hello, World!&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nSource: https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/HelloWorld.java\r\n\r\nThis serves the String `Hello, World!` at `helloworld/hello`.\r\n\r\nYou need some boilerplate code:\r\n\r\n    public static void main(final String[] args) throws InterruptedException {\r\n        SeBootstrap.start(HelloWorld.class).thenAccept(instance -&gt; {\r\n            instance.stopOnShutdown(stopResult -&gt;\r\n                    System.out.printf(&quot;Stop result: %s [Native stop result: %s].%n&quot;, stopResult,\r\n                            stopResult.unwrap(Object.class)));\r\n            final URI uri = instance.configuration().baseUri();\r\n            System.out.printf(&quot;Instance %s running at %s [Native handle: %s].%n&quot;, instance, uri,\r\n                    instance.unwrap(Object.class));\r\n            System.out.println(&quot;Send SIGKILL to shutdown.&quot;);\r\n        });\r\n\r\n        Thread.currentThread().join();\r\n    }\r\n\r\nFor creating JSON, I recommond two APIs:\r\n\r\n- [GSon](https://github.com/google/gson) as a very slim API\r\n- [Jackson](https://github.com/FasterXML/jackson#what-is-jackson). You will find dozens of tutorials out there.\r\n\r\nA full tutorial can be found at https://headcrashing.wordpress.com/2022/05/28/coding-microservice-from-scratch-part-1-of-7-jax-rs-done-right-head-crashing-informatics-53/.","title":"Java: Simple HTTP Server application that responds in JSON","body":"<p>With the new <a href=\"https://www.atbash.be/2023/01/05/run-your-jakarta-application-without-runtime/\" rel=\"nofollow noreferrer\">SeBootStrap API</a>, it gets simple:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n\npackage jaxrs.examples.bootstrap;\n\nimport java.util.Collections;\nimport java.util.Set;\n\nimport jakarta.ws.rs.ApplicationPath;\nimport jakarta.ws.rs.GET;\nimport jakarta.ws.rs.Path;\nimport jakarta.ws.rs.core.Application;\n\n@ApplicationPath(&quot;helloworld&quot;)\n@Path(&quot;hello&quot;)\npublic class HelloWorld extends Application {\n\n    @Override\n    public Set&lt;Class&lt;?&gt;&gt; getClasses() {\n        return Collections.singleton(HelloWorld.class);\n    }\n\n    @GET\n    public String sayHello() {\n        return &quot;Hello, World!&quot;;\n    }\n\n}\n</code></pre>\n<p>Source: <a href=\"https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/HelloWorld.java\" rel=\"nofollow noreferrer\">https://github.com/jakartaee/rest/blob/master/examples/src/main/java/jaxrs/examples/bootstrap/HelloWorld.java</a></p>\n<p>This serves the String <code>Hello, World!</code> at <code>helloworld/hello</code>.</p>\n<p>You need some boilerplate code:</p>\n<pre><code>public static void main(final String[] args) throws InterruptedException {\n    SeBootstrap.start(HelloWorld.class).thenAccept(instance -&gt; {\n        instance.stopOnShutdown(stopResult -&gt;\n                System.out.printf(&quot;Stop result: %s [Native stop result: %s].%n&quot;, stopResult,\n                        stopResult.unwrap(Object.class)));\n        final URI uri = instance.configuration().baseUri();\n        System.out.printf(&quot;Instance %s running at %s [Native handle: %s].%n&quot;, instance, uri,\n                instance.unwrap(Object.class));\n        System.out.println(&quot;Send SIGKILL to shutdown.&quot;);\n    });\n\n    Thread.currentThread().join();\n}\n</code></pre>\n<p>For creating JSON, I recommond two APIs:</p>\n<ul>\n<li><a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">GSon</a> as a very slim API</li>\n<li><a href=\"https://github.com/FasterXML/jackson#what-is-jackson\" rel=\"nofollow noreferrer\">Jackson</a>. You will find dozens of tutorials out there.</li>\n</ul>\n<p>A full tutorial can be found at <a href=\"https://headcrashing.wordpress.com/2022/05/28/coding-microservice-from-scratch-part-1-of-7-jax-rs-done-right-head-crashing-informatics-53/\" rel=\"nofollow noreferrer\">https://headcrashing.wordpress.com/2022/05/28/coding-microservice-from-scratch-part-1-of-7-jax-rs-done-right-head-crashing-informatics-53/</a>.</p>\n"}],"owner":{"account_id":4038832,"reputation":11673,"user_id":3322273,"accept_rate":73,"display_name":"SomethingSomething"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31034,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":28571398,"answer_count":5,"score":10,"last_activity_date":1680555761,"creation_date":1424207095,"question_id":28571086,"body_markdown":"I want to create a very simple HTTP server application in Java.\r\n\r\nFor example, if I run the server on **localhost** in port **8080**, and I make to following call from my browser, I want to get a Json array with the string &#39;hello world!&#39;:\r\n\r\n    http://localhost:8080/func1?param1=123&amp;param2=456\r\n\r\n\r\n\r\nI would like to have in the server something that looks like this (very abstract code):\r\n\r\n    // Retunrs JSON String\r\n    String func1(String param1, String param2) {\r\n        // Do Something with the params\r\n        String jsonFormattedResponse = &quot;[&#39;hello world!&#39;]&quot;;\r\n        \r\n        return jsonFormattedResponse;\r\n    }\r\n\r\n\r\nI guess that this function should not actually &quot;return&quot; the json, but to send it using some HTTP response handler or something similar...\r\n\r\nWhat it the simplest way to do it, without a need to get familiar with many kinds of 3rd party libraries that have special features and methodology?","title":"Java: Simple HTTP Server application that responds in JSON","body":"<p>I want to create a very simple HTTP server application in Java.</p>\n\n<p>For example, if I run the server on <strong>localhost</strong> in port <strong>8080</strong>, and I make to following call from my browser, I want to get a Json array with the string 'hello world!':</p>\n\n<pre><code>http://localhost:8080/func1?param1=123&amp;param2=456\n</code></pre>\n\n<p>I would like to have in the server something that looks like this (very abstract code):</p>\n\n<pre><code>// Retunrs JSON String\nString func1(String param1, String param2) {\n    // Do Something with the params\n    String jsonFormattedResponse = \"['hello world!']\";\n\n    return jsonFormattedResponse;\n}\n</code></pre>\n\n<p>I guess that this function should not actually \"return\" the json, but to send it using some HTTP response handler or something similar...</p>\n\n<p>What it the simplest way to do it, without a need to get familiar with many kinds of 3rd party libraries that have special features and methodology?</p>\n"},{"tags":["java","docker","google-cloud-run"],"comments":[{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":3,"creation_date":1680556619,"post_id":75923739,"comment_id":133915651,"body_markdown":"Related: [Is -XX:MaxRAMFraction=1 safe for production in a containered environment?](https://stackoverflow.com/questions/49854237/is-xxmaxramfraction-1-safe-for-production-in-a-containered-environment)","body":"Related: <a href=\"https://stackoverflow.com/questions/49854237/is-xxmaxramfraction-1-safe-for-production-in-a-containered-environment\">Is -XX:MaxRAMFraction=1 safe for production in a containered environment?</a>"},{"owner":{"account_id":22733076,"reputation":3723,"user_id":16895640,"display_name":"Marc Anthony B"},"score":0,"creation_date":1681322709,"post_id":75923739,"comment_id":134039326,"body_markdown":"Does this answer your question? [Is -XX:MaxRAMFraction=1 safe for production in a containered environment?](https://stackoverflow.com/questions/49854237/is-xxmaxramfraction-1-safe-for-production-in-a-containered-environment)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/49854237/is-xxmaxramfraction-1-safe-for-production-in-a-containered-environment\">Is -XX:MaxRAMFraction=1 safe for production in a containered environment?</a>"},{"owner":{"account_id":228863,"reputation":6861,"user_id":491436,"accept_rate":82,"display_name":"cobolstinks"},"score":0,"creation_date":1681928719,"post_id":75923739,"comment_id":134137702,"body_markdown":"@MarcAnthonyB yeap","body":"@MarcAnthonyB yeap"}],"owner":{"account_id":228863,"reputation":6861,"user_id":491436,"accept_rate":82,"display_name":"cobolstinks"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":431,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680555757,"creation_date":1680555757,"question_id":75923739,"body_markdown":"I&#39;m trouble shooting a memory issue I have in a spring boot app and I&#39;m pretty new to deploying java apps in docker containers.  I have an app running in Google Cloud&#39;s Cloud Run.  \r\n\r\nThe Container has 4GB of memory available, but when I add some logging code to my main spring boot class \r\n\r\n    logger.info(&quot;heap size:  &quot; + Runtime.getRuntime().totalMemory());\r\n    logger.info(&quot;max heap size:  &quot; + Runtime.getRuntime().maxMemory());\r\n    \r\nI find out that my JVM running inside my container only sees a max heap size of ~1GB.  Digging into this it seems like the default behavior after JDK 10 is that the JVM in the container will set the max heap to 1/4 of the memory available to the container.  \r\n\r\nWhy is this the default behavior?  It seems wasteful to not allow the heap to expand any further.  Is it so that the base image code may have enough ram to do what it needs?  My base image is \r\n\r\n    FROM eclipse-temurin:17-jdk-alpine\r\n\r\nI&#39;m only running one spring-boot api app in the container but frequently need to stream massive amounts of json to the browser (hundreds of Mb at a time). I think I can override the default -Xmx heap setting by providing a JAVA_OPTS ENV variable to the container and using it in my docker file, but how do I know what a safe value is for this?  Do base images typically post how much RAM they need to maintain basic functionality?","title":"Java Containerized App. Container Memory Vs JVM Heap","body":"<p>I'm trouble shooting a memory issue I have in a spring boot app and I'm pretty new to deploying java apps in docker containers.  I have an app running in Google Cloud's Cloud Run.</p>\n<p>The Container has 4GB of memory available, but when I add some logging code to my main spring boot class</p>\n<pre><code>logger.info(&quot;heap size:  &quot; + Runtime.getRuntime().totalMemory());\nlogger.info(&quot;max heap size:  &quot; + Runtime.getRuntime().maxMemory());\n</code></pre>\n<p>I find out that my JVM running inside my container only sees a max heap size of ~1GB.  Digging into this it seems like the default behavior after JDK 10 is that the JVM in the container will set the max heap to 1/4 of the memory available to the container.</p>\n<p>Why is this the default behavior?  It seems wasteful to not allow the heap to expand any further.  Is it so that the base image code may have enough ram to do what it needs?  My base image is</p>\n<pre><code>FROM eclipse-temurin:17-jdk-alpine\n</code></pre>\n<p>I'm only running one spring-boot api app in the container but frequently need to stream massive amounts of json to the browser (hundreds of Mb at a time). I think I can override the default -Xmx heap setting by providing a JAVA_OPTS ENV variable to the container and using it in my docker file, but how do I know what a safe value is for this?  Do base images typically post how much RAM they need to maintain basic functionality?</p>\n"},{"tags":["java","spring-boot","amazon-cognito"],"comments":[{"owner":{"account_id":19514117,"reputation":1316,"user_id":14277434,"display_name":"Elmar Brauch"},"score":0,"creation_date":1647373525,"post_id":71486456,"comment_id":126353808,"body_markdown":"Sounds like an issue in your `SecurityConfiguration` (chapter 3.3 in the linked article). Can you share this file?","body":"Sounds like an issue in your <code>SecurityConfiguration</code> (chapter 3.3 in the linked article). Can you share this file?"},{"owner":{"account_id":460854,"reputation":75,"user_id":862210,"accept_rate":43,"display_name":"Frotty"},"score":0,"creation_date":1647430318,"post_id":71486456,"comment_id":126367727,"body_markdown":"@ElmarBrauch Thanks for your comment. My SecurityConfig indeed does differ, because I do not require html templating, only programmatic REST access. I have attached the code, Could this be the issue?","body":"@ElmarBrauch Thanks for your comment. My SecurityConfig indeed does differ, because I do not require html templating, only programmatic REST access. I have attached the code, Could this be the issue?"},{"owner":{"account_id":460854,"reputation":75,"user_id":862210,"accept_rate":43,"display_name":"Frotty"},"score":0,"creation_date":1647431614,"post_id":71486456,"comment_id":126368204,"body_markdown":"I have tried several variations of the config, but it seems to always results in either only the login page showing, or no auth being required at all (then i get the api response, but even without any token)","body":"I have tried several variations of the config, but it seems to always results in either only the login page showing, or no auth being required at all (then i get the api response, but even without any token)"}],"answers":[{"tags":[],"owner":{"account_id":19514117,"reputation":1316,"user_id":14277434,"display_name":"Elmar Brauch"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1647526142,"creation_date":1647526142,"answer_id":71513755,"question_id":71486456,"body_markdown":"Your problem is in your `SecurityConfiguration`. You defined everything for anyRequest. You can use antMatchers to define authentication only for some request based on URL-path. Or you can give free access with permitAll to limited URLs by path with antMatchers. Here is an example how antMatchers can be used and how you can deal with all remaining (anyRequest) URL-paths.\r\n\r\n    @Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\thttp.authorizeRequests()\r\n\t\t\t.antMatchers(&quot;/needToken&quot;).authenticated()\r\n\t\t\t.anyRequest().permitAll();\r\n\t}","title":"Spring Boot with Cognito always shows login screen in postman","body":"<p>Your problem is in your <code>SecurityConfiguration</code>. You defined everything for anyRequest. You can use antMatchers to define authentication only for some request based on URL-path. Or you can give free access with permitAll to limited URLs by path with antMatchers. Here is an example how antMatchers can be used and how you can deal with all remaining (anyRequest) URL-paths.</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.authorizeRequests()\n        .antMatchers(&quot;/needToken&quot;).authenticated()\n        .anyRequest().permitAll();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1668961662,"post_id":74507828,"comment_id":131527924,"body_markdown":"Additional security config you&#39;ll likely need is mapping Cognito roles to Spring authorities. You&#39;ll also probably need CORS configuration and maybe sessions (and CSRF protection) disabling. Tutorials there: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","body":"Additional security config you&#39;ll likely need is mapping Cognito roles to Spring authorities. You&#39;ll also probably need CORS configuration and maybe sessions (and CSRF protection) disabling. Tutorials there: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s</a>"}],"tags":[],"owner":{"account_id":6845383,"reputation":234,"user_id":5264368,"display_name":"nailer_boxer"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680555528,"creation_date":1668945182,"answer_id":74507828,"question_id":71486456,"body_markdown":"In your case your service is in the role of a resource server. In the context of OAuth2 a resource server is an application, which endpoints are secured via OAuth tokens.\r\n\r\nThe basic configuration to make this work would be:\r\n\r\nAdd the following dependencies in your `pom.xml`:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\nIn your `application.yml`:\r\n\r\n```\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: https://cognito-idp.us-east-1.amazonaws.com/us-east-1_zcZ0Enk0d\r\n```\r\nYour resource server will use this property to validate the incoming `JWT` tokens.\r\n\r\nThis is all you need in order to secure all your endpoints.\r\n\r\nIf you need to add any custom security configuration here is an example:\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class CustomSecurityConfiguration {\r\n    \r\n        @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .mvcMatchers(&quot;/my-public-endpoint&quot;).permitAll()\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nYou can find further information in the `spring-security` [documentation][1]\r\n\r\n\r\nHere is also one [tutorial][2]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html\r\n  [2]: https://blog.marcusjanke.de/spring-boot-2-3-oauth-2-jwt-security-using-amazon-cognito-d10e4e40ac05","title":"Spring Boot with Cognito always shows login screen in postman","body":"<p>In your case your service is in the role of a resource server. In the context of OAuth2 a resource server is an application, which endpoints are secured via OAuth tokens.</p>\n<p>The basic configuration to make this work would be:</p>\n<p>Add the following dependencies in your <code>pom.xml</code>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In your <code>application.yml</code>:</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: https://cognito-idp.us-east-1.amazonaws.com/us-east-1_zcZ0Enk0d\n</code></pre>\n<p>Your resource server will use this property to validate the incoming <code>JWT</code> tokens.</p>\n<p>This is all you need in order to secure all your endpoints.</p>\n<p>If you need to add any custom security configuration here is an example:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class CustomSecurityConfiguration {\n    \n        @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(authorize -&gt; authorize\n                        .mvcMatchers(&quot;/my-public-endpoint&quot;).permitAll()\n                        .anyRequest().authenticated()\n                )\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .build();\n    }\n}\n</code></pre>\n<p>You can find further information in the <code>spring-security</code> <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>Here is also one <a href=\"https://blog.marcusjanke.de/spring-boot-2-3-oauth-2-jwt-security-using-amazon-cognito-d10e4e40ac05\" rel=\"nofollow noreferrer\">tutorial</a></p>\n"}],"owner":{"account_id":460854,"reputation":75,"user_id":862210,"accept_rate":43,"display_name":"Frotty"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":898,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1680555528,"creation_date":1647365006,"question_id":71486456,"body_markdown":"I am trying to debug a spring boot application secured behind AWS cognito.\r\nI have set up the user pools and app config according to these tutorials:\r\n- https://www.baeldung.com/spring-security-oauth-cognito\r\n- https://www.czetsuyatech.com/2021/01/aws-generate-cognito-access-token.html\r\n- https://betterjavacode.com/programming/example-of-spring-boot-application-authentication-with-aws-cognito\r\n\r\nI am only interested in programmatic REST access, not spring mvc.\r\nDemo Controller:\r\n```\r\n    @GetMapping(path = &quot;/hello&quot;)\r\n    public ResponseEntity&lt;String&gt; hello() {\r\n        System.out.println(&quot;Hello&quot;);\r\n        return new ResponseEntity&lt;&gt;(&quot;Hello&quot;, HttpStatus.OK);\r\n    }\r\n```\r\n\r\napplication.yml\r\n```\r\nspring:\r\n  servlet:\r\n    multipart:\r\n      max-file-size: 50MB\r\n      max-request-size: 50MB\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          cognito:\r\n            clientId: xxxxxx\r\n            clientSecret: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n            scope: openid\r\n            redirect-uri: http://localhost:8080/login/oauth2/code/cognito\r\n            clientName: w3p-app-client\r\n        provider:\r\n          cognito:\r\n            issuerUri: https://cognito-idp.us-east-1.amazonaws.com/us-east-1_zcZ0Enk0d\r\n            user-name-attribute: cognito:username\r\n```\r\n\r\nSecurity Config:\r\n```\r\n@Configuration\r\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf()\r\n                .and()\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .oauth2Login()\r\n                .and()\r\n                .logout()\r\n                .logoutSuccessUrl(&quot;/&quot;);\r\n    }\r\n}\r\n```\r\n\r\nAnd this works in a browser `localhost:8080/hello`. I get the cognito login page where I can sign in with a demo user created in the user pool. After that I get the text &quot;Hello&quot; in my browser as expected.\r\n\r\nNow I wanted to setup a postman collection for testing my API:\r\n[![postman config][1]][1]\r\n\r\n\r\n&quot;Get New Access Token&quot; opens the cognito login where I can successfully sign in and obtain the token. However if I now try to acces my `/hello`, with inherited auth from the parent, I still get redirected to the cognito login every time, even though the token is sent along.\r\n\r\n[![enter image description here][2]][2]\r\n \r\nI have saved the collection and request, I have tried with and without bearer, enabled all options in cognito and whatnot. At this point I am out of ideas. Any hints would be appreciated. For some reason cognito does not redirect to my api as in the browser, but send the login page instead. It seems like any auth setting is completely ignored, same behavior with &quot;no auth&quot; selected.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JFIon.png\r\n  [2]: https://i.stack.imgur.com/tSoWx.png\r\n  [3]: https://i.stack.imgur.com/qgq1T.png","title":"Spring Boot with Cognito always shows login screen in postman","body":"<p>I am trying to debug a spring boot application secured behind AWS cognito.\nI have set up the user pools and app config according to these tutorials:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-security-oauth-cognito\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-security-oauth-cognito</a></li>\n<li><a href=\"https://www.czetsuyatech.com/2021/01/aws-generate-cognito-access-token.html\" rel=\"nofollow noreferrer\">https://www.czetsuyatech.com/2021/01/aws-generate-cognito-access-token.html</a></li>\n<li><a href=\"https://betterjavacode.com/programming/example-of-spring-boot-application-authentication-with-aws-cognito\" rel=\"nofollow noreferrer\">https://betterjavacode.com/programming/example-of-spring-boot-application-authentication-with-aws-cognito</a></li>\n</ul>\n<p>I am only interested in programmatic REST access, not spring mvc.\nDemo Controller:</p>\n<pre><code>    @GetMapping(path = &quot;/hello&quot;)\n    public ResponseEntity&lt;String&gt; hello() {\n        System.out.println(&quot;Hello&quot;);\n        return new ResponseEntity&lt;&gt;(&quot;Hello&quot;, HttpStatus.OK);\n    }\n</code></pre>\n<p>application.yml</p>\n<pre><code>spring:\n  servlet:\n    multipart:\n      max-file-size: 50MB\n      max-request-size: 50MB\n  security:\n    oauth2:\n      client:\n        registration:\n          cognito:\n            clientId: xxxxxx\n            clientSecret: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n            scope: openid\n            redirect-uri: http://localhost:8080/login/oauth2/code/cognito\n            clientName: w3p-app-client\n        provider:\n          cognito:\n            issuerUri: https://cognito-idp.us-east-1.amazonaws.com/us-east-1_zcZ0Enk0d\n            user-name-attribute: cognito:username\n</code></pre>\n<p>Security Config:</p>\n<pre><code>@Configuration\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf()\n                .and()\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .oauth2Login()\n                .and()\n                .logout()\n                .logoutSuccessUrl(&quot;/&quot;);\n    }\n}\n</code></pre>\n<p>And this works in a browser <code>localhost:8080/hello</code>. I get the cognito login page where I can sign in with a demo user created in the user pool. After that I get the text &quot;Hello&quot; in my browser as expected.</p>\n<p>Now I wanted to setup a postman collection for testing my API:\n<a href=\"https://i.stack.imgur.com/JFIon.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JFIon.png\" alt=\"postman config\" /></a></p>\n<p>&quot;Get New Access Token&quot; opens the cognito login where I can successfully sign in and obtain the token. However if I now try to acces my <code>/hello</code>, with inherited auth from the parent, I still get redirected to the cognito login every time, even though the token is sent along.</p>\n<p><a href=\"https://i.stack.imgur.com/tSoWx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tSoWx.png\" alt=\"enter image description here\" /></a></p>\n<p>I have saved the collection and request, I have tried with and without bearer, enabled all options in cognito and whatnot. At this point I am out of ideas. Any hints would be appreciated. For some reason cognito does not redirect to my api as in the browser, but send the login page instead. It seems like any auth setting is completely ignored, same behavior with &quot;no auth&quot; selected.</p>\n<p><a href=\"https://i.stack.imgur.com/qgq1T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qgq1T.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","postgresql","liquibase"],"comments":[{"owner":{"account_id":10335627,"reputation":13845,"user_id":7623856,"display_name":"Belayer"},"score":0,"creation_date":1680632758,"post_id":75923702,"comment_id":133930246,"body_markdown":"Looks like a missing `commit`.","body":"Looks like a missing <code>commit</code>."}],"owner":{"account_id":2922055,"reputation":557,"user_id":2504079,"accept_rate":100,"display_name":"James"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680555421,"creation_date":1680555421,"question_id":75923702,"body_markdown":"liquibase (Java liquibase-core) version `4.9.1` \r\n\r\npostgres container `postgis/postgis:14-3.3`\r\n\r\nI tried to use `liquibase.dropAll()` to clear the entire database after some tests. The code looks like:\r\n\r\n```\r\n    // point A\r\n    if (isDropFirst()) {\r\n\t\tliquibase.dropAll();\r\n\t}\r\n    // point B\r\n```\r\nHowever, it did not appear to drop any table. When I stepped through the code in a debugging session, liquibase spent quite some time on the `dropAll` call, so it appeared doing something. No errors. But when I queried for `information_schema.tables` and some of my tables at &quot;point A&quot; and &quot;point B&quot;. There was no difference. I also checked the `defaultCatalog` and `defaultSchemaName`. Both looked right. \r\n\r\nAny pointers as to why this does not work? \r\n\r\nThanks. ","title":"liquibase dropAll does not drop the tables","body":"<p>liquibase (Java liquibase-core) version <code>4.9.1</code></p>\n<p>postgres container <code>postgis/postgis:14-3.3</code></p>\n<p>I tried to use <code>liquibase.dropAll()</code> to clear the entire database after some tests. The code looks like:</p>\n<pre><code>    // point A\n    if (isDropFirst()) {\n        liquibase.dropAll();\n    }\n    // point B\n</code></pre>\n<p>However, it did not appear to drop any table. When I stepped through the code in a debugging session, liquibase spent quite some time on the <code>dropAll</code> call, so it appeared doing something. No errors. But when I queried for <code>information_schema.tables</code> and some of my tables at &quot;point A&quot; and &quot;point B&quot;. There was no difference. I also checked the <code>defaultCatalog</code> and <code>defaultSchemaName</code>. Both looked right.</p>\n<p>Any pointers as to why this does not work?</p>\n<p>Thanks.</p>\n"},{"tags":["java","api","google-translate","transliteration"],"owner":{"account_id":2243576,"reputation":407,"user_id":1977508,"accept_rate":50,"display_name":"Furious Gamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680554856,"creation_date":1680553985,"question_id":75923561,"body_markdown":"Here is an example for the problem i am dealing with: I have chinese words written in chinese characters, and i need to get the transliterated (**NOT** translated!) version of that word in latin letters (some may call this also the &quot;pronounciation&quot; of the word in latin letters). Example:\r\n- Chinese term: 王\r\n- Translation in english: King\r\n- __*Transliteration in latin letters: W&#225;ng (&quot;pronounciation&quot;, the part we want)*__\r\n\r\nI noticed that google translate (GT) actually provides this information, as seen in this screenshot below where i marked the transliteration with red in the left bottom:\r\n[![Google translate providing transliteration circled in red.][1]][1]\r\n\r\nSo, this tells me that technically GTs API must be able to provide this if they are using it here. But when i looked for requests in the network tab of my browser i noticed that google sends back JavaScript code instead of pure data responses. Since i didn&#39;t get much wiser looking at it, I moved over to the google cloud translate API documentation for the Java library (https://cloud.google.com/java/docs/reference/google-cloud-translate/latest/com.google.cloud.translate). I read through both the basic and advanced guides for the language, created an API key and played around sending requests to the translate API for translations which all worked fine. \r\n\r\nHowever, i couldn&#39;t find any clue on if this specific type of information can be received or requested or how via the API. I know that google also has a transliterate API, but it is deprecated since 2011 and i feel like this must be built into the translate API and there seems to be only a JS version of the transliterate API.\r\n(https://developers.google.com/transliterate/v1/getting_started)\r\n\r\n**Does anyone know how one can request/receive this the transliterated term or written pronounciation from the google cloud translate API?** Maybe i missed it in the documentation, in which case i would appreciate any input for redirection.\r\n\r\n  [1]: https://i.stack.imgur.com/So1Wy.png","title":"How can i get the transliterated version or pronounciation of a word with google cloud translate API?","body":"<p>Here is an example for the problem i am dealing with: I have chinese words written in chinese characters, and i need to get the transliterated (<strong>NOT</strong> translated!) version of that word in latin letters (some may call this also the &quot;pronounciation&quot; of the word in latin letters). Example:</p>\n<ul>\n<li>Chinese term: 王</li>\n<li>Translation in english: King</li>\n<li><strong><em>Transliteration in latin letters: Wáng (&quot;pronounciation&quot;, the part we want)</em></strong></li>\n</ul>\n<p>I noticed that google translate (GT) actually provides this information, as seen in this screenshot below where i marked the transliteration with red in the left bottom:\n<a href=\"https://i.stack.imgur.com/So1Wy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/So1Wy.png\" alt=\"Google translate providing transliteration circled in red.\" /></a></p>\n<p>So, this tells me that technically GTs API must be able to provide this if they are using it here. But when i looked for requests in the network tab of my browser i noticed that google sends back JavaScript code instead of pure data responses. Since i didn't get much wiser looking at it, I moved over to the google cloud translate API documentation for the Java library (<a href=\"https://cloud.google.com/java/docs/reference/google-cloud-translate/latest/com.google.cloud.translate\" rel=\"nofollow noreferrer\">https://cloud.google.com/java/docs/reference/google-cloud-translate/latest/com.google.cloud.translate</a>). I read through both the basic and advanced guides for the language, created an API key and played around sending requests to the translate API for translations which all worked fine.</p>\n<p>However, i couldn't find any clue on if this specific type of information can be received or requested or how via the API. I know that google also has a transliterate API, but it is deprecated since 2011 and i feel like this must be built into the translate API and there seems to be only a JS version of the transliterate API.\n(<a href=\"https://developers.google.com/transliterate/v1/getting_started\" rel=\"nofollow noreferrer\">https://developers.google.com/transliterate/v1/getting_started</a>)</p>\n<p><strong>Does anyone know how one can request/receive this the transliterated term or written pronounciation from the google cloud translate API?</strong> Maybe i missed it in the documentation, in which case i would appreciate any input for redirection.</p>\n"},{"tags":["java","android","android-contentprovider","mediastore"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1675838969,"post_id":75378709,"comment_id":133011927,"body_markdown":"`file is stored in Music/MP4TestFiles` Well then String audiodir = &quot;Music/MP4TestFiles&quot;;","body":"<code>file is stored in Music&#47;MP4TestFiles</code> Well then String audiodir = &quot;Music/MP4TestFiles&quot;;"},{"owner":{"account_id":2020103,"reputation":550,"user_id":1806493,"display_name":"GGK stands for Ukraine"},"score":0,"creation_date":1675883616,"post_id":75378709,"comment_id":133026000,"body_markdown":"no, thats not correct, as I use %DIR% and like operator in query","body":"no, thats not correct, as I use %DIR% and like operator in query"}],"owner":{"account_id":2020103,"reputation":550,"user_id":1806493,"display_name":"GGK stands for Ukraine"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680554562,"creation_date":1675802013,"question_id":75378709,"body_markdown":"I got a MP4 File (MIME_TYPE = audio/x-m4a) which I can&#39;t find querying `mediastore`.\r\n\r\nI don&#39;t know if it&#39;s a video or an audio file, so I try to query File table of `mediastore` (also check video and audio table with same result).\r\n\r\nThe file is stored in Music/MP4TestFiles Folder on internal storage (not on an SD-Card, not stored in internal app storage).\r\n\r\nTesting on Android 13.\r\n\r\n    Uri uri = MediaStore.Files.getContentUri(MediaStore.VOLUME_EXTERNAL);\r\n    String audiodir = &quot;%MP4TestFiles%&quot;;\r\n    String[] projection = new String[] {\r\n                MediaStore.Files.FileColumns.MIME_TYPE,\r\n                MediaStore.Files.FileColumns.DATA,\r\n                MediaStore.Files.FileColumns.DISPLAY_NAME,\r\n                MediaStore.Files.FileColumns.DATE_ADDED,\r\n                MediaStore.Files.FileColumns._ID};\r\n\r\n    String selection = MediaStore.Files.FileColumns.RELATIVE_PATH+ &quot; like ? &quot;;\r\n    String[] selectionArgs = new String[] {audiodir};\r\n\r\n    String sortOrder = MediaStore.Files.FileColumns.DATE_ADDED + &quot; ASC&quot;;\r\n    Cursor cur = getContentResolver().query(uri, projection, selection, selectionArgs,sortOrder);\r\n\r\n    if (cur == null) {\r\n            Log.e(TAG, &quot;mp4...no file found in Directory: &quot;+audiodir);\r\n        } else if (!cur.moveToFirst()) {\r\n            Log.e(TAG, &quot;mp4 Failed to move cursor to first row (no query results). 1&quot;);\r\n        } else {\r\n            Log.d(TAG, &quot;mp4 files found&quot;)\r\n        }\r\n\r\nPermission is set in Manifest:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\r\n        tools:ignore=&quot;ScopedStorage&quot;/&gt;\r\n\r\nIf I rename the file into m4b, I got a result.\r\n\r\nAny suggestions what&#39;s going wrong?\r\n\r\nThanks,\r\nGGK\r\n","title":"Can&#39;t find mp4 Files querying mediastore","body":"<p>I got a MP4 File (MIME_TYPE = audio/x-m4a) which I can't find querying <code>mediastore</code>.</p>\n<p>I don't know if it's a video or an audio file, so I try to query File table of <code>mediastore</code> (also check video and audio table with same result).</p>\n<p>The file is stored in Music/MP4TestFiles Folder on internal storage (not on an SD-Card, not stored in internal app storage).</p>\n<p>Testing on Android 13.</p>\n<pre><code>Uri uri = MediaStore.Files.getContentUri(MediaStore.VOLUME_EXTERNAL);\nString audiodir = &quot;%MP4TestFiles%&quot;;\nString[] projection = new String[] {\n            MediaStore.Files.FileColumns.MIME_TYPE,\n            MediaStore.Files.FileColumns.DATA,\n            MediaStore.Files.FileColumns.DISPLAY_NAME,\n            MediaStore.Files.FileColumns.DATE_ADDED,\n            MediaStore.Files.FileColumns._ID};\n\nString selection = MediaStore.Files.FileColumns.RELATIVE_PATH+ &quot; like ? &quot;;\nString[] selectionArgs = new String[] {audiodir};\n\nString sortOrder = MediaStore.Files.FileColumns.DATE_ADDED + &quot; ASC&quot;;\nCursor cur = getContentResolver().query(uri, projection, selection, selectionArgs,sortOrder);\n\nif (cur == null) {\n        Log.e(TAG, &quot;mp4...no file found in Directory: &quot;+audiodir);\n    } else if (!cur.moveToFirst()) {\n        Log.e(TAG, &quot;mp4 Failed to move cursor to first row (no query results). 1&quot;);\n    } else {\n        Log.d(TAG, &quot;mp4 files found&quot;)\n    }\n</code></pre>\n<p>Permission is set in Manifest:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\n    tools:ignore=&quot;ScopedStorage&quot;/&gt;\n</code></pre>\n<p>If I rename the file into m4b, I got a result.</p>\n<p>Any suggestions what's going wrong?</p>\n<p>Thanks,\nGGK</p>\n"},{"tags":["java","mongodb","spring-boot","dns"],"comments":[{"owner":{"account_id":9083183,"reputation":172,"user_id":7366323,"display_name":"Aritra Sur Roy"},"score":0,"creation_date":1674796906,"post_id":75253259,"comment_id":132793871,"body_markdown":"Have you tried `nslookup` for the domain of your mongodb? What does that give you? Also you might try manually adding the entry for your db in `/etc/hosts` file. See if that works.","body":"Have you tried <code>nslookup</code> for the domain of your mongodb? What does that give you? Also you might try manually adding the entry for your db in <code>&#47;etc&#47;hosts</code> file. See if that works."},{"owner":{"account_id":3042169,"reputation":23,"user_id":2578894,"display_name":"Ketan Deshpande"},"score":0,"creation_date":1674847537,"post_id":75253259,"comment_id":132808202,"body_markdown":"`nslookup` for the domain returns Server, Address, and Name with their appropriate values back. I added an entry in the `hosts` file but still getting the errors.","body":"<code>nslookup</code> for the domain returns Server, Address, and Name with their appropriate values back. I added an entry in the <code>hosts</code> file but still getting the errors."},{"owner":{"account_id":9083183,"reputation":172,"user_id":7366323,"display_name":"Aritra Sur Roy"},"score":0,"creation_date":1674881676,"post_id":75253259,"comment_id":132813378,"body_markdown":"Can you share the entire stack trace from where this is occurring? If it isn&#39;t a configuration issue, then maybe something with the dependency versions or the DNS Service provider of JNDI itself.","body":"Can you share the entire stack trace from where this is occurring? If it isn&#39;t a configuration issue, then maybe something with the dependency versions or the DNS Service provider of JNDI itself."},{"owner":{"account_id":3042169,"reputation":23,"user_id":2578894,"display_name":"Ketan Deshpande"},"score":0,"creation_date":1674919193,"post_id":75253259,"comment_id":132818570,"body_markdown":"@AritraSurRoy Added the stack trace. I doubt having issues with the dependencies (but not sure though) because the same code works on all of my teammates&#39; ends. And I&#39;m certain that I didn&#39;t do anything different/additional on my PC from what they did.","body":"@AritraSurRoy Added the stack trace. I doubt having issues with the dependencies (but not sure though) because the same code works on all of my teammates&#39; ends. And I&#39;m certain that I didn&#39;t do anything different/additional on my PC from what they did."},{"owner":{"account_id":9083183,"reputation":172,"user_id":7366323,"display_name":"Aritra Sur Roy"},"score":0,"creation_date":1674962659,"post_id":75253259,"comment_id":132825144,"body_markdown":"I believe [this](https://github.com/mongodb/mongo-java-driver/blob/54a72fe7d3eef7378c79998a1482165f04324a87/driver-core/src/main/com/mongodb/internal/dns/JndiDnsClient.java#L41) is the main line in `JndiDnsClient` that&#39;s causing the exception. When it tries to resolve the DNS record for `srv` domains [here](https://github.com/mongodb/mongo-java-driver/blob/54a72fe7d3eef7378c79998a1482165f04324a87/driver-core/src/main/com/mongodb/internal/dns/DefaultDnsResolver.java#L74) it fails. You can look into DNS service provider for JNDI to find the main cause of the issue.","body":"I believe <a href=\"https://github.com/mongodb/mongo-java-driver/blob/54a72fe7d3eef7378c79998a1482165f04324a87/driver-core/src/main/com/mongodb/internal/dns/JndiDnsClient.java#L41\" rel=\"nofollow noreferrer\">this</a> is the main line in <code>JndiDnsClient</code> that&#39;s causing the exception. When it tries to resolve the DNS record for <code>srv</code> domains <a href=\"https://github.com/mongodb/mongo-java-driver/blob/54a72fe7d3eef7378c79998a1482165f04324a87/driver-core/src/main/com/mongodb/internal/dns/DefaultDnsResolver.java#L74\" rel=\"nofollow noreferrer\">here</a> it fails. You can look into DNS service provider for JNDI to find the main cause of the issue."},{"owner":{"account_id":9083183,"reputation":172,"user_id":7366323,"display_name":"Aritra Sur Roy"},"score":0,"creation_date":1674963139,"post_id":75253259,"comment_id":132825185,"body_markdown":"Also check if a connection string of this format `mongodb://&lt;username&gt;:&lt;password&gt;@&lt;domain&gt;/&lt;dbname&gt;?ssl=false&amp;authMechanism=PLAIN&amp;connectTimeoutMS=30000&amp;maxIdleTimeMS=600000` is able to connect to the db.","body":"Also check if a connection string of this format <code>mongodb:&#47;&#47;&lt;username&gt;:&lt;password&gt;@&lt;domain&gt;&#47;&lt;dbname&gt;?ssl=false&amp;&zwnj;&#8203;authMechanism=PLAIN&amp;&zwnj;&#8203;connectTimeoutMS=300&zwnj;&#8203;00&amp;maxIdleTimeMS=600&zwnj;&#8203;000</code> is able to connect to the db."},{"owner":{"account_id":3042169,"reputation":23,"user_id":2578894,"display_name":"Ketan Deshpande"},"score":0,"creation_date":1677870431,"post_id":75253259,"comment_id":133429317,"body_markdown":"@AritraSurRoy Sorry for the late reply. I replaced my old laptop with a new one, hoping it would work if it was because of a hardware issue. But no luck there too. I am getting the same error on the new laptop. I tried removing srv part from my connection URL. That didn&#39;t work. How can I see the DNS service providers for JNDI? Could you share any link/stackoverflow answer?","body":"@AritraSurRoy Sorry for the late reply. I replaced my old laptop with a new one, hoping it would work if it was because of a hardware issue. But no luck there too. I am getting the same error on the new laptop. I tried removing srv part from my connection URL. That didn&#39;t work. How can I see the DNS service providers for JNDI? Could you share any link/stackoverflow answer?"}],"owner":{"account_id":3042169,"reputation":23,"user_id":2578894,"display_name":"Ketan Deshpande"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":404,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680554550,"creation_date":1674782447,"question_id":75253259,"body_markdown":"I am currently facing a weird issue. I CAN connect to the MongoDB server from MongoDB Compass and IntelliJ. But when I try to connect to the Mongo database from my Java application it continuously throws\r\n\r\n`Caused by: com.mongodb.spi.dns.DnsWithResponseCodeException: DNS name not found [response code 3]`\r\n\r\n`Caused by: javax.naming.NameNotFoundException: DNS name not found [response code 3]`\r\n\r\nBackground:\r\nI have a simple Java application and to run that I use Gradle&#39;s bootRun task. I have added `mongodb-driver-core`, `mongodb-driver-sync`, and `bson` dependencies from `org.mongodb` and `spring-data-mongodb` from `org.springframework.data`. I have added the connection string as a property in a yml file.\r\n\r\nThe connection string is:\r\n\r\n`mongodb+srv://&lt;username&gt;:&lt;password&gt;@&lt;domain&gt;/&lt;dbname&gt;?ssl=false&amp;authMechanism=PLAIN&amp;connectTimeoutMS=30000&amp;maxIdleTimeMS=600000`\r\n\r\nand here is my mongo config class:\r\n\r\n```\r\n@Configuration\r\npublic class MongoConfiguration {\r\n\r\n    @Bean\r\n    public MongoClient mongoClient(@Value(&quot;${spring.data.mongodb.uri}&quot;) String url) {\r\n        return MongoClients.create(url);\r\n\r\n    }\r\n\r\n    @Bean\r\n    public MongoTemplate mongoTemplate(MongoClient mongo,\r\n                                       @Value(&quot;${mongo.database}&quot;) String databaseName) {\r\n        MongoTemplate mongoTemplate =  new MongoTemplate(mongo, databaseName);\r\n        mongoTemplate.createCollection(&quot;Collection_Name&quot;);\r\n        return mongoTemplate;\r\n    }\r\n}\r\n```\r\n\r\nThe weird part is even if the application is throwing DNS name not found error, I can connect to the database from MongoDB Compass with the same connection string.\r\n\r\nAlso, one important thing to note here is the same code works for all of my teammates. They can access the database from the code.\r\n\r\nI have tried a few things:\r\n1. [Flush DNS](https://www.techrepublic.com/article/how-to-flush-the-dns-cache-to-improve-network-performance-in-windows-10/) cache on Windows\r\n2. Added [inbound and outbound](https://stackoverflow.com/questions/63927596/error-when-trying-to-connect-spring-boot-application-with-mongodb) for the port (30000 in my case) in the firewall\r\n3. Remove the srv part from my connection URI according to the answer in [this](https://www.mongodb.com/community/forums/t/application-randomly-throws-failed-to-look-up-srv-record-mongodb-tcp-somedomain-pri-abcde-mongodb-net-no-such-file-or-directory/148848) post\r\n4. Change the InterfaceMetric value of the DNS addresses according to [this answer](https://serverfault.com/a/1069163)\r\n5. Replace my whole work laptop 2 times and this is my third laptop.\r\n\r\nbut none of them worked yet. Any help is appreciated!\r\n\r\nHere&#39;s my complete stacktrace:\r\n```\r\n[INFO ] 2023-01-28 10:11:19 o.m.d.cluster [cluster-ClusterId{value=&#39;63d53b1769d90d388d824a76&#39;, description=&#39;null&#39;}-srv-&lt;domain&gt;]: Exception while resolving SRV records\r\ncom.mongodb.MongoConfigurationException: Failed looking up SRV record for &#39;_mongodb._tcp.&lt;domain&gt;&#39;.\r\n\tat com.mongodb.internal.dns.DefaultDnsResolver.resolveHostFromSrvRecords(DefaultDnsResolver.java:92) ~[mongodb-driver-core-4.8.2.jar:?]\r\n\tat com.mongodb.internal.connection.DefaultDnsSrvRecordMonitor$DnsSrvRecordMonitorRunnable.run(DefaultDnsSrvRecordMonitor.java:80) [mongodb-driver-core-4.8.2.jar:?]\r\n\tat java.lang.Thread.run(Thread.java:829) [?:?]\r\nCaused by: com.mongodb.spi.dns.DnsWithResponseCodeException: DNS name not found [response code 3]\r\n\tat com.mongodb.internal.dns.JndiDnsClient.getResourceRecordData(JndiDnsClient.java:52) ~[mongodb-driver-core-4.8.2.jar:?]\r\n\tat com.mongodb.internal.dns.DefaultDnsResolver.resolveHostFromSrvRecords(DefaultDnsResolver.java:74) ~[mongodb-driver-core-4.8.2.jar:?]\r\n\t... 2 more\r\nCaused by: javax.naming.NameNotFoundException: DNS name not found [response code 3]\r\n\tat com.sun.jndi.dns.DnsClient.checkResponseCode(DnsClient.java:661) ~[jdk.naming.dns:?]\r\n\tat com.sun.jndi.dns.DnsClient.isMatchResponse(DnsClient.java:579) ~[jdk.naming.dns:?]\r\n\tat com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:427) ~[jdk.naming.dns:?]\r\n\tat com.sun.jndi.dns.DnsClient.query(DnsClient.java:212) ~[jdk.naming.dns:?]\r\n\tat com.sun.jndi.dns.Resolver.query(Resolver.java:81) ~[jdk.naming.dns:?]\r\n\tat com.sun.jndi.dns.DnsContext.c_getAttributes(DnsContext.java:434) ~[jdk.naming.dns:?]\r\n\tat com.sun.jndi.toolkit.ctx.ComponentDirContext.p_getAttributes(ComponentDirContext.java:235) ~[?:?]\r\nCaused by: com.mongodb.spi.dns.DnsWithResponseCodeException: DNS name not found [response code 3]\r\n\r\n\tat com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:141) ~[?:?]\r\n\tat com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:129) ~[?:?]\r\n\tat javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:142) ~[?:?]\r\n\tat com.mongodb.internal.dns.JndiDnsClient.getResourceRecordData(JndiDnsClient.java:41) ~[mongodb-driver-core-4.8.2.jar:?]\r\n\tat com.mongodb.internal.dns.DefaultDnsResolver.resolveHostFromSrvRecords(DefaultDnsResolver.java:74) ~[mongodb-driver-core-4.8.2.jar:?]\r\n\t... 2 more\r\n[WARN ] 2023-01-28 10:11:19 o.s.d.c.CustomConversions [main]: Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn&#39;t convert from a store-supported type; You might want to check your annotation setup at the converter implementation\r\n[WARN ] 2023-01-28 10:11:19 o.s.d.c.CustomConversions [main]: Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn&#39;t convert from a store-supported type; You might want to check your annotation setup at the converter implementation\r\nCaused by: javax.naming.NameNotFoundException: DNS name not found [response code 3]\r\n```\r\n\r\n**Edit**: I ran the application in the debug mode and found that it uses the [loadDNSconfig0()](https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/windows/classes/sun/net/dns/ResolverConfigurationImpl.java#L101) native method in the loadConfig() method of ResolverConfigurationImpl.java. The loadDNSconfig0() method loads the addresses of DNS servers from the underlying OS. In the debugger window, I see the value of the &quot;os_nameservers&quot; property set to: “192.168.1.1 10.2.217.17,10.2.225.17 192.168.1.1”.\r\n\r\nI tried point number 4 from above to set the InterfaceMetric values, but that didn&#39;t work.\r\n\r\nThe application runs fine when I rearrange the server addresses in the debugger window and move the DNS addresses starting with 10 (DNS set by the company&#39;s VPN) to the top of the list. With the use of the application&#39;s endpoints, I can CRUD the data to and from Mongo.\r\n\r\nBut this is just a workaround and not a final solution.","title":"Getting DnsWithResponseCodeException and NameNotFoundException while connecting to mongo from spring boot app","body":"<p>I am currently facing a weird issue. I CAN connect to the MongoDB server from MongoDB Compass and IntelliJ. But when I try to connect to the Mongo database from my Java application it continuously throws</p>\n<p><code>Caused by: com.mongodb.spi.dns.DnsWithResponseCodeException: DNS name not found [response code 3]</code></p>\n<p><code>Caused by: javax.naming.NameNotFoundException: DNS name not found [response code 3]</code></p>\n<p>Background:\nI have a simple Java application and to run that I use Gradle's bootRun task. I have added <code>mongodb-driver-core</code>, <code>mongodb-driver-sync</code>, and <code>bson</code> dependencies from <code>org.mongodb</code> and <code>spring-data-mongodb</code> from <code>org.springframework.data</code>. I have added the connection string as a property in a yml file.</p>\n<p>The connection string is:</p>\n<p><code>mongodb+srv://&lt;username&gt;:&lt;password&gt;@&lt;domain&gt;/&lt;dbname&gt;?ssl=false&amp;authMechanism=PLAIN&amp;connectTimeoutMS=30000&amp;maxIdleTimeMS=600000</code></p>\n<p>and here is my mongo config class:</p>\n<pre><code>@Configuration\npublic class MongoConfiguration {\n\n    @Bean\n    public MongoClient mongoClient(@Value(&quot;${spring.data.mongodb.uri}&quot;) String url) {\n        return MongoClients.create(url);\n\n    }\n\n    @Bean\n    public MongoTemplate mongoTemplate(MongoClient mongo,\n                                       @Value(&quot;${mongo.database}&quot;) String databaseName) {\n        MongoTemplate mongoTemplate =  new MongoTemplate(mongo, databaseName);\n        mongoTemplate.createCollection(&quot;Collection_Name&quot;);\n        return mongoTemplate;\n    }\n}\n</code></pre>\n<p>The weird part is even if the application is throwing DNS name not found error, I can connect to the database from MongoDB Compass with the same connection string.</p>\n<p>Also, one important thing to note here is the same code works for all of my teammates. They can access the database from the code.</p>\n<p>I have tried a few things:</p>\n<ol>\n<li><a href=\"https://www.techrepublic.com/article/how-to-flush-the-dns-cache-to-improve-network-performance-in-windows-10/\" rel=\"nofollow noreferrer\">Flush DNS</a> cache on Windows</li>\n<li>Added <a href=\"https://stackoverflow.com/questions/63927596/error-when-trying-to-connect-spring-boot-application-with-mongodb\">inbound and outbound</a> for the port (30000 in my case) in the firewall</li>\n<li>Remove the srv part from my connection URI according to the answer in <a href=\"https://www.mongodb.com/community/forums/t/application-randomly-throws-failed-to-look-up-srv-record-mongodb-tcp-somedomain-pri-abcde-mongodb-net-no-such-file-or-directory/148848\" rel=\"nofollow noreferrer\">this</a> post</li>\n<li>Change the InterfaceMetric value of the DNS addresses according to <a href=\"https://serverfault.com/a/1069163\">this answer</a></li>\n<li>Replace my whole work laptop 2 times and this is my third laptop.</li>\n</ol>\n<p>but none of them worked yet. Any help is appreciated!</p>\n<p>Here's my complete stacktrace:</p>\n<pre><code>[INFO ] 2023-01-28 10:11:19 o.m.d.cluster [cluster-ClusterId{value='63d53b1769d90d388d824a76', description='null'}-srv-&lt;domain&gt;]: Exception while resolving SRV records\ncom.mongodb.MongoConfigurationException: Failed looking up SRV record for '_mongodb._tcp.&lt;domain&gt;'.\n    at com.mongodb.internal.dns.DefaultDnsResolver.resolveHostFromSrvRecords(DefaultDnsResolver.java:92) ~[mongodb-driver-core-4.8.2.jar:?]\n    at com.mongodb.internal.connection.DefaultDnsSrvRecordMonitor$DnsSrvRecordMonitorRunnable.run(DefaultDnsSrvRecordMonitor.java:80) [mongodb-driver-core-4.8.2.jar:?]\n    at java.lang.Thread.run(Thread.java:829) [?:?]\nCaused by: com.mongodb.spi.dns.DnsWithResponseCodeException: DNS name not found [response code 3]\n    at com.mongodb.internal.dns.JndiDnsClient.getResourceRecordData(JndiDnsClient.java:52) ~[mongodb-driver-core-4.8.2.jar:?]\n    at com.mongodb.internal.dns.DefaultDnsResolver.resolveHostFromSrvRecords(DefaultDnsResolver.java:74) ~[mongodb-driver-core-4.8.2.jar:?]\n    ... 2 more\nCaused by: javax.naming.NameNotFoundException: DNS name not found [response code 3]\n    at com.sun.jndi.dns.DnsClient.checkResponseCode(DnsClient.java:661) ~[jdk.naming.dns:?]\n    at com.sun.jndi.dns.DnsClient.isMatchResponse(DnsClient.java:579) ~[jdk.naming.dns:?]\n    at com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:427) ~[jdk.naming.dns:?]\n    at com.sun.jndi.dns.DnsClient.query(DnsClient.java:212) ~[jdk.naming.dns:?]\n    at com.sun.jndi.dns.Resolver.query(Resolver.java:81) ~[jdk.naming.dns:?]\n    at com.sun.jndi.dns.DnsContext.c_getAttributes(DnsContext.java:434) ~[jdk.naming.dns:?]\n    at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_getAttributes(ComponentDirContext.java:235) ~[?:?]\nCaused by: com.mongodb.spi.dns.DnsWithResponseCodeException: DNS name not found [response code 3]\n\n    at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:141) ~[?:?]\n    at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.getAttributes(PartialCompositeDirContext.java:129) ~[?:?]\n    at javax.naming.directory.InitialDirContext.getAttributes(InitialDirContext.java:142) ~[?:?]\n    at com.mongodb.internal.dns.JndiDnsClient.getResourceRecordData(JndiDnsClient.java:41) ~[mongodb-driver-core-4.8.2.jar:?]\n    at com.mongodb.internal.dns.DefaultDnsResolver.resolveHostFromSrvRecords(DefaultDnsResolver.java:74) ~[mongodb-driver-core-4.8.2.jar:?]\n    ... 2 more\n[WARN ] 2023-01-28 10:11:19 o.s.d.c.CustomConversions [main]: Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type; You might want to check your annotation setup at the converter implementation\n[WARN ] 2023-01-28 10:11:19 o.s.d.c.CustomConversions [main]: Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type; You might want to check your annotation setup at the converter implementation\nCaused by: javax.naming.NameNotFoundException: DNS name not found [response code 3]\n</code></pre>\n<p><strong>Edit</strong>: I ran the application in the debug mode and found that it uses the <a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/windows/classes/sun/net/dns/ResolverConfigurationImpl.java#L101\" rel=\"nofollow noreferrer\">loadDNSconfig0()</a> native method in the loadConfig() method of ResolverConfigurationImpl.java. The loadDNSconfig0() method loads the addresses of DNS servers from the underlying OS. In the debugger window, I see the value of the &quot;os_nameservers&quot; property set to: “192.168.1.1 10.2.217.17,10.2.225.17 192.168.1.1”.</p>\n<p>I tried point number 4 from above to set the InterfaceMetric values, but that didn't work.</p>\n<p>The application runs fine when I rearrange the server addresses in the debugger window and move the DNS addresses starting with 10 (DNS set by the company's VPN) to the top of the list. With the use of the application's endpoints, I can CRUD the data to and from Mongo.</p>\n<p>But this is just a workaround and not a final solution.</p>\n"},{"tags":["java","telegram","telegram-bot"],"owner":{"account_id":21906837,"reputation":57,"user_id":16453810,"display_name":"Sergei Lobachev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":521,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680554440,"creation_date":1680536489,"question_id":75921306,"body_markdown":"I use Java and [telegrambots](https://mvnrepository.com/artifact/org.telegram/telegrambots) library.  Tell me please. How to get the user_id of the current user in telegram bot? Could you show an example?\r\n\r\n\r\n```\r\n        if (update.hasMessage() &amp;&amp; update.getMessage().hasText()) {\r\n\r\n            String massageText = update.getMessage().getText();\r\n            long chatId = update.getMessage().getChatId();\r\n            User user = update.getMessage().getFrom();\r\n\r\n            if (massageText.equals(&quot;/start&quot;)) {\r\n\r\n                System.out.println(&quot;CurrentUserID --&gt; &quot;);\r\n\r\n                startCommandReceived(chatId, update.getMessage().getChat().getFirstName());\r\n            }\r\n        }\r\n```\r\n","title":"How to get the user_id of the current user in a telegram bot in Java?","body":"<p>I use Java and <a href=\"https://mvnrepository.com/artifact/org.telegram/telegrambots\" rel=\"nofollow noreferrer\">telegrambots</a> library.  Tell me please. How to get the user_id of the current user in telegram bot? Could you show an example?</p>\n<pre><code>        if (update.hasMessage() &amp;&amp; update.getMessage().hasText()) {\n\n            String massageText = update.getMessage().getText();\n            long chatId = update.getMessage().getChatId();\n            User user = update.getMessage().getFrom();\n\n            if (massageText.equals(&quot;/start&quot;)) {\n\n                System.out.println(&quot;CurrentUserID --&gt; &quot;);\n\n                startCommandReceived(chatId, update.getMessage().getChat().getFirstName());\n            }\n        }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9698,"page":527,"page_size":100}
