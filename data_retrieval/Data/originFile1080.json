{"items":[{"tags":["java","android","android-implicit-intent"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":1,"creation_date":1661554770,"post_id":73507084,"comment_id":129808062,"body_markdown":"Have you seen: [Android: Email Intent ACTION_SENDTO doesn&#39;t work unless you add an intent filter](https://stackoverflow.com/q/68120288/295004)","body":"Have you seen: <a href=\"https://stackoverflow.com/q/68120288/295004\">Android: Email Intent ACTION_SENDTO doesn&#39;t work unless you add an intent filter</a>"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1661556016,"post_id":73507084,"comment_id":129808222,"body_markdown":"Remove `resolveActivity()`, and instead wrap your `startActivity()` call in a `try`/`catch` block. You cannot use `resolveActivity()` on Android 11+ without extra stuff in your manifest, and in this case, you do not need it.","body":"Remove <code>resolveActivity()</code>, and instead wrap your <code>startActivity()</code> call in a <code>try</code>/<code>catch</code> block. You cannot use <code>resolveActivity()</code> on Android 11+ without extra stuff in your manifest, and in this case, you do not need it."},{"owner":{"account_id":23190360,"reputation":21,"user_id":17286820,"display_name":"Nishant Khatri"},"score":0,"creation_date":1661703423,"post_id":73507084,"comment_id":129829838,"body_markdown":"Commanware can you change my code with try and catch statements so that i can understand better . thanks for the help","body":"Commanware can you change my code with try and catch statements so that i can understand better . thanks for the help"}],"owner":{"account_id":23190360,"reputation":21,"user_id":17286820,"display_name":"Nishant Khatri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1661553901,"creation_date":1661553901,"question_id":73507084,"body_markdown":"\r\nI am just a beginner in app dev and referring the documentation wanted to build an email sending app using Implicit Intents. this works well when we \r\nwrite\r\n \r\n    Intent intent = new Intent(Intent.ACTION_SEND);\r\n    intent.setType(&quot;*/*&quot;);\r\nbut when we write the following code to filter out only the mailing app it makes a toast saying that No app is installed which i have made in order to prevent my app from misbehaving.\r\n\r\n**Below is the simple code pls read it for once**\r\n\r\n        package com.example.emailsender;\r\n    //necessary imports\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    //necessary variables edittext em, subject&amp; button sub(submit)\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        em = findViewById(R.id.editTextTextEmailAddress);\r\n\r\n\r\n        subject = findViewById(R.id.sub);\r\n        sub = findViewById(R.id.button);\r\n\r\n        sub.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String ema=em.getText().toString();\r\n                String emails[]=ema.split(&quot;,&quot;);\r\n                String s = subject.getText().toString();\r\n                Intent intent = new Intent(Intent.ACTION_SENDTO);\r\n                intent.setData(Uri.parse(&quot;mailto:&quot;));\r\n                intent.putExtra(Intent.EXTRA_EMAIL, emails);\r\n                intent.putExtra(Intent.EXTRA_SUBJECT, s);\r\n                if (intent.resolveActivity(getPackageManager()) != null) {\r\n                    startActivity(intent);\r\n                }\r\n                else\r\n                    Toast.makeText(MainActivity.this, &quot;No app is installed&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n        });\r\n    }\r\n}","title":"Android Studio : while email sending and running the app on phone the app is not detecting any other mail sending apps?","body":"<p>I am just a beginner in app dev and referring the documentation wanted to build an email sending app using Implicit Intents. this works well when we\nwrite</p>\n<pre><code>Intent intent = new Intent(Intent.ACTION_SEND);\nintent.setType(&quot;*/*&quot;);\n</code></pre>\n<p>but when we write the following code to filter out only the mailing app it makes a toast saying that No app is installed which i have made in order to prevent my app from misbehaving.</p>\n<p><strong>Below is the simple code pls read it for once</strong></p>\n<pre><code>    package com.example.emailsender;\n//necessary imports\n\npublic class MainActivity extends AppCompatActivity {\n//necessary variables edittext em, subject&amp; button sub(submit)\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    em = findViewById(R.id.editTextTextEmailAddress);\n\n\n    subject = findViewById(R.id.sub);\n    sub = findViewById(R.id.button);\n\n    sub.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            String ema=em.getText().toString();\n            String emails[]=ema.split(&quot;,&quot;);\n            String s = subject.getText().toString();\n            Intent intent = new Intent(Intent.ACTION_SENDTO);\n            intent.setData(Uri.parse(&quot;mailto:&quot;));\n            intent.putExtra(Intent.EXTRA_EMAIL, emails);\n            intent.putExtra(Intent.EXTRA_SUBJECT, s);\n            if (intent.resolveActivity(getPackageManager()) != null) {\n                startActivity(intent);\n            }\n            else\n                Toast.makeText(MainActivity.this, &quot;No app is installed&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    });\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","mvvm","handlebars.java"],"answers":[{"tags":[],"owner":{"account_id":10427613,"reputation":91,"user_id":7688362,"display_name":"Matthew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661553594,"creation_date":1661553594,"answer_id":73507060,"question_id":73356082,"body_markdown":"The answer is very simple:\r\n\r\nPut this as a container around every inherited View you do not want:\r\n```\r\n{{#unless newViewModel}}\r\n\r\n{{/unless}}\r\n```\r\n\r\nwhere newViewModel is a boolean set to true in your new ViewModel.\r\n\r\nThen you can extend the ViewModel without extending its View. ","title":"How do I extend a ViewModel in Java, but override its Handlebars template entirely?","body":"<p>The answer is very simple:</p>\n<p>Put this as a container around every inherited View you do not want:</p>\n<pre><code>{{#unless newViewModel}}\n\n{{/unless}}\n</code></pre>\n<p>where newViewModel is a boolean set to true in your new ViewModel.</p>\n<p>Then you can extend the ViewModel without extending its View.</p>\n"}],"owner":{"account_id":10427613,"reputation":91,"user_id":7688362,"display_name":"Matthew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661553594,"creation_date":1660524877,"question_id":73356082,"body_markdown":"I have not seen the solution to this in: https://handlebarsjs.com/ or https://github.com/jknack/handlebars.java\r\n\r\n1) To override a template I need to: \r\n```\r\n{{#block &quot;newFile&quot; override=&quot;oldFile.hbs&quot;}}\r\n\r\n```\r\n2. I also know that I can override elements while not losing the rest of the material by:\r\n\r\n```\r\n        {{#element &quot;oldElement&quot; noWith=true}}\r\n\r\n```\r\n\r\n3. But how do I override the entire page? I want to save time by extending a ViewModel based on another ViewModel, rather than creating a new ViewModel directly based on the original Model, but I want a similar ViewModel with a different View.  \r\n\r\n","title":"How do I extend a ViewModel in Java, but override its Handlebars template entirely?","body":"<p>I have not seen the solution to this in: <a href=\"https://handlebarsjs.com/\" rel=\"nofollow noreferrer\">https://handlebarsjs.com/</a> or <a href=\"https://github.com/jknack/handlebars.java\" rel=\"nofollow noreferrer\">https://github.com/jknack/handlebars.java</a></p>\n<ol>\n<li>To override a template I need to:</li>\n</ol>\n<pre><code>{{#block &quot;newFile&quot; override=&quot;oldFile.hbs&quot;}}\n\n</code></pre>\n<ol start=\"2\">\n<li>I also know that I can override elements while not losing the rest of the material by:</li>\n</ol>\n<pre><code>        {{#element &quot;oldElement&quot; noWith=true}}\n\n</code></pre>\n<ol start=\"3\">\n<li>But how do I override the entire page? I want to save time by extending a ViewModel based on another ViewModel, rather than creating a new ViewModel directly based on the original Model, but I want a similar ViewModel with a different View.</li>\n</ol>\n"},{"tags":["java","android","imageview","pinchzoom"],"answers":[{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1585277424,"creation_date":1585091354,"answer_id":60840700,"question_id":60839110,"body_markdown":"In order to avoid using the same scale of the previous image when you navigate to the next image, you need to reset the previous image to its original scale. \r\n\r\nIf you notice when you first load your image into your `MyTouchImageView`, it loads with its original scale which is normally (1f), you can find that in the `MyTouchImageView ` with the statement `private float saveScale = 1f;`\r\n\r\nAlso when you pinch zoom your image, then `onScale()` of the `ScaleGestureDetector.SimpleOnScaleGestureListener` within the `MyTouchImageView` is triggered.\r\n\r\nSo what you need to do to reset the image to its original scale is to reverse the last operation happened within `onScale()`. Which is normally allows you to back to a scale of 1f.\r\n\r\nTo to that add the below method to your `MyTouchImageView`:\r\n\r\n```\r\npublic void resetToOriginalScale() {\r\n\r\n    // reverse the operation happened on onScale() method\r\n    float scaleFactor = (float) 1.0 / saveScale;\r\n    // reset the scale to the original scale\r\n    saveScale = 1f;\r\n    matrix.postScale(scaleFactor, scaleFactor, viewWidth / 2, viewHeight / 2);\r\n\r\n    fixTrans();\r\n\r\n    // Simulating a touch event within the ImageView in order to allow it to redraw with the original scale\r\n    long downTime = SystemClock.uptimeMillis();\r\n    long eventTime = SystemClock.uptimeMillis() + 100;\r\n    int metaState = 0;\r\n    MotionEvent motionEvent = MotionEvent.obtain(\r\n            downTime,\r\n            eventTime,\r\n            MotionEvent.ACTION_UP,\r\n            0,\r\n            0,\r\n            metaState\r\n    );\r\n\r\n    dispatchTouchEvent(motionEvent);\r\n\r\n}\r\n\r\n```\r\n\r\nThen whenever you navigate to a new image, you first need to reset the scale of the current image by calling `resetToOriginalScale()`:\r\n\r\n```\r\nmImageView = findViewById(R.id.title_image);\r\nmImageView.resetToOriginalScale();\r\nGlide.with(MainActivity.this).load(new_image_url).centerCrop().into(mImageView);\r\n```\r\n\r\nUse `.centerCrop()` with all your Glide invocations.\r\n\r\n\r\nHope this solves your problem.","title":"ImageView zoom and set another image problem","body":"<p>In order to avoid using the same scale of the previous image when you navigate to the next image, you need to reset the previous image to its original scale. </p>\n\n<p>If you notice when you first load your image into your <code>MyTouchImageView</code>, it loads with its original scale which is normally (1f), you can find that in the <code>MyTouchImageView</code> with the statement <code>private float saveScale = 1f;</code></p>\n\n<p>Also when you pinch zoom your image, then <code>onScale()</code> of the <code>ScaleGestureDetector.SimpleOnScaleGestureListener</code> within the <code>MyTouchImageView</code> is triggered.</p>\n\n<p>So what you need to do to reset the image to its original scale is to reverse the last operation happened within <code>onScale()</code>. Which is normally allows you to back to a scale of 1f.</p>\n\n<p>To to that add the below method to your <code>MyTouchImageView</code>:</p>\n\n<pre><code>public void resetToOriginalScale() {\n\n    // reverse the operation happened on onScale() method\n    float scaleFactor = (float) 1.0 / saveScale;\n    // reset the scale to the original scale\n    saveScale = 1f;\n    matrix.postScale(scaleFactor, scaleFactor, viewWidth / 2, viewHeight / 2);\n\n    fixTrans();\n\n    // Simulating a touch event within the ImageView in order to allow it to redraw with the original scale\n    long downTime = SystemClock.uptimeMillis();\n    long eventTime = SystemClock.uptimeMillis() + 100;\n    int metaState = 0;\n    MotionEvent motionEvent = MotionEvent.obtain(\n            downTime,\n            eventTime,\n            MotionEvent.ACTION_UP,\n            0,\n            0,\n            metaState\n    );\n\n    dispatchTouchEvent(motionEvent);\n\n}\n\n</code></pre>\n\n<p>Then whenever you navigate to a new image, you first need to reset the scale of the current image by calling <code>resetToOriginalScale()</code>:</p>\n\n<pre><code>mImageView = findViewById(R.id.title_image);\nmImageView.resetToOriginalScale();\nGlide.with(MainActivity.this).load(new_image_url).centerCrop().into(mImageView);\n</code></pre>\n\n<p>Use <code>.centerCrop()</code> with all your Glide invocations.</p>\n\n<p>Hope this solves your problem.</p>\n"}],"owner":{"account_id":13597017,"reputation":51,"user_id":9808767,"display_name":"Ayman.dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60840700,"answer_count":1,"score":1,"last_activity_date":1661553593,"creation_date":1585083047,"question_id":60839110,"body_markdown":"**I have succeeded to zoom imageView by this site idea:**\r\n&gt;[https://www.androidhive.info/2013/09/android-fullscreen-image-slider-with-swipe-and-pinch-zoom-gestures/][1]\r\n&gt;\r\n&gt; **the problem that appears to me now is:\r\ni use an next and previous buttons to load images in the same image view\r\nwhen that done the new image *loaded zoomed in*.\r\ni need to view it in normal size and let user to zoom it if he want.**\r\n \r\n\r\n    \r\n    import android.annotation.SuppressLint;\r\n    import android.content.Context;\r\n    import android.graphics.Matrix;\r\n    import android.graphics.PointF;\r\n    import android.graphics.drawable.Drawable;\r\n    import android.util.AttributeSet;\r\n    import android.view.MotionEvent;\r\n    import android.view.ScaleGestureDetector;\r\n    import android.view.View;\r\n    import android.widget.ImageView;\r\n    \r\n    @SuppressLint(&quot;AppCompatCustomView&quot;)\r\n    public class MyTouchImageView extends ImageView {\r\n        // We can be in one of these 3 states\r\n        private  static final int NONE = 0;\r\n        private  static final int DRAG = 1;\r\n        private  static final int CLICK = 3;\r\n        private static final int ZOOM = 2;\r\n        private float origWidth, origHeight;\r\n        private Matrix matrix;\r\n        private  int mode = NONE;\r\n        private PointF last = new PointF();\r\n        private PointF start = new PointF();\r\n        private  float minScale = 1f;\r\n        private float maxScale = 3f;\r\n        private  float[] m;\r\n        private  int viewWidth, viewHeight;\r\n        private float saveScale = 1f;\r\n        private  int oldMeasuredWidth, oldMeasuredHeight;\r\n    \r\n        private ScaleGestureDetector mScaleDetector;\r\n    \r\n        private  Context context;\r\n    \r\n        public MyTouchImageView(Context context) {\r\n            super(context);\r\n            sharedConstructing(context);\r\n        }\r\n    \r\n        public MyTouchImageView(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n            sharedConstructing(context);\r\n        }\r\n    \r\n        private void sharedConstructing(Context context) {\r\n            super.setClickable(true);\r\n            this.context = context;\r\n            mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());\r\n       matrix = new Matrix();\r\n            m = new float[9];\r\n        setImageMatrix(matrix);\r\n            setScaleType(ScaleType.MATRIX);\r\n            setMinimumHeight(800);\r\n            setMinimumWidth(1000);\r\n      \r\n            setOnTouchListener(new OnTouchListener() {\r\n    \r\n                @Override\r\n                public boolean onTouch(View v, MotionEvent event) {\r\n                    mScaleDetector.onTouchEvent(event);\r\n                    PointF curr = new PointF(event.getX(), event.getY());\r\n    \r\n                    switch (event.getAction()) {\r\n                        case MotionEvent.ACTION_DOWN:\r\n                            last.set(curr);\r\n                            start.set(last);\r\n                            mode = DRAG;\r\n                            break;\r\n    \r\n                        case MotionEvent.ACTION_MOVE:\r\n                            if (mode == DRAG) {\r\n                                float deltaX = curr.x - last.x;\r\n                                float deltaY = curr.y - last.y;\r\n                                float fixTransX = getFixDragTrans(deltaX, viewWidth,\r\n                                        origWidth * saveScale);\r\n                                float fixTransY = getFixDragTrans(deltaY, viewHeight,\r\n                                        origHeight * saveScale);\r\n                                matrix.postTranslate(fixTransX, fixTransY);\r\n                                fixTrans();\r\n                                last.set(curr.x, curr.y);\r\n                            }\r\n                            break;\r\n    \r\n                        case MotionEvent.ACTION_UP:\r\n                            mode = NONE;\r\n                            int xDiff = (int) Math.abs(curr.x - start.x);\r\n                            int yDiff = (int) Math.abs(curr.y - start.y);\r\n                            if (xDiff &lt; CLICK &amp;&amp; yDiff &lt; CLICK)\r\n                                performClick();\r\n                            break;\r\n    \r\n                        case MotionEvent.ACTION_POINTER_UP:\r\n                            mode = NONE;\r\n                            break;\r\n                    }\r\n    \r\n                    setImageMatrix(matrix);\r\n                    invalidate();\r\n                    return true; // indicate event was handled\r\n                }\r\n    \r\n            });\r\n        }\r\n    \r\n        public void setMaxZoom(float x) {\r\n            maxScale = x;\r\n        }\r\n    \r\n        void fixTrans() {\r\n            matrix.getValues(m);\r\n            float transX = m[Matrix.MTRANS_X];\r\n            float transY = m[Matrix.MTRANS_Y];\r\n    \r\n            float fixTransX = getFixTrans(transX, viewWidth, origWidth * saveScale);\r\n            float fixTransY = getFixTrans(transY, viewHeight, origHeight\r\n                    * saveScale);\r\n    \r\n            if (fixTransX != 0 || fixTransY != 0)\r\n                matrix.postTranslate(fixTransX, fixTransY);\r\n        }\r\n    \r\n        float getFixTrans(float trans, float viewSize, float contentSize) {\r\n            float minTrans, maxTrans;\r\n    \r\n            if (contentSize &lt;= viewSize) {\r\n                minTrans = 0;\r\n                maxTrans = viewSize - contentSize;\r\n            } else {\r\n                minTrans = viewSize - contentSize;\r\n                maxTrans = 0;\r\n            }\r\n    \r\n            if (trans &lt; minTrans)\r\n                return -trans + minTrans;\r\n            if (trans &gt; maxTrans)\r\n                return -trans + maxTrans;\r\n            return 0;\r\n        }\r\n    \r\n        float getFixDragTrans(float delta, float viewSize, float contentSize) {\r\n            if (contentSize &lt;= viewSize) {\r\n                return 0;\r\n            }\r\n            return delta;\r\n        }\r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n            super.onMeasure(widthMeasureSpec, heightMeasureSpec);\r\n            viewWidth = MeasureSpec.getSize(widthMeasureSpec);\r\n            viewHeight = MeasureSpec.getSize(heightMeasureSpec);\r\n    \r\n            //\r\n            // Rescales image on rotation\r\n            //\r\n            if (oldMeasuredHeight == viewWidth &amp;&amp; oldMeasuredHeight == viewHeight\r\n                    || viewWidth == 0 || viewHeight == 0)\r\n                return;\r\n            oldMeasuredHeight = viewHeight;\r\n            oldMeasuredWidth = viewWidth;\r\n    \r\n            if (saveScale == 1) {\r\n                // Fit to screen.\r\n                float scale;\r\n    \r\n                Drawable drawable = getDrawable();\r\n                if (drawable == null || drawable.getIntrinsicWidth() == 0\r\n                        || drawable.getIntrinsicHeight() == 0)\r\n                    return;\r\n                int bmWidth = drawable.getIntrinsicWidth();\r\n                int bmHeight = drawable.getIntrinsicHeight();\r\n    \r\n    \r\n                float scaleX = (float) viewWidth / (float) bmWidth;\r\n                float scaleY = (float) viewHeight / (float) bmHeight;\r\n                scale = Math.min(scaleX, scaleY);\r\n                matrix.setScale(scale, scale);\r\n    \r\n                // Center the image\r\n                float redundantYSpace = (float) viewHeight\r\n                        - (scale * (float) bmHeight);\r\n                float redundantXSpace = (float) viewWidth\r\n                        - (scale * (float) bmWidth);\r\n                redundantYSpace /= (float) 2;\r\n                redundantXSpace /= (float) 2;\r\n    \r\n                matrix.postTranslate(redundantXSpace, redundantYSpace);\r\n    \r\n                origWidth = viewWidth - 2 * redundantXSpace;\r\n                origHeight = viewHeight - 2 * redundantYSpace;\r\n                setImageMatrix(matrix);\r\n            }\r\n            fixTrans();\r\n        }\r\n    \r\n        private class ScaleListener extends\r\n                ScaleGestureDetector.SimpleOnScaleGestureListener {\r\n            @Override\r\n            public boolean onScaleBegin(ScaleGestureDetector detector) {\r\n                mode = ZOOM;\r\n                return true;\r\n            }\r\n    \r\n            @Override\r\n            public boolean onScale(ScaleGestureDetector detector) {\r\n                float mScaleFactor = detector.getScaleFactor();\r\n                float origScale = saveScale;\r\n                saveScale *= mScaleFactor;\r\n                if (saveScale &gt; maxScale) {\r\n                    saveScale = maxScale;\r\n                    mScaleFactor = maxScale / origScale;\r\n                } else if (saveScale &lt; minScale) {\r\n                    saveScale = minScale;\r\n                    mScaleFactor = minScale / origScale;\r\n                }\r\n    \r\n                if (origWidth * saveScale &lt;= viewWidth\r\n                        || origHeight * saveScale &lt;= viewHeight)\r\n                    matrix.postScale(mScaleFactor, mScaleFactor, viewWidth / 2,\r\n                            viewHeight / 2);\r\n                else\r\n                    matrix.postScale(mScaleFactor, mScaleFactor,\r\n                            detector.getFocusX(), detector.getFocusY());\r\n    \r\n                fixTrans();\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n   LOADING IMAGE\r\n\r\n    private MyTouchImageView Title_images;\r\n        Title_images = findViewById(R.id.title_image); \r\n        Glide.with(Objects.requireNonNull(StudentInsideExam.this)).load(examInsideDatas.get(ShownPointIndexInArray).getImageUrls()).into(Title_images);\r\n\r\n   XML:\r\n\r\n     &lt;FrameLayout\r\n        android:id=&quot;@+id/container1&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;center&quot;&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n\r\n            &lt;com.ayman.learningway.MyTouchImageView\r\n                android:id=&quot;@+id/title_image&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_marginTop=&quot;@dimen/smallMargin&quot;\r\n                android:background=&quot;@color/tan_background&quot;\r\n                android:scaleType=&quot;matrix&quot;\r\n                android:visibility=&quot;gone&quot; /&gt;\r\n\r\n        &lt;/LinearLayout&gt;\r\n\r\n\r\n    &lt;/FrameLayout&gt;\r\n\r\n[1]: https://www.androidhive.info/2013/09/android-fullscreen-image-slider-with-swipe-and-pinch-zoom-gestures/","title":"ImageView zoom and set another image problem","body":"<p><strong>I have succeeded to zoom imageView by this site idea:</strong></p>\n<blockquote>\n<p><a href=\"https://www.androidhive.info/2013/09/android-fullscreen-image-slider-with-swipe-and-pinch-zoom-gestures/\" rel=\"nofollow noreferrer\">https://www.androidhive.info/2013/09/android-fullscreen-image-slider-with-swipe-and-pinch-zoom-gestures/</a></p>\n<p><strong>the problem that appears to me now is:\ni use an next and previous buttons to load images in the same image view\nwhen that done the new image <em>loaded zoomed in</em>.\ni need to view it in normal size and let user to zoom it if he want.</strong></p>\n</blockquote>\n<pre><code>import android.annotation.SuppressLint;\nimport android.content.Context;\nimport android.graphics.Matrix;\nimport android.graphics.PointF;\nimport android.graphics.drawable.Drawable;\nimport android.util.AttributeSet;\nimport android.view.MotionEvent;\nimport android.view.ScaleGestureDetector;\nimport android.view.View;\nimport android.widget.ImageView;\n\n@SuppressLint(&quot;AppCompatCustomView&quot;)\npublic class MyTouchImageView extends ImageView {\n    // We can be in one of these 3 states\n    private  static final int NONE = 0;\n    private  static final int DRAG = 1;\n    private  static final int CLICK = 3;\n    private static final int ZOOM = 2;\n    private float origWidth, origHeight;\n    private Matrix matrix;\n    private  int mode = NONE;\n    private PointF last = new PointF();\n    private PointF start = new PointF();\n    private  float minScale = 1f;\n    private float maxScale = 3f;\n    private  float[] m;\n    private  int viewWidth, viewHeight;\n    private float saveScale = 1f;\n    private  int oldMeasuredWidth, oldMeasuredHeight;\n\n    private ScaleGestureDetector mScaleDetector;\n\n    private  Context context;\n\n    public MyTouchImageView(Context context) {\n        super(context);\n        sharedConstructing(context);\n    }\n\n    public MyTouchImageView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        sharedConstructing(context);\n    }\n\n    private void sharedConstructing(Context context) {\n        super.setClickable(true);\n        this.context = context;\n        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());\n   matrix = new Matrix();\n        m = new float[9];\n    setImageMatrix(matrix);\n        setScaleType(ScaleType.MATRIX);\n        setMinimumHeight(800);\n        setMinimumWidth(1000);\n  \n        setOnTouchListener(new OnTouchListener() {\n\n            @Override\n            public boolean onTouch(View v, MotionEvent event) {\n                mScaleDetector.onTouchEvent(event);\n                PointF curr = new PointF(event.getX(), event.getY());\n\n                switch (event.getAction()) {\n                    case MotionEvent.ACTION_DOWN:\n                        last.set(curr);\n                        start.set(last);\n                        mode = DRAG;\n                        break;\n\n                    case MotionEvent.ACTION_MOVE:\n                        if (mode == DRAG) {\n                            float deltaX = curr.x - last.x;\n                            float deltaY = curr.y - last.y;\n                            float fixTransX = getFixDragTrans(deltaX, viewWidth,\n                                    origWidth * saveScale);\n                            float fixTransY = getFixDragTrans(deltaY, viewHeight,\n                                    origHeight * saveScale);\n                            matrix.postTranslate(fixTransX, fixTransY);\n                            fixTrans();\n                            last.set(curr.x, curr.y);\n                        }\n                        break;\n\n                    case MotionEvent.ACTION_UP:\n                        mode = NONE;\n                        int xDiff = (int) Math.abs(curr.x - start.x);\n                        int yDiff = (int) Math.abs(curr.y - start.y);\n                        if (xDiff &lt; CLICK &amp;&amp; yDiff &lt; CLICK)\n                            performClick();\n                        break;\n\n                    case MotionEvent.ACTION_POINTER_UP:\n                        mode = NONE;\n                        break;\n                }\n\n                setImageMatrix(matrix);\n                invalidate();\n                return true; // indicate event was handled\n            }\n\n        });\n    }\n\n    public void setMaxZoom(float x) {\n        maxScale = x;\n    }\n\n    void fixTrans() {\n        matrix.getValues(m);\n        float transX = m[Matrix.MTRANS_X];\n        float transY = m[Matrix.MTRANS_Y];\n\n        float fixTransX = getFixTrans(transX, viewWidth, origWidth * saveScale);\n        float fixTransY = getFixTrans(transY, viewHeight, origHeight\n                * saveScale);\n\n        if (fixTransX != 0 || fixTransY != 0)\n            matrix.postTranslate(fixTransX, fixTransY);\n    }\n\n    float getFixTrans(float trans, float viewSize, float contentSize) {\n        float minTrans, maxTrans;\n\n        if (contentSize &lt;= viewSize) {\n            minTrans = 0;\n            maxTrans = viewSize - contentSize;\n        } else {\n            minTrans = viewSize - contentSize;\n            maxTrans = 0;\n        }\n\n        if (trans &lt; minTrans)\n            return -trans + minTrans;\n        if (trans &gt; maxTrans)\n            return -trans + maxTrans;\n        return 0;\n    }\n\n    float getFixDragTrans(float delta, float viewSize, float contentSize) {\n        if (contentSize &lt;= viewSize) {\n            return 0;\n        }\n        return delta;\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        viewWidth = MeasureSpec.getSize(widthMeasureSpec);\n        viewHeight = MeasureSpec.getSize(heightMeasureSpec);\n\n        //\n        // Rescales image on rotation\n        //\n        if (oldMeasuredHeight == viewWidth &amp;&amp; oldMeasuredHeight == viewHeight\n                || viewWidth == 0 || viewHeight == 0)\n            return;\n        oldMeasuredHeight = viewHeight;\n        oldMeasuredWidth = viewWidth;\n\n        if (saveScale == 1) {\n            // Fit to screen.\n            float scale;\n\n            Drawable drawable = getDrawable();\n            if (drawable == null || drawable.getIntrinsicWidth() == 0\n                    || drawable.getIntrinsicHeight() == 0)\n                return;\n            int bmWidth = drawable.getIntrinsicWidth();\n            int bmHeight = drawable.getIntrinsicHeight();\n\n\n            float scaleX = (float) viewWidth / (float) bmWidth;\n            float scaleY = (float) viewHeight / (float) bmHeight;\n            scale = Math.min(scaleX, scaleY);\n            matrix.setScale(scale, scale);\n\n            // Center the image\n            float redundantYSpace = (float) viewHeight\n                    - (scale * (float) bmHeight);\n            float redundantXSpace = (float) viewWidth\n                    - (scale * (float) bmWidth);\n            redundantYSpace /= (float) 2;\n            redundantXSpace /= (float) 2;\n\n            matrix.postTranslate(redundantXSpace, redundantYSpace);\n\n            origWidth = viewWidth - 2 * redundantXSpace;\n            origHeight = viewHeight - 2 * redundantYSpace;\n            setImageMatrix(matrix);\n        }\n        fixTrans();\n    }\n\n    private class ScaleListener extends\n            ScaleGestureDetector.SimpleOnScaleGestureListener {\n        @Override\n        public boolean onScaleBegin(ScaleGestureDetector detector) {\n            mode = ZOOM;\n            return true;\n        }\n\n        @Override\n        public boolean onScale(ScaleGestureDetector detector) {\n            float mScaleFactor = detector.getScaleFactor();\n            float origScale = saveScale;\n            saveScale *= mScaleFactor;\n            if (saveScale &gt; maxScale) {\n                saveScale = maxScale;\n                mScaleFactor = maxScale / origScale;\n            } else if (saveScale &lt; minScale) {\n                saveScale = minScale;\n                mScaleFactor = minScale / origScale;\n            }\n\n            if (origWidth * saveScale &lt;= viewWidth\n                    || origHeight * saveScale &lt;= viewHeight)\n                matrix.postScale(mScaleFactor, mScaleFactor, viewWidth / 2,\n                        viewHeight / 2);\n            else\n                matrix.postScale(mScaleFactor, mScaleFactor,\n                        detector.getFocusX(), detector.getFocusY());\n\n            fixTrans();\n            return true;\n        }\n    }\n}\n</code></pre>\n<p>LOADING IMAGE</p>\n<pre><code>private MyTouchImageView Title_images;\n    Title_images = findViewById(R.id.title_image); \n    Glide.with(Objects.requireNonNull(StudentInsideExam.this)).load(examInsideDatas.get(ShownPointIndexInArray).getImageUrls()).into(Title_images);\n</code></pre>\n<p>XML:</p>\n<pre><code> &lt;FrameLayout\n    android:id=&quot;@+id/container1&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_gravity=&quot;center&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:gravity=&quot;center&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;com.ayman.learningway.MyTouchImageView\n            android:id=&quot;@+id/title_image&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_marginTop=&quot;@dimen/smallMargin&quot;\n            android:background=&quot;@color/tan_background&quot;\n            android:scaleType=&quot;matrix&quot;\n            android:visibility=&quot;gone&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n\n&lt;/FrameLayout&gt;\n</code></pre>\n"},{"tags":["java","jsf","jakarta-ee","wildfly"],"comments":[{"owner":{"account_id":907715,"reputation":3063,"user_id":942261,"accept_rate":88,"display_name":"DaveB"},"score":0,"creation_date":1652802314,"post_id":64750354,"comment_id":127692183,"body_markdown":"did you ever find a solution for this? We are seeing the same behaviour in Wildfly 26","body":"did you ever find a solution for this? We are seeing the same behaviour in Wildfly 26"},{"owner":{"account_id":384223,"reputation":1237,"user_id":740582,"accept_rate":39,"display_name":"Marcos"},"score":0,"creation_date":1652896443,"post_id":64750354,"comment_id":127720522,"body_markdown":"I haven&#39;t tested if this problem was solved in newer Wildfly versions. As reported by you, it seems that it is still broken.","body":"I haven&#39;t tested if this problem was solved in newer Wildfly versions. As reported by you, it seems that it is still broken."}],"answers":[{"tags":[],"owner":{"account_id":15059359,"reputation":400,"user_id":10868667,"display_name":"Luis Galaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604947869,"creation_date":1604931347,"answer_id":64753310,"question_id":64750354,"body_markdown":"The AuthenticationStatus is used as a return value by primarily the HttpAuthenticationMechanism to indicate the result (status) of the authentication process. \r\n\r\nSEND_CONTINUE : The authentication mechanism was called and a multi-step authentication dialog with the caller has been started (for instance, the caller has been redirected to a login page). Simply said authentication is &quot;in progress&quot;. Calling application code (if any) should not write to the response when this status is received.\r\n[Javadocs][1]\r\n\r\nHow does your web.xml looks like?\r\n\r\nhave you added the security constraints ? \r\n\r\nExample :\r\n\r\n      &lt;security-constraint&gt;\r\n            &lt;web-resource-collection&gt;\r\n                &lt;web-resource-name&gt;Application pages&lt;/web-resource-name&gt;\r\n                &lt;url-pattern&gt;/app/*&lt;/url-pattern&gt;\r\n            &lt;/web-resource-collection&gt;\r\n            &lt;auth-constraint&gt;\r\n                &lt;role-name&gt;ADMIN&lt;/role-name&gt;\r\n                &lt;role-name&gt;USER&lt;/role-name&gt;\r\n            &lt;/auth-constraint&gt;\r\n        &lt;/security-constraint&gt;\r\n    \r\n        &lt;security-role&gt;\r\n            &lt;role-name&gt;USER&lt;/role-name&gt;\r\n        &lt;/security-role&gt;\r\n        &lt;security-role&gt;\r\n            &lt;role-name&gt;ADMIN&lt;/role-name&gt;\r\n        &lt;/security-role&gt;\r\n\r\n\r\nhave you the jboss-web.xml? in the src/main/webapp/WEB-INF\r\n\r\njaspitest is the security domain to use HTTP Authentication Mechanism Interface in Wildfly/Jboss\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;jboss-web version=&quot;8.0&quot; xmlns=&quot;http://www.jboss.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.jboss.com/xml/ns/javaee http://www.jboss.org/schema/jbossas/jboss-web_8_0.xsd&quot;&gt;\r\n      &lt;context-root/&gt;\r\n      &lt;security-domain&gt;jaspitest&lt;/security-domain&gt;\r\n    &lt;/jboss-web&gt;\r\n\r\n\r\nI just tested the application that you linked and work as Expected \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://javaee.github.io/javaee-spec/javadocs/javax/security/enterprise/AuthenticationStatus.html\r\n  [2]: https://i.stack.imgur.com/KatGV.jpg\r\n\r\n\r\n\r\nyou can configure the session timeout (in minutes) on the web.xml \r\n\r\n\r\n    &lt;session-config&gt;\r\n        &lt;session-timeout&gt;\r\n            1\r\n        &lt;/session-timeout&gt;\r\n        &lt;cookie-config&gt;\r\n            &lt;http-only&gt;true&lt;/http-only&gt;\r\n            &lt;secure&gt;false&lt;/secure&gt;\r\n        &lt;/cookie-config&gt;\r\n    &lt;/session-config&gt;\r\n\r\n","title":"On a successful login, SecurityContext.authenticate() returns AuthenticationStatus.SEND_CONTINUE instead of AuthenticationStatus.SUCCESS","body":"<p>The AuthenticationStatus is used as a return value by primarily the HttpAuthenticationMechanism to indicate the result (status) of the authentication process.</p>\n<p>SEND_CONTINUE : The authentication mechanism was called and a multi-step authentication dialog with the caller has been started (for instance, the caller has been redirected to a login page). Simply said authentication is &quot;in progress&quot;. Calling application code (if any) should not write to the response when this status is received.\n<a href=\"https://javaee.github.io/javaee-spec/javadocs/javax/security/enterprise/AuthenticationStatus.html\" rel=\"nofollow noreferrer\">Javadocs</a></p>\n<p>How does your web.xml looks like?</p>\n<p>have you added the security constraints ?</p>\n<p>Example :</p>\n<pre><code>  &lt;security-constraint&gt;\n        &lt;web-resource-collection&gt;\n            &lt;web-resource-name&gt;Application pages&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/app/*&lt;/url-pattern&gt;\n        &lt;/web-resource-collection&gt;\n        &lt;auth-constraint&gt;\n            &lt;role-name&gt;ADMIN&lt;/role-name&gt;\n            &lt;role-name&gt;USER&lt;/role-name&gt;\n        &lt;/auth-constraint&gt;\n    &lt;/security-constraint&gt;\n\n    &lt;security-role&gt;\n        &lt;role-name&gt;USER&lt;/role-name&gt;\n    &lt;/security-role&gt;\n    &lt;security-role&gt;\n        &lt;role-name&gt;ADMIN&lt;/role-name&gt;\n    &lt;/security-role&gt;\n</code></pre>\n<p>have you the jboss-web.xml? in the src/main/webapp/WEB-INF</p>\n<p>jaspitest is the security domain to use HTTP Authentication Mechanism Interface in Wildfly/Jboss</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jboss-web version=&quot;8.0&quot; xmlns=&quot;http://www.jboss.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.jboss.com/xml/ns/javaee http://www.jboss.org/schema/jbossas/jboss-web_8_0.xsd&quot;&gt;\n  &lt;context-root/&gt;\n  &lt;security-domain&gt;jaspitest&lt;/security-domain&gt;\n&lt;/jboss-web&gt;\n</code></pre>\n<p>I just tested the application that you linked and work as Expected</p>\n<p><a href=\"https://i.stack.imgur.com/KatGV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KatGV.jpg\" alt=\"enter image description here\" /></a></p>\n<p>you can configure the session timeout (in minutes) on the web.xml</p>\n<pre><code>&lt;session-config&gt;\n    &lt;session-timeout&gt;\n        1\n    &lt;/session-timeout&gt;\n    &lt;cookie-config&gt;\n        &lt;http-only&gt;true&lt;/http-only&gt;\n        &lt;secure&gt;false&lt;/secure&gt;\n    &lt;/cookie-config&gt;\n&lt;/session-config&gt;\n</code></pre>\n"}],"owner":{"account_id":384223,"reputation":1237,"user_id":740582,"accept_rate":39,"display_name":"Marcos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1671,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661553569,"creation_date":1604919606,"question_id":64750354,"body_markdown":" - Jakarta EE 8\r\n - Wildfly 21\r\n - Java 11\r\n\r\nUsing *Java EE Security*, I&#39;m trying custom form authentication in a simple application.\r\n\r\nThese are the relevant files (the description of the problem is below the files):\r\n\r\n**CustomFormAuthenticationConfig.java**\r\n\r\n    package br.dev.authentication.view;\r\n    \r\n    import javax.enterprise.context.ApplicationScoped;\r\n    import javax.faces.annotation.FacesConfig;\r\n    import javax.security.enterprise.authentication.mechanism.http.CustomFormAuthenticationMechanismDefinition;\r\n    import javax.security.enterprise.authentication.mechanism.http.LoginToContinue;\r\n    \r\n    @CustomFormAuthenticationMechanismDefinition(\r\n    \tloginToContinue = @LoginToContinue(\r\n    \t\tloginPage = &quot;/login.xhtml&quot;,\r\n    \t\tuseForwardToLogin = false,\r\n    \t\terrorPage = &quot;&quot;\r\n    \t)\r\n    )\r\n    @FacesConfig\r\n    @ApplicationScoped\r\n    public class CustomFormAuthenticationConfig\r\n    {\r\n    }\r\n\r\n**UserAuthenticator.java**\r\n\r\n    package br.dev.authentication.view;\r\n    \r\n    import java.util.Set;\r\n    \r\n    import javax.enterprise.context.ApplicationScoped;\r\n    import javax.security.enterprise.credential.Credential;\r\n    import javax.security.enterprise.credential.UsernamePasswordCredential;\r\n    import javax.security.enterprise.identitystore.CredentialValidationResult;\r\n    import javax.security.enterprise.identitystore.IdentityStore;\r\n    \r\n    @ApplicationScoped\r\n    public class UserAuthenticator implements IdentityStore\r\n    {\r\n    \t@Override\r\n    \tpublic CredentialValidationResult validate(Credential credencial)\r\n    \t{\r\n    \t\tvar userCredentials = (UsernamePasswordCredential) credencial;\r\n    \t\tvar userName = userCredentials.getCaller();\r\n    \t\tvar password = userCredentials.getPasswordAsString();\r\n    \r\n    \t\tif (userName.equals(&quot;1&quot;) &amp;&amp; password.equals(&quot;1&quot;))\r\n    \t\t{\r\n    \t\t\treturn new CredentialValidationResult(userName, Set.of(&quot;USER&quot;));\r\n    \t\t}\r\n    \t\telse\r\n    \t\t{\r\n    \t\t\treturn CredentialValidationResult.INVALID_RESULT;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**login.xhtml**\r\n\r\n    &lt;ui:composition template=&quot;/templates/layout.xhtml&quot;\r\n    \txmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n    \txmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\r\n    \txmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;\r\n    \txmlns:h=&quot;http://xmlns.jcp.org/jsf/html&quot;\r\n    \txmlns:au=&quot;http://dev.br/authentication&quot;&gt;\r\n    \r\n    \t&lt;ui:define name=&quot;title&quot;&gt;\r\n    \t\tLogin\r\n    \t&lt;/ui:define&gt;\r\n    \r\n    \t&lt;ui:define name=&quot;content&quot;&gt;\r\n    \t\t&lt;au:errors /&gt;\r\n    \t\t&lt;div id=&quot;fields&quot;&gt;\r\n    \t\t\t&lt;h:outputLabel value=&quot;User name:&quot; for=&quot;userName&quot; /&gt;\r\n    \t\t\t&lt;h:inputText id=&quot;userName&quot; value=&quot;#{login.userName}&quot; /&gt;\r\n    \r\n    \t\t\t&lt;h:outputLabel value=&quot;Password:&quot; for=&quot;password&quot; /&gt;\r\n    \t\t\t&lt;h:inputSecret id=&quot;password&quot; value=&quot;#{login.password}&quot; /&gt;\r\n    \r\n    \t\t\t&lt;h:commandButton value=&quot;Enter&quot; action=&quot;#{login.authenticateUser}&quot; /&gt;\r\n    \t\t&lt;/div&gt;\r\n    \t&lt;/ui:define&gt;\r\n    &lt;/ui:composition&gt;\r\n\r\n**Login.java**\r\n\r\n    package br.dev.authentication.view;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import javax.enterprise.context.RequestScoped;\r\n    import javax.faces.application.FacesMessage;\r\n    import javax.faces.context.ExternalContext;\r\n    import javax.faces.context.FacesContext;\r\n    import javax.inject.Inject;\r\n    import javax.inject.Named;\r\n    import javax.security.enterprise.AuthenticationStatus;\r\n    import javax.security.enterprise.SecurityContext;\r\n    import javax.security.enterprise.authentication.mechanism.http.AuthenticationParameters;\r\n    import javax.security.enterprise.credential.UsernamePasswordCredential;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import javax.validation.constraints.NotBlank;\r\n    \r\n    @RequestScoped\r\n    @Named\r\n    public class Login\r\n    {\r\n    \tprivate String _userName;\r\n    \tprivate String _password;\r\n    \r\n    \t@Inject\r\n    \tprivate FacesContext _facesContext;\r\n    \t\r\n    \t@Inject\r\n    \tprivate ExternalContext _externalContext;\r\n    \r\n    \t@Inject\r\n    \tprivate SecurityContext _securityContext;\r\n    \t\r\n    \t@NotBlank(message = &quot;User name is required.&quot;)\r\n    \tpublic String getUserName()\r\n    \t{\r\n    \t\treturn _userName;\r\n    \t}\r\n    \t\r\n    \tpublic void setUserName(String userName)\r\n    \t{\r\n    \t\t_userName = userName;\r\n    \t}\r\n    \t\r\n    \t@NotBlank(message = &quot;Password is required.&quot;)\r\n    \tpublic String getPassword()\r\n    \t{\r\n    \t\treturn _password;\r\n    \t}\r\n    \t\r\n    \tpublic void setPassword(String password)\r\n    \t{\r\n    \t\t_password = password;\r\n    \t}\r\n    \t\r\n    \tpublic void authenticateUser() throws IOException\r\n    \t{\r\n    \t\t// After a successful login (username and password correct),\r\n    \t\t// executeUserAuthentication() returns AuthenticationStatus.SEND_CONTINUE, \r\n    \t\t// and not AuthenticationStatus.SUCCESS.\r\n    \t\t// Why?\r\n    \t\t// As a result, the code in the AuthenticationStatus.SUCCESS branch above is not executed.\r\n    \t\tAuthenticationStatus result = executeUserAuthentication();\r\n    \t\tif (result == AuthenticationStatus.SUCCESS)\r\n    \t\t{\r\n    \t\t\t_externalContext.redirect(_externalContext.getRequestContextPath() + &quot;/start.xhtml&quot;);\r\n    \t\t}\r\n    \t\telse if (result == AuthenticationStatus.SEND_CONTINUE)\r\n    \t\t{\r\n    \t\t\t_facesContext.responseComplete();\r\n    \t\t}\r\n    \t\telse if (result == AuthenticationStatus.SEND_FAILURE)\r\n    \t\t{\r\n    \t\t\t_facesContext.addMessage(null, new FacesMessage(\r\n    \t\t\t\tFacesMessage.SEVERITY_ERROR, &quot;Invalid user name and/or password.&quot;, null));\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprivate AuthenticationStatus executeUserAuthentication()\r\n    \t{\r\n    \t\treturn _securityContext.authenticate(\r\n    \t\t\t(HttpServletRequest) _externalContext.getRequest(),\r\n    \t\t\t(HttpServletResponse) _externalContext.getResponse(),\r\n    \t\t\tAuthenticationParameters.withParams().credential(\r\n    \t\t\t\tnew UsernamePasswordCredential(_userName, _password))\r\n    \t\t);\r\n    \t}\t\r\n    }\r\n\r\nThe problem is that, after a successful login (user name and password correct), as you saw in the comments in *Login* class above, the method `executeUserAuthentication()` returns `AuthenticationStatus.SEND_CONTINUE` instead of `AuthenticationStatus.SUCCESS`. Below is an image of the application running in debug mode in the moment of execution to show this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs a result, the browser address bar is not updated with the real url (*start.xhtml*) because the `AuthenticationStatus.SUCCESS` branch in the code above was not executed:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI thought I was doing something wrong, but then I decided to clone this simple application from @ArjanTijms that uses the same authentication logic:\r\n\r\nhttps://github.com/rieckpil/blog-tutorials/tree/master/jsf-simple-login-with-java-ee-security-api\r\n\r\nHis application is explained in this post:\r\n\r\nhttps://rieckpil.de/howto-simple-form-based-authentication-for-jsf-2-3-with-java-ee-8-security-api/\r\n\r\nAnd the results were the same of my application: the `AuthenticationStatus.SEND_CONTINUE` branch was executed instead of the `AuthenticationStatus.SUCCESS` branch:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nNo updated address bar too:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nSo, what&#39;s going on here? Is this a problem in the applications, Wildfly, is this correct behaviour (if so, what&#39;s the use of the `AuthenticationStatus.SUCCESS` enum, when will it be used?)? I just want to be able to execute the redirect by myself.\r\n\r\n**UPDATE 1**\r\n\r\nFor your information, after the `executeUserAuthentication()` the user is already authenticated: `((HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest()).getUserPrincipal()` is not null.\r\n\r\nSome other files in the application:\r\n\r\n**web.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; version=&quot;4.0&quot;&gt;\r\n    \t&lt;display-name&gt;autenticacao-visao&lt;/display-name&gt;\r\n    \r\n    \t&lt;!-- ========== JSF ========== --&gt;\r\n    \r\n    \t&lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;\r\n    \t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;*.xhtml&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\n    \t\r\n    \t&lt;context-param&gt;\r\n    \t\t&lt;param-name&gt;javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;true&lt;/param-value&gt;\r\n    \t&lt;/context-param&gt;\r\n    \t\r\n    \t&lt;!-- ========== Security ========== --&gt;\r\n    \t\r\n    \t&lt;security-constraint&gt;\r\n    \t\t&lt;web-resource-collection&gt;\r\n    \t\t\t&lt;web-resource-name&gt;restrict&lt;/web-resource-name&gt;\r\n    \t\t\t&lt;url-pattern&gt;/app/*&lt;/url-pattern&gt;\r\n    \t\t&lt;/web-resource-collection&gt;\r\n    \t\t&lt;auth-constraint&gt;\r\n    \t\t\t&lt;role-name&gt;USER&lt;/role-name&gt;\r\n    \t\t&lt;/auth-constraint&gt;\r\n    \t&lt;/security-constraint&gt;\r\n    \t&lt;security-constraint&gt;\r\n    \t\t&lt;web-resource-collection&gt;\r\n    \t\t\t&lt;web-resource-name&gt;allowed&lt;/web-resource-name&gt;\r\n    \t\t\t&lt;url-pattern&gt;/app/resources/*&lt;/url-pattern&gt;\r\n    \t\t&lt;/web-resource-collection&gt;\r\n    \t&lt;/security-constraint&gt;\r\n    \r\n    \t&lt;security-role&gt;\r\n    \t\t&lt;role-name&gt;USER&lt;/role-name&gt;\r\n    \t&lt;/security-role&gt;\r\n    \r\n    \t&lt;!-- ========== Resources ========== --&gt;\r\n    \t\r\n    \t&lt;context-param&gt;\r\n    \t\t&lt;param-name&gt;dev.br.RESOURCES&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;resources&lt;/param-value&gt;\r\n    \t&lt;/context-param&gt;\r\n    \r\n    \t&lt;!-- ========== Start page ========== --&gt;\r\n      \r\n    \t&lt;welcome-file-list&gt;\r\n    \t\t&lt;welcome-file&gt;app/start.xhtml&lt;/welcome-file&gt;\r\n    \t&lt;/welcome-file-list&gt;\r\n    &lt;/web-app&gt;\r\n\r\n**jboss-app.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;jboss-app&gt;\r\n    \t&lt;security-domain&gt;jaspitest&lt;/security-domain&gt;\r\n    &lt;/jboss-app&gt;\r\n\r\n**start.xhtml**\r\n\r\n    &lt;ui:composition template=&quot;/templates/layout.xhtml&quot;\r\n    \txmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n    \txmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\r\n    \txmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;\r\n    \txmlns:h=&quot;http://xmlns.jcp.org/jsf/html&quot;&gt;\r\n    \r\n    \t&lt;ui:define name=&quot;title&quot;&gt;\r\n    \t\tIn&#237;cio\r\n    \t&lt;/ui:define&gt;\r\n    \t\r\n    \t&lt;ui:define name=&quot;content&quot;&gt;\r\n            #{start.loggedInMessage}\r\n            &lt;br /&gt;\r\n            &lt;h:commandButton value=&quot;Execute&quot; /&gt;\r\n    \t&lt;/ui:define&gt;\r\n    &lt;/ui:composition&gt;\r\n\r\n**Start.java**\r\n\r\n    package br.dev.authentication.view;\r\n    \r\n    import java.security.Principal;\r\n    \r\n    import javax.enterprise.context.RequestScoped;\r\n    import javax.faces.context.ExternalContext;\r\n    import javax.faces.context.FacesContext;\r\n    import javax.inject.Inject;\r\n    import javax.inject.Named;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    \r\n    @RequestScoped\r\n    @Named\r\n    public class Start\r\n    {\r\n    \t@Inject\r\n    \tprivate ExternalContext _externalContext;\r\n    \t\r\n    \tpublic String getLoggedInMessage()\r\n    \t{\r\n    \t\tPrincipal user = ((HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest()).getUserPrincipal();\r\n    \t\tif (user != null)\r\n    \t\t{\r\n    \t\t\treturn &quot;Logged in: &quot; + user.getName();\r\n    \t\t}\r\n    \t\telse\r\n    \t\t{\r\n    \t\t\treturn &quot;Not logged in&quot;;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**UPDATE 2**\r\n\r\nAfter lots of tests, I noticed (at least in my application) that sometimes `SecurityContext.authenticate()` returns `AuthenticationStatus.SEND_CONTINUE` and sometimes returns `AuthenticationStatus.SUCCESS`. Until now, I haven&#39;t figured out the reason why.\r\n\r\nSo, for the time being, I decided to solve the problem with a hack for the cases when `AuthenticationStatus.SEND_CONTINUE` would be returned. So, basically, what I&#39;m doing is redirecting to the *start* page manually. The hack is below:\r\n\r\n**web.xml** (changed the welcome page to *redirectortostart.xhtml*)\r\n\r\n    &lt;welcome-file-list&gt;\r\n    \t&lt;welcome-file&gt;app/redirectortostart.xhtml&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n\r\n**redirectortostart.xhtml**\r\n\r\n    &lt;ui:composition template=&quot;/templates/layout.xhtml&quot;\r\n    \txmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n    \txmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\r\n    \txmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;&gt;\r\n    \r\n    \t&lt;ui:define name=&quot;metadados&quot;&gt;\r\n    \t\t&lt;f:event type=&quot;preRenderView&quot; listener=&quot;#{redirectorToStart.goToStart}&quot; /&gt;\r\n    \t&lt;/ui:define&gt;\r\n    &lt;/ui:composition&gt;\r\n\r\n**RedirectorToStart.java**\r\n\r\n    package br.dev.authentication.view;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import javax.enterprise.context.RequestScoped;\r\n    import javax.faces.context.ExternalContext;\r\n    import javax.inject.Inject;\r\n    import javax.inject.Named;\r\n    \r\n    @RequestScoped\r\n    @Named\r\n    public class RedirectorToStart\r\n    {\r\n    \t@Inject\r\n    \tprivate ExternalContext _externalContext;\r\n    \r\n    \tpublic void goToStart() throws IOException\r\n    \t{\r\n    \t    _externalContext.redirect(_externalContext.getRequestContextPath() + &quot;/app/start.xhtml&quot;);\r\n    \t}\r\n    }\r\n\r\nIt&#39;s not elegant, but for the time being it solves my problem. Hope someday some of you have a clue about what really could be happening with my application and could give a hint to me.\r\n\r\n  [1]: https://i.stack.imgur.com/c5k3o.png\r\n  [2]: https://i.stack.imgur.com/pIAAb.png\r\n  [3]: https://i.stack.imgur.com/AtJLi.png\r\n  [4]: https://i.stack.imgur.com/m6aqB.png","title":"On a successful login, SecurityContext.authenticate() returns AuthenticationStatus.SEND_CONTINUE instead of AuthenticationStatus.SUCCESS","body":"<ul>\n<li>Jakarta EE 8</li>\n<li>Wildfly 21</li>\n<li>Java 11</li>\n</ul>\n<p>Using <em>Java EE Security</em>, I'm trying custom form authentication in a simple application.</p>\n<p>These are the relevant files (the description of the problem is below the files):</p>\n<p><strong>CustomFormAuthenticationConfig.java</strong></p>\n<pre><code>package br.dev.authentication.view;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.faces.annotation.FacesConfig;\nimport javax.security.enterprise.authentication.mechanism.http.CustomFormAuthenticationMechanismDefinition;\nimport javax.security.enterprise.authentication.mechanism.http.LoginToContinue;\n\n@CustomFormAuthenticationMechanismDefinition(\n    loginToContinue = @LoginToContinue(\n        loginPage = &quot;/login.xhtml&quot;,\n        useForwardToLogin = false,\n        errorPage = &quot;&quot;\n    )\n)\n@FacesConfig\n@ApplicationScoped\npublic class CustomFormAuthenticationConfig\n{\n}\n</code></pre>\n<p><strong>UserAuthenticator.java</strong></p>\n<pre><code>package br.dev.authentication.view;\n\nimport java.util.Set;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.security.enterprise.credential.Credential;\nimport javax.security.enterprise.credential.UsernamePasswordCredential;\nimport javax.security.enterprise.identitystore.CredentialValidationResult;\nimport javax.security.enterprise.identitystore.IdentityStore;\n\n@ApplicationScoped\npublic class UserAuthenticator implements IdentityStore\n{\n    @Override\n    public CredentialValidationResult validate(Credential credencial)\n    {\n        var userCredentials = (UsernamePasswordCredential) credencial;\n        var userName = userCredentials.getCaller();\n        var password = userCredentials.getPasswordAsString();\n\n        if (userName.equals(&quot;1&quot;) &amp;&amp; password.equals(&quot;1&quot;))\n        {\n            return new CredentialValidationResult(userName, Set.of(&quot;USER&quot;));\n        }\n        else\n        {\n            return CredentialValidationResult.INVALID_RESULT;\n        }\n    }\n}\n</code></pre>\n<p><strong>login.xhtml</strong></p>\n<pre><code>&lt;ui:composition template=&quot;/templates/layout.xhtml&quot;\n    xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n    xmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\n    xmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;\n    xmlns:h=&quot;http://xmlns.jcp.org/jsf/html&quot;\n    xmlns:au=&quot;http://dev.br/authentication&quot;&gt;\n\n    &lt;ui:define name=&quot;title&quot;&gt;\n        Login\n    &lt;/ui:define&gt;\n\n    &lt;ui:define name=&quot;content&quot;&gt;\n        &lt;au:errors /&gt;\n        &lt;div id=&quot;fields&quot;&gt;\n            &lt;h:outputLabel value=&quot;User name:&quot; for=&quot;userName&quot; /&gt;\n            &lt;h:inputText id=&quot;userName&quot; value=&quot;#{login.userName}&quot; /&gt;\n\n            &lt;h:outputLabel value=&quot;Password:&quot; for=&quot;password&quot; /&gt;\n            &lt;h:inputSecret id=&quot;password&quot; value=&quot;#{login.password}&quot; /&gt;\n\n            &lt;h:commandButton value=&quot;Enter&quot; action=&quot;#{login.authenticateUser}&quot; /&gt;\n        &lt;/div&gt;\n    &lt;/ui:define&gt;\n&lt;/ui:composition&gt;\n</code></pre>\n<p><strong>Login.java</strong></p>\n<pre><code>package br.dev.authentication.view;\n\nimport java.io.IOException;\n\nimport javax.enterprise.context.RequestScoped;\nimport javax.faces.application.FacesMessage;\nimport javax.faces.context.ExternalContext;\nimport javax.faces.context.FacesContext;\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport javax.security.enterprise.AuthenticationStatus;\nimport javax.security.enterprise.SecurityContext;\nimport javax.security.enterprise.authentication.mechanism.http.AuthenticationParameters;\nimport javax.security.enterprise.credential.UsernamePasswordCredential;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.validation.constraints.NotBlank;\n\n@RequestScoped\n@Named\npublic class Login\n{\n    private String _userName;\n    private String _password;\n\n    @Inject\n    private FacesContext _facesContext;\n    \n    @Inject\n    private ExternalContext _externalContext;\n\n    @Inject\n    private SecurityContext _securityContext;\n    \n    @NotBlank(message = &quot;User name is required.&quot;)\n    public String getUserName()\n    {\n        return _userName;\n    }\n    \n    public void setUserName(String userName)\n    {\n        _userName = userName;\n    }\n    \n    @NotBlank(message = &quot;Password is required.&quot;)\n    public String getPassword()\n    {\n        return _password;\n    }\n    \n    public void setPassword(String password)\n    {\n        _password = password;\n    }\n    \n    public void authenticateUser() throws IOException\n    {\n        // After a successful login (username and password correct),\n        // executeUserAuthentication() returns AuthenticationStatus.SEND_CONTINUE, \n        // and not AuthenticationStatus.SUCCESS.\n        // Why?\n        // As a result, the code in the AuthenticationStatus.SUCCESS branch above is not executed.\n        AuthenticationStatus result = executeUserAuthentication();\n        if (result == AuthenticationStatus.SUCCESS)\n        {\n            _externalContext.redirect(_externalContext.getRequestContextPath() + &quot;/start.xhtml&quot;);\n        }\n        else if (result == AuthenticationStatus.SEND_CONTINUE)\n        {\n            _facesContext.responseComplete();\n        }\n        else if (result == AuthenticationStatus.SEND_FAILURE)\n        {\n            _facesContext.addMessage(null, new FacesMessage(\n                FacesMessage.SEVERITY_ERROR, &quot;Invalid user name and/or password.&quot;, null));\n        }\n    }\n    \n    private AuthenticationStatus executeUserAuthentication()\n    {\n        return _securityContext.authenticate(\n            (HttpServletRequest) _externalContext.getRequest(),\n            (HttpServletResponse) _externalContext.getResponse(),\n            AuthenticationParameters.withParams().credential(\n                new UsernamePasswordCredential(_userName, _password))\n        );\n    }   \n}\n</code></pre>\n<p>The problem is that, after a successful login (user name and password correct), as you saw in the comments in <em>Login</em> class above, the method <code>executeUserAuthentication()</code> returns <code>AuthenticationStatus.SEND_CONTINUE</code> instead of <code>AuthenticationStatus.SUCCESS</code>. Below is an image of the application running in debug mode in the moment of execution to show this:</p>\n<p><a href=\"https://i.stack.imgur.com/c5k3o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c5k3o.png\" alt=\"enter image description here\" /></a></p>\n<p>As a result, the browser address bar is not updated with the real url (<em>start.xhtml</em>) because the <code>AuthenticationStatus.SUCCESS</code> branch in the code above was not executed:</p>\n<p><a href=\"https://i.stack.imgur.com/pIAAb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pIAAb.png\" alt=\"enter image description here\" /></a></p>\n<p>I thought I was doing something wrong, but then I decided to clone this simple application from @ArjanTijms that uses the same authentication logic:</p>\n<p><a href=\"https://github.com/rieckpil/blog-tutorials/tree/master/jsf-simple-login-with-java-ee-security-api\" rel=\"nofollow noreferrer\">https://github.com/rieckpil/blog-tutorials/tree/master/jsf-simple-login-with-java-ee-security-api</a></p>\n<p>His application is explained in this post:</p>\n<p><a href=\"https://rieckpil.de/howto-simple-form-based-authentication-for-jsf-2-3-with-java-ee-8-security-api/\" rel=\"nofollow noreferrer\">https://rieckpil.de/howto-simple-form-based-authentication-for-jsf-2-3-with-java-ee-8-security-api/</a></p>\n<p>And the results were the same of my application: the <code>AuthenticationStatus.SEND_CONTINUE</code> branch was executed instead of the <code>AuthenticationStatus.SUCCESS</code> branch:</p>\n<p><a href=\"https://i.stack.imgur.com/AtJLi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AtJLi.png\" alt=\"enter image description here\" /></a></p>\n<p>No updated address bar too:</p>\n<p><a href=\"https://i.stack.imgur.com/m6aqB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m6aqB.png\" alt=\"enter image description here\" /></a></p>\n<p>So, what's going on here? Is this a problem in the applications, Wildfly, is this correct behaviour (if so, what's the use of the <code>AuthenticationStatus.SUCCESS</code> enum, when will it be used?)? I just want to be able to execute the redirect by myself.</p>\n<p><strong>UPDATE 1</strong></p>\n<p>For your information, after the <code>executeUserAuthentication()</code> the user is already authenticated: <code>((HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest()).getUserPrincipal()</code> is not null.</p>\n<p>Some other files in the application:</p>\n<p><strong>web.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; version=&quot;4.0&quot;&gt;\n    &lt;display-name&gt;autenticacao-visao&lt;/display-name&gt;\n\n    &lt;!-- ========== JSF ========== --&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.xhtml&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    &lt;context-param&gt;\n        &lt;param-name&gt;javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/context-param&gt;\n    \n    &lt;!-- ========== Security ========== --&gt;\n    \n    &lt;security-constraint&gt;\n        &lt;web-resource-collection&gt;\n            &lt;web-resource-name&gt;restrict&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/app/*&lt;/url-pattern&gt;\n        &lt;/web-resource-collection&gt;\n        &lt;auth-constraint&gt;\n            &lt;role-name&gt;USER&lt;/role-name&gt;\n        &lt;/auth-constraint&gt;\n    &lt;/security-constraint&gt;\n    &lt;security-constraint&gt;\n        &lt;web-resource-collection&gt;\n            &lt;web-resource-name&gt;allowed&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/app/resources/*&lt;/url-pattern&gt;\n        &lt;/web-resource-collection&gt;\n    &lt;/security-constraint&gt;\n\n    &lt;security-role&gt;\n        &lt;role-name&gt;USER&lt;/role-name&gt;\n    &lt;/security-role&gt;\n\n    &lt;!-- ========== Resources ========== --&gt;\n    \n    &lt;context-param&gt;\n        &lt;param-name&gt;dev.br.RESOURCES&lt;/param-name&gt;\n        &lt;param-value&gt;resources&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;!-- ========== Start page ========== --&gt;\n  \n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;app/start.xhtml&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p><strong>jboss-app.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jboss-app&gt;\n    &lt;security-domain&gt;jaspitest&lt;/security-domain&gt;\n&lt;/jboss-app&gt;\n</code></pre>\n<p><strong>start.xhtml</strong></p>\n<pre><code>&lt;ui:composition template=&quot;/templates/layout.xhtml&quot;\n    xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n    xmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\n    xmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;\n    xmlns:h=&quot;http://xmlns.jcp.org/jsf/html&quot;&gt;\n\n    &lt;ui:define name=&quot;title&quot;&gt;\n        Início\n    &lt;/ui:define&gt;\n    \n    &lt;ui:define name=&quot;content&quot;&gt;\n        #{start.loggedInMessage}\n        &lt;br /&gt;\n        &lt;h:commandButton value=&quot;Execute&quot; /&gt;\n    &lt;/ui:define&gt;\n&lt;/ui:composition&gt;\n</code></pre>\n<p><strong>Start.java</strong></p>\n<pre><code>package br.dev.authentication.view;\n\nimport java.security.Principal;\n\nimport javax.enterprise.context.RequestScoped;\nimport javax.faces.context.ExternalContext;\nimport javax.faces.context.FacesContext;\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport javax.servlet.http.HttpServletRequest;\n\n@RequestScoped\n@Named\npublic class Start\n{\n    @Inject\n    private ExternalContext _externalContext;\n    \n    public String getLoggedInMessage()\n    {\n        Principal user = ((HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest()).getUserPrincipal();\n        if (user != null)\n        {\n            return &quot;Logged in: &quot; + user.getName();\n        }\n        else\n        {\n            return &quot;Not logged in&quot;;\n        }\n    }\n}\n</code></pre>\n<p><strong>UPDATE 2</strong></p>\n<p>After lots of tests, I noticed (at least in my application) that sometimes <code>SecurityContext.authenticate()</code> returns <code>AuthenticationStatus.SEND_CONTINUE</code> and sometimes returns <code>AuthenticationStatus.SUCCESS</code>. Until now, I haven't figured out the reason why.</p>\n<p>So, for the time being, I decided to solve the problem with a hack for the cases when <code>AuthenticationStatus.SEND_CONTINUE</code> would be returned. So, basically, what I'm doing is redirecting to the <em>start</em> page manually. The hack is below:</p>\n<p><strong>web.xml</strong> (changed the welcome page to <em>redirectortostart.xhtml</em>)</p>\n<pre><code>&lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;app/redirectortostart.xhtml&lt;/welcome-file&gt;\n&lt;/welcome-file-list&gt;\n</code></pre>\n<p><strong>redirectortostart.xhtml</strong></p>\n<pre><code>&lt;ui:composition template=&quot;/templates/layout.xhtml&quot;\n    xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n    xmlns:ui=&quot;http://xmlns.jcp.org/jsf/facelets&quot;\n    xmlns:f=&quot;http://xmlns.jcp.org/jsf/core&quot;&gt;\n\n    &lt;ui:define name=&quot;metadados&quot;&gt;\n        &lt;f:event type=&quot;preRenderView&quot; listener=&quot;#{redirectorToStart.goToStart}&quot; /&gt;\n    &lt;/ui:define&gt;\n&lt;/ui:composition&gt;\n</code></pre>\n<p><strong>RedirectorToStart.java</strong></p>\n<pre><code>package br.dev.authentication.view;\n\nimport java.io.IOException;\n\nimport javax.enterprise.context.RequestScoped;\nimport javax.faces.context.ExternalContext;\nimport javax.inject.Inject;\nimport javax.inject.Named;\n\n@RequestScoped\n@Named\npublic class RedirectorToStart\n{\n    @Inject\n    private ExternalContext _externalContext;\n\n    public void goToStart() throws IOException\n    {\n        _externalContext.redirect(_externalContext.getRequestContextPath() + &quot;/app/start.xhtml&quot;);\n    }\n}\n</code></pre>\n<p>It's not elegant, but for the time being it solves my problem. Hope someday some of you have a clue about what really could be happening with my application and could give a hint to me.</p>\n"},{"tags":["java","java-8","jackson","jackson-databind","jackson-modules"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1661439219,"post_id":73489502,"comment_id":129777797,"body_markdown":"`JsonCreator.Mode.PROPERTIES`: *Mode that indicates that the argument(s) for creator are to be bound from matching properties of incoming Object value, using creator argument names (explicit or implicit) to match incoming Object properties to arguments.*","body":"<code>JsonCreator.Mode.PROPERTIES</code>: <i>Mode that indicates that the argument(s) for creator are to be bound from matching properties of incoming Object value, using creator argument names (explicit or implicit) to match incoming Object properties to arguments.</i>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661439355,"post_id":73489502,"comment_id":129777855,"body_markdown":"It is not really clear what you are asking","body":"It is not really clear what you are asking"},{"owner":{"account_id":12635151,"reputation":579,"user_id":9184899,"accept_rate":75,"display_name":"Stefan Dorn"},"score":0,"creation_date":1661439663,"post_id":73489502,"comment_id":129778008,"body_markdown":"What will be difference if we don&#39;t do this change?","body":"What will be difference if we don&#39;t do this change?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661448783,"post_id":73489502,"comment_id":129781366,"body_markdown":"`JsonCreator.Mode.DEFAULT`: *Pseudo-mode that indicates that caller is to use default heuristics for choosing mode to use.*","body":"<code>JsonCreator.Mode.DEFAULT</code>: <i>Pseudo-mode that indicates that caller is to use default heuristics for choosing mode to use.</i>"}],"answers":[{"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1661551006,"creation_date":1661548794,"answer_id":73506579,"question_id":73489502,"body_markdown":"The best and up to date answer for this question you can find on the GitHub page for this module: [jackson-modules-java8/parameter-names][1].\r\n\r\nMain goal:\r\n\r\n&gt; Jackson module that adds support for accessing parameter names; a\r\n&gt; feature added in JDK 8.\r\n\r\nDelegating creator:\r\n\r\n&gt; By default, Jackson uses single argument constructors for mapping\r\n&gt; whole JSON value into value of the argument.\r\n&gt; \r\n&gt; To override this behaviour use the `ParameterNamesModule` constructor\r\n&gt; with `JsonCreator.Mode` parameter. For example, to use same behaviour as\r\n&gt; for constructors with multiple parameters:\r\n```java\r\nObjectMapper objectMapper = new ObjectMapper();\r\nobjectMapper.registerModule(new ParameterNamesModule(JsonCreator.Mode.PROPERTIES));\r\n```\r\n\r\nTo understand it a little bit better we need to create a simple `POJO` and log what is invoked when. Take a look at below class:\r\n```java\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.json.JsonMapper;\r\nimport com.fasterxml.jackson.module.paramnames.ParameterNamesModule;\r\nimport lombok.ToString;\r\n\r\nimport java.util.Map;\r\nimport java.util.Objects;\r\n\r\npublic class JsonCreatorApp {\r\n\tpublic static void main(String[] args) throws JsonProcessingException {\r\n\t\tJsonMapper mapper = JsonMapper.builder()\r\n                // change the mode value and run\r\n\t\t\t\t.addModule(new ParameterNamesModule(JsonCreator.Mode.PROPERTIES))\r\n\t\t\t\t.build();\r\n\r\n\t\tString json = &quot;{\\&quot;field1\\&quot;: \\&quot;val\\&quot;,\\&quot;field2\\&quot;:314}&quot;;\r\n\t\tFields fields = mapper.readValue(json, Fields.class);\r\n\t\tSystem.out.println(fields);\r\n\t}\r\n}\r\n\r\n@ToString\r\nclass Fields {\r\n\r\n\tprivate String field1;\r\n\tprivate int field2;\r\n\r\n\tpublic Fields() {\r\n\t\tSystem.out.println(&quot;no-arg constructor&quot;);\r\n\t}\r\n\r\n\t@JsonCreator\r\n\tpublic Fields(@JsonProperty(&quot;field1&quot;) String field1, @JsonProperty(&quot;field2&quot;) int field2) {\r\n\t\tSystem.out.println(&quot;2-args constructor: (&quot; + field1 + &quot;, &quot; + field2 + &quot;)&quot;);\r\n\r\n\t\tthis.field1 = field1;\r\n\t\tthis.field2 = field2;\r\n\t}\r\n\r\n\tpublic String getField1() {\r\n\t\treturn field1;\r\n\t}\r\n\r\n\tpublic void setField1(String field1) {\r\n\t\tSystem.out.println(&quot;Set Field1: &quot; + field1);\r\n\t\tthis.field1 = field1;\r\n\t}\r\n\r\n\tpublic int getField2() {\r\n\t\treturn field2;\r\n\t}\r\n\r\n\tpublic void setField2(int field2) {\r\n\t\tSystem.out.println(&quot;Set Field2: &quot; + field2);\r\n\r\n\t\tthis.field2 = field2;\r\n\t}\r\n}\r\n```\r\n\r\nFor different modes app prints different results.  \r\n`JsonCreator.Mode.DEFAULT`:\r\n```\r\n2-args constructor: (val, 314)\r\nFields(field1=val, field2=314)\r\n```\r\n`JsonCreator.Mode.DISABLED`:  \r\n```\r\nno-arg constructor\r\nSet Field1: val\r\nSet Field2: 314\r\nFields(field1=val, field2=314)\r\n```\r\n`JsonCreator.Mode.DELEGATING`:\r\n```java\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Invalid type definition for type `com.celoxity.Fields`: More than one argument (#0 and #1) left as delegating for Creator [constructor for `com.celoxity.Fields` (2 args), annotations: {interface com.fasterxml.jackson.annotation.JsonCreator=@com.fasterxml.jackson.annotation.JsonCreator(mode=DEFAULT)}: only one allowed\r\n at [Source: (String)&quot;{&quot;field1&quot;: &quot;val&quot;,&quot;field2&quot;:314}&quot;; line: 1, column: 1]\r\n```\r\n`JsonCreator.Mode.PROPERTIES`:\r\n```\r\n2-args constructor: (val, 314)\r\nFields(field1=val, field2=314)\r\n```\r\n\r\nNow, let&#39;s add extra method to our `POJO` and change mode for 2-arg constructor to `JsonCreator.Mode.PROPERTIES` to avoid problems:\r\n```java\r\n@JsonCreator(mode = JsonCreator.Mode.DELEGATING)\r\nprivate static Fields of(Map&lt;String, Object&gt; map) {\r\n\tSystem.out.println(&quot;of: (&quot; + map + &quot;)&quot;);\r\n\tString field1 = Objects.toString(map.get(&quot;field1&quot;), null);\r\n\tint field2 = Integer.parseInt(Objects.toString(map.get(&quot;field2&quot;), &quot;0&quot;));\r\n\r\n\treturn new Fields(field1, field2);\r\n}\r\n```\r\n\r\nNow it works for `JsonCreator.Mode.DELEGATING`:\r\n```\r\nof: ({field1=val, field2=314})\r\n2-args constructor: (val, 314)\r\nFields(field1=val, field2=314)\r\n```\r\n\r\nYou can play with this example and try out different configurations. Add more constructors, remove some, remove `JsonCreator` annotation from constructor and `of` method and spot the difference.\r\n\r\n  [1]: https://github.com/FasterXML/jackson-modules-java8/tree/2.14/parameter-names","title":"Jackson ParameterNamesModule","body":"<p>The best and up to date answer for this question you can find on the GitHub page for this module: <a href=\"https://github.com/FasterXML/jackson-modules-java8/tree/2.14/parameter-names\" rel=\"nofollow noreferrer\">jackson-modules-java8/parameter-names</a>.</p>\n<p>Main goal:</p>\n<blockquote>\n<p>Jackson module that adds support for accessing parameter names; a\nfeature added in JDK 8.</p>\n</blockquote>\n<p>Delegating creator:</p>\n<blockquote>\n<p>By default, Jackson uses single argument constructors for mapping\nwhole JSON value into value of the argument.</p>\n<p>To override this behaviour use the <code>ParameterNamesModule</code> constructor\nwith <code>JsonCreator.Mode</code> parameter. For example, to use same behaviour as\nfor constructors with multiple parameters:</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.registerModule(new ParameterNamesModule(JsonCreator.Mode.PROPERTIES));\n</code></pre>\n<p>To understand it a little bit better we need to create a simple <code>POJO</code> and log what is invoked when. Take a look at below class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.json.JsonMapper;\nimport com.fasterxml.jackson.module.paramnames.ParameterNamesModule;\nimport lombok.ToString;\n\nimport java.util.Map;\nimport java.util.Objects;\n\npublic class JsonCreatorApp {\n    public static void main(String[] args) throws JsonProcessingException {\n        JsonMapper mapper = JsonMapper.builder()\n                // change the mode value and run\n                .addModule(new ParameterNamesModule(JsonCreator.Mode.PROPERTIES))\n                .build();\n\n        String json = &quot;{\\&quot;field1\\&quot;: \\&quot;val\\&quot;,\\&quot;field2\\&quot;:314}&quot;;\n        Fields fields = mapper.readValue(json, Fields.class);\n        System.out.println(fields);\n    }\n}\n\n@ToString\nclass Fields {\n\n    private String field1;\n    private int field2;\n\n    public Fields() {\n        System.out.println(&quot;no-arg constructor&quot;);\n    }\n\n    @JsonCreator\n    public Fields(@JsonProperty(&quot;field1&quot;) String field1, @JsonProperty(&quot;field2&quot;) int field2) {\n        System.out.println(&quot;2-args constructor: (&quot; + field1 + &quot;, &quot; + field2 + &quot;)&quot;);\n\n        this.field1 = field1;\n        this.field2 = field2;\n    }\n\n    public String getField1() {\n        return field1;\n    }\n\n    public void setField1(String field1) {\n        System.out.println(&quot;Set Field1: &quot; + field1);\n        this.field1 = field1;\n    }\n\n    public int getField2() {\n        return field2;\n    }\n\n    public void setField2(int field2) {\n        System.out.println(&quot;Set Field2: &quot; + field2);\n\n        this.field2 = field2;\n    }\n}\n</code></pre>\n<p>For different modes app prints different results.<br />\n<code>JsonCreator.Mode.DEFAULT</code>:</p>\n<pre><code>2-args constructor: (val, 314)\nFields(field1=val, field2=314)\n</code></pre>\n<p><code>JsonCreator.Mode.DISABLED</code>:</p>\n<pre><code>no-arg constructor\nSet Field1: val\nSet Field2: 314\nFields(field1=val, field2=314)\n</code></pre>\n<p><code>JsonCreator.Mode.DELEGATING</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Invalid type definition for type `com.celoxity.Fields`: More than one argument (#0 and #1) left as delegating for Creator [constructor for `com.celoxity.Fields` (2 args), annotations: {interface com.fasterxml.jackson.annotation.JsonCreator=@com.fasterxml.jackson.annotation.JsonCreator(mode=DEFAULT)}: only one allowed\n at [Source: (String)&quot;{&quot;field1&quot;: &quot;val&quot;,&quot;field2&quot;:314}&quot;; line: 1, column: 1]\n</code></pre>\n<p><code>JsonCreator.Mode.PROPERTIES</code>:</p>\n<pre><code>2-args constructor: (val, 314)\nFields(field1=val, field2=314)\n</code></pre>\n<p>Now, let's add extra method to our <code>POJO</code> and change mode for 2-arg constructor to <code>JsonCreator.Mode.PROPERTIES</code> to avoid problems:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonCreator(mode = JsonCreator.Mode.DELEGATING)\nprivate static Fields of(Map&lt;String, Object&gt; map) {\n    System.out.println(&quot;of: (&quot; + map + &quot;)&quot;);\n    String field1 = Objects.toString(map.get(&quot;field1&quot;), null);\n    int field2 = Integer.parseInt(Objects.toString(map.get(&quot;field2&quot;), &quot;0&quot;));\n\n    return new Fields(field1, field2);\n}\n</code></pre>\n<p>Now it works for <code>JsonCreator.Mode.DELEGATING</code>:</p>\n<pre><code>of: ({field1=val, field2=314})\n2-args constructor: (val, 314)\nFields(field1=val, field2=314)\n</code></pre>\n<p>You can play with this example and try out different configurations. Add more constructors, remove some, remove <code>JsonCreator</code> annotation from constructor and <code>of</code> method and spot the difference.</p>\n"}],"owner":{"account_id":12635151,"reputation":579,"user_id":9184899,"accept_rate":75,"display_name":"Stefan Dorn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2416,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73506579,"answer_count":1,"score":1,"last_activity_date":1661551123,"creation_date":1661438413,"question_id":73489502,"body_markdown":"I found this method in the code:\r\n\r\n    private MessageConverter makeJsonConverter() {\r\n        var jsonConverter = new MappingJackson2MessageConverter();\r\n        var mapper = jsonConverter.getObjectMapper();\r\n        mapper.registerModule(new ParameterNamesModule(JsonCreator.Mode.PROPERTIES));\r\n        return jsonConverter;\r\n    }\r\n\r\nCan anyone explain me the meaning of `mapper.registerModule(new ParameterNamesModule(JsonCreator.Mode.PROPERTIES))` ? How do we change the behaviour of mapping here? What will be different if we compare it with the default `ObjectMapper`?","title":"Jackson ParameterNamesModule","body":"<p>I found this method in the code:</p>\n<pre><code>private MessageConverter makeJsonConverter() {\n    var jsonConverter = new MappingJackson2MessageConverter();\n    var mapper = jsonConverter.getObjectMapper();\n    mapper.registerModule(new ParameterNamesModule(JsonCreator.Mode.PROPERTIES));\n    return jsonConverter;\n}\n</code></pre>\n<p>Can anyone explain me the meaning of <code>mapper.registerModule(new ParameterNamesModule(JsonCreator.Mode.PROPERTIES))</code> ? How do we change the behaviour of mapping here? What will be different if we compare it with the default <code>ObjectMapper</code>?</p>\n"},{"tags":["java","lucene"],"comments":[{"owner":{"account_id":21596351,"reputation":23,"user_id":15925251,"display_name":"Skyball"},"score":0,"creation_date":1661418735,"post_id":73484766,"comment_id":129769536,"body_markdown":"Please note that I can successfully find the document if I list all documents in the index using: \nfinal IndexReader indexReader = getIndexReader();\nfinal int docCount = indexReader.numDocs();\nfinal List&lt;Document&gt; documents = new ArrayList&lt;&gt;(docCount);\nfor (int i = 0; i &lt; docCount; i++) {\n   documents.add(indexReader.document(i));\n}","body":"Please note that I can successfully find the document if I list all documents in the index using:  final IndexReader indexReader = getIndexReader(); final int docCount = indexReader.numDocs(); final List&lt;Document&gt; documents = new ArrayList&lt;&gt;(docCount); for (int i = 0; i &lt; docCount; i++) {    documents.add(indexReader.document(i)); }"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1661430833,"post_id":73484766,"comment_id":129774115,"body_markdown":"What is `index.findDocuments(...)`?","body":"What is <code>index.findDocuments(...)</code>?"},{"owner":{"account_id":21596351,"reputation":23,"user_id":15925251,"display_name":"Skyball"},"score":0,"creation_date":1661433434,"post_id":73484766,"comment_id":129775124,"body_markdown":"Sorry, should have added that. It&#39;s a call to `IndexSearcher.search(query, Integer.MAX_VALUE);` (unlimited documents as max documents) that uses an `IndexReader` which is created with `DirectoryReader.open(indexDirectory)`, I will add the code to the question.","body":"Sorry, should have added that. It&#39;s a call to <code>IndexSearcher.search(query, Integer.MAX_VALUE);</code> (unlimited documents as max documents) that uses an <code>IndexReader</code> which is created with <code>DirectoryReader.open(indexDirectory)</code>, I will add the code to the question."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1661436059,"post_id":73484766,"comment_id":129776287,"body_markdown":"Also, what is `submitDocument(document)`? and what is `Index.UNIQUE_LUCENE_DOCUMENT_ID`? - and any other methods we may need to recreate the problem. Can you make the code a [mre] for us?","body":"Also, what is <code>submitDocument(document)</code>? and what is <code>Index.UNIQUE_LUCENE_DOCUMENT_ID</code>? - and any other methods we may need to recreate the problem. Can you make the code a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for us?"},{"owner":{"account_id":21596351,"reputation":23,"user_id":15925251,"display_name":"Skyball"},"score":1,"creation_date":1661439608,"post_id":73484766,"comment_id":129777982,"body_markdown":"Alright, I wrote a class that reproduces the problem. Please see the edit. Please also note that I will be out of office for the rest of the week and might not see your responses immediately, for which I am sorry. I will do my best to watch this question. Thank you for your time.","body":"Alright, I wrote a class that reproduces the problem. Please see the edit. Please also note that I will be out of office for the rest of the week and might not see your responses immediately, for which I am sorry. I will do my best to watch this question. Thank you for your time."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1661451352,"post_id":73484766,"comment_id":129782206,"body_markdown":"I appreciate all the updates, thank you. My quick observations, after an initial review are these: (a) When I use `luceneDocumentWriter.addDocument(...)` instead of `luceneDocumentWriter.updateDocument(...)`, then the queries work as expected (when I have crossed the &quot;too many documents&quot; threshold). And (b) the indexed data looks identical in both cases - so it _appears_ as if two _apparently_ identical indexes give different results when I run the same queries against them.","body":"I appreciate all the updates, thank you. My quick observations, after an initial review are these: (a) When I use <code>luceneDocumentWriter.addDocument(...)</code> instead of <code>luceneDocumentWriter.updateDocument(...)</code>, then the queries work as expected (when I have crossed the &quot;too many documents&quot; threshold). And (b) the indexed data looks identical in both cases - so it <i>appears</i> as if two <i>apparently</i> identical indexes give different results when I run the same queries against them."},{"owner":{"account_id":21596351,"reputation":23,"user_id":15925251,"display_name":"Skyball"},"score":0,"creation_date":1661461389,"post_id":73484766,"comment_id":129784959,"body_markdown":"Oh my, you seem to be onto something. If I use either `luceneDocumentWriter.addDocument(indexDocument.getFields());` or \n`luceneDocumentWriter.updateDocument(null, indexDocument);`\n the documents are found in all cases. I will test if this works in my real case tomorrow and write a short answer if that works. Thank you so much for pointing me in the correct direction!","body":"Oh my, you seem to be onto something. If I use either <code>luceneDocumentWriter.addDocument(indexDocument.getFields());</code> or  <code>luceneDocumentWriter.updateDocument(null, indexDocument);</code>  the documents are found in all cases. I will test if this works in my real case tomorrow and write a short answer if that works. Thank you so much for pointing me in the correct direction!"}],"answers":[{"tags":[],"owner":{"account_id":21596351,"reputation":23,"user_id":15925251,"display_name":"Skyball"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661497107,"creation_date":1661497107,"answer_id":73497188,"question_id":73484766,"body_markdown":"At a first glance, a possible solution for this would be:  \r\nThe `updateDocument()` method with a term passed as first parameter is currently used to build the index. When either passing `null` as term or using the `addDocument()` method, the query successfully returned the correct values. The solution must have something to do with the `Term`.\r\n\r\n    luceneDocumentWriter.addDocument(indexDocument.getFields());\r\n    // or\r\n    luceneDocumentWriter.updateDocument(null, indexDocument);\r\n\r\nPlaying around a bit further: the key of the term the document in question is stored under cannot be used as field key inside the document again, otherwise the document becomes unsearchable:  \r\n\r\n    final Term term = new Term(&quot;uldid&quot;, indexDocument.get(&quot;id&quot;));\r\n\r\n    // would work, different key from term...\r\n    indexDocument.add(new TextField(&quot;uldid2&quot;, indexDocument.get(&quot;id&quot;), Field.Store.YES));\r\n\r\n    // would not work...\r\n    indexDocument.add(new TextField(&quot;uldid&quot;, indexDocument.get(&quot;id&quot;), Field.Store.YES));\r\n\r\n    // ...when adding to index using term\r\n    luceneDocumentWriter.updateDocument(term, indexDocument);\r\n\r\nAnother way to circumvent this would be to use a different value from the identical field in the document (`uldid` in this case), that is also different from the ID that is being searched in the index:\r\n\r\n    final Term term = new Term(&quot;uldid&quot;, indexDocument.get(&quot;id&quot;).hashCode() + &quot;&quot;);\r\n    // or\r\n    indexDocument.add(new TextField(&quot;uldid&quot;, indexDocument.get(&quot;id&quot;).hashCode() + &quot;&quot;, Field.Store.YES));\r\n\r\nWhich seems rather odd. I don&#39;t really have a final solution or reason this is the way it is, but I will be using the second option from now on, using the hash of whatever key I want to store the document under as `Term`.","title":"Lucene Index Query does not find document if too many documents/similar documents present","body":"<p>At a first glance, a possible solution for this would be:<br />\nThe <code>updateDocument()</code> method with a term passed as first parameter is currently used to build the index. When either passing <code>null</code> as term or using the <code>addDocument()</code> method, the query successfully returned the correct values. The solution must have something to do with the <code>Term</code>.</p>\n<pre><code>luceneDocumentWriter.addDocument(indexDocument.getFields());\n// or\nluceneDocumentWriter.updateDocument(null, indexDocument);\n</code></pre>\n<p>Playing around a bit further: the key of the term the document in question is stored under cannot be used as field key inside the document again, otherwise the document becomes unsearchable:</p>\n<pre><code>final Term term = new Term(&quot;uldid&quot;, indexDocument.get(&quot;id&quot;));\n\n// would work, different key from term...\nindexDocument.add(new TextField(&quot;uldid2&quot;, indexDocument.get(&quot;id&quot;), Field.Store.YES));\n\n// would not work...\nindexDocument.add(new TextField(&quot;uldid&quot;, indexDocument.get(&quot;id&quot;), Field.Store.YES));\n\n// ...when adding to index using term\nluceneDocumentWriter.updateDocument(term, indexDocument);\n</code></pre>\n<p>Another way to circumvent this would be to use a different value from the identical field in the document (<code>uldid</code> in this case), that is also different from the ID that is being searched in the index:</p>\n<pre><code>final Term term = new Term(&quot;uldid&quot;, indexDocument.get(&quot;id&quot;).hashCode() + &quot;&quot;);\n// or\nindexDocument.add(new TextField(&quot;uldid&quot;, indexDocument.get(&quot;id&quot;).hashCode() + &quot;&quot;, Field.Store.YES));\n</code></pre>\n<p>Which seems rather odd. I don't really have a final solution or reason this is the way it is, but I will be using the second option from now on, using the hash of whatever key I want to store the document under as <code>Term</code>.</p>\n"},{"tags":[],"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661550655,"creation_date":1661537013,"answer_id":73504930,"question_id":73484766,"body_markdown":"**Summary**\r\n\r\nThe problem is caused by a combination of (a) the order in which your documents are processed; and (b) the fact that `updateDocument` first deletes and then inserts data in the index.\r\n\r\nWhen you use [`writer.updateDocument(term, document)`](https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/index/IndexWriter.html#updateDocument(org.apache.lucene.index.Term,java.lang.Iterable)), Lucene performs an atomic delete-then-add:\r\n\r\n&gt; Updates a document by first deleting the document(s) containing term and then adding the new document.\r\n\r\nIn your case, the order in which documents are processed is based on how they are retrieved from your Java `Map` - and that is based on how the entries are hashed by the map.\r\n\r\nAs you note in [your answer](https://stackoverflow.com/a/73497188/12567365), you already have a way to avoid this by using your Java object hashes as the `updateDocument` terms. (As long as you don&#39;t get any hash collisions.)\r\n\r\nThis answer attempts to explain the &quot;why&quot; behind the results you are seeing.\r\n\r\n---\r\n\r\n**Basic Demonstration**\r\n\r\nThis is a highly simplified version of your code.\r\n\r\nConsider the following two Lucene documents:\r\n\r\n```java\r\nfinal Document documentA = new Document();\r\ndocumentA.add(new TextField(FIELD_NAME, &quot;10735&quot;, Field.Store.YES));\r\nfinal Term termA = new Term(FIELD_NAME, &quot;10735&quot;);\r\nwriter.updateDocument(termA, documentA);\r\n            \r\nfinal Document documentB = new Document();\r\ndocumentB.add(new TextField(FIELD_NAME, &quot;10384-10735&quot;, Field.Store.YES));\r\nfinal Term termB = new Term(FIELD_NAME, &quot;10384-10735&quot;);\r\nwriter.updateDocument(termB, documentB);\r\n```\r\n\r\n*documentA then documentB:*\r\n\r\nLucene has nothing to delete when `documentA` is added. After the doc is added, the index contains the following:\r\n\r\n```\r\nfield id\r\n  term 10735\r\n    doc 0\r\n      freq 1\r\n      pos 0\r\n```\r\n\r\nSo, we have only one token `10735`.\r\n\r\nFor `documentB`, there are no documents in the index containing the term `10384-10735` - and therefore nothing is deleted prior to `documentB` being added to the index.\r\n\r\nWe end up with the following final indexed data:\r\n\r\n```\r\nfield id\r\n  term 10384\r\n    doc 1\r\n      freq 1\r\n      pos 0\r\n  term 10735\r\n    doc 0\r\n      freq 1\r\n      pos 0\r\n    doc 1\r\n      freq 1\r\n      pos 1\r\n```\r\n\r\nWhen we search for `10384`, we get one hit, as expected.\r\n\r\n*documentB then documentA:*\r\n\r\nIf we swap the order in which the 2 documents are processed, we see the following after `documentB` is indexed:\r\n\r\n```\r\nfield id\r\n  term 10384\r\n    doc 0\r\n      freq 1\r\n      pos 0\r\n  term 10735\r\n    doc 0\r\n      freq 1\r\n      pos 1\r\n```\r\n\r\nWhen `documentA` is indexed, Lucene finds that `doc 0` (above) in the index does contain the term `10735` used by `documentA`. Therefore all of the `doc 0` entries are deleted from the index, before `documentA` is added.\r\n\r\nWe end up with the following indexed data (basically, a new `doc 0`, after the original `doc 0` was deleted):\r\n\r\n```\r\nfield id\r\n  term 10735\r\n    doc 0\r\n      freq 1\r\n      pos 0\r\n```\r\n\r\nNow when we search for `10384`, we get zero hits - not what we expected.\r\n\r\n---\r\n\r\n**More Complicated Demonstration**\r\n\r\nThings are made more complicated in your scenario in the question by your use of a Java `Map` to collect the documents to be indexed. This causes the order in which your Lucene documents are indexed to be different from the order in which they are created, due to hashing performed by the map.\r\n\r\nHere is another simplified version of your code, but this time it uses a map:\r\n\r\n```java\r\npublic class MyIndexBuilder {\r\n\r\n    private static final String INDEX_PATH = &quot;index&quot;;\r\n    private static final String FIELD_NAME = &quot;id&quot;;\r\n\r\n    private static final Map&lt;String, Document&gt; indexDocuments = new HashMap&lt;&gt;();\r\n\r\n    public static void buildIndex() throws IOException, FileNotFoundException, ParseException {\r\n        final Directory dir = FSDirectory.open(Paths.get(INDEX_PATH));\r\n\r\n        Analyzer analyzer = new StandardAnalyzer();\r\n\r\n        IndexWriterConfig iwc = new IndexWriterConfig(analyzer);\r\n        iwc.setOpenMode(OpenMode.CREATE);\r\n        //iwc.setCodec(new SimpleTextCodec());\r\n\r\n        try ( IndexWriter writer = new IndexWriter(dir, iwc)) {\r\n            \r\n            String suffix = &quot;10429&quot;;\r\n            \r\n            Document document1 = new Document();\r\n            document1.add(new TextField(&quot;id&quot;, &quot;10001-&quot; + suffix, Field.Store.YES));\r\n            indexDocuments.put(&quot;10001-&quot; + suffix, document1);\r\n            \r\n            Document document2 = new Document();\r\n            document2.add(new TextField(&quot;id&quot;, suffix, Field.Store.YES));\r\n            indexDocuments.put(suffix, document2);\r\n            \r\n            //int max = 10193; // OK\r\n            int max = 10192; // not OK\r\n            \r\n            for (int i = 10003; i &lt;= max; i += 1) {\r\n                Document otherDoc1 = new Document();\r\n                otherDoc1.add(new TextField(FIELD_NAME, String.valueOf(i), Field.Store.YES));\r\n                indexDocuments.put(String.valueOf(i), otherDoc1);\r\n            }\r\n\r\n            System.out.println(&quot;Total docs: &quot; + indexDocuments.size());\r\n            for (Map.Entry&lt;String, Document&gt; indexDocument : indexDocuments.entrySet()) {\r\n                if (indexDocument.getKey().contains(suffix)) {\r\n                    // show the order in which the document1 and document2 are indexed:\r\n                    System.out.println(indexDocument.getKey());\r\n                }\r\n                final Term term = new Term(FIELD_NAME, indexDocument.getKey());\r\n                writer.updateDocument(term, indexDocument.getValue());\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nIn addition to the two documents we are interested in, I add 191 additional (completely unrelated) documents to the index.\r\n\r\nWhen I process the map, I see the following output:\r\n\r\n```\r\nTotal docs: 193\r\n10429\r\n10001-10429\r\n```\r\n\r\nSo, `document2` is indexed before `document1` - and our search for `10001` finds one hit.\r\n\r\nBut if I process fewer of these &quot;extra&quot; documents (190 instead of 191):\r\n\r\n    int max = 10192; // not OK\r\n\r\n...then I get this output:\r\n\r\n```\r\nTotal docs: 192\r\n10001-10429\r\n10429\r\n```\r\n\r\nYou can see that the order in which `document1` and `document2` are processed has been flipped - and now that same search for `10001` finds zero hits.\r\n\r\nA seemingly unrelated change (procesing one fewer document) has caused the retrieval order from the map to change, causing the indexed data to be different.\r\n\r\n(I was incorrect in one of my comments in the question, when I noted that the indexed data was _apparently_ identical. It is not the same. I missed that when I was first looking at the indexed data.)\r\n\r\n---\r\n\r\n**Recommendation**\r\n\r\nConsider adding a new field to your Lucene documents, for storing each document&#39;s unique identifier.\r\n\r\nYou could call it `doc_id` and it would be created as a [`StringField`](https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/document/StringField.html), not as a `TextField`. \r\n\r\nThis would ensure that the contents of this field are never processed by the Standard Analyzer and are stored in the index as a single (presumably unique) token. A `StringField` is indexed but not tokenized.\r\n\r\nYou can then use this field when building your term to use in the `updateDocument()` method. And you can use the existing `id` field for searches.\r\n\r\n ","title":"Lucene Index Query does not find document if too many documents/similar documents present","body":"<p><strong>Summary</strong></p>\n<p>The problem is caused by a combination of (a) the order in which your documents are processed; and (b) the fact that <code>updateDocument</code> first deletes and then inserts data in the index.</p>\n<p>When you use <a href=\"https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/index/IndexWriter.html#updateDocument(org.apache.lucene.index.Term,java.lang.Iterable)\" rel=\"nofollow noreferrer\"><code>writer.updateDocument(term, document)</code></a>, Lucene performs an atomic delete-then-add:</p>\n<blockquote>\n<p>Updates a document by first deleting the document(s) containing term and then adding the new document.</p>\n</blockquote>\n<p>In your case, the order in which documents are processed is based on how they are retrieved from your Java <code>Map</code> - and that is based on how the entries are hashed by the map.</p>\n<p>As you note in <a href=\"https://stackoverflow.com/a/73497188/12567365\">your answer</a>, you already have a way to avoid this by using your Java object hashes as the <code>updateDocument</code> terms. (As long as you don't get any hash collisions.)</p>\n<p>This answer attempts to explain the &quot;why&quot; behind the results you are seeing.</p>\n<hr />\n<p><strong>Basic Demonstration</strong></p>\n<p>This is a highly simplified version of your code.</p>\n<p>Consider the following two Lucene documents:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Document documentA = new Document();\ndocumentA.add(new TextField(FIELD_NAME, &quot;10735&quot;, Field.Store.YES));\nfinal Term termA = new Term(FIELD_NAME, &quot;10735&quot;);\nwriter.updateDocument(termA, documentA);\n            \nfinal Document documentB = new Document();\ndocumentB.add(new TextField(FIELD_NAME, &quot;10384-10735&quot;, Field.Store.YES));\nfinal Term termB = new Term(FIELD_NAME, &quot;10384-10735&quot;);\nwriter.updateDocument(termB, documentB);\n</code></pre>\n<p><em>documentA then documentB:</em></p>\n<p>Lucene has nothing to delete when <code>documentA</code> is added. After the doc is added, the index contains the following:</p>\n<pre><code>field id\n  term 10735\n    doc 0\n      freq 1\n      pos 0\n</code></pre>\n<p>So, we have only one token <code>10735</code>.</p>\n<p>For <code>documentB</code>, there are no documents in the index containing the term <code>10384-10735</code> - and therefore nothing is deleted prior to <code>documentB</code> being added to the index.</p>\n<p>We end up with the following final indexed data:</p>\n<pre><code>field id\n  term 10384\n    doc 1\n      freq 1\n      pos 0\n  term 10735\n    doc 0\n      freq 1\n      pos 0\n    doc 1\n      freq 1\n      pos 1\n</code></pre>\n<p>When we search for <code>10384</code>, we get one hit, as expected.</p>\n<p><em>documentB then documentA:</em></p>\n<p>If we swap the order in which the 2 documents are processed, we see the following after <code>documentB</code> is indexed:</p>\n<pre><code>field id\n  term 10384\n    doc 0\n      freq 1\n      pos 0\n  term 10735\n    doc 0\n      freq 1\n      pos 1\n</code></pre>\n<p>When <code>documentA</code> is indexed, Lucene finds that <code>doc 0</code> (above) in the index does contain the term <code>10735</code> used by <code>documentA</code>. Therefore all of the <code>doc 0</code> entries are deleted from the index, before <code>documentA</code> is added.</p>\n<p>We end up with the following indexed data (basically, a new <code>doc 0</code>, after the original <code>doc 0</code> was deleted):</p>\n<pre><code>field id\n  term 10735\n    doc 0\n      freq 1\n      pos 0\n</code></pre>\n<p>Now when we search for <code>10384</code>, we get zero hits - not what we expected.</p>\n<hr />\n<p><strong>More Complicated Demonstration</strong></p>\n<p>Things are made more complicated in your scenario in the question by your use of a Java <code>Map</code> to collect the documents to be indexed. This causes the order in which your Lucene documents are indexed to be different from the order in which they are created, due to hashing performed by the map.</p>\n<p>Here is another simplified version of your code, but this time it uses a map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyIndexBuilder {\n\n    private static final String INDEX_PATH = &quot;index&quot;;\n    private static final String FIELD_NAME = &quot;id&quot;;\n\n    private static final Map&lt;String, Document&gt; indexDocuments = new HashMap&lt;&gt;();\n\n    public static void buildIndex() throws IOException, FileNotFoundException, ParseException {\n        final Directory dir = FSDirectory.open(Paths.get(INDEX_PATH));\n\n        Analyzer analyzer = new StandardAnalyzer();\n\n        IndexWriterConfig iwc = new IndexWriterConfig(analyzer);\n        iwc.setOpenMode(OpenMode.CREATE);\n        //iwc.setCodec(new SimpleTextCodec());\n\n        try ( IndexWriter writer = new IndexWriter(dir, iwc)) {\n            \n            String suffix = &quot;10429&quot;;\n            \n            Document document1 = new Document();\n            document1.add(new TextField(&quot;id&quot;, &quot;10001-&quot; + suffix, Field.Store.YES));\n            indexDocuments.put(&quot;10001-&quot; + suffix, document1);\n            \n            Document document2 = new Document();\n            document2.add(new TextField(&quot;id&quot;, suffix, Field.Store.YES));\n            indexDocuments.put(suffix, document2);\n            \n            //int max = 10193; // OK\n            int max = 10192; // not OK\n            \n            for (int i = 10003; i &lt;= max; i += 1) {\n                Document otherDoc1 = new Document();\n                otherDoc1.add(new TextField(FIELD_NAME, String.valueOf(i), Field.Store.YES));\n                indexDocuments.put(String.valueOf(i), otherDoc1);\n            }\n\n            System.out.println(&quot;Total docs: &quot; + indexDocuments.size());\n            for (Map.Entry&lt;String, Document&gt; indexDocument : indexDocuments.entrySet()) {\n                if (indexDocument.getKey().contains(suffix)) {\n                    // show the order in which the document1 and document2 are indexed:\n                    System.out.println(indexDocument.getKey());\n                }\n                final Term term = new Term(FIELD_NAME, indexDocument.getKey());\n                writer.updateDocument(term, indexDocument.getValue());\n            }\n            \n        }\n    }\n\n}\n</code></pre>\n<p>In addition to the two documents we are interested in, I add 191 additional (completely unrelated) documents to the index.</p>\n<p>When I process the map, I see the following output:</p>\n<pre><code>Total docs: 193\n10429\n10001-10429\n</code></pre>\n<p>So, <code>document2</code> is indexed before <code>document1</code> - and our search for <code>10001</code> finds one hit.</p>\n<p>But if I process fewer of these &quot;extra&quot; documents (190 instead of 191):</p>\n<pre><code>int max = 10192; // not OK\n</code></pre>\n<p>...then I get this output:</p>\n<pre><code>Total docs: 192\n10001-10429\n10429\n</code></pre>\n<p>You can see that the order in which <code>document1</code> and <code>document2</code> are processed has been flipped - and now that same search for <code>10001</code> finds zero hits.</p>\n<p>A seemingly unrelated change (procesing one fewer document) has caused the retrieval order from the map to change, causing the indexed data to be different.</p>\n<p>(I was incorrect in one of my comments in the question, when I noted that the indexed data was <em>apparently</em> identical. It is not the same. I missed that when I was first looking at the indexed data.)</p>\n<hr />\n<p><strong>Recommendation</strong></p>\n<p>Consider adding a new field to your Lucene documents, for storing each document's unique identifier.</p>\n<p>You could call it <code>doc_id</code> and it would be created as a <a href=\"https://lucene.apache.org/core/9_3_0/core/org/apache/lucene/document/StringField.html\" rel=\"nofollow noreferrer\"><code>StringField</code></a>, not as a <code>TextField</code>.</p>\n<p>This would ensure that the contents of this field are never processed by the Standard Analyzer and are stored in the index as a single (presumably unique) token. A <code>StringField</code> is indexed but not tokenized.</p>\n<p>You can then use this field when building your term to use in the <code>updateDocument()</code> method. And you can use the existing <code>id</code> field for searches.</p>\n"}],"owner":{"account_id":21596351,"reputation":23,"user_id":15925251,"display_name":"Skyball"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73504930,"answer_count":2,"score":1,"last_activity_date":1661550655,"creation_date":1661418195,"question_id":73484766,"body_markdown":"If I create documents as such:\r\n\r\n    {\r\n        Document document = new Document();\r\n        document.add(new TextField(&quot;id&quot;, &quot;10384-10735&quot;, Field.Store.YES));\r\n        submitDocument(document);\r\n    }\r\n    {\r\n        Document document = new Document();\r\n        document.add(new TextField(&quot;id&quot;, &quot;10735&quot;, Field.Store.YES));\r\n        submitDocument(document);\r\n    }\r\n    \r\n    for (int i = 20000; i &lt; 80000; i += 123) {\r\n        Document otherDoc1 = new Document();\r\n        otherDoc1.add(new TextField(&quot;id&quot;, String.valueOf(i), Field.Store.YES));\r\n        submitDocument(otherDoc1);\r\n    \r\n        Document otherDoc2 = new Document();\r\n        otherDoc2.add(new TextField(&quot;id&quot;, i + &quot;-&quot; + (i + 67), Field.Store.YES));\r\n        submitDocument(otherDoc2);\r\n    }\r\n\r\nmeaning:\r\n\r\n- one with an id of `10384-10735`\r\n- one with an id of `10735` (which is the last part of the previous document ID)\r\n- and 975 other documents with pretty much any ID\r\n\r\nand then write them using: \r\n\r\n    final IndexWriterConfig luceneWriterConfig = new IndexWriterConfig(new StandardAnalyzer());\r\n    luceneWriterConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);\r\n    \r\n    final IndexWriter luceneDocumentWriter = new IndexWriter(luceneDirectory, luceneWriterConfig);\r\n    \r\n    for (Map.Entry&lt;String, Document&gt; indexDocument : indexDocuments.entrySet()) {\r\n        final Term term = new Term(Index.UNIQUE_LUCENE_DOCUMENT_ID, indexDocument.getKey());\r\n        indexDocument.getValue().add(new TextField(Index.UNIQUE_LUCENE_DOCUMENT_ID, indexDocument.getKey(), Field.Store.YES));\r\n    \r\n        luceneDocumentWriter.updateDocument(term, indexDocument.getValue());\r\n    }\r\n    \r\n    luceneDocumentWriter.close();\r\n\r\nNow that the index is written, I want to perform a query, searching for the document with the ID `10384-10735`.\r\n\r\nI will be doing this in two ways, using the TermQuery and a QueryParser with the StandardAnalyzer:\r\n\r\n    System.out.println(&quot;term query:   &quot; + index.findDocuments(new TermQuery(new Term(&quot;id&quot;, &quot;10384-10735&quot;))));\r\n    \r\n    final QueryParser parser = new QueryParser(Index.UNIQUE_LUCENE_DOCUMENT_ID, new StandardAnalyzer());\r\n    System.out.println(&quot;query parser: &quot; + index.findDocuments(parser.parse(&quot;id:\\&quot;10384 10735\\&quot;&quot;)));\r\n\r\nIn both cases, I would expect the document to appear. This is the result if I run the queries however:\r\n\r\n    term query:   []\r\n    query parser: []\r\n\r\nwhich seems odd. I experimented around a bit further and found out that if I either reduce the amount of documents **OR** remove the entry `10735`, the query parser query now successfully finds the document:\r\n\r\n    term query:   []\r\n    query parser: [Document&lt;stored,indexed,tokenized&lt;id:10384-10735&gt; stored,indexed,tokenized&lt;uldid:10384-10735&gt;&gt;]\r\n\r\nmeaning this works:\r\n\r\n    {\r\n        Document document = new Document();\r\n        document.add(new TextField(&quot;id&quot;, &quot;10384-10735&quot;, Field.Store.YES));\r\n        submitDocument(document);\r\n    }\r\n    \r\n    for (int i = 20000; i &lt; 80000; i += 123) {\r\n        Document otherDoc1 = new Document();\r\n        otherDoc1.add(new TextField(&quot;id&quot;, String.valueOf(i), Field.Store.YES));\r\n        submitDocument(otherDoc1);\r\n    \r\n        Document otherDoc2 = new Document();\r\n        otherDoc2.add(new TextField(&quot;id&quot;, i + &quot;-&quot; + (i + 67), Field.Store.YES));\r\n        submitDocument(otherDoc2);\r\n    }\r\n\r\nand this works (490 documents)\r\n\r\n    {\r\n        Document document = new Document();\r\n        document.add(new TextField(&quot;id&quot;, &quot;10384-10735&quot;, Field.Store.YES));\r\n        submitDocument(document);\r\n    }\r\n    {\r\n        Document document = new Document();\r\n        document.add(new TextField(&quot;id&quot;, &quot;10735&quot;, Field.Store.YES));\r\n        submitDocument(document);\r\n    }\r\n    \r\n    for (int i = 20000; i &lt; 50000; i += 123) {\r\n        Document otherDoc1 = new Document();\r\n        otherDoc1.add(new TextField(&quot;id&quot;, String.valueOf(i), Field.Store.YES));\r\n        submitDocument(otherDoc1);\r\n    \r\n        Document otherDoc2 = new Document();\r\n        otherDoc2.add(new TextField(&quot;id&quot;, i + &quot;-&quot; + (i + 67), Field.Store.YES));\r\n        submitDocument(otherDoc2);\r\n    }\r\n\r\nDoes somebody know what causes this? I really need the index to consistently find the documents. I&#39;m fine with using the QueryParser and not the TermQuery.\r\n\r\nI use 9.3.0 lucene-core and lucene-queryparser.\r\n\r\nThank you for your help in advance.\r\n\r\n**Edit 1**: This is the code in findDocuments():\r\n\r\n    final TopDocs topDocs = getIndexSearcher().search(query, Integer.MAX_VALUE);\r\n    \r\n    final List&lt;Document&gt; documents = new ArrayList&lt;&gt;((int) topDocs.totalHits.value);\r\n    for (int i = 0; i &lt; topDocs.totalHits.value; i++) {\r\n        documents.add(getIndexSearcher().doc(topDocs.scoreDocs[i].doc));\r\n    }\r\n    \r\n    return documents;\r\n\r\n**Edit 2**: here is a working example: [https://pastebin.com/Ft0r8pN5](https://pastebin.com/Ft0r8pN5)\r\n\r\nfor some reason, the issue with the too many documents does not happen in this one, which I will look into. I still left it in for the example. This is my output:\r\n\r\n    [similar id: true, many documents: true]\r\n    Indexing [3092] documents\r\n    term query:   []\r\n    query parser: []\r\n    \r\n    [similar id: true, many documents: false]\r\n    Indexing [654] documents\r\n    term query:   []\r\n    query parser: []\r\n    \r\n    [similar id: false, many documents: true]\r\n    Indexing [3091] documents\r\n    term query:   []\r\n    query parser: [Document&lt;stored,indexed,tokenized&lt;id:10384-10735&gt; stored,indexed,tokenized&lt;uldid:10384-10735&gt;&gt;]\r\n    \r\n    [similar id: false, many documents: false]\r\n    Indexing [653] documents\r\n    term query:   []\r\n    query parser: [Document&lt;stored,indexed,tokenized&lt;id:10384-10735&gt; stored,indexed,tokenized&lt;uldid:10384-10735&gt;&gt;]\r\n\r\nAs you can see, if the document with the ID `10735` is added to the documents, the document cannot be found anymore.","title":"Lucene Index Query does not find document if too many documents/similar documents present","body":"<p>If I create documents as such:</p>\n<pre><code>{\n    Document document = new Document();\n    document.add(new TextField(&quot;id&quot;, &quot;10384-10735&quot;, Field.Store.YES));\n    submitDocument(document);\n}\n{\n    Document document = new Document();\n    document.add(new TextField(&quot;id&quot;, &quot;10735&quot;, Field.Store.YES));\n    submitDocument(document);\n}\n\nfor (int i = 20000; i &lt; 80000; i += 123) {\n    Document otherDoc1 = new Document();\n    otherDoc1.add(new TextField(&quot;id&quot;, String.valueOf(i), Field.Store.YES));\n    submitDocument(otherDoc1);\n\n    Document otherDoc2 = new Document();\n    otherDoc2.add(new TextField(&quot;id&quot;, i + &quot;-&quot; + (i + 67), Field.Store.YES));\n    submitDocument(otherDoc2);\n}\n</code></pre>\n<p>meaning:</p>\n<ul>\n<li>one with an id of <code>10384-10735</code></li>\n<li>one with an id of <code>10735</code> (which is the last part of the previous document ID)</li>\n<li>and 975 other documents with pretty much any ID</li>\n</ul>\n<p>and then write them using:</p>\n<pre><code>final IndexWriterConfig luceneWriterConfig = new IndexWriterConfig(new StandardAnalyzer());\nluceneWriterConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);\n\nfinal IndexWriter luceneDocumentWriter = new IndexWriter(luceneDirectory, luceneWriterConfig);\n\nfor (Map.Entry&lt;String, Document&gt; indexDocument : indexDocuments.entrySet()) {\n    final Term term = new Term(Index.UNIQUE_LUCENE_DOCUMENT_ID, indexDocument.getKey());\n    indexDocument.getValue().add(new TextField(Index.UNIQUE_LUCENE_DOCUMENT_ID, indexDocument.getKey(), Field.Store.YES));\n\n    luceneDocumentWriter.updateDocument(term, indexDocument.getValue());\n}\n\nluceneDocumentWriter.close();\n</code></pre>\n<p>Now that the index is written, I want to perform a query, searching for the document with the ID <code>10384-10735</code>.</p>\n<p>I will be doing this in two ways, using the TermQuery and a QueryParser with the StandardAnalyzer:</p>\n<pre><code>System.out.println(&quot;term query:   &quot; + index.findDocuments(new TermQuery(new Term(&quot;id&quot;, &quot;10384-10735&quot;))));\n\nfinal QueryParser parser = new QueryParser(Index.UNIQUE_LUCENE_DOCUMENT_ID, new StandardAnalyzer());\nSystem.out.println(&quot;query parser: &quot; + index.findDocuments(parser.parse(&quot;id:\\&quot;10384 10735\\&quot;&quot;)));\n</code></pre>\n<p>In both cases, I would expect the document to appear. This is the result if I run the queries however:</p>\n<pre><code>term query:   []\nquery parser: []\n</code></pre>\n<p>which seems odd. I experimented around a bit further and found out that if I either reduce the amount of documents <strong>OR</strong> remove the entry <code>10735</code>, the query parser query now successfully finds the document:</p>\n<pre><code>term query:   []\nquery parser: [Document&lt;stored,indexed,tokenized&lt;id:10384-10735&gt; stored,indexed,tokenized&lt;uldid:10384-10735&gt;&gt;]\n</code></pre>\n<p>meaning this works:</p>\n<pre><code>{\n    Document document = new Document();\n    document.add(new TextField(&quot;id&quot;, &quot;10384-10735&quot;, Field.Store.YES));\n    submitDocument(document);\n}\n\nfor (int i = 20000; i &lt; 80000; i += 123) {\n    Document otherDoc1 = new Document();\n    otherDoc1.add(new TextField(&quot;id&quot;, String.valueOf(i), Field.Store.YES));\n    submitDocument(otherDoc1);\n\n    Document otherDoc2 = new Document();\n    otherDoc2.add(new TextField(&quot;id&quot;, i + &quot;-&quot; + (i + 67), Field.Store.YES));\n    submitDocument(otherDoc2);\n}\n</code></pre>\n<p>and this works (490 documents)</p>\n<pre><code>{\n    Document document = new Document();\n    document.add(new TextField(&quot;id&quot;, &quot;10384-10735&quot;, Field.Store.YES));\n    submitDocument(document);\n}\n{\n    Document document = new Document();\n    document.add(new TextField(&quot;id&quot;, &quot;10735&quot;, Field.Store.YES));\n    submitDocument(document);\n}\n\nfor (int i = 20000; i &lt; 50000; i += 123) {\n    Document otherDoc1 = new Document();\n    otherDoc1.add(new TextField(&quot;id&quot;, String.valueOf(i), Field.Store.YES));\n    submitDocument(otherDoc1);\n\n    Document otherDoc2 = new Document();\n    otherDoc2.add(new TextField(&quot;id&quot;, i + &quot;-&quot; + (i + 67), Field.Store.YES));\n    submitDocument(otherDoc2);\n}\n</code></pre>\n<p>Does somebody know what causes this? I really need the index to consistently find the documents. I'm fine with using the QueryParser and not the TermQuery.</p>\n<p>I use 9.3.0 lucene-core and lucene-queryparser.</p>\n<p>Thank you for your help in advance.</p>\n<p><strong>Edit 1</strong>: This is the code in findDocuments():</p>\n<pre><code>final TopDocs topDocs = getIndexSearcher().search(query, Integer.MAX_VALUE);\n\nfinal List&lt;Document&gt; documents = new ArrayList&lt;&gt;((int) topDocs.totalHits.value);\nfor (int i = 0; i &lt; topDocs.totalHits.value; i++) {\n    documents.add(getIndexSearcher().doc(topDocs.scoreDocs[i].doc));\n}\n\nreturn documents;\n</code></pre>\n<p><strong>Edit 2</strong>: here is a working example: <a href=\"https://pastebin.com/Ft0r8pN5\" rel=\"nofollow noreferrer\">https://pastebin.com/Ft0r8pN5</a></p>\n<p>for some reason, the issue with the too many documents does not happen in this one, which I will look into. I still left it in for the example. This is my output:</p>\n<pre><code>[similar id: true, many documents: true]\nIndexing [3092] documents\nterm query:   []\nquery parser: []\n\n[similar id: true, many documents: false]\nIndexing [654] documents\nterm query:   []\nquery parser: []\n\n[similar id: false, many documents: true]\nIndexing [3091] documents\nterm query:   []\nquery parser: [Document&lt;stored,indexed,tokenized&lt;id:10384-10735&gt; stored,indexed,tokenized&lt;uldid:10384-10735&gt;&gt;]\n\n[similar id: false, many documents: false]\nIndexing [653] documents\nterm query:   []\nquery parser: [Document&lt;stored,indexed,tokenized&lt;id:10384-10735&gt; stored,indexed,tokenized&lt;uldid:10384-10735&gt;&gt;]\n</code></pre>\n<p>As you can see, if the document with the ID <code>10735</code> is added to the documents, the document cannot be found anymore.</p>\n"},{"tags":["java","spring","jpa","spring-data-jpa","querydsl"],"answers":[{"tags":[],"owner":{"account_id":3504050,"reputation":125,"user_id":2930025,"display_name":"alaskanloops"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661550309,"creation_date":1661550309,"answer_id":73506758,"question_id":73496477,"body_markdown":"Got this working with help from this answer https://stackoverflow.com/a/35158320/2930025\r\n\r\nChanged my controller like so: \r\n```\r\n@GetMapping(&quot;/events&quot;)\r\n    public List&lt;Event&gt; getEvents(@QuerydslPredicate(root = Event.class) Predicate predicate,\r\n                                           @RequestHeader(required = false) String requestId) {\r\n        return StreamSupport.stream(eventRepository.findAll(predicate).spliterator(), false).collect(Collectors.toList());\r\n```\r\n\r\nAnd then added an overloaded customize method to the repository class:\r\n```\r\n@Repository\r\npublic interface EventRepository extends JpaRepository&lt;Event,String&gt;, QuerydslPredicateExecutor&lt;Event&gt;, QuerydslBinderCustomizer&lt;QAuditEvent&gt; {\r\n        @Override\r\n    default void customize(QuerydslBindings bindings, QEvent root) {\r\n        bindings.bind(root.timestamp).all((path, value) -&gt;\r\n        {\r\n            Iterator&lt;? extends Date&gt; it = value.iterator();\r\n            return Optional.ofNullable(path.between(it.next(), it.next()));\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nAnd then to call simply send in two timestamps, one for the startTime and one for the endTime:\r\n```\r\nhttp://localhost:8080/events?timestamp=2022-07-05T22:16:18Z&amp;timestamp=2022-08-27T22:16:18Z\r\n```\r\n\r\nLooks like the second answer on the linked question would also work, however I couldn&#39;t get the imports working correctly so went with the accepted answer&#39;s method.","title":"How to handle date ranges with QueryDSL Predicate in Spring?","body":"<p>Got this working with help from this answer <a href=\"https://stackoverflow.com/a/35158320/2930025\">https://stackoverflow.com/a/35158320/2930025</a></p>\n<p>Changed my controller like so:</p>\n<pre><code>@GetMapping(&quot;/events&quot;)\n    public List&lt;Event&gt; getEvents(@QuerydslPredicate(root = Event.class) Predicate predicate,\n                                           @RequestHeader(required = false) String requestId) {\n        return StreamSupport.stream(eventRepository.findAll(predicate).spliterator(), false).collect(Collectors.toList());\n</code></pre>\n<p>And then added an overloaded customize method to the repository class:</p>\n<pre><code>@Repository\npublic interface EventRepository extends JpaRepository&lt;Event,String&gt;, QuerydslPredicateExecutor&lt;Event&gt;, QuerydslBinderCustomizer&lt;QAuditEvent&gt; {\n        @Override\n    default void customize(QuerydslBindings bindings, QEvent root) {\n        bindings.bind(root.timestamp).all((path, value) -&gt;\n        {\n            Iterator&lt;? extends Date&gt; it = value.iterator();\n            return Optional.ofNullable(path.between(it.next(), it.next()));\n        });\n    }\n}\n</code></pre>\n<p>And then to call simply send in two timestamps, one for the startTime and one for the endTime:</p>\n<pre><code>http://localhost:8080/events?timestamp=2022-07-05T22:16:18Z&amp;timestamp=2022-08-27T22:16:18Z\n</code></pre>\n<p>Looks like the second answer on the linked question would also work, however I couldn't get the imports working correctly so went with the accepted answer's method.</p>\n"}],"owner":{"account_id":3504050,"reputation":125,"user_id":2930025,"display_name":"alaskanloops"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1254,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73506758,"answer_count":1,"score":1,"last_activity_date":1661550309,"creation_date":1661492035,"question_id":73496477,"body_markdown":"I have a db with various events, and a corresponding entity:\r\n\r\n```@Entity\r\n@NoArgsConstructor\r\n@Data\r\n@Table(name=&quot;Event&quot;)\r\npublic class Event {\r\n    @Id\r\n    private String id;\r\n    private String source;\r\n    private String action;\r\n    private Date timestamp;\r\n    private String data;\r\n}\r\n```\r\n\r\nAnd a controller that takes a QueryDSLPredicate and parameters:\r\n\r\n\r\n```\r\n    @GetMapping(&quot;/events&quot;)\r\n    public List&lt;Event&gt; getEvents(@QuerydslPredicate(root = Event.class) Predicate predicate,\r\n                                           @RequestParam(name = &quot;id&quot;, required = false) String id,\r\n                                           @RequestParam(name = &quot;source&quot;, required = false) String source,\r\n                                           @RequestParam(name = &quot;action&quot;, required = false) String action,\r\n                                           @RequestParam(name = &quot;startTimestamp&quot;, required = false) String startTimestamp,\r\n                                           @RequestParam(name = &quot;endTimestamp&quot;, required = false) String endTimestamp,\r\n                                           @RequestHeader(required = false) String requestId) {\r\n        return StreamSupport.stream(eventRepository.findAll(predicate).spliterator(), false).collect(Collectors.toList());\r\n```\r\n\r\nThis works great for sending specified parameters like this\r\n```http://localhost:8080/events?source=testSource&amp;action=testAction```\r\n\r\nBut how can I handle the date ranges by sending in a starttime and endtime, and pulling all events between those times?  I&#39;m new to querydsl/spring (in fact I haven&#39;t written java since college) and can&#39;t seem to find a great example on how to do this.  ","title":"How to handle date ranges with QueryDSL Predicate in Spring?","body":"<p>I have a db with various events, and a corresponding entity:</p>\n<pre><code>@NoArgsConstructor\n@Data\n@Table(name=&quot;Event&quot;)\npublic class Event {\n    @Id\n    private String id;\n    private String source;\n    private String action;\n    private Date timestamp;\n    private String data;\n}\n</code></pre>\n<p>And a controller that takes a QueryDSLPredicate and parameters:</p>\n<pre><code>    @GetMapping(&quot;/events&quot;)\n    public List&lt;Event&gt; getEvents(@QuerydslPredicate(root = Event.class) Predicate predicate,\n                                           @RequestParam(name = &quot;id&quot;, required = false) String id,\n                                           @RequestParam(name = &quot;source&quot;, required = false) String source,\n                                           @RequestParam(name = &quot;action&quot;, required = false) String action,\n                                           @RequestParam(name = &quot;startTimestamp&quot;, required = false) String startTimestamp,\n                                           @RequestParam(name = &quot;endTimestamp&quot;, required = false) String endTimestamp,\n                                           @RequestHeader(required = false) String requestId) {\n        return StreamSupport.stream(eventRepository.findAll(predicate).spliterator(), false).collect(Collectors.toList());\n</code></pre>\n<p>This works great for sending specified parameters like this\n<code>http://localhost:8080/events?source=testSource&amp;action=testAction</code></p>\n<p>But how can I handle the date ranges by sending in a starttime and endtime, and pulling all events between those times?  I'm new to querydsl/spring (in fact I haven't written java since college) and can't seem to find a great example on how to do this.</p>\n"},{"tags":["java","minecraft","minecraft-fabric"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1639042226,"post_id":70284796,"comment_id":124248898,"body_markdown":"there isn&#39;t respawn event ? or check in the world the spawn coords ?","body":"there isn&#39;t respawn event ? or check in the world the spawn coords ?"},{"owner":{"account_id":21637584,"reputation":47,"user_id":15960298,"display_name":"Magnus Jackson"},"score":0,"creation_date":1639046763,"post_id":70284796,"comment_id":124250664,"body_markdown":"there are 2 i found ```requestRespawn()``` but I cant get that to do anything, and ```findRespawnposition()``` but that requires a serverWorld Object which I dont think I can get from a World Object","body":"there are 2 i found <code>requestRespawn()</code> but I cant get that to do anything, and <code>findRespawnposition()</code> but that requires a serverWorld Object which I dont think I can get from a World Object"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1639047134,"post_id":70284796,"comment_id":124250797,"body_markdown":"In Spigot, you should can for CraftWorld then use `getHandle()`. So I suggest to check if by casting it works (idk I don&#39;t make fabricmc code)","body":"In Spigot, you should can for CraftWorld then use <code>getHandle()</code>. So I suggest to check if by casting it works (idk I don&#39;t make fabricmc code)"}],"answers":[{"tags":[],"owner":{"account_id":22095433,"reputation":434,"user_id":16352819,"display_name":"Devoev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661549659,"creation_date":1661549659,"answer_id":73506680,"question_id":70284796,"body_markdown":"A little late, but what you need, to get the spawn point of a player, is either a `ServerWorld` object or a `ServerPlayerEntity` object. Because `ServerPlayerEntity` and `ServerWorld` are subclasses of PlayerEntity and World, you can just perform a runtime type-check using `instanceof` and then cast the objects to their subclass. \r\n\r\n`ServerPlayerEntity` has a getter called `getSpawnPointPosition` (which returns the spawn position of the player, e.g. the bed position)\r\n\r\n`ServerWorld` has a method called `getSpawnPos` (which returns the worlds spawn point)\r\n\r\nThe `findRespawnPosition` method is used to get a position near the given point, that is not obstructed. So you&#39;d for example provide the players bed spawn to `findRespawnPosition` and the method returns a position, that&#39;s not inside a block and tall enough for the player to stand. You would use that method if you want to teleport a player to their respawn point.\r\n","title":"Is there a way to get a player&#39;s respawn coordinates with a PlayerEntity object (Fabricmc)","body":"<p>A little late, but what you need, to get the spawn point of a player, is either a <code>ServerWorld</code> object or a <code>ServerPlayerEntity</code> object. Because <code>ServerPlayerEntity</code> and <code>ServerWorld</code> are subclasses of PlayerEntity and World, you can just perform a runtime type-check using <code>instanceof</code> and then cast the objects to their subclass.</p>\n<p><code>ServerPlayerEntity</code> has a getter called <code>getSpawnPointPosition</code> (which returns the spawn position of the player, e.g. the bed position)</p>\n<p><code>ServerWorld</code> has a method called <code>getSpawnPos</code> (which returns the worlds spawn point)</p>\n<p>The <code>findRespawnPosition</code> method is used to get a position near the given point, that is not obstructed. So you'd for example provide the players bed spawn to <code>findRespawnPosition</code> and the method returns a position, that's not inside a block and tall enough for the player to stand. You would use that method if you want to teleport a player to their respawn point.</p>\n"}],"owner":{"account_id":21637584,"reputation":47,"user_id":15960298,"display_name":"Magnus Jackson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":484,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73506680,"answer_count":1,"score":0,"last_activity_date":1661549659,"creation_date":1639024842,"question_id":70284796,"body_markdown":"I made a use override on the Block class\r\n```\r\npublic TypedActionResult&lt;ItemStack&gt; use(World world, PlayerEntity playerEntity, Hand hand) {\r\n   // code in here\r\n}\r\n```\r\nis there a way to use the playerEntity variable to get the player&#39;s respawn coorindates?","title":"Is there a way to get a player&#39;s respawn coordinates with a PlayerEntity object (Fabricmc)","body":"<p>I made a use override on the Block class</p>\n<pre><code>public TypedActionResult&lt;ItemStack&gt; use(World world, PlayerEntity playerEntity, Hand hand) {\n   // code in here\n}\n</code></pre>\n<p>is there a way to use the playerEntity variable to get the player's respawn coorindates?</p>\n"},{"tags":["java","lambda","java-stream"],"answers":[{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661548754,"creation_date":1661548754,"answer_id":73506574,"question_id":73505854,"body_markdown":"You need to aggregate the quantity before applying the discount. Here&#39;s one way to do that:\r\n\r\n    public BigDecimal calculateTotalWithDiscountAndCategory(ShoppingCart shoppingCart){\r\n        Map&lt;Category, List&lt;Product&gt;&gt; products = shoppingCart.getProducts()\r\n                .stream()\r\n                .collect(Collectors.groupingBy(Product::getCategory));\r\n        \r\n        return products.values()\r\n                .stream()\r\n                .map(this::categoryTotal)\r\n                .reduce(BigDecimal.ZERO, BigDecimal::add);\r\n    }\r\n    \r\n    private BigDecimal categoryTotal(List&lt;Product&gt; products) {\r\n        BigDecimal sum = products.stream()\r\n                .map(Product::getPricePerUnit)\r\n                .reduce(BigDecimal.ZERO, BigDecimal::add);\r\n    \r\n        int quantity = products.stream()\r\n                .mapToInt(Product::getQuantity)\r\n                .sum();\r\n    \r\n        if (quantity &gt; 3) {\r\n            sum = sum.multiply(new BigDecimal(&quot;0.9&quot;));\r\n        }\r\n    \r\n        return sum;\r\n    }\r\n\r\nA more efficient implementation might aggregate the quantity and price in the initial pass so you don&#39;t have to iterate each category twice, but for that you&#39;ll need a mutable container or a clunky merge function. I&#39;ll leave that as an exercise to the reader.","title":"How to give discounts based on category and quantity in java 8?","body":"<p>You need to aggregate the quantity before applying the discount. Here's one way to do that:</p>\n<pre><code>public BigDecimal calculateTotalWithDiscountAndCategory(ShoppingCart shoppingCart){\n    Map&lt;Category, List&lt;Product&gt;&gt; products = shoppingCart.getProducts()\n            .stream()\n            .collect(Collectors.groupingBy(Product::getCategory));\n    \n    return products.values()\n            .stream()\n            .map(this::categoryTotal)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n}\n\nprivate BigDecimal categoryTotal(List&lt;Product&gt; products) {\n    BigDecimal sum = products.stream()\n            .map(Product::getPricePerUnit)\n            .reduce(BigDecimal.ZERO, BigDecimal::add);\n\n    int quantity = products.stream()\n            .mapToInt(Product::getQuantity)\n            .sum();\n\n    if (quantity &gt; 3) {\n        sum = sum.multiply(new BigDecimal(&quot;0.9&quot;));\n    }\n\n    return sum;\n}\n</code></pre>\n<p>A more efficient implementation might aggregate the quantity and price in the initial pass so you don't have to iterate each category twice, but for that you'll need a mutable container or a clunky merge function. I'll leave that as an exercise to the reader.</p>\n"}],"owner":{"account_id":14224383,"reputation":167,"user_id":10275546,"display_name":"D.Anush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":436,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73506574,"answer_count":1,"score":0,"last_activity_date":1661548754,"creation_date":1661543282,"question_id":73505854,"body_markdown":"I have a data set like this.\r\n\r\n    name: tea, pricePerUnit: 5.3, quantity: 2, category: drinks\r\n    name: coffee, pricePerUnit: 3.5, quantity: 2, category: drinks\r\n    name: cheese, pricePerUnit: 8, quantity: 2, category: food\r\n\r\nBased on category and the priceUnit I have to give some discount like\r\n\r\n***If the client buys more than 3 items of the product within the same category, we are giving him 10% discount for all product in this category.***\r\n\r\nSo, I have implemented this method but It has a bug.\r\n\r\n    public BigDecimal calculateTotalWithDiscountAndCategory(ShoppingCart shoppingCart){\r\n    \r\n            return  shoppingCart.getProducts()\r\n                    .stream()\r\n                    .collect(Collectors.groupingBy(Product::getCategory))\r\n                    .entrySet()\r\n                    .stream()\r\n                    .map( v -&gt; v.getValue()\r\n                            .stream()\r\n                            .map(product -&gt;{\r\n                                if(product.getQuantity() &gt; 3){\r\n                                    BigDecimal currentTotal = product.getPricePerUnit().multiply(BigDecimal.valueOf(product.getQuantity()));\r\n                                    return currentTotal.multiply(BigDecimal.valueOf(0.9));\r\n    \r\n                                }else {\r\n                                    return product.getPricePerUnit().multiply(BigDecimal.valueOf(product.getQuantity()));\r\n                                }\r\n                                    }\r\n                            )\r\n                            .reduce(BigDecimal::add)\r\n                            .orElse(BigDecimal.ZERO)\r\n    \r\n                    ).reduce(BigDecimal::add)\r\n                    .orElse(BigDecimal.ZERO);\r\n    \r\n        }\r\n\r\nIf I executed this, Every time no discount calculating because it is taking care of one object which quantity &lt; 2.\r\n\r\n***But correct one would be, As there are 4 drinks discounts should apply to both drinks.***\r\n\r\nHow can I modify this code?\r\n","title":"How to give discounts based on category and quantity in java 8?","body":"<p>I have a data set like this.</p>\n<pre><code>name: tea, pricePerUnit: 5.3, quantity: 2, category: drinks\nname: coffee, pricePerUnit: 3.5, quantity: 2, category: drinks\nname: cheese, pricePerUnit: 8, quantity: 2, category: food\n</code></pre>\n<p>Based on category and the priceUnit I have to give some discount like</p>\n<p><em><strong>If the client buys more than 3 items of the product within the same category, we are giving him 10% discount for all product in this category.</strong></em></p>\n<p>So, I have implemented this method but It has a bug.</p>\n<pre><code>public BigDecimal calculateTotalWithDiscountAndCategory(ShoppingCart shoppingCart){\n\n        return  shoppingCart.getProducts()\n                .stream()\n                .collect(Collectors.groupingBy(Product::getCategory))\n                .entrySet()\n                .stream()\n                .map( v -&gt; v.getValue()\n                        .stream()\n                        .map(product -&gt;{\n                            if(product.getQuantity() &gt; 3){\n                                BigDecimal currentTotal = product.getPricePerUnit().multiply(BigDecimal.valueOf(product.getQuantity()));\n                                return currentTotal.multiply(BigDecimal.valueOf(0.9));\n\n                            }else {\n                                return product.getPricePerUnit().multiply(BigDecimal.valueOf(product.getQuantity()));\n                            }\n                                }\n                        )\n                        .reduce(BigDecimal::add)\n                        .orElse(BigDecimal.ZERO)\n\n                ).reduce(BigDecimal::add)\n                .orElse(BigDecimal.ZERO);\n\n    }\n</code></pre>\n<p>If I executed this, Every time no discount calculating because it is taking care of one object which quantity &lt; 2.</p>\n<p><em><strong>But correct one would be, As there are 4 drinks discounts should apply to both drinks.</strong></em></p>\n<p>How can I modify this code?</p>\n"},{"tags":["java","spring","spring-boot","scheduled-tasks","requestscope"],"answers":[{"tags":[],"owner":{"account_id":13031664,"reputation":1971,"user_id":9417843,"display_name":"zlaval"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620321886,"creation_date":1620321886,"answer_id":67423150,"question_id":67422840,"body_markdown":"The request scoped beans are bounded to specific requests. Every time a request comes, a new instance will be created and after the request finished it will be destroyed. The request is bounded to a thread and use that thread to process the request (in non reactive environment). Even if it was possible, the scheduler wouldnt know, which request object it should use in this situation. Consider you have 100 active request when the scheduled job starts to run, how it should choose one? Or if there arent any active request (so no instance hold by the context?). You can inject request scope into singleton via proxy because the singleton method call will be handled on the same request thread, but the scheduled job use its own thread pool, which not bounded to any requests.\r\nMaybe now you can see the problem using request scoped bean in the scheduler.\r\nIf you want to use the same logic in the scheduler and in request scoped beans, you can for example extract it into a superclass.  ","title":"Spring Boot: Unable to access the request scope bean in Spring Scheduler","body":"<p>The request scoped beans are bounded to specific requests. Every time a request comes, a new instance will be created and after the request finished it will be destroyed. The request is bounded to a thread and use that thread to process the request (in non reactive environment). Even if it was possible, the scheduler wouldnt know, which request object it should use in this situation. Consider you have 100 active request when the scheduled job starts to run, how it should choose one? Or if there arent any active request (so no instance hold by the context?). You can inject request scope into singleton via proxy because the singleton method call will be handled on the same request thread, but the scheduled job use its own thread pool, which not bounded to any requests.\nMaybe now you can see the problem using request scoped bean in the scheduler.\nIf you want to use the same logic in the scheduler and in request scoped beans, you can for example extract it into a superclass.</p>\n"}],"owner":{"account_id":17451218,"reputation":71,"user_id":12651151,"display_name":"Naraparaju Mruduladevi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1919,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661548526,"creation_date":1620320643,"question_id":67422840,"body_markdown":"In my Spring Boot application, i&#39;ve a Scheduler task which executes for every one hour. In the scheduler method trying to access the request-scope bean. Always getting the exception **org.springframework.beans.factory.BeanCreationException**.\r\n\r\nHere is the code sample.\r\n\r\n```\r\n@Data\r\npublic class TestVo {\r\n  private String message = &quot;Hello&quot;;\r\n}\r\n\r\n@Bean\r\n@Scope(value=&quot;request&quot;, proxyMode=ScopedProxyMode.TARGET_CLASS)\r\npublic TestVo testVo() {\r\n    return new TestVo();\r\n}\r\n```\r\n\r\nAccessing the above created bean in scheduler method as below,\r\n\r\n```\r\n@Autowired\r\nprivate TestVo testVo;\r\n\r\n@Scheduled(cron=&quot;0 0 * * * *&quot;)\r\npublic void greetings() {\r\n  System.out.println(testVo.getMessage()); // accessing request scope bean\r\n}\r\n```\r\ngetting below exception with above code,\r\n\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;scopedTarget.scheduledJobTaskExecutor&#39;: Scope\r\n&gt; &#39;request&#39; is not active for the current thread; consider defining a\r\n&gt; scoped proxy for this bean if you intend to refer to it from a\r\n&gt; singleton; nested exception is java.lang.IllegalStateException: No\r\n&gt; thread-bound request found: Are you referring to request attributes\r\n&gt; outside of an actual web request, or processing a request outside of\r\n&gt; the originally receiving thread? If you are actually operating within\r\n&gt; a web request and still receive this message, your code is probably\r\n&gt; running outside of DispatcherServlet: In this case, use\r\n&gt; RequestContextListener or RequestContextFilter to expose the current\r\n&gt; request.","title":"Spring Boot: Unable to access the request scope bean in Spring Scheduler","body":"<p>In my Spring Boot application, i've a Scheduler task which executes for every one hour. In the scheduler method trying to access the request-scope bean. Always getting the exception <strong>org.springframework.beans.factory.BeanCreationException</strong>.</p>\n<p>Here is the code sample.</p>\n<pre><code>@Data\npublic class TestVo {\n  private String message = &quot;Hello&quot;;\n}\n\n@Bean\n@Scope(value=&quot;request&quot;, proxyMode=ScopedProxyMode.TARGET_CLASS)\npublic TestVo testVo() {\n    return new TestVo();\n}\n</code></pre>\n<p>Accessing the above created bean in scheduler method as below,</p>\n<pre><code>@Autowired\nprivate TestVo testVo;\n\n@Scheduled(cron=&quot;0 0 * * * *&quot;)\npublic void greetings() {\n  System.out.println(testVo.getMessage()); // accessing request scope bean\n}\n</code></pre>\n<p>getting below exception with above code,</p>\n<blockquote>\n<p>org.springframework.beans.factory.BeanCreationException: Error\ncreating bean with name 'scopedTarget.scheduledJobTaskExecutor': Scope\n'request' is not active for the current thread; consider defining a\nscoped proxy for this bean if you intend to refer to it from a\nsingleton; nested exception is java.lang.IllegalStateException: No\nthread-bound request found: Are you referring to request attributes\noutside of an actual web request, or processing a request outside of\nthe originally receiving thread? If you are actually operating within\na web request and still receive this message, your code is probably\nrunning outside of DispatcherServlet: In this case, use\nRequestContextListener or RequestContextFilter to expose the current\nrequest.</p>\n</blockquote>\n"},{"tags":["java","object","enums","enumset"],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":48,"is_accepted":true,"score":48,"last_activity_date":1505327171,"creation_date":1344243551,"answer_id":11825218,"question_id":11825009,"body_markdown":"As for any variable, its type is found in its declaration:\r\n\r\n    EnumSet largeSize\r\n\r\nSo yes, `largeSize` (which should be named `largeSizes` since it&#39;s a collection) is of type `EnumSet`. It should also be generified, and thus be declared as \r\n\r\n    EnumSet&lt;Size&gt; largeSizes\r\n\r\nWhat it means, is that `largeSizes` is of type `EnumSet`. An `EnumSet` is a `Set` which contains enum instance of a specific enum type, in a more efficient way than other `Set` implementations (like `HashSet`, `TreeSet`, etc.). To know what an `EnumSet` is, read its [API][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html","title":"What does EnumSet really mean?","body":"<p>As for any variable, its type is found in its declaration:</p>\n\n<pre><code>EnumSet largeSize\n</code></pre>\n\n<p>So yes, <code>largeSize</code> (which should be named <code>largeSizes</code> since it's a collection) is of type <code>EnumSet</code>. It should also be generified, and thus be declared as </p>\n\n<pre><code>EnumSet&lt;Size&gt; largeSizes\n</code></pre>\n\n<p>What it means, is that <code>largeSizes</code> is of type <code>EnumSet</code>. An <code>EnumSet</code> is a <code>Set</code> which contains enum instance of a specific enum type, in a more efficient way than other <code>Set</code> implementations (like <code>HashSet</code>, <code>TreeSet</code>, etc.). To know what an <code>EnumSet</code> is, read its <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\" rel=\"noreferrer\">API</a>.</p>\n"},{"tags":[],"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1344244524,"creation_date":1344244524,"answer_id":11825433,"question_id":11825009,"body_markdown":"\r\nGiven the following example:\r\n\r\n    ....\r\n    public static final String S = &quot;s&quot;;\r\n    public static final String M = &quot;m&quot;;\r\n    public static final String L = &quot;l&quot;;\r\n    ....\r\n    \r\n    Set&lt;String&gt; sizeSet = new HashSet&lt;String&gt;();\r\n    sizeSet.add(S);\r\n    sizeSet.add(M);\r\n\r\n\r\nso, what is sizeSet in the above example?\r\n\r\nEnumSet is nothing different from the above example, only that EnumSet is a special Set implementation that works with and optimized with enum types, that&#39;s all.\r\n\r\n","title":"What does EnumSet really mean?","body":"<p>Given the following example:</p>\n\n<pre><code>....\npublic static final String S = \"s\";\npublic static final String M = \"m\";\npublic static final String L = \"l\";\n....\n\nSet&lt;String&gt; sizeSet = new HashSet&lt;String&gt;();\nsizeSet.add(S);\nsizeSet.add(M);\n</code></pre>\n\n<p>so, what is sizeSet in the above example?</p>\n\n<p>EnumSet is nothing different from the above example, only that EnumSet is a special Set implementation that works with and optimized with enum types, that's all.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1344244933,"creation_date":1344244933,"answer_id":11825530,"question_id":11825009,"body_markdown":"Simplifying your code\r\n\r\n    EnumSet&lt;Size&gt; largeSize = EnumSet.of(Size.XXXL, Size.XXL, Size.XL, Size.L);\r\n    for(Size size: largeSize)\r\n        System.out.print(size+&quot; &quot;);\r\n\r\nYou can see that largeSize is a regular Set except its designed to store Enums.  How is that different?  Firstly the JVM knows all the possible values of the set which means instead of storing all the objects it can use a bitmap where 1 means the item is present and 0 means it is not.  This also means the order of the set is the order of the ordinal values i.e. the order they were defined.  This is why this prints\r\n\r\n    L XL XXL XXXL\r\n\r\nIf you want to know more detail I suggest you read the source for this class.","title":"What does EnumSet really mean?","body":"<p>Simplifying your code</p>\n\n<pre><code>EnumSet&lt;Size&gt; largeSize = EnumSet.of(Size.XXXL, Size.XXL, Size.XL, Size.L);\nfor(Size size: largeSize)\n    System.out.print(size+\" \");\n</code></pre>\n\n<p>You can see that largeSize is a regular Set except its designed to store Enums.  How is that different?  Firstly the JVM knows all the possible values of the set which means instead of storing all the objects it can use a bitmap where 1 means the item is present and 0 means it is not.  This also means the order of the set is the order of the ordinal values i.e. the order they were defined.  This is why this prints</p>\n\n<pre><code>L XL XXL XXXL\n</code></pre>\n\n<p>If you want to know more detail I suggest you read the source for this class.</p>\n"},{"tags":[],"owner":{"account_id":1998033,"reputation":655,"user_id":1789767,"display_name":"Hao Deng"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1470962328,"creation_date":1372769458,"answer_id":17426112,"question_id":11825009,"body_markdown":"It quickly turn any Enum elements into a set, EnumSet is yet another type of Set.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public enum Style { BOLD, ITALIC, UNDERLINE, STRIKETHROUGH }\r\n\r\n    EnumSet.of(Style.BOLD, Style.ITALIC);","title":"What does EnumSet really mean?","body":"<p>It quickly turn any Enum elements into a set, EnumSet is yet another type of Set.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public enum Style { BOLD, ITALIC, UNDERLINE, STRIKETHROUGH }\n\nEnumSet.of(Style.BOLD, Style.ITALIC);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5599169,"reputation":111,"user_id":4435902,"display_name":"sambhu"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1459722961,"creation_date":1420793027,"answer_id":27856685,"question_id":11825009,"body_markdown":"EnumSet is specifically used for storing the enum type element and iterating over it quickly.\r\nEg. \r\n\r\n\r\n    for (Day d : EnumSet.range(Day.MONDAY, Day.FRIDAY))\r\n            System.out.println(d);\r\n\r\n\r\n\r\nThe above snippet will display the days of the week from Monday through Friday.","title":"What does EnumSet really mean?","body":"<p>EnumSet is specifically used for storing the enum type element and iterating over it quickly.\nEg. </p>\n\n<pre><code>for (Day d : EnumSet.range(Day.MONDAY, Day.FRIDAY))\n        System.out.println(d);\n</code></pre>\n\n<p>The above snippet will display the days of the week from Monday through Friday.</p>\n"},{"tags":[],"owner":{"account_id":3307654,"reputation":841,"user_id":2781965,"display_name":"jeton"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1503993246,"creation_date":1423076282,"answer_id":28329237,"question_id":11825009,"body_markdown":"According to [Oracle doc][1]\r\n\r\n&gt; Enum sets are represented internally as bit vectors. This representation is extremely compact and efficient.\r\n\r\nReadable, type safe, low memory footprint... What do you want more?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html","title":"What does EnumSet really mean?","body":"<p>According to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\" rel=\"nofollow noreferrer\">Oracle doc</a></p>\n\n<blockquote>\n  <p>Enum sets are represented internally as bit vectors. This representation is extremely compact and efficient.</p>\n</blockquote>\n\n<p>Readable, type safe, low memory footprint... What do you want more?</p>\n"},{"tags":[],"owner":{"account_id":2371849,"reputation":9565,"user_id":2076286,"accept_rate":72,"display_name":"G&#225;bor"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1661548502,"creation_date":1451825836,"answer_id":34576770,"question_id":11825009,"body_markdown":"A simple `Enum` is a list of values that you can only select *one* from at a time. Using your example, a size can be only one of S, M, L, etc for any given clothing. You could use simple constants instead of the `Enum` but this has its advantages of readability, easier maintenance and strict type checking.\r\n\r\nAn `EnumSet` will be used when you have the need for a variable to assume more than one `Enum` value at the same time. For instance, a font you write to screen with can be both *bold* and *italic* at the same time. An `EnumSet` will allow you to add the various values and to test whether one of those is actually set at any given time. If you have come to Java from other programming languages, this is the functionality usually called **flags**.\r\n\r\nCompare the two:\r\n\r\n    enum Size { S, M, L, XL, XXL, XXXL }\r\n    Size currentSize;\r\n    ...\r\n    currentSize = Size.S;\r\n    ...\r\n    if (currentSize == Size.S) ...\r\n\r\ndefines, assigns and then checks for a single `Enum` value.\r\n\r\n    enum FontStyle { Bold, Italic, Underline, Strikethrough }\r\n    EnumSet&lt;FontStyle&gt; currentStyle;\r\n    ...\r\n    currentStyle = EnumSet.of(FontStyle.Bold, FontStyle.Italic);\r\n    ...\r\n    if (currentStyle.contains(FontStyle.Italic)) ...\r\n\r\ndefines, assigns two `Enum` values at the same time, then checks whether one of those is actually set or not.","title":"What does EnumSet really mean?","body":"<p>A simple <code>Enum</code> is a list of values that you can only select <em>one</em> from at a time. Using your example, a size can be only one of S, M, L, etc for any given clothing. You could use simple constants instead of the <code>Enum</code> but this has its advantages of readability, easier maintenance and strict type checking.</p>\n<p>An <code>EnumSet</code> will be used when you have the need for a variable to assume more than one <code>Enum</code> value at the same time. For instance, a font you write to screen with can be both <em>bold</em> and <em>italic</em> at the same time. An <code>EnumSet</code> will allow you to add the various values and to test whether one of those is actually set at any given time. If you have come to Java from other programming languages, this is the functionality usually called <strong>flags</strong>.</p>\n<p>Compare the two:</p>\n<pre><code>enum Size { S, M, L, XL, XXL, XXXL }\nSize currentSize;\n...\ncurrentSize = Size.S;\n...\nif (currentSize == Size.S) ...\n</code></pre>\n<p>defines, assigns and then checks for a single <code>Enum</code> value.</p>\n<pre><code>enum FontStyle { Bold, Italic, Underline, Strikethrough }\nEnumSet&lt;FontStyle&gt; currentStyle;\n...\ncurrentStyle = EnumSet.of(FontStyle.Bold, FontStyle.Italic);\n...\nif (currentStyle.contains(FontStyle.Italic)) ...\n</code></pre>\n<p>defines, assigns two <code>Enum</code> values at the same time, then checks whether one of those is actually set or not.</p>\n"},{"tags":[],"owner":{"account_id":3863003,"reputation":43,"user_id":3200266,"display_name":"Sarwesh Sethiya"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1470835709,"creation_date":1470834722,"answer_id":38874482,"question_id":11825009,"body_markdown":"    EnumSet largeSize\r\n EnumSet largeSize is a set of Enum values which contains XL, XXL and XXXL.\r\n\r\n    Size \r\nSize is a class of Enum type with constant values S, M, L, XL, XXL, XXXL.\r\n\r\n    largeSize.iterator()\r\n The Iterator for EnumSet is in natural order, the order in which the values of the enum were originally declared.\r\n\r\n - EnumSet class is a member of the Java Collections Framework &amp; is not synchronized.\r\n - Its a high performance set implementation, they are much faster than\r\n   HashSet.\r\n - All elements of each EnumSet instance must be elements of a\r\n   single enum type.\r\n\r\nTo Know more read the api doc : [http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html/ &quot;ORACLE API DOC&quot;","title":"What does EnumSet really mean?","body":"<pre><code>EnumSet largeSize\n</code></pre>\n\n<p>EnumSet largeSize is a set of Enum values which contains XL, XXL and XXXL.</p>\n\n<pre><code>Size \n</code></pre>\n\n<p>Size is a class of Enum type with constant values S, M, L, XL, XXL, XXXL.</p>\n\n<pre><code>largeSize.iterator()\n</code></pre>\n\n<p>The Iterator for EnumSet is in natural order, the order in which the values of the enum were originally declared.</p>\n\n<ul>\n<li>EnumSet class is a member of the Java Collections Framework &amp; is not synchronized.</li>\n<li>Its a high performance set implementation, they are much faster than\nHashSet.</li>\n<li>All elements of each EnumSet instance must be elements of a\nsingle enum type.</li>\n</ul>\n\n<p>To Know more read the api doc : <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html/\" rel=\"nofollow\" title=\"ORACLE API DOC\">http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html</a></p>\n"},{"tags":[],"owner":{"account_id":6805657,"reputation":1560,"user_id":5237474,"accept_rate":89,"display_name":"shashwatZing"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1509475555,"creation_date":1471356271,"answer_id":38977081,"question_id":11825009,"body_markdown":"From Joshua Bloch&#39;s book itself and in his own word:\r\n\r\n&gt; The java.util package provides EnumSet class to efficiently represent\r\n&gt; sets of values drawn from a single enum type. This class implements\r\n&gt; the Set interface, providing all of the richness, type safety and\r\n&gt; interoperability you get with any other Set implementation. But\r\n&gt; internally, each EnumSet is represented as a bit vector. If the\r\n&gt; underlying enum type has sixty-four or fewer elements -- and most do\r\n&gt; -- the entire EnumSet is represented with a single long, so its performance is comparable to that of a bit field. Bulk operations,\r\n&gt; such as removeAll and retainAll, are implemented using bit wise\r\n&gt; arithmetic, just as you&#39;ll do manually for bit fields. But you are\r\n&gt; insulated from the ugliness and error-proneness of manual bit\r\n&gt; twiddling. The EnumSet does the hard work for you.\r\n\r\nSo we can do something like this.\r\n\r\n    public class SizeSet {\r\n    \r\n      public enum Size {S, M, L, XL, XXL, XXXL}\r\n    \r\n      public void applySize(Set&lt;Size&gt; sizes){}\r\n    \r\n    }\r\n\r\nClient Code calling it might do something like\r\n\r\n    SizeSet largeSizeSet = new SizeSet();\r\n    largeSizeSet.applySize(EnumSet.of(Size.L, Size.XXL, Size.XXL));\r\n\r\nNote that the applySize method takes the `Set&lt;Size&gt;` rather than an `EnumSet&lt;Size&gt;`. While it is pretty \r\nobvious and likely that the client would pass an EnumSet to the method, it is a good practice to accept an interface rather than the concrete implementation.","title":"What does EnumSet really mean?","body":"<p>From Joshua Bloch's book itself and in his own word:</p>\n\n<blockquote>\n  <p>The java.util package provides EnumSet class to efficiently represent\n  sets of values drawn from a single enum type. This class implements\n  the Set interface, providing all of the richness, type safety and\n  interoperability you get with any other Set implementation. But\n  internally, each EnumSet is represented as a bit vector. If the\n  underlying enum type has sixty-four or fewer elements -- and most do\n  -- the entire EnumSet is represented with a single long, so its performance is comparable to that of a bit field. Bulk operations,\n  such as removeAll and retainAll, are implemented using bit wise\n  arithmetic, just as you'll do manually for bit fields. But you are\n  insulated from the ugliness and error-proneness of manual bit\n  twiddling. The EnumSet does the hard work for you.</p>\n</blockquote>\n\n<p>So we can do something like this.</p>\n\n<pre><code>public class SizeSet {\n\n  public enum Size {S, M, L, XL, XXL, XXXL}\n\n  public void applySize(Set&lt;Size&gt; sizes){}\n\n}\n</code></pre>\n\n<p>Client Code calling it might do something like</p>\n\n<pre><code>SizeSet largeSizeSet = new SizeSet();\nlargeSizeSet.applySize(EnumSet.of(Size.L, Size.XXL, Size.XXL));\n</code></pre>\n\n<p>Note that the applySize method takes the <code>Set&lt;Size&gt;</code> rather than an <code>EnumSet&lt;Size&gt;</code>. While it is pretty \nobvious and likely that the client would pass an EnumSet to the method, it is a good practice to accept an interface rather than the concrete implementation.</p>\n"},{"tags":[],"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560593762,"creation_date":1560593762,"answer_id":56609407,"question_id":11825009,"body_markdown":"An `EnumSet` is a specialized **Set collection** to work with enum classes. It implements the `Set` interface and extends from `AbstractSet`:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhen you plan to use an EnumSet youhave to take into consideration some points:\r\n\r\n 1. It can contain only enum values and all the values have to belong to\r\n    the same enum \r\n 2. It doesn’t allow to add null values, throwing a NullPointerException in an attempt to do so \r\n 3. It’s not thread-safe, so\r\n    we need to synchronize it externally if required \r\n 4. The elements are\r\n    stored following the order in which they are declared in the enum \r\n 5. It uses a fail-safe iterator that works on a copy, so it won’t throw a\r\n    ConcurrentModificationException if the collection is modified when\r\n    iterating over it\r\n\r\nNow, the `EnumSet largeSize` part is a **variable declaration** so yes, it&#39;s of type EnumSet. Please notice that you can add the type of elements in the collection for better type safety: `EnumSet&lt;Size&gt;`\r\n\r\nCheck out this article to [learn more about EnumSet][2].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wtYZt.jpg\r\n  [2]: https://javatutorial.net/java-enumset-example","title":"What does EnumSet really mean?","body":"<p>An <code>EnumSet</code> is a specialized <strong>Set collection</strong> to work with enum classes. It implements the <code>Set</code> interface and extends from <code>AbstractSet</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wtYZt.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wtYZt.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>When you plan to use an EnumSet youhave to take into consideration some points:</p>\n\n<ol>\n<li>It can contain only enum values and all the values have to belong to\nthe same enum </li>\n<li>It doesn’t allow to add null values, throwing a NullPointerException in an attempt to do so </li>\n<li>It’s not thread-safe, so\nwe need to synchronize it externally if required </li>\n<li>The elements are\nstored following the order in which they are declared in the enum </li>\n<li>It uses a fail-safe iterator that works on a copy, so it won’t throw a\nConcurrentModificationException if the collection is modified when\niterating over it</li>\n</ol>\n\n<p>Now, the <code>EnumSet largeSize</code> part is a <strong>variable declaration</strong> so yes, it's of type EnumSet. Please notice that you can add the type of elements in the collection for better type safety: <code>EnumSet&lt;Size&gt;</code></p>\n\n<p>Check out this article to <a href=\"https://javatutorial.net/java-enumset-example\" rel=\"nofollow noreferrer\">learn more about EnumSet</a>.</p>\n"}],"owner":{"account_id":1529365,"reputation":1954,"user_id":1426980,"accept_rate":94,"display_name":"Adam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65766,"favorite_count":0,"down_vote_count":1,"up_vote_count":78,"accepted_answer_id":11825218,"answer_count":10,"score":77,"last_activity_date":1661548502,"creation_date":1344242651,"question_id":11825009,"body_markdown":"I have the following example:\r\n\r\n    import java.util.EnumSet;\r\n    import java.util.Iterator;\r\n    \r\n    public class SizeSet {\r\n        \r\n        public static void main(String[] args) {\r\n            EnumSet largeSize = EnumSet.of(Size.XL,Size.XXL,Size.XXXL);\r\n            for(Iterator it = largeSize.iterator();it.hasNext();){\r\n                Size size = (Size)it.next();\r\n                System.out.println(size);\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n    enum Size {\r\n      S, M, L, XL, XXL, XXXL;\r\n    \r\n    }\r\n\r\nIn this code I can understand that the Enum creates an Enum type of Sizes.\r\n\r\nMy question is: is `largeSize` an object of EnumSet type? What does it really mean? I really want to understand it better.\r\n","title":"What does EnumSet really mean?","body":"<p>I have the following example:</p>\n\n<pre><code>import java.util.EnumSet;\nimport java.util.Iterator;\n\npublic class SizeSet {\n\n    public static void main(String[] args) {\n        EnumSet largeSize = EnumSet.of(Size.XL,Size.XXL,Size.XXXL);\n        for(Iterator it = largeSize.iterator();it.hasNext();){\n            Size size = (Size)it.next();\n            System.out.println(size);\n        }\n    }\n}\n\n\nenum Size {\n  S, M, L, XL, XXL, XXXL;\n\n}\n</code></pre>\n\n<p>In this code I can understand that the Enum creates an Enum type of Sizes.</p>\n\n<p>My question is: is <code>largeSize</code> an object of EnumSet type? What does it really mean? I really want to understand it better.</p>\n"},{"tags":["java","algorithm","time-complexity","big-o","bitwise-operators"],"comments":[{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1660589197,"post_id":73365177,"comment_id":129563230,"body_markdown":"what&#39;s the language?","body":"what&#39;s the language?"},{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1660589410,"post_id":73365177,"comment_id":129563287,"body_markdown":"There&#39;s no real way to answer that.  The inner loop depends on the pattern of the bits.  When i is 511, you&#39;re going to go for 511 loops.   When i is 512, you&#39;ll go for 0. \n It is approximately O(N**2); n=100 gives 1,151 outs, n=1,000, gives 51,137 outs, and n-10,000, gives almost 2 million entries.  So, multiplying by 10 produces 50x and then 40x increase.","body":"There&#39;s no real way to answer that.  The inner loop depends on the pattern of the bits.  When i is 511, you&#39;re going to go for 511 loops.   When i is 512, you&#39;ll go for 0.   It is approximately O(N**2); n=100 gives 1,151 outs, n=1,000, gives 51,137 outs, and n-10,000, gives almost 2 million entries.  So, multiplying by 10 produces 50x and then 40x increase."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":1,"creation_date":1660589856,"post_id":73365177,"comment_id":129563420,"body_markdown":"for the j loop, the number of iterations is 2^k, where k is the number of bits set to 1. k is on average log(i))/2, so that&#39;s sqrt(n), so I&#39;d say it looks like n.sqrt(n) overall?","body":"for the j loop, the number of iterations is 2^k, where k is the number of bits set to 1. k is on average log(i))/2, so that&#39;s sqrt(n), so I&#39;d say it looks like n.sqrt(n) overall?"},{"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":0,"creation_date":1661548584,"post_id":73365177,"comment_id":129806976,"body_markdown":"@TimRoberts You actually can work out what this sums to, and I think I&#39;ve figured it out. It&#39;s a two-step process: work out the number of iterations for a fixed value of i, then sum that up across values of i.","body":"@TimRoberts You actually can work out what this sums to, and I think I&#39;ve figured it out. It&#39;s a two-step process: work out the number of iterations for a fixed value of i, then sum that up across values of i."},{"owner":{"account_id":22571027,"reputation":5269,"user_id":16757174,"display_name":"kcsquared"},"score":0,"creation_date":1664074322,"post_id":73365177,"comment_id":130386980,"body_markdown":"The sums/ exact time complexities are listed [in the OEIS](https://oeis.org/A006046), which also gives references about the relation of this sequence to self-similar fractals and cellular automata.","body":"The sums/ exact time complexities are listed <a href=\"https://oeis.org/A006046\" rel=\"nofollow noreferrer\">in the OEIS</a>, which also gives references about the relation of this sequence to self-similar fractals and cellular automata."}],"answers":[{"tags":[],"owner":{"account_id":7091921,"reputation":163,"user_id":5426835,"display_name":"Osman Goni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661540732,"creation_date":1661540732,"answer_id":73505514,"question_id":73365177,"body_markdown":"Here is a Java Code snippet:\r\n\r\n```\r\nint i,j,n,cnt;\r\nint bit=10;\r\nint[] mp = new int[bit+1];\r\nn=(1&lt;&lt;bit);\r\nfor(i=0;i&lt;n;i++){\r\n   mp[Integer.bitCount(i)]++;\r\n   if((i&amp;i+1) ==0){ // check 2^k -1, all bit are set, max value of k bit num\r\n       System.out.printf(&quot;\\nfor %d\\n&quot;,i);\r\n       for(j=0;j&lt;=bit;j++){\r\n           System.out.printf(&quot;%d &quot;,mp[j]);\r\n       }\r\n   }\r\n}\r\n```\r\n\r\nOutput: \r\n```\r\nfor 0  // 2^0 - 1\r\n1 0 0 0 0 0 0 0 0 0 0\r\nfor 1  // 2^1 - 1\r\n1 1 0 0 0 0 0 0 0 0 0\r\nfor 3   // 2^2 - 1\r\n1 2 1 0 0 0 0 0 0 0 0\r\nfor 7   // 2^3 - 1\r\n1 3 3 1 0 0 0 0 0 0 0  \r\nfor 15  // 2^4 - 1\r\n1 4 6 4 1 0 0 0 0 0 0\r\nfor 31  // 2^5 - 1\r\n1 5 10 10 5 1 0 0 0 0 0\r\nfor 63   // 2^6 - 1\r\n1 6 15 20 15 6 1 0 0 0 0 \r\nfor 127  // 2^7 - 1\r\n1 7 21 35 35 21 7 1 0 0 0 \r\nfor 255  // 2^8 - 1\r\n1 8 28 56 70 56 28 8 1 0 0 \r\nfor 511  // 2^9 - 1\r\n1 9 36 84 126 126 84 36 9 1 0 \r\nfor 1023  // 2^10 - 1\r\n1 10 45 120 210 252 210 120 45 10 1 \r\n```\r\n\r\nSo it looks like Pascal triangle… \r\n```\r\n0C0 \r\n1C0 1C1\r\n2C0 2C1 2C2\r\n3C0 3C1 3C2 3C3\r\n4C0 4C1 4C2 4C3 4C4\r\n5C0 5C1 5C2 5C3 5C4 5C5\r\n6C0 6C1 6C2 6C3 6C4 6C5 6C6\r\n7C0 7C1 7C2 7C3 7C4 7C5 7C6 7C7\r\n8C0 8C1 8C2 8C3 8C4 8C5 8C6 8C7 8C8\r\n9C0 9C1 9C2 9C3 9C4 9C5 9C6 9C7 9C8 9C9\r\n10C0 10C1 10C2 10C3 10C4 10C5 10C6 10C7 10C8 10C9 10C10\r\n\r\n``` \r\nIn the question above inner loop executes exactly 2^(number set bit) -1 times. \r\nSo if we observe we can ses that If k=number of bit,  then N=2^k;\r\n\r\nThen Complexity becomes: (kC0*2^0+kC1*2^1+kC2*2^2+kC3*2^3+ … … … +kCk*2^k) - N \r\n\r\nIf k=10 then N=2^k=1024 So the complexity becomes as follows:\r\n```\r\n(10C0*2^0+10C1*2^1+10C2*2^2+10C3*2^3+ … … … +10C10*2^10) - 1024 \r\n=(1*1 +10*2 + 45*4+ 120*8+210*16+252*32+210*64+120*128+45*256+10*512+1*1024) - 1024\r\n=59049 - 1024\r\n=58025 \r\n```\r\nHere is another code snippet that helps to verify the number 58025.\r\n```\r\n        int i,j,n,cnt;\r\n        n=1024;\r\n        cnt=0;\r\n        for(i=0;i&lt;n;i++){\r\n            for(j=i; j&gt;0; j = (j-1)&amp;i){\r\n                cnt++;\r\n            }\r\n        }\r\n        System.out.println(cnt);\r\n```\r\nThe output of the above code is 58025.","title":"Complexity of a loop where j shrinks as j = (j - 1) &amp; i","body":"<p>Here is a Java Code snippet:</p>\n<pre><code>int i,j,n,cnt;\nint bit=10;\nint[] mp = new int[bit+1];\nn=(1&lt;&lt;bit);\nfor(i=0;i&lt;n;i++){\n   mp[Integer.bitCount(i)]++;\n   if((i&amp;i+1) ==0){ // check 2^k -1, all bit are set, max value of k bit num\n       System.out.printf(&quot;\\nfor %d\\n&quot;,i);\n       for(j=0;j&lt;=bit;j++){\n           System.out.printf(&quot;%d &quot;,mp[j]);\n       }\n   }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>for 0  // 2^0 - 1\n1 0 0 0 0 0 0 0 0 0 0\nfor 1  // 2^1 - 1\n1 1 0 0 0 0 0 0 0 0 0\nfor 3   // 2^2 - 1\n1 2 1 0 0 0 0 0 0 0 0\nfor 7   // 2^3 - 1\n1 3 3 1 0 0 0 0 0 0 0  \nfor 15  // 2^4 - 1\n1 4 6 4 1 0 0 0 0 0 0\nfor 31  // 2^5 - 1\n1 5 10 10 5 1 0 0 0 0 0\nfor 63   // 2^6 - 1\n1 6 15 20 15 6 1 0 0 0 0 \nfor 127  // 2^7 - 1\n1 7 21 35 35 21 7 1 0 0 0 \nfor 255  // 2^8 - 1\n1 8 28 56 70 56 28 8 1 0 0 \nfor 511  // 2^9 - 1\n1 9 36 84 126 126 84 36 9 1 0 \nfor 1023  // 2^10 - 1\n1 10 45 120 210 252 210 120 45 10 1 \n</code></pre>\n<p>So it looks like Pascal triangle…</p>\n<pre><code>0C0 \n1C0 1C1\n2C0 2C1 2C2\n3C0 3C1 3C2 3C3\n4C0 4C1 4C2 4C3 4C4\n5C0 5C1 5C2 5C3 5C4 5C5\n6C0 6C1 6C2 6C3 6C4 6C5 6C6\n7C0 7C1 7C2 7C3 7C4 7C5 7C6 7C7\n8C0 8C1 8C2 8C3 8C4 8C5 8C6 8C7 8C8\n9C0 9C1 9C2 9C3 9C4 9C5 9C6 9C7 9C8 9C9\n10C0 10C1 10C2 10C3 10C4 10C5 10C6 10C7 10C8 10C9 10C10\n\n</code></pre>\n<p>In the question above inner loop executes exactly 2^(number set bit) -1 times.\nSo if we observe we can ses that If k=number of bit,  then N=2^k;</p>\n<p>Then Complexity becomes: (kC0<em>2^0+kC1</em>2^1+kC2<em>2^2+kC3</em>2^3+ … … … +kCk*2^k) - N</p>\n<p>If k=10 then N=2^k=1024 So the complexity becomes as follows:</p>\n<pre><code>(10C0*2^0+10C1*2^1+10C2*2^2+10C3*2^3+ … … … +10C10*2^10) - 1024 \n=(1*1 +10*2 + 45*4+ 120*8+210*16+252*32+210*64+120*128+45*256+10*512+1*1024) - 1024\n=59049 - 1024\n=58025 \n</code></pre>\n<p>Here is another code snippet that helps to verify the number 58025.</p>\n<pre><code>        int i,j,n,cnt;\n        n=1024;\n        cnt=0;\n        for(i=0;i&lt;n;i++){\n            for(j=i; j&gt;0; j = (j-1)&amp;i){\n                cnt++;\n            }\n        }\n        System.out.println(cnt);\n</code></pre>\n<p>The output of the above code is 58025.</p>\n"},{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1661548459,"creation_date":1661548459,"answer_id":73506532,"question_id":73365177,"body_markdown":"The short version:\r\n\r\n* The runtime of the code is **&amp;Theta;(n&lt;sup&gt;log&lt;sub&gt;2&lt;/sub&gt; 3&lt;/sup&gt;)**, which is approximately &amp;Theta;(n&lt;sup&gt;1.585&lt;/sup&gt;).\r\n* The derivation involves counting the number of 1 bits set in ranges of numbers.\r\n* Your connection to Pascal&#39;s triangle is not a coincidence!\r\n\r\nHere&#39;s the route that I used to work this out. There&#39;s a really nice pattern that plays out in the bits of the numbers as you&#39;re doing the subtractions. For example, suppose that our number `i` is given by `10101001` in binary. Here&#39;s the sequence of values we&#39;ll see for `j`:\r\n\r\n```\r\n10101001\r\n10101000\r\n10100001\r\n10100000\r\n10001001\r\n10001000\r\n10000001\r\n10000000\r\n00101001\r\n00101000\r\n00100001\r\n00100000\r\n00001001\r\n00001000\r\n00000001\r\n00000000\r\n```\r\n\r\nTo see the pattern, focus on the columns of the number where there were `1` bits in the original number. Then you get this result:\r\n\r\n``` text\r\nv v v  v\r\n10101001 1111\r\n10101000 1110\r\n10100001 1101\r\n10100000 1100\r\n10001001 1011\r\n10001000 1010\r\n10000001 1001\r\n10000000 1000\r\n00101001 0111\r\n00101000 0110\r\n00100001 0101\r\n00100000 0100\r\n00001001 0011\r\n00001000 0010\r\n00000001 0001\r\n00000000 0000\r\n```\r\n\r\nIn other words, the sequence of values `j` takes on is basically counting down from the binary number `1111` all the way down to zero! \r\n\r\nMore generally, suppose that the number `i` has b(i) 1 bits in it. Then we&#39;re counting down from a number made of b(i) 1 bits down to 0, which requires 2&lt;sup&gt;b(i)&lt;/sup&gt; steps. Therefore, the amount of work the inner loop does is 2&lt;sup&gt;b(i)&lt;/sup&gt;.\r\n\r\nThat gives us the complexity of the inner loop, but to figure out the total complexity of the loop, we need to figure out how much work is done across all `n` iterations, not just one of them. So the question then becomes: if you count from 0 up to n, and you sum up 2&lt;sup&gt;b(i)&lt;/sup&gt;, what do you get? Or, stated differently, what is\r\n\r\n&gt; 2&lt;sup&gt;b(0)&lt;/sup&gt; + 2&lt;sup&gt;b(1)&lt;/sup&gt; + 2&lt;sup&gt;b(2)&lt;/sup&gt; + ... + 2&lt;sup&gt;b(n-1)&lt;/sup&gt;\r\n\r\nequal to?\r\n\r\nTo make this easier, let&#39;s assume that n is a perfect power of two. Say, for example, that n = 2&lt;sup&gt;k&lt;/sup&gt;. This will make this easier because that means that the numbers 0, 1, 2, ..., n-1 all have the same number of bits in them. There&#39;s a really nice pattern at play here. Look at the numbers from 0 to 7 in binary and work out what 2&lt;sup&gt;b(i)&lt;/sup&gt; is for each:\r\n\r\n```\r\n000   1\r\n001   2\r\n010   2\r\n011   4\r\n100   2\r\n101   4\r\n110   4\r\n111   8\r\n```\r\n\r\nNow look at the numbers from 0 to 15 in binary:\r\n\r\n```\r\n0000   1\r\n0001   2\r\n0010   2\r\n0011   4\r\n0100   2\r\n0101   4\r\n0110   4\r\n0111   8\r\n----\r\n1000   2\r\n1001   4\r\n1010   4\r\n1011   8\r\n1100   4\r\n1101   8\r\n1110   8\r\n1111   16\r\n```\r\n\r\nIn writing out the numbers from 8 to 15, we&#39;re basically writing out the numbers from 0 to 7, but with a 1 prefixed. This means each of those numbers has the one plus the number of 1 bits set as the previous versions, so 2&lt;sup&gt;b(i)&lt;/sup&gt; is doubled for each of them. So if we know the sum of these terms from 0 to 2&lt;sup&gt;k&lt;/sup&gt;-1, and we want to know the sum of the terms from 0 to 2&lt;sup&gt;k+1&lt;/sup&gt; - 1, then we basically take the sum we have, then add two more copies of it.\r\n\r\nMore formally, let&#39;s define S(k) = 2&lt;sup&gt;b(0)&lt;/sup&gt; + 2&lt;sup&gt;b(1)&lt;/sup&gt; + ... + 2&lt;sup&gt;b(2&lt;sup&gt;k&lt;/sup&gt; - 1)&lt;/sup&gt;. Then we have\r\n\r\n* S(0) = 1\r\n* S(k + 1) = S(k) + 2S(k) = 3S(k)\r\n\r\nThis recurrence solves to S(k) = 3&lt;sup&gt;k&lt;/sup&gt;. In other words, the sum 2&lt;sup&gt;b(0)&lt;/sup&gt; + 2&lt;sup&gt;b(1)&lt;/sup&gt; + ... + 2&lt;sup&gt;b(2&lt;sup&gt;k&lt;/sup&gt;-1)&lt;/sup&gt; works out to 3&lt;sup&gt;k&lt;/sup&gt;.\r\n\r\nOf course, in general, we won&#39;t have n = 2&lt;sup&gt;k&lt;/sup&gt;. However, if we write k = log&lt;sub&gt;2&lt;/sub&gt; n, then we can get an approximation of the number of iterations at roughly\r\n\r\n&gt; 3&lt;sup&gt;log&lt;sub&gt;2&lt;/sub&gt; k&lt;/sup&gt;\r\n&gt;\r\n&gt; = k&lt;sup&gt;log&lt;sub&gt;2&lt;/sub&gt; 3&lt;/sup&gt;\r\n&gt;\r\n&gt; &amp;approx; k&lt;sup&gt;1.584...&lt;/sup&gt;\r\n\r\nSo we&#39;d expect the runtime of the code to be **&amp;Theta;(n&lt;sup&gt;log&lt;sub&gt;2&lt;/sub&gt; 3&lt;/sup&gt;)**. To see if that&#39;s the case, I wrote a program that ran the function and counted the number of times the inner loop executed. I then plotted the number of iterations of the inner loop against the function n&lt;sup&gt;log&lt;sub&gt;2&lt;/sub&gt; 3&lt;/sup&gt;. Here&#39;s what it looks like:\r\n\r\n&gt; ![The final plot][1]][1]\r\n\r\nAs you can see, this fits pretty well!\r\n\r\nSo how does connect to Pascal&#39;s triangle? It turns out that the numbers 2&lt;sup&gt;b(i)&lt;/sup&gt; has another interpretation: it&#39;s the number of odd numbers in the ith row of Pascal&#39;s triangle! And that might explain why you&#39;re seeing combinations pop out of the math.\r\n\r\nThanks for posting this problem - it&#39;s super interesting! Where did you find it?\r\n\r\n  [1]: https://i.stack.imgur.com/yYHde.png","title":"Complexity of a loop where j shrinks as j = (j - 1) &amp; i","body":"<p>The short version:</p>\n<ul>\n<li>The runtime of the code is <strong>Θ(n<sup>log<sub>2</sub> 3</sup>)</strong>, which is approximately Θ(n<sup>1.585</sup>).</li>\n<li>The derivation involves counting the number of 1 bits set in ranges of numbers.</li>\n<li>Your connection to Pascal's triangle is not a coincidence!</li>\n</ul>\n<p>Here's the route that I used to work this out. There's a really nice pattern that plays out in the bits of the numbers as you're doing the subtractions. For example, suppose that our number <code>i</code> is given by <code>10101001</code> in binary. Here's the sequence of values we'll see for <code>j</code>:</p>\n<pre><code>10101001\n10101000\n10100001\n10100000\n10001001\n10001000\n10000001\n10000000\n00101001\n00101000\n00100001\n00100000\n00001001\n00001000\n00000001\n00000000\n</code></pre>\n<p>To see the pattern, focus on the columns of the number where there were <code>1</code> bits in the original number. Then you get this result:</p>\n<pre><code>v v v  v\n10101001 1111\n10101000 1110\n10100001 1101\n10100000 1100\n10001001 1011\n10001000 1010\n10000001 1001\n10000000 1000\n00101001 0111\n00101000 0110\n00100001 0101\n00100000 0100\n00001001 0011\n00001000 0010\n00000001 0001\n00000000 0000\n</code></pre>\n<p>In other words, the sequence of values <code>j</code> takes on is basically counting down from the binary number <code>1111</code> all the way down to zero!</p>\n<p>More generally, suppose that the number <code>i</code> has b(i) 1 bits in it. Then we're counting down from a number made of b(i) 1 bits down to 0, which requires 2<sup>b(i)</sup> steps. Therefore, the amount of work the inner loop does is 2<sup>b(i)</sup>.</p>\n<p>That gives us the complexity of the inner loop, but to figure out the total complexity of the loop, we need to figure out how much work is done across all <code>n</code> iterations, not just one of them. So the question then becomes: if you count from 0 up to n, and you sum up 2<sup>b(i)</sup>, what do you get? Or, stated differently, what is</p>\n<blockquote>\n<p>2<sup>b(0)</sup> + 2<sup>b(1)</sup> + 2<sup>b(2)</sup> + ... + 2<sup>b(n-1)</sup></p>\n</blockquote>\n<p>equal to?</p>\n<p>To make this easier, let's assume that n is a perfect power of two. Say, for example, that n = 2<sup>k</sup>. This will make this easier because that means that the numbers 0, 1, 2, ..., n-1 all have the same number of bits in them. There's a really nice pattern at play here. Look at the numbers from 0 to 7 in binary and work out what 2<sup>b(i)</sup> is for each:</p>\n<pre><code>000   1\n001   2\n010   2\n011   4\n100   2\n101   4\n110   4\n111   8\n</code></pre>\n<p>Now look at the numbers from 0 to 15 in binary:</p>\n<pre><code>0000   1\n0001   2\n0010   2\n0011   4\n0100   2\n0101   4\n0110   4\n0111   8\n----\n1000   2\n1001   4\n1010   4\n1011   8\n1100   4\n1101   8\n1110   8\n1111   16\n</code></pre>\n<p>In writing out the numbers from 8 to 15, we're basically writing out the numbers from 0 to 7, but with a 1 prefixed. This means each of those numbers has the one plus the number of 1 bits set as the previous versions, so 2<sup>b(i)</sup> is doubled for each of them. So if we know the sum of these terms from 0 to 2<sup>k</sup>-1, and we want to know the sum of the terms from 0 to 2<sup>k+1</sup> - 1, then we basically take the sum we have, then add two more copies of it.</p>\n<p>More formally, let's define S(k) = 2<sup>b(0)</sup> + 2<sup>b(1)</sup> + ... + 2<sup>b(2<sup>k</sup> - 1)</sup>. Then we have</p>\n<ul>\n<li>S(0) = 1</li>\n<li>S(k + 1) = S(k) + 2S(k) = 3S(k)</li>\n</ul>\n<p>This recurrence solves to S(k) = 3<sup>k</sup>. In other words, the sum 2<sup>b(0)</sup> + 2<sup>b(1)</sup> + ... + 2<sup>b(2<sup>k</sup>-1)</sup> works out to 3<sup>k</sup>.</p>\n<p>Of course, in general, we won't have n = 2<sup>k</sup>. However, if we write k = log<sub>2</sub> n, then we can get an approximation of the number of iterations at roughly</p>\n<blockquote>\n<p>3<sup>log<sub>2</sub> k</sup></p>\n<p>= k<sup>log<sub>2</sub> 3</sup></p>\n<p>≈ k<sup>1.584...</sup></p>\n</blockquote>\n<p>So we'd expect the runtime of the code to be <strong>Θ(n<sup>log<sub>2</sub> 3</sup>)</strong>. To see if that's the case, I wrote a program that ran the function and counted the number of times the inner loop executed. I then plotted the number of iterations of the inner loop against the function n<sup>log<sub>2</sub> 3</sup>. Here's what it looks like:</p>\n<blockquote>\n<p><img src=\"https://i.stack.imgur.com/yYHde.png\" alt=\"The final plot\" />]<a href=\"https://i.stack.imgur.com/yYHde.png\" rel=\"nofollow noreferrer\">1</a></p>\n</blockquote>\n<p>As you can see, this fits pretty well!</p>\n<p>So how does connect to Pascal's triangle? It turns out that the numbers 2<sup>b(i)</sup> has another interpretation: it's the number of odd numbers in the ith row of Pascal's triangle! And that might explain why you're seeing combinations pop out of the math.</p>\n<p>Thanks for posting this problem - it's super interesting! Where did you find it?</p>\n"}],"owner":{"account_id":7091921,"reputation":163,"user_id":5426835,"display_name":"Osman Goni"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1661548472,"creation_date":1660588956,"question_id":73365177,"body_markdown":"What is the time complexity of this code snippet? Why, mathematically, is that?\r\n\r\n```\r\nfor (int i = 0; i &lt; n; i++) {\r\n    for (int j = i; j &gt; 0; j = (j - 1) &amp; i) {\r\n        System.out.println(j);\r\n    }\r\n}\r\n```","title":"Complexity of a loop where j shrinks as j = (j - 1) &amp; i","body":"<p>What is the time complexity of this code snippet? Why, mathematically, is that?</p>\n<pre><code>for (int i = 0; i &lt; n; i++) {\n    for (int j = i; j &gt; 0; j = (j - 1) &amp; i) {\n        System.out.println(j);\n    }\n}\n</code></pre>\n"},{"tags":["java","inheritance","jackson","response","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661548009,"creation_date":1661548009,"answer_id":73506480,"question_id":73491275,"body_markdown":"You need to make root and sub classes generic. Use `TypeReference` to provide which data class you expect. Take a look at below example:\r\n```java\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.core.type.TypeReference;\r\nimport com.fasterxml.jackson.databind.json.JsonMapper;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport lombok.ToString;\r\n\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\npublic class GenericDataApp {\r\n\tpublic static void main(String[] args) throws JsonProcessingException {\r\n\t\tJsonMapper mapper = JsonMapper.builder().build();\r\n\t\tString srcA = &quot;{\\&quot;subClass\\&quot;:{\\&quot;total\\&quot;:1,\\&quot;dataList\\&quot;:[{\\&quot;field2\\&quot;:\\&quot;String value\\&quot;}]}}&quot;;\r\n\t\tRootClass&lt;DataA&gt; dataA = mapper.readValue(srcA, new TypeReference&lt;RootClass&lt;DataA&gt;&gt;() {\r\n\t\t});\r\n\t\tSystem.out.println(dataA.getSubClass());\r\n\r\n\t\tString srcB = &quot;{\\&quot;subClass\\&quot;:{\\&quot;total\\&quot;:1,\\&quot;dataList\\&quot;:[{\\&quot;field2\\&quot;:12}]}}&quot;;\r\n\t\tRootClass&lt;DataB&gt; dataB = mapper.readValue(srcB, new TypeReference&lt;RootClass&lt;DataB&gt;&gt;() {\r\n\t\t});\r\n\t\tSystem.out.println(dataB.getSubClass());\r\n\t}\r\n}\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@Getter\r\n@Setter\r\nclass RootClass&lt;T&gt; {\r\n\r\n\tprivate SubClass&lt;T&gt; subClass;\r\n\r\n\t@Getter\r\n\t@Setter\r\n\t@ToString\r\n\tpublic static class SubClass&lt;T&gt; {\r\n\r\n\t\tInteger total;\r\n\t\tInteger perPage;\r\n\t\tList&lt;T&gt; dataList;\r\n\t}\r\n}\r\n\r\n@Getter\r\n@Setter\r\n@ToString\r\nclass DataA {\r\n\r\n\tprivate String field1;\r\n\tprivate String field2;\r\n\tprivate int field3;\r\n}\r\n\r\n@Getter\r\n@Setter\r\n@ToString\r\nclass DataB {\r\n\r\n\tprivate String field1;\r\n\tprivate int field2;\r\n\tprivate Date field3;\r\n}\r\n```\r\n\r\nAbove code prints:\r\n```\r\nRootClass.SubClass(total=1, perPage=null, dataList=[DataA(field1=null, field2=String value, field3=0)])\r\nRootClass.SubClass(total=1, perPage=null, dataList=[DataB(field1=null, field2=12, field3=null)])\r\n```","title":"Inheritance DRY response","body":"<p>You need to make root and sub classes generic. Use <code>TypeReference</code> to provide which data class you expect. Take a look at below example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.json.JsonMapper;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\nimport java.util.Date;\nimport java.util.List;\n\npublic class GenericDataApp {\n    public static void main(String[] args) throws JsonProcessingException {\n        JsonMapper mapper = JsonMapper.builder().build();\n        String srcA = &quot;{\\&quot;subClass\\&quot;:{\\&quot;total\\&quot;:1,\\&quot;dataList\\&quot;:[{\\&quot;field2\\&quot;:\\&quot;String value\\&quot;}]}}&quot;;\n        RootClass&lt;DataA&gt; dataA = mapper.readValue(srcA, new TypeReference&lt;RootClass&lt;DataA&gt;&gt;() {\n        });\n        System.out.println(dataA.getSubClass());\n\n        String srcB = &quot;{\\&quot;subClass\\&quot;:{\\&quot;total\\&quot;:1,\\&quot;dataList\\&quot;:[{\\&quot;field2\\&quot;:12}]}}&quot;;\n        RootClass&lt;DataB&gt; dataB = mapper.readValue(srcB, new TypeReference&lt;RootClass&lt;DataB&gt;&gt;() {\n        });\n        System.out.println(dataB.getSubClass());\n    }\n}\n\n@JsonIgnoreProperties(ignoreUnknown = true)\n@Getter\n@Setter\nclass RootClass&lt;T&gt; {\n\n    private SubClass&lt;T&gt; subClass;\n\n    @Getter\n    @Setter\n    @ToString\n    public static class SubClass&lt;T&gt; {\n\n        Integer total;\n        Integer perPage;\n        List&lt;T&gt; dataList;\n    }\n}\n\n@Getter\n@Setter\n@ToString\nclass DataA {\n\n    private String field1;\n    private String field2;\n    private int field3;\n}\n\n@Getter\n@Setter\n@ToString\nclass DataB {\n\n    private String field1;\n    private int field2;\n    private Date field3;\n}\n</code></pre>\n<p>Above code prints:</p>\n<pre><code>RootClass.SubClass(total=1, perPage=null, dataList=[DataA(field1=null, field2=String value, field3=0)])\nRootClass.SubClass(total=1, perPage=null, dataList=[DataB(field1=null, field2=12, field3=null)])\n</code></pre>\n"}],"owner":{"account_id":23977999,"reputation":73,"user_id":17965846,"display_name":"wuttke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73506480,"answer_count":1,"score":1,"last_activity_date":1661548009,"creation_date":1661446995,"question_id":73491275,"body_markdown":"I have two class for external API response:\r\n\r\nClassA:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    @Getter\r\n    @Setter\r\n    public class ClassA {\r\n\r\n      private SubClass subClass;\r\n    \r\n      @Getter\r\n      @Setter\r\n      public static class SubClass {\r\n    \r\n        Integer total;\r\n        Integer perPage;\r\n        List&lt;Data&gt; dataList;\r\n    \r\n        @Getter\r\n        @Setter\r\n        public static class Data {\r\n           \r\n          private String field1;\r\n          private String field2;\r\n          private int field3;\r\n        }\r\n      }\r\n    }\r\n\r\nClassB:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    @Getter\r\n    @Setter\r\n    public class ClassB {\r\n\r\n      private SubClass subClass;\r\n    \r\n      @Getter\r\n      @Setter\r\n      public static class SubClass {\r\n    \r\n        Integer total;\r\n        Integer perPage;\r\n        List&lt;Data&gt; dataList;\r\n    \r\n        @Getter\r\n        @Setter\r\n        public static class Data {\r\n           \r\n          private String field1;\r\n          private int field2;\r\n          private Date field3;\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nAnd deserialization with ObjectMapper:\r\n\r\n      ClassA classA =\r\n          mapper.readValue(bodyResponse, ClassA.class);\r\n\r\n\r\nWhat is the best way to get rid of duplicate code in these classes when using inheritance and later using deserialization?","title":"Inheritance DRY response","body":"<p>I have two class for external API response:</p>\n<p>ClassA:</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\n@Getter\n@Setter\npublic class ClassA {\n\n  private SubClass subClass;\n\n  @Getter\n  @Setter\n  public static class SubClass {\n\n    Integer total;\n    Integer perPage;\n    List&lt;Data&gt; dataList;\n\n    @Getter\n    @Setter\n    public static class Data {\n       \n      private String field1;\n      private String field2;\n      private int field3;\n    }\n  }\n}\n</code></pre>\n<p>ClassB:</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\n@Getter\n@Setter\npublic class ClassB {\n\n  private SubClass subClass;\n\n  @Getter\n  @Setter\n  public static class SubClass {\n\n    Integer total;\n    Integer perPage;\n    List&lt;Data&gt; dataList;\n\n    @Getter\n    @Setter\n    public static class Data {\n       \n      private String field1;\n      private int field2;\n      private Date field3;\n    }\n  }\n}\n</code></pre>\n<p>And deserialization with ObjectMapper:</p>\n<pre><code>  ClassA classA =\n      mapper.readValue(bodyResponse, ClassA.class);\n</code></pre>\n<p>What is the best way to get rid of duplicate code in these classes when using inheritance and later using deserialization?</p>\n"},{"tags":["java","base64","rsa","public-key","pgp"],"comments":[{"owner":{"account_id":85671,"reputation":40848,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1555460185,"post_id":55717845,"comment_id":98116611,"body_markdown":"You need to use a library that understands PGP key formats. It is completely incompatible with the format expected by `X509EncodedKeySpec`, so this can never work.","body":"You need to use a library that understands PGP key formats. It is completely incompatible with the format expected by <code>X509EncodedKeySpec</code>, so this can never work."},{"owner":{"account_id":12641620,"reputation":27,"user_id":9643132,"display_name":"J.Carlos"},"score":0,"creation_date":1555946303,"post_id":55717845,"comment_id":98262366,"body_markdown":"I&#39;ll search about that, thanks, that got me a hint at least!","body":"I&#39;ll search about that, thanks, that got me a hint at least!"}],"answers":[{"tags":[],"owner":{"account_id":9919416,"reputation":369,"user_id":7343117,"accept_rate":83,"display_name":"vi_ral"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1555457516,"creation_date":1555457516,"answer_id":55717897,"question_id":55717845,"body_markdown":"Your while loop is a bit confusing, so for simplicity sake lets assume that your alphanumeric string is stored in the your_string variable. Try the following code\r\n\r\n```\r\nString public_key = your_string.replace(&quot;-----BEGIN PUBLIC KEY-----\\n&quot;, &quot;&quot;).replace(&quot;-----END PUBLIC KEY-----&quot;, &quot;&quot;);\r\nbyte[] encoded_public_key = Base64.decode(publicKey);    \r\nX509EncodedKeySpec spec = new X509EncodedKeySpec(encoded_public_key);\r\nKeyFactory keyfactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\nkeyfactory.generatePublic(spec)\r\n```","title":"Problem while parsing String to Public Key; Invalid key format","body":"<p>Your while loop is a bit confusing, so for simplicity sake lets assume that your alphanumeric string is stored in the your_string variable. Try the following code</p>\n\n<pre><code>String public_key = your_string.replace(\"-----BEGIN PUBLIC KEY-----\\n\", \"\").replace(\"-----END PUBLIC KEY-----\", \"\");\nbyte[] encoded_public_key = Base64.decode(publicKey);    \nX509EncodedKeySpec spec = new X509EncodedKeySpec(encoded_public_key);\nKeyFactory keyfactory = KeyFactory.getInstance(\"RSA\");\nkeyfactory.generatePublic(spec)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11368907,"reputation":4584,"user_id":8334991,"display_name":"Alexandre Fenyo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556033354,"creation_date":1556010066,"answer_id":55807688,"question_id":55717845,"body_markdown":"With Java, you may use the well-known Bouncy Castle crypto library this way, to parse a PGP public key.\r\n\r\nIn your question, FilePath is the path to a file containing the PEM encoded public key, so here is a way to get the public exponent and modulus values:\r\n\r\n- create a key ring object parsing the content of FilePath;\r\n- extract the public key from the key ring;\r\n- convert the generic public key object to an instance of **RSAPublicBCPGKey**, to access the **getPublicExponent()** and **getModulus()** methods.\r\n\r\n\r\nHere is the code snippet.\r\n\r\n    package net.fenyo.tstpgp;\r\n    \r\n    import java.io.*;\r\n    import org.bouncycastle.bcpg.*;\r\n    import org.bouncycastle.openpgp.*;\r\n    import org.bouncycastle.openpgp.jcajce.*;\r\n    \r\n    public class App {\r\n        static String FilePath = &quot;d:/temp/publickey.pem&quot;;\r\n\r\n        public static void main(String[] args) throws IOException, PGPException {\r\n            // Import the PEM encoded key in a key ring\r\n            JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(org.bouncycastle.openpgp.PGPUtil\r\n                    .getDecoderStream(new FileInputStream(new File(FilePath))));\r\n            // Extract the public key from the ring\r\n            PGPPublicKey pk = pgpPub.getKeyRings().next().getPublicKey();\r\n            RSAPublicBCPGKey rsa = (RSAPublicBCPGKey) pk.getPublicKeyPacket().getKey();\r\n\r\n            // Display the components of the public key\r\n            System.out.println(&quot;public exponent: &quot; + rsa.getPublicExponent().toString());\r\n            System.out.println(&quot;modulus: &quot; + rsa.getModulus().toString());\r\n        }\r\n    }\r\n\r\nHere is an example of the output of this program, for which the content of the file **d:/temp/publickey.pem** has been downloaded from there: https://keyserver.pgp.com/vkd/DownloadKey.event?keyid=0x5F6C8AE0F08B18EC\r\n\r\n    public exponent: 65537\r\n    modulus: 864707173482092744188671562103373011522752303482519808998088798903008001989099675905283831755832233822390078023832521726213457271249972815470211175966041907569318308362891570478941689686712697599623242011017193503964284513039591891526529083515353888885379235878670749376434323941202586223991854576398690573826518569769985809172651040238653272623223118871290893821208919901304705818060395766177710540558136309696633947940763393190279817250884876978530480176563952524356940770342282654575132991815388460879205229175539573644598040510846046356206518680485904082394070023094993115791279506109927248743485104551955556126256899738972837743577201916815523009590547379892261434498517119972252725514435930097571692392590872567503156038414424344470094696986970708719252723773350549916905691632234402052848270487256520247608379181338474223362079571903909236852815812080392096829534242568109033526006705931306007816143593663131528165731422403611912314397882216433246741610889521014679759861466346273746749512271029719491507151898623753390849376017894676856788535056943964836442355399016103191720725346349409014858505159766120737574239682242298505299052720937352185330272669848438756037873927573782283883754416499218933913671945750838607217911481\r\n\r\nNOTE: here is an example of a maven pom file used to automatically download the Bouncy Castle dependencies and compile this program:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;net.fenyo&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tstpgp&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n      &lt;name&gt;tstpgp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n          &lt;artifactId&gt;bcpg-jdk15on&lt;/artifactId&gt;\r\n          &lt;version&gt;1.61&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"Problem while parsing String to Public Key; Invalid key format","body":"<p>With Java, you may use the well-known Bouncy Castle crypto library this way, to parse a PGP public key.</p>\n\n<p>In your question, FilePath is the path to a file containing the PEM encoded public key, so here is a way to get the public exponent and modulus values:</p>\n\n<ul>\n<li>create a key ring object parsing the content of FilePath;</li>\n<li>extract the public key from the key ring;</li>\n<li>convert the generic public key object to an instance of <strong>RSAPublicBCPGKey</strong>, to access the <strong>getPublicExponent()</strong> and <strong>getModulus()</strong> methods.</li>\n</ul>\n\n<p>Here is the code snippet.</p>\n\n<pre><code>package net.fenyo.tstpgp;\n\nimport java.io.*;\nimport org.bouncycastle.bcpg.*;\nimport org.bouncycastle.openpgp.*;\nimport org.bouncycastle.openpgp.jcajce.*;\n\npublic class App {\n    static String FilePath = \"d:/temp/publickey.pem\";\n\n    public static void main(String[] args) throws IOException, PGPException {\n        // Import the PEM encoded key in a key ring\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(org.bouncycastle.openpgp.PGPUtil\n                .getDecoderStream(new FileInputStream(new File(FilePath))));\n        // Extract the public key from the ring\n        PGPPublicKey pk = pgpPub.getKeyRings().next().getPublicKey();\n        RSAPublicBCPGKey rsa = (RSAPublicBCPGKey) pk.getPublicKeyPacket().getKey();\n\n        // Display the components of the public key\n        System.out.println(\"public exponent: \" + rsa.getPublicExponent().toString());\n        System.out.println(\"modulus: \" + rsa.getModulus().toString());\n    }\n}\n</code></pre>\n\n<p>Here is an example of the output of this program, for which the content of the file <strong>d:/temp/publickey.pem</strong> has been downloaded from there: <a href=\"https://keyserver.pgp.com/vkd/DownloadKey.event?keyid=0x5F6C8AE0F08B18EC\" rel=\"nofollow noreferrer\">https://keyserver.pgp.com/vkd/DownloadKey.event?keyid=0x5F6C8AE0F08B18EC</a></p>\n\n<pre><code>public exponent: 65537\nmodulus: 864707173482092744188671562103373011522752303482519808998088798903008001989099675905283831755832233822390078023832521726213457271249972815470211175966041907569318308362891570478941689686712697599623242011017193503964284513039591891526529083515353888885379235878670749376434323941202586223991854576398690573826518569769985809172651040238653272623223118871290893821208919901304705818060395766177710540558136309696633947940763393190279817250884876978530480176563952524356940770342282654575132991815388460879205229175539573644598040510846046356206518680485904082394070023094993115791279506109927248743485104551955556126256899738972837743577201916815523009590547379892261434498517119972252725514435930097571692392590872567503156038414424344470094696986970708719252723773350549916905691632234402052848270487256520247608379181338474223362079571903909236852815812080392096829534242568109033526006705931306007816143593663131528165731422403611912314397882216433246741610889521014679759861466346273746749512271029719491507151898623753390849376017894676856788535056943964836442355399016103191720725346349409014858505159766120737574239682242298505299052720937352185330272669848438756037873927573782283883754416499218933913671945750838607217911481\n</code></pre>\n\n<p>NOTE: here is an example of a maven pom file used to automatically download the Bouncy Castle dependencies and compile this program:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;net.fenyo&lt;/groupId&gt;\n  &lt;artifactId&gt;tstpgp&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;name&gt;tstpgp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n      &lt;artifactId&gt;bcpg-jdk15on&lt;/artifactId&gt;\n      &lt;version&gt;1.61&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":12641620,"reputation":27,"user_id":9643132,"display_name":"J.Carlos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1661546826,"creation_date":1555457008,"question_id":55717845,"body_markdown":"I&#39;m trying to &#39;parse&#39; a alphanumerical String to a PublicKey object in Java. I want to read the modulus and the exponent from that key. I&#39;m a newbie in this, so I don&#39;t know exactly what I should do here. \r\n\r\nI tried by reading the file which contains the String, or by just reading the file with InputStream and the like, and always keep going until the last part; parsing bytes to PublicKey.\r\n\r\nThis is the Key I&#39;m trying to parse: \r\n\r\n    -----BEGIN PGP PUBLIC KEY BLOCK-----\r\n    Version: Encryption Desktop 10.3.2 (Build 15495)\r\n\r\n    mQENBFyL1ngBCADPZR4FPDxi9v5wNVXDksXzo9IEQvFoQIIfmGaomQ8PrAZHH2jb\r\n    nUGK6Y56p/Mlxz3uqfOR0fyBNuq/beszk/jChcy9sqCF3TwKBOdWVcXiIU/XiS0V\r\n    ...\r\n    +FnyI/aT7n+jXBpQSWiyHQyM9RfS0rBeO9w7Q4nWwMyAEHfYxqaajYgJZ+N+Jw==\r\n    =Adx/\r\n    -----END PGP PUBLIC KEY BLOCK-----\r\n\r\nAnd this is the code I&#39;ve been trying:\r\n\r\n    fis = new FileInputStream(FilePath);\r\n    InputStreamReader isr = new InputStreamReader(fis, Charset.forName(&quot;UTF-8&quot;));\r\n    BufferedReader br = new BufferedReader(isr);\r\n\r\n    while ((line = br.readLine()) != null) {\r\n    rd+=line+&quot;,&quot;;\r\n    }\r\n    partes=rd.split(&quot;,&quot;);\r\n    String llaveses=&quot;&quot;;\r\n    int i=2;\r\n    while (partes.length&gt;i){\r\n        if (i == partes.length-1){\r\n        llaveses+=&quot;&quot;;\r\n        }else\r\n        llaveses+=partes[i];\r\n        i++; }\r\n\t\t    \r\n    byte[] bytepuk = llaveses.getBytes();\r\n    X509EncodedKeySpec spec = new X509EncodedKeySpec(bytepuk);\r\n    KeyFactory kfRSA = KeyFactory.getInstance(&quot;RSA&quot;);\r\n    PublicKey pukrsa=kfRSA.generatePublic(spec); //i always got stuck in this part\r\n\r\nI have tried with this, as well with PGPPublicKey, but nope, it always keep saying &#39;invalid key format&#39;\r\n\r\nI just want to get those two pieces of data; modulus and exponent\r\nAny help or recommendation would be great!\r\nAlso, sorry for my poor English!","title":"Problem while parsing String to Public Key; Invalid key format","body":"<p>I'm trying to 'parse' a alphanumerical String to a PublicKey object in Java. I want to read the modulus and the exponent from that key. I'm a newbie in this, so I don't know exactly what I should do here.</p>\n<p>I tried by reading the file which contains the String, or by just reading the file with InputStream and the like, and always keep going until the last part; parsing bytes to PublicKey.</p>\n<p>This is the Key I'm trying to parse:</p>\n<pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: Encryption Desktop 10.3.2 (Build 15495)\n\nmQENBFyL1ngBCADPZR4FPDxi9v5wNVXDksXzo9IEQvFoQIIfmGaomQ8PrAZHH2jb\nnUGK6Y56p/Mlxz3uqfOR0fyBNuq/beszk/jChcy9sqCF3TwKBOdWVcXiIU/XiS0V\n...\n+FnyI/aT7n+jXBpQSWiyHQyM9RfS0rBeO9w7Q4nWwMyAEHfYxqaajYgJZ+N+Jw==\n=Adx/\n-----END PGP PUBLIC KEY BLOCK-----\n</code></pre>\n<p>And this is the code I've been trying:</p>\n<pre><code>fis = new FileInputStream(FilePath);\nInputStreamReader isr = new InputStreamReader(fis, Charset.forName(&quot;UTF-8&quot;));\nBufferedReader br = new BufferedReader(isr);\n\nwhile ((line = br.readLine()) != null) {\nrd+=line+&quot;,&quot;;\n}\npartes=rd.split(&quot;,&quot;);\nString llaveses=&quot;&quot;;\nint i=2;\nwhile (partes.length&gt;i){\n    if (i == partes.length-1){\n    llaveses+=&quot;&quot;;\n    }else\n    llaveses+=partes[i];\n    i++; }\n        \nbyte[] bytepuk = llaveses.getBytes();\nX509EncodedKeySpec spec = new X509EncodedKeySpec(bytepuk);\nKeyFactory kfRSA = KeyFactory.getInstance(&quot;RSA&quot;);\nPublicKey pukrsa=kfRSA.generatePublic(spec); //i always got stuck in this part\n</code></pre>\n<p>I have tried with this, as well with PGPPublicKey, but nope, it always keep saying 'invalid key format'</p>\n<p>I just want to get those two pieces of data; modulus and exponent\nAny help or recommendation would be great!\nAlso, sorry for my poor English!</p>\n"},{"tags":["java","sorting","comparator"],"comments":[{"owner":{"account_id":56119,"reputation":4240,"user_id":168086,"accept_rate":82,"display_name":"andyczerwonka"},"score":0,"creation_date":1273904754,"post_id":2839137,"comment_id":15402746,"body_markdown":"See http://stackoverflow.com/questions/2477261/how-to-sort-a-collectiont/2477287#2477287","body":"See <a href=\"http://stackoverflow.com/questions/2477261/how-to-sort-a-collectiont/2477287#2477287\" title=\"how to sort a collectiont\">stackoverflow.com/questions/2477261/how-to-sort-a-collection&zwnj;&#8203;t/&hellip;</a>"},{"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":1,"creation_date":1273904923,"post_id":2839137,"comment_id":2880986,"body_markdown":"Don&#39;t use raw types in new code http://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it ; use `Comparator&lt;People&gt;`, `Comparable&lt;People&gt;`, `List&lt;People&gt;`, etc.","body":"Don&#39;t use raw types in new code <a href=\"http://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it\" title=\"what is a raw type and why shouldnt we use it\">stackoverflow.com/questions/2770321/&hellip;</a> ; use <code>Comparator&lt;People&gt;</code>, <code>Comparable&lt;People&gt;</code>, <code>List&lt;People&gt;</code>, etc."},{"owner":{"account_id":92471,"reputation":8283,"user_id":253425,"accept_rate":86,"display_name":"Dan"},"score":0,"creation_date":1273905570,"post_id":2839137,"comment_id":2881014,"body_markdown":"I changed the Comparator&lt;People&gt; but when I change Arraylist&lt;People&gt;, the Collections.sort gets an error","body":"I changed the Comparator&lt;People&gt; but when I change Arraylist&lt;People&gt;, the Collections.sort gets an error"},{"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":1,"creation_date":1273906045,"post_id":2839137,"comment_id":2881035,"body_markdown":"read my answer about the 2 overloads of `sort`. If you&#39;re told to use `Comparator&lt;People&gt;`, then use the 2-argument `sort`, not the 1-argument `sort` (which requires `People implements Comparable&lt;People&gt;`).","body":"read my answer about the 2 overloads of <code>sort</code>. If you&#39;re told to use <code>Comparator&lt;People&gt;</code>, then use the 2-argument <code>sort</code>, not the 1-argument <code>sort</code> (which requires <code>People implements Comparable&lt;People&gt;</code>)."}],"answers":[{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1273905605,"creation_date":1273904738,"answer_id":2839150,"question_id":2839137,"body_markdown":"Use `People implements Comparable&lt;People&gt;` instead; this defines the natural ordering for `People`.\r\n\r\nA `Comparator&lt;People&gt;` can also be defined in addition, but `People implements Comparator&lt;People&gt;` is not the right way of doing things.\r\n\r\nThe two overloads for `Collections.sort` are different:\r\n\r\n* `&lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list)`\r\n    * Sorts `Comparable` objects using their natural ordering\r\n* `&lt;T&gt; void sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c)`\r\n    * Sorts whatever using a compatible `Comparator`\r\n\r\nYou&#39;re confusing the two by trying to sort a `Comparator` (which is again why it doesn&#39;t make sense that `Person implements Comparator&lt;Person&gt;`). Again, to use `Collections.sort`, you need one of these to be true:\r\n\r\n* The type must be `Comparable` (use the 1-arg `sort`)\r\n* A `Comparator` for the type must be provided (use the 2-args `sort`)\r\n\r\n### Related questions\r\n\r\n* [When to use Comparable vs Comparator](https://stackoverflow.com/questions/2266827/when-to-use-comparable-vs-comparator)\r\n* [Sorting an ArrayList of Contacts](https://stackoverflow.com/questions/1814095/sorting-an-arraylist-of-contacts)\r\n\r\n---\r\n\r\nAlso, **do not use raw types in new code**. Raw types are unsafe, and it&#39;s provided only for compatibility.\r\n\r\nThat is, instead of this:\r\n\r\n    ArrayList peps = new ArrayList(); // BAD!!! No generic safety!\r\n\r\n\r\nyou should&#39;ve used the typesafe generic declaration like this:\r\n\r\n    List&lt;People&gt; peps = new ArrayList&lt;People&gt;(); // GOOD!!!\r\n\r\nYou will then find that **your code doesn&#39;t even compile!!** That would be a good thing, because there IS something wrong with the code (`Person` does not `implements Comparable&lt;Person&gt;`), **but because you used raw type, the compiler didn&#39;t check for this**, and instead you get a `ClassCastException` at run-time!!!\r\n\r\nThis should convince you to always use typesafe generic types in new code. Always.\r\n\r\n### See also\r\n\r\n* [What is a raw type and why shouldn&#39;t we use it?](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)","title":"How to use Comparator in Java to sort","body":"<p>Use <code>People implements Comparable&lt;People&gt;</code> instead; this defines the natural ordering for <code>People</code>.</p>\n\n<p>A <code>Comparator&lt;People&gt;</code> can also be defined in addition, but <code>People implements Comparator&lt;People&gt;</code> is not the right way of doing things.</p>\n\n<p>The two overloads for <code>Collections.sort</code> are different:</p>\n\n<ul>\n<li><code>&lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list)</code>\n\n<ul>\n<li>Sorts <code>Comparable</code> objects using their natural ordering</li>\n</ul></li>\n<li><code>&lt;T&gt; void sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c)</code>\n\n<ul>\n<li>Sorts whatever using a compatible <code>Comparator</code></li>\n</ul></li>\n</ul>\n\n<p>You're confusing the two by trying to sort a <code>Comparator</code> (which is again why it doesn't make sense that <code>Person implements Comparator&lt;Person&gt;</code>). Again, to use <code>Collections.sort</code>, you need one of these to be true:</p>\n\n<ul>\n<li>The type must be <code>Comparable</code> (use the 1-arg <code>sort</code>)</li>\n<li>A <code>Comparator</code> for the type must be provided (use the 2-args <code>sort</code>)</li>\n</ul>\n\n<h3>Related questions</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2266827/when-to-use-comparable-vs-comparator\">When to use Comparable vs Comparator</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1814095/sorting-an-arraylist-of-contacts\">Sorting an ArrayList of Contacts</a></li>\n</ul>\n\n<hr>\n\n<p>Also, <strong>do not use raw types in new code</strong>. Raw types are unsafe, and it's provided only for compatibility.</p>\n\n<p>That is, instead of this:</p>\n\n<pre><code>ArrayList peps = new ArrayList(); // BAD!!! No generic safety!\n</code></pre>\n\n<p>you should've used the typesafe generic declaration like this:</p>\n\n<pre><code>List&lt;People&gt; peps = new ArrayList&lt;People&gt;(); // GOOD!!!\n</code></pre>\n\n<p>You will then find that <strong>your code doesn't even compile!!</strong> That would be a good thing, because there IS something wrong with the code (<code>Person</code> does not <code>implements Comparable&lt;Person&gt;</code>), <strong>but because you used raw type, the compiler didn't check for this</strong>, and instead you get a <code>ClassCastException</code> at run-time!!!</p>\n\n<p>This should convince you to always use typesafe generic types in new code. Always.</p>\n\n<h3>See also</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it\">What is a raw type and why shouldn't we use it?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7795,"reputation":116405,"user_id":13663,"accept_rate":75,"display_name":"Will Hartung"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1273904985,"creation_date":1273904985,"answer_id":2839165,"question_id":2839137,"body_markdown":"You want to implement Comparable, not Comparator. You need to implement the compareTo method. You&#39;re close though. Comparator is a &quot;3rd party&quot; comparison routine. Comparable is that this object can be compared with another.\r\n\r\n    public int compareTo(Object obj1) {\r\n      People that = (People)obj1;\r\n      Integer p1 = this.getId();\r\n      Integer p2 = that.getid();\r\n    \r\n      if (p1 &gt; p2 ){\r\n       return 1;\r\n      }\r\n      else if (p1 &lt; p2){\r\n       return -1;\r\n      }\r\n      else\r\n       return 0;\r\n     }\r\n\r\nNote, you may want to check for nulls in here for getId..just in case.\r\n\r\n","title":"How to use Comparator in Java to sort","body":"<p>You want to implement Comparable, not Comparator. You need to implement the compareTo method. You're close though. Comparator is a \"3rd party\" comparison routine. Comparable is that this object can be compared with another.</p>\n\n<pre><code>public int compareTo(Object obj1) {\n  People that = (People)obj1;\n  Integer p1 = this.getId();\n  Integer p2 = that.getid();\n\n  if (p1 &gt; p2 ){\n   return 1;\n  }\n  else if (p1 &lt; p2){\n   return -1;\n  }\n  else\n   return 0;\n }\n</code></pre>\n\n<p>Note, you may want to check for nulls in here for getId..just in case.</p>\n"},{"tags":[],"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"down_vote_count":0,"up_vote_count":238,"is_accepted":false,"score":238,"last_activity_date":1456608057,"creation_date":1273905160,"answer_id":2839167,"question_id":2839137,"body_markdown":"There are a couple of awkward things with your example class:\r\n\r\n  * it&#39;s called People while it has a `price` and `info` (more something for objects, not people);\r\n  * when naming a class as a plural of something, it suggests it is an abstraction of more than one thing. \r\n\r\nAnyway, here&#39;s a demo of how to use a `Comparator&lt;T&gt;`:\r\n\r\n    public class ComparatorDemo {\r\n    \r\n        public static void main(String[] args) {\r\n            List&lt;Person&gt; people = Arrays.asList(\r\n                    new Person(&quot;Joe&quot;, 24),\r\n                    new Person(&quot;Pete&quot;, 18),\r\n                    new Person(&quot;Chris&quot;, 21)\r\n            );\r\n            Collections.sort(people, new LexicographicComparator());\r\n            System.out.println(people);\r\n            Collections.sort(people, new AgeComparator());\r\n            System.out.println(people);\r\n        }\r\n    }\r\n    \r\n    class LexicographicComparator implements Comparator&lt;Person&gt; {\r\n        @Override\r\n        public int compare(Person a, Person b) {\r\n            return a.name.compareToIgnoreCase(b.name);\r\n        }\r\n    }\r\n    \r\n    class AgeComparator implements Comparator&lt;Person&gt; {\r\n        @Override\r\n        public int compare(Person a, Person b) {\r\n            return a.age &lt; b.age ? -1 : a.age == b.age ? 0 : 1;\r\n        }\r\n    }\r\n    \r\n    class Person {\r\n    \r\n        String name;\r\n        int age;\r\n    \r\n        Person(String n, int a) {\r\n            name = n;\r\n            age = a;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;{name=%s, age=%d}&quot;, name, age);\r\n        }\r\n    }\r\n\r\n## EDIT\r\n\r\nAnd an equivalent Java 8 demo would look like this:\r\n\r\n    public class ComparatorDemo {\r\n    \r\n        public static void main(String[] args) {\r\n            List&lt;Person&gt; people = Arrays.asList(\r\n                    new Person(&quot;Joe&quot;, 24),\r\n                    new Person(&quot;Pete&quot;, 18),\r\n                    new Person(&quot;Chris&quot;, 21)\r\n            );\r\n            Collections.sort(people, (a, b) -&gt; a.name.compareToIgnoreCase(b.name));\r\n            System.out.println(people);\r\n            Collections.sort(people, (a, b) -&gt; a.age &lt; b.age ? -1 : a.age == b.age ? 0 : 1);\r\n            System.out.println(people);\r\n        }\r\n    }\r\n","title":"How to use Comparator in Java to sort","body":"<p>There are a couple of awkward things with your example class:</p>\n\n<ul>\n<li>it's called People while it has a <code>price</code> and <code>info</code> (more something for objects, not people);</li>\n<li>when naming a class as a plural of something, it suggests it is an abstraction of more than one thing. </li>\n</ul>\n\n<p>Anyway, here's a demo of how to use a <code>Comparator&lt;T&gt;</code>:</p>\n\n<pre><code>public class ComparatorDemo {\n\n    public static void main(String[] args) {\n        List&lt;Person&gt; people = Arrays.asList(\n                new Person(\"Joe\", 24),\n                new Person(\"Pete\", 18),\n                new Person(\"Chris\", 21)\n        );\n        Collections.sort(people, new LexicographicComparator());\n        System.out.println(people);\n        Collections.sort(people, new AgeComparator());\n        System.out.println(people);\n    }\n}\n\nclass LexicographicComparator implements Comparator&lt;Person&gt; {\n    @Override\n    public int compare(Person a, Person b) {\n        return a.name.compareToIgnoreCase(b.name);\n    }\n}\n\nclass AgeComparator implements Comparator&lt;Person&gt; {\n    @Override\n    public int compare(Person a, Person b) {\n        return a.age &lt; b.age ? -1 : a.age == b.age ? 0 : 1;\n    }\n}\n\nclass Person {\n\n    String name;\n    int age;\n\n    Person(String n, int a) {\n        name = n;\n        age = a;\n    }\n\n    @Override\n    public String toString() {\n        return String.format(\"{name=%s, age=%d}\", name, age);\n    }\n}\n</code></pre>\n\n<h2>EDIT</h2>\n\n<p>And an equivalent Java 8 demo would look like this:</p>\n\n<pre><code>public class ComparatorDemo {\n\n    public static void main(String[] args) {\n        List&lt;Person&gt; people = Arrays.asList(\n                new Person(\"Joe\", 24),\n                new Person(\"Pete\", 18),\n                new Person(\"Chris\", 21)\n        );\n        Collections.sort(people, (a, b) -&gt; a.name.compareToIgnoreCase(b.name));\n        System.out.println(people);\n        Collections.sort(people, (a, b) -&gt; a.age &lt; b.age ? -1 : a.age == b.age ? 0 : 1);\n        System.out.println(people);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"down_vote_count":0,"up_vote_count":203,"is_accepted":false,"score":203,"last_activity_date":1661546763,"creation_date":1402819355,"answer_id":24227670,"question_id":2839137,"body_markdown":"Here&#39;s a super short template to do the sorting right away :\r\n\r\n    Collections.sort(people, new Comparator&lt;Person&gt;() {\r\n       @Override\r\n       public int compare(final Person lhs, Person rhs) {\r\n         // TODO return 1 if rhs should be before lhs \r\n         //      return -1 if lhs should be before rhs\r\n         //      return 0 otherwise (meaning the order stays the same)\r\n       }\r\n     });\r\n\r\nIf it&#39;s hard to remember, try to just remember that it&#39;s similar (in terms of the sign of the number) to:\r\n\r\n     lhs-rhs \r\n\r\nThat&#39;s in case you want to sort in ascending order : from smallest number to largest number.","title":"How to use Comparator in Java to sort","body":"<p>Here's a super short template to do the sorting right away :</p>\n<pre><code>Collections.sort(people, new Comparator&lt;Person&gt;() {\n   @Override\n   public int compare(final Person lhs, Person rhs) {\n     // TODO return 1 if rhs should be before lhs \n     //      return -1 if lhs should be before rhs\n     //      return 0 otherwise (meaning the order stays the same)\n   }\n });\n</code></pre>\n<p>If it's hard to remember, try to just remember that it's similar (in terms of the sign of the number) to:</p>\n<pre><code> lhs-rhs \n</code></pre>\n<p>That's in case you want to sort in ascending order : from smallest number to largest number.</p>\n"},{"tags":[],"owner":{"account_id":74856,"reputation":3561,"user_id":214914,"accept_rate":96,"display_name":"NumberFour"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1554555752,"creation_date":1418239857,"answer_id":27409307,"question_id":2839137,"body_markdown":"For the sake of completeness, here&#39;s a simple one-liner `compare` method:\r\n\r\n    Collections.sort(people, new Comparator&lt;Person&gt;() {\r\n        @Override\r\n        public int compare(Person lhs, Person rhs) {  \r\n            return Integer.signum(lhs.getId() - rhs.getId());  \r\n        }\r\n    });","title":"How to use Comparator in Java to sort","body":"<p>For the sake of completeness, here's a simple one-liner <code>compare</code> method:</p>\n\n<pre><code>Collections.sort(people, new Comparator&lt;Person&gt;() {\n    @Override\n    public int compare(Person lhs, Person rhs) {  \n        return Integer.signum(lhs.getId() - rhs.getId());  \n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4870409,"reputation":23,"user_id":3927138,"display_name":"michal"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1437918303,"creation_date":1437672089,"answer_id":31594136,"question_id":2839137,"body_markdown":"You should use the overloaded sort(peps, new People()) method\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    \r\n    public class Test \r\n    {\r\n        public static void main(String[] args) \r\n        {\r\n            List&lt;People&gt; peps = new ArrayList&lt;&gt;();\r\n    \r\n            peps.add(new People(123, &quot;M&quot;, 14.25));\r\n            peps.add(new People(234, &quot;M&quot;, 6.21));\r\n            peps.add(new People(362, &quot;F&quot;, 9.23));\r\n            peps.add(new People(111, &quot;M&quot;, 65.99));\r\n            peps.add(new People(535, &quot;F&quot;, 9.23));\r\n    \r\n            Collections.sort(peps, new People().new ComparatorId());\r\n    \r\n            for (int i = 0; i &lt; peps.size(); i++)\r\n            {\r\n                System.out.println(peps.get(i));\r\n            }\r\n        }\r\n    }\r\n    \r\n    class People\r\n    {\r\n           private int id;\r\n           private String info;\r\n           private double price;\r\n    \r\n           public People()\r\n           {\r\n    \r\n           }\r\n    \r\n           public People(int newid, String newinfo, double newprice) {\r\n               setid(newid);\r\n               setinfo(newinfo);\r\n               setprice(newprice);\r\n           }\r\n    \r\n           public int getid() {\r\n               return id;\r\n           }\r\n    \r\n           public void setid(int id) {\r\n               this.id = id;\r\n           }\r\n    \r\n           public String getinfo() {\r\n               return info;\r\n           }\r\n    \r\n           public void setinfo(String info) {\r\n               this.info = info;\r\n           }\r\n    \r\n           public double getprice() {\r\n               return price;\r\n           }\r\n    \r\n           public void setprice(double price) {\r\n               this.price = price;\r\n           }\r\n    \r\n           class ComparatorId implements Comparator&lt;People&gt;\r\n           {\r\n    \r\n    \t\t@Override\r\n    \t\tpublic int compare(People obj1, People obj2) {\r\n    \t           Integer p1 = obj1.getid();\r\n    \t           Integer p2 = obj2.getid();\r\n    \r\n    \t           if (p1 &gt; p2) {\r\n    \t               return 1;\r\n    \t           } else if (p1 &lt; p2){\r\n    \t               return -1;\r\n    \t           } else {\r\n    \t               return 0;\r\n    \t           }\r\n    \t        }\r\n           }\r\n        }","title":"How to use Comparator in Java to sort","body":"<p>You should use the overloaded sort(peps, new People()) method</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\n\npublic class Test \n{\n    public static void main(String[] args) \n    {\n        List&lt;People&gt; peps = new ArrayList&lt;&gt;();\n\n        peps.add(new People(123, \"M\", 14.25));\n        peps.add(new People(234, \"M\", 6.21));\n        peps.add(new People(362, \"F\", 9.23));\n        peps.add(new People(111, \"M\", 65.99));\n        peps.add(new People(535, \"F\", 9.23));\n\n        Collections.sort(peps, new People().new ComparatorId());\n\n        for (int i = 0; i &lt; peps.size(); i++)\n        {\n            System.out.println(peps.get(i));\n        }\n    }\n}\n\nclass People\n{\n       private int id;\n       private String info;\n       private double price;\n\n       public People()\n       {\n\n       }\n\n       public People(int newid, String newinfo, double newprice) {\n           setid(newid);\n           setinfo(newinfo);\n           setprice(newprice);\n       }\n\n       public int getid() {\n           return id;\n       }\n\n       public void setid(int id) {\n           this.id = id;\n       }\n\n       public String getinfo() {\n           return info;\n       }\n\n       public void setinfo(String info) {\n           this.info = info;\n       }\n\n       public double getprice() {\n           return price;\n       }\n\n       public void setprice(double price) {\n           this.price = price;\n       }\n\n       class ComparatorId implements Comparator&lt;People&gt;\n       {\n\n        @Override\n        public int compare(People obj1, People obj2) {\n               Integer p1 = obj1.getid();\n               Integer p2 = obj2.getid();\n\n               if (p1 &gt; p2) {\n                   return 1;\n               } else if (p1 &lt; p2){\n                   return -1;\n               } else {\n                   return 0;\n               }\n            }\n       }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7064143,"reputation":41,"user_id":5408078,"display_name":"QuadBiker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1444111714,"creation_date":1444006783,"answer_id":32939963,"question_id":2839137,"body_markdown":"    public static Comparator&lt;JobSet&gt; JobEndTimeComparator = new Comparator&lt;JobSet&gt;() {\r\n        \t\tpublic int compare(JobSet j1, JobSet j2) {\r\n        \t\t\tint cost1 = j1.cost;\r\n        \t\t\tint cost2 = j2.cost;\r\n        \t\t\treturn cost1-cost2;\r\n        \t\t}\r\n        \t};\r\n        \t\r\n    \t","title":"How to use Comparator in Java to sort","body":"<pre><code>public static Comparator&lt;JobSet&gt; JobEndTimeComparator = new Comparator&lt;JobSet&gt;() {\n            public int compare(JobSet j1, JobSet j2) {\n                int cost1 = j1.cost;\n                int cost2 = j2.cost;\n                return cost1-cost2;\n            }\n        };\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2235146,"reputation":265,"user_id":1971740,"accept_rate":50,"display_name":"Akhil Gupta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480001978,"creation_date":1480001978,"answer_id":40790235,"question_id":2839137,"body_markdown":"The solution can be optimized in following way:\r\nFirstly, use a private inner class as the scope for the fields is to be the enclosing class TestPeople so as the implementation of class People won&#39;t get exposed to outer world. This can be understood in terms of creating an APIthat expects a sorted list of people\r\nSecondly, using the Lamba expression(java 8) which reduces the code, hence development effort\r\n\r\nHence code would be as below:\r\n\r\n    \r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.Comparator;\r\n    \r\n    public class TestPeople {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tArrayList&lt;People&gt; peps = new ArrayList&lt;&gt;();// Be specific, to avoid\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t// classCast Exception\r\n    \r\n    \t\tTestPeople test = new TestPeople();\r\n    \r\n    \t\tpeps.add(test.new People(123, &quot;M&quot;, 14.25));\r\n    \t\tpeps.add(test.new People(234, &quot;M&quot;, 6.21));\r\n    \t\tpeps.add(test.new People(362, &quot;F&quot;, 9.23));\r\n    \t\tpeps.add(test.new People(111, &quot;M&quot;, 65.99));\r\n    \t\tpeps.add(test.new People(535, &quot;F&quot;, 9.23));\r\n    \r\n    \t\t/*\r\n    \t\t * Collections.sort(peps);\r\n    \t\t * \r\n    \t\t * for (int i = 0; i &lt; peps.size(); i++){\r\n    \t\t * System.out.println(peps.get(i)); }\r\n    \t\t */\r\n    \r\n    \t\t// The above code can be replaced by followin:\r\n    \r\n    \t\tpeps.sort((People p1, People p2) -&gt; p1.getid() - p2.getid());\r\n    \r\n    \t\tpeps.forEach((p) -&gt; System.out.println(&quot; &quot; + p.toString()));\r\n    \r\n    \t}\r\n    \r\n    \tprivate class People {\r\n    \t\tprivate int id;\r\n    \r\n    \t\t@Override\r\n    \t\tpublic String toString() {\r\n    \t\t\treturn &quot;People [id=&quot; + id + &quot;, info=&quot; + info + &quot;, price=&quot; + price + &quot;]&quot;;\r\n    \t\t}\r\n    \r\n    \t\tprivate String info;\r\n    \t\tprivate double price;\r\n    \r\n    \t\tpublic People(int newid, String newinfo, double newprice) {\r\n    \t\t\tsetid(newid);\r\n    \t\t\tsetinfo(newinfo);\r\n    \t\t\tsetprice(newprice);\r\n    \t\t}\r\n    \r\n    \t\tpublic int getid() {\r\n    \t\t\treturn id;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setid(int id) {\r\n    \t\t\tthis.id = id;\r\n    \t\t}\r\n    \r\n    \t\tpublic String getinfo() {\r\n    \t\t\treturn info;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setinfo(String info) {\r\n    \t\t\tthis.info = info;\r\n    \t\t}\r\n    \r\n    \t\tpublic double getprice() {\r\n    \t\t\treturn price;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setprice(double price) {\r\n    \t\t\tthis.price = price;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n","title":"How to use Comparator in Java to sort","body":"<p>The solution can be optimized in following way:\nFirstly, use a private inner class as the scope for the fields is to be the enclosing class TestPeople so as the implementation of class People won't get exposed to outer world. This can be understood in terms of creating an APIthat expects a sorted list of people\nSecondly, using the Lamba expression(java 8) which reduces the code, hence development effort</p>\n\n<p>Hence code would be as below:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\n\npublic class TestPeople {\n    public static void main(String[] args) {\n        ArrayList&lt;People&gt; peps = new ArrayList&lt;&gt;();// Be specific, to avoid\n                                                    // classCast Exception\n\n        TestPeople test = new TestPeople();\n\n        peps.add(test.new People(123, \"M\", 14.25));\n        peps.add(test.new People(234, \"M\", 6.21));\n        peps.add(test.new People(362, \"F\", 9.23));\n        peps.add(test.new People(111, \"M\", 65.99));\n        peps.add(test.new People(535, \"F\", 9.23));\n\n        /*\n         * Collections.sort(peps);\n         * \n         * for (int i = 0; i &lt; peps.size(); i++){\n         * System.out.println(peps.get(i)); }\n         */\n\n        // The above code can be replaced by followin:\n\n        peps.sort((People p1, People p2) -&gt; p1.getid() - p2.getid());\n\n        peps.forEach((p) -&gt; System.out.println(\" \" + p.toString()));\n\n    }\n\n    private class People {\n        private int id;\n\n        @Override\n        public String toString() {\n            return \"People [id=\" + id + \", info=\" + info + \", price=\" + price + \"]\";\n        }\n\n        private String info;\n        private double price;\n\n        public People(int newid, String newinfo, double newprice) {\n            setid(newid);\n            setinfo(newinfo);\n            setprice(newprice);\n        }\n\n        public int getid() {\n            return id;\n        }\n\n        public void setid(int id) {\n            this.id = id;\n        }\n\n        public String getinfo() {\n            return info;\n        }\n\n        public void setinfo(String info) {\n            this.info = info;\n        }\n\n        public double getprice() {\n            return price;\n        }\n\n        public void setprice(double price) {\n            this.price = price;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":214333,"reputation":1988,"user_id":468249,"accept_rate":50,"display_name":"rince"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1489088668,"creation_date":1489088668,"answer_id":42704104,"question_id":2839137,"body_markdown":"Java 8 added a new way of making Comparators that reduces the amount of code you have to write, [Comparator.comparing][1]. Also check out [Comparator.reversed][2] \r\n\r\n\r\nHere&#39;s a sample\r\n\r\n    import org.junit.Test;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    \r\n    import static org.junit.Assert.assertTrue;\r\n    \r\n    public class ComparatorTest {\r\n\r\n        @Test\r\n        public void test() {\r\n            List&lt;Person&gt; peopleList = new ArrayList&lt;&gt;();\r\n            peopleList.add(new Person(&quot;A&quot;, 1000));\r\n            peopleList.add(new Person(&quot;B&quot;, 1));\r\n            peopleList.add(new Person(&quot;C&quot;, 50));\r\n            peopleList.add(new Person(&quot;Z&quot;, 500));\r\n            //sort by name, ascending\r\n            peopleList.sort(Comparator.comparing(Person::getName));\r\n            assertTrue(peopleList.get(0).getName().equals(&quot;A&quot;));\r\n            assertTrue(peopleList.get(peopleList.size() - 1).getName().equals(&quot;Z&quot;));\r\n            //sort by name, descending\r\n            peopleList.sort(Comparator.comparing(Person::getName).reversed());\r\n            assertTrue(peopleList.get(0).getName().equals(&quot;Z&quot;));\r\n            assertTrue(peopleList.get(peopleList.size() - 1).getName().equals(&quot;A&quot;));\r\n            //sort by age, ascending\r\n            peopleList.sort(Comparator.comparing(Person::getAge));\r\n            assertTrue(peopleList.get(0).getAge() == 1);\r\n            assertTrue(peopleList.get(peopleList.size() - 1).getAge() == 1000);\r\n            //sort by age, descending\r\n            peopleList.sort(Comparator.comparing(Person::getAge).reversed());\r\n            assertTrue(peopleList.get(0).getAge() == 1000);\r\n            assertTrue(peopleList.get(peopleList.size() - 1).getAge() == 1);\r\n        }\r\n    \r\n        class Person {\r\n    \r\n            String name;\r\n            int age;\r\n    \r\n            Person(String n, int a) {\r\n                name = n;\r\n                age = a;\r\n            }\r\n\r\n            public String getName() {\r\n                return name;\r\n            }\r\n    \r\n            public int getAge() {\r\n                return age;\r\n            }\r\n    \r\n            public void setName(String name) {\r\n                this.name = name;\r\n            }\r\n    \r\n            public void setAge(int age) {\r\n                this.age = age;\r\n            }\r\n        }\r\n    \r\n\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparing-java.util.function.Function-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#reversed--","title":"How to use Comparator in Java to sort","body":"<p>Java 8 added a new way of making Comparators that reduces the amount of code you have to write, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparing-java.util.function.Function-\" rel=\"noreferrer\">Comparator.comparing</a>. Also check out <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#reversed--\" rel=\"noreferrer\">Comparator.reversed</a> </p>\n\n<p>Here's a sample</p>\n\n<pre><code>import org.junit.Test;\n\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.List;\n\nimport static org.junit.Assert.assertTrue;\n\npublic class ComparatorTest {\n\n    @Test\n    public void test() {\n        List&lt;Person&gt; peopleList = new ArrayList&lt;&gt;();\n        peopleList.add(new Person(\"A\", 1000));\n        peopleList.add(new Person(\"B\", 1));\n        peopleList.add(new Person(\"C\", 50));\n        peopleList.add(new Person(\"Z\", 500));\n        //sort by name, ascending\n        peopleList.sort(Comparator.comparing(Person::getName));\n        assertTrue(peopleList.get(0).getName().equals(\"A\"));\n        assertTrue(peopleList.get(peopleList.size() - 1).getName().equals(\"Z\"));\n        //sort by name, descending\n        peopleList.sort(Comparator.comparing(Person::getName).reversed());\n        assertTrue(peopleList.get(0).getName().equals(\"Z\"));\n        assertTrue(peopleList.get(peopleList.size() - 1).getName().equals(\"A\"));\n        //sort by age, ascending\n        peopleList.sort(Comparator.comparing(Person::getAge));\n        assertTrue(peopleList.get(0).getAge() == 1);\n        assertTrue(peopleList.get(peopleList.size() - 1).getAge() == 1000);\n        //sort by age, descending\n        peopleList.sort(Comparator.comparing(Person::getAge).reversed());\n        assertTrue(peopleList.get(0).getAge() == 1000);\n        assertTrue(peopleList.get(peopleList.size() - 1).getAge() == 1);\n    }\n\n    class Person {\n\n        String name;\n        int age;\n\n        Person(String n, int a) {\n            name = n;\n            age = a;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public int getAge() {\n            return age;\n        }\n\n        public void setName(String name) {\n            this.name = name;\n        }\n\n        public void setAge(int age) {\n            this.age = age;\n        }\n    }\n\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489156872,"creation_date":1489156426,"answer_id":42720856,"question_id":2839137,"body_markdown":"Here&#39;s an example of a Comparator that will work for any zero arg method that returns a Comparable.  Does something like this exist in a jdk or library?\r\n\r\n\r\n    import java.lang.reflect.Method;\r\n    import java.util.Comparator;\r\n    \r\n    public class NamedMethodComparator implements Comparator&lt;Object&gt; {\r\n    \r\n    \t//\r\n    \t// instance variables\r\n    \t//\r\n    \r\n    \tprivate String methodName;\r\n    \r\n    \tprivate boolean isAsc;\r\n    \r\n    \t//\r\n    \t// constructor\r\n    \t//\r\n    \r\n    \tpublic NamedMethodComparator(String methodName, boolean isAsc) {\r\n    \t\tthis.methodName = methodName;\r\n    \t\tthis.isAsc = isAsc;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Method to compare two objects using the method named in the constructor.\r\n    \t */\r\n    \t@Override\r\n    \tpublic int compare(Object obj1, Object obj2) {\r\n    \t\tComparable comp1 = getValue(obj1, methodName);\r\n    \t\tComparable comp2 = getValue(obj2, methodName);\r\n    \t\tif (isAsc) {\r\n    \t\t\treturn comp1.compareTo(comp2);\r\n    \t\t} else {\r\n    \t\t\treturn comp2.compareTo(comp1);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t//\r\n    \t// implementation\r\n    \t//\r\n    \r\n    \tprivate Comparable getValue(Object obj, String methodName) {\r\n    \t\tMethod method = getMethod(obj, methodName);\r\n    \t\tComparable comp = getValue(obj, method);\r\n    \t\treturn comp;\r\n    \t}\r\n    \r\n\t\tprivate Method getMethod(Object obj, String methodName) {\r\n\t\t\ttry {\r\n\t\t\t\tClass[] signature = {};\r\n\t\t\t\tMethod method = obj.getClass().getMethod(methodName, signature);\r\n\t\t\t\treturn method;\r\n\t\t\t} catch (Exception exp) {\r\n\t\t\t\tthrow new RuntimeException(exp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n    \tprivate Comparable getValue(Object obj, Method method) {\r\n    \t\tObject[] args = {};\r\n    \t\ttry {\r\n    \t\t\tObject rtn = method.invoke(obj, args);\r\n    \t\t\tComparable comp = (Comparable) rtn;\r\n    \t\t\treturn comp;\r\n    \t\t} catch (Exception exp) {\r\n    \t\t\tthrow new RuntimeException(exp);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to use Comparator in Java to sort","body":"<p>Here's an example of a Comparator that will work for any zero arg method that returns a Comparable.  Does something like this exist in a jdk or library?</p>\n\n<pre><code>import java.lang.reflect.Method;\nimport java.util.Comparator;\n\npublic class NamedMethodComparator implements Comparator&lt;Object&gt; {\n\n    //\n    // instance variables\n    //\n\n    private String methodName;\n\n    private boolean isAsc;\n\n    //\n    // constructor\n    //\n\n    public NamedMethodComparator(String methodName, boolean isAsc) {\n        this.methodName = methodName;\n        this.isAsc = isAsc;\n    }\n\n    /**\n     * Method to compare two objects using the method named in the constructor.\n     */\n    @Override\n    public int compare(Object obj1, Object obj2) {\n        Comparable comp1 = getValue(obj1, methodName);\n        Comparable comp2 = getValue(obj2, methodName);\n        if (isAsc) {\n            return comp1.compareTo(comp2);\n        } else {\n            return comp2.compareTo(comp1);\n        }\n    }\n\n    //\n    // implementation\n    //\n\n    private Comparable getValue(Object obj, String methodName) {\n        Method method = getMethod(obj, methodName);\n        Comparable comp = getValue(obj, method);\n        return comp;\n    }\n\n    private Method getMethod(Object obj, String methodName) {\n        try {\n            Class[] signature = {};\n            Method method = obj.getClass().getMethod(methodName, signature);\n            return method;\n        } catch (Exception exp) {\n            throw new RuntimeException(exp);\n        }\n    }\n\n    private Comparable getValue(Object obj, Method method) {\n        Object[] args = {};\n        try {\n            Object rtn = method.invoke(obj, args);\n            Comparable comp = (Comparable) rtn;\n            return comp;\n        } catch (Exception exp) {\n            throw new RuntimeException(exp);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5260987,"reputation":289,"user_id":11129015,"display_name":"pooja jardosh"},"down_vote_count":15,"up_vote_count":0,"is_accepted":false,"score":-15,"last_activity_date":1627833974,"creation_date":1557989852,"answer_id":56162513,"question_id":2839137,"body_markdown":"Do not waste time implementing Sorting Algorithm by your own. Instead use `Collections.sort()` to sort data.","title":"How to use Comparator in Java to sort","body":"<p>Do not waste time implementing Sorting Algorithm by your own. Instead use <code>Collections.sort()</code> to sort data.</p>\n"},{"tags":[],"owner":{"account_id":7786269,"reputation":521,"user_id":5890981,"accept_rate":75,"display_name":"CoderSam"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1591513784,"creation_date":1561296921,"answer_id":56724403,"question_id":2839137,"body_markdown":"Two corrections:\r\n\r\n1. You have to make an `ArrayList` of `People` objects:\r\n\r\n        ArrayList&lt;People&gt; preps = new ArrayList&lt;People&gt;(); \r\n\r\n2. After adding the objects to the preps, use: \r\n\r\n        Collections.sort(preps, new CompareId());\r\n\r\nAlso, add a `CompareId` class as: \r\n\r\n```\r\nclass CompareId implements Comparator {  \r\n    public int compare(Object obj1, Object obj2) {  \r\n        People t1 = (People)obj1;  \r\n        People t2 = (People)obj2;  \r\n  \r\n        if (t1.marks &gt; t2.marks)  \r\n            return 1;   \r\n        else  \r\n            return -1;\r\n    }  \r\n}\r\n```","title":"How to use Comparator in Java to sort","body":"<p>Two corrections:</p>\n\n<ol>\n<li><p>You have to make an <code>ArrayList</code> of <code>People</code> objects:</p>\n\n<pre><code>ArrayList&lt;People&gt; preps = new ArrayList&lt;People&gt;(); \n</code></pre></li>\n<li><p>After adding the objects to the preps, use: </p>\n\n<pre><code>Collections.sort(preps, new CompareId());\n</code></pre></li>\n</ol>\n\n<p>Also, add a <code>CompareId</code> class as: </p>\n\n<pre><code>class CompareId implements Comparator {  \n    public int compare(Object obj1, Object obj2) {  \n        People t1 = (People)obj1;  \n        People t2 = (People)obj2;  \n\n        if (t1.marks &gt; t2.marks)  \n            return 1;   \n        else  \n            return -1;\n    }  \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4148170,"reputation":79,"user_id":3401332,"display_name":"Vrajendra Singh Mandloi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563613055,"creation_date":1563551250,"answer_id":57115819,"question_id":2839137,"body_markdown":"Here is my answer for a simple comparator tool\r\n\r\n    public class Comparator {\r\n\tpublic boolean isComparatorRunning  = false;\r\n\tpublic void compareTableColumns(List&lt;String&gt; tableNames) {\r\n\t\tif(!isComparatorRunning) {\r\n\t\t\tisComparatorRunning = true;\r\n\t\t\ttry {\r\n\t\t\t\tfor (String schTableName : tableNames) {\r\n\t\t\t\t\tMap&lt;String, String&gt; schemaTableMap = ComparatorUtil.getSchemaTableMap(schTableName); \r\n\t\t\t\t\tMap&lt;String, ColumnInfo&gt; primaryColMap = ComparatorUtil.getColumnMetadataMap(DbConnectionRepository.getConnectionOne(), schemaTableMap);\r\n\t\t\t\t\tMap&lt;String, ColumnInfo&gt; secondaryColMap = ComparatorUtil.getColumnMetadataMap(DbConnectionRepository.getConnectionTwo(), schemaTableMap);\r\n\t\t\t\t\tComparatorUtil.publishColumnInfoOutput(&quot;Comparing table : &quot;+ schemaTableMap.get(CompConstants.TABLE_NAME));\r\n\t\t\t\t\tcompareColumns(primaryColMap, secondaryColMap);\r\n\t\t\t\t}\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tComparatorUtil.publishColumnInfoOutput(&quot;ERROR&quot;+e.getMessage());\r\n\t\t\t}\r\n\t\t\tisComparatorRunning = false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void compareColumns(Map&lt;String, ColumnInfo&gt; primaryColMap, Map&lt;String, ColumnInfo&gt; secondaryColMap) {\r\n\t\ttry {\r\n\t\t\tboolean isEqual = true;\r\n\t\t\tfor(Map.Entry&lt;String, ColumnInfo&gt; entry : primaryColMap.entrySet()) {\r\n\t\t\t\tString columnName = entry.getKey();\r\n\t\t\t\tColumnInfo primaryColInfo = entry.getValue();\r\n\t\t\t\tColumnInfo secondaryColInfo = secondaryColMap.remove(columnName);\r\n\t\t\t\tif(secondaryColInfo == null) {\r\n\t\t\t\t\t// column is not present in Secondary Environment\r\n\t\t\t\t\tComparatorUtil.publishColumnInfoOutput(&quot;ALTER&quot;, primaryColInfo);\r\n\t\t\t\t\tisEqual = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(!primaryColInfo.equals(secondaryColInfo)) {\r\n\t\t\t\t\tisEqual = false;\r\n\t\t\t\t\t// Column not equal in secondary env\r\n\t\t\t\t\tComparatorUtil.publishColumnInfoOutput(&quot;MODIFY&quot;, primaryColInfo);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!secondaryColMap.isEmpty()) {\r\n\t\t\t\tisEqual = false;\r\n\t\t\t\tfor(Map.Entry&lt;String, ColumnInfo&gt; entry : secondaryColMap.entrySet()) {\r\n\t\t\t\t\t// column is not present in Primary Environment\r\n\t\t\t\t\tComparatorUtil.publishColumnInfoOutput(&quot;DROP&quot;, entry.getValue());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(isEqual) {\r\n\t\t\t\tComparatorUtil.publishColumnInfoOutput(&quot;--Exact Match&quot;);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\tComparatorUtil.publishColumnInfoOutput(&quot;ERROR&quot;+e.getMessage());\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void compareTableColumnsValues(String primaryTableName, String primaryColumnNames, String primaryCondition, String primaryKeyColumn, \r\n\t\t\tString secTableName, String secColumnNames, String secCondition, String secKeyColumn) {\r\n\t\tif(!isComparatorRunning) {\r\n\t\t\tisComparatorRunning = true;\r\n\t\t\tConnection conn1 = DbConnectionRepository.getConnectionOne();\r\n\t\t\tConnection conn2 = DbConnectionRepository.getConnectionTwo();\r\n\t\t\t\r\n\t\t\tString query1 = buildQuery(primaryTableName, primaryColumnNames, primaryCondition, primaryKeyColumn);\r\n\t\t\tString query2 = buildQuery(secTableName, secColumnNames, secCondition, secKeyColumn);\r\n\t\t\ttry {\r\n\t\t\t\tMap&lt;String,Map&lt;String, Object&gt;&gt; query1Data = executeAndRefactorData(conn1, query1, primaryKeyColumn);\r\n\t\t\t\tMap&lt;String,Map&lt;String, Object&gt;&gt; query2Data = executeAndRefactorData(conn2, query2, secKeyColumn);\r\n\t\t\t\t\r\n\t\t\t\tfor(Map.Entry&lt;String,Map&lt;String, Object&gt;&gt; entry : query1Data.entrySet()) {\r\n\t\t\t\t\tString key = entry.getKey();\r\n\t\t\t\t\tMap&lt;String, Object&gt; value = entry.getValue();\r\n\t\t\t\t\tMap&lt;String, Object&gt; secondaryValue = query2Data.remove(key);\r\n\t\t\t\t\tif(secondaryValue == null) {\r\n\t\t\t\t\t\tComparatorUtil.publishColumnValuesInfoOutput(&quot;NO SUCH VALUE AVAILABLE IN SECONDARY DB &quot;+ value.toString());\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcompareMap(value, secondaryValue, key);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(!query2Data.isEmpty()) {\r\n\t\t\t\t\tComparatorUtil.publishColumnValuesInfoOutput(&quot;Extra Values in Secondary table &quot;+ ((Map)query2Data.values()).values().toString());\r\n\t\t\t\t}\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tComparatorUtil.publishColumnValuesInfoOutput(&quot;ERROR&quot;+e.getMessage());\r\n\t\t\t}\r\n\t\t\tisComparatorRunning = false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate void compareMap(Map&lt;String, Object&gt; primaryValues, Map&lt;String, Object&gt; secondaryValues, String columnIdentification) {\r\n\t\tfor(Map.Entry&lt;String, Object&gt; entry : primaryValues.entrySet()) {\r\n\t\t\tString key = entry.getKey();\r\n\t\t\tObject value = entry.getValue();\r\n\t\t\tObject secValue = secondaryValues.get(key);\r\n\t\t\tif(value!=null &amp;&amp; secValue!=null &amp;&amp; !String.valueOf(value).equalsIgnoreCase(String.valueOf(secValue))) {\r\n\t\t\t\tComparatorUtil.publishColumnValuesInfoOutput(columnIdentification+&quot; : Secondary Table does not match value (&quot;+ value +&quot;) for column (&quot;+ key+&quot;)&quot;);\r\n\t\t\t}\r\n\t\t\tif(value==null &amp;&amp; secValue!=null) {\r\n\t\t\t\tComparatorUtil.publishColumnValuesInfoOutput(columnIdentification+&quot; : Values not available in primary table for column &quot;+ key);\r\n\t\t\t}\r\n\t\t\tif(value!=null &amp;&amp; secValue==null) {\r\n\t\t\t\tComparatorUtil.publishColumnValuesInfoOutput(columnIdentification+&quot; : Values not available in Secondary table for column &quot;+ key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate String buildQuery(String tableName, String column, String condition, String keyCol) {\r\n\t\tif(!&quot;*&quot;.equalsIgnoreCase(column)) {\r\n\t\t\tString[] keyColArr = keyCol.split(&quot;,&quot;);\r\n\t\t\tfor(String key: keyColArr) {\r\n\t\t\t\tif(!column.contains(key.trim())) {\r\n\t\t\t\t\tcolumn+=&quot;,&quot;+key.trim();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tStringBuilder queryBuilder = new StringBuilder();\r\n\t\tqueryBuilder.append(&quot;select &quot;+column+&quot; from &quot;+ tableName);\r\n\t\tif(!ComparatorUtil.isNullorEmpty(condition)) {\r\n\t\t\tqueryBuilder.append(&quot; where 1=1 and &quot;+condition);\r\n\t\t}\r\n\t\treturn queryBuilder.toString();\r\n\t}\r\n\t\r\n\tprivate Map&lt;String,Map&lt;String, Object&gt;&gt; executeAndRefactorData(Connection connection, String query, String keyColumn) {\r\n\t\tMap&lt;String,Map&lt;String, Object&gt;&gt; result = new HashMap&lt;String, Map&lt;String,Object&gt;&gt;();\r\n\t\ttry {\r\n\t\t\tPreparedStatement preparedStatement = connection.prepareStatement(query);\r\n\t\t\tResultSet resultSet = preparedStatement.executeQuery();\r\n\t        resultSet.setFetchSize(1000);\r\n\t        if (resultSet != null &amp;&amp; !resultSet.isClosed()) {\r\n\t        \twhile (resultSet.next()) {\r\n\t\t\t\t\tMap&lt;String, Object&gt; columnValueDetails = new HashMap&lt;String, Object&gt;();\r\n\t\t\t\t\tint columnCount = resultSet.getMetaData().getColumnCount();\r\n\t\t\t\t\tfor (int i=1; i&lt;=columnCount; i++) {\r\n\t\t\t\t\t\tString columnName = String.valueOf(resultSet.getMetaData().getColumnName(i));\r\n\t\t\t\t\t\tObject columnValue = resultSet.getObject(columnName);\r\n\t\t\t\t\t\tcolumnValueDetails.put(columnName, columnValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tString[] keys = keyColumn.split(&quot;,&quot;);\r\n\t\t\t\t\tString newKey = &quot;&quot;;\r\n\t\t\t\t\tfor(int j=0; j&lt;keys.length; j++) {\r\n\t\t\t\t\t\tnewKey += String.valueOf(columnValueDetails.get(keys[j]));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult.put(newKey , columnValueDetails);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (SQLException e) {\r\n\t\t\tComparatorUtil.publishColumnValuesInfoOutput(&quot;ERROR&quot;+e.getMessage());\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nUtility Tool for the same\r\n\r\n    public class ComparatorUtil {\r\n\t\r\n\tpublic static Map&lt;String, String&gt; getSchemaTableMap(String tableNameWithSchema) {\r\n\t\tif(isNullorEmpty(tableNameWithSchema)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tMap&lt;String, String&gt; result = new LinkedHashMap&lt;&gt;();\r\n\t\tint index = tableNameWithSchema.indexOf(&quot;.&quot;);\r\n\t\tString schemaName = tableNameWithSchema.substring(0, index);\r\n\t\tString tableName = tableNameWithSchema.substring(index+1);\r\n\t\tresult.put(CompConstants.SCHEMA_NAME, schemaName);\r\n\t\tresult.put(CompConstants.TABLE_NAME, tableName);\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tpublic static Map&lt;String, ColumnInfo&gt; getColumnMetadataMap(Connection conn, Map&lt;String, String&gt; schemaTableMap) {\r\n\t\ttry {\r\n\t\t\tString schemaName = schemaTableMap.get(CompConstants.SCHEMA_NAME);\r\n\t\t\tString tableName = schemaTableMap.get(CompConstants.TABLE_NAME);\r\n\t\t\tResultSet resultSetConnOne = conn.getMetaData().getColumns(null, schemaName, tableName, null);\r\n\t\t\tMap&lt;String, ColumnInfo&gt; resultSetTwoColInfo = getColumnInfo(schemaName, tableName, resultSetConnOne);\r\n\t\t\treturn resultSetTwoColInfo;\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t/* Number Type mapping\r\n\t * 12-----VARCHAR\r\n\t * 3-----DECIMAL\r\n\t * 93-----TIMESTAMP\r\n\t * 1111-----OTHER\r\n\t*/\r\n\tpublic static Map&lt;String, ColumnInfo&gt; getColumnInfo(String schemaName, String tableName, ResultSet columns) {\r\n\t\ttry {\r\n\t\t\tMap&lt;String, ColumnInfo&gt; tableColumnInfo = new LinkedHashMap&lt;String, ColumnInfo&gt;();\r\n\t\t\twhile (columns.next()) {\r\n\t\t\t\tColumnInfo columnInfo = new ColumnInfo();\r\n\t\t\t\tcolumnInfo.setSchemaName(schemaName);\r\n\t\t\t\tcolumnInfo.setTableName(tableName);\r\n\t\t\t\tcolumnInfo.setColumnName(columns.getString(&quot;COLUMN_NAME&quot;));\r\n\t\t\t\tcolumnInfo.setDatatype(columns.getString(&quot;DATA_TYPE&quot;));\r\n\t\t\t\tcolumnInfo.setColumnsize(columns.getString(&quot;COLUMN_SIZE&quot;));\r\n\t\t\t\tcolumnInfo.setDecimaldigits(columns.getString(&quot;DECIMAL_DIGITS&quot;));\r\n\t\t\t\tcolumnInfo.setIsNullable(columns.getString(&quot;IS_NULLABLE&quot;));\r\n\t\t\t\ttableColumnInfo.put(columnInfo.getColumnName(), columnInfo);\r\n\t\t\t}\r\n\t\t\treturn tableColumnInfo;\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic static boolean isNullOrEmpty(Object obj) {\r\n        if (obj == null)\r\n            return true;\r\n        if (String.valueOf(obj).equalsIgnoreCase(&quot;NULL&quot;)) \r\n        \treturn true;\r\n        if (obj.toString().trim().length() == 0)\r\n            return true;\r\n        return false;\r\n    }\r\n\t\r\n\t\r\n\t\r\n\tpublic static boolean isNullorEmpty(String str) {\r\n\t\tif(str == null)\r\n\t\t\treturn true;\r\n\t\tif(str.trim().length() == 0) \r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tpublic static void publishColumnInfoOutput(String type, ColumnInfo columnInfo) {\r\n\t\tString str = &quot;ALTER TABLE &quot;+columnInfo.getSchemaName()+&quot;.&quot;+columnInfo.getTableName();\r\n\t\tswitch(type.toUpperCase()) {\r\n\t\t\tcase &quot;ALTER&quot;:\r\n\t\t\t\tif(&quot;NUMBER&quot;.equalsIgnoreCase(columnInfo.getDatatype()) || &quot;DATE&quot;.equalsIgnoreCase(columnInfo.getDatatype())) {\r\n\t\t\t\t\tstr += &quot; ADD (&quot;+columnInfo.getColumnName()+&quot; &quot;+ columnInfo.getDatatype()+&quot;);&quot;;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstr += &quot; ADD (&quot;+columnInfo.getColumnName()+&quot; &quot;+ columnInfo.getDatatype() +&quot;(&quot;+columnInfo.getColumnsize()+&quot;));&quot;;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;DROP&quot;:\r\n\t\t\t\tstr += &quot; DROP (&quot;+columnInfo.getColumnName()+&quot;);&quot;;\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;MODIFY&quot;:\r\n\t\t\t\tif(&quot;NUMBER&quot;.equalsIgnoreCase(columnInfo.getDatatype()) || &quot;DATE&quot;.equalsIgnoreCase(columnInfo.getDatatype())) {\r\n\t\t\t\t\tstr += &quot; MODIFY (&quot;+columnInfo.getColumnName()+&quot; &quot;+ columnInfo.getDatatype()+&quot;);&quot;;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstr += &quot; MODIFY (&quot;+columnInfo.getColumnName()+&quot; &quot;+ columnInfo.getDatatype() +&quot;(&quot;+columnInfo.getColumnsize()+&quot;));&quot;;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tpublishColumnInfoOutput(str);\r\n\t}\r\n\t\r\n\tpublic static Map&lt;Integer, String&gt; allJdbcTypeName = null;\r\n\r\n\tpublic static Map&lt;Integer, String&gt; getAllJdbcTypeNames() {\r\n\t\tMap&lt;Integer, String&gt; result = new HashMap&lt;Integer, String&gt;();\r\n\t\tif(allJdbcTypeName != null)\r\n\t\t\treturn allJdbcTypeName;\r\n\t\ttry {\r\n\t\t\tfor (Field field : java.sql.Types.class.getFields()) {\r\n\t\t\t\tresult.put((Integer) field.get(null), field.getName());\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn allJdbcTypeName=result;\r\n\t}\r\n\t\r\n\tpublic static String getStringPlaces(String[] attribs) {\r\n\t\tString params = &quot;&quot;;\r\n\t\tfor(int i=0; i&lt;attribs.length; i++) { params += &quot;?,&quot;; }\r\n\t\treturn params.substring(0, params.length()-1);\r\n\t}\r\n}\r\n\r\nColumn Info Class \r\n\r\n    public class ColumnInfo {\r\n\tprivate String schemaName;\r\n\tprivate String tableName;\r\n\tprivate String columnName;\r\n\tprivate String datatype;\r\n\tprivate String columnsize;\r\n\tprivate String decimaldigits;\r\n\tprivate String isNullable;","title":"How to use Comparator in Java to sort","body":"<p>Here is my answer for a simple comparator tool</p>\n\n<pre><code>public class Comparator {\npublic boolean isComparatorRunning  = false;\npublic void compareTableColumns(List&lt;String&gt; tableNames) {\n    if(!isComparatorRunning) {\n        isComparatorRunning = true;\n        try {\n            for (String schTableName : tableNames) {\n                Map&lt;String, String&gt; schemaTableMap = ComparatorUtil.getSchemaTableMap(schTableName); \n                Map&lt;String, ColumnInfo&gt; primaryColMap = ComparatorUtil.getColumnMetadataMap(DbConnectionRepository.getConnectionOne(), schemaTableMap);\n                Map&lt;String, ColumnInfo&gt; secondaryColMap = ComparatorUtil.getColumnMetadataMap(DbConnectionRepository.getConnectionTwo(), schemaTableMap);\n                ComparatorUtil.publishColumnInfoOutput(\"Comparing table : \"+ schemaTableMap.get(CompConstants.TABLE_NAME));\n                compareColumns(primaryColMap, secondaryColMap);\n            }\n        } catch (Exception e) {\n            ComparatorUtil.publishColumnInfoOutput(\"ERROR\"+e.getMessage());\n        }\n        isComparatorRunning = false;\n    }\n}\n\npublic void compareColumns(Map&lt;String, ColumnInfo&gt; primaryColMap, Map&lt;String, ColumnInfo&gt; secondaryColMap) {\n    try {\n        boolean isEqual = true;\n        for(Map.Entry&lt;String, ColumnInfo&gt; entry : primaryColMap.entrySet()) {\n            String columnName = entry.getKey();\n            ColumnInfo primaryColInfo = entry.getValue();\n            ColumnInfo secondaryColInfo = secondaryColMap.remove(columnName);\n            if(secondaryColInfo == null) {\n                // column is not present in Secondary Environment\n                ComparatorUtil.publishColumnInfoOutput(\"ALTER\", primaryColInfo);\n                isEqual = false;\n                continue;\n            }\n            if(!primaryColInfo.equals(secondaryColInfo)) {\n                isEqual = false;\n                // Column not equal in secondary env\n                ComparatorUtil.publishColumnInfoOutput(\"MODIFY\", primaryColInfo);\n            }\n        }\n        if(!secondaryColMap.isEmpty()) {\n            isEqual = false;\n            for(Map.Entry&lt;String, ColumnInfo&gt; entry : secondaryColMap.entrySet()) {\n                // column is not present in Primary Environment\n                ComparatorUtil.publishColumnInfoOutput(\"DROP\", entry.getValue());\n            }\n        }\n\n        if(isEqual) {\n            ComparatorUtil.publishColumnInfoOutput(\"--Exact Match\");\n        }\n    } catch (Exception e) {\n        ComparatorUtil.publishColumnInfoOutput(\"ERROR\"+e.getMessage());\n    }\n}\n\npublic void compareTableColumnsValues(String primaryTableName, String primaryColumnNames, String primaryCondition, String primaryKeyColumn, \n        String secTableName, String secColumnNames, String secCondition, String secKeyColumn) {\n    if(!isComparatorRunning) {\n        isComparatorRunning = true;\n        Connection conn1 = DbConnectionRepository.getConnectionOne();\n        Connection conn2 = DbConnectionRepository.getConnectionTwo();\n\n        String query1 = buildQuery(primaryTableName, primaryColumnNames, primaryCondition, primaryKeyColumn);\n        String query2 = buildQuery(secTableName, secColumnNames, secCondition, secKeyColumn);\n        try {\n            Map&lt;String,Map&lt;String, Object&gt;&gt; query1Data = executeAndRefactorData(conn1, query1, primaryKeyColumn);\n            Map&lt;String,Map&lt;String, Object&gt;&gt; query2Data = executeAndRefactorData(conn2, query2, secKeyColumn);\n\n            for(Map.Entry&lt;String,Map&lt;String, Object&gt;&gt; entry : query1Data.entrySet()) {\n                String key = entry.getKey();\n                Map&lt;String, Object&gt; value = entry.getValue();\n                Map&lt;String, Object&gt; secondaryValue = query2Data.remove(key);\n                if(secondaryValue == null) {\n                    ComparatorUtil.publishColumnValuesInfoOutput(\"NO SUCH VALUE AVAILABLE IN SECONDARY DB \"+ value.toString());\n                    continue;\n                }\n                compareMap(value, secondaryValue, key);\n            }\n\n            if(!query2Data.isEmpty()) {\n                ComparatorUtil.publishColumnValuesInfoOutput(\"Extra Values in Secondary table \"+ ((Map)query2Data.values()).values().toString());\n            }\n        } catch (Exception e) {\n            ComparatorUtil.publishColumnValuesInfoOutput(\"ERROR\"+e.getMessage());\n        }\n        isComparatorRunning = false;\n    }\n}\n\nprivate void compareMap(Map&lt;String, Object&gt; primaryValues, Map&lt;String, Object&gt; secondaryValues, String columnIdentification) {\n    for(Map.Entry&lt;String, Object&gt; entry : primaryValues.entrySet()) {\n        String key = entry.getKey();\n        Object value = entry.getValue();\n        Object secValue = secondaryValues.get(key);\n        if(value!=null &amp;&amp; secValue!=null &amp;&amp; !String.valueOf(value).equalsIgnoreCase(String.valueOf(secValue))) {\n            ComparatorUtil.publishColumnValuesInfoOutput(columnIdentification+\" : Secondary Table does not match value (\"+ value +\") for column (\"+ key+\")\");\n        }\n        if(value==null &amp;&amp; secValue!=null) {\n            ComparatorUtil.publishColumnValuesInfoOutput(columnIdentification+\" : Values not available in primary table for column \"+ key);\n        }\n        if(value!=null &amp;&amp; secValue==null) {\n            ComparatorUtil.publishColumnValuesInfoOutput(columnIdentification+\" : Values not available in Secondary table for column \"+ key);\n        }\n    }\n}\n\nprivate String buildQuery(String tableName, String column, String condition, String keyCol) {\n    if(!\"*\".equalsIgnoreCase(column)) {\n        String[] keyColArr = keyCol.split(\",\");\n        for(String key: keyColArr) {\n            if(!column.contains(key.trim())) {\n                column+=\",\"+key.trim();\n            }\n        }\n    }\n    StringBuilder queryBuilder = new StringBuilder();\n    queryBuilder.append(\"select \"+column+\" from \"+ tableName);\n    if(!ComparatorUtil.isNullorEmpty(condition)) {\n        queryBuilder.append(\" where 1=1 and \"+condition);\n    }\n    return queryBuilder.toString();\n}\n\nprivate Map&lt;String,Map&lt;String, Object&gt;&gt; executeAndRefactorData(Connection connection, String query, String keyColumn) {\n    Map&lt;String,Map&lt;String, Object&gt;&gt; result = new HashMap&lt;String, Map&lt;String,Object&gt;&gt;();\n    try {\n        PreparedStatement preparedStatement = connection.prepareStatement(query);\n        ResultSet resultSet = preparedStatement.executeQuery();\n        resultSet.setFetchSize(1000);\n        if (resultSet != null &amp;&amp; !resultSet.isClosed()) {\n            while (resultSet.next()) {\n                Map&lt;String, Object&gt; columnValueDetails = new HashMap&lt;String, Object&gt;();\n                int columnCount = resultSet.getMetaData().getColumnCount();\n                for (int i=1; i&lt;=columnCount; i++) {\n                    String columnName = String.valueOf(resultSet.getMetaData().getColumnName(i));\n                    Object columnValue = resultSet.getObject(columnName);\n                    columnValueDetails.put(columnName, columnValue);\n                }\n                String[] keys = keyColumn.split(\",\");\n                String newKey = \"\";\n                for(int j=0; j&lt;keys.length; j++) {\n                    newKey += String.valueOf(columnValueDetails.get(keys[j]));\n                }\n                result.put(newKey , columnValueDetails);\n            }\n        }\n\n    } catch (SQLException e) {\n        ComparatorUtil.publishColumnValuesInfoOutput(\"ERROR\"+e.getMessage());\n    }\n    return result;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Utility Tool for the same</p>\n\n<pre><code>public class ComparatorUtil {\n\npublic static Map&lt;String, String&gt; getSchemaTableMap(String tableNameWithSchema) {\n    if(isNullorEmpty(tableNameWithSchema)) {\n        return null;\n    }\n    Map&lt;String, String&gt; result = new LinkedHashMap&lt;&gt;();\n    int index = tableNameWithSchema.indexOf(\".\");\n    String schemaName = tableNameWithSchema.substring(0, index);\n    String tableName = tableNameWithSchema.substring(index+1);\n    result.put(CompConstants.SCHEMA_NAME, schemaName);\n    result.put(CompConstants.TABLE_NAME, tableName);\n    return result;\n}\n\npublic static Map&lt;String, ColumnInfo&gt; getColumnMetadataMap(Connection conn, Map&lt;String, String&gt; schemaTableMap) {\n    try {\n        String schemaName = schemaTableMap.get(CompConstants.SCHEMA_NAME);\n        String tableName = schemaTableMap.get(CompConstants.TABLE_NAME);\n        ResultSet resultSetConnOne = conn.getMetaData().getColumns(null, schemaName, tableName, null);\n        Map&lt;String, ColumnInfo&gt; resultSetTwoColInfo = getColumnInfo(schemaName, tableName, resultSetConnOne);\n        return resultSetTwoColInfo;\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n\n/* Number Type mapping\n * 12-----VARCHAR\n * 3-----DECIMAL\n * 93-----TIMESTAMP\n * 1111-----OTHER\n*/\npublic static Map&lt;String, ColumnInfo&gt; getColumnInfo(String schemaName, String tableName, ResultSet columns) {\n    try {\n        Map&lt;String, ColumnInfo&gt; tableColumnInfo = new LinkedHashMap&lt;String, ColumnInfo&gt;();\n        while (columns.next()) {\n            ColumnInfo columnInfo = new ColumnInfo();\n            columnInfo.setSchemaName(schemaName);\n            columnInfo.setTableName(tableName);\n            columnInfo.setColumnName(columns.getString(\"COLUMN_NAME\"));\n            columnInfo.setDatatype(columns.getString(\"DATA_TYPE\"));\n            columnInfo.setColumnsize(columns.getString(\"COLUMN_SIZE\"));\n            columnInfo.setDecimaldigits(columns.getString(\"DECIMAL_DIGITS\"));\n            columnInfo.setIsNullable(columns.getString(\"IS_NULLABLE\"));\n            tableColumnInfo.put(columnInfo.getColumnName(), columnInfo);\n        }\n        return tableColumnInfo;\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n\npublic static boolean isNullOrEmpty(Object obj) {\n    if (obj == null)\n        return true;\n    if (String.valueOf(obj).equalsIgnoreCase(\"NULL\")) \n        return true;\n    if (obj.toString().trim().length() == 0)\n        return true;\n    return false;\n}\n\n\n\npublic static boolean isNullorEmpty(String str) {\n    if(str == null)\n        return true;\n    if(str.trim().length() == 0) \n        return true;\n    return false;\n}\n\npublic static void publishColumnInfoOutput(String type, ColumnInfo columnInfo) {\n    String str = \"ALTER TABLE \"+columnInfo.getSchemaName()+\".\"+columnInfo.getTableName();\n    switch(type.toUpperCase()) {\n        case \"ALTER\":\n            if(\"NUMBER\".equalsIgnoreCase(columnInfo.getDatatype()) || \"DATE\".equalsIgnoreCase(columnInfo.getDatatype())) {\n                str += \" ADD (\"+columnInfo.getColumnName()+\" \"+ columnInfo.getDatatype()+\");\";\n            } else {\n                str += \" ADD (\"+columnInfo.getColumnName()+\" \"+ columnInfo.getDatatype() +\"(\"+columnInfo.getColumnsize()+\"));\";\n            }\n            break;\n        case \"DROP\":\n            str += \" DROP (\"+columnInfo.getColumnName()+\");\";\n            break;\n        case \"MODIFY\":\n            if(\"NUMBER\".equalsIgnoreCase(columnInfo.getDatatype()) || \"DATE\".equalsIgnoreCase(columnInfo.getDatatype())) {\n                str += \" MODIFY (\"+columnInfo.getColumnName()+\" \"+ columnInfo.getDatatype()+\");\";\n            } else {\n                str += \" MODIFY (\"+columnInfo.getColumnName()+\" \"+ columnInfo.getDatatype() +\"(\"+columnInfo.getColumnsize()+\"));\";\n            }\n            break;\n    }\n    publishColumnInfoOutput(str);\n}\n\npublic static Map&lt;Integer, String&gt; allJdbcTypeName = null;\n\npublic static Map&lt;Integer, String&gt; getAllJdbcTypeNames() {\n    Map&lt;Integer, String&gt; result = new HashMap&lt;Integer, String&gt;();\n    if(allJdbcTypeName != null)\n        return allJdbcTypeName;\n    try {\n        for (Field field : java.sql.Types.class.getFields()) {\n            result.put((Integer) field.get(null), field.getName());\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return allJdbcTypeName=result;\n}\n\npublic static String getStringPlaces(String[] attribs) {\n    String params = \"\";\n    for(int i=0; i&lt;attribs.length; i++) { params += \"?,\"; }\n    return params.substring(0, params.length()-1);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Column Info Class </p>\n\n<pre><code>public class ColumnInfo {\nprivate String schemaName;\nprivate String tableName;\nprivate String columnName;\nprivate String datatype;\nprivate String columnsize;\nprivate String decimaldigits;\nprivate String isNullable;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1574408759,"creation_date":1574408759,"answer_id":58989683,"question_id":2839137,"body_markdown":"For the sake of completeness.\r\n\r\nUsing Java8\r\n```java\r\npeople.sort(Comparator.comparingInt(People::getId));\r\n```\r\n\r\nif you want in ```descending order```\r\n```java\r\npeople.sort(Comparator.comparingInt(People::getId).reversed());\r\n```","title":"How to use Comparator in Java to sort","body":"<p>For the sake of completeness.</p>\n\n<p>Using Java8</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>people.sort(Comparator.comparingInt(People::getId));\n</code></pre>\n\n<p>if you want in <code>descending order</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>people.sort(Comparator.comparingInt(People::getId).reversed());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10728121,"reputation":1652,"user_id":7895035,"display_name":"Pramod B"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617635653,"creation_date":1617635397,"answer_id":66955194,"question_id":2839137,"body_markdown":"If you are using Java 8 then it&#39;s better to use below code like this:\r\n\r\n    Comparator&lt;People&gt; comparator = Comparator.comparing(People::getName);\r\n\r\nAnd then simply use:\r\n\r\n    Collections.sort(list, comparator);\r\n\r\nIf you are using Java 7 or below then you can use a comparator for customized sorting order by implementing compare method.\r\n\r\nFor example: \r\n```\r\nimport java.util.Comparator;\r\n\r\npublic class PeopleNameComparator implements Comparator&lt;People&gt; {\r\n    @Override\r\n    public int compare(People people1, People people2) {\r\n        return people1.getName().compareTo(people2.getName());\r\n    }\r\n}\r\n```\r\nAnd then simply use like this:\r\n\r\n    Collections.sort(list, new PeopleNameComparator);","title":"How to use Comparator in Java to sort","body":"<p>If you are using Java 8 then it's better to use below code like this:</p>\n<pre><code>Comparator&lt;People&gt; comparator = Comparator.comparing(People::getName);\n</code></pre>\n<p>And then simply use:</p>\n<pre><code>Collections.sort(list, comparator);\n</code></pre>\n<p>If you are using Java 7 or below then you can use a comparator for customized sorting order by implementing compare method.</p>\n<p>For example:</p>\n<pre><code>import java.util.Comparator;\n\npublic class PeopleNameComparator implements Comparator&lt;People&gt; {\n    @Override\n    public int compare(People people1, People people2) {\n        return people1.getName().compareTo(people2.getName());\n    }\n}\n</code></pre>\n<p>And then simply use like this:</p>\n<pre><code>Collections.sort(list, new PeopleNameComparator);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7152643,"reputation":375,"user_id":5466135,"accept_rate":50,"display_name":"yılmaz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633896716,"creation_date":1633896716,"answer_id":69518656,"question_id":2839137,"body_markdown":"Here is a lambda version of comparator. This will sort a string list according to length.\r\n\r\n    Collections.sort(str, (str1, str2) -&gt; {\r\n        if(str1.length() &lt; str2.length())\r\n            return 1;\r\n        else if(str2.length() &lt; str1.length())\r\n            return -1;\r\n        else\r\n            return 0;\r\n    });","title":"How to use Comparator in Java to sort","body":"<p>Here is a lambda version of comparator. This will sort a string list according to length.</p>\n<pre><code>Collections.sort(str, (str1, str2) -&gt; {\n    if(str1.length() &lt; str2.length())\n        return 1;\n    else if(str2.length() &lt; str1.length())\n        return -1;\n    else\n        return 0;\n});\n</code></pre>\n"}],"owner":{"account_id":92471,"reputation":8283,"user_id":253425,"accept_rate":86,"display_name":"Dan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":698566,"favorite_count":0,"down_vote_count":0,"up_vote_count":200,"answer_count":16,"score":200,"last_activity_date":1661546763,"creation_date":1273904527,"question_id":2839137,"body_markdown":"I learned how to use the comparable but I&#39;m having difficulty with the Comparator. I am having a error in my code: \r\n\r\n    Exception in thread &quot;main&quot; java.lang.ClassCastException: New.People cannot be cast to java.lang.Comparable\r\n     at java.util.Arrays.mergeSort(Unknown Source)\r\n     at java.util.Arrays.sort(Unknown Source)\r\n     at java.util.Collections.sort(Unknown Source)\r\n     at New.TestPeople.main(TestPeople.java:18)\r\n\r\nHere is my code:\r\n\r\n    import java.util.Comparator;\r\n\r\n    public class People implements Comparator {\r\n       private int id;\r\n       private String info;\r\n       private double price;\r\n     \r\n       public People(int newid, String newinfo, double newprice) {\r\n           setid(newid);\r\n           setinfo(newinfo);\r\n           setprice(newprice);\r\n       }\r\n     \r\n       public int getid() {\r\n           return id;\r\n       }\r\n    \r\n       public void setid(int id) {\r\n           this.id = id;\r\n       }\r\n    \r\n       public String getinfo() {\r\n           return info;\r\n       }\r\n    \r\n       public void setinfo(String info) {\r\n           this.info = info;\r\n       }\r\n    \r\n       public double getprice() {\r\n           return price;\r\n       }\r\n    \r\n       public void setprice(double price) {\r\n           this.price = price;\r\n       }\r\n    \r\n       public int compare(Object obj1, Object obj2) {\r\n           Integer p1 = ((People) obj1).getid();\r\n           Integer p2 = ((People) obj2).getid();\r\n      \r\n           if (p1 &gt; p2) {\r\n               return 1;\r\n           } else if (p1 &lt; p2){\r\n               return -1;\r\n           } else {\r\n               return 0;\r\n           }\r\n        }\r\n    }\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n\r\n    public class TestPeople {\r\n        public static void main(String[] args) {\r\n            ArrayList peps = new ArrayList();\r\n      \r\n            peps.add(new People(123, &quot;M&quot;, 14.25));\r\n            peps.add(new People(234, &quot;M&quot;, 6.21));\r\n            peps.add(new People(362, &quot;F&quot;, 9.23));\r\n            peps.add(new People(111, &quot;M&quot;, 65.99));\r\n            peps.add(new People(535, &quot;F&quot;, 9.23));\r\n      \r\n            Collections.sort(peps);\r\n      \r\n            for (int i = 0; i &lt; peps.size(); i++){\r\n                System.out.println(peps.get(i));\r\n            }\r\n        }\r\n    }\r\n\r\nI believe it has to do something with the casting in the compare method but I was playing around with it and still could not find the solution","title":"How to use Comparator in Java to sort","body":"<p>I learned how to use the comparable but I'm having difficulty with the Comparator. I am having a error in my code: </p>\n\n<pre><code>Exception in thread \"main\" java.lang.ClassCastException: New.People cannot be cast to java.lang.Comparable\n at java.util.Arrays.mergeSort(Unknown Source)\n at java.util.Arrays.sort(Unknown Source)\n at java.util.Collections.sort(Unknown Source)\n at New.TestPeople.main(TestPeople.java:18)\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>import java.util.Comparator;\n\npublic class People implements Comparator {\n   private int id;\n   private String info;\n   private double price;\n\n   public People(int newid, String newinfo, double newprice) {\n       setid(newid);\n       setinfo(newinfo);\n       setprice(newprice);\n   }\n\n   public int getid() {\n       return id;\n   }\n\n   public void setid(int id) {\n       this.id = id;\n   }\n\n   public String getinfo() {\n       return info;\n   }\n\n   public void setinfo(String info) {\n       this.info = info;\n   }\n\n   public double getprice() {\n       return price;\n   }\n\n   public void setprice(double price) {\n       this.price = price;\n   }\n\n   public int compare(Object obj1, Object obj2) {\n       Integer p1 = ((People) obj1).getid();\n       Integer p2 = ((People) obj2).getid();\n\n       if (p1 &gt; p2) {\n           return 1;\n       } else if (p1 &lt; p2){\n           return -1;\n       } else {\n           return 0;\n       }\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Collections;\n\npublic class TestPeople {\n    public static void main(String[] args) {\n        ArrayList peps = new ArrayList();\n\n        peps.add(new People(123, \"M\", 14.25));\n        peps.add(new People(234, \"M\", 6.21));\n        peps.add(new People(362, \"F\", 9.23));\n        peps.add(new People(111, \"M\", 65.99));\n        peps.add(new People(535, \"F\", 9.23));\n\n        Collections.sort(peps);\n\n        for (int i = 0; i &lt; peps.size(); i++){\n            System.out.println(peps.get(i));\n        }\n    }\n}\n</code></pre>\n\n<p>I believe it has to do something with the casting in the compare method but I was playing around with it and still could not find the solution</p>\n"},{"tags":["java","encoding","rest-assured"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1661539254,"post_id":73505272,"comment_id":129804645,"body_markdown":"How should we know without seeing your code?","body":"How should we know without seeing your code?"},{"owner":{"account_id":5450491,"reputation":21,"user_id":4335467,"display_name":"aper714"},"score":0,"creation_date":1661540811,"post_id":73505272,"comment_id":129805068,"body_markdown":"I&#39;ve added the code with additional information.","body":"I&#39;ve added the code with additional information."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1661540963,"post_id":73505272,"comment_id":129805107,"body_markdown":"Ok, close vote retracted.","body":"Ok, close vote retracted."},{"owner":{"account_id":12878435,"reputation":145,"user_id":9314261,"display_name":"Fire &#39;N Lightnin&#39;"},"score":0,"creation_date":1661540979,"post_id":73505272,"comment_id":129805116,"body_markdown":"What type of Object does `given()` return? I&#39;m trying to find out what post() does","body":"What type of Object does <code>given()</code> return? I&#39;m trying to find out what post() does"},{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":0,"creation_date":1661541416,"post_id":73505272,"comment_id":129805242,"body_markdown":"The library being used is doing it. Please specify the library?","body":"The library being used is doing it. Please specify the library?"},{"owner":{"account_id":5450491,"reputation":21,"user_id":4335467,"display_name":"aper714"},"score":0,"creation_date":1661541810,"post_id":73505272,"comment_id":129805346,"body_markdown":"`given()` returns a RequestSpecification. It&#39;s using RestAssured, or `com.jayway.restassured`","body":"<code>given()</code> returns a RequestSpecification. It&#39;s using RestAssured, or <code>com.jayway.restassured</code>"},{"owner":{"account_id":12878435,"reputation":145,"user_id":9314261,"display_name":"Fire &#39;N Lightnin&#39;"},"score":0,"creation_date":1661545110,"post_id":73505272,"comment_id":129806194,"body_markdown":"The RestAssured libraries&#39; downloads are broken, I am unable to download them in order to recreate your issue. Also, is your RestAssured up to date? I don&#39;t see a `post(String)` method in the docs. However, reading the docs for the URI class, it appears that that may be the route you want to take. Instead of `.post(String)` try `.post(new URI(String))`. As I mentioned, I can&#39;t test this, so I won&#39;t post it as an answer.","body":"The RestAssured libraries&#39; downloads are broken, I am unable to download them in order to recreate your issue. Also, is your RestAssured up to date? I don&#39;t see a <code>post(String)</code> method in the docs. However, reading the docs for the URI class, it appears that that may be the route you want to take. Instead of <code>.post(String)</code> try <code>.post(new URI(String))</code>. As I mentioned, I can&#39;t test this, so I won&#39;t post it as an answer."},{"owner":{"account_id":5450491,"reputation":21,"user_id":4335467,"display_name":"aper714"},"score":0,"creation_date":1661546561,"post_id":73505272,"comment_id":129806537,"body_markdown":"Thank you for trying to recreate. I tried that route of using URI and saw the same behavior. The issue was that this library is attempting to encode the URL but for some reason does not function well with a `#` so after some digging I found that I could write this `.urlEncodingEnabled(false)` on the `given()` and just hard code the encoding for `#`","body":"Thank you for trying to recreate. I tried that route of using URI and saw the same behavior. The issue was that this library is attempting to encode the URL but for some reason does not function well with a <code>#</code> so after some digging I found that I could write this <code>.urlEncodingEnabled(false)</code> on the <code>given()</code> and just hard code the encoding for <code>#</code>"}],"answers":[{"tags":[],"owner":{"account_id":5450491,"reputation":21,"user_id":4335467,"display_name":"aper714"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661546648,"creation_date":1661546648,"answer_id":73506299,"question_id":73505272,"body_markdown":"```\r\n given()\r\n        .urlEncodingEnabled(false)\r\n```\r\nAdding this flag allowed me to hardcode the url without worrying about the library encoding the `%` when executing `addRecords(creds, &quot;test%23v2&quot;, VALID_DATA_JSON);`","title":"Java - Special character is being encoded twice","body":"<pre><code> given()\n        .urlEncodingEnabled(false)\n</code></pre>\n<p>Adding this flag allowed me to hardcode the url without worrying about the library encoding the <code>%</code> when executing <code>addRecords(creds, &quot;test%23v2&quot;, VALID_DATA_JSON);</code></p>\n"}],"owner":{"account_id":5450491,"reputation":21,"user_id":4335467,"display_name":"aper714"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1661546648,"creation_date":1661539194,"question_id":73505272,"body_markdown":"I am writing a test in Java that sends a request to an api. The url includes a `#` which should be getting encoded as `%23`.\r\n\r\nHowever I can&#39;t get that %23 to show up accurately in the url.\r\n\r\n```\r\npublic static void addRecords(JSONObject creds, String subsection, String jsonFile) {\r\n    String body = readFile(&quot;files/&quot; + jsonFile);\r\n    given()\r\n        .header(CONTENT_TYPE, JSON)\r\n        .header(AUTHORIZATION, BEARER_TOKEN + creds.getString(ACCESS_TOKEN))\r\n        .body(body)\r\n        .post(BASE_API_URL_V1 + &quot;/setup/&quot; + subsection + &quot;/records&quot;)\r\n        .then()\r\n        .statusCode(SC_ACCEPTED);\r\n  }\r\n```\r\n\r\nWhen running the below the url gets translated to `/v1/setup/test` so it removes the hashtag completely.\r\n```\r\n    addRecords(creds, &quot;test#v2&#39;&quot;, VALID_DATA_JSON);\r\n```\r\nWhen running the below the url gets translated to `/v1/setup/test%2523/records` so it encodes everything.\r\n```\r\n    addRecords(creds, &quot;test%23v2&quot;, VALID_DATA_JSON);\r\n```\r\n\r\nWhat I need is `/v1/setup/test%23v2/records`","title":"Java - Special character is being encoded twice","body":"<p>I am writing a test in Java that sends a request to an api. The url includes a <code>#</code> which should be getting encoded as <code>%23</code>.</p>\n<p>However I can't get that %23 to show up accurately in the url.</p>\n<pre><code>public static void addRecords(JSONObject creds, String subsection, String jsonFile) {\n    String body = readFile(&quot;files/&quot; + jsonFile);\n    given()\n        .header(CONTENT_TYPE, JSON)\n        .header(AUTHORIZATION, BEARER_TOKEN + creds.getString(ACCESS_TOKEN))\n        .body(body)\n        .post(BASE_API_URL_V1 + &quot;/setup/&quot; + subsection + &quot;/records&quot;)\n        .then()\n        .statusCode(SC_ACCEPTED);\n  }\n</code></pre>\n<p>When running the below the url gets translated to <code>/v1/setup/test</code> so it removes the hashtag completely.</p>\n<pre><code>    addRecords(creds, &quot;test#v2'&quot;, VALID_DATA_JSON);\n</code></pre>\n<p>When running the below the url gets translated to <code>/v1/setup/test%2523/records</code> so it encodes everything.</p>\n<pre><code>    addRecords(creds, &quot;test%23v2&quot;, VALID_DATA_JSON);\n</code></pre>\n<p>What I need is <code>/v1/setup/test%23v2/records</code></p>\n"},{"tags":["java","javafx","hashmap","tableview","tablecolumn"],"comments":[{"owner":{"account_id":5252988,"reputation":1450,"user_id":4196620,"display_name":"kendavidson"},"score":0,"creation_date":1555960255,"post_id":55795528,"comment_id":98268502,"body_markdown":"Since you can&#39;t back a TableView with a Map, have you tried to use an ObservableList backed by the keySet of the map as your TableView items?  You should be able to listen for changes to the observable map and then either a) whole sale update the TableView items or b) dynamically add/remove just those entries updated in the map.","body":"Since you can&#39;t back a TableView with a Map, have you tried to use an ObservableList backed by the keySet of the map as your TableView items?  You should be able to listen for changes to the observable map and then either a) whole sale update the TableView items or b) dynamically add/remove just those entries updated in the map."}],"answers":[{"tags":[],"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1555988913,"creation_date":1555987214,"answer_id":55803560,"question_id":55795528,"body_markdown":"This should work for a `List&lt;Map&lt;String,String&gt;&gt;`\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n   **Main.java**\r\n\r\n    package tester;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import javafx.application.Application;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class Tester extends Application\r\n    {\r\n        \r\n        @Override\r\n        public void start(Stage primaryStage)\r\n        {\r\n            \r\n            TableView&lt;LineItem&gt; table = new TableView&lt;&gt;();\r\n            List&lt;Map&lt;String, String&gt;&gt; databaseObject = getDatabaseObject();\r\n            \r\n            for (String key : databaseObject.get(0).keySet())\r\n            {\r\n                TableColumn&lt;LineItem, String&gt; col = new TableColumn&lt;&gt;(key);\r\n                col.setCellValueFactory((TableColumn.CellDataFeatures&lt;LineItem, String&gt; cellData) -&gt; cellData.getValue().fieldProperty(key));            \r\n                table.getColumns().add(col);\r\n                \r\n            }\r\n            List&lt;LineItem&gt; data = new ArrayList&lt;&gt;();\r\n            LineItem sequence1 = new LineItem(databaseObject.get(0));\r\n            LineItem sequence2 = new LineItem(databaseObject.get(1));\r\n            data.add(sequence1);\r\n            data.add(sequence2);\r\n            \r\n            table.setItems(FXCollections.observableArrayList(data));\r\n            \r\n            table.setPrefWidth(500);\r\n            \r\n            HBox root = new HBox();\r\n            root.getChildren().addAll(table);\r\n            \r\n            Scene scene = new Scene(root, 500, 500);\r\n            \r\n            primaryStage.setTitle(&quot;Hello World!&quot;);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args)\r\n        {\r\n            launch(args);\r\n        }\r\n        \r\n        private List&lt;Map&lt;String, String&gt;&gt; getDatabaseObject()\r\n        {\r\n            List&lt;Map&lt;String, String&gt;&gt; values = new ArrayList&lt;&gt;();\r\n            \r\n            Map&lt;String, String&gt; record1 = new HashMap&lt;&gt;();\r\n            record1.put(&quot;firstName&quot;, &quot;Joe&quot;);\r\n            record1.put(&quot;lastName&quot;, &quot;Blob&quot;);\r\n            record1.put(&quot;address&quot;, &quot;95 circle ave&quot;);\r\n            record1.put(&quot;city&quot;, &quot;Toronto&quot;);\r\n            record1.put(&quot;postalCode&quot;, &quot;L9Y4Z4&quot;);\r\n            values.add(record1);\r\n            \r\n            Map&lt;String, String&gt; record2 = new HashMap&lt;&gt;();\r\n            record2.put(&quot;firstName&quot;, &quot;Sarah&quot;);\r\n            record2.put(&quot;lastName&quot;, &quot;Blob&quot;);\r\n            record2.put(&quot;address&quot;, &quot;92 main st&quot;);\r\n            record2.put(&quot;city&quot;, &quot;London&quot;);\r\n            record2.put(&quot;postalCode&quot;, &quot;T9Y4K4&quot;);\r\n            values.add(record2);\r\n            \r\n            return values;\r\n        }\r\n        \r\n    }\r\n\r\n**LineItem.java**\r\n\r\n    package tester;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import java.util.Set;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.property.StringProperty;\r\n    \r\n    public class LineItem\r\n    {\r\n    \r\n        private final Map&lt;String, StringProperty&gt; fields;\r\n    \r\n        public LineItem(Map&lt;String, String&gt; record)\r\n        {\r\n            this.fields = new HashMap&lt;&gt;();\r\n            for (String key : record.keySet())\r\n            {\r\n                this.fields.put(key, new SimpleStringProperty());\r\n            }\r\n            for (Entry&lt;String, String&gt; entry : ((Set&lt;Entry&lt;String, String&gt;&gt;) record.entrySet()))\r\n            {\r\n    \r\n                this.fields.get(entry.getKey()).set(entry.getValue());\r\n            }\r\n        }\r\n    \r\n        public final StringProperty fieldProperty(String key)\r\n        {\r\n            return this.fields.get(key);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MOhKL.png","title":"How to fill TableView with ObservableMap&lt;KeyObject, ObservableList&lt;CustomObject&gt;&gt; in JavaFX","body":"<p>This should work for a <code>List&lt;Map&lt;String,String&gt;&gt;</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/MOhKL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MOhKL.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Main.java</strong></p>\n\n<pre><code>package tester;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javafx.application.Application;\nimport javafx.collections.FXCollections;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.layout.HBox;\nimport javafx.stage.Stage;\n\npublic class Tester extends Application\n{\n\n    @Override\n    public void start(Stage primaryStage)\n    {\n\n        TableView&lt;LineItem&gt; table = new TableView&lt;&gt;();\n        List&lt;Map&lt;String, String&gt;&gt; databaseObject = getDatabaseObject();\n\n        for (String key : databaseObject.get(0).keySet())\n        {\n            TableColumn&lt;LineItem, String&gt; col = new TableColumn&lt;&gt;(key);\n            col.setCellValueFactory((TableColumn.CellDataFeatures&lt;LineItem, String&gt; cellData) -&gt; cellData.getValue().fieldProperty(key));            \n            table.getColumns().add(col);\n\n        }\n        List&lt;LineItem&gt; data = new ArrayList&lt;&gt;();\n        LineItem sequence1 = new LineItem(databaseObject.get(0));\n        LineItem sequence2 = new LineItem(databaseObject.get(1));\n        data.add(sequence1);\n        data.add(sequence2);\n\n        table.setItems(FXCollections.observableArrayList(data));\n\n        table.setPrefWidth(500);\n\n        HBox root = new HBox();\n        root.getChildren().addAll(table);\n\n        Scene scene = new Scene(root, 500, 500);\n\n        primaryStage.setTitle(\"Hello World!\");\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n\n    private List&lt;Map&lt;String, String&gt;&gt; getDatabaseObject()\n    {\n        List&lt;Map&lt;String, String&gt;&gt; values = new ArrayList&lt;&gt;();\n\n        Map&lt;String, String&gt; record1 = new HashMap&lt;&gt;();\n        record1.put(\"firstName\", \"Joe\");\n        record1.put(\"lastName\", \"Blob\");\n        record1.put(\"address\", \"95 circle ave\");\n        record1.put(\"city\", \"Toronto\");\n        record1.put(\"postalCode\", \"L9Y4Z4\");\n        values.add(record1);\n\n        Map&lt;String, String&gt; record2 = new HashMap&lt;&gt;();\n        record2.put(\"firstName\", \"Sarah\");\n        record2.put(\"lastName\", \"Blob\");\n        record2.put(\"address\", \"92 main st\");\n        record2.put(\"city\", \"London\");\n        record2.put(\"postalCode\", \"T9Y4K4\");\n        values.add(record2);\n\n        return values;\n    }\n\n}\n</code></pre>\n\n<p><strong>LineItem.java</strong></p>\n\n<pre><code>package tester;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Set;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.property.StringProperty;\n\npublic class LineItem\n{\n\n    private final Map&lt;String, StringProperty&gt; fields;\n\n    public LineItem(Map&lt;String, String&gt; record)\n    {\n        this.fields = new HashMap&lt;&gt;();\n        for (String key : record.keySet())\n        {\n            this.fields.put(key, new SimpleStringProperty());\n        }\n        for (Entry&lt;String, String&gt; entry : ((Set&lt;Entry&lt;String, String&gt;&gt;) record.entrySet()))\n        {\n\n            this.fields.get(entry.getKey()).set(entry.getValue());\n        }\n    }\n\n    public final StringProperty fieldProperty(String key)\n    {\n        return this.fields.get(key);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555988731,"creation_date":1555988731,"answer_id":55803724,"question_id":55795528,"body_markdown":"The other way to create a `TableView` with one `Map&lt;String,String&gt;` is:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Main.java**\r\n\r\n    package tester;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class Tester extends Application\r\n    {\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage)\r\n        {\r\n            MapTable mapTable = new MapTable(getDatabaseRecord());\r\n    \r\n            TableView table = mapTable.getTableView();\r\n    \r\n            HBox root = new HBox();\r\n            root.getChildren().addAll(table);\r\n    \r\n            Scene scene = new Scene(root, 500, 500);\r\n    \r\n            primaryStage.setTitle(&quot;Hello World!&quot;);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args)\r\n        {\r\n            launch(args);\r\n        }\r\n    \r\n        private Map&lt;String, String&gt; getDatabaseRecord()\r\n        {\r\n            Map&lt;String, String&gt; record1 = new HashMap&lt;&gt;();\r\n    \r\n            record1.put(&quot;firstName&quot;, &quot;Joe&quot;);\r\n            record1.put(&quot;lastName&quot;, &quot;Blob&quot;);\r\n            record1.put(&quot;address&quot;, &quot;95 circle ave&quot;);\r\n            record1.put(&quot;city&quot;, &quot;Toronto&quot;);\r\n            record1.put(&quot;postalCode&quot;, &quot;L9Y4Z4&quot;);\r\n    \r\n            return record1;\r\n        }\r\n    }\r\n\r\n\r\n\r\n**MapTable.java**\r\n\r\n    package tester;\r\n    \r\n    import java.util.Map;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.scene.control.SelectionMode;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    \r\n    public class MapTable\r\n    {\r\n    \r\n        private final TableView&lt;Map.Entry&lt;String, String&gt;&gt; table;\r\n        private final ObservableList&lt;Map.Entry&lt;String, String&gt;&gt; data;\r\n    \r\n        public MapTable(Map map)\r\n        {\r\n    \r\n            this.table = new TableView&lt;&gt;();\r\n            this.data = FXCollections.observableArrayList(map.entrySet());\r\n            setUpTable();\r\n        }\r\n    \r\n        private void setUpTable()\r\n        {\r\n            this.table.setEditable(false);\r\n            this.table.setItems(this.data);\r\n            this.table.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\r\n            // use fully detailed type for Map.Entry&lt;String, String&gt; \r\n            TableColumn&lt;Map.Entry&lt;String, String&gt;, String&gt; column1 = new TableColumn&lt;Map.Entry&lt;String, String&gt;, String&gt;();\r\n            column1.setMinWidth(125);\r\n            column1.setSortable(false);\r\n            column1.setCellValueFactory((TableColumn.CellDataFeatures&lt;Map.Entry&lt;String, String&gt;, String&gt; p) -&gt; new SimpleStringProperty(p.getValue().getKey()));\r\n    \r\n            TableColumn&lt;Map.Entry&lt;String, String&gt;, String&gt; column2 = new TableColumn&lt;Map.Entry&lt;String, String&gt;, String&gt;();\r\n            column2.setMinWidth(350);\r\n            column2.setSortable(false);\r\n            column2.setCellValueFactory((TableColumn.CellDataFeatures&lt;Map.Entry&lt;String, String&gt;, String&gt; p) -&gt; new SimpleStringProperty(p.getValue().getValue()));\r\n           \r\n    \r\n            this.table.getColumns().setAll(column1, column2);\r\n    \r\n        }\r\n    \r\n        public TableView getTableView()\r\n        {\r\n            return this.table;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/L7kKY.png","title":"How to fill TableView with ObservableMap&lt;KeyObject, ObservableList&lt;CustomObject&gt;&gt; in JavaFX","body":"<p>The other way to create a <code>TableView</code> with one <code>Map&lt;String,String&gt;</code> is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/L7kKY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L7kKY.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Main.java</strong></p>\n\n<pre><code>package tester;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableView;\nimport javafx.scene.layout.HBox;\nimport javafx.stage.Stage;\n\npublic class Tester extends Application\n{\n\n    @Override\n    public void start(Stage primaryStage)\n    {\n        MapTable mapTable = new MapTable(getDatabaseRecord());\n\n        TableView table = mapTable.getTableView();\n\n        HBox root = new HBox();\n        root.getChildren().addAll(table);\n\n        Scene scene = new Scene(root, 500, 500);\n\n        primaryStage.setTitle(\"Hello World!\");\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n\n    private Map&lt;String, String&gt; getDatabaseRecord()\n    {\n        Map&lt;String, String&gt; record1 = new HashMap&lt;&gt;();\n\n        record1.put(\"firstName\", \"Joe\");\n        record1.put(\"lastName\", \"Blob\");\n        record1.put(\"address\", \"95 circle ave\");\n        record1.put(\"city\", \"Toronto\");\n        record1.put(\"postalCode\", \"L9Y4Z4\");\n\n        return record1;\n    }\n}\n</code></pre>\n\n<p><strong>MapTable.java</strong></p>\n\n<pre><code>package tester;\n\nimport java.util.Map;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.scene.control.SelectionMode;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\n\npublic class MapTable\n{\n\n    private final TableView&lt;Map.Entry&lt;String, String&gt;&gt; table;\n    private final ObservableList&lt;Map.Entry&lt;String, String&gt;&gt; data;\n\n    public MapTable(Map map)\n    {\n\n        this.table = new TableView&lt;&gt;();\n        this.data = FXCollections.observableArrayList(map.entrySet());\n        setUpTable();\n    }\n\n    private void setUpTable()\n    {\n        this.table.setEditable(false);\n        this.table.setItems(this.data);\n        this.table.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\n        // use fully detailed type for Map.Entry&lt;String, String&gt; \n        TableColumn&lt;Map.Entry&lt;String, String&gt;, String&gt; column1 = new TableColumn&lt;Map.Entry&lt;String, String&gt;, String&gt;();\n        column1.setMinWidth(125);\n        column1.setSortable(false);\n        column1.setCellValueFactory((TableColumn.CellDataFeatures&lt;Map.Entry&lt;String, String&gt;, String&gt; p) -&gt; new SimpleStringProperty(p.getValue().getKey()));\n\n        TableColumn&lt;Map.Entry&lt;String, String&gt;, String&gt; column2 = new TableColumn&lt;Map.Entry&lt;String, String&gt;, String&gt;();\n        column2.setMinWidth(350);\n        column2.setSortable(false);\n        column2.setCellValueFactory((TableColumn.CellDataFeatures&lt;Map.Entry&lt;String, String&gt;, String&gt; p) -&gt; new SimpleStringProperty(p.getValue().getValue()));\n\n\n        this.table.getColumns().setAll(column1, column2);\n\n    }\n\n    public TableView getTableView()\n    {\n        return this.table;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10086407,"reputation":378,"user_id":7463215,"display_name":"parrott"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":802,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55803560,"answer_count":2,"score":1,"last_activity_date":1661546500,"creation_date":1555941299,"question_id":55795528,"body_markdown":"My Java program produces a lot of data, with which I construct individual ResultObject. Because only certain ResultsObjects will be of interest, I populate an ObservableHashMap&lt;&gt; with my results. The CustomObject consists of a handful ints + doubles and one JSONObject. With this CustomObject I want to map similar ResultObjects(which have certain properties in common) to that one CustomObject. \r\n\r\nWhile mapping and handling those results works as intended, I am pretty much helpless to populate a TableView with that ObservableHashMap&lt;&gt;. \r\n\r\nMy CustomObject (JSONObject simply to check, if two CustomObjects have the same properties):\r\n\r\n    public CustomObject(Simulation data) {\r\n\r\n        this.datapoint1 = data.datapoint1;\r\n        this.datapoint2 = data.datapoint2;\r\n\r\n        this.jsonCompareObject = new JSONObject()\r\n                .put(&quot;datapoint1&quot;, data.datapoint1)\r\n                .put(&quot;datapoint1&quot;, data.datapoint2);\r\n    }\r\n\r\nMy ObservableHashMap Object:\r\n\r\n    private ObservableMap &lt;CustomObject, ObservableList&lt;Simulation&gt;&gt; topResultsList;\r\n\r\n    public SomeObjectWithObservableMap(){\r\n        this.topResultsList = FXCollections.observableHashMap();\r\n    }\r\n\r\nBy using the following code, I check if there is a key with the corresponding datapoints already present to then add to its ObservableList (Value):\r\n\r\n    private boolean isKeyPresent(CustomObject newCustomObject, Simulation data) {\r\n        for (CustomObject oldCustomObject : this.topResultsList.keySet()) {\r\n            if (oldCustomObject.jsonCompareObject.toString().equals(newCustomObject.jsonCompareObject.toString())) {\r\n                this.topResultsList.get(oldCustomObject).add(data);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\nI populate some other TableView like this:\r\n\r\n    {\r\n        tableColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;datapoint1&quot;));\r\n        tableColumn.setCellFactory(TextFieldTableCell.&lt;SomeObject, Double&gt;forTableColumn(twoDigits));\r\n        tableView.setItems(someObject.getObservableList());\r\n    }\r\n\r\nIn the end I want some TableColumns to show properties from the CustomObject. Later on, I would want the individual mapped ObservableLists of a selected CustomObject to be shown in a separate TableView.\r\n\r\nI am pretty new to Java and JavaFX and I hope to have described my problem as professional as possible. Please let me know, if I missed anything.","title":"How to fill TableView with ObservableMap&lt;KeyObject, ObservableList&lt;CustomObject&gt;&gt; in JavaFX","body":"<p>My Java program produces a lot of data, with which I construct individual ResultObject. Because only certain ResultsObjects will be of interest, I populate an ObservableHashMap&lt;&gt; with my results. The CustomObject consists of a handful ints + doubles and one JSONObject. With this CustomObject I want to map similar ResultObjects(which have certain properties in common) to that one CustomObject.</p>\n<p>While mapping and handling those results works as intended, I am pretty much helpless to populate a TableView with that ObservableHashMap&lt;&gt;.</p>\n<p>My CustomObject (JSONObject simply to check, if two CustomObjects have the same properties):</p>\n<pre><code>public CustomObject(Simulation data) {\n\n    this.datapoint1 = data.datapoint1;\n    this.datapoint2 = data.datapoint2;\n\n    this.jsonCompareObject = new JSONObject()\n            .put(&quot;datapoint1&quot;, data.datapoint1)\n            .put(&quot;datapoint1&quot;, data.datapoint2);\n}\n</code></pre>\n<p>My ObservableHashMap Object:</p>\n<pre><code>private ObservableMap &lt;CustomObject, ObservableList&lt;Simulation&gt;&gt; topResultsList;\n\npublic SomeObjectWithObservableMap(){\n    this.topResultsList = FXCollections.observableHashMap();\n}\n</code></pre>\n<p>By using the following code, I check if there is a key with the corresponding datapoints already present to then add to its ObservableList (Value):</p>\n<pre><code>private boolean isKeyPresent(CustomObject newCustomObject, Simulation data) {\n    for (CustomObject oldCustomObject : this.topResultsList.keySet()) {\n        if (oldCustomObject.jsonCompareObject.toString().equals(newCustomObject.jsonCompareObject.toString())) {\n            this.topResultsList.get(oldCustomObject).add(data);\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n<p>I populate some other TableView like this:</p>\n<pre><code>{\n    tableColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;datapoint1&quot;));\n    tableColumn.setCellFactory(TextFieldTableCell.&lt;SomeObject, Double&gt;forTableColumn(twoDigits));\n    tableView.setItems(someObject.getObservableList());\n}\n</code></pre>\n<p>In the end I want some TableColumns to show properties from the CustomObject. Later on, I would want the individual mapped ObservableLists of a selected CustomObject to be shown in a separate TableView.</p>\n<p>I am pretty new to Java and JavaFX and I hope to have described my problem as professional as possible. Please let me know, if I missed anything.</p>\n"},{"tags":["java","null","jackson"],"comments":[{"owner":{"account_id":62233,"reputation":5089,"user_id":185031,"accept_rate":96,"display_name":"spa"},"score":0,"creation_date":1387361925,"post_id":20654810,"comment_id":30922535,"body_markdown":"Ok this is a duplicate :-)\nhttp://stackoverflow.com/questions/5782284/how-to-serialize-in-jackson-json-null-string-to-empty-string","body":"Ok this is a duplicate :-) <a href=\"http://stackoverflow.com/questions/5782284/how-to-serialize-in-jackson-json-null-string-to-empty-string\" title=\"how to serialize in jackson json null string to empty string\">stackoverflow.com/questions/5782284/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":62233,"reputation":5089,"user_id":185031,"accept_rate":96,"display_name":"spa"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1387361852,"creation_date":1387361852,"answer_id":20655330,"question_id":20654810,"body_markdown":"A simple solution using no Jackson specialities: Write a Getter for name which returns an empty String instead of null as Jackson uses those to serialize.\r\n\r\n    public String getName() {\r\n      return name != null ? name : &quot;&quot;;\r\n    }\r\n\r\nAnother way would be to write a custom deserializer. Look here: http://wiki.fasterxml.com/JacksonHowToCustomSerializers\r\n\r\n","title":"Jackson: deserializing null Strings as empty Strings","body":"<p>A simple solution using no Jackson specialities: Write a Getter for name which returns an empty String instead of null as Jackson uses those to serialize.</p>\n\n<pre><code>public String getName() {\n  return name != null ? name : \"\";\n}\n</code></pre>\n\n<p>Another way would be to write a custom deserializer. Look here: <a href=\"http://wiki.fasterxml.com/JacksonHowToCustomSerializers\" rel=\"noreferrer\">http://wiki.fasterxml.com/JacksonHowToCustomSerializers</a></p>\n"},{"tags":[],"owner":{"account_id":1241934,"reputation":4064,"user_id":1204330,"accept_rate":76,"display_name":"jcklie"},"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1387361913,"creation_date":1387361913,"answer_id":20655358,"question_id":20654810,"body_markdown":"You can either set it in the default constructor, or on declaration:\r\n\r\n    public class POI {\r\n        @JsonProperty(&quot;name&quot;)\r\n        private String name; \r\n\r\n        public POI() {\r\n            name = &quot;&quot;;\r\n        }\r\n    }\r\n\r\nOR\r\n\r\n    public class POI {\r\n        @JsonProperty(&quot;name&quot;)\r\n        private String name = &quot;&quot;;\r\n    } \r\n\r\n","title":"Jackson: deserializing null Strings as empty Strings","body":"<p>You can either set it in the default constructor, or on declaration:</p>\n\n<pre><code>public class POI {\n    @JsonProperty(\"name\")\n    private String name; \n\n    public POI() {\n        name = \"\";\n    }\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>public class POI {\n    @JsonProperty(\"name\")\n    private String name = \"\";\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2254693,"reputation":2304,"user_id":1986125,"accept_rate":100,"display_name":"Tirath"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1505730016,"creation_date":1505730016,"answer_id":46276893,"question_id":20654810,"body_markdown":"Again, this answer is for the **SO users** who happen to stumble upon this thread.\r\n\r\nWhile the accepted answer stands accepted and valid in all its sense - it did not help me in the case where the decision to set `null` string values to `empty` string came only after we made our services available to `iOS` clients.\r\n\r\nSo, around 30-40 pojo&#39;s(increasing) and initializing them while instantiating the object in question or at the point of declaration was too much.\r\n\r\nHere&#39;s how we did it.\r\n\r\n\tpublic class CustomSerializerProvider extends DefaultSerializerProvider {\r\n\r\n\t\tpublic CustomSerializerProvider() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\t\tpublic CustomSerializerProvider(CustomSerializerProvider provider, SerializationConfig config,\r\n\t\t\t\tSerializerFactory jsf) {\r\n\t\t\tsuper(provider, config, jsf);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic CustomSerializerProvider createInstance(SerializationConfig config, SerializerFactory jsf) {\r\n\t\t\treturn new CustomSerializerProvider(this, config, jsf);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic JsonSerializer&lt;Object&gt; findNullValueSerializer(BeanProperty property) throws JsonMappingException {\r\n\t\t\tif (property.getType().getRawClass().equals(String.class))\r\n\t\t\t\treturn Serializers.EMPTY_STRING_SERIALIZER_INSTANCE;\r\n\t\t\telse\r\n\t\t\t\treturn super.findNullValueSerializer(property);\r\n\t\t}\r\n\t}\r\n\r\nAnd, the serializer\r\n\r\n\tpublic class Serializers extends JsonSerializer&lt;Object&gt; {\r\n\t\tpublic static final JsonSerializer&lt;Object&gt; EMPTY_STRING_SERIALIZER_INSTANCE = new EmptyStringSerializer();\r\n\r\n\t\tpublic Serializers() {}\r\n\r\n\t\t@Override\r\n\t\tpublic void serialize(Object o, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)\r\n\t\t\t\tthrows IOException, JsonProcessingException {\r\n\t\t\tjsonGenerator.writeString(&quot;&quot;);\r\n\t\t}\r\n\t\t\r\n\t\tprivate static class EmptyStringSerializer extends JsonSerializer&lt;Object&gt; {\r\n\t\t\tpublic EmptyStringSerializer() {}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void serialize(Object o, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)\r\n\t\t\t\t\tthrows IOException, JsonProcessingException {\r\n\t\t\t\tjsonGenerator.writeString(&quot;&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\nAnd, then set the serializer in the ObjectMapper. (***Jackson 2.7.4***)\r\n\r\n\tObjectMapper nullMapper = new ObjectMapper();\r\n\tnullMapper.setSerializerProvider(new CustomSerializerProvider());\r\n\t\r\nHoping, this will save someone some time.","title":"Jackson: deserializing null Strings as empty Strings","body":"<p>Again, this answer is for the <strong>SO users</strong> who happen to stumble upon this thread.</p>\n\n<p>While the accepted answer stands accepted and valid in all its sense - it did not help me in the case where the decision to set <code>null</code> string values to <code>empty</code> string came only after we made our services available to <code>iOS</code> clients.</p>\n\n<p>So, around 30-40 pojo's(increasing) and initializing them while instantiating the object in question or at the point of declaration was too much.</p>\n\n<p>Here's how we did it.</p>\n\n<pre><code>public class CustomSerializerProvider extends DefaultSerializerProvider {\n\n    public CustomSerializerProvider() {\n        super();\n    }\n\n    public CustomSerializerProvider(CustomSerializerProvider provider, SerializationConfig config,\n            SerializerFactory jsf) {\n        super(provider, config, jsf);\n    }\n\n    @Override\n    public CustomSerializerProvider createInstance(SerializationConfig config, SerializerFactory jsf) {\n        return new CustomSerializerProvider(this, config, jsf);\n    }\n\n    @Override\n    public JsonSerializer&lt;Object&gt; findNullValueSerializer(BeanProperty property) throws JsonMappingException {\n        if (property.getType().getRawClass().equals(String.class))\n            return Serializers.EMPTY_STRING_SERIALIZER_INSTANCE;\n        else\n            return super.findNullValueSerializer(property);\n    }\n}\n</code></pre>\n\n<p>And, the serializer</p>\n\n<pre><code>public class Serializers extends JsonSerializer&lt;Object&gt; {\n    public static final JsonSerializer&lt;Object&gt; EMPTY_STRING_SERIALIZER_INSTANCE = new EmptyStringSerializer();\n\n    public Serializers() {}\n\n    @Override\n    public void serialize(Object o, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)\n            throws IOException, JsonProcessingException {\n        jsonGenerator.writeString(\"\");\n    }\n\n    private static class EmptyStringSerializer extends JsonSerializer&lt;Object&gt; {\n        public EmptyStringSerializer() {}\n\n        @Override\n        public void serialize(Object o, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)\n                throws IOException, JsonProcessingException {\n            jsonGenerator.writeString(\"\");\n        }\n    }\n}\n</code></pre>\n\n<p>And, then set the serializer in the ObjectMapper. (<strong><em>Jackson 2.7.4</em></strong>)</p>\n\n<pre><code>ObjectMapper nullMapper = new ObjectMapper();\nnullMapper.setSerializerProvider(new CustomSerializerProvider());\n</code></pre>\n\n<p>Hoping, this will save someone some time.</p>\n"},{"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1592156082,"creation_date":1592156082,"answer_id":62376061,"question_id":20654810,"body_markdown":"Jackson 2.9 actually offers a new mechanism not yet mentioned: use of `@JsonSetter` for properties, and its equivalent &quot;Config Overrides&quot; for types like `String.class`.\r\nLonger explanation included in\r\n\r\nhttps://medium.com/@cowtowncoder/jackson-2-9-features-b2a19029e9ff\r\n\r\nbut gist is that you can either mark field (or setter) like so:\r\n\r\n```\r\n@JsonSetter(nulls=Nulls.AS_EMPTY) public String stringValue;\r\n```\r\n\r\nor configure mapper to do the same for all `String` value properties:\r\n\r\n```\r\nmapper.configOverride(String.class)\r\n .setSetterInfo(JsonSetter.Value.forValueNulls(Nulls.AS_EMPTY));\r\n```\r\n\r\nboth of which would convert incoming `null` into empty value, which for Strings is &quot;&quot;.\r\n\r\nThis also works for `Collection`s and `Map`s as expected.\r\n\r\n\r\n\r\n","title":"Jackson: deserializing null Strings as empty Strings","body":"<p>Jackson 2.9 actually offers a new mechanism not yet mentioned: use of <code>@JsonSetter</code> for properties, and its equivalent \"Config Overrides\" for types like <code>String.class</code>.\nLonger explanation included in</p>\n\n<p><a href=\"https://medium.com/@cowtowncoder/jackson-2-9-features-b2a19029e9ff\" rel=\"noreferrer\">https://medium.com/@cowtowncoder/jackson-2-9-features-b2a19029e9ff</a></p>\n\n<p>but gist is that you can either mark field (or setter) like so:</p>\n\n<pre><code>@JsonSetter(nulls=Nulls.AS_EMPTY) public String stringValue;\n</code></pre>\n\n<p>or configure mapper to do the same for all <code>String</code> value properties:</p>\n\n<pre><code>mapper.configOverride(String.class)\n .setSetterInfo(JsonSetter.Value.forValueNulls(Nulls.AS_EMPTY));\n</code></pre>\n\n<p>both of which would convert incoming <code>null</code> into empty value, which for Strings is \"\".</p>\n\n<p>This also works for <code>Collection</code>s and <code>Map</code>s as expected.</p>\n"},{"tags":[],"owner":{"account_id":10854961,"reputation":11,"user_id":7981628,"display_name":"Diego Ramirez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661546063,"creation_date":1661546063,"answer_id":73506234,"question_id":20654810,"body_markdown":"In case you are looking for a global solution for spring boot, you can configure the `ObjectMapper`\r\n\r\n    @Configuration\r\n    public class JacksonConfiguration {\r\n    \r\n        @Bean\r\n        public ObjectMapper objectMapper(Jackson2ObjectMapperBuilder mapperBuilder) {\r\n            DefaultSerializerProvider sp = new DefaultSerializerProvider.Impl();\r\n            sp.setNullValueSerializer(new JsonSerializer&lt;Object&gt;() {\r\n                public void serialize(Object value, JsonGenerator jgen,\r\n                                      SerializerProvider provider)\r\n                        throws IOException, JsonProcessingException\r\n                {\r\n                    jgen.writeString(&quot;&quot;);\r\n                }\r\n            });\r\n            ObjectMapper mapper = mapperBuilder.build();\r\n            mapper.setSerializerProvider(sp);\r\n            return mapper;\r\n        }\r\n    \r\n    }","title":"Jackson: deserializing null Strings as empty Strings","body":"<p>In case you are looking for a global solution for spring boot, you can configure the <code>ObjectMapper</code></p>\n<pre><code>@Configuration\npublic class JacksonConfiguration {\n\n    @Bean\n    public ObjectMapper objectMapper(Jackson2ObjectMapperBuilder mapperBuilder) {\n        DefaultSerializerProvider sp = new DefaultSerializerProvider.Impl();\n        sp.setNullValueSerializer(new JsonSerializer&lt;Object&gt;() {\n            public void serialize(Object value, JsonGenerator jgen,\n                                  SerializerProvider provider)\n                    throws IOException, JsonProcessingException\n            {\n                jgen.writeString(&quot;&quot;);\n            }\n        });\n        ObjectMapper mapper = mapperBuilder.build();\n        mapper.setSerializerProvider(sp);\n        return mapper;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":934735,"reputation":23556,"user_id":963881,"accept_rate":83,"display_name":"syntagma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45986,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":20655358,"answer_count":5,"score":24,"last_activity_date":1661546063,"creation_date":1387360527,"question_id":20654810,"body_markdown":"I have the following class, that is mapped by Jackson (simplified version):\r\n\r\n    public class POI {\r\n    \t@JsonProperty(&quot;name&quot;)\r\n    \tprivate String name;\r\n    }\r\n\r\nIn some cases the server returns `&quot;name&quot;: null` and I would like to then set name to empty Java String.\r\n \r\nIs there any Jackson annotation or should I just check for the null inside my getter and return empty string if the property is `null`? ","title":"Jackson: deserializing null Strings as empty Strings","body":"<p>I have the following class, that is mapped by Jackson (simplified version):</p>\n\n<pre><code>public class POI {\n    @JsonProperty(\"name\")\n    private String name;\n}\n</code></pre>\n\n<p>In some cases the server returns <code>\"name\": null</code> and I would like to then set name to empty Java String.</p>\n\n<p>Is there any Jackson annotation or should I just check for the null inside my getter and return empty string if the property is <code>null</code>? </p>\n"},{"tags":["java","jvm","bytecode"],"answers":[{"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1365578554,"creation_date":1365578234,"answer_id":15919363,"question_id":15919317,"body_markdown":"JVM spec [&#167;2.9. Special Methods][1]:\n\n&gt; A class or interface has at most one class or interface initialization method and is initialized (&#167;5.5) by invoking that method. The initialization method of a class or interface has the special name `&lt;clinit&gt;`, takes no arguments, and is void (&#167;4.3.3).\n&gt;\n&gt; The name `&lt;clinit&gt;` is supplied by a compiler. Because the name &lt;clinit&gt; is not a valid identifier, it cannot be used directly in a program written in the Java programming language. **Class and interface initialization methods are invoked implicitly by the Java Virtual Machine; they are never invoked directly from any Java Virtual Machine instruction, but are invoked only indirectly as part of the class initialization process.**\n\nSee [Chapter 5][2] for further details on the class initialization process.\n\n\n  [1]: http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.9\n  [2]: http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html","title":"What invokes the class initializer method &lt;clinit&gt; and when?","body":"<p>JVM spec <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.9\" rel=\"noreferrer\">§2.9. Special Methods</a>:</p>\n<blockquote>\n<p>A class or interface has at most one class or interface initialization method and is initialized (§5.5) by invoking that method. The initialization method of a class or interface has the special name <code>&lt;clinit&gt;</code>, takes no arguments, and is void (§4.3.3).</p>\n<p>The name <code>&lt;clinit&gt;</code> is supplied by a compiler. Because the name  is not a valid identifier, it cannot be used directly in a program written in the Java programming language. <strong>Class and interface initialization methods are invoked implicitly by the Java Virtual Machine; they are never invoked directly from any Java Virtual Machine instruction, but are invoked only indirectly as part of the class initialization process.</strong></p>\n</blockquote>\n<p>See <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html\" rel=\"noreferrer\">Chapter 5</a> for further details on the class initialization process.</p>\n"},{"tags":[],"owner":{"account_id":1284041,"reputation":3613,"user_id":1237490,"accept_rate":100,"display_name":"Jaydeep Rajput"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365578608,"creation_date":1365578608,"answer_id":15919469,"question_id":15919317,"body_markdown":"`&lt;clinit&gt;` are the static initialization blocks for the class, and static field initialization and its invoked by JVM.\r\n\r\nJava Spec says,\r\nhttp://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html#12174\r\n\r\n\r\n    The initialization method of a class or interface is static and takes no arguments. It has the special name &lt;clinit&gt;. This name is supplied by a compiler. Because the name &lt;clinit&gt; is not a valid identifier, it cannot be used directly in a program written in the Java programming language. Class and interface initialization methods are invoked implicitly by the Java virtual machine","title":"What invokes the class initializer method &lt;clinit&gt; and when?","body":"<p><code>&lt;clinit&gt;</code> are the static initialization blocks for the class, and static field initialization and its invoked by JVM.</p>\n\n<p>Java Spec says,\n<a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html#12174\" rel=\"nofollow\">http://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html#12174</a></p>\n\n<pre><code>The initialization method of a class or interface is static and takes no arguments. It has the special name &lt;clinit&gt;. This name is supplied by a compiler. Because the name &lt;clinit&gt; is not a valid identifier, it cannot be used directly in a program written in the Java programming language. Class and interface initialization methods are invoked implicitly by the Java virtual machine\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1661545998,"creation_date":1365579989,"answer_id":15919919,"question_id":15919317,"body_markdown":"The `&lt;clinit&gt;` method is easily seen in class bytecode with bytecode outline tools. It is a static method added by javac and called by JVM after class loading, but only if a class needs static initialization.\r\n\r\n    public class Test1 {\r\n    \tstatic int x  = 1; \r\n\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t}\r\n    }\r\n\r\n    public class Test2 {\r\n    \tstatic final int x  = 1; \r\n\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t}\r\n    }\r\n\r\nTest1 has `&lt;clinit&gt;` because its field `x` needs to be initialized with 1; while Test2 has no `&lt;clinit&gt;` method because its `x` is a constant.\r\n\r\nIt&#39;s also interesting to note that `Class.forName` has `boolen intialize` param which determines if the class should be initialized after loading or not.\r\n","title":"What invokes the class initializer method &lt;clinit&gt; and when?","body":"<p>The <code>&lt;clinit&gt;</code> method is easily seen in class bytecode with bytecode outline tools. It is a static method added by javac and called by JVM after class loading, but only if a class needs static initialization.</p>\n<pre><code>public class Test1 {\n    static int x  = 1; \n\n    public static void main(String[] args) throws Exception {\n    }\n}\n\npublic class Test2 {\n    static final int x  = 1; \n\n    public static void main(String[] args) throws Exception {\n    }\n}\n</code></pre>\n<p>Test1 has <code>&lt;clinit&gt;</code> because its field <code>x</code> needs to be initialized with 1; while Test2 has no <code>&lt;clinit&gt;</code> method because its <code>x</code> is a constant.</p>\n<p>It's also interesting to note that <code>Class.forName</code> has <code>boolen intialize</code> param which determines if the class should be initialized after loading or not.</p>\n"}],"owner":{"account_id":247338,"reputation":4069,"user_id":521996,"accept_rate":75,"display_name":"George"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8862,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":15919363,"answer_count":3,"score":12,"last_activity_date":1661545998,"creation_date":1365578031,"question_id":15919317,"body_markdown":"I know that the **new**, **dup**, **invokespecial** and **astore** bytecode patterns will invoke the initializer method `&lt;init&gt;` during class instantiation. What invokes the special `&lt;clinit&gt;`method and when does this happen?\r\n\r\nMy guess is that `&lt;clinit&gt;` is invoked **before** `&lt;init&gt;` method. Is this documented in the JVM Specification or Java Language Specification? ","title":"What invokes the class initializer method &lt;clinit&gt; and when?","body":"<p>I know that the <strong>new</strong>, <strong>dup</strong>, <strong>invokespecial</strong> and <strong>astore</strong> bytecode patterns will invoke the initializer method <code>&lt;init&gt;</code> during class instantiation. What invokes the special <code>&lt;clinit&gt;</code>method and when does this happen?</p>\n<p>My guess is that <code>&lt;clinit&gt;</code> is invoked <strong>before</strong> <code>&lt;init&gt;</code> method. Is this documented in the JVM Specification or Java Language Specification?</p>\n"},{"tags":["java","atomic"],"comments":[{"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"score":45,"creation_date":1361725130,"post_id":15054086,"comment_id":21163881,"body_markdown":"One operation at a time.","body":"One operation at a time."},{"owner":{"account_id":1374245,"reputation":4806,"user_id":1308570,"accept_rate":76,"display_name":"kaysush"},"score":3,"creation_date":1361725204,"post_id":15054086,"comment_id":21163905,"body_markdown":"only one operation can be performed on the variable at a time.","body":"only one operation can be performed on the variable at a time."},{"owner":{"account_id":989600,"reputation":30745,"user_id":1007273,"display_name":"hovanessyan"},"score":0,"creation_date":1361725211,"post_id":15054086,"comment_id":21163910,"body_markdown":"http://www.ibm.com/developerworks/library/j-jtp11234/","body":"<a href=\"http://www.ibm.com/developerworks/library/j-jtp11234/\" rel=\"nofollow noreferrer\">ibm.com/developerworks/library/j-jtp11234</a>"},{"owner":{"account_id":66042,"reputation":5303,"user_id":193980,"accept_rate":48,"display_name":"Phlip"},"score":1,"creation_date":1393890481,"post_id":15054086,"comment_id":33630049,"body_markdown":"i suspect philosophy questions belong in http://codereview.stackexchange.com/","body":"i suspect philosophy questions belong in <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"},{"owner":{"account_id":188416,"reputation":10894,"user_id":427155,"accept_rate":85,"display_name":"H2ONaCl"},"score":0,"creation_date":1477369921,"post_id":15054086,"comment_id":67725508,"body_markdown":"Noting that some variables don&#39;t by default have atomic read and write, declaring them as `volatile long` or `volatile double` makes read atomic and write atomic.","body":"Noting that some variables don&#39;t by default have atomic read and write, declaring them as <code>volatile long</code> or <code>volatile double</code> makes read atomic and write atomic."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1638266972,"post_id":15054086,"comment_id":124037007,"body_markdown":"Atomic comes from Greek, meaning &quot;indivisible&quot;.  https://en.wikipedia.org/wiki/Atomicity_(database_systems) (Databases use &quot;atomicity&quot; for whole transactions the same way lockless programming uses it for single operations.  (Or for transactional-memory transactions))","body":"Atomic comes from Greek, meaning &quot;indivisible&quot;.  <a href=\"https://en.wikipedia.org/wiki/Atomicity_(database_systems)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Atomicity_(database_systems)</a> (Databases use &quot;atomicity&quot; for whole transactions the same way lockless programming uses it for single operations.  (Or for transactional-memory transactions))"}],"answers":[{"tags":[],"owner":{"account_id":97146,"reputation":44580,"user_id":263681,"accept_rate":100,"display_name":"Grant Thomas"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1361725934,"creation_date":1361725230,"answer_id":15054107,"question_id":15054086,"body_markdown":"It&#39;s something that &quot;appears to the rest of the system to occur instantaneously&quot;, and falls under categorisation of [Linearizability][1] in computing processes. To quote that linked article further:\r\n\r\n&gt; Atomicity is a guarantee of isolation from concurrent processes.\r\n&gt; Additionally, atomic operations commonly have a succeed-or-fail\r\n&gt; definition — they either successfully change the state of the system,\r\n&gt; or have no apparent effect.\r\n\r\nSo, for instance, in the context of a database system, one can have &#39;atomic commits&#39;, meaning that you can push a changeset of updates to a relational database and those changes will either all be submitted, or none of them at all in the event of failure, in this way data does not become corrupt, and consequential of locks and/or queues, the next operation will be a different write or a read, but only _after_ the fact. In the context of variables and threading this is much the same, applied to memory.\r\n\r\nYour quote highlights that this need _not_ be expected behaviour in all instances.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Linearizability","title":"What does &quot;atomic&quot; mean in programming?","body":"<p>It's something that \"appears to the rest of the system to occur instantaneously\", and falls under categorisation of <a href=\"http://en.wikipedia.org/wiki/Linearizability\">Linearizability</a> in computing processes. To quote that linked article further:</p>\n\n<blockquote>\n  <p>Atomicity is a guarantee of isolation from concurrent processes.\n  Additionally, atomic operations commonly have a succeed-or-fail\n  definition — they either successfully change the state of the system,\n  or have no apparent effect.</p>\n</blockquote>\n\n<p>So, for instance, in the context of a database system, one can have 'atomic commits', meaning that you can push a changeset of updates to a relational database and those changes will either all be submitted, or none of them at all in the event of failure, in this way data does not become corrupt, and consequential of locks and/or queues, the next operation will be a different write or a read, but only <em>after</em> the fact. In the context of variables and threading this is much the same, applied to memory.</p>\n\n<p>Your quote highlights that this need <em>not</em> be expected behaviour in all instances.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":465,"is_accepted":true,"score":465,"last_activity_date":1624547135,"creation_date":1361725675,"answer_id":15054186,"question_id":15054086,"body_markdown":"Here&#39;s an example: Suppose `foo` is a variable of type `long`, then the following operation is not an atomic operation (_in Java_):\r\n\r\n    foo = 65465498L;\r\n\r\nIndeed, the variable is written using two separate operations: one that writes the first 32 bits, and a second one which writes the last 32 bits. That means that another thread might read the value of `foo`, and see the intermediate state. \r\n\r\nMaking the operation atomic consists in using synchronization mechanisms in order to make sure that the operation is seen, from any other thread, as a single, atomic (i.e. not splittable in parts), operation. That means that any other thread, once the operation is made atomic, will either see the value of `foo` before the assignment, or after the assignment. But never the intermediate value.\r\n\r\nA simple way of doing this is to make the [variable volatile][1]:\r\n\r\n    private volatile long foo;\r\n\r\nOr to synchronize every access to the variable:\r\n\r\n    public synchronized void setFoo(long value) {\r\n        this.foo = value;\r\n    }\r\n\r\n    public synchronized long getFoo() {\r\n        return this.foo;\r\n    }\r\n    // no other use of foo outside of these two methods, unless also synchronized\r\n\r\nOr to replace it with an [`AtomicLong`][2]:\r\n\r\n    private AtomicLong foo;\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\r\n  [2]: https://docs.oracle.com/javase/10/docs/api/java/util/concurrent/atomic/AtomicLong.html","title":"What does &quot;atomic&quot; mean in programming?","body":"<p>Here's an example: Suppose <code>foo</code> is a variable of type <code>long</code>, then the following operation is not an atomic operation (<em>in Java</em>):</p>\n<pre><code>foo = 65465498L;\n</code></pre>\n<p>Indeed, the variable is written using two separate operations: one that writes the first 32 bits, and a second one which writes the last 32 bits. That means that another thread might read the value of <code>foo</code>, and see the intermediate state.</p>\n<p>Making the operation atomic consists in using synchronization mechanisms in order to make sure that the operation is seen, from any other thread, as a single, atomic (i.e. not splittable in parts), operation. That means that any other thread, once the operation is made atomic, will either see the value of <code>foo</code> before the assignment, or after the assignment. But never the intermediate value.</p>\n<p>A simple way of doing this is to make the <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"noreferrer\">variable volatile</a>:</p>\n<pre><code>private volatile long foo;\n</code></pre>\n<p>Or to synchronize every access to the variable:</p>\n<pre><code>public synchronized void setFoo(long value) {\n    this.foo = value;\n}\n\npublic synchronized long getFoo() {\n    return this.foo;\n}\n// no other use of foo outside of these two methods, unless also synchronized\n</code></pre>\n<p>Or to replace it with an <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/concurrent/atomic/AtomicLong.html\" rel=\"noreferrer\"><code>AtomicLong</code></a>:</p>\n<pre><code>private AtomicLong foo;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1454438205,"creation_date":1361725785,"answer_id":15054211,"question_id":15054086,"body_markdown":"If you have several threads executing the methods m1 and m2 in the code below:\r\n\r\n    class SomeClass {\r\n        private int i = 0;\r\n\r\n        public void m1() { i = 5; }\r\n        public int m2() { return i; }\r\n    }\r\n\r\nyou have the guarantee that any thread calling `m2` will either read 0 or 5.\r\n\r\nOn the other hand, with this code (where `i` is a long):\r\n\r\n    class SomeClass {\r\n        private long i = 0;\r\n\r\n        public void m1() { i = 1234567890L; }\r\n        public long m2() { return i; }\r\n    }\r\n\r\na thread calling `m2` could read 0, 1234567890L, or some other random value because the statement `i = 1234567890L` is not guaranteed to be atomic for a `long` (a JVM could write the first 32 bits and the last 32 bits in two operations and a thread might observe `i` in between).","title":"What does &quot;atomic&quot; mean in programming?","body":"<p>If you have several threads executing the methods m1 and m2 in the code below:</p>\n\n<pre><code>class SomeClass {\n    private int i = 0;\n\n    public void m1() { i = 5; }\n    public int m2() { return i; }\n}\n</code></pre>\n\n<p>you have the guarantee that any thread calling <code>m2</code> will either read 0 or 5.</p>\n\n<p>On the other hand, with this code (where <code>i</code> is a long):</p>\n\n<pre><code>class SomeClass {\n    private long i = 0;\n\n    public void m1() { i = 1234567890L; }\n    public long m2() { return i; }\n}\n</code></pre>\n\n<p>a thread calling <code>m2</code> could read 0, 1234567890L, or some other random value because the statement <code>i = 1234567890L</code> is not guaranteed to be atomic for a <code>long</code> (a JVM could write the first 32 bits and the last 32 bits in two operations and a thread might observe <code>i</code> in between).</p>\n"},{"tags":[],"owner":{"account_id":188416,"reputation":10894,"user_id":427155,"accept_rate":85,"display_name":"H2ONaCl"},"down_vote_count":0,"up_vote_count":91,"is_accepted":false,"score":91,"last_activity_date":1403702719,"creation_date":1403702719,"answer_id":24410004,"question_id":15054086,"body_markdown":"&quot;Atomic operation&quot; means an operation that appears to be instantaneous from the perspective of all other threads. You don&#39;t need to worry about a partly complete operation when the guarantee applies.","title":"What does &quot;atomic&quot; mean in programming?","body":"<p>\"Atomic operation\" means an operation that appears to be instantaneous from the perspective of all other threads. You don't need to worry about a partly complete operation when the guarantee applies.</p>\n"},{"tags":[],"owner":{"account_id":221893,"reputation":7386,"user_id":480120,"display_name":"Kurt Zhong"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1412064218,"creation_date":1411969251,"answer_id":26093164,"question_id":15054086,"body_markdown":"Just found a post [Atomic vs. Non-Atomic Operations][1] to be very helpful to me.\r\n\r\n\r\n&gt; &quot;An operation acting on shared memory is atomic if it completes in a single step relative to other threads. \r\n\r\n&gt; When an atomic store is performed on a shared memory, no other thread can observe the modification half-complete. \r\n\r\n&gt; When an atomic load is performed on a shared variable, it reads the entire value as it appeared at a single moment in time.&quot;\r\n\r\n\r\n  [1]: http://preshing.com/20130618/atomic-vs-non-atomic-operations/ &quot;Atomic vs. Non-Atomic Operations&quot;","title":"What does &quot;atomic&quot; mean in programming?","body":"<p>Just found a post <a href=\"http://preshing.com/20130618/atomic-vs-non-atomic-operations/\">Atomic vs. Non-Atomic Operations</a> to be very helpful to me.</p>\n\n<blockquote>\n  <p>\"An operation acting on shared memory is atomic if it completes in a single step relative to other threads. </p>\n  \n  <p>When an atomic store is performed on a shared memory, no other thread can observe the modification half-complete. </p>\n  \n  <p>When an atomic load is performed on a shared variable, it reads the entire value as it appeared at a single moment in time.\"</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":10228169,"reputation":183,"user_id":7549946,"accept_rate":100,"display_name":"Eugene Shamkin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586762083,"creation_date":1586762083,"answer_id":61183087,"question_id":15054086,"body_markdown":"In Java reading and writing fields of all types except long and double occurs atomically, and if the field is declared with the volatile modifier, even long and double are atomically read and written. That is, we get 100% either what was there, or what happened there, nor can there be any intermediate result in the variables.","title":"What does &quot;atomic&quot; mean in programming?","body":"<p>In Java reading and writing fields of all types except long and double occurs atomically, and if the field is declared with the volatile modifier, even long and double are atomically read and written. That is, we get 100% either what was there, or what happened there, nor can there be any intermediate result in the variables.</p>\n"},{"tags":[],"owner":{"account_id":10887284,"reputation":806,"user_id":8004365,"display_name":"Malik Mussabeheen Noor"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1661545590,"creation_date":1661545590,"answer_id":73506172,"question_id":15054086,"body_markdown":"In simple words, the atomic means the operation will be either completed or not. \r\nThe other threads or CPUs won&#39;t catch it in the middle of the operation.\r\n","title":"What does &quot;atomic&quot; mean in programming?","body":"<p>In simple words, the atomic means the operation will be either completed or not.\nThe other threads or CPUs won't catch it in the middle of the operation.</p>\n"}],"owner":{"account_id":2409411,"reputation":3591,"user_id":2104910,"display_name":"James"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211689,"favorite_count":0,"down_vote_count":1,"up_vote_count":359,"accepted_answer_id":15054186,"answer_count":7,"score":358,"last_activity_date":1661545590,"creation_date":1361725057,"question_id":15054086,"body_markdown":"In the Effective Java book, it states: \r\n\r\n&gt; The language specification guarantees that reading or writing a\r\n&gt; variable is atomic unless the variable is of type `long` or `double` [JLS,\r\n&gt; 17.4.7].\r\n\r\nWhat does &quot;atomic&quot; mean in the context of Java programming, or programming in general?","title":"What does &quot;atomic&quot; mean in programming?","body":"<p>In the Effective Java book, it states: </p>\n\n<blockquote>\n  <p>The language specification guarantees that reading or writing a\n  variable is atomic unless the variable is of type <code>long</code> or <code>double</code> [JLS,\n  17.4.7].</p>\n</blockquote>\n\n<p>What does \"atomic\" mean in the context of Java programming, or programming in general?</p>\n"},{"tags":["java","debugging"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1661562561,"post_id":73506081,"comment_id":129808947,"body_markdown":"Intellij IDEA allows you to evaluate expressions and print their values when you hit a breakpoint. I imagine most IDEs do.","body":"Intellij IDEA allows you to evaluate expressions and print their values when you hit a breakpoint. I imagine most IDEs do."}],"owner":{"account_id":15923764,"reputation":328,"user_id":11489951,"display_name":"A.Z."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661544985,"creation_date":1661544985,"question_id":73506081,"body_markdown":"Recently I&#39;ve had to track down where a specific value in a very large program comes from. Is there a type of tool that allows you to see this easily? Essentially, you would set a breakpoint in a function, and ask the tool to show the &#39;value trace&#39; for some variable, or a value in that variable.\r\n\r\nDebugging this java snippet, and running the tool on the `x` variable at the breakpoint would produce information similar to the following list.\r\n\r\n```java\r\nvoid foo1() {\r\n  int[] array = new int[]{ 5, 6, 7 };\r\n\r\n  for(int x : array) {\r\n    foo2(new String[] { Integer.toString(x) });\r\n  }\r\n}\r\n\r\nvoid foo2(String[] x) {\r\n  System.out.println(Arrays.toString(x)); // breakpoint here\r\n}\r\n```\r\n\r\n 1. parameter: `String[] x`\r\n 2. local function call: `foo2( ... )`\r\n 3. array constructor: `new String[] { ... }`\r\n 4. library function call: `Integer.toString( ... )`\r\n 5. for loop: `for(int x : ...)` from variable: `array`\r\n 6. array constructor: `new int[]{ ... }`\r\n 7. constant: `5` (pressing continue in the debugger would show `6` then `7`)","title":"Value Tracing while debugging","body":"<p>Recently I've had to track down where a specific value in a very large program comes from. Is there a type of tool that allows you to see this easily? Essentially, you would set a breakpoint in a function, and ask the tool to show the 'value trace' for some variable, or a value in that variable.</p>\n<p>Debugging this java snippet, and running the tool on the <code>x</code> variable at the breakpoint would produce information similar to the following list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void foo1() {\n  int[] array = new int[]{ 5, 6, 7 };\n\n  for(int x : array) {\n    foo2(new String[] { Integer.toString(x) });\n  }\n}\n\nvoid foo2(String[] x) {\n  System.out.println(Arrays.toString(x)); // breakpoint here\n}\n</code></pre>\n<ol>\n<li>parameter: <code>String[] x</code></li>\n<li>local function call: <code>foo2( ... )</code></li>\n<li>array constructor: <code>new String[] { ... }</code></li>\n<li>library function call: <code>Integer.toString( ... )</code></li>\n<li>for loop: <code>for(int x : ...)</code> from variable: <code>array</code></li>\n<li>array constructor: <code>new int[]{ ... }</code></li>\n<li>constant: <code>5</code> (pressing continue in the debugger would show <code>6</code> then <code>7</code>)</li>\n</ol>\n"},{"tags":["java","jasper-reports","zxing"],"comments":[{"owner":{"account_id":3008303,"reputation":1000,"user_id":4148965,"display_name":"Kamal Singh"},"score":0,"creation_date":1511141277,"post_id":29215330,"comment_id":81720526,"body_markdown":"I wrote an answer using `zxing` to generate the QR code in [Stack Overflow: qr-code-integration-in-jasperreport](https://stackoverflow.com/questions/29786226/qr-code-integration-in-jasperreport/47383846#47383846). If suits your requirement you can use it.","body":"I wrote an answer using <code>zxing</code> to generate the QR code in <a href=\"https://stackoverflow.com/questions/29786226/qr-code-integration-in-jasperreport/47383846#47383846\">Stack Overflow: qr-code-integration-in-jasperreport</a>. If suits your requirement you can use it."}],"answers":[{"tags":[],"owner":{"account_id":958762,"reputation":4773,"user_id":983559,"display_name":"dada67"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469466531,"creation_date":1427365963,"answer_id":29276256,"question_id":29215330,"body_markdown":"The JRImageRenderer method that you were using has been removed several versions ago.\r\n\r\nAn equivalent expression would look something like the following:\r\n\r\n    net.sf.jasperreports.engine.RenderableUtil\r\n        .getInstance($P{JASPER_REPORTS_CONTEXT})\r\n        .getRenderable(\r\n            com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(\r\n                new com.google.zxing.qrcode.QRCodeWriter().encode(\r\n                    $V{left_sn},\r\n                    com.google.zxing.BarcodeFormat.QR_CODE,300 ,150\r\n                )\r\n            ), \r\n            net.sf.jasperreports.engine.type.ImageTypeEnum.PNG,\r\n            net.sf.jasperreports.engine.type.OnErrorTypeEnum.ERROR\r\n        )","title":"JasperReport 6.0.3 Using Zxing to Generate QR Codes","body":"<p>The JRImageRenderer method that you were using has been removed several versions ago.</p>\n\n<p>An equivalent expression would look something like the following:</p>\n\n<pre><code>net.sf.jasperreports.engine.RenderableUtil\n    .getInstance($P{JASPER_REPORTS_CONTEXT})\n    .getRenderable(\n        com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(\n            new com.google.zxing.qrcode.QRCodeWriter().encode(\n                $V{left_sn},\n                com.google.zxing.BarcodeFormat.QR_CODE,300 ,150\n            )\n        ), \n        net.sf.jasperreports.engine.type.ImageTypeEnum.PNG,\n        net.sf.jasperreports.engine.type.OnErrorTypeEnum.ERROR\n    )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26160660,"reputation":1,"user_id":19847267,"display_name":"LizSoler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661451312,"creation_date":1661451312,"answer_id":73492056,"question_id":29215330,"body_markdown":"Use the next code in your Jasper, If you need generate a pdf since Java application with JasperRunManager.runReportToPdf(inputStream, parameters, JrDatasource):\r\n com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(new com.google.zxing.qrcode.QRCodeWriter().encode($P{parameter_QR},com.google.zxing.BarcodeFormat.QR_CODE,300,300))\r\n\r\n","title":"JasperReport 6.0.3 Using Zxing to Generate QR Codes","body":"<p>Use the next code in your Jasper, If you need generate a pdf since Java application with JasperRunManager.runReportToPdf(inputStream, parameters, JrDatasource):\ncom.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(new com.google.zxing.qrcode.QRCodeWriter().encode($P{parameter_QR},com.google.zxing.BarcodeFormat.QR_CODE,300,300))</p>\n"},{"tags":[],"owner":{"account_id":26169084,"reputation":1,"user_id":19854406,"display_name":"LizSoler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661544725,"creation_date":1661544725,"answer_id":73506039,"question_id":29215330,"body_markdown":"In addition is necessary import the jars, used to create the QR code in your project too (zxing-core, zxing-javase, barcode)","title":"JasperReport 6.0.3 Using Zxing to Generate QR Codes","body":"<p>In addition is necessary import the jars, used to create the QR code in your project too (zxing-core, zxing-javase, barcode)</p>\n"}],"owner":{"account_id":2708925,"reputation":155,"user_id":2337872,"accept_rate":60,"display_name":"Steve Dyke"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3694,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1661544725,"creation_date":1427127963,"question_id":29215330,"body_markdown":"In my web app I was using JasperReport 4 and zxing jar to generate QR Codes. I have upgraded to JasperReports 6.0.3 and zxing 2.2 and now I get the following when trying to generate the report that worked previously:\r\n    \r\n    00000026 JRFillSubrepo E net.sf.jasperreports.engine.fill.JRFillSubreport prepare Fill 1: exception\r\n                                 net.sf.jasperreports.engine.fill.JRExpressionEvalException: Error evaluating expression : \r\n\tSource text : JRImageRenderer.getInstance(com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(new com.google.zxing.qrcode.QRCodeWriter().encode($V{left_sn},com.google.zxing.BarcodeFormat.QR_CODE,300 ,150 )), JRRenderable.IMAGE_TYPE_PNG, JRImage.ON_ERROR_TYPE_ERROR)\r\n\tat net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:262)\r\n\tat net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:610)\r\n\tat net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:578)\r\n\tat net.sf.jasperreports.engine.fill.JRFillElement.evaluateExpression(JRFillElement.java:1015)\r\n\tat net.sf.jasperreports.engine.fill.JRFillImage.evaluateImage(JRFillImage.java:539)\r\n\tat net.sf.jasperreports.engine.fill.JRFillImage.evaluate(JRFillImage.java:519)\r\n\tat net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:258)\r\n\tat net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:454)\r\n\tat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2023)\r\n\tat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:753)\r\n\tat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:263)\r\n\tat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:123)\r\n\tat net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:539)\r\n\tat net.sf.jasperreports.engine.fill.BaseReportFiller.fill(BaseReportFiller.java:393)\r\n\tat net.sf.jasperreports.engine.fill.JRFillSubreport.fillSubreport(JRFillSubreport.java:715)\r\n\tat net.sf.jasperreports.engine.fill.JRSubreportRunnable.run(JRSubreportRunnable.java:58)\r\n\tat net.sf.jasperreports.engine.fill.AbstractThreadSubreportRunner.run(AbstractThreadSubreportRunner.java:202)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)\r\n\tat java.lang.Thread.run(Thread.java:737)\r\n    Caused by: java.lang.NoSuchMethodError: net/sf/jasperreports/engine/JRImageRenderer.getInstance(Ljava/awt/Image;BB)Lnet/sf/jasperreports/engine/JRRenderable;\r\n\tat SeatRowMatrixLeftSubReportV6_2_1410891674951_480225.evaluate(SeatRowMatrixLeftSubReportV6_2_1410891674951_480225:195)\r\n\tat net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:249)\r\n\t... 19 more\r\n\r\n","title":"JasperReport 6.0.3 Using Zxing to Generate QR Codes","body":"<p>In my web app I was using JasperReport 4 and zxing jar to generate QR Codes. I have upgraded to JasperReports 6.0.3 and zxing 2.2 and now I get the following when trying to generate the report that worked previously:</p>\n\n<pre><code>00000026 JRFillSubrepo E net.sf.jasperreports.engine.fill.JRFillSubreport prepare Fill 1: exception\n                             net.sf.jasperreports.engine.fill.JRExpressionEvalException: Error evaluating expression : \nSource text : JRImageRenderer.getInstance(com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(new com.google.zxing.qrcode.QRCodeWriter().encode($V{left_sn},com.google.zxing.BarcodeFormat.QR_CODE,300 ,150 )), JRRenderable.IMAGE_TYPE_PNG, JRImage.ON_ERROR_TYPE_ERROR)\nat net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:262)\nat net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:610)\nat net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:578)\nat net.sf.jasperreports.engine.fill.JRFillElement.evaluateExpression(JRFillElement.java:1015)\nat net.sf.jasperreports.engine.fill.JRFillImage.evaluateImage(JRFillImage.java:539)\nat net.sf.jasperreports.engine.fill.JRFillImage.evaluate(JRFillImage.java:519)\nat net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:258)\nat net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:454)\nat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2023)\nat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:753)\nat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:263)\nat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:123)\nat net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:539)\nat net.sf.jasperreports.engine.fill.BaseReportFiller.fill(BaseReportFiller.java:393)\nat net.sf.jasperreports.engine.fill.JRFillSubreport.fillSubreport(JRFillSubreport.java:715)\nat net.sf.jasperreports.engine.fill.JRSubreportRunnable.run(JRSubreportRunnable.java:58)\nat net.sf.jasperreports.engine.fill.AbstractThreadSubreportRunner.run(AbstractThreadSubreportRunner.java:202)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)\nat java.lang.Thread.run(Thread.java:737)\nCaused by: java.lang.NoSuchMethodError: net/sf/jasperreports/engine/JRImageRenderer.getInstance(Ljava/awt/Image;BB)Lnet/sf/jasperreports/engine/JRRenderable;\nat SeatRowMatrixLeftSubReportV6_2_1410891674951_480225.evaluate(SeatRowMatrixLeftSubReportV6_2_1410891674951_480225:195)\nat net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:249)\n... 19 more\n</code></pre>\n"},{"tags":["java","spring","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661544329,"creation_date":1661544329,"answer_id":73505994,"question_id":73505836,"body_markdown":"First of all the `buildFlow()` method must not be marked with `@Bean` : the `IntegrationFlowAdapter` does the trick to register everything. \n\nYou can add `poller` to the endpoint spec. See a second arg of that `handle()`. Only the point that input channel for this polling endpoint must be pollable - the `QueueChannel` exists out-of-the-box and you can place it just before your `handle()`.","title":"Possible to add a delay in spring integration DSL?","body":"<p>First of all the <code>buildFlow()</code> method must not be marked with <code>@Bean</code> : the <code>IntegrationFlowAdapter</code> does the trick to register everything.</p>\n<p>You can add <code>poller</code> to the endpoint spec. See a second arg of that <code>handle()</code>. Only the point that input channel for this polling endpoint must be pollable - the <code>QueueChannel</code> exists out-of-the-box and you can place it just before your <code>handle()</code>.</p>\n"}],"owner":{"account_id":26153269,"reputation":17,"user_id":19840892,"display_name":"user19840892"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73505994,"answer_count":1,"score":0,"last_activity_date":1661544329,"creation_date":1661543096,"question_id":73505836,"body_markdown":"I have the following [adapter][1]: \r\n\r\n```\r\n@Component\r\nclass MyCustomFlow : IntegrationFlowAdapter() {\r\n\r\n    fun singleThreadTaskExecutor(): TaskExecutor {\r\n        val executor = ThreadPoolTaskExecutor()\r\n        executor.maxPoolSize = 1\r\n        executor.initialize()\r\n        return executor\r\n    }\r\n\r\n    @Filter\r\n    fun filter(data: SomeData): Boolean = ...\r\n\r\n    @Transformer\r\n    fun transform(customer: Data): Message&lt;SomeData&gt; {\r\n      ....\r\n    }\r\n\r\n    @ServiceActivator\r\n    fun handle(data: Data): SomeData {\r\n       ....\r\n    }\r\n\r\n    @Bean(name = [PollerMetadata.DEFAULT_POLLER])\r\n    fun poller(): PollerSpec? {\r\n        return Pollers.fixedRate(500)\r\n    }\r\n\r\n    @Bean\r\n    override fun buildFlow(): IntegrationFlowDefinition&lt;*&gt; {\r\n        return from(MessageChannels.queue(&quot;updateCustomersLocation&quot;))\r\n            .channel(MessageChannels.executor(singleThreadTaskExecutor()))\r\n            .split()\r\n            .filter(this)\r\n            .transform(this)\r\n            .handle(this)\r\n            .channel(&quot;customerLocationFetched&quot;)\r\n    }\r\n}\r\n```\r\n\r\nAnd if I understand the Java DSL, the `handle` is:\r\n\r\n&gt; handle → ServiceActivator\r\n\r\n\r\nGiven a ServiceActivator, outside of the IntegrationFlowAdapter, I have an option to define a `poller`. Within that poller I could add a delay before the next messages is processed. \r\n\r\n```\r\n    @ServiceActivator(\r\n        poller = [Poller(fixedDelay = &quot;3000&quot;, maxMessagesPerPoll = &quot;1&quot;, fixedRate = &quot;3000&quot;)]\r\n    )\r\n   ```\r\n\r\nWould it be possible, within the adapter, to add a delay for the `ServiceActivator` (the method named `handle`, similar to the logic I get if I add another channel. \r\n\r\n```\r\n    @Bean\r\n    override fun buildFlow(): IntegrationFlowDefinition&lt;*&gt; {\r\n        return from(MessageChannels.queue(&quot;updateCustomersLocation&quot;))\r\n            .channel(MessageChannels.executor(singleThreadTaskExecutor()))\r\n            .split()\r\n            .filter(this)\r\n            .transform(this)\r\n            .channel(&quot;myNewChannel&quot;)\r\n            //.handle(this)\r\n            //.channel(&quot;customerLocationFetched&quot;)\r\n    }\r\n```\r\n\r\nAnd then from outside the adapter I could just define a new `ServiceActivator`:\r\n```\r\n    @ServiceActivator(\r\n        inputChannel = &quot;myNewChannel&quot;\r\n        poller = [Poller(fixedDelay = &quot;3000&quot;, maxMessagesPerPoll = &quot;1&quot;, fixedRate = &quot;3000&quot;)]\r\n    )\r\n```\r\n\r\nThe reason I want a delay between the messages in the handle/service activator is that the method sends requests and I wanna control the rate the request are sent.\r\n\r\n  [1]: https://docs.spring.io/spring-integration/reference/html/dsl.html#java-dsl-flow-adapter","title":"Possible to add a delay in spring integration DSL?","body":"<p>I have the following <a href=\"https://docs.spring.io/spring-integration/reference/html/dsl.html#java-dsl-flow-adapter\" rel=\"nofollow noreferrer\">adapter</a>:</p>\n<pre><code>@Component\nclass MyCustomFlow : IntegrationFlowAdapter() {\n\n    fun singleThreadTaskExecutor(): TaskExecutor {\n        val executor = ThreadPoolTaskExecutor()\n        executor.maxPoolSize = 1\n        executor.initialize()\n        return executor\n    }\n\n    @Filter\n    fun filter(data: SomeData): Boolean = ...\n\n    @Transformer\n    fun transform(customer: Data): Message&lt;SomeData&gt; {\n      ....\n    }\n\n    @ServiceActivator\n    fun handle(data: Data): SomeData {\n       ....\n    }\n\n    @Bean(name = [PollerMetadata.DEFAULT_POLLER])\n    fun poller(): PollerSpec? {\n        return Pollers.fixedRate(500)\n    }\n\n    @Bean\n    override fun buildFlow(): IntegrationFlowDefinition&lt;*&gt; {\n        return from(MessageChannels.queue(&quot;updateCustomersLocation&quot;))\n            .channel(MessageChannels.executor(singleThreadTaskExecutor()))\n            .split()\n            .filter(this)\n            .transform(this)\n            .handle(this)\n            .channel(&quot;customerLocationFetched&quot;)\n    }\n}\n</code></pre>\n<p>And if I understand the Java DSL, the <code>handle</code> is:</p>\n<blockquote>\n<p>handle → ServiceActivator</p>\n</blockquote>\n<p>Given a ServiceActivator, outside of the IntegrationFlowAdapter, I have an option to define a <code>poller</code>. Within that poller I could add a delay before the next messages is processed.</p>\n<pre><code>    @ServiceActivator(\n        poller = [Poller(fixedDelay = &quot;3000&quot;, maxMessagesPerPoll = &quot;1&quot;, fixedRate = &quot;3000&quot;)]\n    )\n</code></pre>\n<p>Would it be possible, within the adapter, to add a delay for the <code>ServiceActivator</code> (the method named <code>handle</code>, similar to the logic I get if I add another channel.</p>\n<pre><code>    @Bean\n    override fun buildFlow(): IntegrationFlowDefinition&lt;*&gt; {\n        return from(MessageChannels.queue(&quot;updateCustomersLocation&quot;))\n            .channel(MessageChannels.executor(singleThreadTaskExecutor()))\n            .split()\n            .filter(this)\n            .transform(this)\n            .channel(&quot;myNewChannel&quot;)\n            //.handle(this)\n            //.channel(&quot;customerLocationFetched&quot;)\n    }\n</code></pre>\n<p>And then from outside the adapter I could just define a new <code>ServiceActivator</code>:</p>\n<pre><code>    @ServiceActivator(\n        inputChannel = &quot;myNewChannel&quot;\n        poller = [Poller(fixedDelay = &quot;3000&quot;, maxMessagesPerPoll = &quot;1&quot;, fixedRate = &quot;3000&quot;)]\n    )\n</code></pre>\n<p>The reason I want a delay between the messages in the handle/service activator is that the method sends requests and I wanna control the rate the request are sent.</p>\n"},{"tags":["java","optaplanner"],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661528325,"creation_date":1661528325,"answer_id":73503474,"question_id":73502634,"body_markdown":"In order for planning variables to be initializable, they must be able to accept `null` as a value. Java primitive types (such as `int`) are not capable of doing that, therefore your planning variable needs to be an `Integer`. The error message even tells you to do that, although the wording is a bit cryptic.\r\n\r\nAs a side note, I think we should be able to handle this situation better. If people don&#39;t want `null` in there, we should not force them. Something to consider for future development.\r\n\r\n","title":"Optaplanner : Initializing planning variable problem","body":"<p>In order for planning variables to be initializable, they must be able to accept <code>null</code> as a value. Java primitive types (such as <code>int</code>) are not capable of doing that, therefore your planning variable needs to be an <code>Integer</code>. The error message even tells you to do that, although the wording is a bit cryptic.</p>\n<p>As a side note, I think we should be able to handle this situation better. If people don't want <code>null</code> in there, we should not force them. Something to consider for future development.</p>\n"}],"owner":{"account_id":26162032,"reputation":31,"user_id":19848397,"display_name":"yassine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73503474,"answer_count":1,"score":1,"last_activity_date":1661544156,"creation_date":1661524353,"question_id":73502634,"body_markdown":"I am new to Optaplanner and to get familiar with it I tried to run a simple code. \r\nThe idea is I have one single planning variable of type integer, that has a range between 1 and 30, that I try to maximize. So normally the solver should give me a value of 30. \r\n\r\n \r\n\r\nMy code is as follows : \r\n\r\n**Planning entity and planning variable :**\r\n\r\n \r\n\r\n    @PlanningEntity\r\n    public class variable {\r\n    \r\n    \t@PlanningVariable(valueRangeProviderRefs = &quot;xRange&quot;)\r\n    \tprivate Integer x;\r\n    \r\n    \tpublic variable() {\r\n    \r\n    \t}\t\r\n    \r\n    \tpublic Integer getX() {\r\n    \t\treturn x;\r\n    \t}\r\n    \r\n    \tpublic void setX(Integer x) {\r\n    \t\tthis.x = x;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\n**Planning solution** \r\n\r\n  @PlanningSolution\r\npublic class Planningsolution {\r\n\r\n\t@PlanningEntityProperty\r\n\tprivate variable variable;\r\n\t\r\n\t@ValueRangeProvider(id=&quot;xRange&quot;)\r\n\tpublic CountableValueRange&lt;Integer&gt; getxRange(){\r\n\t\treturn ValueRangeFactory.createIntValueRange(1, 30);\r\n\t}\r\n\t\r\n    @PlanningScore\r\n    private HardSoftScore score;\r\n    \r\n    public Planningsolution() {\r\n\r\n\t}\r\n\r\n\tpublic variable getVariable() {\r\n\t\treturn variable;\r\n\t}\r\n\r\n\tpublic void setVariable(variable variable) {\r\n\t\tthis.variable = variable;\r\n\t}\r\n\r\n\tpublic HardSoftScore getScore() {\r\n\t\treturn score;\r\n\t}\r\n\r\n\tpublic void setScore(HardSoftScore score) {\r\n\t\tthis.score = score;\r\n\t}    \t\r\n}\r\n\r\n**Constraint Provider**\r\n\r\n    public class SimpleConstraintProvider implements ConstraintProvider {\r\n    \r\n    \r\n    \t\r\n    \t @Override\r\n    \t    public Constraint[] defineConstraints(ConstraintFactory constraintFactory) {\r\n    \t        return new Constraint[] {\r\n    \t                // Hard constraints\r\n    \t                maxValue(constraintFactory),\r\n    \r\n    \t        };\r\n    \t }\r\n    \t        \r\n    \t     private Constraint maxValue (ConstraintFactory constraintFactory) {\r\n    \t        \t\r\n    \t        \treturn constraintFactory.forEach(variable.class)\r\n    \t        \t\t\t.reward(&quot;maximum&quot;, HardSoftScore.ONE_SOFT,variable::getX);\r\n    \t        \t    }\r\n    }\r\n\r\n**Main :**\r\n\r\n    public class SimpleApp {\r\n    \r\n    \t private static final Logger LOGGER = LoggerFactory.getLogger(SimpleApp.class);\r\n    \r\n    \t    public static void main(String[] args) {\r\n    \t        SolverFactory&lt;Planningsolution&gt; solverFactory = SolverFactory.create(new SolverConfig()\r\n    \t                .withSolutionClass(Planningsolution.class)\r\n    \t                .withEntityClasses(variable.class)\r\n    \t                .withConstraintProviderClass(SimpleConstraintProvider.class)\r\n    \r\n    \t                .withTerminationSpentLimit(Duration.ofSeconds(10)));\r\n    \r\n    \t        // Load the problem\r\n    \t        Planningsolution problem = new Planningsolution();\r\n    \t        \r\n    \t        \r\n    \r\n    \t        // Solve the problem\r\n    \t        Solver&lt;Planningsolution&gt; solver = solverFactory.buildSolver();\r\n    \t        Planningsolution solution = solver.solve(problem);\r\n    \r\n    \t        // Visualize the solution\r\n    \t       System.out.println(&quot;solution: &quot; + display(solution) + &quot;\\n&quot; + &quot;score: &quot; + solution.getScore());;\r\n    \t    }\r\n    \t\r\n    \t    \r\n    \t    public static Integer display(Planningsolution solution) {\r\n    \t    \tvariable var = new variable();\r\n    \t    \treturn var.getX();\r\n    \t    }\r\n    }\r\n\r\n**logback.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;configuration&gt;\r\n    \r\n      &lt;appender name=&quot;appender&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n          &lt;pattern&gt;%d [%t] %-5p %m%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n      &lt;/appender&gt;\r\n    \r\n      &lt;logger name=&quot;org.optaplanner&quot; level=&quot;info&quot;/&gt;\r\n    \r\n      &lt;root level=&quot;warn&quot;&gt;\r\n        &lt;appender-ref ref=&quot;appender&quot;/&gt;\r\n      &lt;/root&gt;\r\n    \r\n    &lt;/configuration&gt;\r\n\r\nThe output i get is : \r\n\r\n&gt; solution: null \r\n&gt; score: 0hard/0soft","title":"Optaplanner : Initializing planning variable problem","body":"<p>I am new to Optaplanner and to get familiar with it I tried to run a simple code.\nThe idea is I have one single planning variable of type integer, that has a range between 1 and 30, that I try to maximize. So normally the solver should give me a value of 30.</p>\n<p>My code is as follows :</p>\n<p><strong>Planning entity and planning variable :</strong></p>\n<pre><code>@PlanningEntity\npublic class variable {\n\n    @PlanningVariable(valueRangeProviderRefs = &quot;xRange&quot;)\n    private Integer x;\n\n    public variable() {\n\n    }   \n\n    public Integer getX() {\n        return x;\n    }\n\n    public void setX(Integer x) {\n        this.x = x;\n    }\n    \n}\n</code></pre>\n<p><strong>Planning solution</strong></p>\n<p>@PlanningSolution\npublic class Planningsolution {</p>\n<pre><code>@PlanningEntityProperty\nprivate variable variable;\n\n@ValueRangeProvider(id=&quot;xRange&quot;)\npublic CountableValueRange&lt;Integer&gt; getxRange(){\n    return ValueRangeFactory.createIntValueRange(1, 30);\n}\n\n@PlanningScore\nprivate HardSoftScore score;\n\npublic Planningsolution() {\n\n}\n\npublic variable getVariable() {\n    return variable;\n}\n\npublic void setVariable(variable variable) {\n    this.variable = variable;\n}\n\npublic HardSoftScore getScore() {\n    return score;\n}\n\npublic void setScore(HardSoftScore score) {\n    this.score = score;\n}       \n</code></pre>\n<p>}</p>\n<p><strong>Constraint Provider</strong></p>\n<pre><code>public class SimpleConstraintProvider implements ConstraintProvider {\n\n\n    \n     @Override\n        public Constraint[] defineConstraints(ConstraintFactory constraintFactory) {\n            return new Constraint[] {\n                    // Hard constraints\n                    maxValue(constraintFactory),\n\n            };\n     }\n            \n         private Constraint maxValue (ConstraintFactory constraintFactory) {\n                \n                return constraintFactory.forEach(variable.class)\n                        .reward(&quot;maximum&quot;, HardSoftScore.ONE_SOFT,variable::getX);\n                    }\n}\n</code></pre>\n<p><strong>Main :</strong></p>\n<pre><code>public class SimpleApp {\n\n     private static final Logger LOGGER = LoggerFactory.getLogger(SimpleApp.class);\n\n        public static void main(String[] args) {\n            SolverFactory&lt;Planningsolution&gt; solverFactory = SolverFactory.create(new SolverConfig()\n                    .withSolutionClass(Planningsolution.class)\n                    .withEntityClasses(variable.class)\n                    .withConstraintProviderClass(SimpleConstraintProvider.class)\n\n                    .withTerminationSpentLimit(Duration.ofSeconds(10)));\n\n            // Load the problem\n            Planningsolution problem = new Planningsolution();\n            \n            \n\n            // Solve the problem\n            Solver&lt;Planningsolution&gt; solver = solverFactory.buildSolver();\n            Planningsolution solution = solver.solve(problem);\n\n            // Visualize the solution\n           System.out.println(&quot;solution: &quot; + display(solution) + &quot;\\n&quot; + &quot;score: &quot; + solution.getScore());;\n        }\n    \n        \n        public static Integer display(Planningsolution solution) {\n            variable var = new variable();\n            return var.getX();\n        }\n}\n</code></pre>\n<p><strong>logback.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n\n  &lt;appender name=&quot;appender&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder&gt;\n      &lt;pattern&gt;%d [%t] %-5p %m%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n\n  &lt;logger name=&quot;org.optaplanner&quot; level=&quot;info&quot;/&gt;\n\n  &lt;root level=&quot;warn&quot;&gt;\n    &lt;appender-ref ref=&quot;appender&quot;/&gt;\n  &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n<p>The output i get is :</p>\n<blockquote>\n<p>solution: null\nscore: 0hard/0soft</p>\n</blockquote>\n"},{"tags":["java","multithreading","spring-boot"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661411269,"post_id":73483157,"comment_id":129766873,"body_markdown":"Maybe this helps: https://stackoverflow.com/questions/14630539/scheduling-a-job-with-spring-programmatically-with-fixedrate-set-dynamically","body":"Maybe this helps: <a href=\"https://stackoverflow.com/questions/14630539/scheduling-a-job-with-spring-programmatically-with-fixedrate-set-dynamically\" title=\"scheduling a job with spring programmatically with fixedrate set dynamically\">stackoverflow.com/questions/14630539/&hellip;</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661414408,"post_id":73483157,"comment_id":129767878,"body_markdown":"If you say &quot;act on database&quot;, a &quot;database lock&quot; seems not far-fetched!?","body":"If you say &quot;act on database&quot;, a &quot;database lock&quot; seems not far-fetched!?"},{"owner":{"account_id":1108107,"reputation":1203,"user_id":1099074,"accept_rate":87,"display_name":"Wes"},"score":0,"creation_date":1661418799,"post_id":73483157,"comment_id":129769565,"body_markdown":"A database lock may be a necessary step. But I&#39;m also looking to achieve things like scheduling second() to run after first() if first() is running when second() gets called. That would go beyond simple mutual exclusion and resource locking. That would also involve some waiting and scheduling.","body":"A database lock may be a necessary step. But I&#39;m also looking to achieve things like scheduling second() to run after first() if first() is running when second() gets called. That would go beyond simple mutual exclusion and resource locking. That would also involve some waiting and scheduling."}],"answers":[{"tags":[],"owner":{"account_id":7853217,"reputation":533,"user_id":5936192,"display_name":"HaroldH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661411739,"creation_date":1661411114,"answer_id":73483240,"question_id":73483157,"body_markdown":"The easiest way would to make both call a method in another layer (e.g. a service). That method, if declared on a singleton bean, can be synchronized so only one thread will be able to execute it at the same time in the same server.\r\n\r\n    class ScheduledTasks{\r\n\r\n       @Autowired private Service service;\r\n       \r\n       @Scheduled(cron = &quot;0 * * * * *&quot;)\r\n       public void first() {\r\n            service.doStuff();\r\n       }\r\n\r\n    }\r\n\r\n    class MyController{\r\n\r\n       @Autowired private Service service;\r\n\r\n      @RequestMapping(value = &quot;/second&quot;, method = RequestMethod.POST)\r\n      public void second() {\r\n         service.doStuff();\r\n      }\r\n\r\n    }\r\n\r\n\r\n    @Service\r\n    class Service{\r\n        public synchronized void doStuff(){...}\r\n    }\r\n\r\nBe aware, though, that it will cause concurrent requests to your endpoint to seemingly &quot;halt&quot; until the previous ones have completed, when they attempt to call that method.\r\n\r\nAs an alternative, you may want to convert your Scheduled method to a Quartz job and modify the trigger when your controller is called. This would also require some degree of synchronization so the triggers are modified atomically among concurrent requests, and also you may still need a synchronized method to guarantee that if first() is already running you don&#39;t execute the changes from second().","title":"Spring Boot - How to achieve this execution?","body":"<p>The easiest way would to make both call a method in another layer (e.g. a service). That method, if declared on a singleton bean, can be synchronized so only one thread will be able to execute it at the same time in the same server.</p>\n<pre><code>class ScheduledTasks{\n\n   @Autowired private Service service;\n   \n   @Scheduled(cron = &quot;0 * * * * *&quot;)\n   public void first() {\n        service.doStuff();\n   }\n\n}\n\nclass MyController{\n\n   @Autowired private Service service;\n\n  @RequestMapping(value = &quot;/second&quot;, method = RequestMethod.POST)\n  public void second() {\n     service.doStuff();\n  }\n\n}\n\n\n@Service\nclass Service{\n    public synchronized void doStuff(){...}\n}\n</code></pre>\n<p>Be aware, though, that it will cause concurrent requests to your endpoint to seemingly &quot;halt&quot; until the previous ones have completed, when they attempt to call that method.</p>\n<p>As an alternative, you may want to convert your Scheduled method to a Quartz job and modify the trigger when your controller is called. This would also require some degree of synchronization so the triggers are modified atomically among concurrent requests, and also you may still need a synchronized method to guarantee that if first() is already running you don't execute the changes from second().</p>\n"},{"tags":[],"owner":{"account_id":4561654,"reputation":3050,"user_id":3703819,"display_name":"dey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661543810,"creation_date":1661413843,"answer_id":73483767,"question_id":73483157,"body_markdown":"If you have to maintain this only on one instance of your application, then you can use for example `AtomicBoolean`:\r\n\r\nLet&#39;s create additional method, where you make something like this:\r\n\r\n    private AtomicBoolean isSecondRunning = new AtomicBoolean(); \r\n\r\n    @Scheduled(cron = &quot;0 * * * * *&quot;)\r\n    public void first() {\r\n        if (isSecondRunning.get()) {\r\n            return; // 1\r\n        }\r\n        execute();\r\n    }\r\n    \r\n    @RequestMapping(value = &quot;/second&quot;, method = RequestMethod.POST)\r\n    public void second() {\r\n        isSecondRunning.set(true); // 2\r\n\r\n        try {\r\n            execute();\r\n        } finally {\r\n            isRunning.set(false); // 3\r\n        }\r\n    }\r\n\r\n    public synchronized void execute(){\r\n        // here execute the code\r\n    }\r\n\r\nCode explanation:\r\n\r\n 1. if `isSecondRunning` is true, then return from first without execution, if is false, then skip if and go to `execute()` method\r\n 2. when second is executed, then set `isSecondRunning` to true and then execute\r\n 3. set `isSecondRunning` to false, and do it inside finally block, so we can be sure, that it is set to false even if some exception occurs in your execution\r\n\r\nThe `execute` method is synchronized, so if first is running, then second will wait","title":"Spring Boot - How to achieve this execution?","body":"<p>If you have to maintain this only on one instance of your application, then you can use for example <code>AtomicBoolean</code>:</p>\n<p>Let's create additional method, where you make something like this:</p>\n<pre><code>private AtomicBoolean isSecondRunning = new AtomicBoolean(); \n\n@Scheduled(cron = &quot;0 * * * * *&quot;)\npublic void first() {\n    if (isSecondRunning.get()) {\n        return; // 1\n    }\n    execute();\n}\n\n@RequestMapping(value = &quot;/second&quot;, method = RequestMethod.POST)\npublic void second() {\n    isSecondRunning.set(true); // 2\n\n    try {\n        execute();\n    } finally {\n        isRunning.set(false); // 3\n    }\n}\n\npublic synchronized void execute(){\n    // here execute the code\n}\n</code></pre>\n<p>Code explanation:</p>\n<ol>\n<li>if <code>isSecondRunning</code> is true, then return from first without execution, if is false, then skip if and go to <code>execute()</code> method</li>\n<li>when second is executed, then set <code>isSecondRunning</code> to true and then execute</li>\n<li>set <code>isSecondRunning</code> to false, and do it inside finally block, so we can be sure, that it is set to false even if some exception occurs in your execution</li>\n</ol>\n<p>The <code>execute</code> method is synchronized, so if first is running, then second will wait</p>\n"},{"tags":[],"owner":{"account_id":26059441,"reputation":83,"user_id":19761037,"display_name":"mpette"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661464756,"creation_date":1661460972,"answer_id":73493612,"question_id":73483157,"body_markdown":"The problem is you can&#39;t really do anything simple because the outcome of whether a job is allowed to be queued or not depends on what jobs are already in the queue.\r\n\r\nI would suggest you need a JobManager that controls the queue, and a JobRunner that takes any jobs from the queue and runs them. You need to both check the contents of the queue and add to the queue under the same exclusive lock.\r\n\r\n```java\r\npublic class JobManager {\r\n\r\n    private final Queue&lt;Jobs&gt; queue;\r\n    private final JobRunner jobRunner;\r\n\r\n    public JobManager() {\r\n        this.queue = new LinkedList&lt;Jobs&gt;();\r\n        this.jobRunner = new JobRunner(this);\r\n        jobRunner.start();\r\n    }\r\n\r\n    public synchronized void requestFirst() {\r\n        if (queue.isEmpty()) {\r\n            queue.add(Jobs.FIRST);\r\n            notifyAll();\r\n        }\r\n    }\r\n\r\n    public synchronized void requestSecond() {\r\n        if (!queue.contains(Jobs.SECOND)) {\r\n            queue.add(Jobs.SECOND);\r\n            notifyAll();\r\n        }\r\n    }\r\n\r\n    public synchronized Jobs getJob() throws InterruptedException {\r\n        while (queue.isEmpty()) {\r\n            wait();\r\n        }\r\n        return queue.peek();\r\n    }\r\n\r\n    public synchronized void notifyFinished(Jobs job) {\r\n        queue.remove(job);\r\n    }\r\n\r\n    public void startRunner() {\r\n        jobRunner.start();\r\n    }\r\n\r\n    public void stopRunner() {\r\n        jobRunner.stopRunner();\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic class JobRunner extends Thread {\r\n\r\n    private final JobManager jobManager;\r\n\r\n    private volatile boolean stopping;\r\n\r\n    public JobRunner(JobManager jobManager) {\r\n        this.jobManager = jobManager;\r\n        this.stopping = false;\r\n    }\r\n\r\n    public void stopRunner() {\r\n        stopping = true;\r\n        this.interrupt();\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        while (!stopping) {\r\n            try {\r\n                Jobs job = jobManager.getJob();\r\n                if (job.equals(Jobs.FIRST)) {\r\n                    // run first job\r\n                } else if (job.equals(Jobs.SECOND)) {\r\n                    // run second job\r\n                }\r\n                jobManager.notifyFinished(job);\r\n            } catch (InterruptedException ignored) {}\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic enum Jobs {\r\n    FIRST,\r\n    SECOND\r\n}\r\n```\r\n\r\n```java\r\n@Controller\r\npublic class WebAccess {\r\n\r\n    private final JobManager jobManager;\r\n\r\n    public WebAccess() {\r\n        jobManager = new JobManager();\r\n    }\r\n\r\n    @Scheduled(cron = &quot;0 * * * * *&quot;)\r\n    public void first() {\r\n        jobManager.requestFirst();\r\n    }\r\n\r\n    @RequestMapping(value = &quot;/second&quot;, method = RequestMethod.POST)\r\n    public void second() {\r\n        jobManager.requestSecond();\r\n    }\r\n\r\n    @EventListener(ContextClosedEvent.class)\r\n    public void stopRunner() {\r\n        jobManager.stopRunner();\r\n    }\r\n}\r\n```\r\n\r\nUnfortunately because of your complicated requirements for choosing first or second job, you need to hold a synchronization lock whilst checking the queue and deciding whether to add the job or not.\r\nThis kind of approach may be extremely difficult to test so probably it should be a last resort.\r\nIf you want to get Spring to do the autowiring you could annotate it accordingly.","title":"Spring Boot - How to achieve this execution?","body":"<p>The problem is you can't really do anything simple because the outcome of whether a job is allowed to be queued or not depends on what jobs are already in the queue.</p>\n<p>I would suggest you need a JobManager that controls the queue, and a JobRunner that takes any jobs from the queue and runs them. You need to both check the contents of the queue and add to the queue under the same exclusive lock.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JobManager {\n\n    private final Queue&lt;Jobs&gt; queue;\n    private final JobRunner jobRunner;\n\n    public JobManager() {\n        this.queue = new LinkedList&lt;Jobs&gt;();\n        this.jobRunner = new JobRunner(this);\n        jobRunner.start();\n    }\n\n    public synchronized void requestFirst() {\n        if (queue.isEmpty()) {\n            queue.add(Jobs.FIRST);\n            notifyAll();\n        }\n    }\n\n    public synchronized void requestSecond() {\n        if (!queue.contains(Jobs.SECOND)) {\n            queue.add(Jobs.SECOND);\n            notifyAll();\n        }\n    }\n\n    public synchronized Jobs getJob() throws InterruptedException {\n        while (queue.isEmpty()) {\n            wait();\n        }\n        return queue.peek();\n    }\n\n    public synchronized void notifyFinished(Jobs job) {\n        queue.remove(job);\n    }\n\n    public void startRunner() {\n        jobRunner.start();\n    }\n\n    public void stopRunner() {\n        jobRunner.stopRunner();\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class JobRunner extends Thread {\n\n    private final JobManager jobManager;\n\n    private volatile boolean stopping;\n\n    public JobRunner(JobManager jobManager) {\n        this.jobManager = jobManager;\n        this.stopping = false;\n    }\n\n    public void stopRunner() {\n        stopping = true;\n        this.interrupt();\n    }\n\n    @Override\n    public void run() {\n        while (!stopping) {\n            try {\n                Jobs job = jobManager.getJob();\n                if (job.equals(Jobs.FIRST)) {\n                    // run first job\n                } else if (job.equals(Jobs.SECOND)) {\n                    // run second job\n                }\n                jobManager.notifyFinished(job);\n            } catch (InterruptedException ignored) {}\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Jobs {\n    FIRST,\n    SECOND\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\npublic class WebAccess {\n\n    private final JobManager jobManager;\n\n    public WebAccess() {\n        jobManager = new JobManager();\n    }\n\n    @Scheduled(cron = &quot;0 * * * * *&quot;)\n    public void first() {\n        jobManager.requestFirst();\n    }\n\n    @RequestMapping(value = &quot;/second&quot;, method = RequestMethod.POST)\n    public void second() {\n        jobManager.requestSecond();\n    }\n\n    @EventListener(ContextClosedEvent.class)\n    public void stopRunner() {\n        jobManager.stopRunner();\n    }\n}\n</code></pre>\n<p>Unfortunately because of your complicated requirements for choosing first or second job, you need to hold a synchronization lock whilst checking the queue and deciding whether to add the job or not.\nThis kind of approach may be extremely difficult to test so probably it should be a last resort.\nIf you want to get Spring to do the autowiring you could annotate it accordingly.</p>\n"}],"owner":{"account_id":1108107,"reputation":1203,"user_id":1099074,"accept_rate":87,"display_name":"Wes"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73483767,"answer_count":3,"score":0,"last_activity_date":1661543810,"creation_date":1661410718,"question_id":73483157,"body_markdown":"I have a couple controller methods that must not be allowed to run at the same time:\r\n\r\n    @Scheduled(cron = &quot;0 * * * * *&quot;)\r\n    public void first() {\r\n       // Acts on database\r\n    }\r\n    \r\n    @RequestMapping(value = &quot;/second&quot;, method = RequestMethod.POST)\r\n    public void second() {\r\n       // Also acts on same database\r\n    }\r\n\r\nFirst one runs only as a scheduled job. Second one only runs as an HTTP request.\r\n\r\nWhen second() gets called I want it to wait until first() finishes if it is running, then run immediately afterwards. If first() is not running, want second() to run and block first() from running while second() is still running. By block I mean don&#39;t allow first() to run at all, don&#39;t wait for second() to finish or queue it to run later either. It will attempt to run again only on its next scheduled run.\r\n\r\nEdit:\r\nIf second() gets requested again while the previous request to second() has not yet completed, want that new request to be ignored.\r\n","title":"Spring Boot - How to achieve this execution?","body":"<p>I have a couple controller methods that must not be allowed to run at the same time:</p>\n<pre><code>@Scheduled(cron = &quot;0 * * * * *&quot;)\npublic void first() {\n   // Acts on database\n}\n\n@RequestMapping(value = &quot;/second&quot;, method = RequestMethod.POST)\npublic void second() {\n   // Also acts on same database\n}\n</code></pre>\n<p>First one runs only as a scheduled job. Second one only runs as an HTTP request.</p>\n<p>When second() gets called I want it to wait until first() finishes if it is running, then run immediately afterwards. If first() is not running, want second() to run and block first() from running while second() is still running. By block I mean don't allow first() to run at all, don't wait for second() to finish or queue it to run later either. It will attempt to run again only on its next scheduled run.</p>\n<p>Edit:\nIf second() gets requested again while the previous request to second() has not yet completed, want that new request to be ignored.</p>\n"},{"tags":["java","postgresql","spring-boot","jpa"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1661543299,"post_id":73505688,"comment_id":129805720,"body_markdown":"PESSIMISTIC_WRITE allows us to obtain an exclusive lock and prevent the data from being **read**, updated or deleted - that is totally wrong. The purpose of lock modes in JPA is to prevent some phenomena (please read [javadoc](https://docs.oracle.com/javaee/7/api/javax/persistence/LockModeType.html)), and observable row locks in DB are just a side effect. In case of PostgreSQL PESSIMISTIC_WRITE is implemented via &quot;select for update&quot; and PESSIMISTIC_READ is implemented via &quot;select for share&quot;. Just take advantage of PESSIMISTIC_READ for your `testLock()` method.","body":"PESSIMISTIC_WRITE allows us to obtain an exclusive lock and prevent the data from being <b>read</b>, updated or deleted - that is totally wrong. The purpose of lock modes in JPA is to prevent some phenomena (please read <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/LockModeType.html\" rel=\"nofollow noreferrer\">javadoc</a>), and observable row locks in DB are just a side effect. In case of PostgreSQL PESSIMISTIC_WRITE is implemented via &quot;select for update&quot; and PESSIMISTIC_READ is implemented via &quot;select for share&quot;. Just take advantage of PESSIMISTIC_READ for your <code>testLock()</code> method."},{"owner":{"account_id":8453896,"reputation":165,"user_id":6341862,"accept_rate":80,"display_name":"Irvan"},"score":0,"creation_date":1661587663,"post_id":73505688,"comment_id":129811458,"body_markdown":"Hi thanks for the response. I have read the [javadoc](https://docs.oracle.com/javaee/7/api/javax/persistence/LockModeType.html) but fail to find the explanation of PESSIMISTIC_READ behavior  that will wait PESSIMISTIC_WRITE transaction. Are there any official documentation that explain about this behavior?","body":"Hi thanks for the response. I have read the <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/LockModeType.html\" rel=\"nofollow noreferrer\">javadoc</a> but fail to find the explanation of PESSIMISTIC_READ behavior  that will wait PESSIMISTIC_WRITE transaction. Are there any official documentation that explain about this behavior?"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1661588206,"post_id":73505688,"comment_id":129811544,"body_markdown":"Documentation defines contract, implementation depends on underlying DB and settings, in case of PostreSQL pessimistic_read is your friend, however I failed to understand the case when you need that: if there is high concurrency, reading most actual records does not make sense unless we are going to update them.","body":"Documentation defines contract, implementation depends on underlying DB and settings, in case of PostreSQL pessimistic_read is your friend, however I failed to understand the case when you need that: if there is high concurrency, reading most actual records does not make sense unless we are going to update them."},{"owner":{"account_id":8453896,"reputation":165,"user_id":6341862,"accept_rate":80,"display_name":"Irvan"},"score":0,"creation_date":1661589427,"post_id":73505688,"comment_id":129811700,"body_markdown":"I see. Well I need it for specific logic in a project. I need the most actual record for confirming what I should do next. The example above is just my starting point that will prove if the complete workflow will work or not. Everything should work now. Thanks anyway for the reply!","body":"I see. Well I need it for specific logic in a project. I need the most actual record for confirming what I should do next. The example above is just my starting point that will prove if the complete workflow will work or not. Everything should work now. Thanks anyway for the reply!"}],"answers":[{"tags":[],"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661543430,"creation_date":1661543075,"answer_id":73505832,"question_id":73505688,"body_markdown":"As you read in the article, it depends of database configuration.\r\nNow a standard is to configure database in REPEATABLE READ because it&#39;s give better performance, and less locks.\r\n[isolation level][1].\r\nAS you can see in postgres simple select are never lock.\r\n\r\nBut your test while work if testlock function use a LockModeType.PESSIMISTIC_READ.\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/current/transaction-iso.html#:~:text=2.-,Repeatable%20Read%20Isolation%20Level,transaction%20execution%20by%20concurrent%20transactions","title":"Java Spring Boot JPA PESSIMISTIC_WRITE Not Working as Expected","body":"<p>As you read in the article, it depends of database configuration.\nNow a standard is to configure database in REPEATABLE READ because it's give better performance, and less locks.\n<a href=\"https://www.postgresql.org/docs/current/transaction-iso.html#:%7E:text=2.-,Repeatable%20Read%20Isolation%20Level,transaction%20execution%20by%20concurrent%20transactions\" rel=\"nofollow noreferrer\">isolation level</a>.\nAS you can see in postgres simple select are never lock.</p>\n<p>But your test while work if testlock function use a LockModeType.PESSIMISTIC_READ.</p>\n"}],"owner":{"account_id":8453896,"reputation":165,"user_id":6341862,"accept_rate":80,"display_name":"Irvan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":856,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73505832,"answer_count":1,"score":1,"last_activity_date":1661543430,"creation_date":1661541901,"question_id":73505688,"body_markdown":"I want to lock some row in my Postgres database so it cannot even be read until the process is completed. I read it [here][1] that it is achievable by using JPA PESSIMISTIC_WRITE, but it&#39;s not working as expected because the data is still readable.\r\n\r\n**Controller**\r\n\r\nI have 2 function in my controller the first one is for locking the data and the second one is test function to verify if the lock working correctly.\r\n\r\n\r\n    @GetMapping(value = &quot;/lockdata&quot;)\r\n    public String controllerLockData() {\r\n        serviceImplementation.lockData();\r\n        return &quot;sucess&quot;;\r\n    }\r\n\r\n    @GetMapping(value = &quot;/test-lock&quot;)\r\n    public String testLock() {\r\n        serviceImplementation.testReadUpdate();\r\n        return &quot;sucess&quot;;\r\n    }\r\n\r\n**serviceImplementation**\r\n\r\n    @Override\r\n    @Transactional\r\n    public void lockData() {\r\n        SomeTableEntity table = entityManager.find(SomeTableRepository.class, 42366L, LockModeType.PESSIMISTIC_WRITE);\r\n        try {\r\n            TimeUnit.SECONDS.sleep(60); // #1st Breakpoints, 60 second delay so I can do some testing in this 60 second\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        table.setColumnOne(&quot;0&quot;); // #2nd Breakpoints\r\n        tableRepository.save(table);\r\n    }\r\n\r\n    @Override\r\n    @Transactional\r\n    public void testLock() {\r\n        SomeTableEntity table = tableRepository.getOne(42366L);\r\n        table.setColumnOne(&quot;1&quot;); //#3rd breakpoint\r\n        tableRepository.save(table);\r\n        int a = 1; //#4th breakpoint\r\n    }\r\n\r\nThis is how I do the testing. \r\n\r\n 1. Set column one value to &quot;2&quot; (for validating later)\r\n 2. Call /lockdata and wait until #1st breakpoint is hit to make sure that the code is executed then continue the process in the IDE. Now I have 60 second time for doing the testing and expect the lock is already applied.\r\n 3. Call /test-lock, #3rd breakpoint is hit immediately with the right data while I expect it shouldn&#39;t, because I expect it will wait until the lock is lifted.\r\n 4. Continue IDE process. #4th breakpoint is hit, that means the save is already executed.\r\n 5. Check data before 1 minute using pgAdmin. The select query is success (the same as before it should be waiting for the lock to be lifted). Column one value is &quot;2&quot;. This means the update is waiting for the lock to be lifted.\r\n 6. After 1 minute #2nd breakpoint hit, then continue IDE process.\r\n 7. Check data again using pgAdmin. Column one value is &quot;1&quot;. \r\n\r\nThis means the update process is executed correctly but somehow the lock is not working for read. From the [article][2] that I previously mentioned it may be due to multi-version concurrency control. If it is so then PESSIMISTIC_READ and PESSIMISTIC_WRITE has no different. How can I really lock the row so no other process can select it?\r\n\r\nAm I doing it wrong or misunderstood something?\r\n\r\nThank you. \r\n\r\n\r\n  [1]: https://www.baeldung.com/jpa-pessimistic-locking\r\n  [2]: https://www.baeldung.com/jpa-pessimistic-locking#:~:text=Please%20note%20that%20some%20database%20systems%20implement%C2%A0multi%2Dversion%20concurrency%20control%20that%20allows%20readers%20to%20fetch%20data%20that%20has%20been%20already%20blocked.","title":"Java Spring Boot JPA PESSIMISTIC_WRITE Not Working as Expected","body":"<p>I want to lock some row in my Postgres database so it cannot even be read until the process is completed. I read it <a href=\"https://www.baeldung.com/jpa-pessimistic-locking\" rel=\"nofollow noreferrer\">here</a> that it is achievable by using JPA PESSIMISTIC_WRITE, but it's not working as expected because the data is still readable.</p>\n<p><strong>Controller</strong></p>\n<p>I have 2 function in my controller the first one is for locking the data and the second one is test function to verify if the lock working correctly.</p>\n<pre><code>@GetMapping(value = &quot;/lockdata&quot;)\npublic String controllerLockData() {\n    serviceImplementation.lockData();\n    return &quot;sucess&quot;;\n}\n\n@GetMapping(value = &quot;/test-lock&quot;)\npublic String testLock() {\n    serviceImplementation.testReadUpdate();\n    return &quot;sucess&quot;;\n}\n</code></pre>\n<p><strong>serviceImplementation</strong></p>\n<pre><code>@Override\n@Transactional\npublic void lockData() {\n    SomeTableEntity table = entityManager.find(SomeTableRepository.class, 42366L, LockModeType.PESSIMISTIC_WRITE);\n    try {\n        TimeUnit.SECONDS.sleep(60); // #1st Breakpoints, 60 second delay so I can do some testing in this 60 second\n    } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n    }\n\n    table.setColumnOne(&quot;0&quot;); // #2nd Breakpoints\n    tableRepository.save(table);\n}\n\n@Override\n@Transactional\npublic void testLock() {\n    SomeTableEntity table = tableRepository.getOne(42366L);\n    table.setColumnOne(&quot;1&quot;); //#3rd breakpoint\n    tableRepository.save(table);\n    int a = 1; //#4th breakpoint\n}\n</code></pre>\n<p>This is how I do the testing.</p>\n<ol>\n<li>Set column one value to &quot;2&quot; (for validating later)</li>\n<li>Call /lockdata and wait until #1st breakpoint is hit to make sure that the code is executed then continue the process in the IDE. Now I have 60 second time for doing the testing and expect the lock is already applied.</li>\n<li>Call /test-lock, #3rd breakpoint is hit immediately with the right data while I expect it shouldn't, because I expect it will wait until the lock is lifted.</li>\n<li>Continue IDE process. #4th breakpoint is hit, that means the save is already executed.</li>\n<li>Check data before 1 minute using pgAdmin. The select query is success (the same as before it should be waiting for the lock to be lifted). Column one value is &quot;2&quot;. This means the update is waiting for the lock to be lifted.</li>\n<li>After 1 minute #2nd breakpoint hit, then continue IDE process.</li>\n<li>Check data again using pgAdmin. Column one value is &quot;1&quot;.</li>\n</ol>\n<p>This means the update process is executed correctly but somehow the lock is not working for read. From the <a href=\"https://www.baeldung.com/jpa-pessimistic-locking#:%7E:text=Please%20note%20that%20some%20database%20systems%20implement%C2%A0multi%2Dversion%20concurrency%20control%20that%20allows%20readers%20to%20fetch%20data%20that%20has%20been%20already%20blocked.\" rel=\"nofollow noreferrer\">article</a> that I previously mentioned it may be due to multi-version concurrency control. If it is so then PESSIMISTIC_READ and PESSIMISTIC_WRITE has no different. How can I really lock the row so no other process can select it?</p>\n<p>Am I doing it wrong or misunderstood something?</p>\n<p>Thank you.</p>\n"},{"tags":["java","character-encoding"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1661514366,"post_id":73500426,"comment_id":129796137,"body_markdown":"Sounds like you want a `Writer`, maybe a `FilterWriter` that replace occurrences of `CR` or `LF` with characters `CR` and `LF`. You need to use an `InputStreamReader` for the conversion of bytes to characters. Conversion from bytes to characters generally doesn&#39;t make sense when *writing* (as the eventual target of a write is almost always a sink for bytes).","body":"Sounds like you want a <code>Writer</code>, maybe a <code>FilterWriter</code> that replace occurrences of <code>CR</code> or <code>LF</code> with characters <code>CR</code> and <code>LF</code>. You need to use an <code>InputStreamReader</code> for the conversion of bytes to characters. Conversion from bytes to characters generally doesn&#39;t make sense when <i>writing</i> (as the eventual target of a write is almost always a sink for bytes)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1661514495,"post_id":73500426,"comment_id":129796184,"body_markdown":"Sounds like you want ```FilterWriter```","body":"Sounds like you want <code>FilterWriter</code>"},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1661514586,"post_id":73500426,"comment_id":129796212,"body_markdown":"Mark, I need to present an OutputStream to the calling code and I specifically wrote that I don&#39;t want to buffer the very large content to be able to read it with an InputStreamReader. I need to convert from bytes to characters on the fly (streaming).","body":"Mark, I need to present an OutputStream to the calling code and I specifically wrote that I don&#39;t want to buffer the very large content to be able to read it with an InputStreamReader. I need to convert from bytes to characters on the fly (streaming)."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1661514667,"post_id":73500426,"comment_id":129796238,"body_markdown":"g00se, a FilterWriter is a Writer, not an OutputStream. You call it with characters or strings. The calling code expects an OutputStream that accepts bytes. I need a class that converts from bytes to characters. Otherwise a filter is what I&#39;m looking for, but it must be from OutputStream to Writer (or similar) - bytes to characters.","body":"g00se, a FilterWriter is a Writer, not an OutputStream. You call it with characters or strings. The calling code expects an OutputStream that accepts bytes. I need a class that converts from bytes to characters. Otherwise a filter is what I&#39;m looking for, but it must be from OutputStream to Writer (or similar) - bytes to characters."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1661514733,"post_id":73500426,"comment_id":129796260,"body_markdown":"Why do you think you need to load fully into memory to be able to do that. In any case, I suggest you explain your problem in more detail, and why it is not possible for you to replace bytes 0x0A and 0x0D with two bytes 0x0D 0x0A on the fly.","body":"Why do you think you need to load fully into memory to be able to do that. In any case, I suggest you explain your problem in more detail, and why it is not possible for you to replace bytes 0x0A and 0x0D with two bytes 0x0D 0x0A on the fly."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1661514881,"post_id":73500426,"comment_id":129796299,"body_markdown":"```FilterOutputStream``` also exists if that&#39;s more appropriate","body":"<code>FilterOutputStream</code> also exists if that&#39;s more appropriate"},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1661514954,"post_id":73500426,"comment_id":129796316,"body_markdown":"I cannot replace 0x0A and 0x0D to 0x0D 0x0A as that won&#39;t work with UTF-16 (or by all means exotic EBCDIC encodings - I don&#39;t know the charset in advance). You have a point about not having to buffer everything, perhaps a PipedOutputStream would work. I would prefer something that is designed for streaming conversion, though. InputStreamReader is designed for bulk conversion (see comments in source code). EDIT: pipe streams virtually require multiple threads, which is not at all ideal.","body":"I cannot replace 0x0A and 0x0D to 0x0D 0x0A as that won&#39;t work with UTF-16 (or by all means exotic EBCDIC encodings - I don&#39;t know the charset in advance). You have a point about not having to buffer everything, perhaps a PipedOutputStream would work. I would prefer something that is designed for streaming conversion, though. InputStreamReader is designed for bulk conversion (see comments in source code). EDIT: pipe streams virtually require multiple threads, which is not at all ideal."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1661515029,"post_id":73500426,"comment_id":129796338,"body_markdown":"FilterOutputStream reads bytes and writes bytes. The difficulty is to convert the incoming bytes to characters (before converting back to bytes and writing). I could use a FilterOutputStream, but I would need to do the character conversion which is the difficult part.","body":"FilterOutputStream reads bytes and writes bytes. The difficulty is to convert the incoming bytes to characters (before converting back to bytes and writing). I could use a FilterOutputStream, but I would need to do the character conversion which is the difficult part."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1661515152,"post_id":73500426,"comment_id":129796381,"body_markdown":"A solution could be using a `FilterOutputStream` that accepts the bytes, uses `CharsetDecoder` to convert to char and write to a `Writer`, but I&#39;m just guessing without having explored if that works for this case (or if there are easier solutions).","body":"A solution could be using a <code>FilterOutputStream</code> that accepts the bytes, uses <code>CharsetDecoder</code> to convert to char and write to a <code>Writer</code>, but I&#39;m just guessing without having explored if that works for this case (or if there are easier solutions)."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1661515425,"post_id":73500426,"comment_id":129796475,"body_markdown":"Yes, that (OutputStream using CharsetDecoder) is about right. Ideally I would prefer an existing class along those lines that has been tested and performance tuned. If there is none I could implement it myself. I think I have read in a StackOverflow post that CharsetDecoder is inefficient when called byte-by-byte, though.","body":"Yes, that (OutputStream using CharsetDecoder) is about right. Ideally I would prefer an existing class along those lines that has been tested and performance tuned. If there is none I could implement it myself. I think I have read in a StackOverflow post that CharsetDecoder is inefficient when called byte-by-byte, though."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1661516818,"post_id":73500426,"comment_id":129796958,"body_markdown":"It will probably require piped streams (which I was about to recommend) though the basis should probably be still be ```FilterX``` . You can&#39;t realistically code for arbitrary encodings - that&#39;s really a GIGO problem","body":"It will probably require piped streams (which I was about to recommend) though the basis should probably be still be <code>FilterX</code> . You can&#39;t realistically code for arbitrary encodings - that&#39;s really a GIGO problem"},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1661518856,"post_id":73500426,"comment_id":129797694,"body_markdown":"I can code for arbitrary encodings supported by the JDK: https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html. That is a lot. It also varies with platform.","body":"I can code for arbitrary encodings supported by the JDK: <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/intl/&hellip;</a>. That is a lot. It also varies with platform."}],"answers":[{"tags":[],"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661541131,"creation_date":1661541131,"answer_id":73505579,"question_id":73500426,"body_markdown":"I wrote an implementation based on CharsetDecoder. Create a decoder and allocate a ByteBuffer and CharBuffer in the constructor:\r\n\r\n    decoder = charset.newDecoder();\r\n    byteBuf = ByteBuffer.allocate(bufferSize);\r\n    charBuf = CharBuffer.allocate(bufferSize);\r\nThen implement write:\r\n\r\n    public void write(int b) throws IOException {\r\n        if (!byteBuf.hasRemaining()) {\r\n            decodeAndWriteByteBuffer(false);\r\n        }\r\n        byteBuf.put((byte) b);\r\n    }\r\nAnd decodeAndWriteByteBuffer:\r\n\r\n    private void decodeAndWriteByteBuffer(boolean endOfInput) throws IOException {\r\n        byteBuf.flip();\r\n        CoderResult cr;\r\n        do {\r\n            cr = byteBuf.hasRemaining() || endOfInput\r\n               ? decoder.decode(byteBuf, charBuf, endOfInput)\r\n               : CoderResult.UNDERFLOW;\r\n            if (cr.isUnderflow()) {\r\n                if (endOfInput) {\r\n                    do {\r\n                        cr = decoder.flush(charBuf);\r\n                        writeCharBuffer();\r\n                    } while (cr.isOverflow());\r\n\r\n                    if (cr.isError()) {\r\n                        cr.throwException();\r\n                    }\r\n                }\r\n            } else if (cr.isOverflow()) {\r\n                writeCharBuffer();\r\n            } else {\r\n                cr.throwException();\r\n            }\r\n        } while (cr.isOverflow());\r\n        byteBuf.compact();\r\n    }\r\nThe remaining details are left as an exercise to the reader. It seems to work, though it is to early to say anything about performance.","title":"OutputStream translating bytes into characters with charset (opposite of OutputStreamWriter)","body":"<p>I wrote an implementation based on CharsetDecoder. Create a decoder and allocate a ByteBuffer and CharBuffer in the constructor:</p>\n<pre><code>decoder = charset.newDecoder();\nbyteBuf = ByteBuffer.allocate(bufferSize);\ncharBuf = CharBuffer.allocate(bufferSize);\n</code></pre>\n<p>Then implement write:</p>\n<pre><code>public void write(int b) throws IOException {\n    if (!byteBuf.hasRemaining()) {\n        decodeAndWriteByteBuffer(false);\n    }\n    byteBuf.put((byte) b);\n}\n</code></pre>\n<p>And decodeAndWriteByteBuffer:</p>\n<pre><code>private void decodeAndWriteByteBuffer(boolean endOfInput) throws IOException {\n    byteBuf.flip();\n    CoderResult cr;\n    do {\n        cr = byteBuf.hasRemaining() || endOfInput\n           ? decoder.decode(byteBuf, charBuf, endOfInput)\n           : CoderResult.UNDERFLOW;\n        if (cr.isUnderflow()) {\n            if (endOfInput) {\n                do {\n                    cr = decoder.flush(charBuf);\n                    writeCharBuffer();\n                } while (cr.isOverflow());\n\n                if (cr.isError()) {\n                    cr.throwException();\n                }\n            }\n        } else if (cr.isOverflow()) {\n            writeCharBuffer();\n        } else {\n            cr.throwException();\n        }\n    } while (cr.isOverflow());\n    byteBuf.compact();\n}\n</code></pre>\n<p>The remaining details are left as an exercise to the reader. It seems to work, though it is to early to say anything about performance.</p>\n"}],"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73505579,"answer_count":1,"score":0,"last_activity_date":1661541131,"creation_date":1661513715,"question_id":73500426,"body_markdown":"I need to manipulate content as it is being written to an OutputStream. Specifically, I need to replace CR or LF with CRLF to canonicalize text. This is easy for simple character sets where CR=13 and LF=10, but not so simple with multi-byte character sets. The **characters** should be replaced, not the **bytes**. It is non-trivial in general to do that in the output stream itself.\r\n\r\nThe built-in class OutputStreamWriter converts from characters to bytes for a configured encoding. I&#39;m looking for a class that does the opposite, that is an OutputStream configured with a character set that buffers data as needed and translates the written bytes into characters with the character set (or throws on invalid byte sequences), making the characters available in some way, for example by forwarding the call to a Writer.\r\n\r\nIn other words I want to convert from bytes to characters on-the-fly as content is being written. I could write everything to a buffer and read it back with an InputStreamReader, but that is inefficient for very large payloads that won&#39;t fit in memory.\r\n\r\nIs there a class like this somewhere (ideally open source, as I don&#39;t think it is built in)? If not, are there similar examples for efficient streaming conversion I could use as a starting point? The JDK classes I&#39;ve seen are optimized for converting many bytes at a time, not for streaming use.","title":"OutputStream translating bytes into characters with charset (opposite of OutputStreamWriter)","body":"<p>I need to manipulate content as it is being written to an OutputStream. Specifically, I need to replace CR or LF with CRLF to canonicalize text. This is easy for simple character sets where CR=13 and LF=10, but not so simple with multi-byte character sets. The <strong>characters</strong> should be replaced, not the <strong>bytes</strong>. It is non-trivial in general to do that in the output stream itself.</p>\n<p>The built-in class OutputStreamWriter converts from characters to bytes for a configured encoding. I'm looking for a class that does the opposite, that is an OutputStream configured with a character set that buffers data as needed and translates the written bytes into characters with the character set (or throws on invalid byte sequences), making the characters available in some way, for example by forwarding the call to a Writer.</p>\n<p>In other words I want to convert from bytes to characters on-the-fly as content is being written. I could write everything to a buffer and read it back with an InputStreamReader, but that is inefficient for very large payloads that won't fit in memory.</p>\n<p>Is there a class like this somewhere (ideally open source, as I don't think it is built in)? If not, are there similar examples for efficient streaming conversion I could use as a starting point? The JDK classes I've seen are optimized for converting many bytes at a time, not for streaming use.</p>\n"},{"tags":["java","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":8265293,"reputation":3800,"user_id":6215069,"display_name":"Dean Clark"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1463157803,"creation_date":1463157803,"answer_id":37215307,"question_id":37215177,"body_markdown":"You&#39;ll want to add an `ItemProcessor&lt;YourObject&gt;` to your step. In it, you can add a simple `YourObject process(YourObject item)` method that checks if the object will result in a blank line. If not, return the object. If so, return `null`. \r\n\r\nThis will prevent the items you wish to discard from getting to the writer and will increase the `FILTER_COUNT` when you look at the `BATCH_STEP_EXECUTION` table for that Step.\r\n\r\nMore on [filtering objects][1] can be found in the Spring Batch docs.\r\n\r\n**Edit:** The tutorial [you referenced][2] in your answer includes an example of a filtering processor (`FilterReportProcessor`) as well.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-batch/trunk/reference/html/readersAndWriters.html#filiteringRecords\r\n  [2]: http://www.mkyong.com/spring-batch/spring-batch-example-xml-file-to-csv-file/","title":"how to skip blank lines while writing to csv file with Spring Batch FlatFileItemWriter","body":"<p>You'll want to add an <code>ItemProcessor&lt;YourObject&gt;</code> to your step. In it, you can add a simple <code>YourObject process(YourObject item)</code> method that checks if the object will result in a blank line. If not, return the object. If so, return <code>null</code>. </p>\n\n<p>This will prevent the items you wish to discard from getting to the writer and will increase the <code>FILTER_COUNT</code> when you look at the <code>BATCH_STEP_EXECUTION</code> table for that Step.</p>\n\n<p>More on <a href=\"http://docs.spring.io/spring-batch/trunk/reference/html/readersAndWriters.html#filiteringRecords\" rel=\"nofollow\">filtering objects</a> can be found in the Spring Batch docs.</p>\n\n<p><strong>Edit:</strong> The tutorial <a href=\"http://www.mkyong.com/spring-batch/spring-batch-example-xml-file-to-csv-file/\" rel=\"nofollow\">you referenced</a> in your answer includes an example of a filtering processor (<code>FilterReportProcessor</code>) as well.</p>\n"},{"tags":[],"owner":{"account_id":15861714,"reputation":1,"user_id":11444684,"display_name":"Anand Meher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661540790,"creation_date":1661540790,"answer_id":73505526,"question_id":37215177,"body_markdown":"if memberclass is empty here&#39;s another way to writer using composite writer.\r\nCreate another writer as below.\r\n\r\n\r\n\tpublic class YourMemberFileItemWriter extends FlatFileItemWriter&lt;YourMainClass&gt;{\r\n\t\t@Override\r\n\t\tpublic String doWrite(List&lt;? extends YourMainClass&gt; items) {\r\n\t\t\tStringBuilder lines = new StringBuilder();\r\n\t\t\tfor (YourMainClass item : items) {\r\n\t\t\t\tif ( YourMainClass.getYourMemberClass() != null) {\r\n\t\t\t\t\tlines.append(this.lineAggregator.aggregate(item)).append(this.lineSeparator);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn lines.toString();\r\n\t\t}\r\n\t}\r\n\r\nDefine your composite writer. \r\n\tCompositeItemWriter&lt;YourMainClass&gt; compositeItemWriter = new CompositeItemWriter&lt;&gt;();\r\n\t\tcompositeItemWriter.setDelegates(Arrays.asList( mainClassCsv() \r\n\t\t\t\t,memberClassCsv());\r\n\treturn compositeItemWriter;\r\n\r\nAdd member class methods as below to composite writer:\r\n\r\n\tpublic FlatFileItemWriter memberClassCsv() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tYourMemberFileItemWriter fileWriter = new YourMemberFileItemWriter();\r\n\t\tfileWriter.setName(&quot;yourMemberClass&quot;);\r\n\t\tfileWriter.setResource(new FileSystemResource(&quot;memberfile.csv&quot;));\r\n\t\tfileWriter.setLineAggregator(getMemberClassDelimitedLineAggregator());\r\n\t\treturn fileWriter;\r\n\t}\r\n\r\n\tpublic DelimitedLineAggregator&lt;YourMainClass&gt; getMemberClassDelimitedLineAggregator() {\r\n\t\tBeanWrapperFieldExtractor&lt;YourMainClass&gt; beanWrapperFieldExtractor = new BeanWrapperFieldExtractor&lt;YourMainClass&gt;();\r\n\t\tbeanWrapperFieldExtractor.setNames(new String[] {\r\n\t\t\t\t&quot;memberClassField.fieldname1&quot;\r\n\t\t\t\t,&quot;memberClassField.fieldname2&quot;\r\n\t\t\t\t});\r\n\t\tDelimitedLineAggregator&lt;YourMainClass&gt; delimitedLineAggregator = new DelimitedLineAggregator&lt;YourMainClass&gt;();\r\n\t\tdelimitedLineAggregator.setDelimiter(&quot;,&quot;);\r\n\t\tdelimitedLineAggregator.setFieldExtractor(beanWrapperFieldExtractor);\r\n\t\treturn delimitedLineAggregator;\t\r\n\t}\r\n","title":"how to skip blank lines while writing to csv file with Spring Batch FlatFileItemWriter","body":"<p>if memberclass is empty here's another way to writer using composite writer.\nCreate another writer as below.</p>\n<pre><code>public class YourMemberFileItemWriter extends FlatFileItemWriter&lt;YourMainClass&gt;{\n    @Override\n    public String doWrite(List&lt;? extends YourMainClass&gt; items) {\n        StringBuilder lines = new StringBuilder();\n        for (YourMainClass item : items) {\n            if ( YourMainClass.getYourMemberClass() != null) {\n                lines.append(this.lineAggregator.aggregate(item)).append(this.lineSeparator);\n            }\n        }\n        return lines.toString();\n    }\n}\n</code></pre>\n<p>Define your composite writer.\nCompositeItemWriter compositeItemWriter = new CompositeItemWriter&lt;&gt;();\ncompositeItemWriter.setDelegates(Arrays.asList( mainClassCsv()\n,memberClassCsv());\nreturn compositeItemWriter;</p>\n<p>Add member class methods as below to composite writer:</p>\n<pre><code>public FlatFileItemWriter memberClassCsv() {\n    // TODO Auto-generated method stub\n    YourMemberFileItemWriter fileWriter = new YourMemberFileItemWriter();\n    fileWriter.setName(&quot;yourMemberClass&quot;);\n    fileWriter.setResource(new FileSystemResource(&quot;memberfile.csv&quot;));\n    fileWriter.setLineAggregator(getMemberClassDelimitedLineAggregator());\n    return fileWriter;\n}\n\npublic DelimitedLineAggregator&lt;YourMainClass&gt; getMemberClassDelimitedLineAggregator() {\n    BeanWrapperFieldExtractor&lt;YourMainClass&gt; beanWrapperFieldExtractor = new BeanWrapperFieldExtractor&lt;YourMainClass&gt;();\n    beanWrapperFieldExtractor.setNames(new String[] {\n            &quot;memberClassField.fieldname1&quot;\n            ,&quot;memberClassField.fieldname2&quot;\n            });\n    DelimitedLineAggregator&lt;YourMainClass&gt; delimitedLineAggregator = new DelimitedLineAggregator&lt;YourMainClass&gt;();\n    delimitedLineAggregator.setDelimiter(&quot;,&quot;);\n    delimitedLineAggregator.setFieldExtractor(beanWrapperFieldExtractor);\n    return delimitedLineAggregator; \n}\n</code></pre>\n"}],"owner":{"account_id":3058999,"reputation":133,"user_id":2592089,"accept_rate":100,"display_name":"techi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3634,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37215307,"answer_count":2,"score":1,"last_activity_date":1661540790,"creation_date":1463157401,"question_id":37215177,"body_markdown":"I am trying to write the java data objects to .csv file using the Spring Batch FlatFifileItemWriter exactly as mentioned in the example at below location. http://www.mkyong.com/spring-batch/spring-batch-example-xml-file-to-csv-file/\r\n\r\nThe writer configuration is like below.\r\n\r\n    &lt;bean id=&quot;cvsFileItemWriter&quot; class=&quot;org.springframework.batch.item.file.FlatFileItemWriter&quot;&gt;\r\n    \t&lt;!-- write to this csv file --&gt;\r\n    \t&lt;property name=&quot;resource&quot; value=&quot;file:cvs/report.csv&quot; /&gt;\r\n    \t&lt;property name=&quot;shouldDeleteIfExists&quot; value=&quot;true&quot; /&gt;\r\n    \r\n    \t&lt;property name=&quot;lineAggregator&quot;&gt;\r\n    \t  &lt;bean\r\n    \t\tclass=&quot;org.springframework.batch.item.file.transform.DelimitedLineAggregator&quot;&gt;\r\n    \t\t&lt;property name=&quot;delimiter&quot; value=&quot;,&quot; /&gt;\r\n    \t\t&lt;property name=&quot;fieldExtractor&quot;&gt;\r\n    \t\t  &lt;bean\r\n    \t\t\tclass=&quot;org.springframework.batch.item.file.transform.BeanWrapperFieldExtractor&quot;&gt;\r\n    \t\t\t&lt;property name=&quot;names&quot; value=&quot;refId, name, age, csvDob, income&quot; /&gt;\r\n    \t\t   &lt;/bean&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t   &lt;/bean&gt;\r\n    \t&lt;/property&gt;\r\n      &lt;/bean&gt;\r\n\r\nSince the FlatFileItemWriter has following write() method definition in the API, even though the LineAggregator returns empty String,it still writes to file.\r\n\r\n    StringBuilder lines = new StringBuilder();\r\n    \t\tint lineCount = 0;\r\n    \t\tfor (T item : items) {\r\n    \t\t\tlines.append(lineAggregator.aggregate(item) + lineSeparator);\r\n    \t\t\tlineCount++;\r\n    \t\t}\r\n    \t\ttry {\r\n    \t\t\tstate.write(lines.toString());\r\n    \t\t}\r\n\r\n\r\nis there any way to configure it to skip if the line is blank while writing to csv file in java using spring batch.","title":"how to skip blank lines while writing to csv file with Spring Batch FlatFileItemWriter","body":"<p>I am trying to write the java data objects to .csv file using the Spring Batch FlatFifileItemWriter exactly as mentioned in the example at below location. <a href=\"http://www.mkyong.com/spring-batch/spring-batch-example-xml-file-to-csv-file/\" rel=\"nofollow\">http://www.mkyong.com/spring-batch/spring-batch-example-xml-file-to-csv-file/</a></p>\n\n<p>The writer configuration is like below.</p>\n\n<pre><code>&lt;bean id=\"cvsFileItemWriter\" class=\"org.springframework.batch.item.file.FlatFileItemWriter\"&gt;\n    &lt;!-- write to this csv file --&gt;\n    &lt;property name=\"resource\" value=\"file:cvs/report.csv\" /&gt;\n    &lt;property name=\"shouldDeleteIfExists\" value=\"true\" /&gt;\n\n    &lt;property name=\"lineAggregator\"&gt;\n      &lt;bean\n        class=\"org.springframework.batch.item.file.transform.DelimitedLineAggregator\"&gt;\n        &lt;property name=\"delimiter\" value=\",\" /&gt;\n        &lt;property name=\"fieldExtractor\"&gt;\n          &lt;bean\n            class=\"org.springframework.batch.item.file.transform.BeanWrapperFieldExtractor\"&gt;\n            &lt;property name=\"names\" value=\"refId, name, age, csvDob, income\" /&gt;\n           &lt;/bean&gt;\n        &lt;/property&gt;\n       &lt;/bean&gt;\n    &lt;/property&gt;\n  &lt;/bean&gt;\n</code></pre>\n\n<p>Since the FlatFileItemWriter has following write() method definition in the API, even though the LineAggregator returns empty String,it still writes to file.</p>\n\n<pre><code>StringBuilder lines = new StringBuilder();\n        int lineCount = 0;\n        for (T item : items) {\n            lines.append(lineAggregator.aggregate(item) + lineSeparator);\n            lineCount++;\n        }\n        try {\n            state.write(lines.toString());\n        }\n</code></pre>\n\n<p>is there any way to configure it to skip if the line is blank while writing to csv file in java using spring batch.</p>\n"},{"tags":["java","haskell"],"comments":[{"owner":{"account_id":26078,"reputation":452381,"user_id":67579,"accept_rate":81,"display_name":"willeM_ Van Onsem"},"score":1,"creation_date":1660729025,"post_id":73385955,"comment_id":129599082,"body_markdown":"Please show *some* effort. Share your attempt together with what is not working.","body":"Please show <i>some</i> effort. Share your attempt together with what is not working."},{"owner":{"account_id":6750256,"reputation":1869,"user_id":5200466,"accept_rate":81,"display_name":"matt"},"score":1,"creation_date":1660729514,"post_id":73385955,"comment_id":129599299,"body_markdown":"@WillemVanOnsem  literally don&#39;t know how to start, It is not that I have not tried, but nothing I have done is useful enough to be put on here. I mean voting to close a question because I don&#39;t know how to do something seems pretty harsh","body":"@WillemVanOnsem  literally don&#39;t know how to start, It is not that I have not tried, but nothing I have done is useful enough to be put on here. I mean voting to close a question because I don&#39;t know how to do something seems pretty harsh"}],"answers":[{"tags":[],"owner":{"account_id":26078,"reputation":452381,"user_id":67579,"accept_rate":81,"display_name":"willeM_ Van Onsem"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1660731423,"creation_date":1660731423,"answer_id":73386710,"question_id":73385955,"body_markdown":"You can interleave filtering and enumerating, just like in the imperative code:\r\n\r\n    [ (a,b,c,d,e) \r\n      | a &lt;- cookedWords\r\n      , b &lt;- cookedWords\r\n      , a .&amp;. b == 0\r\n      , let ab = a .|. b\r\n      , c &lt;- cookedWords\r\n      , ab .&amp;. c == 0\r\n      , let abc = ab .|. c\r\n      , d &lt;- cookedWords\r\n      , abc .&amp;. d == 0\r\n      , let abcd = abc .|. d\r\n      , e &lt;- cookedWords\r\n      , abcd .&amp;. e == 0\r\n    ]\r\n\r\nThis will however still yield *symmetrical* results: indeed, it can pick `a = 2` and `b = 4`, but also `a = 4` and `b = 2`. We can use [**`tails :: [a] -&gt; [[a]]`**](https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-List.html#v:tails) to prevent this with:\r\n\r\n    import Data.List(tails)\r\n\r\n    [ (a,b,c,d,e) \r\n      | (a:as) &lt;- tails cookedWords\r\n      , (b:bs) &lt;- tails as\r\n      , a .&amp;. b == 0\r\n      , let ab = a .|. b\r\n      , (c:cs) &lt;- tails bs\r\n      , ab .&amp;. c == 0\r\n      , let abc = ab .|. c\r\n      , (d:ds) &lt;- tails cs\r\n      , abc .&amp;. d == 0\r\n      , let abcd = abc .|. d\r\n      , e &lt;- ds\r\n      , abcd .&amp;. e == 0\r\n    ]","title":"How to do nested &#39;looping&#39; in Haskell","body":"<p>You can interleave filtering and enumerating, just like in the imperative code:</p>\n<pre><code>[ (a,b,c,d,e) \n  | a &lt;- cookedWords\n  , b &lt;- cookedWords\n  , a .&amp;. b == 0\n  , let ab = a .|. b\n  , c &lt;- cookedWords\n  , ab .&amp;. c == 0\n  , let abc = ab .|. c\n  , d &lt;- cookedWords\n  , abc .&amp;. d == 0\n  , let abcd = abc .|. d\n  , e &lt;- cookedWords\n  , abcd .&amp;. e == 0\n]\n</code></pre>\n<p>This will however still yield <em>symmetrical</em> results: indeed, it can pick <code>a = 2</code> and <code>b = 4</code>, but also <code>a = 4</code> and <code>b = 2</code>. We can use <a href=\"https://hackage.haskell.org/package/base-4.17.0.0/docs/Data-List.html#v:tails\" rel=\"nofollow noreferrer\"><strong><code>tails :: [a] -&gt; [[a]]</code></strong></a> to prevent this with:</p>\n<pre><code>import Data.List(tails)\n\n[ (a,b,c,d,e) \n  | (a:as) &lt;- tails cookedWords\n  , (b:bs) &lt;- tails as\n  , a .&amp;. b == 0\n  , let ab = a .|. b\n  , (c:cs) &lt;- tails bs\n  , ab .&amp;. c == 0\n  , let abc = ab .|. c\n  , (d:ds) &lt;- tails cs\n  , abc .&amp;. d == 0\n  , let abcd = abc .|. d\n  , e &lt;- ds\n  , abcd .&amp;. e == 0\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":311679,"reputation":89812,"user_id":625403,"accept_rate":82,"display_name":"amalloy"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1660732132,"creation_date":1660732132,"answer_id":73386866,"question_id":73385955,"body_markdown":"One could do a pretty literal translation if one were so inclined, but so much work with indices is usually a sign of a failure to understand the real iteration pattern. Here, the most straightforward translation I see is to maintain A, B, C, and so on, and also keep track of the remainder of the list. A monad comprehension using `tails` to break the lists apart seems simple enough. I imagine something like this:\r\n\r\n    import Data.Bits\r\n    import Data.List (tails)\r\n    import Data.Maybe (listToMaybe)\r\n    import Control.Monad (guard)\r\n    \r\n    cookedWords :: [Int]\r\n    cookedWords = [0..]\r\n    \r\n    match :: [Int] -&gt; Maybe (Int, Int, Int, Int, Int)\r\n    match words =\r\n      listToMaybe $ do\r\n        a : as &lt;- tails cookedWords\r\n        b : bs &lt;- tails as\r\n        guard $ a .&amp;. b == 0\r\n        let ab = a .|. b\r\n        c : cs &lt;- tails bs\r\n        guard $ ab .&amp;. c == 0\r\n        let abc = ab .|. c\r\n        d : ds &lt;- tails cs\r\n        guard $ abc .&amp;. d == 0\r\n        let abcd = abc .|. d\r\n        e : es &lt;- tails ds\r\n        guard $ abcd .&amp;. e == 0\r\n        pure (a, b, c, d, e)\r\n\r\nHere of course since I&#39;ve defined words to be `[0..]`, it just finds the first 5 powers of 2 (well okay, 4 of them and a zero):\r\n\r\n    *Main&gt; match cookedWords\r\n    Just (0,1,2,4,8)\r\n\r\nBut it would be better to generalize this to a function whose input is the list of matching words to search as well as the desired group size, and whose output is a list of such matches.\r\n\r\n    match :: Int -&gt; [Int] -&gt; [[Int]]\r\n    match = go 0\r\n      where go mask 0 _ = [[]]\r\n            go mask n words = do\r\n              x : xs &lt;- tails words\r\n              guard $ mask .&amp;. x == 0\r\n              let mask&#39; = mask .|. x\r\n              (x:) &lt;$&gt; go mask&#39; (n - 1) xs\r\n\r\nThis way, we don&#39;t have to worry about specific named variables for our five intermediate states or the result, we can just work on a list of arbitrary size. And as a bonus, we can get multiple results if we like:\r\n\r\n    *Main&gt; take 5 $ match 5 cookedWords\r\n    [[0,1,2,4,8],[0,1,2,4,16],[0,1,2,4,24],[0,1,2,4,32],[0,1,2,4,40]]\r\n\r\nFinding a reasonable abstraction has let us write code that is much simpler and more obviously correct than the Java version.","title":"How to do nested &#39;looping&#39; in Haskell","body":"<p>One could do a pretty literal translation if one were so inclined, but so much work with indices is usually a sign of a failure to understand the real iteration pattern. Here, the most straightforward translation I see is to maintain A, B, C, and so on, and also keep track of the remainder of the list. A monad comprehension using <code>tails</code> to break the lists apart seems simple enough. I imagine something like this:</p>\n<pre><code>import Data.Bits\nimport Data.List (tails)\nimport Data.Maybe (listToMaybe)\nimport Control.Monad (guard)\n\ncookedWords :: [Int]\ncookedWords = [0..]\n\nmatch :: [Int] -&gt; Maybe (Int, Int, Int, Int, Int)\nmatch words =\n  listToMaybe $ do\n    a : as &lt;- tails cookedWords\n    b : bs &lt;- tails as\n    guard $ a .&amp;. b == 0\n    let ab = a .|. b\n    c : cs &lt;- tails bs\n    guard $ ab .&amp;. c == 0\n    let abc = ab .|. c\n    d : ds &lt;- tails cs\n    guard $ abc .&amp;. d == 0\n    let abcd = abc .|. d\n    e : es &lt;- tails ds\n    guard $ abcd .&amp;. e == 0\n    pure (a, b, c, d, e)\n</code></pre>\n<p>Here of course since I've defined words to be <code>[0..]</code>, it just finds the first 5 powers of 2 (well okay, 4 of them and a zero):</p>\n<pre><code>*Main&gt; match cookedWords\nJust (0,1,2,4,8)\n</code></pre>\n<p>But it would be better to generalize this to a function whose input is the list of matching words to search as well as the desired group size, and whose output is a list of such matches.</p>\n<pre><code>match :: Int -&gt; [Int] -&gt; [[Int]]\nmatch = go 0\n  where go mask 0 _ = [[]]\n        go mask n words = do\n          x : xs &lt;- tails words\n          guard $ mask .&amp;. x == 0\n          let mask' = mask .|. x\n          (x:) &lt;$&gt; go mask' (n - 1) xs\n</code></pre>\n<p>This way, we don't have to worry about specific named variables for our five intermediate states or the result, we can just work on a list of arbitrary size. And as a bonus, we can get multiple results if we like:</p>\n<pre><code>*Main&gt; take 5 $ match 5 cookedWords\n[[0,1,2,4,8],[0,1,2,4,16],[0,1,2,4,24],[0,1,2,4,32],[0,1,2,4,40]]\n</code></pre>\n<p>Finding a reasonable abstraction has let us write code that is much simpler and more obviously correct than the Java version.</p>\n"}],"owner":{"account_id":6750256,"reputation":1869,"user_id":5200466,"accept_rate":81,"display_name":"matt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73386866,"answer_count":2,"score":4,"last_activity_date":1661540671,"creation_date":1660728178,"question_id":73385955,"body_markdown":"I am looking at some JAVA code and I would like to know how this can be translated into Haskell.\r\n\r\n```\r\n\r\nIntStream.range(0, cookedWords.length).parallel().forEach((int i) -&gt; {\r\n  int A = cookedWords[i];\r\n\r\n  for (int j = i + 1; j &lt; cookedWords.length; ++j) {\r\n      int B = cookedWords[j];\r\n      if ((A &amp; B) != 0) continue;\r\n      int AB = A | B;\r\n\r\n      for (int k = j + 1; k &lt; cookedWords.length; ++k) {\r\n          int C = cookedWords[k];\r\n          if ((AB &amp; C) != 0) continue;\r\n          int ABC = AB | C;\r\n\r\n          for (int l = k + 1; l &lt; cookedWords.length; ++l) {\r\n              int D = cookedWords[l];\r\n              if ((ABC &amp; D) != 0) continue;\r\n              int ABCD = ABC | D;\r\n\r\n              for (int m = l + 1; m &lt; cookedWords.length; ++m) {\r\n                  int E = cookedWords[m];\r\n                  if ((ABCD &amp; E) != 0) continue;\r\n\r\n                  System.out.printf(&quot;%s\\n%s\\n\\n&quot;,\r\n                          stopwatch.elapsedTime(),\r\n                          decodeWords(A, B, C, D, E));\r\n              }\r\n          }\r\n      }\r\n  }\r\n});\r\n```\r\nThis code is taken from [here][1]\r\n\r\nI am guessing that there are a few things that need to be done here. `unboxed vectors`, run `parallel` etc. but I don&#39;t even know how to start with the indexing the way it is done in the imperative code. Or is this where people start to tell me to stay away from Haskell?\r\n\r\nWhat is a literal translation of this code? And is there a better &#39;Haskell&#39; way of doing something like this?\r\n\r\nThis is all I can think of doing. But it is obviously inefficient. \r\n```\r\n[ (a,b,c,d,e) \r\n  | a &lt;- cookedWords, b &lt;- cookedWords, c &lt;- cookedWords, d &lt;- cookedWords, e &lt;- cookedWords\r\n  , foldl1&#39; (.|.) [a,b,c,d,e] == 0\r\n  ]\r\n```\r\n\r\n\r\n  [1]: https://gist.github.com/fredoverflow/a7c9f230d86787ed6164ef652f675d8d","title":"How to do nested &#39;looping&#39; in Haskell","body":"<p>I am looking at some JAVA code and I would like to know how this can be translated into Haskell.</p>\n<pre><code>\nIntStream.range(0, cookedWords.length).parallel().forEach((int i) -&gt; {\n  int A = cookedWords[i];\n\n  for (int j = i + 1; j &lt; cookedWords.length; ++j) {\n      int B = cookedWords[j];\n      if ((A &amp; B) != 0) continue;\n      int AB = A | B;\n\n      for (int k = j + 1; k &lt; cookedWords.length; ++k) {\n          int C = cookedWords[k];\n          if ((AB &amp; C) != 0) continue;\n          int ABC = AB | C;\n\n          for (int l = k + 1; l &lt; cookedWords.length; ++l) {\n              int D = cookedWords[l];\n              if ((ABC &amp; D) != 0) continue;\n              int ABCD = ABC | D;\n\n              for (int m = l + 1; m &lt; cookedWords.length; ++m) {\n                  int E = cookedWords[m];\n                  if ((ABCD &amp; E) != 0) continue;\n\n                  System.out.printf(&quot;%s\\n%s\\n\\n&quot;,\n                          stopwatch.elapsedTime(),\n                          decodeWords(A, B, C, D, E));\n              }\n          }\n      }\n  }\n});\n</code></pre>\n<p>This code is taken from <a href=\"https://gist.github.com/fredoverflow/a7c9f230d86787ed6164ef652f675d8d\" rel=\"nofollow noreferrer\">here</a></p>\n<p>I am guessing that there are a few things that need to be done here. <code>unboxed vectors</code>, run <code>parallel</code> etc. but I don't even know how to start with the indexing the way it is done in the imperative code. Or is this where people start to tell me to stay away from Haskell?</p>\n<p>What is a literal translation of this code? And is there a better 'Haskell' way of doing something like this?</p>\n<p>This is all I can think of doing. But it is obviously inefficient.</p>\n<pre><code>[ (a,b,c,d,e) \n  | a &lt;- cookedWords, b &lt;- cookedWords, c &lt;- cookedWords, d &lt;- cookedWords, e &lt;- cookedWords\n  , foldl1' (.|.) [a,b,c,d,e] == 0\n  ]\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":25592434,"reputation":652,"user_id":19368926,"display_name":"Sakil"},"score":1,"creation_date":1661407995,"post_id":73482671,"comment_id":129765900,"body_markdown":"[Java Base64 encode decode](https://stackoverflow.com/questions/19743851/base64-java-encode-and-decode-a-string), This may answer your question","body":"<a href=\"https://stackoverflow.com/questions/19743851/base64-java-encode-and-decode-a-string\">Java Base64 encode decode</a>, This may answer your question"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1661408254,"post_id":73482671,"comment_id":129765957,"body_markdown":"https://www.baeldung.com/java-base64-encode-and-decode","body":"<a href=\"https://www.baeldung.com/java-base64-encode-and-decode\" rel=\"nofollow noreferrer\">baeldung.com/java-base64-encode-and-decode</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1661426452,"post_id":73482671,"comment_id":129772423,"body_markdown":"*My private key in base64 format i want to convert it to string format.* But (proper) private keys are *not* strings, which is *why* they are stored base64-encoded","body":"<i>My private key in base64 format i want to convert it to string format.</i> But (proper) private keys are <i>not</i> strings, which is <i>why</i> they are stored base64-encoded"}],"answers":[{"tags":[],"owner":{"account_id":19800341,"reputation":26,"user_id":14501508,"display_name":"tanviranindo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661540290,"creation_date":1661540290,"answer_id":73505445,"question_id":73482671,"body_markdown":"You need to understand encoding/decoding if you want to customize it but simply you can use **Base64 class** of Java to decode from Base64 to String. Given an example -\r\n\r\n    byte[] decode = Base64.getDecoder().decode(&quot;Your String&quot;);\r\n    String decodedString = new String(decode);\r\n\r\nYou can check **java.util.Base64** class to find out more interesting thing.\r\n\r\nReference - [https://www.baeldung.com/java-base64-encode-and-decode][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-base64-encode-and-decode","title":"How to convert base64 to string in spring-boot(java)","body":"<p>You need to understand encoding/decoding if you want to customize it but simply you can use <strong>Base64 class</strong> of Java to decode from Base64 to String. Given an example -</p>\n<pre><code>byte[] decode = Base64.getDecoder().decode(&quot;Your String&quot;);\nString decodedString = new String(decode);\n</code></pre>\n<p>You can check <strong>java.util.Base64</strong> class to find out more interesting thing.</p>\n<p>Reference - <a href=\"https://www.baeldung.com/java-base64-encode-and-decode\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-base64-encode-and-decode</a></p>\n"}],"owner":{"account_id":26025954,"reputation":19,"user_id":19732868,"display_name":"KSMNOP k"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":906,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73505445,"answer_count":1,"score":0,"last_activity_date":1661540290,"creation_date":1661407847,"question_id":73482671,"body_markdown":"How to  convert base64 to string in spring-boot(java).\r\nMy private key in base64 format i want to convert it to string format. I don&#39;t know how to do this please help me to solve this problem. ","title":"How to convert base64 to string in spring-boot(java)","body":"<p>How to  convert base64 to string in spring-boot(java).\nMy private key in base64 format i want to convert it to string format. I don't know how to do this please help me to solve this problem.</p>\n"},{"tags":["java","spring-boot","log4j2","tomcat8","java-11"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1661522258,"post_id":73502092,"comment_id":129798922,"body_markdown":"Funny would be if you&#39;d have the old server still running. Unlikely but start with an altered log file name.","body":"Funny would be if you&#39;d have the old server still running. Unlikely but start with an altered log file name."},{"owner":{"account_id":3203685,"reputation":325,"user_id":5119766,"accept_rate":100,"display_name":"Richard D Lawson"},"score":0,"creation_date":1661523021,"post_id":73502092,"comment_id":129799249,"body_markdown":"@JoopEggen Hey, I&#39;m willing to try anything at this point.  I did try with a different name but alas, same error.","body":"@JoopEggen Hey, I&#39;m willing to try anything at this point.  I did try with a different name but alas, same error."}],"answers":[{"tags":[],"owner":{"account_id":3203685,"reputation":325,"user_id":5119766,"accept_rate":100,"display_name":"Richard D Lawson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661540230,"creation_date":1661537712,"answer_id":73505039,"question_id":73502092,"body_markdown":"UPDATED\r\n\r\nStarting with JDK9, java.io.FilePermission stopped canonicalizing pathnames by default.  This means that symlinks will no longer be followed.\r\n\r\nIn our environment, &quot;/zdata/svrgrp/logs/qam1&quot; is a symlink to a location on another file system.  So java.io.FilePermission would not follow that symlink, causing the &quot;access denied&quot; errors to appear.\r\n\r\nYou can tell java.io to revert to its old behavior by setting the permissionsUseCanonicalPath property to True.  So I added this to our startup script:\r\n\r\n    -Djdk.io.permissionsUseCanonicalPath=true\r\n\r\nAnd everything started working.\r\n","title":"After JDK11 upgrade, log4j2 RollingFileAppender throws java.io.FilePermission error","body":"<p>UPDATED</p>\n<p>Starting with JDK9, java.io.FilePermission stopped canonicalizing pathnames by default.  This means that symlinks will no longer be followed.</p>\n<p>In our environment, &quot;/zdata/svrgrp/logs/qam1&quot; is a symlink to a location on another file system.  So java.io.FilePermission would not follow that symlink, causing the &quot;access denied&quot; errors to appear.</p>\n<p>You can tell java.io to revert to its old behavior by setting the permissionsUseCanonicalPath property to True.  So I added this to our startup script:</p>\n<pre><code>-Djdk.io.permissionsUseCanonicalPath=true\n</code></pre>\n<p>And everything started working.</p>\n"}],"owner":{"account_id":3203685,"reputation":325,"user_id":5119766,"accept_rate":100,"display_name":"Richard D Lawson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73505039,"answer_count":1,"score":2,"last_activity_date":1661540230,"creation_date":1661521908,"question_id":73502092,"body_markdown":"After upgrading from JDK8 to JDK11, we are getting the following message when starting tomcat:  \r\n\r\n         ERROR Could not create plugin of type class \r\n         org.apache.logging.log4j.core.appender.RollingFileAppender\r\n         for element RollingFile: java.security.AccessControlException:\r\n         access denied (&quot;java.io.FilePermission&quot; &quot;/zdata/svrgrp/logs/qam1&quot; &quot;read&quot;)\r\n         java.security.AccessControlException: access denied (&quot;java.io.FilePermission&quot;\r\n         &quot;/zdata/svrgrp/logs/qam1&quot; &quot;read&quot;)\r\n\r\nJava has no problems writing other files to that directory; for example, we have a -outfile /zdata/tomcat/qam1/logs/catalina.out in the command line and we see output being written there.\r\n\r\nBut the most puzzling thing is that this worked just fine when we were running this on JDK8 using the exact same catalina policy.\r\n\r\nIs there some fundamental change in the way JDK11 uses log4j that could explain this behavior?\r\n\r\nOur log4j configuration xml is below.  sys:applogdir is defined as /zdata/svrgrp/logs/qam1:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;Configuration&gt;\r\n      &lt;Appenders&gt;\r\n    \t&lt;RollingFile\r\n    \t  name=&quot;default.file&quot;\r\n          fileName=&quot;${sys:applogdir}/myapp.log&quot;\r\n          filePattern=&quot;${sys:applogdir}/myapp.log.%d{yyyy-MM-dd}&quot;&gt;\r\n          &lt;PatternLayout&gt;\r\n            &lt;Pattern&gt;%d %-5p [%t]:${sys:bi.tomcat.instanceName} (%F:%L) - %m%n&lt;/Pattern&gt;\r\n          &lt;/PatternLayout&gt;\r\n          &lt;TimeBasedTriggeringPolicy/&gt;\r\n    \t&lt;/RollingFile&gt;\r\n    \r\n      &lt;Loggers&gt;\r\n        &lt;Root level=&quot;debug&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;default.file&quot;/&gt;\r\n        &lt;/Root&gt;\r\n      &lt;/Loggers&gt;\r\n    \r\n    &lt;/Configuration&gt;\r\n\r\nHas anyone else experienced this behavior upgrading from JDK8 to JDK11?  Any thoughts on what might have changed?","title":"After JDK11 upgrade, log4j2 RollingFileAppender throws java.io.FilePermission error","body":"<p>After upgrading from JDK8 to JDK11, we are getting the following message when starting tomcat:</p>\n<pre><code>     ERROR Could not create plugin of type class \n     org.apache.logging.log4j.core.appender.RollingFileAppender\n     for element RollingFile: java.security.AccessControlException:\n     access denied (&quot;java.io.FilePermission&quot; &quot;/zdata/svrgrp/logs/qam1&quot; &quot;read&quot;)\n     java.security.AccessControlException: access denied (&quot;java.io.FilePermission&quot;\n     &quot;/zdata/svrgrp/logs/qam1&quot; &quot;read&quot;)\n</code></pre>\n<p>Java has no problems writing other files to that directory; for example, we have a -outfile /zdata/tomcat/qam1/logs/catalina.out in the command line and we see output being written there.</p>\n<p>But the most puzzling thing is that this worked just fine when we were running this on JDK8 using the exact same catalina policy.</p>\n<p>Is there some fundamental change in the way JDK11 uses log4j that could explain this behavior?</p>\n<p>Our log4j configuration xml is below.  sys:applogdir is defined as /zdata/svrgrp/logs/qam1:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;Configuration&gt;\n  &lt;Appenders&gt;\n    &lt;RollingFile\n      name=&quot;default.file&quot;\n      fileName=&quot;${sys:applogdir}/myapp.log&quot;\n      filePattern=&quot;${sys:applogdir}/myapp.log.%d{yyyy-MM-dd}&quot;&gt;\n      &lt;PatternLayout&gt;\n        &lt;Pattern&gt;%d %-5p [%t]:${sys:bi.tomcat.instanceName} (%F:%L) - %m%n&lt;/Pattern&gt;\n      &lt;/PatternLayout&gt;\n      &lt;TimeBasedTriggeringPolicy/&gt;\n    &lt;/RollingFile&gt;\n\n  &lt;Loggers&gt;\n    &lt;Root level=&quot;debug&quot;&gt;\n      &lt;AppenderRef ref=&quot;default.file&quot;/&gt;\n    &lt;/Root&gt;\n  &lt;/Loggers&gt;\n\n&lt;/Configuration&gt;\n</code></pre>\n<p>Has anyone else experienced this behavior upgrading from JDK8 to JDK11?  Any thoughts on what might have changed?</p>\n"},{"tags":["java","rate-limiting"],"answers":[{"tags":[],"owner":{"account_id":5277236,"reputation":8320,"user_id":4213662,"accept_rate":80,"display_name":"Persixty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661540074,"creation_date":1661540074,"answer_id":73505411,"question_id":73504455,"body_markdown":"The guava rate limiter operates on permits per second.\r\n\r\nSo your 100 per minute is 100 per 60 seconds. \r\n\r\nSet the rate at 100.0/60.0 = 1.66667\r\n\r\nThe .0 is important in that calculation to make sure it&#39;s worked out as a floating-point fraction in Java.\r\n\r\nAs an aside 10,000 requests at 100 requests per minute will take 10,000/100 minutes. That&#39;s 100 minutes (1 hour 40 minutes) to complete.\r\n\r\nIn practice bottlenecks and bursts may mean you exceed the advertised rate limit. You might end up dialing back to say 90 per minute (1.5 per second) to make sure you never hit the limit.\r\n\r\nhttps://guava.dev/releases/19.0/api/docs/index.html?com/google/common/util/concurrent/RateLimiter.html\r\n","title":"Calculating the rate number for a rate limiter so that it can handle &#39;x&#39; number of requests","body":"<p>The guava rate limiter operates on permits per second.</p>\n<p>So your 100 per minute is 100 per 60 seconds.</p>\n<p>Set the rate at 100.0/60.0 = 1.66667</p>\n<p>The .0 is important in that calculation to make sure it's worked out as a floating-point fraction in Java.</p>\n<p>As an aside 10,000 requests at 100 requests per minute will take 10,000/100 minutes. That's 100 minutes (1 hour 40 minutes) to complete.</p>\n<p>In practice bottlenecks and bursts may mean you exceed the advertised rate limit. You might end up dialing back to say 90 per minute (1.5 per second) to make sure you never hit the limit.</p>\n<p><a href=\"https://guava.dev/releases/19.0/api/docs/index.html?com/google/common/util/concurrent/RateLimiter.html\" rel=\"nofollow noreferrer\">https://guava.dev/releases/19.0/api/docs/index.html?com/google/common/util/concurrent/RateLimiter.html</a></p>\n"}],"owner":{"account_id":26167883,"reputation":11,"user_id":19853418,"display_name":"Jumbolemming"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":953,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73505411,"answer_count":1,"score":0,"last_activity_date":1661540074,"creation_date":1661533847,"question_id":73504455,"body_markdown":"I&#39;m currently faced with a challenge where I need to work out the rate number for a rate limiter (either using Google Guava or resilience4j rate limiter) so that it can handle throttling the API within the limit threshold, statistics listed below:\r\n\r\n1. Input: 10,000 requests \r\n2. API limit: 100 requests per minute\r\n\r\nI&#39;m struggling to work out the formula to calculate this with the numbers listed above. If anyone could help me out, that would be greatly appreciated. Thanks.\r\n\r\n","title":"Calculating the rate number for a rate limiter so that it can handle &#39;x&#39; number of requests","body":"<p>I'm currently faced with a challenge where I need to work out the rate number for a rate limiter (either using Google Guava or resilience4j rate limiter) so that it can handle throttling the API within the limit threshold, statistics listed below:</p>\n<ol>\n<li>Input: 10,000 requests</li>\n<li>API limit: 100 requests per minute</li>\n</ol>\n<p>I'm struggling to work out the formula to calculate this with the numbers listed above. If anyone could help me out, that would be greatly appreciated. Thanks.</p>\n"},{"tags":["java","spring","active-directory","ldap"],"comments":[{"owner":{"account_id":1239958,"reputation":39014,"user_id":1202807,"display_name":"Gabriel Luci"},"score":0,"creation_date":1637980206,"post_id":70088735,"comment_id":123972737,"body_markdown":"Does the user you&#39;re testing with actually have permission to change their own password?","body":"Does the user you&#39;re testing with actually have permission to change their own password?"},{"owner":{"account_id":18651310,"reputation":71,"user_id":13594702,"display_name":"Rusty23"},"score":0,"creation_date":1638190327,"post_id":70088735,"comment_id":124014012,"body_markdown":"yes, it&#39;s the admin user.","body":"yes, it&#39;s the admin user."}],"answers":[{"tags":[],"owner":{"account_id":1239958,"reputation":39014,"user_id":1202807,"display_name":"Gabriel Luci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638204691,"creation_date":1638204691,"answer_id":70158331,"question_id":70088735,"body_markdown":"This may not be your issue since you say resetting the password works, but it&#39;s worth mentioning:\r\n\r\nTo change or reset a password, the connection must be secure. Details [here](https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/6e803168-f140-4d23-b2d3-c3a8ab5917d2).\r\n\r\nYou can do this by connecting to port 636, which is the default LDAPS port (LDAP over SSL). This can be done by specifying the port in the LDAP connection string, e.g. `&quot;LDAP://example.com:636&quot;`. Some LDAP libraries may support using `&quot;LDAPS://example.com&quot;` to achieve the same thing.\r\n\r\nSince some servers use a self-signed cert, which won&#39;t be trusted by default. So you may run into issues with that. But search for &quot;Java LDAPS&quot; for help in making that work, if you need.","title":"Compare old password against an active directory using LDAP Spring","body":"<p>This may not be your issue since you say resetting the password works, but it's worth mentioning:</p>\n<p>To change or reset a password, the connection must be secure. Details <a href=\"https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/6e803168-f140-4d23-b2d3-c3a8ab5917d2\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>You can do this by connecting to port 636, which is the default LDAPS port (LDAP over SSL). This can be done by specifying the port in the LDAP connection string, e.g. <code>&quot;LDAP://example.com:636&quot;</code>. Some LDAP libraries may support using <code>&quot;LDAPS://example.com&quot;</code> to achieve the same thing.</p>\n<p>Since some servers use a self-signed cert, which won't be trusted by default. So you may run into issues with that. But search for &quot;Java LDAPS&quot; for help in making that work, if you need.</p>\n"}],"owner":{"account_id":18651310,"reputation":71,"user_id":13594702,"display_name":"Rusty23"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":553,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661539596,"creation_date":1637707376,"question_id":70088735,"body_markdown":"I have created an endpoint to update the password of the user that is inside our Active Directory\r\nusing LDAP Spring.\r\nI have no problem changing it without checking if the previous password matches, but I need to somehow check that the previous password is the same as the one currently in the active directory.\r\n\r\nMy code is giving me this error right now:\r\n\r\n```\r\nLDAP: error code 19 - 0000216C: AtrErr: DSID-03190F1E, \r\n#1:\\n\\t0: 0000216C: DSID-03190F1E, problem 1005 (CONSTRAINT_ATT_TYPE), data 0, Att 9005a (unicodePwd)\r\n\r\n```\r\nMy password update code is as follows:\r\n\r\n```\r\npublic void updateUserPassword(User user,String oldPassword, String newPassword) throws NameNotFoundException, UnsupportedEncodingException {\r\n    Attribute oldattr = new BasicAttribute(&quot;unicodePwd&quot;, toUnicodeBytes(oldPassword);\r\n    Attribute newattr = new BasicAttribute(&quot;unicodePwd&quot;, toUnicodeBytes(newPassword);\r\n    ModificationItem olditem = new ModificationItem(DirContext.REMOVE_ATTRIBUTE, oldattr);\r\n    ModificationItem newitem = new ModificationItem(DirContext.ADD_ATTRIBUTE, newattr);\r\n    ldapTemplate.modifyAttributes(buildDn(user), new ModificationItem[] { olditem, newitem });\r\n}\r\n\r\npublic static byte[] toUnicodeBytes(String password){\r\n    String quotedPassword = &quot;\\&quot;&quot; + password + &quot;\\&quot;&quot;;\r\n    char unicodePwd[] = quotedPassword.toCharArray();\r\n    byte pwdArray[] = new byte[unicodePwd.length * 2];\r\n    for (int i = 0; i &lt; unicodePwd.length; i++)\r\n    {\r\n        pwdArray[i * 2 + 1] = (byte) (unicodePwd[i] &gt;&gt;&gt; 8);\r\n        pwdArray[i * 2 + 0] = (byte) (unicodePwd[i] &amp; 0xff);\r\n    }\r\n    return pwdArray;\r\n}\r\n\r\n```\r\n\r\nThe following code works, but I want to verify that the previous password is correct, so I can&#39;t use it.\r\n\r\n```\r\npublic void updateUserPassword(User user,String oldPassword, String newPassword) throws NameNotFoundException, UnsupportedEncodingException {\r\n    Attribute attr = new BasicAttribute(&quot;unicodePwd&quot;,toUnicodeBytes(newPassword));\r\n    ModificationItem item = new ModificationItem(DirContext.REMOVE_ATTRIBUTE, attr);\r\n    ldapTemplate.modifyAttributes(buildDn(user), new ModificationItem[] { item });\r\n}\r\n\r\n```\r\nAny ideas on how to solve the problem? Thanks in advance.","title":"Compare old password against an active directory using LDAP Spring","body":"<p>I have created an endpoint to update the password of the user that is inside our Active Directory\nusing LDAP Spring.\nI have no problem changing it without checking if the previous password matches, but I need to somehow check that the previous password is the same as the one currently in the active directory.</p>\n<p>My code is giving me this error right now:</p>\n<pre><code>LDAP: error code 19 - 0000216C: AtrErr: DSID-03190F1E, \n#1:\\n\\t0: 0000216C: DSID-03190F1E, problem 1005 (CONSTRAINT_ATT_TYPE), data 0, Att 9005a (unicodePwd)\n\n</code></pre>\n<p>My password update code is as follows:</p>\n<pre><code>public void updateUserPassword(User user,String oldPassword, String newPassword) throws NameNotFoundException, UnsupportedEncodingException {\n    Attribute oldattr = new BasicAttribute(&quot;unicodePwd&quot;, toUnicodeBytes(oldPassword);\n    Attribute newattr = new BasicAttribute(&quot;unicodePwd&quot;, toUnicodeBytes(newPassword);\n    ModificationItem olditem = new ModificationItem(DirContext.REMOVE_ATTRIBUTE, oldattr);\n    ModificationItem newitem = new ModificationItem(DirContext.ADD_ATTRIBUTE, newattr);\n    ldapTemplate.modifyAttributes(buildDn(user), new ModificationItem[] { olditem, newitem });\n}\n\npublic static byte[] toUnicodeBytes(String password){\n    String quotedPassword = &quot;\\&quot;&quot; + password + &quot;\\&quot;&quot;;\n    char unicodePwd[] = quotedPassword.toCharArray();\n    byte pwdArray[] = new byte[unicodePwd.length * 2];\n    for (int i = 0; i &lt; unicodePwd.length; i++)\n    {\n        pwdArray[i * 2 + 1] = (byte) (unicodePwd[i] &gt;&gt;&gt; 8);\n        pwdArray[i * 2 + 0] = (byte) (unicodePwd[i] &amp; 0xff);\n    }\n    return pwdArray;\n}\n\n</code></pre>\n<p>The following code works, but I want to verify that the previous password is correct, so I can't use it.</p>\n<pre><code>public void updateUserPassword(User user,String oldPassword, String newPassword) throws NameNotFoundException, UnsupportedEncodingException {\n    Attribute attr = new BasicAttribute(&quot;unicodePwd&quot;,toUnicodeBytes(newPassword));\n    ModificationItem item = new ModificationItem(DirContext.REMOVE_ATTRIBUTE, attr);\n    ldapTemplate.modifyAttributes(buildDn(user), new ModificationItem[] { item });\n}\n\n</code></pre>\n<p>Any ideas on how to solve the problem? Thanks in advance.</p>\n"},{"tags":["java","dagger-2","dagger"],"comments":[{"owner":{"account_id":20985221,"reputation":119,"user_id":15419185,"display_name":"I was in the neighborhood"},"score":0,"creation_date":1661372880,"post_id":73478284,"comment_id":129759840,"body_markdown":"Java app. I tried the log level from your link, but still no dice. Complete radio silence from Dagger. I&#39;ve spent a few hours on this, so I&#39;m just going to give up, roll back, and re-introduce my changes one by one T_T","body":"Java app. I tried the log level from your link, but still no dice. Complete radio silence from Dagger. I&#39;ve spent a few hours on this, so I&#39;m just going to give up, roll back, and re-introduce my changes one by one T_T"},{"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"score":0,"creation_date":1661538516,"post_id":73478284,"comment_id":129804441,"body_markdown":"@paulsm4 Unfortunately there&#39;s a name collision here: https://dagger.io/ is a &quot;a portable devkit for CI/CD pipelines&quot;; OP you were looking for &quot;fully static, compile-time dependency injection framework for Java&quot; documented at https://dagger.dev/.","body":"@paulsm4 Unfortunately there&#39;s a name collision here: <a href=\"https://dagger.io/\" rel=\"nofollow noreferrer\">dagger.io</a> is a &quot;a portable devkit for CI/CD pipelines&quot;; OP you were looking for &quot;fully static, compile-time dependency injection framework for Java&quot; documented at <a href=\"https://dagger.dev/\" rel=\"nofollow noreferrer\">dagger.dev</a>."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1661561618,"post_id":73478284,"comment_id":129808861,"body_markdown":"@Jeff Bowman - whoops.  Thank you!  And +1 on your excellent reply below :)","body":"@Jeff Bowman - whoops.  Thank you!  And +1 on your excellent reply below :)"}],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1661539236,"creation_date":1661539236,"answer_id":73505280,"question_id":73478284,"body_markdown":"Dagger runs as an annotation processor, so its error messages will manifest as compiler errors. These will often look like [this message](https://stackoverflow.com/q/49943809/1426891) (&quot;X cannot be provided...&quot;).\r\n\r\n```text\r\nerror: some.injected.ClassName cannot be provided without an @Inject constructor\r\n    or from an @Provides- or @Produces-annotated method.\r\nsome.injected.ClassName is injected at\r\nsome.class.that.InjectsIt\r\nsome.class.that.InjectsThatAbove\r\nsome.class.that.FurtherInjectsThat\r\n```\r\n\r\nIf you&#39;re not sure where to look for compiler errors, you can see some other answers here:\r\n\r\n* https://stackoverflow.com/questions/16633956/android-studio-where-is-the-compiler-error-output-window\r\n* https://stackoverflow.com/questions/19364949/how-to-view-the-list-of-compile-errors-in-intellij\r\n* https://stackoverflow.com/q/44153959/1426891\r\n\r\nIf you&#39;ve edited your project configuration or Gradle definition, it is also possible that Dagger is no longer running at all, or that it hasn&#39;t run for a while and has been working only based on its previous output. If so, check your Gradle file or Eclipse project definition to ensure that you are including Dagger as an `annotationProcessor`, and that you have at least one `@Component` file for that annotation processor to find.","title":"How to debug Dagger2 not generating components","body":"<p>Dagger runs as an annotation processor, so its error messages will manifest as compiler errors. These will often look like <a href=\"https://stackoverflow.com/q/49943809/1426891\">this message</a> (&quot;X cannot be provided...&quot;).</p>\n<pre><code>error: some.injected.ClassName cannot be provided without an @Inject constructor\n    or from an @Provides- or @Produces-annotated method.\nsome.injected.ClassName is injected at\nsome.class.that.InjectsIt\nsome.class.that.InjectsThatAbove\nsome.class.that.FurtherInjectsThat\n</code></pre>\n<p>If you're not sure where to look for compiler errors, you can see some other answers here:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/16633956/android-studio-where-is-the-compiler-error-output-window\">Android Studio: Where is the Compiler Error Output Window?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/19364949/how-to-view-the-list-of-compile-errors-in-intellij\">How to view the list of compile errors in IntelliJ?</a></li>\n<li><a href=\"https://stackoverflow.com/q/44153959/1426891\">eclipse annotation processor not working. Where are errors shown?</a></li>\n</ul>\n<p>If you've edited your project configuration or Gradle definition, it is also possible that Dagger is no longer running at all, or that it hasn't run for a while and has been working only based on its previous output. If so, check your Gradle file or Eclipse project definition to ensure that you are including Dagger as an <code>annotationProcessor</code>, and that you have at least one <code>@Component</code> file for that annotation processor to find.</p>\n"}],"owner":{"account_id":20985221,"reputation":119,"user_id":15419185,"display_name":"I was in the neighborhood"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73505280,"answer_count":1,"score":2,"last_activity_date":1661539236,"creation_date":1661367057,"question_id":73478284,"body_markdown":"Is there a way to get dagger to spit out _why_ it didn&#39;t generate a particular component? \r\n\r\nI tried refactoring some of our modules and ended up breaking something, but _I have literally no idea what I broke!_ All I see is that all my `DaggerFoo` components are missing, because dagger is apparently silently failing. \r\n\r\nI&#39;ve tried compiling with verbosity &amp; higher max errors, but I still see absolutely _nothing_ from Dagger itself saying what went wrong. \r\n\r\n```\r\n-Xdiags:verbose\r\n-Xmaxerrs=1000\r\n``` \r\n\r\nI have no relevant errors to share, because none are printed! \r\n\r\n\r\nHow the heck do you debug Dagger2?","title":"How to debug Dagger2 not generating components","body":"<p>Is there a way to get dagger to spit out <em>why</em> it didn't generate a particular component?</p>\n<p>I tried refactoring some of our modules and ended up breaking something, but <em>I have literally no idea what I broke!</em> All I see is that all my <code>DaggerFoo</code> components are missing, because dagger is apparently silently failing.</p>\n<p>I've tried compiling with verbosity &amp; higher max errors, but I still see absolutely <em>nothing</em> from Dagger itself saying what went wrong.</p>\n<pre><code>-Xdiags:verbose\n-Xmaxerrs=1000\n</code></pre>\n<p>I have no relevant errors to share, because none are printed!</p>\n<p>How the heck do you debug Dagger2?</p>\n"},{"tags":["java","karel"],"answers":[{"tags":[],"owner":{"account_id":26168353,"reputation":567,"user_id":19853802,"display_name":"zmehall"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661539145,"creation_date":1661539145,"answer_id":73505265,"question_id":73505160,"body_markdown":"I&#39;d assume that `r` is the object that represents your robot. Although it&#39;s not very clear based on the documentation, `rightIsBlocked()` is probably not static, so you&#39;d have to use `r.rightIsBlocked()` (because `r` is your instance of the robot&#39;s class).\r\n\r\nI could be wrong, but hopefully this helps.","title":"Karel The Robot - rightIsBlocked() is undefined for the type","body":"<p>I'd assume that <code>r</code> is the object that represents your robot. Although it's not very clear based on the documentation, <code>rightIsBlocked()</code> is probably not static, so you'd have to use <code>r.rightIsBlocked()</code> (because <code>r</code> is your instance of the robot's class).</p>\n<p>I could be wrong, but hopefully this helps.</p>\n"}],"owner":{"account_id":12234231,"reputation":37,"user_id":14040119,"display_name":"Pickle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661539145,"creation_date":1661538470,"question_id":73505160,"body_markdown":"I am a AP Comp Sci student and we have been given an assignment to code karel the robot to climb over a few hurdles\r\nI put the code: \r\n\r\n    private void ascendHurdle(){\r\n    \t\tr.turnLeft();\r\n    \t\twhile (rightIsBlocked()) {\r\n    \t\t\tr.move();\r\n    \t\t}\r\n    \t\tr.turnRight();\t\r\n    \t}\r\n\r\nit says that rightIsBlocked is undefined for the type however on the documentation it says that it is a valid command\r\nhttps://www.cs.mtsu.edu/~untch/karel/selection.html &lt;--- the documentation I used\r\nPlease help","title":"Karel The Robot - rightIsBlocked() is undefined for the type","body":"<p>I am a AP Comp Sci student and we have been given an assignment to code karel the robot to climb over a few hurdles\nI put the code:</p>\n<pre><code>private void ascendHurdle(){\n        r.turnLeft();\n        while (rightIsBlocked()) {\n            r.move();\n        }\n        r.turnRight();  \n    }\n</code></pre>\n<p>it says that rightIsBlocked is undefined for the type however on the documentation it says that it is a valid command\n<a href=\"https://www.cs.mtsu.edu/%7Euntch/karel/selection.html\" rel=\"nofollow noreferrer\">https://www.cs.mtsu.edu/~untch/karel/selection.html</a> &lt;--- the documentation I used\nPlease help</p>\n"},{"tags":["java","avro"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661522637,"creation_date":1661522637,"answer_id":73502253,"question_id":73493184,"body_markdown":"&gt; how can i remove &quot;string&quot; datatype appearing in the JSON\r\n\r\n[You can&#39;t](https://avro.apache.org/docs/1.11.1/specification/#schema-declaration). Otherwise, Avro won&#39;t know what type of the union to deserialize as.\r\n\r\n&gt; don&#39;t want to keep it as &quot;default&quot;: &quot;undefined&quot;\r\n\r\nYou shouldn&#39;t have to.\r\n\r\n&gt; If i don&#39;t provide &#39;age&#39; value, then in the JSON, age field shouldn&#39;t be visible.\r\n\r\nIt shouldn&#39;t be. You&#39;ve set age as a nullable field, so just don&#39;t set it.\r\n\r\nOverall, it&#39;s not really clear why you&#39;d use Avro only to get JSON output when there are other strictly JSON libraries ","title":"Avro - &#39;string&#39; datatype in output JSON for optional field","body":"<blockquote>\n<p>how can i remove &quot;string&quot; datatype appearing in the JSON</p>\n</blockquote>\n<p><a href=\"https://avro.apache.org/docs/1.11.1/specification/#schema-declaration\" rel=\"nofollow noreferrer\">You can't</a>. Otherwise, Avro won't know what type of the union to deserialize as.</p>\n<blockquote>\n<p>don't want to keep it as &quot;default&quot;: &quot;undefined&quot;</p>\n</blockquote>\n<p>You shouldn't have to.</p>\n<blockquote>\n<p>If i don't provide 'age' value, then in the JSON, age field shouldn't be visible.</p>\n</blockquote>\n<p>It shouldn't be. You've set age as a nullable field, so just don't set it.</p>\n<p>Overall, it's not really clear why you'd use Avro only to get JSON output when there are other strictly JSON libraries</p>\n"}],"owner":{"account_id":1411507,"reputation":1184,"user_id":1337998,"accept_rate":29,"display_name":"Molay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":394,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661539102,"creation_date":1661458002,"question_id":73493184,"body_markdown":"I am beginner to Avro. This is my sample Avro schema where &#39;age&#39; field is an optional.  Generated Java stubs out of it. \r\n\r\nFor optional field &#39;age&#39; the output JSON looks different, how can i remove &quot;string&quot; datatype appearing in the JSON. I don&#39;t want to keep it as `&quot;default&quot;: &quot;undefined&quot;` either. \r\nIf i don&#39;t provide &#39;age&#39; value, then in the JSON, age field shouldn&#39;t be visible.\r\n\r\nActual JSON\r\n\r\n    {\r\n      &quot;id&quot; : &quot;111&quot;,\r\n      &quot;name&quot; : &quot;myname&quot;,\r\n      &quot;age&quot; : {\r\n        &quot;string&quot; : &quot;25&quot;\r\n      }\r\n    }\r\n\r\nExpected JSON:\r\n\r\n    {\r\n      &quot;id&quot; : &quot;111&quot;,\r\n      &quot;name&quot; : &quot;myname&quot;,\r\n      &quot;age&quot;: &quot;25&quot;      \r\n    }\r\n\r\nAvro Schema:\r\n\r\n    {\r\n    \t&quot;name&quot;: &quot;Employee&quot;,\r\n    \t&quot;type&quot;: &quot;record&quot;,\r\n    \t&quot;namespace&quot;: &quot;com.mycompany.employee&quot;,\r\n    \t&quot;fields&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;name&quot;: &quot;id&quot;,\r\n    \t\t\t&quot;type&quot;: &quot;string&quot;\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;name&quot;: &quot;name&quot;,\r\n    \t\t\t&quot;type&quot;: &quot;string&quot;\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;name&quot;: &quot;age&quot;,\r\n    \t\t\t&quot;type&quot;: [\r\n    \t\t\t\t&quot;null&quot;,\r\n    \t\t\t\t&quot;string&quot;\r\n    \t\t\t],\r\n    \t\t\t&quot;default&quot;: null\r\n    \t\t}\r\n    \t]\r\n    }\r\n\r\nCode to generate JSON : \r\n\r\n    public class EmployeeValidate {\r\n        public static void main(String[] args) throws IOException {\r\n    \r\n            Employee employee = Employee.newBuilder().setId(&quot;111&quot;)\r\n                    .setName(&quot;myname&quot;).setAge(&quot;25&quot;).build();\r\n    \r\n            System.out.println(&quot;Before encoder : &quot; + employee.toString());\r\n    \r\n            Encoder encoder;\r\n            ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\r\n            encoder = EncoderFactory.get().jsonEncoder(Employee.getClassSchema(), byteStream, true);\r\n            employee.customEncode(encoder);\r\n            encoder.flush();\r\n    \r\n            System.out.println(&quot;After encoder : &quot; + byteStream.toString(&quot;UTF-8&quot;));\r\n        }\r\n    }\r\n\r\noutput:\r\n\r\n    Before encoder : {&quot;id&quot;: &quot;111&quot;, &quot;name&quot;: &quot;myname&quot;, &quot;age&quot;: &quot;25&quot;}\r\n\r\n    After encoder : {\r\n      &quot;id&quot; : &quot;111&quot;,\r\n      &quot;name&quot; : &quot;myname&quot;,\r\n      &quot;age&quot; : {\r\n        &quot;string&quot; : &quot;25&quot;\r\n      }\r\n    }\r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;avro&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.11.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;build&gt;\r\n    \t&lt;plugins&gt;\r\n    \t\t&lt;plugin&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.11.0&lt;/version&gt;\r\n    \t\t\t&lt;executions&gt;\r\n    \t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t&lt;phase&gt;generate-sources&lt;/phase&gt;\r\n    \t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t&lt;goal&gt;schema&lt;/goal&gt;\r\n    \t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t&lt;sourceDirectory&gt;${project.basedir}/src/main/avro/&lt;/sourceDirectory&gt;\r\n    \t\t\t\t\t\t&lt;outputDirectory&gt;${project.basedir}/src/main/java/&lt;/outputDirectory&gt;\r\n    \t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;/execution&gt;\r\n    \t\t\t&lt;/executions&gt;\r\n    \t\t&lt;/plugin&gt;\r\n    \t&lt;/plugins&gt;\r\n    &lt;/build&gt;","title":"Avro - &#39;string&#39; datatype in output JSON for optional field","body":"<p>I am beginner to Avro. This is my sample Avro schema where 'age' field is an optional.  Generated Java stubs out of it.</p>\n<p>For optional field 'age' the output JSON looks different, how can i remove &quot;string&quot; datatype appearing in the JSON. I don't want to keep it as <code>&quot;default&quot;: &quot;undefined&quot;</code> either.\nIf i don't provide 'age' value, then in the JSON, age field shouldn't be visible.</p>\n<p>Actual JSON</p>\n<pre><code>{\n  &quot;id&quot; : &quot;111&quot;,\n  &quot;name&quot; : &quot;myname&quot;,\n  &quot;age&quot; : {\n    &quot;string&quot; : &quot;25&quot;\n  }\n}\n</code></pre>\n<p>Expected JSON:</p>\n<pre><code>{\n  &quot;id&quot; : &quot;111&quot;,\n  &quot;name&quot; : &quot;myname&quot;,\n  &quot;age&quot;: &quot;25&quot;      \n}\n</code></pre>\n<p>Avro Schema:</p>\n<pre><code>{\n    &quot;name&quot;: &quot;Employee&quot;,\n    &quot;type&quot;: &quot;record&quot;,\n    &quot;namespace&quot;: &quot;com.mycompany.employee&quot;,\n    &quot;fields&quot;: [\n        {\n            &quot;name&quot;: &quot;id&quot;,\n            &quot;type&quot;: &quot;string&quot;\n        },\n        {\n            &quot;name&quot;: &quot;name&quot;,\n            &quot;type&quot;: &quot;string&quot;\n        },\n        {\n            &quot;name&quot;: &quot;age&quot;,\n            &quot;type&quot;: [\n                &quot;null&quot;,\n                &quot;string&quot;\n            ],\n            &quot;default&quot;: null\n        }\n    ]\n}\n</code></pre>\n<p>Code to generate JSON :</p>\n<pre><code>public class EmployeeValidate {\n    public static void main(String[] args) throws IOException {\n\n        Employee employee = Employee.newBuilder().setId(&quot;111&quot;)\n                .setName(&quot;myname&quot;).setAge(&quot;25&quot;).build();\n\n        System.out.println(&quot;Before encoder : &quot; + employee.toString());\n\n        Encoder encoder;\n        ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\n        encoder = EncoderFactory.get().jsonEncoder(Employee.getClassSchema(), byteStream, true);\n        employee.customEncode(encoder);\n        encoder.flush();\n\n        System.out.println(&quot;After encoder : &quot; + byteStream.toString(&quot;UTF-8&quot;));\n    }\n}\n</code></pre>\n<p>output:</p>\n<pre><code>Before encoder : {&quot;id&quot;: &quot;111&quot;, &quot;name&quot;: &quot;myname&quot;, &quot;age&quot;: &quot;25&quot;}\n\nAfter encoder : {\n  &quot;id&quot; : &quot;111&quot;,\n  &quot;name&quot; : &quot;myname&quot;,\n  &quot;age&quot; : {\n    &quot;string&quot; : &quot;25&quot;\n  }\n}\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n    &lt;artifactId&gt;avro&lt;/artifactId&gt;\n    &lt;version&gt;1.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n            &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.11.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;generate-sources&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;schema&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceDirectory&gt;${project.basedir}/src/main/avro/&lt;/sourceDirectory&gt;\n                        &lt;outputDirectory&gt;${project.basedir}/src/main/java/&lt;/outputDirectory&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","openapi","springdoc"],"answers":[{"tags":[],"owner":{"account_id":11252448,"reputation":3639,"user_id":8253209,"display_name":"Matt Ke"},"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1590841432,"creation_date":1590840770,"answer_id":62102262,"question_id":62102261,"body_markdown":"The `@io.swagger.v3.oas.annotations.Hidden` annotation can be used at the method or class level of a controller to hide one or all endpoints.\r\n\r\n(See: https://springdoc.org/faq.html#how-can-i-hide-an-operation-or-a-controller-from-documentation)\r\n\r\nExample:\r\n\r\n```java\r\n@Hidden // Hide all endpoints\r\n@RestController\r\n@RequestMapping(path = &quot;/test&quot;)\r\npublic class TestController {\r\n\r\n    private String test = &quot;Test&quot;;\r\n\r\n    @Operation(summary = &quot;Get test string&quot;, description = &quot;Returns a test string&quot;, tags = { &quot;test&quot; })\r\n    @ApiResponses(value = { @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Success&quot; ) })\r\n    @GetMapping(value = &quot;&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\r\n    public @ResponseBody String getTest() {\r\n        return test;\r\n    }\r\n\r\n    @Hidden // Hide this endpoint\r\n    @PutMapping(value = &quot;&quot;, consumes = MediaType.TEXT_PLAIN_VALUE)\r\n    @ResponseStatus(HttpStatus.OK)\r\n    public void setTest(@RequestBody String test) {\r\n        this.test = test;\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Edit:**\r\n\r\nIts also possible to generate the API documentation only for controllers of specific packages.\r\n\r\nAdd following to your `application.properties` file:\r\n\r\n    springdoc.packagesToScan=package1, package2\r\n\r\n(See: https://springdoc.org/faq.html#how-can-i-explicitly-set-which-packages-to-scan)","title":"How to hide endpoints from OpenAPI documentation with Springdoc","body":"<p>The <code>@io.swagger.v3.oas.annotations.Hidden</code> annotation can be used at the method or class level of a controller to hide one or all endpoints.</p>\n\n<p>(See: <a href=\"https://springdoc.org/faq.html#how-can-i-hide-an-operation-or-a-controller-from-documentation\" rel=\"noreferrer\">https://springdoc.org/faq.html#how-can-i-hide-an-operation-or-a-controller-from-documentation</a>)</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Hidden // Hide all endpoints\n@RestController\n@RequestMapping(path = \"/test\")\npublic class TestController {\n\n    private String test = \"Test\";\n\n    @Operation(summary = \"Get test string\", description = \"Returns a test string\", tags = { \"test\" })\n    @ApiResponses(value = { @ApiResponse(responseCode = \"200\", description = \"Success\" ) })\n    @GetMapping(value = \"\", produces = MediaType.TEXT_PLAIN_VALUE)\n    public @ResponseBody String getTest() {\n        return test;\n    }\n\n    @Hidden // Hide this endpoint\n    @PutMapping(value = \"\", consumes = MediaType.TEXT_PLAIN_VALUE)\n    @ResponseStatus(HttpStatus.OK)\n    public void setTest(@RequestBody String test) {\n        this.test = test;\n    }\n\n}\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>Its also possible to generate the API documentation only for controllers of specific packages.</p>\n\n<p>Add following to your <code>application.properties</code> file:</p>\n\n<pre><code>springdoc.packagesToScan=package1, package2\n</code></pre>\n\n<p>(See: <a href=\"https://springdoc.org/faq.html#how-can-i-explicitly-set-which-packages-to-scan\" rel=\"noreferrer\">https://springdoc.org/faq.html#how-can-i-explicitly-set-which-packages-to-scan</a>)</p>\n"},{"tags":[],"owner":{"account_id":18537481,"reputation":1557,"user_id":13506812,"display_name":"abhinav kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590891110,"creation_date":1590891110,"answer_id":62110788,"question_id":62102261,"body_markdown":"If you are working with Swagger Api and you want to hide specific endpoint then use  `@ApiOperation(value = &quot;Get Building&quot;,hidden=true)` on that endpoint...hidden attribute should be true.\r\n\r\n    @RestController\r\n    @Api(tags=&quot;Building&quot;)\r\n    @RequestMapping(value=&quot;/v2/buildings&quot;)\r\n    public class BuildingsController {\r\n    \r\n        @ApiOperation(value = &quot;Get Building&quot;,hidden=true)\r\n        @GetMapping(value = &quot;/{reference}&quot;)\r\n        public Account getBuildings(@PathVariable String reference) {\r\n            ....\r\n        }","title":"How to hide endpoints from OpenAPI documentation with Springdoc","body":"<p>If you are working with Swagger Api and you want to hide specific endpoint then use  <code>@ApiOperation(value = \"Get Building\",hidden=true)</code> on that endpoint...hidden attribute should be true.</p>\n\n<pre><code>@RestController\n@Api(tags=\"Building\")\n@RequestMapping(value=\"/v2/buildings\")\npublic class BuildingsController {\n\n    @ApiOperation(value = \"Get Building\",hidden=true)\n    @GetMapping(value = \"/{reference}\")\n    public Account getBuildings(@PathVariable String reference) {\n        ....\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15215084,"reputation":302,"user_id":10978688,"display_name":"selllami"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661538718,"creation_date":1661538718,"answer_id":73505200,"question_id":62102261,"body_markdown":"Its also possible to generate the API doc only for specific Path.\r\n\r\nAdd following to your application.yml file:\r\n\r\n\r\n    springdoc:\r\n       paths-to-match: /api/**, /v1","title":"How to hide endpoints from OpenAPI documentation with Springdoc","body":"<p>Its also possible to generate the API doc only for specific Path.</p>\n<p>Add following to your application.yml file:</p>\n<pre><code>springdoc:\n   paths-to-match: /api/**, /v1\n</code></pre>\n"}],"owner":{"account_id":11252448,"reputation":3639,"user_id":8253209,"display_name":"Matt Ke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24421,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":62102262,"answer_count":3,"score":14,"last_activity_date":1661538718,"creation_date":1590840770,"question_id":62102261,"body_markdown":"Springdoc automatically generates a API documentation for all handler methods. Even if there are no OpenAPI annotations.\r\n\r\nHow can I hide endpoints from the API documentation?","title":"How to hide endpoints from OpenAPI documentation with Springdoc","body":"<p>Springdoc automatically generates a API documentation for all handler methods. Even if there are no OpenAPI annotations.</p>\n\n<p>How can I hide endpoints from the API documentation?</p>\n"},{"tags":["java","epoch","java-time","milliseconds","java.time.instant"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1572935829,"post_id":58705657,"comment_id":103706103,"body_markdown":"Define better? More performant? I bet they perform the same. More readable? That&#39;s just opinion. However, I **think** both are better than `Calendar.getInstance().getTimeInMillis()`","body":"Define better? More performant? I bet they perform the same. More readable? That&#39;s just opinion. However, I <b>think</b> both are better than <code>Calendar.getInstance().getTimeInMillis()</code>"},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1572935940,"post_id":58705657,"comment_id":103706140,"body_markdown":"In terms of performance, `System.currentTimeMillis()` should be quicker because of less overhead (no object creation). In terms of precision, the `Instant`-approach might be better on some platforms when microsecond resolution is supported.","body":"In terms of performance, <code>System.currentTimeMillis()</code> should be quicker because of less overhead (no object creation). In terms of precision, the <code>Instant</code>-approach might be better on some platforms when microsecond resolution is supported."},{"owner":{"account_id":1304600,"reputation":9548,"user_id":1253826,"accept_rate":56,"display_name":"Yishu Fang"},"score":0,"creation_date":1572935977,"post_id":58705657,"comment_id":103706152,"body_markdown":"@ElliottFrisch I have changed the wording :-D","body":"@ElliottFrisch I have changed the wording :-D"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1572936274,"post_id":58705657,"comment_id":103706247,"body_markdown":"The real question is why are you getting the timestamp? If you&#39;re timing something, then [`System.nanoTime()`](https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime()) is probably the way to go (if you want *precision*). I *might* look for a higher level abstraction; like [`StopWatch`](https://commons.apache.org/proper/commons-lang/javadocs/api-3.9/org/apache/commons/lang3/time/StopWatch.html).","body":"The real question is why are you getting the timestamp? If you&#39;re timing something, then <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime()\" rel=\"nofollow noreferrer\"><code>System.nanoTime()</code></a> is probably the way to go (if you want <i>precision</i>). I <i>might</i> look for a higher level abstraction; like <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.9/org/apache/commons/lang3/time/StopWatch.html\" rel=\"nofollow noreferrer\"><code>StopWatch</code></a>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1573145788,"post_id":58705657,"comment_id":103795023,"body_markdown":"@MenoHochschild how does a microsecond resolution matter, when both constructs will truncate to milliseconds anyway?","body":"@MenoHochschild how does a microsecond resolution matter, when both constructs will truncate to milliseconds anyway?"},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1573151350,"post_id":58705657,"comment_id":103797590,"body_markdown":"@Holger The real resolution of `System.currentTimeMillis()` can even be around 10ms or worse. It is also more exposed to clock changes of operating system (like reconnecting to a NPT-Server).","body":"@Holger The real resolution of <code>System.currentTimeMillis()</code> can even be around 10ms or worse. It is also more exposed to clock changes of operating system (like reconnecting to a NPT-Server)."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1573204715,"post_id":58705657,"comment_id":103813409,"body_markdown":"@MenoHochschild I just re-checked, on my system `Instant.now()` does exactly the same as `Instant.ofEpochMilli(System.currentTimeMillis())`. There’s no resolution difference, but more important, there is no semantic difference. Now, which part of the specifications says, that a system with a better clock may improve the resolution of `Instant`, but is obliged to keep `System.currentTimeMillis()` at a lower resolution?","body":"@MenoHochschild I just re-checked, on my system <code>Instant.now()</code> does exactly the same as <code>Instant.ofEpochMilli(System.currentTimeMillis())</code>. There’s no resolution difference, but more important, there is no semantic difference. Now, which part of the specifications says, that a system with a better clock may improve the resolution of <code>Instant</code>, but is obliged to keep <code>System.currentTimeMillis()</code> at a lower resolution?"},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1573211106,"post_id":58705657,"comment_id":103816540,"body_markdown":"@Holger Maybe you have looked at Java 8, but Java 9 uses a possibly more precise clock, dependent on the platform. See also this [SO-post](https://stackoverflow.com/q/33477695/2491410). In Java 9: `Instant.now()` is equivalent to `Clock.systemUTC().instant()`. And that clock was changed, see also [OpenJDK-log](https://bugs.openjdk.java.net/browse/JDK-8068730)","body":"@Holger Maybe you have looked at Java 8, but Java 9 uses a possibly more precise clock, dependent on the platform. See also this <a href=\"https://stackoverflow.com/q/33477695/2491410\">SO-post</a>. In Java 9: <code>Instant.now()</code> is equivalent to <code>Clock.systemUTC().instant()</code>. And that clock was changed, see also <a href=\"https://bugs.openjdk.java.net/browse/JDK-8068730\" rel=\"nofollow noreferrer\">OpenJDK-log</a>"},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1573211363,"post_id":58705657,"comment_id":103816669,"body_markdown":"@Holger Here the new Java-9 [implementation](http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/ca7fb78b94b6/src/java.base/share/classes/java/time/Clock.java#l521). It is no longer based on `System.currentTimeMillis()` only.","body":"@Holger Here the new Java-9 <a href=\"http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/ca7fb78b94b6/src/java.base/share/classes/java/time/Clock.java#l521\" rel=\"nofollow noreferrer\">implementation</a>. It is no longer based on <code>System.currentTimeMillis()</code> only."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1573213958,"post_id":58705657,"comment_id":103817894,"body_markdown":"@MenoHochschild but the nanosecond resolution is irrelevant when the OP only asks for `toEpochMilli()`. You didn’t answer the question, why a developer has to assume that `System.currentTimeMillis()` will have a worse than milliseconds resolution, even when the system has a better clock and the same JRE provides that better resolution through a semantically equivalent construct.","body":"@MenoHochschild but the nanosecond resolution is irrelevant when the OP only asks for <code>toEpochMilli()</code>. You didn’t answer the question, why a developer has to assume that <code>System.currentTimeMillis()</code> will have a worse than milliseconds resolution, even when the system has a better clock and the same JRE provides that better resolution through a semantically equivalent construct."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1573214189,"post_id":58705657,"comment_id":103818002,"body_markdown":"@Holger No, both expressions are no longer equivalent in Java-9 or later. The produced resulting numbers/instants, even after truncation to millisecond precision in both cases and displaying only milliseconds will be usually different. However, my English is not perfect, maybe we should use the term accuracy instead of precision. Personally I don&#39;t worry so much about  it because it is a very small difference, often smaller than 10 ms. Maybe it helps you to understand the difference when you imagine that both approaches use DIFFERENT clocks of the underlying operating system.","body":"@Holger No, both expressions are no longer equivalent in Java-9 or later. The produced resulting numbers/instants, even after truncation to millisecond precision in both cases and displaying only milliseconds will be usually different. However, my English is not perfect, maybe we should use the term accuracy instead of precision. Personally I don&#39;t worry so much about  it because it is a very small difference, often smaller than 10 ms. Maybe it helps you to understand the difference when you imagine that both approaches use DIFFERENT clocks of the underlying operating system."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1573215644,"post_id":58705657,"comment_id":103818713,"body_markdown":"@MenoHochschild I understand that in that implementation both constructs use different clocks yielding different precision, but that would be easy to fix, e.g. by implementing `System.currentTimeMillis()` as `return Instant.now().toEpochMilli();` or some internal construct using the same clock as `Instant`. As long as *the specification* doesn’t forbid this, the fact that one has less precision than the other seems to be a flaw of one particular implementation.","body":"@MenoHochschild I understand that in that implementation both constructs use different clocks yielding different precision, but that would be easy to fix, e.g. by implementing <code>System.currentTimeMillis()</code> as <code>return Instant.now().toEpochMilli();</code> or some internal construct using the same clock as <code>Instant</code>. As long as <i>the specification</i> doesn’t forbid this, the fact that one has less precision than the other seems to be a flaw of one particular implementation."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1573216207,"post_id":58705657,"comment_id":103818962,"body_markdown":"@Holger The [spec](https://docs.oracle.com/javase/9/docs/api/java/time/Clock.html#systemUTC--) is somehow vague, but does not exclude a difference between `System.currentTimeMillis()` and a higher-precision clock. Furthermore, `System.currentTimeMillis()` cannot be implemented as redirecting to `Instant.now().toEpochMilli()` (which also uses `System.currentTimeMillis()`) because then we have a circular logic with the danger of infinite looping - see the Java-9 source code.","body":"@Holger The <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/Clock.html#systemUTC--\" rel=\"nofollow noreferrer\">spec</a> is somehow vague, but does not exclude a difference between <code>System.currentTimeMillis()</code> and a higher-precision clock. Furthermore, <code>System.currentTimeMillis()</code> cannot be implemented as redirecting to <code>Instant.now().toEpochMilli()</code> (which also uses <code>System.currentTimeMillis()</code>) because then we have a circular logic with the danger of infinite looping - see the Java-9 source code."}],"answers":[{"tags":[],"owner":{"account_id":2134379,"reputation":7299,"user_id":1894517,"accept_rate":79,"display_name":"Vinay Prajapati"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1572935746,"creation_date":1572935746,"answer_id":58705705,"question_id":58705657,"body_markdown":"As per my understanding `Instant.now().toEpochMilli()` is better as Java-8 onward usage  of `Instant` has been recommended. \r\n\r\nAlso, it works based on timeline and instant represents a specific moment on that timeline.\r\n\r\nIn case of `java.lang.System.currentTimeMillis()` method it returns the current time in milliseconds. The granularity of the value depends on the underlying operating system and may be larger. \r\n\r\nHence, to be consistent altogether use `Instant`.\r\n\r\n","title":"Which one is recommended: Instant.now().toEpochMilli() or System.currentTimeMillis()","body":"<p>As per my understanding <code>Instant.now().toEpochMilli()</code> is better as Java-8 onward usage  of <code>Instant</code> has been recommended. </p>\n\n<p>Also, it works based on timeline and instant represents a specific moment on that timeline.</p>\n\n<p>In case of <code>java.lang.System.currentTimeMillis()</code> method it returns the current time in milliseconds. The granularity of the value depends on the underlying operating system and may be larger. </p>\n\n<p>Hence, to be consistent altogether use <code>Instant</code>.</p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1578984051,"creation_date":1572982267,"answer_id":58718206,"question_id":58705657,"body_markdown":"Both are fine. And neither is recommended except for a minority of purposes.\r\n\r\n## What do you need milliseconds since the epoch for?\r\n\r\n&gt; In Java, we can have many different ways to get the current timestamp,\r\n\r\nFor current timestamp just use `Instant.now()`. No need to convert to milliseconds.\r\n\r\nMany methods from the first years of Java, also many in the standard library, took a `long` number of milliseconds since the epoch as argument. However, today I would consider that old-fashioned. See if you can find — or create — or more modern method that takes for instance an `Instant` as argument instead. Go object-oriented and don’t use a primitive `long`. It will make your code clearer and more self-explanatory.\r\n\r\nAs Eliott Frisch said in a comment, if this is for measuring elapsed time, you may prefer the higher resolution of `System.nanoTime()`.\r\n\r\n## If you *do* need milliseconds since the epoch\r\n\r\nAssuming that you have good reasons for wanting a count of milliseconds since the epoch, …\r\n\r\n&gt; which one is recommended: `Instant.now().toEpochMilli()` or\r\n&gt; `System.currentTimeMillis()`[?]\r\n\r\nOpinions differ. Some will say that you should use java.time, the modern date and time API, for all of your date and time work. This would imply `Instant` here. Unsg java.time is generally a good habit since the date and time classes from Java 1.0 and 1.1 (`Date`, `Calendar`, `TimeZone`, `DateFormat`, `SimpleDateFormat` and others) are poorly designed and now long outdated, certainly not any that we should use anymore. On the other hand I am not aware of any design problem with `System.curremtTimeMillis()` in particular (except what I mentioned above about using a `long` count of milliseconds at all, which obviously is intrinsic to both `Instant.now().toEpochMilli()` and `System.currentTimeMillis()`).\r\n\r\nIf there is a slight performance difference between the two, I have a hard time imagining the situation where this will matter.\r\n\r\nTake the option that you find more readable and less surprising in your context.\r\n\r\n## Similar questions\r\n\r\n - [JSR 310 :: System.currentTimeMillis() vs Instant.toEpochMilli() :: TimeZone](https://stackoverflow.com/questions/32975392/jsr-310-system-currenttimemillis-vs-instant-toepochmilli-timezone)\r\n - [Java current time different values in api](https://stackoverflow.com/questions/40848243/java-current-time-different-values-in-api)\r\n","title":"Which one is recommended: Instant.now().toEpochMilli() or System.currentTimeMillis()","body":"<p>Both are fine. And neither is recommended except for a minority of purposes.</p>\n\n<h2>What do you need milliseconds since the epoch for?</h2>\n\n<blockquote>\n  <p>In Java, we can have many different ways to get the current timestamp,</p>\n</blockquote>\n\n<p>For current timestamp just use <code>Instant.now()</code>. No need to convert to milliseconds.</p>\n\n<p>Many methods from the first years of Java, also many in the standard library, took a <code>long</code> number of milliseconds since the epoch as argument. However, today I would consider that old-fashioned. See if you can find — or create — or more modern method that takes for instance an <code>Instant</code> as argument instead. Go object-oriented and don’t use a primitive <code>long</code>. It will make your code clearer and more self-explanatory.</p>\n\n<p>As Eliott Frisch said in a comment, if this is for measuring elapsed time, you may prefer the higher resolution of <code>System.nanoTime()</code>.</p>\n\n<h2>If you <em>do</em> need milliseconds since the epoch</h2>\n\n<p>Assuming that you have good reasons for wanting a count of milliseconds since the epoch, …</p>\n\n<blockquote>\n  <p>which one is recommended: <code>Instant.now().toEpochMilli()</code> or\n  <code>System.currentTimeMillis()</code>[?]</p>\n</blockquote>\n\n<p>Opinions differ. Some will say that you should use java.time, the modern date and time API, for all of your date and time work. This would imply <code>Instant</code> here. Unsg java.time is generally a good habit since the date and time classes from Java 1.0 and 1.1 (<code>Date</code>, <code>Calendar</code>, <code>TimeZone</code>, <code>DateFormat</code>, <code>SimpleDateFormat</code> and others) are poorly designed and now long outdated, certainly not any that we should use anymore. On the other hand I am not aware of any design problem with <code>System.curremtTimeMillis()</code> in particular (except what I mentioned above about using a <code>long</code> count of milliseconds at all, which obviously is intrinsic to both <code>Instant.now().toEpochMilli()</code> and <code>System.currentTimeMillis()</code>).</p>\n\n<p>If there is a slight performance difference between the two, I have a hard time imagining the situation where this will matter.</p>\n\n<p>Take the option that you find more readable and less surprising in your context.</p>\n\n<h2>Similar questions</h2>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/32975392/jsr-310-system-currenttimemillis-vs-instant-toepochmilli-timezone\">JSR 310 :: System.currentTimeMillis() vs Instant.toEpochMilli() :: TimeZone</a></li>\n<li><a href=\"https://stackoverflow.com/questions/40848243/java-current-time-different-values-in-api\">Java current time different values in api</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2501274,"reputation":906,"user_id":3667559,"accept_rate":71,"display_name":"Chris Peng"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1590119319,"creation_date":1590119319,"answer_id":61947549,"question_id":58705657,"body_markdown":"I want to add that `System.nanoTime()` is less about precision but more about accuracy. \r\n\r\n`System.currentTimeMillis()` is based on the system clock, which is, most of the time, based on a quartz clock inside a computer. It is not accurate and it drifts. (VM is even worse since you don&#39;t have a physical clock and have to sync with the host) When your computer syncs this quartz clock with a global clock, you might even observe your clock jumps backward/forward because your local clock is too fast or slow. \r\n\r\nOn the other hand, `System.nanoTime()` is based on a monotonic clock. This clock has nothing to do with the actual time we humans speak. It only moves forward at a constant pace. It does not drift like the quartz clock and there is no sync required. This is why it is perfect for measuring elapses. ","title":"Which one is recommended: Instant.now().toEpochMilli() or System.currentTimeMillis()","body":"<p>I want to add that <code>System.nanoTime()</code> is less about precision but more about accuracy. </p>\n\n<p><code>System.currentTimeMillis()</code> is based on the system clock, which is, most of the time, based on a quartz clock inside a computer. It is not accurate and it drifts. (VM is even worse since you don't have a physical clock and have to sync with the host) When your computer syncs this quartz clock with a global clock, you might even observe your clock jumps backward/forward because your local clock is too fast or slow. </p>\n\n<p>On the other hand, <code>System.nanoTime()</code> is based on a monotonic clock. This clock has nothing to do with the actual time we humans speak. It only moves forward at a constant pace. It does not drift like the quartz clock and there is no sync required. This is why it is perfect for measuring elapses. </p>\n"},{"tags":[],"owner":{"account_id":151761,"reputation":4696,"user_id":365837,"accept_rate":85,"display_name":"Rok Povsic"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1661538656,"creation_date":1661537206,"answer_id":73504966,"question_id":58705657,"body_markdown":"For what it&#39;s worth, I&#39;ve done a quick non-ideal performance test comparing the two methods.\r\n\r\nOn my system (Ubuntu 20.04, OpenJDK 17.0.4), running `System.currentTimeMillis` ten million times takes cca 230ms while running `Instant.now().toEpochMilli()` ten million times takes cca 370ms.\r\n\r\n```\r\nimport java.time.Instant;\r\n\r\npublic class A { \r\n   public static void main(String[] args) {\r\n       long a = 0;\r\n       long start = System.currentTimeMillis();\r\n       for (int i = 0; i &lt; 10_000_000; i++) {\r\n           //a += Instant.now().toEpochMilli();\r\n           a += System.currentTimeMillis();\r\n       }\r\n       System.out.println(a);\r\n       System.out.println(System.currentTimeMillis() - start);\r\n   }   \r\n}\r\n```","title":"Which one is recommended: Instant.now().toEpochMilli() or System.currentTimeMillis()","body":"<p>For what it's worth, I've done a quick non-ideal performance test comparing the two methods.</p>\n<p>On my system (Ubuntu 20.04, OpenJDK 17.0.4), running <code>System.currentTimeMillis</code> ten million times takes cca 230ms while running <code>Instant.now().toEpochMilli()</code> ten million times takes cca 370ms.</p>\n<pre><code>import java.time.Instant;\n\npublic class A { \n   public static void main(String[] args) {\n       long a = 0;\n       long start = System.currentTimeMillis();\n       for (int i = 0; i &lt; 10_000_000; i++) {\n           //a += Instant.now().toEpochMilli();\n           a += System.currentTimeMillis();\n       }\n       System.out.println(a);\n       System.out.println(System.currentTimeMillis() - start);\n   }   \n}\n</code></pre>\n"}],"owner":{"account_id":1304600,"reputation":9548,"user_id":1253826,"accept_rate":56,"display_name":"Yishu Fang"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33004,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":58718206,"answer_count":4,"score":33,"last_activity_date":1661538656,"creation_date":1572935491,"question_id":58705657,"body_markdown":"In Java, we can have many different ways to get the current timestamp, but which one is recommended: \r\n`Instant.now().toEpochMilli()` or `System.currentTimeMillis()`","title":"Which one is recommended: Instant.now().toEpochMilli() or System.currentTimeMillis()","body":"<p>In Java, we can have many different ways to get the current timestamp, but which one is recommended: \n<code>Instant.now().toEpochMilli()</code> or <code>System.currentTimeMillis()</code></p>\n"},{"tags":["java","rounding"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661538067,"creation_date":1661538067,"answer_id":73505099,"question_id":73505028,"body_markdown":"There are different ways how to perform rounding. See [this Wikipedia page][1] - and if it is not listed it does not mean it is invalid or not meaningful.\r\n\r\nSo you will have to either pick one of the functions provided by Java or provide that function yourself, be it in source or as third party library. Check the methods of [java.lang.Math][2] or [java.lang.StrictMath][3].\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Rounding\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StrictMath.html","title":"How to round down if there is multiple 5 in the decimal places?","body":"<p>There are different ways how to perform rounding. See <a href=\"https://en.wikipedia.org/wiki/Rounding\" rel=\"nofollow noreferrer\">this Wikipedia page</a> - and if it is not listed it does not mean it is invalid or not meaningful.</p>\n<p>So you will have to either pick one of the functions provided by Java or provide that function yourself, be it in source or as third party library. Check the methods of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html\" rel=\"nofollow noreferrer\">java.lang.Math</a> or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StrictMath.html\" rel=\"nofollow noreferrer\">java.lang.StrictMath</a>.</p>\n"}],"owner":{"account_id":3563802,"reputation":21,"user_id":2975935,"display_name":"Articlaus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1661538067,"creation_date":1661537629,"question_id":73505028,"body_markdown":"I want to round a number down to two decimal places but if the number entered has half or has multiples of 5 it would always be rounded down.\r\n\r\nFor Example.\r\n\r\n1.555555555 should be 1.55\r\n\r\n1.555555556 should be 1.56\r\n\r\n1.555555551 should be 1.55 etc,\r\n\r\nRounding.HALF_DOWN rounds 1.5555555 to 1.56 which is not what i want\r\n\r\nit also rounds 1.55555551 to 1.56 but i want it as 1.55.\r\n","title":"How to round down if there is multiple 5 in the decimal places?","body":"<p>I want to round a number down to two decimal places but if the number entered has half or has multiples of 5 it would always be rounded down.</p>\n<p>For Example.</p>\n<p>1.555555555 should be 1.55</p>\n<p>1.555555556 should be 1.56</p>\n<p>1.555555551 should be 1.55 etc,</p>\n<p>Rounding.HALF_DOWN rounds 1.5555555 to 1.56 which is not what i want</p>\n<p>it also rounds 1.55555551 to 1.56 but i want it as 1.55.</p>\n"},{"tags":["java","netbeans","look-and-feel"],"answers":[{"tags":[],"owner":{"account_id":26086726,"reputation":129,"user_id":19784153,"display_name":"ePortfel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661537123,"creation_date":1661537123,"answer_id":73504947,"question_id":73471853,"body_markdown":"Try com.sun.java.swing.plaf.windows.WindowsLookAndFeel.\r\n\r\nYou need not to put startup options in NetBeans, check look and feels Tools / Options / Apperance menu.\r\n\r\nAnother workaround would be making all non-editable widgets to be disabled - setEnabled(false).","title":"NetBeans look&amp;feel same as resulting one","body":"<p>Try com.sun.java.swing.plaf.windows.WindowsLookAndFeel.</p>\n<p>You need not to put startup options in NetBeans, check look and feels Tools / Options / Apperance menu.</p>\n<p>Another workaround would be making all non-editable widgets to be disabled - setEnabled(false).</p>\n"}],"owner":{"account_id":212642,"reputation":831,"user_id":465588,"accept_rate":68,"display_name":"Maik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661537123,"creation_date":1661338330,"question_id":73471853,"body_markdown":"I am trying to find a java look&amp;feel that can be used in NetBeans (I&#39;m currently usign version 14) to have a &quot;what you see is what you get&quot; result\r\n\r\nAs I said here: https://stackoverflow.com/questions/71747401/netbeans-design-missing-bold, I was using the Metal l&amp;f, both in NetBeans (by launching it with the &quot;--laf javax.swing.plaf.metal.MetalLookAndFeel&quot; parameter) and in the code\r\n\r\nBut lately it doesn&#39;t work as it used to: in NetBeans the varoius graphical objects (labels etc...) have a &quot;normal&quot; font, but when i run the project, they have a bold font, which makes them larger and ruins their positioning. Thus I can&#39;t create a good graphical interface anymore, because I have lost the &quot;what you see is what you get&quot; effect\r\n\r\nI have also tried different l&amp;f, for example Nimbus. With it, I can solve my problem: NetBeans correctly shows the graphical objects as expected. But imho Nimbus has a big lack: non-editable obects (for example text fields) are showed identical as editable ones! (the Metal l&amp;f instead makes a good work at this)\r\n\r\nI&#39;m searching for a l&amp;f that can correctly be displayed by NetBeans, and that can differentiate between editable and non-editable objects. Can you point me out any?\r\n\r\n \r\n","title":"NetBeans look&amp;feel same as resulting one","body":"<p>I am trying to find a java look&amp;feel that can be used in NetBeans (I'm currently usign version 14) to have a &quot;what you see is what you get&quot; result</p>\n<p>As I said here: <a href=\"https://stackoverflow.com/questions/71747401/netbeans-design-missing-bold\">netbeans design missing bold</a>, I was using the Metal l&amp;f, both in NetBeans (by launching it with the &quot;--laf javax.swing.plaf.metal.MetalLookAndFeel&quot; parameter) and in the code</p>\n<p>But lately it doesn't work as it used to: in NetBeans the varoius graphical objects (labels etc...) have a &quot;normal&quot; font, but when i run the project, they have a bold font, which makes them larger and ruins their positioning. Thus I can't create a good graphical interface anymore, because I have lost the &quot;what you see is what you get&quot; effect</p>\n<p>I have also tried different l&amp;f, for example Nimbus. With it, I can solve my problem: NetBeans correctly shows the graphical objects as expected. But imho Nimbus has a big lack: non-editable obects (for example text fields) are showed identical as editable ones! (the Metal l&amp;f instead makes a good work at this)</p>\n<p>I'm searching for a l&amp;f that can correctly be displayed by NetBeans, and that can differentiate between editable and non-editable objects. Can you point me out any?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661529942,"post_id":73491719,"comment_id":129801819,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":7399433,"reputation":1391,"user_id":5630361,"display_name":"Marius Razvan Varvarei"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661536670,"creation_date":1661536670,"answer_id":73504881,"question_id":73491719,"body_markdown":"to make it work the same on Android 13, you need to ask for the POST_NOTIFICATIONS permission also at runtime! See the [documentation][1] for the changes that came with Android 13.\r\n\r\nAdding a `Manifest.permission.POST_NOTIFICATIONS` ALSO to your existing permissions request should solve the problem.\r\n\r\n\r\n  [1]: https://developer.android.com/develop/ui/views/notifications/notification-permission","title":"How can I make my ForegroundService to show notifications on Android 13?","body":"<p>to make it work the same on Android 13, you need to ask for the POST_NOTIFICATIONS permission also at runtime! See the <a href=\"https://developer.android.com/develop/ui/views/notifications/notification-permission\" rel=\"nofollow noreferrer\">documentation</a> for the changes that came with Android 13.</p>\n<p>Adding a <code>Manifest.permission.POST_NOTIFICATIONS</code> ALSO to your existing permissions request should solve the problem.</p>\n"}],"owner":{"account_id":26115240,"reputation":39,"user_id":19808484,"display_name":"Dirk Nash Orimaco"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1343,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1661536670,"creation_date":1661449345,"question_id":73491719,"body_markdown":"My app was working fine until I used it on an Android 13 phone. On this phone, my ForegroundService doesn&#39;t display a notification as in [this screenshot][1], but it&#39;s visible in the Foreground Services (FGS) Task Manager as per the [documentation][2].\r\n\r\nI put the [POST_NOTIFICATIONS][3] permission in the manifest, but I still can&#39;t see the foreground notification and I need it visible at all times, as my app manages calls that I want to answer/reject/end from notifications.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fp6uu.jpg\r\n  [2]: https://developer.android.com/guide/components/foreground-services#handle-user-initiated-stop\r\n  [3]: https://developer.android.com/reference/android/Manifest.permission#POST_NOTIFICATIONS","title":"How can I make my ForegroundService to show notifications on Android 13?","body":"<p>My app was working fine until I used it on an Android 13 phone. On this phone, my ForegroundService doesn't display a notification as in <a href=\"https://i.stack.imgur.com/fp6uu.jpg\" rel=\"nofollow noreferrer\">this screenshot</a>, but it's visible in the Foreground Services (FGS) Task Manager as per the <a href=\"https://developer.android.com/guide/components/foreground-services#handle-user-initiated-stop\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>I put the <a href=\"https://developer.android.com/reference/android/Manifest.permission#POST_NOTIFICATIONS\" rel=\"nofollow noreferrer\">POST_NOTIFICATIONS</a> permission in the manifest, but I still can't see the foreground notification and I need it visible at all times, as my app manages calls that I want to answer/reject/end from notifications.</p>\n"},{"tags":["java","oop","instanceof"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1661517007,"post_id":73500972,"comment_id":129797045,"body_markdown":"What do you gain from that? Maybe your design can be improved.","body":"What do you gain from that? Maybe your design can be improved."},{"owner":{"account_id":3057856,"reputation":1337,"user_id":2591131,"accept_rate":75,"display_name":"Eric"},"score":0,"creation_date":1661517083,"post_id":73500972,"comment_id":129797092,"body_markdown":"I&#39;m not sure if there is a better way, but I would add a constructor and then in both classes pass a value through indicating from which outer type it came from.","body":"I&#39;m not sure if there is a better way, but I would add a constructor and then in both classes pass a value through indicating from which outer type it came from."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661519853,"post_id":73500972,"comment_id":129798056,"body_markdown":"Ask yourself the right question. Do you need to know if a wheel belongs to a CarA or a CarB, or do you need to have different wheels for cars A and cars B? In the first case, you shouldn&#39;t check it with instanceof but some method of Wheel. In the second case, you should have two different classes. But only you know the business logic you want to implement here","body":"Ask yourself the right question. Do you need to know if a wheel belongs to a CarA or a CarB, or do you need to have different wheels for cars A and cars B? In the first case, you shouldn&#39;t check it with instanceof but some method of Wheel. In the second case, you should have two different classes. But only you know the business logic you want to implement here"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661517525,"creation_date":1661516971,"answer_id":73501044,"question_id":73500972,"body_markdown":"No, with `instanceof` it is not possible. As you mentioned, the `Wheel` class is exists only once. Just because you access it through a different path doesn&#39;t make it a different class.","title":"Java: Can instanceof also check &quot;enclosing classes&quot;?","body":"<p>No, with <code>instanceof</code> it is not possible. As you mentioned, the <code>Wheel</code> class is exists only once. Just because you access it through a different path doesn't make it a different class.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1661517669,"creation_date":1661517669,"answer_id":73501204,"question_id":73500972,"body_markdown":"You have exactly one `Wheel` class. `Car.Wheel`, `CarA.Wheel` and `CarB.Wheel` are just different names for that same class, and that is why `instanceof` evaluates to true for all of those types.\r\n\r\nAn alternative way of doing this without (explicitly) introducing a new field in `Wheel` or having every `Car` have their own `Wheel` class is to make `Wheel` non-static. Now the wheel knows which car it came from.\r\n\r\n```\r\npublic class Car\r\n{\r\n    public class Wheel {\r\n        public Car getCar() {\r\n            return Car.this;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n    Car.Wheel wheel = new CarA().new Wheel();\r\n    System.out.println(wheel.getCar() instanceof CarA); // true\r\n    System.out.println(wheel.getCar() instanceof CarB); // false\r\n\r\nUnder the hood though, by making it non-static, a synthetic field is implicitly added to `Wheel` to record which car it came from, so you might consider this &quot;cheating&quot;.","title":"Java: Can instanceof also check &quot;enclosing classes&quot;?","body":"<p>You have exactly one <code>Wheel</code> class. <code>Car.Wheel</code>, <code>CarA.Wheel</code> and <code>CarB.Wheel</code> are just different names for that same class, and that is why <code>instanceof</code> evaluates to true for all of those types.</p>\n<p>An alternative way of doing this without (explicitly) introducing a new field in <code>Wheel</code> or having every <code>Car</code> have their own <code>Wheel</code> class is to make <code>Wheel</code> non-static. Now the wheel knows which car it came from.</p>\n<pre><code>public class Car\n{\n    public class Wheel {\n        public Car getCar() {\n            return Car.this;\n        }\n    }\n}\n</code></pre>\n<pre><code>Car.Wheel wheel = new CarA().new Wheel();\nSystem.out.println(wheel.getCar() instanceof CarA); // true\nSystem.out.println(wheel.getCar() instanceof CarB); // false\n</code></pre>\n<p>Under the hood though, by making it non-static, a synthetic field is implicitly added to <code>Wheel</code> to record which car it came from, so you might consider this &quot;cheating&quot;.</p>\n"},{"tags":[],"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661530583,"creation_date":1661530583,"answer_id":73503893,"question_id":73500972,"body_markdown":"I am not sure, functionally speaking, whether you need to have distinct wheels for each type of Car, or rather you need to know to which type of Car a specific wheel belongs to.\r\n\r\nIn the first case the answer is quick: you need to duplicate your class into `WheelA` and `WheelB`.\r\n\r\nIn the second case, you simply shouldn&#39;t use `instanceof` to check. You may do something like this:\r\n\r\n    public class Car\r\n    {\r\n        public static class Wheel&lt;T extends Car&gt; {\r\n\r\n            private final Class&lt;T&gt; carType;\r\n\r\n            public Wheel(Class&lt;T&gt; carType) {\r\n                this.carType = carType;\r\n            }\r\n\r\n            public Class&lt;T&gt; getCarType() {\r\n                return carType;\r\n            }\r\n        }\r\n    }\r\n\r\nHence your code would change like this:\r\n\r\n    public class x\r\n    {\r\n        public static void main (String [] args)\r\n        {\r\n            System.out.println (&quot;*******&quot;);\r\n            \r\n            CarA.Wheel&lt;CarA&gt; caw = new CarA.Wheel&lt;&gt; (CarA.class);\r\n            System.out.println (caw.getCarType().equals(CarA.class));\r\n            System.out.println (caw.getCarType().equals(CarB.class));\r\n        }\r\n    }","title":"Java: Can instanceof also check &quot;enclosing classes&quot;?","body":"<p>I am not sure, functionally speaking, whether you need to have distinct wheels for each type of Car, or rather you need to know to which type of Car a specific wheel belongs to.</p>\n<p>In the first case the answer is quick: you need to duplicate your class into <code>WheelA</code> and <code>WheelB</code>.</p>\n<p>In the second case, you simply shouldn't use <code>instanceof</code> to check. You may do something like this:</p>\n<pre><code>public class Car\n{\n    public static class Wheel&lt;T extends Car&gt; {\n\n        private final Class&lt;T&gt; carType;\n\n        public Wheel(Class&lt;T&gt; carType) {\n            this.carType = carType;\n        }\n\n        public Class&lt;T&gt; getCarType() {\n            return carType;\n        }\n    }\n}\n</code></pre>\n<p>Hence your code would change like this:</p>\n<pre><code>public class x\n{\n    public static void main (String [] args)\n    {\n        System.out.println (&quot;*******&quot;);\n        \n        CarA.Wheel&lt;CarA&gt; caw = new CarA.Wheel&lt;&gt; (CarA.class);\n        System.out.println (caw.getCarType().equals(CarA.class));\n        System.out.println (caw.getCarType().equals(CarB.class));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661536339,"creation_date":1661536339,"answer_id":73504836,"question_id":73500972,"body_markdown":"That&#39;s exactly why I find inner classes not clear (sorry for opinion)\r\n\r\nAn &quot;static inner class&quot; (it&#39;s called like that) Is just a kind of class that is declared in another class, but it just react the same way as if it was declared outside of that class.\r\n\r\nAnd since it&#39;s static, it work exactly as if you had String constant: they have the same value in the parent and in the child classes:\r\nCar.Wheel.class == CarA.Wheel.class == CarB.Wheel.class\r\n\r\n        System.out.println(CarA.Wheel.class == Car.Wheel.class);\r\n        \r\n        System.out.println(CarA.Wheel.class);\r\n        System.out.println(CarB.Wheel.class);\r\n\r\nprints\r\n\r\n    true\r\n    class local.Car$Wheel\r\n    class local.Car$Wheel\r\n\r\nAnd since you cannot override anything that is static in java, there are no reason to refer to CarA.Wheel and CarB.Wheel\r\n\r\nTo me, and that&#39;s a specific Opinion, you don&#39;t really need to do an inner class in this case: Car and Wheel could be on same level in the package.\r\n\r\nInner classes that aren&#39;t static are another story.\r\n","title":"Java: Can instanceof also check &quot;enclosing classes&quot;?","body":"<p>That's exactly why I find inner classes not clear (sorry for opinion)</p>\n<p>An &quot;static inner class&quot; (it's called like that) Is just a kind of class that is declared in another class, but it just react the same way as if it was declared outside of that class.</p>\n<p>And since it's static, it work exactly as if you had String constant: they have the same value in the parent and in the child classes:\nCar.Wheel.class == CarA.Wheel.class == CarB.Wheel.class</p>\n<pre><code>    System.out.println(CarA.Wheel.class == Car.Wheel.class);\n    \n    System.out.println(CarA.Wheel.class);\n    System.out.println(CarB.Wheel.class);\n</code></pre>\n<p>prints</p>\n<pre><code>true\nclass local.Car$Wheel\nclass local.Car$Wheel\n</code></pre>\n<p>And since you cannot override anything that is static in java, there are no reason to refer to CarA.Wheel and CarB.Wheel</p>\n<p>To me, and that's a specific Opinion, you don't really need to do an inner class in this case: Car and Wheel could be on same level in the package.</p>\n<p>Inner classes that aren't static are another story.</p>\n"}],"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":73501204,"answer_count":4,"score":0,"last_activity_date":1661536339,"creation_date":1661516534,"question_id":73500972,"body_markdown":"Is instanceof able to check also the enclosing class (not sure if that is the right wording for my problem)? \r\n\r\nPlease see below.\r\n\r\n**Car.java**\r\n\r\n\r\n\r\n    public class Car\r\n    {\r\n    \tpublic static class Wheel {}\r\n    }\r\n    \r\n    class CarA extends Car {}\r\n    \r\n    class CarB extends Car {}\r\n\r\n\r\n**x.java**\r\n\r\n    public class x\r\n    {\r\n    \tpublic static void main (String [] args)\r\n    \t{\r\n    \t\tSystem.out.println (&quot;*******&quot;);\r\n    \t\t\r\n    \t\tCarA.Wheel caw = new CarA.Wheel ();\r\n    \t\tCarB.Wheel cbw = new CarB.Wheel ();\r\n    \t\tSystem.out.println (caw instanceof CarA.Wheel);\r\n    \t\tSystem.out.println (caw instanceof CarB.Wheel);\r\n    \t\tSystem.out.println (cbw instanceof CarA.Wheel);\r\n    \t\tSystem.out.println (cbw instanceof CarB.Wheel);\r\n    \t}\r\n    }\r\n\r\n** Output is **\r\n\r\n    true\r\n    true\r\n    true\r\n    true\r\n\r\nBut I am looking for\r\n\r\n    true\r\n    false\r\n    false \r\n    true\r\n\r\nI understand Wheel is always the same because of the extend but is there a way I can include CarA/CarB into the check (without implementiering Wheel in CarA and also in CarB)??\r\n\r\n","title":"Java: Can instanceof also check &quot;enclosing classes&quot;?","body":"<p>Is instanceof able to check also the enclosing class (not sure if that is the right wording for my problem)?</p>\n<p>Please see below.</p>\n<p><strong>Car.java</strong></p>\n<pre><code>public class Car\n{\n    public static class Wheel {}\n}\n\nclass CarA extends Car {}\n\nclass CarB extends Car {}\n</code></pre>\n<p><strong>x.java</strong></p>\n<pre><code>public class x\n{\n    public static void main (String [] args)\n    {\n        System.out.println (&quot;*******&quot;);\n        \n        CarA.Wheel caw = new CarA.Wheel ();\n        CarB.Wheel cbw = new CarB.Wheel ();\n        System.out.println (caw instanceof CarA.Wheel);\n        System.out.println (caw instanceof CarB.Wheel);\n        System.out.println (cbw instanceof CarA.Wheel);\n        System.out.println (cbw instanceof CarB.Wheel);\n    }\n}\n</code></pre>\n<p>** Output is **</p>\n<pre><code>true\ntrue\ntrue\ntrue\n</code></pre>\n<p>But I am looking for</p>\n<pre><code>true\nfalse\nfalse \ntrue\n</code></pre>\n<p>I understand Wheel is always the same because of the extend but is there a way I can include CarA/CarB into the check (without implementiering Wheel in CarA and also in CarB)??</p>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":1027355,"reputation":2721,"user_id":1036386,"accept_rate":91,"display_name":"Kalec"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626786524,"creation_date":1626786524,"answer_id":68455457,"question_id":68455340,"body_markdown":"A restart fixed everything. Didn&#39;t even neeed to invalidate cache. ","title":"Auto import does not use the keyword import, instead pastes the fully qualified path","body":"<p>A restart fixed everything. Didn't even neeed to invalidate cache.</p>\n"},{"tags":[],"owner":{"account_id":2097700,"reputation":437,"user_id":1866109,"display_name":"Francisco J. G&#252;emes Sevilla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661502791,"creation_date":1661502791,"answer_id":73498194,"question_id":68455340,"body_markdown":"I had the same problem. I solved by disable the fully qualified imports:\r\nSettings --&gt; Editor --&gt; Code Style --&gt; Imports tab, then\r\ndisable the check _Use fully qualified class names_\r\n","title":"Auto import does not use the keyword import, instead pastes the fully qualified path","body":"<p>I had the same problem. I solved by disable the fully qualified imports:\nSettings --&gt; Editor --&gt; Code Style --&gt; Imports tab, then\ndisable the check <em>Use fully qualified class names</em></p>\n"}],"owner":{"account_id":1027355,"reputation":2721,"user_id":1036386,"accept_rate":91,"display_name":"Kalec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1661535573,"creation_date":1626785992,"question_id":68455340,"body_markdown":"I&#39;m declaring a simple class that implements an interface. There is no possible name collision, the java class is not even 10 lines long\r\n\r\n    public class MyConfig implements IConfig {\r\n    }\r\n\r\n`IConfig` is in red. Alt + Enter -&gt; Import class produces:\r\n\r\n    public class MyConfig implements com.whatever.etc.IConfg {\r\n    }\r\n\r\nI know that I caused this error, because I messed with optimize imports, so that there&#39;s no space between any imports except static ones, and that they are at the top. Also to never insert star imports, and a few other things. So I did this. I just don&#39;t know how and how to fix it.\r\n\r\nI don&#39;t want to manually import things because intellij is being stupid. \r\n\r\nOnce I manually and correctly import the class, and then use &quot;Otimise Imports&quot;, it doesn&#39;t remove the import, and fully qualify the thing like before. It just moves it to the correct lexicographical position and everything is fine. It compiles.\r\n\r\nBut again, if I delete the import, call auto import ... it pastes the fully qualified path. \r\n\r\nWHY?!","title":"Auto import does not use the keyword import, instead pastes the fully qualified path","body":"<p>I'm declaring a simple class that implements an interface. There is no possible name collision, the java class is not even 10 lines long</p>\n<pre><code>public class MyConfig implements IConfig {\n}\n</code></pre>\n<p><code>IConfig</code> is in red. Alt + Enter -&gt; Import class produces:</p>\n<pre><code>public class MyConfig implements com.whatever.etc.IConfg {\n}\n</code></pre>\n<p>I know that I caused this error, because I messed with optimize imports, so that there's no space between any imports except static ones, and that they are at the top. Also to never insert star imports, and a few other things. So I did this. I just don't know how and how to fix it.</p>\n<p>I don't want to manually import things because intellij is being stupid.</p>\n<p>Once I manually and correctly import the class, and then use &quot;Otimise Imports&quot;, it doesn't remove the import, and fully qualify the thing like before. It just moves it to the correct lexicographical position and everything is fine. It compiles.</p>\n<p>But again, if I delete the import, call auto import ... it pastes the fully qualified path.</p>\n<p>WHY?!</p>\n"},{"tags":["java","interface","annotations","language-features"],"answers":[{"tags":[],"owner":{"account_id":38517,"reputation":5652,"user_id":110570,"display_name":"mrkishi"},"down_vote_count":1,"up_vote_count":416,"is_accepted":true,"score":415,"last_activity_date":1243465824,"creation_date":1243465824,"answer_id":918417,"question_id":918393,"body_markdown":"The *@* symbol denotes an annotation type definition.\r\n\r\nThat means it is **not** really an interface, but rather a new annotation type -- to be used as a function modifier, such as *@override*.\r\n\r\nSee this [javadocs entry][1] on the subject.\r\n\r\n [1]:http://java.sun.com/j2se/1.5.0/docs/guide/language/annotations.html","title":"What&#39;s the difference between interface and @interface in java?","body":"<p>The <em>@</em> symbol denotes an annotation type definition.</p>\n\n<p>That means it is <strong>not</strong> really an interface, but rather a new annotation type -- to be used as a function modifier, such as <em>@override</em>.</p>\n\n<p>See this <a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/annotations.html\" rel=\"noreferrer\">javadocs entry</a> on the subject.</p>\n"},{"tags":[],"owner":{"account_id":37444,"reputation":2390,"user_id":107057,"display_name":"DavidValeri"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1495182556,"creation_date":1243466175,"answer_id":918446,"question_id":918393,"body_markdown":"The `interface` keyword indicates that you are declaring a traditional interface class in Java.  \r\nThe `@interface` keyword is used to declare a new annotation type.  \r\n\r\nSee [docs.oracle tutorial][1] on annotations for a description of the syntax.  \r\nSee the [JLS][2] if you really want to get into the details of what `@interface` means.\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/annotations/declaring.html\r\n  [2]: http://java.sun.com/docs/books/jls/third_edition/html/interfaces.html#9.6","title":"What&#39;s the difference between interface and @interface in java?","body":"<p>The <code>interface</code> keyword indicates that you are declaring a traditional interface class in Java.<br>\nThe <code>@interface</code> keyword is used to declare a new annotation type.  </p>\n\n<p>See <a href=\"http://docs.oracle.com/javase/tutorial/java/annotations/declaring.html\" rel=\"noreferrer\">docs.oracle tutorial</a> on annotations for a description of the syntax.<br>\nSee the <a href=\"http://java.sun.com/docs/books/jls/third_edition/html/interfaces.html#9.6\" rel=\"noreferrer\">JLS</a> if you really want to get into the details of what <code>@interface</code> means.</p>\n"},{"tags":[],"owner":{"account_id":2127444,"reputation":3140,"user_id":1889167,"accept_rate":44,"display_name":"mavis"},"down_vote_count":1,"up_vote_count":157,"is_accepted":false,"score":156,"last_activity_date":1484850362,"creation_date":1392796057,"answer_id":21874183,"question_id":918393,"body_markdown":"interface:\r\n\r\n In general, an interface exposes a contract without exposing the underlying implementation details. In Object Oriented Programming, interfaces define abstract types that expose behavior, but contain no logic. Implementation is defined by the class or type that implements the interface.\r\n\r\n@interface : (Annotation type)\r\n\r\nTake the below example, which has a lot of comments:\r\n\r\n    public class Generation3List extends Generation2List {\r\n\r\n       // Author: John Doe\r\n       // Date: 3/17/2002\r\n       // Current revision: 6\r\n       // Last modified: 4/12/2004\r\n       // By: Jane Doe\r\n       // Reviewers: Alice, Bill, Cindy\r\n\r\n       // class code goes here\r\n\r\n    }\r\n\r\nInstead of this, you can declare an annotation type\r\n\r\n     @interface ClassPreamble {\r\n       String author();\r\n       String date();\r\n       int currentRevision() default 1;\r\n       String lastModified() default &quot;N/A&quot;;\r\n       String lastModifiedBy() default &quot;N/A&quot;;\r\n       // Note use of array\r\n       String[] reviewers();\r\n    }\r\n\r\nwhich can then annotate a class as follows: \r\n\r\n    @ClassPreamble (\r\n       author = &quot;John Doe&quot;,\r\n       date = &quot;3/17/2002&quot;,\r\n       currentRevision = 6,\r\n       lastModified = &quot;4/12/2004&quot;,\r\n       lastModifiedBy = &quot;Jane Doe&quot;,\r\n       // Note array notation\r\n       reviewers = {&quot;Alice&quot;, &quot;Bob&quot;, &quot;Cindy&quot;}\r\n    )\r\n    public class Generation3List extends Generation2List {\r\n\r\n    // class code goes here\r\n\r\n    }\r\n\r\n\r\nPS:\r\n**Many annotations replace comments in code.**\r\n\r\nReference: http://docs.oracle.com/javase/tutorial/java/annotations/declaring.html\r\n","title":"What&#39;s the difference between interface and @interface in java?","body":"<p>interface:</p>\n\n<p>In general, an interface exposes a contract without exposing the underlying implementation details. In Object Oriented Programming, interfaces define abstract types that expose behavior, but contain no logic. Implementation is defined by the class or type that implements the interface.</p>\n\n<p>@interface : (Annotation type)</p>\n\n<p>Take the below example, which has a lot of comments:</p>\n\n<pre><code>public class Generation3List extends Generation2List {\n\n   // Author: John Doe\n   // Date: 3/17/2002\n   // Current revision: 6\n   // Last modified: 4/12/2004\n   // By: Jane Doe\n   // Reviewers: Alice, Bill, Cindy\n\n   // class code goes here\n\n}\n</code></pre>\n\n<p>Instead of this, you can declare an annotation type</p>\n\n<pre><code> @interface ClassPreamble {\n   String author();\n   String date();\n   int currentRevision() default 1;\n   String lastModified() default \"N/A\";\n   String lastModifiedBy() default \"N/A\";\n   // Note use of array\n   String[] reviewers();\n}\n</code></pre>\n\n<p>which can then annotate a class as follows: </p>\n\n<pre><code>@ClassPreamble (\n   author = \"John Doe\",\n   date = \"3/17/2002\",\n   currentRevision = 6,\n   lastModified = \"4/12/2004\",\n   lastModifiedBy = \"Jane Doe\",\n   // Note array notation\n   reviewers = {\"Alice\", \"Bob\", \"Cindy\"}\n)\npublic class Generation3List extends Generation2List {\n\n// class code goes here\n\n}\n</code></pre>\n\n<p>PS:\n<strong>Many annotations replace comments in code.</strong></p>\n\n<p>Reference: <a href=\"http://docs.oracle.com/javase/tutorial/java/annotations/declaring.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/tutorial/java/annotations/declaring.html</a></p>\n"},{"tags":[],"owner":{"account_id":5071035,"reputation":5785,"user_id":4069782,"accept_rate":75,"display_name":"Emmanuel Osimosu"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1504599863,"creation_date":1504597780,"answer_id":46049634,"question_id":918393,"body_markdown":"`interface:`  defines the contract for a class which implements it\r\n\r\n`@interface:` defines the contract for an annotation ","title":"What&#39;s the difference between interface and @interface in java?","body":"<p><code>interface:</code>  defines the contract for a class which implements it</p>\n\n<p><code>@interface:</code> defines the contract for an annotation </p>\n"},{"tags":[],"owner":{"account_id":12264944,"reputation":243,"user_id":8951719,"display_name":"Piyush Singh"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1550230024,"creation_date":1550230024,"answer_id":54708343,"question_id":918393,"body_markdown":"**interface**\r\nin the Java programming language is an abstract type that is used to specify a behavior that classes must implement. They are similar to protocols. Interfaces are declared using the interface keyword\r\n\r\n**@interface**\r\nis used to create your own (custom) Java annotations. Annotations are defined in their own file, just like a Java class or interface. Here is custom Java annotation example:\r\n\r\n    @interface MyAnnotation {\r\n    \r\n        String   value();\r\n    \r\n        String   name();\r\n        int      age();\r\n        String[] newNames();\r\n    \r\n    }\r\n\r\nThis example defines an annotation called MyAnnotation which has four elements. Notice the @interface keyword. This signals to the Java compiler that this is a Java annotation definition.\r\n\r\nNotice that each element is defined similarly to a method definition in an interface. It has a data type and a name. You can use all primitive data types as element data types. You can also use arrays as data type. You cannot use complex objects as data type.\r\n\r\nTo use the above annotation, you could use code like this:\r\n\r\n    @MyAnnotation(\r\n        value=&quot;123&quot;,\r\n        name=&quot;Jakob&quot;,\r\n        age=37,\r\n        newNames={&quot;Jenkov&quot;, &quot;Peterson&quot;}\r\n    )\r\n    public class MyClass {\r\n    \r\n    \r\n    }\r\n\r\nReference - http://tutorials.jenkov.com/java/annotations.html","title":"What&#39;s the difference between interface and @interface in java?","body":"<p><strong>interface</strong>\nin the Java programming language is an abstract type that is used to specify a behavior that classes must implement. They are similar to protocols. Interfaces are declared using the interface keyword</p>\n\n<p><strong>@interface</strong>\nis used to create your own (custom) Java annotations. Annotations are defined in their own file, just like a Java class or interface. Here is custom Java annotation example:</p>\n\n<pre><code>@interface MyAnnotation {\n\n    String   value();\n\n    String   name();\n    int      age();\n    String[] newNames();\n\n}\n</code></pre>\n\n<p>This example defines an annotation called MyAnnotation which has four elements. Notice the @interface keyword. This signals to the Java compiler that this is a Java annotation definition.</p>\n\n<p>Notice that each element is defined similarly to a method definition in an interface. It has a data type and a name. You can use all primitive data types as element data types. You can also use arrays as data type. You cannot use complex objects as data type.</p>\n\n<p>To use the above annotation, you could use code like this:</p>\n\n<pre><code>@MyAnnotation(\n    value=\"123\",\n    name=\"Jakob\",\n    age=37,\n    newNames={\"Jenkov\", \"Peterson\"}\n)\npublic class MyClass {\n\n\n}\n</code></pre>\n\n<p>Reference - <a href=\"http://tutorials.jenkov.com/java/annotations.html\" rel=\"noreferrer\">http://tutorials.jenkov.com/java/annotations.html</a></p>\n"},{"tags":[],"owner":{"account_id":10010550,"reputation":346,"user_id":9465588,"display_name":"DGoiko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661535033,"creation_date":1661533084,"answer_id":73504325,"question_id":918393,"body_markdown":"With @interface you&#39;re defining annotations, with interface you&#39;re defining interfaces.\r\n\r\nFrom Oracle docs: &quot;Annotations do not directly affect program semantics, but they do affect the way programs are treated by tools and libraries, which can in turn affect the semantics of the running program. Annotations can be read from source files, class files, or reflectively at run time.&quot;\r\n\r\nAnnotations usually have 2 major  uses: They help to define programming contracts (like @Nonnull annotation), which means they actually do nothing, but serve to programmers and IDES to detect potential error codes, and there are runtime annotations, which are usually used by frameworks for configuration (like the @Service annotation in spring): The core detects clases in yous scope with specific annotations and applies logic to them (any example you can think of, like defining Java Servlers, creating singletons, etc)\r\n\r\nGenerally speaking, a junior programmer doing some normal basic stuff, will rarely need to define Annotations, but the definitioon and using of interfaces is something basic any new developer should learn if their lenguaje allows it: Good practices USUALLY recommend the usage of interfaces in your code for maintainability.\r\n\r\nIn my personal experience, I&#39;ve been defining and using Java interfaces almost since the day I learned Java, but I didn&#39;t need to DEFINE an annotation (tagging things with existing annotations is another story) until my 5th-6th year working proffesionally with Java, and it was a very specific project, a code autro-generator, something like Lombok but much more specific for a client.\r\n\r\nI guess it depends on the nature of your work, but to day, I can&#39;t count how many interfaces I&#39;ve defined, but annotations could be counted with the fingers of both hands. I beet there are good chances that a Java developer can start and end their entire career without defining a single interface (unless you use swagger&#39;s annotation based documentation generation xD)","title":"What&#39;s the difference between interface and @interface in java?","body":"<p>With @interface you're defining annotations, with interface you're defining interfaces.</p>\n<p>From Oracle docs: &quot;Annotations do not directly affect program semantics, but they do affect the way programs are treated by tools and libraries, which can in turn affect the semantics of the running program. Annotations can be read from source files, class files, or reflectively at run time.&quot;</p>\n<p>Annotations usually have 2 major  uses: They help to define programming contracts (like @Nonnull annotation), which means they actually do nothing, but serve to programmers and IDES to detect potential error codes, and there are runtime annotations, which are usually used by frameworks for configuration (like the @Service annotation in spring): The core detects clases in yous scope with specific annotations and applies logic to them (any example you can think of, like defining Java Servlers, creating singletons, etc)</p>\n<p>Generally speaking, a junior programmer doing some normal basic stuff, will rarely need to define Annotations, but the definitioon and using of interfaces is something basic any new developer should learn if their lenguaje allows it: Good practices USUALLY recommend the usage of interfaces in your code for maintainability.</p>\n<p>In my personal experience, I've been defining and using Java interfaces almost since the day I learned Java, but I didn't need to DEFINE an annotation (tagging things with existing annotations is another story) until my 5th-6th year working proffesionally with Java, and it was a very specific project, a code autro-generator, something like Lombok but much more specific for a client.</p>\n<p>I guess it depends on the nature of your work, but to day, I can't count how many interfaces I've defined, but annotations could be counted with the fingers of both hands. I beet there are good chances that a Java developer can start and end their entire career without defining a single interface (unless you use swagger's annotation based documentation generation xD)</p>\n"}],"owner":{"account_id":3360,"reputation":11833,"user_id":4843,"accept_rate":86,"display_name":"Bittercoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150689,"favorite_count":0,"down_vote_count":0,"up_vote_count":421,"accepted_answer_id":918417,"answer_count":6,"score":421,"last_activity_date":1661535033,"creation_date":1243465411,"question_id":918393,"body_markdown":"I haven&#39;t touched Java since using JBuilder in the late 90&#39;s while at University, so I&#39;m a little out of touch - at any rate I&#39;ve been working on a small Java project this week, and using Intellij IDEA as my IDE, for a change of pace from my regular .Net development.\r\n\r\nI notice it has support for adding interfaces and @interfaces, what is an @interface, and how does it differ from a normal interface?\r\n\r\n    public interface Test {\r\n    }\r\n\r\n\r\nvs.\r\n\r\n    public @interface Test {\r\n    }\r\n\r\nI&#39;ve done a bit of searching, but couldn&#39;t find a great deal of useful info referring to @interface.\r\n","title":"What&#39;s the difference between interface and @interface in java?","body":"<p>I haven't touched Java since using JBuilder in the late 90's while at University, so I'm a little out of touch - at any rate I've been working on a small Java project this week, and using Intellij IDEA as my IDE, for a change of pace from my regular .Net development.</p>\n\n<p>I notice it has support for adding interfaces and @interfaces, what is an @interface, and how does it differ from a normal interface?</p>\n\n<pre><code>public interface Test {\n}\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>public @interface Test {\n}\n</code></pre>\n\n<p>I've done a bit of searching, but couldn't find a great deal of useful info referring to @interface.</p>\n"},{"tags":["java","object","constructor"],"owner":{"account_id":11369816,"reputation":233,"user_id":8335668,"accept_rate":100,"display_name":"SanQA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661534617,"creation_date":1661534617,"question_id":73504587,"body_markdown":"Let say I have the following POJO\r\n\r\n    public class Plan{\r\n    \tprivate Long id;\r\n    \tprivate String name;\r\n    \t//other fields,getters, builder..\r\n    }\r\n\r\nNow let say there is some Plan which already exist in db.\r\n\r\nNow I am trying to modify/update various fields of this particular Plan by using the restAPI(`api/v1/Plan/123`).\r\nNow we use Jackson here,so I will get the updated Plan object.I will be validating this updated Plan object and if all good will persist in the db.\r\nTill here there is no issue.\r\n\r\nBut we using an internal service to audit this,i.e what all details got modified in this particular Plan and done by whom at what time etc.\r\nFor ex:Plan name changed from (Plan1 to Plan2)\r\nInternal service will accept argument as (oldPlan,newPlan).\r\n\r\nNow how can I get the oldPlan from the newPlan object?[Since the file which I have now got the method as `public Plan update(Plan newPlan)`,inside this method only we will be calling an internal service method which requires oldPlan]\r\n\r\nConstraints: \r\n\r\n1.I should not fire the query getting the id from the newPlan,since that will be duplicate query coz it was already queried when creating newPlan object using jackson.\r\n\r\n2.I should not change the update method signature and in update method the plan object which we receive via argument is the object which got updated details in it.\r\n\r\nWhat I have in my mind is:\r\na)Having the Plan object itself in the POJO ,so that when I get newPlan.getPlan() will return the oldInstance?\r\n\r\nThe above approach can be done but I am not sure abt this.Whats the best approach to achieve this?","title":"How can I get the oldObject at any point of time?","body":"<p>Let say I have the following POJO</p>\n<pre><code>public class Plan{\n    private Long id;\n    private String name;\n    //other fields,getters, builder..\n}\n</code></pre>\n<p>Now let say there is some Plan which already exist in db.</p>\n<p>Now I am trying to modify/update various fields of this particular Plan by using the restAPI(<code>api/v1/Plan/123</code>).\nNow we use Jackson here,so I will get the updated Plan object.I will be validating this updated Plan object and if all good will persist in the db.\nTill here there is no issue.</p>\n<p>But we using an internal service to audit this,i.e what all details got modified in this particular Plan and done by whom at what time etc.\nFor ex:Plan name changed from (Plan1 to Plan2)\nInternal service will accept argument as (oldPlan,newPlan).</p>\n<p>Now how can I get the oldPlan from the newPlan object?[Since the file which I have now got the method as <code>public Plan update(Plan newPlan)</code>,inside this method only we will be calling an internal service method which requires oldPlan]</p>\n<p>Constraints:</p>\n<p>1.I should not fire the query getting the id from the newPlan,since that will be duplicate query coz it was already queried when creating newPlan object using jackson.</p>\n<p>2.I should not change the update method signature and in update method the plan object which we receive via argument is the object which got updated details in it.</p>\n<p>What I have in my mind is:\na)Having the Plan object itself in the POJO ,so that when I get newPlan.getPlan() will return the oldInstance?</p>\n<p>The above approach can be done but I am not sure abt this.Whats the best approach to achieve this?</p>\n"},{"tags":["java","intellij-idea","testng","appium"],"comments":[{"owner":{"account_id":1564273,"reputation":1454,"user_id":1453413,"display_name":"HoRn"},"score":0,"creation_date":1661240941,"post_id":73452743,"comment_id":129718085,"body_markdown":"Please embed images into the posts where possible, instead of providing links to images.","body":"Please embed images into the posts where possible, instead of providing links to images."},{"owner":{"account_id":24517308,"reputation":401,"user_id":18430882,"display_name":"quickfix"},"score":0,"creation_date":1661265337,"post_id":73452743,"comment_id":129727924,"body_markdown":"what were the code/xml changes since last time it worked? which version of IDEA do you run and were you making any updates of it?","body":"what were the code/xml changes since last time it worked? which version of IDEA do you run and were you making any updates of it?"},{"owner":{"account_id":23828537,"reputation":11,"user_id":17835193,"display_name":"Falfo Lopez"},"score":0,"creation_date":1661534627,"post_id":73452743,"comment_id":129803355,"body_markdown":"@HoRn Sure, will do, thanks for the advice","body":"@HoRn Sure, will do, thanks for the advice"},{"owner":{"account_id":23828537,"reputation":11,"user_id":17835193,"display_name":"Falfo Lopez"},"score":0,"creation_date":1661534841,"post_id":73452743,"comment_id":129803425,"body_markdown":"@quickfix TestNG was updated to 7.6.1 version in pom.xml and it stopped working, the idea version is Intellij and I assume there was a part of the previous version still in cache because the error appeared until the next work day, which made me to not suspect of it.","body":"@quickfix TestNG was updated to 7.6.1 version in pom.xml and it stopped working, the idea version is Intellij and I assume there was a part of the previous version still in cache because the error appeared until the next work day, which made me to not suspect of it."}],"answers":[{"tags":[],"owner":{"account_id":23828537,"reputation":11,"user_id":17835193,"display_name":"Falfo Lopez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661234151,"creation_date":1661234151,"answer_id":73453761,"question_id":73452743,"body_markdown":"Probably not a fix, but I managed to solve this behavior on TestNG version 6.9.10 where priority was bugged leading to run one class after the other one","title":"TestNG is only running first test on each class","body":"<p>Probably not a fix, but I managed to solve this behavior on TestNG version 6.9.10 where priority was bugged leading to run one class after the other one</p>\n"}],"owner":{"account_id":23828537,"reputation":11,"user_id":17835193,"display_name":"Falfo Lopez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73453761,"answer_count":1,"score":1,"last_activity_date":1661534546,"creation_date":1661224395,"question_id":73452743,"body_markdown":"I&#39;m currently working on Intellij with Appium (7.3.0), Java (1.8) and TestNG (6.14.3), it was working fine on Friday and now it is only running the first test on each class like [this][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI have two listeners before and after each method, I&#39;ve tried debugging and the OnTestSuccess of the first one and it completes normally, and the OnTestStart of the next one does not even start and jumps to the next class.\r\n\r\nThis only happens when I try to run an XML with more than 1 class, (it runs normally with XML files with one class)\r\n\r\nOther thing I have noticed is that when it was working normally, the console showed a list of the tests (that could not be found by regex) and now is not showing.\r\n\r\nI appreciate your help, thanks in advance.\r\n\r\nUpdate: Apparently the problem is that the tests now run in different order, they used to run in order\r\n- Class 1\r\n  - Test A (priority 1)\r\n  - Test B (priority 2)\r\n- Class 2\r\n  - Test C (priority 1)\r\n  - Test D (priority 2)\r\n\r\nBut now they run \r\n- Class 1\r\n  - Test A (priority 1)\r\n- Class 2\r\n  - Test C (priority 1)\r\n- Class 1\r\n  - Test B (priority 2)\r\n- Class 2\r\n  - Test D (priority 2)\r\n\r\nHow can I make it run like before? Thanks in advance\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TevwG.png\r\n  [2]: https://i.stack.imgur.com/LI874.png","title":"TestNG is only running first test on each class","body":"<p>I'm currently working on Intellij with Appium (7.3.0), Java (1.8) and TestNG (6.14.3), it was working fine on Friday and now it is only running the first test on each class like <a href=\"https://i.stack.imgur.com/TevwG.png\" rel=\"nofollow noreferrer\">this</a></p>\n<p><a href=\"https://i.stack.imgur.com/LI874.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LI874.png\" alt=\"enter image description here\" /></a></p>\n<p>I have two listeners before and after each method, I've tried debugging and the OnTestSuccess of the first one and it completes normally, and the OnTestStart of the next one does not even start and jumps to the next class.</p>\n<p>This only happens when I try to run an XML with more than 1 class, (it runs normally with XML files with one class)</p>\n<p>Other thing I have noticed is that when it was working normally, the console showed a list of the tests (that could not be found by regex) and now is not showing.</p>\n<p>I appreciate your help, thanks in advance.</p>\n<p>Update: Apparently the problem is that the tests now run in different order, they used to run in order</p>\n<ul>\n<li>Class 1\n<ul>\n<li>Test A (priority 1)</li>\n<li>Test B (priority 2)</li>\n</ul>\n</li>\n<li>Class 2\n<ul>\n<li>Test C (priority 1)</li>\n<li>Test D (priority 2)</li>\n</ul>\n</li>\n</ul>\n<p>But now they run</p>\n<ul>\n<li>Class 1\n<ul>\n<li>Test A (priority 1)</li>\n</ul>\n</li>\n<li>Class 2\n<ul>\n<li>Test C (priority 1)</li>\n</ul>\n</li>\n<li>Class 1\n<ul>\n<li>Test B (priority 2)</li>\n</ul>\n</li>\n<li>Class 2\n<ul>\n<li>Test D (priority 2)</li>\n</ul>\n</li>\n</ul>\n<p>How can I make it run like before? Thanks in advance</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":6932189,"reputation":215,"user_id":5321341,"display_name":"Fabrice Gabolde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661525549,"creation_date":1661525549,"answer_id":73502890,"question_id":73502734,"body_markdown":"If you&#39;re heavily using Optional, you can try nesting `Optional#orElse`.\r\n\r\nAssuming you have several methods `try{something}ToComputeValue` that all return `Optional&lt;Integer&gt;`:\r\n\r\n    Optional&lt;Integer&gt; value = tryFooToComputeValue()\r\n      .orElse(tryBarToComputeValue()\r\n        .orElse(tryBazToComputeValue()\r\n          .orElseThrow(() -&gt; throw new CannotComputeValue())));\r\n\r\nThat takes care of daisy chaining those. For logging, you could have each method log when it returns `Optional.empty()` (has failed to find the value). This doesn&#39;t fully match your desired behavior of logging only one statement with all methods. If you really need this, you can probably play with `Optional#map` or similar so that you add method names to `needles` when they fail to return a value.","title":"Avoid isPresent / get dance in Java","body":"<p>If you're heavily using Optional, you can try nesting <code>Optional#orElse</code>.</p>\n<p>Assuming you have several methods <code>try{something}ToComputeValue</code> that all return <code>Optional&lt;Integer&gt;</code>:</p>\n<pre><code>Optional&lt;Integer&gt; value = tryFooToComputeValue()\n  .orElse(tryBarToComputeValue()\n    .orElse(tryBazToComputeValue()\n      .orElseThrow(() -&gt; throw new CannotComputeValue())));\n</code></pre>\n<p>That takes care of daisy chaining those. For logging, you could have each method log when it returns <code>Optional.empty()</code> (has failed to find the value). This doesn't fully match your desired behavior of logging only one statement with all methods. If you really need this, you can probably play with <code>Optional#map</code> or similar so that you add method names to <code>needles</code> when they fail to return a value.</p>\n"},{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661533839,"creation_date":1661533839,"answer_id":73504453,"question_id":73502734,"body_markdown":"You can simplify this by moving some of the logic into support methods.  You don&#39;t care about the `barOpt` and `quxOpt` references here - all you care about is if they can get your that sweet, sweet `fooOpt` goodness.  I think this is a candidate for OptionalInt rather than Optional&lt;Integer&gt;.  Without the error log message construction you have something like:\r\n\r\n    OptionalInt fooOpt = getFooOptByBarOpt();\r\n    if (fooOpt.isPresent()) {\r\n      return fooOpt;\r\n    }\r\n    fooOpt = getFooOptByQuxOpt();\r\n    if (fooOpt.isPresent()) {\r\n      return fooOpt;\r\n    }\r\n    return OptionalInt.empty();\r\n\r\nLooking at the error logging there doesn&#39;t seem to be a reason to compile a List of failed attempts.  You only log if you didn&#39;t find a value and if you didn&#39;t find a value you know exactly what you attempted.\r\n\r\n    if (!fooOpt.isPresent()) {\r\n      logger.error(&quot;Foo not found by bar or qux&quot;);\r\n    }\r\n    return fooOpt;\r\n\r\n","title":"Avoid isPresent / get dance in Java","body":"<p>You can simplify this by moving some of the logic into support methods.  You don't care about the <code>barOpt</code> and <code>quxOpt</code> references here - all you care about is if they can get your that sweet, sweet <code>fooOpt</code> goodness.  I think this is a candidate for OptionalInt rather than Optional.  Without the error log message construction you have something like:</p>\n<pre><code>OptionalInt fooOpt = getFooOptByBarOpt();\nif (fooOpt.isPresent()) {\n  return fooOpt;\n}\nfooOpt = getFooOptByQuxOpt();\nif (fooOpt.isPresent()) {\n  return fooOpt;\n}\nreturn OptionalInt.empty();\n</code></pre>\n<p>Looking at the error logging there doesn't seem to be a reason to compile a List of failed attempts.  You only log if you didn't find a value and if you didn't find a value you know exactly what you attempted.</p>\n<pre><code>if (!fooOpt.isPresent()) {\n  logger.error(&quot;Foo not found by bar or qux&quot;);\n}\nreturn fooOpt;\n</code></pre>\n"}],"owner":{"account_id":4723763,"reputation":3950,"user_id":3821009,"accept_rate":50,"display_name":"levant pied"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1661533839,"creation_date":1661524751,"question_id":73502734,"body_markdown":"Say I have a piece of code that will try a few ways to find some value and, if unsuccessful, log all the ways that it tried.\r\n\r\nExample:\r\n\r\n```\r\npublic Optional&lt;Integer&gt; getFooOpt() {\r\n  Optional&lt;Integer&gt; fooOpt = Optional.empty();\r\n  List&lt;String&gt; needles = new ArrayList&lt;&gt;();\r\n\r\n  Optional&lt;Integer&gt; barOpt = getBarOpt();\r\n\r\n  if(barOpt.isPresent()) {\r\n    Integer bar = barOpt.get();\r\n    fooOpt = getFooOptByBar(bar);\r\n    \r\n    if(!fooOpt.isPresent()) {\r\n      needles.add(&quot;bar &quot; + bar);\r\n    }\r\n  }\r\n\r\n  if(!fooOpt.isPresent()) {\r\n    Optional&lt;Integer&gt; quxOpt = getQuxOpt();\r\n\r\n    if(quxOpt.isPresent()) {\r\n      Integer qux = quxOpt.get();\r\n      fooOpt = getFooOptByQux(qux);\r\n      \r\n      if(!fooOpt.isPresent()) {\r\n        needles.add(&quot;qux &quot; + qux);\r\n      }\r\n    }\r\n  }\r\n\r\n  if(!fooOpt.isPresent()) {\r\n    log.error(&quot;Not found by {}&quot;, needles);\r\n  }\r\n\r\n  return fooOpt;\r\n}  \r\n```\r\n\r\nIs there a way to restructure this code to avoid all the isPresent / get noise with Optionals here to make the code easier to read / follow?","title":"Avoid isPresent / get dance in Java","body":"<p>Say I have a piece of code that will try a few ways to find some value and, if unsuccessful, log all the ways that it tried.</p>\n<p>Example:</p>\n<pre><code>public Optional&lt;Integer&gt; getFooOpt() {\n  Optional&lt;Integer&gt; fooOpt = Optional.empty();\n  List&lt;String&gt; needles = new ArrayList&lt;&gt;();\n\n  Optional&lt;Integer&gt; barOpt = getBarOpt();\n\n  if(barOpt.isPresent()) {\n    Integer bar = barOpt.get();\n    fooOpt = getFooOptByBar(bar);\n    \n    if(!fooOpt.isPresent()) {\n      needles.add(&quot;bar &quot; + bar);\n    }\n  }\n\n  if(!fooOpt.isPresent()) {\n    Optional&lt;Integer&gt; quxOpt = getQuxOpt();\n\n    if(quxOpt.isPresent()) {\n      Integer qux = quxOpt.get();\n      fooOpt = getFooOptByQux(qux);\n      \n      if(!fooOpt.isPresent()) {\n        needles.add(&quot;qux &quot; + qux);\n      }\n    }\n  }\n\n  if(!fooOpt.isPresent()) {\n    log.error(&quot;Not found by {}&quot;, needles);\n  }\n\n  return fooOpt;\n}  \n</code></pre>\n<p>Is there a way to restructure this code to avoid all the isPresent / get noise with Optionals here to make the code easier to read / follow?</p>\n"},{"tags":["java","fitnesse-slim"],"owner":{"account_id":9310529,"reputation":11,"user_id":6912537,"display_name":"itis Bekele"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":259,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661533828,"creation_date":1475433414,"question_id":39820325,"body_markdown":"I am new to fitnesse test\r\nI have the following header in fitnesse test page\r\n\r\n    !define TEST_SYSTEM {slim}\r\n    !path C:\\install\\fitness\\\r\n    \r\n    \r\n    !|import|\r\n    |fitness|\r\n    \r\n    !|Test|\r\n    |first|second|sum?|\r\n    |8|5|3|\r\n\r\nclass file found in the path mentioned above; each time I try to run the test I kept getting:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    _EXCEPTION__:java.lang.NoClassDefFoundError: Test (wrong name: fitness/Test)\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.8.0_51]\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:760) [rt.jar:1.8.0_51]\r\n\r\nDo you have any suggestion ?\r\n","title":"FitnessTest: _EXCEPTION__:java.lang.NoClassDefFoundError: Test (wrong name:","body":"<p>I am new to fitnesse test\nI have the following header in fitnesse test page</p>\n\n<pre><code>!define TEST_SYSTEM {slim}\n!path C:\\install\\fitness\\\n\n\n!|import|\n|fitness|\n\n!|Test|\n|first|second|sum?|\n|8|5|3|\n</code></pre>\n\n<p>class file found in the path mentioned above; each time I try to run the test I kept getting:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>_EXCEPTION__:java.lang.NoClassDefFoundError: Test (wrong name: fitness/Test)\n    at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.8.0_51]\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:760) [rt.jar:1.8.0_51]\n</code></pre>\n\n<p>Do you have any suggestion ?</p>\n"},{"tags":["java","multithreading","amazon-s3","thread-safety","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1661532206,"creation_date":1661532206,"answer_id":73504184,"question_id":70687454,"body_markdown":"Lets go one by one:\r\n\r\n1. The builders in the java AWS S3 sdk are *generally* [not thread safe][1]. So\r\ntry not to use `S3Client#getS3Client()` in multi-threaded environment.\r\n2. [AmazonS3Client][2] is annotated with [@ThreadSafe][3]. This is an annotation in Java AWS sdk, that marks the class as thread-safe. So there is no need to create some sort of object factory like you did, you only can have one `AmazonS3Client` singleton object per application. In the examples above you clearly create new instance per each and every `RequestHandler#readObject()` method invocation. It is not only unsafe, it will likely cause a performance issue, since you will create a lot of `AmazonS3Client`, which will degrade your java app garbage collection process. \r\n\r\nYou can solve pretty much all of it if you will just use a singleton pattern, i.e create `AmazonS3Client` as a singleton object, either by spring, or by any other IoC framework, or by yourself, for example via [double check locking][4]. In this way you will achieve thread safety along with relatively good performance (in comparison to code in the question).\r\n\r\nHope it helped, have a nice day!)\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/en_us/AWSJavaSDK/latest/javadoc/com/amazonaws/client/builder/AwsClientBuilder.html\r\n  [2]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html\r\n  [3]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/annotation/ThreadSafe.html\r\n  [4]: https://en.wikipedia.org/wiki/Double-checked_locking","title":"How I can implement AWS S3 client in a thread safe manner?","body":"<p>Lets go one by one:</p>\n<ol>\n<li>The builders in the java AWS S3 sdk are <em>generally</em> <a href=\"https://docs.aws.amazon.com/en_us/AWSJavaSDK/latest/javadoc/com/amazonaws/client/builder/AwsClientBuilder.html\" rel=\"noreferrer\">not thread safe</a>. So\ntry not to use <code>S3Client#getS3Client()</code> in multi-threaded environment.</li>\n<li><a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html\" rel=\"noreferrer\">AmazonS3Client</a> is annotated with <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/annotation/ThreadSafe.html\" rel=\"noreferrer\">@ThreadSafe</a>. This is an annotation in Java AWS sdk, that marks the class as thread-safe. So there is no need to create some sort of object factory like you did, you only can have one <code>AmazonS3Client</code> singleton object per application. In the examples above you clearly create new instance per each and every <code>RequestHandler#readObject()</code> method invocation. It is not only unsafe, it will likely cause a performance issue, since you will create a lot of <code>AmazonS3Client</code>, which will degrade your java app garbage collection process.</li>\n</ol>\n<p>You can solve pretty much all of it if you will just use a singleton pattern, i.e create <code>AmazonS3Client</code> as a singleton object, either by spring, or by any other IoC framework, or by yourself, for example via <a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"noreferrer\">double check locking</a>. In this way you will achieve thread safety along with relatively good performance (in comparison to code in the question).</p>\n<p>Hope it helped, have a nice day!)</p>\n"}],"owner":{"account_id":2808296,"reputation":89,"user_id":2415077,"display_name":"Shamran Siddique"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4040,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73504184,"answer_count":1,"score":2,"last_activity_date":1661532206,"creation_date":1642016314,"question_id":70687454,"body_markdown":"Hi I  have a method that is executed by multiple threads concurrently to connect to the s3 bucket objects and read metadata. All those methods are using a single s3 client object. Based on the Amazon Java SDK documentation I found that the s3Clients are thread safe objects. Can the following way of implementation cause any deadlock or performance issue? Is this the correct way of implementation when using multiple thread with s3 client?\r\n\r\n    public class S3Client {\r\n        // static method that returns the s3 client for all the requests\r\n        public static AmazonS3 getS3Client(){\r\n            return AmazonS3ClientBuilder.standard().withRegion(Regions.DEFAULT_REGION).build();\r\n        }\r\n    }\r\n\r\nAnd there is another class(RequestHandler-&gt;readObject method) that will be executed by multiple threads concurrently. Hence  will be executed for each and every requests.\r\n\r\n    public class RequestHandler {\r\n        // Multiple concurrent threads are accessing this method\r\n        public void readObject(){\r\n            AmazonS3 s3Client = S3Client.getS3Client();\r\n            ListObjectsV2Result result = s3Client.listObjectsV2(&quot;bucket_name&quot;);\r\n        }\r\n    }\r\n\r\n\r\nPlease advice. Thanks in advance!!","title":"How I can implement AWS S3 client in a thread safe manner?","body":"<p>Hi I  have a method that is executed by multiple threads concurrently to connect to the s3 bucket objects and read metadata. All those methods are using a single s3 client object. Based on the Amazon Java SDK documentation I found that the s3Clients are thread safe objects. Can the following way of implementation cause any deadlock or performance issue? Is this the correct way of implementation when using multiple thread with s3 client?</p>\n<pre><code>public class S3Client {\n    // static method that returns the s3 client for all the requests\n    public static AmazonS3 getS3Client(){\n        return AmazonS3ClientBuilder.standard().withRegion(Regions.DEFAULT_REGION).build();\n    }\n}\n</code></pre>\n<p>And there is another class(RequestHandler-&gt;readObject method) that will be executed by multiple threads concurrently. Hence  will be executed for each and every requests.</p>\n<pre><code>public class RequestHandler {\n    // Multiple concurrent threads are accessing this method\n    public void readObject(){\n        AmazonS3 s3Client = S3Client.getS3Client();\n        ListObjectsV2Result result = s3Client.listObjectsV2(&quot;bucket_name&quot;);\n    }\n}\n</code></pre>\n<p>Please advice. Thanks in advance!!</p>\n"},{"tags":["java","spring-webclient"],"owner":{"account_id":48449,"reputation":1247,"user_id":143942,"accept_rate":100,"display_name":"Keibosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":975,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1661532003,"creation_date":1661532003,"question_id":73504150,"body_markdown":"From my spring boot app I am making multiple calls to an API search service using the Spring Web Client. This is required due to pagination and multiple search params that cannot be used together. \r\n\r\nWhen making calls with certain params I am getting HTTP 204 No Content, which is completely normal and expected. However this is causing an issue with decoding the body to my Response object\r\n\r\nI am attempting to handle the 204 status in a filter but what I am doing seems a bit wonky and wondering how this should be handled. I am new to the reactive style but want to avoid using the deprecated RestTemplate style. \r\n\r\n```searchResponse = WebClient\r\n\t\t\t\t\t.builder()\r\n\t\t\t\t\t.filter(WebClientFilter.handleError())\r\n\t\t\t\t\t.filter(responseFilter)\r\n\t\t\t\t\t.clientConnector(new ReactorClientHttpConnector(HttpClient.create().followRedirect(true)))\r\n\t\t\t\t\t... default header stuff ommitted ...\r\n\t\t\t\t\t.build().post().uri(searchServiceUrl)\r\n\t\t\t\t\t.body(BodyInserters.fromValue(createsearchRequest()))\r\n\t\t\t\t\t.retrieve()\r\n\t\t\t\t\t.bodyToMono(SearchResponse.class)\r\n\t\t\t\t\t.block();\r\n```\r\n\r\nHere is where I am filtering for the 204 and returning a newly constructed Response with my empty Dto. This just seems wrong that I am replacing the response from the server with my own, but if I do not do this the WebClient returns null causing other issues. \r\n\r\n```\r\nprivate static Mono&lt;ClientResponse&gt; exchangeFilterResponseProcessor(ClientResponse response) {\r\n\t\tHttpStatus status = response.statusCode();\r\n\t\tif (HttpStatus.NO_CONTENT.equals(status)) {\r\n\t\t\treturn response.bodyToMono(String.class).flatMap(body -&gt;  {\r\n\t\t\t\t\tlog.info(&quot;Body is {}&quot; , body);\r\n\t\t\t\tClientResponse emptyResponse = ClientResponse.create(HttpStatus.OK)\r\n\t\t\t\t\t\t.header(CONTENT_TYPE, &quot;application/json&quot;)\r\n\t\t\t\t\t\t.body(new SearchResponse().toString())\r\n\t\t\t\t\t\t.build();\r\n\t\t\treturn Mono.just(emptyResponse);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn Mono.just(response);\r\n\t}\r\n```\r\n\r\nShould I refactor the code to just allow the null response and deal with it that way vs trying to do it in the code above? ","title":"How to handle HTTP 204 No Content Response in Spring","body":"<p>From my spring boot app I am making multiple calls to an API search service using the Spring Web Client. This is required due to pagination and multiple search params that cannot be used together.</p>\n<p>When making calls with certain params I am getting HTTP 204 No Content, which is completely normal and expected. However this is causing an issue with decoding the body to my Response object</p>\n<p>I am attempting to handle the 204 status in a filter but what I am doing seems a bit wonky and wondering how this should be handled. I am new to the reactive style but want to avoid using the deprecated RestTemplate style.</p>\n<pre><code>                    .builder()\n                    .filter(WebClientFilter.handleError())\n                    .filter(responseFilter)\n                    .clientConnector(new ReactorClientHttpConnector(HttpClient.create().followRedirect(true)))\n                    ... default header stuff ommitted ...\n                    .build().post().uri(searchServiceUrl)\n                    .body(BodyInserters.fromValue(createsearchRequest()))\n                    .retrieve()\n                    .bodyToMono(SearchResponse.class)\n                    .block();\n</code></pre>\n<p>Here is where I am filtering for the 204 and returning a newly constructed Response with my empty Dto. This just seems wrong that I am replacing the response from the server with my own, but if I do not do this the WebClient returns null causing other issues.</p>\n<pre><code>private static Mono&lt;ClientResponse&gt; exchangeFilterResponseProcessor(ClientResponse response) {\n        HttpStatus status = response.statusCode();\n        if (HttpStatus.NO_CONTENT.equals(status)) {\n            return response.bodyToMono(String.class).flatMap(body -&gt;  {\n                    log.info(&quot;Body is {}&quot; , body);\n                ClientResponse emptyResponse = ClientResponse.create(HttpStatus.OK)\n                        .header(CONTENT_TYPE, &quot;application/json&quot;)\n                        .body(new SearchResponse().toString())\n                        .build();\n            return Mono.just(emptyResponse);\n            });\n        }\n        return Mono.just(response);\n    }\n</code></pre>\n<p>Should I refactor the code to just allow the null response and deal with it that way vs trying to do it in the code above?</p>\n"},{"tags":["java","r","sql-server","jdbc","rjdbc"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1661557483,"post_id":73504113,"comment_id":129808433,"body_markdown":"Have you tried adding `TrustServerCertificate=false;` to your connection properties? JDBC 10.2 introduced a breaking change, making `Encrypt=true;` a default parameter (previously it was `Encrypt=false;`), causing encrypted connections to SQL Server instances. This is problematic because Microsoft SQL Server installs with self-signed (read: untrusted) certificates by default, thus causing the error message that you are seeing. Ref: [JDBC Driver 10.2 for SQL Server Released](https://techcommunity.microsoft.com/t5/sql-server-blog/jdbc-driver-10-2-for-sql-server-released/ba-p/3100754).","body":"Have you tried adding <code>TrustServerCertificate=false;</code> to your connection properties? JDBC 10.2 introduced a breaking change, making <code>Encrypt=true;</code> a default parameter (previously it was <code>Encrypt=false;</code>), causing encrypted connections to SQL Server instances. This is problematic because Microsoft SQL Server installs with self-signed (read: untrusted) certificates by default, thus causing the error message that you are seeing. Ref: <a href=\"https://techcommunity.microsoft.com/t5/sql-server-blog/jdbc-driver-10-2-for-sql-server-released/ba-p/3100754\" rel=\"nofollow noreferrer\">JDBC Driver 10.2 for SQL Server Released</a>."},{"owner":{"account_id":20264817,"reputation":56067,"user_id":14868997,"display_name":"Charlieface"},"score":0,"creation_date":1661646651,"post_id":73504113,"comment_id":129821369,"body_markdown":"Use the DNS name rather than the IP address. Do you actually have SQL Server set up with a valid SSL certificate?","body":"Use the DNS name rather than the IP address. Do you actually have SQL Server set up with a valid SSL certificate?"},{"owner":{"account_id":16852385,"reputation":315,"user_id":12185028,"display_name":"Alejo"},"score":0,"creation_date":1661793724,"post_id":73504113,"comment_id":129851014,"body_markdown":"AlwaysLearning: do you mean: `dbConnect(drv, &quot;jdbc:sqlserver://192.168.7.303; TrustServerCertificate=false;&quot;, &quot;my_user&quot;, &quot;my_password&quot;)` ?","body":"AlwaysLearning: do you mean: <code>dbConnect(drv, &quot;jdbc:sqlserver:&#47;&#47;192.168.7.303; TrustServerCertificate=false;&quot;, &quot;my_user&quot;, &quot;my_password&quot;)</code> ?"}],"owner":{"account_id":16852385,"reputation":315,"user_id":12185028,"display_name":"Alejo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661531853,"creation_date":1661531813,"question_id":73504113,"body_markdown":"I have been using RODBC to do all sort of sql queries, but I ended up having to deal with a query that happens to take a painfully amount of time compared to when I run the query in SQL Server. \r\n\r\nI found in this [post][1] that `RJDBC` has a better performace, so I decided to try it out. \r\n\r\nI ended up intalling Java (both jre and jdk), setted up the Paths and the Drivers of JDBC.\r\n\r\n\r\nI have no problem getting the driver I guess, since I got no error. \r\n```\r\ndrv &lt;- JDBC(classPath = &quot;C:\\\\Program Files\\\\Microsoft JDBC DRIVER 11.2 for SQL Server\\\\sqljdbc_11.2\\\\enu\\\\mssql-jdbc-11.2.0.jre8.jar&quot;)\r\n```\r\nBut when I try to create the connection I get the following error\r\n```\r\nconn &lt;- dbConnect(drv, &quot;jdbc:sqlserver://192.168.7.303&quot;, &quot;my_user&quot;, &quot;my_password&quot;)\r\n\r\n```\r\n\r\n\r\n&gt; Error in dbConnect(drv, &quot;jdbc:sqlserver://192.168.7.303&quot;, &quot;my_user&quot;,  : \r\n  Unable to connect JDBC to jdbc:sqlserver://192.168.7.303\r\n  JDBC ERROR: The driver couldn&#39;t establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;. ClientConnectionId:8902e2fd-d90e-47c8-8aed-7ea373c9245d\r\n\r\n\r\nIs there a solution to this problem?\r\n\r\n  [1]: https://stackoverflow.com/questions/30943748/r-painfully-slow-read-performance-using-rodbc-sql-server","title":"RJDBC Error when trying to create a connection to SQL Server","body":"<p>I have been using RODBC to do all sort of sql queries, but I ended up having to deal with a query that happens to take a painfully amount of time compared to when I run the query in SQL Server.</p>\n<p>I found in this <a href=\"https://stackoverflow.com/questions/30943748/r-painfully-slow-read-performance-using-rodbc-sql-server\">post</a> that <code>RJDBC</code> has a better performace, so I decided to try it out.</p>\n<p>I ended up intalling Java (both jre and jdk), setted up the Paths and the Drivers of JDBC.</p>\n<p>I have no problem getting the driver I guess, since I got no error.</p>\n<pre><code>drv &lt;- JDBC(classPath = &quot;C:\\\\Program Files\\\\Microsoft JDBC DRIVER 11.2 for SQL Server\\\\sqljdbc_11.2\\\\enu\\\\mssql-jdbc-11.2.0.jre8.jar&quot;)\n</code></pre>\n<p>But when I try to create the connection I get the following error</p>\n<pre><code>conn &lt;- dbConnect(drv, &quot;jdbc:sqlserver://192.168.7.303&quot;, &quot;my_user&quot;, &quot;my_password&quot;)\n\n</code></pre>\n<blockquote>\n<p>Error in dbConnect(drv, &quot;jdbc:sqlserver://192.168.7.303&quot;, &quot;my_user&quot;,  :\nUnable to connect JDBC to jdbc:sqlserver://192.168.7.303\nJDBC ERROR: The driver couldn't establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target&quot;. ClientConnectionId:8902e2fd-d90e-47c8-8aed-7ea373c9245d</p>\n</blockquote>\n<p>Is there a solution to this problem?</p>\n"},{"tags":["java","javascript","android","settimeout"],"answers":[{"tags":[],"owner":{"account_id":138557,"reputation":42623,"user_id":343568,"accept_rate":100,"display_name":"nicholas.hauschild"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1296141194,"creation_date":1296141194,"answer_id":4818105,"question_id":4817933,"body_markdown":"I do not know much about JavaScript, but I think Timers may be what you are looking for.\r\n\r\nhttp://developer.android.com/reference/java/util/Timer.html\r\n\r\nFrom the link:\r\n\r\nOne-shot are scheduled to run at an absolute time or after a relative delay.  Recurring tasks are scheduled with either a fixed period or a fixed rate.","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>I do not know much about JavaScript, but I think Timers may be what you are looking for.</p>\n\n<p><a href=\"http://developer.android.com/reference/java/util/Timer.html\" rel=\"noreferrer\">http://developer.android.com/reference/java/util/Timer.html</a></p>\n\n<p>From the link:</p>\n\n<p>One-shot are scheduled to run at an absolute time or after a relative delay.  Recurring tasks are scheduled with either a fixed period or a fixed rate.</p>\n"},{"tags":[],"owner":{"account_id":290747,"reputation":175,"user_id":592463,"display_name":"apanloco"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1296146927,"creation_date":1296146927,"answer_id":4819256,"question_id":4817933,"body_markdown":"Depending on what you actually want to achieve, you should take a look at Android Handlers:\r\n\r\nhttp://developer.android.com/reference/android/os/Handler.html\r\n\r\nIf you previously used javascript setTimeout() etc to schedule a task to run in the future, this is the Android way of doing it (postDelayed / sendMessageDelayed).\r\n\r\nNote that neither Handlers or Timers makes an Android phone wake up from sleep mode. In other words, if you want to schedule something to actually happen even though the screen is off / cpu is sleeping, you need to check out the AlarmManager too.\r\n\r\n\r\n","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>Depending on what you actually want to achieve, you should take a look at Android Handlers:</p>\n\n<p><a href=\"http://developer.android.com/reference/android/os/Handler.html\">http://developer.android.com/reference/android/os/Handler.html</a></p>\n\n<p>If you previously used javascript setTimeout() etc to schedule a task to run in the future, this is the Android way of doing it (postDelayed / sendMessageDelayed).</p>\n\n<p>Note that neither Handlers or Timers makes an Android phone wake up from sleep mode. In other words, if you want to schedule something to actually happen even though the screen is off / cpu is sleeping, you need to check out the AlarmManager too.</p>\n"},{"tags":[],"owner":{"account_id":36105,"reputation":1423,"user_id":102798,"display_name":"Stephane JAIS"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1337000556,"creation_date":1337000556,"answer_id":10583877,"question_id":4817933,"body_markdown":"Here&#39;s a setTimeout equivalent, mostly useful when trying to update the User Interface\r\nafter a delay.\r\n\r\nAs you may know, updating the user interface can only by done from the UI thread.\r\nAsyncTask does that for you by calling its onPostExecute method from that thread.\r\n\r\n    new AsyncTask&lt;Void, Void, Void&gt;() {\r\n\t\t\t@Override\r\n\t\t\tprotected Void doInBackground(Void... params) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(5000);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tprotected void onPostExecute(Void result) {\r\n\t\t\t\t// Update the User Interface\r\n\t\t\t}\r\n\r\n\t\t}.execute();","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>Here's a setTimeout equivalent, mostly useful when trying to update the User Interface\nafter a delay.</p>\n\n<p>As you may know, updating the user interface can only by done from the UI thread.\nAsyncTask does that for you by calling its onPostExecute method from that thread.</p>\n\n<pre><code>new AsyncTask&lt;Void, Void, Void&gt;() {\n        @Override\n        protected Void doInBackground(Void... params) {\n            try {\n                Thread.sleep(5000);\n            } catch (InterruptedException e) {\n            }\n\n            return null;\n        }\n\n        @Override\n        protected void onPostExecute(Void result) {\n            // Update the User Interface\n        }\n\n    }.execute();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":269969,"reputation":11509,"user_id":559634,"accept_rate":100,"display_name":"SharkAlley"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1574282094,"creation_date":1370598193,"answer_id":16980983,"question_id":4817933,"body_markdown":"If you&#39;re not worried about waking your phone up or bringing your app back from the dead, try:\r\n\r\n    // Param is optional, to run task on UI thread.     \r\n    Handler handler = new Handler(Looper.getMainLooper());\r\n    Runnable runnable = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            // Do the task...\r\n            handler.postDelayed(this, milliseconds) // Optional, to repeat the task.\r\n        }\r\n    };\r\n    handler.postDelayed(runnable, milliseconds);\r\n\r\n    // Stop a repeating task like this.\r\n    handler.removeCallbacks(runnable);","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>If you're not worried about waking your phone up or bringing your app back from the dead, try:</p>\n\n<pre><code>// Param is optional, to run task on UI thread.     \nHandler handler = new Handler(Looper.getMainLooper());\nRunnable runnable = new Runnable() {\n    @Override\n    public void run() {\n        // Do the task...\n        handler.postDelayed(this, milliseconds) // Optional, to repeat the task.\n    }\n};\nhandler.postDelayed(runnable, milliseconds);\n\n// Stop a repeating task like this.\nhandler.removeCallbacks(runnable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":80745,"reputation":81344,"user_id":228109,"accept_rate":100,"display_name":"Ben Clayton"},"down_vote_count":0,"up_vote_count":284,"is_accepted":true,"score":284,"last_activity_date":1614217584,"creation_date":1377176811,"answer_id":18381353,"question_id":4817933,"body_markdown":"As always with Android there&#39;s lots of ways to do this, but assuming you simply want to run a piece of code a little bit later on the same thread, I use this:\r\n\r\n    new android.os.Handler(Looper.getMainLooper()).postDelayed(\r\n        new Runnable() {\r\n            public void run() {\r\n                Log.i(&quot;tag&quot;, &quot;This&#39;ll run 300 milliseconds later&quot;);\r\n            }\r\n        }, \r\n    300);\r\n\r\n.. this is pretty much equivalent to \r\n   \r\n    setTimeout( \r\n        function() {\r\n            console.log(&quot;This will run 300 milliseconds later&quot;);\r\n        },\r\n    300);","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>As always with Android there's lots of ways to do this, but assuming you simply want to run a piece of code a little bit later on the same thread, I use this:</p>\n<pre><code>new android.os.Handler(Looper.getMainLooper()).postDelayed(\n    new Runnable() {\n        public void run() {\n            Log.i(&quot;tag&quot;, &quot;This'll run 300 milliseconds later&quot;);\n        }\n    }, \n300);\n</code></pre>\n<p>.. this is pretty much equivalent to</p>\n<pre><code>setTimeout( \n    function() {\n        console.log(&quot;This will run 300 milliseconds later&quot;);\n    },\n300);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3915659,"reputation":3890,"user_id":3239522,"display_name":"Midhun"},"down_vote_count":0,"up_vote_count":137,"is_accepted":false,"score":137,"last_activity_date":1422457900,"creation_date":1422457900,"answer_id":28195667,"question_id":4817933,"body_markdown":"**setInterval()**\r\n\r\nfunction that repeats itself in every n milliseconds\r\n\r\n**Javascript** \r\n\r\n     setInterval(function(){ Console.log(&quot;A Kiss every 5 seconds&quot;); }, 5000);\r\n\r\nApproximate **java** Equivalent\r\n\r\n    new Timer().scheduleAtFixedRate(new TimerTask(){\r\n        @Override\r\n        public void run(){\r\n           Log.i(&quot;tag&quot;, &quot;A Kiss every 5 seconds&quot;);\r\n        }\r\n    },0,5000);\r\n\r\n**setTimeout()**\r\n\r\nfunction that works only after n milliseconds\r\n\r\n**Javascript** \r\n\r\n    setTimeout(function(){ Console.log(&quot;A Kiss after 5 seconds&quot;); },5000);\r\n\r\nApproximate **java** Equivalent\r\n\r\n    new android.os.Handler().postDelayed(\r\n        new Runnable() {\r\n            public void run() {\r\n                Log.i(&quot;tag&quot;,&quot;A Kiss after 5 seconds&quot;);\r\n            }\r\n    }, 5000);\r\n\r\n","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p><strong>setInterval()</strong></p>\n\n<p>function that repeats itself in every n milliseconds</p>\n\n<p><strong>Javascript</strong> </p>\n\n<pre><code> setInterval(function(){ Console.log(\"A Kiss every 5 seconds\"); }, 5000);\n</code></pre>\n\n<p>Approximate <strong>java</strong> Equivalent</p>\n\n<pre><code>new Timer().scheduleAtFixedRate(new TimerTask(){\n    @Override\n    public void run(){\n       Log.i(\"tag\", \"A Kiss every 5 seconds\");\n    }\n},0,5000);\n</code></pre>\n\n<p><strong>setTimeout()</strong></p>\n\n<p>function that works only after n milliseconds</p>\n\n<p><strong>Javascript</strong> </p>\n\n<pre><code>setTimeout(function(){ Console.log(\"A Kiss after 5 seconds\"); },5000);\n</code></pre>\n\n<p>Approximate <strong>java</strong> Equivalent</p>\n\n<pre><code>new android.os.Handler().postDelayed(\n    new Runnable() {\n        public void run() {\n            Log.i(\"tag\",\"A Kiss after 5 seconds\");\n        }\n}, 5000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1048323,"reputation":465,"user_id":1052843,"accept_rate":25,"display_name":"neoRiley"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1473711072,"creation_date":1473711072,"answer_id":39458075,"question_id":4817933,"body_markdown":"The first answer is definitely the correct answer and is what I based this lambda version off of, which is much shorter in syntax.  Since Runnable has only 1 override method &quot;run()&quot;, we can use a lambda:\r\n\r\n    this.m_someBoolFlag = false;\r\n    new android.os.Handler().postDelayed(() -&gt; this.m_someBoolFlag = true, 300);","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>The first answer is definitely the correct answer and is what I based this lambda version off of, which is much shorter in syntax.  Since Runnable has only 1 override method \"run()\", we can use a lambda:</p>\n\n<pre><code>this.m_someBoolFlag = false;\nnew android.os.Handler().postDelayed(() -&gt; this.m_someBoolFlag = true, 300);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6067460,"reputation":1029,"user_id":4737293,"accept_rate":100,"display_name":"Jeeva"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1480628252,"creation_date":1480628252,"answer_id":40920855,"question_id":4817933,"body_markdown":"    import java.util.Timer;\r\n    import java.util.TimerTask;\r\n \r\n    class Clock {\r\n\t    private Timer mTimer = new Timer();\r\n\r\n        private int mSecondsPassed = 0;\r\n        private TimerTask mTask = new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                mSecondsPassed++;\r\n                System.out.println(&quot;Seconds passed: &quot; + mSecondsPassed);\r\n            }\r\n        };\r\n\r\n        private void start() {\r\n    \t    mTimer.scheduleAtFixedRate(mTask, 1000, 1000);\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n    \t    Clock c = new Clock();\r\n    \t    c.start();\r\n        }\r\n    }","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<pre><code>import java.util.Timer;\nimport java.util.TimerTask;\n\nclass Clock {\n    private Timer mTimer = new Timer();\n\n    private int mSecondsPassed = 0;\n    private TimerTask mTask = new TimerTask() {\n        @Override\n        public void run() {\n            mSecondsPassed++;\n            System.out.println(\"Seconds passed: \" + mSecondsPassed);\n        }\n    };\n\n    private void start() {\n        mTimer.scheduleAtFixedRate(mTask, 1000, 1000);\n    }\n\n    public static void main(String[] args) {\n        Clock c = new Clock();\n        c.start();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13108017,"reputation":4195,"user_id":9470099,"display_name":"Jeeva"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1520639844,"creation_date":1520639844,"answer_id":49203906,"question_id":4817933,"body_markdown":"I was creating a mp3 player for android, I wanted to update the current time every **500ms** so I did it like this\n\n## setInterval\n\n    private void update() {\n        new android.os.Handler().postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                long cur = player.getCurrentPosition();\n                long dur = player.getDuration();\n                currentTime = millisecondsToTime(cur);\n                currentTimeView.setText(currentTime);\n                if (cur &lt; dur) {\n                    updatePlayer();\n                }\n\n                // update seekbar\n                seekBar.setProgress( (int) Math.round((float)cur / (float)dur * 100f));\n            }\n        }, 500);\n    }\n\nwhich calls the  same method recursively","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>I was creating a mp3 player for android, I wanted to update the current time every <strong>500ms</strong> so I did it like this</p>\n<h2>setInterval</h2>\n<pre><code>private void update() {\n    new android.os.Handler().postDelayed(new Runnable() {\n        @Override\n        public void run() {\n            long cur = player.getCurrentPosition();\n            long dur = player.getDuration();\n            currentTime = millisecondsToTime(cur);\n            currentTimeView.setText(currentTime);\n            if (cur &lt; dur) {\n                updatePlayer();\n            }\n\n            // update seekbar\n            seekBar.setProgress( (int) Math.round((float)cur / (float)dur * 100f));\n        }\n    }, 500);\n}\n</code></pre>\n<p>which calls the  same method recursively</p>\n"},{"tags":[],"owner":{"account_id":6783309,"reputation":1295,"user_id":5222864,"accept_rate":80,"display_name":"Payam Roozbahani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596959761,"creation_date":1596958402,"answer_id":63323684,"question_id":4817933,"body_markdown":"Kotlin:\r\n\r\nYou can also use CountDownTimer:\r\n\r\n    class Timer {\r\n        companion object {\r\n            @JvmStatic\r\n            fun call(ms: Long, f: () -&gt; Unit) {\r\n                object : CountDownTimer(ms,ms){\r\n                    override fun onFinish() { f() }\r\n                    override fun onTick(millisUntilFinished: Long) {}\r\n                }.start()\r\n            }\r\n        }\r\n    }\r\n\r\nAnd in your code:\r\n\r\n    Timer.call(5000) { /*Whatever you want to execute after 5000 ms*/ }","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>Kotlin:</p>\n<p>You can also use CountDownTimer:</p>\n<pre><code>class Timer {\n    companion object {\n        @JvmStatic\n        fun call(ms: Long, f: () -&gt; Unit) {\n            object : CountDownTimer(ms,ms){\n                override fun onFinish() { f() }\n                override fun onTick(millisUntilFinished: Long) {}\n            }.start()\n        }\n    }\n}\n</code></pre>\n<p>And in your code:</p>\n<pre><code>Timer.call(5000) { /*Whatever you want to execute after 5000 ms*/ }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9564031,"reputation":12915,"user_id":7103882,"display_name":"Codemaker2015"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619501525,"creation_date":1619501525,"answer_id":67277451,"question_id":4817933,"body_markdown":"As always with Android there&#39;s lots of ways to do this, but assuming you simply want to run a piece of code on the same thread, I use this:\r\n\r\n    new Timer().scheduleAtFixedRate(new TimerTask(){\r\n        @Override\r\n        public void run(){\r\n           Log.i(&quot;tag&quot;, &quot;Hai Codemaker&quot;);\r\n        }\r\n    },0,1000);\r\n\r\nThis code will log Hai Codemaker text every one second.","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>As always with Android there's lots of ways to do this, but assuming you simply want to run a piece of code on the same thread, I use this:</p>\n<pre><code>new Timer().scheduleAtFixedRate(new TimerTask(){\n    @Override\n    public void run(){\n       Log.i(&quot;tag&quot;, &quot;Hai Codemaker&quot;);\n    }\n},0,1000);\n</code></pre>\n<p>This code will log Hai Codemaker text every one second.</p>\n"},{"tags":[],"owner":{"account_id":13217532,"reputation":576,"user_id":13485979,"display_name":"Faisal Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661531758,"creation_date":1661531758,"answer_id":73504100,"question_id":4817933,"body_markdown":"In case someone wants -\r\n\r\nKotlin equivalent to JavaScript setInterval/setTimeout\r\n======================================================\r\n\r\n**IMPORTANT**: Remember to import `android.os.Handler`. Don&#39;t get mistaken by `java.util.logging.Handler`\r\n\r\nTimeout equivalent\r\n------------\r\n**Javascript: setTimeout()**\r\n\r\n    setTimeout(function(){\r\n       // something that can be run.\r\n    }, 1500);\r\n\r\n**Kotlin: runOnTimeout()**\r\n\r\n    inline fun runOnTimeout(crossinline block: () -&gt; Unit, timeoutMillis: Long) {\r\n        Handler(Looper.getMainLooper()).postDelayed({\r\n            block()\r\n        }, timeoutMillis)\r\n    }\r\n\r\n**Kotlin: Calling**\r\n\r\n    runOnTimeout({\r\n       // something that can be run.\r\n    }, 1500)\r\n\r\nTimeinterval equivalent\r\n------------\r\n**Javascript: setInterval()**\r\n\r\n    setInterval(function(){\r\n       // something that can be run.\r\n    }, 1500);\r\n\r\n**Kotlin: runOnInterval()**\r\n\r\n    inline fun runOnInterval(crossinline block: () -&gt; Unit, interval: Long) {\r\n        val runnable = object : Runnable {\r\n            override fun run() {\r\n                block()\r\n                handler.postDelayed(this, interval)\r\n            }\r\n        }\r\n        handler.post(runnable)\r\n    }\r\n\r\n**Kotlin: Calling**\r\n\r\n    runOnInterval({\r\n       // something that can be run.\r\n    }, 1500)\r\n\r\n----------\r\n----------\r\n----------\r\n\r\nCancellable timeout and interval\r\n================================\r\n\r\nIf you want to use custom handler so that you can cancel the runnable, then you can use following codes.\r\n\r\nTimeout\r\n-------\r\n\r\n    inline fun runOnTimeout(crossinline block: () -&gt; Unit, timeoutMillis: Long) {\r\n        runOnTimeout(Handler(Looper.getMainLooper()), block, timeoutMillis)\r\n    }\r\n    \r\n    inline fun runOnTimeout(handler: Handler, crossinline block: () -&gt; Unit, timeoutMillis: Long): Runnable {\r\n        val runnable = Runnable { block() }\r\n        handler.postDelayed(runnable, timeoutMillis)\r\n        return runnable\r\n    }\r\n\r\n**Timeout: Calling**\r\n\r\n    runOnTimeout({\r\n        // something that can be run.\r\n    }, 1500)\r\n    \r\n    // OR\r\n    \r\n    val runnable = runOnTimeout(mHandler, {\r\n        // something that can be run.\r\n    }, 1500)\r\n    // to cancel\r\n    mHandler.removeCallbacks(runnable)\r\n\r\n\r\nInterval\r\n-------\r\n\r\n    inline fun runOnInterval(crossinline block: () -&gt; Unit, interval: Long) {\r\n        runOnInterval(Handler(Looper.getMainLooper()), block, interval)\r\n    }\r\n    \r\n    inline fun runOnInterval(handler: Handler, crossinline block: () -&gt; Unit, interval: Long): Runnable {\r\n        val runnable = object : Runnable {\r\n            override fun run() {\r\n                block()\r\n                handler.postDelayed(this, interval)\r\n            }\r\n        }\r\n        handler.post(runnable)\r\n        return runnable\r\n    }\r\n\r\n**Interval: Calling**\r\n\r\n    runOnInterval({\r\n        // something that can be run.\r\n    }, 1500)\r\n    \r\n    // OR\r\n    \r\n    val runnable = runOnInterval(mHandler, {\r\n        // something that can be run.\r\n    }, 1500)\r\n    // to cancel\r\n    mHandler.removeCallbacks(runnable)","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>In case someone wants -</p>\n<h1>Kotlin equivalent to JavaScript setInterval/setTimeout</h1>\n<p><strong>IMPORTANT</strong>: Remember to import <code>android.os.Handler</code>. Don't get mistaken by <code>java.util.logging.Handler</code></p>\n<h2>Timeout equivalent</h2>\n<p><strong>Javascript: setTimeout()</strong></p>\n<pre><code>setTimeout(function(){\n   // something that can be run.\n}, 1500);\n</code></pre>\n<p><strong>Kotlin: runOnTimeout()</strong></p>\n<pre><code>inline fun runOnTimeout(crossinline block: () -&gt; Unit, timeoutMillis: Long) {\n    Handler(Looper.getMainLooper()).postDelayed({\n        block()\n    }, timeoutMillis)\n}\n</code></pre>\n<p><strong>Kotlin: Calling</strong></p>\n<pre><code>runOnTimeout({\n   // something that can be run.\n}, 1500)\n</code></pre>\n<h2>Timeinterval equivalent</h2>\n<p><strong>Javascript: setInterval()</strong></p>\n<pre><code>setInterval(function(){\n   // something that can be run.\n}, 1500);\n</code></pre>\n<p><strong>Kotlin: runOnInterval()</strong></p>\n<pre><code>inline fun runOnInterval(crossinline block: () -&gt; Unit, interval: Long) {\n    val runnable = object : Runnable {\n        override fun run() {\n            block()\n            handler.postDelayed(this, interval)\n        }\n    }\n    handler.post(runnable)\n}\n</code></pre>\n<p><strong>Kotlin: Calling</strong></p>\n<pre><code>runOnInterval({\n   // something that can be run.\n}, 1500)\n</code></pre>\n<hr />\n<hr />\n<hr />\n<h1>Cancellable timeout and interval</h1>\n<p>If you want to use custom handler so that you can cancel the runnable, then you can use following codes.</p>\n<h2>Timeout</h2>\n<pre><code>inline fun runOnTimeout(crossinline block: () -&gt; Unit, timeoutMillis: Long) {\n    runOnTimeout(Handler(Looper.getMainLooper()), block, timeoutMillis)\n}\n\ninline fun runOnTimeout(handler: Handler, crossinline block: () -&gt; Unit, timeoutMillis: Long): Runnable {\n    val runnable = Runnable { block() }\n    handler.postDelayed(runnable, timeoutMillis)\n    return runnable\n}\n</code></pre>\n<p><strong>Timeout: Calling</strong></p>\n<pre><code>runOnTimeout({\n    // something that can be run.\n}, 1500)\n\n// OR\n\nval runnable = runOnTimeout(mHandler, {\n    // something that can be run.\n}, 1500)\n// to cancel\nmHandler.removeCallbacks(runnable)\n</code></pre>\n<h2>Interval</h2>\n<pre><code>inline fun runOnInterval(crossinline block: () -&gt; Unit, interval: Long) {\n    runOnInterval(Handler(Looper.getMainLooper()), block, interval)\n}\n\ninline fun runOnInterval(handler: Handler, crossinline block: () -&gt; Unit, interval: Long): Runnable {\n    val runnable = object : Runnable {\n        override fun run() {\n            block()\n            handler.postDelayed(this, interval)\n        }\n    }\n    handler.post(runnable)\n    return runnable\n}\n</code></pre>\n<p><strong>Interval: Calling</strong></p>\n<pre><code>runOnInterval({\n    // something that can be run.\n}, 1500)\n\n// OR\n\nval runnable = runOnInterval(mHandler, {\n    // something that can be run.\n}, 1500)\n// to cancel\nmHandler.removeCallbacks(runnable)\n</code></pre>\n"}],"owner":{"account_id":290098,"reputation":4065,"user_id":591452,"accept_rate":87,"display_name":"karse23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134963,"favorite_count":0,"down_vote_count":0,"up_vote_count":171,"accepted_answer_id":18381353,"answer_count":12,"score":171,"last_activity_date":1661531758,"creation_date":1296140282,"question_id":4817933,"body_markdown":"Can anyone tell me if an equivalent for setInterval/setTimeout exists for Android? Does anybody have any example about how to do it?\r\n\r\n","title":"What is the equivalent to a JavaScript setInterval/setTimeout in Android/Java?","body":"<p>Can anyone tell me if an equivalent for setInterval/setTimeout exists for Android? Does anybody have any example about how to do it?</p>\n"},{"tags":["java","amazon-s3","aws-sdk","aws-sdk-java-2.0"],"answers":[{"tags":[],"owner":{"account_id":26167684,"reputation":1,"user_id":19853253,"display_name":"matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661531701,"creation_date":1661531701,"answer_id":73504093,"question_id":72463649,"body_markdown":"folders are an artificial construct for the limited human brain. Testing for the existence of folders is pointless. KEYS aka objects are what matter. S3 is not FileExplorer.","title":"Java amazon awssdk 2.16.1 - S3Client.headObject() on a folder throws NoSuchKeyException, even though folder exists","body":"<p>folders are an artificial construct for the limited human brain. Testing for the existence of folders is pointless. KEYS aka objects are what matter. S3 is not FileExplorer.</p>\n"}],"owner":{"account_id":3685691,"reputation":642,"user_id":3069498,"display_name":"Serban"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":668,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661531701,"creation_date":1654094045,"question_id":72463649,"body_markdown":"**The sample S3 content**:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**The java code:**\r\n```\r\ntry {\r\n\tfinal S3Client s3Client = getS3Client(REGION_NAME, ACCESS_KEY, SECRET_KEY);\r\n\t\r\n\tfinal HeadObjectResponse ho1 = s3Client\r\n\t\t\t.headObject(HeadObjectRequest.builder().bucket(BUCKET_NAME).key(&quot;serban/m/F1/&quot;).build());\r\n\tSystem.out.println(ho1.sdkHttpResponse().statusCode());\r\n\t\r\n\tfinal HeadObjectResponse ho2 = s3Client\r\n\t\t\t.headObject(HeadObjectRequest.builder().bucket(BUCKET_NAME).key(&quot;serban/m/F2red/&quot;).build());\r\n\tSystem.out.println(ho2.sdkHttpResponse().statusCode());\r\n}\r\ncatch (Exception e) {\r\n\tSystem.out.println(e);\r\n}\r\n```\r\n\r\n**The result that I can&#39;t explain:**  \r\n- `ho1.sdkHttpResponse().statusCode()` is 200, just as expected.  \r\n- second `headObject` call throws `software.amazon.awssdk.services.s3.model.NoSuchKeyException: The specified key does not exist. (Service: S3, Status Code: 404, ... )`\r\n\r\n**Other info:**\r\n- `F1` is **empty**  \r\n  - it was created manually in the S3 console, using the `Create folder` button\r\n- `F2red` contains a file  \r\n   - **however**, this folder was created by simply uploading that file to that location (`s3Client.putObject...`)\r\n   - if I delete the file contained in `F2red`, **it disappears completely**.\r\n\r\n**What am I missing ?**  \r\n**What&#39;s the difference between these 2 locations ?**\r\n\r\nThank you.\r\n\r\n  [1]: https://i.stack.imgur.com/NoE7T.png","title":"Java amazon awssdk 2.16.1 - S3Client.headObject() on a folder throws NoSuchKeyException, even though folder exists","body":"<p><strong>The sample S3 content</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/NoE7T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NoE7T.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>The java code:</strong></p>\n<pre><code>try {\n    final S3Client s3Client = getS3Client(REGION_NAME, ACCESS_KEY, SECRET_KEY);\n    \n    final HeadObjectResponse ho1 = s3Client\n            .headObject(HeadObjectRequest.builder().bucket(BUCKET_NAME).key(&quot;serban/m/F1/&quot;).build());\n    System.out.println(ho1.sdkHttpResponse().statusCode());\n    \n    final HeadObjectResponse ho2 = s3Client\n            .headObject(HeadObjectRequest.builder().bucket(BUCKET_NAME).key(&quot;serban/m/F2red/&quot;).build());\n    System.out.println(ho2.sdkHttpResponse().statusCode());\n}\ncatch (Exception e) {\n    System.out.println(e);\n}\n</code></pre>\n<p><strong>The result that I can't explain:</strong></p>\n<ul>\n<li><code>ho1.sdkHttpResponse().statusCode()</code> is 200, just as expected.</li>\n<li>second <code>headObject</code> call throws <code>software.amazon.awssdk.services.s3.model.NoSuchKeyException: The specified key does not exist. (Service: S3, Status Code: 404, ... )</code></li>\n</ul>\n<p><strong>Other info:</strong></p>\n<ul>\n<li><code>F1</code> is <strong>empty</strong>\n<ul>\n<li>it was created manually in the S3 console, using the <code>Create folder</code> button</li>\n</ul>\n</li>\n<li><code>F2red</code> contains a file\n<ul>\n<li><strong>however</strong>, this folder was created by simply uploading that file to that location (<code>s3Client.putObject...</code>)</li>\n<li>if I delete the file contained in <code>F2red</code>, <strong>it disappears completely</strong>.</li>\n</ul>\n</li>\n</ul>\n<p><strong>What am I missing ?</strong><br />\n<strong>What's the difference between these 2 locations ?</strong></p>\n<p>Thank you.</p>\n"},{"tags":["java","eclipse","compiler-errors","jvm","xssf"],"comments":[{"owner":{"account_id":5300710,"reputation":269,"user_id":4230445,"display_name":"rahulP"},"score":1,"creation_date":1661532273,"post_id":73504088,"comment_id":129802606,"body_markdown":"This might help you. https://stackoverflow.com/questions/8600972/increasing-heap-space-in-eclipse-java-lang-outofmemoryerror","body":"This might help you. <a href=\"https://stackoverflow.com/questions/8600972/increasing-heap-space-in-eclipse-java-lang-outofmemoryerror\" title=\"increasing heap space in eclipse java lang outofmemoryerror\">stackoverflow.com/questions/8600972/&hellip;</a>"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":2,"creation_date":1661532821,"post_id":73504088,"comment_id":129802790,"body_markdown":"Note the eclipse.ini sets the memory for Eclipse, **not** programs you run from within Eclipse - you use the Run Configuration for that.","body":"Note the eclipse.ini sets the memory for Eclipse, <b>not</b> programs you run from within Eclipse - you use the Run Configuration for that."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1661595360,"post_id":73504088,"comment_id":129812620,"body_markdown":"XSSF is known to be very memory consuming. You may try [the SXSSF alternative](https://poi.apache.org/components/spreadsheet/how-to.html#sxssf).","body":"XSSF is known to be very memory consuming. You may try <a href=\"https://poi.apache.org/components/spreadsheet/how-to.html#sxssf\" rel=\"nofollow noreferrer\">the SXSSF alternative</a>."}],"owner":{"account_id":25960827,"reputation":1,"user_id":19677490,"display_name":"Irving Vera"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661531664,"creation_date":1661531664,"question_id":73504088,"body_markdown":"How about friends I get the following error in eclipse before it didn&#39;t come out, I read that it increased the VM but I already did it from the same IDE and from the configuration file and I still get the error. I really hope someone can help me.\r\n\r\n\r\n    Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread &quot;TimerQueue&quot;\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat org.apache.xmlbeans.impl.store.Xobj.ensureParent(Xobj.java:601)\r\n    \tat org.apache.xmlbeans.impl.store.Xobj.getNormal(Xobj.java:648)\r\n    \tat org.apache.xmlbeans.impl.store.Cur.getNormal(Cur.java:2459)\r\n    \tat org.apache.xmlbeans.impl.store.Cur.skip(Cur.java:1266)`enter code here`\r\n    \tat org.apache.xmlbeans.impl.store.Cur.moveNode(Cur.java:1835)\r\n    \tat org.apache.xmlbeans.impl.store.Cur.createHelper(Cur.java:284)\r\n    \tat org.apache.xmlbeans.impl.store.Cur.createElement(Cur.java:228)\r\n    \tat org.apache.xmlbeans.impl.store.Cur.createElement(Cur.java:223)\r\n    \tat org.apache.xmlbeans.impl.store.Xobj.insertElement(Xobj.java:2098)\r\n    \tat org.apache.xmlbeans.impl.store.Xobj.add_element_user(Xobj.java:2179)\r\n    \tat org.openxmlformats.schemas.spreadsheetml.x2006.main.impl.CTRowImpl.addNewC(Unknown Source)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFRow.createCell(XSSFRow.java:170)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFRow.createCell(XSSFRow.java:145)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFRow.createCell(XSSFRow.java:37)\r\n    \tat Vista.Vista.btnexportActionPerformed(Vista.java:313)\r\n    \tat Vista.Vista.access$0(Vista.java:283)\r\n    \tat Vista.Vista$1.actionPerformed(Vista.java:107)\r\n    \tat java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\r\n    \tat java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\r\n    \tat java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\r\n    \tat java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n    \tat java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n    \tat java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\r\n    \tat java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\r\n    \tat java.desktop/java.awt.Component.processEvent(Component.java:6391)\r\n    \tat java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n    \tat java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\r\n    \tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n    \tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)","title":"Error, Java heap space increase space in VM, using eclipse","body":"<p>How about friends I get the following error in eclipse before it didn't come out, I read that it increased the VM but I already did it from the same IDE and from the configuration file and I still get the error. I really hope someone can help me.</p>\n<pre><code>Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread &quot;TimerQueue&quot;\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space\n    at org.apache.xmlbeans.impl.store.Xobj.ensureParent(Xobj.java:601)\n    at org.apache.xmlbeans.impl.store.Xobj.getNormal(Xobj.java:648)\n    at org.apache.xmlbeans.impl.store.Cur.getNormal(Cur.java:2459)\n    at org.apache.xmlbeans.impl.store.Cur.skip(Cur.java:1266)`enter code here`\n    at org.apache.xmlbeans.impl.store.Cur.moveNode(Cur.java:1835)\n    at org.apache.xmlbeans.impl.store.Cur.createHelper(Cur.java:284)\n    at org.apache.xmlbeans.impl.store.Cur.createElement(Cur.java:228)\n    at org.apache.xmlbeans.impl.store.Cur.createElement(Cur.java:223)\n    at org.apache.xmlbeans.impl.store.Xobj.insertElement(Xobj.java:2098)\n    at org.apache.xmlbeans.impl.store.Xobj.add_element_user(Xobj.java:2179)\n    at org.openxmlformats.schemas.spreadsheetml.x2006.main.impl.CTRowImpl.addNewC(Unknown Source)\n    at org.apache.poi.xssf.usermodel.XSSFRow.createCell(XSSFRow.java:170)\n    at org.apache.poi.xssf.usermodel.XSSFRow.createCell(XSSFRow.java:145)\n    at org.apache.poi.xssf.usermodel.XSSFRow.createCell(XSSFRow.java:37)\n    at Vista.Vista.btnexportActionPerformed(Vista.java:313)\n    at Vista.Vista.access$0(Vista.java:283)\n    at Vista.Vista$1.actionPerformed(Vista.java:107)\n    at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\n    at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\n    at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\n    at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\n    at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\n    at java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\n    at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\n    at java.desktop/java.awt.Component.processEvent(Component.java:6391)\n    at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n    at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\n    at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\n    at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\n    at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\n</code></pre>\n"},{"tags":["java","lazy-loading"],"comments":[{"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"score":0,"creation_date":1661531406,"post_id":73503899,"comment_id":129802336,"body_markdown":"When you fetch your Property entity you need to eagerly fetch the userAuthorizations to make them available once a session is closed","body":"When you fetch your Property entity you need to eagerly fetch the userAuthorizations to make them available once a session is closed"},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":0,"creation_date":1661532892,"post_id":73503899,"comment_id":129802808,"body_markdown":"Make sure your transaction is still open with `@Transactional`","body":"Make sure your transaction is still open with <code>@Transactional</code>"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1661542555,"post_id":73503899,"comment_id":129805532,"body_markdown":"You need an active transaction + session to initialize lazy properties. Once the session is closed, hibernate can no longer initialize lazy properties","body":"You need an active transaction + session to initialize lazy properties. Once the session is closed, hibernate can no longer initialize lazy properties"}],"owner":{"account_id":19297553,"reputation":51,"user_id":14106209,"display_name":"PereZix"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661530623,"creation_date":1661530623,"question_id":73503899,"body_markdown":"Good colleagues,\r\n\r\nI am collecting an Object from a @modelAttribute with the new data that has been modified. But when I try to collect a lazy list without instantiating it, it returns the exception. How can I call it?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TH019.png\r\n  [2]: https://i.stack.imgur.com/eLTri.png\r\n  [3]: https://i.stack.imgur.com/VILiz.png","title":"Call Fetch.Lazy list without instance","body":"<p>Good colleagues,</p>\n<p>I am collecting an Object from a @modelAttribute with the new data that has been modified. But when I try to collect a lazy list without instantiating it, it returns the exception. How can I call it?</p>\n<p><a href=\"https://i.stack.imgur.com/TH019.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TH019.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/eLTri.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eLTri.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/VILiz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VILiz.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","indexoutofboundsexception"],"comments":[{"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"score":1,"creation_date":1660777001,"post_id":73395296,"comment_id":129615867,"body_markdown":"The problem is not with your code it&#39;s with the pseudocode you were given. As written it will immediately walk off the edge of the array. There&#39;s something missing there. If the algorithm is supposed to be something like the one at https://www.geeksforgeeks.org/magic-square/ then the pseudocode is missing logic for wrapping around the square.","body":"The problem is not with your code it&#39;s with the pseudocode you were given. As written it will immediately walk off the edge of the array. There&#39;s something missing there. If the algorithm is supposed to be something like the one at <a href=\"https://www.geeksforgeeks.org/magic-square/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/magic-square</a> then the pseudocode is missing logic for wrapping around the square."},{"owner":{"account_id":26092282,"reputation":1,"user_id":19788979,"display_name":"asad islam"},"score":0,"creation_date":1660907902,"post_id":73395296,"comment_id":129650175,"body_markdown":"@sprinter i messaged the teacher, and they said, yes, we were supposed to know it would already wrap around the edge of the square, so that it goes to the end of the array. But, I am confused on how to go about doing that. Would i just have two if functions checking if x or y &lt; 0, then change the x or y value to the length of the 2d array. Thank you for the help","body":"@sprinter i messaged the teacher, and they said, yes, we were supposed to know it would already wrap around the edge of the square, so that it goes to the end of the array. But, I am confused on how to go about doing that. Would i just have two if functions checking if x or y &lt; 0, then change the x or y value to the length of the 2d array. Thank you for the help"},{"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"score":0,"creation_date":1661131427,"post_id":73395296,"comment_id":129691385,"body_markdown":"Yes that&#39;s write - you check if x|y &lt; 0 and that x|y &gt;= n. You can also use a modulo operator: `x = (x + n) % n`","body":"Yes that&#39;s write - you check if x|y &lt; 0 and that x|y &gt;= n. You can also use a modulo operator: <code>x = (x + n) % n</code>"}],"owner":{"account_id":26092282,"reputation":1,"user_id":19788979,"display_name":"asad islam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1661530700,"answer_count":0,"score":0,"last_activity_date":1661530497,"creation_date":1660773097,"question_id":73395296,"body_markdown":"I am creating a magicsquare in java and have been given the following pseudocode:\r\n```\r\n&gt; Create a 2 dimensional array of size n by n and set all values to be 0\r\nSet x = 1, y = (n+1)/2 (row 1 and column (n+1)/2 ).\r\nInsert 1 at x, y\r\n  for i = 2 to n^2 do\r\n   if element x − 1,y − 1 is empty (i.e. = 0) then\r\n     x = x − 1, y = y − 1\r\n   else\r\n     x = x + 1, y = y\r\n   end if\r\n  Insert i at x, y\r\nend for\r\n```\r\nMy code is this:\r\n\r\n```java\r\nclass main1 {\r\n\r\n    static void squarematrix(int n) {\r\n\r\n        int[][] magicsquare = new int[n][n];\r\n        \r\n        int x = 1; //row\r\n        int y = ((n+1)/2); //column\r\n\r\n        magicsquare[x][y] = 1; //inserting 1 and (1, 5)\r\n\r\n        for (int i = 2; i &lt; (n*n); i++) {\r\n            System.out.println(i);\r\n            System.out.println(x);\r\n            System.out.println(y);\r\n            if (magicsquare[x-1][y-1] == 0) {\r\n                x = x-1;\r\n                y = y-1;\r\n            } else {\r\n                x = x+1;\r\n                y = y;\r\n            }\r\n\r\n            magicsquare[x][y] = i;\r\n        }\r\n```\r\n\r\nI understand that the `x` value goes lower than 0 giving me the out of bounds error, but I am honestly unsure how to fix it. Any help would be great thank you.\r\n","title":"Creating magicsquare, out of bounds error","body":"<p>I am creating a magicsquare in java and have been given the following pseudocode:</p>\n<pre><code>&gt; Create a 2 dimensional array of size n by n and set all values to be 0\nSet x = 1, y = (n+1)/2 (row 1 and column (n+1)/2 ).\nInsert 1 at x, y\n  for i = 2 to n^2 do\n   if element x − 1,y − 1 is empty (i.e. = 0) then\n     x = x − 1, y = y − 1\n   else\n     x = x + 1, y = y\n   end if\n  Insert i at x, y\nend for\n</code></pre>\n<p>My code is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class main1 {\n\n    static void squarematrix(int n) {\n\n        int[][] magicsquare = new int[n][n];\n        \n        int x = 1; //row\n        int y = ((n+1)/2); //column\n\n        magicsquare[x][y] = 1; //inserting 1 and (1, 5)\n\n        for (int i = 2; i &lt; (n*n); i++) {\n            System.out.println(i);\n            System.out.println(x);\n            System.out.println(y);\n            if (magicsquare[x-1][y-1] == 0) {\n                x = x-1;\n                y = y-1;\n            } else {\n                x = x+1;\n                y = y;\n            }\n\n            magicsquare[x][y] = i;\n        }\n</code></pre>\n<p>I understand that the <code>x</code> value goes lower than 0 giving me the out of bounds error, but I am honestly unsure how to fix it. Any help would be great thank you.</p>\n"},{"tags":["java","multithreading","task"],"comments":[{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1555939505,"post_id":55794964,"comment_id":98259075,"body_markdown":"Please show us the code of the createTask method.","body":"Please show us the code of the createTask method."},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1555939613,"post_id":55794964,"comment_id":98259128,"body_markdown":"Side note: since GUI events such Action events are already executed on the JavaFX Application Thread, Platform.runLater can usually be omitted. The handler registration code could be reduced to: `buttonIncreaseLevel.setOnAction(this::increaseLevelButtonActionPerformed)`","body":"Side note: since GUI events such Action events are already executed on the JavaFX Application Thread, Platform.runLater can usually be omitted. The handler registration code could be reduced to: <code>buttonIncreaseLevel.setOnAction(this::increaseLevelButtonAct&zwnj;&#8203;ionPerformed)</code>"},{"owner":{"account_id":14630975,"reputation":51,"user_id":10566762,"display_name":"Schredder Beeren"},"score":0,"creation_date":1555941095,"post_id":55794964,"comment_id":98259841,"body_markdown":"I added the createtask method and the Task itself","body":"I added the createtask method and the Task itself"},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1555945341,"post_id":55794964,"comment_id":98261930,"body_markdown":"The for loop in EdgeGeneratorTask.call doesn&#39;t really do much execpt iterating over an integer and update the GUI. Maybe you want to put the logic inside the loop? It doesn&#39;t explain however why the GUI is freezing...","body":"The for loop in EdgeGeneratorTask.call doesn&#39;t really do much execpt iterating over an integer and update the GUI. Maybe you want to put the logic inside the loop? It doesn&#39;t explain however why the GUI is freezing..."},{"owner":{"account_id":14630975,"reputation":51,"user_id":10566762,"display_name":"Schredder Beeren"},"score":0,"creation_date":1555946574,"post_id":55794964,"comment_id":98262491,"body_markdown":"It&#39;s more like the main thread is waiting on the tasks to finish, while i&#39;m using the Executorservice to submit tasks. So is this the wrong method?","body":"It&#39;s more like the main thread is waiting on the tasks to finish, while i&#39;m using the Executorservice to submit tasks. So is this the wrong method?"},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1555968957,"post_id":55794964,"comment_id":98271560,"body_markdown":"What exactly do you mean by &quot;GUI freezes&quot;? Does it really freeze completely (menus, button etc.) or is e.g. the cancel button still clickable but has no effect?","body":"What exactly do you mean by &quot;GUI freezes&quot;? Does it really freeze completely (menus, button etc.) or is e.g. the cancel button still clickable but has no effect?"}],"owner":{"account_id":14630975,"reputation":51,"user_id":10566762,"display_name":"Schredder Beeren"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661530169,"creation_date":1555938684,"question_id":55794964,"body_markdown":"I&#39;m calculating three different values at the same time which is depending on the level state of my application, so I&#39;m using Tasks for a faster calculation. However if I want to change the level during calculation it&#39;s not possible, because all the buttons are disabled during the calculation.\r\n\r\nI&#39;ve found out that I cannot cancel the tasks because my GUI freezes until the tasks are finished. Therefore I cannot cancel tasks, because they are already finished\r\n\r\nMy GUI has this buttonclick event\r\n```\r\nbuttonIncreaseLevel.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n            @Override\r\n            public void handle(ActionEvent event) {\r\n                Platform.runLater(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        increaseLevelButtonActionPerformed(event);\r\n                    }\r\n                });\r\n\r\n            }\r\n        });\r\n```\r\n\r\nIt increases a level and starts this method\r\n```\r\n        createTask(taskLeftEdge,EdgeType.LEFT);\r\n        createTask(taskBottomEdge,EdgeType.BOTTOM);\r\n        createTask(taskRightEdge,EdgeType.RIGHT);\r\n\r\n        pool.submit(taskRightEdge);\r\n        pool.submit(taskBottomEdge);\r\n        pool.submit(taskLeftEdge);\r\n\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;[Future] Started to wait for task (future)&quot;);\r\n                    // A task is also its own future\r\n                    ArrayList taskR = (ArrayList) taskRightEdge.get();\r\n                    ArrayList taskB = (ArrayList) taskBottomEdge.get();\r\n                    ArrayList taskL = (ArrayList) taskLeftEdge.get();\r\n\r\n                    System.out.println(&quot;[Future] &quot; + taskR);\r\n                    System.out.println(&quot;[Future] &quot; + taskB);\r\n                    System.out.println(&quot;[Future] &quot; + taskL);\r\n                } catch (InterruptedException | ExecutionException ex) {\r\n                    Logger.getLogger(FUN3KochFractalFX.class.getName()).log(Level.SEVERE, null, ex);\r\n                }\r\n            }\r\n        }\r\n        ).start();\r\n```\r\n\r\nThe method for creating a task\r\n```\r\n    private void createTask(Task task, EdgeType type){\r\n        if (task != null) {\r\n            application.cancelProgress(type);\r\n            task.cancel();\r\n        }\r\n        // There&#39;s a new task that performs some work\r\n        switch(type){\r\n            case LEFT:\r\n                taskLeftEdge = new EdgeGeneratorTask(&quot;Task: &quot; + taskNumber, type, this, application);\r\n                task = taskLeftEdge;\r\n                edges.addAll(koch.generateLeftEdge());\r\n                break;\r\n            case BOTTOM:\r\n                taskBottomEdge = new EdgeGeneratorTask(&quot;Task: &quot; + taskNumber, type, this, application);\r\n                task = taskBottomEdge;\r\n                edges.addAll(koch.generateBottomEdge());\r\n                break;\r\n            case RIGHT:\r\n                taskRightEdge = new EdgeGeneratorTask(&quot;Task: &quot; + taskNumber, type, this, application);\r\n                task = taskRightEdge;\r\n                edges.addAll(koch.generateRightEdge());\r\n                break;\r\n        }\r\n        taskNumber++;\r\n\r\n        application.setProgress( task, type);\r\n    }\r\n```\r\n\r\nAnd the Task itself. The class Kochfractal is where the calculations are made\r\n```\r\n    private static final Logger LOG = Logger.getLogger(EdgeGeneratorTask.class.getName());\r\n    private final String id;\r\n    private EdgeType type;\r\n    private KochFractal calc;\r\n    private FUN3KochFractalFX application;\r\n\r\n\r\n    public EdgeGeneratorTask(String id, EdgeType type, KochManager manager, FUN3KochFractalFX main) {\r\n        this.id = id;\r\n        this.type = type;\r\n        calc = new KochFractal(manager);\r\n        application = main;\r\n    }\r\n\r\n    @Override\r\n    protected ArrayList&lt;Edge&gt; call() throws Exception {\r\n        ArrayList&lt;Edge&gt; edges = new ArrayList&lt;&gt;();\r\n        switch(type){\r\n            case LEFT:\r\n                edges = calc.generateLeftEdge();\r\n                break;\r\n            case BOTTOM:\r\n                edges = calc.generateBottomEdge();\r\n                break;\r\n            case RIGHT:\r\n                edges = calc.generateRightEdge();\r\n                break;\r\n        }\r\n\r\n        int MAX = edges.size();\r\n        for (int i = 1; i &lt;= MAX; i++) {\r\n            if (isCancelled()) {\r\n                break;\r\n            }\r\n            updateProgress(i, MAX);\r\n            updateMessage(id + &quot; &quot; + i);\r\n        }\r\n        return edges;\r\n    }\r\n```\r\nI expect these threads to be cancelled, with an action on my JavaFX GUI.\r\nThe threads should run on a background Thread instead of the GUI thread itself","title":"How to run Tasks in a non-GUI thread using Threadpools","body":"<p>I'm calculating three different values at the same time which is depending on the level state of my application, so I'm using Tasks for a faster calculation. However if I want to change the level during calculation it's not possible, because all the buttons are disabled during the calculation.</p>\n<p>I've found out that I cannot cancel the tasks because my GUI freezes until the tasks are finished. Therefore I cannot cancel tasks, because they are already finished</p>\n<p>My GUI has this buttonclick event</p>\n<pre><code>buttonIncreaseLevel.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n            @Override\n            public void handle(ActionEvent event) {\n                Platform.runLater(new Runnable() {\n                    @Override\n                    public void run() {\n                        increaseLevelButtonActionPerformed(event);\n                    }\n                });\n\n            }\n        });\n</code></pre>\n<p>It increases a level and starts this method</p>\n<pre><code>        createTask(taskLeftEdge,EdgeType.LEFT);\n        createTask(taskBottomEdge,EdgeType.BOTTOM);\n        createTask(taskRightEdge,EdgeType.RIGHT);\n\n        pool.submit(taskRightEdge);\n        pool.submit(taskBottomEdge);\n        pool.submit(taskLeftEdge);\n\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    System.out.println(&quot;[Future] Started to wait for task (future)&quot;);\n                    // A task is also its own future\n                    ArrayList taskR = (ArrayList) taskRightEdge.get();\n                    ArrayList taskB = (ArrayList) taskBottomEdge.get();\n                    ArrayList taskL = (ArrayList) taskLeftEdge.get();\n\n                    System.out.println(&quot;[Future] &quot; + taskR);\n                    System.out.println(&quot;[Future] &quot; + taskB);\n                    System.out.println(&quot;[Future] &quot; + taskL);\n                } catch (InterruptedException | ExecutionException ex) {\n                    Logger.getLogger(FUN3KochFractalFX.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        }\n        ).start();\n</code></pre>\n<p>The method for creating a task</p>\n<pre><code>    private void createTask(Task task, EdgeType type){\n        if (task != null) {\n            application.cancelProgress(type);\n            task.cancel();\n        }\n        // There's a new task that performs some work\n        switch(type){\n            case LEFT:\n                taskLeftEdge = new EdgeGeneratorTask(&quot;Task: &quot; + taskNumber, type, this, application);\n                task = taskLeftEdge;\n                edges.addAll(koch.generateLeftEdge());\n                break;\n            case BOTTOM:\n                taskBottomEdge = new EdgeGeneratorTask(&quot;Task: &quot; + taskNumber, type, this, application);\n                task = taskBottomEdge;\n                edges.addAll(koch.generateBottomEdge());\n                break;\n            case RIGHT:\n                taskRightEdge = new EdgeGeneratorTask(&quot;Task: &quot; + taskNumber, type, this, application);\n                task = taskRightEdge;\n                edges.addAll(koch.generateRightEdge());\n                break;\n        }\n        taskNumber++;\n\n        application.setProgress( task, type);\n    }\n</code></pre>\n<p>And the Task itself. The class Kochfractal is where the calculations are made</p>\n<pre><code>    private static final Logger LOG = Logger.getLogger(EdgeGeneratorTask.class.getName());\n    private final String id;\n    private EdgeType type;\n    private KochFractal calc;\n    private FUN3KochFractalFX application;\n\n\n    public EdgeGeneratorTask(String id, EdgeType type, KochManager manager, FUN3KochFractalFX main) {\n        this.id = id;\n        this.type = type;\n        calc = new KochFractal(manager);\n        application = main;\n    }\n\n    @Override\n    protected ArrayList&lt;Edge&gt; call() throws Exception {\n        ArrayList&lt;Edge&gt; edges = new ArrayList&lt;&gt;();\n        switch(type){\n            case LEFT:\n                edges = calc.generateLeftEdge();\n                break;\n            case BOTTOM:\n                edges = calc.generateBottomEdge();\n                break;\n            case RIGHT:\n                edges = calc.generateRightEdge();\n                break;\n        }\n\n        int MAX = edges.size();\n        for (int i = 1; i &lt;= MAX; i++) {\n            if (isCancelled()) {\n                break;\n            }\n            updateProgress(i, MAX);\n            updateMessage(id + &quot; &quot; + i);\n        }\n        return edges;\n    }\n</code></pre>\n<p>I expect these threads to be cancelled, with an action on my JavaFX GUI.\nThe threads should run on a background Thread instead of the GUI thread itself</p>\n"},{"tags":["java","jsp"],"comments":[{"owner":{"account_id":2020478,"reputation":30439,"user_id":1806780,"accept_rate":0,"display_name":"Sami Kuhmonen"},"score":1,"creation_date":1510657102,"post_id":47283915,"comment_id":81517878,"body_markdown":"Browser can do whatever it wants. The server can&#39;t tell it to automatically save it anywhere.","body":"Browser can do whatever it wants. The server can&#39;t tell it to automatically save it anywhere."}],"answers":[{"tags":[],"owner":{"account_id":7898769,"reputation":473,"user_id":5966499,"accept_rate":100,"display_name":"Ann"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1661530165,"creation_date":1514965759,"answer_id":48073235,"question_id":47283915,"body_markdown":"\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response)\r\n                throws ServletException, IOException {\r\n\r\n            response.setContentType(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8&quot;);\r\n\r\n            File xfile = &lt; File&gt;\r\n\r\n            try (BufferedOutputStream bfos = new BufferedOutputStream(response.getOutputStream());\r\n                    FileInputStream fs = new FileInputStream(xfile)) {\r\n                byte[] buffer = new byte[fs.available()];\r\n                fs.read(buffer);\r\n\r\n                bfos.write(buffer, 0, buffer.length);\r\n                bfos.flush();\r\n            }\r\n     }","title":"How to save file with .xlsx by setting the content type","body":"<pre><code>@Override\nprotected void doPost(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n\n        response.setContentType(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8&quot;);\n\n        File xfile = &lt; File&gt;\n\n        try (BufferedOutputStream bfos = new BufferedOutputStream(response.getOutputStream());\n                FileInputStream fs = new FileInputStream(xfile)) {\n            byte[] buffer = new byte[fs.available()];\n            fs.read(buffer);\n\n            bfos.write(buffer, 0, buffer.length);\n            bfos.flush();\n        }\n }\n</code></pre>\n"}],"owner":{"account_id":11245871,"reputation":41,"user_id":8248649,"display_name":"Ouseph"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13533,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":48073235,"answer_count":1,"score":2,"last_activity_date":1661530165,"creation_date":1510656981,"question_id":47283915,"body_markdown":"Code tried in  jsp  given below .The code below opens the window explorer in  to save the file to .xlsx (using chrome browser)but the requirement is to auto download the file while clicking the icon .tried solutions of the similar question posted in stack overflow but could not find a correct solution to the question.\r\n\r\nSolution checked in browser Firefox and in chrome \r\n\r\n\r\n    &lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot;%&gt;\r\n    &lt;%\r\n        response.setContentType(&quot;application/application/vnd.openxmlformats-\r\n         officedocument.spreadsheetml.sheet&quot;);\r\n         response.setHeader (&quot;Content-Disposition&quot;, \r\n         &quot;attachment;fileName=tempAuthorizationCloseOutReportsResult.xlsx;&quot;);\r\n     %&gt;\r\n\r\n     &lt;s:set var=&quot;resultList&quot; value=&quot;#request.tempAuthorizationCloseoutResult&quot; /&gt;\r\n     \r\n\t\r\n\t &lt;div&gt;\r\n\t  \t&lt;h3&gt;&lt;/h3&gt;\r\n\t &lt;/div&gt;\r\n\t&lt;br/&gt;\r\n\t&lt;s:if test=&quot;#resultList.size &lt;= 0&quot;&gt;\r\n\t\t &lt;table&gt;\r\n\t\t  &lt;tr&gt;\r\n\t\t\t&lt;td&gt;\t\r\n\t\t\t\t&lt;b&gt; &lt;s:text name=&quot;ui.label.text.norecordsfound&quot; /&gt; &lt;/b&gt;\r\n\t\t\t&lt;/td&gt;\r\n\t\t  &lt;/tr&gt;\r\n\t\t&lt;/table&gt;\r\n\t&lt;/s:if&gt;\r\n\t\r\n\t&lt;s:elseif test=&quot;#resultList.size&gt; 0&quot;&gt;\r\n\t &lt;table&gt;\r\n\t  &lt;tr&gt;\r\n\t\t&lt;td&gt;\t\r\n\t\t\t&lt;b&gt;&lt;s:text name=&quot;ui.label.text.totalnumberofrecordsfound&quot;/&gt; : \r\n\t\t\t&lt;s:property value=&quot;#resultList.size&quot; /&gt; &lt;/b&gt;\r\n\t\t&lt;/td&gt;\r\n\t  &lt;/tr&gt;\r\n\t&lt;/table&gt;","title":"How to save file with .xlsx by setting the content type","body":"<p>Code tried in  jsp  given below .The code below opens the window explorer in  to save the file to .xlsx (using chrome browser)but the requirement is to auto download the file while clicking the icon .tried solutions of the similar question posted in stack overflow but could not find a correct solution to the question.</p>\n\n<p>Solution checked in browser Firefox and in chrome </p>\n\n<pre><code>&lt;%@ taglib uri=\"/struts-tags\" prefix=\"s\"%&gt;\n&lt;%\n    response.setContentType(\"application/application/vnd.openxmlformats-\n     officedocument.spreadsheetml.sheet\");\n     response.setHeader (\"Content-Disposition\", \n     \"attachment;fileName=tempAuthorizationCloseOutReportsResult.xlsx;\");\n %&gt;\n\n &lt;s:set var=\"resultList\" value=\"#request.tempAuthorizationCloseoutResult\" /&gt;\n\n\n &lt;div&gt;\n    &lt;h3&gt;&lt;/h3&gt;\n &lt;/div&gt;\n&lt;br/&gt;\n&lt;s:if test=\"#resultList.size &lt;= 0\"&gt;\n     &lt;table&gt;\n      &lt;tr&gt;\n        &lt;td&gt;    \n            &lt;b&gt; &lt;s:text name=\"ui.label.text.norecordsfound\" /&gt; &lt;/b&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/s:if&gt;\n\n&lt;s:elseif test=\"#resultList.size&gt; 0\"&gt;\n &lt;table&gt;\n  &lt;tr&gt;\n    &lt;td&gt;    \n        &lt;b&gt;&lt;s:text name=\"ui.label.text.totalnumberofrecordsfound\"/&gt; : \n        &lt;s:property value=\"#resultList.size\" /&gt; &lt;/b&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n"},{"tags":["java","android","gradle","ionic-framework"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661533196,"post_id":73503804,"comment_id":129802914,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":21363010,"reputation":11,"user_id":15731397,"display_name":"Othmane Janah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661530075,"creation_date":1661530075,"question_id":73503804,"body_markdown":"Executing tasks: [:app:assembleDebug] in project /Users/sublime/Desktop/apmobile/MDM/platforms/android\r\n\r\n\r\n&gt; Configure project :app\r\nWARNING: The option &#39;android.useDeprecatedNdk&#39; is deprecated.\r\nThe current default is &#39;false&#39;.\r\nIt has been removed from the current version of the Android Gradle plugin.\r\nNdkCompile is no longer supported\r\n\r\n&gt; Task :app:preBuild UP-TO-DATE\r\n&gt; Task :app:preDebugBuild UP-TO-DATE\r\n&gt; Task :CordovaLib:preBuild UP-TO-DATE\r\n&gt; Task :CordovaLib:preDebugBuild UP-TO-DATE\r\n&gt; Task :CordovaLib:compileDebugAidl NO-SOURCE\r\n&gt; Task :app:compileDebugAidl NO-SOURCE\r\n&gt; Task :CordovaLib:packageDebugRenderscript NO-SOURCE\r\n&gt; Task :app:compileDebugRenderscript NO-SOURCE\r\n&gt; Task :app:generateDebugBuildConfig UP-TO-DATE\r\n&gt; Task :app:javaPreCompileDebug UP-TO-DATE\r\n&gt; Task :CordovaLib:writeDebugAarMetadata UP-TO-DATE\r\n&gt; Task :app:generateDebugResValues UP-TO-DATE\r\n&gt; Task :app:generateDebugResources UP-TO-DATE\r\n&gt; Task :CordovaLib:compileDebugRenderscript UP-TO-DATE\r\n&gt; Task :CordovaLib:generateDebugResValues UP-TO-DATE\r\n&gt; Task :CordovaLib:generateDebugResources UP-TO-DATE\r\n&gt; Task :CordovaLib:packageDebugResources UP-TO-DATE\r\n&gt; Task :app:mergeDebugResources UP-TO-DATE\r\n&gt; Task :app:createDebugCompatibleScreenManifests UP-TO-DATE\r\n&gt; Task :app:extractDeepLinksDebug UP-TO-DATE\r\n&gt; Task :CordovaLib:extractDeepLinksDebug UP-TO-DATE\r\n&gt; Task :CordovaLib:processDebugManifest UP-TO-DATE\r\n&gt; Task :app:processDebugMainManifest\r\n&gt; Task :app:processDebugManifest\r\n&gt; Task :CordovaLib:compileDebugLibraryResources UP-TO-DATE\r\n&gt; Task :app:checkDebugAarMetadata\r\n&gt; Task :CordovaLib:generateDebugBuildConfig UP-TO-DATE\r\n&gt; Task :CordovaLib:javaPreCompileDebug UP-TO-DATE\r\n&gt; Task :app:mergeDebugNativeDebugMetadata NO-SOURCE\r\n&gt; Task :app:mergeDebugShaders UP-TO-DATE\r\n&gt; Task :app:compileDebugShaders NO-SOURCE\r\n&gt; Task :app:generateDebugAssets UP-TO-DATE\r\n&gt; Task :CordovaLib:parseDebugLocalResources\r\n&gt; Task :CordovaLib:mergeDebugShaders UP-TO-DATE\r\n&gt; Task :CordovaLib:compileDebugShaders NO-SOURCE\r\n&gt; Task :CordovaLib:generateDebugAssets UP-TO-DATE\r\n&gt; Task :CordovaLib:packageDebugAssets UP-TO-DATE\r\n&gt; Task :app:mergeDebugAssets UP-TO-DATE\r\n&gt; Task :app:compressDebugAssets UP-TO-DATE\r\n&gt; Task :app:processDebugJavaRes NO-SOURCE\r\n&gt; Task :CordovaLib:processDebugJavaRes NO-SOURCE\r\n&gt; Task :CordovaLib:bundleLibResDebug NO-SOURCE\r\n&gt; Task :app:mergeDebugJavaResource UP-TO-DATE\r\n&gt; Task :app:desugarDebugFileDependencies\r\n&gt; Task :CordovaLib:generateDebugRFile\r\n\r\n&gt; Task :CordovaLib:compileDebugJavaWithJavac FAILED\r\nAn exception has occurred in the compiler (1.8.0_242-release). Please file a bug against the Java compiler via the Java bug reporting page (http://bugreport.java.com) after checking the Bug Database (http://bugs.java.com) for duplicates. Include your program and the following diagnostic in your report. Thank you.\r\njava.lang.AssertionError: annotationType(): unrecognized Attribute name MODULE (class com.sun.tools.javac.util.UnsharedNameTable$NameImpl)\r\n\tat com.sun.tools.javac.util.Assert.error(Assert.java:133)\r\n\tat com.sun.tools.javac.code.TypeAnnotations.annotationType(TypeAnnotations.java:231)\r\n\tat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.separateAnnotationsKinds(TypeAnnotations.java:294)\r\n\tat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.visitMethodDef(TypeAnnotations.java:1066)\r\n\tat com.sun.tools.javac.tree.JCTree$JCMethodDecl.accept(JCTree.java:778)\r\n\tat com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:49)\r\n\tat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.scan(TypeAnnotations.java:275)\r\n\tat com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:57)\r\n\tat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.visitClassDef(TypeAnnotations.java:1042)\r\n\tat com.sun.tools.javac.tree.JCTree$JCClassDecl.accept(JCTree.java:693)\r\n\tat com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:49)\r\n\tat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.scan(TypeAnnotations.java:275)\r\n\tat com.sun.tools.javac.code.TypeAnnotations$1.run(TypeAnnotations.java:127)\r\n\tat com.sun.tools.javac.comp.Annotate.flush(Annotate.java:152)\r\n\tat com.sun.tools.javac.comp.Annotate.enterDone(Annotate.java:129)\r\n\tat com.sun.tools.javac.comp.Enter.complete(Enter.java:512)\r\n\tat com.sun.tools.javac.comp.Enter.main(Enter.java:471)\r\n\tat com.sun.tools.javac.main.JavaCompiler.enterTrees(JavaCompiler.java:982)\r\n\tat com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:857)\r\n\tat com.sun.tools.javac.main.Main.compile(Main.java:523)\r\n\tat com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)\r\n\tat com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)\r\n\tat org.gradle.internal.compiler.java.IncrementalCompileTask.call(IncrementalCompileTask.java:74)\r\n\tat org.gradle.api.internal.tasks.compile.AnnotationProcessingCompileTask.call(AnnotationProcessingCompileTask.java:93)\r\n\tat org.gradle.api.internal.tasks.compile.ResourceCleaningCompilationTask.call(ResourceCleaningCompilationTask.java:57)\r\n\tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:55)\r\n\tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:40)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)\r\n\tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)\r\n\tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)\r\n\tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)\r\n\tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)\r\n\tat org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:98)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:60)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:44)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:409)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:399)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:242)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:150)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:94)\r\n\tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:293)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:203)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:183)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\r\n\tat org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:42)\r\n\tat org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:28)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$3.run(ExecuteActionsTaskExecuter.java:569)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:395)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:387)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:242)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:150)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:84)\r\n\tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:554)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:537)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$300(ExecuteActionsTaskExecuter.java:108)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.executeWithPreviousOutputFiles(ExecuteActionsTaskExecuter.java:278)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:267)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.lambda$execute$0(ExecuteStep.java:32)\r\n\tat java.util.Optional.map(Optional.java:215)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:32)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:26)\r\n\tat org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:67)\r\n\tat org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:36)\r\n\tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:49)\r\n\tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:34)\r\n\tat org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:43)\r\n\tat org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:73)\r\n\tat org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:54)\r\n\tat org.gradle.internal.execution.steps.CatchExceptionStep.execute(CatchExceptionStep.java:34)\r\n\tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:44)\r\n\tat org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:54)\r\n\tat org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:38)\r\n\tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:49)\r\n\tat org.gradle.internal.execution.steps.CacheStep.executeWithoutCache(CacheStep.java:159)\r\n\tat org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:72)\r\n\tat org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:43)\r\n\tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:44)\r\n\tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:33)\r\n\tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:38)\r\n\tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:24)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:92)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:85)\r\n\tat java.util.Optional.map(Optional.java:215)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:55)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:39)\r\n\tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:76)\r\n\tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:37)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:36)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:26)\r\n\tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:94)\r\n\tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:49)\r\n\tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:79)\r\n\tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:53)\r\n\tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:74)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:78)\r\n\tat java.util.Optional.orElseGet(Optional.java:267)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:78)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:39)\r\n\tat org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:40)\r\n\tat org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:28)\r\n\tat org.gradle.internal.execution.impl.DefaultWorkExecutor.execute(DefaultWorkExecutor.java:33)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:194)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:186)\r\n\tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:114)\r\n\tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:62)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n\tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:409)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:399)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:242)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:150)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:94)\r\n\tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:41)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:356)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:343)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:336)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:322)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n&gt; Task :app:checkDebugDuplicateClasses\r\n&gt; Task :app:processDebugManifestForPackage\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:CordovaLib:compileDebugJavaWithJavac&#39;.\r\n&gt; Compilation failed; see the compiler error output for details.\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 1s\r\n30 actionable tasks: 9 executed, 21 up-to-date\r\n","title":"Execution failed for task &#39;:CordovaLib:compileDebugJavaWithJavac when i use sdk 31 in android s","body":"<p>Executing tasks: [:app:assembleDebug] in project /Users/sublime/Desktop/apmobile/MDM/platforms/android</p>\n<blockquote>\n<p>Configure project :app\nWARNING: The option 'android.useDeprecatedNdk' is deprecated.\nThe current default is 'false'.\nIt has been removed from the current version of the Android Gradle plugin.\nNdkCompile is no longer supported</p>\n</blockquote>\n<blockquote>\n<p>Task :app:preBuild UP-TO-DATE\nTask :app:preDebugBuild UP-TO-DATE\nTask :CordovaLib:preBuild UP-TO-DATE\nTask :CordovaLib:preDebugBuild UP-TO-DATE\nTask :CordovaLib:compileDebugAidl NO-SOURCE\nTask :app:compileDebugAidl NO-SOURCE\nTask :CordovaLib:packageDebugRenderscript NO-SOURCE\nTask :app:compileDebugRenderscript NO-SOURCE\nTask :app:generateDebugBuildConfig UP-TO-DATE\nTask :app:javaPreCompileDebug UP-TO-DATE\nTask :CordovaLib:writeDebugAarMetadata UP-TO-DATE\nTask :app:generateDebugResValues UP-TO-DATE\nTask :app:generateDebugResources UP-TO-DATE\nTask :CordovaLib:compileDebugRenderscript UP-TO-DATE\nTask :CordovaLib:generateDebugResValues UP-TO-DATE\nTask :CordovaLib:generateDebugResources UP-TO-DATE\nTask :CordovaLib:packageDebugResources UP-TO-DATE\nTask :app:mergeDebugResources UP-TO-DATE\nTask :app:createDebugCompatibleScreenManifests UP-TO-DATE\nTask :app:extractDeepLinksDebug UP-TO-DATE\nTask :CordovaLib:extractDeepLinksDebug UP-TO-DATE\nTask :CordovaLib:processDebugManifest UP-TO-DATE\nTask :app:processDebugMainManifest\nTask :app:processDebugManifest\nTask :CordovaLib:compileDebugLibraryResources UP-TO-DATE\nTask :app:checkDebugAarMetadata\nTask :CordovaLib:generateDebugBuildConfig UP-TO-DATE\nTask :CordovaLib:javaPreCompileDebug UP-TO-DATE\nTask :app:mergeDebugNativeDebugMetadata NO-SOURCE\nTask :app:mergeDebugShaders UP-TO-DATE\nTask :app:compileDebugShaders NO-SOURCE\nTask :app:generateDebugAssets UP-TO-DATE\nTask :CordovaLib:parseDebugLocalResources\nTask :CordovaLib:mergeDebugShaders UP-TO-DATE\nTask :CordovaLib:compileDebugShaders NO-SOURCE\nTask :CordovaLib:generateDebugAssets UP-TO-DATE\nTask :CordovaLib:packageDebugAssets UP-TO-DATE\nTask :app:mergeDebugAssets UP-TO-DATE\nTask :app:compressDebugAssets UP-TO-DATE\nTask :app:processDebugJavaRes NO-SOURCE\nTask :CordovaLib:processDebugJavaRes NO-SOURCE\nTask :CordovaLib:bundleLibResDebug NO-SOURCE\nTask :app:mergeDebugJavaResource UP-TO-DATE\nTask :app:desugarDebugFileDependencies\nTask :CordovaLib:generateDebugRFile</p>\n</blockquote>\n<blockquote>\n<p>Task :CordovaLib:compileDebugJavaWithJavac FAILED\nAn exception has occurred in the compiler (1.8.0_242-release). Please file a bug against the Java compiler via the Java bug reporting page (<a href=\"http://bugreport.java.com\" rel=\"nofollow noreferrer\">http://bugreport.java.com</a>) after checking the Bug Database (<a href=\"http://bugs.java.com\" rel=\"nofollow noreferrer\">http://bugs.java.com</a>) for duplicates. Include your program and the following diagnostic in your report. Thank you.\njava.lang.AssertionError: annotationType(): unrecognized Attribute name MODULE (class com.sun.tools.javac.util.UnsharedNameTable$NameImpl)\nat com.sun.tools.javac.util.Assert.error(Assert.java:133)\nat com.sun.tools.javac.code.TypeAnnotations.annotationType(TypeAnnotations.java:231)\nat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.separateAnnotationsKinds(TypeAnnotations.java:294)\nat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.visitMethodDef(TypeAnnotations.java:1066)\nat com.sun.tools.javac.tree.JCTree$JCMethodDecl.accept(JCTree.java:778)\nat com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:49)\nat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.scan(TypeAnnotations.java:275)\nat com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:57)\nat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.visitClassDef(TypeAnnotations.java:1042)\nat com.sun.tools.javac.tree.JCTree$JCClassDecl.accept(JCTree.java:693)\nat com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:49)\nat com.sun.tools.javac.code.TypeAnnotations$TypeAnnotationPositions.scan(TypeAnnotations.java:275)\nat com.sun.tools.javac.code.TypeAnnotations$1.run(TypeAnnotations.java:127)\nat com.sun.tools.javac.comp.Annotate.flush(Annotate.java:152)\nat com.sun.tools.javac.comp.Annotate.enterDone(Annotate.java:129)\nat com.sun.tools.javac.comp.Enter.complete(Enter.java:512)\nat com.sun.tools.javac.comp.Enter.main(Enter.java:471)\nat com.sun.tools.javac.main.JavaCompiler.enterTrees(JavaCompiler.java:982)\nat com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:857)\nat com.sun.tools.javac.main.Main.compile(Main.java:523)\nat com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)\nat com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)\nat org.gradle.internal.compiler.java.IncrementalCompileTask.call(IncrementalCompileTask.java:74)\nat org.gradle.api.internal.tasks.compile.AnnotationProcessingCompileTask.call(AnnotationProcessingCompileTask.java:93)\nat org.gradle.api.internal.tasks.compile.ResourceCleaningCompilationTask.call(ResourceCleaningCompilationTask.java:57)\nat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:55)\nat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:40)\nat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\nat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)\nat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)\nat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)\nat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)\nat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)\nat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)\nat org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)\nat org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:98)\nat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:60)\nat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:44)\nat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)\nat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:409)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:399)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:157)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:242)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:150)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:94)\nat org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\nat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)\nat org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:293)\nat org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:203)\nat org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:183)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\nat org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)\nat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:42)\nat org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\nat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:28)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$3.run(ExecuteActionsTaskExecuter.java:569)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:395)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:387)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:157)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:242)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:150)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:84)\nat org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:554)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:537)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$300(ExecuteActionsTaskExecuter.java:108)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.executeWithPreviousOutputFiles(ExecuteActionsTaskExecuter.java:278)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:267)\nat org.gradle.internal.execution.steps.ExecuteStep.lambda$execute$0(ExecuteStep.java:32)\nat java.util.Optional.map(Optional.java:215)\nat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:32)\nat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:26)\nat org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:67)\nat org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:36)\nat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:49)\nat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:34)\nat org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:43)\nat org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:73)\nat org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:54)\nat org.gradle.internal.execution.steps.CatchExceptionStep.execute(CatchExceptionStep.java:34)\nat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:44)\nat org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:54)\nat org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:38)\nat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:49)\nat org.gradle.internal.execution.steps.CacheStep.executeWithoutCache(CacheStep.java:159)\nat org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:72)\nat org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:43)\nat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:44)\nat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:33)\nat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:38)\nat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:24)\nat org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:92)\nat org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:85)\nat java.util.Optional.map(Optional.java:215)\nat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:55)\nat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:39)\nat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:76)\nat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:37)\nat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:36)\nat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:26)\nat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:94)\nat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:49)\nat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:79)\nat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:53)\nat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:74)\nat org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:78)\nat java.util.Optional.orElseGet(Optional.java:267)\nat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:78)\nat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)\nat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:39)\nat org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:40)\nat org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:28)\nat org.gradle.internal.execution.impl.DefaultWorkExecutor.execute(DefaultWorkExecutor.java:33)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:194)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:186)\nat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:114)\nat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\nat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:62)\nat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\nat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\nat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\nat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\nat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\nat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:409)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:399)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:157)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:242)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:150)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:94)\nat org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\nat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\nat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:41)\nat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:356)\nat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:343)\nat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:336)\nat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:322)\nat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)\nat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)\nat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)\nat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)\nat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\nat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\nat java.lang.Thread.run(Thread.java:748)</p>\n</blockquote>\n<blockquote>\n<p>Task :app:checkDebugDuplicateClasses\nTask :app:processDebugManifestForPackage</p>\n</blockquote>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nExecution failed for task ':CordovaLib:compileDebugJavaWithJavac'.</li>\n</ul>\n<blockquote>\n<p>Compilation failed; see the compiler error output for details.</p>\n</blockquote>\n<ul>\n<li><p>Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</p>\n</li>\n<li><p>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></p>\n</li>\n</ul>\n<p>BUILD FAILED in 1s\n30 actionable tasks: 9 executed, 21 up-to-date</p>\n"},{"tags":["javascript","java","spring-boot","websocket","stomp"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1661528346,"post_id":73502177,"comment_id":129801222,"body_markdown":"The idea is that you set up the websocket connection, and then you communicate directly through that. So you don&#39;t send things by using URLs; once established the web socket has no idea what a URL is. Also, all modern browsers have native websocket support, no need for SockJS, just create a [normal client-side WebSocket connection](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications)","body":"The idea is that you set up the websocket connection, and then you communicate directly through that. So you don&#39;t send things by using URLs; once established the web socket has no idea what a URL is. Also, all modern browsers have native websocket support, no need for SockJS, just create a <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications\" rel=\"nofollow noreferrer\">normal client-side WebSocket connection</a>"},{"owner":{"account_id":7438718,"reputation":1,"user_id":16987778,"display_name":"Justin Garner"},"score":0,"creation_date":1661529775,"post_id":73502177,"comment_id":129801762,"body_markdown":"Thank you for that suggestion. I made the changes and it is now properly working. Credit to you for the answer!","body":"Thank you for that suggestion. I made the changes and it is now properly working. Credit to you for the answer!"}],"answers":[{"tags":[],"owner":{"account_id":7438718,"reputation":1,"user_id":16987778,"display_name":"Justin Garner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661529927,"creation_date":1661529927,"answer_id":73503770,"question_id":73502177,"body_markdown":"Thanks to Mike &#39;Pomax&#39; Kamermans for the solution.\r\n\r\nMy error was in my front end code.\r\n\r\nThis was my original setup.\r\n\r\n```\r\nconst socket = new SockJS(&#39;http://localhost:8080/websocket&#39;)\r\nstompClient.subscribe(&#39;http://localhost:8080/topic/public&#39;, onMessageReceived)\r\nstompClient.send(&quot;http://localhost:8080/app/socket.newUser&quot;,\r\nstompClient.send(&quot;http://localhost:8080/app/socket.send&quot;, {}, JSON.stringify(chatMessage))\r\n\r\n```\r\n\r\nIt was changed to look like ....\r\n\r\n```\r\nconst socket = new SockJS(&#39;http://localhost:8080/websocket&#39;)\r\n\r\nstompClient.subscribe(&#39;/topic/public&#39;, onMessageReceived)\r\n\r\nstompClient.send(&quot;/app/socket.newUser&quot;,\r\n\r\nstompClient.send(&quot;/app/socket.send&quot;, {}, JSON.stringify(chatMessage))```\r\n\r\n\r\nThis was the cause of my issues. Thanks for the help!","title":"Web Socket endpoints","body":"<p>Thanks to Mike 'Pomax' Kamermans for the solution.</p>\n<p>My error was in my front end code.</p>\n<p>This was my original setup.</p>\n<pre><code>const socket = new SockJS('http://localhost:8080/websocket')\nstompClient.subscribe('http://localhost:8080/topic/public', onMessageReceived)\nstompClient.send(&quot;http://localhost:8080/app/socket.newUser&quot;,\nstompClient.send(&quot;http://localhost:8080/app/socket.send&quot;, {}, JSON.stringify(chatMessage))\n\n</code></pre>\n<p>It was changed to look like ....</p>\n<pre><code>const socket = new SockJS('http://localhost:8080/websocket')\n\nstompClient.subscribe('/topic/public', onMessageReceived)\n\nstompClient.send(&quot;/app/socket.newUser&quot;,\n\nstompClient.send(&quot;/app/socket.send&quot;, {}, JSON.stringify(chatMessage))```\n\n\nThis was the cause of my issues. Thanks for the help!\n</code></pre>\n"}],"owner":{"account_id":7438718,"reputation":1,"user_id":16987778,"display_name":"Justin Garner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":318,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1661529927,"creation_date":1661522284,"question_id":73502177,"body_markdown":"Hello everyone I&#39;m having some issues figuring out some websocket endpoints. I am trying to build a basic chat application to help me gain an understanding of websockets.\r\n\r\nI&#39;m running a Java 8 Spring Boot Websocket server that is running on http://localhost:8080 for testing purposes. \r\n\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketMessageConfig implements WebSocketMessageBrokerConfigurer {\r\n    \r\n    \r\n        @Override\r\n        public void registerStompEndpoints(final StompEndpointRegistry registry) {\r\n            WebSocketMessageBrokerConfigurer.super.registerStompEndpoints(registry);\r\n            registry.addEndpoint(&quot;/websocket&quot;).setAllowedOriginPatterns(&quot;*&quot;).withSockJS();\r\n        }\r\n    \r\n        @Override\r\n        public void configureMessageBroker(final MessageBrokerRegistry registry) {\r\n            WebSocketMessageBrokerConfigurer.super.configureMessageBroker(registry);\r\n            registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n            registry.enableSimpleBroker(&quot;/topic&quot;);\r\n        }\r\n    }\r\n\r\n    @Controller\r\n    public class SocketController {\r\n    \r\n    \r\n    \r\n        @MessageMapping(&quot;/socket.send&quot;)\r\n        @SendTo(&quot;/topic/public&quot;)\r\n        public SocketMessage sendMessage(@Payload final SocketMessage message) {\r\n            return message;\r\n        }\r\n    \r\n        @MessageMapping(&quot;/socket.newUser&quot;)\r\n        @SendTo(&quot;/topic/public&quot;)\r\n        public SocketMessage newUser(@Payload final SocketMessage message,\r\n                                     SimpMessageHeaderAccessor  headerAccessor) {\r\n    \r\n            headerAccessor.getSessionAttributes().put(&quot;username&quot;, message.getSender());\r\n        return message;\r\n        }\r\n\r\n}\r\n\r\n\r\n\r\nThat&#39;s my config file and controller file... My understanding is that the registerStompEndpoints() is giving the endpoint to setup the connection between client/server for a session. \r\n\r\nThe front end request will look like         \r\n\r\n\r\n\r\nThat seems to work fine from my javascript front end request. I see a good log showing a connection to that, but when I try to send a newUser or a message, neither appear to be properly going to the server. I don&#39;t see anything in the logs so I suspect my endpoints from the front-end are incorrect...\r\n\r\n   \r\n\r\n    const socket = new SockJS(&#39;http://localhost:8080/websocket&#39;)\r\n    stompClient.subscribe(&#39;http://localhost:8080/topic/public&#39;, onMessageReceived)\r\n    stompClient.send(&quot;http://localhost:8080/app/socket.newUser&quot;,\r\n    stompClient.send(&quot;http://localhost:8080/app/socket.send&quot;, {}, JSON.stringify(chatMessage))\r\n\r\n\r\nThis is my console.log from the from the front end\r\n\r\n    &gt;&gt;&gt; SUBSCRIBE\r\n    id:sub-0\r\n    destination:http://localhost:8080/app/topic/public\r\n    \r\n    &gt;&gt;&gt; SEND\r\n    destination:http://localhost:8080/app/socket.newUser\r\n    content-length:36\r\n    \r\n    {&quot;sender&quot;:&quot;testname&quot;,&quot;type&quot;:&quot;CONNECT&quot;}\r\n\r\n","title":"Web Socket endpoints","body":"<p>Hello everyone I'm having some issues figuring out some websocket endpoints. I am trying to build a basic chat application to help me gain an understanding of websockets.</p>\n<p>I'm running a Java 8 Spring Boot Websocket server that is running on http://localhost:8080 for testing purposes.</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketMessageConfig implements WebSocketMessageBrokerConfigurer {\n\n\n    @Override\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\n        WebSocketMessageBrokerConfigurer.super.registerStompEndpoints(registry);\n        registry.addEndpoint(&quot;/websocket&quot;).setAllowedOriginPatterns(&quot;*&quot;).withSockJS();\n    }\n\n    @Override\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\n        WebSocketMessageBrokerConfigurer.super.configureMessageBroker(registry);\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n    }\n}\n\n@Controller\npublic class SocketController {\n\n\n\n    @MessageMapping(&quot;/socket.send&quot;)\n    @SendTo(&quot;/topic/public&quot;)\n    public SocketMessage sendMessage(@Payload final SocketMessage message) {\n        return message;\n    }\n\n    @MessageMapping(&quot;/socket.newUser&quot;)\n    @SendTo(&quot;/topic/public&quot;)\n    public SocketMessage newUser(@Payload final SocketMessage message,\n                                 SimpMessageHeaderAccessor  headerAccessor) {\n\n        headerAccessor.getSessionAttributes().put(&quot;username&quot;, message.getSender());\n    return message;\n    }\n</code></pre>\n<p>}</p>\n<p>That's my config file and controller file... My understanding is that the registerStompEndpoints() is giving the endpoint to setup the connection between client/server for a session.</p>\n<p>The front end request will look like</p>\n<p>That seems to work fine from my javascript front end request. I see a good log showing a connection to that, but when I try to send a newUser or a message, neither appear to be properly going to the server. I don't see anything in the logs so I suspect my endpoints from the front-end are incorrect...</p>\n<pre><code>const socket = new SockJS('http://localhost:8080/websocket')\nstompClient.subscribe('http://localhost:8080/topic/public', onMessageReceived)\nstompClient.send(&quot;http://localhost:8080/app/socket.newUser&quot;,\nstompClient.send(&quot;http://localhost:8080/app/socket.send&quot;, {}, JSON.stringify(chatMessage))\n</code></pre>\n<p>This is my console.log from the from the front end</p>\n<pre><code>&gt;&gt;&gt; SUBSCRIBE\nid:sub-0\ndestination:http://localhost:8080/app/topic/public\n\n&gt;&gt;&gt; SEND\ndestination:http://localhost:8080/app/socket.newUser\ncontent-length:36\n\n{&quot;sender&quot;:&quot;testname&quot;,&quot;type&quot;:&quot;CONNECT&quot;}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":4287505,"reputation":1268,"user_id":3504749,"display_name":"Sam Spade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661529656,"creation_date":1661382289,"answer_id":73480309,"question_id":73480287,"body_markdown":"\r\nShould be \r\n\r\n```\r\n        System.out.println(parts[left].charAt(0));\r\n        System.out.println(&quot;_____________&quot;);\r\n        System.out.println(parts[right].charAt(parts[right].length()-1));\r\n```\r\nOkay, so for `System.out.println(parts[left].charAt(0))` lets break it down. Let&#39;s say the string is &quot;sample string&quot;. That means:\r\n\r\nparts = [&quot;sample&quot;, &quot;string&quot;]\r\n\r\nSo we want to get the letter &quot;s&quot; from &quot;sample&quot;. So we need to get `parts[0]` first, that gets us &quot;sample.&quot; Then we want to get the first letter (or rather zeroth letter). So that&#39;s `parts[0].charAt(0)`. That should be the letter &quot;s&quot;\r\n\r\n\r\nNext we want the last letter of the last word. That means we want the &quot;g&quot; from &quot;string&quot;. So first we need to get the last word. There are 2 items in the list, so the index of the last word will be `2 - 1 = 1` Where 2 is the length of the list. Thus:\r\n\r\n```int right = parts.length - 1;```\r\n\r\nSo now we can access the word string (or whatever the last word may happen to be) like this: \r\n\r\n```\r\nstring lastWord = parts[right]\r\n```\r\n\r\nTo get the last character, we do almost the same thing. We need to know first how long the string is, then we need to subtract one and get the character at that index. Thus:\r\n\r\n```\r\nint rightIndexOfRightWord = lastWord.length() - 1;\r\nstring lastChar = lastWord.charAt(rightIndexOfRightWord);\r\n```\r\n\r\nPut it all together and we get this little block of code:\r\n\r\n```\r\nint right = parts.length - 1;\r\nstring lastWord = parts[right]\r\nint rightIndexOfRightWord = lastWord.length() - 1;\r\nstring lastChar = lastWord.charAt(rightIndexOfRightWord);\r\n```\r\n\r\nWe can then combine all of that into one line:\r\n```\r\nint right = parts.length - 1;\r\n\r\nstring lastWord = parts[parts.length - 1]\r\nstring lastChar = lastWord.charAt(lastWord.length() - 1);\r\n```\r\n```\r\nint right = parts.length - 1;\r\nstring lastChar = parts[parts.length - 1].charAt(parts[parts.length - 1].length() - 1);\r\n```\r\ndone!","title":"I want to print the first character of the first string from an array of Strings and the last character from the last string from that Array","body":"<p>Should be</p>\n<pre><code>        System.out.println(parts[left].charAt(0));\n        System.out.println(&quot;_____________&quot;);\n        System.out.println(parts[right].charAt(parts[right].length()-1));\n</code></pre>\n<p>Okay, so for <code>System.out.println(parts[left].charAt(0))</code> lets break it down. Let's say the string is &quot;sample string&quot;. That means:</p>\n<p>parts = [&quot;sample&quot;, &quot;string&quot;]</p>\n<p>So we want to get the letter &quot;s&quot; from &quot;sample&quot;. So we need to get <code>parts[0]</code> first, that gets us &quot;sample.&quot; Then we want to get the first letter (or rather zeroth letter). So that's <code>parts[0].charAt(0)</code>. That should be the letter &quot;s&quot;</p>\n<p>Next we want the last letter of the last word. That means we want the &quot;g&quot; from &quot;string&quot;. So first we need to get the last word. There are 2 items in the list, so the index of the last word will be <code>2 - 1 = 1</code> Where 2 is the length of the list. Thus:</p>\n<p><code>int right = parts.length - 1;</code></p>\n<p>So now we can access the word string (or whatever the last word may happen to be) like this:</p>\n<pre><code>string lastWord = parts[right]\n</code></pre>\n<p>To get the last character, we do almost the same thing. We need to know first how long the string is, then we need to subtract one and get the character at that index. Thus:</p>\n<pre><code>int rightIndexOfRightWord = lastWord.length() - 1;\nstring lastChar = lastWord.charAt(rightIndexOfRightWord);\n</code></pre>\n<p>Put it all together and we get this little block of code:</p>\n<pre><code>int right = parts.length - 1;\nstring lastWord = parts[right]\nint rightIndexOfRightWord = lastWord.length() - 1;\nstring lastChar = lastWord.charAt(rightIndexOfRightWord);\n</code></pre>\n<p>We can then combine all of that into one line:</p>\n<pre><code>int right = parts.length - 1;\n\nstring lastWord = parts[parts.length - 1]\nstring lastChar = lastWord.charAt(lastWord.length() - 1);\n</code></pre>\n<pre><code>int right = parts.length - 1;\nstring lastChar = parts[parts.length - 1].charAt(parts[parts.length - 1].length() - 1);\n</code></pre>\n<p>done!</p>\n"},{"tags":[],"owner":{"account_id":2686035,"reputation":3011,"user_id":2320445,"accept_rate":25,"display_name":"Milad Qasemi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661382504,"creation_date":1661382504,"answer_id":73480339,"question_id":73480287,"body_markdown":"You need to get the last character of the last string. So first find the length of the last string `parts[right].length()` then get the index of the last character by reducing one from it.\r\n\r\n    System.out.println(parts[right].charAt(parts[right].length()-1));","title":"I want to print the first character of the first string from an array of Strings and the last character from the last string from that Array","body":"<p>You need to get the last character of the last string. So first find the length of the last string <code>parts[right].length()</code> then get the index of the last character by reducing one from it.</p>\n<pre><code>System.out.println(parts[right].charAt(parts[right].length()-1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21249283,"reputation":13,"user_id":15631690,"display_name":"Ullas B.C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661388895,"creation_date":1661388895,"answer_id":73480811,"question_id":73480287,"body_markdown":"    System.out.println(str.charAt(0));//to print first character of the first string\r\n    System.out.println(str.charAt(str.length()-1));// to print last character of the last string","title":"I want to print the first character of the first string from an array of Strings and the last character from the last string from that Array","body":"<pre><code>System.out.println(str.charAt(0));//to print first character of the first string\nSystem.out.println(str.charAt(str.length()-1));// to print last character of the last string\n</code></pre>\n"}],"owner":{"account_id":26032630,"reputation":9,"user_id":19738604,"display_name":"JAVA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":3,"score":-1,"last_activity_date":1661529656,"creation_date":1661382027,"question_id":73480287,"body_markdown":"   I don&#39;t know what is the issue, I tried debugging but I couldn&#39;t understand why it&#39;s not working  \r\n\r\n    class Solution {\r\n        public void sol(String s) {\r\n            String [] parts = s.split(&quot; &quot;);\r\n\r\n            int left = 0;\r\n            int right = parts.length - 1;\r\n\r\n            System.out.println(parts[left].charAt(left)); // -&gt;this is correct\r\n            System.out.println(&quot;_____________&quot;);\r\n            System.out.println(parts[right].charAt(right));// wrong output\r\n        }\r\n     }\r\n    class Main{\r\n        public static void main(String[] args) {\r\n            Solution s = new Solution();\r\n            s.sol(&quot;Don&#39;t read this&quot;);\r\n        }\r\n    }","title":"I want to print the first character of the first string from an array of Strings and the last character from the last string from that Array","body":"<p>I don't know what is the issue, I tried debugging but I couldn't understand why it's not working</p>\n<pre><code>class Solution {\n    public void sol(String s) {\n        String [] parts = s.split(&quot; &quot;);\n\n        int left = 0;\n        int right = parts.length - 1;\n\n        System.out.println(parts[left].charAt(left)); // -&gt;this is correct\n        System.out.println(&quot;_____________&quot;);\n        System.out.println(parts[right].charAt(right));// wrong output\n    }\n }\nclass Main{\n    public static void main(String[] args) {\n        Solution s = new Solution();\n        s.sol(&quot;Don't read this&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1661448597,"post_id":73489960,"comment_id":129781304,"body_markdown":"Please include the initial User state (rank and progress) as this determines how the activity rank of 1 should be processed.","body":"Please include the initial User state (rank and progress) as this determines how the activity rank of 1 should be processed."},{"owner":{"account_id":25300515,"reputation":143,"user_id":19124826,"display_name":"Amos Machora"},"score":0,"creation_date":1661450196,"post_id":73489960,"comment_id":129781845,"body_markdown":"@sp00m . It must be broken because there I&#39;ve tried close to everything","body":"@sp00m . It must be broken because there I&#39;ve tried close to everything"},{"owner":{"account_id":25300515,"reputation":143,"user_id":19124826,"display_name":"Amos Machora"},"score":0,"creation_date":1661450218,"post_id":73489960,"comment_id":129781856,"body_markdown":"@vsfDawg please explain more","body":"@vsfDawg please explain more"},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1661451010,"post_id":73489960,"comment_id":129782108,"body_markdown":"@AmosMachora  The User has two attributes - rank and progress.  What are the initial values for these attributes when the test is executed?","body":"@AmosMachora  The User has two attributes - rank and progress.  What are the initial values for these attributes when the test is executed?"},{"owner":{"account_id":25300515,"reputation":143,"user_id":19124826,"display_name":"Amos Machora"},"score":0,"creation_date":1661499174,"post_id":73489960,"comment_id":129791254,"body_markdown":"@vsfDawg the rank is -8 and the progress is 0","body":"@vsfDawg the rank is -8 and the progress is 0"},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1661501301,"post_id":73489960,"comment_id":129791877,"body_markdown":"I&#39;ve got it to pass with my own code. Some hints after looking at your code: when you compare two ranks, i.e. in `getRank() - activityRank == 1`, if `getRank()` is `1` and `activityRank` is `-1`, then `1` is expected instead of `2`, given rank 0 doesn&#39;t exist. In `setRankProgress(progress);` after you calculate `10 * d * d`, you forgot to add it to the existing `this.progress`. In `updateRank()`, you set `newRank` to `1` if the current `rank` is `-1`, but it&#39;s when the current `rank` is `0` that you needs to increment. In that same method, if `rank` is `8`, `progress` must be forced to `0`.","body":"I&#39;ve got it to pass with my own code. Some hints after looking at your code: when you compare two ranks, i.e. in <code>getRank() - activityRank == 1</code>, if <code>getRank()</code> is <code>1</code> and <code>activityRank</code> is <code>-1</code>, then <code>1</code> is expected instead of <code>2</code>, given rank 0 doesn&#39;t exist. In <code>setRankProgress(progress);</code> after you calculate <code>10 * d * d</code>, you forgot to add it to the existing <code>this.progress</code>. In <code>updateRank()</code>, you set <code>newRank</code> to <code>1</code> if the current <code>rank</code> is <code>-1</code>, but it&#39;s when the current <code>rank</code> is <code>0</code> that you needs to increment. In that same method, if <code>rank</code> is <code>8</code>, <code>progress</code> must be forced to <code>0</code>."},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1661515276,"post_id":73489960,"comment_id":129796432,"body_markdown":"Hand calculating the case (User(rank=-8, progress=0), activityRank=1):  Rank difference is 8 so you should generate 10 * 8 * 8 progress which is 640.  This should raise the user rank from -8 to -2 with 40 progress remaining.  It sounds like the test assertion is wrong.  There are flaws in your logic but they are unrelated to this case (see sp00m&#39;s comment above).  Consider calculating the rank difference once and then switching on the difference.","body":"Hand calculating the case (User(rank=-8, progress=0), activityRank=1):  Rank difference is 8 so you should generate 10 * 8 * 8 progress which is 640.  This should raise the user rank from -8 to -2 with 40 progress remaining.  It sounds like the test assertion is wrong.  There are flaws in your logic but they are unrelated to this case (see sp00m&#39;s comment above).  Consider calculating the rank difference once and then switching on the difference."}],"owner":{"account_id":25300515,"reputation":143,"user_id":19124826,"display_name":"Amos Machora"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661529621,"creation_date":1661440329,"question_id":73489960,"body_markdown":"I have a very simple problem at [codewars][1]. **Debug for fun** . Here goes!\r\n\r\n&gt; Write a class called **User** that is used to calculate the amount\r\n&gt; that a user will progress through a ranking system similar to the one\r\n&gt; Codewars uses.\r\n&gt; \r\n&gt; **Business Rules:**\r\n&gt; \r\n&gt; A user starts at rank -8 and can progress all the way to 8.\r\n&gt; \r\n&gt; **There is no 0 (zero) rank**. The next rank after -1 is 1.\r\n&gt; \r\n&gt; Users will complete **activities**. **These activities also have\r\n&gt; ranks**. Each time the user completes a ranked activity the users rank\r\n&gt; progress is updated based off of the activity&#39;s rank.\r\n&gt; \r\n&gt; **The progress earned from the completed activity is relative to what the user&#39;s current rank is compared to the rank of the activity**\r\n&gt; \r\n&gt; A user&#39;s rank progress starts off at zero, each time the progress\r\n&gt; reaches 100 the user&#39;s rank is upgraded to the next level\r\n&gt; \r\n&gt; Any remaining progress earned while in the previous rank will be\r\n&gt; applied towards the next rank&#39;s progress (we don&#39;t throw any progress\r\n&gt; away). The exception is if there is no other rank left to progress\r\n&gt; towards (Once you reach rank 8 there is no more progression).\r\n&gt; \r\n&gt; A user **cannot progress beyond rank 8**.\r\n&gt; \r\n&gt; The only acceptable range of rank values is\r\n&gt; `-8,-7,-6,-5,-4,-3,-2,-1,1,2,3,4,5,6,7,8` Any other value should raise\r\n&gt; an error. The progress is scored like so:\r\n&gt; \r\n&gt;  - Completing an activity that is ranked the same as that of the user&#39;s\r\n&gt;     will be worth 3 points\r\n&gt;  - Completing an activity that is ranked one ranking lower than the\r\n&gt;     user&#39;s will be worth 1 point\r\n&gt;  - Any activities completed that are ranking 2 levels or more lower\r\n&gt;     than the user&#39;s ranking will be ignored\r\n&gt;  - Completing an activity ranked higher than the current user&#39;s rank\r\n&gt;     will accelerate the rank progression. The greater the difference\r\n&gt;     between rankings the more the progression will be increased. The\r\n&gt;     formula is 10 * d * d where d equals the difference in ranking\r\n&gt;     between the activity and the user.\r\n&gt; \r\n&gt; **Logic Examples:**\r\n&gt; \r\n&gt;  - If a user ranked **-8** completes an activity ranked **-7** they will    receive 10 progress\r\n&gt; \r\n&gt;  - If a user ranked **-8** completes an activity ranked **-6** they will    receive 40 progress\r\n&gt; \r\n&gt;  - If a user ranked **-8** completes an activity ranked **-5** they will    receive 90 progress\r\n&gt; \r\n&gt;  - If a user ranked **-8** completes an activity ranked **-4** they will    receive 160 progress, resulting in the user being upgraded to\r\n&gt; rank -7    and having earned 60 progress towards their next rank\r\n&gt; \r\n&gt;  - If a user ranked **-1** completes an activity ranked **1** they will    receive 10 progress **(remember, zero rank is ignored)**\r\n\r\nHere is my solution\r\n\r\n    public class User {\r\n    int rank = -8;\r\n    int progress = 0;\r\n    public User() {\r\n\r\n    }\r\n\r\n    public int getRank() {\r\n        return rank;\r\n    }\r\n\r\n    public void setRank(int rank) {\r\n        this.rank = rank;\r\n    }\r\n\r\n    public int getRankProgress() {\r\n        return progress;\r\n    }\r\n\r\n    public void setRankProgress(int progress) {\r\n        this.progress = progress;\r\n    }\r\n\r\n    public void updateRank() {\r\n        while (progress &gt;= 100) {\r\n            int newRank = this.rank + 1;\r\n            if (rank == -1) {\r\n                newRank = 1;\r\n            } else if (rank == 8) {\r\n                return;\r\n            }\r\n            setRank(newRank);\r\n            setRankProgress(progress - 100);\r\n        }\r\n    }\r\n\r\n    public void incProgress(int activityRank) {\r\n        if (activityRank &lt; -8 || activityRank == 0 || activityRank &gt; 8) {\r\n            throw new IllegalArgumentException();\r\n        }\r\n\r\n        System.out.println(&quot;Called with activity rank &quot; + activityRank + &quot; user rank &quot; + getRank());\r\n        if (activityRank == getRank()) {\r\n            setRankProgress(progress + 3);\r\n        } else if (getRank() &gt; activityRank &amp;&amp; getRank() - activityRank == 1) {\r\n            setRankProgress(progress + 1);\r\n        } else if (getRank() &gt; activityRank &amp;&amp; getRank() - activityRank &gt;= 2) {\r\n            return;\r\n        } else if (activityRank &gt; getRank()) {\r\n            System.out.println(&quot;Called 5&quot;);\r\n            int d;\r\n            if (activityRank &gt;= 0 &amp;&amp; getRank() &lt; 0) {\r\n                d = (activityRank - getRank()) - 1;\r\n            } else {\r\n                d = activityRank - getRank();\r\n            }\r\n\r\n            int progress = 10 * d * d;\r\n            setRankProgress(progress);\r\n        }\r\n        updateRank();\r\n    }\r\n\r\n    }\r\n\r\nI think my logic is correct but i still get an error:\r\n\r\n&gt; After applying rank of 1 the resulting user rank was expected to be -1, but was actually -2 expected:&lt;-1&gt; but was:&lt;-2&gt;\r\n\r\n  [1]: https://www.codewars.com/kata/51fda2d95d6efda45e00004e/train/java","title":"Trouble with java logic in if else statements","body":"<p>I have a very simple problem at <a href=\"https://www.codewars.com/kata/51fda2d95d6efda45e00004e/train/java\" rel=\"nofollow noreferrer\">codewars</a>. <strong>Debug for fun</strong> . Here goes!</p>\n<blockquote>\n<p>Write a class called <strong>User</strong> that is used to calculate the amount\nthat a user will progress through a ranking system similar to the one\nCodewars uses.</p>\n<p><strong>Business Rules:</strong></p>\n<p>A user starts at rank -8 and can progress all the way to 8.</p>\n<p><strong>There is no 0 (zero) rank</strong>. The next rank after -1 is 1.</p>\n<p>Users will complete <strong>activities</strong>. <strong>These activities also have\nranks</strong>. Each time the user completes a ranked activity the users rank\nprogress is updated based off of the activity's rank.</p>\n<p><strong>The progress earned from the completed activity is relative to what the user's current rank is compared to the rank of the activity</strong></p>\n<p>A user's rank progress starts off at zero, each time the progress\nreaches 100 the user's rank is upgraded to the next level</p>\n<p>Any remaining progress earned while in the previous rank will be\napplied towards the next rank's progress (we don't throw any progress\naway). The exception is if there is no other rank left to progress\ntowards (Once you reach rank 8 there is no more progression).</p>\n<p>A user <strong>cannot progress beyond rank 8</strong>.</p>\n<p>The only acceptable range of rank values is\n<code>-8,-7,-6,-5,-4,-3,-2,-1,1,2,3,4,5,6,7,8</code> Any other value should raise\nan error. The progress is scored like so:</p>\n<ul>\n<li>Completing an activity that is ranked the same as that of the user's\nwill be worth 3 points</li>\n<li>Completing an activity that is ranked one ranking lower than the\nuser's will be worth 1 point</li>\n<li>Any activities completed that are ranking 2 levels or more lower\nthan the user's ranking will be ignored</li>\n<li>Completing an activity ranked higher than the current user's rank\nwill accelerate the rank progression. The greater the difference\nbetween rankings the more the progression will be increased. The\nformula is 10 * d * d where d equals the difference in ranking\nbetween the activity and the user.</li>\n</ul>\n<p><strong>Logic Examples:</strong></p>\n<ul>\n<li><p>If a user ranked <strong>-8</strong> completes an activity ranked <strong>-7</strong> they will    receive 10 progress</p>\n</li>\n<li><p>If a user ranked <strong>-8</strong> completes an activity ranked <strong>-6</strong> they will    receive 40 progress</p>\n</li>\n<li><p>If a user ranked <strong>-8</strong> completes an activity ranked <strong>-5</strong> they will    receive 90 progress</p>\n</li>\n<li><p>If a user ranked <strong>-8</strong> completes an activity ranked <strong>-4</strong> they will    receive 160 progress, resulting in the user being upgraded to\nrank -7    and having earned 60 progress towards their next rank</p>\n</li>\n<li><p>If a user ranked <strong>-1</strong> completes an activity ranked <strong>1</strong> they will    receive 10 progress <strong>(remember, zero rank is ignored)</strong></p>\n</li>\n</ul>\n</blockquote>\n<p>Here is my solution</p>\n<pre><code>public class User {\nint rank = -8;\nint progress = 0;\npublic User() {\n\n}\n\npublic int getRank() {\n    return rank;\n}\n\npublic void setRank(int rank) {\n    this.rank = rank;\n}\n\npublic int getRankProgress() {\n    return progress;\n}\n\npublic void setRankProgress(int progress) {\n    this.progress = progress;\n}\n\npublic void updateRank() {\n    while (progress &gt;= 100) {\n        int newRank = this.rank + 1;\n        if (rank == -1) {\n            newRank = 1;\n        } else if (rank == 8) {\n            return;\n        }\n        setRank(newRank);\n        setRankProgress(progress - 100);\n    }\n}\n\npublic void incProgress(int activityRank) {\n    if (activityRank &lt; -8 || activityRank == 0 || activityRank &gt; 8) {\n        throw new IllegalArgumentException();\n    }\n\n    System.out.println(&quot;Called with activity rank &quot; + activityRank + &quot; user rank &quot; + getRank());\n    if (activityRank == getRank()) {\n        setRankProgress(progress + 3);\n    } else if (getRank() &gt; activityRank &amp;&amp; getRank() - activityRank == 1) {\n        setRankProgress(progress + 1);\n    } else if (getRank() &gt; activityRank &amp;&amp; getRank() - activityRank &gt;= 2) {\n        return;\n    } else if (activityRank &gt; getRank()) {\n        System.out.println(&quot;Called 5&quot;);\n        int d;\n        if (activityRank &gt;= 0 &amp;&amp; getRank() &lt; 0) {\n            d = (activityRank - getRank()) - 1;\n        } else {\n            d = activityRank - getRank();\n        }\n\n        int progress = 10 * d * d;\n        setRankProgress(progress);\n    }\n    updateRank();\n}\n\n}\n</code></pre>\n<p>I think my logic is correct but i still get an error:</p>\n<blockquote>\n<p>After applying rank of 1 the resulting user rank was expected to be -1, but was actually -2 expected:&lt;-1&gt; but was:&lt;-2&gt;</p>\n</blockquote>\n"},{"tags":["java","iteration","hashmap"],"comments":[{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1454450936,"post_id":3973512,"comment_id":58047974,"body_markdown":"if you want &quot;only&quot; the very first element, see http://stackoverflow.com/a/1936472/32453","body":"if you want &quot;only&quot; the very first element, see <a href=\"http://stackoverflow.com/a/1936472/32453\">stackoverflow.com/a/1936472/32453</a>"}],"answers":[{"tags":[],"owner":{"account_id":41920,"reputation":56500,"user_id":121993,"accept_rate":77,"display_name":"Jeff Storey"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1358271999,"creation_date":1287529906,"answer_id":3973530,"question_id":3973512,"body_markdown":"HashMaps are not ordered, unless you use a `LinkedHashMap` or `SortedMap`. In this case, you may want a `LinkedHashMap`.  This will iterate in order of insertion (or in order of last access if you prefer). In this case, it would be\r\n\r\n    int index = 0;\r\n    for ( Map.Entry&lt;String,ArrayList&lt;String&gt;&gt; e : myHashMap.iterator().entrySet() ) {\r\n        String key = e.getKey();\r\n        ArrayList&lt;String&gt; val = e.getValue();\r\n        index++;\r\n    }\r\n\r\nThere is no direct get(index) in a map because it is an unordered list of key/value pairs. `LinkedHashMap` is a special case that keeps the order.","title":"Java HashMap: How to get a key and value by index?","body":"<p>HashMaps are not ordered, unless you use a <code>LinkedHashMap</code> or <code>SortedMap</code>. In this case, you may want a <code>LinkedHashMap</code>.  This will iterate in order of insertion (or in order of last access if you prefer). In this case, it would be</p>\n\n<pre><code>int index = 0;\nfor ( Map.Entry&lt;String,ArrayList&lt;String&gt;&gt; e : myHashMap.iterator().entrySet() ) {\n    String key = e.getKey();\n    ArrayList&lt;String&gt; val = e.getValue();\n    index++;\n}\n</code></pre>\n\n<p>There is no direct get(index) in a map because it is an unordered list of key/value pairs. <code>LinkedHashMap</code> is a special case that keeps the order.</p>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1287529991,"creation_date":1287529991,"answer_id":3973538,"question_id":3973512,"body_markdown":"You can do:\r\n\r\n    for(String key: hashMap.keySet()){\r\n        for(String value: hashMap.get(key)) {\r\n            // use the value here\r\n        }\r\n    }\r\n\r\nThis will iterate over every key, and then every value of the list associated with each key.","title":"Java HashMap: How to get a key and value by index?","body":"<p>You can do:</p>\n\n<pre><code>for(String key: hashMap.keySet()){\n    for(String value: hashMap.get(key)) {\n        // use the value here\n    }\n}\n</code></pre>\n\n<p>This will iterate over every key, and then every value of the list associated with each key.</p>\n"},{"tags":[],"owner":{"account_id":47625,"reputation":797,"user_id":141179,"display_name":"kkress"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1287530357,"creation_date":1287530036,"answer_id":3973545,"question_id":3973512,"body_markdown":"HashMaps don&#39;t keep your key/value pairs in a specific order.  They are ordered based on the hash that each key&#39;s returns from its Object.hashCode() method.  You can however iterate over the set of key/value pairs using an iterator with: \r\n\r\n    for (String key : hashmap.keySet()) \r\n    {\r\n        for (list : hashmap.get(key))\r\n        {\r\n            //list.toString()\r\n        }\r\n    }\r\n","title":"Java HashMap: How to get a key and value by index?","body":"<p>HashMaps don't keep your key/value pairs in a specific order.  They are ordered based on the hash that each key's returns from its Object.hashCode() method.  You can however iterate over the set of key/value pairs using an iterator with: </p>\n\n<pre><code>for (String key : hashmap.keySet()) \n{\n    for (list : hashmap.get(key))\n    {\n        //list.toString()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218120,"reputation":52202,"user_id":474283,"display_name":"Cameron Skinner"},"down_vote_count":1,"up_vote_count":52,"is_accepted":true,"score":51,"last_activity_date":1432817604,"creation_date":1287530182,"answer_id":3973560,"question_id":3973512,"body_markdown":"You can iterate over keys by calling `map.keySet()`, or iterate over the entries by calling `map.entrySet()`. Iterating over entries will probably be faster.\r\n\r\n    for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : map.entrySet()) {\r\n        List&lt;String&gt; list = entry.getValue();\r\n        // Do things with the list\r\n    }\r\n\r\nIf you want to ensure that you iterate over the keys in the same order you inserted them then use a `LinkedHashMap`.\r\n\r\nBy the way, I&#39;d recommend changing the declared type of the map to `&lt;String, List&lt;String&gt;&gt;`. Always best to declare types in terms of the interface rather than the implementation.","title":"Java HashMap: How to get a key and value by index?","body":"<p>You can iterate over keys by calling <code>map.keySet()</code>, or iterate over the entries by calling <code>map.entrySet()</code>. Iterating over entries will probably be faster.</p>\n\n<pre><code>for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : map.entrySet()) {\n    List&lt;String&gt; list = entry.getValue();\n    // Do things with the list\n}\n</code></pre>\n\n<p>If you want to ensure that you iterate over the keys in the same order you inserted them then use a <code>LinkedHashMap</code>.</p>\n\n<p>By the way, I'd recommend changing the declared type of the map to <code>&lt;String, List&lt;String&gt;&gt;</code>. Always best to declare types in terms of the interface rather than the implementation.</p>\n"},{"tags":[],"owner":{"account_id":1418041,"reputation":1148,"user_id":1343232,"accept_rate":40,"display_name":"umesh"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1363162937,"creation_date":1363162937,"answer_id":15380117,"question_id":3973512,"body_markdown":"    for (Object key : data.keySet()) {\r\n        String lKey = (String) key;\r\n        List&lt;String&gt; list = data.get(key);\r\n    }","title":"Java HashMap: How to get a key and value by index?","body":"<pre><code>for (Object key : data.keySet()) {\n    String lKey = (String) key;\n    List&lt;String&gt; list = data.get(key);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1973569,"reputation":1229,"user_id":1771892,"display_name":"dumonderic"},"down_vote_count":0,"up_vote_count":95,"is_accepted":false,"score":95,"last_activity_date":1452288112,"creation_date":1368440675,"answer_id":16519795,"question_id":3973512,"body_markdown":"Here is the general solution if you really only want the **first key&#39;s value**\r\n    \r\n    Object firstKey = myHashMap.keySet().toArray()[0];\r\n    Object valueForFirstKey = myHashMap.get(firstKey);","title":"Java HashMap: How to get a key and value by index?","body":"<p>Here is the general solution if you really only want the <strong>first key's value</strong></p>\n\n<pre><code>Object firstKey = myHashMap.keySet().toArray()[0];\nObject valueForFirstKey = myHashMap.get(firstKey);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2288975,"reputation":1804,"user_id":2012372,"display_name":"fspinnenhirn"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1388799348,"creation_date":1388799348,"answer_id":20915720,"question_id":3973512,"body_markdown":"If you don&#39;t care about the actual key, a concise way to iterate over *all* the Map&#39;s values would be to use its `values()` method\r\n\r\n    Map&lt;String, List&lt;String&gt;&gt; myMap;\r\n\r\n    for ( List&lt;String&gt; stringList : myMap.values() ) {\r\n        for ( String myString : stringList ) {\r\n            // process the string here\r\n        }\r\n    }\r\n\r\nThe `values()` method is part of the Map interface and returns a Collection view of the values in the map.\r\n","title":"Java HashMap: How to get a key and value by index?","body":"<p>If you don't care about the actual key, a concise way to iterate over <em>all</em> the Map's values would be to use its <code>values()</code> method</p>\n\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; myMap;\n\nfor ( List&lt;String&gt; stringList : myMap.values() ) {\n    for ( String myString : stringList ) {\n        // process the string here\n    }\n}\n</code></pre>\n\n<p>The <code>values()</code> method is part of the Map interface and returns a Collection view of the values in the map.</p>\n"},{"tags":[],"owner":{"account_id":2023117,"reputation":8402,"user_id":1808829,"accept_rate":80,"display_name":"Ayaz Alifov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1525080290,"creation_date":1434987157,"answer_id":30984049,"question_id":3973512,"body_markdown":"A solution is already selected. However, I post this solution for those who want to use an alternative approach:\r\n\r\n    // use LinkedHashMap if you want to read values from the hashmap in the same order as you put them into it\r\n    private ArrayList&lt;String&gt; getMapValueAt(LinkedHashMap&lt;String, ArrayList&lt;String&gt;&gt; hashMap, int index)\r\n    {\r\n        Map.Entry&lt;String, ArrayList&lt;String&gt;&gt; entry = (Map.Entry&lt;String, ArrayList&lt;String&gt;&gt;) hashMap.entrySet().toArray()[index];\r\n        return entry.getValue();\r\n    }","title":"Java HashMap: How to get a key and value by index?","body":"<p>A solution is already selected. However, I post this solution for those who want to use an alternative approach:</p>\n\n<pre><code>// use LinkedHashMap if you want to read values from the hashmap in the same order as you put them into it\nprivate ArrayList&lt;String&gt; getMapValueAt(LinkedHashMap&lt;String, ArrayList&lt;String&gt;&gt; hashMap, int index)\n{\n    Map.Entry&lt;String, ArrayList&lt;String&gt;&gt; entry = (Map.Entry&lt;String, ArrayList&lt;String&gt;&gt;) hashMap.entrySet().toArray()[index];\n    return entry.getValue();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15185175,"reputation":374,"user_id":10957357,"display_name":"Makwana Mehul"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1565674103,"creation_date":1565674103,"answer_id":57471593,"question_id":3973512,"body_markdown":"You can use Kotlin extension function\r\n\r\n    fun LinkedHashMap&lt;String, String&gt;.getKeyByPosition(position: Int) =\r\n            this.keys.toTypedArray()[position]\r\n    \r\n    \r\n    fun LinkedHashMap&lt;String, String&gt;.getValueByPosition(position: Int) =\r\n            this.values.toTypedArray()[position]","title":"Java HashMap: How to get a key and value by index?","body":"<p>You can use Kotlin extension function</p>\n\n<pre><code>fun LinkedHashMap&lt;String, String&gt;.getKeyByPosition(position: Int) =\n        this.keys.toTypedArray()[position]\n\n\nfun LinkedHashMap&lt;String, String&gt;.getValueByPosition(position: Int) =\n        this.values.toTypedArray()[position]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18507167,"reputation":19,"user_id":13483231,"display_name":"Benjavo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1588851923,"creation_date":1588792602,"answer_id":61643506,"question_id":3973512,"body_markdown":"I came across the same problem, read a couple of answers from different related questions and came up with my own class.\r\n\r\n    public class IndexableMap&lt;K, V&gt; extends HashMap&lt;K, V&gt; {\r\n    \r\n        private LinkedList&lt;K&gt; keyList = new LinkedList&lt;&gt;();\r\n    \r\n        @Override\r\n        public V put(K key, V value) {\r\n            if (!keyList.contains(key))\r\n                keyList.add(key);\r\n            return super.put(key, value);\r\n        }\r\n    \r\n        @Override\r\n        public void putAll(Map&lt;? extends K, ? extends V&gt; m) {\r\n            for (Entry&lt;? extends K, ? extends V&gt; entry : m.entrySet()) {\r\n                put(entry.getKey(), entry.getValue());\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void clear() {\r\n            keyList.clear();\r\n            super.clear();\r\n        }\r\n    \r\n        public List&lt;K&gt; getKeys() {\r\n            return keyList;\r\n        }\r\n    \r\n        public int getKeyIndex(K key) {\r\n            return keyList.indexOf(key);\r\n        }\r\n    \r\n        public K getKeyAt(int index) {\r\n            if (keyList.size() &gt; index)\r\n                return keyList.get(index);\r\n            return null;\r\n        }\r\n    \r\n        public V getValueAt(int index) {\r\n            K key = getKeyAt(index);\r\n            if (key != null)\r\n                return get(key);\r\n            return null;\r\n        }\r\n    }\r\n\r\nExample (types are differing from OPs question just for clarity):\r\n\r\n    Map&lt;String, Double&gt; myMap = new IndexableMap&lt;&gt;();\r\n\r\n    List&lt;String&gt; keys = myMap.getKeys();\r\n    int keyIndex = myMap.getKeyIndex(&quot;keyString&quot;);\r\n    String key = myMap.getKeyAt(2);\r\n    Double value myMap.getValueAt(2);\r\n\r\nKeep in mind that it does not override any of the complex methods, so you will need to do this on your own if you want to reliably access one of these.\r\n\r\nEdit: I made a change to the putAll() method, because the old one had a rare chance to cause HashMap and LinkedList being in different states.","title":"Java HashMap: How to get a key and value by index?","body":"<p>I came across the same problem, read a couple of answers from different related questions and came up with my own class.</p>\n\n<pre><code>public class IndexableMap&lt;K, V&gt; extends HashMap&lt;K, V&gt; {\n\n    private LinkedList&lt;K&gt; keyList = new LinkedList&lt;&gt;();\n\n    @Override\n    public V put(K key, V value) {\n        if (!keyList.contains(key))\n            keyList.add(key);\n        return super.put(key, value);\n    }\n\n    @Override\n    public void putAll(Map&lt;? extends K, ? extends V&gt; m) {\n        for (Entry&lt;? extends K, ? extends V&gt; entry : m.entrySet()) {\n            put(entry.getKey(), entry.getValue());\n        }\n    }\n\n    @Override\n    public void clear() {\n        keyList.clear();\n        super.clear();\n    }\n\n    public List&lt;K&gt; getKeys() {\n        return keyList;\n    }\n\n    public int getKeyIndex(K key) {\n        return keyList.indexOf(key);\n    }\n\n    public K getKeyAt(int index) {\n        if (keyList.size() &gt; index)\n            return keyList.get(index);\n        return null;\n    }\n\n    public V getValueAt(int index) {\n        K key = getKeyAt(index);\n        if (key != null)\n            return get(key);\n        return null;\n    }\n}\n</code></pre>\n\n<p>Example (types are differing from OPs question just for clarity):</p>\n\n<pre><code>Map&lt;String, Double&gt; myMap = new IndexableMap&lt;&gt;();\n\nList&lt;String&gt; keys = myMap.getKeys();\nint keyIndex = myMap.getKeyIndex(\"keyString\");\nString key = myMap.getKeyAt(2);\nDouble value myMap.getValueAt(2);\n</code></pre>\n\n<p>Keep in mind that it does not override any of the complex methods, so you will need to do this on your own if you want to reliably access one of these.</p>\n\n<p>Edit: I made a change to the putAll() method, because the old one had a rare chance to cause HashMap and LinkedList being in different states.</p>\n"},{"tags":[],"owner":{"account_id":9878926,"reputation":119,"user_id":7315640,"display_name":"Moz"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1616914708,"creation_date":1616914708,"answer_id":66839112,"question_id":3973512,"body_markdown":"You&#39;ll need to create multiple HashMaps like this for example\r\n\r\n    Map&lt;String, String&gt; fruitDetails = new HashMap();\r\n    fruitDetails.put(&quot;Mango&quot;, &quot;Mango is a delicious fruit!&quot;);\r\n    fruitDetails.put(&quot;Guava&quot; &quot;Guava is a delicious fruit!&quot;);\r\n    fruitDetails.put(&quot;Pineapple&quot;, &quot;Pineapple is a delicious fruit!&quot;);\r\n    Map&lt;String, String&gt; fruitDetails2 = new HashMap();\r\n    fruitDetails2.put(&quot;Orange&quot;, &quot;Orange is a delicious fruit!&quot;);\r\n    fruitDetails2.put(&quot;Banana&quot; &quot;Banana is a delicious fruit!&quot;);\r\n    fruitDetails2.put(&quot;Apple&quot;, &quot;Apple is a delicious fruit!&quot;);\r\n    // STEP 2: Create a numeric key based HashMap containing fruitDetails so we can access them by index\r\n    Map&lt;Integer, Map&lt;String, String&gt;&gt; hashMap = new HashMap();\r\n    hashMap.put(0, fruitDetails);\r\n    hashMap.put(1, fruitDetails2);\r\n    // Now we can successfully access the fruitDetails by index like this\r\n    String fruit1 = hashMap.get(0).get(&quot;Guava&quot;);\r\n    String fruit2 = hashMap.get(1).get(&quot;Apple&quot;);\r\n    System.out.println(fruit1); // outputs: Guava is a delicious fruit!\r\n    System.out.println(fruit2); // outputs: Apple is a delicious fruit!","title":"Java HashMap: How to get a key and value by index?","body":"<p>You'll need to create multiple HashMaps like this for example</p>\n<pre><code>Map&lt;String, String&gt; fruitDetails = new HashMap();\nfruitDetails.put(&quot;Mango&quot;, &quot;Mango is a delicious fruit!&quot;);\nfruitDetails.put(&quot;Guava&quot; &quot;Guava is a delicious fruit!&quot;);\nfruitDetails.put(&quot;Pineapple&quot;, &quot;Pineapple is a delicious fruit!&quot;);\nMap&lt;String, String&gt; fruitDetails2 = new HashMap();\nfruitDetails2.put(&quot;Orange&quot;, &quot;Orange is a delicious fruit!&quot;);\nfruitDetails2.put(&quot;Banana&quot; &quot;Banana is a delicious fruit!&quot;);\nfruitDetails2.put(&quot;Apple&quot;, &quot;Apple is a delicious fruit!&quot;);\n// STEP 2: Create a numeric key based HashMap containing fruitDetails so we can access them by index\nMap&lt;Integer, Map&lt;String, String&gt;&gt; hashMap = new HashMap();\nhashMap.put(0, fruitDetails);\nhashMap.put(1, fruitDetails2);\n// Now we can successfully access the fruitDetails by index like this\nString fruit1 = hashMap.get(0).get(&quot;Guava&quot;);\nString fruit2 = hashMap.get(1).get(&quot;Apple&quot;);\nSystem.out.println(fruit1); // outputs: Guava is a delicious fruit!\nSystem.out.println(fruit2); // outputs: Apple is a delicious fruit!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11562480,"reputation":6622,"user_id":8471798,"display_name":"canerkaseler"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1623244067,"creation_date":1623244067,"answer_id":67904803,"question_id":3973512,"body_markdown":"**Kotlin HashMap Answer**\r\n\r\nYou can get key by index. Then get value by key.\r\n\r\n    val item = HashMap&lt;String, String&gt;() // Dummy HashMap.\r\n\r\n    val keyByIndex = item.keys.elementAt(0) // Get key by index. I selected &quot;0&quot;.\r\n\r\n    val valueOfElement = item.getValue(keyByIndex) // Get value.","title":"Java HashMap: How to get a key and value by index?","body":"<p><strong>Kotlin HashMap Answer</strong></p>\n<p>You can get key by index. Then get value by key.</p>\n<pre><code>val item = HashMap&lt;String, String&gt;() // Dummy HashMap.\n\nval keyByIndex = item.keys.elementAt(0) // Get key by index. I selected &quot;0&quot;.\n\nval valueOfElement = item.getValue(keyByIndex) // Get value.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18230402,"reputation":1,"user_id":13269448,"display_name":"Lasha Bibilashvili"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1661529413,"creation_date":1661209383,"answer_id":73451797,"question_id":3973512,"body_markdown":"Try this:\r\n\r\n    myhashmap.entrySet()\r\n               .forEach{\r\n                   println(it.getKey())\r\n                   println(it.getValue())\r\n               }\r\nor if you want by index\r\n\r\n    myhashmap.entrySet()[0].getKey()\r\n    myhashmap.entrySet()[0].getValue()\r\n\r\n    myhashmap.entrySet()[1].getKey()\r\n    myhashmap.entrySet()[1].getValue()\r\n\r\n","title":"Java HashMap: How to get a key and value by index?","body":"<p>Try this:</p>\n<pre><code>myhashmap.entrySet()\n           .forEach{\n               println(it.getKey())\n               println(it.getValue())\n           }\n</code></pre>\n<p>or if you want by index</p>\n<pre><code>myhashmap.entrySet()[0].getKey()\nmyhashmap.entrySet()[0].getValue()\n\nmyhashmap.entrySet()[1].getKey()\nmyhashmap.entrySet()[1].getValue()\n</code></pre>\n"}],"owner":{"account_id":790108,"reputation":833,"user_id":481092,"accept_rate":60,"display_name":"Derek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282722,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"accepted_answer_id":3973560,"answer_count":13,"score":57,"last_activity_date":1661529413,"creation_date":1287529714,"question_id":3973512,"body_markdown":"I am trying to use a HashMap to map a unique string to a string ArrayList like this:\r\n\r\n    HashMap&lt;String, ArrayList&lt;String&gt;&gt;\r\n\r\nBasically, I want to be able to access the keys by number, not by using the key&#39;s name. And I want to be able to access said key&#39;s value, to iterate over it. I&#39;m imagining something like this:\r\n\r\n    for(all keys in my hashmap) {\r\n        for(int i=0; i &lt; myhashmap.currentKey.getValue.size(); i++) {\r\n            // do things with the hashmaps elements\r\n        }\r\n    }\r\n\r\nIs there an easy way to do this?\r\n","title":"Java HashMap: How to get a key and value by index?","body":"<p>I am trying to use a HashMap to map a unique string to a string ArrayList like this:</p>\n\n<pre><code>HashMap&lt;String, ArrayList&lt;String&gt;&gt;\n</code></pre>\n\n<p>Basically, I want to be able to access the keys by number, not by using the key's name. And I want to be able to access said key's value, to iterate over it. I'm imagining something like this:</p>\n\n<pre><code>for(all keys in my hashmap) {\n    for(int i=0; i &lt; myhashmap.currentKey.getValue.size(); i++) {\n        // do things with the hashmaps elements\n    }\n}\n</code></pre>\n\n<p>Is there an easy way to do this?</p>\n"},{"tags":["java","spring","rabbitmq","spring-amqp"],"comments":[{"owner":{"account_id":1471892,"reputation":9718,"user_id":1383240,"accept_rate":38,"display_name":"NiVeR"},"score":0,"creation_date":1543521487,"post_id":53546545,"comment_id":93959857,"body_markdown":"Can you provide more detailed log (stacktrace)?","body":"Can you provide more detailed log (stacktrace)?"},{"owner":{"account_id":13974232,"reputation":260,"user_id":10091982,"display_name":"Hunteerq"},"score":0,"creation_date":1543521643,"post_id":53546545,"comment_id":93959928,"body_markdown":"I think it&#39;s a problem that it&#39;s different Transfer class, package is different from __TypeId__, but I don&#39;t know the solution","body":"I think it&#39;s a problem that it&#39;s different Transfer class, package is different from <b>TypeId</b>, but I don&#39;t know the solution"},{"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1543524022,"post_id":53546545,"comment_id":93961028,"body_markdown":"You have to set up the type mapping in the receiving `jackson2JsonMessageConverter`&#39;s type mapper to map to a different class. Alternatively, the framework will infer the type from the parameter if you use `public void listen(Transfer transfer)` if you wire the converter into the listener container factory. If it&#39;s a Boot app, that will happen automatically.","body":"You have to set up the type mapping in the receiving <code>jackson2JsonMessageConverter</code>&#39;s type mapper to map to a different class. Alternatively, the framework will infer the type from the parameter if you use <code>public void listen(Transfer transfer)</code> if you wire the converter into the listener container factory. If it&#39;s a Boot app, that will happen automatically."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1543530778,"creation_date":1543524169,"answer_id":53547257,"question_id":53546545,"body_markdown":"You have to set up the type mapping in the receiving `Jackson2JsonMessageConverter`&#39;s type mapper to map to a different class. \r\n\r\nGenerally the sender would map its class to a token, e.g. `transfer` and the receiver will map that to its version of `Transfer`.\r\n\r\nAlternatively, the framework will infer the type from the parameter if you use `public void listen(Transfer transfer)`, and if you wire the converter into the listener container factory. \r\n\r\nIf it&#39;s a Spring Boot application, that wiring will happen automatically. ","title":"Can&#39;t convert Message object from RabbitMQ to java class","body":"<p>You have to set up the type mapping in the receiving <code>Jackson2JsonMessageConverter</code>'s type mapper to map to a different class. </p>\n\n<p>Generally the sender would map its class to a token, e.g. <code>transfer</code> and the receiver will map that to its version of <code>Transfer</code>.</p>\n\n<p>Alternatively, the framework will infer the type from the parameter if you use <code>public void listen(Transfer transfer)</code>, and if you wire the converter into the listener container factory. </p>\n\n<p>If it's a Spring Boot application, that wiring will happen automatically. </p>\n"},{"tags":[],"owner":{"account_id":15397479,"reputation":993,"user_id":11214377,"display_name":"Andrew Mititi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644677788,"creation_date":1644677788,"answer_id":71092962,"question_id":53546545,"body_markdown":"I had this issue and when i tried using custom message converters, some would throw errors while trying to resolve to the class specified on the header by the spring producer. I ended up converting the object class to a json string using `ObjectMapper` class.\r\n\r\nOne thing i would like to point is that, doing that will send the content to rabbit MQ as a stringified `JSON`. So you can receive it on the consumer class as a string, map it to another custom class using `objectMapper.read(stringType, mappedToClass)`.\r\n\r\nAnother advantage i have gotten is that i can directly read it in other consumers written in `python` or `nodejs`\r\n\r\nIn summary\r\nIn springboot when sending,  \r\n `rabbitTemplate.convertAndSend(exchange, key, objectMapper.writeValueAsString())`.\r\n\r\nIn springboot consumer when reading to a custom object that does not have to\r\nmatch the consumer object.   \r\n`CustomObj obj = objectMapper.read(incomingString, CustomObj.class)`.\r\n\r\n&gt; A point to note is that, make sure to `ignoreUnknown` fields in the custom object class, ","title":"Can&#39;t convert Message object from RabbitMQ to java class","body":"<p>I had this issue and when i tried using custom message converters, some would throw errors while trying to resolve to the class specified on the header by the spring producer. I ended up converting the object class to a json string using <code>ObjectMapper</code> class.</p>\n<p>One thing i would like to point is that, doing that will send the content to rabbit MQ as a stringified <code>JSON</code>. So you can receive it on the consumer class as a string, map it to another custom class using <code>objectMapper.read(stringType, mappedToClass)</code>.</p>\n<p>Another advantage i have gotten is that i can directly read it in other consumers written in <code>python</code> or <code>nodejs</code></p>\n<p>In summary\nIn springboot when sending,<br />\n<code>rabbitTemplate.convertAndSend(exchange, key, objectMapper.writeValueAsString())</code>.</p>\n<p>In springboot consumer when reading to a custom object that does not have to\nmatch the consumer object.<br />\n<code>CustomObj obj = objectMapper.read(incomingString, CustomObj.class)</code>.</p>\n<blockquote>\n<p>A point to note is that, make sure to <code>ignoreUnknown</code> fields in the custom object class,</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2407473,"reputation":1449,"user_id":2103515,"accept_rate":0,"display_name":"Thang Le"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661529230,"creation_date":1661526635,"answer_id":73503145,"question_id":53546545,"body_markdown":"You need to set message converter for both **producer and consumer**. So when producer sends your object, it will auto convert the object to Json and when consumer receives your Json message, it will auto convert the Json message to original object.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n       // 1. producer converter config\r\n\r\n       @Bean(&quot;Jackson2JsonMessageConverter&quot;)\r\n          Jackson2JsonMessageConverter jackson2JsonMessageConverter() {\r\n             return new Jackson2JsonMessageConverter();\r\n        }\r\n\r\n        @Bean\r\n        public RabbitTemplate rabbitTemplate(final ConnectionFactory connectionFactory, Jackson2JsonMessageConverter jackson2JsonMessageConverter) {\r\n            final RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\r\n            rabbitTemplate.setMessageConverter(jackson2JsonMessageConverter);\r\n            return rabbitTemplate;\r\n        }\r\n\r\n// 2. consumer converter config\r\n\r\n@RabbitListener(queues = RabbitMQConfig.queueName, messageConverter = &quot;Jackson2JsonMessageConverter&quot;)\r\n    public void receiveMessage(Object message) {\r\n        if (message instanceof Object) {\r\n            LOG.info(&quot;receiveMessage&quot; + message.toString());\r\n        }\r\n    }\r\n\r\n\r\n// 3. send message which is an Java Object\r\n\r\nrabbitTemplate.convertAndSend(&quot;topicExchangeName&quot;, &quot;routing.key.test&quot;, Object);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nPOM:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n      &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-json&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n**Full example:**\r\n[gs-messaging-rabbitmq][1]\r\n\r\n\r\n  [1]: https://github.com/letrthang/gs-messaging-rabbitmq/tree/main/advance","title":"Can&#39;t convert Message object from RabbitMQ to java class","body":"<p>You need to set message converter for both <strong>producer and consumer</strong>. So when producer sends your object, it will auto convert the object to Json and when consumer receives your Json message, it will auto convert the Json message to original object.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>   // 1. producer converter config\n\n   @Bean(\"Jackson2JsonMessageConverter\")\n      Jackson2JsonMessageConverter jackson2JsonMessageConverter() {\n         return new Jackson2JsonMessageConverter();\n    }\n\n    @Bean\n    public RabbitTemplate rabbitTemplate(final ConnectionFactory connectionFactory, Jackson2JsonMessageConverter jackson2JsonMessageConverter) {\n        final RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\n        rabbitTemplate.setMessageConverter(jackson2JsonMessageConverter);\n        return rabbitTemplate;\n    }\n\n// 2. consumer converter config\n\n@RabbitListener(queues = RabbitMQConfig.queueName, messageConverter = \"Jackson2JsonMessageConverter\")\npublic void receiveMessage(Object message) {\n    if (message instanceof Object) {\n        LOG.info(\"receiveMessage\" + message.toString());\n    }\n}\n\n\n// 3. send message which is an Java Object\n\nrabbitTemplate.convertAndSend(\"topicExchangeName\", \"routing.key.test\", Object);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>POM:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-json&lt;/artifactId&gt;\n    &lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><strong>Full example:</strong>\n<a href=\"https://github.com/letrthang/gs-messaging-rabbitmq/tree/main/advance\" rel=\"nofollow noreferrer\">gs-messaging-rabbitmq</a></p>\n"}],"owner":{"account_id":13974232,"reputation":260,"user_id":10091982,"display_name":"Hunteerq"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11003,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":53547257,"answer_count":3,"score":4,"last_activity_date":1661529230,"creation_date":1543521030,"question_id":53546545,"body_markdown":"I created my RabbitListener to get messages from RabbitMQ queue. \r\n\r\nMy rabbitMQ message:\r\n     \r\n    Properties \t\r\n    priority:\t0\r\n    delivery_mode:\t2\r\n    headers:\t\r\n    __TypeId__:\tcom.kmb.bank.models.Transfer\r\n    content_encoding:\tUTF-8\r\n    content_type:\tapplication/json\r\n    Payload\r\n    356 bytes\r\n    Encoding: string\r\n\t\r\n\r\n    {&quot;userAccountNumber&quot;:&quot;1111444422221111&quot;,&quot;title&quot;:&quot;123&quot;,&quot;recipientName&quot;:&quot;123&quot;,&quot;recipientAccountNumber&quot;:&quot;1234123412341234&quot;,&quot;amount&quot;:123.0,&quot;localDateTime&quot;:{&quot;nano&quot;:526106200,&quot;year&quot;:2018,&quot;monthValue&quot;:11,&quot;dayOfMonth&quot;:29,&quot;hour&quot;:20,&quot;minute&quot;:43,&quot;second&quot;:0,&quot;month&quot;:&quot;NOVEMBER&quot;,&quot;dayOfWeek&quot;:&quot;THURSDAY&quot;,&quot;dayOfYear&quot;:333,&quot;chronology&quot;:{&quot;id&quot;:&quot;ISO&quot;,&quot;calendarType&quot;:&quot;iso8601&quot;}}}\r\n\r\nMy Listener method:\r\n\r\n    @Autowired\r\n    private Jackson2JsonMessageConverter jackson2JsonMessageConverter;\r\n\r\n    @RabbitListener(queues = &quot;kolejka&quot;)\r\n    public void listen(Message message) {\r\n        try {\r\n            Transfer transfer = (Transfer) jackson2JsonMessageConverter.fromMessage(message);\r\n            log.info(transfer);\r\n        } catch (Exception e) {\r\n            log.debug(&quot;Error thrown while listening + &quot; + e.getMessage());\r\n        }\r\n\r\n    }\r\n\r\nBean config:\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        return new ObjectMapper();\r\n    }\r\n\r\n    @Bean\r\n    public Jackson2JsonMessageConverter jackson2JsonMessageConverter() {\r\n        return new Jackson2JsonMessageConverter(objectMapper());\r\n    }\r\n\r\nAnd Transfer class:\r\n\r\n    package com.kmb.transactionlogger.models;\r\n\r\n    @AllArgsConstructor\r\n    public class Transfer {\r\n        @Getter @Setter\r\n        private String userAccountNumber;\r\n        @Getter @Setter\r\n        private String title;\r\n        @Getter @Setter\r\n        private String recipientName;\r\n        @Getter @Setter\r\n        private String recipientAccountNumber;\r\n        @Getter @Setter\r\n        private double amount;\r\n        @Getter @Setter\r\n        private LocalDateTime localDateTime;\r\n    \r\n    }\r\n\r\nUnfortunately the exception is being thrown while converting from Message to Transfer transfer object.\r\n\r\n    Caused by: org.springframework.amqp.support.converter.MessageConversionException: failed to resolve class name. Class not found [com.kmb.bank.models.Transfer]\r\n    2018-11-29 20:47:01.615  WARN 13688 --- [cTaskExecutor-1] ingErrorHandler$DefaultExceptionStrategy : Fatal message conversion error; message rejected; it will be dropped or routed to a dead letter exchange, if so configured: (Body:&#39;{&quot;userAccountNumber&quot;:&quot;1111444422221111&quot;,&quot;title&quot;:&quot;123&quot;,&quot;recipientName&quot;:&quot;123&quot;,&quot;recipientAccountNumber&quot;:&quot;1234123412341234&quot;,&quot;amount&quot;:123.0,&quot;localDateTime&quot;:{&quot;nano&quot;:599669800,&quot;year&quot;:2018,&quot;monthValue&quot;:11,&quot;dayOfMonth&quot;:29,&quot;hour&quot;:20,&quot;minute&quot;:47,&quot;second&quot;:1,&quot;month&quot;:&quot;NOVEMBER&quot;,&quot;dayOfWeek&quot;:&quot;THURSDAY&quot;,&quot;dayOfYear&quot;:333,&quot;chronology&quot;:{&quot;id&quot;:&quot;ISO&quot;,&quot;calendarType&quot;:&quot;iso8601&quot;}}}&#39; MessageProperties [headers={__TypeId__=com.kmb.bank.models.Transfer}, contentType=application/json, contentEncoding=UTF-8, contentLength=0, receivedDeliveryMode=PERSISTENT, priority=0, redelivered=false, receivedExchange=bank, receivedRoutingKey=, deliveryTag=2, consumerTag=amq.ctag-sLNqW-_WhDWLWJk6MCQcjg, consumerQueue=kolejka])\r\n\r\n\r\nWhole message log:\r\nhttps://pastebin.com/raw/47Lq7dYD","title":"Can&#39;t convert Message object from RabbitMQ to java class","body":"<p>I created my RabbitListener to get messages from RabbitMQ queue. </p>\n\n<p>My rabbitMQ message:</p>\n\n<pre><code>Properties  \npriority:   0\ndelivery_mode:  2\nheaders:    \n__TypeId__: com.kmb.bank.models.Transfer\ncontent_encoding:   UTF-8\ncontent_type:   application/json\nPayload\n356 bytes\nEncoding: string\n\n\n{\"userAccountNumber\":\"1111444422221111\",\"title\":\"123\",\"recipientName\":\"123\",\"recipientAccountNumber\":\"1234123412341234\",\"amount\":123.0,\"localDateTime\":{\"nano\":526106200,\"year\":2018,\"monthValue\":11,\"dayOfMonth\":29,\"hour\":20,\"minute\":43,\"second\":0,\"month\":\"NOVEMBER\",\"dayOfWeek\":\"THURSDAY\",\"dayOfYear\":333,\"chronology\":{\"id\":\"ISO\",\"calendarType\":\"iso8601\"}}}\n</code></pre>\n\n<p>My Listener method:</p>\n\n<pre><code>@Autowired\nprivate Jackson2JsonMessageConverter jackson2JsonMessageConverter;\n\n@RabbitListener(queues = \"kolejka\")\npublic void listen(Message message) {\n    try {\n        Transfer transfer = (Transfer) jackson2JsonMessageConverter.fromMessage(message);\n        log.info(transfer);\n    } catch (Exception e) {\n        log.debug(\"Error thrown while listening + \" + e.getMessage());\n    }\n\n}\n</code></pre>\n\n<p>Bean config:\n    @Bean\n    public ObjectMapper objectMapper() {\n        return new ObjectMapper();\n    }</p>\n\n<pre><code>@Bean\npublic Jackson2JsonMessageConverter jackson2JsonMessageConverter() {\n    return new Jackson2JsonMessageConverter(objectMapper());\n}\n</code></pre>\n\n<p>And Transfer class:</p>\n\n<pre><code>package com.kmb.transactionlogger.models;\n\n@AllArgsConstructor\npublic class Transfer {\n    @Getter @Setter\n    private String userAccountNumber;\n    @Getter @Setter\n    private String title;\n    @Getter @Setter\n    private String recipientName;\n    @Getter @Setter\n    private String recipientAccountNumber;\n    @Getter @Setter\n    private double amount;\n    @Getter @Setter\n    private LocalDateTime localDateTime;\n\n}\n</code></pre>\n\n<p>Unfortunately the exception is being thrown while converting from Message to Transfer transfer object.</p>\n\n<pre><code>Caused by: org.springframework.amqp.support.converter.MessageConversionException: failed to resolve class name. Class not found [com.kmb.bank.models.Transfer]\n2018-11-29 20:47:01.615  WARN 13688 --- [cTaskExecutor-1] ingErrorHandler$DefaultExceptionStrategy : Fatal message conversion error; message rejected; it will be dropped or routed to a dead letter exchange, if so configured: (Body:'{\"userAccountNumber\":\"1111444422221111\",\"title\":\"123\",\"recipientName\":\"123\",\"recipientAccountNumber\":\"1234123412341234\",\"amount\":123.0,\"localDateTime\":{\"nano\":599669800,\"year\":2018,\"monthValue\":11,\"dayOfMonth\":29,\"hour\":20,\"minute\":47,\"second\":1,\"month\":\"NOVEMBER\",\"dayOfWeek\":\"THURSDAY\",\"dayOfYear\":333,\"chronology\":{\"id\":\"ISO\",\"calendarType\":\"iso8601\"}}}' MessageProperties [headers={__TypeId__=com.kmb.bank.models.Transfer}, contentType=application/json, contentEncoding=UTF-8, contentLength=0, receivedDeliveryMode=PERSISTENT, priority=0, redelivered=false, receivedExchange=bank, receivedRoutingKey=, deliveryTag=2, consumerTag=amq.ctag-sLNqW-_WhDWLWJk6MCQcjg, consumerQueue=kolejka])\n</code></pre>\n\n<p>Whole message log:\n<a href=\"https://pastebin.com/raw/47Lq7dYD\" rel=\"nofollow noreferrer\">https://pastebin.com/raw/47Lq7dYD</a></p>\n"},{"tags":["java","serial-port","gsm","at-command","sms-gateway"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1659790043,"post_id":73259107,"comment_id":129381250,"body_markdown":"fyi I send texts through my phone using termux, having connected to it over ssh. Using termux-sms-send is tons easier than what you&#39;re doing","body":"fyi I send texts through my phone using termux, having connected to it over ssh. Using termux-sms-send is tons easier than what you&#39;re doing"},{"owner":{"account_id":25342239,"reputation":3,"user_id":19160485,"display_name":"LaRb"},"score":0,"creation_date":1659949414,"post_id":73259107,"comment_id":129407911,"body_markdown":"I can&#39;t use Termux because it&#39;s an Android terminal emulator and Linux environment app, and, in my case, i&#39;m building a desktop application and my laptop is running windows 11. Do you have any other suggestion ?","body":"I can&#39;t use Termux because it&#39;s an Android terminal emulator and Linux environment app, and, in my case, i&#39;m building a desktop application and my laptop is running windows 11. Do you have any other suggestion ?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1659959566,"post_id":73259107,"comment_id":129411403,"body_markdown":"I don&#39;t really understand your comments. The only way in which they would be valid is if in some way the Android wasn&#39;t real and you couldn&#39;t install anything on it. I do it in the way I mentioned precisely *so* I can send &#39;free&#39; text messages from my desktop. But the answer to your comment question is no. AT commands are legacy stuff and not the way forward","body":"I don&#39;t really understand your comments. The only way in which they would be valid is if in some way the Android wasn&#39;t real and you couldn&#39;t install anything on it. I do it in the way I mentioned precisely <i>so</i> I can send &#39;free&#39; text messages from my desktop. But the answer to your comment question is no. AT commands are legacy stuff and not the way forward"},{"owner":{"account_id":11881,"reputation":26887,"user_id":23118,"accept_rate":75,"display_name":"hlovdal"},"score":0,"creation_date":1659995006,"post_id":73259107,"comment_id":129423894,"body_markdown":"Do you want your code to work reliably? If so you **MUST** immediately stop using `Thread.sleep` like that. Like the very first code change you do after reading this comment and [this answer](https://stackoverflow.com/a/46064206/23118).","body":"Do you want your code to work reliably? If so you <b>MUST</b> immediately stop using <code>Thread.sleep</code> like that. Like the very first code change you do after reading this comment and <a href=\"https://stackoverflow.com/a/46064206/23118\">this answer</a>."}],"owner":{"account_id":25342239,"reputation":3,"user_id":19160485,"display_name":"LaRb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":397,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661529098,"creation_date":1659782940,"question_id":73259107,"body_markdown":"I&#39;m trying to send SMS using AT commands, through connected mobile cell phone with USB port. It can connect with the port but doesn&#39;t send any message.\r\n\r\nThis is a part of the Java code:\r\n    \r\n```java\r\npublic void sendMessage(String phoneNumber, String message) {\r\n    char quotes =&#39;&quot;&#39;;  \r\n    send(&quot;AT+CMGS=&quot;+quotes + phoneNumber +quotes+ &quot;\\r\\n&quot;);\r\n    try {\r\n        Thread.sleep(2000);\r\n    } catch (InterruptedException e) {\r\n        e.printStackTrace();\r\n    }\r\n    \r\n    send(message + &#39;\\032&#39;);\r\n    System.out.println(&quot;Message Sent&quot;);\r\n}\r\n\r\npublic static void main(String args[]) {\r\n    GSMConnect gsm = new GSMConnect(comPort);\r\n    if (gsm.init()) {\r\n        try {\r\n            System.out.println(&quot;Initialization Success&quot;);\r\n            gsm.connect();\r\n            Thread.sleep(5000);\r\n            gsm.checkStatus();\r\n            Thread.sleep(5000);\r\n\r\n            gsm.sendMessage(&quot;+xxxxxxxxxxxx&quot;, &quot;Trial Success&quot;);\r\n\r\n            Thread.sleep(1000);\r\n\r\n            gsm.hangup();\r\n            Thread.sleep(1000);\r\n            gsm.closePort();\r\n            gsm.outCommand();\r\n            System.exit(1);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    } else {\r\n        System.out.println(&quot;Can&#39;t init this card&quot;);\r\n    }\r\n}\r\n```\r\n\r\nAnd here is the output I get when I run the program:\r\n\r\n\r\n```none\r\nGot PortName\r\nInitialization Success\r\nCOM3: PORT_OWNED\r\n6\r\nOK\r\n40\r\n+CME Error:PACM(AP),UNREGISTED\r\n\r\nOK\r\nMessage Sent\r\n58AT+CMGS=&quot;+xxxxxxxxxxxx&quot;\r\n\r\n+CME ERROR: 614\r\nTrial Success24ATH\r\n\r\n+CME ERROR: 614\r\nCOM3: PORT_UNOWNED\r\n\r\nC:\\Users\\Dell PC\\AppData\\Local\\NetBeans\\Cache\\14\\executor-snippets\\run.xml:111: The following error occurred while executing this line:\r\nC:\\Users\\Dell PC\\AppData\\Local\\NetBeans\\Cache\\14\\executor-snippets\\run.xml:94: Java returned: 1\r\nBUILD FAILED (total time: 14 seconds)\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"Getting error when trying to send SMS with AT commands in Java","body":"<p>I'm trying to send SMS using AT commands, through connected mobile cell phone with USB port. It can connect with the port but doesn't send any message.</p>\n<p>This is a part of the Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void sendMessage(String phoneNumber, String message) {\n    char quotes ='&quot;';  \n    send(&quot;AT+CMGS=&quot;+quotes + phoneNumber +quotes+ &quot;\\r\\n&quot;);\n    try {\n        Thread.sleep(2000);\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n    \n    send(message + '\\032');\n    System.out.println(&quot;Message Sent&quot;);\n}\n\npublic static void main(String args[]) {\n    GSMConnect gsm = new GSMConnect(comPort);\n    if (gsm.init()) {\n        try {\n            System.out.println(&quot;Initialization Success&quot;);\n            gsm.connect();\n            Thread.sleep(5000);\n            gsm.checkStatus();\n            Thread.sleep(5000);\n\n            gsm.sendMessage(&quot;+xxxxxxxxxxxx&quot;, &quot;Trial Success&quot;);\n\n            Thread.sleep(1000);\n\n            gsm.hangup();\n            Thread.sleep(1000);\n            gsm.closePort();\n            gsm.outCommand();\n            System.exit(1);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    } else {\n        System.out.println(&quot;Can't init this card&quot;);\n    }\n}\n</code></pre>\n<p>And here is the output I get when I run the program:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Got PortName\nInitialization Success\nCOM3: PORT_OWNED\n6\nOK\n40\n+CME Error:PACM(AP),UNREGISTED\n\nOK\nMessage Sent\n58AT+CMGS=&quot;+xxxxxxxxxxxx&quot;\n\n+CME ERROR: 614\nTrial Success24ATH\n\n+CME ERROR: 614\nCOM3: PORT_UNOWNED\n\nC:\\Users\\Dell PC\\AppData\\Local\\NetBeans\\Cache\\14\\executor-snippets\\run.xml:111: The following error occurred while executing this line:\nC:\\Users\\Dell PC\\AppData\\Local\\NetBeans\\Cache\\14\\executor-snippets\\run.xml:94: Java returned: 1\nBUILD FAILED (total time: 14 seconds)\n</code></pre>\n"},{"tags":["java","objectoutputstream"],"answers":[{"tags":[],"owner":{"account_id":1026356,"reputation":461,"user_id":1035582,"accept_rate":79,"display_name":"cworner1"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1661528927,"creation_date":1661431510,"answer_id":73487749,"question_id":73475985,"body_markdown":"After 2 weeks of debugging and researching, this explained the problem.\r\n\r\n[Answered in a separate thread][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/12341193/1035582","title":"Differences within Network Serialization","body":"<p>After 2 weeks of debugging and researching, this explained the problem.</p>\n<p><a href=\"https://stackoverflow.com/a/12341193/1035582\">Answered in a separate thread</a></p>\n"}],"owner":{"account_id":1026356,"reputation":461,"user_id":1035582,"accept_rate":79,"display_name":"cworner1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1661531835,"answer_count":1,"score":0,"last_activity_date":1661528927,"creation_date":1661355365,"question_id":73475985,"body_markdown":"I&#39;m writing a server-client application. It&#39;s a 2 week work schedule. The snapshot below is the client GUI with a fictitious dataset.\r\n\r\n[![MHSCalendarAdmin][1]][1]\r\n\r\nPressing the apply button submits the calendar contents to the server via the following code:\r\n\r\n        public boolean saveToFile() {\r\n            try {\r\n                // serialTableData is class variable of type: ArrayList&lt;MHSCalendarEntry&gt;\r\n                // tableData is a class variable of type: ObserverableList&lt;MHSCalendarEntry&gt;\r\n\r\n                serialTableData = new ArrayList&lt;&gt;(tableData);                                              \r\n            \r\n                System.out.println(&quot;Sending calendar:\\n&quot; + MHSCalendarEntry.toString(serialTableData));\r\n\r\n                heartbeatProxy.writeObject(serialTableData);\r\n                return true;\r\n            }\r\n            catch (IOException ex) {\r\n                alert();\r\n                return false;\r\n            }        \r\n        }    \r\n\r\n&lt;b&gt;Debugging&lt;/b&gt;&lt;p&gt;\r\nI&#39;ve got a print statement on the client side before sending data (as seen in the above code) and print statement on the server after receiving data.\r\n\r\n&lt;b&gt;The problem:&lt;/b&gt;&lt;p&gt;\r\nWhen I click apply for the first time everything works correctly:\r\n- Print statement shows correctly in the client before sending&lt;p&gt;\r\n[![Client, attempt 1][2]][2]\r\n\r\n- Server receives the correct dataset&lt;p&gt;\r\n[![Server, attempt 1][3]][3]\r\n\r\nAny amendments thereafter don&#39;t transfer:\r\n\r\n[![MHSCalendarAdmin2][4]][4]\r\n\r\n&lt;b&gt;Client print statement&lt;/b&gt;&lt;p&gt;\r\n[![Client Attempt 2][5]][5]\r\n\r\n&lt;b&gt;Server print statement&lt;/b&gt;&lt;p&gt;\r\n[![Server Attempt 2][6]][6]\r\n\r\n\r\n&lt;b&gt;What I&#39;ve tried:&lt;/b&gt;\r\n\r\nI rewrote the client side to isolate the problem, this code bypasses the `serialTableData` and `tableData` variables and also simulates multiple dataset entries by using `Thread.sleep()` :\r\n\r\n    \r\n    package Admin.GUI;\r\n\r\n    import com.cworner.mhscalendar.calendarentry.MHSCalendarEntry;\r\n    import java.io.IOException;\r\n    import java.io.ObjectInputStream;\r\n    import java.io.ObjectOutputStream;\r\n    import java.net.Socket;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n\r\n    /**\r\n     *\r\n     * @author Chris\r\n     */\r\n    public class AdminTest {\r\n\r\n        private ArrayList&lt;MHSCalendarEntry&gt; mhs;\r\n        ObjectInputStream input;\r\n        ObjectOutputStream output;    \r\n        Socket socket;\r\n\r\n        public AdminTest() {\r\n\r\n            try {\r\n                socket = new Socket(&quot;localhost&quot;, 8000);\r\n\r\n                output = new ObjectOutputStream(socket.getOutputStream());\r\n                input = new ObjectInputStream(socket.getInputStream());\r\n\r\n                System.out.println(&quot;Blank calendar recieved&quot;);\r\n                mhs = (ArrayList&lt;MHSCalendarEntry&gt;)input.readObject();\r\n\r\n                System.out.println(&quot;Calendar:\\n&quot; + MHSCalendarEntry.toString(mhs));            \r\n\r\n                System.out.println(&quot;Sending 1st calendar&quot;);\r\n                mhs = new ArrayList&lt;&gt; (Arrays.asList(\r\n                new MHSCalendarEntry(&quot;&quot;, &quot;1&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;2&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;3&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),           \r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),\r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)));\r\n\r\n                System.out.println(&quot;Calendar:\\n&quot; + MHSCalendarEntry.toString(mhs));  \r\n                output.writeObject(mhs);\r\n\r\n                Thread.sleep(1000 * 10);\r\n\r\n                System.out.println(&quot;Sending 2nd calendar&quot;);\r\n                mhs = new ArrayList&lt;&gt; (Arrays.asList(\r\n                new MHSCalendarEntry(&quot;&quot;, &quot;1&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;2&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;3&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;4&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),           \r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;5&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),\r\n                new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)));            \r\n\r\n                System.out.println(&quot;Calendar:\\n&quot; + MHSCalendarEntry.toString(mhs));  \r\n                output.writeObject(mhs);\r\n            }\r\n            catch(IOException | ClassNotFoundException | InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            AdminTest test = new AdminTest();\r\n        }\r\n\r\n    }\r\n\r\n&lt;b&gt;This worked&lt;/b&gt;. Which suggests the problem lies with the variables like they&#39;re not being updated. But the print statement contradicts this by showing the variables are up to date before sending them to the server.\r\n\r\n  [1]: https://i.stack.imgur.com/y5XP3.png\r\n  [2]: https://i.stack.imgur.com/vzhoH.png\r\n  [3]: https://i.stack.imgur.com/dHqcA.png\r\n  [4]: https://i.stack.imgur.com/5sAei.png\r\n  [5]: https://i.stack.imgur.com/NRffs.png\r\n  [6]: https://i.stack.imgur.com/rq87A.png","title":"Differences within Network Serialization","body":"<p>I'm writing a server-client application. It's a 2 week work schedule. The snapshot below is the client GUI with a fictitious dataset.</p>\n<p><a href=\"https://i.stack.imgur.com/y5XP3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y5XP3.png\" alt=\"MHSCalendarAdmin\" /></a></p>\n<p>Pressing the apply button submits the calendar contents to the server via the following code:</p>\n<pre><code>    public boolean saveToFile() {\n        try {\n            // serialTableData is class variable of type: ArrayList&lt;MHSCalendarEntry&gt;\n            // tableData is a class variable of type: ObserverableList&lt;MHSCalendarEntry&gt;\n\n            serialTableData = new ArrayList&lt;&gt;(tableData);                                              \n        \n            System.out.println(&quot;Sending calendar:\\n&quot; + MHSCalendarEntry.toString(serialTableData));\n\n            heartbeatProxy.writeObject(serialTableData);\n            return true;\n        }\n        catch (IOException ex) {\n            alert();\n            return false;\n        }        \n    }    \n</code></pre>\n<p><b>Debugging</b><p>\nI've got a print statement on the client side before sending data (as seen in the above code) and print statement on the server after receiving data.</p>\n<p><b>The problem:</b><p>\nWhen I click apply for the first time everything works correctly:</p>\n<ul>\n<li><p>Print statement shows correctly in the client before sending<p>\n<a href=\"https://i.stack.imgur.com/vzhoH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vzhoH.png\" alt=\"Client, attempt 1\" /></a></p>\n</li>\n<li><p>Server receives the correct dataset<p>\n<a href=\"https://i.stack.imgur.com/dHqcA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dHqcA.png\" alt=\"Server, attempt 1\" /></a></p>\n</li>\n</ul>\n<p>Any amendments thereafter don't transfer:</p>\n<p><a href=\"https://i.stack.imgur.com/5sAei.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5sAei.png\" alt=\"MHSCalendarAdmin2\" /></a></p>\n<p><b>Client print statement</b><p>\n<a href=\"https://i.stack.imgur.com/NRffs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NRffs.png\" alt=\"Client Attempt 2\" /></a></p>\n<p><b>Server print statement</b><p>\n<a href=\"https://i.stack.imgur.com/rq87A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rq87A.png\" alt=\"Server Attempt 2\" /></a></p>\n<p><b>What I've tried:</b></p>\n<p>I rewrote the client side to isolate the problem, this code bypasses the <code>serialTableData</code> and <code>tableData</code> variables and also simulates multiple dataset entries by using <code>Thread.sleep()</code> :</p>\n<pre><code>package Admin.GUI;\n\nimport com.cworner.mhscalendar.calendarentry.MHSCalendarEntry;\nimport java.io.IOException;\nimport java.io.ObjectInputStream;\nimport java.io.ObjectOutputStream;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.Arrays;\n\n/**\n *\n * @author Chris\n */\npublic class AdminTest {\n\n    private ArrayList&lt;MHSCalendarEntry&gt; mhs;\n    ObjectInputStream input;\n    ObjectOutputStream output;    \n    Socket socket;\n\n    public AdminTest() {\n\n        try {\n            socket = new Socket(&quot;localhost&quot;, 8000);\n\n            output = new ObjectOutputStream(socket.getOutputStream());\n            input = new ObjectInputStream(socket.getInputStream());\n\n            System.out.println(&quot;Blank calendar recieved&quot;);\n            mhs = (ArrayList&lt;MHSCalendarEntry&gt;)input.readObject();\n\n            System.out.println(&quot;Calendar:\\n&quot; + MHSCalendarEntry.toString(mhs));            \n\n            System.out.println(&quot;Sending 1st calendar&quot;);\n            mhs = new ArrayList&lt;&gt; (Arrays.asList(\n            new MHSCalendarEntry(&quot;&quot;, &quot;1&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;2&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;3&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),           \n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),\n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)));\n\n            System.out.println(&quot;Calendar:\\n&quot; + MHSCalendarEntry.toString(mhs));  \n            output.writeObject(mhs);\n\n            Thread.sleep(1000 * 10);\n\n            System.out.println(&quot;Sending 2nd calendar&quot;);\n            mhs = new ArrayList&lt;&gt; (Arrays.asList(\n            new MHSCalendarEntry(&quot;&quot;, &quot;1&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;2&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;3&quot;, &quot;&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),                \n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;4&quot; ,&quot;&quot; , &quot;#&quot;,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),           \n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;5&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;),\n            new MHSCalendarEntry(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ,&quot;&quot;, &quot;#&quot; ,&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)));            \n\n            System.out.println(&quot;Calendar:\\n&quot; + MHSCalendarEntry.toString(mhs));  \n            output.writeObject(mhs);\n        }\n        catch(IOException | ClassNotFoundException | InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args) {\n        AdminTest test = new AdminTest();\n    }\n\n}\n</code></pre>\n<p><b>This worked</b>. Which suggests the problem lies with the variables like they're not being updated. But the print statement contradicts this by showing the variables are up to date before sending them to the server.</p>\n"},{"tags":["java","android","flutter","dart","gradle"],"comments":[{"owner":{"account_id":12438275,"reputation":1057,"user_id":9057721,"display_name":"Style-7"},"score":0,"creation_date":1661540467,"post_id":73502450,"comment_id":129804991,"body_markdown":"try to remove dependency line by line, and why you use signingConfig from debug? enable &#39;InvalidPackage&#39;, jcenter() is not working now","body":"try to remove dependency line by line, and why you use signingConfig from debug? enable &#39;InvalidPackage&#39;, jcenter() is not working now"},{"owner":{"account_id":16577283,"reputation":1,"user_id":11978777,"display_name":"Kelvin Gitu"},"score":0,"creation_date":1663461313,"post_id":73502450,"comment_id":130245297,"body_markdown":"Check out this answer. Hope it helps: https://stackoverflow.com/a/53023651","body":"Check out this answer. Hope it helps: <a href=\"https://stackoverflow.com/a/53023651\">stackoverflow.com/a/53023651</a>"}],"owner":{"account_id":26054611,"reputation":335,"user_id":19757192,"display_name":"Praveesh Ramroop"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7683,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661528778,"creation_date":1661523535,"question_id":73502450,"body_markdown":"I get this error when building the app. I don&#39;t even know what the issue is. I&#39;ll post the the full error message and the code where the issue should be.\r\n\r\n    * Where:\r\nScript &#39;C:\\Users\\DELL\\Downloads\\flutter_windows_2.10.2-stable\\flutter\\packages\\flutter_tools\\gradle\\flutter.gradle&#39; line: 73\r\n\r\n* What went wrong:\r\nA problem occurred evaluating script.\r\n&gt; Could not find method android() for arguments [flutter_3xtlcf8y4k96s78jza8a827pu$_run_closure1@50ef998a] on project &#39;:app&#39; of type org.gradle.api.Project.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n\r\nHere below you&#39;ll find the flutter.gradle file line 73 where the error supposed to be.\r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        /* When bumping, also update ndkVersion above. */\r\n        classpath &#39;com.android.tools.build:gradle:7.0.4&#39;\r\n    }\r\n}\r\n\r\n\r\nandroid {\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n```\r\n\r\nLine 73 starts with `android {`\r\n\r\nThe android/build.gradle: \r\n\r\n    buildscript {\r\n    ext.kotlin_version = &#39;1.6.20&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        jcenter()\r\n    }\r\n\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.0.4&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n        classpath &#39;com.google.gms:google-services:4.3.8&#39;\r\n    }\r\n}\r\n\r\n    allprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        jcenter()\r\n    }\r\n}\r\n\r\n    \r\nThe app/build.gradle: \r\n\r\n   \r\n\r\n    apply plugin: &#39;kotlin-android&#39;\r\n    apply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n\r\n    apply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\n\r\n    android {\r\n    compileSdkVersion 32\r\n\r\n    sourceSets {\r\n        main.java.srcDirs += &#39;src/main/kotlin&#39;\r\n    }\r\n\r\n    lintOptions {\r\n        disable &#39;InvalidPackage&#39;\r\n    }\r\n\r\n    defaultConfig {\r\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\r\n        applicationId &quot;com.santosenoque.cabdriver&quot;\r\n        minSdkVersion 23\r\n        targetSdkVersion 32\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n        multiDexEnabled true\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            // TODO: Add your own signing config for the release build.\r\n            // Signing with the debug keys for now, so `flutter run --release` works.\r\n            signingConfig signingConfigs.debug\r\n        }\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\n    flutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\n    dependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk11:$kotlin_version&quot;\r\n}\r\n\r\n","title":"Could not find method android() for arguments [] on project &#39;:app&#39; of type org.gradle.api.Project","body":"<p>I get this error when building the app. I don't even know what the issue is. I'll post the the full error message and the code where the issue should be.</p>\n<pre><code>* Where:\n</code></pre>\n<p>Script 'C:\\Users\\DELL\\Downloads\\flutter_windows_2.10.2-stable\\flutter\\packages\\flutter_tools\\gradle\\flutter.gradle' line: 73</p>\n<ul>\n<li>What went wrong:\nA problem occurred evaluating script.</li>\n</ul>\n<blockquote>\n<p>Could not find method android() for arguments [flutter_3xtlcf8y4k96s78jza8a827pu$_run_closure1@50ef998a] on project ':app' of type org.gradle.api.Project.</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.</p>\n</blockquote>\n<p>Here below you'll find the flutter.gradle file line 73 where the error supposed to be.</p>\n<pre><code>buildscript {\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        /* When bumping, also update ndkVersion above. */\n        classpath 'com.android.tools.build:gradle:7.0.4'\n    }\n}\n\n\nandroid {\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n</code></pre>\n<p>Line 73 starts with <code>android {</code></p>\n<p>The android/build.gradle:</p>\n<pre><code>buildscript {\next.kotlin_version = '1.6.20'\nrepositories {\n    google()\n    mavenCentral()\n    jcenter()\n}\n\ndependencies {\n    classpath 'com.android.tools.build:gradle:7.0.4'\n    classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    classpath 'com.google.gms:google-services:4.3.8'\n}\n</code></pre>\n<p>}</p>\n<pre><code>allprojects {\nrepositories {\n    google()\n    mavenCentral()\n    jcenter()\n}\n</code></pre>\n<p>}</p>\n<p>The app/build.gradle:</p>\n<pre><code>apply plugin: 'kotlin-android'\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\n\napply plugin: 'com.android.application'\n\napply plugin: 'com.google.gms.google-services'\n\n\nandroid {\ncompileSdkVersion 32\n\nsourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}\n\nlintOptions {\n    disable 'InvalidPackage'\n}\n\ndefaultConfig {\n    // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\n    applicationId &quot;com.santosenoque.cabdriver&quot;\n    minSdkVersion 23\n    targetSdkVersion 32\n    versionCode flutterVersionCode.toInteger()\n    versionName flutterVersionName\n    multiDexEnabled true\n}\n\nbuildTypes {\n    release {\n        // TODO: Add your own signing config for the release build.\n        // Signing with the debug keys for now, so `flutter run --release` works.\n        signingConfig signingConfigs.debug\n    }\n}\n\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n<p>}</p>\n<pre><code>flutter {\nsource '../..'\n</code></pre>\n<p>}</p>\n<pre><code>dependencies {\nimplementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk11:$kotlin_version&quot;\n</code></pre>\n<p>}</p>\n"},{"tags":["java","class","user-input","bubble-sort","function-call"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1661199228,"post_id":73450512,"comment_id":129710850,"body_markdown":"Are providing data to read? Also `int[] arr = new int[0];` creates array which can&#39;t store anything. You should create that array *after* you know how many numbers you want to store in it.","body":"Are providing data to read? Also <code>int[] arr = new int[0];</code> creates array which can&#39;t store anything. You should create that array <i>after</i> you know how many numbers you want to store in it."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1661200133,"post_id":73450512,"comment_id":129711119,"body_markdown":"Are you getting any errors? If so, please include a copy.  I would expect an Array Index Out of Bounds error.","body":"Are you getting any errors? If so, please include a copy.  I would expect an Array Index Out of Bounds error."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1661200397,"post_id":73450512,"comment_id":129711194,"body_markdown":"One way you can improve your code is to output a prompt for the user when expecting input:  `System.out.print (&quot;How many numbers will you enter? &quot;); n = sc.nextInt();` `System.out.print (&quot;(&quot;+i+&quot;) Enter a number &gt;&quot;); arr[i] = sc.nextint();`","body":"One way you can improve your code is to output a prompt for the user when expecting input:  <code>System.out.print (&quot;How many numbers will you enter? &quot;); n = sc.nextInt();</code> <code>System.out.print (&quot;(&quot;+i+&quot;) Enter a number &gt;&quot;); arr[i] = sc.nextint();</code>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1661440804,"post_id":73450512,"comment_id":129778464,"body_markdown":"See the comment from @Pshemo.  You need to have `int [] arr = new int [n];` _after_ the user enters a valid value for `n`.  `n` specifies the size of the array -- how many elements it will hold. `new int [0];` creates an array that cannot hold any number(s).","body":"See the comment from @Pshemo.  You need to have <code>int [] arr = new int [n];</code> <i>after</i> the user enters a valid value for <code>n</code>.  <code>n</code> specifies the size of the array -- how many elements it will hold. <code>new int [0];</code> creates an array that cannot hold any number(s)."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661201406,"creation_date":1661201406,"answer_id":73450890,"question_id":73450512,"body_markdown":"To better understand the behaviour of such functions I suggest to modify the printing like this:\r\n\r\n    static void print_array(int[] arr) {\r\n        System.out.println(&quot;&quot; + arr.length + &quot;values:&quot;);\r\n        for (int j: arr) {\r\n            System.out.print(j + &quot; &quot;);\r\n        }\r\n    \r\n        System.out.println();\r\n    }","title":"When I am giving user input then the code (bubble sort in Java) is not printing any output","body":"<p>To better understand the behaviour of such functions I suggest to modify the printing like this:</p>\n<pre><code>static void print_array(int[] arr) {\n    System.out.println(&quot;&quot; + arr.length + &quot;values:&quot;);\n    for (int j: arr) {\n        System.out.print(j + &quot; &quot;);\n    }\n\n    System.out.println();\n}\n</code></pre>\n"}],"owner":{"account_id":26132998,"reputation":1,"user_id":19823431,"display_name":"Devil_code_3rd_year"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1661528782,"answer_count":1,"score":0,"last_activity_date":1661528771,"creation_date":1661198975,"question_id":73450512,"body_markdown":"I am new to the Java language. I&#39;m currently trying bubble sort with the concept of functions and user input method. Can anyone help me to solve this particular issue of not getting any output?\r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Bubble {\r\n    public static void bubble_sort(int[] arr) {\r\n        for (int turn = 0; turn &lt; arr.length - 1; turn++) {\r\n            for (int j = 0; j &lt; arr.length - 1 - turn; j++) {\r\n                if (arr[j] &gt; arr[j + 1]) {\r\n                    int temp = arr[j];\r\n                    arr[j] = arr[j + 1];\r\n                    arr[j + 1] = temp;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static void print_array(int[] arr) {\r\n        System.out.println(&quot;&quot; + arr.length + &quot;values:&quot;);\r\n        for (int j: arr) {\r\n            System.out.print(j + &quot; &quot;);\r\n        }\r\n    \r\n        System.out.println();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n\r\n        int[] arr = new int[0];\r\n        int n;\r\n        n = sc.nextInt();\r\n        for (int i = 0; i &lt; n; i++) {\r\n            arr[i] = sc.nextInt();\r\n        }\r\n\r\n        bubble_sort(arr);\r\n        print_array(arr);\r\n    }\r\n}\r\n```\r\n\r\n\r\n![The modified code with error][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HOKkp.png","title":"When I am giving user input then the code (bubble sort in Java) is not printing any output","body":"<p>I am new to the Java language. I'm currently trying bubble sort with the concept of functions and user input method. Can anyone help me to solve this particular issue of not getting any output?</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Bubble {\n    public static void bubble_sort(int[] arr) {\n        for (int turn = 0; turn &lt; arr.length - 1; turn++) {\n            for (int j = 0; j &lt; arr.length - 1 - turn; j++) {\n                if (arr[j] &gt; arr[j + 1]) {\n                    int temp = arr[j];\n                    arr[j] = arr[j + 1];\n                    arr[j + 1] = temp;\n                }\n            }\n        }\n    }\n\n    static void print_array(int[] arr) {\n        System.out.println(&quot;&quot; + arr.length + &quot;values:&quot;);\n        for (int j: arr) {\n            System.out.print(j + &quot; &quot;);\n        }\n    \n        System.out.println();\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        int[] arr = new int[0];\n        int n;\n        n = sc.nextInt();\n        for (int i = 0; i &lt; n; i++) {\n            arr[i] = sc.nextInt();\n        }\n\n        bubble_sort(arr);\n        print_array(arr);\n    }\n}\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/HOKkp.png\" alt=\"The modified code with error\" /></p>\n"},{"tags":["java","spring","spring-boot","timeout","settimeout"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1661532799,"post_id":73503519,"comment_id":129802781,"body_markdown":"Are you sure you can use `@Async` On a controller method?","body":"Are you sure you can use <code>@Async</code> On a controller method?"},{"owner":{"account_id":1200098,"reputation":801,"user_id":1170932,"accept_rate":46,"display_name":"sming"},"score":0,"creation_date":1661697889,"post_id":73503519,"comment_id":129828637,"body_markdown":"Yes(?) - this is code that&#39;s [apparently] been functionally correct in production for years but I&#39;ll stand to be corrected!","body":"Yes(?) - this is code that&#39;s [apparently] been functionally correct in production for years but I&#39;ll stand to be corrected!"}],"owner":{"account_id":1200098,"reputation":801,"user_id":1170932,"accept_rate":46,"display_name":"sming"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661528562,"creation_date":1661528562,"question_id":73503519,"body_markdown":"forgive my lack of Spring knowledge but I&#39;d like to basically have 60 seconds be the default timeout for a Spring app, but have 120 seconds timeout for a particular endpoint.\r\n\r\nFTR, to achieve the app-wide 60s read (in this case) timeout I am doing:\r\n\r\n```java\r\n        val requestFactory = new SimpleClientHttpRequestFactory\r\n        requestFactory.setReadTimeout(requestTimeout.toMillis.toInt)\r\n```\r\n\r\n(or, since this endpoint below is `@Async`, perhaps it&#39;s the `spring.mvc.async.request-timeout` setting in `application.yml` that&#39;s supplying the default, I&#39;m not sure).\r\n\r\nAnd then presumably on the endpoint/route in question, I will need to decorate it to specify a timeout of 120s or something like that?\r\n\r\nHere&#39;s the endpoint class &amp; method, which I wish to increase the timeout for:\r\n\r\n```java\r\n@RestController\r\n@RequestMapping(value = Array(&quot;/v1/contracts&quot;), produces = Array(MediaType.APPLICATION_JSON_VALUE))\r\nclass ContractController @Autowired()(\r\n...\r\n    @Async\r\n    @RequestMapping(value = Array(&quot;/{id}/students&quot;), method = Array(RequestMethod.POST))\r\n    def addContractStudents(\r\n...\r\n```\r\n\r\nAny pointers will be gladly received &#128591;&#127995;","title":"Spring Boot REST timeout, specific to one endpoint","body":"<p>forgive my lack of Spring knowledge but I'd like to basically have 60 seconds be the default timeout for a Spring app, but have 120 seconds timeout for a particular endpoint.</p>\n<p>FTR, to achieve the app-wide 60s read (in this case) timeout I am doing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        val requestFactory = new SimpleClientHttpRequestFactory\n        requestFactory.setReadTimeout(requestTimeout.toMillis.toInt)\n</code></pre>\n<p>(or, since this endpoint below is <code>@Async</code>, perhaps it's the <code>spring.mvc.async.request-timeout</code> setting in <code>application.yml</code> that's supplying the default, I'm not sure).</p>\n<p>And then presumably on the endpoint/route in question, I will need to decorate it to specify a timeout of 120s or something like that?</p>\n<p>Here's the endpoint class &amp; method, which I wish to increase the timeout for:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(value = Array(&quot;/v1/contracts&quot;), produces = Array(MediaType.APPLICATION_JSON_VALUE))\nclass ContractController @Autowired()(\n...\n    @Async\n    @RequestMapping(value = Array(&quot;/{id}/students&quot;), method = Array(RequestMethod.POST))\n    def addContractStudents(\n...\n</code></pre>\n<p>Any pointers will be gladly received 🙏🏻</p>\n"},{"tags":["java","build.gradle","shared-libraries","palantir-foundry"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661558743,"post_id":73503515,"comment_id":129808565,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":26167348,"reputation":11,"user_id":19852962,"display_name":"John Robison"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661528555,"creation_date":1661528555,"question_id":73503515,"body_markdown":"I&#39;m trying to add an external Java library to my Foundry repository, but I&#39;m getting a little blocked on how to actually obtain the rid for the library (required to configure the gradle file properly). The library is transforms-excel-parser-bundle. At present, there is no direct link to the given library from from the settings &gt; library view (where all other linked repositories / libraries are held). Any advice how I can hunt down the rid for this library so that I can add the necessary info to the gradle file in my own repo? Thanks!!","title":"Add external Java library in Foundry","body":"<p>I'm trying to add an external Java library to my Foundry repository, but I'm getting a little blocked on how to actually obtain the rid for the library (required to configure the gradle file properly). The library is transforms-excel-parser-bundle. At present, there is no direct link to the given library from from the settings &gt; library view (where all other linked repositories / libraries are held). Any advice how I can hunt down the rid for this library so that I can add the necessary info to the gradle file in my own repo? Thanks!!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":25945550,"reputation":506,"user_id":19664304,"display_name":"charmian"},"score":3,"creation_date":1661500032,"post_id":73497668,"comment_id":129791492,"body_markdown":"Welcome to Stack overflow, do you mean `Java` for your language instead of `javascript`?","body":"Welcome to Stack overflow, do you mean <code>Java</code> for your language instead of <code>javascript</code>?"},{"owner":{"account_id":20552177,"reputation":965,"user_id":15084645,"display_name":"Vinod Liyanage"},"score":0,"creation_date":1661500291,"post_id":73497668,"comment_id":129791576,"body_markdown":"please change your tag to **java** instead of  **javascript**","body":"please change your tag to <b>java</b> instead of  <b>javascript</b>"},{"owner":{"account_id":25660167,"reputation":89,"user_id":19426256,"display_name":"Drishti Jain"},"score":0,"creation_date":1661502896,"post_id":73497668,"comment_id":129792355,"body_markdown":"You are using arrays. arrays are indexed. Since you are storing the names and their marks with the same index, i in the for loop, you can keep track of which name/mark using index. You can keep current, max, min indices variables and update them as and when required. I hope I understood the requirement correctly but if not, please clarify your need and use scenario for better answers.","body":"You are using arrays. arrays are indexed. Since you are storing the names and their marks with the same index, i in the for loop, you can keep track of which name/mark using index. You can keep current, max, min indices variables and update them as and when required. I hope I understood the requirement correctly but if not, please clarify your need and use scenario for better answers."}],"answers":[{"tags":[],"owner":{"account_id":21719315,"reputation":97,"user_id":16029826,"display_name":"Yuriy Kirel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661509286,"creation_date":1661500446,"answer_id":73497806,"question_id":73497668,"body_markdown":"There are several ways of doing that. For example, you can store index of the student along with max/min mark:\r\n```java\r\nint minMark = marks[0];\r\nint minMarkIndex = 0;\r\nfor (int i = 0;i &lt; n; i++){\r\n    if (marks[i] &lt; minMark){\r\n        minMark = marks[i];\r\n        minMarkIndex = i;\r\n}\r\n```\r\nAnd then use this index to display student&#39;s name:\r\n```\r\nSystem.out.println(&quot;The student with minimal mark is &quot;, names[minMarkIndex]);\r\n```\r\n\r\nMore advanced approach is to create class ```Student```. One of classes use cases is to encapsulate certain data. In this case, we&#39;ll encapsulate student&#39;s name and student&#39;s mark: \r\n\r\n```java\r\nclass Student {\r\n    public String name;\r\n    public int mark;\r\n\r\n    Student(String name, int mark) {\r\n        this.name = name;\r\n        this.mark = mark;\r\n    }\r\n}\r\n```\r\nNote that there are a lot of conventions in terms of class definition, and class fields are seldom marked ```public```, but it&#39;s okay for explanation. \r\n\r\nAnd then, you store user input in instances of ```Student``` class. These instances are then used to retrieve data that is stored in them: \r\n```java\r\nStudent[] students = new Student[n];\r\nfor (int i = 0; i &lt; n; i++) {\r\n    students[i] = new Student(names[i], marks[i]);\r\n}\r\n\r\nStudent studentWithLowestMark = students[0], studentWithHighestMark = students[0];\r\n\r\nfor (Student student : students) { // iterates through students array, student == students[i]\r\n   if(student.mark &lt; studentWithLowestMark.mark) {\r\n       studentWithLowestMark = student;\r\n   } \r\n   if(student.mark &gt; studentWithHighestMark.mark) {\r\n       studentWithHighestMark = student;\r\n   }\r\n} \r\n\r\n\r\nSystem.out.println(&quot;Student with highest mark &quot; + studentWithHighestMark.mark \r\n    + &quot; is &quot; studentWithHighestMark.name);\r\n\r\nSystem.out.println(&quot;Student with lowest mark &quot; + studentWithLowestMark.mark \r\n    + &quot; is &quot; studentWithLowestMark.name);\r\n\r\n```\r\n\r\nOpposite to first approach, this approach couples student&#39;s name and mark, so you can&#39;t by mistake use name of one student and mark of other:\r\n\r\n```java\r\n// First approach allows this\r\nSystem.out.println(&quot;Student &quot; + names[0] + &quot; has mark &quot; + marks[1]) // Incorrect!\r\n\r\n// Second approach simplifies the usage and preserves this type of error\r\nSystem.out.println(&quot;Student &quot; + student.name + &quot; has mark &quot; + student.mark);\r\n```","title":"Need help attaching a number from one array to its corresponding string in another array","body":"<p>There are several ways of doing that. For example, you can store index of the student along with max/min mark:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int minMark = marks[0];\nint minMarkIndex = 0;\nfor (int i = 0;i &lt; n; i++){\n    if (marks[i] &lt; minMark){\n        minMark = marks[i];\n        minMarkIndex = i;\n}\n</code></pre>\n<p>And then use this index to display student's name:</p>\n<pre><code>System.out.println(&quot;The student with minimal mark is &quot;, names[minMarkIndex]);\n</code></pre>\n<p>More advanced approach is to create class <code>Student</code>. One of classes use cases is to encapsulate certain data. In this case, we'll encapsulate student's name and student's mark:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Student {\n    public String name;\n    public int mark;\n\n    Student(String name, int mark) {\n        this.name = name;\n        this.mark = mark;\n    }\n}\n</code></pre>\n<p>Note that there are a lot of conventions in terms of class definition, and class fields are seldom marked <code>public</code>, but it's okay for explanation.</p>\n<p>And then, you store user input in instances of <code>Student</code> class. These instances are then used to retrieve data that is stored in them:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Student[] students = new Student[n];\nfor (int i = 0; i &lt; n; i++) {\n    students[i] = new Student(names[i], marks[i]);\n}\n\nStudent studentWithLowestMark = students[0], studentWithHighestMark = students[0];\n\nfor (Student student : students) { // iterates through students array, student == students[i]\n   if(student.mark &lt; studentWithLowestMark.mark) {\n       studentWithLowestMark = student;\n   } \n   if(student.mark &gt; studentWithHighestMark.mark) {\n       studentWithHighestMark = student;\n   }\n} \n\n\nSystem.out.println(&quot;Student with highest mark &quot; + studentWithHighestMark.mark \n    + &quot; is &quot; studentWithHighestMark.name);\n\nSystem.out.println(&quot;Student with lowest mark &quot; + studentWithLowestMark.mark \n    + &quot; is &quot; studentWithLowestMark.name);\n\n</code></pre>\n<p>Opposite to first approach, this approach couples student's name and mark, so you can't by mistake use name of one student and mark of other:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// First approach allows this\nSystem.out.println(&quot;Student &quot; + names[0] + &quot; has mark &quot; + marks[1]) // Incorrect!\n\n// Second approach simplifies the usage and preserves this type of error\nSystem.out.println(&quot;Student &quot; + student.name + &quot; has mark &quot; + student.mark);\n</code></pre>\n"}],"owner":{"account_id":26164149,"reputation":11,"user_id":19850199,"display_name":"Hamish McEwan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1661528237,"creation_date":1661499827,"question_id":73497668,"body_markdown":"For the code below, I am trying to input a n number of names name and marks. The code then reads the inputs and spits out the avg of marks and the highest and lowest marks names.\r\n\r\nI have had some issues linking the max and min marks name to the marks themselves. I setup two arrays but am not sure how to track the position of the max and min mark to then link them to their corresponding name.\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Marks {\r\n\tpublic static void main(String[] args) {\r\n\t\t//It all goes in here\r\n\r\n\t\tScanner sc = new Scanner(System.in);\r\n\r\n\t\tSystem.out.print(&quot;How many students are there? &quot;);\r\n\t\tint n = sc.nextInt();\r\n\r\n\t\tString[] names = new String[n];\r\n\t\tint[] marks = new int[n];\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\tSystem.out.print(&quot;Enter name of student &quot; + (i + 1) +&quot;: &quot; );\r\n\t\t\tnames[i] = sc.next();\r\n\t\t\r\n\t\t\tSystem.out.print(&quot;Enter mark &quot; + (i + 1) +&quot;: &quot;);\r\n\t\t\tmarks[i] = sc.nextInt();\r\n\t\t}\r\n\t\t\r\n\t\tfloat sum = 0;\r\n\t\tfor (int i = 0;i &lt; n;i++) {\r\n\t\t\tsum += marks[i];\r\n\t\t}\r\n\t\tfloat average = (sum / marks.length);\r\n\t\tSystem.out.println(&quot;The average mark is: &quot; + average);\r\n\t\t\r\n\t\tint maxMark = marks[0];\r\n\t\tfor (int i = 0;i &lt; n; i++){\r\n\t\t\tif (marks[i] &gt; maxMark){\r\n\t\t\t\tmaxMark = marks[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tint minMark = marks[0];\r\n\t\tfor (int i = 0;i &lt; n; i++){\r\n\t\t\tif (marks[i] &lt; minMark){\r\n\t\t\t\tminMark = marks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tSystem.out.println(&quot;The best student is &quot; + maxMark);\r\n\t\tSystem.out.println(&quot;The worst student is &quot; + minMark);\r\n\t}\r\n}\r\n```","title":"Need help attaching a number from one array to its corresponding string in another array","body":"<p>For the code below, I am trying to input a n number of names name and marks. The code then reads the inputs and spits out the avg of marks and the highest and lowest marks names.</p>\n<p>I have had some issues linking the max and min marks name to the marks themselves. I setup two arrays but am not sure how to track the position of the max and min mark to then link them to their corresponding name.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Marks {\n    public static void main(String[] args) {\n        //It all goes in here\n\n        Scanner sc = new Scanner(System.in);\n\n        System.out.print(&quot;How many students are there? &quot;);\n        int n = sc.nextInt();\n\n        String[] names = new String[n];\n        int[] marks = new int[n];\n        \n        for (int i = 0; i &lt; n; i++) {\n            System.out.print(&quot;Enter name of student &quot; + (i + 1) +&quot;: &quot; );\n            names[i] = sc.next();\n        \n            System.out.print(&quot;Enter mark &quot; + (i + 1) +&quot;: &quot;);\n            marks[i] = sc.nextInt();\n        }\n        \n        float sum = 0;\n        for (int i = 0;i &lt; n;i++) {\n            sum += marks[i];\n        }\n        float average = (sum / marks.length);\n        System.out.println(&quot;The average mark is: &quot; + average);\n        \n        int maxMark = marks[0];\n        for (int i = 0;i &lt; n; i++){\n            if (marks[i] &gt; maxMark){\n                maxMark = marks[i];\n            }\n        }\n\n        int minMark = marks[0];\n        for (int i = 0;i &lt; n; i++){\n            if (marks[i] &lt; minMark){\n                minMark = marks[i];\n            }\n        }\n    \n        System.out.println(&quot;The best student is &quot; + maxMark);\n        System.out.println(&quot;The worst student is &quot; + minMark);\n    }\n}\n</code></pre>\n"},{"tags":["java","jackson","duration","iso8601","period"],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660846752,"creation_date":1660846034,"answer_id":73407611,"question_id":73405738,"body_markdown":"# tl;dr\r\n\r\n    org.threeten.extra.PeriodDuration.parse( &quot;P3Y6M4DT12H30M5S&quot; ) ;\r\n\r\n# Details\r\n\r\n - A `Period` represents a span of time on the scale of years, months, days. \r\n - A `Duration` represents a span of time on the scale of hours,\r\n   minutes, seconds, and nanoseconds.\r\n\r\nA note of caution: Combining those two concepts into one, as seen in your example input string, rarely makes sense in practice. \r\n\r\n## `PeriodDuration` class\r\n\r\nHowever, if you insist on using such values, there is a class for that. Add the [*ThreeTen-Extra*][1] library to your project. You can then access the [`PeriodDuration`][2] class.\r\n\r\nNo need to define a formatting pattern. Your input complies with the [ISO 8601][3] standard. The *java.time* classes use the standard formats by default when parsing/generating text.\r\n\r\n    org.threeten.extra.PeriodDuration pd = PeriodDuration.parse( &quot;P3Y6M4DT12H30M5S&quot; ) ;\r\n\r\nGenerate text in standard [ISO 8601][3] format.\r\n\r\n    String output = pd.toString() ;\r\n\r\nYou’ll find several handy methods on that class for construction, normalizing, math (addition, subtraction, negation), and more.\r\n\r\nAs for Jackson, I’m not a user. I don’t know how to use a third-party class as an automatic formatter in Jackson.\r\n\r\n\r\n  [1]: https://www.threeten.org/threeten-extra/\r\n  [2]: https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html\r\n  [3]: https://en.wikipedia.org/wiki/ISO_8601#Durations","title":"How to deserialize ISO8601 duration string to Duration and Period objects with Jackson","body":"<h1>tl;dr</h1>\n<pre><code>org.threeten.extra.PeriodDuration.parse( &quot;P3Y6M4DT12H30M5S&quot; ) ;\n</code></pre>\n<h1>Details</h1>\n<ul>\n<li>A <code>Period</code> represents a span of time on the scale of years, months, days.</li>\n<li>A <code>Duration</code> represents a span of time on the scale of hours,\nminutes, seconds, and nanoseconds.</li>\n</ul>\n<p>A note of caution: Combining those two concepts into one, as seen in your example input string, rarely makes sense in practice.</p>\n<h2><code>PeriodDuration</code> class</h2>\n<p>However, if you insist on using such values, there is a class for that. Add the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Extra</em></a> library to your project. You can then access the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html\" rel=\"nofollow noreferrer\"><code>PeriodDuration</code></a> class.</p>\n<p>No need to define a formatting pattern. Your input complies with the <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">ISO 8601</a> standard. The <em>java.time</em> classes use the standard formats by default when parsing/generating text.</p>\n<pre><code>org.threeten.extra.PeriodDuration pd = PeriodDuration.parse( &quot;P3Y6M4DT12H30M5S&quot; ) ;\n</code></pre>\n<p>Generate text in standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">ISO 8601</a> format.</p>\n<pre><code>String output = pd.toString() ;\n</code></pre>\n<p>You’ll find several handy methods on that class for construction, normalizing, math (addition, subtraction, negation), and more.</p>\n<p>As for Jackson, I’m not a user. I don’t know how to use a third-party class as an automatic formatter in Jackson.</p>\n"},{"tags":[],"owner":{"account_id":12934558,"reputation":157,"user_id":9352400,"display_name":"treekt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661186536,"creation_date":1661186536,"answer_id":73448436,"question_id":73405738,"body_markdown":"I didnt want use external dependency to use such simple approach so I implemented it by myself.\r\n\r\nI created **PeriodDuration** class which contain Period and Duration fields.\r\n\r\nNext I created deserializer which extends **StdDeserializer** and annotated **PeriodDuration** class with `@JsonDeserializer(using = &quot;nameOfMyCustomDeserializer.class)`. That deserializer split iso8601 duration string into two string, before &#39;T&#39; and after &#39;T&#39;. If period part is empty then set Period.ZERO but if duration partis empty then set Duration.ZERO.\r\n\r\n\r\n\r\n","title":"How to deserialize ISO8601 duration string to Duration and Period objects with Jackson","body":"<p>I didnt want use external dependency to use such simple approach so I implemented it by myself.</p>\n<p>I created <strong>PeriodDuration</strong> class which contain Period and Duration fields.</p>\n<p>Next I created deserializer which extends <strong>StdDeserializer</strong> and annotated <strong>PeriodDuration</strong> class with <code>@JsonDeserializer(using = &quot;nameOfMyCustomDeserializer.class)</code>. That deserializer split iso8601 duration string into two string, before 'T' and after 'T'. If period part is empty then set Period.ZERO but if duration partis empty then set Duration.ZERO.</p>\n"},{"tags":[],"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661528127,"creation_date":1661528127,"answer_id":73503429,"question_id":73405738,"body_markdown":"Add com.fasterxml.jackson.datatype.jsr310.JavaTimeModule to your JsonMapper/ObjectMapper - see https://github.com/FasterXML/jackson-modules-java8.\r\n\r\nFor serialization, you will need to disable SerializationFeature.WRITE_DATES_AS_TIMESTAMPS - this is enabled, by default. When disabled the duration is output is ISO-8601 format (eg PT12H for 12 hours). ","title":"How to deserialize ISO8601 duration string to Duration and Period objects with Jackson","body":"<p>Add com.fasterxml.jackson.datatype.jsr310.JavaTimeModule to your JsonMapper/ObjectMapper - see <a href=\"https://github.com/FasterXML/jackson-modules-java8\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-modules-java8</a>.</p>\n<p>For serialization, you will need to disable SerializationFeature.WRITE_DATES_AS_TIMESTAMPS - this is enabled, by default. When disabled the duration is output is ISO-8601 format (eg PT12H for 12 hours).</p>\n"}],"owner":{"account_id":12934558,"reputation":157,"user_id":9352400,"display_name":"treekt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":778,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1661528127,"creation_date":1660836573,"question_id":73405738,"body_markdown":"I have a string value containing **ISO8601** duration string (P3Y6M4DT12H30M5S). \r\nHow to deserialize it to Duration and Period object using Jackson ?\r\nI know that **Duration** accepts days, hours, minutes, seconds and **Period** years and months.\r\n\r\n\r\n","title":"How to deserialize ISO8601 duration string to Duration and Period objects with Jackson","body":"<p>I have a string value containing <strong>ISO8601</strong> duration string (P3Y6M4DT12H30M5S).\nHow to deserialize it to Duration and Period object using Jackson ?\nI know that <strong>Duration</strong> accepts days, hours, minutes, seconds and <strong>Period</strong> years and months.</p>\n"},{"tags":["java","swagger","authorization","istio"],"answers":[{"tags":[],"owner":{"account_id":6727,"reputation":26865,"user_id":11439,"accept_rate":70,"display_name":"sumek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661527649,"creation_date":1661527649,"answer_id":73503351,"question_id":73290526,"body_markdown":"We ended up generating Authorization tokens with Postman and pasting them into Swagger. Slightly less convenient but works","title":"Authorizing Swagger calls when using Istio Authorization","body":"<p>We ended up generating Authorization tokens with Postman and pasting them into Swagger. Slightly less convenient but works</p>\n"}],"owner":{"account_id":6727,"reputation":26865,"user_id":11439,"accept_rate":70,"display_name":"sumek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73503351,"answer_count":1,"score":0,"last_activity_date":1661527649,"creation_date":1660041920,"question_id":73290526,"body_markdown":"I&#39;m moving my Spring Boot application from Spring Security authorization to Istio AuthorizationPolicy based one. My Spring app exposes Swagger API docs and previously I could authorize my Swagger calls.\r\n\r\nIs there any good way to do it with Istio?","title":"Authorizing Swagger calls when using Istio Authorization","body":"<p>I'm moving my Spring Boot application from Spring Security authorization to Istio AuthorizationPolicy based one. My Spring app exposes Swagger API docs and previously I could authorize my Swagger calls.</p>\n<p>Is there any good way to do it with Istio?</p>\n"},{"tags":["java","spring","jpa","spring-data-jpa","repository"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661426362,"creation_date":1661426362,"answer_id":73486558,"question_id":73479346,"body_markdown":"Yes there is a difference.\r\n`findById` is implemented by using a dedicated method on the `EntityManager` which will check the 1st level cache first and therefore potentially avoids any database access. \r\n\r\nThe derived query method will create a query and execute it as long as you don&#39;t have a query cache configured.\r\n\r\nIf the entity in question isn&#39;t in the 1st level cache the code path executed is still significantly different, but it is unlikely that you&#39;ll notice it in production.","title":"Spring data repository findById vs derived findBy[id-column-name]","body":"<p>Yes there is a difference.\n<code>findById</code> is implemented by using a dedicated method on the <code>EntityManager</code> which will check the 1st level cache first and therefore potentially avoids any database access.</p>\n<p>The derived query method will create a query and execute it as long as you don't have a query cache configured.</p>\n<p>If the entity in question isn't in the 1st level cache the code path executed is still significantly different, but it is unlikely that you'll notice it in production.</p>\n"}],"owner":{"account_id":5677056,"reputation":35,"user_id":4489816,"display_name":"Delumees"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":574,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661527601,"creation_date":1661374364,"question_id":73479346,"body_markdown":"Let&#39;s say we have an entity class with the following id: &lt;br/&gt;\r\n```\r\n@Entity\r\nclass SomeEntity {\r\n    @Id\r\n    private String key;\r\n    ...\r\n}\r\n```\r\n\r\nIs there any difference between using *CrudRepository*&#39;s `findById(key)` and using our own method `findByKey(String key)`? \r\n&lt;br&gt;\r\nAnd is there any difference between both when the primary key is composite, e.g:\r\n```\r\nclass CompositeKey implements Serializable {\r\n    private Integer firstKey;\r\n    private String secondKey;\r\n    ...\r\n}\r\n\r\n@Entity\r\n@IdClass(CompositeKey.class)\r\nclass SomeEntity {\r\n    @Id\r\n    private Integer firstKey;\r\n    @Id\r\n    private String secondKey;\r\n    ...\r\n}\r\n```\r\nand then\r\n`findById(new CompositeKey(...))` vs &lt;br&gt;`findByFirstKeyAndSecondKey(int firstKey, String secondKey)` ?","title":"Spring data repository findById vs derived findBy[id-column-name]","body":"<p>Let's say we have an entity class with the following id: <br/></p>\n<pre><code>@Entity\nclass SomeEntity {\n    @Id\n    private String key;\n    ...\n}\n</code></pre>\n<p>Is there any difference between using <em>CrudRepository</em>'s <code>findById(key)</code> and using our own method <code>findByKey(String key)</code>?\n<br>\nAnd is there any difference between both when the primary key is composite, e.g:</p>\n<pre><code>class CompositeKey implements Serializable {\n    private Integer firstKey;\n    private String secondKey;\n    ...\n}\n\n@Entity\n@IdClass(CompositeKey.class)\nclass SomeEntity {\n    @Id\n    private Integer firstKey;\n    @Id\n    private String secondKey;\n    ...\n}\n</code></pre>\n<p>and then\n<code>findById(new CompositeKey(...))</code> vs <br><code>findByFirstKeyAndSecondKey(int firstKey, String secondKey)</code> ?</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"score":0,"creation_date":1661525086,"post_id":73502711,"comment_id":129800023,"body_markdown":"As tokenPayload.get(&quot;aud&quot;) return an ArrayList convert to an Array, tokenPayload.get(&quot;aud&quot;).toArray()","body":"As tokenPayload.get(&quot;aud&quot;) return an ArrayList convert to an Array, tokenPayload.get(&quot;aud&quot;).toArray()"},{"owner":{"account_id":26140315,"reputation":43,"user_id":19829796,"display_name":"Robert O&#39;Neal"},"score":0,"creation_date":1661525230,"post_id":73502711,"comment_id":129800076,"body_markdown":"@Briggo do you mind sharing an example","body":"@Briggo do you mind sharing an example"},{"owner":{"account_id":14440990,"reputation":71,"user_id":10431631,"display_name":"Athsoatle"},"score":0,"creation_date":1661525675,"post_id":73502711,"comment_id":129800222,"body_markdown":"`(Object[]) &lt;Object&gt;` is a bad cast, as it may lead to kind of unwanted behaviour and errors. When you are parsing Json i reccomend you use libraries like [Jackson](https://www.baeldung.com/jackson) instead of reading to map with objects.\nAnd to use List instead of Array if possible - not `Object[]` but `ArrayList&lt;Object&gt;`.","body":"<code>(Object[]) &lt;Object&gt;</code> is a bad cast, as it may lead to kind of unwanted behaviour and errors. When you are parsing Json i reccomend you use libraries like <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">Jackson</a> instead of reading to map with objects. And to use List instead of Array if possible - not <code>Object[]</code> but <code>ArrayList&lt;Object&gt;</code>."},{"owner":{"account_id":3577416,"reputation":83,"user_id":2986314,"display_name":"ip.java"},"score":0,"creation_date":1661525750,"post_id":73502711,"comment_id":129800239,"body_markdown":"@RobertO&#39;Neal, when you read an array from a json in Java it is an ArrayList under the hood. So just change `Object[]` to ArrayList&lt;Object&gt;.\nYou may also want to use hamcrest matchers to assert lists.","body":"@RobertO&#39;Neal, when you read an array from a json in Java it is an ArrayList under the hood. So just change <code>Object[]</code> to ArrayList&lt;Object&gt;. You may also want to use hamcrest matchers to assert lists."}],"answers":[{"tags":[],"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661527481,"creation_date":1661527481,"answer_id":73503317,"question_id":73502711,"body_markdown":"Here&#39;s an example including assertion using Hamcrest as mentioned by ip.java\r\n\r\n```\r\n    @Test\r\n    public void testArrayComparison() throws Exception {\r\n        String json = &quot;{\\&quot;aud\\&quot;: [\\&quot;https://www.example.com\\&quot;,\\&quot;https://www.example.biz\\&quot;]}&quot;;\r\n\r\n        Map&lt;String, Object&gt; map = new ObjectMapper().readValue(json, Map.class);\r\n\r\n        List&lt;Object&gt; aud = (List&lt;Object&gt;) map.get(&quot;aud&quot;);\r\n\r\n        Object[] expected = new Object[] {&quot;https://www.example.biz&quot;,&quot;https://www.example.com&quot;};\r\n\r\n        assertThat(aud, containsInAnyOrder(expected));\r\n    }\r\n```","title":"JUnit how to compare an object to an array?","body":"<p>Here's an example including assertion using Hamcrest as mentioned by ip.java</p>\n<pre><code>    @Test\n    public void testArrayComparison() throws Exception {\n        String json = &quot;{\\&quot;aud\\&quot;: [\\&quot;https://www.example.com\\&quot;,\\&quot;https://www.example.biz\\&quot;]}&quot;;\n\n        Map&lt;String, Object&gt; map = new ObjectMapper().readValue(json, Map.class);\n\n        List&lt;Object&gt; aud = (List&lt;Object&gt;) map.get(&quot;aud&quot;);\n\n        Object[] expected = new Object[] {&quot;https://www.example.biz&quot;,&quot;https://www.example.com&quot;};\n\n        assertThat(aud, containsInAnyOrder(expected));\n    }\n</code></pre>\n"}],"owner":{"account_id":26140315,"reputation":43,"user_id":19829796,"display_name":"Robert O&#39;Neal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661527481,"creation_date":1661524672,"question_id":73502711,"body_markdown":"The code below is an instance of Object which is essentially an array of strings:\r\n\r\n```\r\nprivate final Map&lt;String, Object&gt; tokenPayload = // assume map is populated\r\ntokenPayload.get(&quot;aud&quot;) // gives me instance of Object\r\n```\r\n\r\nIt&#39;s essentially a JWT that has an aud claim that looks like this:\r\n```\r\n{\r\n  &quot;aud&quot;: [\r\n    &quot;https://www.example.com&quot;\r\n  ],\r\n}\r\n```\r\n\r\nAnd I&#39;m trying to add a simple JUnit assert:\r\n```\r\nassertArrayEquals(new String[] {&quot;https://www.example.com&quot;}, (Object[])tokenPayload.get(&quot;aud&quot;));\r\n```\r\n\r\nbut I&#39;m getting a cast exception `ClassCast class java.util.ArrayList cannot be cast to class [Ljava.lang.String; (java.util.ArrayList and [Ljava.lang.String; are in module java.base of loader &#39;bootstrap&#39;)`\r\n\r\nWhat is the best way to test this?","title":"JUnit how to compare an object to an array?","body":"<p>The code below is an instance of Object which is essentially an array of strings:</p>\n<pre><code>private final Map&lt;String, Object&gt; tokenPayload = // assume map is populated\ntokenPayload.get(&quot;aud&quot;) // gives me instance of Object\n</code></pre>\n<p>It's essentially a JWT that has an aud claim that looks like this:</p>\n<pre><code>{\n  &quot;aud&quot;: [\n    &quot;https://www.example.com&quot;\n  ],\n}\n</code></pre>\n<p>And I'm trying to add a simple JUnit assert:</p>\n<pre><code>assertArrayEquals(new String[] {&quot;https://www.example.com&quot;}, (Object[])tokenPayload.get(&quot;aud&quot;));\n</code></pre>\n<p>but I'm getting a cast exception <code>ClassCast class java.util.ArrayList cannot be cast to class [Ljava.lang.String; (java.util.ArrayList and [Ljava.lang.String; are in module java.base of loader 'bootstrap')</code></p>\n<p>What is the best way to test this?</p>\n"},{"tags":["java","lambda","java-8"],"answers":[{"tags":[],"owner":{"account_id":3577678,"reputation":11003,"user_id":2986537,"accept_rate":100,"display_name":"Razib"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1427143957,"creation_date":1427143957,"answer_id":29220141,"question_id":29219984,"body_markdown":"You can use method reference like -  \r\n\r\n    System.out::println  \r\n\r\nWhich is equivalent to the lambda expression - \r\n\r\n    x -&gt; System.out.println(x).  \r\n\r\nMoreover you can user reflection to store method and it will works for the earlier version of `java` too.","title":"Can I store a method in a variable in Java 8?","body":"<p>You can use method reference like -  </p>\n\n<pre><code>System.out::println  \n</code></pre>\n\n<p>Which is equivalent to the lambda expression - </p>\n\n<pre><code>x -&gt; System.out.println(x).  \n</code></pre>\n\n<p>Moreover you can user reflection to store method and it will works for the earlier version of <code>java</code> too.</p>\n"},{"tags":[],"owner":{"account_id":10904,"reputation":2639,"user_id":1729005,"display_name":"axblount"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1427144073,"creation_date":1427144073,"answer_id":29220175,"question_id":29219984,"body_markdown":"You can use Java 8 method references. You can use the `::` &#39;operator&#39; to grab a method reference from an object.\r\n\r\n    import java.util.function.IntConsumer;\r\n\r\n    class Test {\r\n        private int i;\r\n        public Test() { this.i = 0; }\r\n        public void inc(int x) { this.i += x; }\r\n        public int get() { return this.i; }\r\n\r\n        public static void main(String[] args) {\r\n            Test t = new Test();\r\n            IntConsumer c = t::inc;\r\n            c.accept(3);\r\n            System.out.println(t.get());\r\n            // prints 3\r\n        }\r\n    }\r\n\r\nYou just need a `@FunctionalInterface` that matches the signature of the method you want to store. `java.util.function` contains a selection of the most commonly used ones.","title":"Can I store a method in a variable in Java 8?","body":"<p>You can use Java 8 method references. You can use the <code>::</code> 'operator' to grab a method reference from an object.</p>\n\n<pre><code>import java.util.function.IntConsumer;\n\nclass Test {\n    private int i;\n    public Test() { this.i = 0; }\n    public void inc(int x) { this.i += x; }\n    public int get() { return this.i; }\n\n    public static void main(String[] args) {\n        Test t = new Test();\n        IntConsumer c = t::inc;\n        c.accept(3);\n        System.out.println(t.get());\n        // prints 3\n    }\n}\n</code></pre>\n\n<p>You just need a <code>@FunctionalInterface</code> that matches the signature of the method you want to store. <code>java.util.function</code> contains a selection of the most commonly used ones.</p>\n"},{"tags":[],"owner":{"account_id":1691733,"reputation":3139,"user_id":1553934,"accept_rate":100,"display_name":"esin88"},"down_vote_count":0,"up_vote_count":58,"is_accepted":true,"score":58,"last_activity_date":1593266085,"creation_date":1427144446,"answer_id":29220300,"question_id":29219984,"body_markdown":"Yes, you can have a variable reference to any method. For simple methods it&#39;s usually enough to use [`java.util.function.*` classes](https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html). Here&#39;s a working example:\r\n\r\n    import java.util.function.Consumer;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n            final Consumer&lt;Integer&gt; simpleReference = Main::someMethod;\r\n            simpleReference.accept(1);\r\n\r\n            final Consumer&lt;Integer&gt; another = i -&gt; System.out.println(i);\r\n            another.accept(2);\r\n        }\r\n    \r\n        private static void someMethod(int value) {\r\n            System.out.println(value);\r\n        }\r\n    }\r\n\r\nIf your method does not match any of those interfaces, you can define your own. The only requirement is that is must have a single abstract method.\r\n\r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n        \r\n            final MyInterface foo = Main::test;\r\n            final String result = foo.someMethod(1, 2, 3);\r\n            System.out.println(result);\r\n        }\r\n    \r\n        private static String test(int foo, int bar, int baz) {\r\n            return &quot;hello&quot;;\r\n        }\r\n    \r\n        @FunctionalInterface // Not required, but expresses intent that this is designed \r\n                             // as a lambda target\r\n        public interface MyInterface {\r\n            String someMethod(int foo, int bar, int baz);\r\n        }\r\n    }","title":"Can I store a method in a variable in Java 8?","body":"<p>Yes, you can have a variable reference to any method. For simple methods it's usually enough to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html\" rel=\"noreferrer\"><code>java.util.function.*</code> classes</a>. Here's a working example:</p>\n<pre><code>import java.util.function.Consumer;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        final Consumer&lt;Integer&gt; simpleReference = Main::someMethod;\n        simpleReference.accept(1);\n\n        final Consumer&lt;Integer&gt; another = i -&gt; System.out.println(i);\n        another.accept(2);\n    }\n\n    private static void someMethod(int value) {\n        System.out.println(value);\n    }\n}\n</code></pre>\n<p>If your method does not match any of those interfaces, you can define your own. The only requirement is that is must have a single abstract method.</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n    \n        final MyInterface foo = Main::test;\n        final String result = foo.someMethod(1, 2, 3);\n        System.out.println(result);\n    }\n\n    private static String test(int foo, int bar, int baz) {\n        return &quot;hello&quot;;\n    }\n\n    @FunctionalInterface // Not required, but expresses intent that this is designed \n                         // as a lambda target\n    public interface MyInterface {\n        String someMethod(int foo, int bar, int baz);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5401912,"reputation":1776,"user_id":4301564,"accept_rate":70,"display_name":"fangio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88629,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"accepted_answer_id":29220300,"answer_count":3,"score":51,"last_activity_date":1661526674,"creation_date":1427143397,"question_id":29219984,"body_markdown":"Is it possible to store a method into a variable? Something like\r\n\r\n     public void store() {\r\n         SomeClass foo = &lt;getName() method&gt;;\r\n         //...\r\n         String value = foo.call();\r\n     }\r\n\r\n     private String getName() {\r\n         return &quot;hello&quot;;\r\n     }\r\n\r\nI think this is possible with lambdas but I don&#39;t know how. ","title":"Can I store a method in a variable in Java 8?","body":"<p>Is it possible to store a method into a variable? Something like</p>\n<pre><code> public void store() {\n     SomeClass foo = &lt;getName() method&gt;;\n     //...\n     String value = foo.call();\n }\n\n private String getName() {\n     return &quot;hello&quot;;\n }\n</code></pre>\n<p>I think this is possible with lambdas but I don't know how.</p>\n"},{"tags":["python","java","android","json","kotlin"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1661524952,"post_id":73502735,"comment_id":129799969,"body_markdown":"You haven&#39;t shown how you&#39;re populating the `data` variable, nor do we know how the binary data is encoded in the JSON. (It should be base64-encoded, but you haven&#39;t shown us anything about that.) It would help if you&#39;d provide a [mcve] including the JSON.","body":"You haven&#39;t shown how you&#39;re populating the <code>data</code> variable, nor do we know how the binary data is encoded in the JSON. (It should be base64-encoded, but you haven&#39;t shown us anything about that.) It would help if you&#39;d provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including the JSON."},{"owner":{"account_id":16677797,"reputation":837,"user_id":12053756,"display_name":"Jagar"},"score":0,"creation_date":1661525767,"post_id":73502735,"comment_id":129800249,"body_markdown":"@JonSkeet please find the edit 1","body":"@JonSkeet please find the edit 1"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1661526429,"post_id":73502735,"comment_id":129800497,"body_markdown":"There&#39;s still no sign of the JSON. Fundamentally, JSON is a text-based format - if you&#39;re not using something like base64, you should *expect* there to be problems with arbitrary binary data. I strongly suggest you start using base64 to encode the binary data...","body":"There&#39;s still no sign of the JSON. Fundamentally, JSON is a text-based format - if you&#39;re not using something like base64, you should <i>expect</i> there to be problems with arbitrary binary data. I strongly suggest you start using base64 to encode the binary data..."},{"owner":{"account_id":16677797,"reputation":837,"user_id":12053756,"display_name":"Jagar"},"score":1,"creation_date":1661526808,"post_id":73502735,"comment_id":129800632,"body_markdown":"thank you @JonSkeet, I explained more in the edit 1, the data is just like compiled stuff and even changes when I copy/paste it, I will try with base64 encoding instead as you suggested","body":"thank you @JonSkeet, I explained more in the edit 1, the data is just like compiled stuff and even changes when I copy/paste it, I will try with base64 encoding instead as you suggested"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1661527451,"post_id":73502735,"comment_id":129800880,"body_markdown":"&quot;the data is just like compiled stuff&quot; - yes, as I say, arbitrary binary data. **Not text data** - which is why you need to encode it.","body":"&quot;the data is just like compiled stuff&quot; - yes, as I say, arbitrary binary data. <b>Not text data</b> - which is why you need to encode it."}],"owner":{"account_id":16677797,"reputation":837,"user_id":12053756,"display_name":"Jagar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661526670,"creation_date":1661524766,"question_id":73502735,"body_markdown":"I am trying to upload and download `.so` file while it will be saved in MongoDB on the server, for the server I am using Python/flask and the client is android (Kotlin or Java)\r\n\r\n**Server side:**  \r\n\r\nI am trying to upload a `.so` compiled file using Python/Flask and save it in MongoDB:  \r\n```python\r\nfrom bson.binary import Binary\r\n...\r\nsocket = request.files[&#39;socket&#39;] # .so file\r\nbinary = socket.read()\r\nencoded = Binary(binary)\r\n\r\n# update it in MongoDB using Pymongo\r\n...\r\n```\r\n\r\nAnd when I want to return it I am doing that using: \r\n```python\r\n# Retrieve socket string from MongoDB\r\n...\r\n\r\nfinal_string = socket.decode(&#39;unicode_escape&#39;)\r\n\r\n# Send it back in a JSON response\r\n...\r\n```\r\n**Client side:**  \r\nOn the client side (android Java or Kotlin): \r\n```kotlin\r\n// Get the decoded socket string from the retrieved JSON object (OkHttp)\r\nval socketFile= File(filesDir, &quot;socket.so&quot;)\r\nif (socketFile.exists()){\r\n         socketFile.delete()\r\n}\r\nsocketFile.createNewFile()\r\nsocketFile.writeBytes(data.toByteArray()) // data is the socked decoded string from the json respose\r\n```\r\n\r\nFor all those steps there is no errors, but when I run the received `.so` file it crashes with these errors:\r\n```\r\nE/fdsan: attempted to close file descriptor 107, expected to be unowned, actually owned by unique_fd 0x724c5d22c4\r\nA/libc: Fatal signal 5 (SIGTRAP), code 1 (TRAP_BRKPT), fault addr 0x71cf0e39dc in tid 18912 (Thread-9), pid 18672 (me.jagar.rog)\r\nE/Fence: sync_file_info returned NULL for fd 107\r\nE/Fence: sync_file_info returned NULL for fd 107\r\nE/com.example.package: Unknown bits set in runtime_flags: 0x800000\r\n```\r\n\r\nI thought it could be an encoding/decoding problem but I am not sure how to adjust it to make it work\r\n\r\n\r\n## Edit 1:\r\nI didn&#39;t use `base64` encoding in the server or the client, and here is partially (it is so long) how the data string received looks like in the JSON file:\r\n```json\r\n{\r\n&quot;data&quot;: &quot;ELF          &#183;    %      @       &#176;          @ 8 \t @         @       @       @       &#248;      &#248;                   8      8      8                                                                                  x      x     x     8      &#224;                   &#168;      &#168;     &#168;                                P      P      P      &#188;       &#188;              P&#229;td   `      `      `      T       T              Q&#229;td                                                  R&#229;td   x      x     x                        /system/bin/linker64             Android    r20                                                             5594570                                                                  GNU &#187; &#192;9:o%B&#207;&#180;ih&#212;&#189;&#176;    a   f   3       )       F   *   5       \r\n       !   K   P   N   A   4       O   ^   L   I                           $   R       M   G   e                       #   V   c          0   Z                 &#39;   2          (          D              ?          W   ,                           d       &gt;   ]   [                       &amp;       1   8   Y       &quot;   \\   +   9   E         H                               .       6   @       :           =                         b      J   C           X           B               &lt;               7       `       a   Q                   _                          /               S       -                  \t                                      U   ;                                                      T   %                  \r\n                  %   $      \t   &quot; p   ,   `h &#224;%&#165;@)r V ! @  $G &#165;TJY&quot;  $               *   ,   -   .   0   1   4   9   :   &lt;   @   G   H   J       L   O   P   R   S   U   V           X   Z   ^       a       b   d       &#208;&#166;}a&#252;8-&#210;j&#182;&#160;/B&#249;\r\nA(&#184;f&#252;CaC&#165;&#176;&#163;&#244;f .......&quot;\r\n}\r\n```\r\n\r\nThe file size (socket.so) is about 39KB and it can be reproduced using a simple C++ compiled file","title":"How to encode string correctly in Java/Kotlin that has been decoded in Python","body":"<p>I am trying to upload and download <code>.so</code> file while it will be saved in MongoDB on the server, for the server I am using Python/flask and the client is android (Kotlin or Java)</p>\n<p><strong>Server side:</strong></p>\n<p>I am trying to upload a <code>.so</code> compiled file using Python/Flask and save it in MongoDB:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from bson.binary import Binary\n...\nsocket = request.files['socket'] # .so file\nbinary = socket.read()\nencoded = Binary(binary)\n\n# update it in MongoDB using Pymongo\n...\n</code></pre>\n<p>And when I want to return it I am doing that using:</p>\n<pre class=\"lang-py prettyprint-override\"><code># Retrieve socket string from MongoDB\n...\n\nfinal_string = socket.decode('unicode_escape')\n\n# Send it back in a JSON response\n...\n</code></pre>\n<p><strong>Client side:</strong><br />\nOn the client side (android Java or Kotlin):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Get the decoded socket string from the retrieved JSON object (OkHttp)\nval socketFile= File(filesDir, &quot;socket.so&quot;)\nif (socketFile.exists()){\n         socketFile.delete()\n}\nsocketFile.createNewFile()\nsocketFile.writeBytes(data.toByteArray()) // data is the socked decoded string from the json respose\n</code></pre>\n<p>For all those steps there is no errors, but when I run the received <code>.so</code> file it crashes with these errors:</p>\n<pre><code>E/fdsan: attempted to close file descriptor 107, expected to be unowned, actually owned by unique_fd 0x724c5d22c4\nA/libc: Fatal signal 5 (SIGTRAP), code 1 (TRAP_BRKPT), fault addr 0x71cf0e39dc in tid 18912 (Thread-9), pid 18672 (me.jagar.rog)\nE/Fence: sync_file_info returned NULL for fd 107\nE/Fence: sync_file_info returned NULL for fd 107\nE/com.example.package: Unknown bits set in runtime_flags: 0x800000\n</code></pre>\n<p>I thought it could be an encoding/decoding problem but I am not sure how to adjust it to make it work</p>\n<h2>Edit 1:</h2>\n<p>I didn't use <code>base64</code> encoding in the server or the client, and here is partially (it is so long) how the data string received looks like in the JSON file:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n&quot;data&quot;: &quot;ELF          ·    %      @       °          @ 8     @         @       @       @       ø      ø                   8      8      8                                                                                  x      x     x     8      à                   ¨      ¨     ¨                                P      P      P      ¼       ¼              Påtd   `      `      `      T       T              Qåtd                                                  Råtd   x      x     x                        /system/bin/linker64             Android    r20                                                             5594570                                                                  GNU » À9:o%BÏ´ihÔ½°    a   f   3       )       F   *   5       \n       !   K   P   N   A   4       O   ^   L   I                           $   R       M   G   e                       #   V   c          0   Z                 '   2          (          D              ?          W   ,                           d       &gt;   ]   [                       &amp;       1   8   Y       &quot;   \\   +   9   E         H                               .       6   @       :           =                         b      J   C           X           B               &lt;               7       `       a   Q                   _                          /               S       -                                                           U   ;                                                      T   %                  \n                  %   $            &quot; p   ,   `h à%¥@)r V ! @  $G ¥TJY&quot;  $               *   ,   -   .   0   1   4   9   :   &lt;   @   G   H   J       L   O   P   R   S   U   V           X   Z   ^       a       b   d       Ð¦}aü8-Òj¶ /Bù\nA(¸füCaC¥°£ôf .......&quot;\n}\n</code></pre>\n<p>The file size (socket.so) is about 39KB and it can be reproduced using a simple C++ compiled file</p>\n"},{"tags":["java","arrays","methods"],"answers":[{"tags":[],"owner":{"account_id":8372,"reputation":225282,"user_id":15055,"accept_rate":80,"display_name":"Claudiu"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1264961650,"creation_date":1264961650,"answer_id":2172728,"question_id":2172718,"body_markdown":"You can&#39;t store methods in arrays in Java, because methods aren&#39;t first-class objects in Java. It&#39;s a reason some people prefer to use other languages like Python, Scheme, etc.\r\n\r\nThe work-around is to create an interface which contains one method, then create four classes implementing that interface - the MoveRight, MoveLeft, etc... classes. Then you can store instances of those classes in your array and call them all the same way.","title":"Can Java store methods in arrays?","body":"<p>You can't store methods in arrays in Java, because methods aren't first-class objects in Java. It's a reason some people prefer to use other languages like Python, Scheme, etc.</p>\n\n<p>The work-around is to create an interface which contains one method, then create four classes implementing that interface - the MoveRight, MoveLeft, etc... classes. Then you can store instances of those classes in your array and call them all the same way.</p>\n"},{"tags":[],"owner":{"account_id":1742,"reputation":42756,"user_id":2362,"accept_rate":79,"display_name":"brabster"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1264962261,"creation_date":1264961671,"answer_id":2172730,"question_id":2172718,"body_markdown":"Yes, you can store methods in arrays using [Reflection][1], however it is likely that what you actually want to do in this situation is use [polymorphism][2].\r\n\r\nAs an example of polymorphism in relation to your problem - say you created an interface as follows:\r\n\r\n    public interface MoveCommand {\r\n        void move();\r\n    }\r\n\r\nYou can then create implementations as follows:\r\n\r\n    public class MoveLeftCommand implements MoveCommand {\r\n        public void move() {\r\n            System.out.println(&quot;LEFT&quot;);\r\n        }\r\n    }\r\n\r\netc. for the other move options. You could then store these in an `MoveCommand[]` or collection like a `List&lt;MoveCommand&gt;`, and then iterate over the array/collection calling move() on each element, for example:\r\n\r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;MoveCommand&gt; commands = new ArrayList&lt;MoveCommand&gt;();\r\n    \t\tcommands.add(new MoveLeftCommand());\r\n    \t\tcommands.add(new MoveRightCommand());\r\n    \t\tcommands.add(new MoveLeftCommand());\r\n    \t\t\r\n    \t\tfor (MoveCommand command:commands) {\r\n    \t\t\tcommand.move();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    }\r\n\r\nPolymorphism is very powerful, and the above is a very simple example of something called the [Command Pattern][3]. Enjoy the rest of your Wumpus World implementation :)\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/tutorial/reflect/\r\n  [2]: http://java.sun.com/docs/books/tutorial/java/IandI/polymorphism.html\r\n  [3]: http://en.wikipedia.org/wiki/Command_pattern","title":"Can Java store methods in arrays?","body":"<p>Yes, you can store methods in arrays using <a href=\"http://java.sun.com/docs/books/tutorial/reflect/\" rel=\"noreferrer\">Reflection</a>, however it is likely that what you actually want to do in this situation is use <a href=\"http://java.sun.com/docs/books/tutorial/java/IandI/polymorphism.html\" rel=\"noreferrer\">polymorphism</a>.</p>\n\n<p>As an example of polymorphism in relation to your problem - say you created an interface as follows:</p>\n\n<pre><code>public interface MoveCommand {\n    void move();\n}\n</code></pre>\n\n<p>You can then create implementations as follows:</p>\n\n<pre><code>public class MoveLeftCommand implements MoveCommand {\n    public void move() {\n        System.out.println(\"LEFT\");\n    }\n}\n</code></pre>\n\n<p>etc. for the other move options. You could then store these in an <code>MoveCommand[]</code> or collection like a <code>List&lt;MoveCommand&gt;</code>, and then iterate over the array/collection calling move() on each element, for example:</p>\n\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        List&lt;MoveCommand&gt; commands = new ArrayList&lt;MoveCommand&gt;();\n        commands.add(new MoveLeftCommand());\n        commands.add(new MoveRightCommand());\n        commands.add(new MoveLeftCommand());\n\n        for (MoveCommand command:commands) {\n            command.move();\n        }\n    }\n\n}\n</code></pre>\n\n<p>Polymorphism is very powerful, and the above is a very simple example of something called the <a href=\"http://en.wikipedia.org/wiki/Command_pattern\" rel=\"noreferrer\">Command Pattern</a>. Enjoy the rest of your Wumpus World implementation :)</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1264961727,"creation_date":1264961727,"answer_id":2172736,"question_id":2172718,"body_markdown":"You can&#39;t call methods like that. But you can using reflection:\r\n\r\nJust change the first line in the while-loop to:\r\n\r\n    Method m = myWumps.getClass().getMethod(moveArray[i]); // if the method is void\r\n    m.invoke(myWumps);\r\n\r\n(you will have to declare/catch a few exceptions)\r\n\r\nBut you&#39;d better avoid reflection, and use the &lt;a href=&quot;http://en.wikipedia.org/wiki/Command_pattern&quot;&gt;Command pattern&lt;/a&gt; instead.","title":"Can Java store methods in arrays?","body":"<p>You can't call methods like that. But you can using reflection:</p>\n\n<p>Just change the first line in the while-loop to:</p>\n\n<pre><code>Method m = myWumps.getClass().getMethod(moveArray[i]); // if the method is void\nm.invoke(myWumps);\n</code></pre>\n\n<p>(you will have to declare/catch a few exceptions)</p>\n\n<p>But you'd better avoid reflection, and use the <a href=\"http://en.wikipedia.org/wiki/Command_pattern\" rel=\"noreferrer\">Command pattern</a> instead.</p>\n"},{"tags":[],"owner":{"account_id":1207,"reputation":19992,"user_id":1605,"accept_rate":100,"display_name":"Avi"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1264961840,"creation_date":1264961840,"answer_id":2172744,"question_id":2172718,"body_markdown":"You cannot store methods directly in arrays. However you can store objects, which implement the same method differently. For example:\r\n\r\n    Mover[] moveArray = {new RightMover(), new DownMover() new LeftMover(), new UpMover() };\r\n    for (i = 0; i &lt; 4; i++) {\r\n        while (myWumpus.moveArray[i]) {\r\n            moveArray[i].move();\r\n            generator.updateDisplay();\r\n        }\r\n    }\r\n","title":"Can Java store methods in arrays?","body":"<p>You cannot store methods directly in arrays. However you can store objects, which implement the same method differently. For example:</p>\n\n<pre><code>Mover[] moveArray = {new RightMover(), new DownMover() new LeftMover(), new UpMover() };\nfor (i = 0; i &lt; 4; i++) {\n    while (myWumpus.moveArray[i]) {\n        moveArray[i].move();\n        generator.updateDisplay();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2871213,"reputation":2241,"user_id":2464528,"accept_rate":29,"display_name":"cbender"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1548007618,"creation_date":1548006937,"answer_id":54279287,"question_id":2172718,"body_markdown":"Updated answer for Java 8 and onwards-\r\n\r\nSince the introduction of [lambda expressions][1] and [method references][2] in Java 8, storing various methods in variables is now possible. One main issue is that [arrays don&#39;t currently support generic objects in Java][3], which makes storing the methods in arrays less doable. However they can be stored in other data structures like a `List`.\r\n\r\nSo for some simple examples you can write something like:\r\n\r\n    List&lt;Comparator&lt;String&gt;&gt; stringComparators = new ArrayList&lt;&gt;();\r\n    Comparator&lt;String&gt; comp1 = (s1, s2) -&gt; Integer.compare(s1.length(), s2.length());\r\n    stringComparators.add(comp1);\r\nor\r\n\r\n    List&lt;Consumer&lt;String&gt;&gt; consumers = new ArrayList&lt;&gt;();\r\n    Consumer&lt;String&gt; consumer1 = System.out::println;\r\n    consumers.add(consumer1);\r\nand then loop/iterate through the `List` to get the methods.\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [3]: https://stackoverflow.com/a/7131673","title":"Can Java store methods in arrays?","body":"<p>Updated answer for Java 8 and onwards-</p>\n\n<p>Since the introduction of <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">lambda expressions</a> and <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method references</a> in Java 8, storing various methods in variables is now possible. One main issue is that <a href=\"https://stackoverflow.com/a/7131673\">arrays don't currently support generic objects in Java</a>, which makes storing the methods in arrays less doable. However they can be stored in other data structures like a <code>List</code>.</p>\n\n<p>So for some simple examples you can write something like:</p>\n\n<pre><code>List&lt;Comparator&lt;String&gt;&gt; stringComparators = new ArrayList&lt;&gt;();\nComparator&lt;String&gt; comp1 = (s1, s2) -&gt; Integer.compare(s1.length(), s2.length());\nstringComparators.add(comp1);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>List&lt;Consumer&lt;String&gt;&gt; consumers = new ArrayList&lt;&gt;();\nConsumer&lt;String&gt; consumer1 = System.out::println;\nconsumers.add(consumer1);\n</code></pre>\n\n<p>and then loop/iterate through the <code>List</code> to get the methods.</p>\n"}],"owner":{"account_id":83170,"reputation":1351,"user_id":233373,"accept_rate":100,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21032,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":2172744,"answer_count":5,"score":15,"last_activity_date":1661526600,"creation_date":1264961457,"question_id":2172718,"body_markdown":"Well I wrote some code and all I was doing was for loops, but changing which method I called. I tried using a for loop so it&#39;d be a bit neater (and out of curiosity to see if it could be done), but it doesn&#39;t compile when I do it this way, because it doesn&#39;t recognize an item in an array as a method, I think. This is what I have:\r\n\r\n    String[] moveArray = {moveRight,moveDown,moveLeft,moveUp};\r\n    for (i = 0; i &lt; 4; i++) {\r\n\t\twhile (myWumpus.moveArray[i]) {\r\n\t\t\tmyWumpus.moveArray[i];\r\n\t\t\tgenerator.updateDisplay();\r\n\t\t}\r\n    }\r\n\r\nWhen I try compile I get \r\n\r\n    not a statement myWumpus.moveArray[i]();\r\n    &#39;;&#39; expected myWumpus.moveArray[i]();\r\n\r\n(It refers to the first statement in the while loop)\r\n\r\nSo, I think it&#39;s maybe because I&#39;m making it an Array of type String? Is there a type Method? Is this at all possible? Any solutions welcome :). Also, I can get it to work using 4 while loops, so you don&#39;t need to show me that solution. ","title":"Can Java store methods in arrays?","body":"<p>Well I wrote some code and all I was doing was for loops, but changing which method I called. I tried using a for loop so it'd be a bit neater (and out of curiosity to see if it could be done), but it doesn't compile when I do it this way, because it doesn't recognize an item in an array as a method, I think. This is what I have:</p>\n<pre><code>String[] moveArray = {moveRight,moveDown,moveLeft,moveUp};\nfor (i = 0; i &lt; 4; i++) {\n    while (myWumpus.moveArray[i]) {\n        myWumpus.moveArray[i];\n        generator.updateDisplay();\n    }\n}\n</code></pre>\n<p>When I try compile I get</p>\n<pre><code>not a statement myWumpus.moveArray[i]();\n';' expected myWumpus.moveArray[i]();\n</code></pre>\n<p>(It refers to the first statement in the while loop)</p>\n<p>So, I think it's maybe because I'm making it an Array of type String? Is there a type Method? Is this at all possible? Any solutions welcome :). Also, I can get it to work using 4 while loops, so you don't need to show me that solution.</p>\n"},{"tags":["java","spring","spring-boot","maven","intellij-idea"],"comments":[{"owner":{"account_id":11179248,"reputation":11900,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1655715748,"post_id":72683786,"comment_id":128389148,"body_markdown":"What the version of IntelliJ IDEA? That should have been fixed in 2022.1 in the scope of [this bug](https://youtrack.jetbrains.com/issue/IDEA-290419/Maven-385-NoSuchMethodError-orgapachemavenmodelvalidationDefaultModelValidator-method-void-init-not-found)","body":"What the version of IntelliJ IDEA? That should have been fixed in 2022.1 in the scope of <a href=\"https://youtrack.jetbrains.com/issue/IDEA-290419/Maven-385-NoSuchMethodError-orgapachemavenmodelvalidationDefaultModelValidator-method-void-init-not-found\" rel=\"nofollow noreferrer\">this bug</a>"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1655716586,"post_id":72683786,"comment_id":128389430,"body_markdown":"Please show the pom file for that project..also more log output of that error ... Check to build on plain command line... not inside of IDEA..","body":"Please show the pom file for that project..also more log output of that error ... Check to build on plain command line... not inside of IDEA.."},{"owner":{"account_id":10850313,"reputation":804,"user_id":7978268,"display_name":"Austine Gwa"},"score":0,"creation_date":1655723484,"post_id":72683786,"comment_id":128391671,"body_markdown":"was running a version 2021.2  updated and fixed the issue @KonstantinAnnikov thank you","body":"was running a version 2021.2  updated and fixed the issue @KonstantinAnnikov thank you"}],"answers":[{"tags":[],"owner":{"account_id":11179248,"reputation":11900,"user_id":8203759,"display_name":"Konstantin Annikov"},"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1655723530,"creation_date":1655723530,"answer_id":72686220,"question_id":72683786,"body_markdown":"That should have been fixed in 2022.1 in the scope of [this bug](https://youtrack.jetbrains.com/issue/IDEA-290419/Maven-385-NoSuchMethodError-orgapachemavenmodelvalidationDefaultModelValidator-method-void-init-not-found)\r\n\r\nPlease update your IDE","title":"Error while importing Springboot 2.7 projects in intellij Idea with maven 3.8.5","body":"<p>That should have been fixed in 2022.1 in the scope of <a href=\"https://youtrack.jetbrains.com/issue/IDEA-290419/Maven-385-NoSuchMethodError-orgapachemavenmodelvalidationDefaultModelValidator-method-void-init-not-found\" rel=\"noreferrer\">this bug</a></p>\n<p>Please update your IDE</p>\n"},{"tags":[],"owner":{"account_id":25789363,"reputation":81,"user_id":19533682,"display_name":"Ilya Polanskiy"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1657622643,"creation_date":1657622643,"answer_id":72951023,"question_id":72683786,"body_markdown":"I had the same error with stack: IDEA 2019.3, Maven 3.8.6, JDK 1.8.\r\nSo, problem was resolved by change Maven to version 3.6.1\r\n\r\n","title":"Error while importing Springboot 2.7 projects in intellij Idea with maven 3.8.5","body":"<p>I had the same error with stack: IDEA 2019.3, Maven 3.8.6, JDK 1.8.\nSo, problem was resolved by change Maven to version 3.6.1</p>\n"},{"tags":[],"owner":{"account_id":21116996,"reputation":70,"user_id":15523899,"display_name":"p0var"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658951610,"creation_date":1658951610,"answer_id":73143901,"question_id":72683786,"body_markdown":"I&#39;ve just ran into this problem 20mins ago with my friend&#39;s project. The solution is just perfect.\r\nIf you don&#39;t want to update your IDE (for any reason) or downgrade yor Maven version, you just need to change your Maven Home path: (File | Settings | Build,...etc. | Build Tools | Maven) for any listed variant except &quot;...wrapper&quot;.\r\nGenerally, I use separated maven in C:/my-maven-folder/...wrapper, so I&#39;ve never had such a problem. Hope it helps!","title":"Error while importing Springboot 2.7 projects in intellij Idea with maven 3.8.5","body":"<p>I've just ran into this problem 20mins ago with my friend's project. The solution is just perfect.\nIf you don't want to update your IDE (for any reason) or downgrade yor Maven version, you just need to change your Maven Home path: (File | Settings | Build,...etc. | Build Tools | Maven) for any listed variant except &quot;...wrapper&quot;.\nGenerally, I use separated maven in C:/my-maven-folder/...wrapper, so I've never had such a problem. Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":11445284,"reputation":631,"user_id":8389388,"display_name":"Pines Tran"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1660066374,"creation_date":1660066374,"answer_id":73295929,"question_id":72683786,"body_markdown":"Under Intellij **File** &gt; **Setting** &gt; **Build Execution...** &gt; **Build tools** &gt; **Maven** &gt; **Maven home path** just point to your maven directory:\r\n[![enter image description here][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qX26l.png\r\n\r\nApply and reload project.","title":"Error while importing Springboot 2.7 projects in intellij Idea with maven 3.8.5","body":"<p>Under Intellij <strong>File</strong> &gt; <strong>Setting</strong> &gt; <strong>Build Execution...</strong> &gt; <strong>Build tools</strong> &gt; <strong>Maven</strong> &gt; <strong>Maven home path</strong> just point to your maven directory:\n<a href=\"https://i.stack.imgur.com/qX26l.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qX26l.png\" alt=\"enter image description here\" /></a></p>\n<p>Apply and reload project.</p>\n"}],"owner":{"account_id":10850313,"reputation":804,"user_id":7978268,"display_name":"Austine Gwa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25878,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":72686220,"answer_count":4,"score":23,"last_activity_date":1661526449,"creation_date":1655711386,"question_id":72683786,"body_markdown":"when Using start.spring.io \r\nprojects generated with springboot 2.7 comes with MavenProject 3.8.5 which when imported in intellij causes an error that is quite difficult to debug or not self speaking by itself.\r\n\r\nThe error\r\n```\r\njava.lang.RuntimeException: org.codehaus.plexus.component.repository.exception.ComponentLookupException: com.google.inject.ProvisionException: Unable to provision, see the following errors:\r\n\r\n1) Error injecting constructor, java.lang.NoSuchMethodError: org.apache.maven.model.validation.DefaultModelValidator: method &#39;void &lt;init&gt;()&#39; not found\r\n  at org.jetbrains.idea.maven.server.embedder.CustomModelValidator.&lt;init&gt;(Unknown Source)\r\n  while locating org.jetbrains.idea.maven.server.embedder.CustomModelValidator\r\n  at ClassRealm[maven.ext, parent: ClassRealm[plexus.core, parent: null]] (via modules: org.eclipse.sisu.wire.WireModule -&gt; org.eclipse.sisu.plexus.PlexusBindingModule)\r\n  while locating org.apache.maven.model.validation.ModelValidator annotated with @com.google.inject.name.Named(value=&quot;ide&quot;)\r\n\r\n1 error\r\n      role: org.apache.maven.model.validation.ModelValidator\r\n  roleHint: ide\r\n``` \r\n\r\n\r\n","title":"Error while importing Springboot 2.7 projects in intellij Idea with maven 3.8.5","body":"<p>when Using start.spring.io\nprojects generated with springboot 2.7 comes with MavenProject 3.8.5 which when imported in intellij causes an error that is quite difficult to debug or not self speaking by itself.</p>\n<p>The error</p>\n<pre><code>java.lang.RuntimeException: org.codehaus.plexus.component.repository.exception.ComponentLookupException: com.google.inject.ProvisionException: Unable to provision, see the following errors:\n\n1) Error injecting constructor, java.lang.NoSuchMethodError: org.apache.maven.model.validation.DefaultModelValidator: method 'void &lt;init&gt;()' not found\n  at org.jetbrains.idea.maven.server.embedder.CustomModelValidator.&lt;init&gt;(Unknown Source)\n  while locating org.jetbrains.idea.maven.server.embedder.CustomModelValidator\n  at ClassRealm[maven.ext, parent: ClassRealm[plexus.core, parent: null]] (via modules: org.eclipse.sisu.wire.WireModule -&gt; org.eclipse.sisu.plexus.PlexusBindingModule)\n  while locating org.apache.maven.model.validation.ModelValidator annotated with @com.google.inject.name.Named(value=&quot;ide&quot;)\n\n1 error\n      role: org.apache.maven.model.validation.ModelValidator\n  roleHint: ide\n</code></pre>\n"},{"tags":["java","angular","date","localdate"],"comments":[{"owner":{"account_id":2654026,"reputation":4819,"user_id":2295103,"display_name":"MikeOne"},"score":0,"creation_date":1661510403,"post_id":73499525,"comment_id":129794790,"body_markdown":"Start by looking at your network console and see what the payload of your PUT is..","body":"Start by looking at your network console and see what the payload of your PUT is.."},{"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"score":0,"creation_date":1661511070,"post_id":73499525,"comment_id":129795022,"body_markdown":"it sends de dates but Java can&#39;t read it so it sets them as null","body":"it sends de dates but Java can&#39;t read it so it sets them as null"},{"owner":{"account_id":2654026,"reputation":4819,"user_id":2295103,"display_name":"MikeOne"},"score":0,"creation_date":1661511176,"post_id":73499525,"comment_id":129795064,"body_markdown":"Requests are using json. Which means as soon as hou sent something, an object is serialized to a string. You’d have to parse this string back to the object you need on the server side. No way around it really.","body":"Requests are using json. Which means as soon as hou sent something, an object is serialized to a string. You’d have to parse this string back to the object you need on the server side. No way around it really."},{"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"score":0,"creation_date":1661511334,"post_id":73499525,"comment_id":129795115,"body_markdown":"But why only with the date? It has no problems with any other attribute.  Also, when it enters the controller, it is already null, so I cannot change anything really.","body":"But why only with the date? It has no problems with any other attribute.  Also, when it enters the controller, it is already null, so I cannot change anything really."}],"answers":[{"tags":[],"owner":{"account_id":22341068,"reputation":692,"user_id":16560836,"display_name":"yezper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661511368,"creation_date":1661511368,"answer_id":73499937,"question_id":73499525,"body_markdown":"*Java* `LocalDate` is a date without any time info and no timezone info - just the information of the date, such as 12th August of 2022. Now the Spring Server and the Angular Client have to agree on a common format to communicate this information. In [JSR-310][1] this is in the date format of **&quot;yyyy-MM-dd&quot;**. In order to enforce *Spring* to use this type of Serialization/Deserialization when faced with JSON you have to configure it that way.\r\n    \r\n    // add depedency\r\n    compile (&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;)\r\nAnd add this to your DTO\r\n\r\n    @JsonDeserialize(using = LocalDateDeserializer.class)\r\n    @JsonSerialize(using = LocalDateSerializer.class)\r\n    private LocalDate date;\r\n\r\nNow on the Angular part you have to convert your Date object to adhere to the format, too. Therefore, maybe do something like this with [day.js][2]:\r\n\r\n    Date.prototype.toJSON = function() {\r\n      return dayjs(d).format(&quot;yyyy-MM-dd&quot;)\r\n    };\r\nNote that my solution is just a dirty approach and not tested.\r\n\r\n  [1]: https://jcp.org/en/jsr/detail?id=310\r\n  [2]: https://day.js.org/en/","title":"How to pass array of dates from angular to java","body":"<p><em>Java</em> <code>LocalDate</code> is a date without any time info and no timezone info - just the information of the date, such as 12th August of 2022. Now the Spring Server and the Angular Client have to agree on a common format to communicate this information. In <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR-310</a> this is in the date format of <strong>&quot;yyyy-MM-dd&quot;</strong>. In order to enforce <em>Spring</em> to use this type of Serialization/Deserialization when faced with JSON you have to configure it that way.</p>\n<pre><code>// add depedency\ncompile (&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;)\n</code></pre>\n<p>And add this to your DTO</p>\n<pre><code>@JsonDeserialize(using = LocalDateDeserializer.class)\n@JsonSerialize(using = LocalDateSerializer.class)\nprivate LocalDate date;\n</code></pre>\n<p>Now on the Angular part you have to convert your Date object to adhere to the format, too. Therefore, maybe do something like this with <a href=\"https://day.js.org/en/\" rel=\"nofollow noreferrer\">day.js</a>:</p>\n<pre><code>Date.prototype.toJSON = function() {\n  return dayjs(d).format(&quot;yyyy-MM-dd&quot;)\n};\n</code></pre>\n<p>Note that my solution is just a dirty approach and not tested.</p>\n"}],"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73499937,"answer_count":1,"score":1,"last_activity_date":1661525806,"creation_date":1661509378,"question_id":73499525,"body_markdown":"I&#39;m sending an array holding objects which hold a date-attribute from angular to spring rest API. In the rest API this attribute is a LocalDate. Java takes all the the date attributes as null objects. How can I make sure the values get passed correct? \r\n\r\nI&#39;ve found this similar topic:\r\n- https://stackoverflow.com/questions/57371807/how-to-convert-date-type-angular-to-localdate-in-java#:~:text=If%20you%20just%20want%20to,yyyy%2DMM%2Ddd%22%20.\r\n\r\nI have tried converting the date into a string which did not help.\r\nMy question is different since I want to send an array holding objects which have a date attribute. So I cannot just send 1 date using params. Here below I posted the angular models and the service:\r\n\r\n``` \r\nexport interface DaysOfMonth {\r\n    dayType: DayTypes;\r\n    workingHours: number;\r\n    date: Date;\r\n}\r\n\r\nexport interface MonthObject {\r\n    year: number;\r\n    month: number;\r\n    daysOfMonth: DaysOfMonth[];\r\n}\r\n\r\nexport interface TimeSheet {\r\n    id: number;\r\n    username: string;\r\n    status: Status;\r\n    year: number;\r\n    month: number;\r\n    monthObject: MonthObject;\r\n}\r\n```\r\n\r\nservice:\r\n\r\n``` \r\n@Injectable({\r\n  providedIn: &#39;root&#39;\r\n})\r\nexport class TimesheetService {\r\n\r\n  constructor(private http: HttpClient, private datePipe: DatePipe) { }\r\n\r\n\r\n  updateDaytype(sheet: TimeSheet): Observable&lt;TimeSheet&gt;{\r\n    console.log(&quot;updateDaytype reached&quot;)\r\n    const url = environment.TIMESHEETSAPI_URL + &quot;timesheets/updateSheetById&quot;;\r\n    return this.http.put&lt;TimeSheet&gt;(url, sheet);\r\n  }\r\n}\r\n```\r\n","title":"How to pass array of dates from angular to java","body":"<p>I'm sending an array holding objects which hold a date-attribute from angular to spring rest API. In the rest API this attribute is a LocalDate. Java takes all the the date attributes as null objects. How can I make sure the values get passed correct?</p>\n<p>I've found this similar topic:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/57371807/how-to-convert-date-type-angular-to-localdate-in-java#:%7E:text=If%20you%20just%20want%20to,yyyy%2DMM%2Ddd%22%20\">https://stackoverflow.com/questions/57371807/how-to-convert-date-type-angular-to-localdate-in-java#:~:text=If%20you%20just%20want%20to,yyyy%2DMM%2Ddd%22%20</a>.</li>\n</ul>\n<p>I have tried converting the date into a string which did not help.\nMy question is different since I want to send an array holding objects which have a date attribute. So I cannot just send 1 date using params. Here below I posted the angular models and the service:</p>\n<pre><code>export interface DaysOfMonth {\n    dayType: DayTypes;\n    workingHours: number;\n    date: Date;\n}\n\nexport interface MonthObject {\n    year: number;\n    month: number;\n    daysOfMonth: DaysOfMonth[];\n}\n\nexport interface TimeSheet {\n    id: number;\n    username: string;\n    status: Status;\n    year: number;\n    month: number;\n    monthObject: MonthObject;\n}\n</code></pre>\n<p>service:</p>\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class TimesheetService {\n\n  constructor(private http: HttpClient, private datePipe: DatePipe) { }\n\n\n  updateDaytype(sheet: TimeSheet): Observable&lt;TimeSheet&gt;{\n    console.log(&quot;updateDaytype reached&quot;)\n    const url = environment.TIMESHEETSAPI_URL + &quot;timesheets/updateSheetById&quot;;\n    return this.http.put&lt;TimeSheet&gt;(url, sheet);\n  }\n}\n</code></pre>\n"},{"tags":["java","groovy","cucumber","cucumber-jvm","cucumber-java"],"comments":[{"owner":{"account_id":4944314,"reputation":149,"user_id":3980164,"display_name":"Slev Florin"},"score":0,"creation_date":1669222006,"post_id":73487600,"comment_id":131597151,"body_markdown":"You might find [cucumber-jutils](https://github.com/fslev/cucumber-jutils) useful for scenario variables support","body":"You might find <a href=\"https://github.com/fslev/cucumber-jutils\" rel=\"nofollow noreferrer\">cucumber-jutils</a> useful for scenario variables support"}],"answers":[{"tags":[],"owner":{"account_id":4086750,"reputation":2070,"user_id":3355860,"display_name":"ou_ryperd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661525218,"creation_date":1661444846,"answer_id":73490890,"question_id":73487600,"body_markdown":"You do it with a variable and pattern matching, like this:\r\n\r\nGherkin:\r\n\r\n    Given User is logging into &quot;dev1&quot;\r\n\r\nGroovy:\r\n\r\n    Given(~/^User is logging into &quot;([^&quot;]*)&quot;$/) { String env -&gt;\r\n        println env\r\n    }\r\n\r\nor Java 8 and later:\r\n\r\n    Given(&quot;User is logging into {String}&quot;, (String env) -&gt; {\r\n        System.out.println(env);\r\n    });","title":"How to pass variables from features to cucumber glue","body":"<p>You do it with a variable and pattern matching, like this:</p>\n<p>Gherkin:</p>\n<pre><code>Given User is logging into &quot;dev1&quot;\n</code></pre>\n<p>Groovy:</p>\n<pre><code>Given(~/^User is logging into &quot;([^&quot;]*)&quot;$/) { String env -&gt;\n    println env\n}\n</code></pre>\n<p>or Java 8 and later:</p>\n<pre><code>Given(&quot;User is logging into {String}&quot;, (String env) -&gt; {\n    System.out.println(env);\n});\n</code></pre>\n"}],"owner":{"account_id":25898952,"reputation":21,"user_id":19625157,"display_name":"sb1234"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":274,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73490890,"answer_count":1,"score":0,"last_activity_date":1661525218,"creation_date":1661430845,"question_id":73487600,"body_markdown":"How do you pass a variable from the feature to the glue in Cucumber? I am trying to pass the &quot;dev1&quot; from the given background part of the feature to the glue so it can be printed out. I have tried following the instructions from [cucumber][1], but it doesn&#39;t seem to be working. The glue is written in groovy. The j variables are just for me to stick breakpoints on.\r\n\r\n_________________________________________________________________\r\n\r\n    Feature\r\n    Feature: Tas Tcid Ruid Mappings\r\n    \r\n      Background: Logging into database\r\n        Given User is logging into &quot;dev1&quot;\r\n        When User submits name and password\r\n        Then User is logged in\r\n    \r\n      @Weekly\r\n      Scenario: Default No TCID RUID Mapping\r\n        Given TCID RUID mapping is empty\r\n        And a deal added with valid TCID to RUID mapping\r\n        When the deal is submitted via an add_deal message as a standard publisher\r\n        And receive a receiver notification\r\n        Then recover receiver\r\n    \r\n      @Daily\r\n      Scenario: Default No TCID RUID Mapping2\r\n        Given TCID RUID mapping is empty\r\n        And a deal added with valid TCID to RUID mapping\r\n        When the deal is submitted via an add_deal message as a standard publisher\r\n        And receive a receiver notification\r\n        Then recover receiver\r\n\r\n___________________________________________\r\n\r\n    Glue\r\n    package cucumber.stepDefinitions.addDeal\r\n    \r\n    import com.reuters.adt.dev.regression.tests.BaseTest\r\n    import com.reuters.adt.dev.regression.utils.TestRunException\r\n    import io.cucumber.java.en.*\r\n    import org.junit.Assert\r\n    \r\n    class StepDefinitionsNoRuidMapping extends BaseTest{\r\n    \r\n        @Given(&quot;User is logging into \\&quot;{string}\\&quot;&quot;)\r\n        GivenUserIsLoggingIn(String devEnv) {\r\n            println(devEnv)\r\n            def j=1+1\r\n        }\r\n    \r\n        @When(&quot;User submits name and password&quot;)\r\n        WhenUserSubmitsNameAndPassword() {\r\n            def j=1+1\r\n        }\r\n    \r\n        @Then(&quot;User is logged in&quot;)\r\n        ThenUserIsLoggedIn() {\r\n            Assert.assertTrue(true)\r\n            def j=1+1\r\n        }\r\n    \r\n        @Given(&quot;TCID RUID mapping is empty&quot;)\r\n        GivenDealNotifyAnLBNViaMoreThanOneParty() {\r\n            def j=1+1\r\n        }\r\n    \r\n    \r\n    \r\n        @And(&quot;a deal added with valid TCID to RUID mapping&quot;)\r\n        DealAddedWithValidTCIDToRUIDMappiing() {\r\n            def j=1+1\r\n        }\r\n    \r\n        @When(&quot;the deal is submitted via an add_deal message as a standard publisher&quot;)\r\n        DealSubmittedByAddDealAsAStandardPublisher() {\r\n            def j=1+1\r\n        }\r\n    \r\n        @And(&quot;receive a receiver notification&quot;)\r\n        ReceivedReceiverNotification() {\r\n            def j=1+1\r\n        }\r\n    \r\n        @Then(&quot;recover receiver&quot;)\r\n        ExpectNAck() {\r\n            Assert.assertTrue(true)\r\n            def j=1+1\r\n        }\r\n    \r\n        @Override\r\n        protected void runTest() throws TestRunException {\r\n    \r\n        }\r\n    }\r\n\r\n_____________________________________________\r\nThank you for any help in advance :)\r\n\r\n\r\n  [1]: https://cucumber.io/docs/cucumber/step-definitions/?lang=java","title":"How to pass variables from features to cucumber glue","body":"<p>How do you pass a variable from the feature to the glue in Cucumber? I am trying to pass the &quot;dev1&quot; from the given background part of the feature to the glue so it can be printed out. I have tried following the instructions from <a href=\"https://cucumber.io/docs/cucumber/step-definitions/?lang=java\" rel=\"nofollow noreferrer\">cucumber</a>, but it doesn't seem to be working. The glue is written in groovy. The j variables are just for me to stick breakpoints on.</p>\n<hr />\n<pre><code>Feature\nFeature: Tas Tcid Ruid Mappings\n\n  Background: Logging into database\n    Given User is logging into &quot;dev1&quot;\n    When User submits name and password\n    Then User is logged in\n\n  @Weekly\n  Scenario: Default No TCID RUID Mapping\n    Given TCID RUID mapping is empty\n    And a deal added with valid TCID to RUID mapping\n    When the deal is submitted via an add_deal message as a standard publisher\n    And receive a receiver notification\n    Then recover receiver\n\n  @Daily\n  Scenario: Default No TCID RUID Mapping2\n    Given TCID RUID mapping is empty\n    And a deal added with valid TCID to RUID mapping\n    When the deal is submitted via an add_deal message as a standard publisher\n    And receive a receiver notification\n    Then recover receiver\n</code></pre>\n<hr />\n<pre><code>Glue\npackage cucumber.stepDefinitions.addDeal\n\nimport com.reuters.adt.dev.regression.tests.BaseTest\nimport com.reuters.adt.dev.regression.utils.TestRunException\nimport io.cucumber.java.en.*\nimport org.junit.Assert\n\nclass StepDefinitionsNoRuidMapping extends BaseTest{\n\n    @Given(&quot;User is logging into \\&quot;{string}\\&quot;&quot;)\n    GivenUserIsLoggingIn(String devEnv) {\n        println(devEnv)\n        def j=1+1\n    }\n\n    @When(&quot;User submits name and password&quot;)\n    WhenUserSubmitsNameAndPassword() {\n        def j=1+1\n    }\n\n    @Then(&quot;User is logged in&quot;)\n    ThenUserIsLoggedIn() {\n        Assert.assertTrue(true)\n        def j=1+1\n    }\n\n    @Given(&quot;TCID RUID mapping is empty&quot;)\n    GivenDealNotifyAnLBNViaMoreThanOneParty() {\n        def j=1+1\n    }\n\n\n\n    @And(&quot;a deal added with valid TCID to RUID mapping&quot;)\n    DealAddedWithValidTCIDToRUIDMappiing() {\n        def j=1+1\n    }\n\n    @When(&quot;the deal is submitted via an add_deal message as a standard publisher&quot;)\n    DealSubmittedByAddDealAsAStandardPublisher() {\n        def j=1+1\n    }\n\n    @And(&quot;receive a receiver notification&quot;)\n    ReceivedReceiverNotification() {\n        def j=1+1\n    }\n\n    @Then(&quot;recover receiver&quot;)\n    ExpectNAck() {\n        Assert.assertTrue(true)\n        def j=1+1\n    }\n\n    @Override\n    protected void runTest() throws TestRunException {\n\n    }\n}\n</code></pre>\n<hr />\n<p>Thank you for any help in advance :)</p>\n"},{"tags":["java","tomcat","tomcat7","filewriter","printwriter"],"comments":[{"owner":{"account_id":1138001,"reputation":22629,"user_id":1122645,"accept_rate":89,"display_name":"UmNyobe"},"score":0,"creation_date":1338042991,"post_id":10767117,"comment_id":13997625,"body_markdown":"where did you look for your data file?","body":"where did you look for your data file?"},{"owner":{"account_id":937023,"reputation":5933,"user_id":965778,"accept_rate":70,"display_name":"JavaSa"},"score":0,"creation_date":1338043077,"post_id":10767117,"comment_id":13997643,"body_markdown":"It&#39;s a java web application generated on NetBeans , so I checked all the project directory and sub-directories","body":"It&#39;s a java web application generated on NetBeans , so I checked all the project directory and sub-directories"},{"owner":{"account_id":156080,"reputation":34079,"user_id":373151,"accept_rate":74,"display_name":"Hari Menon"},"score":0,"creation_date":1338043226,"post_id":10767117,"comment_id":13997688,"body_markdown":"I fit did not through some exception, it has generated the file. You might be looking at the wrong place. Try giving the absolute path.","body":"I fit did not through some exception, it has generated the file. You might be looking at the wrong place. Try giving the absolute path."},{"owner":{"account_id":1491196,"reputation":3928,"user_id":1398245,"accept_rate":100,"display_name":"Jamie"},"score":0,"creation_date":1338043653,"post_id":10767117,"comment_id":13997768,"body_markdown":"Try calling `m_Writer.flush()` before you close m_Writer.","body":"Try calling <code>m_Writer.flush()</code> before you close m_Writer."},{"owner":{"account_id":401367,"reputation":23742,"user_id":767881,"accept_rate":14,"display_name":"Ravinder Reddy"},"score":0,"creation_date":1338043737,"post_id":10767117,"comment_id":13997788,"body_markdown":"Unless you specify a path, files will be created under your IDE&#39;s workspace path. Check that folder.","body":"Unless you specify a path, files will be created under your IDE&#39;s workspace path. Check that folder."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1338044492,"post_id":10767117,"comment_id":13997961,"body_markdown":"It will be created in the directory from which NetBeans starts your application server. Use absolute paths.","body":"It will be created in the directory from which NetBeans starts your application server. Use absolute paths."},{"owner":{"account_id":13599981,"reputation":56,"user_id":9810926,"display_name":"SanderGeek"},"score":0,"creation_date":1571667308,"post_id":10767117,"comment_id":103306852,"body_markdown":"[This was the problem in my case!](https://stackoverflow.com/questions/12126987/java-mkdir-not-writing-directory)","body":"<a href=\"https://stackoverflow.com/questions/12126987/java-mkdir-not-writing-directory\">This was the problem in my case!</a>"}],"answers":[{"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1338124975,"creation_date":1338124584,"answer_id":10774266,"question_id":10767117,"body_markdown":"It seems plain that you don&#39;t have permission to create that file where you&#39;re trying to create it, hence the &quot;Access denied&quot; message. You&#39;d need to find a directory where you&#39;re allowed to create files. If you&#39;re not sure where a file is going to be created, you can see its full path with [`File.getAbsolutePath()`][1] or [`File.getCanonicalPath()`][2].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getAbsolutePath%28%29\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getCanonicalPath%28%29","title":"Why FileWriter doesn&#39;t create a new file?","body":"<p>It seems plain that you don't have permission to create that file where you're trying to create it, hence the \"Access denied\" message. You'd need to find a directory where you're allowed to create files. If you're not sure where a file is going to be created, you can see its full path with <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getAbsolutePath%28%29\" rel=\"nofollow\"><code>File.getAbsolutePath()</code></a> or <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getCanonicalPath%28%29\" rel=\"nofollow\"><code>File.getCanonicalPath()</code></a>.</p>\n"}],"owner":{"account_id":937023,"reputation":5933,"user_id":965778,"accept_rate":70,"display_name":"JavaSa"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9245,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":10774266,"answer_count":1,"score":4,"last_activity_date":1661525211,"creation_date":1338042885,"question_id":10767117,"body_markdown":"Consider the following code:  \r\n\r\n     m_Writer = new PrintWriter(new FileWriter(&quot;LoginHistory.dat&quot;)); \r\n     m_Writer.println(Integer.toString(s_NumOfLogins)); \r\n     m_Writer.println(m_LoginHistoryStr);\r\n     m_Writer.close();   \r\nAny ideas why I don&#39;t find any file called LoginHistory.dat?  \r\nThanks\r\n\r\nUpdate: I&#39;ve just found that I get an exception after line:  \r\n\r\n    m_Writer = new PrintWriter(new FileWriter(&quot;LoginHistory.dat&quot;));\r\n\r\nand its details are:  \r\nAny ideas what is the real problem?    \r\n\r\n    Listening for transport dt_shmem at address: tomcat_shared_memory_id\r\n    27/05/2012 15:52:17 org.apache.catalina.startup.HostConfig checkResources\r\n    INFO: Undeploying context [/SignInAndGetIp]\r\n    27/05/2012 15:52:17 org.apache.catalina.startup.HostConfig deployDescriptor\r\n    INFO: Deploying configuration descriptor SignInAndGetIp.xml from C:\\Users\\user\\.netbeans\\7.1.2\\apache-tomcat-7.0.22.0_base\\conf\\Catalina\\localhost\r\n    27/05/2012 15:52:17 org.apache.catalina.util.LifecycleBase start\r\n    INFO: The start() method was called on component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/SignInAndGetIp]] after start() had already been called. The second call will be ignored.\r\n    java.io.FileNotFoundException: LoginHistory.dat (‏‏Access denied)\r\n    \tat java.io.FileOutputStream.open(Native Method)\r\n    \tat java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:179)\r\n    \tat java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:70)\r\n    \tat java.io.FileWriter.&lt;init&gt;(FileWriter.java:46)\r\n    \tat signIn.SignInAndShowIPTableServlet.init(SignInAndShowIPTableServlet.java:60)\r\n    \tat javax.servlet.GenericServlet.init(GenericServlet.java:160)\r\n    \tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)\r\n    \tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)\r\n    \tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:836)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n    \tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n    \tat java.lang.Thread.run(Thread.java:662)\r\n\r\n","title":"Why FileWriter doesn&#39;t create a new file?","body":"<p>Consider the following code:  </p>\n\n<pre><code> m_Writer = new PrintWriter(new FileWriter(\"LoginHistory.dat\")); \n m_Writer.println(Integer.toString(s_NumOfLogins)); \n m_Writer.println(m_LoginHistoryStr);\n m_Writer.close();   \n</code></pre>\n\n<p>Any ideas why I don't find any file called LoginHistory.dat?<br>\nThanks</p>\n\n<p>Update: I've just found that I get an exception after line:  </p>\n\n<pre><code>m_Writer = new PrintWriter(new FileWriter(\"LoginHistory.dat\"));\n</code></pre>\n\n<p>and its details are:<br>\nAny ideas what is the real problem?    </p>\n\n<pre><code>Listening for transport dt_shmem at address: tomcat_shared_memory_id\n27/05/2012 15:52:17 org.apache.catalina.startup.HostConfig checkResources\nINFO: Undeploying context [/SignInAndGetIp]\n27/05/2012 15:52:17 org.apache.catalina.startup.HostConfig deployDescriptor\nINFO: Deploying configuration descriptor SignInAndGetIp.xml from C:\\Users\\user\\.netbeans\\7.1.2\\apache-tomcat-7.0.22.0_base\\conf\\Catalina\\localhost\n27/05/2012 15:52:17 org.apache.catalina.util.LifecycleBase start\nINFO: The start() method was called on component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/SignInAndGetIp]] after start() had already been called. The second call will be ignored.\njava.io.FileNotFoundException: LoginHistory.dat (‏‏Access denied)\n    at java.io.FileOutputStream.open(Native Method)\n    at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:179)\n    at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:70)\n    at java.io.FileWriter.&lt;init&gt;(FileWriter.java:46)\n    at signIn.SignInAndShowIPTableServlet.init(SignInAndShowIPTableServlet.java:60)\n    at javax.servlet.GenericServlet.init(GenericServlet.java:160)\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:836)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662)\n</code></pre>\n"},{"tags":["java","powershell","shell","maven","cmd"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1661348784,"post_id":73474308,"comment_id":129751203,"body_markdown":"Why you want to do this","body":"Why you want to do this"},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1661348846,"post_id":73474308,"comment_id":129751229,"body_markdown":"@Jens Because maven (maven-resources-plugin) generates my resource files with Windows line separator, I want them to be with unix line separator. So I found somewhere that this is the fix I should do.","body":"@Jens Because maven (maven-resources-plugin) generates my resource files with Windows line separator, I want them to be with unix line separator. So I found somewhere that this is the fix I should do."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661349089,"post_id":73474308,"comment_id":129751327,"body_markdown":"Have you tried to put it in single or double quotes?","body":"Have you tried to put it in single or double quotes?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661349290,"post_id":73474308,"comment_id":129751415,"body_markdown":"[see also](https://stackoverflow.com/q/13288030/592355)","body":"<a href=\"https://stackoverflow.com/q/13288030/592355\">see also</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661349396,"post_id":73474308,"comment_id":129751453,"body_markdown":"And &quot;maven-resources-plugin generates..&quot; is somewhat strange, because it should &quot;only copy&quot; and &quot;little filter&quot;... under circumstances","body":"And &quot;maven-resources-plugin generates..&quot; is somewhat strange, because it should &quot;only copy&quot; and &quot;little filter&quot;... under circumstances"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661349574,"post_id":73474308,"comment_id":129751530,"body_markdown":"..and the files under &quot;resources&quot; are normally managed by version control (auto-crlf!?)","body":"..and the files under &quot;resources&quot; are normally managed by version control (auto-crlf!?)"},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1661353778,"post_id":73474308,"comment_id":129753460,"body_markdown":"Yes, I am starting to think now it is related to git. I am on a new laptop so... That might be related","body":"Yes, I am starting to think now it is related to git. I am on a new laptop so... That might be related"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1661355160,"post_id":73474308,"comment_id":129754089,"body_markdown":"As @xerx593 says, resource files are seldom &quot;generated&quot; during builds - they are *copied*. I&#39;m not sure why it matters though, as rarely does software get confused by platform-specific line separators","body":"As @xerx593 says, resource files are seldom &quot;generated&quot; during builds - they are <i>copied</i>. I&#39;m not sure why it matters though, as rarely does software get confused by platform-specific line separators"},{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":0,"creation_date":1661357679,"post_id":73474308,"comment_id":129755117,"body_markdown":"Your git client can try and convert line endings from what is in the repo to what the local OS normally uses. This is often a bad idea. Check out settings such as ``core.autocrlf`` which tells git not to touch line endings as it pulls down code.","body":"Your git client can try and convert line endings from what is in the repo to what the local OS normally uses. This is often a bad idea. Check out settings such as <code>core.autocrlf</code> which tells git not to touch line endings as it pulls down code."},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1661362690,"post_id":73474308,"comment_id":129756814,"body_markdown":"I could not find a way to override from commandline, but you can implement cross platform line endings with [PrintWriter override](https://stackoverflow.com/questions/63144771/how-can-i-force-java-stdout-on-windows-to-use-the-n-line-seperator/63149515#63149515).","body":"I could not find a way to override from commandline, but you can implement cross platform line endings with <a href=\"https://stackoverflow.com/questions/63144771/how-can-i-force-java-stdout-on-windows-to-use-the-n-line-seperator/63149515#63149515\">PrintWriter override</a>."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1661366338,"post_id":73474308,"comment_id":129758037,"body_markdown":"@JohnXF I know these settings, I never understood which one to use exactly. But my question still stands as is. I am curious how to pass that \\n from the Windows cmd prompt.","body":"@JohnXF I know these settings, I never understood which one to use exactly. But my question still stands as is. I am curious how to pass that \\n from the Windows cmd prompt."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1661368546,"post_id":73474308,"comment_id":129758760,"body_markdown":"@DuncG I don&#39;t want to implement anything. I just want to pass a value for this property to the JVM.","body":"@DuncG I don&#39;t want to implement anything. I just want to pass a value for this property to the JVM."}],"answers":[{"tags":[],"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661415643,"creation_date":1661415643,"answer_id":73484178,"question_id":73474308,"body_markdown":"After a bit of investigation ... you do set the value by passing an option like ``-Dline.separator=X`` on the command line, but it is important how and where you pass it. Firstly, you must pass the property *before* the class (as a parameter to the ``java`` executable) otherwise it is a parameter passed to the running program and thus not actually setting the &#39;environment&#39; property. \r\n\r\nTake this simple class as an example:\r\n\r\n```\r\npublic class TestClass {\r\n    public static void main(String[] args) {\r\n        System.out.printf(&quot;property test.value [%s]  property line.separator [%s]&quot;,\r\n                System.getProperty(&quot;test.value&quot;), System.getProperty(&quot;line.separator&quot;) );\r\n    }\r\n}\r\n```\r\n\r\nOn Windows Powershell, you need to execute like so ...\r\n```\r\nPS C:\\&gt; java -cp target\\classes -D&quot;line.separator=4&quot; TestClass  -D&quot;test.value=3&quot;\r\nproperty test.value [null]  property line.separator [4]\r\n```\r\nYou see the ``line.separator`` value is set but the ``test.class`` value is not. On Windows you needed to double-quote the property names that are arguments to the ``java`` executable.\r\n\r\nPassing both as parameters to the ``java`` program ...\r\n\r\n```\r\nPS C:\\&gt; java -cp target\\classes -D&quot;test.value=3&quot; -D&quot;line.separator=4&quot; TestClass\r\nproperty test.value [3]  property line.separator [4]\r\n```\r\n\r\n... to see the correct values received by the program. \r\n\r\nTo pass a newline, passing ``-D&quot;line.separator=\\n&quot;`` does not work as the ``\\n`` is treated as a string by Powershell so you must pass the Powershell notation for a newline - ``[`n]`` - to actually get the newline to the java program. eg:\r\n\r\n```\r\nPS C:\\&gt; java -cp target\\classes -D&quot;test.value=3&quot; -D&quot;line.separator=`n&quot; TestClass\r\nproperty test.value [3]  property line.separator [\r\n]\r\n```\r\n\r\nAbove you see an actual newline used in the output. \r\n\r\nOn unix the syntax is a bit different. You don&#39;t need to double-quote the property names but you still need to pass the newline character in a way that causes the shell to actually *pass* a newline. \r\n\r\nFirstly, if we just pass a ``\\n`` we see it is passed verbatim:\r\n```\r\n$ java -cp target/classes/ -Dtest.value=3 -Dline.separator=&#39;\\n&#39; TestClass\r\nproperty test.value [3]  property line.separator [\\n]\r\n```\r\n\r\nBut if we tell the shell to process that string it will convert it into a newline:\r\n```\r\n$ java -cp target/classes/ -Dtest.value=3 -Dline.separator=$&#39;\\n&#39; TestClass\r\nproperty test.value [3]  property line.separator [\r\n]\r\n```\r\n\r\nI&#39;m not an expert in the ins and outs of shell scripting, but I can see there appears to be a few ways to pass a newline character depending on your OS and shell. To your specific ask about Windows and ``cmd``, there is yet more fun. This [question][1] gives me the example script I need to run my sample and get a newline output. \r\n\r\nI created a ``bat`` script called ``runjava.bat`` to run the java, and define the newline as a variable which is then passed as the parameter. \r\n\r\n```\r\nsetlocal EnableDelayedExpansion\r\n(set \\n=^\r\n%=Do not remove this line=%\r\n)\r\n\r\necho Line1!\\n!Line2\r\njava -cp target\\classes -Dtest.value=3 -Dline.separator=!\\n! TestClass\r\n```\r\n\r\nHere I run the script and you can see the output has a newline in it. \r\n\r\n```\r\nc:\\&gt;.\\runjava.bat\r\n\r\nc:\\&gt;setlocal EnableDelayedExpansion\r\n\r\nc:\\&gt;(set \\n=\r\n )\r\n\r\nc:\\&gt;echo Line1!\\n!Line2\r\nLine1\r\nLine2\r\n\r\nc:\\&gt;java -cp target\\classes -Dtest.value=3 -Dline.separator=!\\n! TestClass\r\nproperty test.value [3]  property line.separator [\r\n]\r\n```\r\n\r\nTo summarise ... you can override the ``line.separator`` property but you will have to get the syntax just right!\r\n\r\n  [1]: https://stackoverflow.com/questions/132799/how-can-i-echo-a-newline-in-a-batch-file/6379940#6379940","title":"Pass unix line separator in a Windows bat script to java.exe","body":"<p>After a bit of investigation ... you do set the value by passing an option like <code>-Dline.separator=X</code> on the command line, but it is important how and where you pass it. Firstly, you must pass the property <em>before</em> the class (as a parameter to the <code>java</code> executable) otherwise it is a parameter passed to the running program and thus not actually setting the 'environment' property.</p>\n<p>Take this simple class as an example:</p>\n<pre><code>public class TestClass {\n    public static void main(String[] args) {\n        System.out.printf(&quot;property test.value [%s]  property line.separator [%s]&quot;,\n                System.getProperty(&quot;test.value&quot;), System.getProperty(&quot;line.separator&quot;) );\n    }\n}\n</code></pre>\n<p>On Windows Powershell, you need to execute like so ...</p>\n<pre><code>PS C:\\&gt; java -cp target\\classes -D&quot;line.separator=4&quot; TestClass  -D&quot;test.value=3&quot;\nproperty test.value [null]  property line.separator [4]\n</code></pre>\n<p>You see the <code>line.separator</code> value is set but the <code>test.class</code> value is not. On Windows you needed to double-quote the property names that are arguments to the <code>java</code> executable.</p>\n<p>Passing both as parameters to the <code>java</code> program ...</p>\n<pre><code>PS C:\\&gt; java -cp target\\classes -D&quot;test.value=3&quot; -D&quot;line.separator=4&quot; TestClass\nproperty test.value [3]  property line.separator [4]\n</code></pre>\n<p>... to see the correct values received by the program.</p>\n<p>To pass a newline, passing <code>-D&quot;line.separator=\\n&quot;</code> does not work as the <code>\\n</code> is treated as a string by Powershell so you must pass the Powershell notation for a newline - <code>[`n]</code> - to actually get the newline to the java program. eg:</p>\n<pre><code>PS C:\\&gt; java -cp target\\classes -D&quot;test.value=3&quot; -D&quot;line.separator=`n&quot; TestClass\nproperty test.value [3]  property line.separator [\n]\n</code></pre>\n<p>Above you see an actual newline used in the output.</p>\n<p>On unix the syntax is a bit different. You don't need to double-quote the property names but you still need to pass the newline character in a way that causes the shell to actually <em>pass</em> a newline.</p>\n<p>Firstly, if we just pass a <code>\\n</code> we see it is passed verbatim:</p>\n<pre><code>$ java -cp target/classes/ -Dtest.value=3 -Dline.separator='\\n' TestClass\nproperty test.value [3]  property line.separator [\\n]\n</code></pre>\n<p>But if we tell the shell to process that string it will convert it into a newline:</p>\n<pre><code>$ java -cp target/classes/ -Dtest.value=3 -Dline.separator=$'\\n' TestClass\nproperty test.value [3]  property line.separator [\n]\n</code></pre>\n<p>I'm not an expert in the ins and outs of shell scripting, but I can see there appears to be a few ways to pass a newline character depending on your OS and shell. To your specific ask about Windows and <code>cmd</code>, there is yet more fun. This <a href=\"https://stackoverflow.com/questions/132799/how-can-i-echo-a-newline-in-a-batch-file/6379940#6379940\">question</a> gives me the example script I need to run my sample and get a newline output.</p>\n<p>I created a <code>bat</code> script called <code>runjava.bat</code> to run the java, and define the newline as a variable which is then passed as the parameter.</p>\n<pre><code>setlocal EnableDelayedExpansion\n(set \\n=^\n%=Do not remove this line=%\n)\n\necho Line1!\\n!Line2\njava -cp target\\classes -Dtest.value=3 -Dline.separator=!\\n! TestClass\n</code></pre>\n<p>Here I run the script and you can see the output has a newline in it.</p>\n<pre><code>c:\\&gt;.\\runjava.bat\n\nc:\\&gt;setlocal EnableDelayedExpansion\n\nc:\\&gt;(set \\n=\n )\n\nc:\\&gt;echo Line1!\\n!Line2\nLine1\nLine2\n\nc:\\&gt;java -cp target\\classes -Dtest.value=3 -Dline.separator=!\\n! TestClass\nproperty test.value [3]  property line.separator [\n]\n</code></pre>\n<p>To summarise ... you can override the <code>line.separator</code> property but you will have to get the syntax just right!</p>\n"}],"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661525071,"creation_date":1661348737,"question_id":73474308,"body_markdown":"How do I pass in the unix line separator to Java.exe on Windows.\r\n\r\nI tried this \r\n\r\n`-Dline.separator=\\n`\r\n\r\nit doesn&#39;t work.\r\n\r\nI am on Windows, I run cmd.exe, then I run a bat file.   \r\nI want to pass in the unix line separator.\r\n\r\n\r\nDoes it matter if I run the bat file with cmd.exe or with power shell.   \r\n\r\n\r\n\r\n","title":"Pass unix line separator in a Windows bat script to java.exe","body":"<p>How do I pass in the unix line separator to Java.exe on Windows.</p>\n<p>I tried this</p>\n<p><code>-Dline.separator=\\n</code></p>\n<p>it doesn't work.</p>\n<p>I am on Windows, I run cmd.exe, then I run a bat file.<br />\nI want to pass in the unix line separator.</p>\n<p>Does it matter if I run the bat file with cmd.exe or with power shell.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1661541551,"post_id":73502740,"comment_id":129805284,"body_markdown":"why are you not using the built in JWTFilter that comes with spring security?","body":"why are you not using the built in JWTFilter that comes with spring security?"},{"owner":{"account_id":26130598,"reputation":29,"user_id":19821371,"display_name":"Danilo Di Bella"},"score":0,"creation_date":1661549960,"post_id":73502740,"comment_id":129807242,"body_markdown":"I prefer using jjwt, it’s better to handle @Toerktumlare","body":"I prefer using jjwt, it’s better to handle @Toerktumlare"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1661553282,"post_id":73502740,"comment_id":129807834,"body_markdown":"”Better to handle”? You do know that writing custom security is bad practice?","body":"”Better to handle”? You do know that writing custom security is bad practice?"},{"owner":{"account_id":26130598,"reputation":29,"user_id":19821371,"display_name":"Danilo Di Bella"},"score":0,"creation_date":1661596082,"post_id":73502740,"comment_id":129812739,"body_markdown":"Sorry, I was in a hurry and write that bad, I&#39;ll partecipate in a project where they use JJWT instead of the normal JWTFilter, so I&#39;m trying to being confident with it before starting, but I&#39;m seeing that this library has some features for security for &quot;better managing&quot;, that&#39;s what I was talking about. Anyway even if I would use the JWTFilter the authorization would be null too, unfortunately that&#39;s not the problem @Toerktumlare","body":"Sorry, I was in a hurry and write that bad, I&#39;ll partecipate in a project where they use JJWT instead of the normal JWTFilter, so I&#39;m trying to being confident with it before starting, but I&#39;m seeing that this library has some features for security for &quot;better managing&quot;, that&#39;s what I was talking about. Anyway even if I would use the JWTFilter the authorization would be null too, unfortunately that&#39;s not the problem @Toerktumlare"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1661603153,"post_id":73502740,"comment_id":129814001,"body_markdown":"Please update your code to use the way spring security recommends the handling of JWTs. All you need to do is to read the spring security documentation JWT chapter and not outdated tutorials online","body":"Please update your code to use the way spring security recommends the handling of JWTs. All you need to do is to read the spring security documentation JWT chapter and not outdated tutorials online"},{"owner":{"account_id":26130598,"reputation":29,"user_id":19821371,"display_name":"Danilo Di Bella"},"score":0,"creation_date":1661605000,"post_id":73502740,"comment_id":129814368,"body_markdown":"That doesn’t change the fact that the JwtTokenFilter doesn’t get the authorization, using Spring security Jwt handling or using JJWT doesn’t change anything.","body":"That doesn’t change the fact that the JwtTokenFilter doesn’t get the authorization, using Spring security Jwt handling or using JJWT doesn’t change anything."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1661609463,"post_id":73502740,"comment_id":129815214,"body_markdown":"`Spring security Jwt handling or using JJWT doesn’t change anything` is completely untrue. So what you are claiming is that spring has a resource server implementation that doesnt work? Thats a bold claim. I know de facto that following the documentation does work. Im telling you what is bad practice. Learn from it. Good luck with your problem","body":"<code>Spring security Jwt handling or using JJWT doesn’t change anything</code> is completely untrue. So what you are claiming is that spring has a resource server implementation that doesnt work? Thats a bold claim. I know de facto that following the documentation does work. Im telling you what is bad practice. Learn from it. Good luck with your problem"},{"owner":{"account_id":26130598,"reputation":29,"user_id":19821371,"display_name":"Danilo Di Bella"},"score":0,"creation_date":1661610373,"post_id":73502740,"comment_id":129815400,"body_markdown":"I&#39;m not saying that, absolutely, taking the sentence without the context may misleads, I&#39;m saying that the problem is not on the JWT, but is onto the authentication, the filter cannot get the authentication.\nOn **JwtUsernameAndPasswordAuthenticationFilter** returns the actual authentication but into **JwtTokenVerifier** returns null. that&#39;s the problem. @Toerktumlare","body":"I&#39;m not saying that, absolutely, taking the sentence without the context may misleads, I&#39;m saying that the problem is not on the JWT, but is onto the authentication, the filter cannot get the authentication. On <b>JwtUsernameAndPasswordAuthenticationFilter</b> returns the actual authentication but into <b>JwtTokenVerifier</b> returns null. that&#39;s the problem. @Toerktumlare"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1661611989,"post_id":73502740,"comment_id":129815732,"body_markdown":"You dont have to explain anything for me, the problem is that you are writing custom security which is bad practice. Learn to do it the right way first, before you go about doing custom things, good luck","body":"You dont have to explain anything for me, the problem is that you are writing custom security which is bad practice. Learn to do it the right way first, before you go about doing custom things, good luck"}],"owner":{"account_id":26130598,"reputation":29,"user_id":19821371,"display_name":"Danilo Di Bella"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1661524780,"creation_date":1661524780,"question_id":73502740,"body_markdown":"I&#39;m trying to make a login/registration in Spring Boot but I&#39;m facing some problems.\r\n\r\nRegistration and login works just fine, but I want to check and verify the token at every request sent.\r\n\r\nThis is the **JwtUsernameAndPasswordAuthenticationFilter**:\r\n\r\n    package com.example.springsecurityproject.jwt;\r\n    \r\n    import com.example.springsecurityproject.entity.UserEntity;\r\n    import com.example.springsecurityproject.repository.UserRepository;\r\n    import com.example.springsecurityproject.service.TokenService;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import io.jsonwebtoken.Jwts;\r\n    import io.jsonwebtoken.SignatureAlgorithm;\r\n    import io.jsonwebtoken.io.Encoders;\r\n    import io.jsonwebtoken.security.Keys;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.apache.catalina.User;\r\n    import org.checkerframework.checker.units.qual.A;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\n    import org.springframework.security.core.Authentication;\r\n    import org.springframework.security.core.AuthenticationException;\r\n    import org.springframework.security.core.context.SecurityContextHolder;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n    \r\n    import javax.crypto.SecretKey;\r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n    import java.sql.Date;\r\n    import java.time.LocalDate;\r\n    \r\n    @AllArgsConstructor\r\n    public class JwtUsernameAndPasswordAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n    \r\n        private TokenService tokenService;\r\n        private AuthenticationManager authenticationManager;\r\n    \r\n    \r\n        @Override\r\n        public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\r\n            try {\r\n    \r\n                UsernameAndPasswordAuthenticationRequest authenticationRequest =\r\n                        new ObjectMapper().readValue(request.getInputStream(), UsernameAndPasswordAuthenticationRequest.class);\r\n    \r\n                Authentication authentication = new UsernamePasswordAuthenticationToken(\r\n                        authenticationRequest.getUsername(),\r\n                        authenticationRequest.getPassword()\r\n                );\r\n    \r\n                Authentication authenticate = authenticationManager.authenticate(authentication);\r\n                return authenticate;\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {\r\n            SecretKey key = Keys.secretKeyFor(SignatureAlgorithm.HS256);\r\n            String secretKey = Encoders.BASE64.encode(key.getEncoded());\r\n            tokenService.addToken(secretKey, (UserEntity) authResult.getPrincipal());\r\n            String JWTtoken = Jwts.builder()\r\n                    .setSubject(authResult.getName())\r\n                    .claim(&quot;authorities&quot;, authResult.getAuthorities())\r\n                    .setIssuedAt(new java.util.Date())\r\n                    .setExpiration(Date.valueOf(LocalDate.now().plusWeeks(2)))\r\n                    .signWith(Keys.hmacShaKeyFor(secretKey.getBytes()))\r\n                    .compact();\r\n    \r\n    \r\n            response.addHeader(&quot;Authorization&quot;, &quot;Bearer&quot; + JWTtoken);\r\n        }\r\n    }\r\n\r\nIn this when the Key is created I&#39;m saving it into a database where there is the encrypted key and the UserEntity (as foreign key).\r\n\r\nIn the **JwtVerifierToken** I&#39;m usign a function **getKeyByUser** that just take the key when I pass the UserEntity, but the method **request.getUserPrincipal()** returns null, that means I can&#39;t have the key and also cannot verify. \r\n\r\n    package com.example.springsecurityproject.jwt;\r\n    \r\n    import com.example.springsecurityproject.entity.TokenEntity;\r\n    import com.example.springsecurityproject.entity.UserEntity;\r\n    import com.example.springsecurityproject.repository.TokenRepository;\r\n    import com.example.springsecurityproject.service.UserService;\r\n    import com.google.common.base.Strings;\r\n    import io.jsonwebtoken.*;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.web.filter.OncePerRequestFilter;\r\n    \r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n    import java.security.Key;\r\n    \r\n    public class JwtTokenVerifier extends OncePerRequestFilter {\r\n        private final TokenRepository tokenRepository;\r\n        private UserService userService;\r\n    \r\n        public JwtTokenVerifier(TokenRepository tokenRepository) {\r\n            this.tokenRepository = tokenRepository;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request,\r\n                                        HttpServletResponse response,\r\n                                        FilterChain filterChain) throws ServletException, IOException {\r\n            String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\r\n    \r\n            if (Strings.isNullOrEmpty(authorizationHeader) || !authorizationHeader.startsWith(&quot;Bearer&quot;)){\r\n                filterChain.doFilter(request,response);\r\n                return;\r\n            }\r\n            try {\r\n    \r\n                TokenEntity key = tokenRepository.getKeyByUser((UserEntity) request.getUserPrincipal());\r\n                String token = authorizationHeader.replace(&quot;Bearer&quot;, &quot;&quot;);\r\n                Jws&lt;Claims&gt; claimsJws = Jwts.parserBuilder().setSigningKey((Key) key).build().parseClaimsJws(token);\r\n                Claims body = claimsJws.getBody();\r\n                String username = body.getSubject();\r\n            }\r\n            catch (JwtException e){\r\n                throw new IllegalStateException(&quot;Token non verificato&quot;);\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nThis is the **ApplicationSecurityConfig**\r\n\r\n    \r\n    package com.example.springsecurityproject.security;\r\n    \r\n    import com.example.springsecurityproject.jwt.JwtTokenVerifier;\r\n    import com.example.springsecurityproject.jwt.JwtUsernameAndPasswordAuthenticationFilter;\r\n    import com.example.springsecurityproject.repository.TokenRepository;\r\n    import com.example.springsecurityproject.repository.UserRepository;\r\n    import com.example.springsecurityproject.service.TokenService;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    \r\n    import static org.springframework.security.config.http.SessionCreationPolicy.*;\r\n    \r\n    @Slf4j\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @AllArgsConstructor\r\n    public class ApplicationSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        private final TokenService tokenService;\r\n        private final TokenRepository tokenRepository;\r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n    \r\n            http\r\n                    .sessionManagement().sessionCreationPolicy(STATELESS)\r\n                    .and()\r\n                    //.csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()) (per averlo abilitato)\r\n                    .addFilter(new JwtUsernameAndPasswordAuthenticationFilter(tokenService,authenticationManager()))\r\n                    .addFilterAfter(new JwtTokenVerifier(tokenRepository),JwtUsernameAndPasswordAuthenticationFilter.class)\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/register&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .csrf().disable();\r\n                    /*\r\n                    Form Based Login\r\n                    .formLogin()\r\n                        .loginPage(&quot;/login&quot;)\r\n                        .permitAll()\r\n                        .defaultSuccessUrl(&quot;/courses&quot;, true)\r\n                        .passwordParameter(&quot;password&quot;)\r\n                        .usernameParameter(&quot;username&quot;)\r\n                    .and()\r\n                    .rememberMe()\r\n                        .tokenValiditySeconds((int) TimeUnit.DAYS.toSeconds(31))//default 2 weeks\r\n                        .key(&quot;verysecurekey&quot;)\r\n                        .rememberMeParameter(&quot;remember-me&quot;)\r\n                    .and()\r\n                    .logout()\r\n                        .logoutUrl(&quot;/logout&quot;)\r\n                        .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;, &quot;GET&quot;))\r\n                        .clearAuthentication(true)\r\n                        .invalidateHttpSession(true)\r\n                        .deleteCookies(&quot;JSESSIONID&quot;, &quot;remember-me&quot;)\r\n                        .logoutSuccessUrl(&quot;/login&quot;);\r\n                    */\r\n        }\r\n        /*\r\n        @Override\r\n        @Bean\r\n        protected UserDetailsService userDetailsService() {\r\n    \r\n            UserDetails vitoUser = User.builder()\r\n                    .username(&quot;vito&quot;)\r\n                    .password(passwordEncoder.encode(&quot;password&quot;))\r\n                    //.roles(STUDENT.name())\r\n                    .authorities(STUDENT.getGrantedAuthorities())\r\n                    .build();\r\n    \r\n            UserDetails ddbdevUser = User.builder()\r\n                    .username(&quot;ddbdev&quot;)\r\n                    .password(passwordEncoder.encode(&quot;password&quot;))\r\n                    //.roles(ADMIN.name())\r\n                    .authorities(ADMIN.getGrantedAuthorities())\r\n                    .build();\r\n    \r\n            UserDetails marioUser = User.builder()\r\n                    .username(&quot;benmar&quot;)\r\n                    .password(passwordEncoder.encode(&quot;password&quot;))\r\n                    //.roles(MODERATOR.name())\r\n                    .authorities(MODERATOR.getGrantedAuthorities())\r\n                    .build();\r\n    \r\n            return new InMemoryUserDetailsManager(\r\n                    ddbdevUser,\r\n                    vitoUser,\r\n                    marioUser\r\n            );\r\n        }\r\n    */\r\n    }\r\n    \r\nCan someone help? I&#39;m stuck :(","title":"JwtAuthorizationToken doesn&#39;t have request.getPrincipal()","body":"<p>I'm trying to make a login/registration in Spring Boot but I'm facing some problems.</p>\n<p>Registration and login works just fine, but I want to check and verify the token at every request sent.</p>\n<p>This is the <strong>JwtUsernameAndPasswordAuthenticationFilter</strong>:</p>\n<pre><code>package com.example.springsecurityproject.jwt;\n\nimport com.example.springsecurityproject.entity.UserEntity;\nimport com.example.springsecurityproject.repository.UserRepository;\nimport com.example.springsecurityproject.service.TokenService;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.SignatureAlgorithm;\nimport io.jsonwebtoken.io.Encoders;\nimport io.jsonwebtoken.security.Keys;\nimport lombok.AllArgsConstructor;\nimport lombok.RequiredArgsConstructor;\nimport org.apache.catalina.User;\nimport org.checkerframework.checker.units.qual.A;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\nimport javax.crypto.SecretKey;\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.sql.Date;\nimport java.time.LocalDate;\n\n@AllArgsConstructor\npublic class JwtUsernameAndPasswordAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    private TokenService tokenService;\n    private AuthenticationManager authenticationManager;\n\n\n    @Override\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\n        try {\n\n            UsernameAndPasswordAuthenticationRequest authenticationRequest =\n                    new ObjectMapper().readValue(request.getInputStream(), UsernameAndPasswordAuthenticationRequest.class);\n\n            Authentication authentication = new UsernamePasswordAuthenticationToken(\n                    authenticationRequest.getUsername(),\n                    authenticationRequest.getPassword()\n            );\n\n            Authentication authenticate = authenticationManager.authenticate(authentication);\n            return authenticate;\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {\n        SecretKey key = Keys.secretKeyFor(SignatureAlgorithm.HS256);\n        String secretKey = Encoders.BASE64.encode(key.getEncoded());\n        tokenService.addToken(secretKey, (UserEntity) authResult.getPrincipal());\n        String JWTtoken = Jwts.builder()\n                .setSubject(authResult.getName())\n                .claim(&quot;authorities&quot;, authResult.getAuthorities())\n                .setIssuedAt(new java.util.Date())\n                .setExpiration(Date.valueOf(LocalDate.now().plusWeeks(2)))\n                .signWith(Keys.hmacShaKeyFor(secretKey.getBytes()))\n                .compact();\n\n\n        response.addHeader(&quot;Authorization&quot;, &quot;Bearer&quot; + JWTtoken);\n    }\n}\n</code></pre>\n<p>In this when the Key is created I'm saving it into a database where there is the encrypted key and the UserEntity (as foreign key).</p>\n<p>In the <strong>JwtVerifierToken</strong> I'm usign a function <strong>getKeyByUser</strong> that just take the key when I pass the UserEntity, but the method <strong>request.getUserPrincipal()</strong> returns null, that means I can't have the key and also cannot verify.</p>\n<pre><code>package com.example.springsecurityproject.jwt;\n\nimport com.example.springsecurityproject.entity.TokenEntity;\nimport com.example.springsecurityproject.entity.UserEntity;\nimport com.example.springsecurityproject.repository.TokenRepository;\nimport com.example.springsecurityproject.service.UserService;\nimport com.google.common.base.Strings;\nimport io.jsonwebtoken.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.security.Key;\n\npublic class JwtTokenVerifier extends OncePerRequestFilter {\n    private final TokenRepository tokenRepository;\n    private UserService userService;\n\n    public JwtTokenVerifier(TokenRepository tokenRepository) {\n        this.tokenRepository = tokenRepository;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request,\n                                    HttpServletResponse response,\n                                    FilterChain filterChain) throws ServletException, IOException {\n        String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\n\n        if (Strings.isNullOrEmpty(authorizationHeader) || !authorizationHeader.startsWith(&quot;Bearer&quot;)){\n            filterChain.doFilter(request,response);\n            return;\n        }\n        try {\n\n            TokenEntity key = tokenRepository.getKeyByUser((UserEntity) request.getUserPrincipal());\n            String token = authorizationHeader.replace(&quot;Bearer&quot;, &quot;&quot;);\n            Jws&lt;Claims&gt; claimsJws = Jwts.parserBuilder().setSigningKey((Key) key).build().parseClaimsJws(token);\n            Claims body = claimsJws.getBody();\n            String username = body.getSubject();\n        }\n        catch (JwtException e){\n            throw new IllegalStateException(&quot;Token non verificato&quot;);\n        }\n\n    }\n}\n</code></pre>\n<p>This is the <strong>ApplicationSecurityConfig</strong></p>\n<pre><code>package com.example.springsecurityproject.security;\n\nimport com.example.springsecurityproject.jwt.JwtTokenVerifier;\nimport com.example.springsecurityproject.jwt.JwtUsernameAndPasswordAuthenticationFilter;\nimport com.example.springsecurityproject.repository.TokenRepository;\nimport com.example.springsecurityproject.repository.UserRepository;\nimport com.example.springsecurityproject.service.TokenService;\nimport lombok.AllArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n\nimport static org.springframework.security.config.http.SessionCreationPolicy.*;\n\n@Slf4j\n@Configuration\n@EnableWebSecurity\n@AllArgsConstructor\npublic class ApplicationSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private final TokenService tokenService;\n    private final TokenRepository tokenRepository;\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http\n                .sessionManagement().sessionCreationPolicy(STATELESS)\n                .and()\n                //.csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()) (per averlo abilitato)\n                .addFilter(new JwtUsernameAndPasswordAuthenticationFilter(tokenService,authenticationManager()))\n                .addFilterAfter(new JwtTokenVerifier(tokenRepository),JwtUsernameAndPasswordAuthenticationFilter.class)\n                .authorizeRequests()\n                .antMatchers(&quot;/register&quot;).permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .csrf().disable();\n                /*\n                Form Based Login\n                .formLogin()\n                    .loginPage(&quot;/login&quot;)\n                    .permitAll()\n                    .defaultSuccessUrl(&quot;/courses&quot;, true)\n                    .passwordParameter(&quot;password&quot;)\n                    .usernameParameter(&quot;username&quot;)\n                .and()\n                .rememberMe()\n                    .tokenValiditySeconds((int) TimeUnit.DAYS.toSeconds(31))//default 2 weeks\n                    .key(&quot;verysecurekey&quot;)\n                    .rememberMeParameter(&quot;remember-me&quot;)\n                .and()\n                .logout()\n                    .logoutUrl(&quot;/logout&quot;)\n                    .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;, &quot;GET&quot;))\n                    .clearAuthentication(true)\n                    .invalidateHttpSession(true)\n                    .deleteCookies(&quot;JSESSIONID&quot;, &quot;remember-me&quot;)\n                    .logoutSuccessUrl(&quot;/login&quot;);\n                */\n    }\n    /*\n    @Override\n    @Bean\n    protected UserDetailsService userDetailsService() {\n\n        UserDetails vitoUser = User.builder()\n                .username(&quot;vito&quot;)\n                .password(passwordEncoder.encode(&quot;password&quot;))\n                //.roles(STUDENT.name())\n                .authorities(STUDENT.getGrantedAuthorities())\n                .build();\n\n        UserDetails ddbdevUser = User.builder()\n                .username(&quot;ddbdev&quot;)\n                .password(passwordEncoder.encode(&quot;password&quot;))\n                //.roles(ADMIN.name())\n                .authorities(ADMIN.getGrantedAuthorities())\n                .build();\n\n        UserDetails marioUser = User.builder()\n                .username(&quot;benmar&quot;)\n                .password(passwordEncoder.encode(&quot;password&quot;))\n                //.roles(MODERATOR.name())\n                .authorities(MODERATOR.getGrantedAuthorities())\n                .build();\n\n        return new InMemoryUserDetailsManager(\n                ddbdevUser,\n                vitoUser,\n                marioUser\n        );\n    }\n*/\n}\n</code></pre>\n<p>Can someone help? I'm stuck :(</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661524673,"creation_date":1661521859,"answer_id":73502077,"question_id":73502027,"body_markdown":"On the configuration class add\r\n\r\n    @ImportResource({&quot;classpath*:application-context.xml&quot;})\r\n\r\nAnd remove `@ComponentScan`. This annotation scan the package for annotated beans like `@Component\\@Service`. And you don’t have to declare the bean in the configuration class, it will be loaded by the `@ImportResource`\r\n\r\nI wrote an [example](https://github.com/paolopiccinini/spring-boot-starter-example) in `spring-boot-starter-example\\src\\main\\resources` there is `application-context.xml` and in `spring-boot-consumer\\src\\main\\java\\com\\example\\springbootconsumer\\SpringBootConsumerApplication.java` there is `@ImportResource(&quot;classpath*:application-context.xml&quot;)`","title":"Spring boot fail to start while invoking external jar class which is xml based framework","body":"<p>On the configuration class add</p>\n<pre><code>@ImportResource({&quot;classpath*:application-context.xml&quot;})\n</code></pre>\n<p>And remove <code>@ComponentScan</code>. This annotation scan the package for annotated beans like <code>@Component\\@Service</code>. And you don’t have to declare the bean in the configuration class, it will be loaded by the <code>@ImportResource</code></p>\n<p>I wrote an <a href=\"https://github.com/paolopiccinini/spring-boot-starter-example\" rel=\"nofollow noreferrer\">example</a> in <code>spring-boot-starter-example\\src\\main\\resources</code> there is <code>application-context.xml</code> and in <code>spring-boot-consumer\\src\\main\\java\\com\\example\\springbootconsumer\\SpringBootConsumerApplication.java</code> there is <code>@ImportResource(&quot;classpath*:application-context.xml&quot;)</code></p>\n"}],"owner":{"account_id":1085421,"reputation":45,"user_id":2656254,"display_name":"Anand Kenta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661524673,"creation_date":1661521618,"question_id":73502027,"body_markdown":"I am trying to call external jar methods from spring boot application. But the external jar is a xml based spring framework.\r\n\r\n    package com.ext.beans;\r\n    \r\n    public class ExtBean{\r\n        extMethod() {\r\n         // some action\r\n        };\r\n    }\r\n\r\n**in application-context.xml**\r\n\r\n    &lt;bean id=&quot;extBean&quot; class=&quot;com.ext.beans.ExtBean&quot; scope=&quot;prototype&quot;/&gt;\r\n\r\n**My Spring boot application:**\r\n\r\n    @Configuration\r\n    @ComponentScan({&quot;com.ext.beans&quot;})\r\n    public class ParentConfig {\r\n    \r\n        @Bean(&quot;extBean&quot;)\r\n        public ExtBean extBean() {\r\n            return new ExtBean();\r\n        }\r\n    }\r\n\r\n    @Service\r\n    public class ParentService {\r\n        @Autowired\r\n        @Qualifier(&quot;extBean&quot;)\r\n        ExtBean extBean;\r\n        \r\n        public ParentServiceMethod() {\r\n            //perform function with extBean method\r\n            extBean.extMethod();\r\n       }\r\n    }\r\n\r\nspring boot application is fail start the application getting below error\r\n\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;parentService&#39;: Unsatisfied dependency expressed through field &#39;extBean&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;extBean&#39; defined in class path resource [com/parent/config/ParentConfig.class]\r\n\r\n*FYI: i have added the external jar dependency in spring boot pom.xml*","title":"Spring boot fail to start while invoking external jar class which is xml based framework","body":"<p>I am trying to call external jar methods from spring boot application. But the external jar is a xml based spring framework.</p>\n<pre><code>package com.ext.beans;\n\npublic class ExtBean{\n    extMethod() {\n     // some action\n    };\n}\n</code></pre>\n<p><strong>in application-context.xml</strong></p>\n<pre><code>&lt;bean id=&quot;extBean&quot; class=&quot;com.ext.beans.ExtBean&quot; scope=&quot;prototype&quot;/&gt;\n</code></pre>\n<p><strong>My Spring boot application:</strong></p>\n<pre><code>@Configuration\n@ComponentScan({&quot;com.ext.beans&quot;})\npublic class ParentConfig {\n\n    @Bean(&quot;extBean&quot;)\n    public ExtBean extBean() {\n        return new ExtBean();\n    }\n}\n\n@Service\npublic class ParentService {\n    @Autowired\n    @Qualifier(&quot;extBean&quot;)\n    ExtBean extBean;\n    \n    public ParentServiceMethod() {\n        //perform function with extBean method\n        extBean.extMethod();\n   }\n}\n</code></pre>\n<p>spring boot application is fail start the application getting below error</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'parentService': Unsatisfied dependency expressed through field 'extBean'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'extBean' defined in class path resource [com/parent/config/ParentConfig.class]\n</code></pre>\n<p><em>FYI: i have added the external jar dependency in spring boot pom.xml</em></p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1661503954,"post_id":73498396,"comment_id":129792718,"body_markdown":"How does your code looks like?","body":"How does your code looks like?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1661505466,"post_id":73498396,"comment_id":129793219,"body_markdown":"Sure.  See https://stackoverflow.com/a/4120517/139985","body":"Sure.  See <a href=\"https://stackoverflow.com/a/4120517/139985\">stackoverflow.com/a/4120517/139985</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1661505766,"post_id":73498396,"comment_id":129793328,"body_markdown":"But if you are getting a 1064 error, that means you have an SQL syntax error.  Hence we need to see what your code is actually doing.   It could also be that the DB user doesn&#39;t have the required rights to set session variables.","body":"But if you are getting a 1064 error, that means you have an SQL syntax error.  Hence we need to see what your code is actually doing.   It could also be that the DB user doesn&#39;t have the required rights to set session variables."},{"owner":{"account_id":15501293,"reputation":23,"user_id":11182589,"display_name":"Vicky"},"score":0,"creation_date":1661507249,"post_id":73498396,"comment_id":129793800,"body_markdown":"@Stephen C. I have added code snap. connection is JDBC connection object. I am getting error at first 3 lines.    Error is","body":"@Stephen C. I have added code snap. connection is JDBC connection object. I am getting error at first 3 lines.    Error is"},{"owner":{"account_id":15501293,"reputation":23,"user_id":11182589,"display_name":"Vicky"},"score":0,"creation_date":1661507255,"post_id":73498396,"comment_id":129793804,"body_markdown":"SQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;SET FOREIGN_KEY_CHECKS=0&#39; at line 1\nSQLState: 42000\nVendorError: 1064","body":"SQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;SET FOREIGN_KEY_CHECKS=0&#39; at line 1 SQLState: 42000 VendorError: 1064"},{"owner":{"account_id":15501293,"reputation":23,"user_id":11182589,"display_name":"Vicky"},"score":0,"creation_date":1661507336,"post_id":73498396,"comment_id":129793830,"body_markdown":"@Jens Please check code snap. Output error is added above in comment","body":"@Jens Please check code snap. Output error is added above in comment"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1661507939,"post_id":73498396,"comment_id":129794006,"body_markdown":"Does the DB user doesn&#39;t have the required rights to set session variables?","body":"Does the DB user doesn&#39;t have the required rights to set session variables?"},{"owner":{"account_id":15501293,"reputation":23,"user_id":11182589,"display_name":"Vicky"},"score":0,"creation_date":1661508105,"post_id":73498396,"comment_id":129794058,"body_markdown":"Yes connected using root","body":"Yes connected using root"}],"answers":[{"tags":[],"owner":{"account_id":10929,"reputation":545317,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661524597,"creation_date":1661524597,"answer_id":73502691,"question_id":73498396,"body_markdown":"You are trying to execute two statements, an `INSERT` followed by a `SET`, separated by a semicolon, in a single call to `prepareStatement()`.\r\n\r\nhttps://dev.mysql.com/doc/refman/8.0/en/sql-prepared-statements.html\r\n\r\n&gt; SQL syntax for prepared statements does not support multi-statements (that is, multiple statements within a single string separated by ; characters).\r\n\r\nYou must execute the `SET` statement in a separate statement.","title":"Is there any way to run &#39;SET foreign_key_checks = 0 &#39; using JDBC?","body":"<p>You are trying to execute two statements, an <code>INSERT</code> followed by a <code>SET</code>, separated by a semicolon, in a single call to <code>prepareStatement()</code>.</p>\n<p><a href=\"https://dev.mysql.com/doc/refman/8.0/en/sql-prepared-statements.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/sql-prepared-statements.html</a></p>\n<blockquote>\n<p>SQL syntax for prepared statements does not support multi-statements (that is, multiple statements within a single string separated by ; characters).</p>\n</blockquote>\n<p>You must execute the <code>SET</code> statement in a separate statement.</p>\n"}],"owner":{"account_id":15501293,"reputation":23,"user_id":11182589,"display_name":"Vicky"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":496,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73502691,"answer_count":1,"score":1,"last_activity_date":1661524597,"creation_date":1661503790,"question_id":73498396,"body_markdown":"I am using Java 11 JDBC and MySQL Connector/J 8 jar. All other CRUDs are running OK, but when I am trying to run `SET foreign_key_checks = 0` or `SET foreign_key_checks = 1`, it shows syntax error with SQLState: 42000 and VendorError: 1064. So if there is any way to run such queries using JDBC?\r\n\r\n\r\n    try {\r\n        Statement checks = connection.createStatement();\r\n        checks.execute(&quot;set foreign_key_checks=0&quot;);\r\n        checks.close();\r\n\r\n        String tableName = json.getString(&quot;table&quot;);\r\n        RowOperation rowOperation = RowOperation.valueOf(json.getString(&quot;activity&quot;));\r\n        JSONArray rows = json.getJSONArray(&quot;rows&quot;);\r\n\r\n        for (Object obj : rows) {\r\n            JSONObject row = (JSONObject) obj;\r\n            List&lt;String&gt; keys = new ArrayList&lt;&gt;(row.keySet());\r\n            StringBuilder sb = new StringBuilder();\r\n            String columns = keys.stream().collect(Collectors.joining(&quot;,&quot;)) + &quot;,rowOperation,rowCreatedOn&quot;;\r\n            String questionMakrs = keys.stream().map(x -&gt; &quot;?&quot;).collect(Collectors.joining(&quot;,&quot;)) + &quot;,?,?&quot;;\r\n            String query = &quot;insert into &quot; + tableName + &quot; (&quot; + columns + &quot;) values (&quot; + questionMakrs + &quot;); SET FOREIGN_KEY_CHECKS=0&quot;;\r\n            PreparedStatement stmt = connection.prepareStatement(query);\r\n            int i = 0;\r\n            for (i = 0; i &lt; keys.size(); i++) {\r\n                String key = keys.get(i);\r\n                stmt.setString(i + 1, String.valueOf(row.get(key)));\r\n            }\r\n            stmt.setString(i + 1, rowOperation.name());\r\n            i++;\r\n            stmt.setTimestamp(i + 1, Timestamp.valueOf(LocalDateTime.now()));\r\n            stmt.execute();\r\n            stmt.close();\r\n        }\r\n\r\n    } finally {\r\n        Statement checks = connection.createStatement();\r\n        checks.execute(&quot;set foreign_key_checks=1&quot;);\r\n        checks.close();\r\n    }\r\n\r\n","title":"Is there any way to run &#39;SET foreign_key_checks = 0 &#39; using JDBC?","body":"<p>I am using Java 11 JDBC and MySQL Connector/J 8 jar. All other CRUDs are running OK, but when I am trying to run <code>SET foreign_key_checks = 0</code> or <code>SET foreign_key_checks = 1</code>, it shows syntax error with SQLState: 42000 and VendorError: 1064. So if there is any way to run such queries using JDBC?</p>\n<pre><code>try {\n    Statement checks = connection.createStatement();\n    checks.execute(&quot;set foreign_key_checks=0&quot;);\n    checks.close();\n\n    String tableName = json.getString(&quot;table&quot;);\n    RowOperation rowOperation = RowOperation.valueOf(json.getString(&quot;activity&quot;));\n    JSONArray rows = json.getJSONArray(&quot;rows&quot;);\n\n    for (Object obj : rows) {\n        JSONObject row = (JSONObject) obj;\n        List&lt;String&gt; keys = new ArrayList&lt;&gt;(row.keySet());\n        StringBuilder sb = new StringBuilder();\n        String columns = keys.stream().collect(Collectors.joining(&quot;,&quot;)) + &quot;,rowOperation,rowCreatedOn&quot;;\n        String questionMakrs = keys.stream().map(x -&gt; &quot;?&quot;).collect(Collectors.joining(&quot;,&quot;)) + &quot;,?,?&quot;;\n        String query = &quot;insert into &quot; + tableName + &quot; (&quot; + columns + &quot;) values (&quot; + questionMakrs + &quot;); SET FOREIGN_KEY_CHECKS=0&quot;;\n        PreparedStatement stmt = connection.prepareStatement(query);\n        int i = 0;\n        for (i = 0; i &lt; keys.size(); i++) {\n            String key = keys.get(i);\n            stmt.setString(i + 1, String.valueOf(row.get(key)));\n        }\n        stmt.setString(i + 1, rowOperation.name());\n        i++;\n        stmt.setTimestamp(i + 1, Timestamp.valueOf(LocalDateTime.now()));\n        stmt.execute();\n        stmt.close();\n    }\n\n} finally {\n    Statement checks = connection.createStatement();\n    checks.execute(&quot;set foreign_key_checks=1&quot;);\n    checks.close();\n}\n</code></pre>\n"},{"tags":["java","maven","jenkins","artifactory"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1661431760,"post_id":73487360,"comment_id":129774490,"body_markdown":"`However it is not working.` what does that mean? Show log output error messages etc... show the project structure","body":"<code>However it is not working.</code> what does that mean? Show log output error messages etc... show the project structure"},{"owner":{"account_id":10858576,"reputation":11,"user_id":7984102,"display_name":"Dheeraj"},"score":0,"creation_date":1661494401,"post_id":73487360,"comment_id":129789923,"body_markdown":"@khmarbaise There is no error message. Pushing the artifacts to Artifactory isn&#39;t happening. Only com/abc/def/project/module-1/module-1.pom is being pushed and the remaining expected 3 files are not being pushed.","body":"@khmarbaise There is no error message. Pushing the artifacts to Artifactory isn&#39;t happening. Only com/abc/def/project/module-1/module-1.pom is being pushed and the remaining expected 3 files are not being pushed."}],"answers":[{"tags":[],"owner":{"account_id":4172811,"reputation":5337,"user_id":4233342,"display_name":"yahavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661524556,"creation_date":1661524556,"answer_id":73502683,"question_id":73487360,"body_markdown":"The best way to do that is to use the JFrog CLI. With that, you don&#39;t have to configure any resolution or deployment repositories in your pom.xml/settings.xml.\r\n\r\nYou can do that in 4 simple steps:\r\n\r\n```bash\r\n# Step 1: Install JFrog CLI\r\ncurl -fL https://install-cli.jfrog.io | sh\r\n\r\n# Step 2: Configure the JFrog platform:\r\njf c add internal --url=https://acme.jfrog.io --user=jfrog_user --password=jfrog_password\r\n\r\n# Step 3: Configure the Maven project\r\njf mvnc --repo-resolve-releases libs-release --repo-resolve-snapshots libs-snapshot --repo-deploy-snapshots libs-snapshot-local --repo-deploy-releases libs-release-local\r\n\r\n# Step 4: Install and publish your Maven project\r\njf mvn clean install\r\n```\r\n\r\nAdditionally, it is recommended to save the build-info in Artifactory.\r\nTo do that, set the JFROG_CLI_BUILD_NAME and JFROG_CLI_BUILD_NUMBER environment variables before step 4 and run `jf rt build-publish` in the end.\r\n\r\nRead more:\r\n1. [QuickStart Guide: Maven and Gradle][1]\r\n2. [Running Maven Builds][2]\r\n3. [JFrog CLI Documentation][3]\r\n\r\n\r\n  [1]: https://www.jfrog.com/confluence/display/JFROG/QuickStart+Guide%3A+Maven+and+Gradle\r\n  [2]: https://www.jfrog.com/confluence/display/CLI/CLI+for+JFrog+Artifactory#CLIforJFrogArtifactory-RunningMavenBuilds\r\n  [3]: https://www.jfrog.com/confluence/display/CLI/JFrog+CLI","title":"Publishing/deploying artifacts to JFROG in multi module builds","body":"<p>The best way to do that is to use the JFrog CLI. With that, you don't have to configure any resolution or deployment repositories in your pom.xml/settings.xml.</p>\n<p>You can do that in 4 simple steps:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Step 1: Install JFrog CLI\ncurl -fL https://install-cli.jfrog.io | sh\n\n# Step 2: Configure the JFrog platform:\njf c add internal --url=https://acme.jfrog.io --user=jfrog_user --password=jfrog_password\n\n# Step 3: Configure the Maven project\njf mvnc --repo-resolve-releases libs-release --repo-resolve-snapshots libs-snapshot --repo-deploy-snapshots libs-snapshot-local --repo-deploy-releases libs-release-local\n\n# Step 4: Install and publish your Maven project\njf mvn clean install\n</code></pre>\n<p>Additionally, it is recommended to save the build-info in Artifactory.\nTo do that, set the JFROG_CLI_BUILD_NAME and JFROG_CLI_BUILD_NUMBER environment variables before step 4 and run <code>jf rt build-publish</code> in the end.</p>\n<p>Read more:</p>\n<ol>\n<li><a href=\"https://www.jfrog.com/confluence/display/JFROG/QuickStart+Guide%3A+Maven+and+Gradle\" rel=\"nofollow noreferrer\">QuickStart Guide: Maven and Gradle</a></li>\n<li><a href=\"https://www.jfrog.com/confluence/display/CLI/CLI+for+JFrog+Artifactory#CLIforJFrogArtifactory-RunningMavenBuilds\" rel=\"nofollow noreferrer\">Running Maven Builds</a></li>\n<li><a href=\"https://www.jfrog.com/confluence/display/CLI/JFrog+CLI\" rel=\"nofollow noreferrer\">JFrog CLI Documentation</a></li>\n</ol>\n"}],"owner":{"account_id":10858576,"reputation":11,"user_id":7984102,"display_name":"Dheeraj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":595,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661524556,"creation_date":1661429803,"question_id":73487360,"body_markdown":"I am working on a multi module project and trying to deploy them to JFROG.\r\n\r\nProject Structure goes like this:\r\n\r\n&lt;pre&gt;\r\nproject\r\n  module-1\r\n    pom.xml\r\n  module-2\r\n    pom.xml\r\n&lt;/pre&gt;\r\nIn the parent pom:\r\n\r\n    &lt;modules&gt;\r\n    module-1\r\n    module-2\r\n    &lt;modules&gt;\r\n\r\nI have added `&lt;distributionManagement&gt;` and added the required details to connect to my artifactory.\r\nVerified that there are no connectivity issues to Artifactory.\r\n\r\n**Module-1 gives com/abc/def/project/module-1/module-1.pom and com/abc/def/project/module-1/module-1.jar\r\nModule-2 gives com/abc/def/project/module-2/module-2.pom and com/abc/def/project/module-2/module-2.jar**\r\n\r\nRequirement: I have to push the above pom and jar of both the sub modules to JFROG.\r\n\r\nI am using goal - **mvn clean deploy** from my jenkins pipeline. However it is not working.","title":"Publishing/deploying artifacts to JFROG in multi module builds","body":"<p>I am working on a multi module project and trying to deploy them to JFROG.</p>\n<p>Project Structure goes like this:</p>\n<pre>\nproject\n  module-1\n    pom.xml\n  module-2\n    pom.xml\n</pre>\n<p>In the parent pom:</p>\n<pre><code>&lt;modules&gt;\nmodule-1\nmodule-2\n&lt;modules&gt;\n</code></pre>\n<p>I have added <code>&lt;distributionManagement&gt;</code> and added the required details to connect to my artifactory.\nVerified that there are no connectivity issues to Artifactory.</p>\n<p><strong>Module-1 gives com/abc/def/project/module-1/module-1.pom and com/abc/def/project/module-1/module-1.jar\nModule-2 gives com/abc/def/project/module-2/module-2.pom and com/abc/def/project/module-2/module-2.jar</strong></p>\n<p>Requirement: I have to push the above pom and jar of both the sub modules to JFROG.</p>\n<p>I am using goal - <strong>mvn clean deploy</strong> from my jenkins pipeline. However it is not working.</p>\n"},{"tags":["java","postgresql","jpa","spring-data-jpa","jsonb"],"comments":[{"owner":{"account_id":953817,"reputation":493,"user_id":979478,"display_name":"Pawel Zieminski"},"score":0,"creation_date":1591600976,"post_id":62246050,"comment_id":110106426,"body_markdown":"Can you add your jpa bean definition? Here maybe this will help https://stackoverflow.com/questions/49325802/is-it-possible-to-use-hibernate-with-postgresqls-jsonb-data-type","body":"Can you add your jpa bean definition? Here maybe this will help <a href=\"https://stackoverflow.com/questions/49325802/is-it-possible-to-use-hibernate-with-postgresqls-jsonb-data-type\" title=\"is it possible to use hibernate with postgresqls jsonb data type\">stackoverflow.com/questions/49325802/&hellip;</a>"},{"owner":{"account_id":953817,"reputation":493,"user_id":979478,"display_name":"Pawel Zieminski"},"score":0,"creation_date":1591603189,"post_id":62246050,"comment_id":110107455,"body_markdown":"Sorry, just noticed you don&#39;t use an entity bean in this. Still, see the link above.","body":"Sorry, just noticed you don&#39;t use an entity bean in this. Still, see the link above."}],"answers":[{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1610121775,"creation_date":1591677304,"answer_id":62275098,"question_id":62246050,"body_markdown":"The cause of the error\r\n----------------------\r\n\r\nThe PostgreSQL error looks as follows:\r\n\r\n&gt; ERROR: column \\&quot;itemsinventory_addtion_details\\&quot; is of type jsonb but expression is of type record\\n Hint: You will need to rewrite or cast the expression.\\n Position\r\n\r\nThis error is caused because the `List` is passed like this:\r\n\r\n    UPDATE\r\n        ItemsInventory items\r\n    SET\r\n        items.itemsInventoryAdditionDetails = (?, ?, ?, .., ?)\r\n    WHERE\r\n        items.itemSubId = ?\r\n\r\nBy default, Spring Data JPA, which uses Hibernate, doesn&#39;t know how to handle JSON types. So, you need to use a custom Hibernate Type, like the [`JsonBinaryType`](https://www.javadoc.io/doc/com.vladmihalcea/hibernate-types-52/latest/com/vladmihalcea/hibernate/type/json/JsonBinaryType.html) offered by the [Hibernate Types](https://github.com/vladmihalcea/hibernate-types) project.\r\n\r\nMaven dependency\r\n----------------\r\n\r\nFirst, you need to add the Hibernate Types dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\r\n        &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAfter you set the `hibernate-types.version` Maven property to the latest version, the dependency will be downloaded from Maven Central.\r\n\r\nSetting the Hibernate Type explicitly\r\n-------------------------------------\r\n\r\nYou won&#39;t be able to use the Spring `@Query` annotation since you can&#39;t set the Hibernate Type explicitly.\r\n\r\nSo, you need to add a [custom Spring Data JPA Repository implementation](https://docs.spring.io/spring-data/data-commons/docs/2.3.0.RELEASE/reference/html/#repositories.custom-implementations) with the following method:\r\n\r\n    public int updateItemsAdditionDetails(\r\n    \tString subId, \r\n    \tList&lt;ItemAdditionDetails&gt; updatedAdditionDetails) {\r\n    \treturn entityManager.createNativeQuery(\r\n    \t\t&quot;UPDATE items_inventory  SET itemsinventory_addtion_details = :updatedAdditionDetails WHERE item_subid = :subId&quot;)\r\n    \t.unwrap(NativeQuery.class)\r\n    \t.setParameter(&quot;updatedAdditionDetails&quot;, updatedAdditionDetails, JsonBinaryType.INSTANCE)\r\n    \t.setParameter(&quot;subId&quot;, subId)\r\n    \t.executeUpdate();\r\n    }\r\n\r\nThat&#39;s it!","title":"How to update a JSONB column in PostgreSQL using a Spring Data JPA Query","body":"<h2>The cause of the error</h2>\n<p>The PostgreSQL error looks as follows:</p>\n<blockquote>\n<p>ERROR: column &quot;itemsinventory_addtion_details&quot; is of type jsonb but expression is of type record\\n Hint: You will need to rewrite or cast the expression.\\n Position</p>\n</blockquote>\n<p>This error is caused because the <code>List</code> is passed like this:</p>\n<pre><code>UPDATE\n    ItemsInventory items\nSET\n    items.itemsInventoryAdditionDetails = (?, ?, ?, .., ?)\nWHERE\n    items.itemSubId = ?\n</code></pre>\n<p>By default, Spring Data JPA, which uses Hibernate, doesn't know how to handle JSON types. So, you need to use a custom Hibernate Type, like the <a href=\"https://www.javadoc.io/doc/com.vladmihalcea/hibernate-types-52/latest/com/vladmihalcea/hibernate/type/json/JsonBinaryType.html\" rel=\"nofollow noreferrer\"><code>JsonBinaryType</code></a> offered by the <a href=\"https://github.com/vladmihalcea/hibernate-types\" rel=\"nofollow noreferrer\">Hibernate Types</a> project.</p>\n<h2>Maven dependency</h2>\n<p>First, you need to add the Hibernate Types dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\n    &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After you set the <code>hibernate-types.version</code> Maven property to the latest version, the dependency will be downloaded from Maven Central.</p>\n<h2>Setting the Hibernate Type explicitly</h2>\n<p>You won't be able to use the Spring <code>@Query</code> annotation since you can't set the Hibernate Type explicitly.</p>\n<p>So, you need to add a <a href=\"https://docs.spring.io/spring-data/data-commons/docs/2.3.0.RELEASE/reference/html/#repositories.custom-implementations\" rel=\"nofollow noreferrer\">custom Spring Data JPA Repository implementation</a> with the following method:</p>\n<pre><code>public int updateItemsAdditionDetails(\n    String subId, \n    List&lt;ItemAdditionDetails&gt; updatedAdditionDetails) {\n    return entityManager.createNativeQuery(\n        &quot;UPDATE items_inventory  SET itemsinventory_addtion_details = :updatedAdditionDetails WHERE item_subid = :subId&quot;)\n    .unwrap(NativeQuery.class)\n    .setParameter(&quot;updatedAdditionDetails&quot;, updatedAdditionDetails, JsonBinaryType.INSTANCE)\n    .setParameter(&quot;subId&quot;, subId)\n    .executeUpdate();\n}\n</code></pre>\n<p>That's it!</p>\n"},{"tags":[],"owner":{"account_id":3266323,"reputation":12567,"user_id":2750743,"display_name":"Klesun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661524258,"creation_date":1661524258,"answer_id":73502617,"question_id":62246050,"body_markdown":"Another option I found is to just serialize your collection into string before feeding it to the query:\r\n```java\r\n@Transactional\r\n@Modifying\r\n@Query(value = &quot;UPDATE items_inventory  SET itemsinventory_addtion_details = :updatedAdditionDetails WHERE item_subid = :subId&quot;, nativeQuery = true)\r\nInteger updateItemsAdditionDetails(\r\n    @Param(&quot;subId&quot;) String subId,\r\n    @Param(&quot;updatedAdditionDetails&quot;) String updatedAdditionDetails\r\n                                  /* ^^^^^^ here */\r\n);\r\n\r\ndefault Integer updateItemsAdditionDetails(\r\n    @Param(&quot;subId&quot;) String subId,\r\n    @Param(&quot;updatedAdditionDetails&quot;) List&lt;ItemAdditionDetails&gt; updatedAdditionDetails\r\n) {\r\n    String updatedAdditionDetailsStr = new com.fasterxml.jackson.databind\r\n        .ObjectMapper().writeValueAsString(updatedAdditionDetails);\r\n\r\n    return updateItemsAdditionDetails(subId, updatedAdditionDetailsStr);\r\n}\r\n```\r\n\r\nPostgres seems to implicitly cast it to jsonb without problem.","title":"How to update a JSONB column in PostgreSQL using a Spring Data JPA Query","body":"<p>Another option I found is to just serialize your collection into string before feeding it to the query:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n@Modifying\n@Query(value = &quot;UPDATE items_inventory  SET itemsinventory_addtion_details = :updatedAdditionDetails WHERE item_subid = :subId&quot;, nativeQuery = true)\nInteger updateItemsAdditionDetails(\n    @Param(&quot;subId&quot;) String subId,\n    @Param(&quot;updatedAdditionDetails&quot;) String updatedAdditionDetails\n                                  /* ^^^^^^ here */\n);\n\ndefault Integer updateItemsAdditionDetails(\n    @Param(&quot;subId&quot;) String subId,\n    @Param(&quot;updatedAdditionDetails&quot;) List&lt;ItemAdditionDetails&gt; updatedAdditionDetails\n) {\n    String updatedAdditionDetailsStr = new com.fasterxml.jackson.databind\n        .ObjectMapper().writeValueAsString(updatedAdditionDetails);\n\n    return updateItemsAdditionDetails(subId, updatedAdditionDetailsStr);\n}\n</code></pre>\n<p>Postgres seems to implicitly cast it to jsonb without problem.</p>\n"}],"owner":{"account_id":4187463,"reputation":440,"user_id":3430868,"display_name":"ShibenDutta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6336,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":62275098,"answer_count":2,"score":5,"last_activity_date":1661524258,"creation_date":1591536421,"question_id":62246050,"body_markdown":"I have the following Controller\r\n\r\n    @RequestMapping(value = &quot;/update/{tableId}&quot;, method = RequestMethod.PUT, produces = MediaType.APPLICATION_JSON_VALUE,\r\n                consumes = MediaType.APPLICATION_JSON_VALUE)\r\n        public ResponseEntity updateItemQty (@PathVariable Long tableId, @RequestBody AddItemsRequestBody requestBody,\r\n                                                  HttpServletRequest request){\r\n            try {\r\n                String addedBy = getUserName(request);\r\n                Float ItemQuantity = requestBody.getItemQuantity();\r\n                LocalDateTime dateTimeAdded = LocalDateTime.now();\r\n                String subId = requestBody.getItemSubId();\r\n                ArrayList&lt;ItemAdditionDetails&gt; updatedAdditionDetails = new ArrayList&lt;&gt;();\r\n\r\n            ItemAdditionDetails newItemAdditionDetails = new ItemAdditionDetails();\r\n            newItemAdditionDetails.setIncreamentCount(ItemQuantity);\r\n            newItemAdditionDetails.setAddedDateTime(dateTimeAdded);\r\n            newItemAdditionDetails.setAddedBy(addedBy);\r\n\r\n            updatedAdditionDetails.add(newItemAdditionDetails);\r\n\r\n    // Here i am fetching a JSON-B column that returns an array of json objects from Postgress DB  \r\n         ItemInventoryService.findByItemSubId(subId).getItemsInventoryAdditionDetails().forEach((el) -&gt; {\r\n                    updatedAdditionDetails.add(el);\r\n                });\r\n            \r\n            itemInventoryService.updateItemsAdditionDetails(subId,updatedAdditionDetails);\r\n\r\n            return new ResponseEntity(&quot;Updated&quot;, HttpStatus.CREATED);\r\n        }catch (Exception ex){\r\n            return new ResponseEntity(ex, HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n\r\n    }\r\n\r\nIf i remove/comment \r\n\r\n    ItemInventoryService.findByItemSubId(subId).getItemsInventoryAdditionDetails().forEach((el) -&gt; {\r\n                    updatedAdditionDetails.add(el);\r\n                });\r\nThat is i don&#39;t add the fetched result to the new updatedAdditionDetails (of type ArrayList&lt;ItemAdditionDetails&gt;), the DB updates successfully\r\nOtherwise i get the below error :\r\n\r\n&gt; **ERROR**: column \\&quot;itemsinventory_addtion_details\\&quot; is of type jsonb but expression is of type record\\n  Hint: You will need to rewrite or cast the expression.\\n  Position\r\n\r\nIn my Repository i have the following query\r\n\r\n    @Transactional\r\n        @Modifying\r\n        @Query(value = &quot;UPDATE items_inventory  SET itemsinventory_addtion_details = :updatedAdditionDetails WHERE item_subid = :subId&quot;, nativeQuery = true)\r\n        Integer updateItemsAdditionDetails(@Param(&quot;subId&quot;) String subId, @Param(&quot;updatedAdditionDetails&quot;) List&lt;ItemAdditionDetails&gt; updatedAdditionDetails);\r\n\r\nI have tried it the JPA way as follows:\r\n\r\n     @Query(value = &quot;UPDATE ItemsInventory items  SET items.itemsInventoryAdditionDetails = :updatedAdditionDetails WHERE items.itemSubId = :subId&quot;)\r\n\r\nThis unfortunately has fetched the same error.\r\nAny help on this is greatly appreciated.\r\nThanks in advance.","title":"How to update a JSONB column in PostgreSQL using a Spring Data JPA Query","body":"<p>I have the following Controller</p>\n\n<pre><code>@RequestMapping(value = \"/update/{tableId}\", method = RequestMethod.PUT, produces = MediaType.APPLICATION_JSON_VALUE,\n            consumes = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity updateItemQty (@PathVariable Long tableId, @RequestBody AddItemsRequestBody requestBody,\n                                              HttpServletRequest request){\n        try {\n            String addedBy = getUserName(request);\n            Float ItemQuantity = requestBody.getItemQuantity();\n            LocalDateTime dateTimeAdded = LocalDateTime.now();\n            String subId = requestBody.getItemSubId();\n            ArrayList&lt;ItemAdditionDetails&gt; updatedAdditionDetails = new ArrayList&lt;&gt;();\n\n        ItemAdditionDetails newItemAdditionDetails = new ItemAdditionDetails();\n        newItemAdditionDetails.setIncreamentCount(ItemQuantity);\n        newItemAdditionDetails.setAddedDateTime(dateTimeAdded);\n        newItemAdditionDetails.setAddedBy(addedBy);\n\n        updatedAdditionDetails.add(newItemAdditionDetails);\n\n// Here i am fetching a JSON-B column that returns an array of json objects from Postgress DB  \n     ItemInventoryService.findByItemSubId(subId).getItemsInventoryAdditionDetails().forEach((el) -&gt; {\n                updatedAdditionDetails.add(el);\n            });\n\n        itemInventoryService.updateItemsAdditionDetails(subId,updatedAdditionDetails);\n\n        return new ResponseEntity(\"Updated\", HttpStatus.CREATED);\n    }catch (Exception ex){\n        return new ResponseEntity(ex, HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n\n}\n</code></pre>\n\n<p>If i remove/comment </p>\n\n<pre><code>ItemInventoryService.findByItemSubId(subId).getItemsInventoryAdditionDetails().forEach((el) -&gt; {\n                updatedAdditionDetails.add(el);\n            });\n</code></pre>\n\n<p>That is i don't add the fetched result to the new updatedAdditionDetails (of type ArrayList), the DB updates successfully\nOtherwise i get the below error :</p>\n\n<blockquote>\n  <p><strong>ERROR</strong>: column \\\"itemsinventory_addtion_details\\\" is of type jsonb but expression is of type record\\n  Hint: You will need to rewrite or cast the expression.\\n  Position</p>\n</blockquote>\n\n<p>In my Repository i have the following query</p>\n\n<pre><code>@Transactional\n    @Modifying\n    @Query(value = \"UPDATE items_inventory  SET itemsinventory_addtion_details = :updatedAdditionDetails WHERE item_subid = :subId\", nativeQuery = true)\n    Integer updateItemsAdditionDetails(@Param(\"subId\") String subId, @Param(\"updatedAdditionDetails\") List&lt;ItemAdditionDetails&gt; updatedAdditionDetails);\n</code></pre>\n\n<p>I have tried it the JPA way as follows:</p>\n\n<pre><code> @Query(value = \"UPDATE ItemsInventory items  SET items.itemsInventoryAdditionDetails = :updatedAdditionDetails WHERE items.itemSubId = :subId\")\n</code></pre>\n\n<p>This unfortunately has fetched the same error.\nAny help on this is greatly appreciated.\nThanks in advance.</p>\n"},{"tags":["java","runtime","reverse-engineering","binaryfiles"],"comments":[{"owner":{"account_id":23048549,"reputation":86,"user_id":17165747,"display_name":"オンディ"},"score":0,"creation_date":1661764628,"post_id":73502556,"comment_id":129840840,"body_markdown":"In general this does not seem like a feasible approach. An actual &quot;context menu entry&quot; (I assume you mean when right clicking something in the open source program) should be implemented inside said software. You can then from there call your Java program with whatever arguments you want.\n\nCould you disclose what open source program you are looking at? That would make it easier to judge","body":"In general this does not seem like a feasible approach. An actual &quot;context menu entry&quot; (I assume you mean when right clicking something in the open source program) should be implemented inside said software. You can then from there call your Java program with whatever arguments you want.  Could you disclose what open source program you are looking at? That would make it easier to judge"},{"owner":{"account_id":10045459,"reputation":255,"user_id":7427029,"accept_rate":100,"display_name":"user7427029"},"score":0,"creation_date":1661868484,"post_id":73502556,"comment_id":129870689,"body_markdown":"Thanks. The open source program is HeidiSQL, writtten in Pascal.","body":"Thanks. The open source program is HeidiSQL, writtten in Pascal."}],"owner":{"account_id":10045459,"reputation":255,"user_id":7427029,"accept_rate":100,"display_name":"user7427029"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661523979,"creation_date":1661523979,"question_id":73502556,"body_markdown":"I would like to write an extension E for an open source program P, which is not written in the language in which I would write the extension and which I have to use (Java). Is there some standard procedure (how) to add a context menu entry to a running binary (P) using the input from a text field in P as input to my extension E? (e.g. as a command line argument)? (I am thinking of a sort of runtime patching.)\r\n\r\nP is written by one person, which uses solely a rather different programming language and my extension is of really small interest to other users (solving a domain-specific problem for colleagues), so I do not consider it wise to bother the developer or having the burden to maintain a fork, which would have to be manually revisited every time the program is updated, even if there are only invisible changes under the hood. Or are my conclusions wrong?","title":"Add context menu entry to foreign program","body":"<p>I would like to write an extension E for an open source program P, which is not written in the language in which I would write the extension and which I have to use (Java). Is there some standard procedure (how) to add a context menu entry to a running binary (P) using the input from a text field in P as input to my extension E? (e.g. as a command line argument)? (I am thinking of a sort of runtime patching.)</p>\n<p>P is written by one person, which uses solely a rather different programming language and my extension is of really small interest to other users (solving a domain-specific problem for colleagues), so I do not consider it wise to bother the developer or having the burden to maintain a fork, which would have to be manually revisited every time the program is updated, even if there are only invisible changes under the hood. Or are my conclusions wrong?</p>\n"},{"tags":["java","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661500159,"creation_date":1661500159,"answer_id":73497735,"question_id":73493364,"body_markdown":"### Historic feature\r\n\r\nFun fact, there used to be a feature like this in jOOQ 1.x: [#123][1]\r\n\r\nIt was removed again in jOOQ 3.0, because it was overly complicated (as you&#39;ve noticed yourself, via your own implementation attempt), and lead to numerous code generation bugs, all the while not answering real-world use-cases that wanted the feature to be even more powerful: [#1740][2]\r\n\r\nTo answer your specific question: Rather than trying to remove meta data about such lookup tables, why not just use a `Converter` on the foreign key and the primary key to reference the `enum` type rather than e.g. the `Integer` value. You can still keep the lookup tables in your generated code, but once you&#39;ve replaced the type, you no longer have to join.\r\n\r\nOf course, you can also still generate the enum from actual values in the lookup table.\r\n\r\n### Alternative approach using natural keys\r\n\r\nBut here&#39;s a &quot;revolutionary&quot; idea that helps you work around the issue very simply. How about defining a natural key instead, and reference that from all your foreign keys.\r\n\r\nThat way, you can still use a [`Converter`][3] on the column to bind the column to your enum type (just like I&#39;ve described before), and thus forever avoid joins to the lookup table even in plain SQL queries, because the interesting lookup key is already referenced from all foreign keys. Note that this isn&#39;t against normalisation principles at all! It just removes useless surrogate keys.\r\n\r\nFor example:\r\n\r\n**instead of...**\r\n\r\n```sql\r\nCREATE TABLE currency (\r\n  id BIGINT NOT NULL PRIMARY KEY,\r\n  iso_code CHAR(3) NOT NULL,\r\n  description TEXT NOT NULL\r\n);\r\n\r\nCREATE TABLE transactions (\r\n  id BIGINT NOT NULL PRIMARY KEY,\r\n  amount NUMERIC NOT NULL,\r\n  currency_id NOT NULL REFERENCES currency\r\n)\r\n```\r\n\r\n**...do this**\r\n\r\n```sql\r\nCREATE TABLE currency (\r\n  iso_code CHAR(3) NOT NULL PRIMARY KEY,\r\n  description TEXT NOT NULL\r\n);\r\n\r\nCREATE TABLE transactions (\r\n  id BIGINT NOT NULL PRIMARY KEY,\r\n  amount NUMERIC NOT NULL,\r\n  currency_iso_code NOT NULL REFERENCES currency\r\n)\r\n```\r\n\r\nHere are some blog posts on the subject:\r\n\r\n- [The cost of useless surrogate keys in relationship tables][4]\r\n- [Say NO to excessive use of surrogate keys if performance really matters to you][5]\r\n- [Faster SQL through occasionally choosing natural keys over surrogate keys][6]\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/issues/123\r\n  [2]: https://github.com/jOOQ/jOOQ/issues/1740\r\n  [3]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-advanced/codegen-config-database/codegen-database-forced-types/codegen-database-forced-types-enum-converter/\r\n  [4]: https://blog.jooq.org/the-cost-of-useless-surrogate-keys-in-relationship-tables/\r\n  [5]: https://blog.jooq.org/say-no-to-excessive-use-of-surrogate-keys-if-performance-really-matters-to-you/\r\n  [6]: https://blog.jooq.org/faster-sql-through-occasionally-choosing-natural-keys-over-surrogate-keys/","title":"Remove foreign keys in custom code generator","body":"<h3>Historic feature</h3>\n<p>Fun fact, there used to be a feature like this in jOOQ 1.x: <a href=\"https://github.com/jOOQ/jOOQ/issues/123\" rel=\"nofollow noreferrer\">#123</a></p>\n<p>It was removed again in jOOQ 3.0, because it was overly complicated (as you've noticed yourself, via your own implementation attempt), and lead to numerous code generation bugs, all the while not answering real-world use-cases that wanted the feature to be even more powerful: <a href=\"https://github.com/jOOQ/jOOQ/issues/1740\" rel=\"nofollow noreferrer\">#1740</a></p>\n<p>To answer your specific question: Rather than trying to remove meta data about such lookup tables, why not just use a <code>Converter</code> on the foreign key and the primary key to reference the <code>enum</code> type rather than e.g. the <code>Integer</code> value. You can still keep the lookup tables in your generated code, but once you've replaced the type, you no longer have to join.</p>\n<p>Of course, you can also still generate the enum from actual values in the lookup table.</p>\n<h3>Alternative approach using natural keys</h3>\n<p>But here's a &quot;revolutionary&quot; idea that helps you work around the issue very simply. How about defining a natural key instead, and reference that from all your foreign keys.</p>\n<p>That way, you can still use a <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-advanced/codegen-config-database/codegen-database-forced-types/codegen-database-forced-types-enum-converter/\" rel=\"nofollow noreferrer\"><code>Converter</code></a> on the column to bind the column to your enum type (just like I've described before), and thus forever avoid joins to the lookup table even in plain SQL queries, because the interesting lookup key is already referenced from all foreign keys. Note that this isn't against normalisation principles at all! It just removes useless surrogate keys.</p>\n<p>For example:</p>\n<p><strong>instead of...</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE currency (\n  id BIGINT NOT NULL PRIMARY KEY,\n  iso_code CHAR(3) NOT NULL,\n  description TEXT NOT NULL\n);\n\nCREATE TABLE transactions (\n  id BIGINT NOT NULL PRIMARY KEY,\n  amount NUMERIC NOT NULL,\n  currency_id NOT NULL REFERENCES currency\n)\n</code></pre>\n<p><strong>...do this</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE currency (\n  iso_code CHAR(3) NOT NULL PRIMARY KEY,\n  description TEXT NOT NULL\n);\n\nCREATE TABLE transactions (\n  id BIGINT NOT NULL PRIMARY KEY,\n  amount NUMERIC NOT NULL,\n  currency_iso_code NOT NULL REFERENCES currency\n)\n</code></pre>\n<p>Here are some blog posts on the subject:</p>\n<ul>\n<li><a href=\"https://blog.jooq.org/the-cost-of-useless-surrogate-keys-in-relationship-tables/\" rel=\"nofollow noreferrer\">The cost of useless surrogate keys in relationship tables</a></li>\n<li><a href=\"https://blog.jooq.org/say-no-to-excessive-use-of-surrogate-keys-if-performance-really-matters-to-you/\" rel=\"nofollow noreferrer\">Say NO to excessive use of surrogate keys if performance really matters to you</a></li>\n<li><a href=\"https://blog.jooq.org/faster-sql-through-occasionally-choosing-natural-keys-over-surrogate-keys/\" rel=\"nofollow noreferrer\">Faster SQL through occasionally choosing natural keys over surrogate keys</a></li>\n</ul>\n"}],"owner":{"account_id":20647599,"reputation":155,"user_id":15158714,"display_name":"wand555"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661523955,"creation_date":1661459188,"question_id":73493364,"body_markdown":"I&#39;m writing a custom code generator where each master data table has its own java enum.\r\nI use the `forcedType` settings in the JOOQ configuration to map every use of the table to the enum, which works fine.\r\nI&#39;m working on removing the unnecessary generated classes like the POJO, DAO, and Record and came up with 2 options.\r\n\r\n1. Exclude table from code generation\r\n\r\nUsing the `&lt;excludes&gt;table_name_which_is_an_enum_in_java&lt;/excludes&gt;` flag however this also messes up the code generation for my enum, because the tables in the schema do not contain the excluded table anymore meaning I cannot convert it to an enum.\r\n\r\n2. Manually skip code generation in custom generator\r\n\r\nThe idea is to check every relevant generation method and skip the table if it&#39;s the table which should be converted to an enum. This works fine for\r\n\r\n - POJOs with `generatePOJO`\r\n - DAOs with `generateDAO`\r\n - Records with `generateRecords`\r\n\r\nTo prevent the table generation I remove the table from the database object (to my surprise the returned list is mutable).\r\n```java\r\nprotected void generateSchema(SchemaDefinition schema) {\r\n    //enum generation logic\r\n    List&lt;TableDefinition&gt; tableDefinitions = db.getTables(schema);\r\n    TableDefinition toRemove = db.getTable(schema, &quot;table_name_which_is_an_enum_in_java&quot;, true);\r\n    boolean removed = tableDefinitions.remove(toRemove);\r\n    if(removed) {\r\n        log.info(&quot;Removed table {} from code generation&quot;, toRemove);\r\n    }\r\n}\r\n```\r\n\r\nBut I have trouble removing the foreign key relations.\r\nWhen I override `printForeignKey` and only call the parent method if the foreign key&#39;s referenced table is not the table which should be converted to an enum, then the generated `Keys` class does not generate the foreign key, however it still attemps to import the record, which does not exist.\r\n```java\r\n@Override\r\nprotected void printForeignKey(JavaWriter out, int foreignKeyCounter, ForeignKeyDefinition foreignKey, boolean distributeForeignKey) {\r\n    if(foreignKey.getReferencedTable().getName().equalsIgnoreCase(&quot;table_name_which_is_an_enum_in_java&quot;)) {\r\n        return;\r\n    }\r\n    super.printForeignKey(out, foreignKeyCounter, foreignKey, distributeForeignKey);\r\n}\r\n\r\n```\r\nAnother problem is the table where the foreign key is located in. A reference method and a transient field with another method are being created.\r\nThis is just an example:\r\n```java\r\n//class StammdatenZustand and Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND do not exist anymore\r\n@Override\r\n@Nonnull\r\npublic List&lt;ForeignKey&lt;SpielzeugRecord, ?&gt;&gt; getReferences() {\r\n    return Arrays.asList(Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND);\r\n}\r\n\r\nprivate transient StammdatenZustand _stammdatenZustand; \r\n\r\npublic StammdatenZustand stammdatenZustand() {\r\n    if (_stammdatenZustand == null)\r\n        _stammdatenZustand = new StammdatenZustand(this, Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND);\r\n\r\n    return _stammdatenZustand;\r\n}\r\n```\r\n\r\nI dug into the source code of `JavaGenerator` and found the [code causing the trouble][1], but I don&#39;t know how to find a workaround.\r\nThe easiest solution would be to be able to modify the list that is being returned with `tableDefinition.getForeignKeys(tableWhichWillBeAnEnum)` and then call `clear()` on that, but sadly this time [the list is not mutable][2].\r\n\r\nEDIT: My current results are the following:\r\n\r\nThis is the table I want to convert into an enum (table name is &quot;stammdaten_zustand&quot;)\r\n\r\n[![enter image description here][3]][3]\r\n\r\nwith the following data\r\n\r\n[![enter image description here][4]][4]\r\n\r\nand this is the table where the pk is referenced (table name is &quot;spielzeug&quot;)\r\n\r\n[![enter image description here][5]][5]\r\n\r\nMy custom generator generates the following enum for the first table\r\n```java\r\npublic enum StammdatenZustandEnum {\r\n    GUT(&quot;Das Produkt ist fast neuwertig.&quot;, 1, false),\r\n    MITTEL(&quot;Einige Gebrauchsspuren sind vorhanden, die vermutlich einen Einfluss auf den Preis haben.&quot;, 2, true),\r\n    SCHLECHT(&quot;Das Produkt ist in einem schlechten Zustand. Verkaufen wird sich kaum lohnen.&quot;, 3, true),\r\n    UNBEKANNT(&quot;Zustand des Produkts ist nicht bekannt.&quot;, 4, true);\r\n\r\n    private final String beschreibung;\r\n    private final Integer testInt;\r\n    private final boolean testBool;\r\n\r\n    private StammdatenZustandEnum(String beschreibung,Integer testInt,boolean testBool) {\r\n        this.beschreibung = beschreibung;\r\n        this.testInt = testInt;\r\n        this.testBool = testBool;\r\n    }\r\n\r\n    public String getBeschreibung() {\r\n        return this.beschreibung;\r\n    }\r\n\r\n    public Integer getTestInt() {\r\n        return this.testInt;\r\n    }\r\n\r\n    public boolean isTestBool() {\r\n        return this.testBool;\r\n    }\r\n\r\n}\r\n```\r\nIn the pom.xml of the project I also use a `converter` to map everything to the generated enum.\r\n```xml\r\n&lt;forcedType&gt;\r\n    &lt;userType&gt;model.db.jooq.StammdatenZustandEnum&lt;/userType&gt;\r\n    &lt;enumConverter&gt;true&lt;/enumConverter&gt;\r\n    &lt;includeExpression&gt;.*\\.Zustand_Kuerzel&lt;/includeExpression&gt;\r\n    &lt;includeTypes&gt;.*&lt;/includeTypes&gt;\r\n&lt;/forcedType&gt;\r\n```\r\nAnd for example the generated POJO &quot;Spielzeug&quot; is mapped correctly.\r\n```java\r\npublic class Spielzeug implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    private Integer               produktId;\r\n    private String                produktname;\r\n    private Double                kaufpreis;\r\n    private Boolean               verkaeuflich;\r\n    private StammdatenZustandEnum zustandKuerzel; // mapped to enum\r\n...\r\n```\r\n\r\nWhich means I already do what you suggest if I understood you correctly?\r\n\r\nHowever the generated table for &quot;Spielzeug&quot; still generates the following snippet\r\n```java\r\n@Override\r\n@Nonnull\r\npublic List&lt;ForeignKey&lt;SpielzeugRecord, ?&gt;&gt; getReferences() {\r\n    return Arrays.asList(Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND);\r\n}\r\n\r\nprivate transient StammdatenZustand _stammdatenZustand;\r\n\r\npublic StammdatenZustand stammdatenZustand() {\r\n    if (_stammdatenZustand == null)\r\n        _stammdatenZustand = new StammdatenZustand(this, Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND);\r\n\r\n    return _stammdatenZustand;\r\n}\r\n```\r\nand the `Keys` class attempts to generate a foreign key\r\n```java\r\n    public static final ForeignKey&lt;SpielzeugRecord, StammdatenZustandRecord&gt; FK_SPIELZEUG_STAMMDATEN_ZUSTAND = Internal.createForeignKey(Spielzeug.SPIELZEUG, DSL.name(&quot;FK_spielzeug_stammdaten_zustand&quot;), new TableField[] { Spielzeug.SPIELZEUG.ZUSTAND_KUERZEL }, Keys.KEY_STAMMDATEN_ZUSTAND_PRIMARY, new TableField[] { StammdatenZustand.STAMMDATEN_ZUSTAND.KUERZEL }, true);\r\n```\r\nBut both snippets throw errors because the &quot;StammdatenZustand&quot; POJO and Record do not exist.\r\n\r\nOn a side note: Generally speaking the mapping works and there are no erros when I just leave the generated Dao, POJO and Record. In this case I just have to tell the end user to basically ignore these classes and favour the generated enum.\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/blob/main/jOOQ-codegen/src/main/java/org/jooq/codegen/JavaGenerator.java#L6475\r\n  [2]: https://github.com/jOOQ/jOOQ/blob/main/jOOQ-meta/src/main/java/org/jooq/meta/DefaultRelations.java#L421\r\n  [3]: https://i.stack.imgur.com/0d17b.png\r\n  [4]: https://i.stack.imgur.com/yNXmS.png\r\n  [5]: https://i.stack.imgur.com/zhS2f.png","title":"Remove foreign keys in custom code generator","body":"<p>I'm writing a custom code generator where each master data table has its own java enum.\nI use the <code>forcedType</code> settings in the JOOQ configuration to map every use of the table to the enum, which works fine.\nI'm working on removing the unnecessary generated classes like the POJO, DAO, and Record and came up with 2 options.</p>\n<ol>\n<li>Exclude table from code generation</li>\n</ol>\n<p>Using the <code>&lt;excludes&gt;table_name_which_is_an_enum_in_java&lt;/excludes&gt;</code> flag however this also messes up the code generation for my enum, because the tables in the schema do not contain the excluded table anymore meaning I cannot convert it to an enum.</p>\n<ol start=\"2\">\n<li>Manually skip code generation in custom generator</li>\n</ol>\n<p>The idea is to check every relevant generation method and skip the table if it's the table which should be converted to an enum. This works fine for</p>\n<ul>\n<li>POJOs with <code>generatePOJO</code></li>\n<li>DAOs with <code>generateDAO</code></li>\n<li>Records with <code>generateRecords</code></li>\n</ul>\n<p>To prevent the table generation I remove the table from the database object (to my surprise the returned list is mutable).</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected void generateSchema(SchemaDefinition schema) {\n    //enum generation logic\n    List&lt;TableDefinition&gt; tableDefinitions = db.getTables(schema);\n    TableDefinition toRemove = db.getTable(schema, &quot;table_name_which_is_an_enum_in_java&quot;, true);\n    boolean removed = tableDefinitions.remove(toRemove);\n    if(removed) {\n        log.info(&quot;Removed table {} from code generation&quot;, toRemove);\n    }\n}\n</code></pre>\n<p>But I have trouble removing the foreign key relations.\nWhen I override <code>printForeignKey</code> and only call the parent method if the foreign key's referenced table is not the table which should be converted to an enum, then the generated <code>Keys</code> class does not generate the foreign key, however it still attemps to import the record, which does not exist.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void printForeignKey(JavaWriter out, int foreignKeyCounter, ForeignKeyDefinition foreignKey, boolean distributeForeignKey) {\n    if(foreignKey.getReferencedTable().getName().equalsIgnoreCase(&quot;table_name_which_is_an_enum_in_java&quot;)) {\n        return;\n    }\n    super.printForeignKey(out, foreignKeyCounter, foreignKey, distributeForeignKey);\n}\n\n</code></pre>\n<p>Another problem is the table where the foreign key is located in. A reference method and a transient field with another method are being created.\nThis is just an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//class StammdatenZustand and Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND do not exist anymore\n@Override\n@Nonnull\npublic List&lt;ForeignKey&lt;SpielzeugRecord, ?&gt;&gt; getReferences() {\n    return Arrays.asList(Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND);\n}\n\nprivate transient StammdatenZustand _stammdatenZustand; \n\npublic StammdatenZustand stammdatenZustand() {\n    if (_stammdatenZustand == null)\n        _stammdatenZustand = new StammdatenZustand(this, Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND);\n\n    return _stammdatenZustand;\n}\n</code></pre>\n<p>I dug into the source code of <code>JavaGenerator</code> and found the <a href=\"https://github.com/jOOQ/jOOQ/blob/main/jOOQ-codegen/src/main/java/org/jooq/codegen/JavaGenerator.java#L6475\" rel=\"nofollow noreferrer\">code causing the trouble</a>, but I don't know how to find a workaround.\nThe easiest solution would be to be able to modify the list that is being returned with <code>tableDefinition.getForeignKeys(tableWhichWillBeAnEnum)</code> and then call <code>clear()</code> on that, but sadly this time <a href=\"https://github.com/jOOQ/jOOQ/blob/main/jOOQ-meta/src/main/java/org/jooq/meta/DefaultRelations.java#L421\" rel=\"nofollow noreferrer\">the list is not mutable</a>.</p>\n<p>EDIT: My current results are the following:</p>\n<p>This is the table I want to convert into an enum (table name is &quot;stammdaten_zustand&quot;)</p>\n<p><a href=\"https://i.stack.imgur.com/0d17b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0d17b.png\" alt=\"enter image description here\" /></a></p>\n<p>with the following data</p>\n<p><a href=\"https://i.stack.imgur.com/yNXmS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yNXmS.png\" alt=\"enter image description here\" /></a></p>\n<p>and this is the table where the pk is referenced (table name is &quot;spielzeug&quot;)</p>\n<p><a href=\"https://i.stack.imgur.com/zhS2f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zhS2f.png\" alt=\"enter image description here\" /></a></p>\n<p>My custom generator generates the following enum for the first table</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum StammdatenZustandEnum {\n    GUT(&quot;Das Produkt ist fast neuwertig.&quot;, 1, false),\n    MITTEL(&quot;Einige Gebrauchsspuren sind vorhanden, die vermutlich einen Einfluss auf den Preis haben.&quot;, 2, true),\n    SCHLECHT(&quot;Das Produkt ist in einem schlechten Zustand. Verkaufen wird sich kaum lohnen.&quot;, 3, true),\n    UNBEKANNT(&quot;Zustand des Produkts ist nicht bekannt.&quot;, 4, true);\n\n    private final String beschreibung;\n    private final Integer testInt;\n    private final boolean testBool;\n\n    private StammdatenZustandEnum(String beschreibung,Integer testInt,boolean testBool) {\n        this.beschreibung = beschreibung;\n        this.testInt = testInt;\n        this.testBool = testBool;\n    }\n\n    public String getBeschreibung() {\n        return this.beschreibung;\n    }\n\n    public Integer getTestInt() {\n        return this.testInt;\n    }\n\n    public boolean isTestBool() {\n        return this.testBool;\n    }\n\n}\n</code></pre>\n<p>In the pom.xml of the project I also use a <code>converter</code> to map everything to the generated enum.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;forcedType&gt;\n    &lt;userType&gt;model.db.jooq.StammdatenZustandEnum&lt;/userType&gt;\n    &lt;enumConverter&gt;true&lt;/enumConverter&gt;\n    &lt;includeExpression&gt;.*\\.Zustand_Kuerzel&lt;/includeExpression&gt;\n    &lt;includeTypes&gt;.*&lt;/includeTypes&gt;\n&lt;/forcedType&gt;\n</code></pre>\n<p>And for example the generated POJO &quot;Spielzeug&quot; is mapped correctly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Spielzeug implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    private Integer               produktId;\n    private String                produktname;\n    private Double                kaufpreis;\n    private Boolean               verkaeuflich;\n    private StammdatenZustandEnum zustandKuerzel; // mapped to enum\n...\n</code></pre>\n<p>Which means I already do what you suggest if I understood you correctly?</p>\n<p>However the generated table for &quot;Spielzeug&quot; still generates the following snippet</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n@Nonnull\npublic List&lt;ForeignKey&lt;SpielzeugRecord, ?&gt;&gt; getReferences() {\n    return Arrays.asList(Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND);\n}\n\nprivate transient StammdatenZustand _stammdatenZustand;\n\npublic StammdatenZustand stammdatenZustand() {\n    if (_stammdatenZustand == null)\n        _stammdatenZustand = new StammdatenZustand(this, Keys.FK_SPIELZEUG_STAMMDATEN_ZUSTAND);\n\n    return _stammdatenZustand;\n}\n</code></pre>\n<p>and the <code>Keys</code> class attempts to generate a foreign key</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static final ForeignKey&lt;SpielzeugRecord, StammdatenZustandRecord&gt; FK_SPIELZEUG_STAMMDATEN_ZUSTAND = Internal.createForeignKey(Spielzeug.SPIELZEUG, DSL.name(&quot;FK_spielzeug_stammdaten_zustand&quot;), new TableField[] { Spielzeug.SPIELZEUG.ZUSTAND_KUERZEL }, Keys.KEY_STAMMDATEN_ZUSTAND_PRIMARY, new TableField[] { StammdatenZustand.STAMMDATEN_ZUSTAND.KUERZEL }, true);\n</code></pre>\n<p>But both snippets throw errors because the &quot;StammdatenZustand&quot; POJO and Record do not exist.</p>\n<p>On a side note: Generally speaking the mapping works and there are no erros when I just leave the generated Dao, POJO and Record. In this case I just have to tell the end user to basically ignore these classes and favour the generated enum.</p>\n"},{"tags":["java","fonts","itext","inputstream"],"comments":[{"owner":{"account_id":1016996,"reputation":726,"user_id":1028345,"display_name":"aryn.galadar"},"score":0,"creation_date":1438190338,"post_id":31706979,"comment_id":51352427,"body_markdown":"What is BaseFont? It&#39;s not in the normal JDK.","body":"What is BaseFont? It&#39;s not in the normal JDK."},{"owner":{"account_id":3883582,"reputation":32684,"user_id":3215527,"accept_rate":40,"display_name":"wero"},"score":0,"creation_date":1438190550,"post_id":31706979,"comment_id":51352558,"body_markdown":"@aryn.galadar it is in itext. 99maas: can&#39;t you include that information?","body":"@aryn.galadar it is in itext. 99maas: can&#39;t you include that information?"},{"owner":{"account_id":3883582,"reputation":32684,"user_id":3215527,"accept_rate":40,"display_name":"wero"},"score":0,"creation_date":1438190759,"post_id":31706979,"comment_id":51352691,"body_markdown":"and `BaseFont` has no `createFont` method which accepts an InputStream.","body":"and <code>BaseFont</code> has no <code>createFont</code> method which accepts an InputStream."},{"owner":{"account_id":1016996,"reputation":726,"user_id":1028345,"display_name":"aryn.galadar"},"score":1,"creation_date":1438191059,"post_id":31706979,"comment_id":51352865,"body_markdown":"If the font isn&#39;t available on the file system, you&#39;ll need to read the font file into a byte array and use the BaseFont.createFont(String, String, boolean, boolean, byte[], byte[]) constructor. See the iText javadoc for more info.","body":"If the font isn&#39;t available on the file system, you&#39;ll need to read the font file into a byte array and use the BaseFont.createFont(String, String, boolean, boolean, byte[], byte[]) constructor. See the iText javadoc for more info."}],"answers":[{"tags":[],"owner":{"account_id":166203,"reputation":10902,"user_id":390177,"accept_rate":83,"display_name":"CSchulz"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1442419392,"creation_date":1442419392,"answer_id":32613566,"question_id":31706979,"body_markdown":"Try something like the following:\r\n\r\n    byte[] bytes = IOUtils.toByteArray(Thread.currentThread().getContextClassLoader()\r\n            .getResourceAsStream(&quot;/resources/arial.ttf&quot;));\r\n    BaseFont.createFont(&quot;arial.ttf&quot;, BaseFont.IDENTITY_Harial.ttf, BaseFont.EMBEDDED, true, bytes, null);\r\n\r\nYou have to specify the **.ttf** in the font name to tell the method it should interpret it as ttf format.","title":"How to create iText BaseFont based on InputStream","body":"<p>Try something like the following:</p>\n\n<pre><code>byte[] bytes = IOUtils.toByteArray(Thread.currentThread().getContextClassLoader()\n        .getResourceAsStream(\"/resources/arial.ttf\"));\nBaseFont.createFont(\"arial.ttf\", BaseFont.IDENTITY_Harial.ttf, BaseFont.EMBEDDED, true, bytes, null);\n</code></pre>\n\n<p>You have to specify the <strong>.ttf</strong> in the font name to tell the method it should interpret it as ttf format.</p>\n"},{"tags":[],"owner":{"account_id":11445284,"reputation":631,"user_id":8389388,"display_name":"Pines Tran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661523557,"creation_date":1661491086,"answer_id":73496368,"question_id":31706979,"body_markdown":"**InputStream** is not allowed as parameter in **createFont** method.\r\n\r\nWe can convert inputStream to byte array data to create the font, or can get file and do directly like code below:\r\n\r\n    byte[] data = Files.readAllBytes(Path.of(&quot;/resources/arial.ttf&quot;)); \r\n    final BaseFont bfbold = BaseFont.createFont(&quot;arial.ttf&quot;, BaseFont.IDENTITY_H, BaseFont.EMBEDDED, true, data, null);\r\n\r\nIf you are accessing to **external Url**, the **byte array data** should get:\r\n\r\n    byte [] data = null;\r\n    try(InputStream in = new URL(&quot;https://p7qp.blob.core.windows.net/font/arial.ttf?sv=2021-08-06&amp;ss=bf&amp;srt=co&amp;se=2022-08-token&quot;).openStream()){\r\n                    data = in.readAllBytes();\r\n    } //using try(){} here to auto close the inputstream after finished task\r\n\r\n \r\nExplain a little bit about parameter in **createFont** method.\r\n\r\n    public static BaseFont createFont(String name, String encoding, boolean embedded,\r\n                                      boolean cached,\r\n                                      byte[] ttfAfm,\r\n                                      byte[] pfb)throws DocumentException,\r\n                                      IOException { ... }\r\n\r\n**Parameters:**\r\n\r\n - name - the name of the font or its location on file \r\n - encoding - the encoding to be applied to this font \r\n - embedded - true if the font is to    be embedded in the PDF\r\n - cached - true if the font comes from the cache    or is added to the\r\n   cache if new, false if the font is always created    new\r\n - ttfAfm - the true type font or the afm in a byte array\r\n - pfb - the    pfb in a byte array\r\n\r\nReferences: [link][1]\r\n\r\n\r\n  [1]: https://www.javadoc.io/static/com.itextpdf/itextpdf/5.4.1/com/itextpdf/text/pdf/BaseFont.html#createFont(java.lang.String,%20java.lang.String,%20boolean,%20boolean,%20byte[],%20byte[])","title":"How to create iText BaseFont based on InputStream","body":"<p><strong>InputStream</strong> is not allowed as parameter in <strong>createFont</strong> method.</p>\n<p>We can convert inputStream to byte array data to create the font, or can get file and do directly like code below:</p>\n<pre><code>byte[] data = Files.readAllBytes(Path.of(&quot;/resources/arial.ttf&quot;)); \nfinal BaseFont bfbold = BaseFont.createFont(&quot;arial.ttf&quot;, BaseFont.IDENTITY_H, BaseFont.EMBEDDED, true, data, null);\n</code></pre>\n<p>If you are accessing to <strong>external Url</strong>, the <strong>byte array data</strong> should get:</p>\n<pre><code>byte [] data = null;\ntry(InputStream in = new URL(&quot;https://p7qp.blob.core.windows.net/font/arial.ttf?sv=2021-08-06&amp;ss=bf&amp;srt=co&amp;se=2022-08-token&quot;).openStream()){\n                data = in.readAllBytes();\n} //using try(){} here to auto close the inputstream after finished task\n</code></pre>\n<p>Explain a little bit about parameter in <strong>createFont</strong> method.</p>\n<pre><code>public static BaseFont createFont(String name, String encoding, boolean embedded,\n                                  boolean cached,\n                                  byte[] ttfAfm,\n                                  byte[] pfb)throws DocumentException,\n                                  IOException { ... }\n</code></pre>\n<p><strong>Parameters:</strong></p>\n<ul>\n<li>name - the name of the font or its location on file</li>\n<li>encoding - the encoding to be applied to this font</li>\n<li>embedded - true if the font is to    be embedded in the PDF</li>\n<li>cached - true if the font comes from the cache    or is added to the\ncache if new, false if the font is always created    new</li>\n<li>ttfAfm - the true type font or the afm in a byte array</li>\n<li>pfb - the    pfb in a byte array</li>\n</ul>\n<p>References: <a href=\"https://www.javadoc.io/static/com.itextpdf/itextpdf/5.4.1/com/itextpdf/text/pdf/BaseFont.html#createFont(java.lang.String,%20java.lang.String,%20boolean,%20boolean,%20byte%5B%5D,%20byte%5B%5D)\" rel=\"nofollow noreferrer\">link</a></p>\n"}],"owner":{"account_id":6095060,"reputation":1259,"user_id":4756141,"accept_rate":94,"display_name":"99maas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4729,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":32613566,"answer_count":2,"score":6,"last_activity_date":1661523557,"creation_date":1438189993,"question_id":31706979,"body_markdown":"I have a font file &quot;arial.ttf&quot; in a web application and I can only obtain its contents as `InputStream`.\r\n\r\n    InputStream inputFont = getResourceAsStream(&quot;/resources/arial.ttf&quot;);\r\n\r\nHow can I create an [iText `BaseFont`][1] based on the `InputStream`? The `createFont` method doesn&#39;t accept it.\r\n\r\n    BaseFont bf = BaseFont.createFont(inputFont, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);\r\n\r\n&gt;createFont(InputStream,String,boolean) can&#39;t invoke createFont(java.lang.String,java.lang.String,boolean) \r\n in BaseFont.\r\n\r\n\r\n  [1]: http://api.itextpdf.com/itext/com/itextpdf/text/pdf/BaseFont.html","title":"How to create iText BaseFont based on InputStream","body":"<p>I have a font file \"arial.ttf\" in a web application and I can only obtain its contents as <code>InputStream</code>.</p>\n\n<pre><code>InputStream inputFont = getResourceAsStream(\"/resources/arial.ttf\");\n</code></pre>\n\n<p>How can I create an <a href=\"http://api.itextpdf.com/itext/com/itextpdf/text/pdf/BaseFont.html\" rel=\"noreferrer\">iText <code>BaseFont</code></a> based on the <code>InputStream</code>? The <code>createFont</code> method doesn't accept it.</p>\n\n<pre><code>BaseFont bf = BaseFont.createFont(inputFont, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);\n</code></pre>\n\n<blockquote>\n  <p>createFont(InputStream,String,boolean) can't invoke createFont(java.lang.String,java.lang.String,boolean) \n   in BaseFont.</p>\n</blockquote>\n"},{"tags":["java","tomcat","jakarta-ee"],"answers":[{"tags":[],"owner":{"account_id":15083,"reputation":22025,"user_id":31506,"display_name":"Jack Leow"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1661523069,"creation_date":1263839336,"answer_id":2088258,"question_id":2088218,"body_markdown":"1. Getting the &quot;name&quot;\r\n=====\r\nIt&#39;s called the context path. If your code is running within the web app request context, you can get it by calling [`HttpServletRequest#getContextPath()`][1].\r\n\r\n2. Accessing the physical/real resource\r\n=====\r\nIf you&#39;re trying to access the contents of a file/resource in your webapp, you&#39;re best of using one of:\r\n\r\n- [`ServletContext#getResource(String)`][2]\r\n- [`ServletContext#getResourceAsStream(String)`][3]\r\n\r\nIt is also possible get the physical path on disk of a file/resource, given the path relative to the web app, using [`ServletContext#getRealPath(String)`][4], but it&#39;s not reliable (doesn&#39;t always work if you deploy you webapp as a WAR, for instance).\r\n\r\n3. Accessing class path resources\r\n=====\r\nPer your comment, you were trying to access a resource within the &lt;web-app&gt;/WEB-INF/classes directory. Because WEB-INF/classes/* is where web application specific classes go, you can simply access it as if you were accessing any classpath resource in a Java SE application. Again, assuming your code runs within the context of the webapp, you can simply use the following:\r\n\r\n- [Class#getResource(String)][5]\r\n- [Class#getResourceAsStream(String)][6]\r\n\r\nIn your case, you&#39;d probably want to use the latter, and then load the Properties file via Properties#load(InputStream).\r\n\r\nSomething along the lines of:\r\n\r\n    Properties props = new Properties();\r\n    props.load(getClass().getResourceAsStream(&quot;/reportCustom.properties&quot;));\r\n\r\n  [1]: http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/http/HttpServletRequest.html#getContextPath()\r\n  [2]: http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletContext.html#getResource(java.lang.String)\r\n  [3]: http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletContext.html#getResourceAsStream(java.lang.String)\r\n  [4]: http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletContext.html#getRealPath(java.lang.String)\r\n  [5]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getResource(java.lang.String)\r\n  [6]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String)","title":"How can I get the name of the current web app in Java EE?","body":"<ol>\n<li><p>Getting the &quot;name&quot;\n=====\nIt's called the context path. If your code is running within the web app request context, you can get it by calling <a href=\"http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/http/HttpServletRequest.html#getContextPath()\" rel=\"nofollow noreferrer\"><code>HttpServletRequest#getContextPath()</code></a>.</p>\n</li>\n<li><p>Accessing the physical/real resource\n=====\nIf you're trying to access the contents of a file/resource in your webapp, you're best of using one of:</p>\n</li>\n</ol>\n<ul>\n<li><a href=\"http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletContext.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\"><code>ServletContext#getResource(String)</code></a></li>\n<li><a href=\"http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletContext.html#getResourceAsStream(java.lang.String)\" rel=\"nofollow noreferrer\"><code>ServletContext#getResourceAsStream(String)</code></a></li>\n</ul>\n<p>It is also possible get the physical path on disk of a file/resource, given the path relative to the web app, using <a href=\"http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletContext.html#getRealPath(java.lang.String)\" rel=\"nofollow noreferrer\"><code>ServletContext#getRealPath(String)</code></a>, but it's not reliable (doesn't always work if you deploy you webapp as a WAR, for instance).</p>\n<ol start=\"3\">\n<li>Accessing class path resources\n=====\nPer your comment, you were trying to access a resource within the /WEB-INF/classes directory. Because WEB-INF/classes/* is where web application specific classes go, you can simply access it as if you were accessing any classpath resource in a Java SE application. Again, assuming your code runs within the context of the webapp, you can simply use the following:</li>\n</ol>\n<ul>\n<li><a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\">Class#getResource(String)</a></li>\n<li><a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String)\" rel=\"nofollow noreferrer\">Class#getResourceAsStream(String)</a></li>\n</ul>\n<p>In your case, you'd probably want to use the latter, and then load the Properties file via Properties#load(InputStream).</p>\n<p>Something along the lines of:</p>\n<pre><code>Properties props = new Properties();\nprops.load(getClass().getResourceAsStream(&quot;/reportCustom.properties&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":246,"reputation":107903,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1263840479,"creation_date":1263840479,"answer_id":2088410,"question_id":2088218,"body_markdown":"&gt; what i&#39;m trying to do is load a properties file in webapps/myapp/WEB-INF/classes/reportCustom.properties\r\n\r\nSince the file is in the `classes` directory, you can load it using the [ClassLoader][1] (the usual Java mechanism for loading files on the classpath). It is probably best to use the [context ClassLoader][2].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#getContextClassLoader()","title":"How can I get the name of the current web app in Java EE?","body":"<blockquote>\n  <p>what i'm trying to do is load a properties file in webapps/myapp/WEB-INF/classes/reportCustom.properties</p>\n</blockquote>\n\n<p>Since the file is in the <code>classes</code> directory, you can load it using the <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)\" rel=\"nofollow noreferrer\">ClassLoader</a> (the usual Java mechanism for loading files on the classpath). It is probably best to use the <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#getContextClassLoader()\" rel=\"nofollow noreferrer\">context ClassLoader</a>.</p>\n"}],"owner":{"account_id":86707,"reputation":1676,"user_id":240931,"accept_rate":100,"display_name":"Jenni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13103,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":2088258,"answer_count":2,"score":8,"last_activity_date":1661523069,"creation_date":1263838975,"question_id":2088218,"body_markdown":"How can I get the name of the current web app in Java EE?\r\n\r\nI&#39;m quite comfortable with stand-alone Java, but Java EE is new to me. I&#39;m writing some custom code to plug in to a third-party Java EE reporting package. I have multiple instances deployed on the same Tomcat server, so I have something like:\r\n\r\n&lt;pre&gt;\r\nC:\\\r\n+-- tomcat6\r\n    +-- webapps\r\n        +-- app1\r\n        +-- app2\r\n&lt;/pre&gt;\r\n\r\nSo when the user goes to, let&#39;s say, http://example.com/app1/viewReport, I want to be able to get &quot;app1&quot;. (And not by parsing the URL, preferrably.)\r\n\r\nAlso, if there was a way to get the root of app1 (in this example, C:\\tomcat6\\webapps\\app1), that would be great too.","title":"How can I get the name of the current web app in Java EE?","body":"<p>How can I get the name of the current web app in Java EE?</p>\n\n<p>I'm quite comfortable with stand-alone Java, but Java EE is new to me. I'm writing some custom code to plug in to a third-party Java EE reporting package. I have multiple instances deployed on the same Tomcat server, so I have something like:</p>\n\n<pre>\nC:\\\n+-- tomcat6\n    +-- webapps\n        +-- app1\n        +-- app2\n</pre>\n\n<p>So when the user goes to, let's say, <a href=\"http://example.com/app1/viewReport\" rel=\"noreferrer\">http://example.com/app1/viewReport</a>, I want to be able to get \"app1\". (And not by parsing the URL, preferrably.)</p>\n\n<p>Also, if there was a way to get the root of app1 (in this example, C:\\tomcat6\\webapps\\app1), that would be great too.</p>\n"},{"tags":["java","dependency-injection","jersey","hk2"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":1,"creation_date":1661531518,"post_id":73502186,"comment_id":129802369,"body_markdown":"It should be `@Inject IEnvironmentRepository`. The `to(...)` is what you advertise as the type to be injected.","body":"It should be <code>@Inject IEnvironmentRepository</code>. The <code>to(...)</code> is what you advertise as the type to be injected."},{"owner":{"account_id":13762948,"reputation":25,"user_id":9932224,"display_name":"Germ&#225;n C. Basisty"},"score":0,"creation_date":1661534947,"post_id":73502186,"comment_id":129803461,"body_markdown":"Thank you very much @PaulSamsotha ! It seems Im too tired now to be working. Didn&#39;t notice the &quot;I&quot; was missing. Best regards","body":"Thank you very much @PaulSamsotha ! It seems Im too tired now to be working. Didn&#39;t notice the &quot;I&quot; was missing. Best regards"}],"owner":{"account_id":13762948,"reputation":25,"user_id":9932224,"display_name":"Germ&#225;n C. Basisty"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661523023,"creation_date":1661522326,"question_id":73502186,"body_markdown":"Im having some problems with dependency injections in java 11 / jersey / hk2.\r\nI have a simple resource class which injects a service class:\r\n```\r\n@Path(&quot;/backbone&quot;)\r\npublic class BackboneController extends GenericController {\r\n    @Inject\r\n    private IEnvironmentService _environmentService;\r\n    @Inject\r\n    private IAuthenticationHelper _authenticationHelper;\r\n    @Inject\r\n    private IBackboneService _backboneService;\r\n\r\n    @GET\r\n    @Path(&quot;version&quot;)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public Response version(\r\n            @HeaderParam(&quot;Authorization&quot;) String token) throws Exception {\r\n        var credentials = _authenticationHelper.detokenizeCredentials(token);\r\n\r\n        var backendVersionHandler = new BackendVersionResponseDto(_backboneService.getBackendVersion(credentials));\r\n\r\n        var apiVersionHandler = new Properties();\r\n        apiVersionHandler.load(BackboneController.class.getResourceAsStream(&quot;/project.properties&quot;));\r\n\r\n        return Response.status(Status.OK)\r\n                .entity(new GenericResponse(\r\n                        new VersionResponseDto(backendVersionHandler.getBackend(),\r\n                                apiVersionHandler.getProperty(&quot;version&quot;))))\r\n                .build();\r\n    }\r\n\r\n    @GET\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Path(&quot;url&quot;)\r\n    public Response getUrl(\r\n            @HeaderParam(&quot;Authorization&quot;) String token) throws Exception {\r\n        var credentials = _authenticationHelper.detokenizeCredentials(token);\r\n\r\n        var urlDto = new UrlResponseDto(_backboneService.getUrl(credentials));\r\n\r\n        return Response.status(Status.OK).entity(new GenericResponse(urlDto)).build();\r\n    }\r\n\r\n    @GET\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Path(&quot;context-path-to-etc&quot;)\r\n    public Response getContextPathToEtc(\r\n            @HeaderParam(&quot;Authorization&quot;) String token) throws Exception {\r\n        var credentials = _authenticationHelper.detokenizeCredentials(token);\r\n\r\n        if (!_backboneService.areCredentialsValid(credentials))\r\n            throw new WebApplicationException(Response.status(Status.UNAUTHORIZED).build());\r\n\r\n        var contextPathToEtcDto = new ContextPathToEtcResponseDto(_environmentService.getEtcPathInContext());\r\n\r\n        return Response.status(Status.OK).entity(new GenericResponse(contextPathToEtcDto)).build();\r\n    }\r\n}\r\n```\r\n\r\nThe problem is related with the **IEnvironmentService**, which injects **IEnvironmentRepository**. Here are the interface and the class itself:\r\n```\r\n@Contract\r\npublic interface IEnvironmentService {\r\n    public void environmentSet(Credentials credentials, String key, String value) throws Exception;\r\n    public void environmentUnset(Credentials credentials, String key) throws Exception;\r\n    public String environmentGet(Credentials credentials, String key) throws Exception;\r\n    public String getEtcPathInContext();\r\n}\r\n\r\n@Service\r\npublic class EnvironmentService implements IEnvironmentService {\r\n    @Inject\r\n    private EnvironmentRepository _environmentRepository;\r\n\r\n    @Override\r\n    public void environmentSet(Credentials credentials, String key, String value) throws Exception {\r\n        _environmentRepository.environmentSet(credentials, key, value);\r\n    }\r\n\r\n    @Override\r\n    public void environmentUnset(Credentials credentials, String key) throws Exception {\r\n        _environmentRepository.environmentUnset(credentials, key);  \r\n    }\r\n\r\n    @Override\r\n    public String environmentGet(Credentials credentials, String key) throws Exception {\r\n        return _environmentRepository.environmentGet(credentials, key);\r\n    }\r\n\r\n    @Override\r\n    public String getEtcPathInContext() {\r\n        return _environmentRepository.getEtcPathInContext();\r\n    }\r\n}\r\n```\r\n\r\n**IEnvironmentRepository** and **EnvironmentRepository** here:\r\n```\r\n@Contract\r\npublic interface IEnvironmentRepository {\r\n    public void environmentSet(Credentials credentials, String key, String value) throws Exception;\r\n    public void environmentUnset(Credentials credentials, String key) throws Exception;\r\n    public String environmentGet(Credentials credentials, String key) throws Exception;\r\n    public String getEtcPathInContext();\r\n}\r\n\r\n\r\n@Service\r\npublic class EnvironmentRepository extends GenericRepository implements IEnvironmentRepository {  \r\n\t@Inject\r\n    private IContextFinder _contextFinder;\r\n      \r\n    @Override\r\n    public void environmentSet(Credentials credentials, String key, String value) throws Exception {\r\n        _connector.execute(credentials.getUsername(), credentials.getPassword(),\r\n                String.format(&quot;SELECT backbone.environment_set(%s, %s)&#39;&quot;, new SqlParameter(&quot;p_key&quot;, key),\r\n                        new SqlParameter(&quot;p_value&quot;, value)));\r\n    }\r\n\r\n    @Override\r\n    public void environmentUnset(Credentials credentials, String key) throws Exception {\r\n        _connector.execute(credentials.getUsername(), credentials.getPassword(),\r\n                String.format(&quot;SELECT backbone.environment_unset(%s)&quot;, new SqlParameter(&quot;p_key&quot;, key)));\r\n    }\r\n\r\n    @Override\r\n    public String environmentGet(Credentials credentials, String key) throws Exception {\r\n        return _connector.queryText(credentials.getUsername(), credentials.getPassword(),\r\n                String.format(&quot;SELECT backbone.environment_get(%s)&quot;, new SqlParameter(&quot;p_key&quot;, key)));\r\n    }\r\n\r\n    @Override\r\n    public String getEtcPathInContext() {\r\n        return _contextFinder.getEtcPathInContext();\r\n    }\r\n}\r\n```\r\n\r\nAnd at last, the abstract binder and the resource config:\r\n```\r\npublic class BackboneBinder extends AbstractBinder {\r\n    @Override\r\n    protected void configure() { \r\n        bind(BackboneRepository.class).to(IBackboneRepository.class);\r\n        bind(BackboneService.class).to(IBackboneService.class);\r\n        bind(EnvironmentRepository.class).to(IEnvironmentRepository.class).in(PerLookup.class);     \r\n        bind(EnvironmentService.class).to(IEnvironmentService.class); \r\n        bind(ContextFinder.class).to(IContextFinder.class);\r\n        bind(ParametersHandler.class).to(IParametersHandler.class); \r\n        bind(AuthenticationHelper.class).to(IAuthenticationHelper.class);\r\n    }\r\n}\r\n\r\npublic class ApplicationConfiguration extends ResourceConfig {\r\n    public ApplicationConfiguration() {\r\n        // Dependencies binders \r\n        register(new BackboneBinder());\r\n\r\n        packages(&quot;com.bfaconsultora&quot;);\r\n    }\r\n}\r\n```\r\n\r\nNow, when I consume the resource via postman, I get the following error:\r\n```\r\njavax.servlet.ServletException: A MultiException has 5 exceptions.  They are:\r\n1. org.glassfish.hk2.api.UnsatisfiedDependencyException: There was no object available for injection at SystemInjecteeImpl(requiredType=EnvironmentRepository,parent=EnvironmentService,qualifiers={},position=-1,optional=false,self=false,unqualified=null,804331421)\r\n2. java.lang.IllegalArgumentException: While attempting to resolve the dependencies of com.bfaconsultora.rest.backbone.services.EnvironmentService errors were found\r\n3. java.lang.IllegalStateException: Unable to perform operation: resolve on com.bfaconsultora.rest.backbone.services.EnvironmentService\r\n4. java.lang.IllegalArgumentException: While attempting to resolve the dependencies of com.bfaconsultora.rest.backbone.controllers.BackboneController errors were found\r\n5. java.lang.IllegalStateException: Unable to perform operation: resolve on com.bfaconsultora.rest.backbone.controllers.BackboneController\r\n\r\n\torg.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:408)\r\n\torg.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:346)\r\n\torg.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:365)\r\n\torg.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:318)\r\n\torg.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:205)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n```\r\n\r\nI&#39;m really lost with this. If I remove the injection of the IEnvironmentRepository in the EnvronmentService class, and replace it with a regular new EnvironmentRepository() everything works OK. The strange thing is that with Backbone Service and Repository, which are very similar to Environment stuff, injection works just fine. \r\n\r\nCould you please point me in the right direction? \r\n\r\nThank you in advance.\r\n\r\nRegards","title":"Problems with dependency injection in java / jersey / h2k","body":"<p>Im having some problems with dependency injections in java 11 / jersey / hk2.\nI have a simple resource class which injects a service class:</p>\n<pre><code>@Path(&quot;/backbone&quot;)\npublic class BackboneController extends GenericController {\n    @Inject\n    private IEnvironmentService _environmentService;\n    @Inject\n    private IAuthenticationHelper _authenticationHelper;\n    @Inject\n    private IBackboneService _backboneService;\n\n    @GET\n    @Path(&quot;version&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response version(\n            @HeaderParam(&quot;Authorization&quot;) String token) throws Exception {\n        var credentials = _authenticationHelper.detokenizeCredentials(token);\n\n        var backendVersionHandler = new BackendVersionResponseDto(_backboneService.getBackendVersion(credentials));\n\n        var apiVersionHandler = new Properties();\n        apiVersionHandler.load(BackboneController.class.getResourceAsStream(&quot;/project.properties&quot;));\n\n        return Response.status(Status.OK)\n                .entity(new GenericResponse(\n                        new VersionResponseDto(backendVersionHandler.getBackend(),\n                                apiVersionHandler.getProperty(&quot;version&quot;))))\n                .build();\n    }\n\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    @Path(&quot;url&quot;)\n    public Response getUrl(\n            @HeaderParam(&quot;Authorization&quot;) String token) throws Exception {\n        var credentials = _authenticationHelper.detokenizeCredentials(token);\n\n        var urlDto = new UrlResponseDto(_backboneService.getUrl(credentials));\n\n        return Response.status(Status.OK).entity(new GenericResponse(urlDto)).build();\n    }\n\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    @Path(&quot;context-path-to-etc&quot;)\n    public Response getContextPathToEtc(\n            @HeaderParam(&quot;Authorization&quot;) String token) throws Exception {\n        var credentials = _authenticationHelper.detokenizeCredentials(token);\n\n        if (!_backboneService.areCredentialsValid(credentials))\n            throw new WebApplicationException(Response.status(Status.UNAUTHORIZED).build());\n\n        var contextPathToEtcDto = new ContextPathToEtcResponseDto(_environmentService.getEtcPathInContext());\n\n        return Response.status(Status.OK).entity(new GenericResponse(contextPathToEtcDto)).build();\n    }\n}\n</code></pre>\n<p>The problem is related with the <strong>IEnvironmentService</strong>, which injects <strong>IEnvironmentRepository</strong>. Here are the interface and the class itself:</p>\n<pre><code>@Contract\npublic interface IEnvironmentService {\n    public void environmentSet(Credentials credentials, String key, String value) throws Exception;\n    public void environmentUnset(Credentials credentials, String key) throws Exception;\n    public String environmentGet(Credentials credentials, String key) throws Exception;\n    public String getEtcPathInContext();\n}\n\n@Service\npublic class EnvironmentService implements IEnvironmentService {\n    @Inject\n    private EnvironmentRepository _environmentRepository;\n\n    @Override\n    public void environmentSet(Credentials credentials, String key, String value) throws Exception {\n        _environmentRepository.environmentSet(credentials, key, value);\n    }\n\n    @Override\n    public void environmentUnset(Credentials credentials, String key) throws Exception {\n        _environmentRepository.environmentUnset(credentials, key);  \n    }\n\n    @Override\n    public String environmentGet(Credentials credentials, String key) throws Exception {\n        return _environmentRepository.environmentGet(credentials, key);\n    }\n\n    @Override\n    public String getEtcPathInContext() {\n        return _environmentRepository.getEtcPathInContext();\n    }\n}\n</code></pre>\n<p><strong>IEnvironmentRepository</strong> and <strong>EnvironmentRepository</strong> here:</p>\n<pre><code>@Contract\npublic interface IEnvironmentRepository {\n    public void environmentSet(Credentials credentials, String key, String value) throws Exception;\n    public void environmentUnset(Credentials credentials, String key) throws Exception;\n    public String environmentGet(Credentials credentials, String key) throws Exception;\n    public String getEtcPathInContext();\n}\n\n\n@Service\npublic class EnvironmentRepository extends GenericRepository implements IEnvironmentRepository {  \n    @Inject\n    private IContextFinder _contextFinder;\n      \n    @Override\n    public void environmentSet(Credentials credentials, String key, String value) throws Exception {\n        _connector.execute(credentials.getUsername(), credentials.getPassword(),\n                String.format(&quot;SELECT backbone.environment_set(%s, %s)'&quot;, new SqlParameter(&quot;p_key&quot;, key),\n                        new SqlParameter(&quot;p_value&quot;, value)));\n    }\n\n    @Override\n    public void environmentUnset(Credentials credentials, String key) throws Exception {\n        _connector.execute(credentials.getUsername(), credentials.getPassword(),\n                String.format(&quot;SELECT backbone.environment_unset(%s)&quot;, new SqlParameter(&quot;p_key&quot;, key)));\n    }\n\n    @Override\n    public String environmentGet(Credentials credentials, String key) throws Exception {\n        return _connector.queryText(credentials.getUsername(), credentials.getPassword(),\n                String.format(&quot;SELECT backbone.environment_get(%s)&quot;, new SqlParameter(&quot;p_key&quot;, key)));\n    }\n\n    @Override\n    public String getEtcPathInContext() {\n        return _contextFinder.getEtcPathInContext();\n    }\n}\n</code></pre>\n<p>And at last, the abstract binder and the resource config:</p>\n<pre><code>public class BackboneBinder extends AbstractBinder {\n    @Override\n    protected void configure() { \n        bind(BackboneRepository.class).to(IBackboneRepository.class);\n        bind(BackboneService.class).to(IBackboneService.class);\n        bind(EnvironmentRepository.class).to(IEnvironmentRepository.class).in(PerLookup.class);     \n        bind(EnvironmentService.class).to(IEnvironmentService.class); \n        bind(ContextFinder.class).to(IContextFinder.class);\n        bind(ParametersHandler.class).to(IParametersHandler.class); \n        bind(AuthenticationHelper.class).to(IAuthenticationHelper.class);\n    }\n}\n\npublic class ApplicationConfiguration extends ResourceConfig {\n    public ApplicationConfiguration() {\n        // Dependencies binders \n        register(new BackboneBinder());\n\n        packages(&quot;com.bfaconsultora&quot;);\n    }\n}\n</code></pre>\n<p>Now, when I consume the resource via postman, I get the following error:</p>\n<pre><code>javax.servlet.ServletException: A MultiException has 5 exceptions.  They are:\n1. org.glassfish.hk2.api.UnsatisfiedDependencyException: There was no object available for injection at SystemInjecteeImpl(requiredType=EnvironmentRepository,parent=EnvironmentService,qualifiers={},position=-1,optional=false,self=false,unqualified=null,804331421)\n2. java.lang.IllegalArgumentException: While attempting to resolve the dependencies of com.bfaconsultora.rest.backbone.services.EnvironmentService errors were found\n3. java.lang.IllegalStateException: Unable to perform operation: resolve on com.bfaconsultora.rest.backbone.services.EnvironmentService\n4. java.lang.IllegalArgumentException: While attempting to resolve the dependencies of com.bfaconsultora.rest.backbone.controllers.BackboneController errors were found\n5. java.lang.IllegalStateException: Unable to perform operation: resolve on com.bfaconsultora.rest.backbone.controllers.BackboneController\n\n    org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:408)\n    org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:346)\n    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:365)\n    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:318)\n    org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:205)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n</code></pre>\n<p>I'm really lost with this. If I remove the injection of the IEnvironmentRepository in the EnvronmentService class, and replace it with a regular new EnvironmentRepository() everything works OK. The strange thing is that with Backbone Service and Repository, which are very similar to Environment stuff, injection works just fine.</p>\n<p>Could you please point me in the right direction?</p>\n<p>Thank you in advance.</p>\n<p>Regards</p>\n"},{"tags":["java","solr"],"owner":{"account_id":1488072,"reputation":159,"user_id":1411154,"accept_rate":57,"display_name":"carminePat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661522855,"creation_date":1661522855,"question_id":73502299,"body_markdown":"Is possible to create a custom plugin/handler that trigger before and after schema is initialized and before core/collection is created?","title":"Solr 8 custom trigger before/after schema is initialized","body":"<p>Is possible to create a custom plugin/handler that trigger before and after schema is initialized and before core/collection is created?</p>\n"},{"tags":["java","string","split"],"comments":[{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1377599226,"post_id":18462826,"comment_id":27134143,"body_markdown":"You don&#39;t need to escape `=`.","body":"You don&#39;t need to escape <code>=</code>."}],"answers":[{"tags":[],"owner":{"account_id":434817,"reputation":28250,"user_id":821057,"accept_rate":73,"display_name":"Zaheer Ahmed"},"down_vote_count":0,"up_vote_count":373,"is_accepted":true,"score":373,"last_activity_date":1661522414,"creation_date":1377599139,"answer_id":18462905,"question_id":18462826,"body_markdown":"    string.split(&quot;=&quot;, limit=2);\r\n\r\nAs [`String.split(java.lang.String regex, int limit)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29) explains:\r\n\r\n&gt;The array returned by this method contains each substring of this string that is terminated by another substring that matches the given expression or is terminated by the end of the string. The substrings in the array are in the order in which they occur in this string. If the expression does not match any part of the input then the resulting array has just one element, namely this string. \r\n\r\n&gt; The `limit` parameter controls the number of times the pattern is applied and therefore affects the length of the resulting array.  If the limit &lt;i&gt;n&lt;/i&gt; is greater than zero then the pattern will be applied at most &lt;i&gt;n&lt;/i&gt; - 1 times, the array&#39;s length will be no greater than &lt;i&gt;n&lt;/i&gt;, and the array&#39;s last entry will contain all input beyond the last matched delimiter.\r\n\r\n&gt; The string `boo:and:foo`, for example, yields the following results with these parameters:\r\n\r\n&gt;     Regex Limit    Result\r\n    :     2        { &quot;boo&quot;, &quot;and:foo&quot; }\r\n    :     5        { &quot;boo&quot;, &quot;and&quot;, &quot;foo&quot; }\r\n    :    -2        { &quot;boo&quot;, &quot;and&quot;, &quot;foo&quot; }\r\n    o     5        { &quot;b&quot;, &quot;&quot;, &quot;:and:f&quot;, &quot;&quot;, &quot;&quot; }\r\n    o    -2        { &quot;b&quot;, &quot;&quot;, &quot;:and:f&quot;, &quot;&quot;, &quot;&quot; }\r\n    o     0        { &quot;b&quot;, &quot;&quot;, &quot;:and:f&quot; }","title":"split string only on first instance - java","body":"<pre><code>string.split(&quot;=&quot;, limit=2);\n</code></pre>\n<p>As <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29\" rel=\"noreferrer\"><code>String.split(java.lang.String regex, int limit)</code></a> explains:</p>\n<blockquote>\n<p>The array returned by this method contains each substring of this string that is terminated by another substring that matches the given expression or is terminated by the end of the string. The substrings in the array are in the order in which they occur in this string. If the expression does not match any part of the input then the resulting array has just one element, namely this string.</p>\n</blockquote>\n<blockquote>\n<p>The <code>limit</code> parameter controls the number of times the pattern is applied and therefore affects the length of the resulting array.  If the limit <i>n</i> is greater than zero then the pattern will be applied at most <i>n</i> - 1 times, the array's length will be no greater than <i>n</i>, and the array's last entry will contain all input beyond the last matched delimiter.</p>\n</blockquote>\n<blockquote>\n<p>The string <code>boo:and:foo</code>, for example, yields the following results with these parameters:</p>\n</blockquote>\n<blockquote>\n<pre><code>Regex Limit    Result\n</code></pre>\n</blockquote>\n<pre><code>:     2        { &quot;boo&quot;, &quot;and:foo&quot; }\n:     5        { &quot;boo&quot;, &quot;and&quot;, &quot;foo&quot; }\n:    -2        { &quot;boo&quot;, &quot;and&quot;, &quot;foo&quot; }\no     5        { &quot;b&quot;, &quot;&quot;, &quot;:and:f&quot;, &quot;&quot;, &quot;&quot; }\no    -2        { &quot;b&quot;, &quot;&quot;, &quot;:and:f&quot;, &quot;&quot;, &quot;&quot; }\no     0        { &quot;b&quot;, &quot;&quot;, &quot;:and:f&quot; }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1769022,"reputation":5728,"user_id":1614244,"accept_rate":44,"display_name":"codeMan"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1377602946,"creation_date":1377599141,"answer_id":18462906,"question_id":18462826,"body_markdown":"Yes you can, just pass the integer param to the split method\r\n\r\n\r\n    String stSplit = &quot;apple=fruit table price=5&quot;\r\n\r\n    stSplit.split(&quot;=&quot;, 2);\r\n\r\nHere is a java doc reference : [String#split(java.lang.String, int)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)\r\n","title":"split string only on first instance - java","body":"<p>Yes you can, just pass the integer param to the split method</p>\n\n<pre><code>String stSplit = \"apple=fruit table price=5\"\n\nstSplit.split(\"=\", 2);\n</code></pre>\n\n<p>Here is a java doc reference : <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29\" rel=\"noreferrer\">String#split(java.lang.String, int)</a></p>\n"},{"tags":[],"owner":{"account_id":2921854,"reputation":1946,"user_id":2503916,"accept_rate":50,"display_name":"Siva"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1377599483,"creation_date":1377599174,"answer_id":18462921,"question_id":18462826,"body_markdown":"As many other answers suggest the limit approach, This can be another way\r\n\r\nYou can use the [indexOf][1] method on String which will returns the first Occurance of the given character, Using that index you can get the desired output\r\n\r\n            \r\n\r\n    String target = &quot;apple=fruit table price=5&quot; ;\r\n    int x= target.indexOf(&quot;=&quot;);\r\n    System.out.println(target.substring(x+1));\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28int%29\r\n","title":"split string only on first instance - java","body":"<p>As many other answers suggest the limit approach, This can be another way</p>\n\n<p>You can use the <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28int%29\" rel=\"noreferrer\">indexOf</a> method on String which will returns the first Occurance of the given character, Using that index you can get the desired output</p>\n\n<pre><code>String target = \"apple=fruit table price=5\" ;\nint x= target.indexOf(\"=\");\nSystem.out.println(target.substring(x+1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3146597,"reputation":77,"user_id":2660968,"accept_rate":75,"display_name":"Martin Košť&#225;l"},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1377599322,"creation_date":1377599322,"answer_id":18462963,"question_id":18462826,"body_markdown":"    String[] func(String apple){\r\n    String[] tmp = new String[2];\r\n    for(int i=0;i&lt;apple.length;i++){\r\n       if(apple.charAt(i)==&#39;=&#39;){\r\n          tmp[0]=apple.substring(0,i);\r\n          tmp[1]=apple.substring(i+1,apple.length);\r\n          break;\r\n       }\r\n    }\r\n    return tmp;\r\n    }\r\n    //returns string_ARRAY_!\r\n\r\ni like writing own methods :)","title":"split string only on first instance - java","body":"<pre><code>String[] func(String apple){\nString[] tmp = new String[2];\nfor(int i=0;i&lt;apple.length;i++){\n   if(apple.charAt(i)=='='){\n      tmp[0]=apple.substring(0,i);\n      tmp[1]=apple.substring(i+1,apple.length);\n      break;\n   }\n}\nreturn tmp;\n}\n//returns string_ARRAY_!\n</code></pre>\n\n<p>i like writing own methods :)</p>\n"},{"tags":[],"owner":{"account_id":4910367,"reputation":2146,"user_id":3955831,"display_name":"Kailash Karki"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1580315533,"creation_date":1447837356,"answer_id":33775651,"question_id":18462826,"body_markdown":"    String string = &quot;This is test string on web&quot;;\r\n    String splitData[] = string.split(&quot;\\\\s&quot;, 2);\r\n\r\n    Result ::\r\n    splitData[0] =&gt;  This\r\n    splitData[1] =&gt;  is test string  \r\n\r\n\r\n    String string = &quot;This is test string on web&quot;;\r\n    String splitData[] = string.split(&quot;\\\\s&quot;, 3);\r\n\r\n    Result ::\r\n    splitData[0] =&gt;  This\r\n    splitData[1] =&gt;  is\r\n    splitData[1] =&gt;  test string on web\r\n\r\nBy default split method create n number&#39;s of arrays on the basis of given regex. But if you want to restrict number of arrays to create after a split than pass second argument as an integer argument.","title":"split string only on first instance - java","body":"<pre><code>String string = \"This is test string on web\";\nString splitData[] = string.split(\"\\\\s\", 2);\n\nResult ::\nsplitData[0] =&gt;  This\nsplitData[1] =&gt;  is test string  \n\n\nString string = \"This is test string on web\";\nString splitData[] = string.split(\"\\\\s\", 3);\n\nResult ::\nsplitData[0] =&gt;  This\nsplitData[1] =&gt;  is\nsplitData[1] =&gt;  test string on web\n</code></pre>\n\n<p>By default split method create n number's of arrays on the basis of given regex. But if you want to restrict number of arrays to create after a split than pass second argument as an integer argument.</p>\n"},{"tags":[],"owner":{"account_id":5946193,"reputation":392,"user_id":6870739,"display_name":"Bhola"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603930157,"creation_date":1497950859,"answer_id":44649073,"question_id":18462826,"body_markdown":"This works:\r\n\r\n    public class Split\r\n    {\r\n    \tpublic static void main(String...args)\r\n    \t{\r\n    \t\tString a = &quot;%abcdef&amp;Ghijk%xyz&quot;;\r\n    \t\tString b[] = a.split(&quot;%&quot;, 2);\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Value = &quot;+b[1]);\r\n    \t}\r\n    }","title":"split string only on first instance - java","body":"<p>This works:</p>\n<pre><code>public class Split\n{\n    public static void main(String...args)\n    {\n        String a = &quot;%abcdef&amp;Ghijk%xyz&quot;;\n        String b[] = a.split(&quot;%&quot;, 2);\n        \n        System.out.println(&quot;Value = &quot;+b[1]);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2681875,"reputation":4413,"user_id":2317087,"accept_rate":63,"display_name":"dracula"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179233,"favorite_count":0,"down_vote_count":0,"up_vote_count":203,"accepted_answer_id":18462905,"answer_count":6,"score":203,"last_activity_date":1661522414,"creation_date":1377598898,"question_id":18462826,"body_markdown":"I want to split a string by &#39;=&#39; charecter. But I want it to split on first instance only. How can I do that ? Here is a JavaScript example for &#39;_&#39; char but it doesn&#39;t work for me\r\nhttps://stackoverflow.com/questions/4607745/split-string-only-on-first-instance-of-specified-character\r\n\r\nExample :\r\n\r\n    apple=fruit table price=5\r\n\r\nWhen I try String.split(&#39;=&#39;); it gives \r\n\r\n    [apple],[fruit table price],[5]\r\n\r\nBut I need\r\n\r\n    [apple],[fruit table price=5]\r\n\r\nThanks","title":"split string only on first instance - java","body":"<p>I want to split a string by '=' charecter. But I want it to split on first instance only. How can I do that ? Here is a JavaScript example for '_' char but it doesn't work for me\n<a href=\"https://stackoverflow.com/questions/4607745/split-string-only-on-first-instance-of-specified-character\">split string only on first instance of specified character</a></p>\n\n<p>Example :</p>\n\n<pre><code>apple=fruit table price=5\n</code></pre>\n\n<p>When I try String.split('='); it gives </p>\n\n<pre><code>[apple],[fruit table price],[5]\n</code></pre>\n\n<p>But I need</p>\n\n<pre><code>[apple],[fruit table price=5]\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["java","security","ldap","redhat"],"answers":[{"tags":[],"owner":{"account_id":42005,"reputation":2840,"user_id":122230,"accept_rate":80,"display_name":"wytten"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1653574215,"creation_date":1653410734,"answer_id":72366593,"question_id":72366553,"body_markdown":"A quick Internet search result: &quot;The use of underscore characters is a little confusing. Underscore characters are not permitted in domain names in accordance with RFC 1035, which only allows letters, digits and hyphens.&quot; [1]\r\n\r\n\r\n  [1]: https://www.entrust.com/blog/2019/01/removal-of-underscores-from-domain-names/","title":"OpenJDK remedy for CVE-2022-21496 yields &quot;unsupported authority&quot; exception thrown","body":"<p>A quick Internet search result: &quot;The use of underscore characters is a little confusing. Underscore characters are not permitted in domain names in accordance with RFC 1035, which only allows letters, digits and hyphens.&quot; <a href=\"https://www.entrust.com/blog/2019/01/removal-of-underscores-from-domain-names/\" rel=\"nofollow noreferrer\">1</a></p>\n"},{"tags":[],"owner":{"account_id":7058373,"reputation":357,"user_id":5404717,"accept_rate":77,"display_name":"kanagaraj palanisamy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661522001,"creation_date":1661522001,"answer_id":73502116,"question_id":72366553,"body_markdown":"You need to add the environment variable -Dcom.sun.jndi.ldapURLParsing=&quot;legacy&quot; as shown here https://bugs.openjdk.org/browse/JDK-8288207 ","title":"OpenJDK remedy for CVE-2022-21496 yields &quot;unsupported authority&quot; exception thrown","body":"<p>You need to add the environment variable -Dcom.sun.jndi.ldapURLParsing=&quot;legacy&quot; as shown here <a href=\"https://bugs.openjdk.org/browse/JDK-8288207\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8288207</a></p>\n"}],"owner":{"account_id":42005,"reputation":2840,"user_id":122230,"accept_rate":80,"display_name":"wytten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2109,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72366593,"answer_count":2,"score":3,"last_activity_date":1661522001,"creation_date":1653410552,"question_id":72366553,"body_markdown":"After a recent RedHat OpenJDK update, an application is logging the following exception on startup while trying to process its configuration properties:\r\n\r\n***javax.naming.NamingException: Cannot parse url: ldap://dev_ldap.example.com:389 [Root exception is java.net.MalformedURLException: unsupported authority: dev_ldap.example.com:389]***\r\n\r\nWhat is meant by &quot;unsupported authority&quot;? A related RedHat article suggests only to &quot;avoid special characters&quot;, but we don&#39;t appear to be using any. (Unless it is the underscore that is considered &quot;special&quot;?)","title":"OpenJDK remedy for CVE-2022-21496 yields &quot;unsupported authority&quot; exception thrown","body":"<p>After a recent RedHat OpenJDK update, an application is logging the following exception on startup while trying to process its configuration properties:</p>\n<p><em><strong>javax.naming.NamingException: Cannot parse url: ldap://dev_ldap.example.com:389 [Root exception is java.net.MalformedURLException: unsupported authority: dev_ldap.example.com:389]</strong></em></p>\n<p>What is meant by &quot;unsupported authority&quot;? A related RedHat article suggests only to &quot;avoid special characters&quot;, but we don't appear to be using any. (Unless it is the underscore that is considered &quot;special&quot;?)</p>\n"},{"tags":["java","android","xml","kotlin"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":1,"creation_date":1661519800,"post_id":73497468,"comment_id":129798031,"body_markdown":"Don&#39;t put things inside a `&lt;NavigationView&gt;`; it&#39;s not meant to act as a generic `ViewGroup`. Instead, make a vertical `&lt;LinearLayout&gt;` the drawer, and put the `&lt;NavigationView&gt;` and `&lt;ConstraintLayout&gt;` both inside that. The `android:layout_gravity=&quot;start&quot;` attribute is what marks the drawer, so make sure to move that to the new `&lt;LinearLayout&gt;`.","body":"Don&#39;t put things inside a <code>&lt;NavigationView&gt;</code>; it&#39;s not meant to act as a generic <code>ViewGroup</code>. Instead, make a vertical <code>&lt;LinearLayout&gt;</code> the drawer, and put the <code>&lt;NavigationView&gt;</code> and <code>&lt;ConstraintLayout&gt;</code> both inside that. The <code>android:layout_gravity=&quot;start&quot;</code> attribute is what marks the drawer, so make sure to move that to the new <code>&lt;LinearLayout&gt;</code>."},{"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"score":0,"creation_date":1661521983,"post_id":73497468,"comment_id":129798826,"body_markdown":"I added it as a fix, is that what you mean? this didn&#39;t work. @MikeM.","body":"I added it as a fix, is that what you mean? this didn&#39;t work. @MikeM."},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":2,"creation_date":1661522922,"post_id":73497468,"comment_id":129799210,"body_markdown":"No. The `&lt;ConstraintLayout&gt;` is still inside the `&lt;NavigationView&gt;`. Don&#39;t put things inside the `&lt;NavigationView&gt;`: https://drive.google.com/file/d/1De0nac-66M3RiZiJkRGk90RVYC9AO89R/view?usp=sharing. You probably don&#39;t even really need the `&lt;ConstraintLayout&gt;` there anymore, but you&#39;d have to adjust the paddings and whatnot.","body":"No. The <code>&lt;ConstraintLayout&gt;</code> is still inside the <code>&lt;NavigationView&gt;</code>. Don&#39;t put things inside the <code>&lt;NavigationView&gt;</code>: <a href=\"https://drive.google.com/file/d/1De0nac-66M3RiZiJkRGk90RVYC9AO89R/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1De0nac-66M3RiZiJkRGk90RVYC9AO89R/&hellip;</a>. You probably don&#39;t even really need the <code>&lt;ConstraintLayout&gt;</code> there anymore, but you&#39;d have to adjust the paddings and whatnot."},{"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"score":0,"creation_date":1661524613,"post_id":73497468,"comment_id":129799854,"body_markdown":"Thank you so much. It stays fixed the way you throw it, while there is the menu section above, it looks like a piece of paper standing on it. I want it to appear as I scroll at the end of the menu. Is it possible for me to provide this? @MikeM.","body":"Thank you so much. It stays fixed the way you throw it, while there is the menu section above, it looks like a piece of paper standing on it. I want it to appear as I scroll at the end of the menu. Is it possible for me to provide this? @MikeM."},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":1,"creation_date":1661525904,"post_id":73497468,"comment_id":129800294,"body_markdown":"You mean, if the menu is short (compared to height), the `TextView`s should be static at the bottom, but if the menu is long enough to scroll, the `TextView`s should be at the end of the scrolling menu instead? Yeah, I&#39;m sure you could do that, but it would take a more complex setup. I can&#39;t think of any quick and simple method off the top of my head, but I&#39;ll let you know if I do.","body":"You mean, if the menu is short (compared to height), the <code>TextView</code>s should be static at the bottom, but if the menu is long enough to scroll, the <code>TextView</code>s should be at the end of the scrolling menu instead? Yeah, I&#39;m sure you could do that, but it would take a more complex setup. I can&#39;t think of any quick and simple method off the top of my head, but I&#39;ll let you know if I do."},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":1,"creation_date":1661584448,"post_id":73497468,"comment_id":129811016,"body_markdown":"OK, I&#39;ve got something that&#39;s relatively simple and pretty solid, AFAICT, though I&#39;ve not done extensive testing. It uses a helper class to place the footer either statically in the drawer container, or as the last scrolling menu item, depending on how things end up measuring. The example&#39;s not too big, so I just threw it in a text file: https://drive.google.com/file/d/1Dek96fpSSYIbjBNCOnHzNRvU_V0_jLVP/view?usp=sharing. Looks like: https://i.stack.imgur.com/mTX3a.png. There are a few notes in the code and XML. Hope it helps.","body":"OK, I&#39;ve got something that&#39;s relatively simple and pretty solid, AFAICT, though I&#39;ve not done extensive testing. It uses a helper class to place the footer either statically in the drawer container, or as the last scrolling menu item, depending on how things end up measuring. The example&#39;s not too big, so I just threw it in a text file: <a href=\"https://drive.google.com/file/d/1Dek96fpSSYIbjBNCOnHzNRvU_V0_jLVP/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1Dek96fpSSYIbjBNCOnHzNRvU_V0_jLVP/&hellip;</a>. Looks like: <a href=\"https://i.stack.imgur.com/mTX3a.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/mTX3a.png</a>. There are a few notes in the code and XML. Hope it helps."},{"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"score":1,"creation_date":1661629168,"post_id":73497468,"comment_id":129819064,"body_markdown":"Omgg Thank you so much. This will help me a lot. @MikeM.","body":"Omgg Thank you so much. This will help me a lot. @MikeM."}],"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661521975,"creation_date":1661498663,"question_id":73497468,"body_markdown":"XML components overlap in landscape mode.\r\nHi, I have a drawer layout with menu options in it. The sub-linear layout contains the information of my application. However, when using the device sideways, the constraints layout rises above the menu options. How Can I Solve This?\r\n\r\nMy Code :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/drawer_layout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:openDrawer=&quot;start&quot;&gt;\r\n    \r\n        &lt;include\r\n            android:id=&quot;@+id/includingAppBarMain&quot;\r\n            layout=&quot;@layout/app_bar_main&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot; /&gt;\r\n    \r\n        &lt;com.google.android.material.navigation.NavigationView\r\n            android:id=&quot;@+id/nav_drawerView&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_gravity=&quot;start&quot;\r\n            android:background=&quot;@android:color/white&quot;\r\n            app:headerLayout=&quot;@layout/nav_header_main&quot;\r\n            app:itemBackground=&quot;@drawable/line_bottom_semi_gray&quot;\r\n            app:itemIconTint=&quot;@color/colorAccentSecondary&quot;\r\n            app:menu=&quot;@menu/activity_main_drawer&quot;&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;bottom&quot;\r\n                android:orientation=&quot;vertical&quot;\r\n                android:paddingStart=&quot;16dp&quot;\r\n                android:paddingEnd=&quot;16dp&quot;\r\n                android:paddingBottom=&quot;12dp&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tv_flavorName&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;\r\n                    android:fontFamily=&quot;@font/roboto_regular&quot;\r\n                    android:text=&quot;TextView&quot;\r\n                    android:textColor=&quot;@android:color/black&quot;\r\n                    android:textSize=&quot;13sp&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tv_appVersionName&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;\r\n                    android:layout_marginTop=&quot;4dp&quot;\r\n                    android:fontFamily=&quot;@font/roboto_regular&quot;\r\n                    android:gravity=&quot;center_vertical&quot;\r\n                    android:text=&quot;TextView&quot;\r\n                    android:textSize=&quot;12sp&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;@+id/tv_flavorName&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/tv_flavorName&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tv_appBaseVersion&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;\r\n                    android:layout_marginTop=&quot;2dp&quot;\r\n                    android:fontFamily=&quot;@font/roboto_regular&quot;\r\n                    android:text=&quot;TextView&quot;\r\n                    android:textSize=&quot;12sp&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;@+id/tv_appVersionName&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/tv_appVersionName&quot; /&gt;\r\n    \r\n    \r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    \r\n        &lt;/com.google.android.material.navigation.NavigationView&gt;\r\n    \r\n    &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\r\n\r\nXML components overlap in landscape mode.\r\n\r\n\r\nedited :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/drawer_layout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:openDrawer=&quot;start&quot;&gt;\r\n    \r\n        &lt;include\r\n            android:id=&quot;@+id/includingAppBarMain&quot;\r\n            layout=&quot;@layout/app_bar_main&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot; /&gt;\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_gravity=&quot;start&quot;&gt;\r\n        &lt;com.google.android.material.navigation.NavigationView\r\n            android:id=&quot;@+id/nav_drawerView&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_gravity=&quot;start&quot;\r\n            android:background=&quot;@android:color/white&quot;\r\n            app:headerLayout=&quot;@layout/nav_header_main&quot;\r\n            app:itemBackground=&quot;@drawable/line_bottom_semi_gray&quot;\r\n            app:itemIconTint=&quot;@color/colorAccentSecondary&quot;\r\n            app:menu=&quot;@menu/activity_main_drawer&quot;&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;bottom&quot;\r\n                android:orientation=&quot;vertical&quot;\r\n                android:paddingStart=&quot;16dp&quot;\r\n                android:paddingEnd=&quot;16dp&quot;\r\n                android:paddingBottom=&quot;12dp&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tv_flavorName&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;\r\n                    android:fontFamily=&quot;@font/roboto_regular&quot;\r\n                    android:text=&quot;TextView&quot;\r\n                    android:textColor=&quot;@android:color/black&quot;\r\n                    android:textSize=&quot;13sp&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tv_appVersionName&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;\r\n                    android:layout_marginTop=&quot;4dp&quot;\r\n                    android:fontFamily=&quot;@font/roboto_regular&quot;\r\n                    android:gravity=&quot;center_vertical&quot;\r\n                    android:text=&quot;TextView&quot;\r\n                    android:textSize=&quot;12sp&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;@+id/tv_flavorName&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/tv_flavorName&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tv_appBaseVersion&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;\r\n                    android:layout_marginTop=&quot;2dp&quot;\r\n                    android:fontFamily=&quot;@font/roboto_regular&quot;\r\n                    android:text=&quot;TextView&quot;\r\n                    android:textSize=&quot;12sp&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;@+id/tv_appVersionName&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/tv_appVersionName&quot; /&gt;\r\n    \r\n    \r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n        &lt;/com.google.android.material.navigation.NavigationView&gt;\r\n    &lt;/LinearLayout&gt;\r\n    &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;","title":"XML components overlap in landscape mode","body":"<p>XML components overlap in landscape mode.\nHi, I have a drawer layout with menu options in it. The sub-linear layout contains the information of my application. However, when using the device sideways, the constraints layout rises above the menu options. How Can I Solve This?</p>\n<p>My Code :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/drawer_layout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:openDrawer=&quot;start&quot;&gt;\n\n    &lt;include\n        android:id=&quot;@+id/includingAppBarMain&quot;\n        layout=&quot;@layout/app_bar_main&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot; /&gt;\n\n    &lt;com.google.android.material.navigation.NavigationView\n        android:id=&quot;@+id/nav_drawerView&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_gravity=&quot;start&quot;\n        android:background=&quot;@android:color/white&quot;\n        app:headerLayout=&quot;@layout/nav_header_main&quot;\n        app:itemBackground=&quot;@drawable/line_bottom_semi_gray&quot;\n        app:itemIconTint=&quot;@color/colorAccentSecondary&quot;\n        app:menu=&quot;@menu/activity_main_drawer&quot;&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;bottom&quot;\n            android:orientation=&quot;vertical&quot;\n            android:paddingStart=&quot;16dp&quot;\n            android:paddingEnd=&quot;16dp&quot;\n            android:paddingBottom=&quot;12dp&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_flavorName&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;bottom&quot;\n                android:fontFamily=&quot;@font/roboto_regular&quot;\n                android:text=&quot;TextView&quot;\n                android:textColor=&quot;@android:color/black&quot;\n                android:textSize=&quot;13sp&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_appVersionName&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;bottom&quot;\n                android:layout_marginTop=&quot;4dp&quot;\n                android:fontFamily=&quot;@font/roboto_regular&quot;\n                android:gravity=&quot;center_vertical&quot;\n                android:text=&quot;TextView&quot;\n                android:textSize=&quot;12sp&quot;\n                app:layout_constraintStart_toStartOf=&quot;@+id/tv_flavorName&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/tv_flavorName&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_appBaseVersion&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;bottom&quot;\n                android:layout_marginTop=&quot;2dp&quot;\n                android:fontFamily=&quot;@font/roboto_regular&quot;\n                android:text=&quot;TextView&quot;\n                android:textSize=&quot;12sp&quot;\n                app:layout_constraintStart_toStartOf=&quot;@+id/tv_appVersionName&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/tv_appVersionName&quot; /&gt;\n\n\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n    &lt;/com.google.android.material.navigation.NavigationView&gt;\n\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n<p>XML components overlap in landscape mode.</p>\n<p>edited :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/drawer_layout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:openDrawer=&quot;start&quot;&gt;\n\n    &lt;include\n        android:id=&quot;@+id/includingAppBarMain&quot;\n        layout=&quot;@layout/app_bar_main&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot; /&gt;\n&lt;LinearLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_gravity=&quot;start&quot;&gt;\n    &lt;com.google.android.material.navigation.NavigationView\n        android:id=&quot;@+id/nav_drawerView&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_gravity=&quot;start&quot;\n        android:background=&quot;@android:color/white&quot;\n        app:headerLayout=&quot;@layout/nav_header_main&quot;\n        app:itemBackground=&quot;@drawable/line_bottom_semi_gray&quot;\n        app:itemIconTint=&quot;@color/colorAccentSecondary&quot;\n        app:menu=&quot;@menu/activity_main_drawer&quot;&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;bottom&quot;\n            android:orientation=&quot;vertical&quot;\n            android:paddingStart=&quot;16dp&quot;\n            android:paddingEnd=&quot;16dp&quot;\n            android:paddingBottom=&quot;12dp&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_flavorName&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;bottom&quot;\n                android:fontFamily=&quot;@font/roboto_regular&quot;\n                android:text=&quot;TextView&quot;\n                android:textColor=&quot;@android:color/black&quot;\n                android:textSize=&quot;13sp&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_appVersionName&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;bottom&quot;\n                android:layout_marginTop=&quot;4dp&quot;\n                android:fontFamily=&quot;@font/roboto_regular&quot;\n                android:gravity=&quot;center_vertical&quot;\n                android:text=&quot;TextView&quot;\n                android:textSize=&quot;12sp&quot;\n                app:layout_constraintStart_toStartOf=&quot;@+id/tv_flavorName&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/tv_flavorName&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_appBaseVersion&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;bottom&quot;\n                android:layout_marginTop=&quot;2dp&quot;\n                android:fontFamily=&quot;@font/roboto_regular&quot;\n                android:text=&quot;TextView&quot;\n                android:textSize=&quot;12sp&quot;\n                app:layout_constraintStart_toStartOf=&quot;@+id/tv_appVersionName&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/tv_appVersionName&quot; /&gt;\n\n\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n    &lt;/com.google.android.material.navigation.NavigationView&gt;\n&lt;/LinearLayout&gt;\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661521970,"creation_date":1661514708,"answer_id":73500619,"question_id":73500382,"body_markdown":"Specify the entity type being returned - Person.class\r\n```\r\nString query = &quot;SELECT p.*, a.* FROM person p, address a WHERE p.id = a.person_id&quot;;\r\nList&lt;Person&gt; personList = session.createNativeQuery(query, Person.class).list();\r\n```","title":"How to include child objects in nativequery list?","body":"<p>Specify the entity type being returned - Person.class</p>\n<pre><code>String query = &quot;SELECT p.*, a.* FROM person p, address a WHERE p.id = a.person_id&quot;;\nList&lt;Person&gt; personList = session.createNativeQuery(query, Person.class).list();\n</code></pre>\n"}],"owner":{"account_id":17654983,"reputation":115,"user_id":12814777,"display_name":"dataman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661521970,"creation_date":1661513502,"question_id":73500382,"body_markdown":"In this simplified example, I have code that returns a list via a native query\r\n\r\n    String query = &quot;SELECT id, first_name, last_name, email FROM person&quot;;\r\n    List&lt;Person&gt; personList = session.createNativeQuery(query).list();\r\n\r\nNow we have added an address object that allows multiple addresses per person  (no address key has been added to the person table since it is a one to many relationship)\r\n\r\n      class Address {\r\n        private Integer personId\r\n        private String streetAddress;\r\n      }    \r\n\r\nWe want the address list object to be included in the result set for each person record\r\n\r\nWhat is the best way to do that?\r\n","title":"How to include child objects in nativequery list?","body":"<p>In this simplified example, I have code that returns a list via a native query</p>\n<pre><code>String query = &quot;SELECT id, first_name, last_name, email FROM person&quot;;\nList&lt;Person&gt; personList = session.createNativeQuery(query).list();\n</code></pre>\n<p>Now we have added an address object that allows multiple addresses per person  (no address key has been added to the person table since it is a one to many relationship)</p>\n<pre><code>  class Address {\n    private Integer personId\n    private String streetAddress;\n  }    \n</code></pre>\n<p>We want the address list object to be included in the result set for each person record</p>\n<p>What is the best way to do that?</p>\n"},{"tags":["java","spring","junit"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1661521850,"post_id":73502061,"comment_id":129798781,"body_markdown":"@Before should work just fine, what exactly is it that isn&#39;t working?","body":"@Before should work just fine, what exactly is it that isn&#39;t working?"},{"owner":{"account_id":2099531,"reputation":6497,"user_id":1867549,"accept_rate":80,"display_name":"&#201;tienne Miret"},"score":0,"creation_date":1661522171,"post_id":73502061,"comment_id":129798891,"body_markdown":"Which version of JUnit are you using?","body":"Which version of JUnit are you using?"}],"owner":{"account_id":26166568,"reputation":1,"user_id":19852287,"display_name":"Moaaz Abdelmeguid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661521803,"creation_date":1661521803,"question_id":73502061,"body_markdown":"I am doing an integration test for a process using JUnit and there is a punch of processes that should be ran to set the environment to test any new feature, i do not want to setup the environment in every test method, so how can i set my environment in a setUp method?\r\n\r\nI tried to include the configuration processes in the setUp method by adding the @BeforeAll and @BeforeEach and they did not help!","title":"Dependent Junit test cases and test setUp","body":"<p>I am doing an integration test for a process using JUnit and there is a punch of processes that should be ran to set the environment to test any new feature, i do not want to setup the environment in every test method, so how can i set my environment in a setUp method?</p>\n<p>I tried to include the configuration processes in the setUp method by adding the @BeforeAll and @BeforeEach and they did not help!</p>\n"},{"tags":["java","apache-kafka","junit","spring-kafka-test"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1661521419,"post_id":73499523,"comment_id":129798622,"body_markdown":"Your producer code isn&#39;t shown, and the consumer isn&#39;t coupled to it at all, so unclear what you expected to happen. So, this code works fine if you&#39;re not throwing an exception inside the KafkaTemplate send method (such as by mocking it)","body":"Your producer code isn&#39;t shown, and the consumer isn&#39;t coupled to it at all, so unclear what you expected to happen. So, this code works fine if you&#39;re not throwing an exception inside the KafkaTemplate send method (such as by mocking it)"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661521579,"creation_date":1661521579,"answer_id":73502021,"question_id":73499523,"body_markdown":"You don&#39;t need a producer to test this \r\n\r\n```\r\n// TODO: get consumer service instance \r\nfinal Event event = new Event();\r\nassertThrows(RuntimeException.class, \r\n    () -&gt; service.consumeEvents(event));\r\n```","title":"Test Exception thrown by Kafka Consumer in Spring Boot","body":"<p>You don't need a producer to test this</p>\n<pre><code>// TODO: get consumer service instance \nfinal Event event = new Event();\nassertThrows(RuntimeException.class, \n    () -&gt; service.consumeEvents(event));\n</code></pre>\n"}],"owner":{"account_id":10432483,"reputation":2673,"user_id":7691891,"display_name":"Smaillns"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":997,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661521722,"creation_date":1661509359,"question_id":73499523,"body_markdown":"I&#39;ve the following configuration\r\n```\r\nserver:\r\n  port: 8001\r\nspring:\r\n  kafka:\r\n    bootstrap-servers: localhost:9092\r\n    consumer:\r\n      auto-offset-reset: latest\r\n      group-id: group-id\r\n      value-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer\r\n      key-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer\r\n      properties:\r\n        spring.deserializer.key.delegate.class: org.apache.kafka.common.serialization.StringDeserializer\r\n        spring.deserializer.value.delegate.class: &lt;package..&gt;.config.kafka.KafkaEventDeserializer\r\n    producer:\r\n      key-serializer: org.apache.kafka.common.serialization.StringSerializer\r\n      value-serializer: &lt;package..&gt;.config.kafka.KafkaEventSerializer\r\n  \r\nkafka:\r\n   topic-name: topic-name\r\n   group-id: group-id\r\n```\r\n\r\nI want to test the following Kafka Consumer \r\n\r\n    @KafkaListener(topics = &quot;#{&#39;${kafka.topic}&#39;}&quot;,\r\n                   groupId = &quot;#{&#39;${kafka.group-id}&#39;}&quot;)\r\n    public void consumeEvents(Event event) throws RuntimeException {\r\n          throw new RuntimeException(&quot;EventType does not match !&quot;);\r\n    }\r\n\r\nthis is my test case\r\n\r\n    @Test\r\n    @SneakyThrows\r\n    void consumeEvents_RuntimeExceptionShouldBeThrown() {\r\n        \r\n        ...\r\n        await().atMost(2, TimeUnit.SECONDS)\r\n               .untilAsserted(() -&gt; assertThrows(RuntimeException.class, () -&gt; kafkaTemplate.send(receiptTopic, &quot;key&quot;, event)));\r\n        \r\n    }\r\n\r\n\r\nThe exception is thrown by the test failed ! \r\n\r\nIt seems that the excpetion is already catched, thus `assertThrows` doesn&#39;t work properly\r\n\r\nHow can we handle such case ? Thanks","title":"Test Exception thrown by Kafka Consumer in Spring Boot","body":"<p>I've the following configuration</p>\n<pre><code>server:\n  port: 8001\nspring:\n  kafka:\n    bootstrap-servers: localhost:9092\n    consumer:\n      auto-offset-reset: latest\n      group-id: group-id\n      value-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer\n      key-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer\n      properties:\n        spring.deserializer.key.delegate.class: org.apache.kafka.common.serialization.StringDeserializer\n        spring.deserializer.value.delegate.class: &lt;package..&gt;.config.kafka.KafkaEventDeserializer\n    producer:\n      key-serializer: org.apache.kafka.common.serialization.StringSerializer\n      value-serializer: &lt;package..&gt;.config.kafka.KafkaEventSerializer\n  \nkafka:\n   topic-name: topic-name\n   group-id: group-id\n</code></pre>\n<p>I want to test the following Kafka Consumer</p>\n<pre><code>@KafkaListener(topics = &quot;#{'${kafka.topic}'}&quot;,\n               groupId = &quot;#{'${kafka.group-id}'}&quot;)\npublic void consumeEvents(Event event) throws RuntimeException {\n      throw new RuntimeException(&quot;EventType does not match !&quot;);\n}\n</code></pre>\n<p>this is my test case</p>\n<pre><code>@Test\n@SneakyThrows\nvoid consumeEvents_RuntimeExceptionShouldBeThrown() {\n    \n    ...\n    await().atMost(2, TimeUnit.SECONDS)\n           .untilAsserted(() -&gt; assertThrows(RuntimeException.class, () -&gt; kafkaTemplate.send(receiptTopic, &quot;key&quot;, event)));\n    \n}\n</code></pre>\n<p>The exception is thrown by the test failed !</p>\n<p>It seems that the excpetion is already catched, thus <code>assertThrows</code> doesn't work properly</p>\n<p>How can we handle such case ? Thanks</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8912,"page":1080,"page_size":100}
