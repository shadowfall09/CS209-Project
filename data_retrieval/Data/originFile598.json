{"items":[{"tags":["java","hibernate","hibernate-6.x"],"comments":[{"owner":{"account_id":2254560,"reputation":199,"user_id":1986022,"accept_rate":50,"display_name":"jluiz20"},"score":0,"creation_date":1678162427,"post_id":75657167,"comment_id":133475677,"body_markdown":"Found [the commit](https://github.com/hibernate/hibernate-orm/commit/61772103958cc8aacad80064edaf1bde92a59acf) that was removed, the comment is the best: &quot;this stuff is so old and so bad that it&#39;s not even worth deprecating&quot;","body":"Found <a href=\"https://github.com/hibernate/hibernate-orm/commit/61772103958cc8aacad80064edaf1bde92a59acf\" rel=\"nofollow noreferrer\">the commit</a> that was removed, the comment is the best: &quot;this stuff is so old and so bad that it&#39;s not even worth deprecating&quot;"},{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1678694371,"post_id":75657167,"comment_id":133576172,"body_markdown":"Why not create a second session then to connect to the other datasource?","body":"Why not create a second session then to connect to the other datasource?"}],"owner":{"account_id":2254560,"reputation":199,"user_id":1986022,"accept_rate":50,"display_name":"jluiz20"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678150718,"creation_date":1678150718,"question_id":75657167,"body_markdown":"In hibernate 5, we have `session.disconnect()` where we could disconnect the session from its underlying JDBC connection, for example:\r\n\r\n```\r\nimport org.hibernate.Session;\r\nimport javax.persistence.EntityManager;\r\n\r\n----\r\n\r\ntry (Session session = entityManager.unwrap(Session.class)) {\r\n    session.disconnect();\r\n}\r\n```\r\n\r\nI could not find it on the [Session on Hibernate 6](https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/Session.html). Anyone knows another way to disconnect from the current session?\r\n\r\nPS: I was using `disconnect()` in Hibernate 5 when I had two data sources and I needed to switch between them.\r\n\r\n\r\n","title":"Do we have a replacement for session.disconnect() on Hibernate 6?","body":"<p>In hibernate 5, we have <code>session.disconnect()</code> where we could disconnect the session from its underlying JDBC connection, for example:</p>\n<pre><code>import org.hibernate.Session;\nimport javax.persistence.EntityManager;\n\n----\n\ntry (Session session = entityManager.unwrap(Session.class)) {\n    session.disconnect();\n}\n</code></pre>\n<p>I could not find it on the <a href=\"https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/Session.html\" rel=\"nofollow noreferrer\">Session on Hibernate 6</a>. Anyone knows another way to disconnect from the current session?</p>\n<p>PS: I was using <code>disconnect()</code> in Hibernate 5 when I had two data sources and I needed to switch between them.</p>\n"},{"tags":["java","flutter","android-studio","gradle"],"answers":[{"comments":[{"owner":{"account_id":3268032,"reputation":62,"user_id":2752107,"display_name":"Flat Screen"},"score":0,"creation_date":1681022381,"post_id":74808735,"comment_id":133990400,"body_markdown":"This worked for me. But first check the java --version","body":"This worked for me. But first check the java --version"}],"tags":[],"owner":{"account_id":7832532,"reputation":1060,"user_id":5921933,"accept_rate":38,"display_name":"Huy Nguyen"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671093077,"creation_date":1671093077,"answer_id":74808735,"question_id":74443767,"body_markdown":"Please check gradle compatibility from here https://docs.gradle.org/current/userguide/compatibility.html and use the compatible version. \r\n\r\nI&#39;m using java `19.0.1`. Updating Gradle version as below can solve the issue:\r\n\r\n```\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-bin.zip\r\n```\r\n\r\nCleaning gradle before retrying is also helpful:\r\n\r\n```\r\ngradle clean \r\n```","title":"exception in phase &#39;semantic analysis&#39; in source unit &#39;_BuildScript_&#39;","body":"<p>Please check gradle compatibility from here <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/compatibility.html</a> and use the compatible version.</p>\n<p>I'm using java <code>19.0.1</code>. Updating Gradle version as below can solve the issue:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5.1-bin.zip\n</code></pre>\n<p>Cleaning gradle before retrying is also helpful:</p>\n<pre><code>gradle clean \n</code></pre>\n"},{"tags":[],"owner":{"account_id":234646,"reputation":1628,"user_id":500936,"accept_rate":23,"display_name":"Jean-Pierre Schnyder"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677349485,"creation_date":1677349485,"answer_id":75567523,"question_id":74443767,"body_markdown":"This is my solution:\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.6-all.zip\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QfVjm.jpg","title":"exception in phase &#39;semantic analysis&#39; in source unit &#39;_BuildScript_&#39;","body":"<p>This is my solution:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.6-all.zip\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/QfVjm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QfVjm.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":21352289,"reputation":458,"user_id":15721679,"display_name":"Abdeldjalil Chougui"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678148444,"creation_date":1678121540,"answer_id":75653626,"question_id":74443767,"body_markdown":"I had the same bug, and I found that the bug is caused by non compatibility of gradle user.\r\n\r\nAnd the following works for me :\r\n\r\n- Check the compatibility [here][1].\r\n- Then go to the files `gradle/wrapper/gradle-wrapper.properties` and `android/gradle/wrapper/gradle-wrapper.properties` \r\n- Set the attribute `distributionUrl` with the compatible version of gradle\r\n\r\nRun the project and now you are okay\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/compatibility.html","title":"exception in phase &#39;semantic analysis&#39; in source unit &#39;_BuildScript_&#39;","body":"<p>I had the same bug, and I found that the bug is caused by non compatibility of gradle user.</p>\n<p>And the following works for me :</p>\n<ul>\n<li>Check the compatibility <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">here</a>.</li>\n<li>Then go to the files <code>gradle/wrapper/gradle-wrapper.properties</code> and <code>android/gradle/wrapper/gradle-wrapper.properties</code></li>\n<li>Set the attribute <code>distributionUrl</code> with the compatible version of gradle</li>\n</ul>\n<p>Run the project and now you are okay</p>\n"}],"owner":{"account_id":14866314,"reputation":75,"user_id":10735311,"display_name":"Aditya Sutar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10166,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1678148444,"creation_date":1668506695,"question_id":74443767,"body_markdown":"A problem occurred evaluating root project &#39;android&#39;.\r\n&gt; A problem occurred configuring project &#39;:app&#39;.\r\n   &gt; Could not open project generic class cache for build file &#39;C:\\Users\\InFED Laptop\\Documents\\GitHub\\sustain-and-save\\android\\app\\build.gradle&#39; (C:\\Users\\InFED Laptop\\.gradle\\caches\\7.5.1\\scripts\\cgusqz2rdd56uogb1dahk58km).\r\n      &gt; BUG! exception in phase &#39;semantic analysis&#39; in source unit &#39;_BuildScript_&#39; Unsupported class file major version 63","title":"exception in phase &#39;semantic analysis&#39; in source unit &#39;_BuildScript_&#39;","body":"<p>A problem occurred evaluating root project 'android'.</p>\n<blockquote>\n<p>A problem occurred configuring project ':app'.\nCould not open project generic class cache for build file 'C:\\Users\\InFED Laptop\\Documents\\GitHub\\sustain-and-save\\android\\app\\build.gradle' (C:\\Users\\InFED Laptop.gradle\\caches\\7.5.1\\scripts\\cgusqz2rdd56uogb1dahk58km).\n&gt; BUG! exception in phase 'semantic analysis' in source unit '<em>BuildScript</em>' Unsupported class file major version 63</p>\n</blockquote>\n"},{"tags":["java","android","memory-leaks","hprof"],"answers":[{"comments":[{"owner":{"account_id":3492124,"reputation":1637,"user_id":2921519,"display_name":"Maurice Lam"},"score":0,"creation_date":1678148360,"post_id":75656983,"comment_id":133474062,"body_markdown":"The readme for that project also mentions https://github.com/AdoptOpenJDK/jheappo, which looks like it has more flexibility for querying over command line.","body":"The readme for that project also mentions <a href=\"https://github.com/AdoptOpenJDK/jheappo\" rel=\"nofollow noreferrer\">github.com/AdoptOpenJDK/jheappo</a>, which looks like it has more flexibility for querying over command line."},{"owner":{"account_id":8677048,"reputation":447,"user_id":6494163,"display_name":"T code"},"score":0,"creation_date":1678212053,"post_id":75656983,"comment_id":133488317,"body_markdown":"Does this allow you to estime the amount of unused allocated memory in your container? When you connect a debugger to an ArrayList for example, even if the ArrayList doubled its capacity for further add(), if you check the size() method, it&#39;s always exactly the number of initialised elements in it, so you won&#39;t be able to see how much extra spaces the container has reserved in terms of memory. My ultimate goal is that, to try to see how much the container takes extra space in memory just to optimize for future add() calls by reserving slots that are still not used. Thanks for your help.","body":"Does this allow you to estime the amount of unused allocated memory in your container? When you connect a debugger to an ArrayList for example, even if the ArrayList doubled its capacity for further add(), if you check the size() method, it&#39;s always exactly the number of initialised elements in it, so you won&#39;t be able to see how much extra spaces the container has reserved in terms of memory. My ultimate goal is that, to try to see how much the container takes extra space in memory just to optimize for future add() calls by reserving slots that are still not used. Thanks for your help."},{"owner":{"account_id":3492124,"reputation":1637,"user_id":2921519,"display_name":"Maurice Lam"},"score":0,"creation_date":1678218942,"post_id":75656983,"comment_id":133489966,"body_markdown":"For that the tool will need knowledge on the specific implementation of the container (e.g. the field names of the size / capacity). With that knowledge, you can try looking it up from the hprof via https://docs.rs/jvm-hprof/0.1.0/jvm_hprof/heap_dump/struct.Instance.html#method.fields","body":"For that the tool will need knowledge on the specific implementation of the container (e.g. the field names of the size / capacity). With that knowledge, you can try looking it up from the hprof via <a href=\"https://docs.rs/jvm-hprof/0.1.0/jvm_hprof/heap_dump/struct.Instance.html#method.fields\" rel=\"nofollow noreferrer\">docs.rs/jvm-hprof/0.1.0/jvm_hprof/heap_dump/&hellip;</a>"}],"tags":[],"owner":{"account_id":3492124,"reputation":1637,"user_id":2921519,"display_name":"Maurice Lam"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678148282,"creation_date":1678148282,"answer_id":75656983,"question_id":75466277,"body_markdown":"You can take a look at `jvm-hprof-rs` (https://bitbucket.org/marshallpierce/jvm-hprof-rs/src/master/).\r\n\r\nIf you are comfortable writing Rust code, the library gives you a great deal of control over how to process the data. ([Documentation](https://docs.rs/jvm-hprof/0.1.0/jvm_hprof/))\r\n\r\nFor simpler cases, the `analyze_hprof` example can give you a CSV format containing the &quot;Instance count&quot;, &quot;Instance size (bytes)&quot;, &quot;Total shallow instance size (bytes)&quot;, &quot;Class name&quot;, and &quot;Class obj id&quot;. You can then post-process to get the info you need.\r\n\r\n```\r\ncargo run --release --example analyze_hprof -- \\\r\n    -f path/to/your.hprof \\\r\n    instance-counts\r\n```\r\n\r\nIf I am understanding your problem correctly, you can take the output CSV, grep for the class name you want to analyze, and compute `Instance size (bytes) / Instance count`.","title":"Parsing hprof memory dump","body":"<p>You can take a look at <code>jvm-hprof-rs</code> (<a href=\"https://bitbucket.org/marshallpierce/jvm-hprof-rs/src/master/\" rel=\"nofollow noreferrer\">https://bitbucket.org/marshallpierce/jvm-hprof-rs/src/master/</a>).</p>\n<p>If you are comfortable writing Rust code, the library gives you a great deal of control over how to process the data. (<a href=\"https://docs.rs/jvm-hprof/0.1.0/jvm_hprof/\" rel=\"nofollow noreferrer\">Documentation</a>)</p>\n<p>For simpler cases, the <code>analyze_hprof</code> example can give you a CSV format containing the &quot;Instance count&quot;, &quot;Instance size (bytes)&quot;, &quot;Total shallow instance size (bytes)&quot;, &quot;Class name&quot;, and &quot;Class obj id&quot;. You can then post-process to get the info you need.</p>\n<pre><code>cargo run --release --example analyze_hprof -- \\\n    -f path/to/your.hprof \\\n    instance-counts\n</code></pre>\n<p>If I am understanding your problem correctly, you can take the output CSV, grep for the class name you want to analyze, and compute <code>Instance size (bytes) / Instance count</code>.</p>\n"}],"owner":{"account_id":8677048,"reputation":447,"user_id":6494163,"display_name":"T code"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75656983,"answer_count":1,"score":0,"last_activity_date":1678148282,"creation_date":1676502611,"question_id":75466277,"body_markdown":"I am working on an Android application and I have a memory dump (i.e. a .hprof file) that I captured from my application.\r\n\r\nI want to investigate a certain container of the application. \r\n\r\nJust like an ArrayList, the container has a growth policy that increases the capacity of the container when the size is reached to guarantee constant amortized time cost for adding elements into it.\r\n\r\nMy hypothesis is that every instance of the container possesses multiple unused allocated memory spaces. \r\n\r\nI want to automate the process of investigating this case. Is there a way to write a script that can parse this .hprof file and return the ratio of these unused allocated spaces to total_entries?\r\n\r\nThank you!","title":"Parsing hprof memory dump","body":"<p>I am working on an Android application and I have a memory dump (i.e. a .hprof file) that I captured from my application.</p>\n<p>I want to investigate a certain container of the application.</p>\n<p>Just like an ArrayList, the container has a growth policy that increases the capacity of the container when the size is reached to guarantee constant amortized time cost for adding elements into it.</p>\n<p>My hypothesis is that every instance of the container possesses multiple unused allocated memory spaces.</p>\n<p>I want to automate the process of investigating this case. Is there a way to write a script that can parse this .hprof file and return the ratio of these unused allocated spaces to total_entries?</p>\n<p>Thank you!</p>\n"},{"tags":["java"],"owner":{"account_id":20656721,"reputation":29,"user_id":15165636,"display_name":"Ukraine1449"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678148270,"creation_date":1678148270,"question_id":75656981,"body_markdown":"Error: The redirect_uri does not match the registered value\r\n\r\nThe code related to this is as follows: \r\n\r\n    final String clientId = &quot;78bg6407krjxu9&quot;;\r\n        final String clientSecret = &quot;V8XEuAwLwyAPLinI&quot;;\r\n        final OAuth20Service service = new ServiceBuilder(clientId)\r\n                .apiSecret(clientSecret)\r\n                .defaultScope(new ScopeBuilder(&quot;r_liteprofile&quot;, &quot;r_emailaddress&quot;)) // replace with desired scope\r\n                .callback(&quot;http://example.com/callback&quot;)\r\n                .build(LinkedInApi20.instance());\r\n        final Scanner in = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;=== &quot; + NETWORK_NAME + &quot;&#39;s OAuth Workflow ===&quot;);\r\n        System.out.println();\r\n        System.out.println(&quot;Fetching the Authorization URL...&quot;);\r\n        final String secretState = &quot;secret&quot; + new Random().nextInt(999_999);\r\n        final String authorizationUrl = service.getAuthorizationUrl(secretState);\r\n        System.out.println(&quot;Got the Authorization URL!&quot;);\r\n        System.out.println(&quot;Now go and authorize ScribeJava here:&quot;);\r\n        System.out.println(authorizationUrl);\r\n        System.out.println(&quot;And paste the authorization code here&quot;);\r\n        System.out.print(&quot;&gt;&gt;&quot;);\r\n        final String code = in.nextLine();\r\n        System.out.println();","title":"Trying to use scribejava, running into error saying &quot;The redirect_uri does not match the registered value&quot;","body":"<p>Error: The redirect_uri does not match the registered value</p>\n<p>The code related to this is as follows:</p>\n<pre><code>final String clientId = &quot;78bg6407krjxu9&quot;;\n    final String clientSecret = &quot;V8XEuAwLwyAPLinI&quot;;\n    final OAuth20Service service = new ServiceBuilder(clientId)\n            .apiSecret(clientSecret)\n            .defaultScope(new ScopeBuilder(&quot;r_liteprofile&quot;, &quot;r_emailaddress&quot;)) // replace with desired scope\n            .callback(&quot;http://example.com/callback&quot;)\n            .build(LinkedInApi20.instance());\n    final Scanner in = new Scanner(System.in);\n\n    System.out.println(&quot;=== &quot; + NETWORK_NAME + &quot;'s OAuth Workflow ===&quot;);\n    System.out.println();\n    System.out.println(&quot;Fetching the Authorization URL...&quot;);\n    final String secretState = &quot;secret&quot; + new Random().nextInt(999_999);\n    final String authorizationUrl = service.getAuthorizationUrl(secretState);\n    System.out.println(&quot;Got the Authorization URL!&quot;);\n    System.out.println(&quot;Now go and authorize ScribeJava here:&quot;);\n    System.out.println(authorizationUrl);\n    System.out.println(&quot;And paste the authorization code here&quot;);\n    System.out.print(&quot;&gt;&gt;&quot;);\n    final String code = in.nextLine();\n    System.out.println();\n</code></pre>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":6959926,"reputation":404,"user_id":5339746,"accept_rate":100,"display_name":"Joao"},"score":0,"creation_date":1685377650,"post_id":75656818,"comment_id":134648555,"body_markdown":"1/2 \nDon&#39;t use the offset. Because different countries can have different DST date. \nSo it can depend on when you need to use the timezone. For example, if you want to save the user&#39;s timezone to convert time to his timezone, you can&#39;t save just the offset, because it&#39;s different for each country for different dates.\nExample. Today is March of 2023 and you save your user timezone  offset = +2","body":"1/2  Don&#39;t use the offset. Because different countries can have different DST date.  So it can depend on when you need to use the timezone. For example, if you want to save the user&#39;s timezone to convert time to his timezone, you can&#39;t save just the offset, because it&#39;s different for each country for different dates. Example. Today is March of 2023 and you save your user timezone  offset = +2"},{"owner":{"account_id":6959926,"reputation":404,"user_id":5339746,"accept_rate":100,"display_name":"Joao"},"score":0,"creation_date":1685377656,"post_id":75656818,"comment_id":134648558,"body_markdown":"2/2\nYou save the offset +2  \nYou receive two dates\nWed Mar 20 2023 16:00:00 GMT+0200\nWed Mar 29 2023 16:00:00 GMT+0200\n\nFor Egyptian users, both dates you don&#39;t need to convert. Because Egypt implement DST in April\n\nFor Ukrainian users, you need to convert one date\nWed Mar 20 2023 16:00:00 GMT+0200\nWed Mar 29 2023 17:00:00 GMT+0300\nbecause the 29th of Mar goes after DST.","body":"2/2 You save the offset +2   You receive two dates Wed Mar 20 2023 16:00:00 GMT+0200 Wed Mar 29 2023 16:00:00 GMT+0200  For Egyptian users, both dates you don&#39;t need to convert. Because Egypt implement DST in April  For Ukrainian users, you need to convert one date Wed Mar 20 2023 16:00:00 GMT+0200 Wed Mar 29 2023 17:00:00 GMT+0300 because the 29th of Mar goes after DST."}],"tags":[],"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678146223,"creation_date":1678146223,"answer_id":75656818,"question_id":75656590,"body_markdown":"It&#39;s not guaranteed. Java uses data from [Common Locale Data Repository](https://en.wikipedia.org/wiki/Common_Locale_Data_Repository) and they periodically update it. \r\n\r\nThere have been cases where that update was a breaking change, e.g. this:  https://stackoverflow.com/questions/69267710/septembers-short-form-sep-no-longer-parses-in-java-17-in-en-gb-locale\r\n\r\nThat zone just happens to have both of those examples as valid aliases. See: https://github.com/openjdk/jdk/blob/master/make/data/cldr/common/bcp47/timezone.xml#L398 but there is no requirement that they do so.\r\n\r\nA zone name is not really something you should expect forwards compatibility for. This data models the real world, and the real world is constantly changing. If you want to rely on something that&#39;s future-proof, then use the offset, i.e. `+02:00`.","title":"Is Java ZoneID guaranteed to parse previously existing timezones?","body":"<p>It's not guaranteed. Java uses data from <a href=\"https://en.wikipedia.org/wiki/Common_Locale_Data_Repository\" rel=\"nofollow noreferrer\">Common Locale Data Repository</a> and they periodically update it.</p>\n<p>There have been cases where that update was a breaking change, e.g. this:  <a href=\"https://stackoverflow.com/questions/69267710/septembers-short-form-sep-no-longer-parses-in-java-17-in-en-gb-locale\">September&#39;s short form &quot;Sep&quot; no longer parses in Java 17 in en_GB locale</a></p>\n<p>That zone just happens to have both of those examples as valid aliases. See: <a href=\"https://github.com/openjdk/jdk/blob/master/make/data/cldr/common/bcp47/timezone.xml#L398\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/blob/master/make/data/cldr/common/bcp47/timezone.xml#L398</a> but there is no requirement that they do so.</p>\n<p>A zone name is not really something you should expect forwards compatibility for. This data models the real world, and the real world is constantly changing. If you want to rely on something that's future-proof, then use the offset, i.e. <code>+02:00</code>.</p>\n"}],"owner":{"account_id":166796,"reputation":72317,"user_id":391161,"accept_rate":63,"display_name":"merlin2011"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75656818,"answer_count":1,"score":4,"last_activity_date":1678147219,"creation_date":1678143492,"question_id":75656590,"body_markdown":"In late 2022, the timezone `Europe/Kiev` was [renamed][1] to `Europe/Kyiv` by IANA.\r\n\r\nConsider the following program:\r\n\r\n```\r\nimport java.time.ZoneId;\r\n\r\npublic class TZPlay {\r\n  public static void main(String[] args) {\r\n    try {\r\n//      ZoneId.of(&quot;Europe/Kiev&quot;); // Works in Java 17.06 and Java 17.03\r\n//      ZoneId.of(&quot;Europe/Kyiv&quot;); // Works in Java 17.06 but not Java 17.03.\r\n    } catch (Exception e) {\r\n      e.printStackTrace();\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nObservations:\r\n * Java 17.03 throws the following exception when trying to parse `Europe/Kyiv`.\r\n\r\n```\r\njava.time.zone.ZoneRulesException: Unknown time-zone ID: Europe/Kyiv\r\n        at java.base/java.time.zone.ZoneRulesProvider.getProvider(ZoneRulesProvider.java:280)\r\n        at java.base/java.time.zone.ZoneRulesProvider.getRules(ZoneRulesProvider.java:235)\r\n        at java.base/java.time.ZoneRegion.ofId(ZoneRegion.java:121)\r\n        at java.base/java.time.ZoneId.of(ZoneId.java:410)\r\n        at java.base/java.time.ZoneId.of(ZoneId.java:358)\r\n        at TZPlay.main(TZPlay.java:7)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.execute(Main.java:419)\r\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.run(Main.java:192)\r\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.main(Main.java:132)\r\n```\r\n\r\n * Java 17.06 correctly parses it without exception. \r\n * Moreover, Java 17.06 also parses `Europe/Kiev` without exception.\r\n\r\nEmpirically, based on the above example, it seems like newer versions of Java are able to parse older timezones after they were renamed.\r\n\r\n**Is this guaranteed to always be true, or will old timezones sometimes break on newer Java minor versions?**\r\n\r\nI searched the [ZoneId javadoc][2] for the terms &quot;previous&quot;, &quot;old&quot; and &quot;rename&quot; but did not find anything obvious.\r\n\r\n\r\n  [1]: https://mm.icann.org/pipermail/tz/2022-April/031376.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZoneId.html","title":"Is Java ZoneID guaranteed to parse previously existing timezones?","body":"<p>In late 2022, the timezone <code>Europe/Kiev</code> was <a href=\"https://mm.icann.org/pipermail/tz/2022-April/031376.html\" rel=\"nofollow noreferrer\">renamed</a> to <code>Europe/Kyiv</code> by IANA.</p>\n<p>Consider the following program:</p>\n<pre><code>import java.time.ZoneId;\n\npublic class TZPlay {\n  public static void main(String[] args) {\n    try {\n//      ZoneId.of(&quot;Europe/Kiev&quot;); // Works in Java 17.06 and Java 17.03\n//      ZoneId.of(&quot;Europe/Kyiv&quot;); // Works in Java 17.06 but not Java 17.03.\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>Observations:</p>\n<ul>\n<li>Java 17.03 throws the following exception when trying to parse <code>Europe/Kyiv</code>.</li>\n</ul>\n<pre><code>java.time.zone.ZoneRulesException: Unknown time-zone ID: Europe/Kyiv\n        at java.base/java.time.zone.ZoneRulesProvider.getProvider(ZoneRulesProvider.java:280)\n        at java.base/java.time.zone.ZoneRulesProvider.getRules(ZoneRulesProvider.java:235)\n        at java.base/java.time.ZoneRegion.ofId(ZoneRegion.java:121)\n        at java.base/java.time.ZoneId.of(ZoneId.java:410)\n        at java.base/java.time.ZoneId.of(ZoneId.java:358)\n        at TZPlay.main(TZPlay.java:7)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.execute(Main.java:419)\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.run(Main.java:192)\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.main(Main.java:132)\n</code></pre>\n<ul>\n<li>Java 17.06 correctly parses it without exception.</li>\n<li>Moreover, Java 17.06 also parses <code>Europe/Kiev</code> without exception.</li>\n</ul>\n<p>Empirically, based on the above example, it seems like newer versions of Java are able to parse older timezones after they were renamed.</p>\n<p><strong>Is this guaranteed to always be true, or will old timezones sometimes break on newer Java minor versions?</strong></p>\n<p>I searched the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZoneId.html\" rel=\"nofollow noreferrer\">ZoneId javadoc</a> for the terms &quot;previous&quot;, &quot;old&quot; and &quot;rename&quot; but did not find anything obvious.</p>\n"},{"tags":["java","object","math","methods"],"answers":[{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678037658,"creation_date":1678037658,"answer_id":75644123,"question_id":75642501,"body_markdown":"Why not make eight multi dimensional arrays representing each of the eight sides total of the two rhombus , each of the elements represents a pixel along the edge of the rhombus and stores an array of two elements being x position of pixel and y position of pixel.\r\nThe use one of the two to loop over all it&#39;s elements of each side and find if any pixel pair get an exact match of the other quadrilateral pixel pair.\r\nPersonally, I think you would be better drawing some test cases to see if you can figure probability first by checking the positions along x and along y of the quadrilaterals four points to be better able to choose which side array to work on testing first.","title":"Check If Two Rhombus Overlap In Java","body":"<p>Why not make eight multi dimensional arrays representing each of the eight sides total of the two rhombus , each of the elements represents a pixel along the edge of the rhombus and stores an array of two elements being x position of pixel and y position of pixel.\nThe use one of the two to loop over all it's elements of each side and find if any pixel pair get an exact match of the other quadrilateral pixel pair.\nPersonally, I think you would be better drawing some test cases to see if you can figure probability first by checking the positions along x and along y of the quadrilaterals four points to be better able to choose which side array to work on testing first.</p>\n"},{"tags":[],"owner":{"account_id":27831612,"reputation":11,"user_id":21249904,"display_name":"KEK LOL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678146947,"creation_date":1678146947,"answer_id":75656878,"question_id":75642501,"body_markdown":"    void overlaps(Rhombus r) {\r\n            int x1 = Math.min(this.p1, Math.min(this.p2, Math.min(this.p3, this.p4)));\r\n            int y1 = Math.min(this.p1, Math.min(this.p2, Math.min(this.p3, this.p4)));\r\n            int x2 = Math.max(this.p1, Math.max(this.p2, Math.max(this.p3, this.p4)));\r\n            int y2 = Math.max(this.p1, Math.max(this.p2, Math.max(this.p3, this.p4)));\r\n            int x3 = Math.min(r.p1, Math.min(r.p2, Math.min(r.p3, r.p4)));\r\n            int y3 = Math.min(r.p1, Math.min(r.p2, Math.min(r.p3, r.p4)));\r\n            int x4 = Math.max(r.p1, Math.max(r.p2, Math.max(r.p3, r.p4)));\r\n            int y4 = Math.max(r.p1, Math.max(r.p2, Math.max(r.p3, r.p4)));\r\n    \r\n            if (x1 &lt; x4 &amp;&amp; x2 &gt; x3 &amp;&amp; y1 &lt; y4 &amp;&amp; y2 &gt; y3) {\r\n                System.out.println(&quot;One rhombus intersects the other&quot;);\r\n            } else {\r\n                System.out.println(&quot;The two rhombuses do not intersect&quot;);\r\n            }\r\n        }","title":"Check If Two Rhombus Overlap In Java","body":"<pre><code>void overlaps(Rhombus r) {\n        int x1 = Math.min(this.p1, Math.min(this.p2, Math.min(this.p3, this.p4)));\n        int y1 = Math.min(this.p1, Math.min(this.p2, Math.min(this.p3, this.p4)));\n        int x2 = Math.max(this.p1, Math.max(this.p2, Math.max(this.p3, this.p4)));\n        int y2 = Math.max(this.p1, Math.max(this.p2, Math.max(this.p3, this.p4)));\n        int x3 = Math.min(r.p1, Math.min(r.p2, Math.min(r.p3, r.p4)));\n        int y3 = Math.min(r.p1, Math.min(r.p2, Math.min(r.p3, r.p4)));\n        int x4 = Math.max(r.p1, Math.max(r.p2, Math.max(r.p3, r.p4)));\n        int y4 = Math.max(r.p1, Math.max(r.p2, Math.max(r.p3, r.p4)));\n\n        if (x1 &lt; x4 &amp;&amp; x2 &gt; x3 &amp;&amp; y1 &lt; y4 &amp;&amp; y2 &gt; y3) {\n            System.out.println(&quot;One rhombus intersects the other&quot;);\n        } else {\n            System.out.println(&quot;The two rhombuses do not intersect&quot;);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":27831612,"reputation":11,"user_id":21249904,"display_name":"KEK LOL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75656878,"answer_count":2,"score":1,"last_activity_date":1678147073,"creation_date":1678022476,"question_id":75642501,"body_markdown":"I need to Check If Two Rhombus Overlap In Java, i dont understand how to do it properly \r\n\r\n\r\n    public class Rhombus {\r\n        int p1;\r\n        int p2;\r\n        int p3;\r\n        int p4;\r\n        Rhombus(int p1, int p2, int p3, int p4){\r\n            this.p1 = p1;\r\n            this.p2 = p2;\r\n            this.p3 = p3;\r\n            this.p4 = p4;\r\n        }\r\n        void overlaps(Rhombus r){\r\n            System.out.println(&quot;Checking if one rhombus intersects the second one:&quot;);\r\n            if (r.p1 == this.p1 || r.p1 == this.p2 || r.p1 == this.p3 || r.p1 == this.p4 || r.p2 == this.p1 || r.p2 == this.p2 || r.p2 == this.p3 || r.p2 == this.p4 || r.p3 == this.p1 || r.p3 == this.p2 || r.p3 == this.p3 || r.p3 == this.p4 || r.p4 == this.p1 || r.p4 == this.p2 || r.p4 == this.p3 || r.p4 == this.p4 ) System.out.println(&quot;true&quot;);\r\n            else System.out.println(&quot;false&quot;);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Rhombus rhombus1 = new Rhombus(3, 3, 3, 3);\r\n            Rhombus rhombus2 = new Rhombus(1, 5, 5, 5);\r\n            rhombus1.overlaps(rhombus2);\r\n        }\r\n    }\r\n\r\n\r\nI try this, but it doesnt work if one point cross another rhombus \r\n","title":"Check If Two Rhombus Overlap In Java","body":"<p>I need to Check If Two Rhombus Overlap In Java, i dont understand how to do it properly</p>\n<pre><code>public class Rhombus {\n    int p1;\n    int p2;\n    int p3;\n    int p4;\n    Rhombus(int p1, int p2, int p3, int p4){\n        this.p1 = p1;\n        this.p2 = p2;\n        this.p3 = p3;\n        this.p4 = p4;\n    }\n    void overlaps(Rhombus r){\n        System.out.println(&quot;Checking if one rhombus intersects the second one:&quot;);\n        if (r.p1 == this.p1 || r.p1 == this.p2 || r.p1 == this.p3 || r.p1 == this.p4 || r.p2 == this.p1 || r.p2 == this.p2 || r.p2 == this.p3 || r.p2 == this.p4 || r.p3 == this.p1 || r.p3 == this.p2 || r.p3 == this.p3 || r.p3 == this.p4 || r.p4 == this.p1 || r.p4 == this.p2 || r.p4 == this.p3 || r.p4 == this.p4 ) System.out.println(&quot;true&quot;);\n        else System.out.println(&quot;false&quot;);\n    }\n\n    public static void main(String[] args) {\n        Rhombus rhombus1 = new Rhombus(3, 3, 3, 3);\n        Rhombus rhombus2 = new Rhombus(1, 5, 5, 5);\n        rhombus1.overlaps(rhombus2);\n    }\n}\n</code></pre>\n<p>I try this, but it doesnt work if one point cross another rhombus</p>\n"},{"tags":["java","spring-boot","azure"],"answers":[{"comments":[{"owner":{"account_id":2703064,"reputation":35,"user_id":2333345,"display_name":"Lee Cottrell"},"score":1,"creation_date":1678146788,"post_id":75654291,"comment_id":133473785,"body_markdown":"Downgrading to Spring-Boot 2 worked. I did try changing the Azure cli version to 10, but ran into the same issues.","body":"Downgrading to Spring-Boot 2 worked. I did try changing the Azure cli version to 10, but ran into the same issues."}],"tags":[],"owner":{"account_id":13328605,"reputation":68,"user_id":9620766,"display_name":"random coder dude"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678125743,"creation_date":1678125743,"answer_id":75654291,"question_id":75654120,"body_markdown":"Try changing this in your pom.xml:\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\nTo this:\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\nSpring-Boot 3 does require Java 17, so you&#39;ll need to downgrade to Spring-Boot 2. If that&#39;s not an option, you&#39;ll keep the pom.xml the same and change the Azure cli version to 17.\r\n","title":"Why can I not publish Spring Boot Web Service to MS Azure?","body":"<p>Try changing this in your pom.xml:</p>\n<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>To this:</p>\n<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>Spring-Boot 3 does require Java 17, so you'll need to downgrade to Spring-Boot 2. If that's not an option, you'll keep the pom.xml the same and change the Azure cli version to 17.</p>\n"},{"tags":[],"owner":{"account_id":2703064,"reputation":35,"user_id":2333345,"display_name":"Lee Cottrell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678146936,"creation_date":1678146936,"answer_id":75656877,"question_id":75654120,"body_markdown":"Downgrading to Spring boot 2.7.10-snapshot worked. I was able to successfully transfer the web service from GitHub to Azure. \r\n\r\nI was able to successfully upgrade the Azure cli to java 17, but it did not allow the service to post.","title":"Why can I not publish Spring Boot Web Service to MS Azure?","body":"<p>Downgrading to Spring boot 2.7.10-snapshot worked. I was able to successfully transfer the web service from GitHub to Azure.</p>\n<p>I was able to successfully upgrade the Azure cli to java 17, but it did not allow the service to post.</p>\n"}],"owner":{"account_id":2703064,"reputation":35,"user_id":2333345,"display_name":"Lee Cottrell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75656877,"answer_count":2,"score":1,"last_activity_date":1678146936,"creation_date":1678124621,"question_id":75654120,"body_markdown":"My students and I are having problems posting a Java SpringBoot web service to my pay as you go Azure subscription. We are following microsoft&#39;s directions from their [learn.microsoft.com](https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?tabs=javase&amp;pivots=platform-windows-development-environment-maven) site. We keep receiving *invalid target release: 17*\r\n\r\nThis is my code &lt;https://github.com/leecottrellPTC/Azurepublish.git&gt;\r\nThis is MS&#39;s code &lt;https://github.com/spring-guides/gs-spring-boot&gt;\r\n\r\nThe version of Java in the Azure CLI is Java 11. I have tried rebuilding my project locally to Java versions 8, 11, and 17. Each time, it runs on my local servers. When I republish it to Azure, I make the proper version choices in the wizard. I have tried Linux and Windows OS, and several tiers of pay. Each results in the same error.\r\n\r\nThe MS Link offers four different ways to publish a web service. I have tried them all with the exception of Docker. I do not have that configured.\r\n\r\nI have run the *mvn package azure-webapp:deploy -e*, receiving a vomit of errors.\r\n\r\nI do not know what else to do.\r\n\r\n~~~\r\n Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project azurehotel: Fatal error compiling: error: invalid target release: 17 -\\&gt; \\[Help 1\\]\r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal    org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project azurehotel: Fatal error compiling\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke (Method.java:566)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.apache.maven.plugin.MojoExecutionException: Fatal error compiling\r\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1220)\r\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)\r\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke (Method.java:566)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.codehaus.plexus.compiler.CompilerException: error: invalid target release: 17\r\nat org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:197)\r\nat org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:182)\r\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1209)\r\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)\r\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke (Method.java:566)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: java.lang.IllegalArgumentException: error: invalid target release: 17\r\nat com.sun.tools.javac.main.Arguments.error (Arguments.java:907)\r\nat com.sun.tools.javac.main.Arguments.doProcessArgs (Arguments.java:383)\r\nat com.sun.tools.javac.main.Arguments.processArgs (Arguments.java:347)\r\nat com.sun.tools.javac.main.Arguments.init (Arguments.java:246)\r\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:185)\r\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:119)\r\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:68)\r\nat org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:135)\r\nat org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:182)\r\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1209)\r\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)\r\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke (Method.java:566)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n\\[ERROR\\]\r\n\\[ERROR\\] Re-run Maven using the -X switch to enable full debug logging.\r\n\\[ERROR\\]\r\n\\[ERROR\\] For more information about the errors and possible solutions, please read the following articles:\r\n\\[ERROR\\] \\[Help 1\\] &lt;/kbd&gt;&lt;kbd&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n~~~\r\n   ","title":"Why can I not publish Spring Boot Web Service to MS Azure?","body":"<p>My students and I are having problems posting a Java SpringBoot web service to my pay as you go Azure subscription. We are following microsoft's directions from their <a href=\"https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?tabs=javase&amp;pivots=platform-windows-development-environment-maven\" rel=\"nofollow noreferrer\">learn.microsoft.com</a> site. We keep receiving <em>invalid target release: 17</em></p>\n<p>This is my code <a href=\"https://github.com/leecottrellPTC/Azurepublish.git\" rel=\"nofollow noreferrer\">https://github.com/leecottrellPTC/Azurepublish.git</a>\nThis is MS's code <a href=\"https://github.com/spring-guides/gs-spring-boot\" rel=\"nofollow noreferrer\">https://github.com/spring-guides/gs-spring-boot</a></p>\n<p>The version of Java in the Azure CLI is Java 11. I have tried rebuilding my project locally to Java versions 8, 11, and 17. Each time, it runs on my local servers. When I republish it to Azure, I make the proper version choices in the wizard. I have tried Linux and Windows OS, and several tiers of pay. Each results in the same error.</p>\n<p>The MS Link offers four different ways to publish a web service. I have tried them all with the exception of Docker. I do not have that configured.</p>\n<p>I have run the <em>mvn package azure-webapp:deploy -e</em>, receiving a vomit of errors.</p>\n<p>I do not know what else to do.</p>\n<pre><code> Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project azurehotel: Fatal error compiling: error: invalid target release: 17 -\\&gt; \\[Help 1\\]\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal    org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project azurehotel: Fatal error compiling\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Fatal error compiling\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1220)\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.codehaus.plexus.compiler.CompilerException: error: invalid target release: 17\nat org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:197)\nat org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:182)\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1209)\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: java.lang.IllegalArgumentException: error: invalid target release: 17\nat com.sun.tools.javac.main.Arguments.error (Arguments.java:907)\nat com.sun.tools.javac.main.Arguments.doProcessArgs (Arguments.java:383)\nat com.sun.tools.javac.main.Arguments.processArgs (Arguments.java:347)\nat com.sun.tools.javac.main.Arguments.init (Arguments.java:246)\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:185)\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:119)\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:68)\nat org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:135)\nat org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:182)\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1209)\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n\\[ERROR\\]\n\\[ERROR\\] Re-run Maven using the -X switch to enable full debug logging.\n\\[ERROR\\]\n\\[ERROR\\] For more information about the errors and possible solutions, please read the following articles:\n\\[ERROR\\] \\[Help 1\\] &lt;/kbd&gt;&lt;kbd&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n"},{"tags":["java","android","kotlin","android-jetpack-compose"],"answers":[{"comments":[{"owner":{"account_id":7862760,"reputation":4624,"user_id":5942579,"accept_rate":74,"display_name":"Emmanuel Mtali"},"score":0,"creation_date":1660734956,"post_id":73386643,"comment_id":129601377,"body_markdown":"+1 Thanks, I will try using this approach and give you feedback. Do you have any project or sample open source project on GitHub that is using this approach?","body":"+1 Thanks, I will try using this approach and give you feedback. Do you have any project or sample open source project on GitHub that is using this approach?"},{"owner":{"account_id":25444915,"reputation":186,"user_id":19247254,"display_name":"ngalashev"},"score":0,"creation_date":1660736394,"post_id":73386643,"comment_id":129601915,"body_markdown":"@EmmanuelMtali Sorry, I don&#39;t have an open source sample. Perhaps, this documentation will also help you https://developer.android.com/jetpack/compose/navigation#nested-nav","body":"@EmmanuelMtali Sorry, I don&#39;t have an open source sample. Perhaps, this documentation will also help you <a href=\"https://developer.android.com/jetpack/compose/navigation#nested-nav\" rel=\"nofollow noreferrer\">developer.android.com/jetpack/compose/navigation#nested-nav</a>"},{"owner":{"account_id":5866991,"reputation":10236,"user_id":4620609,"accept_rate":100,"display_name":"Samuel Robert"},"score":0,"creation_date":1697293231,"post_id":73386643,"comment_id":136263083,"body_markdown":"Viewmodel must not know about navigation logic. This violates MVVM pattern. It becomes hard to unit test the viewmodel.","body":"Viewmodel must not know about navigation logic. This violates MVVM pattern. It becomes hard to unit test the viewmodel."}],"tags":[],"owner":{"account_id":25444915,"reputation":186,"user_id":19247254,"display_name":"ngalashev"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660731153,"creation_date":1660731153,"answer_id":73386643,"question_id":73363186,"body_markdown":"If i understand your question correctly I would do it this way:\r\n\r\n    @Composable\r\n    fun App(mainViewModel: MainViewModel) {\r\n        val navController = rememberNavController()\r\n\r\n        LaunchedEffect(Unit) {\r\n            mainViewModel.checkAuth(navController)\r\n        }\r\n        \r\n        NavHost(\r\n            navController = navController,\r\n            startDestination = RootNavigation.Home.route\r\n        ) {\r\n            \r\n            composable(RootNavigation.Home.route) {\r\n                SplashScreen()\r\n            }\r\n\r\n            loginGraph(navController)\r\n\r\n            workspaceGraph(navController)\r\n        }\r\n    }\r\n\r\nAt MainViewModel:\r\n\r\n    fun checkAuth(navController: NavHostController) {\r\n        viewModelScope.launch {\r\n            ...//your code\r\n            \r\n            if (resource.data == null)                            \r\n                navController.navigateAndReplaceStartRoute(RootNavigation.Login.route)\r\n            else navController.navigateAndReplaceStartRoute(RootNavigation.Workspace.route)\r\n\r\n            ...//your code\r\n        }\r\n    }\r\n\r\nDid I answer your question?","title":"Navigate by checking login state with jetpack compose (Conditional Nested Nav graphs)","body":"<p>If i understand your question correctly I would do it this way:</p>\n<pre><code>@Composable\nfun App(mainViewModel: MainViewModel) {\n    val navController = rememberNavController()\n\n    LaunchedEffect(Unit) {\n        mainViewModel.checkAuth(navController)\n    }\n    \n    NavHost(\n        navController = navController,\n        startDestination = RootNavigation.Home.route\n    ) {\n        \n        composable(RootNavigation.Home.route) {\n            SplashScreen()\n        }\n\n        loginGraph(navController)\n\n        workspaceGraph(navController)\n    }\n}\n</code></pre>\n<p>At MainViewModel:</p>\n<pre><code>fun checkAuth(navController: NavHostController) {\n    viewModelScope.launch {\n        ...//your code\n        \n        if (resource.data == null)                            \n            navController.navigateAndReplaceStartRoute(RootNavigation.Login.route)\n        else navController.navigateAndReplaceStartRoute(RootNavigation.Workspace.route)\n\n        ...//your code\n    }\n}\n</code></pre>\n<p>Did I answer your question?</p>\n"},{"tags":[],"owner":{"account_id":12601597,"reputation":12580,"user_id":9164141,"accept_rate":93,"display_name":"Gast&#243;n Saill&#233;n"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678146713,"creation_date":1678146713,"answer_id":75656865,"question_id":73363186,"body_markdown":"So, for me is easier doing it this way\r\n\r\n    @Composable\r\n    fun NavigationGraph(\r\n        navController: NavHostController\r\n    ) {\r\n    \r\n        val currentUser = Firebase.auth.currentUser\r\n        val startRoute = if(currentUser != null) NavigationScreens.HomeScreen else NavigationScreens.LoginScreen\r\n    \r\n        NavHost(navController = navController, startDestination = startRoute.route) { ... }\r\n\r\nSince `Firebase.auth` is a singleton that can be accessed from anywhere, you can check in your `NavGraph` before creating it if the user is not null, if so, there is a current logged in user , if there is a user logged in, just show home screen, else login.\r\n\r\nIf someone is interesed on what `NavigationScreens` is.\r\n\r\n    sealed class NavigationScreens(val route: String) {\r\n     object HomeScreen: NavigationScreens(&quot;home_screen&quot;)\r\n     object LoginScreen: NavigationScreens(&quot;login_screen&quot;)\r\n    }\r\n\r\nThe solution given from **@ngalashev** could potentially open the HomeScreen before the validation inside `mainViewModel.checkAuth(navController)` returns to navigate to the `LoginScreen`. Also it could add the HomeScreen to the backstack","title":"Navigate by checking login state with jetpack compose (Conditional Nested Nav graphs)","body":"<p>So, for me is easier doing it this way</p>\n<pre><code>@Composable\nfun NavigationGraph(\n    navController: NavHostController\n) {\n\n    val currentUser = Firebase.auth.currentUser\n    val startRoute = if(currentUser != null) NavigationScreens.HomeScreen else NavigationScreens.LoginScreen\n\n    NavHost(navController = navController, startDestination = startRoute.route) { ... }\n</code></pre>\n<p>Since <code>Firebase.auth</code> is a singleton that can be accessed from anywhere, you can check in your <code>NavGraph</code> before creating it if the user is not null, if so, there is a current logged in user , if there is a user logged in, just show home screen, else login.</p>\n<p>If someone is interesed on what <code>NavigationScreens</code> is.</p>\n<pre><code>sealed class NavigationScreens(val route: String) {\n object HomeScreen: NavigationScreens(&quot;home_screen&quot;)\n object LoginScreen: NavigationScreens(&quot;login_screen&quot;)\n}\n</code></pre>\n<p>The solution given from <strong>@ngalashev</strong> could potentially open the HomeScreen before the validation inside <code>mainViewModel.checkAuth(navController)</code> returns to navigate to the <code>LoginScreen</code>. Also it could add the HomeScreen to the backstack</p>\n"}],"owner":{"account_id":7862760,"reputation":4624,"user_id":5942579,"accept_rate":74,"display_name":"Emmanuel Mtali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1022,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1678146713,"creation_date":1660577513,"question_id":73363186,"body_markdown":"I am trying to implement a way to check authentication status from the room database before and navigate (Conditional navigation) \r\n\r\nThe requirement is as follows\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6PfBf.png\r\n\r\nI have a session manager with the following code\r\n\r\n        private val _sessionState = MutableStateFlow(SessionState.Loading)\r\n        val sessionState: StateFlow&lt;SessionState&gt; = _sessionState\r\n    \r\n        init {\r\n            coroutineScope.launch {\r\n                sessionRepo.getActiveSession()\r\n                    .collect { resource -&gt;\r\n                        _sessionState.value = when (resource) {\r\n                            is Resource.Success -&gt; {\r\n                                if (resource.data == null) {\r\n                                    SessionState.InActive\r\n                                } else {\r\n                                    SessionState.Active\r\n                                }\r\n                            }\r\n                            else -&gt; throw IllegalStateException(&quot;Failed to load session&quot;)\r\n                        }\r\n                    }\r\n            }\r\n        }\r\n\r\n\r\nHow can I check this with jetpack compose\r\n\r\n","title":"Navigate by checking login state with jetpack compose (Conditional Nested Nav graphs)","body":"<p>I am trying to implement a way to check authentication status from the room database before and navigate (Conditional navigation)</p>\n<p>The requirement is as follows</p>\n<p><a href=\"https://i.stack.imgur.com/6PfBf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6PfBf.png\" alt=\"enter image description here\" /></a></p>\n<p>I have a session manager with the following code</p>\n<pre><code>    private val _sessionState = MutableStateFlow(SessionState.Loading)\n    val sessionState: StateFlow&lt;SessionState&gt; = _sessionState\n\n    init {\n        coroutineScope.launch {\n            sessionRepo.getActiveSession()\n                .collect { resource -&gt;\n                    _sessionState.value = when (resource) {\n                        is Resource.Success -&gt; {\n                            if (resource.data == null) {\n                                SessionState.InActive\n                            } else {\n                                SessionState.Active\n                            }\n                        }\n                        else -&gt; throw IllegalStateException(&quot;Failed to load session&quot;)\n                    }\n                }\n        }\n    }\n</code></pre>\n<p>How can I check this with jetpack compose</p>\n"},{"tags":["java","spring","docker","grpc"],"answers":[{"tags":[],"owner":{"account_id":25649504,"reputation":144,"user_id":19417003,"display_name":"Larry Safran"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678146161,"creation_date":1678146161,"answer_id":75656812,"question_id":65527633,"body_markdown":"The existing logic only retries the dns lookup when refresh() is called after the timeout period.  Refresh will only be called as needed, such as the channel moving to state TRANSIENT_FALIURE or the reconnect attempts after that, so your original plan to set a relatively short cache.ttl was a good approach.","title":"GRPC Java caches old DNS entry and does not retry to get a new entry","body":"<p>The existing logic only retries the dns lookup when refresh() is called after the timeout period.  Refresh will only be called as needed, such as the channel moving to state TRANSIENT_FALIURE or the reconnect attempts after that, so your original plan to set a relatively short cache.ttl was a good approach.</p>\n"}],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":395,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75656812,"answer_count":1,"score":2,"last_activity_date":1678146161,"creation_date":1609481428,"question_id":65527633,"body_markdown":"Similar to https://stackoverflow.com/questions/64007975/java-grpc-invalidate-dns-cache but more specific to a Docker *development* environment where services can come up and down (since some stacks are pretty resource intensive so some are shutdown and brought up on an as needed basis).  Its easier to do `docker stack rm` and `docker stack deploy` for the parts that we need rather than creating scale up and down scripts for each stack.  In that situation when the services are recreated the VIP can change (I know I can just fix the IP on the network, but that would mean each stack has to know which ones are available which is something I&#39;d want to avoid).\r\n\r\nGiven that context, the DNS may point to an older address, so I use the `-Dnetworkaddress.cache.ttl=5` looking at the [grpc-java code](https://github.com/grpc/grpc-java/blob/f6c2d221e2b6c975c6cf465d68fe11ab12dabe55/core/src/main/java/io/grpc/internal/DnsNameResolver.java#L106) it appears that should be all I need to set so that it is consistent.  At least for 5 seconds (which is the TTL)\r\n\r\nBut let&#39;s say I want to make it performant and only retry when needed and only define the message channel once (since according to the instructions it is a very expensive operation.  I set things up as follows.  But I am getting occassional failures.  I don&#39;t reuse the stubs because it appears to cause problems in my first go.\r\n\r\n```java\r\n@Component\r\npublic class ClientProvider {\r\n  @Value(&quot;${srv.host}&quot;)\r\n  private String host;\r\n\r\n  @Value(&quot;${srv.port}&quot;)\r\n  private int port;\r\n\r\n  @Value(&quot;${srv.maxRetryAttempts:5}&quot;)\r\n  private int maxiRetryAttempts;\r\n\r\n  @Value(&quot;${srv.maxMessageSize:50000000}&quot;)\r\n  private int maxMessageSize;\r\n\r\n  private ManagedChannel channel;\r\n  @PostConstruct\r\n  public void initChannel() {\r\n    channel = ManagedChannelBuilder\r\n             .forAddress(host, port)\r\n             .usePlaintext()\r\n             .enableRetry()\r\n             .maxRetryAttempts(maxRetryAttempts)\r\n             .maxInboundMessageSize(maxMessageSize)\r\n             .build();\r\n  }\r\n\r\n  public MyBlockingStub blockingStub() {\r\n    return MyGrpc.newBlockingStub(channel);\r\n  }\r\n\r\n  public MyStub stub() {\r\n    return MyGrpc.newStub(channel);\r\n  }\r\n  \r\n  @PreDestroy\r\n  public void shutdownChannel() {\r\n    channel.shutdown();\r\n  }\r\n}\r\n```\r\n\r\nSo I got rid of the single channel and created channels everytime I needed a stub.  It seems to work but I don&#39;t think this is the right way of doing things especiaally since I am not cleaning up the channels after use.\r\n\r\n```java\r\n@Component\r\npublic class ClientProvider {\r\n  @Value(&quot;${srv.host}&quot;)\r\n  private String host;\r\n\r\n  @Value(&quot;${srv.port}&quot;)\r\n  private int port;\r\n\r\n  @Value(&quot;${srv.maxRetryAttempts:5}&quot;)\r\n  private int maxiRetryAttempts;\r\n\r\n  @Value(&quot;${srv.maxMessageSize:50000000}&quot;)\r\n  private int maxMessageSize;\r\n\r\n  public ManagedChannel channel() {\r\n    return ManagedChannelBuilder\r\n             .forAddress(host, port)\r\n             .usePlaintext()\r\n             .enableRetry()\r\n             .maxRetryAttempts(maxRetryAttempts)\r\n             .maxInboundMessageSize(maxMessageSize)\r\n             .build();\r\n  }\r\n\r\n  public MyBlockingStub blockingStub() {\r\n    return MyGrpc.newBlockingStub(channel());\r\n  }\r\n\r\n  public MyStub stub() {\r\n    return MyGrpc.newStub(channel());\r\n  }\r\n}\r\n```\r\n\r\nI am thinking it is just a matter of setting up the configuration correctly on the channel, but I am not sure if I am missing anything.","title":"GRPC Java caches old DNS entry and does not retry to get a new entry","body":"<p>Similar to <a href=\"https://stackoverflow.com/questions/64007975/java-grpc-invalidate-dns-cache\">Java Grpc: invalidate dns cache</a> but more specific to a Docker <em>development</em> environment where services can come up and down (since some stacks are pretty resource intensive so some are shutdown and brought up on an as needed basis).  Its easier to do <code>docker stack rm</code> and <code>docker stack deploy</code> for the parts that we need rather than creating scale up and down scripts for each stack.  In that situation when the services are recreated the VIP can change (I know I can just fix the IP on the network, but that would mean each stack has to know which ones are available which is something I'd want to avoid).</p>\n<p>Given that context, the DNS may point to an older address, so I use the <code>-Dnetworkaddress.cache.ttl=5</code> looking at the <a href=\"https://github.com/grpc/grpc-java/blob/f6c2d221e2b6c975c6cf465d68fe11ab12dabe55/core/src/main/java/io/grpc/internal/DnsNameResolver.java#L106\" rel=\"nofollow noreferrer\">grpc-java code</a> it appears that should be all I need to set so that it is consistent.  At least for 5 seconds (which is the TTL)</p>\n<p>But let's say I want to make it performant and only retry when needed and only define the message channel once (since according to the instructions it is a very expensive operation.  I set things up as follows.  But I am getting occassional failures.  I don't reuse the stubs because it appears to cause problems in my first go.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class ClientProvider {\n  @Value(&quot;${srv.host}&quot;)\n  private String host;\n\n  @Value(&quot;${srv.port}&quot;)\n  private int port;\n\n  @Value(&quot;${srv.maxRetryAttempts:5}&quot;)\n  private int maxiRetryAttempts;\n\n  @Value(&quot;${srv.maxMessageSize:50000000}&quot;)\n  private int maxMessageSize;\n\n  private ManagedChannel channel;\n  @PostConstruct\n  public void initChannel() {\n    channel = ManagedChannelBuilder\n             .forAddress(host, port)\n             .usePlaintext()\n             .enableRetry()\n             .maxRetryAttempts(maxRetryAttempts)\n             .maxInboundMessageSize(maxMessageSize)\n             .build();\n  }\n\n  public MyBlockingStub blockingStub() {\n    return MyGrpc.newBlockingStub(channel);\n  }\n\n  public MyStub stub() {\n    return MyGrpc.newStub(channel);\n  }\n  \n  @PreDestroy\n  public void shutdownChannel() {\n    channel.shutdown();\n  }\n}\n</code></pre>\n<p>So I got rid of the single channel and created channels everytime I needed a stub.  It seems to work but I don't think this is the right way of doing things especiaally since I am not cleaning up the channels after use.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class ClientProvider {\n  @Value(&quot;${srv.host}&quot;)\n  private String host;\n\n  @Value(&quot;${srv.port}&quot;)\n  private int port;\n\n  @Value(&quot;${srv.maxRetryAttempts:5}&quot;)\n  private int maxiRetryAttempts;\n\n  @Value(&quot;${srv.maxMessageSize:50000000}&quot;)\n  private int maxMessageSize;\n\n  public ManagedChannel channel() {\n    return ManagedChannelBuilder\n             .forAddress(host, port)\n             .usePlaintext()\n             .enableRetry()\n             .maxRetryAttempts(maxRetryAttempts)\n             .maxInboundMessageSize(maxMessageSize)\n             .build();\n  }\n\n  public MyBlockingStub blockingStub() {\n    return MyGrpc.newBlockingStub(channel());\n  }\n\n  public MyStub stub() {\n    return MyGrpc.newStub(channel());\n  }\n}\n</code></pre>\n<p>I am thinking it is just a matter of setting up the configuration correctly on the channel, but I am not sure if I am missing anything.</p>\n"},{"tags":["java","spring","spring-boot","javabeans","autowired"],"answers":[{"tags":[],"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677900600,"creation_date":1677899351,"answer_id":75633416,"question_id":75633154,"body_markdown":"In theory, providing it in a bean should work, but you should be sure to initialize its data in the bean.\r\n\r\n    @Bean\r\n    public List&lt;Student&gt; getStudents() {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        List&lt;Student&gt; people = restTemplate.exchange(&quot;https://some.url.com&quot;, ...other params);\r\n        return people;\r\n    }\r\n\r\nThis bean should be a singleton by default, so it should be the same list provided anywhere else a `List&lt;Student&gt;` is injected (either through constructor injection or with `@Autowired`)\r\n\r\nIf you are needing to use the RestTemplate in other places, you can make that a bean as well, which I believe youve already done, and inject it via constructor.\r\n\r\n    @Bean\r\n    public List&lt;Student&gt; getStudents(RestTemplate restTemplate) {\r\n        List&lt;Student&gt; people = restTemplate.exchange(&quot;https://some.url.com&quot;, ...other params);\r\n        return people;\r\n    }\r\n\r\nEdit: I did a bit more research and it seems to make the list accessible, you may need to use `@Resource` instead of `@Autowired` as suggested here\r\n[how to define a list bean in spring][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2416056/how-to-define-a-list-bean-in-spring","title":"How to share the ArrayList across spring boot","body":"<p>In theory, providing it in a bean should work, but you should be sure to initialize its data in the bean.</p>\n<pre><code>@Bean\npublic List&lt;Student&gt; getStudents() {\n    RestTemplate restTemplate = new RestTemplate();\n    List&lt;Student&gt; people = restTemplate.exchange(&quot;https://some.url.com&quot;, ...other params);\n    return people;\n}\n</code></pre>\n<p>This bean should be a singleton by default, so it should be the same list provided anywhere else a <code>List&lt;Student&gt;</code> is injected (either through constructor injection or with <code>@Autowired</code>)</p>\n<p>If you are needing to use the RestTemplate in other places, you can make that a bean as well, which I believe youve already done, and inject it via constructor.</p>\n<pre><code>@Bean\npublic List&lt;Student&gt; getStudents(RestTemplate restTemplate) {\n    List&lt;Student&gt; people = restTemplate.exchange(&quot;https://some.url.com&quot;, ...other params);\n    return people;\n}\n</code></pre>\n<p>Edit: I did a bit more research and it seems to make the list accessible, you may need to use <code>@Resource</code> instead of <code>@Autowired</code> as suggested here\n<a href=\"https://stackoverflow.com/questions/2416056/how-to-define-a-list-bean-in-spring\">how to define a list bean in spring</a></p>\n"},{"tags":[],"owner":{"account_id":139494,"reputation":804,"user_id":345130,"accept_rate":40,"display_name":"ILya Cyclone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678146015,"creation_date":1678146015,"answer_id":75656795,"question_id":75633154,"body_markdown":"Don&#39;t make a bean of `List&lt;Student&gt;`. Make a business class with a `public List&lt;Student&gt; getStudents()` method - this class should be a bean.","title":"How to share the ArrayList across spring boot","body":"<p>Don't make a bean of <code>List&lt;Student&gt;</code>. Make a business class with a <code>public List&lt;Student&gt; getStudents()</code> method - this class should be a bean.</p>\n"}],"owner":{"account_id":24725031,"reputation":79,"user_id":18613635,"display_name":"Gwenda Thomas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75633416,"answer_count":2,"score":0,"last_activity_date":1678146015,"creation_date":1677893894,"question_id":75633154,"body_markdown":"I have a java application that uses aws kinesis stream. \r\n\r\nIn the application, I get the student data in real time via kinesis stream and I have to make some action depending on the student id. \r\n\r\nThere is a list of students that I need to query from the database, and the each student from kinesis stream needs a checking if the student is in the list or not. \r\n\r\nHowever I would like to query the list of students to the database only once, because that is one of the requirements. \r\n\r\nOn top of that I would like to make the query as soon as the application starts; that way if the query fails we can also fail the application. In other words, if the query does not succeed the application should not run.\r\n\r\nThis is what I would like to do\r\n\r\n```groovy\r\n@SpringBootApplication\r\n@EnabledScheduling\r\n@EnableCaching\r\n@Configuration\r\nclass Application implements CommandLineRuner {\r\n\r\n  @Autowired\r\n  RestTemplate restTemplate\r\n\r\n  @Autowired\r\n  List&lt;Student&gt; students\r\n\r\n  static void main(String[] args) {\r\n    SpringApplication app = new SpringApplication(Application);\r\n    app.webApplicationType = WebApplicationType.NONE;\r\n    app.run(args)\r\n  }\r\n\r\n  @Overrde\r\n  void run(String... args) thows Exception {\r\n    try {\r\n      // make a request\r\n      List&lt;Student&gt; people = this.restTemplate.exchange(&quot;https://some.url.com&quot;, ...other params)\r\n      this.students = people\r\n\r\n      // running kcl worker\r\n      KclConsumer.kclWorker.run()\r\n    } catch (Exception ex) {\r\n      ....\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n```groovy\r\n@Service\r\nclass SomeService {\r\n\r\n  @Autowired\r\n  RestTemplate restTemplate\r\n\r\n  @Autowired\r\n  List&lt;Student&gt; students\r\n\r\n  void func(Student id) {\r\n    this.students.each {\r\n      if(id == it.id) {\r\n        println(&quot;found you&quot;)\r\n        return;\r\n      }\r\n    }\r\n    println(&quot;not found&quot;)\r\n  }\r\n}\r\n```\r\nI have tried creating the bean and share across the project as following but it does not seem to work...\r\n\r\n```groovy\r\nclass SomeConfig {\r\n  @Bean\r\n  List&lt;Student&gt; students() {\r\n    return new ArrayList&lt;&gt;();\r\n  }\r\n}\r\n```\r\n\r\nI am guess how I am using bean is wrong. \r\nCan someone help me with my code please? \r\nThank you in advance","title":"How to share the ArrayList across spring boot","body":"<p>I have a java application that uses aws kinesis stream.</p>\n<p>In the application, I get the student data in real time via kinesis stream and I have to make some action depending on the student id.</p>\n<p>There is a list of students that I need to query from the database, and the each student from kinesis stream needs a checking if the student is in the list or not.</p>\n<p>However I would like to query the list of students to the database only once, because that is one of the requirements.</p>\n<p>On top of that I would like to make the query as soon as the application starts; that way if the query fails we can also fail the application. In other words, if the query does not succeed the application should not run.</p>\n<p>This is what I would like to do</p>\n<pre><code>@SpringBootApplication\n@EnabledScheduling\n@EnableCaching\n@Configuration\nclass Application implements CommandLineRuner {\n\n  @Autowired\n  RestTemplate restTemplate\n\n  @Autowired\n  List&lt;Student&gt; students\n\n  static void main(String[] args) {\n    SpringApplication app = new SpringApplication(Application);\n    app.webApplicationType = WebApplicationType.NONE;\n    app.run(args)\n  }\n\n  @Overrde\n  void run(String... args) thows Exception {\n    try {\n      // make a request\n      List&lt;Student&gt; people = this.restTemplate.exchange(&quot;https://some.url.com&quot;, ...other params)\n      this.students = people\n\n      // running kcl worker\n      KclConsumer.kclWorker.run()\n    } catch (Exception ex) {\n      ....\n    }\n  }\n}\n</code></pre>\n<pre><code>@Service\nclass SomeService {\n\n  @Autowired\n  RestTemplate restTemplate\n\n  @Autowired\n  List&lt;Student&gt; students\n\n  void func(Student id) {\n    this.students.each {\n      if(id == it.id) {\n        println(&quot;found you&quot;)\n        return;\n      }\n    }\n    println(&quot;not found&quot;)\n  }\n}\n</code></pre>\n<p>I have tried creating the bean and share across the project as following but it does not seem to work...</p>\n<pre><code>class SomeConfig {\n  @Bean\n  List&lt;Student&gt; students() {\n    return new ArrayList&lt;&gt;();\n  }\n}\n</code></pre>\n<p>I am guess how I am using bean is wrong.\nCan someone help me with my code please?\nThank you in advance</p>\n"},{"tags":["java","multithreading","spring-boot","threadpool"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1678146310,"post_id":75656777,"comment_id":133473716,"body_markdown":"Where is the error? I don&#39;t see a cast.","body":"Where is the error? I don&#39;t see a cast."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1678146921,"post_id":75656777,"comment_id":133473809,"body_markdown":"Possibly some code (e.g., some decorator/proxy?) is invoking a method on your `FutureImpl` (e.g., `thenAccept`) and that&#39;s returning a plain `CompletableFuture`. If that&#39;s the case, then try overriding [`newIncompleteFuture()`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/CompletableFuture.html#newIncompleteFuture()) as well and see if that fixes the error.","body":"Possibly some code (e.g., some decorator/proxy?) is invoking a method on your <code>FutureImpl</code> (e.g., <code>thenAccept</code>) and that&#39;s returning a plain <code>CompletableFuture</code>. If that&#39;s the case, then try overriding <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/CompletableFuture.html#newIncompleteFuture()\" rel=\"nofollow noreferrer\"><code>newIncompleteFuture()</code></a> as well and see if that fixes the error."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1678146954,"post_id":75656777,"comment_id":133473817,"body_markdown":"But note your override of `cancel` is not doing what you think. `Thread.currentThread().interrupt()` is interrupting the thread which called `cancel`, not the thread that&#39;s executing the future&#39;s action.","body":"But note your override of <code>cancel</code> is not doing what you think. <code>Thread.currentThread().interrupt()</code> is interrupting the thread which called <code>cancel</code>, not the thread that&#39;s executing the future&#39;s action."},{"owner":{"account_id":18807214,"reputation":45,"user_id":13716265,"display_name":"Thorvas"},"score":0,"creation_date":1678181685,"post_id":75656777,"comment_id":133479411,"body_markdown":"Then how may I interrupt thread that is executing future&#39;s action? I don&#39;t want to double up threads&#39; number","body":"Then how may I interrupt thread that is executing future&#39;s action? I don&#39;t want to double up threads&#39; number"}],"owner":{"account_id":18807214,"reputation":45,"user_id":13716265,"display_name":"Thorvas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678145707,"creation_date":1678145707,"question_id":75656777,"body_markdown":"I need to override ```cancel()``` method in ```CompletableFuture&lt;T&gt;``` class because I need to interrupt thread after timeout specified in ```get()```. Normal ```CompletableFuture&lt;T&gt;``` only throws ```TimeoutException``` after timeout, but threads are still stuck with some infinite task. If there is other solution, please, correct me but currently I am trying to instantiate ```FutureImpl&lt;T&gt;```. However, I receive an error with message:\r\n```\r\nclass java.util.concurrent.CompletableFuture cannot be cast to class FutureImpl (java.util.concurrent.CompletableFuture is in module java.base of loader &#39;bootstrap&#39;; FutureImpl is in unnamed module of loader &#39;app&#39;)\r\n```\r\n\r\nI extend ```CompletableFuture&lt;T&gt;``` like that:\r\n```\r\npublic class FutureImpl&lt;T&gt; extends CompletableFuture&lt;T&gt; {\r\n\r\n    @Override\r\n    public boolean cancel(boolean mayInterruptIfRunning) {\r\n        boolean result = super.cancel(mayInterruptIfRunning);\r\n        if (mayInterruptIfRunning &amp;&amp; result) {\r\n            System.out.println(&quot;Really cancelled&quot;);\r\n            Thread.currentThread().interrupt();\r\n        }\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\n\r\nI have snippet of code (it implements method in interface)\r\n\r\n```\r\n@Override\r\n    @Async(&quot;Executor&quot;)\r\n    public FutureImpl&lt;String&gt; process() {\r\n        FutureImpl&lt;String&gt; newFuture = new FutureImpl&lt;String&gt;();\r\n        System.out.println(newFuture.getClass());\r\n\r\n        try {\r\n            //Do something long\r\n            newFuture.complete(&quot;RESULT&quot;);\r\n\r\n        } catch (Exception exc){\r\n            newFuture.completeExceptionally(exc);\r\n        }\r\n        return newFuture;\r\n    }\r\n}\r\n```\r\n\r\nAnd I also have this snippet of code:\r\n```\r\n    @Inject\r\n    private WorkerService workerService;\r\n\r\n    //An example PostMapping for service test in Postman\r\n    @GetMapping\r\n    @Async(&quot;TARWS-Executor&quot;)\r\n    public void testService() {\r\n        FutureImpl&lt;String&gt; future = workerService.process();\r\n\r\n        try {\r\n            future.get(5, TimeUnit.SECONDS);\r\n        } catch (InterruptedException | ExecutionException | TimeoutException exc) {\r\n            future.cancel(true);\r\n        }\r\n\r\n    }\r\n\r\n```\r\n","title":"Custom CompletableFuture class - incompatible casting despite having correct return","body":"<p>I need to override <code>cancel()</code> method in <code>CompletableFuture&lt;T&gt;</code> class because I need to interrupt thread after timeout specified in <code>get()</code>. Normal <code>CompletableFuture&lt;T&gt;</code> only throws <code>TimeoutException</code> after timeout, but threads are still stuck with some infinite task. If there is other solution, please, correct me but currently I am trying to instantiate <code>FutureImpl&lt;T&gt;</code>. However, I receive an error with message:</p>\n<pre><code>class java.util.concurrent.CompletableFuture cannot be cast to class FutureImpl (java.util.concurrent.CompletableFuture is in module java.base of loader 'bootstrap'; FutureImpl is in unnamed module of loader 'app')\n</code></pre>\n<p>I extend <code>CompletableFuture&lt;T&gt;</code> like that:</p>\n<pre><code>public class FutureImpl&lt;T&gt; extends CompletableFuture&lt;T&gt; {\n\n    @Override\n    public boolean cancel(boolean mayInterruptIfRunning) {\n        boolean result = super.cancel(mayInterruptIfRunning);\n        if (mayInterruptIfRunning &amp;&amp; result) {\n            System.out.println(&quot;Really cancelled&quot;);\n            Thread.currentThread().interrupt();\n        }\n        return result;\n    }\n}\n</code></pre>\n<p>I have snippet of code (it implements method in interface)</p>\n<pre><code>@Override\n    @Async(&quot;Executor&quot;)\n    public FutureImpl&lt;String&gt; process() {\n        FutureImpl&lt;String&gt; newFuture = new FutureImpl&lt;String&gt;();\n        System.out.println(newFuture.getClass());\n\n        try {\n            //Do something long\n            newFuture.complete(&quot;RESULT&quot;);\n\n        } catch (Exception exc){\n            newFuture.completeExceptionally(exc);\n        }\n        return newFuture;\n    }\n}\n</code></pre>\n<p>And I also have this snippet of code:</p>\n<pre><code>    @Inject\n    private WorkerService workerService;\n\n    //An example PostMapping for service test in Postman\n    @GetMapping\n    @Async(&quot;TARWS-Executor&quot;)\n    public void testService() {\n        FutureImpl&lt;String&gt; future = workerService.process();\n\n        try {\n            future.get(5, TimeUnit.SECONDS);\n        } catch (InterruptedException | ExecutionException | TimeoutException exc) {\n            future.cancel(true);\n        }\n\n    }\n\n</code></pre>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678144836,"creation_date":1678144836,"answer_id":75656705,"question_id":75656381,"body_markdown":"You&#39;d need to write your own loop to do this. The TCP request will fail to connect if the broker is down. The config `retries` for a producer is for handling _transient_ errors, on sending data itself, not establishing broker connections. \r\n\r\nAlso, note that `2147483647` is the default retries value, so there is no reason to explicitly set it to a lower value in this case. ","title":"Kafka retry property not working as expected","body":"<p>You'd need to write your own loop to do this. The TCP request will fail to connect if the broker is down. The config <code>retries</code> for a producer is for handling <em>transient</em> errors, on sending data itself, not establishing broker connections.</p>\n<p>Also, note that <code>2147483647</code> is the default retries value, so there is no reason to explicitly set it to a lower value in this case.</p>\n"}],"owner":{"account_id":27836545,"reputation":37,"user_id":21253875,"display_name":"Inessa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75656705,"answer_count":1,"score":0,"last_activity_date":1678144836,"creation_date":1678141347,"question_id":75656381,"body_markdown":"I have setup up Kafka using version 2.8.1 with the basic configuration as 1 Broker 1 Topic and 1 Partition.\r\nI use the following code to send\r\n\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        //1. Create producer configuration information\r\n        Properties properties = new Properties();\r\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;localhost:19092&quot;);\r\n        properties.put(&quot;max.block.ms&quot;,&quot;5000&quot;);\r\n        properties.put(&quot;retries&quot;,&quot;3&quot;);\r\n        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG,&quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG,&quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n\r\n        //2. Create producer object\r\n        KafkaProducer&lt;String,String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties);\r\n\r\n        final CountDownLatch countDownLatch = new CountDownLatch(1);\r\n       \r\n        //3. Send data\r\n            producer.send(new ProducerRecord&lt;String, String&gt;(&quot;test&quot;,&quot;CallBack--1&quot;), new Callback() {\r\n                public void onCompletion(RecordMetadata metadata, Exception exception) {\r\n                    if (exception == null){\r\n                        System.out.println(metadata.partition()+&quot;==&quot;+metadata.offset());\r\n                        countDownLatch.countDown();\r\n                    }else {\r\n                        System.out.println(&quot;Error!!!&quot;);\r\n                        exception.printStackTrace();\r\n                    }\r\n                }\r\n            });\r\n\r\n        countDownLatch.await(60, TimeUnit.SECONDS);\r\n\r\n\r\n        //4. Close resources\r\n        producer.close();\r\n    }\r\n\r\n\r\n\r\nBoth my Broker &amp; Zookeeper are down and I expect `Error!!` to appear in the log 3 times, but nothing happens after the error `org.apache.kafka.common.errors.TimeoutException: Topic test not present in metadata after 5000 ms`.How can I set up repeats when the broker is unavailable?","title":"Kafka retry property not working as expected","body":"<p>I have setup up Kafka using version 2.8.1 with the basic configuration as 1 Broker 1 Topic and 1 Partition.\nI use the following code to send</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    //1. Create producer configuration information\n    Properties properties = new Properties();\n    properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;localhost:19092&quot;);\n    properties.put(&quot;max.block.ms&quot;,&quot;5000&quot;);\n    properties.put(&quot;retries&quot;,&quot;3&quot;);\n    properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG,&quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n    properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG,&quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n\n    //2. Create producer object\n    KafkaProducer&lt;String,String&gt; producer = new KafkaProducer&lt;String, String&gt;(properties);\n\n    final CountDownLatch countDownLatch = new CountDownLatch(1);\n   \n    //3. Send data\n        producer.send(new ProducerRecord&lt;String, String&gt;(&quot;test&quot;,&quot;CallBack--1&quot;), new Callback() {\n            public void onCompletion(RecordMetadata metadata, Exception exception) {\n                if (exception == null){\n                    System.out.println(metadata.partition()+&quot;==&quot;+metadata.offset());\n                    countDownLatch.countDown();\n                }else {\n                    System.out.println(&quot;Error!!!&quot;);\n                    exception.printStackTrace();\n                }\n            }\n        });\n\n    countDownLatch.await(60, TimeUnit.SECONDS);\n\n\n    //4. Close resources\n    producer.close();\n}\n</code></pre>\n<p>Both my Broker &amp; Zookeeper are down and I expect <code>Error!!</code> to appear in the log 3 times, but nothing happens after the error <code>org.apache.kafka.common.errors.TimeoutException: Topic test not present in metadata after 5000 ms</code>.How can I set up repeats when the broker is unavailable?</p>\n"},{"tags":["java","asynchronous","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678144688,"creation_date":1678144688,"answer_id":75656693,"question_id":75656643,"body_markdown":"The first send request is blocking to create the topic. \r\n\r\nAlso, your `after` should be within the lamdba callback body. ","title":"How kafka producer works in asynchronous mode","body":"<p>The first send request is blocking to create the topic.</p>\n<p>Also, your <code>after</code> should be within the lamdba callback body.</p>\n"}],"owner":{"account_id":18476555,"reputation":517,"user_id":13459947,"display_name":"Violetta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75656693,"answer_count":1,"score":0,"last_activity_date":1678144688,"creation_date":1678144085,"question_id":75656643,"body_markdown":"I have a simple code to send a message\r\n```\r\n    private static void send(KafkaProducer&lt;String, String&gt; producer) {\r\n        System.out.println(Thread.currentThread()+&quot; before&quot;);\r\n        producer.send(new ProducerRecord&lt;String, String&gt;(&quot;test&quot;, &quot;test&quot;), (metadata, exception) -&gt; {\r\n            if (exception == null) {\r\n                System.out.println(metadata.partition());\r\n            } else {\r\n                exception.printStackTrace();\r\n            }\r\n        });\r\n        System.out.println(Thread.currentThread()+&quot; after&quot;);\r\n    }\r\n```\r\nAnd kafka config\r\n```\r\n        Properties properties = new Properties();\r\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9091&quot;);\r\n        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n\r\n        KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(properties);\r\n```\r\nMy kafka is shutdown.\r\n\r\nI expected if I call send twice\r\n```\r\n        send(producer);\r\n        send(producer);\r\n```\r\n, I will get two `Thread before` records one after the other since we are working in asynchronous mode\r\n```\r\nThread before\r\nThread before\r\n\r\n```\r\nBut I see the start of processing the second record only after the error of the first\r\n```\r\nThread[main,5,main] before\r\norg.apache.kafka.common.errors.TimeoutException: Topic test not present in metadata after 60000 ms.\r\nThread[main,5,main] after\r\nThread[main,5,main] before\r\n```\r\n\r\nI think I misunderstood kafka&#39;s asynchronous mode","title":"How kafka producer works in asynchronous mode","body":"<p>I have a simple code to send a message</p>\n<pre><code>    private static void send(KafkaProducer&lt;String, String&gt; producer) {\n        System.out.println(Thread.currentThread()+&quot; before&quot;);\n        producer.send(new ProducerRecord&lt;String, String&gt;(&quot;test&quot;, &quot;test&quot;), (metadata, exception) -&gt; {\n            if (exception == null) {\n                System.out.println(metadata.partition());\n            } else {\n                exception.printStackTrace();\n            }\n        });\n        System.out.println(Thread.currentThread()+&quot; after&quot;);\n    }\n</code></pre>\n<p>And kafka config</p>\n<pre><code>        Properties properties = new Properties();\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9091&quot;);\n        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n\n        KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(properties);\n</code></pre>\n<p>My kafka is shutdown.</p>\n<p>I expected if I call send twice</p>\n<pre><code>        send(producer);\n        send(producer);\n</code></pre>\n<p>, I will get two <code>Thread before</code> records one after the other since we are working in asynchronous mode</p>\n<pre><code>Thread before\nThread before\n\n</code></pre>\n<p>But I see the start of processing the second record only after the error of the first</p>\n<pre><code>Thread[main,5,main] before\norg.apache.kafka.common.errors.TimeoutException: Topic test not present in metadata after 60000 ms.\nThread[main,5,main] after\nThread[main,5,main] before\n</code></pre>\n<p>I think I misunderstood kafka's asynchronous mode</p>\n"},{"tags":["java","servlets","deployment","netbeans","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":27951943,"reputation":1,"user_id":21345560,"display_name":"Kandarp Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678144659,"creation_date":1678144659,"answer_id":75656690,"question_id":75154273,"body_markdown":"Here the problem is with the User Profile Folder&#39;s Name.\r\nThe space in that folder&#39;s name (Ayush Singh) creates a problem.\r\nI&#39;m not sure that is windows error or netbeans error but try running netbeans into other user account with name which does not have space or other special characters in between like Ayush.\r\nThis was the error with me as well and I tried above steps and it worked.","title":"Netbeans fails to deploy web application on tomcat","body":"<p>Here the problem is with the User Profile Folder's Name.\nThe space in that folder's name (Ayush Singh) creates a problem.\nI'm not sure that is windows error or netbeans error but try running netbeans into other user account with name which does not have space or other special characters in between like Ayush.\nThis was the error with me as well and I tried above steps and it worked.</p>\n"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678144659,"creation_date":1674010381,"question_id":75154273,"body_markdown":"I am using **NetBeans IDE** for building Servlet Applications. When I build and try to deploy on Tomcat I get the following errors-\r\n```\r\nIn-place deployment at D:\\SpringBootProjects\\Servlets\\urlrewritingsample\\build\\web\r\nDeployment is in progress...\r\ndeploy?config=file%3A%2FC%3A%2FUsers%2FAyush%2520Singh%2FAppData%2FLocal%2FTemp%2Fcontext1073696000555366189.xml&amp;path=/urlrewritingsample\r\nFAIL - Failed to deploy application at context path [/urlrewritingsample]\r\nD:\\SpringBootProjects\\Servlets\\urlrewritingsample\\nbproject\\build-impl.xml:1030: The module has not been deployed.\r\nSee the server log for details.\r\nBUILD FAILED (total time: 0 seconds)\r\n``` \r\n\r\nTomcat log messages-\r\n```\r\n18-Jan-2023 08:19:54.047 SEVERE [http-nio-8080-exec-6] org.apache.catalina.startup.ExpandWar.copy Error copying [C:\\Users\\Ayush%20Singh\\AppData\\Local\\Temp\\context125052041248512568.xml] to [C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\conf\\Catalina\\localhost\\urlrewritingsample.xml]\r\n\tjava.io.FileNotFoundException: C:\\Users\\Ayush%20Singh\\AppData\\Local\\Temp\\context125052041248512568.xml (The system cannot find the path specified)\r\n\t\tat java.base/java.io.FileInputStream.open0(Native Method)\r\n\t\tat java.base/java.io.FileInputStream.open(FileInputStream.java:216)\r\n\t\tat java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157)\r\n\t\tat org.apache.catalina.startup.ExpandWar.copy(ExpandWar.java:269)\r\n\t\tat org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:1006)\r\n\t\tat org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:357)\r\n\t\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:670)\r\n\t\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\t\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\t\tat org.apache.catalina.filters.HttpHeaderSecurityFilter.doFilter(HttpHeaderSecurityFilter.java:126)\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\t\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\r\n\t\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\t\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:660)\r\n\t\tat org.apache.catalina.valves.RequestFilterValve.process(RequestFilterValve.java:378)\r\n\t\tat org.apache.catalina.valves.RemoteAddrValve.invoke(RemoteAddrValve.java:56)\r\n\t\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\t\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\t\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\t\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\t\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\t\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\t\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)\r\n\t\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784)\r\n\t\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\nCan somebody please explain the reason for this error and how to resolve it?","title":"Netbeans fails to deploy web application on tomcat","body":"<p>I am using <strong>NetBeans IDE</strong> for building Servlet Applications. When I build and try to deploy on Tomcat I get the following errors-</p>\n<pre><code>In-place deployment at D:\\SpringBootProjects\\Servlets\\urlrewritingsample\\build\\web\nDeployment is in progress...\ndeploy?config=file%3A%2FC%3A%2FUsers%2FAyush%2520Singh%2FAppData%2FLocal%2FTemp%2Fcontext1073696000555366189.xml&amp;path=/urlrewritingsample\nFAIL - Failed to deploy application at context path [/urlrewritingsample]\nD:\\SpringBootProjects\\Servlets\\urlrewritingsample\\nbproject\\build-impl.xml:1030: The module has not been deployed.\nSee the server log for details.\nBUILD FAILED (total time: 0 seconds)\n</code></pre>\n<p>Tomcat log messages-</p>\n<pre><code>18-Jan-2023 08:19:54.047 SEVERE [http-nio-8080-exec-6] org.apache.catalina.startup.ExpandWar.copy Error copying [C:\\Users\\Ayush%20Singh\\AppData\\Local\\Temp\\context125052041248512568.xml] to [C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\conf\\Catalina\\localhost\\urlrewritingsample.xml]\n    java.io.FileNotFoundException: C:\\Users\\Ayush%20Singh\\AppData\\Local\\Temp\\context125052041248512568.xml (The system cannot find the path specified)\n        at java.base/java.io.FileInputStream.open0(Native Method)\n        at java.base/java.io.FileInputStream.open(FileInputStream.java:216)\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157)\n        at org.apache.catalina.startup.ExpandWar.copy(ExpandWar.java:269)\n        at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:1006)\n        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:357)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.apache.catalina.filters.HttpHeaderSecurityFilter.doFilter(HttpHeaderSecurityFilter.java:126)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:660)\n        at org.apache.catalina.valves.RequestFilterValve.process(RequestFilterValve.java:378)\n        at org.apache.catalina.valves.RemoteAddrValve.invoke(RemoteAddrValve.java:56)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n        at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>Can somebody please explain the reason for this error and how to resolve it?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":2702906,"reputation":22668,"user_id":2333222,"display_name":"SubOptimal"},"score":0,"creation_date":1429704196,"post_id":29796651,"comment_id":47721980,"body_markdown":"Maybe this [Spring documentation](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/scheduling.html#scheduling-annotation-support) could help to solve your problem.","body":"Maybe this <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/scheduling.html#scheduling-annotation-support\" rel=\"nofollow noreferrer\">Spring documentation</a> could help to solve your problem."}],"answers":[{"comments":[{"owner":{"account_id":60584,"reputation":9058,"user_id":180904,"accept_rate":83,"display_name":"Ashika Umanga Umagiliya"},"score":8,"creation_date":1492577350,"post_id":35017579,"comment_id":74028442,"body_markdown":"is this possible to have different thead-pool for different @Scheduled annotation ?","body":"is this possible to have different thead-pool for different @Scheduled annotation ?"},{"owner":{"account_id":3682492,"reputation":81,"user_id":3067129,"display_name":"Siva Atta"},"score":2,"creation_date":1501446342,"post_id":35017579,"comment_id":77768940,"body_markdown":"different ThreadPoolTaskScheduler s can be created and use threadPoolTaskScheduler.schedule methods.","body":"different ThreadPoolTaskScheduler s can be created and use threadPoolTaskScheduler.schedule methods."},{"owner":{"account_id":1028549,"reputation":10245,"user_id":1037316,"accept_rate":86,"display_name":"G. Demecki"},"score":0,"creation_date":1511527072,"post_id":35017579,"comment_id":81901452,"body_markdown":"@AshikaUmangaUmagiliya No, it&#39;s not possible AFAIK. @Scheduled will always use the default task scheduler (you can look at the `ScheduledAnnotationBeanPostProcessor`). To be able to schedule tasks to different thread pools, just create another pools with built-in Java `java.util.concurrent.Executors`.","body":"@AshikaUmangaUmagiliya No, it&#39;s not possible AFAIK. @Scheduled will always use the default task scheduler (you can look at the <code>ScheduledAnnotationBeanPostProcessor</code>). To be able to schedule tasks to different thread pools, just create another pools with built-in Java <code>java.util.concurrent.Executors</code>."},{"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"score":0,"creation_date":1645788327,"post_id":35017579,"comment_id":125969130,"body_markdown":"This methods created 100 thread even previous thread are stopped, is there any way to set a maximum nr higher but keep the running thread lower?","body":"This methods created 100 thread even previous thread are stopped, is there any way to set a maximum nr higher but keep the running thread lower?"}],"tags":[],"owner":{"account_id":7713866,"reputation":1037,"user_id":5842306,"display_name":"Arie Z."},"comment_count":4,"down_vote_count":0,"up_vote_count":92,"is_accepted":false,"score":92,"last_activity_date":1511530675,"creation_date":1453822300,"answer_id":35017579,"question_id":29796651,"body_markdown":"Yes, all `@Scheduled` methods share a single thread by default.\r\nIt is possible to override this behavior by defining a `@Configuration` such as this:\r\n\r\n    @Configuration\r\n    public class SchedulingConfigurerConfiguration implements SchedulingConfigurer {\r\n\r\n        @Override\r\n        public void configureTasks(ScheduledTaskRegistrar taskRegistrar) {\r\n            ThreadPoolTaskScheduler taskScheduler = new ThreadPoolTaskScheduler();\r\n            taskScheduler.setPoolSize(100);\r\n            taskScheduler.initialize();\r\n            taskRegistrar.setTaskScheduler(taskScheduler);\r\n        }\r\n    }\r\n\r\nThis example ensures that all `@Scheduled` methods share a thread pool of size 100.","title":"What is the default scheduler pool size in spring-boot?","body":"<p>Yes, all <code>@Scheduled</code> methods share a single thread by default.\nIt is possible to override this behavior by defining a <code>@Configuration</code> such as this:</p>\n\n<pre><code>@Configuration\npublic class SchedulingConfigurerConfiguration implements SchedulingConfigurer {\n\n    @Override\n    public void configureTasks(ScheduledTaskRegistrar taskRegistrar) {\n        ThreadPoolTaskScheduler taskScheduler = new ThreadPoolTaskScheduler();\n        taskScheduler.setPoolSize(100);\n        taskScheduler.initialize();\n        taskRegistrar.setTaskScheduler(taskScheduler);\n    }\n}\n</code></pre>\n\n<p>This example ensures that all <code>@Scheduled</code> methods share a thread pool of size 100.</p>\n"},{"comments":[{"owner":{"account_id":104003,"reputation":933,"user_id":278279,"accept_rate":96,"display_name":"Sergey"},"score":0,"creation_date":1587122851,"post_id":58063399,"comment_id":108390817,"body_markdown":"doesn work if you enable it in the same class with @EnableScheduling","body":"doesn work if you enable it in the same class with @EnableScheduling"}],"tags":[],"owner":{"account_id":3041527,"reputation":1728,"user_id":2578409,"display_name":"Bruce"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569244745,"creation_date":1569244745,"answer_id":58063399,"question_id":29796651,"body_markdown":"a very simple way to do this:\r\n\r\n```java\r\n@Configuration\r\npublic class ScheduleConfig {\r\n  ScheduleConfig(ThreadPoolTaskScheduler threadPoolTaskScheduler) {\r\n    threadPoolTaskScheduler.setPoolSize(10);\r\n  }\r\n}\r\n```","title":"What is the default scheduler pool size in spring-boot?","body":"<p>a very simple way to do this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class ScheduleConfig {\n  ScheduleConfig(ThreadPoolTaskScheduler threadPoolTaskScheduler) {\n    threadPoolTaskScheduler.setPoolSize(10);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12863622,"reputation":2586,"user_id":9304616,"display_name":"Lebecca"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1577368343,"creation_date":1577368343,"answer_id":59489421,"question_id":29796651,"body_markdown":"The default scheduler pool size in spring-boot is **only one**.\r\n\r\nIn `org.springframework.scheduling.config.ScheduledTaskRegistrar`:\r\n\r\n```java\r\n\t/**\r\n\t * Schedule all registered tasks against the underlying\r\n\t * {@linkplain #setTaskScheduler(TaskScheduler) task scheduler}.\r\n\t */\r\n\t@SuppressWarnings(&quot;deprecation&quot;)\r\n\tprotected void scheduleTasks() {\r\n\t\tif (this.taskScheduler == null) {\r\n\t\t\tthis.localExecutor = Executors.newSingleThreadScheduledExecutor();\r\n\t\t\tthis.taskScheduler = new ConcurrentTaskScheduler(this.localExecutor);\r\n\t\t}\r\n        ...\r\n    }\r\n\r\n```","title":"What is the default scheduler pool size in spring-boot?","body":"<p>The default scheduler pool size in spring-boot is <strong>only one</strong>.</p>\n\n<p>In <code>org.springframework.scheduling.config.ScheduledTaskRegistrar</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    /**\n     * Schedule all registered tasks against the underlying\n     * {@linkplain #setTaskScheduler(TaskScheduler) task scheduler}.\n     */\n    @SuppressWarnings(\"deprecation\")\n    protected void scheduleTasks() {\n        if (this.taskScheduler == null) {\n            this.localExecutor = Executors.newSingleThreadScheduledExecutor();\n            this.taskScheduler = new ConcurrentTaskScheduler(this.localExecutor);\n        }\n        ...\n    }\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4095196,"reputation":1305,"user_id":3362191,"accept_rate":70,"display_name":"Taugenichts"},"score":4,"creation_date":1618074056,"post_id":59559914,"comment_id":118494473,"body_markdown":"I was having trouble finding the documentation for this property at first, so here&#39;s a link to it for others who want to confirm this is correct: https://www.docs4dev.com/docs/en/spring-boot/2.1.1.RELEASE/reference/boot-features-task-execution-scheduling.html","body":"I was having trouble finding the documentation for this property at first, so here&#39;s a link to it for others who want to confirm this is correct: <a href=\"https://www.docs4dev.com/docs/en/spring-boot/2.1.1.RELEASE/reference/boot-features-task-execution-scheduling.html\" rel=\"nofollow noreferrer\">docs4dev.com/docs/en/spring-boot/2.1.1.RELEASE/reference/&hellip;</a>"},{"owner":{"account_id":222726,"reputation":3846,"user_id":481528,"accept_rate":67,"display_name":"selalerer"},"score":3,"creation_date":1622539792,"post_id":59559914,"comment_id":119814860,"body_markdown":"Official docs:\nhttps://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.task-execution-and-scheduling","body":"Official docs: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.task-execution-and-scheduling\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":7704295,"reputation":359,"user_id":5835694,"display_name":"Loc Truong"},"score":0,"creation_date":1624952693,"post_id":59559914,"comment_id":120490726,"body_markdown":"This solution is more elegant, as we can change config without redeploying the application.","body":"This solution is more elegant, as we can change config without redeploying the application."},{"owner":{"account_id":116723,"reputation":30387,"user_id":305973,"accept_rate":67,"display_name":"robinst"},"score":4,"creation_date":1633083947,"post_id":59559914,"comment_id":122671576,"body_markdown":"Note that if you or any of your dependencies define a `SchedulingConfigurer` bean, the `spring.task.scheduling.pool.size` will *not* be used anymore -- because `TaskSchedulingAutoConfiguration` has a `@ConditionalOnMissingBean({ SchedulingConfigurer.class, ...`","body":"Note that if you or any of your dependencies define a <code>SchedulingConfigurer</code> bean, the <code>spring.task.scheduling.pool.size</code> will <i>not</i> be used anymore -- because <code>TaskSchedulingAutoConfiguration</code> has a <code>@ConditionalOnMissingBean({ SchedulingConfigurer.class, ...</code>"}],"tags":[],"owner":{"account_id":8660948,"reputation":1200,"user_id":6483409,"display_name":"robothy"},"comment_count":4,"down_vote_count":0,"up_vote_count":78,"is_accepted":false,"score":78,"last_activity_date":1678143161,"creation_date":1577951129,"answer_id":59559914,"question_id":29796651,"body_markdown":"The default pool size is 1, and you can set the pool size in `application.properties` since springboot2.1.0 via changing the value of `spring.task.scheduling.pool.size`.\r\n\r\n```\r\nspring.task.scheduling.pool.size=20\r\n```\r\nThe same task will be executed in serialized when the trigger period is shorter than the execution duration. And Spring Boot will execute different tasks in parallel with a maximum of 20 threads.\r\n","title":"What is the default scheduler pool size in spring-boot?","body":"<p>The default pool size is 1, and you can set the pool size in <code>application.properties</code> since springboot2.1.0 via changing the value of <code>spring.task.scheduling.pool.size</code>.</p>\n<pre><code>spring.task.scheduling.pool.size=20\n</code></pre>\n<p>The same task will be executed in serialized when the trigger period is shorter than the execution duration. And Spring Boot will execute different tasks in parallel with a maximum of 20 threads.</p>\n"},{"tags":[],"owner":{"account_id":202467,"reputation":9985,"user_id":449553,"accept_rate":54,"display_name":"msangel"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1604282389,"creation_date":1604282389,"answer_id":64638904,"question_id":29796651,"body_markdown":"Using built-in capabilities and with anotated spring configuration this will be like that:\r\n\r\n```java\r\n    @Bean\r\n    public TaskScheduler taskScheduler() {\r\n        return new ConcurrentTaskScheduler(new ScheduledThreadPoolExecutor(20));\r\n    }\r\n```","title":"What is the default scheduler pool size in spring-boot?","body":"<p>Using built-in capabilities and with anotated spring configuration this will be like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public TaskScheduler taskScheduler() {\n        return new ConcurrentTaskScheduler(new ScheduledThreadPoolExecutor(20));\n    }\n</code></pre>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70030,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"answer_count":5,"score":82,"last_activity_date":1678143161,"creation_date":1429703420,"question_id":29796651,"body_markdown":"I&#39;m using `spring-boot` and `@Scheduled` annotation to execute some tasks.\r\n\r\nHow can I find out what the default pool size of scheduled tasks is by default in spring-boot?\r\n\r\nReason: the following class does not execute the jobs in parallel, but one after the other. Maybe only a single thread executor is configured by default?\r\n\r\n    @Service\r\n    public class ZipFileTesterAsync {\r\n    \r\n        @Scheduled(fixedDelay = 60000, initialDelay = 500)\r\n    \tpublic void run() throws Exception {\r\n        \tSystem.out.println(&quot;import 1&quot;);\r\n    \t    TimeUnit.MINUTES.sleep(1);\r\n    \t    System.out.println(&quot;import 1 finished&quot;);\r\n        }\r\n        \r\n        @Scheduled(fixedDelay = 60000, initialDelay = 1000)\r\n    \tpublic void run2() throws Exception {\r\n        \tSystem.out.println(&quot;import 2&quot;);\r\n    \t    TimeUnit.MINUTES.sleep(1);\r\n        }\r\n    }\r\n\r\nResult: the 2nd job is executed after the first finished.\r\n","title":"What is the default scheduler pool size in spring-boot?","body":"<p>I'm using <code>spring-boot</code> and <code>@Scheduled</code> annotation to execute some tasks.</p>\n\n<p>How can I find out what the default pool size of scheduled tasks is by default in spring-boot?</p>\n\n<p>Reason: the following class does not execute the jobs in parallel, but one after the other. Maybe only a single thread executor is configured by default?</p>\n\n<pre><code>@Service\npublic class ZipFileTesterAsync {\n\n    @Scheduled(fixedDelay = 60000, initialDelay = 500)\n    public void run() throws Exception {\n        System.out.println(\"import 1\");\n        TimeUnit.MINUTES.sleep(1);\n        System.out.println(\"import 1 finished\");\n    }\n\n    @Scheduled(fixedDelay = 60000, initialDelay = 1000)\n    public void run2() throws Exception {\n        System.out.println(\"import 2\");\n        TimeUnit.MINUTES.sleep(1);\n    }\n}\n</code></pre>\n\n<p>Result: the 2nd job is executed after the first finished.</p>\n"},{"tags":["java","image","javafx","jdbc","h2"],"answers":[{"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1678147491,"post_id":75656159,"comment_id":133473913,"body_markdown":"One thing to note is that `ImageIO.write( awtBufferedImage , &quot;jpg&quot; , outputStream );` is a lossy conversion.  So each time you save the image,  it loses some fidelity.  For most apps, where you just save the image once, it won&#39;t be an issue.  But for an image editing app, where you might load and save the same image with small modifications multiple times, you might want to use a lossless format, e.g. png.","body":"One thing to note is that <code>ImageIO.write( awtBufferedImage , &quot;jpg&quot; , outputStream );</code> is a lossy conversion.  So each time you save the image,  it loses some fidelity.  For most apps, where you just save the image once, it won&#39;t be an issue.  But for an image editing app, where you might load and save the same image with small modifications multiple times, you might want to use a lossless format, e.g. png."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1678148346,"post_id":75656159,"comment_id":133474058,"body_markdown":"JavaFX does have it&#39;s own [imageio](https://github.com/openjdk/jfx/tree/86b854dc367fb32743810716da5583f7d59208f8/modules/javafx.graphics/src/main/java/com/sun/javafx/iio) implementation, parts of which (jpeg loading) are [native code](https://github.com/openjdk/jfx/tree/master/modules/javafx.graphics/src/main/native-iio/libjpeg), but the interfaces only support loading not writing and the only public interface is the Image class (everything else is private implementation),","body":"JavaFX does have it&#39;s own <a href=\"https://github.com/openjdk/jfx/tree/86b854dc367fb32743810716da5583f7d59208f8/modules/javafx.graphics/src/main/java/com/sun/javafx/iio\" rel=\"nofollow noreferrer\">imageio</a> implementation, parts of which (jpeg loading) are <a href=\"https://github.com/openjdk/jfx/tree/master/modules/javafx.graphics/src/main/native-iio/libjpeg\" rel=\"nofollow noreferrer\">native code</a>, but the interfaces only support loading not writing and the only public interface is the Image class (everything else is private implementation),"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1678148409,"post_id":75656159,"comment_id":133474074,"body_markdown":"So the `javax.imageio.ImageIO` solution you used is the only realistic solution I know of.  Unless you just save the image byte buffer retrived from a PixelReader or you encode those bytes using some other third party image library.","body":"So the <code>javax.imageio.ImageIO</code> solution you used is the only realistic solution I know of.  Unless you just save the image byte buffer retrived from a PixelReader or you encode those bytes using some other third party image library."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678142230,"creation_date":1678139448,"answer_id":75656159,"question_id":75656158,"body_markdown":"# Example app\r\n\r\nWhile I am no expert on JavaFX/OpenJFX, nor am I an expert on image encoding, I was able to cobble together this crude but effective little app to demonstrate:\r\n\r\n 1. Loading an image from a local file.\r\n 2. Displaying that image in an [`ImageView`][1] field in JavaFX.\r\n 3. Writing that image content to a field in an [H2][2] database.\r\n 4. Showing a list of IDs tracking each saved image. (IDs are [UUID][3]s.)\r\n 5. Retrieving a selected image from database, and displaying in JavaFX.\r\n\r\n[![screenshot of example app showing images displayed while reading and writing to database][4]][4]\r\n\r\nI found various chunks of code for encoding/decoding image data. I do not know what chunks may be old-fashioned or outmoded. All I know is that I got them to work.\r\n\r\nSome used classes from the [AWT][5] and [Swing][6] frameworks bundled with Java. But be aware that this example JavaFX app is [modularized][7], so you must add elements to your `module-info.java` file to access those classes.\r\n\r\nIn this example, the H2 database is configured to be an [in-memory database][8]. This means the stored data is *not* written to storage. When your app ends, the database and all its rows disappear, poof &#128168;.\r\n\r\nThis app was written in Java 19 with OpenJFX 19. \r\n\r\nI starting this app by creating a project using the *JavaFX* template built into the *New Project* dialog box of the [IntelliJ][9] [IDE][10].\r\n\r\nThe code for encoding the image data is found in the two `transform` methods.\r\n\r\nThe `transformImageIntoInputStream` method takes a JavaFX image object, uses Swing &amp; AWT to create an AWT buffered image (not to be confused with JavaFX image). That buffered image is then converted to an array of `byte`, from which we get an `InputStream`. The input stream can be passed to the JDBC method [`PreparedStatement :: setBlob`][11] to store a [BLOB][12] in the database.\r\n\r\n```java\r\n    @SuppressWarnings ( &quot;UnnecessaryLocalVariable&quot; )\r\n    private InputStream transformImageIntoInputStream ( final Image image )\r\n    {\r\n        BufferedImage awtBufferedImage = SwingFXUtils.fromFXImage( image , null );\r\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n        try\r\n        {\r\n            ImageIO.write( awtBufferedImage , &quot;jpg&quot; , outputStream );\r\n            byte[] res = outputStream.toByteArray();\r\n            InputStream inputStream = new ByteArrayInputStream( res );\r\n            return inputStream;\r\n        }\r\n        catch ( IOException e ) { e.printStackTrace(); }\r\n        throw new IllegalStateException( &quot;Should not reach this point in method `transformImageIntoInputStream`.&quot; );\r\n    }\r\n```\r\n\r\nTo retrieve from the database, we call [`ResultSet :: getBlob`][13] to produce a [`java.sql.Blob`][14] object. We use [`javax.imageio.ImageIO`][15] to read a binary stream obtained from that `Blob` object we retrieved. That produces another AWT buffered image (again, not to be confused with a JavaFX image). We then make use of Swing again to produce a JavaFX image from that AWT image.\r\n\r\n```java\r\n    private Image transformBlobIntoImage ( final Blob blob )\r\n    {\r\n        try\r\n        {\r\n            BufferedImage awtBufferedImage = ImageIO.read( blob.getBinaryStream() );\r\n            Image image = SwingFXUtils.toFXImage( awtBufferedImage , null );\r\n            return image;\r\n        }\r\n        catch ( IOException e ) { throw new RuntimeException( e ); }\r\n        catch ( SQLException e ) { throw new RuntimeException( e ); }\r\n    }\r\n```\r\n\r\nAs noted above, I am no expert on image handling. This sure seems a roundabout way to go to get image data encoded/decoded. And I am surprised to have found only approaches using AWT and Swing rather than straight JavaFX. If anyone knows better approaches, please do post!\r\n\r\n## Source Code\r\n\r\nHere is the entire Java code for the app, in a single file.\r\n\r\n```java\r\n/*\r\n By Basil Bourque.  http://www.Basil.work/\r\n\r\n This code is a response to this Question on Stack Overflow:\r\n &gt; insert an image to a database with javafx\r\n https://stackoverflow.com/q/75632865/642706\r\n\r\n This code was cobbled together quickly, as a starting point\r\n for further learning. Not meant for production use.\r\n Caveat: I an not an expert in JavaFX nor in image encoding.\r\n Use at your own risk.\r\n\r\n This demo app opens a window with five items, running left to right:\r\n  A button to load JPEG files from your local storage.\r\n  An `ImageView` field to show the image you loaded. Defaults to the Java mascot &quot;Duke&quot;, loaded over the internet.\r\n  A button to save the loaded image to an in-memory database using the H2 Database Engine (written in pure Java).\r\n  A list of the UUIDs that each identify an image stored in the database.\r\n  Another `ImageView` field to show the image retrieved from the database per the UUID selected in the list.\r\n*/\r\npackage work.basil.example.fximage;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.beans.value.ObservableValue;\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ObservableList;\r\nimport javafx.embed.swing.SwingFXUtils;\r\nimport javafx.event.ActionEvent;\r\nimport javafx.geometry.Insets;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.ListView;\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.HBox;\r\nimport javafx.stage.FileChooser;\r\nimport javafx.stage.Stage;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport javax.sql.DataSource;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.*;\r\nimport java.sql.*;\r\nimport java.util.Objects;\r\nimport java.util.UUID;\r\n\r\n@SuppressWarnings ( &quot;SqlNoDataSourceInspection&quot; )\r\npublic class App extends Application\r\n{\r\n    @Override\r\n    public void start ( final Stage stage )\r\n    {\r\n        // Widgets  ---------------------------------------\r\n        Button loadFromDesktopButton = new Button( &quot;Open JPEG file&quot; );\r\n\r\n        String url = &quot;https://www.oracle.com/a/ocom/img/rc24-duke-java-mascot.jpg&quot;;  // Arbitrary example image.\r\n        Image duke = new Image( url );\r\n        ImageView desktopImageView = new ImageView();\r\n        desktopImageView.setImage( duke );\r\n\r\n        desktopImageView.setFitWidth( 300 );\r\n        desktopImageView.setPreserveRatio( true );\r\n        desktopImageView.setSmooth( true );\r\n        desktopImageView.setCache( true );\r\n\r\n        Button storeInDatabaseButton = new Button( &quot;Store in database&quot; );\r\n\r\n        ListView &lt; UUID &gt; listView = new ListView &lt;&gt;();\r\n        listView.setPrefWidth( 300 );\r\n        ObservableList &lt; UUID &gt; ids = FXCollections.observableArrayList();\r\n        listView.setItems( ids );\r\n\r\n        ImageView databaseImageView = new ImageView();\r\n        databaseImageView.setFitWidth( 300 );\r\n        databaseImageView.setPreserveRatio( true );\r\n        databaseImageView.setSmooth( true );\r\n        databaseImageView.setCache( true );\r\n\r\n        // Behavior  --------------------------------------\r\n        DataSource dataSource = this.configureDataSource();\r\n        this.configureDatabase( dataSource );\r\n\r\n        loadFromDesktopButton.setOnAction(\r\n                ( ActionEvent event ) -&gt; this.loadImageFromLocalStorage( stage , desktopImageView )\r\n        );\r\n        storeInDatabaseButton.setOnAction(\r\n                ( ActionEvent event ) -&gt; {\r\n                    Image image = desktopImageView.getImage();\r\n                    UUID id = this.storeImageInDatabase( image , dataSource );\r\n                    ids.add( id );  // Add a list item for the image we just stored in database.\r\n                    listView.getSelectionModel().select( id ); // Select the newly added list item.\r\n                }\r\n        );\r\n\r\n        listView.getSelectionModel().selectedItemProperty().addListener(\r\n                ( ObservableValue &lt; ? extends UUID &gt; observableValue , UUID oldValue , UUID newValue ) -&gt; {\r\n                    Image image = this.fetchImageFromDatabase( newValue , dataSource );\r\n                    databaseImageView.setImage( image );\r\n                }\r\n        );\r\n\r\n        // Layout  --------------------------------------\r\n        stage.setTitle( &quot;Image To Database&quot; );\r\n        HBox root = new HBox();\r\n        root.setPadding( new Insets( 15 , 12 , 15 , 12 ) );\r\n        root.setSpacing( 10 );\r\n        root.setStyle( &quot;-fx-background-color: Grey;&quot; );\r\n\r\n        // Arrange  --------------------------------------\r\n        root.getChildren().add( loadFromDesktopButton );\r\n        root.getChildren().add( desktopImageView );\r\n        root.getChildren().add( storeInDatabaseButton );\r\n        root.getChildren().add( listView );\r\n        root.getChildren().add( databaseImageView );\r\n\r\n        Scene scene = new Scene( root , 1_250 , 300 );\r\n        stage.setScene( scene );\r\n        stage.show();\r\n    }\r\n\r\n\r\n    // Subroutines  --------------------------------------\r\n    private void loadImageFromLocalStorage ( final Stage stage , final ImageView imageView )\r\n    {\r\n        FileChooser fileChooser = new FileChooser();\r\n        fileChooser.setTitle( &quot;Open JPEG file&quot; );\r\n        File file = fileChooser.showOpenDialog( stage );\r\n        if ( file != null )\r\n        {\r\n            System.out.println( file );\r\n            Image image = new Image( file.toURI().toString() );\r\n            imageView.setImage( image );\r\n        }\r\n    }\r\n\r\n    private DataSource configureDataSource ( )\r\n    {\r\n        org.h2.jdbcx.JdbcDataSource ds = new org.h2.jdbcx.JdbcDataSource();  // Implementation of `DataSource` bundled with H2. You may choose to use some other implementation.\r\n        ds.setURL( &quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;&quot; );\r\n        ds.setUser( &quot;scott&quot; );\r\n        ds.setPassword( &quot;tiger&quot; );\r\n        ds.setDescription( &quot;An example database for storing an image.&quot; );\r\n        return ds;\r\n    }\r\n\r\n    private void configureDatabase ( final DataSource dataSource )\r\n    {\r\n        // Create table.\r\n        String sql =\r\n                &quot;&quot;&quot;\r\n                CREATE TABLE IF NOT EXISTS image_\r\n                (\r\n                    id_ uuid NOT NULL ,\r\n                    CONSTRAINT image_pkey_ PRIMARY KEY ( id_ ) ,\r\n                    row_created_ TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP() ,\r\n                    content_ BLOB\r\n                )\r\n                ;\r\n                &quot;&quot;&quot;;\r\n        try (\r\n                Connection conn = dataSource.getConnection() ;\r\n                Statement stmt = conn.createStatement()\r\n        )\r\n        {\r\n            System.out.println( &quot;INFO - Running `configureDatabase` method.&quot; );\r\n            stmt.executeUpdate( sql );\r\n        }\r\n        catch ( SQLException e ) { e.printStackTrace(); }\r\n    }\r\n\r\n\r\n    private UUID storeImageInDatabase ( final Image image , final DataSource dataSource )\r\n    {\r\n        InputStream inputStream = this.transformImageIntoInputStream( Objects.requireNonNull( image ) );\r\n\r\n        // Write to database\r\n        String sql =\r\n                &quot;&quot;&quot;\r\n                INSERT INTO image_ ( id_ , content_ )\r\n                VALUES ( ? , ? )\r\n                ;\r\n                &quot;&quot;&quot;;\r\n        try\r\n                (\r\n                        Connection conn = dataSource.getConnection() ;\r\n                        PreparedStatement preparedStatement = conn.prepareStatement( sql )\r\n                )\r\n        {\r\n            UUID id = UUID.randomUUID(); // In real work, we would retrieve the value generated by the database rather the app.\r\n            preparedStatement.setObject( 1 , id );\r\n            preparedStatement.setBlob( 2 , inputStream );\r\n            int rowCount = preparedStatement.executeUpdate();\r\n            if ( rowCount != 1 ) { throw new IllegalStateException( &quot;SQL insert failed to affect any rows.&quot; ); }\r\n            return id;\r\n        }\r\n        catch ( SQLException e ) { e.printStackTrace(); }\r\n        throw new IllegalStateException( &quot;Should never have reached this point in `storeImageInDatabase` method. &quot; );\r\n    }\r\n\r\n    private Image fetchImageFromDatabase ( final UUID id , final DataSource dataSource )\r\n    {\r\n        byte[] bytes = null;\r\n        String sql =\r\n                &quot;&quot;&quot;\r\n                SELECT *\r\n                FROM image_\r\n                WHERE id_ = ?\r\n                ;\r\n                &quot;&quot;&quot;;\r\n        try\r\n                (\r\n                        Connection conn = dataSource.getConnection() ;\r\n                        PreparedStatement preparedStatement = conn.prepareStatement( sql )\r\n                )\r\n        {\r\n            System.out.println( &quot;DEBUG id = &quot; + id );\r\n            preparedStatement.setObject( 1 , id );\r\n            try (\r\n                    ResultSet resultSet = preparedStatement.executeQuery() ;\r\n            )\r\n            {\r\n                if ( resultSet.next() )\r\n                {\r\n                    System.out.println( &quot;DEBUG resultSet = &quot; + resultSet );\r\n                    Blob blob = resultSet.getBlob( &quot;content_&quot; );\r\n                    System.out.println( &quot;DEBUG blob = &quot; + blob );\r\n                    Image image = this.transformBlobIntoImage( blob );\r\n                    return image;\r\n                }\r\n                else { throw new IllegalStateException( &quot;Failed to find any rows for id: &quot; + id ); }\r\n            }\r\n        }\r\n        catch ( SQLException e ) { e.printStackTrace(); }\r\n        throw new IllegalStateException( &quot;Should never have reached this point in `storeImageInDatabase` method. &quot; );\r\n    }\r\n\r\n\r\n    @SuppressWarnings ( &quot;UnnecessaryLocalVariable&quot; )\r\n    private InputStream transformImageIntoInputStream ( final Image image )\r\n    {\r\n        BufferedImage awtBufferedImage = SwingFXUtils.fromFXImage( image , null );\r\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n        try\r\n        {\r\n            ImageIO.write( awtBufferedImage , &quot;jpg&quot; , outputStream );\r\n            byte[] res = outputStream.toByteArray();\r\n            InputStream inputStream = new ByteArrayInputStream( res );\r\n            return inputStream;\r\n        }\r\n        catch ( IOException e ) { e.printStackTrace(); }\r\n        throw new IllegalStateException( &quot;Should not reach this point in method `transformImageIntoInputStream`.&quot; );\r\n    }\r\n\r\n    private Image transformBlobIntoImage ( final Blob blob )\r\n    {\r\n        try\r\n        {\r\n            BufferedImage awtBufferedImage = ImageIO.read( blob.getBinaryStream() );\r\n            Image image = SwingFXUtils.toFXImage( awtBufferedImage , null );\r\n            return image;\r\n        }\r\n        catch ( IOException e ) { throw new RuntimeException( e ); }\r\n        catch ( SQLException e ) { throw new RuntimeException( e ); }\r\n    }\r\n\r\n    public static void main ( final String[] args )\r\n    {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\nHere is the `module-info.java` file.\r\n\r\n```java\r\nmodule work.basil.example.fximage {\r\n    requires javafx.controls;  // JavaFX/OpenJFX API.\r\n\r\n    requires java.desktop;     // Needed for classes in AWT that convert image to octets.\r\n    requires javafx.swing;     // Needed for `javafx.embed.swing.SwingFXUtils` class to convert image to octets.\r\n\r\n    requires java.sql;         // JDBC API.\r\n    requires java.naming;      // Java Naming and Directory Interface (JNDI) API. Needed for `DataSource` in JDBC.\r\n    requires com.h2database;   // H2 Database Engine.\r\n\r\n    exports work.basil.example.fximage;\r\n}\r\n```\r\n\r\nAnd my [Apache Maven][16] [POM][17] file.\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns = &quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation = &quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;work.basil.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;FxImageToDb&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;FxImage&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-controls --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;19.0.2.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-swing --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-swing&lt;/artifactId&gt;\r\n            &lt;version&gt;19.0.2.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/com.h2database/h2 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.214&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.10.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;19&lt;/source&gt;\r\n                    &lt;target&gt;19&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;work.basil.example.fximage/work.basil.example.fximage.App&lt;/mainClass&gt;\r\n                            &lt;launcher&gt;app&lt;/launcher&gt;\r\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\r\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\r\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n## Resources\r\n\r\n[*Convert Blob to JPG and update blob*](https://stackoverflow.com/q/27846062/642706)\r\n\r\n[*Java BLOB to image file*](https://stackoverflow.com/q/50427495/642706)\r\n\r\n[*Auto-generate lambda expression as argument in IntelliJ*](https://stackoverflow.com/q/49469666/642706)\r\n\r\n[*JavaFX select item in ListView*](https://stackoverflow.com/q/11088612/642706)\r\n\r\n[*Using JavaFX UI Controls &#160;11 List View*](https://docs.oracle.com/javafx/2/ui_controls/list-view.htm)\r\n\r\n[*Using JavaFX UI Controls  26 File Chooser*](https://docs.oracle.com/javafx/2/ui_controls/file-chooser.htm)\r\n\r\n[*How can I show an image using the ImageView component in javafx and fxml?*](https://stackoverflow.com/q/22710053/642706)\r\n\r\nH2 Database Engine documentation for [`BLOB`](http://h2database.com/html/datatypes.html#binary_large_object_type) type and for [discussion of the Large Object][18] types.\r\n\r\nAWT &amp; Swing classes: [`SwingFXUtils`](https://openjfx.io/javadoc/19/javafx.swing/javafx/embed/swing/SwingFXUtils.html) \r\n\r\n[*How to convert a JavaFX ImageView to InputStream*](https://stackoverflow.com/q/49335128/642706)\r\n\r\n[*Saving an image in MySQL from Java*](https://stackoverflow.com/q/15035883/642706)\r\n\r\n[*How to save an image from HTML to a DATABASE using JAVA*](https://stackoverflow.com/q/50783126/642706)\r\n\r\n[*Storing Image in Data Base Using Java in Binary Format*](https://stackoverflow.com/q/21500339/642706)\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/image/ImageView.html\r\n  [2]: https://en.wikipedia.org/wiki/H2_(DBMS)\r\n  [3]: https://en.wikipedia.org/wiki/Universally_unique_identifier\r\n  [4]: https://i.stack.imgur.com/80iZw.jpg\r\n  [5]: https://en.wikipedia.org/wiki/Abstract_Window_Toolkit\r\n  [6]: https://en.wikipedia.org/wiki/Swing_(Java)\r\n  [7]: https://en.wikipedia.org/wiki/Java_Platform_Module_System\r\n  [8]: https://en.wikipedia.org/wiki/In-memory_database\r\n  [9]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n  [10]: https://en.wikipedia.org/wiki/Integrated_development_environment\r\n  [11]: https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.io.InputStream)\r\n  [12]: https://en.wikipedia.org/wiki/Binary_large_object\r\n  [13]: https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/ResultSet.html#getBlob(java.lang.String)\r\n  [14]: https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/Blob.html\r\n  [15]: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/imageio/ImageIO.html\r\n  [16]: https://en.wikipedia.org/wiki/Apache_Maven\r\n  [17]: https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\r\n  [18]: http://h2database.com/html/advanced.html#large_objects","title":"Example JavaFX app to read and write JPEG images to a database","body":"<h1>Example app</h1>\n<p>While I am no expert on JavaFX/OpenJFX, nor am I an expert on image encoding, I was able to cobble together this crude but effective little app to demonstrate:</p>\n<ol>\n<li>Loading an image from a local file.</li>\n<li>Displaying that image in an <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/image/ImageView.html\" rel=\"nofollow noreferrer\"><code>ImageView</code></a> field in JavaFX.</li>\n<li>Writing that image content to a field in an <a href=\"https://en.wikipedia.org/wiki/H2_(DBMS)\" rel=\"nofollow noreferrer\">H2</a> database.</li>\n<li>Showing a list of IDs tracking each saved image. (IDs are <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier\" rel=\"nofollow noreferrer\">UUID</a>s.)</li>\n<li>Retrieving a selected image from database, and displaying in JavaFX.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/80iZw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/80iZw.jpg\" alt=\"screenshot of example app showing images displayed while reading and writing to database\" /></a></p>\n<p>I found various chunks of code for encoding/decoding image data. I do not know what chunks may be old-fashioned or outmoded. All I know is that I got them to work.</p>\n<p>Some used classes from the <a href=\"https://en.wikipedia.org/wiki/Abstract_Window_Toolkit\" rel=\"nofollow noreferrer\">AWT</a> and <a href=\"https://en.wikipedia.org/wiki/Swing_(Java)\" rel=\"nofollow noreferrer\">Swing</a> frameworks bundled with Java. But be aware that this example JavaFX app is <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\">modularized</a>, so you must add elements to your <code>module-info.java</code> file to access those classes.</p>\n<p>In this example, the H2 database is configured to be an <a href=\"https://en.wikipedia.org/wiki/In-memory_database\" rel=\"nofollow noreferrer\">in-memory database</a>. This means the stored data is <em>not</em> written to storage. When your app ends, the database and all its rows disappear, poof .</p>\n<p>This app was written in Java 19 with OpenJFX 19.</p>\n<p>I starting this app by creating a project using the <em>JavaFX</em> template built into the <em>New Project</em> dialog box of the <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ</a> <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a>.</p>\n<p>The code for encoding the image data is found in the two <code>transform</code> methods.</p>\n<p>The <code>transformImageIntoInputStream</code> method takes a JavaFX image object, uses Swing &amp; AWT to create an AWT buffered image (not to be confused with JavaFX image). That buffered image is then converted to an array of <code>byte</code>, from which we get an <code>InputStream</code>. The input stream can be passed to the JDBC method <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>PreparedStatement :: setBlob</code></a> to store a <a href=\"https://en.wikipedia.org/wiki/Binary_large_object\" rel=\"nofollow noreferrer\">BLOB</a> in the database.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @SuppressWarnings ( &quot;UnnecessaryLocalVariable&quot; )\n    private InputStream transformImageIntoInputStream ( final Image image )\n    {\n        BufferedImage awtBufferedImage = SwingFXUtils.fromFXImage( image , null );\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        try\n        {\n            ImageIO.write( awtBufferedImage , &quot;jpg&quot; , outputStream );\n            byte[] res = outputStream.toByteArray();\n            InputStream inputStream = new ByteArrayInputStream( res );\n            return inputStream;\n        }\n        catch ( IOException e ) { e.printStackTrace(); }\n        throw new IllegalStateException( &quot;Should not reach this point in method `transformImageIntoInputStream`.&quot; );\n    }\n</code></pre>\n<p>To retrieve from the database, we call <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/ResultSet.html#getBlob(java.lang.String)\" rel=\"nofollow noreferrer\"><code>ResultSet :: getBlob</code></a> to produce a <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/Blob.html\" rel=\"nofollow noreferrer\"><code>java.sql.Blob</code></a> object. We use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/imageio/ImageIO.html\" rel=\"nofollow noreferrer\"><code>javax.imageio.ImageIO</code></a> to read a binary stream obtained from that <code>Blob</code> object we retrieved. That produces another AWT buffered image (again, not to be confused with a JavaFX image). We then make use of Swing again to produce a JavaFX image from that AWT image.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private Image transformBlobIntoImage ( final Blob blob )\n    {\n        try\n        {\n            BufferedImage awtBufferedImage = ImageIO.read( blob.getBinaryStream() );\n            Image image = SwingFXUtils.toFXImage( awtBufferedImage , null );\n            return image;\n        }\n        catch ( IOException e ) { throw new RuntimeException( e ); }\n        catch ( SQLException e ) { throw new RuntimeException( e ); }\n    }\n</code></pre>\n<p>As noted above, I am no expert on image handling. This sure seems a roundabout way to go to get image data encoded/decoded. And I am surprised to have found only approaches using AWT and Swing rather than straight JavaFX. If anyone knows better approaches, please do post!</p>\n<h2>Source Code</h2>\n<p>Here is the entire Java code for the app, in a single file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n By Basil Bourque.  http://www.Basil.work/\n\n This code is a response to this Question on Stack Overflow:\n &gt; insert an image to a database with javafx\n https://stackoverflow.com/q/75632865/642706\n\n This code was cobbled together quickly, as a starting point\n for further learning. Not meant for production use.\n Caveat: I an not an expert in JavaFX nor in image encoding.\n Use at your own risk.\n\n This demo app opens a window with five items, running left to right:\n  A button to load JPEG files from your local storage.\n  An `ImageView` field to show the image you loaded. Defaults to the Java mascot &quot;Duke&quot;, loaded over the internet.\n  A button to save the loaded image to an in-memory database using the H2 Database Engine (written in pure Java).\n  A list of the UUIDs that each identify an image stored in the database.\n  Another `ImageView` field to show the image retrieved from the database per the UUID selected in the list.\n*/\npackage work.basil.example.fximage;\n\nimport javafx.application.Application;\nimport javafx.beans.value.ObservableValue;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.embed.swing.SwingFXUtils;\nimport javafx.event.ActionEvent;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ListView;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.HBox;\nimport javafx.stage.FileChooser;\nimport javafx.stage.Stage;\n\nimport javax.imageio.ImageIO;\nimport javax.sql.DataSource;\nimport java.awt.image.BufferedImage;\nimport java.io.*;\nimport java.sql.*;\nimport java.util.Objects;\nimport java.util.UUID;\n\n@SuppressWarnings ( &quot;SqlNoDataSourceInspection&quot; )\npublic class App extends Application\n{\n    @Override\n    public void start ( final Stage stage )\n    {\n        // Widgets  ---------------------------------------\n        Button loadFromDesktopButton = new Button( &quot;Open JPEG file&quot; );\n\n        String url = &quot;https://www.oracle.com/a/ocom/img/rc24-duke-java-mascot.jpg&quot;;  // Arbitrary example image.\n        Image duke = new Image( url );\n        ImageView desktopImageView = new ImageView();\n        desktopImageView.setImage( duke );\n\n        desktopImageView.setFitWidth( 300 );\n        desktopImageView.setPreserveRatio( true );\n        desktopImageView.setSmooth( true );\n        desktopImageView.setCache( true );\n\n        Button storeInDatabaseButton = new Button( &quot;Store in database&quot; );\n\n        ListView &lt; UUID &gt; listView = new ListView &lt;&gt;();\n        listView.setPrefWidth( 300 );\n        ObservableList &lt; UUID &gt; ids = FXCollections.observableArrayList();\n        listView.setItems( ids );\n\n        ImageView databaseImageView = new ImageView();\n        databaseImageView.setFitWidth( 300 );\n        databaseImageView.setPreserveRatio( true );\n        databaseImageView.setSmooth( true );\n        databaseImageView.setCache( true );\n\n        // Behavior  --------------------------------------\n        DataSource dataSource = this.configureDataSource();\n        this.configureDatabase( dataSource );\n\n        loadFromDesktopButton.setOnAction(\n                ( ActionEvent event ) -&gt; this.loadImageFromLocalStorage( stage , desktopImageView )\n        );\n        storeInDatabaseButton.setOnAction(\n                ( ActionEvent event ) -&gt; {\n                    Image image = desktopImageView.getImage();\n                    UUID id = this.storeImageInDatabase( image , dataSource );\n                    ids.add( id );  // Add a list item for the image we just stored in database.\n                    listView.getSelectionModel().select( id ); // Select the newly added list item.\n                }\n        );\n\n        listView.getSelectionModel().selectedItemProperty().addListener(\n                ( ObservableValue &lt; ? extends UUID &gt; observableValue , UUID oldValue , UUID newValue ) -&gt; {\n                    Image image = this.fetchImageFromDatabase( newValue , dataSource );\n                    databaseImageView.setImage( image );\n                }\n        );\n\n        // Layout  --------------------------------------\n        stage.setTitle( &quot;Image To Database&quot; );\n        HBox root = new HBox();\n        root.setPadding( new Insets( 15 , 12 , 15 , 12 ) );\n        root.setSpacing( 10 );\n        root.setStyle( &quot;-fx-background-color: Grey;&quot; );\n\n        // Arrange  --------------------------------------\n        root.getChildren().add( loadFromDesktopButton );\n        root.getChildren().add( desktopImageView );\n        root.getChildren().add( storeInDatabaseButton );\n        root.getChildren().add( listView );\n        root.getChildren().add( databaseImageView );\n\n        Scene scene = new Scene( root , 1_250 , 300 );\n        stage.setScene( scene );\n        stage.show();\n    }\n\n\n    // Subroutines  --------------------------------------\n    private void loadImageFromLocalStorage ( final Stage stage , final ImageView imageView )\n    {\n        FileChooser fileChooser = new FileChooser();\n        fileChooser.setTitle( &quot;Open JPEG file&quot; );\n        File file = fileChooser.showOpenDialog( stage );\n        if ( file != null )\n        {\n            System.out.println( file );\n            Image image = new Image( file.toURI().toString() );\n            imageView.setImage( image );\n        }\n    }\n\n    private DataSource configureDataSource ( )\n    {\n        org.h2.jdbcx.JdbcDataSource ds = new org.h2.jdbcx.JdbcDataSource();  // Implementation of `DataSource` bundled with H2. You may choose to use some other implementation.\n        ds.setURL( &quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;&quot; );\n        ds.setUser( &quot;scott&quot; );\n        ds.setPassword( &quot;tiger&quot; );\n        ds.setDescription( &quot;An example database for storing an image.&quot; );\n        return ds;\n    }\n\n    private void configureDatabase ( final DataSource dataSource )\n    {\n        // Create table.\n        String sql =\n                &quot;&quot;&quot;\n                CREATE TABLE IF NOT EXISTS image_\n                (\n                    id_ uuid NOT NULL ,\n                    CONSTRAINT image_pkey_ PRIMARY KEY ( id_ ) ,\n                    row_created_ TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP() ,\n                    content_ BLOB\n                )\n                ;\n                &quot;&quot;&quot;;\n        try (\n                Connection conn = dataSource.getConnection() ;\n                Statement stmt = conn.createStatement()\n        )\n        {\n            System.out.println( &quot;INFO - Running `configureDatabase` method.&quot; );\n            stmt.executeUpdate( sql );\n        }\n        catch ( SQLException e ) { e.printStackTrace(); }\n    }\n\n\n    private UUID storeImageInDatabase ( final Image image , final DataSource dataSource )\n    {\n        InputStream inputStream = this.transformImageIntoInputStream( Objects.requireNonNull( image ) );\n\n        // Write to database\n        String sql =\n                &quot;&quot;&quot;\n                INSERT INTO image_ ( id_ , content_ )\n                VALUES ( ? , ? )\n                ;\n                &quot;&quot;&quot;;\n        try\n                (\n                        Connection conn = dataSource.getConnection() ;\n                        PreparedStatement preparedStatement = conn.prepareStatement( sql )\n                )\n        {\n            UUID id = UUID.randomUUID(); // In real work, we would retrieve the value generated by the database rather the app.\n            preparedStatement.setObject( 1 , id );\n            preparedStatement.setBlob( 2 , inputStream );\n            int rowCount = preparedStatement.executeUpdate();\n            if ( rowCount != 1 ) { throw new IllegalStateException( &quot;SQL insert failed to affect any rows.&quot; ); }\n            return id;\n        }\n        catch ( SQLException e ) { e.printStackTrace(); }\n        throw new IllegalStateException( &quot;Should never have reached this point in `storeImageInDatabase` method. &quot; );\n    }\n\n    private Image fetchImageFromDatabase ( final UUID id , final DataSource dataSource )\n    {\n        byte[] bytes = null;\n        String sql =\n                &quot;&quot;&quot;\n                SELECT *\n                FROM image_\n                WHERE id_ = ?\n                ;\n                &quot;&quot;&quot;;\n        try\n                (\n                        Connection conn = dataSource.getConnection() ;\n                        PreparedStatement preparedStatement = conn.prepareStatement( sql )\n                )\n        {\n            System.out.println( &quot;DEBUG id = &quot; + id );\n            preparedStatement.setObject( 1 , id );\n            try (\n                    ResultSet resultSet = preparedStatement.executeQuery() ;\n            )\n            {\n                if ( resultSet.next() )\n                {\n                    System.out.println( &quot;DEBUG resultSet = &quot; + resultSet );\n                    Blob blob = resultSet.getBlob( &quot;content_&quot; );\n                    System.out.println( &quot;DEBUG blob = &quot; + blob );\n                    Image image = this.transformBlobIntoImage( blob );\n                    return image;\n                }\n                else { throw new IllegalStateException( &quot;Failed to find any rows for id: &quot; + id ); }\n            }\n        }\n        catch ( SQLException e ) { e.printStackTrace(); }\n        throw new IllegalStateException( &quot;Should never have reached this point in `storeImageInDatabase` method. &quot; );\n    }\n\n\n    @SuppressWarnings ( &quot;UnnecessaryLocalVariable&quot; )\n    private InputStream transformImageIntoInputStream ( final Image image )\n    {\n        BufferedImage awtBufferedImage = SwingFXUtils.fromFXImage( image , null );\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        try\n        {\n            ImageIO.write( awtBufferedImage , &quot;jpg&quot; , outputStream );\n            byte[] res = outputStream.toByteArray();\n            InputStream inputStream = new ByteArrayInputStream( res );\n            return inputStream;\n        }\n        catch ( IOException e ) { e.printStackTrace(); }\n        throw new IllegalStateException( &quot;Should not reach this point in method `transformImageIntoInputStream`.&quot; );\n    }\n\n    private Image transformBlobIntoImage ( final Blob blob )\n    {\n        try\n        {\n            BufferedImage awtBufferedImage = ImageIO.read( blob.getBinaryStream() );\n            Image image = SwingFXUtils.toFXImage( awtBufferedImage , null );\n            return image;\n        }\n        catch ( IOException e ) { throw new RuntimeException( e ); }\n        catch ( SQLException e ) { throw new RuntimeException( e ); }\n    }\n\n    public static void main ( final String[] args )\n    {\n        launch();\n    }\n}\n</code></pre>\n<p>Here is the <code>module-info.java</code> file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>module work.basil.example.fximage {\n    requires javafx.controls;  // JavaFX/OpenJFX API.\n\n    requires java.desktop;     // Needed for classes in AWT that convert image to octets.\n    requires javafx.swing;     // Needed for `javafx.embed.swing.SwingFXUtils` class to convert image to octets.\n\n    requires java.sql;         // JDBC API.\n    requires java.naming;      // Java Naming and Directory Interface (JNDI) API. Needed for `DataSource` in JDBC.\n    requires com.h2database;   // H2 Database Engine.\n\n    exports work.basil.example.fximage;\n}\n</code></pre>\n<p>And my <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Apache Maven</a> <a href=\"https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\" rel=\"nofollow noreferrer\">POM</a> file.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns = &quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation = &quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;work.basil.example&lt;/groupId&gt;\n    &lt;artifactId&gt;FxImageToDb&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;FxImage&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-controls --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;19.0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-swing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-swing&lt;/artifactId&gt;\n            &lt;version&gt;19.0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;5.9.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.h2database/h2 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;2.1.214&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;19&lt;/source&gt;\n                    &lt;target&gt;19&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;work.basil.example.fximage/work.basil.example.fximage.App&lt;/mainClass&gt;\n                            &lt;launcher&gt;app&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<h2>Resources</h2>\n<p><a href=\"https://stackoverflow.com/q/27846062/642706\"><em>Convert Blob to JPG and update blob</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/50427495/642706\"><em>Java BLOB to image file</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/49469666/642706\"><em>Auto-generate lambda expression as argument in IntelliJ</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/11088612/642706\"><em>JavaFX select item in ListView</em></a></p>\n<p><a href=\"https://docs.oracle.com/javafx/2/ui_controls/list-view.htm\" rel=\"nofollow noreferrer\"><em>Using JavaFX UI Controls 11 List View</em></a></p>\n<p><a href=\"https://docs.oracle.com/javafx/2/ui_controls/file-chooser.htm\" rel=\"nofollow noreferrer\"><em>Using JavaFX UI Controls  26 File Chooser</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/22710053/642706\"><em>How can I show an image using the ImageView component in javafx and fxml?</em></a></p>\n<p>H2 Database Engine documentation for <a href=\"http://h2database.com/html/datatypes.html#binary_large_object_type\" rel=\"nofollow noreferrer\"><code>BLOB</code></a> type and for <a href=\"http://h2database.com/html/advanced.html#large_objects\" rel=\"nofollow noreferrer\">discussion of the Large Object</a> types.</p>\n<p>AWT &amp; Swing classes: <a href=\"https://openjfx.io/javadoc/19/javafx.swing/javafx/embed/swing/SwingFXUtils.html\" rel=\"nofollow noreferrer\"><code>SwingFXUtils</code></a></p>\n<p><a href=\"https://stackoverflow.com/q/49335128/642706\"><em>How to convert a JavaFX ImageView to InputStream</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/15035883/642706\"><em>Saving an image in MySQL from Java</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/50783126/642706\"><em>How to save an image from HTML to a DATABASE using JAVA</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/21500339/642706\"><em>Storing Image in Data Base Using Java in Binary Format</em></a></p>\n"}],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1678142230,"creation_date":1678139448,"question_id":75656158,"body_markdown":"As part of learning [JavaFX][1], I would like to see a minimal example of how to read &amp; write JPEG images to a database while displaying them in a JavaFX app. \r\n\r\nThis Question may be similar to this other Question, [insert an image to a database with javafx][2], but hopefully more focused.\r\n\r\nI have seen bits of code here and there for processing images, but I have not been able to convert an image from a [OpenJFX][3] [`Image`][4] object to something that can be stored in a field in a [SQL][5] database such as [H2 Database Engine][6] via [JDBC][7].\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JavaFX\r\n  [2]: https://stackoverflow.com/q/75632865/642706\r\n  [3]: https://openjfx.io/\r\n  [4]: https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/image/Image.html\r\n  [5]: https://en.wikipedia.org/wiki/SQL\r\n  [6]: https://en.wikipedia.org/wiki/H2_(DBMS)\r\n  [7]: https://en.wikipedia.org/wiki/Java_Database_Connectivity","title":"Example JavaFX app to read and write JPEG images to a database","body":"<p>As part of learning <a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a>, I would like to see a minimal example of how to read &amp; write JPEG images to a database while displaying them in a JavaFX app.</p>\n<p>This Question may be similar to this other Question, <a href=\"https://stackoverflow.com/q/75632865/642706\">insert an image to a database with javafx</a>, but hopefully more focused.</p>\n<p>I have seen bits of code here and there for processing images, but I have not been able to convert an image from a <a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a> <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/image/Image.html\" rel=\"nofollow noreferrer\"><code>Image</code></a> object to something that can be stored in a field in a <a href=\"https://en.wikipedia.org/wiki/SQL\" rel=\"nofollow noreferrer\">SQL</a> database such as <a href=\"https://en.wikipedia.org/wiki/H2_(DBMS)\" rel=\"nofollow noreferrer\">H2 Database Engine</a> via <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a>.</p>\n"},{"tags":["java","hashmap","java-stream","collectors"],"comments":[{"owner":{"account_id":785462,"reputation":16343,"user_id":845034,"accept_rate":57,"display_name":"steffen"},"score":0,"creation_date":1670103525,"post_id":74670924,"comment_id":131796817,"body_markdown":"How about creating a [minimal-reproducible-example](https://stackoverflow.com/help/minimal-reproducible-example)?","body":"How about creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal-reproducible-example</a>?"},{"owner":{"account_id":16194832,"reputation":582,"user_id":11692715,"display_name":"Mohit Kumar"},"score":0,"creation_date":1670105176,"post_id":74670924,"comment_id":131797112,"body_markdown":"I have added a minimal-reproducible-example","body":"I have added a minimal-reproducible-example"}],"answers":[{"tags":[],"owner":{"account_id":27104252,"reputation":23,"user_id":20650320,"display_name":"Ronmeir"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670138765,"creation_date":1670105990,"answer_id":74671226,"question_id":74670924,"body_markdown":"I wouldnt use this in my code because I think its not readable and will be very hard to change and manage in the future(SOLID).\r\nBut in case you still want this-  \r\n\r\nIf I got your design right hash is unique per user and transaction will only have deposit or withdrawal, if so, this will work-  \r\n\r\nYou could triple groupBy via collectors chaining like you did in your example. \r\nYou can create the `Txn` type via simple map function just check which id is null.\r\n```\r\nMap&lt;String, Map&lt;String, Map&lt;String, List&lt;Txn&gt;&gt;&gt;&gt; groupBy = \r\n      txnList.stream()\r\n             .collect(Collectors.groupingBy(Txn::getHash, LinkedHashMap::new,\r\n                       Collectors.groupingBy(Txn::getDepositId, LinkedHashMap::new,\r\n                         Collectors.groupingBy(Txn::getWithdrawId, LinkedHashMap::new, Collectors.toList()))));\r\n```\r\n\r\nthen use the logic from your example on this stream.","title":"How to merge two groupingBy in java streams?","body":"<p>I wouldnt use this in my code because I think its not readable and will be very hard to change and manage in the future(SOLID).\nBut in case you still want this-</p>\n<p>If I got your design right hash is unique per user and transaction will only have deposit or withdrawal, if so, this will work-</p>\n<p>You could triple groupBy via collectors chaining like you did in your example.\nYou can create the <code>Txn</code> type via simple map function just check which id is null.</p>\n<pre><code>Map&lt;String, Map&lt;String, Map&lt;String, List&lt;Txn&gt;&gt;&gt;&gt; groupBy = \n      txnList.stream()\n             .collect(Collectors.groupingBy(Txn::getHash, LinkedHashMap::new,\n                       Collectors.groupingBy(Txn::getDepositId, LinkedHashMap::new,\n                         Collectors.groupingBy(Txn::getWithdrawId, LinkedHashMap::new, Collectors.toList()))));\n</code></pre>\n<p>then use the logic from your example on this stream.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1670116443,"creation_date":1670106838,"answer_id":74671331,"question_id":74670924,"body_markdown":"&lt;h3&gt;TL;DR&lt;/h3&gt;\r\n\r\nFor those who didn&#39;t understand the question, OP wants to generate from each `Txn` instance (`Txn` probably stands for transaction) **two** peaces of data: `hash` and `withdrawId` + aggregated amount, and `hash` and `depositId` + aggregated amount.\r\n\r\nAnd then they want to merge the two parts together (for that reason they were creating the two streams, and then concatenating them).\r\n\r\n***Note:** it seems like there&#39;s a logical flow in the original code: the same amount gets associated with `withdrawId` and `depositId`. Which doesn&#39;t reflect that this amount has been taken from one account and transferred to another. Hence, it would make sense if for `depositId` amount would be used as is, and for `withdrawId` - negated (i.e. `-1 * amount`).*\r\n\r\n# [`Collectors.teeing()`][teeing]\r\n\r\nYou can make use of the Java 12 Collector `teeing()` and internally group stream elements into two distinct Maps:\r\n\r\n* the first one by grouping the stream data by `withdrawId` and `hash`.\r\n\r\n* and another one by grouping the data `depositId` and `hash`.\r\n\r\nTeeing expects three arguments: 2 downstream Collectors and a Function combining the results produced by collectors.\r\n\r\nAs the downstream of `teeing()` we can use a combination of Collectors `groupingBy()` and [`summingInt()`][summingInt], the second one is needed to accumulate integer `amount` of the transaction.\r\n\r\n**Note** that there&#39;s no need in using nested Collector `groupingBy()` instead we can create a custom type that would hold `id` and `hash` (*and its `equals/hashCode` should be implemented based on the wrapped id and hash*). [Java 16 `record`][record] fits into this role perfectly well:\r\n\r\n```\r\npublic record HashWalletId(String hash, String walletId) {}\r\n```\r\n\r\nInstances of `HashWalletId` would be used as Keys in both intermediate Maps.\r\n\r\nThe *finisher function* of `teeing()` would merge the results of the two Maps together.\r\n\r\nThe only thing left is to generate instances of `UserTxn` out of map entries.\r\n\r\n```\r\nList&lt;Txn&gt; txnList = // initializing the list\r\n        \r\nList&lt;UserTxn&gt; result = txnList.stream()\r\n    .collect(Collectors.teeing(\r\n        Collectors.groupingBy(\r\n            txn -&gt; new HashWalletId(txn.getHash(), txn.getWithdrawId()),\r\n            Collectors.summingInt(txn -&gt; -1 * txn.getAmount())), // because amount has been withdrawn\r\n        Collectors.groupingBy(\r\n            txn -&gt; new HashWalletId(txn.getHash(), txn.getDepositId()),\r\n            Collectors.summingInt(Txn::getAmount)),\r\n        (map1, map2) -&gt; {\r\n            map2.forEach((k, v) -&gt; map1.merge(k, v, Integer::sum));\r\n            return map1;\r\n        }\r\n    ))\r\n    .entrySet().stream()\r\n    .map(entry -&gt; UserTxn.builder()\r\n        .hash(entry.getKey().hash())\r\n        .walletId(entry.getKey().walletId())\r\n        .txnType(entry.getValue() &gt; 0 ? &quot;DEPOSIT&quot; : &quot;WITHDRAW&quot;)\r\n        .amount(entry.getValue())\r\n        .build()\r\n    )\r\n    .toList(); // remove the terminal operation if your goal is to produce a Stream\r\n```\r\n\r\n\r\n\r\n   [teeing]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)\r\n\r\n   [summingInt]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#summingInt(java.util.function.ToIntFunction)\r\n\r\n   [record]: https://docs.oracle.com/en/java/javase/16/language/records.html","title":"How to merge two groupingBy in java streams?","body":"<h3>TL;DR</h3>\n<p>For those who didn't understand the question, OP wants to generate from each <code>Txn</code> instance (<code>Txn</code> probably stands for transaction) <strong>two</strong> peaces of data: <code>hash</code> and <code>withdrawId</code> + aggregated amount, and <code>hash</code> and <code>depositId</code> + aggregated amount.</p>\n<p>And then they want to merge the two parts together (for that reason they were creating the two streams, and then concatenating them).</p>\n<p><em><strong>Note:</strong> it seems like there's a logical flow in the original code: the same amount gets associated with <code>withdrawId</code> and <code>depositId</code>. Which doesn't reflect that this amount has been taken from one account and transferred to another. Hence, it would make sense if for <code>depositId</code> amount would be used as is, and for <code>withdrawId</code> - negated (i.e. <code>-1 * amount</code>).</em></p>\n<h1><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\"><code>Collectors.teeing()</code></a></h1>\n<p>You can make use of the Java 12 Collector <code>teeing()</code> and internally group stream elements into two distinct Maps:</p>\n<ul>\n<li><p>the first one by grouping the stream data by <code>withdrawId</code> and <code>hash</code>.</p>\n</li>\n<li><p>and another one by grouping the data <code>depositId</code> and <code>hash</code>.</p>\n</li>\n</ul>\n<p>Teeing expects three arguments: 2 downstream Collectors and a Function combining the results produced by collectors.</p>\n<p>As the downstream of <code>teeing()</code> we can use a combination of Collectors <code>groupingBy()</code> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#summingInt(java.util.function.ToIntFunction)\" rel=\"nofollow noreferrer\"><code>summingInt()</code></a>, the second one is needed to accumulate integer <code>amount</code> of the transaction.</p>\n<p><strong>Note</strong> that there's no need in using nested Collector <code>groupingBy()</code> instead we can create a custom type that would hold <code>id</code> and <code>hash</code> (<em>and its <code>equals/hashCode</code> should be implemented based on the wrapped id and hash</em>). <a href=\"https://docs.oracle.com/en/java/javase/16/language/records.html\" rel=\"nofollow noreferrer\">Java 16 <code>record</code></a> fits into this role perfectly well:</p>\n<pre><code>public record HashWalletId(String hash, String walletId) {}\n</code></pre>\n<p>Instances of <code>HashWalletId</code> would be used as Keys in both intermediate Maps.</p>\n<p>The <em>finisher function</em> of <code>teeing()</code> would merge the results of the two Maps together.</p>\n<p>The only thing left is to generate instances of <code>UserTxn</code> out of map entries.</p>\n<pre><code>List&lt;Txn&gt; txnList = // initializing the list\n        \nList&lt;UserTxn&gt; result = txnList.stream()\n    .collect(Collectors.teeing(\n        Collectors.groupingBy(\n            txn -&gt; new HashWalletId(txn.getHash(), txn.getWithdrawId()),\n            Collectors.summingInt(txn -&gt; -1 * txn.getAmount())), // because amount has been withdrawn\n        Collectors.groupingBy(\n            txn -&gt; new HashWalletId(txn.getHash(), txn.getDepositId()),\n            Collectors.summingInt(Txn::getAmount)),\n        (map1, map2) -&gt; {\n            map2.forEach((k, v) -&gt; map1.merge(k, v, Integer::sum));\n            return map1;\n        }\n    ))\n    .entrySet().stream()\n    .map(entry -&gt; UserTxn.builder()\n        .hash(entry.getKey().hash())\n        .walletId(entry.getKey().walletId())\n        .txnType(entry.getValue() &gt; 0 ? &quot;DEPOSIT&quot; : &quot;WITHDRAW&quot;)\n        .amount(entry.getValue())\n        .build()\n    )\n    .toList(); // remove the terminal operation if your goal is to produce a Stream\n</code></pre>\n"}],"owner":{"account_id":16194832,"reputation":582,"user_id":11692715,"display_name":"Mohit Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74671331,"answer_count":2,"score":0,"last_activity_date":1678142210,"creation_date":1670103260,"question_id":74670924,"body_markdown":"I have a input object\r\n\r\n      @Getter\r\n      class Txn {\r\n    \r\n        private String hash;\r\n        private String withdrawId;\r\n        private String depositId;\r\n        private Integer amount;\r\n        private String date;\r\n    \r\n      }\r\n\r\nand the output object is\r\n\r\n      @Builder\r\n      @Getter\r\n      class UserTxn {\r\n    \r\n        private String hash;\r\n        private String walletId;\r\n        private String txnType;\r\n        private Integer amount;\r\n      }\r\n\r\nIn the **Txn** object transfers the **amount** from the **withdrawId -&gt; depositId**.\r\n\r\nwhat I am doing is I am **adding** all the **transactions** (Txn objects) in a single amount **grouped by hash**.\r\n\r\nbut for that I have to make **two streams for groupingby** withdrawId and second or for depositId and then the **third stream for merging** them\r\n\r\n\r\ngrouping by withdrawId\r\n\r\n    var withdrawStream = txnList.stream().collect(Collectors.groupingBy(Txn::getHash, LinkedHashMap::new,\r\n            Collectors.groupingBy(Txn::getWithdrawId, LinkedHashMap::new, Collectors.toList())))\r\n        .entrySet().stream().flatMap(hashEntrySet -&gt; hashEntrySet.getValue().entrySet().stream()\r\n            .map(withdrawEntrySet -&gt;\r\n                UserTxn.builder()\r\n                    .hash(hashEntrySet.getKey())\r\n                    .walletId(withdrawEntrySet.getKey())\r\n                    .txnType(&quot;WITHDRAW&quot;)\r\n                    .amount(withdrawEntrySet.getValue().stream().map(Txn::getAmount).reduce(0, Integer::sum))\r\n                    .build()\r\n            ));\r\n\r\ngrouping by depositId\r\n\r\n\r\n    \r\n    var depositStream = txnList.stream().collect(Collectors.groupingBy(Txn::getHash, LinkedHashMap::new,\r\n            Collectors.groupingBy(Txn::getDepositId, LinkedHashMap::new, Collectors.toList())))\r\n        .entrySet().stream().flatMap(hashEntrySet -&gt; hashEntrySet.getValue().entrySet().stream()\r\n            .map(withdrawEntrySet -&gt;\r\n                UserTxn.builder()\r\n                    .hash(hashEntrySet.getKey())\r\n                    .walletId(withdrawEntrySet.getKey())\r\n                    .txnType(&quot;DEPOSIT&quot;)\r\n                    .amount(withdrawEntrySet.getValue().stream().map(Txn::getAmount).reduce(0, Integer::sum))\r\n                    .build()\r\n            ));\r\n    \r\n\r\nthen merging them again, using deposites - withdraws\r\n\r\n    var res = Stream.concat(withdrawStream, depositStream).collect(Collectors.groupingBy(UserTxn::getHash, LinkedHashMap::new,\r\n        Collectors.groupingBy(UserTxn::getWalletId, LinkedHashMap::new, Collectors.toList())))\r\n        .entrySet().stream().flatMap(hashEntrySet -&gt; hashEntrySet.getValue().entrySet().stream()\r\n            .map(withdrawEntrySet -&gt; {\r\n                  var depositAmount = withdrawEntrySet.getValue().stream().filter(userTxn -&gt; userTxn.txnType.equals(&quot;DEPOSIT&quot;)).map(UserTxn::getAmount).reduce(0, Integer::sum);\r\n                  var withdrawAmount = withdrawEntrySet.getValue().stream().filter(userTxn -&gt; userTxn.txnType.equals(&quot;WITHDRAW&quot;)).map(UserTxn::getAmount).reduce(0, Integer::sum);\r\n                  var totalAmount = depositAmount-withdrawAmount;\r\n                  return UserTxn.builder()\r\n                      .hash(hashEntrySet.getKey())\r\n                      .walletId(withdrawEntrySet.getKey())\r\n                      .txnType(totalAmount &gt; 0 ? &quot;DEPOSIT&quot;: &quot;WITHDRAW&quot;)\r\n                      .amount(totalAmount)\r\n                      .build();\r\n                }\r\n            ));\r\n\r\n\r\nMy question is, How can I do this in one stream. \r\nLike by somehow groupingBy withdrawId and depositId is one grouping.\r\n\r\nsomething like \r\n\r\n    res = txnList.stream()\r\n            .collect(Collectors.groupingBy(Txn::getHash,\r\n                LinkedHashMap::new,\r\n                Collectors.groupingBy(Txn::getWithdrawId &amp;&amp; Txn::getDepositId,\r\n                    LinkedHashMap::new, Collectors.toList())))\r\n            .entrySet().stream().flatMap(hashEntrySet -&gt; hashEntrySet.getValue().entrySet().stream()\r\n                .map(walletEntrySet -&gt;\r\n                    {\r\n                      var totalAmount = walletEntrySet.getValue().stream().map(\r\n                          txn -&gt; Objects.equals(txn.getDepositId(), walletEntrySet.getKey())\r\n                              ? txn.getAmount() : (-txn.getAmount())).reduce(0, Integer::sum);\r\n                      return UserTxn.builder()\r\n                          .hash(hashEntrySet.getKey())\r\n                          .walletId(walletEntrySet.getKey())\r\n                          .txnType(&quot;WITHDRAW&quot;)\r\n                          .amount(totalAmount)\r\n                          .build();\r\n                    }\r\n                ));\r\n\r\n\r\n\r\n","title":"How to merge two groupingBy in java streams?","body":"<p>I have a input object</p>\n<pre><code>  @Getter\n  class Txn {\n\n    private String hash;\n    private String withdrawId;\n    private String depositId;\n    private Integer amount;\n    private String date;\n\n  }\n</code></pre>\n<p>and the output object is</p>\n<pre><code>  @Builder\n  @Getter\n  class UserTxn {\n\n    private String hash;\n    private String walletId;\n    private String txnType;\n    private Integer amount;\n  }\n</code></pre>\n<p>In the <strong>Txn</strong> object transfers the <strong>amount</strong> from the <strong>withdrawId -&gt; depositId</strong>.</p>\n<p>what I am doing is I am <strong>adding</strong> all the <strong>transactions</strong> (Txn objects) in a single amount <strong>grouped by hash</strong>.</p>\n<p>but for that I have to make <strong>two streams for groupingby</strong> withdrawId and second or for depositId and then the <strong>third stream for merging</strong> them</p>\n<p>grouping by withdrawId</p>\n<pre><code>var withdrawStream = txnList.stream().collect(Collectors.groupingBy(Txn::getHash, LinkedHashMap::new,\n        Collectors.groupingBy(Txn::getWithdrawId, LinkedHashMap::new, Collectors.toList())))\n    .entrySet().stream().flatMap(hashEntrySet -&gt; hashEntrySet.getValue().entrySet().stream()\n        .map(withdrawEntrySet -&gt;\n            UserTxn.builder()\n                .hash(hashEntrySet.getKey())\n                .walletId(withdrawEntrySet.getKey())\n                .txnType(&quot;WITHDRAW&quot;)\n                .amount(withdrawEntrySet.getValue().stream().map(Txn::getAmount).reduce(0, Integer::sum))\n                .build()\n        ));\n</code></pre>\n<p>grouping by depositId</p>\n<pre><code>var depositStream = txnList.stream().collect(Collectors.groupingBy(Txn::getHash, LinkedHashMap::new,\n        Collectors.groupingBy(Txn::getDepositId, LinkedHashMap::new, Collectors.toList())))\n    .entrySet().stream().flatMap(hashEntrySet -&gt; hashEntrySet.getValue().entrySet().stream()\n        .map(withdrawEntrySet -&gt;\n            UserTxn.builder()\n                .hash(hashEntrySet.getKey())\n                .walletId(withdrawEntrySet.getKey())\n                .txnType(&quot;DEPOSIT&quot;)\n                .amount(withdrawEntrySet.getValue().stream().map(Txn::getAmount).reduce(0, Integer::sum))\n                .build()\n        ));\n</code></pre>\n<p>then merging them again, using deposites - withdraws</p>\n<pre><code>var res = Stream.concat(withdrawStream, depositStream).collect(Collectors.groupingBy(UserTxn::getHash, LinkedHashMap::new,\n    Collectors.groupingBy(UserTxn::getWalletId, LinkedHashMap::new, Collectors.toList())))\n    .entrySet().stream().flatMap(hashEntrySet -&gt; hashEntrySet.getValue().entrySet().stream()\n        .map(withdrawEntrySet -&gt; {\n              var depositAmount = withdrawEntrySet.getValue().stream().filter(userTxn -&gt; userTxn.txnType.equals(&quot;DEPOSIT&quot;)).map(UserTxn::getAmount).reduce(0, Integer::sum);\n              var withdrawAmount = withdrawEntrySet.getValue().stream().filter(userTxn -&gt; userTxn.txnType.equals(&quot;WITHDRAW&quot;)).map(UserTxn::getAmount).reduce(0, Integer::sum);\n              var totalAmount = depositAmount-withdrawAmount;\n              return UserTxn.builder()\n                  .hash(hashEntrySet.getKey())\n                  .walletId(withdrawEntrySet.getKey())\n                  .txnType(totalAmount &gt; 0 ? &quot;DEPOSIT&quot;: &quot;WITHDRAW&quot;)\n                  .amount(totalAmount)\n                  .build();\n            }\n        ));\n</code></pre>\n<p>My question is, How can I do this in one stream.\nLike by somehow groupingBy withdrawId and depositId is one grouping.</p>\n<p>something like</p>\n<pre><code>res = txnList.stream()\n        .collect(Collectors.groupingBy(Txn::getHash,\n            LinkedHashMap::new,\n            Collectors.groupingBy(Txn::getWithdrawId &amp;&amp; Txn::getDepositId,\n                LinkedHashMap::new, Collectors.toList())))\n        .entrySet().stream().flatMap(hashEntrySet -&gt; hashEntrySet.getValue().entrySet().stream()\n            .map(walletEntrySet -&gt;\n                {\n                  var totalAmount = walletEntrySet.getValue().stream().map(\n                      txn -&gt; Objects.equals(txn.getDepositId(), walletEntrySet.getKey())\n                          ? txn.getAmount() : (-txn.getAmount())).reduce(0, Integer::sum);\n                  return UserTxn.builder()\n                      .hash(hashEntrySet.getKey())\n                      .walletId(walletEntrySet.getKey())\n                      .txnType(&quot;WITHDRAW&quot;)\n                      .amount(totalAmount)\n                      .build();\n                }\n            ));\n</code></pre>\n"},{"tags":["java","sorting","set","java-stream"],"answers":[{"comments":[{"owner":{"account_id":15967888,"reputation":165,"user_id":11522914,"display_name":"CovetousSlope"},"score":0,"creation_date":1670525413,"post_id":74734960,"comment_id":131900642,"body_markdown":"I did this exactly, but the time required for doing individual sorting before groupingBy is almost 6 times. This is a critical operation and should be done in few milliseconds. That is why I want to club everything together.","body":"I did this exactly, but the time required for doing individual sorting before groupingBy is almost 6 times. This is a critical operation and should be done in few milliseconds. That is why I want to club everything together."},{"owner":{"account_id":15967888,"reputation":165,"user_id":11522914,"display_name":"CovetousSlope"},"score":0,"creation_date":1670528836,"post_id":74734960,"comment_id":131901622,"body_markdown":"yes this is solving my problem. Only one thing here is , user of sorted() is adding some performance hit as compared to \ncollectingAndThen(\n                                    mapping(Function.identity(),  toCollection(\n                                            () -&gt; new TreeSet&lt;&gt;(Comparator.comparing(e -&gt; e.timestamp))\n                                    )),\n                                    set -&gt; set.stream().map(OrderRow::getEventName)\n                                            .collect(toCollection(LinkedHashSet::new))\n                            )))","body":"yes this is solving my problem. Only one thing here is , user of sorted() is adding some performance hit as compared to  collectingAndThen(                                     mapping(Function.identity(),  toCollection(                                             () -&gt; new TreeSet&lt;&gt;(Comparator.comparing(e -&gt; e.timestamp))                                     )),                                     set -&gt; set.stream().map(OrderRow::getEventName)                                             .collect(toCollection(LinkedHashSet::new))                             )))"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1670529667,"post_id":74734960,"comment_id":131901843,"body_markdown":"@CovetousSlope There&#39;s only one reason I can see why *Red-black tree* perform better, namely `sorted()` requires allocating a new array in memory, which has a cost. And it that can be eliminated by sorting an `ArrayList` directly and then creating a stream out of it (I&#39;ll update the code in a few minutes). That said, to measure the performance correctly, you need to make sure that the test is isolated and not affected by JVM warm up and other stuff.","body":"@CovetousSlope There&#39;s only one reason I can see why <i>Red-black tree</i> perform better, namely <code>sorted()</code> requires allocating a new array in memory, which has a cost. And it that can be eliminated by sorting an <code>ArrayList</code> directly and then creating a stream out of it (I&#39;ll update the code in a few minutes). That said, to measure the performance correctly, you need to make sure that the test is isolated and not affected by JVM warm up and other stuff."},{"owner":{"account_id":15967888,"reputation":165,"user_id":11522914,"display_name":"CovetousSlope"},"score":0,"creation_date":1670529908,"post_id":74734960,"comment_id":131901894,"body_markdown":"You are right. Seems that memory allocation can be an issue. Also I am running my code multiple times so that I have correct average time.","body":"You are right. Seems that memory allocation can be an issue. Also I am running my code multiple times so that I have correct average time."}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1670530256,"creation_date":1670525028,"answer_id":74734960,"question_id":74734847,"body_markdown":"## TL;DR\r\n\r\n* `LinkedHashSet` - is the only implementation of the `Set` interface, which would to retain the order of the plain `String`s (`action` property), that differs from the alphabetical one.\r\n\r\n* *Timsort* has a slightly better performance than sorting via *Red-black tree* (i.e. by storing elments into a `TreeSet`). Since OP has said that *&quot;is a critical operation&quot;*, that worth to take into consideration.\r\n\r\n---------------------------------------------\r\n\r\nYou can sort the stream elements by timestamp before applying `collect`. That would guarantee that `action`s in the list would be consumed in the required order.\r\n\r\nAnd to retain the order of these Strings, you can use a [`LinkedHashSet`][linkedHashSet] (`TreeSet` would not be helpful in this case since you need to keep the order by property which would not be present in the collection). \r\n\r\n```\r\nvar actionsById = orderRows.stream()\r\n    .sorted(Comparator.comparing(OrderRow::getTimestamp))\r\n    .collect(Collectors.groupingBy(\r\n        OrderRow::getOrderId,\r\n        Collectors.mapping(\r\n            OrderRow::getAction,\r\n            Collectors.toCollection(LinkedHashSet::new))\r\n    ));\r\n```\r\n\r\nAlternatively, you can sort the sets while grouping (as you were trying to do).\r\n\r\n```\r\nvar actionsById = orderRows.stream()\r\n    .collect(Collectors.groupingBy(\r\n        OrderRow::getOrderId,\r\n        Collectors.collectingAndThen(\r\n            Collectors.mapping(\r\n                Function.identity(),\r\n                Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;(Comparator.comparing(OrderRow::getTimestamp)))\r\n            ),\r\n            set -&gt; set.stream().map(OrderRow::getAction).collect(Collectors.toCollection(LinkedHashSet::new))\r\n        )\r\n    ));\r\n```\r\n\r\nOr instead of sorting via *Red-Black Tree* (`TreeSet` *is backed by the an implementation of this data structure*) each set can be sorted via *Timsort* (which is an algorithm used while sorting an array of elements, and `sorted()` operation is invoked in the stream, its elements are being dumped into an array).\r\n\r\nMaintaining a *Red-Black Tree* is constful, and theoretically *Timsort* should perform a bit better.\r\n\r\n```\r\nvar actionsById = orderRows.stream()\r\n    .collect(Collectors.groupingBy(\r\n        OrderRow::getOrderId,\r\n        Collectors.collectingAndThen(\r\n            Collectors.mapping(\r\n                Function.identity(), Collectors.toList()\r\n            ),\r\n            list -&gt; list.stream().sorted(Comparator.comparing(OrderRow::getTimestamp))\r\n                .map(OrderRow::getAction)\r\n                .collect(Collectors.toCollection(LinkedHashSet::new))\r\n        )\r\n    ));\r\n```\r\n\r\nTo eliminate allocating a new array in memory (which happens when `sorted()` operation is being called) we can sort the lists produced by `mapping()` directly, and then create a stream out of sorted lists in the *finisher* function of `collectingAndThen()`.\r\n\r\nThat would require writing a multiline lambda, but in this case is justifiable by the performance gain.\r\n\r\n```\r\nvar actionsById = orderRows.stream()\r\n    .collect(Collectors.groupingBy(\r\n        OrderRow::getOrderId,\r\n        Collectors.collectingAndThen(\r\n            Collectors.mapping(\r\n                Function.identity(), Collectors.toList()\r\n            ),\r\n            list -&gt; {\r\n                list.sort(Comparator.comparing(OrderRow::getTimestamp));\r\n                return list.stream().map(OrderRow::getAction)\r\n                    .collect(Collectors.toCollection(LinkedHashSet::new));\r\n            }\r\n        )\r\n    ));\r\n```\r\n\r\n\r\n   [linkedHashSet]: https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/util/LinkedHashSet.html","title":"Java-Stream - Sort and Transform elements using groupingBy()","body":"<h2>TL;DR</h2>\n<ul>\n<li><p><code>LinkedHashSet</code> - is the only implementation of the <code>Set</code> interface, which would to retain the order of the plain <code>String</code>s (<code>action</code> property), that differs from the alphabetical one.</p>\n</li>\n<li><p><em>Timsort</em> has a slightly better performance than sorting via <em>Red-black tree</em> (i.e. by storing elments into a <code>TreeSet</code>). Since OP has said that <em>&quot;is a critical operation&quot;</em>, that worth to take into consideration.</p>\n</li>\n</ul>\n<hr />\n<p>You can sort the stream elements by timestamp before applying <code>collect</code>. That would guarantee that <code>action</code>s in the list would be consumed in the required order.</p>\n<p>And to retain the order of these Strings, you can use a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\"><code>LinkedHashSet</code></a> (<code>TreeSet</code> would not be helpful in this case since you need to keep the order by property which would not be present in the collection).</p>\n<pre><code>var actionsById = orderRows.stream()\n    .sorted(Comparator.comparing(OrderRow::getTimestamp))\n    .collect(Collectors.groupingBy(\n        OrderRow::getOrderId,\n        Collectors.mapping(\n            OrderRow::getAction,\n            Collectors.toCollection(LinkedHashSet::new))\n    ));\n</code></pre>\n<p>Alternatively, you can sort the sets while grouping (as you were trying to do).</p>\n<pre><code>var actionsById = orderRows.stream()\n    .collect(Collectors.groupingBy(\n        OrderRow::getOrderId,\n        Collectors.collectingAndThen(\n            Collectors.mapping(\n                Function.identity(),\n                Collectors.toCollection(() -&gt; new TreeSet&lt;&gt;(Comparator.comparing(OrderRow::getTimestamp)))\n            ),\n            set -&gt; set.stream().map(OrderRow::getAction).collect(Collectors.toCollection(LinkedHashSet::new))\n        )\n    ));\n</code></pre>\n<p>Or instead of sorting via <em>Red-Black Tree</em> (<code>TreeSet</code> <em>is backed by the an implementation of this data structure</em>) each set can be sorted via <em>Timsort</em> (which is an algorithm used while sorting an array of elements, and <code>sorted()</code> operation is invoked in the stream, its elements are being dumped into an array).</p>\n<p>Maintaining a <em>Red-Black Tree</em> is constful, and theoretically <em>Timsort</em> should perform a bit better.</p>\n<pre><code>var actionsById = orderRows.stream()\n    .collect(Collectors.groupingBy(\n        OrderRow::getOrderId,\n        Collectors.collectingAndThen(\n            Collectors.mapping(\n                Function.identity(), Collectors.toList()\n            ),\n            list -&gt; list.stream().sorted(Comparator.comparing(OrderRow::getTimestamp))\n                .map(OrderRow::getAction)\n                .collect(Collectors.toCollection(LinkedHashSet::new))\n        )\n    ));\n</code></pre>\n<p>To eliminate allocating a new array in memory (which happens when <code>sorted()</code> operation is being called) we can sort the lists produced by <code>mapping()</code> directly, and then create a stream out of sorted lists in the <em>finisher</em> function of <code>collectingAndThen()</code>.</p>\n<p>That would require writing a multiline lambda, but in this case is justifiable by the performance gain.</p>\n<pre><code>var actionsById = orderRows.stream()\n    .collect(Collectors.groupingBy(\n        OrderRow::getOrderId,\n        Collectors.collectingAndThen(\n            Collectors.mapping(\n                Function.identity(), Collectors.toList()\n            ),\n            list -&gt; {\n                list.sort(Comparator.comparing(OrderRow::getTimestamp));\n                return list.stream().map(OrderRow::getAction)\n                    .collect(Collectors.toCollection(LinkedHashSet::new));\n            }\n        )\n    ));\n</code></pre>\n"}],"owner":{"account_id":15967888,"reputation":165,"user_id":11522914,"display_name":"CovetousSlope"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74734960,"answer_count":1,"score":1,"last_activity_date":1678142196,"creation_date":1670524301,"question_id":74734847,"body_markdown":"Suppose I have the following domain class:\r\n\r\n    public class OrderRow {\r\n        private Long orderId;\r\n        private String action;\r\n        private LocalDateTime timestamp;\r\n        \r\n        // getters, constructor, etc.\r\n    }\r\n\r\nI have a following data set of `OrderRow`s :\r\n```\r\nOrderId  \tAction   \t\t    \tTimestamp\r\n3\t\t\tPay money \t\t    \t2015-05-27 12:48:47.000\r\n3\t\t\tSelect Item\t\t    \t2015-05-27 12:44:47.000\r\n1 \t\t\tGenerate Payment\t\t2015-05-27 12:55:47.000\r\n2\t\t\tPay money\t\t    \t2015-05-27 12:48:47.000\r\n2\t\t\tSelect Item \t    \t2015-05-27 12:44:47.000\r\n2\t\t\tDeliver \t\t    \t2015-05-27 12:55:47.000\r\n1\t\t\tGenerate Invoice    \t2015-05-27 12:48:47.000\r\n1\t\t\tCreate PO\t\t    \t2015-05-27 12:44:47.000\r\n3\t\t\tDeliver \t\t    \t2015-05-27 12:55:47.000\r\n```\r\n\r\nWhat I want to obtain the following `Map` from the sample data shown above:\r\n\r\n```\r\n[3] -&gt; [&quot;Select Item&quot;, &quot;Pay money&quot;, &quot;Deliver&quot;]\r\n[1] -&gt; [&quot;Create PO&quot;, &quot;Generate Invoice&quot;, &quot;Generate Payment&quot;]\r\n[2] -&gt; [&quot;Select Item&quot;, &quot;Pay money&quot;, &quot;Deliver&quot;]  \r\n```\r\nBy performing below operations :\r\n 1. I want to groupBy `orderId`.\r\n 2. Sort actions by `timestamp`.\r\n 3. Create a `Set` (as there can be duplicates) of `action`s.\r\n\r\nI am trying to do this in a single `groupingBy` operation as performing separate sorting, `mapping` operations take a lot of time if data set is huge.\r\n\r\nI&#39;ve tried to do the following:\r\n```\r\norderRows.stream()\r\n    .collect(Collectors.groupingBy(OrderRow::getOrderId, \r\n        Collectors.mapping(Function.identity(),\r\n            Collectors.toCollection(\r\n                () -&gt; new TreeSet&lt;&gt;(Comparator.comparing(e -&gt; e.timestamp))\r\n    ))));\r\n```\r\nBut then I get output as `Map&lt;String, Set&lt;OrderRow&gt;&gt;`\r\nwhere as I need the result of type `Map&lt;String, Set&lt;String&gt;&gt;`.\r\n\r\nWould be really grateful if someone can show me at least a direction to go.\r\n\r\n**Note** that is a critical operation and should be done in few milliseconds, hence performance is important.","title":"Java-Stream - Sort and Transform elements using groupingBy()","body":"<p>Suppose I have the following domain class:</p>\n<pre><code>public class OrderRow {\n    private Long orderId;\n    private String action;\n    private LocalDateTime timestamp;\n    \n    // getters, constructor, etc.\n}\n</code></pre>\n<p>I have a following data set of <code>OrderRow</code>s :</p>\n<pre><code>OrderId     Action                  Timestamp\n3           Pay money               2015-05-27 12:48:47.000\n3           Select Item             2015-05-27 12:44:47.000\n1           Generate Payment        2015-05-27 12:55:47.000\n2           Pay money               2015-05-27 12:48:47.000\n2           Select Item             2015-05-27 12:44:47.000\n2           Deliver                 2015-05-27 12:55:47.000\n1           Generate Invoice        2015-05-27 12:48:47.000\n1           Create PO               2015-05-27 12:44:47.000\n3           Deliver                 2015-05-27 12:55:47.000\n</code></pre>\n<p>What I want to obtain the following <code>Map</code> from the sample data shown above:</p>\n<pre><code>[3] -&gt; [&quot;Select Item&quot;, &quot;Pay money&quot;, &quot;Deliver&quot;]\n[1] -&gt; [&quot;Create PO&quot;, &quot;Generate Invoice&quot;, &quot;Generate Payment&quot;]\n[2] -&gt; [&quot;Select Item&quot;, &quot;Pay money&quot;, &quot;Deliver&quot;]  \n</code></pre>\n<p>By performing below operations :</p>\n<ol>\n<li>I want to groupBy <code>orderId</code>.</li>\n<li>Sort actions by <code>timestamp</code>.</li>\n<li>Create a <code>Set</code> (as there can be duplicates) of <code>action</code>s.</li>\n</ol>\n<p>I am trying to do this in a single <code>groupingBy</code> operation as performing separate sorting, <code>mapping</code> operations take a lot of time if data set is huge.</p>\n<p>I've tried to do the following:</p>\n<pre><code>orderRows.stream()\n    .collect(Collectors.groupingBy(OrderRow::getOrderId, \n        Collectors.mapping(Function.identity(),\n            Collectors.toCollection(\n                () -&gt; new TreeSet&lt;&gt;(Comparator.comparing(e -&gt; e.timestamp))\n    ))));\n</code></pre>\n<p>But then I get output as <code>Map&lt;String, Set&lt;OrderRow&gt;&gt;</code>\nwhere as I need the result of type <code>Map&lt;String, Set&lt;String&gt;&gt;</code>.</p>\n<p>Would be really grateful if someone can show me at least a direction to go.</p>\n<p><strong>Note</strong> that is a critical operation and should be done in few milliseconds, hence performance is important.</p>\n"},{"tags":["java","list","java-stream","collectors"],"comments":[{"owner":{"account_id":11238821,"reputation":63,"user_id":8243925,"display_name":"noob123"},"score":0,"creation_date":1671204165,"post_id":74825309,"comment_id":132055431,"body_markdown":"I tried to summerize it again.","body":"I tried to summerize it again."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1671205969,"post_id":74825309,"comment_id":132056034,"body_markdown":"So you have a list of `SampleObject`s `payload` and you want to collect `ValueObject`s that are contained in the lists corresponding to the same `id` into a single `List`, and create a new `SampleObject` based on each aggregated `List`, right? And the result should be of type `List&lt;SampleObject&gt;` ?","body":"So you have a list of <code>SampleObject</code>s <code>payload</code> and you want to collect <code>ValueObject</code>s that are contained in the lists corresponding to the same <code>id</code> into a single <code>List</code>, and create a new <code>SampleObject</code> based on each aggregated <code>List</code>, right? And the result should be of type <code>List&lt;SampleObject&gt;</code> ?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1671206023,"post_id":74825309,"comment_id":132056062,"body_markdown":"You forget to provide the field name for List&lt;ValueObject&gt; in the `SampleObject`.","body":"You forget to provide the field name for List&lt;ValueObject&gt; in the <code>SampleObject</code>."},{"owner":{"account_id":11238821,"reputation":63,"user_id":8243925,"display_name":"noob123"},"score":0,"creation_date":1671207764,"post_id":74825309,"comment_id":132056645,"body_markdown":"The ValueObject just contains some strings. \nYes, within the List&lt;SampleObject&gt; are entities that have the same id but different ValueObject. As ValueObject is a list, I want to merge all enteries that have the same id to one SampleObject, this object should contain all ValueObjects of the duplicates. Thank you for your help!","body":"The ValueObject just contains some strings.  Yes, within the List&lt;SampleObject&gt; are entities that have the same id but different ValueObject. As ValueObject is a list, I want to merge all enteries that have the same id to one SampleObject, this object should contain all ValueObjects of the duplicates. Thank you for your help!"}],"answers":[{"comments":[{"owner":{"account_id":11238821,"reputation":63,"user_id":8243925,"display_name":"noob123"},"score":0,"creation_date":1671723870,"post_id":74827142,"comment_id":132163623,"body_markdown":"Thank you again for the answer but I have a question afterwards, does this change the order of the initial list?","body":"Thank you again for the answer but I have a question afterwards, does this change the order of the initial list?"}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671208264,"creation_date":1671207626,"answer_id":74827142,"question_id":74825309,"body_markdown":"# [`Collectors.flatMapping()`][flatMapping]\r\n\r\nIn order to combine together and store into a single list all the `ValueObject`s that correspond to the same `id` you can use Collector `flatMapping()`, which expects a *function* that produces a Stream from the element (*similarly to* `flatMap()` *operation*) and a downstream Collector which tells how the new elements produced by the *function* need to be stored.\r\n\r\nA combination of Collectors `groupingBy()` and `flatMapping()` would give you a map of type `Map&lt;UUID, List&lt;ValueObject&gt;&gt;`. To produce a `List` of `SampleObject`s out of it, you can create a stream map entries, transform each entry into a `SampleObject` and then collect the elements into a List.\r\n\r\nThat&#39;s how implementation might look like:\r\n\r\n```\r\nList&lt;SampleObject&gt; payload = // initializing the list\r\n    \r\nList&lt;SampleObject&gt; mergedData = payload.stream()\r\n    .collect(Collectors.groupingBy( // intermediate Map&lt;UUID, List&lt;ValueObject&gt;&gt;\r\n        SampleObject::getId,\r\n        Collectors.flatMapping(\r\n            sampleObject -&gt; sampleObject.getValues().stream(),\r\n            Collectors.toList()\r\n        )\r\n    ))\r\n    .entrySet().stream()\r\n    .map(entry -&gt; new SampleObject(entry.getKey(), entry.getValue()))\r\n    .toList(); // for Java 16+ or collect(Collectors.toList())\r\n```\r\n\r\n\r\n   [flatMapping]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#flatMapping(java.util.function.Function,java.util.stream.Collector)","title":"Merge/aggregate objects within a list java","body":"<h1><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#flatMapping(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\"><code>Collectors.flatMapping()</code></a></h1>\n<p>In order to combine together and store into a single list all the <code>ValueObject</code>s that correspond to the same <code>id</code> you can use Collector <code>flatMapping()</code>, which expects a <em>function</em> that produces a Stream from the element (<em>similarly to</em> <code>flatMap()</code> <em>operation</em>) and a downstream Collector which tells how the new elements produced by the <em>function</em> need to be stored.</p>\n<p>A combination of Collectors <code>groupingBy()</code> and <code>flatMapping()</code> would give you a map of type <code>Map&lt;UUID, List&lt;ValueObject&gt;&gt;</code>. To produce a <code>List</code> of <code>SampleObject</code>s out of it, you can create a stream map entries, transform each entry into a <code>SampleObject</code> and then collect the elements into a List.</p>\n<p>That's how implementation might look like:</p>\n<pre><code>List&lt;SampleObject&gt; payload = // initializing the list\n    \nList&lt;SampleObject&gt; mergedData = payload.stream()\n    .collect(Collectors.groupingBy( // intermediate Map&lt;UUID, List&lt;ValueObject&gt;&gt;\n        SampleObject::getId,\n        Collectors.flatMapping(\n            sampleObject -&gt; sampleObject.getValues().stream(),\n            Collectors.toList()\n        )\n    ))\n    .entrySet().stream()\n    .map(entry -&gt; new SampleObject(entry.getKey(), entry.getValue()))\n    .toList(); // for Java 16+ or collect(Collectors.toList())\n</code></pre>\n"}],"owner":{"account_id":11238821,"reputation":63,"user_id":8243925,"display_name":"noob123"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":312,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74827142,"answer_count":1,"score":2,"last_activity_date":1678142185,"creation_date":1671198376,"question_id":74825309,"body_markdown":"I have a custom type which looks like this:\r\n\r\n    public class SampleObject {\r\n        private UUID id;\r\n        private List&lt;ValueObject&gt; values;\r\n        \r\n        // getters, all-args constructor, etc.\r\n    }\r\n\r\nThe `ValueObject` just contains some Strings.\r\n\r\nAnd I have a `List` of `SampleObject`s `payload`. Within that list, there are several objects with the **same** `id` but different values in the` List&lt;ValueObject&gt;`.\r\n\r\nWhat I want to archive is to merge all objects with the same `id` and add all the different lists of the `ValueObject`s in one merged object.\r\n\r\nAt the end, I need again a list of `SampleObject`s.\r\n\r\nWhat I tried is the following: \r\n\r\n```\r\nList&lt;SampleObject&gt; payload = // initializing the List\r\n\r\npayload.stream().collect(Collectors.groupingBy(SampleObject::getId));\r\n```\r\n\r\nBut this returns a `Map` of `List` of `SampleObject`s. \r\nAnd I don&#39;t know how to merge then the objects under the value of this Map.","title":"Merge/aggregate objects within a list java","body":"<p>I have a custom type which looks like this:</p>\n<pre><code>public class SampleObject {\n    private UUID id;\n    private List&lt;ValueObject&gt; values;\n    \n    // getters, all-args constructor, etc.\n}\n</code></pre>\n<p>The <code>ValueObject</code> just contains some Strings.</p>\n<p>And I have a <code>List</code> of <code>SampleObject</code>s <code>payload</code>. Within that list, there are several objects with the <strong>same</strong> <code>id</code> but different values in the<code> List&lt;ValueObject&gt;</code>.</p>\n<p>What I want to archive is to merge all objects with the same <code>id</code> and add all the different lists of the <code>ValueObject</code>s in one merged object.</p>\n<p>At the end, I need again a list of <code>SampleObject</code>s.</p>\n<p>What I tried is the following:</p>\n<pre><code>List&lt;SampleObject&gt; payload = // initializing the List\n\npayload.stream().collect(Collectors.groupingBy(SampleObject::getId));\n</code></pre>\n<p>But this returns a <code>Map</code> of <code>List</code> of <code>SampleObject</code>s.\nAnd I don't know how to merge then the objects under the value of this Map.</p>\n"},{"tags":["java","spring-boot","aerospike"],"answers":[{"comments":[{"owner":{"account_id":352053,"reputation":522,"user_id":688926,"display_name":"Anastasiia Smirnova"},"score":0,"creation_date":1625830339,"post_id":68297876,"comment_id":120738321,"body_markdown":"`@class` can actually be turned off, but with the consequences. I&#39;ve added a comment how to do this. Could you please update your answer? Thanks!","body":"<code>@class</code> can actually be turned off, but with the consequences. I&#39;ve added a comment how to do this. Could you please update your answer? Thanks!"}],"tags":[],"owner":{"account_id":20706132,"reputation":795,"user_id":15203960,"display_name":"Roi Menashe"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649335029,"creation_date":1625732054,"answer_id":68297876,"question_id":68292496,"body_markdown":"Spring Data Aerospike stores both `@_class` and `@user_key` bins by default out of the box.\r\n\r\nWe store `@_class` bin in order to know how to map back the object to a Plain Old Java Object (POJO) when reading a record from Aerospike.\r\n\r\nWe store `@user_key` because Aerospike doesnt store the user key (only the digest) when saving a record, you can read more about the data model in Aerospike here: https://docs.aerospike.com/docs/architecture/data-model.html,\r\n so when you have historical data its helpful to know the original user key.\r\n\r\nYou can disable @_class, but with consequences. Please check Anastasiia Smirnova&#39;s comment.","title":"spring aerospike data - how to remove @user_key and @_class bins from sets","body":"<p>Spring Data Aerospike stores both <code>@_class</code> and <code>@user_key</code> bins by default out of the box.</p>\n<p>We store <code>@_class</code> bin in order to know how to map back the object to a Plain Old Java Object (POJO) when reading a record from Aerospike.</p>\n<p>We store <code>@user_key</code> because Aerospike doesnt store the user key (only the digest) when saving a record, you can read more about the data model in Aerospike here: <a href=\"https://docs.aerospike.com/docs/architecture/data-model.html\" rel=\"nofollow noreferrer\">https://docs.aerospike.com/docs/architecture/data-model.html</a>,\nso when you have historical data its helpful to know the original user key.</p>\n<p>You can disable @_class, but with consequences. Please check Anastasiia Smirnova's comment.</p>\n"},{"tags":[],"owner":{"account_id":352053,"reputation":522,"user_id":688926,"display_name":"Anastasiia Smirnova"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1625830108,"creation_date":1625830108,"answer_id":68316000,"question_id":68292496,"body_markdown":"Storing `@class` can be disabled via providing the following bean in the context:\r\n\r\n    @Bean\r\n    @Override\r\n    public AerospikeTypeAliasAccessor aerospikeTypeAliasAccessor() {\r\n        //we do not want to save @class field with type of document into Aerospike\r\n        return new AerospikeTypeAliasAccessor(null);\r\n    }\r\n\r\nNote, that disabling saving type information will make it impossible to read documents with generic data types.","title":"spring aerospike data - how to remove @user_key and @_class bins from sets","body":"<p>Storing <code>@class</code> can be disabled via providing the following bean in the context:</p>\n<pre><code>@Bean\n@Override\npublic AerospikeTypeAliasAccessor aerospikeTypeAliasAccessor() {\n    //we do not want to save @class field with type of document into Aerospike\n    return new AerospikeTypeAliasAccessor(null);\n}\n</code></pre>\n<p>Note, that disabling saving type information will make it impossible to read documents with generic data types.</p>\n"},{"comments":[{"owner":{"account_id":20706132,"reputation":795,"user_id":15203960,"display_name":"Roi Menashe"},"score":0,"creation_date":1678176640,"post_id":75656455,"comment_id":133478038,"body_markdown":"Just be aware of classes with the same name under different packages.","body":"Just be aware of classes with the same name under different packages."}],"tags":[],"owner":{"account_id":68404,"reputation":9917,"user_id":199593,"accept_rate":50,"display_name":"edigu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678141991,"creation_date":1678141991,"answer_id":75656455,"question_id":68292496,"body_markdown":"Yes, `@_class` is needed to map the data back to the java class you persisted, as others already mentioned. It might be not needed on use cases like write using spring-data-aerospike and read via another application or tool outside.\r\n\r\nI had a similar issue with Aerospike but my concern was slightly different: writing very long and repetitive class names with each record on a write-heavy application: sacrificing more bytes, more memory in long term, than actually needed.\r\n\r\nSolution to save some bytes per record was using a type alias:\r\n\r\n    import org.springframework.data.annotation.TypeAlias;\r\n\r\n    @Document\r\n    @TypeAlias(&quot;DeliveryRequest&quot;)\r\n    public class DeliveryRequest {}\r\n\r\nSo it reduced the space needed from `71 bytes`:\r\n\r\n    com.myorganization.servicemanager.delivery.domain.model.DeliveryRequest\r\n\r\nto `15 bytes`.\r\n\r\nWanted to share it as a hint for devs dealing with long and annoying class/package names in AQL outputs.\r\n\r\n\r\n\r\n","title":"spring aerospike data - how to remove @user_key and @_class bins from sets","body":"<p>Yes, <code>@_class</code> is needed to map the data back to the java class you persisted, as others already mentioned. It might be not needed on use cases like write using spring-data-aerospike and read via another application or tool outside.</p>\n<p>I had a similar issue with Aerospike but my concern was slightly different: writing very long and repetitive class names with each record on a write-heavy application: sacrificing more bytes, more memory in long term, than actually needed.</p>\n<p>Solution to save some bytes per record was using a type alias:</p>\n<pre><code>import org.springframework.data.annotation.TypeAlias;\n\n@Document\n@TypeAlias(&quot;DeliveryRequest&quot;)\npublic class DeliveryRequest {}\n</code></pre>\n<p>So it reduced the space needed from <code>71 bytes</code>:</p>\n<pre><code>com.myorganization.servicemanager.delivery.domain.model.DeliveryRequest\n</code></pre>\n<p>to <code>15 bytes</code>.</p>\n<p>Wanted to share it as a hint for devs dealing with long and annoying class/package names in AQL outputs.</p>\n"}],"owner":{"account_id":7867974,"reputation":41,"user_id":5946233,"display_name":"Shaho Shahbazpanahi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":522,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1678141991,"creation_date":1625688742,"question_id":68292496,"body_markdown":"I am new to the spring-aerospike-data, I was hoping if someone could let me know how can I remove `@user_key` and `@_class` bins when I send post request to the application. I am trying to use spring-areospike-data in my Rest-api. please see bleow example:\r\n\r\n - POM dependecis:\r\n```lang-xml\r\n\r\n     &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.aerospike&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-data-aerospike&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n```\r\n- Spring version: 2.5.1\r\n- Configruation classes:\r\n\r\n```lang-java\r\n\r\n    @Data\r\n    @Component\r\n    @ConfigurationProperties(prefix = &quot;aerospike&quot;)\r\n    public class AerospikeConfigurationProperties {\r\n     private String host;\r\n     private int port;\r\n     private String namespace;\r\n    }\r\n\r\n```\r\n\r\n```lang-java\r\n\r\n     @Configuration\r\n    @EnableConfigurationProperties(AerospikeConfigurationProperties.class)\r\n    @EnableAerospikeRepositories(basePackages = &quot;com.moneris.repositories&quot;)\r\n    public class AerospikeConfiguration extends AbstractAerospikeDataConfiguration {\r\n     @Autowired\r\n     private AerospikeConfigurationProperties aerospikeConfigurationProperties;\r\n     @Override\r\n     protected Collection&lt;Host&gt; getHosts() {\r\n        return Collections.singleton(new Host(aerospikeConfigurationProperties.getHost(), \r\n       aerospikeConfigurationProperties.getPort()));\r\n    }\r\n \t@Override\r\n    protected String nameSpace() {\r\n        return aerospikeConfigurationProperties.getNamespace();\r\n    }\r\n   }\r\n\r\n```\r\n\r\n\r\n\r\npom dependencies:\r\nhere is my POJO:\r\n\r\n``` lang-java\r\n\r\n    @Data\r\n    @Document\r\n    @AllArgsConstructor\r\n    public class UserApi {\r\n     @Id\r\n     private String apiKey;\r\n     private String apiName;\r\n     private int enabled;\r\n   \r\n   }\r\n\r\n```\r\n\r\n\r\nand here is the repo:\r\n\r\n```lang-java\r\n\r\n    public interface AerospikeUserApiKeyRepository extends CrudRepository&lt;UserApi, String&gt; {\r\n\t\r\n   }\r\n\r\n```\r\nand here is service:\r\n\r\n``` lang-java\r\n\r\n    @Service\r\n    @AllArgsConstructor\r\n    public class UserService {\r\n   \r\n        AerospikeUserApiKeyRepository aerospikeUserApiKeyRepository;\r\n    public void addUserApiKey(UserApi userApi) {\r\n    \taerospikeUserApiKeyRepository.save(userApi);\r\n    }\r\n    \r\n    public Optional&lt;UserApi&gt; getUserApi(String apiKey){\r\n    \treturn aerospikeUserApiKeyRepository.findById(apiKey);\r\n    }\r\n    \r\n}\r\n\r\n```\r\n\r\nhere the controller:\r\n\r\n```lang-java\r\n\r\n    @RestController\r\n    @AllArgsConstructor\r\n    public class UserController {\r\n    UserService userService;\r\n\r\n    @PostMapping(&quot;/users/apiKey&quot;)\r\n    public void addUserApi(@RequestBody UserApi userApi) {\r\n        userService.addUserApiKey(userApi);;\r\n    }\r\n    \r\n    @GetMapping(&quot;/users/apiKey/{apiKey}&quot;)\r\n         public Optional&lt;UserApi&gt; getUserApi(@PathVariable(&quot;apiKey&quot;) String apiKey) {\r\n        return userService.getUserApi(apiKey);\r\n    }\r\n}\r\n\r\n```\r\nwhen I run my applicaiton and send post request to the ```http://localhost:8080/users/apiKey``` with below json body\r\n\r\n```lang-json\r\n{\r\n    &quot;apiKey&quot;: &quot;ABC&quot;,\r\n    &quot;apiName&quot;: &quot;TEST&quot;,\r\n    &quot;enabled&quot;: 1\r\n}\r\n\r\n```\r\n I am geting below record in the aerospike db [![enter image description here][1]][1]\r\n is ther any way not stor ```@user_key and @_class``` in the sets? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kMKBU.png","title":"spring aerospike data - how to remove @user_key and @_class bins from sets","body":"<p>I am new to the spring-aerospike-data, I was hoping if someone could let me know how can I remove <code>@user_key</code> and <code>@_class</code> bins when I send post request to the application. I am trying to use spring-areospike-data in my Rest-api. please see bleow example:</p>\n<ul>\n<li>POM dependecis:</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>\n     &lt;dependency&gt;\n            &lt;groupId&gt;com.aerospike&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-aerospike&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<ul>\n<li>Spring version: 2.5.1</li>\n<li>Configruation classes:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Data\n    @Component\n    @ConfigurationProperties(prefix = &quot;aerospike&quot;)\n    public class AerospikeConfigurationProperties {\n     private String host;\n     private int port;\n     private String namespace;\n    }\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>\n     @Configuration\n    @EnableConfigurationProperties(AerospikeConfigurationProperties.class)\n    @EnableAerospikeRepositories(basePackages = &quot;com.moneris.repositories&quot;)\n    public class AerospikeConfiguration extends AbstractAerospikeDataConfiguration {\n     @Autowired\n     private AerospikeConfigurationProperties aerospikeConfigurationProperties;\n     @Override\n     protected Collection&lt;Host&gt; getHosts() {\n        return Collections.singleton(new Host(aerospikeConfigurationProperties.getHost(), \n       aerospikeConfigurationProperties.getPort()));\n    }\n    @Override\n    protected String nameSpace() {\n        return aerospikeConfigurationProperties.getNamespace();\n    }\n   }\n\n</code></pre>\n<p>pom dependencies:\nhere is my POJO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Data\n    @Document\n    @AllArgsConstructor\n    public class UserApi {\n     @Id\n     private String apiKey;\n     private String apiName;\n     private int enabled;\n   \n   }\n\n</code></pre>\n<p>and here is the repo:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    public interface AerospikeUserApiKeyRepository extends CrudRepository&lt;UserApi, String&gt; {\n    \n   }\n\n</code></pre>\n<p>and here is service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Service\n    @AllArgsConstructor\n    public class UserService {\n   \n        AerospikeUserApiKeyRepository aerospikeUserApiKeyRepository;\n    public void addUserApiKey(UserApi userApi) {\n        aerospikeUserApiKeyRepository.save(userApi);\n    }\n    \n    public Optional&lt;UserApi&gt; getUserApi(String apiKey){\n        return aerospikeUserApiKeyRepository.findById(apiKey);\n    }\n    \n}\n\n</code></pre>\n<p>here the controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @RestController\n    @AllArgsConstructor\n    public class UserController {\n    UserService userService;\n\n    @PostMapping(&quot;/users/apiKey&quot;)\n    public void addUserApi(@RequestBody UserApi userApi) {\n        userService.addUserApiKey(userApi);;\n    }\n    \n    @GetMapping(&quot;/users/apiKey/{apiKey}&quot;)\n         public Optional&lt;UserApi&gt; getUserApi(@PathVariable(&quot;apiKey&quot;) String apiKey) {\n        return userService.getUserApi(apiKey);\n    }\n}\n\n</code></pre>\n<p>when I run my applicaiton and send post request to the <code>http://localhost:8080/users/apiKey</code> with below json body</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;apiKey&quot;: &quot;ABC&quot;,\n    &quot;apiName&quot;: &quot;TEST&quot;,\n    &quot;enabled&quot;: 1\n}\n\n</code></pre>\n<p>I am geting below record in the aerospike db <a href=\"https://i.stack.imgur.com/kMKBU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kMKBU.png\" alt=\"enter image description here\" /></a>\nis ther any way not stor <code>@user_key and @_class</code> in the sets?</p>\n"},{"tags":["java","javafx","inputstream","fileinputstream"],"answers":[{"comments":[{"owner":{"account_id":12615780,"reputation":35,"user_id":9173300,"accept_rate":100,"display_name":"Splanas00"},"score":0,"creation_date":1521286099,"post_id":49335227,"comment_id":85672402,"body_markdown":"Thanks a lot,  it worked.  But there is a way to use JavaFX instead of java.awt.image.BufferedImage (AWT)?","body":"Thanks a lot,  it worked.  But there is a way to use JavaFX instead of java.awt.image.BufferedImage (AWT)?"},{"owner":{"account_id":10594997,"reputation":531,"user_id":7804060,"display_name":"Liudmila Kornilova"},"score":0,"creation_date":1521287495,"post_id":49335227,"comment_id":85672773,"body_markdown":"I tried to google it but there are lots of solutions for android and I know nothing about it (I am not sure if you write this code for android or not). You need to convert Image to byte array and then create ByteArrayInputStream, so you can try _ImageView to byte array_ search request","body":"I tried to google it but there are lots of solutions for android and I know nothing about it (I am not sure if you write this code for android or not). You need to convert Image to byte array and then create ByteArrayInputStream, so you can try <i>ImageView to byte array</i> search request"}],"tags":[],"owner":{"account_id":10594997,"reputation":531,"user_id":7804060,"display_name":"Liudmila Kornilova"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1521284568,"creation_date":1521284568,"answer_id":49335227,"question_id":49335128,"body_markdown":"What if you get bytes from an image and create ByteArrayInputStream?\r\n\r\n    ImageView view = new ImageView();\r\n    BufferedImage bImage = SwingFXUtils.fromFXImage(view.getImage(), null);\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    try {\r\n        ImageIO.write(bImage, &quot;png&quot;, outputStream);\r\n        byte[] res  = outputStream.toByteArray();\r\n        InputStream inputStream = new ByteArrayInputStream(res);\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }","title":"How to convert a JavaFX ImageView to InputStream","body":"<p>What if you get bytes from an image and create ByteArrayInputStream?</p>\n\n<pre><code>ImageView view = new ImageView();\nBufferedImage bImage = SwingFXUtils.fromFXImage(view.getImage(), null);\nByteArrayOutputStream outputStream = new ByteArrayOutputStream();\ntry {\n    ImageIO.write(bImage, \"png\", outputStream);\n    byte[] res  = outputStream.toByteArray();\n    InputStream inputStream = new ByteArrayInputStream(res);\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":12615780,"reputation":35,"user_id":9173300,"accept_rate":100,"display_name":"Splanas00"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2403,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49335227,"answer_count":1,"score":1,"last_activity_date":1678141946,"creation_date":1521283977,"question_id":49335128,"body_markdown":"I have an `ImageView` that contains an image, what I need is to make a getImage() of the `ImageView` and convert it to an `InputStream`. This is the code that I have:\r\n\r\n    try {\r\n\r\n        File fileImage = new File(ivImage.getImage());\r\n    \r\n        InputStream isImage = (InputStream) new FileInputStream(fileImage);\r\n    \r\n    } catch (FileNotFoundException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n\r\nIs there a way to get the `ImageView` image and convert it to `InputStream` ?\r\n\r\nThanks","title":"How to convert a JavaFX ImageView to InputStream","body":"<p>I have an <code>ImageView</code> that contains an image, what I need is to make a getImage() of the <code>ImageView</code> and convert it to an <code>InputStream</code>. This is the code that I have:</p>\n\n<pre><code>try {\n\n    File fileImage = new File(ivImage.getImage());\n\n    InputStream isImage = (InputStream) new FileInputStream(fileImage);\n\n} catch (FileNotFoundException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>Is there a way to get the <code>ImageView</code> image and convert it to <code>InputStream</code> ?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","intellij-idea","compilation","jetbrains-ide"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":3,"creation_date":1678142083,"post_id":75656361,"comment_id":133473028,"body_markdown":"You need to tell IntelliJ what the &quot;sources root&quot; folder(s) is/are, that is, the root of the source tree.  You should be able to do that in your project window - right-click on the folder, and select &quot;Mark Directory As&quot; | &quot;Sources Root&quot;.","body":"You need to tell IntelliJ what the &quot;sources root&quot; folder(s) is/are, that is, the root of the source tree.  You should be able to do that in your project window - right-click on the folder, and select &quot;Mark Directory As&quot; | &quot;Sources Root&quot;."},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1678159404,"post_id":75656361,"comment_id":133475364,"body_markdown":"Dawood&#39;s suggestion should be right here. See here for details: https://www.jetbrains.com/help/idea/content-roots.html","body":"Dawood&#39;s suggestion should be right here. See here for details: <a href=\"https://www.jetbrains.com/help/idea/content-roots.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/content-roots.html</a>"}],"owner":{"account_id":25761004,"reputation":45,"user_id":19511943,"display_name":"UrosDjosic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678141160,"creation_date":1678141160,"question_id":75656361,"body_markdown":"For months now, I have been using IntelliJ IDEA to write my Java projects. I have always made them in the same directory, and never had any problems with the IDE.\r\n\r\nHowever, after starting a new college course of OOP in Java, I decided to save all my college projects in a seperate directory. To my surpirse, IntelliJ IDEA simply REFUSED to compile any projects made here.\r\n\r\nThe specific error I get is:\r\n\r\n```\r\nError: Could not find or load main class Main\r\nCaused by: java.lang.ClassNotFoundException: Main\r\n\r\nProcess finished with exit code 1\r\n```\r\nIt suggests &#39;rebuilding the project&#39;, which results in the following:\r\n\r\n```\r\nInternal error (java.io.IOException): Cannot find IntelliJ IDEA project files at C:\\IMPERIUM ROMANUM\\Fakultet Tehnickih Nauka\\Semestar II\\Objektno Orijentisano Programiranje I\\Vebe\\VEZBE_00 et VEZBE_01\\Vezbe01\r\njava.io.IOException: Cannot find IntelliJ IDEA project files at C:\\IMPERIUM ROMANUM\\Fakultet Tehnickih Nauka\\Semestar II\\Objektno Orijentisano Programiranje I\\Vebe\\VEZBE_00 et VEZBE_01\\Vezbe01\r\n\tat org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:124)\r\n\tat org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:101)\r\n\tat org.jetbrains.jps.model.serialization.impl.JpsSerializationManagerImpl.loadModel(JpsSerializationManagerImpl.java:23)\r\n\tat org.jetbrains.jps.cmdline.JpsModelLoaderImpl.loadModel(JpsModelLoaderImpl.java:34)\r\n\tat org.jetbrains.jps.cmdline.BuildRunner.load(BuildRunner.java:68)\r\n\tat org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:347)\r\n\tat org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:193)\r\n\tat org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:211)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n\r\nPlease perform full project rebuild (Build | Rebuild Project)\r\n```\r\n\r\nThis is incredibly frustrating, since we are talking about the simplest possible &quot;Hello World&quot; code, which has 0 complexity and doesn&#39;t even use any other classes except Main.\r\n\r\nWhat&#39;s funny is that this same code compiles perfectly through the command prompt with\r\n`javac Main.java`\r\n\r\nand runs without any issues with\r\n`java Main`\r\n\r\nDoes anyone have any similar experiences? Why is IntelliJ behaving like this, while working fine in all previous projects?","title":"IntelliJ IDEA refuses to work after changing directory in which I make Java projects","body":"<p>For months now, I have been using IntelliJ IDEA to write my Java projects. I have always made them in the same directory, and never had any problems with the IDE.</p>\n<p>However, after starting a new college course of OOP in Java, I decided to save all my college projects in a seperate directory. To my surpirse, IntelliJ IDEA simply REFUSED to compile any projects made here.</p>\n<p>The specific error I get is:</p>\n<pre><code>Error: Could not find or load main class Main\nCaused by: java.lang.ClassNotFoundException: Main\n\nProcess finished with exit code 1\n</code></pre>\n<p>It suggests 'rebuilding the project', which results in the following:</p>\n<pre><code>Internal error (java.io.IOException): Cannot find IntelliJ IDEA project files at C:\\IMPERIUM ROMANUM\\Fakultet Tehnickih Nauka\\Semestar II\\Objektno Orijentisano Programiranje I\\Vebe\\VEZBE_00 et VEZBE_01\\Vezbe01\njava.io.IOException: Cannot find IntelliJ IDEA project files at C:\\IMPERIUM ROMANUM\\Fakultet Tehnickih Nauka\\Semestar II\\Objektno Orijentisano Programiranje I\\Vebe\\VEZBE_00 et VEZBE_01\\Vezbe01\n    at org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:124)\n    at org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:101)\n    at org.jetbrains.jps.model.serialization.impl.JpsSerializationManagerImpl.loadModel(JpsSerializationManagerImpl.java:23)\n    at org.jetbrains.jps.cmdline.JpsModelLoaderImpl.loadModel(JpsModelLoaderImpl.java:34)\n    at org.jetbrains.jps.cmdline.BuildRunner.load(BuildRunner.java:68)\n    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:347)\n    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:193)\n    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:211)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\n\nPlease perform full project rebuild (Build | Rebuild Project)\n</code></pre>\n<p>This is incredibly frustrating, since we are talking about the simplest possible &quot;Hello World&quot; code, which has 0 complexity and doesn't even use any other classes except Main.</p>\n<p>What's funny is that this same code compiles perfectly through the command prompt with\n<code>javac Main.java</code></p>\n<p>and runs without any issues with\n<code>java Main</code></p>\n<p>Does anyone have any similar experiences? Why is IntelliJ behaving like this, while working fine in all previous projects?</p>\n"},{"tags":["java","appium","desktop-application","winappdriver"],"owner":{"account_id":19116976,"reputation":11,"user_id":13961654,"display_name":"Yogev Abr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":776,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678141049,"creation_date":1595229594,"question_id":62990377,"body_markdown":"I am used to test Android and IOS in Appium, but now doing some Windows PC application automation, and want to use the same design pattern as in mobile apps - Page Object.&lt;br&gt;\r\nFor each element in my app I have `automationId` value, and I am trying to assign it using the `WindowsFindBy` annoatation, as follows:&lt;br&gt;\r\n\r\n    @WindowsFindBy(id = &quot;textBoxDirectory&quot;)\r\n    WebElement textBoxDirectory;\r\n\r\n\r\nAnd I event tried using the accessibility value, but get the same result as you can see in driver logs.\r\n&lt;br&gt;\r\n\r\n    @WindowsFindBy(accessibility = &quot;textBoxDirectory&quot;)\r\n    WebElement textBoxDirectory;\r\n\r\nThe page constructor does this:\r\n\r\n    public PageObject(WindowsDriver driver) {\r\n        this.driver = driver;\r\n        PageFactory.initElements(driver, this);\r\n    }\r\n\r\nin WinAppDriver log, I see that the driver is trying to find the element by **name** and not by **ID** as expected: &lt;br&gt;\r\n\r\n    {&quot;using&quot;:&quot;name&quot;,&quot;value&quot;:&quot;textBoxDirectory&quot;}\r\n    HTTP/1.1 404 Not Found\r\n    Content-Length: 139\r\n    Content-Type: application/json\r\n    \r\n    {&quot;status&quot;:7,&quot;value&quot;:{&quot;error&quot;:&quot;no such element&quot;,&quot;message&quot;:&quot;An element could not be located on the page using the given search parameters.&quot;}}\r\n\r\nWhen I try to access the field the primitive way: `textBoxDirectory = driver.findElementByAccessibilityId(&quot;textBoxDirectory&quot;);` I get the element succesfully.\r\n&lt;br&gt;\r\nThanks a lot for your help!\r\n","title":"PageFactory using Appium to test Windows desktop app","body":"<p>I am used to test Android and IOS in Appium, but now doing some Windows PC application automation, and want to use the same design pattern as in mobile apps - Page Object.<br>\nFor each element in my app I have <code>automationId</code> value, and I am trying to assign it using the <code>WindowsFindBy</code> annoatation, as follows:<br></p>\n<pre><code>@WindowsFindBy(id = &quot;textBoxDirectory&quot;)\nWebElement textBoxDirectory;\n</code></pre>\n<p>And I event tried using the accessibility value, but get the same result as you can see in driver logs.\n<br></p>\n<pre><code>@WindowsFindBy(accessibility = &quot;textBoxDirectory&quot;)\nWebElement textBoxDirectory;\n</code></pre>\n<p>The page constructor does this:</p>\n<pre><code>public PageObject(WindowsDriver driver) {\n    this.driver = driver;\n    PageFactory.initElements(driver, this);\n}\n</code></pre>\n<p>in WinAppDriver log, I see that the driver is trying to find the element by <strong>name</strong> and not by <strong>ID</strong> as expected: <br></p>\n<pre><code>{&quot;using&quot;:&quot;name&quot;,&quot;value&quot;:&quot;textBoxDirectory&quot;}\nHTTP/1.1 404 Not Found\nContent-Length: 139\nContent-Type: application/json\n\n{&quot;status&quot;:7,&quot;value&quot;:{&quot;error&quot;:&quot;no such element&quot;,&quot;message&quot;:&quot;An element could not be located on the page using the given search parameters.&quot;}}\n</code></pre>\n<p>When I try to access the field the primitive way: <code>textBoxDirectory = driver.findElementByAccessibilityId(&quot;textBoxDirectory&quot;);</code> I get the element succesfully.\n<br>\nThanks a lot for your help!</p>\n"},{"tags":["java","hashmap","java-stream","collectors"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1671552736,"post_id":74865728,"comment_id":132121548,"body_markdown":"`List&lt;String&gt;` is the _value_ type of your map, not the key type. You&#39;ll want a downstream collector to be able to map to the appropriate outputs instead of your source objects (e.g. `&quot;lizzard&quot;` instead of `{&quot;A&quot;, &quot;lizzard&quot;}`). Something akin to `Collectors.mapping(e -&gt; e[0], Collectors.toList())` in place of your current `#toList` call.","body":"<code>List&lt;String&gt;</code> is the <i>value</i> type of your map, not the key type. You&#39;ll want a downstream collector to be able to map to the appropriate outputs instead of your source objects (e.g. <code>&quot;lizzard&quot;</code> instead of <code>{&quot;A&quot;, &quot;lizzard&quot;}</code>). Something akin to <code>Collectors.mapping(e -&gt; e[0], Collectors.toList())</code> in place of your current <code>#toList</code> call."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671556107,"creation_date":1671556107,"answer_id":74866515,"question_id":74865728,"body_markdown":"Since elements in the stream are of type `String[]`, with your current collector\r\n```\r\nCollectors.groupingBy(e-&gt; e[1], Collectors.toList())\r\n```\r\nMap&#39;s Values would be of type `List&lt;String[]&gt;` (whilst you need a `List&lt;String&gt;`, not a list of arrays). Hence, you need to transform the stream elements received by the downstream Collector before storing them into a List.\r\n\r\nAs *@Rogue* has pointed out in the [comment][comment] you need to use Collector [`mapping()`][mapping] and the downstream of `groupingBy()`. And `toList()` should be in turn provided as the downstream Collector of `mapping()`.\r\n\r\n```\r\nString[][] guests = {\r\n    {&quot;A&quot;, &quot;lizzard&quot;},\r\n    {&quot;B&quot;, &quot;Gorilla&quot;},\r\n    {&quot;C&quot;, &quot;lizzard&quot;},\r\n    {&quot;D&quot;, &quot;Gorilla&quot;},\r\n    {&quot;E&quot;, &quot;lizzard&quot;},\r\n    {&quot;F&quot;, &quot;Gorilla&quot;},\r\n    {&quot;G&quot;, &quot;lizzard&quot;},\r\n    {&quot;H&quot;, &quot;Monkey&quot;},\r\n    {&quot;I&quot;, &quot;lizzard&quot;}\r\n};\r\n        \r\nMap&lt;String, List&lt;String&gt;&gt; guestMap = Arrays.stream(guests)\r\n    .collect(Collectors.groupingBy(\r\n        e -&gt; e[1],\r\n        Collectors.mapping(e -&gt; e[0],\r\n            Collectors.toList())\r\n    ));\r\n    \r\nguestMap.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + v));\r\n```\r\n\r\n*Output:*\r\n\r\n```\r\nMonkey -&gt; [H]\r\nlizzard -&gt; [A, C, E, G, I]\r\nGorilla -&gt; [B, D, F]\r\n```\r\n\r\n\r\n   [comment]: https://stackoverflow.com/questions/74865728/converting-2d-string-array-map-in-java8#comment132121548_74865728\r\n\r\n   [mapping]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#mapping(java.util.function.Function,java.util.stream.Collector)","title":"Converting 2d String Array into a Map in Java8","body":"<p>Since elements in the stream are of type <code>String[]</code>, with your current collector</p>\n<pre><code>Collectors.groupingBy(e-&gt; e[1], Collectors.toList())\n</code></pre>\n<p>Map's Values would be of type <code>List&lt;String[]&gt;</code> (whilst you need a <code>List&lt;String&gt;</code>, not a list of arrays). Hence, you need to transform the stream elements received by the downstream Collector before storing them into a List.</p>\n<p>As <em>@Rogue</em> has pointed out in the <a href=\"https://stackoverflow.com/questions/74865728/converting-2d-string-array-map-in-java8#comment132121548_74865728\">comment</a> you need to use Collector <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#mapping(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\"><code>mapping()</code></a> and the downstream of <code>groupingBy()</code>. And <code>toList()</code> should be in turn provided as the downstream Collector of <code>mapping()</code>.</p>\n<pre><code>String[][] guests = {\n    {&quot;A&quot;, &quot;lizzard&quot;},\n    {&quot;B&quot;, &quot;Gorilla&quot;},\n    {&quot;C&quot;, &quot;lizzard&quot;},\n    {&quot;D&quot;, &quot;Gorilla&quot;},\n    {&quot;E&quot;, &quot;lizzard&quot;},\n    {&quot;F&quot;, &quot;Gorilla&quot;},\n    {&quot;G&quot;, &quot;lizzard&quot;},\n    {&quot;H&quot;, &quot;Monkey&quot;},\n    {&quot;I&quot;, &quot;lizzard&quot;}\n};\n        \nMap&lt;String, List&lt;String&gt;&gt; guestMap = Arrays.stream(guests)\n    .collect(Collectors.groupingBy(\n        e -&gt; e[1],\n        Collectors.mapping(e -&gt; e[0],\n            Collectors.toList())\n    ));\n    \nguestMap.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + v));\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Monkey -&gt; [H]\nlizzard -&gt; [A, C, E, G, I]\nGorilla -&gt; [B, D, F]\n</code></pre>\n"}],"owner":{"account_id":7819979,"reputation":1197,"user_id":5913407,"accept_rate":57,"display_name":"LowCool"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74866515,"answer_count":1,"score":0,"last_activity_date":1678141047,"creation_date":1671551888,"question_id":74865728,"body_markdown":"Seems like a very basic question, I want to convert my 2d string array into a `Map` with `List` as a Value.\r\n\r\nI&#39;ve tried something like below:\r\n\r\n```\r\nMap&lt;String, List&lt;String&gt;&gt; guestMap = Arrays\r\n    .stream(guests)\r\n    .collect(Collectors.groupingBy(e-&gt; e[1], Collectors.toList()));\r\n```\r\n\r\nMy nested array of strings like this\r\n\r\n```\r\nString[][] guests = {\r\n    {&quot;A&quot;, &quot;lizzard&quot;},\r\n    {&quot;B&quot;, &quot;Gorilla&quot;},\r\n    {&quot;C&quot;, &quot;lizzard&quot;},\r\n    {&quot;D&quot;, &quot;Gorilla&quot;},\r\n    {&quot;E&quot;, &quot;lizzard&quot;},\r\n    {&quot;F&quot;, &quot;Gorilla&quot;},\r\n    {&quot;G&quot;, &quot;lizzard&quot;},\r\n    {&quot;H&quot;, &quot;Monkey&quot;},\r\n    {&quot;I&quot;, &quot;lizzard&quot;}\r\n};\r\n```\r\n\r\nI know about a way of solving it using `computeIfAbsent()`. But I&#39;m looking for a solution purely using Stream API.","title":"Converting 2d String Array into a Map in Java8","body":"<p>Seems like a very basic question, I want to convert my 2d string array into a <code>Map</code> with <code>List</code> as a Value.</p>\n<p>I've tried something like below:</p>\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; guestMap = Arrays\n    .stream(guests)\n    .collect(Collectors.groupingBy(e-&gt; e[1], Collectors.toList()));\n</code></pre>\n<p>My nested array of strings like this</p>\n<pre><code>String[][] guests = {\n    {&quot;A&quot;, &quot;lizzard&quot;},\n    {&quot;B&quot;, &quot;Gorilla&quot;},\n    {&quot;C&quot;, &quot;lizzard&quot;},\n    {&quot;D&quot;, &quot;Gorilla&quot;},\n    {&quot;E&quot;, &quot;lizzard&quot;},\n    {&quot;F&quot;, &quot;Gorilla&quot;},\n    {&quot;G&quot;, &quot;lizzard&quot;},\n    {&quot;H&quot;, &quot;Monkey&quot;},\n    {&quot;I&quot;, &quot;lizzard&quot;}\n};\n</code></pre>\n<p>I know about a way of solving it using <code>computeIfAbsent()</code>. But I'm looking for a solution purely using Stream API.</p>\n"},{"tags":["java","java-stream"],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673047029,"creation_date":1673047029,"answer_id":75036964,"question_id":75032886,"body_markdown":"The attempt is actually pretty close. We can achieve the desired result with the following code snippet:\r\n\r\n    Map&lt;Integer, List&lt;X&gt;&gt; map = \r\n        stream.collect(Collectors.groupingBy(x -&gt; x.getT().getHour()));;\r\n\r\n[&lt;kbd&gt;`Ideone.com` demo&lt;/kbd&gt;][ideone]\r\n\r\n[ideone]: https://ideone.com/CWLnx3","title":"How to use groupingby() to create a map from a stream in java, but grouping by not only by an attribute","body":"<p>The attempt is actually pretty close. We can achieve the desired result with the following code snippet:</p>\n<pre><code>Map&lt;Integer, List&lt;X&gt;&gt; map = \n    stream.collect(Collectors.groupingBy(x -&gt; x.getT().getHour()));;\n</code></pre>\n<p><a href=\"https://ideone.com/CWLnx3\" rel=\"nofollow noreferrer\"><kbd><code>Ideone.com</code> demo</kbd></a></p>\n"}],"owner":{"account_id":27454458,"reputation":3,"user_id":20946161,"display_name":"Cata Lebedina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75036964,"answer_count":1,"score":-1,"last_activity_date":1678141022,"creation_date":1673018852,"question_id":75032886,"body_markdown":"I have a stream from elements of a class x. One of the arributes (t) of the class x is from type LocalDateTime and I need to group the elements by hours.\r\n\r\nI tried something like this:\r\n\r\n    Map&lt;Integer, List&lt;x&gt;&gt; m = stream.collect(Collectors.groupingBy(x::t.getHour));\r\n\r\nBut this syntax doesn&#180;t work, any other idea of what i might be able to do?","title":"How to use groupingby() to create a map from a stream in java, but grouping by not only by an attribute","body":"<p>I have a stream from elements of a class x. One of the arributes (t) of the class x is from type LocalDateTime and I need to group the elements by hours.</p>\n<p>I tried something like this:</p>\n<pre><code>Map&lt;Integer, List&lt;x&gt;&gt; m = stream.collect(Collectors.groupingBy(x::t.getHour));\n</code></pre>\n<p>But this syntax doesnt work, any other idea of what i might be able to do?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1675019093,"post_id":75276696,"comment_id":132833523,"body_markdown":"Maps do not easily lend themselves to recursive definitions like `Map&lt;String, Map&lt;string, Map&lt;string, ....&gt;&gt;&gt;`  It would be something like `Map&lt;String, Object&gt;` and require casting to use.  I would recommend you use an alternative data structure such as a linked list to hold the hierarchy.","body":"Maps do not easily lend themselves to recursive definitions like <code>Map&lt;String, Map&lt;string, Map&lt;string, ....&gt;&gt;&gt;</code>  It would be something like <code>Map&lt;String, Object&gt;</code> and require casting to use.  I would recommend you use an alternative data structure such as a linked list to hold the hierarchy."}],"answers":[{"comments":[{"owner":{"account_id":4625545,"reputation":39,"user_id":3749477,"display_name":"gravatasufoca"},"score":0,"creation_date":1675021948,"post_id":75277730,"comment_id":132834075,"body_markdown":"Perfect. You have such a privileged mind.","body":"Perfect. You have such a privileged mind."}],"tags":[],"owner":{"account_id":21401510,"reputation":66,"user_id":15763551,"display_name":"MahmoudFawzyKhalil"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675020323,"creation_date":1675020323,"answer_id":75277730,"question_id":75276696,"body_markdown":"Here is how you could do this using a Map&lt;String, Map&gt; and [mutable reduction][1] using the [collect](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-) method that takes a supplier, accumulator, and combiner. The API is not the most pleasant to use, as WJS pointed out. \r\n\r\nIt requires unchecked casts because you can&#39;t represent these recursive structures of unknown depth using generics.\r\n\r\n\r\n    class Scratch {\r\n    public static void main(String[] args) {\r\n        var list = new String[]{&quot;caso.id&quot;,\r\n                &quot;caso.unidadeDoCaso.id&quot;,\r\n                &quot;caso.etiqueta&quot;,\r\n                &quot;caso.sigiloso&quot;,\r\n                &quot;caso.idPecaSegredoJustica&quot;,\r\n                &quot;caso.numeroAno&quot;,\r\n                &quot;caso.numero&quot;,\r\n                &quot;caso.competencia.id&quot;,\r\n                &quot;caso.competencia.ativo&quot;,\r\n                &quot;caso.competencia.nome&quot;,\r\n                &quot;caso.responsavel.id&quot;,\r\n                &quot;caso.responsavel.dadosPessoais.nome&quot;,\r\n                &quot;caso.escrivao.id&quot;,\r\n                &quot;caso.escrivao.dadosPessoais.nome&quot;};\r\n\r\n        Map&lt;String, Map&gt; result = Arrays.stream(list).collect(HashMap::new, Scratch::mapRecursively, HashMap::putAll);\r\n\r\n        System.out.println(result);\r\n        // {caso={unidadeDoCaso={id=null}, etiqueta=null, idPecaSegredoJustica=null, escrivao={id=null, dadosPessoais={nome=null}}, sigiloso=null, numero=null, id=null, numeroAno=null, responsavel={id=null, dadosPessoais={nome=null}}, competencia={ativo=null, nome=null, id=null}}}\r\n\r\n        System.out.println(result.get(&quot;caso&quot;).keySet());\r\n        // [unidadeDoCaso, etiqueta, idPecaSegredoJustica, escrivao, sigiloso, numero, id, numeroAno, responsavel, competencia]\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private static void mapRecursively(HashMap&lt;String, Map&gt; map, String s) {\r\n        // first recursion: s = caso.competencia.id\r\n        // second recursion: s = id\r\n\r\n        int dot = s.indexOf(&#39;.&#39;);\r\n\r\n        // Base case 1\r\n        if (dot == -1) {\r\n            map.put(s, null);\r\n            return;\r\n        }\r\n\r\n        String key = s.substring(0, dot); // caso\r\n        String value = s.substring(dot + 1); // competencia.id\r\n\r\n        boolean isFirstTimeToComeAcrossWord = !map.containsKey(key);\r\n        if (isFirstTimeToComeAcrossWord) {\r\n            map.put(key, new HashMap&lt;&gt;());\r\n        }\r\n\r\n        // Base case 2\r\n        int dot2 = value.indexOf(&#39;.&#39;);\r\n\r\n        if (dot2 == -1) {\r\n            map.get(key).put(value, null);\r\n            return;\r\n        }\r\n\r\n        String newKey = value.substring(0, dot2); // competencia\r\n        String leftover = value.substring(dot2 + 1); // id\r\n\r\n        boolean isFirstTimeWeComeAcrossNestedWord = !map.get(key).containsKey(newKey);\r\n        // Recursive cases\r\n        if (isFirstTimeWeComeAcrossNestedWord) {\r\n            var newMap = new HashMap&lt;String, Map&gt;();\r\n            map.get(key).put(newKey, newMap);\r\n            mapRecursively(newMap, leftover);\r\n        } else {\r\n            mapRecursively((HashMap&lt;String, Map&gt;) map.get(key).get(newKey), leftover);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction","title":"Java stream groupingby nested string","body":"<p>Here is how you could do this using a Map&lt;String, Map&gt; and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction\" rel=\"nofollow noreferrer\">mutable reduction</a> using the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-\" rel=\"nofollow noreferrer\">collect</a> method that takes a supplier, accumulator, and combiner. The API is not the most pleasant to use, as WJS pointed out.</p>\n<p>It requires unchecked casts because you can't represent these recursive structures of unknown depth using generics.</p>\n<pre><code>class Scratch {\npublic static void main(String[] args) {\n    var list = new String[]{&quot;caso.id&quot;,\n            &quot;caso.unidadeDoCaso.id&quot;,\n            &quot;caso.etiqueta&quot;,\n            &quot;caso.sigiloso&quot;,\n            &quot;caso.idPecaSegredoJustica&quot;,\n            &quot;caso.numeroAno&quot;,\n            &quot;caso.numero&quot;,\n            &quot;caso.competencia.id&quot;,\n            &quot;caso.competencia.ativo&quot;,\n            &quot;caso.competencia.nome&quot;,\n            &quot;caso.responsavel.id&quot;,\n            &quot;caso.responsavel.dadosPessoais.nome&quot;,\n            &quot;caso.escrivao.id&quot;,\n            &quot;caso.escrivao.dadosPessoais.nome&quot;};\n\n    Map&lt;String, Map&gt; result = Arrays.stream(list).collect(HashMap::new, Scratch::mapRecursively, HashMap::putAll);\n\n    System.out.println(result);\n    // {caso={unidadeDoCaso={id=null}, etiqueta=null, idPecaSegredoJustica=null, escrivao={id=null, dadosPessoais={nome=null}}, sigiloso=null, numero=null, id=null, numeroAno=null, responsavel={id=null, dadosPessoais={nome=null}}, competencia={ativo=null, nome=null, id=null}}}\n\n    System.out.println(result.get(&quot;caso&quot;).keySet());\n    // [unidadeDoCaso, etiqueta, idPecaSegredoJustica, escrivao, sigiloso, numero, id, numeroAno, responsavel, competencia]\n}\n\n@SuppressWarnings(&quot;unchecked&quot;)\nprivate static void mapRecursively(HashMap&lt;String, Map&gt; map, String s) {\n    // first recursion: s = caso.competencia.id\n    // second recursion: s = id\n\n    int dot = s.indexOf('.');\n\n    // Base case 1\n    if (dot == -1) {\n        map.put(s, null);\n        return;\n    }\n\n    String key = s.substring(0, dot); // caso\n    String value = s.substring(dot + 1); // competencia.id\n\n    boolean isFirstTimeToComeAcrossWord = !map.containsKey(key);\n    if (isFirstTimeToComeAcrossWord) {\n        map.put(key, new HashMap&lt;&gt;());\n    }\n\n    // Base case 2\n    int dot2 = value.indexOf('.');\n\n    if (dot2 == -1) {\n        map.get(key).put(value, null);\n        return;\n    }\n\n    String newKey = value.substring(0, dot2); // competencia\n    String leftover = value.substring(dot2 + 1); // id\n\n    boolean isFirstTimeWeComeAcrossNestedWord = !map.get(key).containsKey(newKey);\n    // Recursive cases\n    if (isFirstTimeWeComeAcrossNestedWord) {\n        var newMap = new HashMap&lt;String, Map&gt;();\n        map.get(key).put(newKey, newMap);\n        mapRecursively(newMap, leftover);\n    } else {\n        mapRecursively((HashMap&lt;String, Map&gt;) map.get(key).get(newKey), leftover);\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":4625545,"reputation":39,"user_id":3749477,"display_name":"gravatasufoca"},"score":0,"creation_date":1675081709,"post_id":75278368,"comment_id":132844931,"body_markdown":"Great. Very simple and straight to the result.","body":"Great. Very simple and straight to the result."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675026156,"creation_date":1675026156,"answer_id":75278368,"question_id":75276696,"body_markdown":"In spite of my suggestion I decided to provide this. There are two recursive routines.\r\n- one to fill the map.\r\n- the other to print it.\r\n\r\n```\r\nString[] array = {\r\n        &quot;caso.id&quot;,&quot;caso.unidadeDoCaso.id&quot;,&quot;caso.etiqueta&quot;,\r\n        &quot;caso.sigiloso&quot;,&quot;caso.idPecaSegredoJustica&quot;,&quot;caso.numeroAno&quot;,\r\n        &quot;caso.numero&quot;,&quot;caso.competencia.id&quot;,&quot;caso.competencia.ativo&quot;,\r\n        &quot;caso.competencia.nome&quot;,&quot;caso.responsavel.id&quot;,\r\n        &quot;caso.responsavel.dadosPessoais.nome&quot;,&quot;caso.escrivao.id&quot;,\r\n        &quot;caso.escrivao.dadosPessoais.nome&quot;\r\n};\r\n```\r\n- Create the map\r\n- Then iterated across the data, splitting on the dot.\r\n- then call fill with the map, just split nodes, and the starting node index.\r\n```\r\nMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n\r\nfor (String s : array) {\r\n    String[] nodes = s.split(&quot;\\\\.&quot;);\r\n    fill(map, nodes, 0);\r\n}\r\n\r\nprint(map, &quot;&quot;);\r\n```\r\nprints\r\n```\r\ncaso\r\n   unidadeDoCaso\r\n      id\r\n   etiqueta\r\n   idPecaSegredoJustica\r\n   escrivao\r\n      id\r\n      dadosPessoais\r\n         nome\r\n   sigiloso\r\n   numero\r\n   id\r\n   numeroAno\r\n   responsavel\r\n      id\r\n      dadosPessoais\r\n         nome\r\n   competencia\r\n      ativo\r\n      nome\r\n      id\r\n```\r\nThe `fill` method continues until the supplied nodes are all processed.\r\n- first the map is checked to see if the node exists or not(equal to null)\r\n- if not present, a new map is constructed and added to the supplied map. Then the method is called to process the next node.\r\n- otherwise, the method is called to add the current node to the map after the one that exists and continue processing the nodes.\r\n```\r\npublic static void fill(Map&lt;String, Object&gt; map, String[] nodes, int i) {\r\n    if (i &gt;= nodes.length) {\r\n        return;\r\n    }\r\n    String node = nodes[i];\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    Map&lt;String, Object&gt; obj = (Map&lt;String, Object&gt;)(node);\r\n    if (obj == null) {\r\n        Map&lt;String, Object&gt; m = new HashMap&lt;&gt;();\r\n        map.put(node, m);\r\n        fill(m, nodes, i + 1);\r\n    } else {\r\n        fill( obj, nodes, i + 1);\r\n    }\r\n}\r\n```\r\nThis prints the map elements and indents each subsequent nested map level on a separate line. \r\n```\r\n@SuppressWarnings(&quot;unchecked&quot;)\r\npublic static void print(Map&lt;String, Object&gt; map, String indent) {\r\n\r\n    for (String key : map.keySet()) {\r\n        if (key != null) {\r\n            System.out.println(indent + key);\r\n            print((Map&lt;String, Object&gt;) map.get(key), indent + &quot;   &quot;);\r\n        }\r\n    }\r\n}\r\n","title":"Java stream groupingby nested string","body":"<p>In spite of my suggestion I decided to provide this. There are two recursive routines.</p>\n<ul>\n<li>one to fill the map.</li>\n<li>the other to print it.</li>\n</ul>\n<pre><code>String[] array = {\n        &quot;caso.id&quot;,&quot;caso.unidadeDoCaso.id&quot;,&quot;caso.etiqueta&quot;,\n        &quot;caso.sigiloso&quot;,&quot;caso.idPecaSegredoJustica&quot;,&quot;caso.numeroAno&quot;,\n        &quot;caso.numero&quot;,&quot;caso.competencia.id&quot;,&quot;caso.competencia.ativo&quot;,\n        &quot;caso.competencia.nome&quot;,&quot;caso.responsavel.id&quot;,\n        &quot;caso.responsavel.dadosPessoais.nome&quot;,&quot;caso.escrivao.id&quot;,\n        &quot;caso.escrivao.dadosPessoais.nome&quot;\n};\n</code></pre>\n<ul>\n<li>Create the map</li>\n<li>Then iterated across the data, splitting on the dot.</li>\n<li>then call fill with the map, just split nodes, and the starting node index.</li>\n</ul>\n<pre><code>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n\nfor (String s : array) {\n    String[] nodes = s.split(&quot;\\\\.&quot;);\n    fill(map, nodes, 0);\n}\n\nprint(map, &quot;&quot;);\n</code></pre>\n<p>prints</p>\n<pre><code>caso\n   unidadeDoCaso\n      id\n   etiqueta\n   idPecaSegredoJustica\n   escrivao\n      id\n      dadosPessoais\n         nome\n   sigiloso\n   numero\n   id\n   numeroAno\n   responsavel\n      id\n      dadosPessoais\n         nome\n   competencia\n      ativo\n      nome\n      id\n</code></pre>\n<p>The <code>fill</code> method continues until the supplied nodes are all processed.</p>\n<ul>\n<li>first the map is checked to see if the node exists or not(equal to null)</li>\n<li>if not present, a new map is constructed and added to the supplied map. Then the method is called to process the next node.</li>\n<li>otherwise, the method is called to add the current node to the map after the one that exists and continue processing the nodes.</li>\n</ul>\n<pre><code>public static void fill(Map&lt;String, Object&gt; map, String[] nodes, int i) {\n    if (i &gt;= nodes.length) {\n        return;\n    }\n    String node = nodes[i];\n    @SuppressWarnings(&quot;unchecked&quot;)\n    Map&lt;String, Object&gt; obj = (Map&lt;String, Object&gt;)(node);\n    if (obj == null) {\n        Map&lt;String, Object&gt; m = new HashMap&lt;&gt;();\n        map.put(node, m);\n        fill(m, nodes, i + 1);\n    } else {\n        fill( obj, nodes, i + 1);\n    }\n}\n</code></pre>\n<p>This prints the map elements and indents each subsequent nested map level on a separate line.</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\npublic static void print(Map&lt;String, Object&gt; map, String indent) {\n\n    for (String key : map.keySet()) {\n        if (key != null) {\n            System.out.println(indent + key);\n            print((Map&lt;String, Object&gt;) map.get(key), indent + &quot;   &quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4625545,"reputation":39,"user_id":3749477,"display_name":"gravatasufoca"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1678140973,"creation_date":1675011548,"question_id":75276696,"body_markdown":"I have a list of string, and I want to be able to group them hierarchically.\r\n\r\nExample of the list:\r\n```\r\nvar list = new String[]{&quot;caso.id&quot;,\r\n&quot;caso.unidadeDoCaso.id&quot;,\r\n&quot;caso.etiqueta&quot;,\r\n&quot;caso.sigiloso&quot;,\r\n&quot;caso.idPecaSegredoJustica&quot;,\r\n&quot;caso.numeroAno&quot;,\r\n&quot;caso.numero&quot;,\r\n&quot;caso.competencia.id&quot;,\r\n&quot;caso.competencia.ativo&quot;,\r\n&quot;caso.competencia.nome&quot;,\r\n&quot;caso.responsavel.id&quot;,\r\n&quot;caso.responsavel.dadosPessoais.nome&quot;,\r\n&quot;caso.escrivao.id&quot;,\r\n&quot;caso.escrivao.dadosPessoais.nome&quot;};\r\n\r\n```\r\nI want to group them in Maps.\r\nLike:\r\n```\r\ncaso-&gt;\r\n   id\r\n   sigiloso,\r\n   ...\r\n   unidadeDoCaso-&gt;\r\n              id\r\n   competencia-&gt;\r\n              id\r\n              ativo\r\n              ...\r\n   responsavel-&gt;\r\n             id\r\n             dadosPessoais-&gt;\r\n                       nome\r\n                       ...\r\n              ...\r\n             \r\n  ...\r\n```\r\n\r\nI was able to group just one level. I was wondering if there&#39;s a way to do it recursively.\r\n\r\n","title":"Java stream groupingby nested string","body":"<p>I have a list of string, and I want to be able to group them hierarchically.</p>\n<p>Example of the list:</p>\n<pre><code>var list = new String[]{&quot;caso.id&quot;,\n&quot;caso.unidadeDoCaso.id&quot;,\n&quot;caso.etiqueta&quot;,\n&quot;caso.sigiloso&quot;,\n&quot;caso.idPecaSegredoJustica&quot;,\n&quot;caso.numeroAno&quot;,\n&quot;caso.numero&quot;,\n&quot;caso.competencia.id&quot;,\n&quot;caso.competencia.ativo&quot;,\n&quot;caso.competencia.nome&quot;,\n&quot;caso.responsavel.id&quot;,\n&quot;caso.responsavel.dadosPessoais.nome&quot;,\n&quot;caso.escrivao.id&quot;,\n&quot;caso.escrivao.dadosPessoais.nome&quot;};\n\n</code></pre>\n<p>I want to group them in Maps.\nLike:</p>\n<pre><code>caso-&gt;\n   id\n   sigiloso,\n   ...\n   unidadeDoCaso-&gt;\n              id\n   competencia-&gt;\n              id\n              ativo\n              ...\n   responsavel-&gt;\n             id\n             dadosPessoais-&gt;\n                       nome\n                       ...\n              ...\n             \n  ...\n</code></pre>\n<p>I was able to group just one level. I was wondering if there's a way to do it recursively.</p>\n"},{"tags":["java","jackson","deprecated","jackson-databind"],"answers":[{"comments":[{"owner":{"account_id":14725244,"reputation":482,"user_id":10634487,"display_name":"Bill Naylor"},"score":1,"creation_date":1678133605,"post_id":59142507,"comment_id":133471209,"body_markdown":"I see that this alteration works, but don&#39;t really understand the reason for the deprecation. Can anyone give a more explicit/usefull description for the deprecation?","body":"I see that this alteration works, but don&#39;t really understand the reason for the deprecation. Can anyone give a more explicit/usefull description for the deprecation?"},{"owner":{"account_id":14725244,"reputation":482,"user_id":10634487,"display_name":"Bill Naylor"},"score":1,"creation_date":1678134293,"post_id":59142507,"comment_id":133471378,"body_markdown":"Have to admit I also found the javadocs for `setInclude` rather opaque.","body":"Have to admit I also found the javadocs for <code>setInclude</code> rather opaque."},{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha Ziober"},"score":0,"creation_date":1678140403,"post_id":59142507,"comment_id":133472718,"body_markdown":"@BillNaylor, added [note](https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/SerializationFeature.html#WRITE_NULL_MAP_VALUES) should give you better reason why: `unlike other SerializationFeatures, this feature cannot be dynamically changed on per-call basis, because its effect is considered during construction of serializers and property handlers.`","body":"@BillNaylor, added <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/SerializationFeature.html#WRITE_NULL_MAP_VALUES\" rel=\"nofollow noreferrer\">note</a> should give you better reason why: <code>unlike other SerializationFeatures, this feature cannot be dynamically changed on per-call basis, because its effect is considered during construction of serializers and property handlers.</code>"}],"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha Ziober"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1678140592,"creation_date":1575302205,"answer_id":59142507,"question_id":59136341,"body_markdown":"From [documentation][1]:\r\n\r\n&gt; **Deprecated**. Since `2.9` there are better mechanism for specifying\r\n&gt; filtering; specifically using JsonInclude or configuration overrides\r\n&gt; (see `ObjectMapper.configOverride(Class)`). Feature that determines\r\n&gt; whether `Map` entries with null values are to be serialized (true) or not (false).  \r\n&gt; NOTE: unlike other `SerializationFeatures`, this feature\r\n&gt; **cannot be dynamically changed on per-call basis**, because its effect is\r\n&gt; considered during construction of serializers and property handlers.\r\n&gt; \r\n&gt; Feature is enabled by default.\r\n\r\nSimple example:\r\n\r\n    import com.fasterxml.jackson.annotation.JsonInclude;\r\n    import com.fasterxml.jackson.annotation.JsonInclude.Value;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class JsonApp {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n            map.put(&quot;string&quot;, &quot;value&quot;);\r\n            map.put(&quot;int&quot;, 1);\r\n            map.put(&quot;null1&quot;, null);\r\n            map.put(null, null);\r\n    \r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n            mapper.configOverride(Map.class).setInclude(Value.construct(JsonInclude.Include.NON_NULL, JsonInclude.Include.NON_NULL));\r\n    \r\n            System.out.println(mapper.writeValueAsString(map));\r\n        }\r\n    }\r\n\r\nAbove code prints:\r\n\r\n    {\r\n      &quot;string&quot; : &quot;value&quot;,\r\n      &quot;int&quot; : 1\r\n    }\r\n\r\n  [1]: https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/SerializationFeature.html#WRITE_NULL_MAP_VALUES","title":"Is there any replacement for deprecated property SerializationFeature.WRITE_NULL_MAP_VALUES in Jackson Databind?","body":"<p>From <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/SerializationFeature.html#WRITE_NULL_MAP_VALUES\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p><strong>Deprecated</strong>. Since <code>2.9</code> there are better mechanism for specifying\nfiltering; specifically using JsonInclude or configuration overrides\n(see <code>ObjectMapper.configOverride(Class)</code>). Feature that determines\nwhether <code>Map</code> entries with null values are to be serialized (true) or not (false).<br />\nNOTE: unlike other <code>SerializationFeatures</code>, this feature\n<strong>cannot be dynamically changed on per-call basis</strong>, because its effect is\nconsidered during construction of serializers and property handlers.</p>\n<p>Feature is enabled by default.</p>\n</blockquote>\n<p>Simple example:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.annotation.JsonInclude.Value;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class JsonApp {\n\n    public static void main(String[] args) throws Exception {\n        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;string&quot;, &quot;value&quot;);\n        map.put(&quot;int&quot;, 1);\n        map.put(&quot;null1&quot;, null);\n        map.put(null, null);\n\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.enable(SerializationFeature.INDENT_OUTPUT);\n        mapper.configOverride(Map.class).setInclude(Value.construct(JsonInclude.Include.NON_NULL, JsonInclude.Include.NON_NULL));\n\n        System.out.println(mapper.writeValueAsString(map));\n    }\n}\n</code></pre>\n<p>Above code prints:</p>\n<pre><code>{\n  &quot;string&quot; : &quot;value&quot;,\n  &quot;int&quot; : 1\n}\n</code></pre>\n"}],"owner":{"account_id":17153697,"reputation":110,"user_id":12415065,"display_name":"Abhinav Jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9419,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":59142507,"answer_count":1,"score":6,"last_activity_date":1678140592,"creation_date":1575280428,"question_id":59136341,"body_markdown":"We are using ObjectMapper to ignore serialisation of null maps in our project\r\n\r\n    configure(SerializationFeature.WRITE_NULL_MAP_VALUES, false)\r\n\r\nBut after Jackson-Databind 2.9, the property is depreciated and we are looking for an alternate option.\r\n\r\nCan the below code work as substitute for removing the above property -\r\n\r\n    setSerializationInclusion(Include.NON_NULL)\r\n","title":"Is there any replacement for deprecated property SerializationFeature.WRITE_NULL_MAP_VALUES in Jackson Databind?","body":"<p>We are using ObjectMapper to ignore serialisation of null maps in our project</p>\n\n<pre><code>configure(SerializationFeature.WRITE_NULL_MAP_VALUES, false)\n</code></pre>\n\n<p>But after Jackson-Databind 2.9, the property is depreciated and we are looking for an alternate option.</p>\n\n<p>Can the below code work as substitute for removing the above property -</p>\n\n<pre><code>setSerializationInclusion(Include.NON_NULL)\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":13762909,"reputation":1124,"user_id":9932194,"display_name":"K M Rejowan Ahmmed"},"score":1,"creation_date":1678119151,"post_id":75653006,"comment_id":133467251,"body_markdown":"It would be easier to provide any suggestions if you add your codes with your questions.","body":"It would be easier to provide any suggestions if you add your codes with your questions."},{"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"score":0,"creation_date":1678119271,"post_id":75653006,"comment_id":133467281,"body_markdown":"This is unlikely to be a problem with the emulator and more likely to be a problem with your code","body":"This is unlikely to be a problem with the emulator and more likely to be a problem with your code"},{"owner":{"account_id":17428729,"reputation":9,"user_id":12633134,"display_name":"phill"},"score":0,"creation_date":1678121621,"post_id":75653006,"comment_id":133468003,"body_markdown":"@KenWolf as requested","body":"@KenWolf as requested"},{"owner":{"account_id":17428729,"reputation":9,"user_id":12633134,"display_name":"phill"},"score":0,"creation_date":1678122885,"post_id":75653006,"comment_id":133468371,"body_markdown":"@KMRejowanAhmmed as requested","body":"@KMRejowanAhmmed as requested"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1678141106,"post_id":75653006,"comment_id":133472865,"body_markdown":"What have you done to debug your app? https://developer.android.com/studio/debug","body":"What have you done to debug your app? <a href=\"https://developer.android.com/studio/debug\" rel=\"nofollow noreferrer\">developer.android.com/studio/debug</a>"},{"owner":{"account_id":17428729,"reputation":9,"user_id":12633134,"display_name":"phill"},"score":0,"creation_date":1678301098,"post_id":75653006,"comment_id":133507805,"body_markdown":"@dominicoder well ive never used a debugger before if im honest, i have just been doing print statements to find out whats going on, when the last item is removed ive printed to find out what is in the shred preferences, there is nothing and the table is empty, on going back to the page i checked again and they are empty, plus the method to load the shared preferences does not run.","body":"@dominicoder well ive never used a debugger before if im honest, i have just been doing print statements to find out whats going on, when the last item is removed ive printed to find out what is in the shred preferences, there is nothing and the table is empty, on going back to the page i checked again and they are empty, plus the method to load the shared preferences does not run."},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1678309308,"post_id":75653006,"comment_id":133509798,"body_markdown":"Then I would suggest starting to learn to use the debugger and stepping through your code line by line. You have _a lot_ going on there, it&#39;s very difficult to grok what you&#39;re doing, but given the amount of string manipulation and looping happening, you surely have a bug in there somewhere.","body":"Then I would suggest starting to learn to use the debugger and stepping through your code line by line. You have <i>a lot</i> going on there, it&#39;s very difficult to grok what you&#39;re doing, but given the amount of string manipulation and looping happening, you surely have a bug in there somewhere."},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1678309393,"post_id":75653006,"comment_id":133509817,"body_markdown":"Also, unrelated to your question - this kind of feels like you&#39;re abusing SharedPreferences as a glorified database. Considering using Room intead. It might even expose or solve the current problem you&#39;re having.","body":"Also, unrelated to your question - this kind of feels like you&#39;re abusing SharedPreferences as a glorified database. Considering using Room intead. It might even expose or solve the current problem you&#39;re having."},{"owner":{"account_id":17428729,"reputation":9,"user_id":12633134,"display_name":"phill"},"score":0,"creation_date":1678386339,"post_id":75653006,"comment_id":133527052,"body_markdown":"@dominicoder  thanks for the advice, when you&#39;re learning this all on the fly as i am right now it can be a bit overwhelming to learn multiple things at once, as i am sure you have experienced yourself but ill try throw that in.","body":"@dominicoder  thanks for the advice, when you&#39;re learning this all on the fly as i am right now it can be a bit overwhelming to learn multiple things at once, as i am sure you have experienced yourself but ill try throw that in."},{"owner":{"account_id":17428729,"reputation":9,"user_id":12633134,"display_name":"phill"},"score":0,"creation_date":1678386372,"post_id":75653006,"comment_id":133527061,"body_markdown":"@dominicoder and ill look into Room, not heard of that before thanks","body":"@dominicoder and ill look into Room, not heard of that before thanks"}],"owner":{"account_id":17428729,"reputation":9,"user_id":12633134,"display_name":"phill"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678140224,"creation_date":1678118045,"question_id":75653006,"body_markdown":"I am creating an app and I have a function of it where you can add items to a table, this all works fine, you can add more to each item and delete, the table is saved each time in a stored preference (which is cleared before re-entering info), again all goes in, everything fine. \r\n\r\nthe problem arises as so, when I press the back button and re-enter the page the stored preferences are successfully loaded back into the table perfectly exactly how it was left, however, when I remove all the items and the last item is removed from the table, I press back and then go back in and the last item has appeared back into the table.\r\n I checked the stored preferences, it is empty and the method that loads the stored preferences does not run, hence I&#39;ve shown no code because it all works fine, so there is obviously something beyond my code happening.\r\n\r\nif anyone could point me in the right direction I would be grateful.\r\n\r\nok as requested heres my code:\r\n\r\nthis is intoStore it is from here you click onto the button to the individual container number, the page and code the back button takes me to.\r\n\r\n    package com.apps.storemanager;\r\n    \r\n    import static android.graphics.Color.rgb;\r\n    \r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.content.SharedPreferences;\r\n    import android.graphics.Color;\r\n    import android.graphics.drawable.Drawable;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Button;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.RelativeLayout;\r\n    import android.widget.TableLayout;\r\n    import android.widget.TableRow;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    \r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import com.android.volley.Request;\r\n    import com.android.volley.RequestQueue;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    import com.android.volley.toolbox.StringRequest;\r\n    import com.android.volley.toolbox.Volley;\r\n    \r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class IntoStore extends AppCompatActivity {\r\n    \r\n        TextView customerName, address, contactInfo;\r\n        SharedPreferences sharedPreferences;\r\n        SharedPreferences[] containerNumberPreferences;\r\n        Button[] containers;\r\n        TableLayout containerTable;\r\n    \r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.into_store);\r\n    \r\n            sharedPreferences= getSharedPreferences(&quot;storeManagerUser&quot; , MODE_PRIVATE);\r\n    \r\n            customerName = findViewById(R.id.customerNameLabel);\r\n            address = findViewById(R.id.addressLabel);\r\n            contactInfo = findViewById(R.id.contactIfoLabel);\r\n    \r\n            containerTable = findViewById(R.id.containerTableLayout);\r\n    \r\n    \r\n            getIntoStoreCustomer();\r\n        }\r\n    \r\n        protected void getIntoStoreCustomer(){\r\n    \r\n            RequestQueue queue = Volley.newRequestQueue(this);\r\n            String url =&quot;http://192.168.0.193/storemanager/getIntoStoreCustomer.php&quot;;\r\n    \r\n            StringRequest stringRequest = new StringRequest(Request.Method.POST, url,\r\n                    new Response.Listener&lt;String&gt;() {\r\n                        @Override\r\n                        public void onResponse(String response) {\r\n    \r\n                            try{\r\n    \r\n                                //retrieves customer info\r\n                                JSONObject jsonObject = new JSONObject(response);\r\n                                String getCustomerName = jsonObject.getString(&quot;Customer Name&quot;);\r\n                                String getAddress = jsonObject.getString(&quot;Address&quot;);\r\n                                String getContactInfo = jsonObject.getString(&quot;Contact Info&quot;);\r\n                                String getContainers = jsonObject.getString(&quot;Containers&quot;);\r\n    \r\n                                //retrieves customers containers\r\n                                String[] getContainerNumber = getContainers.split(&quot;\\\\s+&quot;);\r\n                                customerName.setText(getCustomerName);\r\n                                address.setText(getAddress.replace(&quot;,&quot;, &quot;\\n&quot;));\r\n                                contactInfo.setText(getContactInfo);\r\n    \r\n                                //creates container button array\r\n                                containers = new Button[getContainerNumber.length];\r\n                                containerNumberPreferences = new SharedPreferences[getContainerNumber.length];\r\n                                boolean newRow = false;\r\n                                TableRow row = new TableRow(IntoStore.this);\r\n                                containerTable.addView(row);\r\n    \r\n                                for(int i = 0; i &lt; containers.length; i++){\r\n    \r\n                                //create the shared preference per container\r\n                                    containerNumberPreferences[i] = getSharedPreferences(getContainerNumber[i], MODE_PRIVATE);\r\n                                    SharedPreferences.Editor editor = containerNumberPreferences[i].edit();\r\n                                    editor.putString(&quot;container&quot;, getContainerNumber[i]);\r\n                                    editor.apply();\r\n    \r\n                                    if(i % 3 == 0) {            //to add 3 containers (buttons) per row\r\n    \r\n                                        newRow = true;\r\n    \r\n                                        if(newRow){\r\n                                                                //sets row layout\r\n                                            newRow = false;\r\n                                            row = new TableRow(IntoStore.this);\r\n                                            TableRow.LayoutParams params = new TableRow.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT);\r\n                                            params.setMargins(10,10,10,10);\r\n                                            row.setLayoutParams(params);\r\n                                            containerTable.addView(row);\r\n                                        }\r\n                                    }\r\n                                    //creates buttons\r\n                                    containers[i] = new Button(IntoStore.this);\r\n                                    containers[i].setText(getContainerNumber[i]);\r\n                                    containers[i].setTextSize(45f);\r\n                                    containers[i].setPadding(60, 60,60,60);\r\n                                    containers[i].setBackgroundColor((rgb(255,217,25)));\r\n                                    TableRow.LayoutParams params = new TableRow.LayoutParams(\r\n                                            TableRow.LayoutParams.MATCH_PARENT,\r\n                                            TableRow.LayoutParams.MATCH_PARENT\r\n                                    );\r\n    \r\n                                    //adds margin to buttons\r\n                                    params.setMargins(10, 10,10,30);\r\n                                    containers[i].setLayoutParams(params);\r\n                                    row.addView(containers[i],params);\r\n    \r\n                                    containers[i].setOnClickListener(new View.OnClickListener() {\r\n                                        @Override\r\n                                        public void onClick(View view) {\r\n    \r\n                                            Intent intent = new Intent(IntoStore.this.getApplicationContext(), LoadContainer.class);\r\n                                            intent.putExtra(&quot;container&quot;, ((Button) view).getText().toString());\r\n                                            startActivity(intent);\r\n    \r\n                                        }\r\n                                    });\r\n    \r\n                                }\r\n    \r\n                            } catch (JSONException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                    }, new Response.ErrorListener() {\r\n                @Override\r\n                public void onErrorResponse(VolleyError error) {\r\n    \r\n                }\r\n            })\r\n            {\r\n                protected Map&lt;String, String&gt; getParams(){\r\n                    Map&lt;String, String&gt; paramV = new HashMap&lt;&gt;();\r\n    \r\n                    paramV.put(&quot;username&quot;, sharedPreferences.getString(&quot;user&quot;, &quot;&quot;));\r\n    \r\n                    return paramV;\r\n                }\r\n            };\r\n    \r\n            queue.add(stringRequest);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nthis is the code for the individual container number, where the table is added to.\r\n\r\n    package com.apps.storemanager;\r\n    \r\n    import static android.graphics.Color.rgb;\r\n    \r\n    import android.annotation.SuppressLint;\r\n    import android.content.Intent;\r\n    import android.content.SharedPreferences;\r\n    import android.graphics.Bitmap;\r\n    import android.graphics.Color;\r\n    import android.os.Build;\r\n    import android.os.Bundle;\r\n    import android.os.Environment;\r\n    import android.provider.MediaStore;\r\n    import android.view.Gravity;\r\n    import android.view.MotionEvent;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.TableLayout;\r\n    import android.widget.TableRow;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    \r\n    import androidx.activity.result.ActivityResultLauncher;\r\n    import androidx.activity.result.contract.ActivityResultContracts;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.annotation.RequiresApi;\r\n    import androidx.appcompat.app.AlertDialog;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.ArrayList;\r\n    import java.util.Date;\r\n    import java.util.Map;\r\n    \r\n    public class LoadContainer extends AppCompatActivity {\r\n    \r\n        private SharedPreferences containerNumberPreference;\r\n        private TextView containerNumberLabel;\r\n        private EditText itemInput;\r\n        private Float textSize;\r\n        private Button addTenBTN, addTwentyBTN, addItemBTN;\r\n        private TableLayout itemTable;\r\n        private String container;\r\n        private ActivityResultLauncher&lt;Intent&gt; ImageCapture;\r\n        private String itemName;\r\n        private Button shutDoor;\r\n    \r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.loadcontainer);\r\n    \r\n            Bundle getIntent = getIntent().getExtras();\r\n            container = getIntent.getString(&quot;container&quot;);\r\n    \r\n            containerNumberPreference = getSharedPreferences(container, MODE_PRIVATE);\r\n            containerNumberLabel = findViewById(R.id.containerNumberLabel);\r\n            containerNumberLabel.setText(containerNumberPreference.getString(&quot;container&quot;, &quot;&quot;));\r\n    \r\n            itemTable = findViewById(R.id.loadContainerItemTable);\r\n            itemInput = findViewById(R.id.newItemInput);\r\n            itemInput.setOnClickListener(view -&gt; itemInput.selectAll());\r\n    \r\n            textSize = 28f;   //text size for item and number\r\n    \r\n            addTenBTN = findViewById(R.id.addTenCartonBTN);\r\n            addTenBTN.setOnClickListener(view -&gt; addBox(((Button) view).getText().toString()));\r\n    \r\n            addTwentyBTN = findViewById(R.id.addTwentyCartonBTN);\r\n            addTwentyBTN.setOnClickListener(view -&gt; addBox(((Button) view).getText().toString()));\r\n    \r\n            addItemBTN = findViewById(R.id.addItemBTN);\r\n            addItemBTN.setOnClickListener(view -&gt; addItem(&quot;&quot;,&quot;&quot;));\r\n    \r\n            ImageCapture = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\r\n                    result -&gt; {\r\n                        if(result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null){\r\n    \r\n                            Bundle bundle = result.getData().getExtras();\r\n                            Bitmap bitMap = (Bitmap) bundle.get(&quot;data&quot;);\r\n    \r\n                            saveTempBitmap(bitMap);\r\n                        }\r\n    \r\n                    });\r\n    \r\n            shutDoor = findViewById(R.id.shutDoorBTN);\r\n            shutDoor.setOnClickListener(view -&gt; saveContainer());\r\n    \r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n                loadSavedItems();\r\n            }\r\n    \r\n        }\r\n    \r\n        /**\r\n         * loads saved items\r\n         */\r\n        @RequiresApi(api = Build.VERSION_CODES.N)\r\n        protected void loadSavedItems(){\r\n    \r\n               Map&lt;String, ?&gt; savedItems = containerNumberPreference.getAll();\r\n               ArrayList&lt;String&gt; itemsAndNumber = new ArrayList&lt;&gt;();\r\n               savedItems.forEach((k, v) -&gt; itemsAndNumber.add(String.valueOf(v)));\r\n    \r\n               if(itemsAndNumber.size() &gt; 1) {  //1 to skip container number\r\n                   for (int i = 1; i &lt; itemsAndNumber.size(); i++) {\r\n                       String item = itemsAndNumber.get(i);\r\n                       String number = itemsAndNumber.get((i+1));\r\n                       addItem(itemsAndNumber.get(i), itemsAndNumber.get(++i));\r\n                   }\r\n               }\r\n            }\r\n    \r\n    \r\n        /**\r\n         * add item new box 10s and 20s\r\n         */\r\n        protected void addBox(String box){\r\n    \r\n            boolean existing = addToExistingItem(box);        //search table for duplicate\r\n    \r\n            if(!existing) {\r\n    \r\n                TableRow newRow = setTableRow(new TableRow(this));\r\n                TextView newItem = setItemTextView(new TextView(this), box);\r\n                TextView number = setNumberTextView(new TextView(this), &quot;1&quot;);\r\n                Button imageButton = setImageButton(new Button(this));\r\n                itemTable.addView(newRow);\r\n                newRow.addView(newItem);\r\n                newRow.addView(number);\r\n                newRow.addView(imageButton);\r\n    \r\n                updateSharedPreferences();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * add new item\r\n         * also parameters for loading shared preferences\r\n         * loadSavedItems() line 92\r\n         */\r\n        protected void addItem(String savedItem, String savedNumber) {\r\n    \r\n            boolean existing;\r\n            String item = savedItem.isEmpty() ? itemInput.getText().toString().trim() : savedItem;\r\n            String itemNumber = savedNumber.isEmpty() ? &quot;1&quot; : savedNumber;\r\n    \r\n            if (!item.isEmpty()) {\r\n    \r\n                existing = addToExistingItem(item);        //search table for duplicate\r\n    \r\n                if (!existing) {\r\n    \r\n                    TableRow newRow = setTableRow(new TableRow(this));\r\n                    TextView newItem = setItemTextView(new TextView(this), item);\r\n                    TextView number = setNumberTextView(new TextView(this), itemNumber);\r\n                    Button imageButton = setImageButton(new Button(this));\r\n                    itemTable.addView(newRow);\r\n                    newRow.addView(newItem);\r\n                    newRow.addView(number);\r\n                    newRow.addView(imageButton);\r\n    \r\n                    updateSharedPreferences();\r\n                }\r\n            } else {\r\n                Toast.makeText(getApplicationContext(), &quot;Please Enter Item To Load&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * finds and adds to existing item\r\n         */\r\n        protected boolean addToExistingItem(String item){\r\n    \r\n            boolean found = false;\r\n    \r\n            for(int i = 0; i &lt; itemTable.getChildCount(); i++) {\r\n    \r\n                TableRow row = (TableRow) itemTable.getChildAt(i);\r\n                TextView text = (TextView) row.getChildAt(0);\r\n                String getText = text.getText().toString();\r\n    \r\n                if (getText.equals(item)) {\r\n    \r\n                    found = true;\r\n                    TextView numberText = (TextView) row.getChildAt(1);\r\n                    int update = Integer.parseInt(numberText.getText().toString());\r\n                    update++;\r\n                    numberText.setText(String.valueOf(update));\r\n    \r\n                    updateSharedPreferences();\r\n                }\r\n            }\r\n    \r\n            return found;\r\n        }\r\n    \r\n        /**\r\n         * finds and removes item\r\n         */\r\n        protected void removeFromExistingItem(String item) {\r\n    \r\n            for (int i = 0; i &lt; itemTable.getChildCount(); i++) {\r\n    \r\n                TableRow row = (TableRow) itemTable.getChildAt(i);\r\n                TextView text = (TextView) row.getChildAt(0);\r\n                String getText = text.getText().toString();\r\n    \r\n                if (getText.equals(item)) {\r\n    \r\n                    TextView numberText = (TextView) row.getChildAt(1);\r\n                    int update = Integer.parseInt(numberText.getText().toString());\r\n                    update--;\r\n    \r\n                    final int itemPlace = i;\r\n    \r\n                    if(update == 0){\r\n    \r\n                        AlertDialog.Builder builder = new AlertDialog.Builder(LoadContainer.this);\r\n    \r\n                        builder.setTitle(&quot;Removing Item&quot;);\r\n    \r\n                        builder.setMessage(&quot;You Are About To Remove The Item, All images Will be Removed With&quot; +\r\n                                        &quot; It Do You Want To Continue?&quot;)\r\n                                .setCancelable(false)\r\n                                .setPositiveButton(&quot;OK&quot;, (dialog, id) -&gt; {\r\n    \r\n                                    itemTable.removeViewAt(itemPlace);\r\n                                    row.removeViewAt(itemPlace);\r\n                                    updateSharedPreferences();\r\n    \r\n                                })\r\n                                .setNegativeButton(&quot;Cancel&quot;, (dialog, id) -&gt; dialog.cancel());\r\n    \r\n                        AlertDialog alertDialog = builder.create();\r\n                        alertDialog.show();\r\n    \r\n                    }else {\r\n    \r\n                        numberText.setText(String.valueOf(update));\r\n                    }\r\n    \r\n                    updateSharedPreferences();\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * updates the containers shared preferences\r\n         */\r\n        protected void updateSharedPreferences(){\r\n    \r\n            String storedItem = &quot;Stored Item &quot;;\r\n            String storedItemNumber = &quot;Stored Item Number &quot;;\r\n    \r\n            SharedPreferences.Editor editor =  containerNumberPreference.edit();\r\n            editor.clear();\r\n            editor.putString(&quot;container&quot;, containerNumberLabel.getText().toString());\r\n    \r\n            for(int i = 0; i &lt; itemTable.getChildCount(); i++) {\r\n    \r\n                TableRow itemRow = (TableRow) itemTable.getChildAt(i);\r\n                TextView itemTextView = (TextView) itemRow.getChildAt(0);\r\n                String item = itemTextView.getText().toString();\r\n    \r\n                itemTextView = (TextView) itemRow.getChildAt(1);\r\n                String itemNumber = itemTextView.getText().toString();\r\n    \r\n                editor.putString(storedItem + i, item);\r\n                editor.putString(storedItemNumber + i, itemNumber);\r\n                editor.apply();\r\n    \r\n            }\r\n        }\r\n    \r\n        /**\r\n         * gets formatted table row\r\n         */\r\n        @SuppressLint(&quot;ClickableViewAccessibility&quot;)\r\n        protected TableRow setTableRow(TableRow row){\r\n    \r\n            row.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT));\r\n            row.setPadding(0,5,0,0);\r\n    \r\n            row.setOnTouchListener(new View.OnTouchListener() {\r\n                private long start;\r\n                private long total;\r\n    \r\n                //creates touch for item row\r\n                @Override\r\n                public boolean onTouch(View view, MotionEvent event) {\r\n    \r\n                    if(event.getAction() == MotionEvent.ACTION_DOWN) {\r\n    \r\n                            start = event.getEventTime();\r\n                    }\r\n    \r\n                    if(event.getAction() == MotionEvent.ACTION_UP) {\r\n    \r\n                        long time = event.getEventTime();\r\n                        total = time - start;\r\n                        TextView getItem = (TextView) row.getChildAt(0);\r\n                        String item = getItem.getText().toString();\r\n    \r\n                        if (total &gt; 500) {      //if touch held it removes 1 of item\r\n    \r\n                         removeFromExistingItem(item);\r\n    \r\n    \r\n                        } else {                //else goes to camera to take photo of item\r\n    \r\n                            itemName = item;   //name for saved image\r\n                            Intent takePhoto = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n                            ImageCapture.launch(takePhoto);\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n    \r\n            return row;\r\n        }\r\n    \r\n        /**\r\n         * gets formatted item text view\r\n         */\r\n        protected TextView setItemTextView(TextView itemName, String item){\r\n    \r\n            itemName.setTextSize(textSize);\r\n            itemName.setTextColor(Color.WHITE);\r\n            itemName.setGravity(Gravity.START);\r\n            itemName.setPadding(15,15,15,15);\r\n            itemName.setBackgroundColor(rgb(0,64,128));\r\n            itemName.setText(item);\r\n    \r\n            return itemName;\r\n        }\r\n    \r\n        /**\r\n         * get formatted new number textview\r\n         */\r\n        protected TextView setNumberTextView(TextView tv, String number){\r\n    \r\n            tv.setTextSize(textSize);\r\n            tv.setTextColor(Color.WHITE);\r\n            tv.setGravity(Gravity.END);\r\n            tv.setPadding(15,15,15,15);\r\n            tv.setBackgroundColor(rgb(0,64,128));\r\n            tv.setText(number);\r\n    \r\n            return tv;\r\n        }\r\n    \r\n        /**\r\n         * sets button to view images\r\n         */\r\n        protected Button setImageButton(Button button){\r\n    \r\n            button.setBackgroundColor(rgb(0,64,128));\r\n            button.setBackgroundResource(R.drawable.ic_baseline_image_search_24);\r\n            button.setOnClickListener(view -&gt; {\r\n    \r\n                TableRow row = (TableRow) button.getParent();\r\n                TextView getTextView = (TextView) row.getChildAt(0);\r\n                String item = getTextView.getText().toString();\r\n    \r\n                String root = Environment.getExternalStorageDirectory().toString();\r\n                File myDir = new File(root + &quot;/Pictures/&quot; + item);\r\n                File[] imageFile = myDir.listFiles();\r\n    \r\n                ArrayList&lt;String&gt; images = new ArrayList&lt;&gt;();\r\n    \r\n                if(imageFile != null) {\r\n                    for (int i = 0; i &lt; imageFile.length; i++) {\r\n    \r\n                        images.add(imageFile[i].getAbsolutePath());\r\n                        System.out.println(i);\r\n                    }\r\n                }\r\n                Intent openImageViewer = new Intent(LoadContainer.this, ImageViewer.class);\r\n                openImageViewer.putStringArrayListExtra(&quot;ImageList&quot;, images);\r\n                startActivity(openImageViewer);\r\n    \r\n            });\r\n    \r\n            return button;\r\n        }\r\n    \r\n        /**\r\n         * checks for storage permissions\r\n         * @param bitmap\r\n         */\r\n    \r\n        public void saveTempBitmap(Bitmap bitmap) {\r\n            if (isExternalStorageWritable()) {\r\n                saveImage(bitmap);\r\n            }else{\r\n    \r\n                Toast.makeText(getApplicationContext(), &quot;unable to save file&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * saves image to storage\r\n         * @param finalBitmap\r\n         */\r\n        private String saveImage(Bitmap finalBitmap) {\r\n    \r\n            String root = Environment.getExternalStorageDirectory().toString();\r\n            File myDir = new File(root + &quot;/Pictures/&quot; + itemName);\r\n            myDir.mkdirs();\r\n    \r\n            String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;).format(new Date());\r\n            String fname = itemName + &quot;-&quot; + timeStamp +&quot;.jpg&quot;;\r\n    \r\n            File file = new File(myDir, fname);\r\n    \r\n            try(FileOutputStream out = new FileOutputStream(file)) {\r\n    \r\n                finalBitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);\r\n                out.flush();\r\n    \r\n            } catch (Exception e) {\r\n    \r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return myDir.toString();\r\n        }\r\n    \r\n        /* Checks if external storage is available for read and write */\r\n        public boolean isExternalStorageWritable() {\r\n    \r\n            String state = Environment.getExternalStorageState();\r\n    \r\n            if (Environment.MEDIA_MOUNTED.equals(state)) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        private void saveContainer(){\r\n    \r\n    \r\n        }\r\n    }","title":"is there a data cache in the android studio emulator? or is this another issue?","body":"<p>I am creating an app and I have a function of it where you can add items to a table, this all works fine, you can add more to each item and delete, the table is saved each time in a stored preference (which is cleared before re-entering info), again all goes in, everything fine.</p>\n<p>the problem arises as so, when I press the back button and re-enter the page the stored preferences are successfully loaded back into the table perfectly exactly how it was left, however, when I remove all the items and the last item is removed from the table, I press back and then go back in and the last item has appeared back into the table.\nI checked the stored preferences, it is empty and the method that loads the stored preferences does not run, hence I've shown no code because it all works fine, so there is obviously something beyond my code happening.</p>\n<p>if anyone could point me in the right direction I would be grateful.</p>\n<p>ok as requested heres my code:</p>\n<p>this is intoStore it is from here you click onto the button to the individual container number, the page and code the back button takes me to.</p>\n<pre><code>package com.apps.storemanager;\n\nimport static android.graphics.Color.rgb;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.graphics.Color;\nimport android.graphics.drawable.Drawable;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.LinearLayout;\nimport android.widget.RelativeLayout;\nimport android.widget.TableLayout;\nimport android.widget.TableRow;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.android.volley.Request;\nimport com.android.volley.RequestQueue;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.StringRequest;\nimport com.android.volley.toolbox.Volley;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class IntoStore extends AppCompatActivity {\n\n    TextView customerName, address, contactInfo;\n    SharedPreferences sharedPreferences;\n    SharedPreferences[] containerNumberPreferences;\n    Button[] containers;\n    TableLayout containerTable;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.into_store);\n\n        sharedPreferences= getSharedPreferences(&quot;storeManagerUser&quot; , MODE_PRIVATE);\n\n        customerName = findViewById(R.id.customerNameLabel);\n        address = findViewById(R.id.addressLabel);\n        contactInfo = findViewById(R.id.contactIfoLabel);\n\n        containerTable = findViewById(R.id.containerTableLayout);\n\n\n        getIntoStoreCustomer();\n    }\n\n    protected void getIntoStoreCustomer(){\n\n        RequestQueue queue = Volley.newRequestQueue(this);\n        String url =&quot;http://192.168.0.193/storemanager/getIntoStoreCustomer.php&quot;;\n\n        StringRequest stringRequest = new StringRequest(Request.Method.POST, url,\n                new Response.Listener&lt;String&gt;() {\n                    @Override\n                    public void onResponse(String response) {\n\n                        try{\n\n                            //retrieves customer info\n                            JSONObject jsonObject = new JSONObject(response);\n                            String getCustomerName = jsonObject.getString(&quot;Customer Name&quot;);\n                            String getAddress = jsonObject.getString(&quot;Address&quot;);\n                            String getContactInfo = jsonObject.getString(&quot;Contact Info&quot;);\n                            String getContainers = jsonObject.getString(&quot;Containers&quot;);\n\n                            //retrieves customers containers\n                            String[] getContainerNumber = getContainers.split(&quot;\\\\s+&quot;);\n                            customerName.setText(getCustomerName);\n                            address.setText(getAddress.replace(&quot;,&quot;, &quot;\\n&quot;));\n                            contactInfo.setText(getContactInfo);\n\n                            //creates container button array\n                            containers = new Button[getContainerNumber.length];\n                            containerNumberPreferences = new SharedPreferences[getContainerNumber.length];\n                            boolean newRow = false;\n                            TableRow row = new TableRow(IntoStore.this);\n                            containerTable.addView(row);\n\n                            for(int i = 0; i &lt; containers.length; i++){\n\n                            //create the shared preference per container\n                                containerNumberPreferences[i] = getSharedPreferences(getContainerNumber[i], MODE_PRIVATE);\n                                SharedPreferences.Editor editor = containerNumberPreferences[i].edit();\n                                editor.putString(&quot;container&quot;, getContainerNumber[i]);\n                                editor.apply();\n\n                                if(i % 3 == 0) {            //to add 3 containers (buttons) per row\n\n                                    newRow = true;\n\n                                    if(newRow){\n                                                            //sets row layout\n                                        newRow = false;\n                                        row = new TableRow(IntoStore.this);\n                                        TableRow.LayoutParams params = new TableRow.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT);\n                                        params.setMargins(10,10,10,10);\n                                        row.setLayoutParams(params);\n                                        containerTable.addView(row);\n                                    }\n                                }\n                                //creates buttons\n                                containers[i] = new Button(IntoStore.this);\n                                containers[i].setText(getContainerNumber[i]);\n                                containers[i].setTextSize(45f);\n                                containers[i].setPadding(60, 60,60,60);\n                                containers[i].setBackgroundColor((rgb(255,217,25)));\n                                TableRow.LayoutParams params = new TableRow.LayoutParams(\n                                        TableRow.LayoutParams.MATCH_PARENT,\n                                        TableRow.LayoutParams.MATCH_PARENT\n                                );\n\n                                //adds margin to buttons\n                                params.setMargins(10, 10,10,30);\n                                containers[i].setLayoutParams(params);\n                                row.addView(containers[i],params);\n\n                                containers[i].setOnClickListener(new View.OnClickListener() {\n                                    @Override\n                                    public void onClick(View view) {\n\n                                        Intent intent = new Intent(IntoStore.this.getApplicationContext(), LoadContainer.class);\n                                        intent.putExtra(&quot;container&quot;, ((Button) view).getText().toString());\n                                        startActivity(intent);\n\n                                    }\n                                });\n\n                            }\n\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n\n            }\n        })\n        {\n            protected Map&lt;String, String&gt; getParams(){\n                Map&lt;String, String&gt; paramV = new HashMap&lt;&gt;();\n\n                paramV.put(&quot;username&quot;, sharedPreferences.getString(&quot;user&quot;, &quot;&quot;));\n\n                return paramV;\n            }\n        };\n\n        queue.add(stringRequest);\n\n    }\n\n}\n</code></pre>\n<p>this is the code for the individual container number, where the table is added to.</p>\n<pre><code>package com.apps.storemanager;\n\nimport static android.graphics.Color.rgb;\n\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.graphics.Bitmap;\nimport android.graphics.Color;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.provider.MediaStore;\nimport android.view.Gravity;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TableLayout;\nimport android.widget.TableRow;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.contract.ActivityResultContracts;\nimport androidx.annotation.Nullable;\nimport androidx.annotation.RequiresApi;\nimport androidx.appcompat.app.AlertDialog;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.Map;\n\npublic class LoadContainer extends AppCompatActivity {\n\n    private SharedPreferences containerNumberPreference;\n    private TextView containerNumberLabel;\n    private EditText itemInput;\n    private Float textSize;\n    private Button addTenBTN, addTwentyBTN, addItemBTN;\n    private TableLayout itemTable;\n    private String container;\n    private ActivityResultLauncher&lt;Intent&gt; ImageCapture;\n    private String itemName;\n    private Button shutDoor;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.loadcontainer);\n\n        Bundle getIntent = getIntent().getExtras();\n        container = getIntent.getString(&quot;container&quot;);\n\n        containerNumberPreference = getSharedPreferences(container, MODE_PRIVATE);\n        containerNumberLabel = findViewById(R.id.containerNumberLabel);\n        containerNumberLabel.setText(containerNumberPreference.getString(&quot;container&quot;, &quot;&quot;));\n\n        itemTable = findViewById(R.id.loadContainerItemTable);\n        itemInput = findViewById(R.id.newItemInput);\n        itemInput.setOnClickListener(view -&gt; itemInput.selectAll());\n\n        textSize = 28f;   //text size for item and number\n\n        addTenBTN = findViewById(R.id.addTenCartonBTN);\n        addTenBTN.setOnClickListener(view -&gt; addBox(((Button) view).getText().toString()));\n\n        addTwentyBTN = findViewById(R.id.addTwentyCartonBTN);\n        addTwentyBTN.setOnClickListener(view -&gt; addBox(((Button) view).getText().toString()));\n\n        addItemBTN = findViewById(R.id.addItemBTN);\n        addItemBTN.setOnClickListener(view -&gt; addItem(&quot;&quot;,&quot;&quot;));\n\n        ImageCapture = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\n                result -&gt; {\n                    if(result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null){\n\n                        Bundle bundle = result.getData().getExtras();\n                        Bitmap bitMap = (Bitmap) bundle.get(&quot;data&quot;);\n\n                        saveTempBitmap(bitMap);\n                    }\n\n                });\n\n        shutDoor = findViewById(R.id.shutDoorBTN);\n        shutDoor.setOnClickListener(view -&gt; saveContainer());\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n            loadSavedItems();\n        }\n\n    }\n\n    /**\n     * loads saved items\n     */\n    @RequiresApi(api = Build.VERSION_CODES.N)\n    protected void loadSavedItems(){\n\n           Map&lt;String, ?&gt; savedItems = containerNumberPreference.getAll();\n           ArrayList&lt;String&gt; itemsAndNumber = new ArrayList&lt;&gt;();\n           savedItems.forEach((k, v) -&gt; itemsAndNumber.add(String.valueOf(v)));\n\n           if(itemsAndNumber.size() &gt; 1) {  //1 to skip container number\n               for (int i = 1; i &lt; itemsAndNumber.size(); i++) {\n                   String item = itemsAndNumber.get(i);\n                   String number = itemsAndNumber.get((i+1));\n                   addItem(itemsAndNumber.get(i), itemsAndNumber.get(++i));\n               }\n           }\n        }\n\n\n    /**\n     * add item new box 10s and 20s\n     */\n    protected void addBox(String box){\n\n        boolean existing = addToExistingItem(box);        //search table for duplicate\n\n        if(!existing) {\n\n            TableRow newRow = setTableRow(new TableRow(this));\n            TextView newItem = setItemTextView(new TextView(this), box);\n            TextView number = setNumberTextView(new TextView(this), &quot;1&quot;);\n            Button imageButton = setImageButton(new Button(this));\n            itemTable.addView(newRow);\n            newRow.addView(newItem);\n            newRow.addView(number);\n            newRow.addView(imageButton);\n\n            updateSharedPreferences();\n        }\n    }\n\n    /**\n     * add new item\n     * also parameters for loading shared preferences\n     * loadSavedItems() line 92\n     */\n    protected void addItem(String savedItem, String savedNumber) {\n\n        boolean existing;\n        String item = savedItem.isEmpty() ? itemInput.getText().toString().trim() : savedItem;\n        String itemNumber = savedNumber.isEmpty() ? &quot;1&quot; : savedNumber;\n\n        if (!item.isEmpty()) {\n\n            existing = addToExistingItem(item);        //search table for duplicate\n\n            if (!existing) {\n\n                TableRow newRow = setTableRow(new TableRow(this));\n                TextView newItem = setItemTextView(new TextView(this), item);\n                TextView number = setNumberTextView(new TextView(this), itemNumber);\n                Button imageButton = setImageButton(new Button(this));\n                itemTable.addView(newRow);\n                newRow.addView(newItem);\n                newRow.addView(number);\n                newRow.addView(imageButton);\n\n                updateSharedPreferences();\n            }\n        } else {\n            Toast.makeText(getApplicationContext(), &quot;Please Enter Item To Load&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    /**\n     * finds and adds to existing item\n     */\n    protected boolean addToExistingItem(String item){\n\n        boolean found = false;\n\n        for(int i = 0; i &lt; itemTable.getChildCount(); i++) {\n\n            TableRow row = (TableRow) itemTable.getChildAt(i);\n            TextView text = (TextView) row.getChildAt(0);\n            String getText = text.getText().toString();\n\n            if (getText.equals(item)) {\n\n                found = true;\n                TextView numberText = (TextView) row.getChildAt(1);\n                int update = Integer.parseInt(numberText.getText().toString());\n                update++;\n                numberText.setText(String.valueOf(update));\n\n                updateSharedPreferences();\n            }\n        }\n\n        return found;\n    }\n\n    /**\n     * finds and removes item\n     */\n    protected void removeFromExistingItem(String item) {\n\n        for (int i = 0; i &lt; itemTable.getChildCount(); i++) {\n\n            TableRow row = (TableRow) itemTable.getChildAt(i);\n            TextView text = (TextView) row.getChildAt(0);\n            String getText = text.getText().toString();\n\n            if (getText.equals(item)) {\n\n                TextView numberText = (TextView) row.getChildAt(1);\n                int update = Integer.parseInt(numberText.getText().toString());\n                update--;\n\n                final int itemPlace = i;\n\n                if(update == 0){\n\n                    AlertDialog.Builder builder = new AlertDialog.Builder(LoadContainer.this);\n\n                    builder.setTitle(&quot;Removing Item&quot;);\n\n                    builder.setMessage(&quot;You Are About To Remove The Item, All images Will be Removed With&quot; +\n                                    &quot; It Do You Want To Continue?&quot;)\n                            .setCancelable(false)\n                            .setPositiveButton(&quot;OK&quot;, (dialog, id) -&gt; {\n\n                                itemTable.removeViewAt(itemPlace);\n                                row.removeViewAt(itemPlace);\n                                updateSharedPreferences();\n\n                            })\n                            .setNegativeButton(&quot;Cancel&quot;, (dialog, id) -&gt; dialog.cancel());\n\n                    AlertDialog alertDialog = builder.create();\n                    alertDialog.show();\n\n                }else {\n\n                    numberText.setText(String.valueOf(update));\n                }\n\n                updateSharedPreferences();\n            }\n        }\n    }\n\n    /**\n     * updates the containers shared preferences\n     */\n    protected void updateSharedPreferences(){\n\n        String storedItem = &quot;Stored Item &quot;;\n        String storedItemNumber = &quot;Stored Item Number &quot;;\n\n        SharedPreferences.Editor editor =  containerNumberPreference.edit();\n        editor.clear();\n        editor.putString(&quot;container&quot;, containerNumberLabel.getText().toString());\n\n        for(int i = 0; i &lt; itemTable.getChildCount(); i++) {\n\n            TableRow itemRow = (TableRow) itemTable.getChildAt(i);\n            TextView itemTextView = (TextView) itemRow.getChildAt(0);\n            String item = itemTextView.getText().toString();\n\n            itemTextView = (TextView) itemRow.getChildAt(1);\n            String itemNumber = itemTextView.getText().toString();\n\n            editor.putString(storedItem + i, item);\n            editor.putString(storedItemNumber + i, itemNumber);\n            editor.apply();\n\n        }\n    }\n\n    /**\n     * gets formatted table row\n     */\n    @SuppressLint(&quot;ClickableViewAccessibility&quot;)\n    protected TableRow setTableRow(TableRow row){\n\n        row.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT));\n        row.setPadding(0,5,0,0);\n\n        row.setOnTouchListener(new View.OnTouchListener() {\n            private long start;\n            private long total;\n\n            //creates touch for item row\n            @Override\n            public boolean onTouch(View view, MotionEvent event) {\n\n                if(event.getAction() == MotionEvent.ACTION_DOWN) {\n\n                        start = event.getEventTime();\n                }\n\n                if(event.getAction() == MotionEvent.ACTION_UP) {\n\n                    long time = event.getEventTime();\n                    total = time - start;\n                    TextView getItem = (TextView) row.getChildAt(0);\n                    String item = getItem.getText().toString();\n\n                    if (total &gt; 500) {      //if touch held it removes 1 of item\n\n                     removeFromExistingItem(item);\n\n\n                    } else {                //else goes to camera to take photo of item\n\n                        itemName = item;   //name for saved image\n                        Intent takePhoto = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n                        ImageCapture.launch(takePhoto);\n                    }\n                }\n                return true;\n            }\n        });\n\n        return row;\n    }\n\n    /**\n     * gets formatted item text view\n     */\n    protected TextView setItemTextView(TextView itemName, String item){\n\n        itemName.setTextSize(textSize);\n        itemName.setTextColor(Color.WHITE);\n        itemName.setGravity(Gravity.START);\n        itemName.setPadding(15,15,15,15);\n        itemName.setBackgroundColor(rgb(0,64,128));\n        itemName.setText(item);\n\n        return itemName;\n    }\n\n    /**\n     * get formatted new number textview\n     */\n    protected TextView setNumberTextView(TextView tv, String number){\n\n        tv.setTextSize(textSize);\n        tv.setTextColor(Color.WHITE);\n        tv.setGravity(Gravity.END);\n        tv.setPadding(15,15,15,15);\n        tv.setBackgroundColor(rgb(0,64,128));\n        tv.setText(number);\n\n        return tv;\n    }\n\n    /**\n     * sets button to view images\n     */\n    protected Button setImageButton(Button button){\n\n        button.setBackgroundColor(rgb(0,64,128));\n        button.setBackgroundResource(R.drawable.ic_baseline_image_search_24);\n        button.setOnClickListener(view -&gt; {\n\n            TableRow row = (TableRow) button.getParent();\n            TextView getTextView = (TextView) row.getChildAt(0);\n            String item = getTextView.getText().toString();\n\n            String root = Environment.getExternalStorageDirectory().toString();\n            File myDir = new File(root + &quot;/Pictures/&quot; + item);\n            File[] imageFile = myDir.listFiles();\n\n            ArrayList&lt;String&gt; images = new ArrayList&lt;&gt;();\n\n            if(imageFile != null) {\n                for (int i = 0; i &lt; imageFile.length; i++) {\n\n                    images.add(imageFile[i].getAbsolutePath());\n                    System.out.println(i);\n                }\n            }\n            Intent openImageViewer = new Intent(LoadContainer.this, ImageViewer.class);\n            openImageViewer.putStringArrayListExtra(&quot;ImageList&quot;, images);\n            startActivity(openImageViewer);\n\n        });\n\n        return button;\n    }\n\n    /**\n     * checks for storage permissions\n     * @param bitmap\n     */\n\n    public void saveTempBitmap(Bitmap bitmap) {\n        if (isExternalStorageWritable()) {\n            saveImage(bitmap);\n        }else{\n\n            Toast.makeText(getApplicationContext(), &quot;unable to save file&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    /**\n     * saves image to storage\n     * @param finalBitmap\n     */\n    private String saveImage(Bitmap finalBitmap) {\n\n        String root = Environment.getExternalStorageDirectory().toString();\n        File myDir = new File(root + &quot;/Pictures/&quot; + itemName);\n        myDir.mkdirs();\n\n        String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;).format(new Date());\n        String fname = itemName + &quot;-&quot; + timeStamp +&quot;.jpg&quot;;\n\n        File file = new File(myDir, fname);\n\n        try(FileOutputStream out = new FileOutputStream(file)) {\n\n            finalBitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);\n            out.flush();\n\n        } catch (Exception e) {\n\n            e.printStackTrace();\n        }\n\n        return myDir.toString();\n    }\n\n    /* Checks if external storage is available for read and write */\n    public boolean isExternalStorageWritable() {\n\n        String state = Environment.getExternalStorageState();\n\n        if (Environment.MEDIA_MOUNTED.equals(state)) {\n            return true;\n        }\n        return false;\n    }\n\n    private void saveContainer(){\n\n\n    }\n}\n</code></pre>\n"},{"tags":["java","opencv"],"answers":[{"comments":[{"owner":{"account_id":14964196,"reputation":398,"user_id":10803013,"display_name":"andresmonc"},"score":0,"creation_date":1678144014,"post_id":75656246,"comment_id":133473349,"body_markdown":"I&#39;m beyond grateful for this! Thank you for going above and beyond in your answer.","body":"I&#39;m beyond grateful for this! Thank you for going above and beyond in your answer."}],"tags":[],"owner":{"account_id":4142240,"reputation":30761,"user_id":4926757,"accept_rate":0,"display_name":"Rotem"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1678140209,"creation_date":1678140209,"answer_id":75656246,"question_id":75652836,"body_markdown":"The reason that the whole image is detected as one contour is that `findContours` finds white contours (not black contours), and the entire image after threshold is a large white contour.  \r\n\r\nUse `Imgproc.THRESH_BINARY_INV` for inverting black and white:  \r\n\r\n    Imgproc.threshold(grayImage, thresholdImage, 242, 255, Imgproc.THRESH_BINARY_INV);\r\n\r\n---\r\n\r\nOther issues:  \r\n\r\n - We may ignore small contours - considered to be noise:  \r\n\r\n        double contour_area = Imgproc.contourArea(contour);\r\n        if (contour_area &lt; min_contour_area) {\r\n            continue;\r\n        }\r\n        \r\n - Add white padding before `warpAffine` - required because `warpAffine` may add black margins (think of 45 degrees rotation for example):  \r\n\r\n        Mat rect = new Mat(image, boundingRect);\r\n        rect = rect.clone(); //Create a clone of the cropped rectangle (required because copyMakeBorder refers to the large image).\r\n        Mat rectWithBorder = new Mat();\r\n        Core.copyMakeBorder(rect, rectWithBorder, emptySpace*2, emptySpace*2, emptySpace*2, emptySpace*2, Core.BORDER_CONSTANT, new Scalar(255, 255, 255));\r\n\r\n - Rotate around the center of the cropped rectangle (not around `rotatedRect.center`):  \r\n\r\n        Point rect_center = new Point((rectWithBorder.cols()-1.0)/2, (rectWithBorder.rows()-1.0)/2);\r\n        Mat rotationMatrix = Imgproc.getRotationMatrix2D(rect_center, angle, 1.0);  \r\n        Mat rotatedRectMat = new Mat();\r\n        Imgproc.warpAffine(rectWithBorder, rotatedRectMat, rotationMatrix, rectWithBorder.size());\r\n\r\n - Remove the extra margins after `warpAffine`:  \r\n\r\n        Rect boundingRect2 = new Rect(emptySpace, emptySpace, rotatedRectMat.cols()-emptySpace*2, rotatedRectMat.rows()-emptySpace*2);\r\n        Mat rectWithBorder2 = new Mat(rotatedRectMat, boundingRect2);\r\n\r\n---\r\n\r\nCode sample:  \r\n\r\n    package myproject;\r\n    \r\n    import org.opencv.core.Core;\r\n    import org.opencv.core.Mat;\r\n    import org.opencv.core.Scalar;\r\n    import org.opencv.core.Rect;\r\n    import org.opencv.core.Point;\r\n    import org.opencv.core.MatOfPoint;\r\n    import org.opencv.core.MatOfPoint2f;\r\n    import org.opencv.core.RotatedRect;\r\n    import org.opencv.imgproc.Imgproc;\r\n    import org.opencv.imgcodecs.Imgcodecs;\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    \r\n    class Sample {\r\n        \r\n    \r\n    static { System.loadLibrary(Core.NATIVE_LIBRARY_NAME); }\r\n    \r\n    \r\n      \r\n    public static void main(String[] args) {\r\n        // Load the image file\r\n        // temp\r\n        //File file = ResourceUtils.getFile(&quot;classpath:input_image.png&quot;);\r\n        final String image_file_name = &quot;input_image.png&quot;;\r\n        \r\n        // temp change to inputstream\r\n        Mat image = Imgcodecs.imread(image_file_name);\r\n    \r\n        // Convert the image to grayscale\r\n        Mat grayImage = new Mat();\r\n        Imgproc.cvtColor(image, grayImage, Imgproc.COLOR_BGR2GRAY);\r\n    \r\n        // Apply a threshold to convert the image to black and white\r\n        Mat thresholdImage = new Mat();\r\n        //Imgproc.threshold(grayImage, thresholdImage, 242, 255, Imgproc.THRESH_BINARY);\r\n        Imgproc.threshold(grayImage, thresholdImage, 242, 255, Imgproc.THRESH_BINARY_INV);\r\n        Imgcodecs.imwrite(&quot;thresh.png&quot;, thresholdImage);\r\n    \r\n        // Find contours in the thresholded image\r\n        List&lt;MatOfPoint&gt; contours = new ArrayList&lt;&gt;();\r\n        Mat hierarchy = new Mat();\r\n        Imgproc.findContours(thresholdImage, contours, hierarchy, Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_SIMPLE);\r\n    \r\n        // Set the amount of empty space to add around the cropped image\r\n        int emptySpace = 20;\r\n        \r\n        double min_contour_area = 10000.0;  //Area threshold - ignore small contours with area less than 10000 (assume noise)\r\n    \r\n        // Loop over the contours\r\n        for (int i = 0; i &lt; contours.size(); i++) {\r\n            MatOfPoint contour = contours.get(i);\r\n            \r\n            double contour_area = Imgproc.contourArea(contour);\r\n            \r\n            if (contour_area &lt; min_contour_area) {\r\n                continue;   //Ignore small contours with area less than min_contour_area (assume noise)\r\n            }\r\n    \r\n            // Find the bounding box of the contour\r\n            Rect boundingRect = Imgproc.boundingRect(contour);\r\n    \r\n            // Crop the rectangle from the original image using the bounding box coordinates\r\n            Mat rect = new Mat(image, boundingRect);\r\n            rect = rect.clone(); //Create a clone of the cropped rectangle (required because copyMakeBorder refers to the large image). \r\n            \r\n            //Imgcodecs.imwrite(&quot;rect.png&quot;, rect); //Save rect for testing\r\n    \r\n            // Straighten the rectangle\r\n            RotatedRect rotatedRect = Imgproc.minAreaRect(new MatOfPoint2f(contour.toArray()));\r\n            double angle = rotatedRect.angle;\r\n            if (rotatedRect.size.width &gt; rotatedRect.size.height) {\r\n                angle += 90;\r\n            }\r\n                   \r\n            // Add empty space around the rect - add larger padding before rotation because warpAffine may add black margins\r\n            Mat rectWithBorder = new Mat();\r\n            Core.copyMakeBorder(rect, rectWithBorder, emptySpace*2, emptySpace*2, emptySpace*2, emptySpace*2, Core.BORDER_CONSTANT, new Scalar(255, 255, 255));\r\n            \r\n            //Imgcodecs.imwrite(&quot;rectWithBorder.png&quot;, rectWithBorder); //Save rectWithBorder for testing\r\n            \r\n            //Mat rotationMatrix = Imgproc.getRotationMatrix2D(rotatedRect.center, angle, 1.0);  \r\n            Point rect_center = new Point((rectWithBorder.cols()-1.0)/2, (rectWithBorder.rows()-1.0)/2);\r\n            Mat rotationMatrix = Imgproc.getRotationMatrix2D(rect_center, angle, 1.0);  //Rotate around the center of rect.\r\n            Mat rotatedRectMat = new Mat();\r\n            Imgproc.warpAffine(rectWithBorder, rotatedRectMat, rotationMatrix, rectWithBorder.size());\r\n            \r\n            //Imgcodecs.imwrite(&quot;rotatedRectMat.png&quot;, rotatedRectMat); //Save rotatedRectMat for testing\r\n            \r\n            //Crop the center of rotatedRectMat (remove the extra emptySpace padding from each side).\r\n            Rect boundingRect2 = new Rect(emptySpace, emptySpace, rotatedRectMat.cols()-emptySpace*2, rotatedRectMat.rows()-emptySpace*2);\r\n            Mat rectWithBorder2 = new Mat(rotatedRectMat, boundingRect2);\r\n    \r\n    \r\n            // Save the rectangle with border as a separate image file\r\n            Imgcodecs.imwrite(String.format(&quot;output_image_%d.png&quot;, i), rectWithBorder2);\r\n        }\r\n    }\r\n    \r\n    }\r\n\r\n---\r\n\r\nResult:  \r\n[![enter image description here][1]][1]  [![enter image description here][2]][2]  [![enter image description here][3]][3]  \r\n\r\n[![enter image description here][4]][4]  [![enter image description here][5]][5]  [![enter image description here][6]][6]  \r\n\r\n[![enter image description here][7]][7]  [![enter image description here][8]][8]  [![enter image description here][9]][9]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PYKul.png\r\n  [2]: https://i.stack.imgur.com/ha8AQ.png\r\n  [3]: https://i.stack.imgur.com/zrxFh.png\r\n  [4]: https://i.stack.imgur.com/metmS.png\r\n  [5]: https://i.stack.imgur.com/rpb4u.png\r\n  [6]: https://i.stack.imgur.com/db4Ug.png\r\n  [7]: https://i.stack.imgur.com/xDKhJ.png\r\n  [8]: https://i.stack.imgur.com/LmC4x.png\r\n  [9]: https://i.stack.imgur.com/boXzQ.png","title":"Java OpenCV Not Detecting Contours Properly","body":"<p>The reason that the whole image is detected as one contour is that <code>findContours</code> finds white contours (not black contours), and the entire image after threshold is a large white contour.</p>\n<p>Use <code>Imgproc.THRESH_BINARY_INV</code> for inverting black and white:</p>\n<pre><code>Imgproc.threshold(grayImage, thresholdImage, 242, 255, Imgproc.THRESH_BINARY_INV);\n</code></pre>\n<hr />\n<p>Other issues:</p>\n<ul>\n<li><p>We may ignore small contours - considered to be noise:</p>\n<pre><code> double contour_area = Imgproc.contourArea(contour);\n if (contour_area &lt; min_contour_area) {\n     continue;\n }\n</code></pre>\n</li>\n<li><p>Add white padding before <code>warpAffine</code> - required because <code>warpAffine</code> may add black margins (think of 45 degrees rotation for example):</p>\n<pre><code> Mat rect = new Mat(image, boundingRect);\n rect = rect.clone(); //Create a clone of the cropped rectangle (required because copyMakeBorder refers to the large image).\n Mat rectWithBorder = new Mat();\n Core.copyMakeBorder(rect, rectWithBorder, emptySpace*2, emptySpace*2, emptySpace*2, emptySpace*2, Core.BORDER_CONSTANT, new Scalar(255, 255, 255));\n</code></pre>\n</li>\n<li><p>Rotate around the center of the cropped rectangle (not around <code>rotatedRect.center</code>):</p>\n<pre><code> Point rect_center = new Point((rectWithBorder.cols()-1.0)/2, (rectWithBorder.rows()-1.0)/2);\n Mat rotationMatrix = Imgproc.getRotationMatrix2D(rect_center, angle, 1.0);  \n Mat rotatedRectMat = new Mat();\n Imgproc.warpAffine(rectWithBorder, rotatedRectMat, rotationMatrix, rectWithBorder.size());\n</code></pre>\n</li>\n<li><p>Remove the extra margins after <code>warpAffine</code>:</p>\n<pre><code> Rect boundingRect2 = new Rect(emptySpace, emptySpace, rotatedRectMat.cols()-emptySpace*2, rotatedRectMat.rows()-emptySpace*2);\n Mat rectWithBorder2 = new Mat(rotatedRectMat, boundingRect2);\n</code></pre>\n</li>\n</ul>\n<hr />\n<p>Code sample:</p>\n<pre><code>package myproject;\n\nimport org.opencv.core.Core;\nimport org.opencv.core.Mat;\nimport org.opencv.core.Scalar;\nimport org.opencv.core.Rect;\nimport org.opencv.core.Point;\nimport org.opencv.core.MatOfPoint;\nimport org.opencv.core.MatOfPoint2f;\nimport org.opencv.core.RotatedRect;\nimport org.opencv.imgproc.Imgproc;\nimport org.opencv.imgcodecs.Imgcodecs;\nimport java.util.List;\nimport java.util.ArrayList;\n\nclass Sample {\n    \n\nstatic { System.loadLibrary(Core.NATIVE_LIBRARY_NAME); }\n\n\n  \npublic static void main(String[] args) {\n    // Load the image file\n    // temp\n    //File file = ResourceUtils.getFile(&quot;classpath:input_image.png&quot;);\n    final String image_file_name = &quot;input_image.png&quot;;\n    \n    // temp change to inputstream\n    Mat image = Imgcodecs.imread(image_file_name);\n\n    // Convert the image to grayscale\n    Mat grayImage = new Mat();\n    Imgproc.cvtColor(image, grayImage, Imgproc.COLOR_BGR2GRAY);\n\n    // Apply a threshold to convert the image to black and white\n    Mat thresholdImage = new Mat();\n    //Imgproc.threshold(grayImage, thresholdImage, 242, 255, Imgproc.THRESH_BINARY);\n    Imgproc.threshold(grayImage, thresholdImage, 242, 255, Imgproc.THRESH_BINARY_INV);\n    Imgcodecs.imwrite(&quot;thresh.png&quot;, thresholdImage);\n\n    // Find contours in the thresholded image\n    List&lt;MatOfPoint&gt; contours = new ArrayList&lt;&gt;();\n    Mat hierarchy = new Mat();\n    Imgproc.findContours(thresholdImage, contours, hierarchy, Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_SIMPLE);\n\n    // Set the amount of empty space to add around the cropped image\n    int emptySpace = 20;\n    \n    double min_contour_area = 10000.0;  //Area threshold - ignore small contours with area less than 10000 (assume noise)\n\n    // Loop over the contours\n    for (int i = 0; i &lt; contours.size(); i++) {\n        MatOfPoint contour = contours.get(i);\n        \n        double contour_area = Imgproc.contourArea(contour);\n        \n        if (contour_area &lt; min_contour_area) {\n            continue;   //Ignore small contours with area less than min_contour_area (assume noise)\n        }\n\n        // Find the bounding box of the contour\n        Rect boundingRect = Imgproc.boundingRect(contour);\n\n        // Crop the rectangle from the original image using the bounding box coordinates\n        Mat rect = new Mat(image, boundingRect);\n        rect = rect.clone(); //Create a clone of the cropped rectangle (required because copyMakeBorder refers to the large image). \n        \n        //Imgcodecs.imwrite(&quot;rect.png&quot;, rect); //Save rect for testing\n\n        // Straighten the rectangle\n        RotatedRect rotatedRect = Imgproc.minAreaRect(new MatOfPoint2f(contour.toArray()));\n        double angle = rotatedRect.angle;\n        if (rotatedRect.size.width &gt; rotatedRect.size.height) {\n            angle += 90;\n        }\n               \n        // Add empty space around the rect - add larger padding before rotation because warpAffine may add black margins\n        Mat rectWithBorder = new Mat();\n        Core.copyMakeBorder(rect, rectWithBorder, emptySpace*2, emptySpace*2, emptySpace*2, emptySpace*2, Core.BORDER_CONSTANT, new Scalar(255, 255, 255));\n        \n        //Imgcodecs.imwrite(&quot;rectWithBorder.png&quot;, rectWithBorder); //Save rectWithBorder for testing\n        \n        //Mat rotationMatrix = Imgproc.getRotationMatrix2D(rotatedRect.center, angle, 1.0);  \n        Point rect_center = new Point((rectWithBorder.cols()-1.0)/2, (rectWithBorder.rows()-1.0)/2);\n        Mat rotationMatrix = Imgproc.getRotationMatrix2D(rect_center, angle, 1.0);  //Rotate around the center of rect.\n        Mat rotatedRectMat = new Mat();\n        Imgproc.warpAffine(rectWithBorder, rotatedRectMat, rotationMatrix, rectWithBorder.size());\n        \n        //Imgcodecs.imwrite(&quot;rotatedRectMat.png&quot;, rotatedRectMat); //Save rotatedRectMat for testing\n        \n        //Crop the center of rotatedRectMat (remove the extra emptySpace padding from each side).\n        Rect boundingRect2 = new Rect(emptySpace, emptySpace, rotatedRectMat.cols()-emptySpace*2, rotatedRectMat.rows()-emptySpace*2);\n        Mat rectWithBorder2 = new Mat(rotatedRectMat, boundingRect2);\n\n\n        // Save the rectangle with border as a separate image file\n        Imgcodecs.imwrite(String.format(&quot;output_image_%d.png&quot;, i), rectWithBorder2);\n    }\n}\n\n}\n</code></pre>\n<hr />\n<p>Result:<br />\n<a href=\"https://i.stack.imgur.com/PYKul.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PYKul.png\" alt=\"enter image description here\" /></a>  <a href=\"https://i.stack.imgur.com/ha8AQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ha8AQ.png\" alt=\"enter image description here\" /></a>  <a href=\"https://i.stack.imgur.com/zrxFh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zrxFh.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/metmS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/metmS.png\" alt=\"enter image description here\" /></a>  <a href=\"https://i.stack.imgur.com/rpb4u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rpb4u.png\" alt=\"enter image description here\" /></a>  <a href=\"https://i.stack.imgur.com/db4Ug.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/db4Ug.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/xDKhJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xDKhJ.png\" alt=\"enter image description here\" /></a>  <a href=\"https://i.stack.imgur.com/LmC4x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LmC4x.png\" alt=\"enter image description here\" /></a>  <a href=\"https://i.stack.imgur.com/boXzQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/boXzQ.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":14964196,"reputation":398,"user_id":10803013,"display_name":"andresmonc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75656246,"answer_count":1,"score":2,"last_activity_date":1678140209,"creation_date":1678117100,"question_id":75652836,"body_markdown":"I&#39;m trying to use opencv to detect contours of cards scanned against a white background. However, I&#39;m running into an issue where it seems to just be detecting the whole image as 1 contour. I&#39;m completely stumped on what I can tweak at this point. I&#39;ve tried ImgProc.RETR_LIST but that returns 42k contours. \r\n\r\n**Code:** \r\n```\r\n    public void convert() throws FileNotFoundException {\r\n        // Load the image file\r\n        // temp\r\n        File file = ResourceUtils.getFile(&quot;classpath:input_image.png&quot;);\r\n        // temp change to inputstream\r\n        Mat image = Imgcodecs.imread(file.getAbsolutePath());\r\n\r\n        // Convert the image to grayscale\r\n        Mat grayImage = new Mat();\r\n        Imgproc.cvtColor(image, grayImage, Imgproc.COLOR_BGR2GRAY);\r\n\r\n        // Apply a threshold to convert the image to black and white\r\n        Mat thresholdImage = new Mat();\r\n        Imgproc.threshold(grayImage, thresholdImage, 242, 255, Imgproc.THRESH_BINARY);\r\n        Imgcodecs.imwrite(&quot;thresh.png&quot;, thresholdImage);\r\n\r\n        // Find contours in the thresholded image\r\n        List&lt;MatOfPoint&gt; contours = new ArrayList&lt;&gt;();\r\n        Mat hierarchy = new Mat();\r\n        Imgproc.findContours(thresholdImage, contours, hierarchy, Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_SIMPLE);\r\n\r\n        // Set the amount of empty space to add around the cropped image\r\n        int emptySpace = 20;\r\n\r\n        // Loop over the contours\r\n        for (int i = 0; i &lt; contours.size(); i++) {\r\n            MatOfPoint contour = contours.get(i);\r\n\r\n            // Find the bounding box of the contour\r\n            Rect boundingRect = Imgproc.boundingRect(contour);\r\n\r\n            // Crop the rectangle from the original image using the bounding box coordinates\r\n            Mat rect = new Mat(image, boundingRect);\r\n\r\n            // Straighten the rectangle\r\n            RotatedRect rotatedRect = Imgproc.minAreaRect(new MatOfPoint2f(contour.toArray()));\r\n            double angle = rotatedRect.angle;\r\n            if (rotatedRect.size.width &gt; rotatedRect.size.height) {\r\n                angle += 90;\r\n            }\r\n            Mat rotationMatrix = Imgproc.getRotationMatrix2D(rotatedRect.center, angle, 1.0);\r\n            Mat rotatedRectMat = new Mat();\r\n            Imgproc.warpAffine(rect, rotatedRectMat, rotationMatrix, rect.size());\r\n\r\n            // Add empty space around the cropped image\r\n            Mat rectWithBorder = new Mat();\r\n            Core.copyMakeBorder(rotatedRectMat, rectWithBorder, emptySpace, emptySpace, emptySpace, emptySpace, Core.BORDER_CONSTANT, new Scalar(255, 255, 255));\r\n\r\n            // Save the rectangle with border as a separate image file\r\n            Imgcodecs.imwrite(String.format(&quot;output_image_%d.png&quot;, i), rectWithBorder);\r\n\r\n        }\r\n    }\r\n```\r\n**Input Image**:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Generated Threshold:**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Output Image:**\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ysWlH.png\r\n  [2]: https://i.stack.imgur.com/JNciq.png\r\n  [3]: https://i.stack.imgur.com/FQZXN.png","title":"Java OpenCV Not Detecting Contours Properly","body":"<p>I'm trying to use opencv to detect contours of cards scanned against a white background. However, I'm running into an issue where it seems to just be detecting the whole image as 1 contour. I'm completely stumped on what I can tweak at this point. I've tried ImgProc.RETR_LIST but that returns 42k contours.</p>\n<p><strong>Code:</strong></p>\n<pre><code>    public void convert() throws FileNotFoundException {\n        // Load the image file\n        // temp\n        File file = ResourceUtils.getFile(&quot;classpath:input_image.png&quot;);\n        // temp change to inputstream\n        Mat image = Imgcodecs.imread(file.getAbsolutePath());\n\n        // Convert the image to grayscale\n        Mat grayImage = new Mat();\n        Imgproc.cvtColor(image, grayImage, Imgproc.COLOR_BGR2GRAY);\n\n        // Apply a threshold to convert the image to black and white\n        Mat thresholdImage = new Mat();\n        Imgproc.threshold(grayImage, thresholdImage, 242, 255, Imgproc.THRESH_BINARY);\n        Imgcodecs.imwrite(&quot;thresh.png&quot;, thresholdImage);\n\n        // Find contours in the thresholded image\n        List&lt;MatOfPoint&gt; contours = new ArrayList&lt;&gt;();\n        Mat hierarchy = new Mat();\n        Imgproc.findContours(thresholdImage, contours, hierarchy, Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_SIMPLE);\n\n        // Set the amount of empty space to add around the cropped image\n        int emptySpace = 20;\n\n        // Loop over the contours\n        for (int i = 0; i &lt; contours.size(); i++) {\n            MatOfPoint contour = contours.get(i);\n\n            // Find the bounding box of the contour\n            Rect boundingRect = Imgproc.boundingRect(contour);\n\n            // Crop the rectangle from the original image using the bounding box coordinates\n            Mat rect = new Mat(image, boundingRect);\n\n            // Straighten the rectangle\n            RotatedRect rotatedRect = Imgproc.minAreaRect(new MatOfPoint2f(contour.toArray()));\n            double angle = rotatedRect.angle;\n            if (rotatedRect.size.width &gt; rotatedRect.size.height) {\n                angle += 90;\n            }\n            Mat rotationMatrix = Imgproc.getRotationMatrix2D(rotatedRect.center, angle, 1.0);\n            Mat rotatedRectMat = new Mat();\n            Imgproc.warpAffine(rect, rotatedRectMat, rotationMatrix, rect.size());\n\n            // Add empty space around the cropped image\n            Mat rectWithBorder = new Mat();\n            Core.copyMakeBorder(rotatedRectMat, rectWithBorder, emptySpace, emptySpace, emptySpace, emptySpace, Core.BORDER_CONSTANT, new Scalar(255, 255, 255));\n\n            // Save the rectangle with border as a separate image file\n            Imgcodecs.imwrite(String.format(&quot;output_image_%d.png&quot;, i), rectWithBorder);\n\n        }\n    }\n</code></pre>\n<p><strong>Input Image</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/ysWlH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ysWlH.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Generated Threshold:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/JNciq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JNciq.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Output Image:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/FQZXN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FQZXN.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","jboss","datasource","jndi"],"answers":[{"comments":[{"owner":{"account_id":1386148,"reputation":1691,"user_id":1318162,"accept_rate":64,"display_name":"rphello101"},"score":0,"creation_date":1677902251,"post_id":75623421,"comment_id":133433958,"body_markdown":"I corrected the typo I had above with &quot;java:java:&quot;. This was not the issue.","body":"I corrected the typo I had above with &quot;java:java:&quot;. This was not the issue."}],"tags":[],"owner":{"account_id":2931887,"reputation":8248,"user_id":2511915,"accept_rate":85,"display_name":"Dark Knight"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677820830,"creation_date":1677820830,"answer_id":75623421,"question_id":75623055,"body_markdown":"Try below configuration for jndi lookup and binding\r\n\r\n    spring.datasource.jndi-name=java:jboss/datasources/YourDataSourceName","title":"Spring Boot application use JNDI datasource from JBoss Standalone.xml","body":"<p>Try below configuration for jndi lookup and binding</p>\n<pre><code>spring.datasource.jndi-name=java:jboss/datasources/YourDataSourceName\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1386148,"reputation":1691,"user_id":1318162,"accept_rate":64,"display_name":"rphello101"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678140208,"creation_date":1677966250,"answer_id":75638856,"question_id":75623055,"body_markdown":"Finally figured this out. When deploying a WAR file to a JBoss server, you need to do the following: \r\n\r\n1. Change your [filename].war to [filename].zip and extract the contents \r\n2. Change the newly extracted folder name to [filename].war\r\n3. Move your main &quot;com&quot; and related folders (with all your classes, templates, etc.) to WEB-INF/classes (you may need to create the classes folder) \r\n4. Move the application.properties file to WEB-INF/classes\r\n\r\nI was missing Step 4. I moved application.properties to WEB-INF but not to WEB-INF/classes. The server couldn&#39;t find the application.properties file, but rather than saying so, it through the error noted in the question above. \r\n\r\nWEB-INF/classes will be your root directory","title":"Spring Boot application use JNDI datasource from JBoss Standalone.xml","body":"<p>Finally figured this out. When deploying a WAR file to a JBoss server, you need to do the following:</p>\n<ol>\n<li>Change your [filename].war to [filename].zip and extract the contents</li>\n<li>Change the newly extracted folder name to [filename].war</li>\n<li>Move your main &quot;com&quot; and related folders (with all your classes, templates, etc.) to WEB-INF/classes (you may need to create the classes folder)</li>\n<li>Move the application.properties file to WEB-INF/classes</li>\n</ol>\n<p>I was missing Step 4. I moved application.properties to WEB-INF but not to WEB-INF/classes. The server couldn't find the application.properties file, but rather than saying so, it through the error noted in the question above.</p>\n<p>WEB-INF/classes will be your root directory</p>\n"}],"owner":{"account_id":1386148,"reputation":1691,"user_id":1318162,"accept_rate":64,"display_name":"rphello101"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":818,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75638856,"answer_count":2,"score":0,"last_activity_date":1678140208,"creation_date":1677816102,"question_id":75623055,"body_markdown":"I am trying to get my Spring Boot application to work on our JBoss 7.4 server. One of our requirements is to keep the datasource information defined in the JBoss standalone.xml file\r\n\r\nIn standalone.xml, I have: \r\n\r\n    &lt;datasources&gt;\r\n    \t&lt;datasource jndi-name=&quot;java:jboss/datasources/BugsquisherDS&quot; pool-name=&quot;BugsquisherDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n    \t&lt;connection-url&gt;jdbc:sqlserver://[redacted]&lt;/connection-url&gt;\r\n    \t&lt;driver&gt;sqlserver2008&lt;/driver&gt;\r\n    \t...\r\n    \t&lt;/datasource&gt;\r\n    \t&lt;drivers&gt;\r\n    \t\t&lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;\r\n    \t\t\t&lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\r\n    \t\t&lt;/driver&gt;\r\n    \t\t&lt;driver name=&quot;sqlserver2008&quot; module=&quot;com.microsoft.sqlserver&quot;&gt;\r\n    \t\t\t&lt;driver-class&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/driver-class&gt;\r\n    \t\t&lt;/driver&gt;\r\n    \t&lt;/drivers&gt;\r\n    &lt;/datasource&gt;\r\n\r\nAnd I believe the only thing I needed to get this to work was adding the JNDI-name to my application.properties:\r\n\r\n    spring.datasource.jndi-name=java:jboss/datasources/BugsquisherDS\r\n\r\nWhen I deploy, I fail with the following error: \r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n    \r\n    Reason: Failed to determine a suitable driver class\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider the following:\r\n    \tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n    \tIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\r\n    \r\n    20:51:39,370 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 81) MSC000001: Failed to start service jboss.deployment.unit.&quot;SupportCenter.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;SupportCenter.war&quot;.undertow-deployment: java.lang.RuntimeException: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n    \tat org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n    \tat org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n    \tat org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n    \tat org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n    Caused by: java.lang.RuntimeException: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    \tat io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:257)\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\r\n    \t... 8 more\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat deployment.SupportCenter.war//org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)\r\n    \tat deployment.SupportCenter.war//org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908)\r\n    \tat deployment.SupportCenter.war//org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\r\n    \tat deployment.SupportCenter.war//com.onlinesol.supportcenterv2.SupportCenterV2Application.onStartup(SupportCenterV2Application.java:34)\r\n    \tat deployment.SupportCenter.war//org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\r\n    \tat io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:204)\r\n    \tat io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:187)\r\n    \tat io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n    \tat io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n    \tat org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\r\n    \tat io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:255)\r\n    \t... 10 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n    \t... 44 more\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n    \t... 58 more\r\n    Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:252)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:193)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)\r\n    \tat deployment.SupportCenter.war//org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat deployment.SupportCenter.war//org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n    \t... 59 more\r\n\r\nWhat did I miss?","title":"Spring Boot application use JNDI datasource from JBoss Standalone.xml","body":"<p>I am trying to get my Spring Boot application to work on our JBoss 7.4 server. One of our requirements is to keep the datasource information defined in the JBoss standalone.xml file</p>\n<p>In standalone.xml, I have:</p>\n<pre><code>&lt;datasources&gt;\n    &lt;datasource jndi-name=&quot;java:jboss/datasources/BugsquisherDS&quot; pool-name=&quot;BugsquisherDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\n    &lt;connection-url&gt;jdbc:sqlserver://[redacted]&lt;/connection-url&gt;\n    &lt;driver&gt;sqlserver2008&lt;/driver&gt;\n    ...\n    &lt;/datasource&gt;\n    &lt;drivers&gt;\n        &lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;\n            &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\n        &lt;/driver&gt;\n        &lt;driver name=&quot;sqlserver2008&quot; module=&quot;com.microsoft.sqlserver&quot;&gt;\n            &lt;driver-class&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/driver-class&gt;\n        &lt;/driver&gt;\n    &lt;/drivers&gt;\n&lt;/datasource&gt;\n</code></pre>\n<p>And I believe the only thing I needed to get this to work was adding the JNDI-name to my application.properties:</p>\n<pre><code>spring.datasource.jndi-name=java:jboss/datasources/BugsquisherDS\n</code></pre>\n<p>When I deploy, I fail with the following error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\n\n20:51:39,370 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 81) MSC000001: Failed to start service jboss.deployment.unit.&quot;SupportCenter.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;SupportCenter.war&quot;.undertow-deployment: java.lang.RuntimeException: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n    at org.jboss.threads@2.4.0.Final-redhat-00001//org.jboss.threads.JBossThread.run(JBossThread.java:513)\nCaused by: java.lang.RuntimeException: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n    at io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:257)\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\n    ... 8 more\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at deployment.SupportCenter.war//org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)\n    at deployment.SupportCenter.war//org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908)\n    at deployment.SupportCenter.war//org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at deployment.SupportCenter.war//org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\n    at deployment.SupportCenter.war//org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740)\n    at deployment.SupportCenter.war//org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415)\n    at deployment.SupportCenter.war//org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n    at deployment.SupportCenter.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\n    at deployment.SupportCenter.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\n    at deployment.SupportCenter.war//org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\n    at deployment.SupportCenter.war//com.onlinesol.supportcenterv2.SupportCenterV2Application.onStartup(SupportCenterV2Application.java:34)\n    at deployment.SupportCenter.war//org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\n    at io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:204)\n    at io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:187)\n    at io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n    at io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n    at org.wildfly.extension.undertow@7.4.0.GA-redhat-00005//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1530)\n    at io.undertow.servlet@2.2.5.Final-redhat-00001//io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:255)\n    ... 10 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    ... 44 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 58 more\nCaused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n    at deployment.SupportCenter.war//org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:252)\n    at deployment.SupportCenter.war//org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:193)\n    at deployment.SupportCenter.war//org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)\n    at deployment.SupportCenter.war//org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at deployment.SupportCenter.war//org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 59 more\n</code></pre>\n<p>What did I miss?</p>\n"},{"tags":["java","gradle","testng"],"owner":{"account_id":6660558,"reputation":11,"user_id":5139874,"display_name":"Sam in MA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678139851,"creation_date":1678139851,"question_id":75656200,"body_markdown":"I&#39;m executing `gradle clean build test` in my Java 11 project. The build is &quot;succeeding&quot;, but no tests are ever being executed.  This was working just fine with Java 8, but due to updates to our Jenkins build server, I&#39;m required to upgrade this project to use Java 11.  At the same time, I upgraded from gradle 4.10 to 5.6.\r\n\r\n\r\n```\r\n./gradlew --no-daemon clean build test\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by org.codehaus.groovy.vmplugin.v7.Java7$1 (file:/Users/Sam/.gradle/wrapper/dists/gradle-5.6.4-all/ankdp27end7byghfw1q2sw75f/gradle-5.6.4/lib/groovy-all-1.3-2.5.4.jar) to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.Class,int)\r\nWARNING: Please consider reporting this to the maintainers of org.codehaus.groovy.vmplugin.v7.Java7$1\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\n&gt; Task :clean\r\n&gt; Task :compileJava\r\n&gt; Task :processResources\r\n&gt; Task :classes\r\n&gt; Task :jar\r\n&gt; Task :assemble\r\n&gt; Task :checkstyleMain\r\n\r\n&gt; Task :compileTestJava\r\nNote: Some input files use unchecked or unsafe operations.\r\nNote: Recompile with -Xlint:unchecked for details.\r\n\r\n&gt; Task :processTestResources\r\n&gt; Task :testClasses\r\n&gt; Task :checkstyleTest\r\n\r\n&gt; Task :test\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by org.apache.logging.log4j.core.util.ReflectionUtil (file:/Users/Sam/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-core/2.16.0/ca12fb3902ecfcba1e1357ebfc55407acec30ede/log4j-core-2.16.0.jar) to field java.util.Collections$UnmodifiableMap.m\r\nWARNING: Please consider reporting this to the maintainers of org.apache.logging.log4j.core.util.ReflectionUtil\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\n\r\n&gt; Task :check\r\n&gt; Task :build\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.\r\nUse &#39;--warning-mode all&#39; to show the individual deprecation warnings.\r\nSee https://docs.gradle.org/5.6.4/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD SUCCESSFUL in 17s\r\n9 actionable tasks: 9 executed\r\n```\r\n\r\nI have the following block in build.gradle:\r\n\r\n```groovy\r\ntest {\r\n    group &quot;tests&quot;\r\n    description &quot;Run unit tests&quot;\r\n    dependsOn assemble\r\n    scanForTestClasses true\r\n    useTestNG {\r\n        systemProperties defaultProperties &lt;&lt; System.properties\r\n    }\r\n    testClassesDirs = sourceSets.test.output.classesDirs\r\n    classpath = sourceSets.test.runtimeClasspath\r\n    outputs.upToDateWhen { false }\r\n}\r\n```\r\n\r\nand the following source sets:\r\n\r\n```groovy\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDir &#39;src/main/java&#39;\r\n        }\r\n        resources {\r\n            srcDir &#39;src/main/resources&#39;\r\n        }\r\n    }\r\n\r\n    test {\r\n        java {\r\n            compileClasspath += main.output\r\n            runtimeClasspath += main.output\r\n            srcDir &#39;src/test/unit&#39;\r\n        }\r\n        resources {\r\n            srcDirs = [&#39;src/test/resources&#39;]\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m stumped why the tests don&#39;t run from the command line (nor if I try to execute them from IntelliJ IDEA using gradle, of course), yet they executed fine with Java 8 / Gradle 4, and they also execute fine from IDEA when I execute them using a TestNG run configuration.","title":"Gradle 5.6 with Java 11 and TestNG 7.4.0 - tests are not being executed","body":"<p>I'm executing <code>gradle clean build test</code> in my Java 11 project. The build is &quot;succeeding&quot;, but no tests are ever being executed.  This was working just fine with Java 8, but due to updates to our Jenkins build server, I'm required to upgrade this project to use Java 11.  At the same time, I upgraded from gradle 4.10 to 5.6.</p>\n<pre><code>./gradlew --no-daemon clean build test\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by org.codehaus.groovy.vmplugin.v7.Java7$1 (file:/Users/Sam/.gradle/wrapper/dists/gradle-5.6.4-all/ankdp27end7byghfw1q2sw75f/gradle-5.6.4/lib/groovy-all-1.3-2.5.4.jar) to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.Class,int)\nWARNING: Please consider reporting this to the maintainers of org.codehaus.groovy.vmplugin.v7.Java7$1\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\n&gt; Task :clean\n&gt; Task :compileJava\n&gt; Task :processResources\n&gt; Task :classes\n&gt; Task :jar\n&gt; Task :assemble\n&gt; Task :checkstyleMain\n\n&gt; Task :compileTestJava\nNote: Some input files use unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n\n&gt; Task :processTestResources\n&gt; Task :testClasses\n&gt; Task :checkstyleTest\n\n&gt; Task :test\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by org.apache.logging.log4j.core.util.ReflectionUtil (file:/Users/Sam/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-core/2.16.0/ca12fb3902ecfcba1e1357ebfc55407acec30ede/log4j-core-2.16.0.jar) to field java.util.Collections$UnmodifiableMap.m\nWARNING: Please consider reporting this to the maintainers of org.apache.logging.log4j.core.util.ReflectionUtil\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\n\n&gt; Task :check\n&gt; Task :build\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/5.6.4/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD SUCCESSFUL in 17s\n9 actionable tasks: 9 executed\n</code></pre>\n<p>I have the following block in build.gradle:</p>\n<pre><code>test {\n    group &quot;tests&quot;\n    description &quot;Run unit tests&quot;\n    dependsOn assemble\n    scanForTestClasses true\n    useTestNG {\n        systemProperties defaultProperties &lt;&lt; System.properties\n    }\n    testClassesDirs = sourceSets.test.output.classesDirs\n    classpath = sourceSets.test.runtimeClasspath\n    outputs.upToDateWhen { false }\n}\n</code></pre>\n<p>and the following source sets:</p>\n<pre><code>sourceSets {\n    main {\n        java {\n            srcDir 'src/main/java'\n        }\n        resources {\n            srcDir 'src/main/resources'\n        }\n    }\n\n    test {\n        java {\n            compileClasspath += main.output\n            runtimeClasspath += main.output\n            srcDir 'src/test/unit'\n        }\n        resources {\n            srcDirs = ['src/test/resources']\n        }\n    }\n}\n</code></pre>\n<p>I'm stumped why the tests don't run from the command line (nor if I try to execute them from IntelliJ IDEA using gradle, of course), yet they executed fine with Java 8 / Gradle 4, and they also execute fine from IDEA when I execute them using a TestNG run configuration.</p>\n"},{"tags":["java","spring","spring-boot","heroku","deployment"],"comments":[{"owner":{"account_id":15398978,"reputation":316,"user_id":11109119,"display_name":"Guy_g23"},"score":0,"creation_date":1681382450,"post_id":75655494,"comment_id":134048790,"body_markdown":"Show your pom.xml content so users can share feedbacks","body":"Show your pom.xml content so users can share feedbacks"}],"owner":{"account_id":27951024,"reputation":1,"user_id":21344877,"display_name":"Luca De Cicco"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1678139507,"answer_count":0,"score":0,"last_activity_date":1678139545,"creation_date":1678134193,"question_id":75655494,"body_markdown":"I try to deploy my spring boot app to heroku but I have this problem : [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project heroku-deploy-spring: Fatal error compiling: invalid target release: 17 -&gt;\r\n\r\nI try to change in pom java version to 11 , but still the same problem","title":"I have an error when i try to deploy spring boot app to heroku","body":"<p>I try to deploy my spring boot app to heroku but I have this problem : [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project heroku-deploy-spring: Fatal error compiling: invalid target release: 17 -&gt;</p>\n<p>I try to change in pom java version to 11 , but still the same problem</p>\n"},{"tags":["java","selenium-webdriver","canvas","coordinates"],"answers":[{"comments":[{"owner":{"account_id":25820050,"reputation":35,"user_id":19559322,"display_name":"codename_zoe"},"score":0,"creation_date":1678138815,"post_id":75656056,"comment_id":133472375,"body_markdown":"I forgot to add finding iframe code. Please check the updated code","body":"I forgot to add finding iframe code. Please check the updated code"},{"owner":{"account_id":25820050,"reputation":35,"user_id":19559322,"display_name":"codename_zoe"},"score":0,"creation_date":1678139967,"post_id":75656056,"comment_id":133472633,"body_markdown":"Thank you, this one works. However, I want to know where is clicked. I used this code to see if the specifil location on canvas is clicked but no idea where is clicked: Actions action = new Actions(driver).moveToElement(canvas, 0, 0).moveByOffset(849,341).click();","body":"Thank you, this one works. However, I want to know where is clicked. I used this code to see if the specifil location on canvas is clicked but no idea where is clicked: Actions action = new Actions(driver).moveToElement(canvas, 0, 0).moveByOffset(849,341).click();"},{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1678140218,"post_id":75656056,"comment_id":133472680,"body_markdown":"As you are using `moveByOffset(849,341)` ofcoarse the click happens at that offset with respect to the upper-left corner of the canvas having the coordinates `(0,0)`. See [details](https://stackoverflow.com/a/59923053/7429447).","body":"As you are using <code>moveByOffset(849,341)</code> ofcoarse the click happens at that offset with respect to the upper-left corner of the canvas having the coordinates <code>(0,0)</code>. See <a href=\"https://stackoverflow.com/a/59923053/7429447\">details</a>."}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678138881,"creation_date":1678138476,"answer_id":75656056,"question_id":75655910,"body_markdown":"As per the given HTML:\r\n\r\n![html](https://i.stack.imgur.com/UzJEr.png)\r\n\r\nThe desired `&lt;canvas&gt;` element is within is within a [`&lt;iframe&gt;`](https://stackoverflow.com/a/53276478/7429447) so you have to:\r\n\r\n- Induce [WebDriverWait](https://stackoverflow.com/a/48990165/7429447) for the desired _frameToBeAvailableAndSwitchToIt_.\r\n- Induce [WebDriverWait](https://stackoverflow.com/a/50621712/7429447) for the _visibilityOfElementLocated_ as follows:\r\n- You can use either of the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n\r\n\t  new WebDriverWait(Util.setup.driver, Duration.ofSeconds(10)).until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.cssSelector(&quot;div.dialogMaster&quot;)));\r\n\t  WebElement canvas = new WebDriverWait(Util.setup.driver, Duration.ofSeconds(10)).until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.tagName(&quot;canvas&quot;))).get(0);\r\n\t  System.out.println(canvas.getSize().width/2); // -&gt; returns 849\r\n\t  System.out.println(canvas.getSize().height/2); // -&gt; returns 341","title":"How to check where is clicked in canvas(HTML) using Java","body":"<p>As per the given HTML:</p>\n<p><img src=\"https://i.stack.imgur.com/UzJEr.png\" alt=\"html\" /></p>\n<p>The desired <code>&lt;canvas&gt;</code> element is within is within a <a href=\"https://stackoverflow.com/a/53276478/7429447\"><code>&lt;iframe&gt;</code></a> so you have to:</p>\n<ul>\n<li><p>Induce <a href=\"https://stackoverflow.com/a/48990165/7429447\">WebDriverWait</a> for the desired <em>frameToBeAvailableAndSwitchToIt</em>.</p>\n</li>\n<li><p>Induce <a href=\"https://stackoverflow.com/a/50621712/7429447\">WebDriverWait</a> for the <em>visibilityOfElementLocated</em> as follows:</p>\n</li>\n<li><p>You can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n<pre><code>new WebDriverWait(Util.setup.driver, Duration.ofSeconds(10)).until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.cssSelector(&quot;div.dialogMaster&quot;)));\nWebElement canvas = new WebDriverWait(Util.setup.driver, Duration.ofSeconds(10)).until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.tagName(&quot;canvas&quot;))).get(0);\nSystem.out.println(canvas.getSize().width/2); // -&gt; returns 849\nSystem.out.println(canvas.getSize().height/2); // -&gt; returns 341\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":25820050,"reputation":35,"user_id":19559322,"display_name":"codename_zoe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75656056,"answer_count":1,"score":1,"last_activity_date":1678138881,"creation_date":1678137263,"question_id":75655910,"body_markdown":"I have a canvas inside a window. The window is full screen, but the canvas is not the full size. I want to click a specific position in canvas so I use bellow:  \r\n`Actions action = new Actions(driver).moveToElement(canvas, 0, 0).moveByOffset(849,341).click();`\r\n\r\n[![enter image description here](https://i.stack.imgur.com/UzJEr.png)](https://i.stack.imgur.com/UzJEr.png)\r\n```\r\nWebElement iframe = driver.findElements(By.tagName(&quot;iframe&quot;)).get(0);\r\ndriver.switchTo().frame(iframe);\r\nWebElement canvas = driver.findElements(By.tagName(&quot;canvas&quot;)).get(0);\r\nSystem.out.println(canvas.getSize().width/2); // -&gt; returns 849\r\nSystem.out.println(canvas.getSize().height/2); // -&gt; returns 341\r\n```\r\nThe problem is, the specific position isn&#39;t clicked and I don&#39;t know where is clicked just by using the code above. I&#39;ve used Page Ruler to locate pointer but it didn&#39;t work in this situaion.\r\n\r\nI&#39;m hoping there is a solution which will highlight or show the location of pointer.\r\n\r\n","title":"How to check where is clicked in canvas(HTML) using Java","body":"<p>I have a canvas inside a window. The window is full screen, but the canvas is not the full size. I want to click a specific position in canvas so I use bellow:<br />\n<code>Actions action = new Actions(driver).moveToElement(canvas, 0, 0).moveByOffset(849,341).click();</code></p>\n<p><a href=\"https://i.stack.imgur.com/UzJEr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UzJEr.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>WebElement iframe = driver.findElements(By.tagName(&quot;iframe&quot;)).get(0);\ndriver.switchTo().frame(iframe);\nWebElement canvas = driver.findElements(By.tagName(&quot;canvas&quot;)).get(0);\nSystem.out.println(canvas.getSize().width/2); // -&gt; returns 849\nSystem.out.println(canvas.getSize().height/2); // -&gt; returns 341\n</code></pre>\n<p>The problem is, the specific position isn't clicked and I don't know where is clicked just by using the code above. I've used Page Ruler to locate pointer but it didn't work in this situaion.</p>\n<p>I'm hoping there is a solution which will highlight or show the location of pointer.</p>\n"},{"tags":["java","spring","rest","param","multivalue"],"comments":[{"owner":{"account_id":55167,"reputation":1294,"user_id":2632690,"accept_rate":27,"display_name":"JVXR"},"score":0,"creation_date":1454689734,"post_id":35228865,"comment_id":58172589,"body_markdown":"Check if your browser or http client is not discarding the empty param.","body":"Check if your browser or http client is not discarding the empty param."},{"owner":{"account_id":4111475,"reputation":61,"user_id":3374151,"display_name":"silverdrop"},"score":0,"creation_date":1454690173,"post_id":35228865,"comment_id":58172851,"body_markdown":"I don&#39;t think this is the case. When using something like @RequestParam Map&lt;String, String&gt; params, I see the single null value in there (?testParam=)","body":"I don&#39;t think this is the case. When using something like @RequestParam Map&lt;String, String&gt; params, I see the single null value in there (?testParam=)"}],"answers":[{"comments":[{"owner":{"account_id":4111475,"reputation":61,"user_id":3374151,"display_name":"silverdrop"},"score":1,"creation_date":1454921580,"post_id":35230022,"comment_id":58242568,"body_markdown":"Thank you, Ali. I understand the issue now.","body":"Thank you, Ali. I understand the issue now."}],"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1454693199,"creation_date":1454693199,"answer_id":35230022,"question_id":35228865,"body_markdown":"Spring&#39;s `StringToArrayConverter` is responsible for this conversion. If you take a look at its `convert` method:\r\n\r\n    public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {\r\n    \t\tif (source == null) {\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \t\tString string = (String) source;\r\n    \t\tString[] fields = StringUtils.commaDelimitedListToStringArray(string);\r\n    \t\tObject target = Array.newInstance(targetType.getElementTypeDescriptor().getType(), fields.length);\r\n    \t\tfor (int i = 0; i &lt; fields.length; i++) {\r\n    \t\t\tString sourceElement = fields[i];\r\n    \t\t\tObject targetElement = this.conversionService.convert(sourceElement.trim(), sourceType, targetType.getElementTypeDescriptor());\r\n    \t\t\tArray.set(target, i, targetElement);\r\n    \t\t}\r\n    \t\treturn target;\r\n    }\r\n\r\nBasically, it takes the input (empty `String` in your case), split it by **comma** and return an array with values of the exploded `String`. Result of splitting an empty `String`, of course, is an empty `Array`. \r\n\r\nWhen you pass two parameters with the same name, the `ArrayToArrayConverter` will be called, which behaves as you would expect and returns an array with two empty `String`s.\r\n\r\nIf you want to disable the default `String` to `Array` behavior, you should register another `Converter` that converts an empty `String` to a single element `Array`.","title":"Spring framework REST multivalue request parameter empty array","body":"<p>Spring's <code>StringToArrayConverter</code> is responsible for this conversion. If you take a look at its <code>convert</code> method:</p>\n\n<pre><code>public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {\n        if (source == null) {\n            return null;\n        }\n        String string = (String) source;\n        String[] fields = StringUtils.commaDelimitedListToStringArray(string);\n        Object target = Array.newInstance(targetType.getElementTypeDescriptor().getType(), fields.length);\n        for (int i = 0; i &lt; fields.length; i++) {\n            String sourceElement = fields[i];\n            Object targetElement = this.conversionService.convert(sourceElement.trim(), sourceType, targetType.getElementTypeDescriptor());\n            Array.set(target, i, targetElement);\n        }\n        return target;\n}\n</code></pre>\n\n<p>Basically, it takes the input (empty <code>String</code> in your case), split it by <strong>comma</strong> and return an array with values of the exploded <code>String</code>. Result of splitting an empty <code>String</code>, of course, is an empty <code>Array</code>. </p>\n\n<p>When you pass two parameters with the same name, the <code>ArrayToArrayConverter</code> will be called, which behaves as you would expect and returns an array with two empty <code>String</code>s.</p>\n\n<p>If you want to disable the default <code>String</code> to <code>Array</code> behavior, you should register another <code>Converter</code> that converts an empty <code>String</code> to a single element <code>Array</code>.</p>\n"},{"tags":[],"owner":{"account_id":8650613,"reputation":266,"user_id":6476436,"display_name":"David Costanzo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678138558,"creation_date":1678138558,"answer_id":75656066,"question_id":35228865,"body_markdown":"To add to Ali&#39;s correct answer...\r\n\r\nYou can register a `Converter` that directs Spring to treat the empty string as an array with the empty string within the `addFormatters` method of your `WebMvcConfigurer` bean.\r\n\r\n```\r\n@Configuration\r\npublic class MyMvcConfig implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void addFormatters(FormatterRegistry registry) {\r\n        // Register a converter so that an empty string web parameter,\r\n        // when converted to a String[], is treated as an array with\r\n        // one element (the empty string), instead of an empty array.\r\n        registry.addConverter(new Converter&lt;String, String[]&gt;() {\r\n            @Override\r\n            public String[] convert(String source) {\r\n                if (source.isEmpty()) { // Special case empty string\r\n                    return new String[] { &quot;&quot; };\r\n                }\r\n\r\n                return StringUtils.commaDelimitedListToStringArray(source);\r\n            }\r\n        });\r\n    }\r\n}\r\n```","title":"Spring framework REST multivalue request parameter empty array","body":"<p>To add to Ali's correct answer...</p>\n<p>You can register a <code>Converter</code> that directs Spring to treat the empty string as an array with the empty string within the <code>addFormatters</code> method of your <code>WebMvcConfigurer</code> bean.</p>\n<pre><code>@Configuration\npublic class MyMvcConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addFormatters(FormatterRegistry registry) {\n        // Register a converter so that an empty string web parameter,\n        // when converted to a String[], is treated as an array with\n        // one element (the empty string), instead of an empty array.\n        registry.addConverter(new Converter&lt;String, String[]&gt;() {\n            @Override\n            public String[] convert(String source) {\n                if (source.isEmpty()) { // Special case empty string\n                    return new String[] { &quot;&quot; };\n                }\n\n                return StringUtils.commaDelimitedListToStringArray(source);\n            }\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4111475,"reputation":61,"user_id":3374151,"display_name":"silverdrop"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1842,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35230022,"answer_count":2,"score":1,"last_activity_date":1678138558,"creation_date":1454689446,"question_id":35228865,"body_markdown":"I have a rest endpoint (spring-boot-1.3.0-RELEASE -&gt; spring-core-4.2.4.RELEASE) which takes a multiple instance string parameter\r\n\r\n    @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.GET)\r\n    public ResponseEntity&lt;Object&gt; getTest(@RequestParam(value = &quot;testParam&quot;, required = false) String[] testParamArray) {}\r\n\r\n    /test?testParam=  =&gt; testParamArray has length 0\r\n    /test?testParam=&amp;testParam=  =&gt; testParamArray has length 2 (two empty string items)\r\n\r\nI expected that for the first case to get a single empty sting element in the array but there are none.\r\nAny ideas on how to achieve this?","title":"Spring framework REST multivalue request parameter empty array","body":"<p>I have a rest endpoint (spring-boot-1.3.0-RELEASE -> spring-core-4.2.4.RELEASE) which takes a multiple instance string parameter</p>\n\n<pre><code>@RequestMapping(value = \"/test\", method = RequestMethod.GET)\npublic ResponseEntity&lt;Object&gt; getTest(@RequestParam(value = \"testParam\", required = false) String[] testParamArray) {}\n\n/test?testParam=  =&gt; testParamArray has length 0\n/test?testParam=&amp;testParam=  =&gt; testParamArray has length 2 (two empty string items)\n</code></pre>\n\n<p>I expected that for the first case to get a single empty sting element in the array but there are none.\nAny ideas on how to achieve this?</p>\n"},{"tags":["java","spring","spring-batch"],"owner":{"account_id":27928742,"reputation":21,"user_id":21327289,"display_name":"Abhi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1678138248,"creation_date":1678138204,"question_id":75656021,"body_markdown":"I am working on a Spring Batch application with a job that works with around 7 million elements. So far, the job is set up to read from a SQL database, apply some processing and write to a mongo database. \r\nI am now implementing a change detection mechanism wherein after processing if the data of a specific element is the same as the previous run, I don&#39;t want to write it into mongo. In order to do this, I need to access the output of the previous run in the processor so I know when to exclude it from being written.\r\nSince the processor is called for every element, I cannot have a repository call in the processor. Looking for suggestions on how I could solve this.\r\n\r\nI am thinking of 2 different options right now but I&#39;m not sure if this aligns with the best practices:\r\n\r\n1. Replace the existing JDBC SQL reader with a custom reader that first reads from the SQL database and then from mongo by querying only those elements that were read from SQL. This way I can pass the input data from SQL and the previous run&#39;s output into the processor.\r\n\r\n2. Keep the existing SQL reader and use one of the batch event listeners (chunk listener, item read listener). For example, I could create an item read listener where once items are read, I can query mongo for those items and store that data in an in-memory cache and access that in the processor. I am worried about how this would affect multi-threading however.","title":"Spring Batch reading from 2 different databases","body":"<p>I am working on a Spring Batch application with a job that works with around 7 million elements. So far, the job is set up to read from a SQL database, apply some processing and write to a mongo database.\nI am now implementing a change detection mechanism wherein after processing if the data of a specific element is the same as the previous run, I don't want to write it into mongo. In order to do this, I need to access the output of the previous run in the processor so I know when to exclude it from being written.\nSince the processor is called for every element, I cannot have a repository call in the processor. Looking for suggestions on how I could solve this.</p>\n<p>I am thinking of 2 different options right now but I'm not sure if this aligns with the best practices:</p>\n<ol>\n<li><p>Replace the existing JDBC SQL reader with a custom reader that first reads from the SQL database and then from mongo by querying only those elements that were read from SQL. This way I can pass the input data from SQL and the previous run's output into the processor.</p>\n</li>\n<li><p>Keep the existing SQL reader and use one of the batch event listeners (chunk listener, item read listener). For example, I could create an item read listener where once items are read, I can query mongo for those items and store that data in an in-memory cache and access that in the processor. I am worried about how this would affect multi-threading however.</p>\n</li>\n</ol>\n"},{"tags":["java","android","kotlin","android-sdk-2.3"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":1,"creation_date":1678138582,"post_id":75655924,"comment_id":133472333,"body_markdown":"Widgets are typically registered to update with some interval. They will receive a broadcast that will launch the app process if it isn&#39;t already started. If you don&#39;t use widgets, you can still register for various system broadcasts in your manifest, or use AlarmManager.","body":"Widgets are typically registered to update with some interval. They will receive a broadcast that will launch the app process if it isn&#39;t already started. If you don&#39;t use widgets, you can still register for various system broadcasts in your manifest, or use AlarmManager."},{"owner":{"account_id":14049443,"reputation":19,"user_id":10148684,"display_name":"kouranyi"},"score":0,"creation_date":1678140976,"post_id":75655924,"comment_id":133472845,"body_markdown":"yes, thanks that&#39;s a good hint, but the minimum possible update interval value for the widget `updatePeriodMillis` is 30 minutes. I calculated the time that passed since I killed the process until it become live again it took around 10 minutes meaning the app is using another way to relaunch the process and update the widget. I wonder can AlarmManger or BroadcastReciverers still work despite having no services or a process running ?","body":"yes, thanks that&#39;s a good hint, but the minimum possible update interval value for the widget <code>updatePeriodMillis</code> is 30 minutes. I calculated the time that passed since I killed the process until it become live again it took around 10 minutes meaning the app is using another way to relaunch the process and update the widget. I wonder can AlarmManger or BroadcastReciverers still work despite having no services or a process running ?"},{"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"score":0,"creation_date":1678142845,"post_id":75655924,"comment_id":133473159,"body_markdown":"`AlarmManager` is working on Android side, isn&#39;t killed/dismissed when you are killing your app. personally I&#39;ve made few years ago a widget which is self refreshing every... well, that depends on time of a day, in the midday it was about 6 minutes, at night  about 20-30. `updatePeriodMillis` set up to 2x most rare interval, just for a case when `AlarmManager` would not trigger refreshing action for some reason","body":"<code>AlarmManager</code> is working on Android side, isn&#39;t killed/dismissed when you are killing your app. personally I&#39;ve made few years ago a widget which is self refreshing every... well, that depends on time of a day, in the midday it was about 6 minutes, at night  about 20-30. <code>updatePeriodMillis</code> set up to 2x most rare interval, just for a case when <code>AlarmManager</code> would not trigger refreshing action for some reason"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1678160288,"post_id":75655924,"comment_id":133475446,"body_markdown":"The timer wouldnt have started from the time you killed the process. It would have been some multiple from when the widget was first added. Actually, I suspect its just an approximate minimum. It might also trigger early in some cases to avoid having to wake up the device to do it.","body":"The timer wouldnt have started from the time you killed the process. It would have been some multiple from when the widget was first added. Actually, I suspect its just an approximate minimum. It might also trigger early in some cases to avoid having to wake up the device to do it."}],"owner":{"account_id":14049443,"reputation":19,"user_id":10148684,"display_name":"kouranyi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678137370,"creation_date":1678137370,"question_id":75655924,"body_markdown":"that&#39;s an android app that has a widget that displays the current battery percentage and whether it&#39;s charging or not ( that&#39;s why it needs to be always running to monitor the battery level ).\r\nI forced stop the running process and the widget stoped to display the correct battery percentage for some few minutes untill the app process became LIVE again.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nwhat&#39;s the component used here ? and how the process starts itself again?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3BXo2.jpg","title":"What android component could make the app process always running like that despite having 0 running services?","body":"<p>that's an android app that has a widget that displays the current battery percentage and whether it's charging or not ( that's why it needs to be always running to monitor the battery level ).\nI forced stop the running process and the widget stoped to display the correct battery percentage for some few minutes untill the app process became LIVE again.</p>\n<p><a href=\"https://i.stack.imgur.com/3BXo2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3BXo2.jpg\" alt=\"enter image description here\" /></a></p>\n<p>what's the component used here ? and how the process starts itself again?</p>\n"},{"tags":["java","lombok","jdbi","jdbi3","jdbi3-core"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1678050694,"post_id":75643681,"comment_id":133453737,"body_markdown":"Try removing the Lombok `@Builder` annotation. The Jdbi documentation mentions &quot;_The standard bean convention requires that the setter returns a `void` value. The popular &quot;builder pattern&quot; setter convention of returning the bean itself does not work with the standard Java Bean convention and the setter will not be found. This is a common source of problems when using the `BeanMapper`._&quot;","body":"Try removing the Lombok <code>@Builder</code> annotation. The Jdbi documentation mentions &quot;<i>The standard bean convention requires that the setter returns a <code>void</code> value. The popular &quot;builder pattern&quot; setter convention of returning the bean itself does not work with the standard Java Bean convention and the setter will not be found. This is a common source of problems when using the <code>BeanMapper</code>.</i>&quot;"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1678050728,"post_id":75643681,"comment_id":133453744,"body_markdown":"Otherwise, if that does not help (I don&#39;t typically use Lombok, myself), can you provide the precise DDL for the three tables you are using?","body":"Otherwise, if that does not help (I don&#39;t typically use Lombok, myself), can you provide the precise DDL for the three tables you are using?"},{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1678121944,"post_id":75643681,"comment_id":133468101,"body_markdown":"I am not replacing the setter with builder. The builder and constructor, setter are all in the class. The issue seems to be the prefix only looks for &quot;prefix_&quot; not &quot;prefix.&quot;","body":"I am not replacing the setter with builder. The builder and constructor, setter are all in the class. The issue seems to be the prefix only looks for &quot;prefix_&quot; not &quot;prefix.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678137074,"creation_date":1678122126,"answer_id":75653724,"question_id":75643681,"body_markdown":"The issue is the prefix looks for &quot;prefix_&quot; instead of &quot;prefix.&quot;\r\nSo I will have to explicitly add the alias for the select query to work:\r\n````\r\nString selectSql = &quot;SELECT t.id as t_id, t.ticket_int_1 as t_ticket_int_1, i.id as i_id ....&quot;","title":"JDBI3: Mapping bean class didn&#39;t find any matching columns in result set when mapping to JoinRow","body":"<p>The issue is the prefix looks for &quot;prefix_&quot; instead of &quot;prefix.&quot;\nSo I will have to explicitly add the alias for the select query to work:</p>\n<pre><code>String selectSql = &quot;SELECT t.id as t_id, t.ticket_int_1 as t_ticket_int_1, i.id as i_id ....&quot;\n</code></pre>\n"}],"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":572,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678137074,"creation_date":1678033626,"question_id":75643681,"body_markdown":"I have SQL schema and Java class for issue and ticket model defined as follow:\r\n\r\n````\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Ticket {\r\n\r\n    private long id;\r\n    private int ticket_int_1;\r\n    private int ticket_int_2;\r\n    private int ticket_int_3;\r\n    private String ticket_varchar_1;\r\n    private String dateFiled;\r\n    private String dateLastUpdated;\r\n    private String dateResolved;\r\n}\r\n````\r\n\r\n````\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n@ToString\r\n\r\npublic class Issue {\r\n    private long id;\r\n    private long issue_bigInt_1;\r\n    private long issue_bigInt_2;\r\n    private int issue_int_1;\r\n    @EqualsAndHashCode.Include\r\n    private long issue_bigInt_3;\r\n    private int issue_int_2;\r\n    @EqualsAndHashCode.Include\r\n    private int issue_int_3;\r\n    @EqualsAndHashCode.Include\r\n    private String issue_varchar_1;\r\n    @EqualsAndHashCode.Include\r\n    private String issue_varchar_2;\r\n    @EqualsAndHashCode.Include\r\n    private String issue_varchar_3;\r\n    private int issue_int_4;\r\n    private String dateResolved;\r\n    private String dateCreated;\r\n    private String dateUpdate;\r\n}\r\n````\r\n\r\n````\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\npublic class TicketIssue {\r\n    private long id;\r\n    private int ticket_issue_int_1;\r\n    private long issueId; // issue will be the many\r\n    private long ticketId;  // ticket will be the 1\r\n}\r\n````\r\n\r\n\r\nAccording to the [official doc][1], I wrote the following code:\r\n\r\n````\r\nString selectSql = &quot;SELECT t.*, i.* FROM &quot; + ISSUE_TABLE + &quot; as i&quot;\r\n        + &quot; JOIN &quot; + TICKET_ISSUES_TABLE + &quot; as ti on i.id = ti.issue_id&quot;\r\n        + &quot; JOIN &quot; + TICKET_TABLE + &quot; as t on ti.ticket_id = t.id&quot;;\r\n\r\njdbi.useHandle(handle -&gt; \r\n        handle.registerRowMapper(BeanMapper.factory(Ticket.class, &quot;t&quot;))\r\n        .registerRowMapper(BeanMapper.factory(Issue.class, &quot;i&quot;))\r\n        .registerRowMapper(JoinRowMapper.forTypes(Ticket.class, Issue.class))\r\n        .createQuery(selectSql)\r\n        .mapTo(JoinRow.class));\r\n\r\n````\r\n\r\nExecuting above query throws an error: \r\n\r\n&gt; java.lang.IllegalArgumentException: Mapping bean class Ticket didn&#39;t find any matching columns in result set\r\n\r\n\r\nMy implementation looks exactly the same with the documentation, what went wrong here? Can anyone help?\r\n\r\n  [1]: https://jdbi.org/#_beanmapper","title":"JDBI3: Mapping bean class didn&#39;t find any matching columns in result set when mapping to JoinRow","body":"<p>I have SQL schema and Java class for issue and ticket model defined as follow:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Ticket {\n\n    private long id;\n    private int ticket_int_1;\n    private int ticket_int_2;\n    private int ticket_int_3;\n    private String ticket_varchar_1;\n    private String dateFiled;\n    private String dateLastUpdated;\n    private String dateResolved;\n}\n</code></pre>\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@ToString\n\npublic class Issue {\n    private long id;\n    private long issue_bigInt_1;\n    private long issue_bigInt_2;\n    private int issue_int_1;\n    @EqualsAndHashCode.Include\n    private long issue_bigInt_3;\n    private int issue_int_2;\n    @EqualsAndHashCode.Include\n    private int issue_int_3;\n    @EqualsAndHashCode.Include\n    private String issue_varchar_1;\n    @EqualsAndHashCode.Include\n    private String issue_varchar_2;\n    @EqualsAndHashCode.Include\n    private String issue_varchar_3;\n    private int issue_int_4;\n    private String dateResolved;\n    private String dateCreated;\n    private String dateUpdate;\n}\n</code></pre>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\npublic class TicketIssue {\n    private long id;\n    private int ticket_issue_int_1;\n    private long issueId; // issue will be the many\n    private long ticketId;  // ticket will be the 1\n}\n</code></pre>\n<p>According to the <a href=\"https://jdbi.org/#_beanmapper\" rel=\"nofollow noreferrer\">official doc</a>, I wrote the following code:</p>\n<pre><code>String selectSql = &quot;SELECT t.*, i.* FROM &quot; + ISSUE_TABLE + &quot; as i&quot;\n        + &quot; JOIN &quot; + TICKET_ISSUES_TABLE + &quot; as ti on i.id = ti.issue_id&quot;\n        + &quot; JOIN &quot; + TICKET_TABLE + &quot; as t on ti.ticket_id = t.id&quot;;\n\njdbi.useHandle(handle -&gt; \n        handle.registerRowMapper(BeanMapper.factory(Ticket.class, &quot;t&quot;))\n        .registerRowMapper(BeanMapper.factory(Issue.class, &quot;i&quot;))\n        .registerRowMapper(JoinRowMapper.forTypes(Ticket.class, Issue.class))\n        .createQuery(selectSql)\n        .mapTo(JoinRow.class));\n\n</code></pre>\n<p>Executing above query throws an error:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Mapping bean class Ticket didn't find any matching columns in result set</p>\n</blockquote>\n<p>My implementation looks exactly the same with the documentation, what went wrong here? Can anyone help?</p>\n"},{"tags":["java","spring-boot","swagger-ui","springdoc"],"comments":[{"owner":{"account_id":918176,"reputation":73,"user_id":950496,"display_name":"mbodev"},"score":0,"creation_date":1678028152,"post_id":75643064,"comment_id":133449749,"body_markdown":"How would your production code look then? Would that still have that test header included and would that be branching off somehow? Typically you read header as method params.","body":"How would your production code look then? Would that still have that test header included and would that be branching off somehow? Typically you read header as method params."},{"owner":{"account_id":10650147,"reputation":2228,"user_id":7841415,"display_name":"Suule"},"score":0,"creation_date":1678029126,"post_id":75643064,"comment_id":133449896,"body_markdown":"Yes, production code would have the same header, but it would be added with third party service. There wouldnt be any authentication within current service, the information are needed only to store them in database, whenever some data was created/modified. I would like to avoid ppl to add it by hand with swagger, as there might be much more data then just `username` and `email`","body":"Yes, production code would have the same header, but it would be added with third party service. There wouldnt be any authentication within current service, the information are needed only to store them in database, whenever some data was created/modified. I would like to avoid ppl to add it by hand with swagger, as there might be much more data then just <code>username</code> and <code>email</code>"},{"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1678091598,"post_id":75643064,"comment_id":133459318,"body_markdown":"In standalone Swagger UI it can be done using the `requestInterceptor` as [shown here](https://stackoverflow.com/q/46485621/113116). Since you&#39;re using Springdoc, you can try adding the `requestInterceptor` [as suggested here](https://github.com/springdoc/springdoc-openapi/issues/1654#issuecomment-1121621044).","body":"In standalone Swagger UI it can be done using the <code>requestInterceptor</code> as <a href=\"https://stackoverflow.com/q/46485621/113116\">shown here</a>. Since you&#39;re using Springdoc, you can try adding the <code>requestInterceptor</code> <a href=\"https://github.com/springdoc/springdoc-openapi/issues/1654#issuecomment-1121621044\" rel=\"nofollow noreferrer\">as suggested here</a>."}],"answers":[{"tags":[],"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678137053,"creation_date":1678039425,"answer_id":75644293,"question_id":75643064,"body_markdown":"Yes, it&#39;s possible to pass a custom header with some default value through Swagger UI. You can use the below code snippet to customize OpenAPI -\r\n\r\n    @Bean\r\n    public OpenApiCustomizer getCustomizer() {\r\n        ObjectSchema myCustomSchema = new ObjectSchema();\r\n        myCustomSchema.addProperty(&quot;username&quot;, new Schema&lt;&gt;().type(&quot;string&quot;)._default(&quot;swagger&quot;));\r\n        myCustomSchema.addProperty(&quot;email&quot;, new Schema&lt;&gt;().type(&quot;string&quot;)._default(&quot;dummy@email&quot;));\r\n\r\n        return openApi -&gt; openApi.getPaths().values().stream()\r\n                .flatMap(pathItem -&gt; pathItem.readOperations().stream())\r\n                .forEach(operation -&gt; \r\n                    operation.addParametersItem(\r\n                            new HeaderParameter()\r\n                                    .name(&quot;test-header&quot;)\r\n                                    .required(false)\r\n                                    .schema(myCustomSchema).explode(true)\r\n                                    .style(Parameter.StyleEnum.SIMPLE)\r\n                    )\r\n                );\r\n    }\r\n\r\nThis will produce your header&#39;s value in the controller as **username=swagger,email=dummy@email**.\r\n\r\nBut I&#39;ll suggest if you have to pass a JSON as a header then pass it in stringified, and parse it to an object in your controller. For string type header, OpenAPI can be customized as - \r\n\r\n     @Bean\r\n    public OpenApiCustomizer getCustomizer() {\r\n        return openApi -&gt; openApi.getPaths().values().stream()\r\n                .flatMap(pathItem -&gt; pathItem.readOperations().stream())\r\n                .forEach(operation -&gt; operation\r\n                        .addParametersItem(\r\n                                new HeaderParameter()\r\n                                        .name(&quot;test-header&quot;)\r\n                                        .required(false)\r\n                                        .schema(new Schema().type(&quot;string&quot;)._default(&quot;{\\&quot;username\\&quot;:\\&quot;swagger\\&quot;, \\&quot;email\\&quot;:\\&quot;dummy@email\\&quot;}&quot;))\r\n                        ));\r\n    }\r\nPlease upvote if it helps.","title":"How to inject a custom header whenever a request is sent from Swagger UI?","body":"<p>Yes, it's possible to pass a custom header with some default value through Swagger UI. You can use the below code snippet to customize OpenAPI -</p>\n<pre><code>@Bean\npublic OpenApiCustomizer getCustomizer() {\n    ObjectSchema myCustomSchema = new ObjectSchema();\n    myCustomSchema.addProperty(&quot;username&quot;, new Schema&lt;&gt;().type(&quot;string&quot;)._default(&quot;swagger&quot;));\n    myCustomSchema.addProperty(&quot;email&quot;, new Schema&lt;&gt;().type(&quot;string&quot;)._default(&quot;dummy@email&quot;));\n\n    return openApi -&gt; openApi.getPaths().values().stream()\n            .flatMap(pathItem -&gt; pathItem.readOperations().stream())\n            .forEach(operation -&gt; \n                operation.addParametersItem(\n                        new HeaderParameter()\n                                .name(&quot;test-header&quot;)\n                                .required(false)\n                                .schema(myCustomSchema).explode(true)\n                                .style(Parameter.StyleEnum.SIMPLE)\n                )\n            );\n}\n</code></pre>\n<p>This will produce your header's value in the controller as <strong>username=swagger,email=dummy@email</strong>.</p>\n<p>But I'll suggest if you have to pass a JSON as a header then pass it in stringified, and parse it to an object in your controller. For string type header, OpenAPI can be customized as -</p>\n<pre><code> @Bean\npublic OpenApiCustomizer getCustomizer() {\n    return openApi -&gt; openApi.getPaths().values().stream()\n            .flatMap(pathItem -&gt; pathItem.readOperations().stream())\n            .forEach(operation -&gt; operation\n                    .addParametersItem(\n                            new HeaderParameter()\n                                    .name(&quot;test-header&quot;)\n                                    .required(false)\n                                    .schema(new Schema().type(&quot;string&quot;)._default(&quot;{\\&quot;username\\&quot;:\\&quot;swagger\\&quot;, \\&quot;email\\&quot;:\\&quot;dummy@email\\&quot;}&quot;))\n                    ));\n}\n</code></pre>\n<p>Please upvote if it helps.</p>\n"}],"owner":{"account_id":10650147,"reputation":2228,"user_id":7841415,"display_name":"Suule"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1035,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75644293,"answer_count":1,"score":1,"last_activity_date":1678137053,"creation_date":1678027910,"question_id":75643064,"body_markdown":"I have a situation when I would like to hard-code a request header called `test-header` which will store simple JSON data `{&quot;username&quot;:&quot;swagger&quot;, &quot;email&quot;:&quot;dummy@email&quot;}`.\r\nSo the users who will use Swagger UI to make requests won&#39;t need to add this data manually, it will always be automatically added to each request sent from Swagger UI. \r\n\r\nI am using `org.springdoc` with Spring Boot v3. And currently I just have simple OpenAPI bean:\r\n\r\n    @Bean\r\n    public OpenAPI customOpenAPI(@Value(&quot;${springdoc.version}&quot;) String appVersion) {\r\n    \treturn new OpenAPI()\r\n    \t\t\t.info(new Info().title(&quot;Person API&quot;).version(appVersion)\r\n    \t\t\t\t\t.license(new License().name(&quot;Apache 2.0&quot;).url(&quot;http://springdoc.org&quot;)));\r\n    };\r\n\r\nIs there a possibility to add it somehow to it? Or am I fated to use a filter/interceptor?","title":"How to inject a custom header whenever a request is sent from Swagger UI?","body":"<p>I have a situation when I would like to hard-code a request header called <code>test-header</code> which will store simple JSON data <code>{&quot;username&quot;:&quot;swagger&quot;, &quot;email&quot;:&quot;dummy@email&quot;}</code>.\nSo the users who will use Swagger UI to make requests won't need to add this data manually, it will always be automatically added to each request sent from Swagger UI.</p>\n<p>I am using <code>org.springdoc</code> with Spring Boot v3. And currently I just have simple OpenAPI bean:</p>\n<pre><code>@Bean\npublic OpenAPI customOpenAPI(@Value(&quot;${springdoc.version}&quot;) String appVersion) {\n    return new OpenAPI()\n            .info(new Info().title(&quot;Person API&quot;).version(appVersion)\n                    .license(new License().name(&quot;Apache 2.0&quot;).url(&quot;http://springdoc.org&quot;)));\n};\n</code></pre>\n<p>Is there a possibility to add it somehow to it? Or am I fated to use a filter/interceptor?</p>\n"},{"tags":["java","osgi","javadoc","java-12"],"answers":[{"comments":[{"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"score":1,"creation_date":1556597302,"post_id":55912496,"comment_id":98481944,"body_markdown":"Thanks. The workaround (1) works for us and shows that it&#39;s indeed a confusion with Javadoc tags. Filed bug report (9060468).","body":"Thanks. The workaround (1) works for us and shows that it&#39;s indeed a confusion with Javadoc tags. Filed bug report (9060468)."},{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":0,"creation_date":1556689569,"post_id":55912496,"comment_id":98517171,"body_markdown":"Does the maven-javadoc-plugin print anything useful when mvn is run with -X (or --debug)? It would be useful if the command that the plugin is using in case it&#39;s anything obvious.","body":"Does the maven-javadoc-plugin print anything useful when mvn is run with -X (or --debug)? It would be useful if the command that the plugin is using in case it&#39;s anything obvious."},{"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"score":0,"creation_date":1556705831,"post_id":55912496,"comment_id":98522027,"body_markdown":"It *does* print a whole lot of information: https://gist.github.com/reschke/b7eab88822ec63f7d80d46902ff62f09","body":"It <i>does</i> print a whole lot of information: <a href=\"https://gist.github.com/reschke/b7eab88822ec63f7d80d46902ff62f09\" rel=\"nofollow noreferrer\">gist.github.com/reschke/b7eab88822ec63f7d80d46902ff62f09</a>"}],"tags":[],"owner":{"account_id":2230571,"reputation":2771,"user_id":1968258,"display_name":"Marcos Zolnowski"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1556584928,"creation_date":1556584928,"answer_id":55912496,"question_id":55906161,"body_markdown":"Probably a Javadoc bug, because Javadoc considers the Java Annotation as a **Javadoc Tag**.\r\n\r\n**Workaround 1:**\r\ndisable this Javadoc tag\r\n&lt;!-- language: Maven --&gt;\r\n\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.0&lt;/version&gt;\r\n                    &lt;configuration&gt;                        \r\n                        &lt;tags&gt;\r\n                            &lt;tag&gt;\r\n                                &lt;name&gt;Version&lt;/name&gt;                            \r\n                                &lt;placement&gt;X&lt;/placement&gt;                            \r\n                            &lt;/tag&gt;\r\n                        &lt;/tags&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n\r\n**Workaround 2:**\r\nadd an empty Javadoc block in front of every annotation\r\n\r\n    /** */@Version(&quot;1.3.0&quot;)\r\n    package org.apache.jackrabbit.oak.commons;","title":"Weird javadoc error (with jdk12) for OSGi version annotation","body":"<p>Probably a Javadoc bug, because Javadoc considers the Java Annotation as a <strong>Javadoc Tag</strong>.</p>\n\n<p><strong>Workaround 1:</strong>\ndisable this Javadoc tag\n</p>\n\n<pre><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;configuration&gt;                        \n                    &lt;tags&gt;\n                        &lt;tag&gt;\n                            &lt;name&gt;Version&lt;/name&gt;                            \n                            &lt;placement&gt;X&lt;/placement&gt;                            \n                        &lt;/tag&gt;\n                    &lt;/tags&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n\n<p><strong>Workaround 2:</strong>\nadd an empty Javadoc block in front of every annotation</p>\n\n<pre><code>/** */@Version(\"1.3.0\")\npackage org.apache.jackrabbit.oak.commons;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":300049,"reputation":440,"user_id":4297386,"display_name":"Liam Miller-Cushon"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1678136552,"creation_date":1666638099,"answer_id":74185633,"question_id":55906161,"body_markdown":"The fix is to upgrade to a newer JDK version.\r\n\r\nThe issue affects JDK 12, and was fixed in JDK 13 by [JDK-8222091: Javadoc does not handle package annotations correctly on package-info.java](https://bugs.openjdk.org/browse/JDK-8222091).\r\n\r\nThe same issue also affects OpenJDK 11.0.17, because the change that introduced the javadoc regression was backported. It was fixed in JDK 11.0.18. (See https://bugs.openjdk.org/browse/JDK-8295850.) \r\n\r\nSimplified repro:\r\n\r\n```java\r\npackage p;\r\n\r\nimport static java.lang.annotation.ElementType.PACKAGE;\r\n\r\nimport java.lang.annotation.Target;\r\n\r\n@Target(PACKAGE)\r\npublic @interface A {}\r\n```\r\n\r\n```java\r\n@A\r\npackage p;\r\n```\r\n\r\n```\r\n$ javadoc package-info.java A.java\r\n...\r\npackage-info.java:1: error: unknown tag: A\r\n@A\r\n^\r\n```","title":"Weird javadoc error (with jdk12) for OSGi version annotation","body":"<p>The fix is to upgrade to a newer JDK version.</p>\n<p>The issue affects JDK 12, and was fixed in JDK 13 by <a href=\"https://bugs.openjdk.org/browse/JDK-8222091\" rel=\"nofollow noreferrer\">JDK-8222091: Javadoc does not handle package annotations correctly on package-info.java</a>.</p>\n<p>The same issue also affects OpenJDK 11.0.17, because the change that introduced the javadoc regression was backported. It was fixed in JDK 11.0.18. (See <a href=\"https://bugs.openjdk.org/browse/JDK-8295850.\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8295850.</a>)</p>\n<p>Simplified repro:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package p;\n\nimport static java.lang.annotation.ElementType.PACKAGE;\n\nimport java.lang.annotation.Target;\n\n@Target(PACKAGE)\npublic @interface A {}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@A\npackage p;\n</code></pre>\n<pre><code>$ javadoc package-info.java A.java\n...\npackage-info.java:1: error: unknown tag: A\n@A\n^\n</code></pre>\n"}],"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":642,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":55912496,"answer_count":2,"score":4,"last_activity_date":1678136552,"creation_date":1556550533,"question_id":55906161,"body_markdown":"With the change from Java 11 to Java 12, we now see a weird error when generating Javadoc on package-info files containing OSGi version annotations.\r\n\r\nThe source code is:\r\n~~~\r\n@Version(&quot;1.3.0&quot;)\r\npackage org.apache.jackrabbit.oak.commons;\r\n\r\nimport org.osgi.annotation.versioning.Version;\r\n~~~\r\n\r\nThe error is:\r\n~~~\r\n[ERROR] C:\\projects\\apache\\oak\\trunk\\oak-commons\\src\\main\\java\\org\\apache\\jackrabbit\\oak\\commons\\package-info.java:17: error: unknown tag: Version\r\n[ERROR] @Version(&quot;1.3.0&quot;)\r\n[ERROR] ^\r\n~~~\r\n\r\n([See details and context][1])\r\n\r\nIs this a regression in Java 12, or is there something wrong in the way the annotations are used, or how Javadoc is invoked (through maven)?\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/OAK-8149","title":"Weird javadoc error (with jdk12) for OSGi version annotation","body":"<p>With the change from Java 11 to Java 12, we now see a weird error when generating Javadoc on package-info files containing OSGi version annotations.</p>\n\n<p>The source code is:</p>\n\n<pre><code>@Version(\"1.3.0\")\npackage org.apache.jackrabbit.oak.commons;\n\nimport org.osgi.annotation.versioning.Version;\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>[ERROR] C:\\projects\\apache\\oak\\trunk\\oak-commons\\src\\main\\java\\org\\apache\\jackrabbit\\oak\\commons\\package-info.java:17: error: unknown tag: Version\n[ERROR] @Version(\"1.3.0\")\n[ERROR] ^\n</code></pre>\n\n<p>(<a href=\"https://issues.apache.org/jira/browse/OAK-8149\" rel=\"nofollow noreferrer\">See details and context</a>)</p>\n\n<p>Is this a regression in Java 12, or is there something wrong in the way the annotations are used, or how Javadoc is invoked (through maven)?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1678132046,"post_id":75655095,"comment_id":133470802,"body_markdown":"Wouldn&#39;t you just need another `groupingBy` operation? E.g., `groupingBy(Data::getDateOfBirth, groupingBy(Data::getName, mapping(Data::getDateAttended, toList()))`","body":"Wouldn&#39;t you just need another <code>groupingBy</code> operation? E.g., <code>groupingBy(Data::getDateOfBirth, groupingBy(Data::getName, mapping(Data::getDateAttended, toList()))</code>"}],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1678133317,"creation_date":1678133009,"answer_id":75655343,"question_id":75655095,"body_markdown":"You need `Collectors.mapping` like this:\r\n\r\n```java\r\nMap&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; nameAttendedClassMap = data.stream()\r\n        .collect(groupingBy(Data::getDateOfBirth,\r\n                 groupingBy(Data::getName, \r\n                       mapping(Data::getDateAttendedClass, Collectors.toList()))));\r\n```\r\n\r\nYou need to group the Data objects by `dateOfBirth` using `Collectors.groupingBy`, then group the Data objects again by `name` and finally `map` the `dateAttendedClass` field of each `Data` object to a list using `Collectors.mapping`.","title":"How to collect a map of maps from stream","body":"<p>You need <code>Collectors.mapping</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; nameAttendedClassMap = data.stream()\n        .collect(groupingBy(Data::getDateOfBirth,\n                 groupingBy(Data::getName, \n                       mapping(Data::getDateAttendedClass, Collectors.toList()))));\n</code></pre>\n<p>You need to group the Data objects by <code>dateOfBirth</code> using <code>Collectors.groupingBy</code>, then group the Data objects again by <code>name</code> and finally <code>map</code> the <code>dateAttendedClass</code> field of each <code>Data</code> object to a list using <code>Collectors.mapping</code>.</p>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678136072,"creation_date":1678135267,"answer_id":75655623,"question_id":75655095,"body_markdown":"As suggested by others, you should nest your `groupingBy` calls.\r\n\r\nHere is a working example. You should store your dates as epoch values. This is the best way to store the values. They are more transportable and universal this way. If you want to display any information, you can call convenience methods to format. When a date is represented as an integer, you can specify what locale you want to use to format the date. There is also no need to pare the dates when comparing them when sorting; or comparing in general.\r\n\r\nAlso, name your objects appropriately. Changing the name of `Data` to `Student` helps identify what the object represents.\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport java.time.*;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.*;\r\nimport java.util.stream.Collectors;\r\n\r\nimport com.google.gson.GsonBuilder; // Used for printing formatted JSON\r\n\r\npublic class DataMap {\r\n    private static final DateTimeFormatter dateFormatter;\r\n    private static final DateTimeFormatter yearFormatter;\r\n\r\n    static {\r\n        dateFormatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\r\n        yearFormatter = DateTimeFormatter.ofPattern(&quot;yyyy&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Student&gt; data = new ArrayList&lt;Student&gt;();\r\n        data.add(createStudent(&quot;Billy&quot;, &quot;1990-01-30&quot;, &quot;2005-08-28&quot;));\r\n        data.add(createStudent(&quot;Billy&quot;, &quot;1990-01-30&quot;, &quot;2006-08-28&quot;));\r\n        data.add(createStudent(&quot;Billy&quot;, &quot;1990-01-31&quot;, &quot;2007-08-28&quot;));\r\n        data.add(createStudent(&quot;Billy&quot;, &quot;1990-01-31&quot;, &quot;2008-08-28&quot;));\r\n        data.add(createStudent(&quot;Alice&quot;, &quot;1990-01-30&quot;, &quot;2005-08-28&quot;));\r\n        data.add(createStudent(&quot;Alice&quot;, &quot;1990-01-30&quot;, &quot;2006-08-28&quot;));\r\n        data.add(createStudent(&quot;Alice&quot;, &quot;1990-01-31&quot;, &quot;2007-08-28&quot;));\r\n        data.add(createStudent(&quot;Alice&quot;, &quot;1990-01-31&quot;, &quot;2008-08-28&quot;));\r\n\r\n        Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; grouped = groupAttendanceByBirthAndName(data);\r\n        System.out.println(grouped);\r\n\r\n        // For display purposes...\r\n        System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(grouped).toString());\r\n    }\r\n\r\n    private static Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; groupAttendanceByBirthAndName(List&lt;Student&gt; students) {\r\n        return students.stream()\r\n                .collect(Collectors.groupingBy(Student::getDateOfBirthAsString,\r\n                        Collectors.groupingBy(Student::getName,\r\n                                Collectors.mapping(Student::getDateAttendedClassAsString, Collectors.toList()))));\r\n    }\r\n\r\n    private static String formatEpochMilliAsDate(long epochMilli, DateTimeFormatter dateFormatter) {\r\n        return dateFormatter.format(Instant.ofEpochMilli(epochMilli).atZone(ZoneId.systemDefault()).toLocalDate());\r\n    }\r\n\r\n    private static long epochFromDate(String date) {\r\n        return LocalDate.parse(date).atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli();\r\n    }\r\n\r\n    private static Student createStudent(String name, String birthYear, String attendanceYear) {\r\n        return new Student(name, epochFromDate(birthYear), epochFromDate(attendanceYear));\r\n    }\r\n\r\n    private static class Student {\r\n        private String name;\r\n        private long dateOfBirth;\r\n        private long dateAttendedClass;\r\n\r\n        public Student(String name, long dateOfBirth, long dateAttendedClass) {\r\n            this.name = name;\r\n            this.dateOfBirth = dateOfBirth;\r\n            this.dateAttendedClass = dateAttendedClass;\r\n        }\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        public long getDateOfBirth() {\r\n            return dateOfBirth;\r\n        }\r\n\r\n        // Convenience method ~ Used for grouping and display\r\n        public String getDateOfBirthAsString() {\r\n            return formatEpochMilliAsDate(dateOfBirth, dateFormatter);\r\n        }\r\n\r\n        public long getDateAttendedClass() {\r\n            return dateAttendedClass;\r\n        }\r\n\r\n        // Convenience method ~ Used for grouping and display\r\n        public String getDateAttendedClassAsString() {\r\n            return formatEpochMilliAsDate(dateAttendedClass, yearFormatter);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## Output\r\n\r\nRaw `Map` output:\r\n\r\n```\r\n{1990-01-31={Billy=[2007, 2008], Alice=[2007, 2008]}, 1990-01-30={Billy=[2005, 2006], Alice=[2005, 2006]}}\r\n```\r\n\r\nI used Google&#39;s [Gson library](https://github.com/google/gson) to pretty-print the nested map as JSON. You could use Jackson&#39;s [`ObjectMapper`](https://github.com/FasterXML/jackson-databind) as well.\r\n\r\n```json\r\n{\r\n  &quot;1990-01-31&quot;: {\r\n    &quot;Billy&quot;: [\r\n      &quot;2007&quot;,\r\n      &quot;2008&quot;\r\n    ],\r\n    &quot;Alice&quot;: [\r\n      &quot;2007&quot;,\r\n      &quot;2008&quot;\r\n    ]\r\n  },\r\n  &quot;1990-01-30&quot;: {\r\n    &quot;Billy&quot;: [\r\n      &quot;2005&quot;,\r\n      &quot;2006&quot;\r\n    ],\r\n    &quot;Alice&quot;: [\r\n      &quot;2005&quot;,\r\n      &quot;2006&quot;\r\n    ]\r\n  }\r\n}\r\n```","title":"How to collect a map of maps from stream","body":"<p>As suggested by others, you should nest your <code>groupingBy</code> calls.</p>\n<p>Here is a working example. You should store your dates as epoch values. This is the best way to store the values. They are more transportable and universal this way. If you want to display any information, you can call convenience methods to format. When a date is represented as an integer, you can specify what locale you want to use to format the date. There is also no need to pare the dates when comparing them when sorting; or comparing in general.</p>\n<p>Also, name your objects appropriately. Changing the name of <code>Data</code> to <code>Student</code> helps identify what the object represents.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport java.time.*;\nimport java.time.format.DateTimeFormatter;\nimport java.util.*;\nimport java.util.stream.Collectors;\n\nimport com.google.gson.GsonBuilder; // Used for printing formatted JSON\n\npublic class DataMap {\n    private static final DateTimeFormatter dateFormatter;\n    private static final DateTimeFormatter yearFormatter;\n\n    static {\n        dateFormatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\n        yearFormatter = DateTimeFormatter.ofPattern(&quot;yyyy&quot;);\n    }\n\n    public static void main(String[] args) {\n        List&lt;Student&gt; data = new ArrayList&lt;Student&gt;();\n        data.add(createStudent(&quot;Billy&quot;, &quot;1990-01-30&quot;, &quot;2005-08-28&quot;));\n        data.add(createStudent(&quot;Billy&quot;, &quot;1990-01-30&quot;, &quot;2006-08-28&quot;));\n        data.add(createStudent(&quot;Billy&quot;, &quot;1990-01-31&quot;, &quot;2007-08-28&quot;));\n        data.add(createStudent(&quot;Billy&quot;, &quot;1990-01-31&quot;, &quot;2008-08-28&quot;));\n        data.add(createStudent(&quot;Alice&quot;, &quot;1990-01-30&quot;, &quot;2005-08-28&quot;));\n        data.add(createStudent(&quot;Alice&quot;, &quot;1990-01-30&quot;, &quot;2006-08-28&quot;));\n        data.add(createStudent(&quot;Alice&quot;, &quot;1990-01-31&quot;, &quot;2007-08-28&quot;));\n        data.add(createStudent(&quot;Alice&quot;, &quot;1990-01-31&quot;, &quot;2008-08-28&quot;));\n\n        Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; grouped = groupAttendanceByBirthAndName(data);\n        System.out.println(grouped);\n\n        // For display purposes...\n        System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(grouped).toString());\n    }\n\n    private static Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; groupAttendanceByBirthAndName(List&lt;Student&gt; students) {\n        return students.stream()\n                .collect(Collectors.groupingBy(Student::getDateOfBirthAsString,\n                        Collectors.groupingBy(Student::getName,\n                                Collectors.mapping(Student::getDateAttendedClassAsString, Collectors.toList()))));\n    }\n\n    private static String formatEpochMilliAsDate(long epochMilli, DateTimeFormatter dateFormatter) {\n        return dateFormatter.format(Instant.ofEpochMilli(epochMilli).atZone(ZoneId.systemDefault()).toLocalDate());\n    }\n\n    private static long epochFromDate(String date) {\n        return LocalDate.parse(date).atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli();\n    }\n\n    private static Student createStudent(String name, String birthYear, String attendanceYear) {\n        return new Student(name, epochFromDate(birthYear), epochFromDate(attendanceYear));\n    }\n\n    private static class Student {\n        private String name;\n        private long dateOfBirth;\n        private long dateAttendedClass;\n\n        public Student(String name, long dateOfBirth, long dateAttendedClass) {\n            this.name = name;\n            this.dateOfBirth = dateOfBirth;\n            this.dateAttendedClass = dateAttendedClass;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public long getDateOfBirth() {\n            return dateOfBirth;\n        }\n\n        // Convenience method ~ Used for grouping and display\n        public String getDateOfBirthAsString() {\n            return formatEpochMilliAsDate(dateOfBirth, dateFormatter);\n        }\n\n        public long getDateAttendedClass() {\n            return dateAttendedClass;\n        }\n\n        // Convenience method ~ Used for grouping and display\n        public String getDateAttendedClassAsString() {\n            return formatEpochMilliAsDate(dateAttendedClass, yearFormatter);\n        }\n    }\n}\n</code></pre>\n<h2>Output</h2>\n<p>Raw <code>Map</code> output:</p>\n<pre><code>{1990-01-31={Billy=[2007, 2008], Alice=[2007, 2008]}, 1990-01-30={Billy=[2005, 2006], Alice=[2005, 2006]}}\n</code></pre>\n<p>I used Google's <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Gson library</a> to pretty-print the nested map as JSON. You could use Jackson's <a href=\"https://github.com/FasterXML/jackson-databind\" rel=\"nofollow noreferrer\"><code>ObjectMapper</code></a> as well.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;1990-01-31&quot;: {\n    &quot;Billy&quot;: [\n      &quot;2007&quot;,\n      &quot;2008&quot;\n    ],\n    &quot;Alice&quot;: [\n      &quot;2007&quot;,\n      &quot;2008&quot;\n    ]\n  },\n  &quot;1990-01-30&quot;: {\n    &quot;Billy&quot;: [\n      &quot;2005&quot;,\n      &quot;2006&quot;\n    ],\n    &quot;Alice&quot;: [\n      &quot;2005&quot;,\n      &quot;2006&quot;\n    ]\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":4708698,"reputation":1254,"user_id":3809938,"accept_rate":44,"display_name":"user3809938"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75655623,"answer_count":2,"score":0,"last_activity_date":1678136072,"creation_date":1678131310,"question_id":75655095,"body_markdown":"I have below class\r\n\r\n    public class Data {\r\n    \t\r\n    \tString name;\r\n    \tString dateOfBirth;\r\n    \tString dateAttendedClass;\r\n    \r\n    }\r\n\r\nI have a list of Data and wanted to create a map of below:\r\n    \r\n    Map&lt;String Map&lt;String, List&lt;String&gt;&gt;&gt;\r\n\r\n    Map&lt;dateOfBirth Map&lt;name,list(dateAttendedClass)&gt;&gt;\r\n\r\nI managed to create a Map of \r\n    \r\n    Map&lt;name,list(dateAttendedClass)&gt;\r\n\r\nby doing this\r\n\r\n    \tMap&lt;String, List&lt;String&gt;&gt; nameAttendedClassMap = data.stream()\r\n\t\t\t\t.collect(Collectors.groupingBy(Data::getName,\r\n\t\t\t\t\t\tCollectors.mapping(Data::getDateAttended, Collectors.toList())));\r\n\r\nBut I am not sure how to collect this map further and have it in a map with the key being date of birth. \r\n\r\n    Map&lt;String Map&lt;String, List&lt;String&gt;&gt;&gt;\r\n\r\n\r\n","title":"How to collect a map of maps from stream","body":"<p>I have below class</p>\n<pre><code>public class Data {\n    \n    String name;\n    String dateOfBirth;\n    String dateAttendedClass;\n\n}\n</code></pre>\n<p>I have a list of Data and wanted to create a map of below:</p>\n<pre><code>Map&lt;String Map&lt;String, List&lt;String&gt;&gt;&gt;\n\nMap&lt;dateOfBirth Map&lt;name,list(dateAttendedClass)&gt;&gt;\n</code></pre>\n<p>I managed to create a Map of</p>\n<pre><code>Map&lt;name,list(dateAttendedClass)&gt;\n</code></pre>\n<p>by doing this</p>\n<pre><code>    Map&lt;String, List&lt;String&gt;&gt; nameAttendedClassMap = data.stream()\n            .collect(Collectors.groupingBy(Data::getName,\n                    Collectors.mapping(Data::getDateAttended, Collectors.toList())));\n</code></pre>\n<p>But I am not sure how to collect this map further and have it in a map with the key being date of birth.</p>\n<pre><code>Map&lt;String Map&lt;String, List&lt;String&gt;&gt;&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1678135579,"post_id":75655673,"comment_id":133471685,"body_markdown":"What do you mean by _dynamically_?","body":"What do you mean by <i>dynamically</i>?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1678135698,"post_id":75655673,"comment_id":133471713,"body_markdown":"There&#39;s aren&#39;t many &quot;good&quot; ways to do this in Java.  You can create a &quot;copy constructor&quot; that takes an object of `MyClass` and copies all of its fields.  You can use reflection to copy all fields.  You can use `clone()`, but that is deprecated.  You can serialize and deserialize objects, but that exposes a `Serializable` interface.","body":"There&#39;s aren&#39;t many &quot;good&quot; ways to do this in Java.  You can create a &quot;copy constructor&quot; that takes an object of <code>MyClass</code> and copies all of its fields.  You can use reflection to copy all fields.  You can use <code>clone()</code>, but that is deprecated.  You can serialize and deserialize objects, but that exposes a <code>Serializable</code> interface."},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":1,"creation_date":1678139478,"post_id":75655673,"comment_id":133472519,"body_markdown":"I wouldn&#39;t try to create a class dynamically.  Because Java is a statically typed language, you would only be able to access it as an `Object`, and you would need to use reflection to access the values.  Have you considered simply creating a Map?  Since this is just a POJO and there&#39;s no behavior, this is the approach I would take.","body":"I wouldn&#39;t try to create a class dynamically.  Because Java is a statically typed language, you would only be able to access it as an <code>Object</code>, and you would need to use reflection to access the values.  Have you considered simply creating a Map?  Since this is just a POJO and there&#39;s no behavior, this is the approach I would take."},{"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"score":1,"creation_date":1678162653,"post_id":75655673,"comment_id":133475697,"body_markdown":"See if [this](https://stackoverflow.com/questions/12832554/how-to-add-attributes-dynamically-for-java-object) helps?","body":"See if <a href=\"https://stackoverflow.com/questions/12832554/how-to-add-attributes-dynamically-for-java-object\">this</a> helps?"},{"owner":{"account_id":17004455,"reputation":138,"user_id":12300985,"display_name":"Prashant Pandey"},"score":0,"creation_date":1678306356,"post_id":75655673,"comment_id":133509090,"body_markdown":"https://stackoverflow.com/questions/869033/how-do-i-copy-an-object-in-java","body":"<a href=\"https://stackoverflow.com/questions/869033/how-do-i-copy-an-object-in-java\" title=\"how do i copy an object in java\">stackoverflow.com/questions/869033/&hellip;</a>"}],"owner":{"account_id":1127972,"reputation":10009,"user_id":1114773,"accept_rate":46,"display_name":"More Than Five"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678135869,"creation_date":1678135537,"question_id":75655673,"body_markdown":"Suppose, I have a class like this...\r\n\r\n    public class MyClass {\r\n        private String firstName;\r\n        private String lastName;\r\n\r\n        public String getFirstName() // .... \r\n        // ... usual getters \r\n    }\r\n\r\nAnd I want to dynamically make a new object and has the exact same fields and values and add just three more? How do I do that.  One idea convert MyClass to a Map and just add the fields.\r\n\r\nAny better idea?\r\n\r\nThanks","title":"Copy object structure and values","body":"<p>Suppose, I have a class like this...</p>\n<pre><code>public class MyClass {\n    private String firstName;\n    private String lastName;\n\n    public String getFirstName() // .... \n    // ... usual getters \n}\n</code></pre>\n<p>And I want to dynamically make a new object and has the exact same fields and values and add just three more? How do I do that.  One idea convert MyClass to a Map and just add the fields.</p>\n<p>Any better idea?</p>\n<p>Thanks</p>\n"},{"tags":["java","file","bufferedreader"],"comments":[{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1678049247,"post_id":75645091,"comment_id":133453477,"body_markdown":"look at the exit condition for the while loop: \n`while(curr != -1){ System.out.println(position() + currentChar()); }`\nIt looks like the new position and next character are calculated and printed and only then you&#39;re going to actually exit the while loop.","body":"look at the exit condition for the while loop:  <code>while(curr != -1){ System.out.println(position() + currentChar()); }</code> It looks like the new position and next character are calculated and printed and only then you&#39;re going to actually exit the while loop."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1678049416,"post_id":75645091,"comment_id":133453505,"body_markdown":"You&#39;ve got two issues that I can see.  First up, it looks like your lines end with CR + LF (carriage return = 13, then line feed = 10).  You&#39;re only checking for the CR; and you&#39;re treating the LF like any other character, except that it shows up as being the first character on the next line.  Also, the `println` within `nextChar` gets called BEFORE the `println` on the line where you call `nextChar`; and that makes your outputs appear out of order.","body":"You&#39;ve got two issues that I can see.  First up, it looks like your lines end with CR + LF (carriage return = 13, then line feed = 10).  You&#39;re only checking for the CR; and you&#39;re treating the LF like any other character, except that it shows up as being the first character on the next line.  Also, the <code>println</code> within <code>nextChar</code> gets called BEFORE the <code>println</code> on the line where you call <code>nextChar</code>; and that makes your outputs appear out of order."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1678049635,"post_id":75645091,"comment_id":133453540,"body_markdown":"Oh and the third issue - it looks like you&#39;re trying to print the end-of-file marker (the -1) as well, but for some reason, your console shows it as a ? mark.","body":"Oh and the third issue - it looks like you&#39;re trying to print the end-of-file marker (the -1) as well, but for some reason, your console shows it as a ? mark."},{"owner":{"account_id":18465061,"reputation":375,"user_id":13451504,"display_name":"beatmaister"},"score":0,"creation_date":1678051993,"post_id":75645091,"comment_id":133453959,"body_markdown":"@DawoodibnKareem I removed the println and self-call. the output is not in order, but still includes the extra empty characters listed. Also, what exactly are CR and LF?","body":"@DawoodibnKareem I removed the println and self-call. the output is not in order, but still includes the extra empty characters listed. Also, what exactly are CR and LF?"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1678056430,"post_id":75645091,"comment_id":133454554,"body_markdown":"beatmaister: see https://en.wikipedia.org/wiki/Newline . BTW if you want to see _exactly_ what is in a file on Windows, try `format-hex filename` in powershell (or the alias `fhx`).","body":"beatmaister: see <a href=\"https://en.wikipedia.org/wiki/Newline\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Newline</a> . BTW if you want to see <i>exactly</i> what is in a file on Windows, try <code>format-hex filename</code> in powershell (or the alias <code>fhx</code>)."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1678059941,"post_id":75645091,"comment_id":133454995,"body_markdown":"Which println did you remove?  Do you understand WHY it was not in order before?  And did you read the bit in parentheses in my earlier comment about Carriage Return (CR) and Line Feed (LF)?","body":"Which println did you remove?  Do you understand WHY it was not in order before?  And did you read the bit in parentheses in my earlier comment about Carriage Return (CR) and Line Feed (LF)?"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1678135839,"post_id":75645091,"comment_id":133471742,"body_markdown":"If you just use [`readLine()`](https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#readLine--) and then step over the characters in the resulting string (`readLine()` auto removes end of line characters) then you should be fine. Increase the line for each line read, and then use the index in the string for the second column.","body":"If you just use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#readLine--\" rel=\"nofollow noreferrer\"><code>readLine()</code></a> and then step over the characters in the resulting string (<code>readLine()</code> auto removes end of line characters) then you should be fine. Increase the line for each line read, and then use the index in the string for the second column."}],"owner":{"account_id":18465061,"reputation":375,"user_id":13451504,"display_name":"beatmaister"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678135628,"creation_date":1678047571,"question_id":75645091,"body_markdown":"This code reads a text file character by character.\r\nIt prints the line number, character number, and the character using different functions.\r\n\r\nThe `nextChar()` function correctly changes the line and character numbers but still prints the wrong ones before the increment.\r\nFor example, this input text should go from &quot;1 : 5 o&quot; to &quot;2 : 0  &quot; then &quot;2 : 1 C&quot;. But it prints &quot;1 : 6  &quot; before the &quot;2 : 0  &quot; ...\r\nAlso it reads a &quot;?&quot; at the end of the file for some reason.\r\n\r\n    public static void main(String[] args){\r\n            Scanner scanner = new Scanner(System.in);\r\n    \r\n            String fileName = &quot;&quot;;\r\n            System.out.print(&quot;Enter the file name: &quot;);\r\n            fileName = scanner.nextLine();\r\n            if(fileName.equalsIgnoreCase(&quot;quit&quot;) || fileName.equalsIgnoreCase(&quot;exit&quot;)){System.out.println(&quot;Exitting...&quot;); return;}\r\n    \r\n    \r\n            while(!fileName.equalsIgnoreCase(&quot;quit&quot;) || !fileName.equalsIgnoreCase(&quot;exit&quot;)){\r\n                \r\n                try{\r\n                    File file = new File(fileName);\r\n                    FileReader fr = new FileReader(file);\r\n                    br = new BufferedReader(fr);\r\n                    \r\n                    while(curr != -1){\r\n                        System.out.println(position() + currentChar());\r\n                    }\r\n    \r\n                }\r\n                catch(FileNotFoundException e){\r\n                    System.out.println(&quot;file not found, check file name&quot;);\r\n                    break;\r\n                }\r\n                \r\n                System.out.print(&quot;Enter the file name: &quot;);\r\n                fileName = scanner.nextLine();\r\n                if(fileName.equalsIgnoreCase(&quot;quit&quot;) || fileName.equalsIgnoreCase(&quot;exit&quot;)){System.out.println(&quot;Exitting...&quot;); return;}       \r\n            }\r\n            scanner.close();\r\n    \r\n        }\r\n    \r\n        public static String position(){\r\n            String pos = line + &quot; : &quot; + ch + &quot; &quot;;\r\n            return pos;\r\n        }\r\n    \r\n        public static void nextChar(BufferedReader br){\r\n            try{\r\n                curr = br.read();\r\n                if(curr==13){\r\n                    line++; ch=0;\r\n                    System.out.println(line + &quot; : &quot; + ch + &quot;&quot;);\r\n                    nextChar(br);\r\n    \r\n                }else{ ch++; }\r\n            }catch(IOException e){\r\n                System.out.println(&quot;invalid file input&quot;);\r\n            }\r\n        }\r\n    \r\n        public static char currentChar(){\r\n            nextChar(br);\r\n            currChar = (char) curr;\r\n            return currChar;\r\n        }\r\n    }\r\n\r\nInput text:\r\n   \r\n```none\r\nHello\r\nCOSC 455!\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\nEnter the file name: input.txt\r\n1 : 1 H\r\n1 : 2 e\r\n1 : 3 l\r\n1 : 4 l\r\n1 : 5 o\r\n2 : 0\r\n1 : 6\r\n\r\n2 : 1 C\r\n2 : 2 O\r\n2 : 3 S\r\n2 : 4 C\r\n2 : 5\r\n2 : 6 4\r\n2 : 7 5\r\n2 : 8 5\r\n2 : 9 !\r\n3 : 0\r\n2 : 10\r\n\r\n3 : 1 ?\r\n```\r\n","title":"Code to read file prints extra characters","body":"<p>This code reads a text file character by character.\nIt prints the line number, character number, and the character using different functions.</p>\n<p>The <code>nextChar()</code> function correctly changes the line and character numbers but still prints the wrong ones before the increment.\nFor example, this input text should go from &quot;1 : 5 o&quot; to &quot;2 : 0  &quot; then &quot;2 : 1 C&quot;. But it prints &quot;1 : 6  &quot; before the &quot;2 : 0  &quot; ...\nAlso it reads a &quot;?&quot; at the end of the file for some reason.</p>\n<pre><code>public static void main(String[] args){\n        Scanner scanner = new Scanner(System.in);\n\n        String fileName = &quot;&quot;;\n        System.out.print(&quot;Enter the file name: &quot;);\n        fileName = scanner.nextLine();\n        if(fileName.equalsIgnoreCase(&quot;quit&quot;) || fileName.equalsIgnoreCase(&quot;exit&quot;)){System.out.println(&quot;Exitting...&quot;); return;}\n\n\n        while(!fileName.equalsIgnoreCase(&quot;quit&quot;) || !fileName.equalsIgnoreCase(&quot;exit&quot;)){\n            \n            try{\n                File file = new File(fileName);\n                FileReader fr = new FileReader(file);\n                br = new BufferedReader(fr);\n                \n                while(curr != -1){\n                    System.out.println(position() + currentChar());\n                }\n\n            }\n            catch(FileNotFoundException e){\n                System.out.println(&quot;file not found, check file name&quot;);\n                break;\n            }\n            \n            System.out.print(&quot;Enter the file name: &quot;);\n            fileName = scanner.nextLine();\n            if(fileName.equalsIgnoreCase(&quot;quit&quot;) || fileName.equalsIgnoreCase(&quot;exit&quot;)){System.out.println(&quot;Exitting...&quot;); return;}       \n        }\n        scanner.close();\n\n    }\n\n    public static String position(){\n        String pos = line + &quot; : &quot; + ch + &quot; &quot;;\n        return pos;\n    }\n\n    public static void nextChar(BufferedReader br){\n        try{\n            curr = br.read();\n            if(curr==13){\n                line++; ch=0;\n                System.out.println(line + &quot; : &quot; + ch + &quot;&quot;);\n                nextChar(br);\n\n            }else{ ch++; }\n        }catch(IOException e){\n            System.out.println(&quot;invalid file input&quot;);\n        }\n    }\n\n    public static char currentChar(){\n        nextChar(br);\n        currChar = (char) curr;\n        return currChar;\n    }\n}\n</code></pre>\n<p>Input text:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Hello\nCOSC 455!\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the file name: input.txt\n1 : 1 H\n1 : 2 e\n1 : 3 l\n1 : 4 l\n1 : 5 o\n2 : 0\n1 : 6\n\n2 : 1 C\n2 : 2 O\n2 : 3 S\n2 : 4 C\n2 : 5\n2 : 6 4\n2 : 7 5\n2 : 8 5\n2 : 9 !\n3 : 0\n2 : 10\n\n3 : 1 ?\n</code></pre>\n"},{"tags":["java","collections","simulation","anylogic","agent"],"answers":[{"comments":[{"owner":{"account_id":27385707,"reputation":1,"user_id":20889562,"display_name":"mpardi"},"score":0,"creation_date":1678203235,"post_id":75655682,"comment_id":133485523,"body_markdown":"Thans for the answer! now i can undestand how it works and I managed to finish the simulation!","body":"Thans for the answer! now i can undestand how it works and I managed to finish the simulation!"}],"tags":[],"owner":{"account_id":10243439,"reputation":706,"user_id":7560058,"display_name":"Amy Brown Greer"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678135603,"creation_date":1678135603,"answer_id":75655682,"question_id":75655247,"body_markdown":"    route = (ArrayList&lt;Order&gt;)sortAscending( route, o -&gt; o.deliveryOrder );\r\n\r\nA few notes:\r\n\r\n - sortAscending will return a new sorted list, so be sure to say route = sortAscending.  I made the mistake more than once of just saying sortAscending( collection, value ) and being surprised when my list did not sort.\r\n - sortAscending will return a list, and a collection on the AnyLogic canvas will be an ArrayList, LinkedHashMap, or something more specific than just List, so you need to cast.\r\n- your collection of route needs to specify that it is items of type order, or else java doesn&#39;t know that the o in the value express is an order and it cannot see o.deliveryOrder\r\n\r\n","title":"Anylogic: Sort agents in a collection by a parameter of the agents","body":"<pre><code>route = (ArrayList&lt;Order&gt;)sortAscending( route, o -&gt; o.deliveryOrder );\n</code></pre>\n<p>A few notes:</p>\n<ul>\n<li>sortAscending will return a new sorted list, so be sure to say route = sortAscending.  I made the mistake more than once of just saying sortAscending( collection, value ) and being surprised when my list did not sort.</li>\n<li>sortAscending will return a list, and a collection on the AnyLogic canvas will be an ArrayList, LinkedHashMap, or something more specific than just List, so you need to cast.</li>\n<li>your collection of route needs to specify that it is items of type order, or else java doesn't know that the o in the value express is an order and it cannot see o.deliveryOrder</li>\n</ul>\n"}],"owner":{"account_id":27385707,"reputation":1,"user_id":20889562,"display_name":"mpardi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678135603,"creation_date":1678132382,"question_id":75655247,"body_markdown":"I am working on a siumulation of last mile delivery with multiple deliveries by truck. In order to make the shortest routing I&#39;m working with an external program which optimize the order of the deliveries which output of the program sort the delivers by a number. I save this and input it in anylogic by a parameter called deliveryOrder in my Order agent.\r\n\r\nWhen I create the truck agent and pick the orders by a pickup block, I store the orders agents in a collection inside each truck called route for the multiple delivery.\r\n\r\nMy biggest concern is when I want to sort the order agents inside route collection of everytruck by deliveryOrder ascending. I could not understand if i can sort agents in a collection with the parameter deliveryOrder. How can i do this?\r\n\r\n[pickup block where i want to sort](https://i.stack.imgur.com/5PRGv.png)\r\n\r\n[van parameters and collection](https://i.stack.imgur.com/dZEt4.png)\r\n\r\n[order parameters](https://i.stack.imgur.com/Eb8az.png)\r\n\r\nI read the anylogic help but I couldnt figure it out how to do it.","title":"Anylogic: Sort agents in a collection by a parameter of the agents","body":"<p>I am working on a siumulation of last mile delivery with multiple deliveries by truck. In order to make the shortest routing I'm working with an external program which optimize the order of the deliveries which output of the program sort the delivers by a number. I save this and input it in anylogic by a parameter called deliveryOrder in my Order agent.</p>\n<p>When I create the truck agent and pick the orders by a pickup block, I store the orders agents in a collection inside each truck called route for the multiple delivery.</p>\n<p>My biggest concern is when I want to sort the order agents inside route collection of everytruck by deliveryOrder ascending. I could not understand if i can sort agents in a collection with the parameter deliveryOrder. How can i do this?</p>\n<p><a href=\"https://i.stack.imgur.com/5PRGv.png\" rel=\"nofollow noreferrer\">pickup block where i want to sort</a></p>\n<p><a href=\"https://i.stack.imgur.com/dZEt4.png\" rel=\"nofollow noreferrer\">van parameters and collection</a></p>\n<p><a href=\"https://i.stack.imgur.com/Eb8az.png\" rel=\"nofollow noreferrer\">order parameters</a></p>\n<p>I read the anylogic help but I couldnt figure it out how to do it.</p>\n"},{"tags":["java","amqp","activemq-artemis"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1680405263,"post_id":75652974,"comment_id":133892101,"body_markdown":"Any feedback here? Did my answer address your question?","body":"Any feedback here? Did my answer address your question?"}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678134597,"creation_date":1678125042,"answer_id":75654178,"question_id":75652974,"body_markdown":"Both AMQP and core are *messaging* protocols.\r\n\r\nAMQP is an [OASIS standard protocol][1] which is supported by a number of different message brokers and has client implementations in many different languages across many different platforms. AMQP has broad industry support and is great for interoperability. It is 100% independent of ActiveMQ Artemis which is why the ActiveMQ Artemis documentation doesn&#39;t explain how it works. That kind information is available in the AMQP specification itself.\r\n\r\nThe core protocol supported by ActiveMQ Artemis is _only_ supported by ActiveMQ Artemis and no other brokers. There are client implementations for both the JMS API and the core API. Both of these are in written in Java. There are no other client implementations.\r\n\r\nPerformance of both protocol implementations in the broker is roughly equivalent.\r\n\r\nGenerally speaking you&#39;d probably want to use AMQP rather than core for interoperability and portability.\r\n\r\n\r\n  [1]: https://www.amqp.org/resources/download","title":"What is the difference between the AMQP protocol and CORE in ActiveMQ","body":"<p>Both AMQP and core are <em>messaging</em> protocols.</p>\n<p>AMQP is an <a href=\"https://www.amqp.org/resources/download\" rel=\"nofollow noreferrer\">OASIS standard protocol</a> which is supported by a number of different message brokers and has client implementations in many different languages across many different platforms. AMQP has broad industry support and is great for interoperability. It is 100% independent of ActiveMQ Artemis which is why the ActiveMQ Artemis documentation doesn't explain how it works. That kind information is available in the AMQP specification itself.</p>\n<p>The core protocol supported by ActiveMQ Artemis is <em>only</em> supported by ActiveMQ Artemis and no other brokers. There are client implementations for both the JMS API and the core API. Both of these are in written in Java. There are no other client implementations.</p>\n<p>Performance of both protocol implementations in the broker is roughly equivalent.</p>\n<p>Generally speaking you'd probably want to use AMQP rather than core for interoperability and portability.</p>\n"}],"owner":{"account_id":25716131,"reputation":3,"user_id":19473884,"display_name":" "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":236,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678134597,"creation_date":1678117851,"question_id":75652974,"body_markdown":"I want to understand what is the difference between these protocols and where is it better to use which one\r\n\r\nThere is no normal explanation of these protocols in the official documentation","title":"What is the difference between the AMQP protocol and CORE in ActiveMQ","body":"<p>I want to understand what is the difference between these protocols and where is it better to use which one</p>\n<p>There is no normal explanation of these protocols in the official documentation</p>\n"},{"tags":["java","variables","static-methods","program-entry-point","void"],"comments":[{"owner":{"account_id":476735,"reputation":2038,"user_id":887798,"accept_rate":100,"display_name":"Erich Schreiner"},"score":3,"creation_date":1342526536,"post_id":11522026,"comment_id":15228251,"body_markdown":"Static methods can not access non-static fields, but of course you can define local variables in the method itself (and through those access non-static fields). Please give an example to clarify.","body":"Static methods can not access non-static fields, but of course you can define local variables in the method itself (and through those access non-static fields). Please give an example to clarify."}],"answers":[{"comments":[{"owner":{"account_id":1657567,"reputation":817,"user_id":1526671,"accept_rate":8,"display_name":"user1526671"},"score":1,"creation_date":1342526770,"post_id":11522055,"comment_id":15228344,"body_markdown":"public class A {\n  public static void main(String[] args) { int a = 2;\n    System.out.println(a); // this works!\n  }\n} my question is how does tis works","body":"public class A {   public static void main(String[] args) { int a = 2;     System.out.println(a); // this works!   } } my question is how does tis works"}],"tags":[],"owner":{"account_id":1417953,"reputation":45793,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"comment_count":1,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1342527202,"creation_date":1342526514,"answer_id":11522055,"question_id":11522026,"body_markdown":"No, it doesn&#39;t.\r\n\r\n    public class A {\r\n      int a = 2;\r\n      public static void main(String[] args) {\r\n        System.out.println(a); // won&#39;t compile!!\r\n      }\r\n    }\r\nbut\r\n\r\n    public class A {\r\n      static int a = 2;\r\n      public static void main(String[] args) {\r\n        System.out.println(a); // this works!\r\n      }\r\n    }\r\nor if you instantiate `A`\r\n\r\n    public class A {\r\n      int a = 2;\r\n      public static void main(String[] args) {\r\n        A myA = new A();\r\n        System.out.println(myA.a); // this works too!\r\n      }\r\n    }\r\n\r\nAlso \r\n\r\n    public class A {\r\n      public static void main(String[] args) {\r\n        int a = 2;\r\n        System.out.println(a); // this works too!\r\n      }\r\n    }\r\nwill work, since `a` is a local variable here, and not an instance variable. A method local variable is always reachable during the execution of the method, regardless of if the method is `static` or not.","title":"public static void main () access non static variable","body":"<p>No, it doesn't.</p>\n\n<pre><code>public class A {\n  int a = 2;\n  public static void main(String[] args) {\n    System.out.println(a); // won't compile!!\n  }\n}\n</code></pre>\n\n<p>but</p>\n\n<pre><code>public class A {\n  static int a = 2;\n  public static void main(String[] args) {\n    System.out.println(a); // this works!\n  }\n}\n</code></pre>\n\n<p>or if you instantiate <code>A</code></p>\n\n<pre><code>public class A {\n  int a = 2;\n  public static void main(String[] args) {\n    A myA = new A();\n    System.out.println(myA.a); // this works too!\n  }\n}\n</code></pre>\n\n<p>Also </p>\n\n<pre><code>public class A {\n  public static void main(String[] args) {\n    int a = 2;\n    System.out.println(a); // this works too!\n  }\n}\n</code></pre>\n\n<p>will work, since <code>a</code> is a local variable here, and not an instance variable. A method local variable is always reachable during the execution of the method, regardless of if the method is <code>static</code> or not.</p>\n"},{"comments":[{"owner":{"account_id":2164476,"reputation":267,"user_id":1917863,"accept_rate":40,"display_name":"Bbvarghe"},"score":0,"creation_date":1374711143,"post_id":11522063,"comment_id":26053195,"body_markdown":"so where are static methods and variable contained if not in the class they are defined in?","body":"so where are static methods and variable contained if not in the class they are defined in?"},{"owner":{"account_id":1028420,"reputation":18799,"user_id":1037210,"accept_rate":100,"display_name":"Lion"},"score":0,"creation_date":1374717099,"post_id":11522063,"comment_id":26054419,"body_markdown":"[when static variables are initialized in Java.](http://stackoverflow.com/a/8704858/1037210)","body":"<a href=\"http://stackoverflow.com/a/8704858/1037210\">when static variables are initialized in Java.</a>"},{"owner":{"account_id":2164476,"reputation":267,"user_id":1917863,"accept_rate":40,"display_name":"Bbvarghe"},"score":0,"creation_date":1374724228,"post_id":11522063,"comment_id":26055970,"body_markdown":"so the only way main could access the instanceMethod and instanceVariable is if it made an object of the Demo class?","body":"so the only way main could access the instanceMethod and instanceVariable is if it made an object of the Demo class?"},{"owner":{"account_id":1028420,"reputation":18799,"user_id":1037210,"accept_rate":100,"display_name":"Lion"},"score":0,"creation_date":1374766103,"post_id":11522063,"comment_id":26079038,"body_markdown":"if `instanceMethod` and `instanceVariable` were instance method and instance variable respectively, then they could only be accessed from a **static method** by dereferencing them by the object of their respective class.","body":"if <code>instanceMethod</code> and <code>instanceVariable</code> were instance method and instance variable respectively, then they could only be accessed from a <b>static method</b> by dereferencing them by the object of their respective class."}],"tags":[],"owner":{"account_id":1028420,"reputation":18799,"user_id":1037210,"accept_rate":100,"display_name":"Lion"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1342527985,"creation_date":1342526545,"answer_id":11522063,"question_id":11522026,"body_markdown":"The main method does not have access to non-static members either.  \r\n\r\n    final public class Demo\r\n    {\r\n       private String instanceVariable;\r\n       private static String staticVariable;\r\n       \r\n       public String instanceMethod()\r\n       {\r\n          return &quot;instance&quot;;\r\n       }\r\n       \r\n       public static String staticMethod()\r\n       {\r\n          return &quot;static&quot;;\r\n       }\r\n       \r\n       public static void main(String[] args)\r\n       {\r\n          System.out.println(staticVariable); // ok\r\n          System.out.println(Demo.staticMethod()); // ok\r\n          \r\n          System.out.println(new Demo().instanceMethod()); // ok\r\n          System.out.println(new Demo().instanceVariable); // ok\r\n          \r\n          System.out.println(Demo.instanceMethod()); // wrong\r\n          System.out.println(instanceVariable);         // wrong \r\n       }\r\n    }\r\n\r\nThis is because by default when you call a method or variable it is really accessing the `this.method()` or this.variable. But in the main() method or any other static method(), no &quot;this&quot; objects has yet been created.\r\n\r\nIn this sense, the static method is not a part of the object instance of the class that contains it. This is the idea behind utility classes.\r\n\r\nTo call any non-static method or variable in a static context, you need to first construct the object with a constructor or a factory like your would anywhere outside of the class.\r\n\r\n\r\n----------\r\n\r\n\r\nMore depth:\r\n\r\nBasically it&#39;s a flaw in the design of Java IMO which allows static members (methods and fields) to be referenced *as if* they were instance members. This can be very confusing in code like this:\r\n\r\n    Thread newThread = new Thread(runnable);\r\n    newThread.start();\r\n    newThread.sleep(1000);\r\n\r\nThat *looks* like it&#39;s sending the new thread to sleep, but it *actually* compiles down into code like this:\r\n\r\n    Thread newThread = new Thread(runnable);\r\n    newThread.start();\r\n    Thread.sleep(1000);\r\n\r\nbecause `sleep` is a static method which only ever makes the *current* thread sleep.\r\n\r\nIndeed, the variable isn&#39;t even checked for non-nullity (any more; it used to be, I believe):\r\n\r\n    Thread t = null;\r\n    t.sleep(1000);\r\n\r\nSome IDEs can be configured to issue a warning or error for code like this - you shouldn&#39;t do it, as it hurts readability. (This is one of the flaws which was corrected by C#...)","title":"public static void main () access non static variable","body":"<p>The main method does not have access to non-static members either.  </p>\n\n<pre><code>final public class Demo\n{\n   private String instanceVariable;\n   private static String staticVariable;\n\n   public String instanceMethod()\n   {\n      return \"instance\";\n   }\n\n   public static String staticMethod()\n   {\n      return \"static\";\n   }\n\n   public static void main(String[] args)\n   {\n      System.out.println(staticVariable); // ok\n      System.out.println(Demo.staticMethod()); // ok\n\n      System.out.println(new Demo().instanceMethod()); // ok\n      System.out.println(new Demo().instanceVariable); // ok\n\n      System.out.println(Demo.instanceMethod()); // wrong\n      System.out.println(instanceVariable);         // wrong \n   }\n}\n</code></pre>\n\n<p>This is because by default when you call a method or variable it is really accessing the <code>this.method()</code> or this.variable. But in the main() method or any other static method(), no \"this\" objects has yet been created.</p>\n\n<p>In this sense, the static method is not a part of the object instance of the class that contains it. This is the idea behind utility classes.</p>\n\n<p>To call any non-static method or variable in a static context, you need to first construct the object with a constructor or a factory like your would anywhere outside of the class.</p>\n\n<hr>\n\n<p>More depth:</p>\n\n<p>Basically it's a flaw in the design of Java IMO which allows static members (methods and fields) to be referenced <em>as if</em> they were instance members. This can be very confusing in code like this:</p>\n\n<pre><code>Thread newThread = new Thread(runnable);\nnewThread.start();\nnewThread.sleep(1000);\n</code></pre>\n\n<p>That <em>looks</em> like it's sending the new thread to sleep, but it <em>actually</em> compiles down into code like this:</p>\n\n<pre><code>Thread newThread = new Thread(runnable);\nnewThread.start();\nThread.sleep(1000);\n</code></pre>\n\n<p>because <code>sleep</code> is a static method which only ever makes the <em>current</em> thread sleep.</p>\n\n<p>Indeed, the variable isn't even checked for non-nullity (any more; it used to be, I believe):</p>\n\n<pre><code>Thread t = null;\nt.sleep(1000);\n</code></pre>\n\n<p>Some IDEs can be configured to issue a warning or error for code like this - you shouldn't do it, as it hurts readability. (This is one of the flaws which was corrected by C#...)</p>\n"},{"comments":[{"owner":{"account_id":1657567,"reputation":817,"user_id":1526671,"accept_rate":8,"display_name":"user1526671"},"score":0,"creation_date":1342526928,"post_id":11522072,"comment_id":15228418,"body_markdown":"&#39;public class A { public static void main(String[] args) { int a = 2; System.out.println(a); // this works! } }&#39; this doesn&#39;t use any instances","body":"&#39;public class A { public static void main(String[] args) { int a = 2; System.out.println(a); // this works! } }&#39; this doesn&#39;t use any instances"}],"tags":[],"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1342527075,"creation_date":1342526597,"answer_id":11522072,"question_id":11522026,"body_markdown":"Yes, the main method may access non-static variables, but only indirectly **through actual instances**.\r\n\r\nExample:\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Example ex = new Example();\r\n            ex.variable = 5;\r\n        }\r\n    }\r\n\r\n    class Example {\r\n        public int variable;\r\n    }\r\n\r\nWhat people mean when they say *&quot;non-static variables cannot be used in a static method&quot;* is that **non-static members of the same class** can&#39;t be directly accessed (as shown in [Keppils answer](https://stackoverflow.com/a/11522055/276052) for instance).\r\n\r\n**Related question:**\r\n\r\n- https://stackoverflow.com/questions/7893755/accessing-non-static-members-through-the-main-method-in-java\r\n\r\n\r\n----------\r\n\r\n\r\n**Update:**\r\n\r\nWhen talking about non-static variables one implicitly means *member variables*. (Since local variables can&#39;t possible have a static modifier anyway.)\r\n\r\nIn the code\r\n\r\n    public class A {\r\n        public static void main(String[] args) {\r\n            int a = 2;\r\n            System.out.println(a); // this works!\r\n        }\r\n    }\r\n\r\nyou&#39;re declaring a *local* variable (which typically is not referred to as non-static even though it doesn&#39;t have a static modifier).","title":"public static void main () access non static variable","body":"<p>Yes, the main method may access non-static variables, but only indirectly <strong>through actual instances</strong>.</p>\n\n<p>Example:</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Example ex = new Example();\n        ex.variable = 5;\n    }\n}\n\nclass Example {\n    public int variable;\n}\n</code></pre>\n\n<p>What people mean when they say <em>\"non-static variables cannot be used in a static method\"</em> is that <strong>non-static members of the same class</strong> can't be directly accessed (as shown in <a href=\"https://stackoverflow.com/a/11522055/276052\">Keppils answer</a> for instance).</p>\n\n<p><strong>Related question:</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/7893755/accessing-non-static-members-through-the-main-method-in-java\">Accessing non-static members through the main method in Java</a></li>\n</ul>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>When talking about non-static variables one implicitly means <em>member variables</em>. (Since local variables can't possible have a static modifier anyway.)</p>\n\n<p>In the code</p>\n\n<pre><code>public class A {\n    public static void main(String[] args) {\n        int a = 2;\n        System.out.println(a); // this works!\n    }\n}\n</code></pre>\n\n<p>you're declaring a <em>local</em> variable (which typically is not referred to as non-static even though it doesn't have a static modifier).</p>\n"},{"tags":[],"owner":{"account_id":1064228,"reputation":16042,"user_id":1065180,"accept_rate":92,"display_name":"Nandkumar Tekale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342526680,"creation_date":1342526680,"answer_id":11522089,"question_id":11522026,"body_markdown":"You can create non-static references in static methods like :\r\n\r\n    static void method() {\r\n       A a = new A();\r\n    }\r\n\r\nSame thing we do in case of `public static void main(String[] args)` method","title":"public static void main () access non static variable","body":"<p>You can create non-static references in static methods like :</p>\n\n<pre><code>static void method() {\n   A a = new A();\n}\n</code></pre>\n\n<p>Same thing we do in case of <code>public static void main(String[] args)</code> method</p>\n"},{"tags":[],"owner":{"account_id":5317889,"reputation":838,"user_id":4242131,"accept_rate":0,"display_name":"Sufyan Ahmad"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1491084299,"creation_date":1491084299,"answer_id":43162495,"question_id":11522026,"body_markdown":"**Here you can see table that clear the access of static and non-static data members in static and non-static methods. **[![static non-static table][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/I069d.png\r\n","title":"public static void main () access non static variable","body":"<p>**Here you can see table that clear the access of static and non-static data members in static and non-static methods. **<a href=\"https://i.stack.imgur.com/I069d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I069d.png\" alt=\"static non-static table\"></a></p>\n"},{"tags":[],"owner":{"account_id":11115749,"reputation":1,"user_id":8381890,"display_name":"Abhishek Paithane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678134045,"creation_date":1533090430,"answer_id":51624576,"question_id":11522026,"body_markdown":"    public class XYZ\r\n    {\r\n       int i=0;\r\n\r\n       public static void increment()\r\n       {\r\n           i++;   \r\n       }\r\n    }\r\n\r\n    public class M\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            XYZ o1 = new XYZ();\r\n            XYZ o2 = new XYZ();\r\n            o1.increment(); \r\n            XYZ.increment(); // system wont be able to know i belongs to which object \r\n                      // as it increment method (static method) can be called using class name system \r\n                      // will be confused changes belongs to which object.\r\n        }\r\n    }\r\n\r\n","title":"public static void main () access non static variable","body":"<pre><code>public class XYZ\n{\n   int i=0;\n\n   public static void increment()\n   {\n       i++;   \n   }\n}\n\npublic class M\n{\n    public static void main(String[] args)\n    {\n        XYZ o1 = new XYZ();\n        XYZ o2 = new XYZ();\n        o1.increment(); \n        XYZ.increment(); // system wont be able to know i belongs to which object \n                  // as it increment method (static method) can be called using class name system \n                  // will be confused changes belongs to which object.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1657567,"reputation":817,"user_id":1526671,"accept_rate":8,"display_name":"user1526671"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50257,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"answer_count":6,"score":14,"last_activity_date":1678134045,"creation_date":1342526411,"question_id":11522026,"body_markdown":"It is said that **non-static variables** cannot be used in a static method.  But `public static void main` does.  How is that?","title":"public static void main () access non static variable","body":"<p>It is said that <strong>non-static variables</strong> cannot be used in a static method.  But <code>public static void main</code> does.  How is that?</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":25679730,"reputation":15,"user_id":19442685,"display_name":"Erhan"},"score":0,"creation_date":1678129647,"post_id":75654739,"comment_id":133470215,"body_markdown":"Thank you so much. I will further study this Random seed. Thank you, the program is now running as I would like it to be.","body":"Thank you so much. I will further study this Random seed. Thank you, the program is now running as I would like it to be."}],"tags":[],"owner":{"account_id":10242,"reputation":12230,"user_id":19246,"accept_rate":82,"display_name":"Martin C."},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678128843,"creation_date":1678128843,"answer_id":75654739,"question_id":75654700,"body_markdown":"You don&#39;t need a second loop, since they are not doing the same:\r\n\r\n```java\r\n    public static void main(String[] args) {\r\n        int[][] nums = new int[10][2];\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            nums[i][0] = (int) (Math.random() * 5 + 1);\r\n            nums[i][1] = (int) (Math.random() * 10 + 1);\r\n        }\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            System.out.println(nums[i][0] + &quot; x &quot; + nums[i][1] + &quot; = &quot;);\r\n        }\r\n    }\r\n```\r\n\r\nAlso it&#39;s better to create an explicit `Random` object, because in that case you get access to a more readable API, that does not require casting to `int`, and you can also create identical sequences by playing around with the seed when creating the random generator:\r\n\r\n```java\r\nimport java.util.Random;\r\n\r\npublic class TimeTable {\r\n    public static void main(String[] args) {\r\n        int[][] nums = new int[10][2];\r\n        Random random = new Random(/* you can put a seed here to get identical sequences*/);\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            nums[i][0] = random.nextInt(5) + 1;\r\n            nums[i][1] = random.nextInt(10) + 1;\r\n        }\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            System.out.println(nums[i][0] + &quot; x &quot; + nums[i][1] + &quot; = &quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"Multi-Dimensional Arrays in Java Math.Random - Limiting numbers seperately for each column","body":"<p>You don't need a second loop, since they are not doing the same:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) {\n        int[][] nums = new int[10][2];\n\n        for (int i = 0; i &lt; 10; i++) {\n            nums[i][0] = (int) (Math.random() * 5 + 1);\n            nums[i][1] = (int) (Math.random() * 10 + 1);\n        }\n\n        for (int i = 0; i &lt; 10; i++) {\n            System.out.println(nums[i][0] + &quot; x &quot; + nums[i][1] + &quot; = &quot;);\n        }\n    }\n</code></pre>\n<p>Also it's better to create an explicit <code>Random</code> object, because in that case you get access to a more readable API, that does not require casting to <code>int</code>, and you can also create identical sequences by playing around with the seed when creating the random generator:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Random;\n\npublic class TimeTable {\n    public static void main(String[] args) {\n        int[][] nums = new int[10][2];\n        Random random = new Random(/* you can put a seed here to get identical sequences*/);\n\n        for (int i = 0; i &lt; 10; i++) {\n            nums[i][0] = random.nextInt(5) + 1;\n            nums[i][1] = random.nextInt(10) + 1;\n        }\n\n        for (int i = 0; i &lt; 10; i++) {\n            System.out.println(nums[i][0] + &quot; x &quot; + nums[i][1] + &quot; = &quot;);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":25679730,"reputation":15,"user_id":19442685,"display_name":"Erhan"},"score":1,"creation_date":1678198537,"post_id":75654975,"comment_id":133483892,"body_markdown":"&quot;%d x %-2d = %n&quot;\n\nNever seen this before. I thought placeholders belonged to the C language. Thank you. I can also confirm that I tried it and it is working. I am surprised every day by programming.","body":"&quot;%d x %-2d = %n&quot;  Never seen this before. I thought placeholders belonged to the C language. Thank you. I can also confirm that I tried it and it is working. I am surprised every day by programming."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1678200469,"post_id":75654975,"comment_id":133484588,"body_markdown":"Check out [format](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Formatter.html#syntax).  It offers a lot of features similar to C and it&#39;s variants.   For example,  `System.out.printf(&quot;%,d&quot;,12345);` will print `12,345` where `,` is a grouping indicator and uses the `Locale` to properly format the number.","body":"Check out <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Formatter.html#syntax\" rel=\"nofollow noreferrer\">format</a>.  It offers a lot of features similar to C and it&#39;s variants.   For example,  <code>System.out.printf(&quot;%,d&quot;,12345);</code> will print <code>12,345</code> where <code>,</code> is a grouping indicator and uses the <code>Locale</code> to properly format the number."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678130825,"creation_date":1678130478,"answer_id":75654975,"question_id":75654700,"body_markdown":"Here is an easy way to do it.  Change your array to index columns first, then rows.  You don&#39;t need a loop to fill the arrays.  The formatted print statement helps keep the &#39;=&#39; aligned.\r\n\r\n- Random.ints arguments are `count, minValue, maxValue (exclusive)`\r\n```\r\npublic class TimeTable {\r\n    public static void main(String[] args) {\r\n        int[][] nums = new int[2][]; // length determined by Random\r\n        Random r = new Random();\r\n        nums[0] = r.ints(10, 1, 6).toArray(); // 1 thru 5 inclusive\r\n        nums[1] = r.ints(10, 1, 11).toArray();// 1 thru 10 inclusive\r\n        for (int i = 0; i &lt; nums[0].length; i++) {\r\n            System.out.printf(&quot;%d x %-2d = %n&quot;, nums[0][i], nums[1][i]);\r\n        }\r\n    }\r\n}\r\n```\r\nprints\r\n```\r\n3 x 2  = \r\n1 x 3  = \r\n4 x 10 = \r\n1 x 9  = \r\n3 x 5  = \r\n5 x 4  = \r\n1 x 1  = \r\n2 x 4  = \r\n2 x 10 = \r\n1 x 1  = ","title":"Multi-Dimensional Arrays in Java Math.Random - Limiting numbers seperately for each column","body":"<p>Here is an easy way to do it.  Change your array to index columns first, then rows.  You don't need a loop to fill the arrays.  The formatted print statement helps keep the '=' aligned.</p>\n<ul>\n<li>Random.ints arguments are <code>count, minValue, maxValue (exclusive)</code></li>\n</ul>\n<pre><code>public class TimeTable {\n    public static void main(String[] args) {\n        int[][] nums = new int[2][]; // length determined by Random\n        Random r = new Random();\n        nums[0] = r.ints(10, 1, 6).toArray(); // 1 thru 5 inclusive\n        nums[1] = r.ints(10, 1, 11).toArray();// 1 thru 10 inclusive\n        for (int i = 0; i &lt; nums[0].length; i++) {\n            System.out.printf(&quot;%d x %-2d = %n&quot;, nums[0][i], nums[1][i]);\n        }\n    }\n}\n</code></pre>\n<p>prints</p>\n<pre><code>3 x 2  = \n1 x 3  = \n4 x 10 = \n1 x 9  = \n3 x 5  = \n5 x 4  = \n1 x 1  = \n2 x 4  = \n2 x 10 = \n1 x 1  = \n</code></pre>\n"}],"owner":{"account_id":25679730,"reputation":15,"user_id":19442685,"display_name":"Erhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75654739,"answer_count":2,"score":1,"last_activity_date":1678133755,"creation_date":1678128576,"question_id":75654700,"body_markdown":"Currently, I am in the process of learning how to code. My goal is to develop a software application that generates multiplication questions randomly. In order to achieve this, I would like to restrict the random numbers generated in the first column of the multi-dimensional array to a maximum of 5, and to a maximum of 10 in the second column. I have made some progress in limiting the range of Math.random to 5 or any specified number, but unfortunately, this limitation applies to every column in the array.\r\n\r\nHere is my code:\r\n\r\n```\r\npackage exercises;\r\n\r\npublic class TimeTable {\r\n    public static void main(String[] args) {\r\n        int[][] nums = new int[10][2];\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            for (int j = 0; j &lt; 2; j++) {\r\n                nums[i][j] = (int) (Math.random() * 5 + 1);\r\n            }\r\n        }\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n\r\n            System.out.println(nums[i][0] + &quot; x &quot; + nums[i][1] + &quot; = &quot;);\r\n\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand the output is : \r\n\r\n```\r\n3 x 2 = \r\n1 x 1 = \r\n5 x 4 = \r\n2 x 4 = \r\n5 x 3 = \r\n1 x 4 = \r\n5 x 1 = \r\n2 x 5 = \r\n3 x 3 = \r\n5 x 1 = \r\n```\r\nFrom the previous example, it can be observed that the numbers on both sides of the multiplication questions are restricted to a maximum of 5. However, my objective is to limit the first column to a maximum of 5 while allowing the second column to reach a maximum of 10. This will enable children to focus on specific numbers while practicing multiplication.\r\n\r\nI have attempted to find solutions by reviewing documentation and searching for previously asked questions on StackOverflow, but I have yet to find a viable solution. Thank you for your assistance.","title":"Multi-Dimensional Arrays in Java Math.Random - Limiting numbers seperately for each column","body":"<p>Currently, I am in the process of learning how to code. My goal is to develop a software application that generates multiplication questions randomly. In order to achieve this, I would like to restrict the random numbers generated in the first column of the multi-dimensional array to a maximum of 5, and to a maximum of 10 in the second column. I have made some progress in limiting the range of Math.random to 5 or any specified number, but unfortunately, this limitation applies to every column in the array.</p>\n<p>Here is my code:</p>\n<pre><code>package exercises;\n\npublic class TimeTable {\n    public static void main(String[] args) {\n        int[][] nums = new int[10][2];\n\n        for (int i = 0; i &lt; 10; i++) {\n            for (int j = 0; j &lt; 2; j++) {\n                nums[i][j] = (int) (Math.random() * 5 + 1);\n            }\n        }\n\n        for (int i = 0; i &lt; 10; i++) {\n\n            System.out.println(nums[i][0] + &quot; x &quot; + nums[i][1] + &quot; = &quot;);\n\n        }\n    }\n}\n</code></pre>\n<p>and the output is :</p>\n<pre><code>3 x 2 = \n1 x 1 = \n5 x 4 = \n2 x 4 = \n5 x 3 = \n1 x 4 = \n5 x 1 = \n2 x 5 = \n3 x 3 = \n5 x 1 = \n</code></pre>\n<p>From the previous example, it can be observed that the numbers on both sides of the multiplication questions are restricted to a maximum of 5. However, my objective is to limit the first column to a maximum of 5 while allowing the second column to reach a maximum of 10. This will enable children to focus on specific numbers while practicing multiplication.</p>\n<p>I have attempted to find solutions by reviewing documentation and searching for previously asked questions on StackOverflow, but I have yet to find a viable solution. Thank you for your assistance.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","transactions"],"owner":{"account_id":27950937,"reputation":1,"user_id":21344813,"display_name":"jakub99"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678133521,"creation_date":1678133521,"question_id":75655418,"body_markdown":"I have a problem with my Transaction Management class in my project. After I add TransactionManagerConfig class to my project, entities are not creating in my database anymore.\r\n\r\nHere&#39;s my TransactionManagerConfig class:\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\npublic class TransactionManagerConfig {\r\n\r\n    @Autowired\r\n    private HibernateProperties hibernateProperties;\r\n\r\n    @Autowired\r\n    private DataSourceProperties dataSourceProperties;\r\n\r\n    @Bean\r\n    @Primary\r\n    public LocalSessionFactoryBean sessionFactory() {\r\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\r\n        sessionFactory.setDataSource(dataSource());\r\n        sessionFactory.setPackagesToScan(&quot;com.spotify.game.model.entity&quot;);\r\n        sessionFactory.setHibernateProperties(getHibernateProperties());\r\n\r\n        return sessionFactory;\r\n    }\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setUrl(dataSourceProperties.getUrl());\r\n        dataSource.setUsername(dataSourceProperties.getUsername());\r\n        dataSource.setPassword(dataSourceProperties.getPassword());\r\n        dataSource.setDriverClassName(dataSourceProperties.getDriverClassName());\r\n\r\n        return dataSource;\r\n    }\r\n\r\n    @Bean(name = &quot;entityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n        LocalContainerEntityManagerFactoryBean emf = new LocalContainerEntityManagerFactoryBean();\r\n        emf.setDataSource(dataSource());\r\n        emf.setPackagesToScan(&quot;com.spotify.game.model.entity&quot;);\r\n        emf.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n        emf.setJpaProperties(getHibernateProperties());\r\n\r\n        return emf;\r\n    }\r\n\r\n    @Bean(name = &quot;transactionManager&quot;)\r\n    public PlatformTransactionManager hibernateTransactionManager(SessionFactory sessionFactory) {\r\n        HibernateTransactionManager transactionManager = new HibernateTransactionManager();\r\n        transactionManager.setSessionFactory(sessionFactory);\r\n        return transactionManager;\r\n    }\r\n\r\n    private Properties getHibernateProperties() {\r\n        Properties properties = new Properties();\r\n        properties.setProperty(&quot;hibernate.dialect&quot;, hibernateProperties.getDialect());\r\n        properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, hibernateProperties.getHbm2ddlAuto());\r\n        properties.setProperty(&quot;hibernate.show_sql&quot;, String.valueOf(hibernateProperties.isShowSql()));\r\n        properties.setProperty(&quot;hibernate.format_sql&quot;, String.valueOf(hibernateProperties.isFormatSql()));\r\n        properties.setProperty(&quot;hibernate.jdbc.batch_size&quot;, String.valueOf(hibernateProperties.getBatchSize()));\r\n        properties.setProperty(&quot;hibernate.order_inserts&quot;, String.valueOf(hibernateProperties.isOrderInserts()));\r\n        properties.setProperty(&quot;hibernate.order_updates&quot;, String.valueOf(hibernateProperties.isOrderInserts()));\r\n\r\n        return properties;\r\n    }\r\n}\r\n```\r\n\r\n\r\nHere&#39;s my method in my UserService class:\r\n\r\n\r\n```\r\n@Override\r\n    public User createUser(String username, String password, String email) {\r\n        User user = new User();\r\n        user.setUsername(username);\r\n        user.setEmail(email);\r\n        user.setVerified(false);\r\n\r\n        String encryptedPassword = passwordEncoder.encode(password);\r\n        user.setPasswordHash(encryptedPassword);\r\n\r\n        try {\r\n            userRepository.save(user);\r\n        } catch (DataIntegrityViolationException e) {\r\n            throw new DuplicateKeyException(&quot;User with username &#39;&quot; + username + &quot;&#39; or email &#39;&quot; + email + &quot;&#39; already exists&quot;);\r\n        }\r\n\r\n        return user;\r\n    }\r\n```\r\n\r\nAnd here&#39;s a test:\r\n\r\n\r\n```\r\n@Test\r\n    public void createUserTest() {\r\n        User user = userService.createUser(&quot;test_username&quot;, &quot;test_password&quot;, &quot;test@example.com&quot;);\r\n\r\n        assertNotNull(user.getId());\r\n        assertEquals(&quot;test_username&quot;, user.getUsername());\r\n        assertEquals(&quot;test@example.com&quot;, user.getEmail());\r\n        assertFalse(user.isVerified());\r\n    }\r\n```\r\n\r\nAnd my user entity:\r\n\r\n\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;username&quot;, unique = true)\r\n    private String username;\r\n\r\n    @Column(name = &quot;password&quot;)\r\n    private String passwordHash;\r\n\r\n    @Column(name = &quot;email&quot;, unique = true)\r\n    private String email;\r\n\r\n    @Column(name = &quot;verified&quot;)\r\n    private boolean verified;\r\n```\r\n\r\n\r\n\r\nHow can I fix this problem?","title":"I have a problem with my Transaction Management class","body":"<p>I have a problem with my Transaction Management class in my project. After I add TransactionManagerConfig class to my project, entities are not creating in my database anymore.</p>\n<p>Here's my TransactionManagerConfig class:</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\npublic class TransactionManagerConfig {\n\n    @Autowired\n    private HibernateProperties hibernateProperties;\n\n    @Autowired\n    private DataSourceProperties dataSourceProperties;\n\n    @Bean\n    @Primary\n    public LocalSessionFactoryBean sessionFactory() {\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\n        sessionFactory.setDataSource(dataSource());\n        sessionFactory.setPackagesToScan(&quot;com.spotify.game.model.entity&quot;);\n        sessionFactory.setHibernateProperties(getHibernateProperties());\n\n        return sessionFactory;\n    }\n\n    @Bean\n    public DataSource dataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setUrl(dataSourceProperties.getUrl());\n        dataSource.setUsername(dataSourceProperties.getUsername());\n        dataSource.setPassword(dataSourceProperties.getPassword());\n        dataSource.setDriverClassName(dataSourceProperties.getDriverClassName());\n\n        return dataSource;\n    }\n\n    @Bean(name = &quot;entityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n        LocalContainerEntityManagerFactoryBean emf = new LocalContainerEntityManagerFactoryBean();\n        emf.setDataSource(dataSource());\n        emf.setPackagesToScan(&quot;com.spotify.game.model.entity&quot;);\n        emf.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n        emf.setJpaProperties(getHibernateProperties());\n\n        return emf;\n    }\n\n    @Bean(name = &quot;transactionManager&quot;)\n    public PlatformTransactionManager hibernateTransactionManager(SessionFactory sessionFactory) {\n        HibernateTransactionManager transactionManager = new HibernateTransactionManager();\n        transactionManager.setSessionFactory(sessionFactory);\n        return transactionManager;\n    }\n\n    private Properties getHibernateProperties() {\n        Properties properties = new Properties();\n        properties.setProperty(&quot;hibernate.dialect&quot;, hibernateProperties.getDialect());\n        properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, hibernateProperties.getHbm2ddlAuto());\n        properties.setProperty(&quot;hibernate.show_sql&quot;, String.valueOf(hibernateProperties.isShowSql()));\n        properties.setProperty(&quot;hibernate.format_sql&quot;, String.valueOf(hibernateProperties.isFormatSql()));\n        properties.setProperty(&quot;hibernate.jdbc.batch_size&quot;, String.valueOf(hibernateProperties.getBatchSize()));\n        properties.setProperty(&quot;hibernate.order_inserts&quot;, String.valueOf(hibernateProperties.isOrderInserts()));\n        properties.setProperty(&quot;hibernate.order_updates&quot;, String.valueOf(hibernateProperties.isOrderInserts()));\n\n        return properties;\n    }\n}\n</code></pre>\n<p>Here's my method in my UserService class:</p>\n<pre><code>@Override\n    public User createUser(String username, String password, String email) {\n        User user = new User();\n        user.setUsername(username);\n        user.setEmail(email);\n        user.setVerified(false);\n\n        String encryptedPassword = passwordEncoder.encode(password);\n        user.setPasswordHash(encryptedPassword);\n\n        try {\n            userRepository.save(user);\n        } catch (DataIntegrityViolationException e) {\n            throw new DuplicateKeyException(&quot;User with username '&quot; + username + &quot;' or email '&quot; + email + &quot;' already exists&quot;);\n        }\n\n        return user;\n    }\n</code></pre>\n<p>And here's a test:</p>\n<pre><code>@Test\n    public void createUserTest() {\n        User user = userService.createUser(&quot;test_username&quot;, &quot;test_password&quot;, &quot;test@example.com&quot;);\n\n        assertNotNull(user.getId());\n        assertEquals(&quot;test_username&quot;, user.getUsername());\n        assertEquals(&quot;test@example.com&quot;, user.getEmail());\n        assertFalse(user.isVerified());\n    }\n</code></pre>\n<p>And my user entity:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;username&quot;, unique = true)\n    private String username;\n\n    @Column(name = &quot;password&quot;)\n    private String passwordHash;\n\n    @Column(name = &quot;email&quot;, unique = true)\n    private String email;\n\n    @Column(name = &quot;verified&quot;)\n    private boolean verified;\n</code></pre>\n<p>How can I fix this problem?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":22266993,"reputation":907,"user_id":16497617,"display_name":"Maneesha Indrachapa"},"score":0,"creation_date":1678118544,"post_id":75653046,"comment_id":133467080,"body_markdown":"No, it is not possible to run a Spring Boot application as a normal Java executable JAR without a Spring Boot loader. The Spring Boot loader must be in your classpath in order to start a Spring Boot application. For a Spring Boot application to start, the Spring Boot loader offers a wide range of capabilities, including performing classpath scanning, creating the application context, and managing dependencies.","body":"No, it is not possible to run a Spring Boot application as a normal Java executable JAR without a Spring Boot loader. The Spring Boot loader must be in your classpath in order to start a Spring Boot application. For a Spring Boot application to start, the Spring Boot loader offers a wide range of capabilities, including performing classpath scanning, creating the application context, and managing dependencies."},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678118581,"post_id":75653046,"comment_id":133467090,"body_markdown":"it is possible to run a Spring Boot application as a normal Java executable JAR without using the Spring Boot Loader, it requires a lot of manual configuration and initialization of dependencies, properties, and application context. Therefore, it is not recommended, and it is always better to use the Spring Boot Loader to run Spring Boot applications.\nSo no don&#39;t do that","body":"it is possible to run a Spring Boot application as a normal Java executable JAR without using the Spring Boot Loader, it requires a lot of manual configuration and initialization of dependencies, properties, and application context. Therefore, it is not recommended, and it is always better to use the Spring Boot Loader to run Spring Boot applications. So no don&#39;t do that"},{"owner":{"account_id":9442932,"reputation":2017,"user_id":7022735,"accept_rate":40,"display_name":"rvit34"},"score":0,"creation_date":1678118885,"post_id":75653046,"comment_id":133467183,"body_markdown":"@Karim, do you have an example how to do it manually?","body":"@Karim, do you have an example how to do it manually?"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678119348,"post_id":75653046,"comment_id":133467295,"body_markdown":"@rvit34 honestly never done it myself and it&#39;s better to avoid it altogether, your issue feels like you need to rethink what&#39;s the thing you actually want to achieve. but something like this should work:\n\njava -cp /my-app-dir/main.jar:/my-app-dir/dependencies/* -Dspring.config.location=/my-app-dir/application.properties com.mypackage.subpackage.MainApplication","body":"@rvit34 honestly never done it myself and it&#39;s better to avoid it altogether, your issue feels like you need to rethink what&#39;s the thing you actually want to achieve. but something like this should work:  java -cp /my-app-dir/main.jar:/my-app-dir/dependencies/* -Dspring.config.location=/my-app-dir/application.properties com.mypackage.subpackage.MainApplication"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678119400,"post_id":75653046,"comment_id":133467312,"body_markdown":"and you need to add every env variable to the command too, and look up other variables that spring needs to work","body":"and you need to add every env variable to the command too, and look up other variables that spring needs to work"}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678133462,"creation_date":1678133462,"answer_id":75655409,"question_id":75653046,"body_markdown":"Yes, it&#39;s possible and supported. It&#39;s what happens in your IDE when you run you application&#39;s main method directly or when you use the run support in Spring Boot&#39;s Maven and Gradle plugins.\r\n\r\nThere&#39;s a [section in the reference documentation describing how to explode the packaged archive and run the main class directly](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/index.html#container-images.efficient-images.unpacking). It&#39;s written in the context of container images, but it applies to other deployment approaches as well.","title":"Run Spring Boot application as normal java application without spring boot loader","body":"<p>Yes, it's possible and supported. It's what happens in your IDE when you run you application's main method directly or when you use the run support in Spring Boot's Maven and Gradle plugins.</p>\n<p>There's a <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/index.html#container-images.efficient-images.unpacking\" rel=\"nofollow noreferrer\">section in the reference documentation describing how to explode the packaged archive and run the main class directly</a>. It's written in the context of container images, but it applies to other deployment approaches as well.</p>\n"}],"owner":{"account_id":9442932,"reputation":2017,"user_id":7022735,"accept_rate":40,"display_name":"rvit34"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":635,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75655409,"answer_count":1,"score":0,"last_activity_date":1678133462,"creation_date":1678118349,"question_id":75653046,"body_markdown":"I wonder is it possible to run spring boot application as a normal java executable jar without spring boot loader?\r\nFor example I have next directory with jars:\r\n```\r\n/my-app-dir/main.jar\r\n/my-app-dir/dependencies/spring-core.jar\r\n/my-app-dir/dependencies/apache-tomcat.jar\r\n...\r\n```\r\nwhere main.jar contains only application classes and directory dependencies contains all required runtime dependencies including spring and spring-boot ones.\r\nAnd I would run it as usual:\r\n`java -cp /my-app-dir/main.jar:./my-app-dir/dependencies/* com.mypackage.subpackage.MainApplication`\r\n\r\nWhen I do so, spring boot app is loading but cannot find beans and resolve beens tree.\r\n\r\n\r\n\r\n","title":"Run Spring Boot application as normal java application without spring boot loader","body":"<p>I wonder is it possible to run spring boot application as a normal java executable jar without spring boot loader?\nFor example I have next directory with jars:</p>\n<pre><code>/my-app-dir/main.jar\n/my-app-dir/dependencies/spring-core.jar\n/my-app-dir/dependencies/apache-tomcat.jar\n...\n</code></pre>\n<p>where main.jar contains only application classes and directory dependencies contains all required runtime dependencies including spring and spring-boot ones.\nAnd I would run it as usual:\n<code>java -cp /my-app-dir/main.jar:./my-app-dir/dependencies/* com.mypackage.subpackage.MainApplication</code></p>\n<p>When I do so, spring boot app is loading but cannot find beans and resolve beens tree.</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"score":5,"creation_date":1678129803,"post_id":75654860,"comment_id":133470247,"body_markdown":"The loop is running forever, so the println list never get executed.","body":"The loop is running forever, so the println list never get executed."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678131421,"creation_date":1678131421,"answer_id":75655111,"question_id":75654860,"body_markdown":"You should [code to an interface][1]. `ArrayList` is the implementation. [List][2] is the interface.\r\n\r\nYou have an [infinite loop][3]. You need to decide on how to terminate the loop, otherwise code after the loop will not get executed.\r\n\r\nIn fact, when I copied your code to my [Eclipse][4] IDE, it flagged the following line of the code as _Unreachable code_\r\n```java\r\nSystem.out.println(&quot;The Grocery List: &quot; +shopList);\r\n```\r\nIn the below code, I decided that simply hitting &lt;kbd&gt;ENTER&lt;/kbd&gt; will terminate the loop.\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\n\r\npublic class ShopList {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        List&lt;String&gt; shopList = new ArrayList&lt;&gt;();\r\n        while (true) {\r\n            System.out.print(&quot;Enter an item (or just hit &#39;ENTER&#39; to quit): &quot;);\r\n            String item = sc.nextLine();\r\n            if (item.isEmpty()) {\r\n                break;\r\n            }\r\n            else {\r\n                shopList.add(item);\r\n            }\r\n        }\r\n        System.out.println(&quot;The Grocery List: &quot; +shopList);\r\n        sc.close();\r\n    }\r\n}\r\n```\r\nOutput from a sample run:  \r\n(Note that the second last entry was the &lt;kbd&gt;TAB&lt;/kbd&gt; key and in the last entry, I hit the &lt;kbd&gt;ENTER&lt;/kbd&gt; by itself which meant that `item` was an empty string.)\r\n```none\r\nEnter an item (or just hit &#39;ENTER&#39; to quit): s\r\nEnter an item (or just hit &#39;ENTER&#39; to quit): %\r\nEnter an item (or just hit &#39;ENTER&#39; to quit): mvosp[5rt04j89w\r\nEnter an item (or just hit &#39;ENTER&#39; to quit): *&amp;^$^&amp;$ghdtr d df\r\nEnter an item (or just hit &#39;ENTER&#39; to quit): \t\r\nEnter an item (or just hit &#39;ENTER&#39; to quit): \r\nThe Grocery List: [s, %, mvosp[5rt04j89w, *&amp;^$^&amp;$ghdtr d df, \t]\r\n```\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1992384/program-to-an-interface-what-does-it-mean\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\r\n  [3]: https://stackoverflow.com/questions/31173481/when-would-you-write-an-infinite-loop-in-java\r\n  [4]: https://www.eclipse.org/","title":"Dynamic input in ArrayList","body":"<p>You should <a href=\"https://stackoverflow.com/questions/1992384/program-to-an-interface-what-does-it-mean\">code to an interface</a>. <code>ArrayList</code> is the implementation. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\">List</a> is the interface.</p>\n<p>You have an <a href=\"https://stackoverflow.com/questions/31173481/when-would-you-write-an-infinite-loop-in-java\">infinite loop</a>. You need to decide on how to terminate the loop, otherwise code after the loop will not get executed.</p>\n<p>In fact, when I copied your code to my <a href=\"https://www.eclipse.org/\" rel=\"nofollow noreferrer\">Eclipse</a> IDE, it flagged the following line of the code as <em>Unreachable code</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;The Grocery List: &quot; +shopList);\n</code></pre>\n<p>In the below code, I decided that simply hitting <kbd>ENTER</kbd> will terminate the loop.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Scanner;\n\npublic class ShopList {\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        List&lt;String&gt; shopList = new ArrayList&lt;&gt;();\n        while (true) {\n            System.out.print(&quot;Enter an item (or just hit 'ENTER' to quit): &quot;);\n            String item = sc.nextLine();\n            if (item.isEmpty()) {\n                break;\n            }\n            else {\n                shopList.add(item);\n            }\n        }\n        System.out.println(&quot;The Grocery List: &quot; +shopList);\n        sc.close();\n    }\n}\n</code></pre>\n<p>Output from a sample run:<br />\n(Note that the second last entry was the <kbd>TAB</kbd> key and in the last entry, I hit the <kbd>ENTER</kbd> by itself which meant that <code>item</code> was an empty string.)</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter an item (or just hit 'ENTER' to quit): s\nEnter an item (or just hit 'ENTER' to quit): %\nEnter an item (or just hit 'ENTER' to quit): mvosp[5rt04j89w\nEnter an item (or just hit 'ENTER' to quit): *&amp;^$^&amp;$ghdtr d df\nEnter an item (or just hit 'ENTER' to quit):    \nEnter an item (or just hit 'ENTER' to quit): \nThe Grocery List: [s, %, mvosp[5rt04j89w, *&amp;^$^&amp;$ghdtr d df,    ]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678133203,"creation_date":1678133203,"answer_id":75655368,"question_id":75654860,"body_markdown":"This would be a great use case for a `do...while()` loop:\r\n\r\n    String item;\r\n    Scanner sc = new Scanner(System.in);\r\n\r\n    List&lt;String&gt; shopList = new ArrayList&lt;String&gt;();\r\n    do {\r\n        System.out.print(&quot;Enter an item [Enter to quit]: &quot;);\r\n        item = sc.nextLine();\r\n        if (!item.isEmpty()) {\r\n          shopList.add(item);\r\n        }\r\n    } while (!item.isEmpty());\r\n\r\n    System.out.println(&quot;The Grocery List: &quot; + shopList);\r\n    sc.close();\r\n\r\nSample run:\r\n\r\n    Enter an item [Enter to quit]: pizza crust\r\n    Enter an item [Enter to quit]: pizza sauce\r\n    Enter an item [Enter to quit]: pepperoni\r\n    Enter an item [Enter to quit]: cheese\r\n    Enter an item [Enter to quit]: \r\n    The Grocery List: [pizza crust, pizza sauce, pepperoni, cheese]","title":"Dynamic input in ArrayList","body":"<p>This would be a great use case for a <code>do...while()</code> loop:</p>\n<pre><code>String item;\nScanner sc = new Scanner(System.in);\n\nList&lt;String&gt; shopList = new ArrayList&lt;String&gt;();\ndo {\n    System.out.print(&quot;Enter an item [Enter to quit]: &quot;);\n    item = sc.nextLine();\n    if (!item.isEmpty()) {\n      shopList.add(item);\n    }\n} while (!item.isEmpty());\n\nSystem.out.println(&quot;The Grocery List: &quot; + shopList);\nsc.close();\n</code></pre>\n<p>Sample run:</p>\n<pre><code>Enter an item [Enter to quit]: pizza crust\nEnter an item [Enter to quit]: pizza sauce\nEnter an item [Enter to quit]: pepperoni\nEnter an item [Enter to quit]: cheese\nEnter an item [Enter to quit]: \nThe Grocery List: [pizza crust, pizza sauce, pepperoni, cheese]\n</code></pre>\n"}],"owner":{"account_id":26700564,"reputation":1,"user_id":20307683,"display_name":"Nelly"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1678133203,"creation_date":1678129648,"question_id":75654860,"body_markdown":"I am trying to create an `ArrayList` in which you can add input that is non-fixed, so you can add input later.\r\nCurrently I have two issues: \r\n- the elements of the `ArrayList` aren&#39;t being printed.\r\n- I can only input one element, instead of an infinite amount.\r\n\r\nThanks\r\n\r\nCode:\r\n```java\r\npublic static void main(String[] args) {\r\n    Scanner sc = new Scanner(System.in);\r\n    ArrayList&lt;String&gt; shopList = new ArrayList&lt;&gt;();\r\n    while (true) {\r\n        System.out.println(&quot;Enter an item: &quot;);\r\n        String item = sc.nextLine();\r\n        shopList.add(item);\r\n    }\r\n    System.out.println(&quot;The Grocery List: &quot; +shopList);\r\n    sc.close();\r\n}\r\n```\r\n","title":"Dynamic input in ArrayList","body":"<p>I am trying to create an <code>ArrayList</code> in which you can add input that is non-fixed, so you can add input later.\nCurrently I have two issues:</p>\n<ul>\n<li>the elements of the <code>ArrayList</code> aren't being printed.</li>\n<li>I can only input one element, instead of an infinite amount.</li>\n</ul>\n<p>Thanks</p>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    ArrayList&lt;String&gt; shopList = new ArrayList&lt;&gt;();\n    while (true) {\n        System.out.println(&quot;Enter an item: &quot;);\n        String item = sc.nextLine();\n        shopList.add(item);\n    }\n    System.out.println(&quot;The Grocery List: &quot; +shopList);\n    sc.close();\n}\n</code></pre>\n"},{"tags":["java","if-statement","keyboard","logic"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1678129621,"post_id":75654558,"comment_id":133470212,"body_markdown":"*this behavior seems to be linked to the order of the if statements* - well, did you change the order of the statements to validate your thought?  A KeyEvent is only generated for the last key pressed, so order should not matter, assuming your logic is correct. However, you should NOT be using a KeyListener. Instead you should be using `Key Bindings`. Check out: [Motion Using the Keyboard](https://tips4java.wordpress.com/2013/06/09/motion-using-the-keyboard/) for more information.","body":"<i>this behavior seems to be linked to the order of the if statements</i> - well, did you change the order of the statements to validate your thought?  A KeyEvent is only generated for the last key pressed, so order should not matter, assuming your logic is correct. However, you should NOT be using a KeyListener. Instead you should be using <code>Key Bindings</code>. Check out: <a href=\"https://tips4java.wordpress.com/2013/06/09/motion-using-the-keyboard/\" rel=\"nofollow noreferrer\">Motion Using the Keyboard</a> for more information."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1678133931,"post_id":75654558,"comment_id":133471291,"body_markdown":"On &quot;pressed&quot;, add the direction to a `Set`, on &quot;release&quot; remove it - also, use the Key Bindings API instead","body":"On &quot;pressed&quot;, add the direction to a <code>Set</code>, on &quot;release&quot; remove it - also, use the Key Bindings API instead"}],"answers":[{"tags":[],"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678132469,"creation_date":1678132469,"answer_id":75655261,"question_id":75654558,"body_markdown":"Reading your description of the issue, it&#39;s clear that it is in fact linked to the order of the if statements. Whichever is the last statement to evaluate to `true` will determine the direction, ignoring any other keys that were pressed. I would suggest implementing it in a way that accounts for other key presses, such as:\r\n\r\n    if (!collisionOn) {\r\n        if(keyH.upPressed) {\r\n            worldY -= speed;\r\n        }\r\n        if(keyH.downPressed) {\r\n            worldY += speed;\r\n        }\r\n        if(keyH.leftPressed) {\r\n            worldX -= speed;\r\n        }\r\n        if(keyH.rightPressed) {\r\n            worldX += speed;\r\n        }\r\n    }\r\n\r\nWithout seeing more of the code, I&#39;m not sure if your implementation allows this, but it shouldn&#39;t be difficult to obtain something to that effect.","title":"Player Movements in RPG Java Game - Simultaneous key pressing","body":"<p>Reading your description of the issue, it's clear that it is in fact linked to the order of the if statements. Whichever is the last statement to evaluate to <code>true</code> will determine the direction, ignoring any other keys that were pressed. I would suggest implementing it in a way that accounts for other key presses, such as:</p>\n<pre><code>if (!collisionOn) {\n    if(keyH.upPressed) {\n        worldY -= speed;\n    }\n    if(keyH.downPressed) {\n        worldY += speed;\n    }\n    if(keyH.leftPressed) {\n        worldX -= speed;\n    }\n    if(keyH.rightPressed) {\n        worldX += speed;\n    }\n}\n</code></pre>\n<p>Without seeing more of the code, I'm not sure if your implementation allows this, but it shouldn't be difficult to obtain something to that effect.</p>\n"}],"owner":{"account_id":24576902,"reputation":1,"user_id":18482613,"display_name":"JNewance"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678132469,"creation_date":1678127523,"question_id":75654558,"body_markdown":"In my java RPG game, a KeyHandler checks which of the WASD key is pressed during playstate:\r\n\r\n```\r\n`if (gp.gameState == gp.playState) {\r\n     if (code == KeyEvent.VK_W){\r\n         upPressed = true;\r\n     }\r\n     if (code == KeyEvent.VK_A){\r\n         leftPressed = true;\r\n     }\r\n     if (code == KeyEvent.VK_S){\r\n         downPressed = true;\r\n     }\r\n     if (code == KeyEvent.VK_D){\r\n         rightPressed = true;\r\n     }`\r\n```\r\n\r\nInside the update fuction, a the value of a string variable called &quot;direction&quot; changes based on which key the KeyHandler recognized:\r\n\r\n```\r\n`if(keyH.upPressed || keyH.downPressed || keyH.leftPressed || keyH.rightPressed ){\r\n     if (keyH.upPressed){\r\n         direction = &quot;up&quot;;\r\n     }\r\n     if(keyH.downPressed){\r\n         direction = &quot;down&quot;;\r\n     }\r\n     if(keyH.leftPressed){\r\n         direction = &quot;left&quot;;\r\n     }\r\n     if(keyH.rightPressed){\r\n         direction = &quot;right&quot;;\r\n     }`\r\n```\r\n\r\nAfter checking for eventual collisions, the player moves based on his direction in the same update fuction:\r\n\r\n```\r\n`if (!collisionOn) {\r\n      if(Objects.equals(direction, &quot;up&quot;)) {\r\n          worldY -= speed;\r\n      }\r\n      if(Objects.equals(direction, &quot;down&quot;)) {\r\n          worldY += speed;\r\n      }\r\n      if(Objects.equals(direction, &quot;left&quot;)) {\r\n          worldX -= speed;\r\n      }\r\n      if(Objects.equals(direction, &quot;right&quot;)) {\r\n          worldX += speed;\r\n      }`\r\n```\r\n\r\nMy problem is that when pressing some of the keys simoultaneously the resulting action is not what is expected: while holding the W key, if any other key between A,S or D changes the direction; while holding the S key, only pressing A or D changes the direction, W is not working. While holding A only pressing D changes the direction, W and S not working. While holding D, no other directional key works. This behavior seems to be linked to the order of the if statements in my second snippets of code, but I can&#39;t figure out how.","title":"Player Movements in RPG Java Game - Simultaneous key pressing","body":"<p>In my java RPG game, a KeyHandler checks which of the WASD key is pressed during playstate:</p>\n<pre><code>`if (gp.gameState == gp.playState) {\n     if (code == KeyEvent.VK_W){\n         upPressed = true;\n     }\n     if (code == KeyEvent.VK_A){\n         leftPressed = true;\n     }\n     if (code == KeyEvent.VK_S){\n         downPressed = true;\n     }\n     if (code == KeyEvent.VK_D){\n         rightPressed = true;\n     }`\n</code></pre>\n<p>Inside the update fuction, a the value of a string variable called &quot;direction&quot; changes based on which key the KeyHandler recognized:</p>\n<pre><code>`if(keyH.upPressed || keyH.downPressed || keyH.leftPressed || keyH.rightPressed ){\n     if (keyH.upPressed){\n         direction = &quot;up&quot;;\n     }\n     if(keyH.downPressed){\n         direction = &quot;down&quot;;\n     }\n     if(keyH.leftPressed){\n         direction = &quot;left&quot;;\n     }\n     if(keyH.rightPressed){\n         direction = &quot;right&quot;;\n     }`\n</code></pre>\n<p>After checking for eventual collisions, the player moves based on his direction in the same update fuction:</p>\n<pre><code>`if (!collisionOn) {\n      if(Objects.equals(direction, &quot;up&quot;)) {\n          worldY -= speed;\n      }\n      if(Objects.equals(direction, &quot;down&quot;)) {\n          worldY += speed;\n      }\n      if(Objects.equals(direction, &quot;left&quot;)) {\n          worldX -= speed;\n      }\n      if(Objects.equals(direction, &quot;right&quot;)) {\n          worldX += speed;\n      }`\n</code></pre>\n<p>My problem is that when pressing some of the keys simoultaneously the resulting action is not what is expected: while holding the W key, if any other key between A,S or D changes the direction; while holding the S key, only pressing A or D changes the direction, W is not working. While holding A only pressing D changes the direction, W and S not working. While holding D, no other directional key works. This behavior seems to be linked to the order of the if statements in my second snippets of code, but I can't figure out how.</p>\n"},{"tags":["extjs","sencha-cmd","extjs7","java"],"owner":{"account_id":4255401,"reputation":39,"user_id":3481224,"display_name":"Lucaele"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1678131723,"creation_date":1654851635,"question_id":72571688,"body_markdown":"i&#39;m using Sencha Themer 1.4.0\r\non Apple M1 with Monterey 12.4\r\njava version &quot;1.8.0_333&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_333-b02)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.333-b02, mixed mode)\r\n\r\nAlways loading bar on open or create a theme remain at 99%.\r\n\r\nOn logs there is:\r\n\r\n```\r\n[2022-06-10 00:28:29.051] [DEBUG] [default] - Exception in thread &quot;Thread-34&quot; \r\n[2022-06-10 00:28:29.051] [DEBUG] [default] - java.lang.UnsatisfiedLinkError: /private/var/folders/d9/h_t37l0x3hj1h7r4vsd50ngw0000gn/T/jna--1385014272/jna2864571768082386130.tmp: dlopen(/private/var/folders/d9/h_t37l0x3hj1h7r4vsd50ngw0000gn/T/jna--1385014272/jna2864571768082386130.tmp, 0x0001): tried: &#39;/private/var/folders/d9/h_t37l0x3hj1h7r4vsd50ngw0000gn/T/jna--1385014272/jna2864571768082386130.tmp&#39; (fat file, but missing compatible architecture (have &#39;i386,x86_64,unknown&#39;, need &#39;arm64e&#39;))\r\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method)\r\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1950)\r\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1832)\r\n\tat java.lang.Runtime.load0(Runtime.java:811)\r\n\tat java.lang.System.load(System.java:1088)\r\n\tat com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:761)\r\n\tat com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:736)\r\n\tat com.sun.jna.Native.&lt;clinit&gt;(Native.java:131)\r\n\tat com.sencha.jna.mac.Carbon.&lt;clinit&gt;(Carbon.java:11)\r\n\tat com.sencha.tools.watchers.FSEventWatchService$1.run(FSEventWatchService.java:41)\r\n\tat com.sencha.util.ThreadUtil$1.run(ThreadUtil.java:65)\r\n\tat com.sencha.util.ThreadUtil$2.run(ThreadUtil.java:162)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nHow fix this problem?\r\nThanks","title":"Sencha Themer 1.4.0 fat file, but missing compatible architecture (have &#39;i386,x86_64,unknown&#39;, need &#39;arm64e&#39;)","body":"<p>i'm using Sencha Themer 1.4.0\non Apple M1 with Monterey 12.4\njava version &quot;1.8.0_333&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_333-b02)\nJava HotSpot(TM) 64-Bit Server VM (build 25.333-b02, mixed mode)</p>\n<p>Always loading bar on open or create a theme remain at 99%.</p>\n<p>On logs there is:</p>\n<pre><code>[2022-06-10 00:28:29.051] [DEBUG] [default] - Exception in thread &quot;Thread-34&quot; \n[2022-06-10 00:28:29.051] [DEBUG] [default] - java.lang.UnsatisfiedLinkError: /private/var/folders/d9/h_t37l0x3hj1h7r4vsd50ngw0000gn/T/jna--1385014272/jna2864571768082386130.tmp: dlopen(/private/var/folders/d9/h_t37l0x3hj1h7r4vsd50ngw0000gn/T/jna--1385014272/jna2864571768082386130.tmp, 0x0001): tried: '/private/var/folders/d9/h_t37l0x3hj1h7r4vsd50ngw0000gn/T/jna--1385014272/jna2864571768082386130.tmp' (fat file, but missing compatible architecture (have 'i386,x86_64,unknown', need 'arm64e'))\n    at java.lang.ClassLoader$NativeLibrary.load(Native Method)\n    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1950)\n    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1832)\n    at java.lang.Runtime.load0(Runtime.java:811)\n    at java.lang.System.load(System.java:1088)\n    at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:761)\n    at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:736)\n    at com.sun.jna.Native.&lt;clinit&gt;(Native.java:131)\n    at com.sencha.jna.mac.Carbon.&lt;clinit&gt;(Carbon.java:11)\n    at com.sencha.tools.watchers.FSEventWatchService$1.run(FSEventWatchService.java:41)\n    at com.sencha.util.ThreadUtil$1.run(ThreadUtil.java:65)\n    at com.sencha.util.ThreadUtil$2.run(ThreadUtil.java:162)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>How fix this problem?\nThanks</p>\n"},{"tags":["java","freemarker"],"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678131542,"creation_date":1678131542,"question_id":75655136,"body_markdown":"I&#39;ve implemented the `TemplateDirectiveModel` interface and although I can do `environment.getDataModel()` and even call `get()` on the DataModel I can&#39;t seem to find a way to add a new value to the DataModel. Is this possible? And if so how? \r\n","title":"How do I add an Object to the DataModel through TemplateDirectiveModel in Freemarker?","body":"<p>I've implemented the <code>TemplateDirectiveModel</code> interface and although I can do <code>environment.getDataModel()</code> and even call <code>get()</code> on the DataModel I can't seem to find a way to add a new value to the DataModel. Is this possible? And if so how?</p>\n"},{"tags":["java","amazon-web-services","spring-boot","api","amazon-s3"],"answers":[{"comments":[{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1678125867,"post_id":75654196,"comment_id":133469237,"body_markdown":"&quot;Cannot resolve symbol &#39;doesBucketExistsV2&#39;&quot;","body":"&quot;Cannot resolve symbol &#39;doesBucketExistsV2&#39;&quot;"},{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1678125936,"post_id":75654196,"comment_id":133469255,"body_markdown":"In case I already have a bucket, I already checked it on amazon aws","body":"In case I already have a bucket, I already checked it on amazon aws"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678126048,"post_id":75654196,"comment_id":133469285,"body_markdown":"the issue is here too\n\nprivate final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();\n\nBucket name change each time in the controller","body":"the issue is here too  private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();  Bucket name change each time in the controller"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678126093,"post_id":75654196,"comment_id":133469300,"body_markdown":"you probably using an older SDK, i updated my code","body":"you probably using an older SDK, i updated my code"},{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1678126500,"post_id":75654196,"comment_id":133469400,"body_markdown":"In mine there are no options with &quot;doesExists&quot; in relation to s3Client. I am using version:\n 2.20.14","body":"In mine there are no options with &quot;doesExists&quot; in relation to s3Client. I am using version:  2.20.14"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678126549,"post_id":75654196,"comment_id":133469411,"body_markdown":"yeah use that I updated my answer","body":"yeah use that I updated my answer"},{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1678127200,"post_id":75654196,"comment_id":133469582,"body_markdown":"&quot;doesBucketExist&quot; too lol","body":"&quot;doesBucketExist&quot; too lol"}],"tags":[],"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678126062,"creation_date":1678125224,"answer_id":75654196,"question_id":75653867,"body_markdown":"To upload your data (photos, videos, documents, etc.) to Amazon S3, you must first create an S3 bucket in one of the AWS Regions, a bucket is a container for objects stored in Amazon S3.\r\n\r\nYou need to make sure the bucket you&#39;re using already exists\r\n\r\nuse this condition to make sure the bucket already exists before uploading a file to S3:\r\n\r\n    if (s3Client.doesBucketExist(bucketName)) {\r\n                ObjectMetadata metadata = new ObjectMetadata();\r\n                metadata.setContentType(contentType);\r\n                metadata.setContentLength(stream.available());\r\n\r\n                s3Client.putObject(new PutObjectRequest(bucketName, key, stream, metadata));\r\n            } else {\r\n                log.warn(&quot;AWS S3 &#39;{}&#39; Bucket does not exist&quot;, bucketName);\r\n                 s3client.createBucket(bucketName);\r\n            }\r\nif `s3client.createBucket(bucketName);` throws an exception that means you&#39;re not allowed to create a bucket use this documentation to create one https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html\r\n\r\nIf you don&#39;t have access at all, you need to talk to your AWS admin to create one for you.\r\n\r\nAlso don&#39;t create a bucket each time like this\r\n\r\n    private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();\r\n\r\njust use one for different kind of APP\r\n\r\n    private final String BUCKET_NAME = &quot;awstockproducts-app1-dev&quot;\r\n\r\nso you don&#39;t create a bucket each time you run the application\r\n\r\n","title":"Amazon aws error with s3 bucket not existing (Spring Boot)","body":"<p>To upload your data (photos, videos, documents, etc.) to Amazon S3, you must first create an S3 bucket in one of the AWS Regions, a bucket is a container for objects stored in Amazon S3.</p>\n<p>You need to make sure the bucket you're using already exists</p>\n<p>use this condition to make sure the bucket already exists before uploading a file to S3:</p>\n<pre><code>if (s3Client.doesBucketExist(bucketName)) {\n            ObjectMetadata metadata = new ObjectMetadata();\n            metadata.setContentType(contentType);\n            metadata.setContentLength(stream.available());\n\n            s3Client.putObject(new PutObjectRequest(bucketName, key, stream, metadata));\n        } else {\n            log.warn(&quot;AWS S3 '{}' Bucket does not exist&quot;, bucketName);\n             s3client.createBucket(bucketName);\n        }\n</code></pre>\n<p>if <code>s3client.createBucket(bucketName);</code> throws an exception that means you're not allowed to create a bucket use this documentation to create one <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html</a></p>\n<p>If you don't have access at all, you need to talk to your AWS admin to create one for you.</p>\n<p>Also don't create a bucket each time like this</p>\n<pre><code>private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();\n</code></pre>\n<p>just use one for different kind of APP</p>\n<pre><code>private final String BUCKET_NAME = &quot;awstockproducts-app1-dev&quot;\n</code></pre>\n<p>so you don't create a bucket each time you run the application</p>\n"},{"comments":[{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1678128049,"post_id":75654533,"comment_id":133469830,"body_markdown":"Well, apparently the javav2/ page it&#39;s unavaliable","body":"Well, apparently the javav2/ page it&#39;s unavaliable"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1678128201,"post_id":75654533,"comment_id":133469867,"body_markdown":"See https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2","body":"See <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2\" rel=\"nofollow noreferrer\">github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2</a>"},{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1678128952,"post_id":75654533,"comment_id":133470057,"body_markdown":"I don&#39;t understand, the link in this documentation to download the sdk takes me to the amazon aws website for the java sdk, but it is precisely this version that I installed","body":"I don&#39;t understand, the link in this documentation to download the sdk takes me to the amazon aws website for the java sdk, but it is precisely this version that I installed"},{"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"score":0,"creation_date":1678129056,"post_id":75654533,"comment_id":133470084,"body_markdown":"This is my version: 2.20.14","body":"This is my version: 2.20.14"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1678130987,"post_id":75654533,"comment_id":133470558,"body_markdown":"See my update - you are referencing a bucket with a time stamp that most likely does not exist","body":"See my update - you are referencing a bucket with a time stamp that most likely does not exist"}],"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678131404,"creation_date":1678127380,"answer_id":75654533,"question_id":75653867,"body_markdown":"The answer above references **AWS SDK for Java V1** - which is not recommended to use anymore. See the SDK page here for Version information: \r\n\r\nhttps://github.com/awsdocs/aws-doc-sdk-examples\r\n\r\nRather then looking into the AWS S3 Service Guide that contains V1 code, now refer to the [AWS Code Library][1] that uses the latest SDK version - which for Java is AWS SDK for Java V2. \r\n\r\n[![enter image description here][2]][2]\r\n\r\nFor AWS SDK for Java V2 examples, see:\r\n\r\n[Code examples for Amazon S3 using AWS SDKs][3]\r\n\r\nI have used V2 in many Spring Boot projects and there are no issues working with S3 operations. So to use S3 Java functionality in Spring boot, upgrade to V2 - which is best practice.  \r\n\r\n**UPDATE ON A POSSIBLE ISSUE**\r\n\r\nI am looking at your code much closer. I see this issue in your controller: \r\n\r\n  **private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();**\r\n\r\n**You are changing your bucket name with a time stamp**. Then you call **putObject()** and reference that bucket name with a timestamp. Unless you created a bucket on the fly with that name (and I do not see that logic), that bucket does not exist and you get an exception. \r\n\r\nSO you have 2 choices: \r\n\r\n- keep the bucket name static so you know it exists. \r\n- or if you have to keep a timestamp for a bucket, then use the V2 API and a waiter to create a bucket before calling **putObject()**. Then you can reference the bucket name with the timestamp. To learn how to create a new bucket with a waiter using V2, see the Create Bucket example here. Notice the user of a waiter. This approach will create a new bucket for each request. I personally would use a static bucket name. \r\n\r\nhttps://docs.aws.amazon.com/code-library/latest/ug/java_2_s3_code_examples.html \r\n\r\n\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/code-library/latest/ug/what-is-code-library.html\r\n  [2]: https://i.stack.imgur.com/xNYA4.png\r\n  [3]: https://docs.aws.amazon.com/code-library/latest/ug/java_2_s3_code_examples.html","title":"Amazon aws error with s3 bucket not existing (Spring Boot)","body":"<p>The answer above references <strong>AWS SDK for Java V1</strong> - which is not recommended to use anymore. See the SDK page here for Version information:</p>\n<p><a href=\"https://github.com/awsdocs/aws-doc-sdk-examples\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-doc-sdk-examples</a></p>\n<p>Rather then looking into the AWS S3 Service Guide that contains V1 code, now refer to the <a href=\"https://docs.aws.amazon.com/code-library/latest/ug/what-is-code-library.html\" rel=\"nofollow noreferrer\">AWS Code Library</a> that uses the latest SDK version - which for Java is AWS SDK for Java V2.</p>\n<p><a href=\"https://i.stack.imgur.com/xNYA4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xNYA4.png\" alt=\"enter image description here\" /></a></p>\n<p>For AWS SDK for Java V2 examples, see:</p>\n<p><a href=\"https://docs.aws.amazon.com/code-library/latest/ug/java_2_s3_code_examples.html\" rel=\"nofollow noreferrer\">Code examples for Amazon S3 using AWS SDKs</a></p>\n<p>I have used V2 in many Spring Boot projects and there are no issues working with S3 operations. So to use S3 Java functionality in Spring boot, upgrade to V2 - which is best practice.</p>\n<p><strong>UPDATE ON A POSSIBLE ISSUE</strong></p>\n<p>I am looking at your code much closer. I see this issue in your controller:</p>\n<p><strong>private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();</strong></p>\n<p><strong>You are changing your bucket name with a time stamp</strong>. Then you call <strong>putObject()</strong> and reference that bucket name with a timestamp. Unless you created a bucket on the fly with that name (and I do not see that logic), that bucket does not exist and you get an exception.</p>\n<p>SO you have 2 choices:</p>\n<ul>\n<li>keep the bucket name static so you know it exists.</li>\n<li>or if you have to keep a timestamp for a bucket, then use the V2 API and a waiter to create a bucket before calling <strong>putObject()</strong>. Then you can reference the bucket name with the timestamp. To learn how to create a new bucket with a waiter using V2, see the Create Bucket example here. Notice the user of a waiter. This approach will create a new bucket for each request. I personally would use a static bucket name.</li>\n</ul>\n<p><a href=\"https://docs.aws.amazon.com/code-library/latest/ug/java_2_s3_code_examples.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/code-library/latest/ug/java_2_s3_code_examples.html</a></p>\n"}],"owner":{"account_id":21274254,"reputation":407,"user_id":15653306,"display_name":"Routfin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":760,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1678131404,"creation_date":1678123042,"question_id":75653867,"body_markdown":"I&#39;m developing a product registration api in spring boot, and in my post method I send an image upload via multipart/form-data, along with a json with my product&#39;s dto. As you can see:\r\n\r\n```\r\n@RestController\r\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n@RequestMapping(&quot;/product&quot;)\r\npublic class ProductController {\r\n    final ProductService productService;\r\n    final CategoryService categoryService;\r\n    final ProductMapper productMapper;\r\n    final S3Client s3Client;\r\n\r\n    private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();\r\n\r\n    public ProductController(ProductService productService, ProductMapper productMapper, CategoryService categoryService, S3Client s3Client) {\r\n        this.productService = productService;\r\n        this.productMapper = productMapper;\r\n        this.categoryService = categoryService;\r\n        this.s3Client = s3Client;\r\n    }\r\n    @PostMapping(value = &quot;/&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n    public ResponseEntity&lt;Object&gt; saveProduct (@RequestParam(&quot;productDto&quot;) String jsonString, @RequestParam(&quot;file&quot;)MultipartFile file) {\r\n        try {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            ProductDto productDto = objectMapper.readValue(jsonString, ProductDto.class);\r\n\r\n            if (productService.existsByProduct(productDto.getProduct())) {\r\n                return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Product already exists!&quot;);\r\n            }\r\n            ProductModel productModel = productMapper.toProductModel(productDto);\r\n            CategoryModel categoryModel = categoryService.findById(productDto.getProductCategory().getCategory_id())\r\n                    .orElseThrow(() -&gt; new RuntimeException(&quot;Category not found&quot;));\r\n            productModel.setProductCategory(categoryModel);\r\n\r\n            String fileName = &quot;/products/images/&quot; + UUID.randomUUID().toString() + &quot;-&quot; + file.getOriginalFilename();\r\n\r\n            s3Client.putObject(PutObjectRequest\r\n                            .builder()\r\n                            .bucket(BUCKET_NAME)\r\n                            .key(fileName)\r\n                            .build(),\r\n                        software.amazon.awssdk.core.sync.RequestBody.fromString(&quot;Testing java sdk&quot;));\r\n            return ResponseEntity.status(HttpStatus.CREATED).body(productService.save(productModel));\r\n        } catch (Exception e) {\r\n            return ResponseEntity.status(HttpStatus.CONFLICT).body(e);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nThe problem is that I am having problems making the request from my postman\r\n\r\n```\r\n    &quot;localizedMessage&quot;: &quot;The specified bucket does not exist (Service: S3, Status Code: 404, Request ID: ZZ27F9CNNTG2RTPR, Extended Request ID: \r\n```\r\n\r\nDespite the message, checking amazon aws I can see that indeed my bucket exists and has the same name as the one I configured in my application. This is amazonConfig\r\n\r\n```\r\npackage com.api.business_manager_api.Config;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport software.amazon.awssdk.auth.credentials.AwsBasicCredentials;\r\nimport software.amazon.awssdk.auth.credentials.StaticCredentialsProvider;\r\nimport software.amazon.awssdk.regions.Region;\r\nimport software.amazon.awssdk.services.s3.S3Client;\r\n\r\n@Configuration\r\npublic class AmazonConfig {\r\n    private final String AWS_REGION = &quot;us-east-1&quot;;\r\n    private final String BUCKET_NAME = &quot;productstockimages&quot;;\r\n\r\n    @Value(&quot;${aws.accessKeyId}&quot;)\r\n    private String accessKeyId;\r\n\r\n    @Value(&quot;${aws.secretAccessKey}&quot;)\r\n    private String secretAccessKey;\r\n\r\n    @Bean\r\n    public S3Client s3Client() {\r\n        AwsBasicCredentials awsCreds = AwsBasicCredentials.create(accessKeyId, secretAccessKey);\r\n        return S3Client.builder()\r\n                .region(Region.of(AWS_REGION))\r\n                .credentialsProvider(StaticCredentialsProvider.create(awsCreds))\r\n                .build();\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn my secretKey and in my AccessKey, I configured in properties with the keys of my authorized IAM user from the amazon aws console.\r\n","title":"Amazon aws error with s3 bucket not existing (Spring Boot)","body":"<p>I'm developing a product registration api in spring boot, and in my post method I send an image upload via multipart/form-data, along with a json with my product's dto. As you can see:</p>\n<pre><code>@RestController\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RequestMapping(&quot;/product&quot;)\npublic class ProductController {\n    final ProductService productService;\n    final CategoryService categoryService;\n    final ProductMapper productMapper;\n    final S3Client s3Client;\n\n    private final String BUCKET_NAME = &quot;awstockproducts&quot; + System.currentTimeMillis();\n\n    public ProductController(ProductService productService, ProductMapper productMapper, CategoryService categoryService, S3Client s3Client) {\n        this.productService = productService;\n        this.productMapper = productMapper;\n        this.categoryService = categoryService;\n        this.s3Client = s3Client;\n    }\n    @PostMapping(value = &quot;/&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n    public ResponseEntity&lt;Object&gt; saveProduct (@RequestParam(&quot;productDto&quot;) String jsonString, @RequestParam(&quot;file&quot;)MultipartFile file) {\n        try {\n            ObjectMapper objectMapper = new ObjectMapper();\n            ProductDto productDto = objectMapper.readValue(jsonString, ProductDto.class);\n\n            if (productService.existsByProduct(productDto.getProduct())) {\n                return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Product already exists!&quot;);\n            }\n            ProductModel productModel = productMapper.toProductModel(productDto);\n            CategoryModel categoryModel = categoryService.findById(productDto.getProductCategory().getCategory_id())\n                    .orElseThrow(() -&gt; new RuntimeException(&quot;Category not found&quot;));\n            productModel.setProductCategory(categoryModel);\n\n            String fileName = &quot;/products/images/&quot; + UUID.randomUUID().toString() + &quot;-&quot; + file.getOriginalFilename();\n\n            s3Client.putObject(PutObjectRequest\n                            .builder()\n                            .bucket(BUCKET_NAME)\n                            .key(fileName)\n                            .build(),\n                        software.amazon.awssdk.core.sync.RequestBody.fromString(&quot;Testing java sdk&quot;));\n            return ResponseEntity.status(HttpStatus.CREATED).body(productService.save(productModel));\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.CONFLICT).body(e);\n        }\n    }\n\n</code></pre>\n<p>The problem is that I am having problems making the request from my postman</p>\n<pre><code>    &quot;localizedMessage&quot;: &quot;The specified bucket does not exist (Service: S3, Status Code: 404, Request ID: ZZ27F9CNNTG2RTPR, Extended Request ID: \n</code></pre>\n<p>Despite the message, checking amazon aws I can see that indeed my bucket exists and has the same name as the one I configured in my application. This is amazonConfig</p>\n<pre><code>package com.api.business_manager_api.Config;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport software.amazon.awssdk.auth.credentials.AwsBasicCredentials;\nimport software.amazon.awssdk.auth.credentials.StaticCredentialsProvider;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.s3.S3Client;\n\n@Configuration\npublic class AmazonConfig {\n    private final String AWS_REGION = &quot;us-east-1&quot;;\n    private final String BUCKET_NAME = &quot;productstockimages&quot;;\n\n    @Value(&quot;${aws.accessKeyId}&quot;)\n    private String accessKeyId;\n\n    @Value(&quot;${aws.secretAccessKey}&quot;)\n    private String secretAccessKey;\n\n    @Bean\n    public S3Client s3Client() {\n        AwsBasicCredentials awsCreds = AwsBasicCredentials.create(accessKeyId, secretAccessKey);\n        return S3Client.builder()\n                .region(Region.of(AWS_REGION))\n                .credentialsProvider(StaticCredentialsProvider.create(awsCreds))\n                .build();\n    }\n}\n\n</code></pre>\n<p>In my secretKey and in my AccessKey, I configured in properties with the keys of my authorized IAM user from the amazon aws console.</p>\n"},{"tags":["java","android","couchbase"],"comments":[{"owner":{"account_id":17736,"reputation":25458,"user_id":40015,"accept_rate":84,"display_name":"Matthew Groves"},"score":0,"creation_date":1678132185,"post_id":75655059,"comment_id":133470843,"body_markdown":"Are you trying to connect to a Couchbase Server or are you trying to embed Couchbase Lite in a Java app?","body":"Are you trying to connect to a Couchbase Server or are you trying to embed Couchbase Lite in a Java app?"},{"owner":{"account_id":17736,"reputation":25458,"user_id":40015,"accept_rate":84,"display_name":"Matthew Groves"},"score":0,"creation_date":1678132203,"post_id":75655059,"comment_id":133470848,"body_markdown":"If you&#39;re using Server, what version are you using?","body":"If you&#39;re using Server, what version are you using?"},{"owner":{"account_id":23044280,"reputation":31,"user_id":17162030,"display_name":"Juser"},"score":1,"creation_date":1678132872,"post_id":75655059,"comment_id":133471022,"body_markdown":"It&#39;s CouchbaseLite for now","body":"It&#39;s CouchbaseLite for now"},{"owner":{"account_id":17736,"reputation":25458,"user_id":40015,"accept_rate":84,"display_name":"Matthew Groves"},"score":0,"creation_date":1678284213,"post_id":75655059,"comment_id":133502576,"body_markdown":"I&#39;m no Java developer, FYI, but I&#39;m a little confused. You&#39;re importing `com.couchbase.client.java.*` but your bundle file is referencing `com.couchbase.lite...`. So I think you&#39;re trying to import the Server SDK libraries, but you actually want the Couchbase Lite SDK libraries. Have you gone through the Install docs for Couchbase Lite for Java? https://docs.couchbase.com/couchbase-lite/current/java/gs-install.html","body":"I&#39;m no Java developer, FYI, but I&#39;m a little confused. You&#39;re importing <code>com.couchbase.client.java.*</code> but your bundle file is referencing <code>com.couchbase.lite...</code>. So I think you&#39;re trying to import the Server SDK libraries, but you actually want the Couchbase Lite SDK libraries. Have you gone through the Install docs for Couchbase Lite for Java? <a href=\"https://docs.couchbase.com/couchbase-lite/current/java/gs-install.html\" rel=\"nofollow noreferrer\">docs.couchbase.com/couchbase-lite/current/java/gs-install.ht&zwnj;&#8203;ml</a>"}],"owner":{"account_id":23044280,"reputation":31,"user_id":17162030,"display_name":"Juser"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1678131171,"creation_date":1678131044,"question_id":75655059,"body_markdown":"I&#39;m trying to build a project using couchbase. The thing is, the system cannot even locate the package. Thus when I try\r\n\r\n```\r\nimport com.couchbase.client.java.Cluster;\r\n// or any other of the below\r\n\r\nimport com.couchbase.client.java.CouchbaseCluster;\r\nimport com.couchbase.client.java.Bucket;\r\n\r\nimport com.couchbase.client.java.document.JsonDocument;\r\nimport com.couchbase.client.java.document.json.JsonObject;\r\n```\r\n\r\nit says couchbase can&#39;t be located.\r\n\r\nIn build.gradle file I&#39;ve tried including (among other different) these lines\r\n\r\n```\r\nimplementation &#39;com.couchbase.lite:couchbase-lite-android-ee:3.0.0&#39;\r\nimplementation &#39;com.couchbase.lite:couchbase-lite-android:2.0.0&#39;\r\n// To access the database through HTTP (often used for hybrid development and peer-to-peer sync).\r\nimplementation &#39;com.couchbase.lite:couchbase-lite-java-listener:1.4.4&#39;\r\n// To use ForestDB as the storage type.\r\nimplementation &#39;com.couchbase.lite:couchbase-lite-android-forestdb:1.4.4&#39;\r\n// To enable encryption on SQLite databases.\r\nimplementation &#39;com.couchbase.lite:couchbase-lite-android-sqlcipher:1.4.4&#39;\r\nimplementation &#39;com.couchbase.lite:couchbase-lite-java-javascript:1.2.1&#39;\r\nimplementation &#39;com.couchbase.lite:couchbase-lite-android:1.1.0&#39;\r\n```\r\n\r\nI found these on stackoverflow. However, it seems that they no longer work / deprecated. I wonder if there is still a way to implement couchbase?","title":"Couchbase module cannot be found in Android studio","body":"<p>I'm trying to build a project using couchbase. The thing is, the system cannot even locate the package. Thus when I try</p>\n<pre><code>import com.couchbase.client.java.Cluster;\n// or any other of the below\n\nimport com.couchbase.client.java.CouchbaseCluster;\nimport com.couchbase.client.java.Bucket;\n\nimport com.couchbase.client.java.document.JsonDocument;\nimport com.couchbase.client.java.document.json.JsonObject;\n</code></pre>\n<p>it says couchbase can't be located.</p>\n<p>In build.gradle file I've tried including (among other different) these lines</p>\n<pre><code>implementation 'com.couchbase.lite:couchbase-lite-android-ee:3.0.0'\nimplementation 'com.couchbase.lite:couchbase-lite-android:2.0.0'\n// To access the database through HTTP (often used for hybrid development and peer-to-peer sync).\nimplementation 'com.couchbase.lite:couchbase-lite-java-listener:1.4.4'\n// To use ForestDB as the storage type.\nimplementation 'com.couchbase.lite:couchbase-lite-android-forestdb:1.4.4'\n// To enable encryption on SQLite databases.\nimplementation 'com.couchbase.lite:couchbase-lite-android-sqlcipher:1.4.4'\nimplementation 'com.couchbase.lite:couchbase-lite-java-javascript:1.2.1'\nimplementation 'com.couchbase.lite:couchbase-lite-android:1.1.0'\n</code></pre>\n<p>I found these on stackoverflow. However, it seems that they no longer work / deprecated. I wonder if there is still a way to implement couchbase?</p>\n"},{"tags":["java","android","android-studio","web-scraping","jsoup"],"answers":[{"comments":[{"owner":{"account_id":17702384,"reputation":1,"user_id":12851749,"display_name":"my pc"},"score":0,"creation_date":1678183636,"post_id":75655047,"comment_id":133479916,"body_markdown":"Thank you for your response. It did not work.","body":"Thank you for your response. It did not work."},{"owner":{"account_id":17702384,"reputation":1,"user_id":12851749,"display_name":"my pc"},"score":0,"creation_date":1687029193,"post_id":75655047,"comment_id":134881204,"body_markdown":"The answer was that http and https website are different and should add in manifest and settls(False)","body":"The answer was that http and https website are different and should add in manifest and settls(False)"}],"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678130984,"creation_date":1678130984,"answer_id":75655047,"question_id":75654683,"body_markdown":"Either increase the number or set it to zero:\r\n\r\n    ....timeout(0).get();\r\n\r\nA timeout of zero is treated as an infinite timeout.","title":"JSOUP in Android Studio for Web Scrapping","body":"<p>Either increase the number or set it to zero:</p>\n<pre><code>....timeout(0).get();\n</code></pre>\n<p>A timeout of zero is treated as an infinite timeout.</p>\n"}],"owner":{"account_id":17702384,"reputation":1,"user_id":12851749,"display_name":"my pc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678130984,"creation_date":1678128447,"question_id":75654683,"body_markdown":"I have having issue to web scrap data from this simple link:\r\n\r\nhttps://translatekreol.mu/translation.php?&amp;source=enn%20bon%20garson&amp;lang=kreol&amp;boutton=Translate\r\n\r\nThere is only the body tag to scrap but JSOUP library is not showing any result. The website is taking around 25seconds to load and despite timeout is 60000\r\n```\r\nDocument doc = Jsoup.connect(&quot;https://translatekreol.mu/translation.php?&amp;source=enn%20bon%20garson&amp;lang=kreol&amp;boutton=Translate&quot;).timeout(60000).get();\r\n```\r\nis not working. But if we scrap google.com instead of above url, it works.\r\n\r\nThe website: https://translatekreol.mu/translation.php?&amp;source=enn%20bon%20garson&amp;lang=kreol&amp;boutton=Translate is slow, so I increase the timeout to see if it can collect data but did not work.\r\n\r\nThe response of this website is from body tag, so despite getting data, the application stops at this point.\r\n\r\nPlease help me.\r\n","title":"JSOUP in Android Studio for Web Scrapping","body":"<p>I have having issue to web scrap data from this simple link:</p>\n<p><a href=\"https://translatekreol.mu/translation.php?&amp;source=enn%20bon%20garson&amp;lang=kreol&amp;boutton=Translate\" rel=\"nofollow noreferrer\">https://translatekreol.mu/translation.php?&amp;source=enn%20bon%20garson&amp;lang=kreol&amp;boutton=Translate</a></p>\n<p>There is only the body tag to scrap but JSOUP library is not showing any result. The website is taking around 25seconds to load and despite timeout is 60000</p>\n<pre><code>Document doc = Jsoup.connect(&quot;https://translatekreol.mu/translation.php?&amp;source=enn%20bon%20garson&amp;lang=kreol&amp;boutton=Translate&quot;).timeout(60000).get();\n</code></pre>\n<p>is not working. But if we scrap google.com instead of above url, it works.</p>\n<p>The website: <a href=\"https://translatekreol.mu/translation.php?&amp;source=enn%20bon%20garson&amp;lang=kreol&amp;boutton=Translate\" rel=\"nofollow noreferrer\">https://translatekreol.mu/translation.php?&amp;source=enn%20bon%20garson&amp;lang=kreol&amp;boutton=Translate</a> is slow, so I increase the timeout to see if it can collect data but did not work.</p>\n<p>The response of this website is from body tag, so despite getting data, the application stops at this point.</p>\n<p>Please help me.</p>\n"},{"tags":["java","memory-management","heap-memory"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1678134235,"post_id":75655038,"comment_id":133471365,"body_markdown":"I&#39;m not sure what you&#39;re expecting here.  Why would this be unusual or a problem?","body":"I&#39;m not sure what you&#39;re expecting here.  Why would this be unusual or a problem?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1678137228,"post_id":75655038,"comment_id":133472074,"body_markdown":"If you dont specify neither initial nor max heap size the JVM uses some algorithm to determine both. If you specify an initial heap size then it has the effect of providing a fixed initial heap size and the JVM still uses some algorithm to determine the max heap size.","body":"If you dont specify neither initial nor max heap size the JVM uses some algorithm to determine both. If you specify an initial heap size then it has the effect of providing a fixed initial heap size and the JVM still uses some algorithm to determine the max heap size."}],"owner":{"account_id":27950672,"reputation":1,"user_id":21344623,"display_name":"Arun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678130940,"creation_date":1678130940,"question_id":75655038,"body_markdown":"Say, I set the initial heap size (Xms) to a particular value and do not specify maximum heap size (Xmx). I&#39;m wondering that what that would mean / what the effect of that would be.\r\n\r\nI recently realized that I had done that for one of PRs mistakenly. I didn&#39;t face any issues. That made me wonder what the effect of this might be. ","title":"What happens if only the initial heap size (Xms) is set and maximum is left unspecified (Xmx)?","body":"<p>Say, I set the initial heap size (Xms) to a particular value and do not specify maximum heap size (Xmx). I'm wondering that what that would mean / what the effect of that would be.</p>\n<p>I recently realized that I had done that for one of PRs mistakenly. I didn't face any issues. That made me wonder what the effect of this might be.</p>\n"},{"tags":["java","wildfly","activemq-artemis","java-ee-8","message-listener"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1677776122,"post_id":75618389,"comment_id":133408628,"body_markdown":"What pool are you referring to? How do you know the pool is not ready to work on the message(s)?","body":"What pool are you referring to? How do you know the pool is not ready to work on the message(s)?"},{"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"score":0,"creation_date":1677833438,"post_id":75618389,"comment_id":133418968,"body_markdown":"I have defined max 8 pools in Wildfly &lt;strict-max-pool name=&quot;delivery-mdb-pool&quot; max-pool-size=&quot;8&quot; .../&gt; I know it is not ready because I can see that I have for example put 10,000 messages on the queue, the MessageListener have only handled f.eks 1000, and the queue is empty in activeMQ. If I stop sending to the queue, the MessageListener will still handle the last 9000.","body":"I have defined max 8 pools in Wildfly &lt;strict-max-pool name=&quot;delivery-mdb-pool&quot; max-pool-size=&quot;8&quot; .../&gt; I know it is not ready because I can see that I have for example put 10,000 messages on the queue, the MessageListener have only handled f.eks 1000, and the queue is empty in activeMQ. If I stop sending to the queue, the MessageListener will still handle the last 9000."}],"answers":[{"comments":[{"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"score":0,"creation_date":1678185407,"post_id":75655022,"comment_id":133480466,"body_markdown":"Thanks, I will try with @ActivationConfigProperty(propertyName = &quot;maxSession&quot;, propertyValue = &quot;8&quot;) on my MessageListener and see if that helps.","body":"Thanks, I will try with @ActivationConfigProperty(propertyName = &quot;maxSession&quot;, propertyValue = &quot;8&quot;) on my MessageListener and see if that helps."}],"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678130873,"creation_date":1678130873,"answer_id":75655022,"question_id":75618389,"body_markdown":"As far as I can tell what you&#39;re seeing is the expected behavior. This is because the creation of sessions and receiving of messages by the JCA RA is independent of the instance pool size used by the EE container for the MDB.\r\n\r\nIn short, the JCA RA receives the message from the broker and passes it to an instance of the MDB. If no MDB instance is available the JCA RA just waits for one to become available. If you don&#39;t want to get into this kind of situation then you should set the `maxSession` activation configuration property on the MDB to the same value you use for the MDB instance pool (i.e. `8` in this case).\r\n\r\nAlso, aside from this, it is important to keep in mind that the core client used within the JCA RA will fetch a batch of messages all at once and buffer them so that it doesn&#39;t have to make a network round-trip to the broker for _every single message_. This is a performance optimization controlled by the `consumerWindowSize` activation configuration property and it impacts all core clients, not just ones in an EE context. This will also impact your use-case. If, for some reason, you want the message count in the broker to exactly reflect how many messages have been _consumed_ and not include any buffered messages then you can set the `consumerWindowSize` to `0`, but that will negatively impact performance, potentially severely.","title":"Why is MessageListener consuming ActiveMQ messages before a pool is ready to work on the message?","body":"<p>As far as I can tell what you're seeing is the expected behavior. This is because the creation of sessions and receiving of messages by the JCA RA is independent of the instance pool size used by the EE container for the MDB.</p>\n<p>In short, the JCA RA receives the message from the broker and passes it to an instance of the MDB. If no MDB instance is available the JCA RA just waits for one to become available. If you don't want to get into this kind of situation then you should set the <code>maxSession</code> activation configuration property on the MDB to the same value you use for the MDB instance pool (i.e. <code>8</code> in this case).</p>\n<p>Also, aside from this, it is important to keep in mind that the core client used within the JCA RA will fetch a batch of messages all at once and buffer them so that it doesn't have to make a network round-trip to the broker for <em>every single message</em>. This is a performance optimization controlled by the <code>consumerWindowSize</code> activation configuration property and it impacts all core clients, not just ones in an EE context. This will also impact your use-case. If, for some reason, you want the message count in the broker to exactly reflect how many messages have been <em>consumed</em> and not include any buffered messages then you can set the <code>consumerWindowSize</code> to <code>0</code>, but that will negatively impact performance, potentially severely.</p>\n"}],"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75655022,"answer_count":1,"score":0,"last_activity_date":1678130873,"creation_date":1677775230,"question_id":75618389,"body_markdown":"Application deployed on WildFly using Java EE `javax.jms.MessageListener` to consume messages from queue.\r\n\r\n```java\r\n@ResourceAdapter(&quot;remote-artemis&quot;)\r\n@MessageDriven(name = &quot;DeliveryMDB&quot;, activationConfig = {\r\n        @ActivationConfigProperty(propertyName = &quot;destinationLookup&quot;, propertyValue = &quot;delivery_inbound&quot;),\r\n        @ActivationConfigProperty(propertyName = &quot;destinationType&quot;, propertyValue = &quot;javax.jms.Queue&quot;),\r\n        @ActivationConfigProperty(propertyName = &quot;acknowledgeMode&quot;, propertyValue = &quot;Auto-acknowledge&quot;)\r\n})\r\n@TransactionManagement(TransactionManagementType.CONTAINER)\r\n@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)\r\n@Pool(value=&quot;delivery-mdb-pool&quot;)\r\n```\r\nThis `MessageListener` consumes all messages on the queue regardless of if a *pool* is ready to work on the message. This has multiple negative effects, such as having to wait for the application to handle all messages before shutdown is triggered (problematic because we have thousands of messages in queue). If a forced shutdown is needed then all the messages are gone. We can no longer track the number of message in queue in ActiveMQ because they are all consumed. \r\n\r\nI expected the `MessageListener` to only consume a message when a *pool* was ready. I have tried to read the ActiveMQ documentation, but cannot find anything relevant.\r\n\r\nIs this normal behavior?","title":"Why is MessageListener consuming ActiveMQ messages before a pool is ready to work on the message?","body":"<p>Application deployed on WildFly using Java EE <code>javax.jms.MessageListener</code> to consume messages from queue.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ResourceAdapter(&quot;remote-artemis&quot;)\n@MessageDriven(name = &quot;DeliveryMDB&quot;, activationConfig = {\n        @ActivationConfigProperty(propertyName = &quot;destinationLookup&quot;, propertyValue = &quot;delivery_inbound&quot;),\n        @ActivationConfigProperty(propertyName = &quot;destinationType&quot;, propertyValue = &quot;javax.jms.Queue&quot;),\n        @ActivationConfigProperty(propertyName = &quot;acknowledgeMode&quot;, propertyValue = &quot;Auto-acknowledge&quot;)\n})\n@TransactionManagement(TransactionManagementType.CONTAINER)\n@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)\n@Pool(value=&quot;delivery-mdb-pool&quot;)\n</code></pre>\n<p>This <code>MessageListener</code> consumes all messages on the queue regardless of if a <em>pool</em> is ready to work on the message. This has multiple negative effects, such as having to wait for the application to handle all messages before shutdown is triggered (problematic because we have thousands of messages in queue). If a forced shutdown is needed then all the messages are gone. We can no longer track the number of message in queue in ActiveMQ because they are all consumed.</p>\n<p>I expected the <code>MessageListener</code> to only consume a message when a <em>pool</em> was ready. I have tried to read the ActiveMQ documentation, but cannot find anything relevant.</p>\n<p>Is this normal behavior?</p>\n"},{"tags":["java","exception","jakarta-mail","smtp-auth"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1388040878,"post_id":20780495,"comment_id":31148668,"body_markdown":"Try `properties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);` and you&#39;ll probably need username and password too.","body":"Try <code>properties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);</code> and you&#39;ll probably need username and password too."},{"owner":{"account_id":3238984,"reputation":585,"user_id":2732482,"accept_rate":0,"display_name":"Malik"},"score":0,"creation_date":1388041062,"post_id":20780495,"comment_id":31148750,"body_markdown":"Thanks for your reply Elliott , how can i specify username and password? Would you please tell me.","body":"Thanks for your reply Elliott , how can i specify username and password? Would you please tell me."},{"owner":{"account_id":1570610,"reputation":442,"user_id":1458377,"display_name":"Sanjay Nagare"},"score":0,"creation_date":1388041542,"post_id":20780495,"comment_id":31148893,"body_markdown":"Hey Malik,is your problem solved?","body":"Hey Malik,is your problem solved?"},{"owner":{"account_id":3238984,"reputation":585,"user_id":2732482,"accept_rate":0,"display_name":"Malik"},"score":0,"creation_date":1388043526,"post_id":20780495,"comment_id":31149516,"body_markdown":"Yes Sanjay My problem is solved. :)","body":"Yes Sanjay My problem is solved. :)"}],"answers":[{"tags":[],"owner":{"account_id":1144443,"reputation":4425,"user_id":2113996,"accept_rate":31,"display_name":"eatSleepCode"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1388041303,"creation_date":1388041303,"answer_id":20780609,"question_id":20780495,"body_markdown":"While creating session override a method `PasswordAuthentication` and in that give username and password.\r\n\r\n        Session session = Session.getDefaultInstance(props,\tnew javax.mail.Authenticator() \r\n        {\r\n            protected PasswordAuthentication getPasswordAuthentication() \r\n        \t{\r\n        \t    return new PasswordAuthentication(&quot;pqr@gmail.com&quot;,&quot;xyz@123&quot;);\r\n        \t}\r\n       });","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<p>While creating session override a method <code>PasswordAuthentication</code> and in that give username and password.</p>\n\n<pre><code>    Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() \n    {\n        protected PasswordAuthentication getPasswordAuthentication() \n        {\n            return new PasswordAuthentication(\"pqr@gmail.com\",\"xyz@123\");\n        }\n   });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1388041340,"creation_date":1388041340,"answer_id":20780617,"question_id":20780495,"body_markdown":"Try these\r\n\r\n    String login = &quot;myemailhere&quot;;\r\n    String pass = &quot;mypasshere&quot;;\r\n    properties.setProperty(&quot;mail.smtp.user&quot;, login);\r\n    properties.setProperty(&quot;mail.smtp.password&quot;, pass);\r\n    properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);      \r\n\r\n    Transport transport = session.getTransport(&quot;smtp&quot;);\r\n    transport.connect(null, login, pass);","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<p>Try these</p>\n\n<pre><code>String login = \"myemailhere\";\nString pass = \"mypasshere\";\nproperties.setProperty(\"mail.smtp.user\", login);\nproperties.setProperty(\"mail.smtp.password\", pass);\nproperties.setProperty(\"mail.smtp.auth\", \"true\");      \n\nTransport transport = session.getTransport(\"smtp\");\ntransport.connect(null, login, pass);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1570610,"reputation":442,"user_id":1458377,"display_name":"Sanjay Nagare"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1388041447,"creation_date":1388041447,"answer_id":20780637,"question_id":20780495,"body_markdown":"    properties.setProperty(&quot;mail.smtp.user&quot;, &quot;abc&quot;);\r\n    properties.setProperty(&quot;mail.smtp.password&quot;, &quot;xyz&quot;);\r\n    properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;); \r\nplease try using this ","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<pre><code>properties.setProperty(\"mail.smtp.user\", \"abc\");\nproperties.setProperty(\"mail.smtp.password\", \"xyz\");\nproperties.setProperty(\"mail.smtp.auth\", \"true\"); \n</code></pre>\n\n<p>please try using this </p>\n"},{"tags":[],"owner":{"account_id":2622997,"reputation":76,"user_id":2270628,"display_name":"Denis Sheremetov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1417117934,"creation_date":1417117934,"answer_id":27177903,"question_id":20780495,"body_markdown":"If it still doesn&#39;t work for you try this:\r\n\r\n\r\n    properties.setProperty(&quot;mail.smtps.ssl.enable&quot;, &quot;true&quot;);\r\n    properties.setProperty(&quot;mail.smtps.auth&quot;, &quot;true&quot;); ","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<p>If it still doesn't work for you try this:</p>\n\n<pre><code>properties.setProperty(\"mail.smtps.ssl.enable\", \"true\");\nproperties.setProperty(\"mail.smtps.auth\", \"true\"); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4409432,"reputation":1027,"user_id":3592811,"display_name":"Dias Abdraimov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1520409755,"creation_date":1520409755,"answer_id":49146860,"question_id":20780495,"body_markdown":"Try also\r\n\r\n    Transport.send(message, user, pass);\r\n\r\nI have found this in Transport class documentation\r\n\r\n&gt; Use the specified user name and password to authenticate to the mail\r\n&gt; server.\r\n\r\n    public static void send(Message msg, String user, String password) throws MessagingException {\r\n    \r\n    \tmsg.saveChanges();\r\n    \tsend0(msg, msg.getAllRecipients(), user, password);\r\n    }\r\n\r\nI am Using JavaMail v 1.6.1 and [MailTrap SMTP Server][1]\r\n\r\n\r\n  [1]: https://mailtrap.io/","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<p>Try also</p>\n\n<pre><code>Transport.send(message, user, pass);\n</code></pre>\n\n<p>I have found this in Transport class documentation</p>\n\n<blockquote>\n  <p>Use the specified user name and password to authenticate to the mail\n  server.</p>\n</blockquote>\n\n<pre><code>public static void send(Message msg, String user, String password) throws MessagingException {\n\n    msg.saveChanges();\n    send0(msg, msg.getAllRecipients(), user, password);\n}\n</code></pre>\n\n<p>I am Using JavaMail v 1.6.1 and <a href=\"https://mailtrap.io/\" rel=\"nofollow noreferrer\">MailTrap SMTP Server</a></p>\n"},{"tags":[],"owner":{"account_id":3270337,"reputation":2871,"user_id":2753863,"display_name":"Vladimir Vagaytsev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533637590,"creation_date":1520947153,"answer_id":49257256,"question_id":20780495,"body_markdown":"I faced the same issue recently. I tried to send an email over Gmail server with API key + password auth. `Transport.send(message)` didn&#39;t work for me, I debugged it and found out that it ignored session settings attached to the `message`.\r\n\r\nThis is now I did the email sending over SMTP Gmail server with auth and TLS. I used `com.sun.mail:javax.mail-1.6.1`\r\n\r\n        String host = &quot;your-email-server-host&quot;; // define your server host here\r\n        int port = 587; // standard port for TLS connection\r\n\r\n        // config session properties, here the SMTP protocol is used\r\n        Properties properties = new Properties();\r\n        properties.setProperty(&quot;mail.smtp.host&quot;, host);\r\n        properties.setProperty(&quot;mail.smtp.port&quot;, String.valueOf(port));\r\n        properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;); // enable auth\r\n        properties.setProperty(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;); // enable TLS\r\n\r\n        // get session instace baed on the settings defined above\r\n        Session session = Session.getInstance(properties);\r\n\r\n        // `prepareMessage` implementation is omitted, construct your own message here\r\n        MimeMessage mimeMessage = prepareMessage(email, session);\r\n\r\n        // your credentials       \r\n        String username = &quot;your-username@gmail.com&quot;; // or API key, I used API key\r\n        String password = &quot;your-password&quot;;\r\n\r\n        // get the transport instance from the freshly created session\r\n        // pass the valid protocol name, here the SMTP is used\r\n        Transport transport = session.getTransport(&quot;stmp&quot;);\r\n\r\n        // connect to the transport instance with your credentials\r\n        transport.connect(host, port, username,password);\r\n\r\n        // send the message\r\n        transport.sendMessage(mimeMessage, mimeMessage.getAllRecipients());\r\n\r\n","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<p>I faced the same issue recently. I tried to send an email over Gmail server with API key + password auth. <code>Transport.send(message)</code> didn't work for me, I debugged it and found out that it ignored session settings attached to the <code>message</code>.</p>\n\n<p>This is now I did the email sending over SMTP Gmail server with auth and TLS. I used <code>com.sun.mail:javax.mail-1.6.1</code></p>\n\n<pre><code>    String host = \"your-email-server-host\"; // define your server host here\n    int port = 587; // standard port for TLS connection\n\n    // config session properties, here the SMTP protocol is used\n    Properties properties = new Properties();\n    properties.setProperty(\"mail.smtp.host\", host);\n    properties.setProperty(\"mail.smtp.port\", String.valueOf(port));\n    properties.setProperty(\"mail.smtp.auth\", \"true\"); // enable auth\n    properties.setProperty(\"mail.smtp.starttls.enable\", \"true\"); // enable TLS\n\n    // get session instace baed on the settings defined above\n    Session session = Session.getInstance(properties);\n\n    // `prepareMessage` implementation is omitted, construct your own message here\n    MimeMessage mimeMessage = prepareMessage(email, session);\n\n    // your credentials       \n    String username = \"your-username@gmail.com\"; // or API key, I used API key\n    String password = \"your-password\";\n\n    // get the transport instance from the freshly created session\n    // pass the valid protocol name, here the SMTP is used\n    Transport transport = session.getTransport(\"stmp\");\n\n    // connect to the transport instance with your credentials\n    transport.connect(host, port, username,password);\n\n    // send the message\n    transport.sendMessage(mimeMessage, mimeMessage.getAllRecipients());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3091695,"reputation":151,"user_id":2617666,"display_name":"Rishi Singhal"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1541121970,"creation_date":1541084792,"answer_id":53103972,"question_id":20780495,"body_markdown":"This works for me:\r\n\r\n    final Properties properties = System.getProperties();\r\n\r\n\t// Setting up mail server\r\n\tproperties.setProperty(&quot;mail.smtp.host&quot;, EMAIL_SMTP_HOST);\r\n\tproperties.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n\tproperties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n\r\n\tSession session = Session.getInstance(properties, new Authenticator() {\r\n\t\t@Override\r\n\t\tprotected PasswordAuthentication getPasswordAuthentication() {\r\n\t\t\treturn new PasswordAuthentication(EMAIL_USERNAME,\r\n\t\t\t\t\tEMAIL_PASSWORD);\r\n\t\t}\r\n\t});\r\n\tsession.setDebug(true);","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<p>This works for me:</p>\n\n<pre><code>final Properties properties = System.getProperties();\n\n// Setting up mail server\nproperties.setProperty(\"mail.smtp.host\", EMAIL_SMTP_HOST);\nproperties.put(\"mail.smtp.starttls.enable\", \"true\");\nproperties.put(\"mail.smtp.auth\", \"true\");\n\nSession session = Session.getInstance(properties, new Authenticator() {\n    @Override\n    protected PasswordAuthentication getPasswordAuthentication() {\n        return new PasswordAuthentication(EMAIL_USERNAME,\n                EMAIL_PASSWORD);\n    }\n});\nsession.setDebug(true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22016368,"reputation":1,"user_id":16285793,"display_name":"xinping"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624331106,"creation_date":1624331106,"answer_id":68077023,"question_id":20780495,"body_markdown":"    properties.setProperty(&quot;mail.smtp.user&quot;, &quot;abc&quot;);\r\n    properties.setProperty(&quot;mail.smtp.password&quot;, &quot;xyz&quot;);\r\n    properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n\r\nit worked, fix my problem\r\n\r\n","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<pre><code>properties.setProperty(&quot;mail.smtp.user&quot;, &quot;abc&quot;);\nproperties.setProperty(&quot;mail.smtp.password&quot;, &quot;xyz&quot;);\nproperties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n</code></pre>\n<p>it worked, fix my problem</p>\n"},{"tags":[],"owner":{"account_id":19863584,"reputation":301,"user_id":14551409,"display_name":"Eduard Frankford"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678130783,"creation_date":1678130783,"answer_id":75655014,"question_id":20780495,"body_markdown":"For me to make it work with a JHipster application I had to implement my custom JavaMailSenderImpl() because via properties did not work.\r\n\r\nInside the MailService Class create a method:\r\n\r\n    public JavaMailSender getJavaMailSender() {\r\n    JavaMailSenderImpl mailSender = new JavaMailSenderImpl();\r\n    mailSender.setHost(&quot;&quot;);\r\n    mailSender.setPort(587);\r\n\r\n    mailSender.setUsername(&quot;&quot;);\r\n    mailSender.setPassword(&quot;&quot;);\r\n\r\n    Properties props = mailSender.getJavaMailProperties();\r\n    props.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\r\n    props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n    props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n    props.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n\r\n    return mailSender;}\r\n\r\nThen you can use this implementation and go on as normal:\r\n\r\n    JavaMailSender javaMailSender = getJavaMailSender();\r\n    MimeMessage mimeMessage = javaMailSender.createMimeMessage(); \r\n\r\nI think the reason why I had to do this was that my application connected via VPN to the server and there some things got mixed up.","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<p>For me to make it work with a JHipster application I had to implement my custom JavaMailSenderImpl() because via properties did not work.</p>\n<p>Inside the MailService Class create a method:</p>\n<pre><code>public JavaMailSender getJavaMailSender() {\nJavaMailSenderImpl mailSender = new JavaMailSenderImpl();\nmailSender.setHost(&quot;&quot;);\nmailSender.setPort(587);\n\nmailSender.setUsername(&quot;&quot;);\nmailSender.setPassword(&quot;&quot;);\n\nProperties props = mailSender.getJavaMailProperties();\nprops.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\nprops.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\nprops.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\nprops.put(&quot;mail.debug&quot;, &quot;true&quot;);\n\nreturn mailSender;}\n</code></pre>\n<p>Then you can use this implementation and go on as normal:</p>\n<pre><code>JavaMailSender javaMailSender = getJavaMailSender();\nMimeMessage mimeMessage = javaMailSender.createMimeMessage(); \n</code></pre>\n<p>I think the reason why I had to do this was that my application connected via VPN to the server and there some things got mixed up.</p>\n"}],"owner":{"account_id":3238984,"reputation":585,"user_id":2732482,"accept_rate":0,"display_name":"Malik"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45182,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":9,"score":2,"last_activity_date":1678130783,"creation_date":1388040758,"question_id":20780495,"body_markdown":"I am trying to send an Email from my Java Application to any particular email address.\r\nI am using Java Mail API but Unfortunately i am getting SMTPSendFailedException error. Can any body tell me where i am doing a mistake. Here is my code\r\n\r\n    import java.util.*;\r\n    \r\n    import javax.mail.*;\r\n    import javax.mail.internet.*;\r\n    import javax.activation.*;\r\n    \r\n    //import SeconMail.Authenticator;\r\n    \r\n    public class SendMail\r\n    {\r\n    \t\r\n       public static void main(String [] args)\r\n       {    \r\n    \t  \r\n          // Recipient&#39;s email ID needs to be mentioned.\r\n          String to = &quot;to@gmail.com&quot;;\r\n    \r\n          // Sender&#39;s email ID needs to be mentioned\r\n          String from = &quot;from@expertflow.com&quot;;\r\n    \r\n          // Assuming you are sending email from localhost\r\n          String host = &quot;smtp.gmail.com&quot;;\r\n    \r\n          // Get system properties\r\n          Properties properties = System.getProperties();\r\n    \r\n          // Setup mail server\r\n      \r\n          properties.setProperty(&quot;mail.smtp.host&quot;, host);\r\n    \r\n          \r\n          properties.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n    \r\n          properties.put(&quot;mail.smtp.auth&quot;, &quot;false&quot;);\r\n          // Get the default Session object.\r\n          Session session = Session.getDefaultInstance(properties);\r\n          session.setDebug(true);\r\n    \r\n          try{\r\n             // Create a default MimeMessage object.\r\n             MimeMessage message = new MimeMessage(session);\r\n    \r\n             // Set From: header field of the header.\r\n             message.setFrom(new InternetAddress(from));\r\n    \r\n             // Set To: header field of the header.\r\n             message.addRecipient(Message.RecipientType.TO,\r\n                                      new InternetAddress(to));\r\n    \r\n             // Set Subject: header field\r\n             message.setSubject(&quot;This is the Subject Line!&quot;);\r\n    \r\n             // Now set the actual message\r\n             message.setText(&quot;This is actual message&quot;);\r\n    \r\n             // Send message\r\n             Transport.send(message);\r\n             System.out.println(&quot;Sent message successfully....&quot;);\r\n          }catch (MessagingException mex) {\r\n             mex.printStackTrace();\r\n          }\r\n       }\r\n    }\r\n\r\n","title":"com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required","body":"<p>I am trying to send an Email from my Java Application to any particular email address.\nI am using Java Mail API but Unfortunately i am getting SMTPSendFailedException error. Can any body tell me where i am doing a mistake. Here is my code</p>\n\n<pre><code>import java.util.*;\n\nimport javax.mail.*;\nimport javax.mail.internet.*;\nimport javax.activation.*;\n\n//import SeconMail.Authenticator;\n\npublic class SendMail\n{\n\n   public static void main(String [] args)\n   {    \n\n      // Recipient's email ID needs to be mentioned.\n      String to = \"to@gmail.com\";\n\n      // Sender's email ID needs to be mentioned\n      String from = \"from@expertflow.com\";\n\n      // Assuming you are sending email from localhost\n      String host = \"smtp.gmail.com\";\n\n      // Get system properties\n      Properties properties = System.getProperties();\n\n      // Setup mail server\n\n      properties.setProperty(\"mail.smtp.host\", host);\n\n\n      properties.put(\"mail.smtp.starttls.enable\", \"true\");\n\n      properties.put(\"mail.smtp.auth\", \"false\");\n      // Get the default Session object.\n      Session session = Session.getDefaultInstance(properties);\n      session.setDebug(true);\n\n      try{\n         // Create a default MimeMessage object.\n         MimeMessage message = new MimeMessage(session);\n\n         // Set From: header field of the header.\n         message.setFrom(new InternetAddress(from));\n\n         // Set To: header field of the header.\n         message.addRecipient(Message.RecipientType.TO,\n                                  new InternetAddress(to));\n\n         // Set Subject: header field\n         message.setSubject(\"This is the Subject Line!\");\n\n         // Now set the actual message\n         message.setText(\"This is actual message\");\n\n         // Send message\n         Transport.send(message);\n         System.out.println(\"Sent message successfully....\");\n      }catch (MessagingException mex) {\n         mex.printStackTrace();\n      }\n   }\n}\n</code></pre>\n"},{"tags":["java","html","deployment","server","cpanel"],"owner":{"account_id":19799707,"reputation":1,"user_id":21344573,"display_name":"Uchavero"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678130463,"creation_date":1678130463,"question_id":75654973,"body_markdown":"I have a problem deploying my JSP(war) project in the cpanel of my web domain. the login link opens it: http://www.miaventon.com.mx/app/login.jsp\r\nbut when I try to enter with the username and password, the action (servlet) sends it to me as 404 as if my servlet did not exist, I already added an htaccess in public html but it remains the same\r\n\r\nhtaccess: \r\n\r\n```\r\nSetHandler jakarta-servlet\r\nSetEnv JK_WORKER_NAME ajp13\r\nRewriteEngine On  \r\n  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]\r\n  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d\r\n  RewriteRule ^ - [L]\r\n\r\n  RewriteRule ^ /app/login.jsp [L]\r\n```\r\n\r\n\r\nhe buscado en videos e ingresado ciertas lineas de c&#243;digo pero no, tambi&#233;n he ingreso la version con glasfish y con tomcat y no","title":"deploy a JSP project (war) in cpanel","body":"<p>I have a problem deploying my JSP(war) project in the cpanel of my web domain. the login link opens it: <a href=\"http://www.miaventon.com.mx/app/login.jsp\" rel=\"nofollow noreferrer\">http://www.miaventon.com.mx/app/login.jsp</a>\nbut when I try to enter with the username and password, the action (servlet) sends it to me as 404 as if my servlet did not exist, I already added an htaccess in public html but it remains the same</p>\n<p>htaccess:</p>\n<pre><code>SetHandler jakarta-servlet\nSetEnv JK_WORKER_NAME ajp13\nRewriteEngine On  \n  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]\n  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d\n  RewriteRule ^ - [L]\n\n  RewriteRule ^ /app/login.jsp [L]\n</code></pre>\n<p>he buscado en videos e ingresado ciertas lineas de cdigo pero no, tambin he ingreso la version con glasfish y con tomcat y no</p>\n"},{"tags":["java","web-services","soap","wsdl","saaj"],"answers":[{"tags":[],"owner":{"account_id":5785597,"reputation":9456,"user_id":4564945,"display_name":"Necreaux"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678130405,"creation_date":1603462067,"answer_id":64501562,"question_id":28604395,"body_markdown":"This is a bug in SAAJ, the Java SOAP library being used.\r\n\r\nIn an error response, the SOAP &quot;faultcode&quot; value is supposed to be formatted in a qname (prefix:localName) format. Older versions of SAAJ enforce this too strictly, giving this error if the prefix is blank. Upgrading to 1.3.16 fixes this issue.\r\n\r\nSee: https://github.com/javaee/metro-saaj/issues/47","title":"JAX-WS: com.sun.xml.messaging.saaj.SOAPExceptionImpl: No NamespaceURI, SOAP requires faultcode content to be a QName","body":"<p>This is a bug in SAAJ, the Java SOAP library being used.</p>\n<p>In an error response, the SOAP &quot;faultcode&quot; value is supposed to be formatted in a qname (prefix:localName) format. Older versions of SAAJ enforce this too strictly, giving this error if the prefix is blank. Upgrading to 1.3.16 fixes this issue.</p>\n<p>See: <a href=\"https://github.com/javaee/metro-saaj/issues/47\" rel=\"nofollow noreferrer\">https://github.com/javaee/metro-saaj/issues/47</a></p>\n"}],"owner":{"account_id":1664153,"reputation":2331,"user_id":1531904,"accept_rate":62,"display_name":"Mary Ryllo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":867,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1678130405,"creation_date":1424343006,"question_id":28604395,"body_markdown":"I&#39;m performing a SOAP request via SSL. One request is working, but another request for same SOAP service fails with this exception: \r\n\r\n    java.lang.reflect.UndeclaredThrowableException\r\n    \tcom.sun.proxy.$Proxy980.initPayment2(Unknown Source)\r\n    \tcom.mobimoney.emulator.rostelecom.utils.LogicImpl.executeInitPayment2(LogicImpl.java:76)\r\n    \tcom.mobimoney.emulator.rostelecom.servlets.InitPaymentPageServlet.execInitPayment(InitPaymentPageServlet.java:56)\r\n    \tcom.mobimoney.emulator.rostelecom.servlets.InitPaymentPageServlet.service(InitPaymentPageServlet.java:24)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n    \torg.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\r\n    com.sun.xml.messaging.saaj.SOAPExceptionImpl: No NamespaceURI, SOAP requires faultcode content to be a QName\r\n    \tcom.sun.xml.messaging.saaj.soap.impl.FaultImpl.setFaultCode(FaultImpl.java:155)\r\n    \tcom.sun.xml.messaging.saaj.soap.impl.FaultImpl.setFaultCode(FaultImpl.java:171)\r\n    \torg.apache.cxf.jaxws.JaxWsClientProxy.createSoapFault(JaxWsClientProxy.java:208)\r\n    \torg.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:142)\r\n    \tcom.sun.proxy.$Proxy980.initPayment2(Unknown Source)\r\n    \tcom.mobimoney.emulator.rostelecom.utils.LogicImpl.executeInitPayment2(LogicImpl.java:76)\r\n    \tcom.mobimoney.emulator.rostelecom.servlets.InitPaymentPageServlet.execInitPayment(InitPaymentPageServlet.java:56)\r\n    \tcom.mobimoney.emulator.rostelecom.servlets.InitPaymentPageServlet.service(InitPaymentPageServlet.java:24)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n    \torg.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\r\n\r\nI can&#39;t understand what&#39;s going wrong. I&#39;ve Googled this exception and didn&#39;t find anything useful.\r\nMaybe this is a problem in WSDL or how I generated classes from WSDL? ","title":"JAX-WS: com.sun.xml.messaging.saaj.SOAPExceptionImpl: No NamespaceURI, SOAP requires faultcode content to be a QName","body":"<p>I'm performing a SOAP request via SSL. One request is working, but another request for same SOAP service fails with this exception:</p>\n<pre><code>java.lang.reflect.UndeclaredThrowableException\n    com.sun.proxy.$Proxy980.initPayment2(Unknown Source)\n    com.mobimoney.emulator.rostelecom.utils.LogicImpl.executeInitPayment2(LogicImpl.java:76)\n    com.mobimoney.emulator.rostelecom.servlets.InitPaymentPageServlet.execInitPayment(InitPaymentPageServlet.java:56)\n    com.mobimoney.emulator.rostelecom.servlets.InitPaymentPageServlet.service(InitPaymentPageServlet.java:24)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\ncom.sun.xml.messaging.saaj.SOAPExceptionImpl: No NamespaceURI, SOAP requires faultcode content to be a QName\n    com.sun.xml.messaging.saaj.soap.impl.FaultImpl.setFaultCode(FaultImpl.java:155)\n    com.sun.xml.messaging.saaj.soap.impl.FaultImpl.setFaultCode(FaultImpl.java:171)\n    org.apache.cxf.jaxws.JaxWsClientProxy.createSoapFault(JaxWsClientProxy.java:208)\n    org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:142)\n    com.sun.proxy.$Proxy980.initPayment2(Unknown Source)\n    com.mobimoney.emulator.rostelecom.utils.LogicImpl.executeInitPayment2(LogicImpl.java:76)\n    com.mobimoney.emulator.rostelecom.servlets.InitPaymentPageServlet.execInitPayment(InitPaymentPageServlet.java:56)\n    com.mobimoney.emulator.rostelecom.servlets.InitPaymentPageServlet.service(InitPaymentPageServlet.java:24)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\n</code></pre>\n<p>I can't understand what's going wrong. I've Googled this exception and didn't find anything useful.\nMaybe this is a problem in WSDL or how I generated classes from WSDL?</p>\n"},{"tags":["java","spring-data"],"owner":{"account_id":27812037,"reputation":1,"user_id":21234250,"display_name":"api"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678130231,"creation_date":1678130185,"question_id":75654936,"body_markdown":"I want to do an unpivot on an oracle table.\r\n\r\n```\r\nCREATE TABLE rap(\r\n    id NUMBER,\r\n    name VARCHAR2(50) NOT NULL,\r\n    ceta VARCHAR2(50) NOT NULL,\r\n    cod NUMBER NOT NULL,\r\n    PRIMARY KEY(id)\r\n); \r\nINSERT INTO rap (id, name, ceta, cod) VALUES (1, &#39;Paul&#39;, &#39;eng&#39;, 122);\r\n```\r\n\r\nI have this table rap :\r\n```\r\nname | ceta | cod\r\n-----------------\r\nPaul | eng  | 122\r\n```\r\n\r\nWhen I run the select, \r\n```\r\n&quot;SELECT attribute, value FROM (select TO_CHAR(NAME) NAME, TO_CHAR(CETA) CETA, TO_CHAR(COD) COD from rap) UNPIVOT(value FOR attribute IN (name, ceta, cod))&quot;\r\n```\r\n\r\nin sql development tool I get:\r\n\r\n```\r\nATTRIBUTE | VALUE\r\n-----------------\r\nname      | Paul\r\nceta      | eng\r\ncod       | 122\r\n```\r\n\r\n\r\n\r\n\r\nI am having a problem in getting the result of this unpivot select in java.\r\nIn java I have this code\r\n\r\n```\r\n@Repository\r\npublic class DaoImpl {\r\n\r\n  @PersistenceContext\r\n  EntityManager entityManager;\r\n\r\n  public void findAll() {\r\n\tQuery query2 = entityManager.createNativeQuery(\r\n\t\t&quot;SELECT attribute, value FROM (select TO_CHAR(NAME) NAME, TO_CHAR(CETA) CETA, TO_CHAR(COD) COD from rap) UNPIVOT(value FOR attribute IN (name, ceta, cod))&quot;\r\n    );\r\n\tList&lt;Object[]&gt; result2 = query2.getResultList();\r\n  }\r\n}\r\n```\r\n\r\nThe size of result2 is 0 after running it. The connecttion with database is ok, I did other query that is working, \r\nI see that the problem is with this UNPIVOT function. Do I need to do something special for it, I noticed that if I am creating a view over this select it will work but I do not want to have a view.\r\n\r\nThanks","title":"does spring data support function unpivot table?","body":"<p>I want to do an unpivot on an oracle table.</p>\n<pre><code>CREATE TABLE rap(\n    id NUMBER,\n    name VARCHAR2(50) NOT NULL,\n    ceta VARCHAR2(50) NOT NULL,\n    cod NUMBER NOT NULL,\n    PRIMARY KEY(id)\n); \nINSERT INTO rap (id, name, ceta, cod) VALUES (1, 'Paul', 'eng', 122);\n</code></pre>\n<p>I have this table rap :</p>\n<pre><code>name | ceta | cod\n-----------------\nPaul | eng  | 122\n</code></pre>\n<p>When I run the select,</p>\n<pre><code>&quot;SELECT attribute, value FROM (select TO_CHAR(NAME) NAME, TO_CHAR(CETA) CETA, TO_CHAR(COD) COD from rap) UNPIVOT(value FOR attribute IN (name, ceta, cod))&quot;\n</code></pre>\n<p>in sql development tool I get:</p>\n<pre><code>ATTRIBUTE | VALUE\n-----------------\nname      | Paul\nceta      | eng\ncod       | 122\n</code></pre>\n<p>I am having a problem in getting the result of this unpivot select in java.\nIn java I have this code</p>\n<pre><code>@Repository\npublic class DaoImpl {\n\n  @PersistenceContext\n  EntityManager entityManager;\n\n  public void findAll() {\n    Query query2 = entityManager.createNativeQuery(\n        &quot;SELECT attribute, value FROM (select TO_CHAR(NAME) NAME, TO_CHAR(CETA) CETA, TO_CHAR(COD) COD from rap) UNPIVOT(value FOR attribute IN (name, ceta, cod))&quot;\n    );\n    List&lt;Object[]&gt; result2 = query2.getResultList();\n  }\n}\n</code></pre>\n<p>The size of result2 is 0 after running it. The connecttion with database is ok, I did other query that is working,\nI see that the problem is with this UNPIVOT function. Do I need to do something special for it, I noticed that if I am creating a view over this select it will work but I do not want to have a view.</p>\n<p>Thanks</p>\n"},{"tags":["java","android","image","animation","picasso"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678009999,"post_id":75640755,"comment_id":133447062,"body_markdown":"I would say that you are simply replacing the painted components image by replacing the filename source that is loaded by the component itself from one of its methods , rather than painting it onto the GUI component from a java.awt.image.BufferedImage g Graphics reference handing the pixel values to the components g Graphics reference to paint. In any case it appears the image may not be fitting the size or shape of the screen it is displayed, causing some feature of the software to stall while resizing.","body":"I would say that you are simply replacing the painted components image by replacing the filename source that is loaded by the component itself from one of its methods , rather than painting it onto the GUI component from a java.awt.image.BufferedImage g Graphics reference handing the pixel values to the components g Graphics reference to paint. In any case it appears the image may not be fitting the size or shape of the screen it is displayed, causing some feature of the software to stall while resizing."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678010410,"post_id":75640755,"comment_id":133447120,"body_markdown":"Why not build a system from javax.imageio.IIOImage , resize all images to the same size if they are not the same and obtain the Raster for the image and keep it separate linked to painting the GUI screen, and simply load the chosen or next image into a second Raster and when it is time to change replace the main Raster for the gui component with the second one and repaint the screen. Some of that appears network speed over internet.","body":"Why not build a system from javax.imageio.IIOImage , resize all images to the same size if they are not the same and obtain the Raster for the image and keep it separate linked to painting the GUI screen, and simply load the chosen or next image into a second Raster and when it is time to change replace the main Raster for the gui component with the second one and repaint the screen. Some of that appears network speed over internet."},{"owner":{"display_name":"user19643881"},"score":0,"creation_date":1678093965,"post_id":75640755,"comment_id":133459977,"body_markdown":"@Samuel Marchant I am a newbie, and could not realize your solution. I could just try to implement it if you post your soulution as an answer. The app is going to include the option to download all the images from the server and work with no connection, but they want that the app also works without having the images stored in the internal memory. For the moment the code in my answer works. The only problem is it takes 10 seconds in my Samsung Galaxy A50 to load the 72 images from the server.","body":"@Samuel Marchant I am a newbie, and could not realize your solution. I could just try to implement it if you post your soulution as an answer. The app is going to include the option to download all the images from the server and work with no connection, but they want that the app also works without having the images stored in the internal memory. For the moment the code in my answer works. The only problem is it takes 10 seconds in my Samsung Galaxy A50 to load the 72 images from the server."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678116622,"post_id":75640755,"comment_id":133466455,"body_markdown":"Then make 72 separate classes with java.net.HttpURLConnection   and put them on an array to download the images and in the class that has the controlling code loop over these classes to initialize them  in the constructor so they will somewhat concurrently get downloaded.","body":"Then make 72 separate classes with java.net.HttpURLConnection   and put them on an array to download the images and in the class that has the controlling code loop over these classes to initialize them  in the constructor so they will somewhat concurrently get downloaded."}],"answers":[{"tags":[],"owner":{"display_name":"user19643881"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678129936,"creation_date":1678089704,"answer_id":75648352,"question_id":75640755,"body_markdown":"The solution I have found that produces the expected result is to download the 72 images at the start of the activity.\r\n\r\nIn this way the images are available and load quickly and it seems that the microscope stage rotates.\r\n\r\nThe only drawback is that the user has to wait a few seconds to load the activity.\r\n\r\n    public class FichaOpacos extends AppCompatActivity {\r\n    private String urlParalelos;\r\n    private ImageView platina;\r\n    private ArrayList&lt;Drawable&gt; imagenes;\r\n    private ProgressDialog progress;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_ficha_opacos);\r\n        Intent intent = getIntent();\r\n        String id = intent.getStringExtra(&quot;id&quot;);\r\n        Database myDb = new Database(this);\r\n        String mineral = myDb.getMineral(id);\r\n        platina = (ImageView) findViewById(R.id.platina);\r\n        urlParalelos = myDb.getURL1(mineral);\r\n        myDb.closeDatabase();\r\n        String urlInicialParalelos = urlParalelos + &quot;1.jpg&quot;;\r\n        Picasso.get().load(urlInicialParalelos).into(platina);\r\n        SeekBar seekBar = findViewById(R.id.seek);\r\n        seekBar.setProgress(0);\r\n        seekBar.incrementProgressBy(1);\r\n        seekBar.setMax(71);\r\n        imagenes = new ArrayList&lt;&gt;();\r\n        progress = new ProgressDialog(this);\r\n        progress.setMessage(&quot;Loading images....&quot;);\r\n        progress.show();\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //doing long task\r\n                try {\r\n                    for(int i= 0 ;i &lt; 72; i++) {\r\n                        imagenes.add(drawableFromUrl(urlParalelos + String.valueOf(i + 1) + &quot;.jpg&quot;));\r\n                        float tantoporuno = (float)(i+1)/(float)72;\r\n                        int porcentaje = Math.round(tantoporuno*100);\r\n                        progress.setMessage(&quot;Loading...&quot; + String.valueOf(porcentaje) + &quot;%&quot;);\r\n                        if (i==71) {\r\n                            progress.dismiss();\r\n                        }\r\n                    }\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }).start();\r\n        seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n            @Override\r\n            public void onStopTrackingTouch(SeekBar seekBar) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n\r\n            @Override\r\n            public void onStartTrackingTouch(SeekBar seekBar) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n\r\n            @Override\r\n            public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {\r\n                new Thread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        platina.setImageDrawable(imagenes.get(progress));\r\n                    }\r\n                }).start();\r\n            }\r\n        });\r\n    }\r\n    public static Drawable drawableFromUrl(String url) throws IOException {\r\n        Bitmap x;\r\n        HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();\r\n        connection.connect();\r\n        InputStream input = connection.getInputStream();\r\n        x = BitmapFactory.decodeStream(input);\r\n        return new BitmapDrawable(Resources.getSystem(), x);\r\n    }\r\n    }","title":"How to upload images from a server and switch images with a seekbar without the previous image disappearing?","body":"<p>The solution I have found that produces the expected result is to download the 72 images at the start of the activity.</p>\n<p>In this way the images are available and load quickly and it seems that the microscope stage rotates.</p>\n<p>The only drawback is that the user has to wait a few seconds to load the activity.</p>\n<pre><code>public class FichaOpacos extends AppCompatActivity {\nprivate String urlParalelos;\nprivate ImageView platina;\nprivate ArrayList&lt;Drawable&gt; imagenes;\nprivate ProgressDialog progress;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_ficha_opacos);\n    Intent intent = getIntent();\n    String id = intent.getStringExtra(&quot;id&quot;);\n    Database myDb = new Database(this);\n    String mineral = myDb.getMineral(id);\n    platina = (ImageView) findViewById(R.id.platina);\n    urlParalelos = myDb.getURL1(mineral);\n    myDb.closeDatabase();\n    String urlInicialParalelos = urlParalelos + &quot;1.jpg&quot;;\n    Picasso.get().load(urlInicialParalelos).into(platina);\n    SeekBar seekBar = findViewById(R.id.seek);\n    seekBar.setProgress(0);\n    seekBar.incrementProgressBy(1);\n    seekBar.setMax(71);\n    imagenes = new ArrayList&lt;&gt;();\n    progress = new ProgressDialog(this);\n    progress.setMessage(&quot;Loading images....&quot;);\n    progress.show();\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            //doing long task\n            try {\n                for(int i= 0 ;i &lt; 72; i++) {\n                    imagenes.add(drawableFromUrl(urlParalelos + String.valueOf(i + 1) + &quot;.jpg&quot;));\n                    float tantoporuno = (float)(i+1)/(float)72;\n                    int porcentaje = Math.round(tantoporuno*100);\n                    progress.setMessage(&quot;Loading...&quot; + String.valueOf(porcentaje) + &quot;%&quot;);\n                    if (i==71) {\n                        progress.dismiss();\n                    }\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }).start();\n    seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n        @Override\n        public void onStopTrackingTouch(SeekBar seekBar) {\n            // TODO Auto-generated method stub\n        }\n\n        @Override\n        public void onStartTrackingTouch(SeekBar seekBar) {\n            // TODO Auto-generated method stub\n        }\n\n        @Override\n        public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {\n            new Thread(new Runnable() {\n                @Override\n                public void run() {\n                    platina.setImageDrawable(imagenes.get(progress));\n                }\n            }).start();\n        }\n    });\n}\npublic static Drawable drawableFromUrl(String url) throws IOException {\n    Bitmap x;\n    HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();\n    connection.connect();\n    InputStream input = connection.getInputStream();\n    x = BitmapFactory.decodeStream(input);\n    return new BitmapDrawable(Resources.getSystem(), x);\n}\n}\n</code></pre>\n"}],"owner":{"display_name":"user19643881"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678129936,"creation_date":1678001344,"question_id":75640755,"body_markdown":"I have been commissioned by the Autonomous University of Barcelona to make an app that shows images of the microscope stage of a mineral sample.\r\n\r\nSpecifically I have photos of the same sample spaced by a five degree turn (72 images). \r\n[Downloaded from the AUB website][1].\r\n\r\nBelow the image there has to be a seekbar and the images have to be loaded as it moves, giving the impression that the microscope stage is rotating.\r\n\r\nI have tried it with Picasso:\r\n\r\n    public class FichaOpacos extends AppCompatActivity {\r\n    private String urlParalelos;\r\n    private ImageView platina;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_ficha_opacos);\r\n        Intent intent = getIntent();\r\n        String id = intent.getStringExtra(&quot;id&quot;);\r\n        Database myDb = new Database(this);\r\n        String mineral = myDb.getMineral(id);\r\n        platina = (ImageView) findViewById(R.id.platina);\r\n        urlParalelos = myDb.getURL1(mineral);\r\n        myDb.closeDatabase();\r\n        String urlInicialParalelos= urlParalelos+ &quot;1.jpg&quot;;\r\n        Picasso.get().load(urlInicialParalelos).into(platina);\r\n        SeekBar seekBar = findViewById(R.id.seek);\r\n        seekBar.setProgress(0);\r\n        seekBar.incrementProgressBy(1);\r\n        seekBar.setMax(71);\r\n        seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n\r\n            @Override\r\n            public void onStopTrackingTouch(SeekBar seekBar) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n\r\n            @Override\r\n            public void onStartTrackingTouch(SeekBar seekBar) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n\r\n            @Override\r\n            public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {\r\n                // TODO Auto-generated method stub\r\n                String urlFinalParalelos = urlParalelos+ String.valueOf(progress+1) + &quot;.jpg&quot;;\r\n                Picasso.get().load(urlFinalParalelos).into(platina);\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n    }\r\n\r\nThe problem is that in the transition between images the image disappears and then after milliseconds the next one appears, not giving the impression that you are looking at a rotating microscope stage.\r\n\r\n[![introducir la descripci&#243;n de la imagen aqu&#237;][2]][2]\r\n\r\nHow could I get the desired effect?\r\n\r\nI imagine I need an animation that keeps the previous image until the next image is displayed, but I have never worked with animations and would not know how to implement it.\r\n\r\n  [1]: https://ddd.uab.cat/record/190567?ln=ca\r\n  [2]: https://i.stack.imgur.com/TVfKN.gif","title":"How to upload images from a server and switch images with a seekbar without the previous image disappearing?","body":"<p>I have been commissioned by the Autonomous University of Barcelona to make an app that shows images of the microscope stage of a mineral sample.</p>\n<p>Specifically I have photos of the same sample spaced by a five degree turn (72 images).\n<a href=\"https://ddd.uab.cat/record/190567?ln=ca\" rel=\"nofollow noreferrer\">Downloaded from the AUB website</a>.</p>\n<p>Below the image there has to be a seekbar and the images have to be loaded as it moves, giving the impression that the microscope stage is rotating.</p>\n<p>I have tried it with Picasso:</p>\n<pre><code>public class FichaOpacos extends AppCompatActivity {\nprivate String urlParalelos;\nprivate ImageView platina;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_ficha_opacos);\n    Intent intent = getIntent();\n    String id = intent.getStringExtra(&quot;id&quot;);\n    Database myDb = new Database(this);\n    String mineral = myDb.getMineral(id);\n    platina = (ImageView) findViewById(R.id.platina);\n    urlParalelos = myDb.getURL1(mineral);\n    myDb.closeDatabase();\n    String urlInicialParalelos= urlParalelos+ &quot;1.jpg&quot;;\n    Picasso.get().load(urlInicialParalelos).into(platina);\n    SeekBar seekBar = findViewById(R.id.seek);\n    seekBar.setProgress(0);\n    seekBar.incrementProgressBy(1);\n    seekBar.setMax(71);\n    seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n\n        @Override\n        public void onStopTrackingTouch(SeekBar seekBar) {\n            // TODO Auto-generated method stub\n        }\n\n        @Override\n        public void onStartTrackingTouch(SeekBar seekBar) {\n            // TODO Auto-generated method stub\n        }\n\n        @Override\n        public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {\n            // TODO Auto-generated method stub\n            String urlFinalParalelos = urlParalelos+ String.valueOf(progress+1) + &quot;.jpg&quot;;\n            Picasso.get().load(urlFinalParalelos).into(platina);\n\n        }\n    });\n\n\n}\n}\n</code></pre>\n<p>The problem is that in the transition between images the image disappears and then after milliseconds the next one appears, not giving the impression that you are looking at a rotating microscope stage.</p>\n<p><a href=\"https://i.stack.imgur.com/TVfKN.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TVfKN.gif\" alt=\"introducir la descripcin de la imagen aqu\" /></a></p>\n<p>How could I get the desired effect?</p>\n<p>I imagine I need an animation that keeps the previous image until the next image is displayed, but I have never worked with animations and would not know how to implement it.</p>\n"},{"tags":["java","spring","spring-security","oauth-2.0","openid-connect"],"answers":[{"comments":[{"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1663246425,"post_id":73725031,"comment_id":130197268,"body_markdown":"Hello, thank you for your response. Yes, I am aware of this data in Idtoken, but I would like to fetch information about current user in resource server. For instance, we have endpoints like `update-portfolio` without any aditional ids in path. So in this case we find out who is current user and we update his portfolio. There are more use-cases like this in our app.","body":"Hello, thank you for your response. Yes, I am aware of this data in Idtoken, but I would like to fetch information about current user in resource server. For instance, we have endpoints like <code>update-portfolio</code> without any aditional ids in path. So in this case we find out who is current user and we update his portfolio. There are more use-cases like this in our app."},{"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"score":0,"creation_date":1663302164,"post_id":73725031,"comment_id":130211806,"body_markdown":"yea great then whats holding you back? you can access these information via SecurityContextHolder, get the Authentication object that holds the Principal data, the Principal object should hold the data you need","body":"yea great then whats holding you back? you can access these information via SecurityContextHolder, get the Authentication object that holds the Principal data, the Principal object should hold the data you need"},{"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1663328520,"post_id":73725031,"comment_id":130219183,"body_markdown":"I tried add principal as Controller parameter, but it contains only data parsed from JWT, it doesn&#39;t fetch data from userInfo endpoint automatically. So I didn&#39;t know how to do that. I thought in previous version of spring resource server, was userInfo endpoint possible set in properties but now it isn&#39;t","body":"I tried add principal as Controller parameter, but it contains only data parsed from JWT, it doesn&#39;t fetch data from userInfo endpoint automatically. So I didn&#39;t know how to do that. I thought in previous version of spring resource server, was userInfo endpoint possible set in properties but now it isn&#39;t"},{"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"score":1,"creation_date":1663817555,"post_id":73725031,"comment_id":130329785,"body_markdown":"can you show us the code of your Controller? I looked into the Auth0 documentation and it quite clear on how to do this have you tried following the [documentation](https://auth0.com/docs/quickstart/webapp/java-spring-boot/01-login#show-user-profile-information)?","body":"can you show us the code of your Controller? I looked into the Auth0 documentation and it quite clear on how to do this have you tried following the <a href=\"https://auth0.com/docs/quickstart/webapp/java-spring-boot/01-login#show-user-profile-information\" rel=\"nofollow noreferrer\">documentation</a>?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1664045987,"post_id":73725031,"comment_id":130383623,"body_markdown":"I believe that data from the ID token is available in client applications, not resource-servers. In the later, you only have the access-token. You should define an Auth0 &quot;rule&quot; to enrich access-tokens with the data you need and you&#39;ll find it in spring security-context (`JwtAuthenticationToken` instance or whatever else you define with `http.oauth2ResourceServer().jwt().jwtAuthenticationConverter(...)`. See my answer for details.","body":"I believe that data from the ID token is available in client applications, not resource-servers. In the later, you only have the access-token. You should define an Auth0 &quot;rule&quot; to enrich access-tokens with the data you need and you&#39;ll find it in spring security-context (<code>JwtAuthenticationToken</code> instance or whatever else you define with <code>http.oauth2ResourceServer().jwt().jwtAuthenticationConverter&zwnj;&#8203;(...)</code>. See my answer for details."}],"tags":[],"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"comment_count":5,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1663209233,"creation_date":1663209233,"answer_id":73725031,"question_id":73722060,"body_markdown":"&gt; I would like to have this informations in SecurityContextHolder or at\r\n&gt; least user&#39;s email and user&#39;s name.\r\n\r\nHave you seen what&#39;s inside your jwt token? \r\nDid you add openid scope in your authentication process? if so there should be an IdToken in your auth server response json body, inside IdToken jwt token claim there are various information about the user&#39;s data such user&#39;s name and email.\r\nOther user attributes can also be added by adding custom claim to your jwt token, after adding those claims then you can try to access it via SecurityContextHolder.\r\n\r\n[Reference link][1]\r\n\r\n\r\n  [1]: https://auth0.com/docs/secure/tokens/json-web-tokens/create-custom-claims","title":"Fetch user information in Resource Server","body":"<blockquote>\n<p>I would like to have this informations in SecurityContextHolder or at\nleast user's email and user's name.</p>\n</blockquote>\n<p>Have you seen what's inside your jwt token?\nDid you add openid scope in your authentication process? if so there should be an IdToken in your auth server response json body, inside IdToken jwt token claim there are various information about the user's data such user's name and email.\nOther user attributes can also be added by adding custom claim to your jwt token, after adding those claims then you can try to access it via SecurityContextHolder.</p>\n<p><a href=\"https://auth0.com/docs/secure/tokens/json-web-tokens/create-custom-claims\" rel=\"nofollow noreferrer\">Reference link</a></p>\n"},{"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1664037704,"post_id":73835382,"comment_id":130381962,"body_markdown":"Making a resource-server also a client and adding a call to authorization-server for each and every request introduces way too much overhead. See my answer to add user data to access-tokens instead.","body":"Making a resource-server also a client and adding a call to authorization-server for each and every request introduces way too much overhead. See my answer to add user data to access-tokens instead."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1664038977,"post_id":73835382,"comment_id":130382202,"body_markdown":"@ch4mp I have edited. I have meant to say resource server not authorization server. I didn&#39;t add any client to the resource server.","body":"@ch4mp I have edited. I have meant to say resource server not authorization server. I didn&#39;t add any client to the resource server."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1664046583,"post_id":73835382,"comment_id":130383699,"body_markdown":"You are using an ID token as access-token. This is [worst practice](https://auth0.com/blog/id-token-access-token-what-is-the-difference/) and also the reason why you had to write a dedicated client to get the ID-token instead of configuring Postman with OAuth2 security (which sets Bearer Authorization header with access-token as expected)","body":"You are using an ID token as access-token. This is <a href=\"https://auth0.com/blog/id-token-access-token-what-is-the-difference/\" rel=\"nofollow noreferrer\">worst practice</a> and also the reason why you had to write a dedicated client to get the ID-token instead of configuring Postman with OAuth2 security (which sets Bearer Authorization header with access-token as expected)"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1664046766,"post_id":73835382,"comment_id":130383728,"body_markdown":"If the point of the question is using Auth0 user data in Spring resource-server security, your answer is missing the part where this data is added to Auth0 access-tokens.","body":"If the point of the question is using Auth0 user data in Spring resource-server security, your answer is missing the part where this data is added to Auth0 access-tokens."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1664050872,"post_id":73835382,"comment_id":130384422,"body_markdown":"@ch4mp I agreed with you are mentioning in your comment. Thanks for sharing the documentation on ID token vs Access token. I read it. It mentioned that ID token should only be used if you want to get user profile data which is exactly matching the use case where author wanted to get user name and email and I feel author can use ID token to get his job done.","body":"@ch4mp I agreed with you are mentioning in your comment. Thanks for sharing the documentation on ID token vs Access token. I read it. It mentioned that ID token should only be used if you want to get user profile data which is exactly matching the use case where author wanted to get user name and email and I feel author can use ID token to get his job done."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1664050993,"post_id":73835382,"comment_id":130384437,"body_markdown":"@ch4mp But if ID token is used for some other purpose like calling API, then it&#39;s a bad practice. It&#39;s concern for security of the application. Probably, the use of ID token should be avoided.","body":"@ch4mp But if ID token is used for some other purpose like calling API, then it&#39;s a bad practice. It&#39;s concern for security of the application. Probably, the use of ID token should be avoided."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":2,"creation_date":1664051528,"post_id":73835382,"comment_id":130384513,"body_markdown":"As I understand, this is the exact point here: calling an OAuth2 secured API (resource-server) and having user details in Spring security context (`Authentication` instance) for access-control decisions. The good solution with JWTs is adding claims to access-tokens. Final dot.","body":"As I understand, this is the exact point here: calling an OAuth2 secured API (resource-server) and having user details in Spring security context (<code>Authentication</code> instance) for access-control decisions. The good solution with JWTs is adding claims to access-tokens. Final dot."}],"tags":[],"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"comment_count":7,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1664092553,"creation_date":1664003639,"answer_id":73835382,"question_id":73722060,"body_markdown":"You have to do little bit changes to make it working.\r\n\r\nI will explain by step - by - step :\r\n\r\nI have created an account and have registered a regular web application with the name **test-app** in the Auth0 portal.\r\n\r\nNow, I took help of the resource links provided for **Auth0 client** and **Resource Server** by Auth0 to setup Spring boot app and these are given below.\r\n\r\n1. [Auth0 Client Spring Boot App Quick Start][1]\r\n2. [Auth0 Resource Server Spring Boot App Quick Start][2]\r\n\r\n---\r\n\r\nNow, I will explain through use cases.\r\n\r\nI have created a Auth0 spring boot client (separate project).\r\n\r\napplication.properties :\r\n\r\n    server:\r\n      port: 3000\r\n    spring:\r\n      security:\r\n        oauth2:\r\n          client:\r\n            registration:\r\n              auth0:\r\n                client-id: &lt;&lt;id&gt;&gt;\r\n                client-secret: &lt;&lt;secret&gt;&gt;\r\n                scope:\r\n                  - openid\r\n                  - profile\r\n                  - email\r\n            provider:\r\n              auth0:\r\n                issuer-uri: https://&lt;&lt;name&gt;&gt;.us.auth0.com/\r\n\r\nNote: You can find **client id, client secret and issuer uri** from **Applications -&gt; Open the app -&gt; Settings.**\r\n\r\nNow, I need to extract ID token which contains the user info, so I have created a sample controller and have used `OidcUser` to get that token:\r\n\r\n    @RestController\r\n    public class Resource {\r\n    \r\n        @GetMapping(&quot;/token&quot;)\r\n        public void profile(@AuthenticationPrincipal OidcUser oidcUser) {\r\n            System.out.println(oidcUser.getIdToken().getTokenValue());\r\n        }\r\n    \r\n    }\r\n\r\nAs soon as I run the server and send the request to the `/token`, it will first redirect to the Auth0 login page. I have used my Google account to login and after successful login, it prints the ID JWT token.\r\n\r\n**Note:** This client project is just show how I got the ID token. Not to confuse that resource server is also a client. \r\n\r\n[![enter image description here][3]][3] \r\n\r\nNow, coming to resource server, I have created a resource server Spring Boot App (separate project).\r\n\r\napplication.properties :\r\n\r\n    server:\r\n      port: 3010\r\n    auth0:\r\n      audience: https://&lt;&lt;name&gt;&gt;.auth0.com/api/v2/  \r\n    spring:\r\n      security:\r\n        oauth2:\r\n          resourceserver:\r\n            jwt:\r\n              issuer-uri: https://&lt;&lt;name&gt;&gt;.us.auth0.com/ \r\n              audiences:\r\n              - https://&lt;&lt;name&gt;&gt;.us.auth0.com/api/v2/ \r\n\r\nSecurityConfig (You don&#39;t need to add any extra validator, i.e remove the AudienceValidator):\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n    \r\n    \t@Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\r\n    \tprivate String issuer;\r\n    \r\n    \t@Bean\r\n    \tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \t\thttp.authorizeRequests().anyRequest().permitAll().and().oauth2ResourceServer().jwt(jwt -&gt; jwtDecoder());\r\n    \t\treturn http.build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic JwtDecoder jwtDecoder() {\r\n    \t\tNimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder) JwtDecoders.fromOidcIssuerLocation(issuer);\r\n    \t\tOAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\r\n    \t\tjwtDecoder.setJwtValidator(withIssuer);\r\n    \t\treturn jwtDecoder;\r\n    \t}\r\n    }\r\nA sample Controller to show my case :\r\n\r\n    @RestController\r\n    public class ProfileController {\r\n    \r\n    \t@GetMapping(&quot;/profile&quot;)\r\n    \tpublic void profile() {\r\n    \t\tJwt user = (Jwt) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n    \t\tSystem.out.println(user.getClaimAsString(&quot;email&quot;) + &quot; &quot; + user.getClaimAsString(&quot;name&quot;));\r\n    \t}\r\n    }\r\n\r\nAs soon as I have run the server, hit the uri `/profile` with **Bearer token** as **ID token** like this :\r\n\r\n[![enter image description here][4]][4]\r\n\r\nThe Spring Security is consuming this `Jwt` automatically and setting the `Principal` at this `Jwt` Object and you can extract this via `SecurityContextHolder`. \r\n\r\nNote: In the claims map, you have all of your user info. \r\n\r\n[![enter image description here][5]][5]\r\n\r\nOutput :\r\n\r\n[![enter image description here][6]][6]\r\n\r\n**Note:** ID token are not safe to be used in any cases. It can be used only in the case where you want to show/get user profile data but it should be avoided for all other use cases.\r\n\r\n\r\n  [1]: https://auth0.com/docs/quickstart/webapp/java-spring-boot/interactive\r\n  [2]: https://auth0.com/docs/quickstart/backend/java-spring-security5/01-authorization\r\n  [3]: https://i.stack.imgur.com/qDiIt.png\r\n  [4]: https://i.stack.imgur.com/eGV3L.png\r\n  [5]: https://i.stack.imgur.com/PuRyX.png\r\n  [6]: https://i.stack.imgur.com/s3h3I.png","title":"Fetch user information in Resource Server","body":"<p>You have to do little bit changes to make it working.</p>\n<p>I will explain by step - by - step :</p>\n<p>I have created an account and have registered a regular web application with the name <strong>test-app</strong> in the Auth0 portal.</p>\n<p>Now, I took help of the resource links provided for <strong>Auth0 client</strong> and <strong>Resource Server</strong> by Auth0 to setup Spring boot app and these are given below.</p>\n<ol>\n<li><a href=\"https://auth0.com/docs/quickstart/webapp/java-spring-boot/interactive\" rel=\"nofollow noreferrer\">Auth0 Client Spring Boot App Quick Start</a></li>\n<li><a href=\"https://auth0.com/docs/quickstart/backend/java-spring-security5/01-authorization\" rel=\"nofollow noreferrer\">Auth0 Resource Server Spring Boot App Quick Start</a></li>\n</ol>\n<hr />\n<p>Now, I will explain through use cases.</p>\n<p>I have created a Auth0 spring boot client (separate project).</p>\n<p>application.properties :</p>\n<pre><code>server:\n  port: 3000\nspring:\n  security:\n    oauth2:\n      client:\n        registration:\n          auth0:\n            client-id: &lt;&lt;id&gt;&gt;\n            client-secret: &lt;&lt;secret&gt;&gt;\n            scope:\n              - openid\n              - profile\n              - email\n        provider:\n          auth0:\n            issuer-uri: https://&lt;&lt;name&gt;&gt;.us.auth0.com/\n</code></pre>\n<p>Note: You can find <strong>client id, client secret and issuer uri</strong> from <strong>Applications -&gt; Open the app -&gt; Settings.</strong></p>\n<p>Now, I need to extract ID token which contains the user info, so I have created a sample controller and have used <code>OidcUser</code> to get that token:</p>\n<pre><code>@RestController\npublic class Resource {\n\n    @GetMapping(&quot;/token&quot;)\n    public void profile(@AuthenticationPrincipal OidcUser oidcUser) {\n        System.out.println(oidcUser.getIdToken().getTokenValue());\n    }\n\n}\n</code></pre>\n<p>As soon as I run the server and send the request to the <code>/token</code>, it will first redirect to the Auth0 login page. I have used my Google account to login and after successful login, it prints the ID JWT token.</p>\n<p><strong>Note:</strong> This client project is just show how I got the ID token. Not to confuse that resource server is also a client.</p>\n<p><a href=\"https://i.stack.imgur.com/qDiIt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qDiIt.png\" alt=\"enter image description here\" /></a></p>\n<p>Now, coming to resource server, I have created a resource server Spring Boot App (separate project).</p>\n<p>application.properties :</p>\n<pre><code>server:\n  port: 3010\nauth0:\n  audience: https://&lt;&lt;name&gt;&gt;.auth0.com/api/v2/  \nspring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: https://&lt;&lt;name&gt;&gt;.us.auth0.com/ \n          audiences:\n          - https://&lt;&lt;name&gt;&gt;.us.auth0.com/api/v2/ \n</code></pre>\n<p>SecurityConfig (You don't need to add any extra validator, i.e remove the AudienceValidator):</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\n    private String issuer;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeRequests().anyRequest().permitAll().and().oauth2ResourceServer().jwt(jwt -&gt; jwtDecoder());\n        return http.build();\n    }\n\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder) JwtDecoders.fromOidcIssuerLocation(issuer);\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\n        jwtDecoder.setJwtValidator(withIssuer);\n        return jwtDecoder;\n    }\n}\n</code></pre>\n<p>A sample Controller to show my case :</p>\n<pre><code>@RestController\npublic class ProfileController {\n\n    @GetMapping(&quot;/profile&quot;)\n    public void profile() {\n        Jwt user = (Jwt) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n        System.out.println(user.getClaimAsString(&quot;email&quot;) + &quot; &quot; + user.getClaimAsString(&quot;name&quot;));\n    }\n}\n</code></pre>\n<p>As soon as I have run the server, hit the uri <code>/profile</code> with <strong>Bearer token</strong> as <strong>ID token</strong> like this :</p>\n<p><a href=\"https://i.stack.imgur.com/eGV3L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eGV3L.png\" alt=\"enter image description here\" /></a></p>\n<p>The Spring Security is consuming this <code>Jwt</code> automatically and setting the <code>Principal</code> at this <code>Jwt</code> Object and you can extract this via <code>SecurityContextHolder</code>.</p>\n<p>Note: In the claims map, you have all of your user info.</p>\n<p><a href=\"https://i.stack.imgur.com/PuRyX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PuRyX.png\" alt=\"enter image description here\" /></a></p>\n<p>Output :</p>\n<p><a href=\"https://i.stack.imgur.com/s3h3I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s3h3I.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Note:</strong> ID token are not safe to be used in any cases. It can be used only in the case where you want to show/get user profile data but it should be avoided for all other use cases.</p>\n"},{"comments":[{"owner":{"account_id":6524069,"reputation":715,"user_id":5047297,"accept_rate":53,"display_name":"WestFarmer"},"score":0,"creation_date":1669186293,"post_id":73838921,"comment_id":131584554,"body_markdown":"you said &quot;not try to decode access-tokens&quot;, you also suggest add user info into access token. do you mean not try to decode access-tokens on client side?","body":"you said &quot;not try to decode access-tokens&quot;, you also suggest add user info into access token. do you mean not try to decode access-tokens on client side?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1669191604,"post_id":73838921,"comment_id":131585919,"body_markdown":"Yes, exactly: ID token is to be used by client and access-token by resource-server =&gt; If you need more data in a REST API security-context, have authorization-server add it into access-token. If you need it on the client (display info or hide / show UI elements like menu entries), add it to ID token.","body":"Yes, exactly: ID token is to be used by client and access-token by resource-server =&gt; If you need more data in a REST API security-context, have authorization-server add it into access-token. If you need it on the client (display info or hide / show UI elements like menu entries), add it to ID token."}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1678128970,"creation_date":1664037481,"answer_id":73838921,"question_id":73722060,"body_markdown":"### Note On Efficiency\r\n**Do not call user endpoint when building the security-context for a request on a resource-server with JWT decoder.**\r\n\r\nAuth0 can issue JWT access-token and JWTs can be decoded / validated on the resource-server without a round trip to the authorization-server.\r\n\r\nCalling the user-info endpoint for each and every of your resource-server incoming request would be a drop in latency (and efficiency).\r\n\r\n### Add User Info to Auth0 Access Tokens\r\nIn Auth0 management console, go to `Auth Pipeline` -&gt; `Rules` and click `Create` to add a rule like:\r\n```\r\nfunction addUserInfoToAccessToken(user, context, callback) {\r\n  context.accessToken[&#39;https://stackoverflow.com/user&#39;] = user;\r\n  return callback(null, user, context);\r\n}\r\n```\r\nEt voil&#224;! You now have a `https://stackoverflow.com/user` private claim in access-tokens. You can (should?) narrow to the [user attributes][2] you actually need in your resource-server (what is accessed in your `@PreAuthorize` expressions for instance).\r\n\r\n### Complete Resource Server\r\n`JwtAuthenticationToken`, Spring-security default `Authentication` implementation for resource-servers with JWT decoder, exposes all of the access-token claims, including the private one we added.\r\n\r\nHere is a complete sample using the private claim from above in different ways (security expression, and inside @Controller method), but I recommand you go through this [first 3 of those tutorials I wrote][3], you&#39;ll find useful tips to make the best usage of private claims in spring-security:\r\n```java\r\n@SpringBootApplication\r\npublic class Auth0DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Auth0DemoApplication.class, args);\r\n\t}\r\n\r\n\t@RestController\r\n\t@RequestMapping(&quot;/access-token-user-info&quot;)\r\n\t@PreAuthorize(&quot;isAuthenticated()&quot;)\r\n\tpublic static class DemoController {\r\n\r\n\t\t@GetMapping(&quot;/{nickname}&quot;)\r\n\t\t@PreAuthorize(&quot;#nickname eq authentication.tokenAttributes[&#39;https://stackoverflow.com/user&#39;][&#39;nickname&#39;]&quot;)\r\n\t\tpublic Map&lt;String, Object&gt; getGreeting(@PathVariable String nickname, JwtAuthenticationToken auth) {\r\n\t\t\treturn auth.getToken().getClaimAsMap(&quot;https://stackoverflow.com/user&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@EnableWebSecurity\r\n\t@EnableGlobalMethodSecurity(prePostEnabled = true)\r\n\tpublic static class SecurityConf {\r\n\t\t@Bean\r\n\t\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\r\n\t\t\thttp.oauth2ResourceServer().jwt();\r\n\r\n\t\t\t// Enable and configure CORS\r\n\t\t\thttp.cors().configurationSource(corsConfigurationSource());\r\n\r\n\t\t\t// State-less session (state in access-token only)\r\n\t\t\thttp.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n\t\t\t// Disable CSRF because of state-less session-management\r\n\t\t\thttp.csrf().disable();\r\n\r\n\t\t\t// Return 401 (unauthorized) instead of 403 (redirect to login) when authorization is missing or invalid\r\n\t\t\thttp.exceptionHandling().authenticationEntryPoint((request, response, authException) -&gt; {\r\n\t\t\t\tresponse.addHeader(HttpHeaders.WWW_AUTHENTICATE, &quot;Basic realm=\\&quot;Restricted Content\\&quot;&quot;);\r\n\t\t\t\tresponse.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());\r\n\t\t\t});\r\n\r\n\t\t\treturn http.build();\r\n\t\t}\r\n\r\n\t\tprivate CorsConfigurationSource corsConfigurationSource() {\r\n\t\t\t// Very permissive CORS config...\r\n\t\t\tfinal var configuration = new CorsConfiguration();\r\n\t\t\tconfiguration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\r\n\t\t\tconfiguration.setAllowedMethods(Arrays.asList(&quot;*&quot;));\r\n\t\t\tconfiguration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));\r\n\t\t\tconfiguration.setExposedHeaders(Arrays.asList(&quot;*&quot;));\r\n\r\n\t\t\t// Limited to API routes (neither actuator nor Swagger-UI)\r\n\t\t\tfinal var source = new UrlBasedCorsConfigurationSource();\r\n\t\t\tsource.registerCorsConfiguration(&quot;/access-token-user-info/**&quot;, configuration);\r\n\r\n\t\t\treturn source;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nWith just this property:\r\n```properties\r\nspring.security.oauth2.resourceserver.jwt.issuer-uri=https://dev-ch4mpy.eu.auth0.com/\r\n```\r\nAnd that pom\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.c4soft&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;auth0-demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;auth0-demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot and Auth0 with user-data in access-token&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\nAnd now the output of a call to `http://localhost:8080/access-token-user-info/ch4mp` with Postman (and an access-token for ch4mp):\r\n```json\r\n{\r\n    &quot;clientID&quot;: &quot;...&quot;,\r\n    &quot;email_verified&quot;: true,\r\n    &quot;roles&quot;: [\r\n        &quot;PLAYER&quot;\r\n    ],\r\n    &quot;created_at&quot;: &quot;2021-08-16T21:03:02.086Z&quot;,\r\n    &quot;picture&quot;: &quot;https://s.gravatar.com/avatar/....png&quot;,\r\n    &quot;global_client_id&quot;: &quot;...&quot;,\r\n    &quot;identities&quot;: [\r\n        {\r\n            &quot;isSocial&quot;: false,\r\n            &quot;provider&quot;: &quot;auth0&quot;,\r\n            &quot;user_id&quot;: &quot;...&quot;,\r\n            &quot;connection&quot;: &quot;Username-Password-Authentication&quot;\r\n        }\r\n    ],\r\n    &quot;updated_at&quot;: &quot;2022-09-26T20:53:08.957Z&quot;,\r\n    &quot;user_id&quot;: &quot;auth0|...&quot;,\r\n    &quot;permissions&quot;: [\r\n        &quot;solutions:manage&quot;\r\n    ],\r\n    &quot;name&quot;: &quot;ch4mp@c4-soft.com&quot;,\r\n    &quot;nickname&quot;: &quot;ch4mp&quot;,\r\n    &quot;_id&quot;: &quot;...&quot;,\r\n    &quot;persistent&quot;: {},\r\n    &quot;email&quot;: &quot;ch4mp@c4-soft.com&quot;,\r\n    &quot;last_password_reset&quot;: &quot;2022-09-24T16:39:00.152Z&quot;\r\n}\r\n```\r\n\r\n### Note on Tokens\r\n**Do not use ID tokens as access-tokens**, this is a [worst practice][1]. Authorization-server emmits different kind of tokens for different usages:\r\n- access-token: destined to resource-server. It should be very short lived (minutes) so that if leaked or revoked, the consequences are limited. Clients should:\r\n  * just use it as `Bearer` `Authorization` header in the requests sent to the right `audience`. In the case you have different audience, your client must maintain different access-tokens (for instance one for &quot;your&quot; API and other ones for Google, Facebook or whatever other API your client consumes directly). \r\n  * not try to decode access-tokens, it is a contract between authorization and resource servers and they can decide to change the format at any moment (breaking the client if it expects to &quot;understand&quot; that token)\r\n- ID token: destined to client. Such tokens aim at communicating signed user data. As it is generally quite long lived, the consequences of it being leaked could be a real problem if used for access-control. Read article linked earlier for more reasons why not to use it for access-control.\r\n- refresh-token: long lived, to be used by client only and sent to authorization-server only. Authorization-server should carefully control the origin of tokens refreshing requests and clients be very careful with who they send such tokens to (consequences of a leak can be dramatic).\r\n\r\n\r\n  [1]: https://auth0.com/blog/id-token-access-token-what-is-the-difference/\r\n  [2]: https://auth0.com/docs/customize/rules/user-object-in-rules\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"Fetch user information in Resource Server","body":"<h3>Note On Efficiency</h3>\n<p><strong>Do not call user endpoint when building the security-context for a request on a resource-server with JWT decoder.</strong></p>\n<p>Auth0 can issue JWT access-token and JWTs can be decoded / validated on the resource-server without a round trip to the authorization-server.</p>\n<p>Calling the user-info endpoint for each and every of your resource-server incoming request would be a drop in latency (and efficiency).</p>\n<h3>Add User Info to Auth0 Access Tokens</h3>\n<p>In Auth0 management console, go to <code>Auth Pipeline</code> -&gt; <code>Rules</code> and click <code>Create</code> to add a rule like:</p>\n<pre><code>function addUserInfoToAccessToken(user, context, callback) {\n  context.accessToken['https://stackoverflow.com/user'] = user;\n  return callback(null, user, context);\n}\n</code></pre>\n<p>Et voil! You now have a <code>https://stackoverflow.com/user</code> private claim in access-tokens. You can (should?) narrow to the <a href=\"https://auth0.com/docs/customize/rules/user-object-in-rules\" rel=\"nofollow noreferrer\">user attributes</a> you actually need in your resource-server (what is accessed in your <code>@PreAuthorize</code> expressions for instance).</p>\n<h3>Complete Resource Server</h3>\n<p><code>JwtAuthenticationToken</code>, Spring-security default <code>Authentication</code> implementation for resource-servers with JWT decoder, exposes all of the access-token claims, including the private one we added.</p>\n<p>Here is a complete sample using the private claim from above in different ways (security expression, and inside @Controller method), but I recommand you go through this <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">first 3 of those tutorials I wrote</a>, you'll find useful tips to make the best usage of private claims in spring-security:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class Auth0DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Auth0DemoApplication.class, args);\n    }\n\n    @RestController\n    @RequestMapping(&quot;/access-token-user-info&quot;)\n    @PreAuthorize(&quot;isAuthenticated()&quot;)\n    public static class DemoController {\n\n        @GetMapping(&quot;/{nickname}&quot;)\n        @PreAuthorize(&quot;#nickname eq authentication.tokenAttributes['https://stackoverflow.com/user']['nickname']&quot;)\n        public Map&lt;String, Object&gt; getGreeting(@PathVariable String nickname, JwtAuthenticationToken auth) {\n            return auth.getToken().getClaimAsMap(&quot;https://stackoverflow.com/user&quot;);\n        }\n    }\n\n    @EnableWebSecurity\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\n    public static class SecurityConf {\n        @Bean\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n            http.oauth2ResourceServer().jwt();\n\n            // Enable and configure CORS\n            http.cors().configurationSource(corsConfigurationSource());\n\n            // State-less session (state in access-token only)\n            http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n            // Disable CSRF because of state-less session-management\n            http.csrf().disable();\n\n            // Return 401 (unauthorized) instead of 403 (redirect to login) when authorization is missing or invalid\n            http.exceptionHandling().authenticationEntryPoint((request, response, authException) -&gt; {\n                response.addHeader(HttpHeaders.WWW_AUTHENTICATE, &quot;Basic realm=\\&quot;Restricted Content\\&quot;&quot;);\n                response.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());\n            });\n\n            return http.build();\n        }\n\n        private CorsConfigurationSource corsConfigurationSource() {\n            // Very permissive CORS config...\n            final var configuration = new CorsConfiguration();\n            configuration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\n            configuration.setAllowedMethods(Arrays.asList(&quot;*&quot;));\n            configuration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));\n            configuration.setExposedHeaders(Arrays.asList(&quot;*&quot;));\n\n            // Limited to API routes (neither actuator nor Swagger-UI)\n            final var source = new UrlBasedCorsConfigurationSource();\n            source.registerCorsConfiguration(&quot;/access-token-user-info/**&quot;, configuration);\n\n            return source;\n        }\n    }\n}\n</code></pre>\n<p>With just this property:</p>\n<pre><code>spring.security.oauth2.resourceserver.jwt.issuer-uri=https://dev-ch4mpy.eu.auth0.com/\n</code></pre>\n<p>And that pom</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.c4soft&lt;/groupId&gt;\n    &lt;artifactId&gt;auth0-demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;auth0-demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot and Auth0 with user-data in access-token&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>And now the output of a call to <code>http://localhost:8080/access-token-user-info/ch4mp</code> with Postman (and an access-token for ch4mp):</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;clientID&quot;: &quot;...&quot;,\n    &quot;email_verified&quot;: true,\n    &quot;roles&quot;: [\n        &quot;PLAYER&quot;\n    ],\n    &quot;created_at&quot;: &quot;2021-08-16T21:03:02.086Z&quot;,\n    &quot;picture&quot;: &quot;https://s.gravatar.com/avatar/....png&quot;,\n    &quot;global_client_id&quot;: &quot;...&quot;,\n    &quot;identities&quot;: [\n        {\n            &quot;isSocial&quot;: false,\n            &quot;provider&quot;: &quot;auth0&quot;,\n            &quot;user_id&quot;: &quot;...&quot;,\n            &quot;connection&quot;: &quot;Username-Password-Authentication&quot;\n        }\n    ],\n    &quot;updated_at&quot;: &quot;2022-09-26T20:53:08.957Z&quot;,\n    &quot;user_id&quot;: &quot;auth0|...&quot;,\n    &quot;permissions&quot;: [\n        &quot;solutions:manage&quot;\n    ],\n    &quot;name&quot;: &quot;ch4mp@c4-soft.com&quot;,\n    &quot;nickname&quot;: &quot;ch4mp&quot;,\n    &quot;_id&quot;: &quot;...&quot;,\n    &quot;persistent&quot;: {},\n    &quot;email&quot;: &quot;ch4mp@c4-soft.com&quot;,\n    &quot;last_password_reset&quot;: &quot;2022-09-24T16:39:00.152Z&quot;\n}\n</code></pre>\n<h3>Note on Tokens</h3>\n<p><strong>Do not use ID tokens as access-tokens</strong>, this is a <a href=\"https://auth0.com/blog/id-token-access-token-what-is-the-difference/\" rel=\"nofollow noreferrer\">worst practice</a>. Authorization-server emmits different kind of tokens for different usages:</p>\n<ul>\n<li>access-token: destined to resource-server. It should be very short lived (minutes) so that if leaked or revoked, the consequences are limited. Clients should:\n<ul>\n<li>just use it as <code>Bearer</code> <code>Authorization</code> header in the requests sent to the right <code>audience</code>. In the case you have different audience, your client must maintain different access-tokens (for instance one for &quot;your&quot; API and other ones for Google, Facebook or whatever other API your client consumes directly).</li>\n<li>not try to decode access-tokens, it is a contract between authorization and resource servers and they can decide to change the format at any moment (breaking the client if it expects to &quot;understand&quot; that token)</li>\n</ul>\n</li>\n<li>ID token: destined to client. Such tokens aim at communicating signed user data. As it is generally quite long lived, the consequences of it being leaked could be a real problem if used for access-control. Read article linked earlier for more reasons why not to use it for access-control.</li>\n<li>refresh-token: long lived, to be used by client only and sent to authorization-server only. Authorization-server should carefully control the origin of tokens refreshing requests and clients be very careful with who they send such tokens to (consequences of a leak can be dramatic).</li>\n</ul>\n"}],"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2030,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":3,"score":5,"last_activity_date":1678128970,"creation_date":1663182635,"question_id":73722060,"body_markdown":"I have configured the resource server which verify JWT token against auth server. In code bellow you can see my configuration which has defined `issuer-uri` (is URI from [Auth0](https://auth0.com/)). If user is authenticated on my public client against Auth0, this client receive JWT token from Auth0. When I call resource server with token header, user is authorized, and resources are available, but `SecurityContextHolder` contains only base data parsed from JWT, and not whole information about user. I have available `userinfo` endpoint from Auth0 which provides user&#39;s name, picture, email, etc.\r\n\r\nMy question is if I can set this user info endpoint in my resource server, to fetch this information automatically or what is the best way to do that? I would like to have this informations in `SecurityContextHolder` or at least user&#39;s email and user&#39;s name.\r\n```java\r\n@Bean\r\nfun filterChain(http: HttpSecurity): SecurityFilterChain {\r\n    http.authorizeRequests().anyRequest().permitAll()\r\n        .and()\r\n        .oauth2ResourceServer().jwt();\r\n    return http.build()\r\n}\r\n```\r\nand JWT decoder bean\r\n```java\r\n@Bean\r\nfun jwtDecoder(): JwtDecoder? {\r\n    val jwtDecoder = JwtDecoders.fromOidcIssuerLocation&lt;JwtDecoder&gt;(issuer) as NimbusJwtDecoder\r\n    val audienceValidator: OAuth2TokenValidator&lt;Jwt&gt; = AudienceValidator(audience)\r\n    val withIssuer = JwtValidators.createDefaultWithIssuer(issuer)\r\n    val withAudience: OAuth2TokenValidator&lt;Jwt&gt; = DelegatingOAuth2TokenValidator(withIssuer, audienceValidator)\r\n    jwtDecoder.setJwtValidator(withAudience)\r\n    return jwtDecoder\r\n}\r\n```\r\nFile `application.properties`\r\n```java\r\nspring.security.oauth2.resourceserver.jwt.issuer-uri=my-domain.com\r\nspring.security.oauth2.resourceserver.jwt.audience=my-audience\r\n```\r\nEDIT\r\nThis is payload of JWT received from Auth0\r\n\r\n    {\r\n      &quot;iss&quot;: &quot;https://dev-abcdefgh.us.auth0.com/&quot;,\r\n      &quot;sub&quot;: &quot;google-oauth2|353335637216442227159&quot;,\r\n      &quot;aud&quot;: [\r\n        &quot;my-audience&quot;,\r\n        &quot;https://dev-3ag8q43b.us.auth0.com/userinfo&quot;\r\n      ],\r\n      &quot;iat&quot;: 1663100248,\r\n      &quot;exp&quot;: 1663186648,\r\n      &quot;azp&quot;: &quot;m01yBdKdQd5erBxriQde24ogfsdAsYvD&quot;,\r\n      &quot;scope&quot;: &quot;openid profile email&quot;\r\n    }","title":"Fetch user information in Resource Server","body":"<p>I have configured the resource server which verify JWT token against auth server. In code bellow you can see my configuration which has defined <code>issuer-uri</code> (is URI from <a href=\"https://auth0.com/\" rel=\"noreferrer\">Auth0</a>). If user is authenticated on my public client against Auth0, this client receive JWT token from Auth0. When I call resource server with token header, user is authorized, and resources are available, but <code>SecurityContextHolder</code> contains only base data parsed from JWT, and not whole information about user. I have available <code>userinfo</code> endpoint from Auth0 which provides user's name, picture, email, etc.</p>\n<p>My question is if I can set this user info endpoint in my resource server, to fetch this information automatically or what is the best way to do that? I would like to have this informations in <code>SecurityContextHolder</code> or at least user's email and user's name.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nfun filterChain(http: HttpSecurity): SecurityFilterChain {\n    http.authorizeRequests().anyRequest().permitAll()\n        .and()\n        .oauth2ResourceServer().jwt();\n    return http.build()\n}\n</code></pre>\n<p>and JWT decoder bean</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nfun jwtDecoder(): JwtDecoder? {\n    val jwtDecoder = JwtDecoders.fromOidcIssuerLocation&lt;JwtDecoder&gt;(issuer) as NimbusJwtDecoder\n    val audienceValidator: OAuth2TokenValidator&lt;Jwt&gt; = AudienceValidator(audience)\n    val withIssuer = JwtValidators.createDefaultWithIssuer(issuer)\n    val withAudience: OAuth2TokenValidator&lt;Jwt&gt; = DelegatingOAuth2TokenValidator(withIssuer, audienceValidator)\n    jwtDecoder.setJwtValidator(withAudience)\n    return jwtDecoder\n}\n</code></pre>\n<p>File <code>application.properties</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>spring.security.oauth2.resourceserver.jwt.issuer-uri=my-domain.com\nspring.security.oauth2.resourceserver.jwt.audience=my-audience\n</code></pre>\n<p>EDIT\nThis is payload of JWT received from Auth0</p>\n<pre><code>{\n  &quot;iss&quot;: &quot;https://dev-abcdefgh.us.auth0.com/&quot;,\n  &quot;sub&quot;: &quot;google-oauth2|353335637216442227159&quot;,\n  &quot;aud&quot;: [\n    &quot;my-audience&quot;,\n    &quot;https://dev-3ag8q43b.us.auth0.com/userinfo&quot;\n  ],\n  &quot;iat&quot;: 1663100248,\n  &quot;exp&quot;: 1663186648,\n  &quot;azp&quot;: &quot;m01yBdKdQd5erBxriQde24ogfsdAsYvD&quot;,\n  &quot;scope&quot;: &quot;openid profile email&quot;\n}\n</code></pre>\n"},{"tags":["java","apache-httpclient-5.x"],"answers":[{"comments":[{"owner":{"account_id":1454976,"reputation":374,"user_id":1370823,"display_name":"Steve"},"score":0,"creation_date":1676587187,"post_id":75478596,"comment_id":133172675,"body_markdown":"By default that doesn&#39;t forward the sensitive headers, does it? It&#39;s not what I&#39;m seeing.","body":"By default that doesn&#39;t forward the sensitive headers, does it? It&#39;s not what I&#39;m seeing."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1676588386,"post_id":75478596,"comment_id":133172953,"body_markdown":"It looks to me like if forwards all the headers line 1080 of https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/xref/org/apache/http/impl/client/DefaultRequestDirector.html","body":"It looks to me like if forwards all the headers line 1080 of <a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/xref/org/apache/http/impl/client/DefaultRequestDirector.html\" rel=\"nofollow noreferrer\">hc.apache.org/httpcomponents-client-4.5.x/current/httpclient&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1676588956,"post_id":75478596,"comment_id":133173048,"body_markdown":"See also setRedirectStrategy.","body":"See also setRedirectStrategy."}],"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676588931,"creation_date":1676586946,"answer_id":75478596,"question_id":75478201,"body_markdown":"You set it in the builder\r\n\r\n[public RequestConfig.Builder setRedirectsEnabled(boolean redirectsEnabled)][1]\r\n\r\nAnd [set your RequestConfig in your RequestBuilder][2]\r\n\r\nSee also See [setRedirectStrategy][3]\r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-5.1.x/current/httpclient5/apidocs/org/apache/hc/client5/http/config/RequestConfig.Builder.html#setRedirectsEnabled(boolean)\r\n  [2]: https://hc.apache.org/httpcomponents-client-5.1.x/current/httpclient5/apidocs/org/apache/hc/client5/http/async/methods/SimpleRequestBuilder.html#setRequestConfig(org.apache.hc.client5.http.config.RequestConfig)\r\n  [3]: https://hc.apache.org/httpcomponents-client-5.1.x/current/httpclient5/apidocs/org/apache/hc/client5/http/impl/async/HttpAsyncClientBuilder.html#setRedirectStrategy(org.apache.hc.client5.http.protocol.RedirectStrategy)","title":"Is there a way to forward sensitive headers on redirect using httpclient5 AsyncHttpClient","body":"<p>You set it in the builder</p>\n<p><a href=\"https://hc.apache.org/httpcomponents-client-5.1.x/current/httpclient5/apidocs/org/apache/hc/client5/http/config/RequestConfig.Builder.html#setRedirectsEnabled(boolean)\" rel=\"nofollow noreferrer\">public RequestConfig.Builder setRedirectsEnabled(boolean redirectsEnabled)</a></p>\n<p>And <a href=\"https://hc.apache.org/httpcomponents-client-5.1.x/current/httpclient5/apidocs/org/apache/hc/client5/http/async/methods/SimpleRequestBuilder.html#setRequestConfig(org.apache.hc.client5.http.config.RequestConfig)\" rel=\"nofollow noreferrer\">set your RequestConfig in your RequestBuilder</a></p>\n<p>See also See <a href=\"https://hc.apache.org/httpcomponents-client-5.1.x/current/httpclient5/apidocs/org/apache/hc/client5/http/impl/async/HttpAsyncClientBuilder.html#setRedirectStrategy(org.apache.hc.client5.http.protocol.RedirectStrategy)\" rel=\"nofollow noreferrer\">setRedirectStrategy</a></p>\n"}],"owner":{"account_id":1454976,"reputation":374,"user_id":1370823,"display_name":"Steve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75478596,"answer_count":1,"score":0,"last_activity_date":1678128879,"creation_date":1676583557,"question_id":75478201,"body_markdown":"I&#39;m trying to handle a redirect with a Spring WebClient, using an `org.apache.hc.client5.http.impl.async.HttpAsyncClient` under the hood, and forward the sensitive headers in the redirect request. I see examples in previous versions that there is a way using a `.followRedirect(boolean followRedirect, Consumer&lt;HttpClientRequest&gt; redirectRequestConsumer)` configuration, but that doesn&#39;t appear to exist in the current version.\r\n\r\nMy alternative is to turn off following redirect, grab the headers and cookies in the redirect response, and then send off a second request with that information, but that seems like more of a hack than a proper solution.\r\n\r\nThanks!\r\n\r\nEdit: This is what I ended up with based on the comments, which worked:\r\n\r\n    public static WebClient create(final boolean followRedirects) {\r\n        final HttpAsyncClientBuilder clientBuilder = HttpAsyncClientBuilder.create();\r\n        final RequestConfig requestConfig = RequestConfig.custom().setRedirectsEnabled(followRedirects).build();\r\n        clientBuilder.setDefaultRequestConfig(requestConfig);\r\n        final ClientHttpConnector connector = new HttpComponentsClientHttpConnector(clientBuilder.build());\r\n        return WebClient.builder().clientConnector(connector).build();\r\n    }","title":"Is there a way to forward sensitive headers on redirect using httpclient5 AsyncHttpClient","body":"<p>I'm trying to handle a redirect with a Spring WebClient, using an <code>org.apache.hc.client5.http.impl.async.HttpAsyncClient</code> under the hood, and forward the sensitive headers in the redirect request. I see examples in previous versions that there is a way using a <code>.followRedirect(boolean followRedirect, Consumer&lt;HttpClientRequest&gt; redirectRequestConsumer)</code> configuration, but that doesn't appear to exist in the current version.</p>\n<p>My alternative is to turn off following redirect, grab the headers and cookies in the redirect response, and then send off a second request with that information, but that seems like more of a hack than a proper solution.</p>\n<p>Thanks!</p>\n<p>Edit: This is what I ended up with based on the comments, which worked:</p>\n<pre><code>public static WebClient create(final boolean followRedirects) {\n    final HttpAsyncClientBuilder clientBuilder = HttpAsyncClientBuilder.create();\n    final RequestConfig requestConfig = RequestConfig.custom().setRedirectsEnabled(followRedirects).build();\n    clientBuilder.setDefaultRequestConfig(requestConfig);\n    final ClientHttpConnector connector = new HttpComponentsClientHttpConnector(clientBuilder.build());\n    return WebClient.builder().clientConnector(connector).build();\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","oauth-2.0","proxy"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1677949904,"post_id":75636892,"comment_id":133439917,"body_markdown":"&gt;&gt; nested exception is java.lang.NullPointerException\nThe bean can&#39;t be instantiated because of the exception thrown in it. Check again the stack trace where exactly the exception happend.","body":"&gt;&gt; nested exception is java.lang.NullPointerException The bean can&#39;t be instantiated because of the exception thrown in it. Check again the stack trace where exactly the exception happend."}],"answers":[{"tags":[],"owner":{"account_id":11793351,"reputation":1057,"user_id":8628731,"display_name":"Billy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678128563,"creation_date":1678128563,"answer_id":75654697,"question_id":75636892,"body_markdown":"This was because app was not deployed in env so &quot;VCAP_SERVICES&quot; java ops was not available.","title":"Creating OAuth2RestTemplate Resource with Proxy","body":"<p>This was because app was not deployed in env so &quot;VCAP_SERVICES&quot; java ops was not available.</p>\n"}],"owner":{"account_id":11793351,"reputation":1057,"user_id":8628731,"display_name":"Billy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678128563,"creation_date":1677946043,"question_id":75636892,"body_markdown":"I&#39;m trying to create an Client that is using OAuth2 but also needs to travers thru a proxy. Currently I&#39;m getting the error `Failed to instantiate [org.springframework.web.client.RestTemplate]: Factory method &#39;restTemplate&#39; threw exception; nested exception is java.lang.NullPointerException` I&#39;m not sure how because I&#39;m using the `@Bean`annotation on the method to make sure IoC container is aware, is this not correct? See two methods being used for this below:\r\n\r\n```    @Bean\r\n    public RestTemplate restTemplate() throws JSONException {\r\n        AccessTokenRequest atr = new DefaultAccessTokenRequest();\r\n        RestTemplate restTemplate = new OAuth2RestTemplate(restTemplateResource(),\r\n                new DefaultOAuth2ClientContext(atr));\r\n\r\n\r\n        //Proxy Settings\r\n        LOG.error(&quot;--in getProxySettings-&quot;);\r\n        LOG.info(System.getenv(&quot;VCAP_SERVICES&quot;));\r\n        JSONObject vcapServices = new JSONObject(System.getenv(&quot;VCAP_SERVICES&quot;));\r\n        LOG.info(&quot;vcapServices {}&quot;,vcapServices.toString());\r\n        JSONObject cproxy = vcapServices.getJSONArray(&quot;c-proxy&quot;).getJSONObject(0);\r\n        LOG.info(&quot;cproxy {}&quot;,cproxy.toString());\r\n        JSONObject credentials = cproxy.getJSONObject(&quot;credentials&quot;);\r\n        LOG.info(&quot;credentials {}&quot;,credentials.toString());\r\n\r\n        CredentialsProvider credsProvider = new BasicCredentialsProvider();\r\n        credsProvider.setCredentials(\r\n                new AuthScope(credentials.getString(&quot;host&quot;), credentials.getInt(&quot;port&quot;)),\r\n                new UsernamePasswordCredentials(credentials.getString(&quot;username&quot;), credentials.getString(&quot;password&quot;))\r\n        );\r\n\r\n        HttpHost myProxy = new HttpHost(credentials.getString(&quot;host&quot;), credentials.getInt(&quot;port&quot;));\r\n        HttpClientBuilder clientBuilder = HttpClientBuilder.create();\r\n\r\n        clientBuilder.setProxy(myProxy).setDefaultCredentialsProvider(credsProvider).disableCookieManagement();\r\n\r\n        HttpClient httpClient = clientBuilder.build();\r\n        HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();\r\n        factory.setHttpClient(httpClient);\r\n\r\n        restTemplate.setRequestFactory(factory);\r\n        return restTemplate;\r\n    }\r\n\r\n\r\n\r\n    protected OAuth2ProtectedResourceDetails restTemplateResource() {\r\n\r\n        ClientCredentialsResourceDetails clientCredentialsResourceDetails = new ClientCredentialsResourceDetails();\r\n        clientCredentialsResourceDetails.setAccessTokenUri(websecSecurityDetails.getEndpoint());\r\n        clientCredentialsResourceDetails.setClientId(websecSecurityDetails.getClientId());\r\n        clientCredentialsResourceDetails.setClientSecret(websecSecurityDetails.getClientSecret());\r\n        clientCredentialsResourceDetails.setGrantType(websecSecurityDetails.getGrantType());\r\n        List&lt;String&gt; scopeList = new ArrayList&lt;&gt;();\r\n        scopeList.add(websecSecurityDetails.getScope());\r\n        clientCredentialsResourceDetails.setScope(scopeList);\r\n        clientCredentialsResourceDetails.setAuthenticationScheme(AuthenticationScheme.header);\r\n        return clientCredentialsResourceDetails;\r\n    }","title":"Creating OAuth2RestTemplate Resource with Proxy","body":"<p>I'm trying to create an Client that is using OAuth2 but also needs to travers thru a proxy. Currently I'm getting the error <code>Failed to instantiate [org.springframework.web.client.RestTemplate]: Factory method 'restTemplate' threw exception; nested exception is java.lang.NullPointerException</code> I'm not sure how because I'm using the <code>@Bean</code>annotation on the method to make sure IoC container is aware, is this not correct? See two methods being used for this below:</p>\n<pre><code>    public RestTemplate restTemplate() throws JSONException {\n        AccessTokenRequest atr = new DefaultAccessTokenRequest();\n        RestTemplate restTemplate = new OAuth2RestTemplate(restTemplateResource(),\n                new DefaultOAuth2ClientContext(atr));\n\n\n        //Proxy Settings\n        LOG.error(&quot;--in getProxySettings-&quot;);\n        LOG.info(System.getenv(&quot;VCAP_SERVICES&quot;));\n        JSONObject vcapServices = new JSONObject(System.getenv(&quot;VCAP_SERVICES&quot;));\n        LOG.info(&quot;vcapServices {}&quot;,vcapServices.toString());\n        JSONObject cproxy = vcapServices.getJSONArray(&quot;c-proxy&quot;).getJSONObject(0);\n        LOG.info(&quot;cproxy {}&quot;,cproxy.toString());\n        JSONObject credentials = cproxy.getJSONObject(&quot;credentials&quot;);\n        LOG.info(&quot;credentials {}&quot;,credentials.toString());\n\n        CredentialsProvider credsProvider = new BasicCredentialsProvider();\n        credsProvider.setCredentials(\n                new AuthScope(credentials.getString(&quot;host&quot;), credentials.getInt(&quot;port&quot;)),\n                new UsernamePasswordCredentials(credentials.getString(&quot;username&quot;), credentials.getString(&quot;password&quot;))\n        );\n\n        HttpHost myProxy = new HttpHost(credentials.getString(&quot;host&quot;), credentials.getInt(&quot;port&quot;));\n        HttpClientBuilder clientBuilder = HttpClientBuilder.create();\n\n        clientBuilder.setProxy(myProxy).setDefaultCredentialsProvider(credsProvider).disableCookieManagement();\n\n        HttpClient httpClient = clientBuilder.build();\n        HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();\n        factory.setHttpClient(httpClient);\n\n        restTemplate.setRequestFactory(factory);\n        return restTemplate;\n    }\n\n\n\n    protected OAuth2ProtectedResourceDetails restTemplateResource() {\n\n        ClientCredentialsResourceDetails clientCredentialsResourceDetails = new ClientCredentialsResourceDetails();\n        clientCredentialsResourceDetails.setAccessTokenUri(websecSecurityDetails.getEndpoint());\n        clientCredentialsResourceDetails.setClientId(websecSecurityDetails.getClientId());\n        clientCredentialsResourceDetails.setClientSecret(websecSecurityDetails.getClientSecret());\n        clientCredentialsResourceDetails.setGrantType(websecSecurityDetails.getGrantType());\n        List&lt;String&gt; scopeList = new ArrayList&lt;&gt;();\n        scopeList.add(websecSecurityDetails.getScope());\n        clientCredentialsResourceDetails.setScope(scopeList);\n        clientCredentialsResourceDetails.setAuthenticationScheme(AuthenticationScheme.header);\n        return clientCredentialsResourceDetails;\n    }\n</code></pre>\n"},{"tags":["java","jakarta-mail","imap"],"comments":[{"owner":{"account_id":1550376,"reputation":10772,"user_id":1442918,"display_name":"Max"},"score":0,"creation_date":1678128598,"post_id":75654382,"comment_id":133469966,"body_markdown":"It looks to me like it didnt actually do start TLS.","body":"It looks to me like it didnt actually do start TLS."}],"answers":[{"comments":[{"owner":{"account_id":1311001,"reputation":155,"user_id":1259006,"accept_rate":40,"display_name":"Carmine"},"score":0,"creation_date":1678267619,"post_id":75654612,"comment_id":133498110,"body_markdown":"It would appear that the provider refuses to consult emails outside its internet connection.","body":"It would appear that the provider refuses to consult emails outside its internet connection."}],"tags":[],"owner":{"account_id":10242,"reputation":12230,"user_id":19246,"accept_rate":82,"display_name":"Martin C."},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678127916,"creation_date":1678127916,"answer_id":75654612,"question_id":75654382,"body_markdown":"Your IMAP server is denying this user access, see the part where it says `A1 NO IMAP4 access not allowed` in response to the login attempt. You can fix this only on the (IMAP) server-side.","title":"JavaMail AuthenticationFailedException IMAP4 access not allowed","body":"<p>Your IMAP server is denying this user access, see the part where it says <code>A1 NO IMAP4 access not allowed</code> in response to the login attempt. You can fix this only on the (IMAP) server-side.</p>\n"}],"owner":{"account_id":1311001,"reputation":155,"user_id":1259006,"accept_rate":40,"display_name":"Carmine"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75654612,"answer_count":1,"score":0,"last_activity_date":1678128284,"creation_date":1678126338,"question_id":75654382,"body_markdown":"I have an authentication error when I try to connect on server. I am using JavaMail ver. 1.6.2 and it gives me this error when I connect to INBOX.\r\nThe provider use the STARTTLS for comunication with port 143\r\n\r\n\r\n```\r\njavax.mail.AuthenticationFailedException: IMAP4 access not allowed\r\n\tat com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:732)\r\n\tat javax.mail.Service.connect(Service.java:388)\r\n\tat javax.mail.Service.connect(Service.java:246)\r\n\tat javax.mail.Service.connect(Service.java:267)\r\n    at it.app.test.TestSendEmail.main(TestEmail.java:113)\r\n\r\n```\r\n\r\n```\r\n\t\tproperties.put(&quot;mail.store.protocol&quot;, &quot;imap&quot;);\r\n\t\t\r\n\t\tproperties.put(&quot;mail.host&quot;, &quot;in.alice.it&quot;);\r\n\t\tproperties.put(&quot;mail.user&quot;, &quot;user_name@alice.it&quot;);\r\n\t\tproperties.put(&quot;mail.from&quot;, &quot;address_mail@alice.it&quot;);\r\n\r\n\t\tproperties.put(&quot;mail.imap.host&quot;, &quot;in.alice.it&quot;);\r\n\t\tproperties.put(&quot;mail.imap.port&quot;, &quot;143&quot;);\r\n\t\tproperties.put(&quot;mail.imap.user&quot;, &quot;user_name@alice.it&quot;);\t\t\t\r\n\t\t\t\t\r\n\t\tproperties.put(&quot;mail.imap.starttls.enable&quot;, &quot;true&quot;);\r\n\t\tproperties.put(&quot;mail.imap.starttls.required&quot;, &quot;true&quot;);\t\t\t\t\r\n\t\t\t\t\r\n\t\tproperties.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n\t\tproperties.put(&quot;mail.debug.auth&quot;, &quot;true&quot;);\r\n\t\t\r\n\t\tAuthenticator auth = new Authenticator() {\r\n            protected PasswordAuthentication getPasswordAuthentication() {\r\n                return new PasswordAuthentication(account.getUsername(), account.getPassword());\r\n            }\r\n        };\r\n        \r\n        session = Session.getInstance(properties, auth);\r\n        \r\n        \r\n        final Store store = session.getStore(&quot;imap&quot;);\r\n\t\tstore.connect(account.getUsername(), account.getPassword());\r\n\t\t\r\n\t\t. . .\r\n\r\n```\r\n\r\n```\r\nDEBUG: JavaMail version 1.6.2\r\njavax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Oracle]\r\nDEBUG IMAP: closeFoldersOnStoreFailure\r\nDEBUG IMAP: trying to connect to host &quot;in.alice.it&quot;, port 143, isSSL false\r\nOK IMAP4 Server\r\nA0 CAPABILITY\r\nCAPABILITY IMAP4rev1 UIDPLUS NAMESPACE QUOTA STARTTLS AUTH=PLAIN ID MOVE SORT SORT=DISPLAY THREAD=ORDEREDSUBJECT THREAD=PARTICIPANTS THREAD=REFERENCES X-FIRSTLINE X-THREAD\r\nA0 OK CAPABILITY completed\r\nDEBUG IMAP: AUTH: PLAIN\r\nDEBUG IMAP: protocolConnect login, host=in.alice.it, user=user_name@alice.it, password=&lt;non-null&gt;\r\nA1 AUTHENTICATE PLAIN\r\n+\r\nABCDEF123==\r\nA1 NO IMAP4 access not allowed\r\nDEBUG IMAP: trying to connect to host &quot;in.alice.it&quot;, port 143, isSSL false\r\nOK IMAP4 Server\r\nB0 CAPABILITY\r\nCAPABILITY IMAP4rev1 UIDPLUS NAMESPACE QUOTA STARTTLS AUTH=PLAIN ID MOVE SORT SORT=DISPLAY THREAD=ORDEREDSUBJECT THREAD=PARTICIPANTS THREAD=REFERENCES X-FIRSTLINE X-THREAD\r\nB0 OK CAPABILITY completed\r\nDEBUG IMAP: AUTH: PLAIN\r\nDEBUG IMAP: protocolConnect login, host=in.alice.it, user=user_name@alice.it, password=&lt;non-null&gt;\r\nB1 AUTHENTICATE PLAIN\r\n+\r\nABCDEF123==\r\nB1 NO IMAP4 access not allowed\r\n```","title":"JavaMail AuthenticationFailedException IMAP4 access not allowed","body":"<p>I have an authentication error when I try to connect on server. I am using JavaMail ver. 1.6.2 and it gives me this error when I connect to INBOX.\nThe provider use the STARTTLS for comunication with port 143</p>\n<pre><code>javax.mail.AuthenticationFailedException: IMAP4 access not allowed\n    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:732)\n    at javax.mail.Service.connect(Service.java:388)\n    at javax.mail.Service.connect(Service.java:246)\n    at javax.mail.Service.connect(Service.java:267)\n    at it.app.test.TestSendEmail.main(TestEmail.java:113)\n\n</code></pre>\n<pre><code>        properties.put(&quot;mail.store.protocol&quot;, &quot;imap&quot;);\n        \n        properties.put(&quot;mail.host&quot;, &quot;in.alice.it&quot;);\n        properties.put(&quot;mail.user&quot;, &quot;user_name@alice.it&quot;);\n        properties.put(&quot;mail.from&quot;, &quot;address_mail@alice.it&quot;);\n\n        properties.put(&quot;mail.imap.host&quot;, &quot;in.alice.it&quot;);\n        properties.put(&quot;mail.imap.port&quot;, &quot;143&quot;);\n        properties.put(&quot;mail.imap.user&quot;, &quot;user_name@alice.it&quot;);         \n                \n        properties.put(&quot;mail.imap.starttls.enable&quot;, &quot;true&quot;);\n        properties.put(&quot;mail.imap.starttls.required&quot;, &quot;true&quot;);              \n                \n        properties.put(&quot;mail.debug&quot;, &quot;true&quot;);\n        properties.put(&quot;mail.debug.auth&quot;, &quot;true&quot;);\n        \n        Authenticator auth = new Authenticator() {\n            protected PasswordAuthentication getPasswordAuthentication() {\n                return new PasswordAuthentication(account.getUsername(), account.getPassword());\n            }\n        };\n        \n        session = Session.getInstance(properties, auth);\n        \n        \n        final Store store = session.getStore(&quot;imap&quot;);\n        store.connect(account.getUsername(), account.getPassword());\n        \n        . . .\n\n</code></pre>\n<pre><code>DEBUG: JavaMail version 1.6.2\njavax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Oracle]\nDEBUG IMAP: closeFoldersOnStoreFailure\nDEBUG IMAP: trying to connect to host &quot;in.alice.it&quot;, port 143, isSSL false\nOK IMAP4 Server\nA0 CAPABILITY\nCAPABILITY IMAP4rev1 UIDPLUS NAMESPACE QUOTA STARTTLS AUTH=PLAIN ID MOVE SORT SORT=DISPLAY THREAD=ORDEREDSUBJECT THREAD=PARTICIPANTS THREAD=REFERENCES X-FIRSTLINE X-THREAD\nA0 OK CAPABILITY completed\nDEBUG IMAP: AUTH: PLAIN\nDEBUG IMAP: protocolConnect login, host=in.alice.it, user=user_name@alice.it, password=&lt;non-null&gt;\nA1 AUTHENTICATE PLAIN\n+\nABCDEF123==\nA1 NO IMAP4 access not allowed\nDEBUG IMAP: trying to connect to host &quot;in.alice.it&quot;, port 143, isSSL false\nOK IMAP4 Server\nB0 CAPABILITY\nCAPABILITY IMAP4rev1 UIDPLUS NAMESPACE QUOTA STARTTLS AUTH=PLAIN ID MOVE SORT SORT=DISPLAY THREAD=ORDEREDSUBJECT THREAD=PARTICIPANTS THREAD=REFERENCES X-FIRSTLINE X-THREAD\nB0 OK CAPABILITY completed\nDEBUG IMAP: AUTH: PLAIN\nDEBUG IMAP: protocolConnect login, host=in.alice.it, user=user_name@alice.it, password=&lt;non-null&gt;\nB1 AUTHENTICATE PLAIN\n+\nABCDEF123==\nB1 NO IMAP4 access not allowed\n</code></pre>\n"},{"tags":["java","google-chrome","selenium-webdriver","google-chrome-headless"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1677745198,"post_id":75611524,"comment_id":133399345,"body_markdown":"Please share more of your code, need to see the part where file is (should be) downloaded. Add the code output as well.","body":"Please share more of your code, need to see the part where file is (should be) downloaded. Add the code output as well."},{"owner":{"account_id":19200660,"reputation":19,"user_id":14028685,"display_name":"bitwiseBro"},"score":0,"creation_date":1677825015,"post_id":75611524,"comment_id":133417286,"body_markdown":"@pburgr it just clicks on download button which downloads a file! I&#39;ve not written code to read or write bytes for downloading! Just want to download file via browser like usual! please let me know if these were the details you are asking for. Thanks","body":"@pburgr it just clicks on download button which downloads a file! I&#39;ve not written code to read or write bytes for downloading! Just want to download file via browser like usual! please let me know if these were the details you are asking for. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":19200660,"reputation":19,"user_id":14028685,"display_name":"bitwiseBro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678128257,"creation_date":1677765036,"answer_id":75616344,"question_id":75611524,"body_markdown":"The reason for downloading failure was screen size on cloud! I was able to resolve it by:\r\n\r\n1. For java instead of ***--window-size=1920,1080***      \r\nI did:\r\n    \r\n`driver.manage().window().setSize(new Dimension(1920, 1080));`\r\n\r\n2. Now I&#39;m running selenium with xvfb! \r\n\r\n\r\nUPDATE: Above solution works with sequential execution but not with parallel","title":"Can&#39;t download files with chrome headless with Selenium Java","body":"<p>The reason for downloading failure was screen size on cloud! I was able to resolve it by:</p>\n<ol>\n<li>For java instead of <em><strong>--window-size=1920,1080</strong></em><br />\nI did:</li>\n</ol>\n<p><code>driver.manage().window().setSize(new Dimension(1920, 1080));</code></p>\n<ol start=\"2\">\n<li>Now I'm running selenium with xvfb!</li>\n</ol>\n<p>UPDATE: Above solution works with sequential execution but not with parallel</p>\n"}],"owner":{"account_id":19200660,"reputation":19,"user_id":14028685,"display_name":"bitwiseBro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1678128257,"creation_date":1677733875,"question_id":75611524,"body_markdown":"Chrome is not downloading any file when runned in headless mode! It was working perfectly fine till last week! Suddenly it started to fail! I&#39;ve tried with different OS, different Selenium version, still no luck!\r\n\r\nIt does download on my computer, but not on Github Actions and AWS!\r\n\r\nHave a look at My setup:\r\n\r\n\r\n```\r\nHashMap&lt;String, Object&gt; headlessChromePrefs = new HashMap&lt;String, Object&gt;();\r\n\t\t\tChromeOptions headlessChromeOption = new ChromeOptions();\r\n\t\t\tDesiredCapabilities capabilities = new DesiredCapabilities();\r\n\t\t\theadlessChromeOption.addArguments(&quot;--headless=new&quot;);\r\n\t\t\theadlessChromeOption.addArguments(&quot;--disable-gpu&quot;);\r\n\t\t\theadlessChromeOption.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n\t\t\theadlessChromeOption.addArguments(&quot;--no-sandbox&quot;);\r\n\t\t\theadlessChromeOption.addArguments(&quot;--window-size=1920,1200&quot;);\r\n\t\t\theadlessChromePrefs.put(&quot;download.default_directory&quot;, downloadDirectory);\r\n\t\t\theadlessChromePrefs.put(&quot;download.prompt_for_download&quot;, false);\r\n\t\t\theadlessChromeOption.setExperimentalOption(&quot;prefs&quot;, headlessChromePrefs);\r\n\t\t\tcapabilities.setCapability(ChromeOptions.CAPABILITY, headlessChromeOption);\r\n\t\t\theadlessChromeOption.merge(capabilities);\r\n\t\t\tdriver = new ChromeDriver(headlessChromeOption);\r\n```\r\n\r\nEnvironment:\r\nJava 11, Selenium 4.4.0\r\n\r\nPlease help me find the issue! Thanks team!!","title":"Can&#39;t download files with chrome headless with Selenium Java","body":"<p>Chrome is not downloading any file when runned in headless mode! It was working perfectly fine till last week! Suddenly it started to fail! I've tried with different OS, different Selenium version, still no luck!</p>\n<p>It does download on my computer, but not on Github Actions and AWS!</p>\n<p>Have a look at My setup:</p>\n<pre><code>HashMap&lt;String, Object&gt; headlessChromePrefs = new HashMap&lt;String, Object&gt;();\n            ChromeOptions headlessChromeOption = new ChromeOptions();\n            DesiredCapabilities capabilities = new DesiredCapabilities();\n            headlessChromeOption.addArguments(&quot;--headless=new&quot;);\n            headlessChromeOption.addArguments(&quot;--disable-gpu&quot;);\n            headlessChromeOption.addArguments(&quot;--disable-dev-shm-usage&quot;);\n            headlessChromeOption.addArguments(&quot;--no-sandbox&quot;);\n            headlessChromeOption.addArguments(&quot;--window-size=1920,1200&quot;);\n            headlessChromePrefs.put(&quot;download.default_directory&quot;, downloadDirectory);\n            headlessChromePrefs.put(&quot;download.prompt_for_download&quot;, false);\n            headlessChromeOption.setExperimentalOption(&quot;prefs&quot;, headlessChromePrefs);\n            capabilities.setCapability(ChromeOptions.CAPABILITY, headlessChromeOption);\n            headlessChromeOption.merge(capabilities);\n            driver = new ChromeDriver(headlessChromeOption);\n</code></pre>\n<p>Environment:\nJava 11, Selenium 4.4.0</p>\n<p>Please help me find the issue! Thanks team!!</p>\n"},{"tags":["java","android","gradle","checkstyle"],"comments":[{"owner":{"account_id":1001793,"reputation":2131,"user_id":1016482,"accept_rate":50,"display_name":"rveach"},"score":0,"creation_date":1678205269,"post_id":75635888,"comment_id":133486226,"body_markdown":"It sounds like you solved your own issue, but I just wanted to mark that you can use Checkstyle for any project, but it sounds like you can&#39;t use Checkstyle in gradle with Android. You can always try the bare command line interface with Checkstyle or a separate Ant or Maven entity just for running it.","body":"It sounds like you solved your own issue, but I just wanted to mark that you can use Checkstyle for any project, but it sounds like you can&#39;t use Checkstyle in gradle with Android. You can always try the bare command line interface with Checkstyle or a separate Ant or Maven entity just for running it."}],"owner":{"account_id":27934255,"reputation":1,"user_id":21331588,"display_name":"HBMuni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678128131,"creation_date":1677935710,"question_id":75635888,"body_markdown":"I am trying to implement checkstyle in a standard out-of-the-box project for Android. However, the tasks for checkstyle do not get added even though I am implementing the plugin. What am I doing wrong?\r\n\r\nThe official documentation for checkstyle just mentions applying the plugin and then the tasks are supposed to be created. I have cleaned / rebuilt + invalidated caches and restarted the project already.\r\n\r\nproject.gradle\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;7.3.1&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.3.1&#39; apply false\r\n    id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.7.20&#39; apply false\r\n    id &quot;org.jlleitschuh.gradle.ktlint&quot; version &quot;11.0.0&quot;\r\n}\r\n```\r\n\r\napp.gradle\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;org.jetbrains.kotlin.android&#39;\r\n}\r\n\r\napply plugin: &#39;org.jlleitschuh.gradle.ktlint&#39;\r\napply plugin: &#39;checkstyle&#39;\r\ncheckstyle.toolVersion = &quot;10.3.3&quot;\r\n\r\nandroid {\r\n    namespace &#39;com.example.android.ktlinttest&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.android.ktlinttest&quot;\r\n        minSdk 30\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n    buildFeatures {\r\n        viewBinding true\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;androidx.core:core-ktx:1.7.0&#39;\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;androidx.navigation:navigation-fragment-ktx:2.5.3&#39;\r\n    implementation &#39;androidx.navigation:navigation-ui-ktx:2.5.3&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n\r\n    // Test if needed for checkstyle\r\n    implementation(&quot;joda-time:joda-time:2.11.1&quot;)\r\n    implementation(&quot;com.google.guava:guava:31.1-jre&quot;)\r\n}\r\n\r\n// Set ktlint to be automatically triggered by building the project\r\ntasks.getByPath(&quot;preBuild&quot;).dependsOn(&quot;ktlintFormat&quot;)\r\ntasks.getByPath(&quot;preBuild&quot;).dependsOn(&quot;checkstyleMain&quot;)\r\n\r\nktlint {\r\n    android = true\r\n    ignoreFailures = false\r\n    disabledRules = [&quot;no-wildcard-imports&quot;, &quot;max-line-length&quot;]\r\n    reporters {\r\n        reporter &quot;plain&quot;\r\n        reporter &quot;checkstyle&quot;\r\n        reporter &quot;sarif&quot;\r\n    }\r\n}\r\n```\r\n\r\nEDIT:\r\n\r\nI found the solution. For checkstyle to successfully add the checking tasks like checkstyleMain you need to implement also the &#39;java&#39; plugin. However, when implementing the plugin &#39;com.android.application&#39;, it is not possible to at the same time add &#39;java&#39;. So not possible to use it for Android projects I guess.\r\n","title":"Checkstyle task does not get added for android project","body":"<p>I am trying to implement checkstyle in a standard out-of-the-box project for Android. However, the tasks for checkstyle do not get added even though I am implementing the plugin. What am I doing wrong?</p>\n<p>The official documentation for checkstyle just mentions applying the plugin and then the tasks are supposed to be created. I have cleaned / rebuilt + invalidated caches and restarted the project already.</p>\n<p>project.gradle</p>\n<pre><code>plugins {\n    id 'com.android.application' version '7.3.1' apply false\n    id 'com.android.library' version '7.3.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.7.20' apply false\n    id &quot;org.jlleitschuh.gradle.ktlint&quot; version &quot;11.0.0&quot;\n}\n</code></pre>\n<p>app.gradle</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'org.jetbrains.kotlin.android'\n}\n\napply plugin: 'org.jlleitschuh.gradle.ktlint'\napply plugin: 'checkstyle'\ncheckstyle.toolVersion = &quot;10.3.3&quot;\n\nandroid {\n    namespace 'com.example.android.ktlinttest'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.android.ktlinttest&quot;\n        minSdk 30\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n    buildFeatures {\n        viewBinding true\n    }\n}\n\ndependencies {\n    implementation 'androidx.core:core-ktx:1.7.0'\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'androidx.navigation:navigation-fragment-ktx:2.5.3'\n    implementation 'androidx.navigation:navigation-ui-ktx:2.5.3'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n\n    // Test if needed for checkstyle\n    implementation(&quot;joda-time:joda-time:2.11.1&quot;)\n    implementation(&quot;com.google.guava:guava:31.1-jre&quot;)\n}\n\n// Set ktlint to be automatically triggered by building the project\ntasks.getByPath(&quot;preBuild&quot;).dependsOn(&quot;ktlintFormat&quot;)\ntasks.getByPath(&quot;preBuild&quot;).dependsOn(&quot;checkstyleMain&quot;)\n\nktlint {\n    android = true\n    ignoreFailures = false\n    disabledRules = [&quot;no-wildcard-imports&quot;, &quot;max-line-length&quot;]\n    reporters {\n        reporter &quot;plain&quot;\n        reporter &quot;checkstyle&quot;\n        reporter &quot;sarif&quot;\n    }\n}\n</code></pre>\n<p>EDIT:</p>\n<p>I found the solution. For checkstyle to successfully add the checking tasks like checkstyleMain you need to implement also the 'java' plugin. However, when implementing the plugin 'com.android.application', it is not possible to at the same time add 'java'. So not possible to use it for Android projects I guess.</p>\n"},{"tags":["java","selenium-webdriver","gradle","github-actions","cicd"],"answers":[{"comments":[{"owner":{"account_id":27930129,"reputation":11,"user_id":21328360,"display_name":"nsowers20"},"score":0,"creation_date":1677885523,"post_id":75632550,"comment_id":133432397,"body_markdown":"I updated my code to look like this: driver.get(&quot;https://devcontinuousimprovement.vermeer.com/index.html&quot;);\n        driver.findElement(By.id(&quot;Ecom_Password&quot;)).sendKeys(&quot;blank&quot;);\n        driver.findElement(By.id(&quot;Ecom_User_ID&quot;)).sendKeys(&quot;blank&quot;);\n        driver.findElement(By.id(&quot;loginButton2&quot;)).click();\n        new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.titleIs((&quot;Continuous Improvement - Event Name Overview&quot;))); \nBut still getting the same error in the Github actions. The test ran just fine locally.","body":"I updated my code to look like this: driver.get(&quot;<a href=\"https://devcontinuousimprovement.vermeer.com/index.html&quot;\" rel=\"nofollow noreferrer\">devcontinuousimprovement.vermeer.com/index.html&quot;</a>&zwnj;&#8203;);         driver.findElement(By.id(&quot;Ecom_Password&quot;)).sendKeys(&quot;blank&quot;)&zwnj;&#8203;;         driver.findElement(By.id(&quot;Ecom_User_ID&quot;)).sendKeys(&quot;blank&quot;);         driver.findElement(By.id(&quot;loginButton2&quot;)).click();         new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.titleIs((&quot;C&zwnj;&#8203;ontinuous Improvement - Event Name Overview&quot;)));  But still getting the same error in the Github actions. The test ran just fine locally."}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677884303,"creation_date":1677884303,"answer_id":75632550,"question_id":75631669,"body_markdown":"Seems the line of code is a little off. A quick demonstration:\r\n\r\n- Code block:\r\n\r\n\t  driver.get(&quot;https://www.google.com/&quot;);\r\n\t  new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.titleIs((&quot;Google&quot;)));\r\n\t  System.out.println(driver.getTitle());\r\n\t  \r\n- Console Output:\r\n\r\n\t  Google\r\n\r\n\r\n----------\r\n\r\n\r\n\t  \r\nThis usecase\r\n------------\r\nAccordingly, your line of code should be:\r\n\r\n\t  wait.until(ExpectedConditions.titleIs((&quot;Continuous Improvement - Event Name Overview&quot;)));","title":"Gradle with Selenium Testing failing in Github Actions but passing locally","body":"<p>Seems the line of code is a little off. A quick demonstration:</p>\n<ul>\n<li><p>Code block:</p>\n<pre><code>driver.get(&quot;https://www.google.com/&quot;);\nnew WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.titleIs((&quot;Google&quot;)));\nSystem.out.println(driver.getTitle());\n</code></pre>\n</li>\n<li><p>Console Output:</p>\n<pre><code>Google\n</code></pre>\n</li>\n</ul>\n<hr />\n<h2>This usecase</h2>\n<p>Accordingly, your line of code should be:</p>\n<pre><code>  wait.until(ExpectedConditions.titleIs((&quot;Continuous Improvement - Event Name Overview&quot;)));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1678549753,"post_id":75654609,"comment_id":133555909,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75654609/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27930129,"reputation":11,"user_id":21328360,"display_name":"nsowers20"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678127897,"creation_date":1678127897,"answer_id":75654609,"question_id":75631669,"body_markdown":"Solved the issue, it was because logging into our SSO it requires a two-factor authentication so the server was unable to login after receiving the information. ","title":"Gradle with Selenium Testing failing in Github Actions but passing locally","body":"<p>Solved the issue, it was because logging into our SSO it requires a two-factor authentication so the server was unable to login after receiving the information.</p>\n"}],"owner":{"account_id":27930129,"reputation":11,"user_id":21328360,"display_name":"nsowers20"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1678127897,"creation_date":1677875859,"question_id":75631669,"body_markdown":"I am currently working on trying to connect Selenium automation scripts to be run using Github action. I decided on using Gradle from how easy it looked to use when running these Selenium tests locally and in Github actions. I have been able to get these Selenium tests to work just fine locally using `./gradlew test`. I have also been writing all of this using Visual Studio Code.\r\n\r\nHere is my gradle.yml: \r\n\r\n```\r\nname: Java CI with Gradle\r\n\r\non:\r\n  push:\r\n    branches: [&quot;dev&quot;]\r\n  pull_request:\r\n    branches: [&quot;dev&quot;]\r\n\r\npermissions:\r\n  contents: read\r\n\r\njobs:\r\n  build:\r\n    runs-on: ubuntu-latest\r\n\r\n    steps:\r\n      - uses: actions/checkout@v3\r\n      - name: Set up JDK 19\r\n        uses: actions/setup-java@v3\r\n        with:\r\n          java-version: &quot;19&quot;\r\n          distribution: &quot;temurin&quot;\r\n      - name: Grant execute permission for gradlew\r\n        run: chmod +x gradlew\r\n      - name: Build with Gradle\r\n        run: ./gradlew clean test\r\n```\r\n\r\nHere is my build.gradle file:\r\n\r\n```\r\n/*\r\n * This file was generated by the Gradle &#39;init&#39; task.\r\n *\r\n * This is a general purpose Gradle build.\r\n * Learn more about Gradle by exploring our samples at https://docs.gradle.org/8.0.1/samples\r\n * This project uses @Incubating APIs which are subject to change.\r\n */\r\nplugins {\r\n    id &#39;java&#39;\r\n}\r\n\r\nrepositories {\r\n    jcenter()\r\n}\r\n\r\ndependencies {\r\n    testImplementation &#39;junit:junit:4.13&#39;\r\n    implementation &#39;org.seleniumhq.selenium:selenium-java:4.1.1&#39;\r\n    testImplementation(&quot;io.github.bonigarcia:webdrivermanager:5.3.2&quot;)\r\n}\r\n```\r\n\r\nsettings.gradle file:\r\n\r\n```\r\n/*\r\n * This file was generated by the Gradle &#39;init&#39; task.\r\n *\r\n * The settings file is used to specify which projects to include in your build.\r\n *\r\n * Detailed information about configuring a multi-project build in Gradle can be found\r\n * in the user manual at https://docs.gradle.org/8.0.1/userguide/multi_project_builds.html\r\n * This project uses @Incubating APIs which are subject to change.\r\n */\r\nplugins {\r\n    id(&quot;com.gradle.enterprise&quot;) version(&quot;3.9&quot;)\r\n}\r\n\r\ngradleEnterprise {\r\n    if (System.getenv(&quot;CI&quot;) != null) {\r\n        buildScan {\r\n            publishAlways()\r\n            termsOfServiceUrl = &quot;https://gradle.com/terms-of-service&quot;\r\n            termsOfServiceAgree = &quot;yes&quot;\r\n        }\r\n    }\r\n}\r\n\r\nrootProject.name = &#39;it-mendix-ci-kaizen-events&#39;\r\n```\r\n\r\nAnd my Selenium java file:\r\n\r\n```\r\nimport org.junit.*;\r\nimport java.util.concurrent.TimeUnit;\r\nimport java.lang.Thread;\r\nimport java.io.*;\r\n\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.firefox.FirefoxDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.remote.RemoteWebDriver;\r\nimport org.openqa.selenium.remote.DesiredCapabilities;\r\nimport org.openqa.selenium.Dimension;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.interactions.Actions;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\nimport org.openqa.selenium.JavascriptExecutor;\r\nimport org.openqa.selenium.Alert;\r\nimport org.openqa.selenium.Keys;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\nimport org.openqa.selenium.WindowType;\r\nimport io.github.bonigarcia.wdm.WebDriverManager;\r\n\r\n\r\nimport static org.hamcrest.CoreMatchers.containsString;\r\nimport static org.hamcrest.MatcherAssert.assertThat;\r\nimport static org.hamcrest.CoreMatchers.is;\r\nimport static org.hamcrest.core.IsNot.not;\r\n\r\npublic class CIHomePage {\r\n\r\n    private WebDriver driver;\r\n\r\n    @BeforeClass\r\n    public static void setupWebdriverChromeDriver() {\r\n        WebDriverManager.chromedriver().setup();\r\n    }\r\n\r\n    @Before\r\n    public void setup() {\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.addArguments(&quot;--headless&quot;, &quot;--disable-gpu&quot;, &quot;--window-size=1920,1200&quot;,&quot;--ignore-certificate-errors&quot;,&quot;--disable-extensions&quot;,&quot;--no-sandbox&quot;,&quot;--disable-dev-shm-usage&quot;);\r\n        driver = new ChromeDriver(options);\r\n        driver.manage().window().maximize();\r\n        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n    }\r\n\r\n    @After\r\n    public void teardown() {\r\n        if (driver != null) {\r\n            driver.quit();\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void homePageTitle() throws InterruptedException{\r\n        WebDriverWait wait = new WebDriverWait (driver, 45);\r\n        driver.get(&quot;https://notarealurl.com&quot;);\r\n        driver.findElement(By.id(&quot;Ecom_Password&quot;)).sendKeys(&quot;notarealpassword&quot;);\r\n        driver.findElement(By.id(&quot;Ecom_User_ID&quot;)).sendKeys(&quot;notarealusername&quot;);\r\n        driver.findElement(By.id(&quot;loginButton2&quot;)).click();\r\n        wait.until(ExpectedConditions.titleIs(&quot;Continuous Improvement - Event Name Overview&quot;));\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen these test run in Github actions I receive this error.\r\n\r\n```\r\nException\r\norg.openqa.selenium.TimeoutException: Expected condition failed: waiting for title to be &quot;Continuous Improvement - Event Name Overview&quot;. Current title: &quot;Access Manager&quot; (tried for 45 second(s) with 500 milliseconds interval)\t\r\nBuild info: version: &#39;4.1.1&#39;, revision: &#39;e8fcc2cecf&#39;\t\r\nSystem info: host: &#39;fv-az1028-100&#39;, ip: &#39;10.1.0.192&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.15.0-1033-azure&#39;, java.version: &#39;19.0.2&#39;\t\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\t\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 110.0.5481.177, chrome: {chromedriverVersion: 110.0.5481.77 (65ed616c6e8e..., userDataDir: /tmp/.com.google.Chrome.Mh8RwC}, goog:chromeOptions: {debuggerAddress: localhost:42651}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: ws://localhost:42651/devtoo..., se:cdpVersion: 110.0.5481.177, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\t\r\nSession ID: ca87e954431ab0747fceab555c07e562\r\n```\r\n\r\nFrom what I can tell, the error keeps happening when Selenium is trying to log into SSO and can&#39;t get past this page to be directed to the site that I am working on. I have been able to get this to work just fine locally on my machine. This also is not an issue when Selenium isn&#39;t directed to log into our SSO. I have been able to get the scripts to work just fine when directing to a site without our SSO.\r\n\r\nI am not sure if it is an issue with how I set up my gradle.yml file or need to do something different with how I wrote the Selenium test file. ","title":"Gradle with Selenium Testing failing in Github Actions but passing locally","body":"<p>I am currently working on trying to connect Selenium automation scripts to be run using Github action. I decided on using Gradle from how easy it looked to use when running these Selenium tests locally and in Github actions. I have been able to get these Selenium tests to work just fine locally using <code>./gradlew test</code>. I have also been writing all of this using Visual Studio Code.</p>\n<p>Here is my gradle.yml:</p>\n<pre><code>name: Java CI with Gradle\n\non:\n  push:\n    branches: [&quot;dev&quot;]\n  pull_request:\n    branches: [&quot;dev&quot;]\n\npermissions:\n  contents: read\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v3\n      - name: Set up JDK 19\n        uses: actions/setup-java@v3\n        with:\n          java-version: &quot;19&quot;\n          distribution: &quot;temurin&quot;\n      - name: Grant execute permission for gradlew\n        run: chmod +x gradlew\n      - name: Build with Gradle\n        run: ./gradlew clean test\n</code></pre>\n<p>Here is my build.gradle file:</p>\n<pre><code>/*\n * This file was generated by the Gradle 'init' task.\n *\n * This is a general purpose Gradle build.\n * Learn more about Gradle by exploring our samples at https://docs.gradle.org/8.0.1/samples\n * This project uses @Incubating APIs which are subject to change.\n */\nplugins {\n    id 'java'\n}\n\nrepositories {\n    jcenter()\n}\n\ndependencies {\n    testImplementation 'junit:junit:4.13'\n    implementation 'org.seleniumhq.selenium:selenium-java:4.1.1'\n    testImplementation(&quot;io.github.bonigarcia:webdrivermanager:5.3.2&quot;)\n}\n</code></pre>\n<p>settings.gradle file:</p>\n<pre><code>/*\n * This file was generated by the Gradle 'init' task.\n *\n * The settings file is used to specify which projects to include in your build.\n *\n * Detailed information about configuring a multi-project build in Gradle can be found\n * in the user manual at https://docs.gradle.org/8.0.1/userguide/multi_project_builds.html\n * This project uses @Incubating APIs which are subject to change.\n */\nplugins {\n    id(&quot;com.gradle.enterprise&quot;) version(&quot;3.9&quot;)\n}\n\ngradleEnterprise {\n    if (System.getenv(&quot;CI&quot;) != null) {\n        buildScan {\n            publishAlways()\n            termsOfServiceUrl = &quot;https://gradle.com/terms-of-service&quot;\n            termsOfServiceAgree = &quot;yes&quot;\n        }\n    }\n}\n\nrootProject.name = 'it-mendix-ci-kaizen-events'\n</code></pre>\n<p>And my Selenium java file:</p>\n<pre><code>import org.junit.*;\nimport java.util.concurrent.TimeUnit;\nimport java.lang.Thread;\nimport java.io.*;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.remote.RemoteWebDriver;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.openqa.selenium.Dimension;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.interactions.Actions;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.openqa.selenium.JavascriptExecutor;\nimport org.openqa.selenium.Alert;\nimport org.openqa.selenium.Keys;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.openqa.selenium.chrome.ChromeOptions;\nimport org.openqa.selenium.WindowType;\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\n\nimport static org.hamcrest.CoreMatchers.containsString;\nimport static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.CoreMatchers.is;\nimport static org.hamcrest.core.IsNot.not;\n\npublic class CIHomePage {\n\n    private WebDriver driver;\n\n    @BeforeClass\n    public static void setupWebdriverChromeDriver() {\n        WebDriverManager.chromedriver().setup();\n    }\n\n    @Before\n    public void setup() {\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(&quot;--headless&quot;, &quot;--disable-gpu&quot;, &quot;--window-size=1920,1200&quot;,&quot;--ignore-certificate-errors&quot;,&quot;--disable-extensions&quot;,&quot;--no-sandbox&quot;,&quot;--disable-dev-shm-usage&quot;);\n        driver = new ChromeDriver(options);\n        driver.manage().window().maximize();\n        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n    }\n\n    @After\n    public void teardown() {\n        if (driver != null) {\n            driver.quit();\n        }\n    }\n\n    @Test\n    public void homePageTitle() throws InterruptedException{\n        WebDriverWait wait = new WebDriverWait (driver, 45);\n        driver.get(&quot;https://notarealurl.com&quot;);\n        driver.findElement(By.id(&quot;Ecom_Password&quot;)).sendKeys(&quot;notarealpassword&quot;);\n        driver.findElement(By.id(&quot;Ecom_User_ID&quot;)).sendKeys(&quot;notarealusername&quot;);\n        driver.findElement(By.id(&quot;loginButton2&quot;)).click();\n        wait.until(ExpectedConditions.titleIs(&quot;Continuous Improvement - Event Name Overview&quot;));\n\n    }\n\n}\n</code></pre>\n<p>When these test run in Github actions I receive this error.</p>\n<pre><code>Exception\norg.openqa.selenium.TimeoutException: Expected condition failed: waiting for title to be &quot;Continuous Improvement - Event Name Overview&quot;. Current title: &quot;Access Manager&quot; (tried for 45 second(s) with 500 milliseconds interval)    \nBuild info: version: '4.1.1', revision: 'e8fcc2cecf'    \nSystem info: host: 'fv-az1028-100', ip: '10.1.0.192', os.name: 'Linux', os.arch: 'amd64', os.version: '5.15.0-1033-azure', java.version: '19.0.2'   \nDriver info: org.openqa.selenium.chrome.ChromeDriver    \nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 110.0.5481.177, chrome: {chromedriverVersion: 110.0.5481.77 (65ed616c6e8e..., userDataDir: /tmp/.com.google.Chrome.Mh8RwC}, goog:chromeOptions: {debuggerAddress: localhost:42651}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: ws://localhost:42651/devtoo..., se:cdpVersion: 110.0.5481.177, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}  \nSession ID: ca87e954431ab0747fceab555c07e562\n</code></pre>\n<p>From what I can tell, the error keeps happening when Selenium is trying to log into SSO and can't get past this page to be directed to the site that I am working on. I have been able to get this to work just fine locally on my machine. This also is not an issue when Selenium isn't directed to log into our SSO. I have been able to get the scripts to work just fine when directing to a site without our SSO.</p>\n<p>I am not sure if it is an issue with how I set up my gradle.yml file or need to do something different with how I wrote the Selenium test file.</p>\n"},{"tags":["java","json","spring-boot","jackson"],"answers":[{"comments":[{"owner":{"account_id":12051589,"reputation":1279,"user_id":8814332,"display_name":"Risalat Zaman"},"score":1,"creation_date":1677745897,"post_id":75612883,"comment_id":133399508,"body_markdown":"I figured it out later. Did not know about the 3 slashes thing earlier. Learning something new everyday :D","body":"I figured it out later. Did not know about the 3 slashes thing earlier. Learning something new everyday :D"}],"tags":[],"owner":{"account_id":9596641,"reputation":873,"user_id":7125557,"display_name":"dimirsen Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677745378,"creation_date":1677745378,"answer_id":75612883,"question_id":75612176,"body_markdown":"You need to escape the slashes when you provide a json string with nested json programatically - add a slash and escape it at once, that makes nested quotes have 3 slashes:\r\n    \r\n    final String nestedErrorResponse = &quot;{\\&quot;errormessage\\&quot;:\\&quot;{\\\\\\&quot;timestamp\\\\\\&quot;:\\\\\\&quot;2021-10- 19T07:57:35.205+0000\\\\\\&quot;,\\\\\\&quot;status\\\\\\&quot;:400,\\\\\\&quot;error\\\\\\&quot;:\\\\\\&quot;Bad Request\\\\\\&quot;,\\&quot;message\\\\\\&quot;:\\\\\\&quot;Bad Request: xxxx xx is xx xxx. path\\u003d/xxx/xxx\\\\\\&quot;,\\\\\\&quot;path\\&quot;:\\\\\\&quot;/xxxx /xxx\\\\\\&quot;}\\&quot;}&quot;;\r\n    \r\nI use Intellij Idea and whrn I copy a json string into another string, it adds the proper number of slashes automatically.\r\n","title":"Can not deserialize JSON with json string inside","body":"<p>You need to escape the slashes when you provide a json string with nested json programatically - add a slash and escape it at once, that makes nested quotes have 3 slashes:</p>\n<pre><code>final String nestedErrorResponse = &quot;{\\&quot;errormessage\\&quot;:\\&quot;{\\\\\\&quot;timestamp\\\\\\&quot;:\\\\\\&quot;2021-10- 19T07:57:35.205+0000\\\\\\&quot;,\\\\\\&quot;status\\\\\\&quot;:400,\\\\\\&quot;error\\\\\\&quot;:\\\\\\&quot;Bad Request\\\\\\&quot;,\\&quot;message\\\\\\&quot;:\\\\\\&quot;Bad Request: xxxx xx is xx xxx. path\\u003d/xxx/xxx\\\\\\&quot;,\\\\\\&quot;path\\&quot;:\\\\\\&quot;/xxxx /xxx\\\\\\&quot;}\\&quot;}&quot;;\n</code></pre>\n<p>I use Intellij Idea and whrn I copy a json string into another string, it adds the proper number of slashes automatically.</p>\n"},{"tags":[],"owner":{"account_id":27635017,"reputation":43,"user_id":21093121,"display_name":"ARNR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678127755,"creation_date":1677745727,"answer_id":75612938,"question_id":75612176,"body_markdown":"Can you convert your JSON data as shown below and test your code, hopefully, this will help you to fix the issue. I usually test my JSON data in online Json data validator t. ex https://jsonformatter.curiousconcept.com/#\r\n```\r\n   &quot;errormessage&quot;:{\r\n      &quot;timestamp&quot;:&quot;2021-10- 19T07:57:35.205+0000&quot;,\r\n      &quot;status&quot;:400,\r\n      &quot;error&quot;:&quot;Bad Request&quot;,\r\n      &quot;message&quot;:&quot;Bad Request: xxxx xxx xxx xxx xxx. path\\\\\\u003d/xxx/verify&quot;,\r\n      &quot;path&quot;:&quot;/xxx /xxx&quot;\r\n   }\r\n```","title":"Can not deserialize JSON with json string inside","body":"<p>Can you convert your JSON data as shown below and test your code, hopefully, this will help you to fix the issue. I usually test my JSON data in online Json data validator t. ex <a href=\"https://jsonformatter.curiousconcept.com/#\" rel=\"nofollow noreferrer\">https://jsonformatter.curiousconcept.com/#</a></p>\n<pre><code>   &quot;errormessage&quot;:{\n      &quot;timestamp&quot;:&quot;2021-10- 19T07:57:35.205+0000&quot;,\n      &quot;status&quot;:400,\n      &quot;error&quot;:&quot;Bad Request&quot;,\n      &quot;message&quot;:&quot;Bad Request: xxxx xxx xxx xxx xxx. path\\\\\\u003d/xxx/verify&quot;,\n      &quot;path&quot;:&quot;/xxx /xxx&quot;\n   }\n</code></pre>\n"}],"owner":{"account_id":12051589,"reputation":1279,"user_id":8814332,"display_name":"Risalat Zaman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75612883,"answer_count":2,"score":1,"last_activity_date":1678127755,"creation_date":1677740303,"question_id":75612176,"body_markdown":"I have a json like below. The x&#39;s are there to omit sensitive data\r\n\r\n    {&quot;errormessage&quot;:&quot;{\\&quot;timestamp\\&quot;:\\&quot;2021-10- 19T07:57:35.205+0000\\&quot;,\\&quot;status\\&quot;:400,\\&quot;error\\&quot;:\\ &quot;Bad Request\\&quot;,\\&quot;message\\&quot;:\\&quot;Bad Request: xxxx xxx xxx xxx xxx. path\\u003d/xxx/verify\\&quot;,\\&quot;path\\&quot;:\\&quot;/xxx /xxx\\&quot;}&quot;}\r\n\r\n\r\nI am trying to deserialize this json into the class below\r\n\r\n    public class TransferResponse {\r\n\r\n     private Optional&lt;String&gt; timeStamp = Optional.empty();\r\n     private Optional&lt;String&gt; status = Optional.empty();\r\n     private Optional&lt;String&gt; error = Optional.empty();\r\n\r\n     @JsonAlias(value = {&quot;errorMessage&quot;, &quot;errormessage&quot;})\r\n     private Optional&lt;String&gt; message = Optional.empty();\r\n     private Optional&lt;String&gt; path = Optional.empty();\r\n    \r\n    }\r\n\r\nThey way I am trying to deserialize it is given below\r\n\r\n \r\n\r\n    final ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.registerModule(new Jdk8Module());\r\n    \r\n    final String nestedErrorResponse = &quot;{\\&quot;errormessage\\&quot;:\\&quot;{\\&quot;timestamp\\&quot;:\\&quot;2021-10- 19T07:57:35.205+0000\\&quot;,\\&quot;status\\&quot;:400,\\&quot;error\\&quot;:\\&quot;Bad Request\\&quot;,\\&quot;message\\&quot;:\\&quot;Bad Request: xxxx xx is xx xxx. path\\u003d/xxx/xxx\\&quot;,\\&quot;path\\&quot;:\\&quot;/xxxx /xxx\\&quot;}\\&quot;}&quot;;\r\n\r\n    TransferResponse responseObject = objectMapper.readValue(nestedErrorResponse, TransferResponse.class);\r\n\r\nBut I am getting an exception like below\r\n\r\n    Unexpected character (&#39;t&#39; (code 116)): was expecting comma to separate Object entries\r\n     at [Source: (String)&quot;{&quot;errormessage&quot;:&quot;{&quot;timestamp&quot;:&quot;2021-10- 19T07:57:35.205+0000&quot;,&quot;status&quot;:400,&quot;error&quot;:&quot;Bad Request&quot;,&quot;message&quot;:&quot;Bad Request: xxxx xx is xx xxx. path=/xxxxx/verify&quot;,&quot;path&quot;:&quot;/xxxxx /xxxxx&quot;}&quot;}&quot;; line: 1, column: 21]\r\n\r\nI want to be able to read the value against errormessage as string. Could anyone help me with this?  \r\n\r\n","title":"Can not deserialize JSON with json string inside","body":"<p>I have a json like below. The x's are there to omit sensitive data</p>\n<pre><code>{&quot;errormessage&quot;:&quot;{\\&quot;timestamp\\&quot;:\\&quot;2021-10- 19T07:57:35.205+0000\\&quot;,\\&quot;status\\&quot;:400,\\&quot;error\\&quot;:\\ &quot;Bad Request\\&quot;,\\&quot;message\\&quot;:\\&quot;Bad Request: xxxx xxx xxx xxx xxx. path\\u003d/xxx/verify\\&quot;,\\&quot;path\\&quot;:\\&quot;/xxx /xxx\\&quot;}&quot;}\n</code></pre>\n<p>I am trying to deserialize this json into the class below</p>\n<pre><code>public class TransferResponse {\n\n private Optional&lt;String&gt; timeStamp = Optional.empty();\n private Optional&lt;String&gt; status = Optional.empty();\n private Optional&lt;String&gt; error = Optional.empty();\n\n @JsonAlias(value = {&quot;errorMessage&quot;, &quot;errormessage&quot;})\n private Optional&lt;String&gt; message = Optional.empty();\n private Optional&lt;String&gt; path = Optional.empty();\n\n}\n</code></pre>\n<p>They way I am trying to deserialize it is given below</p>\n<pre><code>final ObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.registerModule(new Jdk8Module());\n\nfinal String nestedErrorResponse = &quot;{\\&quot;errormessage\\&quot;:\\&quot;{\\&quot;timestamp\\&quot;:\\&quot;2021-10- 19T07:57:35.205+0000\\&quot;,\\&quot;status\\&quot;:400,\\&quot;error\\&quot;:\\&quot;Bad Request\\&quot;,\\&quot;message\\&quot;:\\&quot;Bad Request: xxxx xx is xx xxx. path\\u003d/xxx/xxx\\&quot;,\\&quot;path\\&quot;:\\&quot;/xxxx /xxx\\&quot;}\\&quot;}&quot;;\n\nTransferResponse responseObject = objectMapper.readValue(nestedErrorResponse, TransferResponse.class);\n</code></pre>\n<p>But I am getting an exception like below</p>\n<pre><code>Unexpected character ('t' (code 116)): was expecting comma to separate Object entries\n at [Source: (String)&quot;{&quot;errormessage&quot;:&quot;{&quot;timestamp&quot;:&quot;2021-10- 19T07:57:35.205+0000&quot;,&quot;status&quot;:400,&quot;error&quot;:&quot;Bad Request&quot;,&quot;message&quot;:&quot;Bad Request: xxxx xx is xx xxx. path=/xxxxx/verify&quot;,&quot;path&quot;:&quot;/xxxxx /xxxxx&quot;}&quot;}&quot;; line: 1, column: 21]\n</code></pre>\n<p>I want to be able to read the value against errormessage as string. Could anyone help me with this?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1677754955,"post_id":75614516,"comment_id":133402079,"body_markdown":"Please give us the log after reproducing the error page. I also think the @RequestMapping takes a value instead of path as parameter","body":"Please give us the log after reproducing the error page. I also think the @RequestMapping takes a value instead of path as parameter"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1677755235,"post_id":75614516,"comment_id":133402154,"body_markdown":"@grekier you can use either.","body":"@grekier you can use either."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1677755439,"post_id":75614516,"comment_id":133402213,"body_markdown":"File path is not really relevant. What *packages* are these things in, and is the controller definitely on the classpath?","body":"File path is not really relevant. What <i>packages</i> are these things in, and is the controller definitely on the classpath?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1677755842,"post_id":75614516,"comment_id":133402332,"body_markdown":"You need to add your log output to your question, and check that `StudentController` is being instantiated.","body":"You need to add your log output to your question, and check that <code>StudentController</code> is being instantiated."},{"owner":{"account_id":12804526,"reputation":1368,"user_id":9264713,"display_name":"Bahij.Mik"},"score":0,"creation_date":1677764046,"post_id":75614516,"comment_id":133404643,"body_markdown":"Also include your application.properties, maybe it contains the context path set","body":"Also include your application.properties, maybe it contains the context path set"},{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1677764174,"post_id":75614516,"comment_id":133404693,"body_markdown":"Added in the packages, how do I check if StudentController is being instantiated?","body":"Added in the packages, how do I check if StudentController is being instantiated?"},{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1677764194,"post_id":75614516,"comment_id":133404700,"body_markdown":"My application.properties is currently empty!","body":"My application.properties is currently empty!"},{"owner":{"account_id":12804526,"reputation":1368,"user_id":9264713,"display_name":"Bahij.Mik"},"score":0,"creation_date":1677764312,"post_id":75614516,"comment_id":133404746,"body_markdown":"Can you add your module structure?","body":"Can you add your module structure?"},{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1677766000,"post_id":75614516,"comment_id":133405297,"body_markdown":"Have added module structure in.","body":"Have added module structure in."},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1677770296,"post_id":75614516,"comment_id":133406681,"body_markdown":"Please, add `logging.level.org.springframework.web=DEBUG` to your `application.properties` file and update the trace in your question. I kind of suspect","body":"Please, add <code>logging.level.org.springframework.web=DEBUG</code> to your <code>application.properties</code> file and update the trace in your question. I kind of suspect"},{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1677770922,"post_id":75614516,"comment_id":133406875,"body_markdown":"Added and updated trace!","body":"Added and updated trace!"},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1677771297,"post_id":75614516,"comment_id":133407020,"body_markdown":"Oops, I didn&#39;t finish writing my comment but didn&#39;t notice haha. I also wanted to see the trace after you hit your `/test/get` endpoint. This is because, after trying your code on my machine worked first try. The extra bit in application properties should give you more info about how the app handled the request.","body":"Oops, I didn&#39;t finish writing my comment but didn&#39;t notice haha. I also wanted to see the trace after you hit your <code>&#47;test&#47;get</code> endpoint. This is because, after trying your code on my machine worked first try. The extra bit in application properties should give you more info about how the app handled the request."},{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1677771487,"post_id":75614516,"comment_id":133407087,"body_markdown":"Honestly, I have no clue why it does not work on my side at all. Everything seems to be right inline with what tutorials and past projects show. If I were to use the @RestController, @RequestMapping inside my `Service.java` file, the mapping works. This makes me think this could be something with how SpringBoot does not scan the controller file, but my file directory / setup looks correct too.","body":"Honestly, I have no clue why it does not work on my side at all. Everything seems to be right inline with what tutorials and past projects show. If I were to use the @RestController, @RequestMapping inside my <code>Service.java</code> file, the mapping works. This makes me think this could be something with how SpringBoot does not scan the controller file, but my file directory / setup looks correct too."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1677774178,"post_id":75614516,"comment_id":133407974,"body_markdown":"You can list all instantiated beans with localhost:8080/actuator/beans. More here: https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.endpoints","body":"You can list all instantiated beans with localhost:8080/actuator/beans. More here: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.endpoints\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1677763492,"post_id":75615457,"comment_id":133404463,"body_markdown":"What is &quot;this format&quot;? I don&#39;t understand what you&#39;re suggesting. What difference would it make? What&#39;s wrong with their approach?","body":"What is &quot;this format&quot;? I don&#39;t understand what you&#39;re suggesting. What difference would it make? What&#39;s wrong with their approach?"}],"tags":[],"owner":{"account_id":4576970,"reputation":62,"user_id":3715178,"display_name":"selim.aksoy"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677960706,"creation_date":1677760299,"answer_id":75615457,"question_id":75614516,"body_markdown":"try to use \r\n@GetMapping(value = {&quot;/api/v1/get-report&quot;}) \r\n\r\nRegards,","title":"Springboot does not seem to pick up on this endpoint","body":"<p>try to use\n@GetMapping(value = {&quot;/api/v1/get-report&quot;})</p>\n<p>Regards,</p>\n"},{"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1677763447,"post_id":75615523,"comment_id":133404451,"body_markdown":"`value`, the default annotation element, is a synonym for `path`.","body":"<code>value</code>, the default annotation element, is a synonym for <code>path</code>."}],"tags":[],"owner":{"account_id":27914600,"reputation":21,"user_id":21316023,"display_name":"Ruslan Valeev"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678127707,"creation_date":1677760703,"answer_id":75615523,"question_id":75614516,"body_markdown":"try to use `@RequestMapping(&quot;/test&quot;)` instead of `@RequestMapping(path=&quot;/test&quot;)`","title":"Springboot does not seem to pick up on this endpoint","body":"<p>try to use <code>@RequestMapping(&quot;/test&quot;)</code> instead of <code>@RequestMapping(path=&quot;/test&quot;)</code></p>\n"},{"comments":[{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1677770996,"post_id":75616875,"comment_id":133406900,"body_markdown":"I believed i made an initial mistake previously. Both files structures should be correct now.  My `@SpringBootApplication` has the package `package com.clubmgmt.clubmgmtstudentservice;` while my Controller has the package `package com.clubmgmt.clubmgmtstudentservice.student;\n`","body":"I believed i made an initial mistake previously. Both files structures should be correct now.  My <code>@SpringBootApplication</code> has the package <code>package com.clubmgmt.clubmgmtstudentservice;</code> while my Controller has the package <code>package com.clubmgmt.clubmgmtstudentservice.student; </code>"},{"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"score":0,"creation_date":1678581574,"post_id":75616875,"comment_id":133561731,"body_markdown":"Similar to this question, I realised I had whitespaces in my file directory that was being converted into `%20` and not back, therefore when Springboot tried to find the paths it was looking in the wrong folder that did not exist.","body":"Similar to this question, I realised I had whitespaces in my file directory that was being converted into <code>%20</code> and not back, therefore when Springboot tried to find the paths it was looking in the wrong folder that did not exist."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677768780,"creation_date":1677767459,"answer_id":75616875,"question_id":75614516,"body_markdown":"The packages (modules) structure and the files (directories) structure must be the same. You need to move the java files accordingly.\r\n\r\nFor example:\r\n\r\ndemo/Service.java move to src/main/java/com/clubmgmt/clubmgmtstudentservice/\r\n\r\nAs a general rule: avoid modifying the package with just editing the source file. Most IDE have a function &quot;Move Class&quot; doing both - modifying the package and moving the file.","title":"Springboot does not seem to pick up on this endpoint","body":"<p>The packages (modules) structure and the files (directories) structure must be the same. You need to move the java files accordingly.</p>\n<p>For example:</p>\n<p>demo/Service.java move to src/main/java/com/clubmgmt/clubmgmtstudentservice/</p>\n<p>As a general rule: avoid modifying the package with just editing the source file. Most IDE have a function &quot;Move Class&quot; doing both - modifying the package and moving the file.</p>\n"},{"tags":[],"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677813286,"creation_date":1677813286,"answer_id":75622852,"question_id":75614516,"body_markdown":"I have found the problem. TL:DR, one of my parent directories (in this case, my desktop username) had a SPACE in it like `01 Github` which got converted into `01%20Github`. Upon enabling `logging.level.org.springframework=DEBUG` under `application.properties` I saw the following error\r\n```\r\n[D:\\01.%20GitHub\\esdproject\\studentservice\\target\\classes\\com\\clubmgmt\\studentservice] for files matching pattern [**/*.class]: java.nio.file.NoSuchFileException: D:\\01.%20GitHub\\esdproject\\studentservice\\target\\classes\\com\\clubmgmt\\studentservice\r\n```\r\n\r\nThis made me check and realise that the space was not being recognized correctly. I move everything to a folder with no spaces and it works now. Not really sure how it worked with my previous projects, could be a newer version of Springboot that parsed the space different or something.\r\n\r\nPlease avoid spaces they are the devil.","title":"Springboot does not seem to pick up on this endpoint","body":"<p>I have found the problem. TL:DR, one of my parent directories (in this case, my desktop username) had a SPACE in it like <code>01 Github</code> which got converted into <code>01%20Github</code>. Upon enabling <code>logging.level.org.springframework=DEBUG</code> under <code>application.properties</code> I saw the following error</p>\n<pre><code>[D:\\01.%20GitHub\\esdproject\\studentservice\\target\\classes\\com\\clubmgmt\\studentservice] for files matching pattern [**/*.class]: java.nio.file.NoSuchFileException: D:\\01.%20GitHub\\esdproject\\studentservice\\target\\classes\\com\\clubmgmt\\studentservice\n</code></pre>\n<p>This made me check and realise that the space was not being recognized correctly. I move everything to a folder with no spaces and it works now. Not really sure how it worked with my previous projects, could be a newer version of Springboot that parsed the space different or something.</p>\n<p>Please avoid spaces they are the devil.</p>\n"}],"owner":{"account_id":24766666,"reputation":193,"user_id":18650474,"display_name":"Peek0"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75622852,"answer_count":4,"score":0,"last_activity_date":1678127707,"creation_date":1677754662,"question_id":75614516,"body_markdown":"I currently have two files. The first file is simple `Service.java` which contains the following code in the file path `demo/Service.java` \r\n```\r\npackage com.clubmgmt.clubmgmtstudentservice;\r\n\r\n@SpringBootApplication\r\npublic class Service {\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Service.class, args);\r\n\t}\r\n}\r\n```\r\n\r\nMy second file `StudentController.java` belongs in the file path `demo/student/StudentController.java` and contains\r\n```\r\npackage com.clubmgmt.clubmgmtstudentservice.student;\r\n\r\n@RestController\r\n@RequestMapping(path=&quot;/test&quot;)\r\npublic class StudentController {\r\n    @GetMapping(&quot;/get&quot;) //Root page\r\n    public List&lt;String&gt; getStudents() {\r\n        return List.of(&quot;Please&quot;, &quot;Work&quot;);\r\n        \r\n    }\r\n```\r\nHowever, accessing `localhost:8080/test/get` seems to still give me a whitelabel error page. I have tried to resolve the issues but everything seems to be in order. When i run the springboot application from `Service.java`, there seems to be no error either. The route shows up under the EndpointMappings of a VSCODE plugin as well. \r\nThis is the SpringBoot logs when running the application\r\n```\r\n D:\\01. GitHub\\personal-archive\\schoolRelated\\esd-project\\ESDGroup2\\club-mgmt-student-service&gt; D: &amp;&amp; cd &quot;D:\\01. GitHub\\personal-archive\\schoolRelated\\esd-project\\ESDGroup2\\club-mgmt-student-service&quot; &amp;&amp; cmd /C &quot;&quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; @C:\\Users\\limxu\\AppData\\Local\\Temp\\cp_dbr9avx6o54yics09eig13usu.argfile com.clubmgmt.clubmgmtstudentservice.ClubMgmtStudentServiceApplication &quot;\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.3)\r\n\r\n2023-03-02T23:26:20.845+08:00  INFO 20340 --- [           main] c.c.c.ClubMgmtStudentServiceApplication  : Starting ClubMgmtStudentServiceApplication using Java 19.0.1 with PID 20340 (D:\\01. GitHub\\personal-archive\\schoolRelated\\esd-project\\ESDGroup2\\club-mgmt-student-service\\target\\classes started by limxu in D:\\01. GitHub\\personal-archive\\schoolRelated\\esd-project\\ESDGroup2\\club-mgmt-student-service)\r\n2023-03-02T23:26:20.850+08:00  INFO 20340 --- [           main] c.c.c.ClubMgmtStudentServiceApplication  : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-03-02T23:26:22.490+08:00  INFO 20340 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-03-02T23:26:22.504+08:00  INFO 20340 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-03-02T23:26:22.504+08:00  INFO 20340 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\r\n2023-03-02T23:26:22.601+08:00  INFO 20340 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-03-02T23:26:22.602+08:00  INFO 20340 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1648 ms\r\n2023-03-02T23:26:22.772+08:00 DEBUG 20340 --- [           main] o.s.w.f.ServerHttpObservationFilter      : Filter &#39;serverHttpObservationFilter&#39; configured for use\r\n2023-03-02T23:26:22.943+08:00 DEBUG 20340 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice\r\n2023-03-02T23:26:23.080+08:00 DEBUG 20340 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 2 mappings in &#39;requestMappingHandlerMapping&#39;\r\n2023-03-02T23:26:23.116+08:00 DEBUG 20340 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in &#39;resourceHandlerMapping&#39;\r\n2023-03-02T23:26:23.130+08:00 DEBUG 20340 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice\r\n2023-03-02T23:26:23.456+08:00  INFO 20340 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path &#39;/actuator&#39;\r\n2023-03-02T23:26:23.558+08:00  INFO 20340 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-03-02T23:26:23.580+08:00  INFO 20340 --- [           main] c.c.c.ClubMgmtStudentServiceApplication  : Started ClubMgmtStudentServiceApplication in 3.389 seconds (process running for 3.867)\r\n2023-03-02T23:26:23.948+08:00  INFO 20340 --- [on(3)-127.0.0.1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-03-02T23:26:23.949+08:00  INFO 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-03-02T23:26:23.949+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver\r\n2023-03-02T23:26:23.950+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver\r\n2023-03-02T23:26:23.952+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver\r\n2023-03-02T23:26:23.954+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5a346d64\r\n2023-03-02T23:26:23.955+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1aff1d9c   \r\n2023-03-02T23:26:23.956+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails=&#39;false&#39;: request parameters and headers will be masked \r\nto prevent unsafe logging of potentially sensitive data\r\n2023-03-02T23:26:23.958+08:00  INFO 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 8 ms\r\n```\r\n\r\nThe error I am getting when trying to access `localhost:8080/test/get` is below\r\n```\r\nWhitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n\r\nThu Mar 02 21:34:54 SGT 2023\r\nThere was an unexpected error (type=Not Found, status=404).\r\n```\r\n\r\nModule Structure is as follows\r\n```\r\nsrc/\r\n|__main/\r\n   |___java/\r\n      |___com/\r\n          |___clubmgmt/\r\n               |__clubmgmtstudentservice/\r\n                  |__Service.java\r\n                  |__student/\r\n                     |__StudentController.java\r\n                     |__Student.java\r\n\r\n\r\n```","title":"Springboot does not seem to pick up on this endpoint","body":"<p>I currently have two files. The first file is simple <code>Service.java</code> which contains the following code in the file path <code>demo/Service.java</code></p>\n<pre><code>package com.clubmgmt.clubmgmtstudentservice;\n\n@SpringBootApplication\npublic class Service {\n    public static void main(String[] args) {\n        SpringApplication.run(Service.class, args);\n    }\n}\n</code></pre>\n<p>My second file <code>StudentController.java</code> belongs in the file path <code>demo/student/StudentController.java</code> and contains</p>\n<pre><code>package com.clubmgmt.clubmgmtstudentservice.student;\n\n@RestController\n@RequestMapping(path=&quot;/test&quot;)\npublic class StudentController {\n    @GetMapping(&quot;/get&quot;) //Root page\n    public List&lt;String&gt; getStudents() {\n        return List.of(&quot;Please&quot;, &quot;Work&quot;);\n        \n    }\n</code></pre>\n<p>However, accessing <code>localhost:8080/test/get</code> seems to still give me a whitelabel error page. I have tried to resolve the issues but everything seems to be in order. When i run the springboot application from <code>Service.java</code>, there seems to be no error either. The route shows up under the EndpointMappings of a VSCODE plugin as well.\nThis is the SpringBoot logs when running the application</p>\n<pre><code> D:\\01. GitHub\\personal-archive\\schoolRelated\\esd-project\\ESDGroup2\\club-mgmt-student-service&gt; D: &amp;&amp; cd &quot;D:\\01. GitHub\\personal-archive\\schoolRelated\\esd-project\\ESDGroup2\\club-mgmt-student-service&quot; &amp;&amp; cmd /C &quot;&quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; @C:\\Users\\limxu\\AppData\\Local\\Temp\\cp_dbr9avx6o54yics09eig13usu.argfile com.clubmgmt.clubmgmtstudentservice.ClubMgmtStudentServiceApplication &quot;\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.3)\n\n2023-03-02T23:26:20.845+08:00  INFO 20340 --- [           main] c.c.c.ClubMgmtStudentServiceApplication  : Starting ClubMgmtStudentServiceApplication using Java 19.0.1 with PID 20340 (D:\\01. GitHub\\personal-archive\\schoolRelated\\esd-project\\ESDGroup2\\club-mgmt-student-service\\target\\classes started by limxu in D:\\01. GitHub\\personal-archive\\schoolRelated\\esd-project\\ESDGroup2\\club-mgmt-student-service)\n2023-03-02T23:26:20.850+08:00  INFO 20340 --- [           main] c.c.c.ClubMgmtStudentServiceApplication  : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-03-02T23:26:22.490+08:00  INFO 20340 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-03-02T23:26:22.504+08:00  INFO 20340 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-03-02T23:26:22.504+08:00  INFO 20340 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\n2023-03-02T23:26:22.601+08:00  INFO 20340 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-03-02T23:26:22.602+08:00  INFO 20340 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1648 ms\n2023-03-02T23:26:22.772+08:00 DEBUG 20340 --- [           main] o.s.w.f.ServerHttpObservationFilter      : Filter 'serverHttpObservationFilter' configured for use\n2023-03-02T23:26:22.943+08:00 DEBUG 20340 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice\n2023-03-02T23:26:23.080+08:00 DEBUG 20340 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 2 mappings in 'requestMappingHandlerMapping'\n2023-03-02T23:26:23.116+08:00 DEBUG 20340 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'\n2023-03-02T23:26:23.130+08:00 DEBUG 20340 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice\n2023-03-02T23:26:23.456+08:00  INFO 20340 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'\n2023-03-02T23:26:23.558+08:00  INFO 20340 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-03-02T23:26:23.580+08:00  INFO 20340 --- [           main] c.c.c.ClubMgmtStudentServiceApplication  : Started ClubMgmtStudentServiceApplication in 3.389 seconds (process running for 3.867)\n2023-03-02T23:26:23.948+08:00  INFO 20340 --- [on(3)-127.0.0.1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-03-02T23:26:23.949+08:00  INFO 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-03-02T23:26:23.949+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver\n2023-03-02T23:26:23.950+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver\n2023-03-02T23:26:23.952+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver\n2023-03-02T23:26:23.954+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5a346d64\n2023-03-02T23:26:23.955+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1aff1d9c   \n2023-03-02T23:26:23.956+08:00 DEBUG 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked \nto prevent unsafe logging of potentially sensitive data\n2023-03-02T23:26:23.958+08:00  INFO 20340 --- [on(3)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 8 ms\n</code></pre>\n<p>The error I am getting when trying to access <code>localhost:8080/test/get</code> is below</p>\n<pre><code>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nThu Mar 02 21:34:54 SGT 2023\nThere was an unexpected error (type=Not Found, status=404).\n</code></pre>\n<p>Module Structure is as follows</p>\n<pre><code>src/\n|__main/\n   |___java/\n      |___com/\n          |___clubmgmt/\n               |__clubmgmtstudentservice/\n                  |__Service.java\n                  |__student/\n                     |__StudentController.java\n                     |__Student.java\n\n\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","spring-data-jpa","abstract-class"],"answers":[{"tags":[],"owner":{"account_id":27841084,"reputation":1,"user_id":21257560,"display_name":"JJ_Back"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678127696,"creation_date":1678127696,"answer_id":75654585,"question_id":72097945,"body_markdown":"Check if any of the following will work:\r\n\r\n1. Remove JsonSubTypes and JsonTypeInfo annotations\r\n\r\n2. Check if your classes inheriting from &quot;Vehicle&quot; do not contain @TypeAlias(&quot;Car/Moto&quot;) annotation - the value given there overrides the &quot;_class&quot; field in the default MongoTemplate configuration.\r\n\r\n3. Download the problematic record from the MongoDb database and make sure that the &quot;_class&quot; field contains the correct (full) classpath for Car/Motorcycle classes.\r\n\r\n4. You can try the collection name in the @Document annotation\r\n\r\n5. Update drivers and libraries related to Mongo.","title":"Use abstract class as field in mongodb with Spring Data Java","body":"<p>Check if any of the following will work:</p>\n<ol>\n<li><p>Remove JsonSubTypes and JsonTypeInfo annotations</p>\n</li>\n<li><p>Check if your classes inheriting from &quot;Vehicle&quot; do not contain @TypeAlias(&quot;Car/Moto&quot;) annotation - the value given there overrides the &quot;_class&quot; field in the default MongoTemplate configuration.</p>\n</li>\n<li><p>Download the problematic record from the MongoDb database and make sure that the &quot;_class&quot; field contains the correct (full) classpath for Car/Motorcycle classes.</p>\n</li>\n<li><p>You can try the collection name in the @Document annotation</p>\n</li>\n<li><p>Update drivers and libraries related to Mongo.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":23472598,"reputation":39,"user_id":17525864,"display_name":"Giandonato Farina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":996,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1678127696,"creation_date":1651572968,"question_id":72097945,"body_markdown":"I&#39;m trying to use an abstract class as field of a MongoDB document, using Spring Data. Here&#39;s an example (I&#39;m using lombok for getter/setter):\r\n\r\n```\r\n@Data\r\n@Document\r\npublic class User {\r\n   private String id;\r\n   private String name;\r\n   private List&lt;Vehicle&gt; vehicles;\r\n}\r\n\r\n@Data\r\npublic abstract class Vehicle {\r\n   private String type; \r\n}\r\n\r\n@Data\r\npublic class Car extends Vehicle {\r\n   private int seats;\r\n   private String fuel;\r\n}\r\n\r\n@Data\r\npublic class Motorcycle extends Vehicle {\r\n   private int cc;\r\n}\r\n```\r\n\r\nClearly, this code does not work because it cannot instantiate the Vehicle class when I read data from the DB. Now my question is: how can automatically instantiate the correct subclass basing on the type field of the abstarct class?\r\n\r\nThanks in advance.\r\n\r\n**Edit:**\r\n\r\nI tried using the following method to solve, but it seems not work:\r\n```\r\n@Data\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;)\r\n@JsonSubTypes({\r\n        @JsonSubTypes.Type(value = Car.class, name = &quot;CAR&quot;),\r\n        @JsonSubTypes.Type(value = Motorcycle.class, name = &quot;MOTORCYCLE&quot;)\r\n})\r\npublic abstract class Vehicle {\r\n   private String type; \r\n}\r\n```\r\n","title":"Use abstract class as field in mongodb with Spring Data Java","body":"<p>I'm trying to use an abstract class as field of a MongoDB document, using Spring Data. Here's an example (I'm using lombok for getter/setter):</p>\n<pre><code>@Data\n@Document\npublic class User {\n   private String id;\n   private String name;\n   private List&lt;Vehicle&gt; vehicles;\n}\n\n@Data\npublic abstract class Vehicle {\n   private String type; \n}\n\n@Data\npublic class Car extends Vehicle {\n   private int seats;\n   private String fuel;\n}\n\n@Data\npublic class Motorcycle extends Vehicle {\n   private int cc;\n}\n</code></pre>\n<p>Clearly, this code does not work because it cannot instantiate the Vehicle class when I read data from the DB. Now my question is: how can automatically instantiate the correct subclass basing on the type field of the abstarct class?</p>\n<p>Thanks in advance.</p>\n<p><strong>Edit:</strong></p>\n<p>I tried using the following method to solve, but it seems not work:</p>\n<pre><code>@Data\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;)\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = Car.class, name = &quot;CAR&quot;),\n        @JsonSubTypes.Type(value = Motorcycle.class, name = &quot;MOTORCYCLE&quot;)\n})\npublic abstract class Vehicle {\n   private String type; \n}\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1526647391,"post_id":50410373,"comment_id":87838541,"body_markdown":"There&#39;s likely no nice way to do this. `TextFlow` is really designed for multiline text, which is why there is no ellipsis support, and there&#39;s no other obvious way to highlight a part of text. Your simplest approach might be to populate the cell with a custom `Pane` subclass. Override the `layoutChildren()` method. Split the text into the minimum number of `Label`s needed and set the background on the highlighted portions. Then layout the labels horizontally, truncating and adding ellipsis if necessary.","body":"There&#39;s likely no nice way to do this. <code>TextFlow</code> is really designed for multiline text, which is why there is no ellipsis support, and there&#39;s no other obvious way to highlight a part of text. Your simplest approach might be to populate the cell with a custom <code>Pane</code> subclass. Override the <code>layoutChildren()</code> method. Split the text into the minimum number of <code>Label</code>s needed and set the background on the highlighted portions. Then layout the labels horizontally, truncating and adding ellipsis if necessary."},{"owner":{"account_id":306956,"reputation":13878,"user_id":617996,"accept_rate":93,"display_name":"PrimosK"},"score":0,"creation_date":1526648976,"post_id":50410373,"comment_id":87839595,"body_markdown":"That&#39;s exactly what I was afraid of.. Another concern I have WRT this approach is rendering performance in `TableView` but nevertheless - will try it out.\n\nIf anyone has any other ideas please feel free to share them.\n\nSide note:\nDo you maybe know if there is anything being done WRT this for any of the future JavaFX releases?","body":"That&#39;s exactly what I was afraid of.. Another concern I have WRT this approach is rendering performance in <code>TableView</code> but nevertheless - will try it out.  If anyone has any other ideas please feel free to share them.  Side note: Do you maybe know if there is anything being done WRT this for any of the future JavaFX releases?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1526651717,"post_id":50410373,"comment_id":87841412,"body_markdown":"Rendering performance really shouldn&#39;t be problematic with this approach. You are only ever rendering visible cells (so just a handful of them); the table view mechanism makes sure this happens reasonably efficiently. So you&#39;d be splitting, say 20-30 strings at a time, and likely laying out (at the very most) something like 200 labels. That should not be too time-consuming.","body":"Rendering performance really shouldn&#39;t be problematic with this approach. You are only ever rendering visible cells (so just a handful of them); the table view mechanism makes sure this happens reasonably efficiently. So you&#39;d be splitting, say 20-30 strings at a time, and likely laying out (at the very most) something like 200 labels. That should not be too time-consuming."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1526655762,"post_id":50410373,"comment_id":87844127,"body_markdown":"Quick proof of concept: not tested yet in the context of a table cell. https://gist.github.com/james-d/22dcea3dc58be41a9f473b2ae0d36582","body":"Quick proof of concept: not tested yet in the context of a table cell. <a href=\"https://gist.github.com/james-d/22dcea3dc58be41a9f473b2ae0d36582\" rel=\"nofollow noreferrer\">gist.github.com/james-d/22dcea3dc58be41a9f473b2ae0d36582</a>"}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1526684826,"creation_date":1526684826,"answer_id":50420284,"question_id":50410373,"body_markdown":"It&#39;s not too hard to write a reasonably-performing custom layout that works like a simplified `HBox` and lays some labels out left to right. If you provide a `text` property and `highlightedText` property, you can just create the appropriate labels when one changes. This is not intended to be production quality, but should give you a good starting point:\r\n\r\n    import javafx.beans.property.StringProperty;\r\n    import javafx.beans.property.StringPropertyBase;\r\n    import javafx.css.PseudoClass;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.layout.Pane;\r\n    \r\n    public class HighlightingLabelLayout extends Pane {\r\n    \r\n        private static final PseudoClass HIGHLIGHTED = PseudoClass.getPseudoClass(&quot;highlighted&quot;);\r\n        \r\n        private boolean needsRebuild = true ;\r\n    \r\n        private final Label ellipsis = new Label(&quot;...&quot;);\r\n        \r\n        private final StringProperty text = new StringPropertyBase() {\r\n            \r\n            @Override\r\n            public String getName() {\r\n                return &quot;text&quot; ;\r\n            }\r\n            \r\n            @Override\r\n            public Object getBean() {\r\n                return HighlightingLabelLayout.this ;\r\n            }\r\n            \r\n            @Override\r\n            protected void invalidated() {\r\n                super.invalidated();\r\n                needsRebuild = true ;\r\n                requestLayout();\r\n            }\r\n        };\r\n        \r\n        private final StringProperty highlightText = new StringPropertyBase() {\r\n            \r\n            @Override\r\n            public String getName() {\r\n                return &quot;highlightText&quot; ;\r\n            }\r\n            \r\n            @Override\r\n            public Object getBean() {\r\n                return HighlightingLabelLayout.this ;\r\n            }\r\n            \r\n            @Override\r\n            protected void invalidated() {\r\n                super.invalidated();\r\n                needsRebuild = true ;\r\n                requestLayout();\r\n            }\r\n        };\r\n    \r\n        public final StringProperty textProperty() {\r\n            return this.text;\r\n        }\r\n        \r\n    \r\n        public final String getText() {\r\n            return this.textProperty().get();\r\n        }\r\n        \r\n    \r\n        public final void setText(final String text) {\r\n            this.textProperty().set(text);\r\n        }\r\n        \r\n    \r\n        public final StringProperty highlightTextProperty() {\r\n            return this.highlightText;\r\n        }\r\n        \r\n    \r\n        public final String getHighlightText() {\r\n            return this.highlightTextProperty().get();\r\n        }\r\n        \r\n    \r\n        public final void setHighlightText(final String highlightText) {\r\n            this.highlightTextProperty().set(highlightText);\r\n        }\r\n        \r\n        public HighlightingLabelLayout() {\r\n            ellipsis.getStyleClass().add(&quot;ellipsis&quot;);\r\n            getStylesheets().add(getClass().getResource(&quot;highlighting-label-layout.css&quot;).toExternalForm());\r\n        }\r\n        \r\n        @Override\r\n        protected void layoutChildren() {\r\n            if (needsRebuild) {\r\n                rebuild() ;\r\n            }\r\n            double width = getWidth();\r\n            double x = snappedLeftInset() ;\r\n            double y = snappedTopInset() ;\r\n            boolean truncated = false ;\r\n            for (Node label : getChildren()) {\r\n                double labelWidth = label.prefWidth(-1);\r\n                double labelHeight = label.prefHeight(labelWidth);\r\n                if (label == ellipsis) {\r\n                    label.resizeRelocate(width - labelWidth - snappedRightInset(), y, labelWidth, labelHeight);\r\n                    continue ;\r\n                }\r\n                if (truncated) {\r\n                    label.setVisible(false);\r\n                    continue ;\r\n                }\r\n                if (labelWidth + x &gt; width - snappedLeftInset() - snappedRightInset()) {\r\n                    label.resizeRelocate(x, y, width - snappedLeftInset() - snappedRightInset() - x, labelHeight);\r\n                    truncated = true ;\r\n                    label.setVisible(true);\r\n                    x = width - snappedRightInset();\r\n                    continue ;\r\n                }\r\n                label.resizeRelocate(x, y, labelWidth, labelHeight);\r\n                x+=labelWidth ;\r\n            }\r\n            ellipsis.setVisible(truncated);\r\n        }\r\n        \r\n        @Override\r\n        protected double computePrefWidth(double height) {\r\n            if (needsRebuild) {\r\n                rebuild();\r\n            }\r\n            double width = 0 ;\r\n            for (Node label : getChildren()) {\r\n                if (label != ellipsis) {\r\n                    width += label.prefWidth(height);\r\n                }\r\n            }\r\n            return width ;\r\n        }\r\n        \r\n        @Override\r\n        protected double computeMaxWidth(double height) {\r\n            return computePrefWidth(height);\r\n        }\r\n        \r\n        @Override\r\n        protected double computeMinWidth(double height) {\r\n            return Math.min(ellipsis.minWidth(height), computePrefWidth(height));\r\n        }\r\n        \r\n        @Override\r\n        protected double computePrefHeight(double width) {\r\n            if (needsRebuild) {\r\n                rebuild();\r\n            }\r\n            double height = 0 ;\r\n            for (Node label : getChildren()) {\r\n                if (label != ellipsis) {\r\n                    double labelWidth = label.prefWidth(-1);\r\n                    double labelHeight = label.prefHeight(labelWidth);\r\n                    if (labelHeight &gt; height) {\r\n                        height = labelHeight ;\r\n                    }\r\n                }\r\n            }\r\n            return height ;\r\n        }\r\n        \r\n        @Override\r\n        protected double computeMinHeight(double width) {\r\n            return Math.min(computePrefHeight(width), ellipsis.prefHeight(ellipsis.prefWidth(-1)));\r\n        }\r\n        \r\n        @Override\r\n        protected double computeMaxHeight(double width) {\r\n            return computePrefHeight(width);\r\n        }\r\n        \r\n        // Performance could probably be improved by caching and reusing the labels...\r\n        private void rebuild() {\r\n            String[] words = text.get().split(&quot;\\\\s&quot;);\r\n            String highlight = highlightText.get();\r\n            getChildren().clear();\r\n            StringBuffer buffer = new StringBuffer();\r\n            boolean addLeadingSpace = false ;\r\n            for (int i = 0 ; i &lt; words.length ; i++) {\r\n                if (words[i].equals(highlight)) {\r\n                    if ( i &gt; 0) {\r\n                        getChildren().add(new Label(buffer.toString()));\r\n                        buffer.setLength(0);\r\n                    }\r\n                    Label label = new Label(words[i]);\r\n                    label.pseudoClassStateChanged(HIGHLIGHTED, true);\r\n                    addLeadingSpace = true ;\r\n                    getChildren().add(label);\r\n                } else {\r\n                    if (addLeadingSpace) {\r\n                        buffer.append(&#39; &#39;);\r\n                    }\r\n                    buffer.append(words[i]);\r\n                    if (i &lt; words.length - 1) {\r\n                        buffer.append(&#39; &#39;);\r\n                    }\r\n                    addLeadingSpace = false ;\r\n                }\r\n            }\r\n            if (buffer.length() &gt; 0) {\r\n                getChildren().add(new Label(buffer.toString()));\r\n            }\r\n            getChildren().add(ellipsis);\r\n            \r\n            needsRebuild = false ;\r\n        }\r\n        \r\n    }\r\n\r\nand the corresponding CSS file\r\n\r\n&lt;!-- language: lang-css --&gt;\r\n\r\n    .label {\r\n        -highlight-color: yellow ;\r\n        -fx-background-color: -fx-background ;\r\n        -fx-ellipsis-string: &quot;&quot; ;\r\n    }\r\n    .label:highlighted {\r\n        -fx-background: -highlight-color ;\r\n    }\r\n\r\nAs commented, there are some performance improvements that could be leveraged if needed.\r\n\r\nHere&#39;s a quick test, using this in table cells:\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Random;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.property.StringProperty;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class HighlightingLabelLayoutTest extends Application {\r\n    \r\n    \t@Override\r\n    \tpublic void start(Stage primaryStage) {\r\n    \t    \r\n    \t    TextField searchField = new TextField();\r\n    \t    \r\n    \t    TableView&lt;Item&gt; table = new TableView&lt;&gt;();\r\n    \t    TableColumn&lt;Item, String&gt; itemCol = new TableColumn&lt;&gt;(&quot;Item&quot;);\r\n    \t    itemCol.setCellValueFactory(cellData -&gt; cellData.getValue().nameProperty());\r\n    \t    table.getColumns().add(itemCol);\r\n    \t    \r\n    \t    TableColumn&lt;Item, String&gt; dataCol = new TableColumn&lt;&gt;(&quot;Data&quot;);\r\n    \t    dataCol.setCellValueFactory(cellData -&gt; cellData.getValue().dataProperty());\r\n    \t    dataCol.setPrefWidth(200);\r\n    \t    table.getColumns().add(dataCol);\r\n    \t    \r\n    \t    dataCol.setCellFactory(col -&gt; new TableCell&lt;Item, String&gt;() {\r\n    \t        private final HighlightingLabelLayout layout = new HighlightingLabelLayout();\r\n    \t        \r\n    \t        {\r\n    \t            layout.highlightTextProperty().bind(searchField.textProperty());\r\n    \t        }\r\n    \t        \r\n    \t        @Override\r\n    \t        protected void updateItem(String data, boolean empty) {\r\n    \t            super.updateItem(data, empty);\r\n    \t            if (empty) {\r\n    \t                setGraphic(null);\r\n    \t            } else {\r\n    \t                layout.setText(data);\r\n    \t                setGraphic(layout);\r\n    \t            }\r\n    \t        }\r\n    \t    });\r\n    \t    \r\n    \t    table.getItems().setAll(generateData(200, 10));\r\n    \t    \r\n    \t    \r\n    \t\t\r\n    \t\tVBox root = new VBox(5, searchField, table);\r\n    \t\tprimaryStage.setScene(new Scene(root));\r\n    \t\tprimaryStage.show();\r\n    \t}\r\n    \t\r\n    \tprivate List&lt;Item&gt; generateData(int numItems, int wordsPerItem) {\r\n    \t    List&lt;Item&gt; items = new ArrayList&lt;&gt;();\r\n    \t    Random rng = new Random();\r\n    \t    for (int i = 1 ; i &lt;= numItems ; i++) {\r\n    \t        String name = &quot;Item &quot;+i;\r\n    \t        List&lt;String&gt; words = new ArrayList&lt;&gt;();\r\n    \t        for (int j = 0 ; j &lt; wordsPerItem ; j++) {\r\n    \t            words.add(WORDS[rng.nextInt(WORDS.length)].toLowerCase());\r\n    \t        }\r\n    \t        String data = String.join(&quot; &quot;, words);\r\n    \t        items.add(new Item(name, data));\r\n    \t    }\r\n    \t    return items ;\r\n    \t}\r\n    \t\r\n    \tpublic static class Item {\r\n    \t    private final StringProperty name = new SimpleStringProperty();\r\n    \t    private final StringProperty data = new SimpleStringProperty();\r\n    \t    \r\n    \t    public Item(String name, String data) {\r\n    \t        setName(name);\r\n    \t        setData(data);\r\n    \t    }\r\n    \r\n            public final StringProperty nameProperty() {\r\n                return this.name;\r\n            }\r\n            \r\n    \r\n            public final String getName() {\r\n                return this.nameProperty().get();\r\n            }\r\n            \r\n    \r\n            public final void setName(final String name) {\r\n                this.nameProperty().set(name);\r\n            }\r\n            \r\n    \r\n            public final StringProperty dataProperty() {\r\n                return this.data;\r\n            }\r\n            \r\n    \r\n            public final String getData() {\r\n                return this.dataProperty().get();\r\n            }\r\n            \r\n    \r\n            public final void setData(final String data) {\r\n                this.dataProperty().set(data);\r\n            }\r\n            \r\n    \t    \r\n    \t    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tlaunch(args);\r\n    \t}\r\n    \t\r\n    \tprivate static final String[] WORDS = (&quot;Lorem ipsum dolor sit amet, &quot;\r\n    \t        + &quot;consectetur adipiscing elit. Sed pulvinar massa at arcu ultrices, &quot;\r\n    \t        + &quot;nec elementum velit vestibulum. Integer eget elit justo. &quot;\r\n    \t        + &quot;Orci varius natoque penatibus et magnis dis parturient montes, &quot;\r\n    \t        + &quot;nascetur ridiculus mus. Duis ultricies diam turpis, eget accumsan risus convallis a. &quot;\r\n    \t        + &quot;Pellentesque rhoncus viverra sem, sed consequat lorem.&quot;).split(&quot;\\\\W&quot;) ;\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/w4NJ1.png","title":"JavaFX&#39;s TableView with highlighted text and ellipsis functionality","body":"<p>It's not too hard to write a reasonably-performing custom layout that works like a simplified <code>HBox</code> and lays some labels out left to right. If you provide a <code>text</code> property and <code>highlightedText</code> property, you can just create the appropriate labels when one changes. This is not intended to be production quality, but should give you a good starting point:</p>\n\n<pre><code>import javafx.beans.property.StringProperty;\nimport javafx.beans.property.StringPropertyBase;\nimport javafx.css.PseudoClass;\nimport javafx.scene.Node;\nimport javafx.scene.control.Label;\nimport javafx.scene.layout.Pane;\n\npublic class HighlightingLabelLayout extends Pane {\n\n    private static final PseudoClass HIGHLIGHTED = PseudoClass.getPseudoClass(\"highlighted\");\n\n    private boolean needsRebuild = true ;\n\n    private final Label ellipsis = new Label(\"...\");\n\n    private final StringProperty text = new StringPropertyBase() {\n\n        @Override\n        public String getName() {\n            return \"text\" ;\n        }\n\n        @Override\n        public Object getBean() {\n            return HighlightingLabelLayout.this ;\n        }\n\n        @Override\n        protected void invalidated() {\n            super.invalidated();\n            needsRebuild = true ;\n            requestLayout();\n        }\n    };\n\n    private final StringProperty highlightText = new StringPropertyBase() {\n\n        @Override\n        public String getName() {\n            return \"highlightText\" ;\n        }\n\n        @Override\n        public Object getBean() {\n            return HighlightingLabelLayout.this ;\n        }\n\n        @Override\n        protected void invalidated() {\n            super.invalidated();\n            needsRebuild = true ;\n            requestLayout();\n        }\n    };\n\n    public final StringProperty textProperty() {\n        return this.text;\n    }\n\n\n    public final String getText() {\n        return this.textProperty().get();\n    }\n\n\n    public final void setText(final String text) {\n        this.textProperty().set(text);\n    }\n\n\n    public final StringProperty highlightTextProperty() {\n        return this.highlightText;\n    }\n\n\n    public final String getHighlightText() {\n        return this.highlightTextProperty().get();\n    }\n\n\n    public final void setHighlightText(final String highlightText) {\n        this.highlightTextProperty().set(highlightText);\n    }\n\n    public HighlightingLabelLayout() {\n        ellipsis.getStyleClass().add(\"ellipsis\");\n        getStylesheets().add(getClass().getResource(\"highlighting-label-layout.css\").toExternalForm());\n    }\n\n    @Override\n    protected void layoutChildren() {\n        if (needsRebuild) {\n            rebuild() ;\n        }\n        double width = getWidth();\n        double x = snappedLeftInset() ;\n        double y = snappedTopInset() ;\n        boolean truncated = false ;\n        for (Node label : getChildren()) {\n            double labelWidth = label.prefWidth(-1);\n            double labelHeight = label.prefHeight(labelWidth);\n            if (label == ellipsis) {\n                label.resizeRelocate(width - labelWidth - snappedRightInset(), y, labelWidth, labelHeight);\n                continue ;\n            }\n            if (truncated) {\n                label.setVisible(false);\n                continue ;\n            }\n            if (labelWidth + x &gt; width - snappedLeftInset() - snappedRightInset()) {\n                label.resizeRelocate(x, y, width - snappedLeftInset() - snappedRightInset() - x, labelHeight);\n                truncated = true ;\n                label.setVisible(true);\n                x = width - snappedRightInset();\n                continue ;\n            }\n            label.resizeRelocate(x, y, labelWidth, labelHeight);\n            x+=labelWidth ;\n        }\n        ellipsis.setVisible(truncated);\n    }\n\n    @Override\n    protected double computePrefWidth(double height) {\n        if (needsRebuild) {\n            rebuild();\n        }\n        double width = 0 ;\n        for (Node label : getChildren()) {\n            if (label != ellipsis) {\n                width += label.prefWidth(height);\n            }\n        }\n        return width ;\n    }\n\n    @Override\n    protected double computeMaxWidth(double height) {\n        return computePrefWidth(height);\n    }\n\n    @Override\n    protected double computeMinWidth(double height) {\n        return Math.min(ellipsis.minWidth(height), computePrefWidth(height));\n    }\n\n    @Override\n    protected double computePrefHeight(double width) {\n        if (needsRebuild) {\n            rebuild();\n        }\n        double height = 0 ;\n        for (Node label : getChildren()) {\n            if (label != ellipsis) {\n                double labelWidth = label.prefWidth(-1);\n                double labelHeight = label.prefHeight(labelWidth);\n                if (labelHeight &gt; height) {\n                    height = labelHeight ;\n                }\n            }\n        }\n        return height ;\n    }\n\n    @Override\n    protected double computeMinHeight(double width) {\n        return Math.min(computePrefHeight(width), ellipsis.prefHeight(ellipsis.prefWidth(-1)));\n    }\n\n    @Override\n    protected double computeMaxHeight(double width) {\n        return computePrefHeight(width);\n    }\n\n    // Performance could probably be improved by caching and reusing the labels...\n    private void rebuild() {\n        String[] words = text.get().split(\"\\\\s\");\n        String highlight = highlightText.get();\n        getChildren().clear();\n        StringBuffer buffer = new StringBuffer();\n        boolean addLeadingSpace = false ;\n        for (int i = 0 ; i &lt; words.length ; i++) {\n            if (words[i].equals(highlight)) {\n                if ( i &gt; 0) {\n                    getChildren().add(new Label(buffer.toString()));\n                    buffer.setLength(0);\n                }\n                Label label = new Label(words[i]);\n                label.pseudoClassStateChanged(HIGHLIGHTED, true);\n                addLeadingSpace = true ;\n                getChildren().add(label);\n            } else {\n                if (addLeadingSpace) {\n                    buffer.append(' ');\n                }\n                buffer.append(words[i]);\n                if (i &lt; words.length - 1) {\n                    buffer.append(' ');\n                }\n                addLeadingSpace = false ;\n            }\n        }\n        if (buffer.length() &gt; 0) {\n            getChildren().add(new Label(buffer.toString()));\n        }\n        getChildren().add(ellipsis);\n\n        needsRebuild = false ;\n    }\n\n}\n</code></pre>\n\n<p>and the corresponding CSS file</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.label {\n    -highlight-color: yellow ;\n    -fx-background-color: -fx-background ;\n    -fx-ellipsis-string: \"\" ;\n}\n.label:highlighted {\n    -fx-background: -highlight-color ;\n}\n</code></pre>\n\n<p>As commented, there are some performance improvements that could be leveraged if needed.</p>\n\n<p>Here's a quick test, using this in table cells:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Random;\n\nimport javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.property.StringProperty;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\npublic class HighlightingLabelLayoutTest extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n\n        TextField searchField = new TextField();\n\n        TableView&lt;Item&gt; table = new TableView&lt;&gt;();\n        TableColumn&lt;Item, String&gt; itemCol = new TableColumn&lt;&gt;(\"Item\");\n        itemCol.setCellValueFactory(cellData -&gt; cellData.getValue().nameProperty());\n        table.getColumns().add(itemCol);\n\n        TableColumn&lt;Item, String&gt; dataCol = new TableColumn&lt;&gt;(\"Data\");\n        dataCol.setCellValueFactory(cellData -&gt; cellData.getValue().dataProperty());\n        dataCol.setPrefWidth(200);\n        table.getColumns().add(dataCol);\n\n        dataCol.setCellFactory(col -&gt; new TableCell&lt;Item, String&gt;() {\n            private final HighlightingLabelLayout layout = new HighlightingLabelLayout();\n\n            {\n                layout.highlightTextProperty().bind(searchField.textProperty());\n            }\n\n            @Override\n            protected void updateItem(String data, boolean empty) {\n                super.updateItem(data, empty);\n                if (empty) {\n                    setGraphic(null);\n                } else {\n                    layout.setText(data);\n                    setGraphic(layout);\n                }\n            }\n        });\n\n        table.getItems().setAll(generateData(200, 10));\n\n\n\n        VBox root = new VBox(5, searchField, table);\n        primaryStage.setScene(new Scene(root));\n        primaryStage.show();\n    }\n\n    private List&lt;Item&gt; generateData(int numItems, int wordsPerItem) {\n        List&lt;Item&gt; items = new ArrayList&lt;&gt;();\n        Random rng = new Random();\n        for (int i = 1 ; i &lt;= numItems ; i++) {\n            String name = \"Item \"+i;\n            List&lt;String&gt; words = new ArrayList&lt;&gt;();\n            for (int j = 0 ; j &lt; wordsPerItem ; j++) {\n                words.add(WORDS[rng.nextInt(WORDS.length)].toLowerCase());\n            }\n            String data = String.join(\" \", words);\n            items.add(new Item(name, data));\n        }\n        return items ;\n    }\n\n    public static class Item {\n        private final StringProperty name = new SimpleStringProperty();\n        private final StringProperty data = new SimpleStringProperty();\n\n        public Item(String name, String data) {\n            setName(name);\n            setData(data);\n        }\n\n        public final StringProperty nameProperty() {\n            return this.name;\n        }\n\n\n        public final String getName() {\n            return this.nameProperty().get();\n        }\n\n\n        public final void setName(final String name) {\n            this.nameProperty().set(name);\n        }\n\n\n        public final StringProperty dataProperty() {\n            return this.data;\n        }\n\n\n        public final String getData() {\n            return this.dataProperty().get();\n        }\n\n\n        public final void setData(final String data) {\n            this.dataProperty().set(data);\n        }\n\n\n\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    private static final String[] WORDS = (\"Lorem ipsum dolor sit amet, \"\n            + \"consectetur adipiscing elit. Sed pulvinar massa at arcu ultrices, \"\n            + \"nec elementum velit vestibulum. Integer eget elit justo. \"\n            + \"Orci varius natoque penatibus et magnis dis parturient montes, \"\n            + \"nascetur ridiculus mus. Duis ultricies diam turpis, eget accumsan risus convallis a. \"\n            + \"Pellentesque rhoncus viverra sem, sed consequat lorem.\").split(\"\\\\W\") ;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/w4NJ1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w4NJ1.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":1232029,"reputation":11,"user_id":7998430,"display_name":"nayasis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678127111,"creation_date":1678127111,"answer_id":75654489,"question_id":50410373,"body_markdown":"It works fine with just CSS\r\n\r\n\r\n    .table-view .column-header {\r\n      -fx-ellipsis-string: &quot;&quot; ;\r\n    }\r\n    .table-column {\r\n      -fx-ellipsis-string: &quot;&quot; ;\r\n    }","title":"JavaFX&#39;s TableView with highlighted text and ellipsis functionality","body":"<p>It works fine with just CSS</p>\n<pre><code>.table-view .column-header {\n  -fx-ellipsis-string: &quot;&quot; ;\n}\n.table-column {\n  -fx-ellipsis-string: &quot;&quot; ;\n}\n</code></pre>\n"}],"owner":{"account_id":306956,"reputation":13878,"user_id":617996,"accept_rate":93,"display_name":"PrimosK"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":850,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":50420284,"answer_count":2,"score":3,"last_activity_date":1678127111,"creation_date":1526643066,"question_id":50410373,"body_markdown":"What I am trying to achieve is to make it possible to highlight certain portions of the text inside `TableView` and at the same time preserve ellipsis functionality that is present when pure `Label` is used to render the cell content.\r\n\r\nSo what I am after is this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n1. As you can see the &quot;how&quot; keyword is highlighted.\r\n2. Ellipsis are nicely rendered if text is too long.\r\n\r\nMy first idea was to simply use `Label` for this and pass in a formatted html - this is possible in Swing but (on my surprise) not in JavaFX so there is no way of achieving this with `Label` class. \r\n\r\nMy second try was with the use of `TextFlow` - but obviously the ellipsis functionality to fit labels into columns nicely is lost that way (I&#39;ve also found few other issues not relevant to this question).\r\n\r\nThis feels to me like a quite a basic problem so I was rather surprised given the fact that first JavaFX version was release 9 years ago. I really wonder whether anybody has found some solution/workaround of how to achieve this.\r\n\r\n  [1]: https://i.stack.imgur.com/bFkQu.png","title":"JavaFX&#39;s TableView with highlighted text and ellipsis functionality","body":"<p>What I am trying to achieve is to make it possible to highlight certain portions of the text inside <code>TableView</code> and at the same time preserve ellipsis functionality that is present when pure <code>Label</code> is used to render the cell content.</p>\n\n<p>So what I am after is this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bFkQu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bFkQu.png\" alt=\"enter image description here\"></a></p>\n\n<ol>\n<li>As you can see the \"how\" keyword is highlighted.</li>\n<li>Ellipsis are nicely rendered if text is too long.</li>\n</ol>\n\n<p>My first idea was to simply use <code>Label</code> for this and pass in a formatted html - this is possible in Swing but (on my surprise) not in JavaFX so there is no way of achieving this with <code>Label</code> class. </p>\n\n<p>My second try was with the use of <code>TextFlow</code> - but obviously the ellipsis functionality to fit labels into columns nicely is lost that way (I've also found few other issues not relevant to this question).</p>\n\n<p>This feels to me like a quite a basic problem so I was rather surprised given the fact that first JavaFX version was release 9 years ago. I really wonder whether anybody has found some solution/workaround of how to achieve this.</p>\n"},{"tags":["java","json","rest","jackson","jersey"],"answers":[{"tags":[],"owner":{"account_id":26506001,"reputation":2574,"user_id":20142156,"display_name":"Dhaval Gajjar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678126871,"creation_date":1678126871,"answer_id":75654455,"question_id":75654347,"body_markdown":"It&#39;s not achievable without an additional serialization class. If you add annotation then also you need to register the class based on the annotation it behaves. Instead, you should use the `Promotion` class in the `Student` class.\r\n\r\n```\r\npublic class Student {\r\n    private Long idStudent;\r\n    private String firstName;\r\n    private String lastName;\r\n    private Gender gender;\r\n    private String mail;\r\n    private Promotion promotion;\r\n}\r\n\r\npublic class Promotion {\r\n    private Long idPromotion;\r\n    private String name;\r\n    private Boolean colorEnabled;\r\n    private String fontColor;\r\n    private String textColor;\r\n}\r\n```\r\nIf you use the same class for deserialization then you can create the `Promotion` constructor with `idPromotion` argument. So in JSON if you pass only id then it will create a `Promotion` object with `idPromotion` set.","title":"How to serialize java classes with jackson when one depends on the other through an id field and not a direct reference","body":"<p>It's not achievable without an additional serialization class. If you add annotation then also you need to register the class based on the annotation it behaves. Instead, you should use the <code>Promotion</code> class in the <code>Student</code> class.</p>\n<pre><code>public class Student {\n    private Long idStudent;\n    private String firstName;\n    private String lastName;\n    private Gender gender;\n    private String mail;\n    private Promotion promotion;\n}\n\npublic class Promotion {\n    private Long idPromotion;\n    private String name;\n    private Boolean colorEnabled;\n    private String fontColor;\n    private String textColor;\n}\n</code></pre>\n<p>If you use the same class for deserialization then you can create the <code>Promotion</code> constructor with <code>idPromotion</code> argument. So in JSON if you pass only id then it will create a <code>Promotion</code> object with <code>idPromotion</code> set.</p>\n"}],"owner":{"account_id":20955267,"reputation":63,"user_id":15395946,"display_name":"emerick biron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678126871,"creation_date":1678126089,"question_id":75654347,"body_markdown":"I&#39;m currently developing REST web services in Java with Jersey and I have a question regarding including details from a related model class in the JSON response returned by my endpoint.\r\n\r\nMy Student and Promotion model classes currently look like this:\r\n\r\n```java\r\npublic class Student {\r\n    private Long idStudent;\r\n    private String firstName;\r\n    private String lastName;\r\n    private Gender gender;\r\n    private String mail;\r\n    private Long idPromotion;\r\n}\r\n\r\npublic class Promotion {\r\n    private Long idPromotion;\r\n    private String name;\r\n    private Boolean colorEnabled;\r\n    private String fontColor;\r\n    private String textColor;\r\n}\r\n```\r\n\r\nI would like to modify the Student class to include the details of the Promotion class in the body of the JSON response returned by my getStudents() endpoint using annotations instead of a wrapper or an additional serialization class.\r\n\r\nHere&#39;s an example of what I&#39;d like to do using something like this @Reference annotation (it doesn&#39;t exist, it&#39;s just to illustrate what I&#39;d like)\r\n\r\n```java\r\npublic class Student {\r\n    private Long idStudent;\r\n    private String firstName;\r\n    private String lastName;\r\n    private Gender gender;\r\n    private String mail;\r\n    @Reference(Promotion.idPromotion)\r\n    private Long idPromotion;\r\n}\r\n\r\npublic class Promotion {\r\n    private Long idPromotion;\r\n    private String name;\r\n    private Boolean colorEnabled;\r\n    private String fontColor;\r\n    private String textColor;\r\n}\r\n```\r\n\r\nI would like to know if it&#39;s possible to achieve this using annotations and some sort of binding rather than using a wrapper or additional serialization class.\r\n\r\nThank you very much for your help!\r\n","title":"How to serialize java classes with jackson when one depends on the other through an id field and not a direct reference","body":"<p>I'm currently developing REST web services in Java with Jersey and I have a question regarding including details from a related model class in the JSON response returned by my endpoint.</p>\n<p>My Student and Promotion model classes currently look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Student {\n    private Long idStudent;\n    private String firstName;\n    private String lastName;\n    private Gender gender;\n    private String mail;\n    private Long idPromotion;\n}\n\npublic class Promotion {\n    private Long idPromotion;\n    private String name;\n    private Boolean colorEnabled;\n    private String fontColor;\n    private String textColor;\n}\n</code></pre>\n<p>I would like to modify the Student class to include the details of the Promotion class in the body of the JSON response returned by my getStudents() endpoint using annotations instead of a wrapper or an additional serialization class.</p>\n<p>Here's an example of what I'd like to do using something like this @Reference annotation (it doesn't exist, it's just to illustrate what I'd like)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Student {\n    private Long idStudent;\n    private String firstName;\n    private String lastName;\n    private Gender gender;\n    private String mail;\n    @Reference(Promotion.idPromotion)\n    private Long idPromotion;\n}\n\npublic class Promotion {\n    private Long idPromotion;\n    private String name;\n    private Boolean colorEnabled;\n    private String fontColor;\n    private String textColor;\n}\n</code></pre>\n<p>I would like to know if it's possible to achieve this using annotations and some sort of binding rather than using a wrapper or additional serialization class.</p>\n<p>Thank you very much for your help!</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":12135188,"reputation":884,"user_id":8860848,"display_name":"NullByte08"},"score":0,"creation_date":1587973019,"post_id":61453640,"comment_id":108709229,"body_markdown":"is your package name correct in firebase console?","body":"is your package name correct in firebase console?"},{"owner":{"account_id":8070087,"reputation":875,"user_id":6083135,"accept_rate":83,"display_name":"Daksh Agrawal"},"score":0,"creation_date":1587973128,"post_id":61453640,"comment_id":108709281,"body_markdown":"@NullByte08 Yeah, and it has been working nicely for around an year","body":"@NullByte08 Yeah, and it has been working nicely for around an year"},{"owner":{"account_id":3348675,"reputation":5862,"user_id":2813227,"display_name":"Andreas Rayo Kniep"},"score":0,"creation_date":1588022532,"post_id":61453640,"comment_id":108735736,"body_markdown":"To further analyze this issue, we would need to have a look at your API key. Can you please share the API key and replace maybe 10 characters in the middle with some replacement character (e.g. &quot;X&quot;) without changing the length of the key?","body":"To further analyze this issue, we would need to have a look at your API key. Can you please share the API key and replace maybe 10 characters in the middle with some replacement character (e.g. &quot;X&quot;) without changing the length of the key?"},{"owner":{"account_id":8070087,"reputation":875,"user_id":6083135,"accept_rate":83,"display_name":"Daksh Agrawal"},"score":0,"creation_date":1588049906,"post_id":61453640,"comment_id":108742716,"body_markdown":"@AndreasRayoKniep AIzaSyCrf5T0QyCUABJhZTsks7ep%%%%%%%%%%Y","body":"@AndreasRayoKniep AIzaSyCrf5T0QyCUABJhZTsks7ep%%%%%%%%%%Y"},{"owner":{"account_id":3348675,"reputation":5862,"user_id":2813227,"display_name":"Andreas Rayo Kniep"},"score":0,"creation_date":1588089100,"post_id":61453640,"comment_id":108763266,"body_markdown":"@DakshAgrawal: That looks like a valid API key and I am confused how you can get &quot;API key not valid.&quot; as server response. I have the feeling that the actual request to the server does not use this API key - either uses a different (invalid) API key or does not have access to this API key somehow.","body":"@DakshAgrawal: That looks like a valid API key and I am confused how you can get &quot;API key not valid.&quot; as server response. I have the feeling that the actual request to the server does not use this API key - either uses a different (invalid) API key or does not have access to this API key somehow."},{"owner":{"account_id":3348675,"reputation":5862,"user_id":2813227,"display_name":"Andreas Rayo Kniep"},"score":0,"creation_date":1588818334,"post_id":61453640,"comment_id":109048623,"body_markdown":"@DakshAgrawal: Out of curiosity: Did you have to create a new project to fix this issue?","body":"@DakshAgrawal: Out of curiosity: Did you have to create a new project to fix this issue?"},{"owner":{"account_id":8070087,"reputation":875,"user_id":6083135,"accept_rate":83,"display_name":"Daksh Agrawal"},"score":0,"creation_date":1588845747,"post_id":61453640,"comment_id":109058998,"body_markdown":"@AndreasRayoKniep No. Did not create a new project. I just created a new API key. The error message is still shown but FCM and other services are working well.","body":"@AndreasRayoKniep No. Did not create a new project. I just created a new API key. The error message is still shown but FCM and other services are working well."}],"answers":[{"tags":[],"owner":{"account_id":9553448,"reputation":990,"user_id":7096769,"display_name":"Emre Akcan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1588162876,"creation_date":1588162876,"answer_id":61501709,"question_id":61453640,"body_markdown":"I encountered with this error when initializing new app so it may not solve your issue since you say your app is existing but I hope it helps.\r\n\r\n\r\nI&#39;ve created new SHA Key for https://stackoverflow.com/questions/15727912/sha-1-fingerprint-of-keystore-certificate (both for debug and signing! only signing didn&#39;t work)\r\n\r\nand I&#39;ve added them into my firebase settings (below my package name careful if you have multiple). Now it works for me.","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>I encountered with this error when initializing new app so it may not solve your issue since you say your app is existing but I hope it helps.</p>\n\n<p>I've created new SHA Key for <a href=\"https://stackoverflow.com/questions/15727912/sha-1-fingerprint-of-keystore-certificate\">SHA-1 fingerprint of keystore certificate</a> (both for debug and signing! only signing didn't work)</p>\n\n<p>and I've added them into my firebase settings (below my package name careful if you have multiple). Now it works for me.</p>\n"},{"comments":[{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1599039480,"post_id":61529757,"comment_id":112647330,"body_markdown":"For some reason I keep getting this error, and even though &quot;installation&quot; is enabled (via here: https://console.cloud.google.com/apis/library/firebaseinstallations.googleapis.com ) , and even though I tried to generate a new key (even including &quot;installation&quot; there) and copied it to the new json file, I still get this issue. How come?","body":"For some reason I keep getting this error, and even though &quot;installation&quot; is enabled (via here: <a href=\"https://console.cloud.google.com/apis/library/firebaseinstallations.googleapis.com\" rel=\"nofollow noreferrer\">console.cloud.google.com/apis/library/&hellip;</a> ) , and even though I tried to generate a new key (even including &quot;installation&quot; there) and copied it to the new json file, I still get this issue. How come?"},{"owner":{"account_id":3348675,"reputation":5862,"user_id":2813227,"display_name":"Andreas Rayo Kniep"},"score":0,"creation_date":1600295359,"post_id":61529757,"comment_id":113046115,"body_markdown":"You can test your configuration with the following CURL command.\nWhat is the **error** you are getting?\n(Note: If you are seeing JSON data the request was and your configuration is successful)\n\n```\napi_key=&lt;YOUR_API_KEY&gt;;\nproject_identifier=&lt;YOUR_PROJECT_ID&gt;;\napp_id=&lt;YOUR_FIREBASE_APP_ID_EXAMPLE_1:12345678:android:00000aaaaaaaa&gt;;\n\ncurl -H &quot;content-type: application/json&quot; -d &quot;{appId: &#39;$app_id&#39;, sdkVersion: &#39;t:1&#39;}&quot; https://firebaseinstallations.googleapis.com/v1/projects/$project_identifier/installations/?key=$api_key;\n```","body":"You can test your configuration with the following CURL command. What is the <b>error</b> you are getting? (Note: If you are seeing JSON data the request was and your configuration is successful)  ``` api_key=&lt;YOUR_API_KEY&gt;; project_identifier=&lt;YOUR_PROJECT_ID&gt;; app_id=&lt;YOUR_FIREBASE_APP_ID_EXAMPLE_1:12345678:android:0000&zwnj;&#8203;0aaaaaaaa&gt;;  curl -H &quot;content-type: application/json&quot; -d &quot;{appId: &#39;$app_id&#39;, sdkVersion: &#39;t:1&#39;}&quot; <a href=\"https://firebaseinstallations.googleapis.com/v1/projects/$project_identifier/installations/?key=$api_key\" rel=\"nofollow noreferrer\">firebaseinstallations.googleapis.com/v1/projects/&hellip;</a>; ```"},{"owner":{"account_id":17505973,"reputation":5058,"user_id":12695188,"display_name":"genericUser"},"score":0,"creation_date":1611496286,"post_id":61529757,"comment_id":116464535,"body_markdown":"In my case I encountered the exception when I replaced my old firebase android app with a new one. I have done all steps but still face that error. Then I release that I forgot to make some changes with the new app name. If you have created a new app, make sure you have replaced your old app name with the new one in your application.","body":"In my case I encountered the exception when I replaced my old firebase android app with a new one. I have done all steps but still face that error. Then I release that I forgot to make some changes with the new app name. If you have created a new app, make sure you have replaced your old app name with the new one in your application."},{"owner":{"account_id":3865140,"reputation":642,"user_id":3201843,"display_name":"FrodmanG"},"score":1,"creation_date":1636469636,"post_id":61529757,"comment_id":123561935,"body_markdown":"That Curl command is an amazing way to debug! Thanks. Just a couple of notes where I was slipping up, be sure to remove the semi colon (;) at the end of the curl command above! Also you need to have the Firebase Installations API enabled (silly mistake but easily done!)","body":"That Curl command is an amazing way to debug! Thanks. Just a couple of notes where I was slipping up, be sure to remove the semi colon (;) at the end of the curl command above! Also you need to have the Firebase Installations API enabled (silly mistake but easily done!)"}],"tags":[],"owner":{"account_id":3348675,"reputation":5862,"user_id":2813227,"display_name":"Andreas Rayo Kniep"},"comment_count":4,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1678126848,"creation_date":1588269305,"answer_id":61529757,"question_id":61453640,"body_markdown":"If you have issues with your API key, you can create a new API key in the Cloud Console:\r\n\r\n - go to the [Google Cloud Console][2]\r\n - choose the relevant project (i.e. the project you use for your application)\r\n - open the menu and go to `APIs &amp; Services`  `Credentials`\r\n - on top of the page click on `+ CREATE CREDENTIALS`  `API key`\r\n - replace the API key in your application with the newly created API key\r\n\r\n-----\r\n\r\nIn case you are using the `google-services.json` config file from your [Firebase Console](https://console.firebase.google.com/), you first have to delete or restrict the API key used in your current `google-services.json` in order to make Firebase update config file and use a new API key.\r\n\r\n - Identify the API key in your `google-services.json` config file.\r\n - Confirm that the API key is creating the erroneous requests by checking its usage against the [Firebase Installations API metrics page][3]. The column `Usage with this service` of your API key should show a number greater than 0.\r\n - Delete that API key by clicking the bin symbol or add `Application restrictions` to that API key by clicking the pencil symbol. **!!Warning!!** Do not delete an API key that existing installations of your applications require for other Firebase services like Firebase Auth or Realtime-Database.\r\n\r\nWait a couple of minutes for Google servers to update. The next download of your `google-service.json` config file should contain a new API key.\r\n\r\nYou can test your configuration with the following CURL command.\r\nWhat is the **error** you are getting?\r\n(Note: If you are seeing JSON data the request was and your configuration is successful)\r\n\r\n-----\r\n\r\nTest if your configuration works with the following CURL command:\r\n```\r\napi_key=&lt;YOUR_API_KEY&gt;\r\nproject_identifier=&lt;YOUR_PROJECT_ID&gt;\r\napp_id=&lt;YOUR_FIREBASE_APP_ID_EXAMPLE_1:12345678:android:00000aaaaaaaa&gt;\r\n\r\ncurl -H &quot;content-type: application/json&quot; -d &quot;{appId: &#39;$app_id&#39;, sdkVersion: &#39;t:1&#39;}&quot; https://firebaseinstallations.googleapis.com/v1/projects/$project_identifier/installations/?key=$api_key\r\n```\r\n\r\n-----\r\n\r\nOther relevant links regarding API keys and the [Firebase Installations API][1]:\r\n\r\n - https://firebase.google.com/support/privacy/init-options\r\n - https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/API_KEY_RESTRICTIONS.md\r\n - https://firebase.google.com/support/release-notes/android#2020-02-27\r\n - https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/REQUIRED_FIREBASE_OPTIONS_ANDROID.md\r\n\r\n\r\n[1]: https://console.cloud.google.com/apis/library/firebaseinstallations.googleapis.com\r\n[2]: https://console.cloud.google.com/apis/credentials?folder\r\n[3]: https://console.cloud.google.com/apis/api/firebaseinstallations.googleapis.com/credentials\r\n[4]: https://console.cloud.google.com/apis/api/firebaseinstallations.googleapis.com/metrics","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>If you have issues with your API key, you can create a new API key in the Cloud Console:</p>\n<ul>\n<li>go to the <a href=\"https://console.cloud.google.com/apis/credentials?folder\" rel=\"noreferrer\">Google Cloud Console</a></li>\n<li>choose the relevant project (i.e. the project you use for your application)</li>\n<li>open the menu and go to <code>APIs &amp; Services</code>  <code>Credentials</code></li>\n<li>on top of the page click on <code>+ CREATE CREDENTIALS</code>  <code>API key</code></li>\n<li>replace the API key in your application with the newly created API key</li>\n</ul>\n<hr />\n<p>In case you are using the <code>google-services.json</code> config file from your <a href=\"https://console.firebase.google.com/\" rel=\"noreferrer\">Firebase Console</a>, you first have to delete or restrict the API key used in your current <code>google-services.json</code> in order to make Firebase update config file and use a new API key.</p>\n<ul>\n<li>Identify the API key in your <code>google-services.json</code> config file.</li>\n<li>Confirm that the API key is creating the erroneous requests by checking its usage against the <a href=\"https://console.cloud.google.com/apis/api/firebaseinstallations.googleapis.com/credentials\" rel=\"noreferrer\">Firebase Installations API metrics page</a>. The column <code>Usage with this service</code> of your API key should show a number greater than 0.</li>\n<li>Delete that API key by clicking the bin symbol or add <code>Application restrictions</code> to that API key by clicking the pencil symbol. <strong>!!Warning!!</strong> Do not delete an API key that existing installations of your applications require for other Firebase services like Firebase Auth or Realtime-Database.</li>\n</ul>\n<p>Wait a couple of minutes for Google servers to update. The next download of your <code>google-service.json</code> config file should contain a new API key.</p>\n<p>You can test your configuration with the following CURL command.\nWhat is the <strong>error</strong> you are getting?\n(Note: If you are seeing JSON data the request was and your configuration is successful)</p>\n<hr />\n<p>Test if your configuration works with the following CURL command:</p>\n<pre><code>api_key=&lt;YOUR_API_KEY&gt;\nproject_identifier=&lt;YOUR_PROJECT_ID&gt;\napp_id=&lt;YOUR_FIREBASE_APP_ID_EXAMPLE_1:12345678:android:00000aaaaaaaa&gt;\n\ncurl -H &quot;content-type: application/json&quot; -d &quot;{appId: '$app_id', sdkVersion: 't:1'}&quot; https://firebaseinstallations.googleapis.com/v1/projects/$project_identifier/installations/?key=$api_key\n</code></pre>\n<hr />\n<p>Other relevant links regarding API keys and the <a href=\"https://console.cloud.google.com/apis/library/firebaseinstallations.googleapis.com\" rel=\"noreferrer\">Firebase Installations API</a>:</p>\n<ul>\n<li><a href=\"https://firebase.google.com/support/privacy/init-options\" rel=\"noreferrer\">https://firebase.google.com/support/privacy/init-options</a></li>\n<li><a href=\"https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/API_KEY_RESTRICTIONS.md\" rel=\"noreferrer\">https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/API_KEY_RESTRICTIONS.md</a></li>\n<li><a href=\"https://firebase.google.com/support/release-notes/android#2020-02-27\" rel=\"noreferrer\">https://firebase.google.com/support/release-notes/android#2020-02-27</a></li>\n<li><a href=\"https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/REQUIRED_FIREBASE_OPTIONS_ANDROID.md\" rel=\"noreferrer\">https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/REQUIRED_FIREBASE_OPTIONS_ANDROID.md</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":3348675,"reputation":5862,"user_id":2813227,"display_name":"Andreas Rayo Kniep"},"score":1,"creation_date":1588818247,"post_id":61587237,"comment_id":109048603,"body_markdown":"Downgrading your Firebase SDK might get rid of the error message. However, it does not fix the underlying problem.","body":"Downgrading your Firebase SDK might get rid of the error message. However, it does not fix the underlying problem."},{"owner":{"account_id":2075948,"reputation":52334,"user_id":4233197,"accept_rate":55,"display_name":"Hiren Patel"},"score":0,"creation_date":1601552462,"post_id":61587237,"comment_id":113446605,"body_markdown":"@Tosin did you find any solution ?","body":"@Tosin did you find any solution ?"}],"tags":[],"owner":{"account_id":5827783,"reputation":514,"user_id":4593476,"display_name":"Tosin John"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1588577751,"creation_date":1588577751,"answer_id":61587237,"question_id":61453640,"body_markdown":"It turned out that the issue was with the version of firebase-messaging for me, using this version in app gradle got rid of the error:\r\n\r\n    implementation &quot;com.google.firebase:firebase-messaging:20.1.0&quot;","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>It turned out that the issue was with the version of firebase-messaging for me, using this version in app gradle got rid of the error:</p>\n\n<pre><code>implementation \"com.google.firebase:firebase-messaging:20.1.0\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5332702,"reputation":2200,"user_id":4628115,"accept_rate":60,"display_name":"CybeX"},"score":0,"creation_date":1663425100,"post_id":61598042,"comment_id":130239196,"body_markdown":"who would have thought?","body":"who would have thought?"}],"tags":[],"owner":{"account_id":7174689,"reputation":822,"user_id":5481069,"display_name":"Psijic"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1588613087,"creation_date":1588613087,"answer_id":61598042,"question_id":61453640,"body_markdown":"This error could happen if you include in gradle some firebase modules that not configured properly (analytics, storage, messaging etc.)","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>This error could happen if you include in gradle some firebase modules that not configured properly (analytics, storage, messaging etc.)</p>\n"},{"tags":[],"owner":{"account_id":14972918,"reputation":21,"user_id":10809172,"display_name":"Charles Wafula"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589393998,"creation_date":1589375018,"answer_id":61775388,"question_id":61453640,"body_markdown":"I encountered the same issue, click on the link provided:\r\n```\r\n&quot;links&quot;: [\r\n          {\r\n            &quot;description&quot;: &quot;Google developers console&quot;,\r\n            &quot;url&quot;: &quot;https://console.developers.google.com&quot;\r\n          }\r\n```\r\nFrom there on, Go to the &#39;credentials&#39; menu.\r\n\r\nConfirm in your google-services.json file the API key being used. \r\n\r\nGo back to the google portal and look for that key under API keys. \r\nOnce you find it, click to edit and when editing, add your project&#39;s package name and SHA-1 certificate key. \r\n\r\nSave and wait for 5 mins, the error should be gone.","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>I encountered the same issue, click on the link provided:</p>\n\n<pre><code>\"links\": [\n          {\n            \"description\": \"Google developers console\",\n            \"url\": \"https://console.developers.google.com\"\n          }\n</code></pre>\n\n<p>From there on, Go to the 'credentials' menu.</p>\n\n<p>Confirm in your google-services.json file the API key being used. </p>\n\n<p>Go back to the google portal and look for that key under API keys. \nOnce you find it, click to edit and when editing, add your project's package name and SHA-1 certificate key. </p>\n\n<p>Save and wait for 5 mins, the error should be gone.</p>\n"},{"comments":[{"owner":{"account_id":6258909,"reputation":2791,"user_id":4866667,"accept_rate":64,"display_name":"Mikhail"},"score":8,"creation_date":1594530078,"post_id":62207248,"comment_id":111155102,"body_markdown":"Thanks, it helped! BTW, you can simply delete &quot;google-services&quot; folder, it will be generated during build with new correct data.","body":"Thanks, it helped! BTW, you can simply delete &quot;google-services&quot; folder, it will be generated during build with new correct data."},{"owner":{"account_id":5857750,"reputation":301,"user_id":4614492,"display_name":"Jahson kyalo"},"score":1,"creation_date":1613061162,"post_id":62207248,"comment_id":116965505,"body_markdown":"Thanks. In flutter i just deleted the build folder and solved my issue","body":"Thanks. In flutter i just deleted the build folder and solved my issue"},{"owner":{"account_id":6555244,"reputation":745,"user_id":5068126,"display_name":"King Of The Jungle"},"score":1,"creation_date":1624017706,"post_id":62207248,"comment_id":120249094,"body_markdown":"Thanks, this worked for me. I just deleted the build folder and rebuild then it worked.","body":"Thanks, this worked for me. I just deleted the build folder and rebuild then it worked."}],"tags":[],"owner":{"account_id":14680931,"reputation":1682,"user_id":10602418,"display_name":"Abhijith Brumal"},"comment_count":3,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1591324921,"creation_date":1591324921,"answer_id":62207248,"question_id":61453640,"body_markdown":"I had this same issue. I solved it by the following way.\r\n\r\ngo to app/build/generated/res/google-services/debug/values/values.xml\r\n\r\nHere you can find your old API key.\r\n\r\nReplace both google_api_key and google_crash_reporting_api_key values with the new one that you can find from the google-services.json file. it will be under api-key array.\r\n\r\nCheers!","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>I had this same issue. I solved it by the following way.</p>\n\n<p>go to app/build/generated/res/google-services/debug/values/values.xml</p>\n\n<p>Here you can find your old API key.</p>\n\n<p>Replace both google_api_key and google_crash_reporting_api_key values with the new one that you can find from the google-services.json file. it will be under api-key array.</p>\n\n<p>Cheers!</p>\n"},{"tags":[],"owner":{"account_id":18838249,"reputation":21,"user_id":13740413,"display_name":"Cyril Arathy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1592062317,"creation_date":1592062317,"answer_id":62361942,"question_id":61453640,"body_markdown":"I had the same issue. Please find the following steps i followed to resolve this.\r\n\r\n1. Navigate to the google project and make sure your app sha1 key is configured properly. \r\n2. Download the google-services.json file from the project and make sure it is same as the one exists in the android project\r\n3. Clean the project to remove all build configurations generated previously. \r\n4. Build the app ","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>I had the same issue. Please find the following steps i followed to resolve this.</p>\n\n<ol>\n<li>Navigate to the google project and make sure your app sha1 key is configured properly. </li>\n<li>Download the google-services.json file from the project and make sure it is same as the one exists in the android project</li>\n<li>Clean the project to remove all build configurations generated previously. </li>\n<li>Build the app </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1641421,"reputation":1094,"user_id":1513772,"accept_rate":81,"display_name":"Palak Darji"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1602496660,"creation_date":1602496308,"answer_id":64315489,"question_id":61453640,"body_markdown":"Late but might be helpful to others.\r\n\r\nI tried everthing here, at last I got it working by making sure following steps,\r\n\r\nRule: App&#39;s SHA-1 should be registerd in Google Developer Console with the API keys used.\r\n\r\n1) Look for the SHA-1 you are using (debug or release). You can do it by going to android studio &gt; Gradle form side bar &gt; Tasks &gt; android &gt; signingReport. Double click on it to run. Once it runs, you will be able to find out SHA-1 for your variant. (In my case, I was trying to make it run for release variant). Keep that SHA-1 aside we will check for its existance on Google Developers Console.\r\n\r\n2) Now head over to [https://console.cloud.google.com/apis/credentials][1], In your selected project &gt; Credentials, Find API key that is used, Click on it to go into details, Find `Restrict usage to your Android apps`, see if the SHA-1 is registed there along with your package name.\r\n\r\nIf you do not find the same SHA-1 that you had in your project, then you can click on `Add an Item` to add the app. Pass package name and SHA-1 and submit. \r\n\r\nTry again to connect firebase APIs after 5-10 mins.\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://console.cloud.google.com/apis/credentials\r\n  [2]: https://i.stack.imgur.com/iZPmu.png","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>Late but might be helpful to others.</p>\n<p>I tried everthing here, at last I got it working by making sure following steps,</p>\n<p>Rule: App's SHA-1 should be registerd in Google Developer Console with the API keys used.</p>\n<ol>\n<li><p>Look for the SHA-1 you are using (debug or release). You can do it by going to android studio &gt; Gradle form side bar &gt; Tasks &gt; android &gt; signingReport. Double click on it to run. Once it runs, you will be able to find out SHA-1 for your variant. (In my case, I was trying to make it run for release variant). Keep that SHA-1 aside we will check for its existance on Google Developers Console.</p>\n</li>\n<li><p>Now head over to <a href=\"https://console.cloud.google.com/apis/credentials\" rel=\"noreferrer\">https://console.cloud.google.com/apis/credentials</a>, In your selected project &gt; Credentials, Find API key that is used, Click on it to go into details, Find <code>Restrict usage to your Android apps</code>, see if the SHA-1 is registed there along with your package name.</p>\n</li>\n</ol>\n<p>If you do not find the same SHA-1 that you had in your project, then you can click on <code>Add an Item</code> to add the app. Pass package name and SHA-1 and submit.</p>\n<p>Try again to connect firebase APIs after 5-10 mins.</p>\n<p><a href=\"https://i.stack.imgur.com/iZPmu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/iZPmu.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":19345709,"reputation":205,"user_id":14144329,"display_name":"K D"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604744637,"creation_date":1604698340,"answer_id":64721864,"question_id":61453640,"body_markdown":"To fix this error read this file using CMD or Windows Explorer\r\n\r\nPS `C:\\Users\\Any&gt; keytool -keystore C:\\Users\\Any\\.android\\debug.keystore -list -v`\r\n\r\nEnter keystore password:\r\n\r\nUse &#39;KeyStore Explorer&#39; from https://keystore-explorer.org/downloads.html\r\n\r\n&amp; paste it here:\r\nhttps://console.developers.google.com/apis/credentials/key/\r\n","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>To fix this error read this file using CMD or Windows Explorer</p>\n<p>PS <code>C:\\Users\\Any&gt; keytool -keystore C:\\Users\\Any\\.android\\debug.keystore -list -v</code></p>\n<p>Enter keystore password:</p>\n<p>Use 'KeyStore Explorer' from <a href=\"https://keystore-explorer.org/downloads.html\" rel=\"nofollow noreferrer\">https://keystore-explorer.org/downloads.html</a></p>\n<p>&amp; paste it here:\n<a href=\"https://console.developers.google.com/apis/credentials/key/\" rel=\"nofollow noreferrer\">https://console.developers.google.com/apis/credentials/key/</a></p>\n"},{"tags":[],"owner":{"account_id":9809771,"reputation":6806,"user_id":10699119,"display_name":"Sana Ebadi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613385221,"creation_date":1613385221,"answer_id":66206400,"question_id":61453640,"body_markdown":"Just Register your app in the `Firebase` console again. \r\nand get the `googl-service.json` file and replace it with old. it will be solve","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>Just Register your app in the <code>Firebase</code> console again.\nand get the <code>googl-service.json</code> file and replace it with old. it will be solve</p>\n"},{"tags":[],"owner":{"account_id":11516344,"reputation":1697,"user_id":8439604,"display_name":"Abdul Mateen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619842688,"creation_date":1619842688,"answer_id":67342831,"question_id":61453640,"body_markdown":"If you are facing this issue in the Flutter app then go to your project directory and delete the build folder. Hopefully, it will work. ","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>If you are facing this issue in the Flutter app then go to your project directory and delete the build folder. Hopefully, it will work.</p>\n"},{"tags":[],"owner":{"account_id":18900681,"reputation":219,"user_id":13788736,"display_name":"kevincodes_"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620923405,"creation_date":1620923405,"answer_id":67522798,"question_id":61453640,"body_markdown":"Here&#39;s what made that error go away for my app:\r\nI deleted the Project `.gradle` folder, the Project `build` folder and the app `build` folder, all at once. I then re-installed the app, and no more Firebase Installations server API error!","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>Here's what made that error go away for my app:\nI deleted the Project <code>.gradle</code> folder, the Project <code>build</code> folder and the app <code>build</code> folder, all at once. I then re-installed the app, and no more Firebase Installations server API error!</p>\n"},{"tags":[],"owner":{"account_id":8235698,"reputation":145,"user_id":6194988,"accept_rate":0,"display_name":"Mohamed Mohamed Taha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671351020,"creation_date":1628149948,"answer_id":68662605,"question_id":61453640,"body_markdown":"This problem face me and I fixed by go to Google cloud platform and credentials and do API for firebase with Application restrictions or API restrictions as you used.jhvghvj","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>This problem face me and I fixed by go to Google cloud platform and credentials and do API for firebase with Application restrictions or API restrictions as you used.jhvghvj</p>\n"},{"tags":[],"owner":{"account_id":6142349,"reputation":131,"user_id":4789372,"display_name":"Moises Apaza Q"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629467749,"creation_date":1629467749,"answer_id":68863439,"question_id":61453640,"body_markdown":"If you have changed your API Key on https://console.cloud.google.com or you have restricted it you gotta follow these steps:\r\n\r\n 1. Make sure that your new key is into **google-service.json**(download from firebase console).\r\n\r\n 2. Open the google-service.json, find **api_keys** and leave just the **current_key** that belongs to every environment(dev or prod).\r\n\r\n 3. Go to ***project/app*** and delete the folder ***build***.\r\n\r\n   \r\n\r\n\r\n","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>If you have changed your API Key on <a href=\"https://console.cloud.google.com\" rel=\"nofollow noreferrer\">https://console.cloud.google.com</a> or you have restricted it you gotta follow these steps:</p>\n<ol>\n<li><p>Make sure that your new key is into <strong>google-service.json</strong>(download from firebase console).</p>\n</li>\n<li><p>Open the google-service.json, find <strong>api_keys</strong> and leave just the <strong>current_key</strong> that belongs to every environment(dev or prod).</p>\n</li>\n<li><p>Go to <em><strong>project/app</strong></em> and delete the folder <em><strong>build</strong></em>.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13654567,"reputation":111,"user_id":9851480,"display_name":"Abdulkerim Yldrm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631887486,"creation_date":1631887486,"answer_id":69224768,"question_id":61453640,"body_markdown":"Inside Google API&#39;s &amp; Service Credentials  &gt; Android key (auto created by Firebase) &gt; API Restrictions \r\n\r\nSelect All services and save. After 5-10 minute you can check.\r\n","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>Inside Google API's &amp; Service Credentials  &gt; Android key (auto created by Firebase) &gt; API Restrictions</p>\n<p>Select All services and save. After 5-10 minute you can check.</p>\n"},{"tags":[],"owner":{"account_id":4230222,"reputation":1911,"user_id":3462686,"accept_rate":0,"display_name":"Karthikeyan Ganesan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644490764,"creation_date":1644490764,"answer_id":71063900,"question_id":61453640,"body_markdown":"This is mainly happened by your outdated google-services.json file. because sometime you may enable some extra services in firebase has changed the entire structure of that file. so go to your `firebase console -&gt; project settings -&gt; download google-services.json` and replace it\r\n\r\nthen rebuild your app. Now you check your firebase has error","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>This is mainly happened by your outdated google-services.json file. because sometime you may enable some extra services in firebase has changed the entire structure of that file. so go to your <code>firebase console -&gt; project settings -&gt; download google-services.json</code> and replace it</p>\n<p>then rebuild your app. Now you check your firebase has error</p>\n"},{"tags":[],"owner":{"account_id":9283001,"reputation":3219,"user_id":6893709,"accept_rate":0,"display_name":"Ali Bagheri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668498095,"creation_date":1668498095,"answer_id":74442099,"question_id":61453640,"body_markdown":"I had this issue in Iran. after running a VPN my app was connected to firebase.","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>I had this issue in Iran. after running a VPN my app was connected to firebase.</p>\n"}],"owner":{"account_id":8070087,"reputation":875,"user_id":6083135,"accept_rate":83,"display_name":"Daksh Agrawal"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59423,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":61529757,"answer_count":17,"score":35,"last_activity_date":1678126848,"creation_date":1587972320,"question_id":61453640,"body_markdown":"I am getting an Error Message on App Startup Stating Logs like\r\n\r\n    W/Firebase-Installations: Error when communicating with the Firebase Installations server API. HTTP response: [400 Bad Request: {\r\n      &quot;error&quot;: {\r\n        &quot;code&quot;: 400,\r\n        &quot;message&quot;: &quot;API key not valid. Please pass a valid API key.&quot;,\r\n        &quot;status&quot;: &quot;INVALID_ARGUMENT&quot;,\r\n        &quot;details&quot;: [\r\n          {\r\n            &quot;@type&quot;: &quot;type.googleapis.com/google.rpc.Help&quot;,\r\n            &quot;links&quot;: [\r\n              {\r\n                &quot;description&quot;: &quot;Google developers console&quot;,\r\n                &quot;url&quot;: &quot;https://console.developers.google.com&quot;\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    }\r\n    ]\r\n    2020-04-27 12:42:34.621 22226-23596/in.co.androidapp.g7 E/Firebase-Installations: Firebase Installations can not communicate with Firebase server APIs due to invalid configuration. Please update your Firebase initialization process and set valid Firebase options (API key, Project ID, Application ID) when initializing Firebase.\r\n\r\nI got an email about a week earlier that I should update my google_services.json File, which I have done 4-5 times. No Improvements. It had been working fine for around a year. Its been only 2-3 days since I am facing this issue in the app.\r\n\r\nSubsequently, Firebase Cloud Messaging and other firebase services are not working. I am not doing programmatic initialization (that is, using a FirebaseOptions object to provide these values), just the default initialization using `FirebaseApp.initializeApp(this);`\r\n\r\nI have tried https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/API_KEY_RESTRICTIONS.md\r\n\r\nThanks in Advance.","title":"Android Error when communicating with the Firebase Installations server API","body":"<p>I am getting an Error Message on App Startup Stating Logs like</p>\n\n<pre><code>W/Firebase-Installations: Error when communicating with the Firebase Installations server API. HTTP response: [400 Bad Request: {\n  \"error\": {\n    \"code\": 400,\n    \"message\": \"API key not valid. Please pass a valid API key.\",\n    \"status\": \"INVALID_ARGUMENT\",\n    \"details\": [\n      {\n        \"@type\": \"type.googleapis.com/google.rpc.Help\",\n        \"links\": [\n          {\n            \"description\": \"Google developers console\",\n            \"url\": \"https://console.developers.google.com\"\n          }\n        ]\n      }\n    ]\n  }\n}\n]\n2020-04-27 12:42:34.621 22226-23596/in.co.androidapp.g7 E/Firebase-Installations: Firebase Installations can not communicate with Firebase server APIs due to invalid configuration. Please update your Firebase initialization process and set valid Firebase options (API key, Project ID, Application ID) when initializing Firebase.\n</code></pre>\n\n<p>I got an email about a week earlier that I should update my google_services.json File, which I have done 4-5 times. No Improvements. It had been working fine for around a year. Its been only 2-3 days since I am facing this issue in the app.</p>\n\n<p>Subsequently, Firebase Cloud Messaging and other firebase services are not working. I am not doing programmatic initialization (that is, using a FirebaseOptions object to provide these values), just the default initialization using <code>FirebaseApp.initializeApp(this);</code></p>\n\n<p>I have tried <a href=\"https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/API_KEY_RESTRICTIONS.md\" rel=\"noreferrer\">https://github.com/firebase/firebase-android-sdk/blob/master/firebase-installations/API_KEY_RESTRICTIONS.md</a></p>\n\n<p>Thanks in Advance.</p>\n"},{"tags":["java","cloud","cloudsim"],"owner":{"account_id":21988787,"reputation":1,"user_id":16262619,"display_name":"Ta9iii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678126422,"creation_date":1678114208,"question_id":75652273,"body_markdown":"I faced problem in cloudsim \r\nI want to calculate the ram, cpu and bandwidth requirements for a given cloudlet \r\n\r\nhere is an example of param for one cloudlet(task)\r\n\r\n```\r\n long fileSize = 300;\r\n long outputSize = 300;\r\n int pesNumber = 1;\r\n```\r\nand the utilization model is full : that means the cloudlets will use 100% of vm&#39;s resources(specification)\r\n\r\ni want to know how to calculate all those params\r\n","title":"Calculate RAM,CPU and BW for cloudlet in cloudsim","body":"<p>I faced problem in cloudsim\nI want to calculate the ram, cpu and bandwidth requirements for a given cloudlet</p>\n<p>here is an example of param for one cloudlet(task)</p>\n<pre><code> long fileSize = 300;\n long outputSize = 300;\n int pesNumber = 1;\n</code></pre>\n<p>and the utilization model is full : that means the cloudlets will use 100% of vm's resources(specification)</p>\n<p>i want to know how to calculate all those params</p>\n"},{"tags":["java","spring-boot","tomcat"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1678114944,"post_id":75652207,"comment_id":133465902,"body_markdown":"Client also shows 2 minutes or so delay. My bet is that client is not closing the connection so the server closes it after the timeout expired and then it serves the queued request.","body":"Client also shows 2 minutes or so delay. My bet is that client is not closing the connection so the server closes it after the timeout expired and then it serves the queued request."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":1,"creation_date":1678116720,"post_id":75652207,"comment_id":133466493,"body_markdown":"`HttpURLConnection.getInputSteam().close()`","body":"<code>HttpURLConnection.getInputSteam().close()</code>"},{"owner":{"account_id":15647173,"reputation":135,"user_id":11289119,"display_name":"Stefano Riffaldi"},"score":0,"creation_date":1678121936,"post_id":75652207,"comment_id":133468093,"body_markdown":"@LMC that&#39;s it, thanks so much ! how I can do that when i launch curl ?","body":"@LMC that&#39;s it, thanks so much ! how I can do that when i launch curl ?"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1678123576,"post_id":75652207,"comment_id":133468580,"body_markdown":"What do you mean curl? On command line? Besides, I added the answer that you can accept and upvote if you wish.","body":"What do you mean curl? On command line? Besides, I added the answer that you can accept and upvote if you wish."},{"owner":{"account_id":15647173,"reputation":135,"user_id":11289119,"display_name":"Stefano Riffaldi"},"score":0,"creation_date":1678176574,"post_id":75652207,"comment_id":133478022,"body_markdown":"@LMC yes I mean via command line. Issue is that, code confirm, what Im asking for is why its happening via CURL ? how can I close connection when I launch &quot;curl -v http://localhost:8080/sleep&quot; ?","body":"@LMC yes I mean via command line. Issue is that, code confirm, what Im asking for is why its happening via CURL ? how can I close connection when I launch &quot;curl -v <a href=\"http://localhost:8080/sleep\" rel=\"nofollow noreferrer\">localhost:8080/sleep</a>&quot; ?"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1678196213,"post_id":75652207,"comment_id":133483230,"body_markdown":"Try sending the header `curl -v -H &quot;Connection: close&quot; example.com`","body":"Try sending the header <code>curl -v -H &quot;Connection: close&quot; example.com</code>"}],"answers":[{"tags":[],"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678126370,"creation_date":1678123517,"answer_id":75653954,"question_id":75652207,"body_markdown":"\r\nClient also shows a delay of 2 minutes or so. That client is not closing the connection so the server closes it after the timeout expired and then it serves the queued request.\r\n\r\nTo close the conection on client side add\r\n\r\n    HttpURLConnection.getInputSteam().close()","title":"huge delay between request in Tomcat 8.0.53 and spring boot tuning maxConnections / maxThreads / acceptCount","body":"<p>Client also shows a delay of 2 minutes or so. That client is not closing the connection so the server closes it after the timeout expired and then it serves the queued request.</p>\n<p>To close the conection on client side add</p>\n<pre><code>HttpURLConnection.getInputSteam().close()\n</code></pre>\n"}],"owner":{"account_id":15647173,"reputation":135,"user_id":11289119,"display_name":"Stefano Riffaldi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75653954,"answer_count":1,"score":0,"last_activity_date":1678126370,"creation_date":1678113848,"question_id":75652207,"body_markdown":"I&#39;m trying to understand how maxConnections / maxThreads / acceptCount works to fine tune my container.\r\nAccording to [tomcat-8.0-doc][1] and [spring-boot 1.5.8.RELEASE docs][2] I create [this][3] sample project.\r\n\r\nI encounter a strange behavior:\r\nIf I set maxConnection = maxThreads = 1 and acceptCount = 1 ( just because 0 means infinite ) and I send 5 concurrent request, I expect 3 &quot;Connection refused&quot;, and other 2 perform &quot;sleep&quot;, one after the other ( because of maxThreads = 1 ).\r\n\r\nSo, the sequence is correct, but there is somwthing wrong:\r\n\r\nClient side: all as expected\r\n\r\n    15:33:49.455 INFO  ConnectionTest:52 [2] Getting Response Code\r\n    15:33:49.455 INFO  ConnectionTest:52 [4] Getting Response Code\r\n    15:33:49.456 INFO  ConnectionTest:52 [0] Getting Response Code\r\n    15:33:49.455 INFO  ConnectionTest:52 [3] Getting Response Code\r\n    15:33:49.461 INFO  ConnectionTest:52 [1] Getting Response Code\r\n    15:33:51.499 ERROR ConnectionTest:56 [0] java.net.ConnectException: Connection refused: connect\r\n    15:33:51.499 ERROR ConnectionTest:56 [2] java.net.ConnectException: Connection refused: connect\r\n    15:33:51.499 ERROR ConnectionTest:56 [3] java.net.ConnectException: Connection refused: connect\r\n    15:33:59.483 INFO  ConnectionTest:54 [1] Response Code: 200\r\n    15:35:10.041 INFO  ConnectionTest:54 [4] Response Code: 200\r\n\r\nServer side: there is a huge delay between the end of the first request and start of the second\r\n\r\n    15:33:49.473 INFO  SampleController:33 [D81EE650351DA872CBD15589A91BE129] sleep 10\r\n    15:33:59.479 INFO  SampleController:36 [D81EE650351DA872CBD15589A91BE129] ending [10006ms]\r\n    15:35:00.034 INFO  SampleController:33 [2B8A8D158EF02D1A054F067FC0A8273F] sleep 10\r\n    15:35:10.038 INFO  SampleController:36 [2B8A8D158EF02D1A054F067FC0A8273F] ending [10004ms]\r\n\r\nI tried to perform client task via Java Code (in test folder) and via SOAP UI / PostMan / curl and the delay found is different, so I thinks is something in client side.\r\n\r\nSomeone can help me ?\r\n\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-8.0-doc/config/http.html#Introduction\r\n  [2]: https://docs.spring.io/spring-boot/docs/1.5.8.RELEASE/reference/htmlsingle\r\n  [3]: https://github.com/stefanoriffaldi/poc-tomcat-max-connections-2","title":"huge delay between request in Tomcat 8.0.53 and spring boot tuning maxConnections / maxThreads / acceptCount","body":"<p>I'm trying to understand how maxConnections / maxThreads / acceptCount works to fine tune my container.\nAccording to <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/config/http.html#Introduction\" rel=\"nofollow noreferrer\">tomcat-8.0-doc</a> and <a href=\"https://docs.spring.io/spring-boot/docs/1.5.8.RELEASE/reference/htmlsingle\" rel=\"nofollow noreferrer\">spring-boot 1.5.8.RELEASE docs</a> I create <a href=\"https://github.com/stefanoriffaldi/poc-tomcat-max-connections-2\" rel=\"nofollow noreferrer\">this</a> sample project.</p>\n<p>I encounter a strange behavior:\nIf I set maxConnection = maxThreads = 1 and acceptCount = 1 ( just because 0 means infinite ) and I send 5 concurrent request, I expect 3 &quot;Connection refused&quot;, and other 2 perform &quot;sleep&quot;, one after the other ( because of maxThreads = 1 ).</p>\n<p>So, the sequence is correct, but there is somwthing wrong:</p>\n<p>Client side: all as expected</p>\n<pre><code>15:33:49.455 INFO  ConnectionTest:52 [2] Getting Response Code\n15:33:49.455 INFO  ConnectionTest:52 [4] Getting Response Code\n15:33:49.456 INFO  ConnectionTest:52 [0] Getting Response Code\n15:33:49.455 INFO  ConnectionTest:52 [3] Getting Response Code\n15:33:49.461 INFO  ConnectionTest:52 [1] Getting Response Code\n15:33:51.499 ERROR ConnectionTest:56 [0] java.net.ConnectException: Connection refused: connect\n15:33:51.499 ERROR ConnectionTest:56 [2] java.net.ConnectException: Connection refused: connect\n15:33:51.499 ERROR ConnectionTest:56 [3] java.net.ConnectException: Connection refused: connect\n15:33:59.483 INFO  ConnectionTest:54 [1] Response Code: 200\n15:35:10.041 INFO  ConnectionTest:54 [4] Response Code: 200\n</code></pre>\n<p>Server side: there is a huge delay between the end of the first request and start of the second</p>\n<pre><code>15:33:49.473 INFO  SampleController:33 [D81EE650351DA872CBD15589A91BE129] sleep 10\n15:33:59.479 INFO  SampleController:36 [D81EE650351DA872CBD15589A91BE129] ending [10006ms]\n15:35:00.034 INFO  SampleController:33 [2B8A8D158EF02D1A054F067FC0A8273F] sleep 10\n15:35:10.038 INFO  SampleController:36 [2B8A8D158EF02D1A054F067FC0A8273F] ending [10004ms]\n</code></pre>\n<p>I tried to perform client task via Java Code (in test folder) and via SOAP UI / PostMan / curl and the delay found is different, so I thinks is something in client side.</p>\n<p>Someone can help me ?</p>\n"},{"tags":["java","android","location","google-location-services","fusedlocationproviderclient"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1678165081,"post_id":75654353,"comment_id":133475980,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":1906384,"reputation":51,"user_id":1721171,"display_name":"Michael Remme"},"score":0,"creation_date":1678203749,"post_id":75654353,"comment_id":133485684,"body_markdown":"actually i found the solution: i had to add FOREGROUND_SERVICE as permission to the manifest and all works fine","body":"actually i found the solution: i had to add FOREGROUND_SERVICE as permission to the manifest and all works fine"}],"owner":{"account_id":1906384,"reputation":51,"user_id":1721171,"display_name":"Michael Remme"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678126138,"creation_date":1678126138,"question_id":75654353,"body_markdown":"I want to implement a logger, which stores the location of the client after a certain time or when the position is changed. When i am starting the logger, it serves the location only one time. When i am changing the position of the client, nothing happens. \r\nThe permissions ACCESS_FINE_LOCATION, ACCESS_COARSE_LOCATION, WRITE_EXTERNAL_STORAGE are granted and i am using an emulator with play store installed.\r\n\r\nHere is my code:\r\n\r\n\r\n```\r\nimport android.annotation.SuppressLint;\r\nimport android.location.Location;\r\nimport android.os.Looper;\r\nimport android.util.Log;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.FragmentActivity;\r\n\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.gms.location.Granularity;\r\nimport com.google.android.gms.location.LocationCallback;\r\nimport com.google.android.gms.location.LocationRequest;\r\nimport com.google.android.gms.location.LocationResult;\r\nimport com.google.android.gms.location.LocationServices;\r\nimport com.google.android.gms.location.Priority;\r\nimport com.google.android.gms.tasks.OnCanceledListener;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\n\r\nimport de.remi.locker.database.entities.Trip;\r\nimport de.remi.locker.util.MapsHelper;\r\nimport de.remi.locker.util.PermissionHelper;\r\n\r\npublic class AndroidLogger implements AutoLogger.ILoggerClient {\r\n    private static final String TAG = &quot;AndroidLogger&quot;;\r\n    private final FragmentActivity activity;\r\n    private FusedLocationProviderClient client;\r\n    private LocationCallback callBack;\r\n\r\n    public AndroidLogger(FragmentActivity activity) {\r\n        this.activity = activity;\r\n        init();\r\n    }\r\n\r\n    private void init() {\r\n        client = LocationServices.getFusedLocationProviderClient(activity);\r\n        callBack = new LocationCallback() {\r\n            @Override\r\n            public void onLocationResult(@NonNull LocationResult locationResult) {\r\n                locationResult.getLocations().forEach(location -&gt; handleLocation(location));\r\n            }\r\n        };\r\n    }\r\n\r\n    private void handleLocation(Location location) {\r\n        Log.d(TAG, &quot;handleLocation: &quot; + location);\r\n    }\r\n\r\n    private LocationRequest getLocationRequest() {\r\n        LocationRequest.Builder builder = new LocationRequest.Builder(10000);\r\n        builder.setMinUpdateDistanceMeters(50);\r\n        builder.setDurationMillis(60 * 1000);\r\n        builder.setGranularity(Granularity.GRANULARITY_FINE);\r\n        builder.setWaitForAccurateLocation(false);\r\n        builder.setPriority(Priority.PRIORITY_HIGH_ACCURACY);\r\n        return builder.build();\r\n    }\r\n\r\n    @SuppressLint(&quot;MissingPermission&quot;)\r\n    @Override\r\n    public void startLogging(Trip trip) {\r\n        if (!PermissionHelper.hasPermissions(activity.getApplicationContext(), MapsHelper.OSM_PERMISSIONS))\r\n            throw new UnsupportedOperationException(&quot;permissions missing &quot;);\r\n\r\n        client.requestLocationUpdates(getLocationRequest(), callBack, Looper.myLooper()).addOnCanceledListener(new OnCanceledListener() {\r\n            @Override\r\n            public void onCanceled() {\r\n                Log.d(TAG, &quot;onCanceled: &quot;);\r\n            }\r\n        }).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                Log.d(TAG, &quot;onComplete: &quot;);\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Log.e(TAG, &quot;onFailure: &quot;, e);\r\n            }\r\n        }).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onSuccess(Void unused) {\r\n                Log.d(TAG, &quot;onSuccess: &quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void stopLogging() {\r\n        client.removeLocationUpdates(callBack);\r\n    }\r\n\r\n\r\n```\r\n\r\n\r\nIn my understanding every 60 seconds or after a position change of minimum 50 meters a new position log should be performed.\r\nI used several emulators, from API 30 - 33, changed the CallBack to a listener, nothing changed. Also i changed several parameters of the LocationRequest, without any change\r\n\r\nHope anybody has a helping hint\r\n","title":"Android LocationServices respond only one time","body":"<p>I want to implement a logger, which stores the location of the client after a certain time or when the position is changed. When i am starting the logger, it serves the location only one time. When i am changing the position of the client, nothing happens.\nThe permissions ACCESS_FINE_LOCATION, ACCESS_COARSE_LOCATION, WRITE_EXTERNAL_STORAGE are granted and i am using an emulator with play store installed.</p>\n<p>Here is my code:</p>\n<pre><code>import android.annotation.SuppressLint;\nimport android.location.Location;\nimport android.os.Looper;\nimport android.util.Log;\n\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.FragmentActivity;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\nimport com.google.android.gms.location.Granularity;\nimport com.google.android.gms.location.LocationCallback;\nimport com.google.android.gms.location.LocationRequest;\nimport com.google.android.gms.location.LocationResult;\nimport com.google.android.gms.location.LocationServices;\nimport com.google.android.gms.location.Priority;\nimport com.google.android.gms.tasks.OnCanceledListener;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.OnFailureListener;\nimport com.google.android.gms.tasks.OnSuccessListener;\nimport com.google.android.gms.tasks.Task;\n\nimport de.remi.locker.database.entities.Trip;\nimport de.remi.locker.util.MapsHelper;\nimport de.remi.locker.util.PermissionHelper;\n\npublic class AndroidLogger implements AutoLogger.ILoggerClient {\n    private static final String TAG = &quot;AndroidLogger&quot;;\n    private final FragmentActivity activity;\n    private FusedLocationProviderClient client;\n    private LocationCallback callBack;\n\n    public AndroidLogger(FragmentActivity activity) {\n        this.activity = activity;\n        init();\n    }\n\n    private void init() {\n        client = LocationServices.getFusedLocationProviderClient(activity);\n        callBack = new LocationCallback() {\n            @Override\n            public void onLocationResult(@NonNull LocationResult locationResult) {\n                locationResult.getLocations().forEach(location -&gt; handleLocation(location));\n            }\n        };\n    }\n\n    private void handleLocation(Location location) {\n        Log.d(TAG, &quot;handleLocation: &quot; + location);\n    }\n\n    private LocationRequest getLocationRequest() {\n        LocationRequest.Builder builder = new LocationRequest.Builder(10000);\n        builder.setMinUpdateDistanceMeters(50);\n        builder.setDurationMillis(60 * 1000);\n        builder.setGranularity(Granularity.GRANULARITY_FINE);\n        builder.setWaitForAccurateLocation(false);\n        builder.setPriority(Priority.PRIORITY_HIGH_ACCURACY);\n        return builder.build();\n    }\n\n    @SuppressLint(&quot;MissingPermission&quot;)\n    @Override\n    public void startLogging(Trip trip) {\n        if (!PermissionHelper.hasPermissions(activity.getApplicationContext(), MapsHelper.OSM_PERMISSIONS))\n            throw new UnsupportedOperationException(&quot;permissions missing &quot;);\n\n        client.requestLocationUpdates(getLocationRequest(), callBack, Looper.myLooper()).addOnCanceledListener(new OnCanceledListener() {\n            @Override\n            public void onCanceled() {\n                Log.d(TAG, &quot;onCanceled: &quot;);\n            }\n        }).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                Log.d(TAG, &quot;onComplete: &quot;);\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                Log.e(TAG, &quot;onFailure: &quot;, e);\n            }\n        }).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n            @Override\n            public void onSuccess(Void unused) {\n                Log.d(TAG, &quot;onSuccess: &quot;);\n            }\n        });\n    }\n\n    @Override\n    public void stopLogging() {\n        client.removeLocationUpdates(callBack);\n    }\n\n\n</code></pre>\n<p>In my understanding every 60 seconds or after a position change of minimum 50 meters a new position log should be performed.\nI used several emulators, from API 30 - 33, changed the CallBack to a listener, nothing changed. Also i changed several parameters of the LocationRequest, without any change</p>\n<p>Hope anybody has a helping hint</p>\n"},{"tags":["java","android","parsing","firebase-realtime-database","time"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1678104065,"post_id":75650584,"comment_id":133462666,"body_markdown":"What&#39;s the value of `getSub` inside your reference?","body":"What&#39;s the value of <code>getSub</code> inside your reference?"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":1,"creation_date":1678104116,"post_id":75650584,"comment_id":133462683,"body_markdown":"Note: if you can, you should stop using `Calendar`, `Date` and `SimpleDateFormat`, since they are obsolete. Use classes from the `java.time` package.","body":"Note: if you can, you should stop using <code>Calendar</code>, <code>Date</code> and <code>SimpleDateFormat</code>, since they are obsolete. Use classes from the <code>java.time</code> package."},{"owner":{"account_id":15504084,"reputation":3,"user_id":12823758,"display_name":"Venise Moises Joseph"},"score":0,"creation_date":1678104137,"post_id":75650584,"comment_id":133462688,"body_markdown":"the value is the current subject, typically the MSYADD1. I get the value of that textView since it will be the basis if that subject is existing.","body":"the value is the current subject, typically the MSYADD1. I get the value of that textView since it will be the basis if that subject is existing."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1678104151,"post_id":75650584,"comment_id":133462693,"body_markdown":"1) do not use `Date`, `Calendar`, `SimpleDateTime`, ... all outdated by the `java.time` package. 2) this seems too complicated, getting a Date, then to Calendar, back to Data... maybe `LocalTime timeIn = LocalTime.parse(text, formatter); if (timeIn.isAfter(LocalTime.now)) { ... }`","body":"1) do not use <code>Date</code>, <code>Calendar</code>, <code>SimpleDateTime</code>, ... all outdated by the <code>java.time</code> package. 2) this seems too complicated, getting a Date, then to Calendar, back to Data... maybe <code>LocalTime timeIn = LocalTime.parse(text, formatter); if (timeIn.isAfter(LocalTime.now)) { ... }</code>"},{"owner":{"account_id":15504084,"reputation":3,"user_id":12823758,"display_name":"Venise Moises Joseph"},"score":0,"creation_date":1678104288,"post_id":75650584,"comment_id":133462725,"body_markdown":"how do I use the java.time package?","body":"how do I use the java.time package?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1678110960,"post_id":75650584,"comment_id":133464656,"body_markdown":"*how do I use the java.time package?* (1) [Official Oreacle tutorial](https://docs.oracle.com/javase/tutorial/datetime/index.html) (2) If for older Android versions (before API 26/Oreo), through [core library desugaring](https://developer.android.com/studio/write/java8-support)","body":"<i>how do I use the java.time package?</i> (1) <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Official Oreacle tutorial</a> (2) If for older Android versions (before API 26/Oreo), through <a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">core library desugaring</a>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1678111012,"post_id":75650584,"comment_id":133464672,"body_markdown":"Did you search? This and similar questions have been asked and answered more than once before.","body":"Did you search? This and similar questions have been asked and answered more than once before."}],"owner":{"account_id":15504084,"reputation":3,"user_id":12823758,"display_name":"Venise Moises Joseph"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1678125990,"answer_count":0,"score":0,"last_activity_date":1678126133,"creation_date":1678103869,"question_id":75650584,"body_markdown":"I am trying to compare the Time In or start time of the Subject and the current time. so for simple explanation, here&#39;s what I am trying to do..\r\n\r\nif currentTime is beyond TimeIn, then I will toast a message &quot;late&quot;, then if not beyond, then it will start a new activity.\r\n\r\n![enter image description here](https://i.stack.imgur.com/4mRjp.png) \r\n\r\nin the image it shows the data and I am trying to get the pSubjtimeIn...\r\n\r\nhere is my code that I am trying...\r\n\r\n```\r\nString getSub = curSubj.getText().toString().trim();\r\n\r\ndbref = FirebaseDatabase.getInstance().getReference(&quot;Subjects&quot;).child(getSub).child(&quot;pSubjtimeIn&quot;);\r\n\r\ndbref.addValueEventListener(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n\r\n        if (snapshot.exists()) {\r\n//I still got an error here Can&#39;t convert object of type java.lang.String to type            \r\nSectionClass data = snapshot.getValue(SectionClass.class);\r\n            if (data != null) {\r\n                String getTime = data.getpSubjtimeIn();\r\n                Toast.makeText(StudentHomePage.this, &quot;&quot; + getTime, Toast.LENGTH_SHORT).show();\r\n                if (getTime != null) {\r\n                    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;h:mm a&quot;, Locale.getDefault());\r\n                    Date storedTime = null;\r\n                    try {\r\n                        storedTime = dateFormat.parse(getTime);\r\n                    } catch (ParseException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                    if (storedTime != null) {\r\n                        Calendar calendar = Calendar.getInstance();\r\n                        Date currentTime = calendar.getTime();\r\n\r\n                        calendar.setTime(storedTime);\r\n                        calendar.add(Calendar.MINUTE, 15);\r\n                        Date latetime = calendar.getTime();\r\n\r\n                        if (currentTime.after(storedTime) &amp;&amp; currentTime.before(latetime)) {\r\n                            Toast.makeText(getApplicationContext(), &quot;Late&quot;, Toast.LENGTH_SHORT).show();\r\n                        } else {\r\n                            Intent intent = new Intent(StudentHomePage.this, Present.class);\r\n                            startActivity(intent);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n```","title":"Compare time in to current time","body":"<p>I am trying to compare the Time In or start time of the Subject and the current time. so for simple explanation, here's what I am trying to do..</p>\n<p>if currentTime is beyond TimeIn, then I will toast a message &quot;late&quot;, then if not beyond, then it will start a new activity.</p>\n<p><img src=\"https://i.stack.imgur.com/4mRjp.png\" alt=\"enter image description here\" /></p>\n<p>in the image it shows the data and I am trying to get the pSubjtimeIn...</p>\n<p>here is my code that I am trying...</p>\n<pre><code>String getSub = curSubj.getText().toString().trim();\n\ndbref = FirebaseDatabase.getInstance().getReference(&quot;Subjects&quot;).child(getSub).child(&quot;pSubjtimeIn&quot;);\n\ndbref.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n\n        if (snapshot.exists()) {\n//I still got an error here Can't convert object of type java.lang.String to type            \nSectionClass data = snapshot.getValue(SectionClass.class);\n            if (data != null) {\n                String getTime = data.getpSubjtimeIn();\n                Toast.makeText(StudentHomePage.this, &quot;&quot; + getTime, Toast.LENGTH_SHORT).show();\n                if (getTime != null) {\n                    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;h:mm a&quot;, Locale.getDefault());\n                    Date storedTime = null;\n                    try {\n                        storedTime = dateFormat.parse(getTime);\n                    } catch (ParseException e) {\n                        e.printStackTrace();\n                    }\n\n                    if (storedTime != null) {\n                        Calendar calendar = Calendar.getInstance();\n                        Date currentTime = calendar.getTime();\n\n                        calendar.setTime(storedTime);\n                        calendar.add(Calendar.MINUTE, 15);\n                        Date latetime = calendar.getTime();\n\n                        if (currentTime.after(storedTime) &amp;&amp; currentTime.before(latetime)) {\n                            Toast.makeText(getApplicationContext(), &quot;Late&quot;, Toast.LENGTH_SHORT).show();\n                        } else {\n                            Intent intent = new Intent(StudentHomePage.this, Present.class);\n                            startActivity(intent);\n                        }\n                    }\n                }\n            }\n        }\n</code></pre>\n"},{"tags":["java","generics","casting","typechecking","consumer"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1678122329,"post_id":75653662,"comment_id":133468223,"body_markdown":"Why do you think that a `Map&lt;Step, Consumer&lt;? extends Step&gt;&gt;` is readonly?","body":"Why do you think that a <code>Map&lt;Step, Consumer&lt;? extends Step&gt;&gt;</code> is readonly?"},{"owner":{"account_id":26979893,"reputation":33,"user_id":20544416,"display_name":"Daniel Mendes Sechinske"},"score":0,"creation_date":1678125288,"post_id":75653662,"comment_id":133469082,"body_markdown":"Not sure, I just read a similar post about it here in stackoverflow, can&#39;t seem to find it again to link it here tho","body":"Not sure, I just read a similar post about it here in stackoverflow, can&#39;t seem to find it again to link it here tho"}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678122278,"creation_date":1678122278,"answer_id":75653746,"question_id":75653662,"body_markdown":"The compiler has no way of confirming that the subtype of Step that&#39;s the key of the Map is the *same* subtype of the Consumer for the key&#39;s value in the Map.\r\n\r\n*You* know that, so *you* know the unchecked cast is safe.\r\n\r\nGo with the unchecked cast.","title":"Usage of polymorphism with Map and Consumer from Java","body":"<p>The compiler has no way of confirming that the subtype of Step that's the key of the Map is the <em>same</em> subtype of the Consumer for the key's value in the Map.</p>\n<p><em>You</em> know that, so <em>you</em> know the unchecked cast is safe.</p>\n<p>Go with the unchecked cast.</p>\n"}],"owner":{"account_id":26979893,"reputation":33,"user_id":20544416,"display_name":"Daniel Mendes Sechinske"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678125963,"creation_date":1678121766,"question_id":75653662,"body_markdown":"I have a class like this\r\n\r\n```\r\npublic class Foo {\r\n\tprivate final Map&lt;Step, Consumer&lt;Step&gt;&gt; context = new LinkedHashMap&lt;&gt;();\r\n\t\r\n\tpublic &lt;T extends Step&gt; void save(Consumer&lt;T&gt; consumer, T step) {\r\n\t\tthis.context.put(step, consumer);\r\n\t}\r\n}\r\n```\r\n\r\nAs you can see, I wanna be able to save any class that is a child of `Step` inside my `Map` context, but I get the following error\r\n\r\n```\r\nProvided Consumer&lt;T&gt;, Required Consumer&lt;Step&gt;\r\n```\r\n\r\nIs any way to achieve the desired result by using generics?\r\n\r\nSome things I tried are:\r\n\r\n - Changing the `Map` type to `&lt;? extends Step&gt;`, but this throw a new error, because it seems that when you use the wildcard `?` you have a read-only `Map`.\r\n - Typecasting like below\r\n\r\n```\r\npublic class Foo {\r\n\tprivate final Map&lt;Step, Consumer&lt;Step&gt;&gt; context = new LinkedHashMap&lt;&gt;();\r\n\t\r\n\tpublic &lt;T extends Step&gt; void save(Consumer&lt;T&gt; consumer, T step) {\r\n\t\tthis.context.put(step, (Consumer&lt;Step&gt;) consumer);\r\n\t}\r\n}\r\n```\r\n\r\nThe later seems to work, but I get a `Unchecked cast` warning on my console. If this is the way to go, I would like to know what are the downsides of it and how would be an apropriate way to check for it.","title":"Usage of polymorphism with Map and Consumer from Java","body":"<p>I have a class like this</p>\n<pre><code>public class Foo {\n    private final Map&lt;Step, Consumer&lt;Step&gt;&gt; context = new LinkedHashMap&lt;&gt;();\n    \n    public &lt;T extends Step&gt; void save(Consumer&lt;T&gt; consumer, T step) {\n        this.context.put(step, consumer);\n    }\n}\n</code></pre>\n<p>As you can see, I wanna be able to save any class that is a child of <code>Step</code> inside my <code>Map</code> context, but I get the following error</p>\n<pre><code>Provided Consumer&lt;T&gt;, Required Consumer&lt;Step&gt;\n</code></pre>\n<p>Is any way to achieve the desired result by using generics?</p>\n<p>Some things I tried are:</p>\n<ul>\n<li>Changing the <code>Map</code> type to <code>&lt;? extends Step&gt;</code>, but this throw a new error, because it seems that when you use the wildcard <code>?</code> you have a read-only <code>Map</code>.</li>\n<li>Typecasting like below</li>\n</ul>\n<pre><code>public class Foo {\n    private final Map&lt;Step, Consumer&lt;Step&gt;&gt; context = new LinkedHashMap&lt;&gt;();\n    \n    public &lt;T extends Step&gt; void save(Consumer&lt;T&gt; consumer, T step) {\n        this.context.put(step, (Consumer&lt;Step&gt;) consumer);\n    }\n}\n</code></pre>\n<p>The later seems to work, but I get a <code>Unchecked cast</code> warning on my console. If this is the way to go, I would like to know what are the downsides of it and how would be an apropriate way to check for it.</p>\n"},{"tags":["java","hibernate","spring-data-jpa","many-to-many"],"answers":[{"tags":[],"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1678125891,"creation_date":1638073938,"answer_id":70140680,"question_id":70139667,"body_markdown":"Either declare Primary Key with auto increment or pass primary from json request. If you are not doing like that, The primary key is stored with `0` value in a database.\r\n\r\nDeclare primary key with `@GeneratedValue(strategy = GenerationType.IDENTITY)` for auto increment.\r\n\r\n```\r\npublic class Book {\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n    ...\r\n    ...\r\n}\r\n```","title":"Why do I get a java.sql.SQLIntegrityConstraintViolationException from a Hibernate many to many relation (foreign key constraint)","body":"<p>Either declare Primary Key with auto increment or pass primary from json request. If you are not doing like that, The primary key is stored with <code>0</code> value in a database.</p>\n<p>Declare primary key with <code>@GeneratedValue(strategy = GenerationType.IDENTITY)</code> for auto increment.</p>\n<pre><code>public class Book {\n\n    @Id\n    @Column(name = &quot;id&quot;, nullable = false)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n    ...\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":7356285,"reputation":1027,"user_id":5600930,"accept_rate":56,"display_name":"Mint"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":496,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70140680,"answer_count":1,"score":2,"last_activity_date":1678125891,"creation_date":1638057705,"question_id":70139667,"body_markdown":"I have `tbl_books` which has m2m with `tbl_author`. I want to save a book and its authors. I&#39;m able to save the book if I don&#39;t include a list of authors but how am I suppose to save the authors to the book? Do I need to create the tbl_book_authors table in order to achieve this?\r\n\r\n    {\r\n        &quot;title&quot;: &quot;a new book&quot;,\r\n        &quot;publisher&quot;: {\r\n            &quot;id&quot;: 7\r\n        },\r\n        &quot;authors&quot;: [\r\n            {\r\n                &quot;id&quot;: 3\r\n            }\r\n        ]\r\n    }\r\n\r\n \r\n[![enter image description here][1]][1]\r\n\r\nBook.java\r\n\r\n    ...\r\n    @NoArgsConstructor\r\n    @Entity(name=&quot;Book&quot;)\r\n    @Table(name=&quot;tblBook&quot;)\r\n    public class Book {\r\n    \r\n        @Id\r\n        @Column(name = &quot;id&quot;, unique = true, nullable = false)\r\n        private int id;\r\n        private String title;\r\n        @ManyToOne(fetch = FetchType.EAGER, optional = false)\r\n        @JoinColumn(name = &quot;pub_id&quot;, nullable = false)\r\n        private Publisher publisher;\r\n        @ManyToMany(fetch = FetchType.EAGER)\r\n        @JoinTable(name = &quot;tblBookAuthors&quot;,\r\n                joinColumns = { @JoinColumn(name = &quot;bookId&quot;) },\r\n                inverseJoinColumns = { @JoinColumn(name = &quot;authorId&quot;) })\r\n        private Set&lt;Author&gt; authors = new HashSet&lt;&gt;();\r\n        ...\r\n\r\n\r\nauthor.java\r\n\r\n    ...\r\n    @NoArgsConstructor\r\n    @Entity(name=&quot;Author&quot;)\r\n    @Table(name=&quot;tblAuthor&quot;)\r\n    public class Author {\r\n    \r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        private int id;\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n        @JsonBackReference\r\n        @ManyToMany(mappedBy = &quot;authors&quot;)\r\n        Set&lt;Book&gt; books;\r\n\r\n        ...\r\n\r\n\r\nlog\r\n\r\n\r\n    Book{id=0, title=&#39;a new book&#39;, publisher=Publisher{id=7, name=&#39;null&#39;, address=&#39;null&#39;, phone=&#39;null&#39;, books=null}, authors=[Author{id=3, name=&#39;null&#39;, books=null}]}\r\n    Hibernate: select publisher_.id, publisher_.address as address2_4_, publisher_.name as name3_4_, publisher_.phone as phone4_4_ from tbl_publisher publisher_ where publisher_.id=?\r\n    Hibernate: insert into tbl_book (pub_id, title, id) values (?, ?, ?)\r\n    Hibernate: insert into tbl_book_authors (book_id, author_id) values (?, ?)\r\n    2021-11-27 18:49:06.643  WARN 8704 --- [nio-8080-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1452, SQLState: 23000\r\n    2021-11-27 18:49:06.643 ERROR 8704 --- [nio-8080-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : Cannot add or update a child row: a foreign key constraint fails (`library`.`tbl_book_authors`, CONSTRAINT `fk_tbl_book_authors_tbl_book1` FOREIGN KEY (`book_id`) REFERENCES `tbl_book` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)\r\n    2021-11-27 18:49:06.644  INFO 8704 --- [nio-8080-exec-7] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements\r\n    2021-11-27 18:49:06.663 ERROR 8704 --- [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause\r\n    \r\n    java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`library`.`tbl_book_authors`, CONSTRAINT `fk_tbl_book_authors_tbl_book1` FOREIGN KEY (`book_id`) REFERENCES `tbl_book` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LSEs6.png\r\n","title":"Why do I get a java.sql.SQLIntegrityConstraintViolationException from a Hibernate many to many relation (foreign key constraint)","body":"<p>I have <code>tbl_books</code> which has m2m with <code>tbl_author</code>. I want to save a book and its authors. I'm able to save the book if I don't include a list of authors but how am I suppose to save the authors to the book? Do I need to create the tbl_book_authors table in order to achieve this?</p>\n<pre><code>{\n    &quot;title&quot;: &quot;a new book&quot;,\n    &quot;publisher&quot;: {\n        &quot;id&quot;: 7\n    },\n    &quot;authors&quot;: [\n        {\n            &quot;id&quot;: 3\n        }\n    ]\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/LSEs6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LSEs6.png\" alt=\"enter image description here\" /></a></p>\n<p>Book.java</p>\n<pre><code>...\n@NoArgsConstructor\n@Entity(name=&quot;Book&quot;)\n@Table(name=&quot;tblBook&quot;)\npublic class Book {\n\n    @Id\n    @Column(name = &quot;id&quot;, unique = true, nullable = false)\n    private int id;\n    private String title;\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\n    @JoinColumn(name = &quot;pub_id&quot;, nullable = false)\n    private Publisher publisher;\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(name = &quot;tblBookAuthors&quot;,\n            joinColumns = { @JoinColumn(name = &quot;bookId&quot;) },\n            inverseJoinColumns = { @JoinColumn(name = &quot;authorId&quot;) })\n    private Set&lt;Author&gt; authors = new HashSet&lt;&gt;();\n    ...\n</code></pre>\n<p>author.java</p>\n<pre><code>...\n@NoArgsConstructor\n@Entity(name=&quot;Author&quot;)\n@Table(name=&quot;tblAuthor&quot;)\npublic class Author {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    private int id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    @JsonBackReference\n    @ManyToMany(mappedBy = &quot;authors&quot;)\n    Set&lt;Book&gt; books;\n\n    ...\n</code></pre>\n<p>log</p>\n<pre><code>Book{id=0, title='a new book', publisher=Publisher{id=7, name='null', address='null', phone='null', books=null}, authors=[Author{id=3, name='null', books=null}]}\nHibernate: select publisher_.id, publisher_.address as address2_4_, publisher_.name as name3_4_, publisher_.phone as phone4_4_ from tbl_publisher publisher_ where publisher_.id=?\nHibernate: insert into tbl_book (pub_id, title, id) values (?, ?, ?)\nHibernate: insert into tbl_book_authors (book_id, author_id) values (?, ?)\n2021-11-27 18:49:06.643  WARN 8704 --- [nio-8080-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1452, SQLState: 23000\n2021-11-27 18:49:06.643 ERROR 8704 --- [nio-8080-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : Cannot add or update a child row: a foreign key constraint fails (`library`.`tbl_book_authors`, CONSTRAINT `fk_tbl_book_authors_tbl_book1` FOREIGN KEY (`book_id`) REFERENCES `tbl_book` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)\n2021-11-27 18:49:06.644  INFO 8704 --- [nio-8080-exec-7] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements\n2021-11-27 18:49:06.663 ERROR 8704 --- [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause\n\njava.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`library`.`tbl_book_authors`, CONSTRAINT `fk_tbl_book_authors_tbl_book1` FOREIGN KEY (`book_id`) REFERENCES `tbl_book` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)\n</code></pre>\n"},{"tags":["javascript","java","switch-statement","case"],"comments":[{"owner":{"account_id":5658021,"reputation":2263,"user_id":4476484,"accept_rate":75,"display_name":"nullromo"},"score":0,"creation_date":1678125935,"post_id":75654200,"comment_id":133469254,"body_markdown":"It&#39;s true that `switch` can be faster than `if-else`, but this is only relevant when the logic of the code is convertible between the two. Planes are faster than submarines, but sometimes you can&#39;t take a plane because of, well... complications.","body":"It&#39;s true that <code>switch</code> can be faster than <code>if-else</code>, but this is only relevant when the logic of the code is convertible between the two. Planes are faster than submarines, but sometimes you can&#39;t take a plane because of, well... complications."},{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1678127407,"post_id":75654200,"comment_id":133469650,"body_markdown":"@nullromo - *&quot;It&#39;s true that switch can be faster than if-else,&quot;* Not really in JavaScript, and certainly not ones like the above. JavaScript&#39;s `switch` is just `if`/`else if`/`else` with different syntax. `case` labels are expressions (not just literals) as you can see in the question, so the C-like optimizations (jump tables, etc.) aren&#39;t available. (If the `case` labels **were** literals, then maybe the JavaScript engine could do something with it, but...)","body":"@nullromo - <i>&quot;It&#39;s true that switch can be faster than if-else,&quot;</i> Not really in JavaScript, and certainly not ones like the above. JavaScript&#39;s <code>switch</code> is just <code>if</code>/<code>else if</code>/<code>else</code> with different syntax. <code>case</code> labels are expressions (not just literals) as you can see in the question, so the C-like optimizations (jump tables, etc.) aren&#39;t available. (If the <code>case</code> labels <b>were</b> literals, then maybe the JavaScript engine could do something with it, but...)"},{"owner":{"account_id":5658021,"reputation":2263,"user_id":4476484,"accept_rate":75,"display_name":"nullromo"},"score":0,"creation_date":1678127511,"post_id":75654200,"comment_id":133469679,"body_markdown":"I see what you mean. I was going based on [this answer](https://stackoverflow.com/a/2923007/4476484). That&#39;s why I said &quot;_can be_ faster.&quot;","body":"I see what you mean. I was going based on <a href=\"https://stackoverflow.com/a/2923007/4476484\">this answer</a>. That&#39;s why I said &quot;<i>can be</i> faster.&quot;"}],"answers":[{"comments":[{"owner":{"account_id":25945891,"reputation":13,"user_id":19664620,"display_name":"Radeks"},"score":1,"creation_date":1678126197,"post_id":75654260,"comment_id":133469326,"body_markdown":"That&#39;s what I thought, but wanted to make sure. but thanks for the code anyway","body":"That&#39;s what I thought, but wanted to make sure. but thanks for the code anyway"}],"tags":[],"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678125569,"creation_date":1678125569,"answer_id":75654260,"question_id":75654200,"body_markdown":"&gt; Can I execute all true cases?\r\n\r\nNot reasonably, no, and moreover it isn&#39;t the right tool for that job. Instead of `switch`, use a series of `if` statements:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    let num = 30;\r\n    if (num &gt;= 20) {\r\n        console.log(&quot;code for case 1&quot;);\r\n    }\r\n    if (num == 31)  {\r\n        console.log(&quot;code for case 2&quot;);\r\n    }\r\n    if (num &lt; 50) {\r\n        console.log(&quot;code for case 3&quot;);\r\n    }\r\n    if (num == 10 + 20) {\r\n        console.log(&quot;code for case 4&quot;);\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Switch multiple case execution","body":"<blockquote>\n<p>Can I execute all true cases?</p>\n</blockquote>\n<p>Not reasonably, no, and moreover it isn't the right tool for that job. Instead of <code>switch</code>, use a series of <code>if</code> statements:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let num = 30;\nif (num &gt;= 20) {\n    console.log(\"code for case 1\");\n}\nif (num == 31)  {\n    console.log(\"code for case 2\");\n}\nif (num &lt; 50) {\n    console.log(\"code for case 3\");\n}\nif (num == 10 + 20) {\n    console.log(\"code for case 4\");\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"comments":[{"owner":{"account_id":25945891,"reputation":13,"user_id":19664620,"display_name":"Radeks"},"score":0,"creation_date":1678126421,"post_id":75654263,"comment_id":133469378,"body_markdown":"I saw this solution on the website, it won&#39;t help me unfortunately, but thanks anyway","body":"I saw this solution on the website, it won&#39;t help me unfortunately, but thanks anyway"}],"tags":[],"owner":{"account_id":5658021,"reputation":2263,"user_id":4476484,"accept_rate":75,"display_name":"nullromo"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678125590,"creation_date":1678125590,"answer_id":75654263,"question_id":75654200,"body_markdown":"Switch statements should normally be used when you want to choose one option. There is a &quot;fallthrough&quot; behavior, however.\r\n\r\n```javascript\r\nswitch(x) {\r\n    case 1:\r\n    case 2:\r\n        doSomething();\r\n        // no break here!\r\n    case 3:\r\n        doOtherThing();\r\n        break;\r\n    case 4:\r\n        // ...\r\n}\r\n```\r\n\r\nIn the above code, if `x` is 1 or 2, both `doSomething()` and `doOtherThing()` will happen, whereas if `x` is 3, then only `doOtherThing()` will happen.\r\n\r\nIf you want to do some more complex combination of operations with conditions, `if` statements are probably better.","title":"Switch multiple case execution","body":"<p>Switch statements should normally be used when you want to choose one option. There is a &quot;fallthrough&quot; behavior, however.</p>\n<pre class=\"lang-js prettyprint-override\"><code>switch(x) {\n    case 1:\n    case 2:\n        doSomething();\n        // no break here!\n    case 3:\n        doOtherThing();\n        break;\n    case 4:\n        // ...\n}\n</code></pre>\n<p>In the above code, if <code>x</code> is 1 or 2, both <code>doSomething()</code> and <code>doOtherThing()</code> will happen, whereas if <code>x</code> is 3, then only <code>doOtherThing()</code> will happen.</p>\n<p>If you want to do some more complex combination of operations with conditions, <code>if</code> statements are probably better.</p>\n"},{"tags":[],"owner":{"account_id":1556832,"reputation":378932,"user_id":1447675,"display_name":"Nina Scholz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678125889,"creation_date":1678125889,"answer_id":75654311,"question_id":75654200,"body_markdown":"Once you have left a case clause of a [`switch` statement](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch) with `break`, you can not get into the switch statement again.\r\n\r\nNot even a *fall through*, like a bundle of cases without `break` does not work for your problem to have multiple checks and the **same amount** of actions.\r\n\r\nA solution is to use single check with `if` and go on with another `if`\r\n\r\n    if (condition1) console.log(&#39;condition 1&#39;);\r\n    if (condition2) console.log(&#39;condition 2&#39;);\r\n    // and so on","title":"Switch multiple case execution","body":"<p>Once you have left a case clause of a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch\" rel=\"nofollow noreferrer\"><code>switch</code> statement</a> with <code>break</code>, you can not get into the switch statement again.</p>\n<p>Not even a <em>fall through</em>, like a bundle of cases without <code>break</code> does not work for your problem to have multiple checks and the <strong>same amount</strong> of actions.</p>\n<p>A solution is to use single check with <code>if</code> and go on with another <code>if</code></p>\n<pre><code>if (condition1) console.log('condition 1');\nif (condition2) console.log('condition 2');\n// and so on\n</code></pre>\n"}],"owner":{"account_id":25945891,"reputation":13,"user_id":19664620,"display_name":"Radeks"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75654263,"answer_count":3,"score":0,"last_activity_date":1678125889,"creation_date":1678125242,"question_id":75654200,"body_markdown":"I try to execute more than one case in `switch` statement. I wrote this as a `if` statement but I read somewhere is the `switch` is more efficient than `if`. Now execute always only first correct.\r\n\r\n```\r\n      let num = 30;\r\n      switch (true) {\r\n        case (num &gt;= 20):\r\n          console.log(&quot;code for case 1&quot;);\r\n          break;\r\n        case (num == 31) :\r\n          console.log(&quot;code for case 2&quot;);\r\n          break;\r\n        case (num &lt; 50):\r\n          console.log(&quot;code for case 3&quot;);\r\n          break;\r\n        case (num == 10 + 20):\r\n          console.log(&quot;code for case 4&quot;);\r\n          break;\r\n      }\r\n```\r\n\r\nCan I execute all true cases? or stay with many `if else`?\r\n\r\n```\r\ncode for case 1\r\ncode for case 3\r\ncode for case 4\r\n```","title":"Switch multiple case execution","body":"<p>I try to execute more than one case in <code>switch</code> statement. I wrote this as a <code>if</code> statement but I read somewhere is the <code>switch</code> is more efficient than <code>if</code>. Now execute always only first correct.</p>\n<pre><code>      let num = 30;\n      switch (true) {\n        case (num &gt;= 20):\n          console.log(&quot;code for case 1&quot;);\n          break;\n        case (num == 31) :\n          console.log(&quot;code for case 2&quot;);\n          break;\n        case (num &lt; 50):\n          console.log(&quot;code for case 3&quot;);\n          break;\n        case (num == 10 + 20):\n          console.log(&quot;code for case 4&quot;);\n          break;\n      }\n</code></pre>\n<p>Can I execute all true cases? or stay with many <code>if else</code>?</p>\n<pre><code>code for case 1\ncode for case 3\ncode for case 4\n</code></pre>\n"},{"tags":["java","spring","spring-boot","twilio"],"comments":[{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678097684,"post_id":75649509,"comment_id":133460933,"body_markdown":"put at least the code you&#39;re using to send the message","body":"put at least the code you&#39;re using to send the message"}],"answers":[{"comments":[{"owner":{"account_id":24227545,"reputation":11,"user_id":18181824,"display_name":"SUPRIYA Upadhyay"},"score":0,"creation_date":1678109519,"post_id":75651229,"comment_id":133464194,"body_markdown":"Issue is arising with other endpoints due to adding twilio dependency. I don&#39;t have issue here. It is affecting other end points.","body":"Issue is arising with other endpoints due to adding twilio dependency. I don&#39;t have issue here. It is affecting other end points."},{"owner":{"account_id":24227545,"reputation":11,"user_id":18181824,"display_name":"SUPRIYA Upadhyay"},"score":0,"creation_date":1678109565,"post_id":75651229,"comment_id":133464202,"body_markdown":"I tried this. This is not working. Anyways Thanks for the reply.","body":"I tried this. This is not working. Anyways Thanks for the reply."},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678109613,"post_id":75651229,"comment_id":133464213,"body_markdown":"switch to use the API instead of the JAR I suppose","body":"switch to use the API instead of the JAR I suppose"},{"owner":{"account_id":24227545,"reputation":11,"user_id":18181824,"display_name":"SUPRIYA Upadhyay"},"score":0,"creation_date":1678110138,"post_id":75651229,"comment_id":133464368,"body_markdown":"I commented the code and left the dependency uncommented. Leaving dependency also giving response as xml.","body":"I commented the code and left the dependency uncommented. Leaving dependency also giving response as xml."},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678110720,"post_id":75651229,"comment_id":133464565,"body_markdown":"it&#39;s probably some hidden configuration. is  produces=MediaType.APPLICATION_JSON_VALUE  on every API not working","body":"it&#39;s probably some hidden configuration. is  produces=MediaType.APPLICATION_JSON_VALUE  on every API not working"},{"owner":{"account_id":24227545,"reputation":11,"user_id":18181824,"display_name":"SUPRIYA Upadhyay"},"score":0,"creation_date":1678111220,"post_id":75651229,"comment_id":133464739,"body_markdown":"Can I use twilio without adding dependency. I mean can I use it indirectly?","body":"Can I use twilio without adding dependency. I mean can I use it indirectly?"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678111298,"post_id":75651229,"comment_id":133464760,"body_markdown":"yes look at https://www.twilio.com/fr/docs/usage/api and after that use RestTemplate or FeignClient to consume the API in your api","body":"yes look at <a href=\"https://www.twilio.com/fr/docs/usage/api\" rel=\"nofollow noreferrer\">twilio.com/fr/docs/usage/api</a> and after that use RestTemplate or FeignClient to consume the API in your api"}],"tags":[],"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678107953,"creation_date":1678107953,"answer_id":75651229,"question_id":75649509,"body_markdown":"According to Twilio documentation:\r\n\r\n&gt; By default, Twilio&#39;s REST API returns XML, with a root element of\r\n&gt; &lt;TwilioResponse&gt;. For example, here is the default XML representation\r\n&gt; of a SMS message:\r\n\r\nfurther reading : https://www.twilio.com/docs/usage/twilios-response\r\n\r\nuse the API, apperently the Twilio Jar override spring configuration, if you want to continue using it annotate your spring controller by adding `produces` to `@RequestMapping`\r\n\r\n\r\n     @RequestMapping(value = URI_PING,\r\n                consumes = MediaType.APPLICATION_JSON_VALUE,\r\n                produces = MediaType.APPLICATION_JSON_VALUE,\r\n                method = RequestMethod.POST)\r\n\r\n","title":"Adding twilio dependency is returning xml as a response for all endpoints in application","body":"<p>According to Twilio documentation:</p>\n<blockquote>\n<p>By default, Twilio's REST API returns XML, with a root element of\n. For example, here is the default XML representation\nof a SMS message:</p>\n</blockquote>\n<p>further reading : <a href=\"https://www.twilio.com/docs/usage/twilios-response\" rel=\"nofollow noreferrer\">https://www.twilio.com/docs/usage/twilios-response</a></p>\n<p>use the API, apperently the Twilio Jar override spring configuration, if you want to continue using it annotate your spring controller by adding <code>produces</code> to <code>@RequestMapping</code></p>\n<pre><code> @RequestMapping(value = URI_PING,\n            consumes = MediaType.APPLICATION_JSON_VALUE,\n            produces = MediaType.APPLICATION_JSON_VALUE,\n            method = RequestMethod.POST)\n</code></pre>\n"}],"owner":{"account_id":24227545,"reputation":11,"user_id":18181824,"display_name":"SUPRIYA Upadhyay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678125462,"creation_date":1678097531,"question_id":75649509,"body_markdown":"I am trying to send SMS through twilio. I am able to send message to the number but the problem is my entire application started sending xml as a response. It is effecting my entire application. How to convert so that I can get json as a response. I am new to this. Please someone help me.\r\n\r\nsms is sending successfully but my entire application is started getting response as xml.\r\n\r\nThis is my Controller:\r\n\r\n```java\r\n    @RequestMapping(value = &quot;/sendmessage&quot;, method = RequestMethod.POST)\r\n\tpublic ResponseEntity&lt;String&gt; sendmessage(@RequestBody UserDto userDto) {\r\n\t\treturn userRegisterService.sendmessage(userDto.getMobileNumber(), userDto.getSmsMessage());\r\n\t}\r\n```\r\n\r\nThis is my service class:\r\n\r\n```java\r\n\t@PostConstruct\r\n\tprivate void setup() {\r\n\t\tTwilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n\t}\r\n\r\n\tpublic ResponseEntity&lt;String&gt; sendmessage(String MobileNumber, String SmsMessage) {\r\n\t\tMessage.creator(new PhoneNumber(MobileNumber), new PhoneNumber(OUTGOINGSMSNumber), SmsMessage).create();\r\n\t\treturn new ResponseEntity&lt;String&gt;(&quot;Message sent successfully&quot;, HttpStatus.OK);\r\n\t}\r\n}\r\n```\r\n\r\nI have not written explicitly anywhere to convert to xml. Just adding twilio dependency is converting to xml for entire application.","title":"Adding twilio dependency is returning xml as a response for all endpoints in application","body":"<p>I am trying to send SMS through twilio. I am able to send message to the number but the problem is my entire application started sending xml as a response. It is effecting my entire application. How to convert so that I can get json as a response. I am new to this. Please someone help me.</p>\n<p>sms is sending successfully but my entire application is started getting response as xml.</p>\n<p>This is my Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @RequestMapping(value = &quot;/sendmessage&quot;, method = RequestMethod.POST)\n    public ResponseEntity&lt;String&gt; sendmessage(@RequestBody UserDto userDto) {\n        return userRegisterService.sendmessage(userDto.getMobileNumber(), userDto.getSmsMessage());\n    }\n</code></pre>\n<p>This is my service class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PostConstruct\n    private void setup() {\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n    }\n\n    public ResponseEntity&lt;String&gt; sendmessage(String MobileNumber, String SmsMessage) {\n        Message.creator(new PhoneNumber(MobileNumber), new PhoneNumber(OUTGOINGSMSNumber), SmsMessage).create();\n        return new ResponseEntity&lt;String&gt;(&quot;Message sent successfully&quot;, HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>I have not written explicitly anywhere to convert to xml. Just adding twilio dependency is converting to xml for entire application.</p>\n"},{"tags":["java","json","maven","intellij-idea","jackson"],"comments":[{"owner":{"account_id":334755,"reputation":560,"user_id":661414,"accept_rate":0,"display_name":"Leukipp"},"score":0,"creation_date":1452205589,"post_id":31356952,"comment_id":57078381,"body_markdown":"In my case the reason was that I had two different versions of Jackson libraries in the classpath.","body":"In my case the reason was that I had two different versions of Jackson libraries in the classpath."}],"answers":[{"comments":[{"owner":{"account_id":3337277,"reputation":417,"user_id":2804473,"accept_rate":100,"display_name":"Simon Cedergren Malmqvist"},"score":2,"creation_date":1464074995,"post_id":35887798,"comment_id":62321443,"body_markdown":"If you&#39;re using Maven, also make sure that you use the correct `&lt;scope&gt;&lt;/scope&gt;` value. This tells maven when and in some cases how it should resolve dependencies. Available values are `compile`, `provided`, `runtime`, `test`, `system` and `import`, you can read more about what they do here: http://stackoverflow.com/a/29230903/2804473","body":"If you&#39;re using Maven, also make sure that you use the correct <code>&lt;scope&gt;&lt;&#47;scope&gt;</code> value. This tells maven when and in some cases how it should resolve dependencies. Available values are <code>compile</code>, <code>provided</code>, <code>runtime</code>, <code>test</code>, <code>system</code> and <code>import</code>, you can read more about what they do here: <a href=\"http://stackoverflow.com/a/29230903/2804473\">stackoverflow.com/a/29230903/2804473</a>"},{"owner":{"account_id":6780685,"reputation":445,"user_id":5255911,"display_name":"MaduKan"},"score":0,"creation_date":1688447863,"post_id":35887798,"comment_id":135071598,"body_markdown":"Adding this to the pom.xml fixed for me. Thanks for sharing your finding, this is based on that.:\n\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n&lt;/dependency&gt;","body":"Adding this to the pom.xml fixed for me. Thanks for sharing your finding, this is based on that.:   &lt;dependency&gt;     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;     &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;/dependency&gt;"}],"tags":[],"owner":{"account_id":429857,"reputation":1736,"user_id":812973,"display_name":"gregn3"},"comment_count":2,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1457516172,"creation_date":1457516172,"answer_id":35887798,"question_id":31356952,"body_markdown":"When I had this problem I had the **jackson-annotations** and **jackson-databind** jars in my classpath, but not **jackson-core**.\r\n\r\nAdding jackson-core to the classpath solved it for me.","title":"Jackson cannot access com.fasterxml.jackson.core.ObjectCodec","body":"<p>When I had this problem I had the <strong>jackson-annotations</strong> and <strong>jackson-databind</strong> jars in my classpath, but not <strong>jackson-core</strong>.</p>\n\n<p>Adding jackson-core to the classpath solved it for me.</p>\n"},{"tags":[],"owner":{"account_id":7637556,"reputation":789,"user_id":5790669,"display_name":"Yash P Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510596521,"creation_date":1510596521,"answer_id":47270813,"question_id":31356952,"body_markdown":"I had also encountered the same problem, turns out, I had &quot;jackson-core-asl.jar&quot; instead of &quot;jackson-core.jar&quot;\r\n\r\nSo, check whether you have this jar-file in your classpath.\r\n-&gt; https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core","title":"Jackson cannot access com.fasterxml.jackson.core.ObjectCodec","body":"<p>I had also encountered the same problem, turns out, I had \"jackson-core-asl.jar\" instead of \"jackson-core.jar\"</p>\n\n<p>So, check whether you have this jar-file in your classpath.\n-> <a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core</a></p>\n"},{"tags":[],"owner":{"account_id":9316158,"reputation":161,"user_id":6916455,"display_name":"Ayush Jaiswal"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1573225512,"creation_date":1573166862,"answer_id":58757969,"question_id":31356952,"body_markdown":"I was having a similar issue, it turned out to be an IntelliJ issue.\r\n\r\nThis helped me to resolve the issue:\r\n\r\nTry ``File &gt; Invalidate Caches &gt; Invalidate and Restart``.\r\n\r\nIf it doesn&#39;t help, delete ``.idea`` directory and reimport from pom/gradle build file.","title":"Jackson cannot access com.fasterxml.jackson.core.ObjectCodec","body":"<p>I was having a similar issue, it turned out to be an IntelliJ issue.</p>\n\n<p>This helped me to resolve the issue:</p>\n\n<p>Try <code>File &gt; Invalidate Caches &gt; Invalidate and Restart</code>.</p>\n\n<p>If it doesn't help, delete <code>.idea</code> directory and reimport from pom/gradle build file.</p>\n"},{"tags":[],"owner":{"account_id":6695926,"reputation":106,"user_id":5163945,"display_name":"Valentin MARTINET"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1606760992,"creation_date":1606760992,"answer_id":65079173,"question_id":31356952,"body_markdown":"Also double check that all your Jackson dependencies use the same version like below :\r\n\r\n    implementation &#39;com.fasterxml.jackson.core:jackson-core:2.10.1&#39;\r\n    implementation &#39;com.fasterxml.jackson.core:jackson-annotations:2.10.1&#39;\r\n    implementation &#39;com.fasterxml.jackson.dataformat:jackson-dataformat-xml:2.10.1&#39;\r\n    implementation &#39;com.fasterxml.jackson.module:jackson-module-kotlin:2.10.1&#39;\r\n\r\nI previously had `jackson-core:2.11.0` and this was the issue.","title":"Jackson cannot access com.fasterxml.jackson.core.ObjectCodec","body":"<p>Also double check that all your Jackson dependencies use the same version like below :</p>\n<pre><code>implementation 'com.fasterxml.jackson.core:jackson-core:2.10.1'\nimplementation 'com.fasterxml.jackson.core:jackson-annotations:2.10.1'\nimplementation 'com.fasterxml.jackson.dataformat:jackson-dataformat-xml:2.10.1'\nimplementation 'com.fasterxml.jackson.module:jackson-module-kotlin:2.10.1'\n</code></pre>\n<p>I previously had <code>jackson-core:2.11.0</code> and this was the issue.</p>\n"},{"tags":[],"owner":{"account_id":5408789,"reputation":476,"user_id":4306356,"display_name":"Chavjoh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1616497041,"creation_date":1616497041,"answer_id":66761781,"question_id":31356952,"body_markdown":"I also encountered this kind of error: `Cannot access com.fasterxml.jackson.core.TreeNode` \r\n\r\nMy first version of the maven POM contained:\r\n- `jackson-annotations`\r\n- `jackson-databind`\r\n\r\nIt was working fine until I wanted to add `jackson-core` for unit tests. I added it with the `test` scope and the error appeared. After some investigation, I found out that to make it working, I had to remove the `test` scope, otherwise this error appears. If someone has an explanation I would be interested :)","title":"Jackson cannot access com.fasterxml.jackson.core.ObjectCodec","body":"<p>I also encountered this kind of error: <code>Cannot access com.fasterxml.jackson.core.TreeNode</code></p>\n<p>My first version of the maven POM contained:</p>\n<ul>\n<li><code>jackson-annotations</code></li>\n<li><code>jackson-databind</code></li>\n</ul>\n<p>It was working fine until I wanted to add <code>jackson-core</code> for unit tests. I added it with the <code>test</code> scope and the error appeared. After some investigation, I found out that to make it working, I had to remove the <code>test</code> scope, otherwise this error appears. If someone has an explanation I would be interested :)</p>\n"},{"tags":[],"owner":{"account_id":27916544,"reputation":1,"user_id":21317582,"display_name":"Simran Chawla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678125397,"creation_date":1677747418,"answer_id":75613188,"question_id":31356952,"body_markdown":"1 go to the .m2/repository and delete the conflicting files\r\n\r\n\r\n2 `mvn -U clean install`","title":"Jackson cannot access com.fasterxml.jackson.core.ObjectCodec","body":"<p>1 go to the .m2/repository and delete the conflicting files</p>\n<p>2 <code>mvn -U clean install</code></p>\n"}],"owner":{"account_id":1083037,"reputation":4332,"user_id":1079483,"accept_rate":64,"display_name":"Sebi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69597,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"answer_count":6,"score":32,"last_activity_date":1678125397,"creation_date":1436615900,"question_id":31356952,"body_markdown":"This question is a follow up to [this one][1]. I can&#39;t seem to be able to access the jackson library in the following code:\r\n\r\n    import com.fasterxml.jackson.databind.DeserializationFeature;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.ObjectReader;\r\n    import com.fasterxml.jackson.databind.ObjectWriter;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class ServerConfiguration {\r\n        public String info = null;\r\n        public String idlURL = null;\r\n        public String idlContents = null;\r\n        public List&lt;ServerInfo&gt; servers = new ArrayList&lt;&gt;();\r\n    \r\n        public final void clear() {\r\n            info = null;\r\n            idlURL = null;\r\n            idlContents = null;\r\n            if (servers != null)\r\n                servers.clear();\r\n        }\r\n    \r\n        private final static ObjectReader jsonReader;\r\n        private final static ObjectWriter jsonWriter;\r\n    \r\n        static {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true); // &lt;== Error:(52, 15) java: cannot access com.fasterxml.jackson.core.JsonGenerator class file for com.fasterxml.jackson.core.JsonGenerator not found\r\n            //mapper.configure(SerializationFeature.WRITE_SINGLE_ELEM_ARRAYS_UNWRAPPED, true);\r\n            jsonWriter = mapper.writer();\r\n            jsonReader = mapper.reader(ServerConfiguration.class);\r\n        }\r\n    \r\n        public static ServerConfiguration fromJson(String json) throws IOException {\r\n            return jsonReader.&lt;ServerConfiguration&gt;readValue(json); // &lt;== Error:(59, 26) java: cannot access com.fasterxml.jackson.core.JsonProcessingException class file for com.fasterxml.jackson.core.JsonProcessingException not found\r\n        }\r\n    \r\n        public String toJson() throws IOException {\r\n            return jsonWriter.writeValueAsString(this);\r\n        }\r\n    \r\n    }\r\n\r\neventhough the jar files are in the classpath(autocomplete shows the method declaration in Intellij). \r\n\r\nWhat am I missing?\r\n\r\n  [1]: https://stackoverflow.com/questions/31318636/adding-a-jar-file-to-classpath-through-maven","title":"Jackson cannot access com.fasterxml.jackson.core.ObjectCodec","body":"<p>This question is a follow up to <a href=\"https://stackoverflow.com/questions/31318636/adding-a-jar-file-to-classpath-through-maven\">this one</a>. I can't seem to be able to access the jackson library in the following code:</p>\n\n<pre><code>import com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.ObjectReader;\nimport com.fasterxml.jackson.databind.ObjectWriter;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ServerConfiguration {\n    public String info = null;\n    public String idlURL = null;\n    public String idlContents = null;\n    public List&lt;ServerInfo&gt; servers = new ArrayList&lt;&gt;();\n\n    public final void clear() {\n        info = null;\n        idlURL = null;\n        idlContents = null;\n        if (servers != null)\n            servers.clear();\n    }\n\n    private final static ObjectReader jsonReader;\n    private final static ObjectWriter jsonWriter;\n\n    static {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true); // &lt;== Error:(52, 15) java: cannot access com.fasterxml.jackson.core.JsonGenerator class file for com.fasterxml.jackson.core.JsonGenerator not found\n        //mapper.configure(SerializationFeature.WRITE_SINGLE_ELEM_ARRAYS_UNWRAPPED, true);\n        jsonWriter = mapper.writer();\n        jsonReader = mapper.reader(ServerConfiguration.class);\n    }\n\n    public static ServerConfiguration fromJson(String json) throws IOException {\n        return jsonReader.&lt;ServerConfiguration&gt;readValue(json); // &lt;== Error:(59, 26) java: cannot access com.fasterxml.jackson.core.JsonProcessingException class file for com.fasterxml.jackson.core.JsonProcessingException not found\n    }\n\n    public String toJson() throws IOException {\n        return jsonWriter.writeValueAsString(this);\n    }\n\n}\n</code></pre>\n\n<p>eventhough the jar files are in the classpath(autocomplete shows the method declaration in Intellij). </p>\n\n<p>What am I missing?</p>\n"},{"tags":["java","python-3.x","selenium"],"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1554787622,"post_id":55585508,"comment_id":97868565,"body_markdown":"Lookout for the log messages why _The hub is down or not responding_","body":"Lookout for the log messages why <i>The hub is down or not responding</i>"}],"answers":[{"comments":[{"owner":{"account_id":15195868,"reputation":11,"user_id":10965231,"display_name":"happy_code"},"score":0,"creation_date":1554880331,"post_id":55595533,"comment_id":97908093,"body_markdown":"Thank you. This is my first question at stackoverflow. I used python-selenium  to collection data, In order to maintain stability, I maintain a driver. If I encounter an exception, I exit and retrieve the driver. But one day later, hub died. I&#39;ve probably understood the pipeline you&#39;re talking about, but maybe I&#39;m not very suitable for it. In fact, the purpose of my project is to use headless Firefox to continuously collect website data. Maybe I am too complicated.","body":"Thank you. This is my first question at stackoverflow. I used python-selenium  to collection data, In order to maintain stability, I maintain a driver. If I encounter an exception, I exit and retrieve the driver. But one day later, hub died. I&#39;ve probably understood the pipeline you&#39;re talking about, but maybe I&#39;m not very suitable for it. In fact, the purpose of my project is to use headless Firefox to continuously collect website data. Maybe I am too complicated."}],"tags":[],"owner":{"account_id":2441039,"reputation":88,"user_id":2129578,"display_name":"teddym6"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678125201,"creation_date":1554821144,"answer_id":55595533,"question_id":55585508,"body_markdown":"If you are using docker I don&#39;t understand why are you leaving you hub up and running. \r\n\r\nCheck out their hub page: https://github.com/SeleniumHQ/docker-selenium/tree/master/Hub\r\n\r\nHub launch: `docker run -d -p 4444:4444 --name selenium-hub selenium/hub`\r\n\r\nNodes launch:\r\n\r\n    $ docker run -d --link selenium-hub:hub -v /dev/shm:/dev/shm selenium/node-chrome\r\n    $ docker run -d --link selenium-hub:hub -v /dev/shm:/dev/shm selenium/node-firefox\r\n\r\n\r\nI would write a pipeline and define my hub image and node images which I bring up at the beginning of the test session and remove the images at the end of the session.\r\n\r\n    try {\r\n        hubimage\r\n        nodeimage\r\n        runtests\r\n    } catch(anything) {\r\n        throw anything;\r\n    } finally {\r\n        sh &quot;docker rmi \\$(docker inspect --format=&#39;{{range .RepoTags}} {{.}} {{end}}&#39; ${hubimage});&quot;\r\n        sh &quot;docker rmi \\$(docker inspect --format=&#39;{{range .RepoTags}} {{.}} {{end}}&#39; ${nodeimage});&quot;\r\n    }\r\n\r\nSee more information about pipelines on https://jenkins.io/doc/book/pipeline/.\r\n\r\n\r\n","title":"selenium-hub exit status 137","body":"<p>If you are using docker I don't understand why are you leaving you hub up and running.</p>\n<p>Check out their hub page: <a href=\"https://github.com/SeleniumHQ/docker-selenium/tree/master/Hub\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/docker-selenium/tree/master/Hub</a></p>\n<p>Hub launch: <code>docker run -d -p 4444:4444 --name selenium-hub selenium/hub</code></p>\n<p>Nodes launch:</p>\n<pre><code>$ docker run -d --link selenium-hub:hub -v /dev/shm:/dev/shm selenium/node-chrome\n$ docker run -d --link selenium-hub:hub -v /dev/shm:/dev/shm selenium/node-firefox\n</code></pre>\n<p>I would write a pipeline and define my hub image and node images which I bring up at the beginning of the test session and remove the images at the end of the session.</p>\n<pre><code>try {\n    hubimage\n    nodeimage\n    runtests\n} catch(anything) {\n    throw anything;\n} finally {\n    sh &quot;docker rmi \\$(docker inspect --format='{{range .RepoTags}} {{.}} {{end}}' ${hubimage});&quot;\n    sh &quot;docker rmi \\$(docker inspect --format='{{range .RepoTags}} {{.}} {{end}}' ${nodeimage});&quot;\n}\n</code></pre>\n<p>See more information about pipelines on <a href=\"https://jenkins.io/doc/book/pipeline/\" rel=\"nofollow noreferrer\">https://jenkins.io/doc/book/pipeline/</a>.</p>\n"},{"tags":[],"owner":{"account_id":8153505,"reputation":1397,"user_id":6139818,"accept_rate":100,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1586548161,"creation_date":1586548161,"answer_id":61147665,"question_id":55585508,"body_markdown":"This is not a problem related to Selenium, but an issue with Docker.\r\n\r\nThe following link has a summary of root causes for the error `exit status 137; not expected`:\r\n\r\n- https://success.docker.com/article/what-causes-a-container-to-exit-with-code-137\r\n\r\nIn short, for some reason, Docker is killing the process, in your case, `selenium-hub`.\r\n\r\nFor Mac and Windows, you probably need to increase the memory dedicated to Docker in Docker preferences.\r\n\r\n[This answer here on SO](https://stackoverflow.com/questions/43460770/docker-windows-container-memory-limit) has a screenshot showing how to do it.\r\n","title":"selenium-hub exit status 137","body":"<p>This is not a problem related to Selenium, but an issue with Docker.</p>\n\n<p>The following link has a summary of root causes for the error <code>exit status 137; not expected</code>:</p>\n\n<ul>\n<li><a href=\"https://success.docker.com/article/what-causes-a-container-to-exit-with-code-137\" rel=\"nofollow noreferrer\">https://success.docker.com/article/what-causes-a-container-to-exit-with-code-137</a></li>\n</ul>\n\n<p>In short, for some reason, Docker is killing the process, in your case, <code>selenium-hub</code>.</p>\n\n<p>For Mac and Windows, you probably need to increase the memory dedicated to Docker in Docker preferences.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/43460770/docker-windows-container-memory-limit\">This answer here on SO</a> has a screenshot showing how to do it.</p>\n"}],"owner":{"account_id":15195868,"reputation":11,"user_id":10965231,"display_name":"happy_code"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1948,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1678125201,"creation_date":1554786873,"question_id":55585508,"body_markdown":"I used Docker for Selenium Grid Hub and Nodes to collect data, including \r\n\r\n - selenium/hub: 3.141.59-iron\r\n - selenium/node-fire_fox 3.141.59-iron\r\n\r\n\r\nbut one day after running, selenium-hub hung the following exception:\r\n&gt; INFO exited: selenium-hub (exit status 137; not expected)\r\n\r\nselenium/node-fire_fox exception is:\r\n\r\n&gt; INFO [SelfRegisteringRemote$1.run] - Couldn&#39;t register this node: The hub is down or not responding: Failed to connect to selenium-hub/172.24.0.2:4444\r\n\r\nWhat should I do?","title":"selenium-hub exit status 137","body":"<p>I used Docker for Selenium Grid Hub and Nodes to collect data, including </p>\n\n<ul>\n<li>selenium/hub: 3.141.59-iron</li>\n<li>selenium/node-fire_fox 3.141.59-iron</li>\n</ul>\n\n<p>but one day after running, selenium-hub hung the following exception:</p>\n\n<blockquote>\n  <p>INFO exited: selenium-hub (exit status 137; not expected)</p>\n</blockquote>\n\n<p>selenium/node-fire_fox exception is:</p>\n\n<blockquote>\n  <p>INFO [SelfRegisteringRemote$1.run] - Couldn't register this node: The hub is down or not responding: Failed to connect to selenium-hub/172.24.0.2:4444</p>\n</blockquote>\n\n<p>What should I do?</p>\n"},{"tags":["java","authorization","classloader","urlclassloader"],"comments":[{"owner":{"account_id":6228391,"reputation":708,"user_id":4845935,"display_name":"dimnnv"},"score":0,"creation_date":1678123668,"post_id":75653686,"comment_id":133468601,"body_markdown":"Please add more details what are you trying to achieve and what is the question.","body":"Please add more details what are you trying to achieve and what is the question."},{"owner":{"account_id":15772715,"reputation":37,"user_id":11381305,"display_name":"kradicati"},"score":0,"creation_date":1678125058,"post_id":75653686,"comment_id":133469012,"body_markdown":"Edited to hopefully improve the question. Let me know if you need additional clarifications!","body":"Edited to hopefully improve the question. Let me know if you need additional clarifications!"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1678125373,"post_id":75653686,"comment_id":133469103,"body_markdown":"Can you set a breakpoint in the constructor LicensedURLStreamHandler(String token) to see whether it is being called during startup? That will tell us where to look next.","body":"Can you set a breakpoint in the constructor LicensedURLStreamHandler(String token) to see whether it is being called during startup? That will tell us where to look next."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1678125946,"post_id":75653686,"comment_id":133469259,"body_markdown":"And if it does setup the LicensedURLStreamHandler, test if it hits the openConnection(URL u) call.","body":"And if it does setup the LicensedURLStreamHandler, test if it hits the openConnection(URL u) call."},{"owner":{"account_id":15772715,"reputation":37,"user_id":11381305,"display_name":"kradicati"},"score":0,"creation_date":1678130533,"post_id":75653686,"comment_id":133470447,"body_markdown":"I added a breakpoint, and both the constructor and the openConnection method are called.","body":"I added a breakpoint, and both the constructor and the openConnection method are called."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1678436698,"post_id":75653686,"comment_id":133535535,"body_markdown":"A `jar:` URL addresses an entry within another URL. You dont want to add authentication to the `JarURLConnection`, you want to add it to the embedded URL, which I suppose is an `http:` URL. But keep in mind that there is no on-the-fly access to entries within a jar file on a network resource. The jar file will be downloaded behind the scenes anyway, so if you want more control over the process, just download the jar file yourself, using the desired options, and create the class loader with the local copy afterwards.","body":"A <code>jar:</code> URL addresses an entry within another URL. You dont want to add authentication to the <code>JarURLConnection</code>, you want to add it to the embedded URL, which I suppose is an <code>http:</code> URL. But keep in mind that there is no on-the-fly access to entries within a jar file on a network resource. The jar file will be downloaded behind the scenes anyway, so if you want more control over the process, just download the jar file yourself, using the desired options, and create the class loader with the local copy afterwards."}],"owner":{"account_id":15772715,"reputation":37,"user_id":11381305,"display_name":"kradicati"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678125008,"creation_date":1678121878,"question_id":75653686,"body_markdown":"A project I&#39;m working on requires a URLClassLoader, which is supposed to load a .jar file from the Internet that is protected by very basic authentication. To access this jar file, one must send a GET request with an Authorization header to a specific URL.\r\n\r\nBy default, the `URLClassLoader` just sends the GET request, and I&#39;m having some trouble getting it to send the headers as well.\r\n\r\nOn another [StackOverflow Thread][1] I found that I am supposed to pass a custom `URLStreamHandler` in the `URLClassLoader&#39;s` constructor, which is what I tried doing:\r\nI extended `URLClassLoader` in a custom class, calling this constructor `super(new URL[]{url}, parent, protocol -&gt; new LicensedURLStreamHandler(token));`, where LicensedURLStreamHandler is\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.net.*;\r\n\r\npublic class LicensedURLStreamHandler extends URLStreamHandler {\r\n\r\n    private final String token;\r\n\r\n    public LicensedURLStreamHandler(String token) {\r\n        this.token = token;\r\n    }\r\n\r\n    @Override\r\n    protected URLConnection openConnection(URL u) throws IOException {\r\n        URL url = new URL(u.toString());\r\n        JarURLConnection con = (JarURLConnection) url.openConnection();\r\n\r\n        con.setRequestProperty(&quot;Authorization&quot;, token);\r\n        con.setRequestProperty(&quot;Accept&quot;, &quot;application/octet-stream&quot;);\r\n\r\n        return con;\r\n    }\r\n}\r\n```\r\n\r\nHowever, on the server side, both headers appear not to have been included, because the only ones that are present are `Accept:[text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2] Connection:[keep-alive] User-Agent:[Java/1.8.0_362]`\r\n\r\nIn essence, the server receives the request without the headers I added in the `LicensedURLStreamHandler`. I don&#39;t really know how to fix this, and the already scarce documentation on the subject hasn&#39;t helped me.\r\n\r\n  [1]: https://stackoverflow.com/questions/17634746/setting-user-agent-of-urlclassloader","title":"Authentication for URLClassLoader","body":"<p>A project I'm working on requires a URLClassLoader, which is supposed to load a .jar file from the Internet that is protected by very basic authentication. To access this jar file, one must send a GET request with an Authorization header to a specific URL.</p>\n<p>By default, the <code>URLClassLoader</code> just sends the GET request, and I'm having some trouble getting it to send the headers as well.</p>\n<p>On another <a href=\"https://stackoverflow.com/questions/17634746/setting-user-agent-of-urlclassloader\">StackOverflow Thread</a> I found that I am supposed to pass a custom <code>URLStreamHandler</code> in the <code>URLClassLoader's</code> constructor, which is what I tried doing:\nI extended <code>URLClassLoader</code> in a custom class, calling this constructor <code>super(new URL[]{url}, parent, protocol -&gt; new LicensedURLStreamHandler(token));</code>, where LicensedURLStreamHandler is</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.net.*;\n\npublic class LicensedURLStreamHandler extends URLStreamHandler {\n\n    private final String token;\n\n    public LicensedURLStreamHandler(String token) {\n        this.token = token;\n    }\n\n    @Override\n    protected URLConnection openConnection(URL u) throws IOException {\n        URL url = new URL(u.toString());\n        JarURLConnection con = (JarURLConnection) url.openConnection();\n\n        con.setRequestProperty(&quot;Authorization&quot;, token);\n        con.setRequestProperty(&quot;Accept&quot;, &quot;application/octet-stream&quot;);\n\n        return con;\n    }\n}\n</code></pre>\n<p>However, on the server side, both headers appear not to have been included, because the only ones that are present are <code>Accept:[text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2] Connection:[keep-alive] User-Agent:[Java/1.8.0_362]</code></p>\n<p>In essence, the server receives the request without the headers I added in the <code>LicensedURLStreamHandler</code>. I don't really know how to fix this, and the already scarce documentation on the subject hasn't helped me.</p>\n"},{"tags":["java","mdns","jmdns","dns-sd"],"owner":{"account_id":22963692,"reputation":1,"user_id":17093127,"display_name":"visbr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678124819,"creation_date":1678123988,"question_id":75654023,"body_markdown":"Im trying to discover services broadcasted over mDNS on my local network. I use jmDNS java library, i am able to register services, that im able to see from my other devices. However, when i try to discover services, i am not able to discovery anything.\r\n\r\nHere is my test code:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n    try {\r\n        JmDNS jmdns = JmDNS.create();\r\n        // Wait for some time to allow services to be discovered\r\n        Thread.sleep(5000);\r\n\r\n        logger.info(&quot;size: &quot; + jmdns.list(&quot;_services._dns-sd._udp.local.&quot;).length);\r\n        jmdns.close();\r\n    } catch (IOException | InterruptedException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\nThe list is always empty. I have tried several more specific service types, such as such as `_airplay._tcp`, but it does not change anything. There are clearly services on the network, as i can see them from other devices and the device where i run this code, using the Bonjour Broweser. I have also made sure that the 5353 port is open for both TCP and UDP.. ","title":"Java jmDNS not able to discover services","body":"<p>Im trying to discover services broadcasted over mDNS on my local network. I use jmDNS java library, i am able to register services, that im able to see from my other devices. However, when i try to discover services, i am not able to discovery anything.</p>\n<p>Here is my test code:</p>\n<pre><code>public static void main(String[] args) {\n    try {\n        JmDNS jmdns = JmDNS.create();\n        // Wait for some time to allow services to be discovered\n        Thread.sleep(5000);\n\n        logger.info(&quot;size: &quot; + jmdns.list(&quot;_services._dns-sd._udp.local.&quot;).length);\n        jmdns.close();\n    } catch (IOException | InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>The list is always empty. I have tried several more specific service types, such as such as <code>_airplay._tcp</code>, but it does not change anything. There are clearly services on the network, as i can see them from other devices and the device where i run this code, using the Bonjour Broweser. I have also made sure that the 5353 port is open for both TCP and UDP..</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1677362334,"post_id":75550523,"comment_id":133324019,"body_markdown":"What is `BlacklistedWords` class? And why do you need it?","body":"What is <code>BlacklistedWords</code> class? And why do you need it?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1677362414,"post_id":75550523,"comment_id":133324028,"body_markdown":"this is the entity (table trademarks)","body":"this is the entity (table trademarks)"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1677362480,"post_id":75550523,"comment_id":133324035,"body_markdown":"This looks very much like an [X-Y Problem](https://en.wikipedia.org/wiki/XY_problem): What is it you&#39;re *actually* trying to do (without reference to tables or classes)? Please give several examples of data and what the desired outcome is.","body":"This looks very much like an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">X-Y Problem</a>: What is it you&#39;re <i>actually</i> trying to do (without reference to tables or classes)? Please give several examples of data and what the desired outcome is."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1677456279,"post_id":75550523,"comment_id":133336102,"body_markdown":"If you want a solution using `BlacklistedWords` you must show the code for that class. Also, how many rows are in each of the 2 tables?","body":"If you want a solution using <code>BlacklistedWords</code> you must show the code for that class. Also, how many rows are in each of the 2 tables?"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1677540886,"post_id":75550523,"comment_id":133354737,"body_markdown":"Thanks for showing the class. Please also provide the row counts for each table.","body":"Thanks for showing the class. Please also provide the row counts for each table."},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1677541713,"post_id":75550523,"comment_id":133354893,"body_markdown":"words - 30 million, trademarks - 340","body":"words - 30 million, trademarks - 340"}],"answers":[{"comments":[{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1678025575,"post_id":75592100,"comment_id":133449269,"body_markdown":"I checked the code but the thing is that I need to find a match for whole words.","body":"I checked the code but the thing is that I need to find a match for whole words."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1678089855,"post_id":75592100,"comment_id":133458887,"body_markdown":"Although the problem suggests it, I would avoid a regex. Replace pw.getKeyword().indexOf(bw.getTrademark()) != -1 with { final String trademark = bw.getTrademark(); final String keyword = pw.getKeyword(); return keyword.contains(  + trademark +  ) || keyword.startsWith(trademark +  ) || keyword.endsWith(  + trademark) || keyword.equals(trademark);}","body":"Although the problem suggests it, I would avoid a regex. Replace pw.getKeyword().indexOf(bw.getTrademark()) != -1 with { final String trademark = bw.getTrademark(); final String keyword = pw.getKeyword(); return keyword.contains(  + trademark +  ) || keyword.startsWith(trademark +  ) || keyword.endsWith(  + trademark) || keyword.equals(trademark);}"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1678124814,"post_id":75592100,"comment_id":133468939,"body_markdown":"I have added another answer to  satisfy the requirement for whole words.","body":"I have added another answer to  satisfy the requirement for whole words."}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677587487,"creation_date":1677587487,"answer_id":75592100,"question_id":75550523,"body_markdown":"This is how to do the matching with Java streams:\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// stubbing up the persistence layer\r\n\t\tList&lt;BlacklistedWords&gt; blacklistedWords = Arrays.asList(new BlacklistedWords[] {new BlacklistedWords(1, &quot;while swam&quot;), new BlacklistedWords(2, &quot;ibm&quot;), new BlacklistedWords(3, &quot;bmw&quot;)});\r\n\t\tList&lt;ProcessedWords&gt; keyWords = Arrays.asList(new ProcessedWords[] {new ProcessedWords(1, &quot;while swam is interesting&quot;), new ProcessedWords(2, &quot;ibm is a company like bmw&quot;), new ProcessedWords(3, &quot;miss&quot;)});\r\n\t\t\r\n\r\n\t\t\r\n\t\tList&lt;ProcessedWords&gt; hits = keyWords.stream()\r\n\t              .filter(pw -&gt; blacklistedWords.stream()                    \r\n\t                  .anyMatch(bw -&gt;                                 \r\n\t                       pw.getKeyword().indexOf(bw.getTrademark()) != -1))\r\n\t              .collect(Collectors.toList());\r\n\t\t\r\n\t\tSystem.out.println(hits);\r\n\t\r\n\t}\r\n\r\nOutput:\r\n\r\n    [ProcessedWords(id=1, keyword=while swam is interesting), ProcessedWords(id=2, keyword=ibm is a company like bmw)]\r\n\r\nNote that I stubbed out the persistence layer with an additional `ProcessedWords` of &quot;missed&quot; and annotated `BlacklistedWords(table=trademarks)` &amp; `ProcessedWords(table=words)` with `@Data` to get a decent `toString()`, which you shouldn&#39;t because they are `@Entity`. ","title":"find matches for multiple words","body":"<p>This is how to do the matching with Java streams:</p>\n<pre><code>public static void main(String[] args) {\n    // stubbing up the persistence layer\n    List&lt;BlacklistedWords&gt; blacklistedWords = Arrays.asList(new BlacklistedWords[] {new BlacklistedWords(1, &quot;while swam&quot;), new BlacklistedWords(2, &quot;ibm&quot;), new BlacklistedWords(3, &quot;bmw&quot;)});\n    List&lt;ProcessedWords&gt; keyWords = Arrays.asList(new ProcessedWords[] {new ProcessedWords(1, &quot;while swam is interesting&quot;), new ProcessedWords(2, &quot;ibm is a company like bmw&quot;), new ProcessedWords(3, &quot;miss&quot;)});\n    \n\n    \n    List&lt;ProcessedWords&gt; hits = keyWords.stream()\n              .filter(pw -&gt; blacklistedWords.stream()                    \n                  .anyMatch(bw -&gt;                                 \n                       pw.getKeyword().indexOf(bw.getTrademark()) != -1))\n              .collect(Collectors.toList());\n    \n    System.out.println(hits);\n\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>[ProcessedWords(id=1, keyword=while swam is interesting), ProcessedWords(id=2, keyword=ibm is a company like bmw)]\n</code></pre>\n<p>Note that I stubbed out the persistence layer with an additional <code>ProcessedWords</code> of &quot;missed&quot; and annotated <code>BlacklistedWords(table=trademarks)</code> &amp; <code>ProcessedWords(table=words)</code> with <code>@Data</code> to get a decent <code>toString()</code>, which you shouldn't because they are <code>@Entity</code>.</p>\n"},{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678124783,"creation_date":1678124783,"answer_id":75654136,"question_id":75550523,"body_markdown":"In order to satisfy the requirement for whole words, the following should be done. \r\n\r\n        List&lt;BlacklistedWords&gt; blacklistedWords = Arrays.asList(new BlacklistedWords[] {new BlacklistedWords(1, &quot;while swam&quot;), new BlacklistedWords(2, &quot;ibm&quot;), new BlacklistedWords(3, &quot;bmw&quot;)});\r\n        List&lt;ProcessedWords&gt; keyWords = Arrays.asList(new ProcessedWords[] {new ProcessedWords(1, &quot;while swam is interesting&quot;), new ProcessedWords(2, &quot;ibm is a company like bmw&quot;), new ProcessedWords(3, &quot;miss&quot;)});\r\n\t\t\r\n        Set&lt;ProcessedWords&gt; hits = new HashSet&lt;&gt;();\r\n\t\tblacklistedWords.parallelStream().forEach(bw -&gt; {\r\n\t\t\tfinal String trademark = bw.getTrademark();\r\n\t\t\tfinal String startsWith = trademark + &quot; &quot;;\r\n\t\t\tfinal String contains = &quot; &quot; + startsWith;\r\n\t\t\tfinal String endsWith = &quot; &quot; + trademark;\r\n\t\t\tkeyWords.parallelStream().forEach(pw -&gt; {\r\n\t\t\t\tfinal String keyword = pw.getKeyword();\r\n\t\t\t\tif (keyword.contains(contains) || keyword.startsWith(startsWith) || keyword.endsWith(endsWith)\r\n\t\t\t\t\t\t|| keyword.equals(trademark))\r\n\t\t\t\t\thits.add(pw);\r\n\t\t\t});\r\n\t\t});\r\n\r\n\r\n\r\nBecause the output we require is a subset of keyWords and we do not want to recalculate the &quot; &quot; + trademark + &quot; &quot;, etc in the inner stream, the following is not advised, but works:\r\n\r\n\t\tList&lt;ProcessedWords&gt; hits1 = keyWords.parallelStream().filter(pw -&gt; blacklistedWords.parallelStream().anyMatch(bw -&gt; {\r\n\t\t\tfinal String keyword = pw.getKeyword();\r\n\t\t\tfinal String trademark = bw.getTrademark();\r\n\t\t\treturn keyword.contains(&quot; &quot; + trademark + &quot; &quot;) || keyword.startsWith(trademark + &quot; &quot;) || keyword.endsWith(&quot; &quot; + trademark) || keyword.equals(trademark);\r\n\t\t})).collect(Collectors.toList());\r\n\r\n\r\n\r\n","title":"find matches for multiple words","body":"<p>In order to satisfy the requirement for whole words, the following should be done.</p>\n<pre><code>    List&lt;BlacklistedWords&gt; blacklistedWords = Arrays.asList(new BlacklistedWords[] {new BlacklistedWords(1, &quot;while swam&quot;), new BlacklistedWords(2, &quot;ibm&quot;), new BlacklistedWords(3, &quot;bmw&quot;)});\n    List&lt;ProcessedWords&gt; keyWords = Arrays.asList(new ProcessedWords[] {new ProcessedWords(1, &quot;while swam is interesting&quot;), new ProcessedWords(2, &quot;ibm is a company like bmw&quot;), new ProcessedWords(3, &quot;miss&quot;)});\n    \n    Set&lt;ProcessedWords&gt; hits = new HashSet&lt;&gt;();\n    blacklistedWords.parallelStream().forEach(bw -&gt; {\n        final String trademark = bw.getTrademark();\n        final String startsWith = trademark + &quot; &quot;;\n        final String contains = &quot; &quot; + startsWith;\n        final String endsWith = &quot; &quot; + trademark;\n        keyWords.parallelStream().forEach(pw -&gt; {\n            final String keyword = pw.getKeyword();\n            if (keyword.contains(contains) || keyword.startsWith(startsWith) || keyword.endsWith(endsWith)\n                    || keyword.equals(trademark))\n                hits.add(pw);\n        });\n    });\n</code></pre>\n<p>Because the output we require is a subset of keyWords and we do not want to recalculate the &quot; &quot; + trademark + &quot; &quot;, etc in the inner stream, the following is not advised, but works:</p>\n<pre><code>    List&lt;ProcessedWords&gt; hits1 = keyWords.parallelStream().filter(pw -&gt; blacklistedWords.parallelStream().anyMatch(bw -&gt; {\n        final String keyword = pw.getKeyword();\n        final String trademark = bw.getTrademark();\n        return keyword.contains(&quot; &quot; + trademark + &quot; &quot;) || keyword.startsWith(trademark + &quot; &quot;) || keyword.endsWith(&quot; &quot; + trademark) || keyword.equals(trademark);\n    })).collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75592100,"answer_count":2,"score":0,"last_activity_date":1678124783,"creation_date":1677187917,"question_id":75550523,"body_markdown":"I have this PostgreSQL table for storing words:\r\n\r\n    CREATE TABLE IF NOT EXISTS words\r\n    (\r\n        id bigint NOT NULL DEFAULT nextval(&#39;processed_words_id_seq&#39;::regclass),\r\n        keyword character varying(300) COLLATE pg_catalog.&quot;default&quot;,\r\n    );\r\n    \r\n    insert into words (keyword)\r\n    VALUES (&#39;while swam is interesting&#39;, \r\n            &#39;ibm is a company like bmw&#39;);\r\n    \r\n    CREATE TABLE IF NOT EXISTS trademarks\r\n    (\r\n       id bigint NOT NULL DEFAULT nextval(&#39;trademarks_id_seq&#39;::regclass),\r\n       trademark character varying(300) COLLATE pg_catalog.&quot;default&quot;,\r\n    );\r\n\r\n    insert into words (trademarks)\r\n    VALUES (&#39;while swam&#39;, \r\n            &#39;ibm&#39;,\r\n            &#39;bmw&#39;);\r\n\r\nInto table `trademarks` I will have thousands of registered trademarks names.\r\nI want to compare words stored into `words` table keyword, do they match not only for a words but also for word which is in a group of words. For example:\r\n\r\nI have a keyword `while swam is interesting` stored into `words.keyword`. I also have a trademark `swam` located in `trademarks.trademark` like `ibm` I have a word match, so I want to detect this using Java code. \r\n\r\nFirst I want to select all blacklisted keywords convert them in for example List and compare `ibm is a company like bmw` with elements from the list. How I can do this not only for one word but also for a expressions?\r\n\r\nsomething like this?\r\n\r\n    Optional&lt;ProcessedWords&gt; keywords = processedWordsService.findRandomKeywordWhereTrademarkBlacklistedIsEmpty();\r\n    \r\n            if(keywords.isPresent())\r\n            {\r\n                List&lt;BlacklistedWords&gt; blacklistedWords = blacklistedWordsService.findAll();\r\n                List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n                for(BlacklistedWords item:  blacklistedWords){\r\n                    list.add(item.getKeyword());\r\n                }\r\n    \r\n                ProcessedWords processedWords = keywords.get();\r\n                String keyword = processedWords.getKeyword();\r\n    \r\n                if(list.contains(keyword))\r\n                {\r\n                    System.out.println(&quot;Found blacklisted word in keyword: &quot; + keyword);\r\n                }\r\n    \r\n            }\r\n\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder(toBuilder = true)\r\n    @Entity\r\n    @Table(name = &quot;trademarks&quot;)\r\n    public class BlacklistedWords implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;, unique = true, updatable = false, nullable = false)\r\n        private long id;\r\n    \r\n        @Column(name = &quot;trademark&quot;, length = 200, unique = true)\r\n        private String keyword;\r\n    }\r\n\r\nCan you guide me how this can be implemented?\r\n\r\n","title":"find matches for multiple words","body":"<p>I have this PostgreSQL table for storing words:</p>\n<pre><code>CREATE TABLE IF NOT EXISTS words\n(\n    id bigint NOT NULL DEFAULT nextval('processed_words_id_seq'::regclass),\n    keyword character varying(300) COLLATE pg_catalog.&quot;default&quot;,\n);\n\ninsert into words (keyword)\nVALUES ('while swam is interesting', \n        'ibm is a company like bmw');\n\nCREATE TABLE IF NOT EXISTS trademarks\n(\n   id bigint NOT NULL DEFAULT nextval('trademarks_id_seq'::regclass),\n   trademark character varying(300) COLLATE pg_catalog.&quot;default&quot;,\n);\n\ninsert into words (trademarks)\nVALUES ('while swam', \n        'ibm',\n        'bmw');\n</code></pre>\n<p>Into table <code>trademarks</code> I will have thousands of registered trademarks names.\nI want to compare words stored into <code>words</code> table keyword, do they match not only for a words but also for word which is in a group of words. For example:</p>\n<p>I have a keyword <code>while swam is interesting</code> stored into <code>words.keyword</code>. I also have a trademark <code>swam</code> located in <code>trademarks.trademark</code> like <code>ibm</code> I have a word match, so I want to detect this using Java code.</p>\n<p>First I want to select all blacklisted keywords convert them in for example List and compare <code>ibm is a company like bmw</code> with elements from the list. How I can do this not only for one word but also for a expressions?</p>\n<p>something like this?</p>\n<pre><code>Optional&lt;ProcessedWords&gt; keywords = processedWordsService.findRandomKeywordWhereTrademarkBlacklistedIsEmpty();\n\n        if(keywords.isPresent())\n        {\n            List&lt;BlacklistedWords&gt; blacklistedWords = blacklistedWordsService.findAll();\n            List&lt;String&gt; list = new ArrayList&lt;&gt;();\n            for(BlacklistedWords item:  blacklistedWords){\n                list.add(item.getKeyword());\n            }\n\n            ProcessedWords processedWords = keywords.get();\n            String keyword = processedWords.getKeyword();\n\n            if(list.contains(keyword))\n            {\n                System.out.println(&quot;Found blacklisted word in keyword: &quot; + keyword);\n            }\n\n        }\n\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder(toBuilder = true)\n@Entity\n@Table(name = &quot;trademarks&quot;)\npublic class BlacklistedWords implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, unique = true, updatable = false, nullable = false)\n    private long id;\n\n    @Column(name = &quot;trademark&quot;, length = 200, unique = true)\n    private String keyword;\n}\n</code></pre>\n<p>Can you guide me how this can be implemented?</p>\n"},{"tags":["java","xml","ant","system-properties"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1678123858,"post_id":75653976,"comment_id":133468658,"body_markdown":"Check if the parameter has been passed. If yes, store that value. If not, take it from properties.","body":"Check if the parameter has been passed. If yes, store that value. If not, take it from properties."},{"owner":{"account_id":26316352,"reputation":15,"user_id":19979065,"display_name":"jjl"},"score":0,"creation_date":1678124316,"post_id":75653976,"comment_id":133468803,"body_markdown":"@m0skit0 How can we check if the parameter has been passed or not? Is there a way for that? Thank you","body":"@m0skit0 How can we check if the parameter has been passed or not? Is there a way for that? Thank you"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1678124408,"post_id":75653976,"comment_id":133468832,"body_markdown":"You already said they need to be passed as -DcommandType= and -DvalueType=. Check for that in the parameters array","body":"You already said they need to be passed as -DcommandType= and -DvalueType=. Check for that in the parameters array"}],"answers":[{"comments":[{"owner":{"account_id":26316352,"reputation":15,"user_id":19979065,"display_name":"jjl"},"score":0,"creation_date":1678145467,"post_id":75654133,"comment_id":133473584,"body_markdown":"This design and solution worked like a gem! Thank you very much!!","body":"This design and solution worked like a gem! Thank you very much!!"}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678124742,"creation_date":1678124742,"answer_id":75654133,"question_id":75653976,"body_markdown":"By design, Ant only allows a property to be set once.  Any attempt to set a property which already has a value is simply ignored.\r\n\r\nYou can use this to your advantage.  Simply set each property to your desired default.  If that property was already set, your attempt to set it to a default will be ignored:\r\n\r\n    &lt;target name=&quot;endPoint depends=&quot;standard-release&quot;&gt;\r\n        &lt;!-- Ignored if commandType is already set. --&gt;\r\n        &lt;property name=&quot;commandType&quot; value=&quot;TYPE0&quot;/&gt;\r\n\r\n        &lt;!-- Ignored if valueType is already set. --&gt;\r\n        &lt;property name=&quot;valueType&quot; value=&quot;TYPE0&quot;/&gt;\r\n\r\n        &lt;java classname=&quot;callPath.sampleClass&quot; classpath=&quot;${bp:run.classpath}&quot; fork=&quot;true&quot;&gt;\r\n            &lt;sysproperty key=&quot;commandType&quot; value=&quot;${commandType}&quot;/&gt;\r\n            &lt;sysproperty key=&quot;commandName&quot; value=&quot;${Name}&quot;/&gt;\r\n            &lt;sysproperty key=&quot;valueType&quot; value=&quot;${valueType}&quot;/&gt;\r\n            &lt;sysproperty key=&quot;valueName&quot; value=&quot;${valueName}&quot;/&gt;\r\n        &lt;/java&gt;\r\n    &lt;/target&gt;\r\n","title":"How to set a default value to a string using System Poperties?","body":"<p>By design, Ant only allows a property to be set once.  Any attempt to set a property which already has a value is simply ignored.</p>\n<p>You can use this to your advantage.  Simply set each property to your desired default.  If that property was already set, your attempt to set it to a default will be ignored:</p>\n<pre><code>&lt;target name=&quot;endPoint depends=&quot;standard-release&quot;&gt;\n    &lt;!-- Ignored if commandType is already set. --&gt;\n    &lt;property name=&quot;commandType&quot; value=&quot;TYPE0&quot;/&gt;\n\n    &lt;!-- Ignored if valueType is already set. --&gt;\n    &lt;property name=&quot;valueType&quot; value=&quot;TYPE0&quot;/&gt;\n\n    &lt;java classname=&quot;callPath.sampleClass&quot; classpath=&quot;${bp:run.classpath}&quot; fork=&quot;true&quot;&gt;\n        &lt;sysproperty key=&quot;commandType&quot; value=&quot;${commandType}&quot;/&gt;\n        &lt;sysproperty key=&quot;commandName&quot; value=&quot;${Name}&quot;/&gt;\n        &lt;sysproperty key=&quot;valueType&quot; value=&quot;${valueType}&quot;/&gt;\n        &lt;sysproperty key=&quot;valueName&quot; value=&quot;${valueName}&quot;/&gt;\n    &lt;/java&gt;\n&lt;/target&gt;\n</code></pre>\n"}],"owner":{"account_id":26316352,"reputation":15,"user_id":19979065,"display_name":"jjl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75654133,"answer_count":1,"score":0,"last_activity_date":1678124742,"creation_date":1678123624,"question_id":75653976,"body_markdown":"I&#39;m trying to use Java system properties to take values from Command line as follows in my build.xml file - \r\n\r\n```\r\n&lt;target name=&quot;endPoint depends=&quot;standard-release&quot;&gt;\r\n        &lt;java classname=&quot;callPath.sampleClass&quot; classpath=&quot;${bp:run.classpath}&quot; fork=&quot;true&quot;&gt;\r\n            &lt;sysproperty key=&quot;commandType&quot; value=&quot;${commandType}&quot;/&gt;\r\n            &lt;sysproperty key=&quot;commandName&quot; value=&quot;${Name}&quot;/&gt;\r\n            &lt;sysproperty key=&quot;valueType&quot; value=&quot;${valueType}&quot;/&gt;\r\n            &lt;sysproperty key=&quot;valueName&quot; value=&quot;${valueName}&quot;/&gt;\r\n        &lt;/java&gt;\r\n    &lt;/target&gt;\r\n````\r\nIn my main method for sampleClass I&#39;m retrieving the values passed using system properties and storing them in corresponding variables as follows - \r\n\r\n```\r\npublic final class sampleClass {\r\n   public static void main(String[] args) throws Exception {\r\n        final String commandType = System.getProperty(&quot;commandType&quot;);\r\n        final String commandName = System.getProperty(&quot;commandName&quot;);\r\n        final String valueType = System.getProperty(&quot;valueType&quot;);\r\n        final String valueName = System.getProperty(&quot;valueName&quot;);\r\n        ....\r\n        .....\r\n }\r\n}\r\n```\r\n\r\nHowever, I want to default the values of ```commandType``` &amp; ```valueType``` to ```TYPE0``` when the user doesn&#39;t provide with any value from CLI. \r\n\r\nBut I can&#39;t do that as the default value would be ```commandType``` &amp; ```valueType``` itself as mentioned in the build.xml file.\r\n\r\nWhen user tries to provide a value they can use ```-DcommandType=``` &amp; ```-DvalueType=```need to store that in the variables. \r\n\r\nBut when the user doesn&#39;t provide with any value then the values of both the variables should be ```TYPE0```\r\n\r\nHow can I achieve this?\r\n","title":"How to set a default value to a string using System Poperties?","body":"<p>I'm trying to use Java system properties to take values from Command line as follows in my build.xml file -</p>\n<pre><code>&lt;target name=&quot;endPoint depends=&quot;standard-release&quot;&gt;\n        &lt;java classname=&quot;callPath.sampleClass&quot; classpath=&quot;${bp:run.classpath}&quot; fork=&quot;true&quot;&gt;\n            &lt;sysproperty key=&quot;commandType&quot; value=&quot;${commandType}&quot;/&gt;\n            &lt;sysproperty key=&quot;commandName&quot; value=&quot;${Name}&quot;/&gt;\n            &lt;sysproperty key=&quot;valueType&quot; value=&quot;${valueType}&quot;/&gt;\n            &lt;sysproperty key=&quot;valueName&quot; value=&quot;${valueName}&quot;/&gt;\n        &lt;/java&gt;\n    &lt;/target&gt;\n</code></pre>\n<p>In my main method for sampleClass I'm retrieving the values passed using system properties and storing them in corresponding variables as follows -</p>\n<pre><code>public final class sampleClass {\n   public static void main(String[] args) throws Exception {\n        final String commandType = System.getProperty(&quot;commandType&quot;);\n        final String commandName = System.getProperty(&quot;commandName&quot;);\n        final String valueType = System.getProperty(&quot;valueType&quot;);\n        final String valueName = System.getProperty(&quot;valueName&quot;);\n        ....\n        .....\n }\n}\n</code></pre>\n<p>However, I want to default the values of <code>commandType</code> &amp; <code>valueType</code> to <code>TYPE0</code> when the user doesn't provide with any value from CLI.</p>\n<p>But I can't do that as the default value would be <code>commandType</code> &amp; <code>valueType</code> itself as mentioned in the build.xml file.</p>\n<p>When user tries to provide a value they can use <code>-DcommandType=</code> &amp; <code>-DvalueType=</code>need to store that in the variables.</p>\n<p>But when the user doesn't provide with any value then the values of both the variables should be <code>TYPE0</code></p>\n<p>How can I achieve this?</p>\n"},{"tags":["java","regex","spring","spring-security"],"answers":[{"tags":[],"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678122196,"creation_date":1678122196,"answer_id":75653736,"question_id":75653665,"body_markdown":"There are a couple of issues with the regular expression in your Spring Security context XML.\r\n\r\nSecond, the question mark (?) in the pattern also has a special meaning in regular expressions and should be escaped as well.\r\n\r\nHere&#39;s a revised regex that should match the URL you provided:\r\n\r\n    &lt;intercept-url pattern=&quot;/settings/.*\\\\.(yaml|json)\\\\?tag=.*&quot; access=&quot;hasAnyRole(&#39;ROLE&#39;)&quot; /&gt;\r\n\r\n","title":"Regular expression in spring security context for query","body":"<p>There are a couple of issues with the regular expression in your Spring Security context XML.</p>\n<p>Second, the question mark (?) in the pattern also has a special meaning in regular expressions and should be escaped as well.</p>\n<p>Here's a revised regex that should match the URL you provided:</p>\n<pre><code>&lt;intercept-url pattern=&quot;/settings/.*\\\\.(yaml|json)\\\\?tag=.*&quot; access=&quot;hasAnyRole('ROLE')&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":8430535,"reputation":11,"user_id":6326456,"display_name":"John Doe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75653736,"answer_count":1,"score":0,"last_activity_date":1678124075,"creation_date":1678121777,"question_id":75653665,"body_markdown":"I try to match this url in my spring security context xml: \r\n\r\n&gt; /settings/folder_0+folder_1+folder_2.yaml?tag=test\r\n\r\n\r\nI tried : \r\n\r\n&gt;         &lt;s:intercept-url pattern=&quot;/settings/(.*)([+]?)*.yaml?tag=test&quot; access=&quot;hasAnyRole(&quot;ROLE&quot;)&quot;/&gt;\r\n\r\nBut it doesn&#39;t works. I can&#39;t figure out where I made a mistake.\r\n\r\nCan someone help me ? \r\n\r\nIf it&#39;s possible I want to improve this regex in order to accept different format like yaml, json, ... and in order to accept any tag name. \r\n\r\nThank you :) \r\n\r\n\r\n\r\n","title":"Regular expression in spring security context for query","body":"<p>I try to match this url in my spring security context xml:</p>\n<blockquote>\n<p>/settings/folder_0+folder_1+folder_2.yaml?tag=test</p>\n</blockquote>\n<p>I tried :</p>\n<blockquote>\n<pre><code>    &lt;s:intercept-url pattern=&quot;/settings/(.*)([+]?)*.yaml?tag=test&quot; access=&quot;hasAnyRole(&quot;ROLE&quot;)&quot;/&gt;\n</code></pre>\n</blockquote>\n<p>But it doesn't works. I can't figure out where I made a mistake.</p>\n<p>Can someone help me ?</p>\n<p>If it's possible I want to improve this regex in order to accept different format like yaml, json, ... and in order to accept any tag name.</p>\n<p>Thank you :)</p>\n"},{"tags":["java","foreach","iterator","iterable"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":3,"creation_date":1488094518,"post_id":42465871,"comment_id":72073410,"body_markdown":"are you trying to compare `Iterator` and `Iterable`? http://stackoverflow.com/questions/6863182/what-is-the-difference-between-iterator-and-iterable-and-how-to-use-them","body":"are you trying to compare <code>Iterator</code> and <code>Iterable</code>? <a href=\"http://stackoverflow.com/questions/6863182/what-is-the-difference-between-iterator-and-iterable-and-how-to-use-them\" title=\"what is the difference between iterator and iterable and how to use them\">stackoverflow.com/questions/6863182/&hellip;</a>"},{"owner":{"account_id":1564360,"reputation":1462,"user_id":1453475,"accept_rate":65,"display_name":"mostafa.S"},"score":1,"creation_date":1488097868,"post_id":42465871,"comment_id":72074169,"body_markdown":"@JBNizet all right guys, don&#39;t throw tomatoes on me! I got it :D","body":"@JBNizet all right guys, don&#39;t throw tomatoes on me! I got it :D"}],"answers":[{"comments":[{"owner":{"account_id":1564360,"reputation":1462,"user_id":1453475,"accept_rate":65,"display_name":"mostafa.S"},"score":1,"creation_date":1488097000,"post_id":42466144,"comment_id":72073950,"body_markdown":"all right. thanks for your clear and complete answer.","body":"all right. thanks for your clear and complete answer."},{"owner":{"account_id":2371306,"reputation":7186,"user_id":2075875,"accept_rate":78,"display_name":"Malachiasz"},"score":3,"creation_date":1603340612,"post_id":42466144,"comment_id":114007739,"body_markdown":"Ok, but where is the difference between forEach() and forEachRemaining() ? https://pl.kotl.in/ehW6pBa5t","body":"Ok, but where is the difference between forEach() and forEachRemaining() ? <a href=\"https://pl.kotl.in/ehW6pBa5t\" rel=\"nofollow noreferrer\">pl.kotl.in/ehW6pBa5t</a>"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1603340822,"post_id":42466144,"comment_id":114007777,"body_markdown":"@Malachiasz What part of my answer did you not understand? `forEach` iterates through the elements of an `Iterable`. `forEachRemaining` iterates through the remaining elements of an `Iterator`.","body":"@Malachiasz What part of my answer did you not understand? <code>forEach</code> iterates through the elements of an <code>Iterable</code>. <code>forEachRemaining</code> iterates through the remaining elements of an <code>Iterator</code>."},{"owner":{"account_id":2371306,"reputation":7186,"user_id":2075875,"accept_rate":78,"display_name":"Malachiasz"},"score":0,"creation_date":1603351638,"post_id":42466144,"comment_id":114011062,"body_markdown":"In my linked sample forEach iterates also through the remaining elements. Or does forEach() in Kotlin I used is not the same as Iterable.forEach() in Java?","body":"In my linked sample forEach iterates also through the remaining elements. Or does forEach() in Kotlin I used is not the same as Iterable.forEach() in Java?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1603352179,"post_id":42466144,"comment_id":114011288,"body_markdown":"@Malachiasz Ah... I didn&#39;t understand what you meant by the link. Well, this answer is about Java&#39;s `Iterable.forEach` vs `Iterator.forEachRemaining`. I am not an expert in Kotlin. It appears that in Kotlin, `Iterator` also has a `forEach` method that works exactly like `forEachRemaining`. I suggest you ask a new question if you want more accurate info on that.","body":"@Malachiasz Ah... I didn&#39;t understand what you meant by the link. Well, this answer is about Java&#39;s <code>Iterable.forEach</code> vs <code>Iterator.forEachRemaining</code>. I am not an expert in Kotlin. It appears that in Kotlin, <code>Iterator</code> also has a <code>forEach</code> method that works exactly like <code>forEachRemaining</code>. I suggest you ask a new question if you want more accurate info on that."}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":5,"down_vote_count":0,"up_vote_count":106,"is_accepted":true,"score":106,"last_activity_date":1488096127,"creation_date":1488096127,"answer_id":42466144,"question_id":42465871,"body_markdown":"To understand why the two methods both exist, you need to first understand what are `Iterator` and `Iterable`.\r\n\r\nAn `Iterator` basically is something that has a &quot;next element&quot; and usually, an end.\r\n\r\nAn `Iterable` is something that contains elements in a finite or infinite sequence and hence, can be _iterated_ over by keep getting the next element. In other words, `Iterable`s can be iterated over by `Iterator`s.\r\n\r\nNow that you understand this, I can talk about what&#39;s the difference between the two methods in question.\r\n\r\nLet&#39;s use an array list as an example. This is what is inside the array list:\r\n\r\n    [1, 3, 6, 8, 0]\r\n\r\nNow if I call `Iterable.forEach()` and pass in `System.out::print()`, `13680` will be printed. This is because `Iterable.forEach` iterates through the whole sequence of elements.\r\n\r\nOn the other hand, if I get the `Iterator` of the array list and called `next` twice, before calling `forEachRemaining` with `System.out::print()`, `680` will be printed. The `Iterator` has already iterated through the first two elements, so the &quot;remaining&quot; ones are 6, 8 and 0.","title":"what&#39;s the point of having both Iterator.forEachRemaining() and Iterable.forEach()?","body":"<p>To understand why the two methods both exist, you need to first understand what are <code>Iterator</code> and <code>Iterable</code>.</p>\n\n<p>An <code>Iterator</code> basically is something that has a \"next element\" and usually, an end.</p>\n\n<p>An <code>Iterable</code> is something that contains elements in a finite or infinite sequence and hence, can be <em>iterated</em> over by keep getting the next element. In other words, <code>Iterable</code>s can be iterated over by <code>Iterator</code>s.</p>\n\n<p>Now that you understand this, I can talk about what's the difference between the two methods in question.</p>\n\n<p>Let's use an array list as an example. This is what is inside the array list:</p>\n\n<pre><code>[1, 3, 6, 8, 0]\n</code></pre>\n\n<p>Now if I call <code>Iterable.forEach()</code> and pass in <code>System.out::print()</code>, <code>13680</code> will be printed. This is because <code>Iterable.forEach</code> iterates through the whole sequence of elements.</p>\n\n<p>On the other hand, if I get the <code>Iterator</code> of the array list and called <code>next</code> twice, before calling <code>forEachRemaining</code> with <code>System.out::print()</code>, <code>680</code> will be printed. The <code>Iterator</code> has already iterated through the first two elements, so the \"remaining\" ones are 6, 8 and 0.</p>\n"},{"tags":[],"owner":{"account_id":19923816,"reputation":99,"user_id":14599017,"display_name":"vishal rathod"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1675231475,"creation_date":1621225735,"answer_id":67564011,"question_id":42465871,"body_markdown":"In Simple word, forEachRemaining() is an improved version of Iterator, where before JDK8 we were uses hasNext(), next() to traverse the any collection(ArrayList, HastSet etc).\r\n\r\n    List&lt;String&gt; fruits= new ArrayList&lt;&gt;();\r\n    fruits.add(&quot;Apple&quot;);\r\n    fruits.add(&quot;Banana&quot;);\r\n    fruits.add(&quot;Grapes&quot;);\r\n    fruits.add(&quot;Orange&quot;);\r\n    Iterator&lt;String&gt; iterator = fruits.iterator();\r\n\r\n**Before JDK8**\r\n\r\n    while (iterator.hasNext()) {\r\n    \tSystem.out.println(iterator.next());\r\n    }\r\n\r\nNow In JDK8 if we want to we want to traverse any collection we can do like this:\r\n\r\n**After JDK8**\r\n\r\n    iterator.forEachRemaining(System.out::println);\r\n\r\n&gt; Now, JDK8 forEach() is improved version JDK7 with lamda expression.\r\n\r\n\r\n","title":"what&#39;s the point of having both Iterator.forEachRemaining() and Iterable.forEach()?","body":"<p>In Simple word, forEachRemaining() is an improved version of Iterator, where before JDK8 we were uses hasNext(), next() to traverse the any collection(ArrayList, HastSet etc).</p>\n<pre><code>List&lt;String&gt; fruits= new ArrayList&lt;&gt;();\nfruits.add(&quot;Apple&quot;);\nfruits.add(&quot;Banana&quot;);\nfruits.add(&quot;Grapes&quot;);\nfruits.add(&quot;Orange&quot;);\nIterator&lt;String&gt; iterator = fruits.iterator();\n</code></pre>\n<p><strong>Before JDK8</strong></p>\n<pre><code>while (iterator.hasNext()) {\n    System.out.println(iterator.next());\n}\n</code></pre>\n<p>Now In JDK8 if we want to we want to traverse any collection we can do like this:</p>\n<p><strong>After JDK8</strong></p>\n<pre><code>iterator.forEachRemaining(System.out::println);\n</code></pre>\n<blockquote>\n<p>Now, JDK8 forEach() is improved version JDK7 with lamda expression.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6403579,"reputation":755,"user_id":4965515,"accept_rate":60,"display_name":"stackoverflowed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648404803,"creation_date":1648404803,"answer_id":71639030,"question_id":42465871,"body_markdown":"Just summarizing for Scala and Kotlin users: in Java, `Iterator`&#39;s `forEach` is called `forEachRemaining` (while `Iterable` has a `forEach` method).","title":"what&#39;s the point of having both Iterator.forEachRemaining() and Iterable.forEach()?","body":"<p>Just summarizing for Scala and Kotlin users: in Java, <code>Iterator</code>'s <code>forEach</code> is called <code>forEachRemaining</code> (while <code>Iterable</code> has a <code>forEach</code> method).</p>\n"},{"tags":[],"owner":{"account_id":8251133,"reputation":1627,"user_id":6205743,"display_name":"Fang Zhang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678123916,"creation_date":1678123916,"answer_id":75654013,"question_id":42465871,"body_markdown":"Additional comment to @Sweeper&#39;s answer:\r\n\r\n`forEach` is for `Iterable`, which corresponds to a &quot;collection&quot;, thus &quot;for each&quot; is &quot;for each element of the collection&quot;.\r\n\r\n`forEachRemaing` is for `Iterator`, which corresponds to a pointer. There may or may not be a &quot;collection&quot; behind the pointer; &quot;for each element of a pointer&quot; is not valid statement. ","title":"what&#39;s the point of having both Iterator.forEachRemaining() and Iterable.forEach()?","body":"<p>Additional comment to @Sweeper's answer:</p>\n<p><code>forEach</code> is for <code>Iterable</code>, which corresponds to a &quot;collection&quot;, thus &quot;for each&quot; is &quot;for each element of the collection&quot;.</p>\n<p><code>forEachRemaing</code> is for <code>Iterator</code>, which corresponds to a pointer. There may or may not be a &quot;collection&quot; behind the pointer; &quot;for each element of a pointer&quot; is not valid statement.</p>\n"}],"owner":{"account_id":1564360,"reputation":1462,"user_id":1453475,"accept_rate":65,"display_name":"mostafa.S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27545,"favorite_count":0,"down_vote_count":4,"up_vote_count":39,"accepted_answer_id":42466144,"answer_count":4,"score":35,"last_activity_date":1678123916,"creation_date":1488093980,"question_id":42465871,"body_markdown":"and both of them get a Consumer as parameter. so if Java 8, is meant to avoid confusions, like it has done in Time API, why has it added a new confusion? or am I missing some point?","title":"what&#39;s the point of having both Iterator.forEachRemaining() and Iterable.forEach()?","body":"<p>and both of them get a Consumer as parameter. so if Java 8, is meant to avoid confusions, like it has done in Time API, why has it added a new confusion? or am I missing some point?</p>\n"},{"tags":["java","maven","kotlin","code-generation","annotation-processing"],"comments":[{"owner":{"account_id":322960,"reputation":7711,"user_id":642680,"accept_rate":74,"display_name":"D-Dum"},"score":0,"creation_date":1678120451,"post_id":75653306,"comment_id":133467639,"body_markdown":"Are these 2 distinct Maven projects? I&#39;m trying to understand what you mean by &#39;within my Kotlin project&#39;","body":"Are these 2 distinct Maven projects? I&#39;m trying to understand what you mean by &#39;within my Kotlin project&#39;"},{"owner":{"account_id":169380,"reputation":1471,"user_id":395430,"accept_rate":100,"display_name":"tagtraeumer"},"score":0,"creation_date":1678120882,"post_id":75653306,"comment_id":133467752,"body_markdown":"@D-Dum no, it is only one (kotlin) project. it has some libraries as dependency and using one of them I generate some (java) code as described above.","body":"@D-Dum no, it is only one (kotlin) project. it has some libraries as dependency and using one of them I generate some (java) code as described above."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1678121830,"post_id":75653306,"comment_id":133468060,"body_markdown":"I don&#39;t have experience with Kotlin, is it really necessary that you configure the sourceDirs in the plugin? I would try to remove that part, but if you have to specify it, you also have to add the generated sources somehow, otherwise the Kotlin plugin doesn&#39;t know about them. See https://kotlinlang.org/docs/maven.html#compile-kotlin-and-java-sources","body":"I don&#39;t have experience with Kotlin, is it really necessary that you configure the sourceDirs in the plugin? I would try to remove that part, but if you have to specify it, you also have to add the generated sources somehow, otherwise the Kotlin plugin doesn&#39;t know about them. See <a href=\"https://kotlinlang.org/docs/maven.html#compile-kotlin-and-java-sources\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/maven.html#compile-kotlin-and-java-sourc&zwnj;&#8203;es</a>"},{"owner":{"account_id":169380,"reputation":1471,"user_id":395430,"accept_rate":100,"display_name":"tagtraeumer"},"score":0,"creation_date":1678122676,"post_id":75653306,"comment_id":133468323,"body_markdown":"@cyberbrain thanks for your input. I kinda used that link you shared as a basis for my configuration. I think the generated source dir in the maven plugin isn&#39;t necessary as sit seems to be the default value. I added the generated dir in the kotlin maven plugin and it didn&#39;t make a difference. I guess you might be right that it should be in there, therefore I&#39;ll leave it in. but unfortunately it won&#39;t still compile","body":"@cyberbrain thanks for your input. I kinda used that link you shared as a basis for my configuration. I think the generated source dir in the maven plugin isn&#39;t necessary as sit seems to be the default value. I added the generated dir in the kotlin maven plugin and it didn&#39;t make a difference. I guess you might be right that it should be in there, therefore I&#39;ll leave it in. but unfortunately it won&#39;t still compile"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1678122974,"post_id":75653306,"comment_id":133468397,"body_markdown":"(I answered already, but:) could you point out the exact difference between &quot;working&quot; and &quot;not working&quot; (.i.e. for &quot;non working&quot;, you did `mvn clean package spring-boot:repackage...`, how can you produce the &quot;working&quot; one?)","body":"(I answered already, but:) could you point out the exact difference between &quot;working&quot; and &quot;not working&quot; (.i.e. for &quot;non working&quot;, you did <code>mvn clean package spring-boot:repackage...</code>, how can you produce the &quot;working&quot; one?)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1678123253,"post_id":75653306,"comment_id":133468488,"body_markdown":"when &quot;working&quot;/&quot;everything compiles just fine&quot; means &quot;in IDE&quot;, then only due to just-in-time compilation of the IDE, and my answer could hold ;)","body":"when &quot;working&quot;/&quot;everything compiles just fine&quot; means &quot;in IDE&quot;, then only due to just-in-time compilation of the IDE, and my answer could hold ;)"},{"owner":{"account_id":169380,"reputation":1471,"user_id":395430,"accept_rate":100,"display_name":"tagtraeumer"},"score":0,"creation_date":1678123791,"post_id":75653306,"comment_id":133468626,"body_markdown":"@xerx593 ah I just commented in your answer ;) working means also build in maven. I have my kotlin code, which doesn&#39;t reference any of the generated sources (the in the error messages mentioned View.kt is not present). I also have generated code which references kotlin code. compiling in maven with my config (see my post) ends successfully, source code is generated, all classes are compiled and present in my target directory.","body":"@xerx593 ah I just commented in your answer ;) working means also build in maven. I have my kotlin code, which doesn&#39;t reference any of the generated sources (the in the error messages mentioned View.kt is not present). I also have generated code which references kotlin code. compiling in maven with my config (see my post) ends successfully, source code is generated, all classes are compiled and present in my target directory."},{"owner":{"account_id":169380,"reputation":1471,"user_id":395430,"accept_rate":100,"display_name":"tagtraeumer"},"score":0,"creation_date":1678123857,"post_id":75653306,"comment_id":133468656,"body_markdown":"when I add the View.kt, which references the generated java code, I cannot build anymore in maven","body":"when I add the View.kt, which references the generated java code, I cannot build anymore in maven"}],"owner":{"account_id":169380,"reputation":1471,"user_id":395430,"accept_rate":100,"display_name":"tagtraeumer"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":431,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1678123657,"creation_date":1678119774,"question_id":75653306,"body_markdown":"I have a kotlin project in which some code is generated using Annotation Processing (AbstractProcessor). The generated code is in java and is generated into \r\n\r\n&gt; ./target/generated-sources/annotations\r\n\r\nthe generated code accesses some kotlin classes and with the following build configuration in java, everything compiles just fine\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;xxx&lt;/finalName&gt;\r\n\t\t&lt;sourceDirectory&gt;${project.basedir}/src/main/kotlin&lt;/sourceDirectory&gt;\r\n\t\t&lt;testSourceDirectory&gt;${project.basedir}/src/test/kotlin&lt;/testSourceDirectory&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;args&gt;\r\n\t\t\t\t\t\t&lt;arg&gt;-Xjsr305=strict&lt;/arg&gt;\r\n\t\t\t\t\t&lt;/args&gt;\r\n\t\t\t\t\t&lt;compilerPlugins&gt;\r\n\t\t\t\t\t\t&lt;plugin&gt;spring&lt;/plugin&gt;\r\n\t\t\t\t\t&lt;/compilerPlugins&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;kotlin-maven-allopen&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;compile&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;compile&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;sourceDirs&gt;\r\n\t\t\t\t\t\t\t\t&lt;sourceDir&gt;${project.basedir}/src/main/kotlin&lt;/sourceDir&gt;\r\n\t\t\t\t\t\t\t\t&lt;sourceDir&gt;${project.build.directory}/generated-sources/annotations&lt;/sourceDir&gt;\r\n\t\t\t\t\t\t\t&lt;/sourceDirs&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;test-compile&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;test-compile&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;sourceDirs&gt;\r\n\t\t\t\t\t\t\t\t&lt;sourceDir&gt;${project.basedir}/src/test/kotlin&lt;/sourceDir&gt;\r\n\t\t\t\t\t\t\t\t&lt;sourceDir&gt;${project.build.directory}/generated-sources/annotations&lt;/sourceDir&gt;\r\n\t\t\t\t\t\t\t&lt;/sourceDirs&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.5.1&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;!-- Replacing default-compile as it is treated specially by maven --&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;default-compile&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;none&lt;/phase&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t&lt;!-- Replacing default-testCompile as it is treated specially by maven --&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;default-testCompile&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;none&lt;/phase&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;java-compile&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;compile&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;!--\r\n\t\t\t\tTake care of synchronizing java dependencies and imports in\r\n\t\t\t\tpackage.json and main.js files.\r\n\t\t\t\tIt also creates webpack.config.js if not exists yet.\r\n\t\t\t--&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;com.vaadin&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;vaadin-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${vaadin.version}&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;prepare-frontend&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nHowever, when I want to use the generated classes within my Kotlin project, maven doesn&#39;t compile anymore with the following error:\r\n\r\n&gt; mvn clean package spring-boot:repackage -Pproduction -DskipTests=true\r\n\r\n\r\n\t[ERROR] Failed to execute goal org.jetbrains.kotlin:kotlin-maven-plugin:1.7.22:compile (compile) on project xxx: Compilation failure: Compilation failure:\r\n\t[ERROR] /path/to/project/src/main/kotlin/com/x/y/z/View.kt:[12,44] Unresolved reference: CRUD\r\n\t[ERROR] /path/to/project/src/main/kotlin/com/x/y/z/View.kt:[35,38] Unresolved reference: XxxCRUDController\r\n\r\nany ideas how I can use my generated Java classes within my Kotlin project?\r\n","title":"Maven compile kotlin and java with generated sources","body":"<p>I have a kotlin project in which some code is generated using Annotation Processing (AbstractProcessor). The generated code is in java and is generated into</p>\n<blockquote>\n<p>./target/generated-sources/annotations</p>\n</blockquote>\n<p>the generated code accesses some kotlin classes and with the following build configuration in java, everything compiles just fine</p>\n<pre><code>&lt;build&gt;\n    &lt;finalName&gt;xxx&lt;/finalName&gt;\n    &lt;sourceDirectory&gt;${project.basedir}/src/main/kotlin&lt;/sourceDirectory&gt;\n    &lt;testSourceDirectory&gt;${project.basedir}/src/test/kotlin&lt;/testSourceDirectory&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;args&gt;\n                    &lt;arg&gt;-Xjsr305=strict&lt;/arg&gt;\n                &lt;/args&gt;\n                &lt;compilerPlugins&gt;\n                    &lt;plugin&gt;spring&lt;/plugin&gt;\n                &lt;/compilerPlugins&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                    &lt;artifactId&gt;kotlin-maven-allopen&lt;/artifactId&gt;\n                    &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;compile&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceDirs&gt;\n                            &lt;sourceDir&gt;${project.basedir}/src/main/kotlin&lt;/sourceDir&gt;\n                            &lt;sourceDir&gt;${project.build.directory}/generated-sources/annotations&lt;/sourceDir&gt;\n                        &lt;/sourceDirs&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;test-compile&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;test-compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sourceDirs&gt;\n                            &lt;sourceDir&gt;${project.basedir}/src/test/kotlin&lt;/sourceDir&gt;\n                            &lt;sourceDir&gt;${project.build.directory}/generated-sources/annotations&lt;/sourceDir&gt;\n                        &lt;/sourceDirs&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.5.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;!-- Replacing default-compile as it is treated specially by maven --&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-compile&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                &lt;/execution&gt;\n                &lt;!-- Replacing default-testCompile as it is treated specially by maven --&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-testCompile&lt;/id&gt;\n                    &lt;phase&gt;none&lt;/phase&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;java-compile&lt;/id&gt;\n                    &lt;phase&gt;compile&lt;/phase&gt;\n                    &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\n                    \n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n\n        &lt;!--\n            Take care of synchronizing java dependencies and imports in\n            package.json and main.js files.\n            It also creates webpack.config.js if not exists yet.\n        --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n            &lt;artifactId&gt;vaadin-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${vaadin.version}&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;prepare-frontend&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>However, when I want to use the generated classes within my Kotlin project, maven doesn't compile anymore with the following error:</p>\n<blockquote>\n<p>mvn clean package spring-boot:repackage -Pproduction -DskipTests=true</p>\n</blockquote>\n<pre><code>[ERROR] Failed to execute goal org.jetbrains.kotlin:kotlin-maven-plugin:1.7.22:compile (compile) on project xxx: Compilation failure: Compilation failure:\n[ERROR] /path/to/project/src/main/kotlin/com/x/y/z/View.kt:[12,44] Unresolved reference: CRUD\n[ERROR] /path/to/project/src/main/kotlin/com/x/y/z/View.kt:[35,38] Unresolved reference: XxxCRUDController\n</code></pre>\n<p>any ideas how I can use my generated Java classes within my Kotlin project?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":18196713,"reputation":2850,"user_id":13241651,"display_name":"Niteesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678122850,"creation_date":1678122850,"answer_id":75653838,"question_id":75653798,"body_markdown":"You could do it this way\r\n```java\r\nfor (int i = 0; i &lt; 10; i++) {\r\n            for (int j = 0; j &lt; 2; j++) {\r\n                System.out.print(nums[i][j]);\r\n                if(j == 0)\r\n                  System.out.print(&quot; x &quot;);\r\n            }\r\n            System.out.println(&quot;=&quot;);\r\n}\r\n```","title":"Is it possible to print a char in between Multi-Dimensional Array in Java?","body":"<p>You could do it this way</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; 10; i++) {\n            for (int j = 0; j &lt; 2; j++) {\n                System.out.print(nums[i][j]);\n                if(j == 0)\n                  System.out.print(&quot; x &quot;);\n            }\n            System.out.println(&quot;=&quot;);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":25679730,"reputation":15,"user_id":19442685,"display_name":"Erhan"},"score":0,"creation_date":1678124870,"post_id":75653941,"comment_id":133468954,"body_markdown":"I still do not understand how this works but it works... How can you print two lines without needing to have nested loops? This is very interesting. I will need to learn this...","body":"I still do not understand how this works but it works... How can you print two lines without needing to have nested loops? This is very interesting. I will need to learn this..."},{"owner":{"account_id":27949712,"reputation":36,"user_id":21343885,"display_name":"Ibn Anik"},"score":0,"creation_date":1678125663,"post_id":75653941,"comment_id":133469186,"body_markdown":"for (int j = 0; j &lt; 2; j++) { } here, loop works for j=0 and 1  for  i = 0,1,2,3...9  that mean   we can use nums[i][0] and nums[i][1] for each value of i","body":"for (int j = 0; j &lt; 2; j++) { } here, loop works for j=0 and 1  for  i = 0,1,2,3...9  that mean   we can use nums[i][0] and nums[i][1] for each value of i"},{"owner":{"account_id":25679730,"reputation":15,"user_id":19442685,"display_name":"Erhan"},"score":0,"creation_date":1678125875,"post_id":75653941,"comment_id":133469241,"body_markdown":"Thank you for your explanation. I did a separate java code and tried your solution for a single Array and it also worked. I now understand how it works and how to use it. Thank you once again.","body":"Thank you for your explanation. I did a separate java code and tried your solution for a single Array and it also worked. I now understand how it works and how to use it. Thank you once again."}],"tags":[],"owner":{"account_id":27949712,"reputation":36,"user_id":21343885,"display_name":"Ibn Anik"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1678123452,"creation_date":1678123452,"answer_id":75653941,"question_id":75653798,"body_markdown":"    for (int i = 0; i &lt; 10; i++) {\r\n          \r\n                System.out.println(nums[i][0] + &quot; x &quot;+nums[i][1]+&quot; = &quot;);\r\n            \r\n        }","title":"Is it possible to print a char in between Multi-Dimensional Array in Java?","body":"<pre><code>for (int i = 0; i &lt; 10; i++) {\n      \n            System.out.println(nums[i][0] + &quot; x &quot;+nums[i][1]+&quot; = &quot;);\n        \n    }\n</code></pre>\n"}],"owner":{"account_id":25679730,"reputation":15,"user_id":19442685,"display_name":"Erhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75653941,"answer_count":2,"score":0,"last_activity_date":1678123452,"creation_date":1678122554,"question_id":75653798,"body_markdown":"I am still learning to code in Java and I want to build Multi-Dimensional arrays where I want it to print two numbers and a char in between so I can randomize maths multipication questions for my  son to exercise. \r\n\r\nSo far I have managed to get it done but &#39;x&#39; is also printing at the end. All I want to print is randoming two numbers and printing as ( 1 x 2 = ). \r\n\r\nThis is what I have so far : \r\n\r\n\r\n```\r\npackage exercises;\r\n\r\npublic class TimeTable {\r\n    public static void main(String[] args) {\r\n        int[][] nums = new int[10][2];\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            for (int j = 0; j &lt; 2; j++) {\r\n                nums[i][j] = (int) (Math.random() * 10);\r\n            }\r\n        }\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            for (int j = 0; j &lt; 2; j++) {\r\n                System.out.print(nums[i][j] + &quot; x &quot;);\r\n            }\r\n            System.out.println(&quot;=&quot;);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nand it prints the following when I run it: \r\n\r\n\r\n```\r\n7 x 1 x =\r\n9 x 9 x =\r\n6 x 3 x =\r\n0 x 6 x =\r\n0 x 2 x =\r\n0 x 4 x =\r\n0 x 8 x =\r\n8 x 5 x =\r\n8 x 8 x =\r\n8 x 3 x =\r\n```\r\n\r\nI do not want the last &#39;x&#39; before the equal sign.\r\n\r\nThank you all.\r\n\r\n\r\n\r\nI tried to print the equal sign only and it was confusing. I tried to print first line of the array and then another seperate function to print the last bit of the array with &#39;+&#39; and it didnt worked instead it throw and huge error.","title":"Is it possible to print a char in between Multi-Dimensional Array in Java?","body":"<p>I am still learning to code in Java and I want to build Multi-Dimensional arrays where I want it to print two numbers and a char in between so I can randomize maths multipication questions for my  son to exercise.</p>\n<p>So far I have managed to get it done but 'x' is also printing at the end. All I want to print is randoming two numbers and printing as ( 1 x 2 = ).</p>\n<p>This is what I have so far :</p>\n<pre><code>package exercises;\n\npublic class TimeTable {\n    public static void main(String[] args) {\n        int[][] nums = new int[10][2];\n\n        for (int i = 0; i &lt; 10; i++) {\n            for (int j = 0; j &lt; 2; j++) {\n                nums[i][j] = (int) (Math.random() * 10);\n            }\n        }\n\n        for (int i = 0; i &lt; 10; i++) {\n            for (int j = 0; j &lt; 2; j++) {\n                System.out.print(nums[i][j] + &quot; x &quot;);\n            }\n            System.out.println(&quot;=&quot;);\n        }\n    }\n\n}\n</code></pre>\n<p>and it prints the following when I run it:</p>\n<pre><code>7 x 1 x =\n9 x 9 x =\n6 x 3 x =\n0 x 6 x =\n0 x 2 x =\n0 x 4 x =\n0 x 8 x =\n8 x 5 x =\n8 x 8 x =\n8 x 3 x =\n</code></pre>\n<p>I do not want the last 'x' before the equal sign.</p>\n<p>Thank you all.</p>\n<p>I tried to print the equal sign only and it was confusing. I tried to print first line of the array and then another seperate function to print the last bit of the array with '+' and it didnt worked instead it throw and huge error.</p>\n"},{"tags":["java","spring","spring-boot","spring-data"],"comments":[{"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"score":0,"creation_date":1677650735,"post_id":75599572,"comment_id":133377808,"body_markdown":"I think you are using hikari jdbc datasource here, and some of your properties are not being mapped correctly to your given properties.\nfollowing are some mandatory ones : `url,driverClassName,username,password`\nref: `org.springframework.boot.jdbc.DataSourceBuilder.DataSourceProperty`\nensure you have correct naming else it will fail.\n\nIn exception you might be able to see which exact property caused problems","body":"I think you are using hikari jdbc datasource here, and some of your properties are not being mapped correctly to your given properties. following are some mandatory ones : <code>url,driverClassName,username,password</code> ref: <code>org.springframework.boot.jdbc.DataSourceBuilder.DataSourcePr&zwnj;&#8203;operty</code> ensure you have correct naming else it will fail.  In exception you might be able to see which exact property caused problems"},{"owner":{"account_id":103016,"reputation":474,"user_id":276149,"accept_rate":60,"display_name":"Vega"},"score":0,"creation_date":1677680855,"post_id":75599572,"comment_id":133385815,"body_markdown":"I have all those field on the config as mentioned and its working good with older version of springboot","body":"I have all those field on the config as mentioned and its working good with older version of springboot"}],"answers":[{"tags":[],"owner":{"account_id":103016,"reputation":474,"user_id":276149,"accept_rate":60,"display_name":"Vega"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678123145,"creation_date":1678123145,"answer_id":75653889,"question_id":75599572,"body_markdown":"I have mentioned the jdbc url in config as\r\n`url: &quot;jdbc:mysql://url&quot;` it need to be updated as\r\n `jdbc-url: &quot;jdbc:mysql://url&quot;`\r\n ","title":"Could not bind properties to &#39;DataSource&#39; Springboot 2.7.9","body":"<p>I have mentioned the jdbc url in config as\n<code>url: &quot;jdbc:mysql://url&quot;</code> it need to be updated as\n<code>jdbc-url: &quot;jdbc:mysql://url&quot;</code></p>\n"}],"owner":{"account_id":103016,"reputation":474,"user_id":276149,"accept_rate":60,"display_name":"Vega"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":543,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75653889,"answer_count":1,"score":0,"last_activity_date":1678123145,"creation_date":1677644754,"question_id":75599572,"body_markdown":"I have upgraded springboot from 2.2.3.RELEASE to 2.7.9, then datasource bean creation started throwing below exception\r\n\r\nUnsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name &#39;primaryDataSource&#39;: Could not bind properties to &#39;DataSource&#39; : prefix=app.datasource.primary, ignoreInvalidFields=false, ignoreUnknownFields=true; nested exception is org.springframework.boot.context.properties.bind.BindException: Failed to bind properties under &#39;app.datasource.primary&#39; to javax.sql.DataSource&quot;\r\n\r\nthe properties I have in config are below\r\n```\r\napp:\r\n  datasource:\r\n    primary:\r\n      minimum-idle: 5\r\n      maximum-pool-size: 20\r\n      connection-timeout: 30000\r\n      maxLifetime: 540000\r\n      idleTimeout: 30000\r\n      url: &quot;jdbc:mysql://url&quot;\r\n      driver-class-name: com.mysql.cj.jdbc.Driver\r\n      username: user\r\n      password: pwd\r\n```\r\nbean method\r\n```\r\n@Bean(name = &quot;primaryDataSource&quot;)\r\n\t@ConfigurationProperties(&quot;app.datasource.primary&quot;)\r\n\tpublic DataSource primaryDataSource() {\r\n\t\treturn DataSourceBuilder.create().build();\r\n\t}\r\n```\r\n\r\nDependencies\r\n```\r\n       &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.32&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nThe same setup works with 2.2.X spring boot version, what I am missing\r\n","title":"Could not bind properties to &#39;DataSource&#39; Springboot 2.7.9","body":"<p>I have upgraded springboot from 2.2.3.RELEASE to 2.7.9, then datasource bean creation started throwing below exception</p>\n<p>Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'primaryDataSource': Could not bind properties to 'DataSource' : prefix=app.datasource.primary, ignoreInvalidFields=false, ignoreUnknownFields=true; nested exception is org.springframework.boot.context.properties.bind.BindException: Failed to bind properties under 'app.datasource.primary' to javax.sql.DataSource&quot;</p>\n<p>the properties I have in config are below</p>\n<pre><code>app:\n  datasource:\n    primary:\n      minimum-idle: 5\n      maximum-pool-size: 20\n      connection-timeout: 30000\n      maxLifetime: 540000\n      idleTimeout: 30000\n      url: &quot;jdbc:mysql://url&quot;\n      driver-class-name: com.mysql.cj.jdbc.Driver\n      username: user\n      password: pwd\n</code></pre>\n<p>bean method</p>\n<pre><code>@Bean(name = &quot;primaryDataSource&quot;)\n    @ConfigurationProperties(&quot;app.datasource.primary&quot;)\n    public DataSource primaryDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n</code></pre>\n<p>Dependencies</p>\n<pre><code>       &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.32&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n            &lt;version&gt;4.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The same setup works with 2.2.X spring boot version, what I am missing</p>\n"},{"tags":["java","spring","spring-boot","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":19399817,"reputation":81,"user_id":14186636,"display_name":"Pavel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678123108,"creation_date":1678123108,"answer_id":75653880,"question_id":75435764,"body_markdown":"had similar issue, solved by downgrading spring-security-oauth2-client to 5.8.2\r\n\r\nerror text:\r\n\r\n`\r\nError creating bean with name &#39;org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setAuthorizedClientRepository&#39; parameter 0;\r\n`","title":"java.lang.IllegalStateException: Failed to introspect AuthenticatedPrincipalOAuth2AuthorizedClientRepository Class","body":"<p>had similar issue, solved by downgrading spring-security-oauth2-client to 5.8.2</p>\n<p>error text:</p>\n<p><code>Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setAuthorizedClientRepository' parameter 0;</code></p>\n"}],"owner":{"account_id":20862762,"reputation":9,"user_id":15324584,"display_name":"Anmol Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678123108,"creation_date":1676290644,"question_id":75435764,"body_markdown":"While adding Oauth2 configurations to my project, I got this error:\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to introspect Class [org.springframework.security.oauth2.client.web.AuthenticatedPrincipalOAuth2AuthorizedClientRepository] from ClassLoader [jdk.internal.loader.ClassLoader$AppClassLoader@73d16e93]\r\n```\r\n\r\nFor reference: [Blog Link](https://developer.okta.com/blog/2021/05/05/client-credentials-spring-security#create-a-webclient-based-application)\r\n\r\nI have these dependencies in my maven project.\r\n\r\n\r\n```\r\n&lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.0&lt;/version&gt;\r\n&lt;/parent&gt;\r\n\r\n...\r\n    &lt;!-- Spring Boot Web starter --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- Security Starter --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- Oauth2 client --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-oauth2-client&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- WebClient --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nPlease tell me what am I doing wrong here? I think the problem is related to dependencies.\r\n","title":"java.lang.IllegalStateException: Failed to introspect AuthenticatedPrincipalOAuth2AuthorizedClientRepository Class","body":"<p>While adding Oauth2 configurations to my project, I got this error:</p>\n<pre><code>java.lang.IllegalStateException: Failed to introspect Class [org.springframework.security.oauth2.client.web.AuthenticatedPrincipalOAuth2AuthorizedClientRepository] from ClassLoader [jdk.internal.loader.ClassLoader$AppClassLoader@73d16e93]\n</code></pre>\n<p>For reference: <a href=\"https://developer.okta.com/blog/2021/05/05/client-credentials-spring-security#create-a-webclient-based-application\" rel=\"nofollow noreferrer\">Blog Link</a></p>\n<p>I have these dependencies in my maven project.</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0&lt;/version&gt;\n&lt;/parent&gt;\n\n...\n    &lt;!-- Spring Boot Web starter --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- Security Starter --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- Oauth2 client --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-oauth2-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- WebClient --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Please tell me what am I doing wrong here? I think the problem is related to dependencies.</p>\n"},{"tags":["java","spring-boot","cassandra"],"answers":[{"tags":[],"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1678114842,"creation_date":1678114842,"answer_id":75652395,"question_id":75651940,"body_markdown":"You got this error because the underlying request does not use the partition key (id). \r\n\r\nThe email is, in your case a clustering column (as it is the default `PrimaryKeyColumn` when not explicitly provided)\r\n\r\nWith the bean you provided the only queries valid are\r\n\r\n```\r\nselect * from user where id=?\r\nselect * from user where id=? AND email&gt;?\r\nselect * from user where id=? AND email&lt;?\r\nselect * from user where id=? AND email=?\r\n```\r\n\r\n**Why ?**\r\n\r\nData is partitioned based on the value of the partitioned key in order to access all data you want on a single node. You group together what you want to retrieve together. When you define a column as Partitioned column it becomes mandatory in all your queries.\r\n\r\nWith Apache Cassandra the data modeling strategy is to create your tables based on your queries. (If you need to access the same data with multiple requests to duplicate the data in multiple tables, it is the trade off for performance.\r\n\r\n\r\n","title":"Cannot execute this query as it might involve data filtering and thus may have unpredictable performance","body":"<p>You got this error because the underlying request does not use the partition key (id).</p>\n<p>The email is, in your case a clustering column (as it is the default <code>PrimaryKeyColumn</code> when not explicitly provided)</p>\n<p>With the bean you provided the only queries valid are</p>\n<pre><code>select * from user where id=?\nselect * from user where id=? AND email&gt;?\nselect * from user where id=? AND email&lt;?\nselect * from user where id=? AND email=?\n</code></pre>\n<p><strong>Why ?</strong></p>\n<p>Data is partitioned based on the value of the partitioned key in order to access all data you want on a single node. You group together what you want to retrieve together. When you define a column as Partitioned column it becomes mandatory in all your queries.</p>\n<p>With Apache Cassandra the data modeling strategy is to create your tables based on your queries. (If you need to access the same data with multiple requests to duplicate the data in multiple tables, it is the trade off for performance.</p>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678116048,"creation_date":1678116048,"answer_id":75652621,"question_id":75651940,"body_markdown":"&gt;&gt; why\r\n\r\nBecause email is the second (clustering) part of the primary key. Searching through it has a poor performance in Cassandra Store. Exactly what the warning is saying.\r\n\r\n&gt;&gt; solution for it\r\n\r\nIf performance is not an issue in your application (like less then million of emails) then you can try allowing filtering.\r\n\r\nOtherwise consider changing your model. I suggest to get rid of the id and use the email as the only primary (and partitioned) key.","title":"Cannot execute this query as it might involve data filtering and thus may have unpredictable performance","body":"<blockquote>\n<blockquote>\n<p>why</p>\n</blockquote>\n</blockquote>\n<p>Because email is the second (clustering) part of the primary key. Searching through it has a poor performance in Cassandra Store. Exactly what the warning is saying.</p>\n<blockquote>\n<blockquote>\n<p>solution for it</p>\n</blockquote>\n</blockquote>\n<p>If performance is not an issue in your application (like less then million of emails) then you can try allowing filtering.</p>\n<p>Otherwise consider changing your model. I suggest to get rid of the id and use the email as the only primary (and partitioned) key.</p>\n"},{"comments":[{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1678121032,"post_id":75653301,"comment_id":133467800,"body_markdown":"How about if i want to search user by first name, last name, address?","body":"How about if i want to search user by first name, last name, address?"},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":1,"creation_date":1678157703,"post_id":75653301,"comment_id":133475192,"body_markdown":"mean that if I want to search/query by a field, I must create a copy of the table with this field is the first primary key? and how to make sure data are sync between tables?","body":"mean that if I want to search/query by a field, I must create a copy of the table with this field is the first primary key? and how to make sure data are sync between tables?"},{"owner":{"account_id":60456,"reputation":55971,"user_id":1054558,"accept_rate":100,"display_name":"Aaron"},"score":0,"creation_date":1678196542,"post_id":75653301,"comment_id":133483316,"body_markdown":"@SoT You can keep them in sync using a CQL BATCH: https://docs.datastax.com/en/cql-oss/3.3/cql/cql_using/useBatchGoodExample.html","body":"@SoT You can keep them in sync using a CQL BATCH: <a href=\"https://docs.datastax.com/en/cql-oss/3.3/cql/cql_using/useBatchGoodExample.html\" rel=\"nofollow noreferrer\">docs.datastax.com/en/cql-oss/3.3/cql/cql_using/&hellip;</a>"}],"tags":[],"owner":{"account_id":60456,"reputation":55971,"user_id":1054558,"accept_rate":100,"display_name":"Aaron"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678122964,"creation_date":1678119743,"answer_id":75653301,"question_id":75651940,"body_markdown":"Mar-Z makes a good suggestion about changing your data model.  How often will the user table be queried by `id`?  Is that something that you&#39;ll frequently have easy access to?  If not, re-keying the table like this will help:\r\n\r\n    CREATE TABLE user (\r\n      id UUID, email varchar, first_name varchar, last_name varchar,\r\n      PRIMARY KEY (email, id));\r\n\r\nIf you do have queries that require `id`, the best practice is to build a new query to support the new query.  You could completely duplicate the table if you don&#39;t mind keeping all of the data in-sync.  Or, you could just use it to reference the `id` for the `user` table, effectively making the table a &quot;manual index&quot; like this:\r\n\r\n    CREATE TABLE user_by_email (\r\n      id UUID, email varchar,\r\n      PRIMARY KEY (email));\r\n\r\n**Edit**\r\n\r\n&gt; How about if i want to search user by first name, last name, address?\r\n\r\nFirst of all, there&#39;s a difference between &quot;searching&quot; and &quot;querying.&quot;  With searching, you&#39;re providing very liberal keywords and expecting a large result set.  Querying is providing exact criteria and expecting a specific, usually small result set.\r\n\r\nWith that in mind, you&#39;ll want to make sure that your primary key definition matches your query criteria, in descending order of importance.  For this example, querying by first name wouldn&#39;t be terribly valuable, as common first names wouldn&#39;t lead to anything specific.  A table supporting a name query would look something like this:\r\n\r\n    CREATE TABLE user_by_name (\r\n      id UUID, email varchar, first_name varchar, last_name varchar,\r\n      PRIMARY KEY (last_name, first_name, id));\r\n\r\nBasically, building a table for name queries would want to have `last_name` first, followed by `first_name` and `id` to ensure uniqueness.","title":"Cannot execute this query as it might involve data filtering and thus may have unpredictable performance","body":"<p>Mar-Z makes a good suggestion about changing your data model.  How often will the user table be queried by <code>id</code>?  Is that something that you'll frequently have easy access to?  If not, re-keying the table like this will help:</p>\n<pre><code>CREATE TABLE user (\n  id UUID, email varchar, first_name varchar, last_name varchar,\n  PRIMARY KEY (email, id));\n</code></pre>\n<p>If you do have queries that require <code>id</code>, the best practice is to build a new query to support the new query.  You could completely duplicate the table if you don't mind keeping all of the data in-sync.  Or, you could just use it to reference the <code>id</code> for the <code>user</code> table, effectively making the table a &quot;manual index&quot; like this:</p>\n<pre><code>CREATE TABLE user_by_email (\n  id UUID, email varchar,\n  PRIMARY KEY (email));\n</code></pre>\n<p><strong>Edit</strong></p>\n<blockquote>\n<p>How about if i want to search user by first name, last name, address?</p>\n</blockquote>\n<p>First of all, there's a difference between &quot;searching&quot; and &quot;querying.&quot;  With searching, you're providing very liberal keywords and expecting a large result set.  Querying is providing exact criteria and expecting a specific, usually small result set.</p>\n<p>With that in mind, you'll want to make sure that your primary key definition matches your query criteria, in descending order of importance.  For this example, querying by first name wouldn't be terribly valuable, as common first names wouldn't lead to anything specific.  A table supporting a name query would look something like this:</p>\n<pre><code>CREATE TABLE user_by_name (\n  id UUID, email varchar, first_name varchar, last_name varchar,\n  PRIMARY KEY (last_name, first_name, id));\n</code></pre>\n<p>Basically, building a table for name queries would want to have <code>last_name</code> first, followed by <code>first_name</code> and <code>id</code> to ensure uniqueness.</p>\n"}],"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75653301,"answer_count":3,"score":1,"last_activity_date":1678122964,"creation_date":1678112301,"question_id":75651940,"body_markdown":"\r\nI got this error while executing `existsByEmail` method: `Cannot execute this query as it might involve data filtering and thus may have unpredictable performance. If you want to execute this query despite the performance unpredictability, use ALLOW FILTERING`\r\n\r\nThe table:\r\n\r\n    CREATE TABLE user(id UUID, email varchar, first_name varchar, last_name varchar, PRIMARY KEY (id, email));\r\n\r\nTbe java spring code:\r\n\r\n    @Repository\r\n    public interface UserRepository extends CassandraRepository&lt;User, UUID&gt; {\r\n      boolean existsByEmail(String email);\r\n    }\r\n\r\n    @Table\r\n    @Data\r\n    public class User {\r\n    \r\n      @PrimaryKeyColumn(type = PrimaryKeyType.PARTITIONED, ordinal = 0)\r\n      private UUID id;\r\n    \r\n      @PrimaryKeyColumn(ordinal = 1)\r\n      private String email;\r\n    \r\n      @Column(&quot;first_name&quot;)\r\n      private String firstName;\r\n    \r\n      @Column(&quot;last_name&quot;)\r\n      private String lastName;\r\n    }\r\n\r\n   \r\nPlease tell me why and solution for it. Thank you so much","title":"Cannot execute this query as it might involve data filtering and thus may have unpredictable performance","body":"<p>I got this error while executing <code>existsByEmail</code> method: <code>Cannot execute this query as it might involve data filtering and thus may have unpredictable performance. If you want to execute this query despite the performance unpredictability, use ALLOW FILTERING</code></p>\n<p>The table:</p>\n<pre><code>CREATE TABLE user(id UUID, email varchar, first_name varchar, last_name varchar, PRIMARY KEY (id, email));\n</code></pre>\n<p>Tbe java spring code:</p>\n<pre><code>@Repository\npublic interface UserRepository extends CassandraRepository&lt;User, UUID&gt; {\n  boolean existsByEmail(String email);\n}\n\n@Table\n@Data\npublic class User {\n\n  @PrimaryKeyColumn(type = PrimaryKeyType.PARTITIONED, ordinal = 0)\n  private UUID id;\n\n  @PrimaryKeyColumn(ordinal = 1)\n  private String email;\n\n  @Column(&quot;first_name&quot;)\n  private String firstName;\n\n  @Column(&quot;last_name&quot;)\n  private String lastName;\n}\n</code></pre>\n<p>Please tell me why and solution for it. Thank you so much</p>\n"},{"tags":["java","for-loop","if-statement","jbutton"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1678116897,"post_id":75652736,"comment_id":133466549,"body_markdown":"*if (greenButtons == 6) {* needs to be *after* the `for` loop, And you need to index the `JButton[]` correctly in the loop","body":"<i>if (greenButtons == 6) {</i> needs to be <i>after</i> the <code>for</code> loop, And you need to index the <code>JButton[]</code> correctly in the loop"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1678116947,"post_id":75652736,"comment_id":133466564,"body_markdown":"1) I don&#39;t see where you invoke the `setGreenButtons()` method. 2) The test for all 6 buttons being selected should be outside the loop, since it will only ever be true after the loop has finished executing. Adding it in the loop just means you are doing a check that will always be false for the first 5 buttons, so it doesn&#39;t make sense to do the check there.","body":"1) I don&#39;t see where you invoke the <code>setGreenButtons()</code> method. 2) The test for all 6 buttons being selected should be outside the loop, since it will only ever be true after the loop has finished executing. Adding it in the loop just means you are doing a check that will always be false for the first 5 buttons, so it doesn&#39;t make sense to do the check there."}],"answers":[{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1678119565,"post_id":75652942,"comment_id":133467363,"body_markdown":"don&#39;t extend components ..","body":"don&#39;t extend components .."},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1678119614,"post_id":75652942,"comment_id":133467382,"body_markdown":"@kleopatra you should if you want to encapsulate attributes. Parallel arrays are bad.","body":"@kleopatra you should if you want to encapsulate attributes. Parallel arrays are bad."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1678119730,"post_id":75652942,"comment_id":133467418,"body_markdown":"disagree, heartily ;) extension is to enhance functionality (for a component that&#39;s visuals) not for adding unrelated state (like status) - that&#39;s the task of an appropriate state model","body":"disagree, heartily ;) extension is to enhance functionality (for a component that&#39;s visuals) not for adding unrelated state (like status) - that&#39;s the task of an appropriate state model"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1678122986,"post_id":75652942,"comment_id":133468401,"body_markdown":"@kleopatra is that better? (see last example)","body":"@kleopatra is that better? (see last example)"}],"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678122951,"creation_date":1678117641,"answer_id":75652942,"question_id":75652736,"body_markdown":"You never call the `testGreenButtons` method.\r\n\r\n```java\r\npublic void actionPerformed(ActionEvent e) {\r\n    // ...\r\n    testGreenButtons();\r\n}\r\n```\r\n\r\nFurthermore, your check for green is wrong. It should be: `status[i] == 0`\r\n\r\n```java\r\nvoid testGreenButtons() {\r\n    int greenButtons = 0;\r\n    for (int i = 0; i &lt; 6; i++) {\r\n        if (status[i] == 0) {\r\n            greenButtons += 1;\r\n        }\r\n    }\r\n    if (greenButtons == 6) {\r\n        lblStatus.setText(&quot;All Systems Go!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nTry:\r\n\r\n```java\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\n\r\npublic class SystemCheck extends JFrame {\r\n    static final int N = 6; // number of buttons\r\n\r\n    /**\r\n     * The main class just calls the constructor\r\n     */\r\n    public static void main(String[] args) {\r\n        new SystemCheck();\r\n    }\r\n\r\n    /** label to indicate status */\r\n    JLabel lblStatus;\r\n    /** button to test status */\r\n    JButton btnTest;\r\n    /** array of buttons to display */\r\n    JButton[] btns = new JButton[N];\r\n    /**\r\n     * integer array to control status of each light.\r\n     * 0= green, 1 = orange, 2 = red\r\n     */\r\n    int[] status = new int[N];\r\n\r\n    /**\r\n     * sets up JFrame and JButtons\r\n     * calls inner class ButtonListener.&lt;br&gt;\r\n     * The ButtonListener is added to btnTest as well as btns[]\r\n     */\r\n    SystemCheck() {\r\n        this.setTitle(&quot;System Check ...&quot;);\r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.setLocationRelativeTo(null);\r\n        JPanel panel = new JPanel(new GridLayout(1, 6, 3, 2));\r\n        panel.setBackground(Color.BLUE);\r\n\r\n        ButtonListener bl = new ButtonListener();\r\n        for (int i = 0; i &lt; N; i++) {\r\n            btns[i] = new JButton(&quot;&quot; + i);\r\n            btns[i].addActionListener(bl);\r\n            setButtons(&quot;&quot; + i);\r\n            panel.add(btns[i]);\r\n        }\r\n\r\n        JPanel panel2 = new JPanel();\r\n        btnTest = new JButton(&quot;TEST&quot;);\r\n        btnTest.addActionListener(bl);\r\n        lblStatus = new JLabel(&quot;nothing to report&quot;);\r\n        lblStatus.setBackground(Color.WHITE);\r\n        lblStatus.setOpaque(true);\r\n        panel2.add(btnTest);\r\n        panel2.add(lblStatus);\r\n        this.add(panel, BorderLayout.NORTH);\r\n        this.add(panel2, BorderLayout.SOUTH);\r\n        this.pack();\r\n        this.setLocationRelativeTo(null);\r\n        this.setVisible(true);\r\n    }\r\n\r\n    /** inner class to implement ActionListener */\r\n    private class ButtonListener implements ActionListener {\r\n\r\n        /**\r\n         * method to handle button clicking.\r\n         * Calls: testButtons(), setButtons()\r\n         * \r\n         * @param e the actionEvent created when any button is clicked\r\n         */\r\n        public void actionPerformed(ActionEvent e) {\r\n            if (e.getSource() == btnTest) {\r\n                testButtons();\r\n            } else {\r\n                setButtons(e.getActionCommand());\r\n            }\r\n            testGreenButtons();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Purpose: Changes the colours of the buttons based on the value of status[].\r\n     * Status[] is incremented each time that that button is clikced.\r\n     * Called from: actionPerformed\r\n     * \r\n     * @param cmd The number on the button\r\n     */\r\n    void setButtons(String cmd) {\r\n        int n = Integer.parseInt(cmd);\r\n        status[n]++;\r\n        if (status[n] &gt; 2)\r\n            status[n] = 0;\r\n        switch (status[n]) {\r\n            case 0:\r\n                btns[n].setBackground(Color.GREEN);\r\n                break;\r\n            case 1:\r\n                btns[n].setBackground(Color.ORANGE);\r\n                break;\r\n            case 2:\r\n                btns[n].setBackground(Color.RED);\r\n                break;\r\n            // default:\r\n            // status[n] = 0;\r\n            // btns[n].setBackground(Color.GREEN);\r\n        }\r\n        // testButtons();\r\n    }\r\n\r\n    /**\r\n     * TODO:\r\n     * This is the method that needs to be written to test &lt;br&gt;\r\n     * (a) if all the buttons are green (say &quot;All systems go!&quot;)&lt;br&gt;\r\n     * (b) if there are one or more reds (say &quot;Danger error!&quot;)&lt;br&gt;\r\n     * The code should be done by checking the value of status.\r\n     * Do your best to use a FOR LOOP instead of having to check 6 individual\r\n     * buttons.\r\n     * What if there were 200 buttons to check?\r\n     * \r\n     * Called from: actionPerformed()\r\n     */\r\n    void testButtons() {\r\n        boolean ok;\r\n        lblStatus.setText(&quot;Waiting ....&quot;);\r\n    }// this is the default message\r\n\r\n    // If all 6 buttons are green display &quot;All Systems Go!&quot;\r\n\r\n    // This is where I can add in code, this is what I have done.\r\n    void testGreenButtons() {\r\n        int greenButtons = 0;\r\n        for (int i = 0; i &lt; 6; i++) {\r\n            if (status[i] == 0) {\r\n                greenButtons += 1;\r\n            }\r\n        }\r\n        if (greenButtons == 6) {\r\n            lblStatus.setText(&quot;All Systems Go!&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou should really try to define a `Status` enum to encapsulate some of the logic:\r\n\r\n```java\r\nenum Status {\r\n    GREEN(Color.GREEN),\r\n    ORANGE(Color.ORANGE),\r\n    RED(Color.RED);\r\n\r\n    private Color color;\r\n\r\n    private Status(Color color) {\r\n        this.color = color;\r\n    }\r\n\r\n    public Color getColor() {\r\n        return color;\r\n    }\r\n}\r\n```\r\n\r\nHere is a cleaned-up example:\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.util.stream.Stream;\r\n\r\nimport javax.swing.*;\r\n\r\npublic class SystemCheck implements Runnable {\r\n    static final int BUTTON_COUNT = 6;\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(new SystemCheck());\r\n    }\r\n\r\n    private JLabel lblStatus;\r\n    private JButton btnTest;\r\n    private StatusButton[] btns = new StatusButton[BUTTON_COUNT];\r\n\r\n    private Container contentPane;\r\n\r\n    @Override\r\n    public void run() {\r\n        JFrame frame = new JFrame(&quot;System Check ...&quot;);\r\n        frame.setContentPane(contentPane);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.pack();\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    public SystemCheck() {\r\n        contentPane = new JPanel(new BorderLayout());\r\n\r\n        JPanel buttonPanel = new JPanel(new GridLayout(1, 6, 3, 2));\r\n        buttonPanel.setBackground(Color.BLUE);\r\n\r\n        ButtonListener bl = new ButtonListener();\r\n        for (int i = 0; i &lt; BUTTON_COUNT; i++) {\r\n            btns[i] = new StatusButton(Integer.toString(i), Status.GREEN);\r\n            btns[i].addActionListener(bl);\r\n            updateButton(Integer.toString(i));\r\n            buttonPanel.add(btns[i]);\r\n        }\r\n\r\n        JPanel infoPanel = new JPanel();\r\n        btnTest = new JButton(&quot;TEST&quot;);\r\n        btnTest.addActionListener(bl);\r\n        lblStatus = new JLabel(&quot;nothing to report&quot;);\r\n        lblStatus.setBackground(Color.WHITE);\r\n        lblStatus.setOpaque(true);\r\n        infoPanel.add(btnTest);\r\n        infoPanel.add(lblStatus);\r\n        contentPane.add(buttonPanel, BorderLayout.NORTH);\r\n        contentPane.add(infoPanel, BorderLayout.SOUTH);\r\n    }\r\n\r\n    private void updateButton(String cmd) {\r\n        btns[Integer.parseInt(cmd)].incrementStatus().syncColorWithStatus();\r\n    }\r\n\r\n    private void testButtons() {\r\n        lblStatus.setText(&quot;Waiting ....&quot;);\r\n    }\r\n\r\n    private void testGreenButtons() {\r\n        boolean allMatch = Stream.of(btns)\r\n                .map(StatusButton::getStatus)\r\n                .allMatch(status -&gt; status == Status.GREEN);\r\n        if (allMatch) {\r\n            lblStatus.setText(&quot;All Systems Go!&quot;);\r\n        }\r\n    }\r\n\r\n    private class ButtonListener implements ActionListener {\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            if (e.getSource() == btnTest) {\r\n                testButtons();\r\n            } else {\r\n                updateButton(e.getActionCommand());\r\n            }\r\n            testGreenButtons();\r\n        }\r\n    }\r\n\r\n    private class StatusButton extends JButton {\r\n        private Status status;\r\n\r\n        public StatusButton(String text) {\r\n            this(text, Status.RED);\r\n        }\r\n\r\n        public StatusButton(String text, Status status) {\r\n            super(text);\r\n            this.status = status;\r\n        }\r\n\r\n        public StatusButton syncColorWithStatus() {\r\n            this.setBackground(this.status.getColor());\r\n            return this;\r\n        }\r\n\r\n        public StatusButton incrementStatus() {\r\n            this.status = Status.nextStatus(this.status);\r\n            return this;\r\n        }\r\n\r\n        public void setStatus(Status status) {\r\n            this.status = status;\r\n        }\r\n\r\n        public Status getStatus() {\r\n            return status;\r\n        }\r\n    }\r\n\r\n    private enum Status {\r\n        GREEN(Color.GREEN),\r\n        ORANGE(Color.ORANGE),\r\n        RED(Color.RED);\r\n\r\n        private Color color;\r\n\r\n        private Status(Color color) {\r\n            this.color = color;\r\n        }\r\n\r\n        public Color getColor() {\r\n            return color;\r\n        }\r\n\r\n        public static Status nextStatus(Status status) {\r\n            switch (status) {\r\n                case GREEN:\r\n                    return ORANGE;\r\n                case ORANGE:\r\n                    return RED;\r\n                case RED:\r\n                    return GREEN;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIf you want to separate state from display, you can always create an application model. Each time an action is performed, the state gets updated in each method call. At the very end, you can &quot;render&quot; the new state changes:\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\nimport java.util.*;\r\nimport java.util.List;\r\n\r\npublic class SystemCheck implements Runnable {\r\n    static final int BUTTON_COUNT = 6;\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(new SystemCheck());\r\n    }\r\n\r\n    private AppModel appModel; // Application state\r\n    private Container contentPane;\r\n\r\n    @Override\r\n    public void run() {\r\n        JFrame frame = new JFrame(&quot;System Check ...&quot;);\r\n        frame.setContentPane(contentPane);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.pack();\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    public SystemCheck() {\r\n        appModel = new AppModel();\r\n        contentPane = new JPanel(new BorderLayout());\r\n\r\n        JPanel buttonPanel = new JPanel(new GridLayout(1, 6, 3, 2));\r\n        buttonPanel.setBackground(Color.BLUE);\r\n\r\n        ButtonListener buttonListener = new ButtonListener();\r\n        for (int i = 0; i &lt; BUTTON_COUNT; i++) {\r\n            JButton btn = new JButton(Integer.toString(i));\r\n            btn.addActionListener(buttonListener);\r\n            appModel.addButton(new StatusButtonModel(btn, Status.ORANGE));\r\n            buttonPanel.add(btn);\r\n        }\r\n\r\n        JPanel infoPanel = new JPanel();\r\n        JButton btnTest = new JButton(&quot;TEST&quot;);\r\n        btnTest.addActionListener(buttonListener);\r\n        appModel.setTestButton(new TextButtonModel(btnTest, btnTest.getText()));\r\n        JLabel lblStatus = new JLabel(&quot;nothing to report&quot;);\r\n        appModel.setStatusLabel(new LabelModel(lblStatus, lblStatus.getText()));\r\n\r\n        lblStatus.setBackground(Color.WHITE);\r\n        lblStatus.setOpaque(true);\r\n        infoPanel.add(btnTest);\r\n        infoPanel.add(lblStatus);\r\n        contentPane.add(buttonPanel, BorderLayout.NORTH);\r\n        contentPane.add(infoPanel, BorderLayout.SOUTH);\r\n        render();\r\n    }\r\n\r\n    private void updateButton(String cmd) {\r\n        int index = Integer.parseInt(cmd);\r\n        StatusButtonModel button = appModel.getButton(index);\r\n        button.setStatus(Status.nextStatus(button.getStatus()));\r\n    }\r\n\r\n    private void testButtons() {\r\n        appModel.getStatusLabel().setValue(&quot;Waiting ....&quot;);\r\n    }\r\n\r\n    private void testGreenButtons() {\r\n        boolean allMatch = appModel.getButtons()\r\n                .stream()\r\n                .map(StatusButtonModel::getStatus)\r\n                .allMatch(status -&gt; status == Status.GREEN);\r\n        if (allMatch) {\r\n            appModel.getStatusLabel().setValue(&quot;All Systems Go!&quot;);\r\n        }\r\n    }\r\n\r\n    protected void render() {\r\n        appModel.getStatusLabel().getComponentRef().setText(appModel.getStatusLabel().getValue());\r\n        appModel.getButtons().forEach(button -&gt; {\r\n            button.getComponentRef().setBackground(button.getStatus().getColor());\r\n        });\r\n    }\r\n\r\n    private class ButtonListener implements ActionListener {\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            if (e.getSource() == appModel.getTestButton().getComponentRef()) {\r\n                testButtons();\r\n            } else {\r\n                updateButton(e.getActionCommand());\r\n            }\r\n            testGreenButtons();\r\n            render();\r\n        }\r\n    }\r\n\r\n    private class AppModel {\r\n        private List&lt;StatusButtonModel&gt; buttons;\r\n        private LabelModel statusLabel;\r\n        private TextButtonModel testButton;\r\n\r\n        public AppModel() {\r\n            this.buttons = new ArrayList&lt;&gt;();\r\n            this.statusLabel = null;\r\n            this.testButton = null;\r\n        }\r\n\r\n        public void addButton(StatusButtonModel button) {\r\n            this.buttons.add(button);\r\n        }\r\n\r\n        public StatusButtonModel getButton(int index) {\r\n            return buttons.get(index);\r\n        }\r\n\r\n        public List&lt;StatusButtonModel&gt; getButtons() {\r\n            return buttons;\r\n        }\r\n\r\n        public LabelModel getStatusLabel() {\r\n            return statusLabel;\r\n        }\r\n\r\n        public void setStatusLabel(LabelModel statusLabel) {\r\n            this.statusLabel = statusLabel;\r\n        }\r\n\r\n        public TextButtonModel getTestButton() {\r\n            return testButton;\r\n        }\r\n\r\n        public void setTestButton(TextButtonModel testButton) {\r\n            this.testButton = testButton;\r\n        }\r\n    }\r\n\r\n    private class ComponentModel&lt;T extends JComponent&gt; {\r\n        private T componentRef;\r\n\r\n        private ComponentModel(T componentRef) {\r\n            this.componentRef = componentRef;\r\n        }\r\n\r\n        public T getComponentRef() {\r\n            return componentRef;\r\n        }\r\n    }\r\n\r\n    private class StatusButtonModel extends ComponentModel&lt;JButton&gt; {\r\n        private Status status;\r\n\r\n        public StatusButtonModel(JButton buttonRef, Status status) {\r\n            super(buttonRef);\r\n            this.status = status;\r\n        }\r\n\r\n        public Status getStatus() {\r\n            return status;\r\n        }\r\n\r\n        public void setStatus(Status status) {\r\n            this.status = status;\r\n        }\r\n    }\r\n\r\n    private class LabelModel extends ComponentModel&lt;JLabel&gt; {\r\n        private String value;\r\n\r\n        public LabelModel(JLabel labelRef, String value) {\r\n            super(labelRef);\r\n            this.value = value;\r\n        }\r\n\r\n        public String getValue() {\r\n            return value;\r\n        }\r\n\r\n        public void setValue(String value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\n    private class TextButtonModel extends ComponentModel&lt;JButton&gt; {\r\n        private String value;\r\n\r\n        public TextButtonModel(JButton buttonRef, String value) {\r\n            super(buttonRef);\r\n            this.value = value;\r\n        }\r\n\r\n        public String getValue() {\r\n            return value;\r\n        }\r\n\r\n        public void setValue(String value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\n    private enum Status {\r\n        GREEN(Color.GREEN),\r\n        ORANGE(Color.ORANGE),\r\n        RED(Color.RED);\r\n\r\n        private Color color;\r\n\r\n        private Status(Color color) {\r\n            this.color = color;\r\n        }\r\n\r\n        public Color getColor() {\r\n            return color;\r\n        }\r\n\r\n        public static Status nextStatus(Status status) {\r\n            switch (status) {\r\n                case GREEN:\r\n                    return ORANGE;\r\n                case ORANGE:\r\n                    return RED;\r\n                case RED:\r\n                    return GREEN;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n}\r\n```","title":"How to make a label print when all 6 buttons = the same status in java","body":"<p>You never call the <code>testGreenButtons</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void actionPerformed(ActionEvent e) {\n    // ...\n    testGreenButtons();\n}\n</code></pre>\n<p>Furthermore, your check for green is wrong. It should be: <code>status[i] == 0</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>void testGreenButtons() {\n    int greenButtons = 0;\n    for (int i = 0; i &lt; 6; i++) {\n        if (status[i] == 0) {\n            greenButtons += 1;\n        }\n    }\n    if (greenButtons == 6) {\n        lblStatus.setText(&quot;All Systems Go!&quot;);\n    }\n}\n</code></pre>\n<p>Try:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class SystemCheck extends JFrame {\n    static final int N = 6; // number of buttons\n\n    /**\n     * The main class just calls the constructor\n     */\n    public static void main(String[] args) {\n        new SystemCheck();\n    }\n\n    /** label to indicate status */\n    JLabel lblStatus;\n    /** button to test status */\n    JButton btnTest;\n    /** array of buttons to display */\n    JButton[] btns = new JButton[N];\n    /**\n     * integer array to control status of each light.\n     * 0= green, 1 = orange, 2 = red\n     */\n    int[] status = new int[N];\n\n    /**\n     * sets up JFrame and JButtons\n     * calls inner class ButtonListener.&lt;br&gt;\n     * The ButtonListener is added to btnTest as well as btns[]\n     */\n    SystemCheck() {\n        this.setTitle(&quot;System Check ...&quot;);\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.setLocationRelativeTo(null);\n        JPanel panel = new JPanel(new GridLayout(1, 6, 3, 2));\n        panel.setBackground(Color.BLUE);\n\n        ButtonListener bl = new ButtonListener();\n        for (int i = 0; i &lt; N; i++) {\n            btns[i] = new JButton(&quot;&quot; + i);\n            btns[i].addActionListener(bl);\n            setButtons(&quot;&quot; + i);\n            panel.add(btns[i]);\n        }\n\n        JPanel panel2 = new JPanel();\n        btnTest = new JButton(&quot;TEST&quot;);\n        btnTest.addActionListener(bl);\n        lblStatus = new JLabel(&quot;nothing to report&quot;);\n        lblStatus.setBackground(Color.WHITE);\n        lblStatus.setOpaque(true);\n        panel2.add(btnTest);\n        panel2.add(lblStatus);\n        this.add(panel, BorderLayout.NORTH);\n        this.add(panel2, BorderLayout.SOUTH);\n        this.pack();\n        this.setLocationRelativeTo(null);\n        this.setVisible(true);\n    }\n\n    /** inner class to implement ActionListener */\n    private class ButtonListener implements ActionListener {\n\n        /**\n         * method to handle button clicking.\n         * Calls: testButtons(), setButtons()\n         * \n         * @param e the actionEvent created when any button is clicked\n         */\n        public void actionPerformed(ActionEvent e) {\n            if (e.getSource() == btnTest) {\n                testButtons();\n            } else {\n                setButtons(e.getActionCommand());\n            }\n            testGreenButtons();\n        }\n    }\n\n    /**\n     * Purpose: Changes the colours of the buttons based on the value of status[].\n     * Status[] is incremented each time that that button is clikced.\n     * Called from: actionPerformed\n     * \n     * @param cmd The number on the button\n     */\n    void setButtons(String cmd) {\n        int n = Integer.parseInt(cmd);\n        status[n]++;\n        if (status[n] &gt; 2)\n            status[n] = 0;\n        switch (status[n]) {\n            case 0:\n                btns[n].setBackground(Color.GREEN);\n                break;\n            case 1:\n                btns[n].setBackground(Color.ORANGE);\n                break;\n            case 2:\n                btns[n].setBackground(Color.RED);\n                break;\n            // default:\n            // status[n] = 0;\n            // btns[n].setBackground(Color.GREEN);\n        }\n        // testButtons();\n    }\n\n    /**\n     * TODO:\n     * This is the method that needs to be written to test &lt;br&gt;\n     * (a) if all the buttons are green (say &quot;All systems go!&quot;)&lt;br&gt;\n     * (b) if there are one or more reds (say &quot;Danger error!&quot;)&lt;br&gt;\n     * The code should be done by checking the value of status.\n     * Do your best to use a FOR LOOP instead of having to check 6 individual\n     * buttons.\n     * What if there were 200 buttons to check?\n     * \n     * Called from: actionPerformed()\n     */\n    void testButtons() {\n        boolean ok;\n        lblStatus.setText(&quot;Waiting ....&quot;);\n    }// this is the default message\n\n    // If all 6 buttons are green display &quot;All Systems Go!&quot;\n\n    // This is where I can add in code, this is what I have done.\n    void testGreenButtons() {\n        int greenButtons = 0;\n        for (int i = 0; i &lt; 6; i++) {\n            if (status[i] == 0) {\n                greenButtons += 1;\n            }\n        }\n        if (greenButtons == 6) {\n            lblStatus.setText(&quot;All Systems Go!&quot;);\n        }\n    }\n}\n</code></pre>\n<p>You should really try to define a <code>Status</code> enum to encapsulate some of the logic:</p>\n<pre class=\"lang-java prettyprint-override\"><code>enum Status {\n    GREEN(Color.GREEN),\n    ORANGE(Color.ORANGE),\n    RED(Color.RED);\n\n    private Color color;\n\n    private Status(Color color) {\n        this.color = color;\n    }\n\n    public Color getColor() {\n        return color;\n    }\n}\n</code></pre>\n<p>Here is a cleaned-up example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.util.stream.Stream;\n\nimport javax.swing.*;\n\npublic class SystemCheck implements Runnable {\n    static final int BUTTON_COUNT = 6;\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new SystemCheck());\n    }\n\n    private JLabel lblStatus;\n    private JButton btnTest;\n    private StatusButton[] btns = new StatusButton[BUTTON_COUNT];\n\n    private Container contentPane;\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;System Check ...&quot;);\n        frame.setContentPane(contentPane);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    public SystemCheck() {\n        contentPane = new JPanel(new BorderLayout());\n\n        JPanel buttonPanel = new JPanel(new GridLayout(1, 6, 3, 2));\n        buttonPanel.setBackground(Color.BLUE);\n\n        ButtonListener bl = new ButtonListener();\n        for (int i = 0; i &lt; BUTTON_COUNT; i++) {\n            btns[i] = new StatusButton(Integer.toString(i), Status.GREEN);\n            btns[i].addActionListener(bl);\n            updateButton(Integer.toString(i));\n            buttonPanel.add(btns[i]);\n        }\n\n        JPanel infoPanel = new JPanel();\n        btnTest = new JButton(&quot;TEST&quot;);\n        btnTest.addActionListener(bl);\n        lblStatus = new JLabel(&quot;nothing to report&quot;);\n        lblStatus.setBackground(Color.WHITE);\n        lblStatus.setOpaque(true);\n        infoPanel.add(btnTest);\n        infoPanel.add(lblStatus);\n        contentPane.add(buttonPanel, BorderLayout.NORTH);\n        contentPane.add(infoPanel, BorderLayout.SOUTH);\n    }\n\n    private void updateButton(String cmd) {\n        btns[Integer.parseInt(cmd)].incrementStatus().syncColorWithStatus();\n    }\n\n    private void testButtons() {\n        lblStatus.setText(&quot;Waiting ....&quot;);\n    }\n\n    private void testGreenButtons() {\n        boolean allMatch = Stream.of(btns)\n                .map(StatusButton::getStatus)\n                .allMatch(status -&gt; status == Status.GREEN);\n        if (allMatch) {\n            lblStatus.setText(&quot;All Systems Go!&quot;);\n        }\n    }\n\n    private class ButtonListener implements ActionListener {\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            if (e.getSource() == btnTest) {\n                testButtons();\n            } else {\n                updateButton(e.getActionCommand());\n            }\n            testGreenButtons();\n        }\n    }\n\n    private class StatusButton extends JButton {\n        private Status status;\n\n        public StatusButton(String text) {\n            this(text, Status.RED);\n        }\n\n        public StatusButton(String text, Status status) {\n            super(text);\n            this.status = status;\n        }\n\n        public StatusButton syncColorWithStatus() {\n            this.setBackground(this.status.getColor());\n            return this;\n        }\n\n        public StatusButton incrementStatus() {\n            this.status = Status.nextStatus(this.status);\n            return this;\n        }\n\n        public void setStatus(Status status) {\n            this.status = status;\n        }\n\n        public Status getStatus() {\n            return status;\n        }\n    }\n\n    private enum Status {\n        GREEN(Color.GREEN),\n        ORANGE(Color.ORANGE),\n        RED(Color.RED);\n\n        private Color color;\n\n        private Status(Color color) {\n            this.color = color;\n        }\n\n        public Color getColor() {\n            return color;\n        }\n\n        public static Status nextStatus(Status status) {\n            switch (status) {\n                case GREEN:\n                    return ORANGE;\n                case ORANGE:\n                    return RED;\n                case RED:\n                    return GREEN;\n            }\n            return null;\n        }\n    }\n}\n</code></pre>\n<p>If you want to separate state from display, you can always create an application model. Each time an action is performed, the state gets updated in each method call. At the very end, you can &quot;render&quot; the new state changes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport java.util.*;\nimport java.util.List;\n\npublic class SystemCheck implements Runnable {\n    static final int BUTTON_COUNT = 6;\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new SystemCheck());\n    }\n\n    private AppModel appModel; // Application state\n    private Container contentPane;\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;System Check ...&quot;);\n        frame.setContentPane(contentPane);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    public SystemCheck() {\n        appModel = new AppModel();\n        contentPane = new JPanel(new BorderLayout());\n\n        JPanel buttonPanel = new JPanel(new GridLayout(1, 6, 3, 2));\n        buttonPanel.setBackground(Color.BLUE);\n\n        ButtonListener buttonListener = new ButtonListener();\n        for (int i = 0; i &lt; BUTTON_COUNT; i++) {\n            JButton btn = new JButton(Integer.toString(i));\n            btn.addActionListener(buttonListener);\n            appModel.addButton(new StatusButtonModel(btn, Status.ORANGE));\n            buttonPanel.add(btn);\n        }\n\n        JPanel infoPanel = new JPanel();\n        JButton btnTest = new JButton(&quot;TEST&quot;);\n        btnTest.addActionListener(buttonListener);\n        appModel.setTestButton(new TextButtonModel(btnTest, btnTest.getText()));\n        JLabel lblStatus = new JLabel(&quot;nothing to report&quot;);\n        appModel.setStatusLabel(new LabelModel(lblStatus, lblStatus.getText()));\n\n        lblStatus.setBackground(Color.WHITE);\n        lblStatus.setOpaque(true);\n        infoPanel.add(btnTest);\n        infoPanel.add(lblStatus);\n        contentPane.add(buttonPanel, BorderLayout.NORTH);\n        contentPane.add(infoPanel, BorderLayout.SOUTH);\n        render();\n    }\n\n    private void updateButton(String cmd) {\n        int index = Integer.parseInt(cmd);\n        StatusButtonModel button = appModel.getButton(index);\n        button.setStatus(Status.nextStatus(button.getStatus()));\n    }\n\n    private void testButtons() {\n        appModel.getStatusLabel().setValue(&quot;Waiting ....&quot;);\n    }\n\n    private void testGreenButtons() {\n        boolean allMatch = appModel.getButtons()\n                .stream()\n                .map(StatusButtonModel::getStatus)\n                .allMatch(status -&gt; status == Status.GREEN);\n        if (allMatch) {\n            appModel.getStatusLabel().setValue(&quot;All Systems Go!&quot;);\n        }\n    }\n\n    protected void render() {\n        appModel.getStatusLabel().getComponentRef().setText(appModel.getStatusLabel().getValue());\n        appModel.getButtons().forEach(button -&gt; {\n            button.getComponentRef().setBackground(button.getStatus().getColor());\n        });\n    }\n\n    private class ButtonListener implements ActionListener {\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            if (e.getSource() == appModel.getTestButton().getComponentRef()) {\n                testButtons();\n            } else {\n                updateButton(e.getActionCommand());\n            }\n            testGreenButtons();\n            render();\n        }\n    }\n\n    private class AppModel {\n        private List&lt;StatusButtonModel&gt; buttons;\n        private LabelModel statusLabel;\n        private TextButtonModel testButton;\n\n        public AppModel() {\n            this.buttons = new ArrayList&lt;&gt;();\n            this.statusLabel = null;\n            this.testButton = null;\n        }\n\n        public void addButton(StatusButtonModel button) {\n            this.buttons.add(button);\n        }\n\n        public StatusButtonModel getButton(int index) {\n            return buttons.get(index);\n        }\n\n        public List&lt;StatusButtonModel&gt; getButtons() {\n            return buttons;\n        }\n\n        public LabelModel getStatusLabel() {\n            return statusLabel;\n        }\n\n        public void setStatusLabel(LabelModel statusLabel) {\n            this.statusLabel = statusLabel;\n        }\n\n        public TextButtonModel getTestButton() {\n            return testButton;\n        }\n\n        public void setTestButton(TextButtonModel testButton) {\n            this.testButton = testButton;\n        }\n    }\n\n    private class ComponentModel&lt;T extends JComponent&gt; {\n        private T componentRef;\n\n        private ComponentModel(T componentRef) {\n            this.componentRef = componentRef;\n        }\n\n        public T getComponentRef() {\n            return componentRef;\n        }\n    }\n\n    private class StatusButtonModel extends ComponentModel&lt;JButton&gt; {\n        private Status status;\n\n        public StatusButtonModel(JButton buttonRef, Status status) {\n            super(buttonRef);\n            this.status = status;\n        }\n\n        public Status getStatus() {\n            return status;\n        }\n\n        public void setStatus(Status status) {\n            this.status = status;\n        }\n    }\n\n    private class LabelModel extends ComponentModel&lt;JLabel&gt; {\n        private String value;\n\n        public LabelModel(JLabel labelRef, String value) {\n            super(labelRef);\n            this.value = value;\n        }\n\n        public String getValue() {\n            return value;\n        }\n\n        public void setValue(String value) {\n            this.value = value;\n        }\n    }\n\n    private class TextButtonModel extends ComponentModel&lt;JButton&gt; {\n        private String value;\n\n        public TextButtonModel(JButton buttonRef, String value) {\n            super(buttonRef);\n            this.value = value;\n        }\n\n        public String getValue() {\n            return value;\n        }\n\n        public void setValue(String value) {\n            this.value = value;\n        }\n    }\n\n    private enum Status {\n        GREEN(Color.GREEN),\n        ORANGE(Color.ORANGE),\n        RED(Color.RED);\n\n        private Color color;\n\n        private Status(Color color) {\n            this.color = color;\n        }\n\n        public Color getColor() {\n            return color;\n        }\n\n        public static Status nextStatus(Status status) {\n            switch (status) {\n                case GREEN:\n                    return ORANGE;\n                case ORANGE:\n                    return RED;\n                case RED:\n                    return GREEN;\n            }\n            return null;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27948642,"reputation":1,"user_id":21343042,"display_name":"Nick Slack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75652942,"answer_count":1,"score":0,"last_activity_date":1678122951,"creation_date":1678116608,"question_id":75652736,"body_markdown":"Like the title says I need to make a label print when all 6 buttons = the same status in java. I was given code and am supposed to add onto the bottom to change the label if all the buttons status is green or 0 for the case. \r\n\r\n\r\n\r\nHere is the code:\r\n\r\n```\r\npublic class SystemCheck extends JFrame {\r\n\tstatic final int N = 6; // number of buttons\r\n\t\r\n\t/**\r\n\tThe main class just calls the constructor\r\n\t*/\r\n\tpublic static void main(String[] args) {\r\n\t\tnew SystemCheck();\r\n\t}\r\n\r\n\t/** label to indicate status */\r\n\tJLabel lblStatus;\r\n\t/** button to test status */\r\n\tJButton btnTest;\r\n\t/** array of buttons to display */\r\n\tJButton[] btns = new JButton[N];\r\n\t/** integer array to control status of each light.\r\n\t0= green, 1 = orange, 2 = red */\r\n\tint[] status = new int[N];\r\n\r\n\t/** sets up JFrame and JButtons\r\n\tcalls inner class ButtonListener.&lt;br&gt;\r\n\tThe ButtonListener is added to btnTest as well as btns[] */\r\n\tSystemCheck() {\r\n\t\tthis.setTitle(&quot;System Check ...&quot;);\r\n\t\tthis.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n\t\tthis.setLocationRelativeTo(null);\r\n\t\tJPanel panel = new JPanel(new GridLayout(1,6,3,2));\r\n\t\tpanel.setBackground(Color.BLUE);\r\n\t\t\t\t\t\r\n\t\tButtonListener bl = new ButtonListener();\r\n\t\tfor (int i=0; i &lt; N; i++) {\r\n\t\t\tbtns[i] = new JButton(&quot;&quot;+i);\r\n\t\t\tbtns[i].addActionListener(bl);\r\n\t\t\tsetButtons(&quot;&quot; + i);\r\n\t\t\tpanel.add(btns[i]);\r\n\t\t}\r\n\r\n\t\tJPanel panel2 = new JPanel();\r\n\t\tbtnTest = new JButton(&quot;TEST&quot;);\r\n\t\tbtnTest.addActionListener(bl);\r\n\t\tlblStatus = new JLabel(&quot;nothing to report&quot;);\r\n\t\tlblStatus.setBackground(Color.WHITE);\r\n\t\tlblStatus.setOpaque(true);\r\n\t\tpanel2.add(btnTest);\r\n\t\tpanel2.add(lblStatus);\r\n\t\tthis.add(panel,BorderLayout.NORTH);\r\n\t\tthis.add(panel2,BorderLayout.SOUTH);\r\n\t\tthis.pack();\r\n\t\tthis.setLocationRelativeTo(null);\r\n\t\tthis.setVisible(true);\r\n\t}\r\n\r\n\t/** inner class to implement ActionListener */\r\n\tprivate class ButtonListener implements ActionListener {\r\n\t\t\r\n\t\t/** method to handle button clicking.\r\n\t\tCalls: testButtons(), setButtons()\r\n\t\t@param e the actionEvent created when any button is clicked */\r\n\t\tpublic void actionPerformed (ActionEvent e) {\r\n\t\t\tif (e.getSource() == btnTest) {\r\n\t\t\t\ttestButtons();\r\n\t\t\t} else {\r\n\t\t\t\tsetButtons(e.getActionCommand());\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t}\r\n\t/**\r\n\tPurpose: Changes the colours of the buttons based on the value of status[].\r\n\t\t\tStatus[] is incremented each time that that button is clikced.\r\n\tCalled from: actionPerformed\r\n\t@param  cmd The number on the button\r\n\t*/\r\n\tvoid setButtons(String cmd){\r\n\t\tint n = Integer.parseInt(cmd);\r\n\t\tstatus[n]++;\r\n\t\tif (status[n] &gt; 2) status[n] = 0;\r\n\t\tswitch (status[n]){\r\n\t\t\tcase 0:\r\n\t\t\t\tbtns[n].setBackground(Color.GREEN);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tbtns[n].setBackground(Color.ORANGE);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tbtns[n].setBackground(Color.RED);\r\n\t\t\t\tbreak;\r\n//\t\t\tdefault: \r\n//\t\t\t\tstatus[n] = 0;\r\n//\t\t\t\tbtns[n].setBackground(Color.GREEN);\r\n\t\t}\t\t\r\n\t\t// testButtons();\r\n\t}\r\n\t\r\n\t/** TODO: \r\n\t * This is the method that needs to be written to test &lt;br&gt;\r\n\t(a) if all the buttons are green (say &quot;All systems go!&quot;)&lt;br&gt;\r\n\t(b) if there are one or more reds (say &quot;Danger error!&quot;)&lt;br&gt;\r\n\tThe code should be done by checking the value of status.\r\n\tDo your best to use a FOR LOOP instead of having to check 6 individual buttons.\r\n\tWhat if there were 200 buttons to check?\r\n\t\r\n\tCalled from: actionPerformed()\t*/\r\n\tvoid testButtons(){\r\n\t\tboolean ok;\r\n\t\tlblStatus.setText(&quot;Waiting ....&quot;);\r\n\t}//this is the default message\r\n\r\n\t\t\r\n\t\t//If all 6 buttons are green display &quot;All Systems Go!&quot;\r\n\r\n//This is where I can add in code, this is what I have done.\r\n\tvoid testGreenButtons(){\r\n\t\tint greenButtons = 0;\r\n\t\tfor(int i = 0; i &lt; 6; i++) {\r\n\t\t   if(btns.equals(status[0])) {\r\n\t\t\tgreenButtons+=1;\r\n\t\t   \t\t}\r\n\t\t   if(greenButtons == 6) {\r\n\t\t\t   \tlblStatus.setText(&quot;All Systems Go!&quot;);\r\n\t\t   }\r\n\t  }\r\n   }\r\n}\r\n```\r\n\r\nIt says that I need to check the value of status to do this. I have tried everything I can think of however and it is still not working. Thanks for any answers.","title":"How to make a label print when all 6 buttons = the same status in java","body":"<p>Like the title says I need to make a label print when all 6 buttons = the same status in java. I was given code and am supposed to add onto the bottom to change the label if all the buttons status is green or 0 for the case.</p>\n<p>Here is the code:</p>\n<pre><code>public class SystemCheck extends JFrame {\n    static final int N = 6; // number of buttons\n    \n    /**\n    The main class just calls the constructor\n    */\n    public static void main(String[] args) {\n        new SystemCheck();\n    }\n\n    /** label to indicate status */\n    JLabel lblStatus;\n    /** button to test status */\n    JButton btnTest;\n    /** array of buttons to display */\n    JButton[] btns = new JButton[N];\n    /** integer array to control status of each light.\n    0= green, 1 = orange, 2 = red */\n    int[] status = new int[N];\n\n    /** sets up JFrame and JButtons\n    calls inner class ButtonListener.&lt;br&gt;\n    The ButtonListener is added to btnTest as well as btns[] */\n    SystemCheck() {\n        this.setTitle(&quot;System Check ...&quot;);\n        this.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n        this.setLocationRelativeTo(null);\n        JPanel panel = new JPanel(new GridLayout(1,6,3,2));\n        panel.setBackground(Color.BLUE);\n                    \n        ButtonListener bl = new ButtonListener();\n        for (int i=0; i &lt; N; i++) {\n            btns[i] = new JButton(&quot;&quot;+i);\n            btns[i].addActionListener(bl);\n            setButtons(&quot;&quot; + i);\n            panel.add(btns[i]);\n        }\n\n        JPanel panel2 = new JPanel();\n        btnTest = new JButton(&quot;TEST&quot;);\n        btnTest.addActionListener(bl);\n        lblStatus = new JLabel(&quot;nothing to report&quot;);\n        lblStatus.setBackground(Color.WHITE);\n        lblStatus.setOpaque(true);\n        panel2.add(btnTest);\n        panel2.add(lblStatus);\n        this.add(panel,BorderLayout.NORTH);\n        this.add(panel2,BorderLayout.SOUTH);\n        this.pack();\n        this.setLocationRelativeTo(null);\n        this.setVisible(true);\n    }\n\n    /** inner class to implement ActionListener */\n    private class ButtonListener implements ActionListener {\n        \n        /** method to handle button clicking.\n        Calls: testButtons(), setButtons()\n        @param e the actionEvent created when any button is clicked */\n        public void actionPerformed (ActionEvent e) {\n            if (e.getSource() == btnTest) {\n                testButtons();\n            } else {\n                setButtons(e.getActionCommand());\n            }       \n        }\n    }\n    /**\n    Purpose: Changes the colours of the buttons based on the value of status[].\n            Status[] is incremented each time that that button is clikced.\n    Called from: actionPerformed\n    @param  cmd The number on the button\n    */\n    void setButtons(String cmd){\n        int n = Integer.parseInt(cmd);\n        status[n]++;\n        if (status[n] &gt; 2) status[n] = 0;\n        switch (status[n]){\n            case 0:\n                btns[n].setBackground(Color.GREEN);\n                break;\n            case 1:\n                btns[n].setBackground(Color.ORANGE);\n                break;\n            case 2:\n                btns[n].setBackground(Color.RED);\n                break;\n//          default: \n//              status[n] = 0;\n//              btns[n].setBackground(Color.GREEN);\n        }       \n        // testButtons();\n    }\n    \n    /** TODO: \n     * This is the method that needs to be written to test &lt;br&gt;\n    (a) if all the buttons are green (say &quot;All systems go!&quot;)&lt;br&gt;\n    (b) if there are one or more reds (say &quot;Danger error!&quot;)&lt;br&gt;\n    The code should be done by checking the value of status.\n    Do your best to use a FOR LOOP instead of having to check 6 individual buttons.\n    What if there were 200 buttons to check?\n    \n    Called from: actionPerformed()  */\n    void testButtons(){\n        boolean ok;\n        lblStatus.setText(&quot;Waiting ....&quot;);\n    }//this is the default message\n\n        \n        //If all 6 buttons are green display &quot;All Systems Go!&quot;\n\n//This is where I can add in code, this is what I have done.\n    void testGreenButtons(){\n        int greenButtons = 0;\n        for(int i = 0; i &lt; 6; i++) {\n           if(btns.equals(status[0])) {\n            greenButtons+=1;\n                }\n           if(greenButtons == 6) {\n                lblStatus.setText(&quot;All Systems Go!&quot;);\n           }\n      }\n   }\n}\n</code></pre>\n<p>It says that I need to check the value of status to do this. I have tried everything I can think of however and it is still not working. Thanks for any answers.</p>\n"},{"tags":["java","mysql","spring","jpa"],"answers":[{"comments":[{"owner":{"account_id":26230351,"reputation":7,"user_id":19906410,"display_name":"New_dev"},"score":0,"creation_date":1678122172,"post_id":75653596,"comment_id":133468173,"body_markdown":"No, this still gives a ` No converter found capable of converting from type [org.springframework.data.jpa.repository.query.AbstractJpaQuery$TupleConverter$TupleBackedMap] to type [com.upyouth.dto.TransferTest]` error","body":"No, this still gives a ` No converter found capable of converting from type [org.springframework.data.jpa.repository.query.AbstractJpaQu&zwnj;&#8203;ery$TupleConverter$T&zwnj;&#8203;upleBackedMap] to type [com.upyouth.dto.TransferTest]` error"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1678122348,"post_id":75653596,"comment_id":133468229,"body_markdown":"@New_dev I&#39;ve edited my answer, also stop the application and run mvn clean install before retesting it","body":"@New_dev I&#39;ve edited my answer, also stop the application and run mvn clean install before retesting it"}],"tags":[],"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678122291,"creation_date":1678121433,"answer_id":75653596,"question_id":75653045,"body_markdown":"For native query you have to use  Interface based Projection: \r\n\r\nfor interface-based projection modify `TransferTest` to be like this:\r\n\r\n\r\n    public interface TransferTest {\r\n    \r\n        Integer getTransfer_to();\r\n        String getUsername();\r\n    }\r\n\r\n\r\nand make sure also to use projection in the SQL query:\r\n\r\n    @Repository\r\n    public interface HomeTransferPageRepository extends JpaRepository&lt;TransferEntity, Integer&gt; {\r\n        \r\n            @Query(value=&quot;select DISTINCT transfer_to as transfer_to, username as username from (select transfer_to, transaction_date, username from transfers_table left join registration_entity on transfers_table.transfer_to = registration_entity.id where transfer_from= :transfer_from ORDER BY transaction_date DESC LIMIT 10 )  as x&quot;, nativeQuery=true)\r\n            public ArrayList&lt;TransferTest&gt; getTransferRequests(Integer transfer_from);\r\n        \r\n        }\r\n\r\n","title":"No converter found capable of converting from type [query.AbstractJpaQuery$TupleConverter$TupleBackedMap] to type [com.name.dto.TransferTest]","body":"<p>For native query you have to use  Interface based Projection:</p>\n<p>for interface-based projection modify <code>TransferTest</code> to be like this:</p>\n<pre><code>public interface TransferTest {\n\n    Integer getTransfer_to();\n    String getUsername();\n}\n</code></pre>\n<p>and make sure also to use projection in the SQL query:</p>\n<pre><code>@Repository\npublic interface HomeTransferPageRepository extends JpaRepository&lt;TransferEntity, Integer&gt; {\n    \n        @Query(value=&quot;select DISTINCT transfer_to as transfer_to, username as username from (select transfer_to, transaction_date, username from transfers_table left join registration_entity on transfers_table.transfer_to = registration_entity.id where transfer_from= :transfer_from ORDER BY transaction_date DESC LIMIT 10 )  as x&quot;, nativeQuery=true)\n        public ArrayList&lt;TransferTest&gt; getTransferRequests(Integer transfer_from);\n    \n    }\n</code></pre>\n"}],"owner":{"account_id":26230351,"reputation":7,"user_id":19906410,"display_name":"New_dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":609,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75653596,"answer_count":1,"score":0,"last_activity_date":1678122291,"creation_date":1678118346,"question_id":75653045,"body_markdown":"Currently I have a query in my Repository where I&#39;m returning 2 columns from the database.\r\n\r\n    @Repository\r\n    public interface HomeTransferPageRepository extends JpaRepository&lt;TransferEntity, Integer&gt; {\r\n    \t\r\n    \t@Query(value=&quot;select DISTINCT transfer_to, username from (select transfer_to, transaction_date, username from transfers_table left join registration_entity on transfers_table.transfer_to = registration_entity.id where transfer_from= :transfer_from ORDER BY transaction_date DESC LIMIT 10 )  as x&quot;, nativeQuery=true)\r\n    \tpublic ArrayList&lt;TransferTest&gt; getTransferRequests(Integer transfer_from);\r\n    \r\n    }\r\n\r\nNow TransferTest here is my dto:\r\n\r\n    @Data\r\n    public class TransferTest {\r\n    \r\n    \tprivate Integer transfer_to;\r\n    \tprivate String username;\r\n    }\r\n\r\nThis is my DAO\r\n\r\n    @Autowired\r\n    \tprivate HomeTransferPageRepository homeTransferPageRepository;\r\n    \t\r\n    \tpublic ArrayList&lt;TransferTest&gt; getSentTransfers(TransferEntity entity) {\r\n    \t\treturn homeTransferPageRepository.getTransferRequests(entity.getId());\r\n    \t}\r\n\r\nAnd This is my service class:\r\n\r\n    @Autowired\r\n    \tprivate SendMoneyDAOImpl daoImpl;\r\n    \tprivate ModelMapper modelMapper = new ModelMapper();\r\n    \t\r\n    \t@Override\r\n    \tpublic ArrayList&lt;TransferTest&gt; getSentTransfers(TransferRequest request) {\r\n    \t\tTransferEntity entity = modelMapper.map(request, TransferEntity.class);\r\n    \t\tArrayList&lt;TransferTest&gt; getTransfers = daoImpl.getSentTransfers(entity);\r\n    \t\treturn getTransfers;\r\n    \t}\r\n\r\nAnd this is my transferEntity:\r\n\r\n    @Entity\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;transfers_table&quot;)\r\n    public class TransferEntity {\r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \tprivate Integer Id;\r\n    \tprivate Integer transfer_from;\r\n    \tprivate Integer transfer_to;\r\n    \tprivate Double transaction_amount;\r\n    \tprivate Date transaction_date;\r\n    \t\r\n    }\r\n\r\nAnd this gives me the following error when I run it:\r\n\r\nNo converter found capable of converting from type \\[org.springframework.data.jpa.repository.query.AbstractJpaQuery$TupleConverter$TupleBackedMap\\] to type \\[com.name.dto.TransferTest\\]","title":"No converter found capable of converting from type [query.AbstractJpaQuery$TupleConverter$TupleBackedMap] to type [com.name.dto.TransferTest]","body":"<p>Currently I have a query in my Repository where I'm returning 2 columns from the database.</p>\n<pre><code>@Repository\npublic interface HomeTransferPageRepository extends JpaRepository&lt;TransferEntity, Integer&gt; {\n    \n    @Query(value=&quot;select DISTINCT transfer_to, username from (select transfer_to, transaction_date, username from transfers_table left join registration_entity on transfers_table.transfer_to = registration_entity.id where transfer_from= :transfer_from ORDER BY transaction_date DESC LIMIT 10 )  as x&quot;, nativeQuery=true)\n    public ArrayList&lt;TransferTest&gt; getTransferRequests(Integer transfer_from);\n\n}\n</code></pre>\n<p>Now TransferTest here is my dto:</p>\n<pre><code>@Data\npublic class TransferTest {\n\n    private Integer transfer_to;\n    private String username;\n}\n</code></pre>\n<p>This is my DAO</p>\n<pre><code>@Autowired\n    private HomeTransferPageRepository homeTransferPageRepository;\n    \n    public ArrayList&lt;TransferTest&gt; getSentTransfers(TransferEntity entity) {\n        return homeTransferPageRepository.getTransferRequests(entity.getId());\n    }\n</code></pre>\n<p>And This is my service class:</p>\n<pre><code>@Autowired\n    private SendMoneyDAOImpl daoImpl;\n    private ModelMapper modelMapper = new ModelMapper();\n    \n    @Override\n    public ArrayList&lt;TransferTest&gt; getSentTransfers(TransferRequest request) {\n        TransferEntity entity = modelMapper.map(request, TransferEntity.class);\n        ArrayList&lt;TransferTest&gt; getTransfers = daoImpl.getSentTransfers(entity);\n        return getTransfers;\n    }\n</code></pre>\n<p>And this is my transferEntity:</p>\n<pre><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = &quot;transfers_table&quot;)\npublic class TransferEntity {\n    \n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Integer Id;\n    private Integer transfer_from;\n    private Integer transfer_to;\n    private Double transaction_amount;\n    private Date transaction_date;\n    \n}\n</code></pre>\n<p>And this gives me the following error when I run it:</p>\n<p>No converter found capable of converting from type [org.springframework.data.jpa.repository.query.AbstractJpaQuery$TupleConverter$TupleBackedMap] to type [com.name.dto.TransferTest]</p>\n"},{"tags":["java","junit","powermock","powermockito"],"comments":[{"owner":{"account_id":874324,"reputation":105,"user_id":2003379,"display_name":"Kevin Van Dyck"},"score":2,"creation_date":1540377852,"post_id":52966897,"comment_id":92840225,"body_markdown":"Clicking that github link, it shows the last commit is 2 days ago ...","body":"Clicking that github link, it shows the last commit is 2 days ago ..."},{"owner":{"account_id":238954,"reputation":4355,"user_id":508219,"accept_rate":86,"display_name":"malejpavouk"},"score":1,"creation_date":1540378581,"post_id":52966897,"comment_id":92840661,"body_markdown":"Made by someone managing EasyMock integration most probably... The last release of powermock was more than year ago a patch release. Last minor more than 2 years ago. GitHub question about version 2 never responded to etc...","body":"Made by someone managing EasyMock integration most probably... The last release of powermock was more than year ago a patch release. Last minor more than 2 years ago. GitHub question about version 2 never responded to etc..."},{"owner":{"account_id":43861,"reputation":59786,"user_id":128397,"accept_rate":82,"display_name":"Daniel Pryden"},"score":3,"creation_date":1540472219,"post_id":52966897,"comment_id":92884865,"body_markdown":"As an aside: PowerMock is a powerful tool, but I would strongly recommend using it only as a weapon of last resort. If you can migrate away from needing to mock static members to a more testable design, you reduce your dependence on PowerMock and also make your code easier to maintain in the long term.","body":"As an aside: PowerMock is a powerful tool, but I would strongly recommend using it only as a weapon of last resort. If you can migrate away from needing to mock static members to a more testable design, you reduce your dependence on PowerMock and also make your code easier to maintain in the long term."},{"owner":{"account_id":238954,"reputation":4355,"user_id":508219,"accept_rate":86,"display_name":"malejpavouk"},"score":0,"creation_date":1540475106,"post_id":52966897,"comment_id":92886894,"body_markdown":"Yeah, I totally agree. mockStatic() etc. is really a bad idea...","body":"Yeah, I totally agree. mockStatic() etc. is really a bad idea..."},{"owner":{"account_id":67136,"reputation":1340,"user_id":196626,"accept_rate":67,"display_name":"ThatAintWorking"},"score":1,"creation_date":1562957923,"post_id":52966897,"comment_id":100557722,"body_markdown":"2019-04-21: PowerMock 2.0.2 has been released, so not dead yet, feeling much better. It still doesn&#39;t support JUnit 5, though.","body":"2019-04-21: PowerMock 2.0.2 has been released, so not dead yet, feeling much better. It still doesn&#39;t support JUnit 5, though."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1584123100,"post_id":52966897,"comment_id":107349887,"body_markdown":"java9 : https://stackoverflow.com/q/50456726/592355","body":"java9 : <a href=\"https://stackoverflow.com/q/50456726/592355\">stackoverflow.com/q/50456726/592355</a>"}],"answers":[{"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1540550594,"post_id":52989748,"comment_id":92917519,"body_markdown":"I agree to all of what you said. Still, probably a helpful information for those who can&#39;t live without PowerMock.","body":"I agree to all of what you said. Still, probably a helpful information for those who can&#39;t live without PowerMock."},{"owner":{"account_id":1233847,"reputation":499,"user_id":1197880,"display_name":"rakehell"},"score":2,"creation_date":1601419490,"post_id":52989748,"comment_id":113401347,"body_markdown":"That workaround appears to only have limited success. It doesn&#39;t work in many cases. &lt;br&gt;  \n  \nSee: https://github.com/powermock/powermock/issues/1061  &lt;br&gt;\n  \nThis one will also sometimes work: &lt;br&gt;\n@PowerMockIgnore({&quot;javax.net.ssl.*&quot;, &quot;org.slf4j.*&quot;, &quot;javax.parsers.*&quot;, &quot;ch.qos.logback.*&quot;, &quot;jdk.xml.internal.*&quot;, &quot;com.sun.org.apache.xerces.*&quot;, &quot;javax.xml.*&quot;, &quot;org.xml.*&quot;, &quot;javax.management.*&quot;})","body":"That workaround appears to only have limited success. It doesn&#39;t work in many cases. &lt;br&gt;      See: <a href=\"https://github.com/powermock/powermock/issues/1061\" rel=\"nofollow noreferrer\">github.com/powermock/powermock/issues/1061</a>  &lt;br&gt;    This one will also sometimes work: &lt;br&gt; @PowerMockIgnore({&quot;javax.net.ssl.*&quot;, &quot;org.slf4j.*&quot;, &quot;javax.parsers.*&quot;, &quot;ch.qos.logback.*&quot;, &quot;jdk.xml.internal.*&quot;, &quot;com.sun.org.apache.xerces.*&quot;, &quot;javax.xml.*&quot;, &quot;org.xml.*&quot;, &quot;javax.management.*&quot;})"}],"tags":[],"owner":{"account_id":238954,"reputation":4355,"user_id":508219,"accept_rate":86,"display_name":"malejpavouk"},"comment_count":2,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1540471934,"creation_date":1540471934,"answer_id":52989748,"question_id":52966897,"body_markdown":"After one year of no releases, things are really moving in PowerMock. \r\n\r\nPowerMock 2.0.0-RC1 was released. And with PowerMockito 2.0.0-RC1\r\n+ `@PowerMockIgnore({&quot;com.sun.org.apache.xerces.*&quot;, &quot;javax.xml.*&quot;, &quot;org.xml.*&quot;, &quot;org.w3c.*&quot;})`\r\n\r\nThe tests work under Java 11. ","title":"PowerMock &amp; Java 11","body":"<p>After one year of no releases, things are really moving in PowerMock. </p>\n\n<p>PowerMock 2.0.0-RC1 was released. And with PowerMockito 2.0.0-RC1\n+ <code>@PowerMockIgnore({\"com.sun.org.apache.xerces.*\", \"javax.xml.*\", \"org.xml.*\", \"org.w3c.*\"})</code></p>\n\n<p>The tests work under Java 11. </p>\n"},{"comments":[{"owner":{"account_id":307264,"reputation":2065,"user_id":618465,"accept_rate":95,"display_name":"Navigatron"},"score":0,"creation_date":1632818277,"post_id":64394953,"comment_id":122589452,"body_markdown":"Note, spaces and double quotes are not allowed in the configuration.properties file. See: https://github.com/powermock/powermock/issues/989","body":"Note, spaces and double quotes are not allowed in the configuration.properties file. See: <a href=\"https://github.com/powermock/powermock/issues/989\" rel=\"nofollow noreferrer\">github.com/powermock/powermock/issues/989</a>"}],"tags":[],"owner":{"account_id":129401,"reputation":2460,"user_id":327961,"accept_rate":50,"display_name":"user327961"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652735481,"creation_date":1602874809,"answer_id":64394953,"question_id":52966897,"body_markdown":"If there are a lot of test classes to migrate to Java 11, it is possible to configure the ignores globally (only once in a configuration file): org/powermock/exntensions/configuration.properties\r\n\r\n    powermock.global-ignore=com.sun.org.apache.xerces.*,javax.xml.*,org.xml.*,org.w3c.*","title":"PowerMock &amp; Java 11","body":"<p>If there are a lot of test classes to migrate to Java 11, it is possible to configure the ignores globally (only once in a configuration file): org/powermock/exntensions/configuration.properties</p>\n<pre><code>powermock.global-ignore=com.sun.org.apache.xerces.*,javax.xml.*,org.xml.*,org.w3c.*\n</code></pre>\n"},{"comments":[{"owner":{"account_id":307264,"reputation":2065,"user_id":618465,"accept_rate":95,"display_name":"Navigatron"},"score":0,"creation_date":1632818460,"post_id":65843754,"comment_id":122589524,"body_markdown":"Note, spaces and double quotes are not allowed in the configuration.properties file. See: https://github.com/powermock/powermock/issues/989","body":"Note, spaces and double quotes are not allowed in the configuration.properties file. See: <a href=\"https://github.com/powermock/powermock/issues/989\" rel=\"nofollow noreferrer\">github.com/powermock/powermock/issues/989</a>"}],"tags":[],"owner":{"account_id":10923725,"reputation":59,"user_id":8029038,"display_name":"Chen Daocheng"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1614921371,"creation_date":1611312723,"answer_id":65843754,"question_id":52966897,"body_markdown":"add the properties: org/powermock/extensions/configuration.properties\r\n\r\nhttps://github.com/powermock/powermock/wiki/PowerMock-Configuration\r\nhttps://github.com/powermock/powermock-examples-maven/blob/master/global-ignore/src/test/resources/org/powermock/extensions/configuration.properties\r\n\r\ne.g. for maven/gradle:   src/test/resources/org/powermock/extensions/configuration.properties \r\n \r\n    powermock.global-ignore=javax.crypto.*,com.sun.xml.internal.stream.*,javax.xml.stream.*,javax.net.ssl.*,org.slf4j.*,javax.xml.parsers.*,ch.qos.logback.*,jdk.xml.internal.*,com.sun.org.apache.xerces.*,java.xml.*,org.xml.*,javax.management.*,org.w3c.dom.*\r\n\r\n","title":"PowerMock &amp; Java 11","body":"<p>add the properties: org/powermock/extensions/configuration.properties</p>\n<p><a href=\"https://github.com/powermock/powermock/wiki/PowerMock-Configuration\" rel=\"nofollow noreferrer\">https://github.com/powermock/powermock/wiki/PowerMock-Configuration</a>\n<a href=\"https://github.com/powermock/powermock-examples-maven/blob/master/global-ignore/src/test/resources/org/powermock/extensions/configuration.properties\" rel=\"nofollow noreferrer\">https://github.com/powermock/powermock-examples-maven/blob/master/global-ignore/src/test/resources/org/powermock/extensions/configuration.properties</a></p>\n<p>e.g. for maven/gradle:   src/test/resources/org/powermock/extensions/configuration.properties</p>\n<pre><code>powermock.global-ignore=javax.crypto.*,com.sun.xml.internal.stream.*,javax.xml.stream.*,javax.net.ssl.*,org.slf4j.*,javax.xml.parsers.*,ch.qos.logback.*,jdk.xml.internal.*,com.sun.org.apache.xerces.*,java.xml.*,org.xml.*,javax.management.*,org.w3c.dom.*\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1320596,"reputation":691,"user_id":1266513,"display_name":"arturvt"},"score":0,"creation_date":1620985961,"post_id":66226045,"comment_id":119365047,"body_markdown":"Thanks. Solved also issue with Android.","body":"Thanks. Solved also issue with Android."},{"owner":{"account_id":2249937,"reputation":124,"user_id":1982376,"display_name":"satrioaditya"},"score":1,"creation_date":1621999126,"post_id":66226045,"comment_id":119660520,"body_markdown":"in case someone still having trouble, this trick work for me for mockito 1.7.0 + powermock 1.7.0 project","body":"in case someone still having trouble, this trick work for me for mockito 1.7.0 + powermock 1.7.0 project"},{"owner":{"account_id":1703262,"reputation":1263,"user_id":1562850,"display_name":"Qadir Hussain"},"score":0,"creation_date":1678025272,"post_id":66226045,"comment_id":133449215,"body_markdown":"Where to add this annotation?","body":"Where to add this annotation?"},{"owner":{"account_id":302899,"reputation":1158,"user_id":611526,"display_name":"Bruno Bossola"},"score":0,"creation_date":1678122103,"post_id":66226045,"comment_id":133468153,"body_markdown":"On the top of the test class, I updated my answer, HTH","body":"On the top of the test class, I updated my answer, HTH"}],"tags":[],"owner":{"account_id":302899,"reputation":1158,"user_id":611526,"display_name":"Bruno Bossola"},"comment_count":4,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1678122261,"creation_date":1613484828,"answer_id":66226045,"question_id":52966897,"body_markdown":"Resolved with:\r\n\r\n    @PowerMockIgnore(&quot;jdk.internal.reflect.*&quot;)\r\n\r\nNothing else needed. You can put it on the top of the test class, with the other annotations, as in this example:\r\n\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PowerMockIgnore(&quot;jdk.internal.reflect.*&quot;)\r\n    @PrepareForTest({ File.class, FileSystemUtils.class })\r\n    public class MyTest {\r\n       ...\r\n    }\r\n\r\n","title":"PowerMock &amp; Java 11","body":"<p>Resolved with:</p>\n<pre><code>@PowerMockIgnore(&quot;jdk.internal.reflect.*&quot;)\n</code></pre>\n<p>Nothing else needed. You can put it on the top of the test class, with the other annotations, as in this example:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PowerMockIgnore(&quot;jdk.internal.reflect.*&quot;)\n@PrepareForTest({ File.class, FileSystemUtils.class })\npublic class MyTest {\n   ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12826580,"reputation":76,"user_id":9279380,"display_name":"Saurabh Chaudhari"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1627074488,"creation_date":1627074488,"answer_id":68505046,"question_id":52966897,"body_markdown":"From mockito version 3.4.0 it is possible to mock static methods. You can refer to https://www.baeldung.com/mockito-mock-static-methods for more info.","title":"PowerMock &amp; Java 11","body":"<p>From mockito version 3.4.0 it is possible to mock static methods. You can refer to <a href=\"https://www.baeldung.com/mockito-mock-static-methods\" rel=\"nofollow noreferrer\">https://www.baeldung.com/mockito-mock-static-methods</a> for more info.</p>\n"},{"comments":[{"owner":{"account_id":295514,"reputation":2157,"user_id":599971,"accept_rate":55,"display_name":"ejaenv"},"score":0,"creation_date":1694325924,"post_id":74232858,"comment_id":135874880,"body_markdown":"this solved the issue, thank you","body":"this solved the issue, thank you"}],"tags":[],"owner":{"account_id":9374511,"reputation":21,"user_id":8471807,"display_name":"Sachin Pete"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666947232,"creation_date":1666947232,"answer_id":74232858,"question_id":52966897,"body_markdown":"if your using java 11 then downgrade the dependency org.power.mock to 1.7.0.","title":"PowerMock &amp; Java 11","body":"<p>if your using java 11 then downgrade the dependency org.power.mock to 1.7.0.</p>\n"},{"tags":[],"owner":{"account_id":23029608,"reputation":11,"user_id":17149317,"display_name":"jngcs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670423884,"creation_date":1670423884,"answer_id":74718363,"question_id":52966897,"body_markdown":"If use reflect in JDK11, you might see some warning like &#39;An illegal reflective access operation has occurred&#39;, because reflect JDK inner API is illegal since JDK9, still you can use it with a warning above. \r\n \r\nTo fix the problem temporary, try to use `--add-exports` or `--add-opens` in your argLing.\r\n  \r\nFor example: `--add-opens java.xml/jdk.xml.internal=ALL-UNNAMED`\r\n\r\n&lt;!-- begin snippet: js hide: false console: false babel: false --&gt;\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n      &lt;configuration&gt;\r\n        &lt;argLine&gt;\r\n          @{argLine} --add-opens java.xml/jdk.xml.internal=ALL-UNNAMED \r\n        &lt;/argLine&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nFor more infomation, watch [--add-opens introduce][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-12F945EB-71D6-46AF-8C3D-D354FD0B1781","title":"PowerMock &amp; Java 11","body":"<p>If use reflect in JDK11, you might see some warning like 'An illegal reflective access operation has occurred', because reflect JDK inner API is illegal since JDK9, still you can use it with a warning above.</p>\n<p>To fix the problem temporary, try to use <code>--add-exports</code> or <code>--add-opens</code> in your argLing.</p>\n<p>For example: <code>--add-opens java.xml/jdk.xml.internal=ALL-UNNAMED</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0-M5&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;argLine&gt;\n      @{argLine} --add-opens java.xml/jdk.xml.internal=ALL-UNNAMED \n    &lt;/argLine&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>For more infomation, watch <a href=\"https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-12F945EB-71D6-46AF-8C3D-D354FD0B1781\" rel=\"nofollow noreferrer\">--add-opens introduce</a></p>\n"}],"owner":{"account_id":238954,"reputation":4355,"user_id":508219,"accept_rate":86,"display_name":"malejpavouk"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39224,"favorite_count":0,"down_vote_count":1,"up_vote_count":34,"answer_count":7,"score":33,"last_activity_date":1678122261,"creation_date":1540377616,"question_id":52966897,"body_markdown":"We are using PowerMock in few of our historical projects. Unfortunately PowerMock is quite [dead][1] and is not compatible with Java 11.\r\n\r\nAnd we are using mockStatic(). Yes, we know its considered harmful - its in the  legacy code and we would prefer not to rewrite those classes now...\r\n\r\nAre there any options how to tweak PowerMock to support Java 11? Or is it possible to easily replace it with some other Java 11 compatible framework? (Mockito does not support mockStatic)\r\n\r\n\r\n  [1]: https://github.com/powermock/powermock","title":"PowerMock &amp; Java 11","body":"<p>We are using PowerMock in few of our historical projects. Unfortunately PowerMock is quite <a href=\"https://github.com/powermock/powermock\" rel=\"noreferrer\">dead</a> and is not compatible with Java 11.</p>\n\n<p>And we are using mockStatic(). Yes, we know its considered harmful - its in the  legacy code and we would prefer not to rewrite those classes now...</p>\n\n<p>Are there any options how to tweak PowerMock to support Java 11? Or is it possible to easily replace it with some other Java 11 compatible framework? (Mockito does not support mockStatic)</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot","spring-security"],"comments":[{"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"score":0,"creation_date":1494502460,"post_id":43914208,"comment_id":74861555,"body_markdown":"It allows a single user of my application to login from multiple browsers","body":"It allows a single user of my application to login from multiple browsers"},{"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"score":0,"creation_date":1494502511,"post_id":43914208,"comment_id":74861598,"body_markdown":"I want to restrict that thing.","body":"I want to restrict that thing."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1494502554,"post_id":43914208,"comment_id":74861636,"body_markdown":"Again what isn&#39;t working and HOW are you testing.. Opening a new browser window isn&#39;t going to work as that will share the session. You need to test with 2 separate browsers (i.e chrome and firefox for instance).","body":"Again what isn&#39;t working and HOW are you testing.. Opening a new browser window isn&#39;t going to work as that will share the session. You need to test with 2 separate browsers (i.e chrome and firefox for instance)."},{"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"score":0,"creation_date":1494502665,"post_id":43914208,"comment_id":74861710,"body_markdown":"Yes i am testing it with different brwosers chrome and Firefox but same user gets logged in from both the browser.","body":"Yes i am testing it with different brwosers chrome and Firefox but same user gets logged in from both the browser."},{"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"score":0,"creation_date":1494502975,"post_id":43914208,"comment_id":74861965,"body_markdown":"No previous session doesn&#39;t get expired.Its not working for me.","body":"No previous session doesn&#39;t get expired.Its not working for me."},{"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"score":0,"creation_date":1494503128,"post_id":43914208,"comment_id":74862081,"body_markdown":"I even tested it by removing the custom filter UsernamePasswordAuthenticationFilter that i was using and remember me configuration but its not working and allow multiple logins from multiple browsers.","body":"I even tested it by removing the custom filter UsernamePasswordAuthenticationFilter that i was using and remember me configuration but its not working and allow multiple logins from multiple browsers."},{"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"score":0,"creation_date":1494505701,"post_id":43914208,"comment_id":74863919,"body_markdown":"Login page is at the root of my application(&quot;/&quot;)  http://localhost:8080/prc-application/","body":"Login page is at the root of my application(&quot;/&quot;)  <a href=\"http://localhost:8080/prc-application/\" rel=\"nofollow noreferrer\">localhost:8080/prc-application</a>"},{"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"score":0,"creation_date":1494509314,"post_id":43914208,"comment_id":74866815,"body_markdown":"&quot;/authenticate&quot;  for login form","body":"&quot;/authenticate&quot;  for login form"}],"answers":[{"comments":[{"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"score":5,"creation_date":1494506708,"post_id":43914878,"comment_id":74864699,"body_markdown":"I can still login with same user from different browsers and none of the previous session gets expired.","body":"I can still login with same user from different browsers and none of the previous session gets expired."}],"tags":[],"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494504184,"creation_date":1494504184,"answer_id":43914878,"question_id":43914208,"body_markdown":"Instead of merely creating `HttpSessionEventPublisher` make sure you register it as a session event listener:\r\n\r\n        @Bean\r\n        public static ServletListenerRegistrationBean httpSessionEventPublisher() {\r\n            return new ServletListenerRegistrationBean(new HttpSessionEventPublisher());\r\n        }\r\n\r\nHope this helps!","title":"Max session 1 is not working with spring boot","body":"<p>Instead of merely creating <code>HttpSessionEventPublisher</code> make sure you register it as a session event listener:</p>\n\n<pre><code>    @Bean\n    public static ServletListenerRegistrationBean httpSessionEventPublisher() {\n        return new ServletListenerRegistrationBean(new HttpSessionEventPublisher());\n    }\n</code></pre>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":9356402,"reputation":132,"user_id":6944299,"display_name":"kRUMPEZ"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1503373338,"creation_date":1503373338,"answer_id":45808562,"question_id":43914208,"body_markdown":"here&#39;s how you do it in a simple spring boot way,Go to your WebSecurityConfig Class in your case it&#39;s called SpringSecurityConfig \r\n\r\n\r\n   \r\n\r\n        @Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \r\n    \t\thttp\r\n    \t\t\t.sessionManagement()\r\n    \t\t\t\t.maximumSessions(1)\r\n    \t\t\t\t.maxSessionsPreventsLogin(true);\r\n         }\r\n\r\n","title":"Max session 1 is not working with spring boot","body":"<p>here's how you do it in a simple spring boot way,Go to your WebSecurityConfig Class in your case it's called SpringSecurityConfig </p>\n\n<pre><code>    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http\n            .sessionManagement()\n                .maximumSessions(1)\n                .maxSessionsPreventsLogin(true);\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2536131,"reputation":539,"user_id":2203205,"accept_rate":27,"display_name":"Anass Boukalane"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622241849,"creation_date":1622241849,"answer_id":67746163,"question_id":43914208,"body_markdown":"you have to remove\r\n\r\n     @Bean\r\n        public HttpSessionEventPublisher httpSessionEventPublisher() {\r\n            return new HttpSessionEventPublisher();\r\n        }\r\n","title":"Max session 1 is not working with spring boot","body":"<p>you have to remove</p>\n<pre><code> @Bean\n    public HttpSessionEventPublisher httpSessionEventPublisher() {\n        return new HttpSessionEventPublisher();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18807088,"reputation":11,"user_id":13716168,"display_name":"Yahyani Mohamed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634923511,"creation_date":1634923511,"answer_id":69680919,"question_id":43914208,"body_markdown":"You can try this in your webConfigSecurity class\r\n\r\n    http.sessionManagement()\r\n    \t\t\t.sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\r\n    \t\t  \t.invalidSessionUrl(&quot;/&quot;)\r\n    \t\t\t.maximumSessions(1)\r\n    \t\t\t.maxSessionsPreventsLogin(true)\r\n    \t\t\t.expiredUrl(&quot;/login?invalid-session=true&quot;);\r\n    \t} ","title":"Max session 1 is not working with spring boot","body":"<p>You can try this in your webConfigSecurity class</p>\n<pre><code>http.sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\n            .invalidSessionUrl(&quot;/&quot;)\n            .maximumSessions(1)\n            .maxSessionsPreventsLogin(true)\n            .expiredUrl(&quot;/login?invalid-session=true&quot;);\n    } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":13808968,"reputation":427,"user_id":9967174,"display_name":"Ayoub Anbara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678121325,"creation_date":1678065835,"answer_id":75646379,"question_id":43914208,"body_markdown":"In addition to creating a Bean HttpSessionEventPublisher \r\n```\r\n   @Bean\r\n   HttpSessionEventPublisher httpSessionEventPublisher() {\r\n        return new HttpSessionEventPublisher();\r\n    }\r\n```\r\nYou should take as a consideration this point:\r\n\r\n&quot;**If you are using the custom UserDetails instance, make sure you override equals() and hashCode() methods**.\r\n\r\nBy default Spring security SessionRegistry implementation uses an in-memory map to store the UserDetails. If you are using a custom UserDetails without equals() and hashCode() methods, it wont be able to match the user correctly. Also, the default UserDetails object from Spring security provides implementation for both equals() and hashCode() methods.&quot;\r\n\r\nReferences: \r\n\r\nhttps://www.javadevjournal.com/spring-security/spring-security-session/\r\n\r\nhttps://youtube.com/watch?v=rWIVa-nTX6Q&amp;si=EnSIkaIECMiOmarE","title":"Max session 1 is not working with spring boot","body":"<p>In addition to creating a Bean HttpSessionEventPublisher</p>\n<pre><code>   @Bean\n   HttpSessionEventPublisher httpSessionEventPublisher() {\n        return new HttpSessionEventPublisher();\n    }\n</code></pre>\n<p>You should take as a consideration this point:</p>\n<p>&quot;<strong>If you are using the custom UserDetails instance, make sure you override equals() and hashCode() methods</strong>.</p>\n<p>By default Spring security SessionRegistry implementation uses an in-memory map to store the UserDetails. If you are using a custom UserDetails without equals() and hashCode() methods, it wont be able to match the user correctly. Also, the default UserDetails object from Spring security provides implementation for both equals() and hashCode() methods.&quot;</p>\n<p>References:</p>\n<p><a href=\"https://www.javadevjournal.com/spring-security/spring-security-session/\" rel=\"nofollow noreferrer\">https://www.javadevjournal.com/spring-security/spring-security-session/</a></p>\n<p><a href=\"https://youtube.com/watch?v=rWIVa-nTX6Q&amp;si=EnSIkaIECMiOmarE\" rel=\"nofollow noreferrer\">https://youtube.com/watch?v=rWIVa-nTX6Q&amp;si=EnSIkaIECMiOmarE</a></p>\n"}],"owner":{"account_id":10483983,"reputation":61,"user_id":7728150,"display_name":"Nikhil Sharma"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5983,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1678121325,"creation_date":1494502318,"question_id":43914208,"body_markdown":"I want to restrict only one max session for a single user in my application where i am using spring boot and java based config.I used spring max session 1. But its not working for me.\r\n    This is my java based spring configuration file\r\n    \r\n    \r\n    package com.prcvideoplt.prc;\r\n    \r\n    import javax.annotation.Resource;\r\n    import javax.sql.DataSource;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.core.annotation.Order;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.WebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.core.session.SessionRegistry;\r\n    import org.springframework.security.core.session.SessionRegistryImpl;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n    import org.springframework.security.web.authentication.rememberme.JdbcTokenRepositoryImpl;\r\n    import org.springframework.security.web.authentication.rememberme.PersistentTokenRepository;\r\n    import org.springframework.security.web.session.HttpSessionEventPublisher;\r\n    import org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\n    \r\n    import com.prcvideoplt.handlers.LoginFailureHandler;\r\n    import com.prcvideoplt.handlers.LoginSuccessHandler;\r\n    import com.prcvideoplt.handlers.LogoutSuccessHandler;\r\n    import com.prcvideoplt.service.security.CompanyBasedCustomFilter;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity\r\n    @ComponentScan(basePackages = &quot;com.prcvideoplt&quot;)\r\n    public class SpringSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Resource(name = &quot;custUserDetails&quot;)\r\n        private UserDetailsService userDetailsService;\r\n    \r\n        @Override\r\n        @Bean\r\n        public UserDetailsService userDetailsService() {\r\n            return super.userDetailsService();\r\n        }\r\n    \r\n        @Bean(name = &quot;passwordEncoder&quot;)\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder(13);\r\n        }\r\n    \r\n        @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n        }\r\n    \r\n        @Configuration\r\n        @Order(value = 1)\r\n        public static class UserWebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n            @Resource(name = &quot;loginSuccessHandler&quot;)\r\n            private LoginSuccessHandler loginSuccessHandler;\r\n            @Resource(name = &quot;loginFailureHandler&quot;)\r\n            private LoginFailureHandler loginFailureHandler;\r\n            @Resource(name = &quot;logoutSuccesshandler&quot;)\r\n            private LogoutSuccessHandler logoutSuccesshandler;\r\n    \r\n            @Autowired\r\n            DataSource dataSource;\r\n    \r\n            @Autowired\r\n            UserDetailsService userDetailsService;\r\n    \r\n            @Override\r\n            public void configure(WebSecurity web) throws Exception {\r\n                web.ignoring().antMatchers(&quot;/assets/**&quot;);\r\n            }\r\n    \r\n            @Bean\r\n            public HttpSessionEventPublisher httpSessionEventPublisher() {\r\n                return new HttpSessionEventPublisher();\r\n            }\r\n    \r\n            @Bean\r\n            public CompanyBasedCustomFilter authenticationFilter() throws Exception {\r\n                CompanyBasedCustomFilter authFilter = new CompanyBasedCustomFilter();\r\n                authFilter.setRequiresAuthenticationRequestMatcher(new AntPathRequestMatcher(&quot;/authenticate&quot;, &quot;POST&quot;));\r\n                authFilter.setAuthenticationSuccessHandler(loginSuccessHandler);\r\n                authFilter.setAuthenticationFailureHandler(loginFailureHandler);\r\n                authFilter.setAuthenticationManager(authenticationManager());\r\n                return authFilter;\r\n            }\r\n    \r\n            @Override\r\n            @Bean(name = &quot;authenticationManager&quot;)\r\n            protected AuthenticationManager authenticationManager() throws Exception {\r\n                return super.authenticationManager();\r\n            }\r\n    \r\n            @Bean\r\n            public PersistentTokenRepository persistentTokenRepository() {\r\n                JdbcTokenRepositoryImpl tokenRepositoryImpl = new JdbcTokenRepositoryImpl();\r\n                tokenRepositoryImpl.setDataSource(dataSource);\r\n                return tokenRepositoryImpl;\r\n            }\r\n    \r\n            @Bean\r\n            public SessionRegistry sessionRegistry() {\r\n                SessionRegistry sessionRegistry = new SessionRegistryImpl();\r\n                return sessionRegistry;\r\n            }\r\n    \r\n            @Override\r\n            protected void configure(HttpSecurity http) throws Exception {\r\n                http.csrf().disable().authorizeRequests().antMatchers(new String[]{&quot;/user/**&quot;}).hasRole(&quot;USER&quot;).antMatchers(&quot;/admin/**&quot;)\r\n                        .hasAnyRole(new String[]{&quot;ADMIN&quot;, &quot;SUB_ADMIN&quot;}).antMatchers(new String[]{&quot;/**&quot;}).permitAll().anyRequest().authenticated().and()\r\n                        .formLogin().loginPage(&quot;/check-url-pattern&quot;).loginProcessingUrl(&quot;/authenticate&quot;).usernameParameter(&quot;username&quot;)\r\n                        .passwordParameter(&quot;password&quot;).permitAll().and().addFilterBefore(authenticationFilter(), UsernamePasswordAuthenticationFilter.class)\r\n                        .rememberMe().key(&quot;rem-me-key&quot;).rememberMeParameter(&quot;remember-me&quot;).rememberMeCookieName(&quot;my-remember-me&quot;)\r\n                        .tokenRepository(persistentTokenRepository()).tokenValiditySeconds(86400).and().logout().logoutUrl(&quot;/invalidate&quot;)\r\n                        .logoutSuccessHandler(logoutSuccesshandler).invalidateHttpSession(true).and().headers().frameOptions().sameOrigin().and()\r\n                        .sessionManagement().maximumSessions(1).expiredUrl(&quot;/expired&quot;).maxSessionsPreventsLogin(true).sessionRegistry(sessionRegistry());\r\n    \r\n            }\r\n        }\r\n    }\r\n    \r\nPlease suggest a solution.\r\n\r\n","title":"Max session 1 is not working with spring boot","body":"<p>I want to restrict only one max session for a single user in my application where i am using spring boot and java based config.I used spring max session 1. But its not working for me.\n    This is my java based spring configuration file</p>\n\n<pre><code>package com.prcvideoplt.prc;\n\nimport javax.annotation.Resource;\nimport javax.sql.DataSource;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.core.session.SessionRegistry;\nimport org.springframework.security.core.session.SessionRegistryImpl;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\nimport org.springframework.security.web.authentication.rememberme.JdbcTokenRepositoryImpl;\nimport org.springframework.security.web.authentication.rememberme.PersistentTokenRepository;\nimport org.springframework.security.web.session.HttpSessionEventPublisher;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\nimport com.prcvideoplt.handlers.LoginFailureHandler;\nimport com.prcvideoplt.handlers.LoginSuccessHandler;\nimport com.prcvideoplt.handlers.LogoutSuccessHandler;\nimport com.prcvideoplt.service.security.CompanyBasedCustomFilter;\n\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity\n@ComponentScan(basePackages = \"com.prcvideoplt\")\npublic class SpringSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Resource(name = \"custUserDetails\")\n    private UserDetailsService userDetailsService;\n\n    @Override\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return super.userDetailsService();\n    }\n\n    @Bean(name = \"passwordEncoder\")\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder(13);\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Configuration\n    @Order(value = 1)\n    public static class UserWebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n        @Resource(name = \"loginSuccessHandler\")\n        private LoginSuccessHandler loginSuccessHandler;\n        @Resource(name = \"loginFailureHandler\")\n        private LoginFailureHandler loginFailureHandler;\n        @Resource(name = \"logoutSuccesshandler\")\n        private LogoutSuccessHandler logoutSuccesshandler;\n\n        @Autowired\n        DataSource dataSource;\n\n        @Autowired\n        UserDetailsService userDetailsService;\n\n        @Override\n        public void configure(WebSecurity web) throws Exception {\n            web.ignoring().antMatchers(\"/assets/**\");\n        }\n\n        @Bean\n        public HttpSessionEventPublisher httpSessionEventPublisher() {\n            return new HttpSessionEventPublisher();\n        }\n\n        @Bean\n        public CompanyBasedCustomFilter authenticationFilter() throws Exception {\n            CompanyBasedCustomFilter authFilter = new CompanyBasedCustomFilter();\n            authFilter.setRequiresAuthenticationRequestMatcher(new AntPathRequestMatcher(\"/authenticate\", \"POST\"));\n            authFilter.setAuthenticationSuccessHandler(loginSuccessHandler);\n            authFilter.setAuthenticationFailureHandler(loginFailureHandler);\n            authFilter.setAuthenticationManager(authenticationManager());\n            return authFilter;\n        }\n\n        @Override\n        @Bean(name = \"authenticationManager\")\n        protected AuthenticationManager authenticationManager() throws Exception {\n            return super.authenticationManager();\n        }\n\n        @Bean\n        public PersistentTokenRepository persistentTokenRepository() {\n            JdbcTokenRepositoryImpl tokenRepositoryImpl = new JdbcTokenRepositoryImpl();\n            tokenRepositoryImpl.setDataSource(dataSource);\n            return tokenRepositoryImpl;\n        }\n\n        @Bean\n        public SessionRegistry sessionRegistry() {\n            SessionRegistry sessionRegistry = new SessionRegistryImpl();\n            return sessionRegistry;\n        }\n\n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            http.csrf().disable().authorizeRequests().antMatchers(new String[]{\"/user/**\"}).hasRole(\"USER\").antMatchers(\"/admin/**\")\n                    .hasAnyRole(new String[]{\"ADMIN\", \"SUB_ADMIN\"}).antMatchers(new String[]{\"/**\"}).permitAll().anyRequest().authenticated().and()\n                    .formLogin().loginPage(\"/check-url-pattern\").loginProcessingUrl(\"/authenticate\").usernameParameter(\"username\")\n                    .passwordParameter(\"password\").permitAll().and().addFilterBefore(authenticationFilter(), UsernamePasswordAuthenticationFilter.class)\n                    .rememberMe().key(\"rem-me-key\").rememberMeParameter(\"remember-me\").rememberMeCookieName(\"my-remember-me\")\n                    .tokenRepository(persistentTokenRepository()).tokenValiditySeconds(86400).and().logout().logoutUrl(\"/invalidate\")\n                    .logoutSuccessHandler(logoutSuccesshandler).invalidateHttpSession(true).and().headers().frameOptions().sameOrigin().and()\n                    .sessionManagement().maximumSessions(1).expiredUrl(\"/expired\").maxSessionsPreventsLogin(true).sessionRegistry(sessionRegistry());\n\n        }\n    }\n}\n</code></pre>\n\n<p>Please suggest a solution.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9627,"page":598,"page_size":100}
