{"items":[{"tags":["java","android","firebase","firebase-authentication","firebase-admin"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682332732,"creation_date":1682332732,"answer_id":76091023,"question_id":76089838,"body_markdown":"The [FirebaseOptions.Builder][1] class doesn&#39;t contain any `.setCredentials()` methods. So there is no way you can call such a method on an object of type `Builder`, hence the error.\r\n\r\nOn the other hand, [Firebase Admin SDK][2] indeed contains such a method, but unfortunately, you cannot use the Admin SDK and the regular Android SDK for Firebase in the same project.\r\n\r\nIf you want to use some functionality that exists in the Firebase Admin SDK, then you should consider creating a [Cloud Function][3] and [calling it from your Android application&#39;s code][4].\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/FirebaseOptions.Builder\r\n  [2]: https://firebase.google.com/docs/admin/setup#use-oauth-2-0-refresh-token\r\n  [3]: https://firebase.google.com/docs/functions/\r\n  [4]: https://firebase.google.com/docs/functions/callable","title":"error: cannot find symbol .setCredentials(GoogleCredentials.fromStream(serviceAccount))","body":"<p>The <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/FirebaseOptions.Builder\" rel=\"nofollow noreferrer\">FirebaseOptions.Builder</a> class doesn't contain any <code>.setCredentials()</code> methods. So there is no way you can call such a method on an object of type <code>Builder</code>, hence the error.</p>\n<p>On the other hand, <a href=\"https://firebase.google.com/docs/admin/setup#use-oauth-2-0-refresh-token\" rel=\"nofollow noreferrer\">Firebase Admin SDK</a> indeed contains such a method, but unfortunately, you cannot use the Admin SDK and the regular Android SDK for Firebase in the same project.</p>\n<p>If you want to use some functionality that exists in the Firebase Admin SDK, then you should consider creating a <a href=\"https://firebase.google.com/docs/functions/\" rel=\"nofollow noreferrer\">Cloud Function</a> and <a href=\"https://firebase.google.com/docs/functions/callable\" rel=\"nofollow noreferrer\">calling it from your Android application's code</a>.</p>\n"}],"owner":{"account_id":23419969,"reputation":3,"user_id":17480333,"display_name":"Ho&#224;ng Tráº§n"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76091023,"answer_count":1,"score":0,"last_activity_date":1682332857,"creation_date":1682323682,"question_id":76089838,"body_markdown":"Please help me with this code, I still don&#39;t understand why I&#39;m like this, I edited the gradle file, and edited the java file but it still doesn&#39;t work, please help me fix it.\r\np/s: this is the first time I post help so I&#39;m so grateful and appreciative\r\n\r\n\r\nJava file:\r\n\r\nIn the Java file, I tried to declare it like on the Firebase page of Google but still got the error\r\n\r\n\r\n\r\n```&#39;&#39;\r\npackage Database;\r\n\r\nimport com.google.auth.oauth2.GoogleCredentials;\r\n\r\nimport com.google.firebase.FirebaseApp;\r\n\r\nimport com.google.firebase.FirebaseOptions;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\n\r\nimport com.google.firebase.database.DatabaseError;\r\n\r\nimport com.google.firebase.database.DatabaseReference;\r\n\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\n\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.io.FileInputStream;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class DemoFirebase {\r\n\r\npublic static void main(String\\[\\] args) throws IOException {\r\n\r\nFileInputStream serviceAccount = new FileInputStream(&quot;my_JSon_file&quot;);\r\n\r\n        FirebaseOptions options = new FirebaseOptions.Builder()\r\n                .setCredentials(GoogleCredentials.fromStream(serviceAccount))\r\n                .setDatabaseUrl(&quot;my_database_url&quot;)\r\n                .build();\r\n    \r\n        FirebaseApp.initializeApp(options);\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(&quot;User&quot;);\r\n        ref.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n                Object value = dataSnapshot.getValue();\r\n                System.out.println(&quot;Value is: &quot; + value);\r\n            }\r\n    \r\n            @Override\r\n            public void onCancelled(DatabaseError error) {\r\n                System.out.println(&quot;Error: &quot; + error.getMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\n```\r\nGradle file:\r\nIn this Gradle file, I have added libraries that may be needed but it still fails in the Java file\r\n\r\n```\r\ndependencies {\r\n    implementation &#39;com.google.firebase:firebase-analytics:21.2.2&#39;\r\n\r\n    implementation platform(&#39;com.google.firebase:firebase-bom:31.5.0&#39;)\r\n\r\n    implementation &#39;com.google.cloud:google-cloud-storage:2.14.0&#39;\r\n\r\n    implementation &#39;com.google.firebase:firebase-admin:9.1.1&#39;\r\n\r\n    implementation &#39;com.google.firebase:firebase-analytics&#39;\r\n\r\n    implementation(&#39;com.google.firebase:firebase-appcheck-debug:16.1.2&#39;)\r\n\r\n    implementation(&#39;com.google.firebase:firebase-inappmessaging:20.3.1&#39;)\r\n\r\n    implementation(&#39;com.google.firebase:firebase-inappmessaging-display:20.3.1&#39;)\r\n\r\n    implementation &#39;com.google.auth:google-auth-library-credentials:1.12.1&#39;\r\n\r\n    implementation &#39;com.google.auth:google-auth-library-oauth2-http:1.12.1&#39;\r\n\r\n    implementation &#39;com.google.firebase:firebase-database:20.2.0&#39;\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n\r\n    implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.3.0&#39;\r\n\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n\r\n}\r\n","title":"error: cannot find symbol .setCredentials(GoogleCredentials.fromStream(serviceAccount))","body":"<p>Please help me with this code, I still don't understand why I'm like this, I edited the gradle file, and edited the java file but it still doesn't work, please help me fix it.\np/s: this is the first time I post help so I'm so grateful and appreciative</p>\n<p>Java file:</p>\n<p>In the Java file, I tried to declare it like on the Firebase page of Google but still got the error</p>\n<pre><code>package Database;\n\nimport com.google.auth.oauth2.GoogleCredentials;\n\nimport com.google.firebase.FirebaseApp;\n\nimport com.google.firebase.FirebaseOptions;\n\nimport com.google.firebase.database.DataSnapshot;\n\nimport com.google.firebase.database.DatabaseError;\n\nimport com.google.firebase.database.DatabaseReference;\n\nimport com.google.firebase.database.FirebaseDatabase;\n\n\nimport com.google.firebase.database.ValueEventListener;\n\nimport java.io.FileInputStream;\n\nimport java.io.IOException;\n\npublic class DemoFirebase {\n\npublic static void main(String\\[\\] args) throws IOException {\n\nFileInputStream serviceAccount = new FileInputStream(&quot;my_JSon_file&quot;);\n\n        FirebaseOptions options = new FirebaseOptions.Builder()\n                .setCredentials(GoogleCredentials.fromStream(serviceAccount))\n                .setDatabaseUrl(&quot;my_database_url&quot;)\n                .build();\n    \n        FirebaseApp.initializeApp(options);\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(&quot;User&quot;);\n        ref.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(DataSnapshot dataSnapshot) {\n                Object value = dataSnapshot.getValue();\n                System.out.println(&quot;Value is: &quot; + value);\n            }\n    \n            @Override\n            public void onCancelled(DatabaseError error) {\n                System.out.println(&quot;Error: &quot; + error.getMessage());\n            }\n        });\n    }\n\n}\n\n\n</code></pre>\n<p>Gradle file:\nIn this Gradle file, I have added libraries that may be needed but it still fails in the Java file</p>\n<pre><code>dependencies {\n    implementation 'com.google.firebase:firebase-analytics:21.2.2'\n\n    implementation platform('com.google.firebase:firebase-bom:31.5.0')\n\n    implementation 'com.google.cloud:google-cloud-storage:2.14.0'\n\n    implementation 'com.google.firebase:firebase-admin:9.1.1'\n\n    implementation 'com.google.firebase:firebase-analytics'\n\n    implementation('com.google.firebase:firebase-appcheck-debug:16.1.2')\n\n    implementation('com.google.firebase:firebase-inappmessaging:20.3.1')\n\n    implementation('com.google.firebase:firebase-inappmessaging-display:20.3.1')\n\n    implementation 'com.google.auth:google-auth-library-credentials:1.12.1'\n\n    implementation 'com.google.auth:google-auth-library-oauth2-http:1.12.1'\n\n    implementation 'com.google.firebase:firebase-database:20.2.0'\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n\n    implementation 'com.google.android.material:material:1.8.0'\n\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n\n    implementation 'androidx.recyclerview:recyclerview:1.3.0'\n\n    testImplementation 'junit:junit:4.13.2'\n\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","unit-testing","mockito"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1682325568,"post_id":76090017,"comment_id":134191515,"body_markdown":"Do you have an exception handler like described in, f. ex., https://www.baeldung.com/exception-handling-for-rest-with-spring ?","body":"Do you have an exception handler like described in, f. ex., <a href=\"https://www.baeldung.com/exception-handling-for-rest-with-spring\" rel=\"nofollow noreferrer\">baeldung.com/exception-handling-for-rest-with-spring</a> ?"},{"owner":{"account_id":15596976,"reputation":809,"user_id":11252174,"display_name":"Demir"},"score":0,"creation_date":1682325751,"post_id":76090017,"comment_id":134191547,"body_markdown":"Yes, I have an exception handler.","body":"Yes, I have an exception handler."},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1682327562,"post_id":76090017,"comment_id":134191929,"body_markdown":"Please show it in the question","body":"Please show it in the question"},{"owner":{"account_id":15596976,"reputation":809,"user_id":11252174,"display_name":"Demir"},"score":1,"creation_date":1682328099,"post_id":76090017,"comment_id":134192056,"body_markdown":"@grekier I published the rest :)","body":"@grekier I published the rest :)"},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1682329029,"post_id":76090017,"comment_id":134192264,"body_markdown":"Not sure, but it might be that the test unit test doesn&#39;t have the `@ControllerAdvice`. Have you tried anotated it with `@SpringBootTest` instead of `@WebMvcTest`?","body":"Not sure, but it might be that the test unit test doesn&#39;t have the <code>@ControllerAdvice</code>. Have you tried anotated it with <code>@SpringBootTest</code> instead of <code>@WebMvcTest</code>?"}],"answers":[{"comments":[{"owner":{"account_id":15596976,"reputation":809,"user_id":11252174,"display_name":"Demir"},"score":0,"creation_date":1682330768,"post_id":76090543,"comment_id":134192659,"body_markdown":"I am getting another error right now. The server interestingly throws an error with status code 0. `No matching constant for [0]`. Because my handler method (`handleApplicationException`)tries to set the HTTP status value as 0. How is that even possible?","body":"I am getting another error right now. The server interestingly throws an error with status code 0. <code>No matching constant for [0]</code>. Because my handler method (<code>handleApplicationException</code>)tries to set the HTTP status value as 0. How is that even possible?"}],"tags":[],"owner":{"account_id":14852340,"reputation":7,"user_id":10725858,"display_name":"Tá»nh Tráº§n Thanh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682329078,"creation_date":1682329078,"answer_id":76090543,"question_id":76090017,"body_markdown":"I think in your Test class you should update the `setUp` method, the error above might happened caused by your exception handler class was not worked\r\n\r\n    @Before\r\n    public void setup() {\r\n     this.mockMvc = MockMvcBuilders.standaloneSetup(underTest)\r\n         .setControllerAdvice(new AppExceptionHandler())\r\n        .build();\r\n    }\r\n    \r\nHope it can help you.","title":"MockMvc testing controller not throwing exception","body":"<p>I think in your Test class you should update the <code>setUp</code> method, the error above might happened caused by your exception handler class was not worked</p>\n<pre><code>@Before\npublic void setup() {\n this.mockMvc = MockMvcBuilders.standaloneSetup(underTest)\n     .setControllerAdvice(new AppExceptionHandler())\n    .build();\n}\n</code></pre>\n<p>Hope it can help you.</p>\n"},{"comments":[{"owner":{"account_id":15596976,"reputation":809,"user_id":11252174,"display_name":"Demir"},"score":0,"creation_date":1682332633,"post_id":76090886,"comment_id":134193033,"body_markdown":"Since I use Spring Security, if I remove `useDefaultFilters = false `, then I get `java.lang.IllegalStateException: Failed to load ApplicationContext` the main cause of the exception is `Error creating bean with name &#39;webSecurityConfiguration&#39; defined in file WebSecurityConfiguration.class: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;JwtAuthenticationEntryPoint&#39; available: expected at least 1 bean which qualifies as autowire candidate`.","body":"Since I use Spring Security, if I remove <code>useDefaultFilters = false </code>, then I get <code>java.lang.IllegalStateException: Failed to load ApplicationContext</code> the main cause of the exception is <code>Error creating bean with name &#39;webSecurityConfiguration&#39; defined in file WebSecurityConfiguration.class: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionExcept&zwnj;&#8203;ion: No qualifying bean of type &#39;JwtAuthenticationEntryPoint&#39; available: expected at least 1 bean which qualifies as autowire candidate</code>."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1682333167,"post_id":76090886,"comment_id":134193123,"body_markdown":"for the last problem: add (your) `JwtAuthenticationEntryPoint` to your test configuration (`@WebMvcTest({MyController.class/*, more classes here*/})`) ..or mock(bean) it. (assuming something [comparable to this](https://github.com/szerhusenBC/jwt-spring-security-demo/blob/master/src/main/java/org/zerhusen/security/JwtAuthenticationEntryPoint.java))","body":"for the last problem: add (your) <code>JwtAuthenticationEntryPoint</code> to your test configuration (<code>@WebMvcTest({MyController.class&#47;*, more classes here*&#47;})</code>) ..or mock(bean) it. (assuming something <a href=\"https://github.com/szerhusenBC/jwt-spring-security-demo/blob/master/src/main/java/org/zerhusen/security/JwtAuthenticationEntryPoint.java\" rel=\"nofollow noreferrer\">comparable to this</a>)"},{"owner":{"account_id":15596976,"reputation":809,"user_id":11252174,"display_name":"Demir"},"score":0,"creation_date":1682334412,"post_id":76090886,"comment_id":134193385,"body_markdown":"Now I had to mock all the dependencies in the `WebSecurityConfiguration` (I have 4 dependencies). However, we are not finished yet. It requires mocking the dependencies of dependencies. Each dependency has at least 2 more dependencies, which means I need to mock at least 10 more dependencies to test a single class that is not relevant to the current class(`AppUserController`). Those dependencies are coming from security. I am not sure if that is the right way to test my single controller. Is there a better way?","body":"Now I had to mock all the dependencies in the <code>WebSecurityConfiguration</code> (I have 4 dependencies). However, we are not finished yet. It requires mocking the dependencies of dependencies. Each dependency has at least 2 more dependencies, which means I need to mock at least 10 more dependencies to test a single class that is not relevant to the current class(<code>AppUserController</code>). Those dependencies are coming from security. I am not sure if that is the right way to test my single controller. Is there a better way?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1682337024,"post_id":76090886,"comment_id":134194015,"body_markdown":"..ok i get you, ..but hard to reproduce... and [&quot;controversial question&quot;](https://stackoverflow.com/q/31169720/592355) (whether/how to deactivate security for tests)","body":"..ok i get you, ..but hard to reproduce... and <a href=\"https://stackoverflow.com/q/31169720/592355\">&quot;controversial question&quot;</a> (whether/how to deactivate security for tests)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1682337501,"post_id":76090886,"comment_id":134194113,"body_markdown":"i (enriched with security and) set up a [(public) repo](https://github.com/xerx593/soq76090017), when you can reproduce/&quot;patch the issue&quot;, i can fix! ;)","body":"i (enriched with security and) set up a <a href=\"https://github.com/xerx593/soq76090017\" rel=\"nofollow noreferrer\">(public) repo</a>, when you can reproduce/&quot;patch the issue&quot;, i can fix! ;)"}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682332783,"creation_date":1682331758,"answer_id":76090886,"question_id":76090017,"body_markdown":"(Assumptions: current spring-boot)\r\n\r\n### Several problems here\r\n\r\n- `useDefaultFilters = false` &quot;leads `@WebMvcTest` ad absurdum&quot;/makes it (sort of) useless.\r\n\r\n- the mocking/injection is problematic\r\n\r\n- to use [`thenThrow()`][1] with exception class (overloads!), the exception class should have a &quot;default constructor&quot;, which is/seems not applicable with the given (custom) `ResourceNotFoundException`.\r\n\r\n#### Minor problem:\r\n \r\n`@ExtendWith(SpringExtension.class)` doesn&#39;t much (gives an &quot;unneccessary SpringExtension&quot; warning from &quot;spring-boot-tools&quot; (vs code))\r\n\r\n### Reproduce\r\n\r\n- [starter used][2]\r\n- a simplified controller:\r\n\r\n   ```lang-java\r\n   @RestController\r\n   class MyController {\r\n     @Autowired\r\n     private MyService userDetailsService;\r\n\r\n     @GetMapping(&quot;/my/{id}&quot;)\r\n     public ResponseEntity&lt;String&gt; myGet(@PathVariable UUID id) throws ResourceNotFoundException {\r\n       return new ResponseEntity&lt;&gt;(userDetailsService.doSomething(id), HttpStatus.OK);\r\n     }\r\n   }\r\n   ```\r\n- with simplified service:\r\n   ```lang-java\r\n   @Service\r\n   public class MyService {\r\n     @SuppressWarnings(&quot;java:S106&quot;)\r\n     public String doSomething(UUID id) {\r\n       System.err.println(id.toString() + &quot; done.&quot;);\r\n       // potentially throws RuntimeExceptions...\r\n       return id.toString();\r\n     }\r\n   }\r\n   ```\r\n- original (OP) `Exception` + /-`Handler` classes\r\n\r\n### Working Test\r\n```lang-java\r\npackage com.example.demo;\r\n\r\nimport static org.mockito.Mockito.verify;\r\nimport static org.mockito.Mockito.when;\r\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\r\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;\r\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\r\n\r\nimport java.util.UUID;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\r\nimport org.springframework.boot.test.mock.mockito.MockBean;\r\nimport org.springframework.test.web.servlet.MockMvc;\r\n// don&#39;t @ExtendWith(SpringExtension.class)\r\n@WebMvcTest(MyController.class) // useDefaultFilters = false seems &quot;badong&quot; here!\r\nclass MyWebTest {\r\n\r\n    @MockBean // use rather spring-boot extension than &quot;plain ole&quot; mockito!;)\r\n    private MyService myService;\r\n\r\n    @Autowired // as usual\r\n    private MockMvc mockMvc;\r\n\r\n    // no @Before/-All !!! ;)\r\n\r\n    @Test\r\n    void testMyGet_success() throws Exception {\r\n        // given\r\n        UUID uid = UUID.randomUUID();\r\n        when(myService.doSomething(uid)).thenCallRealMethod();\r\n\r\n        // when\r\n        mockMvc.perform(get(&quot;/my/&quot; + uid))\r\n        \r\n        // then\r\n        .andExpectAll(\r\n          status().isOk(),\r\n          content().string(uid.toString())\r\n        );\r\n\r\n        verify(myService).doSomething(uid);\r\n    }\r\n\r\n    @Test\r\n    void testMyGet_notFound() throws Exception {\r\n        // given\r\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\r\n        when(myService.doSomething(uuid)).thenThrow(\r\n          /* better, here: exception instance!*/\r\n          new ResourceNotFoundException(&quot;mockba&quot;)\r\n        );\r\n\r\n        // when\r\n        mockMvc.perform(get(&quot;/my/&quot; + uuid))\r\n                \r\n        // then\r\n        .andExpect(status().isNotFound()); // expect more, if you like \r\n\r\n        verify(myService).doSomething(uuid);\r\n    }\r\n\r\n}\r\n```\r\n\r\nMain Ref: https://spring.io/guides/gs/testing-web/\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.mockito/mockito-core/5.3.1/org/mockito/stubbing/OngoingStubbing.html#thenThrow(java.lang.Class)\r\n  [2]: https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.6&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=web,lombok","title":"MockMvc testing controller not throwing exception","body":"<p>(Assumptions: current spring-boot)</p>\n<h3>Several problems here</h3>\n<ul>\n<li><p><code>useDefaultFilters = false</code> &quot;leads <code>@WebMvcTest</code> ad absurdum&quot;/makes it (sort of) useless.</p>\n</li>\n<li><p>the mocking/injection is problematic</p>\n</li>\n<li><p>to use <a href=\"https://javadoc.io/static/org.mockito/mockito-core/5.3.1/org/mockito/stubbing/OngoingStubbing.html#thenThrow(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>thenThrow()</code></a> with exception class (overloads!), the exception class should have a &quot;default constructor&quot;, which is/seems not applicable with the given (custom) <code>ResourceNotFoundException</code>.</p>\n</li>\n</ul>\n<h4>Minor problem:</h4>\n<p><code>@ExtendWith(SpringExtension.class)</code> doesn't much (gives an &quot;unneccessary SpringExtension&quot; warning from &quot;spring-boot-tools&quot; (vs code))</p>\n<h3>Reproduce</h3>\n<ul>\n<li><p><a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.6&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=web,lombok\" rel=\"nofollow noreferrer\">starter used</a></p>\n</li>\n<li><p>a simplified controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\nclass MyController {\n   @Autowired\n   private MyService userDetailsService;\n\n   @GetMapping(&quot;/my/{id}&quot;)\n   public ResponseEntity&lt;String&gt; myGet(@PathVariable UUID id) throws ResourceNotFoundException {\n     return new ResponseEntity&lt;&gt;(userDetailsService.doSomething(id), HttpStatus.OK);\n   }\n}\n</code></pre>\n</li>\n<li><p>with simplified service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n   @SuppressWarnings(&quot;java:S106&quot;)\n   public String doSomething(UUID id) {\n     System.err.println(id.toString() + &quot; done.&quot;);\n     // potentially throws RuntimeExceptions...\n     return id.toString();\n   }\n}\n</code></pre>\n</li>\n<li><p>original (OP) <code>Exception</code> + /-<code>Handler</code> classes</p>\n</li>\n</ul>\n<h3>Working Test</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\nimport java.util.UUID;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.test.web.servlet.MockMvc;\n// don't @ExtendWith(SpringExtension.class)\n@WebMvcTest(MyController.class) // useDefaultFilters = false seems &quot;badong&quot; here!\nclass MyWebTest {\n\n    @MockBean // use rather spring-boot extension than &quot;plain ole&quot; mockito!;)\n    private MyService myService;\n\n    @Autowired // as usual\n    private MockMvc mockMvc;\n\n    // no @Before/-All !!! ;)\n\n    @Test\n    void testMyGet_success() throws Exception {\n        // given\n        UUID uid = UUID.randomUUID();\n        when(myService.doSomething(uid)).thenCallRealMethod();\n\n        // when\n        mockMvc.perform(get(&quot;/my/&quot; + uid))\n        \n        // then\n        .andExpectAll(\n          status().isOk(),\n          content().string(uid.toString())\n        );\n\n        verify(myService).doSomething(uid);\n    }\n\n    @Test\n    void testMyGet_notFound() throws Exception {\n        // given\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\n        when(myService.doSomething(uuid)).thenThrow(\n          /* better, here: exception instance!*/\n          new ResourceNotFoundException(&quot;mockba&quot;)\n        );\n\n        // when\n        mockMvc.perform(get(&quot;/my/&quot; + uuid))\n                \n        // then\n        .andExpect(status().isNotFound()); // expect more, if you like \n\n        verify(myService).doSomething(uuid);\n    }\n\n}\n</code></pre>\n<p>Main Ref: <a href=\"https://spring.io/guides/gs/testing-web/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/testing-web/</a></p>\n"}],"owner":{"account_id":15596976,"reputation":809,"user_id":11252174,"display_name":"Demir"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":491,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1682332783,"creation_date":1682325144,"question_id":76090017,"body_markdown":"I am testing my `AppUserController` with MockMvc. Here is the case;\r\n\r\nIf the user is not found then I expect a `ResourceNotFoundException` to be thrown.\r\n\r\nThis is my test\r\n\r\n```\r\n   @Test\r\n    void findAppUserById_throwsNotFound() throws Exception {\r\n        //given\r\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\r\n\r\n        //when\r\n        when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class);\r\n        MvcResult mvcResult = mockMvc\r\n                .perform(get(&quot;/app-users/&quot; + uuid))\r\n                .andExpect(status().isNotFound())\r\n                .andReturn();\r\n        String resultContent = mvcResult.getResponse().getContentAsString();\r\n        ResourceNotFoundException response = objectMapper.readValue(resultContent, ResourceNotFoundException.class);\r\n        //then\r\n        assertNotNull(response);\r\n        assertEquals(404,response.getHttpStatusCode());\r\n\r\n    }\r\n```\r\n\r\nThis is the target to be tested\r\n\r\n```\r\n  @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;AppUserResponse&gt; findAppUserById(@PathVariable UUID id) throws ResourceNotFoundException {\r\n        AppUser user = userDetailsService.findAppUserById(id);\r\n        return new ResponseEntity&lt;&gt;(appUserMapper.appUserToResponse(user),HttpStatus.OK);\r\n    }\r\n```\r\n\r\nThis is the service method that throws the exception.\r\n```\r\n   public AppUser findAppUserById(UUID id) throws ResourceNotFoundException {\r\n        AppUser appUser = appUserRepository.findById(id).orElseThrow(\r\n                () -&gt; new ResourceNotFoundException(&quot;KullanÄ±cÄ± bulunamadÄ±&quot;)\r\n        );\r\n        if (!appUser.isEnabled()) {\r\n            throw new InvalidRequestException(PASSIVE_USER_MESSAGE);\r\n        }\r\n        return appUser;\r\n    }\r\n```\r\n\r\nSince I use `Mockito` to mock the service class, I expect the method `findAppUserById` throws `ResourceNotFoundException` because of this statement in my test case.\r\n\r\n``` when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class); ```\r\n\r\n\r\nHowever, when I run the test, it fails and I get the following error\r\n\r\n```\r\nrg.springframework.web.util.NestedServletException: Request processing failed; nested exception is com.napsam.wo.exception.ResourceNotFoundException\r\n\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:670)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\r\n\tat org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\r\n\tat org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)\r\n\tat com.napsam.wo.controller.AppUserControllerTest.findAppUserById_throwsNotFound(AppUserControllerTest.java:96)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\r\nCaused by: com.napsam.wo.exception.ResourceNotFoundException\r\n```\r\n\r\n\r\nupon @grekier request, the question updated with the following content.\r\n\r\n**ResourceNotFoundException**\r\n\r\n```\r\npublic class ResourceNotFoundException extends ApplicationException {\r\n    public ResourceNotFoundException(String message) {\r\n        super(-1,message,HttpStatus.NOT_FOUND);\r\n    }\r\n\r\n}\r\n```\r\n\r\n**ApplicationException** (base exception class)\r\n```\r\n@Getter\r\n@Setter\r\n@JsonIgnoreProperties({&quot;stackTrace&quot;, &quot;cause&quot;, &quot;suppressed&quot;, &quot;localizedMessage&quot;})\r\npublic class ApplicationException extends RuntimeException {\r\n\r\n    private final int resultCode;\r\n    private final String message;\r\n    private final int httpStatusCode;\r\n    private final ZonedDateTime thrownAt;\r\n\r\n    private static final String ZONE_ID = &quot;Europe/Istanbul&quot;;\r\n\r\n    public ApplicationException(int resultCode, String message, HttpStatus httpStatus) {\r\n        super();\r\n        this.resultCode = resultCode;\r\n        this.message = message;\r\n        this.httpStatusCode = httpStatus.value();\r\n        this.thrownAt = ZonedDateTime.now(ZoneId.of(ZONE_ID));\r\n    }\r\n\r\n }\r\n```\r\n\r\n**ExceptionHandler**\r\n\r\n```\r\n@ControllerAdvice\r\npublic class AppExceptionHandler {\r\n    @ExceptionHandler(value = {ApplicationException.class})\r\n    public ResponseEntity&lt;ApplicationException&gt; handleApplicationException(ApplicationException applicationException) {\r\n        return new ResponseEntity&lt;&gt;(applicationException, HttpStatus.valueOf(applicationException.getHttpStatusCode()));\r\n    }\r\n}\r\n\r\n```\r\n\r\n**AppUserControllerTest**\r\n```\r\npackage com.napsam.wo.controller;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.napsam.wo.dtos.AppUserResponse;\r\nimport com.napsam.wo.dtos.RegisterRequest;\r\nimport com.napsam.wo.entities.AppUser;\r\nimport com.napsam.wo.entities.Gender;\r\nimport com.napsam.wo.exception.ResourceNotFoundException;\r\nimport com.napsam.wo.mapper.AppUserMapper;\r\nimport com.napsam.wo.service.AppUserService;\r\nimport com.napsam.wo.service.UserDetailsServiceImpl;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.mockito.InjectMocks;\r\nimport org.mockito.Mock;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\r\nimport org.springframework.test.web.servlet.MockMvc;\r\nimport org.springframework.test.web.servlet.MvcResult;\r\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\r\n\r\nimport java.util.UUID;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\nimport static org.mockito.ArgumentMatchers.any;\r\nimport static org.mockito.Mockito.when;\r\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\r\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;\r\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\r\n\r\n@ExtendWith(SpringExtension.class)\r\n@WebMvcTest(useDefaultFilters = false)\r\nclass AppUserControllerTest {\r\n\r\n\r\n    @Mock\r\n    private UserDetailsServiceImpl userDetailsService;\r\n\r\n    @Mock\r\n    private AppUserService appUserService;\r\n\r\n    @Mock\r\n    private AppUserMapper appUserMapper;\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @InjectMocks\r\n    AppUserController underTest;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        mockMvc = MockMvcBuilders.standaloneSetup(underTest).build();\r\n    }\r\n\r\n    @Test\r\n    void findAppUserById_success() throws Exception {\r\n        //given\r\n        UUID appUserId = UUID.randomUUID();\r\n\r\n        AppUser appUser = new AppUser();\r\n        appUser.setAppUserId(appUserId);\r\n\r\n        AppUserResponse appUserResponse = new AppUserResponse();\r\n        appUserResponse.setAppUserId(appUserId);\r\n\r\n        //when\r\n        when(userDetailsService.findAppUserById(appUserId)).thenReturn(appUser);\r\n        when(appUserMapper.appUserToResponse(appUser)).thenReturn(appUserResponse);\r\n        MvcResult mvcResult = mockMvc\r\n                .perform(get(&quot;/app-users/&quot; + appUserId))\r\n                .andExpect(status().isOk())\r\n                .andReturn();\r\n        String resultContent = mvcResult.getResponse().getContentAsString();\r\n        AppUserResponse response = objectMapper.readValue(resultContent, AppUserResponse.class);\r\n\r\n        //then\r\n        assertNotNull(response);\r\n        assertEquals(appUserId, response.getAppUserId());\r\n\r\n    }\r\n\r\n    @Test\r\n    void findAppUserById_throwsNotFound() throws Exception {\r\n\r\n        //fixme\r\n        //given\r\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\r\n\r\n        //when\r\n        when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class);\r\n        MvcResult mvcResult = mockMvc\r\n                .perform(get(&quot;/app-users/&quot; + uuid))\r\n                .andExpect(status().isNotFound())\r\n                .andReturn();\r\n        String resultContent = mvcResult.getResponse().getContentAsString();\r\n        ResourceNotFoundException response = objectMapper.readValue(resultContent, ResourceNotFoundException.class);\r\n\r\n        //then\r\n        assertNotNull(response);\r\n        assertEquals(404, response.getHttpStatusCode());\r\n\r\n    }\r\n\r\n    @Test\r\n    void registerDetails_success() throws Exception {\r\n\r\n        //given\r\n        RegisterRequest request = new RegisterRequest();\r\n        request.setAvatar(&quot;a&quot;);\r\n        request.setBiography(&quot;b&quot;);\r\n        request.setFullName(&quot;f&quot;);\r\n        request.setGender(Gender.KADIN);\r\n\r\n        String json = objectMapper.writeValueAsString(request);\r\n\r\n        //when\r\n        when(appUserService.registerDetails(any(), any())).thenReturn(new AppUserResponse());\r\n\r\n        MvcResult mvcResult = mockMvc.perform(post(&quot;/app-users/register-details/&quot; + UUID.randomUUID())\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .content(json))\r\n                .andExpect(status().isCreated())\r\n                .andReturn();\r\n\r\n        String resultContent = mvcResult.getResponse().getContentAsString();\r\n        AppUserResponse response = objectMapper.readValue(resultContent, AppUserResponse.class);\r\n\r\n        //then\r\n        assertNotNull(response);\r\n    }\r\n}\r\n```","title":"MockMvc testing controller not throwing exception","body":"<p>I am testing my <code>AppUserController</code> with MockMvc. Here is the case;</p>\n<p>If the user is not found then I expect a <code>ResourceNotFoundException</code> to be thrown.</p>\n<p>This is my test</p>\n<pre><code>   @Test\n    void findAppUserById_throwsNotFound() throws Exception {\n        //given\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\n\n        //when\n        when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class);\n        MvcResult mvcResult = mockMvc\n                .perform(get(&quot;/app-users/&quot; + uuid))\n                .andExpect(status().isNotFound())\n                .andReturn();\n        String resultContent = mvcResult.getResponse().getContentAsString();\n        ResourceNotFoundException response = objectMapper.readValue(resultContent, ResourceNotFoundException.class);\n        //then\n        assertNotNull(response);\n        assertEquals(404,response.getHttpStatusCode());\n\n    }\n</code></pre>\n<p>This is the target to be tested</p>\n<pre><code>  @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;AppUserResponse&gt; findAppUserById(@PathVariable UUID id) throws ResourceNotFoundException {\n        AppUser user = userDetailsService.findAppUserById(id);\n        return new ResponseEntity&lt;&gt;(appUserMapper.appUserToResponse(user),HttpStatus.OK);\n    }\n</code></pre>\n<p>This is the service method that throws the exception.</p>\n<pre><code>   public AppUser findAppUserById(UUID id) throws ResourceNotFoundException {\n        AppUser appUser = appUserRepository.findById(id).orElseThrow(\n                () -&gt; new ResourceNotFoundException(&quot;KullanÄ±cÄ± bulunamadÄ±&quot;)\n        );\n        if (!appUser.isEnabled()) {\n            throw new InvalidRequestException(PASSIVE_USER_MESSAGE);\n        }\n        return appUser;\n    }\n</code></pre>\n<p>Since I use <code>Mockito</code> to mock the service class, I expect the method <code>findAppUserById</code> throws <code>ResourceNotFoundException</code> because of this statement in my test case.</p>\n<p><code>when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class);</code></p>\n<p>However, when I run the test, it fails and I get the following error</p>\n<pre><code>rg.springframework.web.util.NestedServletException: Request processing failed; nested exception is com.napsam.wo.exception.ResourceNotFoundException\n\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\n    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\n    at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)\n    at com.napsam.wo.controller.AppUserControllerTest.findAppUserById_throwsNotFound(AppUserControllerTest.java:96)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: com.napsam.wo.exception.ResourceNotFoundException\n</code></pre>\n<p>upon @grekier request, the question updated with the following content.</p>\n<p><strong>ResourceNotFoundException</strong></p>\n<pre><code>public class ResourceNotFoundException extends ApplicationException {\n    public ResourceNotFoundException(String message) {\n        super(-1,message,HttpStatus.NOT_FOUND);\n    }\n\n}\n</code></pre>\n<p><strong>ApplicationException</strong> (base exception class)</p>\n<pre><code>@Getter\n@Setter\n@JsonIgnoreProperties({&quot;stackTrace&quot;, &quot;cause&quot;, &quot;suppressed&quot;, &quot;localizedMessage&quot;})\npublic class ApplicationException extends RuntimeException {\n\n    private final int resultCode;\n    private final String message;\n    private final int httpStatusCode;\n    private final ZonedDateTime thrownAt;\n\n    private static final String ZONE_ID = &quot;Europe/Istanbul&quot;;\n\n    public ApplicationException(int resultCode, String message, HttpStatus httpStatus) {\n        super();\n        this.resultCode = resultCode;\n        this.message = message;\n        this.httpStatusCode = httpStatus.value();\n        this.thrownAt = ZonedDateTime.now(ZoneId.of(ZONE_ID));\n    }\n\n }\n</code></pre>\n<p><strong>ExceptionHandler</strong></p>\n<pre><code>@ControllerAdvice\npublic class AppExceptionHandler {\n    @ExceptionHandler(value = {ApplicationException.class})\n    public ResponseEntity&lt;ApplicationException&gt; handleApplicationException(ApplicationException applicationException) {\n        return new ResponseEntity&lt;&gt;(applicationException, HttpStatus.valueOf(applicationException.getHttpStatusCode()));\n    }\n}\n\n</code></pre>\n<p><strong>AppUserControllerTest</strong></p>\n<pre><code>package com.napsam.wo.controller;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.napsam.wo.dtos.AppUserResponse;\nimport com.napsam.wo.dtos.RegisterRequest;\nimport com.napsam.wo.entities.AppUser;\nimport com.napsam.wo.entities.Gender;\nimport com.napsam.wo.exception.ResourceNotFoundException;\nimport com.napsam.wo.mapper.AppUserMapper;\nimport com.napsam.wo.service.AppUserService;\nimport com.napsam.wo.service.UserDetailsServiceImpl;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.MvcResult;\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\n\nimport java.util.UUID;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\n@ExtendWith(SpringExtension.class)\n@WebMvcTest(useDefaultFilters = false)\nclass AppUserControllerTest {\n\n\n    @Mock\n    private UserDetailsServiceImpl userDetailsService;\n\n    @Mock\n    private AppUserService appUserService;\n\n    @Mock\n    private AppUserMapper appUserMapper;\n\n    ObjectMapper objectMapper = new ObjectMapper();\n\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @InjectMocks\n    AppUserController underTest;\n\n    @BeforeEach\n    void setUp() {\n        mockMvc = MockMvcBuilders.standaloneSetup(underTest).build();\n    }\n\n    @Test\n    void findAppUserById_success() throws Exception {\n        //given\n        UUID appUserId = UUID.randomUUID();\n\n        AppUser appUser = new AppUser();\n        appUser.setAppUserId(appUserId);\n\n        AppUserResponse appUserResponse = new AppUserResponse();\n        appUserResponse.setAppUserId(appUserId);\n\n        //when\n        when(userDetailsService.findAppUserById(appUserId)).thenReturn(appUser);\n        when(appUserMapper.appUserToResponse(appUser)).thenReturn(appUserResponse);\n        MvcResult mvcResult = mockMvc\n                .perform(get(&quot;/app-users/&quot; + appUserId))\n                .andExpect(status().isOk())\n                .andReturn();\n        String resultContent = mvcResult.getResponse().getContentAsString();\n        AppUserResponse response = objectMapper.readValue(resultContent, AppUserResponse.class);\n\n        //then\n        assertNotNull(response);\n        assertEquals(appUserId, response.getAppUserId());\n\n    }\n\n    @Test\n    void findAppUserById_throwsNotFound() throws Exception {\n\n        //fixme\n        //given\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\n\n        //when\n        when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class);\n        MvcResult mvcResult = mockMvc\n                .perform(get(&quot;/app-users/&quot; + uuid))\n                .andExpect(status().isNotFound())\n                .andReturn();\n        String resultContent = mvcResult.getResponse().getContentAsString();\n        ResourceNotFoundException response = objectMapper.readValue(resultContent, ResourceNotFoundException.class);\n\n        //then\n        assertNotNull(response);\n        assertEquals(404, response.getHttpStatusCode());\n\n    }\n\n    @Test\n    void registerDetails_success() throws Exception {\n\n        //given\n        RegisterRequest request = new RegisterRequest();\n        request.setAvatar(&quot;a&quot;);\n        request.setBiography(&quot;b&quot;);\n        request.setFullName(&quot;f&quot;);\n        request.setGender(Gender.KADIN);\n\n        String json = objectMapper.writeValueAsString(request);\n\n        //when\n        when(appUserService.registerDetails(any(), any())).thenReturn(new AppUserResponse());\n\n        MvcResult mvcResult = mockMvc.perform(post(&quot;/app-users/register-details/&quot; + UUID.randomUUID())\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(json))\n                .andExpect(status().isCreated())\n                .andReturn();\n\n        String resultContent = mvcResult.getResponse().getContentAsString();\n        AppUserResponse response = objectMapper.readValue(resultContent, AppUserResponse.class);\n\n        //then\n        assertNotNull(response);\n    }\n}\n</code></pre>\n"},{"tags":["java","scala","apache-spark","sbt"],"answers":[{"tags":[],"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682332629,"creation_date":1681911538,"answer_id":76055231,"question_id":70931841,"body_markdown":"This is build-time error, not compile-time error, so there is no sense to add `scala-reflect` to `build.sbt`. It&#39;s not your code that needs `scala-reflect` but sbt.\r\n\r\nThe thing is in binary incompatibility between sbt zinc `compiler-bridge` and `scala-reflect`.\r\n\r\n`scala.reflect.io.PlainNioFile` appeared in `scala-reflect` 2.12.1\r\n\r\nhttps://github.com/scala/scala/blob/v2.12.0/src/reflect/scala/reflect/io/PlainFile.scala\r\n\r\nhttps://github.com/scala/scala/blob/v2.12.1/src/reflect/scala/reflect/io/PlainFile.scala#L94\r\n\r\n`type PlainNioFile = scala.reflect.io.PlainNioFile` appeared in `compiler-bridge` 1.4.0\r\n\r\nhttps://github.com/sbt/zinc/blob/v1.4.0/internal/compiler-bridge/src/main/scala-2.12/scala/ZincCompat.scala#L19\r\n\r\nhttps://github.com/sbt/zinc/commit/172d638c28ef46a47d5f2944671103069ef7fa2c\r\n\r\nSo sbt 1.4.+ is incompatible with Scala 2.12.0-\r\n\r\nTry either to upgrade to Scala 2.12.1+ or downgrade to sbt 1.3.13-\r\n\r\n&gt; Scala version 2.12.10\r\n\r\nAs you can see in `Non-compiled module &#39;compiler-bridge_2.12&#39; for Scala 2.12.0. Compiling...`, somewhere Scala 2.12.0 is used.\r\n\r\n---\r\n\r\nhttps://github.com/scala/bug/issues/12195#issuecomment-713009934\r\n\r\n&gt; @som-snytt: sbt compiler bridge has finite backward compatibility.\r\n\r\nhttps://github.com/davidB/scala-maven-plugin/issues/474\r\n\r\n*compiler-bridge_2.12:1.3.0 not compatible with scala-compiler:2.13.1* https://github.com/sbt/zinc/issues/698\r\n\r\nhttps://stackoverflow.com/questions/60101210/error-compiling-the-sbt-component-compiler-bridge-2-11","title":"Scala 2.12: Compile error - type PlainNioFile is not a member of package scala.reflect.io","body":"<p>This is build-time error, not compile-time error, so there is no sense to add <code>scala-reflect</code> to <code>build.sbt</code>. It's not your code that needs <code>scala-reflect</code> but sbt.</p>\n<p>The thing is in binary incompatibility between sbt zinc <code>compiler-bridge</code> and <code>scala-reflect</code>.</p>\n<p><code>scala.reflect.io.PlainNioFile</code> appeared in <code>scala-reflect</code> 2.12.1</p>\n<p><a href=\"https://github.com/scala/scala/blob/v2.12.0/src/reflect/scala/reflect/io/PlainFile.scala\" rel=\"nofollow noreferrer\">https://github.com/scala/scala/blob/v2.12.0/src/reflect/scala/reflect/io/PlainFile.scala</a></p>\n<p><a href=\"https://github.com/scala/scala/blob/v2.12.1/src/reflect/scala/reflect/io/PlainFile.scala#L94\" rel=\"nofollow noreferrer\">https://github.com/scala/scala/blob/v2.12.1/src/reflect/scala/reflect/io/PlainFile.scala#L94</a></p>\n<p><code>type PlainNioFile = scala.reflect.io.PlainNioFile</code> appeared in <code>compiler-bridge</code> 1.4.0</p>\n<p><a href=\"https://github.com/sbt/zinc/blob/v1.4.0/internal/compiler-bridge/src/main/scala-2.12/scala/ZincCompat.scala#L19\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/blob/v1.4.0/internal/compiler-bridge/src/main/scala-2.12/scala/ZincCompat.scala#L19</a></p>\n<p><a href=\"https://github.com/sbt/zinc/commit/172d638c28ef46a47d5f2944671103069ef7fa2c\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/commit/172d638c28ef46a47d5f2944671103069ef7fa2c</a></p>\n<p>So sbt 1.4.+ is incompatible with Scala 2.12.0-</p>\n<p>Try either to upgrade to Scala 2.12.1+ or downgrade to sbt 1.3.13-</p>\n<blockquote>\n<p>Scala version 2.12.10</p>\n</blockquote>\n<p>As you can see in <code>Non-compiled module 'compiler-bridge_2.12' for Scala 2.12.0. Compiling...</code>, somewhere Scala 2.12.0 is used.</p>\n<hr />\n<p><a href=\"https://github.com/scala/bug/issues/12195#issuecomment-713009934\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/12195#issuecomment-713009934</a></p>\n<blockquote>\n<p>@som-snytt: sbt compiler bridge has finite backward compatibility.</p>\n</blockquote>\n<p><a href=\"https://github.com/davidB/scala-maven-plugin/issues/474\" rel=\"nofollow noreferrer\">https://github.com/davidB/scala-maven-plugin/issues/474</a></p>\n<p><em>compiler-bridge_2.12:1.3.0 not compatible with scala-compiler:2.13.1</em> <a href=\"https://github.com/sbt/zinc/issues/698\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/issues/698</a></p>\n<p><a href=\"https://stackoverflow.com/questions/60101210/error-compiling-the-sbt-component-compiler-bridge-2-11\">Error compiling the sbt component &#39;compiler-bridge_2.11&#39;</a></p>\n"}],"owner":{"account_id":5848843,"reputation":107,"user_id":4608134,"accept_rate":71,"display_name":"axn7975"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":478,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682332629,"creation_date":1643657775,"question_id":70931841,"body_markdown":"I&#39;m trying to compile my spark scala application and getting below error. Same code was working fine with scala 2.11 version.\r\n\r\nI did look at this solution and tried adding scala-reflect as the dependency but still getting the same error. I do see scala-reflect is added as dependency \r\n\r\nhttps://stackoverflow.com/questions/25189608/cant-import-scala-reflect-runtime-universe/25191687\r\n\r\n\r\nScala version 2.12.10\r\n\r\n```\r\n[info] Non-compiled module &#39;compiler-bridge_2.12&#39; for Scala 2.12.0. Compiling...\r\n/var/folders/92/9c7h444d28x8rtcm91n0r7bc0000gq/T/sbt_97534c54/scala/ZincCompat.scala:19: error: type PlainNioFile is not a member of package scala.reflect.io\r\n  type PlainNioFile = scala.reflect.io.PlainNioFile\r\n                                       ^\r\n/var/folders/92/9c7h444d28x8rtcm91n0r7bc0000gq/T/sbt_97534c54/scala/ZincCompat.scala:23: error: type mismatch;\r\n found   : pf.type (with underlying type scala.ZincCompat.PlainNioFile)\r\n required: ?{def getClass: ?}\r\n    val f = pf.getClass.getDeclaredField(&quot;nioPath&quot;) // it&#39;s not val&#39;d in 2.12 :-/\r\ntwo errors found\r\n[info] Attempting to fetch org.scala-sbt:compiler-bridge_2.12:1.6.0.\r\n[warn] Unrecognized repository Scala Plugin Bundled Repository, ignoring it\r\n[warn] Unrecognized repository Scala Plugin Bundled Repository, ignoring it\r\n[error] (Compile / compileIncremental) Error compiling the sbt component &#39;compiler-bridge_2.12&#39;\r\n```","title":"Scala 2.12: Compile error - type PlainNioFile is not a member of package scala.reflect.io","body":"<p>I'm trying to compile my spark scala application and getting below error. Same code was working fine with scala 2.11 version.</p>\n<p>I did look at this solution and tried adding scala-reflect as the dependency but still getting the same error. I do see scala-reflect is added as dependency</p>\n<p><a href=\"https://stackoverflow.com/questions/25189608/cant-import-scala-reflect-runtime-universe/25191687\">Can&#39;t import scala.reflect.runtime.universe</a></p>\n<p>Scala version 2.12.10</p>\n<pre><code>[info] Non-compiled module 'compiler-bridge_2.12' for Scala 2.12.0. Compiling...\n/var/folders/92/9c7h444d28x8rtcm91n0r7bc0000gq/T/sbt_97534c54/scala/ZincCompat.scala:19: error: type PlainNioFile is not a member of package scala.reflect.io\n  type PlainNioFile = scala.reflect.io.PlainNioFile\n                                       ^\n/var/folders/92/9c7h444d28x8rtcm91n0r7bc0000gq/T/sbt_97534c54/scala/ZincCompat.scala:23: error: type mismatch;\n found   : pf.type (with underlying type scala.ZincCompat.PlainNioFile)\n required: ?{def getClass: ?}\n    val f = pf.getClass.getDeclaredField(&quot;nioPath&quot;) // it's not val'd in 2.12 :-/\ntwo errors found\n[info] Attempting to fetch org.scala-sbt:compiler-bridge_2.12:1.6.0.\n[warn] Unrecognized repository Scala Plugin Bundled Repository, ignoring it\n[warn] Unrecognized repository Scala Plugin Bundled Repository, ignoring it\n[error] (Compile / compileIncremental) Error compiling the sbt component 'compiler-bridge_2.12'\n</code></pre>\n"},{"tags":["java","android","api","spotify"],"owner":{"account_id":28249943,"reputation":11,"user_id":21596351,"display_name":"Alvaro G."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682332429,"creation_date":1682330599,"question_id":76090725,"body_markdown":"Is there any way of using the actual Spotify Api for Android without installing Spotify app?\r\n\r\n\r\n\r\nI&#39;m trying to build a custom &quot;mini-social-network&quot; with Spotify integrations like your favorite genres or a top 5 all-time songs , for example. \r\n\r\nNot so much time ago, the entire API changed and I don&#39;t really know if I need to obligate the users to install Spotify and my app separately. I&#39;m using the Spotify SDK and the doc page says that it is necessary to install it.\r\n\r\nThanks for checking out.","title":"Is there a way to connect to Spotify api without installing its own app?","body":"<p>Is there any way of using the actual Spotify Api for Android without installing Spotify app?</p>\n<p>I'm trying to build a custom &quot;mini-social-network&quot; with Spotify integrations like your favorite genres or a top 5 all-time songs , for example.</p>\n<p>Not so much time ago, the entire API changed and I don't really know if I need to obligate the users to install Spotify and my app separately. I'm using the Spotify SDK and the doc page says that it is necessary to install it.</p>\n<p>Thanks for checking out.</p>\n"},{"tags":["java","spring","spring-boot","spring-data","spring-data-rest"],"answers":[{"tags":[],"owner":{"account_id":9506469,"reputation":71,"user_id":7065816,"display_name":"Somsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682332340,"creation_date":1682332340,"answer_id":76090960,"question_id":73648833,"body_markdown":"I solved it using Projections:\r\n\r\n    @Value(&quot;#{@userService.getUpdatedByUserName(target)}&quot;)\r\n    String getUpdatedByUserName();\r\n\r\n`userService` is the name of the UserService Spring Bean in this case.\r\n\r\nSee the [Spring Data JPA Docs][1], Example 91\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projections","title":"Is is possible to define a custom Spring Data GET Endpoint, which includes additional data?","body":"<p>I solved it using Projections:</p>\n<pre><code>@Value(&quot;#{@userService.getUpdatedByUserName(target)}&quot;)\nString getUpdatedByUserName();\n</code></pre>\n<p><code>userService</code> is the name of the UserService Spring Bean in this case.</p>\n<p>See the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#projections\" rel=\"nofollow noreferrer\">Spring Data JPA Docs</a>, Example 91</p>\n"}],"owner":{"account_id":9506469,"reputation":71,"user_id":7065816,"display_name":"Somsky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76090960,"answer_count":1,"score":0,"last_activity_date":1682332340,"creation_date":1662638703,"question_id":73648833,"body_markdown":"I need to find a way to modify data created by Spring Data endpoints, before the data gets serialized. The problem is as follows:\r\n\r\n# Base Situation\r\n\r\nThere is a Entity `Orders`, which basically is structured like this:\r\n```\r\n\r\npublic Class Order {\r\n  public String name;\r\n  public Long uuid;    // id of the user\r\n}\r\n\r\n```\r\n\r\nFor this Entity also a corresponding OrderRespository exists.\r\n\r\nNow when I fetch the data using the Spring Data Endpoint `GET /api/orders` I can retrieve the list of orders. I can also query e.g. for any property of the actuality much bigger entity, for example the name property (using `GET /api/orders?name=order42`). \r\n\r\n# Problem\r\n\r\nBut now the actual problem comes into play:\r\nI have to make an additional step though and add the actual Usernames to the returned Data. So I need to return an `OrderDTO` like this:\r\n\r\n```\r\n\r\npublic Class OrderDTO {\r\n  public String name;\r\n  public String username;    // actual name of the user, the order belongs to\r\n}\r\n\r\n```\r\n\r\nHow can I create an endpoint, that has all the query/pagination abilities of the Spring Data Endpoint, while still being able to write custom code to fetch and assign the username (which comes from an external system)?\r\nThe solution might also be to modify the data returned from Spring Data, before it is being serialized.\r\n\r\n","title":"Is is possible to define a custom Spring Data GET Endpoint, which includes additional data?","body":"<p>I need to find a way to modify data created by Spring Data endpoints, before the data gets serialized. The problem is as follows:</p>\n<h1>Base Situation</h1>\n<p>There is a Entity <code>Orders</code>, which basically is structured like this:</p>\n<pre><code>\npublic Class Order {\n  public String name;\n  public Long uuid;    // id of the user\n}\n\n</code></pre>\n<p>For this Entity also a corresponding OrderRespository exists.</p>\n<p>Now when I fetch the data using the Spring Data Endpoint <code>GET /api/orders</code> I can retrieve the list of orders. I can also query e.g. for any property of the actuality much bigger entity, for example the name property (using <code>GET /api/orders?name=order42</code>).</p>\n<h1>Problem</h1>\n<p>But now the actual problem comes into play:\nI have to make an additional step though and add the actual Usernames to the returned Data. So I need to return an <code>OrderDTO</code> like this:</p>\n<pre><code>\npublic Class OrderDTO {\n  public String name;\n  public String username;    // actual name of the user, the order belongs to\n}\n\n</code></pre>\n<p>How can I create an endpoint, that has all the query/pagination abilities of the Spring Data Endpoint, while still being able to write custom code to fetch and assign the username (which comes from an external system)?\nThe solution might also be to modify the data returned from Spring Data, before it is being serialized.</p>\n"},{"tags":["java","intellij-idea","solr","architecture","solrj"],"owner":{"account_id":28358544,"reputation":1,"user_id":21688901,"display_name":"Steve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682331870,"creation_date":1682331870,"question_id":76090895,"body_markdown":"In solrJ9.2.0 CloudSolrClient does not support a Builder with HttpClient instead now it takes Http2SolrClient, Old CloudSolrClient is now renames as CloudLegacySolrClient, how do modify this code so that i can use CloudSolrClient as CloudLegacySolrClient is deprecated in Solr 9.2.0\r\n\r\n```\r\n@Component\r\npublic class SolrClientFactoryImpl{\r\n\r\n\tprivate final HttpClient httpClient;\r\n\r\n\t@Autowired\r\n\tpublic SolrClientFactoryImpl(final HttpClient httpClient) {\r\n\t\tthis.httpClient = httpClient;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic SolrClientWrapperImpl getSolrClient(final ZookeeperConnectionSpecifier zk) {\r\n\t\tlogger.debug(&quot;Creating CloudSolrClient for cluster {}&quot;, zk.getZkConnectionString());\r\n\t\treturn new SolrClientWrapperImpl(\r\n\t\t      new CloudLegacySolrClient.Builder(\r\n\t\t            zk.getInstancesAsString(),\r\n\t\t            Optional.of(&quot;/&quot; + zk.getRootNode().orElse(&quot;&quot;)))\r\n\t\t                  .withHttpClient(httpClient)\r\n\t\t                  .build());\r\n\t}\r\n```\r\n\r\n\t@Bean\r\n\tpublic CloseableHttpClient closeableHttpClient(\r\n\t      final SolrHttpClientProperties solrHttpClientProperties,\r\n\t      final PoolingHttpClientConnectionManager poolingManager,\r\n\t      final MeterRegistry meterRegistry) {\r\n\t\tfinal HttpRequestRetryHandler requestRetryHandler = new DefaultHttpRequestRetryHandler() {\r\n\r\n\t\t\t@Override\r\n\t\t\tprotected boolean handleAsIdempotent(final HttpRequest request) {\r\n\t\t\t\t// we can&#39;t tell if a Solr request is idempotent\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfinal ConnectionKeepAliveStrategy keepAliveStrategy = new DefaultConnectionKeepAliveStrategy() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic long getKeepAliveDuration(final HttpResponse response, final HttpContext context) {\r\n\t\t\t\tfinal long maxFromHost = super.getKeepAliveDuration(response, context);\r\n\t\t\t\treturn Math.min(solrHttpClientProperties.getConnectionMaxIdleSeconds(), maxFromHost);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfinal RequestConfig requestConfig = RequestConfig.custom()\r\n\t\t      .setSocketTimeout(solrHttpClientProperties.getSocketConnectionTimeOutSeconds()\\*1000)\r\n\t\t      .build();\r\n\r\n\t\tfinal HttpRequestExecutor httpRequestExecutor = MicrometerHttpRequestExecutor\r\n\t\t      .builder(meterRegistry)\r\n\t\t      .exportTagsForRoute(true)\r\n\t\t      .build();\r\n\r\n\t\treturn HttpClientBuilder.create()\r\n\t\t      .setConnectionManager(poolingManager)\r\n\t\t      .setRetryHandler(requestRetryHandler)\r\n\t\t      .setDefaultRequestConfig(requestConfig)\r\n\t\t      .setRequestExecutor(httpRequestExecutor)\r\n\t\t      .setKeepAliveStrategy(keepAliveStrategy)\r\n\t\t      .setUserAgent(&quot;searchService&quot;)\r\n\t\t      .build();\r\n\t}\\`\\`\\`\r\n\r\n```\r\nthe constructor in @component class takes object of HttpClient which is autowired through the bean defined below, how do i modify the closeableHttpClient() method so that i returns a Http2Solrclient or if there is any way i can cast HttpClient to Http2SolrClient in getSolrClient() method since CloudLegacySolrClient is deprecated.\r\n\r\nI tried casting HttpClient to Http2SolrClient but it did not worked\r\n\t\treturn new SolrClientWrapperImpl(\r\n\t\t      new CloudSolrClient.Builder(\r\n\t\t            zk.getInstancesAsString(),\r\n\t\t            Optional.of(&quot;/&quot; + zk.getRootNode().orElse(&quot;&quot;)))\r\n\t\t                  .withHttpClient((Http2SolrClient) httpClient)\r\n\t\t                  .build());\r\n```","title":"Cast CloudLegacySolrClient to CloudSolrClient","body":"<p>In solrJ9.2.0 CloudSolrClient does not support a Builder with HttpClient instead now it takes Http2SolrClient, Old CloudSolrClient is now renames as CloudLegacySolrClient, how do modify this code so that i can use CloudSolrClient as CloudLegacySolrClient is deprecated in Solr 9.2.0</p>\n<pre><code>@Component\npublic class SolrClientFactoryImpl{\n\n    private final HttpClient httpClient;\n\n    @Autowired\n    public SolrClientFactoryImpl(final HttpClient httpClient) {\n        this.httpClient = httpClient;\n    }\n\n    @Override\n    public SolrClientWrapperImpl getSolrClient(final ZookeeperConnectionSpecifier zk) {\n        logger.debug(&quot;Creating CloudSolrClient for cluster {}&quot;, zk.getZkConnectionString());\n        return new SolrClientWrapperImpl(\n              new CloudLegacySolrClient.Builder(\n                    zk.getInstancesAsString(),\n                    Optional.of(&quot;/&quot; + zk.getRootNode().orElse(&quot;&quot;)))\n                          .withHttpClient(httpClient)\n                          .build());\n    }\n</code></pre>\n<pre><code>@Bean\npublic CloseableHttpClient closeableHttpClient(\n      final SolrHttpClientProperties solrHttpClientProperties,\n      final PoolingHttpClientConnectionManager poolingManager,\n      final MeterRegistry meterRegistry) {\n    final HttpRequestRetryHandler requestRetryHandler = new DefaultHttpRequestRetryHandler() {\n\n        @Override\n        protected boolean handleAsIdempotent(final HttpRequest request) {\n            // we can't tell if a Solr request is idempotent\n            return false;\n        }\n    };\n\n    final ConnectionKeepAliveStrategy keepAliveStrategy = new DefaultConnectionKeepAliveStrategy() {\n\n        @Override\n        public long getKeepAliveDuration(final HttpResponse response, final HttpContext context) {\n            final long maxFromHost = super.getKeepAliveDuration(response, context);\n            return Math.min(solrHttpClientProperties.getConnectionMaxIdleSeconds(), maxFromHost);\n        }\n    };\n\n    final RequestConfig requestConfig = RequestConfig.custom()\n          .setSocketTimeout(solrHttpClientProperties.getSocketConnectionTimeOutSeconds()\\*1000)\n          .build();\n\n    final HttpRequestExecutor httpRequestExecutor = MicrometerHttpRequestExecutor\n          .builder(meterRegistry)\n          .exportTagsForRoute(true)\n          .build();\n\n    return HttpClientBuilder.create()\n          .setConnectionManager(poolingManager)\n          .setRetryHandler(requestRetryHandler)\n          .setDefaultRequestConfig(requestConfig)\n          .setRequestExecutor(httpRequestExecutor)\n          .setKeepAliveStrategy(keepAliveStrategy)\n          .setUserAgent(&quot;searchService&quot;)\n          .build();\n}\\`\\`\\`\n</code></pre>\n<pre><code>the constructor in @component class takes object of HttpClient which is autowired through the bean defined below, how do i modify the closeableHttpClient() method so that i returns a Http2Solrclient or if there is any way i can cast HttpClient to Http2SolrClient in getSolrClient() method since CloudLegacySolrClient is deprecated.\n\nI tried casting HttpClient to Http2SolrClient but it did not worked\n        return new SolrClientWrapperImpl(\n              new CloudSolrClient.Builder(\n                    zk.getInstancesAsString(),\n                    Optional.of(&quot;/&quot; + zk.getRootNode().orElse(&quot;&quot;)))\n                          .withHttpClient((Http2SolrClient) httpClient)\n                          .build());\n</code></pre>\n"},{"tags":["java","weka"],"comments":[{"owner":{"account_id":5978100,"reputation":2493,"user_id":4698227,"display_name":"fracpete"},"score":0,"creation_date":1682297443,"post_id":76087467,"comment_id":134188283,"body_markdown":"How are you launching Weka? On what operating system (Linux/Mac/Windows)? What version of Java are you using?","body":"How are you launching Weka? On what operating system (Linux/Mac/Windows)? What version of Java are you using?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682329490,"post_id":76087467,"comment_id":134192373,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28391311,"reputation":1,"user_id":21717040,"display_name":"Ismaeel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682331630,"creation_date":1682287135,"question_id":76087467,"body_markdown":"When I tried to launch `weka 3.8.6`.\r\n\r\nIt didn&#39;t launch but pops up `Weka Error`.\r\nWhen I tried to run `weka 3.8.6` the Error is:\r\n\r\n```\r\njava.lang.reflect.InvocationTargetException \r\n```","title":"How to fix weka error java.lang.reflect.InvocationTargetException","body":"<p>When I tried to launch <code>weka 3.8.6</code>.</p>\n<p>It didn't launch but pops up <code>Weka Error</code>.\nWhen I tried to run <code>weka 3.8.6</code> the Error is:</p>\n<pre><code>java.lang.reflect.InvocationTargetException \n</code></pre>\n"},{"tags":["java","azure","azure-blob-storage","native","quarkus"],"owner":{"account_id":9082127,"reputation":121,"user_id":6761607,"display_name":"Hapaja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682331174,"creation_date":1682330634,"question_id":76090727,"body_markdown":"Problem occurs on jar and native. During staging chunks i randomly get this error\r\n&gt; io.net.han.ssl.SslHandler] (vert.x-eventloop-thread-3) [id: //redacted, L:///redacted - R://redacted.blob.core.windows.net///redacted] Last write attempt timed out; force-closing the connection.\r\n\r\n&gt; [com.azu.sto.blo.imp.Blo.stageBlock] (vert.x-eventloop-thread-3) &lt;-- HTTP FAILED: Connection was closed\r\n\r\n&gt;(executor-thread-2) Got exception: : io.vertx.core.http.HttpClosedException: Connection was closed\r\n\r\nAzure configuration class:\r\n\r\n```\r\n@ApplicationScoped\r\n@Slf4j\r\npublic class AzureConfig {\r\n    private static final FixedDelayOptions RETRY_OPTION = new FixedDelayOptions(3, Duration.ofSeconds(10));\r\n    private final AzureProperties properties;\r\n\r\n    public AzureConfig(AzureProperties properties) {\r\n        this.properties = properties;\r\n    }\r\n\r\n    public BlobContainerClient blobContainerClient() {\r\n        return createBuilder().buildClient().getBlobContainerClient(properties.containerName());\r\n    }\r\n\r\n\r\n    private BlobServiceClientBuilder createBuilder() {\r\n        final String url = properties.url();\r\n        final String baseUrl = url.endsWith(&quot;/&quot;) ? url : url + &quot;/&quot;;\r\n\r\n        final StorageSharedKeyCredential credential = new StorageSharedKeyCredential(\r\n                properties.accountName(), properties.accessKey());\r\n\r\n        return new BlobServiceClientBuilder()\r\n                .endpoint(baseUrl + properties.accountName())\r\n                .credential(credential)\r\n                .httpClient(getHttpClient())\r\n                .httpLogOptions(new HttpLogOptions()\r\n                        .setLogLevel(HttpLogDetailLevel.BODY_AND_HEADERS)\r\n                        .setPrettyPrintBody(true))\r\n                .retryOptions(new RetryOptions(RETRY_OPTION));\r\n    }\r\n\r\n    private static HttpClient getHttpClient() {\r\n        final HttpClientOptions clientOptions = new HttpClientOptions()\r\n                .setReadTimeout(Duration.ofMinutes(3))\r\n                .setConnectTimeout(Duration.ofMinutes(3));\r\n        return HttpClient.createDefault(clientOptions);\r\n    }\r\n\r\n}\r\n```\r\nSince i can&#39;t share whole code i provided pseudocode for class which is responsible for uploading chunks of file to cloud. We are not using azure async client.\r\n\r\n```\r\ninitialize azure blob client\r\ninitialize azure block blob client\r\n\r\noptions = BlockBlobStageBlockOptions(chunkId, binaryData);\r\nresponse = stage chunk with response(options, timeout=null, context.NONE)\r\n...check response and provide appropriate information to client\r\n\r\nif(is this last chunk)\r\n    options = BlockBlobCommitBlockListOptions(chuIdList, binaryData);\r\n    response = commit block list with response(options, timeout=null, context.NONE)\r\n    ...check response and provide appropriate information to client\r\n```\r\n\r\n\r\nDependencies:\r\n- quarkus:2.16.0.Final\r\n- camel-quarkus-azure-storage-blob:2.16.0\r\n\r\nConfiguration .yaml only contains simple azure configuration: container name, url, account-name, access-key\r\n\r\n\r\n\r\nWhat i tried to solve this problem:\r\n- increase connection timeout in azure client\r\n- set camel.component.azure-storage-blob.timeout to higher Duration\r\n- set quarkus.http.read-timeout to higher Duration\r\n- set quarkus.rest-client.connect-timeout and read-timeout to higher Duration\r\n\r\nWe thought it might be connected to some weird behaviour in camel-quarkus-azure-storage-blob so we swapped it for testing purposes to com.azure.azure-storage-blob and problem didn&#39;t occur.\r\n\r\nRight now we can&#39;t use com.azure.azure-storage-blob in native since we have a lot of problems during native build.\r\n\r\nCould you please help me with this problem?","title":"Quarkus azure blob storage connection was closed","body":"<p>Problem occurs on jar and native. During staging chunks i randomly get this error</p>\n<blockquote>\n<p>io.net.han.ssl.SslHandler] (vert.x-eventloop-thread-3) [id: //redacted, L:///redacted - R://redacted.blob.core.windows.net///redacted] Last write attempt timed out; force-closing the connection.</p>\n</blockquote>\n<blockquote>\n<p>[com.azu.sto.blo.imp.Blo.stageBlock] (vert.x-eventloop-thread-3) &lt;-- HTTP FAILED: Connection was closed</p>\n</blockquote>\n<blockquote>\n<p>(executor-thread-2) Got exception: : io.vertx.core.http.HttpClosedException: Connection was closed</p>\n</blockquote>\n<p>Azure configuration class:</p>\n<pre><code>@ApplicationScoped\n@Slf4j\npublic class AzureConfig {\n    private static final FixedDelayOptions RETRY_OPTION = new FixedDelayOptions(3, Duration.ofSeconds(10));\n    private final AzureProperties properties;\n\n    public AzureConfig(AzureProperties properties) {\n        this.properties = properties;\n    }\n\n    public BlobContainerClient blobContainerClient() {\n        return createBuilder().buildClient().getBlobContainerClient(properties.containerName());\n    }\n\n\n    private BlobServiceClientBuilder createBuilder() {\n        final String url = properties.url();\n        final String baseUrl = url.endsWith(&quot;/&quot;) ? url : url + &quot;/&quot;;\n\n        final StorageSharedKeyCredential credential = new StorageSharedKeyCredential(\n                properties.accountName(), properties.accessKey());\n\n        return new BlobServiceClientBuilder()\n                .endpoint(baseUrl + properties.accountName())\n                .credential(credential)\n                .httpClient(getHttpClient())\n                .httpLogOptions(new HttpLogOptions()\n                        .setLogLevel(HttpLogDetailLevel.BODY_AND_HEADERS)\n                        .setPrettyPrintBody(true))\n                .retryOptions(new RetryOptions(RETRY_OPTION));\n    }\n\n    private static HttpClient getHttpClient() {\n        final HttpClientOptions clientOptions = new HttpClientOptions()\n                .setReadTimeout(Duration.ofMinutes(3))\n                .setConnectTimeout(Duration.ofMinutes(3));\n        return HttpClient.createDefault(clientOptions);\n    }\n\n}\n</code></pre>\n<p>Since i can't share whole code i provided pseudocode for class which is responsible for uploading chunks of file to cloud. We are not using azure async client.</p>\n<pre><code>initialize azure blob client\ninitialize azure block blob client\n\noptions = BlockBlobStageBlockOptions(chunkId, binaryData);\nresponse = stage chunk with response(options, timeout=null, context.NONE)\n...check response and provide appropriate information to client\n\nif(is this last chunk)\n    options = BlockBlobCommitBlockListOptions(chuIdList, binaryData);\n    response = commit block list with response(options, timeout=null, context.NONE)\n    ...check response and provide appropriate information to client\n</code></pre>\n<p>Dependencies:</p>\n<ul>\n<li>quarkus:2.16.0.Final</li>\n<li>camel-quarkus-azure-storage-blob:2.16.0</li>\n</ul>\n<p>Configuration .yaml only contains simple azure configuration: container name, url, account-name, access-key</p>\n<p>What i tried to solve this problem:</p>\n<ul>\n<li>increase connection timeout in azure client</li>\n<li>set camel.component.azure-storage-blob.timeout to higher Duration</li>\n<li>set quarkus.http.read-timeout to higher Duration</li>\n<li>set quarkus.rest-client.connect-timeout and read-timeout to higher Duration</li>\n</ul>\n<p>We thought it might be connected to some weird behaviour in camel-quarkus-azure-storage-blob so we swapped it for testing purposes to com.azure.azure-storage-blob and problem didn't occur.</p>\n<p>Right now we can't use com.azure.azure-storage-blob in native since we have a lot of problems during native build.</p>\n<p>Could you please help me with this problem?</p>\n"},{"tags":["java","rule-engine"],"owner":{"account_id":18979715,"reputation":43,"user_id":13851333,"display_name":"Muhamed Risvan M S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682331145,"creation_date":1682331145,"question_id":76090798,"body_markdown":"I have an interface class like this \r\n\r\n        public interface Simple {\r\n        Double AirTicketPrice(String departureCity, String destinationCity);\r\n    }\r\n\r\nI have a method as follows \r\n\r\n    void openlTest() {\r\n    \tRulesEngineFactory&lt;Simple&gt; engineFactory = new RulesEngineFactory&lt;&gt; \r\n        (&quot;C:/dump/TicketsPrice.xlsx&quot;);\r\n    \tengineFactory.setInterfaceClass(Simple.class);\r\n    \tSimple rules = (Simple) engineFactory.newInstance();\r\n    \trules.AirTicketPrice(&quot;Chicago&quot;, &quot;Madrid&quot;);\r\n    \r\n    }\r\n\r\nand I have TicketsPrice.xlsx file in which the rules are defined i.e on entering the departure and destination city, the ticket amount will be returned.\r\n\r\nSo can anyone explain how to read/test those rules in openL tablet rule service from the java code. I&#39;ve the above mentioned method but it is not working.","title":"How to integrate rules in the openL rule service with java code","body":"<p>I have an interface class like this</p>\n<pre><code>    public interface Simple {\n    Double AirTicketPrice(String departureCity, String destinationCity);\n}\n</code></pre>\n<p>I have a method as follows</p>\n<pre><code>void openlTest() {\n    RulesEngineFactory&lt;Simple&gt; engineFactory = new RulesEngineFactory&lt;&gt; \n    (&quot;C:/dump/TicketsPrice.xlsx&quot;);\n    engineFactory.setInterfaceClass(Simple.class);\n    Simple rules = (Simple) engineFactory.newInstance();\n    rules.AirTicketPrice(&quot;Chicago&quot;, &quot;Madrid&quot;);\n\n}\n</code></pre>\n<p>and I have TicketsPrice.xlsx file in which the rules are defined i.e on entering the departure and destination city, the ticket amount will be returned.</p>\n<p>So can anyone explain how to read/test those rules in openL tablet rule service from the java code. I've the above mentioned method but it is not working.</p>\n"},{"tags":["java","windows"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682331142,"post_id":76090730,"comment_id":134192741,"body_markdown":"Weird. The &#39;Gordian knot solution&#39; - make an executable jar then you can do `java -jar test.jar`","body":"Weird. The &#39;Gordian knot solution&#39; - make an executable jar then you can do <code>java -jar test.jar</code>"},{"owner":{"account_id":28360995,"reputation":11,"user_id":21691031,"display_name":"SONGYEON WON"},"score":0,"creation_date":1682332400,"post_id":76090730,"comment_id":134192995,"body_markdown":"-jar option working normally, also -classpath working on powershell normally.\nbit if i use -classpath on cmd , occur problem...\nactually ... i found this problem , when i build project on intellij..","body":"-jar option working normally, also -classpath working on powershell normally. bit if i use -classpath on cmd , occur problem... actually ... i found this problem , when i build project on intellij.."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682332498,"post_id":76090730,"comment_id":134193007,"body_markdown":"Funnily enough - I was going to say try Powershell ;)","body":"Funnily enough - I was going to say try Powershell ;)"},{"owner":{"account_id":28360995,"reputation":11,"user_id":21691031,"display_name":"SONGYEON WON"},"score":0,"creation_date":1682332679,"post_id":76090730,"comment_id":134193043,"body_markdown":"I don&#39;t know how to solve this problem. I can use powershell, but the same error occurs when I build the project in intellij.","body":"I don&#39;t know how to solve this problem. I can use powershell, but the same error occurs when I build the project in intellij."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682333184,"post_id":76090730,"comment_id":134193128,"body_markdown":"I thought you just said what I mentioned *did* solve it? ;) I&#39;m hoping your posted command input and output is 100% correct? If so, that shouldn&#39;t occur, I don&#39;t think, *whatever* IntelliJ has done to your jar","body":"I thought you just said what I mentioned <i>did</i> solve it? ;) I&#39;m hoping your posted command input and output is 100% correct? If so, that shouldn&#39;t occur, I don&#39;t think, <i>whatever</i> IntelliJ has done to your jar"},{"owner":{"account_id":28360995,"reputation":11,"user_id":21691031,"display_name":"SONGYEON WON"},"score":0,"creation_date":1682333796,"post_id":76090730,"comment_id":134193254,"body_markdown":"It seems that something is being manipulated in the security program. The problem is now solved. thanks.","body":"It seems that something is being manipulated in the security program. The problem is now solved. thanks."}],"owner":{"account_id":28360995,"reputation":11,"user_id":21691031,"display_name":"SONGYEON WON"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682330694,"creation_date":1682330694,"question_id":76090730,"body_markdown":"Class name is converted to lower case when java command is executed on Windows\r\n\r\n\r\n```\r\nC:\\&gt;java -classpath test.jar org.test.Server\r\nError: Could not find or load main class org.test.server\r\n```\r\n\r\n&#39;org.test.Server&#39; has been changed to &#39;org.test.server&#39;. \r\nActually, there is Server Class, but ClassNotFoundException occurs.\r\n\r\n\r\nI have installed several versions of java, but the same issue still occurs.","title":"Class name is converted to lower case when java command is executed on Windows","body":"<p>Class name is converted to lower case when java command is executed on Windows</p>\n<pre><code>C:\\&gt;java -classpath test.jar org.test.Server\nError: Could not find or load main class org.test.server\n</code></pre>\n<p>'org.test.Server' has been changed to 'org.test.server'.\nActually, there is Server Class, but ClassNotFoundException occurs.</p>\n<p>I have installed several versions of java, but the same issue still occurs.</p>\n"},{"tags":["java","apache-spark","apache-spark-sql","bigdata"],"owner":{"account_id":2481864,"reputation":830,"user_id":2161180,"accept_rate":71,"display_name":"fdam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682330571,"creation_date":1478692715,"question_id":40506487,"body_markdown":"I am testing this framework specifically the SQL module with the java API. Running it as standalone in java, I have better results (even running in the same machine) then pure sql (running over pgadmin).\r\n\r\nExecuting exactly the same query in the same bd (postgres 9.4 and 9.5), sparks is almost 5 x faster, below is my code:\r\n\r\n    private static final JavaSparkContext sc =\r\n                new JavaSparkContext(new SparkConf()\r\n                        .setAppName(&quot;SparkJdbc&quot;).setMaster(&quot;local[*]&quot;));\r\n        \r\n        public static void main(String[] args) {\r\n            \r\n            StringBuilder sql = new StringBuilder();\r\n            sql.append(&quot; my query &quot;);\r\n            \r\n            long time = System.currentTimeMillis();\r\n            DbConnection dbConnection = new DbConnection(&quot;org.postgresql.Driver&quot;, &quot;jdbc:postgresql://localhost:5432/mydb&quot;, &quot;user&quot;, &quot;pass&quot;);\r\n            JdbcRDD&lt;Object[]&gt; jdbcRDD = new JdbcRDD&lt;&gt;(sc.sc(), dbConnection, sql.toString(),\r\n                                  1, 1000000000, 20, new MapResult(), ClassManifestFactory$.MODULE$.fromClass(Object[].class));\r\n            \r\n            JavaRDD&lt;Object[]&gt; javaRDD = JavaRDD.fromRDD(jdbcRDD, ClassManifestFactory$.MODULE$.fromClass(Object[].class));\r\n            \r\n    //        javaRDD.map((final Object[] record) -&gt; {\r\n    //            StringBuilder line = new StringBuilder();\r\n    //            for (Object o : record) {\r\n    //                line.append(o != null ? o.toString() : &quot;&quot;).append(&quot;,&quot;);\r\n    //            }\r\n    //            return line.toString();\r\n    //        }).collect().forEach(rec -&gt; System.out.println(rec));\r\n            \r\n            System.out.println(&quot;Total: &quot; + javaRDD.count());\r\n            System.out.println(&quot;Total time: &quot; + (System.currentTimeMillis() - time));\r\n            \r\n        } \r\n\r\nEven if I uncomment the code to print the results to the console, it still running faster.\r\n\r\nI am wondering how can it be faster, if the source (bd) is the same, can anyone explain it? Maybe using parallel query?\r\n\r\n**EDIT:** There is a relevant information about the postgres process, in standby, the postgres uses 12 process and running the query over pgadmin, the number does not change, over spark, it up to 20, that means probably spark uses some parallel mechanism to do the job.","title":"How does apache spark works?","body":"<p>I am testing this framework specifically the SQL module with the java API. Running it as standalone in java, I have better results (even running in the same machine) then pure sql (running over pgadmin).</p>\n\n<p>Executing exactly the same query in the same bd (postgres 9.4 and 9.5), sparks is almost 5 x faster, below is my code:</p>\n\n<pre><code>private static final JavaSparkContext sc =\n            new JavaSparkContext(new SparkConf()\n                    .setAppName(\"SparkJdbc\").setMaster(\"local[*]\"));\n\n    public static void main(String[] args) {\n\n        StringBuilder sql = new StringBuilder();\n        sql.append(\" my query \");\n\n        long time = System.currentTimeMillis();\n        DbConnection dbConnection = new DbConnection(\"org.postgresql.Driver\", \"jdbc:postgresql://localhost:5432/mydb\", \"user\", \"pass\");\n        JdbcRDD&lt;Object[]&gt; jdbcRDD = new JdbcRDD&lt;&gt;(sc.sc(), dbConnection, sql.toString(),\n                              1, 1000000000, 20, new MapResult(), ClassManifestFactory$.MODULE$.fromClass(Object[].class));\n\n        JavaRDD&lt;Object[]&gt; javaRDD = JavaRDD.fromRDD(jdbcRDD, ClassManifestFactory$.MODULE$.fromClass(Object[].class));\n\n//        javaRDD.map((final Object[] record) -&gt; {\n//            StringBuilder line = new StringBuilder();\n//            for (Object o : record) {\n//                line.append(o != null ? o.toString() : \"\").append(\",\");\n//            }\n//            return line.toString();\n//        }).collect().forEach(rec -&gt; System.out.println(rec));\n\n        System.out.println(\"Total: \" + javaRDD.count());\n        System.out.println(\"Total time: \" + (System.currentTimeMillis() - time));\n\n    } \n</code></pre>\n\n<p>Even if I uncomment the code to print the results to the console, it still running faster.</p>\n\n<p>I am wondering how can it be faster, if the source (bd) is the same, can anyone explain it? Maybe using parallel query?</p>\n\n<p><strong>EDIT:</strong> There is a relevant information about the postgres process, in standby, the postgres uses 12 process and running the query over pgadmin, the number does not change, over spark, it up to 20, that means probably spark uses some parallel mechanism to do the job.</p>\n"},{"tags":["java","class","declare"],"comments":[{"owner":{"account_id":61252,"reputation":407513,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"score":1,"creation_date":1456331143,"post_id":35607486,"comment_id":58899324,"body_markdown":"Those error messages are pretty clear. Java requires public classes to be in files with corresponding names, so class `Lab10a` should be in a file called `Lab10a.java`.","body":"Those error messages are pretty clear. Java requires public classes to be in files with corresponding names, so class <code>Lab10a</code> should be in a file called <code>Lab10a.java</code>."},{"owner":{"account_id":7911691,"reputation":11,"user_id":5975547,"display_name":"Emmanuel"},"score":0,"creation_date":1456331255,"post_id":35607486,"comment_id":58899418,"body_markdown":"could i just change the class name to file file name","body":"could i just change the class name to file file name"},{"owner":{"account_id":61252,"reputation":407513,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"score":0,"creation_date":1456332986,"post_id":35607486,"comment_id":58900818,"body_markdown":"Yes, you can change the class name instead.","body":"Yes, you can change the class name instead."}],"answers":[{"tags":[],"owner":{"account_id":5110015,"reputation":13405,"user_id":4096935,"accept_rate":100,"display_name":"Webert Lima"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456331566,"creation_date":1456331566,"answer_id":35607752,"question_id":35607486,"body_markdown":"Just move your Lab10a class definition to a separate java file named Lab10a.java and import it in the other classes the use it.","title":"should be declared as a file name","body":"<p>Just move your Lab10a class definition to a separate java file named Lab10a.java and import it in the other classes the use it.</p>\n"}],"owner":{"account_id":7911691,"reputation":11,"user_id":5975547,"display_name":"Emmanuel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1678,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1682330496,"answer_count":1,"score":-1,"last_activity_date":1682330549,"creation_date":1456330967,"question_id":35607486,"body_markdown":"My teacher is away for 2 days and I&#39;m stuck. I keep getting these two errors when I try to run the main file\r\n\r\n&gt; U:\\Computer science\\AP Computer\r\n&gt; Science\\10.boolean\\lab10_boolean\\PassRunner.java:8: error: class\r\n&gt; Lab10a is public, should be declared in a file named Lab10a.java\r\n\r\nand\r\n\r\n&gt; U:\\Computer science\\AP Computer\r\n&gt; Science\\10.boolean\\lab10_boolean\\PassRunner.java:12: error:\r\n&gt; constructor PasswordCheck in class PasswordCheck cannot be applied to\r\n&gt; given types;\r\n\r\n\r\nThe code in my main file is\r\n\r\n    import static java.lang.System.*;\r\n    \r\n    public class Lab10a\r\n    {\r\n    \tpublic static void main( String args[] )\r\n    \t{\r\n    \t\tPasswordCheck test = new PasswordCheck();\r\n    \t\ttest.check();\r\n    \t}\r\n    }\r\n\r\nand is named PassRunner.java\r\n\r\nThe code in my other class file is\r\n\r\n    import java.util.Scanner;\r\n    import static java.lang.System.*;\r\n    \r\n    class PasswordCheck\r\n    {\r\n    \tprivate String password = &quot;mchammergohammer&quot;;\r\n    \r\n    \tpublic PasswordCheck(String word)\r\n    \t{\r\n    \t\tword = &quot;&quot;;\r\n    \t}\r\n    \r\n    \tpublic void check()\r\n    \t{\r\n    \t\tScanner keyboard = new Scanner(System.in);\r\n    \t\tint x = 0;\r\n    \t\tString tmpPas = &quot;&quot;;\r\n    \r\n    \t\tdo{\r\n    \t\t\tout.println(&quot;THIS LEVEL OF SECURITY REQURES A PASSWORD&quot;);\r\n    \t\t\ttmpPas = keyboard.next();\r\n    \t\t\tif( tmpPas == password )\r\n    \t\t\t\tout.println(&quot;ACCESS GRANTED&quot;);\r\n    \t\t\telse\r\n    \t\t\t\tx++;\r\n    \t\t\t\tout.println(&quot;ACCESS DENIED&quot;);\r\n    \t\t}while( tmpPas != password || x &lt;= 10);\r\n    \t\tif( x &gt;= 10);\r\n    \t\t\tout.println( &quot;YOU HAVE REACHED THE MINIMUM AMOUNT OF ATTEMPTS&quot;);\r\n    \r\n    \t}\r\n    \r\n    \tpublic void setPass()\r\n    \t{\r\n    \t\tout.println(&quot;Enter your current password: &quot;);\r\n    \t}\r\n    }\r\n\r\nand it is named PassWordCheck.java\r\n\r\nI&#39;ve looked at other code and I still don&#39;t understand, as I am still new to coding.","title":"should be declared as a file name","body":"<p>My teacher is away for 2 days and I'm stuck. I keep getting these two errors when I try to run the main file</p>\n<blockquote>\n<p>U:\\Computer science\\AP Computer\nScience\\10.boolean\\lab10_boolean\\PassRunner.java:8: error: class\nLab10a is public, should be declared in a file named Lab10a.java</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>U:\\Computer science\\AP Computer\nScience\\10.boolean\\lab10_boolean\\PassRunner.java:12: error:\nconstructor PasswordCheck in class PasswordCheck cannot be applied to\ngiven types;</p>\n</blockquote>\n<p>The code in my main file is</p>\n<pre><code>import static java.lang.System.*;\n\npublic class Lab10a\n{\n    public static void main( String args[] )\n    {\n        PasswordCheck test = new PasswordCheck();\n        test.check();\n    }\n}\n</code></pre>\n<p>and is named PassRunner.java</p>\n<p>The code in my other class file is</p>\n<pre><code>import java.util.Scanner;\nimport static java.lang.System.*;\n\nclass PasswordCheck\n{\n    private String password = &quot;mchammergohammer&quot;;\n\n    public PasswordCheck(String word)\n    {\n        word = &quot;&quot;;\n    }\n\n    public void check()\n    {\n        Scanner keyboard = new Scanner(System.in);\n        int x = 0;\n        String tmpPas = &quot;&quot;;\n\n        do{\n            out.println(&quot;THIS LEVEL OF SECURITY REQURES A PASSWORD&quot;);\n            tmpPas = keyboard.next();\n            if( tmpPas == password )\n                out.println(&quot;ACCESS GRANTED&quot;);\n            else\n                x++;\n                out.println(&quot;ACCESS DENIED&quot;);\n        }while( tmpPas != password || x &lt;= 10);\n        if( x &gt;= 10);\n            out.println( &quot;YOU HAVE REACHED THE MINIMUM AMOUNT OF ATTEMPTS&quot;);\n\n    }\n\n    public void setPass()\n    {\n        out.println(&quot;Enter your current password: &quot;);\n    }\n}\n</code></pre>\n<p>and it is named PassWordCheck.java</p>\n<p>I've looked at other code and I still don't understand, as I am still new to coding.</p>\n"},{"tags":["java","spring","spring-cloud-config"],"owner":{"account_id":28395418,"reputation":1,"user_id":21720562,"display_name":"Amrit Twanabasu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682330047,"creation_date":1682329989,"question_id":76090653,"body_markdown":"I have a plain text file in the Config Git Repository along with other config files.\r\n\r\n```\r\n.\r\nâââ app-a-config/\r\n    âââ application.yml\r\n    âââ application-local.yml\r\n    âââ another-config.xml\r\n```\r\n\r\nContents of `application.yml`\r\n\r\n```yml\r\nsomeconfig:\r\n  value: 100\r\n```\r\n\r\nContents of `application-local.yml`\r\n\r\n```yml\r\nspring:\r\n  datasource:\r\n   url: jdbc:mysql://localhost:3306/localdb\r\n   username: appuser\r\n   password: localpassword\r\n```\r\n\r\nContents of `another-config.xml`\r\n\r\n```xml\r\n&lt;name&gt;${profile}-another-conf&lt;/name&gt;\r\n&lt;connection&gt;\r\n    &lt;url&gt;${spring.datasource.url}&lt;/url&gt;\r\n    &lt;username&gt;${spring.datasource.username}&lt;/username&gt;\r\n    &lt;password&gt;${spring.datasource.password}&lt;/password&gt;\r\n&lt;/connection&gt;\r\n&lt;someconf&gt;${someconfig.value}&lt;/someconf&gt;\r\n```\r\n\r\nWhenever I call the `{configserveruri}/app-a/local/master/another-config.xml`, all the placeholders except `${profile}` are resolved correctly. Is there any way to resolve that placeholder from the URL?\r\n\r\nExample of output:\r\n\r\n```xml\r\n&lt;name&gt;${profile}-another-conf&lt;/name&gt;\r\n&lt;connection&gt;\r\n    &lt;url&gt;jdbc:mysql://localhost:3306/localdb&lt;/url&gt;\r\n    &lt;username&gt;appuser&lt;/username&gt;\r\n    &lt;password&gt;localpassword&lt;/password&gt;\r\n&lt;/connection&gt;\r\n&lt;someconf&gt;100&lt;/someconf&gt;\r\n```\r\n\r\nVersions:\r\n\r\n1. Spring Boot - 3.0.5\r\n2. Spring Cloud - 2022.0.1\r\n3. Java - 17\r\n\r\nI tried the following placeholders as well, but nothing seems to work.\r\n\r\n1. `${profiles}`\r\n2. `${spring.profiles}`\r\n3. `${spring.profiles.active}`\r\n4. `${profile}`\r\n\r\nThe expected result was\r\n\r\n```xml\r\n&lt;name&gt;local-another-conf&lt;/name&gt;\r\n&lt;connection&gt;\r\n    &lt;url&gt;jdbc:mysql://localhost:3306/localdb&lt;/url&gt;\r\n    &lt;username&gt;appuser&lt;/username&gt;\r\n    &lt;password&gt;localpassword&lt;/password&gt;\r\n&lt;/connection&gt;\r\n&lt;someconf&gt;100&lt;/someconf&gt;\r\n```","title":"Replacing Spring Cloud Server Placeholder in a plain text file","body":"<p>I have a plain text file in the Config Git Repository along with other config files.</p>\n<pre><code>.\nâââ app-a-config/\n    âââ application.yml\n    âââ application-local.yml\n    âââ another-config.xml\n</code></pre>\n<p>Contents of <code>application.yml</code></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>someconfig:\n  value: 100\n</code></pre>\n<p>Contents of <code>application-local.yml</code></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n   url: jdbc:mysql://localhost:3306/localdb\n   username: appuser\n   password: localpassword\n</code></pre>\n<p>Contents of <code>another-config.xml</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;name&gt;${profile}-another-conf&lt;/name&gt;\n&lt;connection&gt;\n    &lt;url&gt;${spring.datasource.url}&lt;/url&gt;\n    &lt;username&gt;${spring.datasource.username}&lt;/username&gt;\n    &lt;password&gt;${spring.datasource.password}&lt;/password&gt;\n&lt;/connection&gt;\n&lt;someconf&gt;${someconfig.value}&lt;/someconf&gt;\n</code></pre>\n<p>Whenever I call the <code>{configserveruri}/app-a/local/master/another-config.xml</code>, all the placeholders except <code>${profile}</code> are resolved correctly. Is there any way to resolve that placeholder from the URL?</p>\n<p>Example of output:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;name&gt;${profile}-another-conf&lt;/name&gt;\n&lt;connection&gt;\n    &lt;url&gt;jdbc:mysql://localhost:3306/localdb&lt;/url&gt;\n    &lt;username&gt;appuser&lt;/username&gt;\n    &lt;password&gt;localpassword&lt;/password&gt;\n&lt;/connection&gt;\n&lt;someconf&gt;100&lt;/someconf&gt;\n</code></pre>\n<p>Versions:</p>\n<ol>\n<li>Spring Boot - 3.0.5</li>\n<li>Spring Cloud - 2022.0.1</li>\n<li>Java - 17</li>\n</ol>\n<p>I tried the following placeholders as well, but nothing seems to work.</p>\n<ol>\n<li><code>${profiles}</code></li>\n<li><code>${spring.profiles}</code></li>\n<li><code>${spring.profiles.active}</code></li>\n<li><code>${profile}</code></li>\n</ol>\n<p>The expected result was</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;name&gt;local-another-conf&lt;/name&gt;\n&lt;connection&gt;\n    &lt;url&gt;jdbc:mysql://localhost:3306/localdb&lt;/url&gt;\n    &lt;username&gt;appuser&lt;/username&gt;\n    &lt;password&gt;localpassword&lt;/password&gt;\n&lt;/connection&gt;\n&lt;someconf&gt;100&lt;/someconf&gt;\n</code></pre>\n"},{"tags":["java","maven","exception","intellij-idea","junit"],"comments":[{"owner":{"account_id":24517308,"reputation":401,"user_id":18430882,"display_name":"quickfix"},"score":0,"creation_date":1682342926,"post_id":76090587,"comment_id":134195354,"body_markdown":"which build framework do you use? do you have any third-party plugins enabled? also, sounds like https://youtrack.jetbrains.com/issue/IDEA-289953, check the discussion in comments","body":"which build framework do you use? do you have any third-party plugins enabled? also, sounds like <a href=\"https://youtrack.jetbrains.com/issue/IDEA-289953\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-289953</a>, check the discussion in comments"}],"owner":{"account_id":26815323,"reputation":1,"user_id":20405354,"display_name":"Dan Rotman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682329738,"creation_date":1682329440,"question_id":76090587,"body_markdown":"I have a Java Library that has a test suite. I can run the tests correctly both in maven and in IntelliJ, but when I try to run them in debug mode, it throws an exception ` C:\\Users\\drotman\\junit.properties (The system cannot find the file specified)`. The function that it stops at is `private native void open0(String name) throws FileNotFoundException;` from the `FileInputStream.java`\r\n\r\nI searched far and wide and couldn&#39;t find any information about what that file is and why it is only needed in debug mode.\r\n\r\nI tried re-installing intelliJ and both in Community and Ultimate, and the same problem persists. Also, I tried to change the version of Junit to no avail.","title":"Intellij doesn&#39;t run in Debug mode - file not found &quot;junit.properties&quot;","body":"<p>I have a Java Library that has a test suite. I can run the tests correctly both in maven and in IntelliJ, but when I try to run them in debug mode, it throws an exception <code> C:\\Users\\drotman\\junit.properties (The system cannot find the file specified)</code>. The function that it stops at is <code>private native void open0(String name) throws FileNotFoundException;</code> from the <code>FileInputStream.java</code></p>\n<p>I searched far and wide and couldn't find any information about what that file is and why it is only needed in debug mode.</p>\n<p>I tried re-installing intelliJ and both in Community and Ultimate, and the same problem persists. Also, I tried to change the version of Junit to no avail.</p>\n"},{"tags":["java","java-time","period"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1682330960,"post_id":76090590,"comment_id":134192701,"body_markdown":"Is your arithmetic on the dates crossing a daylight savings boundary?","body":"Is your arithmetic on the dates crossing a daylight savings boundary?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682333493,"post_id":76090590,"comment_id":134193197,"body_markdown":"@user207421 Depending on interpretation either &quot;no&quot; or &quot;that shouldnât matter&quot;. The OP is using `LocalDate`, and `LocalDate` hasnât got any time zone and thus is not able to be influenced by summer time (DST).","body":"@user207421 Depending on interpretation either &quot;no&quot; or &quot;that shouldnât matter&quot;. The OP is using <code>LocalDate</code>, and <code>LocalDate</code> hasnât got any time zone and thus is not able to be influenced by summer time (DST)."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682333732,"post_id":76090590,"comment_id":134193244,"body_markdown":"Itâs a guess only: Maybe when subtracting the year is subtracted first, then the 265 days. And when adding the year is added first, then the 365 days. This means in the case of date A when subtracting you are subtracting the year across the leap day in 2020, that is 366 days, but adding only 365 days when going in the opposite direction. This causes you to end up 1 day short. For date B you have the same issue when crossing the leap day in 2024.","body":"Itâs a guess only: Maybe when subtracting the year is subtracted first, then the 265 days. And when adding the year is added first, then the 365 days. This means in the case of date A when subtracting you are subtracting the year across the leap day in 2020, that is 366 days, but adding only 365 days when going in the opposite direction. This causes you to end up 1 day short. For date B you have the same issue when crossing the leap day in 2024."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682334158,"post_id":76090590,"comment_id":134193324,"body_markdown":"The documentation confirms my guess. The operations are implemented by calling [`Period.addTo()`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/time/Period.html#addTo(java.time.temporal.Temporal)) and `Period.subtractFrom()`. From the documentation of the former: *... if the months are zero, the years are added if non-zero, otherwise the combination of years and months is added if non-zero. Finally, any days are added.* Same for the latter, it subtracts the year first and finally the days.","body":"The documentation confirms my guess. The operations are implemented by calling <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/time/Period.html#addTo(java.time.temporal.Temporal)\" rel=\"nofollow noreferrer\"><code>Period.addTo()</code></a> and <code>Period.subtractFrom()</code>. From the documentation of the former: <i>... if the months are zero, the years are added if non-zero, otherwise the combination of years and months is added if non-zero. Finally, any days are added.</i> Same for the latter, it subtracts the year first and finally the days."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682334190,"post_id":76090590,"comment_id":134193337,"body_markdown":"Try it with `Duration` instead","body":"Try it with <code>Duration</code> instead"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682334408,"post_id":76090590,"comment_id":134193384,"body_markdown":"@g00se That does not work. `LocalDate.now().plus(Duration.ofDays(365))` gives *java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds*. A `Duration` is time-based, think hours, minutes, seconds and fraction of second, and hence incompatible with `LocalDate`, which knows only days, months and years.","body":"@g00se That does not work. <code>LocalDate.now().plus(Duration.ofDays(365))</code> gives <i>java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds</i>. A <code>Duration</code> is time-based, think hours, minutes, seconds and fraction of second, and hence incompatible with <code>LocalDate</code>, which knows only days, months and years."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682334678,"post_id":76090590,"comment_id":134193451,"body_markdown":"Right, yes I see","body":"Right, yes I see"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682336299,"post_id":76090590,"comment_id":134193841,"body_markdown":"*Is this a bug or expected?* It surprised me too. On one hand date math is very often not well-defined, and probably other date-time libraries would be more in line with your expectations and mine. For example subtracting the days first and the years and months next would yield consistent results in your example situation, but still not in all situations. I would consider it more correct. On the other hand as I said, your observations agree with the documentation. So if a bug, then a bug in the design/requirements.","body":"<i>Is this a bug or expected?</i> It surprised me too. On one hand date math is very often not well-defined, and probably other date-time libraries would be more in line with your expectations and mine. For example subtracting the days first and the years and months next would yield consistent results in your example situation, but still not in all situations. I would consider it more correct. On the other hand as I said, your observations agree with the documentation. So if a bug, then a bug in the design/requirements."}],"owner":{"account_id":28395680,"reputation":21,"user_id":21720785,"display_name":"Florian"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1682329451,"creation_date":1682329451,"question_id":76090590,"body_markdown":"I was experiencing some unexpected behaviors when doing date/time calculations. When it comes to daylight savings or leap years, the order of operations (months/days/hours) does matter, which is rather obvious. But it seems that the operation order is not deterministic when it comes to addition and substraction of java.time.Period?\r\n\r\nTo make more clear what I mean here an example, where I add and substract the same period from a date:\r\n\r\n``` java\r\npublic static void main(String[] args) {\r\n\tPeriod period = Period.ofDays(365).plus(Period.ofYears(1));\r\n\tLocalDate dateA = LocalDate.of(2020, 4, 24);\r\n\tLocalDate dateA2 = dateA.minus(period).plus(period);\r\n\tLocalDate dateA3 = dateA.plus(period).minus(period);\r\n\tSystem.out.println(dateA);\r\n\tSystem.out.println(dateA2);\r\n\tSystem.out.println(dateA3);\r\n\r\n\tSystem.out.println(&quot;---&quot;);\r\n\r\n\tLocalDate dateB = LocalDate.of(2022, 4, 24);\r\n\tLocalDate dateB2 = dateB.minus(period).plus(period);\r\n\tLocalDate dateB3 = dateB.plus(period).minus(period);\r\n\tSystem.out.println(dateB);\r\n\tSystem.out.println(dateB2);\r\n\tSystem.out.println(dateB3);\r\n}\r\n```\r\n\r\nthe output is\r\n\r\n```\r\n2020-04-24\r\n2020-04-23\r\n2020-04-24\r\n---\r\n2022-04-24\r\n2022-04-24\r\n2022-04-23\r\n```\r\n\r\nI was expecting that addition and substraction negate each other, so adding and substracting the same Period would always result in the initial date, but it does not. (It would require to swap the execution order from years/months/days when adding to days/months/years when substracting i assume)\r\n\r\nIs this a bug or expected?","title":"Unexpected behavior when adding and substracting Periods from Dates","body":"<p>I was experiencing some unexpected behaviors when doing date/time calculations. When it comes to daylight savings or leap years, the order of operations (months/days/hours) does matter, which is rather obvious. But it seems that the operation order is not deterministic when it comes to addition and substraction of java.time.Period?</p>\n<p>To make more clear what I mean here an example, where I add and substract the same period from a date:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Period period = Period.ofDays(365).plus(Period.ofYears(1));\n    LocalDate dateA = LocalDate.of(2020, 4, 24);\n    LocalDate dateA2 = dateA.minus(period).plus(period);\n    LocalDate dateA3 = dateA.plus(period).minus(period);\n    System.out.println(dateA);\n    System.out.println(dateA2);\n    System.out.println(dateA3);\n\n    System.out.println(&quot;---&quot;);\n\n    LocalDate dateB = LocalDate.of(2022, 4, 24);\n    LocalDate dateB2 = dateB.minus(period).plus(period);\n    LocalDate dateB3 = dateB.plus(period).minus(period);\n    System.out.println(dateB);\n    System.out.println(dateB2);\n    System.out.println(dateB3);\n}\n</code></pre>\n<p>the output is</p>\n<pre><code>2020-04-24\n2020-04-23\n2020-04-24\n---\n2022-04-24\n2022-04-24\n2022-04-23\n</code></pre>\n<p>I was expecting that addition and substraction negate each other, so adding and substracting the same Period would always result in the initial date, but it does not. (It would require to swap the execution order from years/months/days when adding to days/months/years when substracting i assume)</p>\n<p>Is this a bug or expected?</p>\n"},{"tags":["java","android","express","sockets","socket.io"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681836489,"post_id":76046829,"comment_id":134119815,"body_markdown":"For http protocol on Android 11+ you need to enable clearTextTraffic in application tag of manifest file.","body":"For http protocol on Android 11+ you need to enable clearTextTraffic in application tag of manifest file."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681836573,"post_id":76046829,"comment_id":134119831,"body_markdown":"And you use an Android device? Not an emulator?","body":"And you use an Android device? Not an emulator?"},{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1681938791,"post_id":76046829,"comment_id":134139517,"body_markdown":"@blackapps I used both android device and emulator. After adding `android:usesCleartextTraffic=&quot;true&quot;` line I could see the `user connected! socket id` print on the server. But I could not emit event to the server on connection (I have replaced `System.out.println(&quot;Connected to server!&quot;);`  with `mSocket.emit(&quot;taskFinished&quot;, &quot;message&quot;);` )","body":"@blackapps I used both android device and emulator. After adding <code>android:usesCleartextTraffic=&quot;true&quot;</code> line I could see the <code>user connected! socket id</code> print on the server. But I could not emit event to the server on connection (I have replaced <code>System.out.println(&quot;Connected to server!&quot;);</code>  with <code>mSocket.emit(&quot;taskFinished&quot;, &quot;message&quot;);</code> )"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1681982079,"post_id":76046829,"comment_id":134145183,"body_markdown":"You should not replace that line. Only add a new one.","body":"You should not replace that line. Only add a new one."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681982141,"post_id":76046829,"comment_id":134145195,"body_markdown":"Couldnt you emit() or was the message not received?","body":"Couldnt you emit() or was the message not received?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681982197,"post_id":76046829,"comment_id":134145205,"body_markdown":"If you used both device and emulator then used ip&#39;s should be different. What are you doing?","body":"If you used both device and emulator then used ip&#39;s should be different. What are you doing?"},{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1681983406,"post_id":76046829,"comment_id":134145484,"body_markdown":"The message is not received on the backend side, I could send it from the android device. I have tried running the client side both on Android and emulator.","body":"The message is not received on the backend side, I could send it from the android device. I have tried running the client side both on Android and emulator."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681983878,"post_id":76046829,"comment_id":134145597,"body_markdown":"Dont repeat yourself if asked which ip&#39;s you used then. Give info. Show what you do.","body":"Dont repeat yourself if asked which ip&#39;s you used then. Give info. Show what you do."},{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1681983955,"post_id":76046829,"comment_id":134145622,"body_markdown":"I run ipconfig on the cmd, and used the ipv4. Does that answer your question ?","body":"I run ipconfig on the cmd, and used the ipv4. Does that answer your question ?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681987687,"post_id":76046829,"comment_id":134146491,"body_markdown":"No. For several reasons. one of them is and i repeat: `If you used both device and emulator then used ip&#39;s should be different.`.","body":"No. For several reasons. one of them is and i repeat: <code>If you used both device and emulator then used ip&#39;s should be different.</code>."},{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1681987780,"post_id":76046829,"comment_id":134146514,"body_markdown":"And why is that? that IP is the server IP, and the server running locally on the same network, not the device. Shouldn&#39;t it be the same?","body":"And why is that? that IP is the server IP, and the server running locally on the same network, not the device. Shouldn&#39;t it be the same?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681988034,"post_id":76046829,"comment_id":134146586,"body_markdown":"`the server running locally on the same network, not the device.` ???? And where is your emulator running? We have no idea about your setup. On which pc is the server running?","body":"<code>the server running locally on the same network, not the device.</code> ???? And where is your emulator running? We have no idea about your setup. On which pc is the server running?"},{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1681989053,"post_id":76046829,"comment_id":134146790,"body_markdown":"Both The server and the Android device are running locally on the same network. In order to communicate between the emulator/real device to the server using sockets I needed the address of the server - hence the IP v4 address. Does this make things clear?","body":"Both The server and the Android device are running locally on the same network. In order to communicate between the emulator/real device to the server using sockets I needed the address of the server - hence the IP v4 address. Does this make things clear?"},{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1681989247,"post_id":76046829,"comment_id":134146841,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/253256/discussion-between-tamir-abutbul-and-blackapps).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/253256/discussion-between-tamir-abutbul-and-blackapps\">continue this discussion in chat</a>."}],"answers":[{"comments":[{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1681835424,"post_id":76046943,"comment_id":134119569,"body_markdown":"I have changed my code into catching every exception and tried the tcp:// but it didn&#39;t solve the issue","body":"I have changed my code into catching every exception and tried the tcp:// but it didn&#39;t solve the issue"},{"owner":{"account_id":20597953,"reputation":17,"user_id":15119843,"display_name":"ttng_"},"score":0,"creation_date":1681835634,"post_id":76046943,"comment_id":134119627,"body_markdown":"Did you try to connect to the server with the new URL in Postman? You can also try to open the emulator&#39;s browser and enter the URL to see if it receives response or not, as well. I shouldn&#39;t be asking you to show the IPs that you have, so, you can try to do an ipconfig and try out all the IPs that seems to be reasonable.","body":"Did you try to connect to the server with the new URL in Postman? You can also try to open the emulator&#39;s browser and enter the URL to see if it receives response or not, as well. I shouldn&#39;t be asking you to show the IPs that you have, so, you can try to do an ipconfig and try out all the IPs that seems to be reasonable."},{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1681938691,"post_id":76046943,"comment_id":134139502,"body_markdown":"Yes, using postman everything is working with the new URL. Trying to write the URL to the browser failed (because no SSL over http)","body":"Yes, using postman everything is working with the new URL. Trying to write the URL to the browser failed (because no SSL over http)"}],"tags":[],"owner":{"account_id":20597953,"reputation":17,"user_id":15119843,"display_name":"ttng_"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681835428,"creation_date":1681834998,"answer_id":76046943,"question_id":76046829,"body_markdown":"Can you try to catch all Exception so that any exception would got caught and show the stack trace and error message? It appears to me that you are trying to establish TCP socket, so the URL should be `tcp://`","title":"Cant connect to express server from android app","body":"<p>Can you try to catch all Exception so that any exception would got caught and show the stack trace and error message? It appears to me that you are trying to establish TCP socket, so the URL should be <code>tcp://</code></p>\n"},{"tags":[],"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682329377,"creation_date":1682329377,"answer_id":76090581,"question_id":76046829,"body_markdown":"The solution was to add `android:usesCleartextTraffic=&quot;true&quot;` under the `application` tag in the manifest","title":"Cant connect to express server from android app","body":"<p>The solution was to add <code>android:usesCleartextTraffic=&quot;true&quot;</code> under the <code>application</code> tag in the manifest</p>\n"}],"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76090581,"answer_count":2,"score":1,"last_activity_date":1682329377,"creation_date":1681834324,"question_id":76046829,"body_markdown":"I have a backend written with express and an app with Java for android.\r\n\r\n## Background:\r\n\r\n\r\nI want to create socket communication between the app and the server, but I can&#39;t connect to the server from the app.\r\n\r\nThe backend side is fully tested, and I can send requests from postman and receive data as well.\r\nThis is the code inside the server that handles the socket: \r\n\r\n```js\r\nimport { Server } from &quot;socket.io&quot;;\r\nimport { SOCKET_EVENTS } from &quot;../../constants/socket.js&quot;;\r\nimport { getBlockchainBlock } from &quot;../crypto/crypto.js&quot;;\r\n\r\nconst io = new Server(4000, {\r\n  cors: {\r\n    origin: &quot;*&quot;,\r\n  },\r\n});\r\n\r\nexport const openSocket = () =&gt; {\r\n  io.on(SOCKET_EVENTS.CONNECTION, async (socket) =&gt; {\r\n    console.log(&quot;user connected! socket id:&quot;, socket.id);\r\n\r\n    io.emit(SOCKET_EVENTS.NEW_TASK, {\r\n      data: await getBlockchainBlock(),\r\n    });\r\n\r\n    socket.on(SOCKET_EVENTS.TASK_FINISHED, (data) =&gt; {\r\n      console.log(&quot;User task is done with data:&quot;, data);\r\n    });\r\n\r\n    socket.on(SOCKET_EVENTS.DISCONNECT, () =&gt; {\r\n      console.log(&quot;user disconnected! socket id:&quot;, socket.id);\r\n    });\r\n  });\r\n};\r\n\r\n```\r\n\r\n---\r\n\r\nAndroid side\r\n-\r\n\r\nI added the `socket.io-client` library to the android app: \r\n\r\n```\r\n    implementation (&#39;io.socket:socket.io-client:2.0.0&#39;) {\r\n        exclude group: &#39;org.json&#39;, module: &#39;json&#39;\r\n    }\r\n```\r\n\r\n\r\nMy attempt to add the socket library in order to communicate with the server: \r\n\r\n```java\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    Socket mSocket;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        TextView textView = findViewById(R.id.test);\r\n        textView.setText(&quot;Some test&quot;);\r\n\r\n        Emitter.Listener onNewTask = new Emitter.Listener() {\r\n            @Override\r\n            public void call(final Object... args) {\r\n            }\r\n        };\r\n        Emitter.Listener taskFinished = new Emitter.Listener() {\r\n            @Override\r\n            public void call(final Object... args) {\r\n                mSocket.emit(&quot;taskFinished&quot;, &quot;Task is finished&quot;);\r\n            }\r\n        };\r\n\r\n        try {\r\n            mSocket = IO.socket(&quot;http://ipAddress:4000&quot;);\r\n            mSocket.on(&quot;newTask&quot;, onNewTask);\r\n            mSocket.on(&quot;connection&quot;, new Emitter.Listener() {\r\n                @Override\r\n                public void call(Object... args) {\r\n                    System.out.println(&quot;Connected to server!&quot;);\r\n                }\r\n            });\r\n            mSocket.on(&quot;taskFinished&quot;, taskFinished);\r\n            mSocket.connect();\r\n        } catch (URISyntaxException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\n## The problem: \r\n\r\nI cant see the `Connected to server!` print, when I used a debugger to debug the app the `mSocket.connect();` line was called but there was never a connection.\r\nIn addition - I can see in the backend prints for new connection when trying it via postman, but nothing shows when running the android code (seems like there is no connection)\r\n\r\n### Getting the IP address\r\n\r\nThe server is sitting on `http://localhost:4000`, according to [this thread](https://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device) I needed to replace `localhost` with the IP address. \r\n\r\nTo do so I opened up cmd and run the `ipconfig` command and replaced `localhost` with `IPv4 Address`\r\n\r\n## Extra info\r\n\r\n\r\n\r\nThose are the constants names I am using inside the server:\r\n\r\n```js\r\nexport const SOCKET_EVENTS = {\r\n  CONNECTION: &quot;connection&quot;,\r\n  NEW_TASK: &quot;newTask&quot;,\r\n  TASK_FINISHED: &quot;taskFinished&quot;,\r\n  DISCONNECT: &quot;disconnect&quot;,\r\n};\r\n```\r\n\r\n","title":"Cant connect to express server from android app","body":"<p>I have a backend written with express and an app with Java for android.</p>\n<h2>Background:</h2>\n<p>I want to create socket communication between the app and the server, but I can't connect to the server from the app.</p>\n<p>The backend side is fully tested, and I can send requests from postman and receive data as well.\nThis is the code inside the server that handles the socket:</p>\n<pre class=\"lang-js prettyprint-override\"><code>import { Server } from &quot;socket.io&quot;;\nimport { SOCKET_EVENTS } from &quot;../../constants/socket.js&quot;;\nimport { getBlockchainBlock } from &quot;../crypto/crypto.js&quot;;\n\nconst io = new Server(4000, {\n  cors: {\n    origin: &quot;*&quot;,\n  },\n});\n\nexport const openSocket = () =&gt; {\n  io.on(SOCKET_EVENTS.CONNECTION, async (socket) =&gt; {\n    console.log(&quot;user connected! socket id:&quot;, socket.id);\n\n    io.emit(SOCKET_EVENTS.NEW_TASK, {\n      data: await getBlockchainBlock(),\n    });\n\n    socket.on(SOCKET_EVENTS.TASK_FINISHED, (data) =&gt; {\n      console.log(&quot;User task is done with data:&quot;, data);\n    });\n\n    socket.on(SOCKET_EVENTS.DISCONNECT, () =&gt; {\n      console.log(&quot;user disconnected! socket id:&quot;, socket.id);\n    });\n  });\n};\n\n</code></pre>\n<hr />\n<h2>Android side</h2>\n<p>I added the <code>socket.io-client</code> library to the android app:</p>\n<pre><code>    implementation ('io.socket:socket.io-client:2.0.0') {\n        exclude group: 'org.json', module: 'json'\n    }\n</code></pre>\n<p>My attempt to add the socket library in order to communicate with the server:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends AppCompatActivity {\n\n    Socket mSocket;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        TextView textView = findViewById(R.id.test);\n        textView.setText(&quot;Some test&quot;);\n\n        Emitter.Listener onNewTask = new Emitter.Listener() {\n            @Override\n            public void call(final Object... args) {\n            }\n        };\n        Emitter.Listener taskFinished = new Emitter.Listener() {\n            @Override\n            public void call(final Object... args) {\n                mSocket.emit(&quot;taskFinished&quot;, &quot;Task is finished&quot;);\n            }\n        };\n\n        try {\n            mSocket = IO.socket(&quot;http://ipAddress:4000&quot;);\n            mSocket.on(&quot;newTask&quot;, onNewTask);\n            mSocket.on(&quot;connection&quot;, new Emitter.Listener() {\n                @Override\n                public void call(Object... args) {\n                    System.out.println(&quot;Connected to server!&quot;);\n                }\n            });\n            mSocket.on(&quot;taskFinished&quot;, taskFinished);\n            mSocket.connect();\n        } catch (URISyntaxException e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n<h2>The problem:</h2>\n<p>I cant see the <code>Connected to server!</code> print, when I used a debugger to debug the app the <code>mSocket.connect();</code> line was called but there was never a connection.\nIn addition - I can see in the backend prints for new connection when trying it via postman, but nothing shows when running the android code (seems like there is no connection)</p>\n<h3>Getting the IP address</h3>\n<p>The server is sitting on <code>http://localhost:4000</code>, according to <a href=\"https://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device\">this thread</a> I needed to replace <code>localhost</code> with the IP address.</p>\n<p>To do so I opened up cmd and run the <code>ipconfig</code> command and replaced <code>localhost</code> with <code>IPv4 Address</code></p>\n<h2>Extra info</h2>\n<p>Those are the constants names I am using inside the server:</p>\n<pre class=\"lang-js prettyprint-override\"><code>export const SOCKET_EVENTS = {\n  CONNECTION: &quot;connection&quot;,\n  NEW_TASK: &quot;newTask&quot;,\n  TASK_FINISHED: &quot;taskFinished&quot;,\n  DISCONNECT: &quot;disconnect&quot;,\n};\n</code></pre>\n"},{"tags":["java","cucumber","scenarios"],"comments":[{"owner":{"account_id":3716127,"reputation":18090,"user_id":3092298,"accept_rate":84,"display_name":"Greg Burghardt"},"score":0,"creation_date":1619716620,"post_id":67314856,"comment_id":118996209,"body_markdown":"Can&#39;t you get the Scenario object via dependency injection to your step definition class? I know you can configure a DI framework for cucumber. I just don&#39;t have much experience in Java, that&#39;s all.","body":"Can&#39;t you get the Scenario object via dependency injection to your step definition class? I know you can configure a DI framework for cucumber. I just don&#39;t have much experience in Java, that&#39;s all."},{"owner":{"account_id":3716127,"reputation":18090,"user_id":3092298,"accept_rate":84,"display_name":"Greg Burghardt"},"score":0,"creation_date":1619716673,"post_id":67314856,"comment_id":118996223,"body_markdown":"See https://cucumber.io/docs/cucumber/state/#dependency-injection","body":"See <a href=\"https://cucumber.io/docs/cucumber/state/#dependency-injection\" rel=\"nofollow noreferrer\">cucumber.io/docs/cucumber/state/#dependency-injection</a>"},{"owner":{"account_id":2393602,"reputation":3892,"user_id":2092927,"accept_rate":35,"display_name":"Äamo"},"score":0,"creation_date":1619717832,"post_id":67314856,"comment_id":118996766,"body_markdown":"Thanks I thing I know what you mean. Don&#39;t know if I am able to implement it.","body":"Thanks I thing I know what you mean. Don&#39;t know if I am able to implement it."}],"answers":[{"comments":[{"owner":{"account_id":2393602,"reputation":3892,"user_id":2092927,"accept_rate":35,"display_name":"Äamo"},"score":0,"creation_date":1619715854,"post_id":67315869,"comment_id":118995898,"body_markdown":"@AfterStep is too late.","body":"@AfterStep is too late."}],"tags":[],"owner":{"account_id":9142974,"reputation":460,"user_id":6800247,"display_name":"Luke Hill"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619693351,"creation_date":1619693351,"answer_id":67315869,"question_id":67314856,"body_markdown":"If you want access to the scenario object, your best bet is an AfterStep hook. However this is **not** supported in all flavours of cucumber. Your best bet is to check the docs or API documentation for your language","title":"Is it possible to get scenario inside the step in Cucumber?","body":"<p>If you want access to the scenario object, your best bet is an AfterStep hook. However this is <strong>not</strong> supported in all flavours of cucumber. Your best bet is to check the docs or API documentation for your language</p>\n"},{"tags":[],"owner":{"account_id":9585656,"reputation":51,"user_id":7118534,"display_name":"Jebus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682329202,"creation_date":1682329202,"answer_id":76090555,"question_id":67314856,"body_markdown":"Here you can find a simple DI (PicoContainer) example to access the Scenario from each step.\r\n\r\nhttps://www.linkedin.com/pulse/sharing-scenario-context-between-cucumber-step-using-dependency?trk=pulse-article_more-articles_related-content-card","title":"Is it possible to get scenario inside the step in Cucumber?","body":"<p>Here you can find a simple DI (PicoContainer) example to access the Scenario from each step.</p>\n<p><a href=\"https://www.linkedin.com/pulse/sharing-scenario-context-between-cucumber-step-using-dependency?trk=pulse-article_more-articles_related-content-card\" rel=\"nofollow noreferrer\">https://www.linkedin.com/pulse/sharing-scenario-context-between-cucumber-step-using-dependency?trk=pulse-article_more-articles_related-content-card</a></p>\n"}],"owner":{"account_id":2393602,"reputation":3892,"user_id":2092927,"accept_rate":35,"display_name":"Äamo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":699,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682329202,"creation_date":1619689324,"question_id":67314856,"body_markdown":"I need to make screenshot inside the step on specific place. It means not on @BeforeStep nor on @AfterStep. I need to call\r\n\r\n    // public void someStep(Scenario scenario)  // This does not work\r\n\r\n    public void someStep()\r\n    {\r\n        page.openUrl();\r\n        scenario.attach(screenshot(), &quot;image/png&quot;, fileName1);\r\n        page.doSomething();\r\n        scenario.attach(screenshot(), &quot;image/png&quot;, fileName2);\r\n        page.doSomethingElse();\r\n    }\r\n\r\nBut I am not able to get current scenario related to the step execution. Is it possible or not? I tried to call it like someStep(Scenarion scenario) but it throws an error.  ","title":"Is it possible to get scenario inside the step in Cucumber?","body":"<p>I need to make screenshot inside the step on specific place. It means not on @BeforeStep nor on @AfterStep. I need to call</p>\n<pre><code>// public void someStep(Scenario scenario)  // This does not work\n\npublic void someStep()\n{\n    page.openUrl();\n    scenario.attach(screenshot(), &quot;image/png&quot;, fileName1);\n    page.doSomething();\n    scenario.attach(screenshot(), &quot;image/png&quot;, fileName2);\n    page.doSomethingElse();\n}\n</code></pre>\n<p>But I am not able to get current scenario related to the step execution. Is it possible or not? I tried to call it like someStep(Scenarion scenario) but it throws an error.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1682328708,"post_id":76090467,"comment_id":134192190,"body_markdown":"Theoretically you could implement `FilterWriter` but without knowing the *specifics* of what you&#39;re wanting to do I can&#39;t really say more at this point","body":"Theoretically you could implement <code>FilterWriter</code> but without knowing the <i>specifics</i> of what you&#39;re wanting to do I can&#39;t really say more at this point"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1682329071,"post_id":76090467,"comment_id":134192272,"body_markdown":"This would definitely become much more manageable if you restrict it to some subset of regex (or even use some alternate wildcarding). Do you really need the full power of regex for this? Even just limiting regex to match within a single line would help limit the buffer size (but not if there are &quot;infinite length&quot; lines in the stream).","body":"This would definitely become much more manageable if you restrict it to some subset of regex (or even use some alternate wildcarding). Do you really need the full power of regex for this? Even just limiting regex to match within a single line would help limit the buffer size (but not if there are &quot;infinite length&quot; lines in the stream)."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1682329327,"post_id":76090467,"comment_id":134192340,"body_markdown":"[This question is very similar](https://stackoverflow.com/questions/3013669/performing-regex-on-a-stream).","body":"<a href=\"https://stackoverflow.com/questions/3013669/performing-regex-on-a-stream\">This question is very similar</a>."}],"owner":{"account_id":480519,"reputation":1382,"user_id":1423361,"accept_rate":100,"display_name":"Robert Elliot"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682328513,"creation_date":1682328513,"question_id":76090467,"body_markdown":"As characters are written to a [`java.io.Writer`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Writer.html) I want to apply a regular expression to replace certain characters.\r\n\r\nI don&#39;t want to buffer the whole thing into memory, it could be very big and it&#39;s performance sensitive.\r\n\r\nI&#39;m trying with a moving [`CharBuffer`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/CharBuffer.html) and a [Pattern](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Pattern.html), but the problem is that _any_ sizing or flushing of the `CharBuffer` short of the entire character stream may be incorrect.\r\n\r\nCan a `Pattern` know what index in a `CharSequence` is the latest where it could never `find`, even with more input? e.g. given a regex `[ab]c` and an input `ab` the index of `a` is the last spot that could never find, so it should be safe to flush `a`, but I still need `b` because the next character might be `c`. I&#39;ve played with [`Matcher.hitEnd()`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#hitEnd()) and [`Matcher.requireEnd()`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#requireEnd()) to try and achieve this, but they don&#39;t give me enough info to know what bit is safe to flush.\r\n\r\nI&#39;m wondering if, given the power of regular expressions, this is actually a provably unsolvable problem and I just don&#39;t know it...","title":"How can I decorate a java.io.Writer to do a regex find &amp; replace as characters are written to it?","body":"<p>As characters are written to a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Writer.html\" rel=\"nofollow noreferrer\"><code>java.io.Writer</code></a> I want to apply a regular expression to replace certain characters.</p>\n<p>I don't want to buffer the whole thing into memory, it could be very big and it's performance sensitive.</p>\n<p>I'm trying with a moving <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/CharBuffer.html\" rel=\"nofollow noreferrer\"><code>CharBuffer</code></a> and a <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Pattern</a>, but the problem is that <em>any</em> sizing or flushing of the <code>CharBuffer</code> short of the entire character stream may be incorrect.</p>\n<p>Can a <code>Pattern</code> know what index in a <code>CharSequence</code> is the latest where it could never <code>find</code>, even with more input? e.g. given a regex <code>[ab]c</code> and an input <code>ab</code> the index of <code>a</code> is the last spot that could never find, so it should be safe to flush <code>a</code>, but I still need <code>b</code> because the next character might be <code>c</code>. I've played with <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#hitEnd()\" rel=\"nofollow noreferrer\"><code>Matcher.hitEnd()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#requireEnd()\" rel=\"nofollow noreferrer\"><code>Matcher.requireEnd()</code></a> to try and achieve this, but they don't give me enough info to know what bit is safe to flush.</p>\n<p>I'm wondering if, given the power of regular expressions, this is actually a provably unsolvable problem and I just don't know it...</p>\n"},{"tags":["java","tomcat","liferay","osgi","osgi-bundle"],"comments":[{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":1,"creation_date":1671194968,"post_id":74824655,"comment_id":132052130,"body_markdown":"Please [don&#39;t upload text as image](https://meta.stackoverflow.com/a/285557/13447). Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. Also see [ask]: _Just_ the error message without steps to reproduce doesn&#39;t really provide good basis to help you fix the problem.","body":"Please <a href=\"https://meta.stackoverflow.com/a/285557/13447\">don&#39;t upload text as image</a>. Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. Also see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>: <i>Just</i> the error message without steps to reproduce doesn&#39;t really provide good basis to help you fix the problem."},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1671207323,"post_id":74824655,"comment_id":132056502,"body_markdown":"You&#39;re mentioning _&quot;the frontend app&quot;_: Is that your custom code? Please provide a [mcve] (and thank you for replacing the image with text)","body":"You&#39;re mentioning <i>&quot;the frontend app&quot;</i>: Is that your custom code? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (and thank you for replacing the image with text)"}],"answers":[{"tags":[],"owner":{"account_id":2971961,"reputation":502,"user_id":2523836,"accept_rate":67,"display_name":"Jan Tosovsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681716665,"creation_date":1681716665,"answer_id":76032662,"question_id":74824655,"body_markdown":"There is a timeout mentioned in the error message. You can increase the timeout in Control Panel &gt; System Settings &gt; Infrastructure &gt; JavaScript Loader &gt; Module Definition Timeout. It is 7 seconds by default. But it would be better to reduce the size of your javascript app.","title":"Liferay: amd-loader error, require() call has failed","body":"<p>There is a timeout mentioned in the error message. You can increase the timeout in Control Panel &gt; System Settings &gt; Infrastructure &gt; JavaScript Loader &gt; Module Definition Timeout. It is 7 seconds by default. But it would be better to reduce the size of your javascript app.</p>\n"}],"owner":{"account_id":27261958,"reputation":1,"user_id":20784657,"display_name":"lrzzz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":876,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682328411,"creation_date":1671194821,"question_id":74824655,"body_markdown":"After a server restart the frontend app started throwing some errors and can&#39;t find any document that is useful for this issue.\r\n\r\nThese errors were thrown in the console as javascript errors\r\n\r\n    liferay-amd-loader | A require() call has failed but no failure handler was provided. Note that even if the call stack of this error trace looks like coming from the Liferay AMD Loader, it is not an error in the Loader what has caused it, but an error caused by the require() call. The reason why the Loader is in the stack trace is because it is printing the error so that it doesn&#39;t get lost.However, we recommend providing a failure handler in all require() calls to be able to recover from errors better and to avoid the appearance of this message.\r\n\r\nSome information about the require() call follows:\r\n   &#183; Require call id: 0 \r\n   &#183; Required modules: \r\n\r\n\r\n    [\r\n    &quot;portal-template-react-renderer-impl@4.0.7/render.es&quot;,\r\n    &quot;product-navigation-applications-menu@1.0.2/js/ApplicationsMenu&quot;,\r\n    &quot;metal-dom/src/all/dom&quot;,\r\n    &quot;portal-template-react-renderer-impl@4.0.7/render.es&quot;,\r\n    &quot;frontend-taglib-clay@5.0.3/DropdownMenu&quot;\r\n    ]\r\n\r\n     Error: Load timeout for modules: portal-template-react-renderer-impl@4.0.7/render.es,product-navigation-applications-menu@1.0.2/js/ApplicationsMenu,metal-dom/src/all/dom,portal-template-react-renderer-impl@4.0.7/render.es,frontend-taglib-clay@5.0.3/DropdownMenu\r\n    at combo?browserId=chrome&amp;minifierType=js&amp;languageId=en_US&amp;b=7304&amp;t=1637093660756&amp;/o/frontend-js-aui-web/aui/widget-stdmod/widget-stdmod.js&amp;/o/frontend-js-aui-web/aui/aui-aria/aui-aria.js&amp;/o/frontend-js-aui-web/aui/aui-io-plugin-deprecated/aui-io-plugin-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-io-request/aui-io-request.js&amp;/o/frontend-js-aui-web/aui/aui-loading-mask-deprecated/aui-loading-mask-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-overlay-base-deprecated/aui-overlay-base-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-overlay-context-deprecated/aui-overlay-context-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-overlay-manager-deprecated/aui-overlay-manager-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-overlay-mask-deprecated/aui-overlay-mask-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-parse-content/aui-parse-content.js&amp;/o/frontend-js-aui-web/liferay/session.js&amp;/o/frontend-js-aui-web/liferay/deprecated.js&amp;/o/frontend-js-web/loader/config.js&amp;/o/frontend-js-web/loader/loader.js&amp;/o/frontend-js-web/misc/svg4everybody.js&amp;/o/frontend-js-web/liferay/dom_task_runner.js&amp;/o/frontend-js-web/liferay/events.js&amp;/o/frontend-js-web/liferay/lazy_load.js&amp;/o/frontend-js-web/liferay/liferay.js&amp;/o/frontend-js-web/liferay/global.bundle.js&amp;/o/frontend-js-web/liferay/portlet.js&amp;/o/frontend-js-web/liferay/workflow.js:146:489\r\n\r\nI&#39;m using Liferay Community Edition Portal 7.3.4 CE GA5 and the site was working before the restart, so I assume I left out one step or something.\r\nDid anyone else ran into this?\r\nThanks in advance","title":"Liferay: amd-loader error, require() call has failed","body":"<p>After a server restart the frontend app started throwing some errors and can't find any document that is useful for this issue.</p>\n<p>These errors were thrown in the console as javascript errors</p>\n<pre><code>liferay-amd-loader | A require() call has failed but no failure handler was provided. Note that even if the call stack of this error trace looks like coming from the Liferay AMD Loader, it is not an error in the Loader what has caused it, but an error caused by the require() call. The reason why the Loader is in the stack trace is because it is printing the error so that it doesn't get lost.However, we recommend providing a failure handler in all require() calls to be able to recover from errors better and to avoid the appearance of this message.\n</code></pre>\n<p>Some information about the require() call follows:\nÂ· Require call id: 0\nÂ· Required modules:</p>\n<pre><code>[\n&quot;portal-template-react-renderer-impl@4.0.7/render.es&quot;,\n&quot;product-navigation-applications-menu@1.0.2/js/ApplicationsMenu&quot;,\n&quot;metal-dom/src/all/dom&quot;,\n&quot;portal-template-react-renderer-impl@4.0.7/render.es&quot;,\n&quot;frontend-taglib-clay@5.0.3/DropdownMenu&quot;\n]\n\n Error: Load timeout for modules: portal-template-react-renderer-impl@4.0.7/render.es,product-navigation-applications-menu@1.0.2/js/ApplicationsMenu,metal-dom/src/all/dom,portal-template-react-renderer-impl@4.0.7/render.es,frontend-taglib-clay@5.0.3/DropdownMenu\nat combo?browserId=chrome&amp;minifierType=js&amp;languageId=en_US&amp;b=7304&amp;t=1637093660756&amp;/o/frontend-js-aui-web/aui/widget-stdmod/widget-stdmod.js&amp;/o/frontend-js-aui-web/aui/aui-aria/aui-aria.js&amp;/o/frontend-js-aui-web/aui/aui-io-plugin-deprecated/aui-io-plugin-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-io-request/aui-io-request.js&amp;/o/frontend-js-aui-web/aui/aui-loading-mask-deprecated/aui-loading-mask-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-overlay-base-deprecated/aui-overlay-base-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-overlay-context-deprecated/aui-overlay-context-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-overlay-manager-deprecated/aui-overlay-manager-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-overlay-mask-deprecated/aui-overlay-mask-deprecated.js&amp;/o/frontend-js-aui-web/aui/aui-parse-content/aui-parse-content.js&amp;/o/frontend-js-aui-web/liferay/session.js&amp;/o/frontend-js-aui-web/liferay/deprecated.js&amp;/o/frontend-js-web/loader/config.js&amp;/o/frontend-js-web/loader/loader.js&amp;/o/frontend-js-web/misc/svg4everybody.js&amp;/o/frontend-js-web/liferay/dom_task_runner.js&amp;/o/frontend-js-web/liferay/events.js&amp;/o/frontend-js-web/liferay/lazy_load.js&amp;/o/frontend-js-web/liferay/liferay.js&amp;/o/frontend-js-web/liferay/global.bundle.js&amp;/o/frontend-js-web/liferay/portlet.js&amp;/o/frontend-js-web/liferay/workflow.js:146:489\n</code></pre>\n<p>I'm using Liferay Community Edition Portal 7.3.4 CE GA5 and the site was working before the restart, so I assume I left out one step or something.\nDid anyone else ran into this?\nThanks in advance</p>\n"},{"tags":["java","temporary-files"],"answers":[{"tags":[],"owner":{"account_id":64011,"reputation":9363,"user_id":189186,"accept_rate":91,"display_name":"Irfy"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1331086670,"creation_date":1331086670,"answer_id":9594907,"question_id":9594886,"body_markdown":"If you want files with specific names created in the system-wide temporary directory, then expand the `%temp%` environment variable and create the file manually, nothing wrong with that.\r\n\r\nEdit: Actually, use `System.getProperty(&quot;java.io.tmpdir&quot;));` for that.","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>If you want files with specific names created in the system-wide temporary directory, then expand the <code>%temp%</code> environment variable and create the file manually, nothing wrong with that.</p>\n\n<p>Edit: Actually, use <code>System.getProperty(\"java.io.tmpdir\"));</code> for that.</p>\n"},{"comments":[{"owner":{"account_id":287407,"reputation":11529,"user_id":587196,"accept_rate":67,"display_name":"Larry"},"score":5,"creation_date":1369670309,"post_id":9594927,"comment_id":24172710,"body_markdown":"Will all of these manually created files automatically be deleted upon exit? (I assume so, but just to make sure, if someone could confirm).","body":"Will all of these manually created files automatically be deleted upon exit? (I assume so, but just to make sure, if someone could confirm)."},{"owner":{"account_id":1106919,"reputation":406,"user_id":1098151,"display_name":"JohnK"},"score":7,"creation_date":1400163564,"post_id":9594927,"comment_id":36382439,"body_markdown":"Just to note that if you do this, you are not using File.createTempFile, but some other way of creating the file.","body":"Just to note that if you do this, you are not using File.createTempFile, but some other way of creating the file."}],"tags":[],"owner":{"account_id":1110523,"reputation":30282,"user_id":1101070,"display_name":"Marvin Pinto"},"comment_count":2,"down_vote_count":1,"up_vote_count":48,"is_accepted":true,"score":47,"last_activity_date":1331086819,"creation_date":1331086819,"answer_id":9594927,"question_id":9594886,"body_markdown":"First, use the following snippet to get the system&#39;s temp directory:\r\n\r\n    String tDir = System.getProperty(&quot;java.io.tmpdir&quot;);\r\n\r\nThen use the `tDir` variable in conjunction with your `tempFiles[]` array to create each file individually.","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>First, use the following snippet to get the system's temp directory:</p>\n\n<pre><code>String tDir = System.getProperty(\"java.io.tmpdir\");\n</code></pre>\n\n<p>Then use the <code>tDir</code> variable in conjunction with your <code>tempFiles[]</code> array to create each file individually.</p>\n"},{"tags":[],"owner":{"account_id":51330,"reputation":10190,"user_id":551899,"accept_rate":89,"display_name":"jmq"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1331087429,"creation_date":1331087429,"answer_id":9595010,"question_id":9594886,"body_markdown":"You can&#39;t if you use `File.createTempFile` to generate a temporary file name.  I looked at the java source for generating a temp file (for java 1.7, you didn&#39;t state your version so I just used mine):\r\n\r\n    private static class TempDirectory {\r\n        private TempDirectory() { }\r\n\r\n        // temporary directory location\r\n        private static final File tmpdir = new File(fs.normalize(AccessController\r\n            .doPrivileged(new GetPropertyAction(&quot;java.io.tmpdir&quot;))));\r\n        static File location() {\r\n            return tmpdir;\r\n        }\r\n\r\n        // file name generation\r\n        private static final SecureRandom random = new SecureRandom();\r\n        static File generateFile(String prefix, String suffix, File dir) {\r\n            long n = random.nextLong();\r\n            if (n == Long.MIN_VALUE) {\r\n                n = 0;      // corner case\r\n            } else {\r\n                n = Math.abs(n);\r\n            }\r\n            return new File(dir, prefix + Long.toString(n) + suffix);\r\n        }\r\n    }\r\n\r\nThis is the code in the java JDK that generates the temp file name.  You can see that it generates a random number and inserts it into your file name between your prefix and suffix.  This is in &quot;File.java&quot; (in java.io).  I did not see any way to change that.","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>You can't if you use <code>File.createTempFile</code> to generate a temporary file name.  I looked at the java source for generating a temp file (for java 1.7, you didn't state your version so I just used mine):</p>\n\n<pre><code>private static class TempDirectory {\n    private TempDirectory() { }\n\n    // temporary directory location\n    private static final File tmpdir = new File(fs.normalize(AccessController\n        .doPrivileged(new GetPropertyAction(\"java.io.tmpdir\"))));\n    static File location() {\n        return tmpdir;\n    }\n\n    // file name generation\n    private static final SecureRandom random = new SecureRandom();\n    static File generateFile(String prefix, String suffix, File dir) {\n        long n = random.nextLong();\n        if (n == Long.MIN_VALUE) {\n            n = 0;      // corner case\n        } else {\n            n = Math.abs(n);\n        }\n        return new File(dir, prefix + Long.toString(n) + suffix);\n    }\n}\n</code></pre>\n\n<p>This is the code in the java JDK that generates the temp file name.  You can see that it generates a random number and inserts it into your file name between your prefix and suffix.  This is in \"File.java\" (in java.io).  I did not see any way to change that.</p>\n"},{"comments":[{"owner":{"account_id":44652,"reputation":3473,"user_id":131160,"display_name":"jcsahnwaldt Reinstate Monica"},"score":2,"creation_date":1516896721,"post_id":19904109,"comment_id":83886857,"body_markdown":"Downvote. The call to `temp.exists()` introduces a race condition that `temp.createNewFile()` was specifically designed to avoid. Just check the return value of `temp.createNewFile()`. Read the specification of `createNewFile()`. The important word is *atomic*. https://docs.oracle.com/javase/7/docs/api/java/io/File.html#createNewFile%28%29","body":"Downvote. The call to <code>temp.exists()</code> introduces a race condition that <code>temp.createNewFile()</code> was specifically designed to avoid. Just check the return value of <code>temp.createNewFile()</code>. Read the specification of <code>createNewFile()</code>. The important word is <i>atomic</i>. <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#createNewFile%28%29\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/io/&hellip;</a>"}],"tags":[],"owner":{"account_id":2329234,"reputation":149,"user_id":2043042,"accept_rate":33,"display_name":"Junaid Awan"},"comment_count":1,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1463774167,"creation_date":1384165880,"answer_id":19904109,"question_id":9594886,"body_markdown":"Custom names can be saved as follows\r\n\r\n    File temp=new File(tempFile, &quot;.xls&quot;);\r\n\tif (!temp.exists()) {\r\n\t\ttemp.createNewFile();\r\n\t}","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>Custom names can be saved as follows</p>\n\n<pre><code>File temp=new File(tempFile, \".xls\");\nif (!temp.exists()) {\n    temp.createNewFile();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":455032,"reputation":2720,"user_id":853001,"display_name":"realPK"},"score":0,"creation_date":1510290234,"post_id":24581075,"comment_id":81381296,"body_markdown":"Thanks for saving my day!","body":"Thanks for saving my day!"},{"owner":{"account_id":2440556,"reputation":739,"user_id":2129212,"accept_rate":44,"display_name":"Swapnil B."},"score":0,"creation_date":1532384454,"post_id":24581075,"comment_id":89944844,"body_markdown":"You are a rockstar :)","body":"You are a rockstar :)"},{"owner":{"account_id":15101337,"reputation":115,"user_id":10898235,"display_name":"Tyler M."},"score":0,"creation_date":1583010406,"post_id":24581075,"comment_id":106975226,"body_markdown":"Thank you! This is what I needed.","body":"Thank you! This is what I needed."},{"owner":{"account_id":7193224,"reputation":634,"user_id":5492826,"accept_rate":25,"display_name":"emrekgn"},"score":2,"creation_date":1629893565,"post_id":24581075,"comment_id":121806668,"body_markdown":"It appears this is deprecated. Guava now recommends using `java.nio.file.Files` to create a tmp dir. See [here](https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/io/Files.html#createTempDir()) for more info.","body":"It appears this is deprecated. Guava now recommends using <code>java.nio.file.Files</code> to create a tmp dir. See <a href=\"https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/io/Files.html#createTempDir()\" rel=\"nofollow noreferrer\">here</a> for more info."}],"tags":[],"owner":{"account_id":1718893,"reputation":1816,"user_id":1575348,"accept_rate":75,"display_name":"Brad Johnson"},"comment_count":4,"down_vote_count":2,"up_vote_count":25,"is_accepted":false,"score":23,"last_activity_date":1510328725,"creation_date":1404510661,"answer_id":24581075,"question_id":9594886,"body_markdown":"Using [Guava][1]:\r\n\r\n\r\n    import com.google.common.io.Files;\r\n    \r\n    ...\r\n    \r\n    File myTempFile = new File(Files.createTempDir(), &quot;MySpecificName.png&quot;);\r\n\r\n\r\n  [1]: https://github.com/google/guava &quot;Guava&quot;","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>Using <a href=\"https://github.com/google/guava\" rel=\"noreferrer\" title=\"Guava\">Guava</a>:</p>\n\n<pre><code>import com.google.common.io.Files;\n\n...\n\nFile myTempFile = new File(Files.createTempDir(), \"MySpecificName.png\");\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user6186835"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1504844936,"creation_date":1488332673,"answer_id":42521766,"question_id":9594886,"body_markdown":"You can create a temp directory then store new files in it. This way all of the new files you add won&#39;t have a random extension to it. When you&#39;re done all you have to do is delete the temp directory you added.\r\n\r\n    public static File createTempFile(String prefix, String suffix) {\t\t\r\n\t\tFile parent = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\t\r\n\t\t\r\n\t\tFile temp = new File(parent, prefix + suffix);\r\n\t\t\r\n\t\tif (temp.exists()) {\r\n\t\t\ttemp.delete();\r\n\t\t}\r\n\t\t\r\n\t\ttry {\r\n\t\t\ttemp.createNewFile();\r\n\t\t} catch (IOException ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\treturn temp;\r\n\t}\r\n\r\n\t\r\n\tpublic static File createTempDirectory(String fileName) {\t\t\r\n\t\tFile parent = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\t\r\n\t\t\r\n\t\tFile temp = new File(parent, fileName);\r\n\t\t\r\n\t\tif (temp.exists()) {\r\n\t\t\ttemp.delete();\r\n\t\t}\r\n\t\t\r\n\t\ttemp.mkdir();\r\n\t\t\r\n\t\treturn temp;\r\n\t}","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>You can create a temp directory then store new files in it. This way all of the new files you add won't have a random extension to it. When you're done all you have to do is delete the temp directory you added.</p>\n\n<pre><code>public static File createTempFile(String prefix, String suffix) {       \n    File parent = new File(System.getProperty(\"java.io.tmpdir\"));   \n\n    File temp = new File(parent, prefix + suffix);\n\n    if (temp.exists()) {\n        temp.delete();\n    }\n\n    try {\n        temp.createNewFile();\n    } catch (IOException ex) {\n        ex.printStackTrace();\n    }\n\n    return temp;\n}\n\n\npublic static File createTempDirectory(String fileName) {       \n    File parent = new File(System.getProperty(\"java.io.tmpdir\"));   \n\n    File temp = new File(parent, fileName);\n\n    if (temp.exists()) {\n        temp.delete();\n    }\n\n    temp.mkdir();\n\n    return temp;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7539816,"reputation":1938,"user_id":5724824,"accept_rate":59,"display_name":"SANM2009"},"score":3,"creation_date":1520506871,"post_id":49171364,"comment_id":85347921,"body_markdown":"Adding some explanation for the code would be helpful for the OP.","body":"Adding some explanation for the code would be helpful for the OP."},{"owner":{"account_id":6229027,"reputation":28489,"user_id":4850040,"accept_rate":62,"display_name":"Toby Speight"},"score":1,"creation_date":1520509472,"post_id":49171364,"comment_id":85349447,"body_markdown":"Thank you for this code snippet, which might provide some limited short-term help.  A proper explanation [would greatly improve](//meta.stackexchange.com/q/114762) its long-term value by showing *why* this is a good solution to the problem, and would make it more useful to future readers with other, similar questions.  Please [edit] your answer to add some explanation, including the assumptions you&#39;ve made.","body":"Thank you for this code snippet, which might provide some limited short-term help.  A proper explanation <a href=\"//meta.stackexchange.com/q/114762\">would greatly improve</a> its long-term value by showing <i>why</i> this is a good solution to the problem, and would make it more useful to future readers with other, similar questions.  Please <a href=\"https://stackoverflow.com/posts/49171364/edit\">edit</a> your answer to add some explanation, including the assumptions you&#39;ve made."}],"tags":[],"owner":{"account_id":12476106,"reputation":1,"user_id":9082413,"display_name":"Ambikesh Kumar Shukla"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1520506412,"creation_date":1520506412,"answer_id":49171364,"question_id":9594886,"body_markdown":"    public static File createTempDirectory(String dirName) {\r\n            File baseDir = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\r\n            File tempDir = new File(baseDir, dirName);\r\n            if (tempDir.mkdir()) {\r\n              return tempDir;\r\n            }\r\n            return null;\r\n    }","title":"How to create a temp file in java without the random number appended to the filename?","body":"<pre><code>public static File createTempDirectory(String dirName) {\n        File baseDir = new File(System.getProperty(\"java.io.tmpdir\"));\n        File tempDir = new File(baseDir, dirName);\n        if (tempDir.mkdir()) {\n          return tempDir;\n        }\n        return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14895358,"reputation":41,"user_id":13651801,"display_name":"Bhisham Udasi"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1623661463,"creation_date":1623661463,"answer_id":67967517,"question_id":9594886,"body_markdown":"Just putting up the option here: \r\nIf someone anyhow need to use createTempFile method, you can do create a temp file and rename it using Files.move option:\r\n\r\n```\r\nfinal Path path = Files.createTempFile(fileName, &quot;.xls&quot;);\r\nFiles.move(path, path.resolveSibling(fileName));\r\n```","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>Just putting up the option here:\nIf someone anyhow need to use createTempFile method, you can do create a temp file and rename it using Files.move option:</p>\n<pre><code>final Path path = Files.createTempFile(fileName, &quot;.xls&quot;);\nFiles.move(path, path.resolveSibling(fileName));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23937595,"reputation":26,"user_id":17931149,"display_name":"Borys Draus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682328152,"creation_date":1682328152,"answer_id":76090423,"question_id":9594886,"body_markdown":"In my case with create *.img file in Android app:\r\n\r\nInstead:\r\n\r\n    private File createImageFileWithRandomSufix() throws IOException {\r\n        String photoName = &quot;photo_1&quot;;\r\n        File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\r\n        File image = File.createTempFile(photoName, &quot;.jpg&quot;, storageDir);\r\n        return image;\r\n    }\r\n\r\nUse this:\r\n\r\n    private File createImageFileWithoutRandomSufix() throws IOException {\r\n        String photoName = &quot;photo_1&quot;;\r\n        File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\r\n        File image = new File(storageDir + &quot;/&quot; + photoName + &quot;.jpg&quot;);\r\n        return image;\r\n    }\r\n\r\n","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>In my case with create *.img file in Android app:</p>\n<p>Instead:</p>\n<pre><code>private File createImageFileWithRandomSufix() throws IOException {\n    String photoName = &quot;photo_1&quot;;\n    File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\n    File image = File.createTempFile(photoName, &quot;.jpg&quot;, storageDir);\n    return image;\n}\n</code></pre>\n<p>Use this:</p>\n<pre><code>private File createImageFileWithoutRandomSufix() throws IOException {\n    String photoName = &quot;photo_1&quot;;\n    File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\n    File image = new File(storageDir + &quot;/&quot; + photoName + &quot;.jpg&quot;);\n    return image;\n}\n</code></pre>\n"}],"owner":{"account_id":1304350,"reputation":585,"user_id":1253626,"display_name":"RT_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81882,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"accepted_answer_id":9594927,"answer_count":9,"score":56,"last_activity_date":1682328152,"creation_date":1331086433,"question_id":9594886,"body_markdown":"I need to create a temp file, so I tried this:\r\n\r\n    String[] TempFiles = {&quot;c1234c10&quot;,&quot;c1234c11&quot;,&quot;c1234c12&quot;,&quot;c1234c13&quot;};\r\n    for (int i = 0; i &lt;= 3; i++) {\r\n        try {\r\n            String tempFile = TempFiles[i]; \r\n            File temp = File.createTempFile(tempFile, &quot;.xls&quot;); \r\n  \t        System.out.println(&quot;Temp file : &quot; + temp.getAbsolutePath());\r\n        } catch (IOException e) {\r\n\t        e.printStackTrace();\r\n        }\r\n    }\r\n\r\nThe output is something like this:\r\n\r\n     Temp file : C:\\Users\\MD1000\\AppData\\Local\\Temp\\c1234c108415816200650069233.xls\r\n     Temp file : C:\\Users\\MD1000\\AppData\\Local\\Temp\\c1234c113748833645638701089.xls\r\n     Temp file : C:\\Users\\MD1000\\AppData\\Local\\Temp\\c1234c126104766829220422260.xls\r\n     Temp file : C:\\Users\\MD1000\\AppData\\Local\\Temp\\c1234c137493179265536640669.xls\r\n\r\nNow, I don&#39;t want the extra numbers (long int) which is getting added to the file name. How can I achieve that? Thanks ","title":"How to create a temp file in java without the random number appended to the filename?","body":"<p>I need to create a temp file, so I tried this:</p>\n\n<pre><code>String[] TempFiles = {\"c1234c10\",\"c1234c11\",\"c1234c12\",\"c1234c13\"};\nfor (int i = 0; i &lt;= 3; i++) {\n    try {\n        String tempFile = TempFiles[i]; \n        File temp = File.createTempFile(tempFile, \".xls\"); \n        System.out.println(\"Temp file : \" + temp.getAbsolutePath());\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>The output is something like this:</p>\n\n<pre><code> Temp file : C:\\Users\\MD1000\\AppData\\Local\\Temp\\c1234c108415816200650069233.xls\n Temp file : C:\\Users\\MD1000\\AppData\\Local\\Temp\\c1234c113748833645638701089.xls\n Temp file : C:\\Users\\MD1000\\AppData\\Local\\Temp\\c1234c126104766829220422260.xls\n Temp file : C:\\Users\\MD1000\\AppData\\Local\\Temp\\c1234c137493179265536640669.xls\n</code></pre>\n\n<p>Now, I don't want the extra numbers (long int) which is getting added to the file name. How can I achieve that? Thanks </p>\n"},{"tags":["java","jvm"],"comments":[{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1682328145,"post_id":76090394,"comment_id":134192066,"body_markdown":"You&#39;re encountering an hard trouble: only those can create a dump. I suggest you to show us if a part of that dump gives clues about what is happening, because it&#39;s not the normal behavior of Java (in case of application errors), and you can&#39;t avoid correcting that trouble.","body":"You&#39;re encountering an hard trouble: only those can create a dump. I suggest you to show us if a part of that dump gives clues about what is happening, because it&#39;s not the normal behavior of Java (in case of application errors), and you can&#39;t avoid correcting that trouble."}],"owner":{"account_id":1431416,"reputation":912,"user_id":3456737,"accept_rate":24,"display_name":"igbgotiz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682327867,"creation_date":1682327867,"question_id":76090394,"body_markdown":"I&#39;m on semeru 11.\r\n\r\nWhen my program crashes, I see this line, which takes a long time.\r\n```\r\nJVMDUMP039I Processing dump event &quot;abort&quot;, detail &quot;&quot; at 2023/04/24 02:15:30 - please wait.\r\n\r\n```\r\n\r\nI tried disabling with JVM switch:\r\n```\r\n-Xdump:java:none\r\n```\r\n\r\nBut to no avail. Is there a way to disable the take dump on crash behavior of semeru 11?\r\n\r\n","title":"How to disable semeru 11 default dump behavior?","body":"<p>I'm on semeru 11.</p>\n<p>When my program crashes, I see this line, which takes a long time.</p>\n<pre><code>JVMDUMP039I Processing dump event &quot;abort&quot;, detail &quot;&quot; at 2023/04/24 02:15:30 - please wait.\n\n</code></pre>\n<p>I tried disabling with JVM switch:</p>\n<pre><code>-Xdump:java:none\n</code></pre>\n<p>But to no avail. Is there a way to disable the take dump on crash behavior of semeru 11?</p>\n"},{"tags":["java","spring-boot","spring-annotations","spring-webclient"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1682325410,"post_id":76090030,"comment_id":134191481,"body_markdown":"Could it be that your env variable called `ATM_FRAUD_SVC_ENDPOINT` is not set?","body":"Could it be that your env variable called <code>ATM_FRAUD_SVC_ENDPOINT</code> is not set?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682326121,"post_id":76090030,"comment_id":134191626,"body_markdown":"It isn&#39;t `null` you are accessing it too early. The value isn&#39;t set in the constructor, but afterwards. How would SPring be able to inject a value in an object that hasn&#39;t been constructed.","body":"It isn&#39;t <code>null</code> you are accessing it too early. The value isn&#39;t set in the constructor, but afterwards. How would SPring be able to inject a value in an object that hasn&#39;t been constructed."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682327482,"post_id":76090030,"comment_id":134191908,"body_markdown":"IN addition you aren&#39;t even uising a Spring managed instance but are creating one yourself. Marked as duplicate for a question regarding @Autowired, as the same applies to `@Value` as well.","body":"IN addition you aren&#39;t even uising a Spring managed instance but are creating one yourself. Marked as duplicate for a question regarding @Autowired, as the same applies to <code>@Value</code> as well."}],"owner":{"account_id":2113697,"reputation":161,"user_id":1878421,"accept_rate":50,"display_name":"Cyrillou"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682327495,"answer_count":0,"score":0,"last_activity_date":1682327565,"creation_date":1682325224,"question_id":76090030,"body_markdown":"I&#39;m building a very simple application where multiple services are interacting with eachs others (simulating ATM).\r\n\r\nA card service calls a fraud service to check whether or not the card is fraudulent.\r\n\r\nI have a problem where I&#39;m retrieving a property from application.properties but it&#39;s always returning null and can&#39;t figure out why. Here is the code for my Card service.\r\n\r\nThe Controller \r\n\r\n```java\r\npackage com.grafana.atm.cardservice.controller;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport org.springframework.web.server.ResponseStatusException;\r\n\r\nimport com.grafana.atm.cardservice.client.FraudServiceClient;\r\nimport com.grafana.atm.cardservice.model.Card;\r\n\r\nimport reactor.core.publisher.Mono;\r\n\r\n@RestController\r\npublic class CardController {\r\n\tLogger logger = LoggerFactory.getLogger(CardController.class);\r\n\tFraudServiceClient fraudServiceClient = new FraudServiceClient();\r\n\r\n\t@PostMapping(&quot;/card:check&quot;)\r\n\tpublic String checkCardValidity(@RequestBody Card card) {\r\n\t\tlogger.info(&quot;Checking if the credit card with number &quot;+card.getCardNumber()+&quot; is valid.&quot;);\r\n\r\n\t\tif (isValidCreditCardNumber(card.getCardNumber())) {\r\n\t\t\tlogger.info(&quot;The credit card with number &#39;&quot;+card.getCardNumber()+&quot;&#39; is valid.&quot;);\r\n\r\n\t\t\tfraudServiceClient.getFraudServiceClient().post()\r\n            .uri(&quot;/fraud:check&quot;)\r\n\t\t\t.body(Mono.just(card), Card.class)\r\n            .retrieve()\r\n            .onStatus(HttpStatus.INTERNAL_SERVER_ERROR::equals,\r\n                response -&gt; response.bodyToMono(String.class).map(Exception::new))\r\n                .bodyToMono(String.class)\r\n            .block();\r\n\t\t} else {\r\n\t\t\tlogger.error(&quot;The credit card with number &#39;&quot;+card.getCardNumber()+&quot;&#39; is invalid or cannot be verified.&quot;);\r\n\r\n\t\t\tthrow new ResponseStatusException(\r\n\t\t\t\tHttpStatus.INTERNAL_SERVER_ERROR, &quot;The card number is invalid or cannot be verified.&quot;);\r\n\t\t}\r\n\r\n\t\treturn &quot;all good&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nThe class for the WebClient\r\n\r\n```\r\npackage com.grafana.atm.cardservice.client;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.web.reactive.function.client.WebClient;\r\n\r\n@Service\r\npublic class FraudServiceClient {\r\n\t@Value(&quot;${atm.application.service.fraud.endpoint}&quot;)\r\n\tprivate String fraudServiceEndpoint;\r\n\r\n\tprivate final WebClient fraudServiceClient;\r\n\tLogger logger = LoggerFactory.getLogger(FraudServiceClient.class);\r\n\t\r\n\tpublic FraudServiceClient() {\r\n\t\tlogger.info(&quot;Creating WebClient for calling the Fraud service at &quot;+fraudServiceEndpoint);\r\n\r\n\t\tthis.fraudServiceClient = WebClient.builder()\r\n\t\t    .baseUrl(fraudServiceEndpoint)\r\n\t\t    .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE) \r\n\t\t    .build();\r\n\t}\r\n\r\n\tpublic WebClient getFraudServiceClient() {\r\n\t\treturn fraudServiceClient;\r\n\t}\r\n}\r\n```\r\n\r\nThe Card model\r\n\r\n```\r\npackage com.grafana.atm.cardservice.model;\r\n\r\npublic class Card {\r\n\tprivate String cardNumber;\r\n    private Integer cardExpiryDate;\r\n    private Integer cardCvc;\r\n\r\n    public Card() {\r\n    }\r\n\r\n    public Card(String cardNumber, Integer cardExpiryDate, Integer cardCvc) {\r\n        this.cardNumber = cardNumber;\r\n        this.cardExpiryDate = cardExpiryDate;\r\n        this.cardCvc = cardCvc;\r\n    }\r\n\r\n    public String getCardNumber() {\r\n        return this.cardNumber;\r\n    }\r\n\r\n    public Integer getCardExpiryDate() {\r\n        return this.cardExpiryDate;\r\n    }\r\n\r\n    public Integer getCardCvc() {\r\n        return this.cardCvc;\r\n    }\r\n}\r\n```\r\nI confirm the env variable called in my application.properties files is correctly set\r\n\r\nDisclamer: I&#39;m very new with Spring Boot - have read a lot but still learning a lot too so pardon me if it sounds obvious :).\r\n\r\napplication.propertie\r\n```\r\nspring.application.name=card-service\r\nserver.port=${ATM_CARD_SVC_PORT}\r\natm.application.service.fraud.endpoint=${ATM_FRAUD_SVC_ENDPOINT}\r\nmanagement.endpoint.chaosmonkey.enabled=true\r\nmanagement.endpoint.chaosmonkeyjmx.enabled=true\r\nmanagement.endpoints.web.exposure.include=health,info,prometheus,chaosmonkey\r\nserver.error.include-stacktrace=never\r\nserver.error.include-message=always\r\n\r\nlogging.pattern.console=Timestamp=%d{yyyy-MM-dd HH:mm:ss} Level=%p Logger=%logger{36} Message=%msg TraceId=%mdc{trace_id} SpanId=%mdc{span_id} TraceFlags=%mdc{trace_flags} %n\r\n```","title":"Using annotation @Value for retrieving property is returning null","body":"<p>I'm building a very simple application where multiple services are interacting with eachs others (simulating ATM).</p>\n<p>A card service calls a fraud service to check whether or not the card is fraudulent.</p>\n<p>I have a problem where I'm retrieving a property from application.properties but it's always returning null and can't figure out why. Here is the code for my Card service.</p>\n<p>The Controller</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.grafana.atm.cardservice.controller;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.server.ResponseStatusException;\n\nimport com.grafana.atm.cardservice.client.FraudServiceClient;\nimport com.grafana.atm.cardservice.model.Card;\n\nimport reactor.core.publisher.Mono;\n\n@RestController\npublic class CardController {\n    Logger logger = LoggerFactory.getLogger(CardController.class);\n    FraudServiceClient fraudServiceClient = new FraudServiceClient();\n\n    @PostMapping(&quot;/card:check&quot;)\n    public String checkCardValidity(@RequestBody Card card) {\n        logger.info(&quot;Checking if the credit card with number &quot;+card.getCardNumber()+&quot; is valid.&quot;);\n\n        if (isValidCreditCardNumber(card.getCardNumber())) {\n            logger.info(&quot;The credit card with number '&quot;+card.getCardNumber()+&quot;' is valid.&quot;);\n\n            fraudServiceClient.getFraudServiceClient().post()\n            .uri(&quot;/fraud:check&quot;)\n            .body(Mono.just(card), Card.class)\n            .retrieve()\n            .onStatus(HttpStatus.INTERNAL_SERVER_ERROR::equals,\n                response -&gt; response.bodyToMono(String.class).map(Exception::new))\n                .bodyToMono(String.class)\n            .block();\n        } else {\n            logger.error(&quot;The credit card with number '&quot;+card.getCardNumber()+&quot;' is invalid or cannot be verified.&quot;);\n\n            throw new ResponseStatusException(\n                HttpStatus.INTERNAL_SERVER_ERROR, &quot;The card number is invalid or cannot be verified.&quot;);\n        }\n\n        return &quot;all good&quot;;\n    }\n}\n</code></pre>\n<p>The class for the WebClient</p>\n<pre><code>package com.grafana.atm.cardservice.client;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.reactive.function.client.WebClient;\n\n@Service\npublic class FraudServiceClient {\n    @Value(&quot;${atm.application.service.fraud.endpoint}&quot;)\n    private String fraudServiceEndpoint;\n\n    private final WebClient fraudServiceClient;\n    Logger logger = LoggerFactory.getLogger(FraudServiceClient.class);\n    \n    public FraudServiceClient() {\n        logger.info(&quot;Creating WebClient for calling the Fraud service at &quot;+fraudServiceEndpoint);\n\n        this.fraudServiceClient = WebClient.builder()\n            .baseUrl(fraudServiceEndpoint)\n            .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE) \n            .build();\n    }\n\n    public WebClient getFraudServiceClient() {\n        return fraudServiceClient;\n    }\n}\n</code></pre>\n<p>The Card model</p>\n<pre><code>package com.grafana.atm.cardservice.model;\n\npublic class Card {\n    private String cardNumber;\n    private Integer cardExpiryDate;\n    private Integer cardCvc;\n\n    public Card() {\n    }\n\n    public Card(String cardNumber, Integer cardExpiryDate, Integer cardCvc) {\n        this.cardNumber = cardNumber;\n        this.cardExpiryDate = cardExpiryDate;\n        this.cardCvc = cardCvc;\n    }\n\n    public String getCardNumber() {\n        return this.cardNumber;\n    }\n\n    public Integer getCardExpiryDate() {\n        return this.cardExpiryDate;\n    }\n\n    public Integer getCardCvc() {\n        return this.cardCvc;\n    }\n}\n</code></pre>\n<p>I confirm the env variable called in my application.properties files is correctly set</p>\n<p>Disclamer: I'm very new with Spring Boot - have read a lot but still learning a lot too so pardon me if it sounds obvious :).</p>\n<p>application.propertie</p>\n<pre><code>spring.application.name=card-service\nserver.port=${ATM_CARD_SVC_PORT}\natm.application.service.fraud.endpoint=${ATM_FRAUD_SVC_ENDPOINT}\nmanagement.endpoint.chaosmonkey.enabled=true\nmanagement.endpoint.chaosmonkeyjmx.enabled=true\nmanagement.endpoints.web.exposure.include=health,info,prometheus,chaosmonkey\nserver.error.include-stacktrace=never\nserver.error.include-message=always\n\nlogging.pattern.console=Timestamp=%d{yyyy-MM-dd HH:mm:ss} Level=%p Logger=%logger{36} Message=%msg TraceId=%mdc{trace_id} SpanId=%mdc{span_id} TraceFlags=%mdc{trace_flags} %n\n</code></pre>\n"},{"tags":["java","file","fileinputstream"],"comments":[{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1682326140,"post_id":74600486,"comment_id":134191630,"body_markdown":"I think you need to close stream for FileInputStream, because your stream saved file inside of a. Also if you don&#39;t close stream, you will take memory leak\n\n    FileInputStream a = new FileInputStream(&quot;/tmp/input&quot;);\n    a.close();\nor use try with resource.\n\n    try (FileInputStream a = new FileInputStream(&quot;/tmp/input&quot;)) {\n     // your program code\n    }","body":"I think you need to close stream for FileInputStream, because your stream saved file inside of a. Also if you don&#39;t close stream, you will take memory leak      FileInputStream a = new FileInputStream(&quot;/tmp/input&quot;);     a.close(); or use try with resource.      try (FileInputStream a = new FileInputStream(&quot;/tmp/input&quot;)) {      // your program code     }"}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1682327431,"post_id":76090296,"comment_id":134191892,"body_markdown":"It&#39;s worth noting that this behaviour is pretty fundamental to how unix-like operating systems behave in general and many features depend on it. It&#39;s also the reason why the package-manager can just overwrite (delete/replace) a shared library that&#39;s still in use with a newer version: anything that has already got that file open/mapped will continue to see and use the old version. Anything that opens it up afterwards will see the new one.","body":"It&#39;s worth noting that this behaviour is pretty fundamental to how unix-like operating systems behave in general and many features depend on it. It&#39;s also the reason why the package-manager can just overwrite (delete/replace) a shared library that&#39;s still in use with a newer version: anything that has already got that file open/mapped will continue to see and use the old version. Anything that opens it up afterwards will see the new one."}],"tags":[],"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682327273,"creation_date":1682327273,"answer_id":76090296,"question_id":74600486,"body_markdown":"Great question, and I see why the above code counters your expectations. The reason why this happens is how certain file systems handle file deletion. \r\n\r\nUsually, file deletion does not, by default, mean &#39;erase the file data&#39;. It simply means &#39;erase the file system entry pointing to that data&#39;. In other words, the data is still there, it&#39;s simply &#39;forgotten&#39; by the file system. \r\n\r\nSince it is &#39;forgotten&#39;, eventually it will simply be overwritten with the data of another file. This is also why you can, in many cases, recover data from a faulty disk by simply fixing the file entries. For the same reason, data recovery experts strongly suggest to immediately cease to use a disk you&#39;re planning to recover data from - to avoid the accidental overwriting. \r\n\r\nOn top of all that, the low level OS procedures dealing with file access will often delay actual file deletion until all open handles have been closed, and the file handles themselves will remain valid. Here is [how Linux systems behave](https://stackoverflow.com/a/2031100/1092818), for instance. ","title":"How FileInputStream read once the file is deleted?","body":"<p>Great question, and I see why the above code counters your expectations. The reason why this happens is how certain file systems handle file deletion.</p>\n<p>Usually, file deletion does not, by default, mean 'erase the file data'. It simply means 'erase the file system entry pointing to that data'. In other words, the data is still there, it's simply 'forgotten' by the file system.</p>\n<p>Since it is 'forgotten', eventually it will simply be overwritten with the data of another file. This is also why you can, in many cases, recover data from a faulty disk by simply fixing the file entries. For the same reason, data recovery experts strongly suggest to immediately cease to use a disk you're planning to recover data from - to avoid the accidental overwriting.</p>\n<p>On top of all that, the low level OS procedures dealing with file access will often delay actual file deletion until all open handles have been closed, and the file handles themselves will remain valid. Here is <a href=\"https://stackoverflow.com/a/2031100/1092818\">how Linux systems behave</a>, for instance.</p>\n"}],"owner":{"account_id":11382249,"reputation":1662,"user_id":8344860,"display_name":"Anshita Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682327273,"creation_date":1669638066,"question_id":74600486,"body_markdown":"Here is my sample code:\r\n\r\n    public static void main(String[] args) throws IOException {\r\n      FileInputStream a = new FileInputStream(&quot;/tmp/input&quot;);\r\n      File file = new File(&quot;/tmp/input&quot;);\r\n      try {\r\n        boolean isFileDeleted = file.delete();\r\n        System.out.println(&quot;Is file deleted successfully : &quot;+ isFileDeleted);\r\n      } catch (Exception e) {\r\n        e.printStackTrace();\r\n      }\r\n      FileOutputStream outputStream = new FileOutputStream(&quot;/tmp/output&quot;);\r\n      IOUtils.copyLarge(a, outputStream);\r\n    }\r\n\r\nOutput:\r\n\r\n    Is file deleted successfully: true\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd I am seeing the **input file is deleted successfully** also from `/tmp` folder and I am also seeing `output` file got created with the expected output. How FileInputStream read the File and copy the expected character even if the file is deleted from the disk?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gOQtP.png","title":"How FileInputStream read once the file is deleted?","body":"<p>Here is my sample code:</p>\n<pre><code>public static void main(String[] args) throws IOException {\n  FileInputStream a = new FileInputStream(&quot;/tmp/input&quot;);\n  File file = new File(&quot;/tmp/input&quot;);\n  try {\n    boolean isFileDeleted = file.delete();\n    System.out.println(&quot;Is file deleted successfully : &quot;+ isFileDeleted);\n  } catch (Exception e) {\n    e.printStackTrace();\n  }\n  FileOutputStream outputStream = new FileOutputStream(&quot;/tmp/output&quot;);\n  IOUtils.copyLarge(a, outputStream);\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Is file deleted successfully: true\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gOQtP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gOQtP.png\" alt=\"enter image description here\" /></a></p>\n<p>And I am seeing the <strong>input file is deleted successfully</strong> also from <code>/tmp</code> folder and I am also seeing <code>output</code> file got created with the expected output. How FileInputStream read the File and copy the expected character even if the file is deleted from the disk?</p>\n"},{"tags":["java","firebase-realtime-database","multiple-databases"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1680847047,"post_id":75950860,"comment_id":133969015,"body_markdown":"Show the entire code that you&#39;re using to create a new instance. Besides that, if the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question.","body":"Show the entire code that you&#39;re using to create a new instance. Besides that, if the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question."}],"owner":{"account_id":28233084,"reputation":1,"user_id":21582010,"display_name":"c.h.andreas tudu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682327069,"creation_date":1680792412,"question_id":75950860,"body_markdown":"This is my code, I tried changing here and there but I still can&#39;t  call the Image in my app \r\n    List&lt;eventsSlides&gt; myEventsSlides;\r\n    eventsSlides mEventsSlides;\r\n\r\n    RecyclerView mRecyclerView;\r\nThe Correct  instance and reference are written in my actual Code.\r\n    private final DatabaseReference secondary = FirebaseDatabase.getInstance(&quot;https:Url of the database&quot;)\r\n            .getReference(&quot;/path&quot;);\r\n\r\n\r\n\r\n\r\n\r\n    private ValueEventListener eventListener;\r\n\r\n    ProgressDialog progressDialog;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main_menu);\r\n\r\n        drawerLayout = findViewById(R.id.drawerLayout);\r\n        navigationView = findViewById(R.id.navigation);\r\n        toolbar = findViewById(R.id.toolbar);\r\n        mRecyclerView = (RecyclerView) findViewById(R.id.recyclerView);\r\n        GridLayoutManager gridLayoutManager = new GridLayoutManager(MainMenuActivity.this,1);\r\n\r\n        mRecyclerView.setLayoutManager(gridLayoutManager);\r\n\r\n        progressDialog = new ProgressDialog(this);\r\n        progressDialog.setMessage(&quot;Loading items.....&quot;);\r\n\r\n        myEventsSlides = new ArrayList&lt;&gt;();\r\n\r\n\r\n        MyAdapter myAdapter = new MyAdapter(MainMenuActivity.this, myEventsSlides);\r\n        mRecyclerView.setAdapter(myAdapter);\r\nI tried secondary to call the instance// if I put the url in the below line the app crashes\r\n\r\n        DatabaseReference secondary = FirebaseDatabase.getInstance().getReference(&quot;path&quot;);\r\n\r\n\r\n        progressDialog.show();\r\n\r\n        ValueEventListener eventListener = secondary.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                myEventsSlides.clear();\r\n\r\n                for(DataSnapshot itemSnapshot: dataSnapshot.getChildren()){\r\n\r\n                    eventsSlides EventsSlide = itemSnapshot.getValue(eventsSlides.class);\r\n                    myEventsSlides.add(EventsSlide);\r\n\r\n                }\r\n                myAdapter.notifyDataSetChanged();\r\nthe above myAdaper.notifyDataSetChanged() is also showing a Yellow Line.\r\n\r\n \r\n                progressDialog.dismiss();\r\n                Toast.makeText(MainMenuActivity.this, &quot;Item receieved successful&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                progressDialog.dismiss();\r\n\r\n            }\r\n        });","title":"How do I retrieve image and data from my secondary database in Firebase on Android studio Java?","body":"<p>This is my code, I tried changing here and there but I still can't  call the Image in my app\nList myEventsSlides;\neventsSlides mEventsSlides;</p>\n<pre><code>RecyclerView mRecyclerView;\n</code></pre>\n<p>The Correct  instance and reference are written in my actual Code.\nprivate final DatabaseReference secondary = FirebaseDatabase.getInstance(&quot;https:Url of the database&quot;)\n.getReference(&quot;/path&quot;);</p>\n<pre><code>private ValueEventListener eventListener;\n\nProgressDialog progressDialog;\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main_menu);\n\n    drawerLayout = findViewById(R.id.drawerLayout);\n    navigationView = findViewById(R.id.navigation);\n    toolbar = findViewById(R.id.toolbar);\n    mRecyclerView = (RecyclerView) findViewById(R.id.recyclerView);\n    GridLayoutManager gridLayoutManager = new GridLayoutManager(MainMenuActivity.this,1);\n\n    mRecyclerView.setLayoutManager(gridLayoutManager);\n\n    progressDialog = new ProgressDialog(this);\n    progressDialog.setMessage(&quot;Loading items.....&quot;);\n\n    myEventsSlides = new ArrayList&lt;&gt;();\n\n\n    MyAdapter myAdapter = new MyAdapter(MainMenuActivity.this, myEventsSlides);\n    mRecyclerView.setAdapter(myAdapter);\n</code></pre>\n<p>I tried secondary to call the instance// if I put the url in the below line the app crashes</p>\n<pre><code>    DatabaseReference secondary = FirebaseDatabase.getInstance().getReference(&quot;path&quot;);\n\n\n    progressDialog.show();\n\n    ValueEventListener eventListener = secondary.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n            myEventsSlides.clear();\n\n            for(DataSnapshot itemSnapshot: dataSnapshot.getChildren()){\n\n                eventsSlides EventsSlide = itemSnapshot.getValue(eventsSlides.class);\n                myEventsSlides.add(EventsSlide);\n\n            }\n            myAdapter.notifyDataSetChanged();\n</code></pre>\n<p>the above myAdaper.notifyDataSetChanged() is also showing a Yellow Line.</p>\n<pre><code>            progressDialog.dismiss();\n            Toast.makeText(MainMenuActivity.this, &quot;Item receieved successful&quot;, Toast.LENGTH_SHORT).show();\n\n\n\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n            progressDialog.dismiss();\n\n        }\n    });\n</code></pre>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682262870,"post_id":76085603,"comment_id":134184102,"body_markdown":"That would be okay but your `equals` method is wrong. You should be type checking on `Decorator` not `Integer. Of course your integer field has to be unique for it to work properly.","body":"That would be okay but your <code>equals</code> method is wrong. You should be type checking on <code>Decorator</code> not `Integer. Of course your integer field has to be unique for it to work properly."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1682271230,"post_id":76085603,"comment_id":134185277,"body_markdown":"The other thing is: what is `Decorator.s` and how is it used? Its key methods `hashCode` and `equals` would not normally ignore it","body":"The other thing is: what is <code>Decorator.s</code> and how is it used? Its key methods <code>hashCode</code> and <code>equals</code> would not normally ignore it"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1682324795,"post_id":76085603,"comment_id":134191340,"body_markdown":"Can you explain *why* you want this? As I&#39;ve explained in my answer it&#39;s a risky thing to try, but there&#39;s probably better approaches which we can suggest if you tell us your underlying need. This seems like [a XY problem](https://xyproblem.info).","body":"Can you explain <i>why</i> you want this? As I&#39;ve explained in my answer it&#39;s a risky thing to try, but there&#39;s probably better approaches which we can suggest if you tell us your underlying need. This seems like <a href=\"https://xyproblem.info\" rel=\"nofollow noreferrer\">a XY problem</a>."}],"answers":[{"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1682270248,"post_id":76086160,"comment_id":134185159,"body_markdown":"Can you clarify the solution? The code does not compile (`Decoder` should be `Decorator` - just a typo I think). But also, the sample code from the question `map.get(3)` used to demonstrate this class still returns `null`. Is the overridden `equals()` method actually used?","body":"Can you clarify the solution? The code does not compile (<code>Decoder</code> should be <code>Decorator</code> - just a typo I think). But also, the sample code from the question <code>map.get(3)</code> used to demonstrate this class still returns <code>null</code>. Is the overridden <code>equals()</code> method actually used?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1682279214,"post_id":76086160,"comment_id":134186454,"body_markdown":"OK - I guess it&#39;s the `hashCode()` method that is relevant and used here, not `equals()` - but the implementation of `get()` in `HashMap` makes use of the provided key placed in the map (in this case `Decorator`) so `get()` fails to find the requested key (an integer). See [`first.key`](https://github.com/openjdk/jdk/blob/0f51e6326373ff7d4a4d9a0e3a2788401f73405d/src/java.base/share/classes/java/util/HashMap.java#L578) - which does not match the lookup `key`. (If I have misread the source, I would be grateful for any corrections.)","body":"OK - I guess it&#39;s the <code>hashCode()</code> method that is relevant and used here, not <code>equals()</code> - but the implementation of <code>get()</code> in <code>HashMap</code> makes use of the provided key placed in the map (in this case <code>Decorator</code>) so <code>get()</code> fails to find the requested key (an integer). See <a href=\"https://github.com/openjdk/jdk/blob/0f51e6326373ff7d4a4d9a0e3a2788401f73405d/src/java.base/share/classes/java/util/HashMap.java#L578\" rel=\"nofollow noreferrer\"><code>first.key</code></a> - which does not match the lookup <code>key</code>. (If I have misread the source, I would be grateful for any corrections.)"},{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":0,"creation_date":1682324799,"post_id":76086160,"comment_id":134191342,"body_markdown":"@andrewJames Yes, thanks. The `Decoder` was indeed just a typo, and I didn&#39;t see that the OP was calling `get` directly with an `int`. This clearly violates `Map`&#39;s contract. I explained that now.","body":"@andrewJames Yes, thanks. The <code>Decoder</code> was indeed just a typo, and I didn&#39;t see that the OP was calling <code>get</code> directly with an <code>int</code>. This clearly violates <code>Map</code>&#39;s contract. I explained that now."}],"tags":[],"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682324400,"creation_date":1682269288,"answer_id":76086160,"question_id":76085603,"body_markdown":"You can&#39;t use 2 different types for the keys of a map. The map defines 2 type parameters, `Map&lt;K ,V&gt;`, and these are used in `put(K, V)` and `V get(K)`. Your `K` is `Decorator` and your `V` is `String`. Your `map.get(3)` call will always return `null` because a `Decorator` can&#39;t be equal to an `int` (not without violating the contract of `Object.equals`).\r\n\r\nWhat you can do, and this is a normal thing to do, is use `Delegator`&#39;s `int i` as an effective key. You need to fulfill 2 criteria:\r\n1. `@Override` the `equals(Object)` method, which is used to determine which keys are duplicates, with that of your contained instance.\r\n2. `@Override` the `hashCode()` method (always do so when overriding `equals()`), which is used by `HashMap`, with that of your contained instance.\r\n\r\nThis is called *delegation* - you delegate the functionality/behavior from the containing type to that of the contained type. Here, we are delegating the calls to `Decorator` to `int i`.\r\n\r\n```\r\n    @Override\r\n    public int hashCode() {\r\n        return Integer.hashCode(i); // Decorator&#39;s hash code is i&#39;s hash code\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object obj) {\r\n        if (obj == this) { // this is just an optimization, but not really needed in this case\r\n            return true;\r\n        }\r\n        if (!(obj instanceof Decorator)) {\r\n            return false;\r\n        }\r\n        final Decorator other = (Decorator) obj;\r\n        return i == other.i; // Decorators are equal if their i is equal\r\n    }\r\n```\r\n\r\nNow you can do\r\n```\r\n        map.put(new Decorator(3, &quot;some string&quot;), &quot;some value&quot;);\r\n        System.out.println(map.get(new Decorator(3, &quot;&quot;)));\r\n```\r\nbecause only the `int` field is used to search the map.","title":"custom decorated key for hashmap","body":"<p>You can't use 2 different types for the keys of a map. The map defines 2 type parameters, <code>Map&lt;K ,V&gt;</code>, and these are used in <code>put(K, V)</code> and <code>V get(K)</code>. Your <code>K</code> is <code>Decorator</code> and your <code>V</code> is <code>String</code>. Your <code>map.get(3)</code> call will always return <code>null</code> because a <code>Decorator</code> can't be equal to an <code>int</code> (not without violating the contract of <code>Object.equals</code>).</p>\n<p>What you can do, and this is a normal thing to do, is use <code>Delegator</code>'s <code>int i</code> as an effective key. You need to fulfill 2 criteria:</p>\n<ol>\n<li><code>@Override</code> the <code>equals(Object)</code> method, which is used to determine which keys are duplicates, with that of your contained instance.</li>\n<li><code>@Override</code> the <code>hashCode()</code> method (always do so when overriding <code>equals()</code>), which is used by <code>HashMap</code>, with that of your contained instance.</li>\n</ol>\n<p>This is called <em>delegation</em> - you delegate the functionality/behavior from the containing type to that of the contained type. Here, we are delegating the calls to <code>Decorator</code> to <code>int i</code>.</p>\n<pre><code>    @Override\n    public int hashCode() {\n        return Integer.hashCode(i); // Decorator's hash code is i's hash code\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (obj == this) { // this is just an optimization, but not really needed in this case\n            return true;\n        }\n        if (!(obj instanceof Decorator)) {\n            return false;\n        }\n        final Decorator other = (Decorator) obj;\n        return i == other.i; // Decorators are equal if their i is equal\n    }\n</code></pre>\n<p>Now you can do</p>\n<pre><code>        map.put(new Decorator(3, &quot;some string&quot;), &quot;some value&quot;);\n        System.out.println(map.get(new Decorator(3, &quot;&quot;)));\n</code></pre>\n<p>because only the <code>int</code> field is used to search the map.</p>\n"},{"comments":[{"owner":{"account_id":13584165,"reputation":69,"user_id":9799332,"display_name":"Dani"},"score":0,"creation_date":1682416301,"post_id":76089960,"comment_id":134208013,"body_markdown":"So I would need to construct a âdummyâ Decorator with my desired hashcode (Integer) just to access a value with it?","body":"So I would need to construct a âdummyâ Decorator with my desired hashcode (Integer) just to access a value with it?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1682416607,"post_id":76089960,"comment_id":134208084,"body_markdown":"If you insist on keeping the decorator-key approach, then yes. You could try to restructure your design to not require the decorator, but how exactly that would make sense depends on your underlying goals with the decorator, which your original question doesn&#39;t contain enough details about to answer.","body":"If you insist on keeping the decorator-key approach, then yes. You could try to restructure your design to not require the decorator, but how exactly that would make sense depends on your underlying goals with the decorator, which your original question doesn&#39;t contain enough details about to answer."}],"tags":[],"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682326555,"creation_date":1682324702,"answer_id":76089960,"question_id":76085603,"body_markdown":"You might get it to work &lt;sup&gt;*&lt;/sup&gt;, but even *if you do*, there&#39;s still the problem that the `equals` method necessary for this does not conform to [the specification of `equals`][1]. Specifically this part:\r\n\r\n&gt; It is *symmetric*: for any non-null reference values `x` and `y`, `x.equals(y)` should return `true` if and only if `y.equals(x)` returns `true`.\r\n\r\nSo if `x` is `new Decorator(1, &quot;foo&quot;)` and `y` is `new Integer(1)` then `x.equals(y)` would return `true`, but `y.equals(x)` would return `false` (because `Integer` obviously doesn&#39;t know about your `Decorator`).\r\n\r\nNow whether or not this *actually* causes any issues depends on how exactly the `Map` implementation uses `equals`. But since `equals` is defined to be symetric any implementation is free to call `equals` on either the key passed to the `get()` method or on the key stored in the map. If the map would always call `keyFromMap.equals(keyFromGetCall)` then it would work, if it did the opposite, it would not work. So fundamentally using such a wrapper will depend on implementation-specific behaviour, which makes it quite fragile.\r\n\r\nThe *specific* implementation in your question also breaks this rule:\r\n\r\n&gt; It is *reflexive*: for any non-null reference value `x`, ` x.equals(x)` should return `true`.\r\n\r\nBut this one could easily be fixed by just adding `if (obj == this) return true;` to the beginning, so that one&#39;s not an unsolvable problem.\r\n\r\n&lt;sup&gt;* I&#39;ve checked and the `HashMap.get(key)` implementation as of OpenJDK 17 calls `key.equals(keyStoredInHashMap)`, which means that having a decorator stored in the map and calling `get` with an `Integer` will not work, but the other way around might. I&#39;ve made this just a footnote, because the more important part is that it can&#39;t *generally* work.&lt;/sup&gt;\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)","title":"custom decorated key for hashmap","body":"<p>You might get it to work <sup>*</sup>, but even <em>if you do</em>, there's still the problem that the <code>equals</code> method necessary for this does not conform to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">the specification of <code>equals</code></a>. Specifically this part:</p>\n<blockquote>\n<p>It is <em>symmetric</em>: for any non-null reference values <code>x</code> and <code>y</code>, <code>x.equals(y)</code> should return <code>true</code> if and only if <code>y.equals(x)</code> returns <code>true</code>.</p>\n</blockquote>\n<p>So if <code>x</code> is <code>new Decorator(1, &quot;foo&quot;)</code> and <code>y</code> is <code>new Integer(1)</code> then <code>x.equals(y)</code> would return <code>true</code>, but <code>y.equals(x)</code> would return <code>false</code> (because <code>Integer</code> obviously doesn't know about your <code>Decorator</code>).</p>\n<p>Now whether or not this <em>actually</em> causes any issues depends on how exactly the <code>Map</code> implementation uses <code>equals</code>. But since <code>equals</code> is defined to be symetric any implementation is free to call <code>equals</code> on either the key passed to the <code>get()</code> method or on the key stored in the map. If the map would always call <code>keyFromMap.equals(keyFromGetCall)</code> then it would work, if it did the opposite, it would not work. So fundamentally using such a wrapper will depend on implementation-specific behaviour, which makes it quite fragile.</p>\n<p>The <em>specific</em> implementation in your question also breaks this rule:</p>\n<blockquote>\n<p>It is <em>reflexive</em>: for any non-null reference value <code>x</code>, <code> x.equals(x)</code> should return <code>true</code>.</p>\n</blockquote>\n<p>But this one could easily be fixed by just adding <code>if (obj == this) return true;</code> to the beginning, so that one's not an unsolvable problem.</p>\n<p><sup>* I've checked and the <code>HashMap.get(key)</code> implementation as of OpenJDK 17 calls <code>key.equals(keyStoredInHashMap)</code>, which means that having a decorator stored in the map and calling <code>get</code> with an <code>Integer</code> will not work, but the other way around might. I've made this just a footnote, because the more important part is that it can't <em>generally</em> work.</sup></p>\n"}],"owner":{"account_id":13584165,"reputation":69,"user_id":9799332,"display_name":"Dani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682326555,"creation_date":1682262289,"question_id":76085603,"body_markdown":"I want to know if it is possible in java to create a class that consists of a final key wrapped by some other fields and use it as key in a HashMap as if it were only that key. Something like this:\r\n\r\n    Map&lt;Decorator, String&gt; map = new HashMap&lt;&gt;();\r\n\r\n    private static class Decorator {\r\n        private final int i;\r\n        private String s;\r\n\r\n        public Decorator(int i, String s) {\r\n            this.i = i;\r\n            this.s = s;\r\n        }\r\n\r\n        public String getS() {\r\n            return s;\r\n        }\r\n\r\n        public void setS(String s) {\r\n            this.s = s;\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return i;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (!(obj instanceof Integer)) {\r\n                return false;\r\n            }\r\n            final Integer other = (Integer) obj;\r\n            return i == other;\r\n        }\r\n    }\r\n\r\nwhen I then call\r\n\r\n        map.put(new Decorator(3, &quot;some string&quot;), &quot;some value&quot;);\r\n        System.out.println(map.get(3));\r\n\r\nI would like to receive the proper map value &quot;some value&quot;. Does someone know if this is possible?","title":"custom decorated key for hashmap","body":"<p>I want to know if it is possible in java to create a class that consists of a final key wrapped by some other fields and use it as key in a HashMap as if it were only that key. Something like this:</p>\n<pre><code>Map&lt;Decorator, String&gt; map = new HashMap&lt;&gt;();\n\nprivate static class Decorator {\n    private final int i;\n    private String s;\n\n    public Decorator(int i, String s) {\n        this.i = i;\n        this.s = s;\n    }\n\n    public String getS() {\n        return s;\n    }\n\n    public void setS(String s) {\n        this.s = s;\n    }\n\n    @Override\n    public int hashCode() {\n        return i;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (!(obj instanceof Integer)) {\n            return false;\n        }\n        final Integer other = (Integer) obj;\n        return i == other;\n    }\n}\n</code></pre>\n<p>when I then call</p>\n<pre><code>    map.put(new Decorator(3, &quot;some string&quot;), &quot;some value&quot;);\n    System.out.println(map.get(3));\n</code></pre>\n<p>I would like to receive the proper map value &quot;some value&quot;. Does someone know if this is possible?</p>\n"},{"tags":["java","maven","intellij-idea","jboss","manifold"],"answers":[{"tags":[],"owner":{"account_id":6398158,"reputation":69,"user_id":4961826,"display_name":"dknipper"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638813232,"creation_date":1638813232,"answer_id":70249771,"question_id":70249348,"body_markdown":"All I had to do was add the manifold libraries to the build artifacts so they could be picked up by the runtime. ","title":"How do I get manifold-ext to work in JBoss?","body":"<p>All I had to do was add the manifold libraries to the build artifacts so they could be picked up by the runtime.</p>\n"}],"owner":{"account_id":6398158,"reputation":69,"user_id":4961826,"display_name":"dknipper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682326297,"creation_date":1638811152,"question_id":70249348,"body_markdown":"I&#39;m trying to get the manifold java compiler plugin to work in JBoss. When I deploy I get:\r\n```\r\nCaused by: java.lang.ClassNotFoundException: manifold.rt.api.IBootstrap from [Module &quot;deployment.siterefresh_Web.war&quot; from Service Module Loader]\r\n\tat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\r\n\tat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\r\n\tat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\r\n\tat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\r\n```\r\nThe manifold project is here: [http://manifold.systems/][1]\r\n\r\nMy experience with this exception is that a JBoss module needs to be created. Do I need to do this? If so, how do I setup the custom module? I&#39;m a bit confused about the directory structure of where the module needs to be placed.  \r\n\r\n\r\n  [1]: http://manifold.systems/","title":"How do I get manifold-ext to work in JBoss?","body":"<p>I'm trying to get the manifold java compiler plugin to work in JBoss. When I deploy I get:</p>\n<pre><code>Caused by: java.lang.ClassNotFoundException: manifold.rt.api.IBootstrap from [Module &quot;deployment.siterefresh_Web.war&quot; from Service Module Loader]\n    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\n    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\n    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\n    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\n</code></pre>\n<p>The manifold project is here: <a href=\"http://manifold.systems/\" rel=\"nofollow noreferrer\">http://manifold.systems/</a></p>\n<p>My experience with this exception is that a JBoss module needs to be created. Do I need to do this? If so, how do I setup the custom module? I'm a bit confused about the directory structure of where the module needs to be placed.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"score":0,"creation_date":1682327071,"post_id":76090147,"comment_id":134191821,"body_markdown":"You might need to look into command pattern, have a look at the article https://medium.com/codex/how-i-implemented-command-pattern-in-spring-boot-870c1f2c73b0","body":"You might need to look into command pattern, have a look at the article <a href=\"https://medium.com/codex/how-i-implemented-command-pattern-in-spring-boot-870c1f2c73b0\" rel=\"nofollow noreferrer\">medium.com/codex/&hellip;</a>"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1682330231,"post_id":76090147,"comment_id":134192528,"body_markdown":"When they implement an `CommonInterface` you can inject them in a `List&lt;CommonInterface&gt; executors;`","body":"When they implement an <code>CommonInterface</code> you can inject them in a <code>List&lt;CommonInterface&gt; executors;</code>"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1682330295,"post_id":76090147,"comment_id":134192550,"body_markdown":"Oh and please use constructor injection, that way your dependencies are clearer and your service will be better testable.","body":"Oh and please use constructor injection, that way your dependencies are clearer and your service will be better testable."}],"owner":{"account_id":10636595,"reputation":31,"user_id":7833117,"display_name":"Youssef"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682326189,"creation_date":1682326189,"question_id":76090147,"body_markdown":"I would like to code properly multiple executors using Spring, but need to load them only when it&#39;s necessary and required, bellow an example to explain clearly the needs.\r\n\r\n \r\n``` java\r\n@Component\r\npublic class Executor[A-Z] {\r\n    @Autowired\r\n    Dep[A-Z] dep[A-Z];\r\n\r\n    @Autowired\r\n    Dep[A-Z] dep[A-Z];\r\n\r\n   /**\r\n    example :\r\n    DepA depA;\r\n    DepC depC;\r\n   */\r\n   \r\n  public void execute() {\r\n    // method body\r\n  }\r\n}\r\n```\r\n\r\nI have multiple Executors from A to Z (ExecutorA,..... ExecutorZ)\r\n\r\nThose executors are used in a service class MyService :\r\n\r\n``` java\r\n@Service\r\npublic class MyService {\r\n    @Autowired\r\n    ExecutorA executorA;\r\n\r\n    //.....\r\n\r\n    @Autowired\r\n    ExecutorZ executorZ;\r\n   \r\n  public void launchExecutor() {\r\n    if ( conditionA ) {\r\n        executorA.execute();\r\n     } else if( confitionB ) {\r\n         executorB.execute();\r\n     } else {\r\n         executorZ.execute();\r\n     }\r\n\r\n  }\r\n}\r\n```\r\nIn the example above on MyService class i have to load all Executors at once, whereas may few of them could be used.\r\n\r\nWhat is the best way to optimize numbers of beans loaded in Spring IoC container in this example ? Is there a manner to create Executor[A-Z] instance on demand based on conditions ?  \r\n\r\nThank you","title":"Spring multiple autowired beans modeling","body":"<p>I would like to code properly multiple executors using Spring, but need to load them only when it's necessary and required, bellow an example to explain clearly the needs.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class Executor[A-Z] {\n    @Autowired\n    Dep[A-Z] dep[A-Z];\n\n    @Autowired\n    Dep[A-Z] dep[A-Z];\n\n   /**\n    example :\n    DepA depA;\n    DepC depC;\n   */\n   \n  public void execute() {\n    // method body\n  }\n}\n</code></pre>\n<p>I have multiple Executors from A to Z (ExecutorA,..... ExecutorZ)</p>\n<p>Those executors are used in a service class MyService :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n    @Autowired\n    ExecutorA executorA;\n\n    //.....\n\n    @Autowired\n    ExecutorZ executorZ;\n   \n  public void launchExecutor() {\n    if ( conditionA ) {\n        executorA.execute();\n     } else if( confitionB ) {\n         executorB.execute();\n     } else {\n         executorZ.execute();\n     }\n\n  }\n}\n</code></pre>\n<p>In the example above on MyService class i have to load all Executors at once, whereas may few of them could be used.</p>\n<p>What is the best way to optimize numbers of beans loaded in Spring IoC container in this example ? Is there a manner to create Executor[A-Z] instance on demand based on conditions ?</p>\n<p>Thank you</p>\n"},{"tags":["java","polymorphism","abstract-class","abstract-methods"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1682325431,"post_id":76090008,"comment_id":134191485,"body_markdown":"When the class is loaded by the JVM, its code becomes available. Code is not per-instance, so it&#39;s already there before the class instance has been reserved in memory. If it helps you understand it, you can think of the code as &quot;static&quot;: there&#39;s only one chunk code for all the instances of a class. It does not duplicate the code for each class instance.","body":"When the class is loaded by the JVM, its code becomes available. Code is not per-instance, so it&#39;s already there before the class instance has been reserved in memory. If it helps you understand it, you can think of the code as &quot;static&quot;: there&#39;s only one chunk code for all the instances of a class. It does not duplicate the code for each class instance."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1682330233,"post_id":76090008,"comment_id":134192530,"body_markdown":"Because Java doesn&#39;t work like C++, which does behave the way you expect.","body":"Because Java doesn&#39;t work like C++, which does behave the way you expect."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1682325800,"creation_date":1682325800,"answer_id":76090102,"question_id":76090008,"body_markdown":"There is nothing special about abstract methods here. You can also just call non-abstract methods in the same way:\r\n\r\n```\r\nclass Platypus {\r\n    {\r\n        System.out.println(chew());\r\n    }\r\n    \r\n    public Platypus() {\r\n        System.out.println(&quot;Platypus constructor&quot;);\r\n    }\r\n\r\n    String chew() {\r\n        return &quot;yummy!&quot;;\r\n    }\r\n}\r\n```\r\n\r\n&gt; I thought an instance of a class gets created when the constructor is called.\r\n\r\nNo, the constructor is not responsible for *creating* the object. An object is created first, and then its constructor is called to *initialise* the object.\r\n\r\nThis can be seen in the bytecode too. The bytecode for `new Platypus()` looks something like this:\r\n\r\n    NEW yourpackage/Platypus\r\n    DUP\r\n    INVOKESPECIAL yourpackage/Platypus.&lt;init&gt; ()V\r\n\r\nThe [`new`][1] instruction creates the object, and then `&lt;init&gt;`, which is the JVM name for constructors, is invoked.\r\n\r\nSo here, we can say that `chew()` is called before the object is *fully initialised*. The object already exists, so calling `chew` is technically possible.\r\n\r\nHowever, calling instance methods when the object is not fully initialised is usually not a good idea. The method might *depend* on the fact that the object is fully initialised (e.g. accessing fields that are expected to not be null). See also: https://stackoverflow.com/q/5230565/5133585\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-6.html#jvms-6.5.new","title":"Why can we call abstract method from an abstract class before sub-class initialization","body":"<p>There is nothing special about abstract methods here. You can also just call non-abstract methods in the same way:</p>\n<pre><code>class Platypus {\n    {\n        System.out.println(chew());\n    }\n    \n    public Platypus() {\n        System.out.println(&quot;Platypus constructor&quot;);\n    }\n\n    String chew() {\n        return &quot;yummy!&quot;;\n    }\n}\n</code></pre>\n<blockquote>\n<p>I thought an instance of a class gets created when the constructor is called.</p>\n</blockquote>\n<p>No, the constructor is not responsible for <em>creating</em> the object. An object is created first, and then its constructor is called to <em>initialise</em> the object.</p>\n<p>This can be seen in the bytecode too. The bytecode for <code>new Platypus()</code> looks something like this:</p>\n<pre><code>NEW yourpackage/Platypus\nDUP\nINVOKESPECIAL yourpackage/Platypus.&lt;init&gt; ()V\n</code></pre>\n<p>The <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-6.html#jvms-6.5.new\" rel=\"nofollow noreferrer\"><code>new</code></a> instruction creates the object, and then <code>&lt;init&gt;</code>, which is the JVM name for constructors, is invoked.</p>\n<p>So here, we can say that <code>chew()</code> is called before the object is <em>fully initialised</em>. The object already exists, so calling <code>chew</code> is technically possible.</p>\n<p>However, calling instance methods when the object is not fully initialised is usually not a good idea. The method might <em>depend</em> on the fact that the object is fully initialised (e.g. accessing fields that are expected to not be null). See also: <a href=\"https://stackoverflow.com/q/5230565/5133585\">Can I call methods in constructor in Java?</a></p>\n"}],"owner":{"account_id":7405799,"reputation":625,"user_id":5634777,"accept_rate":38,"display_name":"kaka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":76090102,"answer_count":1,"score":2,"last_activity_date":1682325800,"creation_date":1682325068,"question_id":76090008,"body_markdown":"We can initialize an abstract class through initialization of a concrete sub class. Therefore, should be able to call the abstract methods of an abstract class only after the initialization of a subclass However, the following initialization block in abstract class Mammal can call an abstract method before the initialization of the sub child class.\r\n\r\nIf you call the constructor of Platypus with new Platypus(), it outputs:\r\n&quot;yummy!&quot;, \r\n&quot;Mammal constructor&quot;, \r\n&quot;Platypus constructor&quot; in the same order. I thought an instance of a class gets created when the constructor is called. But the initialization block in Mammal is able to call the method before Platypus initialization.\r\n\r\n    abstract class Mammal {\r\n\r\n        {\r\n            System.out.println(chew()); \r\n        }\r\n\r\n        abstract CharSequence chew();\r\n\r\n        public Mammal() {\r\n           System.out.println(&quot;Mammal constructor&quot;); \r\n        }\r\n    }\r\n\r\n    public class Platypus extends Mammal {\r\n\r\n        public Platypus() {\r\n            System.out.println(&quot;Platypus constructor&quot;);\r\n        }\r\n        \r\n        String chew() {\r\n            return &quot;yummy!&quot;;\r\n        }\r\n\r\n    \r\n    }\r\n\r\n","title":"Why can we call abstract method from an abstract class before sub-class initialization","body":"<p>We can initialize an abstract class through initialization of a concrete sub class. Therefore, should be able to call the abstract methods of an abstract class only after the initialization of a subclass However, the following initialization block in abstract class Mammal can call an abstract method before the initialization of the sub child class.</p>\n<p>If you call the constructor of Platypus with new Platypus(), it outputs:\n&quot;yummy!&quot;,\n&quot;Mammal constructor&quot;,\n&quot;Platypus constructor&quot; in the same order. I thought an instance of a class gets created when the constructor is called. But the initialization block in Mammal is able to call the method before Platypus initialization.</p>\n<pre><code>abstract class Mammal {\n\n    {\n        System.out.println(chew()); \n    }\n\n    abstract CharSequence chew();\n\n    public Mammal() {\n       System.out.println(&quot;Mammal constructor&quot;); \n    }\n}\n\npublic class Platypus extends Mammal {\n\n    public Platypus() {\n        System.out.println(&quot;Platypus constructor&quot;);\n    }\n    \n    String chew() {\n        return &quot;yummy!&quot;;\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","queue"],"comments":[{"owner":{"account_id":6356472,"reputation":11,"user_id":4933552,"display_name":"Dash Harber"},"score":0,"creation_date":1682365448,"post_id":76081642,"comment_id":134200779,"body_markdown":"I apologize. I started java about two months ago, so I&#39;m still learning all the proper conventions.","body":"I apologize. I started java about two months ago, so I&#39;m still learning all the proper conventions."}],"answers":[{"tags":[],"owner":{"account_id":28083875,"reputation":81,"user_id":21454529,"display_name":"Allison Chen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682325639,"creation_date":1682325639,"answer_id":76090084,"question_id":76081642,"body_markdown":"I guess you want to implement a stack using two queues. So I will suggest you rename the `DubbleQueue` class as `MyStack` or something else. I&#39;m a bit confused about what you did in the `pop` function. I don&#39;t know why you pass the `val` in the `public int remove(int i)` function (actually don&#39;t use it at all). The `pop` function returns and removes the value from the first position. The value comparison shouldn&#39;t exist. \r\n\r\n`MyQueye` class is like:\r\n    public class MyQueue {\r\n\r\n    static class Node {\r\n        int val;\r\n        Node next;\r\n\r\n        public Node(int val) {\r\n            this.val = val;\r\n            this.next = null;\r\n        }\r\n    }\r\n\r\n    private Node head = null, tail = null;\r\n    private int n = 0;\r\n\r\n    public boolean offer(int val) {\r\n        Node node = new Node(val);\r\n        if (null == head) {\r\n            head = node;\r\n        } else {\r\n            tail.next = node;\r\n        }\r\n        tail = node;\r\n        n ++;\r\n        return true;\r\n    }\r\n\r\n    public int poll() {\r\n        if (n &lt;= 0) {\r\n            throw new RuntimeException();\r\n        }\r\n        int top = head.val;\r\n        n --;\r\n        head = head.next;\r\n        if (n == 0) {\r\n            tail = null;\r\n        }\r\n        return top;\r\n    }\r\n\r\n    public int size() {\r\n        return n;\r\n    }\r\n\r\n    public boolean isEmpty() {\r\n        return size() == 0;\r\n    }}\r\n\r\n\r\n`MyStack` class is like:  \r\n\r\n    public class MyStack {\r\n\r\n    MyQueue in, out;\r\n\r\n    public MyStack() {\r\n        in = new MyQueue();\r\n        out = new MyQueue();\r\n    }\r\n\r\n    public int push(int val) {\r\n        in.offer(val);\r\n        while (!out.isEmpty()) {\r\n            in.offer(out.poll());\r\n        }\r\n        swapInAndOut();\r\n        return val;\r\n    }\r\n\r\n    public int pop() {\r\n        if (out.isEmpty()) {\r\n            throw new EmptyStackException();\r\n        }\r\n        return out.poll();\r\n    }\r\n\r\n    private void swapInAndOut() {\r\n        MyQueue temp = in;\r\n        in = out;\r\n        out = temp;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        MyStack myStack = new MyStack();\r\n        myStack.push(1);\r\n        myStack.push(2);\r\n        myStack.push(3);\r\n        System.out.println(myStack.pop());\r\n        System.out.println(myStack.pop());\r\n        myStack.push(4);\r\n        System.out.println(myStack.pop());\r\n        System.out.println(myStack.pop());\r\n    }\r\n  }\r\n\r\n","title":"Java; Pop and Push using two Queues","body":"<p>I guess you want to implement a stack using two queues. So I will suggest you rename the <code>DubbleQueue</code> class as <code>MyStack</code> or something else. I'm a bit confused about what you did in the <code>pop</code> function. I don't know why you pass the <code>val</code> in the <code>public int remove(int i)</code> function (actually don't use it at all). The <code>pop</code> function returns and removes the value from the first position. The value comparison shouldn't exist.</p>\n<p><code>MyQueye</code> class is like:\npublic class MyQueue {</p>\n<pre><code>static class Node {\n    int val;\n    Node next;\n\n    public Node(int val) {\n        this.val = val;\n        this.next = null;\n    }\n}\n\nprivate Node head = null, tail = null;\nprivate int n = 0;\n\npublic boolean offer(int val) {\n    Node node = new Node(val);\n    if (null == head) {\n        head = node;\n    } else {\n        tail.next = node;\n    }\n    tail = node;\n    n ++;\n    return true;\n}\n\npublic int poll() {\n    if (n &lt;= 0) {\n        throw new RuntimeException();\n    }\n    int top = head.val;\n    n --;\n    head = head.next;\n    if (n == 0) {\n        tail = null;\n    }\n    return top;\n}\n\npublic int size() {\n    return n;\n}\n\npublic boolean isEmpty() {\n    return size() == 0;\n}}\n</code></pre>\n<p><code>MyStack</code> class is like:</p>\n<pre><code>public class MyStack {\n\nMyQueue in, out;\n\npublic MyStack() {\n    in = new MyQueue();\n    out = new MyQueue();\n}\n\npublic int push(int val) {\n    in.offer(val);\n    while (!out.isEmpty()) {\n        in.offer(out.poll());\n    }\n    swapInAndOut();\n    return val;\n}\n\npublic int pop() {\n    if (out.isEmpty()) {\n        throw new EmptyStackException();\n    }\n    return out.poll();\n}\n\nprivate void swapInAndOut() {\n    MyQueue temp = in;\n    in = out;\n    out = temp;\n}\n\npublic static void main(String[] args) {\n    MyStack myStack = new MyStack();\n    myStack.push(1);\n    myStack.push(2);\n    myStack.push(3);\n    System.out.println(myStack.pop());\n    System.out.println(myStack.pop());\n    myStack.push(4);\n    System.out.println(myStack.pop());\n    System.out.println(myStack.pop());\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":6356472,"reputation":11,"user_id":4933552,"display_name":"Dash Harber"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1682325639,"creation_date":1682192961,"question_id":76081642,"body_markdown":"So the assignment is to create a pop() and push(x) method using two queues. My code is as follows;\r\n\r\n    public class Queue {\r\n    \tNode first;\r\n    \tNode last;\r\n    \tint N;\r\n    \t\r\n    \tpublic Queue() {\r\n    \t\tfirst = null;\r\n    \t\tlast = null;\r\n    \t\tN = 0;\r\n    \t}\r\n    \t\r\n    \tclass Node{\r\n    \t\tint data;\r\n    \t\tNode next;\r\n    \t\t}\r\n    \t\r\n    \tpublic int add(int x) {\r\n    \t\tNode u = new Node();\r\n    \t\tu.data = x;\r\n    \t\tu.next = first;\r\n    \t\tfirst = u;\r\n    \t\tif (N==0) {\r\n    \t\t\tlast =u;\r\n    \t\t}\r\n    \t\tN++;\r\n    \t\treturn x;\r\n    \t}\r\n    \t\r\n    \tpublic boolean isEmpty() {\r\n    \t\tboolean isEmpty = false;\r\n    \t\tif(N==0) {\r\n    \t\t\tisEmpty = true;\r\n    \t\t}\r\n    \t\treturn isEmpty;\r\n    \t}\r\n    \t\r\n    \tpublic int remove(int i) {\r\n            if (N==0) {\r\n            \treturn (Integer) null;\r\n            }\r\n            int x = first.data;\r\n            if (--N == 0) {\r\n            \tlast = null;\r\n            }\r\n            N--;\r\n            return x;\r\n    \t}\r\n    \t\r\n    \tpublic void display() {\r\n    \t\tNode current = first;\r\n    \t\t\r\n    \t\tif(first == null) {\r\n    \t\t\tSystem.out.println(&quot;List is empty.&quot;);\r\n    \t\t}\r\n    \t\tSystem.out.print(&quot;Nodes: &quot;);\r\n    \t\twhile(current != null) {\r\n    \t\t\tSystem.out.print(current.data+&quot;, &quot;);\r\n    \t\t\tcurrent = current.next;\r\n    \t\t}\r\n    \t\tSystem.out.println();\r\n    \t}\r\n    \t\r\n    \tpublic int size() {\r\n    \t\treturn N;\r\n    \t}\r\n    }\r\n\r\nAnd my Double Queue;\r\n\r\n        public class DoubleQueue {\r\n    \t// Creates 2 queues for the push and pop methods.\r\n    \tstatic Queue q1 = new Queue();\r\n    \tstatic Queue q2 = new Queue();\r\n    \r\n    \t// Push method.\r\n    \tint push(int x) {\r\n    \t\tNode u = q1.new Node(); // Creates new node.\r\n    \t\tu.data = x; // Sets node to the value x.\r\n    \t\tu.next = q1.first; // Places the new node at the head of the stack.\r\n    \t\tq1.first = u; \r\n    \t\tif (q1.N==0) { // Checks if node is empty and adds it as tail if it is.\r\n    \t\t\tq1.last = u;\r\n    \t\t}\r\n    \t\tq1.N++; // Increments the element counter.\r\n    \t\treturn x; \r\n        \t}\r\n    \t\r\n    \t// Pop method.\r\n        static int pop() {\r\n        \t// Sets variables.\r\n        \tNode q1curr = q1.first;\r\n        \tNode q1prev = null;\r\n        \tNode q2curr = null;\r\n        \tNode q2prev = null;\r\n        \tint q1size = q1.size();\r\n        \tint q2size;\r\n        \t\r\n            if (q1.N == 0) { // Checks if the queue is empty.\r\n            \treturn (Integer) null;\r\n            }\r\n            int x = q1.first.data; // Sets x to the head value.\r\n            for(int i = 0; i &lt;= q1.size(); i++) { // Loop to check entire queue.\r\n            \tif (q1curr.data == x) { // If the data does not match x, it is added to the second queue.\r\n            \t\tq1.remove(q1curr.data);\r\n            \t\tq1curr = q1curr.next;\r\n            \t\tSystem.out.print(&quot;q&quot;);\r\n            \t}\r\n            \telse { // If the data matches x, the counter is moved and the data is deleted.\r\n            \t\tq2.add(q1curr.data);\r\n            \t\tq1.remove(q1curr.data);\r\n            \t\tq1curr = q1curr.next;\r\n            \t\tSystem.out.println(&quot;x&quot;);\r\n            \t}\r\n            }\r\n            \r\n            q2curr = q2.first;\r\n            q2size = q2.size();\r\n            q1.display();\r\n            q2.display();\r\n    \r\n            // Adds all the elements back into the first queue.\r\n            for (int i = 0; i &lt; q2.size(); i++) {\r\n            \tif (q2curr != null) {\r\n            \t\tq1.add(q2curr.data);\r\n            \t\tq2curr = q1curr.next;\r\n            \t}\r\n            }\r\n            \r\n    \t\treturn x; // Returns the value removed.\r\n        }\r\n    }\r\n\r\nAnd my Main;\r\n\r\n        public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tDoubleQueue dq = new DoubleQueue();\r\n    \t\tdq.q1.add(1);\r\n    \t\tdq.q1.add(2);\r\n    \t\tdq.q1.add(3);\r\n    \t\tdq.q1.add(4);\r\n    \t\tdq.q1.add(5);\r\n    \t\tdq.q1.display();\r\n    \t\tdq.push(7);\r\n    \t\tdq.q1.display();\r\n    \t\tdq.pop();\r\n    \t\tdq.q1.display();\r\n    \t}\r\n    \r\n    }\r\n\r\nThe issue I&#39;m having is that during the pop method, originally I swapped q1 and q2, but q2 was in the reverse order. So instead, I tried to create a loop to add all the elements back. However, the loop will only iterate 2 times and then quit. I don&#39;t understand why my q1 is not removing the data each pass, or why the q2 only adds two of the nodes before quitting. Any advice on where I&#39;ve gone wrong would be appreciated.","title":"Java; Pop and Push using two Queues","body":"<p>So the assignment is to create a pop() and push(x) method using two queues. My code is as follows;</p>\n<pre><code>public class Queue {\n    Node first;\n    Node last;\n    int N;\n    \n    public Queue() {\n        first = null;\n        last = null;\n        N = 0;\n    }\n    \n    class Node{\n        int data;\n        Node next;\n        }\n    \n    public int add(int x) {\n        Node u = new Node();\n        u.data = x;\n        u.next = first;\n        first = u;\n        if (N==0) {\n            last =u;\n        }\n        N++;\n        return x;\n    }\n    \n    public boolean isEmpty() {\n        boolean isEmpty = false;\n        if(N==0) {\n            isEmpty = true;\n        }\n        return isEmpty;\n    }\n    \n    public int remove(int i) {\n        if (N==0) {\n            return (Integer) null;\n        }\n        int x = first.data;\n        if (--N == 0) {\n            last = null;\n        }\n        N--;\n        return x;\n    }\n    \n    public void display() {\n        Node current = first;\n        \n        if(first == null) {\n            System.out.println(&quot;List is empty.&quot;);\n        }\n        System.out.print(&quot;Nodes: &quot;);\n        while(current != null) {\n            System.out.print(current.data+&quot;, &quot;);\n            current = current.next;\n        }\n        System.out.println();\n    }\n    \n    public int size() {\n        return N;\n    }\n}\n</code></pre>\n<p>And my Double Queue;</p>\n<pre><code>    public class DoubleQueue {\n    // Creates 2 queues for the push and pop methods.\n    static Queue q1 = new Queue();\n    static Queue q2 = new Queue();\n\n    // Push method.\n    int push(int x) {\n        Node u = q1.new Node(); // Creates new node.\n        u.data = x; // Sets node to the value x.\n        u.next = q1.first; // Places the new node at the head of the stack.\n        q1.first = u; \n        if (q1.N==0) { // Checks if node is empty and adds it as tail if it is.\n            q1.last = u;\n        }\n        q1.N++; // Increments the element counter.\n        return x; \n        }\n    \n    // Pop method.\n    static int pop() {\n        // Sets variables.\n        Node q1curr = q1.first;\n        Node q1prev = null;\n        Node q2curr = null;\n        Node q2prev = null;\n        int q1size = q1.size();\n        int q2size;\n        \n        if (q1.N == 0) { // Checks if the queue is empty.\n            return (Integer) null;\n        }\n        int x = q1.first.data; // Sets x to the head value.\n        for(int i = 0; i &lt;= q1.size(); i++) { // Loop to check entire queue.\n            if (q1curr.data == x) { // If the data does not match x, it is added to the second queue.\n                q1.remove(q1curr.data);\n                q1curr = q1curr.next;\n                System.out.print(&quot;q&quot;);\n            }\n            else { // If the data matches x, the counter is moved and the data is deleted.\n                q2.add(q1curr.data);\n                q1.remove(q1curr.data);\n                q1curr = q1curr.next;\n                System.out.println(&quot;x&quot;);\n            }\n        }\n        \n        q2curr = q2.first;\n        q2size = q2.size();\n        q1.display();\n        q2.display();\n\n        // Adds all the elements back into the first queue.\n        for (int i = 0; i &lt; q2.size(); i++) {\n            if (q2curr != null) {\n                q1.add(q2curr.data);\n                q2curr = q1curr.next;\n            }\n        }\n        \n        return x; // Returns the value removed.\n    }\n}\n</code></pre>\n<p>And my Main;</p>\n<pre><code>    public class Main {\n\n    public static void main(String[] args) {\n        DoubleQueue dq = new DoubleQueue();\n        dq.q1.add(1);\n        dq.q1.add(2);\n        dq.q1.add(3);\n        dq.q1.add(4);\n        dq.q1.add(5);\n        dq.q1.display();\n        dq.push(7);\n        dq.q1.display();\n        dq.pop();\n        dq.q1.display();\n    }\n\n}\n</code></pre>\n<p>The issue I'm having is that during the pop method, originally I swapped q1 and q2, but q2 was in the reverse order. So instead, I tried to create a loop to add all the elements back. However, the loop will only iterate 2 times and then quit. I don't understand why my q1 is not removing the data each pass, or why the q2 only adds two of the nodes before quitting. Any advice on where I've gone wrong would be appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1154901,"reputation":669,"user_id":1135775,"display_name":"Mansour"},"score":1,"creation_date":1668921821,"post_id":66360091,"comment_id":131521638,"body_markdown":"@aran\nI don&#39;t see how the link you gave has anything to log with LSP4J. This is another implementation, but doesn&#39;t use LSP4j.","body":"@aran I don&#39;t see how the link you gave has anything to log with LSP4J. This is another implementation, but doesn&#39;t use LSP4j."}],"answers":[{"tags":[],"owner":{"account_id":43022,"reputation":22842,"user_id":125562,"accept_rate":64,"display_name":"Basilevs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682325509,"creation_date":1682325509,"answer_id":76090072,"question_id":66360091,"body_markdown":"LSP4J covers both client and server sides of the protocol.\r\nIt uses JSON-RPC to connect from client to server and vice-versa. Requests to server interface on client side are passed with JSON-RPC to the server implementation on server side. Notifications to client interface on server side are passed to the client implementation on client side.\r\n\r\nIn usual application, only client side of thing would be implemented, instantiating server interface via JSON-RPC (using using `org.eclipse.lsp4j.jsonrpc.Launcher.Builder`)\r\n\r\nWhen implementing server interface, you can proxy requests to this remote server via Decorator pattern.","title":"How do you reuse an existing language server (LSP) in Java using LSP4J","body":"<p>LSP4J covers both client and server sides of the protocol.\nIt uses JSON-RPC to connect from client to server and vice-versa. Requests to server interface on client side are passed with JSON-RPC to the server implementation on server side. Notifications to client interface on server side are passed to the client implementation on client side.</p>\n<p>In usual application, only client side of thing would be implemented, instantiating server interface via JSON-RPC (using using <code>org.eclipse.lsp4j.jsonrpc.Launcher.Builder</code>)</p>\n<p>When implementing server interface, you can proxy requests to this remote server via Decorator pattern.</p>\n"}],"owner":{"account_id":1970837,"reputation":1438,"user_id":1769835,"accept_rate":69,"display_name":"J&#246;rn Guy S&#252;&#223;"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76090072,"answer_count":1,"score":4,"last_activity_date":1682325509,"creation_date":1614207946,"question_id":66360091,"body_markdown":"We would like to create a headless client in Java that responds to changes in different pre-existing language servers. We are aware of the [instructions to start a language server](https://github.com/eclipse/eclipse.jdt.ls#user-content-running-from-the-command-line), and of the need to [Implement the Language Server](https://github.com/eclipse/lsp4j/blob/master/documentation/README.md#user-content-implement-your-language-server), but we have not found guidance on how this should be done for an existing server.\r\n\r\nWe believe that the `org.eclipse.lsp4j.services.LanguageServer` class is responsible for marshalling data for the server, but it is not obvious *how an existing server is exposed*.\r\n\r\nThere is [a list of implementations at the langserver.org](https://langserver.org/#implementations-server) website. Assuming I have been able to start one of these servers and have access to its stdin and stdout for client communication, **how** do I need to implement in lsp4j to attach it?","title":"How do you reuse an existing language server (LSP) in Java using LSP4J","body":"<p>We would like to create a headless client in Java that responds to changes in different pre-existing language servers. We are aware of the <a href=\"https://github.com/eclipse/eclipse.jdt.ls#user-content-running-from-the-command-line\" rel=\"nofollow noreferrer\">instructions to start a language server</a>, and of the need to <a href=\"https://github.com/eclipse/lsp4j/blob/master/documentation/README.md#user-content-implement-your-language-server\" rel=\"nofollow noreferrer\">Implement the Language Server</a>, but we have not found guidance on how this should be done for an existing server.</p>\n<p>We believe that the <code>org.eclipse.lsp4j.services.LanguageServer</code> class is responsible for marshalling data for the server, but it is not obvious <em>how an existing server is exposed</em>.</p>\n<p>There is <a href=\"https://langserver.org/#implementations-server\" rel=\"nofollow noreferrer\">a list of implementations at the langserver.org</a> website. Assuming I have been able to start one of these servers and have access to its stdin and stdout for client communication, <strong>how</strong> do I need to implement in lsp4j to attach it?</p>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":160931,"reputation":69901,"user_id":381345,"accept_rate":57,"display_name":"casablanca"},"score":4,"creation_date":1333328326,"post_id":9969690,"comment_id":12736588,"body_markdown":"@Bohemian: It may not be a duplicate, since the OP only mentioned `public static final` fields, which may be typed values and not necessarily `int`s.","body":"@Bohemian: It may not be a duplicate, since the OP only mentioned <code>public static final</code> fields, which may be typed values and not necessarily <code>int</code>s."},{"owner":{"account_id":200821,"reputation":4765,"user_id":446885,"accept_rate":93,"display_name":"Shahzeb"},"score":0,"creation_date":1333329598,"post_id":9969690,"comment_id":12736773,"body_markdown":"You should not be using `Enums` just to replace `String Constants`. Thats like taking an armored vehicle to withdraw $10 from atm. Enums as many have exaplained are full blown final singleton classes that can have behaviour and data both.","body":"You should not be using <code>Enums</code> just to replace <code>String Constants</code>. Thats like taking an armored vehicle to withdraw $10 from atm. Enums as many have exaplained are full blown final singleton classes that can have behaviour and data both."},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":1,"creation_date":1333329664,"post_id":9969690,"comment_id":12736783,"body_markdown":"@Shahzeb Hardly. Clearly using enums instead of string constants is an EXTREMELY good idea and more than encouraged. Type-safety, doesn&#39;t need static utility functions, and so on.. absolutely no reason to use strings instead.","body":"@Shahzeb Hardly. Clearly using enums instead of string constants is an EXTREMELY good idea and more than encouraged. Type-safety, doesn&#39;t need static utility functions, and so on.. absolutely no reason to use strings instead."},{"owner":{"account_id":200821,"reputation":4765,"user_id":446885,"accept_rate":93,"display_name":"Shahzeb"},"score":2,"creation_date":1333329946,"post_id":9969690,"comment_id":12736829,"body_markdown":"@Voo Yes I knew there will be disagreements .And here is one in 49 seconds. Enums are great (and I love them and use them very often) but What type safety do you need when declaring a constant or using it. It is an overkill to create enum every time you need to declare a constant for String literal .","body":"@Voo Yes I knew there will be disagreements .And here is one in 49 seconds. Enums are great (and I love them and use them very often) but What type safety do you need when declaring a constant or using it. It is an overkill to create enum every time you need to declare a constant for String literal ."},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":4,"creation_date":1333332396,"post_id":9969690,"comment_id":12737189,"body_markdown":"@Shahzeb If you have a single variable, sure use a string, not much can happen here (a single value is rather pointless as a parameter). But note that we&#39;re talking about constant`S`, so now we&#39;re talking about probably passing them into functions, etc. Do we *need* type-saftey? Well, no, but then most people consider c-style types of &quot;everything&#39;s a `void*`&quot; good style and it can stop bugs (especially if passing more than one enum/string parameter!). Also it puts the constants into their own namespace, etc. Contrary to that, there&#39;s no real advantage to just have plain variables.","body":"@Shahzeb If you have a single variable, sure use a string, not much can happen here (a single value is rather pointless as a parameter). But note that we&#39;re talking about constant<code>S</code>, so now we&#39;re talking about probably passing them into functions, etc. Do we <i>need</i> type-saftey? Well, no, but then most people consider c-style types of &quot;everything&#39;s a <code>void*</code>&quot; good style and it can stop bugs (especially if passing more than one enum/string parameter!). Also it puts the constants into their own namespace, etc. Contrary to that, there&#39;s no real advantage to just have plain variables."},{"owner":{"account_id":200821,"reputation":4765,"user_id":446885,"accept_rate":93,"display_name":"Shahzeb"},"score":0,"creation_date":1333337290,"post_id":9969690,"comment_id":12737924,"body_markdown":"@Voo yeap agree. please do not delete your comment. I think we have added some meta value here :)","body":"@Voo yeap agree. please do not delete your comment. I think we have added some meta value here :)"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1333370626,"post_id":9969690,"comment_id":12746561,"body_markdown":"@casablanca public static final ints or objects, the reasoning vs enums is identical","body":"@casablanca public static final ints or objects, the reasoning vs enums is identical"},{"owner":{"account_id":160931,"reputation":69901,"user_id":381345,"accept_rate":57,"display_name":"casablanca"},"score":3,"creation_date":1333382802,"post_id":9969690,"comment_id":12751612,"body_markdown":"@Bohemian: I don&#39;t see how. With `int`s, there is no type safety because one could pass any value. Typed objects, on the other hand, are no different from enums in terms of type safety.","body":"@Bohemian: I don&#39;t see how. With <code>int</code>s, there is no type safety because one could pass any value. Typed objects, on the other hand, are no different from enums in terms of type safety."},{"owner":{"account_id":23831,"reputation":4410,"user_id":60067,"accept_rate":68,"display_name":"Craig W"},"score":1,"creation_date":1333405858,"post_id":9969690,"comment_id":12759436,"body_markdown":"@Bohemian: Couldn&#39;t you just make the Planet constructor private? That would fix your issue.","body":"@Bohemian: Couldn&#39;t you just make the Planet constructor private? That would fix your issue."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1333409951,"post_id":9969690,"comment_id":12760342,"body_markdown":"@Craig Good idea - it does help, but you can &quot;hack&quot; a private constructor via reflection so it&#39;s not a safe as you might think. Also, once you have a private constructor with static final constants, why not use an enum which enforces that pattern from the language? Also, IDEs can prompt the user to select from enum values a bit more readily than from class constants, although I grant you that both share that `Class.NAME` syntax.","body":"@Craig Good idea - it does help, but you can &quot;hack&quot; a private constructor via reflection so it&#39;s not a safe as you might think. Also, once you have a private constructor with static final constants, why not use an enum which enforces that pattern from the language? Also, IDEs can prompt the user to select from enum values a bit more readily than from class constants, although I grant you that both share that <code>Class.NAME</code> syntax."},{"owner":{"account_id":23831,"reputation":4410,"user_id":60067,"accept_rate":68,"display_name":"Craig W"},"score":0,"creation_date":1333415626,"post_id":9969690,"comment_id":12761273,"body_markdown":"@Bohemian: True but if that&#39;s the case nothing is really private and there are bigger problems. Your point about the language enforcing the pattern is well taken though. My question was intended to figure out what the other benefits of enums are that I might have missed. Apparently there are not that many. And it&#39;s disappointing that converting from an integer to an enum value and especially vice versa is not trivial like it is in C#.","body":"@Bohemian: True but if that&#39;s the case nothing is really private and there are bigger problems. Your point about the language enforcing the pattern is well taken though. My question was intended to figure out what the other benefits of enums are that I might have missed. Apparently there are not that many. And it&#39;s disappointing that converting from an integer to an enum value and especially vice versa is not trivial like it is in C#."},{"owner":{"account_id":160931,"reputation":69901,"user_id":381345,"accept_rate":57,"display_name":"casablanca"},"score":1,"creation_date":1333420509,"post_id":9969690,"comment_id":12762014,"body_markdown":"@Bohemian: Anything can be &quot;hacked&quot; -- even an enum can be changed by instrumentation right before it is loaded. I think the question is whether enums are really &quot;special&quot; in some way and they really are not, they&#39;re just convenient to use.","body":"@Bohemian: Anything can be &quot;hacked&quot; -- even an enum can be changed by instrumentation right before it is loaded. I think the question is whether enums are really &quot;special&quot; in some way and they really are not, they&#39;re just convenient to use."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1477404239,"post_id":9969690,"comment_id":67746229,"body_markdown":"Re: Enums vs String constants. The issue isn&#39;t direct replacement but what their *purpose* in the code is. If they&#39;re being passed to a function that expects a value from a closed set of values then enums make more sense. If they&#39;re just something, say, that shows up on the screen, it makes less sense (although I&#39;d argue then they should be properties, e.g., I18N, instead of plain old variables).","body":"Re: Enums vs String constants. The issue isn&#39;t direct replacement but what their <i>purpose</i> in the code is. If they&#39;re being passed to a function that expects a value from a closed set of values then enums make more sense. If they&#39;re just something, say, that shows up on the screen, it makes less sense (although I&#39;d argue then they should be properties, e.g., I18N, instead of plain old variables)."}],"answers":[{"comments":[{"owner":{"account_id":32370,"reputation":6343,"user_id":89769,"display_name":"h3xStream"},"score":3,"creation_date":1333327812,"post_id":9969723,"comment_id":12736500,"body_markdown":"classes are also type safe ... :/ (assuming static field are of the type of the container class)","body":"classes are also type safe ... :/ (assuming static field are of the type of the container class)"},{"owner":{"account_id":366284,"reputation":5731,"user_id":711718,"accept_rate":87,"display_name":"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"},"score":0,"creation_date":1333328253,"post_id":9969723,"comment_id":12736575,"body_markdown":"You could still pass it an invalid value but it would be a compile time error which is much easier to spot.","body":"You could still pass it an invalid value but it would be a compile time error which is much easier to spot."},{"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"score":2,"creation_date":1333328761,"post_id":9969723,"comment_id":12736662,"body_markdown":"You could call `setSize(null)` in your second example, but it is likely to fail much sooner than the first example&#39;s error.","body":"You could call <code>setSize(null)</code> in your second example, but it is likely to fail much sooner than the first example&#39;s error."}],"tags":[],"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"comment_count":3,"down_vote_count":1,"up_vote_count":58,"is_accepted":false,"score":57,"last_activity_date":1333327758,"creation_date":1333327758,"answer_id":9969723,"question_id":9969690,"body_markdown":"The primary advantage is type safety. With a set of constants, any value of the same intrinsic type could be used, introducing errors.  With an enum only the applicable values can be used.\r\n\r\nFor example\r\n\r\n    public static final int SIZE_SMALL  = 1;\r\n    public static final int SIZE_MEDIUM = 2;\r\n    public static final int SIZE_LARGE  = 3;\r\n\r\n    public void setSize(int newSize) { ... }\r\n\r\n    obj.setSize(15); // Compiles but likely to fail later\r\n\r\nvs\r\n\r\n\r\n    public enum Size { SMALL, MEDIUM, LARGE };\r\n\r\n    public void setSize(Size s) { ... }\r\n\r\n    obj.setSize( ? ); // Can&#39;t even express the above example with an enum","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>The primary advantage is type safety. With a set of constants, any value of the same intrinsic type could be used, introducing errors.  With an enum only the applicable values can be used.</p>\n\n<p>For example</p>\n\n<pre><code>public static final int SIZE_SMALL  = 1;\npublic static final int SIZE_MEDIUM = 2;\npublic static final int SIZE_LARGE  = 3;\n\npublic void setSize(int newSize) { ... }\n\nobj.setSize(15); // Compiles but likely to fail later\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>public enum Size { SMALL, MEDIUM, LARGE };\n\npublic void setSize(Size s) { ... }\n\nobj.setSize( ? ); // Can't even express the above example with an enum\n</code></pre>\n"},{"tags":[],"owner":{"account_id":366284,"reputation":5731,"user_id":711718,"accept_rate":87,"display_name":"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1333327770,"creation_date":1333327770,"answer_id":9969725,"question_id":9969690,"body_markdown":"You get compile time checking of valid values when you use an enum.  Look at &lt;a href=&quot;https://stackoverflow.com/questions/2077634/enum-in-java-advantages&quot;&gt;this question.&lt;/a&gt;\r\n","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>You get compile time checking of valid values when you use an enum.  Look at <a href=\"https://stackoverflow.com/questions/2077634/enum-in-java-advantages\">this question.</a></p>\n"},{"comments":[{"owner":{"account_id":959793,"reputation":1261,"user_id":984407,"accept_rate":92,"display_name":"aaaaaa"},"score":1,"creation_date":1436975769,"post_id":9969726,"comment_id":50840654,"body_markdown":"Your &#39;Font&#39; case is still ambiguous if two of the same enums were asked for.  The canonical answer to that problem is what many languages call [Named Parameters](https://en.wikipedia.org/wiki/Named_parameter).  That or better IDE method signature support.","body":"Your &#39;Font&#39; case is still ambiguous if two of the same enums were asked for.  The canonical answer to that problem is what many languages call <a href=\"https://en.wikipedia.org/wiki/Named_parameter\" rel=\"nofollow noreferrer\">Named Parameters</a>.  That or better IDE method signature support."},{"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"score":1,"creation_date":1436976487,"post_id":9969726,"comment_id":50841140,"body_markdown":"@aaaaaa I haven&#39;t seen many cases where a constructor would take two of the same `enum` without using [varargs](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.io.InputStream-java.nio.file.Path-java.nio.file.CopyOption...-) or a `Set` to take an arbitrary number of them.","body":"@aaaaaa I haven&#39;t seen many cases where a constructor would take two of the same <code>enum</code> without using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.io.InputStream-java.nio.file.Path-java.nio.file.CopyOption...-\" rel=\"nofollow noreferrer\">varargs</a> or a <code>Set</code> to take an arbitrary number of them."},{"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"score":0,"creation_date":1436976579,"post_id":9969726,"comment_id":50841194,"body_markdown":"@aaaaaa The main issue with named parameters it relies on implementation details (the name of the parameter). I can make an interface `interface Foo { public void bar(String baz); }`. Someone makes a class which invokes `bar`: `someFoo.bar(baz = &quot;hello&quot;);`. I change the signature of `Foo::bar` to `public void bar(String foobar)`. Now the person who called `someFoo` will need to modify their code if they still want it to work.","body":"@aaaaaa The main issue with named parameters it relies on implementation details (the name of the parameter). I can make an interface <code>interface Foo { public void bar(String baz); }</code>. Someone makes a class which invokes <code>bar</code>: <code>someFoo.bar(baz = &quot;hello&quot;);</code>. I change the signature of <code>Foo::bar</code> to <code>public void bar(String foobar)</code>. Now the person who called <code>someFoo</code> will need to modify their code if they still want it to work."},{"owner":{"account_id":959793,"reputation":1261,"user_id":984407,"accept_rate":92,"display_name":"aaaaaa"},"score":0,"creation_date":1437067108,"post_id":9969726,"comment_id":50887904,"body_markdown":"I don&#39;t remember seeing consecutive enum types either, but thought a common one might be DAY_OF_WEEK or something similar.  And good point about the interface - hadn&#39;t thought of that.  Personally I would take that problem over the widespread ambiguity caused by un-named parameters, necessitating stronger IDE support.  I understand that&#39;s a judgement call however, and that breaking API changes are something to seriously consider.","body":"I don&#39;t remember seeing consecutive enum types either, but thought a common one might be DAY_OF_WEEK or something similar.  And good point about the interface - hadn&#39;t thought of that.  Personally I would take that problem over the widespread ambiguity caused by un-named parameters, necessitating stronger IDE support.  I understand that&#39;s a judgement call however, and that breaking API changes are something to seriously consider."}],"tags":[],"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"comment_count":4,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1435333493,"creation_date":1333327776,"answer_id":9969726,"question_id":9969690,"body_markdown":"There is less confusion. Take [`Font`][1] for instance. It has a constructor that takes the name of the `Font` you want, its size and its style (`new Font(String, int, int)`). To this day I cannot remember if style or size goes first. If `Font` had used an `enum` for all of its different styles (`PLAIN`, `BOLD`, `ITALIC`, `BOLD_ITALIC`), its constructor would look like `Font(String, Style, int)`, preventing any confusion. Unfortunately, `enum`s weren&#39;t around when the `Font` class was created, and since Java has to maintain reverse compatibility, we will always be plagued by this ambiguity.\r\n\r\nOf course, this is just an argument for using an `enum` instead of `public static final` constants. Enums are also perfect for [singletons][2] and implementing default behavior while allowing for later customization (I.E. the [strategy pattern][3]). An example of the latter is `java.nio.file`&#39;s [`OpenOption`][4] and [`StandardOpenOption`][5]: if a developer wanted to create his own non-standard `OpenOption`, he could.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html\r\n  [2]: http://en.wikipedia.org/wiki/Singleton_pattern#The_enum_way\r\n  [3]: https://en.wikipedia.org/wiki/Strategy_pattern\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/OpenOption.html\r\n  [5]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/StandardOpenOption.html","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>There is less confusion. Take <a href=\"http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html\" rel=\"noreferrer\"><code>Font</code></a> for instance. It has a constructor that takes the name of the <code>Font</code> you want, its size and its style (<code>new Font(String, int, int)</code>). To this day I cannot remember if style or size goes first. If <code>Font</code> had used an <code>enum</code> for all of its different styles (<code>PLAIN</code>, <code>BOLD</code>, <code>ITALIC</code>, <code>BOLD_ITALIC</code>), its constructor would look like <code>Font(String, Style, int)</code>, preventing any confusion. Unfortunately, <code>enum</code>s weren't around when the <code>Font</code> class was created, and since Java has to maintain reverse compatibility, we will always be plagued by this ambiguity.</p>\n\n<p>Of course, this is just an argument for using an <code>enum</code> instead of <code>public static final</code> constants. Enums are also perfect for <a href=\"http://en.wikipedia.org/wiki/Singleton_pattern#The_enum_way\" rel=\"noreferrer\">singletons</a> and implementing default behavior while allowing for later customization (I.E. the <a href=\"https://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"noreferrer\">strategy pattern</a>). An example of the latter is <code>java.nio.file</code>'s <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/OpenOption.html\" rel=\"noreferrer\"><code>OpenOption</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/StandardOpenOption.html\" rel=\"noreferrer\"><code>StandardOpenOption</code></a>: if a developer wanted to create his own non-standard <code>OpenOption</code>, he could.</p>\n"},{"comments":[{"owner":{"account_id":32370,"reputation":6343,"user_id":89769,"display_name":"h3xStream"},"score":20,"creation_date":1333328269,"post_id":9969738,"comment_id":12736576,"body_markdown":"There is also `.values()` to iterate over the list of values.","body":"There is also <code>.values()</code> to iterate over the list of values."},{"owner":{"account_id":23831,"reputation":4410,"user_id":60067,"accept_rate":68,"display_name":"Craig W"},"score":1,"creation_date":1333387016,"post_id":9969738,"comment_id":12753064,"body_markdown":"This seems to be the right answer, although it&#39;s not very satisfying. In my opinion it was barely worthwhile for Java to add support for enums just for the more compact syntax and access to the Enum methods.","body":"This seems to be the right answer, although it&#39;s not very satisfying. In my opinion it was barely worthwhile for Java to add support for enums just for the more compact syntax and access to the Enum methods."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":7,"creation_date":1333387842,"post_id":9969738,"comment_id":12753355,"body_markdown":"@Craig your instincts are right - this is a very bad answer, because it missed entirely the purpose of enums. See my comments under the question for part of the reasons why.","body":"@Craig your instincts are right - this is a very bad answer, because it missed entirely the purpose of enums. See my comments under the question for part of the reasons why."},{"owner":{"account_id":160931,"reputation":69901,"user_id":381345,"accept_rate":57,"display_name":"casablanca"},"score":0,"creation_date":1333420655,"post_id":9969738,"comment_id":12762032,"body_markdown":"@Craig: Sometimes compact syntax (aka syntactic sugar) is really what&#39;s required. For example, properties in C# are also just syntactic sugar for hidden get/set methods.","body":"@Craig: Sometimes compact syntax (aka syntactic sugar) is really what&#39;s required. For example, properties in C# are also just syntactic sugar for hidden get/set methods."},{"owner":{"account_id":160931,"reputation":69901,"user_id":381345,"accept_rate":57,"display_name":"casablanca"},"score":1,"creation_date":1333420851,"post_id":9969738,"comment_id":12762069,"body_markdown":"@Bohemian: I didn&#39;t &quot;miss the purpose&quot; of enums -- I use them all the time. See my response to your comment above.","body":"@Bohemian: I didn&#39;t &quot;miss the purpose&quot; of enums -- I use them all the time. See my response to your comment above."},{"owner":{"account_id":3445610,"reputation":3306,"user_id":2886507,"accept_rate":88,"display_name":"Emre Akt&#252;rk"},"score":1,"creation_date":1448270707,"post_id":9969738,"comment_id":55498551,"body_markdown":"Enum.valuesOf method does return same object if called twice?","body":"Enum.valuesOf method does return same object if called twice?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1521628676,"post_id":9969738,"comment_id":85809041,"body_markdown":"@EmreAkt&#252;rk Yes, that is built into the specification.","body":"@EmreAkt&#252;rk Yes, that is built into the specification."},{"owner":{"account_id":4910579,"reputation":846,"user_id":3955989,"accept_rate":50,"display_name":"Ajay Sharma"},"score":0,"creation_date":1604289620,"post_id":9969738,"comment_id":114292653,"body_markdown":"Very bare bone answer, doesn&#39;t qualify to be accepted for this question.","body":"Very bare bone answer, doesn&#39;t qualify to be accepted for this question."}],"tags":[],"owner":{"account_id":160931,"reputation":69901,"user_id":381345,"accept_rate":57,"display_name":"casablanca"},"comment_count":8,"down_vote_count":6,"up_vote_count":104,"is_accepted":true,"score":98,"last_activity_date":1333327881,"creation_date":1333327881,"answer_id":9969738,"question_id":9969690,"body_markdown":"Technically one could indeed view enums as a class with a bunch of typed constants, and this is in fact how enum constants are implemented internally. Using an `enum` however gives you useful methods ([Enum javadoc][1]) that you would otherwise have to implement yourself, such as `Enum.valueOf`.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>Technically one could indeed view enums as a class with a bunch of typed constants, and this is in fact how enum constants are implemented internally. Using an <code>enum</code> however gives you useful methods (<a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html\" rel=\"noreferrer\">Enum javadoc</a>) that you would otherwise have to implement yourself, such as <code>Enum.valueOf</code>.</p>\n"},{"tags":[],"owner":{"display_name":"user405725"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1333328702,"creation_date":1333328702,"answer_id":9969806,"question_id":9969690,"body_markdown":"The first benefit of enums, as you have already noticed, is syntax simplicity. But the main point of enums is to provide a well-known set of constants which, by default, form a range and help to perform more comprehensive code analysis through type &amp; value safety checks.\r\n\r\nThose attributes of enums help both a programmer and a compiler. For example, let&#39;s say you see a function that accepts an integer. What that integer could mean? What kind of values can you pass in? You don&#39;t really know right away. But if you see a function that accepts enum, you know very well all possible values you can pass in.\r\n\r\nFor the compiler, enums help to determine a range of values and unless you assign special values to enum members, they are well ranges from 0 and up. This helps to automatically track down errors in the code through type safety checks and more. For example, compiler may warn you that you don&#39;t handle all possible enum values in your switch statement (i.e. when you don&#39;t have `default` case and handle only one out of N enum values). It also warns you when you convert an arbitrary integer into enum because enum&#39;s range of values is less than integer&#39;s and that in turn may trigger errors in the function that doesn&#39;t really accept an integer. Also, generating a jump table for the switch becomes easier when values are from 0 and up.\r\n\r\nThis is not only true for Java, but for other languages with a strict type-checking as well. C, C++, D, C# are good examples.\r\n","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>The first benefit of enums, as you have already noticed, is syntax simplicity. But the main point of enums is to provide a well-known set of constants which, by default, form a range and help to perform more comprehensive code analysis through type &amp; value safety checks.</p>\n\n<p>Those attributes of enums help both a programmer and a compiler. For example, let's say you see a function that accepts an integer. What that integer could mean? What kind of values can you pass in? You don't really know right away. But if you see a function that accepts enum, you know very well all possible values you can pass in.</p>\n\n<p>For the compiler, enums help to determine a range of values and unless you assign special values to enum members, they are well ranges from 0 and up. This helps to automatically track down errors in the code through type safety checks and more. For example, compiler may warn you that you don't handle all possible enum values in your switch statement (i.e. when you don't have <code>default</code> case and handle only one out of N enum values). It also warns you when you convert an arbitrary integer into enum because enum's range of values is less than integer's and that in turn may trigger errors in the function that doesn't really accept an integer. Also, generating a jump table for the switch becomes easier when values are from 0 and up.</p>\n\n<p>This is not only true for Java, but for other languages with a strict type-checking as well. C, C++, D, C# are good examples.</p>\n"},{"tags":[],"owner":{"account_id":363106,"reputation":2483,"user_id":706650,"accept_rate":56,"display_name":"mabn"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1631209361,"creation_date":1333331920,"answer_id":9970087,"question_id":9969690,"body_markdown":"enum Benefits:\r\n\r\n 1. Enums are type-safe, static fields are not\r\n 1. There is a finite number of values (it is not possible to pass non-existing enum value. If you have static class fields, you can make that mistake)\r\n 1. Each enum can have multiple properties (fields/getters) assigned - encapsulation. Also some simple methods: YEAR.toSeconds() or similar. Compare: Colors.RED.getHex() with Colors.toHex(Colors.RED)\r\n\r\n\r\n*&quot;such as the ability to easily assign an enum element a certain value&quot;*\r\n\r\n    enum EnumX{\r\n      VAL_1(1),\r\n      VAL_200(200);\r\n      public final int certainValue;\r\n      private X(int certainValue){this.certainValue = certainValue;}\r\n    }\r\n\r\n*&quot;and consequently the ability to convert an integer to an enum without a decent amount of effort&quot;*\r\nAdd a method converting int to enum which does that. Just add static HashMap&lt;Integer, EnumX&gt; containing the mapping.\r\n\r\nIf you really want to convert ord=VAL_200.ordinal() back to val_200 just use: EnumX.values()[ord]","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>enum Benefits:</p>\n<ol>\n<li>Enums are type-safe, static fields are not</li>\n<li>There is a finite number of values (it is not possible to pass non-existing enum value. If you have static class fields, you can make that mistake)</li>\n<li>Each enum can have multiple properties (fields/getters) assigned - encapsulation. Also some simple methods: YEAR.toSeconds() or similar. Compare: Colors.RED.getHex() with Colors.toHex(Colors.RED)</li>\n</ol>\n<p><em>&quot;such as the ability to easily assign an enum element a certain value&quot;</em></p>\n<pre><code>enum EnumX{\n  VAL_1(1),\n  VAL_200(200);\n  public final int certainValue;\n  private X(int certainValue){this.certainValue = certainValue;}\n}\n</code></pre>\n<p><em>&quot;and consequently the ability to convert an integer to an enum without a decent amount of effort&quot;</em>\nAdd a method converting int to enum which does that. Just add static HashMap&lt;Integer, EnumX&gt; containing the mapping.</p>\n<p>If you really want to convert ord=VAL_200.ordinal() back to val_200 just use: EnumX.values()[ord]</p>\n"},{"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1618035754,"post_id":9972312,"comment_id":118485298,"body_markdown":"To add on to this answer, you can also have a &quot;default&quot; implementation of any method defined in the interface. That way, not every enum needs to have the curly braces and a method implementation. You can simply provide an inline implementation for the enum values that need it.","body":"To add on to this answer, you can also have a &quot;default&quot; implementation of any method defined in the interface. That way, not every enum needs to have the curly braces and a method implementation. You can simply provide an inline implementation for the enum values that need it."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1333351283,"creation_date":1333351283,"answer_id":9972312,"question_id":9969690,"body_markdown":"An enum is implictly final, with a private constructors, all its values are of the same type or a sub-type, you can obtain all its values using `values()`, gets its `name()` or `ordinal()` value or you can look up an enum by number or name.\r\n\r\nYou can also define subclasses (even though notionally final, something you can&#39;t do any other way)\r\n\r\n    enum Runner implements Runnable {\r\n        HI {\r\n           public void run() {\r\n               System.out.println(&quot;Hello&quot;);\r\n           }\r\n        }, BYE {\r\n           public void run() {\r\n               System.out.println(&quot;Sayonara&quot;);\r\n           }\r\n           public String toString() {\r\n               return &quot;good-bye&quot;;\r\n           }\r\n        }\r\n     }\r\n\r\n     class MYRunner extends Runner // won&#39;t compile.\r\n","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>An enum is implictly final, with a private constructors, all its values are of the same type or a sub-type, you can obtain all its values using <code>values()</code>, gets its <code>name()</code> or <code>ordinal()</code> value or you can look up an enum by number or name.</p>\n\n<p>You can also define subclasses (even though notionally final, something you can't do any other way)</p>\n\n<pre><code>enum Runner implements Runnable {\n    HI {\n       public void run() {\n           System.out.println(\"Hello\");\n       }\n    }, BYE {\n       public void run() {\n           System.out.println(\"Sayonara\");\n       }\n       public String toString() {\n           return \"good-bye\";\n       }\n    }\n }\n\n class MYRunner extends Runner // won't compile.\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1523386,"reputation":1816,"user_id":1422434,"accept_rate":59,"display_name":"Genaut"},"score":0,"creation_date":1499555326,"post_id":14047853,"comment_id":76958015,"body_markdown":"Anyway, You didn&#39;t mentioned any benefits from enums vs static fields, You can use enough types in switch statements with static fields. Op Need real functionals or  perfomance differences","body":"Anyway, You didn&#39;t mentioned any benefits from enums vs static fields, You can use enough types in switch statements with static fields. Op Need real functionals or  perfomance differences"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1499620177,"post_id":14047853,"comment_id":76971790,"body_markdown":"@Genaut The benefit is that enums have more functionality than a string or int-the question was about differences, which I provided. The OP is already aware of what enums are, and nobody else had mentioned switch statements when I posted this 4.5 yrs ago, and at least a few people found it provided new info &#175;\\_(ã)_/&#175;","body":"@Genaut The benefit is that enums have more functionality than a string or int-the question was about differences, which I provided. The OP is already aware of what enums are, and nobody else had mentioned switch statements when I posted this 4.5 yrs ago, and at least a few people found it provided new info &#175;_(ã)_/&#175;"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1629889569,"post_id":14047853,"comment_id":121804944,"body_markdown":"@Genaut how do you switch over `Planet` instances when `Planet` is not an `enum`?","body":"@Genaut how do you switch over <code>Planet</code> instances when <code>Planet</code> is not an <code>enum</code>?"}],"tags":[],"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"comment_count":3,"down_vote_count":1,"up_vote_count":79,"is_accepted":false,"score":78,"last_activity_date":1412073961,"creation_date":1356567050,"answer_id":14047853,"question_id":9969690,"body_markdown":"Nobody mentioned the ability to use them in `switch` statements; I&#39;ll throw that in as well.\r\n\r\nThis allows arbitrarily complex enums to be used in a clean way without using `instanceof`, potentially confusing `if` sequences, or non-string/int switching values. The canonical example is a state machine.","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>Nobody mentioned the ability to use them in <code>switch</code> statements; I'll throw that in as well.</p>\n\n<p>This allows arbitrarily complex enums to be used in a clean way without using <code>instanceof</code>, potentially confusing <code>if</code> sequences, or non-string/int switching values. The canonical example is a state machine.</p>\n"},{"comments":[{"owner":{"account_id":112612,"reputation":89615,"user_id":296974,"accept_rate":100,"display_name":"glglgl"},"score":0,"creation_date":1497265630,"post_id":20806628,"comment_id":75988811,"body_markdown":"Internally, they are not final, because â as you say â can internally be subclassed. But alas, you cannot subclass them on your own, e. g. for extending it with own values.","body":"Internally, they are not final, because â as you say â can internally be subclassed. But alas, you cannot subclass them on your own, e. g. for extending it with own values."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1629890369,"post_id":20806628,"comment_id":121805262,"body_markdown":"A subclass is only generated when you request it explicitly. Then, the subclasses will be `final`. Otherwise, the `enum` type itself will be `final`.","body":"A subclass is only generated when you request it explicitly. Then, the subclasses will be <code>final</code>. Otherwise, the <code>enum</code> type itself will be <code>final</code>."}],"tags":[],"owner":{"account_id":2570915,"reputation":3265,"user_id":3075488,"accept_rate":84,"display_name":"Sitansu"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388172967,"creation_date":1388172522,"answer_id":20806628,"question_id":9969690,"body_markdown":"I think an `enum` can&#39;t be `final`, because under the hood compiler generates subclasses for each `enum` entry.\r\n\r\nMore information From [source][1]\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/15734225/what-are-the-differences-between-a-java-enum-and-a-class-with-private-constructo/15734503#15734503\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>I think an <code>enum</code> can't be <code>final</code>, because under the hood compiler generates subclasses for each <code>enum</code> entry.</p>\n\n<p>More information From <a href=\"https://stackoverflow.com/questions/15734225/what-are-the-differences-between-a-java-enum-and-a-class-with-private-constructo/15734503#15734503\">source</a></p>\n"},{"comments":[{"owner":{"account_id":2702639,"reputation":4757,"user_id":2333021,"accept_rate":70,"display_name":"Christopher Rucinski"},"score":1,"creation_date":1440476448,"post_id":25486215,"comment_id":52275945,"body_markdown":"I knew about these two before, but I just learned a lot from your `What does this mean?` section. I knew there was a divide in implementation at size 64, but I didn&#39;t actually know why","body":"I knew about these two before, but I just learned a lot from your <code>What does this mean?</code> section. I knew there was a divide in implementation at size 64, but I didn&#39;t actually know why"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1629890961,"post_id":25486215,"comment_id":121805526,"body_markdown":"Might be worth mentioning that the `EnumSet` has the same optimizations for types containing more than 64 constants as well. It just has to use a `long[]` array instead of a single `long`. And while reducing `add`, `remove`, and `contains` operations to single bit operations is great, the real fun starts with operations like `addAll`, `removeAll`, and `retainAll` which do not go bit by bit but process 64 elements (in other words, all of them, usually) at once.","body":"Might be worth mentioning that the <code>EnumSet</code> has the same optimizations for types containing more than 64 constants as well. It just has to use a <code>long[]</code> array instead of a single <code>long</code>. And while reducing <code>add</code>, <code>remove</code>, and <code>contains</code> operations to single bit operations is great, the real fun starts with operations like <code>addAll</code>, <code>removeAll</code>, and <code>retainAll</code> which do not go bit by bit but process 64 elements (in other words, all of them, usually) at once."}],"tags":[],"owner":{"account_id":1886487,"reputation":396597,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"comment_count":2,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1408971118,"creation_date":1408970537,"answer_id":25486215,"question_id":9969690,"body_markdown":"There are many good answers here, but none mentiones that there are **highly optimized implementations** of the Collection API classes/interfaces **specifically for enums**:\r\n\r\n - [EnumSet][2]\r\n - [EnumMap][3]\r\n\r\nThese enum specific classes only accept `Enum` instances (the `EnumMap` only accept `Enum`s only as keys), and whenever possible, they revert to compact representation and bit manipulation in their implementation.\r\n\r\n**What does this mean?**\r\n\r\nIf our `Enum` type has no more that 64 elements (most of real-life `Enum` examples will qualify for this), the implementations store the elements in a single `long` value, each `Enum` instance in question will be associated with a bit of this 64-bit long `long`. Adding an element to an `EnumSet` is simply just setting the proper bit to 1, removing it is just setting that bit to 0. Testing if an element is in the `Set` is just one bitmask test! Now you gotta love `Enum`s for this!\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/15734225/what-are-the-differences-between-a-java-enum-and-a-class-with-private-constructo\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/util/EnumMap.html","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>There are many good answers here, but none mentiones that there are <strong>highly optimized implementations</strong> of the Collection API classes/interfaces <strong>specifically for enums</strong>:</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\">EnumSet</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/EnumMap.html\">EnumMap</a></li>\n</ul>\n\n<p>These enum specific classes only accept <code>Enum</code> instances (the <code>EnumMap</code> only accept <code>Enum</code>s only as keys), and whenever possible, they revert to compact representation and bit manipulation in their implementation.</p>\n\n<p><strong>What does this mean?</strong></p>\n\n<p>If our <code>Enum</code> type has no more that 64 elements (most of real-life <code>Enum</code> examples will qualify for this), the implementations store the elements in a single <code>long</code> value, each <code>Enum</code> instance in question will be associated with a bit of this 64-bit long <code>long</code>. Adding an element to an <code>EnumSet</code> is simply just setting the proper bit to 1, removing it is just setting that bit to 0. Testing if an element is in the <code>Set</code> is just one bitmask test! Now you gotta love <code>Enum</code>s for this!</p>\n"},{"tags":[],"owner":{"account_id":2443555,"reputation":638,"user_id":2131439,"display_name":"Maverick"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1544419517,"creation_date":1410501899,"answer_id":25801764,"question_id":9969690,"body_markdown":"example:\r\n\r\n    public class CurrencyDenom {\r\n       public static final int PENNY = 1;\r\n     public static final int NICKLE = 5;\r\n     public static final int DIME = 10;\r\n    public static final int QUARTER = 25;}\r\n\r\n\r\nLimitation of java Constants\r\n\r\n 1) **No Type-Safety**: First of all itâs not type-safe; you can assign any valid int value to int e.g. 99 though there is no coin to represent that value.\r\n\r\n 2) **No Meaningful Printing**: printing value of any of these constant will print its numeric value instead of meaningful name of coin e.g. when you print NICKLE it will print &quot;5&quot; instead of &quot;NICKLE&quot;\r\n\r\n3) **No namespace**: to access the currencyDenom constant we need to prefix class name e.g. CurrencyDenom.PENNY instead of just using PENNY though this can also be achieved by using static import in JDK 1.5\r\n\r\nAdvantage of enum\r\n\r\n1) Enums in Java are type-safe and has there own name-space. It means your enum will have a type for example &quot;Currency&quot; in below example and you can not assign any value other than specified in Enum Constants.\r\n  \r\n\r\n    public enum Currency {PENNY, NICKLE, DIME, QUARTER};\r\n`Currency coin = Currency.PENNY;\r\ncoin = 1; //compilation error`\r\n\r\n  \r\n\r\n\r\n2) Enum in Java are reference type like class or interface and you can define constructor, methods and variables inside java Enum which makes it more powerful than Enum in C and C++ as shown in next example of Java Enum type.\r\n\r\n\r\n3) You can specify values of enum constants at the creation time as shown in below example:\r\npublic enum Currency {PENNY(1), NICKLE(5), DIME(10), QUARTER(25)};\r\nBut for this to work you need to define a member variable and a constructor because PENNY (1) is actually calling a constructor which accepts int value , see below example.\r\n\r\n       \r\n    public enum Currency {\r\n        PENNY(1), NICKLE(5), DIME(10), QUARTER(25);\r\n        private int value;\r\n\r\n        private Currency(int value) {\r\n                this.value = value;\r\n        }\r\n    }; \r\n\r\n\r\nReference: https://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>example:</p>\n\n<pre><code>public class CurrencyDenom {\n   public static final int PENNY = 1;\n public static final int NICKLE = 5;\n public static final int DIME = 10;\npublic static final int QUARTER = 25;}\n</code></pre>\n\n<p>Limitation of java Constants</p>\n\n<p>1) <strong>No Type-Safety</strong>: First of all itâs not type-safe; you can assign any valid int value to int e.g. 99 though there is no coin to represent that value.</p>\n\n<p>2) <strong>No Meaningful Printing</strong>: printing value of any of these constant will print its numeric value instead of meaningful name of coin e.g. when you print NICKLE it will print \"5\" instead of \"NICKLE\"</p>\n\n<p>3) <strong>No namespace</strong>: to access the currencyDenom constant we need to prefix class name e.g. CurrencyDenom.PENNY instead of just using PENNY though this can also be achieved by using static import in JDK 1.5</p>\n\n<p>Advantage of enum</p>\n\n<p>1) Enums in Java are type-safe and has there own name-space. It means your enum will have a type for example \"Currency\" in below example and you can not assign any value other than specified in Enum Constants.</p>\n\n<pre><code>public enum Currency {PENNY, NICKLE, DIME, QUARTER};\n</code></pre>\n\n<p><code>Currency coin = Currency.PENNY;\ncoin = 1; //compilation error</code></p>\n\n<p>2) Enum in Java are reference type like class or interface and you can define constructor, methods and variables inside java Enum which makes it more powerful than Enum in C and C++ as shown in next example of Java Enum type.</p>\n\n<p>3) You can specify values of enum constants at the creation time as shown in below example:\npublic enum Currency {PENNY(1), NICKLE(5), DIME(10), QUARTER(25)};\nBut for this to work you need to define a member variable and a constructor because PENNY (1) is actually calling a constructor which accepts int value , see below example.</p>\n\n<pre><code>public enum Currency {\n    PENNY(1), NICKLE(5), DIME(10), QUARTER(25);\n    private int value;\n\n    private Currency(int value) {\n            this.value = value;\n    }\n}; \n</code></pre>\n\n<p>Reference: <a href=\"https://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html\" rel=\"noreferrer\">https://javarevisited.blogspot.com/2011/08/enum-in-java-example-tutorial.html</a></p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":40,"creation_date":1484128829,"post_id":26118954,"comment_id":70379216,"body_markdown":"Having said all that, every time I&#39;ve put code into an Enum I&#39;ve regretted it.","body":"Having said all that, every time I&#39;ve put code into an Enum I&#39;ve regretted it."},{"owner":{"account_id":112612,"reputation":89615,"user_id":296974,"accept_rate":100,"display_name":"glglgl"},"score":5,"creation_date":1497265455,"post_id":26118954,"comment_id":75988700,"body_markdown":"Why did you regret it? I did neverâ¦","body":"Why did you regret it? I did neverâ¦"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1521628618,"post_id":26118954,"comment_id":85809011,"body_markdown":"@glglgl Becasue it put application-specific code into a place where I felt it was didn&#39;t really belong, that was really only defining a set of values. If I had it to do again I would have included it in one of the numerous `switch` statements that were the original motivation for using an `Enum` at all.","body":"@glglgl Becasue it put application-specific code into a place where I felt it was didn&#39;t really belong, that was really only defining a set of values. If I had it to do again I would have included it in one of the numerous <code>switch</code> statements that were the original motivation for using an <code>Enum</code> at all."}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":3,"down_vote_count":0,"up_vote_count":139,"is_accepted":false,"score":139,"last_activity_date":1465190850,"creation_date":1412074305,"answer_id":26118954,"question_id":9969690,"body_markdown":"1. Type safety and value safety.\r\n2. Guaranteed singleton.\r\n3. Ability to define and override methods.\r\n4. Ability to use values in `switch` statement `case` statements without qualification.\r\n5. Built-in sequentialization of values via `ordinal().`\r\n6. Serialization by name not by value, which offers a degree of future-proofing.\r\n7. `EnumSet` and `EnumMap` classes. ","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<ol>\n<li>Type safety and value safety.</li>\n<li>Guaranteed singleton.</li>\n<li>Ability to define and override methods.</li>\n<li>Ability to use values in <code>switch</code> statement <code>case</code> statements without qualification.</li>\n<li>Built-in sequentialization of values via <code>ordinal().</code></li>\n<li>Serialization by name not by value, which offers a degree of future-proofing.</li>\n<li><code>EnumSet</code> and <code>EnumMap</code> classes. </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4892265,"reputation":1439,"user_id":3943054,"accept_rate":73,"display_name":"artronics"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544419477,"creation_date":1462237357,"answer_id":36994003,"question_id":9969690,"body_markdown":"Another important difference is that java compiler treats `static final` fields of **primitive types** and **String** as literals. It means these constants become inline. It&#39;s similar to `C/C++` `#define` preprocessor. See [this SO question](https://stackoverflow.com/questions/1927107/define-in-java). This is not the case with enums.","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>Another important difference is that java compiler treats <code>static final</code> fields of <strong>primitive types</strong> and <strong>String</strong> as literals. It means these constants become inline. It's similar to <code>C/C++</code> <code>#define</code> preprocessor. See <a href=\"https://stackoverflow.com/questions/1927107/define-in-java\">this SO question</a>. This is not the case with enums.</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71921,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1474080184,"creation_date":1474080184,"answer_id":39542386,"question_id":9969690,"body_markdown":"The biggest advantage is enum Singletons are easy to write and thread-safe :\r\n\r\n    public enum EasySingleton{\r\n        INSTANCE;\r\n    }\r\n\r\nand\r\n\r\n    /**\r\n    * Singleton pattern example with Double checked Locking\r\n    */\r\n    public class DoubleCheckedLockingSingleton{\r\n         private volatile DoubleCheckedLockingSingleton INSTANCE;\r\n      \r\n         private DoubleCheckedLockingSingleton(){}\r\n      \r\n         public DoubleCheckedLockingSingleton getInstance(){\r\n             if(INSTANCE == null){\r\n                synchronized(DoubleCheckedLockingSingleton.class){\r\n                    //double checking Singleton instance\r\n                    if(INSTANCE == null){\r\n                        INSTANCE = new DoubleCheckedLockingSingleton();\r\n                    }\r\n                }\r\n             }\r\n             return INSTANCE;\r\n         }\r\n    }\r\n\r\nboth are similar and it handled Serialization by themselves by implementing  \r\n\r\n    //readResolve to prevent another instance of Singleton\r\n        private Object readResolve(){\r\n            return INSTANCE;\r\n        }\r\n\r\n[more][1]\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.in/2012/07/why-enum-singleton-are-better-in-java.html","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>The biggest advantage is enum Singletons are easy to write and thread-safe :</p>\n\n<pre><code>public enum EasySingleton{\n    INSTANCE;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>/**\n* Singleton pattern example with Double checked Locking\n*/\npublic class DoubleCheckedLockingSingleton{\n     private volatile DoubleCheckedLockingSingleton INSTANCE;\n\n     private DoubleCheckedLockingSingleton(){}\n\n     public DoubleCheckedLockingSingleton getInstance(){\n         if(INSTANCE == null){\n            synchronized(DoubleCheckedLockingSingleton.class){\n                //double checking Singleton instance\n                if(INSTANCE == null){\n                    INSTANCE = new DoubleCheckedLockingSingleton();\n                }\n            }\n         }\n         return INSTANCE;\n     }\n}\n</code></pre>\n\n<p>both are similar and it handled Serialization by themselves by implementing  </p>\n\n<pre><code>//readResolve to prevent another instance of Singleton\n    private Object readResolve(){\n        return INSTANCE;\n    }\n</code></pre>\n\n<p><a href=\"http://javarevisited.blogspot.in/2012/07/why-enum-singleton-are-better-in-java.html\" rel=\"nofollow\">more</a></p>\n"},{"tags":[],"owner":{"account_id":4837085,"reputation":1935,"user_id":3903366,"accept_rate":55,"display_name":"Bikas Katwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682325390,"creation_date":1565506227,"answer_id":57447932,"question_id":9969690,"body_markdown":"There are many advantages of enums that are posted here, here is my take on this.\r\n\r\nSay you have an enum with many fields - 5,6 or more.\r\n\r\n```\r\nenum Planet{\r\nEARTH(1000000, 312312321,31232131, &quot;some text&quot;, &quot;&quot;, 12),\r\n....\r\nother planets\r\n....\r\n```\r\nIn such a case when you have multiple fields in an enum, it is much more difficult to understand which value belongs to which field as you need to see the constructor and eyeball. \r\n\r\nClass with `static final` constants and using the `Builder` pattern make it more readable. But, you would lose all other advantages of using an enum. \r\nOne other point if you are maintaining a list of Planet objects somewhere, you would need to update the list too. \r\n\r\nI personally would prefer an enum over such a class, as `values()` comes in handy and you never know if you need them to use in `switch` or `EnumSet` or `EnumMap` in the future :) \r\n","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>There are many advantages of enums that are posted here, here is my take on this.</p>\n<p>Say you have an enum with many fields - 5,6 or more.</p>\n<pre><code>enum Planet{\nEARTH(1000000, 312312321,31232131, &quot;some text&quot;, &quot;&quot;, 12),\n....\nother planets\n....\n</code></pre>\n<p>In such a case when you have multiple fields in an enum, it is much more difficult to understand which value belongs to which field as you need to see the constructor and eyeball.</p>\n<p>Class with <code>static final</code> constants and using the <code>Builder</code> pattern make it more readable. But, you would lose all other advantages of using an enum.\nOne other point if you are maintaining a list of Planet objects somewhere, you would need to update the list too.</p>\n<p>I personally would prefer an enum over such a class, as <code>values()</code> comes in handy and you never know if you need them to use in <code>switch</code> or <code>EnumSet</code> or <code>EnumMap</code> in the future :)</p>\n"},{"tags":[],"owner":{"account_id":10686764,"reputation":538,"user_id":7867094,"display_name":"radfast"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580046987,"creation_date":1580045762,"answer_id":59918858,"question_id":9969690,"body_markdown":"**Main reason:** Enums help you to write well-structured code where the semantic meaning of parameters is clear and strongly-typed at compile time - for all the reasons other answers have given.\r\n\r\n**Quid pro quo:** in Java out of the box, an Enum&#39;s array of members is final.  That&#39;s normally good as it helps value safety and testing, but in some situations it could be a drawback, for example if you are extending existing base code perhaps from a library. In contrast, if the same data is in a class with static fields you can easily add new instances of that class at runtime (you might also need to write code to add these to any Iterable you have for that class).  But this behaviour of Enums can be changed: using reflection you can add new members at runtime or replace existing members, though this should probably only be done in specialised situations where there is no alternative: i.e. it&#39;s a hacky solution and may produce unexpected issues, see my answer on [Can I add and remove elements of enumeration at runtime in Java](https://stackoverflow.com/a/59918808/7867094).","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p><strong>Main reason:</strong> Enums help you to write well-structured code where the semantic meaning of parameters is clear and strongly-typed at compile time - for all the reasons other answers have given.</p>\n\n<p><strong>Quid pro quo:</strong> in Java out of the box, an Enum's array of members is final.  That's normally good as it helps value safety and testing, but in some situations it could be a drawback, for example if you are extending existing base code perhaps from a library. In contrast, if the same data is in a class with static fields you can easily add new instances of that class at runtime (you might also need to write code to add these to any Iterable you have for that class).  But this behaviour of Enums can be changed: using reflection you can add new members at runtime or replace existing members, though this should probably only be done in specialised situations where there is no alternative: i.e. it's a hacky solution and may produce unexpected issues, see my answer on <a href=\"https://stackoverflow.com/a/59918808/7867094\">Can I add and remove elements of enumeration at runtime in Java</a>.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1629890201,"post_id":68597347,"comment_id":121805183,"body_markdown":"Part of the same change, is that local classes now can have `static final` fields. Their scope would be the same as for the constants of a local `enum`. However, when youâre within an instance method, ordinary local classes still have an implicit reference to the surrounding `this`, which prevents them from being used like an `enum`.","body":"Part of the same change, is that local classes now can have <code>static final</code> fields. Their scope would be the same as for the constants of a local <code>enum</code>. However, when youâre within an instance method, ordinary local classes still have an implicit reference to the surrounding <code>this</code>, which prevents them from being used like an <code>enum</code>."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627709473,"creation_date":1627681230,"answer_id":68597347,"question_id":9969690,"body_markdown":"# Enums can be local\r\n\r\nAs of [Java 16][1], an enum can be defined locally (within a method). This scope is in addition to being able to define an enum as nested or as separate class. \r\n\r\nThis new local definition scope came along with the new records feature. See [*JEP 395: Records*][2] for details. Enums, interfaces, and records can all be defined locally in Java 16+.\r\n\r\nIn contrast, `public static final` fields always have global scope.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_16\r\n  [2]: https://openjdk.java.net/jeps/395","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<h1>Enums can be local</h1>\n<p>As of <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_16\" rel=\"nofollow noreferrer\">Java 16</a>, an enum can be defined locally (within a method). This scope is in addition to being able to define an enum as nested or as separate class.</p>\n<p>This new local definition scope came along with the new records feature. See <a href=\"https://openjdk.java.net/jeps/395\" rel=\"nofollow noreferrer\"><em>JEP 395: Records</em></a> for details. Enums, interfaces, and records can all be defined locally in Java 16+.</p>\n<p>In contrast, <code>public static final</code> fields always have global scope.</p>\n"},{"tags":[],"owner":{"account_id":3495815,"reputation":26,"user_id":2924075,"display_name":"zettsu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634310872,"creation_date":1634310872,"answer_id":69586946,"question_id":9969690,"body_markdown":"You can do :\r\n\r\n```\r\npublic enum Size { SMALL(1), MEDIUM(2), LARGE(3) };\r\n\r\nprivate int sizeValue;\r\n\r\nSize(sizeValue) {this.sizeValue = value; }\r\n```\r\n\r\nSo with this you can get size value like this SMALL.getSizeValue();\r\n\r\nIf you want to set sizes Enums are not for you, if you will be only define constants and fixed values are fine.\r\n\r\nCheck this [link][1] maybe can help you \r\n\r\n\r\n  [1]: https://www.baeldung.com/java-enum-values","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>You can do :</p>\n<pre><code>public enum Size { SMALL(1), MEDIUM(2), LARGE(3) };\n\nprivate int sizeValue;\n\nSize(sizeValue) {this.sizeValue = value; }\n</code></pre>\n<p>So with this you can get size value like this SMALL.getSizeValue();</p>\n<p>If you want to set sizes Enums are not for you, if you will be only define constants and fixed values are fine.</p>\n<p>Check this <a href=\"https://www.baeldung.com/java-enum-values\" rel=\"nofollow noreferrer\">link</a> maybe can help you</p>\n"}],"owner":{"account_id":23831,"reputation":4410,"user_id":60067,"accept_rate":68,"display_name":"Craig W"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163837,"favorite_count":0,"down_vote_count":1,"up_vote_count":189,"accepted_answer_id":9969738,"answer_count":18,"score":188,"last_activity_date":1682325390,"creation_date":1333327537,"question_id":9969690,"body_markdown":"I am very familiar with C# but starting to work more in Java. I expected to learn that enums in Java were basically equivalent to those in C# but apparently this is not the case. Initially I was excited to learn that Java enums could contain multiple pieces of data which seems very advantageous ([http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html][1]). However, since then I have found a lot of features missing that are trivial in C#, such as the ability to easily assign an enum element a certain value, and consequently the ability to convert an integer to an enum without a decent amount of effort (i.e. https://stackoverflow.com/questions/5292790/convert-integer-value-to-matching-java-enum).\r\n\r\nSo my question is this: is there any benefit to Java enums over a class with a bunch of public static final fields? Or does it just provide more compact syntax?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\r\n\r\nEDIT: Let me be more clear. What is the benefit of Java enums over a class with a bunch of public static final fields *of the same type*? For example, in the planets example at the first link, what is the advantage of an enum over a class with these public constants:\r\n\r\n    public static final Planet MERCURY = new Planet(3.303e+23, 2.4397e6);\r\n    public static final Planet VENUS = new Planet(4.869e+24, 6.0518e6);\r\n    public static final Planet EARTH = new Planet(5.976e+24, 6.37814e6);\r\n    public static final Planet MARS = new Planet(6.421e+23, 3.3972e6);\r\n    public static final Planet JUPITER = new Planet(1.9e+27, 7.1492e7);\r\n    public static final Planet SATURN = new Planet(5.688e+26, 6.0268e7);\r\n    public static final Planet URANUS = new Planet(8.686e+25, 2.5559e7);\r\n    public static final Planet NEPTUNE = new Planet(1.024e+26, 2.4746e7);\r\n\r\nAs far as I can tell, casablanca&#39;s answer is the only one that satisfies this.","title":"What&#39;s the advantage of a Java enum versus a class with public static final fields?","body":"<p>I am very familiar with C# but starting to work more in Java. I expected to learn that enums in Java were basically equivalent to those in C# but apparently this is not the case. Initially I was excited to learn that Java enums could contain multiple pieces of data which seems very advantageous (<a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html</a>). However, since then I have found a lot of features missing that are trivial in C#, such as the ability to easily assign an enum element a certain value, and consequently the ability to convert an integer to an enum without a decent amount of effort (i.e. <a href=\"https://stackoverflow.com/questions/5292790/convert-integer-value-to-matching-java-enum\">Convert integer value to matching Java Enum</a>).</p>\n\n<p>So my question is this: is there any benefit to Java enums over a class with a bunch of public static final fields? Or does it just provide more compact syntax?</p>\n\n<p>EDIT: Let me be more clear. What is the benefit of Java enums over a class with a bunch of public static final fields <em>of the same type</em>? For example, in the planets example at the first link, what is the advantage of an enum over a class with these public constants:</p>\n\n<pre><code>public static final Planet MERCURY = new Planet(3.303e+23, 2.4397e6);\npublic static final Planet VENUS = new Planet(4.869e+24, 6.0518e6);\npublic static final Planet EARTH = new Planet(5.976e+24, 6.37814e6);\npublic static final Planet MARS = new Planet(6.421e+23, 3.3972e6);\npublic static final Planet JUPITER = new Planet(1.9e+27, 7.1492e7);\npublic static final Planet SATURN = new Planet(5.688e+26, 6.0268e7);\npublic static final Planet URANUS = new Planet(8.686e+25, 2.5559e7);\npublic static final Planet NEPTUNE = new Planet(1.024e+26, 2.4746e7);\n</code></pre>\n\n<p>As far as I can tell, casablanca's answer is the only one that satisfies this.</p>\n"},{"tags":["javascript","java","android","react-native","android-studio"],"comments":[{"owner":{"account_id":18542382,"reputation":3683,"user_id":13510562,"display_name":"rmunge"},"score":0,"creation_date":1626024582,"post_id":68159229,"comment_id":120777288,"body_markdown":"if the error should occur in android emulator, then test it on a real device. android emulators seem to have multiple isses with hardware acceleration.","body":"if the error should occur in android emulator, then test it on a real device. android emulators seem to have multiple isses with hardware acceleration."},{"owner":{"account_id":1853756,"reputation":7005,"user_id":1679754,"display_name":"Jignesh Mayani"},"score":0,"creation_date":1626157455,"post_id":68159229,"comment_id":120810572,"body_markdown":"Have you tried to clean the Gradle and generate the build?","body":"Have you tried to clean the Gradle and generate the build?"},{"owner":{"account_id":6697492,"reputation":1213,"user_id":5165107,"display_name":"CodeWithVikas"},"score":2,"creation_date":1626445406,"post_id":68159229,"comment_id":120902559,"body_markdown":"do you have any native(cpp library) ?","body":"do you have any native(cpp library) ?"},{"owner":{"account_id":8253593,"reputation":678,"user_id":6207404,"display_name":"ArefinDe"},"score":0,"creation_date":1635758910,"post_id":68159229,"comment_id":123370546,"body_markdown":"I am facing the same issue:      I am using &quot;realm&quot;: &quot;^10.9.1&quot;, in a âReact Native applicationâ to save some âFeed Arrayâ data in realmDB, before closing my application.","body":"I am facing the same issue:      I am using &quot;realm&quot;: &quot;^10.9.1&quot;, in a âReact Native applicationâ to save some âFeed Arrayâ data in realmDB, before closing my application."},{"owner":{"account_id":14419899,"reputation":123,"user_id":10416207,"display_name":"Sudharsan Palanisamy"},"score":0,"creation_date":1665379896,"post_id":68159229,"comment_id":130677869,"body_markdown":"@Bhaskar Joshi have you found any solution for this","body":"@Bhaskar Joshi have you found any solution for this"},{"owner":{"account_id":19235561,"reputation":908,"user_id":14056591,"display_name":"Ovidiu Cristescu"},"score":0,"creation_date":1669411781,"post_id":68159229,"comment_id":131642676,"body_markdown":"Does this answer your question? [React Native - Null pointer dereference after navigating to/from a page containing multiple tweets embedded inside their own WebViews](https://stackoverflow.com/questions/56553663/react-native-null-pointer-dereference-after-navigating-to-from-a-page-containi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/56553663/react-native-null-pointer-dereference-after-navigating-to-from-a-page-containi\">React Native - Null pointer dereference after navigating to/from a page containing multiple tweets embedded inside their own WebViews</a>"}],"answers":[{"tags":[],"owner":{"account_id":8253593,"reputation":678,"user_id":6207404,"display_name":"ArefinDe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635990412,"creation_date":1635770595,"answer_id":69797094,"question_id":68159229,"body_markdown":"I have faced the same problem; was using &quot;realm&quot;: &quot;^10.9.1&quot;, in a âReact Native applicationâ to save some âTask Dataâ in realmDB.\r\n\r\nPreviously I was using &quot;React-Navigation 5x&quot; which have a dependency on \r\n[react-native-reanimated][1]. Now I have upgraded my code to &quot;React-Navigation 6x&quot;, and removed old [react-native-reanimated package][2] version 2.0.0-rc.2 .\r\n\r\n\r\n  [1]: https://www.npmjs.com/package/react-native-reanimated/v/2.0.0-rc.2\r\n  [2]: https://www.npmjs.com/package/react-native-reanimated?activeTab=versions\r\n  [3]: https://github.com/software-mansion/","title":"A/libc: Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x20 in tid 8890 (RenderThread), pid 8833","body":"<p>I have faced the same problem; was using &quot;realm&quot;: &quot;^10.9.1&quot;, in a âReact Native applicationâ to save some âTask Dataâ in realmDB.</p>\n<p>Previously I was using &quot;React-Navigation 5x&quot; which have a dependency on\n<a href=\"https://www.npmjs.com/package/react-native-reanimated/v/2.0.0-rc.2\" rel=\"nofollow noreferrer\">react-native-reanimated</a>. Now I have upgraded my code to &quot;React-Navigation 6x&quot;, and removed old <a href=\"https://www.npmjs.com/package/react-native-reanimated?activeTab=versions\" rel=\"nofollow noreferrer\">react-native-reanimated package</a> version 2.0.0-rc.2 .</p>\n"},{"tags":[],"owner":{"account_id":19235561,"reputation":908,"user_id":14056591,"display_name":"Ovidiu Cristescu"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1669412209,"creation_date":1669411303,"answer_id":74577941,"question_id":68159229,"body_markdown":"&gt; Might be a duplicate: https://stackoverflow.com/questions/56553663/react-native-null-pointer-dereference-after-navigating-to-from-a-page-containi/74577101#74577101\r\n\r\nMy app was crashing when I was navigating away from a screen which was using [`react-native-webview`][1] inside it.\r\n\r\nMy solution:\r\n\r\nExample:\r\n```javascript\r\n    &lt;WebView\r\n      style={{ opacity: 0.99 }}\r\n    /&gt;\r\n```\r\n\r\nOthers used `androidHardwareAccelerationDisabled={true}`, but it didn&#39;t work for me and can also cause performance issues.\r\n\r\nExample:\r\n```javascript\r\n    &lt;WebView\r\n      androidHardwareAccelerationDisabled\r\n    /&gt;\r\n```\r\n\r\nLink to github discussion where I found the solution: https://github.com/react-native-webview/react-native-webview/issues/811#issuecomment-570813204 \r\n\r\n  [1]: https://github.com/react-native-webview/react-native-webview","title":"A/libc: Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x20 in tid 8890 (RenderThread), pid 8833","body":"<blockquote>\n<p>Might be a duplicate: <a href=\"https://stackoverflow.com/questions/56553663/react-native-null-pointer-dereference-after-navigating-to-from-a-page-containi/74577101#74577101\">React Native - Null pointer dereference after navigating to/from a page containing multiple tweets embedded inside their own WebViews</a></p>\n</blockquote>\n<p>My app was crashing when I was navigating away from a screen which was using <a href=\"https://github.com/react-native-webview/react-native-webview\" rel=\"nofollow noreferrer\"><code>react-native-webview</code></a> inside it.</p>\n<p>My solution:</p>\n<p>Example:</p>\n<pre class=\"lang-js prettyprint-override\"><code>    &lt;WebView\n      style={{ opacity: 0.99 }}\n    /&gt;\n</code></pre>\n<p>Others used <code>androidHardwareAccelerationDisabled={true}</code>, but it didn't work for me and can also cause performance issues.</p>\n<p>Example:</p>\n<pre class=\"lang-js prettyprint-override\"><code>    &lt;WebView\n      androidHardwareAccelerationDisabled\n    /&gt;\n</code></pre>\n<p>Link to github discussion where I found the solution: <a href=\"https://github.com/react-native-webview/react-native-webview/issues/811#issuecomment-570813204\" rel=\"nofollow noreferrer\">https://github.com/react-native-webview/react-native-webview/issues/811#issuecomment-570813204</a></p>\n"}],"owner":{"account_id":11144564,"reputation":413,"user_id":8179823,"display_name":"Bhaskar Joshi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5350,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":2,"score":6,"last_activity_date":1682325387,"creation_date":1624865261,"question_id":68159229,"body_markdown":"I am getting a crash on some actions(navigating to a screen, open video player etc) in my react native app.\r\nI have logged the error in android stdio and it was as below:\r\n````\r\nA/libc: Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x20 in tid 8890 \r\n    (RenderThread), pid 8833\r\n````\r\nThe crash is resolved by setting below in Android Manifest\r\n````      \r\n android:hardwareAccelerated=&quot;false&quot;\r\n````\r\nBut my react-native-video player is now showing black screen after setting android:hardwareAccelerated to false and I think it is not the best way to resolve it.\r\n\r\nI don&#39;t know why I am getting this crash.\r\nI would be thankful for any help.\r\n","title":"A/libc: Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x20 in tid 8890 (RenderThread), pid 8833","body":"<p>I am getting a crash on some actions(navigating to a screen, open video player etc) in my react native app.\nI have logged the error in android stdio and it was as below:</p>\n<pre><code>A/libc: Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x20 in tid 8890 \n    (RenderThread), pid 8833\n</code></pre>\n<p>The crash is resolved by setting below in Android Manifest</p>\n<pre><code> android:hardwareAccelerated=&quot;false&quot;\n</code></pre>\n<p>But my react-native-video player is now showing black screen after setting android:hardwareAccelerated to false and I think it is not the best way to resolve it.</p>\n<p>I don't know why I am getting this crash.\nI would be thankful for any help.</p>\n"},{"tags":["java","spring-boot","google-app-engine","publish-subscribe"],"comments":[{"owner":{"account_id":23157436,"reputation":2052,"user_id":17258510,"display_name":"kiran mathew"},"score":0,"creation_date":1682347299,"post_id":76090035,"comment_id":134196591,"body_markdown":"Does this [link](https://cloud.google.com/pubsub/docs/spring) help you?","body":"Does this <a href=\"https://cloud.google.com/pubsub/docs/spring\" rel=\"nofollow noreferrer\">link</a> help you?"},{"owner":{"account_id":1823717,"reputation":301,"user_id":1657131,"accept_rate":50,"display_name":"Tushar Paliwal"},"score":0,"creation_date":1682407318,"post_id":76090035,"comment_id":134205880,"body_markdown":"What should I look into this? Application is already up and running in my case with proper logging setup.","body":"What should I look into this? Application is already up and running in my case with proper logging setup."}],"owner":{"account_id":1823717,"reputation":301,"user_id":1657131,"accept_rate":50,"display_name":"Tushar Paliwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682325270,"creation_date":1682325270,"question_id":76090035,"body_markdown":"I&#39;m newbie to Google pub/sub.\r\nI&#39;m using SpringBoot with starter `spring-cloud-gcp-starter-pubsub` to publish message to Google pub/sub. But sometimes my messages are publishing with large delay(~ 2 hours). \r\nI&#39;m using default configuration of client library. \r\nThanks in advance!","title":"Message publishing to Google pub/sub with large delay","body":"<p>I'm newbie to Google pub/sub.\nI'm using SpringBoot with starter <code>spring-cloud-gcp-starter-pubsub</code> to publish message to Google pub/sub. But sometimes my messages are publishing with large delay(~ 2 hours).\nI'm using default configuration of client library.\nThanks in advance!</p>\n"},{"tags":["java","redis","lettuce"],"answers":[{"tags":[],"owner":{"account_id":28394664,"reputation":1,"user_id":21719898,"display_name":"zhangkaiyong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682324976,"creation_date":1682324660,"answer_id":76089953,"question_id":75558312,"body_markdown":"I&#39;ve met the question as you too. \r\nI found that when creating the factory, will read command metadata from the Redis server. Then use metadata to verify the method parameters conform to the specification.  \r\n\r\n&lt;pre&gt;\r\nthis.commandMethodVerifier = new DefaultCommandMethodVerifier(getCommands(connection));\r\n&lt;/pre&gt;\r\n\r\nHowever, hmset command requires at least 4 parameters to be passed inï¼  \r\n&lt;pre&gt;\r\nHMSET usage: HMSET key field value [field value...]\r\nCOMMAND return: \r\n1) &quot;hmset&quot;\r\n2) (integer) -4\r\n3)  1) write\r\n\t2) denyoom\r\n4) (integer) 1\r\n5) (integer) 1\r\n6) (integer) 1\r\n&lt;/pre&gt;\r\n\r\n\r\nI resolved the issue by modifying the method as followsï¼\r\n\r\n    void hmset(String key, String field, String value, String... fieldvalues);\r\n\r\n","title":"How to implement hmset in Lettuce Command Interface Commands","body":"<p>I've met the question as you too.\nI found that when creating the factory, will read command metadata from the Redis server. Then use metadata to verify the method parameters conform to the specification.</p>\n<pre>\nthis.commandMethodVerifier = new DefaultCommandMethodVerifier(getCommands(connection));\n</pre>\n<p>However, hmset command requires at least 4 parameters to be passed inï¼</p>\n<pre>\nHMSET usage: HMSET key field value [field value...]\nCOMMAND return: \n1) \"hmset\"\n2) (integer) -4\n3)  1) write\n    2) denyoom\n4) (integer) 1\n5) (integer) 1\n6) (integer) 1\n</pre>\n<p>I resolved the issue by modifying the method as followsï¼</p>\n<pre><code>void hmset(String key, String field, String value, String... fieldvalues);\n</code></pre>\n"}],"owner":{"account_id":324398,"reputation":1260,"user_id":644949,"accept_rate":14,"display_name":"Vipresh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682324976,"creation_date":1677252120,"question_id":75558312,"body_markdown":"I am trying to invoke hmset command from Lettuce Command Interface Commands\r\nBut at runtime it gives error \r\n&gt; Command HMSET requires at least 3 parameters but method declares 2 parameter(s). Offending method: public abstract java.lang.Void net.media.max.utils.LettuceCommandInterface.hmset(java.lang.String,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\r\n\r\nbelow is my class\r\n```java\r\nimport java.util.Map;\r\n\r\nimport io.lettuce.core.dynamic.Commands;\r\nimport io.lettuce.core.dynamic.annotation.Command;\r\nimport io.lettuce.core.dynamic.batch.BatchExecutor;\r\nimport io.lettuce.core.dynamic.batch.BatchSize;\r\n\r\n@BatchSize(1000)\r\npublic interface LettuceCommandInterface extends Commands, BatchExecutor {\r\n    @Command(&quot;HSET&quot;)\r\n    void hset(String key, String hashKey, String value);\r\n\t\r\n\t@Command(&quot;ZADD&quot;)\r\n\tvoid zadd(String key, double score, String member);\r\n\r\n\t@Command(&quot;SET&quot;)\r\n\tvoid set(String key, String values);\r\n\r\n    @Command(&quot;hmset&quot;)\r\n\tVoid hmset(String key, Map&lt;String,String&gt; map);\r\n\r\n}\r\n```\r\n\r\nIf I replace the void with String as the return type then it gives the following error\r\n\r\n&gt;Batching command method public abstract java.lang.String net.media.max.utils.LettuceCommandInterface.hmset(java.lang.String,java.util.Map&lt;java.lang.String, java.lang.String&gt;) must declare either a Future or void return type\r\n","title":"How to implement hmset in Lettuce Command Interface Commands","body":"<p>I am trying to invoke hmset command from Lettuce Command Interface Commands\nBut at runtime it gives error</p>\n<blockquote>\n<p>Command HMSET requires at least 3 parameters but method declares 2 parameter(s). Offending method: public abstract java.lang.Void net.media.max.utils.LettuceCommandInterface.hmset(java.lang.String,java.util.Map&lt;java.lang.String, java.lang.String&gt;)</p>\n</blockquote>\n<p>below is my class</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Map;\n\nimport io.lettuce.core.dynamic.Commands;\nimport io.lettuce.core.dynamic.annotation.Command;\nimport io.lettuce.core.dynamic.batch.BatchExecutor;\nimport io.lettuce.core.dynamic.batch.BatchSize;\n\n@BatchSize(1000)\npublic interface LettuceCommandInterface extends Commands, BatchExecutor {\n    @Command(&quot;HSET&quot;)\n    void hset(String key, String hashKey, String value);\n    \n    @Command(&quot;ZADD&quot;)\n    void zadd(String key, double score, String member);\n\n    @Command(&quot;SET&quot;)\n    void set(String key, String values);\n\n    @Command(&quot;hmset&quot;)\n    Void hmset(String key, Map&lt;String,String&gt; map);\n\n}\n</code></pre>\n<p>If I replace the void with String as the return type then it gives the following error</p>\n<blockquote>\n<p>Batching command method public abstract java.lang.String net.media.max.utils.LettuceCommandInterface.hmset(java.lang.String,java.util.Map&lt;java.lang.String, java.lang.String&gt;) must declare either a Future or void return type</p>\n</blockquote>\n"},{"tags":["java","api","post"],"comments":[{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":0,"creation_date":1682325999,"post_id":76089954,"comment_id":134191609,"body_markdown":"You have a concurrent access issue with regards to your storage. This has nothing to do with the REST requests. What is the code in `createProduct` and `updateProduct`?","body":"You have a concurrent access issue with regards to your storage. This has nothing to do with the REST requests. What is the code in <code>createProduct</code> and <code>updateProduct</code>?"},{"owner":{"account_id":28394905,"reputation":11,"user_id":21720110,"display_name":"theyesn"},"score":0,"creation_date":1682329012,"post_id":76089954,"comment_id":134192258,"body_markdown":"They don&#39;t exist, it mock code. They represent code that will create or update an asset in the base application using it&#39;s base code (we don&#39;t develop that). The problem we encounter now is that client is sending messages with the same itemID within milliseconds of eachother. Meaning that any checks we do (like the getProductByID check) will something take place at almost the same time. Two message could find that a product does not exist and will both create the product.","body":"They don&#39;t exist, it mock code. They represent code that will create or update an asset in the base application using it&#39;s base code (we don&#39;t develop that). The problem we encounter now is that client is sending messages with the same itemID within milliseconds of eachother. Meaning that any checks we do (like the getProductByID check) will something take place at almost the same time. Two message could find that a product does not exist and will both create the product."},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":1,"creation_date":1682331543,"post_id":76089954,"comment_id":134192828,"body_markdown":"&quot;We just need the code to handle fast requests that use the same ID and make sure they get processed in the order and not at the same time.&quot; - What prevents you from implementing this code?","body":"&quot;We just need the code to handle fast requests that use the same ID and make sure they get processed in the order and not at the same time.&quot; - What prevents you from implementing this code?"},{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":0,"creation_date":1682331857,"post_id":76089954,"comment_id":134192896,"body_markdown":"&quot;The problem we encounter now is that client is sending messages with the same itemID within milliseconds of eachother.&quot; If the problem is with the client then fix it there. The way I see it, the client can call whenever it wants and it&#39;s on the server to handle that. You can either not accept calls from the same client in a chosen duration, or make your code run concurrently properly. You can start by making those mocked methods `synchronized`, but there&#39;s not enough info to know what needs to be done.","body":"&quot;The problem we encounter now is that client is sending messages with the same itemID within milliseconds of eachother.&quot; If the problem is with the client then fix it there. The way I see it, the client can call whenever it wants and it&#39;s on the server to handle that. You can either not accept calls from the same client in a chosen duration, or make your code run concurrently properly. You can start by making those mocked methods <code>synchronized</code>, but there&#39;s not enough info to know what needs to be done."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682339592,"post_id":76089954,"comment_id":134194522,"body_markdown":"Of synchronized methods, you could insert and configure a &quot;web filter&quot; to the servlet and synchronized at that point.","body":"Of synchronized methods, you could insert and configure a &quot;web filter&quot; to the servlet and synchronized at that point."}],"owner":{"account_id":28394905,"reputation":11,"user_id":21720110,"display_name":"theyesn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682324667,"creation_date":1682324667,"question_id":76089954,"body_markdown":"So we are responsible for creating customizations in a third party application using their base code in Java and we need to create a POST API. With the POST a JSON message is send containing data an a product object, and in that JSON message you have the attribute &quot;ItemID&quot; which is its unique identifier. Once received our code with use this message to either create or update said object on our side in the base application. The base application has built an API library that we use for this, which for some reason does not allow more than one parameter for POST request (important for any possible solutions). The issue is that in testing we noticed that often times the client-side is POST multiple request miliseconds apart on the same object, and this causes the base application for work on the same obejct at the same time, causing conflicts, or creating the same obejct twice because the second request is faster at checking if the object existed than the first was at creating that object the first time. So this is (partly) the code that we wrote:\r\n\r\n\r\n```\r\nimport javax.annotation.Resource;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.ws.rs.Consumes;\r\nimport javax.ws.rs.core.MediaType;\r\nimport javax.ws.rs.POST;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\n\r\nimport org.codehaus.jettison.json.JSONArray;\r\nimport org.codehaus.jettison.json.JSONObject;\r\n\r\n    @POST\r\n    @Path(&quot;ObjectItem&quot;)\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public JSONObject processObjectItem(String JSON) throws Exception {\r\n        \r\n        JSONObject jData = new JSONObject(JSON);\r\n       \r\n        JSONArray jItems = jData.getJSONArray(&quot;Items&quot;);\r\n        JSONObject productItem = jItems.getJSONObject(0);\r\n        \r\n        Long id = productItem.getLong(&quot;ItemID&quot;);\r\n        Product productBean = new productBean(productItem);\r\n\r\n        \r\n        Asset product = getProductById(id);\r\n        if (product == null) {\r\n            createProduct(id, productItem);\r\n        } \r\n        else {\r\n            updateProduct(id, productItem);\r\n        }\r\n\r\n        JSONObject result = new JSONObject();\r\n        result.put(&quot;status&quot;, &quot;success&quot;);\r\n        result.put(&quot;message&quot;, &quot;Items processed successfully&quot;);\r\n        return result;\r\n    }\r\n```\r\n\r\nDoes anyone know how to best resolve conflicts like the one I described above? A way to put a POST request in a queue if the &quot;ItemID&quot; is already being processed?\r\n\r\n\r\nWe tried a Async method and a POST id that contains the ID in the path but the base application does not allow more an one parameters for POST methods. We just need the code to handle fast requests that use the same ID and make sure they get processed in the order and not at the same time.","title":"How to put a POST request on hold in Java if it contains a an ID that is already being processed","body":"<p>So we are responsible for creating customizations in a third party application using their base code in Java and we need to create a POST API. With the POST a JSON message is send containing data an a product object, and in that JSON message you have the attribute &quot;ItemID&quot; which is its unique identifier. Once received our code with use this message to either create or update said object on our side in the base application. The base application has built an API library that we use for this, which for some reason does not allow more than one parameter for POST request (important for any possible solutions). The issue is that in testing we noticed that often times the client-side is POST multiple request miliseconds apart on the same object, and this causes the base application for work on the same obejct at the same time, causing conflicts, or creating the same obejct twice because the second request is faster at checking if the object existed than the first was at creating that object the first time. So this is (partly) the code that we wrote:</p>\n<pre><code>import javax.annotation.Resource;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.ws.rs.Consumes;\nimport javax.ws.rs.core.MediaType;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\n\nimport org.codehaus.jettison.json.JSONArray;\nimport org.codehaus.jettison.json.JSONObject;\n\n    @POST\n    @Path(&quot;ObjectItem&quot;)\n    @Consumes(MediaType.APPLICATION_JSON)\n    @Produces(MediaType.APPLICATION_JSON)\n    public JSONObject processObjectItem(String JSON) throws Exception {\n        \n        JSONObject jData = new JSONObject(JSON);\n       \n        JSONArray jItems = jData.getJSONArray(&quot;Items&quot;);\n        JSONObject productItem = jItems.getJSONObject(0);\n        \n        Long id = productItem.getLong(&quot;ItemID&quot;);\n        Product productBean = new productBean(productItem);\n\n        \n        Asset product = getProductById(id);\n        if (product == null) {\n            createProduct(id, productItem);\n        } \n        else {\n            updateProduct(id, productItem);\n        }\n\n        JSONObject result = new JSONObject();\n        result.put(&quot;status&quot;, &quot;success&quot;);\n        result.put(&quot;message&quot;, &quot;Items processed successfully&quot;);\n        return result;\n    }\n</code></pre>\n<p>Does anyone know how to best resolve conflicts like the one I described above? A way to put a POST request in a queue if the &quot;ItemID&quot; is already being processed?</p>\n<p>We tried a Async method and a POST id that contains the ID in the path but the base application does not allow more an one parameters for POST methods. We just need the code to handle fast requests that use the same ID and make sure they get processed in the order and not at the same time.</p>\n"},{"tags":["java","kml","jak"],"comments":[{"owner":{"account_id":260424,"reputation":23080,"user_id":543969,"accept_rate":86,"display_name":"CodeMonkey"},"score":0,"creation_date":1681949714,"post_id":76032505,"comment_id":134140819,"body_markdown":"Call getAbstractView() method on placemark object using JAK API. Then use getLatitude() and getLongitude() methods in the LookAt object.","body":"Call getAbstractView() method on placemark object using JAK API. Then use getLatitude() and getLongitude() methods in the LookAt object."}],"answers":[{"tags":[],"owner":{"account_id":16770626,"reputation":65,"user_id":12123127,"display_name":"AliReza Abbasian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682324609,"creation_date":1682324609,"answer_id":76089950,"question_id":76032505,"body_markdown":"Thanks for the answer @CodeMonkey\r\n\r\nThe final answer is as follows:\r\n\r\n    Placemark placemark = (Placemark) folderFeature;\r\n    AbstractView abstractView = placemark.getAbstractView();\r\n       if (abstractView != null) {\r\n            if (abstractView instanceof LookAt) {\r\n                LookAt lookAt = (LookAt) abstractView;\r\n                lookAt.getLatitude();\r\n                lookAt.getLongitude();\r\n             }\r\n        }","title":"How to get LookAt data from KML file in Java","body":"<p>Thanks for the answer @CodeMonkey</p>\n<p>The final answer is as follows:</p>\n<pre><code>Placemark placemark = (Placemark) folderFeature;\nAbstractView abstractView = placemark.getAbstractView();\n   if (abstractView != null) {\n        if (abstractView instanceof LookAt) {\n            LookAt lookAt = (LookAt) abstractView;\n            lookAt.getLatitude();\n            lookAt.getLongitude();\n         }\n    }\n</code></pre>\n"}],"owner":{"account_id":16770626,"reputation":65,"user_id":12123127,"display_name":"AliReza Abbasian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76089950,"answer_count":1,"score":-1,"last_activity_date":1682324609,"creation_date":1681715507,"question_id":76032505,"body_markdown":"There is a tag called LookAt in the kml file. as below:\r\n\r\n    &lt;LookAt&gt;\r\n\t\t\t&lt;longitude&gt;51.36863708496094&lt;/longitude&gt;\r\n\t\t\t&lt;latitude&gt;35.7291434559867&lt;/latitude&gt;\r\n\t\t\t&lt;altitude&gt;0&lt;/altitude&gt;\r\n\t\t\t&lt;heading&gt;0&lt;/heading&gt;\r\n\t\t\t&lt;tilt&gt;0&lt;/tilt&gt;\r\n\t\t\t&lt;range&gt;0&lt;/range&gt;\r\n\t\t\t&lt;altitudeMode&gt;absolute&lt;/altitudeMode&gt;\r\n\t&lt;/LookAt&gt;\r\nI need to get the lat and long information of this tag.\r\nI also use the jak library.\r\nCan anyone help?","title":"How to get LookAt data from KML file in Java","body":"<p>There is a tag called LookAt in the kml file. as below:</p>\n<pre><code>&lt;LookAt&gt;\n        &lt;longitude&gt;51.36863708496094&lt;/longitude&gt;\n        &lt;latitude&gt;35.7291434559867&lt;/latitude&gt;\n        &lt;altitude&gt;0&lt;/altitude&gt;\n        &lt;heading&gt;0&lt;/heading&gt;\n        &lt;tilt&gt;0&lt;/tilt&gt;\n        &lt;range&gt;0&lt;/range&gt;\n        &lt;altitudeMode&gt;absolute&lt;/altitudeMode&gt;\n&lt;/LookAt&gt;\n</code></pre>\n<p>I need to get the lat and long information of this tag.\nI also use the jak library.\nCan anyone help?</p>\n"},{"tags":["java","weblogic","soa","jdeveloper"],"answers":[{"comments":[{"owner":{"account_id":12565981,"reputation":13,"user_id":9141969,"display_name":"gosphalt"},"score":0,"creation_date":1682151301,"post_id":76078520,"comment_id":134172958,"body_markdown":"thanks for the help, but no change to the output, sorry","body":"thanks for the help, but no change to the output, sorry"},{"owner":{"account_id":219391,"reputation":621,"user_id":476264,"accept_rate":100,"display_name":"PavanDevarakonda"},"score":0,"creation_date":1682151809,"post_id":76078520,"comment_id":134173003,"body_markdown":"gosphalt Could you please share the command output for `dir %JAVA_HOME%\\jre`","body":"gosphalt Could you please share the command output for <code>dir %JAVA_HOME%\\jre</code>"},{"owner":{"account_id":12565981,"reputation":13,"user_id":9141969,"display_name":"gosphalt"},"score":0,"creation_date":1682154402,"post_id":76078520,"comment_id":134173236,"body_markdown":"`Directory of C:\\WORK_DIR\\Apps\\jdk1.8.0_211\\jre\n\n03/05/2019  14:06    &lt;DIR&gt;          .\n03/05/2019  14:06    &lt;DIR&gt;          ..\n03/05/2019  14:06    &lt;DIR&gt;          bin\n03/05/2019  14:06             3.244 COPYRIGHT\n03/05/2019  14:07    &lt;DIR&gt;          lib\n03/05/2019  14:06                44 LICENSE\n03/05/2019  14:06                46 README.txt\n03/05/2019  14:06           112.748 THIRDPARTYLICENSEREADME-JAVAFX.txt\n03/05/2019  14:06           149.725 THIRDPARTYLICENSEREADME.txt\n03/05/2019  14:06               955 Welcome.html`","body":"<code>Directory of C:\\WORK_DIR\\Apps\\jdk1.8.0_211\\jre  03&#47;05&#47;2019  14:06    &lt;DIR&gt;          . 03&#47;05&#47;2019  14:06    &lt;DIR&gt;          .. 03&#47;05&#47;2019  14:06    &lt;DIR&gt;          bin 03&#47;05&#47;2019  14:06             3.244 COPYRIGHT 03&#47;05&#47;2019  14:07    &lt;DIR&gt;          lib 03&#47;05&#47;2019  14:06                44 LICENSE 03&#47;05&#47;2019  14:06                46 README.txt 03&#47;05&#47;2019  14:06           112.748 THIRDPARTYLICENSEREADME-JAVAFX.txt 03&#47;05&#47;2019  14:06           149.725 THIRDPARTYLICENSEREADME.txt 03&#47;05&#47;2019  14:06               955 Welcome.html</code>"},{"owner":{"account_id":219391,"reputation":621,"user_id":476264,"accept_rate":100,"display_name":"PavanDevarakonda"},"score":0,"creation_date":1682172928,"post_id":76078520,"comment_id":134175325,"body_markdown":"Could you only try with the following command :  Open the CMD in freshly then `java  -jar fmw_12.2.1.4.0_soa_quickstart.jar`","body":"Could you only try with the following command :  Open the CMD in freshly then <code>java  -jar fmw_12.2.1.4.0_soa_quickstart.jar</code>"}],"tags":[],"owner":{"account_id":219391,"reputation":621,"user_id":476264,"accept_rate":100,"display_name":"PavanDevarakonda"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682229163,"creation_date":1682148946,"answer_id":76078520,"question_id":76071133,"body_markdown":"The error may be cause due to your existing eclipse or some other editor settings overriding!\r\n \r\nRun your script, You can verify the path with dir command in the CMD window, where it is trying to look for %JAVA_HOME%\\jre is existing or not\r\n```cmd\r\ndir %JAVA_HOME%\\jre\r\n```\r\nIf above command returns the content of the jre folder it is good. Otherwise, \r\nalternatively try by setting up the CLASSPATH to null.\r\n`SET CLASSPATH=&quot;&quot;`\r\n\r\nTry 2: \r\n```bat\r\n%JAVA_HOME%\\bin\\java.exe -jar fmw_12.2.1.4.0_soa_quickstart.jar\r\n```\r\nDid you tried with the latest virion of JDK?\r\nPlease respond back with what happen when you used above suggestions.","title":"Error java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory trying to install Oracle SOA Suite 12.2.1.4.0","body":"<p>The error may be cause due to your existing eclipse or some other editor settings overriding!</p>\n<p>Run your script, You can verify the path with dir command in the CMD window, where it is trying to look for %JAVA_HOME%\\jre is existing or not</p>\n<pre><code>dir %JAVA_HOME%\\jre\n</code></pre>\n<p>If above command returns the content of the jre folder it is good. Otherwise,\nalternatively try by setting up the CLASSPATH to null.\n<code>SET CLASSPATH=&quot;&quot;</code></p>\n<p>Try 2:</p>\n<pre><code>%JAVA_HOME%\\bin\\java.exe -jar fmw_12.2.1.4.0_soa_quickstart.jar\n</code></pre>\n<p>Did you tried with the latest virion of JDK?\nPlease respond back with what happen when you used above suggestions.</p>\n"},{"comments":[{"owner":{"account_id":12565981,"reputation":13,"user_id":9141969,"display_name":"gosphalt"},"score":0,"creation_date":1682350514,"post_id":76089941,"comment_id":134197483,"body_markdown":"It was that! Thank you so much.","body":"It was that! Thank you so much."}],"tags":[],"owner":{"account_id":8415430,"reputation":2566,"user_id":6316044,"display_name":"Emmanuel Collin"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682324524,"creation_date":1682324524,"answer_id":76089941,"question_id":76071133,"body_markdown":"The issue comes from the &quot;+&quot; character in your installation path : INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar\r\nMove and run the jar file from another path where there is no special chararcters.\r\n","title":"Error java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory trying to install Oracle SOA Suite 12.2.1.4.0","body":"<p>The issue comes from the &quot;+&quot; character in your installation path : INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar\nMove and run the jar file from another path where there is no special chararcters.</p>\n"}],"owner":{"account_id":12565981,"reputation":13,"user_id":9141969,"display_name":"gosphalt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76089941,"answer_count":2,"score":1,"last_activity_date":1682324524,"creation_date":1682064027,"question_id":76071133,"body_markdown":"I&#39;m trying to install Oracle SOA Suite 12.2.1.4.0 on my work laptop.\r\nI&#39;m using a script that sets enviroment variables, like java path, so I&#39;m using a particular version (jdk1.8.0_211)\r\n\r\nThe script is this:\r\n\r\n```\r\nset DEVROOT=C:\\WORKINGDIR\r\nset M2_HOME=%DEVROOT%\\Apps\\apache-maven-3.2.5\r\nset JAVA_HOME=%DEVROOT%\\Apps\\jdk1.8.0_211\r\nset PATH=%JAVA_HOME%\\bin;%M2_HOME%\\bin;%PATH%\r\n\r\njava -verbose -jar fmw_12.2.1.4.0_soa_quickstart.jar`\r\n```\r\n\r\nIs there something I can do about?\r\n\r\n\r\nThis is the log:\r\n\r\n```\r\n[Opened C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n...\r\n...\r\n[Loaded com.oracle.xmlns.oui.options.GroupType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.xmlns.oui.options.OptionType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.xmlns.oui.options.OperationType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.xmlns.oui.options.ReferenceType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.xmlns.oui.options.OperationOptionType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.xmlns.oui.options.OptionsInfoType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.xmlns.oui.options.OptionsStructureType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.xmlns.oui.options.OptionsType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded javax.xml.bind.JAXBContext from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded javax.xml.bind.ContextFinder from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded javax.xml.bind.GetPropertyAction from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.util.logging.LogRecord from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.lang.Throwable$PrintStreamOrWriter from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.lang.Throwable$WrappedPrintStream from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.util.IdentityHashMap$KeySet from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\ncom.oracle.cie.nextgen.common.inputs.impl.InputHandlerException: com.oracle.cie.common.dao.DataHandlerException: javax.xml.bind.JAXBException\r\n - with linked exception:\r\n[java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory]\r\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.getOptionsInfoDao(OptionsParser.java:550)\r\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.parseOptionsDao(OptionsParser.java:219)\r\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.&lt;init&gt;(OptionsParser.java:142)\r\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.getInstance(OptionsParser.java:129)\r\n        at com.oracle.cie.nextgen.common.inputs.impl.OUIOptions.&lt;init&gt;(OUIOptions.java:59)\r\n        at com.oracle.cie.nextgen.common.inputs.impl.InputsImpl.&lt;init&gt;(InputsImpl.java:53)\r\n        at com.oracle.cie.nextgen.common.inputs.impl.InputsImpl.getInstance(InputsImpl.java:60)\r\n        at com.oracle.cie.nextgen.common.inputs.helpers.InputHandler.getInputs(InputHandler.java:41)\r\n        at com.oracle.cie.nextgen.launcher.Launcher.processCommandLineArgs(Launcher.java:3261)\r\n        at com.oracle.cie.nextgen.launcher.Launcher.execute(Launcher.java:4035)\r\n        at com.oracle.cie.nextgen.launcher.Launcher.main(Launcher.java:3969)\r\nCaused by: com.oracle.cie.common.dao.DataHandlerException: javax.xml.bind.JAXBException\r\n - with linked exception:\r\n[java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory]\r\n        at com.oracle.cie.common.dao.jaxb.JaxbDataHandlerSpiImpl.getUnmarshaller(JaxbDataHandlerSpiImpl.java:359)\r\n        at com.oracle.cie.common.dao.jaxb.JaxbDataHandlerSpiImpl.create(JaxbDataHandlerSpiImpl.java:154)\r\n        at com.oracle.cie.gdr.helpers.DaoHelper.parse(DaoHelper.java:224)\r\n        at com.oracle.cie.gdr.helpers.DaoHelper.getRootWrapper(DaoHelper.java:693)\r\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.getOptionsInfoDao(OptionsParser.java:546)\r\n        ... 10 more\r\nCaused by: javax.xml.bind.JAXBException\r\n - with linked exception:\r\n[java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory]\r\n        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:226)\r\n        at javax.xml.bind.ContextFinder.find(ContextFinder.java:390)\r\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:641)\r\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)\r\n        at com.oracle.cie.common.dao.jaxb.JaxbDataHandlerSpiImpl.getUnmarshaller(JaxbDataHandlerSpiImpl.java:340)\r\n        ... 14 more\r\nCaused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        at javax.xml.bind.ContextFinder.safeLoadClass(ContextFinder.java:579)\r\n        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:224)\r\n        ... 18 more\r\n[Loaded com.oracle.cie.nextgen.common.inputs.parser.CommandLineParser from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.cie.nextgen.common.utils.Util from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded java.io.FileFilter from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.util.LinkedHashSet from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.lang.Throwable$WrappedPrintWriter from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded com.oracle.cie.nextgen.launcher.NLS from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.cie.common.util.ResourceBundleManager from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded com.oracle.cie.common.util.ResourceBundleManager$ResourceNamespace from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\r\n[Loaded sun.util.ResourceBundleEnumeration from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\ncom.oracle.cie.nextgen.common.inputs.impl.InputHandlerException: com.oracle.cie.nextgen.common.inputs.impl.InputHandlerException: com.oracle.cie.common.dao.DataHandlerException: javax.xml.bind.JAXBException\r\n - with linked exception:\r\n[java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory]\r\n[Loaded java.text.MessageFormat from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.util.Formatter$FormatString from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.util.Formatter$FixedString from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n\r\nPress Enter to exit\r\n[Loaded java.util.IdentityHashMap$IdentityHashMapIterator from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n[Loaded java.util.IdentityHashMap$KeyIterator from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\r\n\r\n```\r\n\r\nI&#39;ve used a lot of jdk version (1.7 and 1.8), but all of that got me on this error.\r\nI&#39;ve cleand every java reference on my pc and reinstalled lots of times.","title":"Error java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory trying to install Oracle SOA Suite 12.2.1.4.0","body":"<p>I'm trying to install Oracle SOA Suite 12.2.1.4.0 on my work laptop.\nI'm using a script that sets enviroment variables, like java path, so I'm using a particular version (jdk1.8.0_211)</p>\n<p>The script is this:</p>\n<pre><code>set DEVROOT=C:\\WORKINGDIR\nset M2_HOME=%DEVROOT%\\Apps\\apache-maven-3.2.5\nset JAVA_HOME=%DEVROOT%\\Apps\\jdk1.8.0_211\nset PATH=%JAVA_HOME%\\bin;%M2_HOME%\\bin;%PATH%\n\njava -verbose -jar fmw_12.2.1.4.0_soa_quickstart.jar`\n</code></pre>\n<p>Is there something I can do about?</p>\n<p>This is the log:</p>\n<pre><code>[Opened C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n...\n...\n[Loaded com.oracle.xmlns.oui.options.GroupType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.xmlns.oui.options.OptionType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.xmlns.oui.options.OperationType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.xmlns.oui.options.ReferenceType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.xmlns.oui.options.OperationOptionType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.xmlns.oui.options.OptionsInfoType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.xmlns.oui.options.OptionsStructureType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.xmlns.oui.options.OptionsType from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded javax.xml.bind.JAXBContext from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded javax.xml.bind.ContextFinder from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded javax.xml.bind.GetPropertyAction from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.util.logging.LogRecord from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.lang.Throwable$PrintStreamOrWriter from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.lang.Throwable$WrappedPrintStream from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.util.IdentityHashMap$KeySet from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\ncom.oracle.cie.nextgen.common.inputs.impl.InputHandlerException: com.oracle.cie.common.dao.DataHandlerException: javax.xml.bind.JAXBException\n - with linked exception:\n[java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory]\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.getOptionsInfoDao(OptionsParser.java:550)\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.parseOptionsDao(OptionsParser.java:219)\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.&lt;init&gt;(OptionsParser.java:142)\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.getInstance(OptionsParser.java:129)\n        at com.oracle.cie.nextgen.common.inputs.impl.OUIOptions.&lt;init&gt;(OUIOptions.java:59)\n        at com.oracle.cie.nextgen.common.inputs.impl.InputsImpl.&lt;init&gt;(InputsImpl.java:53)\n        at com.oracle.cie.nextgen.common.inputs.impl.InputsImpl.getInstance(InputsImpl.java:60)\n        at com.oracle.cie.nextgen.common.inputs.helpers.InputHandler.getInputs(InputHandler.java:41)\n        at com.oracle.cie.nextgen.launcher.Launcher.processCommandLineArgs(Launcher.java:3261)\n        at com.oracle.cie.nextgen.launcher.Launcher.execute(Launcher.java:4035)\n        at com.oracle.cie.nextgen.launcher.Launcher.main(Launcher.java:3969)\nCaused by: com.oracle.cie.common.dao.DataHandlerException: javax.xml.bind.JAXBException\n - with linked exception:\n[java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory]\n        at com.oracle.cie.common.dao.jaxb.JaxbDataHandlerSpiImpl.getUnmarshaller(JaxbDataHandlerSpiImpl.java:359)\n        at com.oracle.cie.common.dao.jaxb.JaxbDataHandlerSpiImpl.create(JaxbDataHandlerSpiImpl.java:154)\n        at com.oracle.cie.gdr.helpers.DaoHelper.parse(DaoHelper.java:224)\n        at com.oracle.cie.gdr.helpers.DaoHelper.getRootWrapper(DaoHelper.java:693)\n        at com.oracle.cie.nextgen.common.inputs.parser.OptionsParser.getOptionsInfoDao(OptionsParser.java:546)\n        ... 10 more\nCaused by: javax.xml.bind.JAXBException\n - with linked exception:\n[java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory]\n        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:226)\n        at javax.xml.bind.ContextFinder.find(ContextFinder.java:390)\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:641)\n        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)\n        at com.oracle.cie.common.dao.jaxb.JaxbDataHandlerSpiImpl.getUnmarshaller(JaxbDataHandlerSpiImpl.java:340)\n        ... 14 more\nCaused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        at javax.xml.bind.ContextFinder.safeLoadClass(ContextFinder.java:579)\n        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:224)\n        ... 18 more\n[Loaded com.oracle.cie.nextgen.common.inputs.parser.CommandLineParser from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.cie.nextgen.common.utils.Util from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded java.io.FileFilter from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.util.LinkedHashSet from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.lang.Throwable$WrappedPrintWriter from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded com.oracle.cie.nextgen.launcher.NLS from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.cie.common.util.ResourceBundleManager from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded com.oracle.cie.common.util.ResourceBundleManager$ResourceNamespace from INSTALLER_PATH/Software/jdev+soa12/fmw_12.2.1.4.0_soa_quickstart.jar]\n[Loaded sun.util.ResourceBundleEnumeration from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\ncom.oracle.cie.nextgen.common.inputs.impl.InputHandlerException: com.oracle.cie.nextgen.common.inputs.impl.InputHandlerException: com.oracle.cie.common.dao.DataHandlerException: javax.xml.bind.JAXBException\n - with linked exception:\n[java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory]\n[Loaded java.text.MessageFormat from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.util.Formatter$FormatString from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.util.Formatter$FixedString from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n\nPress Enter to exit\n[Loaded java.util.IdentityHashMap$IdentityHashMapIterator from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n[Loaded java.util.IdentityHashMap$KeyIterator from C:\\WORKINGDIR\\Apps\\jdk1.8.0_211\\jre\\lib\\rt.jar]\n\n</code></pre>\n<p>I've used a lot of jdk version (1.7 and 1.8), but all of that got me on this error.\nI've cleand every java reference on my pc and reinstalled lots of times.</p>\n"},{"tags":["java","spring","hibernate","jackson"],"comments":[{"owner":{"account_id":26929571,"reputation":25,"user_id":20502277,"display_name":"velovatik"},"score":0,"creation_date":1682325117,"post_id":76089819,"comment_id":134191416,"body_markdown":"@fascynacja no, I wrote in last paragraph that I asked this question but noting helped me","body":"@fascynacja no, I wrote in last paragraph that I asked this question but noting helped me"},{"owner":{"account_id":15102634,"reputation":338,"user_id":10899197,"display_name":"Tr1monster"},"score":0,"creation_date":1682326229,"post_id":76089819,"comment_id":134191646,"body_markdown":"There is a concept called Open Session in View. This could be the troublemaker in this scenario. I&#39;m not sure but i think it is worth a try.","body":"There is a concept called Open Session in View. This could be the troublemaker in this scenario. I&#39;m not sure but i think it is worth a try."}],"owner":{"account_id":26929571,"reputation":25,"user_id":20502277,"display_name":"velovatik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682324137,"creation_date":1682323512,"question_id":76089819,"body_markdown":"\r\n [![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/vE3Mt.png\r\n\r\nI have two related tables Sizes and Goods\r\nOne good can have many sizes\r\nWhen I send request for editing one of fields of good, It returns duplicated sizes object\r\n```\r\n{\r\n    &quot;id&quot;: 10,\r\n    &quot;title&quot;: &quot;Barnaul 2&quot;,\r\n    &quot;sex&quot;: &quot;CHILD&quot;,\r\n    &quot;manufacturer&quot;: {\r\n      &quot;id&quot;: 1,\r\n      &quot;manufacturerName&quot;: &quot;Ralf&quot;,\r\n      &quot;address&quot;: &quot;Moscow&quot;,\r\n      &quot;telephone&quot;: &quot;9-999-999-99-99&quot;\r\n    },\r\n    &quot;manufacturerId&quot;: 1,\r\n    &quot;sizes&quot;: [\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      },\r\n      {\r\n        &quot;size&quot;: 37,\r\n        &quot;quantity&quot;: 2\r\n      }\r\n    ]\r\n  }\r\n```\r\nFor example, I have 37 and 39 sizes and I change one of them for another (e.g. 40) In result I will have:\r\n```\r\n&quot;sizes&quot;: [\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      },\r\n      {\r\n        &quot;size&quot;: 37,\r\n        &quot;quantity&quot;: 2\r\n      },\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      },\r\n      {\r\n        &quot;size&quot;: 40,\r\n        &quot;quantity&quot;: 2\r\n      }\r\n    ]\r\n  }\r\n```\r\nAnd there are my entities\r\n\r\nGood:\r\n```\r\n    @Entity\r\n    @Table(name = &quot;goods&quot;)\r\n    public class Good {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;Title&quot;)\r\n    private String title;\r\n\r\n//    @Enumerated(EnumType.STRING)\r\n//    @Column(name = &quot;sex&quot;)\r\n//    private sexType sexType;\r\n\r\n    @Column(name = &quot;sex&quot;)\r\n    private String sex;\r\n\r\n    /**\r\n     * proved and it actually works!\r\n     */\r\n    //@JsonManagedReference\r\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n    CascadeType.REFRESH, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;ManufacturerId&quot;, insertable = false, updatable = false)\r\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\r\n\r\n    @Column(name = &quot;manufacturerId&quot;)\r\n    private int manufacturerId;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;good&quot;)//Uni-directional reference to size array\r\n    List&lt;Size&gt; sizes; //Change CascadeType in case delete size cause deletion of Good (in future)\r\n\r\n    public void addSizeToGood(Size size) {\r\n        if (sizes == null) sizes = new ArrayList&lt;&gt;();\r\n        sizes.add(size);\r\n        size.setGood(this);\r\n    }\r\n\r\n    //Constructors\r\n    public Good() {\r\n\r\n    }\r\n\r\n    public Good(String title, String sex, Manufacturer manufacturer, List&lt;Size&gt; sizes) {\r\n        this.title = title;\r\n        this.sex = sex;\r\n        this.manufacturer = manufacturer;\r\n        this.sizes = sizes;\r\n    }\r\n```\r\nSize:\r\n```\r\n@Entity\r\n@Table(name = &quot;sizes&quot;)\r\npublic class Size {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @JsonIgnore\r\n    private int id;\r\n\r\n    @Column(name = &quot;Size&quot;)\r\n    private int size;\r\n\r\n    @Column(name = &quot;Quantity&quot;)\r\n    private int quantity;\r\n\r\n    @Column(name = &quot;goodid&quot;, insertable = false, updatable = false) //Check else\r\n    private int goodId;\r\n\r\n    @JsonBackReference\r\n    @ManyToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;goodId&quot;)\r\n    Good good;\r\n\r\n    //Constructors\r\n    public Size() {\r\n\r\n    }\r\n\r\n    public Size(int size, int quantity) {\r\n        this.size = size;\r\n        this.quantity = quantity;\r\n    }\r\n\r\n```\r\nDAO:\r\n```\r\n@Override\r\n    public void saveGood(Good good) {\r\n        Session session = entityManager.unwrap(Session.class);\r\n        System.out.println(good);\r\n        session.merge(good); //SaveOrUpdate substitute\r\n    }\r\n```\r\nController:\r\n```\r\n@PatchMapping(&quot;/goods&quot;)\r\n    public Good updateGood(@RequestBody Good good) {\r\n        goodService.saveGood(good);\r\n        return good;\r\n    }\r\n```\r\nI have two ideas, but I don&#39;t know, how to contribute them:\r\n1. Somehow add deleting of previos fields and write new size object\r\n2. Change rules for editing\r\n\r\nI asked this question ~5 days ago, but there weren&#39;t working advice","title":"Hibernate duplicates cols in table with PUT request","body":"<p><a href=\"https://i.stack.imgur.com/vE3Mt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vE3Mt.png\" alt=\"enter image description here\" /></a></p>\n<p>I have two related tables Sizes and Goods\nOne good can have many sizes\nWhen I send request for editing one of fields of good, It returns duplicated sizes object</p>\n<pre><code>{\n    &quot;id&quot;: 10,\n    &quot;title&quot;: &quot;Barnaul 2&quot;,\n    &quot;sex&quot;: &quot;CHILD&quot;,\n    &quot;manufacturer&quot;: {\n      &quot;id&quot;: 1,\n      &quot;manufacturerName&quot;: &quot;Ralf&quot;,\n      &quot;address&quot;: &quot;Moscow&quot;,\n      &quot;telephone&quot;: &quot;9-999-999-99-99&quot;\n    },\n    &quot;manufacturerId&quot;: 1,\n    &quot;sizes&quot;: [\n      {\n        &quot;size&quot;: 39,\n        &quot;quantity&quot;: 4\n      },\n      {\n        &quot;size&quot;: 37,\n        &quot;quantity&quot;: 2\n      }\n    ]\n  }\n</code></pre>\n<p>For example, I have 37 and 39 sizes and I change one of them for another (e.g. 40) In result I will have:</p>\n<pre><code>&quot;sizes&quot;: [\n      {\n        &quot;size&quot;: 39,\n        &quot;quantity&quot;: 4\n      },\n      {\n        &quot;size&quot;: 37,\n        &quot;quantity&quot;: 2\n      },\n      {\n        &quot;size&quot;: 39,\n        &quot;quantity&quot;: 4\n      },\n      {\n        &quot;size&quot;: 40,\n        &quot;quantity&quot;: 2\n      }\n    ]\n  }\n</code></pre>\n<p>And there are my entities</p>\n<p>Good:</p>\n<pre><code>    @Entity\n    @Table(name = &quot;goods&quot;)\n    public class Good {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;Title&quot;)\n    private String title;\n\n//    @Enumerated(EnumType.STRING)\n//    @Column(name = &quot;sex&quot;)\n//    private sexType sexType;\n\n    @Column(name = &quot;sex&quot;)\n    private String sex;\n\n    /**\n     * proved and it actually works!\n     */\n    //@JsonManagedReference\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n    CascadeType.REFRESH, CascadeType.MERGE})\n    @JoinColumn(name = &quot;ManufacturerId&quot;, insertable = false, updatable = false)\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\n\n    @Column(name = &quot;manufacturerId&quot;)\n    private int manufacturerId;\n\n    @JsonManagedReference\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;good&quot;)//Uni-directional reference to size array\n    List&lt;Size&gt; sizes; //Change CascadeType in case delete size cause deletion of Good (in future)\n\n    public void addSizeToGood(Size size) {\n        if (sizes == null) sizes = new ArrayList&lt;&gt;();\n        sizes.add(size);\n        size.setGood(this);\n    }\n\n    //Constructors\n    public Good() {\n\n    }\n\n    public Good(String title, String sex, Manufacturer manufacturer, List&lt;Size&gt; sizes) {\n        this.title = title;\n        this.sex = sex;\n        this.manufacturer = manufacturer;\n        this.sizes = sizes;\n    }\n</code></pre>\n<p>Size:</p>\n<pre><code>@Entity\n@Table(name = &quot;sizes&quot;)\npublic class Size {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @JsonIgnore\n    private int id;\n\n    @Column(name = &quot;Size&quot;)\n    private int size;\n\n    @Column(name = &quot;Quantity&quot;)\n    private int quantity;\n\n    @Column(name = &quot;goodid&quot;, insertable = false, updatable = false) //Check else\n    private int goodId;\n\n    @JsonBackReference\n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;goodId&quot;)\n    Good good;\n\n    //Constructors\n    public Size() {\n\n    }\n\n    public Size(int size, int quantity) {\n        this.size = size;\n        this.quantity = quantity;\n    }\n\n</code></pre>\n<p>DAO:</p>\n<pre><code>@Override\n    public void saveGood(Good good) {\n        Session session = entityManager.unwrap(Session.class);\n        System.out.println(good);\n        session.merge(good); //SaveOrUpdate substitute\n    }\n</code></pre>\n<p>Controller:</p>\n<pre><code>@PatchMapping(&quot;/goods&quot;)\n    public Good updateGood(@RequestBody Good good) {\n        goodService.saveGood(good);\n        return good;\n    }\n</code></pre>\n<p>I have two ideas, but I don't know, how to contribute them:</p>\n<ol>\n<li>Somehow add deleting of previos fields and write new size object</li>\n<li>Change rules for editing</li>\n</ol>\n<p>I asked this question ~5 days ago, but there weren't working advice</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682323788,"post_id":76089758,"comment_id":134191138,"body_markdown":"The JavaScript engine was removed in Java 15. Also, I&#39;m really wondering why you&#39;re programming this in JavaScript inside Java, instead of programming it purely in Java.","body":"The JavaScript engine was removed in Java 15. Also, I&#39;m really wondering why you&#39;re programming this in JavaScript inside Java, instead of programming it purely in Java."},{"owner":{"account_id":25363279,"reputation":1,"user_id":19178197,"display_name":"Renlyze"},"score":0,"creation_date":1682324045,"post_id":76089758,"comment_id":134191204,"body_markdown":"this is how we are being taught in school and regarding javascript engine, I just didn&#39;t know it was removed","body":"this is how we are being taught in school and regarding javascript engine, I just didn&#39;t know it was removed"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682324144,"post_id":76089758,"comment_id":134191224,"body_markdown":"Switching to, for example, Java 11 will likely make it work (I&#39;m not 100% sure though).","body":"Switching to, for example, Java 11 will likely make it work (I&#39;m not 100% sure though)."},{"owner":{"account_id":25363279,"reputation":1,"user_id":19178197,"display_name":"Renlyze"},"score":0,"creation_date":1682324736,"post_id":76089758,"comment_id":134191330,"body_markdown":"Do you know or can you point me towards any other method in order to get the output i am looking for?","body":"Do you know or can you point me towards any other method in order to get the output i am looking for?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1682325322,"post_id":76089758,"comment_id":134191465,"body_markdown":"If you use java 11 then you should be able to use the javascript script engine. Did you try that? You can download either java 11 or java 8 lts versions and they have nashorn still.","body":"If you use java 11 then you should be able to use the javascript script engine. Did you try that? You can download either java 11 or java 8 lts versions and they have nashorn still."},{"owner":{"account_id":25363279,"reputation":1,"user_id":19178197,"display_name":"Renlyze"},"score":0,"creation_date":1682326107,"post_id":76089758,"comment_id":134191623,"body_markdown":"yea I tried but the output I get looks like this\nWarning: Nashorn engine is planned to be removed from a future JDK release\nWarning: Nashorn engine is planned to be removed from a future JDK release\n\n\n*** NEWTON RAPHSON METHOD IMPLEMENTATION ***\njavax.script.ScriptException: ReferenceError: &quot;x0&quot; is not defined in &lt;eval&gt; at line num","body":"yea I tried but the output I get looks like this Warning: Nashorn engine is planned to be removed from a future JDK release Warning: Nashorn engine is planned to be removed from a future JDK release   *** NEWTON RAPHSON METHOD IMPLEMENTATION *** javax.script.ScriptException: ReferenceError: &quot;x0&quot; is not defined in &lt;eval&gt; at line num"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1682329299,"post_id":76089758,"comment_id":134192329,"body_markdown":"Great, then the javascript is working and you have new errors to deal with. The warning is just that, a warning because, as you have seen, it is going to be removed.","body":"Great, then the javascript is working and you have new errors to deal with. The warning is just that, a warning because, as you have seen, it is going to be removed."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1682329436,"post_id":76089758,"comment_id":134192365,"body_markdown":"You haven&#39;t defined `x0` in the script you are using. `gFunc + &quot;(x0)&quot;` that looks broken. It seems you don&#39;t know how to use javascript, you need to call your function with different arguments. Maybe you should ask a new question where you just try to call javascript from java with changing arguments? This is really confusing to pick through at the moment.","body":"You haven&#39;t defined <code>x0</code> in the script you are using. <code>gFunc + &quot;(x0)&quot;</code> that looks broken. It seems you don&#39;t know how to use javascript, you need to call your function with different arguments. Maybe you should ask a new question where you just try to call javascript from java with changing arguments? This is really confusing to pick through at the moment."},{"owner":{"account_id":25363279,"reputation":1,"user_id":19178197,"display_name":"Renlyze"},"score":0,"creation_date":1682383775,"post_id":76089758,"comment_id":134203356,"body_markdown":"Yea I think I&#39;ll just scrap this one and start over, its gotten very confusing. Appreciate your help though!","body":"Yea I think I&#39;ll just scrap this one and start over, its gotten very confusing. Appreciate your help though!"}],"owner":{"account_id":25363279,"reputation":1,"user_id":19178197,"display_name":"Renlyze"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682323523,"answer_count":0,"score":0,"last_activity_date":1682323729,"creation_date":1682323174,"question_id":76089758,"body_markdown":"I have this newton Raphson code that asks the user for the function, the derivative of the function, the initial guess, the tolerance for the error and the maximum iteration. The output that I am expecting is the iteration of the calculation up until it either reaches the root or up until the placed maximum number of iteration that is set by the user. Still learning java so any help would be greatly appreciated\r\n\r\nthis is the code:\r\n```\r\nimport javax.script.ScriptEngine;\r\nimport javax.script.ScriptEngineManager;\r\nimport javax.script.ScriptException;\r\n\r\npublic class NewtonRaphson {\r\n    private static ScriptEngine engine;\r\n\r\n    public static void main(String[] args) {\r\n        String f = &quot;Enter function f(x): &quot;;\r\n        String g = &quot;Enter derivative of f(x): &quot;;\r\n        String x0 = &quot;Enter Guess: &quot;;\r\n        String e = &quot;Tolerable Error: &quot;;\r\n        String N = &quot;Maximum Step: &quot;;\r\n\r\n        String func = getUserInput(f);\r\n        String der = getUserInput(g);\r\n        double guess = Double.parseDouble(getUserInput(x0));\r\n        double error = Double.parseDouble(getUserInput(e));\r\n        int maxSteps = Integer.parseInt(getUserInput(N));\r\n\r\n        newtonRaphson(func, der, guess, error, maxSteps);\r\n    }\r\n\r\n    public static void newtonRaphson(String f, String g, double x0, double e, int N) {\r\n        try {\r\n            engine = new ScriptEngineManager().getEngineByName(&quot;JavaScript&quot;);\r\n\r\n            String gFunc = &quot;function(x) { return &quot; + g + &quot;; }&quot;;\r\n            engine.eval(gFunc);\r\n\r\n            System.out.println(&quot;\\n\\n*** NEWTON RAPHSON METHOD IMPLEMENTATION ***&quot;);\r\n            int step = 1;\r\n            int flag = 1;\r\n            boolean condition = true;\r\n            while (condition) {\r\n                if (Double.compare((Double) engine.eval(gFunc + &quot;(x0)&quot;), 0.0) == 0) {\r\n                    System.out.println(&quot;Divide by zero error!&quot;);\r\n                    break;\r\n                }\r\n\r\n                String fEval = f.replace(&quot;x&quot;, Double.toString(x0));\r\n                double fResult = (double) engine.eval(fEval);\r\n\r\n                String gEval = g.replace(&quot;x&quot;, Double.toString(x0));\r\n                double gResult = (double) engine.eval(gEval);\r\n\r\n                double x1 = x0 - fResult / gResult;\r\n\r\n                System.out.printf(&quot;Iteration-%d, x1 = %0.6f and f(x1) = %0.6f\\n&quot;, step, x1, fResult);\r\n                x0 = x1;\r\n                step++;\r\n\r\n                if (step &gt; N) {\r\n                    flag = 0;\r\n                    break;\r\n                }\r\n\r\n                condition = Math.abs(fResult) &gt; e;\r\n            }\r\n\r\n            if (flag == 1) {\r\n                System.out.printf(&quot;\\nRequired root is: %0.8f\\n&quot;, x0);\r\n            } else {\r\n                System.out.println(&quot;\\nNot Convergent.&quot;);\r\n            }\r\n        } catch (ScriptException ex) {\r\n            System.out.println(ex);\r\n        }\r\n    }\r\n\r\n    private static String getUserInput(String message) {\r\n        java.util.Scanner scanner = new java.util.Scanner(System.in);\r\n        System.out.print(message);\r\n        return scanner.nextLine();\r\n    }\r\n}\r\n```\r\n\r\n\r\nand this is the usual result:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;javax.script.ScriptEngine.eval(String)&quot; because &quot;NewtonRaphson.engine&quot; is null\r\n\tat NewtonRaphson.newtonRaphson(NewtonRaphson.java:29)\r\n\tat NewtonRaphson.main(NewtonRaphson.java:21)\r\n```","title":"Newton Raphson Iteration - need help in fixing the code","body":"<p>I have this newton Raphson code that asks the user for the function, the derivative of the function, the initial guess, the tolerance for the error and the maximum iteration. The output that I am expecting is the iteration of the calculation up until it either reaches the root or up until the placed maximum number of iteration that is set by the user. Still learning java so any help would be greatly appreciated</p>\n<p>this is the code:</p>\n<pre><code>import javax.script.ScriptEngine;\nimport javax.script.ScriptEngineManager;\nimport javax.script.ScriptException;\n\npublic class NewtonRaphson {\n    private static ScriptEngine engine;\n\n    public static void main(String[] args) {\n        String f = &quot;Enter function f(x): &quot;;\n        String g = &quot;Enter derivative of f(x): &quot;;\n        String x0 = &quot;Enter Guess: &quot;;\n        String e = &quot;Tolerable Error: &quot;;\n        String N = &quot;Maximum Step: &quot;;\n\n        String func = getUserInput(f);\n        String der = getUserInput(g);\n        double guess = Double.parseDouble(getUserInput(x0));\n        double error = Double.parseDouble(getUserInput(e));\n        int maxSteps = Integer.parseInt(getUserInput(N));\n\n        newtonRaphson(func, der, guess, error, maxSteps);\n    }\n\n    public static void newtonRaphson(String f, String g, double x0, double e, int N) {\n        try {\n            engine = new ScriptEngineManager().getEngineByName(&quot;JavaScript&quot;);\n\n            String gFunc = &quot;function(x) { return &quot; + g + &quot;; }&quot;;\n            engine.eval(gFunc);\n\n            System.out.println(&quot;\\n\\n*** NEWTON RAPHSON METHOD IMPLEMENTATION ***&quot;);\n            int step = 1;\n            int flag = 1;\n            boolean condition = true;\n            while (condition) {\n                if (Double.compare((Double) engine.eval(gFunc + &quot;(x0)&quot;), 0.0) == 0) {\n                    System.out.println(&quot;Divide by zero error!&quot;);\n                    break;\n                }\n\n                String fEval = f.replace(&quot;x&quot;, Double.toString(x0));\n                double fResult = (double) engine.eval(fEval);\n\n                String gEval = g.replace(&quot;x&quot;, Double.toString(x0));\n                double gResult = (double) engine.eval(gEval);\n\n                double x1 = x0 - fResult / gResult;\n\n                System.out.printf(&quot;Iteration-%d, x1 = %0.6f and f(x1) = %0.6f\\n&quot;, step, x1, fResult);\n                x0 = x1;\n                step++;\n\n                if (step &gt; N) {\n                    flag = 0;\n                    break;\n                }\n\n                condition = Math.abs(fResult) &gt; e;\n            }\n\n            if (flag == 1) {\n                System.out.printf(&quot;\\nRequired root is: %0.8f\\n&quot;, x0);\n            } else {\n                System.out.println(&quot;\\nNot Convergent.&quot;);\n            }\n        } catch (ScriptException ex) {\n            System.out.println(ex);\n        }\n    }\n\n    private static String getUserInput(String message) {\n        java.util.Scanner scanner = new java.util.Scanner(System.in);\n        System.out.print(message);\n        return scanner.nextLine();\n    }\n}\n</code></pre>\n<p>and this is the usual result:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;javax.script.ScriptEngine.eval(String)&quot; because &quot;NewtonRaphson.engine&quot; is null\n    at NewtonRaphson.newtonRaphson(NewtonRaphson.java:29)\n    at NewtonRaphson.main(NewtonRaphson.java:21)\n</code></pre>\n"},{"tags":["java","vert.x"],"answers":[{"tags":[],"owner":{"account_id":175525,"reputation":1174,"user_id":405613,"display_name":"Oliver Marienfeld"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682322938,"creation_date":1682322938,"answer_id":76089726,"question_id":75972918,"body_markdown":"The `RoutingContext` itself is not accessible from any template, but `[RoutingContext.data][1]` is.\r\n\r\nYou should be able to access e.g. `traducciones` like so:\r\n\r\n```java\r\nThe variable &#39;traducciones&#39; from the context is @{traducciones}\r\n```\r\n\r\n\r\n  [1]: https://vertx.io/docs/apidocs/io/vertx/reactivex/ext/web/RoutingContext.html#data--","title":"Get context in template index.tmpl with Vert.x4.4.1","body":"<p>The <code>RoutingContext</code> itself is not accessible from any template, but <code>[RoutingContext.data][1]</code> is.</p>\n<p>You should be able to access e.g. <code>traducciones</code> like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>The variable 'traducciones' from the context is @{traducciones}\n</code></pre>\n"}],"owner":{"account_id":19812765,"reputation":3,"user_id":14511179,"display_name":"gabrielmarquez29"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682322938,"creation_date":1681075085,"question_id":75972918,"body_markdown":"I&#39;m having an error that I can&#39;t seem to figure out where it&#39;s coming from. If anyone has any idea where the problem might be coming from, I would appreciate it. The issue is that I&#39;m trying to capture a context variable in the template, and according to the Vert.x documentation, it should be possible.\r\n```\r\nThe request path is @{context.request().path()}\r\n\r\nThe variable &#39;foo&#39; from the session is @{context.session().get(&#39;foo&#39;)}\r\n\r\nThe value &#39;bar&#39; from the context data is @{context.get(&#39;bar&#39;)}\r\n```\r\nI have configured the engine and the handler:\r\n```\r\nMVELTemplateEngine engine = MVELTemplateEngine.create(vertx);\r\nTemplateHandler handler = TemplateHandler.create(engine);\r\n```\r\nThe route is configured as follows:\r\n```\r\nrouter.get(&quot;/login&quot;).handler(routingContext -&gt; {\r\n                String header_location=&quot;/login&quot;;\r\n                \r\n\r\n&gt; routingContext.put(&quot;traducciones&quot;,traducciones);\r\n\r\n                if (Users.existAdminUser()){\r\n                    routingContext.next();\r\n                }else {\r\n                    header_location=&quot;accounts/register-admin&quot;;\r\n                    routingContext.response().putHeader(&quot;location&quot;, header_location).setStatusCode(302).end();\r\n                }\r\n            });\r\n```\r\nIn the template, I&#39;m trying to access the translations:\r\n\r\n`@code{traducciones = context.get(&quot;traducciones&quot;)}`\r\n\r\nAnd I&#39;m getting the following error:\r\n\r\n```\r\n2023-04-08 20:09:10,388 ERROR [HttpServerVerticle-5] Unhandled exception in router\r\norg.mvel2.PropertyAccessException: [Error: could not access: context; in class: java.util.HashMap]\r\n[Near : {... code{traducciones = context.get(&quot;traducciones&quot;)} ....}]\r\n                                 ^\r\n[Line: 1, Column: 22]\r\n    at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.getBeanProperty(ReflectiveAccessorOptimizer.java:706) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.compileGetChain(ReflectiveAccessorOptimizer.java:360) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.optimizeAccessor(ReflectiveAccessorOptimizer.java:163) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.optimizers.dynamic.DynamicOptimizer.optimizeAccessor(DynamicOptimizer.java:80) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.ast.ASTNode.optimize(ASTNode.java:159) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.ast.ASTNode.getReducedValueAccelerated(ASTNode.java:115) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.compiler.ExecutableAccessor.getValue(ExecutableAccessor.java:38) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.ast.AssignmentNode.getReducedValueAccelerated(AssignmentNode.java:116) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.compiler.ExecutableAccessor.getValue(ExecutableAccessor.java:42) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.MVEL.executeExpression(MVEL.java:929) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.templates.res.CompiledCodeNode.eval(CompiledCodeNode.java:50) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285) ~[mvel2-2.3.1.Final.jar:?]\r\n    at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:281) ~[mvel2-2.3.1.Final.jar:?]\r\n    at io.vertx.ext.web.templ.mvel.impl.MVELTemplateEngineImpl.render(MVELTemplateEngineImpl.java:84) ~[vertx-web-templ-mvel-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.common.template.TemplateEngine.render(TemplateEngine.java:52) ~[vertx-web-common-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.TemplateHandlerImpl.handle(TemplateHandlerImpl.java:75) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.TemplateHandlerImpl.handle(TemplateHandlerImpl.java:32) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at enkoa.HttpServerVerticle.lambda$2(HttpServerVerticle.java:162) ~[main/:?]\r\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.handle(SessionHandlerImpl.java:321) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.handle(SessionHandlerImpl.java:37) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.lambda$handle$7(SessionHandlerImpl.java:316) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.impl.future.FutureImpl$1.onSuccess(FutureImpl.java:91) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:60) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.impl.future.FutureImpl.addListener(FutureImpl.java:196) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.impl.future.FutureImpl.onSuccess(FutureImpl.java:87) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.handle(SessionHandlerImpl.java:290) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.handle(SessionHandlerImpl.java:37) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.BodyHandlerImpl.handle(BodyHandlerImpl.java:96) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.handler.impl.BodyHandlerImpl.handle(BodyHandlerImpl.java:46) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RouterImpl.handle(RouterImpl.java:68) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.ext.web.impl.RouterImpl.handle(RouterImpl.java:37) ~[vertx-web-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.http.impl.Http1xServerRequestHandler.handle(Http1xServerRequestHandler.java:67) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.http.impl.Http1xServerRequestHandler.handle(Http1xServerRequestHandler.java:30) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.impl.WorkerContext.lambda$emit$0(WorkerContext.java:59) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.impl.WorkerContext.lambda$execute$4(WorkerContext.java:121) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76) ~[vertx-core-4.4.1.jar:4.4.1]\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) [?:?]\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) [?:?]\r\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [netty-common-4.1.90.Final.jar:4.1.90.Final]\r\n    at java.lang.Thread.run(Thread.java:833) [?:?]\r\n```\r\nBest regards!\r\n\r\nI&#39;m trying to do it according to the Vert.x documentation.","title":"Get context in template index.tmpl with Vert.x4.4.1","body":"<p>I'm having an error that I can't seem to figure out where it's coming from. If anyone has any idea where the problem might be coming from, I would appreciate it. The issue is that I'm trying to capture a context variable in the template, and according to the Vert.x documentation, it should be possible.</p>\n<pre><code>The request path is @{context.request().path()}\n\nThe variable 'foo' from the session is @{context.session().get('foo')}\n\nThe value 'bar' from the context data is @{context.get('bar')}\n</code></pre>\n<p>I have configured the engine and the handler:</p>\n<pre><code>MVELTemplateEngine engine = MVELTemplateEngine.create(vertx);\nTemplateHandler handler = TemplateHandler.create(engine);\n</code></pre>\n<p>The route is configured as follows:</p>\n<pre><code>router.get(&quot;/login&quot;).handler(routingContext -&gt; {\n                String header_location=&quot;/login&quot;;\n                \n\n&gt; routingContext.put(&quot;traducciones&quot;,traducciones);\n\n                if (Users.existAdminUser()){\n                    routingContext.next();\n                }else {\n                    header_location=&quot;accounts/register-admin&quot;;\n                    routingContext.response().putHeader(&quot;location&quot;, header_location).setStatusCode(302).end();\n                }\n            });\n</code></pre>\n<p>In the template, I'm trying to access the translations:</p>\n<p><code>@code{traducciones = context.get(&quot;traducciones&quot;)}</code></p>\n<p>And I'm getting the following error:</p>\n<pre><code>2023-04-08 20:09:10,388 ERROR [HttpServerVerticle-5] Unhandled exception in router\norg.mvel2.PropertyAccessException: [Error: could not access: context; in class: java.util.HashMap]\n[Near : {... code{traducciones = context.get(&quot;traducciones&quot;)} ....}]\n                                 ^\n[Line: 1, Column: 22]\n    at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.getBeanProperty(ReflectiveAccessorOptimizer.java:706) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.compileGetChain(ReflectiveAccessorOptimizer.java:360) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.optimizeAccessor(ReflectiveAccessorOptimizer.java:163) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.optimizers.dynamic.DynamicOptimizer.optimizeAccessor(DynamicOptimizer.java:80) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.ast.ASTNode.optimize(ASTNode.java:159) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.ast.ASTNode.getReducedValueAccelerated(ASTNode.java:115) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.compiler.ExecutableAccessor.getValue(ExecutableAccessor.java:38) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.ast.AssignmentNode.getReducedValueAccelerated(AssignmentNode.java:116) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.compiler.ExecutableAccessor.getValue(ExecutableAccessor.java:42) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.MVEL.executeExpression(MVEL.java:929) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.templates.res.CompiledCodeNode.eval(CompiledCodeNode.java:50) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285) ~[mvel2-2.3.1.Final.jar:?]\n    at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:281) ~[mvel2-2.3.1.Final.jar:?]\n    at io.vertx.ext.web.templ.mvel.impl.MVELTemplateEngineImpl.render(MVELTemplateEngineImpl.java:84) ~[vertx-web-templ-mvel-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.common.template.TemplateEngine.render(TemplateEngine.java:52) ~[vertx-web-common-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.TemplateHandlerImpl.handle(TemplateHandlerImpl.java:75) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.TemplateHandlerImpl.handle(TemplateHandlerImpl.java:32) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\n    at enkoa.HttpServerVerticle.lambda$2(HttpServerVerticle.java:162) ~[main/:?]\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.handle(SessionHandlerImpl.java:321) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.handle(SessionHandlerImpl.java:37) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.lambda$handle$7(SessionHandlerImpl.java:316) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.core.impl.future.FutureImpl$1.onSuccess(FutureImpl.java:91) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:60) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.core.impl.future.FutureImpl.addListener(FutureImpl.java:196) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.core.impl.future.FutureImpl.onSuccess(FutureImpl.java:87) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.handle(SessionHandlerImpl.java:290) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.SessionHandlerImpl.handle(SessionHandlerImpl.java:37) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.BodyHandlerImpl.handle(BodyHandlerImpl.java:96) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.handler.impl.BodyHandlerImpl.handle(BodyHandlerImpl.java:46) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:141) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RouterImpl.handle(RouterImpl.java:68) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.ext.web.impl.RouterImpl.handle(RouterImpl.java:37) ~[vertx-web-4.4.1.jar:4.4.1]\n    at io.vertx.core.http.impl.Http1xServerRequestHandler.handle(Http1xServerRequestHandler.java:67) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.core.http.impl.Http1xServerRequestHandler.handle(Http1xServerRequestHandler.java:30) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.core.impl.WorkerContext.lambda$emit$0(WorkerContext.java:59) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.core.impl.WorkerContext.lambda$execute$4(WorkerContext.java:121) ~[vertx-core-4.4.1.jar:4.4.1]\n    at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76) ~[vertx-core-4.4.1.jar:4.4.1]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) [?:?]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) [?:?]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [netty-common-4.1.90.Final.jar:4.1.90.Final]\n    at java.lang.Thread.run(Thread.java:833) [?:?]\n</code></pre>\n<p>Best regards!</p>\n<p>I'm trying to do it according to the Vert.x documentation.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682316954,"post_id":76086154,"comment_id":134189980,"body_markdown":"WOrks as it should. Query parameters in JDBC show up as `?` and they will be replaced by the driver or database (depending on the DB you are using) with the actual value.","body":"WOrks as it should. Query parameters in JDBC show up as <code>?</code> and they will be replaced by the driver or database (depending on the DB you are using) with the actual value."},{"owner":{"account_id":9543959,"reputation":77,"user_id":7090837,"display_name":"Yeras_QazaQ"},"score":0,"creation_date":1682325775,"post_id":76086154,"comment_id":134191557,"body_markdown":"Could you share with Users model class please, thanks","body":"Could you share with Users model class please, thanks"}],"answers":[{"comments":[{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1682322848,"post_id":76086280,"comment_id":134190937,"body_markdown":"prepared statements are more used as a defence against SQL injection and performance reason the parsed statements can get cached on the server side.","body":"prepared statements are more used as a defence against SQL injection and performance reason the parsed statements can get cached on the server side."}],"tags":[],"owner":{"account_id":15291064,"reputation":65,"user_id":11032560,"display_name":"Chu Äá»©c Anh"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682322779,"creation_date":1682271001,"answer_id":76086280,"question_id":76086154,"body_markdown":"Show-up wild card is correct behavior. \r\n\r\nIt is called a prepared statement. The driver will prepare it and pass the parameter, the parameter will be hidden for log. \r\nLet&#39;s think if you insert a password field and the hash password shows up in the log. It is terrible. \r\n\r\nIf you still want to show it, for a real reason. Add the following line to the config.\r\n\r\n    \r\n\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.type=TRACE","title":"Why email parameter in query annotation of my repository is not working?","body":"<p>Show-up wild card is correct behavior.</p>\n<p>It is called a prepared statement. The driver will prepare it and pass the parameter, the parameter will be hidden for log.\nLet's think if you insert a password field and the hash password shows up in the log. It is terrible.</p>\n<p>If you still want to show it, for a real reason. Add the following line to the config.</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type=TRACE\n</code></pre>\n"}],"owner":{"account_id":16931282,"reputation":13,"user_id":12245478,"display_name":"Ho&#224;ng Thi&#234;n"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682322779,"creation_date":1682269186,"question_id":76086154,"body_markdown":"My repository has a method that find users by email, I use query annotation and some parameters but it&#39;s not working, it return ?. This is detail:\r\nRepository class:\r\n\r\n```\r\npackage com.baothien.server.repository;\r\n\r\nimport com.baothien.server.model.Users;\r\n\r\nimport java.util.List;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.jpa.repository.Query;\r\nimport org.springframework.data.repository.query.Param;\r\n\r\npublic interface UserRepository extends JpaRepository&lt;Users, Long&gt; {\r\n    @Query(&quot;SELECT u FROM Users u WHERE u.email = :email&quot;)\r\n    List&lt;Users&gt; findUserByEmail(@Param(&quot;email&quot;) String email);\r\n}\r\n```\r\n\r\nA method to get userlist in my service class:\r\n\r\n```\r\npublic List&lt;Users&gt; getAllByEmail(String email) {\r\n    return userRepository.findUserByEmail(email);\r\n}\r\n```\r\n\r\nWhen i test, it return:\r\n&gt; Hibernate: \r\n&gt; select\r\n&gt; u1_0.id,\r\n&gt; u1_0.email,\r\n&gt; u1_0.full_name,\r\n&gt; u1_0.password,\r\n&gt; u1_0.role_num\r\n&gt; from\r\n&gt; users u1_0\r\n&gt; where\r\n&gt; u1_0.email=?\r\n\r\nIn where condition, u1_0.email=?, why it return ? and it&#39;s not working. I need the solution, thank you very much for reading and solving!\r\n\r\n\r\nI read a lot in JPA documentation, follow it but still not working.","title":"Why email parameter in query annotation of my repository is not working?","body":"<p>My repository has a method that find users by email, I use query annotation and some parameters but it's not working, it return ?. This is detail:\nRepository class:</p>\n<pre><code>package com.baothien.server.repository;\n\nimport com.baothien.server.model.Users;\n\nimport java.util.List;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\n\npublic interface UserRepository extends JpaRepository&lt;Users, Long&gt; {\n    @Query(&quot;SELECT u FROM Users u WHERE u.email = :email&quot;)\n    List&lt;Users&gt; findUserByEmail(@Param(&quot;email&quot;) String email);\n}\n</code></pre>\n<p>A method to get userlist in my service class:</p>\n<pre><code>public List&lt;Users&gt; getAllByEmail(String email) {\n    return userRepository.findUserByEmail(email);\n}\n</code></pre>\n<p>When i test, it return:</p>\n<blockquote>\n<p>Hibernate:\nselect\nu1_0.id,\nu1_0.email,\nu1_0.full_name,\nu1_0.password,\nu1_0.role_num\nfrom\nusers u1_0\nwhere\nu1_0.email=?</p>\n</blockquote>\n<p>In where condition, u1_0.email=?, why it return ? and it's not working. I need the solution, thank you very much for reading and solving!</p>\n<p>I read a lot in JPA documentation, follow it but still not working.</p>\n"},{"tags":["java","multithreading","concurrenthashmap"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":1,"creation_date":1682324440,"post_id":76089650,"comment_id":134191282,"body_markdown":"ConcurrentHashMap is the most efficient way to sync access.","body":"ConcurrentHashMap is the most efficient way to sync access."}],"owner":{"account_id":28144891,"reputation":1,"user_id":21507352,"display_name":"SeaDeemo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682322316,"creation_date":1682322316,"question_id":76089650,"body_markdown":"I want to intercept the request which access the website over 3 times in a second.So i use a Map&lt;String,Long[]&gt; to record the ip-addr and the access time.Evertime i want to put the map , i need to get the map first , so is ConcurrentHashMap useful?\r\n\r\n```java\r\npublic class BlackListInterceptor {\r\n    private static final Map&lt;String, long[]&gt; ipMillisMap = new ConcurrentHashMap&lt;&gt;();\r\n\r\n    private boolean intercept(String remoteAddr) {\r\n        String addrNumber = remoteAddr.replaceAll(&quot;:&quot;, &quot;&quot;);\r\n        return interceptOnce(addrNumber);\r\n    }\r\n\r\n    private Boolean interceptOnce(String addrNumber) {\r\n        long currentMillis = System.currentTimeMillis();\r\n        int count = CommonConst.REQUEST_COUNT_PER_SECOND;// 3\r\n        long[] thisArr;\r\n        // get first \r\n        if ((thisArr = ipMillisMap.get(addrNumber)) == null) {\r\n            long[] millis = new long[count];\r\n            millis[0] = currentMillis;\r\n            //then put the new array.I thought only the put() is synchronized,if a thread alter the data between the get() and the put(),i may get a wrong data.\r\n            ipMillisMap.put(addrNumber, millis);\r\n            return Boolean.FALSE;\r\n        }\r\n        boolean shouldIntercepted;\r\n        for (int i = 1; i &lt; count; i++) {\r\n            if (thisArr[i] == 0) {\r\n                //Here alter the array is not synchronized,so i may get the wrong data .\r\n                thisArr[i] = currentMillis;\r\n                return Boolean.FALSE;\r\n            }\r\n        }\r\n        shouldIntercepted = currentMillis - thisArr[0] &gt;= 1000;\r\n        //also here.\r\n        long[] newArr = new long[thisArr.length];\r\n        System.arraycopy(thisArr, 1, newArr, 0, thisArr.length - 1);         \r\n        newArr[thisArr.length - 1] = currentMillis;\r\n        ipMillisMap.put(addrNumber, newArr);\r\n    return shouldIntercepted;\r\n    }\r\n}\r\n```\r\n\r\nSo what should i do ? I think synchronize the interceptOnce method is useful,but do i have another way? \r\n\r\nI tried synchronize the whole method and i thought it is useful.But i want to know is there any other way?","title":"A multi-thread interceptor has a Map for storing blacklist,is it useful using a ConcurrentHashMap?","body":"<p>I want to intercept the request which access the website over 3 times in a second.So i use a Map&lt;String,Long[]&gt; to record the ip-addr and the access time.Evertime i want to put the map , i need to get the map first , so is ConcurrentHashMap useful?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BlackListInterceptor {\n    private static final Map&lt;String, long[]&gt; ipMillisMap = new ConcurrentHashMap&lt;&gt;();\n\n    private boolean intercept(String remoteAddr) {\n        String addrNumber = remoteAddr.replaceAll(&quot;:&quot;, &quot;&quot;);\n        return interceptOnce(addrNumber);\n    }\n\n    private Boolean interceptOnce(String addrNumber) {\n        long currentMillis = System.currentTimeMillis();\n        int count = CommonConst.REQUEST_COUNT_PER_SECOND;// 3\n        long[] thisArr;\n        // get first \n        if ((thisArr = ipMillisMap.get(addrNumber)) == null) {\n            long[] millis = new long[count];\n            millis[0] = currentMillis;\n            //then put the new array.I thought only the put() is synchronized,if a thread alter the data between the get() and the put(),i may get a wrong data.\n            ipMillisMap.put(addrNumber, millis);\n            return Boolean.FALSE;\n        }\n        boolean shouldIntercepted;\n        for (int i = 1; i &lt; count; i++) {\n            if (thisArr[i] == 0) {\n                //Here alter the array is not synchronized,so i may get the wrong data .\n                thisArr[i] = currentMillis;\n                return Boolean.FALSE;\n            }\n        }\n        shouldIntercepted = currentMillis - thisArr[0] &gt;= 1000;\n        //also here.\n        long[] newArr = new long[thisArr.length];\n        System.arraycopy(thisArr, 1, newArr, 0, thisArr.length - 1);         \n        newArr[thisArr.length - 1] = currentMillis;\n        ipMillisMap.put(addrNumber, newArr);\n    return shouldIntercepted;\n    }\n}\n</code></pre>\n<p>So what should i do ? I think synchronize the interceptOnce method is useful,but do i have another way?</p>\n<p>I tried synchronize the whole method and i thought it is useful.But i want to know is there any other way?</p>\n"},{"tags":["java","android","security","sdk","screenshot"],"owner":{"account_id":28394721,"reputation":1,"user_id":21719941,"display_name":"Traverser_25"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682321664,"creation_date":1682321664,"question_id":76089567,"body_markdown":"As i have read that &quot;screenshot Blocker&quot; library intercept the media projection api to check if screenshot is being taken.\r\n\r\nWhat if a software uses another method to take screenshot?\r\n\r\nWill it work?\r\nCan it bypass screnshot blocker \r\n\r\nIt is a vulnerability?\r\n\r\nI m trying to find such apps that don&#39;t use media projection for screenshot.","title":"App which are not using media projection api method to take screenshot cam bypass screnshot shot blocker library/software?","body":"<p>As i have read that &quot;screenshot Blocker&quot; library intercept the media projection api to check if screenshot is being taken.</p>\n<p>What if a software uses another method to take screenshot?</p>\n<p>Will it work?\nCan it bypass screnshot blocker</p>\n<p>It is a vulnerability?</p>\n<p>I m trying to find such apps that don't use media projection for screenshot.</p>\n"},{"tags":["java","android","unsatisfiedlinkerror",".so"],"comments":[{"owner":{"account_id":51901,"reputation":12651,"user_id":155082,"accept_rate":69,"display_name":"Lothar"},"score":0,"creation_date":1698625518,"post_id":76089341,"comment_id":136425531,"body_markdown":"Did you find a solution?  I have the same or very similar looking problem now.","body":"Did you find a solution?  I have the same or very similar looking problem now."},{"owner":{"account_id":28371192,"reputation":1,"user_id":21699764,"display_name":"Developer"},"score":0,"creation_date":1698731390,"post_id":76089341,"comment_id":136439071,"body_markdown":"No, didnot get any solution for this particular problem. But I created a fresh project and transferred the old project codes to the new one. This solved the issue for me","body":"No, didnot get any solution for this particular problem. But I created a fresh project and transferred the old project codes to the new one. This solved the issue for me"}],"owner":{"account_id":28371192,"reputation":1,"user_id":21699764,"display_name":"Developer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1326,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682321476,"creation_date":1682319940,"question_id":76089341,"body_markdown":"I am running an old Android project from year 2019 on the Android Studio Version Electric Eel.\r\n\r\nI have imported an existing module in that project which is using a **.so library**. When I&#39;m executing the below line, I&#39;m getting this error : **Caused by: java.lang.UnsatisfiedLinkError: dlopen failed: library &quot;libtriangulation.so&quot; not found**\r\n\r\n```\r\nstatic {\r\n        System.loadLibrary(&quot;triangulation&quot;);\r\n        \r\n    }\r\n```\r\n\r\nThis is my Project structure :\r\n[Project structure](https://i.stack.imgur.com/PKtiJ.png)\r\n\r\nThe **3dViewer** is the external module which I have imported in the project. You can see that the **libtriangulation.so** file is already included in the **jniLibs** folder.\r\n\r\nAny help is appreciated. I&#39;m stuck in this error for past 4days.\r\n\r\n**Tried all the solutions given in the below links, but none of it worked for me :**\r\n\r\nhttps://stackoverflow.com/questions/52076641/java-lang-unsatisfiedlinkerror-dlopen-failed-library-not-found\r\n\r\nhttps://stackoverflow.com/questions/48678598/java-lang-unsatisfiedlinkerror-dlopen-failed\r\n\r\nhttps://github.com/sqlcipher/android-database-sqlcipher/issues/587","title":"Getting error : java.lang.UnsatisfiedLinkError: dlopen failed: library &quot;libtriangulation.so&quot; not found in Android java","body":"<p>I am running an old Android project from year 2019 on the Android Studio Version Electric Eel.</p>\n<p>I have imported an existing module in that project which is using a <strong>.so library</strong>. When I'm executing the below line, I'm getting this error : <strong>Caused by: java.lang.UnsatisfiedLinkError: dlopen failed: library &quot;libtriangulation.so&quot; not found</strong></p>\n<pre><code>static {\n        System.loadLibrary(&quot;triangulation&quot;);\n        \n    }\n</code></pre>\n<p>This is my Project structure :\n<a href=\"https://i.stack.imgur.com/PKtiJ.png\" rel=\"nofollow noreferrer\">Project structure</a></p>\n<p>The <strong>3dViewer</strong> is the external module which I have imported in the project. You can see that the <strong>libtriangulation.so</strong> file is already included in the <strong>jniLibs</strong> folder.</p>\n<p>Any help is appreciated. I'm stuck in this error for past 4days.</p>\n<p><strong>Tried all the solutions given in the below links, but none of it worked for me :</strong></p>\n<p><a href=\"https://stackoverflow.com/questions/52076641/java-lang-unsatisfiedlinkerror-dlopen-failed-library-not-found\">java.lang.UnsatisfiedLinkError: dlopen failed: library not found</a></p>\n<p><a href=\"https://stackoverflow.com/questions/48678598/java-lang-unsatisfiedlinkerror-dlopen-failed\">java.lang.UnsatisfiedLinkError: dlopen failed:</a></p>\n<p><a href=\"https://github.com/sqlcipher/android-database-sqlcipher/issues/587\" rel=\"nofollow noreferrer\">https://github.com/sqlcipher/android-database-sqlcipher/issues/587</a></p>\n"},{"tags":["java","firebase","firebase-cloud-messaging"],"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682320768,"creation_date":1682320768,"question_id":76089446,"body_markdown":"While initializing the FirebaseMessaging instance, I want to provide a mock server host that I&#39;ll be using from Functional tests/SLTs. \r\n\r\nAfter check all the parameters it takes, I do not see any option to provide the host.\r\n\r\nThe code looks like this:\r\n\r\n    import com.google.firebase.FirebaseApp;\r\n    import com.google.firebase.FirebaseOptions;\r\n    import com.google.firebase.messaging.*;\r\n\r\n    Resource resource = new ClassPathResource(&quot;/jsonFilePath&quot;);\r\n        InputStream input = resource.getInputStream();\r\n        return FirebaseOptions.builder()\r\n                .setCredentials(GoogleCredentials.fromStream(input))\r\n                .build();\r\n    FirebaseApp firebaseApp = FirebaseApp.initializeApp(getFirebaseOptions(),\r\n                &quot;project-name&quot;);\r\n    this.firebaseMessaging = FirebaseMessaging.getInstance(firebaseApp);\r\n\r\n\r\nHere, in FirebaseOptions as well there is no member that represents the host. \r\n\r\nI need some help here, if setting up a mock server host not possible in how to write Service level tests or functional tests?","title":"How to provide Mock server host while initialising FirebaseMessaging instance in Java SDK","body":"<p>While initializing the FirebaseMessaging instance, I want to provide a mock server host that I'll be using from Functional tests/SLTs.</p>\n<p>After check all the parameters it takes, I do not see any option to provide the host.</p>\n<p>The code looks like this:</p>\n<pre><code>import com.google.firebase.FirebaseApp;\nimport com.google.firebase.FirebaseOptions;\nimport com.google.firebase.messaging.*;\n\nResource resource = new ClassPathResource(&quot;/jsonFilePath&quot;);\n    InputStream input = resource.getInputStream();\n    return FirebaseOptions.builder()\n            .setCredentials(GoogleCredentials.fromStream(input))\n            .build();\nFirebaseApp firebaseApp = FirebaseApp.initializeApp(getFirebaseOptions(),\n            &quot;project-name&quot;);\nthis.firebaseMessaging = FirebaseMessaging.getInstance(firebaseApp);\n</code></pre>\n<p>Here, in FirebaseOptions as well there is no member that represents the host.</p>\n<p>I need some help here, if setting up a mock server host not possible in how to write Service level tests or functional tests?</p>\n"},{"tags":["java","ssh","jsch"],"answers":[{"tags":[],"owner":{"account_id":18318561,"reputation":86,"user_id":13339836,"display_name":"Khaled Algelowb"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597257845,"creation_date":1597257845,"answer_id":63382907,"question_id":60629342,"body_markdown":"Try this.\r\n\r\n        JSch jSch;\r\n        try {\r\n            Properties properties = new Properties();\r\n            properties.put(&quot;PreferredAuthentications&quot;, &quot;publickey,keyboard-interactive,password&quot;);\r\n            properties.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n            properties.put(&quot;UseDNS&quot;, &quot;no&quot;);\r\n\r\n            jSch = new JSch();\r\n            Session session = jSch.getSession(&quot;username&quot;, &quot;host/ip&quot;, 22);\r\n            session.setConfig(properties);\r\n            session.setTimeout(10 * 1_000);\r\n            session.setPassword(&quot;password&quot;);\r\n            session.connect();\r\n            Channel channel = session.openChannel(&quot;shell&quot;);\r\n            channel.connect();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            channel.disconnect();\r\n            session.disconnect();\r\n        }","title":"Connect to a server with keyboard-interactive password authentication using jsch","body":"<p>Try this.</p>\n<pre><code>    JSch jSch;\n    try {\n        Properties properties = new Properties();\n        properties.put(&quot;PreferredAuthentications&quot;, &quot;publickey,keyboard-interactive,password&quot;);\n        properties.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n        properties.put(&quot;UseDNS&quot;, &quot;no&quot;);\n\n        jSch = new JSch();\n        Session session = jSch.getSession(&quot;username&quot;, &quot;host/ip&quot;, 22);\n        session.setConfig(properties);\n        session.setTimeout(10 * 1_000);\n        session.setPassword(&quot;password&quot;);\n        session.connect();\n        Channel channel = session.openChannel(&quot;shell&quot;);\n        channel.connect();\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        channel.disconnect();\n        session.disconnect();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16369373,"reputation":1,"user_id":11822986,"display_name":"Ankit Abhishek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682320220,"creation_date":1682320220,"answer_id":76089377,"question_id":60629342,"body_markdown":"If you want to connect using keyboard-interactive password authentications \r\n\r\nuse config.put(&quot;PreferredAuthentications&quot;, &quot;keyboard-interactive&quot;);\r\n\r\n\r\nIf you want to connect using password-prompt password authentications\r\n\r\nuse config.put(&quot;PreferredAuthentications&quot;, &quot;password&quot;);\r\n\r\n","title":"Connect to a server with keyboard-interactive password authentication using jsch","body":"<p>If you want to connect using keyboard-interactive password authentications</p>\n<p>use config.put(&quot;PreferredAuthentications&quot;, &quot;keyboard-interactive&quot;);</p>\n<p>If you want to connect using password-prompt password authentications</p>\n<p>use config.put(&quot;PreferredAuthentications&quot;, &quot;password&quot;);</p>\n"}],"owner":{"account_id":9426082,"reputation":644,"user_id":7010959,"accept_rate":82,"display_name":"Aki T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2074,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682320220,"creation_date":1583901460,"question_id":60629342,"body_markdown":"    java.util.Properties config = new java.util.Properties();\r\n    config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n    JSch jsch = new JSch();\r\n    Session session=jsch.getSession(user, host, 22);\r\n    session.setPassword(password);\r\n    session.setConfig(config);\r\n    session.connect();\r\n\r\nI&#39;m connecting to a remote machine without keyboard-interactive authentication, using the above snippet.\r\n\r\nBut when I&#39;m trying to connect to a server with keyboard-interactive password, I&#39;m getting a \r\n`com.jcraft.jsch.JSchException: Auth fail` exception.\r\n\r\nI added these config and tested, yet didn&#39;t succed.\r\n\r\n    config.put(&quot;PreferredAuthentications&quot;, &quot;password&quot;);\r\n\r\nand\r\n\r\n    config.put(&quot;PreferredAuthentications&quot;,\r\n                        &quot;keyboard-interactive,password&quot;);","title":"Connect to a server with keyboard-interactive password authentication using jsch","body":"<pre><code>java.util.Properties config = new java.util.Properties();\nconfig.put(\"StrictHostKeyChecking\", \"no\");\nJSch jsch = new JSch();\nSession session=jsch.getSession(user, host, 22);\nsession.setPassword(password);\nsession.setConfig(config);\nsession.connect();\n</code></pre>\n\n<p>I'm connecting to a remote machine without keyboard-interactive authentication, using the above snippet.</p>\n\n<p>But when I'm trying to connect to a server with keyboard-interactive password, I'm getting a \n<code>com.jcraft.jsch.JSchException: Auth fail</code> exception.</p>\n\n<p>I added these config and tested, yet didn't succed.</p>\n\n<pre><code>config.put(\"PreferredAuthentications\", \"password\");\n</code></pre>\n\n<p>and</p>\n\n<pre><code>config.put(\"PreferredAuthentications\",\n                    \"keyboard-interactive,password\");\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":2289067,"reputation":3571,"user_id":2012441,"accept_rate":86,"display_name":"mschenk74"},"score":0,"creation_date":1404507707,"post_id":24580554,"comment_id":38078055,"body_markdown":"What is the reason for having the class inside the default package? see also http://stackoverflow.com/questions/7849421/is-use-of-javas-default-package-bad-style","body":"What is the reason for having the class inside the default package? see also <a href=\"http://stackoverflow.com/questions/7849421/is-use-of-javas-default-package-bad-style\" title=\"is use of javas default package bad style\">stackoverflow.com/questions/7849421/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":3061193,"reputation":228,"user_id":2593789,"display_name":"EmptyStuff"},"score":0,"creation_date":1404507228,"post_id":24580569,"comment_id":38077924,"body_markdown":"ya it keeps doing the same thing.","body":"ya it keeps doing the same thing."},{"owner":{"account_id":4688955,"reputation":3952,"user_id":3795615,"display_name":"Strikeskids"},"score":0,"creation_date":1404507316,"post_id":24580569,"comment_id":38077948,"body_markdown":"You can try the second hint I provided","body":"You can try the second hint I provided"},{"owner":{"account_id":3061193,"reputation":228,"user_id":2593789,"display_name":"EmptyStuff"},"score":0,"creation_date":1404507790,"post_id":24580569,"comment_id":38078077,"body_markdown":"i added more pictures.","body":"i added more pictures."},{"owner":{"account_id":4688955,"reputation":3952,"user_id":3795615,"display_name":"Strikeskids"},"score":0,"creation_date":1404508011,"post_id":24580569,"comment_id":38078129,"body_markdown":"Ok i added a picture to help you.","body":"Ok i added a picture to help you."}],"tags":[],"owner":{"account_id":4688955,"reputation":3952,"user_id":3795615,"display_name":"Strikeskids"},"comment_count":4,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1404507990,"creation_date":1404506719,"answer_id":24580569,"question_id":24580554,"body_markdown":"New -&gt; class\r\n\r\nDelete the package field and name the class whatever you want. Make sure it&#39;s in the right project.\r\n\r\nIf you have a class that is already in the wrong package, simply delete the package name from the top of the file and drag the file in the file viewer to the src folder itself.\r\n\r\n![what to delete](http://i.stack.imgur.com/CmLre.png)","title":"How to make a default package eclipse","body":"<p>New -> class</p>\n\n<p>Delete the package field and name the class whatever you want. Make sure it's in the right project.</p>\n\n<p>If you have a class that is already in the wrong package, simply delete the package name from the top of the file and drag the file in the file viewer to the src folder itself.</p>\n\n<p><img src=\"https://i.stack.imgur.com/CmLre.png\" alt=\"what to delete\"></p>\n"},{"tags":[],"owner":{"account_id":25576850,"reputation":1,"user_id":20019273,"display_name":"Sunday_Scour"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682320088,"creation_date":1682320088,"answer_id":76089359,"question_id":24580554,"body_markdown":"This situation is **EXTREMELY FRUSTRATING** to beginners, especially when they are new to **both** Eclipse AND Java! \r\n\r\nSpecifically, Eclipse won&#39;t compile without a package (thus it provides a &quot;(default package)&quot; when you make a new class without a package), and Java won&#39;t run without a &quot;main&quot; class (which is whichever class has a method named &quot;main&quot; in it; usually, for simple beginner programs, declared as `public static void main(String[] args)`).\r\n\r\nThis comes to a head when, without knowing better (as there is NO tutorial within the Eclipse IDE), you (a beginner):\r\n\r\n 1. create a new project, then \r\n 2. create a new .java file (which Java will interpret as a `class`, but Eclipse **won&#39;t** put into a package), and then\r\n 3. try to run the perfectly valid Java program with a &quot;main&quot; method and everything in the Eclipse environment.\r\n\r\nNo dice. Will not work. \r\n\r\nAt this point, especially if you have already put hours into making your program, you need a way to **FIX THIS PROJECT** so that Eclipse can run it.\r\n\r\nEclipse will NOT allow you to just make a &quot;(default package)&quot;, since all packages MUST have names, and NO name can start with an open parenthesis. Thus, you cannot make the (default package). This requires you to FORCE Eclipse to make it for you. How to do this was already explicated in this answer provided by Strikeskids, on 4 July 2014:\r\n\r\n&gt;Delete the package field and name the class whatever you want. Make sure it&#39;s in the right project.\r\n&gt;If you have a class that is already in the wrong package, simply delete the package name from the top of the file and drag the file in the file viewer to the src folder itself.\r\n&gt;[picture from this answer][1]\r\n\r\n&gt;Here&#39;s the link to that answer: [https://stackoverflow.com/a/24580569/20019273][2]\r\n\r\n**However**, I have ALSO needed to RESTART Eclipse after doing those steps in order to effect the necessary changes.\r\n\r\nThere was no end to my frustration when I did everything correct, but Eclipse **still** did not generate a &quot;(default package)&quot; for me. Upon closing Eclipse, then reopening it, *Lo and Behold the (default package) was there, without any additional changes!*\r\n\r\n**AN ADDITIONAL** frustration comes if you are exporting your project to [Replit.com][3]. Replit, by default, requires a &quot;Main.java&quot; class file with the &quot;main()&quot; method in it, **AND** this must be **OUTSIDE** of ANY packages or folders within your project. From the &quot;main(...)&quot; method in the &quot;Main.java&quot; class, you can THEN call and use your other classes and methods within the other .java files and directories (packages) your project may have.\r\n\r\n**Thus**, to make an Eclipse project that also runs in Replit, make a new Eclipse project (named whatever you want), then make a class called Main (which Eclipse will put into Main.java within the &quot;(default package)&quot; package), then code the &quot;main(...)&quot; method in the Main.java file/class, then have that &quot;main&quot; method call any additional classes/.java files you make. **FINALLY**, On Replit.com, make a new Repl, then upload the Main.java AND any other .java files that are in your project, MAKING FOLDERS WHEN NECESSARY FOR ANY PACKAGES YOU CREATED FOR YOUR PROJECT. (**Most** beginner programs **do not use** additional folders (A.K.A. &quot;packages&quot;), even when making several different classes.) At this point, your project should run in Eclipse AND on Replit.com.\r\n\r\nI sure wish there was a tutorial about the MINIMUM requirements for a runnable Eclipse project and a runnable Repl, but, here we are...\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ViYJp.png\r\n  [2]: https://stackoverflow.com/a/24580569/20019273\r\n  [3]: https://replit.com/~","title":"How to make a default package eclipse","body":"<p>This situation is <strong>EXTREMELY FRUSTRATING</strong> to beginners, especially when they are new to <strong>both</strong> Eclipse AND Java!</p>\n<p>Specifically, Eclipse won't compile without a package (thus it provides a &quot;(default package)&quot; when you make a new class without a package), and Java won't run without a &quot;main&quot; class (which is whichever class has a method named &quot;main&quot; in it; usually, for simple beginner programs, declared as <code>public static void main(String[] args)</code>).</p>\n<p>This comes to a head when, without knowing better (as there is NO tutorial within the Eclipse IDE), you (a beginner):</p>\n<ol>\n<li>create a new project, then</li>\n<li>create a new .java file (which Java will interpret as a <code>class</code>, but Eclipse <strong>won't</strong> put into a package), and then</li>\n<li>try to run the perfectly valid Java program with a &quot;main&quot; method and everything in the Eclipse environment.</li>\n</ol>\n<p>No dice. Will not work.</p>\n<p>At this point, especially if you have already put hours into making your program, you need a way to <strong>FIX THIS PROJECT</strong> so that Eclipse can run it.</p>\n<p>Eclipse will NOT allow you to just make a &quot;(default package)&quot;, since all packages MUST have names, and NO name can start with an open parenthesis. Thus, you cannot make the (default package). This requires you to FORCE Eclipse to make it for you. How to do this was already explicated in this answer provided by Strikeskids, on 4 July 2014:</p>\n<blockquote>\n<p>Delete the package field and name the class whatever you want. Make sure it's in the right project.\nIf you have a class that is already in the wrong package, simply delete the package name from the top of the file and drag the file in the file viewer to the src folder itself.\n<a href=\"https://i.stack.imgur.com/ViYJp.png\" rel=\"nofollow noreferrer\">picture from this answer</a></p>\n</blockquote>\n<blockquote>\n<p>Here's the link to that answer: <a href=\"https://stackoverflow.com/a/24580569/20019273\">https://stackoverflow.com/a/24580569/20019273</a></p>\n</blockquote>\n<p><strong>However</strong>, I have ALSO needed to RESTART Eclipse after doing those steps in order to effect the necessary changes.</p>\n<p>There was no end to my frustration when I did everything correct, but Eclipse <strong>still</strong> did not generate a &quot;(default package)&quot; for me. Upon closing Eclipse, then reopening it, <em>Lo and Behold the (default package) was there, without any additional changes!</em></p>\n<p><strong>AN ADDITIONAL</strong> frustration comes if you are exporting your project to <a href=\"https://replit.com/%7E\" rel=\"nofollow noreferrer\">Replit.com</a>. Replit, by default, requires a &quot;Main.java&quot; class file with the &quot;main()&quot; method in it, <strong>AND</strong> this must be <strong>OUTSIDE</strong> of ANY packages or folders within your project. From the &quot;main(...)&quot; method in the &quot;Main.java&quot; class, you can THEN call and use your other classes and methods within the other .java files and directories (packages) your project may have.</p>\n<p><strong>Thus</strong>, to make an Eclipse project that also runs in Replit, make a new Eclipse project (named whatever you want), then make a class called Main (which Eclipse will put into Main.java within the &quot;(default package)&quot; package), then code the &quot;main(...)&quot; method in the Main.java file/class, then have that &quot;main&quot; method call any additional classes/.java files you make. <strong>FINALLY</strong>, On Replit.com, make a new Repl, then upload the Main.java AND any other .java files that are in your project, MAKING FOLDERS WHEN NECESSARY FOR ANY PACKAGES YOU CREATED FOR YOUR PROJECT. (<strong>Most</strong> beginner programs <strong>do not use</strong> additional folders (A.K.A. &quot;packages&quot;), even when making several different classes.) At this point, your project should run in Eclipse AND on Replit.com.</p>\n<p>I sure wish there was a tutorial about the MINIMUM requirements for a runnable Eclipse project and a runnable Repl, but, here we are...</p>\n"}],"owner":{"account_id":3061193,"reputation":228,"user_id":2593789,"display_name":"EmptyStuff"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42938,"favorite_count":0,"down_vote_count":3,"up_vote_count":5,"accepted_answer_id":24580569,"answer_count":2,"score":2,"last_activity_date":1682320088,"creation_date":1404506635,"question_id":24580554,"body_markdown":"I am very new to java and when I create a project, it makes the src and the JRE System Library. What it doesn&#39;t create is a default package. When i make a class in the src it names it after the project. it requires me to put package (name of project). I don&#39;t want to. How do i make the default![enter image description here][1] package.\r\n\r\n\r\n![enter image description here][2]\r\n\r\n\r\n![enter image description here][3]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/sNfUl.png\r\n  [2]: http://i.stack.imgur.com/3aLie.png\r\n  [3]: http://i.stack.imgur.com/i496q.png","title":"How to make a default package eclipse","body":"<p>I am very new to java and when I create a project, it makes the src and the JRE System Library. What it doesn't create is a default package. When i make a class in the src it names it after the project. it requires me to put package (name of project). I don't want to. How do i make the default<img src=\"https://i.stack.imgur.com/sNfUl.png\" alt=\"enter image description here\"> package.</p>\n\n<p><img src=\"https://i.stack.imgur.com/3aLie.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/i496q.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","spring-boot","rest"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1682319496,"post_id":76089251,"comment_id":134190351,"body_markdown":"If you scale your service by running multiple instances of it, then this may not work, depending on what sort of session affinity you have set up.","body":"If you scale your service by running multiple instances of it, then this may not work, depending on what sort of session affinity you have set up."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1682321682,"post_id":76089251,"comment_id":134190700,"body_markdown":"Spring Boot already exposes metrics, if you add the username as a key/value to that you are able to filter/query per user in a certain timeframe. Don&#39;t build this into your code, as that will introduce issues (one already mentioned above).","body":"Spring Boot already exposes metrics, if you add the username as a key/value to that you are able to filter/query per user in a certain timeframe. Don&#39;t build this into your code, as that will introduce issues (one already mentioned above)."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1682325509,"post_id":76089251,"comment_id":134191503,"body_markdown":"Further to @tgdavies If you have a cluster of services you will need to use something like hazelcast or redis to count across the multiple services.","body":"Further to @tgdavies If you have a cluster of services you will need to use something like hazelcast or redis to count across the multiple services."},{"owner":{"account_id":19543164,"reputation":1,"user_id":14300542,"display_name":"Janitta James"},"score":0,"creation_date":1682329567,"post_id":76089251,"comment_id":134192390,"body_markdown":"Thanks for all your suggestions. I am discarding the above approach and considering the idea of using spring boot metrics as @M. Deinum pointed out.","body":"Thanks for all your suggestions. I am discarding the above approach and considering the idea of using spring boot metrics as @M. Deinum pointed out."}],"owner":{"account_id":19543164,"reputation":1,"user_id":14300542,"display_name":"Janitta James"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682319608,"creation_date":1682319213,"question_id":76089251,"body_markdown":"I need to trigger a notification if a REST API has been polled a specific number of times for a particular user and if another condition too has been fulfilled. I am using a ConcurrentHashMap with userId as the key and an AtomicInteger as the value. \r\n\r\n```java\r\npublic class MyClass{\r\n    private static final ConcurrentHashMap&lt;Integer, AtomicInteger&gt; quoteRequestCount = new ConcurrentHashMap&lt;&gt;();\r\n\r\n\r\n    mymeth(){\r\n        map.putIfAbsent(&lt;id of user&gt;, new AtomicInteger(0));\r\n        map.get(&lt;id of user&gt;).getAndIncrement();\r\n\r\n       **//a set of operations\r\n\r\n       AtomicInteger hitCount = map.get(userId);\r\n       if (hitCount == 5 &amp;&amp; condition which depends on above set of operations)\r\n       {\r\n            //send notification\r\n       }\r\n    }\r\n}\r\n```\r\n\r\nDoes a concurrenthashmap seem to be the most ideal choice here?\r\nAny help would be highly appreciated.","title":"Is there a way to determine the poll count of a REST API for a particular user?","body":"<p>I need to trigger a notification if a REST API has been polled a specific number of times for a particular user and if another condition too has been fulfilled. I am using a ConcurrentHashMap with userId as the key and an AtomicInteger as the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyClass{\n    private static final ConcurrentHashMap&lt;Integer, AtomicInteger&gt; quoteRequestCount = new ConcurrentHashMap&lt;&gt;();\n\n\n    mymeth(){\n        map.putIfAbsent(&lt;id of user&gt;, new AtomicInteger(0));\n        map.get(&lt;id of user&gt;).getAndIncrement();\n\n       **//a set of operations\n\n       AtomicInteger hitCount = map.get(userId);\n       if (hitCount == 5 &amp;&amp; condition which depends on above set of operations)\n       {\n            //send notification\n       }\n    }\n}\n</code></pre>\n<p>Does a concurrenthashmap seem to be the most ideal choice here?\nAny help would be highly appreciated.</p>\n"},{"tags":["java","spring-boot","hibernate","repository"],"answers":[{"comments":[{"owner":{"account_id":13729529,"reputation":93,"user_id":9907360,"display_name":"Steven"},"score":0,"creation_date":1683007655,"post_id":76089234,"comment_id":134296918,"body_markdown":"What do you suggest as a solution? use an earlier version of Spring?","body":"What do you suggest as a solution? use an earlier version of Spring?"},{"owner":{"account_id":519535,"reputation":2273,"user_id":1303158,"display_name":"Bernie"},"score":1,"creation_date":1683104958,"post_id":76089234,"comment_id":134314014,"body_markdown":"@Steven disable debug level logging for Hibernate classes. Info level is ok. This was enough to avoid triggering the issue, at least for me.","body":"@Steven disable debug level logging for Hibernate classes. Info level is ok. This was enough to avoid triggering the issue, at least for me."},{"owner":{"account_id":12555337,"reputation":136,"user_id":9135271,"display_name":"AleksanderSzporka"},"score":1,"creation_date":1687789161,"post_id":76089234,"comment_id":134981883,"body_markdown":"Spring boot data starter from version 3.1.0 fixes this issue by working with Hibernate 6.2.x","body":"Spring boot data starter from version 3.1.0 fixes this issue by working with Hibernate 6.2.x"}],"tags":[],"owner":{"account_id":519535,"reputation":2273,"user_id":1303158,"display_name":"Bernie"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1682319064,"creation_date":1682319064,"answer_id":76089234,"question_id":75860914,"body_markdown":"This is an issue present in Hibernate 6.1.7. It has been fixed in 6.2.0: https://hibernate.atlassian.net/browse/HHH-16169. Unfortunately, there are currently no versions of the Spring Data starter that use the fixed version.\r\n\r\nYou can reconfigure logging to not log debug messages from the Hibernate classes to work around it until a fixed version of Spring Data is available.\r\n\r\nSpring Data 3.0.x doesn&#39;t appear to work with Hibernate 6.2.x either, unfortunately.","title":"Springboot 3 hibernate repository save problem","body":"<p>This is an issue present in Hibernate 6.1.7. It has been fixed in 6.2.0: <a href=\"https://hibernate.atlassian.net/browse/HHH-16169\" rel=\"noreferrer\">https://hibernate.atlassian.net/browse/HHH-16169</a>. Unfortunately, there are currently no versions of the Spring Data starter that use the fixed version.</p>\n<p>You can reconfigure logging to not log debug messages from the Hibernate classes to work around it until a fixed version of Spring Data is available.</p>\n<p>Spring Data 3.0.x doesn't appear to work with Hibernate 6.2.x either, unfortunately.</p>\n"}],"owner":{"account_id":12667168,"reputation":87,"user_id":9206028,"display_name":"David Bulko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":766,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1682319064,"creation_date":1679956272,"question_id":75860914,"body_markdown":"I have been trying for the entire day to migrate from springboot 2.7.9 to springboot 3.0.5\r\nI have encountered a problem with the new hibernate:\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;org.hibernate.persister.collection.CollectionPersister.getRole()&quot; because &quot;this.loadedPersister&quot; is null\r\n```\r\nwhen calling repository.save(entity)\r\n\r\nThe repository extends JpaRepository. The entity contains oneToMany, manyToOne fields.\r\nWeirdly it happens only in some cases (but consistently) - f.e. I have 2 update methods, when I call one which updates part of data it&#39;s always okay, when I call second one which updates more parts of data, it always fails (details are maybe useless). \r\n\r\nThe only thing from config that I changed is that I added   \r\n```\r\nspring:\r\n  jpa:\r\n    init:\r\n      platform: org.eclipse.persistence.platform.database.PostgreSQLPlatform\r\n```\r\nOther changes to take into account are maybe upgrading ehcache version and also upgrading hibernate-types-52 to:\r\n```\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n   &lt;artifactId&gt;hibernate-types-60&lt;/artifactId&gt;\r\n   &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n(I used this for fulltext search https://dev.to/fabiothiroki/setup-spring-and-postgres-for-full-text-search-4n97 -  I had to rewrite SqlFunctionContributor to use PatternBasedSqmFunctionDescriptor instead of SQLFunctionTemplate)\r\n","title":"Springboot 3 hibernate repository save problem","body":"<p>I have been trying for the entire day to migrate from springboot 2.7.9 to springboot 3.0.5\nI have encountered a problem with the new hibernate:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.persister.collection.CollectionPersister.getRole()&quot; because &quot;this.loadedPersister&quot; is null\n</code></pre>\n<p>when calling repository.save(entity)</p>\n<p>The repository extends JpaRepository. The entity contains oneToMany, manyToOne fields.\nWeirdly it happens only in some cases (but consistently) - f.e. I have 2 update methods, when I call one which updates part of data it's always okay, when I call second one which updates more parts of data, it always fails (details are maybe useless).</p>\n<p>The only thing from config that I changed is that I added</p>\n<pre><code>spring:\n  jpa:\n    init:\n      platform: org.eclipse.persistence.platform.database.PostgreSQLPlatform\n</code></pre>\n<p>Other changes to take into account are maybe upgrading ehcache version and also upgrading hibernate-types-52 to:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n   &lt;artifactId&gt;hibernate-types-60&lt;/artifactId&gt;\n   &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>(I used this for fulltext search <a href=\"https://dev.to/fabiothiroki/setup-spring-and-postgres-for-full-text-search-4n97\" rel=\"noreferrer\">https://dev.to/fabiothiroki/setup-spring-and-postgres-for-full-text-search-4n97</a> -  I had to rewrite SqlFunctionContributor to use PatternBasedSqmFunctionDescriptor instead of SQLFunctionTemplate)</p>\n"},{"tags":["java","lombok"],"answers":[{"comments":[{"owner":{"account_id":21381128,"reputation":11,"user_id":15747032,"display_name":"ÐÐ³Ð¾ÑÑ ÐÐ°ÑÐºÐ¸Ð²ÑÐºÐ¸Ð¹"},"score":0,"creation_date":1682417289,"post_id":76088879,"comment_id":134208259,"body_markdown":"Thank you very much! clearSkils().skills(&lt;a new set of skills&gt;) is another good solution.","body":"Thank you very much! clearSkils().skills(&lt;a new set of skills&gt;) is another good solution."}],"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682315367,"creation_date":1682315367,"answer_id":76088879,"question_id":76088797,"body_markdown":"You can call `clearSkills()` first to completely reset the contents of that collection. Otherwise all values remain; with `@Singular` all setter methods act like &quot;adders&quot;.","title":"How to build new instance of Value object from existng one with updated collection property using Lombok Builder?","body":"<p>You can call <code>clearSkills()</code> first to completely reset the contents of that collection. Otherwise all values remain; with <code>@Singular</code> all setter methods act like &quot;adders&quot;.</p>\n"},{"comments":[{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1682326589,"post_id":76088949,"comment_id":134191725,"body_markdown":"In fact, lombok&#39;s `toBuilder()` _does_ a (shallow) copy of `@Singular` collections. I.e., the set in the to-be-created `Person` instance will be a new set. There is no need to manually clone the `skills` set.","body":"In fact, lombok&#39;s <code>toBuilder()</code> <i>does</i> a (shallow) copy of <code>@Singular</code> collections. I.e., the set in the to-be-created <code>Person</code> instance will be a new set. There is no need to manually clone the <code>skills</code> set."}],"tags":[],"owner":{"account_id":13996510,"reputation":400,"user_id":10109156,"display_name":"tornadoradon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682316128,"creation_date":1682316128,"answer_id":76088949,"question_id":76088797,"body_markdown":"First of all your `.skills(Collections.emptySet())` method just adds empty set on top of existing one.\r\n\r\nIf you want to clear it just use `clear() method:\r\n```java\r\n//to make it work, add @Getter annotation on top of your Person class\r\njohnUpgraded.getSkills().clear();\r\n```\r\n\r\n&gt; Is it possible to create a copy of person...\r\n\r\nAccording to this [answer](https://stackoverflow.com/a/56808295/10109156) `toBuilder()` method doesn&#39;t do deep copy. So `jonh`, `johnUpgraded` and `johnDowngraded` are the same object.\r\n\r\nTo make copy of your object you have to use `Person.builder()` again, like this:\r\n```java\r\n        Person jonh = Person.builder()\r\n                .name(&quot;John&quot;)\r\n                .build();\r\n\r\n        Person johnUpgraded = Person.builder()\r\n                .name(jonh.getName()) \r\n                .skill(&quot;Java&quot;)\r\n                .skill(&quot;Spring&quot;)\r\n                .build();\r\n```\r\n\r\n----\r\n\r\nUpdate:\r\n\r\nTo [clone your Set](https://www.baeldung.com/java-copy-sets#copyConstructor), create another one based on previous one.\r\n```\r\n.skill(new HashSet&lt;&gt;(jonh.getSkills()));\r\n```","title":"How to build new instance of Value object from existng one with updated collection property using Lombok Builder?","body":"<p>First of all your <code>.skills(Collections.emptySet())</code> method just adds empty set on top of existing one.</p>\n<p>If you want to clear it just use `clear() method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//to make it work, add @Getter annotation on top of your Person class\njohnUpgraded.getSkills().clear();\n</code></pre>\n<blockquote>\n<p>Is it possible to create a copy of person...</p>\n</blockquote>\n<p>According to this <a href=\"https://stackoverflow.com/a/56808295/10109156\">answer</a> <code>toBuilder()</code> method doesn't do deep copy. So <code>jonh</code>, <code>johnUpgraded</code> and <code>johnDowngraded</code> are the same object.</p>\n<p>To make copy of your object you have to use <code>Person.builder()</code> again, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Person jonh = Person.builder()\n                .name(&quot;John&quot;)\n                .build();\n\n        Person johnUpgraded = Person.builder()\n                .name(jonh.getName()) \n                .skill(&quot;Java&quot;)\n                .skill(&quot;Spring&quot;)\n                .build();\n</code></pre>\n<hr />\n<p>Update:</p>\n<p>To <a href=\"https://www.baeldung.com/java-copy-sets#copyConstructor\" rel=\"nofollow noreferrer\">clone your Set</a>, create another one based on previous one.</p>\n<pre><code>.skill(new HashSet&lt;&gt;(jonh.getSkills()));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13996510,"reputation":400,"user_id":10109156,"display_name":"tornadoradon"},"score":0,"creation_date":1682326590,"post_id":76089223,"comment_id":134191726,"body_markdown":"Well done. So, it creates deep copy and replaces `skills`?","body":"Well done. So, it creates deep copy and replaces <code>skills</code>?"},{"owner":{"account_id":13996510,"reputation":400,"user_id":10109156,"display_name":"tornadoradon"},"score":0,"creation_date":1682326679,"post_id":76089223,"comment_id":134191743,"body_markdown":"can we do the same thing with multiple fields?","body":"can we do the same thing with multiple fields?"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1682326929,"post_id":76089223,"comment_id":134191790,"body_markdown":"yes, you can add `@With` for multiple fields or at the class level (if you want to apply it to all of them). here is the documentation for it: https://projectlombok.org/features/With","body":"yes, you can add <code>@With</code> for multiple fields or at the class level (if you want to apply it to all of them). here is the documentation for it: <a href=\"https://projectlombok.org/features/With\" rel=\"nofollow noreferrer\">projectlombok.org/features/With</a>"},{"owner":{"account_id":21381128,"reputation":11,"user_id":15747032,"display_name":"ÐÐ³Ð¾ÑÑ ÐÐ°ÑÐºÐ¸Ð²ÑÐºÐ¸Ð¹"},"score":0,"creation_date":1682416662,"post_id":76089223,"comment_id":134208091,"body_markdown":"Thank you very much! @With annotation solves the problem)","body":"Thank you very much! @With annotation solves the problem)"}],"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682318930,"creation_date":1682318930,"answer_id":76089223,"question_id":76088797,"body_markdown":"You can do this cleanly with a `@With`-er. This annotation generates a `with` method that is similar to a setter, but it will return a new instance of the object. In my opinion this is the way to go for immutable objects:\r\n\r\n    import lombok.With;\r\n\r\n    @Value\r\n    @Builder\r\n    static class Person {\r\n    \tString name;\r\n    \t@With\r\n    \t@Singular\r\n    \tSet&lt;String&gt; skills;\r\n    }\r\n\r\n    @Test\r\n    void test() {\r\n    \tPerson jonh = Person.builder()\r\n    \t\t\t.name(&quot;John&quot;)\r\n    \t\t\t.build();\r\n    \tSystem.out.println(jonh);\r\n    \r\n    \tPerson johnUpgraded = jonh.withSkills(Set.of(\r\n    \t\t\t&quot;Java&quot;,\r\n    \t\t\t&quot;Spring&quot;\r\n    \t));\r\n    \tSystem.out.println(johnUpgraded);\r\n    }\r\n\r\n \r\n","title":"How to build new instance of Value object from existng one with updated collection property using Lombok Builder?","body":"<p>You can do this cleanly with a <code>@With</code>-er. This annotation generates a <code>with</code> method that is similar to a setter, but it will return a new instance of the object. In my opinion this is the way to go for immutable objects:</p>\n<pre><code>import lombok.With;\n\n@Value\n@Builder\nstatic class Person {\n    String name;\n    @With\n    @Singular\n    Set&lt;String&gt; skills;\n}\n\n@Test\nvoid test() {\n    Person jonh = Person.builder()\n            .name(&quot;John&quot;)\n            .build();\n    System.out.println(jonh);\n\n    Person johnUpgraded = jonh.withSkills(Set.of(\n            &quot;Java&quot;,\n            &quot;Spring&quot;\n    ));\n    System.out.println(johnUpgraded);\n}\n</code></pre>\n"}],"owner":{"account_id":21381128,"reputation":11,"user_id":15747032,"display_name":"ÐÐ³Ð¾ÑÑ ÐÐ°ÑÐºÐ¸Ð²ÑÐºÐ¸Ð¹"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1682318930,"creation_date":1682314178,"question_id":76088797,"body_markdown":"I&#39;m using immutable objects with a collection property. Something like this:\r\n\r\n```\r\n@Value\r\n@Builder(toBuilder = true)\r\nclass Person {\r\n\r\n    String name;\r\n    @Singular\r\n    Set&lt;String&gt; skills;\r\n\r\n}\r\n```\r\n\r\nWhen I create a new instance of Person from existing one but with updated skills it seems that collecction is not updated.\r\n\r\n\r\n\r\n```\r\n        Person jonh = Person.builder()\r\n                .name(&quot;John&quot;)\r\n                .build();\r\n        System.out.println(jonh);\r\n\r\n        Person johnUpgraded = jonh.toBuilder()\r\n                .skill(&quot;Java&quot;)\r\n                .skill(&quot;Spring&quot;)\r\n                .build();\r\n        System.out.println(johnUpgraded);\r\n\r\n        Person johnDowngraded = johnUpgraded.toBuilder()\r\n                .skills(Collections.emptySet())\r\n                .build();\r\n        System.out.println(johnDowngraded);\r\n```\r\n\r\nIt prints:\r\n\r\n```\r\nPerson(name=John, skills=[])\r\nPerson(name=John, skills=[Java, Spring])\r\nPerson(name=John, skills=[Java, Spring])\r\n```\r\nIs it possible to create a copy of person and set other skills?\r\n\r\nMany thanks for considering my request!\r\n\r\n\r\n\r\nIs it possible to create a copy of person and set other skills?","title":"How to build new instance of Value object from existng one with updated collection property using Lombok Builder?","body":"<p>I'm using immutable objects with a collection property. Something like this:</p>\n<pre><code>@Value\n@Builder(toBuilder = true)\nclass Person {\n\n    String name;\n    @Singular\n    Set&lt;String&gt; skills;\n\n}\n</code></pre>\n<p>When I create a new instance of Person from existing one but with updated skills it seems that collecction is not updated.</p>\n<pre><code>        Person jonh = Person.builder()\n                .name(&quot;John&quot;)\n                .build();\n        System.out.println(jonh);\n\n        Person johnUpgraded = jonh.toBuilder()\n                .skill(&quot;Java&quot;)\n                .skill(&quot;Spring&quot;)\n                .build();\n        System.out.println(johnUpgraded);\n\n        Person johnDowngraded = johnUpgraded.toBuilder()\n                .skills(Collections.emptySet())\n                .build();\n        System.out.println(johnDowngraded);\n</code></pre>\n<p>It prints:</p>\n<pre><code>Person(name=John, skills=[])\nPerson(name=John, skills=[Java, Spring])\nPerson(name=John, skills=[Java, Spring])\n</code></pre>\n<p>Is it possible to create a copy of person and set other skills?</p>\n<p>Many thanks for considering my request!</p>\n<p>Is it possible to create a copy of person and set other skills?</p>\n"},{"tags":["java","android","kotlin","android-fragments","android-lifecycle"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1682303324,"post_id":76088036,"comment_id":134188748,"body_markdown":"There is almost never a reason to override `onAttach` or `onCreate`. Your code in `onActivityCreated` should be moved to `onViewCreated`, but it should still work even though it&#39;s deprecated. What exactly is the failure you see if you have the code in `onViewCreated`? You don&#39;t need to add an observer of the Activity lifecycle. The Fragment already has its own lifecycle functions.","body":"There is almost never a reason to override <code>onAttach</code> or <code>onCreate</code>. Your code in <code>onActivityCreated</code> should be moved to <code>onViewCreated</code>, but it should still work even though it&#39;s deprecated. What exactly is the failure you see if you have the code in <code>onViewCreated</code>? You don&#39;t need to add an observer of the Activity lifecycle. The Fragment already has its own lifecycle functions."},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1682304659,"post_id":76088036,"comment_id":134188846,"body_markdown":"Review the [Fragment Lifecycle](https://developer.android.com/guide/fragments/lifecycle). The error is clear - you are using the `ViewModel` in `onCreate` before it&#39;s initialized. Initialize it first.","body":"Review the <a href=\"https://developer.android.com/guide/fragments/lifecycle\" rel=\"nofollow noreferrer\">Fragment Lifecycle</a>. The error is clear - you are using the <code>ViewModel</code> in <code>onCreate</code> before it&#39;s initialized. Initialize it first."},{"owner":{"account_id":28377965,"reputation":13,"user_id":21705710,"display_name":"epicobadah"},"score":0,"creation_date":1682312288,"post_id":76088036,"comment_id":134189460,"body_markdown":"@Tenfour04 So when just moving my code from &quot;onActivityCreated&quot; to &quot;onViewCreated&quot;, my &quot;save contact&quot; button doesn&#39;t work, doesn&#39;t cause a crash or anything weird. I guess that could just mean my code isn&#39;t doing it correct if it should work even if it isn&#39;t deprecated, I just don&#39;t see what could be wrong.","body":"@Tenfour04 So when just moving my code from &quot;onActivityCreated&quot; to &quot;onViewCreated&quot;, my &quot;save contact&quot; button doesn&#39;t work, doesn&#39;t cause a crash or anything weird. I guess that could just mean my code isn&#39;t doing it correct if it should work even if it isn&#39;t deprecated, I just don&#39;t see what could be wrong."}],"answers":[{"tags":[],"owner":{"account_id":27354987,"reputation":1,"user_id":20863540,"display_name":"Bi Gou"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682306915,"creation_date":1682306915,"answer_id":76088388,"question_id":76088036,"body_markdown":"    viewModel.result.observe(viewLifecycleOwner, Observer{\r\n        val message = if (it == null) {\r\n            getString(R.string.added_contact)\r\n        }else{\r\n            getString(R.string.error, it.message)\r\n        }\r\n        Toast.makeText(requireContext(),message,Toast.LENGTH_SHORT).show()\r\n        dismiss()\r\n    })\r\n\r\nat here,viewLifecycleOwner must be initialized","title":"onActivityCreated() is deprecated and I think it&#39;s causing my save contact feature to not work, but no idea how to fix it","body":"<pre><code>viewModel.result.observe(viewLifecycleOwner, Observer{\n    val message = if (it == null) {\n        getString(R.string.added_contact)\n    }else{\n        getString(R.string.error, it.message)\n    }\n    Toast.makeText(requireContext(),message,Toast.LENGTH_SHORT).show()\n    dismiss()\n})\n</code></pre>\n<p>at here,viewLifecycleOwner must be initialized</p>\n"},{"tags":[],"owner":{"account_id":11224936,"reputation":31,"user_id":8234834,"display_name":"maru"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682316844,"creation_date":1682316696,"answer_id":76088997,"question_id":76088036,"body_markdown":"viewmodel is not initialized.\r\nIn the your code, the viewmodel is initialized in onCreatedView, but an error occurs because onCreate operates first in the life cycle.\r\nI think it would be better to create it by default because no additional options are applied when creating the viewmodel.\r\n\r\n```kotlin\r\nprivate val viewModel: ContactViewModel by viewModels() \r\n```\r\n\r\n\r\n\r\n","title":"onActivityCreated() is deprecated and I think it&#39;s causing my save contact feature to not work, but no idea how to fix it","body":"<p>viewmodel is not initialized.\nIn the your code, the viewmodel is initialized in onCreatedView, but an error occurs because onCreate operates first in the life cycle.\nI think it would be better to create it by default because no additional options are applied when creating the viewmodel.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private val viewModel: ContactViewModel by viewModels() \n</code></pre>\n"}],"owner":{"account_id":28377965,"reputation":13,"user_id":21705710,"display_name":"epicobadah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682318738,"creation_date":1682299249,"question_id":76088036,"body_markdown":"I have been working on an Android app for a project and have to make a communications button that basically just works as a contacts app. So I followed a tutorial on how to make it, but he uses some deprecated libraries, including a lot of lifecycle. To make the &quot;save contact&quot; button work on the app, he did an ovverride on the &quot;onActivityCreated&quot; function. However, onActivityCreated was deprecated and I&#39;ve been looking for ways to fix it but to no avail. \r\n\r\nThe code below is my AddContactDialogFragment.kt class, where I am trying to actually make the addcontact happen, so the issue is most likely in there. You can see the commented out override of &quot;onViewCreated&quot; which I tried after seeing onActivityCreated is deprecated. \r\n\r\n```\r\npackage com.example.mavhealth.ui\r\n\r\nimport android.content.Context\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.Toast\r\nimport androidx.fragment.app.DialogFragment\r\nimport androidx.lifecycle.Observer\r\nimport androidx.lifecycle.ViewModelProvider\r\nimport com.example.mavhealth.R\r\nimport com.example.mavhealth.data.Contact\r\nimport com.example.mavhealth.databinding.FragmentAddContactDialogBinding\r\nimport androidx.lifecycle.DefaultLifecycleObserver\r\n\r\nclass AddContactDialogFragment : DialogFragment(), DefaultLifecycleObserver {\r\n    private var _binding: FragmentAddContactDialogBinding? = null\r\n    private val binding get() = _binding!!\r\n    private lateinit var viewModel: ContactViewModel\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?)\r\n    {\r\n        super&lt;DialogFragment&gt;.onCreate(savedInstanceState)\r\n        setStyle(STYLE_NO_TITLE, android.R.style.Theme_DeviceDefault_Light_Dialog_MinWidth)\r\n        activity?.lifecycle?.removeObserver(this)\r\n\r\n        viewModel.result.observe(viewLifecycleOwner, Observer{\r\n            val message = if (it == null) {\r\n                getString(R.string.added_contact)\r\n            }else{\r\n                getString(R.string.error, it.message)\r\n            }\r\n            Toast.makeText(requireContext(),message,Toast.LENGTH_SHORT).show()\r\n            dismiss()\r\n        })\r\n        binding.buttonAdd.setOnClickListener {\r\n            val fullName = binding.editTextFullName.text.toString().trim()\r\n            val contactNumber = binding.editTextContact.toString().trim()\r\n            if(fullName.isEmpty())\r\n            {\r\n                binding.editTextFullName.error = &quot;This is a required field&quot;\r\n                return@setOnClickListener\r\n            }\r\n            if(contactNumber.isEmpty())\r\n            {\r\n                binding.editTextContact.error = &quot;This is a required field&quot;\r\n                return@setOnClickListener\r\n            }\r\n            val contact = Contact()\r\n            contact.name = fullName\r\n            contact.number = contactNumber\r\n            viewModel.addContact(contact)\r\n        }\r\n    }\r\n\r\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View?\r\n    {\r\n        _binding = FragmentAddContactDialogBinding.inflate(inflater, container, false)\r\n        viewModel = ViewModelProvider(this)[ContactViewModel::class.java]\r\n        return binding.root\r\n    }\r\n/*\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?)\r\n    {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        viewModel.result.observe(viewLifecycleOwner, Observer{\r\n            val message = if (it == null) {\r\n                getString(R.string.added_contact)\r\n            }else{\r\n                getString(R.string.error, it.message)\r\n            }\r\n            Toast.makeText(requireContext(),message,Toast.LENGTH_SHORT).show()\r\n            dismiss()\r\n        })\r\n        binding.buttonAdd.setOnClickListener {\r\n            val fullName = binding.editTextFullName.text.toString().trim()\r\n            val contactNumber = binding.editTextContact.toString().trim()\r\n            if(fullName.isEmpty())\r\n            {\r\n                binding.editTextFullName.error = &quot;This is a required field&quot;\r\n                return@setOnClickListener\r\n            }\r\n            if(contactNumber.isEmpty())\r\n            {\r\n                binding.editTextContact.error = &quot;This is a required field&quot;\r\n                return@setOnClickListener\r\n            }\r\n            val contact = Contact()\r\n            contact.name = fullName\r\n            contact.number = contactNumber\r\n            viewModel.addContact(contact)\r\n        }\r\n    }\r\n*/\r\n\r\n    override fun onAttach(context: Context)\r\n    {\r\n        super.onAttach(context)\r\n        activity?.lifecycle?.addObserver(this)\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nThis code block is my ContactViewModel.kt class, where I do have a addContact function, so this could also be where things are going wrong.\r\n```\r\npackage com.example.mavhealth.ui\r\n\r\nimport androidx.lifecycle.LiveData\r\nimport androidx.lifecycle.MutableLiveData\r\nimport androidx.lifecycle.ViewModel\r\nimport com.example.mavhealth.data.Contact\r\nimport com.example.mavhealth.data.NODE_CONTACTS\r\nimport com.google.firebase.database.FirebaseDatabase\r\n\r\nclass ContactViewModel: ViewModel()\r\n{\r\n    private val dbContacts = FirebaseDatabase.getInstance().getReference(NODE_CONTACTS)\r\n    private val _result = MutableLiveData&lt;Exception?&gt;()\r\n    val result: LiveData&lt;Exception?&gt; get() = _result\r\n    fun addContact(contact: Contact)\r\n    {\r\n        contact.id = dbContacts.push().key\r\n        dbContacts.child(contact.id!!).setValue(contact).addOnCompleteListener{\r\n            if(it.isSuccessful)\r\n            {\r\n                _result.value = null\r\n            }\r\n            else\r\n            {\r\n                _result.value = it.exception\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\n[![For reference, here is the exception I get when I click the &quot;save contact&quot; button](https://i.stack.imgur.com/1pq4h.png)](https://i.stack.imgur.com/1pq4h.png)\r\n\r\n\r\n\r\nI have tried swapping the &quot;onActivityCreated&quot; override to &quot;onViewCreated&quot;, but that didn&#39;t work. Either the override didn&#39;t work, or my code to make the save contact work is not correct. Afterwards, I saw some posts saying to override &quot;onCreate&quot; and &quot;onAttach&quot;, but when I did that, not only did the save contact not work, but clicking save contact now crashed my app. I have no idea if I&#39;m doing it incorrectly, or if the correct solution is completely passing me, but I would appreciate any help.\r\n\r\nUpdate 1: I tried initializing viewmodel with the commented out onViewCreated code and while it did not crash, the save contact still did not work. This has me wondering if I set up my firebase incorrectly in that it can&#39;t read/write.","title":"onActivityCreated() is deprecated and I think it&#39;s causing my save contact feature to not work, but no idea how to fix it","body":"<p>I have been working on an Android app for a project and have to make a communications button that basically just works as a contacts app. So I followed a tutorial on how to make it, but he uses some deprecated libraries, including a lot of lifecycle. To make the &quot;save contact&quot; button work on the app, he did an ovverride on the &quot;onActivityCreated&quot; function. However, onActivityCreated was deprecated and I've been looking for ways to fix it but to no avail.</p>\n<p>The code below is my AddContactDialogFragment.kt class, where I am trying to actually make the addcontact happen, so the issue is most likely in there. You can see the commented out override of &quot;onViewCreated&quot; which I tried after seeing onActivityCreated is deprecated.</p>\n<pre><code>package com.example.mavhealth.ui\n\nimport android.content.Context\nimport android.os.Bundle\nimport androidx.fragment.app.Fragment\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.Toast\nimport androidx.fragment.app.DialogFragment\nimport androidx.lifecycle.Observer\nimport androidx.lifecycle.ViewModelProvider\nimport com.example.mavhealth.R\nimport com.example.mavhealth.data.Contact\nimport com.example.mavhealth.databinding.FragmentAddContactDialogBinding\nimport androidx.lifecycle.DefaultLifecycleObserver\n\nclass AddContactDialogFragment : DialogFragment(), DefaultLifecycleObserver {\n    private var _binding: FragmentAddContactDialogBinding? = null\n    private val binding get() = _binding!!\n    private lateinit var viewModel: ContactViewModel\n\n    override fun onCreate(savedInstanceState: Bundle?)\n    {\n        super&lt;DialogFragment&gt;.onCreate(savedInstanceState)\n        setStyle(STYLE_NO_TITLE, android.R.style.Theme_DeviceDefault_Light_Dialog_MinWidth)\n        activity?.lifecycle?.removeObserver(this)\n\n        viewModel.result.observe(viewLifecycleOwner, Observer{\n            val message = if (it == null) {\n                getString(R.string.added_contact)\n            }else{\n                getString(R.string.error, it.message)\n            }\n            Toast.makeText(requireContext(),message,Toast.LENGTH_SHORT).show()\n            dismiss()\n        })\n        binding.buttonAdd.setOnClickListener {\n            val fullName = binding.editTextFullName.text.toString().trim()\n            val contactNumber = binding.editTextContact.toString().trim()\n            if(fullName.isEmpty())\n            {\n                binding.editTextFullName.error = &quot;This is a required field&quot;\n                return@setOnClickListener\n            }\n            if(contactNumber.isEmpty())\n            {\n                binding.editTextContact.error = &quot;This is a required field&quot;\n                return@setOnClickListener\n            }\n            val contact = Contact()\n            contact.name = fullName\n            contact.number = contactNumber\n            viewModel.addContact(contact)\n        }\n    }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View?\n    {\n        _binding = FragmentAddContactDialogBinding.inflate(inflater, container, false)\n        viewModel = ViewModelProvider(this)[ContactViewModel::class.java]\n        return binding.root\n    }\n/*\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?)\n    {\n        super.onViewCreated(view, savedInstanceState)\n        viewModel.result.observe(viewLifecycleOwner, Observer{\n            val message = if (it == null) {\n                getString(R.string.added_contact)\n            }else{\n                getString(R.string.error, it.message)\n            }\n            Toast.makeText(requireContext(),message,Toast.LENGTH_SHORT).show()\n            dismiss()\n        })\n        binding.buttonAdd.setOnClickListener {\n            val fullName = binding.editTextFullName.text.toString().trim()\n            val contactNumber = binding.editTextContact.toString().trim()\n            if(fullName.isEmpty())\n            {\n                binding.editTextFullName.error = &quot;This is a required field&quot;\n                return@setOnClickListener\n            }\n            if(contactNumber.isEmpty())\n            {\n                binding.editTextContact.error = &quot;This is a required field&quot;\n                return@setOnClickListener\n            }\n            val contact = Contact()\n            contact.name = fullName\n            contact.number = contactNumber\n            viewModel.addContact(contact)\n        }\n    }\n*/\n\n    override fun onAttach(context: Context)\n    {\n        super.onAttach(context)\n        activity?.lifecycle?.addObserver(this)\n    }\n\n}\n</code></pre>\n<p>This code block is my ContactViewModel.kt class, where I do have a addContact function, so this could also be where things are going wrong.</p>\n<pre><code>package com.example.mavhealth.ui\n\nimport androidx.lifecycle.LiveData\nimport androidx.lifecycle.MutableLiveData\nimport androidx.lifecycle.ViewModel\nimport com.example.mavhealth.data.Contact\nimport com.example.mavhealth.data.NODE_CONTACTS\nimport com.google.firebase.database.FirebaseDatabase\n\nclass ContactViewModel: ViewModel()\n{\n    private val dbContacts = FirebaseDatabase.getInstance().getReference(NODE_CONTACTS)\n    private val _result = MutableLiveData&lt;Exception?&gt;()\n    val result: LiveData&lt;Exception?&gt; get() = _result\n    fun addContact(contact: Contact)\n    {\n        contact.id = dbContacts.push().key\n        dbContacts.child(contact.id!!).setValue(contact).addOnCompleteListener{\n            if(it.isSuccessful)\n            {\n                _result.value = null\n            }\n            else\n            {\n                _result.value = it.exception\n            }\n        }\n\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/1pq4h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1pq4h.png\" alt=\"For reference, here is the exception I get when I click the &quot;save contact&quot; button\" /></a></p>\n<p>I have tried swapping the &quot;onActivityCreated&quot; override to &quot;onViewCreated&quot;, but that didn't work. Either the override didn't work, or my code to make the save contact work is not correct. Afterwards, I saw some posts saying to override &quot;onCreate&quot; and &quot;onAttach&quot;, but when I did that, not only did the save contact not work, but clicking save contact now crashed my app. I have no idea if I'm doing it incorrectly, or if the correct solution is completely passing me, but I would appreciate any help.</p>\n<p>Update 1: I tried initializing viewmodel with the commented out onViewCreated code and while it did not crash, the save contact still did not work. This has me wondering if I set up my firebase incorrectly in that it can't read/write.</p>\n"},{"tags":["java","android","broadcastreceiver"],"comments":[{"owner":{"account_id":1281728,"reputation":73134,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"score":0,"creation_date":1682318414,"post_id":76088782,"comment_id":134190183,"body_markdown":"have you checked if your app is not falling into  &quot;Battery optimized&quot; settings or anything that physical device you test on does? Also, have you tried on another real device, best from different vendor (so different version of Android)?","body":"have you checked if your app is not falling into  &quot;Battery optimized&quot; settings or anything that physical device you test on does? Also, have you tried on another real device, best from different vendor (so different version of Android)?"}],"owner":{"account_id":22607733,"reputation":9,"user_id":16788398,"display_name":"Aman Mehra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682318228,"creation_date":1682313991,"question_id":76088782,"body_markdown":"I am working on an android app for data analysis built in java.\r\nOur app&#39;s functionalities needs our app to restart every time the device boots up.\r\nSo I learnt about broadcasts and broadcast receivers.\r\nAnd I&#39;ve implemented a broadcast receiver which looks like this:\r\n```\r\npublic class BootReceiver extends BroadcastReceiver {\r\n\r\n    String TAG = &quot;BootReceiver&quot;;\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {\r\n            Log.d(TAG, &quot;onReceive: Boot receiver received.&quot;);\r\n            String packageName = context.getPackageName();\r\n            Log.d(TAG, &quot;onReceive: Package name is: &quot;+ packageName);\r\n            Intent serviceIntent = new Intent(context, ForegroundService.class);\r\n            context.startForegroundService(serviceIntent);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;ve also added permissions and receiver in androidmanifest.xml like this:\r\n\r\n```\r\n&lt;uses-permission android:name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\r\n\r\n&lt;application&gt;...\r\n       &lt;receiver\r\n            android:name=&quot;.BootReceiver&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:label=&quot;@string/app_name&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n&lt;/application&gt;\r\n```\r\n\r\nSo I tried to run this app on Android TV emulator device version 11 and 10. The app as expected restarted when the emulator reboots. But the issue is when I tried the same apk with real/physical android mobile device version 11 it didn&#39;t restarted and as it can be seen that I&#39;ve added some logs for debugging in my BootReceiver broadcast receiver. These alsa can&#39;t be seen in logcat of android studio in case of my android mobile device.\r\n\r\nSo I am bit confused is there any difference in emulators and real devices or am I completely searching in the wrong direction?\r\n\r\nAny help would be appreciated!\r\n\r\nThanks In Advance!","title":"BootUp broadcast not working? Android Emulator vs Real Devices. Testing an app on both","body":"<p>I am working on an android app for data analysis built in java.\nOur app's functionalities needs our app to restart every time the device boots up.\nSo I learnt about broadcasts and broadcast receivers.\nAnd I've implemented a broadcast receiver which looks like this:</p>\n<pre><code>public class BootReceiver extends BroadcastReceiver {\n\n    String TAG = &quot;BootReceiver&quot;;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {\n            Log.d(TAG, &quot;onReceive: Boot receiver received.&quot;);\n            String packageName = context.getPackageName();\n            Log.d(TAG, &quot;onReceive: Package name is: &quot;+ packageName);\n            Intent serviceIntent = new Intent(context, ForegroundService.class);\n            context.startForegroundService(serviceIntent);\n        }\n    }\n\n}\n</code></pre>\n<p>I've also added permissions and receiver in androidmanifest.xml like this:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\n\n&lt;application&gt;...\n       &lt;receiver\n            android:name=&quot;.BootReceiver&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;true&quot;\n            android:label=&quot;@string/app_name&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n&lt;/application&gt;\n</code></pre>\n<p>So I tried to run this app on Android TV emulator device version 11 and 10. The app as expected restarted when the emulator reboots. But the issue is when I tried the same apk with real/physical android mobile device version 11 it didn't restarted and as it can be seen that I've added some logs for debugging in my BootReceiver broadcast receiver. These alsa can't be seen in logcat of android studio in case of my android mobile device.</p>\n<p>So I am bit confused is there any difference in emulators and real devices or am I completely searching in the wrong direction?</p>\n<p>Any help would be appreciated!</p>\n<p>Thanks In Advance!</p>\n"},{"tags":["java","multithreading","concurrency","producer-consumer"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1682065906,"post_id":76070173,"comment_id":134160360,"body_markdown":"why not have as many threads as your addresses? Then each thread can correspond to an address, and if a task is received from a specific address, pass it to the corresponding thread and that thread will add it to its own internal queue. (each thread only receives from one address and all the other threads wait/block on their own internal queue)","body":"why not have as many threads as your addresses? Then each thread can correspond to an address, and if a task is received from a specific address, pass it to the corresponding thread and that thread will add it to its own internal queue. (each thread only receives from one address and all the other threads wait/block on their own internal queue)"},{"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"score":0,"creation_date":1682066357,"post_id":76070173,"comment_id":134160445,"body_markdown":"would that be counterintuitive? I am currently using NIO Selector to manage all my datagram channels to avoid the one-thread-per-channel that Datagram Socket uses. and that sounds like a convoluted thread per channel using NIO selector instead.","body":"would that be counterintuitive? I am currently using NIO Selector to manage all my datagram channels to avoid the one-thread-per-channel that Datagram Socket uses. and that sounds like a convoluted thread per channel using NIO selector instead."},{"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"score":1,"creation_date":1682174775,"post_id":76070173,"comment_id":134175585,"body_markdown":"I think I solved the issue! I ll update the code above with a working version","body":"I think I solved the issue! I ll update the code above with a working version"}],"answers":[{"comments":[{"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"score":0,"creation_date":1682068373,"post_id":76071611,"comment_id":134160895,"body_markdown":"i took a look at the thread cpu usage using top -n 1 -H -p [PID], it seems each of the consumer threads use about approximately 6.6% to 13.3% per thread. Though it could be a down time now which causes slow to no multicasts.","body":"i took a look at the thread cpu usage using top -n 1 -H -p [PID], it seems each of the consumer threads use about approximately 6.6% to 13.3% per thread. Though it could be a down time now which causes slow to no multicasts."},{"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"score":0,"creation_date":1682304750,"post_id":76071611,"comment_id":134188855,"body_markdown":"I just took a look at the cpu usage again. At peak hours, it takes up to 99.9% CPU for the consumer threads, however producer threads are like 0-6.7% I m assuming it is very easy for producers to produce, and fill my queue buffers, but the consumer takes time to process and empty the buffer, so there is always excess tasks so consumers run non stop","body":"I just took a look at the cpu usage again. At peak hours, it takes up to 99.9% CPU for the consumer threads, however producer threads are like 0-6.7% I m assuming it is very easy for producers to produce, and fill my queue buffers, but the consumer takes time to process and empty the buffer, so there is always excess tasks so consumers run non stop"}],"tags":[],"owner":{"account_id":441496,"reputation":3100,"user_id":831614,"accept_rate":63,"display_name":"Soteric"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682067929,"creation_date":1682067929,"answer_id":76071611,"question_id":76070173,"body_markdown":"You can implement something like this.\r\n\r\nThere is a fixed set of threads equal to the number of CPU cores. Some dispatcher takes the task out of the queue, checks the channel, gets the available thread and marks that this thread is currently serving this channel (some sort of Map&lt;Channel, Thread&gt;). If the next task belongs to the same channel and the thread is still busy then the task should be added to that thread queue. If the task belongs to some other channel then get the next available thread. If all threads are busy then wait for the one to become available. Once all the tasks in the thread queue are done it is removed from the map and the thread is ready to process any other channel task.\r\n\r\nAs for your question regarding the number of threads. It depends on many internal factors that out of your control and usually testing is the best way to tune the number of threads. But the rule of thumb: if your task utilizes CPU for 100% (some intensive computation, math, sorting arrays and etc.) then the number of threads equal to the number of CPU cores will give you more or less optimal performance. If the task blocks for waiting some I/O operations, external service response (like DB or HTTP server) then you may increase the number of threads and this new number will depend on how much time the thread spends waiting.","title":"Should I have multiple threads more than cores in this situation?","body":"<p>You can implement something like this.</p>\n<p>There is a fixed set of threads equal to the number of CPU cores. Some dispatcher takes the task out of the queue, checks the channel, gets the available thread and marks that this thread is currently serving this channel (some sort of Map&lt;Channel, Thread&gt;). If the next task belongs to the same channel and the thread is still busy then the task should be added to that thread queue. If the task belongs to some other channel then get the next available thread. If all threads are busy then wait for the one to become available. Once all the tasks in the thread queue are done it is removed from the map and the thread is ready to process any other channel task.</p>\n<p>As for your question regarding the number of threads. It depends on many internal factors that out of your control and usually testing is the best way to tune the number of threads. But the rule of thumb: if your task utilizes CPU for 100% (some intensive computation, math, sorting arrays and etc.) then the number of threads equal to the number of CPU cores will give you more or less optimal performance. If the task blocks for waiting some I/O operations, external service response (like DB or HTTP server) then you may increase the number of threads and this new number will depend on how much time the thread spends waiting.</p>\n"}],"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76071611,"answer_count":1,"score":2,"last_activity_date":1682318205,"creation_date":1682055234,"question_id":76070173,"body_markdown":"I have data that comes in from several multicast addresses. In my task consumer thread, I have an array of reentrantlocks, each index corresponding to a multicast address. I will lock fairly on an address. because I want to ensure that each data must be processed sequentially/in correct order\r\n\r\n                    task = TASK_QUEUE.take(); //arrayblockingqueue\r\n                    lock = task.getUdpChannel().getLock();\r\n                    try {\r\n                        while (!lock.tryLock(TIMEOUT, TimeUnit.MILLISECONDS)){}  //busy spin for lock\r\n                        runTask(appenderIndex);\r\n                    } catch (InterruptedException e) {\r\n                        Thread.currentThread().interrupt();\r\n                    } finally {\r\n                        lock.unlock();\r\n                        LOGGER.info(&quot;{} {} {} {} {} |&quot;, () -&gt; ZonedDateTime.ofInstant(Instant.ofEpochMilli(millis), ZoneId.of(&quot;Asia/Hong_Kong&quot;)) ,\r\n                            () -&gt; remoteAdd.getHostName(), () -&gt; remotePort, () -&gt; ni,\r\n                            () -&gt; remaining);\r\n                    }\r\n\r\nChecking the logs, it seems that some threads are &quot;chattier&quot; than others. I currently have 3 threads, and if it were to interact with the 12 datagram packets sent from 239.2.1.1 55000 as seen below, I believe that the task consumers will behave as if it was single threaded for that amount of time, since all the other threads will be blocked waiting for their turn (only one thread is allowed to lock)\r\n\r\n[![one address sends more than the rest][1]][1]\r\n\r\nI am considering to use multiple threads, more than the amount of cores that I have - 12 task consumer threads vs 8 cores (excluding the main thread and producer threads). This should mean that the extra threads can process tasks that are being queued up without waiting for these series of tasks from that specific address to finish completely. \r\n\r\nIs it reasonable to have more threads than cores? Would it be better to find out how to have a backlog of tasks (other threads pass tasks from 239.2.1.1 55000 to the thread that currently has the corresponding lock)\r\n\r\nI did read [this](https://stackoverflow.com/a/3126400/21324690), which gives me the idea that having more threads is better, but how many more threads would it be reasonable to have?\r\n\r\n  [1]: https://i.stack.imgur.com/8u1bW.png\r\n\r\nI have wrote some sample code as follows, The following is a working version that is infinitely looping, and has a working task dispatcher.\r\n\r\n    public class Main {\r\n    \t\r\n    \tprivate final ArrayBlockingQueue&lt;Task&gt; taskPool;\r\n    \tprivate final ArrayBlockingQueue&lt;Task&gt; taskQueue;\r\n    \tprivate static int capacity = 2000;\r\n    \tprivate static int threads = 3;\r\n    \tprivate Thread[] producers;\r\n    \tprivate Thread[] consumers;\r\n    \t\r\n    \tpublic Main() {\r\n    \t\tthis.taskPool = new ArrayBlockingQueue&lt;&gt;(capacity);\r\n    \t\tthis.taskQueue = new ArrayBlockingQueue&lt;&gt;(capacity, true);\r\n    \t\tthis.producers = new Thread[threads];\r\n    \t\tconsumers = new Thread[threads];\r\n    \t\tReentrantLock[] locks = new ReentrantLock[4]; \r\n    \t\tTaskConsumer[] cArr = new TaskConsumer[threads];\r\n    \t\tTaskDispatch dispatch = new TaskDispatch(this.taskQueue, cArr, threads);\r\n    \t\tfor (int i=0; i&lt; locks.length; i++) {\r\n    \t\t\tlocks[i] = new ReentrantLock();\r\n    \t\t}\r\n    \t\tfor (int i=0; i&lt; threads; i++) {\r\n    \t\t\tthis.producers[i] = new Thread(new TaskProducer(this.taskPool, this.taskQueue), &quot;producer&quot;+i);\r\n    \t\t\tthis.producers[i].start();\r\n    \t\t\tcArr[i] = new TaskConsumer(this.taskPool, locks, capacity, dispatch);\r\n    \t\t\tthis.consumers[i] = new Thread(cArr[i], &quot;consumer&quot;+i);\r\n    \t\t\tthis.consumers[i].start();\r\n    \t\t}\r\n    \t\tThread dThread = new Thread(dispatch, &quot;dispatch&quot;);\r\n    \t\tdThread.start();\r\n    \t}\r\n    \t\r\n    \tpublic void fillPool() throws InterruptedException {\r\n    \t\tfor (int i=0; i&lt; capacity; i++) {\r\n    \t\t\ttaskPool.put(new Task());\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n    \r\n    public class TaskProducer implements Runnable{\r\n    \tprivate final static String[] randomStrings = {&quot;random&quot;, &quot;payload&quot;, &quot;to&quot;, &quot;simulate&quot;};\r\n    \tprivate ArrayBlockingQueue&lt;Task&gt; TASK_POOL;\r\n    \tprivate ArrayBlockingQueue&lt;Task&gt; TASK_QUEUE;\r\n    \r\n    \tpublic TaskProducer(ArrayBlockingQueue&lt;Task&gt; pool, ArrayBlockingQueue&lt;Task&gt; queue) {\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t\tthis.TASK_POOL = pool;\r\n    \t\tthis.TASK_QUEUE = queue;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tTask task = null;\r\n    \t\tRandom rand = new Random();\r\n    \t\twhile (true) {\r\n    \t\t\tif (Thread.currentThread().isInterrupted()) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\tif (task == null) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\ttask = TASK_POOL.take();\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\tThread.currentThread().interrupt();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    //\t\t\tSystem.out.println(&quot;iterating&quot;+task);\r\n    \t\t\tif (task != null) {\r\n    \t\t\t\tint idx = rand.nextInt(0, 4);\r\n    \t\t\t\ttask.setId(idx);\r\n    \t\t\t\ttask.setData(Instant.now().toString());\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tTASK_QUEUE.put(task);\r\n    \t\t\t\t\ttask = null;\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\tThread.currentThread().interrupt();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n    \r\n    public class TaskConsumer implements Runnable {\r\n    \tprivate ArrayBlockingQueue&lt;Task&gt; TASK_POOL;\r\n    \tprivate ReentrantLock[] locks;\r\n    \tprivate ArrayBlockingQueue&lt;Task&gt; internalQueue;\r\n    \tprivate TaskDispatch dispatch;\r\n    \r\n    \tpublic TaskConsumer(ArrayBlockingQueue&lt;Task&gt; pool, ReentrantLock[] locks, int capacity, TaskDispatch dispatch) {\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t\tthis.TASK_POOL = pool;\r\n    \t\tthis.locks = locks;\r\n    \t\tthis.internalQueue = new ArrayBlockingQueue&lt;&gt;(capacity, true);\r\n    \t\tthis.dispatch = dispatch;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tTask task = null;\r\n    \t\twhile (true) {\r\n    //\t\t\tSystem.out.println(&quot;iterating &quot;+Thread.currentThread().getName());\r\n    \t\t\tif (Thread.currentThread().isInterrupted()) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\tif (task == null) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\ttask = internalQueue.take();\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\tThread.currentThread().interrupt();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif (task != null) {\r\n    \t\t\t\t//process\r\n    \t\t\t\tint id = task.getId();\r\n    \t\t\t\tSystem.out.println(Thread.currentThread().getName()+&quot; &quot;+task.getId()+&quot; &quot;+task.getData()+&quot; &quot;+Instant.now().toString());\r\n    \t\t\t\t//return\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tif (internalQueue.peek() == null) {\r\n    \t\t\t\t\t\tsynchronized (dispatch) {\r\n    \t\t\t\t\t\t\tif (internalQueue.peek() == null) {\r\n    \t\t\t\t\t\t\t\tdispatch.signalFreeConsumer(task.getId(), this);\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tTASK_POOL.put(task);\r\n    \t\t\t\t\ttask = null;\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\tThread.currentThread().interrupt();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic void putInternalQueue(Task t) throws InterruptedException {\r\n    \t\tthis.internalQueue.put(t);\r\n    \t}\r\n    \r\n    }\r\n    public class TaskDispatch implements Runnable {\r\n    \tprivate ConcurrentHashMap&lt;Integer , TaskConsumer&gt; mapping;\r\n    \tprivate ArrayBlockingQueue&lt;TaskConsumer&gt; freeConsumers;\r\n    \tprivate ArrayBlockingQueue&lt;Task&gt; TASK_QUEUE;\r\n    \tprivate TaskConsumer[] consumers;\r\n    \r\n    \tpublic TaskDispatch( ArrayBlockingQueue&lt;Task&gt; queue,TaskConsumer[] consumers, int threads) {\r\n    \t\tmapping = new ConcurrentHashMap&lt;&gt;(threads);\r\n    \t\tfreeConsumers = new ArrayBlockingQueue&lt;&gt;(threads);\r\n    \t\tthis.TASK_QUEUE = queue;\r\n    \t\tthis.consumers = consumers;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tfor (int i=0; i&lt; consumers.length; i++) {\r\n    \t\t\ttry {\r\n    \t\t\t\tfreeConsumers.put(consumers[i]);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tTask task = null;\r\n    \t\tTaskConsumer free = null;\r\n    \t\twhile (true) {\r\n    \t\t\tif (Thread.currentThread().isInterrupted()) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\tif (task == null) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\ttask = TASK_QUEUE.take();\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\tThread.currentThread().interrupt();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif (task != null) {\r\n    \t\t\t\tif (mapping.containsKey(task.getId())) {\r\n    \t\t\t\t\tsynchronized (this) {\r\n    \t\t\t\t\t\tif (mapping.containsKey(task.getId())) {\r\n    \t\t\t\t\t\t\ttry {\r\n    \t\t\t\t\t\t\t\tmapping.get(task.getId()).putInternalQueue(task);\r\n    \t\t\t\t\t\t\t\ttask = null;\r\n    \t\t\t\t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\t\t\t\tThread.currentThread().interrupt();\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}else {\r\n    \t\t\t\t\t\t\tcontinue;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}else {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tif (free == null) {\r\n    \t\t\t\t\t\t\tfree = freeConsumers.poll(5000, TimeUnit.MILLISECONDS);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\tif (free != null) {\r\n    \t\t\t\t\t\t\tsynchronized (this) {\r\n    \t\t\t\t\t\t\t\tmapping.putIfAbsent(task.getId(), free);\r\n    \t\t\t\t\t\t\t\tfree.putInternalQueue(task);\r\n    \t\t\t\t\t\t\t\ttask = null;\r\n    \t\t\t\t\t\t\t\tfree = null;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\t\tThread.currentThread().interrupt();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic void signalFreeConsumer(Integer id, TaskConsumer consumer) throws InterruptedException {\r\n    \t\tsynchronized (this) {\r\n    //\t\t\tSystem.out.println(&quot;removing &quot;+id+&quot; &quot;+Thread.currentThread().getName());\r\n    \t\t\tmapping.remove(id, consumer);\r\n    \t\t\tfreeConsumers.put(consumer);\r\n    //\t\t\tSystem.out.println(&quot;notify &quot;+Arrays.asList(freeConsumers.toArray()));\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n    public class Runner {\r\n    \r\n    \tpublic static void main(String[] args) throws InterruptedException {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tMain m = new Main();\r\n    \t\tm.fillPool();\r\n    \t}\r\n    \r\n    }\r\n    public class Task {\r\n    \tprivate int id;\r\n    \tprivate String data;\r\n    \t\r\n    \tpublic Task () {}\r\n    \r\n    \tpublic Task(int id, String dat) {\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t\tthis.id = id;\r\n    \t\tthis.data = dat;\r\n    \t}\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn this.id;\r\n    \t}\r\n    \r\n    \tpublic String getData() {\r\n    \t\treturn this.data;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic void setData(String data) {\r\n    \t\tthis.data = data;\r\n    \t}\r\n    \t\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;&quot;+id+&quot; &quot;+data;\r\n    \t}\r\n    }\r\n\r\n","title":"Should I have multiple threads more than cores in this situation?","body":"<p>I have data that comes in from several multicast addresses. In my task consumer thread, I have an array of reentrantlocks, each index corresponding to a multicast address. I will lock fairly on an address. because I want to ensure that each data must be processed sequentially/in correct order</p>\n<pre><code>                task = TASK_QUEUE.take(); //arrayblockingqueue\n                lock = task.getUdpChannel().getLock();\n                try {\n                    while (!lock.tryLock(TIMEOUT, TimeUnit.MILLISECONDS)){}  //busy spin for lock\n                    runTask(appenderIndex);\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                } finally {\n                    lock.unlock();\n                    LOGGER.info(&quot;{} {} {} {} {} |&quot;, () -&gt; ZonedDateTime.ofInstant(Instant.ofEpochMilli(millis), ZoneId.of(&quot;Asia/Hong_Kong&quot;)) ,\n                        () -&gt; remoteAdd.getHostName(), () -&gt; remotePort, () -&gt; ni,\n                        () -&gt; remaining);\n                }\n</code></pre>\n<p>Checking the logs, it seems that some threads are &quot;chattier&quot; than others. I currently have 3 threads, and if it were to interact with the 12 datagram packets sent from 239.2.1.1 55000 as seen below, I believe that the task consumers will behave as if it was single threaded for that amount of time, since all the other threads will be blocked waiting for their turn (only one thread is allowed to lock)</p>\n<p><a href=\"https://i.stack.imgur.com/8u1bW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8u1bW.png\" alt=\"one address sends more than the rest\" /></a></p>\n<p>I am considering to use multiple threads, more than the amount of cores that I have - 12 task consumer threads vs 8 cores (excluding the main thread and producer threads). This should mean that the extra threads can process tasks that are being queued up without waiting for these series of tasks from that specific address to finish completely.</p>\n<p>Is it reasonable to have more threads than cores? Would it be better to find out how to have a backlog of tasks (other threads pass tasks from 239.2.1.1 55000 to the thread that currently has the corresponding lock)</p>\n<p>I did read <a href=\"https://stackoverflow.com/a/3126400/21324690\">this</a>, which gives me the idea that having more threads is better, but how many more threads would it be reasonable to have?</p>\n<p>I have wrote some sample code as follows, The following is a working version that is infinitely looping, and has a working task dispatcher.</p>\n<pre><code>public class Main {\n    \n    private final ArrayBlockingQueue&lt;Task&gt; taskPool;\n    private final ArrayBlockingQueue&lt;Task&gt; taskQueue;\n    private static int capacity = 2000;\n    private static int threads = 3;\n    private Thread[] producers;\n    private Thread[] consumers;\n    \n    public Main() {\n        this.taskPool = new ArrayBlockingQueue&lt;&gt;(capacity);\n        this.taskQueue = new ArrayBlockingQueue&lt;&gt;(capacity, true);\n        this.producers = new Thread[threads];\n        consumers = new Thread[threads];\n        ReentrantLock[] locks = new ReentrantLock[4]; \n        TaskConsumer[] cArr = new TaskConsumer[threads];\n        TaskDispatch dispatch = new TaskDispatch(this.taskQueue, cArr, threads);\n        for (int i=0; i&lt; locks.length; i++) {\n            locks[i] = new ReentrantLock();\n        }\n        for (int i=0; i&lt; threads; i++) {\n            this.producers[i] = new Thread(new TaskProducer(this.taskPool, this.taskQueue), &quot;producer&quot;+i);\n            this.producers[i].start();\n            cArr[i] = new TaskConsumer(this.taskPool, locks, capacity, dispatch);\n            this.consumers[i] = new Thread(cArr[i], &quot;consumer&quot;+i);\n            this.consumers[i].start();\n        }\n        Thread dThread = new Thread(dispatch, &quot;dispatch&quot;);\n        dThread.start();\n    }\n    \n    public void fillPool() throws InterruptedException {\n        for (int i=0; i&lt; capacity; i++) {\n            taskPool.put(new Task());\n        }\n    }\n\n}\n\npublic class TaskProducer implements Runnable{\n    private final static String[] randomStrings = {&quot;random&quot;, &quot;payload&quot;, &quot;to&quot;, &quot;simulate&quot;};\n    private ArrayBlockingQueue&lt;Task&gt; TASK_POOL;\n    private ArrayBlockingQueue&lt;Task&gt; TASK_QUEUE;\n\n    public TaskProducer(ArrayBlockingQueue&lt;Task&gt; pool, ArrayBlockingQueue&lt;Task&gt; queue) {\n        // TODO Auto-generated constructor stub\n        this.TASK_POOL = pool;\n        this.TASK_QUEUE = queue;\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        Task task = null;\n        Random rand = new Random();\n        while (true) {\n            if (Thread.currentThread().isInterrupted()) {\n                break;\n            }\n            if (task == null) {\n                try {\n                    task = TASK_POOL.take();\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n//          System.out.println(&quot;iterating&quot;+task);\n            if (task != null) {\n                int idx = rand.nextInt(0, 4);\n                task.setId(idx);\n                task.setData(Instant.now().toString());\n                try {\n                    TASK_QUEUE.put(task);\n                    task = null;\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n        }\n    }\n\n}\n\npublic class TaskConsumer implements Runnable {\n    private ArrayBlockingQueue&lt;Task&gt; TASK_POOL;\n    private ReentrantLock[] locks;\n    private ArrayBlockingQueue&lt;Task&gt; internalQueue;\n    private TaskDispatch dispatch;\n\n    public TaskConsumer(ArrayBlockingQueue&lt;Task&gt; pool, ReentrantLock[] locks, int capacity, TaskDispatch dispatch) {\n        // TODO Auto-generated constructor stub\n        this.TASK_POOL = pool;\n        this.locks = locks;\n        this.internalQueue = new ArrayBlockingQueue&lt;&gt;(capacity, true);\n        this.dispatch = dispatch;\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        Task task = null;\n        while (true) {\n//          System.out.println(&quot;iterating &quot;+Thread.currentThread().getName());\n            if (Thread.currentThread().isInterrupted()) {\n                break;\n            }\n            if (task == null) {\n                try {\n                    task = internalQueue.take();\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n            if (task != null) {\n                //process\n                int id = task.getId();\n                System.out.println(Thread.currentThread().getName()+&quot; &quot;+task.getId()+&quot; &quot;+task.getData()+&quot; &quot;+Instant.now().toString());\n                //return\n                try {\n                    if (internalQueue.peek() == null) {\n                        synchronized (dispatch) {\n                            if (internalQueue.peek() == null) {\n                                dispatch.signalFreeConsumer(task.getId(), this);\n                            }\n                        }\n                    }\n                    TASK_POOL.put(task);\n                    task = null;\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n        }\n    }\n    \n    public void putInternalQueue(Task t) throws InterruptedException {\n        this.internalQueue.put(t);\n    }\n\n}\npublic class TaskDispatch implements Runnable {\n    private ConcurrentHashMap&lt;Integer , TaskConsumer&gt; mapping;\n    private ArrayBlockingQueue&lt;TaskConsumer&gt; freeConsumers;\n    private ArrayBlockingQueue&lt;Task&gt; TASK_QUEUE;\n    private TaskConsumer[] consumers;\n\n    public TaskDispatch( ArrayBlockingQueue&lt;Task&gt; queue,TaskConsumer[] consumers, int threads) {\n        mapping = new ConcurrentHashMap&lt;&gt;(threads);\n        freeConsumers = new ArrayBlockingQueue&lt;&gt;(threads);\n        this.TASK_QUEUE = queue;\n        this.consumers = consumers;\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        for (int i=0; i&lt; consumers.length; i++) {\n            try {\n                freeConsumers.put(consumers[i]);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n        Task task = null;\n        TaskConsumer free = null;\n        while (true) {\n            if (Thread.currentThread().isInterrupted()) {\n                break;\n            }\n            if (task == null) {\n                try {\n                    task = TASK_QUEUE.take();\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n            if (task != null) {\n                if (mapping.containsKey(task.getId())) {\n                    synchronized (this) {\n                        if (mapping.containsKey(task.getId())) {\n                            try {\n                                mapping.get(task.getId()).putInternalQueue(task);\n                                task = null;\n                            } catch (InterruptedException e) {\n                                Thread.currentThread().interrupt();\n                            }\n                        }else {\n                            continue;\n                        }\n                    }\n                }else {\n                    try {\n                        if (free == null) {\n                            free = freeConsumers.poll(5000, TimeUnit.MILLISECONDS);\n                        }\n                        \n                        if (free != null) {\n                            synchronized (this) {\n                                mapping.putIfAbsent(task.getId(), free);\n                                free.putInternalQueue(task);\n                                task = null;\n                                free = null;\n                            }\n                        }\n                    } catch (InterruptedException e) {\n                        Thread.currentThread().interrupt();\n                    }\n                }\n            }\n        }\n    }\n    \n    public void signalFreeConsumer(Integer id, TaskConsumer consumer) throws InterruptedException {\n        synchronized (this) {\n//          System.out.println(&quot;removing &quot;+id+&quot; &quot;+Thread.currentThread().getName());\n            mapping.remove(id, consumer);\n            freeConsumers.put(consumer);\n//          System.out.println(&quot;notify &quot;+Arrays.asList(freeConsumers.toArray()));\n        }\n    }\n\n}\npublic class Runner {\n\n    public static void main(String[] args) throws InterruptedException {\n        // TODO Auto-generated method stub\n        Main m = new Main();\n        m.fillPool();\n    }\n\n}\npublic class Task {\n    private int id;\n    private String data;\n    \n    public Task () {}\n\n    public Task(int id, String dat) {\n        // TODO Auto-generated constructor stub\n        this.id = id;\n        this.data = dat;\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public String getData() {\n        return this.data;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public void setData(String data) {\n        this.data = data;\n    }\n    \n    public String toString() {\n        return &quot;&quot;+id+&quot; &quot;+data;\n    }\n}\n</code></pre>\n"},{"tags":["java","jdbc","google-cloud-dataflow","apache-beam","google-cloud-spanner"],"comments":[{"owner":{"account_id":23157436,"reputation":2052,"user_id":17258510,"display_name":"kiran mathew"},"score":0,"creation_date":1681987954,"post_id":76041747,"comment_id":134146563,"body_markdown":"Could you elaborate on what you&#39;re trying to do and where you&#39;re getting the error? Is it possible to share the documents you follow?","body":"Could you elaborate on what you&#39;re trying to do and where you&#39;re getting the error? Is it possible to share the documents you follow?"},{"owner":{"account_id":28271993,"reputation":21,"user_id":21615028,"display_name":"Nikhil"},"score":0,"creation_date":1681996944,"post_id":76041747,"comment_id":134148774,"body_markdown":"@kiranmathew yes sure..what I am trying to do is I have a change stream configured in gcp spanner which is basically an unbounded data and I am doing the windowing and getting the id column as mod.getKeysJson() and I need to pass this id to another spanner table which is bounded and execute the query which accepts this id as a parameter. But I believe while it is calling JdbcIO.&lt;KV&lt;String, Long&gt;, KV&lt;String, String&gt;&gt;readAll()  method, the autocommit is getting disabled and hence getting the error.The document I am referring are https://cloud.google.com/spanner/docs/dataflow-connector","body":"@kiranmathew yes sure..what I am trying to do is I have a change stream configured in gcp spanner which is basically an unbounded data and I am doing the windowing and getting the id column as mod.getKeysJson() and I need to pass this id to another spanner table which is bounded and execute the query which accepts this id as a parameter. But I believe while it is calling JdbcIO.&lt;KV&lt;String, Long&gt;, KV&lt;String, String&gt;&gt;readAll()  method, the autocommit is getting disabled and hence getting the error.The document I am referring are <a href=\"https://cloud.google.com/spanner/docs/dataflow-connector\" rel=\"nofollow noreferrer\">cloud.google.com/spanner/docs/dataflow-connector</a>"},{"owner":{"account_id":23157436,"reputation":2052,"user_id":17258510,"display_name":"kiran mathew"},"score":0,"creation_date":1682087379,"post_id":76041747,"comment_id":134165240,"body_markdown":"Hi @Nikhil, It appears that this issue has to be investigated further, so if you have a support plan please create a new GCP [support case](https://cloud.google.com/support/). Otherwise, you can open a new issue on the [issue tracker](https://cloud.google.com/support/docs/issue-trackers) describing your issue.","body":"Hi @Nikhil, It appears that this issue has to be investigated further, so if you have a support plan please create a new GCP <a href=\"https://cloud.google.com/support/\" rel=\"nofollow noreferrer\">support case</a>. Otherwise, you can open a new issue on the <a href=\"https://cloud.google.com/support/docs/issue-trackers\" rel=\"nofollow noreferrer\">issue tracker</a> describing your issue."}],"owner":{"account_id":28271993,"reputation":21,"user_id":21615028,"display_name":"Nikhil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682317508,"creation_date":1681801952,"question_id":76041747,"body_markdown":"`INFO: Autocommit has been disabled`  \r\n`[WARNING]&#160;`  \r\n`org.apache.beam.sdk.Pipeline$PipelineExecutionException: com.google.cloud.spanner.jdbc.JdbcSqlExceptionFactory$JdbcSqlExceptionImpl: FAILED_PRECONDITION: Cannot set autocommit while a transaction is active`\r\n\r\nbelow is the code how I read the change stream data from spanner\r\n\r\n```\r\nPipeline p = Pipeline.create(options);\r\n\r\nPCollection&lt;DataChangeRecord&gt; inputChangeStreams = p.apply(SpannerIO\r\n        .readChangeStream()\r\n        .withSpannerConfig(spannerConfig)\r\n        .withChangeStreamName(options.getChangeStreamTable())\r\n        .withMetadataInstance(options.getInputInstanceId())\r\n        .withMetadataDatabase(options.getInputDatabaseId())\r\n        .withInclusiveStartAt(Timestamp.now()));\r\n\r\nPCollection&lt;KV&lt;String, String&gt;&gt; enrichedDataStream = buildData(options, inputChangeStreams);\r\n```\r\n\r\nthe buildData is as listed below where we get id column from change stream( where we apply windowing) and passing that in the query as parameter to get data from another table in spanner\r\n\r\n```\r\nprivate static PCollection&lt;KV&lt;String, String&gt;&gt; buildData(SpannerToSpannerPipelineOption options, PCollection&lt;DataChangeRecord&gt; inputChangeStreams) {\r\n\r\n    PCollection&lt;KV&lt;String, String&gt;&gt; eData = null;\r\n    \r\n        PCollection&lt;KV&lt;String, Long&gt;&gt; changeStreamedData = inputChangeStreams\r\n                //              .apply(ParDo.of(new CSDataTransformationFn(options)))\r\n                .apply(&quot;Apply to get Id from CS&quot;, ParDo.of(new DoFn&lt;DataChangeRecord, Long&gt;() {\r\n                    @ProcessElement\r\n                    public void processElement(ProcessContext c) {\r\n\r\n                        c.element().getMods().forEach(mod -&gt; {\r\n                                    JSONObject keysJson = new JSONObject(mod.getKeysJson());\r\n                                    LOG.info(&quot;cs keyJson is:&quot; + keysJson);\r\n\r\n                                    \r\n                                    long Id = keysJson.getLong(CONSTANTS.ID);\r\n                                    c.output(Id);\r\n\r\n                                }\r\n                        );\r\n                    }\r\n                }))\r\n                .apply(&quot;Apply Random Key&quot;, ParDo.of(new DoFn&lt;Long, KV&lt;String, Long&gt;&gt;() {\r\n                    @ProcessElement\r\n                    public void processElement(ProcessContext c) {\r\n                        c.output(KV.of(UUID.randomUUID().toString(), c.element()));\r\n                    }\r\n                })).apply(&quot;Apply Fixed Length Windows&quot;, Window.into(FixedWindows.of(Duration.standardSeconds(1))));\r\n\r\n\r\n        changeStreamedData\r\n                .apply(&quot;Print log&quot;, MapElements.into(TypeDescriptor.of(String.class)).via(x -&gt; {\r\n                            LOG.info(&quot;incoming data is: &quot; + x.getKey() + &quot;value is&quot; + x.getValue());\r\n                            return x.getKey();\r\n                        }\r\n                ));\r\n\r\n\r\n         eData = changeStreamedData\r\n                .apply(&quot;Take each Id and lookup in the Input table&quot;, JdbcIO.&lt;KV&lt;String, Long&gt;, KV&lt;String, String&gt;&gt;readAll()\r\n                        .withDataSourceConfiguration(\r\n                                JdbcIO.DataSourceConfiguration.create(\r\n                                        CONSTANTS.SPANNERDRIVER,\r\n                                        &quot;jdbc:cloudspanner:/projects/&quot; + options.getInputProjectId() + &quot;/instances/&quot; + options.getInputInstanceId() + &quot;/databases/&quot; + options.getInputDatabaseId()\r\n                                )\r\n                        )\r\n                        .withQuery(CONSTANTS.QUERY)\r\n                        .withParameterSetter((JdbcIO.PreparedStatementSetter&lt;KV&lt;String, Long&gt;&gt;) (element, preparedStatement) -&gt; {\r\n                            preparedStatement.setLong(1, element.getValue());\r\n                            LOG.info(&quot;element value is: &quot; + element.getValue());\r\n                        })\r\n                        .withRowMapper((JdbcIO.RowMapper&lt;KV&lt;String, String&gt;&gt;) resultSet -&gt; {\r\n                            String key = resultSet.getString(CONSTANTS.ID);\r\n\r\n                            LOG.info(&quot;key value is: &quot; + key);\r\n\r\n                            ResultSetMetaData metadata = resultSet.getMetaData();\r\n\r\n                            // Iterate through each column to output\r\n                            Map&lt;String, Object&gt; row = IntStream\r\n                                    // Iterate through each column to output\r\n                                    .range(1, resultSet.getMetaData().getColumnCount() + 1)\r\n                                    // Output a pair with the column name and value.\r\n                                    .mapToObj(i -&gt; {\r\n                                        \r\n                                        try {\r\n                                            LOG.info(&quot;Metadata2:&quot; + KV.of(metadata.getColumnName(i), (resultSet != null &amp;&amp; resultSet.getObject(i) != null) ? resultSet.getObject(i) : &quot;&quot;));\r\n                                            return KV.of(metadata.getColumnName(i), ((resultSet != null &amp;&amp; resultSet.getObject(i) != null) ? resultSet.getObject(i) : &quot;&quot;));\r\n                                        } catch (SQLException ignored) {\r\n                                            ignored.printStackTrace();\r\n                                        }\r\n                                        return null;\r\n                                    })\r\n\r\n                                    .collect(Collectors.toMap(KV::getKey, stringObjectKV1 -&gt; stringObjectKV1 != null ? stringObjectKV1.getValue() : &quot;&quot;));\r\n```\r\n\r\nI am facing an intermittent issue with error saying\r\n\r\n```\r\nINFO: Autocommit has been disabled[WARNING]&#160;org.apache.beam.sdk.Pipeline$PipelineExecutionException: com.google.cloud.spanner.jdbc.JdbcSqlExceptionFactory$JdbcSqlExceptionImpl: FAILED_PRECONDITION: Cannot set autocommit while a transaction is active\r\n```\r\n\r\nand the spanner config automatically closes. I read from spanner and dataflow document that by default the autocommit is set to true, not sure why this is happening . Any help would be great","title":"facing the error after reading the change stream data from gcp cloud spanner and using the pcollection to query data from another spanner table","body":"<p><code>INFO: Autocommit has been disabled</code><br />\n<code>[WARNING]Â </code><br />\n<code>org.apache.beam.sdk.Pipeline$PipelineExecutionException: com.google.cloud.spanner.jdbc.JdbcSqlExceptionFactory$JdbcSqlExceptionImpl: FAILED_PRECONDITION: Cannot set autocommit while a transaction is active</code></p>\n<p>below is the code how I read the change stream data from spanner</p>\n<pre><code>Pipeline p = Pipeline.create(options);\n\nPCollection&lt;DataChangeRecord&gt; inputChangeStreams = p.apply(SpannerIO\n        .readChangeStream()\n        .withSpannerConfig(spannerConfig)\n        .withChangeStreamName(options.getChangeStreamTable())\n        .withMetadataInstance(options.getInputInstanceId())\n        .withMetadataDatabase(options.getInputDatabaseId())\n        .withInclusiveStartAt(Timestamp.now()));\n\nPCollection&lt;KV&lt;String, String&gt;&gt; enrichedDataStream = buildData(options, inputChangeStreams);\n</code></pre>\n<p>the buildData is as listed below where we get id column from change stream( where we apply windowing) and passing that in the query as parameter to get data from another table in spanner</p>\n<pre><code>private static PCollection&lt;KV&lt;String, String&gt;&gt; buildData(SpannerToSpannerPipelineOption options, PCollection&lt;DataChangeRecord&gt; inputChangeStreams) {\n\n    PCollection&lt;KV&lt;String, String&gt;&gt; eData = null;\n    \n        PCollection&lt;KV&lt;String, Long&gt;&gt; changeStreamedData = inputChangeStreams\n                //              .apply(ParDo.of(new CSDataTransformationFn(options)))\n                .apply(&quot;Apply to get Id from CS&quot;, ParDo.of(new DoFn&lt;DataChangeRecord, Long&gt;() {\n                    @ProcessElement\n                    public void processElement(ProcessContext c) {\n\n                        c.element().getMods().forEach(mod -&gt; {\n                                    JSONObject keysJson = new JSONObject(mod.getKeysJson());\n                                    LOG.info(&quot;cs keyJson is:&quot; + keysJson);\n\n                                    \n                                    long Id = keysJson.getLong(CONSTANTS.ID);\n                                    c.output(Id);\n\n                                }\n                        );\n                    }\n                }))\n                .apply(&quot;Apply Random Key&quot;, ParDo.of(new DoFn&lt;Long, KV&lt;String, Long&gt;&gt;() {\n                    @ProcessElement\n                    public void processElement(ProcessContext c) {\n                        c.output(KV.of(UUID.randomUUID().toString(), c.element()));\n                    }\n                })).apply(&quot;Apply Fixed Length Windows&quot;, Window.into(FixedWindows.of(Duration.standardSeconds(1))));\n\n\n        changeStreamedData\n                .apply(&quot;Print log&quot;, MapElements.into(TypeDescriptor.of(String.class)).via(x -&gt; {\n                            LOG.info(&quot;incoming data is: &quot; + x.getKey() + &quot;value is&quot; + x.getValue());\n                            return x.getKey();\n                        }\n                ));\n\n\n         eData = changeStreamedData\n                .apply(&quot;Take each Id and lookup in the Input table&quot;, JdbcIO.&lt;KV&lt;String, Long&gt;, KV&lt;String, String&gt;&gt;readAll()\n                        .withDataSourceConfiguration(\n                                JdbcIO.DataSourceConfiguration.create(\n                                        CONSTANTS.SPANNERDRIVER,\n                                        &quot;jdbc:cloudspanner:/projects/&quot; + options.getInputProjectId() + &quot;/instances/&quot; + options.getInputInstanceId() + &quot;/databases/&quot; + options.getInputDatabaseId()\n                                )\n                        )\n                        .withQuery(CONSTANTS.QUERY)\n                        .withParameterSetter((JdbcIO.PreparedStatementSetter&lt;KV&lt;String, Long&gt;&gt;) (element, preparedStatement) -&gt; {\n                            preparedStatement.setLong(1, element.getValue());\n                            LOG.info(&quot;element value is: &quot; + element.getValue());\n                        })\n                        .withRowMapper((JdbcIO.RowMapper&lt;KV&lt;String, String&gt;&gt;) resultSet -&gt; {\n                            String key = resultSet.getString(CONSTANTS.ID);\n\n                            LOG.info(&quot;key value is: &quot; + key);\n\n                            ResultSetMetaData metadata = resultSet.getMetaData();\n\n                            // Iterate through each column to output\n                            Map&lt;String, Object&gt; row = IntStream\n                                    // Iterate through each column to output\n                                    .range(1, resultSet.getMetaData().getColumnCount() + 1)\n                                    // Output a pair with the column name and value.\n                                    .mapToObj(i -&gt; {\n                                        \n                                        try {\n                                            LOG.info(&quot;Metadata2:&quot; + KV.of(metadata.getColumnName(i), (resultSet != null &amp;&amp; resultSet.getObject(i) != null) ? resultSet.getObject(i) : &quot;&quot;));\n                                            return KV.of(metadata.getColumnName(i), ((resultSet != null &amp;&amp; resultSet.getObject(i) != null) ? resultSet.getObject(i) : &quot;&quot;));\n                                        } catch (SQLException ignored) {\n                                            ignored.printStackTrace();\n                                        }\n                                        return null;\n                                    })\n\n                                    .collect(Collectors.toMap(KV::getKey, stringObjectKV1 -&gt; stringObjectKV1 != null ? stringObjectKV1.getValue() : &quot;&quot;));\n</code></pre>\n<p>I am facing an intermittent issue with error saying</p>\n<pre><code>INFO: Autocommit has been disabled[WARNING]Â org.apache.beam.sdk.Pipeline$PipelineExecutionException: com.google.cloud.spanner.jdbc.JdbcSqlExceptionFactory$JdbcSqlExceptionImpl: FAILED_PRECONDITION: Cannot set autocommit while a transaction is active\n</code></pre>\n<p>and the spanner config automatically closes. I read from spanner and dataflow document that by default the autocommit is set to true, not sure why this is happening . Any help would be great</p>\n"},{"tags":["java","arraylist","abstract-class"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":1,"creation_date":1459516524,"post_id":36357287,"comment_id":60334284,"body_markdown":"Sure, you need to create a concrete class extending `Account` (even an anonymous one if you want) . An abstract class has no use without concrete implementations, because some behavior has not been defined.","body":"Sure, you need to create a concrete class extending <code>Account</code> (even an anonymous one if you want) . An abstract class has no use without concrete implementations, because some behavior has not been defined."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1459516792,"post_id":36357287,"comment_id":60334479,"body_markdown":"Note that this question doesn&#39;t really have anything to do with ArrayList - just the abstract class and the attempt to create an instance of it are enough.","body":"Note that this question doesn&#39;t really have anything to do with ArrayList - just the abstract class and the attempt to create an instance of it are enough."},{"owner":{"account_id":7734589,"reputation":981,"user_id":5856565,"accept_rate":94,"display_name":"JanLeeYu"},"score":0,"creation_date":1459516828,"post_id":36357287,"comment_id":60334496,"body_markdown":"As you have said, you cant instantiate. So the line `Account ac= new Account(1,100,25000);` is impossible. You have to create another class extending your abstract class.","body":"As you have said, you cant instantiate. So the line <code>Account ac= new Account(1,100,25000);</code> is impossible. You have to create another class extending your abstract class."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1459516865,"post_id":36357287,"comment_id":60334522,"body_markdown":"As a secondary matter, I&#39;ve reformatted your code to be a lot more readable - I&#39;d advise using a format like this for future questions. Most IDEs will reformat the code for you automatically if you ask them to.","body":"As a secondary matter, I&#39;ve reformatted your code to be a lot more readable - I&#39;d advise using a format like this for future questions. Most IDEs will reformat the code for you automatically if you ask them to."},{"owner":{"account_id":7734589,"reputation":981,"user_id":5856565,"accept_rate":94,"display_name":"JanLeeYu"},"score":0,"creation_date":1459517036,"post_id":36357287,"comment_id":60334660,"body_markdown":"Another thing is that this will not compile because you are using `ac` variable twice.","body":"Another thing is that this will not compile because you are using <code>ac</code> variable twice."}],"answers":[{"tags":[],"owner":{"account_id":2188235,"reputation":2346,"user_id":6999799,"display_name":"lkq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459516935,"creation_date":1459516935,"answer_id":36357510,"question_id":36357287,"body_markdown":"Marking a class abstract means it might have unimplemented methods, therefore, you&#39;re not able to create an instance of an abstract class directly due to undefined behavior. What you can do is to define a non-abstract class which extends your `Account` class and implement the two abstract methods in `Account`. Something like `class BankAccount extends Account { implementations }`. After that, you can create instances of class `BankAccount` and add them into your `ArrayList` instance. Other instances of class that extends `Account` can also be added into your `ArrayList` instance.","title":"Initialize ArrayList of Type Abstract class","body":"<p>Marking a class abstract means it might have unimplemented methods, therefore, you're not able to create an instance of an abstract class directly due to undefined behavior. What you can do is to define a non-abstract class which extends your <code>Account</code> class and implement the two abstract methods in <code>Account</code>. Something like <code>class BankAccount extends Account { implementations }</code>. After that, you can create instances of class <code>BankAccount</code> and add them into your <code>ArrayList</code> instance. Other instances of class that extends <code>Account</code> can also be added into your <code>ArrayList</code> instance.</p>\n"},{"tags":[],"owner":{"account_id":8014800,"reputation":442,"user_id":6045460,"display_name":"Vytautas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1459517023,"creation_date":1459517023,"answer_id":36357539,"question_id":36357287,"body_markdown":"Abstract classes can&#39;t be instantiated, but they can be extended. If the child class is concrete, it can be instantiated.\r\n\r\nYou would also have to implement both your abstract methods to make the class concrete.\r\n\r\nRead more here: [Java inheritance][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html","title":"Initialize ArrayList of Type Abstract class","body":"<p>Abstract classes can't be instantiated, but they can be extended. If the child class is concrete, it can be instantiated.</p>\n\n<p>You would also have to implement both your abstract methods to make the class concrete.</p>\n\n<p>Read more here: <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html\" rel=\"nofollow\">Java inheritance</a>.</p>\n"},{"comments":[{"owner":{"account_id":5175524,"reputation":616,"user_id":4142806,"accept_rate":71,"display_name":"Naved Ali"},"score":0,"creation_date":1459543078,"post_id":36357685,"comment_id":60350189,"body_markdown":"I followed your code but it gave me compilation error may be because we cannot assigned parent class object to child class reference.but on using ConcreteAccount ac=new ConcreteAccount(1,2,5000) it works fine","body":"I followed your code but it gave me compilation error may be because we cannot assigned parent class object to child class reference.but on using ConcreteAccount ac=new ConcreteAccount(1,2,5000) it works fine"},{"owner":{"account_id":7734589,"reputation":981,"user_id":5856565,"accept_rate":94,"display_name":"JanLeeYu"},"score":0,"creation_date":1459567024,"post_id":36357685,"comment_id":60356643,"body_markdown":"oh my bad... I&#39;ve switched them. It is already fixed. It should work already when compiled. @Er.Naved Ali","body":"oh my bad... I&#39;ve switched them. It is already fixed. It should work already when compiled. @Er.Naved Ali"},{"owner":{"account_id":5175524,"reputation":616,"user_id":4142806,"accept_rate":71,"display_name":"Naved Ali"},"score":0,"creation_date":1459576581,"post_id":36357685,"comment_id":60358289,"body_markdown":"I found it correct now..Thanks for the help :)@JanLeeYu","body":"I found it correct now..Thanks for the help :)@JanLeeYu"}],"tags":[],"owner":{"account_id":7734589,"reputation":981,"user_id":5856565,"accept_rate":94,"display_name":"JanLeeYu"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1459566957,"creation_date":1459517472,"answer_id":36357685,"question_id":36357287,"body_markdown":"You can add this following code just to get you started :\r\n\r\n    public class ConcreteAccount extends Account{\r\n        public ConcreteAccount (int accountId, int customerId, double balance) {\r\n            super(accountId, customerId, balance);\r\n        }\r\n    \r\n        public abstract double deposit(double sum) {\r\n           //implementation here\r\n        }\r\n        public abstract double withdraw(double sum) {\r\n           //implementation here\r\n        }\r\n    }\r\n\r\nThen after that, you can have :\r\n\r\n    Account ac= new ConcreteAccount(1,100,25000);\r\n    ArrayList&lt;Account&gt; acList= new ArrayList&lt;Account&gt;();\r\n    acList.add(ac);","title":"Initialize ArrayList of Type Abstract class","body":"<p>You can add this following code just to get you started :</p>\n\n<pre><code>public class ConcreteAccount extends Account{\n    public ConcreteAccount (int accountId, int customerId, double balance) {\n        super(accountId, customerId, balance);\n    }\n\n    public abstract double deposit(double sum) {\n       //implementation here\n    }\n    public abstract double withdraw(double sum) {\n       //implementation here\n    }\n}\n</code></pre>\n\n<p>Then after that, you can have :</p>\n\n<pre><code>Account ac= new ConcreteAccount(1,100,25000);\nArrayList&lt;Account&gt; acList= new ArrayList&lt;Account&gt;();\nacList.add(ac);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8107980,"reputation":3246,"user_id":6108947,"display_name":"Ji aSH"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1459517870,"creation_date":1459517870,"answer_id":36357805,"question_id":36357287,"body_markdown":"The whole point of your abstract class is to factorize some code in your application. Using it as a super type is in my opinion a bad practice since you should be using interfaces for that.\r\n\r\nTo get a complete response to your problem, I would:\r\n\r\nCreate an interface: Account.java\r\n\r\n    public interface Account {\r\n        public double deposit(double sum);\r\n        public double withdraw(double sum);\r\n    }\r\n\r\nCreate an abstract class: AbstractAccount.java\r\n\r\n    public abstract class AbstractAccount {\r\n        protected int accountId;\r\n        protected int customerId;\r\n        protected double balance;\r\n        public Account(int accountId, int customerId, double balance) {\r\n            this.accountId = accountId;\r\n            this.customerId = customerId;\r\n            this.balance = balance;\r\n        }\r\n    }\r\n\r\nAnd finally provide a default implementation for your interface BankAccount.java\r\n\r\n    public class BankAccount extends AbstractAccount implements Account {\r\n        public Account(int accountId, int customerId, double balance) {\r\n            super(accountId, customerId, balance);\r\n        }\r\n        public double deposit(double sum) {\r\n            this.balance += sum;\r\n        }\r\n        public double withdraw(double sum) {\r\n            this.balance -= sum;\r\n        }\r\n    }\r\n\r\nThen you should manipulate:\r\n\r\n    List&lt;Account&gt; accounts = new ArrayList&lt;Account&gt;();\r\n    accounts.add(new BankAccount(1, 1, 10000));\r\n\r\nand never care about the implementing type :)","title":"Initialize ArrayList of Type Abstract class","body":"<p>The whole point of your abstract class is to factorize some code in your application. Using it as a super type is in my opinion a bad practice since you should be using interfaces for that.</p>\n\n<p>To get a complete response to your problem, I would:</p>\n\n<p>Create an interface: Account.java</p>\n\n<pre><code>public interface Account {\n    public double deposit(double sum);\n    public double withdraw(double sum);\n}\n</code></pre>\n\n<p>Create an abstract class: AbstractAccount.java</p>\n\n<pre><code>public abstract class AbstractAccount {\n    protected int accountId;\n    protected int customerId;\n    protected double balance;\n    public Account(int accountId, int customerId, double balance) {\n        this.accountId = accountId;\n        this.customerId = customerId;\n        this.balance = balance;\n    }\n}\n</code></pre>\n\n<p>And finally provide a default implementation for your interface BankAccount.java</p>\n\n<pre><code>public class BankAccount extends AbstractAccount implements Account {\n    public Account(int accountId, int customerId, double balance) {\n        super(accountId, customerId, balance);\n    }\n    public double deposit(double sum) {\n        this.balance += sum;\n    }\n    public double withdraw(double sum) {\n        this.balance -= sum;\n    }\n}\n</code></pre>\n\n<p>Then you should manipulate:</p>\n\n<pre><code>List&lt;Account&gt; accounts = new ArrayList&lt;Account&gt;();\naccounts.add(new BankAccount(1, 1, 10000));\n</code></pre>\n\n<p>and never care about the implementing type :)</p>\n"},{"tags":[],"owner":{"account_id":28394207,"reputation":1,"user_id":21719507,"display_name":"bigbozo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682317460,"creation_date":1682317460,"answer_id":76089083,"question_id":36357287,"body_markdown":"```\r\nimport java.util.ArrayList;\r\nimport java.util.Random;\r\n\r\nabstract class Disease {\r\n  private String name;\r\n  private int duration;\r\n\r\n  public Disease(String name) {\r\n    this.name = name;\r\n    this.duration = new Random().nextInt(12) + 3;\r\n  }\r\n\r\n  abstract String typeDisease();\r\n\r\n  public String getName() {\r\n    return name;\r\n  }\r\n\r\n  public int getDuration() {\r\n    return duration;\r\n  }\r\n}\r\n\r\nclass Virus extends Disease {\r\n  private boolean vaccinated;\r\n\r\n  public Virus(String name, boolean vaccinated) {\r\n    super(name);\r\n    this.vaccinated = vaccinated;\r\n  }\r\n\r\n  @Override\r\n  String typeDisease() {\r\n    return &quot;Virus&quot;;\r\n  }\r\n\r\n  public boolean isVaccinated() {\r\n    return vaccinated;\r\n  }\r\n}\r\n\r\nclass Bacteria extends Disease {\r\n  private String antibiotic;\r\n\r\n  public Bacteria(String name, String antibiotic) {\r\n    super(name);\r\n    this.antibiotic = antibiotic;\r\n  }\r\n\r\n  @Override\r\n  String typeDisease() {\r\n    return &quot;Bacteria&quot;;\r\n  }\r\n\r\n  public String getAntibiotic() {\r\n    return antibiotic;\r\n  }\r\n}\r\n\r\nclass Patient {\r\n  private String name;\r\n  private String surname;\r\n  private String mbo;\r\n  private ArrayList&lt;Disease&gt; diseases = new ArrayList&lt;&gt;();\r\n\r\n  public Patient(String name, String surname, String mbo) {\r\n    this.name = name;\r\n    this.surname = surname;\r\n    this.mbo = mbo;\r\n    diseases.add(new Virus(&quot;Chicken pox&quot;, false));\r\n    diseases.add(new Virus(&quot;Corona&quot;, true));\r\n    diseases.add(new Bacteria(&quot;Angina&quot;, &quot;Penicillin&quot;));\r\n  }\r\n\r\n  public int countSickness() {\r\n    int totalDuration = 0;\r\n    for (Disease disease : diseases) {\r\n      totalDuration += disease.getDuration();\r\n    }\r\n    return totalDuration;\r\n  }\r\n\r\n  public void printIbolesti() {\r\n    System.out.println(&quot;Patient: &quot; + name + &quot; &quot; + surname + &quot;(&quot; + mbo + &quot;)&quot;);\r\n    for (Disease disease : diseases) {\r\n      System.out.println(&quot;Disease: &quot; + disease.getName() + &quot; Type: &quot; + disease.typeDisease() + &quot; Duration: &quot; + disease.getDuration());\r\n    }\r\n  }\r\n}\r\n\r\npublic class PatientTest {\r\n  public static void main(String[] args) {\r\n    Patient patient = new Patient(&quot;John&quot;, &quot;Doe&quot;, &quot;123456789&quot;);\r\n    patient.printIbolesti();\r\n    System.out.println(&quot;Sick days: &quot; + patient.countSickness());\r\n  }\r\n}\r\n```","title":"Initialize ArrayList of Type Abstract class","body":"<pre><code>import java.util.ArrayList;\nimport java.util.Random;\n\nabstract class Disease {\n  private String name;\n  private int duration;\n\n  public Disease(String name) {\n    this.name = name;\n    this.duration = new Random().nextInt(12) + 3;\n  }\n\n  abstract String typeDisease();\n\n  public String getName() {\n    return name;\n  }\n\n  public int getDuration() {\n    return duration;\n  }\n}\n\nclass Virus extends Disease {\n  private boolean vaccinated;\n\n  public Virus(String name, boolean vaccinated) {\n    super(name);\n    this.vaccinated = vaccinated;\n  }\n\n  @Override\n  String typeDisease() {\n    return &quot;Virus&quot;;\n  }\n\n  public boolean isVaccinated() {\n    return vaccinated;\n  }\n}\n\nclass Bacteria extends Disease {\n  private String antibiotic;\n\n  public Bacteria(String name, String antibiotic) {\n    super(name);\n    this.antibiotic = antibiotic;\n  }\n\n  @Override\n  String typeDisease() {\n    return &quot;Bacteria&quot;;\n  }\n\n  public String getAntibiotic() {\n    return antibiotic;\n  }\n}\n\nclass Patient {\n  private String name;\n  private String surname;\n  private String mbo;\n  private ArrayList&lt;Disease&gt; diseases = new ArrayList&lt;&gt;();\n\n  public Patient(String name, String surname, String mbo) {\n    this.name = name;\n    this.surname = surname;\n    this.mbo = mbo;\n    diseases.add(new Virus(&quot;Chicken pox&quot;, false));\n    diseases.add(new Virus(&quot;Corona&quot;, true));\n    diseases.add(new Bacteria(&quot;Angina&quot;, &quot;Penicillin&quot;));\n  }\n\n  public int countSickness() {\n    int totalDuration = 0;\n    for (Disease disease : diseases) {\n      totalDuration += disease.getDuration();\n    }\n    return totalDuration;\n  }\n\n  public void printIbolesti() {\n    System.out.println(&quot;Patient: &quot; + name + &quot; &quot; + surname + &quot;(&quot; + mbo + &quot;)&quot;);\n    for (Disease disease : diseases) {\n      System.out.println(&quot;Disease: &quot; + disease.getName() + &quot; Type: &quot; + disease.typeDisease() + &quot; Duration: &quot; + disease.getDuration());\n    }\n  }\n}\n\npublic class PatientTest {\n  public static void main(String[] args) {\n    Patient patient = new Patient(&quot;John&quot;, &quot;Doe&quot;, &quot;123456789&quot;);\n    patient.printIbolesti();\n    System.out.println(&quot;Sick days: &quot; + patient.countSickness());\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":5175524,"reputation":616,"user_id":4142806,"accept_rate":71,"display_name":"Naved Ali"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17793,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36357805,"answer_count":5,"score":2,"last_activity_date":1682317460,"creation_date":1459516327,"question_id":36357287,"body_markdown":"I want to fill values in my arraylist of abstract class type.Below is my code\r\n\r\n    public abstract class Account {\r\n        private int accountId;\r\n        private int customerId;\r\n        private double balance;\r\n\r\n        public Account(int accountId, int customerId, double balance) {\r\n            this.accountId = accountId;\r\n            this.customerId = customerId;\r\n            this.balance = balance;\r\n        }\r\n     \r\n        public abstract double deposit(double sum);\r\n        public abstract double withdraw(double sum);\r\n    }\r\n\r\n\r\nAbove is my abstract class.\r\nNow I have another class `bank` in which i want to define and declare `an arraylist` in which i can fill my values .\r\nI declared arraylist as \r\n\r\n    ArrayList&lt;Account&gt; al=new ArrayList&lt;&gt;();\r\nNow i want to pass values to this arraylist for further use but i couldnot as we cannot instantiate abstract class.I tried this code to fill values in class with main method but couldnot get it because of above reason\r\n\r\n    Account ac= new Account(1,100,25000);\r\n\t\tArrayList&lt;Account&gt;ac= new ArrayList&lt;Account&gt;();\r\n\t\tac.add(ac);\r\n","title":"Initialize ArrayList of Type Abstract class","body":"<p>I want to fill values in my arraylist of abstract class type.Below is my code</p>\n\n<pre><code>public abstract class Account {\n    private int accountId;\n    private int customerId;\n    private double balance;\n\n    public Account(int accountId, int customerId, double balance) {\n        this.accountId = accountId;\n        this.customerId = customerId;\n        this.balance = balance;\n    }\n\n    public abstract double deposit(double sum);\n    public abstract double withdraw(double sum);\n}\n</code></pre>\n\n<p>Above is my abstract class.\nNow I have another class <code>bank</code> in which i want to define and declare <code>an arraylist</code> in which i can fill my values .\nI declared arraylist as </p>\n\n<pre><code>ArrayList&lt;Account&gt; al=new ArrayList&lt;&gt;();\n</code></pre>\n\n<p>Now i want to pass values to this arraylist for further use but i couldnot as we cannot instantiate abstract class.I tried this code to fill values in class with main method but couldnot get it because of above reason</p>\n\n<pre><code>Account ac= new Account(1,100,25000);\n    ArrayList&lt;Account&gt;ac= new ArrayList&lt;Account&gt;();\n    ac.add(ac);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","optaplanner"],"comments":[{"owner":{"account_id":5954871,"reputation":1931,"user_id":4682000,"accept_rate":81,"display_name":"Habchi"},"score":0,"creation_date":1682293617,"post_id":76087769,"comment_id":134187980,"body_markdown":"@HovercraftFullOfEels Yes. Sorry for that. The problem actually that I&#39;m facing is a little bit weird cause the error is not explicit enough to give any possible indication on the code I&#39;ve wrote. This is why I didn&#39;t knew what block code to share here directly and though about sharing a complete example. Let me know what modifications to do and I&#39;ll gladly apply them.","body":"@HovercraftFullOfEels Yes. Sorry for that. The problem actually that I&#39;m facing is a little bit weird cause the error is not explicit enough to give any possible indication on the code I&#39;ve wrote. This is why I didn&#39;t knew what block code to share here directly and though about sharing a complete example. Let me know what modifications to do and I&#39;ll gladly apply them."},{"owner":{"account_id":5954871,"reputation":1931,"user_id":4682000,"accept_rate":81,"display_name":"Habchi"},"score":0,"creation_date":1682293885,"post_id":76087769,"comment_id":134188002,"body_markdown":"Believe me it&#39;s been two days that I&#39;m reading examples all over the net. The version that I&#39;m using in my code also was posted two days ago, so it might also be a problem with the new version itself and I already created an issue on the library repository issue tracker. I&#39;ll remove the link and provide it afterwards if anyone asks for it and reformulate my answer. Thanks","body":"Believe me it&#39;s been two days that I&#39;m reading examples all over the net. The version that I&#39;m using in my code also was posted two days ago, so it might also be a problem with the new version itself and I already created an issue on the library repository issue tracker. I&#39;ll remove the link and provide it afterwards if anyone asks for it and reformulate my answer. Thanks"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1682307319,"post_id":76087769,"comment_id":134189035,"body_markdown":"You need to add the full stack trace of the exception to your question.","body":"You need to add the full stack trace of the exception to your question."}],"answers":[{"comments":[{"owner":{"account_id":5954871,"reputation":1931,"user_id":4682000,"accept_rate":81,"display_name":"Habchi"},"score":0,"creation_date":1682386965,"post_id":76089054,"comment_id":134203672,"body_markdown":"You&#39;re absolutely right. Weird however because the same code with quarkus doesn&#39;t initialize the planningListVariable and still works like a charm. Now the problem is that the solution returned is always 0Hard/0Soft with all orders as init","body":"You&#39;re absolutely right. Weird however because the same code with quarkus doesn&#39;t initialize the planningListVariable and still works like a charm. Now the problem is that the solution returned is always 0Hard/0Soft with all orders as init"}],"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;Å¡ Petrovick&#253;"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682317165,"creation_date":1682317165,"answer_id":76089054,"question_id":76087769,"body_markdown":"The error message is, in fact, quite self-explanatory - your list variable is `null`. The issue will go away if you declare your planning variable like so:\r\n\r\n    @PlanningListVariable(valueRangeProviderRefs = &quot;orderRange&quot;)\r\n    private List&lt;Order&gt; orders = new ArrayList&lt;&gt;();\r\n\r\nAlternatively, you can set the field at runtime before starting your solver.","title":"How to solve null pointer exception in optaplanner?","body":"<p>The error message is, in fact, quite self-explanatory - your list variable is <code>null</code>. The issue will go away if you declare your planning variable like so:</p>\n<pre><code>@PlanningListVariable(valueRangeProviderRefs = &quot;orderRange&quot;)\nprivate List&lt;Order&gt; orders = new ArrayList&lt;&gt;();\n</code></pre>\n<p>Alternatively, you can set the field at runtime before starting your solver.</p>\n"}],"owner":{"account_id":5954871,"reputation":1931,"user_id":4682000,"accept_rate":81,"display_name":"Habchi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1682318152,"accepted_answer_id":76089054,"answer_count":1,"score":-1,"last_activity_date":1682317165,"creation_date":1682293023,"question_id":76087769,"body_markdown":"I&#39;m trying to play a little bit with **Optaplanner** and created a simple project using **Optaplanner** spring-boot-starter to solve a simple VRP problem with only one hard constraint for the moment.\r\n\r\nMy domain model is pretty simple, a vehicle class with volume, weight capacity and order class with volume and weight values.\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @PlanningEntity\r\n    public class Vehicle {\r\n    \r\n        @PlanningId\r\n        private Long id;\r\n    \r\n        private int weightCapacity;\r\n        private int volumeCapacity;\r\n        private double guaranteeCheck;\r\n    \r\n        @PlanningListVariable(valueRangeProviderRefs = &quot;orderRange&quot;)\r\n        private List&lt;Order&gt; orders;\r\n    \r\n        public Vehicle() {\r\n        }\r\n    \r\n        public Vehicle(long id, int volume, int weight) {\r\n            this.id = id;\r\n            this.volumeCapacity=volume;\r\n            this.weightCapacity=weight;\r\n        }\r\n    \r\n        public int getTotalVolumeCapacity() {\r\n            int totalDemand = 0;\r\n            for (Order order : orders) {\r\n                totalDemand += order.getVolume();\r\n            }\r\n            return totalDemand;\r\n        }\r\n    \r\n        public int getTotalWeightCapacity(){\r\n            int totalDemand = 0;\r\n            for (Order order : orders) {\r\n                totalDemand += order.getWeight();\r\n            }\r\n            return totalDemand;\r\n        }\r\n    }\r\n    \r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    public class Order {\r\n        private Long id;\r\n        private String reference;\r\n        private double weight;\r\n        private double volume;\r\n    //    private double amount;\r\n        private Location location;\r\n    \r\n        public Order() {\r\n        }\r\n    \r\n        public Order(long id, int volume, int weight, Location location) {\r\n            this.id = id;\r\n            this.reference = this.id.toString();\r\n            this.volume = volume;\r\n            this.weight = weight;\r\n            this.location = location;\r\n        }\r\n    }\r\n\r\nI&#39;ve created a vrp solution class as follow: \r\n\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @PlanningSolution\r\n    @Getter\r\n    @Setter\r\n    public class VehicleRoutingSolution {\r\n    \r\n        @ProblemFactCollectionProperty\r\n        @ValueRangeProvider(id = &quot;orderRange&quot;)\r\n        private List&lt;Order&gt; orders;\r\n    \r\n        @ValueRangeProvider\r\n        @PlanningEntityCollectionProperty\r\n        private List&lt;Vehicle&gt; vehicles;\r\n    \r\n        @PlanningScore\r\n        private HardSoftLongScore score;\r\n    \r\n        public VehicleRoutingSolution(List&lt;Order&gt; orders, List&lt;Vehicle&gt; vehicles) {\r\n            this.orders = orders;\r\n            this.vehicles = vehicles;\r\n        }\r\n    }\r\n\r\nThe problem here is pretty simple, I&#39;m trying to assign orders to vehicles based on a hard constraint formulated as follow based on the quarkus quickstart official example:\r\n\r\n    public class VehicleRoutingConstraintProvider implements ConstraintProvider {\r\n        @Override\r\n        public Constraint[] defineConstraints(ConstraintFactory constraintFactory) {\r\n            return new Constraint[]{\r\n                    // Hard constraints\r\n                    vehicleCapacity(constraintFactory),\r\n                    // Soft constraints\r\n            };\r\n        }\r\n    \r\n    \r\n    \r\n        protected Constraint vehicleCapacity(ConstraintFactory factory) {\r\n            return factory.forEach(Vehicle.class)\r\n                    .filter(vehicle -&gt; vehicle.getTotalVolumeCapacity() &gt; vehicle.getVolumeCapacity())\r\n                    .penalizeLong(HardSoftLongScore.ONE_HARD,\r\n                                  vehicle -&gt; vehicle.getTotalVolumeCapacity() - vehicle.getVolumeCapacity())\r\n                    .asConstraint(&quot;vehicleCapacity&quot;);\r\n        }\r\n    }\r\n\r\nWhen I launch the solver to find a solution on my dataset, it displays the following issue:\r\n\r\n`\r\nCannot invoke &quot;java.util.List.size()&quot; because the return value of &quot;org.optaplanner.core.impl.domain.variable.descriptor.ListVariableDescriptor.getListVariable(Object)&quot; is null\r\n`\r\n\r\nI&#39;m thinking about either a non initialization of one of my solution variables correctly or something did changed with the latest version (available since 22 April).\r\n\r\nThe solver execution code is as follow:\r\n\r\n    List&lt;Order&gt; orders = createOrdersDataSet();\r\n            List&lt;Vehicle&gt; vehicles = createVehicleDataSet();\r\n    \r\n            UUID problemId = UUID.randomUUID();\r\n            VehicleRoutingSolution problem = new VehicleRoutingSolution(orders, vehicles);\r\n            // Submit the problem to start solving\r\n            SolverJob&lt;VehicleRoutingSolution, UUID&gt; solverJob = solverManager.solve(problemId, problem);\r\n            VehicleRoutingSolution solution;\r\n            try {\r\n                // Wait until the solving ends\r\n                solution = solverJob.getFinalBestSolution();\r\n            } catch (InterruptedException | ExecutionException e) {\r\n                throw new IllegalStateException(&quot;Solving failed.&quot;, e);\r\n            }\r\n    \r\n            log.info(&quot;Your best score is: {}&quot;, solution.getScore());\r\n\r\n\r\n","title":"How to solve null pointer exception in optaplanner?","body":"<p>I'm trying to play a little bit with <strong>Optaplanner</strong> and created a simple project using <strong>Optaplanner</strong> spring-boot-starter to solve a simple VRP problem with only one hard constraint for the moment.</p>\n<p>My domain model is pretty simple, a vehicle class with volume, weight capacity and order class with volume and weight values.</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@PlanningEntity\npublic class Vehicle {\n\n    @PlanningId\n    private Long id;\n\n    private int weightCapacity;\n    private int volumeCapacity;\n    private double guaranteeCheck;\n\n    @PlanningListVariable(valueRangeProviderRefs = &quot;orderRange&quot;)\n    private List&lt;Order&gt; orders;\n\n    public Vehicle() {\n    }\n\n    public Vehicle(long id, int volume, int weight) {\n        this.id = id;\n        this.volumeCapacity=volume;\n        this.weightCapacity=weight;\n    }\n\n    public int getTotalVolumeCapacity() {\n        int totalDemand = 0;\n        for (Order order : orders) {\n            totalDemand += order.getVolume();\n        }\n        return totalDemand;\n    }\n\n    public int getTotalWeightCapacity(){\n        int totalDemand = 0;\n        for (Order order : orders) {\n            totalDemand += order.getWeight();\n        }\n        return totalDemand;\n    }\n}\n\n@Getter\n@Setter\n@ToString\npublic class Order {\n    private Long id;\n    private String reference;\n    private double weight;\n    private double volume;\n//    private double amount;\n    private Location location;\n\n    public Order() {\n    }\n\n    public Order(long id, int volume, int weight, Location location) {\n        this.id = id;\n        this.reference = this.id.toString();\n        this.volume = volume;\n        this.weight = weight;\n        this.location = location;\n    }\n}\n</code></pre>\n<p>I've created a vrp solution class as follow:</p>\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@PlanningSolution\n@Getter\n@Setter\npublic class VehicleRoutingSolution {\n\n    @ProblemFactCollectionProperty\n    @ValueRangeProvider(id = &quot;orderRange&quot;)\n    private List&lt;Order&gt; orders;\n\n    @ValueRangeProvider\n    @PlanningEntityCollectionProperty\n    private List&lt;Vehicle&gt; vehicles;\n\n    @PlanningScore\n    private HardSoftLongScore score;\n\n    public VehicleRoutingSolution(List&lt;Order&gt; orders, List&lt;Vehicle&gt; vehicles) {\n        this.orders = orders;\n        this.vehicles = vehicles;\n    }\n}\n</code></pre>\n<p>The problem here is pretty simple, I'm trying to assign orders to vehicles based on a hard constraint formulated as follow based on the quarkus quickstart official example:</p>\n<pre><code>public class VehicleRoutingConstraintProvider implements ConstraintProvider {\n    @Override\n    public Constraint[] defineConstraints(ConstraintFactory constraintFactory) {\n        return new Constraint[]{\n                // Hard constraints\n                vehicleCapacity(constraintFactory),\n                // Soft constraints\n        };\n    }\n\n\n\n    protected Constraint vehicleCapacity(ConstraintFactory factory) {\n        return factory.forEach(Vehicle.class)\n                .filter(vehicle -&gt; vehicle.getTotalVolumeCapacity() &gt; vehicle.getVolumeCapacity())\n                .penalizeLong(HardSoftLongScore.ONE_HARD,\n                              vehicle -&gt; vehicle.getTotalVolumeCapacity() - vehicle.getVolumeCapacity())\n                .asConstraint(&quot;vehicleCapacity&quot;);\n    }\n}\n</code></pre>\n<p>When I launch the solver to find a solution on my dataset, it displays the following issue:</p>\n<p><code>Cannot invoke &quot;java.util.List.size()&quot; because the return value of &quot;org.optaplanner.core.impl.domain.variable.descriptor.ListVariableDescriptor.getListVariable(Object)&quot; is null</code></p>\n<p>I'm thinking about either a non initialization of one of my solution variables correctly or something did changed with the latest version (available since 22 April).</p>\n<p>The solver execution code is as follow:</p>\n<pre><code>List&lt;Order&gt; orders = createOrdersDataSet();\n        List&lt;Vehicle&gt; vehicles = createVehicleDataSet();\n\n        UUID problemId = UUID.randomUUID();\n        VehicleRoutingSolution problem = new VehicleRoutingSolution(orders, vehicles);\n        // Submit the problem to start solving\n        SolverJob&lt;VehicleRoutingSolution, UUID&gt; solverJob = solverManager.solve(problemId, problem);\n        VehicleRoutingSolution solution;\n        try {\n            // Wait until the solving ends\n            solution = solverJob.getFinalBestSolution();\n        } catch (InterruptedException | ExecutionException e) {\n            throw new IllegalStateException(&quot;Solving failed.&quot;, e);\n        }\n\n        log.info(&quot;Your best score is: {}&quot;, solution.getScore());\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":2,"creation_date":1682262481,"post_id":76085562,"comment_id":134184039,"body_markdown":"I don&#39;t see how that code can make that pattern. After the first even number (`2`) you `break` out of the loop.","body":"I don&#39;t see how that code can make that pattern. After the first even number (<code>2</code>) you <code>break</code> out of the loop."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1682262699,"post_id":76085562,"comment_id":134184072,"body_markdown":"But you&#39;re close. You should remove that `break`. And initialize the `StringBuilder` with `&quot; |&quot;`. Add newlines to each line. And change the `&quot;|/&quot;` to `&quot; |/&quot;` and the `&quot;\\\\&quot;` to `&quot;\\\\|&quot;`.","body":"But you&#39;re close. You should remove that <code>break</code>. And initialize the <code>StringBuilder</code> with <code>&quot; |&quot;</code>. Add newlines to each line. And change the <code>&quot;|&#47;&quot;</code> to <code>&quot; |&#47;&quot;</code> and the <code>&quot;\\\\&quot;</code> to <code>&quot;\\\\|&quot;</code>."}],"owner":{"account_id":28388662,"reputation":11,"user_id":21714760,"display_name":"Ohaid Haider"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1682316963,"creation_date":1682261871,"question_id":76085562,"body_markdown":"I am trying to print \r\n```none\r\n |\r\n |/ \r\n\\|\r\n |/\r\n```\r\nMy code is printing \r\n```\r\n\\|/\r\n\\|/\r\n\\|/\r\n\\|/\r\n\\|/\r\n\\|/\r\n ^ \r\n```\r\n\r\n    StringBuilder stringBuilder = new StringBuilder();\r\n\r\n\r\n        //int i = 0;\r\n        for (int i=1;i &lt;= Height;i++ ) {\r\n            System.out.println(i);\r\n            if (i % 2 == 0) {\r\n                stringBuilder.append(&quot;|/&quot;);break;\r\n            }\r\n\r\n\r\n            else  {\r\n                stringBuilder.append(&quot;\\\\&quot;);}\r\n\r\n\r\n        }\r\n        //stringBuilder.append(&quot;/&quot;);\r\n        return stringBuilder.toString();\r\n    }","title":"Is there an alternate way of printing the following design in Java","body":"<p>I am trying to print</p>\n<pre class=\"lang-none prettyprint-override\"><code> |\n |/ \n\\|\n |/\n</code></pre>\n<p>My code is printing</p>\n<pre><code>\\|/\n\\|/\n\\|/\n\\|/\n\\|/\n\\|/\n ^ \n</code></pre>\n<pre><code>StringBuilder stringBuilder = new StringBuilder();\n\n\n    //int i = 0;\n    for (int i=1;i &lt;= Height;i++ ) {\n        System.out.println(i);\n        if (i % 2 == 0) {\n            stringBuilder.append(&quot;|/&quot;);break;\n        }\n\n\n        else  {\n            stringBuilder.append(&quot;\\\\&quot;);}\n\n\n    }\n    //stringBuilder.append(&quot;/&quot;);\n    return stringBuilder.toString();\n}\n</code></pre>\n"},{"tags":["java","visual-studio","visual-studio-code","selenium-webdriver","webdriver"],"answers":[{"comments":[{"owner":{"account_id":28382227,"reputation":1,"user_id":21709327,"display_name":"ninozefix"},"score":0,"creation_date":1682500707,"post_id":76088062,"comment_id":134224534,"body_markdown":"How can I solve this problem in VS ?","body":"How can I solve this problem in VS ?"},{"owner":{"account_id":24435058,"reputation":6292,"user_id":18359438,"display_name":"MingJie-MSFT"},"score":0,"creation_date":1682501212,"post_id":76088062,"comment_id":134224654,"body_markdown":"You can read [this document](https://code.visualstudio.com/docs/java/java-project#_configure-runtime-for-projects).","body":"You can read <a href=\"https://code.visualstudio.com/docs/java/java-project#_configure-runtime-for-projects\" rel=\"nofollow noreferrer\">this document</a>."}],"tags":[],"owner":{"account_id":24435058,"reputation":6292,"user_id":18359438,"display_name":"MingJie-MSFT"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682299742,"creation_date":1682299742,"answer_id":76088062,"question_id":76081597,"body_markdown":"&gt; The import org.openqa cannot be resolved\r\n\r\nThis means that class is not on your classpath.\r\n\r\nYou have to ensure that the CLASSPATH has pointed to the jars folder.","title":"Selenium webdriver for java in VS Code","body":"<blockquote>\n<p>The import org.openqa cannot be resolved</p>\n</blockquote>\n<p>This means that class is not on your classpath.</p>\n<p>You have to ensure that the CLASSPATH has pointed to the jars folder.</p>\n"}],"owner":{"account_id":28382227,"reputation":1,"user_id":21709327,"display_name":"ninozefix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682315372,"creation_date":1682192421,"question_id":76081597,"body_markdown":"I have downloaded selenium for java, unzipped it and put it in my project folder.\r\nAlso I downloaded the appropriate webdriver for MS Edge and put it in the folder.\r\n(P.s. I wrote my script in python and it works. Now I want to write it in Java and extend it).\r\n\r\nWhen I import in the main file &quot;import org.openqa.selenium.WebDriver;&quot; it underrings org.openqa and then it says &quot;The import org.openqa cannot be resolved&quot;.\r\n\r\nAny idea?","title":"Selenium webdriver for java in VS Code","body":"<p>I have downloaded selenium for java, unzipped it and put it in my project folder.\nAlso I downloaded the appropriate webdriver for MS Edge and put it in the folder.\n(P.s. I wrote my script in python and it works. Now I want to write it in Java and extend it).</p>\n<p>When I import in the main file &quot;import org.openqa.selenium.WebDriver;&quot; it underrings org.openqa and then it says &quot;The import org.openqa cannot be resolved&quot;.</p>\n<p>Any idea?</p>\n"},{"tags":["java","spring-boot","logback"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1682316745,"post_id":76088845,"comment_id":134189952,"body_markdown":"Does this help? https://stackoverflow.com/questions/58565070/how-to-generalize-logback-files-paths-to-both-windows-linux-os it uses double slashes after the drive name","body":"Does this help? <a href=\"https://stackoverflow.com/questions/58565070/how-to-generalize-logback-files-paths-to-both-windows-linux-os\" title=\"how to generalize logback files paths to both windows linux os\">stackoverflow.com/questions/58565070/&hellip;</a> it uses double slashes after the drive name"},{"owner":{"account_id":11336024,"reputation":122,"user_id":8311849,"display_name":"Yusuf ErdoÄan"},"score":0,"creation_date":1682317427,"post_id":76088845,"comment_id":134190046,"body_markdown":"I think you should add debug level. like this\n  ```\n &lt;root level=&quot;debug&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n    &lt;/root&gt;\n```","body":"I think you should add debug level. like this   ```  &lt;root level=&quot;debug&quot;&gt;         &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;     &lt;/root&gt; ```"}],"owner":{"account_id":20491582,"reputation":199,"user_id":15037564,"display_name":"Nichole"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682315304,"creation_date":1682314848,"question_id":76088845,"body_markdown":"In logback-spring.xml i have defined appender below\r\n\r\n    &lt;appender name=&quot;rollingFileAppender&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n      &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\r\n        &lt;FileNamePattern&gt;C:/logs/service.%d{yyyy-MM-dd}.log&lt;/FileNamePattern&gt;\r\n        &lt;MaxHistory&gt;30&lt;/MaxHistory&gt;\r\n      &lt;/rollingPolicy&gt;\r\n      &lt;encoder&gt;\r\n        &lt;pattern&gt;%d %-5level [%thread] %logger{0}: %msg%n&lt;/pattern&gt;\r\n      &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\nBut it is not generating log file at C:/logs/","title":"Unable to write log to file in Spring boot application","body":"<p>In logback-spring.xml i have defined appender below</p>\n<pre><code>&lt;appender name=&quot;rollingFileAppender&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n  &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\n    &lt;FileNamePattern&gt;C:/logs/service.%d{yyyy-MM-dd}.log&lt;/FileNamePattern&gt;\n    &lt;MaxHistory&gt;30&lt;/MaxHistory&gt;\n  &lt;/rollingPolicy&gt;\n  &lt;encoder&gt;\n    &lt;pattern&gt;%d %-5level [%thread] %logger{0}: %msg%n&lt;/pattern&gt;\n  &lt;/encoder&gt;\n&lt;/appender&gt;\n</code></pre>\n<p>But it is not generating log file at C:/logs/</p>\n"},{"tags":["java","spring","spring-boot","graphql","nullpointerexception"],"comments":[{"owner":{"account_id":28367824,"reputation":73,"user_id":21696871,"display_name":"fnymmm"},"score":0,"creation_date":1682086193,"post_id":76071167,"comment_id":134164935,"body_markdown":"I extended the annotation with the name of the argument:\n```java\n@QueryMapping\n  public String testQuery(@Argument(name = &quot;arr&quot;) MyArray arr){\n    return arr.getArr()[0];\n  }\n```\n\nBut the same problem persists","body":"I extended the annotation with the name of the argument: <code>java @QueryMapping   public String testQuery(@Argument(name = &quot;arr&quot;) MyArray arr){     return arr.getArr()[0];   } </code>  But the same problem persists"}],"answers":[{"tags":[],"owner":{"account_id":28367824,"reputation":73,"user_id":21696871,"display_name":"fnymmm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682314769,"creation_date":1682160807,"answer_id":76079257,"question_id":76071167,"body_markdown":"I finally managed to find the solution:\r\n\r\nWhen an array is passed as an argument into a GraphQL query, be it as the input itself or as a field of an object type ([GraphQL-Java Doc][1]), Spring converts it not to an *array* but to a *list*, hence the cryptic binding error.\r\n\r\nHence the problem was solved by simply changing the field from *String[]* to *List\\&lt;String\\&gt;*.\r\n\r\n    public class MyArray {\r\n\r\n      public MyArray(String[] arr){\r\n        this.arr = arr;\r\n      }\r\n\r\n      private String[] arr;\r\n\r\n      public String[] getArr() {\r\n        return arr;\r\n    }\r\n\r\nchanged to:\r\n\r\n    public class MyArray {\r\n\r\n      public MyArray(List&lt;String&gt; arr){\r\n        this.arr = arr;\r\n      }\r\n\r\n      private List&lt;String&gt; arr;\r\n\r\n      public List&lt;String&gt; getArr() {\r\n        return arr;\r\n    }\r\n\r\n\r\n  [1]: https://www.graphql-java.com/documentation/data-mapping/#lists-of-input-types","title":"GraphQL query with an not-null object type input returns internal error because its turned into null when examined in code","body":"<p>I finally managed to find the solution:</p>\n<p>When an array is passed as an argument into a GraphQL query, be it as the input itself or as a field of an object type (<a href=\"https://www.graphql-java.com/documentation/data-mapping/#lists-of-input-types\" rel=\"nofollow noreferrer\">GraphQL-Java Doc</a>), Spring converts it not to an <em>array</em> but to a <em>list</em>, hence the cryptic binding error.</p>\n<p>Hence the problem was solved by simply changing the field from <em>String[]</em> to <em>List&lt;String&gt;</em>.</p>\n<pre><code>public class MyArray {\n\n  public MyArray(String[] arr){\n    this.arr = arr;\n  }\n\n  private String[] arr;\n\n  public String[] getArr() {\n    return arr;\n}\n</code></pre>\n<p>changed to:</p>\n<pre><code>public class MyArray {\n\n  public MyArray(List&lt;String&gt; arr){\n    this.arr = arr;\n  }\n\n  private List&lt;String&gt; arr;\n\n  public List&lt;String&gt; getArr() {\n    return arr;\n}\n</code></pre>\n"}],"owner":{"account_id":28367824,"reputation":73,"user_id":21696871,"display_name":"fnymmm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":533,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76079257,"answer_count":1,"score":0,"last_activity_date":1682314769,"creation_date":1682064294,"question_id":76071167,"body_markdown":"# The Problem\r\nI want to pass an object type, I used *MyArr* as an example, as an input type in my GraphQL query. When requesting the query, I get an internal error. On further inspection I figured out, that in my code the input is a null reference.\r\n\r\nI&#39;m using Java 17, Spring 3.0.5 and SpringGraphQL 1.1.2\r\n\r\nMy example InputType MyArr:\r\n```\r\npublic class MyArray {\r\n\r\n  public MyArray(String[] arr){\r\n    this.arr = arr;\r\n  }\r\n\r\n  private String[] arr;\r\n\r\n  public String[] getArr() {\r\n    return arr;\r\n  }\r\n```\r\n\r\nMy GraphQL Schema:\r\n\r\n```\r\ntype Query{\r\n  testQuery(args: MyArr!): String!\r\n}\r\n\r\ninput {\r\n  arr: [String!]!\r\n}\r\n```\r\n\r\n\r\nMy GraphQL Resolver:\r\n```\r\n@Controller\r\npublic class RecipesGraphQLController {\r\n\r\n@QueryMapping\r\n  public String testQuery(@Argument MyArray arr){\r\n    return arr.getArr()[0];\r\n  }\r\n}\r\n```\r\n\r\nMy GraphQL Query (Sent on GraphiQl):\r\n\r\n```\r\n{\r\n  testQuery(args: {arr: [&quot;test&quot;]})\r\n}\r\n```\r\n\r\n\r\n# What I tried and checked\r\n\r\nI checked the GraphQLRequest if the input type is properly sent which it is:\r\n\r\n```\r\n{&quot;query&quot;:&quot;{\\n  testQuery(args: {arr: [\\&quot;test\\&quot;]})\\n}&quot;}\r\n```\r\n\r\nThen I tried using the complex built-in types in form of a string array as an input type but got the same results:\r\n\r\nMy GraphQL Schema:\r\n\r\n```\r\ntype Query{\r\n  testQuery(args: [String!]!): String!\r\n}\r\n```\r\n\r\n\r\nMy GraphQL Resolver:\r\n```\r\n@Controller\r\npublic class RecipesGraphQLController {\r\n\r\n@QueryMapping\r\n  public String testQuery(@Argument String[] arr){\r\n    return arr[0];\r\n  }\r\n}\r\n```\r\n\r\n\r\nMy GraphQL Query (Sent on GraphiQl):\r\n\r\n```\r\n{\r\n  testQuery(args: [&quot;testâ])\r\n}\r\n```\r\n\r\nWhen I used simple types as an input, i.e. a string, it worked just fine, which is even more confusing.\r\nI tried to debug all the steps Spring goes through until my resolver is called, to see if my input reaches my programm at all. Interestingly, the first call inside of Springs framework, my input is shown but somehow in all the steps Spring goes through its turned into null, so my biggest guess is that its a bug in the current Spring version.\r\n\r\nI hope this gives a broad overview of my problem and I&#39;m more than happy to supply further Information.","title":"GraphQL query with an not-null object type input returns internal error because its turned into null when examined in code","body":"<h1>The Problem</h1>\n<p>I want to pass an object type, I used <em>MyArr</em> as an example, as an input type in my GraphQL query. When requesting the query, I get an internal error. On further inspection I figured out, that in my code the input is a null reference.</p>\n<p>I'm using Java 17, Spring 3.0.5 and SpringGraphQL 1.1.2</p>\n<p>My example InputType MyArr:</p>\n<pre><code>public class MyArray {\n\n  public MyArray(String[] arr){\n    this.arr = arr;\n  }\n\n  private String[] arr;\n\n  public String[] getArr() {\n    return arr;\n  }\n</code></pre>\n<p>My GraphQL Schema:</p>\n<pre><code>type Query{\n  testQuery(args: MyArr!): String!\n}\n\ninput {\n  arr: [String!]!\n}\n</code></pre>\n<p>My GraphQL Resolver:</p>\n<pre><code>@Controller\npublic class RecipesGraphQLController {\n\n@QueryMapping\n  public String testQuery(@Argument MyArray arr){\n    return arr.getArr()[0];\n  }\n}\n</code></pre>\n<p>My GraphQL Query (Sent on GraphiQl):</p>\n<pre><code>{\n  testQuery(args: {arr: [&quot;test&quot;]})\n}\n</code></pre>\n<h1>What I tried and checked</h1>\n<p>I checked the GraphQLRequest if the input type is properly sent which it is:</p>\n<pre><code>{&quot;query&quot;:&quot;{\\n  testQuery(args: {arr: [\\&quot;test\\&quot;]})\\n}&quot;}\n</code></pre>\n<p>Then I tried using the complex built-in types in form of a string array as an input type but got the same results:</p>\n<p>My GraphQL Schema:</p>\n<pre><code>type Query{\n  testQuery(args: [String!]!): String!\n}\n</code></pre>\n<p>My GraphQL Resolver:</p>\n<pre><code>@Controller\npublic class RecipesGraphQLController {\n\n@QueryMapping\n  public String testQuery(@Argument String[] arr){\n    return arr[0];\n  }\n}\n</code></pre>\n<p>My GraphQL Query (Sent on GraphiQl):</p>\n<pre><code>{\n  testQuery(args: [&quot;testâ])\n}\n</code></pre>\n<p>When I used simple types as an input, i.e. a string, it worked just fine, which is even more confusing.\nI tried to debug all the steps Spring goes through until my resolver is called, to see if my input reaches my programm at all. Interestingly, the first call inside of Springs framework, my input is shown but somehow in all the steps Spring goes through its turned into null, so my biggest guess is that its a bug in the current Spring version.</p>\n<p>I hope this gives a broad overview of my problem and I'm more than happy to supply further Information.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682316188,"post_id":76088810,"comment_id":134189887,"body_markdown":"You would need explicit configuration and setup for that.","body":"You would need explicit configuration and setup for that."}],"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682314328,"creation_date":1682314328,"question_id":76088810,"body_markdown":"Is it possible to use two network interfaces to expose two controllers in a same project in java spring?\r\n\r\nBy example: use Spring Cloud for route internal apis and same time serve a internal route for administration, but for security reason need expose the api route on `eth0` network interface and admin paths on `ethManage` interface.\r\n\r\nIs it possible in Java Spring?","title":"How to two network interface same project diffrent controllers in Java Spring?","body":"<p>Is it possible to use two network interfaces to expose two controllers in a same project in java spring?</p>\n<p>By example: use Spring Cloud for route internal apis and same time serve a internal route for administration, but for security reason need expose the api route on <code>eth0</code> network interface and admin paths on <code>ethManage</code> interface.</p>\n<p>Is it possible in Java Spring?</p>\n"},{"tags":["java","json","http","get"],"answers":[{"comments":[{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1682295170,"post_id":63194404,"comment_id":134188097,"body_markdown":"whats the maven package for this?  springframeworkboot.configurationprocessor? json.internal.json_simple? Please add to answer, thanks !","body":"whats the maven package for this?  springframeworkboot.configurationprocessor? json.internal.json_simple? Please add to answer, thanks !"},{"owner":{"account_id":5268074,"reputation":17816,"user_id":4207306,"display_name":"Eklavya"},"score":0,"creation_date":1682314256,"post_id":63194404,"comment_id":134189667,"body_markdown":"@mattsmith5 from `org.json.JSONObject` and also updated the answer.","body":"@mattsmith5 from <code>org.json.JSONObject</code> and also updated the answer."}],"tags":[],"owner":{"account_id":5268074,"reputation":17816,"user_id":4207306,"display_name":"Eklavya"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682314109,"creation_date":1596207848,"answer_id":63194404,"question_id":63194278,"body_markdown":"You can convert JSON string into `JSONObject`( from org.json) and then get then token using `getString()` method\r\n\r\n    JSONObject result = new JSONObject(EntityUtils.toString(entity));\r\n    String token = result.getString(&quot;token&quot;); \r\n\r\nReference: http://stleary.github.io/JSON-java/org/json/JSONObject.html#JSONObject-java.lang.String-","title":"how to get JSON value from HTTP response?","body":"<p>You can convert JSON string into <code>JSONObject</code>( from org.json) and then get then token using <code>getString()</code> method</p>\n<pre><code>JSONObject result = new JSONObject(EntityUtils.toString(entity));\nString token = result.getString(&quot;token&quot;); \n</code></pre>\n<p>Reference: <a href=\"http://stleary.github.io/JSON-java/org/json/JSONObject.html#JSONObject-java.lang.String-\" rel=\"nofollow noreferrer\">http://stleary.github.io/JSON-java/org/json/JSONObject.html#JSONObject-java.lang.String-</a></p>\n"},{"comments":[{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1682295173,"post_id":63194406,"comment_id":134188098,"body_markdown":"whats the maven package for this?  springframeworkboot.configurationprocessor? json.internal.json_simple? Please add to answer, thanks !","body":"whats the maven package for this?  springframeworkboot.configurationprocessor? json.internal.json_simple? Please add to answer, thanks !"},{"owner":{"account_id":11166583,"reputation":1442,"user_id":8195076,"display_name":"Wowo Ot"},"score":0,"creation_date":1682322988,"post_id":63194406,"comment_id":134190960,"body_markdown":"No need to add any maven package, `org.json` is part of `java.lang.Object` .","body":"No need to add any maven package, <code>org.json</code> is part of <code>java.lang.Object</code> ."}],"tags":[],"owner":{"account_id":11166583,"reputation":1442,"user_id":8195076,"display_name":"Wowo Ot"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596207853,"creation_date":1596207853,"answer_id":63194406,"question_id":63194278,"body_markdown":"try \r\n\r\n    JSONObject jsonObject = new JSONObject(EntityUtils.toString(entity));\r\n    String token = jsonObject.getString(&quot;token&quot;);","title":"how to get JSON value from HTTP response?","body":"<p>try</p>\n<pre><code>JSONObject jsonObject = new JSONObject(EntityUtils.toString(entity));\nString token = jsonObject.getString(&quot;token&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1596211126,"creation_date":1596211126,"answer_id":63195250,"question_id":63194278,"body_markdown":"You can simply use regex(don&#39;t need additional libs).\r\n\r\n```\r\npublic static void main(String[] args){\r\n\r\n\tString json = &quot;{\\&quot;token\\&quot;:\\&quot;myToken\\&quot;}&quot;;\r\n\r\n\tSystem.out.println(extractToken(json));\r\n\r\n}\r\n\r\npublic static String extractToken(String json){\r\n\r\n\tString regexToken = &quot;(?:.*\\\\\\&quot;token\\\\\\&quot;\\\\s*:\\\\s*\\\\\\&quot;)(?&lt;token&gt;.*?)(?:\\\\\\&quot;.*)&quot;;\r\n\t\t\r\n    Pattern patternToken = Pattern.compile(regexToken, Pattern.DOTALL);\r\n    Matcher matcherToken = patternToken.matcher(json);\r\n\t\r\n    if(matcherToken.matches()){\r\n\t\treturn matcherToken.group(&quot;token&quot;);\r\n\t}else{\r\n\t\treturn &quot;token_not_found&quot;;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThis will work even on a json with multiple fields. The only condition is to be only one `token` field in the entire json.","title":"how to get JSON value from HTTP response?","body":"<p>You can simply use regex(don't need additional libs).</p>\n<pre><code>public static void main(String[] args){\n\n    String json = &quot;{\\&quot;token\\&quot;:\\&quot;myToken\\&quot;}&quot;;\n\n    System.out.println(extractToken(json));\n\n}\n\npublic static String extractToken(String json){\n\n    String regexToken = &quot;(?:.*\\\\\\&quot;token\\\\\\&quot;\\\\s*:\\\\s*\\\\\\&quot;)(?&lt;token&gt;.*?)(?:\\\\\\&quot;.*)&quot;;\n        \n    Pattern patternToken = Pattern.compile(regexToken, Pattern.DOTALL);\n    Matcher matcherToken = patternToken.matcher(json);\n    \n    if(matcherToken.matches()){\n        return matcherToken.group(&quot;token&quot;);\n    }else{\n        return &quot;token_not_found&quot;;\n    }\n\n}\n</code></pre>\n<p>This will work even on a json with multiple fields. The only condition is to be only one <code>token</code> field in the entire json.</p>\n"}],"owner":{"account_id":16983689,"reputation":183,"user_id":12284961,"display_name":"LaChope"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1229,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1596258350,"accepted_answer_id":63194404,"answer_count":3,"score":1,"last_activity_date":1682314109,"creation_date":1596207408,"question_id":63194278,"body_markdown":"I would like to retrieve the value of a JSON file from an HTTP request. Unfortunately, I do not know how to proceed.\r\nI am using the GET method:\r\n\r\n    CloseableHttpClient client = HttpClientBuilder.create().build();\r\n\tHttpGet get = new HttpGet(new URI(&quot;http://localhost:3333/command/core/get-csrf-token&quot;));\r\n\tHttpEntity entity = client.execute(get).getEntity();\r\nI do get the expected file as I tried:\r\n\r\n    return EntityUtils.toString(entity);\r\nand get as output: `{&quot;token&quot;:&quot;myToken&quot;}`\r\n\r\n","title":"how to get JSON value from HTTP response?","body":"<p>I would like to retrieve the value of a JSON file from an HTTP request. Unfortunately, I do not know how to proceed.\nI am using the GET method:</p>\n<pre><code>CloseableHttpClient client = HttpClientBuilder.create().build();\nHttpGet get = new HttpGet(new URI(&quot;http://localhost:3333/command/core/get-csrf-token&quot;));\nHttpEntity entity = client.execute(get).getEntity();\n</code></pre>\n<p>I do get the expected file as I tried:</p>\n<pre><code>return EntityUtils.toString(entity);\n</code></pre>\n<p>and get as output: <code>{&quot;token&quot;:&quot;myToken&quot;}</code></p>\n"},{"tags":["java","protocol-buffers","protoc","protobuf-java"],"answers":[{"tags":[],"owner":{"account_id":13936444,"reputation":259,"user_id":10063327,"display_name":"m-kay"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682314014,"creation_date":1682314014,"answer_id":76088785,"question_id":76055275,"body_markdown":"I finally found a solution for this. Plugins can not only create new files, but also use insertion points to extend classes generated by the java code generator, see https://protobuf.dev/reference/java/java-generated/#plugins. \r\n\r\nThere is a great [article][1] which describes exactly how to create a plugin which uses those insertion points.\r\n\r\n \r\n\r\n\r\n  [1]: https://medium.com/urbanmatrix-technologies/the-missing-guide-to-protobuf-insertion-points-in-java-kotlin-2f1b2bb183db","title":"How to hook into protobuf java code generation?","body":"<p>I finally found a solution for this. Plugins can not only create new files, but also use insertion points to extend classes generated by the java code generator, see <a href=\"https://protobuf.dev/reference/java/java-generated/#plugins\" rel=\"nofollow noreferrer\">https://protobuf.dev/reference/java/java-generated/#plugins</a>.</p>\n<p>There is a great <a href=\"https://medium.com/urbanmatrix-technologies/the-missing-guide-to-protobuf-insertion-points-in-java-kotlin-2f1b2bb183db\" rel=\"nofollow noreferrer\">article</a> which describes exactly how to create a plugin which uses those insertion points.</p>\n"}],"owner":{"account_id":13936444,"reputation":259,"user_id":10063327,"display_name":"m-kay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":402,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76088785,"answer_count":1,"score":1,"last_activity_date":1682314014,"creation_date":1681911828,"question_id":76055275,"body_markdown":"Is there any way to hook into the generation of java classes when invoking `protoc`? I know there are plugins which can be created for protoc but as far as I understood it is only possible to generate additional files there. What I would like to do is adding additional code into the java classes based on some options in the protobuf schemas.\r\n\r\nSo for the following schema:\r\n```proto\r\nsyntax = &quot;proto3&quot;;\r\n\r\nimport &quot;google/protobuf/descriptor.proto&quot;;\r\n\r\nenum DateFormat {\r\n  LOCAL_DATE = 0;\r\n  LOCAL_DATE_TIME = 1;\r\n}\r\n\r\nextend google.protobuf.FieldOptions  {\r\n  DateFormat format = 95765;\r\n}\r\n\r\nmessage MyMessage {\r\n  string name = 1;\r\n  sint64 id = 2;\r\n  string dateTimeField = 3 [(format) = LOCAL_DATE_TIME];\r\n}\r\n```\r\n\r\nI would like to have the `dateTimeField` in the generated java class of type `LocalDateTime` which contains the already parsed date time.\r\n\r\n","title":"How to hook into protobuf java code generation?","body":"<p>Is there any way to hook into the generation of java classes when invoking <code>protoc</code>? I know there are plugins which can be created for protoc but as far as I understood it is only possible to generate additional files there. What I would like to do is adding additional code into the java classes based on some options in the protobuf schemas.</p>\n<p>So for the following schema:</p>\n<pre><code>syntax = &quot;proto3&quot;;\n\nimport &quot;google/protobuf/descriptor.proto&quot;;\n\nenum DateFormat {\n  LOCAL_DATE = 0;\n  LOCAL_DATE_TIME = 1;\n}\n\nextend google.protobuf.FieldOptions  {\n  DateFormat format = 95765;\n}\n\nmessage MyMessage {\n  string name = 1;\n  sint64 id = 2;\n  string dateTimeField = 3 [(format) = LOCAL_DATE_TIME];\n}\n</code></pre>\n<p>I would like to have the <code>dateTimeField</code> in the generated java class of type <code>LocalDateTime</code> which contains the already parsed date time.</p>\n"},{"tags":["java","tomcat","verbose"],"comments":[{"owner":{"account_id":13996510,"reputation":400,"user_id":10109156,"display_name":"tornadoradon"},"score":0,"creation_date":1682314613,"post_id":76088711,"comment_id":134189711,"body_markdown":"https://serverfault.com/questions/252934/how-to-redirect-tomcat-console-log-to-files-tomcat-started-via-windows-bat\n\nis this answer for your question?","body":"<a href=\"https://serverfault.com/questions/252934/how-to-redirect-tomcat-console-log-to-files-tomcat-started-via-windows-bat\" title=\"how to redirect tomcat console log to files tomcat started via windows bat\">serverfault.com/questions/252934/&hellip;</a>  is this answer for your question?"}],"owner":{"account_id":4301027,"reputation":3755,"user_id":3514736,"accept_rate":42,"display_name":"Rahman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682312776,"creation_date":1682312776,"question_id":76088711,"body_markdown":"I want to print verbose log in a text file during tomcat startup. I tried to use \r\n`JAVA_OPTS=&quot;$JAVA_OPTS -verbose:class&quot;` , but it prints in the console.\r\nCan someone help me on this ?\r\n\r\nThanks","title":"How print verbose log in a text file","body":"<p>I want to print verbose log in a text file during tomcat startup. I tried to use\n<code>JAVA_OPTS=&quot;$JAVA_OPTS -verbose:class&quot;</code> , but it prints in the console.\nCan someone help me on this ?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr JaneÄek"},"score":0,"creation_date":1682282818,"post_id":76087167,"comment_id":134186905,"body_markdown":"_&quot;I tried to inject through the constructor earlier, but it doesn&#39;t work&quot;_ well this does not work either as the instance is null - not injected with anything. Enable `debug=true` in your application.properties, restart and read the logs, it will describe how it injects what dependencies and why.","body":"<i>&quot;I tried to inject through the constructor earlier, but it doesn&#39;t work&quot;</i> well this does not work either as the instance is null - not injected with anything. Enable <code>debug=true</code> in your application.properties, restart and read the logs, it will describe how it injects what dependencies and why."},{"owner":{"account_id":195169,"reputation":2946,"user_id":1128593,"display_name":"David Jones"},"score":0,"creation_date":1682287845,"post_id":76087167,"comment_id":134187459,"body_markdown":"Try `@Component` rather than `@Configuration`","body":"Try <code>@Component</code> rather than <code>@Configuration</code>"},{"owner":{"account_id":13996510,"reputation":400,"user_id":10109156,"display_name":"tornadoradon"},"score":0,"creation_date":1682295513,"post_id":76087167,"comment_id":134188126,"body_markdown":"You can&#39;t do like this. You are initializing `TRON_TRANSACTION_URL` and `TRON_ACC_URL` before your rabbit initialized.","body":"You can&#39;t do like this. You are initializing <code>TRON_TRANSACTION_URL</code> and <code>TRON_ACC_URL</code> before your rabbit initialized."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682312231,"creation_date":1682312231,"answer_id":76088685,"question_id":76087167,"body_markdown":"You should initialize the fields that depend on `CryptoWalletsRabbit` inside the autowired constructor.\r\n\r\n```java\r\nprivate final PaymentRepositoryImpl paymentRepository;\r\nprivate final RestTemplate restTemplate;\r\nprivate final CryptoWalletsRabbit rabbit;\r\nprivate final String TRON_TRANSACTION_URL;\r\nprivate final String TRON_ACC_URL;\r\npublic PaymentServiceImpl(PaymentRepositoryImpl paymentRepository, RestTemplate restTemplate, CryptoWalletsRabbit rabbit) {\r\n\tthis.paymentRepository = paymentRepository;\r\n\tthis.restTemplate = restTemplate;\r\n\tthis.rabbit = rabbit;\r\n\tthis.TRON_TRANSACTION_URL = &quot;https://api.trongrid.io/v1/accounts/&quot; + rabbit.getTRON_WALLET() + &quot;/transactions?only_to=true&amp;limit=1&quot;;\r\n\tthis.TRON_ACC_URL = &quot;https://api.trongrid.io/v1/accounts/&quot; + rabbit.getTRON_WALLET() + &quot;/transactions?only_to=true&amp;limit=1&quot;;\r\n}\r\n```","title":"Cannot because &quot;this.rabbit&quot; is null","body":"<p>You should initialize the fields that depend on <code>CryptoWalletsRabbit</code> inside the autowired constructor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final PaymentRepositoryImpl paymentRepository;\nprivate final RestTemplate restTemplate;\nprivate final CryptoWalletsRabbit rabbit;\nprivate final String TRON_TRANSACTION_URL;\nprivate final String TRON_ACC_URL;\npublic PaymentServiceImpl(PaymentRepositoryImpl paymentRepository, RestTemplate restTemplate, CryptoWalletsRabbit rabbit) {\n    this.paymentRepository = paymentRepository;\n    this.restTemplate = restTemplate;\n    this.rabbit = rabbit;\n    this.TRON_TRANSACTION_URL = &quot;https://api.trongrid.io/v1/accounts/&quot; + rabbit.getTRON_WALLET() + &quot;/transactions?only_to=true&amp;limit=1&quot;;\n    this.TRON_ACC_URL = &quot;https://api.trongrid.io/v1/accounts/&quot; + rabbit.getTRON_WALLET() + &quot;/transactions?only_to=true&amp;limit=1&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":28287609,"reputation":21,"user_id":21628283,"display_name":"Andrey Picasso"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1682312231,"creation_date":1682282390,"question_id":76087167,"body_markdown":"When I try to inject Spring configuration into my code, I get an error:\r\n**this.rabbit null**\r\nMy service:\r\n```\r\n@Service\r\npublic class PaymentServiceImpl implements PaymentService {\r\n\r\n    public PaymentServiceImpl(PaymentRepositoryImpl paymentRepository, RestTemplate restTemplate) {\r\n        this.paymentRepository = paymentRepository;\r\n        this.restTemplate = restTemplate;\r\n//        this.rabbit = rabbit;\r\n    }\r\n\r\n    PaymentRepositoryImpl paymentRepository;\r\n    RestTemplate restTemplate;\r\n    @Autowired\r\n    private CryptoWalletsRabbit rabbit;\r\n\r\n    private final String TRON_TRANSACTION_URL = &quot;https://api.trongrid.io/v1/accounts/&quot; + rabbit.getTRON_WALLET() + &quot;/transactions?only_to=true&amp;limit=1&quot;;\r\n    private final String TRON_ACC_URL = &quot;https://api.trongrid.io/v1/accounts/&quot; + rabbit.getTRON_WALLET() + &quot;/transactions?only_to=true&amp;limit=1&quot;;\r\n```\r\nMy CryptoWalletsRabbit:\r\n```\r\n@Configuration\r\n@Data\r\n@PropertySource(&quot;classpath:application.properties&quot;)\r\npublic class CryptoWalletsRabbit {\r\n    @Value(&quot;${ru.panic.lapayment.wallets.tron}&quot;)\r\n    private String TRON_WALLET;\r\n}\r\n```\r\nMy **application.properties**\r\n```\r\nru.panic.lapayment.wallets.tron=sa\r\n```\r\nHelp me please, the error is very strange, everything should work. I tried to inject through the constructor earlier, but it doesn&#39;t work.","title":"Cannot because &quot;this.rabbit&quot; is null","body":"<p>When I try to inject Spring configuration into my code, I get an error:\n<strong>this.rabbit null</strong>\nMy service:</p>\n<pre><code>@Service\npublic class PaymentServiceImpl implements PaymentService {\n\n    public PaymentServiceImpl(PaymentRepositoryImpl paymentRepository, RestTemplate restTemplate) {\n        this.paymentRepository = paymentRepository;\n        this.restTemplate = restTemplate;\n//        this.rabbit = rabbit;\n    }\n\n    PaymentRepositoryImpl paymentRepository;\n    RestTemplate restTemplate;\n    @Autowired\n    private CryptoWalletsRabbit rabbit;\n\n    private final String TRON_TRANSACTION_URL = &quot;https://api.trongrid.io/v1/accounts/&quot; + rabbit.getTRON_WALLET() + &quot;/transactions?only_to=true&amp;limit=1&quot;;\n    private final String TRON_ACC_URL = &quot;https://api.trongrid.io/v1/accounts/&quot; + rabbit.getTRON_WALLET() + &quot;/transactions?only_to=true&amp;limit=1&quot;;\n</code></pre>\n<p>My CryptoWalletsRabbit:</p>\n<pre><code>@Configuration\n@Data\n@PropertySource(&quot;classpath:application.properties&quot;)\npublic class CryptoWalletsRabbit {\n    @Value(&quot;${ru.panic.lapayment.wallets.tron}&quot;)\n    private String TRON_WALLET;\n}\n</code></pre>\n<p>My <strong>application.properties</strong></p>\n<pre><code>ru.panic.lapayment.wallets.tron=sa\n</code></pre>\n<p>Help me please, the error is very strange, everything should work. I tried to inject through the constructor earlier, but it doesn't work.</p>\n"},{"tags":["java","spring","rest","unit-testing","mockito"],"answers":[{"comments":[{"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"score":0,"creation_date":1636381268,"post_id":69858080,"comment_id":123534216,"body_markdown":"The MockedStatic type and `Mockito.mockStatic(..)` method are not importing with mockito-inline. It looks like they&#39;re now in Mockito core, but when I use core, I receive an error telling me to use mockito-inline:\n```\norg.mockito.exceptions.base.MockitoException: \nThe used MockMaker PowerMockMaker does not support the creation of static mocks\n\nMockito&#39;s inline mock maker supports static mocks based on the Instrumentation API.\nYou can simply enable this mock mode, by placing the &#39;mockito-inline&#39; artifact where you are currently using &#39;mockito-core&#39;.\n```","body":"The MockedStatic type and <code>Mockito.mockStatic(..)</code> method are not importing with mockito-inline. It looks like they&#39;re now in Mockito core, but when I use core, I receive an error telling me to use mockito-inline: ``` org.mockito.exceptions.base.MockitoException:  The used MockMaker PowerMockMaker does not support the creation of static mocks  Mockito&#39;s inline mock maker supports static mocks based on the Instrumentation API. You can simply enable this mock mode, by placing the &#39;mockito-inline&#39; artifact where you are currently using &#39;mockito-core&#39;. ```"},{"owner":{"account_id":12190203,"reputation":444,"user_id":8898054,"display_name":"Meilan"},"score":0,"creation_date":1667425531,"post_id":69858080,"comment_id":131167365,"body_markdown":"I used this way but I got NPE when the code jump in the client build part. Do you happen to know the possiable reason?","body":"I used this way but I got NPE when the code jump in the client build part. Do you happen to know the possiable reason?"},{"owner":{"account_id":12190203,"reputation":444,"user_id":8898054,"display_name":"Meilan"},"score":0,"creation_date":1667505619,"post_id":69858080,"comment_id":131188885,"body_markdown":"NVM, I figured the NPE because I didn&#39;t mock the `client.post().body(...)` correctly. After I fixed it, this method helped, and the unit test finally worked. And it can&#39;t work without mock the builder() first. Thanks a lot.","body":"NVM, I figured the NPE because I didn&#39;t mock the <code>client.post().body(...)</code> correctly. After I fixed it, this method helped, and the unit test finally worked. And it can&#39;t work without mock the builder() first. Thanks a lot."}],"tags":[],"owner":{"account_id":14587195,"reputation":413,"user_id":10535574,"display_name":"RAZAFINARIVO Hanania"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636138996,"creation_date":1636138996,"answer_id":69858080,"question_id":69857313,"body_markdown":"You need to mock the static method `builder()` of `WebClient`. Indeed, if this method is not mocked, mockito can&#39;t edit the behaviour of this method. Therefore, your mocked webClient is not used. To perfom that, you need to include this dependency in your `pom.xml` if you use maven.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n        &lt;version&gt;3.4.6&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis will provide `mockStatic()` method on `Mockito` and can be used like :\r\n\r\n    MockedStatic&lt;WebClient&gt; webClientStatic = Mockito.mockStatic(WebClient.class);\r\n    webClientStatic.when(WebClient::builder).thenReturn(webClientBuilder);\r\n\r\n`webClientBuilder` must be mocked because we need to change behaviour of its method `build()` to return your mocked webClient. \r\n\r\n    Mockito.when(webClientBuilder.build()).thenReturn(mockedWebClient);\r\n\r\nTo resume all in one code :\r\n\r\n    import org.junit.Assert;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mock;\r\n    import org.mockito.Mockito;\r\n    import org.mockito.junit.MockitoJUnitRunner;\r\n    import org.springframework.http.client.reactive.ReactorClientHttpConnector;\r\n    import org.springframework.web.reactive.function.client.ExchangeStrategies;\r\n    import org.springframework.web.reactive.function.client.WebClient;\r\n    import reactor.netty.http.client.HttpClient;\r\n    import org.mockito.MockedStatic;\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class WebClientTest {\r\n\r\n        @Mock\r\n        private WebClient.Builder webClientBuilder;\r\n\r\n        @Mock\r\n        private WebClient mockedWebClient;\r\n\r\n        @Before\r\n        public void setup() {\r\n            Mockito.when(webClientBuilder.exchangeStrategies(Mockito.any(ExchangeStrategies.class))).thenReturn(webClientBuilder);\r\n            Mockito.when(webClientBuilder.clientConnector(Mockito.any(ReactorClientHttpConnector.class))).thenReturn(webClientBuilder);\r\n            Mockito.when(webClientBuilder.build()).thenReturn(mockedWebClient);\r\n        }\r\n\r\n        @Test\r\n        public void testWebClient() {\r\n            final MockedStatic&lt;WebClient&gt; webClientStatic = Mockito.mockStatic(WebClient.class);\r\n            webClientStatic.when(WebClient::builder).thenReturn(webClientBuilder);\r\n\r\n            final WebClient webClient = WebClient.builder()\r\n                    .exchangeStrategies(ExchangeStrategies.builder()\r\n                            .codecs(configurer -&gt; configurer\r\n                                    .defaultCodecs()\r\n                                    .maxInMemorySize(16 * 1024 * 1024))\r\n                            .build())\r\n                    .clientConnector(new ReactorClientHttpConnector(HttpClient.newConnection().compress(true)))\r\n                    .build();\r\n\r\n            //It throws error if webClient is not mockedWebClient\r\n            Assert.assertEquals(webClient, mockedWebClient);\r\n        }\r\n    }\r\n\r\nYou can test it.","title":"How to mock Spring WebClient and builder","body":"<p>You need to mock the static method <code>builder()</code> of <code>WebClient</code>. Indeed, if this method is not mocked, mockito can't edit the behaviour of this method. Therefore, your mocked webClient is not used. To perfom that, you need to include this dependency in your <code>pom.xml</code> if you use maven.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n    &lt;version&gt;3.4.6&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This will provide <code>mockStatic()</code> method on <code>Mockito</code> and can be used like :</p>\n<pre><code>MockedStatic&lt;WebClient&gt; webClientStatic = Mockito.mockStatic(WebClient.class);\nwebClientStatic.when(WebClient::builder).thenReturn(webClientBuilder);\n</code></pre>\n<p><code>webClientBuilder</code> must be mocked because we need to change behaviour of its method <code>build()</code> to return your mocked webClient.</p>\n<pre><code>Mockito.when(webClientBuilder.build()).thenReturn(mockedWebClient);\n</code></pre>\n<p>To resume all in one code :</p>\n<pre><code>import org.junit.Assert;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport org.springframework.http.client.reactive.ReactorClientHttpConnector;\nimport org.springframework.web.reactive.function.client.ExchangeStrategies;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport reactor.netty.http.client.HttpClient;\nimport org.mockito.MockedStatic;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class WebClientTest {\n\n    @Mock\n    private WebClient.Builder webClientBuilder;\n\n    @Mock\n    private WebClient mockedWebClient;\n\n    @Before\n    public void setup() {\n        Mockito.when(webClientBuilder.exchangeStrategies(Mockito.any(ExchangeStrategies.class))).thenReturn(webClientBuilder);\n        Mockito.when(webClientBuilder.clientConnector(Mockito.any(ReactorClientHttpConnector.class))).thenReturn(webClientBuilder);\n        Mockito.when(webClientBuilder.build()).thenReturn(mockedWebClient);\n    }\n\n    @Test\n    public void testWebClient() {\n        final MockedStatic&lt;WebClient&gt; webClientStatic = Mockito.mockStatic(WebClient.class);\n        webClientStatic.when(WebClient::builder).thenReturn(webClientBuilder);\n\n        final WebClient webClient = WebClient.builder()\n                .exchangeStrategies(ExchangeStrategies.builder()\n                        .codecs(configurer -&gt; configurer\n                                .defaultCodecs()\n                                .maxInMemorySize(16 * 1024 * 1024))\n                        .build())\n                .clientConnector(new ReactorClientHttpConnector(HttpClient.newConnection().compress(true)))\n                .build();\n\n        //It throws error if webClient is not mockedWebClient\n        Assert.assertEquals(webClient, mockedWebClient);\n    }\n}\n</code></pre>\n<p>You can test it.</p>\n"}],"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12024,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682311945,"creation_date":1636134397,"question_id":69857313,"body_markdown":"I am trying to mock Spring WebClient and am having issues with the WebClient.builder() mocking. The mocks I&#39;ve defined so far in my test are not being used, I think because this builder does not return my mock WebClient. How can I get the builder to return my mock?\r\n\r\n    WebClient webClient = WebClient.builder()\r\n                    .exchangeStrategies(ExchangeStrategies.builder()\r\n\t\t\t\t\t.codecs(configurer -&gt; configurer\r\n\t\t\t\t\t\t\t.defaultCodecs()\r\n\t\t\t\t\t\t\t.maxInMemorySize(16 * 1024 * 1024))\r\n\t\t\t\t\t.build())\r\n\t\t\t\t\t.clientConnector(new ReactorClientHttpConnector(HttpClient.newConnection().compress(true)))\r\n\t\t\t\t\t.build();\r\n\r\nand the WebClient is used as so:\r\n\r\n    response = webClient\r\n\t\t\t\t.get()\r\n\t\t\t\t.uri(URLDecoder.decode(someEndpoint.replace(&quot;\\&quot;&quot;, &quot;&quot;), CLIENT_ENCODING))\r\n\t\t\t\t.header(AUTHORIZATION, BEARER + accessToken)\r\n\t\t\t\t.accept(MediaType.APPLICATION_JSON)\r\n\t\t\t\t.retrieve().bodyToMono(JsonNode.class).block();\r\n\r\nI do not see any problems with the mocks as I followed these solutions: https://stackoverflow.com/questions/45301220/how-to-mock-spring-webflux-webclient but the mocks are not being used. How can I mock the builder/return my mock from the builder?","title":"How to mock Spring WebClient and builder","body":"<p>I am trying to mock Spring WebClient and am having issues with the WebClient.builder() mocking. The mocks I've defined so far in my test are not being used, I think because this builder does not return my mock WebClient. How can I get the builder to return my mock?</p>\n<pre><code>WebClient webClient = WebClient.builder()\n                .exchangeStrategies(ExchangeStrategies.builder()\n                .codecs(configurer -&gt; configurer\n                        .defaultCodecs()\n                        .maxInMemorySize(16 * 1024 * 1024))\n                .build())\n                .clientConnector(new ReactorClientHttpConnector(HttpClient.newConnection().compress(true)))\n                .build();\n</code></pre>\n<p>and the WebClient is used as so:</p>\n<pre><code>response = webClient\n            .get()\n            .uri(URLDecoder.decode(someEndpoint.replace(&quot;\\&quot;&quot;, &quot;&quot;), CLIENT_ENCODING))\n            .header(AUTHORIZATION, BEARER + accessToken)\n            .accept(MediaType.APPLICATION_JSON)\n            .retrieve().bodyToMono(JsonNode.class).block();\n</code></pre>\n<p>I do not see any problems with the mocks as I followed these solutions: <a href=\"https://stackoverflow.com/questions/45301220/how-to-mock-spring-webflux-webclient\">How to mock Spring WebFlux WebClient?</a> but the mocks are not being used. How can I mock the builder/return my mock from the builder?</p>\n"},{"tags":["java","benchmarking","jmh"],"comments":[{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1453924661,"post_id":35046745,"comment_id":57817889,"body_markdown":"I think that answers your question: http://stackoverflow.com/questions/25572778/why-does-jmh-run-different-forks","body":"I think that answers your question: <a href=\"http://stackoverflow.com/questions/25572778/why-does-jmh-run-different-forks\" title=\"why does jmh run different forks\">stackoverflow.com/questions/25572778/&hellip;</a>"},{"owner":{"account_id":1859358,"reputation":42899,"user_id":1684269,"accept_rate":91,"display_name":"Ole"},"score":0,"creation_date":1453926046,"post_id":35046745,"comment_id":57818684,"body_markdown":"So IIUC, each fork runs in a separate VM.  We do this because there might be subtle difference for each VM launched that will cause runtime to differ, hence we can account for this the variance calculation?","body":"So IIUC, each fork runs in a separate VM.  We do this because there might be subtle difference for each VM launched that will cause runtime to differ, hence we can account for this the variance calculation?"},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":2,"creation_date":1453926190,"post_id":35046745,"comment_id":57818761,"body_markdown":"Yeah there might be differences between each run in the way the JIT behaves so forking allows to take account of that. When running benchmarks, I have seen extremely weird cases where one run would have a certain average and another run for the same test would have a very different one, &quot;simply&quot; because the JIT handled things differently.","body":"Yeah there might be differences between each run in the way the JIT behaves so forking allows to take account of that. When running benchmarks, I have seen extremely weird cases where one run would have a certain average and another run for the same test would have a very different one, &quot;simply&quot; because the JIT handled things differently."},{"owner":{"account_id":1859358,"reputation":42899,"user_id":1684269,"accept_rate":91,"display_name":"Ole"},"score":0,"creation_date":1453927151,"post_id":35046745,"comment_id":57819288,"body_markdown":"Great - good to know - Thanks Tunaki.  BTW - I think that answer is a lot clearer than the reference, in case you want to add it as an answer.","body":"Great - good to know - Thanks Tunaki.  BTW - I think that answer is a lot clearer than the reference, in case you want to add it as an answer."}],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1682311155,"creation_date":1453955843,"answer_id":35052972,"question_id":35046745,"body_markdown":"The JVM optimizes an application by creating a profile of the application&#39;s behavior. The fork is created to reset this profile. Otherwise, running:\r\n\r\n    benchmarkFoo();\r\n    benchmarkBar();\r\n\r\nmight result in different measurements than\r\n\r\n    benchmarkBar();\r\n    benchmarkFoo();\r\n\r\nsince the profile of the first benchmark influences the second.\r\n\r\nThe times determine the length of JMH spending for warming up or running the benchmark. If these times are to short, your VM might not be warmed up sufficiently or your result might have a too high standard deviation.","title":"What is the purpose of JMH @Fork?","body":"<p>The JVM optimizes an application by creating a profile of the application's behavior. The fork is created to reset this profile. Otherwise, running:</p>\n<pre><code>benchmarkFoo();\nbenchmarkBar();\n</code></pre>\n<p>might result in different measurements than</p>\n<pre><code>benchmarkBar();\nbenchmarkFoo();\n</code></pre>\n<p>since the profile of the first benchmark influences the second.</p>\n<p>The times determine the length of JMH spending for warming up or running the benchmark. If these times are to short, your VM might not be warmed up sufficiently or your result might have a too high standard deviation.</p>\n"},{"tags":[],"owner":{"account_id":1041776,"reputation":2850,"user_id":1047667,"accept_rate":100,"display_name":"Nitsan Wakart"},"comment_count":0,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1454397293,"creation_date":1454397293,"answer_id":35147232,"question_id":35046745,"body_markdown":"JMH offers the fork functionality for a few reasons. One is compilation profile separation as discussed by Rafael above. But this behaviour is not controlled by the @Forks annotation (unless you choose 0 forks, which means no subprocesses are forked to run benchmarks at all). You can choose to run all the benchmarks as part of your benchmark warmup (thus creating a mixed profile for the JIT to work with) by using the warmup mode control(-wm).\r\n\r\nThe reality is that many things can conspire to tilt your results one way or another and running any benchmark multiple times to establish run-to-run variance is an important practice which JMH supports (and most hand-rolled framework don&#39;t help with). Reasons for run to run variance might include (but I&#39;m sure there&#39;s more):\r\n\r\n * CPU start at a certain C-state and scale up the frequency at the face of load, then overheat and scale it down. You can control this issue on certain OSs.\r\n\r\n * Memory alignment of your process can lead to paging behaviour differences.\r\n * Background application activity.\r\n * CPU allocation by the OS will vary resulting in different sets of CPUs used for each run.\r\n * Page cache contents and swapping\r\n * JIT compilation is triggered concurrently and may lead to different results (this will tend to happen when larger bits of code are under test). Note that small single threaded benchmarks will typically not have this issue.\r\n * GC behaviour can trigger with slightly different timings from run to run leading to different results.\r\n\r\nRunning your benchmark with at least a few forks will help shake out these differences and give you an idea of the run to run variance you see in your benchmark. I&#39;d recommend you start with the default of 10 and cut it back (or increase it) experimentally depending on your benchmark. ","title":"What is the purpose of JMH @Fork?","body":"<p>JMH offers the fork functionality for a few reasons. One is compilation profile separation as discussed by Rafael above. But this behaviour is not controlled by the @Forks annotation (unless you choose 0 forks, which means no subprocesses are forked to run benchmarks at all). You can choose to run all the benchmarks as part of your benchmark warmup (thus creating a mixed profile for the JIT to work with) by using the warmup mode control(-wm).</p>\n\n<p>The reality is that many things can conspire to tilt your results one way or another and running any benchmark multiple times to establish run-to-run variance is an important practice which JMH supports (and most hand-rolled framework don't help with). Reasons for run to run variance might include (but I'm sure there's more):</p>\n\n<ul>\n<li><p>CPU start at a certain C-state and scale up the frequency at the face of load, then overheat and scale it down. You can control this issue on certain OSs.</p></li>\n<li><p>Memory alignment of your process can lead to paging behaviour differences.</p></li>\n<li>Background application activity.</li>\n<li>CPU allocation by the OS will vary resulting in different sets of CPUs used for each run.</li>\n<li>Page cache contents and swapping</li>\n<li>JIT compilation is triggered concurrently and may lead to different results (this will tend to happen when larger bits of code are under test). Note that small single threaded benchmarks will typically not have this issue.</li>\n<li>GC behaviour can trigger with slightly different timings from run to run leading to different results.</li>\n</ul>\n\n<p>Running your benchmark with at least a few forks will help shake out these differences and give you an idea of the run to run variance you see in your benchmark. I'd recommend you start with the default of 10 and cut it back (or increase it) experimentally depending on your benchmark. </p>\n"},{"tags":[],"owner":{"account_id":6401714,"reputation":5744,"user_id":4964136,"accept_rate":100,"display_name":"Vishwa Ratna"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1579072156,"creation_date":1579072156,"answer_id":59746560,"question_id":35046745,"body_markdown":"**Update:**\r\n\r\n&gt; JMH (the Java Microbenchmark Harness),has been added to the JDK\r\n&gt; starting with JDK 12.\r\n\r\n`@Fork` annotation, instructs how benchmark execution will happen the `value` parameter controls how many times the benchmark will be executed, and the `warmup` parameter controls how many times a benchmark will dry run before results are collected.\r\n\r\n**Example:**\r\n\r\n    @Benchmark\r\n    @Fork(value = 1, warmups = 3)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    public void myMethod() {\r\n        // Do nothing\r\n    }\r\n\r\nThis instructs **JMH** to run three warm-up forks and **discard results** before moving onto **real timed benchmarking**.","title":"What is the purpose of JMH @Fork?","body":"<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>JMH (the Java Microbenchmark Harness),has been added to the JDK\n  starting with JDK 12.</p>\n</blockquote>\n\n<p><code>@Fork</code> annotation, instructs how benchmark execution will happen the <code>value</code> parameter controls how many times the benchmark will be executed, and the <code>warmup</code> parameter controls how many times a benchmark will dry run before results are collected.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>@Benchmark\n@Fork(value = 1, warmups = 3)\n@BenchmarkMode(Mode.AverageTime)\npublic void myMethod() {\n    // Do nothing\n}\n</code></pre>\n\n<p>This instructs <strong>JMH</strong> to run three warm-up forks and <strong>discard results</strong> before moving onto <strong>real timed benchmarking</strong>.</p>\n"}],"owner":{"account_id":1859358,"reputation":42899,"user_id":1684269,"accept_rate":91,"display_name":"Ole"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12537,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":3,"score":34,"last_activity_date":1682311155,"creation_date":1453924232,"question_id":35046745,"body_markdown":"If IIUC each fork creates a separate virtual machine for the reason that each virtual machine instance might run with slight differences in JIT instructions?\r\n\r\nI&#39;m also curious about what the time attribute does in the below annotations:\r\n\r\n    @Warmup(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\r\n    @Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\r\n\r\nTIA,\r\nOle","title":"What is the purpose of JMH @Fork?","body":"<p>If IIUC each fork creates a separate virtual machine for the reason that each virtual machine instance might run with slight differences in JIT instructions?</p>\n\n<p>I'm also curious about what the time attribute does in the below annotations:</p>\n\n<pre><code>@Warmup(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\n@Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\n</code></pre>\n\n<p>TIA,\nOle</p>\n"},{"tags":["java","spring","spring-boot","generics"],"answers":[{"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682310140,"creation_date":1682310140,"answer_id":76088570,"question_id":76057420,"body_markdown":"You might be running into issues because &#39;ListMapper&#39; defined as Component and component by default is created with Singleton scope. \r\n\r\nYou might have to define &#39;ListMapper&#39; beans as outlined in the article https://www.baeldung.com/spring-qualifier-annotation with Qualifier for getting the desired result.\r\n\r\nIn your case, you might have to remove Component annotation from &#39;ListMapper&#39; and Assuming your mapper implementation looks like below:\r\n\r\n```\r\n@Component\r\n@Qualifier(&quot;foobar&quot;)\r\npublic class FooBarMapper implements Mapper&lt;Foo, Bar&gt;{\r\n\r\n  @Override\r\n  public Bar map(final Foo foo) {\r\n    return new Bar();\r\n  }\r\n}\r\n```\r\nYour bean definition can something like :\r\n\r\n```\r\n@Configuration\r\npublic class Config {\r\n\r\n\t@Bean\r\n\tpublic ListMapper&lt;Foo, Bar&gt; createFooBarListMapper(@Qualifier(&quot;foobar&quot;) FooBarMapper mapper) {\r\n\t\treturn new ListMapper&lt;Foo, Bar&gt;(mapper);\r\n\t}\r\n}\r\n```","title":"Spring Boot and Generic component injection","body":"<p>You might be running into issues because 'ListMapper' defined as Component and component by default is created with Singleton scope.</p>\n<p>You might have to define 'ListMapper' beans as outlined in the article <a href=\"https://www.baeldung.com/spring-qualifier-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-qualifier-annotation</a> with Qualifier for getting the desired result.</p>\n<p>In your case, you might have to remove Component annotation from 'ListMapper' and Assuming your mapper implementation looks like below:</p>\n<pre><code>@Component\n@Qualifier(&quot;foobar&quot;)\npublic class FooBarMapper implements Mapper&lt;Foo, Bar&gt;{\n\n  @Override\n  public Bar map(final Foo foo) {\n    return new Bar();\n  }\n}\n</code></pre>\n<p>Your bean definition can something like :</p>\n<pre><code>@Configuration\npublic class Config {\n\n    @Bean\n    public ListMapper&lt;Foo, Bar&gt; createFooBarListMapper(@Qualifier(&quot;foobar&quot;) FooBarMapper mapper) {\n        return new ListMapper&lt;Foo, Bar&gt;(mapper);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17981414,"reputation":73,"user_id":13067646,"display_name":"JerryThePineapple"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682310140,"creation_date":1681926160,"question_id":76057420,"body_markdown":"Given the following functional interface:\r\n\r\n```\r\n@FunctionalInterface\r\npublic interface Mapper&lt;FROM, TO&gt; {\r\n    TO map(FROM from);\r\n}\r\n```\r\n\r\nand the concrete classes that implement the functional interface (which are left out for brevity). Idea is to inject the generic class Mapper into another generic component called the ListMapper given below:\r\n\r\n```\r\n@Component\r\npublic final class ListMapper&lt;FROM, TO&gt; {\r\n    private final Mapper&lt;FROM, TO&gt; mapper;\r\n\r\n    public Mapper(Mapper&lt;FROM, TO&gt; mapper) {\r\n        this.mapper = mapper;\r\n    }\r\n\r\n    public List&lt;TO&gt; mapList(final List&lt;FROM&gt; data) {\r\n        if (data == null) return null;\r\n\r\n        return data.stream()\r\n                .map(mapper::map)\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\n\r\nListMapper is injected into other components like so:\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\nclass MyClass1 {\r\n    private final ListMapper&lt;Foo1, Bar1&gt; mapper;\r\n\r\n    // ... rest is omitted for brevity\r\n}\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\nclass MyClass2 {\r\n    private final ListMapper&lt;Foo2, Bar2&gt; mapper;\r\n \r\n    // ...rest is omitted for brevity\r\n}\r\n```\r\n\r\nHowever, doing so results in an error stating that the parameter mapper required a single bean, but three were found (as three different implementations of the Mapper interface are defined).\r\n\r\nIs it possible to resolve this dependency injection?\r\n\r\n\r\n\r\n","title":"Spring Boot and Generic component injection","body":"<p>Given the following functional interface:</p>\n<pre><code>@FunctionalInterface\npublic interface Mapper&lt;FROM, TO&gt; {\n    TO map(FROM from);\n}\n</code></pre>\n<p>and the concrete classes that implement the functional interface (which are left out for brevity). Idea is to inject the generic class Mapper into another generic component called the ListMapper given below:</p>\n<pre><code>@Component\npublic final class ListMapper&lt;FROM, TO&gt; {\n    private final Mapper&lt;FROM, TO&gt; mapper;\n\n    public Mapper(Mapper&lt;FROM, TO&gt; mapper) {\n        this.mapper = mapper;\n    }\n\n    public List&lt;TO&gt; mapList(final List&lt;FROM&gt; data) {\n        if (data == null) return null;\n\n        return data.stream()\n                .map(mapper::map)\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>ListMapper is injected into other components like so:</p>\n<pre><code>@Component\n@RequiredArgsConstructor\nclass MyClass1 {\n    private final ListMapper&lt;Foo1, Bar1&gt; mapper;\n\n    // ... rest is omitted for brevity\n}\n\n@Component\n@RequiredArgsConstructor\nclass MyClass2 {\n    private final ListMapper&lt;Foo2, Bar2&gt; mapper;\n \n    // ...rest is omitted for brevity\n}\n</code></pre>\n<p>However, doing so results in an error stating that the parameter mapper required a single bean, but three were found (as three different implementations of the Mapper interface are defined).</p>\n<p>Is it possible to resolve this dependency injection?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","netflix-zuul"],"answers":[{"tags":[],"owner":{"account_id":20887033,"reputation":109,"user_id":15343391,"display_name":"AdvMaple"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682310140,"creation_date":1682310140,"answer_id":76088571,"question_id":76004120,"body_markdown":"After some trying out, I was able to get response and request json string using `ContentCachingRequestWrapper` and `ContentCachingResponseWrapper`. The controller now become like this:\r\n```java\r\n@RequestMapping(value = &quot;/getUserByPhone&quot;, method = {RequestMethod.GET}, produces = &quot;application/json;charset=utf-8&quot;)\r\n    public void getUserbyIsdn(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {\r\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\r\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\r\n        requestWrapper.getRequestDispatcher(configAPI.getApi_getUserbyIsdn_user()).forward(requestWrapper, responseWrapper);\r\n        // do what ever you want here with response and request\r\n        apiLogService.addApiLog(requestWrapper, responseWrapper, &quot;getUserByIsdn&quot;, timer);\r\n\r\n        // have to has this to return original response of other service\r\n        responseWrapper.copyBodyToResponse();\r\n    }\r\n```\r\n\r\nFunction `addApiLog`:\r\n```java\r\npublic void addApiLog(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response) {\r\n    String requestJson = IOUtils.toString(request.getContentAsByteArray());\r\n    String responseJson = IOUtils.toString(response.getContentAsByteArray());\r\n    // handle json String using JSONObject or GSON as needed\r\n}\r\n```","title":"How to get request and response as string after RequestDispatcher forward","body":"<p>After some trying out, I was able to get response and request json string using <code>ContentCachingRequestWrapper</code> and <code>ContentCachingResponseWrapper</code>. The controller now become like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/getUserByPhone&quot;, method = {RequestMethod.GET}, produces = &quot;application/json;charset=utf-8&quot;)\n    public void getUserbyIsdn(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\n        requestWrapper.getRequestDispatcher(configAPI.getApi_getUserbyIsdn_user()).forward(requestWrapper, responseWrapper);\n        // do what ever you want here with response and request\n        apiLogService.addApiLog(requestWrapper, responseWrapper, &quot;getUserByIsdn&quot;, timer);\n\n        // have to has this to return original response of other service\n        responseWrapper.copyBodyToResponse();\n    }\n</code></pre>\n<p>Function <code>addApiLog</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void addApiLog(ContentCachingRequestWrapper request, ContentCachingResponseWrapper response) {\n    String requestJson = IOUtils.toString(request.getContentAsByteArray());\n    String responseJson = IOUtils.toString(response.getContentAsByteArray());\n    // handle json String using JSONObject or GSON as needed\n}\n</code></pre>\n"}],"owner":{"account_id":20887033,"reputation":109,"user_id":15343391,"display_name":"AdvMaple"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76088571,"answer_count":1,"score":0,"last_activity_date":1682310140,"creation_date":1681380003,"question_id":76004120,"body_markdown":"In my Springboot application, I use `RequestDispatcher` forward to send the request and response to a remote service. Now I need to get that `response` and `request` as string to log it into database.\r\nThe `request` and `response` both contain JSON data.  \r\n```\r\nRequestDispatcher requestDispatcher = request.getRequestDispatcher(configAPI.getUserByPhoneUrl());\r\nrequestDispatcher.forward(request, response);\r\n```\r\nThe `RequestDispatcher` will modify the response in-place. So after the `forward()` function, I&#39;m unable to get the json from the response created by `requestDispatcher.forward(request, response)`.\r\n\r\n```java\r\n@RequestMapping(value = &quot;/getUserByPhone&quot;, method = {RequestMethod.GET}, produces = &quot;application/json;charset=utf-8&quot;)\r\n    public void getUserbyIsdn(HttpServletRequest request, HttpServletResponse response) {\r\n            // Forward the request to the remote service\r\n            RequestDispatcher requestDispatcher = request.getRequestDispatcher(configAPI.getUserByPhoneUrl());\r\n            requestDispatcher.forward(request, response);\r\n            // response now has result from remote service\r\n            // TODO: print out json in response here\r\n    }\r\n```\r\n\r\nAny idea on how to get response as json?\r\n\r\nI&#39;ve try using `HttpServletResponseWrapper` to access the response but unable to. \r\nExample code using `HttpServletResponseWrapper`:\r\n```java\r\nHttpServletRequestWrapper requestWrapper = new HttpServletRequestWrapper(request);\r\n            HttpServletResponseWrapper responseWrapper = new HttpServletResponseWrapper(response);\r\n\r\n            // Forward the request to the remote service\r\n            request.getRequestDispatcher(configAPI.getUserByPhoneUrl()).forward(requestWrapper, responseWrapper);\r\n```\r\nbut is result in NullPointerException because `ApplicationContext` request is not set.  ","title":"How to get request and response as string after RequestDispatcher forward","body":"<p>In my Springboot application, I use <code>RequestDispatcher</code> forward to send the request and response to a remote service. Now I need to get that <code>response</code> and <code>request</code> as string to log it into database.\nThe <code>request</code> and <code>response</code> both contain JSON data.</p>\n<pre><code>RequestDispatcher requestDispatcher = request.getRequestDispatcher(configAPI.getUserByPhoneUrl());\nrequestDispatcher.forward(request, response);\n</code></pre>\n<p>The <code>RequestDispatcher</code> will modify the response in-place. So after the <code>forward()</code> function, I'm unable to get the json from the response created by <code>requestDispatcher.forward(request, response)</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/getUserByPhone&quot;, method = {RequestMethod.GET}, produces = &quot;application/json;charset=utf-8&quot;)\n    public void getUserbyIsdn(HttpServletRequest request, HttpServletResponse response) {\n            // Forward the request to the remote service\n            RequestDispatcher requestDispatcher = request.getRequestDispatcher(configAPI.getUserByPhoneUrl());\n            requestDispatcher.forward(request, response);\n            // response now has result from remote service\n            // TODO: print out json in response here\n    }\n</code></pre>\n<p>Any idea on how to get response as json?</p>\n<p>I've try using <code>HttpServletResponseWrapper</code> to access the response but unable to.\nExample code using <code>HttpServletResponseWrapper</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpServletRequestWrapper requestWrapper = new HttpServletRequestWrapper(request);\n            HttpServletResponseWrapper responseWrapper = new HttpServletResponseWrapper(response);\n\n            // Forward the request to the remote service\n            request.getRequestDispatcher(configAPI.getUserByPhoneUrl()).forward(requestWrapper, responseWrapper);\n</code></pre>\n<p>but is result in NullPointerException because <code>ApplicationContext</code> request is not set.</p>\n"},{"tags":["java","multithreading","performance","concurrency","virtual-threads"],"comments":[{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":4,"creation_date":1682275369,"post_id":76086334,"comment_id":134185871,"body_markdown":"Add size of threads array to the system out at the end to have an idea what is wrong. To make these two examples equivalent, change `IntStream.of()` to `IntStream.range()`.","body":"Add size of threads array to the system out at the end to have an idea what is wrong. To make these two examples equivalent, change <code>IntStream.of()</code> to <code>IntStream.range()</code>."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1682277026,"post_id":76086334,"comment_id":134186102,"body_markdown":"The way you&#39;re measuring performance will produce outright lies, but Maciej&#39;s point is even more relevant.","body":"The way you&#39;re measuring performance will produce outright lies, but Maciej&#39;s point is even more relevant."},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1682306849,"post_id":76086334,"comment_id":134188998,"body_markdown":"@MaciejWalkowiak\nThanks for point out the mistake there. I was thinking that those are range of numbers!","body":"@MaciejWalkowiak Thanks for point out the mistake there. I was thinking that those are range of numbers!"},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1682308926,"post_id":76086334,"comment_id":134189163,"body_markdown":"@LouisWasserman\nI have corrected the mistake as Maciej pointed out. But, otherwise what do you suggest to measure the execution performance? profiling? I will not draw generic conclusion from my 8-core system. The intent here is to evaluate virtual threads in general.","body":"@LouisWasserman I have corrected the mistake as Maciej pointed out. But, otherwise what do you suggest to measure the execution performance? profiling? I will not draw generic conclusion from my 8-core system. The intent here is to evaluate virtual threads in general."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1682311605,"post_id":76086334,"comment_id":134189392,"body_markdown":"If you want meaningful performance comparisons, you pretty much _must_ use JMH.  Subtracting System.currentTimeMillis can produce results that are outright wrong even for your system.","body":"If you want meaningful performance comparisons, you pretty much <i>must</i> use JMH.  Subtracting System.currentTimeMillis can produce results that are outright wrong even for your system."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1682406687,"post_id":76086334,"comment_id":134205760,"body_markdown":"Donât insert the answer into your question. Post an answer instead.","body":"Donât insert the answer into your question. Post an answer instead."},{"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"score":0,"creation_date":1682578818,"post_id":76086334,"comment_id":134238773,"body_markdown":"@Holger\nstackoverflow doesn&#39;t let you answer your own question for first 24 hours. You must be knowing it already. And later on, I didn&#39;t get time on creating a post here. I will do it.","body":"@Holger stackoverflow doesn&#39;t let you answer your own question for first 24 hours. You must be knowing it already. And later on, I didn&#39;t get time on creating a post here. I will do it."}],"owner":{"account_id":2237989,"reputation":3237,"user_id":1973779,"accept_rate":27,"display_name":"Rahul Raj"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682309779,"creation_date":1682271710,"question_id":76086334,"body_markdown":"I&#39;m trying to create 100k virtual threads with simple print statements. When I use the below code, the estimated execution time is 2 milliseconds:\r\n\r\n```\r\nList &lt; Thread &gt; threads = IntStream.of(0, 100000)\r\n  .mapToObj(it -&gt; Thread.ofVirtual().unstarted(() -&gt; System.out.println(Thread.currentThread())))\r\n  .toList();\r\n\r\nlong begin = System.currentTimeMillis();\r\nthreads.forEach(Thread::start);\r\nfor (Thread thread: threads) {\r\n  thread.join();\r\n}\r\nlong end = System.currentTimeMillis();\r\nSystem.out.println(&quot;time taken: &quot; + (end - begin) + &quot; milliseconds&quot;);\r\n\r\n```\r\n\r\nBut, when I use a `for` loop instead of `IntStream`, the estimated execution time is 6925 milliseconds. \r\n\r\n```\r\nList &lt; Thread &gt; threads = new ArrayList &lt; &gt; ();\r\nfor (int i = 0; i &lt; 100000; i++) {\r\n  threads.add(Thread.ofVirtual().unstarted(() -&gt; System.out.println(Thread.currentThread())));\r\n}\r\n\r\nlong begin = System.currentTimeMillis();\r\nthreads.forEach(Thread::start);\r\nfor (Thread thread: threads) {\r\n  thread.join();\r\n}\r\nlong end = System.currentTimeMillis();\r\nSystem.out.println(&quot;time taken: &quot; + (end - begin) + &quot; milliseconds&quot;);\r\n\r\n```\r\n\r\nI know that `IntStream` is more memory efficient than regular `for` loops. But, as per my understanding, `IntStream` doesn&#39;t do anything magical compared to a `for` loop. \r\nSo, I&#39;m wondering why there&#39;s a big gap in the performance above. I&#39;m running this experiment in an 8 core Mac machine. \r\n\r\n\r\n**Update:**\r\n`IntStream.of()` takes only two numbers above and those are not the range of numbers. So, it is incorrect. \r\n\r\nI removed the print statements and used a `HashSet` to track the number of platform threads used. After making the corrections, the estimated execution time to create 100k virtual threads using both `for` loop and `IntStream.range()` is around 150 milliseconds in my 8 core system.  \r\n\r\nAdding `print` statements added lot of overheads as you can see from previously shared results. \r\n","title":"Virtual thread performance in IntSteram vs regular for loop","body":"<p>I'm trying to create 100k virtual threads with simple print statements. When I use the below code, the estimated execution time is 2 milliseconds:</p>\n<pre><code>List &lt; Thread &gt; threads = IntStream.of(0, 100000)\n  .mapToObj(it -&gt; Thread.ofVirtual().unstarted(() -&gt; System.out.println(Thread.currentThread())))\n  .toList();\n\nlong begin = System.currentTimeMillis();\nthreads.forEach(Thread::start);\nfor (Thread thread: threads) {\n  thread.join();\n}\nlong end = System.currentTimeMillis();\nSystem.out.println(&quot;time taken: &quot; + (end - begin) + &quot; milliseconds&quot;);\n\n</code></pre>\n<p>But, when I use a <code>for</code> loop instead of <code>IntStream</code>, the estimated execution time is 6925 milliseconds.</p>\n<pre><code>List &lt; Thread &gt; threads = new ArrayList &lt; &gt; ();\nfor (int i = 0; i &lt; 100000; i++) {\n  threads.add(Thread.ofVirtual().unstarted(() -&gt; System.out.println(Thread.currentThread())));\n}\n\nlong begin = System.currentTimeMillis();\nthreads.forEach(Thread::start);\nfor (Thread thread: threads) {\n  thread.join();\n}\nlong end = System.currentTimeMillis();\nSystem.out.println(&quot;time taken: &quot; + (end - begin) + &quot; milliseconds&quot;);\n\n</code></pre>\n<p>I know that <code>IntStream</code> is more memory efficient than regular <code>for</code> loops. But, as per my understanding, <code>IntStream</code> doesn't do anything magical compared to a <code>for</code> loop.\nSo, I'm wondering why there's a big gap in the performance above. I'm running this experiment in an 8 core Mac machine.</p>\n<p><strong>Update:</strong>\n<code>IntStream.of()</code> takes only two numbers above and those are not the range of numbers. So, it is incorrect.</p>\n<p>I removed the print statements and used a <code>HashSet</code> to track the number of platform threads used. After making the corrections, the estimated execution time to create 100k virtual threads using both <code>for</code> loop and <code>IntStream.range()</code> is around 150 milliseconds in my 8 core system.</p>\n<p>Adding <code>print</code> statements added lot of overheads as you can see from previously shared results.</p>\n"},{"tags":["java","spring","resttemplate","messageformat"],"comments":[{"owner":{"account_id":6960255,"reputation":1625,"user_id":5339966,"display_name":"mszymborski"},"score":0,"creation_date":1523112965,"post_id":49708603,"comment_id":86430711,"body_markdown":"You could try using wireshark to see what actually gets sent.","body":"You could try using wireshark to see what actually gets sent."}],"answers":[{"comments":[{"owner":{"account_id":3153321,"reputation":854,"user_id":2666277,"accept_rate":100,"display_name":"I Stevenson"},"score":0,"creation_date":1589852577,"post_id":61873111,"comment_id":109451618,"body_markdown":"Great to see you coming back and answering your own question with the solution you found, but... It&#39;s not entirely clear what you&#39;re saying - especially for your second point.","body":"Great to see you coming back and answering your own question with the solution you found, but... It&#39;s not entirely clear what you&#39;re saying - especially for your second point."}],"tags":[],"owner":{"account_id":4290411,"reputation":11,"user_id":3506950,"display_name":"dejantm"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589870918,"creation_date":1589815563,"answer_id":61873111,"question_id":49708603,"body_markdown":"* The JWT had way to many scopes, the server API decided to throw a 400 without any message and the server logs were not available.. \r\n* A flag in `application.properties` that sets the maximum header size. ","title":"Spring restTemplate not working for single quotes in URL. Works with postman","body":"<ul>\n<li>The JWT had way to many scopes, the server API decided to throw a 400 without any message and the server logs were not available.. </li>\n<li>A flag in <code>application.properties</code> that sets the maximum header size. </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4606083,"reputation":304,"user_id":3735541,"display_name":"Juan Pablo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682309343,"creation_date":1682309343,"answer_id":76088520,"question_id":49708603,"body_markdown":"    URI uri = UriComponentsBuilder.fromUriString(&quot;.../api/odata/GetAvailableObjects?fromTime=datetime&#39;2018-02-02T12:00:00&#39;&amp;$format=json&amp;toTime=datetime&#39;2018-02-10T12:00:00&#39;\r\n    &quot;).build().encode().toUri();\r\n\r\nand send the uri in rest template\r\nthis works for me\r\n","title":"Spring restTemplate not working for single quotes in URL. Works with postman","body":"<pre><code>URI uri = UriComponentsBuilder.fromUriString(&quot;.../api/odata/GetAvailableObjects?fromTime=datetime'2018-02-02T12:00:00'&amp;$format=json&amp;toTime=datetime'2018-02-10T12:00:00'\n&quot;).build().encode().toUri();\n</code></pre>\n<p>and send the uri in rest template\nthis works for me</p>\n"}],"owner":{"account_id":4290411,"reputation":11,"user_id":3506950,"display_name":"dejantm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":616,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682309343,"creation_date":1523112770,"question_id":49708603,"body_markdown":"Simple restTemplate exchange used for a GET request. \r\n\r\nHeader information\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setAccept(Arrays.asList(MediaType.ALL));\r\n    headers.setContentType(MediaType.APPLICATION_JSON_UTF8);\r\n    headers.add(&quot;Authorization&quot;,  ************);\r\n     \r\n\r\nURL:\r\n\r\n    /api/odata/GetAvailableObjects?fromTime=datetime&#39;2018-02-02T12:00:00&#39;&amp;$format=json&amp;toTime=datetime&#39;2018-02-10T12:00:00&#39;\r\n\r\nI tried building this URL with either `MessageFormat.format` or `URIBuilder`. \r\nThe single quotes are the problem. So far I tried double-ing them, escaping them\r\nor leaving them as they are. \r\n\r\nI enabled some extra logging with : \r\nlogging.level.org.springframework.web.client.RestTemplate=DEBUG\r\nThis displays the URL.. if I copy that URL and paste it in POSTMAN, I receive results, from spring I receive 400 Bad request. \r\n\r\nI suppose it might be some additional encoding to blame.\r\nAny ideas? \r\n\r\n\r\n","title":"Spring restTemplate not working for single quotes in URL. Works with postman","body":"<p>Simple restTemplate exchange used for a GET request. </p>\n\n<p>Header information</p>\n\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.setAccept(Arrays.asList(MediaType.ALL));\nheaders.setContentType(MediaType.APPLICATION_JSON_UTF8);\nheaders.add(\"Authorization\",  ************);\n</code></pre>\n\n<p>URL:</p>\n\n<pre><code>/api/odata/GetAvailableObjects?fromTime=datetime'2018-02-02T12:00:00'&amp;$format=json&amp;toTime=datetime'2018-02-10T12:00:00'\n</code></pre>\n\n<p>I tried building this URL with either <code>MessageFormat.format</code> or <code>URIBuilder</code>. \nThe single quotes are the problem. So far I tried double-ing them, escaping them\nor leaving them as they are. </p>\n\n<p>I enabled some extra logging with : \nlogging.level.org.springframework.web.client.RestTemplate=DEBUG\nThis displays the URL.. if I copy that URL and paste it in POSTMAN, I receive results, from spring I receive 400 Bad request. </p>\n\n<p>I suppose it might be some additional encoding to blame.\nAny ideas? </p>\n"},{"tags":["java","yaml","snakeyaml"],"answers":[{"tags":[],"owner":{"account_id":1098604,"reputation":443,"user_id":1091628,"display_name":"Laa"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1614359641,"creation_date":1381289786,"answer_id":19262642,"question_id":19246027,"body_markdown":"Use `org.yaml.snakeyaml.representer.Representer`, set `Tag.MAP` to hide the root tag.\r\n\r\n    Representer representer = new Representer();\r\n    representer.addClassTag(Person.class, Tag.MAP);","title":"How to hide bean type in snakeyaml","body":"<p>Use <code>org.yaml.snakeyaml.representer.Representer</code>, set <code>Tag.MAP</code> to hide the root tag.</p>\n<pre><code>Representer representer = new Representer();\nrepresenter.addClassTag(Person.class, Tag.MAP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3883934,"reputation":491,"user_id":3215802,"display_name":"edgraaff"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1459111096,"creation_date":1459111096,"answer_id":36252372,"question_id":19246027,"body_markdown":"You can extend Representer to &#39;sneakily&#39; inject any non-registered bean class as Map.\r\n\r\n    public class MapRepresenter extends Representer {\r\n    \r\n        @Override\r\n        protected MappingNode representJavaBean(Set&lt;Property&gt; properties, Object javaBean) {\r\n            if (!classTags.containsKey(javaBean.getClass()))\r\n                addClassTag(javaBean.getClass(), Tag.MAP);\r\n    \r\n            return super.representJavaBean(properties, javaBean);\r\n        }\r\n    \r\n    }\r\n","title":"How to hide bean type in snakeyaml","body":"<p>You can extend Representer to 'sneakily' inject any non-registered bean class as Map.</p>\n\n<pre><code>public class MapRepresenter extends Representer {\n\n    @Override\n    protected MappingNode representJavaBean(Set&lt;Property&gt; properties, Object javaBean) {\n        if (!classTags.containsKey(javaBean.getClass()))\n            addClassTag(javaBean.getClass(), Tag.MAP);\n\n        return super.representJavaBean(properties, javaBean);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":182970,"reputation":3454,"user_id":418057,"display_name":"Craigo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682308172,"creation_date":1682308172,"answer_id":76088454,"question_id":19246027,"body_markdown":"Some more clarity on using `org.yaml.snakeyaml.representer.Representer`, it needs to be passed to YAML:\r\n\r\n```java\r\nDumperOptions options = new DumperOptions();\r\noptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\r\noptions.setPrettyFlow(true);\r\n\r\nRepresenter representer = new Representer(options);\r\nrepresenter.addClassTag(Person.class, Tag.MAP); // Put your class here\r\n\r\nYaml yaml = new Yaml(representer, options);\r\nString output = yaml.dump(person); // Put your object here\r\nSystem.out.println(output);\r\n```","title":"How to hide bean type in snakeyaml","body":"<p>Some more clarity on using <code>org.yaml.snakeyaml.representer.Representer</code>, it needs to be passed to YAML:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DumperOptions options = new DumperOptions();\noptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\noptions.setPrettyFlow(true);\n\nRepresenter representer = new Representer(options);\nrepresenter.addClassTag(Person.class, Tag.MAP); // Put your class here\n\nYaml yaml = new Yaml(representer, options);\nString output = yaml.dump(person); // Put your object here\nSystem.out.println(output);\n</code></pre>\n"}],"owner":{"account_id":1098604,"reputation":443,"user_id":1091628,"display_name":"Laa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5607,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":19262642,"answer_count":3,"score":11,"last_activity_date":1682308172,"creation_date":1381230222,"question_id":19246027,"body_markdown":"This code will output:(YAML)\r\n\r\n--- !!org.test.bean.Person\r\n\r\naddress: 4011 16th Ave S\r\n\r\n.....\r\n\r\nCan hide my bean type(org.test.bean.Person) anyway !?\r\n(prefer to use snakeyaml config...i can&#39;t find it..)\r\n\r\nthanks!!\r\n\r\n\r\n    public static void dumpYAML(){\r\n        Constructor constructor = new Constructor(Person.class);\r\n\t    TypeDescription personDescription = new TypeDescription(Person.class);\r\n\t    personDescription.putListPropertyType(&quot;phone&quot;, Tel.class);\r\n\t    constructor.addTypeDescription(personDescription);\r\n\r\n\t    Yaml yaml = new Yaml(constructor);\r\n\t    Person person = (Person) yaml.load(makeYAML());\r\n\t    \r\n\t    DumperOptions options = new DumperOptions();\r\n\t    options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\r\n\t    options.setCanonical(false); // display bean member attribute\r\n\t    options.setExplicitStart(true); // display --- start\r\n\r\n\t    yaml = new Yaml(options);\r\n\t    String output = yaml.dump(person);\r\n\t    System.out.println(output);\r\n\t}","title":"How to hide bean type in snakeyaml","body":"<p>This code will output:(YAML)</p>\n\n<p>--- !!org.test.bean.Person</p>\n\n<p>address: 4011 16th Ave S</p>\n\n<p>.....</p>\n\n<p>Can hide my bean type(org.test.bean.Person) anyway !?\n(prefer to use snakeyaml config...i can't find it..)</p>\n\n<p>thanks!!</p>\n\n<pre><code>public static void dumpYAML(){\n    Constructor constructor = new Constructor(Person.class);\n    TypeDescription personDescription = new TypeDescription(Person.class);\n    personDescription.putListPropertyType(\"phone\", Tel.class);\n    constructor.addTypeDescription(personDescription);\n\n    Yaml yaml = new Yaml(constructor);\n    Person person = (Person) yaml.load(makeYAML());\n\n    DumperOptions options = new DumperOptions();\n    options.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\n    options.setCanonical(false); // display bean member attribute\n    options.setExplicitStart(true); // display --- start\n\n    yaml = new Yaml(options);\n    String output = yaml.dump(person);\n    System.out.println(output);\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":7712408,"reputation":2531,"user_id":5841297,"accept_rate":50,"display_name":"Phenomenal One"},"score":3,"creation_date":1537270426,"post_id":52385610,"comment_id":91715377,"body_markdown":"Can you be more specific with your question?","body":"Can you be more specific with your question?"},{"owner":{"account_id":5674322,"reputation":4295,"user_id":4488077,"display_name":"f-CJ"},"score":3,"creation_date":1537271550,"post_id":52385610,"comment_id":91716121,"body_markdown":"With just the stack trace is impossible to answer. Sharing your code would make it easier","body":"With just the stack trace is impossible to answer. Sharing your code would make it easier"},{"owner":{"account_id":13265395,"reputation":1820,"user_id":9578419,"display_name":"S.Daineko"},"score":0,"creation_date":1590511965,"post_id":52385610,"comment_id":109704957,"body_markdown":"Despite the departure from the rules, comments and the closure of the question, the question for those who are in the same situation is clear. Thank you author!","body":"Despite the departure from the rules, comments and the closure of the question, the question for those who are in the same situation is clear. Thank you author!"}],"answers":[{"comments":[{"owner":{"account_id":9023811,"reputation":203,"user_id":8179865,"display_name":"shaan bhattacharya"},"score":0,"creation_date":1537272737,"post_id":52385887,"comment_id":91716896,"body_markdown":"Description:\n\nField userRepo in com.rme.hub.service.UserService required a bean named &#39;entityManagerFactory&#39; that could not be found.\n\n\nAction:\n\nConsider defining a bean named &#39;entityManagerFactory&#39; in your configuration.","body":"Description:  Field userRepo in com.rme.hub.service.UserService required a bean named &#39;entityManagerFactory&#39; that could not be found.   Action:  Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration."},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":1,"creation_date":1537278000,"post_id":52385887,"comment_id":91720455,"body_markdown":"That appears to be a completely unrelated error. If this question has allowed you to make some progress then I&#39;d recommend moving on and asking another question. If you do go on to ask another question, I&#39;d also recommend reading and acting upon [this advice](https://stackoverflow.com/help/how-to-ask) first.","body":"That appears to be a completely unrelated error. If this question has allowed you to make some progress then I&#39;d recommend moving on and asking another question. If you do go on to ask another question, I&#39;d also recommend reading and acting upon <a href=\"https://stackoverflow.com/help/how-to-ask\">this advice</a> first."},{"owner":{"account_id":5173763,"reputation":955,"user_id":4141569,"accept_rate":32,"display_name":"Sritam Jagadev"},"score":1,"creation_date":1554981741,"post_id":52385887,"comment_id":97953709,"body_markdown":"I am using SpringBoot4 and jdk11. But still I am getting same error. When I commented out DevTools from pom.xml. Then it&#39;s working. Why can&#39;t i use devtools here ?","body":"I am using SpringBoot4 and jdk11. But still I am getting same error. When I commented out DevTools from pom.xml. Then it&#39;s working. Why can&#39;t i use devtools here ?"},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1555081922,"post_id":52385887,"comment_id":97998097,"body_markdown":"@SritamJagadev I guess SpringBoot4 is a typo? At the time of writing, the latest version is 2.1.3. You need to be using 2.0 or later to use Java 9 or later. Support for JDK 11 was officially added in Spring Boot 2.1.","body":"@SritamJagadev I guess SpringBoot4 is a typo? At the time of writing, the latest version is 2.1.3. You need to be using 2.0 or later to use Java 9 or later. Support for JDK 11 was officially added in Spring Boot 2.1."},{"owner":{"account_id":14858440,"reputation":456,"user_id":10730157,"display_name":"aqteifan"},"score":1,"creation_date":1608229067,"post_id":52385887,"comment_id":115526346,"body_markdown":"That worked for me in Intellij and set edited my build to use an older java version (Java 8) and the build worked fine.","body":"That worked for me in Intellij and set edited my build to use an older java version (Java 8) and the build worked fine."}],"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":5,"down_vote_count":3,"up_vote_count":51,"is_accepted":false,"score":48,"last_activity_date":1537271156,"creation_date":1537271156,"answer_id":52385887,"question_id":52385610,"body_markdown":"Judging by the presence of `java.base/jdk.internal.loader.ClassLoaders` in the stack trace, you are using Java 9 or later. Spring Boot&#39;s `DefaultRestartInitializer` is trying to cast the app class loader to a `URLClassLoader`. This works in Java 8 and earlier but does not work with Java 9 or later. Spring Boot had been [updated](https://github.com/spring-projects/spring-boot/commit/ce77f48c3f9c8acdd12d3a629b9c8a393050c271) in 2.0 to cope with this change in Java 9.\r\n\r\nIf you want to use Spring Boot with Java 9 or later, you should upgrade to Spring Boot 2. At the time of writing, the latest release is 2.0.5 which supports Java 8, 9, and 10. Spring Boot 2.1, which will be released later this year, will add support for Java 11.","title":"Java Class cast Exception - Spring boot","body":"<p>Judging by the presence of <code>java.base/jdk.internal.loader.ClassLoaders</code> in the stack trace, you are using Java 9 or later. Spring Boot's <code>DefaultRestartInitializer</code> is trying to cast the app class loader to a <code>URLClassLoader</code>. This works in Java 8 and earlier but does not work with Java 9 or later. Spring Boot had been <a href=\"https://github.com/spring-projects/spring-boot/commit/ce77f48c3f9c8acdd12d3a629b9c8a393050c271\" rel=\"noreferrer\">updated</a> in 2.0 to cope with this change in Java 9.</p>\n\n<p>If you want to use Spring Boot with Java 9 or later, you should upgrade to Spring Boot 2. At the time of writing, the latest release is 2.0.5 which supports Java 8, 9, and 10. Spring Boot 2.1, which will be released later this year, will add support for Java 11.</p>\n"},{"tags":[],"owner":{"account_id":21635798,"reputation":1,"user_id":15958726,"display_name":"Prasun Patidar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621323821,"creation_date":1621323821,"answer_id":67581945,"question_id":52385610,"body_markdown":"\r\n***\r\n\r\n&gt; solution: change JDK version 8 in your IDE\r\n--------------------------------------------\r\n\r\n***\r\n\r\nI got the same issue in the spring boot application   in IntelliJ idea  and sts but I found one solution in that issue :\r\n\r\nif you are using AD integration in your project with it belongs to Microsoft, then you need to use java 8 version JDK because currently Microsoft AD plugins are not supported to java 9 or higher version it will support only the java 8 or lower version \r\n\r\n\r\n\r\n\r\n\r\n","title":"Java Class cast Exception - Spring boot","body":"<hr />\n<blockquote>\n<p>solution: change JDK version 8 in your IDE</p>\n</blockquote>\n<hr />\n<hr />\n<p>I got the same issue in the spring boot application   in IntelliJ idea  and sts but I found one solution in that issue :</p>\n<p>if you are using AD integration in your project with it belongs to Microsoft, then you need to use java 8 version JDK because currently Microsoft AD plugins are not supported to java 9 or higher version it will support only the java 8 or lower version</p>\n"},{"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1662429242,"post_id":68141865,"comment_id":129997813,"body_markdown":"Downgrading to Java8 is generally not a wise approach.  You should instead consider upgrading your SprintBoot.","body":"Downgrading to Java8 is generally not a wise approach.  You should instead consider upgrading your SprintBoot."}],"tags":[],"owner":{"account_id":7996752,"reputation":61,"user_id":6032797,"display_name":"Hieu Nguyen"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1624706670,"creation_date":1624706670,"answer_id":68141865,"question_id":52385610,"body_markdown":"I had this problema on eclipse and had solved by doing these step:\r\n- First download java 8 (If you don&#39;t have) then install it\r\n- Second, I am not sure if you have to do it or not but just do it. I create JAVA_HOME path by right click to my desktop -&gt; properties -&gt; Advanced System Setting -&gt; Advanced Tab -&gt; Environment Variables -&gt; Add JAVA_HOME in both User Variables and System Variables -&gt; Click new -&gt; Variable Home is &quot;JAVA_HOME&quot;, Variable Value can be left empty -&gt; Browse Directory -&gt; point to your jdk folder (Exmaple: mine is C:\\Program Files\\Java\\jdk1.8.0_291)\r\n- Third, go to eclipse -&gt; go to window tab -&gt; choose java on the menu on the left side -&gt; Installed JREs -&gt; in default eclipse already had jre directory -&gt; click to it and then click duplicate -&gt; change the directory to your own jre directory (example: C:\\Program Files\\Java\\jre1.8.0_291) \r\n- Forth: back to java menu, choose compiler option -&gt; then on the right side -&gt; change compiler compliance level to 1.8.\r\n\r\nThat is all!\r\nHope it will be useful for you.","title":"Java Class cast Exception - Spring boot","body":"<p>I had this problema on eclipse and had solved by doing these step:</p>\n<ul>\n<li>First download java 8 (If you don't have) then install it</li>\n<li>Second, I am not sure if you have to do it or not but just do it. I create JAVA_HOME path by right click to my desktop -&gt; properties -&gt; Advanced System Setting -&gt; Advanced Tab -&gt; Environment Variables -&gt; Add JAVA_HOME in both User Variables and System Variables -&gt; Click new -&gt; Variable Home is &quot;JAVA_HOME&quot;, Variable Value can be left empty -&gt; Browse Directory -&gt; point to your jdk folder (Exmaple: mine is C:\\Program Files\\Java\\jdk1.8.0_291)</li>\n<li>Third, go to eclipse -&gt; go to window tab -&gt; choose java on the menu on the left side -&gt; Installed JREs -&gt; in default eclipse already had jre directory -&gt; click to it and then click duplicate -&gt; change the directory to your own jre directory (example: C:\\Program Files\\Java\\jre1.8.0_291)</li>\n<li>Forth: back to java menu, choose compiler option -&gt; then on the right side -&gt; change compiler compliance level to 1.8.</li>\n</ul>\n<p>That is all!\nHope it will be useful for you.</p>\n"},{"tags":[],"owner":{"account_id":7980045,"reputation":651,"user_id":6021740,"display_name":"Kidus Tekeste"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664045399,"creation_date":1664045399,"answer_id":73839796,"question_id":52385610,"body_markdown":"Check your JAVA_HOME in hadoop-env.sh. Changing my JAVA_HOME value in $HADOOP_HOME/etc/hadoop with java 8 (`export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64`) value in the hadoop-env.sh solved this issue for me.\r\nI had a higher java version defined in my `hadoop-env.sh` value when I had defined java 8 in my .bashrc file. So keeping both the same java 8 version fixed the issue for me.","title":"Java Class cast Exception - Spring boot","body":"<p>Check your JAVA_HOME in hadoop-env.sh. Changing my JAVA_HOME value in $HADOOP_HOME/etc/hadoop with java 8 (<code>export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64</code>) value in the hadoop-env.sh solved this issue for me.\nI had a higher java version defined in my <code>hadoop-env.sh</code> value when I had defined java 8 in my .bashrc file. So keeping both the same java 8 version fixed the issue for me.</p>\n"}],"owner":{"account_id":9023811,"reputation":203,"user_id":8179865,"display_name":"shaan bhattacharya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94392,"favorite_count":0,"down_vote_count":6,"up_vote_count":21,"answer_count":4,"score":15,"last_activity_date":1682307945,"creation_date":1537270197,"question_id":52385610,"body_markdown":"```\r\nException in thread &quot;main&quot; java.lang.ClassCastException: java.base/jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to java.base/java.net.URLClassLoader\r\n\r\n at org.springframework.boot.devtools.restart.DefaultRestartInitializer.getUrls(DefaultRestartInitializer.java:93)\r\n at org.springframework.boot.devtools.restart.DefaultRestartInitializer.getInitialUrls(DefaultRestartInitializer.java:56)\r\n at org.springframework.boot.devtools.restart.Restarter.&lt;init(Restarter.java:138)\r\n at org.springframework.boot.devtools.restart.Restarter.initialize(Restarter.java:537)\r\n at org.springframework.boot.devtools.restart.RestartApplicationListener.onApplicationStartedEvent(RestartApplicationListener.java:68)\r\n at org.springframework.boot.devtools.restart.RestartApplicationListener.onApplicationEvent(RestartApplicationListener.java:45)\r\n at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:166)\r\n at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)\r\n at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:121)\r\n at org.springframework.boot.context.event.EventPublishingRunListener.started(EventPublishingRunListener.java:63)\r\n at org.springframework.boot.SpringApplicationRunListeners.started(SpringApplicationRunListeners.java:48)\r\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:304)\r\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186)\r\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175)\r\n at com.rme.hub.RmeApplication.main(RmeApplication.java:24)\r\n```","title":"Java Class cast Exception - Spring boot","body":"<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: java.base/jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to java.base/java.net.URLClassLoader\n\n at org.springframework.boot.devtools.restart.DefaultRestartInitializer.getUrls(DefaultRestartInitializer.java:93)\n at org.springframework.boot.devtools.restart.DefaultRestartInitializer.getInitialUrls(DefaultRestartInitializer.java:56)\n at org.springframework.boot.devtools.restart.Restarter.&lt;init(Restarter.java:138)\n at org.springframework.boot.devtools.restart.Restarter.initialize(Restarter.java:537)\n at org.springframework.boot.devtools.restart.RestartApplicationListener.onApplicationStartedEvent(RestartApplicationListener.java:68)\n at org.springframework.boot.devtools.restart.RestartApplicationListener.onApplicationEvent(RestartApplicationListener.java:45)\n at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:166)\n at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:138)\n at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:121)\n at org.springframework.boot.context.event.EventPublishingRunListener.started(EventPublishingRunListener.java:63)\n at org.springframework.boot.SpringApplicationRunListeners.started(SpringApplicationRunListeners.java:48)\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:304)\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186)\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175)\n at com.rme.hub.RmeApplication.main(RmeApplication.java:24)\n</code></pre>\n"},{"tags":["java","typescript","visual-studio-code","code-snippets"],"comments":[{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1682186759,"post_id":76080991,"comment_id":134177122,"body_markdown":"look at Hyper Snippets extension, where you can add code to the snippet and capture the variable as part of the snippet prefix","body":"look at Hyper Snippets extension, where you can add code to the snippet and capture the variable as part of the snippet prefix"},{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1682187852,"post_id":76080991,"comment_id":134177252,"body_markdown":"Correction **HyperSnips**","body":"Correction <b>HyperSnips</b>"},{"owner":{"account_id":23832938,"reputation":48,"user_id":17838999,"display_name":"rennsax"},"score":0,"creation_date":1682210703,"post_id":76080991,"comment_id":134179443,"body_markdown":"@rioV8 Yeah I&#39;ve tried this extension. Could you please show some examples? I&#39;m a little confused when using it. Thanks!","body":"@rioV8 Yeah I&#39;ve tried this extension. Could you please show some examples? I&#39;m a little confused when using it. Thanks!"}],"answers":[{"comments":[{"owner":{"account_id":23832938,"reputation":48,"user_id":17838999,"display_name":"rennsax"},"score":0,"creation_date":1682472454,"post_id":76088351,"comment_id":134220251,"body_markdown":"Thanks for your recommendation, this extension is what I need :)","body":"Thanks for your recommendation, this extension is what I need :)"}],"tags":[],"owner":{"account_id":17983057,"reputation":1072,"user_id":13068918,"display_name":"Sheng Chen"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682305924,"creation_date":1682305924,"answer_id":76088351,"question_id":76080991,"body_markdown":"This feature is called post-fix completion: https://code.visualstudio.com/docs/java/java-editing#_postfix-snippet-shortcuts\r\n\r\n\r\nFor TS/JS, there are some extensions support that, for example:\r\n\r\n- https://marketplace.visualstudio.com/items?itemName=ipatalas.vscode-postfix-ts","title":"How can I customize a suffix snippet, replacing the variable in VS Code?","body":"<p>This feature is called post-fix completion: <a href=\"https://code.visualstudio.com/docs/java/java-editing#_postfix-snippet-shortcuts\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/java/java-editing#_postfix-snippet-shortcuts</a></p>\n<p>For TS/JS, there are some extensions support that, for example:</p>\n<ul>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=ipatalas.vscode-postfix-ts\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=ipatalas.vscode-postfix-ts</a></li>\n</ul>\n"}],"owner":{"account_id":23832938,"reputation":48,"user_id":17838999,"display_name":"rennsax"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76088351,"answer_count":1,"score":0,"last_activity_date":1682305924,"creation_date":1682184272,"question_id":76080991,"body_markdown":"I&#39;m developing my Java project with VS Code when I find some powerful snippets:\r\n\r\n[suffix code snippets](https://i.stack.imgur.com/eoq8b.png)\r\n\r\nAfter I type a variable name and type `.sysout`, `.cast` and so on, the snippet suggestion pop out. When inserting, it leads to:\r\n\r\nres.sysout =\\&gt; `System.out.println(res);`\r\n\r\nres.cast =\\&gt; `(()(res))`\r\n\r\n...\r\n\r\nI&#39;m curious about how to realize this feature in my VS Code. By the time, I didn&#39;t find anything useful at [redhat-developer/vscode-java](https://github.com/redhat-developer/vscode-java).\r\n\r\nThen I want to transplant the snippet to support JS/TS, and other languages.\r\n\r\nI detailedly read [VS Code&#39;s doc about snippets](https://code.visualstudio.com/docs/editor/userdefinedsnippets), find something that might be useful:\r\n\r\n&gt; The following variables can be used:\r\n&gt; \r\n&gt; + `TM_SELECTED_TEXT` The currently selected text or the empty string\r\n&gt; + `TM_CURRENT_LINE` The contents of the current line\r\n&gt; + ...\r\n\r\nHowever, when I try to create the snippet, I don&#39;t know how to replace the variable name. In other words, I can get the variable name by `TM_CURRENT_LINE`, insert a snippet, but the previous variable name remains. For instance,\r\n\r\nres.log =&gt; `resconsole.log(res);`","title":"How can I customize a suffix snippet, replacing the variable in VS Code?","body":"<p>I'm developing my Java project with VS Code when I find some powerful snippets:</p>\n<p><a href=\"https://i.stack.imgur.com/eoq8b.png\" rel=\"nofollow noreferrer\">suffix code snippets</a></p>\n<p>After I type a variable name and type <code>.sysout</code>, <code>.cast</code> and so on, the snippet suggestion pop out. When inserting, it leads to:</p>\n<p>res.sysout =&gt; <code>System.out.println(res);</code></p>\n<p>res.cast =&gt; <code>(()(res))</code></p>\n<p>...</p>\n<p>I'm curious about how to realize this feature in my VS Code. By the time, I didn't find anything useful at <a href=\"https://github.com/redhat-developer/vscode-java\" rel=\"nofollow noreferrer\">redhat-developer/vscode-java</a>.</p>\n<p>Then I want to transplant the snippet to support JS/TS, and other languages.</p>\n<p>I detailedly read <a href=\"https://code.visualstudio.com/docs/editor/userdefinedsnippets\" rel=\"nofollow noreferrer\">VS Code's doc about snippets</a>, find something that might be useful:</p>\n<blockquote>\n<p>The following variables can be used:</p>\n<ul>\n<li><code>TM_SELECTED_TEXT</code> The currently selected text or the empty string</li>\n<li><code>TM_CURRENT_LINE</code> The contents of the current line</li>\n<li>...</li>\n</ul>\n</blockquote>\n<p>However, when I try to create the snippet, I don't know how to replace the variable name. In other words, I can get the variable name by <code>TM_CURRENT_LINE</code>, insert a snippet, but the previous variable name remains. For instance,</p>\n<p>res.log =&gt; <code>resconsole.log(res);</code></p>\n"},{"tags":["java","postgresql","spring-data"],"comments":[{"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"score":0,"creation_date":1682307929,"post_id":76088318,"comment_id":134189091,"body_markdown":"i think you should get String parameter instead of int","body":"i think you should get String parameter instead of int"},{"owner":{"account_id":2407473,"reputation":1449,"user_id":2103515,"accept_rate":0,"display_name":"Thang Le"},"score":0,"creation_date":1682476042,"post_id":76088318,"comment_id":134220647,"body_markdown":"using String like: @Param(&quot;timeZoneOffset&quot;) String  timeZoneOffset also not working.","body":"using String like: @Param(&quot;timeZoneOffset&quot;) String  timeZoneOffset also not working."}],"owner":{"account_id":2407473,"reputation":1449,"user_id":2103515,"accept_rate":0,"display_name":"Thang Le"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682305307,"creation_date":1682304949,"question_id":76088318,"body_markdown":"I am using Spring data to query the PostgreSQL DB using @Query and enable nativeQuery = true.\r\n\r\nBelow is full code:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @Query(value = &quot;&quot;&quot; SELECT utb.user_id, (MIN(utb.submitted_date) AT TIME ZONE INTERVAL :timeZoneOffset) AS dateCheck\r\n                                   FROM user_table utb WHERE utb.user_id = :userId &quot;&quot;&quot;, nativeQuery = true)\r\n    public List&lt;TimeLog&gt; findAllByUserWithTimezone(\r\n                @Param(&quot;timeZoneOffset&quot;) int timeZoneOffset,\r\n                @Param(&quot;userId&quot;) String userId)\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHowever i cannot get expected result when try to assign input param timeZoneOffset to :timeZoneOffset on the @Query. Let say if input param timeZoneOffset = 100, then **what i want to get**:\r\n\r\n&gt; MIN(utb.submitted_date) AT TIME ZONE INTERVAL &#39;100&#39; \r\n\r\n\r\nNote on single quotes &#39;100&#39;. However, **what actual value i got** that is:\r\n\r\n&gt; MIN(utb.submitted_date) AT TIME ZONE INTERVAL 100\r\n\r\n\r\nwhich is no single quotes, causing error in PostgreSQL. \r\n\r\nHow can i pass single quotes to the query ?. Using single quotes directly on query will NOT work:\r\n\r\n&gt; AT TIME ZONE INTERVAL &#39;:timeZoneOffset&#39;\r\n\r\n\r\n\r\n","title":"Spring data passing param into @Query with specific token","body":"<p>I am using Spring data to query the PostgreSQL DB using @Query and enable nativeQuery = true.</p>\n<p>Below is full code:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@Query(value = \"\"\" SELECT utb.user_id, (MIN(utb.submitted_date) AT TIME ZONE INTERVAL :timeZoneOffset) AS dateCheck\n                               FROM user_table utb WHERE utb.user_id = :userId \"\"\", nativeQuery = true)\npublic List&lt;TimeLog&gt; findAllByUserWithTimezone(\n            @Param(\"timeZoneOffset\") int timeZoneOffset,\n            @Param(\"userId\") String userId)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>However i cannot get expected result when try to assign input param timeZoneOffset to :timeZoneOffset on the @Query. Let say if input param timeZoneOffset = 100, then <strong>what i want to get</strong>:</p>\n<blockquote>\n<p>MIN(utb.submitted_date) AT TIME ZONE INTERVAL '100'</p>\n</blockquote>\n<p>Note on single quotes '100'. However, <strong>what actual value i got</strong> that is:</p>\n<blockquote>\n<p>MIN(utb.submitted_date) AT TIME ZONE INTERVAL 100</p>\n</blockquote>\n<p>which is no single quotes, causing error in PostgreSQL.</p>\n<p>How can i pass single quotes to the query ?. Using single quotes directly on query will NOT work:</p>\n<blockquote>\n<p>AT TIME ZONE INTERVAL ':timeZoneOffset'</p>\n</blockquote>\n"},{"tags":["java","algorithm","testng"],"comments":[{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1414234379,"post_id":26561511,"comment_id":41743431,"body_markdown":"You&#39;re using one instance of `GameOfStones` for all the tests, therefore you&#39;re reusing the value of `iterations` from the last test for the current one. Either you&#39;re resetting `iterations` in the `count` method, or you do what @BarrySW19 suggests.","body":"You&#39;re using one instance of <code>GameOfStones</code> for all the tests, therefore you&#39;re reusing the value of <code>iterations</code> from the last test for the current one. Either you&#39;re resetting <code>iterations</code> in the <code>count</code> method, or you do what @BarrySW19 suggests."}],"answers":[{"comments":[{"owner":{"account_id":5179087,"reputation":3769,"user_id":4145291,"accept_rate":40,"display_name":"BarrySW19"},"score":0,"creation_date":1414234794,"post_id":26561548,"comment_id":41743529,"body_markdown":"Of course, as @Tom points out you could also ensure &#39;iterations&#39; is a method local variable rather than a class level one which would allow the GameOfThrones object to be shared - but doing proper test set up and tear down is good too :)","body":"Of course, as @Tom points out you could also ensure &#39;iterations&#39; is a method local variable rather than a class level one which would allow the GameOfThrones object to be shared - but doing proper test set up and tear down is good too :)"},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1414235326,"post_id":26561548,"comment_id":41743644,"body_markdown":"You may change your annotations to `@BeforeMethod` and `@AfterMethod`. There are the corresponding `TestNG` annotations. (There are also `@BeforeClass` and `@BeforeTest`, but they act different)","body":"You may change your annotations to <code>@BeforeMethod</code> and <code>@AfterMethod</code>. There are the corresponding <code>TestNG</code> annotations. (There are also <code>@BeforeClass</code> and <code>@BeforeTest</code>, but they act different)"},{"owner":{"account_id":1613382,"reputation":3295,"user_id":1502439,"accept_rate":40,"display_name":"Janac Meena"},"score":0,"creation_date":1617633713,"post_id":26561548,"comment_id":118350834,"body_markdown":"For those of you using JUnit, try `@Before` and `@After`.","body":"For those of you using JUnit, try <code>@Before</code> and <code>@After</code>."},{"owner":{"account_id":4280645,"reputation":236,"user_id":3500130,"accept_rate":36,"display_name":"mitch94"},"score":0,"creation_date":1635269144,"post_id":26561548,"comment_id":123250086,"body_markdown":"this was my answer too though a bit different. I was using ActivityScenarioRule, so now in the @Before method, i assign my acitivityRule","body":"this was my answer too though a bit different. I was using ActivityScenarioRule, so now in the @Before method, i assign my acitivityRule"},{"owner":{"account_id":463980,"reputation":6172,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"score":0,"creation_date":1650521726,"post_id":26561548,"comment_id":127138116,"body_markdown":"It eats me 4 days literally!!!","body":"It eats me 4 days literally!!!"}],"tags":[],"owner":{"account_id":5179087,"reputation":3769,"user_id":4145291,"accept_rate":40,"display_name":"BarrySW19"},"comment_count":5,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1414235462,"creation_date":1414234038,"answer_id":26561548,"question_id":26561511,"body_markdown":"You are sharing a single instance of the class under test across all tests. I&#39;d remove the initial assignment and add this:\r\n\r\n    private GameOfStones gameOfStones; // Don&#39;t create an instance here\r\n\r\n    @BeforeMethod\r\n    public void setUp() {\r\n        gameOfStones = new GameOfStones();\r\n    }\r\n\r\n... which will use a new instance for each test. Good practice would also be to clean up after each test:\r\n\r\n    @AfterMethod\r\n    public void tearDown() {\r\n        gameOfStones = null;\r\n    }\r\n\r\nIn the example given here, fixing the class scoped variable causing the problem to be method scoped instead would also fix the issue, but as the software under test gets more complex it&#39;s good to start doing proper test set up and tear down.\r\n","title":"Tests pass when run individually but not when the whole test class run","body":"<p>You are sharing a single instance of the class under test across all tests. I'd remove the initial assignment and add this:</p>\n\n<pre><code>private GameOfStones gameOfStones; // Don't create an instance here\n\n@BeforeMethod\npublic void setUp() {\n    gameOfStones = new GameOfStones();\n}\n</code></pre>\n\n<p>... which will use a new instance for each test. Good practice would also be to clean up after each test:</p>\n\n<pre><code>@AfterMethod\npublic void tearDown() {\n    gameOfStones = null;\n}\n</code></pre>\n\n<p>In the example given here, fixing the class scoped variable causing the problem to be method scoped instead would also fix the issue, but as the software under test gets more complex it's good to start doing proper test set up and tear down.</p>\n"},{"tags":[],"owner":{"account_id":5150839,"reputation":5,"user_id":4125494,"display_name":"sujata swamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561399370,"creation_date":1552487217,"answer_id":55144262,"question_id":26561511,"body_markdown":"Since I am opening the same activity under test in many test cases executed one after another and same IntentsTestRule class activity\r\n\r\nI could resolve the issue in my case by calling finishActivity on activityTestRule class and intentTestRule class\r\n\r\neg:\r\n\r\n    @After\r\n    fun method() {\r\n    \r\n    mainActivityTestRule.finishActivity()\r\n    \r\n    mIntentsRule.finishActivity()\r\n    \r\n    }","title":"Tests pass when run individually but not when the whole test class run","body":"<p>Since I am opening the same activity under test in many test cases executed one after another and same IntentsTestRule class activity</p>\n\n<p>I could resolve the issue in my case by calling finishActivity on activityTestRule class and intentTestRule class</p>\n\n<p>eg:</p>\n\n<pre><code>@After\nfun method() {\n\nmainActivityTestRule.finishActivity()\n\nmIntentsRule.finishActivity()\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4387361,"reputation":347,"user_id":3577053,"display_name":"user07"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1559071598,"creation_date":1559071273,"answer_id":56348811,"question_id":26561511,"body_markdown":"I had same issue. I needed to mock a logger, which was a static field. So eventually class loader creates only a single instance of the static field during the first invocation of a class under the test and disregards all further mocking and stubbing. When run separately, test was green, because the logger was initialized and loaded as expected, but when run all together, with other test methods, it got initialized as a concrete object, not a mock. Workaround:\r\n\r\n- create `@BeforeClass` method to ensure that the right instance of static field will be created in the first place:\r\n```java\r\n    @BeforeClass\r\n    public static void setupBeforeClass() {\r\n      PowerMockito.mockStatic(LoggerFactory.class);\r\n      loggerMock = mock(Logger.class);\r\n      when(LoggerFactory.getLogger(any(Class.class))).thenReturn(loggerMock);\r\n   }\r\n```\r\n\r\n- Interactions on the mock are getting accumulated from different test executions. Therefore, to be sure that you get a clean instance of the mock on each test method execution, reset the mock whether in `@Before` or `@After` method:\r\n\r\n```java\r\n      @Before\r\n      public void setup() {\r\n        \r\n        // Reset interactions on the mocked logger\r\n        Mockito.reset(loggerMock);\r\n        \r\n      }\r\n```\r\n\r\nNote, that in my example I used PowerMock so you need a corresponding runner `@RunWith(PowerMockRunner.class)` and `@PrepareForTest({LoggerFactory.class, MyClass.class)}` statements.","title":"Tests pass when run individually but not when the whole test class run","body":"<p>I had same issue. I needed to mock a logger, which was a static field. So eventually class loader creates only a single instance of the static field during the first invocation of a class under the test and disregards all further mocking and stubbing. When run separately, test was green, because the logger was initialized and loaded as expected, but when run all together, with other test methods, it got initialized as a concrete object, not a mock. Workaround:</p>\n\n<ul>\n<li>create <code>@BeforeClass</code> method to ensure that the right instance of static field will be created in the first place:</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @BeforeClass\n    public static void setupBeforeClass() {\n      PowerMockito.mockStatic(LoggerFactory.class);\n      loggerMock = mock(Logger.class);\n      when(LoggerFactory.getLogger(any(Class.class))).thenReturn(loggerMock);\n   }\n</code></pre>\n\n<ul>\n<li>Interactions on the mock are getting accumulated from different test executions. Therefore, to be sure that you get a clean instance of the mock on each test method execution, reset the mock whether in <code>@Before</code> or <code>@After</code> method:</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>      @Before\n      public void setup() {\n\n        // Reset interactions on the mocked logger\n        Mockito.reset(loggerMock);\n\n      }\n</code></pre>\n\n<p>Note, that in my example I used PowerMock so you need a corresponding runner <code>@RunWith(PowerMockRunner.class)</code> and <code>@PrepareForTest({LoggerFactory.class, MyClass.class)}</code> statements.</p>\n"},{"tags":[],"owner":{"account_id":7278875,"reputation":2373,"user_id":5549301,"accept_rate":38,"display_name":"Udara Seneviratne"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570004334,"creation_date":1570004334,"answer_id":58197724,"question_id":26561511,"body_markdown":"I would like to add my experience regarding this issue.\r\n\r\nAfter doing many debuggins I could confirm that there is no garbage data in the DB and also no static variables effects to the functionality.\r\n\r\nAnd also the same unit tests, pass individually and all at once as expected in another environment.\r\n\r\nJava versions, MySQL versions are the same in both environments. The only difference was the maven version. So, I configured the same maven version which was used in the successful environment.\r\n\r\nThen after issue solved.","title":"Tests pass when run individually but not when the whole test class run","body":"<p>I would like to add my experience regarding this issue.</p>\n\n<p>After doing many debuggins I could confirm that there is no garbage data in the DB and also no static variables effects to the functionality.</p>\n\n<p>And also the same unit tests, pass individually and all at once as expected in another environment.</p>\n\n<p>Java versions, MySQL versions are the same in both environments. The only difference was the maven version. So, I configured the same maven version which was used in the successful environment.</p>\n\n<p>Then after issue solved.</p>\n"},{"tags":[],"owner":{"account_id":8366132,"reputation":35,"user_id":7655968,"display_name":"CoderTest"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578600119,"creation_date":1578600119,"answer_id":59671317,"question_id":26561511,"body_markdown":"You can also try @BeforeEach for Junit5\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n      // Some code here\r\n    }","title":"Tests pass when run individually but not when the whole test class run","body":"<p>You can also try @BeforeEach for Junit5</p>\n\n<pre><code>@BeforeEach\npublic void setup() {\n  // Some code here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10766358,"reputation":1,"user_id":7921220,"display_name":"Lucero Ram&#237;rez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682303200,"creation_date":1682303200,"answer_id":76088233,"question_id":26561511,"body_markdown":"Late on this but had the same behavior, it could be the versions like it was stated by Udara\r\n\r\nFor me intellij ran without issue but pipeline failed, ended up being that at least on my local the tests were being &quot;cleaned up&quot; but pipeline doesn&#39;t so mocks for a class where affecting another un-related tests.\r\n\r\nI used [this other post][1] to clean them, not sure if is the best solution but it works\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1612569/how-do-i-undo-meta-class-changes-after-executing-groovyshell","title":"Tests pass when run individually but not when the whole test class run","body":"<p>Late on this but had the same behavior, it could be the versions like it was stated by Udara</p>\n<p>For me intellij ran without issue but pipeline failed, ended up being that at least on my local the tests were being &quot;cleaned up&quot; but pipeline doesn't so mocks for a class where affecting another un-related tests.</p>\n<p>I used <a href=\"https://stackoverflow.com/questions/1612569/how-do-i-undo-meta-class-changes-after-executing-groovyshell\">this other post</a> to clean them, not sure if is the best solution but it works</p>\n"}],"owner":{"account_id":2728511,"reputation":536,"user_id":2352866,"accept_rate":80,"display_name":"Orestis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55112,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":26561548,"answer_count":6,"score":26,"last_activity_date":1682303200,"creation_date":1414233779,"question_id":26561511,"body_markdown":"I have solved a topCoder problem for which all the tests pass when I run them on their own. Nonetheless when I run the whole test class some of them fail. Could you, please, help me identify the reason for this behaviour? Here is my class and my tests:\r\n\r\n     package com.topcoder.div2.stage1;\r\n    \r\n    import java.util.Arrays;\r\n    \r\n    public class GameOfStones {\r\n        private int iterations = 0;\r\n        public int count(int[] stones){\r\n            int result = checkEquality(stones);\r\n            return result;\r\n        }\r\n    \r\n        private int checkEquality(int[] stones){\r\n            int count = 0;\r\n            int sum = 0;\r\n            for(int k = 0; k&lt; stones.length;k++){\r\n                sum += stones[k];\r\n            }\r\n            if(stones.length &gt; 0) {\r\n                for (int i = 0; i &lt; sum; i++) {\r\n                    Arrays.sort(stones);\r\n                    if(stones[stones.length-1] != 3) {\r\n                        int j = 0;\r\n                        while (j &lt; stones.length - 1) {\r\n                            if (stones[j] == stones[j + 1]) {\r\n                                count++;\r\n                            }\r\n                            j++;\r\n                        }\r\n                        if (count == stones.length - 1) {\r\n                            return iterations;\r\n                        }\r\n                        stones[0] = stones[0] + 2;\r\n                        stones[stones.length - 1] = stones[stones.length - 1] - 2;\r\n                        iterations++;\r\n                        count = 0;\r\n                    }\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n\r\nTest:\r\n\r\n    package com.topcoder.div2.stage1;\r\n    \r\n    import org.testng.annotations.Test;\r\n    \r\n    import static org.testng.Assert.assertEquals;\r\n    \r\n    public class GameOfStonesTest {\r\n        private GameOfStones gameOfStones = new GameOfStones();\r\n    \r\n        @Test\r\n        public void test1() {\r\n            int expected = 0;\r\n            int[] given = {17};\r\n    \r\n            int actual = gameOfStones.count(given);\r\n    \r\n            assertEquals(expected, actual);\r\n        }\r\n    \r\n        @Test\r\n        public void test2() {\r\n            int expected = 3;\r\n            int[] given ={7, 15, 9, 5};\r\n    \r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test3() {\r\n            int expected = -1;\r\n            int[] given ={2, 8, 4};\r\n    \r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test4() {\r\n            int expected = -1;\r\n            int[] given ={10, 15, 20, 12, 1, 20};\r\n    \r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test5(){\r\n            int expected = 277;\r\n            int[] given ={17, 1, 27, 29, 13, 1, 27, 3, 19, 3, 25, 1, 11, 9, 7, 17, 31, 25, 5, 11, 31, 9,\r\n                    15, 3, 3, 3, 11, 11, 1, 41, 5, 95, 7, 3, 41, 31, 7, 13, 15, 5, 17, 3, 9, 3, 11,\r\n                    27, 1, 23, 15, 5, 43, 11, 17, 7, 1, 3, 13, 69, 3, 43, 21, 1, 25, 1, 3, 11, 5, 43,\r\n                    13, 7, 15, 1, 1, 55, 37, 9, 5, 7, 21, 3, 23, 15, 1, 9, 3, 35, 13, 17, 7, 17, 27, 5,\r\n                    9, 19, 13, 1, 1, 1, 29};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n         public void test6(){\r\n            int expected = 539;\r\n            int[] given ={1, 29, 11, 35, 57, 15, 85, 19, 5, 47, 53, 5, 63, 19, 13, 63, 27, 43, 53, 75, 67, 93, 33, 31, 47, 3,\r\n                    63, 17, 11, 53, 35, 23, 17, 45, 31, 19, 63, 75, 5, 3, 49, 19, 11, 89, 21, 69,\r\n                    71, 5, 45, 81, 31, 13, 11, 19, 7, 99, 33, 63, 19, 57, 73, 29, 35, 9, 47,\r\n                    1, 17, 7, 13, 31, 5, 85, 95, 23, 45, 65, 63, 41, 81, 33, 45, 1, 15,\r\n                    45, 19, 87, 51, 7, 13, 39, 1, 59, 29, 35, 1, 43};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test7() {\r\n            int expected = 0;\r\n            int[] given ={100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\r\n                    100, 100};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test8() {\r\n            int expected = 11;\r\n            int[] given ={3, 5, 21, 31};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n        @Test\r\n        public void test9() {\r\n            int expected = 13;\r\n            int[] given ={44, 6, 46};\r\n            int actual = gameOfStones.count(given);\r\n            assertEquals(actual, expected);\r\n        }\r\n    \r\n    }\r\n\r\nP.S if you know any suggestions of improving the solution you are more than welcome to include them in your answer.\r\n\r\n\r\n","title":"Tests pass when run individually but not when the whole test class run","body":"<p>I have solved a topCoder problem for which all the tests pass when I run them on their own. Nonetheless when I run the whole test class some of them fail. Could you, please, help me identify the reason for this behaviour? Here is my class and my tests:</p>\n\n<pre><code> package com.topcoder.div2.stage1;\n\nimport java.util.Arrays;\n\npublic class GameOfStones {\n    private int iterations = 0;\n    public int count(int[] stones){\n        int result = checkEquality(stones);\n        return result;\n    }\n\n    private int checkEquality(int[] stones){\n        int count = 0;\n        int sum = 0;\n        for(int k = 0; k&lt; stones.length;k++){\n            sum += stones[k];\n        }\n        if(stones.length &gt; 0) {\n            for (int i = 0; i &lt; sum; i++) {\n                Arrays.sort(stones);\n                if(stones[stones.length-1] != 3) {\n                    int j = 0;\n                    while (j &lt; stones.length - 1) {\n                        if (stones[j] == stones[j + 1]) {\n                            count++;\n                        }\n                        j++;\n                    }\n                    if (count == stones.length - 1) {\n                        return iterations;\n                    }\n                    stones[0] = stones[0] + 2;\n                    stones[stones.length - 1] = stones[stones.length - 1] - 2;\n                    iterations++;\n                    count = 0;\n                }\n            }\n        }\n        return -1;\n    }\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>package com.topcoder.div2.stage1;\n\nimport org.testng.annotations.Test;\n\nimport static org.testng.Assert.assertEquals;\n\npublic class GameOfStonesTest {\n    private GameOfStones gameOfStones = new GameOfStones();\n\n    @Test\n    public void test1() {\n        int expected = 0;\n        int[] given = {17};\n\n        int actual = gameOfStones.count(given);\n\n        assertEquals(expected, actual);\n    }\n\n    @Test\n    public void test2() {\n        int expected = 3;\n        int[] given ={7, 15, 9, 5};\n\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test3() {\n        int expected = -1;\n        int[] given ={2, 8, 4};\n\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test4() {\n        int expected = -1;\n        int[] given ={10, 15, 20, 12, 1, 20};\n\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test5(){\n        int expected = 277;\n        int[] given ={17, 1, 27, 29, 13, 1, 27, 3, 19, 3, 25, 1, 11, 9, 7, 17, 31, 25, 5, 11, 31, 9,\n                15, 3, 3, 3, 11, 11, 1, 41, 5, 95, 7, 3, 41, 31, 7, 13, 15, 5, 17, 3, 9, 3, 11,\n                27, 1, 23, 15, 5, 43, 11, 17, 7, 1, 3, 13, 69, 3, 43, 21, 1, 25, 1, 3, 11, 5, 43,\n                13, 7, 15, 1, 1, 55, 37, 9, 5, 7, 21, 3, 23, 15, 1, 9, 3, 35, 13, 17, 7, 17, 27, 5,\n                9, 19, 13, 1, 1, 1, 29};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n     public void test6(){\n        int expected = 539;\n        int[] given ={1, 29, 11, 35, 57, 15, 85, 19, 5, 47, 53, 5, 63, 19, 13, 63, 27, 43, 53, 75, 67, 93, 33, 31, 47, 3,\n                63, 17, 11, 53, 35, 23, 17, 45, 31, 19, 63, 75, 5, 3, 49, 19, 11, 89, 21, 69,\n                71, 5, 45, 81, 31, 13, 11, 19, 7, 99, 33, 63, 19, 57, 73, 29, 35, 9, 47,\n                1, 17, 7, 13, 31, 5, 85, 95, 23, 45, 65, 63, 41, 81, 33, 45, 1, 15,\n                45, 19, 87, 51, 7, 13, 39, 1, 59, 29, 35, 1, 43};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test7() {\n        int expected = 0;\n        int[] given ={100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,\n                100, 100};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test8() {\n        int expected = 11;\n        int[] given ={3, 5, 21, 31};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n    @Test\n    public void test9() {\n        int expected = 13;\n        int[] given ={44, 6, 46};\n        int actual = gameOfStones.count(given);\n        assertEquals(actual, expected);\n    }\n\n}\n</code></pre>\n\n<p>P.S if you know any suggestions of improving the solution you are more than welcome to include them in your answer.</p>\n"},{"tags":["java","scala","gradle","sbt"],"comments":[{"owner":{"account_id":6085642,"reputation":568,"user_id":5122436,"display_name":"Mikhail Ionkin"},"score":1,"creation_date":1678054002,"post_id":75642638,"comment_id":133454239,"body_markdown":"Is it work for you with java 8? I mean, if you will have worked solution, it will be easy to migrate to new java. Why not you use SBT (1.6.0+ version)? If you use sbt, can you provide minimum reproducible example?","body":"Is it work for you with java 8? I mean, if you will have worked solution, it will be easy to migrate to new java. Why not you use SBT (1.6.0+ version)? If you use sbt, can you provide minimum reproducible example?"},{"owner":{"account_id":3073732,"reputation":986,"user_id":2992404,"accept_rate":67,"display_name":"Jewels"},"score":0,"creation_date":1678098018,"post_id":75642638,"comment_id":133461025,"body_markdown":"it works fine with java 8 and java 11, only java 17 is giving me trouble.","body":"it works fine with java 8 and java 11, only java 17 is giving me trouble."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1682504689,"post_id":75642638,"comment_id":134225518,"body_markdown":"@Jewels Do you have any updates? Do you have reproduction?","body":"@Jewels Do you have any updates? Do you have reproduction?"}],"answers":[{"tags":[],"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682302181,"creation_date":1681783913,"answer_id":76040578,"question_id":75642638,"body_markdown":"Please double check that you&#39;re using Scala 2.12.15+, the latest is 2.12.17.\r\n\r\n`packages cannot be represented as URI` was a bug in Scala compiler and Gradle Scala plugin uses Scala compiler (sbt zinc compiler)\r\n\r\nhttps://github.com/scala/bug/issues/11794 *Scala 2.13.0 OpenJdk 13: REPL crashes with RuntimeException: /packages cannot be represented as URI* \r\n\r\nhttps://github.com/scala/bug/issues/11762 *Failed to run scala on Eclipse OpenJ9 VM, Java 13* \r\n\r\nhttps://github.com/scala/bug/issues/11608 *Compiler crashes when using macros in Scala 2.12 with JDK 13* \r\n\r\nhttps://github.com/scala/bug/issues/11381#issuecomment-539727339 *GlobalSymbolLoaders#lookupMemberAtTyperPhaseIfPossible throw NullPointerException with JDK12* \r\n\r\nhttps://docs.scala-lang.org/overviews/jdk-compatibility/overview.html\r\n\r\n**Version compatibility table**\r\n\r\n| JDK version | Minimum Scala versions |\r\n| -------- | -------------- |\r\n| 20    | 3.3.0 (soon), 2.13.11 (soon), 2.12.18 (soon)            |\r\n| 19   | 3.2.0, 2.13.9, 2.12.16            |\r\n| 18   | 3.1.3, 2.13.7, 2.12.15            |\r\n| **17** (LTS)   | 3.0.0, 2.13.6, **2.12.15**            |\r\n| 11 (LTS)   | 3.0.0, 2.13.0, 2.12.4, 2.11.12            |\r\n| 8 (LTS)   | 3.0.0, 2.13.0, 2.12.0, 2.11.0            |\r\n\r\nZinc 1.8.0 uses Scala 2.12.17.\r\n\r\nhttps://github.com/sbt/zinc/blob/v1.8.0/project/Dependencies.scala#L10\r\n\r\n```\r\nval scala210 = &quot;2.10.7&quot;\r\nval scala211 = &quot;2.11.12&quot;\r\nval scala212 = &quot;2.12.17&quot;\r\nval scala213 = &quot;2.13.8&quot;\r\n```\r\nThe issue *Update Zinc used by Scala plugin to 1.7.1* https://github.com/gradle/gradle/issues/21392 is still open, the pull request *Update Zinc used by Scala plugin to 1.7.1* https://github.com/gradle/gradle/pull/21393 was closed without merging. So Gradle 8.1.0 seems to be still on `zinc_2.13:1.6.1` \r\n\r\nhttps://github.com/gradle/gradle/blob/v8.1.0/subprojects/scala/build.gradle.kts#L32\r\n\r\n```\r\ncompileOnly(&quot;org.scala-sbt:zinc_2.13:1.6.1&quot;) {\r\n  ...\r\n```\r\n\r\nAnd zinc 1.6.1 is on Scala 2.13.6 \r\n\r\nhttps://github.com/sbt/zinc/blob/v1.6.1/project/Dependencies.scala#L11 \r\n\r\n```\r\nval scala210 = &quot;2.10.7&quot;\r\nval scala211 = &quot;2.11.12&quot;\r\nval scala212 = &quot;2.12.15&quot;\r\nval scala213 = &quot;2.13.6&quot;\r\n```\r\n\r\nwhere `packages cannot be represented as URI` was supposed to be fixed.\r\n\r\nhttps://docs.gradle.org/current/userguide/scala_plugin.html#sec:configure_zinc_compiler \r\n\r\n**Zinc compatibility table** \r\n\r\n| Gradle version | Supported Zinc versions | Zinc coordinates | Required Scala version | Supported Scala compilation version |\r\n| -------- | -------- | -------- | -------- | -------- |\r\n| 7.5 and newer | [SBT Zinc.](https://github.com/sbt/zinc) Versions 1.6.0 and above. | org.scala-sbt:zinc_2.13 | Scala 2.13.x is required for *running* Zinc. | Scala 2.10.x through 3.x can be compiled. |\r\n| ... |  |  |  |  |\r\n\r\nScala 2.12.15+, 2.13.6+ are considered to be compatible with Java 17. So if there are still incompatibilities maybe you should open an issue at https://github.com/gradle/gradle/issues, https://github.com/sbt/zinc/issues or https://github.com/scala/bug/\r\n\r\n---\r\n\r\nActually, I can&#39;t reproduce `packages cannot be represented as URI` with Gradle 8.1, Scala 2.12.17, zinc 1.8.0, Java eclipse_adoptium-17-amd64-linux/jdk-17.0.7+7\r\n\r\nhttps://github.com/DmytroMitin/gradledemo\r\n\r\n*settings.gradle.kts*\r\n\r\n```kotlin\r\nplugins {\r\n    id(&quot;org.gradle.toolchains.foojay-resolver-convention&quot;) version &quot;0.4.0&quot;\r\n}\r\n\r\nrootProject.name = &quot;gradledemo&quot;\r\ninclude(&quot;app&quot;)\r\n```\r\n\r\n*app/build.gradle.kts*\r\n\r\n```kotlin\r\nplugins {\r\n    scala\r\n\r\n    application\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation(&quot;org.scala-lang:scala-library:2.12.17&quot;)\r\n\r\n    implementation(&quot;com.chuusai:shapeless_2.12:2.3.10&quot;)\r\n}\r\n\r\njava {\r\n    toolchain {\r\n        languageVersion.set(JavaLanguageVersion.of(17))\r\n    }\r\n}\r\n\r\nscala {\r\n    zincVersion.set(&quot;1.8.0&quot;)\r\n}\r\n\r\n// see (*)\r\n// Without -target or -release: Task :app:compileScala FAILED: jvm-1.17 is not a valid choice for -target, bad option: -target:jvm-1.17\r\n// With -target: [Warn] : -target is deprecated: Scala 2.12 cannot emit valid class files for targets newer than 8 (this is possible with Scala 2.13). Use -release to compile against a specific platform API version.\r\ntasks.withType&lt;ScalaCompile&gt;() {\r\n    targetCompatibility = &quot;&quot;\r\n    scalaCompileOptions.additionalParameters = listOf(&quot;-release:17&quot;)\r\n}\r\n\r\napplication {\r\n    mainClass.set(&quot;gradledemo.App&quot;)\r\n}\r\n```\r\n*app/src/main/scala/gradledemo/App.scala*\r\n```scala\r\npackage gradledemo\r\n\r\nimport shapeless._\r\n\r\nobject App {\r\n  def main(args: Array[String]): Unit = {\r\n    println(1 :: &quot;a&quot; :: true :: HNil)\r\n  }\r\n}\r\n```\r\n```\r\n$ gradle clean\r\n\r\nBUILD SUCCESSFUL in 533ms\r\n1 actionable task: 1 executed\r\n\r\n$ gradle run\r\n\r\n&gt; Task :app:run\r\n1 :: a :: true :: HNil\r\n\r\nBUILD SUCCESSFUL in 4s\r\n2 actionable tasks: 2 executed\r\n```\r\n\r\nHow to reproduce `packages cannot be represented as URI`? Please prepare reproduction.\r\n\r\n(*) https://stackoverflow.com/questions/54878493/scala-build-error-on-java-11-using-intellijidea","title":"Compiling Scala 2.12.16 with Gradle and Java 17 getting java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI","body":"<p>Please double check that you're using Scala 2.12.15+, the latest is 2.12.17.</p>\n<p><code>packages cannot be represented as URI</code> was a bug in Scala compiler and Gradle Scala plugin uses Scala compiler (sbt zinc compiler)</p>\n<p><a href=\"https://github.com/scala/bug/issues/11794\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11794</a> <em>Scala 2.13.0 OpenJdk 13: REPL crashes with RuntimeException: /packages cannot be represented as URI</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11762\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11762</a> <em>Failed to run scala on Eclipse OpenJ9 VM, Java 13</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11608\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11608</a> <em>Compiler crashes when using macros in Scala 2.12 with JDK 13</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11381#issuecomment-539727339\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11381#issuecomment-539727339</a> <em>GlobalSymbolLoaders#lookupMemberAtTyperPhaseIfPossible throw NullPointerException with JDK12</em></p>\n<p><a href=\"https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html\" rel=\"nofollow noreferrer\">https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html</a></p>\n<p><strong>Version compatibility table</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>JDK version</th>\n<th>Minimum Scala versions</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>20</td>\n<td>3.3.0 (soon), 2.13.11 (soon), 2.12.18 (soon)</td>\n</tr>\n<tr>\n<td>19</td>\n<td>3.2.0, 2.13.9, 2.12.16</td>\n</tr>\n<tr>\n<td>18</td>\n<td>3.1.3, 2.13.7, 2.12.15</td>\n</tr>\n<tr>\n<td><strong>17</strong> (LTS)</td>\n<td>3.0.0, 2.13.6, <strong>2.12.15</strong></td>\n</tr>\n<tr>\n<td>11 (LTS)</td>\n<td>3.0.0, 2.13.0, 2.12.4, 2.11.12</td>\n</tr>\n<tr>\n<td>8 (LTS)</td>\n<td>3.0.0, 2.13.0, 2.12.0, 2.11.0</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Zinc 1.8.0 uses Scala 2.12.17.</p>\n<p><a href=\"https://github.com/sbt/zinc/blob/v1.8.0/project/Dependencies.scala#L10\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/blob/v1.8.0/project/Dependencies.scala#L10</a></p>\n<pre><code>val scala210 = &quot;2.10.7&quot;\nval scala211 = &quot;2.11.12&quot;\nval scala212 = &quot;2.12.17&quot;\nval scala213 = &quot;2.13.8&quot;\n</code></pre>\n<p>The issue <em>Update Zinc used by Scala plugin to 1.7.1</em> <a href=\"https://github.com/gradle/gradle/issues/21392\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues/21392</a> is still open, the pull request <em>Update Zinc used by Scala plugin to 1.7.1</em> <a href=\"https://github.com/gradle/gradle/pull/21393\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/pull/21393</a> was closed without merging. So Gradle 8.1.0 seems to be still on <code>zinc_2.13:1.6.1</code></p>\n<p><a href=\"https://github.com/gradle/gradle/blob/v8.1.0/subprojects/scala/build.gradle.kts#L32\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/blob/v8.1.0/subprojects/scala/build.gradle.kts#L32</a></p>\n<pre><code>compileOnly(&quot;org.scala-sbt:zinc_2.13:1.6.1&quot;) {\n  ...\n</code></pre>\n<p>And zinc 1.6.1 is on Scala 2.13.6</p>\n<p><a href=\"https://github.com/sbt/zinc/blob/v1.6.1/project/Dependencies.scala#L11\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/blob/v1.6.1/project/Dependencies.scala#L11</a></p>\n<pre><code>val scala210 = &quot;2.10.7&quot;\nval scala211 = &quot;2.11.12&quot;\nval scala212 = &quot;2.12.15&quot;\nval scala213 = &quot;2.13.6&quot;\n</code></pre>\n<p>where <code>packages cannot be represented as URI</code> was supposed to be fixed.</p>\n<p><a href=\"https://docs.gradle.org/current/userguide/scala_plugin.html#sec:configure_zinc_compiler\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/scala_plugin.html#sec:configure_zinc_compiler</a></p>\n<p><strong>Zinc compatibility table</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Gradle version</th>\n<th>Supported Zinc versions</th>\n<th>Zinc coordinates</th>\n<th>Required Scala version</th>\n<th>Supported Scala compilation version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>7.5 and newer</td>\n<td><a href=\"https://github.com/sbt/zinc\" rel=\"nofollow noreferrer\">SBT Zinc.</a> Versions 1.6.0 and above.</td>\n<td>org.scala-sbt:zinc_2.13</td>\n<td>Scala 2.13.x is required for <em>running</em> Zinc.</td>\n<td>Scala 2.10.x through 3.x can be compiled.</td>\n</tr>\n<tr>\n<td>...</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Scala 2.12.15+, 2.13.6+ are considered to be compatible with Java 17. So if there are still incompatibilities maybe you should open an issue at <a href=\"https://github.com/gradle/gradle/issues\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues</a>, <a href=\"https://github.com/sbt/zinc/issues\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/issues</a> or <a href=\"https://github.com/scala/bug/\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/</a></p>\n<hr />\n<p>Actually, I can't reproduce <code>packages cannot be represented as URI</code> with Gradle 8.1, Scala 2.12.17, zinc 1.8.0, Java eclipse_adoptium-17-amd64-linux/jdk-17.0.7+7</p>\n<p><a href=\"https://github.com/DmytroMitin/gradledemo\" rel=\"nofollow noreferrer\">https://github.com/DmytroMitin/gradledemo</a></p>\n<p><em>settings.gradle.kts</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;org.gradle.toolchains.foojay-resolver-convention&quot;) version &quot;0.4.0&quot;\n}\n\nrootProject.name = &quot;gradledemo&quot;\ninclude(&quot;app&quot;)\n</code></pre>\n<p><em>app/build.gradle.kts</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    scala\n\n    application\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(&quot;org.scala-lang:scala-library:2.12.17&quot;)\n\n    implementation(&quot;com.chuusai:shapeless_2.12:2.3.10&quot;)\n}\n\njava {\n    toolchain {\n        languageVersion.set(JavaLanguageVersion.of(17))\n    }\n}\n\nscala {\n    zincVersion.set(&quot;1.8.0&quot;)\n}\n\n// see (*)\n// Without -target or -release: Task :app:compileScala FAILED: jvm-1.17 is not a valid choice for -target, bad option: -target:jvm-1.17\n// With -target: [Warn] : -target is deprecated: Scala 2.12 cannot emit valid class files for targets newer than 8 (this is possible with Scala 2.13). Use -release to compile against a specific platform API version.\ntasks.withType&lt;ScalaCompile&gt;() {\n    targetCompatibility = &quot;&quot;\n    scalaCompileOptions.additionalParameters = listOf(&quot;-release:17&quot;)\n}\n\napplication {\n    mainClass.set(&quot;gradledemo.App&quot;)\n}\n</code></pre>\n<p><em>app/src/main/scala/gradledemo/App.scala</em></p>\n<pre class=\"lang-scala prettyprint-override\"><code>package gradledemo\n\nimport shapeless._\n\nobject App {\n  def main(args: Array[String]): Unit = {\n    println(1 :: &quot;a&quot; :: true :: HNil)\n  }\n}\n</code></pre>\n<pre><code>$ gradle clean\n\nBUILD SUCCESSFUL in 533ms\n1 actionable task: 1 executed\n\n$ gradle run\n\n&gt; Task :app:run\n1 :: a :: true :: HNil\n\nBUILD SUCCESSFUL in 4s\n2 actionable tasks: 2 executed\n</code></pre>\n<p>How to reproduce <code>packages cannot be represented as URI</code>? Please prepare reproduction.</p>\n<p>(*) <a href=\"https://stackoverflow.com/questions/54878493/scala-build-error-on-java-11-using-intellijidea\">Scala build error on Java 11 using intellijidea</a></p>\n"}],"owner":{"account_id":3073732,"reputation":986,"user_id":2992404,"accept_rate":67,"display_name":"Jewels"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":795,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1682302181,"creation_date":1678023730,"question_id":75642638,"body_markdown":"I have a scala project that is stuck on version 2.12. I am trying to upgrade the Java version to 17, but am getting the infamous `java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI` error. I have looked [here][1] and [here][2] and [here][3] and [here][4] (all SO Q&amp;A&#39;s) but all to no avail. The common advice between all those answers is either to use Java 8 (not what I want), to upgrade Scala to the latest patch version (already did that) or to upgrade SBT. Regarding the last point, I added the following snippet to my `build.gradle.kts` file but am still getting the error:\r\n```\r\nscala {\r\n    zincVersion.set(&quot;1.8.0&quot;)\r\n}\r\n```\r\nAny ideas?\r\n\r\n  [1]: https://stackoverflow.com/questions/60308229/scala-packages-cannot-be-represented-as-uri\r\n  [2]: https://stackoverflow.com/questions/63800811/how-do-i-resolve-the-packages-cannot-be-represented-as-uri-issue\r\n  [3]: https://stackoverflow.com/questions/73428839/packages-cannot-be-represented-as-uri\r\n  [4]: https://stackoverflow.com/questions/66976989/sbt-test-error-java-lang-runtimeexception-packages-cannot-be-represented-as-u","title":"Compiling Scala 2.12.16 with Gradle and Java 17 getting java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI","body":"<p>I have a scala project that is stuck on version 2.12. I am trying to upgrade the Java version to 17, but am getting the infamous <code>java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI</code> error. I have looked <a href=\"https://stackoverflow.com/questions/60308229/scala-packages-cannot-be-represented-as-uri\">here</a> and <a href=\"https://stackoverflow.com/questions/63800811/how-do-i-resolve-the-packages-cannot-be-represented-as-uri-issue\">here</a> and <a href=\"https://stackoverflow.com/questions/73428839/packages-cannot-be-represented-as-uri\">here</a> and <a href=\"https://stackoverflow.com/questions/66976989/sbt-test-error-java-lang-runtimeexception-packages-cannot-be-represented-as-u\">here</a> (all SO Q&amp;A's) but all to no avail. The common advice between all those answers is either to use Java 8 (not what I want), to upgrade Scala to the latest patch version (already did that) or to upgrade SBT. Regarding the last point, I added the following snippet to my <code>build.gradle.kts</code> file but am still getting the error:</p>\n<pre><code>scala {\n    zincVersion.set(&quot;1.8.0&quot;)\n}\n</code></pre>\n<p>Any ideas?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":8900519,"reputation":503,"user_id":6644123,"display_name":"shanfeng"},"score":0,"creation_date":1682301795,"post_id":76088134,"comment_id":134188639,"body_markdown":"It depends. Usually it is a bad practice to use static class/member in beans.","body":"It depends. Usually it is a bad practice to use static class/member in beans."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1682307108,"post_id":76088134,"comment_id":134189016,"body_markdown":"The assignment to `someConfig` will be made when the class which contains it is loaded. Spring will have no effect on that. Why don&#39;t you use Spring instead of static members?","body":"The assignment to <code>someConfig</code> will be made when the class which contains it is loaded. Spring will have no effect on that. Why don&#39;t you use Spring instead of static members?"}],"owner":{"account_id":15995820,"reputation":23,"user_id":11543765,"display_name":"once"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682301201,"creation_date":1682301201,"question_id":76088134,"body_markdown":"As the title  \r\n```private static int someConfig = Config.getInstance().getSomeConfig(&quot;some&quot;);```  \r\nand the config needs initialized before being used.\r\nCan I use this when the class `@DependsOn` the Config(Config needs initialized before using)","title":"Can I set a static member in a spring bean class which depends on `@DependsOn`?","body":"<p>As the title<br />\n<code>private static int someConfig = Config.getInstance().getSomeConfig(&quot;some&quot;);</code><br />\nand the config needs initialized before being used.\nCan I use this when the class <code>@DependsOn</code> the Config(Config needs initialized before using)</p>\n"},{"tags":["java","objectinputstream","objectoutputstream"],"comments":[{"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1682269088,"post_id":76086094,"comment_id":134184994,"body_markdown":"What do you mean with &quot;treat the two packets as one&quot;? Two objects are two objects, not one ... and why do you think you need to identify &quot;boundaries&quot;? And by the way, using Java Serialization for remote communication may introduce [security vulnerabilities](https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java).","body":"What do you mean with &quot;treat the two packets as one&quot;? Two objects are two objects, not one ... and why do you think you need to identify &quot;boundaries&quot;? And by the way, using Java Serialization for remote communication may introduce <a href=\"https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java\">security vulnerabilities</a>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1682270104,"post_id":76086094,"comment_id":134185144,"body_markdown":"@meriton I think the OP has a persistent connection open and needs to treat every two objects as part of a single &quot;message&quot;. Essentially, they&#39;re asking how to write their own application-level communication protocol, specifically how to delimit separate messages.","body":"@meriton I think the OP has a persistent connection open and needs to treat every two objects as part of a single &quot;message&quot;. Essentially, they&#39;re asking how to write their own application-level communication protocol, specifically how to delimit separate messages."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682270312,"post_id":76086094,"comment_id":134185167,"body_markdown":"@OP If you&#39;re going to use Java serialization, why not just create a class that represents a single message and contains all the data of that message? That way the reader only has to read objects as they come in. The &quot;wrapper&quot; object itself would be the delimiter. But, as pointed out, Java serialization has its issues. Consider using a different format mechanism.","body":"@OP If you&#39;re going to use Java serialization, why not just create a class that represents a single message and contains all the data of that message? That way the reader only has to read objects as they come in. The &quot;wrapper&quot; object itself would be the delimiter. But, as pointed out, Java serialization has its issues. Consider using a different format mechanism."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1682270360,"post_id":76086094,"comment_id":134185170,"body_markdown":"Should also point out that `obj instanceof Object` is always going to be true, as all classes ultimately inherit from `Object`.","body":"Should also point out that <code>obj instanceof Object</code> is always going to be true, as all classes ultimately inherit from <code>Object</code>."},{"owner":{"account_id":23546014,"reputation":35,"user_id":17589476,"display_name":"Mr Right"},"score":0,"creation_date":1682271439,"post_id":76086094,"comment_id":134185302,"body_markdown":"@Slaw, yes, this is an experiment for one of my computer network courses. I need to write a chat program. I defined a `Message` class that contains all types of data, but I am thinking about whether it is necessary to design an application layer protocol to allow the receiver to distinguish the boundaries of the message.","body":"@Slaw, yes, this is an experiment for one of my computer network courses. I need to write a chat program. I defined a <code>Message</code> class that contains all types of data, but I am thinking about whether it is necessary to design an application layer protocol to allow the receiver to distinguish the boundaries of the message."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682278516,"post_id":76086094,"comment_id":134186358,"body_markdown":"The `ObjectInputStream` class already knows where an object begins and ends. If you write a `Message` to the stream, then when you call `readObject()` you&#39;ll get that `Message` object back.","body":"The <code>ObjectInputStream</code> class already knows where an object begins and ends. If you write a <code>Message</code> to the stream, then when you call <code>readObject()</code> you&#39;ll get that <code>Message</code> object back."}],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682301044,"creation_date":1682301044,"answer_id":76088128,"question_id":76086094,"body_markdown":"&gt; but I am thinking about whether it is necessary to design an application layer protocol to allow the receiver to distinguish the boundaries of the message\r\n\r\nJava Serialization does that for you. If Java Serialization didn&#39;t do this, it would be impossible to read more than one `Object` from a `ObjectInputStream`, since the boundary between the objects would be unspecified. If you&#39;re curious how Java Serialization does this, the [Java Object Serialization Specification](https://docs.oracle.com/en/java/javase/18/docs/specs/serialization/), in particular the [Object Serialization Stream Protocol](https://docs.oracle.com/en/java/javase/18/docs/specs/serialization/protocol.html) section, should prove instructive (very briefly: variable length data is prefixed with its length).\r\n\r\nThat said, using Java Serialization to interpret untrusted data is likely to result in [serious security vulnerabilities](https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java). Most networked software is better served with more robust serialization formats, such as JSON or XML. There are open source libraries for both of these. \r\n\r\nAlternatively, you could reinvent the wheel by using a naked `DataOutputStream` / `DataInputStream`. For comparatively simple messages, this shouldn&#39;t be too onerous.","title":"How to determine the boundary when reading with ois.readObject()","body":"<blockquote>\n<p>but I am thinking about whether it is necessary to design an application layer protocol to allow the receiver to distinguish the boundaries of the message</p>\n</blockquote>\n<p>Java Serialization does that for you. If Java Serialization didn't do this, it would be impossible to read more than one <code>Object</code> from a <code>ObjectInputStream</code>, since the boundary between the objects would be unspecified. If you're curious how Java Serialization does this, the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/specs/serialization/\" rel=\"nofollow noreferrer\">Java Object Serialization Specification</a>, in particular the <a href=\"https://docs.oracle.com/en/java/javase/18/docs/specs/serialization/protocol.html\" rel=\"nofollow noreferrer\">Object Serialization Stream Protocol</a> section, should prove instructive (very briefly: variable length data is prefixed with its length).</p>\n<p>That said, using Java Serialization to interpret untrusted data is likely to result in <a href=\"https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java\">serious security vulnerabilities</a>. Most networked software is better served with more robust serialization formats, such as JSON or XML. There are open source libraries for both of these.</p>\n<p>Alternatively, you could reinvent the wheel by using a naked <code>DataOutputStream</code> / <code>DataInputStream</code>. For comparatively simple messages, this shouldn't be too onerous.</p>\n"}],"owner":{"account_id":23546014,"reputation":35,"user_id":17589476,"display_name":"Mr Right"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76088128,"answer_count":1,"score":0,"last_activity_date":1682301044,"creation_date":1682268415,"question_id":76086094,"body_markdown":"If the sender uses `ois.writeObject` to continuously send two objects of the same class to the receiver, and the receiver uses `oos.readObject` to read, is it possible for the receiver to treat the two data packets as one? And when the class to be serialized is very large, how does the receiver know when the reception is complete?\r\n\r\nThere is a way to point out that `Object` can be used as boundary markers, but I don&#39;t know if it is correct\r\n\r\n```\r\n//sender\r\nout.writeObject(obj1);\r\nout.writeObject(new Object()); \r\n\r\n\r\nout.writeObject(obj1);\r\nout.writeObject(new Object()); \r\n\r\n\r\n//receiver\r\nObject obj;\r\nwhile ((obj = in.readObject()) != null) {\r\n    if (obj instanceof Object) {\r\n        // Boundary identification, process the next object\r\n    } else {\r\n        // process the received object\r\n    }\r\n}\r\n```","title":"How to determine the boundary when reading with ois.readObject()","body":"<p>If the sender uses <code>ois.writeObject</code> to continuously send two objects of the same class to the receiver, and the receiver uses <code>oos.readObject</code> to read, is it possible for the receiver to treat the two data packets as one? And when the class to be serialized is very large, how does the receiver know when the reception is complete?</p>\n<p>There is a way to point out that <code>Object</code> can be used as boundary markers, but I don't know if it is correct</p>\n<pre><code>//sender\nout.writeObject(obj1);\nout.writeObject(new Object()); \n\n\nout.writeObject(obj1);\nout.writeObject(new Object()); \n\n\n//receiver\nObject obj;\nwhile ((obj = in.readObject()) != null) {\n    if (obj instanceof Object) {\n        // Boundary identification, process the next object\n    } else {\n        // process the received object\n    }\n}\n</code></pre>\n"},{"tags":["java","pdf","paragraph","openpdf"],"owner":{"account_id":27278550,"reputation":13,"user_id":20798786,"display_name":"Jang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682300105,"creation_date":1682300105,"question_id":76088081,"body_markdown":"When I add a paragraph in the paragraph, some style attributes including alignment are not applied to the paragraph inside.\r\nI need it to use a paragraph with a title and body and use it repeatedly.\r\n(iText5 works well. however openpdf does not work.)\r\n\r\n## OpenPdf Code\r\n\r\n```\r\nParagraph paragraph = new Paragraph();\r\nparagraph.add(&quot;OUTER&quot;);\r\nparagraph.add(Chunk.NEWLINE);\r\nParagraph innerParagraph = new Paragraph();\r\ninnerParagraph.add(&quot;INNER&quot;);\r\ninnerParagraph.setAlignment(Element.ALIGN_RIGHT);\r\nparagraph.add(innerParagraph);\r\n\r\nDocument document = new Document();\r\ndocument.add(paragraph);\r\n```\r\n\r\n## Expect\r\n\r\n```\r\nOUTER\r\n                                    INNER\r\n```\r\n\r\n## Result\r\n\r\n```\r\nOUTER\r\nINNER\r\n```","title":"When using openpdf, can I add a Paragraph in the Paragraph with style attributes?","body":"<p>When I add a paragraph in the paragraph, some style attributes including alignment are not applied to the paragraph inside.\nI need it to use a paragraph with a title and body and use it repeatedly.\n(iText5 works well. however openpdf does not work.)</p>\n<h2>OpenPdf Code</h2>\n<pre><code>Paragraph paragraph = new Paragraph();\nparagraph.add(&quot;OUTER&quot;);\nparagraph.add(Chunk.NEWLINE);\nParagraph innerParagraph = new Paragraph();\ninnerParagraph.add(&quot;INNER&quot;);\ninnerParagraph.setAlignment(Element.ALIGN_RIGHT);\nparagraph.add(innerParagraph);\n\nDocument document = new Document();\ndocument.add(paragraph);\n</code></pre>\n<h2>Expect</h2>\n<pre><code>OUTER\n                                    INNER\n</code></pre>\n<h2>Result</h2>\n<pre><code>OUTER\nINNER\n</code></pre>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":27436725,"reputation":89,"user_id":20932425,"display_name":"shmily"},"score":1,"creation_date":1682300574,"post_id":76087972,"comment_id":134188537,"body_markdown":"Using your code, I got the following results: `any string with marker 123 here`,\n`any string ${test} with marker 123 here`.","body":"Using your code, I got the following results: <code>any string with marker 123 here</code>, <code>any string ${test} with marker 123 here</code>."}],"answers":[{"comments":[{"owner":{"account_id":4091815,"reputation":373,"user_id":3359605,"accept_rate":11,"display_name":"Virkom"},"score":0,"creation_date":1682459093,"post_id":76088039,"comment_id":134218692,"body_markdown":"Thanks a lot. Yes, you&#39;re right, I don&#39;t need a regex, replace() method is enough.","body":"Thanks a lot. Yes, you&#39;re right, I don&#39;t need a regex, replace() method is enough."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682299331,"creation_date":1682299331,"answer_id":76088039,"question_id":76087972,"body_markdown":"The direct answer is &#39;use `Pattern.QUOTE` - you don&#39;t want `key` to be interpreted as regex-relevant&#39;.\r\n\r\nHowever, that&#39;s still a silly way to go about. Why do you think you need regular expressions here? You.. do not.\r\n\r\nJust use `.replace` (which replaces ALL occurrences; `.replaceAll` interprets the first arg as a regex, and is in contrast to `.replaceFirst` which also interprets the first arg as a regex but only replaces the first occurrence. Yes, these are badly named methods. `replace` replaces all and does not interpret, which is what you want). By avoiding regular expressions, you avoid some exotic Denial of Service attack surface and it&#39;s faster in general, too.\r\n\r\n```\r\nString baseString = &quot;any string with marker {{TEST_MARKER}} here. Just to prove the point, {{TEST_MARKER}} again.&quot;;\r\nString key = &quot;TEST_MARKER&quot;;\r\nString val = &quot;123&quot;;\r\nString pattern = String.format(&quot;\\\\{\\\\{%s\\\\}\\\\}&quot;, key);\r\nString result = baseString.replace(pattern, val);\r\n```\r\n\r\nOr, possibly, look into [mustache](https://www.baeldung.com/mustache) - a library that does this for you.","title":"Regex to replace marker {{MARKER}} in string","body":"<p>The direct answer is 'use <code>Pattern.QUOTE</code> - you don't want <code>key</code> to be interpreted as regex-relevant'.</p>\n<p>However, that's still a silly way to go about. Why do you think you need regular expressions here? You.. do not.</p>\n<p>Just use <code>.replace</code> (which replaces ALL occurrences; <code>.replaceAll</code> interprets the first arg as a regex, and is in contrast to <code>.replaceFirst</code> which also interprets the first arg as a regex but only replaces the first occurrence. Yes, these are badly named methods. <code>replace</code> replaces all and does not interpret, which is what you want). By avoiding regular expressions, you avoid some exotic Denial of Service attack surface and it's faster in general, too.</p>\n<pre><code>String baseString = &quot;any string with marker {{TEST_MARKER}} here. Just to prove the point, {{TEST_MARKER}} again.&quot;;\nString key = &quot;TEST_MARKER&quot;;\nString val = &quot;123&quot;;\nString pattern = String.format(&quot;\\\\{\\\\{%s\\\\}\\\\}&quot;, key);\nString result = baseString.replace(pattern, val);\n</code></pre>\n<p>Or, possibly, look into <a href=\"https://www.baeldung.com/mustache\" rel=\"nofollow noreferrer\">mustache</a> - a library that does this for you.</p>\n"}],"owner":{"account_id":4091815,"reputation":373,"user_id":3359605,"accept_rate":11,"display_name":"Virkom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682299414,"creation_date":1682297871,"question_id":76087972,"body_markdown":"I have a problem with regex to replace `{{MARKER}}` value. \r\n\r\n    String baseString = &quot;any string with marker {{TEST_MARKER}} here&quot;;\r\n    String key = &quot;TEST_MARKER&quot;;\r\n    String val = &quot;123&quot;;\r\n    String pattern = String.format(&quot;\\\\{\\\\{%s\\\\}\\\\}&quot;, key);\r\n    String result = baseString.replaceAll(pattern, val);\r\n\r\nIt works correctly for any `baseString`. But I get an exception in one case. If `baseString` contains `${some_text}`.\r\n\r\nSo I will get an error If I use something like this:\r\n\r\n    String baseString = &quot;any string ${test} with marker {{TEST_MARKER}} here&quot;;\r\n    \r\nResult:\r\n\r\n    java.lang.IllegalArgumentException: No group with name {test}\r\n\t    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1059) ~[na:na]\r\n\t    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]\r\n\t    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\r\n\t    at java.base/java.lang.String.replaceAll(String.java:2939) ~[na:na]\r\n    \r\nor:\r\n\r\n    java.lang.IllegalArgumentException: named capturing group is missing trailing &#39;}&#39;\r\n\t    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1051) ~[na:na]\r\n\t    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]\r\n\t    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\r\n\t    at java.base/java.lang.String.replaceAll(String.java:2939) ~[na:na]\r\n\r\nIt depends on base string. How to fix this?","title":"Regex to replace marker {{MARKER}} in string","body":"<p>I have a problem with regex to replace <code>{{MARKER}}</code> value.</p>\n<pre><code>String baseString = &quot;any string with marker {{TEST_MARKER}} here&quot;;\nString key = &quot;TEST_MARKER&quot;;\nString val = &quot;123&quot;;\nString pattern = String.format(&quot;\\\\{\\\\{%s\\\\}\\\\}&quot;, key);\nString result = baseString.replaceAll(pattern, val);\n</code></pre>\n<p>It works correctly for any <code>baseString</code>. But I get an exception in one case. If <code>baseString</code> contains <code>${some_text}</code>.</p>\n<p>So I will get an error If I use something like this:</p>\n<pre><code>String baseString = &quot;any string ${test} with marker {{TEST_MARKER}} here&quot;;\n</code></pre>\n<p>Result:</p>\n<pre><code>java.lang.IllegalArgumentException: No group with name {test}\n    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1059) ~[na:na]\n    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]\n    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\n    at java.base/java.lang.String.replaceAll(String.java:2939) ~[na:na]\n</code></pre>\n<p>or:</p>\n<pre><code>java.lang.IllegalArgumentException: named capturing group is missing trailing '}'\n    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1051) ~[na:na]\n    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]\n    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\n    at java.base/java.lang.String.replaceAll(String.java:2939) ~[na:na]\n</code></pre>\n<p>It depends on base string. How to fix this?</p>\n"},{"tags":["java","android","android-dialog"],"answers":[{"tags":[],"owner":{"account_id":3067627,"reputation":24771,"user_id":2598988,"display_name":"Hariharan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1408008033,"creation_date":1408008033,"answer_id":25304489,"question_id":25304458,"body_markdown":"Try this..\r\n\r\nChange this..\r\n\r\n    VideoView vv = (VideoView) findViewById(R.id.videoview1);\r\n\r\nto\r\n\r\n    VideoView vv = (VideoView) dialog2.findViewById(R.id.videoview1);\r\n\r\nBecause `View` must refer `Dialog`","title":"NullPointerException: findViewById returns null in Dialog","body":"<p>Try this..</p>\n\n<p>Change this..</p>\n\n<pre><code>VideoView vv = (VideoView) findViewById(R.id.videoview1);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>VideoView vv = (VideoView) dialog2.findViewById(R.id.videoview1);\n</code></pre>\n\n<p>Because <code>View</code> must refer <code>Dialog</code></p>\n"},{"tags":[],"owner":{"account_id":968009,"reputation":14390,"user_id":991085,"accept_rate":50,"display_name":"Giru Bhai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1408008047,"creation_date":1408008047,"answer_id":25304496,"question_id":25304458,"body_markdown":"Change\r\n\r\n    VideoView vv = (VideoView)findViewById(R.id.videoview1);\r\n\r\nto\r\n\r\n    VideoView vv = (VideoView)dialog2.findViewById(R.id.videoview1);\r\n\r\nbecause `videoview1` is part of `R.layout.video` and `dialog2` view layout is `R.layout.video` ","title":"NullPointerException: findViewById returns null in Dialog","body":"<p>Change</p>\n\n<pre><code>VideoView vv = (VideoView)findViewById(R.id.videoview1);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>VideoView vv = (VideoView)dialog2.findViewById(R.id.videoview1);\n</code></pre>\n\n<p>because <code>videoview1</code> is part of <code>R.layout.video</code> and <code>dialog2</code> view layout is <code>R.layout.video</code> </p>\n"},{"tags":[],"owner":{"account_id":1687550,"reputation":3781,"user_id":1550509,"accept_rate":44,"display_name":"Android is everything for me"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1408008347,"creation_date":1408008347,"answer_id":25304585,"question_id":25304458,"body_markdown":"    VideoView vv = (VideoView) dialog2.findViewById(R.id.videoview1);\r\nyou need to use dialog object. specifier to get video view id","title":"NullPointerException: findViewById returns null in Dialog","body":"<pre><code>VideoView vv = (VideoView) dialog2.findViewById(R.id.videoview1);\n</code></pre>\n\n<p>you need to use dialog object. specifier to get video view id</p>\n"}],"owner":{"account_id":4788595,"reputation":15,"user_id":3868383,"display_name":"knecht"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":25304489,"answer_count":3,"score":0,"last_activity_date":1682294763,"creation_date":1408007942,"question_id":25304458,"body_markdown":"I&#180;m trying to show a video in a dialog but the VideoView can&#180;t be found, although the id is correct. I get a NullPointerException in this line:\r\n\r\n    VideoView vv = (VideoView) findViewById(R.id.videoview1);\r\n\r\nThis is my code:\r\n\r\n    \t        \tDialog dialog2 = new Dialog(getContext(),\r\n\t    \t\t\t\tandroid.R.style.Theme_Translucent_NoTitleBar_Fullscreen);\r\n\t            dialog2.setContentView(R.layout.video);\r\n\t            \r\n\t        \tVideoView vv = (VideoView) findViewById(R.id.videoview1);\r\n\t    \t\tString uri = &quot;android.resource://&quot; + theGameActivity.getPackageName() +&quot;/&quot;+R.raw.video6;\r\n    dialog2.show();\r\n\t    \t\tvv.start();","title":"NullPointerException: findViewById returns null in Dialog","body":"<p>IÂ´m trying to show a video in a dialog but the VideoView canÂ´t be found, although the id is correct. I get a NullPointerException in this line:</p>\n\n<pre><code>VideoView vv = (VideoView) findViewById(R.id.videoview1);\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>                Dialog dialog2 = new Dialog(getContext(),\n                    android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);\n            dialog2.setContentView(R.layout.video);\n\n            VideoView vv = (VideoView) findViewById(R.id.videoview1);\n            String uri = \"android.resource://\" + theGameActivity.getPackageName() +\"/\"+R.raw.video6;\ndialog2.show();\n            vv.start();\n</code></pre>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1510367407,"post_id":47233187,"comment_id":81418067,"body_markdown":"It seems too broad. Can you reduce the content to provide relevant info regarding the problem and post [MCVE](https://stackoverflow.com/help/mcve) to reproduce it.","body":"It seems too broad. Can you reduce the content to provide relevant info regarding the problem and post <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> to reproduce it."},{"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"score":1,"creation_date":1510536015,"post_id":47233187,"comment_id":81462517,"body_markdown":"@dur my custom(manual) login is used right after their initial account creation. I email them and have them click a link to verify their account. Upon clicking the link, I log them in without making them enter their credentials again. Since I don&#39;t have a password in this scenario, I can&#39;t use  any of the &quot;normal&quot; spring auth mechanisms, such as an `ActiveDirectoryLdapAuthenticationProvider`. I also do basically the same thing if they forget their password, allowing them limited account access without necessarily having to change/reset their password, which is very important to my use case.","body":"@dur my custom(manual) login is used right after their initial account creation. I email them and have them click a link to verify their account. Upon clicking the link, I log them in without making them enter their credentials again. Since I don&#39;t have a password in this scenario, I can&#39;t use  any of the &quot;normal&quot; spring auth mechanisms, such as an <code>ActiveDirectoryLdapAuthenticationProvider</code>. I also do basically the same thing if they forget their password, allowing them limited account access without necessarily having to change/reset their password, which is very important to my use case."},{"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"score":0,"creation_date":1510536542,"post_id":47233187,"comment_id":81462665,"body_markdown":"@dur, further, *even if I did have a password*, I don&#39;t really see a way to still get spring to do all of it&#39;s stuff for me, because spring does it&#39;s magic in a servlet `Filter`, well before my application code (eg in a controller) is executed. I need to make the call that establishes the login state, and all of its associated session stuff I listed, programatically.","body":"@dur, further, <i>even if I did have a password</i>, I don&#39;t really see a way to still get spring to do all of it&#39;s stuff for me, because spring does it&#39;s magic in a servlet <code>Filter</code>, well before my application code (eg in a controller) is executed. I need to make the call that establishes the login state, and all of its associated session stuff I listed, programatically."},{"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"score":2,"creation_date":1510536848,"post_id":47233187,"comment_id":81462743,"body_markdown":"@RomanC I don&#39;t think my question is broad at all. I&#39;m asking for strategy advice from people who are extremely well versed with spring security. I presented details to give a concrete demonstration of the problems with the typical way that people do manual logins with spring. The details just give context - I don&#39;t think that makes the question broad. I don&#39;t see much value in providing a reproducible code sample here - my code works, I just don&#39;t like the strategy, and feel an expert may know a better way.","body":"@RomanC I don&#39;t think my question is broad at all. I&#39;m asking for strategy advice from people who are extremely well versed with spring security. I presented details to give a concrete demonstration of the problems with the typical way that people do manual logins with spring. The details just give context - I don&#39;t think that makes the question broad. I don&#39;t see much value in providing a reproducible code sample here - my code works, I just don&#39;t like the strategy, and feel an expert may know a better way."}],"answers":[{"tags":[],"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1510662327,"creation_date":1510661427,"answer_id":47285544,"question_id":47233187,"body_markdown":"For custom web authentication you should implement combination of a custom authentication filter (for example [`AbstractAuthenticationProcessingFilter`](https://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html) or just [`GenericFilterBean`](https://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/web/filter/GenericFilterBean.html)), a custom authentication provider ([`AuthenticationProvider`](https://docs.spring.io/autorepo/docs/spring-security/4.2.3.RELEASE/apidocs/org/springframework/security/authentication/AuthenticationProvider.html)) or/and custom authentication token ([`AbstractAuthenticationToken`](https://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/apidocs/org/springframework/security/authentication/AbstractAuthenticationToken.html)). \r\n\r\nFor example, see source of [Spring Security Kerberos](https://github.com/spring-projects/spring-security-kerberos).\r\n\r\nSee also:\r\n\r\n- [The AuthenticationManager, ProviderManager and AuthenticationProvider](https://docs.spring.io/spring-security/site/docs/current/reference/html/core-services.html#core-services-authentication-manager)","title":"spring security manual login best practice","body":"<p>For custom web authentication you should implement combination of a custom authentication filter (for example <a href=\"https://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html\" rel=\"nofollow noreferrer\"><code>AbstractAuthenticationProcessingFilter</code></a> or just <a href=\"https://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/web/filter/GenericFilterBean.html\" rel=\"nofollow noreferrer\"><code>GenericFilterBean</code></a>), a custom authentication provider (<a href=\"https://docs.spring.io/autorepo/docs/spring-security/4.2.3.RELEASE/apidocs/org/springframework/security/authentication/AuthenticationProvider.html\" rel=\"nofollow noreferrer\"><code>AuthenticationProvider</code></a>) or/and custom authentication token (<a href=\"https://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/apidocs/org/springframework/security/authentication/AbstractAuthenticationToken.html\" rel=\"nofollow noreferrer\"><code>AbstractAuthenticationToken</code></a>). </p>\n\n<p>For example, see source of <a href=\"https://github.com/spring-projects/spring-security-kerberos\" rel=\"nofollow noreferrer\">Spring Security Kerberos</a>.</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html/core-services.html#core-services-authentication-manager\" rel=\"nofollow noreferrer\">The AuthenticationManager, ProviderManager and AuthenticationProvider</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":3209105,"reputation":1422,"user_id":2709454,"display_name":"xpusostomos"},"score":0,"creation_date":1641848610,"post_id":47523645,"comment_id":124910120,"body_markdown":"To me, this doesn&#39;t sound like a general solution. What if there isn&#39;t one particular &quot;place in the code&quot; where the user is identified? For example, let&#39;s say we&#39;re sending out URLs through email with a one-time authentication token in the URL. That URL could end up anywhere... so there isn&#39;t one particular place where we can check their credentials.","body":"To me, this doesn&#39;t sound like a general solution. What if there isn&#39;t one particular &quot;place in the code&quot; where the user is identified? For example, let&#39;s say we&#39;re sending out URLs through email with a one-time authentication token in the URL. That URL could end up anywhere... so there isn&#39;t one particular place where we can check their credentials."},{"owner":{"account_id":3209105,"reputation":1422,"user_id":2709454,"display_name":"xpusostomos"},"score":0,"creation_date":1641848746,"post_id":47523645,"comment_id":124910172,"body_markdown":"And let&#39;s say we work around that problem by actually adding a filter... and somehow redirect the user&#39;s browser to the login form... that means the only place the user can end up is the home page, after they&#39;re redirected from the login form? If we want them to end up in any of many web pages, tough luck? I&#39;m far from an expert on this stuff, I found your comments and idea intriguing, but I can&#39;t see how it can work as a general solution.","body":"And let&#39;s say we work around that problem by actually adding a filter... and somehow redirect the user&#39;s browser to the login form... that means the only place the user can end up is the home page, after they&#39;re redirected from the login form? If we want them to end up in any of many web pages, tough luck? I&#39;m far from an expert on this stuff, I found your comments and idea intriguing, but I can&#39;t see how it can work as a general solution."},{"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"score":0,"creation_date":1642622569,"post_id":47523645,"comment_id":125123178,"body_markdown":"@xpusostomos General solution to what problem? I feel like you&#39;re describing features and requirements that are tangential to this Q&amp;A. I can think of a few ways to implement the features you mentioned - Zillions of websites use this strategy: on page load, check is user logged in? no? then store current page in url or session, redirect to login page, after login redirect user back to stored page. you might even avoid redirects via crafty internal subrequests and/or servlet forwarding, possibly relaying the session id / cookies from the subrequest, or use a different strategy instead of mine.","body":"@xpusostomos General solution to what problem? I feel like you&#39;re describing features and requirements that are tangential to this Q&amp;A. I can think of a few ways to implement the features you mentioned - Zillions of websites use this strategy: on page load, check is user logged in? no? then store current page in url or session, redirect to login page, after login redirect user back to stored page. you might even avoid redirects via crafty internal subrequests and/or servlet forwarding, possibly relaying the session id / cookies from the subrequest, or use a different strategy instead of mine."},{"owner":{"account_id":3209105,"reputation":1422,"user_id":2709454,"display_name":"xpusostomos"},"score":0,"creation_date":1642729285,"post_id":47523645,"comment_id":125155779,"body_markdown":"what you&#39;re describing already exists in Spring. I was more thinking of authentication before you get to the page... like a one-time-use password recovery url login... which to be fair not many people may want to do like that. However I would say that implementing your own filter is a lot simpler than you make out. The only interesting extra step carried out in AbstractAuthenticationProcessingFilter is a call to rememberMeServices... and if you inherit from that class (e.g. UsernamePasswordAuthenticationFilter), you don&#39;t even have to call that explicitely.","body":"what you&#39;re describing already exists in Spring. I was more thinking of authentication before you get to the page... like a one-time-use password recovery url login... which to be fair not many people may want to do like that. However I would say that implementing your own filter is a lot simpler than you make out. The only interesting extra step carried out in AbstractAuthenticationProcessingFilter is a call to rememberMeServices... and if you inherit from that class (e.g. UsernamePasswordAuthenticationFilter), you don&#39;t even have to call that explicitely."},{"owner":{"account_id":3209105,"reputation":1422,"user_id":2709454,"display_name":"xpusostomos"},"score":0,"creation_date":1642729297,"post_id":47523645,"comment_id":125155782,"body_markdown":"ChangeSessionIdAuthenticationStrategy is obsolete, and whatever ConcurrentSessionControlAuthenticationStrategy does, it does independently of any filter you write. So really the easier solution is shove something in the session, write  your own filter inheriting AbstractAuthenticationProcessingFilter, override attemptAuthentication to return success and you should be done.","body":"ChangeSessionIdAuthenticationStrategy is obsolete, and whatever ConcurrentSessionControlAuthenticationStrategy does, it does independently of any filter you write. So really the easier solution is shove something in the session, write  your own filter inheriting AbstractAuthenticationProcessingFilter, override attemptAuthentication to return success and you should be done."},{"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"score":0,"creation_date":1643443180,"post_id":47523645,"comment_id":125344790,"body_markdown":"When I did this ~4yrs ago I recall I looked into extending AbstractAuthenticationProcessingFilter but decided against it because I didn&#39;t feel that I could be confident I wouldnt cause a bug without first spending a lot of time studying that code and testing, both initially and when updating spring in the future. My experience is spring is complicated and not many users know it well enough to even realize their changes caused a bug, so I tread lightly and try to stick to well traveled paths when it comes to security related code. I bet it can work though, and would be more flexible.","body":"When I did this ~4yrs ago I recall I looked into extending AbstractAuthenticationProcessingFilter but decided against it because I didn&#39;t feel that I could be confident I wouldnt cause a bug without first spending a lot of time studying that code and testing, both initially and when updating spring in the future. My experience is spring is complicated and not many users know it well enough to even realize their changes caused a bug, so I tread lightly and try to stick to well traveled paths when it comes to security related code. I bet it can work though, and would be more flexible."}],"tags":[],"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"comment_count":6,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1639434979,"creation_date":1511840588,"answer_id":47523645,"question_id":47233187,"body_markdown":"I wanted to elaborate on how I implemented the advice of [dur](https://stackoverflow.com/users/5277820/dur). In my scenario, I only used a custom `AuthenticationProvider`.\r\nInstead of creating a custom servlet `Filter`, such as extending `AbstractAuthenticationProcessingFilter`, which seemed like a lot of work, I choose to instead use the following strategy:\r\n\r\n - At the point in my code where I was confident that I had identified the user, and wanted them to be &quot;logged in&quot;, I stuck a flag in the user&#39;s session, marking that they should be logged in on the next request, along with any other identity/bookkeeping info I needed, such as their username.\r\n - Then, I told the browser client to make an http post to the `loginProcessingUrl` (the same one I configured spring security to use for form-based login), telling them to send the standard `username` and `password` form params, although they don&#39;t need to send real values - dummy values like `foo` are fine.\r\n - When the user makes that post request (eg to `/login`), spring will invoke my custom `AuthenticationProvider`, which will look in the user&#39;s session to check for the flag, and to gather the username. Then it will create and return an `Authentication` object, such as `PreAuthenticatedAuthenticationToken`, which identifies the user.\r\n - Spring will handle the rest. The user is now logged in.\r\n\r\nBy doing it this way, you stay within the &quot;normal&quot; way of doing logins, and so spring will still automatically:  \r\n\r\n - Call any custom success and failure handlers you configured for the form login, which is nice if you use that place to do certain things on login, like query or update a db.  \r\n - It will respect any max concurrent sessions per user settings that you may be using.  \r\n - You get to keep spring&#39;s default session fixation attack protection (changing session id upon login).  \r\n - If you set a custom session timeout, eg via `server.session.timeout` in a properties file, spring will use it. There&#39;s probably other session config attributes that are done at this time too.  \r\n - If you enabled spring&#39;s &quot;remember me&quot; functionality, it will work.\r\n - It will fire a login event, which is used for other spring components, such as storing the user&#39;s session in a `SessionRegistry`. I think the events are also used by other parts of spring, such as the actuator, and for auditing.  \r\n\r\nWhen I first tried just doing the typically recommended `SecurityContextHolder.getContext().setAuthentication(authentication)` to login my user, instead of the custom `AuthenticationProvider`, none of the above bullets were done for me, which can utterly break your app... or cause subtle security bugs - neither are good.\r\n\r\nHere&#39;s some code to help solidify what I said:\r\n\r\n    \r\nCustom AuthenticationProvider\r\n\r\n    @Component\r\n    public class AccountVerificationAuthenticationProvider implements AuthenticationProvider {\r\n    \r\n        @Autowired\r\n        private AppAuthenticatedUserService appAuthenticatedUserService;\r\n    \r\n        @Autowired\r\n        private AuthService authService;\r\n        \r\n        @Override\r\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n    \r\n            // This will look in the user&#39;s session to get their username, and to make sure the flag is set to allow login without password on this request.\r\n            UserAccount userAccount = authService.getUserAccountFromRecentAccountVerificationProcess();\r\n            if (userAccount == null) {\r\n                // Tell spring we can&#39;t process this AuthenticationProvider obj.\r\n                // Spring will continue, and try another AuthenticationProvider, if it can.\r\n                return null;\r\n            }\r\n    \r\n            // A service to create a custom UserDetails object for this user.\r\n            UserDetails appAuthenticatedUser = appAuthenticatedUserService.create(userAccount.getEmail(), &quot;&quot;, true);\r\n    \r\n            PreAuthenticatedAuthenticationToken authenticationToken = new PreAuthenticatedAuthenticationToken(appAuthenticatedUser, &quot;&quot;, appAuthenticatedUser.getAuthorities());\r\n            authenticationToken.setAuthenticated(true);\r\n        \r\n            return authenticationToken;\r\n        }\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;?&gt; authentication) {\r\n            return authentication.equals(UsernamePasswordAuthenticationToken.class);\r\n        }\r\n    \r\n    }\r\n    \r\nConfig spring security to use the provider  \r\n\r\n    // In your WebSecurityConfigurerAdapter\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class AppLoginConfig extends WebSecurityConfigurerAdapter {\r\n        @Autowired\r\n        private AccountVerificationAuthenticationProvider accountVerificationAuthenticationProvider;\r\n\r\n        @Autowired\r\n        private ActiveDirectoryLdapAuthenticationProvider activeDirectoryLdapAuthenticationProvider;\r\n        \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n            // Spring will try these auth providers in the order we register them.\r\n            // We do the accountVerificationAuthenticationProvider provider first, since it doesn&#39;t need to do any slow IO to check,\r\n            // so it&#39;s very fast. Only if this AuthenticationProvider  rejects (which means this http request is not for programmatic login), will spring then try the next AuthenticationProvider in the list.\r\n            authenticationManagerBuilder\r\n                .authenticationProvider(accountVerificationAuthenticationProvider)\r\n                // I&#39;m using ActiveDirectory / LDAP for when a user logs in via entering a user + password via the html form, but whatever you want to use here should work.\r\n                .authenticationProvider(activeDirectoryLdapAuthenticationProvider);\r\n        }\r\n        \r\n        @Override\r\n        protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n            ...\r\n        }\r\n    }","title":"spring security manual login best practice","body":"<p>I wanted to elaborate on how I implemented the advice of <a href=\"https://stackoverflow.com/users/5277820/dur\">dur</a>. In my scenario, I only used a custom <code>AuthenticationProvider</code>.\nInstead of creating a custom servlet <code>Filter</code>, such as extending <code>AbstractAuthenticationProcessingFilter</code>, which seemed like a lot of work, I choose to instead use the following strategy:</p>\n<ul>\n<li>At the point in my code where I was confident that I had identified the user, and wanted them to be &quot;logged in&quot;, I stuck a flag in the user's session, marking that they should be logged in on the next request, along with any other identity/bookkeeping info I needed, such as their username.</li>\n<li>Then, I told the browser client to make an http post to the <code>loginProcessingUrl</code> (the same one I configured spring security to use for form-based login), telling them to send the standard <code>username</code> and <code>password</code> form params, although they don't need to send real values - dummy values like <code>foo</code> are fine.</li>\n<li>When the user makes that post request (eg to <code>/login</code>), spring will invoke my custom <code>AuthenticationProvider</code>, which will look in the user's session to check for the flag, and to gather the username. Then it will create and return an <code>Authentication</code> object, such as <code>PreAuthenticatedAuthenticationToken</code>, which identifies the user.</li>\n<li>Spring will handle the rest. The user is now logged in.</li>\n</ul>\n<p>By doing it this way, you stay within the &quot;normal&quot; way of doing logins, and so spring will still automatically:</p>\n<ul>\n<li>Call any custom success and failure handlers you configured for the form login, which is nice if you use that place to do certain things on login, like query or update a db.</li>\n<li>It will respect any max concurrent sessions per user settings that you may be using.</li>\n<li>You get to keep spring's default session fixation attack protection (changing session id upon login).</li>\n<li>If you set a custom session timeout, eg via <code>server.session.timeout</code> in a properties file, spring will use it. There's probably other session config attributes that are done at this time too.</li>\n<li>If you enabled spring's &quot;remember me&quot; functionality, it will work.</li>\n<li>It will fire a login event, which is used for other spring components, such as storing the user's session in a <code>SessionRegistry</code>. I think the events are also used by other parts of spring, such as the actuator, and for auditing.</li>\n</ul>\n<p>When I first tried just doing the typically recommended <code>SecurityContextHolder.getContext().setAuthentication(authentication)</code> to login my user, instead of the custom <code>AuthenticationProvider</code>, none of the above bullets were done for me, which can utterly break your app... or cause subtle security bugs - neither are good.</p>\n<p>Here's some code to help solidify what I said:</p>\n<p>Custom AuthenticationProvider</p>\n<pre><code>@Component\npublic class AccountVerificationAuthenticationProvider implements AuthenticationProvider {\n\n    @Autowired\n    private AppAuthenticatedUserService appAuthenticatedUserService;\n\n    @Autowired\n    private AuthService authService;\n    \n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n\n        // This will look in the user's session to get their username, and to make sure the flag is set to allow login without password on this request.\n        UserAccount userAccount = authService.getUserAccountFromRecentAccountVerificationProcess();\n        if (userAccount == null) {\n            // Tell spring we can't process this AuthenticationProvider obj.\n            // Spring will continue, and try another AuthenticationProvider, if it can.\n            return null;\n        }\n\n        // A service to create a custom UserDetails object for this user.\n        UserDetails appAuthenticatedUser = appAuthenticatedUserService.create(userAccount.getEmail(), &quot;&quot;, true);\n\n        PreAuthenticatedAuthenticationToken authenticationToken = new PreAuthenticatedAuthenticationToken(appAuthenticatedUser, &quot;&quot;, appAuthenticatedUser.getAuthorities());\n        authenticationToken.setAuthenticated(true);\n    \n        return authenticationToken;\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return authentication.equals(UsernamePasswordAuthenticationToken.class);\n    }\n\n}\n</code></pre>\n<p>Config spring security to use the provider</p>\n<pre><code>// In your WebSecurityConfigurerAdapter\n@Configuration\n@EnableWebSecurity\npublic class AppLoginConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private AccountVerificationAuthenticationProvider accountVerificationAuthenticationProvider;\n\n    @Autowired\n    private ActiveDirectoryLdapAuthenticationProvider activeDirectoryLdapAuthenticationProvider;\n    \n    @Override\n    protected void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        // Spring will try these auth providers in the order we register them.\n        // We do the accountVerificationAuthenticationProvider provider first, since it doesn't need to do any slow IO to check,\n        // so it's very fast. Only if this AuthenticationProvider  rejects (which means this http request is not for programmatic login), will spring then try the next AuthenticationProvider in the list.\n        authenticationManagerBuilder\n            .authenticationProvider(accountVerificationAuthenticationProvider)\n            // I'm using ActiveDirectory / LDAP for when a user logs in via entering a user + password via the html form, but whatever you want to use here should work.\n            .authenticationProvider(activeDirectoryLdapAuthenticationProvider);\n    }\n    \n    @Override\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\n        ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1455702,"reputation":15684,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682294082,"creation_date":1682294082,"answer_id":76087811,"question_id":47233187,"body_markdown":"Here is an example showing how to extend `UsernamePasswordAuthenticationFilter` (or its parent `AbstractAuthenticationProcessingFilter`). This example disables the URL redirect functionality; but it could be customized in other ways or left in place. The remaining Spring features mentioned in the OP&#39;s answer are left untouched (handlers, sessions, events, remember-me, etc.) so their functionality isn&#39;t lost by simply manipulating the `SecurityContext` directly.\r\n\r\n    public class UserNamePasswordHeaderFilter extends UsernamePasswordAuthenticationFilter {\r\n    \r\n        public UserNamePasswordHeaderFilter(RequestMatcher matcher, AuthenticationManager manager) {\r\n            super(manager);\r\n            setRequiresAuthenticationRequestMatcher(matcher);\r\n            setPostOnly(false);\r\n            setAuthenticationSuccessHandler(successHandler());\r\n        }\r\n    \r\n        private AuthenticationSuccessHandler successHandler() {\r\n            var successHandler = new SimpleUrlAuthenticationSuccessHandler();\r\n            successHandler.setRedirectStrategy((request, response, url) -&gt; {});  // No redirect.\r\n            return successHandler;\r\n        }\r\n    \r\n        @Override\r\n        protected String obtainUsername(HttpServletRequest request) {\r\n            return request.getHeader(SPRING_SECURITY_FORM_USERNAME_KEY);\r\n        }\r\n    \r\n        @Override\r\n        protected String obtainPassword(HttpServletRequest request) {\r\n            return request.getHeader(SPRING_SECURITY_FORM_PASSWORD_KEY);\r\n        }\r\n    \r\n        @Override\r\n        protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,\r\n                                                Authentication authResult) throws IOException, ServletException {\r\n            super.successfulAuthentication(request, response, chain, authResult);\r\n            chain.doFilter(request, response);  // Continue the chain instead of redirecting.\r\n        }\r\n    }\r\n\r\nNote the `RequestMatcher` is not required if this Filter is to be applied on all paths, but it demonstrates how different filters could be applied selectively. The `username` and `password` can be retrieved from any part of the `request`. Using headers is just for demonstration. Extending `AbstractAuthenticationProcessingFilter` would allow creating a custom `Authentication` token, still without touching the `SecurityContext`.\r\n\r\nIn Spring 5.2+ consider instantiating [AuthenticationFilter](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/AuthenticationFilter.html) instead.","title":"spring security manual login best practice","body":"<p>Here is an example showing how to extend <code>UsernamePasswordAuthenticationFilter</code> (or its parent <code>AbstractAuthenticationProcessingFilter</code>). This example disables the URL redirect functionality; but it could be customized in other ways or left in place. The remaining Spring features mentioned in the OP's answer are left untouched (handlers, sessions, events, remember-me, etc.) so their functionality isn't lost by simply manipulating the <code>SecurityContext</code> directly.</p>\n<pre><code>public class UserNamePasswordHeaderFilter extends UsernamePasswordAuthenticationFilter {\n\n    public UserNamePasswordHeaderFilter(RequestMatcher matcher, AuthenticationManager manager) {\n        super(manager);\n        setRequiresAuthenticationRequestMatcher(matcher);\n        setPostOnly(false);\n        setAuthenticationSuccessHandler(successHandler());\n    }\n\n    private AuthenticationSuccessHandler successHandler() {\n        var successHandler = new SimpleUrlAuthenticationSuccessHandler();\n        successHandler.setRedirectStrategy((request, response, url) -&gt; {});  // No redirect.\n        return successHandler;\n    }\n\n    @Override\n    protected String obtainUsername(HttpServletRequest request) {\n        return request.getHeader(SPRING_SECURITY_FORM_USERNAME_KEY);\n    }\n\n    @Override\n    protected String obtainPassword(HttpServletRequest request) {\n        return request.getHeader(SPRING_SECURITY_FORM_PASSWORD_KEY);\n    }\n\n    @Override\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,\n                                            Authentication authResult) throws IOException, ServletException {\n        super.successfulAuthentication(request, response, chain, authResult);\n        chain.doFilter(request, response);  // Continue the chain instead of redirecting.\n    }\n}\n</code></pre>\n<p>Note the <code>RequestMatcher</code> is not required if this Filter is to be applied on all paths, but it demonstrates how different filters could be applied selectively. The <code>username</code> and <code>password</code> can be retrieved from any part of the <code>request</code>. Using headers is just for demonstration. Extending <code>AbstractAuthenticationProcessingFilter</code> would allow creating a custom <code>Authentication</code> token, still without touching the <code>SecurityContext</code>.</p>\n<p>In Spring 5.2+ consider instantiating <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/AuthenticationFilter.html\" rel=\"nofollow noreferrer\">AuthenticationFilter</a> instead.</p>\n"}],"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6287,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"accepted_answer_id":47285544,"answer_count":3,"score":13,"last_activity_date":1682294082,"creation_date":1510361075,"question_id":47233187,"body_markdown":"I&#39;m using spring security to implement a programmatic, manual user login. I have a scenario where I have positively established the user&#39;s identity, and wish to log them in. I don&#39;t know their password, and so can&#39;t use the regular login code path where you submit a form to a url, which spring intercepts via a servlet `Filter`, doing all of it&#39;s auth+session magic.\r\n\r\nI&#39;ve searched, and it seems most people create their own `Authentication` object, and then tell spring about via:  \r\n\r\n    PreAuthenticatedAuthenticationToken authentication = new PreAuthenticatedAuthenticationToken(user, &quot;&quot;, user.getAuthorities());\r\n    SecurityContextHolder.getContext().setAuthentication(authentication);\r\n\r\nIndeed, this works. Spring even puts it into the session for me, making subsequent http requests maintain their auth status. \r\n\r\nHowever, I feel like this is a dirty hack. I&#39;ll present some details that I hope will give concrete examples of the problems associated with using `setAuthentication()` inside a controller to achieve a manual login:\r\n\r\nTo give an idea, my config is:\r\n\r\n\r\n\thttpSecurity\r\n\t\t.authorizeRequests()\r\n\t\t.antMatchers(&quot;/test/**&quot;).permitAll()\r\n\t\t.antMatchers(&quot;/admin/**&quot;, &quot;/api/admin/**&quot;).hasRole(&quot;USER_SUPER_ADMIN&quot;)\r\n\t\t.and()\r\n\t\t.formLogin()\r\n\t\t.loginPage(&quot;/sign-in?sp&quot;)\r\n\t\t.loginProcessingUrl(&quot;/api/auth/sign-in&quot;)\r\n\t\t.successHandler(createLoginSuccessHandler())\r\n\t\t.failureHandler(createLoginFailureHandler())\r\n\t\t.permitAll()\r\n\t\t.and()\r\n\t\t.logout()\r\n\t\t.logoutUrl(&quot;/api/auth/sign-out&quot;)\r\n\t\t.logoutSuccessHandler(createLogoutSuccessHandler())\r\n\t\t.and()\r\n\t\t.sessionManagement()\r\n\t\t.maximumSessions(1)\r\n\t\t.maxSessionsPreventsLogin(true)\r\n\t\t.sessionRegistry(sessionRegistry)\r\n\t;\r\n\r\nKey points in the above config:  \r\n - I use custom success and failure handlers for the form login  \r\n - I want to config behavior for max concurrent sessions per user  \r\n - I want to maintain spring&#39;s default session fixation protection (changing session id upon login).  \r\n - I want to use a session registry  \r\n - ... more of these session/login functionalities, had I chosen to config it.\r\n\r\nI stepped through the code to see how spring processes a form login. As expected, Spring does all the session/login functionalities that my `HttpSecurity` config told it to do when I use the form login. But, when I do my own custom/manual login via `SecurityContextHolder.getContext().setAuthentication()`, it does NONE of those functionalities. This is because spring does all of it&#39;s session/login functionalities stuff inside of a servlet `Filter`, and my programmatic code can&#39;t really call a Filter. Now, I can attempt to add the missing functionalities myself, duplicating their code: I see that the spring Filter uses: `ConcurrentSessionControlAuthenticationStrategy`, `ChangeSessionIdAuthenticationStrategy`, and `RegisterSessionAuthenticationStrategy`. I can create these objects myself, configure them, and call them after my custom login. But, that&#39;s really lame to duplicate all that spring code. Furthermore, there&#39;s still other behaviors I&#39;m missing - I noticed that when using the form login code path, that spring triggers some login events which don&#39;t get triggered when I do my custom login. And there&#39;s probably other stuff that I&#39;m missing or don&#39;t understand. The whole process is pretty complicated, and I feel like there&#39;s a high chance of introducing bugs if this isn&#39;t done right, not to mention that library updates would be a pain if I started duplicating spring code. \r\n\r\nSo, I feel like I&#39;m approaching this from the wrong way. **Should I be using a different strategy, so that I&#39;m not bypassing so much of the stuff that spring does for me?** Maybe I should try to make my own `AuthenticationProvider` to accomplish this custom login? \r\n\r\n*To clarify, my code more or less works. But, I feel like I accomplished it using a poor strategy because I had to write code duplicating a lot of stuff that spring does for me. Further, my code doesn&#39;t perfectly replicate what spring does, making me wonder what negative implications might result. There must be a better way to programatically achieve login.","title":"spring security manual login best practice","body":"<p>I'm using spring security to implement a programmatic, manual user login. I have a scenario where I have positively established the user's identity, and wish to log them in. I don't know their password, and so can't use the regular login code path where you submit a form to a url, which spring intercepts via a servlet <code>Filter</code>, doing all of it's auth+session magic.</p>\n<p>I've searched, and it seems most people create their own <code>Authentication</code> object, and then tell spring about via:</p>\n<pre><code>PreAuthenticatedAuthenticationToken authentication = new PreAuthenticatedAuthenticationToken(user, &quot;&quot;, user.getAuthorities());\nSecurityContextHolder.getContext().setAuthentication(authentication);\n</code></pre>\n<p>Indeed, this works. Spring even puts it into the session for me, making subsequent http requests maintain their auth status.</p>\n<p>However, I feel like this is a dirty hack. I'll present some details that I hope will give concrete examples of the problems associated with using <code>setAuthentication()</code> inside a controller to achieve a manual login:</p>\n<p>To give an idea, my config is:</p>\n<pre><code>httpSecurity\n    .authorizeRequests()\n    .antMatchers(&quot;/test/**&quot;).permitAll()\n    .antMatchers(&quot;/admin/**&quot;, &quot;/api/admin/**&quot;).hasRole(&quot;USER_SUPER_ADMIN&quot;)\n    .and()\n    .formLogin()\n    .loginPage(&quot;/sign-in?sp&quot;)\n    .loginProcessingUrl(&quot;/api/auth/sign-in&quot;)\n    .successHandler(createLoginSuccessHandler())\n    .failureHandler(createLoginFailureHandler())\n    .permitAll()\n    .and()\n    .logout()\n    .logoutUrl(&quot;/api/auth/sign-out&quot;)\n    .logoutSuccessHandler(createLogoutSuccessHandler())\n    .and()\n    .sessionManagement()\n    .maximumSessions(1)\n    .maxSessionsPreventsLogin(true)\n    .sessionRegistry(sessionRegistry)\n;\n</code></pre>\n<p>Key points in the above config:</p>\n<ul>\n<li>I use custom success and failure handlers for the form login</li>\n<li>I want to config behavior for max concurrent sessions per user</li>\n<li>I want to maintain spring's default session fixation protection (changing session id upon login).</li>\n<li>I want to use a session registry</li>\n<li>... more of these session/login functionalities, had I chosen to config it.</li>\n</ul>\n<p>I stepped through the code to see how spring processes a form login. As expected, Spring does all the session/login functionalities that my <code>HttpSecurity</code> config told it to do when I use the form login. But, when I do my own custom/manual login via <code>SecurityContextHolder.getContext().setAuthentication()</code>, it does NONE of those functionalities. This is because spring does all of it's session/login functionalities stuff inside of a servlet <code>Filter</code>, and my programmatic code can't really call a Filter. Now, I can attempt to add the missing functionalities myself, duplicating their code: I see that the spring Filter uses: <code>ConcurrentSessionControlAuthenticationStrategy</code>, <code>ChangeSessionIdAuthenticationStrategy</code>, and <code>RegisterSessionAuthenticationStrategy</code>. I can create these objects myself, configure them, and call them after my custom login. But, that's really lame to duplicate all that spring code. Furthermore, there's still other behaviors I'm missing - I noticed that when using the form login code path, that spring triggers some login events which don't get triggered when I do my custom login. And there's probably other stuff that I'm missing or don't understand. The whole process is pretty complicated, and I feel like there's a high chance of introducing bugs if this isn't done right, not to mention that library updates would be a pain if I started duplicating spring code.</p>\n<p>So, I feel like I'm approaching this from the wrong way. <strong>Should I be using a different strategy, so that I'm not bypassing so much of the stuff that spring does for me?</strong> Maybe I should try to make my own <code>AuthenticationProvider</code> to accomplish this custom login?</p>\n<p>*To clarify, my code more or less works. But, I feel like I accomplished it using a poor strategy because I had to write code duplicating a lot of stuff that spring does for me. Further, my code doesn't perfectly replicate what spring does, making me wonder what negative implications might result. There must be a better way to programatically achieve login.</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"answers":[{"comments":[{"owner":{"account_id":34563,"reputation":19814,"user_id":97754,"accept_rate":90,"display_name":"Margus"},"score":0,"creation_date":1408639004,"post_id":25431419,"comment_id":39675741,"body_markdown":"Not sure what browser support you need, but by changing **import org.openqa.selenium.chrome.ChromeDriver;** and **DesiredCapabilities caps = DesiredCapabilities.chrome();** you should be able to select it.","body":"Not sure what browser support you need, but by changing <b>import org.openqa.selenium.chrome.ChromeDriver;</b> and <b>DesiredCapabilities caps = DesiredCapabilities.chrome();</b> you should be able to select it."},{"owner":{"account_id":3926033,"reputation":1131,"user_id":3246489,"accept_rate":78,"display_name":"user3246489"},"score":0,"creation_date":1408639097,"post_id":25431419,"comment_id":39675794,"body_markdown":"I would be requiring for all the browsers ...thanks for this . It is definitely something which i can work with @Margus","body":"I would be requiring for all the browsers ...thanks for this . It is definitely something which i can work with @Margus"},{"owner":{"account_id":4329690,"reputation":11412,"user_id":3535537,"accept_rate":78,"display_name":"St&#233;phane GRILLON"},"score":0,"creation_date":1498572368,"post_id":25431419,"comment_id":76545494,"body_markdown":"nice solution for chrome but have you a solution for IE11?","body":"nice solution for chrome but have you a solution for IE11?"},{"owner":{"account_id":2300032,"reputation":912,"user_id":2020491,"accept_rate":52,"display_name":"user2649233"},"score":2,"creation_date":1518092683,"post_id":25431419,"comment_id":84368134,"body_markdown":"@Margus If i call `driver.manage().logs().get(&quot;browser&quot;);` multiple times with in the same driver instance, it fails to capture entries (tried refreshing driver, navigating to another url). Any thoughts or workarounds?","body":"@Margus If i call <code>driver.manage().logs().get(&quot;browser&quot;);</code> multiple times with in the same driver instance, it fails to capture entries (tried refreshing driver, navigating to another url). Any thoughts or workarounds?"},{"owner":{"account_id":13186257,"reputation":454,"user_id":9524245,"display_name":"elworthy"},"score":0,"creation_date":1549357100,"post_id":25431419,"comment_id":95862913,"body_markdown":"@user3246489 Last time I checked it wasn&#39;t supported for IE see https://github.com/SeleniumHQ/selenium/issues/4802","body":"@user3246489 Last time I checked it wasn&#39;t supported for IE see <a href=\"https://github.com/SeleniumHQ/selenium/issues/4802\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/issues/4802</a>"}],"tags":[],"owner":{"account_id":34563,"reputation":19814,"user_id":97754,"accept_rate":90,"display_name":"Margus"},"comment_count":5,"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1408638815,"creation_date":1408638815,"answer_id":25431419,"question_id":25431380,"body_markdown":"I assume it is something in the lines of:\r\n\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.logging.LogEntries;\r\n    import org.openqa.selenium.logging.LogEntry;\r\n    import org.openqa.selenium.logging.LogType;\r\n    import org.openqa.selenium.logging.LoggingPreferences;\r\n    import org.openqa.selenium.remote.CapabilityType;\r\n    import org.openqa.selenium.remote.DesiredCapabilities;\r\n    import org.testng.annotations.AfterMethod;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.Test;\r\n    \r\n    public class ChromeConsoleLogging {\r\n        private WebDriver driver;\r\n    \r\n    \r\n        @BeforeMethod\r\n        public void setUp() {\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;c:\\\\path\\\\to\\\\chromedriver.exe&quot;);        \r\n            DesiredCapabilities caps = DesiredCapabilities.chrome();\r\n            LoggingPreferences logPrefs = new LoggingPreferences();\r\n            logPrefs.enable(LogType.BROWSER, Level.ALL);\r\n            caps.setCapability(CapabilityType.LOGGING_PREFS, logPrefs);\r\n            driver = new ChromeDriver(caps);\r\n        }\r\n    \r\n        @AfterMethod\r\n        public void tearDown() {\r\n            driver.quit();\r\n        }\r\n    \r\n        public void analyzeLog() {\r\n            LogEntries logEntries = driver.manage().logs().get(LogType.BROWSER);\r\n            for (LogEntry entry : logEntries) {\r\n                System.out.println(new Date(entry.getTimestamp()) + &quot; &quot; + entry.getLevel() + &quot; &quot; + entry.getMessage());\r\n                //do something useful with the data\r\n            }\r\n        }\r\n    \r\n        @Test\r\n        public void testMethod() {\r\n            driver.get(&quot;http://mypage.com&quot;);\r\n            //do something on page\r\n            analyzeLog();\r\n        }\r\n    }\r\n\r\nSource : https://stackoverflow.com/questions/18261338/get-chromes-console-log","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>I assume it is something in the lines of:</p>\n\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.logging.LogEntries;\nimport org.openqa.selenium.logging.LogEntry;\nimport org.openqa.selenium.logging.LogType;\nimport org.openqa.selenium.logging.LoggingPreferences;\nimport org.openqa.selenium.remote.CapabilityType;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\n\npublic class ChromeConsoleLogging {\n    private WebDriver driver;\n\n\n    @BeforeMethod\n    public void setUp() {\n        System.setProperty(\"webdriver.chrome.driver\", \"c:\\\\path\\\\to\\\\chromedriver.exe\");        \n        DesiredCapabilities caps = DesiredCapabilities.chrome();\n        LoggingPreferences logPrefs = new LoggingPreferences();\n        logPrefs.enable(LogType.BROWSER, Level.ALL);\n        caps.setCapability(CapabilityType.LOGGING_PREFS, logPrefs);\n        driver = new ChromeDriver(caps);\n    }\n\n    @AfterMethod\n    public void tearDown() {\n        driver.quit();\n    }\n\n    public void analyzeLog() {\n        LogEntries logEntries = driver.manage().logs().get(LogType.BROWSER);\n        for (LogEntry entry : logEntries) {\n            System.out.println(new Date(entry.getTimestamp()) + \" \" + entry.getLevel() + \" \" + entry.getMessage());\n            //do something useful with the data\n        }\n    }\n\n    @Test\n    public void testMethod() {\n        driver.get(\"http://mypage.com\");\n        //do something on page\n        analyzeLog();\n    }\n}\n</code></pre>\n\n<p>Source : <a href=\"https://stackoverflow.com/questions/18261338/get-chromes-console-log\">Get chrome&#39;s console log</a></p>\n"},{"comments":[{"owner":{"account_id":100473,"reputation":3456,"user_id":270835,"accept_rate":80,"display_name":"Tarun"},"score":5,"creation_date":1468243831,"post_id":26488661,"comment_id":64033037,"body_markdown":"awesome, did not have to set desired capabilities and worked like charm.","body":"awesome, did not have to set desired capabilities and worked like charm."},{"owner":{"account_id":4329690,"reputation":11412,"user_id":3535537,"accept_rate":78,"display_name":"St&#233;phane GRILLON"},"score":0,"creation_date":1498572385,"post_id":26488661,"comment_id":76545506,"body_markdown":"nice solution for chrome but have you a solution for IE11?","body":"nice solution for chrome but have you a solution for IE11?"},{"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"score":0,"creation_date":1498644405,"post_id":26488661,"comment_id":76578919,"body_markdown":"IE11 WebDriver should have the same API and act similarly.","body":"IE11 WebDriver should have the same API and act similarly."},{"owner":{"account_id":2300032,"reputation":912,"user_id":2020491,"accept_rate":52,"display_name":"user2649233"},"score":3,"creation_date":1518092579,"post_id":26488661,"comment_id":84368059,"body_markdown":"@Stas If i call `driver.manage().logs().get(&quot;browser&quot;);` multiple times with in the same driver instance, it fails to capture entries (tried refreshing driver, navigating to another url). Any thoughts or workarounds?","body":"@Stas If i call <code>driver.manage().logs().get(&quot;browser&quot;);</code> multiple times with in the same driver instance, it fails to capture entries (tried refreshing driver, navigating to another url). Any thoughts or workarounds?"},{"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"score":0,"creation_date":1518092685,"post_id":26488661,"comment_id":84368137,"body_markdown":"@ManPy what WebDriver implementation (==browser), driver version &amp; language are you using?","body":"@ManPy what WebDriver implementation (==browser), driver version &amp; language are you using?"}],"tags":[],"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"comment_count":5,"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1594774285,"creation_date":1413900204,"answer_id":26488661,"question_id":25431380,"body_markdown":"In a more concise way, you can do:\r\n\r\n    LogEntries logs = driver.manage().logs().get(LogType.BROWSER);\r\n\r\nFor me it worked wonderfully for catching JS errors in console. Then you can add some verification for its size. For example, if it is &gt; 0, add some error output.","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>In a more concise way, you can do:</p>\n<pre><code>LogEntries logs = driver.manage().logs().get(LogType.BROWSER);\n</code></pre>\n<p>For me it worked wonderfully for catching JS errors in console. Then you can add some verification for its size. For example, if it is &gt; 0, add some error output.</p>\n"},{"tags":[],"owner":{"account_id":2871386,"reputation":93,"user_id":2464662,"display_name":"didinino"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1466434680,"creation_date":1466434680,"answer_id":37925681,"question_id":25431380,"body_markdown":"A less elegant solution is taking the log &#39;manually&#39; from the user data dir:\r\n\r\n 1. Set the user data dir to a fixed place:\r\n\r\n        options = new ChromeOptions();\r\n        capabilities = DesiredCapabilities.chrome();\r\n        options.addArguments(&quot;user-data-dir=/your_path/&quot;);\r\n        capabilities.setCapability(ChromeOptions.CAPABILITY, options);\r\n\r\n 2. Get the text from the log file chrome_debug.log located in the path you&#39;ve entered above.\r\n\r\nI use this method since `RemoteWebDriver` had problems getting the console logs remotely. If you run your test locally that can be easy to retrieve.","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>A less elegant solution is taking the log 'manually' from the user data dir:</p>\n\n<ol>\n<li><p>Set the user data dir to a fixed place:</p>\n\n<pre><code>options = new ChromeOptions();\ncapabilities = DesiredCapabilities.chrome();\noptions.addArguments(\"user-data-dir=/your_path/\");\ncapabilities.setCapability(ChromeOptions.CAPABILITY, options);\n</code></pre></li>\n<li><p>Get the text from the log file chrome_debug.log located in the path you've entered above.</p></li>\n</ol>\n\n<p>I use this method since <code>RemoteWebDriver</code> had problems getting the console logs remotely. If you run your test locally that can be easy to retrieve.</p>\n"},{"comments":[{"owner":{"account_id":4849570,"reputation":172,"user_id":3912255,"accept_rate":73,"display_name":"ejj"},"score":0,"creation_date":1568136431,"post_id":40940167,"comment_id":102176132,"body_markdown":"forgot semi colon on analyzeLog function","body":"forgot semi colon on analyzeLog function"},{"owner":{"account_id":958279,"reputation":531,"user_id":983184,"accept_rate":57,"display_name":"Mike Monteith"},"score":1,"creation_date":1568209824,"post_id":40940167,"comment_id":102202841,"body_markdown":"Starting from chromedriver, 75.0.3770.8, you have to use `goog:loggingPrefs` instead of `loggingPrefs`.","body":"Starting from chromedriver, 75.0.3770.8, you have to use <code>goog:loggingPrefs</code> instead of <code>loggingPrefs</code>."}],"tags":[],"owner":{"account_id":7708971,"reputation":2016,"user_id":5839007,"accept_rate":89,"display_name":"cacti5"},"comment_count":2,"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1600800698,"creation_date":1480709672,"answer_id":40940167,"question_id":25431380,"body_markdown":"As a non-java selenium user, here is the **python** equivalent to Margus&#39;s answer:\r\n\r\n\r\n    from selenium import webdriver\r\n    from selenium.webdriver.common.desired_capabilities import DesiredCapabilities    \r\n    \r\n    class ChromeConsoleLogging(object):\r\n    \r\n        def __init__(self, ):\r\n            self.driver = None\r\n    \r\n        def setUp(self, ):\r\n            desired = DesiredCapabilities.CHROME\r\n            desired [&#39;loggingPrefs&#39;] = { &#39;browser&#39;:&#39;ALL&#39; }\r\n            self.driver = webdriver.Chrome(desired_capabilities=desired)\r\n    \r\n        def analyzeLog(self, ):\r\n            data = self.driver.get_log(&#39;browser&#39;)\r\n            print(data)\r\n    \r\n        def testMethod(self, ):\r\n            self.setUp()\r\n            self.driver.get(&quot;http://mypage.com&quot;)\r\n            self.analyzeLog()\r\n\r\n[Reference][1]\r\n\r\nEdit: Keeping Python answer in this thread because it is very similar to the Java answer and this post is returned on a Google search for the similar Python question\r\n\r\n  [1]: https://stackoverflow.com/questions/20907180/getting-console-log-output-from-chrome-with-selenium-python-api-bindings\r\n","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>As a non-java selenium user, here is the <strong>python</strong> equivalent to Margus's answer:</p>\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilities    \n\nclass ChromeConsoleLogging(object):\n\n    def __init__(self, ):\n        self.driver = None\n\n    def setUp(self, ):\n        desired = DesiredCapabilities.CHROME\n        desired ['loggingPrefs'] = { 'browser':'ALL' }\n        self.driver = webdriver.Chrome(desired_capabilities=desired)\n\n    def analyzeLog(self, ):\n        data = self.driver.get_log('browser')\n        print(data)\n\n    def testMethod(self, ):\n        self.setUp()\n        self.driver.get(&quot;http://mypage.com&quot;)\n        self.analyzeLog()\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/20907180/getting-console-log-output-from-chrome-with-selenium-python-api-bindings\">Reference</a></p>\n<p>Edit: Keeping Python answer in this thread because it is very similar to the Java answer and this post is returned on a Google search for the similar Python question</p>\n"},{"tags":[],"owner":{"account_id":2611412,"reputation":2032,"user_id":2261442,"accept_rate":86,"display_name":"phk"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1548747828,"creation_date":1548747828,"answer_id":54416080,"question_id":25431380,"body_markdown":"Starting with Firefox 65 an `about:config` flag exists now so console API calls like `console.log()` land in the output stream and thus the log file (see (https://github.com/mozilla/geckodriver/issues/284#issuecomment-458305621).\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    profile = new FirefoxProfile();\r\n    profile.setPreference(&quot;devtools.console.stdout.content&quot;, true);","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Starting with Firefox 65 an <code>about:config</code> flag exists now so console API calls like <code>console.log()</code> land in the output stream and thus the log file (see (<a href=\"https://github.com/mozilla/geckodriver/issues/284#issuecomment-458305621\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckodriver/issues/284#issuecomment-458305621</a>).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>profile = new FirefoxProfile();\nprofile.setPreference(\"devtools.console.stdout.content\", true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3599900,"reputation":497,"user_id":3003424,"accept_rate":60,"display_name":"Shiv"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1583687041,"creation_date":1583687041,"answer_id":60589897,"question_id":25431380,"body_markdown":"Driver manager logs can be used to get console logs from browser and it will help to identify errors appears in console.       \r\n\r\n       import org.openqa.selenium.logging.LogEntries;\r\n       import org.openqa.selenium.logging.LogEntry;\r\n        \r\n        public List&lt;LogEntry&gt; getBrowserConsoleLogs()\r\n        {\r\n        LogEntries log= driver.manage().logs().get(&quot;browser&quot;)\r\n        List&lt;LogEntry&gt; logs=log.getAll();\r\n        return logs;\r\n        }","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Driver manager logs can be used to get console logs from browser and it will help to identify errors appears in console.       </p>\n\n<pre><code>   import org.openqa.selenium.logging.LogEntries;\n   import org.openqa.selenium.logging.LogEntry;\n\n    public List&lt;LogEntry&gt; getBrowserConsoleLogs()\n    {\n    LogEntries log= driver.manage().logs().get(\"browser\")\n    List&lt;LogEntry&gt; logs=log.getAll();\n    return logs;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3044838,"reputation":1061,"user_id":2580805,"display_name":"DerWOK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587487945,"creation_date":1587487945,"answer_id":61348813,"question_id":25431380,"body_markdown":"Before launching webdriver, we just set this environment variable to let chrome generate it:\r\n```\r\nexport CHROME_LOG_FILE=$(pwd)/tests/e2e2/logs/client.log\r\n```\r\n","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Before launching webdriver, we just set this environment variable to let chrome generate it:</p>\n\n<pre><code>export CHROME_LOG_FILE=$(pwd)/tests/e2e2/logs/client.log\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10988746,"reputation":181,"user_id":8073485,"display_name":"TechRookie"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1591891791,"creation_date":1591891791,"answer_id":62328658,"question_id":25431380,"body_markdown":"Adding LoggingPreferences to &quot;goog:loggingPrefs&quot; properties with the Chrome Driver options can help to fetch the Browser console logs for all Log levels. \r\n\r\n```\r\nChromeOptions options = new ChromeOptions();\t\r\nLoggingPreferences logPrefs = new LoggingPreferences();\r\nlogPrefs.enable(LogType.BROWSER, Level.ALL);\r\noptions.setCapability(&quot;goog:loggingPrefs&quot;, logPrefs);\r\nWebDriver driver = new ChromeDriver(options);\r\n```\r\n","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Adding LoggingPreferences to \"goog:loggingPrefs\" properties with the Chrome Driver options can help to fetch the Browser console logs for all Log levels. </p>\n\n<pre><code>ChromeOptions options = new ChromeOptions();    \nLoggingPreferences logPrefs = new LoggingPreferences();\nlogPrefs.enable(LogType.BROWSER, Level.ALL);\noptions.setCapability(\"goog:loggingPrefs\", logPrefs);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":274494,"reputation":1044,"user_id":566763,"accept_rate":60,"display_name":"RedYeti"},"score":1,"creation_date":1661522435,"post_id":62385646,"comment_id":129799003,"body_markdown":"But isn&#39;t this just logging what the driver is doing and not what is in the browser console?","body":"But isn&#39;t this just logging what the driver is doing and not what is in the browser console?"}],"tags":[],"owner":{"account_id":11961012,"reputation":7343,"user_id":8752062,"display_name":"frianH"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592214704,"creation_date":1592214704,"answer_id":62385646,"question_id":25431380,"body_markdown":"Add cast `RemoteWebDriver` to `driver` initialize and you will have the **`.setLogLevel`** method:\r\n```\r\nimport java.util.logging.Level;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.remote.RemoteWebDriver;\r\n\r\npublic class PrintLogTest {\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/.../chromedriver&quot;);\r\n\t\tWebDriver driver = new ChromeDriver();\r\n\t\t\r\n\t\t//here\r\n\t\t((RemoteWebDriver) driver).setLogLevel(Level.INFO);\r\n\t\t\r\n\t\tdriver.get(&quot;https://google.com/&quot;);\r\n\t\tdriver.findElement(By.name(&quot;q&quot;)).sendKeys(&quot;automation test&quot;);\r\n\t\tdriver.quit();\r\n\t}\r\n}\r\n```\r\nExample output:\r\n```\r\nJun 15, 2020 4:27:04 PM org.openqa.selenium.remote.RemoteWebDriver log\r\nINFO: Executing: get [430aec21a9beb6340a4185c4ea6a693d, get {url=https://google.com/}]\r\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\r\nINFO: Executed: [430aec21a9beb6340a4185c4ea6a693d, get {url=https://google.com/}]\r\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\r\nINFO: Executing: findElement [430aec21a9beb6340a4185c4ea6a693d, findElement {using=name, value=q}]\r\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\r\nINFO: Executed: [430aec21a9beb6340a4185c4ea6a693d, findElement {using=name, value=q}]\r\n...\r\n...\r\n```\r\nAt least I&#39;ve tried it on `ChromeDriver()` and `FirefoxDriver()` and it working fine.","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Add cast <code>RemoteWebDriver</code> to <code>driver</code> initialize and you will have the <strong><code>.setLogLevel</code></strong> method:</p>\n\n<pre><code>import java.util.logging.Level;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.remote.RemoteWebDriver;\n\npublic class PrintLogTest {\n    public static void main(String[] args) {\n        System.setProperty(\"webdriver.chrome.driver\", \"/Users/.../chromedriver\");\n        WebDriver driver = new ChromeDriver();\n\n        //here\n        ((RemoteWebDriver) driver).setLogLevel(Level.INFO);\n\n        driver.get(\"https://google.com/\");\n        driver.findElement(By.name(\"q\")).sendKeys(\"automation test\");\n        driver.quit();\n    }\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>Jun 15, 2020 4:27:04 PM org.openqa.selenium.remote.RemoteWebDriver log\nINFO: Executing: get [430aec21a9beb6340a4185c4ea6a693d, get {url=https://google.com/}]\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\nINFO: Executed: [430aec21a9beb6340a4185c4ea6a693d, get {url=https://google.com/}]\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\nINFO: Executing: findElement [430aec21a9beb6340a4185c4ea6a693d, findElement {using=name, value=q}]\nJun 15, 2020 4:27:06 PM org.openqa.selenium.remote.RemoteWebDriver log\nINFO: Executed: [430aec21a9beb6340a4185c4ea6a693d, findElement {using=name, value=q}]\n...\n...\n</code></pre>\n\n<p>At least I've tried it on <code>ChromeDriver()</code> and <code>FirefoxDriver()</code> and it working fine.</p>\n"},{"tags":[],"owner":{"account_id":481460,"reputation":1776,"user_id":895309,"accept_rate":85,"display_name":"Sean Glover"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682293386,"creation_date":1682293386,"answer_id":76087785,"question_id":25431380,"body_markdown":"Browser and performance logging only captures whatever is logged to the console and connection metadata in Chrome (at least, at the time of this writing). To actually get the contents of a fetch request I found some JS ([source][1]) to intercept all fetch requests and log the contents to the console which I could then access in browser logs. Total overkill, but hey it works.\r\n\r\n```javascript\r\nconst { fetch: originalFetch } = window;\r\nwindow.fetch = async (...args) =&gt; {\r\n  let [resource, config] = args;\r\n\r\n  let response = await originalFetch(resource, config);\r\n\r\n  response\r\n    .clone()\r\n    .json()\r\n    .then((data) =&gt; console.log(&quot;fetch response:&quot; + JSON.stringify(data)));\r\n\r\n  return response;\r\n};\r\n```\r\n\r\nMinified\r\n\r\n```javascript\r\nconst{fetch:originalFetch}=window;window.fetch=async(...n)=&gt;{let[t,e]=n,o=await originalFetch(t,e);return o.clone().json().then((n=&gt;console.log(&quot;fetch :&quot;+JSON.stringify(n)))),o};\r\n```\r\n\r\nUsage snippet (Scala)\r\n\r\n```scala\r\ndriver.executeScript(&quot;&quot;&quot;const{fetch:originalFetch}=window;window.fetch=async(...n)=&gt;{let[e,o]=n,t=await originalFetch(e,o);return t.clone().json().then((n=&gt;console.log(&quot;fetch response:&quot;+JSON.stringify(n)))),t};&quot;&quot;&quot;)\r\n\r\n// action that triggers the fetch\r\n\r\nval logEntry = driver.manage().logs().get(&quot;browser&quot;).iterator().asScala.filter(_.getMessage.contains(&quot;fetch response:&quot;)).toList\r\n```\r\n\r\n\r\n  [1]: https://blog.logrocket.com/intercepting-javascript-fetch-api-requests-responses/","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Browser and performance logging only captures whatever is logged to the console and connection metadata in Chrome (at least, at the time of this writing). To actually get the contents of a fetch request I found some JS (<a href=\"https://blog.logrocket.com/intercepting-javascript-fetch-api-requests-responses/\" rel=\"nofollow noreferrer\">source</a>) to intercept all fetch requests and log the contents to the console which I could then access in browser logs. Total overkill, but hey it works.</p>\n<pre class=\"lang-js prettyprint-override\"><code>const { fetch: originalFetch } = window;\nwindow.fetch = async (...args) =&gt; {\n  let [resource, config] = args;\n\n  let response = await originalFetch(resource, config);\n\n  response\n    .clone()\n    .json()\n    .then((data) =&gt; console.log(&quot;fetch response:&quot; + JSON.stringify(data)));\n\n  return response;\n};\n</code></pre>\n<p>Minified</p>\n<pre class=\"lang-js prettyprint-override\"><code>const{fetch:originalFetch}=window;window.fetch=async(...n)=&gt;{let[t,e]=n,o=await originalFetch(t,e);return o.clone().json().then((n=&gt;console.log(&quot;fetch :&quot;+JSON.stringify(n)))),o};\n</code></pre>\n<p>Usage snippet (Scala)</p>\n<pre class=\"lang-scala prettyprint-override\"><code>driver.executeScript(&quot;&quot;&quot;const{fetch:originalFetch}=window;window.fetch=async(...n)=&gt;{let[e,o]=n,t=await originalFetch(e,o);return t.clone().json().then((n=&gt;console.log(&quot;fetch response:&quot;+JSON.stringify(n)))),t};&quot;&quot;&quot;)\n\n// action that triggers the fetch\n\nval logEntry = driver.manage().logs().get(&quot;browser&quot;).iterator().asScala.filter(_.getMessage.contains(&quot;fetch response:&quot;)).toList\n</code></pre>\n"}],"owner":{"account_id":3926033,"reputation":1131,"user_id":3246489,"accept_rate":78,"display_name":"user3246489"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151183,"favorite_count":0,"down_vote_count":0,"up_vote_count":79,"accepted_answer_id":25431419,"answer_count":10,"score":79,"last_activity_date":1682293386,"creation_date":1408638635,"question_id":25431380,"body_markdown":"Is there a way to capture browser logs while running automated test cases with Selenium? I found an article on [how to capture JavaScript errors in Selenium][1]. But that is just for Firefox and only for errors. I would like to get all the console logs.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20130719045503/http://selenium.polteq.com/en/capturing-javascript-errors-with-selenium-webdriver/","title":"Capturing browser logs with Selenium WebDriver using Java","body":"<p>Is there a way to capture browser logs while running automated test cases with Selenium? I found an article on <a href=\"https://web.archive.org/web/20130719045503/http://selenium.polteq.com/en/capturing-javascript-errors-with-selenium-webdriver/\" rel=\"noreferrer\">how to capture JavaScript errors in Selenium</a>. But that is just for Firefox and only for errors. I would like to get all the console logs.</p>\n"},{"tags":["java","visual-studio-code","error-handling","compilation","vscode-code-runner"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1682267906,"post_id":76086044,"comment_id":134184855,"body_markdown":"Looks like the name of the file is not Main.java. With uppercase M.","body":"Looks like the name of the file is not Main.java. With uppercase M."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1682268331,"post_id":76086044,"comment_id":134184899,"body_markdown":"looks more like it is `tempCodeRunnerFile.java` from the error message `tempCodeRunnerFile.java:5: error: class Main is public, ...`","body":"looks more like it is <code>tempCodeRunnerFile.java</code> from the error message <code>tempCodeRunnerFile.java:5: error: class Main is public, ...</code>"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1682268903,"post_id":76086044,"comment_id":134184972,"body_markdown":"Does this answer your question? [How to avoid tempCodeRunnerFile.go appear in the project](https://stackoverflow.com/questions/63097653/how-to-avoid-tempcoderunnerfile-go-appear-in-the-project)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/63097653/how-to-avoid-tempcoderunnerfile-go-appear-in-the-project\">How to avoid tempCodeRunnerFile.go appear in the project</a>"},{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1682292428,"post_id":76086044,"comment_id":134187878,"body_markdown":"I disagree with [the proposed dup target](/q/63097653). I&#39;ve edited the question to be more clear about what the problem is, and you can see my answer, which should also indicate that the proposed dup target is incorrect.","body":"I disagree with <a href=\"/q/63097653\">the proposed dup target</a>. I&#39;ve edited the question to be more clear about what the problem is, and you can see my answer, which should also indicate that the proposed dup target is incorrect."}],"answers":[{"tags":[],"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682292367,"creation_date":1682292061,"answer_id":76087721,"question_id":76086044,"body_markdown":"It appears that you&#39;re running a selected code snippet. If you want to do that with the Code Runner extension, you&#39;ll need to adjust the `code-runner.temporaryFileName` setting to the name of your main class.\r\n\r\nThe setting&#39;s description:\r\n\r\n&gt; Temporary file name used in running selected code snippet. When it is set as empty, the file name will be random.\r\n\r\nTry editing your [workspace `.vscode/settings.json` file](https://code.visualstudio.com/docs/getstarted/settings#_settingsjson) to include the following:\r\n\r\n```json\r\n&quot;code-runner.temporaryFileName&quot;: &quot;Main&quot;\r\n```\r\n\r\nSee also [the configuration docs for the Code Runner extension](https://github.com/formulahendry/vscode-code-runner/blob/master/README.md#configuration).\r\n\r\nIf you don&#39;t want to run the selected snippet, then make sure you don&#39;t have any selected text when invoking Code Runner- either that, or put `&quot;code-runner.ignoreSelection&quot;: true` in your settings.json.","title":"Why is Code runner renaming my file to &quot;tempCodeRunnerFile.java&quot;? (causing &quot;error: class X is public, should be declared in a file named X.java&quot;)","body":"<p>It appears that you're running a selected code snippet. If you want to do that with the Code Runner extension, you'll need to adjust the <code>code-runner.temporaryFileName</code> setting to the name of your main class.</p>\n<p>The setting's description:</p>\n<blockquote>\n<p>Temporary file name used in running selected code snippet. When it is set as empty, the file name will be random.</p>\n</blockquote>\n<p>Try editing your <a href=\"https://code.visualstudio.com/docs/getstarted/settings#_settingsjson\" rel=\"nofollow noreferrer\">workspace <code>.vscode/settings.json</code> file</a> to include the following:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;code-runner.temporaryFileName&quot;: &quot;Main&quot;\n</code></pre>\n<p>See also <a href=\"https://github.com/formulahendry/vscode-code-runner/blob/master/README.md#configuration\" rel=\"nofollow noreferrer\">the configuration docs for the Code Runner extension</a>.</p>\n<p>If you don't want to run the selected snippet, then make sure you don't have any selected text when invoking Code Runner- either that, or put <code>&quot;code-runner.ignoreSelection&quot;: true</code> in your settings.json.</p>\n"}],"owner":{"account_id":23874614,"reputation":11,"user_id":17875908,"display_name":"VuciuS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682292367,"creation_date":1682267793,"question_id":76086044,"body_markdown":"I have some problems with Visual Studio Code. I am using the Code Runner extension and Java for Multithreading and Multiprocessing training... but VS Code won&#39;t run my code.\r\n\r\nImportant: The name of the file is **Main.java** , the same of the **public class Main**\r\n\r\n    import java.util.*;\r\n    \r\n    \r\n    public class Main{\r\n        public static void main(String [] args) {\r\n            PrintThread t = new PrintThread(&quot;thread1&quot;);\r\n            t.start();\r\n        }\r\n    }\r\n    \r\n    class PrintThread extends Thread {\r\n        private int sleepTime;\r\n    \r\n        public PrintThread(String name) {\r\n            super(name);\r\n            sleepTime = (int) (Math.random() * 5001);\r\n        }\r\n    \r\n        public void run() {\r\n            try {\r\n                System.err.println(getName() + &quot; going to sleep for &quot; + sleepTime + &quot;.&quot;);\r\n                Thread.sleep(sleepTime);\r\n            } catch(InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            System.err.println(getName() + &quot; done sleeping.&quot;);\r\n        }\r\n    }\r\n\r\n\r\nThis is the output:\r\n\r\n&gt; ```none\r\n&gt; tempCodeRunnerFile.java:5: error: class Main is public, should be\r\n&gt; declared in a file named Main.java public class Main{\r\n&gt;        ^ 1 error\r\n&gt; ```\r\n\r\nI tried to change different names of file and public class (same name) but it doesn&#39;t work...","title":"Why is Code runner renaming my file to &quot;tempCodeRunnerFile.java&quot;? (causing &quot;error: class X is public, should be declared in a file named X.java&quot;)","body":"<p>I have some problems with Visual Studio Code. I am using the Code Runner extension and Java for Multithreading and Multiprocessing training... but VS Code won't run my code.</p>\n<p>Important: The name of the file is <strong>Main.java</strong> , the same of the <strong>public class Main</strong></p>\n<pre><code>import java.util.*;\n\n\npublic class Main{\n    public static void main(String [] args) {\n        PrintThread t = new PrintThread(&quot;thread1&quot;);\n        t.start();\n    }\n}\n\nclass PrintThread extends Thread {\n    private int sleepTime;\n\n    public PrintThread(String name) {\n        super(name);\n        sleepTime = (int) (Math.random() * 5001);\n    }\n\n    public void run() {\n        try {\n            System.err.println(getName() + &quot; going to sleep for &quot; + sleepTime + &quot;.&quot;);\n            Thread.sleep(sleepTime);\n        } catch(InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        System.err.println(getName() + &quot; done sleeping.&quot;);\n    }\n}\n</code></pre>\n<p>This is the output:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>tempCodeRunnerFile.java:5: error: class Main is public, should be\ndeclared in a file named Main.java public class Main{\n       ^ 1 error\n</code></pre>\n</blockquote>\n<p>I tried to change different names of file and public class (same name) but it doesn't work...</p>\n"},{"tags":["java","overflow","long-integer","memoization"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1682295205,"post_id":76087717,"comment_id":134188102,"body_markdown":"Java integer arithmetic wraps around instead of throwing an overflow exception. If you need to detect overflow, use the `~Exact` methods in the [Math API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html) .","body":"Java integer arithmetic wraps around instead of throwing an overflow exception. If you need to detect overflow, use the <code>~Exact</code> methods in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html\" rel=\"nofollow noreferrer\">Math API</a> ."},{"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"score":1,"creation_date":1682296187,"post_id":76087717,"comment_id":134188182,"body_markdown":"Did you compile and run your code successfully?  `cache = new long[n + one][n + one];`, for this one, it looks impossible. In Java, array max size only could be Integer.\n\nPlease check your codes and make it run.","body":"Did you compile and run your code successfully?  <code>cache = new long[n + one][n + one];</code>, for this one, it looks impossible. In Java, array max size only could be Integer.  Please check your codes and make it run."},{"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"score":0,"creation_date":1682300861,"post_id":76087717,"comment_id":134188559,"body_markdown":"You said your code is outputting negative values as a result! But tried your exact source code in my Desktop IDE, and got the following error message:\n\n`java: incompatible types: possible lossy conversion from long to int`","body":"You said your code is outputting negative values as a result! But tried your exact source code in my Desktop IDE, and got the following error message:  <code>java: incompatible types: possible lossy conversion from long to int</code>"}],"owner":{"account_id":28391812,"reputation":1,"user_id":21717467,"display_name":"a2s4342"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682291965,"creation_date":1682291965,"question_id":76087717,"body_markdown":"I am trying to use memoization to identify when overflow occurs: But the error is not being thrown (the Runtimeexception) so is still just outputting negative values as the result \r\n```\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class combinations {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in); //scanner to take user input for n and k\r\n        while(sc.hasNextLine()){\r\n            String[] input = sc.nextLine().split(&quot; &quot;); //takes the input line and separate it into the 2 numbers\r\n            long n, k, one;\r\n            one= 1;\r\n            long[][] cache; //for bigger numbers that will lead to overflow\r\n            if(input.length==2){ //assigns the input to variables n and k \r\n                try {\r\n                    n = Long.parseLong(input[0]);\r\n                    k = Long.parseLong(input[1]);\r\n                    cache = new long[n + one][n + one];\r\n                    \r\n                } catch (Exception e) {\r\n                    // exception allowed if the input is invalid, scanner remains open so they can try again \r\n                }  \r\n\r\n                try{\r\n                    System.out.println(binomialCoefficient(n, k, cache)); //calls function to compute the answer\r\n                } catch (Exception e) {\r\n                    System.out.println(e.getMessage());\r\n                }\r\n            }\r\n        \r\n        }\r\n        sc.close();\r\n    }\r\n\r\n    //This method computes the mathematical equation\r\n    public static long binomialCoefficient(long n, long k, long[][] cache) {  \r\n        if (k == 0 || k == n) {\r\n            return cache[n][k] = 1;\r\n        } else if (cache[n][k] != 0) {\r\n            return cache[n][k];\r\n        } else {\r\n            cache[n][k] = binomialCoefficient(n-1, k-1, cache) + binomialCoefficient(n-1, k, cache);\r\n            if (cache[n][k] &lt; 0) {\r\n                System.out.println(&quot;error is caught&quot;);\r\n                throw new RuntimeException(&quot;Overflow occured&quot;);\r\n            }\r\n            return cache[n][k];\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nError message not outputting","title":"How to identify overflow error with long?","body":"<p>I am trying to use memoization to identify when overflow occurs: But the error is not being thrown (the Runtimeexception) so is still just outputting negative values as the result</p>\n<pre><code>\nimport java.util.Scanner;\n\npublic class combinations {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in); //scanner to take user input for n and k\n        while(sc.hasNextLine()){\n            String[] input = sc.nextLine().split(&quot; &quot;); //takes the input line and separate it into the 2 numbers\n            long n, k, one;\n            one= 1;\n            long[][] cache; //for bigger numbers that will lead to overflow\n            if(input.length==2){ //assigns the input to variables n and k \n                try {\n                    n = Long.parseLong(input[0]);\n                    k = Long.parseLong(input[1]);\n                    cache = new long[n + one][n + one];\n                    \n                } catch (Exception e) {\n                    // exception allowed if the input is invalid, scanner remains open so they can try again \n                }  \n\n                try{\n                    System.out.println(binomialCoefficient(n, k, cache)); //calls function to compute the answer\n                } catch (Exception e) {\n                    System.out.println(e.getMessage());\n                }\n            }\n        \n        }\n        sc.close();\n    }\n\n    //This method computes the mathematical equation\n    public static long binomialCoefficient(long n, long k, long[][] cache) {  \n        if (k == 0 || k == n) {\n            return cache[n][k] = 1;\n        } else if (cache[n][k] != 0) {\n            return cache[n][k];\n        } else {\n            cache[n][k] = binomialCoefficient(n-1, k-1, cache) + binomialCoefficient(n-1, k, cache);\n            if (cache[n][k] &lt; 0) {\n                System.out.println(&quot;error is caught&quot;);\n                throw new RuntimeException(&quot;Overflow occured&quot;);\n            }\n            return cache[n][k];\n        }\n\n    }\n\n\n}\n</code></pre>\n<p>Error message not outputting</p>\n"},{"tags":["java","spring","spring-boot","gradle"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682317992,"post_id":76087660,"comment_id":134190130,"body_markdown":"I doubt the plugins for Spring Boot 2.6 are compatible with Gradle 8. Downgrade gradle.","body":"I doubt the plugins for Spring Boot 2.6 are compatible with Gradle 8. Downgrade gradle."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1682323313,"post_id":76087660,"comment_id":134191037,"body_markdown":"Oh... thats interesting. In IntelliJ and my gradles.properties file I told gradle to be on version 6.8 I will investigate that!","body":"Oh... thats interesting. In IntelliJ and my gradles.properties file I told gradle to be on version 6.8 I will investigate that!"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682323438,"post_id":76087660,"comment_id":134191060,"body_markdown":"Well unless you are using the wrapper (`gradlew` instead of `gradle`) that is going to be ignored.","body":"Well unless you are using the wrapper (<code>gradlew</code> instead of <code>gradle</code>) that is going to be ignored."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1682324494,"post_id":76087660,"comment_id":134191295,"body_markdown":"I changed the distribution url in the gradle-wrapper.properties to math the 6.8 url: `distributionUrl=https\\://services.gradle.org/distributions/gradle-6.8-bin.zip`. Also the settings in intellij say &quot;use gradle from gradle-wrapper.properties&quot;. Therefore I thought that this was fitting, but apparently it wasnt...","body":"I changed the distribution url in the gradle-wrapper.properties to math the 6.8 url: <code>distributionUrl=https\\:&#47;&#47;services.gradle.org&#47;distributions&#47;g&zwnj;&#8203;radle-6.8-bin.zip</code>. Also the settings in intellij say &quot;use gradle from gradle-wrapper.properties&quot;. Therefore I thought that this was fitting, but apparently it wasnt..."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1682325561,"post_id":76087660,"comment_id":134191513,"body_markdown":"Executing gradlew :data-service:bootBuildImage does not throw this error, but at least proceeds to compiling and then working on the image. So this is definitely an IDE problem","body":"Executing gradlew :data-service:bootBuildImage does not throw this error, but at least proceeds to compiling and then working on the image. So this is definitely an IDE problem"},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1682329917,"post_id":76087660,"comment_id":134192458,"body_markdown":"Due to a problem with the gradle sync with my IDE it did not update the settings so it would take the downgraded gradle. I updated my IDE, therefore basically reinstalling which fixed the problem on the spot. After all, the version was just too new, so that solved my problem. Much love &lt;3","body":"Due to a problem with the gradle sync with my IDE it did not update the settings so it would take the downgraded gradle. I updated my IDE, therefore basically reinstalling which fixed the problem on the spot. After all, the version was just too new, so that solved my problem. Much love &lt;3"}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":376,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682290749,"creation_date":1682290749,"question_id":76087660,"body_markdown":"I am currently developing a multi module project. I basically have, very oversimplified, a backend and a frontend app. Both use Spring Boot 2.6.1 with Java 11. I use gradle 6.8\r\n\r\nI am currently trying to figure out how to get two images to build with the bootBuildImage tasks of the two modules. I figured it was a good starting point to get the projects to build their image separately, before building both of them at the same time. However, this does not seem to work.\r\n\r\nThis is my project setup:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI currently want to build the data-service image. This is its&#39; build.gradle.kts:\r\n\r\n```\r\nplugins {\r\n    java\r\n    id(&quot;org.springframework.boot&quot;) version &quot;2.6.1&quot;\r\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\r\n    id(&quot;net.linguica.maven-settings&quot;) version &quot;0.5&quot;\r\n}\r\n\r\ngroup = rootProject.group\r\nversion = rootProject.version\r\njava.sourceCompatibility = JavaVersion.VERSION_11\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom(configurations.annotationProcessor.get())\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven {\r\n        name = &quot;gg-repo&quot;\r\n        setUrl(&quot;CENSORED&quot;)\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation(project(&quot;:shared&quot;))\r\n\r\n\r\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.14.2&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n\r\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\r\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\r\n\r\n\r\n    implementation(&quot;mysql:mysql-connector-java&quot;)\r\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\r\n\r\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test:2.6.1&quot;)\r\n}\r\n\r\ntasks.withType&lt;Test&gt; {\r\n    useJUnitPlatform()\r\n}\r\n\r\n\r\n```\r\n\r\nAnd this is the error I get.\r\n\r\n```\r\n\r\n&gt; Task :shared:compileJava UP-TO-DATE\r\n&gt; Task :shared:processResources NO-SOURCE\r\n&gt; Task :shared:classes UP-TO-DATE\r\n&gt; Task :shared:jar UP-TO-DATE\r\n&gt; Task :data-service:compileJava UP-TO-DATE\r\n&gt; Task :data-service:processResources UP-TO-DATE\r\n&gt; Task :data-service:classes UP-TO-DATE\r\n&gt; Task :data-service:bootJarMainClassName UP-TO-DATE\r\n&gt; Task :data-service:bootJar UP-TO-DATE\r\n6 actionable tasks: 6 up-to-date\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nSome problems were found with the configuration of task &#39;:data-service:bootBuildImage&#39; (type &#39;BootBuildImage&#39;).\r\n  - In plugin &#39;org.springframework.boot&#39; type &#39;org.springframework.boot.gradle.tasks.bundling.BootBuildImage&#39; property &#39;archiveFile&#39; has @Input annotation used on property of type &#39;RegularFileProperty&#39;.\r\n    \r\n    Reason: A property of type &#39;RegularFileProperty&#39; annotated with @Input cannot determine how to interpret the file.\r\n    \r\n    Possible solutions:\r\n      1. Annotate with @InputFile for regular files.\r\n      2. Annotate with @InputFiles for collections of files.\r\n      3. If you want to track the path, return File.absolutePath as a String and keep @Input.\r\n    \r\n    Please refer to https://docs.gradle.org/8.0/userguide/validation_problems.html#incorrect_use_of_input_annotation for more details about this problem.\r\n  - In plugin &#39;org.springframework.boot&#39; type &#39;org.springframework.boot.gradle.tasks.bundling.BootBuildImage&#39; property &#39;jar&#39; has @Input annotation used on property of type &#39;RegularFileProperty&#39;.\r\n    \r\n    Reason: A property of type &#39;RegularFileProperty&#39; annotated with @Input cannot determine how to interpret the file.\r\n    \r\n    Possible solutions:\r\n      1. Annotate with @InputFile for regular files.\r\n      2. Annotate with @InputFiles for collections of files.\r\n      3. If you want to track the path, return File.absolutePath as a String and keep @Input.\r\n    \r\n    Please refer to https://docs.gradle.org/8.0/userguide/validation_problems.html#incorrect_use_of_input_annotation for more details about this problem.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 2s\r\n00:51:37: Task execution finished &#39;bootBuildImage&#39;.\r\n```\r\n\r\nI cannot find anything about this error online, so I hope you excuse the overly general title. As far as I understand the error it does not know in which file to store the image in? What is going on here?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SMQaf.png","title":"bootBuildImage fails with two spring modules in my gradle project","body":"<p>I am currently developing a multi module project. I basically have, very oversimplified, a backend and a frontend app. Both use Spring Boot 2.6.1 with Java 11. I use gradle 6.8</p>\n<p>I am currently trying to figure out how to get two images to build with the bootBuildImage tasks of the two modules. I figured it was a good starting point to get the projects to build their image separately, before building both of them at the same time. However, this does not seem to work.</p>\n<p>This is my project setup:</p>\n<p><a href=\"https://i.stack.imgur.com/SMQaf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SMQaf.png\" alt=\"enter image description here\" /></a></p>\n<p>I currently want to build the data-service image. This is its' build.gradle.kts:</p>\n<pre><code>plugins {\n    java\n    id(&quot;org.springframework.boot&quot;) version &quot;2.6.1&quot;\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\n    id(&quot;net.linguica.maven-settings&quot;) version &quot;0.5&quot;\n}\n\ngroup = rootProject.group\nversion = rootProject.version\njava.sourceCompatibility = JavaVersion.VERSION_11\n\nconfigurations {\n    compileOnly {\n        extendsFrom(configurations.annotationProcessor.get())\n    }\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        name = &quot;gg-repo&quot;\n        setUrl(&quot;CENSORED&quot;)\n    }\n}\n\ndependencies {\n    implementation(project(&quot;:shared&quot;))\n\n\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.14.2&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\n\n\n    implementation(&quot;mysql:mysql-connector-java&quot;)\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\n\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test:2.6.1&quot;)\n}\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n}\n\n\n</code></pre>\n<p>And this is the error I get.</p>\n<pre><code>\n&gt; Task :shared:compileJava UP-TO-DATE\n&gt; Task :shared:processResources NO-SOURCE\n&gt; Task :shared:classes UP-TO-DATE\n&gt; Task :shared:jar UP-TO-DATE\n&gt; Task :data-service:compileJava UP-TO-DATE\n&gt; Task :data-service:processResources UP-TO-DATE\n&gt; Task :data-service:classes UP-TO-DATE\n&gt; Task :data-service:bootJarMainClassName UP-TO-DATE\n&gt; Task :data-service:bootJar UP-TO-DATE\n6 actionable tasks: 6 up-to-date\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nSome problems were found with the configuration of task ':data-service:bootBuildImage' (type 'BootBuildImage').\n  - In plugin 'org.springframework.boot' type 'org.springframework.boot.gradle.tasks.bundling.BootBuildImage' property 'archiveFile' has @Input annotation used on property of type 'RegularFileProperty'.\n    \n    Reason: A property of type 'RegularFileProperty' annotated with @Input cannot determine how to interpret the file.\n    \n    Possible solutions:\n      1. Annotate with @InputFile for regular files.\n      2. Annotate with @InputFiles for collections of files.\n      3. If you want to track the path, return File.absolutePath as a String and keep @Input.\n    \n    Please refer to https://docs.gradle.org/8.0/userguide/validation_problems.html#incorrect_use_of_input_annotation for more details about this problem.\n  - In plugin 'org.springframework.boot' type 'org.springframework.boot.gradle.tasks.bundling.BootBuildImage' property 'jar' has @Input annotation used on property of type 'RegularFileProperty'.\n    \n    Reason: A property of type 'RegularFileProperty' annotated with @Input cannot determine how to interpret the file.\n    \n    Possible solutions:\n      1. Annotate with @InputFile for regular files.\n      2. Annotate with @InputFiles for collections of files.\n      3. If you want to track the path, return File.absolutePath as a String and keep @Input.\n    \n    Please refer to https://docs.gradle.org/8.0/userguide/validation_problems.html#incorrect_use_of_input_annotation for more details about this problem.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 2s\n00:51:37: Task execution finished 'bootBuildImage'.\n</code></pre>\n<p>I cannot find anything about this error online, so I hope you excuse the overly general title. As far as I understand the error it does not know in which file to store the image in? What is going on here?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2262713,"reputation":2217,"user_id":1992342,"accept_rate":75,"display_name":"mike47"},"score":2,"creation_date":1573680706,"post_id":57700486,"comment_id":103965465,"body_markdown":"Possible duplicate of [After migration to AndroidX, exception at start up: java.lang.ClassNotFoundException: &quot;Didn&#39;t find class androidx.core.app.CoreComponentFactory&quot;](https://stackoverflow.com/questions/56252142/after-migration-to-androidx-exception-at-start-up-java-lang-classnotfoundexcep)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/56252142/after-migration-to-androidx-exception-at-start-up-java-lang-classnotfoundexcep\">After migration to AndroidX, exception at start up: java.lang.ClassNotFoundException: &quot;Didn&#39;t find class androidx.core.app.CoreComponentFactory&quot;</a>"},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1590651282,"post_id":57700486,"comment_id":109760866,"body_markdown":"Probably it happened after upgrade of some libraries (added JUnit and updated Firebase), but after recompilation it disappeared.","body":"Probably it happened after upgrade of some libraries (added JUnit and updated Firebase), but after recompilation it disappeared."},{"owner":{"account_id":18605859,"reputation":21,"user_id":13559505,"display_name":"Abhimanyu Kumar Roy"},"score":0,"creation_date":1597643602,"post_id":57700486,"comment_id":112189231,"body_markdown":"A picture is worth of 1000 words---Here are the details solution works in my case maybe yours too-- [Before error](https://i.stack.imgur.com/vDEoZ.png) [After fix](https://i.stack.imgur.com/P7F0p.png)","body":"A picture is worth of 1000 words---Here are the details solution works in my case maybe yours too-- <a href=\"https://i.stack.imgur.com/vDEoZ.png\" rel=\"nofollow noreferrer\">Before error</a> <a href=\"https://i.stack.imgur.com/P7F0p.png\" rel=\"nofollow noreferrer\">After fix</a>"}],"answers":[{"tags":[],"owner":{"account_id":14027040,"reputation":45,"user_id":10131824,"display_name":"Mohammad Mahdi Heidari"},"comment_count":0,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1567029906,"creation_date":1567029906,"answer_id":57700593,"question_id":57700486,"body_markdown":"add below code to ```gradle.properties```\r\n\r\n```\r\nandroid.enableJetifier=true\r\nandroid.useAndroidX=true\r\n```\r\n\r\nor you can choose migrate to androidX in refactor -&gt; Migrate to androidX.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>add below code to <code>gradle.properties</code></p>\n\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n\n<p>or you can choose migrate to androidX in refactor -> Migrate to androidX.</p>\n"},{"tags":[],"owner":{"account_id":16257179,"reputation":683,"user_id":11739552,"display_name":"HeshanHH"},"comment_count":0,"down_vote_count":7,"up_vote_count":0,"is_accepted":false,"score":-7,"last_activity_date":1569079695,"creation_date":1569079695,"answer_id":58041658,"question_id":57700486,"body_markdown":"\r\ndid u create fragments?\r\nok if you create fragments with classes and after that you have to create a class to call those fragments.  and if you use switch this cane be like this\r\n\r\n`public Fragment getItem(int i) {\r\n\r\n        // you have create a switch to get positions using i.\r\n        switch (i) {\r\n            case 0:\r\n                ChatsFragment chatsFragment = new ChatsFragment();\r\n                return chatsFragment;\r\n\r\n            case 1:\r\n                GroupsFragment groupsFragment = new GroupsFragment();\r\n                return groupsFragment;\r\n\r\n            case 2:\r\n                ContactsFragment contactsFragment = new ContactsFragment();\r\n                return contactsFragment;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        return 3;//error can be happen if u use default 0, use fragment counts in here.\r\n    }`\r\n\r\nin this case you can see 3 cases in **switch**\r\nand the **public int getCount()** the return value should be **3**  *not default value 0*.\r\n\r\n\r\nSee your error must be close to this one. i got same kind of error and i solved it.\r\n ","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>did u create fragments?\nok if you create fragments with classes and after that you have to create a class to call those fragments.  and if you use switch this cane be like this</p>\n\n<p>`public Fragment getItem(int i) {</p>\n\n<pre><code>    // you have create a switch to get positions using i.\n    switch (i) {\n        case 0:\n            ChatsFragment chatsFragment = new ChatsFragment();\n            return chatsFragment;\n\n        case 1:\n            GroupsFragment groupsFragment = new GroupsFragment();\n            return groupsFragment;\n\n        case 2:\n            ContactsFragment contactsFragment = new ContactsFragment();\n            return contactsFragment;\n        default:\n            return null;\n    }\n\n}\n\n@Override\npublic int getCount() {\n    return 3;//error can be happen if u use default 0, use fragment counts in here.\n}`\n</code></pre>\n\n<p>in this case you can see 3 cases in <strong>switch</strong>\nand the <strong>public int getCount()</strong> the return value should be <strong>3</strong>  <em>not default value 0</em>.</p>\n\n<p>See your error must be close to this one. i got same kind of error and i solved it.</p>\n"},{"tags":[],"owner":{"account_id":15244208,"reputation":166,"user_id":10999505,"display_name":"Zima"},"comment_count":0,"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1569770666,"creation_date":1569770666,"answer_id":58156619,"question_id":57700486,"body_markdown":"In my case ,that was because of a little mistake in one of my layouts.\r\n\r\nI removed one `&gt;` at the end of a view tag accidentlly.\r\n\r\nCheck your \r\n\r\n&gt; xml\r\n\r\nfiles.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>In my case ,that was because of a little mistake in one of my layouts.</p>\n\n<p>I removed one <code>&gt;</code> at the end of a view tag accidentlly.</p>\n\n<p>Check your </p>\n\n<blockquote>\n  <p>xml</p>\n</blockquote>\n\n<p>files.</p>\n"},{"comments":[{"owner":{"account_id":354056,"reputation":7203,"user_id":692167,"accept_rate":84,"display_name":"Tom"},"score":0,"creation_date":1593632151,"post_id":58199483,"comment_id":110852436,"body_markdown":"This can occur with non-release builds as well so it&#39;s not the whole story","body":"This can occur with non-release builds as well so it&#39;s not the whole story"}],"tags":[],"owner":{"account_id":452040,"reputation":16772,"user_id":848253,"accept_rate":62,"display_name":"PerracoLabs"},"comment_count":1,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1570029887,"creation_date":1570011017,"answer_id":58199483,"question_id":57700486,"body_markdown":"Seems to be a bug, check the next link in the issue tracker:\r\n\r\n[https://issuetracker.google.com/issues/137646829][1]\r\n\r\n\r\n  [1]: https://issuetracker.google.com/issues/137646829\r\n\r\n\r\n","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>Seems to be a bug, check the next link in the issue tracker:</p>\n\n<p><a href=\"https://issuetracker.google.com/issues/137646829\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/137646829</a></p>\n"},{"comments":[{"owner":{"account_id":1374590,"reputation":3335,"user_id":1308850,"accept_rate":37,"display_name":"FractalBob"},"score":0,"creation_date":1574408610,"post_id":58828242,"comment_id":104230503,"body_markdown":"Unfortunately, I have to set multidex to true because of my app size.","body":"Unfortunately, I have to set multidex to true because of my app size."}],"tags":[],"owner":{"account_id":2262713,"reputation":2217,"user_id":1992342,"accept_rate":75,"display_name":"mike47"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1575835264,"creation_date":1573601654,"answer_id":58828242,"question_id":57700486,"body_markdown":"&lt;s&gt;After reviewing the Android Issue Tracker bug report mentioned previously, I saw a mention about multidex support. I had no multidex flags specified in my project, so I tried setting the flag to `false` on all modules in my project, and the exception went away.&lt;/s&gt;\r\n\r\nThis was not a permanent solution; the problem returned a few builds later.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p><s>After reviewing the Android Issue Tracker bug report mentioned previously, I saw a mention about multidex support. I had no multidex flags specified in my project, so I tried setting the flag to <code>false</code> on all modules in my project, and the exception went away.</s></p>\n\n<p>This was not a permanent solution; the problem returned a few builds later.</p>\n"},{"comments":[{"owner":{"account_id":9360863,"reputation":620,"user_id":6947235,"accept_rate":50,"display_name":"Anky An"},"score":0,"creation_date":1578447826,"post_id":59296304,"comment_id":105439027,"body_markdown":"This worked for me. For more info, check here: https://stackoverflow.com/a/52561908","body":"This worked for me. For more info, check here: <a href=\"https://stackoverflow.com/a/52561908\">stackoverflow.com/a/52561908</a>"},{"owner":{"account_id":204938,"reputation":31067,"user_id":453435,"accept_rate":83,"display_name":"Ky -"},"score":0,"creation_date":1616602140,"post_id":59296304,"comment_id":118055612,"body_markdown":"project- or app-level `build.gradle`?","body":"project- or app-level <code>build.gradle</code>?"},{"owner":{"account_id":354056,"reputation":7203,"user_id":692167,"accept_rate":84,"display_name":"Tom"},"score":2,"creation_date":1616699850,"post_id":59296304,"comment_id":118092675,"body_markdown":"Module level @Ben","body":"Module level @Ben"}],"tags":[],"owner":{"account_id":354056,"reputation":7203,"user_id":692167,"accept_rate":84,"display_name":"Tom"},"comment_count":3,"down_vote_count":3,"up_vote_count":46,"is_accepted":false,"score":43,"last_activity_date":1616776806,"creation_date":1576112731,"answer_id":59296304,"question_id":57700486,"body_markdown":"Adding Java 1.8 compatibility to my module-level `build.gradle` fixed this for me (non-release build with multidex enabled).\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &quot;1.8&quot;\r\n    }\r\n\r\nUnfortunately I&#39;m not sure why :)","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>Adding Java 1.8 compatibility to my module-level <code>build.gradle</code> fixed this for me (non-release build with multidex enabled).</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\nkotlinOptions {\n    jvmTarget = &quot;1.8&quot;\n}\n</code></pre>\n<p>Unfortunately I'm not sure why :)</p>\n"},{"comments":[{"owner":{"account_id":2506487,"reputation":1084,"user_id":2180075,"display_name":"Mohamed Hussien"},"score":0,"creation_date":1580649097,"post_id":59486127,"comment_id":106158937,"body_markdown":"Thank you, my issue is solved after adding this line","body":"Thank you, my issue is solved after adding this line"},{"owner":{"account_id":2837980,"reputation":344,"user_id":2438200,"accept_rate":75,"display_name":"Nikolay"},"score":3,"creation_date":1585577738,"post_id":59486127,"comment_id":107801705,"body_markdown":"@MohamedHussien it&#39;s not good solution, your turn off obfuscation","body":"@MohamedHussien it&#39;s not good solution, your turn off obfuscation"}],"tags":[],"owner":{"account_id":14159042,"reputation":416,"user_id":10228855,"display_name":"jack"},"comment_count":2,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1577351148,"creation_date":1577351148,"answer_id":59486127,"question_id":57700486,"body_markdown":"In my case, add `android.enableR8=false` in the gradle.properties.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>In my case, add <code>android.enableR8=false</code> in the gradle.properties.</p>\n"},{"comments":[{"owner":{"account_id":14457651,"reputation":103,"user_id":11951587,"display_name":"eytienne"},"score":1,"creation_date":1616163617,"post_id":60985688,"comment_id":117931726,"body_markdown":"It seems to have been the answer of @Tomasz but then I add to `File &gt; Sync Project with Gradle Files` to get it working. For interested ones, I found `Sync project with Gradle before building, if needed` in `Settings &gt; Build, Execution, Deployment &gt; Compiler`.","body":"It seems to have been the answer of @Tomasz but then I add to <code>File &gt; Sync Project with Gradle Files</code> to get it working. For interested ones, I found <code>Sync project with Gradle before building, if needed</code> in <code>Settings &gt; Build, Execution, Deployment &gt; Compiler</code>."}],"tags":[],"owner":{"account_id":2382250,"reputation":71,"user_id":2084029,"display_name":"Tomasz"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1609272877,"creation_date":1585810038,"answer_id":60985688,"question_id":57700486,"body_markdown":"It may sound totally unrelated, but I have seen this problem also when by mistake I have overridden wrong on Activity#onCreate() method\r\ni.e.\r\n\r\n    public void onCreate(@Nullable Bundle savedInstanceState,\r\n            @Nullable PersistableBundle persistentState)\r\n\r\nInstead of\r\n\r\n    protected void onCreate(@Nullable Bundle savedInstanceState)\r\n\r\nSo, please check that also.\r\nThe second one is the one that you probably need.\r\n\r\nPlease refer to documentation for the details of these two methods.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>It may sound totally unrelated, but I have seen this problem also when by mistake I have overridden wrong on Activity#onCreate() method\ni.e.</p>\n<pre><code>public void onCreate(@Nullable Bundle savedInstanceState,\n        @Nullable PersistableBundle persistentState)\n</code></pre>\n<p>Instead of</p>\n<pre><code>protected void onCreate(@Nullable Bundle savedInstanceState)\n</code></pre>\n<p>So, please check that also.\nThe second one is the one that you probably need.</p>\n<p>Please refer to documentation for the details of these two methods.</p>\n"},{"comments":[{"owner":{"account_id":1429897,"reputation":1292,"user_id":1359674,"accept_rate":50,"display_name":"bickster"},"score":4,"creation_date":1596294680,"post_id":61073889,"comment_id":111769133,"body_markdown":"Wow. Can&#39;t believe that solved my problem.  It&#39;s also solved the problem of the debugger disconnecting a second after it hit a breakpoint.","body":"Wow. Can&#39;t believe that solved my problem.  It&#39;s also solved the problem of the debugger disconnecting a second after it hit a breakpoint."}],"tags":[],"owner":{"account_id":3163299,"reputation":587,"user_id":2673831,"display_name":"Aguragorn"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1586240366,"creation_date":1586240366,"answer_id":61073889,"question_id":57700486,"body_markdown":"In my case, the code works on one of my teammates&#39; machine. \r\nThese steps made it work for me too:\r\n\r\n 1. Close project\r\n 2. Remove the project from the list in the welcome screen\r\n 3. Open the project again\r\n\r\nThis is a solution to another problem, that I also found here in SO. It&#39;s worth a try when **Invalidate and Restart** doesn&#39;t solve it for you.\r\n\r\n ","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>In my case, the code works on one of my teammates' machine. \nThese steps made it work for me too:</p>\n\n<ol>\n<li>Close project</li>\n<li>Remove the project from the list in the welcome screen</li>\n<li>Open the project again</li>\n</ol>\n\n<p>This is a solution to another problem, that I also found here in SO. It's worth a try when <strong>Invalidate and Restart</strong> doesn't solve it for you.</p>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592390746,"creation_date":1592390746,"answer_id":62427183,"question_id":57700486,"body_markdown":"See https://stackoverflow.com/questions/57438312/java-lang-classnotfoundexception-didnt-find-class-com-my-app-name-androidx.\r\n\r\nRemove from `AndroidManifest`:\r\n\r\n    &lt;application\r\n        ...\r\n        android:appComponentFactory=&quot;androidx&quot;\r\n        tools:replace=&quot;android:appComponentFactory&quot;\r\n    &gt;\r\n\r\nThese lines appeared a year ago after migrating to AndroidX. I removed them, now it doesn&#39;t show the exception.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>See <a href=\"https://stackoverflow.com/questions/57438312/java-lang-classnotfoundexception-didnt-find-class-com-my-app-name-androidx\">java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.my_app_name.androidx&quot;</a>.</p>\n\n<p>Remove from <code>AndroidManifest</code>:</p>\n\n<pre><code>&lt;application\n    ...\n    android:appComponentFactory=\"androidx\"\n    tools:replace=\"android:appComponentFactory\"\n&gt;\n</code></pre>\n\n<p>These lines appeared a year ago after migrating to AndroidX. I removed them, now it doesn't show the exception.</p>\n"},{"tags":[],"owner":{"account_id":11125188,"reputation":33,"user_id":8166916,"display_name":"CosminPetrescu"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1611173725,"creation_date":1611173725,"answer_id":65816972,"question_id":57700486,"body_markdown":"If you are using an emulator, try the wipe data option. This worked for me.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>If you are using an emulator, try the wipe data option. This worked for me.</p>\n"},{"comments":[{"owner":{"account_id":1930329,"reputation":371,"user_id":1739847,"display_name":"mir"},"score":2,"creation_date":1613529618,"post_id":65980047,"comment_id":117100572,"body_markdown":"Just adding the first line in the Manifest file did it for me.","body":"Just adding the first line in the Manifest file did it for me."},{"owner":{"account_id":12729,"reputation":44592,"user_id":25216,"accept_rate":71,"display_name":"Andrew Shepherd"},"score":0,"creation_date":1673853428,"post_id":65980047,"comment_id":132581709,"body_markdown":"What node in the Manifest file do we add `tools:remove` to?","body":"What node in the Manifest file do we add <code>tools:remove</code> to?"},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1673867428,"post_id":65980047,"comment_id":132585636,"body_markdown":"Think this was the `application` node.","body":"Think this was the <code>application</code> node."},{"owner":{"account_id":6445524,"reputation":473,"user_id":4994140,"display_name":"Nicu Besliu"},"score":1,"creation_date":1681451535,"post_id":65980047,"comment_id":134061313,"body_markdown":"Thank you, adding it to the &lt;application&gt; node solved the problem.","body":"Thank you, adding it to the &lt;application&gt; node solved the problem."}],"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"comment_count":4,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1612114807,"creation_date":1612102186,"answer_id":65980047,"question_id":57700486,"body_markdown":"This error message is caused on API level 28+ by:&lt;br/&gt;[`AppComponentFactory`](https://developer.android.com/reference/androidx/core/app/AppComponentFactory) `extends` [`android.app.AppComponentFactory`](https://developer.android.com/reference/android/app/AppComponentFactory.html)\r\n\r\nThis means that on API 28+ one can use `tools:remove` ... \r\n\r\n    tools:remove=&quot;android:appComponentFactory&quot;\r\n    tools:targetApi=&quot;p&quot;\r\n","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>This error message is caused on API level 28+ by:<br/><a href=\"https://developer.android.com/reference/androidx/core/app/AppComponentFactory\" rel=\"noreferrer\"><code>AppComponentFactory</code></a> <code>extends</code> <a href=\"https://developer.android.com/reference/android/app/AppComponentFactory.html\" rel=\"noreferrer\"><code>android.app.AppComponentFactory</code></a></p>\n<p>This means that on API 28+ one can use <code>tools:remove</code> ...</p>\n<pre><code>tools:remove=&quot;android:appComponentFactory&quot;\ntools:targetApi=&quot;p&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7762341,"reputation":574,"user_id":5874710,"display_name":"Carla Camargo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621863196,"creation_date":1621863196,"answer_id":67672989,"question_id":57700486,"body_markdown":"For Xamarin folks running into this problem: I started to see this problem when upgrading from Xamarin.Forms 4.x to 5.0. With AndroidX changes that I wasn&#39;t aware when I&#39;ve done the upgrade the min SDK version needs to be changed to 29 on the android manifest file, something like:\r\n`&lt;uses-sdk android:minSdkVersion=&quot;29&quot; android:targetSdkVersion=&quot;30&quot; /&gt;`","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>For Xamarin folks running into this problem: I started to see this problem when upgrading from Xamarin.Forms 4.x to 5.0. With AndroidX changes that I wasn't aware when I've done the upgrade the min SDK version needs to be changed to 29 on the android manifest file, something like:\n<code>&lt;uses-sdk android:minSdkVersion=&quot;29&quot; android:targetSdkVersion=&quot;30&quot; /&gt;</code></p>\n"},{"comments":[{"owner":{"account_id":4547088,"reputation":730,"user_id":3693328,"display_name":"JCutting8"},"score":0,"creation_date":1646250208,"post_id":68422756,"comment_id":126079385,"body_markdown":"Could you expand on why this is relevant? I think it would be quite common for classes to inherit View.OnClickListener - if so, is there a work around without having to stop inheriting this class?","body":"Could you expand on why this is relevant? I think it would be quite common for classes to inherit View.OnClickListener - if so, is there a work around without having to stop inheriting this class?"}],"tags":[],"owner":{"account_id":1301014,"reputation":8110,"user_id":1250929,"accept_rate":72,"display_name":"Kristy Welsh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626542452,"creation_date":1626542452,"answer_id":68422756,"question_id":57700486,"body_markdown":"In my case, I was using a library that has an interface that was inheriting a View.OnClickListener interface.","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>In my case, I was using a library that has an interface that was inheriting a View.OnClickListener interface.</p>\n"},{"tags":[],"owner":{"account_id":1087775,"reputation":42376,"user_id":1083093,"accept_rate":67,"display_name":"Devrath"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657645452,"creation_date":1657645452,"answer_id":72955960,"question_id":57700486,"body_markdown":"**For anyone facing the same problem in the multi-Module project:-&gt;**\r\n*In my case I had a multi-module project using the Jetpack compose for the presentation layer* \r\n\r\n 1. Just Clean the project\r\n 2. Rebuild it\r\n 3. Then again run the project\r\n\r\n","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p><strong>For anyone facing the same problem in the multi-Module project:-&gt;</strong>\n<em>In my case I had a multi-module project using the Jetpack compose for the presentation layer</em></p>\n<ol>\n<li>Just Clean the project</li>\n<li>Rebuild it</li>\n<li>Then again run the project</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8297053,"reputation":727,"user_id":6236959,"display_name":"Shubham Kumar Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669055171,"creation_date":1669055171,"answer_id":74523365,"question_id":57700486,"body_markdown":"This error can be caused due to using both ```androidx``` and ```legacy``` android support libraries\r\n\r\nJust open ```project structure``` and go to Dependencies and select ```All Modules``` and check is there any library which contains ```android.support```\r\n\r\nJust replace that with ```androidx``` version for that ```library```\r\n\r\nIn the latest versions of android studio, just REMOVE these lines if it is there inside the manifest file\r\n\r\n```\r\n&lt;application\r\n...\r\ntools:replace=&quot;android:appComponentFactory&quot;  // REMOVE THIS\r\nandroid:appComponentFactory=&quot;androidx&quot;       // REMOVE THIS\r\n&gt;\r\n```\r\n\r\nIf still there is issue check this\r\n\r\nhttps://stackoverflow.com/a/74523286/6236959","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>This error can be caused due to using both <code>androidx</code> and <code>legacy</code> android support libraries</p>\n<p>Just open <code>project structure</code> and go to Dependencies and select <code>All Modules</code> and check is there any library which contains <code>android.support</code></p>\n<p>Just replace that with <code>androidx</code> version for that <code>library</code></p>\n<p>In the latest versions of android studio, just REMOVE these lines if it is there inside the manifest file</p>\n<pre><code>&lt;application\n...\ntools:replace=&quot;android:appComponentFactory&quot;  // REMOVE THIS\nandroid:appComponentFactory=&quot;androidx&quot;       // REMOVE THIS\n&gt;\n</code></pre>\n<p>If still there is issue check this</p>\n<p><a href=\"https://stackoverflow.com/a/74523286/6236959\">https://stackoverflow.com/a/74523286/6236959</a></p>\n"},{"tags":[],"owner":{"account_id":3100197,"reputation":1792,"user_id":2624525,"accept_rate":43,"display_name":"Samad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682287532,"creation_date":1682287532,"answer_id":76087493,"question_id":57700486,"body_markdown":"in my case @AndroidEntryPoint was missing","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>in my case @AndroidEntryPoint was missing</p>\n"}],"owner":{"account_id":16572773,"reputation":939,"user_id":11975419,"display_name":"Chris911"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67002,"favorite_count":0,"down_vote_count":1,"up_vote_count":91,"answer_count":17,"score":90,"last_activity_date":1682289556,"creation_date":1567029145,"question_id":57700486,"body_markdown":"I don&#39;t know what to do about the following errors, I&#39;ve searched the web but not found anything:\r\n\r\n    java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot; on path: DexPathList[[],nativeLibraryDirectories=[/data/app/com.example.padmw-CXElJ_vfrfm3y7py3CPsJw==/lib/x86, /system/lib]]\r\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n        at android.app.LoadedApk.createAppFactory(LoadedApk.java:226)\r\n        at android.app.LoadedApk.updateApplicationInfo(LoadedApk.java:338)\r\n        at android.app.ActivityThread.handleDispatchPackageBroadcast(ActivityThread.java:5388)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1733)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:193)\r\n        at com.android.server.SystemServer.run(SystemServer.java:454)\r\n        at com.android.server.SystemServer.main(SystemServer.java:294)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)\r\n\r\nand :\r\n\r\n    2019-08-29 00:19:24.071 1853-1853/? E/LoadedApk: Unable to instantiate appComponentFactory\r\n    java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot; on path: DexPathList[[],nativeLibraryDirectories=[/data/app/com.example.padmw-CXElJ_vfrfm3y7py3CPsJw==/lib/x86, /system/lib]]\r\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n        at android.app.LoadedApk.createAppFactory(LoadedApk.java:226)\r\n        at android.app.LoadedApk.updateApplicationInfo(LoadedApk.java:338)\r\n        at android.app.ActivityThread.handleDispatchPackageBroadcast(ActivityThread.java:5388)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1733)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:193)\r\n        at com.android.server.SystemServer.run(SystemServer.java:454)\r\n        at com.android.server.SystemServer.main(SystemServer.java:294)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)\r\n\r\n\r\nmy dependencies in gradle app :\r\n\r\n    dependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &#39;androidx.appcompat:appcompat:1.0.2&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39;\r\n    implementation &#39;com.google.firebase:firebase-core:17.1.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:19.0.0&#39;\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.0.0&#39;\r\n    implementation &#39;androidx.navigation:navigation-fragment:2.0.0&#39;\r\n    implementation &#39;androidx.navigation:navigation-ui:2.0.0&#39;\r\n    implementation &#39;androidx.lifecycle:lifecycle-extensions:2.0.0&#39;\r\n    testImplementation &#39;junit:junit:4.12&#39;\r\n    androidTestImplementation &#39;androidx.test:runner:1.2.0&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.2.0&#39;\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.0.0&#39;\r\n    implementation &#39;com.squareup.picasso:picasso:2.71828&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n    implementation &#39;com.firebaseui:firebase-ui-database:1.2.0&#39;\r\n    }\r\n    apply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\n","title":"Didn&#39;t find class &quot;androidx.core.app.CoreComponentFactory&quot;","body":"<p>I don't know what to do about the following errors, I've searched the web but not found anything:</p>\n\n<pre><code>java.lang.ClassNotFoundException: Didn't find class \"androidx.core.app.CoreComponentFactory\" on path: DexPathList[[],nativeLibraryDirectories=[/data/app/com.example.padmw-CXElJ_vfrfm3y7py3CPsJw==/lib/x86, /system/lib]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    at android.app.LoadedApk.createAppFactory(LoadedApk.java:226)\n    at android.app.LoadedApk.updateApplicationInfo(LoadedApk.java:338)\n    at android.app.ActivityThread.handleDispatchPackageBroadcast(ActivityThread.java:5388)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1733)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:193)\n    at com.android.server.SystemServer.run(SystemServer.java:454)\n    at com.android.server.SystemServer.main(SystemServer.java:294)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)\n</code></pre>\n\n<p>and :</p>\n\n<pre><code>2019-08-29 00:19:24.071 1853-1853/? E/LoadedApk: Unable to instantiate appComponentFactory\njava.lang.ClassNotFoundException: Didn't find class \"androidx.core.app.CoreComponentFactory\" on path: DexPathList[[],nativeLibraryDirectories=[/data/app/com.example.padmw-CXElJ_vfrfm3y7py3CPsJw==/lib/x86, /system/lib]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    at android.app.LoadedApk.createAppFactory(LoadedApk.java:226)\n    at android.app.LoadedApk.updateApplicationInfo(LoadedApk.java:338)\n    at android.app.ActivityThread.handleDispatchPackageBroadcast(ActivityThread.java:5388)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1733)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:193)\n    at com.android.server.SystemServer.run(SystemServer.java:454)\n    at com.android.server.SystemServer.main(SystemServer.java:294)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)\n</code></pre>\n\n<p>my dependencies in gradle app :</p>\n\n<pre><code>dependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation 'androidx.appcompat:appcompat:1.0.2'\nimplementation 'androidx.constraintlayout:constraintlayout:1.1.3'\nimplementation 'com.google.firebase:firebase-core:17.1.0'\nimplementation 'com.google.firebase:firebase-database:19.0.0'\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.google.android.material:material:1.0.0'\nimplementation 'androidx.navigation:navigation-fragment:2.0.0'\nimplementation 'androidx.navigation:navigation-ui:2.0.0'\nimplementation 'androidx.lifecycle:lifecycle-extensions:2.0.0'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'androidx.test:runner:1.2.0'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\nimplementation 'androidx.recyclerview:recyclerview:1.0.0'\nimplementation 'com.squareup.picasso:picasso:2.71828'\nimplementation 'androidx.cardview:cardview:1.0.0'\nimplementation 'com.firebaseui:firebase-ui-database:1.2.0'\n}\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n"},{"tags":["java","netflix-eureka","spring-cloud-gateway"],"comments":[{"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"score":0,"creation_date":1681857032,"post_id":76049410,"comment_id":134123922,"body_markdown":"What&#39;s the path you are trying to access? Based on routes events service should be accible via a gateway with something like - http://localhost:8080/event/someurl\n\nThis would forward the /someurl to the event service provided that service has the someurl endpoint","body":"What&#39;s the path you are trying to access? Based on routes events service should be accible via a gateway with something like - <a href=\"http://localhost:8080/event/someurl\" rel=\"nofollow noreferrer\">localhost:8080/event/someurl</a>  This would forward the /someurl to the event service provided that service has the someurl endpoint"},{"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"score":0,"creation_date":1681857242,"post_id":76049410,"comment_id":134123941,"body_markdown":"Simply localhost:8080/event . EventController only has a single mapping to the empty path","body":"Simply localhost:8080/event . EventController only has a single mapping to the empty path"},{"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"score":0,"creation_date":1681857794,"post_id":76049410,"comment_id":134124021,"body_markdown":"I have edited the question to add the Controller class and the URL I&#39;m trying to hit.","body":"I have edited the question to add the Controller class and the URL I&#39;m trying to hit."},{"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"score":0,"creation_date":1681941284,"post_id":76049410,"comment_id":134139880,"body_markdown":"If localhost:8082/v1/event returns your desired output I would expect the same from gateway localhost:8080/event/v1/event to route based on your configuration.","body":"If localhost:8082/v1/event returns your desired output I would expect the same from gateway localhost:8080/event/v1/event to route based on your configuration."},{"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"score":0,"creation_date":1682284060,"post_id":76049410,"comment_id":134187066,"body_markdown":"@Dhananjay, your reply solved the mystery. localhost:8080/event/v1/event gave the expected response. Since the goal is to use the Gateway to access all services, I&#39;ll remove the paths from the Controller classes, so Event service could be accessed like localhost:8080/v1/event. Thanks for the input.","body":"@Dhananjay, your reply solved the mystery. localhost:8080/event/v1/event gave the expected response. Since the goal is to use the Gateway to access all services, I&#39;ll remove the paths from the Controller classes, so Event service could be accessed like localhost:8080/v1/event. Thanks for the input."},{"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"score":0,"creation_date":1682289133,"post_id":76049410,"comment_id":134187584,"body_markdown":"Cool, I will post this as answer","body":"Cool, I will post this as answer"}],"answers":[{"tags":[],"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682289337,"creation_date":1682289337,"answer_id":76087598,"question_id":76049410,"body_markdown":"If `localhost:8082/v1/event` returns your desired output I would expect the same from gateway `localhost:8080/event/v1/event` to route based on your configuration.\r\n\r\nThe first `/event` is your service name used by the spring cloud gateway to determine which service it needs to route. By default, the service name gets trimmed, and the `/v1/event` path along with any other request part is routed to your event service.","title":"Spring Cloud Gateway with Eureka discovery locator - 404","body":"<p>If <code>localhost:8082/v1/event</code> returns your desired output I would expect the same from gateway <code>localhost:8080/event/v1/event</code> to route based on your configuration.</p>\n<p>The first <code>/event</code> is your service name used by the spring cloud gateway to determine which service it needs to route. By default, the service name gets trimmed, and the <code>/v1/event</code> path along with any other request part is routed to your event service.</p>\n"}],"owner":{"account_id":28343732,"reputation":13,"user_id":21676292,"display_name":"rcirne"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":936,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76087598,"answer_count":1,"score":0,"last_activity_date":1682289337,"creation_date":1681855978,"question_id":76049410,"body_markdown":"I&#39;m setting up a microservices based application using Spring Cloud Gateway with Eureka discovery client.\r\n\r\nI have configured the Eureka server application, the Gateway application and a regular service.\r\n\r\nI have set spring.cloud.gateway.discovery.locator.enabled and spring.cloud.gateway.discovery.locator.lower-case-service-id to true in the Gateway application.yml file.\r\n\r\nAll three applications start correctly, however when I try to access the microservice through the Gateway I get a 404 error, sending a GET request to localhost:8080/event\r\n\r\nI have configured actuator to display the endpoints exposed by the Gateway and there is an entry for the service.\r\n\r\nWhat am I missing?\r\n\r\n\r\n# Eureka Server application.yml\r\n```\r\nspring:\r\n    application:\r\n        name: registry\r\nserver:\r\n    port: 8081\r\n\r\neureka:\r\n    client:\r\n        register-with-eureka: false\r\n        fetch-registry: false\r\n        service-url:\r\n            defaultZone: http://localhost:${server.port}/eureka/\r\n    instance:\r\n        hostname: localhost\r\n        prefer-ip-address: true\r\n```\r\n\r\n# Spring Cloud Gateway application.yml\r\n```\r\nspring:\r\n    application:\r\n        name: api-gateway\r\n    cloud:\r\n        gateway:\r\n            discovery:\r\n                locator:\r\n                    enabled: true\r\n                    lower-case-service-id: true\r\n    main:\r\n        web-application-type: reactive\r\n\r\nserver:\r\n    port: 8080\r\n\r\neureka:\r\n    client:\r\n        service-url:\r\n            defaultZone: http://localhost:8081/eureka/\r\n        fetch-registry: true\r\n        register-with-eureka: true\r\n    instance:\r\n        hostname: localhost\r\n        prefer-ip-address: true\r\n\r\nmanagement:\r\n  endpoint:\r\n    gateway:\r\n      enabled: true\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include:\r\n        - &quot;*&quot;\r\n```\r\n\r\n# Service application.yml\r\n\r\n```\r\nserver:\r\n  port: 8082\r\n\r\nspring:\r\n  application:\r\n    name: event\r\n\r\neureka:\r\n    client:\r\n        service-url:\r\n            defaultZone: http://localhost:8081/eureka/\r\n        fetch-registry: true\r\n        register-with-eureka: true\r\n    instance:\r\n        hostname: localhost\r\n        prefer-ip-address: true\r\n```\r\n\r\n\r\n\r\n\r\nI have included the required annotations on both Eureka server application and Gateway and Event service application classes. I get the following response when querying http://localhost:8080/actuator/gateway/routes:\r\n\r\n\r\n```\r\n[{&quot;predicate&quot;:&quot;Paths: [/api-gateway/**], match trailing slash: true&quot;,&quot;metadata&quot;:{&quot;jmx.port&quot;:&quot;55939&quot;,&quot;management.port&quot;:&quot;8080&quot;},&quot;route_id&quot;:&quot;ReactiveCompositeDiscoveryClient_API-GATEWAY&quot;,&quot;filters&quot;:[&quot;[[RewritePath /api-gateway/?(?&lt;remaining&gt;.*) = &#39;/${remaining}&#39;], order = 1]&quot;],&quot;uri&quot;:&quot;lb://API-GATEWAY&quot;,&quot;order&quot;:0},{&quot;predicate&quot;:&quot;Paths: [/event/**], match trailing slash: true&quot;,&quot;metadata&quot;:{&quot;jmx.port&quot;:&quot;55880&quot;,&quot;management.port&quot;:&quot;8082&quot;},&quot;route_id&quot;:&quot;ReactiveCompositeDiscoveryClient_EVENT&quot;,&quot;filters&quot;:[&quot;[[RewritePath /event/?(?&lt;remaining&gt;.*) = &#39;/${remaining}&#39;], order = 1]&quot;],&quot;uri&quot;:&quot;lb://EVENT&quot;,&quot;order&quot;:0}]\r\n```\r\n\r\n# EventController\r\n```\r\npackage example.event.endpoint.controller;\r\n\r\nimport static org.springframework.http.HttpStatus.OK;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport example.event.endpoint.service.EventService;\r\nimport example.core.model.Event;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/v1/event&quot;)\r\n@Slf4j\r\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\r\npublic class EventController {\r\n    private final EventService eventService;\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;Iterable&lt;Event&gt;&gt; listAll(Pageable pageable) {\r\n        log.info(&quot;Retrieving all events&quot;);\r\n        return new ResponseEntity&lt;&gt;(eventService.list(pageable), OK);\r\n    }\r\n}\r\n\r\n```\r\n","title":"Spring Cloud Gateway with Eureka discovery locator - 404","body":"<p>I'm setting up a microservices based application using Spring Cloud Gateway with Eureka discovery client.</p>\n<p>I have configured the Eureka server application, the Gateway application and a regular service.</p>\n<p>I have set spring.cloud.gateway.discovery.locator.enabled and spring.cloud.gateway.discovery.locator.lower-case-service-id to true in the Gateway application.yml file.</p>\n<p>All three applications start correctly, however when I try to access the microservice through the Gateway I get a 404 error, sending a GET request to localhost:8080/event</p>\n<p>I have configured actuator to display the endpoints exposed by the Gateway and there is an entry for the service.</p>\n<p>What am I missing?</p>\n<h1>Eureka Server application.yml</h1>\n<pre><code>spring:\n    application:\n        name: registry\nserver:\n    port: 8081\n\neureka:\n    client:\n        register-with-eureka: false\n        fetch-registry: false\n        service-url:\n            defaultZone: http://localhost:${server.port}/eureka/\n    instance:\n        hostname: localhost\n        prefer-ip-address: true\n</code></pre>\n<h1>Spring Cloud Gateway application.yml</h1>\n<pre><code>spring:\n    application:\n        name: api-gateway\n    cloud:\n        gateway:\n            discovery:\n                locator:\n                    enabled: true\n                    lower-case-service-id: true\n    main:\n        web-application-type: reactive\n\nserver:\n    port: 8080\n\neureka:\n    client:\n        service-url:\n            defaultZone: http://localhost:8081/eureka/\n        fetch-registry: true\n        register-with-eureka: true\n    instance:\n        hostname: localhost\n        prefer-ip-address: true\n\nmanagement:\n  endpoint:\n    gateway:\n      enabled: true\n  endpoints:\n    web:\n      exposure:\n        include:\n        - &quot;*&quot;\n</code></pre>\n<h1>Service application.yml</h1>\n<pre><code>server:\n  port: 8082\n\nspring:\n  application:\n    name: event\n\neureka:\n    client:\n        service-url:\n            defaultZone: http://localhost:8081/eureka/\n        fetch-registry: true\n        register-with-eureka: true\n    instance:\n        hostname: localhost\n        prefer-ip-address: true\n</code></pre>\n<p>I have included the required annotations on both Eureka server application and Gateway and Event service application classes. I get the following response when querying http://localhost:8080/actuator/gateway/routes:</p>\n<pre><code>[{&quot;predicate&quot;:&quot;Paths: [/api-gateway/**], match trailing slash: true&quot;,&quot;metadata&quot;:{&quot;jmx.port&quot;:&quot;55939&quot;,&quot;management.port&quot;:&quot;8080&quot;},&quot;route_id&quot;:&quot;ReactiveCompositeDiscoveryClient_API-GATEWAY&quot;,&quot;filters&quot;:[&quot;[[RewritePath /api-gateway/?(?&lt;remaining&gt;.*) = '/${remaining}'], order = 1]&quot;],&quot;uri&quot;:&quot;lb://API-GATEWAY&quot;,&quot;order&quot;:0},{&quot;predicate&quot;:&quot;Paths: [/event/**], match trailing slash: true&quot;,&quot;metadata&quot;:{&quot;jmx.port&quot;:&quot;55880&quot;,&quot;management.port&quot;:&quot;8082&quot;},&quot;route_id&quot;:&quot;ReactiveCompositeDiscoveryClient_EVENT&quot;,&quot;filters&quot;:[&quot;[[RewritePath /event/?(?&lt;remaining&gt;.*) = '/${remaining}'], order = 1]&quot;],&quot;uri&quot;:&quot;lb://EVENT&quot;,&quot;order&quot;:0}]\n</code></pre>\n<h1>EventController</h1>\n<pre><code>package example.event.endpoint.controller;\n\nimport static org.springframework.http.HttpStatus.OK;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport example.event.endpoint.service.EventService;\nimport example.core.model.Event;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\n\n@RestController\n@RequestMapping(&quot;/v1/event&quot;)\n@Slf4j\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\npublic class EventController {\n    private final EventService eventService;\n\n    @GetMapping\n    public ResponseEntity&lt;Iterable&lt;Event&gt;&gt; listAll(Pageable pageable) {\n        log.info(&quot;Retrieving all events&quot;);\n        return new ResponseEntity&lt;&gt;(eventService.list(pageable), OK);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","android","mavlink"],"owner":{"account_id":28391576,"reputation":1,"user_id":21717259,"display_name":"Cookie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682289334,"creation_date":1682289334,"question_id":76087597,"body_markdown":"Im making android app, that have to get connection with drone, subscribe to the camera and display video with the any view. Couldnt find any useful documentation for java - just this thing: https://mavsdk.mavlink.io/v1.4/en/faq.html but there is nothing about java.\r\n\r\nSo, i made two layouts: first one, that gets address and port, second one that have to display the video. There is onCreate, that inits the server. init code looks like this:\r\n\r\n```\r\nMavsdkServer server = new MavsdkServer();\r\n    private System drone;\r\n    private Camera camera;\r\n    public void initMavlink()\r\n    {\r\n        MavsdkEventQueue.executor().execute(() -&gt; {\r\n            server.run(SYSTEM_ADDRESS, MAVSDK_SERVER_PORT);\r\n            drone = new System(SYSTEM_ADDRESS, MAVSDK_SERVER_PORT);\r\n            camera = drone.getCamera();\r\n        });\r\n\r\n\r\n\r\n        Completable completable = camera.startVideoStreaming();\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    public void onTelemetryReceived(Telemetry telemetry) {\r\n     \r\n\r\n    }\r\n```\r\nNow i have no idea what to do, i cant find any method to subscribe streaming. Please, help me.\r\n\r\nthe dependencies i got:\r\n```\r\nimplementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;androidx.navigation:navigation-fragment:2.4.1&#39;\r\n    implementation &#39;androidx.navigation:navigation-ui:2.4.1&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    implementation &#39;io.mavsdk:mavsdk:1.3.1&#39;\r\n    implementation &#39;io.mavsdk:mavsdk-server:1.3.1&#39;\r\n    implementation &#39;io.dronefleet.mavlink:mavlink:1.1.11&#39;\r\n    implementation &#39;com.arthenica:mobile-ffmpeg-full:4.4&#39;\r\n```\r\n","title":"How to subscribe to the drone&#39;s camera, using Mavsdk (Java, Android)","body":"<p>Im making android app, that have to get connection with drone, subscribe to the camera and display video with the any view. Couldnt find any useful documentation for java - just this thing: <a href=\"https://mavsdk.mavlink.io/v1.4/en/faq.html\" rel=\"nofollow noreferrer\">https://mavsdk.mavlink.io/v1.4/en/faq.html</a> but there is nothing about java.</p>\n<p>So, i made two layouts: first one, that gets address and port, second one that have to display the video. There is onCreate, that inits the server. init code looks like this:</p>\n<pre><code>MavsdkServer server = new MavsdkServer();\n    private System drone;\n    private Camera camera;\n    public void initMavlink()\n    {\n        MavsdkEventQueue.executor().execute(() -&gt; {\n            server.run(SYSTEM_ADDRESS, MAVSDK_SERVER_PORT);\n            drone = new System(SYSTEM_ADDRESS, MAVSDK_SERVER_PORT);\n            camera = drone.getCamera();\n        });\n\n\n\n        Completable completable = camera.startVideoStreaming();\n\n\n\n    }\n\n\n    public void onTelemetryReceived(Telemetry telemetry) {\n     \n\n    }\n</code></pre>\n<p>Now i have no idea what to do, i cant find any method to subscribe streaming. Please, help me.</p>\n<p>the dependencies i got:</p>\n<pre><code>implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'androidx.navigation:navigation-fragment:2.4.1'\n    implementation 'androidx.navigation:navigation-ui:2.4.1'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    implementation 'io.mavsdk:mavsdk:1.3.1'\n    implementation 'io.mavsdk:mavsdk-server:1.3.1'\n    implementation 'io.dronefleet.mavlink:mavlink:1.1.11'\n    implementation 'com.arthenica:mobile-ffmpeg-full:4.4'\n</code></pre>\n"},{"tags":["java","macos","dmg","jpackage","javapackager"],"answers":[{"comments":[{"owner":{"account_id":145503,"reputation":5347,"user_id":355357,"accept_rate":100,"display_name":"eploko"},"score":0,"creation_date":1692450051,"post_id":76087592,"comment_id":135626493,"body_markdown":"One also needs to make sure to get rid of the `--icon resources/moose-app-icon.icns` command line argument to jpackage. If present, the argument will override the volume icon chosen. And, if omitted, the conventional icon file name will be used.","body":"One also needs to make sure to get rid of the <code>--icon resources&#47;moose-app-icon.icns</code> command line argument to jpackage. If present, the argument will override the volume icon chosen. And, if omitted, the conventional icon file name will be used."}],"tags":[],"owner":{"account_id":2305297,"reputation":1882,"user_id":2024692,"accept_rate":100,"display_name":"Cromax"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682289262,"creation_date":1682289262,"answer_id":76087592,"question_id":75818974,"body_markdown":"According to information on the web page you provided yourself:\r\n&gt; **macOS DMG**\r\n&gt; * DMG setup script, *application-name*-dmg-setup.scpt.\r\n&gt; * Applications license properties list, *application-name*-license.plist.\r\n&gt; * Background file, *application-name*-background.tiff.\r\n&gt; * Drive icon, *application-name*-volume.icns.\r\n\r\nSo you should use `moose.icns` for the application icon, `moose-volume.icns` for the volume icon **AND** `--name moose` as your application name (note small caps). If you choose to name your application Moose, then update icons to `Moose.icns` and `Moose-volume.icns` â it&#39;s case sensitive and it actually works for my app, but *application-name* part must match **exactly** your application name (specified by `--name` option).\r\n","title":"How can I set the MacOS DMG volume icon using Java 17&#39;s jpackage utility?","body":"<p>According to information on the web page you provided yourself:</p>\n<blockquote>\n<p><strong>macOS DMG</strong></p>\n<ul>\n<li>DMG setup script, <em>application-name</em>-dmg-setup.scpt.</li>\n<li>Applications license properties list, <em>application-name</em>-license.plist.</li>\n<li>Background file, <em>application-name</em>-background.tiff.</li>\n<li>Drive icon, <em>application-name</em>-volume.icns.</li>\n</ul>\n</blockquote>\n<p>So you should use <code>moose.icns</code> for the application icon, <code>moose-volume.icns</code> for the volume icon <strong>AND</strong> <code>--name moose</code> as your application name (note small caps). If you choose to name your application Moose, then update icons to <code>Moose.icns</code> and <code>Moose-volume.icns</code> â it's case sensitive and it actually works for my app, but <em>application-name</em> part must match <strong>exactly</strong> your application name (specified by <code>--name</code> option).</p>\n"}],"owner":{"account_id":3181638,"reputation":23,"user_id":2688193,"display_name":"mpfthprblmtq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682289262,"creation_date":1679541352,"question_id":75818974,"body_markdown":"I&#39;m creating a DMG installation package for my java application for use on OSX.  I have the following script that creates a resources directory, puts some files in it, then runs the jpackage command to actually create the DMG.  The problem is that the dmg file, when mounted, is using the app icon instead of the volume icon I have specified.\r\n\r\nHere is the script:\r\n\r\n```sh\r\n# create resource directory for jpackage\r\nprintf &quot;Creating resource directory...&quot;\r\nmkdir resources\r\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose-app-icon.icns &quot;$APP_PATH&quot;/deploy/resources/moose-app-icon.icns\r\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose180-spaced.png &quot;$APP_PATH&quot;/deploy/resources/moose-background.png\r\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose180-spaced.png &quot;$APP_PATH&quot;/deploy/resources/moose-background-darkAqua.png\r\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose-volume.icns &quot;$APP_PATH&quot;/deploy/resources/moose-volume.icns\r\necho &quot;Done.&quot;\r\n\r\n#   actually building the package\r\nprintf &quot;Building installation package...&quot;\r\n$jdk/jpackage \\\r\n  --resource-dir &quot;$APP_PATH&quot;/deploy/resources \\\r\n  --type dmg \\\r\n  --input . \\\r\n  --main-jar moose.jar \\\r\n  --name Moose \\\r\n  --app-version &quot;$version&quot; \\\r\n  --icon resources/moose-app-icon.icns \\\r\n  --description &quot;Moose&quot; \\\r\n  --verbose\r\necho &quot;Done.&quot;\r\n```\r\n\r\nAfter the first step, which moves resources around, the `&quot;$APP_PATH&quot;/deploy/resources/` directory looks like this:\r\n\r\n```\r\n/deploy\r\n  /resources\r\n    - moose-app-icon.icns\r\n    - moose-background-darkAqua.png\r\n    - moose-background.png\r\n    - moose-volume.icns\r\n```\r\n\r\nThis is the process laid out in the [jpackage documentation for JDK 17](https://docs.oracle.com/en/java/javase/17/jpackage/override-jpackage-resources.html#GUID-1B718F8B-B68D-4D46-B1DB-003D7729AAB6) under the Override jpackage Resources section.  It mentions to have a `app-name-volume.icns` file in your resource directory, which I do have (`moose-volume.icns`), but it&#39;s instead using the app icon (`moose-app-icon.icns`).\r\n\r\nWhen I use the --verbose flag in the jpackage command, I get the following output from the creation script:\r\n\r\n```\r\n[21:47:08.776] Using custom package resource [icon] (loaded from file /Users/mpfthprblmtq/Git/moose/deploy/resources/moose-app-icon.icns).\r\n[21:47:08.776] Preparing Info.plist: /var/folders/0t/hr0vs3715v15xzjpfqpmkns40000gn/T/jdk.jpackage15144647471455641486/images/image-4445575315167377480/Moose.app/Contents/Info.plist.\r\n[21:47:08.777] Using default package resource Info-lite.plist.template [Application Info.plist] (add Info.plist to the resource-dir to customize).\r\n[21:47:08.778] Using default package resource Runtime-Info.plist.template [Java Runtime Info.plist] (add Runtime-Info.plist to the resource-dir to customize).\r\n[21:47:08.779] Using default package resource background_dmg.tiff [dmg background] (add Moose-background.tiff to the resource-dir to customize).\r\n[21:47:08.779] Using custom package resource [volume icon] (loaded from file /Users/mpfthprblmtq/Git/moose/deploy/resources/moose-app-icon.icns).\r\n[21:47:08.780] Preparing dmg setup: /var/folders/0t/hr0vs3715v15xzjpfqpmkns40000gn/T/jdk.jpackage15144647471455641486/config/Moose-dmg-setup.scpt.\r\n[21:47:08.780] Using default package resource DMGsetup.scpt [DMG setup script] (add Moose-dmg-setup.scpt to the resource-dir to customize).\r\n[21:47:08.781] Creating DMG file: /Users/mpfthprblmtq/Git/moose/deploy/Moose-1.4.0.dmg.\r\n```\r\n\r\nThis tells me that jpackage is using my `moose-app-icon.icns` when I explicitly have the `moose-volume.icns` file at the same level as the main app icon.  Any ideas on how I can tell jpackage to use the `moose-volume.icns` file instead of the app icon?\r\n\r\nI am on OSX Ventura 13.2.1, and my jpackage version is 17.0.3.","title":"How can I set the MacOS DMG volume icon using Java 17&#39;s jpackage utility?","body":"<p>I'm creating a DMG installation package for my java application for use on OSX.  I have the following script that creates a resources directory, puts some files in it, then runs the jpackage command to actually create the DMG.  The problem is that the dmg file, when mounted, is using the app icon instead of the volume icon I have specified.</p>\n<p>Here is the script:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># create resource directory for jpackage\nprintf &quot;Creating resource directory...&quot;\nmkdir resources\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose-app-icon.icns &quot;$APP_PATH&quot;/deploy/resources/moose-app-icon.icns\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose180-spaced.png &quot;$APP_PATH&quot;/deploy/resources/moose-background.png\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose180-spaced.png &quot;$APP_PATH&quot;/deploy/resources/moose-background-darkAqua.png\ncp &quot;$APP_PATH&quot;/src/main/resources/img/build-resources/moose-volume.icns &quot;$APP_PATH&quot;/deploy/resources/moose-volume.icns\necho &quot;Done.&quot;\n\n#   actually building the package\nprintf &quot;Building installation package...&quot;\n$jdk/jpackage \\\n  --resource-dir &quot;$APP_PATH&quot;/deploy/resources \\\n  --type dmg \\\n  --input . \\\n  --main-jar moose.jar \\\n  --name Moose \\\n  --app-version &quot;$version&quot; \\\n  --icon resources/moose-app-icon.icns \\\n  --description &quot;Moose&quot; \\\n  --verbose\necho &quot;Done.&quot;\n</code></pre>\n<p>After the first step, which moves resources around, the <code>&quot;$APP_PATH&quot;/deploy/resources/</code> directory looks like this:</p>\n<pre><code>/deploy\n  /resources\n    - moose-app-icon.icns\n    - moose-background-darkAqua.png\n    - moose-background.png\n    - moose-volume.icns\n</code></pre>\n<p>This is the process laid out in the <a href=\"https://docs.oracle.com/en/java/javase/17/jpackage/override-jpackage-resources.html#GUID-1B718F8B-B68D-4D46-B1DB-003D7729AAB6\" rel=\"nofollow noreferrer\">jpackage documentation for JDK 17</a> under the Override jpackage Resources section.  It mentions to have a <code>app-name-volume.icns</code> file in your resource directory, which I do have (<code>moose-volume.icns</code>), but it's instead using the app icon (<code>moose-app-icon.icns</code>).</p>\n<p>When I use the --verbose flag in the jpackage command, I get the following output from the creation script:</p>\n<pre><code>[21:47:08.776] Using custom package resource [icon] (loaded from file /Users/mpfthprblmtq/Git/moose/deploy/resources/moose-app-icon.icns).\n[21:47:08.776] Preparing Info.plist: /var/folders/0t/hr0vs3715v15xzjpfqpmkns40000gn/T/jdk.jpackage15144647471455641486/images/image-4445575315167377480/Moose.app/Contents/Info.plist.\n[21:47:08.777] Using default package resource Info-lite.plist.template [Application Info.plist] (add Info.plist to the resource-dir to customize).\n[21:47:08.778] Using default package resource Runtime-Info.plist.template [Java Runtime Info.plist] (add Runtime-Info.plist to the resource-dir to customize).\n[21:47:08.779] Using default package resource background_dmg.tiff [dmg background] (add Moose-background.tiff to the resource-dir to customize).\n[21:47:08.779] Using custom package resource [volume icon] (loaded from file /Users/mpfthprblmtq/Git/moose/deploy/resources/moose-app-icon.icns).\n[21:47:08.780] Preparing dmg setup: /var/folders/0t/hr0vs3715v15xzjpfqpmkns40000gn/T/jdk.jpackage15144647471455641486/config/Moose-dmg-setup.scpt.\n[21:47:08.780] Using default package resource DMGsetup.scpt [DMG setup script] (add Moose-dmg-setup.scpt to the resource-dir to customize).\n[21:47:08.781] Creating DMG file: /Users/mpfthprblmtq/Git/moose/deploy/Moose-1.4.0.dmg.\n</code></pre>\n<p>This tells me that jpackage is using my <code>moose-app-icon.icns</code> when I explicitly have the <code>moose-volume.icns</code> file at the same level as the main app icon.  Any ideas on how I can tell jpackage to use the <code>moose-volume.icns</code> file instead of the app icon?</p>\n<p>I am on OSX Ventura 13.2.1, and my jpackage version is 17.0.3.</p>\n"},{"tags":["java","android","opengl-es","android-bitmap"],"comments":[{"owner":{"account_id":253976,"reputation":10824,"user_id":533037,"accept_rate":60,"display_name":"solidpixel"},"score":0,"creation_date":1681979704,"post_id":76057670,"comment_id":134144662,"body_markdown":"Not tried, but can you set the BitmapFactory.Options to Bitmap.Config.ALPHA_8?","body":"Not tried, but can you set the BitmapFactory.Options to Bitmap.Config.ALPHA_8?"},{"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"score":0,"creation_date":1681986742,"post_id":76057670,"comment_id":134146251,"body_markdown":"@solidpixel Did try it but it&#39;s not helping.","body":"@solidpixel Did try it but it&#39;s not helping."}],"answers":[{"tags":[],"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682091335,"creation_date":1682091335,"answer_id":76074665,"question_id":76057670,"body_markdown":"I ended up using the [PNGJ library](https://github.com/leonbloy/pngj), as follows:\r\n\r\n```\r\nimport ar.com.hjg.pngj.IImageLine;\r\nimport ar.com.hjg.pngj.ImageLineHelper;\r\nimport ar.com.hjg.pngj.PngReader;\r\n\r\npublic static Bitmap loadAlpha8Bitmap(Context context, String fileName) {\r\n    Bitmap result = null;\r\n\r\n    try {\r\n        PngReader reader = new PngReader(context.getAssets().open(fileName));\r\n\r\n        if (reader.imgInfo.channels == 3 &amp;&amp; reader.imgInfo.bitDepth == 8) {\r\n            int size = reader.imgInfo.cols * reader.imgInfo.rows;\r\n            ByteBuffer buffer = ByteBuffer.allocate(size);\r\n\r\n            for (int row = 0; row &lt; reader.imgInfo.rows; row++) {\r\n                IImageLine line = reader.readRow();\r\n\r\n                for (int col = 0; col &lt; reader.imgInfo.cols; col++) {\r\n                    int pixel = ImageLineHelper.getPixelRGB8(line, col);\r\n                    byte gray = (byte)(pixel &amp; 0x000000ff);\r\n                    buffer.put(row * reader.imgInfo.cols + col, gray);\r\n                }\r\n            }\r\n\r\n            reader.end();\r\n\r\n            result = Bitmap.createBitmap(reader.imgInfo.cols, reader.imgInfo.rows, Bitmap.Config.ALPHA_8);\r\n            result.copyPixelsFromBuffer(buffer);\r\n        }\r\n    } catch (IOException e) {}\r\n\r\n    return result;\r\n}\r\n```","title":"How to force an image to be loaded as ALPHA_8 bitmap on Android with BitmapFactory or ImageDecoder?","body":"<p>I ended up using the <a href=\"https://github.com/leonbloy/pngj\" rel=\"nofollow noreferrer\">PNGJ library</a>, as follows:</p>\n<pre><code>import ar.com.hjg.pngj.IImageLine;\nimport ar.com.hjg.pngj.ImageLineHelper;\nimport ar.com.hjg.pngj.PngReader;\n\npublic static Bitmap loadAlpha8Bitmap(Context context, String fileName) {\n    Bitmap result = null;\n\n    try {\n        PngReader reader = new PngReader(context.getAssets().open(fileName));\n\n        if (reader.imgInfo.channels == 3 &amp;&amp; reader.imgInfo.bitDepth == 8) {\n            int size = reader.imgInfo.cols * reader.imgInfo.rows;\n            ByteBuffer buffer = ByteBuffer.allocate(size);\n\n            for (int row = 0; row &lt; reader.imgInfo.rows; row++) {\n                IImageLine line = reader.readRow();\n\n                for (int col = 0; col &lt; reader.imgInfo.cols; col++) {\n                    int pixel = ImageLineHelper.getPixelRGB8(line, col);\n                    byte gray = (byte)(pixel &amp; 0x000000ff);\n                    buffer.put(row * reader.imgInfo.cols + col, gray);\n                }\n            }\n\n            reader.end();\n\n            result = Bitmap.createBitmap(reader.imgInfo.cols, reader.imgInfo.rows, Bitmap.Config.ALPHA_8);\n            result.copyPixelsFromBuffer(buffer);\n        }\n    } catch (IOException e) {}\n\n    return result;\n}\n</code></pre>\n"}],"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76074665,"answer_count":1,"score":0,"last_activity_date":1682287701,"creation_date":1681928098,"question_id":76057670,"body_markdown":"My goal is to upload a GL_ALPHA texture to the GPU and use it with OpenGL. For that, I need a bitmap in ALPHA_8 format.\r\n\r\nCurrently, I&#39;m using BitmapFactory to load a 8-bit (with grayscale palette) PNG but getConfig() says it&#39;s in ARGB_8888 format.","title":"How to force an image to be loaded as ALPHA_8 bitmap on Android with BitmapFactory or ImageDecoder?","body":"<p>My goal is to upload a GL_ALPHA texture to the GPU and use it with OpenGL. For that, I need a bitmap in ALPHA_8 format.</p>\n<p>Currently, I'm using BitmapFactory to load a 8-bit (with grayscale palette) PNG but getConfig() says it's in ARGB_8888 format.</p>\n"},{"tags":["java","android","whatsapp"],"owner":{"account_id":28232815,"reputation":1,"user_id":21581778,"display_name":"shubham Shrivastav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682287450,"creation_date":1682000981,"question_id":76065257,"body_markdown":"I want to send text with image when number is not save.\r\n\r\nThis code is open WhatsApp but not show conversion specific number that is not save in contact list:\r\n\r\n    Intent intent = new Intent(&quot;android.intent.action.MAIN&quot;);\r\n    intent.setType(&quot;image/jpeg&quot;);\r\n    intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUriArray);\r\n    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n    intent.setAction(Intent.ACTION_SEND_MULTIPLE);\r\n    intent.setType(&quot;text/plain&quot;);\r\n    intent.putExtra(Intent.EXTRA_TEXT, (Serializable) stringBuffer);\r\n    intent.putExtra(&quot;jid&quot;, &quot;91********&quot; + &quot;@s.whatsapp.net&quot;);\r\n    intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n    intent.setPackage(&quot;com.whatsapp.w4b&quot;);\r\n    startActivity(intent);\r\n\r\n\r\nPlease suggests how to send text with multiple image on specific number when  number is not save in contact list, jid work only save number but number is not save in contact jid is not working.","title":"How to send text with multiple image whatsApp without save Number android","body":"<p>I want to send text with image when number is not save.</p>\n<p>This code is open WhatsApp but not show conversion specific number that is not save in contact list:</p>\n<pre><code>Intent intent = new Intent(&quot;android.intent.action.MAIN&quot;);\nintent.setType(&quot;image/jpeg&quot;);\nintent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUriArray);\nintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\nintent.setAction(Intent.ACTION_SEND_MULTIPLE);\nintent.setType(&quot;text/plain&quot;);\nintent.putExtra(Intent.EXTRA_TEXT, (Serializable) stringBuffer);\nintent.putExtra(&quot;jid&quot;, &quot;91********&quot; + &quot;@s.whatsapp.net&quot;);\nintent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\nintent.setPackage(&quot;com.whatsapp.w4b&quot;);\nstartActivity(intent);\n</code></pre>\n<p>Please suggests how to send text with multiple image on specific number when  number is not save in contact list, jid work only save number but number is not save in contact jid is not working.</p>\n"},{"tags":["java","android","android-room"],"owner":{"account_id":28362417,"reputation":1,"user_id":21692221,"display_name":"anonimdev2001"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682287283,"creation_date":1682018886,"question_id":76067616,"body_markdown":"I have three entities (VideoModel, AudioModel, and ImageModel) that have the same logic for deleting, inserting, etc. that is, the Dao classes are identical as well as the repository. What is the recommended way to avoid so much boilerplate code when using Room database in android?\r\n\r\nThe data is always fetched at the same time, so it occurred to me that I could create an entity that wraps all the models to save them together, so it would avoid all the boilerplate code, but when I get the data I&#39;ll have to fetch it and on insert, update, etc. . I would have to wrap them.\r\n\r\n\r\n```\r\n@Entity\r\npublic class MediaWrapperEntity {\r\n    @Embedded\r\n    private VideoModel videoModel;\r\n    @Embedded\r\n    private AudioModel audioModel;\r\n    @Embedded\r\n    private ImageModel imageModel;\r\n\r\n    public VideoModel getVideoModel() {\r\n        return videoModel;\r\n    }\r\n\r\n    public void setVideoModel(VideoModel videoModel) {\r\n        this.videoModel = videoModel;\r\n    }\r\n\r\n    public AudioModel getAudioModel() {\r\n        return audioModel;\r\n    }\r\n\r\n    public void setAudioModel(AudioModel audioModel) {\r\n        this.audioModel = audioModel;\r\n    }\r\n\r\n    public ImageModel getImageModel() {\r\n        return imageModel;\r\n    }\r\n\r\n    public void setImageModel(ImageModel imageModel) {\r\n        this.imageModel = imageModel;\r\n    }\r\n}\r\n```\r\n\r\nThanks in advance :)\r\n","title":"Similar entities in room database in android","body":"<p>I have three entities (VideoModel, AudioModel, and ImageModel) that have the same logic for deleting, inserting, etc. that is, the Dao classes are identical as well as the repository. What is the recommended way to avoid so much boilerplate code when using Room database in android?</p>\n<p>The data is always fetched at the same time, so it occurred to me that I could create an entity that wraps all the models to save them together, so it would avoid all the boilerplate code, but when I get the data I'll have to fetch it and on insert, update, etc. . I would have to wrap them.</p>\n<pre><code>@Entity\npublic class MediaWrapperEntity {\n    @Embedded\n    private VideoModel videoModel;\n    @Embedded\n    private AudioModel audioModel;\n    @Embedded\n    private ImageModel imageModel;\n\n    public VideoModel getVideoModel() {\n        return videoModel;\n    }\n\n    public void setVideoModel(VideoModel videoModel) {\n        this.videoModel = videoModel;\n    }\n\n    public AudioModel getAudioModel() {\n        return audioModel;\n    }\n\n    public void setAudioModel(AudioModel audioModel) {\n        this.audioModel = audioModel;\n    }\n\n    public ImageModel getImageModel() {\n        return imageModel;\n    }\n\n    public void setImageModel(ImageModel imageModel) {\n        this.imageModel = imageModel;\n    }\n}\n</code></pre>\n<p>Thanks in advance :)</p>\n"},{"tags":["java","android"],"owner":{"account_id":2162102,"reputation":1013,"user_id":1916043,"accept_rate":71,"display_name":"Mad Eddie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682286914,"creation_date":1682067455,"question_id":76071556,"body_markdown":"I have implemented my own ConnectionService and creating an new incoming call. The code is currently not showing the caller name - just the number\r\n\r\n\r\n````\r\n@RequiresApi(api = Build.VERSION_CODES.M)\r\n    @Override\r\n    public Connection onCreateIncomingConnection(final PhoneAccountHandle connectionManagerPhoneAccount, final ConnectionRequest request) {\r\n        Context context = getApplicationContext();\r\n\r\n        NativeTelephonyConnection callConnection = new NativeTelephonyConnection(context);\r\n\r\n        var callerName = request.getExtras().getString(TelecomManager.EXTRA_CALL_BACK_NUMBER);\r\n        var callerNumber = request.getExtras().getParcelable(TelecomManager.EXTRA_INCOMING_CALL_ADDRESS);\r\n\r\n        callConnection.setConnectionProperties(Connection.CAPABILITY_HOLD | Connection.CAPABILITY_MUTE);\r\n        callConnection.setAddress(request.getAddress(), TelecomManager.PRESENTATION_ALLOWED);\r\n        callConnection.setCallerDisplayName(callerName, TelecomManager.PRESENTATION_ALLOWED);\r\n\r\n        callConnection.setInitializing();\r\n        callConnection.setActive();\r\n        return callConnection;\r\n    }\r\n````\r\n\r\nI can confirm that both the callerName and callerNumber contain strings. Is it because the contact isn&#39;t in the phone contacts?\r\n\r\nThe emulator displays this:\r\n[![Phone screen][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1ewBB.png","title":"Android Java - Show incoming caller name and number","body":"<p>I have implemented my own ConnectionService and creating an new incoming call. The code is currently not showing the caller name - just the number</p>\n<pre><code>@RequiresApi(api = Build.VERSION_CODES.M)\n    @Override\n    public Connection onCreateIncomingConnection(final PhoneAccountHandle connectionManagerPhoneAccount, final ConnectionRequest request) {\n        Context context = getApplicationContext();\n\n        NativeTelephonyConnection callConnection = new NativeTelephonyConnection(context);\n\n        var callerName = request.getExtras().getString(TelecomManager.EXTRA_CALL_BACK_NUMBER);\n        var callerNumber = request.getExtras().getParcelable(TelecomManager.EXTRA_INCOMING_CALL_ADDRESS);\n\n        callConnection.setConnectionProperties(Connection.CAPABILITY_HOLD | Connection.CAPABILITY_MUTE);\n        callConnection.setAddress(request.getAddress(), TelecomManager.PRESENTATION_ALLOWED);\n        callConnection.setCallerDisplayName(callerName, TelecomManager.PRESENTATION_ALLOWED);\n\n        callConnection.setInitializing();\n        callConnection.setActive();\n        return callConnection;\n    }\n</code></pre>\n<p>I can confirm that both the callerName and callerNumber contain strings. Is it because the contact isn't in the phone contacts?</p>\n<p>The emulator displays this:\n<a href=\"https://i.stack.imgur.com/1ewBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ewBB.png\" alt=\"Phone screen\" /></a></p>\n"},{"tags":["java","android","drawable"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":2,"creation_date":1682078046,"post_id":76072820,"comment_id":134162949,"body_markdown":"You should add more information like the whole error message, and all relevant source code in a form of minimal reproducible example. Have a look at [How do I ask a good question](https://stackoverflow.com/help/how-to-ask).","body":"You should add more information like the whole error message, and all relevant source code in a form of minimal reproducible example. Have a look at <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question</a>."},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":1,"creation_date":1682114937,"post_id":76072820,"comment_id":134170367,"body_markdown":"What type does `setBackground` take and what type is `R.drawable.add_background`? If you don&#39;t understand why that doesn&#39;t work, I would recommend you spend time learning Java by itself outside of Android.","body":"What type does <code>setBackground</code> take and what type is <code>R.drawable.add_background</code>? If you don&#39;t understand why that doesn&#39;t work, I would recommend you spend time learning Java by itself outside of Android."},{"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"score":0,"creation_date":1682115155,"post_id":76072820,"comment_id":134170392,"body_markdown":"@dominicoder it takes a `Drawable`, I&#39;m giving it an `Integer`. I don&#39;t get how the drawable file is an `Integer` and not a `Drawable`","body":"@dominicoder it takes a <code>Drawable</code>, I&#39;m giving it an <code>Integer</code>. I don&#39;t get how the drawable file is an <code>Integer</code> and not a <code>Drawable</code>"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":1,"creation_date":1682115482,"post_id":76072820,"comment_id":134170431,"body_markdown":"Have you read [the documentation](https://developer.android.com/guide/topics/resources/providing-resources) on the topic?","body":"Have you read <a href=\"https://developer.android.com/guide/topics/resources/providing-resources\" rel=\"nofollow noreferrer\">the documentation</a> on the topic?"},{"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"score":0,"creation_date":1682115578,"post_id":76072820,"comment_id":134170440,"body_markdown":"The android documentation is really hard to understand and kind of sucks in general, but it&#39;s probably worth a try.","body":"The android documentation is really hard to understand and kind of sucks in general, but it&#39;s probably worth a try."}],"answers":[{"comments":[{"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"score":0,"creation_date":1682110045,"post_id":76072900,"comment_id":134169663,"body_markdown":"I got the error of `&#39;setBackground(android.graphics.drawable.Drawable)&#39; in &#39;android.view.View&#39; cannot be applied to &#39;(int)&#39;`","body":"I got the error of <code>&#39;setBackground(android.graphics.drawable.Drawable)&#39; in &#39;android.view.View&#39; cannot be applied to &#39;(int)&#39;</code>"},{"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"score":1,"creation_date":1682190857,"post_id":76072900,"comment_id":134177572,"body_markdown":"check out [`setBackgroundResource`](https://developer.android.com/reference/android/view/View#setBackgroundResource(int))","body":"check out <a href=\"https://developer.android.com/reference/android/view/View#setBackgroundResource(int)\" rel=\"nofollow noreferrer\"><code>setBackgroundResource</code></a>"},{"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"score":0,"creation_date":1682335855,"post_id":76072900,"comment_id":134193750,"body_markdown":"I just tested this again, the reason I got that error because I didn&#39;t change `setBackground` to `setBackgroundResource`.","body":"I just tested this again, the reason I got that error because I didn&#39;t change <code>setBackground</code> to <code>setBackgroundResource</code>."}],"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682190978,"creation_date":1682077936,"answer_id":76072900,"question_id":76072820,"body_markdown":"check out this line\r\n\r\n    updateView.setBackgroundResource(R.drawable.sub_background)\r\n\r\nthats how you are referencing to resources in code, referencing by `@` is for XMLs","title":"How do I change the background of an element to a different drawable?","body":"<p>check out this line</p>\n<pre><code>updateView.setBackgroundResource(R.drawable.sub_background)\n</code></pre>\n<p>thats how you are referencing to resources in code, referencing by <code>@</code> is for XMLs</p>\n"},{"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":1,"creation_date":1682132366,"post_id":76077588,"comment_id":134171703,"body_markdown":"Good. There&#39;s also [the version that takes a drawable resource ID directly](https://developer.android.com/reference/android/view/View#setBackgroundResource(int)). Make sure to review the documentation and search for similarly named methods when trying to find the one you need.","body":"Good. There&#39;s also <a href=\"https://developer.android.com/reference/android/view/View#setBackgroundResource(int)\" rel=\"nofollow noreferrer\">the version that takes a drawable resource ID directly</a>. Make sure to review the documentation and search for similarly named methods when trying to find the one you need."}],"tags":[],"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682126543,"creation_date":1682126543,"answer_id":76077588,"question_id":76072820,"body_markdown":"While experimenting, I found the answer.\r\n\r\nI set `getResources().getDrawable(R.drawable.add_background)` to a variable called `addBackground` (same with sub), and referred to that variable in `updateView.setBackground(addBackground)`\r\n\r\nThe code now looks like this:\r\n```\r\nDrawable addBackground = getResources().getDrawable(R.drawable.add_background);\r\nDrawable subBackground = getResources().getDrawable(R.drawable.sub_background);\r\nTextView updateView = findViewById(R.id.Team1UpdateView);\r\n\r\nif (team1UpdateAmount == 0) {updateView.setVisibility(View.INVISIBLE); return;}\r\n\r\n\r\n        updateView.setVisibility(View.VISIBLE);\r\n\r\n        if (team1UpdateAmount &gt; 0) {\r\n            updateView.setText(&quot;+&quot; + team1UpdateAmount);\r\n            updateView.setBackground(addBackground);\r\n        }\r\n        if (team1UpdateAmount &lt; 0) {\r\n            updateView.setText(&quot;&quot; + team1UpdateAmount);\r\n            updateView.setBackground(subBackground);\r\n        }\r\n```","title":"How do I change the background of an element to a different drawable?","body":"<p>While experimenting, I found the answer.</p>\n<p>I set <code>getResources().getDrawable(R.drawable.add_background)</code> to a variable called <code>addBackground</code> (same with sub), and referred to that variable in <code>updateView.setBackground(addBackground)</code></p>\n<p>The code now looks like this:</p>\n<pre><code>Drawable addBackground = getResources().getDrawable(R.drawable.add_background);\nDrawable subBackground = getResources().getDrawable(R.drawable.sub_background);\nTextView updateView = findViewById(R.id.Team1UpdateView);\n\nif (team1UpdateAmount == 0) {updateView.setVisibility(View.INVISIBLE); return;}\n\n\n        updateView.setVisibility(View.VISIBLE);\n\n        if (team1UpdateAmount &gt; 0) {\n            updateView.setText(&quot;+&quot; + team1UpdateAmount);\n            updateView.setBackground(addBackground);\n        }\n        if (team1UpdateAmount &lt; 0) {\n            updateView.setText(&quot;&quot; + team1UpdateAmount);\n            updateView.setBackground(subBackground);\n        }\n</code></pre>\n"}],"owner":{"account_id":28245335,"reputation":23,"user_id":21592481,"display_name":"Speedy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76072900,"answer_count":2,"score":0,"last_activity_date":1682286698,"creation_date":1682077348,"question_id":76072820,"body_markdown":"I want to make a `textView` that turns green with a positive number, red with a negative number, and goes invisible when 0. I have two separate drawables for each background.\r\n\r\nI have changed `updateView.setDrawable(@Drawable/add_background)` to `updateView.setDrawable(R.drawable.add_background)`, and am now getting the error `&#39;setBackground(android.graphics.drawable.Drawable)&#39; in &#39;android.view.View&#39; cannot be applied to &#39;(int)&#39;`\r\n\r\nHere is the code: \r\n```\r\nInteger team1UpdateAmount = 0;\r\n\r\n\r\nTextView updateView = findViewById(R.id.team1UpdateView);\r\n    if (team1UpdateAmount == 0) {updateView.setVisibility(View.INVISIBLE); return;}\r\n\r\n    updateView.setVisibility(View.VISIBLE);\r\n\r\n    if (team1UpdateAmount &gt; 0) {\r\n        updateView.setText(&quot;+&quot; + team1UpdateAmount);\r\n        updateView.setBackground(R.drawable.add_background);\r\n    }\r\n    if (team1UpdateAmount &lt; 0) {\r\n        updateView.setText(&quot;&quot; + team1UpdateAmount);\r\n        updateView.setBackground(R.drawable.sub_background);\r\n    }\r\n```","title":"How do I change the background of an element to a different drawable?","body":"<p>I want to make a <code>textView</code> that turns green with a positive number, red with a negative number, and goes invisible when 0. I have two separate drawables for each background.</p>\n<p>I have changed <code>updateView.setDrawable(@Drawable/add_background)</code> to <code>updateView.setDrawable(R.drawable.add_background)</code>, and am now getting the error <code>'setBackground(android.graphics.drawable.Drawable)' in 'android.view.View' cannot be applied to '(int)'</code></p>\n<p>Here is the code:</p>\n<pre><code>Integer team1UpdateAmount = 0;\n\n\nTextView updateView = findViewById(R.id.team1UpdateView);\n    if (team1UpdateAmount == 0) {updateView.setVisibility(View.INVISIBLE); return;}\n\n    updateView.setVisibility(View.VISIBLE);\n\n    if (team1UpdateAmount &gt; 0) {\n        updateView.setText(&quot;+&quot; + team1UpdateAmount);\n        updateView.setBackground(R.drawable.add_background);\n    }\n    if (team1UpdateAmount &lt; 0) {\n        updateView.setText(&quot;&quot; + team1UpdateAmount);\n        updateView.setBackground(R.drawable.sub_background);\n    }\n</code></pre>\n"},{"tags":["java","generics","enums"],"answers":[{"tags":[],"owner":{"account_id":977569,"reputation":533,"user_id":998171,"display_name":"fpacifici"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1329120918,"creation_date":1329120918,"answer_id":9257327,"question_id":9257262,"body_markdown":"You cannot extend enums in java (http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html towards the end). Thus &lt;T extend Days&gt; is not possible.\r\n\r\n-IF you need your class to work only with your enum you don&#39;t need generics\r\n\r\n-if instead you need it to work with others enum (does it makes sense?) you don&#39;t need to specify the extend.\r\n\r\nWhat does exactly your State class do ?","title":"Generics using Enum in Java","body":"<p>You cannot extend enums in java (http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html towards the end). Thus  is not possible.</p>\n\n<p>-IF you need your class to work only with your enum you don't need generics</p>\n\n<p>-if instead you need it to work with others enum (does it makes sense?) you don't need to specify the extend.</p>\n\n<p>What does exactly your State class do ?</p>\n"},{"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1329135208,"post_id":9257336,"comment_id":11669796,"body_markdown":"-1 You are missing the point here. Any type is possible - it&#39;s a generic state class.","body":"-1 You are missing the point here. Any type is possible - it&#39;s a generic state class."},{"owner":{"account_id":19463,"reputation":41164,"user_id":45668,"accept_rate":88,"display_name":"Malcolm"},"score":0,"creation_date":1329136537,"post_id":9257336,"comment_id":11670247,"body_markdown":"@Bohemian No, I think it is you who misses the point. See the comment to your answer.","body":"@Bohemian No, I think it is you who misses the point. See the comment to your answer."}],"tags":[],"owner":{"account_id":928629,"reputation":3257,"user_id":958918,"accept_rate":77,"display_name":"Hachi"},"comment_count":2,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1329120948,"creation_date":1329120948,"answer_id":9257336,"question_id":9257262,"body_markdown":"enums are final types, which means, you can not extend from them\r\n\r\na generic like &lt;T extend Days&gt; wants a Class as Parameter which is Days or an extended class, but the extended class is not possible\r\n\r\nso the only parameter possible is Days and you don&#39;t need a generic, if only one value is possible","title":"Generics using Enum in Java","body":"<p>enums are final types, which means, you can not extend from them</p>\n\n<p>a generic like  wants a Class as Parameter which is Days or an extended class, but the extended class is not possible</p>\n\n<p>so the only parameter possible is Days and you don't need a generic, if only one value is possible</p>\n"},{"comments":[{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":0,"creation_date":1329138877,"post_id":9259934,"comment_id":11671068,"body_markdown":"`this.states = (S[])states.toArray();` throws a `ClassCastException`! I am working on a solution.","body":"<code>this.states = (S[])states.toArray();</code> throws a <code>ClassCastException</code>! I am working on a solution."},{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":0,"creation_date":1329139696,"post_id":9259934,"comment_id":11671402,"body_markdown":"Fixed the `ClassCastException` issue!","body":"Fixed the <code>ClassCastException</code> issue!"},{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":0,"creation_date":1441270641,"post_id":9259934,"comment_id":52613873,"body_markdown":"@FBB - Yes but once you create a `State&lt;E&gt;` you can only ever use `E` states. `set(F)` will fail at compile time because `F` is not an `E` - this is the fundamental point of generics.","body":"@FBB - Yes but once you create a <code>State&lt;E&gt;</code> you can only ever use <code>E</code> states. <code>set(F)</code> will fail at compile time because <code>F</code> is not an <code>E</code> - this is the fundamental point of generics."},{"owner":{"account_id":1969329,"reputation":1414,"user_id":1768736,"accept_rate":74,"display_name":"FBB"},"score":0,"creation_date":1441288809,"post_id":9259934,"comment_id":52626173,"body_markdown":"But this is useless, you can simply have a set(Days) method. See Louis Wasserman&#39;s answer.","body":"But this is useless, you can simply have a set(Days) method. See Louis Wasserman&#39;s answer."},{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":0,"creation_date":1441291210,"post_id":9259934,"comment_id":52628029,"body_markdown":"@FBB - Agreed - but this does a `next` and `prev` for you.","body":"@FBB - Agreed - but this does a <code>next</code> and <code>prev</code> for you."},{"owner":{"account_id":1969329,"reputation":1414,"user_id":1768736,"accept_rate":74,"display_name":"FBB"},"score":0,"creation_date":1441366255,"post_id":9259934,"comment_id":52662224,"body_markdown":"This is not the question asked. Your `next` and `prev` methods could return a type `Days` all the same.","body":"This is not the question asked. Your <code>next</code> and <code>prev</code> methods could return a type <code>Days</code> all the same."}],"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1329214176,"creation_date":1329133562,"answer_id":9259934,"question_id":9257262,"body_markdown":"This compiles fine for me under Java 6:\r\n\r\n    public enum Days {\r\n      SUNDAY, \r\n      MONDAY, \r\n      TUESDAY, \r\n      WEDNESDAY,\r\n      THURSDAY, \r\n      FRIDAY, \r\n      SATURDAY\r\n    }\r\n    \r\n    public class State&lt;T extends Days&gt; {\r\n      T state;\r\n      \r\n      public State(T startState) {\r\n        this.state = startState;\r\n      }\r\n    }\r\n    \r\n    private void test() {\r\n      State&lt;Days&gt; state = new State&lt;Days&gt; (Days.MONDAY);\r\n    }\r\n\r\nHowever, if you want your `State` object to change from one `enum` to another you would be better to use something like:\r\n\r\n    public class State&lt;S extends Enum&lt;S&gt;&gt; {\r\n      final ArrayList&lt;S&gt; states = new ArrayList&lt;S&gt;();\r\n      private S state;\r\n    \r\n      public State(S startState) {\r\n        states.addAll(EnumSet.allOf(startState.getClass()));\r\n        this.state = startState;\r\n      }\r\n    \r\n      public S next() {\r\n        return state = states.get((state.ordinal() + 1) % states.size());\r\n      }\r\n    \r\n      public S prev() {\r\n        return state = states.get((state.ordinal() - 1 + states.size()) % states.size());\r\n      }\r\n    \r\n      public S set(S newState) {\r\n        return state = newState;\r\n      }\r\n    \r\n      public S get() {\r\n        return state;\r\n      }\r\n    }\r\n        \r\n    private void test() {\r\n      State&lt;Days&gt; state = new State&lt;Days&gt; (Days.MONDAY);\r\n      // ...\r\n    }\r\n","title":"Generics using Enum in Java","body":"<p>This compiles fine for me under Java 6:</p>\n\n<pre><code>public enum Days {\n  SUNDAY, \n  MONDAY, \n  TUESDAY, \n  WEDNESDAY,\n  THURSDAY, \n  FRIDAY, \n  SATURDAY\n}\n\npublic class State&lt;T extends Days&gt; {\n  T state;\n\n  public State(T startState) {\n    this.state = startState;\n  }\n}\n\nprivate void test() {\n  State&lt;Days&gt; state = new State&lt;Days&gt; (Days.MONDAY);\n}\n</code></pre>\n\n<p>However, if you want your <code>State</code> object to change from one <code>enum</code> to another you would be better to use something like:</p>\n\n<pre><code>public class State&lt;S extends Enum&lt;S&gt;&gt; {\n  final ArrayList&lt;S&gt; states = new ArrayList&lt;S&gt;();\n  private S state;\n\n  public State(S startState) {\n    states.addAll(EnumSet.allOf(startState.getClass()));\n    this.state = startState;\n  }\n\n  public S next() {\n    return state = states.get((state.ordinal() + 1) % states.size());\n  }\n\n  public S prev() {\n    return state = states.get((state.ordinal() - 1 + states.size()) % states.size());\n  }\n\n  public S set(S newState) {\n    return state = newState;\n  }\n\n  public S get() {\n    return state;\n  }\n}\n\nprivate void test() {\n  State&lt;Days&gt; state = new State&lt;Days&gt; (Days.MONDAY);\n  // ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":19463,"reputation":41164,"user_id":45668,"accept_rate":88,"display_name":"Malcolm"},"score":7,"creation_date":1329136501,"post_id":9260313,"comment_id":11670239,"body_markdown":"That&#39;s not what the OP wants. OP wants to accept only Days, not anything at all or any enum. Not only he doesn&#39;t need a generics bound to do that, he doesn&#39;t need to use generics at all.","body":"That&#39;s not what the OP wants. OP wants to accept only Days, not anything at all or any enum. Not only he doesn&#39;t need a generics bound to do that, he doesn&#39;t need to use generics at all."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1329160979,"post_id":9260313,"comment_id":11679597,"body_markdown":"@Malcolm Well, he can use generics for his `State` class (as per my code). He just doesn&#39;t need the generic to be bounded. I see what you mean, but he *could* make his class generic - it seem like a handy class to have that deal with initial/current state","body":"@Malcolm Well, he can use generics for his <code>State</code> class (as per my code). He just doesn&#39;t need the generic to be bounded. I see what you mean, but he <i>could</i> make his class generic - it seem like a handy class to have that deal with initial/current state"},{"owner":{"account_id":19463,"reputation":41164,"user_id":45668,"accept_rate":88,"display_name":"Malcolm"},"score":1,"creation_date":1329161316,"post_id":9260313,"comment_id":11679723,"body_markdown":"It doesn&#39;t serve the purpose the OP specified. He needs a class which operates on Days or its children: `I want to make a class which can take values of type days`. Since there are no children for any enum, he should write Days explicitly. Your code doesn&#39;t limit the values to Days.","body":"It doesn&#39;t serve the purpose the OP specified. He needs a class which operates on Days or its children: <code>I want to make a class which can take values of type days</code>. Since there are no children for any enum, he should write Days explicitly. Your code doesn&#39;t limit the values to Days."},{"owner":{"account_id":1581722,"reputation":693,"user_id":1466981,"display_name":"MorganGalpin"},"score":0,"creation_date":1398817146,"post_id":9260313,"comment_id":35810840,"body_markdown":"It was useful to know that enums are final and therefore cannot be extended.","body":"It was useful to know that enums are final and therefore cannot be extended."},{"owner":{"account_id":1581722,"reputation":693,"user_id":1466981,"display_name":"MorganGalpin"},"score":0,"creation_date":1398817498,"post_id":9260313,"comment_id":35810912,"body_markdown":"Also, you can do a few things to fix your problem:\n1. Don&#39;t make State generic. Just use Days.\n2. If you&#39;re going to define methods on Days, create an interface that Days implements. e.g. Days implements IDays; and class State&lt;T extends IDays&gt;;\n3. Do as Bohemian suggests and use State&lt;T extends Enum&lt;T&gt;&gt;;","body":"Also, you can do a few things to fix your problem: 1. Don&#39;t make State generic. Just use Days. 2. If you&#39;re going to define methods on Days, create an interface that Days implements. e.g. Days implements IDays; and class State&lt;T extends IDays&gt;; 3. Do as Bohemian suggests and use State&lt;T extends Enum&lt;T&gt;&gt;;"}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":5,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1682286423,"creation_date":1329135091,"answer_id":9260313,"question_id":9257262,"body_markdown":"Don&#39;t use a generics bound. There&#39;s no need. Just use an unbounded type, like this:\r\n\r\n    public class State&lt;T&gt; {\r\n        public State(T startState) {\r\n            // whatever\r\n        } \r\n    }\r\n\r\nAnd to use it:\r\n\r\n    State&lt;Days&gt; dayState = new State&lt;&gt;(Days.SUNDAY);\r\n\r\nThis is a straightforward typed class that doesn&#39;t need a bound.\r\n\r\nThe only bound that might make sense is a bound to an `enum`:\r\n\r\n    public class State&lt;T extends Enum&lt;T&gt;&gt; {\r\n        public State(T startState) {\r\n            // whatever\r\n        } \r\n    } \r\n\r\nThis version requires that the generic parameter be an `enum`. With this version the above usage example would still compile, but this would not compile (for example):\r\n\r\n    State&lt;String&gt; dayState = new State&lt;&gt;(&quot;hello&quot;);\r\n\r\nbecause `String` is not an `enum`.\r\n\r\n\r\n","title":"Generics using Enum in Java","body":"<p>Don't use a generics bound. There's no need. Just use an unbounded type, like this:</p>\n<pre><code>public class State&lt;T&gt; {\n    public State(T startState) {\n        // whatever\n    } \n}\n</code></pre>\n<p>And to use it:</p>\n<pre><code>State&lt;Days&gt; dayState = new State&lt;&gt;(Days.SUNDAY);\n</code></pre>\n<p>This is a straightforward typed class that doesn't need a bound.</p>\n<p>The only bound that might make sense is a bound to an <code>enum</code>:</p>\n<pre><code>public class State&lt;T extends Enum&lt;T&gt;&gt; {\n    public State(T startState) {\n        // whatever\n    } \n} \n</code></pre>\n<p>This version requires that the generic parameter be an <code>enum</code>. With this version the above usage example would still compile, but this would not compile (for example):</p>\n<pre><code>State&lt;String&gt; dayState = new State&lt;&gt;(&quot;hello&quot;);\n</code></pre>\n<p>because <code>String</code> is not an <code>enum</code>.</p>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1329151363,"creation_date":1329151363,"answer_id":9264323,"question_id":9257262,"body_markdown":"The thing to do here is\r\n\r\n    public enum Days{..}\r\n\r\n    public class State { // no generic argument!\r\n      ...\r\n    }\r\n\r\nAs it stands, you can&#39;t have `State&lt;T extends Days&gt;` because the only way to satisfy `T extends Days` is to have `T` _be_ `Days`.  That&#39;s what it means for `Days` to be `final`.\r\n\r\nSo instead, you should make `State` _not_ generic, and use `Days` directly everywhere you were trying to use `T`.  You can&#39;t declare `public class State&lt;Days&gt;`, because then it&#39;ll try to treat `Days` as a type _variable,_ not as the class `Days`, and that&#39;s _not_ what you want.","title":"Generics using Enum in Java","body":"<p>The thing to do here is</p>\n\n<pre><code>public enum Days{..}\n\npublic class State { // no generic argument!\n  ...\n}\n</code></pre>\n\n<p>As it stands, you can't have <code>State&lt;T extends Days&gt;</code> because the only way to satisfy <code>T extends Days</code> is to have <code>T</code> <em>be</em> <code>Days</code>.  That's what it means for <code>Days</code> to be <code>final</code>.</p>\n\n<p>So instead, you should make <code>State</code> <em>not</em> generic, and use <code>Days</code> directly everywhere you were trying to use <code>T</code>.  You can't declare <code>public class State&lt;Days&gt;</code>, because then it'll try to treat <code>Days</code> as a type <em>variable,</em> not as the class <code>Days</code>, and that's <em>not</em> what you want.</p>\n"}],"owner":{"account_id":1167478,"reputation":3167,"user_id":1151746,"accept_rate":79,"display_name":"Rog Matthews"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11998,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":9260313,"answer_count":5,"score":16,"last_activity_date":1682286423,"creation_date":1329120531,"question_id":9257262,"body_markdown":"I have an enum\r\n\r\n    public enum Days {\r\n    SUNDAY, MONDAY, TUESDAY, WEDNESDAY,\r\n    THURSDAY, FRIDAY, SATURDAY \r\n}\r\n\r\nI want to make a class which can take values of type Days. So I used Java Generics \r\n\r\n    public class State&lt;T extend Days&gt;\r\n\r\nBut there is an error\r\n\r\n    The type parameter T should not be bounded by the final type Days. \r\n    Final types cannot be further extended\r\n\r\nHow can I resolve this?","title":"Generics using Enum in Java","body":"<p>I have an enum</p>\n\n<pre><code>public enum Days {\nSUNDAY, MONDAY, TUESDAY, WEDNESDAY,\nTHURSDAY, FRIDAY, SATURDAY \n</code></pre>\n\n<p>}</p>\n\n<p>I want to make a class which can take values of type Days. So I used Java Generics </p>\n\n<pre><code>public class State&lt;T extend Days&gt;\n</code></pre>\n\n<p>But there is an error</p>\n\n<pre><code>The type parameter T should not be bounded by the final type Days. \nFinal types cannot be further extended\n</code></pre>\n\n<p>How can I resolve this?</p>\n"},{"tags":["java","maven","jsonschema","hl7-fhir","jsonschema2pojo"],"comments":[{"owner":{"account_id":1274439,"reputation":3498,"user_id":1229969,"accept_rate":62,"display_name":"Grahame Grieve"},"score":1,"creation_date":1564487419,"post_id":57269064,"comment_id":101039992,"body_markdown":"I&#39;m not familiar with these jsonschema2pojo - but json schema and the tools are immature in regard to some of the features that FHIR hammers on, so I woluldn&#39;t be surprised if you have problems. Have you looked at HAPI-FHIR?","body":"I&#39;m not familiar with these jsonschema2pojo - but json schema and the tools are immature in regard to some of the features that FHIR hammers on, so I woluldn&#39;t be surprised if you have problems. Have you looked at HAPI-FHIR?"},{"owner":{"account_id":2725644,"reputation":4730,"user_id":2350799,"accept_rate":83,"display_name":"xcesco"},"score":0,"creation_date":1564499091,"post_id":57269064,"comment_id":101047486,"body_markdown":"Not jet! I will have a look at HAPI-FHIR. Tnx!","body":"Not jet! I will have a look at HAPI-FHIR. Tnx!"}],"answers":[{"tags":[],"owner":{"account_id":4387361,"reputation":347,"user_id":3577053,"display_name":"user07"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1569615506,"creation_date":1569615506,"answer_id":58140913,"question_id":57269064,"body_markdown":"By default jsonschema2pojo plugin generates the files to **target/java-gen/** folder, not the one you have specified. ","title":"jsonschema2pojo maven plugin does not generate Java classes","body":"<p>By default jsonschema2pojo plugin generates the files to <strong>target/java-gen/</strong> folder, not the one you have specified. </p>\n"},{"tags":[],"owner":{"account_id":11041351,"reputation":701,"user_id":8109134,"display_name":"Vivek Tyagi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682285763,"creation_date":1682285763,"answer_id":76087388,"question_id":57269064,"body_markdown":"@xcesco - Each maven tag such as - sourceDirectory, and targetPackage, has specific meaning. You can check for more details at plugin page. \r\n\r\nTry providing outputdirectory.\r\n\r\n    &lt;plugin&gt;\r\n    \t\t\t    &lt;groupId&gt;org.jsonschema2pojo&lt;/groupId&gt;\r\n    \t\t\t    &lt;artifactId&gt;jsonschema2pojo-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t    &lt;!--&lt;version&gt;1.2.1&lt;/version&gt;--&gt;\r\n    \t\t\t    &lt;executions&gt;\r\n    \t\t\t        &lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;generate-message-contracts&lt;/id&gt;\r\n    \t\t\t            &lt;goals&gt;\r\n    \t\t\t                &lt;goal&gt;generate&lt;/goal&gt;\r\n    \t\t\t            &lt;/goals&gt;\r\n    \t\t\t            &lt;configuration&gt;\r\n    \t\t\t\t\t        &lt;sourceDirectory&gt;project path..\\directory\\&lt;/sourceDirectory&gt;\r\n    \t\t\t\t\t        &lt;outputDirectory&gt;${basedir}/directory/src/gen/java&lt;/outputDirectory&gt;\r\n    \t\t\t    \t\t&lt;/configuration&gt;\r\n    \t\t\t        &lt;/execution&gt;\r\n    \t\t\t    &lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n\r\n\r\n","title":"jsonschema2pojo maven plugin does not generate Java classes","body":"<p>@xcesco - Each maven tag such as - sourceDirectory, and targetPackage, has specific meaning. You can check for more details at plugin page.</p>\n<p>Try providing outputdirectory.</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.jsonschema2pojo&lt;/groupId&gt;\n                &lt;artifactId&gt;jsonschema2pojo-maven-plugin&lt;/artifactId&gt;\n                &lt;!--&lt;version&gt;1.2.1&lt;/version&gt;--&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;generate-message-contracts&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirectory&gt;project path..\\directory\\&lt;/sourceDirectory&gt;\n                            &lt;outputDirectory&gt;${basedir}/directory/src/gen/java&lt;/outputDirectory&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":2725644,"reputation":4730,"user_id":2350799,"accept_rate":83,"display_name":"xcesco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6574,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1682285763,"creation_date":1564480791,"question_id":57269064,"body_markdown":"I&#39;m trying to obtain the Java model for the [FHIR R4 specification][1]. To accomplish this task, I downloaded the [JSON Schema][2] and I try to use jsonschema2pojo maven plugin to generate the source code.\r\n\r\nI create a simple Maven project and I put the JSON Schema under `src/main/resources/schema`. So, I defined the following `pom`:\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;fhir-generator&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.9.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jsonschema2pojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jsonschema2pojo-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;sourceDirectory&gt;${basedir}/src/main/resources/schema&lt;/sourceDirectory&gt;\r\n\t\t\t\t\t&lt;targetPackage&gt;com.example.fhir&lt;/targetPackage&gt;\r\n\t\t\t\t\t&lt;useCommonsLang3&gt;true&lt;/useCommonsLang3&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nWhen I run the goal `package` I obtain the folliwing output:\r\n\r\n```\r\n[INFO] Scanning for projects...\r\n[WARNING] \r\n[WARNING] Some problems were encountered while building the effective model for come.example:fhir-generator:jar:0.0.1-SNAPSHOT\r\n[WARNING] &#39;build.plugins.plugin.version&#39; for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 24, column 12\r\n[WARNING] \r\n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\r\n[WARNING] \r\n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\r\n[WARNING] \r\n[INFO]                                                                         \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Building fhir-generator 0.0.1-SNAPSHOT\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] \r\n[INFO] --- jsonschema2pojo-maven-plugin:1.0.1:generate (default) @ fhir-generator ---\r\n[WARNING] useCommonsLang3 is deprecated. Please remove it from your config.\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ fhir-generator ---\r\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\r\n[INFO] Copying 1 resource\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ fhir-generator ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ fhir-generator ---\r\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\r\n[INFO] Copying 0 resource\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ fhir-generator ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO] \r\n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ fhir-generator ---\r\n[INFO] \r\n[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ fhir-generator ---\r\n[INFO] Building jar: Z:\\work\\backend\\fhir-generator\\target\\fhir-generator-0.0.1-SNAPSHOT.jar\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 2.921 s\r\n[INFO] Finished at: 2019-07-30T11:21:25+02:00\r\n[INFO] Final Memory: 12M/208M\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\nThe problem is that no classes were generated in `target/generated-sources` folder. Any ideas about it? Tnx in advance\r\n\r\n  [1]: https://www.hl7.org/fhir/downloads.html\r\n  [2]: https://www.hl7.org/fhir/fhir.schema.json.zip","title":"jsonschema2pojo maven plugin does not generate Java classes","body":"<p>I'm trying to obtain the Java model for the <a href=\"https://www.hl7.org/fhir/downloads.html\" rel=\"nofollow noreferrer\">FHIR R4 specification</a>. To accomplish this task, I downloaded the <a href=\"https://www.hl7.org/fhir/fhir.schema.json.zip\" rel=\"nofollow noreferrer\">JSON Schema</a> and I try to use jsonschema2pojo maven plugin to generate the source code.</p>\n\n<p>I create a simple Maven project and I put the JSON Schema under <code>src/main/resources/schema</code>. So, I defined the following <code>pom</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;fhir-generator&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.9.9.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jsonschema2pojo&lt;/groupId&gt;\n                &lt;artifactId&gt;jsonschema2pojo-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.0.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;sourceDirectory&gt;${basedir}/src/main/resources/schema&lt;/sourceDirectory&gt;\n                    &lt;targetPackage&gt;com.example.fhir&lt;/targetPackage&gt;\n                    &lt;useCommonsLang3&gt;true&lt;/useCommonsLang3&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>When I run the goal <code>package</code> I obtain the folliwing output:</p>\n\n<pre><code>[INFO] Scanning for projects...\n[WARNING] \n[WARNING] Some problems were encountered while building the effective model for come.example:fhir-generator:jar:0.0.1-SNAPSHOT\n[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 24, column 12\n[WARNING] \n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\n[WARNING] \n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\n[WARNING] \n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building fhir-generator 0.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- jsonschema2pojo-maven-plugin:1.0.1:generate (default) @ fhir-generator ---\n[WARNING] useCommonsLang3 is deprecated. Please remove it from your config.\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ fhir-generator ---\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] Copying 1 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ fhir-generator ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ fhir-generator ---\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ fhir-generator ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ fhir-generator ---\n[INFO] \n[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ fhir-generator ---\n[INFO] Building jar: Z:\\work\\backend\\fhir-generator\\target\\fhir-generator-0.0.1-SNAPSHOT.jar\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 2.921 s\n[INFO] Finished at: 2019-07-30T11:21:25+02:00\n[INFO] Final Memory: 12M/208M\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n\n<p>The problem is that no classes were generated in <code>target/generated-sources</code> folder. Any ideas about it? Tnx in advance</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":15753692,"reputation":31,"user_id":11367441,"display_name":"zheng"},"score":0,"creation_date":1682195397,"post_id":76081747,"comment_id":134178095,"body_markdown":"Thanks, Wow Java looks so complex. So in order to implement my funciotn, i need create new class include two value which i want to return. For one function is ok. but i have more than 100 function need change, and each function have different return type and value. which mean i need create 100 class in order to support return data feature? Wow. Java definitely a new world to me","body":"Thanks, Wow Java looks so complex. So in order to implement my funciotn, i need create new class include two value which i want to return. For one function is ok. but i have more than 100 function need change, and each function have different return type and value. which mean i need create 100 class in order to support return data feature? Wow. Java definitely a new world to me"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1682201186,"post_id":76081747,"comment_id":134178706,"body_markdown":"@zheng You won&#39;t have to implement 100 classes to hold results. You should edit your question with a better/working Java example (possibly two) and the results. Do you need the updated return value if result is false?","body":"@zheng You won&#39;t have to implement 100 classes to hold results. You should edit your question with a better/working Java example (possibly two) and the results. Do you need the updated return value if result is false?"},{"owner":{"account_id":15753692,"reputation":31,"user_id":11367441,"display_name":"zheng"},"score":0,"creation_date":1682232395,"post_id":76081747,"comment_id":134180773,"body_markdown":"Hi DuncG, thank, the current c++ code have many function which need return multiple result. and most function looks like this:","body":"Hi DuncG, thank, the current c++ code have many function which need return multiple result. and most function looks like this:"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682250167,"post_id":76081747,"comment_id":134182471,"body_markdown":"This code (specifically `MyResult`) can be significantly shortened by using `public record MyResult(String strValue, boolean result) { }`. Instead of `getStrValue()` and `getResult()`, you then automatically get the accessors `strValue()` and `result()`.","body":"This code (specifically <code>MyResult</code>) can be significantly shortened by using <code>public record MyResult(String strValue, boolean result) { }</code>. Instead of <code>getStrValue()</code> and <code>getResult()</code>, you then automatically get the accessors <code>strValue()</code> and <code>result()</code>."}],"tags":[],"owner":{"account_id":956792,"reputation":742,"user_id":981953,"accept_rate":68,"display_name":"Tejas jain"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682194480,"creation_date":1682194480,"answer_id":76081747,"question_id":76081654,"body_markdown":"Welcome to Java!\r\n\r\n\r\nJust create a new reuslt object of MyResult type and return!\r\n\r\n    class MyResult{\r\n        String strValue;\r\n        boolean result;\r\n\r\n        MyResult(String strValue, boolean result){\r\n            this.strValue = strValue;\r\n            this.result = result;\r\n        }\r\n\r\n        boolean getResult(){\r\n            return result;\r\n        }\r\n\r\n        boolean getStrValue(){\r\n            return strValue;\r\n        }\r\n    }\r\n\r\nIn your code, \r\n\r\n    MyResult evaluateSring(String strValue)\r\n    {\r\n        //some process of strvalue and \r\n       bool result = false;\r\n       strValue = strValue.strstr( x, y)\r\n       ...\r\n       return new MyResult(strValue, result);\r\n    }\r\n\r\nAt he place you are calling this method, do\r\n\r\n    MyResult myResult =  evaluateSring(strValue)\r\n    \r\n    strValue = myResult.getStrValue();\r\n    boolean result = myResult.getResult();","title":"How to modify input parameter or how to return more than one values","body":"<p>Welcome to Java!</p>\n<p>Just create a new reuslt object of MyResult type and return!</p>\n<pre><code>class MyResult{\n    String strValue;\n    boolean result;\n\n    MyResult(String strValue, boolean result){\n        this.strValue = strValue;\n        this.result = result;\n    }\n\n    boolean getResult(){\n        return result;\n    }\n\n    boolean getStrValue(){\n        return strValue;\n    }\n}\n</code></pre>\n<p>In your code,</p>\n<pre><code>MyResult evaluateSring(String strValue)\n{\n    //some process of strvalue and \n   bool result = false;\n   strValue = strValue.strstr( x, y)\n   ...\n   return new MyResult(strValue, result);\n}\n</code></pre>\n<p>At he place you are calling this method, do</p>\n<pre><code>MyResult myResult =  evaluateSring(strValue)\n\nstrValue = myResult.getStrValue();\nboolean result = myResult.getResult();\n</code></pre>\n"}],"owner":{"account_id":15753692,"reputation":31,"user_id":11367441,"display_name":"zheng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1682250255,"accepted_answer_id":76081747,"answer_count":1,"score":0,"last_activity_date":1682285731,"creation_date":1682193079,"question_id":76081654,"body_markdown":"Ok let me simplify the code logic, We have a C++ project and \r\nthere are at least 100 functions with similar following pattern. I need to convert it into Java code. Then I have some problem\r\n\r\n    int evaluateFunc(const para1 /*input only*/, para2 &amp;/* input&amp;output*/, para3 &amp; /*output only */ ...)\r\n    {\r\n       int result = OK;\r\n       ...\r\n       // For Input parameter, we defined as const. e.g. para1\r\n       // For Input/Output parameter, we pass either by reference or pointer, as it may get updated during data processing.  e.g. para2 \r\n       // For output only parameter, which will be modified inside function. e.g. para3\r\n       ...\r\n       return result;\r\n    }\r\n\r\nThere are two keys in our evaluateFunc function\r\n 1. the input/output or output only parameters will be updated by our function as after this function call, these data will be processed by some other function as well. so we use either reference or pointer as parameter and pass to each functions.\r\n 2. this function need always return an integer value as result to indicate whether this function success or not. e.g. 0 is success, any other integer is error code. WE have a big error list and it could more than 50 different error code.  As we have some error handling outside to check this error code and depend the error code to process it accordingly.\r\n\r\nBased on my understanding, Java don&#39;t support pass by reference or pointer.\r\nAnd all values are passed by copy. Java only can return one value each time which mean if every function need return both error code + some new data (or modified data), then I need create a class for each of them.\r\nUnfortunately, the only common part for each function is error code return is expected, all other value return is random. \r\nSo in the worst case, I need create 100 different class to cover all the different function return result. \r\nIs there any generic solution for Java function return result?","title":"How to modify input parameter or how to return more than one values","body":"<p>Ok let me simplify the code logic, We have a C++ project and\nthere are at least 100 functions with similar following pattern. I need to convert it into Java code. Then I have some problem</p>\n<pre><code>int evaluateFunc(const para1 /*input only*/, para2 &amp;/* input&amp;output*/, para3 &amp; /*output only */ ...)\n{\n   int result = OK;\n   ...\n   // For Input parameter, we defined as const. e.g. para1\n   // For Input/Output parameter, we pass either by reference or pointer, as it may get updated during data processing.  e.g. para2 \n   // For output only parameter, which will be modified inside function. e.g. para3\n   ...\n   return result;\n}\n</code></pre>\n<p>There are two keys in our evaluateFunc function</p>\n<ol>\n<li>the input/output or output only parameters will be updated by our function as after this function call, these data will be processed by some other function as well. so we use either reference or pointer as parameter and pass to each functions.</li>\n<li>this function need always return an integer value as result to indicate whether this function success or not. e.g. 0 is success, any other integer is error code. WE have a big error list and it could more than 50 different error code.  As we have some error handling outside to check this error code and depend the error code to process it accordingly.</li>\n</ol>\n<p>Based on my understanding, Java don't support pass by reference or pointer.\nAnd all values are passed by copy. Java only can return one value each time which mean if every function need return both error code + some new data (or modified data), then I need create a class for each of them.\nUnfortunately, the only common part for each function is error code return is expected, all other value return is random.\nSo in the worst case, I need create 100 different class to cover all the different function return result.\nIs there any generic solution for Java function return result?</p>\n"},{"tags":["java","jvm","oracle-sqldeveloper","java-11","msvcr100.dll"],"comments":[{"owner":{"account_id":529084,"reputation":20905,"user_id":1156452,"display_name":"thatjeffsmith"},"score":2,"creation_date":1612573076,"post_id":66072546,"comment_id":116817766,"body_markdown":"Find a copy of that dll file and put it in your jdk/bin folder","body":"Find a copy of that dll file and put it in your jdk/bin folder"},{"owner":{"account_id":16171601,"reputation":122,"user_id":11675272,"display_name":"SmilingMouse"},"score":0,"creation_date":1612573370,"post_id":66072546,"comment_id":116817816,"body_markdown":"That&#39;s right copy msvcr100.dll and msvcp140.dll from previous JDK and it should help: https://community.oracle.com/tech/developers/discussion/4339484/unable-to-launch-the-java-virtual-machine-msvcr100-dll-with-jdk-1-8u261","body":"That&#39;s right copy msvcr100.dll and msvcp140.dll from previous JDK and it should help: <a href=\"https://community.oracle.com/tech/developers/discussion/4339484/unable-to-launch-the-java-virtual-machine-msvcr100-dll-with-jdk-1-8u261\" rel=\"nofollow noreferrer\">community.oracle.com/tech/developers/discussion/4339484/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":28391264,"reputation":1,"user_id":21716996,"display_name":"AGI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682285423,"creation_date":1682285423,"answer_id":76087369,"question_id":66072546,"body_markdown":"The easiest way is to download latest version :\r\n\r\nhttps://www.oracle.com/database/sqldeveloper/technologies/download/\r\n","title":"unable to launch SQLDevelper 20.4.0.379","body":"<p>The easiest way is to download latest version :</p>\n<p><a href=\"https://www.oracle.com/database/sqldeveloper/technologies/download/\" rel=\"nofollow noreferrer\">https://www.oracle.com/database/sqldeveloper/technologies/download/</a></p>\n"}],"owner":{"account_id":16156564,"reputation":21,"user_id":11663686,"display_name":"HHH"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":756,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682285423,"creation_date":1612572851,"question_id":66072546,"body_markdown":"Im having this error when i try to launch sqldeveloper :  &quot; unable to launch the java virtual machine locate at path: ERROR: ca,t find msvcr100.dll or msvcp140.dll &quot;\r\n\r\njava home is configured (i&#39;m  using JDK 11.0.9)\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8wPJi.png","title":"unable to launch SQLDevelper 20.4.0.379","body":"<p>Im having this error when i try to launch sqldeveloper :  &quot; unable to launch the java virtual machine locate at path: ERROR: ca,t find msvcr100.dll or msvcp140.dll &quot;</p>\n<p>java home is configured (i'm  using JDK 11.0.9)</p>\n<p><a href=\"https://i.stack.imgur.com/8wPJi.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9744,"page":481,"page_size":100}
