{"items":[{"tags":["java","couchbase","spring-data-couchbase","couchbase-java-api"],"comments":[{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1632420541,"post_id":69283434,"comment_id":122494260,"body_markdown":"That error only occurs in SDC 3.x and earlier. Can you upgrade to Spring Data Couchbase 4.x?","body":"That error only occurs in SDC 3.x and earlier. Can you upgrade to Spring Data Couchbase 4.x?"}],"answers":[{"tags":[],"owner":{"account_id":13598944,"reputation":21,"user_id":9810102,"display_name":"Bimsara Vikum Bandara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679466866,"creation_date":1679466866,"answer_id":75809035,"question_id":69283434,"body_markdown":"I was facing the same issue. reindexing resolved the problem for me.\r\nTry to add indexes or reindex for that query.  ","title":"Reactive couchbase issue content of this Observable (viewRow) is already released","body":"<p>I was facing the same issue. reindexing resolved the problem for me.\nTry to add indexes or reindex for that query.</p>\n"}],"owner":{"account_id":18384376,"reputation":11,"user_id":13391764,"display_name":"user13391764"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679466866,"creation_date":1632310550,"question_id":69283434,"body_markdown":"I’m using spring-data-couchbase with reactive approach &amp; getting the following error:\r\n\r\n&gt; The content of this Observable (viewRow) is already released.\r\n&gt; Subscribe earlier or tune the CouchbaseEnvironment#autoreleaseAfter()\r\n\r\n**Method definition**\r\n\r\n    default Flux&lt;NonPrimitiveAsset&gt; findAssetByParameters(StringBuilder whereClause) {\r\n    \r\n      WherePath selectFrom = N1qlUtils\r\n          .createSelectFromForEntity(getCouchbaseOperations().getCouchbaseBucket().name());\r\n    \r\n      Statement statement = selectFrom.where(whereClause.toString());\r\n    \r\n      N1qlQuery query = N1qlQuery.simple(statement, N1qlParams.build());\r\n      return ReactiveWrapperConverters\r\n          .toWrapper(getCouchbaseOperations().findByN1QL(query, NonPrimitiveAsset.class), Flux.class);\r\n    \r\n    }\r\n\r\n\r\n**Caller method**\r\n\r\n    Flux&lt;NonPrimitiveAsset&gt; assetFlux = repository.findAssetByParameters(whereClause);\r\n    \r\n    Mono&lt;List&lt;NonPrimitiveAsset&gt;&gt; assetsMono = assetFlux.collectList()","title":"Reactive couchbase issue content of this Observable (viewRow) is already released","body":"<p>I’m using spring-data-couchbase with reactive approach &amp; getting the following error:</p>\n<blockquote>\n<p>The content of this Observable (viewRow) is already released.\nSubscribe earlier or tune the CouchbaseEnvironment#autoreleaseAfter()</p>\n</blockquote>\n<p><strong>Method definition</strong></p>\n<pre><code>default Flux&lt;NonPrimitiveAsset&gt; findAssetByParameters(StringBuilder whereClause) {\n\n  WherePath selectFrom = N1qlUtils\n      .createSelectFromForEntity(getCouchbaseOperations().getCouchbaseBucket().name());\n\n  Statement statement = selectFrom.where(whereClause.toString());\n\n  N1qlQuery query = N1qlQuery.simple(statement, N1qlParams.build());\n  return ReactiveWrapperConverters\n      .toWrapper(getCouchbaseOperations().findByN1QL(query, NonPrimitiveAsset.class), Flux.class);\n\n}\n</code></pre>\n<p><strong>Caller method</strong></p>\n<pre><code>Flux&lt;NonPrimitiveAsset&gt; assetFlux = repository.findAssetByParameters(whereClause);\n\nMono&lt;List&lt;NonPrimitiveAsset&gt;&gt; assetsMono = assetFlux.collectList()\n</code></pre>\n"},{"tags":["java","wrapper","primitive-types"],"comments":[{"owner":{"account_id":4265322,"reputation":553,"user_id":3488579,"accept_rate":57,"display_name":"pankaj"},"score":2,"creation_date":1414140942,"post_id":1570416,"comment_id":60752535,"body_markdown":"http://www.w3resource.com/java-tutorial/java-wrapper-classes.php This article would helpful for this discussion.","body":"<a href=\"http://www.w3resource.com/java-tutorial/java-wrapper-classes.php\" rel=\"nofollow noreferrer\">w3resource.com/java-tutorial/java-wrapper-classes.php</a> This article would helpful for this discussion."}],"answers":[{"comments":[{"owner":{"account_id":58153,"reputation":5728,"user_id":2922388,"accept_rate":65,"display_name":"Gopi"},"score":0,"creation_date":1255584217,"post_id":1570423,"comment_id":1430672,"body_markdown":"Other than collections, i shouldn&#39;t use wrapper classes? How about using it for ordinary declaration like Integer i = new Integer(10); Is it good to do like this?","body":"Other than collections, i shouldn&#39;t use wrapper classes? How about using it for ordinary declaration like Integer i = new Integer(10); Is it good to do like this?"},{"owner":{"account_id":24810,"reputation":44154,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"score":0,"creation_date":1255584326,"post_id":1570423,"comment_id":1430684,"body_markdown":"autoboxing allows you to do Integer i = 10;","body":"autoboxing allows you to do Integer i = 10;"},{"owner":{"account_id":20130,"reputation":279855,"user_id":47773,"accept_rate":52,"display_name":"Matthew Flaschen"},"score":1,"creation_date":1255584635,"post_id":1570423,"comment_id":1430703,"body_markdown":"No, Sri.  If you don&#39;t have a requirement that i be an object, don&#39;t make it one.","body":"No, Sri.  If you don&#39;t have a requirement that i be an object, don&#39;t make it one."},{"owner":{"account_id":58153,"reputation":5728,"user_id":2922388,"accept_rate":65,"display_name":"Gopi"},"score":0,"creation_date":1255584642,"post_id":1570423,"comment_id":1430705,"body_markdown":"Autoboxing will unbox the above declared i to int i=10 or Integer i = 10?","body":"Autoboxing will unbox the above declared i to int i=10 or Integer i = 10?"},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":3,"creation_date":1255585645,"post_id":1570423,"comment_id":1430768,"body_markdown":"int pi = new Integer(10); works.\nInteger oi = 10; works. int ni = null; doesn&#39;t work.\nthe LHS is converted to whatever the RHS requires.","body":"int pi = new Integer(10); works. Integer oi = 10; works. int ni = null; doesn&#39;t work. the LHS is converted to whatever the RHS requires."}],"tags":[],"owner":{"account_id":24810,"reputation":44154,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1255584418,"creation_date":1255583913,"answer_id":1570423,"question_id":1570416,"body_markdown":"If you want to use Collections, you *must* use Wrapper classes.\r\n\r\nPrimitive types, are used for arrays. Also, to represent data that has no behaviour,for example, a counter, or a boolean condition.\r\n\r\nSince autoboxing, the &quot;when to use primitive or wrapper&quot; frontier has become quite fuzzy.\r\n\r\nBut remember, Wrappers are objects, so you get all the fancy Java features. For example, you can use reflexion to create Integer objects, but not int values. Wrapper classes also have methods such as valueOf.","title":"When to use wrapper class and primitive type","body":"<p>If you want to use Collections, you <em>must</em> use Wrapper classes.</p>\n\n<p>Primitive types, are used for arrays. Also, to represent data that has no behaviour,for example, a counter, or a boolean condition.</p>\n\n<p>Since autoboxing, the \"when to use primitive or wrapper\" frontier has become quite fuzzy.</p>\n\n<p>But remember, Wrappers are objects, so you get all the fancy Java features. For example, you can use reflexion to create Integer objects, but not int values. Wrapper classes also have methods such as valueOf.</p>\n"},{"comments":[{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":3,"creation_date":1255585172,"post_id":1570425,"comment_id":1430745,"body_markdown":"the performance hit is not so great that code legibility/reliability should take a back seat.","body":"the performance hit is not so great that code legibility/reliability should take a back seat."},{"owner":{"account_id":20130,"reputation":279855,"user_id":47773,"accept_rate":52,"display_name":"Matthew Flaschen"},"score":3,"creation_date":1255586428,"post_id":1570425,"comment_id":1430801,"body_markdown":"First, using primitives appropriately will not make your code illegible.  Second, the performance hit is significant in some cases.  It&#39;s absurd to say it never is.","body":"First, using primitives appropriately will not make your code illegible.  Second, the performance hit is significant in some cases.  It&#39;s absurd to say it never is."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1255591762,"post_id":1570425,"comment_id":1431093,"body_markdown":"@pstanton: please explain how `Integer` is more legible than `int`.","body":"@pstanton: please explain how <code>Integer</code> is more legible than <code>int</code>."},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":0,"creation_date":1255595828,"post_id":1570425,"comment_id":1431382,"body_markdown":"In many cases Integer is no more legible than int and in these cases I will always use int, or if I know a certain variable will NEVER be null, i&#39;ll use int because int is as you&#39;ve pointed out slightly more efficient. However, in many cases it is easier for another programmer to understand the state of a variable when an object is used, as it can be initialised to null to signify that it is not ready. For example if you have an unsaved database record which has a unique incrementing numeric id, should this id be 0, -1 or null before it is assigned a valid id? In that case Objects are better.","body":"In many cases Integer is no more legible than int and in these cases I will always use int, or if I know a certain variable will NEVER be null, i&#39;ll use int because int is as you&#39;ve pointed out slightly more efficient. However, in many cases it is easier for another programmer to understand the state of a variable when an object is used, as it can be initialised to null to signify that it is not ready. For example if you have an unsaved database record which has a unique incrementing numeric id, should this id be 0, -1 or null before it is assigned a valid id? In that case Objects are better."},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":0,"creation_date":1255596103,"post_id":1570425,"comment_id":1431401,"body_markdown":"regarding performance - in special cases, the performance hit can be significant, ie if you are creating a multitude of these Objects very rapidly or if many many many of them build up over a period of time. However, i&#39;d expect a decent programmer to be able to identify these special cases either avoid or amend accordingly. I never said that it&#39;s NEVER significant, however generally speaking, it isn&#39;t.","body":"regarding performance - in special cases, the performance hit can be significant, ie if you are creating a multitude of these Objects very rapidly or if many many many of them build up over a period of time. However, i&#39;d expect a decent programmer to be able to identify these special cases either avoid or amend accordingly. I never said that it&#39;s NEVER significant, however generally speaking, it isn&#39;t."},{"owner":{"account_id":30224,"reputation":2479,"user_id":82265,"accept_rate":85,"display_name":"Pradeep"},"score":0,"creation_date":1303354067,"post_id":1570425,"comment_id":6565965,"body_markdown":"Performance takes the first seat based on the nature of the application. Generally speaking, if its a web-app then millisecs wont be significant but it is a desktop app it makes sense not to take that extra sec directly off the face of the user.","body":"Performance takes the first seat based on the nature of the application. Generally speaking, if its a web-app then millisecs wont be significant but it is a desktop app it makes sense not to take that extra sec directly off the face of the user."},{"owner":{"account_id":103538,"reputation":13824,"user_id":277267,"accept_rate":69,"display_name":"Daniel F"},"score":0,"creation_date":1427035092,"post_id":1570425,"comment_id":46604148,"body_markdown":"Here&#39;s a video from a Google Usergroup Meeting where this specific float vs Float topic is covered in the context of Android&#39;s animation framework, mostly regarding Garbage Collection issues https://youtu.be/wJYTBjMZJh0?t=11m20s This is presented by the guy working at Google on the animation framework (Chet Haase)","body":"Here&#39;s a video from a Google Usergroup Meeting where this specific float vs Float topic is covered in the context of Android&#39;s animation framework, mostly regarding Garbage Collection issues <a href=\"https://youtu.be/wJYTBjMZJh0?t=11m20s\" rel=\"nofollow noreferrer\">youtu.be/wJYTBjMZJh0?t=11m20s</a> This is presented by the guy working at Google on the animation framework (Chet Haase)"},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":0,"creation_date":1430091354,"post_id":1570425,"comment_id":47893844,"body_markdown":"absolutely animation is an example of where you would strictly use primitives because variables constantly change in high frequency. again, i would expect a decent programmer to identify this case.","body":"absolutely animation is an example of where you would strictly use primitives because variables constantly change in high frequency. again, i would expect a decent programmer to identify this case."}],"tags":[],"owner":{"account_id":20130,"reputation":279855,"user_id":47773,"accept_rate":52,"display_name":"Matthew Flaschen"},"comment_count":8,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1255586835,"creation_date":1255583925,"answer_id":1570425,"question_id":1570416,"body_markdown":"Generally, you should use primitive types unless you *need* an object for some reason (e.g. to put in a collection).  Even then, consider a different approach that doesn&#39;t require a object if you want to maximize numeric performance.  This is advised by [the documentation][1], and [this article][2] demonstrates how auto-boxing can cause a large performance difference.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/guide/language/autoboxing.html\r\n  [2]: http://today.java.net/pub/a/today/2005/03/24/autoboxing.html#performance_issue","title":"When to use wrapper class and primitive type","body":"<p>Generally, you should use primitive types unless you <em>need</em> an object for some reason (e.g. to put in a collection).  Even then, consider a different approach that doesn't require a object if you want to maximize numeric performance.  This is advised by <a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/autoboxing.html\" rel=\"noreferrer\">the documentation</a>, and <a href=\"http://today.java.net/pub/a/today/2005/03/24/autoboxing.html#performance_issue\" rel=\"noreferrer\">this article</a> demonstrates how auto-boxing can cause a large performance difference.</p>\n"},{"comments":[{"owner":{"account_id":14430,"reputation":6027,"user_id":29689,"accept_rate":79,"display_name":"Chris Missal"},"score":2,"creation_date":1255584969,"post_id":1570431,"comment_id":1430731,"body_markdown":"there are still good reasons to wrap a value type that contains a string as the base object.","body":"there are still good reasons to wrap a value type that contains a string as the base object."},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":0,"creation_date":1255585318,"post_id":1570431,"comment_id":1430752,"body_markdown":"your answer just doesn&#39;t make sense. i&#39;m not sure what you&#39;re saying. i agree with your comment though, wrapper classes are a good idea if they improve legibility.","body":"your answer just doesn&#39;t make sense. i&#39;m not sure what you&#39;re saying. i agree with your comment though, wrapper classes are a good idea if they improve legibility."},{"owner":{"account_id":14430,"reputation":6027,"user_id":29689,"accept_rate":79,"display_name":"Chris Missal"},"score":0,"creation_date":1255586811,"post_id":1570431,"comment_id":1430821,"body_markdown":"Value types or value objects should be created and be immutable. For instance, it wouldn&#39;t make sense to create a &quot;CountryCode&quot; object like:\n\nnew CountryCode(&quot;USA&quot;)\n\nthen create another object the same way, where later they are different. They&#39;re just strings to start with, but they have meaning behind them. By using strings, you&#39;re able to modify them (by appending more data, etc) but they would no longer be equal.\n\nSee this article for a better description of what I&#39;m trying to explain :) I hope this makes sense\n\nhttp://c2.com/cgi/wiki?ValueObject","body":"Value types or value objects should be created and be immutable. For instance, it wouldn&#39;t make sense to create a &quot;CountryCode&quot; object like:  new CountryCode(&quot;USA&quot;)  then create another object the same way, where later they are different. They&#39;re just strings to start with, but they have meaning behind them. By using strings, you&#39;re able to modify them (by appending more data, etc) but they would no longer be equal.  See this article for a better description of what I&#39;m trying to explain :) I hope this makes sense  <a href=\"http://c2.com/cgi/wiki?ValueObject\" rel=\"nofollow noreferrer\">c2.com/cgi/wiki?ValueObject</a>"}],"tags":[],"owner":{"account_id":14430,"reputation":6027,"user_id":29689,"accept_rate":79,"display_name":"Chris Missal"},"comment_count":3,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1255584049,"creation_date":1255584049,"answer_id":1570431,"question_id":1570416,"body_markdown":"If you want to create a value type. Something like a ProductSKU or AirportCode.\r\n\r\nWhen a primitive type (string in my examples) defines equality, you&#39;ll want to override equality.","title":"When to use wrapper class and primitive type","body":"<p>If you want to create a value type. Something like a ProductSKU or AirportCode.</p>\n\n<p>When a primitive type (string in my examples) defines equality, you'll want to override equality.</p>\n"},{"comments":[{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":5,"creation_date":1255585400,"post_id":1570432,"comment_id":1430755,"body_markdown":"you might not gain much, but you don&#39;t lose much either. unless you&#39;re running on a 1990&#39;s palm pilot.","body":"you might not gain much, but you don&#39;t lose much either. unless you&#39;re running on a 1990&#39;s palm pilot."},{"owner":{"account_id":42594,"reputation":12865,"user_id":124111,"accept_rate":98,"display_name":"aberrant80"},"score":0,"creation_date":1255588499,"post_id":1570432,"comment_id":1430912,"body_markdown":"The fact that they are Objects also give them much more context and encapsulation than as a plain primitive. So you may actually gain much depending on what those primitives are meant for and where they&#39;re being used.","body":"The fact that they are Objects also give them much more context and encapsulation than as a plain primitive. So you may actually gain much depending on what those primitives are meant for and where they&#39;re being used."}],"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"comment_count":2,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1255584095,"creation_date":1255584095,"answer_id":1570432,"question_id":1570416,"body_markdown":"**I would only use the wrapper types if you have to.**\r\n\r\nIn using them you don&#39;t gain much, besides the fact that they are `Objects`.\r\n\r\nAnd, you lose overhead in memory usage and time spent boxing/unboxing.","title":"When to use wrapper class and primitive type","body":"<p><strong>I would only use the wrapper types if you have to.</strong></p>\n\n<p>In using them you don't gain much, besides the fact that they are <code>Objects</code>.</p>\n\n<p>And, you lose overhead in memory usage and time spent boxing/unboxing.</p>\n"},{"comments":[{"owner":{"account_id":2076134,"reputation":1006,"user_id":1849430,"accept_rate":75,"display_name":"Eddie Jamsession"},"score":19,"creation_date":1421917352,"post_id":1570470,"comment_id":44547137,"body_markdown":"&quot;It can be handy to initialise Objects to null&quot;.  It cannot be handy because this is incorrect, if the field is optional you should indicate this explicitly.","body":"&quot;It can be handy to initialise Objects to null&quot;.  It cannot be handy because this is incorrect, if the field is optional you should indicate this explicitly."},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":13,"creation_date":1422834558,"post_id":1570470,"comment_id":44894592,"body_markdown":"lol @EddieJamsession thanks, i will never initialise to null again. (pfffft)","body":"lol @EddieJamsession thanks, i will never initialise to null again. (pfffft)"},{"owner":{"account_id":6671110,"reputation":601,"user_id":5147246,"display_name":"klaar"},"score":1,"creation_date":1510821985,"post_id":1570470,"comment_id":81600828,"body_markdown":"@EddieJamsession If initialising Objects to null as a way to indicate failure when setting the actual value has failed, how else would you propose to catch this problem? Oh, I just realised as I type this: exceptions. A NullPointerException is too generic; it&#39;d be better to use very specific custom exceptions to indicate what has gone wrong. Good, I&#39;ll be doing that from now on...","body":"@EddieJamsession If initialising Objects to null as a way to indicate failure when setting the actual value has failed, how else would you propose to catch this problem? Oh, I just realised as I type this: exceptions. A NullPointerException is too generic; it&#39;d be better to use very specific custom exceptions to indicate what has gone wrong. Good, I&#39;ll be doing that from now on..."},{"owner":{"account_id":6671110,"reputation":601,"user_id":5147246,"display_name":"klaar"},"score":1,"creation_date":1510826375,"post_id":1570470,"comment_id":81603893,"body_markdown":"@EddieJamsession After reading up on the matter, I&#39;ve run into the concept of an Optional object. Right.","body":"@EddieJamsession After reading up on the matter, I&#39;ve run into the concept of an Optional object. Right."},{"owner":{"account_id":5372615,"reputation":1585,"user_id":7389293,"display_name":"carloswm85"},"score":0,"creation_date":1601329662,"post_id":1570470,"comment_id":113368519,"body_markdown":"@klaar what’s an optional object?","body":"@klaar what’s an optional object?"},{"owner":{"account_id":6671110,"reputation":601,"user_id":5147246,"display_name":"klaar"},"score":0,"creation_date":1602509724,"post_id":1570470,"comment_id":113735109,"body_markdown":"@carloswm85 A java.util.Optional&lt;T&gt; object is a a wrapper around an object that is able to discern between the presence and absence of a value or object. It is designed so that you do not have to have use a certain real value as a placeholder for the absence of a value. The value NULL is used quite commonly as such a placeholder, but it doesn&#39;t force you to take into account the exceptional case (resulting in NullPointerExceptions when you&#39;re being sloppy), while an Optional does because you have to think about what you want to do when the wrapper is empty.","body":"@carloswm85 A java.util.Optional&lt;T&gt; object is a a wrapper around an object that is able to discern between the presence and absence of a value or object. It is designed so that you do not have to have use a certain real value as a placeholder for the absence of a value. The value NULL is used quite commonly as such a placeholder, but it doesn&#39;t force you to take into account the exceptional case (resulting in NullPointerExceptions when you&#39;re being sloppy), while an Optional does because you have to think about what you want to do when the wrapper is empty."}],"tags":[],"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"comment_count":6,"down_vote_count":3,"up_vote_count":78,"is_accepted":true,"score":75,"last_activity_date":1519197357,"creation_date":1255584990,"answer_id":1570470,"question_id":1570416,"body_markdown":"Others have mentioned that certain constructs such as `Collections` require objects and that objects have more overhead than their primitive counterparts (memory &amp; boxing).\r\n\r\nAnother consideration is:\r\n\r\nIt can be handy to initialize Objects to `null` or send `null` parameters into a method/constructor to indicate state or function. This can&#39;t be done with primitives.\r\n\r\nMany programmers initialize numbers to 0 (default) or -1 to signify this, but depending on the scenario, this may be incorrect or misleading.\r\n\r\nThis will also set the scene for a `NullPointerException` when something is being used incorrectly, which is much more programmer-friendly than some arbitrary bug down the line.","title":"When to use wrapper class and primitive type","body":"<p>Others have mentioned that certain constructs such as <code>Collections</code> require objects and that objects have more overhead than their primitive counterparts (memory &amp; boxing).</p>\n\n<p>Another consideration is:</p>\n\n<p>It can be handy to initialize Objects to <code>null</code> or send <code>null</code> parameters into a method/constructor to indicate state or function. This can't be done with primitives.</p>\n\n<p>Many programmers initialize numbers to 0 (default) or -1 to signify this, but depending on the scenario, this may be incorrect or misleading.</p>\n\n<p>This will also set the scene for a <code>NullPointerException</code> when something is being used incorrectly, which is much more programmer-friendly than some arbitrary bug down the line.</p>\n"},{"tags":[],"owner":{"account_id":161483,"reputation":822,"user_id":382264,"accept_rate":100,"display_name":"Mattias Holmqvist"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1255587909,"creation_date":1255587909,"answer_id":1570607,"question_id":1570416,"body_markdown":"Collections are the typical case for the simple Java wrapper objects. However, you might consider giving the Wrapper a more specific meaning in the code (value object).\r\n\r\nIMHO there&#39;s almost always a benefit to use value objects when it boils down to readability and maintainance of the code. Wrapping simple data structures inside of objects when they have certain responsibilities often simplifies the code. This is something that is very important in [Domain-Driven Design][1]. \r\n\r\nThere is of course the performance issue, but I tend to ignore that until I have the possibility to measure the performance with proper data and do more directed actions towards the problematic area. It might also be easier to understand the performance issue if the code is easy to understand as well.\r\n\r\n\r\n  [1]: http://domaindrivendesign.org/","title":"When to use wrapper class and primitive type","body":"<p>Collections are the typical case for the simple Java wrapper objects. However, you might consider giving the Wrapper a more specific meaning in the code (value object).</p>\n\n<p>IMHO there's almost always a benefit to use value objects when it boils down to readability and maintainance of the code. Wrapping simple data structures inside of objects when they have certain responsibilities often simplifies the code. This is something that is very important in <a href=\"http://domaindrivendesign.org/\" rel=\"nofollow noreferrer\">Domain-Driven Design</a>. </p>\n\n<p>There is of course the performance issue, but I tend to ignore that until I have the possibility to measure the performance with proper data and do more directed actions towards the problematic area. It might also be easier to understand the performance issue if the code is easy to understand as well.</p>\n"},{"comments":[{"owner":{"account_id":1325153,"reputation":11211,"user_id":1270148,"display_name":"Sandy Chapman"},"score":4,"creation_date":1456748039,"post_id":7344339,"comment_id":59074934,"body_markdown":"The builder pattern is meant to get around this. In this scenario, you make a `PersonBuilder` that throws an exception if SSN isn&#39;t set prior to calling &quot;build&quot; to get the `Person` instance. I think this sort of thing is excessive, but it&#39;s what the Java language promotes for proper patterns.","body":"The builder pattern is meant to get around this. In this scenario, you make a <code>PersonBuilder</code> that throws an exception if SSN isn&#39;t set prior to calling &quot;build&quot; to get the <code>Person</code> instance. I think this sort of thing is excessive, but it&#39;s what the Java language promotes for proper patterns."}],"tags":[],"owner":{"account_id":221712,"reputation":342,"user_id":479852,"display_name":"Cody"},"comment_count":1,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1363108276,"creation_date":1315465479,"answer_id":7344339,"question_id":1570416,"body_markdown":"In my opinion, if my class members are wrapper variables, it does not rely on default values, which is developer friendly behavior.\r\n\r\n1.\r\n\r\n    class Person {\r\n       int SSN ; // gets initialized to zero by default \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n2.\r\n\r\n    class PersonBetter {\r\n      Integer SSN; //gets initialized to null by default\r\n    }\r\n\r\n\r\n\r\n In the first case, you cannot keep SSN value uninitialized. It may hurt if you are not checking if the value was set before you attempt to use it. \r\n\r\n In the second case, you can keep SSN initialized with null. Which can lead to NullPointerException but it is better than unknowingly inserting default values(zero) as SSN into to the database whenever you attempt to use it without initializing SSN field.\r\n\r\n","title":"When to use wrapper class and primitive type","body":"<p>In my opinion, if my class members are wrapper variables, it does not rely on default values, which is developer friendly behavior.</p>\n\n<p>1.</p>\n\n<pre><code>class Person {\n   int SSN ; // gets initialized to zero by default \n}\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>class PersonBetter {\n  Integer SSN; //gets initialized to null by default\n}\n</code></pre>\n\n<p>In the first case, you cannot keep SSN value uninitialized. It may hurt if you are not checking if the value was set before you attempt to use it. </p>\n\n<p>In the second case, you can keep SSN initialized with null. Which can lead to NullPointerException but it is better than unknowingly inserting default values(zero) as SSN into to the database whenever you attempt to use it without initializing SSN field.</p>\n"},{"tags":[],"owner":{"account_id":2754907,"reputation":1362,"user_id":2373304,"accept_rate":67,"display_name":"loknath"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1401345723,"creation_date":1401345723,"answer_id":23927279,"question_id":1570416,"body_markdown":"**performance** of applications that are dominated by numerical calculations can benefit greatly from the use of primitives.\r\n\r\n**primitive types,** one uses the == operator, but for wrapper the preferred choice is to call the equals() method.\r\n\r\n[&quot;Primitive types considered harmful&quot;][1] because they mix &quot;procedural semantics into an otherwise uniform object-oriented model.\r\n\r\n\r\n  [1]: http://www.research.ibm.com/people/a/alpert/ptch/ptch.html\r\n\r\nMany programmers initialize numbers to 0 (default) or -1 to signify this, but depending on the scenario, this may be incorrect or misleading.","title":"When to use wrapper class and primitive type","body":"<p><strong>performance</strong> of applications that are dominated by numerical calculations can benefit greatly from the use of primitives.</p>\n\n<p><strong>primitive types,</strong> one uses the == operator, but for wrapper the preferred choice is to call the equals() method.</p>\n\n<p><a href=\"http://www.research.ibm.com/people/a/alpert/ptch/ptch.html\" rel=\"nofollow\">\"Primitive types considered harmful\"</a> because they mix \"procedural semantics into an otherwise uniform object-oriented model.</p>\n\n<p>Many programmers initialize numbers to 0 (default) or -1 to signify this, but depending on the scenario, this may be incorrect or misleading.</p>\n"},{"tags":[],"owner":{"account_id":9680846,"reputation":111,"user_id":7182619,"display_name":"Mohamed Afzal"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1499149045,"creation_date":1479569213,"answer_id":40694577,"question_id":1570416,"body_markdown":"Practically I had encountered a situation where use of wrapper class can be explained. \r\n\r\nI created a service class which had a `long` type variable\r\n\r\n 1. If the variable is of type `long` - when not initialized, it will be set to 0 - this will be confusing to the user when displayed in GUI  \r\n 2. If the variable is of type `Long` - when not initialized, it will be set to `null` - this null value won&#39;t show up in GUI.\r\n\r\nThis applies to `Boolean` as well where values can be more confusing when we use primitive `boolean`(as default value is false).\r\n\r\n","title":"When to use wrapper class and primitive type","body":"<p>Practically I had encountered a situation where use of wrapper class can be explained. </p>\n\n<p>I created a service class which had a <code>long</code> type variable</p>\n\n<ol>\n<li>If the variable is of type <code>long</code> - when not initialized, it will be set to 0 - this will be confusing to the user when displayed in GUI  </li>\n<li>If the variable is of type <code>Long</code> - when not initialized, it will be set to <code>null</code> - this null value won't show up in GUI.</li>\n</ol>\n\n<p>This applies to <code>Boolean</code> as well where values can be more confusing when we use primitive <code>boolean</code>(as default value is false).</p>\n"},{"tags":[],"owner":{"account_id":5039463,"reputation":354,"user_id":4047341,"display_name":"Ahmad Sayeed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571966640,"creation_date":1543323698,"answer_id":53500335,"question_id":1570416,"body_markdown":"Primitive values in Java are not object. In order to manipulate these values as object the java.lang package provides a wrapper class for each of the primitive data type. \r\n\r\nAll Wrapper classes are final. The object of all wrapper classes that can be initiated are immutable that means the value in the wrapper object can not be changed.\r\n\r\nAlthough, the **void** class is considered a wrapper class but it does not wrap any primitive values and is not initiable. It does not have public constructor, it just denotes a class object representing the keyword void.\r\n\t","title":"When to use wrapper class and primitive type","body":"<p>Primitive values in Java are not object. In order to manipulate these values as object the java.lang package provides a wrapper class for each of the primitive data type. </p>\n\n<p>All Wrapper classes are final. The object of all wrapper classes that can be initiated are immutable that means the value in the wrapper object can not be changed.</p>\n\n<p>Although, the <strong>void</strong> class is considered a wrapper class but it does not wrap any primitive values and is not initiable. It does not have public constructor, it just denotes a class object representing the keyword void.</p>\n"},{"tags":[],"owner":{"account_id":322917,"reputation":2355,"user_id":642616,"display_name":"Feuda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604563126,"creation_date":1604563126,"answer_id":64693215,"question_id":1570416,"body_markdown":"**When to Use Primitive Types**\r\n   \r\n - When doing a large amount of calculations, primitive types are always faster — they have much less overhead.   \r\n - When you don’t want the variable to be able to be null.  \r\n - When you don’t want the default value to be null.  \r\n - If the method must return a value\r\n\r\n**When to Use Wrapper Class**\r\n\r\n - When you are using Collections or Generics — it is required\r\n - If you want the MIN_SIZE or MAX_SIZE of a type.\r\n - When you want the variable to be able to be null.\r\n - When you want to default value to be null.\r\n - If sometimes the method can return a null value.\r\n\r\nfrom https://medium.com/@bpnorlander/java-understanding-primitive-types-and-wrapper-objects-a6798fb2afe9","title":"When to use wrapper class and primitive type","body":"<p><strong>When to Use Primitive Types</strong></p>\n<ul>\n<li>When doing a large amount of calculations, primitive types are always faster — they have much less overhead.</li>\n<li>When you don’t want the variable to be able to be null.</li>\n<li>When you don’t want the default value to be null.</li>\n<li>If the method must return a value</li>\n</ul>\n<p><strong>When to Use Wrapper Class</strong></p>\n<ul>\n<li>When you are using Collections or Generics — it is required</li>\n<li>If you want the MIN_SIZE or MAX_SIZE of a type.</li>\n<li>When you want the variable to be able to be null.</li>\n<li>When you want to default value to be null.</li>\n<li>If sometimes the method can return a null value.</li>\n</ul>\n<p>from <a href=\"https://medium.com/@bpnorlander/java-understanding-primitive-types-and-wrapper-objects-a6798fb2afe9\" rel=\"nofollow noreferrer\">https://medium.com/@bpnorlander/java-understanding-primitive-types-and-wrapper-objects-a6798fb2afe9</a></p>\n"}],"owner":{"account_id":58153,"reputation":5728,"user_id":2922388,"accept_rate":65,"display_name":"Gopi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94440,"favorite_count":0,"down_vote_count":1,"up_vote_count":120,"accepted_answer_id":1570470,"answer_count":11,"score":119,"last_activity_date":1679466585,"creation_date":1255583803,"question_id":1570416,"body_markdown":"When I should go for wrapper class over primitive types? Or On what circumstance I should choose between wrapper / Primitive types?","title":"When to use wrapper class and primitive type","body":"<p>When I should go for wrapper class over primitive types? Or On what circumstance I should choose between wrapper / Primitive types?</p>\n"},{"tags":["java","azure","authentication","single-sign-on","azure-ad-msal"],"answers":[{"comments":[{"owner":{"account_id":7087354,"reputation":3,"user_id":5423757,"display_name":"ken edward"},"score":0,"creation_date":1679495255,"post_id":75808953,"comment_id":133732474,"body_markdown":"THANK YOU! However, after removing the prompt method, I am still getting the browser prompt and MFA (?) Was there something else you did?","body":"THANK YOU! However, after removing the prompt method, I am still getting the browser prompt and MFA (?) Was there something else you did?"},{"owner":{"account_id":7087354,"reputation":3,"user_id":5423757,"display_name":"ken edward"},"score":0,"creation_date":1679495299,"post_id":75808953,"comment_id":133732490,"body_markdown":"22-Mar-2023 10:19:50.372 INFO com.microsoft.azuresamples.msal4j.helpers.AuthHelper.signIn sign in init\n22-Mar-2023 10:19:50.373 INFO com.microsoft.azuresamples.msal4j.helpers.AuthHelper.authorize preparing to authorize\n22-Mar-2023 10:19:50.373 INFO com.microsoft.azuresamples.msal4j.helpers.AuthHelper.authorize did not find auth result in session. trying to interactively acquire token...","body":"22-Mar-2023 10:19:50.372 INFO com.microsoft.azuresamples.msal4j.helpers.AuthHelper.signIn sign in init 22-Mar-2023 10:19:50.373 INFO com.microsoft.azuresamples.msal4j.helpers.AuthHelper.authori&zwnj;&#8203;ze preparing to authorize 22-Mar-2023 10:19:50.373 INFO com.microsoft.azuresamples.msal4j.helpers.AuthHelper.authori&zwnj;&#8203;ze did not find auth result in session. trying to interactively acquire token..."},{"owner":{"account_id":26331226,"reputation":3311,"user_id":19991670,"display_name":"Pravallika KV"},"score":0,"creation_date":1679502671,"post_id":75808953,"comment_id":133734787,"body_markdown":"Try creating your app using the command `az ad sp create-for-rbac --skip-assignment --name my-sp --password my-password --skip-mfa`. It gives the option to skip MFA.","body":"Try creating your app using the command <code>az ad sp create-for-rbac --skip-assignment --name my-sp --password my-password --skip-mfa</code>. It gives the option to skip MFA."},{"owner":{"account_id":26331226,"reputation":3311,"user_id":19991670,"display_name":"Pravallika KV"},"score":0,"creation_date":1680004289,"post_id":75808953,"comment_id":133819176,"body_markdown":"@kenedward, let me know if the issue still persists.","body":"@kenedward, let me know if the issue still persists."},{"owner":{"account_id":7087354,"reputation":3,"user_id":5423757,"display_name":"ken edward"},"score":0,"creation_date":1680200480,"post_id":75808953,"comment_id":133862159,"body_markdown":"My Admin reviewing above command. Mean time, I try to build with \n AuthorizationRequestUrlParameters parameters = AuthorizationRequestUrlParameters\n                .builder(Config.REDIRECT_URI, Collections.singleton(Config.SCOPES)).responseMode(ResponseMode.QUERY)\n                .prompt(Prompt.NONE).state(state).nonce(nonce).build();\nIt complains\n[ERROR] in/src/main/java/com/microsoft/azuresamples/msal4j/helpers/AuthHelper.java:[122,31] cannot find symbol\n[ERROR]   symbol:   variable NONE\n\nhttps://javadoc.io/doc/com.microsoft.azure/msal4j/1.13.7/com/microsoft/aad/msal4j/Prompt.html","body":"My Admin reviewing above command. Mean time, I try to build with   AuthorizationRequestUrlParameters parameters = AuthorizationRequestUrlParameters                 .builder(Config.REDIRECT_URI, Collections.singleton(Config.SCOPES)).responseMode(ResponseM&zwnj;&#8203;ode.QUERY)                 .prompt(Prompt.NONE).state(state).nonce(nonce).build(); It complains [ERROR] in/src/main/java/com/microsoft/azuresamples/msal4j/helpers/A&zwnj;&#8203;uthHelper.java:[122,&zwnj;&#8203;31] cannot find symbol [ERROR]   symbol:   variable NONE  <a href=\"https://javadoc.io/doc/com.microsoft.azure/msal4j/1.13.7/com/microsoft/aad/msal4j/Prompt.html\" rel=\"nofollow noreferrer\">javadoc.io/doc/com.microsoft.azure/msal4j/1.13.7/com/microso&zwnj;&#8203;ft/&hellip;</a>"},{"owner":{"account_id":7087354,"reputation":3,"user_id":5423757,"display_name":"ken edward"},"score":1,"creation_date":1681395237,"post_id":75808953,"comment_id":134052106,"body_markdown":"using the above, and setting supported account types to our ORG only instead of multitenant , and  using loginhint and domainhint solved the issue","body":"using the above, and setting supported account types to our ORG only instead of multitenant , and  using loginhint and domainhint solved the issue"}],"tags":[],"owner":{"account_id":26331226,"reputation":3311,"user_id":19991670,"display_name":"Pravallika KV"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679465985,"creation_date":1679465985,"answer_id":75808953,"question_id":75801146,"body_markdown":"I have gone through your problem and found a fix which will not let the prompt to choose the account again and again.  \r\nI found that in your **AuthHelper** class there is a method called **redirectToAuthorizationEndpoint**.\r\nand the configuration for **AuthorizationRequestUrlParameters** as\r\n```java\r\nAuthorizationRequestUrlParameters  parameters  =  AuthorizationRequestUrlParameters.builder(Config.REDIRECT_URI, Collections.singleton(Config.SCOPES)).responseMode(ResponseMode.QUERY)\r\n.prompt(Prompt.SELECT_ACCOUNT).state(state).nonce(nonce).build();\r\n\r\n```\r\nI have reproduced with the same configuration and I was getting the prompt repeatedly to choose the account to signin.\r\n![enter image description here](https://i.stack.imgur.com/9ck62.png)\r\n\r\nWhen I sign in below, it was redirecting to the prompt to choose the account as shown below:.\r\n![enter image description here](https://i.stack.imgur.com/x9bcr.png)\r\n\r\n![enter image description here](https://i.stack.imgur.com/iPYkM.png)  \r\n\r\nPrompt method allow to choose the account even if you have only one account.  \r\n\r\n**Fix:**\r\n\r\nTo avoid this issue, we have to just remove the whole prompt method and configure like below:\r\n\r\n```java\r\nAuthorizationRequestUrlParameters  parameters  =  AuthorizationRequestUrlParameters.builder(Config.REDIRECT_URI,  Collections.singleton(Config.SCOPES)).responseMode(ResponseMode.QUERY)\r\n.state(state).nonce(nonce).build();\r\n```\r\n![enter image description here](https://i.stack.imgur.com/rCU8b.png)\r\n\r\nIn this case, even If u have only one account to login, it will not redirect to choose account blade.  \r\nWhen I click on signin, it is not redirecting to the prompt to choose account as I have already signed in with my account once:\r\n\r\n![enter image description here](https://i.stack.imgur.com/NDdeP.png)","title":"MSAL Java Servlet Example: How to avoid Sign-In button prompting &quot;Pick an account&quot;?","body":"<p>I have gone through your problem and found a fix which will not let the prompt to choose the account again and again.<br />\nI found that in your <strong>AuthHelper</strong> class there is a method called <strong>redirectToAuthorizationEndpoint</strong>.\nand the configuration for <strong>AuthorizationRequestUrlParameters</strong> as</p>\n<pre class=\"lang-java prettyprint-override\"><code>AuthorizationRequestUrlParameters  parameters  =  AuthorizationRequestUrlParameters.builder(Config.REDIRECT_URI, Collections.singleton(Config.SCOPES)).responseMode(ResponseMode.QUERY)\n.prompt(Prompt.SELECT_ACCOUNT).state(state).nonce(nonce).build();\n\n</code></pre>\n<p>I have reproduced with the same configuration and I was getting the prompt repeatedly to choose the account to signin.\n<img src=\"https://i.stack.imgur.com/9ck62.png\" alt=\"enter image description here\" /></p>\n<p>When I sign in below, it was redirecting to the prompt to choose the account as shown below:.\n<img src=\"https://i.stack.imgur.com/x9bcr.png\" alt=\"enter image description here\" /></p>\n<p><img src=\"https://i.stack.imgur.com/iPYkM.png\" alt=\"enter image description here\" /></p>\n<p>Prompt method allow to choose the account even if you have only one account.</p>\n<p><strong>Fix:</strong></p>\n<p>To avoid this issue, we have to just remove the whole prompt method and configure like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>AuthorizationRequestUrlParameters  parameters  =  AuthorizationRequestUrlParameters.builder(Config.REDIRECT_URI,  Collections.singleton(Config.SCOPES)).responseMode(ResponseMode.QUERY)\n.state(state).nonce(nonce).build();\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/rCU8b.png\" alt=\"enter image description here\" /></p>\n<p>In this case, even If u have only one account to login, it will not redirect to choose account blade.<br />\nWhen I click on signin, it is not redirecting to the prompt to choose account as I have already signed in with my account once:</p>\n<p><img src=\"https://i.stack.imgur.com/NDdeP.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":7087354,"reputation":3,"user_id":5423757,"display_name":"ken edward"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":440,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75808953,"answer_count":1,"score":0,"last_activity_date":1679465985,"creation_date":1679401258,"question_id":75801146,"body_markdown":"I installed the MSAL Java Servlet example. It basically works, however when I click on the &quot;Sign In&quot; button it sends me to https://login.microsoftonline.com to present a prompt &quot;Pick an account&quot; (only 1 account listed). I can select my account manually and then it let&#39;s me into the MSAL sample app &quot;You are signed in&quot; page. (I should also note, that for the first time after clicking the account, it sends me to a MFA page, but not subsequent logins)\r\n\r\nQUESTION: How can I configure it to not prompt me to pick my account since there is only 1 account? (And avoid the MFA page?)\r\n\r\n  \r\n\r\nhttps://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/3.%20Java%20Servlet%20Web%20App%20Tutorial/1-Authentication/sign-in\r\n\r\nI expected to click on &quot;sign in&quot; and for it to authenticate and redirect to main app index page. Instead, it asks me to select which windows account, and then if the first time, will also issue a MFA page.","title":"MSAL Java Servlet Example: How to avoid Sign-In button prompting &quot;Pick an account&quot;?","body":"<p>I installed the MSAL Java Servlet example. It basically works, however when I click on the &quot;Sign In&quot; button it sends me to <a href=\"https://login.microsoftonline.com\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com</a> to present a prompt &quot;Pick an account&quot; (only 1 account listed). I can select my account manually and then it let's me into the MSAL sample app &quot;You are signed in&quot; page. (I should also note, that for the first time after clicking the account, it sends me to a MFA page, but not subsequent logins)</p>\n<p>QUESTION: How can I configure it to not prompt me to pick my account since there is only 1 account? (And avoid the MFA page?)</p>\n<p><a href=\"https://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/3.%20Java%20Servlet%20Web%20App%20Tutorial/1-Authentication/sign-in\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/3.%20Java%20Servlet%20Web%20App%20Tutorial/1-Authentication/sign-in</a></p>\n<p>I expected to click on &quot;sign in&quot; and for it to authenticate and redirect to main app index page. Instead, it asks me to select which windows account, and then if the first time, will also issue a MFA page.</p>\n"},{"tags":["java","android","json","server","object-oriented-database"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1679439652,"post_id":75804365,"comment_id":133722281,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":27991549,"reputation":1,"user_id":21377301,"display_name":"Fabiola"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679465354,"creation_date":1679418731,"question_id":75804365,"body_markdown":"I&#39;m creating an online shop in android studio with the use of a json file in practice the data of the various drinks reside in a json file I have to make sure that if a drink has in the json file 4 quatity if two users buy them all the next one must be exhausted.\r\n\r\nhere in the adapter class I increase and decrease the quantities:\r\n\r\n      @Override\r\n        public void onBindViewHolder(@NonNull CartAdaptor.ViewHolder holder, int position) {\r\n    \r\n            holder.title.setText(drinkDomains.get(position).getTitle());\r\n            holder.feeEachItem.setText(String.valueOf(drinkDomains.get(position).getFee()));\r\n            holder.num.setText(String.valueOf(drinkDomains.get(position).getNumberInCart()));\r\n    \r\n            int drawableResourceId = holder.itemView.getContext().getResources().getIdentifier(drinkDomains.get(position).getPic(), &quot;drawable&quot;, holder.itemView.getContext().getPackageName());\r\n    \r\n            Glide.with(holder.itemView.getContext())\r\n                    .load(drawableResourceId)\r\n                    .into(holder.pic);\r\n    \r\n            holder.plusItem.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                    managementCart.plusNumberDrink(drinkDomains, position, new ChangeNumberItemsListener() {\r\n                        @Override\r\n                        public void changed() {\r\n                            notifyDataSetChanged();\r\n                            changeNumberItemsListener.changed();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n    \r\n            holder.minusItem.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    managementCart.minusNumberDrink(drinkDomains, position, new ChangeNumberItemsListener() {\r\n                        @Override\r\n                        public void changed() {\r\n                            notifyDataSetChanged();\r\n                            changeNumberItemsListener.changed();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n    \r\n        }\r\n\r\nThe functions to use for increment and decrement reside in the ManagementCart class and are\r\n\r\n    public void  plusNumberDrink(ArrayList&lt;DrinkDomain&gt; listDrink, int position, ChangeNumberItemsListener changeNumberItemsListener){\r\n            listDrink.get(position).setNumberInCart(listDrink.get(position).getNumberInCart()+1);\r\n            drinkDB.putListObject(&quot;CartList&quot;, listDrink);\r\n            changeNumberItemsListener.changed();\r\n        }\r\n    \r\n        public void  minusNumberDrink(ArrayList&lt;DrinkDomain&gt; listDrink, int position, ChangeNumberItemsListener changeNumberItemsListener){\r\n           if(listDrink.get(position).getNumberInCart()==1){\r\n                listDrink.remove(position);\r\n            }else{\r\n                listDrink.get(position).setNumberInCart(listDrink.get(position).getNumberInCart()-1);\r\n            }\r\n            drinkDB.putListObject(&quot;CartList&quot;, listDrink);\r\n            changeNumberItemsListener.changed();\r\n        }\r\n\r\n\r\nthe idea is that if the user buys two dinks and the quantities are 4 if then another user if he buys two more to a next user he must resolve that it is finished.\r\n","title":"Set product quantity in java with json file","body":"<p>I'm creating an online shop in android studio with the use of a json file in practice the data of the various drinks reside in a json file I have to make sure that if a drink has in the json file 4 quatity if two users buy them all the next one must be exhausted.</p>\n<p>here in the adapter class I increase and decrease the quantities:</p>\n<pre><code>  @Override\n    public void onBindViewHolder(@NonNull CartAdaptor.ViewHolder holder, int position) {\n\n        holder.title.setText(drinkDomains.get(position).getTitle());\n        holder.feeEachItem.setText(String.valueOf(drinkDomains.get(position).getFee()));\n        holder.num.setText(String.valueOf(drinkDomains.get(position).getNumberInCart()));\n\n        int drawableResourceId = holder.itemView.getContext().getResources().getIdentifier(drinkDomains.get(position).getPic(), &quot;drawable&quot;, holder.itemView.getContext().getPackageName());\n\n        Glide.with(holder.itemView.getContext())\n                .load(drawableResourceId)\n                .into(holder.pic);\n\n        holder.plusItem.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                managementCart.plusNumberDrink(drinkDomains, position, new ChangeNumberItemsListener() {\n                    @Override\n                    public void changed() {\n                        notifyDataSetChanged();\n                        changeNumberItemsListener.changed();\n                    }\n                });\n            }\n        });\n\n        holder.minusItem.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                managementCart.minusNumberDrink(drinkDomains, position, new ChangeNumberItemsListener() {\n                    @Override\n                    public void changed() {\n                        notifyDataSetChanged();\n                        changeNumberItemsListener.changed();\n                    }\n                });\n            }\n        });\n\n    }\n</code></pre>\n<p>The functions to use for increment and decrement reside in the ManagementCart class and are</p>\n<pre><code>public void  plusNumberDrink(ArrayList&lt;DrinkDomain&gt; listDrink, int position, ChangeNumberItemsListener changeNumberItemsListener){\n        listDrink.get(position).setNumberInCart(listDrink.get(position).getNumberInCart()+1);\n        drinkDB.putListObject(&quot;CartList&quot;, listDrink);\n        changeNumberItemsListener.changed();\n    }\n\n    public void  minusNumberDrink(ArrayList&lt;DrinkDomain&gt; listDrink, int position, ChangeNumberItemsListener changeNumberItemsListener){\n       if(listDrink.get(position).getNumberInCart()==1){\n            listDrink.remove(position);\n        }else{\n            listDrink.get(position).setNumberInCart(listDrink.get(position).getNumberInCart()-1);\n        }\n        drinkDB.putListObject(&quot;CartList&quot;, listDrink);\n        changeNumberItemsListener.changed();\n    }\n</code></pre>\n<p>the idea is that if the user buys two dinks and the quantities are 4 if then another user if he buys two more to a next user he must resolve that it is finished.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1679465654,"post_id":75808698,"comment_id":133725140,"body_markdown":"In your reset handler without debug statements you set `hits` and `misses` counters to `0`, but you don’t set the value of `hitsText` or `missesText`. The missesText will get set during the animation timer execution, but hitsText won’t update until a circle is clicked.  You can use binding with properties to bind values together, or define a method that updates both the counters and associated text at the same time.  There may be other issues, I didn’t try this, I just scanned the code.","body":"In your reset handler without debug statements you set <code>hits</code> and <code>misses</code> counters to <code>0</code>, but you don’t set the value of <code>hitsText</code> or <code>missesText</code>. The missesText will get set during the animation timer execution, but hitsText won’t update until a circle is clicked.  You can use binding with properties to bind values together, or define a method that updates both the counters and associated text at the same time.  There may be other issues, I didn’t try this, I just scanned the code."},{"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"score":0,"creation_date":1679466087,"post_id":75808698,"comment_id":133725201,"body_markdown":"In case, the &quot;game loop&quot; updates the `missesText` but not the `hitsText`, so one value is rendered correctly and the other is not. In my opinion, the approach is not very successful. Use property binding to update the controls only when their values change, and in the &quot;game loop&quot; update the values of the corresponding properties.","body":"In case, the &quot;game loop&quot; updates the <code>missesText</code> but not the <code>hitsText</code>, so one value is rendered correctly and the other is not. In my opinion, the approach is not very successful. Use property binding to update the controls only when their values change, and in the &quot;game loop&quot; update the values of the corresponding properties."}],"answers":[{"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":3,"creation_date":1679465290,"post_id":75808821,"comment_id":133725098,"body_markdown":"But the logic is already in the ResetClickHandlerEvent code version without the debug statements.","body":"But the logic is already in the ResetClickHandlerEvent code version without the debug statements."}],"tags":[],"owner":{"account_id":8361573,"reputation":573,"user_id":6279677,"display_name":"Suchandra T"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1679464414,"creation_date":1679464414,"answer_id":75808821,"question_id":75808698,"body_markdown":"As pointed out by you in the handle method you need to add the following resetting logic which will yield you the correct result.\r\n\r\n   hits = 0;\r\n   misses = 0; \r\n\r\nHope this helps.","title":"Counter Not Resetting In JavaFX Program","body":"<p>As pointed out by you in the handle method you need to add the following resetting logic which will yield you the correct result.</p>\n<p>hits = 0;\nmisses = 0;</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":26386660,"reputation":31,"user_id":20039084,"display_name":"tonyycwang1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679464414,"creation_date":1679462818,"question_id":75808698,"body_markdown":"This is a basic circle clicking game that I built. I cannot figure out why the hits counter is not resetting to 0 after clicking the reset button. The misses counter resets perfectly fine but the hits is not. \r\n```\r\npublic class ClickingGameFX extends Application {\r\n\tprivate static final int CIRCLE_RADIUS = 25;\r\n\tprivate static final int PANE_HEIGHT = 400;\r\n\tprivate static final int PANE_WIDTH = 400;\r\n\tprivate static final int MAX_MISSES = 5;\r\n    private static final int MIN_DELAY = 1000;\r\n    private static final int MAX_DELAY = 5000;\r\n    \r\n    \r\n    private int hits;\r\n    private int misses;\r\n    private Circle target;\r\n    private Text hitsText;\r\n    private Text missesText;\r\n    private Text gameOver;\r\n    private AnimationTimer timer;\r\n    private BorderPane pane;\r\n    private ArrayList&lt;Circle&gt; circles = new ArrayList&lt;&gt;();\r\n    private boolean pauseGame = false;\r\n\t\r\n\t@Override\r\n\tpublic void start(Stage primaryStage) {\r\n\t\t\t\r\n\t\t\tPane root = new Pane();\r\n\t\t\troot.setPrefHeight(400);\r\n\t\t\troot.setPrefWidth(400);\r\n\t\t\troot.setStyle(&quot;-fx-background-color: black;&quot;);\r\n\t\t\t\r\n\t\t\thitsText = new Text(&quot;Hits: 0&quot;);\r\n\t        hitsText.setFont(Font.font(20));\r\n\t        missesText = new Text(&quot;Misses: 0&quot;);\r\n\t        missesText.setFont(Font.font(20));\r\n\t        \r\n\t        //Create hit and miss buttons\r\n\t        Button pauseButton = new Button(&quot;Pause&quot;);\r\n\t        pauseButton.setOnAction(new PauseClickHandlerEvent());\r\n\t        \r\n\t        \r\n\t        Button resetButton = new Button(&quot;Reset&quot;);\r\n\t        resetButton.setOnAction(new ResetClickHandlerEvent());\r\n\t        \r\n\t        HBox bottom = new HBox(50, pauseButton, resetButton);\r\n\t        bottom.setPrefHeight(50);\r\n\t        bottom.setPrefWidth(PANE_WIDTH);\r\n\t        bottom.setAlignment(Pos.BOTTOM_RIGHT);\r\n\t        bottom.setPadding(new Insets(10, 10, 10, 10));\r\n\t        \r\n\t\t\tpane = new BorderPane();\r\n\t\t\tHBox top = new HBox(10, hitsText, missesText);\r\n\t\t\ttop.setPadding(new Insets(10, 0, 10, 0));\r\n\t\t\tpane.setTop(top);\r\n\t        pane.setCenter(root);\r\n\t        pane.setBottom(bottom);\r\n\t        \r\n\t        timer = new GameTimer();\r\n\t        new Thread(() -&gt; {\r\n\t            try {\r\n\t                Thread.sleep(2000);\r\n\t            } catch (InterruptedException e) {\r\n\t                e.printStackTrace();\r\n\t            }\r\n\t            timer.start();\r\n\t        }).start();\r\n\t        \r\n\t        \r\n\t\t\tScene scene = new Scene(pane);\r\n\t\t\tscene.getStylesheets().add(getClass().getResource(&quot;application.css&quot;).toExternalForm());\r\n\t\t\tprimaryStage.setScene(scene);\r\n\t\t\tprimaryStage.show();\r\n\t}\r\n\t\r\n\tprivate class GameTimer extends AnimationTimer {\r\n\r\n\t    private long lastSpawnTime;\r\n\t    \r\n\r\n\t    @Override\r\n\t    public void handle(long now) {\r\n\t        // check if it&#39;s time to spawn a new circle\r\n\t        if (now - lastSpawnTime &gt;= MIN_DELAY * 1_000_000L) {\r\n\t            // create a new circle and add it to the pane\r\n\t            Circle circle = new Circle(CIRCLE_RADIUS, Color.RED);\r\n\t            circle.setOnMouseClicked(new ClickHandlerEvent());\r\n\t            pane.getChildren().add(circle);\r\n\t            relocateCircle(circle);\r\n\t            circles.add(circle);\r\n\t         \r\n\t            // set the last spawn time and reset the missed balls counter\r\n\t            lastSpawnTime = now;\r\n\t        }\r\n\r\n\t        // move the circles and check for misses\r\n\t        for (int i = 0; i &lt; circles.size(); i++) {\r\n\t            Circle circle = circles.get(i);\r\n\t            circle.setTranslateX(circle.getTranslateX() + 5);\r\n\t            if (circle.getTranslateX() &gt; PANE_WIDTH + CIRCLE_RADIUS) {\r\n\t                // circle has left the screen, remove it and increase the missed balls counter\r\n\t                pane.getChildren().remove(circle);\r\n\t                circles.remove(i);\r\n\t                if (++misses &gt;= MAX_MISSES) {\r\n\t                    // end the game if the missed balls limit has been reached\r\n\t                    endGame();\r\n\t                    break;\r\n\t                } else {\r\n\t                    // set a delay before spawning the next circle\r\n\t                    lastSpawnTime = now + (long) (Math.random() * (MAX_DELAY - MIN_DELAY) + MIN_DELAY) * 1_000_000L;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        missesText.setText(&quot;Misses: &quot; + misses);\r\n\t    }\r\n\r\n\t    private void relocateCircle(Circle circle) {\r\n\t        circle.setTranslateX(-CIRCLE_RADIUS);\r\n\t        circle.setTranslateY(new Random().nextInt(PANE_HEIGHT - 2 * CIRCLE_RADIUS) + CIRCLE_RADIUS);\r\n\t    }\r\n\r\n\t    private void endGame() {\r\n\t        stop();\r\n\r\n\t        // display the game over message in the center of the graphics pane\r\n\t        gameOver = new Text(&quot;Game Over\\nHits: &quot; + hits + &quot;\\nMisses: &quot; + misses);\r\n\t        gameOver.setFont(Font.font(30));\r\n\t        gameOver.setFill(Color.WHITE);\r\n\t        gameOver.setVisible(true);\r\n\t        HBox end = new HBox(10, gameOver);\r\n\t        end.setLayoutX(125);\r\n\t        end.setLayoutY(200);\r\n\t        pane.getChildren().add(end);\r\n\t        \r\n\t        circles.clear();\r\n\t        \r\n\t    }\r\n\t}\r\n\t\r\n\tprivate class ClickHandlerEvent implements EventHandler&lt;MouseEvent&gt; {\r\n\r\n\t\t@Override\r\n\t\tpublic void handle(MouseEvent e) {\r\n\t\t\tCircle circle = (Circle) e.getSource();\r\n\t\t\tif (pauseGame == true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\tpane.getChildren().remove(circle);\r\n\t\t\te.consume();\r\n\t\t\thits++;\r\n\t\t\thitsText.setText(&quot;Hits: &quot; + hits);\r\n\t\t\tmissesText.setText(&quot;Misses: &quot; + misses);\r\n\t\t\t\r\n\t\t\tif (!circles.remove(circle)) {\r\n\t            misses++;\r\n\t            missesText.setText(&quot;Misses: &quot; + misses);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate class ResetClickHandlerEvent implements EventHandler&lt;ActionEvent&gt; {\r\n\r\n\t\t@Override\r\n\t\tpublic void handle(ActionEvent e) {\r\n\t\thits = 0;\r\n        misses = 0;\r\n\t\r\n\t        pane.getChildren().removeIf(node -&gt; node instanceof Circle);\r\n\t       \r\n\t        if (gameOver != null) {\r\n\t        \tgameOver.setVisible(false);\r\n\t        }\r\n\t        timer.start();\r\n\t\t}\r\n    }\r\n\t\r\n\tprivate class PauseClickHandlerEvent implements EventHandler&lt;ActionEvent&gt; {\r\n\r\n\t    @Override\r\n\t    public void handle(ActionEvent e) {\r\n\t        if (pauseGame) {\r\n\t            // resume the game\r\n\t            timer.start();\r\n\t            pauseGame = false;\r\n\t        } else {\r\n\t            // pause the game\r\n\t            timer.stop();\r\n\t            pauseGame = true;\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\t\r\n\tprivate void relocateCircle() {\r\n\t\t\r\n\t\ttarget.setTranslateX(new Random().nextInt(PANE_WIDTH - 2 * CIRCLE_RADIUS) + CIRCLE_RADIUS);\r\n        target.setTranslateY(new Random().nextInt(PANE_HEIGHT - 2 * CIRCLE_RADIUS) + CIRCLE_RADIUS);\r\n    }\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tlaunch(args);\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI also added two if statements in the ResetClickHandlerEvent class to print to the console if any counter is reset to 0, and the console prints &quot;Misses counter reset to zero.&quot;\r\n\r\n```\r\nprivate class ResetClickHandlerEvent implements EventHandler&lt;ActionEvent&gt; {\r\n\r\n\t\t@Override\r\n\t\tpublic void handle(ActionEvent e) {\r\n\t\t\t\r\n\t\t\tif (hits == 0) {\r\n\t\t        System.out.println(&quot;Hits counter reset to zero.&quot;);\r\n\t\t        }\r\n\t\t\tif (misses == 0) {\r\n\t\t\t\tSystem.out.println(&quot;Misses counter reset to zero&quot;);\r\n\t\t\t}\r\n\t        pane.getChildren().removeIf(node -&gt; node instanceof Circle);\r\n\t        if (gameOver != null) {\r\n\t        \tgameOver.setVisible(false);\r\n\t        }\r\n\t        timer.start();\r\n\t\t}\r\n    }\r\n```\r\n\r\n\r\n","title":"Counter Not Resetting In JavaFX Program","body":"<p>This is a basic circle clicking game that I built. I cannot figure out why the hits counter is not resetting to 0 after clicking the reset button. The misses counter resets perfectly fine but the hits is not.</p>\n<pre><code>public class ClickingGameFX extends Application {\n    private static final int CIRCLE_RADIUS = 25;\n    private static final int PANE_HEIGHT = 400;\n    private static final int PANE_WIDTH = 400;\n    private static final int MAX_MISSES = 5;\n    private static final int MIN_DELAY = 1000;\n    private static final int MAX_DELAY = 5000;\n    \n    \n    private int hits;\n    private int misses;\n    private Circle target;\n    private Text hitsText;\n    private Text missesText;\n    private Text gameOver;\n    private AnimationTimer timer;\n    private BorderPane pane;\n    private ArrayList&lt;Circle&gt; circles = new ArrayList&lt;&gt;();\n    private boolean pauseGame = false;\n    \n    @Override\n    public void start(Stage primaryStage) {\n            \n            Pane root = new Pane();\n            root.setPrefHeight(400);\n            root.setPrefWidth(400);\n            root.setStyle(&quot;-fx-background-color: black;&quot;);\n            \n            hitsText = new Text(&quot;Hits: 0&quot;);\n            hitsText.setFont(Font.font(20));\n            missesText = new Text(&quot;Misses: 0&quot;);\n            missesText.setFont(Font.font(20));\n            \n            //Create hit and miss buttons\n            Button pauseButton = new Button(&quot;Pause&quot;);\n            pauseButton.setOnAction(new PauseClickHandlerEvent());\n            \n            \n            Button resetButton = new Button(&quot;Reset&quot;);\n            resetButton.setOnAction(new ResetClickHandlerEvent());\n            \n            HBox bottom = new HBox(50, pauseButton, resetButton);\n            bottom.setPrefHeight(50);\n            bottom.setPrefWidth(PANE_WIDTH);\n            bottom.setAlignment(Pos.BOTTOM_RIGHT);\n            bottom.setPadding(new Insets(10, 10, 10, 10));\n            \n            pane = new BorderPane();\n            HBox top = new HBox(10, hitsText, missesText);\n            top.setPadding(new Insets(10, 0, 10, 0));\n            pane.setTop(top);\n            pane.setCenter(root);\n            pane.setBottom(bottom);\n            \n            timer = new GameTimer();\n            new Thread(() -&gt; {\n                try {\n                    Thread.sleep(2000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                timer.start();\n            }).start();\n            \n            \n            Scene scene = new Scene(pane);\n            scene.getStylesheets().add(getClass().getResource(&quot;application.css&quot;).toExternalForm());\n            primaryStage.setScene(scene);\n            primaryStage.show();\n    }\n    \n    private class GameTimer extends AnimationTimer {\n\n        private long lastSpawnTime;\n        \n\n        @Override\n        public void handle(long now) {\n            // check if it's time to spawn a new circle\n            if (now - lastSpawnTime &gt;= MIN_DELAY * 1_000_000L) {\n                // create a new circle and add it to the pane\n                Circle circle = new Circle(CIRCLE_RADIUS, Color.RED);\n                circle.setOnMouseClicked(new ClickHandlerEvent());\n                pane.getChildren().add(circle);\n                relocateCircle(circle);\n                circles.add(circle);\n             \n                // set the last spawn time and reset the missed balls counter\n                lastSpawnTime = now;\n            }\n\n            // move the circles and check for misses\n            for (int i = 0; i &lt; circles.size(); i++) {\n                Circle circle = circles.get(i);\n                circle.setTranslateX(circle.getTranslateX() + 5);\n                if (circle.getTranslateX() &gt; PANE_WIDTH + CIRCLE_RADIUS) {\n                    // circle has left the screen, remove it and increase the missed balls counter\n                    pane.getChildren().remove(circle);\n                    circles.remove(i);\n                    if (++misses &gt;= MAX_MISSES) {\n                        // end the game if the missed balls limit has been reached\n                        endGame();\n                        break;\n                    } else {\n                        // set a delay before spawning the next circle\n                        lastSpawnTime = now + (long) (Math.random() * (MAX_DELAY - MIN_DELAY) + MIN_DELAY) * 1_000_000L;\n                    }\n                }\n            }\n            missesText.setText(&quot;Misses: &quot; + misses);\n        }\n\n        private void relocateCircle(Circle circle) {\n            circle.setTranslateX(-CIRCLE_RADIUS);\n            circle.setTranslateY(new Random().nextInt(PANE_HEIGHT - 2 * CIRCLE_RADIUS) + CIRCLE_RADIUS);\n        }\n\n        private void endGame() {\n            stop();\n\n            // display the game over message in the center of the graphics pane\n            gameOver = new Text(&quot;Game Over\\nHits: &quot; + hits + &quot;\\nMisses: &quot; + misses);\n            gameOver.setFont(Font.font(30));\n            gameOver.setFill(Color.WHITE);\n            gameOver.setVisible(true);\n            HBox end = new HBox(10, gameOver);\n            end.setLayoutX(125);\n            end.setLayoutY(200);\n            pane.getChildren().add(end);\n            \n            circles.clear();\n            \n        }\n    }\n    \n    private class ClickHandlerEvent implements EventHandler&lt;MouseEvent&gt; {\n\n        @Override\n        public void handle(MouseEvent e) {\n            Circle circle = (Circle) e.getSource();\n            if (pauseGame == true) {\n                return;\n            }\n            else {\n            pane.getChildren().remove(circle);\n            e.consume();\n            hits++;\n            hitsText.setText(&quot;Hits: &quot; + hits);\n            missesText.setText(&quot;Misses: &quot; + misses);\n            \n            if (!circles.remove(circle)) {\n                misses++;\n                missesText.setText(&quot;Misses: &quot; + misses);\n                }\n            }\n        }\n    }\n    \n    private class ResetClickHandlerEvent implements EventHandler&lt;ActionEvent&gt; {\n\n        @Override\n        public void handle(ActionEvent e) {\n        hits = 0;\n        misses = 0;\n    \n            pane.getChildren().removeIf(node -&gt; node instanceof Circle);\n           \n            if (gameOver != null) {\n                gameOver.setVisible(false);\n            }\n            timer.start();\n        }\n    }\n    \n    private class PauseClickHandlerEvent implements EventHandler&lt;ActionEvent&gt; {\n\n        @Override\n        public void handle(ActionEvent e) {\n            if (pauseGame) {\n                // resume the game\n                timer.start();\n                pauseGame = false;\n            } else {\n                // pause the game\n                timer.stop();\n                pauseGame = true;\n            }\n        }\n    }\n\n    \n    private void relocateCircle() {\n        \n        target.setTranslateX(new Random().nextInt(PANE_WIDTH - 2 * CIRCLE_RADIUS) + CIRCLE_RADIUS);\n        target.setTranslateY(new Random().nextInt(PANE_HEIGHT - 2 * CIRCLE_RADIUS) + CIRCLE_RADIUS);\n    }\n    \n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>I also added two if statements in the ResetClickHandlerEvent class to print to the console if any counter is reset to 0, and the console prints &quot;Misses counter reset to zero.&quot;</p>\n<pre><code>private class ResetClickHandlerEvent implements EventHandler&lt;ActionEvent&gt; {\n\n        @Override\n        public void handle(ActionEvent e) {\n            \n            if (hits == 0) {\n                System.out.println(&quot;Hits counter reset to zero.&quot;);\n                }\n            if (misses == 0) {\n                System.out.println(&quot;Misses counter reset to zero&quot;);\n            }\n            pane.getChildren().removeIf(node -&gt; node instanceof Circle);\n            if (gameOver != null) {\n                gameOver.setVisible(false);\n            }\n            timer.start();\n        }\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1679457129,"post_id":75808296,"comment_id":133724303,"body_markdown":"Doesn&#39;t the compiler check if all the `static final`s are initialised at compile time?","body":"Doesn&#39;t the compiler check if all the <code>static final</code>s are initialised at compile time?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1679457553,"post_id":75808296,"comment_id":133724349,"body_markdown":"OP wants a null check too","body":"OP wants a null check too"}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679458004,"creation_date":1679458004,"answer_id":75808376,"question_id":75808296,"body_markdown":"Not &quot;magic&quot;, just a function, but does what you want clearly and succinctly:\r\n```\r\n    static String getNonNullProperty(Properties props, String key) {\r\n        String value = props.getProperty(key);\r\n        if (value == null) {\r\n            throw new RuntimeException(&quot;No value for &#39;&quot; + key + &#39;&quot;&#39;);\r\n        }\r\n        return value;\r\n    }\r\n...\r\n        DIGITAL_ASSETS_UPLOADS_BUCKET = getNonNullProperty(prop, &quot;aws.bucket.digitalassetsuploads&quot;);\r\n        REGION = getNonNullProperty(prop, &quot;aws.region&quot;);\r\n        APP_PEEFIX = getNonNullProperty(prop, &quot;cdk.appprefix&quot;);\r\n        ACCOUNT_NUMBER = getNonNullProperty(prop, &quot;aws.accountnumber&quot;);\r\n        TEXTRACT_SSM_SNS_NAME = getNonNullProperty(prop, &quot;aws.ssm.sns.textract&quot;);\r\n        TEXTRACT_SSM_SQS_NAME = getNonNullProperty(prop, &quot;aws.ssm.sqs.textract&quot;);\r\n```","title":"What&#39;s the best way to throw a RuntimeException if a bunch of variables aren&#39;t initialized?","body":"<p>Not &quot;magic&quot;, just a function, but does what you want clearly and succinctly:</p>\n<pre><code>    static String getNonNullProperty(Properties props, String key) {\n        String value = props.getProperty(key);\n        if (value == null) {\n            throw new RuntimeException(&quot;No value for '&quot; + key + '&quot;');\n        }\n        return value;\n    }\n...\n        DIGITAL_ASSETS_UPLOADS_BUCKET = getNonNullProperty(prop, &quot;aws.bucket.digitalassetsuploads&quot;);\n        REGION = getNonNullProperty(prop, &quot;aws.region&quot;);\n        APP_PEEFIX = getNonNullProperty(prop, &quot;cdk.appprefix&quot;);\n        ACCOUNT_NUMBER = getNonNullProperty(prop, &quot;aws.accountnumber&quot;);\n        TEXTRACT_SSM_SNS_NAME = getNonNullProperty(prop, &quot;aws.ssm.sns.textract&quot;);\n        TEXTRACT_SSM_SQS_NAME = getNonNullProperty(prop, &quot;aws.ssm.sqs.textract&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679458321,"creation_date":1679458321,"answer_id":75808393,"question_id":75808296,"body_markdown":"The compiler should give you an error if you forgot to initialise a `static final` field.\r\n\r\nAs for throwing an exception when it is initialised to null, you can use [`Objects.requireNonNull`][1], which is almost like an &quot;annotation&quot;. You can optionally supply an error message.\r\n\r\n    REGION = Objects.requireNonNull(prop.getProperty(&quot;aws.region&quot;));\r\n    APP_PEEFIX = Objects.requireNonNull(\r\n        prop.getProperty(&quot;cdk.appprefix&quot;), &quot;App prefix is null!&quot;\r\n    );\r\n\r\nThis throws a `NullPointerException` if the value is null, which is a kind of `RuntimeException`.\r\n\r\nAlternatively, since you are always using `getProperty` to initialise the properties, you can write a `@NotNull` method that wraps around it:\r\n\r\n    private static final Properties prop = new Properties();\r\n    @NotNull\r\n    private static getProperty(String key) {\r\n        return prop.getProperty(key);\r\n    }\r\n\r\nYou can configure IntelliJ to generate a null check for this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAt runtime, an `ExceptionInInitializerError` will be thrown, which is not a `RuntimeException`, but there is an `IllegalStateException` as the cause, with an appropriate message.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\r\n  [2]: https://i.stack.imgur.com/PSuN5.png","title":"What&#39;s the best way to throw a RuntimeException if a bunch of variables aren&#39;t initialized?","body":"<p>The compiler should give you an error if you forgot to initialise a <code>static final</code> field.</p>\n<p>As for throwing an exception when it is initialised to null, you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\" rel=\"nofollow noreferrer\"><code>Objects.requireNonNull</code></a>, which is almost like an &quot;annotation&quot;. You can optionally supply an error message.</p>\n<pre><code>REGION = Objects.requireNonNull(prop.getProperty(&quot;aws.region&quot;));\nAPP_PEEFIX = Objects.requireNonNull(\n    prop.getProperty(&quot;cdk.appprefix&quot;), &quot;App prefix is null!&quot;\n);\n</code></pre>\n<p>This throws a <code>NullPointerException</code> if the value is null, which is a kind of <code>RuntimeException</code>.</p>\n<p>Alternatively, since you are always using <code>getProperty</code> to initialise the properties, you can write a <code>@NotNull</code> method that wraps around it:</p>\n<pre><code>private static final Properties prop = new Properties();\n@NotNull\nprivate static getProperty(String key) {\n    return prop.getProperty(key);\n}\n</code></pre>\n<p>You can configure IntelliJ to generate a null check for this:</p>\n<p><a href=\"https://i.stack.imgur.com/PSuN5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PSuN5.png\" alt=\"enter image description here\" /></a></p>\n<p>At runtime, an <code>ExceptionInInitializerError</code> will be thrown, which is not a <code>RuntimeException</code>, but there is an <code>IllegalStateException</code> as the cause, with an appropriate message.</p>\n"},{"comments":[{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1679459766,"post_id":75808394,"comment_id":133724542,"body_markdown":"This is heading in the right direction, but the underlying `Properties` should be encapsulated by the new class, not extended. We don&#39;t need/want the `Properties` interface, and this violates the contract of the overridden `getProperty()` method. No need for that when a single method in a wrapper meets the need.","body":"This is heading in the right direction, but the underlying <code>Properties</code> should be encapsulated by the new class, not extended. We don&#39;t need/want the <code>Properties</code> interface, and this violates the contract of the overridden <code>getProperty()</code> method. No need for that when a single method in a wrapper meets the need."},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1679461320,"post_id":75808394,"comment_id":133724679,"body_markdown":"I have no idea what this comment means. Properties is extended in this sample because it&#39;s a decorator - that&#39;s how the pattern works. Properties is not an interface. How don&#39;t you need/want the `Properties` _class_ when that&#39;s what the OP is using? What contract is being violated? No need for what? A single method in what wrapper?","body":"I have no idea what this comment means. Properties is extended in this sample because it&#39;s a decorator - that&#39;s how the pattern works. Properties is not an interface. How don&#39;t you need/want the <code>Properties</code> <i>class</i> when that&#39;s what the OP is using? What contract is being violated? No need for what? A single method in what wrapper?"}],"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679458337,"creation_date":1679458337,"answer_id":75808394,"question_id":75808296,"body_markdown":"One option is [decorating][1] `Properties` with a class that throws the exception on calling `getProperty()`\r\n\r\n    import java.util.Properties;\r\n    \r\n    public class NonNullProperties extends Properties {\r\n        private final Properties mProps;\r\n    \r\n        public NonNullProperties(Properties props) {\r\n            mProps = props;\r\n        }\r\n    \r\n        @Override\r\n        public String getProperty(String key) {\r\n            String property = super.getProperty(key);\r\n            if (property == null) {\r\n                throw new  NullPointerException(key + &quot; was null!&quot;);\r\n            }\r\n            \r\n            return  property;\r\n        }\r\n    \r\n        // OVERRIDE AND DELEGATE OTHER METHODS\r\n    }\r\n\r\nThen the only thing you have to change in your code is wrapping the Properties class.\r\n\r\n    Properties prop = new NonNullProperties(new Properties());\r\n\r\n  [1]: https://www.google.com/search?q=java%20decorator%20pattern","title":"What&#39;s the best way to throw a RuntimeException if a bunch of variables aren&#39;t initialized?","body":"<p>One option is <a href=\"https://www.google.com/search?q=java%20decorator%20pattern\" rel=\"nofollow noreferrer\">decorating</a> <code>Properties</code> with a class that throws the exception on calling <code>getProperty()</code></p>\n<pre><code>import java.util.Properties;\n\npublic class NonNullProperties extends Properties {\n    private final Properties mProps;\n\n    public NonNullProperties(Properties props) {\n        mProps = props;\n    }\n\n    @Override\n    public String getProperty(String key) {\n        String property = super.getProperty(key);\n        if (property == null) {\n            throw new  NullPointerException(key + &quot; was null!&quot;);\n        }\n        \n        return  property;\n    }\n\n    // OVERRIDE AND DELEGATE OTHER METHODS\n}\n</code></pre>\n<p>Then the only thing you have to change in your code is wrapping the Properties class.</p>\n<pre><code>Properties prop = new NonNullProperties(new Properties());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679464409,"creation_date":1679463264,"answer_id":75808725,"question_id":75808296,"body_markdown":"Wrap your `Properties` in a simple helper that does what you want:\r\n\r\n```java\r\npublic final class NonNullProperties {\r\n\r\n  private final Properties properties;\r\n\r\n  public NonNullProperties(Properties properties) {\r\n    this.properties = Objects.requireNonNull(properties);\r\n  }\r\n\r\n  public String get(String name) {\r\n    return Objects.requireNonNull(properties.getProperty(name), name);\r\n  }\r\n  \r\n}\r\n```\r\n\r\nYour handling of the resource stream leaves the stream open, and missing configuration could be reported more clearly.\r\n\r\n```java\r\nProperties properties = new Properties();\r\nInputStream is = AppProperties.class.getClassLoader().getResourceAsStream(CONFIG_NAME);\r\nif (is == null) throw new UncheckedIOException(new FileNotFoundException(CONFIG_NAME));\r\ntry (is) {\r\n  properties.load(is);\r\n} catch (IOException ex) {\r\n  throw new UncheckedIOException(ex);\r\n}\r\n\r\nNonNullProperties config = new NonNullProperties(properties);\r\nDIGITAL_ASSETS_UPLOADS_BUCKET = config.get(&quot;aws.bucket.digitalassetsuploads&quot;);\r\n...\r\n```","title":"What&#39;s the best way to throw a RuntimeException if a bunch of variables aren&#39;t initialized?","body":"<p>Wrap your <code>Properties</code> in a simple helper that does what you want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class NonNullProperties {\n\n  private final Properties properties;\n\n  public NonNullProperties(Properties properties) {\n    this.properties = Objects.requireNonNull(properties);\n  }\n\n  public String get(String name) {\n    return Objects.requireNonNull(properties.getProperty(name), name);\n  }\n  \n}\n</code></pre>\n<p>Your handling of the resource stream leaves the stream open, and missing configuration could be reported more clearly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Properties properties = new Properties();\nInputStream is = AppProperties.class.getClassLoader().getResourceAsStream(CONFIG_NAME);\nif (is == null) throw new UncheckedIOException(new FileNotFoundException(CONFIG_NAME));\ntry (is) {\n  properties.load(is);\n} catch (IOException ex) {\n  throw new UncheckedIOException(ex);\n}\n\nNonNullProperties config = new NonNullProperties(properties);\nDIGITAL_ASSETS_UPLOADS_BUCKET = config.get(&quot;aws.bucket.digitalassetsuploads&quot;);\n...\n</code></pre>\n"}],"owner":{"account_id":149979,"reputation":2514,"user_id":362859,"accept_rate":70,"display_name":"Vladimir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1679464409,"creation_date":1679456903,"question_id":75808296,"body_markdown":"I have the following AppProperties class:\r\n\r\n    import java.io.IOException;\r\n    import java.util.Properties;\r\n    \r\n    public class AppProperties {\r\n    \r\n        public static final String DIGITAL_ASSETS_UPLOADS_BUCKET;\r\n        public static final String REGION;\r\n        public static final String APP_PEEFIX;\r\n        public static final String ACCOUNT_NUMBER;\r\n    \r\n        public static final String TEXTRACT_SSM_SNS_NAME;\r\n        public static final String TEXTRACT_SSM_SQS_NAME;\r\n    \r\n    \r\n        /**\r\n         * Let&#39;s initialize the variables from the application.properties file\r\n         */\r\n        static {\r\n    \r\n            Properties prop = new Properties();\r\n            try {\r\n                prop.load(AppProperties.class.getClassLoader().getResourceAsStream(&quot;application.properties&quot;));\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(&quot;Couldn&#39;t retrieve the application.properties file from the classpath. &quot;, e);\r\n            }\r\n    \r\n            DIGITAL_ASSETS_UPLOADS_BUCKET = prop.getProperty(&quot;aws.bucket.digitalassetsuploads&quot;);\r\n            REGION = prop.getProperty(&quot;aws.region&quot;);\r\n            APP_PEEFIX = prop.getProperty(&quot;cdk.appprefix&quot;);\r\n            ACCOUNT_NUMBER = prop.getProperty(&quot;aws.accountnumber&quot;);\r\n            TEXTRACT_SSM_SNS_NAME = prop.getProperty(&quot;aws.ssm.sns.textract&quot;);\r\n            TEXTRACT_SSM_SQS_NAME = prop.getProperty(&quot;aws.ssm.sqs.textract&quot;);\r\n    \r\n        }\r\n    }\r\n\r\nWhat I would love to do is use an Annotation or some &quot;magic&quot; that would throw a RuntimeException if any of the variables aren&#39;t initialized or if any of the values are null. I know I can do a manual check on every variable but it&#39;s too dirty of an approach....Kotlin makes this too easy and I&#39;m spoiled. \r\n\r\nIs this possible? ","title":"What&#39;s the best way to throw a RuntimeException if a bunch of variables aren&#39;t initialized?","body":"<p>I have the following AppProperties class:</p>\n<pre><code>import java.io.IOException;\nimport java.util.Properties;\n\npublic class AppProperties {\n\n    public static final String DIGITAL_ASSETS_UPLOADS_BUCKET;\n    public static final String REGION;\n    public static final String APP_PEEFIX;\n    public static final String ACCOUNT_NUMBER;\n\n    public static final String TEXTRACT_SSM_SNS_NAME;\n    public static final String TEXTRACT_SSM_SQS_NAME;\n\n\n    /**\n     * Let's initialize the variables from the application.properties file\n     */\n    static {\n\n        Properties prop = new Properties();\n        try {\n            prop.load(AppProperties.class.getClassLoader().getResourceAsStream(&quot;application.properties&quot;));\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Couldn't retrieve the application.properties file from the classpath. &quot;, e);\n        }\n\n        DIGITAL_ASSETS_UPLOADS_BUCKET = prop.getProperty(&quot;aws.bucket.digitalassetsuploads&quot;);\n        REGION = prop.getProperty(&quot;aws.region&quot;);\n        APP_PEEFIX = prop.getProperty(&quot;cdk.appprefix&quot;);\n        ACCOUNT_NUMBER = prop.getProperty(&quot;aws.accountnumber&quot;);\n        TEXTRACT_SSM_SNS_NAME = prop.getProperty(&quot;aws.ssm.sns.textract&quot;);\n        TEXTRACT_SSM_SQS_NAME = prop.getProperty(&quot;aws.ssm.sqs.textract&quot;);\n\n    }\n}\n</code></pre>\n<p>What I would love to do is use an Annotation or some &quot;magic&quot; that would throw a RuntimeException if any of the variables aren't initialized or if any of the values are null. I know I can do a manual check on every variable but it's too dirty of an approach....Kotlin makes this too easy and I'm spoiled.</p>\n<p>Is this possible?</p>\n"},{"tags":["java","websocket","netty"],"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679463515,"creation_date":1679463515,"question_id":75808739,"body_markdown":"I am using netty `implementation &#39;io.netty:netty-all:4.1.65.Final&#39;` as my websocket server, today I found a problem that when the transfer content length more thatn 300 english words. The websocket connection will disconnected automaticallly(the websocket error code is 1005). This is the server side define:\r\n\r\n\r\n    package com.dolphin.soa.post.config.common.websocket;\r\n    \r\n    import io.netty.bootstrap.ServerBootstrap;\r\n    import io.netty.channel.ChannelFuture;\r\n    import io.netty.channel.ChannelInitializer;\r\n    import io.netty.channel.EventLoopGroup;\r\n    import io.netty.channel.nio.NioEventLoopGroup;\r\n    import io.netty.channel.socket.SocketChannel;\r\n    import io.netty.channel.socket.nio.NioServerSocketChannel;\r\n    import io.netty.handler.codec.http.HttpObjectAggregator;\r\n    import io.netty.handler.codec.http.HttpServerCodec;\r\n    import io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandler;\r\n    import io.netty.handler.codec.serialization.ObjectEncoder;\r\n    import io.netty.handler.stream.ChunkedWriteHandler;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    \r\n    import javax.annotation.PostConstruct;\r\n    import javax.annotation.PreDestroy;\r\n    import java.net.InetSocketAddress;\r\n    \r\n    public class WebSocketServer extends ChannelInitializer&lt;SocketChannel&gt; {\r\n    \r\n        @Override\r\n        protected void initChannel(SocketChannel ch) {\r\n    \r\n        }\r\n    \r\n        private static final Logger log = LoggerFactory.getLogger(WebSocketServer.class);\r\n    \r\n        private static final String WEBSOCKET_PROTOCOL = &quot;WebSocket&quot;;\r\n    \r\n        /**\r\n         * port number\r\n         */\r\n        @Value(&quot;${webSocket.netty.port:58080}&quot;)\r\n        private int port;\r\n    \r\n        /**\r\n         * webSocket path\r\n         */\r\n        @Value(&quot;${webSocket.netty.path:/post/websocket}&quot;)\r\n        private String webSocketPath;\r\n    \r\n        @Autowired\r\n        private ChatWebSocketHandler webSocketHandler;\r\n    \r\n        private EventLoopGroup bossGroup;\r\n        private EventLoopGroup workGroup;\r\n    \r\n        /**\r\n         * start\r\n         *\r\n         * @throws InterruptedException\r\n         */\r\n        private void start() throws InterruptedException {\r\n            bossGroup = new NioEventLoopGroup();\r\n            workGroup = new NioEventLoopGroup();\r\n            ServerBootstrap bootstrap = new ServerBootstrap();\r\n            bootstrap.group(bossGroup, workGroup);\r\n            bootstrap.channel(NioServerSocketChannel.class);\r\n            bootstrap.localAddress(new InetSocketAddress(port));\r\n            bootstrap.childHandler(new ChannelInitializer&lt;SocketChannel&gt;() {\r\n    \r\n                @Override\r\n                protected void initChannel(SocketChannel ch) throws Exception {\r\n                    ch.pipeline().addLast(new HttpServerCodec());\r\n                    ch.pipeline().addLast(new ObjectEncoder());\r\n                    ch.pipeline().addLast(new ChunkedWriteHandler());\r\n                    /**\r\n                     *\r\n                     */\r\n                    ch.pipeline().addLast(new HttpObjectAggregator(81920));\r\n                    ch.pipeline().addLast(webSocketHandler);\r\n                    ch.pipeline().addLast(new WebSocketServerProtocolHandler(webSocketPath, WEBSOCKET_PROTOCOL, true, 65536 * 10));\r\n                }\r\n            });\r\n            ChannelFuture channelFuture = bootstrap.bind().sync();\r\n            log.info(&quot;Server started and listen on:{}&quot;, channelFuture.channel().localAddress());\r\n            channelFuture.channel().closeFuture().sync();\r\n        }\r\n    \r\n        /**\r\n         *\r\n         *\r\n         * @throws InterruptedException\r\n         */\r\n        @PreDestroy\r\n        public void destroy() throws InterruptedException {\r\n            if (bossGroup != null) {\r\n                bossGroup.shutdownGracefully().sync();\r\n            }\r\n            if (workGroup != null) {\r\n                workGroup.shutdownGracefully().sync();\r\n            }\r\n        }\r\n    \r\n        @PostConstruct()\r\n        public void init() {\r\n            new Thread(() -&gt; {\r\n                try {\r\n                    start();\r\n                } catch (InterruptedException e) {\r\n                    log.error(&quot;start netty server failed&quot;, e);\r\n                }\r\n            }).start();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\nI have tried to set the `HttpObjectAggregator` length from 8192 to 81920, seems did not work(the allowed content increase some words but did not increase for 10 tons). \r\n\r\n\r\n* is it possible to increse the content? what should I do\r\n* should I increase the content length or send multiple times with small length?\r\n\r\n\r\n\r\n\r\n","title":"is it possible to change the content length of websocket when using netty","body":"<p>I am using netty <code>implementation 'io.netty:netty-all:4.1.65.Final'</code> as my websocket server, today I found a problem that when the transfer content length more thatn 300 english words. The websocket connection will disconnected automaticallly(the websocket error code is 1005). This is the server side define:</p>\n<pre><code>package com.dolphin.soa.post.config.common.websocket;\n\nimport io.netty.bootstrap.ServerBootstrap;\nimport io.netty.channel.ChannelFuture;\nimport io.netty.channel.ChannelInitializer;\nimport io.netty.channel.EventLoopGroup;\nimport io.netty.channel.nio.NioEventLoopGroup;\nimport io.netty.channel.socket.SocketChannel;\nimport io.netty.channel.socket.nio.NioServerSocketChannel;\nimport io.netty.handler.codec.http.HttpObjectAggregator;\nimport io.netty.handler.codec.http.HttpServerCodec;\nimport io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandler;\nimport io.netty.handler.codec.serialization.ObjectEncoder;\nimport io.netty.handler.stream.ChunkedWriteHandler;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\n\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\nimport java.net.InetSocketAddress;\n\npublic class WebSocketServer extends ChannelInitializer&lt;SocketChannel&gt; {\n\n    @Override\n    protected void initChannel(SocketChannel ch) {\n\n    }\n\n    private static final Logger log = LoggerFactory.getLogger(WebSocketServer.class);\n\n    private static final String WEBSOCKET_PROTOCOL = &quot;WebSocket&quot;;\n\n    /**\n     * port number\n     */\n    @Value(&quot;${webSocket.netty.port:58080}&quot;)\n    private int port;\n\n    /**\n     * webSocket path\n     */\n    @Value(&quot;${webSocket.netty.path:/post/websocket}&quot;)\n    private String webSocketPath;\n\n    @Autowired\n    private ChatWebSocketHandler webSocketHandler;\n\n    private EventLoopGroup bossGroup;\n    private EventLoopGroup workGroup;\n\n    /**\n     * start\n     *\n     * @throws InterruptedException\n     */\n    private void start() throws InterruptedException {\n        bossGroup = new NioEventLoopGroup();\n        workGroup = new NioEventLoopGroup();\n        ServerBootstrap bootstrap = new ServerBootstrap();\n        bootstrap.group(bossGroup, workGroup);\n        bootstrap.channel(NioServerSocketChannel.class);\n        bootstrap.localAddress(new InetSocketAddress(port));\n        bootstrap.childHandler(new ChannelInitializer&lt;SocketChannel&gt;() {\n\n            @Override\n            protected void initChannel(SocketChannel ch) throws Exception {\n                ch.pipeline().addLast(new HttpServerCodec());\n                ch.pipeline().addLast(new ObjectEncoder());\n                ch.pipeline().addLast(new ChunkedWriteHandler());\n                /**\n                 *\n                 */\n                ch.pipeline().addLast(new HttpObjectAggregator(81920));\n                ch.pipeline().addLast(webSocketHandler);\n                ch.pipeline().addLast(new WebSocketServerProtocolHandler(webSocketPath, WEBSOCKET_PROTOCOL, true, 65536 * 10));\n            }\n        });\n        ChannelFuture channelFuture = bootstrap.bind().sync();\n        log.info(&quot;Server started and listen on:{}&quot;, channelFuture.channel().localAddress());\n        channelFuture.channel().closeFuture().sync();\n    }\n\n    /**\n     *\n     *\n     * @throws InterruptedException\n     */\n    @PreDestroy\n    public void destroy() throws InterruptedException {\n        if (bossGroup != null) {\n            bossGroup.shutdownGracefully().sync();\n        }\n        if (workGroup != null) {\n            workGroup.shutdownGracefully().sync();\n        }\n    }\n\n    @PostConstruct()\n    public void init() {\n        new Thread(() -&gt; {\n            try {\n                start();\n            } catch (InterruptedException e) {\n                log.error(&quot;start netty server failed&quot;, e);\n            }\n        }).start();\n    }\n}\n</code></pre>\n<p>I have tried to set the <code>HttpObjectAggregator</code> length from 8192 to 81920, seems did not work(the allowed content increase some words but did not increase for 10 tons).</p>\n<ul>\n<li>is it possible to increse the content? what should I do</li>\n<li>should I increase the content length or send multiple times with small length?</li>\n</ul>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1528411771,"post_id":3052442,"comment_id":88510103,"body_markdown":"Related topic: [*JEP 192: String Deduplication in G1*](http://openjdk.java.net/jeps/192).","body":"Related topic: <a href=\"http://openjdk.java.net/jeps/192\" rel=\"nofollow noreferrer\"><i>JEP 192: String Deduplication in G1</i></a>."},{"owner":{"account_id":13996556,"reputation":938,"user_id":10109195,"display_name":"Energy"},"score":0,"creation_date":1583306709,"post_id":3052442,"comment_id":107067040,"body_markdown":"Anyone please reply to this.  String a = &quot;Java&quot;;\n        String b = &quot;Java&quot;;\n        System.out.println(a == b); true // but   System.out.println(&quot;a==b?&quot;+a == b); //false...","body":"Anyone please reply to this.  String a = &quot;Java&quot;;         String b = &quot;Java&quot;;         System.out.println(a == b); true // but   System.out.println(&quot;a==b?&quot;+a == b); //false..."},{"owner":{"account_id":13996556,"reputation":938,"user_id":10109195,"display_name":"Energy"},"score":0,"creation_date":1583306772,"post_id":3052442,"comment_id":107067062,"body_markdown":"i don&#39;t understand when i added some comment (&quot;a==b ?) =&gt; my result becomes FALSE. why?","body":"i don&#39;t understand when i added some comment (&quot;a==b ?) =&gt; my result becomes FALSE. why?"},{"owner":{"account_id":16587970,"reputation":181,"user_id":11986818,"display_name":"Cat Bisque"},"score":0,"creation_date":1583950379,"post_id":3052442,"comment_id":107288007,"body_markdown":"@Energy The result is `false` because order of operations dictates that the + operator goes first, concatenating &quot;a==b ?&quot; with a to create a String &quot;a==b?Java&quot;. Then the expression `&quot;a==b?Java&quot; == b` evaluates to false.","body":"@Energy The result is <code>false</code> because order of operations dictates that the + operator goes first, concatenating &quot;a==b ?&quot; with a to create a String &quot;a==b?Java&quot;. Then the expression <code>&quot;a==b?Java&quot; == b</code> evaluates to false."}],"answers":[{"comments":[{"owner":{"account_id":4570803,"reputation":1753,"user_id":3710548,"display_name":"Kaveesh Kanwal"},"score":3,"creation_date":1429209253,"post_id":3052456,"comment_id":47503318,"body_markdown":"If i write:  String s = new String(&quot;abc&quot;); \nAnd now i write:  String s = &quot;abc&quot;;\nWill String s = &quot;abc&quot;; create a new String literal in the String pool?","body":"If i write:  String s = new String(&quot;abc&quot;);  And now i write:  String s = &quot;abc&quot;; Will String s = &quot;abc&quot;; create a new String literal in the String pool?"},{"owner":{"account_id":4412911,"reputation":137,"user_id":3595276,"accept_rate":88,"display_name":"zeds"},"score":0,"creation_date":1448949409,"post_id":3052456,"comment_id":55782728,"body_markdown":"Why nobody answer preceding question?","body":"Why nobody answer preceding question?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1458127286,"post_id":3052456,"comment_id":59717496,"body_markdown":"@KaveeshKanwal No, the literal won&#39;t be duplicated. As you can see there are 2 `&quot;abc&quot;`s. Only one of them will go to the String pool, and the other one will refer to it. Then there&#39;s the `s` which will be proper new object.","body":"@KaveeshKanwal No, the literal won&#39;t be duplicated. As you can see there are 2 <code>&quot;abc&quot;</code>s. Only one of them will go to the String pool, and the other one will refer to it. Then there&#39;s the <code>s</code> which will be proper new object."},{"owner":{"account_id":940689,"reputation":314,"user_id":968813,"accept_rate":44,"display_name":"user968813"},"score":1,"creation_date":1462261102,"post_id":3052456,"comment_id":61549895,"body_markdown":"@Kaveesh Kanwal - String s = new String(&quot;abc&quot;) will only create a new String object with value &quot;abc&quot;.  And the 2nd statement will check if there is any &quot;abc&quot; string literal is already present in String Pool or not. If already present then reference to the existing one is returned and if not then new literal (&quot;abc&quot;) is created in String pool.   Hope it resolves your query !!","body":"@Kaveesh Kanwal - String s = new String(&quot;abc&quot;) will only create a new String object with value &quot;abc&quot;.  And the 2nd statement will check if there is any &quot;abc&quot; string literal is already present in String Pool or not. If already present then reference to the existing one is returned and if not then new literal (&quot;abc&quot;) is created in String pool.   Hope it resolves your query !!"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1524570323,"post_id":3052456,"comment_id":87017619,"body_markdown":"There is no &#39;may&#39; about it. The compiler *must* pool string literals. [JLS 3.10.5](https://docs.oracle.com/javase/specs/jls/se10/html/jls-3.html#jls-3.10.5).","body":"There is no &#39;may&#39; about it. The compiler <i>must</i> pool string literals. <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-3.html#jls-3.10.5\" rel=\"nofollow noreferrer\">JLS 3.10.5</a>."},{"owner":{"account_id":11781796,"reputation":447,"user_id":8621051,"display_name":"Kitten"},"score":0,"creation_date":1547562942,"post_id":3052456,"comment_id":95228723,"body_markdown":"new String() is useful when you want to take a substring but not keep around a reference to the original (which people say the substring() method does).","body":"new String() is useful when you want to take a substring but not keep around a reference to the original (which people say the substring() method does)."}],"tags":[],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":6,"down_vote_count":1,"up_vote_count":231,"is_accepted":true,"score":230,"last_activity_date":1435839611,"creation_date":1276684254,"answer_id":3052456,"question_id":3052442,"body_markdown":"`new String(&quot;text&quot;);`\r\nexplicitly creates a new and referentially distinct instance of a `String` object; `String s = &quot;text&quot;;` may reuse an instance from the **string constant pool** if one is available.\r\n\r\nYou _very rarely_ would ever want to use the `new String(anotherString)` constructor. From the API:\r\n\r\n&gt; [`String(String original)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#String%28java.lang.String%29) : Initializes a _newly created_ `String` object so that it represents the same sequence of characters as the argument; in other words, the newly created string is a copy of the argument string. Unless an explicit copy of original is needed, use of this constructor is unnecessary since strings are immutable. \r\n\r\n### Related questions\r\n\r\n* [ Java Strings: “String s = new String(”silly“);” ](https://stackoverflow.com/questions/334518/java-strings-string-s-new-stringsilly)\r\n* [ Strings are objects in Java, so why don’t we use ‘new’ to create them? ](https://stackoverflow.com/questions/2009228/strings-are-objects-in-java-so-why-dont-we-use-new-to-create-them)\r\n\r\n---\r\n\r\n### What referential distinction means\r\n\r\nExamine the following snippet:\r\n\r\n\t\tString s1 = &quot;foobar&quot;;\r\n\t\tString s2 = &quot;foobar&quot;;\r\n\r\n\t\tSystem.out.println(s1 == s2);      // true\r\n\r\n\t\ts2 = new String(&quot;foobar&quot;);\r\n\t\tSystem.out.println(s1 == s2);      // false\r\n\t\tSystem.out.println(s1.equals(s2)); // true\r\n\r\n`==` on two reference types is a reference identity comparison. Two objects that are `equals` are not necessarily `==`. It is usually wrong to use `==` on reference types; most of the time `equals` need to be used instead.\r\n\r\nNonetheless, if for whatever reason you need to create two `equals` but not `==` string, you _can_ use the `new String(anotherString)` constructor. It needs to be said again, however, that this is _very_ peculiar, and is rarely the intention.\r\n\r\n### References\r\n\r\n* [JLS 15.21.3 Reference Equality Operators == and !=](http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.21.3)\r\n* [`class Object` - `boolean Object(equals)`](http://java.sun.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)\r\n\r\n### Related issues\r\n\r\n* [ Java String.equals versus == ](https://stackoverflow.com/questions/767372/java-string-equals-versus)\r\n* [How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p><code>new String(\"text\");</code>\nexplicitly creates a new and referentially distinct instance of a <code>String</code> object; <code>String s = \"text\";</code> may reuse an instance from the <strong>string constant pool</strong> if one is available.</p>\n\n<p>You <em>very rarely</em> would ever want to use the <code>new String(anotherString)</code> constructor. From the API:</p>\n\n<blockquote>\n  <p><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#String%28java.lang.String%29\" rel=\"noreferrer\"><code>String(String original)</code></a> : Initializes a <em>newly created</em> <code>String</code> object so that it represents the same sequence of characters as the argument; in other words, the newly created string is a copy of the argument string. Unless an explicit copy of original is needed, use of this constructor is unnecessary since strings are immutable. </p>\n</blockquote>\n\n<h3>Related questions</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/334518/java-strings-string-s-new-stringsilly\"> Java Strings: “String s = new String(”silly“);” </a></li>\n<li><a href=\"https://stackoverflow.com/questions/2009228/strings-are-objects-in-java-so-why-dont-we-use-new-to-create-them\"> Strings are objects in Java, so why don’t we use ‘new’ to create them? </a></li>\n</ul>\n\n<hr>\n\n<h3>What referential distinction means</h3>\n\n<p>Examine the following snippet:</p>\n\n<pre><code>    String s1 = \"foobar\";\n    String s2 = \"foobar\";\n\n    System.out.println(s1 == s2);      // true\n\n    s2 = new String(\"foobar\");\n    System.out.println(s1 == s2);      // false\n    System.out.println(s1.equals(s2)); // true\n</code></pre>\n\n<p><code>==</code> on two reference types is a reference identity comparison. Two objects that are <code>equals</code> are not necessarily <code>==</code>. It is usually wrong to use <code>==</code> on reference types; most of the time <code>equals</code> need to be used instead.</p>\n\n<p>Nonetheless, if for whatever reason you need to create two <code>equals</code> but not <code>==</code> string, you <em>can</em> use the <code>new String(anotherString)</code> constructor. It needs to be said again, however, that this is <em>very</em> peculiar, and is rarely the intention.</p>\n\n<h3>References</h3>\n\n<ul>\n<li><a href=\"http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.21.3\" rel=\"noreferrer\">JLS 15.21.3 Reference Equality Operators == and !=</a></li>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29\" rel=\"noreferrer\"><code>class Object</code> - <code>boolean Object(equals)</code></a></li>\n</ul>\n\n<h3>Related issues</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/767372/java-string-equals-versus\"> Java String.equals versus == </a></li>\n<li><a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\">How do I compare strings in Java?</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1276684739,"post_id":3052460,"comment_id":3124518,"body_markdown":"Strings in the constant pool are never lost. Did you mean to say &#39;s&#39; is lost if later unused?","body":"Strings in the constant pool are never lost. Did you mean to say &#39;s&#39; is lost if later unused?"},{"owner":{"display_name":"user159088"},"score":0,"creation_date":1276685024,"post_id":3052460,"comment_id":3124556,"body_markdown":"@EJP: yes, I did mean &quot;s&quot;. Thanks for noticing. I will correct the question.","body":"@EJP: yes, I did mean &quot;s&quot;. Thanks for noticing. I will correct the question."}],"tags":[],"owner":{"display_name":"user159088"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1276689447,"creation_date":1276684324,"answer_id":3052460,"question_id":3052442,"body_markdown":"One creates a String in the [String Constant Pool][1]\r\n\r\n    String s = &quot;text&quot;;\r\n\r\nthe other one creates a string in the constant pool (`&quot;text&quot;`) and another string in normal heap space (`s`). Both strings will have the same value, that of &quot;text&quot;.\r\n\r\n    String s = new String(&quot;text&quot;);\r\n\r\n`s` is then lost (eligible for GC) if later unused. \r\n\r\nString literals on the other hand are reused. If you use `&quot;text&quot;` in multiple places of your class it will in fact be one and only one String (i.e. multiple references to the same string in the pool).\r\n\r\n\r\n\r\n\r\n  [1]: http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>One creates a String in the <a href=\"http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3\" rel=\"noreferrer\">String Constant Pool</a></p>\n\n<pre><code>String s = \"text\";\n</code></pre>\n\n<p>the other one creates a string in the constant pool (<code>\"text\"</code>) and another string in normal heap space (<code>s</code>). Both strings will have the same value, that of \"text\".</p>\n\n<pre><code>String s = new String(\"text\");\n</code></pre>\n\n<p><code>s</code> is then lost (eligible for GC) if later unused. </p>\n\n<p>String literals on the other hand are reused. If you use <code>\"text\"</code> in multiple places of your class it will in fact be one and only one String (i.e. multiple references to the same string in the pool).</p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1454836830,"post_id":3052574,"comment_id":58216217,"body_markdown":"The &#39;magic factory&#39; you refer to is nothing more or less than the Java compiler. It is a mistake to write of this process as though it occurred at runtime.","body":"The &#39;magic factory&#39; you refer to is nothing more or less than the Java compiler. It is a mistake to write of this process as though it occurred at runtime."}],"tags":[],"owner":{"account_id":85613,"reputation":21012,"user_id":238578,"accept_rate":75,"display_name":"b_erb"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1276685167,"creation_date":1276685167,"answer_id":3052574,"question_id":3052442,"body_markdown":"Think of `&quot;bla&quot;` being a magic factory like `Strings.createString(&quot;bla&quot;)` (pseudo). The factory holds a pool of all strings yet created this way. \r\n\r\nIf it gets invoked, it checks if there is already string in the pool with this value. If true, it returns this string object, hence to strings obtained this way are indeed the same object.\r\n\r\nIf not, it creates a new string object internally, saves it in the pool and then returns it. Thus, when the same string value is queried the next time, it returns the same instance.\r\n\r\nManually creating `new String(&quot;&quot;)` overrides this behaviour by bypassing the string literal pool. So equality should always be checked using `equals()` which compares the character sequence instead of the object reference equality.\r\n","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>Think of <code>\"bla\"</code> being a magic factory like <code>Strings.createString(\"bla\")</code> (pseudo). The factory holds a pool of all strings yet created this way. </p>\n\n<p>If it gets invoked, it checks if there is already string in the pool with this value. If true, it returns this string object, hence to strings obtained this way are indeed the same object.</p>\n\n<p>If not, it creates a new string object internally, saves it in the pool and then returns it. Thus, when the same string value is queried the next time, it returns the same instance.</p>\n\n<p>Manually creating <code>new String(\"\")</code> overrides this behaviour by bypassing the string literal pool. So equality should always be checked using <code>equals()</code> which compares the character sequence instead of the object reference equality.</p>\n"},{"tags":[],"owner":{"account_id":126286,"reputation":669,"user_id":322691,"accept_rate":40,"display_name":"Shashank T"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1276687189,"creation_date":1276687189,"answer_id":3052757,"question_id":3052442,"body_markdown":"One simple way to understand the difference is below:-\r\n\r\n    String s =&quot;abc&quot;;\r\n    String s1= &quot;abc&quot;;\r\n    String s2=new String(&quot;abc&quot;);\r\n    \t\t\r\n    \t\tif(s==s1){\r\n    \t\t\tSystem.out.println(&quot;s==s1 is true&quot;);\r\n    \t\t}else{\r\n    \t\t\tSystem.out.println(&quot;s==s1 is false&quot;);\r\n    \t\t}\r\n    \t\tif(s==s2){\r\n    \t\t\tSystem.out.println(&quot;s==s2 is true&quot;);\r\n    \t\t}else{\r\n    \t\t\tSystem.out.println(&quot;s==s2 is false&quot;);\r\n    \t\t}\r\n\r\noutput is \r\n\r\n    s==s1 is true\r\n    s==s2 is false\r\n\r\nThus new String() will always create a new instance.","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>One simple way to understand the difference is below:-</p>\n\n<pre><code>String s =\"abc\";\nString s1= \"abc\";\nString s2=new String(\"abc\");\n\n        if(s==s1){\n            System.out.println(\"s==s1 is true\");\n        }else{\n            System.out.println(\"s==s1 is false\");\n        }\n        if(s==s2){\n            System.out.println(\"s==s2 is true\");\n        }else{\n            System.out.println(\"s==s2 is false\");\n        }\n</code></pre>\n\n<p>output is </p>\n\n<pre><code>s==s1 is true\ns==s2 is false\n</code></pre>\n\n<p>Thus new String() will always create a new instance.</p>\n"},{"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1276749512,"creation_date":1276749512,"answer_id":3058903,"question_id":3052442,"body_markdown":"Although it looks the same from a programmers point of view, it has big performance impact. You would want to use the first form almost always.","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>Although it looks the same from a programmers point of view, it has big performance impact. You would want to use the first form almost always.</p>\n"},{"comments":[{"owner":{"account_id":2101073,"reputation":1865,"user_id":1868680,"accept_rate":33,"display_name":"CoronaPintu"},"score":1,"creation_date":1399883153,"post_id":23546082,"comment_id":36233702,"body_markdown":"Good answer.. but weant to know that now i am giong to change value of str1=&quot;java6&quot; then it will change value of str4?","body":"Good answer.. but weant to know that now i am giong to change value of str1=&quot;java6&quot; then it will change value of str4?"},{"owner":{"account_id":2101073,"reputation":1865,"user_id":1868680,"accept_rate":33,"display_name":"CoronaPintu"},"score":3,"creation_date":1399883609,"post_id":23546082,"comment_id":36233929,"body_markdown":"yes i had check it will not change the value of str4","body":"yes i had check it will not change the value of str4"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1435769247,"post_id":23546082,"comment_id":50342299,"body_markdown":"@Braj Can you provide documentation of your Answer’s assertion?","body":"@Braj Can you provide documentation of your Answer’s assertion?"},{"owner":{"account_id":3007030,"reputation":693,"user_id":2551334,"accept_rate":100,"display_name":"Rahul Kurup"},"score":0,"creation_date":1439031145,"post_id":23546082,"comment_id":51701230,"body_markdown":"@Braj: Are the headers for the &#39;Heap&#39; &amp; &#39;pool&#39; in the table supposed to be reverse ?","body":"@Braj: Are the headers for the &#39;Heap&#39; &amp; &#39;pool&#39; in the table supposed to be reverse ?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1454837501,"post_id":23546082,"comment_id":58216395,"body_markdown":"Not correct. The constant pool is created at compile time, not at execution time.  Don&#39;t use quote formatting for text that isn&#39;t quoted.","body":"Not correct. The constant pool is created at compile time, not at execution time.  Don&#39;t use quote formatting for text that isn&#39;t quoted."},{"owner":{"account_id":3408167,"reputation":690,"user_id":2859238,"accept_rate":32,"display_name":"user104309"},"score":0,"creation_date":1490517467,"post_id":23546082,"comment_id":73139691,"body_markdown":"@EJP Can you please elaborate with finer details? Constant pool is residing in memory right and hence I am able to visualise it being created and modified at runtime only. In the above example, what will go wrong considering the fact that pool is created at compile time?","body":"@EJP Can you please elaborate with finer details? Constant pool is residing in memory right and hence I am able to visualise it being created and modified at runtime only. In the above example, what will go wrong considering the fact that pool is created at compile time?"},{"owner":{"account_id":3408167,"reputation":690,"user_id":2859238,"accept_rate":32,"display_name":"user104309"},"score":0,"creation_date":1490521471,"post_id":23546082,"comment_id":73140597,"body_markdown":"At compile time,string literals in the class are accumulated (the action of pooling) (only one occurrence of that literal will be available even if it appears many times) in one place in bytecode (in stringpool section) so that on &quot;class load&quot; these pooled strings are actually created in memory (might be inside a section of the heap) ... While the actual execution of the bytecode instructions it will refer (load from this pool) to this pool in memory. `javap -verbose` will give you an idea.","body":"At compile time,string literals in the class are accumulated (the action of pooling) (only one occurrence of that literal will be available even if it appears many times) in one place in bytecode (in stringpool section) so that on &quot;class load&quot; these pooled strings are actually created in memory (might be inside a section of the heap) ... While the actual execution of the bytecode instructions it will refer (load from this pool) to this pool in memory. <code>javap -verbose</code> will give you an idea."}],"tags":[],"owner":{"account_id":3887004,"reputation":46525,"user_id":3218114,"accept_rate":84,"display_name":"Braj"},"comment_count":7,"down_vote_count":1,"up_vote_count":148,"is_accepted":false,"score":147,"last_activity_date":1515938520,"creation_date":1399562800,"answer_id":23546082,"question_id":3052442,"body_markdown":"String [literals](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html) will go into **String Constant Pool**.\r\n\r\nThe below snapshot might help you to understand it *visually* to remember it for longer time.\r\n\r\n![enter image description here][1]\r\n\r\n\r\n____________\r\n\r\nObject creation line by line:\r\n\r\n    String str1 = new String(&quot;java5&quot;);\r\n\r\nUsing string literal &quot;java5&quot; in the constructor, a new string value is stored in string constant pool.\r\nUsing new operator, a new string object is created in the heap with &quot;java5&quot; as value.\r\n\r\n    String str2 = &quot;java5&quot;\r\n\r\nReference &quot;str2&quot; is pointed to already stored value in string constant pool\r\n\r\n    String str3 = new String(str2);\r\n\r\nA new string object is created in the heap with the same value as reference by &quot;str2&quot;\r\n\r\n    String str4 = &quot;java5&quot;;\r\n\r\nReference &quot;str4&quot; is pointed to already stored value in string constant pool\r\n\r\nTotal objects : Heap - 2, Pool - 1\r\n\r\n[Further reading on Oracle community](https://community.oracle.com/thread/1758056?tstart=0)\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/71l1O.jpg","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>String <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"noreferrer\">literals</a> will go into <strong>String Constant Pool</strong>.</p>\n\n<p>The below snapshot might help you to understand it <em>visually</em> to remember it for longer time.</p>\n\n<p><img src=\"https://i.stack.imgur.com/71l1O.jpg\" alt=\"enter image description here\"></p>\n\n<hr>\n\n<p>Object creation line by line:</p>\n\n<pre><code>String str1 = new String(\"java5\");\n</code></pre>\n\n<p>Using string literal \"java5\" in the constructor, a new string value is stored in string constant pool.\nUsing new operator, a new string object is created in the heap with \"java5\" as value.</p>\n\n<pre><code>String str2 = \"java5\"\n</code></pre>\n\n<p>Reference \"str2\" is pointed to already stored value in string constant pool</p>\n\n<pre><code>String str3 = new String(str2);\n</code></pre>\n\n<p>A new string object is created in the heap with the same value as reference by \"str2\"</p>\n\n<pre><code>String str4 = \"java5\";\n</code></pre>\n\n<p>Reference \"str4\" is pointed to already stored value in string constant pool</p>\n\n<p>Total objects : Heap - 2, Pool - 1</p>\n\n<p><a href=\"https://community.oracle.com/thread/1758056?tstart=0\" rel=\"noreferrer\">Further reading on Oracle community</a></p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1454837048,"post_id":31258786,"comment_id":58216273,"body_markdown":"`str1` is not involved in the value of `str2` or `str3` or `str4` in any way.","body":"<code>str1</code> is not involved in the value of <code>str2</code> or <code>str3</code> or <code>str4</code> in any way."}],"tags":[],"owner":{"account_id":2114957,"reputation":161,"user_id":1879479,"accept_rate":29,"display_name":"SDC"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1436236320,"creation_date":1436236320,"answer_id":31258786,"question_id":3052442,"body_markdown":"@Braj : i think u have mentioned the other way around. Please correct me if i am wrong\r\n\r\nObject creation line by line:\r\n\r\nString str1 = new String(&quot;java5&quot;)   \r\n\r\n       Pool- &quot;java5&quot; (1 Object)\r\n    \r\n       Heap - str1 =&gt; &quot;java5&quot; (1 Object)\r\n\r\nString str2 = &quot;java5&quot;\r\n\r\n      pool- str2 =&gt; &quot;java5&quot; (1 Object)\r\n\r\n      heap - str1 =&gt; &quot;java5&quot; (1 Object)\r\n\r\nString str3 = new String(str2)\r\n\r\n      pool- str2 =&gt; &quot;java5&quot; (1 Object)\r\n\r\n      heap- str1 =&gt; &quot;java5&quot;, str3 =&gt; &quot;java5&quot; (2 Objects)\r\n\r\nString str4 = &quot;java5&quot;\r\n\r\n      pool - str2 =&gt; str4 =&gt; &quot;java5&quot; (1 Object)\r\n\r\n      heap - str1 =&gt; &quot;java5&quot;, str3 =&gt; &quot;java5&quot; (2 Objects)","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>@Braj : i think u have mentioned the other way around. Please correct me if i am wrong</p>\n\n<p>Object creation line by line:</p>\n\n<p>String str1 = new String(\"java5\")   </p>\n\n<pre><code>   Pool- \"java5\" (1 Object)\n\n   Heap - str1 =&gt; \"java5\" (1 Object)\n</code></pre>\n\n<p>String str2 = \"java5\"</p>\n\n<pre><code>  pool- str2 =&gt; \"java5\" (1 Object)\n\n  heap - str1 =&gt; \"java5\" (1 Object)\n</code></pre>\n\n<p>String str3 = new String(str2)</p>\n\n<pre><code>  pool- str2 =&gt; \"java5\" (1 Object)\n\n  heap- str1 =&gt; \"java5\", str3 =&gt; \"java5\" (2 Objects)\n</code></pre>\n\n<p>String str4 = \"java5\"</p>\n\n<pre><code>  pool - str2 =&gt; str4 =&gt; \"java5\" (1 Object)\n\n  heap - str1 =&gt; \"java5\", str3 =&gt; \"java5\" (2 Objects)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1454837324,"post_id":32583640,"comment_id":58216351,"body_markdown":"&#39;It&#39; being the Java compiler. The string literal creates a unique entry in the constant pool, at compile time. It&#39;s a mistake to deacribe this process as though it happens at runtime..","body":"&#39;It&#39; being the Java compiler. The string literal creates a unique entry in the constant pool, at compile time. It&#39;s a mistake to deacribe this process as though it happens at runtime.."},{"owner":{"account_id":996598,"reputation":6067,"user_id":1012372,"accept_rate":49,"display_name":"Jayesh"},"score":0,"creation_date":1454838401,"post_id":32583640,"comment_id":58216598,"body_markdown":"Can you please explain what is wrong in this post clearly?","body":"Can you please explain what is wrong in this post clearly?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1477120942,"post_id":32583640,"comment_id":67645609,"body_markdown":"What is wrong in this post is that the string literal is pooled at complle time, as I already said. Not when executing the code, as in your answer.","body":"What is wrong in this post is that the string literal is pooled at complle time, as I already said. Not when executing the code, as in your answer."},{"owner":{"account_id":996598,"reputation":6067,"user_id":1012372,"accept_rate":49,"display_name":"Jayesh"},"score":0,"creation_date":1477122204,"post_id":32583640,"comment_id":67645906,"body_markdown":"@EJP I appreciate your response. Can you please point out the exact line which is wrong in answer. I see all answers above are same as what i wrote. Please help, I want to correct my understanding. Thanks.","body":"@EJP I appreciate your response. Can you please point out the exact line which is wrong in answer. I see all answers above are same as what i wrote. Please help, I want to correct my understanding. Thanks."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1503460945,"post_id":32583640,"comment_id":78618323,"body_markdown":"You have written about the entire process as though it all takes place when the line of code is executed, which, as I have repeatedly told you, is not the case. You can&#39;t reduce all that to a single &#39;exact line&#39; being wrong in your answer.","body":"You have written about the entire process as though it all takes place when the line of code is executed, which, as I have repeatedly told you, is not the case. You can&#39;t reduce all that to a single &#39;exact line&#39; being wrong in your answer."}],"tags":[],"owner":{"account_id":996598,"reputation":6067,"user_id":1012372,"accept_rate":49,"display_name":"Jayesh"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1442312649,"creation_date":1442312649,"answer_id":32583640,"question_id":3052442,"body_markdown":"    String str = new String(&quot;hello&quot;)\r\n\r\nIt will check whether String constant pool already contains String &quot;hello&quot;? \r\nIf  present then it will not add an entry in String constant pool. If not present then it will add an entry in String constant pool. \r\n\r\nAn object will be created in a heap memory area and `str` reference points to object created in heap memory location.\r\n\r\nif you want `str` reference to point object containing in String constant pool then one has to explicitly call `str.intern();` \r\n\r\n    String str = &quot;world&quot;;\r\n\r\nIt will check whether String constant pool already contains String &quot;hello&quot;? \r\nIf  present then it will not add an entry in String constant pool. If not present then it will add an entry in String constant pool.\r\n \r\nIn both the above case, `str` reference points to String `&quot;world&quot;` present in Constant pool. \r\n \r\n\r\n    ","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<pre><code>String str = new String(\"hello\")\n</code></pre>\n\n<p>It will check whether String constant pool already contains String \"hello\"? \nIf  present then it will not add an entry in String constant pool. If not present then it will add an entry in String constant pool. </p>\n\n<p>An object will be created in a heap memory area and <code>str</code> reference points to object created in heap memory location.</p>\n\n<p>if you want <code>str</code> reference to point object containing in String constant pool then one has to explicitly call <code>str.intern();</code> </p>\n\n<pre><code>String str = \"world\";\n</code></pre>\n\n<p>It will check whether String constant pool already contains String \"hello\"? \nIf  present then it will not add an entry in String constant pool. If not present then it will add an entry in String constant pool.</p>\n\n<p>In both the above case, <code>str</code> reference points to String <code>\"world\"</code> present in Constant pool. </p>\n"},{"tags":[],"owner":{"account_id":481416,"reputation":355404,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1501261150,"creation_date":1492240705,"answer_id":43423384,"question_id":3052442,"body_markdown":"## JLS\r\n\r\nThe concept is called &quot;interning&quot; by the JLS. \r\n\r\nRelevant passage from [JLS 7 3.10.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5):\r\n\r\n&gt; Moreover, a string literal always refers to the same instance of class String. This is because string literals - or, more generally, strings that are the values of constant expressions (&#167;15.28) - are &quot;interned&quot; so as to share unique instances, using the method String.intern.\r\n\r\n&gt; **Example 3.10.5-1. String Literals**\r\n\r\n&gt; The program consisting of the compilation unit (&#167;7.3): \r\n\r\n&gt;     package testPackage;\r\n    class Test {\r\n        public static void main(String[] args) {\r\n            String hello = &quot;Hello&quot;, lo = &quot;lo&quot;;\r\n            System.out.print((hello == &quot;Hello&quot;) + &quot; &quot;);\r\n            System.out.print((Other.hello == hello) + &quot; &quot;);\r\n            System.out.print((other.Other.hello == hello) + &quot; &quot;);\r\n            System.out.print((hello == (&quot;Hel&quot;+&quot;lo&quot;)) + &quot; &quot;);\r\n            System.out.print((hello == (&quot;Hel&quot;+lo)) + &quot; &quot;);\r\n            System.out.println(hello == (&quot;Hel&quot;+lo).intern());\r\n        }\r\n    }\r\n    class Other { static String hello = &quot;Hello&quot;; }\r\n\r\n&gt; and the compilation unit:\r\n\r\n&gt;     package other;\r\n    public class Other { public static String hello = &quot;Hello&quot;; }\r\n\r\n&gt; produces the output:\r\n\r\n&gt;     true true true true false true\r\n\r\n## JVMS\r\n\r\n[JVMS 7 5.1 says](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.1):\r\n\r\n&gt; A string literal is a reference to an instance of class String, and is derived from a CONSTANT_String_info structure (&#167;4.4.3) in the binary representation of a class or interface. The CONSTANT_String_info structure gives the sequence of Unicode code points constituting the string literal.\r\n\r\n&gt; The Java programming language requires that identical string literals (that is, literals that contain the same sequence of code points) must refer to the same instance of class String (JLS &#167;3.10.5). In addition, if the method String.intern is called on any string, the result is a reference to the same class instance that would be returned if that string appeared as a literal. Thus, the following expression must have the value true:\r\n\r\n&gt;     (&quot;a&quot; + &quot;b&quot; + &quot;c&quot;).intern() == &quot;abc&quot;\r\n    \r\n&gt; To derive a string literal, the Java Virtual Machine examines the sequence of code points given by the CONSTANT_String_info structure.\r\n\r\n&gt; - If the method String.intern has previously been called on an instance of class String containing a sequence of Unicode code points identical to that given by the CONSTANT_String_info structure, then the result of string literal derivation is a reference to that same instance of class String.\r\n\r\n&gt; - Otherwise, a new instance of class String is created containing the sequence of Unicode code points given by the CONSTANT_String_info structure; a reference to that class instance is the result of string literal derivation. Finally, the intern method of the new String instance is invoked.\r\n\r\n## Bytecode\r\n\r\nIt is also instructive to look at the bytecode implementation on OpenJDK 7.\r\n\r\nIf we decompile:\r\n\r\n    public class StringPool {\r\n        public static void main(String[] args) {\r\n            String a = &quot;abc&quot;;\r\n            String b = &quot;abc&quot;;\r\n            String c = new String(&quot;abc&quot;);\r\n            System.out.println(a);\r\n            System.out.println(b);\r\n            System.out.println(a == c);\r\n        }\r\n    }\r\n\r\nwe have on the constant pool:\r\n\r\n    #2 = String             #32   // abc\r\n    [...]\r\n    #32 = Utf8               abc\r\n\r\nand `main`:\r\n    \r\n     0: ldc           #2          // String abc\r\n     2: astore_1\r\n     3: ldc           #2          // String abc\r\n     5: astore_2\r\n     6: new           #3          // class java/lang/String\r\n     9: dup\r\n    10: ldc           #2          // String abc\r\n    12: invokespecial #4          // Method java/lang/String.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n    15: astore_3\r\n    16: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;\r\n    19: aload_1\r\n    20: invokevirtual #6          // Method java/io/PrintStream.println:(Ljava/lang/String;)V\r\n    23: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;\r\n    26: aload_2\r\n    27: invokevirtual #6          // Method java/io/PrintStream.println:(Ljava/lang/String;)V\r\n    30: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;\r\n    33: aload_1\r\n    34: aload_3\r\n    35: if_acmpne     42\r\n    38: iconst_1\r\n    39: goto          43\r\n    42: iconst_0\r\n    43: invokevirtual #7          // Method java/io/PrintStream.println:(Z)V\r\n\r\nNote how:\r\n\r\n- `0` and `3`: the same `ldc #2` constant is loaded (the literals)\r\n- `12`: a new string instance is created (with `#2` as argument)\r\n- `35`: `a` and `c` are compared as regular objects with `if_acmpne`\r\n\r\nThe representation of constant strings is quite magic on the bytecode:\r\n\r\n- it has a dedicated [CONSTANT_String_info](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.3) structure, unlike regular objects (e.g. `new String`)\r\n- the struct points to a [CONSTANT_Utf8_info Structure](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.7) that contains the data. That is the only necessary data to represent the string.\r\n\r\nand the JVMS quote above seems to say that whenever the Utf8 pointed to is the same, then identical instances are loaded by `ldc`.\r\n\r\nI have done similar tests for fields, and:\r\n\r\n- `static final String s = &quot;abc&quot;` points to the constant table through the [ConstantValue Attribute](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.2)\r\n- non-final fields don&#39;t have that attribute, but can still be initialized with `ldc`\r\n\r\n**Conclusion**: there is direct bytecode support for the string pool, and the memory representation is efficient.\r\n\r\nBonus: compare that to the [Integer pool](https://stackoverflow.com/questions/13098143/java-integer-constant-pool), which does not have direct bytecode support (i.e. no `CONSTANT_String_info` analogue).","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<h2>JLS</h2>\n\n<p>The concept is called \"interning\" by the JLS. </p>\n\n<p>Relevant passage from <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5\" rel=\"noreferrer\">JLS 7 3.10.5</a>:</p>\n\n<blockquote>\n  <p>Moreover, a string literal always refers to the same instance of class String. This is because string literals - or, more generally, strings that are the values of constant expressions (§15.28) - are \"interned\" so as to share unique instances, using the method String.intern.</p>\n  \n  <p><strong>Example 3.10.5-1. String Literals</strong></p>\n  \n  <p>The program consisting of the compilation unit (§7.3): </p>\n\n<pre><code>package testPackage;\nclass Test {\n    public static void main(String[] args) {\n        String hello = \"Hello\", lo = \"lo\";\n        System.out.print((hello == \"Hello\") + \" \");\n        System.out.print((Other.hello == hello) + \" \");\n        System.out.print((other.Other.hello == hello) + \" \");\n        System.out.print((hello == (\"Hel\"+\"lo\")) + \" \");\n        System.out.print((hello == (\"Hel\"+lo)) + \" \");\n        System.out.println(hello == (\"Hel\"+lo).intern());\n    }\n}\nclass Other { static String hello = \"Hello\"; }\n</code></pre>\n  \n  <p>and the compilation unit:</p>\n\n<pre><code>package other;\npublic class Other { public static String hello = \"Hello\"; }\n</code></pre>\n  \n  <p>produces the output:</p>\n\n<pre><code>true true true true false true\n</code></pre>\n</blockquote>\n\n<h2>JVMS</h2>\n\n<p><a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.1\" rel=\"noreferrer\">JVMS 7 5.1 says</a>:</p>\n\n<blockquote>\n  <p>A string literal is a reference to an instance of class String, and is derived from a CONSTANT_String_info structure (§4.4.3) in the binary representation of a class or interface. The CONSTANT_String_info structure gives the sequence of Unicode code points constituting the string literal.</p>\n  \n  <p>The Java programming language requires that identical string literals (that is, literals that contain the same sequence of code points) must refer to the same instance of class String (JLS §3.10.5). In addition, if the method String.intern is called on any string, the result is a reference to the same class instance that would be returned if that string appeared as a literal. Thus, the following expression must have the value true:</p>\n\n<pre><code>(\"a\" + \"b\" + \"c\").intern() == \"abc\"\n</code></pre>\n  \n  <p>To derive a string literal, the Java Virtual Machine examines the sequence of code points given by the CONSTANT_String_info structure.</p>\n  \n  <ul>\n  <li><p>If the method String.intern has previously been called on an instance of class String containing a sequence of Unicode code points identical to that given by the CONSTANT_String_info structure, then the result of string literal derivation is a reference to that same instance of class String.</p></li>\n  <li><p>Otherwise, a new instance of class String is created containing the sequence of Unicode code points given by the CONSTANT_String_info structure; a reference to that class instance is the result of string literal derivation. Finally, the intern method of the new String instance is invoked.</p></li>\n  </ul>\n</blockquote>\n\n<h2>Bytecode</h2>\n\n<p>It is also instructive to look at the bytecode implementation on OpenJDK 7.</p>\n\n<p>If we decompile:</p>\n\n<pre><code>public class StringPool {\n    public static void main(String[] args) {\n        String a = \"abc\";\n        String b = \"abc\";\n        String c = new String(\"abc\");\n        System.out.println(a);\n        System.out.println(b);\n        System.out.println(a == c);\n    }\n}\n</code></pre>\n\n<p>we have on the constant pool:</p>\n\n<pre><code>#2 = String             #32   // abc\n[...]\n#32 = Utf8               abc\n</code></pre>\n\n<p>and <code>main</code>:</p>\n\n<pre><code> 0: ldc           #2          // String abc\n 2: astore_1\n 3: ldc           #2          // String abc\n 5: astore_2\n 6: new           #3          // class java/lang/String\n 9: dup\n10: ldc           #2          // String abc\n12: invokespecial #4          // Method java/lang/String.\"&lt;init&gt;\":(Ljava/lang/String;)V\n15: astore_3\n16: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;\n19: aload_1\n20: invokevirtual #6          // Method java/io/PrintStream.println:(Ljava/lang/String;)V\n23: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;\n26: aload_2\n27: invokevirtual #6          // Method java/io/PrintStream.println:(Ljava/lang/String;)V\n30: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;\n33: aload_1\n34: aload_3\n35: if_acmpne     42\n38: iconst_1\n39: goto          43\n42: iconst_0\n43: invokevirtual #7          // Method java/io/PrintStream.println:(Z)V\n</code></pre>\n\n<p>Note how:</p>\n\n<ul>\n<li><code>0</code> and <code>3</code>: the same <code>ldc #2</code> constant is loaded (the literals)</li>\n<li><code>12</code>: a new string instance is created (with <code>#2</code> as argument)</li>\n<li><code>35</code>: <code>a</code> and <code>c</code> are compared as regular objects with <code>if_acmpne</code></li>\n</ul>\n\n<p>The representation of constant strings is quite magic on the bytecode:</p>\n\n<ul>\n<li>it has a dedicated <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.3\" rel=\"noreferrer\">CONSTANT_String_info</a> structure, unlike regular objects (e.g. <code>new String</code>)</li>\n<li>the struct points to a <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.7\" rel=\"noreferrer\">CONSTANT_Utf8_info Structure</a> that contains the data. That is the only necessary data to represent the string.</li>\n</ul>\n\n<p>and the JVMS quote above seems to say that whenever the Utf8 pointed to is the same, then identical instances are loaded by <code>ldc</code>.</p>\n\n<p>I have done similar tests for fields, and:</p>\n\n<ul>\n<li><code>static final String s = \"abc\"</code> points to the constant table through the <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.2\" rel=\"noreferrer\">ConstantValue Attribute</a></li>\n<li>non-final fields don't have that attribute, but can still be initialized with <code>ldc</code></li>\n</ul>\n\n<p><strong>Conclusion</strong>: there is direct bytecode support for the string pool, and the memory representation is efficient.</p>\n\n<p>Bonus: compare that to the <a href=\"https://stackoverflow.com/questions/13098143/java-integer-constant-pool\">Integer pool</a>, which does not have direct bytecode support (i.e. no <code>CONSTANT_String_info</code> analogue).</p>\n"},{"tags":[],"owner":{"account_id":11745569,"reputation":181,"user_id":8596440,"display_name":"Amritansh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1547561227,"creation_date":1547561227,"answer_id":54200519,"question_id":3052442,"body_markdown":"Any String literal gets created inside string literal pool and the pool doesn&#39;t allow any duplicates. Thus if two or more string objects are initialized with the same literal value then all objects will point to the same literal.\r\n\r\n    String obj1 = &quot;abc&quot;;\r\n    String obj2 = &quot;abc&quot;;\r\n\r\n&quot;obj1&quot; and &quot;obj2&quot; will point to the same string literal and the string literal pool will have only one &quot;abc&quot; literal.\r\n\r\nWhen we create a String class object using the new keyword the string thus created is stored in heap memory. Any string literal passed as parameter to the constructor of String class however is stored in string pool. If we create multiple objects using the same value with the new operator a new object will be created in the heap each time, because of this new operator should be avoided.\r\n\r\n    String obj1 = new String(&quot;abc&quot;);\r\n    String obj2 = new String(&quot;abc&quot;);\r\n\r\n&quot;obj1&quot; and &quot;obj2&quot; will point to two different objects in the heap and the string literal pool will have only one &quot;abc&quot; literal.\r\n\r\nAlso something that is worth noting with regards to the behavior of strings is that any new assignment or concatenation done on string creates a new object in memory.\r\n\r\n    String str1 = &quot;abc&quot;;\r\n    String str2 = &quot;abc&quot; + &quot;def&quot;;\r\n    str1 = &quot;xyz&quot;;\r\n    str2 = str1 + &quot;ghi&quot;;\r\n\r\nNow in the above case:&lt;br&gt;\r\nLine 1: &quot;abc&quot; literal is stored in string pool.&lt;br&gt;\r\nLine 2: &quot;abcdef&quot; literal gets stored in the string pool.&lt;br&gt;\r\nLine 3: A new &quot;xyz&quot; literal is stored in the string pool and &quot;str1&quot; starts to point to this literal.&lt;br&gt;\r\nLine 4: Since the value is generated by appending to another variable the result is stored in the heap memory and the literal being appended &quot;ghi&quot; will be checked for its existence in the string pool and will be created since it doesn&#39;t exist in the above case.","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>Any String literal gets created inside string literal pool and the pool doesn't allow any duplicates. Thus if two or more string objects are initialized with the same literal value then all objects will point to the same literal.</p>\n\n<pre><code>String obj1 = \"abc\";\nString obj2 = \"abc\";\n</code></pre>\n\n<p>\"obj1\" and \"obj2\" will point to the same string literal and the string literal pool will have only one \"abc\" literal.</p>\n\n<p>When we create a String class object using the new keyword the string thus created is stored in heap memory. Any string literal passed as parameter to the constructor of String class however is stored in string pool. If we create multiple objects using the same value with the new operator a new object will be created in the heap each time, because of this new operator should be avoided.</p>\n\n<pre><code>String obj1 = new String(\"abc\");\nString obj2 = new String(\"abc\");\n</code></pre>\n\n<p>\"obj1\" and \"obj2\" will point to two different objects in the heap and the string literal pool will have only one \"abc\" literal.</p>\n\n<p>Also something that is worth noting with regards to the behavior of strings is that any new assignment or concatenation done on string creates a new object in memory.</p>\n\n<pre><code>String str1 = \"abc\";\nString str2 = \"abc\" + \"def\";\nstr1 = \"xyz\";\nstr2 = str1 + \"ghi\";\n</code></pre>\n\n<p>Now in the above case:<br>\nLine 1: \"abc\" literal is stored in string pool.<br>\nLine 2: \"abcdef\" literal gets stored in the string pool.<br>\nLine 3: A new \"xyz\" literal is stored in the string pool and \"str1\" starts to point to this literal.<br>\nLine 4: Since the value is generated by appending to another variable the result is stored in the heap memory and the literal being appended \"ghi\" will be checked for its existence in the string pool and will be created since it doesn't exist in the above case.</p>\n"},{"tags":[],"owner":{"account_id":13202721,"reputation":11,"user_id":9535508,"display_name":"Syed Babar Ali Shah 3261-FBASB"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548586925,"creation_date":1548585714,"answer_id":54387239,"question_id":3052442,"body_markdown":"When you store a String as\r\n\r\n    String string1 = &quot;Hello&quot;;\r\n\r\ndirectly, then JVM creates a String object with the given price during a separate block of memory called String constant pool.\r\n\r\nAnd whenever we have a tendency to try and produce another String as\r\n\r\n    String string2 = &quot;Hello&quot;;\r\n\r\nJVM verifies whether or not any String object with constant price exists within the String constant pool, if so, rather than making a brand new object JVM assigns the reference of the existing object to the new variable.\r\n\r\nAnd when we store String as\r\n\r\n    String string = new String(&quot;Hello&quot;);\r\n\r\nusing the new keyword, a brand new object with the given price is made no matter the contents of the String constant pool.","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>When you store a String as</p>\n\n<pre><code>String string1 = \"Hello\";\n</code></pre>\n\n<p>directly, then JVM creates a String object with the given price during a separate block of memory called String constant pool.</p>\n\n<p>And whenever we have a tendency to try and produce another String as</p>\n\n<pre><code>String string2 = \"Hello\";\n</code></pre>\n\n<p>JVM verifies whether or not any String object with constant price exists within the String constant pool, if so, rather than making a brand new object JVM assigns the reference of the existing object to the new variable.</p>\n\n<p>And when we store String as</p>\n\n<pre><code>String string = new String(\"Hello\");\n</code></pre>\n\n<p>using the new keyword, a brand new object with the given price is made no matter the contents of the String constant pool.</p>\n"},{"tags":[],"owner":{"account_id":3617971,"reputation":1737,"user_id":3017390,"accept_rate":64,"display_name":"ThinkTank"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597741564,"creation_date":1596965598,"answer_id":63324716,"question_id":3052442,"body_markdown":"Sorry for late Answer but much needed Answer.\r\nFirst we need to know some [Java.lang.String][1] Class rules.\r\n\r\n 1. String Literals e.g.`String str=&quot;java&quot;;` (we use only double Quotes)\r\n are different from String Object (we use new keyword)\r\n e.g. `String str=new String(&quot;java&quot;);`\r\n 2. [String is Immutable Object][2] i.e. If value changes a new Object is created and returned to you eg See `replace() and replaceAll()` functions and many more.\r\n 3. This creates a problem of many String Object in Modification, So creators of Java came up an Idea was called StringPool. StringPool is stored in heap area where object reference data will be stored as we know String is `Char[]`([before java 9][3] very Long to read) or `byte`[]([after java 9][4] short to read).\r\n 4. String literals are stored in StringPool and String Objects are stored in as usual heap Object Area.\r\n 5. If there are many Object String Initialization JVM heap will be finished in String Operations only, Java Development team came up with [intern()][5] solution this moves/changes memory reference to StringPool.\r\n\r\n     [Program: Comparing String references to objects][6] \r\n\r\n[Another good link to understand java.lang.String better][7]\r\n\r\n    import java.util.*; \r\n    \r\n    class GFG { \r\n    \tpublic static void main(String[] args) \r\n    \t{ \r\n          String siteName1 = &quot;java.com&quot;;\r\n            String siteName2 = &quot;java.com&quot;;\r\n            String siteName3 = new String(&quot;java.com&quot;);\r\n            String siteName4 = new String(&quot;java.com&quot;).intern();\r\n          \r\n     \tSystem.out.println(&quot;siteName1:::&quot;+Integer.toHexString(System.identityHashCode(siteName1)));\r\n          System.out.println(&quot;siteName2:::&quot;+Integer.toHexString(System.identityHashCode(siteName2)));\r\n          System.out.println(&quot;siteName3 creation Of New Object Without Interned:::&quot;+Integer.toHexString(System.identityHashCode(siteName3)));//must be Diffrent bcoz new Object In Heap Area\r\n          System.out.println(&quot;siteName4 creation Of New Object With Interned:::&quot;+Integer.toHexString(System.identityHashCode(siteName4)));//must be same MemoryAddress of siteName1,siteName2 and Interned, bcoz Objects Points to String pool Now\r\n          \r\n          System.out.println(siteName1 == siteName2); // true\r\n          System.out.println(siteName1 == siteName3); // false this tells about lietral vs String Objects\r\n          String siteName5 = siteName3.intern(); // Interning will not change Original Object but gives us a new Object\r\n          \r\n          System.out.println(&quot;siteName5 Interned from siteName3:::&quot;+Integer.toHexString(System.identityHashCode(siteName5)));//must be same MemoryAddress of siteName1,siteName2 and Interned, bcoz Objects Points to String pool Now\r\n          \r\n          System.out.println(siteName1 == siteName3); // false this tells about Immutability\r\n          System.out.println(siteName1 == siteName5); // true After Intering both are same\r\n          System.out.println(siteName1 == siteName4); // true\r\n          System.out.println(siteName5 == siteName4); // true\r\n    \t} \r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html\r\n  [2]: https://stackoverflow.com/questions/1552301/immutability-of-strings-in-java\r\n  [3]: https://www.tutorialspoint.com/what-are-compact-strings-in-java-9\r\n  [4]: https://examples.javacodegeeks.com/core-java/java-9-compact-strings-example/\r\n  [5]: https://www.tutorialspoint.com/java/lang/string_intern.htm\r\n  [6]: https://ide.geeksforgeeks.org/EhzgZAmAcj\r\n  [7]: https://ide.geeksforgeeks.org/coJvbfIi5m","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>Sorry for late Answer but much needed Answer.\nFirst we need to know some <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html\" rel=\"nofollow noreferrer\">Java.lang.String</a> Class rules.</p>\n<ol>\n<li><p>String Literals e.g.<code>String str=&quot;java&quot;;</code> (we use only double Quotes)\nare different from String Object (we use new keyword)\ne.g. <code>String str=new String(&quot;java&quot;);</code></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/1552301/immutability-of-strings-in-java\">String is Immutable Object</a> i.e. If value changes a new Object is created and returned to you eg See <code>replace() and replaceAll()</code> functions and many more.</p>\n</li>\n<li><p>This creates a problem of many String Object in Modification, So creators of Java came up an Idea was called StringPool. StringPool is stored in heap area where object reference data will be stored as we know String is <code>Char[]</code>(<a href=\"https://www.tutorialspoint.com/what-are-compact-strings-in-java-9\" rel=\"nofollow noreferrer\">before java 9</a> very Long to read) or <code>byte</code>[](<a href=\"https://examples.javacodegeeks.com/core-java/java-9-compact-strings-example/\" rel=\"nofollow noreferrer\">after java 9</a> short to read).</p>\n</li>\n<li><p>String literals are stored in StringPool and String Objects are stored in as usual heap Object Area.</p>\n</li>\n<li><p>If there are many Object String Initialization JVM heap will be finished in String Operations only, Java Development team came up with <a href=\"https://www.tutorialspoint.com/java/lang/string_intern.htm\" rel=\"nofollow noreferrer\">intern()</a> solution this moves/changes memory reference to StringPool.</p>\n<p><a href=\"https://ide.geeksforgeeks.org/EhzgZAmAcj\" rel=\"nofollow noreferrer\">Program: Comparing String references to objects</a></p>\n</li>\n</ol>\n<p><a href=\"https://ide.geeksforgeeks.org/coJvbfIi5m\" rel=\"nofollow noreferrer\">Another good link to understand java.lang.String better</a></p>\n<pre><code>import java.util.*; \n\nclass GFG { \n    public static void main(String[] args) \n    { \n      String siteName1 = &quot;java.com&quot;;\n        String siteName2 = &quot;java.com&quot;;\n        String siteName3 = new String(&quot;java.com&quot;);\n        String siteName4 = new String(&quot;java.com&quot;).intern();\n      \n    System.out.println(&quot;siteName1:::&quot;+Integer.toHexString(System.identityHashCode(siteName1)));\n      System.out.println(&quot;siteName2:::&quot;+Integer.toHexString(System.identityHashCode(siteName2)));\n      System.out.println(&quot;siteName3 creation Of New Object Without Interned:::&quot;+Integer.toHexString(System.identityHashCode(siteName3)));//must be Diffrent bcoz new Object In Heap Area\n      System.out.println(&quot;siteName4 creation Of New Object With Interned:::&quot;+Integer.toHexString(System.identityHashCode(siteName4)));//must be same MemoryAddress of siteName1,siteName2 and Interned, bcoz Objects Points to String pool Now\n      \n      System.out.println(siteName1 == siteName2); // true\n      System.out.println(siteName1 == siteName3); // false this tells about lietral vs String Objects\n      String siteName5 = siteName3.intern(); // Interning will not change Original Object but gives us a new Object\n      \n      System.out.println(&quot;siteName5 Interned from siteName3:::&quot;+Integer.toHexString(System.identityHashCode(siteName5)));//must be same MemoryAddress of siteName1,siteName2 and Interned, bcoz Objects Points to String pool Now\n      \n      System.out.println(siteName1 == siteName3); // false this tells about Immutability\n      System.out.println(siteName1 == siteName5); // true After Intering both are same\n      System.out.println(siteName1 == siteName4); // true\n      System.out.println(siteName5 == siteName4); // true\n    } \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667287348,"creation_date":1667287348,"answer_id":74272683,"question_id":3052442,"body_markdown":"When you use some thing like `new String(&quot;Hello World&quot;)` the [SpotBugs][1] code analyze tool, complains a **performance issue**. \r\n\r\nThe [description][2] of this issue shows deference of `new` and `constant string`\r\n\r\n&gt; Using the `java.lang.String(String)` constructor wastes memory because\r\n&gt; the object so constructed will be functionally indistinguishable from\r\n&gt; the String passed as a parameter.&#160; Just use the argument String\r\n&gt; directly.   \r\n&gt; Bug kind and pattern: Dm - DM_STRING_CTOR\r\n\r\n\r\n  [1]: https://spotbugs.github.io/\r\n  [2]: https://spotbugs.readthedocs.io/en/latest/bugDescriptions.html#DM_STRING_CTOR","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>When you use some thing like <code>new String(&quot;Hello World&quot;)</code> the <a href=\"https://spotbugs.github.io/\" rel=\"nofollow noreferrer\">SpotBugs</a> code analyze tool, complains a <strong>performance issue</strong>.</p>\n<p>The <a href=\"https://spotbugs.readthedocs.io/en/latest/bugDescriptions.html#DM_STRING_CTOR\" rel=\"nofollow noreferrer\">description</a> of this issue shows deference of <code>new</code> and <code>constant string</code></p>\n<blockquote>\n<p>Using the <code>java.lang.String(String)</code> constructor wastes memory because\nthe object so constructed will be functionally indistinguishable from\nthe String passed as a parameter.  Just use the argument String\ndirectly.<br />\nBug kind and pattern: Dm - DM_STRING_CTOR</p>\n</blockquote>\n"}],"owner":{"account_id":153121,"reputation":2429,"user_id":368141,"display_name":"user368141"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126554,"favorite_count":0,"down_vote_count":2,"up_vote_count":243,"accepted_answer_id":3052456,"answer_count":13,"score":241,"last_activity_date":1679463280,"creation_date":1276684145,"question_id":3052442,"body_markdown":"What is the difference between these two following statements?\r\n\r\n    String s = &quot;text&quot;;\r\n\r\n    String s = new String(&quot;text&quot;);\r\n","title":"What is the difference between &quot;text&quot; and new String(&quot;text&quot;)?","body":"<p>What is the difference between these two following statements?</p>\n\n<pre><code>String s = \"text\";\n\nString s = new String(\"text\");\n</code></pre>\n"},{"tags":["java","arrays","list","collections"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1679329548,"post_id":75792818,"comment_id":133698395,"body_markdown":"&quot;*Is this possible by using standard library?*&quot; No. &quot;*should I implement a List&lt;Integer&gt; interface in my own class?*&quot; That&#39;s personal preference. &quot;*Java does the optimization already?*&quot; No, but [project Valhalla](https://openjdk.org/projects/valhalla/) will eventually make such optimizations unnecessary; it&#39;s being worked on, but will be some years.","body":"&quot;<i>Is this possible by using standard library?</i>&quot; No. &quot;<i>should I implement a List&lt;Integer&gt; interface in my own class?</i>&quot; That&#39;s personal preference. &quot;<i>Java does the optimization already?</i>&quot; No, but <a href=\"https://openjdk.org/projects/valhalla/\" rel=\"nofollow noreferrer\">project Valhalla</a> will eventually make such optimizations unnecessary; it&#39;s being worked on, but will be some years."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1679329563,"post_id":75792818,"comment_id":133698403,"body_markdown":"&quot;I am actually trying to optimize a leetcode program to hell&quot; knowing the leetcode problems, are you sure you&#39;re optimizing in the correct place and not missing some really inefficient algorithm somewhere else?","body":"&quot;I am actually trying to optimize a leetcode program to hell&quot; knowing the leetcode problems, are you sure you&#39;re optimizing in the correct place and not missing some really inefficient algorithm somewhere else?"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1679329644,"post_id":75792818,"comment_id":133698422,"body_markdown":"&quot;*I am actually trying to optimize a leetcode program to hell*&quot; Then don&#39;t use List in the first place. It&#39;s basically a convenient API over the top of an array. Just use the array directly.","body":"&quot;<i>I am actually trying to optimize a leetcode program to hell</i>&quot; Then don&#39;t use List in the first place. It&#39;s basically a convenient API over the top of an array. Just use the array directly."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1679330504,"post_id":75792818,"comment_id":133698657,"body_markdown":"Not exactly, but there is [`IntStream`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html).","body":"Not exactly, but there is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a>."},{"owner":{"account_id":13298084,"reputation":41,"user_id":17285857,"display_name":"Mahesh Hegde"},"score":0,"creation_date":1679330636,"post_id":75792818,"comment_id":133698702,"body_markdown":"@Frederico I got the answer. I am optimizing it to reach 100% performance percentile.","body":"@Frederico I got the answer. I am optimizing it to reach 100% performance percentile."},{"owner":{"account_id":13298084,"reputation":41,"user_id":17285857,"display_name":"Mahesh Hegde"},"score":0,"creation_date":1679330643,"post_id":75792818,"comment_id":133698703,"body_markdown":"@Michael the problem template returns List&lt;Integer&gt; so I cant change that.","body":"@Michael the problem template returns List&lt;Integer&gt; so I cant change that."}],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1679333191,"post_id":75793080,"comment_id":133699443,"body_markdown":"_&quot;So the AbstractList class seems to exist for this very purpose.&quot;_, not really, the `AbstractList` class exists for common code of `List` implementations like `ArrayList`, `LinkedList`, `Vector`, and _also_ your own implementations.","body":"<i>&quot;So the AbstractList class seems to exist for this very purpose.&quot;</i>, not really, the <code>AbstractList</code> class exists for common code of <code>List</code> implementations like <code>ArrayList</code>, <code>LinkedList</code>, <code>Vector</code>, and <i>also</i> your own implementations."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1679389143,"post_id":75793080,"comment_id":133708486,"body_markdown":"You should not use this implementation in production code. It does not verify any parameters but allows to silently get away with invalid parameters in an unintended way, i.e. passing indices outside the valid range allow to access array elements outside the range represented by the `List`.","body":"You should not use this implementation in production code. It does not verify any parameters but allows to silently get away with invalid parameters in an unintended way, i.e. passing indices outside the valid range allow to access array elements outside the range represented by the <code>List</code>."}],"tags":[],"owner":{"account_id":13298084,"reputation":41,"user_id":17285857,"display_name":"Mahesh Hegde"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679463173,"creation_date":1679330896,"answer_id":75793080,"question_id":75792818,"body_markdown":"I found it, in leetcode itself, by going to performance chart of submitted programs and clicking on first bar. (Why didn&#39;t I think of this before?)\r\n\r\nHere&#39;s the relevant part of &quot;sample 0ms submission&quot; which minimally implements the list.\r\n\r\n```java\r\nimport java.util.*;\r\n\r\nclass Solution {\r\n    // Problem solution skipped\r\n\r\n    class MyList extends AbstractList&lt;Integer&gt; {\r\n        private int[] arr;\r\n        private int left;\r\n        private int right;\r\n\r\n        public MyList(int[] arr, int left, int right) {\r\n            this.arr = arr;\r\n            this.left = left;\r\n            this.right = right;\r\n        }\r\n\r\n        @Override\r\n        public Integer get(int index) {\r\n            // NOTE: This doesn&#39;t do bounds checks. Do bounds checks in production code.\r\n            return arr[left+index];\r\n        }\r\n\r\n        @Override\r\n        public int size() {\r\n            return right-left;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSo the `AbstractList` class seems to exist for this type of uses.\r\n\r\n&gt; This class provides a skeletal implementation of the List interface to minimize the effort required to implement this interface backed by a &quot;random access&quot; data store (such as an array). For sequential access data (such as a linked list), AbstractSequentialList should be used in preference to this class.\r\n\r\n&gt; To implement an unmodifiable list, the programmer needs only to extend this class and provide implementations for the get(int) and size() methods.\r\n\r\n&gt; To implement a modifiable list, the programmer must additionally override the set(int, E) method (which otherwise throws an UnsupportedOperationException). If the list is variable-size the programmer must additionally override the add(int, E) and remove(int) methods.\r\n\r\nEdit: Thanks @Holger for pointing out it doesn&#39;t check bounds in `get()` method. In the context of Leetcode it&#39;s fine. But do your bounds checks in production code.","title":"Java List&lt;Integer&gt; wrapper that internally stores an int[]","body":"<p>I found it, in leetcode itself, by going to performance chart of submitted programs and clicking on first bar. (Why didn't I think of this before?)</p>\n<p>Here's the relevant part of &quot;sample 0ms submission&quot; which minimally implements the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\nclass Solution {\n    // Problem solution skipped\n\n    class MyList extends AbstractList&lt;Integer&gt; {\n        private int[] arr;\n        private int left;\n        private int right;\n\n        public MyList(int[] arr, int left, int right) {\n            this.arr = arr;\n            this.left = left;\n            this.right = right;\n        }\n\n        @Override\n        public Integer get(int index) {\n            // NOTE: This doesn't do bounds checks. Do bounds checks in production code.\n            return arr[left+index];\n        }\n\n        @Override\n        public int size() {\n            return right-left;\n        }\n    }\n}\n</code></pre>\n<p>So the <code>AbstractList</code> class seems to exist for this type of uses.</p>\n<blockquote>\n<p>This class provides a skeletal implementation of the List interface to minimize the effort required to implement this interface backed by a &quot;random access&quot; data store (such as an array). For sequential access data (such as a linked list), AbstractSequentialList should be used in preference to this class.</p>\n</blockquote>\n<blockquote>\n<p>To implement an unmodifiable list, the programmer needs only to extend this class and provide implementations for the get(int) and size() methods.</p>\n</blockquote>\n<blockquote>\n<p>To implement a modifiable list, the programmer must additionally override the set(int, E) method (which otherwise throws an UnsupportedOperationException). If the list is variable-size the programmer must additionally override the add(int, E) and remove(int) methods.</p>\n</blockquote>\n<p>Edit: Thanks @Holger for pointing out it doesn't check bounds in <code>get()</code> method. In the context of Leetcode it's fine. But do your bounds checks in production code.</p>\n"}],"owner":{"account_id":13298084,"reputation":41,"user_id":17285857,"display_name":"Mahesh Hegde"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679463173,"creation_date":1679329265,"question_id":75792818,"body_markdown":"I am looking for a way to create a java `List&lt;Integer&gt;` interface, which doesn&#39;t store Integer as reference type but internally stores `int[]` or other form of continuous buffer, and converts them to boxed `Integer` type when needed.\r\n\r\nIs this possible by using standard library?\r\n\r\nor\r\n\r\nshould I implement a `List&lt;Integer&gt;` interface in my own class?\r\n\r\nor\r\n\r\nJava does the optimization already?\r\n\r\nI tried `Arrays.asList(new int[]{1,2,3,4})`, but it creates a list containing single array.\r\n\r\nI am actually trying to optimize a leetcode program to hell, so standard library one liners are much appreciated.","title":"Java List&lt;Integer&gt; wrapper that internally stores an int[]","body":"<p>I am looking for a way to create a java <code>List&lt;Integer&gt;</code> interface, which doesn't store Integer as reference type but internally stores <code>int[]</code> or other form of continuous buffer, and converts them to boxed <code>Integer</code> type when needed.</p>\n<p>Is this possible by using standard library?</p>\n<p>or</p>\n<p>should I implement a <code>List&lt;Integer&gt;</code> interface in my own class?</p>\n<p>or</p>\n<p>Java does the optimization already?</p>\n<p>I tried <code>Arrays.asList(new int[]{1,2,3,4})</code>, but it creates a list containing single array.</p>\n<p>I am actually trying to optimize a leetcode program to hell, so standard library one liners are much appreciated.</p>\n"},{"tags":["java","mapbox","mapbox-android"],"comments":[{"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"score":0,"creation_date":1679494333,"post_id":75808695,"comment_id":133732150,"body_markdown":"you may try to create a minimized example (only the API, not the code) if the result of the http query checks out, you may be able to refine your question.","body":"you may try to create a minimized example (only the API, not the code) if the result of the http query checks out, you may be able to refine your question."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1679494356,"post_id":75808695,"comment_id":133732156,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":17397904,"reputation":1,"user_id":12607342,"display_name":"Balu Mahendra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679462921,"creation_date":1679462769,"question_id":75808695,"body_markdown":" I have tried this code; it gives some place but not near the given coordinates.(Lat and Long)\r\n\r\n\r\n```\r\npublic List&lt;Point&gt; getCoordinates2() { \r\n    List&lt;Point&gt; points=new ArrayList&lt;&gt;(); \r\n    MapboxGeocoding mapboxGeocoding = MapboxGeocoding.builder() \r\n            .accessToken(accessToken) \r\n            .query(GeocodingCriteria.TYPE_POI)            \r\n            .country(&quot;IN&quot;) // ISO 3166 alpha 2 country code for India  \r\n            .proximity(Point.fromLngLat(78.4983,  17.4399)) \r\n            .build(); \r\n \r\n    try { \r\n        GeocodingResponse response = mapboxGeocoding.executeCall().body(); \r\n        if (response != null &amp;&amp; response.features().size() &gt; 0) { \r\n            for (int i = 0; i &lt; response.features().size(); i++) { \r\n                CarmenFeature feature = response.features().get(i); \r\n                String placeName = feature.placeName(); \r\n                Point point = (Point) feature.geometry(); \r\n                points.add(point); \r\n                String coordinates = String.format(&quot;%f,%f&quot;, point.longitude(), point.latitude()); \r\n                System.out.println(placeName + &quot;: &quot; + coordinates); \r\n            } \r\n        } \r\n    } catch (IOException  e) { \r\n \r\n    } \r\n \r\n    return points; \r\n} \r\n```\r\nFor this it gave response like this but we want public areas like parks, theaters, bus stops, railway stations, and temples that are within the range of some X km of given coordinates (Lat and Long)\r\n\r\n    `Point Pleasant Restaurant, Hyderabad, Telangana 500034, India: 78.444396,17.415243\r\n    PNT Colony, Vijayawada, NTR, Andhra Pradesh, India: 80.639416,16.538129\r\n    Poibeda, Machh Kund, Koraput, Odisha, India: 82.540986,18.584619\r\n    Poigai, Vellore, Vellore, Tamil Nadu, India: 79.053124,12.915003\r\n    Poigainallur, Arakonam, Ranipet, Tamil Nadu, India: 79.564364,12.903959`\r\n\r\n\r\nand also tried this one   this code-generating POIs are related to the given coordinates and contained in the bbox, but they are limited to 10 records. \r\n\r\n```\r\npublic List&lt;Point&gt; getCoordinates() {\r\n        List&lt;Point&gt; points = new ArrayList&lt;&gt;();\r\n\r\n        OkHttpClient client = new OkHttpClient();\r\n        String parksTemplesHotelsInJPnagar = &quot;https://api.mapbox.com/geocoding/v5/mapbox.places/park%20and%20temple%20and%20hotels.json?bbox=77.449061%2C12.848347%2C77.695739%2C12.966143&amp;limit=50&amp;proximity=77.5724%2C12.907252&amp;autocomplete=false&amp;access_token=&quot;+accessToken;\r\n        \r\n        Request request = new Request.Builder()\r\n                .url(parksTemplesHotelsInJPnagar)\r\n                .build();\r\n\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            String responseBody = response.body().string();\r\n\r\n            JSONArray features = new JSONObject(responseBody).getJSONArray(&quot;features&quot;);\r\n\r\n            for (int i = 0; i &lt; features.length(); i++) {\r\n                JSONObject feature = features.getJSONObject(i);\r\n                JSONArray coordinates = feature.getJSONArray(&quot;center&quot;);\r\n                Point point = Point.fromLngLat(coordinates.getDouble(0), coordinates.getDouble(1));\r\n                points.add(point);\r\n                String placeName = feature.getString(&quot;text&quot;);\r\n                System.out.println(placeName + &quot;: &quot; + point.longitude() + &quot;, &quot; + point.latitude());\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return points;\r\n    }\r\n\r\n```\r\nIt gave response like this but we want more records its limited upto 10 records.  \r\n\r\n    Banashankari Temple: 77.573312, 12.915979\r\n    Ragiguda Temple: 77.593409, 12.91467\r\n    Dharmagiri Manjunathaswamy Temple: 77.564309, 12.921\r\n    Venkateshwara Swamy Temple: 77.589474, 12.910329\r\n    Laxman Rao Park - Pride of JAYANAGAR: 77.580493, 12.918529\r\n    Lakshman Rao Park Jayanagar: 77.578719, 12.918843\r\n    Raagi Gudda Prasanna Anjaneya Temple: 77.593239, 12.915066\r\n    KS Layout Park 2: 77.559655, 12.906428\r\n    Devagiri Temple: 77.567178, 12.926082\r\n    ISKCON @ Vaikunta Hill: 77.549434, 12.89312\r\n\r\n\r\nI want to get a list of famous and public areas like parks, theaters, bus stops, railway stations, and temples that are within the range of some X km of given coordinates (Lat and Long) in Java and Spring Boot (gradle) by using Mapbox?\r\n\r\n","title":"I want to get a list of public areas within the range of some X km of given coordinates (Lat and Long) in Java and Spring Boot(gradle) by using Mapbox","body":"<p>I have tried this code; it gives some place but not near the given coordinates.(Lat and Long)</p>\n<pre><code>public List&lt;Point&gt; getCoordinates2() { \n    List&lt;Point&gt; points=new ArrayList&lt;&gt;(); \n    MapboxGeocoding mapboxGeocoding = MapboxGeocoding.builder() \n            .accessToken(accessToken) \n            .query(GeocodingCriteria.TYPE_POI)            \n            .country(&quot;IN&quot;) // ISO 3166 alpha 2 country code for India  \n            .proximity(Point.fromLngLat(78.4983,  17.4399)) \n            .build(); \n \n    try { \n        GeocodingResponse response = mapboxGeocoding.executeCall().body(); \n        if (response != null &amp;&amp; response.features().size() &gt; 0) { \n            for (int i = 0; i &lt; response.features().size(); i++) { \n                CarmenFeature feature = response.features().get(i); \n                String placeName = feature.placeName(); \n                Point point = (Point) feature.geometry(); \n                points.add(point); \n                String coordinates = String.format(&quot;%f,%f&quot;, point.longitude(), point.latitude()); \n                System.out.println(placeName + &quot;: &quot; + coordinates); \n            } \n        } \n    } catch (IOException  e) { \n \n    } \n \n    return points; \n} \n</code></pre>\n<p>For this it gave response like this but we want public areas like parks, theaters, bus stops, railway stations, and temples that are within the range of some X km of given coordinates (Lat and Long)</p>\n<pre><code>`Point Pleasant Restaurant, Hyderabad, Telangana 500034, India: 78.444396,17.415243\nPNT Colony, Vijayawada, NTR, Andhra Pradesh, India: 80.639416,16.538129\nPoibeda, Machh Kund, Koraput, Odisha, India: 82.540986,18.584619\nPoigai, Vellore, Vellore, Tamil Nadu, India: 79.053124,12.915003\nPoigainallur, Arakonam, Ranipet, Tamil Nadu, India: 79.564364,12.903959`\n</code></pre>\n<p>and also tried this one   this code-generating POIs are related to the given coordinates and contained in the bbox, but they are limited to 10 records.</p>\n<pre><code>public List&lt;Point&gt; getCoordinates() {\n        List&lt;Point&gt; points = new ArrayList&lt;&gt;();\n\n        OkHttpClient client = new OkHttpClient();\n        String parksTemplesHotelsInJPnagar = &quot;https://api.mapbox.com/geocoding/v5/mapbox.places/park%20and%20temple%20and%20hotels.json?bbox=77.449061%2C12.848347%2C77.695739%2C12.966143&amp;limit=50&amp;proximity=77.5724%2C12.907252&amp;autocomplete=false&amp;access_token=&quot;+accessToken;\n        \n        Request request = new Request.Builder()\n                .url(parksTemplesHotelsInJPnagar)\n                .build();\n\n        try {\n            Response response = client.newCall(request).execute();\n            String responseBody = response.body().string();\n\n            JSONArray features = new JSONObject(responseBody).getJSONArray(&quot;features&quot;);\n\n            for (int i = 0; i &lt; features.length(); i++) {\n                JSONObject feature = features.getJSONObject(i);\n                JSONArray coordinates = feature.getJSONArray(&quot;center&quot;);\n                Point point = Point.fromLngLat(coordinates.getDouble(0), coordinates.getDouble(1));\n                points.add(point);\n                String placeName = feature.getString(&quot;text&quot;);\n                System.out.println(placeName + &quot;: &quot; + point.longitude() + &quot;, &quot; + point.latitude());\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        return points;\n    }\n\n</code></pre>\n<p>It gave response like this but we want more records its limited upto 10 records.</p>\n<pre><code>Banashankari Temple: 77.573312, 12.915979\nRagiguda Temple: 77.593409, 12.91467\nDharmagiri Manjunathaswamy Temple: 77.564309, 12.921\nVenkateshwara Swamy Temple: 77.589474, 12.910329\nLaxman Rao Park - Pride of JAYANAGAR: 77.580493, 12.918529\nLakshman Rao Park Jayanagar: 77.578719, 12.918843\nRaagi Gudda Prasanna Anjaneya Temple: 77.593239, 12.915066\nKS Layout Park 2: 77.559655, 12.906428\nDevagiri Temple: 77.567178, 12.926082\nISKCON @ Vaikunta Hill: 77.549434, 12.89312\n</code></pre>\n<p>I want to get a list of famous and public areas like parks, theaters, bus stops, railway stations, and temples that are within the range of some X km of given coordinates (Lat and Long) in Java and Spring Boot (gradle) by using Mapbox?</p>\n"},{"tags":["java","android","json","serialization","deserialization"],"comments":[{"owner":{"account_id":260152,"reputation":39795,"user_id":543539,"accept_rate":82,"display_name":"Egor"},"score":0,"creation_date":1442073152,"post_id":32540677,"comment_id":52938627,"body_markdown":"It will simplify your task a lot if you could fix these files to have correct JSON formatted data.","body":"It will simplify your task a lot if you could fix these files to have correct JSON formatted data."},{"owner":{"account_id":4557091,"reputation":1653,"user_id":3700517,"accept_rate":55,"display_name":"shakil.k"},"score":0,"creation_date":1442073232,"post_id":32540677,"comment_id":52938648,"body_markdown":"yes i know but the file is created by some other app and i have no control over it","body":"yes i know but the file is created by some other app and i have no control over it"},{"owner":{"account_id":2800556,"reputation":2198,"user_id":2408879,"display_name":"makata"},"score":0,"creation_date":1442076517,"post_id":32540677,"comment_id":52939641,"body_markdown":"If you are sure file size is small, you can simply use  `JSONObject object = new JSONObject(&quot;[&quot;+jString+&quot;]&quot;);`","body":"If you are sure file size is small, you can simply use  <code>JSONObject object = new JSONObject(&quot;[&quot;+jString+&quot;]&quot;);</code>"},{"owner":{"account_id":2800556,"reputation":2198,"user_id":2408879,"display_name":"makata"},"score":0,"creation_date":1442077022,"post_id":32540677,"comment_id":52939802,"body_markdown":"To parse the JSONObject to POJO you can refer [this tutorial.](http://www.vogella.com/tutorials/JavaLibrary-Gson/article.html)","body":"To parse the JSONObject to POJO you can refer <a href=\"http://www.vogella.com/tutorials/JavaLibrary-Gson/article.html\" rel=\"nofollow noreferrer\">this tutorial.</a>"}],"answers":[{"comments":[{"owner":{"account_id":4557091,"reputation":1653,"user_id":3700517,"accept_rate":55,"display_name":"shakil.k"},"score":0,"creation_date":1442127783,"post_id":32541048,"comment_id":52950644,"body_markdown":"i could append the square bracket but i don,t have comma,s in between objects as well","body":"i could append the square bracket but i don,t have comma,s in between objects as well"},{"owner":{"account_id":6076789,"reputation":245,"user_id":4743892,"display_name":"Raj Turakhia"},"score":1,"creation_date":1442133576,"post_id":32541048,"comment_id":52951927,"body_markdown":"If you don&#39;t append commas between two objects then it will not consider as JSON Array.","body":"If you don&#39;t append commas between two objects then it will not consider as JSON Array."}],"tags":[],"owner":{"account_id":6076789,"reputation":245,"user_id":4743892,"display_name":"Raj Turakhia"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1442075028,"creation_date":1442075028,"answer_id":32541048,"question_id":32540677,"body_markdown":"First change you JSON data it&#39;s not in correct JSON format... \r\n\r\n[{&quot;music&quot;:&quot;abc&quot;,&quot;highqualityavailable&quot;:&quot;true&quot;,&quot;cacheable&quot;:&quot;true&quot;},\r\n{&quot;music&quot;:&quot;xyz&quot;,&quot;highqualityavailable&quot;:&quot;false&quot;,&quot;cacheable&quot;:&quot;true&quot;},{&quot;music&quot;:&quot;aaa&quot;,&quot;highqualityavailable&quot;:&quot;true&quot;,&quot;cacheable&quot;:&quot;true&quot;},{&quot;music&quot;:&quot;bbb&quot;,&quot;highqualityavailable&quot;:&quot;false&quot;,&quot;cacheable&quot;:&quot;true&quot;},{&quot;music&quot;:&quot;ccc&quot;,&quot;highqualityavailable&quot;:&quot;true&quot;,&quot;cacheable&quot;:&quot;true&quot;}]\r\n\r\n\r\nThen after convert string to JSON array.\r\n\r\nMore details : https://stackoverflow.com/questions/22753719/how-to-parse-json-parsing-using-gson-in-android","title":"Read / Parse JSON objects from .ser file in Android","body":"<p>First change you JSON data it's not in correct JSON format... </p>\n\n<p>[{\"music\":\"abc\",\"highqualityavailable\":\"true\",\"cacheable\":\"true\"},\n{\"music\":\"xyz\",\"highqualityavailable\":\"false\",\"cacheable\":\"true\"},{\"music\":\"aaa\",\"highqualityavailable\":\"true\",\"cacheable\":\"true\"},{\"music\":\"bbb\",\"highqualityavailable\":\"false\",\"cacheable\":\"true\"},{\"music\":\"ccc\",\"highqualityavailable\":\"true\",\"cacheable\":\"true\"}]</p>\n\n<p>Then after convert string to JSON array.</p>\n\n<p>More details : <a href=\"https://stackoverflow.com/questions/22753719/how-to-parse-json-parsing-using-gson-in-android\">How to parse json parsing Using GSON in android</a></p>\n"},{"tags":[],"owner":{"account_id":15928212,"reputation":45,"user_id":11493297,"display_name":"imvickykumar999"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679462435,"creation_date":1679462435,"answer_id":75808662,"question_id":32540677,"body_markdown":"&gt; This python code is only for converting .ser file into .json file\r\n\r\nFiles : [Opening files from this repository][1]\r\n\r\n    with open(&#39;first-letters-root.ser&#39;, encoding=&quot;utf8&quot;) as f:\r\n        w = f.read()\r\n        \r\n    y = w.split(&#39;i:&#39;)[1:]\r\n    d = {}\r\n    \r\n    for k,i in enumerate(y):\r\n        j = i.split(&#39;;&#39;)[1].split(&#39;:&#39;)\r\n        d[k] = j[-1]\r\n    \r\n    import json\r\n    with open(&#39;first-letters-root.json&#39;, &#39;w&#39;) as f:\r\n        json.dump(d, f)\r\n    \r\n    info = open(&#39;first-letters-root.json&#39;)\r\n    res = json.load(info)\r\n    print(res)\r\n\r\n\r\n  [1]: https://github.com/imvickykumar999/Civilisation-Script-Translator/blob/main/translator","title":"Read / Parse JSON objects from .ser file in Android","body":"<blockquote>\n<p>This python code is only for converting .ser file into .json file</p>\n</blockquote>\n<p>Files : <a href=\"https://github.com/imvickykumar999/Civilisation-Script-Translator/blob/main/translator\" rel=\"nofollow noreferrer\">Opening files from this repository</a></p>\n<pre><code>with open('first-letters-root.ser', encoding=&quot;utf8&quot;) as f:\n    w = f.read()\n    \ny = w.split('i:')[1:]\nd = {}\n\nfor k,i in enumerate(y):\n    j = i.split(';')[1].split(':')\n    d[k] = j[-1]\n\nimport json\nwith open('first-letters-root.json', 'w') as f:\n    json.dump(d, f)\n\ninfo = open('first-letters-root.json')\nres = json.load(info)\nprint(res)\n</code></pre>\n"}],"owner":{"account_id":4557091,"reputation":1653,"user_id":3700517,"accept_rate":55,"display_name":"shakil.k"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":482,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679462435,"creation_date":1442072684,"question_id":32540677,"body_markdown":"I have a file in my sdcard which extension is abc.ser  and the file contain JSON objects like\r\n\r\n    {&quot;music&quot;:&quot;abc&quot;,&quot;highqualityavailable&quot;:&quot;true&quot;,&quot;cacheable&quot;:&quot;true&quot;}\r\n    {&quot;music&quot;:&quot;xyz&quot;,&quot;highqualityavailable&quot;:&quot;false&quot;,&quot;cacheable&quot;:&quot;true&quot;}\r\n    {&quot;music&quot;:&quot;aaa&quot;,&quot;highqualityavailable&quot;:&quot;true&quot;,&quot;cacheable&quot;:&quot;true&quot;}\r\n    {&quot;music&quot;:&quot;bbb&quot;,&quot;highqualityavailable&quot;:&quot;false&quot;,&quot;cacheable&quot;:&quot;true&quot;}\r\n    {&quot;music&quot;:&quot;ccc&quot;,&quot;highqualityavailable&quot;:&quot;true&quot;,&quot;cacheable&quot;:&quot;true&quot;}\r\n\r\n  \r\n\r\nthe file contain JSON objects but not the proper format of JSON how can i read or parse it in my app i have already read the string in file but don,t know how to convert it to a POJO  \r\n\r\n\r\n     String root = Environment.getExternalStorageDirectory().getAbsolutePath();\r\n\r\n                    File file = new File(root+&quot;/tmp/playerSongsString.ser&quot;);\r\n\r\n                    if (file.exists()) {\r\n\r\n\r\n                        FileInputStream stream = null;\r\n\r\n                        try {\r\n\r\n                            stream = new FileInputStream(file);\r\n                            FileChannel fc = stream.getChannel();\r\n                            MappedByteBuffer bb =    fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());\r\n                          /* Instead of using default, pass in a decoder. */\r\n                            jString = Charset.defaultCharset().decode(bb).toString();\r\n\r\n                            JSONObject object = new JSONObject(jString);\r\n\r\n                            Log.d(&quot;json:&quot;,jString);\r\n\r\n                            \r\n\r\n\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        } catch (JSONException e) {\r\n                            e.printStackTrace();\r\n                        } finally {\r\n                            try {\r\n                                stream.close();\r\n                            } catch (IOException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n\r\n\r\n","title":"Read / Parse JSON objects from .ser file in Android","body":"<p>I have a file in my sdcard which extension is abc.ser  and the file contain JSON objects like</p>\n\n<pre><code>{\"music\":\"abc\",\"highqualityavailable\":\"true\",\"cacheable\":\"true\"}\n{\"music\":\"xyz\",\"highqualityavailable\":\"false\",\"cacheable\":\"true\"}\n{\"music\":\"aaa\",\"highqualityavailable\":\"true\",\"cacheable\":\"true\"}\n{\"music\":\"bbb\",\"highqualityavailable\":\"false\",\"cacheable\":\"true\"}\n{\"music\":\"ccc\",\"highqualityavailable\":\"true\",\"cacheable\":\"true\"}\n</code></pre>\n\n<p>the file contain JSON objects but not the proper format of JSON how can i read or parse it in my app i have already read the string in file but don,t know how to convert it to a POJO  </p>\n\n<pre><code> String root = Environment.getExternalStorageDirectory().getAbsolutePath();\n\n                File file = new File(root+\"/tmp/playerSongsString.ser\");\n\n                if (file.exists()) {\n\n\n                    FileInputStream stream = null;\n\n                    try {\n\n                        stream = new FileInputStream(file);\n                        FileChannel fc = stream.getChannel();\n                        MappedByteBuffer bb =    fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());\n                      /* Instead of using default, pass in a decoder. */\n                        jString = Charset.defaultCharset().decode(bb).toString();\n\n                        JSONObject object = new JSONObject(jString);\n\n                        Log.d(\"json:\",jString);\n\n\n\n\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    } catch (JSONException e) {\n                        e.printStackTrace();\n                    } finally {\n                        try {\n                            stream.close();\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    }\n</code></pre>\n"},{"tags":["java","spring-boot","soap","soapui","mtom"],"owner":{"account_id":18646671,"reputation":1,"user_id":13591148,"display_name":"disha agarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679461488,"creation_date":1679460976,"question_id":75808562,"body_markdown":"I want to delete the temporary file which is getting created at the start of every web service operation while using MTOM in java. My attachments get converted into DatHandler objects.\r\nThis DataHandler Object doesn&#39;t give any details of the path of the temp file that is being created.\r\n\r\nI am using SOAP for web services.\r\n\r\nI have tried closing the DataHandler object by using the following code\r\n```\r\ndataHandlerbject.getInputStream().close();\r\n\r\n```\r\nbut it still didn&#39;t delete the temp file.","title":"Delete Temporary file created while using MTOM java","body":"<p>I want to delete the temporary file which is getting created at the start of every web service operation while using MTOM in java. My attachments get converted into DatHandler objects.\nThis DataHandler Object doesn't give any details of the path of the temp file that is being created.</p>\n<p>I am using SOAP for web services.</p>\n<p>I have tried closing the DataHandler object by using the following code</p>\n<pre><code>dataHandlerbject.getInputStream().close();\n\n</code></pre>\n<p>but it still didn't delete the temp file.</p>\n"},{"tags":["javascript","java","encryption","cryptography","aes-gcm"],"comments":[{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1672040808,"post_id":74917947,"comment_id":132210717,"body_markdown":"The Java encryption code isn&#39;t returning the IV/nonce used for encryption so it is not part of the splitting in decryption code. **Serious security warning: Do NOT use the above code in production as it is UNSECURE**. You should consider to change your production code as the encryption in AES GCM mode gets total insecure when using a nonce more than one time with the same key (the Java code is using a static IV/nonce with 8 0x&#39;s).","body":"The Java encryption code isn&#39;t returning the IV/nonce used for encryption so it is not part of the splitting in decryption code. <b>Serious security warning: Do NOT use the above code in production as it is UNSECURE</b>. You should consider to change your production code as the encryption in AES GCM mode gets total insecure when using a nonce more than one time with the same key (the Java code is using a static IV/nonce with 8 0x&#39;s)."},{"owner":{"account_id":23048902,"reputation":51,"user_id":17166044,"display_name":"kashif-sk"},"score":0,"creation_date":1672041974,"post_id":74917947,"comment_id":132210897,"body_markdown":"@MichaelFehr I&#39;m able to decrypt now. Thanks for the clarity &amp; security warning, will switch to a more secure one.","body":"@MichaelFehr I&#39;m able to decrypt now. Thanks for the clarity &amp; security warning, will switch to a more secure one."}],"answers":[{"tags":[],"owner":{"account_id":23048902,"reputation":51,"user_id":17166044,"display_name":"kashif-sk"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672042530,"creation_date":1672042530,"answer_id":74918428,"question_id":74917947,"body_markdown":"So the Java code doesn&#39;t attach IV/nonce to the output. It uses a buffer of 0&#39;s of specified length.\r\n\r\nUpdated JS decryption code:\r\n\r\n\r\n    const decrypt = (encdata, masterkey) =&gt; {\r\n    const bData = Buffer.from(encdata, &#39;base64&#39;);\r\n\r\n    const iv = Buffer.alloc(12);\r\n    const tag = bData.slice(bData.length - 16, bData.length);\r\n    const text = bData.slice(0, bData.length - 16);\r\n\r\n    const key = generateKey(masterkey);\r\n\r\n    const decipher = crypto.createDecipheriv(&#39;aes-128-gcm&#39;, key, iv);\r\n    decipher.setAuthTag(tag);\r\n\r\n\r\n    const decrypted =\r\n      decipher.update(text, &#39;binary&#39;, &#39;utf8&#39;) + decipher.final(&#39;utf8&#39;);\r\n\r\n\r\n    return decrypted;\r\n    };\r\n\r\n\r\n\r\n**Serious security warning: Do NOT use the above code in production as it is UNSECURE. You should consider to change your production code as the encryption in AES GCM mode gets total insecure when using a nonce more than one time with the same key (the Java code is using a static IV/nonce)** \r\n\r\nCredits - Michael Fehr&#39;s comment","title":"AES/GCM/NoPadding encryption in JAVA &amp; decryption in JavaScript","body":"<p>So the Java code doesn't attach IV/nonce to the output. It uses a buffer of 0's of specified length.</p>\n<p>Updated JS decryption code:</p>\n<pre><code>const decrypt = (encdata, masterkey) =&gt; {\nconst bData = Buffer.from(encdata, 'base64');\n\nconst iv = Buffer.alloc(12);\nconst tag = bData.slice(bData.length - 16, bData.length);\nconst text = bData.slice(0, bData.length - 16);\n\nconst key = generateKey(masterkey);\n\nconst decipher = crypto.createDecipheriv('aes-128-gcm', key, iv);\ndecipher.setAuthTag(tag);\n\n\nconst decrypted =\n  decipher.update(text, 'binary', 'utf8') + decipher.final('utf8');\n\n\nreturn decrypted;\n};\n</code></pre>\n<p><strong>Serious security warning: Do NOT use the above code in production as it is UNSECURE. You should consider to change your production code as the encryption in AES GCM mode gets total insecure when using a nonce more than one time with the same key (the Java code is using a static IV/nonce)</strong></p>\n<p>Credits - Michael Fehr's comment</p>\n"}],"owner":{"account_id":23048902,"reputation":51,"user_id":17166044,"display_name":"kashif-sk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74918428,"answer_count":1,"score":0,"last_activity_date":1679461303,"creation_date":1672038131,"question_id":74917947,"body_markdown":"I am using AES/GCM/NoPadding 128 bit. I want to encrypt in Java &amp; decrypt it in Javascript. \r\n\r\nWhen I encrypt in JS &amp; try to decrypt in Java I get the error as *Tag mismatch!null*\r\n\r\nWhen I encrypt in Java &amp; try to decrypt in JS I get the error as \r\n\r\n```\r\ninternal/crypto/cipher.js:164\r\n  const ret = this._handle.final();\r\n                           ^\r\n\r\nError: Unsupported state or unable to authenticate data\r\n    at Decipheriv.final (internal/crypto/cipher.js:164:28)\r\n    at decrypt (/tmp/HoErdq6TQ2.js:51:58)\r\n```\r\n\r\n\r\nWhat am I missing in my JS\r\nPlease suggest fixes in JS code, Java code can&#39;t be changed as it is in use on production\r\n\r\n\r\nJava code:\r\n```\r\n\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.MessageDigest;\r\nimport java.util.Arrays;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.GCMParameterSpec;\r\nimport java.util.logging.Logger;\r\nimport java.util.Base64;\r\n\r\npublic class HelloWorld {\r\n\r\n    private final static Logger LOGGER =  Logger.getLogger(Logger.GLOBAL_LOGGER_NAME);\r\n\r\n    public static void main(String []args) {\r\n        String masterKey = &quot;2f12cb0f1d2e3d12345f1af2b123dce4&quot;;\r\n        String encrypted = aesEncryptStringV2(&quot;Hello, World!&quot;, masterKey);\r\n        System.out.println(encrypted);\r\n        \r\n\r\n        String decrypted = aesDecryptStringV2(encrypted, masterKey);\r\n        System.out.println(decrypted);\r\n    }\r\n\r\n\r\n    private static final String ALGORITHM = &quot;AES/GCM/NoPadding&quot;;\r\n    private static final int GCM_IV_LENGTH = 12;\r\n    private static final int GCM_TAG_LENGTH = 16;\r\n\r\n    private static SecretKeySpec setKeyV2(final String myKey) {\r\n        try {\r\n            byte[] newKey = myKey.getBytes(StandardCharsets.UTF_8);\r\n            MessageDigest sha = MessageDigest.getInstance(&quot;SHA-512&quot;);\r\n\r\n            newKey = sha.digest(newKey);\r\n            newKey = Arrays.copyOf(newKey, 16);\r\n\r\n            return new SecretKeySpec(newKey, &quot;AES&quot;);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Error in setKeyV2: &quot;);\r\n            System.out.println(e.getMessage());\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static synchronized String aesEncryptStringV2(\r\n        final String strToEncrypt, final String secret) {\r\n        try {\r\n            SecretKeySpec newSecretKey = setKeyV2(secret);\r\n            Cipher cipher = Cipher.getInstance(ALGORITHM);\r\n            GCMParameterSpec gcmParameterSpec = new\r\n            GCMParameterSpec(GCM_TAG_LENGTH * 8,\r\n                             new byte[GCM_IV_LENGTH]);\r\n            cipher.init(Cipher.ENCRYPT_MODE, newSecretKey, gcmParameterSpec);\r\n            return Base64.getEncoder()\r\n                   .encodeToString(cipher.doFinal(strToEncrypt.getBytes(StandardCharsets.UTF_8\r\n                                                                       )));\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Error in aesEncryptStringV2: &quot;);\r\n            System.out.println(e.getMessage());\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static synchronized String aesDecryptStringV2(\r\n        final String strToDecrypt, final String secret) {\r\n        try {\r\n            SecretKeySpec newSecretKey = setKeyV2(secret);\r\n            Cipher cipher = Cipher.getInstance(ALGORITHM);\r\n            GCMParameterSpec gcmParameterSpec = new\r\n            GCMParameterSpec(GCM_TAG_LENGTH * 8,\r\n                             new byte[GCM_IV_LENGTH]);\r\n            cipher.init(Cipher.DECRYPT_MODE, newSecretKey, gcmParameterSpec);\r\n\r\n            return new\r\n                   String(cipher.doFinal(Base64.getDecoder().decode(strToDecrypt)));\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Error in aesDecryptStringV2: &quot;);\r\n            System.out.println(e.getMessage());\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nJavascript Code:\r\n```\r\n\r\nconst crypto = require(&#39;crypto&#39;);\r\n\r\n\r\nconst cryptoConfig = {\r\n    cipherAlgorithm: &#39;aes-128-gcm&#39;,\r\n    masterKey: &#39;2f12cb0f1d2e3d12345f1af2b123dce4&#39;,\r\n    ivLength: 12,\r\n    tagLength: 16,\r\n    digest: &#39;sha512&#39;\r\n}\r\n\r\nconst generateKey = () =&gt; {\r\n    var h = crypto.createHash(cryptoConfig.digest);\r\n    h.update(cryptoConfig.masterKey, &#39;utf8&#39;);\r\n    \r\n    var k = h.digest().slice(0, 16);\r\n    return k;\r\n  };\r\n\r\nfunction encrypt(content) {\r\n    const iv = crypto.randomBytes(cryptoConfig.ivLength);\r\n    const key = generateKey();\r\n\r\n    const cipher = crypto.createCipheriv(cryptoConfig.cipherAlgorithm, key, iv, {authTagLength: cryptoConfig.tagLength});\r\n\r\n    const encrypted = Buffer.concat([cipher.update(content, &#39;utf8&#39;), cipher.final()]);\r\n\r\n    const tag = cipher.getAuthTag();\r\n\r\n    return Buffer.concat([iv, encrypted, tag]).toString(&#39;base64&#39;);\r\n}\r\n\r\n\r\nconst decrypt = (encdata, masterkey) =&gt; {\r\n    const bData = Buffer.from(encdata, &#39;base64&#39;);\r\n\r\n    const iv = bData.slice(0, 12);\r\n    const tag = bData.slice(bData.length - 16, bData.length);\r\n    const text = bData.slice(12, bData.length - 16);\r\n\r\n    const key = generateKey(masterkey);\r\n\r\n    const decipher = crypto.createDecipheriv(&#39;aes-128-gcm&#39;, key, iv);\r\n    decipher.setAuthTag(tag);\r\n\r\n\r\n    const decrypted =\r\n      decipher.update(text, &#39;binary&#39;, &#39;utf8&#39;) + decipher.final(&#39;utf8&#39;);\r\n\r\n\r\n    return decrypted;\r\n  };\r\n\r\nconst encryptedData = encrypt(&#39;hello world&#39;); \r\nconsole.log(&#39;encrypt data -&gt; &#39;, encryptedData);\r\n\r\nconst decryptedData = decrypt(encryptedData); \r\nconsole.log(&#39;decryptedData -&gt; &#39;, decryptedData);\r\n\r\n```\r\n","title":"AES/GCM/NoPadding encryption in JAVA &amp; decryption in JavaScript","body":"<p>I am using AES/GCM/NoPadding 128 bit. I want to encrypt in Java &amp; decrypt it in Javascript.</p>\n<p>When I encrypt in JS &amp; try to decrypt in Java I get the error as <em>Tag mismatch!null</em></p>\n<p>When I encrypt in Java &amp; try to decrypt in JS I get the error as</p>\n<pre><code>internal/crypto/cipher.js:164\n  const ret = this._handle.final();\n                           ^\n\nError: Unsupported state or unable to authenticate data\n    at Decipheriv.final (internal/crypto/cipher.js:164:28)\n    at decrypt (/tmp/HoErdq6TQ2.js:51:58)\n</code></pre>\n<p>What am I missing in my JS\nPlease suggest fixes in JS code, Java code can't be changed as it is in use on production</p>\n<p>Java code:</p>\n<pre><code>\nimport java.nio.charset.StandardCharsets;\nimport java.security.MessageDigest;\nimport java.util.Arrays;\nimport javax.crypto.spec.SecretKeySpec;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.GCMParameterSpec;\nimport java.util.logging.Logger;\nimport java.util.Base64;\n\npublic class HelloWorld {\n\n    private final static Logger LOGGER =  Logger.getLogger(Logger.GLOBAL_LOGGER_NAME);\n\n    public static void main(String []args) {\n        String masterKey = &quot;2f12cb0f1d2e3d12345f1af2b123dce4&quot;;\n        String encrypted = aesEncryptStringV2(&quot;Hello, World!&quot;, masterKey);\n        System.out.println(encrypted);\n        \n\n        String decrypted = aesDecryptStringV2(encrypted, masterKey);\n        System.out.println(decrypted);\n    }\n\n\n    private static final String ALGORITHM = &quot;AES/GCM/NoPadding&quot;;\n    private static final int GCM_IV_LENGTH = 12;\n    private static final int GCM_TAG_LENGTH = 16;\n\n    private static SecretKeySpec setKeyV2(final String myKey) {\n        try {\n            byte[] newKey = myKey.getBytes(StandardCharsets.UTF_8);\n            MessageDigest sha = MessageDigest.getInstance(&quot;SHA-512&quot;);\n\n            newKey = sha.digest(newKey);\n            newKey = Arrays.copyOf(newKey, 16);\n\n            return new SecretKeySpec(newKey, &quot;AES&quot;);\n        } catch (Exception e) {\n            System.out.println(&quot;Error in setKeyV2: &quot;);\n            System.out.println(e.getMessage());\n        }\n        return null;\n    }\n\n    public static synchronized String aesEncryptStringV2(\n        final String strToEncrypt, final String secret) {\n        try {\n            SecretKeySpec newSecretKey = setKeyV2(secret);\n            Cipher cipher = Cipher.getInstance(ALGORITHM);\n            GCMParameterSpec gcmParameterSpec = new\n            GCMParameterSpec(GCM_TAG_LENGTH * 8,\n                             new byte[GCM_IV_LENGTH]);\n            cipher.init(Cipher.ENCRYPT_MODE, newSecretKey, gcmParameterSpec);\n            return Base64.getEncoder()\n                   .encodeToString(cipher.doFinal(strToEncrypt.getBytes(StandardCharsets.UTF_8\n                                                                       )));\n        } catch (Exception e) {\n            System.out.println(&quot;Error in aesEncryptStringV2: &quot;);\n            System.out.println(e.getMessage());\n        }\n        return null;\n    }\n\n    public static synchronized String aesDecryptStringV2(\n        final String strToDecrypt, final String secret) {\n        try {\n            SecretKeySpec newSecretKey = setKeyV2(secret);\n            Cipher cipher = Cipher.getInstance(ALGORITHM);\n            GCMParameterSpec gcmParameterSpec = new\n            GCMParameterSpec(GCM_TAG_LENGTH * 8,\n                             new byte[GCM_IV_LENGTH]);\n            cipher.init(Cipher.DECRYPT_MODE, newSecretKey, gcmParameterSpec);\n\n            return new\n                   String(cipher.doFinal(Base64.getDecoder().decode(strToDecrypt)));\n        } catch (Exception e) {\n            System.out.println(&quot;Error in aesDecryptStringV2: &quot;);\n            System.out.println(e.getMessage());\n        }\n        return null;\n    }\n}\n\n</code></pre>\n<p>Javascript Code:</p>\n<pre><code>\nconst crypto = require('crypto');\n\n\nconst cryptoConfig = {\n    cipherAlgorithm: 'aes-128-gcm',\n    masterKey: '2f12cb0f1d2e3d12345f1af2b123dce4',\n    ivLength: 12,\n    tagLength: 16,\n    digest: 'sha512'\n}\n\nconst generateKey = () =&gt; {\n    var h = crypto.createHash(cryptoConfig.digest);\n    h.update(cryptoConfig.masterKey, 'utf8');\n    \n    var k = h.digest().slice(0, 16);\n    return k;\n  };\n\nfunction encrypt(content) {\n    const iv = crypto.randomBytes(cryptoConfig.ivLength);\n    const key = generateKey();\n\n    const cipher = crypto.createCipheriv(cryptoConfig.cipherAlgorithm, key, iv, {authTagLength: cryptoConfig.tagLength});\n\n    const encrypted = Buffer.concat([cipher.update(content, 'utf8'), cipher.final()]);\n\n    const tag = cipher.getAuthTag();\n\n    return Buffer.concat([iv, encrypted, tag]).toString('base64');\n}\n\n\nconst decrypt = (encdata, masterkey) =&gt; {\n    const bData = Buffer.from(encdata, 'base64');\n\n    const iv = bData.slice(0, 12);\n    const tag = bData.slice(bData.length - 16, bData.length);\n    const text = bData.slice(12, bData.length - 16);\n\n    const key = generateKey(masterkey);\n\n    const decipher = crypto.createDecipheriv('aes-128-gcm', key, iv);\n    decipher.setAuthTag(tag);\n\n\n    const decrypted =\n      decipher.update(text, 'binary', 'utf8') + decipher.final('utf8');\n\n\n    return decrypted;\n  };\n\nconst encryptedData = encrypt('hello world'); \nconsole.log('encrypt data -&gt; ', encryptedData);\n\nconst decryptedData = decrypt(encryptedData); \nconsole.log('decryptedData -&gt; ', decryptedData);\n\n</code></pre>\n"},{"tags":["java","swing","jtable","tablecellrenderer","rowsorter"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1679456479,"post_id":75808166,"comment_id":133724247,"body_markdown":"You may need to look at [Sorting and Filtering](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting) and supply a custom comparator.  But since your data seems to be `String` based (`LocalDate.parse(value.toString(),formatter);`) you should probably look there first and make sure you data (in the table) is actually a `LocalDate`.  Also `DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();` is wasteful, you should just extend from `DefaultTableCellRenderer` directly","body":"You may need to look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting\" rel=\"nofollow noreferrer\">Sorting and Filtering</a> and supply a custom comparator.  But since your data seems to be <code>String</code> based (<code>LocalDate.parse(value.toString(),formatter);</code>) you should probably look there first and make sure you data (in the table) is actually a <code>LocalDate</code>.  Also <code>DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();</code> is wasteful, you should just extend from <code>DefaultTableCellRenderer</code> directly"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1679469708,"post_id":75808166,"comment_id":133725740,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679459658,"creation_date":1679459658,"answer_id":75808465,"question_id":75808166,"body_markdown":"The important thing here is the data, what&#39;s in the `TableModel`, as this is what the table will use to sort by.\r\n\r\nBased on `LocalDate  date = LocalDate.parse(value.toString(),formatter);` it would appear that your data is `String` based, which will be the cause of you core problem.\r\n\r\nInstead, you data should be using `LocalDate`.  `LocalDate` is comparable by default, so you don&#39;t need any &quot;special&quot; comparators or additional support, it will &quot;just work&quot; out of the box, for example, unsorted, descending, ascending...\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Component;\r\n    import java.awt.EventQueue;\r\n    import java.time.LocalDate;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTable;\r\n    import javax.swing.table.AbstractTableModel;\r\n    import javax.swing.table.DefaultTableCellRenderer;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() {\r\n                setLayout(new BorderLayout());\r\n                long minDay = LocalDate.of(1970, 1, 1).toEpochDay();\r\n                long maxDay = LocalDate.of(2015, 12, 31).toEpochDay();\r\n                List&lt;LocalDate&gt; dates = new ArrayList&lt;&gt;(100);\r\n                for (int index = 0; index &lt; 100; index++) {\r\n                    long randomDay = ThreadLocalRandom.current().nextLong(minDay, maxDay);\r\n                    dates.add(LocalDate.ofEpochDay(randomDay));\r\n                }\r\n\r\n                JTable table = new JTable(new ExampleTabelModel(dates));\r\n                table.setDefaultRenderer(LocalDate.class, new DateCellRenderer());\r\n                table.setAutoCreateRowSorter(true);\r\n                add(new JScrollPane(table));\r\n            }\r\n        }\r\n\r\n        public class DateCellRenderer extends DefaultTableCellRenderer {\r\n            private static DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;);\r\n\r\n            @Override\r\n            public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n                if (value instanceof LocalDate) {\r\n                    value = ((LocalDate) value).format(formatter);\r\n                }\r\n                return super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n            }\r\n        }\r\n\r\n        public class ExampleTabelModel extends AbstractTableModel {\r\n            private List&lt;LocalDate&gt; dates;\r\n\r\n            public ExampleTabelModel(List&lt;LocalDate&gt; dates) {\r\n                this.dates = dates;\r\n            }\r\n\r\n            @Override\r\n            public String getColumnName(int column) {\r\n                switch (column) {\r\n                    case 0: return &quot;Rows&quot;;\r\n                    case 1: return &quot;Dates&quot;;\r\n                }            \r\n                return null;\r\n            }\r\n\r\n            @Override\r\n            public int getRowCount() {\r\n                return dates.size();\r\n            }\r\n\r\n            @Override\r\n            public int getColumnCount() {\r\n                return 2;\r\n            }\r\n\r\n            @Override\r\n            public Class&lt;?&gt; getColumnClass(int columnIndex) {\r\n                switch (columnIndex) {\r\n                    case 0:\r\n                        return Integer.class;\r\n                    case 1:\r\n                        return LocalDate.class;\r\n                }\r\n                return Object.class;\r\n            }\r\n\r\n            @Override\r\n            public Object getValueAt(int rowIndex, int columnIndex) {\r\n                switch (columnIndex) {\r\n                    case 0:\r\n                        return rowIndex;\r\n                    case 1:\r\n                        return dates.get(rowIndex);\r\n                }\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0L4yO.png","title":"How to sort dates in a column in a JTable?","body":"<p>The important thing here is the data, what's in the <code>TableModel</code>, as this is what the table will use to sort by.</p>\n<p>Based on <code>LocalDate  date = LocalDate.parse(value.toString(),formatter);</code> it would appear that your data is <code>String</code> based, which will be the cause of you core problem.</p>\n<p>Instead, you data should be using <code>LocalDate</code>.  <code>LocalDate</code> is comparable by default, so you don't need any &quot;special&quot; comparators or additional support, it will &quot;just work&quot; out of the box, for example, unsorted, descending, ascending...</p>\n<p><a href=\"https://i.stack.imgur.com/0L4yO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0L4yO.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.EventQueue;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.ThreadLocalRandom;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTable;\nimport javax.swing.table.AbstractTableModel;\nimport javax.swing.table.DefaultTableCellRenderer;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() {\n            setLayout(new BorderLayout());\n            long minDay = LocalDate.of(1970, 1, 1).toEpochDay();\n            long maxDay = LocalDate.of(2015, 12, 31).toEpochDay();\n            List&lt;LocalDate&gt; dates = new ArrayList&lt;&gt;(100);\n            for (int index = 0; index &lt; 100; index++) {\n                long randomDay = ThreadLocalRandom.current().nextLong(minDay, maxDay);\n                dates.add(LocalDate.ofEpochDay(randomDay));\n            }\n\n            JTable table = new JTable(new ExampleTabelModel(dates));\n            table.setDefaultRenderer(LocalDate.class, new DateCellRenderer());\n            table.setAutoCreateRowSorter(true);\n            add(new JScrollPane(table));\n        }\n    }\n\n    public class DateCellRenderer extends DefaultTableCellRenderer {\n        private static DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;);\n\n        @Override\n        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n            if (value instanceof LocalDate) {\n                value = ((LocalDate) value).format(formatter);\n            }\n            return super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n        }\n    }\n\n    public class ExampleTabelModel extends AbstractTableModel {\n        private List&lt;LocalDate&gt; dates;\n\n        public ExampleTabelModel(List&lt;LocalDate&gt; dates) {\n            this.dates = dates;\n        }\n\n        @Override\n        public String getColumnName(int column) {\n            switch (column) {\n                case 0: return &quot;Rows&quot;;\n                case 1: return &quot;Dates&quot;;\n            }            \n            return null;\n        }\n\n        @Override\n        public int getRowCount() {\n            return dates.size();\n        }\n\n        @Override\n        public int getColumnCount() {\n            return 2;\n        }\n\n        @Override\n        public Class&lt;?&gt; getColumnClass(int columnIndex) {\n            switch (columnIndex) {\n                case 0:\n                    return Integer.class;\n                case 1:\n                    return LocalDate.class;\n            }\n            return Object.class;\n        }\n\n        @Override\n        public Object getValueAt(int rowIndex, int columnIndex) {\n            switch (columnIndex) {\n                case 0:\n                    return rowIndex;\n                case 1:\n                    return dates.get(rowIndex);\n            }\n            return null;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28081688,"reputation":3,"user_id":21452675,"display_name":"Gaaperk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75808465,"answer_count":1,"score":-1,"last_activity_date":1679459658,"creation_date":1679454970,"question_id":75808166,"body_markdown":"I have the following jtable [jtable image](https://i.stack.imgur.com/IUcvh.png) I get the information from a database and everything is saved as string in the table, I just want to sort the second column &quot;Fecha de recepcion&quot; which has dates in the format `dd-mm-yyyy`, I used a row classifier but it takes the dates as strings.\r\n\r\nI made a `TableCellRenderer` for just that column and applied the following properties \r\n\r\n    Table.getColumnModel().getColumn(1).setCellRenderer( new Render());\r\n    Table.setAutoCreateRowSorter(true);\r\n\r\nbut it still sorts it as string. \r\n\r\n\r\nI would really appreciate if someone can guide me on what I&#39;m doing wrong\r\n\r\nThis is my class that implements `TableCellRenderer`\r\n\r\n    public class Render implements TableCellRenderer{\r\n         private static DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;);\r\n        @Override\r\n        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n            DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();\r\n            LocalDate  date = LocalDate.parse(value.toString(),formatter);\r\n            Component c = renderer.getTableCellRendererComponent(table,\r\n                    date, isSelected, hasFocus, row, column);\r\n            return c;\r\n        }\r\n    }\r\n\r\n","title":"How to sort dates in a column in a JTable?","body":"<p>I have the following jtable <a href=\"https://i.stack.imgur.com/IUcvh.png\" rel=\"nofollow noreferrer\">jtable image</a> I get the information from a database and everything is saved as string in the table, I just want to sort the second column &quot;Fecha de recepcion&quot; which has dates in the format <code>dd-mm-yyyy</code>, I used a row classifier but it takes the dates as strings.</p>\n<p>I made a <code>TableCellRenderer</code> for just that column and applied the following properties</p>\n<pre><code>Table.getColumnModel().getColumn(1).setCellRenderer( new Render());\nTable.setAutoCreateRowSorter(true);\n</code></pre>\n<p>but it still sorts it as string.</p>\n<p>I would really appreciate if someone can guide me on what I'm doing wrong</p>\n<p>This is my class that implements <code>TableCellRenderer</code></p>\n<pre><code>public class Render implements TableCellRenderer{\n     private static DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;);\n    @Override\n    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n        DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();\n        LocalDate  date = LocalDate.parse(value.toString(),formatter);\n        Component c = renderer.getTableCellRendererComponent(table,\n                date, isSelected, hasFocus, row, column);\n        return c;\n    }\n}\n</code></pre>\n"},{"tags":["java","ant","teamcity"],"owner":{"account_id":12731196,"reputation":49,"user_id":9247778,"display_name":"har123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679458382,"creation_date":1679458382,"question_id":75808399,"body_markdown":"I have a team city agent which builds a ant project. when I am trying to build I am seeing below error. I have configured environment properties.\r\n\r\nCannot find C:\\Users\\*******\\init.xml imported from E:\\Program Files (x86)\\teamcity-agent-1\\work\\c01971de08691ac8\\build.xml\r\n\r\nlooks like the **&quot;import&quot;** tag in build.xml is not working as expected  &quot;import file=&quot;${ant-xml.dir}/init.xml&quot;/&quot;. Can someone please help on how to troubleshoot this issue.\r\n","title":"unable to import init.xml from build agent directory - team city","body":"<p>I have a team city agent which builds a ant project. when I am trying to build I am seeing below error. I have configured environment properties.</p>\n<p>Cannot find C:\\Users*******\\init.xml imported from E:\\Program Files (x86)\\teamcity-agent-1\\work\\c01971de08691ac8\\build.xml</p>\n<p>looks like the <strong>&quot;import&quot;</strong> tag in build.xml is not working as expected  &quot;import file=&quot;${ant-xml.dir}/init.xml&quot;/&quot;. Can someone please help on how to troubleshoot this issue.</p>\n"},{"tags":["java","hash","digital-signature"],"comments":[{"owner":{"account_id":9013374,"reputation":11,"user_id":6717131,"display_name":"WinLord"},"score":0,"creation_date":1679537729,"post_id":75808292,"comment_id":133741241,"body_markdown":"Any idea for this? Change Algorithm or value of xml element to create digest?","body":"Any idea for this? Change Algorithm or value of xml element to create digest?"}],"owner":{"account_id":9013374,"reputation":11,"user_id":6717131,"display_name":"WinLord"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679457662,"creation_date":1679456848,"question_id":75808292,"body_markdown":"I have to create xml to gen Digest value\r\n\r\n    Element objTimer = doc.createElement(&quot;Object&quot;);\r\n    \t---code gen xml tag and data\r\n    objTimer.appendChild(signatureProperties);\r\n\r\nand data xml like this \r\n\r\n    &lt;Object Id=&quot;SigningTime-mindy07w7pug7qwd4fodstkkfmity3ih&quot;&gt;\r\n    \t&lt;SignatureProperties\r\n    \t\txmlns=&quot;&quot;&gt;\r\n    \t\t&lt;SignatureProperty Target=&quot;#Signature-zlxulrwt7qtdm8vlpgts0iq3yay4ibj1&quot;&gt;\r\n    \t\t\t&lt;SigningTime&gt;2023-03-22T10:45:32&lt;/SigningTime&gt;\r\n    \t\t&lt;/SignatureProperty&gt;\r\n    \t&lt;/SignatureProperties&gt;\r\n    &lt;/Object&gt;\r\n\r\nCode to gen Digest\r\n\r\n    private String getDigestForRemoteTimer(Document inputNode, String signingTagName) throws Exception {\r\n    \t\tNode nodeToBeHash = inputNode.getElementsByTagName(signingTagName).item(0);\t\r\n    \t\tCanonicalizer c14n = usingNS ? Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_EXCL_OMIT_COMMENTS)\r\n    \t\t\t\t: Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_OMIT_COMMENTS);\r\n    \t\tbyte[] transformed = c14n.canonicalizeSubtree(nodeToBeHash);\t\r\n    \t\treturn Base64.getEncoder().encodeToString(DigestCreator.digest(transformed, hashAlgo));\r\n    \t}\r\n\r\nFunction to call\r\n\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    factory.setNamespaceAware(true);\r\n    DocumentBuilder builder = factory.newDocumentBuilder();\r\n    Document newDocument = builder.newDocument();\r\n    Node importedNode = newDocument.importNode(objTimer, true);\r\n    newDocument.appendChild(importedNode);\r\n    digestValueTimer.setTextContent(getDigestForRemoteTimer(newDocument, &quot;Object&quot;));\r\n\r\nBut when i check Verify XML Digital Signature, it has **Reference  digest is invalid because the computed digest differs from the digest in the XML**.\r\n\r\nReference to check like this\r\n\r\n    &lt;Reference URI=&quot;#SigningTime-mindy07w7pug7qwd4fodstkkfmity3ih&quot;&gt;\r\n    \t&lt;Transforms&gt;\r\n    \t\t&lt;Transform Algorithm=&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315&quot;/&gt;\r\n    \t&lt;/Transforms&gt;\r\n    \t&lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;/&gt;\r\n    \t&lt;DigestValue&gt;Zq/zkl4R8paPaCQpo5D9PVW8k48=&lt;/DigestValue&gt;\r\n    &lt;/Reference&gt;\r\n\r\nSo what mistake in here, and how can i fix it?","title":"Reference digest is invalid when sign used HSM","body":"<p>I have to create xml to gen Digest value</p>\n<pre><code>Element objTimer = doc.createElement(&quot;Object&quot;);\n    ---code gen xml tag and data\nobjTimer.appendChild(signatureProperties);\n</code></pre>\n<p>and data xml like this</p>\n<pre><code>&lt;Object Id=&quot;SigningTime-mindy07w7pug7qwd4fodstkkfmity3ih&quot;&gt;\n    &lt;SignatureProperties\n        xmlns=&quot;&quot;&gt;\n        &lt;SignatureProperty Target=&quot;#Signature-zlxulrwt7qtdm8vlpgts0iq3yay4ibj1&quot;&gt;\n            &lt;SigningTime&gt;2023-03-22T10:45:32&lt;/SigningTime&gt;\n        &lt;/SignatureProperty&gt;\n    &lt;/SignatureProperties&gt;\n&lt;/Object&gt;\n</code></pre>\n<p>Code to gen Digest</p>\n<pre><code>private String getDigestForRemoteTimer(Document inputNode, String signingTagName) throws Exception {\n        Node nodeToBeHash = inputNode.getElementsByTagName(signingTagName).item(0); \n        Canonicalizer c14n = usingNS ? Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_EXCL_OMIT_COMMENTS)\n                : Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_OMIT_COMMENTS);\n        byte[] transformed = c14n.canonicalizeSubtree(nodeToBeHash);    \n        return Base64.getEncoder().encodeToString(DigestCreator.digest(transformed, hashAlgo));\n    }\n</code></pre>\n<p>Function to call</p>\n<pre><code>DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\nfactory.setNamespaceAware(true);\nDocumentBuilder builder = factory.newDocumentBuilder();\nDocument newDocument = builder.newDocument();\nNode importedNode = newDocument.importNode(objTimer, true);\nnewDocument.appendChild(importedNode);\ndigestValueTimer.setTextContent(getDigestForRemoteTimer(newDocument, &quot;Object&quot;));\n</code></pre>\n<p>But when i check Verify XML Digital Signature, it has <strong>Reference  digest is invalid because the computed digest differs from the digest in the XML</strong>.</p>\n<p>Reference to check like this</p>\n<pre><code>&lt;Reference URI=&quot;#SigningTime-mindy07w7pug7qwd4fodstkkfmity3ih&quot;&gt;\n    &lt;Transforms&gt;\n        &lt;Transform Algorithm=&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315&quot;/&gt;\n    &lt;/Transforms&gt;\n    &lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;/&gt;\n    &lt;DigestValue&gt;Zq/zkl4R8paPaCQpo5D9PVW8k48=&lt;/DigestValue&gt;\n&lt;/Reference&gt;\n</code></pre>\n<p>So what mistake in here, and how can i fix it?</p>\n"},{"tags":["java","reactjs","telegram","telegram-bot"],"comments":[{"owner":{"account_id":28071235,"reputation":1,"user_id":21443787,"display_name":"Fogge"},"score":0,"creation_date":1679471629,"post_id":75808170,"comment_id":133726128,"body_markdown":"try to change my react post method , i have recived response still 400. but the error message is Bad Request: result isn&#39;t specified","body":"try to change my react post method , i have recived response still 400. but the error message is Bad Request: result isn&#39;t specified"},{"owner":{"account_id":28071235,"reputation":1,"user_id":21443787,"display_name":"Fogge"},"score":0,"creation_date":1679475835,"post_id":75808170,"comment_id":133727127,"body_markdown":"I have solved this problem!!!","body":"I have solved this problem!!!"}],"owner":{"account_id":28071235,"reputation":1,"user_id":21443787,"display_name":"Fogge"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679455150,"creation_date":1679455019,"question_id":75808170,"body_markdown":"I am try to send post request from my web app to Telegram method answerWebAppQuery. but dont&#39;t recived any response.\r\n\r\nmy react request code(don&#39;t recived response)\r\n\r\n```\r\n   sendPost() {\r\n        const query_id = window.Telegram.WebApp.initDataUnsafe.query_id;\r\n        const data = { &quot;web_app_query_id&quot;: query_id, &quot;result&quot;: { &quot;title&quot;: &quot;send successful!&quot;, &quot;type&quot;: &quot;article&quot;, &quot;id&quot;: &quot;223&quot;, &quot;input_message_content&quot;: { &quot;message_text&quot;: &quot;test&quot; } } };\r\n        alert(JSON.stringify(data));\r\n        alert(&quot;sendPost!&quot;);\r\n        axios.post(&#39;https://api.telegram.org/bot&lt;mytoken&gt;/answerWebAppQuery&#39;, {\r\n            // Add parameters here\r\n            data\r\n        })\r\n            .then((response) =&gt; {\r\n                alert(&quot;response&quot;);\r\n                console.log(response.data);\r\n                alert(response.data);\r\n                // Handle data\r\n            })\r\n            .catch((error) =&gt; {\r\n                console.log(error);\r\n                alert(error);\r\n            })\r\n        alert(&quot;finsh&quot;);\r\n    }\r\n```\r\n\r\n\r\n\r\nand then,i am try to copy the query_id from webapp to send post use java code ,the server response &quot;Bad Request: query is too old and response timeout expired or query ID is invalid&quot;.\r\n\r\nI think of my post is correct,it&#39;s not that old.\r\n.how can i solve this error? thanks\r\n\r\nmy java post code:\r\n\r\n```\r\nString url = &quot;https://api.telegram.org/bot&lt;mytoken&gt;&quot;;\r\n        String json= &quot;{\\&quot;web_app_query_id\\&quot;:\\&quot;AAGHzz5tAAAAAIfPPm0MZw_9\\n\\&quot;,\\&quot;result\\&quot;:{\\&quot;title\\&quot;:\\&quot;send test for successful!\\&quot;,\\&quot;type\\&quot;:\\&quot;article\\&quot;,\\&quot;id\\&quot;:\\&quot;2231234223\\&quot;,\\&quot;input_message_content\\&quot;:{\\&quot;message_text\\&quot;:\\&quot;test\\&quot;}}}&quot;;\r\n        post(url,json);\r\n        System.out.println(post(url,json));\r\n```\r\n\r\n\r\n\r\n\r\n","title":"Telegram webapp:Bad Request: query is too old and response timeout expired or query ID is invalid","body":"<p>I am try to send post request from my web app to Telegram method answerWebAppQuery. but dont't recived any response.</p>\n<p>my react request code(don't recived response)</p>\n<pre><code>   sendPost() {\n        const query_id = window.Telegram.WebApp.initDataUnsafe.query_id;\n        const data = { &quot;web_app_query_id&quot;: query_id, &quot;result&quot;: { &quot;title&quot;: &quot;send successful!&quot;, &quot;type&quot;: &quot;article&quot;, &quot;id&quot;: &quot;223&quot;, &quot;input_message_content&quot;: { &quot;message_text&quot;: &quot;test&quot; } } };\n        alert(JSON.stringify(data));\n        alert(&quot;sendPost!&quot;);\n        axios.post('https://api.telegram.org/bot&lt;mytoken&gt;/answerWebAppQuery', {\n            // Add parameters here\n            data\n        })\n            .then((response) =&gt; {\n                alert(&quot;response&quot;);\n                console.log(response.data);\n                alert(response.data);\n                // Handle data\n            })\n            .catch((error) =&gt; {\n                console.log(error);\n                alert(error);\n            })\n        alert(&quot;finsh&quot;);\n    }\n</code></pre>\n<p>and then,i am try to copy the query_id from webapp to send post use java code ,the server response &quot;Bad Request: query is too old and response timeout expired or query ID is invalid&quot;.</p>\n<p>I think of my post is correct,it's not that old.\n.how can i solve this error? thanks</p>\n<p>my java post code:</p>\n<pre><code>String url = &quot;https://api.telegram.org/bot&lt;mytoken&gt;&quot;;\n        String json= &quot;{\\&quot;web_app_query_id\\&quot;:\\&quot;AAGHzz5tAAAAAIfPPm0MZw_9\\n\\&quot;,\\&quot;result\\&quot;:{\\&quot;title\\&quot;:\\&quot;send test for successful!\\&quot;,\\&quot;type\\&quot;:\\&quot;article\\&quot;,\\&quot;id\\&quot;:\\&quot;2231234223\\&quot;,\\&quot;input_message_content\\&quot;:{\\&quot;message_text\\&quot;:\\&quot;test\\&quot;}}}&quot;;\n        post(url,json);\n        System.out.println(post(url,json));\n</code></pre>\n"},{"tags":["java","reactjs","telegram","telegram-bot"],"owner":{"account_id":28071235,"reputation":1,"user_id":21443787,"display_name":"Fogge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679454165,"creation_date":1679454165,"question_id":75808115,"body_markdown":"I am try to send message to bot (from telegram webapp). that&#39;s successful, but i don&#39;t know how can i get the message in bot.\r\n\r\n\r\n\r\nthis is my WebApp code. i want to know how can i get the &quot;WebApp message sent!&quot;\r\n\r\n\r\n```\r\nonSubmitClick(e) {\r\n        const button = window.Telegram.WebApp.MainButton;\r\n        if (e === 0) {\r\n            button.text = &quot;submit&quot;;\r\n            button.onClick(this.send);\r\n        } else {\r\n            button.text = &quot;reject&quot;;\r\n        }\r\n        // button.text = &quot;test&quot;;\r\n        this.setState(() =&gt; ({\r\n            mainButton: button\r\n        }))\r\n        button.enable();\r\n        button.show();\r\n    }\r\n\r\n    send(){\r\n        alert(&quot;test oncilck!&quot;);\r\n        //i want get it ↓\r\n        window.Telegram.WebApp.sendData(&quot;WebApp message sent!&quot;);\r\n    }\r\n```\r\n","title":"How can i recived data from Telegram WebApp keyboard button?","body":"<p>I am try to send message to bot (from telegram webapp). that's successful, but i don't know how can i get the message in bot.</p>\n<p>this is my WebApp code. i want to know how can i get the &quot;WebApp message sent!&quot;</p>\n<pre><code>onSubmitClick(e) {\n        const button = window.Telegram.WebApp.MainButton;\n        if (e === 0) {\n            button.text = &quot;submit&quot;;\n            button.onClick(this.send);\n        } else {\n            button.text = &quot;reject&quot;;\n        }\n        // button.text = &quot;test&quot;;\n        this.setState(() =&gt; ({\n            mainButton: button\n        }))\n        button.enable();\n        button.show();\n    }\n\n    send(){\n        alert(&quot;test oncilck!&quot;);\n        //i want get it ↓\n        window.Telegram.WebApp.sendData(&quot;WebApp message sent!&quot;);\n    }\n</code></pre>\n"},{"tags":["java","android","android-coordinatorlayout"],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679453675,"creation_date":1679453230,"question_id":75808058,"body_markdown":"I have two views inside my coordinator layout, basically an image view and nestedScrollView (as Bottom sheet behaviour). \r\n\r\nWhen the bottom sheet is sliding up and down, the image should resize accordingly, but at the moment it&#39;s not and I&#39;m not sure why. How can I get the image to resize properly?\r\n\r\n * This is my example layout\r\n\r\n```\r\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:background=&quot;#CFCACA&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/img&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:src=&quot;@drawable/cartoon&quot;\r\n        android:layout_marginBottom=&quot;50dp&quot;/&gt;\r\n\r\n\r\n    &lt;androidx.core.widget.NestedScrollView\r\n        android:id=&quot;@+id/bottom_sheet&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_insetEdge=&quot;bottom&quot;\r\n        app:layout_behavior=&quot;com.google.android.material.bottomsheet.BottomSheetBehavior&quot;&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginEnd=&quot;50dp&quot;\r\n                android:layout_marginStart=&quot;50dp&quot;\r\n                android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n                &lt;ImageView\r\n                    android:layout_width=&quot;40dp&quot;\r\n                    android:layout_height=&quot;40dp&quot;\r\n                    android:src=&quot;@drawable/ic_baseline_volume_up_24&quot;/&gt;\r\n\r\n                &lt;ImageButton\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;40dp&quot;\r\n                    android:backgroundTint=&quot;@color/white&quot;\r\n                    android:layout_marginStart=&quot;50dp&quot;\r\n                    android:layout_marginEnd=&quot;50dp&quot;\r\n                    android:src=&quot;@drawable/ic_baseline_play_arrow_24&quot;\r\n                    android:background=&quot;@drawable/img_button_shape&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    /&gt;\r\n\r\n\r\n                &lt;ImageView\r\n                    android:layout_width=&quot;40dp&quot;\r\n                    android:layout_height=&quot;40dp&quot;\r\n                    android:layout_gravity=&quot;end&quot;\r\n                    android:src=&quot;@drawable/ic_baseline_volume_up_24&quot;/&gt;\r\n\r\n            &lt;/LinearLayout&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:id=&quot;@+id/layout&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;355dp&quot;\r\n                android:minHeight=&quot;100dp&quot;\r\n                android:layout_marginTop=&quot;15dp&quot;\r\n                android:background=&quot;@drawable/curvy_layout&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n\r\n                &lt;View\r\n                    android:id=&quot;@+id/view&quot;\r\n                    android:layout_width=&quot;50dp&quot;\r\n                    android:layout_height=&quot;5dp&quot;\r\n                    android:background=&quot;@color/black&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:layout_marginTop=&quot;15dp&quot;/&gt;\r\n\r\n                &lt;com.google.android.material.tabs.TabLayout\r\n                    android:id=&quot;@+id/tabLayout&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;40dp&quot;\r\n                    app:tabMode=&quot;scrollable&quot;\r\n                    app:tabBackground=&quot;@drawable/tab_bg&quot;\r\n                    app:tabSelectedTextColor=&quot;@color/white&quot;\r\n                    app:tabIndicatorHeight=&quot;0dp&quot;\r\n                    android:layout_marginTop=&quot;20sp&quot;\r\n                    android:layout_marginStart=&quot;20dp&quot;\r\n                    android:layout_marginEnd=&quot;20dp&quot;/&gt;\r\n\r\n                &lt;androidx.recyclerview.widget.RecyclerView\r\n                    android:id=&quot;@+id/verticalView&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;match_parent&quot;\r\n                    android:scrollbars=&quot;vertical&quot;\r\n                    android:layout_marginTop=&quot;30dp&quot;\r\n                    app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n                    android:layout_marginStart=&quot;10sp&quot;\r\n                    android:layout_marginEnd=&quot;10dp&quot;/&gt;\r\n\r\n            &lt;/LinearLayout&gt;\r\n\r\n\r\n        &lt;/LinearLayout&gt;\r\n\r\n    &lt;/androidx.core.widget.NestedScrollView&gt;\r\n\r\n\r\n\r\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n\r\n```\r\n\r\n\r\n * This is my code \r\n\r\n```\r\n\r\n @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        View bottomSheet = findViewById(R.id.bottom_sheet);\r\n        LinearLayout layout = findViewById(R.id.layout);\r\n        View view = findViewById(R.id.view);\r\n        TabLayout tabLayout = findViewById(R.id.tabLayout);\r\n        RecyclerView recyclerView = findViewById(R.id.verticalView);\r\n        imageView = findViewById(R.id.img);\r\n        mBottomSheetBehavior = BottomSheetBehavior.from(bottomSheet);\r\n\r\n        mBottomSheetBehavior.setHideable(false);\r\n        mBottomSheetBehavior.setPeekHeight(layout.getMinimumHeight());\r\n\r\n        tabLayout.setBackgroundColor(Color.TRANSPARENT);\r\n        \r\n        // Setting up recycler view\r\n\r\n        GridLayoutManager layoutManager = new GridLayoutManager(this,4);\r\n        assert recyclerView != null;\r\n        recyclerView.setLayoutManager(layoutManager);\r\n        recyclerView.setHasFixedSize(true);\r\n        bottomSheet.setNestedScrollingEnabled(false);\r\n\r\n        getTabsList();\r\n        // Setting Up TabLayout\r\n        assert tabLayout != null;\r\n        createTabLayout(tabLayout,recyclerView);\r\n\r\n\r\n    }\r\n\r\n```\r\n\r\n","title":"Expand two views against each other inside CoordinatorLayout","body":"<p>I have two views inside my coordinator layout, basically an image view and nestedScrollView (as Bottom sheet behaviour).</p>\n<p>When the bottom sheet is sliding up and down, the image should resize accordingly, but at the moment it's not and I'm not sure why. How can I get the image to resize properly?</p>\n<ul>\n<li>This is my example layout</li>\n</ul>\n<pre><code>&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:background=&quot;#CFCACA&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/img&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/cartoon&quot;\n        android:layout_marginBottom=&quot;50dp&quot;/&gt;\n\n\n    &lt;androidx.core.widget.NestedScrollView\n        android:id=&quot;@+id/bottom_sheet&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_insetEdge=&quot;bottom&quot;\n        app:layout_behavior=&quot;com.google.android.material.bottomsheet.BottomSheetBehavior&quot;&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:orientation=&quot;vertical&quot;&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginEnd=&quot;50dp&quot;\n                android:layout_marginStart=&quot;50dp&quot;\n                android:orientation=&quot;horizontal&quot;&gt;\n\n                &lt;ImageView\n                    android:layout_width=&quot;40dp&quot;\n                    android:layout_height=&quot;40dp&quot;\n                    android:src=&quot;@drawable/ic_baseline_volume_up_24&quot;/&gt;\n\n                &lt;ImageButton\n                    android:layout_width=&quot;0dp&quot;\n                    android:layout_height=&quot;40dp&quot;\n                    android:backgroundTint=&quot;@color/white&quot;\n                    android:layout_marginStart=&quot;50dp&quot;\n                    android:layout_marginEnd=&quot;50dp&quot;\n                    android:src=&quot;@drawable/ic_baseline_play_arrow_24&quot;\n                    android:background=&quot;@drawable/img_button_shape&quot;\n                    android:layout_weight=&quot;1&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    /&gt;\n\n\n                &lt;ImageView\n                    android:layout_width=&quot;40dp&quot;\n                    android:layout_height=&quot;40dp&quot;\n                    android:layout_gravity=&quot;end&quot;\n                    android:src=&quot;@drawable/ic_baseline_volume_up_24&quot;/&gt;\n\n            &lt;/LinearLayout&gt;\n\n            &lt;LinearLayout\n                android:id=&quot;@+id/layout&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;355dp&quot;\n                android:minHeight=&quot;100dp&quot;\n                android:layout_marginTop=&quot;15dp&quot;\n                android:background=&quot;@drawable/curvy_layout&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;View\n                    android:id=&quot;@+id/view&quot;\n                    android:layout_width=&quot;50dp&quot;\n                    android:layout_height=&quot;5dp&quot;\n                    android:background=&quot;@color/black&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:layout_marginTop=&quot;15dp&quot;/&gt;\n\n                &lt;com.google.android.material.tabs.TabLayout\n                    android:id=&quot;@+id/tabLayout&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;40dp&quot;\n                    app:tabMode=&quot;scrollable&quot;\n                    app:tabBackground=&quot;@drawable/tab_bg&quot;\n                    app:tabSelectedTextColor=&quot;@color/white&quot;\n                    app:tabIndicatorHeight=&quot;0dp&quot;\n                    android:layout_marginTop=&quot;20sp&quot;\n                    android:layout_marginStart=&quot;20dp&quot;\n                    android:layout_marginEnd=&quot;20dp&quot;/&gt;\n\n                &lt;androidx.recyclerview.widget.RecyclerView\n                    android:id=&quot;@+id/verticalView&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;match_parent&quot;\n                    android:scrollbars=&quot;vertical&quot;\n                    android:layout_marginTop=&quot;30dp&quot;\n                    app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n                    android:layout_marginStart=&quot;10sp&quot;\n                    android:layout_marginEnd=&quot;10dp&quot;/&gt;\n\n            &lt;/LinearLayout&gt;\n\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/androidx.core.widget.NestedScrollView&gt;\n\n\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n\n</code></pre>\n<ul>\n<li>This is my code</li>\n</ul>\n<pre><code>\n @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        View bottomSheet = findViewById(R.id.bottom_sheet);\n        LinearLayout layout = findViewById(R.id.layout);\n        View view = findViewById(R.id.view);\n        TabLayout tabLayout = findViewById(R.id.tabLayout);\n        RecyclerView recyclerView = findViewById(R.id.verticalView);\n        imageView = findViewById(R.id.img);\n        mBottomSheetBehavior = BottomSheetBehavior.from(bottomSheet);\n\n        mBottomSheetBehavior.setHideable(false);\n        mBottomSheetBehavior.setPeekHeight(layout.getMinimumHeight());\n\n        tabLayout.setBackgroundColor(Color.TRANSPARENT);\n        \n        // Setting up recycler view\n\n        GridLayoutManager layoutManager = new GridLayoutManager(this,4);\n        assert recyclerView != null;\n        recyclerView.setLayoutManager(layoutManager);\n        recyclerView.setHasFixedSize(true);\n        bottomSheet.setNestedScrollingEnabled(false);\n\n        getTabsList();\n        // Setting Up TabLayout\n        assert tabLayout != null;\n        createTabLayout(tabLayout,recyclerView);\n\n\n    }\n\n</code></pre>\n"},{"tags":["java","model","redhat","asyncapi"],"answers":[{"comments":[{"owner":{"account_id":25988714,"reputation":39,"user_id":19701296,"display_name":"Thushalya Weerasuriya"},"score":0,"creation_date":1679452443,"post_id":75805656,"comment_id":133723835,"body_markdown":"Yeah I will add more hashtags. thank you","body":"Yeah I will add more hashtags. thank you"}],"tags":[],"owner":{"account_id":9769308,"reputation":11,"user_id":7241773,"display_name":"Pakisan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679427234,"creation_date":1679427234,"answer_id":75805656,"question_id":75802008,"body_markdown":"I think only #asyncapi tag is not enough, cause you are enfaced with the issue in external implementation, provided by Red Hat. They are working with AsyncAPI, OpenAPI in their own way, so this is why I can&#39;t provide you with any helpful answer.\r\n\r\nI merged fix to jasyncapi and in 1.0.0-eap-2 you can use `additionalProperties` to store boolean or Schema value\r\n\r\nfix: https://github.com/asyncapi/jasyncapi/pull/131","title":"AsyncAPI apicurio data model additionaProperties:true","body":"<p>I think only #asyncapi tag is not enough, cause you are enfaced with the issue in external implementation, provided by Red Hat. They are working with AsyncAPI, OpenAPI in their own way, so this is why I can't provide you with any helpful answer.</p>\n<p>I merged fix to jasyncapi and in 1.0.0-eap-2 you can use <code>additionalProperties</code> to store boolean or Schema value</p>\n<p>fix: <a href=\"https://github.com/asyncapi/jasyncapi/pull/131\" rel=\"nofollow noreferrer\">https://github.com/asyncapi/jasyncapi/pull/131</a></p>\n"}],"owner":{"account_id":25988714,"reputation":39,"user_id":19701296,"display_name":"Thushalya Weerasuriya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679452591,"creation_date":1679406166,"question_id":75802008,"body_markdown":"In apicurio data model additionalProperties variable is using AsyncApiSchema type, it cannot give the value as true when it comes to create schema for\r\n\r\n`map&lt;map&lt;json&gt;&gt;  offset`\r\n\r\nHere json will be dynamic. Isn&#39;t it good to have it as the type of Object in java.. Or is there any way to set this please point out to me . Thank you\r\n\r\n[![Apicurio data model asyncapi schema](https://i.stack.imgur.com/u6Kyz.png)](https://i.stack.imgur.com/u6Kyz.png)\r\n\r\nI was trying to change the type of variable additionalProperties in to java Object , but like in methods , variables cannot be override in java, therefore I got no solution.. but I have used it like this \r\n\r\n    offset:\r\n     type: object\r\n       additionalProperties:\r\n           type: object\r\n             additionalProperties: {}\r\n\r\nI want to know this is right or not","title":"AsyncAPI apicurio data model additionaProperties:true","body":"<p>In apicurio data model additionalProperties variable is using AsyncApiSchema type, it cannot give the value as true when it comes to create schema for</p>\n<p><code>map&lt;map&lt;json&gt;&gt;  offset</code></p>\n<p>Here json will be dynamic. Isn't it good to have it as the type of Object in java.. Or is there any way to set this please point out to me . Thank you</p>\n<p><a href=\"https://i.stack.imgur.com/u6Kyz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u6Kyz.png\" alt=\"Apicurio data model asyncapi schema\" /></a></p>\n<p>I was trying to change the type of variable additionalProperties in to java Object , but like in methods , variables cannot be override in java, therefore I got no solution.. but I have used it like this</p>\n<pre><code>offset:\n type: object\n   additionalProperties:\n       type: object\n         additionalProperties: {}\n</code></pre>\n<p>I want to know this is right or not</p>\n"},{"tags":["java","html","spring-boot","post"],"answers":[{"tags":[],"owner":{"account_id":9121546,"reputation":41,"user_id":6786808,"display_name":"tuine"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679451004,"creation_date":1679451004,"answer_id":75807900,"question_id":75807571,"body_markdown":"&quot;application/x-www-form-urlencoded&quot; means that the data in the request body is URL-encoded form data, not JSON-formatted data. Therefore, the @RequestBody annotation cannot be used to receive the data in the request body.\r\n\r\nIf you want to receive URL-encoded form data, you should use the @FormParam annotation instead of the @RequestBody annotation. Modify the code as follows:\r\n\r\n    @POST\r\n    @Path(value = &quot;/pruebaRequest&quot;)\r\n    @Consumes(&quot;application/x-www-form-urlencoded&quot;)\r\n    public Response pruebaRequest(@QueryParam(&quot;param1&quot;) String param1, @FormParam(&quot;requestBody&quot;) String requestBody\r\n    ) throws JsonProcessingException, URISyntaxException, UnsupportedEncodingException {\r\n        \r\n        System.out.println(&quot;Param 1: &quot;.concat(param1));\r\n        System.out.println(&quot;Request Body: &quot;.concat(requestBody));\r\n    }","title":"@RequestBody is not working in spring boot with post html","body":"<p>&quot;application/x-www-form-urlencoded&quot; means that the data in the request body is URL-encoded form data, not JSON-formatted data. Therefore, the @RequestBody annotation cannot be used to receive the data in the request body.</p>\n<p>If you want to receive URL-encoded form data, you should use the @FormParam annotation instead of the @RequestBody annotation. Modify the code as follows:</p>\n<pre><code>@POST\n@Path(value = &quot;/pruebaRequest&quot;)\n@Consumes(&quot;application/x-www-form-urlencoded&quot;)\npublic Response pruebaRequest(@QueryParam(&quot;param1&quot;) String param1, @FormParam(&quot;requestBody&quot;) String requestBody\n) throws JsonProcessingException, URISyntaxException, UnsupportedEncodingException {\n    \n    System.out.println(&quot;Param 1: &quot;.concat(param1));\n    System.out.println(&quot;Request Body: &quot;.concat(requestBody));\n}\n</code></pre>\n"}],"owner":{"account_id":2548935,"reputation":11,"user_id":2213133,"display_name":"Jeshua Flako"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":729,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75807900,"answer_count":1,"score":0,"last_activity_date":1679451828,"creation_date":1679446110,"question_id":75807571,"body_markdown":"I have tried to recieve in Spring boot from a post made in html, but in java when i use the @RequestBody the variable is empty. i tried with differentes methods but i cant receive the body of the post.\r\n\r\ni tried with \r\n@RequestParam\r\n\r\nWith those @, i received error Unsupported Media Type\r\n@RequestBody MultiValueMap&lt;String, String&gt;\r\n@RequestParam MultiValueMap&lt;String, String&gt;\r\n\r\nThis is my code\r\n\r\nIn the front i have this\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n    &lt;title&gt;Document&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\t &lt;form  id=&quot;diagnosticoForm2&quot; action=&quot;http://devlocal1.mx.att.com:7003/pruebaRequest?param1=123&quot; method=&quot;POST&quot;&gt;\r\n        &lt;input type=&quot;text&quot; name=&quot;requestBody&quot; id=&quot;requestBody&quot;&gt;\r\n        &lt;input type=&quot;submit&quot; name=&quot;enviar&quot; value=&quot;enviar&quot;/&gt;\r\n    &lt;/form&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nIn the back i have this \r\n\r\n```\r\n\t@POST\r\n\t@Path(value = &quot;/pruebaRequest&quot;)\r\n\t@Consumes(&quot;application/x-www-form-urlencoded&quot;)\r\n\tpublic Response\tpruebaRequest(@QueryParam(&quot;param1&quot;) String param1, @RequestBody String requestBody\r\n\t) throws JsonProcessingException, URISyntaxException, UnsupportedEncodingException {\r\n\t\t\r\n\t\tSystem.out.println(&quot;Param 1: &quot;.concat(param1));\r\n\t\tSystem.out.println(&quot;Request Body: &quot;.concat(requestBody));\r\n.\r\n.\r\n.\r\n.\r\n```\r\n\r\nThe result of println\r\n\r\nParam 1: 123\r\n\r\nRequest Body: \r\n\r\n[![Result of print][1]][1]\r\n\r\nMy json request: {&quot;codigo&quot;: &quot;10&quot;, &quot;mensaje&quot;: &quot;Error en el api&quot;}\r\n\r\n[![Post in front](https://i.stack.imgur.com/B6M7k.png)](https://i.stack.imgur.com/B6M7k.png)\r\n\r\n[![Details](https://i.stack.imgur.com/PqfiQ.png)](https://i.stack.imgur.com/PqfiQ.png)\r\n\r\n[![Post request](https://i.stack.imgur.com/ZJsAA.png)](https://i.stack.imgur.com/ZJsAA.png)\r\n\r\nI want to receive the body in Spring boot\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/F89WL.png","title":"@RequestBody is not working in spring boot with post html","body":"<p>I have tried to recieve in Spring boot from a post made in html, but in java when i use the @RequestBody the variable is empty. i tried with differentes methods but i cant receive the body of the post.</p>\n<p>i tried with\n@RequestParam</p>\n<p>With those @, i received error Unsupported Media Type\n@RequestBody MultiValueMap&lt;String, String&gt;\n@RequestParam MultiValueMap&lt;String, String&gt;</p>\n<p>This is my code</p>\n<p>In the front i have this</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;title&gt;Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n     &lt;form  id=&quot;diagnosticoForm2&quot; action=&quot;http://devlocal1.mx.att.com:7003/pruebaRequest?param1=123&quot; method=&quot;POST&quot;&gt;\n        &lt;input type=&quot;text&quot; name=&quot;requestBody&quot; id=&quot;requestBody&quot;&gt;\n        &lt;input type=&quot;submit&quot; name=&quot;enviar&quot; value=&quot;enviar&quot;/&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>In the back i have this</p>\n<pre><code>    @POST\n    @Path(value = &quot;/pruebaRequest&quot;)\n    @Consumes(&quot;application/x-www-form-urlencoded&quot;)\n    public Response pruebaRequest(@QueryParam(&quot;param1&quot;) String param1, @RequestBody String requestBody\n    ) throws JsonProcessingException, URISyntaxException, UnsupportedEncodingException {\n        \n        System.out.println(&quot;Param 1: &quot;.concat(param1));\n        System.out.println(&quot;Request Body: &quot;.concat(requestBody));\n.\n.\n.\n.\n</code></pre>\n<p>The result of println</p>\n<p>Param 1: 123</p>\n<p>Request Body:</p>\n<p><a href=\"https://i.stack.imgur.com/F89WL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F89WL.png\" alt=\"Result of print\" /></a></p>\n<p>My json request: {&quot;codigo&quot;: &quot;10&quot;, &quot;mensaje&quot;: &quot;Error en el api&quot;}</p>\n<p><a href=\"https://i.stack.imgur.com/B6M7k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B6M7k.png\" alt=\"Post in front\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/PqfiQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PqfiQ.png\" alt=\"Details\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ZJsAA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZJsAA.png\" alt=\"Post request\" /></a></p>\n<p>I want to receive the body in Spring boot</p>\n"},{"tags":["java","ssl","jsse","sslhandshakeexception"],"comments":[{"owner":{"account_id":2121852,"reputation":1019,"user_id":1884937,"accept_rate":52,"display_name":"henrycharles"},"score":0,"creation_date":1587625626,"post_id":875467,"comment_id":108585487,"body_markdown":"i have given two certificate from client how to identify which one needs to add in keystore and truststore could you please help identify this issue as you have already gone through similar kind of issue https://stackoverflow.com/questions/61374276/access-https-restful-service-using-web-client-in-spring-boot-2-0-throwing-except","body":"i have given two certificate from client how to identify which one needs to add in keystore and truststore could you please help identify this issue as you have already gone through similar kind of issue <a href=\"https://stackoverflow.com/questions/61374276/access-https-restful-service-using-web-client-in-spring-boot-2-0-throwing-except\" title=\"access https restful service using web client in spring boot 2 0 throwing except\">stackoverflow.com/questions/61374276/&hellip;</a>"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1614011246,"post_id":875467,"comment_id":117247343,"body_markdown":"Does this answer your question? [Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?](https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore\">Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?</a>"}],"answers":[{"comments":[{"owner":{"account_id":10960,"reputation":4396,"user_id":20941,"accept_rate":78,"display_name":"Jan"},"score":1,"creation_date":1242734310,"post_id":875534,"comment_id":689146,"body_markdown":"This seems like a pretty neat package, but the class that should make it all work &#39;AuthSSLProtocolSocketFactory&#39; is apparantly not part of the official distribution, neither in 4.0beta (despite the release notes stating that it is), or in 3.1. \n\nI&#39;ve hacked around with it a bit and now seem to be permanently stuck with a 5 minute hang before it just drops the connection. It&#39;s really odd - if I load the CA and the client cert into any browser, it just flies.","body":"This seems like a pretty neat package, but the class that should make it all work &#39;AuthSSLProtocolSocketFactory&#39; is apparantly not part of the official distribution, neither in 4.0beta (despite the release notes stating that it is), or in 3.1.   I&#39;ve hacked around with it a bit and now seem to be permanently stuck with a 5 minute hang before it just drops the connection. It&#39;s really odd - if I load the CA and the client cert into any browser, it just flies."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1284501626,"post_id":875534,"comment_id":3917878,"body_markdown":"Apache HTTP Client 4 can take an `SSLContext` directly, so you can configure all this this way, instead of using `AuthSSLProtocolSocketFactory`.","body":"Apache HTTP Client 4 can take an <code>SSLContext</code> directly, so you can configure all this this way, instead of using <code>AuthSSLProtocolSocketFactory</code>."},{"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"score":1,"creation_date":1529443021,"post_id":875534,"comment_id":88872554,"body_markdown":"Is there a way to do all the client certificate stuff in-memory instead of through an external keystore?","body":"Is there a way to do all the client certificate stuff in-memory instead of through an external keystore?"}],"tags":[],"owner":{"account_id":37019,"reputation":51344,"user_id":105744,"accept_rate":92,"display_name":"Taylor Leese"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1242595407,"creation_date":1242595407,"answer_id":875534,"question_id":875467,"body_markdown":"I use the Apache commons HTTP Client package to do this in my current project and it works fine with SSL and a self-signed cert (after installing it into cacerts like you mentioned). Please take a look at it here:\r\n\r\n[http://hc.apache.org/httpclient-3.x/tutorial.html][1]\r\n\r\n[http://hc.apache.org/httpclient-3.x/sslguide.html][2]\r\n\r\n\r\n  [1]: http://hc.apache.org/httpclient-3.x/tutorial.html\r\n  [2]: http://hc.apache.org/httpclient-3.x/sslguide.html","title":"Java client certificates over HTTPS/SSL","body":"<p>I use the Apache commons HTTP Client package to do this in my current project and it works fine with SSL and a self-signed cert (after installing it into cacerts like you mentioned). Please take a look at it here:</p>\n\n<p><a href=\"http://hc.apache.org/httpclient-3.x/tutorial.html\" rel=\"nofollow noreferrer\">http://hc.apache.org/httpclient-3.x/tutorial.html</a></p>\n\n<p><a href=\"http://hc.apache.org/httpclient-3.x/sslguide.html\" rel=\"nofollow noreferrer\">http://hc.apache.org/httpclient-3.x/sslguide.html</a></p>\n"},{"tags":[],"owner":{"account_id":26389,"reputation":9697,"user_id":68612,"accept_rate":81,"display_name":"Gandalf"},"comment_count":0,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1242600140,"creation_date":1242600140,"answer_id":875671,"question_id":875467,"body_markdown":"Have you set the KeyStore and/or TrustStore System properties?\r\n\r\n    java -Djavax.net.ssl.keyStore=pathToKeystore -Djavax.net.ssl.keyStorePassword=123456\r\n\r\nor from with the code\r\n\r\n    System.setProperty(&quot;javax.net.ssl.keyStore&quot;, pathToKeyStore);\r\n\r\nSame with javax.net.ssl.trustStore","title":"Java client certificates over HTTPS/SSL","body":"<p>Have you set the KeyStore and/or TrustStore System properties?</p>\n\n<pre><code>java -Djavax.net.ssl.keyStore=pathToKeystore -Djavax.net.ssl.keyStorePassword=123456\n</code></pre>\n\n<p>or from with the code</p>\n\n<pre><code>System.setProperty(\"javax.net.ssl.keyStore\", pathToKeyStore);\n</code></pre>\n\n<p>Same with javax.net.ssl.trustStore</p>\n"},{"comments":[{"owner":{"account_id":10960,"reputation":4396,"user_id":20941,"accept_rate":78,"display_name":"Jan"},"score":0,"creation_date":1242734406,"post_id":876775,"comment_id":689153,"body_markdown":"I tried cleaning up and starting over, and the handshake failure went away. Now I just get 5 minutes of dead silence before the connection is terminated :o","body":"I tried cleaning up and starting over, and the handshake failure went away. Now I just get 5 minutes of dead silence before the connection is terminated :o"}],"tags":[],"owner":{"account_id":13627,"reputation":5160,"user_id":27507,"accept_rate":90,"display_name":"sourcerebels"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1242636931,"creation_date":1242636931,"answer_id":876775,"question_id":875467,"body_markdown":"I think you have an issue with your server certificate, is not a valid certificate (I think this is what &quot;handshake_failure&quot; means in this case):\r\n\r\nImport your server certificate into your trustcacerts keystore on client&#39;s JRE. This is easily done with [keytool][1]:\r\n\r\n    keytool\r\n        -import\r\n        -alias &lt;provide_an_alias&gt;\r\n        -file &lt;certificate_file&gt;\r\n        -keystore &lt;your_path_to_jre&gt;/lib/security/cacerts\r\n\r\n  [1]: http://java.sun.com/j2se/1.3/docs/tooldocs/win32/keytool.html\r\n\r\n","title":"Java client certificates over HTTPS/SSL","body":"<p>I think you have an issue with your server certificate, is not a valid certificate (I think this is what \"handshake_failure\" means in this case):</p>\n\n<p>Import your server certificate into your trustcacerts keystore on client's JRE. This is easily done with <a href=\"http://java.sun.com/j2se/1.3/docs/tooldocs/win32/keytool.html\" rel=\"nofollow noreferrer\">keytool</a>:</p>\n\n<pre><code>keytool\n    -import\n    -alias &lt;provide_an_alias&gt;\n    -file &lt;certificate_file&gt;\n    -keystore &lt;your_path_to_jre&gt;/lib/security/cacerts\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5601,"reputation":7218,"user_id":9117,"accept_rate":78,"display_name":"Mark Meuer"},"score":0,"creation_date":1331666098,"post_id":876785,"comment_id":12313675,"body_markdown":"You can do this same thing in an even simpler way if you&#39;re using the Axis framework.  See my answer below.","body":"You can do this same thing in an even simpler way if you&#39;re using the Axis framework.  See my answer below."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":77,"creation_date":1335777217,"post_id":876785,"comment_id":13383293,"body_markdown":"It should be noted that disabling certificate validation like this opens the connection to possible MITM attacks: **do not use in production**.","body":"It should be noted that disabling certificate validation like this opens the connection to possible MITM attacks: <b>do not use in production</b>."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1335781019,"post_id":876785,"comment_id":13384452,"body_markdown":"Code doesn&#39;t compile, thankfully. This &#39;solution&#39; is radically insecure.","body":"Code doesn&#39;t compile, thankfully. This &#39;solution&#39; is radically insecure."},{"owner":{"display_name":"anon"},"score":0,"creation_date":1335785296,"post_id":876785,"comment_id":13385916,"body_markdown":"Thanks @EJP, a &quot;return null;&quot; managed to disappear in a previous edit.   As to &quot;do not use in production&quot;, that really depends on what you use it for.","body":"Thanks @EJP, a &quot;return null;&quot; managed to disappear in a previous edit.   As to &quot;do not use in production&quot;, that really depends on what you use it for."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":7,"creation_date":1335785572,"post_id":876785,"comment_id":13386003,"body_markdown":"@neu242, no, it doesn&#39;t really depend on what you use it for. If you want to use SSL/TLS, you want to secure your connection against MITM attacks, that&#39;s the whole point. Server authentication is not necessary if you can guarantee that no one will be able to alter the traffic, but situations where you suspect there may be eavesdroppers that wouldn&#39;t also be in a position to alter the network traffic too are quite rare.","body":"@neu242, no, it doesn&#39;t really depend on what you use it for. If you want to use SSL/TLS, you want to secure your connection against MITM attacks, that&#39;s the whole point. Server authentication is not necessary if you can guarantee that no one will be able to alter the traffic, but situations where you suspect there may be eavesdroppers that wouldn&#39;t also be in a position to alter the network traffic too are quite rare."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1335786032,"post_id":876785,"comment_id":13386137,"body_markdown":"@neu242 `return null;` is also wrong. See the contract for `X509TrustManager`. As for the rest, Bruno is correct: this stuff should not be deployed in production. SSL &amp; TLS are not secure unless at least one peer is authenticated. See the discussion in RFC 2246.","body":"@neu242 <code>return null;</code> is also wrong. See the contract for <code>X509TrustManager</code>. As for the rest, Bruno is correct: this stuff should not be deployed in production. SSL &amp; TLS are not secure unless at least one peer is authenticated. See the discussion in RFC 2246."},{"owner":{"account_id":1140701,"reputation":3189,"user_id":1124703,"accept_rate":100,"display_name":"Sal"},"score":1,"creation_date":1351196706,"post_id":876785,"comment_id":17764929,"body_markdown":"@neu242 Thanks for the code snippet. I&#39;m actually thinking of using this in production for a very specific purpose (web crawling), and I mentioned your implementation in a question.(http://stackoverflow.com/questions/13076511/security-risks-in-disabling-ssl-certification-for-java-program). If you have time, could you please look at it, and let me know if there are any security risks I missed?","body":"@neu242 Thanks for the code snippet. I&#39;m actually thinking of using this in production for a very specific purpose (web crawling), and I mentioned your implementation in a question.(<a href=\"http://stackoverflow.com/questions/13076511/security-risks-in-disabling-ssl-certification-for-java-program\" title=\"security risks in disabling ssl certification for java program\">stackoverflow.com/questions/13076511/&hellip;</a>). If you have time, could you please look at it, and let me know if there are any security risks I missed?"},{"owner":{"account_id":367633,"reputation":6473,"user_id":713937,"accept_rate":84,"display_name":"Piotr Sobczyk"},"score":2,"creation_date":1417448966,"post_id":876785,"comment_id":42940782,"body_markdown":"Wasn&#39;t the question about problems with using client certificate? That snippet &quot;solves&quot; problems with server certificates. How it can be the highest voted question?","body":"Wasn&#39;t the question about problems with using client certificate? That snippet &quot;solves&quot; problems with server certificates. How it can be the highest voted question?"},{"owner":{"account_id":59868,"reputation":12560,"user_id":179024,"accept_rate":77,"display_name":"MW."},"score":0,"creation_date":1424253322,"post_id":876785,"comment_id":45469204,"body_markdown":"*Don&#39;t do this!* The big risk here is that once it &quot;works&quot; and this security hole is in your code base, it&#39;s *super* easy to forget to fix this. There will be even less time to get it working properly when you&#39;re close to release and the deadline is approaching. Then you end up in a position where you&#39;ve drilled the lock out of your front door, because you had trouble locking the door.","body":"<i>Don&#39;t do this!</i> The big risk here is that once it &quot;works&quot; and this security hole is in your code base, it&#39;s <i>super</i> easy to forget to fix this. There will be even less time to get it working properly when you&#39;re close to release and the deadline is approaching. Then you end up in a position where you&#39;ve drilled the lock out of your front door, because you had trouble locking the door."},{"owner":{"account_id":1946726,"reputation":2718,"user_id":1751692,"accept_rate":78,"display_name":"orpqK"},"score":1,"creation_date":1428065911,"post_id":876785,"comment_id":47034731,"body_markdown":"@Bruno If i am only pinging the server, would that really affect me at all, by MITM attacks?","body":"@Bruno If i am only pinging the server, would that really affect me at all, by MITM attacks?"},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":0,"creation_date":1428067641,"post_id":876785,"comment_id":47035648,"body_markdown":"@JennyC It depends what you mean by &quot;pinging&quot;. This trust manager simply offers you no more guarantees than plain HTTP. This SSLContext is also installed on all `HttpsURLConnection`s.","body":"@JennyC It depends what you mean by &quot;pinging&quot;. This trust manager simply offers you no more guarantees than plain HTTP. This SSLContext is also installed on all <code>HttpsURLConnection</code>s."},{"owner":{"account_id":1946726,"reputation":2718,"user_id":1751692,"accept_rate":78,"display_name":"orpqK"},"score":0,"creation_date":1428068681,"post_id":876785,"comment_id":47036146,"body_markdown":"@Bruno I asked a similar question to this, this is what i am doing by &quot;pinging&quot;.  http://stackoverflow.com/questions/29421537/connect-to-a-https-secure-website-and-ping-the-latency?noredirect=1#comment47015158_29421537","body":"@Bruno I asked a similar question to this, this is what i am doing by &quot;pinging&quot;.  <a href=\"http://stackoverflow.com/questions/29421537/connect-to-a-https-secure-website-and-ping-the-latency?noredirect=1#comment47015158_29421537\" title=\"connect to a https secure website and ping the latency\">stackoverflow.com/questions/29421537/&hellip;</a>"},{"owner":{"account_id":151653,"reputation":1689,"user_id":365675,"accept_rate":48,"display_name":"yetanothercoder"},"score":0,"creation_date":1445965575,"post_id":876785,"comment_id":54542619,"body_markdown":"it doesn&#39;t work for some sites, ex. https://www.vsopen.ru/ :  https://gist.github.com/yetanothercoder/331989cf5aee2b833ee8","body":"it doesn&#39;t work for some sites, ex. <a href=\"https://www.vsopen.ru/\" rel=\"nofollow noreferrer\">vsopen.ru</a> :  <a href=\"https://gist.github.com/yetanothercoder/331989cf5aee2b833ee8\" rel=\"nofollow noreferrer\">gist.github.com/yetanothercoder/331989cf5aee2b833ee8</a>"},{"owner":{"display_name":"user1480019"},"score":0,"creation_date":1450536823,"post_id":876785,"comment_id":56485685,"body_markdown":"Does not work for sites using CloudFlare Flexible SSL service, such as https://kitematic.com/ (`Caused by: javax.net.ssl.SSLException: Received fatal alert: internal_error`)","body":"Does not work for sites using CloudFlare Flexible SSL service, such as <a href=\"https://kitematic.com/\" rel=\"nofollow noreferrer\">kitematic.com</a> (<code>Caused by: javax.net.ssl.SSLException: Received fatal alert: internal_error</code>)"},{"owner":{"account_id":4545436,"reputation":611,"user_id":3692178,"accept_rate":85,"display_name":"Krishna"},"score":0,"creation_date":1493989521,"post_id":876785,"comment_id":74650403,"body_markdown":"How to use this code while opening connection. I&#39;m trying to hit https url from main method. when url.openConnection(); it is displaying the error. Sorry if its noob. Just want to learn.","body":"How to use this code while opening connection. I&#39;m trying to hit https url from main method. when url.openConnection(); it is displaying the error. Sorry if its noob. Just want to learn."},{"owner":{"account_id":939116,"reputation":1009,"user_id":967522,"accept_rate":80,"display_name":"Diego Ramos"},"score":1,"creation_date":1602275335,"post_id":876785,"comment_id":113679742,"body_markdown":"Question is about client certificate... this cannot be skipped...","body":"Question is about client certificate... this cannot be skipped..."}],"tags":[],"owner":{"display_name":"anon"},"comment_count":16,"down_vote_count":23,"up_vote_count":108,"is_accepted":false,"score":85,"last_activity_date":1679450391,"creation_date":1242637111,"answer_id":876785,"question_id":875467,"body_markdown":"While not recommended, you can also disable SSL cert validation altogether, using the following code that came from [The Java Developers Almanac](https://web.archive.org/web/20061217061841/http://www.exampledepot.com/egs/javax.net.ssl/TrustAll.html):\r\n\r\n&gt;```\r\n&gt; import javax.net.ssl.*; import java.security.SecureRandom; import\r\n&gt; java.security.cert.X509Certificate;\r\n&gt; \r\n&gt; public class SSLTool {\r\n&gt; \r\n&gt;   public static void disableCertificateValidation() {\r\n&gt;     // Create a trust manager that does not validate certificate chains\r\n&gt;     TrustManager[] trustAllCerts = new TrustManager[] { \r\n&gt;       new X509TrustManager() {\r\n&gt;         public X509Certificate[] getAcceptedIssuers() { \r\n&gt;           return new X509Certificate[0]; \r\n&gt;         }\r\n&gt;         public void checkClientTrusted(X509Certificate[] certs, String authType) {}\r\n&gt;         public void checkServerTrusted(X509Certificate[] certs, String authType) {}\r\n&gt;     }};\r\n&gt; \r\n&gt;     // Ignore differences between given hostname and certificate hostname\r\n&gt;     HostnameVerifier hv = new HostnameVerifier() {\r\n&gt;       public boolean verify(String hostname, SSLSession session) { return true; }\r\n&gt;     };\r\n&gt; \r\n&gt;     // Install the all-trusting trust manager\r\n&gt;     try {\r\n&gt;       SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n&gt;       sc.init(null, trustAllCerts, new SecureRandom());\r\n&gt;       HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n&gt;       HttpsURLConnection.setDefaultHostnameVerifier(hv);\r\n&gt;     } catch (Exception e) {}   } }\r\n&gt;```\r\n\r\n","title":"Java client certificates over HTTPS/SSL","body":"<p>While not recommended, you can also disable SSL cert validation altogether, using the following code that came from <a href=\"https://web.archive.org/web/20061217061841/http://www.exampledepot.com/egs/javax.net.ssl/TrustAll.html\" rel=\"nofollow noreferrer\">The Java Developers Almanac</a>:</p>\n<blockquote>\n<pre><code>import javax.net.ssl.*; import java.security.SecureRandom; import\njava.security.cert.X509Certificate;\n\npublic class SSLTool {\n\n  public static void disableCertificateValidation() {\n    // Create a trust manager that does not validate certificate chains\n    TrustManager[] trustAllCerts = new TrustManager[] { \n      new X509TrustManager() {\n        public X509Certificate[] getAcceptedIssuers() { \n          return new X509Certificate[0]; \n        }\n        public void checkClientTrusted(X509Certificate[] certs, String authType) {}\n        public void checkServerTrusted(X509Certificate[] certs, String authType) {}\n    }};\n\n    // Ignore differences between given hostname and certificate hostname\n    HostnameVerifier hv = new HostnameVerifier() {\n      public boolean verify(String hostname, SSLSession session) { return true; }\n    };\n\n    // Install the all-trusting trust manager\n    try {\n      SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\n      sc.init(null, trustAllCerts, new SecureRandom());\n      HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n      HttpsURLConnection.setDefaultHostnameVerifier(hv);\n    } catch (Exception e) {}   } }\n</code></pre>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":3030319,"reputation":1688,"user_id":2569475,"display_name":"Deepak"},"score":0,"creation_date":1494524404,"post_id":882479,"comment_id":74877610,"body_markdown":"I have use a url like: https://localhost:8443/Application_Name/getAttributes. I have a method with /getAttribute url mapping. This method returns a list of elements. I have used HttpsUrlConnection , connection reponse code is 200, but its not giving me the attribute list when i use inputStream, it gives me html content of my login page. I have done Authentication and set the content type as JSON. Please suggest","body":"I have use a url like: <a href=\"https://localhost:8443/Application_Name/getAttributes\" rel=\"nofollow noreferrer\">localhost:8443/Application_Name/getAttributes</a>. I have a method with /getAttribute url mapping. This method returns a list of elements. I have used HttpsUrlConnection , connection reponse code is 200, but its not giving me the attribute list when i use inputStream, it gives me html content of my login page. I have done Authentication and set the content type as JSON. Please suggest"}],"tags":[],"owner":{"account_id":10960,"reputation":4396,"user_id":20941,"accept_rate":78,"display_name":"Jan"},"comment_count":1,"down_vote_count":0,"up_vote_count":107,"is_accepted":true,"score":107,"last_activity_date":1310465952,"creation_date":1242736450,"answer_id":882479,"question_id":875467,"body_markdown":"Finally solved it ;). Got a strong hint [here][1] (Gandalfs answer touched a bit on it as well). The missing links was (mostly) the first of the parameters below, and to some extent that I overlooked the difference between keystores and truststores.\r\n\r\nThe self-signed server certificate must be imported into a truststore:\r\n\r\n&gt; keytool -import -alias gridserver -file gridserver.crt -storepass $PASS -keystore gridserver.keystore\r\n\r\nThese properties need to be set (either on the commandline, or in code):\r\n\r\n    -Djavax.net.ssl.keyStoreType=pkcs12\r\n    -Djavax.net.ssl.trustStoreType=jks\r\n    -Djavax.net.ssl.keyStore=clientcertificate.p12\r\n    -Djavax.net.ssl.trustStore=gridserver.keystore\r\n    -Djavax.net.debug=ssl # very verbose debug\r\n    -Djavax.net.ssl.keyStorePassword=$PASS\r\n    -Djavax.net.ssl.trustStorePassword=$PASS\r\n\r\nWorking example code:\r\n\r\n    SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n    URL url = new URL(&quot;https://gridserver:3049/cgi-bin/ls.py&quot;);\r\n    HttpsURLConnection conn = (HttpsURLConnection)url.openConnection();\r\n    conn.setSSLSocketFactory(sslsocketfactory);\r\n    InputStream inputstream = conn.getInputStream();\r\n    InputStreamReader inputstreamreader = new InputStreamReader(inputstream);\r\n    BufferedReader bufferedreader = new BufferedReader(inputstreamreader);\r\n    \r\n    String string = null;\r\n    while ((string = bufferedreader.readLine()) != null) {\r\n        System.out.println(&quot;Received &quot; + string);\r\n    }\r\n\r\n  [1]: http://emo.sourceforge.net/cert-login-howto.html","title":"Java client certificates over HTTPS/SSL","body":"<p>Finally solved it ;). Got a strong hint <a href=\"http://emo.sourceforge.net/cert-login-howto.html\" rel=\"noreferrer\">here</a> (Gandalfs answer touched a bit on it as well). The missing links was (mostly) the first of the parameters below, and to some extent that I overlooked the difference between keystores and truststores.</p>\n\n<p>The self-signed server certificate must be imported into a truststore:</p>\n\n<blockquote>\n  <p>keytool -import -alias gridserver -file gridserver.crt -storepass $PASS -keystore gridserver.keystore</p>\n</blockquote>\n\n<p>These properties need to be set (either on the commandline, or in code):</p>\n\n<pre><code>-Djavax.net.ssl.keyStoreType=pkcs12\n-Djavax.net.ssl.trustStoreType=jks\n-Djavax.net.ssl.keyStore=clientcertificate.p12\n-Djavax.net.ssl.trustStore=gridserver.keystore\n-Djavax.net.debug=ssl # very verbose debug\n-Djavax.net.ssl.keyStorePassword=$PASS\n-Djavax.net.ssl.trustStorePassword=$PASS\n</code></pre>\n\n<p>Working example code:</p>\n\n<pre><code>SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\nURL url = new URL(\"https://gridserver:3049/cgi-bin/ls.py\");\nHttpsURLConnection conn = (HttpsURLConnection)url.openConnection();\nconn.setSSLSocketFactory(sslsocketfactory);\nInputStream inputstream = conn.getInputStream();\nInputStreamReader inputstreamreader = new InputStreamReader(inputstream);\nBufferedReader bufferedreader = new BufferedReader(inputstreamreader);\n\nString string = null;\nwhile ((string = bufferedreader.readLine()) != null) {\n    System.out.println(\"Received \" + string);\n}\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"anon"},"score":0,"creation_date":1331709892,"post_id":3199101,"comment_id":12323830,"body_markdown":"The OP is dealing with a HttpsURLConnection, not Axis","body":"The OP is dealing with a HttpsURLConnection, not Axis"},{"owner":{"account_id":5601,"reputation":7218,"user_id":9117,"accept_rate":78,"display_name":"Mark Meuer"},"score":2,"creation_date":1332195555,"post_id":3199101,"comment_id":12446775,"body_markdown":"I understand. I did not intend to imply that my answer was better in the general case.  It is just that if you *are* using the Axis framework, you may have the OP&#39;s question in that context.  (That&#39;s how I found this question in the first place.)  In that case, the way I have provided is simpler.","body":"I understand. I did not intend to imply that my answer was better in the general case.  It is just that if you <i>are</i> using the Axis framework, you may have the OP&#39;s question in that context.  (That&#39;s how I found this question in the first place.)  In that case, the way I have provided is simpler."}],"tags":[],"owner":{"account_id":5601,"reputation":7218,"user_id":9117,"accept_rate":78,"display_name":"Mark Meuer"},"comment_count":2,"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1278538974,"creation_date":1278538974,"answer_id":3199101,"question_id":875467,"body_markdown":"If you are dealing with a web service call using the Axis framework, there is a much simpler answer.   If all want is for your client to be able to call the SSL web service and ignore SSL certificate errors, just put this statement before you invoke any web services: \r\n\r\n`System.setProperty(&quot;axis.socketSecureFactory&quot;,\r\n &quot;org.apache.axis.components.net.SunFakeTrustSocketFactory&quot;);`\r\n\r\nThe usual disclaimers about this being a Very Bad Thing to do in a production environment apply.\r\n\r\nI found this at [the Axis wiki][1].\r\n\r\n\r\n  [1]: http://wiki.apache.org/ws/FrontPage/Axis/SslUnsignedCertificate","title":"Java client certificates over HTTPS/SSL","body":"<p>If you are dealing with a web service call using the Axis framework, there is a much simpler answer.   If all want is for your client to be able to call the SSL web service and ignore SSL certificate errors, just put this statement before you invoke any web services: </p>\n\n<p><code>System.setProperty(\"axis.socketSecureFactory\",\n \"org.apache.axis.components.net.SunFakeTrustSocketFactory\");</code></p>\n\n<p>The usual disclaimers about this being a Very Bad Thing to do in a production environment apply.</p>\n\n<p>I found this at <a href=\"http://wiki.apache.org/ws/FrontPage/Axis/SslUnsignedCertificate\" rel=\"noreferrer\">the Axis wiki</a>.</p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1493597961,"post_id":22766312,"comment_id":74469351,"body_markdown":"Creating your own custom SSL factory is a lot more complicated and error-prone than setting two system properties.","body":"Creating your own custom SSL factory is a lot more complicated and error-prone than setting two system properties."}],"tags":[],"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1397659989,"creation_date":1396281296,"answer_id":22766312,"question_id":875467,"body_markdown":"Using below code\r\n    \r\n    -Djavax.net.ssl.keyStoreType=pkcs12\r\n\r\nor\r\n\r\n    System.setProperty(&quot;javax.net.ssl.keyStore&quot;, pathToKeyStore);\r\n\r\nis not at all required. Also there is no need to create your own custom SSL factory.\r\n    \r\nI also encountered the same issue, in my case there was a issue that **complete certificate chain** was not imported into truststores. Import certificates using keytool utility right fom root certificate, also you can open cacerts file in notepad and see if the complete certificate chain is imported or not. Check against the alias name you have provided while importing certificates, open the certificates and see how many does it contains, same number of certificates should be there in cacerts file.\r\n    \r\nAlso cacerts file should be configured in the server you are running your application, the two servers will authenticate each other with public/private keys.\r\n","title":"Java client certificates over HTTPS/SSL","body":"<p>Using below code</p>\n\n<pre><code>-Djavax.net.ssl.keyStoreType=pkcs12\n</code></pre>\n\n<p>or</p>\n\n<pre><code>System.setProperty(\"javax.net.ssl.keyStore\", pathToKeyStore);\n</code></pre>\n\n<p>is not at all required. Also there is no need to create your own custom SSL factory.</p>\n\n<p>I also encountered the same issue, in my case there was a issue that <strong>complete certificate chain</strong> was not imported into truststores. Import certificates using keytool utility right fom root certificate, also you can open cacerts file in notepad and see if the complete certificate chain is imported or not. Check against the alias name you have provided while importing certificates, open the certificates and see how many does it contains, same number of certificates should be there in cacerts file.</p>\n\n<p>Also cacerts file should be configured in the server you are running your application, the two servers will authenticate each other with public/private keys.</p>\n"},{"comments":[{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1415276985,"post_id":26779528,"comment_id":42136673,"body_markdown":"The `keyStore` is what contains the private key and certificate.","body":"The <code>keyStore</code> is what contains the private key and certificate."},{"owner":{"account_id":439133,"reputation":434,"user_id":827858,"accept_rate":57,"display_name":"Jitesh Pramodray"},"score":1,"creation_date":1449841754,"post_id":26779528,"comment_id":56194005,"body_markdown":"You need to include these 2 dependencies for the convertPEMtoP12 code to work:\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.53&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.53&lt;/version&gt;\n        &lt;/dependency&gt;","body":"You need to include these 2 dependencies for the convertPEMtoP12 code to work:          &lt;dependency&gt;             &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;             &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;             &lt;version&gt;1.53&lt;/version&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;             &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;             &lt;version&gt;1.53&lt;/version&gt;         &lt;/dependency&gt;"},{"owner":{"account_id":467927,"reputation":4327,"user_id":873601,"accept_rate":89,"display_name":"Vishal Biyani"},"score":0,"creation_date":1482840215,"post_id":26779528,"comment_id":69891569,"body_markdown":"@EpicPandaForce I get an error : Caught: org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object with class &#39;org.bouncycastle.jcajce.provider.asymmetric.x509.X509CertificateObject&#39; to class &#39;int&#39; in line ks.setKeyEntry - any clues what might be wrong","body":"@EpicPandaForce I get an error : Caught: org.codehaus.groovy.runtime.typehandling.GroovyCastException&zwnj;&#8203;: Cannot cast object with class &#39;org.bouncycastle.jcajce.provider.asymmetric.x509.X509Certif&zwnj;&#8203;icateObject&#39; to class &#39;int&#39; in line ks.setKeyEntry - any clues what might be wrong"},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1482841532,"post_id":26779528,"comment_id":69892209,"body_markdown":"Yeah, you&#39;re using Groovy instead of a strictly typed language. (technically that method takes an ID and a certificate, not just a certificate)","body":"Yeah, you&#39;re using Groovy instead of a strictly typed language. (technically that method takes an ID and a certificate, not just a certificate)"}],"tags":[],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"comment_count":4,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1415276946,"creation_date":1415276946,"answer_id":26779528,"question_id":875467,"body_markdown":"For me, this is what worked using Apache HttpComponents ~ HttpClient 4.x:\r\n\r\n        KeyStore keyStore  = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        FileInputStream instream = new FileInputStream(new File(&quot;client-p12-keystore.p12&quot;));\r\n        try {\r\n            keyStore.load(instream, &quot;helloworld&quot;.toCharArray());\r\n        } finally {\r\n            instream.close();\r\n        }\r\n\r\n        // Trust own CA and all self-signed certs\r\n        SSLContext sslcontext = SSLContexts.custom()\r\n            .loadKeyMaterial(keyStore, &quot;helloworld&quot;.toCharArray())\r\n            //.loadTrustMaterial(trustStore, new TrustSelfSignedStrategy()) //custom trust store\r\n            .build();\r\n        // Allow TLSv1 protocol only\r\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n            sslcontext,\r\n            new String[] { &quot;TLSv1&quot; },\r\n            null,\r\n            SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER); //TODO\r\n        CloseableHttpClient httpclient = HttpClients.custom()\r\n            .setHostnameVerifier(SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER) //TODO\r\n            .setSSLSocketFactory(sslsf)\r\n            .build();\r\n        try {\r\n\r\n            HttpGet httpget = new HttpGet(&quot;https://localhost:8443/secure/index&quot;);\r\n\r\n            System.out.println(&quot;executing request&quot; + httpget.getRequestLine());\r\n\r\n            CloseableHttpResponse response = httpclient.execute(httpget);\r\n            try {\r\n                HttpEntity entity = response.getEntity();\r\n\r\n                System.out.println(&quot;----------------------------------------&quot;);\r\n                System.out.println(response.getStatusLine());\r\n                if (entity != null) {\r\n                    System.out.println(&quot;Response content length: &quot; + entity.getContentLength());\r\n                }\r\n                EntityUtils.consume(entity);\r\n            } finally {\r\n                response.close();\r\n            }\r\n        } finally {\r\n            httpclient.close();\r\n        }\r\n\r\nThe P12 file contains the client certificate and client private key, created with BouncyCastle:\r\n\r\n    public static byte[] convertPEMToPKCS12(final String keyFile, final String cerFile,\r\n        final String password)\r\n        throws IOException, CertificateException, KeyStoreException, NoSuchAlgorithmException,\r\n        NoSuchProviderException\r\n    {\r\n        // Get the private key\r\n        FileReader reader = new FileReader(keyFile);\r\n\r\n        PEMParser pem = new PEMParser(reader);\r\n        PEMKeyPair pemKeyPair = ((PEMKeyPair)pem.readObject());\r\n        JcaPEMKeyConverter jcaPEMKeyConverter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\r\n        KeyPair keyPair = jcaPEMKeyConverter.getKeyPair(pemKeyPair);\r\n\r\n        PrivateKey key = keyPair.getPrivate();\r\n\r\n        pem.close();\r\n        reader.close();\r\n\r\n        // Get the certificate\r\n        reader = new FileReader(cerFile);\r\n        pem = new PEMParser(reader);\r\n\r\n        X509CertificateHolder certHolder = (X509CertificateHolder) pem.readObject();\r\n        java.security.cert.Certificate x509Certificate =\r\n            new JcaX509CertificateConverter().setProvider(&quot;BC&quot;)\r\n                .getCertificate(certHolder);\r\n\r\n        pem.close();\r\n        reader.close();\r\n\r\n        // Put them into a PKCS12 keystore and write it to a byte[]\r\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;, &quot;BC&quot;);\r\n        ks.load(null);\r\n        ks.setKeyEntry(&quot;key-alias&quot;, (Key) key, password.toCharArray(),\r\n            new java.security.cert.Certificate[]{x509Certificate});\r\n        ks.store(bos, password.toCharArray());\r\n        bos.close();\r\n        return bos.toByteArray();\r\n    }","title":"Java client certificates over HTTPS/SSL","body":"<p>For me, this is what worked using Apache HttpComponents ~ HttpClient 4.x:</p>\n\n<pre><code>    KeyStore keyStore  = KeyStore.getInstance(\"PKCS12\");\n    FileInputStream instream = new FileInputStream(new File(\"client-p12-keystore.p12\"));\n    try {\n        keyStore.load(instream, \"helloworld\".toCharArray());\n    } finally {\n        instream.close();\n    }\n\n    // Trust own CA and all self-signed certs\n    SSLContext sslcontext = SSLContexts.custom()\n        .loadKeyMaterial(keyStore, \"helloworld\".toCharArray())\n        //.loadTrustMaterial(trustStore, new TrustSelfSignedStrategy()) //custom trust store\n        .build();\n    // Allow TLSv1 protocol only\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n        sslcontext,\n        new String[] { \"TLSv1\" },\n        null,\n        SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER); //TODO\n    CloseableHttpClient httpclient = HttpClients.custom()\n        .setHostnameVerifier(SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER) //TODO\n        .setSSLSocketFactory(sslsf)\n        .build();\n    try {\n\n        HttpGet httpget = new HttpGet(\"https://localhost:8443/secure/index\");\n\n        System.out.println(\"executing request\" + httpget.getRequestLine());\n\n        CloseableHttpResponse response = httpclient.execute(httpget);\n        try {\n            HttpEntity entity = response.getEntity();\n\n            System.out.println(\"----------------------------------------\");\n            System.out.println(response.getStatusLine());\n            if (entity != null) {\n                System.out.println(\"Response content length: \" + entity.getContentLength());\n            }\n            EntityUtils.consume(entity);\n        } finally {\n            response.close();\n        }\n    } finally {\n        httpclient.close();\n    }\n</code></pre>\n\n<p>The P12 file contains the client certificate and client private key, created with BouncyCastle:</p>\n\n<pre><code>public static byte[] convertPEMToPKCS12(final String keyFile, final String cerFile,\n    final String password)\n    throws IOException, CertificateException, KeyStoreException, NoSuchAlgorithmException,\n    NoSuchProviderException\n{\n    // Get the private key\n    FileReader reader = new FileReader(keyFile);\n\n    PEMParser pem = new PEMParser(reader);\n    PEMKeyPair pemKeyPair = ((PEMKeyPair)pem.readObject());\n    JcaPEMKeyConverter jcaPEMKeyConverter = new JcaPEMKeyConverter().setProvider(\"BC\");\n    KeyPair keyPair = jcaPEMKeyConverter.getKeyPair(pemKeyPair);\n\n    PrivateKey key = keyPair.getPrivate();\n\n    pem.close();\n    reader.close();\n\n    // Get the certificate\n    reader = new FileReader(cerFile);\n    pem = new PEMParser(reader);\n\n    X509CertificateHolder certHolder = (X509CertificateHolder) pem.readObject();\n    java.security.cert.Certificate x509Certificate =\n        new JcaX509CertificateConverter().setProvider(\"BC\")\n            .getCertificate(certHolder);\n\n    pem.close();\n    reader.close();\n\n    // Put them into a PKCS12 keystore and write it to a byte[]\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\n    KeyStore ks = KeyStore.getInstance(\"PKCS12\", \"BC\");\n    ks.load(null);\n    ks.setKeyEntry(\"key-alias\", (Key) key, password.toCharArray(),\n        new java.security.cert.Certificate[]{x509Certificate});\n    ks.store(bos, password.toCharArray());\n    bos.close();\n    return bos.toByteArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635111391,"creation_date":1635111391,"answer_id":69700946,"question_id":875467,"body_markdown":"Although this question is more than 12 years old and has a-lot of good answers I want to provide an alternative. Here is a small snippet of loading the keystore and truststore and getting the sslsocketfactory or sslcontext:\r\n\r\n```java\r\nSSLFactory sslFactory = SSLFactory.builder()\r\n        .withIdentityMaterial(&quot;clientcertificate.p12&quot;, &quot;password&quot;.toCharArray(), &quot;PKCS12&quot;)\r\n        .withTrustMaterial(&quot;gridserver.keystore&quot;, &quot;password&quot;.toCharArray(), &quot;PKCS12&quot;)\r\n        .build();\r\n\r\nSSLSocketFactory sslSocketFactory = sslFactory.getSslSocketFactory();\r\nSSLContext sslContext = sslFactory.getSslContext();\r\n```\r\n\r\nThis example code snippet is from the library: [GitHub - SSLContext Kickstart][1] You can add it with the following snippet:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\r\n    &lt;version&gt;7.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n  [1]: https://github.com/Hakky54/sslcontext-kickstart","title":"Java client certificates over HTTPS/SSL","body":"<p>Although this question is more than 12 years old and has a-lot of good answers I want to provide an alternative. Here is a small snippet of loading the keystore and truststore and getting the sslsocketfactory or sslcontext:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SSLFactory sslFactory = SSLFactory.builder()\n        .withIdentityMaterial(&quot;clientcertificate.p12&quot;, &quot;password&quot;.toCharArray(), &quot;PKCS12&quot;)\n        .withTrustMaterial(&quot;gridserver.keystore&quot;, &quot;password&quot;.toCharArray(), &quot;PKCS12&quot;)\n        .build();\n\nSSLSocketFactory sslSocketFactory = sslFactory.getSslSocketFactory();\nSSLContext sslContext = sslFactory.getSslContext();\n</code></pre>\n<p>This example code snippet is from the library: <a href=\"https://github.com/Hakky54/sslcontext-kickstart\" rel=\"nofollow noreferrer\">GitHub - SSLContext Kickstart</a> You can add it with the following snippet:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\n    &lt;version&gt;7.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10960,"reputation":4396,"user_id":20941,"accept_rate":78,"display_name":"Jan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":462742,"favorite_count":0,"down_vote_count":0,"up_vote_count":124,"accepted_answer_id":882479,"answer_count":9,"score":124,"last_activity_date":1679450391,"creation_date":1242593515,"question_id":875467,"body_markdown":"I am using Java 6 and am trying to create an `HttpsURLConnection` against a remote server, using a client certificate.  \r\nThe server is using an selfsigned root certificate, and requires that a password-protected client certificate is presented. I&#39;ve added the server root certificate and the client certificate to a default java keystore which I found in `/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/security/cacerts` (OSX 10.5).\r\nThe name of the keystore file seems to suggest that the client certificate is not supposed to go in there?\r\n\r\nAnyway, adding the root certificate to this store solved the infamous `javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed&#39; problem.`\r\n\r\nHowever, I&#39;m now stuck on how to use the client certificate. I&#39;ve tried two approaches and neither gets me anywhere.   \r\nFirst, and preferred, try:\r\n\r\n    SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n    URL url = new URL(&quot;https://somehost.dk:3049&quot;);\r\n    HttpsURLConnection conn = (HttpsURLConnection)url.openConnection();\r\n    conn.setSSLSocketFactory(sslsocketfactory);\r\n    InputStream inputstream = conn.getInputStream();\r\n    // The last line fails, and gives:\r\n    // javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n\r\nI&#39;ve tried skipping the HttpsURLConnection class (not ideal since I want to talk HTTP with the server), and do this instead:\r\n\r\n    SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n    SSLSocket sslsocket = (SSLSocket) sslsocketfactory.createSocket(&quot;somehost.dk&quot;, 3049);\r\n    InputStream inputstream = sslsocket.getInputStream();\r\n    // do anything with the inputstream results in:\r\n    // java.net.SocketTimeoutException: Read timed out\r\n\r\nI am not even sure that the client certificate is the problem here.\r\n","title":"Java client certificates over HTTPS/SSL","body":"<p>I am using Java 6 and am trying to create an <code>HttpsURLConnection</code> against a remote server, using a client certificate.<br>\nThe server is using an selfsigned root certificate, and requires that a password-protected client certificate is presented. I've added the server root certificate and the client certificate to a default java keystore which I found in <code>/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/security/cacerts</code> (OSX 10.5).\nThe name of the keystore file seems to suggest that the client certificate is not supposed to go in there?</p>\n\n<p>Anyway, adding the root certificate to this store solved the infamous <code>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed' problem.</code></p>\n\n<p>However, I'm now stuck on how to use the client certificate. I've tried two approaches and neither gets me anywhere.<br>\nFirst, and preferred, try:</p>\n\n<pre><code>SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\nURL url = new URL(\"https://somehost.dk:3049\");\nHttpsURLConnection conn = (HttpsURLConnection)url.openConnection();\nconn.setSSLSocketFactory(sslsocketfactory);\nInputStream inputstream = conn.getInputStream();\n// The last line fails, and gives:\n// javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n</code></pre>\n\n<p>I've tried skipping the HttpsURLConnection class (not ideal since I want to talk HTTP with the server), and do this instead:</p>\n\n<pre><code>SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\nSSLSocket sslsocket = (SSLSocket) sslsocketfactory.createSocket(\"somehost.dk\", 3049);\nInputStream inputstream = sslsocket.getInputStream();\n// do anything with the inputstream results in:\n// java.net.SocketTimeoutException: Read timed out\n</code></pre>\n\n<p>I am not even sure that the client certificate is the problem here.</p>\n"},{"tags":["java","android","ssl"],"comments":[{"owner":{"account_id":34066,"reputation":3027,"user_id":95877,"accept_rate":50,"display_name":"Sam97305421562"},"score":0,"creation_date":1245066824,"post_id":995514,"comment_id":804650,"body_markdown":"Can i get some sample implementation of the same","body":"Can i get some sample implementation of the same"},{"owner":{"account_id":50252,"reputation":3108,"user_id":149841,"display_name":"RzR"},"score":0,"creation_date":1260874707,"post_id":995514,"comment_id":21132523,"body_markdown":"may this thread help, but i can not tell if it works will latest API : http://groups.google.com/group/android-developers/browse_thread/thread/1ac2b851e07269ba/c7275f3b28ad8bbc?#c7275f3b28ad8bbc","body":"may this thread help, but i can not tell if it works will latest API : <a href=\"http://groups.google.com/group/android-developers/browse_thread/thread/1ac2b851e07269ba/c7275f3b28ad8bbc?#c7275f3b28ad8bbc\" rel=\"nofollow noreferrer\">groups.google.com/group/android-developers/browse_thread/thr&zwnj;&#8203;ead/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":59451,"reputation":4623,"user_id":177890,"accept_rate":53,"display_name":"Codevalley"},"score":0,"creation_date":1285589898,"post_id":997495,"comment_id":4033029,"body_markdown":"Why is there the FACTORY variable??","body":"Why is there the FACTORY variable??"},{"owner":{"account_id":11029,"reputation":4724,"user_id":21108,"display_name":"Nate"},"score":0,"creation_date":1285607809,"post_id":997495,"comment_id":4036227,"body_markdown":"Clarified in post.  You need FACTORY for the other override methods a SocketFactory needs to create a socket.","body":"Clarified in post.  You need FACTORY for the other override methods a SocketFactory needs to create a socket."},{"owner":{"account_id":59451,"reputation":4623,"user_id":177890,"accept_rate":53,"display_name":"Codevalley"},"score":1,"creation_date":1285659721,"post_id":997495,"comment_id":4042027,"body_markdown":"return FACTORY.createSocket(); is having problem. The created socket is giving null Pointer exception on execute(). Also, I noticed, there are 2 SocketFactory classes. 1. org.apache.http.conn.ssl.SSLSocketFactory and 2. javax.net.ssl.SSLSocketFactory","body":"return FACTORY.createSocket(); is having problem. The created socket is giving null Pointer exception on execute(). Also, I noticed, there are 2 SocketFactory classes. 1. org.apache.http.conn.ssl.SSLSocketFactory and 2. javax.net.ssl.SSLSocketFactory"},{"owner":{"account_id":59451,"reputation":4623,"user_id":177890,"accept_rate":53,"display_name":"Codevalley"},"score":0,"creation_date":1285662657,"post_id":997495,"comment_id":4042406,"body_markdown":"Sorry, I think after little more digging, I found the problem, I have to implement the connectSocket() function, which by default returns null. Any idea on this?","body":"Sorry, I think after little more digging, I found the problem, I have to implement the connectSocket() function, which by default returns null. Any idea on this?"},{"owner":{"account_id":295944,"reputation":1577,"user_id":600615,"accept_rate":100,"display_name":"Cephron"},"score":2,"creation_date":1300472611,"post_id":997495,"comment_id":6050341,"body_markdown":"Hi Nate, this looks like something helpful for my situation. But, I&#39;m having some issues with making the CustomSSLSocketFactory. What class is it supposed to extend? Or what interface is is it supposed to implement? I&#39;ve been experimenting with: javax.net.SocketFactory, javax.net.ssl.SSLSocketFactory, org.apache.http.conn.scheme.SocketFactory, all of which force implementation of other methods... So, in general, what are the namespaces of the classes used in your code? Thank you. :)","body":"Hi Nate, this looks like something helpful for my situation. But, I&#39;m having some issues with making the CustomSSLSocketFactory. What class is it supposed to extend? Or what interface is is it supposed to implement? I&#39;ve been experimenting with: javax.net.SocketFactory, javax.net.ssl.SSLSocketFactory, org.apache.http.conn.scheme.SocketFactory, all of which force implementation of other methods... So, in general, what are the namespaces of the classes used in your code? Thank you. :)"},{"owner":{"account_id":11029,"reputation":4724,"user_id":21108,"display_name":"Nate"},"score":0,"creation_date":1300477252,"post_id":997495,"comment_id":6051487,"body_markdown":"Cephron, CustomSSLSocketFactory implements LayeredSocketFactory and SocketFactory, in the org.apache.http.conn.scheme package.  At the time of this original post, HttpClient in Android was 4.0.x (not 4.1).","body":"Cephron, CustomSSLSocketFactory implements LayeredSocketFactory and SocketFactory, in the org.apache.http.conn.scheme package.  At the time of this original post, HttpClient in Android was 4.0.x (not 4.1)."},{"owner":{"account_id":295944,"reputation":1577,"user_id":600615,"accept_rate":100,"display_name":"Cephron"},"score":0,"creation_date":1300483161,"post_id":997495,"comment_id":6052655,"body_markdown":"Thank you for the clarification! But, in that case, I&#39;m hitting the same wall as Codevalley. What do we put in the connectSocket() function? The FACTORY object doesn&#39;t seem to have anything to perform that function...","body":"Thank you for the clarification! But, in that case, I&#39;m hitting the same wall as Codevalley. What do we put in the connectSocket() function? The FACTORY object doesn&#39;t seem to have anything to perform that function..."},{"owner":{"account_id":299687,"reputation":2045,"user_id":606413,"display_name":"Omar Rehman"},"score":2,"creation_date":1307537849,"post_id":997495,"comment_id":7329214,"body_markdown":"Does not work for me, gives me same Not trusted server certificate error.","body":"Does not work for me, gives me same Not trusted server certificate error."},{"owner":{"account_id":438970,"reputation":22468,"user_id":964741,"accept_rate":87,"display_name":"RajaReddy PolamReddy"},"score":1,"creation_date":1346065166,"post_id":997495,"comment_id":16240601,"body_markdown":"how can i get this class `FullX509TrustManager`","body":"how can i get this class <code>FullX509TrustManager</code>"}],"tags":[],"owner":{"account_id":11029,"reputation":4724,"user_id":21108,"display_name":"Nate"},"comment_count":9,"down_vote_count":3,"up_vote_count":48,"is_accepted":true,"score":45,"last_activity_date":1306414378,"creation_date":1245089279,"answer_id":997495,"question_id":995514,"body_markdown":"I&#39;m making a guess, but if you want an actual handshake to occur, you have to let android know of your certificate.  If you want to just accept no matter what, then use this pseudo-code to get what you need with the Apache HTTP Client:\r\n\r\n\r\n    SchemeRegistry schemeRegistry = new SchemeRegistry ();\r\n    \r\n    schemeRegistry.register (new Scheme (&quot;http&quot;,\r\n        PlainSocketFactory.getSocketFactory (), 80));\r\n    schemeRegistry.register (new Scheme (&quot;https&quot;,\r\n        new CustomSSLSocketFactory (), 443));\r\n    \r\n    ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager (\r\n        params, schemeRegistry);\r\n    \r\n    \r\n    return new DefaultHttpClient (cm, params);\r\n\r\nCustomSSLSocketFactory:\r\n\r\n    public class CustomSSLSocketFactory extends org.apache.http.conn.ssl.SSLSocketFactory\r\n    {\r\n    private SSLSocketFactory FACTORY = HttpsURLConnection.getDefaultSSLSocketFactory ();\r\n    \r\n    public CustomSSLSocketFactory ()\r\n        {\r\n        super(null);\r\n        try\r\n            {\r\n            SSLContext context = SSLContext.getInstance (&quot;TLS&quot;);\r\n            TrustManager[] tm = new TrustManager[] { new FullX509TrustManager () };\r\n            context.init (null, tm, new SecureRandom ());\r\n                \r\n            FACTORY = context.getSocketFactory ();\r\n            }\r\n        catch (Exception e)\r\n            {\r\n            e.printStackTrace();\r\n            }\r\n        }\r\n\r\n    public Socket createSocket() throws IOException\r\n    {\r\n        return FACTORY.createSocket();\r\n    }\r\n\r\n     // TODO: add other methods like createSocket() and getDefaultCipherSuites().\r\n     // Hint: they all just make a call to member FACTORY \r\n    }\r\n\r\n\r\n\r\nFullX509TrustManager is a class that implements javax.net.ssl.X509TrustManager, yet none of the methods actually perform any work, get a sample [here][1].\r\n\r\nGood Luck!\r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d4e537","title":"Https Connection Android","body":"<p>I'm making a guess, but if you want an actual handshake to occur, you have to let android know of your certificate.  If you want to just accept no matter what, then use this pseudo-code to get what you need with the Apache HTTP Client:</p>\n\n<pre><code>SchemeRegistry schemeRegistry = new SchemeRegistry ();\n\nschemeRegistry.register (new Scheme (\"http\",\n    PlainSocketFactory.getSocketFactory (), 80));\nschemeRegistry.register (new Scheme (\"https\",\n    new CustomSSLSocketFactory (), 443));\n\nThreadSafeClientConnManager cm = new ThreadSafeClientConnManager (\n    params, schemeRegistry);\n\n\nreturn new DefaultHttpClient (cm, params);\n</code></pre>\n\n<p>CustomSSLSocketFactory:</p>\n\n<pre><code>public class CustomSSLSocketFactory extends org.apache.http.conn.ssl.SSLSocketFactory\n{\nprivate SSLSocketFactory FACTORY = HttpsURLConnection.getDefaultSSLSocketFactory ();\n\npublic CustomSSLSocketFactory ()\n    {\n    super(null);\n    try\n        {\n        SSLContext context = SSLContext.getInstance (\"TLS\");\n        TrustManager[] tm = new TrustManager[] { new FullX509TrustManager () };\n        context.init (null, tm, new SecureRandom ());\n\n        FACTORY = context.getSocketFactory ();\n        }\n    catch (Exception e)\n        {\n        e.printStackTrace();\n        }\n    }\n\npublic Socket createSocket() throws IOException\n{\n    return FACTORY.createSocket();\n}\n\n // TODO: add other methods like createSocket() and getDefaultCipherSuites().\n // Hint: they all just make a call to member FACTORY \n}\n</code></pre>\n\n<p>FullX509TrustManager is a class that implements javax.net.ssl.X509TrustManager, yet none of the methods actually perform any work, get a sample <a href=\"http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d4e537\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Good Luck!</p>\n"},{"comments":[{"owner":{"account_id":43351,"reputation":5149,"user_id":126660,"accept_rate":51,"display_name":"Joe D&#39;Andrea"},"score":0,"creation_date":1283462033,"post_id":1000205,"comment_id":3815374,"body_markdown":"This looks good! I&#39;m using WebView, however, and only need to connect to a https server for test purposes. (The client can&#39;t provision one with a matching FQDN, nor can they test on http.) Is there any way to tackle this when using WebView? Do I just drop this code in the Activity where the WebView is and &quot;it just works?&quot; (Suspecting not … ??)","body":"This looks good! I&#39;m using WebView, however, and only need to connect to a https server for test purposes. (The client can&#39;t provision one with a matching FQDN, nor can they test on http.) Is there any way to tackle this when using WebView? Do I just drop this code in the Activity where the WebView is and &quot;it just works?&quot; (Suspecting not … ??)"},{"owner":{"account_id":305601,"reputation":1272,"user_id":615855,"accept_rate":63,"display_name":"Robert"},"score":0,"creation_date":1311590369,"post_id":1000205,"comment_id":8094339,"body_markdown":"i&#39;m trying to use that solution step by step and I&#39;m getting such exception: 07-25 12:35:25.941: WARN/System.err(24383): java.lang.ClassCastException: org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl\n in place where I&#39;m trying to open connection... any idea why??","body":"i&#39;m trying to use that solution step by step and I&#39;m getting such exception: 07-25 12:35:25.941: WARN/System.err(24383): java.lang.ClassCastException: org.apache.harmony.luni.internal.net.www.protocol.http.HttpU&zwnj;&#8203;RLConnectionImpl  in place where I&#39;m trying to open connection... any idea why??"},{"owner":{"account_id":284450,"reputation":6183,"user_id":582584,"accept_rate":94,"display_name":"devsri"},"score":1,"creation_date":1329931452,"post_id":1000205,"comment_id":11877216,"body_markdown":"Hey I did as suggested by you but I am getting the exception as `javax.net.ssl.SSLException: Received fatal alert: bad_record_mac` . I have also tried replacing `TLS` with `SSL` but it did not help. Please help me out, Thanks","body":"Hey I did as suggested by you but I am getting the exception as <code>javax.net.ssl.SSLException: Received fatal alert: bad_record_mac</code> . I have also tried replacing <code>TLS</code> with <code>SSL</code> but it did not help. Please help me out, Thanks"},{"owner":{"account_id":57459,"reputation":3987,"user_id":172132,"accept_rate":71,"display_name":"cimnine"},"score":41,"creation_date":1330587857,"post_id":1000205,"comment_id":12047258,"body_markdown":"While this is good during development phase, you should be aware of the fact that this allows anyone to MITM your secure connection by faking a random SSL certificate, which makes your connection not secure anymore. Have a look at [this question](http://www.codeproject.com/KB/android/SSLVerification_Android.aspx?display=Mobile) to see it made the right way, [here](http://www.exampledepot.com/egs/javax.net.ssl/GetCert.html) to see how to receive a certificate, and finally [this](http://www.exampledepot.com/egs/java.security/AddCert.html) to learn how to add it to the keystore.","body":"While this is good during development phase, you should be aware of the fact that this allows anyone to MITM your secure connection by faking a random SSL certificate, which makes your connection not secure anymore. Have a look at <a href=\"http://www.codeproject.com/KB/android/SSLVerification_Android.aspx?display=Mobile\" rel=\"nofollow noreferrer\">this question</a> to see it made the right way, <a href=\"http://www.exampledepot.com/egs/javax.net.ssl/GetCert.html\" rel=\"nofollow noreferrer\">here</a> to see how to receive a certificate, and finally <a href=\"http://www.exampledepot.com/egs/java.security/AddCert.html\" rel=\"nofollow noreferrer\">this</a> to learn how to add it to the keystore."},{"owner":{"display_name":"anon"},"score":0,"creation_date":1336057415,"post_id":1000205,"comment_id":13467456,"body_markdown":"The above is just setup code, for the normal request. You can see an example at https://github.com/uscheller/EasyHttpClient/blob/master/src/EasyHttpClient.java#L194","body":"The above is just setup code, for the normal request. You can see an example at <a href=\"https://github.com/uscheller/EasyHttpClient/blob/master/src/EasyHttpClient.java#L194\" rel=\"nofollow noreferrer\">github.com/uscheller/EasyHttpClient/blob/master/src/&hellip;</a>"},{"owner":{"display_name":"anon"},"score":0,"creation_date":1336490199,"post_id":1000205,"comment_id":13575468,"body_markdown":"Since it is published unter the Apache License, you are free to use it anywhere.","body":"Since it is published unter the Apache License, you are free to use it anywhere."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1457748898,"post_id":1000205,"comment_id":59562063,"body_markdown":"You should not use recommend or post this code. It is radically insecure. You should solve the actual problem.","body":"You should not use recommend or post this code. It is radically insecure. You should solve the actual problem."}],"tags":[],"owner":{"display_name":"anon"},"comment_count":7,"down_vote_count":10,"up_vote_count":104,"is_accepted":false,"score":94,"last_activity_date":1679450187,"creation_date":1245141284,"answer_id":1000205,"question_id":995514,"body_markdown":"I copied the following code that came from [The Java Developers Almanac](https://web.archive.org/web/20061217061841/http://www.exampledepot.com/egs/javax.net.ssl/TrustAll.html).\r\n\r\n It simply doesn&#39;t check the certificate anymore.\r\n\r\n&gt;```\r\n&gt; // always verify the host - dont check for certificate final static\r\n&gt; HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() { \tpublic\r\n&gt; boolean verify(String hostname, SSLSession session) { \t\treturn true;\r\n&gt; \t} };\r\n&gt; \r\n&gt; /**  * Trust every server - dont check for any certificate  */ private\r\n&gt; static void trustAllHosts() { \t// Create a trust manager that does not\r\n&gt; validate certificate chains \tTrustManager[] trustAllCerts = new\r\n&gt; TrustManager[] { new X509TrustManager() { \t\tpublic\r\n&gt; java.security.cert.X509Certificate[] getAcceptedIssuers() { \t\t\treturn\r\n&gt; new java.security.cert.X509Certificate[] {}; \t\t}\r\n&gt; \r\n&gt; \t\tpublic void checkClientTrusted(X509Certificate[] chain,\r\n&gt; \t\t\t\tString authType) throws CertificateException { \t\t}\r\n&gt; \r\n&gt; \t\tpublic void checkServerTrusted(X509Certificate[] chain,\r\n&gt; \t\t\t\tString authType) throws CertificateException { \t\t} \t} };\r\n&gt; \r\n&gt; \t// Install the all-trusting trust manager \ttry { \t\tSSLContext sc =\r\n&gt; SSLContext.getInstance(&quot;TLS&quot;); \t\tsc.init(null, trustAllCerts, new\r\n&gt; java.security.SecureRandom()); \t\tHttpsURLConnection\r\n&gt; \t\t\t\t.setDefaultSSLSocketFactory(sc.getSocketFactory()); \t} catch (Exception e) { \t\te.printStackTrace(); \t} }\r\n&gt;```\r\n\r\n\r\nand\r\n\r\n\r\n&gt;```\r\n&gt; HttpURLConnection http = null;\r\n&gt; \r\n&gt; if (url.getProtocol().toLowerCase().equals(&quot;https&quot;)) {\r\n&gt;     trustAllHosts(); \tHttpsURLConnection https = (HttpsURLConnection) url.openConnection(); \thttps.setHostnameVerifier(DO_NOT_VERIFY); \thttp\r\n&gt; = https; } else { \thttp = (HttpURLConnection) url.openConnection(); }\r\n&gt; ```\r\n\r\n","title":"Https Connection Android","body":"<p>I copied the following code that came from <a href=\"https://web.archive.org/web/20061217061841/http://www.exampledepot.com/egs/javax.net.ssl/TrustAll.html\" rel=\"nofollow noreferrer\">The Java Developers Almanac</a>.</p>\n<p>It simply doesn't check the certificate anymore.</p>\n<blockquote>\n<pre><code>// always verify the host - dont check for certificate final static\nHostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() {     public\nboolean verify(String hostname, SSLSession session) {         return true;\n  } };\n\n/**  * Trust every server - dont check for any certificate  */ private\nstatic void trustAllHosts() {     // Create a trust manager that does not\nvalidate certificate chains   TrustManager[] trustAllCerts = new\nTrustManager[] { new X509TrustManager() {         public\njava.security.cert.X509Certificate[] getAcceptedIssuers() {           return\nnew java.security.cert.X509Certificate[] {};      }\n\n      public void checkClientTrusted(X509Certificate[] chain,\n              String authType) throws CertificateException {      }\n\n      public void checkServerTrusted(X509Certificate[] chain,\n              String authType) throws CertificateException {      }   } };\n\n  // Install the all-trusting trust manager   try {       SSLContext sc =\nSSLContext.getInstance(&quot;TLS&quot;);        sc.init(null, trustAllCerts, new\njava.security.SecureRandom());        HttpsURLConnection\n              .setDefaultSSLSocketFactory(sc.getSocketFactory());     } catch (Exception e) {         e.printStackTrace();    } }\n</code></pre>\n</blockquote>\n<p>and</p>\n<blockquote>\n<pre><code>HttpURLConnection http = null;\n\nif (url.getProtocol().toLowerCase().equals(&quot;https&quot;)) {\n    trustAllHosts();  HttpsURLConnection https = (HttpsURLConnection) url.openConnection();   https.setHostnameVerifier(DO_NOT_VERIFY);   http\n= https; } else {     http = (HttpURLConnection) url.openConnection(); }\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":399221,"reputation":59,"user_id":764418,"accept_rate":100,"display_name":"alumat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1333275403,"creation_date":1333275403,"answer_id":9963609,"question_id":995514,"body_markdown":"This is a known problem with Android 2.x. I was struggling with this problem for a week until I came across the following question, which not only gives a good background of the problem but also provides a working and effective solution devoid of any security holes.\r\n\r\nhttps://stackoverflow.com/questions/9574870/no-peer-certificate-error-in-android-2-3-but-not-in-4","title":"Https Connection Android","body":"<p>This is a known problem with Android 2.x. I was struggling with this problem for a week until I came across the following question, which not only gives a good background of the problem but also provides a working and effective solution devoid of any security holes.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9574870/no-peer-certificate-error-in-android-2-3-but-not-in-4\">&#39;No peer certificate&#39; error in Android 2.3 but NOT in 4</a></p>\n"},{"tags":[],"owner":{"account_id":1625216,"reputation":326,"user_id":1500907,"display_name":"Syed Ghulam Akbar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1343024380,"creation_date":1343024380,"answer_id":11607328,"question_id":995514,"body_markdown":"For some reason the solution mentioned for httpClient above didn&#39;t worked for me. At the end I was able to make it work by correctly overriding the method when implementing the custom SSLSocketFactory class.\r\n\r\n    @Override\r\n    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) \r\n                                  throws IOException, UnknownHostException \r\n        {\r\n\t    return sslFactory.createSocket(socket, host, port, autoClose);\r\n\t}\r\n \r\n\t@Override\r\n\tpublic Socket createSocket() throws IOException {\r\n\t    return sslFactory.createSocket();\r\n\t}\r\n\r\nThis is how it worked perfectly for me. You can see the full custom class and implementing on the following thread:\r\nhttp://blog.syedgakbar.com/2012/07/21/android-https-and-not-trusted-server-certificate-error/","title":"Https Connection Android","body":"<p>For some reason the solution mentioned for httpClient above didn't worked for me. At the end I was able to make it work by correctly overriding the method when implementing the custom SSLSocketFactory class.</p>\n\n<pre><code>@Override\npublic Socket createSocket(Socket socket, String host, int port, boolean autoClose) \n                              throws IOException, UnknownHostException \n    {\n    return sslFactory.createSocket(socket, host, port, autoClose);\n}\n\n@Override\npublic Socket createSocket() throws IOException {\n    return sslFactory.createSocket();\n}\n</code></pre>\n\n<p>This is how it worked perfectly for me. You can see the full custom class and implementing on the following thread:\n<a href=\"http://blog.syedgakbar.com/2012/07/21/android-https-and-not-trusted-server-certificate-error/\" rel=\"nofollow\">http://blog.syedgakbar.com/2012/07/21/android-https-and-not-trusted-server-certificate-error/</a></p>\n"},{"comments":[{"owner":{"account_id":467585,"reputation":789,"user_id":873063,"accept_rate":69,"display_name":"Speise"},"score":0,"creation_date":1349426700,"post_id":12742591,"comment_id":17213433,"body_markdown":"This code works fine with URL pattern - https://localhost:8443/webProject/YourService","body":"This code works fine with URL pattern - <a href=\"https://localhost:8443/webProject/YourService\" rel=\"nofollow noreferrer\">localhost:8443/webProject/YourService</a>"},{"owner":{"account_id":2111830,"reputation":2081,"user_id":2463173,"accept_rate":0,"display_name":"Michal"},"score":0,"creation_date":1383829105,"post_id":12742591,"comment_id":29497183,"body_markdown":"The constructor SSLSocketFactory(null, null, null, null, null, X509HostnameVerifier) is undefined","body":"The constructor SSLSocketFactory(null, null, null, null, null, X509HostnameVerifier) is undefined"}],"tags":[],"owner":{"account_id":467585,"reputation":789,"user_id":873063,"accept_rate":69,"display_name":"Speise"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1349426487,"creation_date":1349426487,"answer_id":12742591,"question_id":995514,"body_markdown":"Any of this answers didn&#39;t work for me so here is code which trust any certificates.\r\n\r\n    import java.io.IOException;\r\n    \r\n    \timport java.net.Socket;\r\n    \timport java.security.KeyManagementException;\r\n    \timport java.security.KeyStoreException;\r\n    \timport java.security.NoSuchAlgorithmException;\r\n    \timport java.security.UnrecoverableKeyException;\r\n    \timport java.security.cert.CertificateException;\r\n    \timport java.security.cert.X509Certificate;\r\n    \r\n    \timport javax.net.ssl.SSLContext;\r\n    \timport javax.net.ssl.TrustManager;\r\n    \timport javax.net.ssl.X509TrustManager;\r\n    \r\n    \timport org.apache.http.client.ClientProtocolException;\r\n    \timport org.apache.http.client.HttpClient;\r\n    \timport org.apache.http.client.methods.HttpPost;\r\n    \timport org.apache.http.conn.scheme.PlainSocketFactory;\r\n    \timport org.apache.http.conn.scheme.Scheme;\r\n    \timport org.apache.http.conn.scheme.SchemeRegistry;\r\n    \timport org.apache.http.conn.ssl.SSLSocketFactory;\r\n    \timport org.apache.http.conn.ssl.X509HostnameVerifier;\r\n    \timport org.apache.http.impl.client.DefaultHttpClient;\r\n    \timport org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;\r\n    \timport org.apache.http.params.BasicHttpParams;\r\n    import org.apache.http.params.HttpConnectionParams;\r\n    import org.apache.http.params.HttpParams;\r\n    \r\n    \tpublic class HttpsClientBuilder {\r\n    \t\tpublic static DefaultHttpClient getBelieverHttpsClient() {\r\n    \t\t\t\t\r\n    \t\t\tDefaultHttpClient client = null;\r\n    \t \r\n    \t\t\tSchemeRegistry Current_Scheme = new SchemeRegistry();\r\n    \t\t\tCurrent_Scheme.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n    \t\t\ttry {\r\n    \t\t\t\tCurrent_Scheme.register(new Scheme(&quot;https&quot;, new Naive_SSLSocketFactory(), 8443));\r\n    \t\t\t} catch (KeyManagementException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t} catch (UnrecoverableKeyException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t} catch (NoSuchAlgorithmException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t} catch (KeyStoreException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t\tHttpParams Current_Params = new BasicHttpParams();\r\n    \t\t\tint timeoutConnection = 8000;\r\n    \t\t\tHttpConnectionParams.setConnectionTimeout(Current_Params, timeoutConnection);\r\n    \t\t\tint timeoutSocket = 10000;\r\n    \t\t\tHttpConnectionParams.setSoTimeout(Current_Params, timeoutSocket);\r\n    \t\t\tThreadSafeClientConnManager Current_Manager = new ThreadSafeClientConnManager(Current_Params, Current_Scheme);\r\n    \t\t\tclient = new DefaultHttpClient(Current_Manager, Current_Params);\r\n    \t\t\t//HttpPost httpPost = new HttpPost(url);\r\n    \t\t\t//client.execute(httpPost);\r\n    \r\n    \t\t return client;\r\n    \t\t }\r\n    \r\n    \tpublic static class Naive_SSLSocketFactory extends SSLSocketFactory\r\n    \t{\r\n    \t\tprotected SSLContext Cur_SSL_Context = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \r\n    \t\tpublic Naive_SSLSocketFactory ()\r\n    \t\t        throws NoSuchAlgorithmException, KeyManagementException,\r\n    \t\t        KeyStoreException, UnrecoverableKeyException\r\n    \t\t{\r\n    \t\t\tsuper(null, null, null, null, null, (X509HostnameVerifier)null);\r\n    \t\t\tCur_SSL_Context.init(null, new TrustManager[] { new X509_Trust_Manager() }, null);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic Socket createSocket(Socket socket, String host, int port,\r\n    \t\t        boolean autoClose) throws IOException\r\n    \t\t{\r\n    \t\t\treturn Cur_SSL_Context.getSocketFactory().createSocket(socket, host, port, autoClose);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic Socket createSocket() throws IOException\r\n    \t\t{\r\n    \t\t\treturn Cur_SSL_Context.getSocketFactory().createSocket();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static class X509_Trust_Manager implements X509TrustManager\r\n    \t{\r\n    \r\n    \t\tpublic void checkClientTrusted(X509Certificate[] chain, String authType)\r\n    \t\t\t\tthrows CertificateException {\r\n    \t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\tpublic void checkServerTrusted(X509Certificate[] chain, String authType)\r\n    \t\t\t\tthrows CertificateException {\r\n    \t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\tpublic X509Certificate[] getAcceptedIssuers() {\r\n    \t\t\t// TODO Auto-generated method stub\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \r\n    \t};\r\n    }","title":"Https Connection Android","body":"<p>Any of this answers didn't work for me so here is code which trust any certificates.</p>\n\n<pre><code>import java.io.IOException;\n\n    import java.net.Socket;\n    import java.security.KeyManagementException;\n    import java.security.KeyStoreException;\n    import java.security.NoSuchAlgorithmException;\n    import java.security.UnrecoverableKeyException;\n    import java.security.cert.CertificateException;\n    import java.security.cert.X509Certificate;\n\n    import javax.net.ssl.SSLContext;\n    import javax.net.ssl.TrustManager;\n    import javax.net.ssl.X509TrustManager;\n\n    import org.apache.http.client.ClientProtocolException;\n    import org.apache.http.client.HttpClient;\n    import org.apache.http.client.methods.HttpPost;\n    import org.apache.http.conn.scheme.PlainSocketFactory;\n    import org.apache.http.conn.scheme.Scheme;\n    import org.apache.http.conn.scheme.SchemeRegistry;\n    import org.apache.http.conn.ssl.SSLSocketFactory;\n    import org.apache.http.conn.ssl.X509HostnameVerifier;\n    import org.apache.http.impl.client.DefaultHttpClient;\n    import org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;\n    import org.apache.http.params.BasicHttpParams;\nimport org.apache.http.params.HttpConnectionParams;\nimport org.apache.http.params.HttpParams;\n\n    public class HttpsClientBuilder {\n        public static DefaultHttpClient getBelieverHttpsClient() {\n\n            DefaultHttpClient client = null;\n\n            SchemeRegistry Current_Scheme = new SchemeRegistry();\n            Current_Scheme.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\n            try {\n                Current_Scheme.register(new Scheme(\"https\", new Naive_SSLSocketFactory(), 8443));\n            } catch (KeyManagementException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            } catch (UnrecoverableKeyException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            } catch (NoSuchAlgorithmException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            } catch (KeyStoreException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            HttpParams Current_Params = new BasicHttpParams();\n            int timeoutConnection = 8000;\n            HttpConnectionParams.setConnectionTimeout(Current_Params, timeoutConnection);\n            int timeoutSocket = 10000;\n            HttpConnectionParams.setSoTimeout(Current_Params, timeoutSocket);\n            ThreadSafeClientConnManager Current_Manager = new ThreadSafeClientConnManager(Current_Params, Current_Scheme);\n            client = new DefaultHttpClient(Current_Manager, Current_Params);\n            //HttpPost httpPost = new HttpPost(url);\n            //client.execute(httpPost);\n\n         return client;\n         }\n\n    public static class Naive_SSLSocketFactory extends SSLSocketFactory\n    {\n        protected SSLContext Cur_SSL_Context = SSLContext.getInstance(\"TLS\");\n\n        public Naive_SSLSocketFactory ()\n                throws NoSuchAlgorithmException, KeyManagementException,\n                KeyStoreException, UnrecoverableKeyException\n        {\n            super(null, null, null, null, null, (X509HostnameVerifier)null);\n            Cur_SSL_Context.init(null, new TrustManager[] { new X509_Trust_Manager() }, null);\n        }\n\n        @Override\n        public Socket createSocket(Socket socket, String host, int port,\n                boolean autoClose) throws IOException\n        {\n            return Cur_SSL_Context.getSocketFactory().createSocket(socket, host, port, autoClose);\n        }\n\n        @Override\n        public Socket createSocket() throws IOException\n        {\n            return Cur_SSL_Context.getSocketFactory().createSocket();\n        }\n    }\n\n    private static class X509_Trust_Manager implements X509TrustManager\n    {\n\n        public void checkClientTrusted(X509Certificate[] chain, String authType)\n                throws CertificateException {\n            // TODO Auto-generated method stub\n\n        }\n\n        public void checkServerTrusted(X509Certificate[] chain, String authType)\n                throws CertificateException {\n            // TODO Auto-generated method stub\n\n        }\n\n        public X509Certificate[] getAcceptedIssuers() {\n            // TODO Auto-generated method stub\n            return null;\n        }\n\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3285257,"reputation":990,"user_id":2764926,"display_name":"Juan S&#225;nchez"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1379605458,"creation_date":1379605458,"answer_id":18899259,"question_id":995514,"body_markdown":"If you are using a StartSSL or Thawte certificate, it will fail for Froyo and older versions. You can use a [newer version&#39;s CAcert repository](http://notwithoutmycode.com/post/trusting/startssl/or/thawte/certificates/in/older/android/versions/from/code) instead of trusting every certificate.\r\n\r\n","title":"Https Connection Android","body":"<p>If you are using a StartSSL or Thawte certificate, it will fail for Froyo and older versions. You can use a <a href=\"http://notwithoutmycode.com/post/trusting/startssl/or/thawte/certificates/in/older/android/versions/from/code\" rel=\"nofollow\">newer version's CAcert repository</a> instead of trusting every certificate.</p>\n"},{"tags":[],"owner":{"account_id":1467715,"reputation":59,"user_id":1380112,"display_name":"Erick Guardado"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390258816,"creation_date":1390258816,"answer_id":21245900,"question_id":995514,"body_markdown":"I make this class and found\r\n\r\n    package com.example.fakessl;\r\n    \r\n    import java.security.KeyManagementException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.SSLSession;\r\n    import javax.net.ssl.TrustManager;\r\n    \r\n    import android.util.Log;\r\n    \r\n    public class CertificadoAceptar {\r\n    \tprivate static TrustManager[] trustManagers;\r\n    \r\n    \tpublic static class _FakeX509TrustManager implements\r\n    \t\t\tjavax.net.ssl.X509TrustManager {\r\n    \t\tprivate static final X509Certificate[] _AcceptedIssuers = new X509Certificate[] {};\r\n    \r\n    \t\tpublic void checkClientTrusted(X509Certificate[] arg0, String arg1)\r\n    \t\t\t\tthrows CertificateException {\r\n    \t\t}\r\n    \r\n    \t\tpublic void checkServerTrusted(X509Certificate[] arg0, String arg1)\r\n    \t\t\t\tthrows CertificateException {\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isClientTrusted(X509Certificate[] chain) {\r\n    \t\t\treturn (true);\r\n    \t\t}\r\n    \r\n    \t\tpublic boolean isServerTrusted(X509Certificate[] chain) {\r\n    \t\t\treturn (true);\r\n    \t\t}\r\n    \r\n    \t\tpublic X509Certificate[] getAcceptedIssuers() {\r\n    \t\t\treturn (_AcceptedIssuers);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void allowAllSSL() {\r\n    \r\n    \t\tjavax.net.ssl.HttpsURLConnection\r\n    \t\t\t\t.setDefaultHostnameVerifier(new HostnameVerifier() {\r\n    \t\t\t\t\tpublic boolean verify(String hostname, SSLSession session) {\r\n    \t\t\t\t\t\treturn true;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \r\n    \t\tjavax.net.ssl.SSLContext context = null;\r\n    \r\n    \t\tif (trustManagers == null) {\r\n    \t\t\ttrustManagers = new javax.net.ssl.TrustManager[] { new _FakeX509TrustManager() };\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tcontext = javax.net.ssl.SSLContext.getInstance(&quot;TLS&quot;);\r\n    \t\t\tcontext.init(null, trustManagers, new SecureRandom());\r\n    \t\t} catch (NoSuchAlgorithmException e) {\r\n    \t\t\tLog.e(&quot;allowAllSSL&quot;, e.toString());\r\n    \t\t} catch (KeyManagementException e) {\r\n    \t\t\tLog.e(&quot;allowAllSSL&quot;, e.toString());\r\n    \t\t}\r\n    \t\tjavax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(context\r\n    \t\t\t\t.getSocketFactory());\r\n    \t}\r\n    }\r\n\r\nin you code white this\r\n\r\n    CertificadoAceptar ca = new CertificadoAceptar();\r\n    ca.allowAllSSL();\r\n    HttpsTransportSE Transport = new HttpsTransportSE(&quot;iphost or host name&quot;, 8080, &quot;/WS/wsexample.asmx?WSDL&quot;, 30000);","title":"Https Connection Android","body":"<p>I make this class and found</p>\n\n<pre><code>package com.example.fakessl;\n\nimport java.security.KeyManagementException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.SSLSession;\nimport javax.net.ssl.TrustManager;\n\nimport android.util.Log;\n\npublic class CertificadoAceptar {\n    private static TrustManager[] trustManagers;\n\n    public static class _FakeX509TrustManager implements\n            javax.net.ssl.X509TrustManager {\n        private static final X509Certificate[] _AcceptedIssuers = new X509Certificate[] {};\n\n        public void checkClientTrusted(X509Certificate[] arg0, String arg1)\n                throws CertificateException {\n        }\n\n        public void checkServerTrusted(X509Certificate[] arg0, String arg1)\n                throws CertificateException {\n        }\n\n        public boolean isClientTrusted(X509Certificate[] chain) {\n            return (true);\n        }\n\n        public boolean isServerTrusted(X509Certificate[] chain) {\n            return (true);\n        }\n\n        public X509Certificate[] getAcceptedIssuers() {\n            return (_AcceptedIssuers);\n        }\n    }\n\n    public static void allowAllSSL() {\n\n        javax.net.ssl.HttpsURLConnection\n                .setDefaultHostnameVerifier(new HostnameVerifier() {\n                    public boolean verify(String hostname, SSLSession session) {\n                        return true;\n                    }\n                });\n\n        javax.net.ssl.SSLContext context = null;\n\n        if (trustManagers == null) {\n            trustManagers = new javax.net.ssl.TrustManager[] { new _FakeX509TrustManager() };\n        }\n\n        try {\n            context = javax.net.ssl.SSLContext.getInstance(\"TLS\");\n            context.init(null, trustManagers, new SecureRandom());\n        } catch (NoSuchAlgorithmException e) {\n            Log.e(\"allowAllSSL\", e.toString());\n        } catch (KeyManagementException e) {\n            Log.e(\"allowAllSSL\", e.toString());\n        }\n        javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(context\n                .getSocketFactory());\n    }\n}\n</code></pre>\n\n<p>in you code white this</p>\n\n<pre><code>CertificadoAceptar ca = new CertificadoAceptar();\nca.allowAllSSL();\nHttpsTransportSE Transport = new HttpsTransportSE(\"iphost or host name\", 8080, \"/WS/wsexample.asmx?WSDL\", 30000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":272573,"reputation":10312,"user_id":563735,"accept_rate":71,"display_name":"Rohit Mandiwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1421749609,"creation_date":1401793691,"answer_id":24013606,"question_id":995514,"body_markdown":"http://madurangasblogs.blogspot.in/2013/08/avoiding-javaxnetsslsslpeerunverifiedex.html\r\n\r\nCourtesy Maduranga \r\n\r\nWhen developing an application that uses https, your test server doesn&#39;t have a valid SSL certificate. Or sometimes the web site is using a self-signed certificate or the web site is using free SSL certificate. So if you try to connect to the server using Apache `HttpClient`, you will get a exception telling that the &quot;peer not authenticated&quot;. Though it is not a good practice to trust all the certificates in a production software, you may have to do so according to the situation.\r\nThis solution resolves the exception caused by &quot;peer not authenticated&quot;.\r\n\r\nBut before we go to the solution, I must warn you that this is not a good idea for a production application. This will violate the purpose of using a security certificate. So unless you have a good reason or if you are sure that this will not cause any problem, don&#39;t use this solution.\r\n\r\nNormally you create a `HttpClient` like this.\r\n\r\n`HttpClient httpclient = new DefaultHttpClient();`\r\n\r\nBut you have to change the way you create the HttpClient.\r\n\r\nFirst you have to create a class extending `org.apache.http.conn.ssl.SSLSocketFactory`.\r\n\r\n    import org.apache.http.conn.ssl.SSLSocketFactory;\r\n    import java.io.IOException;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStore;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.UnrecoverableKeyException;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    \r\n    public class MySSLSocketFactory extends SSLSocketFactory {\r\n             SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \r\n        public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\r\n            super(truststore);\r\n    \r\n            TrustManager tm = new X509TrustManager() {\r\n                public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n                }\r\n    \r\n                public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n                }\r\n    \r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return null;\r\n                }\r\n            };\r\n    \r\n            sslContext.init(null, new TrustManager[] { tm }, null);\r\n        }\r\n    \r\n        @Override\r\n        public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {\r\n            return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\r\n        }\r\n    \r\n        @Override\r\n        public Socket createSocket() throws IOException {\r\n            return sslContext.getSocketFactory().createSocket();\r\n        }\r\n    }\r\n\r\n\r\nThen create a method like this.\r\n\r\n    public HttpClient getNewHttpClient() {\r\n         try {\r\n             KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n             trustStore.load(null, null);\r\n    \r\n             SSLSocketFactory sf = new MySSLSocketFactory(trustStore);\r\n             sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n    \r\n             HttpParams params = new BasicHttpParams();\r\n             HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\r\n             HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\r\n    \r\n             SchemeRegistry registry = new SchemeRegistry();\r\n             registry.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n             registry.register(new Scheme(&quot;https&quot;, sf, 443));\r\n    \r\n             ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\r\n    \r\n             return new DefaultHttpClient(ccm, params);\r\n         } catch (Exception e) {\r\n             return new DefaultHttpClient();\r\n         }\r\n    }\r\n\r\nThen you can create the `HttpClient`.\r\n\r\n`HttpClient httpclient = getNewHttpClient();`\r\n\r\nIf you are trying to send a post request to a login page the rest of the code would be like this.\r\n\r\n    private URI url = new URI(&quot;url of the action of the form&quot;);\r\n    HttpPost httppost =  new HttpPost(url);\r\n    List&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;();  \r\n    nameValuePairs.add(new BasicNameValuePair(&quot;username&quot;, &quot;user&quot;));  \r\n    nameValuePairs.add(new BasicNameValuePair(&quot;password&quot;, &quot;password&quot;));\r\n    try {\r\n        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));\r\n        HttpResponse response = httpclient.execute(httppost);\r\n        HttpEntity entity = response.getEntity();\r\n        InputStream is = entity.getContent();\r\n    } catch (UnsupportedEncodingException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    } catch (ClientProtocolException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    } catch (IOException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    }\r\n\r\nYou get the html page to the InputStream. Then you can do whatever you want with the returned html page.\r\n\r\nBut here you will face a problem. If you want to manage a session using cookies, you will not be able to do it with this method. If you want to get the cookies, you will have to do it via a browser. Then only you will receive cookies.\r\n","title":"Https Connection Android","body":"<p><a href=\"http://madurangasblogs.blogspot.in/2013/08/avoiding-javaxnetsslsslpeerunverifiedex.html\" rel=\"nofollow\">http://madurangasblogs.blogspot.in/2013/08/avoiding-javaxnetsslsslpeerunverifiedex.html</a></p>\n\n<p>Courtesy Maduranga </p>\n\n<p>When developing an application that uses https, your test server doesn't have a valid SSL certificate. Or sometimes the web site is using a self-signed certificate or the web site is using free SSL certificate. So if you try to connect to the server using Apache <code>HttpClient</code>, you will get a exception telling that the \"peer not authenticated\". Though it is not a good practice to trust all the certificates in a production software, you may have to do so according to the situation.\nThis solution resolves the exception caused by \"peer not authenticated\".</p>\n\n<p>But before we go to the solution, I must warn you that this is not a good idea for a production application. This will violate the purpose of using a security certificate. So unless you have a good reason or if you are sure that this will not cause any problem, don't use this solution.</p>\n\n<p>Normally you create a <code>HttpClient</code> like this.</p>\n\n<p><code>HttpClient httpclient = new DefaultHttpClient();</code></p>\n\n<p>But you have to change the way you create the HttpClient.</p>\n\n<p>First you have to create a class extending <code>org.apache.http.conn.ssl.SSLSocketFactory</code>.</p>\n\n<pre><code>import org.apache.http.conn.ssl.SSLSocketFactory;\nimport java.io.IOException;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.security.KeyManagementException;\nimport java.security.KeyStore;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.UnrecoverableKeyException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\npublic class MySSLSocketFactory extends SSLSocketFactory {\n         SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n\n    public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\n        super(truststore);\n\n        TrustManager tm = new X509TrustManager() {\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            }\n\n            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            }\n\n            public X509Certificate[] getAcceptedIssuers() {\n                return null;\n            }\n        };\n\n        sslContext.init(null, new TrustManager[] { tm }, null);\n    }\n\n    @Override\n    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {\n        return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);\n    }\n\n    @Override\n    public Socket createSocket() throws IOException {\n        return sslContext.getSocketFactory().createSocket();\n    }\n}\n</code></pre>\n\n<p>Then create a method like this.</p>\n\n<pre><code>public HttpClient getNewHttpClient() {\n     try {\n         KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\n         trustStore.load(null, null);\n\n         SSLSocketFactory sf = new MySSLSocketFactory(trustStore);\n         sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n         HttpParams params = new BasicHttpParams();\n         HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\n         HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\n\n         SchemeRegistry registry = new SchemeRegistry();\n         registry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\n         registry.register(new Scheme(\"https\", sf, 443));\n\n         ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\n\n         return new DefaultHttpClient(ccm, params);\n     } catch (Exception e) {\n         return new DefaultHttpClient();\n     }\n}\n</code></pre>\n\n<p>Then you can create the <code>HttpClient</code>.</p>\n\n<p><code>HttpClient httpclient = getNewHttpClient();</code></p>\n\n<p>If you are trying to send a post request to a login page the rest of the code would be like this.</p>\n\n<pre><code>private URI url = new URI(\"url of the action of the form\");\nHttpPost httppost =  new HttpPost(url);\nList&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;();  \nnameValuePairs.add(new BasicNameValuePair(\"username\", \"user\"));  \nnameValuePairs.add(new BasicNameValuePair(\"password\", \"password\"));\ntry {\n    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));\n    HttpResponse response = httpclient.execute(httppost);\n    HttpEntity entity = response.getEntity();\n    InputStream is = entity.getContent();\n} catch (UnsupportedEncodingException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n} catch (ClientProtocolException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n} catch (IOException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>You get the html page to the InputStream. Then you can do whatever you want with the returned html page.</p>\n\n<p>But here you will face a problem. If you want to manage a session using cookies, you will not be able to do it with this method. If you want to get the cookies, you will have to do it via a browser. Then only you will receive cookies.</p>\n"},{"tags":[],"owner":{"account_id":3908579,"reputation":278,"user_id":3234549,"display_name":"SerCna"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1408599388,"creation_date":1408599388,"answer_id":25418908,"question_id":995514,"body_markdown":"Just use this method as your HTTPClient:\r\n\r\n    public static  HttpClient getNewHttpClient() {\r\n\t    try {\r\n\t        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n\t        trustStore.load(null, null);\r\n\r\n\t        SSLSocketFactory sf = new MySSLSocketFactory(trustStore);\r\n\t        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n\t        HttpParams params = new BasicHttpParams();\r\n\t        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\r\n\t        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\r\n\r\n\t        SchemeRegistry registry = new SchemeRegistry();\r\n\t        registry.register(new Scheme(&quot;http&quot;, PlainSocketFactory.getSocketFactory(), 80));\r\n\t        registry.register(new Scheme(&quot;https&quot;, sf, 443));\r\n\r\n\t        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\r\n\r\n\t        return new DefaultHttpClient(ccm, params);\r\n\t    } catch (Exception e) {\r\n\t        return new DefaultHttpClient();\r\n\t    }\r\n\t}","title":"Https Connection Android","body":"<p>Just use this method as your HTTPClient:</p>\n\n<pre><code>public static  HttpClient getNewHttpClient() {\n    try {\n        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\n        trustStore.load(null, null);\n\n        SSLSocketFactory sf = new MySSLSocketFactory(trustStore);\n        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n        HttpParams params = new BasicHttpParams();\n        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\n        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\n\n        SchemeRegistry registry = new SchemeRegistry();\n        registry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), 80));\n        registry.register(new Scheme(\"https\", sf, 443));\n\n        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);\n\n        return new DefaultHttpClient(ccm, params);\n    } catch (Exception e) {\n        return new DefaultHttpClient();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1433556,"reputation":5425,"user_id":1355410,"accept_rate":14,"display_name":"MikeL"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476541666,"creation_date":1476541666,"answer_id":40060229,"question_id":995514,"body_markdown":"Sources that helped me get to work with my self signed certificate on my AWS Apache server and connect with HttpsURLConnection from android device:&lt;br/&gt;&lt;br/&gt;\r\n[SSL on aws instance][1] - amazon tutorial on ssl&lt;br/&gt;\r\n[Android Security with HTTPS and SSL][2] - creating your own trust manager on client for accepting your certificate&lt;br/&gt;\r\n[Creating self signed certificate][3] - easy script for creating your certificates\r\n\r\nThen I did the following:\r\n\r\n1. Made sure the server supports https (sudo yum install -y mod24_ssl)\r\n2. Put this script in a file `create_my_certs.sh`:\r\n\r\n&gt;     #!/bin/bash\r\n&gt;     FQDN=$1\r\n&gt;     \r\n&gt;     # make directories to work from\r\n&gt;     mkdir -p server/ client/ all/\r\n&gt;     \r\n&gt;     # Create your very own Root Certificate Authority\r\n&gt;     openssl genrsa \\\r\n&gt;       -out all/my-private-root-ca.privkey.pem \\\r\n&gt;       2048\r\n&gt;     \r\n&gt;     # Self-sign your Root Certificate Authority\r\n&gt;     # Since this is private, the details can be as bogus as you like\r\n&gt;     openssl req \\\r\n&gt;       -x509 \\\r\n&gt;       -new \\\r\n&gt;       -nodes \\\r\n&gt;       -key all/my-private-root-ca.privkey.pem \\\r\n&gt;       -days 1024 \\\r\n&gt;       -out all/my-private-root-ca.cert.pem \\\r\n&gt;       -subj &quot;/C=US/ST=Utah/L=Provo/O=ACME Signing Authority Inc/CN=example.com&quot;\r\n&gt;     \r\n&gt;     # Create a Device Certificate for each domain,\r\n&gt;     # such as example.com, *.example.com, awesome.example.com\r\n&gt;     # NOTE: You MUST match CN to the domain name or ip address you want to use\r\n&gt;     openssl genrsa \\\r\n&gt;       -out all/privkey.pem \\\r\n&gt;       2048\r\n&gt;     \r\n&gt;     # Create a request from your Device, which your Root CA will sign\r\n&gt;     openssl req -new \\\r\n&gt;       -key all/privkey.pem \\\r\n&gt;       -out all/csr.pem \\\r\n&gt;       -subj &quot;/C=US/ST=Utah/L=Provo/O=ACME Tech Inc/CN=${FQDN}&quot;\r\n&gt;     \r\n&gt;     # Sign the request from Device with your Root CA\r\n&gt;     openssl x509 \\\r\n&gt;       -req -in all/csr.pem \\\r\n&gt;       -CA all/my-private-root-ca.cert.pem \\\r\n&gt;       -CAkey all/my-private-root-ca.privkey.pem \\\r\n&gt;       -CAcreateserial \\\r\n&gt;       -out all/cert.pem \\\r\n&gt;       -days 500\r\n&gt;     \r\n&gt;     # Put things in their proper place\r\n&gt;     rsync -a all/{privkey,cert}.pem server/\r\n&gt;     cat all/cert.pem &gt; server/fullchain.pem         # we have no intermediates in this case\r\n&gt;     rsync -a all/my-private-root-ca.cert.pem server/\r\n&gt;     rsync -a all/my-private-root-ca.cert.pem client/\r\n\r\n3. Run `bash create_my_certs.sh yourdomain.com`\r\n4. Place the certificates in their proper place on the server (you can find configuration in /etc/httpd/conf.d/ssl.conf). All these should be set:&lt;br/&gt;\r\nSSLCertificateFile&lt;br/&gt;\r\nSSLCertificateKeyFile&lt;br/&gt;\r\nSSLCertificateChainFile&lt;br/&gt;\r\nSSLCACertificateFile\r\n\r\n5. Restart httpd using `sudo service httpd restart` and make sure httpd started:&lt;br/&gt;\r\nStopping httpd: [  OK  ]&lt;br/&gt;\r\nStarting httpd: [  OK  ]\r\n\r\n6. Copy `my-private-root-ca.cert` to your android project assets folder\r\n7. Create your trust manager:&lt;br/&gt;\r\n\r\n \r\n\r\n    SSLContext SSLContext;\r\n\r\n    CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n              InputStream caInput = context.getAssets().open(&quot;my-private-root-ca.cert.pem&quot;);\r\n              Certificate ca;\r\n              try {\r\n                ca = cf.generateCertificate(caInput);\r\n              } finally {\r\n                caInput.close();\r\n              }\r\n\r\n    \r\n          // Create a KeyStore containing our trusted CAs\r\n          String keyStoreType = KeyStore.getDefaultType();\r\n          KeyStore keyStore = KeyStore.getInstance(keyStoreType);\r\n          keyStore.load(null, null);\r\n          keyStore.setCertificateEntry(&quot;ca&quot;, ca);\r\n    \r\n          // Create a TrustManager that trusts the CAs in our KeyStore\r\n          String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\r\n          TrustManagerFactory tmf = TrustManagerFactory.getInstance(tmfAlgorithm);\r\n          tmf.init(keyStore);\r\n    \r\n          // Create an SSLContext that uses our TrustManager\r\n          SSLContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n          SSSLContext.init(null, tmf.getTrustManagers(), null);\r\n\r\n8. And make the connection using HttpsURLConnection:\r\n\r\n    HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();\r\n    connection.setSSLSocketFactory(SSLContext.getSocketFactory());\r\n\r\n9. Thats it, try your https connection.\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/SSL-on-an-instance.html\r\n  [2]: https://developer.android.com/training/articles/security-ssl.html#UnknownCa\r\n  [3]: https://github.com/coolaj86/nodejs-self-signed-certificate-example/blob/master/make-root-ca-and-certificates.sh\r\n\r\n\r\n","title":"Https Connection Android","body":"<p>Sources that helped me get to work with my self signed certificate on my AWS Apache server and connect with HttpsURLConnection from android device:<br/><br/>\n<a href=\"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/SSL-on-an-instance.html\" rel=\"nofollow\">SSL on aws instance</a> - amazon tutorial on ssl<br/>\n<a href=\"https://developer.android.com/training/articles/security-ssl.html#UnknownCa\" rel=\"nofollow\">Android Security with HTTPS and SSL</a> - creating your own trust manager on client for accepting your certificate<br/>\n<a href=\"https://github.com/coolaj86/nodejs-self-signed-certificate-example/blob/master/make-root-ca-and-certificates.sh\" rel=\"nofollow\">Creating self signed certificate</a> - easy script for creating your certificates</p>\n\n<p>Then I did the following:</p>\n\n<ol>\n<li>Made sure the server supports https (sudo yum install -y mod24_ssl)</li>\n<li>Put this script in a file <code>create_my_certs.sh</code>:</li>\n</ol>\n\n<blockquote>\n<pre><code>#!/bin/bash\nFQDN=$1\n\n# make directories to work from\nmkdir -p server/ client/ all/\n\n# Create your very own Root Certificate Authority\nopenssl genrsa \\\n  -out all/my-private-root-ca.privkey.pem \\\n  2048\n\n# Self-sign your Root Certificate Authority\n# Since this is private, the details can be as bogus as you like\nopenssl req \\\n  -x509 \\\n  -new \\\n  -nodes \\\n  -key all/my-private-root-ca.privkey.pem \\\n  -days 1024 \\\n  -out all/my-private-root-ca.cert.pem \\\n  -subj \"/C=US/ST=Utah/L=Provo/O=ACME Signing Authority Inc/CN=example.com\"\n\n# Create a Device Certificate for each domain,\n# such as example.com, *.example.com, awesome.example.com\n# NOTE: You MUST match CN to the domain name or ip address you want to use\nopenssl genrsa \\\n  -out all/privkey.pem \\\n  2048\n\n# Create a request from your Device, which your Root CA will sign\nopenssl req -new \\\n  -key all/privkey.pem \\\n  -out all/csr.pem \\\n  -subj \"/C=US/ST=Utah/L=Provo/O=ACME Tech Inc/CN=${FQDN}\"\n\n# Sign the request from Device with your Root CA\nopenssl x509 \\\n  -req -in all/csr.pem \\\n  -CA all/my-private-root-ca.cert.pem \\\n  -CAkey all/my-private-root-ca.privkey.pem \\\n  -CAcreateserial \\\n  -out all/cert.pem \\\n  -days 500\n\n# Put things in their proper place\nrsync -a all/{privkey,cert}.pem server/\ncat all/cert.pem &gt; server/fullchain.pem         # we have no intermediates in this case\nrsync -a all/my-private-root-ca.cert.pem server/\nrsync -a all/my-private-root-ca.cert.pem client/\n</code></pre>\n</blockquote>\n\n<ol start=\"3\">\n<li>Run <code>bash create_my_certs.sh yourdomain.com</code></li>\n<li><p>Place the certificates in their proper place on the server (you can find configuration in /etc/httpd/conf.d/ssl.conf). All these should be set:<br/>\nSSLCertificateFile<br/>\nSSLCertificateKeyFile<br/>\nSSLCertificateChainFile<br/>\nSSLCACertificateFile</p></li>\n<li><p>Restart httpd using <code>sudo service httpd restart</code> and make sure httpd started:<br/>\nStopping httpd: [  OK  ]<br/>\nStarting httpd: [  OK  ]</p></li>\n<li><p>Copy <code>my-private-root-ca.cert</code> to your android project assets folder</p></li>\n<li><p>Create your trust manager:<br/></p>\n\n<p>SSLContext SSLContext;</p>\n\n<p>CertificateFactory cf = CertificateFactory.getInstance(\"X.509\");\n          InputStream caInput = context.getAssets().open(\"my-private-root-ca.cert.pem\");\n          Certificate ca;\n          try {\n            ca = cf.generateCertificate(caInput);\n          } finally {\n            caInput.close();\n          }</p>\n\n<pre><code>  // Create a KeyStore containing our trusted CAs\n  String keyStoreType = KeyStore.getDefaultType();\n  KeyStore keyStore = KeyStore.getInstance(keyStoreType);\n  keyStore.load(null, null);\n  keyStore.setCertificateEntry(\"ca\", ca);\n\n  // Create a TrustManager that trusts the CAs in our KeyStore\n  String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\n  TrustManagerFactory tmf = TrustManagerFactory.getInstance(tmfAlgorithm);\n  tmf.init(keyStore);\n\n  // Create an SSLContext that uses our TrustManager\n  SSLContext = SSLContext.getInstance(\"TLS\");\n  SSSLContext.init(null, tmf.getTrustManagers(), null);\n</code></pre></li>\n<li><p>And make the connection using HttpsURLConnection:</p>\n\n<p>HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();\nconnection.setSSLSocketFactory(SSLContext.getSocketFactory());</p></li>\n<li><p>Thats it, try your https connection.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17059907,"reputation":1,"user_id":12343592,"display_name":"mzaveruk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573221310,"creation_date":1573221310,"answer_id":58767926,"question_id":995514,"body_markdown":"Probably you can try something like this. This helped me\r\n\r\n        SslContextFactory sec = new SslContextFactory();\r\n        sec.setValidateCerts(false);\r\n        sec.setTrustAll(true);\r\n        \r\n        org.eclipse.jetty.websocket.client.WebSocketClient client = new WebSocketClient(sec);","title":"Https Connection Android","body":"<p>Probably you can try something like this. This helped me</p>\n\n<pre><code>    SslContextFactory sec = new SslContextFactory();\n    sec.setValidateCerts(false);\n    sec.setTrustAll(true);\n\n    org.eclipse.jetty.websocket.client.WebSocketClient client = new WebSocketClient(sec);\n</code></pre>\n"}],"owner":{"account_id":34066,"reputation":3027,"user_id":95877,"accept_rate":50,"display_name":"Sam97305421562"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179024,"favorite_count":0,"down_vote_count":0,"up_vote_count":103,"accepted_answer_id":997495,"answer_count":11,"score":103,"last_activity_date":1679450187,"creation_date":1245063740,"question_id":995514,"body_markdown":"I am doing a https post and I&#39;m getting an exception of ssl exception Not trusted server certificate. If i do normal http it is working perfectly fine. Do I have to accept the server certificate somehow?\r\n  ","title":"Https Connection Android","body":"<p>I am doing a https post and I'm getting an exception of ssl exception Not trusted server certificate. If i do normal http it is working perfectly fine. Do I have to accept the server certificate somehow?</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":26392909,"reputation":1,"user_id":20044535,"display_name":"vivek patel"},"score":0,"creation_date":1679426071,"post_id":75805418,"comment_id":133719563,"body_markdown":"this does not solve my problems. It also looks the exact same.","body":"this does not solve my problems. It also looks the exact same."},{"owner":{"account_id":27991132,"reputation":1,"user_id":21376980,"display_name":"CNTKR"},"score":0,"creation_date":1679450086,"post_id":75805418,"comment_id":133723560,"body_markdown":"I have  edited the code check it out it&#39;s working fine","body":"I have  edited the code check it out it&#39;s working fine"}],"tags":[],"owner":{"account_id":27991132,"reputation":1,"user_id":21376980,"display_name":"CNTKR"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679449932,"creation_date":1679425510,"answer_id":75805418,"question_id":75805301,"body_markdown":"The issue with your code is that you are not properly indenting the spaces in the second half of the diamond. You need to adjust the number of spaces you append before the second set of &#39;*&#39; to make sure the diamond is properly formatted. Here is an updated version of your code that should work:\r\n\r\n\r\nimport java.util.Scanner;\r\npublic class prog{\r\npublic static String diamond (int i, int n){       StringBuilder sb=new StringBuilder();\r\n\r\n\r\n    if (i &gt; n) {\r\n        return sb.toString();\r\n    }\r\n    \r\n    // first half of diamond\r\n    for (int j = 0; j &lt; (n - i) / 2; j++) {\r\n        sb.append(&quot; &quot;);\r\n    }\r\n    \r\n    for (int j = 0; j &lt; i; j++) {\r\n        sb.append(&quot;*&quot;);\r\n    }\r\n    \r\n    sb.append(&quot;\\n&quot;);\r\n    \r\n    // recursive call for first half\r\n    sb.append(diamond (i + 2, n));\r\n    \r\n    // second half of diamond\r\n    for (int j = 0; j &lt; (n - i) / 2; j++) {\r\n        sb.append(&quot; &quot;);\r\n    }\r\n    \r\n    for (int j = 0; j &lt; i; j++) {\r\n        sb.append(&quot;*&quot;);\r\n    }\r\n    \r\n    sb.append(&quot;\\n&quot;);\r\n    \r\n    return sb.toString();\r\n    }\r\n    public static void main(String[] args) {\r\n        Scanner sc= new Scanner(System.in);\r\n        System.out.println(&quot;please enter the size&quot;);\r\n        int size=sc.nextInt();\r\n        System.out.println(diamond (1, size));\r\n        sc.close();\r\n    }\r\n}","title":"Recursive Diamond Solution not indenting itself in order to get what I expect from the JUnit tests","body":"<p>The issue with your code is that you are not properly indenting the spaces in the second half of the diamond. You need to adjust the number of spaces you append before the second set of '*' to make sure the diamond is properly formatted. Here is an updated version of your code that should work:</p>\n<p>import java.util.Scanner;\npublic class prog{\npublic static String diamond (int i, int n){       StringBuilder sb=new StringBuilder();</p>\n<pre><code>if (i &gt; n) {\n    return sb.toString();\n}\n\n// first half of diamond\nfor (int j = 0; j &lt; (n - i) / 2; j++) {\n    sb.append(&quot; &quot;);\n}\n\nfor (int j = 0; j &lt; i; j++) {\n    sb.append(&quot;*&quot;);\n}\n\nsb.append(&quot;\\n&quot;);\n\n// recursive call for first half\nsb.append(diamond (i + 2, n));\n\n// second half of diamond\nfor (int j = 0; j &lt; (n - i) / 2; j++) {\n    sb.append(&quot; &quot;);\n}\n\nfor (int j = 0; j &lt; i; j++) {\n    sb.append(&quot;*&quot;);\n}\n\nsb.append(&quot;\\n&quot;);\n\nreturn sb.toString();\n}\npublic static void main(String[] args) {\n    Scanner sc= new Scanner(System.in);\n    System.out.println(&quot;please enter the size&quot;);\n    int size=sc.nextInt();\n    System.out.println(diamond (1, size));\n    sc.close();\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":26392909,"reputation":1,"user_id":20044535,"display_name":"vivek patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679449932,"creation_date":1679424619,"question_id":75805301,"body_markdown":"I am trying to get a diamond to print recursively using a String method. The problem I&#39;m having is that my code does not give me what I expect it prints out the exact number of &#39;*&#39; that I am using to try to get the shape of the diamond to come out, but it is not properly formatting it the way that I intended. `\r\n\r\n\r\npublic static String printRhombus(int i, int n) {\r\n        StringBuilder sb = new StringBuilder();\r\n\r\n        if (i &gt; n) {\r\n            return sb.toString();\r\n        }\r\n\r\n        for (int j = 0; j &lt; (n - i) / 2; j++) {\r\n            sb.append(&quot; &quot;);\r\n        }\r\n\r\n        for (int j = 0; j &lt; i; j++) {\r\n            sb.append(&quot;*&quot;);\r\n        }\r\n\r\n        sb.append(&quot;\\n&quot;);\r\n\r\n        if (i &lt; n) {\r\n            sb.append(printRhombus(i + 2, n));\r\n        }\r\n\r\n        for (int j = 0; j &lt; (n - i) / 2; j++) {\r\n            sb.append(&quot; &quot;);\r\n        }\r\n\r\n        for (int j = 0; j &lt; i; j++) {\r\n            sb.append(&quot;*&quot;);\r\n        }\r\n\r\n        sb.append(&quot;\\n&quot;);\r\n\r\n        return sb.toString();\r\n    }`\r\n[JUnit test of what I expect and what is actually happening](https://i.stack.imgur.com/BdRUv.png)\r\nThe code is meant to take let&#39;s say a height of 5, this method will only work with odd numbers, and that will be the amount of lines that the shape must be. But the very middle of the shape so in this case for 5 line 3 should have &quot;*****&quot; and than just mirror what was shown above. ","title":"Recursive Diamond Solution not indenting itself in order to get what I expect from the JUnit tests","body":"<p>I am trying to get a diamond to print recursively using a String method. The problem I'm having is that my code does not give me what I expect it prints out the exact number of '*' that I am using to try to get the shape of the diamond to come out, but it is not properly formatting it the way that I intended. `</p>\n<p>public static String printRhombus(int i, int n) {\nStringBuilder sb = new StringBuilder();</p>\n<pre><code>    if (i &gt; n) {\n        return sb.toString();\n    }\n\n    for (int j = 0; j &lt; (n - i) / 2; j++) {\n        sb.append(&quot; &quot;);\n    }\n\n    for (int j = 0; j &lt; i; j++) {\n        sb.append(&quot;*&quot;);\n    }\n\n    sb.append(&quot;\\n&quot;);\n\n    if (i &lt; n) {\n        sb.append(printRhombus(i + 2, n));\n    }\n\n    for (int j = 0; j &lt; (n - i) / 2; j++) {\n        sb.append(&quot; &quot;);\n    }\n\n    for (int j = 0; j &lt; i; j++) {\n        sb.append(&quot;*&quot;);\n    }\n\n    sb.append(&quot;\\n&quot;);\n\n    return sb.toString();\n}`\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/BdRUv.png\" rel=\"nofollow noreferrer\">JUnit test of what I expect and what is actually happening</a>\nThe code is meant to take let's say a height of 5, this method will only work with odd numbers, and that will be the amount of lines that the shape must be. But the very middle of the shape so in this case for 5 line 3 should have &quot;*****&quot; and than just mirror what was shown above.</p>\n"},{"tags":["java","recursion","linked-list"],"answers":[{"tags":[],"owner":{"account_id":13903062,"reputation":451,"user_id":10038206,"display_name":"Topher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679449360,"creation_date":1679442864,"answer_id":75807346,"question_id":75792674,"body_markdown":"Let&#39;s go through our decision tree.\r\n* In the first part of your conditional: if there is no head, create a new node and set it as the head.  This makes sense.\r\n* In the second part of your conditional: if the head has nothing after it, create a new node (makes sense) and set it as the head (this does not make sense).  You should not abandon your head node (which has already been set).  If you do, you&#39;ll loose the beginning of your list.\r\n* In the last part of your conditional: If here is a head and head has a something after it (the &#39;else&#39;), move head to the next node (again, this does not make sense) and call the same method.  As before, you should not abandon your head node (which has already been set).\r\n\r\nWe can genericize your algorithm with a couple of changes.  \r\nFirst, let&#39;s pass in a node and call it &quot;currentNode&quot;.  So, your method would look like\r\n\r\n    public void insertTailNode(Node&lt; T &gt; currentNode, T data)\r\n\r\nSecond, we&#39;ll operate only on the currentNode with the assumption that A) if currentNode is &#39;null&#39; then you have no head and that B) if the &quot;getNext()&quot; on the current node results in &#39;null&#39;, then it is the tail.\r\n\r\nNow, your logic should be\r\n* In the first part of your conditional: if currentNode is &#39;null&#39;, create a new node and set it as the head.\r\n* In the second part of your conditional: if the currentNode has nothing after it, create a new node and set currentNode.next to the new node.\r\n* In the last part of your conditional: If here is a currentNode and the currentNode has a something after it (the &#39;else&#39;), call the method again like so,\r\n\r\n    `insertTailNode( currentNode.getNext(), data );`\r\n\r\nTry that and see what happens.\r\n\r\nAs a note, your first call (to create the head) would be \r\n\r\n    insertTailNode( null, data );\r\n","title":"Append Tail Node In Linked List With Recursion &amp; No Node Param","body":"<p>Let's go through our decision tree.</p>\n<ul>\n<li>In the first part of your conditional: if there is no head, create a new node and set it as the head.  This makes sense.</li>\n<li>In the second part of your conditional: if the head has nothing after it, create a new node (makes sense) and set it as the head (this does not make sense).  You should not abandon your head node (which has already been set).  If you do, you'll loose the beginning of your list.</li>\n<li>In the last part of your conditional: If here is a head and head has a something after it (the 'else'), move head to the next node (again, this does not make sense) and call the same method.  As before, you should not abandon your head node (which has already been set).</li>\n</ul>\n<p>We can genericize your algorithm with a couple of changes.<br />\nFirst, let's pass in a node and call it &quot;currentNode&quot;.  So, your method would look like</p>\n<pre><code>public void insertTailNode(Node&lt; T &gt; currentNode, T data)\n</code></pre>\n<p>Second, we'll operate only on the currentNode with the assumption that A) if currentNode is 'null' then you have no head and that B) if the &quot;getNext()&quot; on the current node results in 'null', then it is the tail.</p>\n<p>Now, your logic should be</p>\n<ul>\n<li><p>In the first part of your conditional: if currentNode is 'null', create a new node and set it as the head.</p>\n</li>\n<li><p>In the second part of your conditional: if the currentNode has nothing after it, create a new node and set currentNode.next to the new node.</p>\n</li>\n<li><p>In the last part of your conditional: If here is a currentNode and the currentNode has a something after it (the 'else'), call the method again like so,</p>\n<p><code>insertTailNode( currentNode.getNext(), data );</code></p>\n</li>\n</ul>\n<p>Try that and see what happens.</p>\n<p>As a note, your first call (to create the head) would be</p>\n<pre><code>insertTailNode( null, data );\n</code></pre>\n"}],"owner":{"account_id":27382307,"reputation":1,"user_id":20886727,"display_name":"currentExplanation"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679449360,"creation_date":1679328501,"question_id":75792674,"body_markdown":"I have the following method\r\n\r\n```\r\n    public void insertTailNode(T data) {\r\n        if (this.head == null) {\r\n            Node&lt;T&gt; temp = new Node&lt;T&gt;(data, null);\r\n            this.head = temp;\r\n            this.size++;\r\n        } else if (this.head.getNext() == null) {\r\n            Node&lt;T&gt; temp = new Node&lt;T&gt;(data, this.head);\r\n            this.head = temp;\r\n            this.size++;\r\n        } else {\r\n            this.head = head.getNext();\r\n            insertTailNode(data);\r\n        }\r\n    }\r\n```\r\n\r\nUsing recursion how can I add a tail node?\r\n\r\n\r\nI tried using constructors with my head node but that obviously resets back to the first node with every call. ","title":"Append Tail Node In Linked List With Recursion &amp; No Node Param","body":"<p>I have the following method</p>\n<pre><code>    public void insertTailNode(T data) {\n        if (this.head == null) {\n            Node&lt;T&gt; temp = new Node&lt;T&gt;(data, null);\n            this.head = temp;\n            this.size++;\n        } else if (this.head.getNext() == null) {\n            Node&lt;T&gt; temp = new Node&lt;T&gt;(data, this.head);\n            this.head = temp;\n            this.size++;\n        } else {\n            this.head = head.getNext();\n            insertTailNode(data);\n        }\n    }\n</code></pre>\n<p>Using recursion how can I add a tail node?</p>\n<p>I tried using constructors with my head node but that obviously resets back to the first node with every call.</p>\n"},{"tags":["java","arrays","arraylist"],"comments":[{"owner":{"account_id":12573569,"reputation":142,"user_id":9146825,"display_name":"Blue Dev"},"score":1,"creation_date":1679447509,"post_id":75807641,"comment_id":133723310,"body_markdown":"Do you mind very visibly highlighting where the error occurs? That&#39;s alot of code to read through just trying to find the location of the problem.","body":"Do you mind very visibly highlighting where the error occurs? That&#39;s alot of code to read through just trying to find the location of the problem."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1679447647,"post_id":75807641,"comment_id":133723323,"body_markdown":"@BlueDev I&#39;m pretty sure the OP has NO idea where the  problem actually is, but is getting a `NullPointerException` at `s.getProduct(0).addToInventory(3);` and there initial loop will show the first element as been `null` ... due to how the `getProduct` method works","body":"@BlueDev I&#39;m pretty sure the OP has NO idea where the  problem actually is, but is getting a <code>NullPointerException</code> at <code>s.getProduct(0).addToInventory(3);</code> and there initial loop will show the first element as been <code>null</code> ... due to how the <code>getProduct</code> method works"}],"answers":[{"comments":[{"owner":{"account_id":26616011,"reputation":1,"user_id":20235421,"display_name":"Ali Fuat Akyemiş"},"score":0,"creation_date":1679480219,"post_id":75807675,"comment_id":133728199,"body_markdown":"It solved this problem I didn&#39;t realized thank you","body":"It solved this problem I didn&#39;t realized thank you"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1679449201,"creation_date":1679447529,"answer_id":75807675,"question_id":75807641,"body_markdown":"In `getProduct` you&#39;re doing ...\r\n\r\n    if ((index &gt; 0) &amp;&amp; (index &lt; products.size())) {\r\n\r\nBUT, arrays (and `List`/`ArrayList`) are `0` indexed, that is, the first element appears at position `0`.\r\n\r\nSo, when you ask for the first product (at position `0`), your code goes, &quot;`0` is NOT greater than `0`&quot;, so returns `null`\r\n\r\nChange it to...\r\n\r\n    if ((index &gt;= 0) &amp;&amp; (index &lt; products.size())) {","title":"Java ArrayList&#39;s first element is always null","body":"<p>In <code>getProduct</code> you're doing ...</p>\n<pre><code>if ((index &gt; 0) &amp;&amp; (index &lt; products.size())) {\n</code></pre>\n<p>BUT, arrays (and <code>List</code>/<code>ArrayList</code>) are <code>0</code> indexed, that is, the first element appears at position <code>0</code>.</p>\n<p>So, when you ask for the first product (at position <code>0</code>), your code goes, &quot;<code>0</code> is NOT greater than <code>0</code>&quot;, so returns <code>null</code></p>\n<p>Change it to...</p>\n<pre><code>if ((index &gt;= 0) &amp;&amp; (index &lt; products.size())) {\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26616011,"reputation":1,"user_id":20235421,"display_name":"Ali Fuat Akyemiş"},"score":0,"creation_date":1679480197,"post_id":75807677,"comment_id":133728193,"body_markdown":"yes İt worked I didn&#39;t realized this thank you.","body":"yes İt worked I didn&#39;t realized this thank you."}],"tags":[],"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679447547,"creation_date":1679447547,"answer_id":75807677,"question_id":75807641,"body_markdown":"Your code contains explicit provisions to NOT return the product at index zero.\r\n\r\n    if ((index &gt; 0) ...\r\n \r\nYou return null instead.\r\n\r\nYou meant &#39;&gt;= 0&#39;.  But the lesson here is: learn to carefully read the code you wrote.  You explained to us in the quesion that you understood the existence of index 0, but you did not reflect that understanding in your code.\r\n","title":"Java ArrayList&#39;s first element is always null","body":"<p>Your code contains explicit provisions to NOT return the product at index zero.</p>\n<pre><code>if ((index &gt; 0) ...\n</code></pre>\n<p>You return null instead.</p>\n<p>You meant '&gt;= 0'.  But the lesson here is: learn to carefully read the code you wrote.  You explained to us in the quesion that you understood the existence of index 0, but you did not reflect that understanding in your code.</p>\n"}],"owner":{"account_id":26616011,"reputation":1,"user_id":20235421,"display_name":"Ali Fuat Akyemiş"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1679456151,"answer_count":2,"score":-2,"last_activity_date":1679449201,"creation_date":1679447060,"question_id":75807641,"body_markdown":"I started to do a homework and I needed to have a list for products but whenever I use add method to add a product to list the first product is always null but second and third doesn&#39;t have any problem about that please help me about this problem is so annoying. This code gives an error about the null value becuse actually there should be a product class object in the 0 index of ArrayList but 0 index is always null as I said I couldn&#39;t find the reason of this \r\n\r\n\r\n```\r\nimport java.util.ArrayList;\r\n\r\npublic class Assignment01_20210808043 {\r\npublic static void main(String[] args) {\r\nStore s = new Store(&quot;Migros&quot;,&quot;www.migros.com&quot;);\r\n\r\n    \tCustomer c = new Customer(&quot;CSE 102&quot;);\r\n    \tSystem.out.println(c);\r\n    \t\r\n    \tClubCustomer cc = new ClubCustomer(&quot;Club CSE 102&quot;, &quot;0555124567&quot;);\r\n    \tcc.addPoints(20);\r\n    \tcc.addPoints(30);\r\n    \tSystem.out.println(cc.getPhone());\r\n    \tSystem.out.println(cc);\r\n    \t\r\n    \t\r\n    \tProduct p = new Product(&quot;1234&quot;, &quot;Computer&quot;, 20, 1000.00);\r\n    \tFoodProduct fp = new FoodProduct(&quot;3456&quot;, &quot;Snickers&quot;, 100, 2, 250, true, true, true, false);\r\n    \tCleaningProduct cp = new CleaningProduct(&quot;5678&quot;, &quot;Mop&quot;, 28, 99, false, &quot;Multi-room&quot;);\r\n    \t\r\n\r\n        s.addProduct(p);\r\n\ts.addProduct(fp);\r\n\tSystem.out.println(s.getProductIndex(p));\r\n\tSystem.out.println(s.getProduct(0));\r\n\tSystem.out.println(s.getProductIndex(fp));\r\n\tSystem.out.println(s.getProduct(1));\r\n\ts.showList();\r\n    \t\r\n    \t\r\n    \tfor(int i = 0; i &lt; s.getInventorySize(); i++)\r\n    \t\tSystem.out.println(s.getProduct(i));\r\n    \ts.addProduct(cp);\r\n    \t\r\n    \ts.addProduct(new Product(&quot;4321&quot;, &quot;iPhone&quot;, 50, 99.00));\r\n    \t\r\n    \tSystem.out.println(s.getProductIndex(new FoodProduct(&quot;8888&quot;, &quot;Apples&quot;, 500, 1, 50, false, false, false, false)));\r\n    \t\r\n    \tSystem.out.println(cp.purchase(2));\r\n    \tif(fp.containsGluten())\r\n    \t\tSystem.out.println(&quot;My wife cannot eat or drink &quot; + fp.getName());\r\n    \telse\r\n    \t\tSystem.out.println(&quot;My wife can eat or drink &quot; + fp.getName());\r\n    \t\r\n    \tif(fp.containsPeanuts())\r\n    \t\tSystem.out.println(&quot;My friend cannot eat or drink &quot; + fp.getName());\r\n    \telse\r\n    \t\tSystem.out.println(&quot;My friend can eat or drink &quot; + fp.getName());\r\n    \ts.getProduct(0).addToInventory(3);\r\n    \tProduct cur = new Product(null, null, 0, 0);\r\n    \tint i;\r\n    \tfor(i = 0; i &lt; s.getInventorySize(); i++)\r\n    \t\tcur = s.getProduct(i);\r\n    \t\tSystem.out.println(cur);\r\n    \t\tfor(int j = i + 1; j &lt; s.getInventorySize(); j++)\r\n    \t\t\tif(cur.equals(s.getProduct(j)))\r\n    \t\t\t\tSystem.out.println(cur.getName() + &quot; is the same price as &quot; + s.getProduct(j).getName());\r\n\r\n//\t\tProduct c = new Product(&quot;25&quot;,&quot;elma&quot;,5,3);\r\n//\t\tProduct b = new Product(&quot;25&quot;,&quot;armut&quot;,5,3);\r\n//\t\tProduct a = new Product(&quot;25&quot;,&quot;ayva&quot;,5,3);\r\n//\t\tFoodProduct d = new FoodProduct(&quot;25&quot;, &quot;portakal&quot;, 5, 3, 30, false, false, false, false);\r\n//\t\tSystem.out.println(c);\r\n//\t\ts.addProduct(a);\r\n//\t\ts.addProduct(b);\r\n//\t\ts.addProduct(c);\r\n//\t\ts.showList();\r\n//\t\tSystem.out.println(s.getProductIndex(a));\r\n//\t\tSystem.out.println(s.getProductIndex(b));\r\n//\t\tSystem.out.println(s.getProductIndex(c));\r\n//\t\tSystem.out.println(s.getProduct(1).getName());\r\n//\t\tif (a.equals(d)) System.out.println(&quot;eşit&quot;);\r\n}\r\n\r\n}\r\n\r\nclass Product {\r\nprivate String id;\r\nprivate String name;\r\nprivate int quantity;\r\nprivate double price;\r\n\r\n    public Product(String id, String name, int quantity, double price) {\r\n    \tthis.id = id;\r\n    \tthis.name = name;\r\n    \tthis.quantity = quantity;\r\n    \tthis.price = price;\r\n    }\r\n    \r\n    public void setId(String id) {\r\n    \tthis.id = id;\r\n    }\r\n    \r\n    public String getId() {\r\n    \treturn id;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n    \tthis.name = name;\r\n    }\r\n    \r\n    public String getName() {\r\n    \treturn name;\r\n    }\r\n    \r\n    public void setPrice(double price) {\r\n    \tthis.price = price;\r\n    }\r\n    \r\n    public double getPrice() {\r\n    \treturn price;\r\n    }\r\n    \r\n    public int remaining() {\r\n    \treturn quantity;\r\n    }\r\n    \r\n    public int addToInventory(int amount) {\r\n    \tif (amount &gt;= 0) {\r\n    \t\tthis.quantity += amount;\r\n    \t}\r\n    \treturn this.quantity;\r\n    }\r\n    \r\n    public double purchase(int amount) {\r\n    \tif ((amount &gt; this.quantity) || (amount &lt; 0)) return 0;\r\n    \telse {\r\n    \t\tthis.quantity -= amount;\r\n    \t\treturn (amount*this.price);\r\n    \t}\r\n    }\r\n    \r\n    public String toString() {\r\n    \treturn &quot;Product &quot;+this.name+&quot; has &quot;+this.quantity+&quot; remaining&quot;;\r\n    }\r\n    \r\n    public boolean equals(Product product) {\r\n    \tif (this.price == product.getPrice()) return true;\r\n    \treturn false;\r\n    }\r\n\r\n}\r\n\r\nclass FoodProduct extends Product {\r\nprivate int calories;\r\nprivate boolean dairy;\r\nprivate boolean eggs;\r\nprivate boolean peanuts;\r\nprivate boolean gluten;\r\n\r\n    public FoodProduct (String id, String name, int quanitity, double price, int calories, boolean dairy, boolean eggs, boolean peanuts, boolean gluten) {\r\n    \tsuper(id, name, quanitity, price);\r\n    \tthis.calories = calories;\r\n    \tthis.dairy = dairy;\r\n    \tthis.eggs = eggs;\r\n    \tthis.peanuts = peanuts;\r\n    \tthis.gluten = gluten;\r\n    }\r\n    \r\n    public void setCalories(int calories) {\r\n    \tthis.calories = calories;\r\n    }\r\n    \r\n    public int getCalories() {\r\n    \treturn calories;\r\n    }\r\n    \r\n    public boolean containsDairy() {\r\n    \treturn this.dairy;\r\n    }\r\n    \r\n    public boolean containsEggs() {\r\n    \treturn this.eggs;\r\n    }\r\n    \r\n    public boolean containsPeanuts() {\r\n    \treturn this.peanuts;\r\n    }\r\n    \r\n    public boolean containsGluten() {\r\n    \treturn this.gluten;\r\n    }\r\n\r\n}\r\n\r\nclass CleaningProduct extends Product {\r\nprivate boolean isLiquid;\r\nprivate String WhereToUse;\r\n\r\n    public CleaningProduct (String id, String name, int quantity, double price, boolean isLiquid, String WhereToUse) {\r\n    \tsuper(id, name, quantity, price);\r\n    \tthis.isLiquid = isLiquid;\r\n    \tthis.WhereToUse = WhereToUse;\r\n    }\r\n    \r\n    public void setWhereToUse(String WhereToUse) {\r\n    \tthis.WhereToUse = WhereToUse;\r\n    }\r\n    \r\n    public String getWhereToUse() {\r\n    \treturn this.WhereToUse;\r\n    }\r\n    \r\n    public boolean isLiquid() {\r\n    \treturn this.isLiquid;\r\n    }\r\n\r\n}\r\n\r\nclass Customer {\r\nprivate String name;\r\n\r\n    public Customer (String name) {\r\n    \tthis.name = name;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n    \tthis.name = name;\r\n    }\r\n    \r\n    public String getName() {\r\n    \treturn this.name;\r\n    }\r\n    \r\n    public String toString() {\r\n    \treturn this.name;\r\n    }\r\n\r\n}\r\n\r\nclass ClubCustomer extends Customer {\r\nprivate String phone;\r\nprivate int points;\r\n\r\n    public ClubCustomer (String name, String phone) {\r\n    \tsuper(name);\r\n    \tthis.phone = phone;\r\n    \tthis.points = 0;\r\n    }\r\n    \r\n    public void setPhone(String phone) {\r\n    \tthis.phone = phone;\r\n    }\r\n    \r\n    public String getPhone() {\r\n    \treturn this.phone;\r\n    }\r\n    \r\n    public int getPoints() {\r\n    \treturn this.points;\r\n    }\r\n    \r\n    public void addPoints(int points) {\r\n    \tif (!(points &lt; 0)) this.points += points;\r\n    }\r\n    \r\n    public String toString() {\r\n    \treturn this.getName()+&quot; has &quot;+this.points;\r\n    }\r\n\r\n}\r\n\r\nclass Store {\r\nprivate String name;\r\nprivate String website;\r\nArrayList\\&lt;Product\\&gt; products = new ArrayList\\&lt;Product\\&gt;();\r\n\r\n    public Store(String name, String website) {\r\n    \tthis.name = name;\r\n    \tthis.website = website;\r\n    \t\r\n    }\r\n    \r\n    public void setName(String name) {\r\n    \tthis.name = name;\r\n    }\r\n    \r\n    public String getName() {\r\n    \treturn this.name;\r\n    }\r\n    \r\n    public void setWebsite(String website) {\r\n    \tthis.website = website;\r\n    }\r\n    \r\n    public String getWebsite() {\r\n    \treturn this.website;\r\n    }\r\n    \r\n    public void showList() {\r\n    \tSystem.out.println(products);\r\n    }\r\n    \r\n    public void addProduct(Product product) {\r\n    \tproducts.add(product);\r\n    }\r\n    \r\n    public void addProduct(Product product, int index) {\r\n    \tproducts.add(index, product);\r\n    }\r\n    \r\n    public Product getProduct(int index) {\r\n    \tif ((index &gt; 0) &amp;&amp; (index &lt; products.size())) return products.get(index);\r\n    \treturn null;\r\n    }\r\n    \r\n    public int getProductIndex(Product product) {\r\n    \treturn products.indexOf(product);\r\n    }\r\n    \r\n    public int getInventorySize() {\r\n    \treturn products.size();\r\n    }\r\n\r\n}\r\n```","title":"Java ArrayList&#39;s first element is always null","body":"<p>I started to do a homework and I needed to have a list for products but whenever I use add method to add a product to list the first product is always null but second and third doesn't have any problem about that please help me about this problem is so annoying. This code gives an error about the null value becuse actually there should be a product class object in the 0 index of ArrayList but 0 index is always null as I said I couldn't find the reason of this</p>\n<pre><code>import java.util.ArrayList;\n\npublic class Assignment01_20210808043 {\npublic static void main(String[] args) {\nStore s = new Store(&quot;Migros&quot;,&quot;www.migros.com&quot;);\n\n        Customer c = new Customer(&quot;CSE 102&quot;);\n        System.out.println(c);\n        \n        ClubCustomer cc = new ClubCustomer(&quot;Club CSE 102&quot;, &quot;0555124567&quot;);\n        cc.addPoints(20);\n        cc.addPoints(30);\n        System.out.println(cc.getPhone());\n        System.out.println(cc);\n        \n        \n        Product p = new Product(&quot;1234&quot;, &quot;Computer&quot;, 20, 1000.00);\n        FoodProduct fp = new FoodProduct(&quot;3456&quot;, &quot;Snickers&quot;, 100, 2, 250, true, true, true, false);\n        CleaningProduct cp = new CleaningProduct(&quot;5678&quot;, &quot;Mop&quot;, 28, 99, false, &quot;Multi-room&quot;);\n        \n\n        s.addProduct(p);\n    s.addProduct(fp);\n    System.out.println(s.getProductIndex(p));\n    System.out.println(s.getProduct(0));\n    System.out.println(s.getProductIndex(fp));\n    System.out.println(s.getProduct(1));\n    s.showList();\n        \n        \n        for(int i = 0; i &lt; s.getInventorySize(); i++)\n            System.out.println(s.getProduct(i));\n        s.addProduct(cp);\n        \n        s.addProduct(new Product(&quot;4321&quot;, &quot;iPhone&quot;, 50, 99.00));\n        \n        System.out.println(s.getProductIndex(new FoodProduct(&quot;8888&quot;, &quot;Apples&quot;, 500, 1, 50, false, false, false, false)));\n        \n        System.out.println(cp.purchase(2));\n        if(fp.containsGluten())\n            System.out.println(&quot;My wife cannot eat or drink &quot; + fp.getName());\n        else\n            System.out.println(&quot;My wife can eat or drink &quot; + fp.getName());\n        \n        if(fp.containsPeanuts())\n            System.out.println(&quot;My friend cannot eat or drink &quot; + fp.getName());\n        else\n            System.out.println(&quot;My friend can eat or drink &quot; + fp.getName());\n        s.getProduct(0).addToInventory(3);\n        Product cur = new Product(null, null, 0, 0);\n        int i;\n        for(i = 0; i &lt; s.getInventorySize(); i++)\n            cur = s.getProduct(i);\n            System.out.println(cur);\n            for(int j = i + 1; j &lt; s.getInventorySize(); j++)\n                if(cur.equals(s.getProduct(j)))\n                    System.out.println(cur.getName() + &quot; is the same price as &quot; + s.getProduct(j).getName());\n\n//      Product c = new Product(&quot;25&quot;,&quot;elma&quot;,5,3);\n//      Product b = new Product(&quot;25&quot;,&quot;armut&quot;,5,3);\n//      Product a = new Product(&quot;25&quot;,&quot;ayva&quot;,5,3);\n//      FoodProduct d = new FoodProduct(&quot;25&quot;, &quot;portakal&quot;, 5, 3, 30, false, false, false, false);\n//      System.out.println(c);\n//      s.addProduct(a);\n//      s.addProduct(b);\n//      s.addProduct(c);\n//      s.showList();\n//      System.out.println(s.getProductIndex(a));\n//      System.out.println(s.getProductIndex(b));\n//      System.out.println(s.getProductIndex(c));\n//      System.out.println(s.getProduct(1).getName());\n//      if (a.equals(d)) System.out.println(&quot;eşit&quot;);\n}\n\n}\n\nclass Product {\nprivate String id;\nprivate String name;\nprivate int quantity;\nprivate double price;\n\n    public Product(String id, String name, int quantity, double price) {\n        this.id = id;\n        this.name = name;\n        this.quantity = quantity;\n        this.price = price;\n    }\n    \n    public void setId(String id) {\n        this.id = id;\n    }\n    \n    public String getId() {\n        return id;\n    }\n    \n    public void setName(String name) {\n        this.name = name;\n    }\n    \n    public String getName() {\n        return name;\n    }\n    \n    public void setPrice(double price) {\n        this.price = price;\n    }\n    \n    public double getPrice() {\n        return price;\n    }\n    \n    public int remaining() {\n        return quantity;\n    }\n    \n    public int addToInventory(int amount) {\n        if (amount &gt;= 0) {\n            this.quantity += amount;\n        }\n        return this.quantity;\n    }\n    \n    public double purchase(int amount) {\n        if ((amount &gt; this.quantity) || (amount &lt; 0)) return 0;\n        else {\n            this.quantity -= amount;\n            return (amount*this.price);\n        }\n    }\n    \n    public String toString() {\n        return &quot;Product &quot;+this.name+&quot; has &quot;+this.quantity+&quot; remaining&quot;;\n    }\n    \n    public boolean equals(Product product) {\n        if (this.price == product.getPrice()) return true;\n        return false;\n    }\n\n}\n\nclass FoodProduct extends Product {\nprivate int calories;\nprivate boolean dairy;\nprivate boolean eggs;\nprivate boolean peanuts;\nprivate boolean gluten;\n\n    public FoodProduct (String id, String name, int quanitity, double price, int calories, boolean dairy, boolean eggs, boolean peanuts, boolean gluten) {\n        super(id, name, quanitity, price);\n        this.calories = calories;\n        this.dairy = dairy;\n        this.eggs = eggs;\n        this.peanuts = peanuts;\n        this.gluten = gluten;\n    }\n    \n    public void setCalories(int calories) {\n        this.calories = calories;\n    }\n    \n    public int getCalories() {\n        return calories;\n    }\n    \n    public boolean containsDairy() {\n        return this.dairy;\n    }\n    \n    public boolean containsEggs() {\n        return this.eggs;\n    }\n    \n    public boolean containsPeanuts() {\n        return this.peanuts;\n    }\n    \n    public boolean containsGluten() {\n        return this.gluten;\n    }\n\n}\n\nclass CleaningProduct extends Product {\nprivate boolean isLiquid;\nprivate String WhereToUse;\n\n    public CleaningProduct (String id, String name, int quantity, double price, boolean isLiquid, String WhereToUse) {\n        super(id, name, quantity, price);\n        this.isLiquid = isLiquid;\n        this.WhereToUse = WhereToUse;\n    }\n    \n    public void setWhereToUse(String WhereToUse) {\n        this.WhereToUse = WhereToUse;\n    }\n    \n    public String getWhereToUse() {\n        return this.WhereToUse;\n    }\n    \n    public boolean isLiquid() {\n        return this.isLiquid;\n    }\n\n}\n\nclass Customer {\nprivate String name;\n\n    public Customer (String name) {\n        this.name = name;\n    }\n    \n    public void setName(String name) {\n        this.name = name;\n    }\n    \n    public String getName() {\n        return this.name;\n    }\n    \n    public String toString() {\n        return this.name;\n    }\n\n}\n\nclass ClubCustomer extends Customer {\nprivate String phone;\nprivate int points;\n\n    public ClubCustomer (String name, String phone) {\n        super(name);\n        this.phone = phone;\n        this.points = 0;\n    }\n    \n    public void setPhone(String phone) {\n        this.phone = phone;\n    }\n    \n    public String getPhone() {\n        return this.phone;\n    }\n    \n    public int getPoints() {\n        return this.points;\n    }\n    \n    public void addPoints(int points) {\n        if (!(points &lt; 0)) this.points += points;\n    }\n    \n    public String toString() {\n        return this.getName()+&quot; has &quot;+this.points;\n    }\n\n}\n\nclass Store {\nprivate String name;\nprivate String website;\nArrayList\\&lt;Product\\&gt; products = new ArrayList\\&lt;Product\\&gt;();\n\n    public Store(String name, String website) {\n        this.name = name;\n        this.website = website;\n        \n    }\n    \n    public void setName(String name) {\n        this.name = name;\n    }\n    \n    public String getName() {\n        return this.name;\n    }\n    \n    public void setWebsite(String website) {\n        this.website = website;\n    }\n    \n    public String getWebsite() {\n        return this.website;\n    }\n    \n    public void showList() {\n        System.out.println(products);\n    }\n    \n    public void addProduct(Product product) {\n        products.add(product);\n    }\n    \n    public void addProduct(Product product, int index) {\n        products.add(index, product);\n    }\n    \n    public Product getProduct(int index) {\n        if ((index &gt; 0) &amp;&amp; (index &lt; products.size())) return products.get(index);\n        return null;\n    }\n    \n    public int getProductIndex(Product product) {\n        return products.indexOf(product);\n    }\n    \n    public int getInventorySize() {\n        return products.size();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"display_name":"user9065831"},"score":0,"creation_date":1564222725,"post_id":57231039,"comment_id":100965483,"body_markdown":"@Temporal won’t help here man, he want to set format of date. Share code to us, let us also know how to format date format using Temporal","body":"@Temporal won’t help here man, he want to set format of date. Share code to us, let us also know how to format date format using Temporal"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1564229975,"post_id":57231039,"comment_id":100966911,"body_markdown":"If you want to store the date as in a database in a certain format then you can use the `@DateTimeFormat(pattern = &quot;yyyy-MM-dd hh:mm:ss&quot;)` annotation and state what pattern you want","body":"If you want to store the date as in a database in a certain format then you can use the <code>@DateTimeFormat(pattern = &quot;yyyy-MM-dd hh:mm:ss&quot;)</code> annotation and state what pattern you want"},{"owner":{"account_id":3026387,"reputation":440,"user_id":2566304,"accept_rate":0,"display_name":"Andrey M. Stepanov"},"score":0,"creation_date":1679441946,"post_id":57231039,"comment_id":133722599,"body_markdown":"@user9065831 actually you are wrong. Temporal is the right choice for the java.util.Date like in the code in question. Dates can be different - you must use the right annotation for the specific date. For members of the java.util package use \nTemporal(TemporalType.DATE) or Temporal(TemporalType.TIME) or Temporal(TemporalType.TIMESTAMP)","body":"@user9065831 actually you are wrong. Temporal is the right choice for the java.util.Date like in the code in question. Dates can be different - you must use the right annotation for the specific date. For members of the java.util package use  Temporal(TemporalType.DATE) or Temporal(TemporalType.TIME) or Temporal(TemporalType.TIMESTAMP)"}],"answers":[{"tags":[],"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1564238685,"creation_date":1564238685,"answer_id":57233186,"question_id":57231039,"body_markdown":"For stating what pattern you want when storing into a database you can use the `@DateTimeFormat` annotation.\r\n\r\n    @Entity \r\n    public class User {\r\n\r\n        @DateTimeFormat(&quot;dd/MM/yyyy&quot;)\r\n        private Date birthDay; \r\n    }\r\n\r\nThere are a lot of standard formats or you can set your own custom format.\r\n\r\n[DateTimeFormatter.class][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html","title":"Choose the format of Date of an attribute in The Entity Class","body":"<p>For stating what pattern you want when storing into a database you can use the <code>@DateTimeFormat</code> annotation.</p>\n\n<pre><code>@Entity \npublic class User {\n\n    @DateTimeFormat(\"dd/MM/yyyy\")\n    private Date birthDay; \n}\n</code></pre>\n\n<p>There are a lot of standard formats or you can set your own custom format.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">DateTimeFormatter.class</a></p>\n"},{"tags":[],"owner":{"account_id":15600842,"reputation":99,"user_id":11255038,"display_name":"George Kibira"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1607271317,"creation_date":1607271317,"answer_id":65170240,"question_id":57231039,"body_markdown":"You can use the Spring org.springframework.format.annotation.DateTimeFormat which has several date formats.\r\n\r\nin your entity anotate your birthDay property \r\n\r\n\r\n    @Entity \r\n    public class User(){\r\n\r\n    @DateTimeFormat(pattern=&quot;dd/MM/yyyy&quot;)\r\n    private Date birthDay;\r\n    }","title":"Choose the format of Date of an attribute in The Entity Class","body":"<p>You can use the Spring org.springframework.format.annotation.DateTimeFormat which has several date formats.</p>\n<p>in your entity anotate your birthDay property</p>\n<pre><code>@Entity \npublic class User(){\n\n@DateTimeFormat(pattern=&quot;dd/MM/yyyy&quot;)\nprivate Date birthDay;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3026387,"reputation":440,"user_id":2566304,"accept_rate":0,"display_name":"Andrey M. Stepanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679448861,"creation_date":1679441580,"answer_id":75807235,"question_id":57231039,"body_markdown":"I believe @DateTimeFormat has nothing to do with how the date (time) is stored in the database - it is used in combination with @RequestParam  to parse HttpRequest parameters. Like that:\r\n\r\n    @GetMapping(&quot;/getbybirthdate&quot;)\r\n    \tpublic ResponseEntity&lt;Page&lt;Client&gt;&gt; getClientByBirthdate(@RequestParam int page, @RequestParam int size, @RequestParam  @DateTimeFormat(pattern = &quot;dd.MM.yyyy&quot;) LocalDate birthdate) {\r\n    \t\treturn ResponseEntity.ok().body(clientService.getClientsByBirthdate(page,  size, birthdate));\r\n    \t}\r\n\r\nIf you try to map date/time types from java.util package then @Temporal is the right choice.\r\nIf you try to map java.time types then there&#39;s no need to explicitly specify any mapping annotation except for @Basic or @Column (that&#39;s what Baeldung advises to have - but I believe neither @Basic nor @Column is needed for mapping, they are needed only for their extra attributes)\r\n\r\nBUT\r\nif the problem is in parsing of String values as date-time then in the case of java.time types please use\r\n\r\n    LocalDate.parse(&quot;2017-11-15&quot;)\r\n    LocalTime.parse(&quot;15:30:18&quot;)\r\n    LocalDateTime.parse(&quot;2017-11-15T08:22:12&quot;)\r\n    Instant.parse(&quot;2017-11-15T08:22:12Z&quot;)\r\nor for the format other than ISO use DateTimeFormatter class:\r\n\r\n    LocalDate.from(DateTimeFormatter.ISO_LOCAL_DATE.parse(&quot;2018-03-09&quot;))\r\n\r\nand in the case of the java.util types:\r\n\r\n    new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(&quot;2017-11-15&quot;)\r\n    new SimpleDateFormat(&quot;HH:mm:ss&quot;).parse(&quot;15:30:14&quot;)\r\n    new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;).parse(&quot;2017-11-15 15:30:14.332&quot;)","title":"Choose the format of Date of an attribute in The Entity Class","body":"<p>I believe @DateTimeFormat has nothing to do with how the date (time) is stored in the database - it is used in combination with @RequestParam  to parse HttpRequest parameters. Like that:</p>\n<pre><code>@GetMapping(&quot;/getbybirthdate&quot;)\n    public ResponseEntity&lt;Page&lt;Client&gt;&gt; getClientByBirthdate(@RequestParam int page, @RequestParam int size, @RequestParam  @DateTimeFormat(pattern = &quot;dd.MM.yyyy&quot;) LocalDate birthdate) {\n        return ResponseEntity.ok().body(clientService.getClientsByBirthdate(page,  size, birthdate));\n    }\n</code></pre>\n<p>If you try to map date/time types from java.util package then @Temporal is the right choice.\nIf you try to map java.time types then there's no need to explicitly specify any mapping annotation except for @Basic or @Column (that's what Baeldung advises to have - but I believe neither @Basic nor @Column is needed for mapping, they are needed only for their extra attributes)</p>\n<p>BUT\nif the problem is in parsing of String values as date-time then in the case of java.time types please use</p>\n<pre><code>LocalDate.parse(&quot;2017-11-15&quot;)\nLocalTime.parse(&quot;15:30:18&quot;)\nLocalDateTime.parse(&quot;2017-11-15T08:22:12&quot;)\nInstant.parse(&quot;2017-11-15T08:22:12Z&quot;)\n</code></pre>\n<p>or for the format other than ISO use DateTimeFormatter class:</p>\n<pre><code>LocalDate.from(DateTimeFormatter.ISO_LOCAL_DATE.parse(&quot;2018-03-09&quot;))\n</code></pre>\n<p>and in the case of the java.util types:</p>\n<pre><code>new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(&quot;2017-11-15&quot;)\nnew SimpleDateFormat(&quot;HH:mm:ss&quot;).parse(&quot;15:30:14&quot;)\nnew SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;).parse(&quot;2017-11-15 15:30:14.332&quot;)\n</code></pre>\n"}],"owner":{"account_id":12697249,"reputation":81,"user_id":9225312,"display_name":"oumaima"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24331,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":3,"score":3,"last_activity_date":1679448861,"creation_date":1564221687,"question_id":57231039,"body_markdown":"I&#39;m using **Spring Data Jpa** , and I want an annontation to make it up on the attribute to choose the format of date. I look for some annotations but I don&#39;t found nothing. \r\nI want something like this : \r\n```\r\n@Entity \r\npublic class User(){\r\n\r\n......(format dd/mm/aa)\r\nprivate Date birthDay;\r\n}\r\n```\r\nThanks.","title":"Choose the format of Date of an attribute in The Entity Class","body":"<p>I'm using <strong>Spring Data Jpa</strong> , and I want an annontation to make it up on the attribute to choose the format of date. I look for some annotations but I don't found nothing. \nI want something like this : </p>\n\n<pre><code>@Entity \npublic class User(){\n\n......(format dd/mm/aa)\nprivate Date birthDay;\n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","spring-annotations"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1609183695,"post_id":65482913,"comment_id":115771329,"body_markdown":"This sounds like an XY problem. Why *exactly* do you want `Config2` &quot;processed&quot; after the creation of the other bean?","body":"This sounds like an XY problem. Why <i>exactly</i> do you want <code>Config2</code> &quot;processed&quot; after the creation of the other bean?"},{"owner":{"account_id":4646211,"reputation":101,"user_id":3764430,"display_name":"user3764430"},"score":0,"creation_date":1609213158,"post_id":65482913,"comment_id":115778302,"body_markdown":"@chrylis-cautiouslyoptimistic- beanA has some custom logic to update the application variables, and that should happen before the variables are assigned to beans.","body":"@chrylis-cautiouslyoptimistic- beanA has some custom logic to update the application variables, and that should happen before the variables are assigned to beans."},{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1609213388,"post_id":65482913,"comment_id":115778338,"body_markdown":"Then &quot;beanA&quot; should probably be one of the Spring initializer classes and declared as a static method.","body":"Then &quot;beanA&quot; should probably be one of the Spring initializer classes and declared as a static method."},{"owner":{"account_id":4646211,"reputation":101,"user_id":3764430,"display_name":"user3764430"},"score":0,"creation_date":1609213748,"post_id":65482913,"comment_id":115778398,"body_markdown":"beanA is depends on MongoTemplate to access MongoDB, i&#39;ll update the question with these details. thanks!!","body":"beanA is depends on MongoTemplate to access MongoDB, i&#39;ll update the question with these details. thanks!!"},{"owner":{"account_id":4646211,"reputation":101,"user_id":3764430,"display_name":"user3764430"},"score":0,"creation_date":1609215207,"post_id":65482913,"comment_id":115778589,"body_markdown":"adding below line in META-INFA/spring.factories file is working if EnvironmentVariablesApplicationContextInitializer.java is not depending on MongoDB.\norg.springframework.context.ApplicationContextInitializer=com.test.EnvironmentVariablesApplicationContextInitializer","body":"adding below line in META-INFA/spring.factories file is working if EnvironmentVariablesApplicationContextInitializer.java is not depending on MongoDB. org.springframework.context.ApplicationContextInitializer=co&zwnj;&#8203;m.test.EnvironmentVa&zwnj;&#8203;riablesApplicationCo&zwnj;&#8203;ntextInitializer"}],"owner":{"account_id":4646211,"reputation":101,"user_id":3764430,"display_name":"user3764430"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2334,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679448490,"creation_date":1609183249,"question_id":65482913,"body_markdown":"Tried to create a configuration class which depends on another bean class using `@DependsOn` annotation and later found that `@DependsOn` only work along with `@Bean` and `@Component` and **not** with `@Configuration`.\r\n\r\n```\r\n@SpringBootApplication\r\npublic class Application extends SpringBootServletInitializer {\r\n    private static final String URL_MAPPINGS = &quot;/*&quot;;\r\n    private static final Class&lt;?&gt;[] classes = new Class[]{Application.class, Config1.class};\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(classes, args);\r\n    }\r\n    \r\n    ...\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\npublic class MongoConfig {\r\n\t@Value(&quot;${db.name}&quot;)\r\n\tprivate String dbName;\r\n\t\r\n\t@Value(&quot;${db.url}&quot;)\r\n\tprivate String url;\r\n \r\n    @Override\r\n    public MongoClient mongo() {\r\n        ConnectionString connectionString = new ConnectionString(&quot;mongodb:&quot;+url);\r\n        MongoClientSettings mongoClientSettings = MongoClientSettings.builder()\r\n            .applyConnectionString(connectionString)\r\n            .build();\r\n        \r\n        return MongoClients.create(mongoClientSettings);\r\n    }\r\n    \r\n    @Bean\r\n    public MongoTemplate mongoTemplate() throws Exception {\r\n        return new MongoTemplate(mongo(), dbName);\r\n    }\r\n\r\n}\r\n```\r\n```\r\n@Import({ MongoConfig.class, Config2.class})\r\n@Configuration\r\npublic class Config1 {\r\n public BeanA beanA(MongoTemplate mongoTemplate, Environment environment) {\r\n   return new BeanA(mongoTemplate);\r\n }\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\n@ComponentScan(&quot;com.test&quot;)\r\n//this should be processed after BeanA is created, similar to @DependsOn\r\npublic class Config2 {\r\n   ...\r\n}\r\n```\r\n\r\n```\r\npublic class BeanA {\r\n private MongoTemplate mongoTemplate;\r\n\r\n public BeanA(MongoTemplate mongoTemplate, Environment environment) {\r\n   this.mongoTemplate = mongoTemplate;\r\n   this.applicationPropertySource = new ApplicationPropertySource(SOURCE_NAME);\r\n   MutablePropertySources mutablePropertySources = ((StandardEnvironment) environment).getPropertySources();\r\n   mutablePropertySources.addFirst(applicationPropertySource);\r\n   getExistingProperties().forEach((key, val) -&gt; applicationPropertySource.set(key, val));\r\n }\r\n\r\n private Map&lt;String, String&gt; getExistingProperties() {\r\n   //assume values are obtained from DB\r\n }\r\n\r\n public static class ApplicationPropertySource extends PropertiesPropertySource {\r\n    public ApplicationPropertySource(String name) {\r\n        super(name, new HashMap());\r\n    }\r\n\r\n    public Object set(String key, String value) {\r\n        return getSource().put(key, value);\r\n    }\r\n}\r\n```\r\n\r\nI like to achieve this to avoid adding `@DependsOn` annotation on all the beans in the project, is this even possible?\r\n\r\nSpring version is v1.5.12.RELEASE","title":"Spring @DependsOn annotation on @Configuration class","body":"<p>Tried to create a configuration class which depends on another bean class using <code>@DependsOn</code> annotation and later found that <code>@DependsOn</code> only work along with <code>@Bean</code> and <code>@Component</code> and <strong>not</strong> with <code>@Configuration</code>.</p>\n<pre><code>@SpringBootApplication\npublic class Application extends SpringBootServletInitializer {\n    private static final String URL_MAPPINGS = &quot;/*&quot;;\n    private static final Class&lt;?&gt;[] classes = new Class[]{Application.class, Config1.class};\n\n    public static void main(String[] args) {\n        SpringApplication.run(classes, args);\n    }\n    \n    ...\n}\n</code></pre>\n<pre><code>@Configuration\npublic class MongoConfig {\n    @Value(&quot;${db.name}&quot;)\n    private String dbName;\n    \n    @Value(&quot;${db.url}&quot;)\n    private String url;\n \n    @Override\n    public MongoClient mongo() {\n        ConnectionString connectionString = new ConnectionString(&quot;mongodb:&quot;+url);\n        MongoClientSettings mongoClientSettings = MongoClientSettings.builder()\n            .applyConnectionString(connectionString)\n            .build();\n        \n        return MongoClients.create(mongoClientSettings);\n    }\n    \n    @Bean\n    public MongoTemplate mongoTemplate() throws Exception {\n        return new MongoTemplate(mongo(), dbName);\n    }\n\n}\n</code></pre>\n<pre><code>@Import({ MongoConfig.class, Config2.class})\n@Configuration\npublic class Config1 {\n public BeanA beanA(MongoTemplate mongoTemplate, Environment environment) {\n   return new BeanA(mongoTemplate);\n }\n}\n</code></pre>\n<pre><code>@Configuration\n@ComponentScan(&quot;com.test&quot;)\n//this should be processed after BeanA is created, similar to @DependsOn\npublic class Config2 {\n   ...\n}\n</code></pre>\n<pre><code>public class BeanA {\n private MongoTemplate mongoTemplate;\n\n public BeanA(MongoTemplate mongoTemplate, Environment environment) {\n   this.mongoTemplate = mongoTemplate;\n   this.applicationPropertySource = new ApplicationPropertySource(SOURCE_NAME);\n   MutablePropertySources mutablePropertySources = ((StandardEnvironment) environment).getPropertySources();\n   mutablePropertySources.addFirst(applicationPropertySource);\n   getExistingProperties().forEach((key, val) -&gt; applicationPropertySource.set(key, val));\n }\n\n private Map&lt;String, String&gt; getExistingProperties() {\n   //assume values are obtained from DB\n }\n\n public static class ApplicationPropertySource extends PropertiesPropertySource {\n    public ApplicationPropertySource(String name) {\n        super(name, new HashMap());\n    }\n\n    public Object set(String key, String value) {\n        return getSource().put(key, value);\n    }\n}\n</code></pre>\n<p>I like to achieve this to avoid adding <code>@DependsOn</code> annotation on all the beans in the project, is this even possible?</p>\n<p>Spring version is v1.5.12.RELEASE</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":6897165,"reputation":7367,"user_id":5298696,"display_name":"CollinD"},"score":0,"creation_date":1492804448,"post_id":43550949,"comment_id":74154131,"body_markdown":"To my knowledge, `@DependsOn` does not autowire anything. Could you clarify what you&#39;re trying to do?","body":"To my knowledge, <code>@DependsOn</code> does not autowire anything. Could you clarify what you&#39;re trying to do?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1492807596,"post_id":43550949,"comment_id":74155665,"body_markdown":"Because `DependsOn` works on names not on types.","body":"Because <code>DependsOn</code> works on names not on types."},{"owner":{"account_id":8761958,"reputation":85,"user_id":6551673,"display_name":"Liyuan"},"score":0,"creation_date":1493133147,"post_id":43550949,"comment_id":74278109,"body_markdown":"Thank you for all your help. After doing some search, I found, dependsOn is only working with classes. When using dependsOn we need give code a classId, because Spring has to instantiate that class.","body":"Thank you for all your help. After doing some search, I found, dependsOn is only working with classes. When using dependsOn we need give code a classId, because Spring has to instantiate that class."},{"owner":{"account_id":284086,"reputation":793,"user_id":581966,"accept_rate":75,"display_name":"John Calcote"},"score":0,"creation_date":1563295493,"post_id":43550949,"comment_id":100649326,"body_markdown":"@M.Deinum - DependsOn works with class names too - it just doesn&#39;t work with interfaces. You use it with bean names when you&#39;re using it with bean Configuration. You use it with class names when you annotate components with it. This is the problem we get into when there are 20 sites out there that all copy each other&#39;s examples - by the time you&#39;re done re-reading all the copies, you begin to believe that&#39;s the only way to do something.","body":"@M.Deinum - DependsOn works with class names too - it just doesn&#39;t work with interfaces. You use it with bean names when you&#39;re using it with bean Configuration. You use it with class names when you annotate components with it. This is the problem we get into when there are 20 sites out there that all copy each other&#39;s examples - by the time you&#39;re done re-reading all the copies, you begin to believe that&#39;s the only way to do something."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1563342235,"post_id":43550949,"comment_id":100662375,"body_markdown":"`@DependsOn` doesn&#39;t work with classnames, it works with beannames only. The default in Spring is that the classname is turned into a beanname (check the default `BeanNameGenerator` implementation for that). And it uses the simple classname NOT the FQN.","body":"<code>@DependsOn</code> doesn&#39;t work with classnames, it works with beannames only. The default in Spring is that the classname is turned into a beanname (check the default <code>BeanNameGenerator</code> implementation for that). And it uses the simple classname NOT the FQN."}],"answers":[{"tags":[],"owner":{"account_id":299683,"reputation":331,"user_id":606405,"display_name":"Svante"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542256976,"creation_date":1492807306,"answer_id":43551688,"question_id":43550949,"body_markdown":"For simple autowiring, use `@Autowired` either on field or constructor. Starting with **Spring 4.3** you can omit the `@Autowired` when using constructor injection.\r\n\r\n    @Component\r\n    class A implement B {\r\n    }\r\n\r\n    @Component\r\n    class C {\r\n        private final B b;\r\n        \r\n        public C(B b) {\r\n            this.b = b;\r\n        }\r\n    }","title":"Why Spring DependsOn annotation cannot use to auto wire an interface","body":"<p>For simple autowiring, use <code>@Autowired</code> either on field or constructor. Starting with <strong>Spring 4.3</strong> you can omit the <code>@Autowired</code> when using constructor injection.</p>\n\n<pre><code>@Component\nclass A implement B {\n}\n\n@Component\nclass C {\n    private final B b;\n\n    public C(B b) {\n        this.b = b;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":284086,"reputation":793,"user_id":581966,"accept_rate":75,"display_name":"John Calcote"},"score":2,"creation_date":1563295194,"post_id":43553487,"comment_id":100649202,"body_markdown":"Legacy code is not the only example of good spring code requiring DependsOn. Consider an http service component that uses jersey ioc with spring. If you don&#39;t want your application to &quot;open for business&quot; before some data acquisition component has completed its initialization and data gathering process, then you might use DependsOn on your http service component to indicate that it depends on this data acquisition component. There&#39;s no direct spring dependency, but you still need the server to not start until after the data is ready.","body":"Legacy code is not the only example of good spring code requiring DependsOn. Consider an http service component that uses jersey ioc with spring. If you don&#39;t want your application to &quot;open for business&quot; before some data acquisition component has completed its initialization and data gathering process, then you might use DependsOn on your http service component to indicate that it depends on this data acquisition component. There&#39;s no direct spring dependency, but you still need the server to not start until after the data is ready."},{"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"score":1,"creation_date":1565357864,"post_id":43553487,"comment_id":101340557,"body_markdown":"@John Calcote This case is covered by the `SmartInitializingSingleton` interface https://stackoverflow.com/a/48771885/355438","body":"@John Calcote This case is covered by the <code>SmartInitializingSingleton</code> interface <a href=\"https://stackoverflow.com/a/48771885/355438\">stackoverflow.com/a/48771885/355438</a>"},{"owner":{"account_id":197528,"reputation":11240,"user_id":441662,"accept_rate":80,"display_name":"Benny Bottema"},"score":0,"creation_date":1621498100,"post_id":43553487,"comment_id":119515472,"body_markdown":"Rather pedantic answer. There are use cases of course that warrant the use of this annotation, otherwise it wouldn&#39;t be available. One example that comes to mind is a bean that depends on an external server to be available, but which you might want to mock/stub during a (cucumber) test. In which case the server isn&#39;t already available because you spin it up during the test (examples: embedded DB, JMS, FTP, MailServer, etc. etc.)","body":"Rather pedantic answer. There are use cases of course that warrant the use of this annotation, otherwise it wouldn&#39;t be available. One example that comes to mind is a bean that depends on an external server to be available, but which you might want to mock/stub during a (cucumber) test. In which case the server isn&#39;t already available because you spin it up during the test (examples: embedded DB, JMS, FTP, MailServer, etc. etc.)"},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":2,"creation_date":1621531319,"post_id":43553487,"comment_id":119530981,"body_markdown":"@BennyBottema I built spring test infrastructure for several large Spring based projects, and I still have not used DependsOn. If you depend on external resources such as testcontainers `JdbcDatabaseContainer` I prefer to link them to Spring beans, so the dependency is explicit. If I need to populate an external resource I will do so using SmartLifeCyle beans, so there is a clear separation of the bean instantiation phase, and lifecycle start, where you can interact with the resources, and start background threads.","body":"@BennyBottema I built spring test infrastructure for several large Spring based projects, and I still have not used DependsOn. If you depend on external resources such as testcontainers <code>JdbcDatabaseContainer</code> I prefer to link them to Spring beans, so the dependency is explicit. If I need to populate an external resource I will do so using SmartLifeCyle beans, so there is a clear separation of the bean instantiation phase, and lifecycle start, where you can interact with the resources, and start background threads."}],"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"comment_count":4,"down_vote_count":2,"up_vote_count":11,"is_accepted":true,"score":9,"last_activity_date":1679447839,"creation_date":1492817649,"answer_id":43553487,"question_id":43550949,"body_markdown":"**In general `DependsOn` should never be used.** If you ever need to it, you have probably done something wrong, or you have an extreme corner case. I have used Spring since 2006 and have not needed it yet.\r\n\r\nThe [JavaDoc](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html) says \r\n\r\n&gt;  Used infrequently in cases where a bean\r\n   **does not explicitly depend on another through properties or constructor arguments,**\r\n   but rather depends on the side effects of another bean&#39;s initialization.\r\n\r\nThis basically means you only use `DependsOn` if you or some one else have written bad code. For instance one beans constructor creates a resource on disk that another bean needs when constructed. Springs IoC container and declarative wiring lets you control dependencies between beans, but _in the_ **extremely rare case** where some legacy code has undeclared dependencies `DependsOn` lets you control the order unrelated spring beans are constructed.","title":"Why Spring DependsOn annotation cannot use to auto wire an interface","body":"<p><strong>In general <code>DependsOn</code> should never be used.</strong> If you ever need to it, you have probably done something wrong, or you have an extreme corner case. I have used Spring since 2006 and have not needed it yet.</p>\n<p>The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html\" rel=\"nofollow noreferrer\">JavaDoc</a> says</p>\n<blockquote>\n<p>Used infrequently in cases where a bean\n<strong>does not explicitly depend on another through properties or constructor arguments,</strong>\nbut rather depends on the side effects of another bean's initialization.</p>\n</blockquote>\n<p>This basically means you only use <code>DependsOn</code> if you or some one else have written bad code. For instance one beans constructor creates a resource on disk that another bean needs when constructed. Springs IoC container and declarative wiring lets you control dependencies between beans, but <em>in the</em> <strong>extremely rare case</strong> where some legacy code has undeclared dependencies <code>DependsOn</code> lets you control the order unrelated spring beans are constructed.</p>\n"},{"tags":[],"owner":{"account_id":1090652,"reputation":4072,"user_id":1085360,"accept_rate":73,"display_name":"Chris Sim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578922828,"creation_date":1571234412,"answer_id":58415173,"question_id":43550949,"body_markdown":"I had same problem when I tried to used depends on, but after doing my research I found that the best way is to remove the dependency of B in class C constructor and use this logic in a method `init` annotated by `@PostConstruct`, so after initializing all the constructors this method will be executed.\r\nHope my answer helps you.","title":"Why Spring DependsOn annotation cannot use to auto wire an interface","body":"<p>I had same problem when I tried to used depends on, but after doing my research I found that the best way is to remove the dependency of B in class C constructor and use this logic in a method <code>init</code> annotated by <code>@PostConstruct</code>, so after initializing all the constructors this method will be executed.\nHope my answer helps you.</p>\n"}],"owner":{"account_id":8761958,"reputation":85,"user_id":6551673,"display_name":"Liyuan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11534,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":43553487,"answer_count":3,"score":4,"last_activity_date":1679447839,"creation_date":1492804326,"question_id":43550949,"body_markdown":"When I&#39;m working on write some spring code, I&#39;m using spring 4 with class and annotation-config. I have declared a bean implements an interface as a component. And I&#39;m trying to make another bean to depends on it with its interface time. But it doesn&#39;t work because spring throws an error with no bean found in that name. I think it may because depends on is only work with concretive class auto wire, but I don&#39;t know why it set in this way? Is anyone could explain why depends on annotation don&#39;t allow type auto wire to an interface? \r\n\r\nThe simple sample code is like this\r\n\r\n    @Component\r\n    class A implement B{\r\n    }\r\n\r\n    @Component\r\n    @DependsOn(&quot;B&quot;)\r\n    class C {\r\n    }\r\nthe code above cannot work unless I change \r\n    `@DependsOn(&quot;B&quot;)` to `@DependsOn(&quot;A&quot;)` \r\n","title":"Why Spring DependsOn annotation cannot use to auto wire an interface","body":"<p>When I'm working on write some spring code, I'm using spring 4 with class and annotation-config. I have declared a bean implements an interface as a component. And I'm trying to make another bean to depends on it with its interface time. But it doesn't work because spring throws an error with no bean found in that name. I think it may because depends on is only work with concretive class auto wire, but I don't know why it set in this way? Is anyone could explain why depends on annotation don't allow type auto wire to an interface? </p>\n\n<p>The simple sample code is like this</p>\n\n<pre><code>@Component\nclass A implement B{\n}\n\n@Component\n@DependsOn(\"B\")\nclass C {\n}\n</code></pre>\n\n<p>the code above cannot work unless I change \n    <code>@DependsOn(\"B\")</code> to <code>@DependsOn(\"A\")</code> </p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3462098,"reputation":42531,"user_id":2898867,"accept_rate":80,"display_name":"Angular University"},"score":0,"creation_date":1393968407,"post_id":22178735,"comment_id":33671837,"body_markdown":"can you post the bean definitions (Java and / or XML) of the configData bean, and a bean that should be initialized after it as an example?","body":"can you post the bean definitions (Java and / or XML) of the configData bean, and a bean that should be initialized after it as an example?"},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1393969188,"post_id":22178735,"comment_id":33672317,"body_markdown":"Ok, but these will only be skeletons, and what you&#39;ll see will be obvious from my description.","body":"Ok, but these will only be skeletons, and what you&#39;ll see will be obvious from my description."},{"owner":{"account_id":40862,"reputation":23767,"user_id":118587,"accept_rate":75,"display_name":"Grzegorz Oledzki"},"score":0,"creation_date":1393970126,"post_id":22178735,"comment_id":33672902,"body_markdown":"As to not seeing Spring debug messages. Have you checked you don&#39;t have a global THRESHOLD set or a one for appender? In other words - do you see other DEBUG messages?","body":"As to not seeing Spring debug messages. Have you checked you don&#39;t have a global THRESHOLD set or a one for appender? In other words - do you see other DEBUG messages?"},{"owner":{"account_id":40862,"reputation":23767,"user_id":118587,"accept_rate":75,"display_name":"Grzegorz Oledzki"},"score":1,"creation_date":1393970238,"post_id":22178735,"comment_id":33672969,"body_markdown":"By the way - it would help everyone (and actually yourself) a lot if you isolated a working example showing the problem. I know you have made some copy&amp;pasting, but we don&#39;t see it all and cannot run ourselves.","body":"By the way - it would help everyone (and actually yourself) a lot if you isolated a working example showing the problem. I know you have made some copy&amp;pasting, but we don&#39;t see it all and cannot run ourselves."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1393971915,"post_id":22178735,"comment_id":33673857,"body_markdown":"Acknowledged on the working example comment.  I now have a workaround for this, but I&#39;d still like to solve this.  Concerning the log messages, this is befuddling.  I&#39;ve set the root logger to debug, and it shows this in my console log, but I still don&#39;t see DEBUG messages for anything.","body":"Acknowledged on the working example comment.  I now have a workaround for this, but I&#39;d still like to solve this.  Concerning the log messages, this is befuddling.  I&#39;ve set the root logger to debug, and it shows this in my console log, but I still don&#39;t see DEBUG messages for anything."},{"owner":{"account_id":372736,"reputation":2561,"user_id":721956,"accept_rate":54,"display_name":"Askar Kalykov"},"score":0,"creation_date":1429092102,"post_id":22178735,"comment_id":47434488,"body_markdown":"this probably should be named as `@PartiallyDependsOn`","body":"this probably should be named as <code>@PartiallyDependsOn</code>"}],"answers":[{"comments":[{"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"score":2,"creation_date":1518695838,"post_id":22205206,"comment_id":84616057,"body_markdown":"Thanks for adding the answer again, I&#39;ve been looking for this solution for two days!","body":"Thanks for adding the answer again, I&#39;ve been looking for this solution for two days!"},{"owner":{"account_id":334861,"reputation":18962,"user_id":661589,"accept_rate":79,"display_name":"Gavriel"},"score":0,"creation_date":1672103530,"post_id":22205206,"comment_id":132221905,"body_markdown":"still doesn&#39;t work :(","body":"still doesn&#39;t work :("},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1672124614,"post_id":22205206,"comment_id":132224333,"body_markdown":"I suggest you repost your question with everything you know so far.","body":"I suggest you repost your question with everything you know so far."}],"tags":[],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":3,"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1679447614,"creation_date":1394041532,"answer_id":22205206,"question_id":22178735,"body_markdown":"(From someone else&#39;s correct but now deleted answer)\r\n\r\nThe `@DependsOn` contract only guarantees that the bean has been constructed and properties have been set. This will not guarantee that any `@PostConstruct` methods have been called.\r\n\r\nThe way to get this to work is to have the _dependee_ class (the class that others depend on) implement the `InitializingBean` interface, which requires implementing the `afterPropertiesSet()` method.  I put the original body of my `init()` method into this method.  I verified that this is now executed before any of the classes that depend on this.\r\n\r\nAnother thing that was mentioned in the original answer is that if I had defined my _dependee_ bean in XML and used the `init-method` property, this WOULD have executed before any of the classes that depend on this.  I didn&#39;t verify this.","title":"Why did Spring ignore my @DependsOn annotation?","body":"<p>(From someone else's correct but now deleted answer)</p>\n<p>The <code>@DependsOn</code> contract only guarantees that the bean has been constructed and properties have been set. This will not guarantee that any <code>@PostConstruct</code> methods have been called.</p>\n<p>The way to get this to work is to have the <em>dependee</em> class (the class that others depend on) implement the <code>InitializingBean</code> interface, which requires implementing the <code>afterPropertiesSet()</code> method.  I put the original body of my <code>init()</code> method into this method.  I verified that this is now executed before any of the classes that depend on this.</p>\n<p>Another thing that was mentioned in the original answer is that if I had defined my <em>dependee</em> bean in XML and used the <code>init-method</code> property, this WOULD have executed before any of the classes that depend on this.  I didn't verify this.</p>\n"},{"comments":[{"owner":{"account_id":1338287,"reputation":1130,"user_id":1280511,"accept_rate":89,"display_name":"Chuck"},"score":0,"creation_date":1623666294,"post_id":26296006,"comment_id":120134577,"body_markdown":"But what other levels are there?","body":"But what other levels are there?"}],"tags":[],"owner":{"account_id":4344594,"reputation":106,"user_id":3546953,"display_name":"FredEtHop"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1412932890,"creation_date":1412932890,"answer_id":26296006,"question_id":22178735,"body_markdown":"I also encoutered the same problem, but still not properly resolved. As a part of a solution Spring documentation says:\r\n\r\n&gt; *&quot;Using DependsOn at the class level has no effect unless component-scanning is being used.&quot;*\r\n\r\nThis is the reason why the @dependsOn annotation has no effect.","title":"Why did Spring ignore my @DependsOn annotation?","body":"<p>I also encoutered the same problem, but still not properly resolved. As a part of a solution Spring documentation says:</p>\n\n<blockquote>\n  <p><em>\"Using DependsOn at the class level has no effect unless component-scanning is being used.\"</em></p>\n</blockquote>\n\n<p>This is the reason why the @dependsOn annotation has no effect.</p>\n"}],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36186,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":22205206,"answer_count":2,"score":24,"last_activity_date":1679447614,"creation_date":1393953825,"question_id":22178735,"body_markdown":"I&#39;m using Spring 3.1.3 for a webapp, using XML configuration with component scanning.\r\n\r\nI realized that one of the scanned components has to be initialized before several others.  On all the classes that need post-construct initialization, I have a `@PostConstruct` annotation on a method.\r\n\r\nTo set up the dependency order, I changed `@Component` to `@Component(&quot;configData&quot;)` on the class that needs to be post-constructed before the others.  I then added `@DependsOn(&quot;configData&quot;)` just before each class definition that needs to be post-constructed **AFTER** the _configData_ bean.\r\n\r\nFrom what I&#39;ve read, this is all I need to enforce the dependency order.\r\n\r\nI then built everything, set my breakpoints, and started up the app.  I expected to hit the breakpoint in the _configData_ bean before any of the dependent beans.  This isn&#39;t what happened.  The first breakpoint was in the `init` method of one of the dependent beans.\r\n\r\nI then changed my `log4j.xml` file to set _debug_ as the logging level for `org.springframework` and reran my test.  The breakpoint behavior was the same, and my logging didn&#39;t show any debug information about Spring initialization (I have debugging on for log4j initialization itself, so I confirmed that I had _DEBUG_ set for `org.springframework`).\r\n\r\nWhat might I be missing?\r\n\r\n**Update:**\r\n\r\nIf it matters, here are a couple of skeleton examples of what I&#39;m doing here.\r\n\r\n    @Component(&quot;configData&quot;)\r\n    public class ConfigData {\r\n        ....\r\n        @PostConstruct\r\n        public void init() {\r\n            ....\r\n        }\r\n    }\r\n\r\n    @Component\r\n    @DependsOn(&quot;configData&quot;)\r\n    public class ClassDependentOnConfigData extends BaseClass {\r\n        ....\r\n        @Override\r\n        @PostConstruct\r\n        public void init() {\r\n            super.init();\r\n            ....\r\n        }\r\n    }\r\n\r\nTo reiterate, what I&#39;m finding at runtime is that the `init()` method in `ClassDependentOnConfigData` is being called by Spring before the `init()` method in `ConfigData`.\r\n\r\nNote also that `BaseClass` has an `@Autowired` for `ConfigData`.","title":"Why did Spring ignore my @DependsOn annotation?","body":"<p>I'm using Spring 3.1.3 for a webapp, using XML configuration with component scanning.</p>\n<p>I realized that one of the scanned components has to be initialized before several others.  On all the classes that need post-construct initialization, I have a <code>@PostConstruct</code> annotation on a method.</p>\n<p>To set up the dependency order, I changed <code>@Component</code> to <code>@Component(&quot;configData&quot;)</code> on the class that needs to be post-constructed before the others.  I then added <code>@DependsOn(&quot;configData&quot;)</code> just before each class definition that needs to be post-constructed <strong>AFTER</strong> the <em>configData</em> bean.</p>\n<p>From what I've read, this is all I need to enforce the dependency order.</p>\n<p>I then built everything, set my breakpoints, and started up the app.  I expected to hit the breakpoint in the <em>configData</em> bean before any of the dependent beans.  This isn't what happened.  The first breakpoint was in the <code>init</code> method of one of the dependent beans.</p>\n<p>I then changed my <code>log4j.xml</code> file to set <em>debug</em> as the logging level for <code>org.springframework</code> and reran my test.  The breakpoint behavior was the same, and my logging didn't show any debug information about Spring initialization (I have debugging on for log4j initialization itself, so I confirmed that I had <em>DEBUG</em> set for <code>org.springframework</code>).</p>\n<p>What might I be missing?</p>\n<p><strong>Update:</strong></p>\n<p>If it matters, here are a couple of skeleton examples of what I'm doing here.</p>\n<pre><code>@Component(&quot;configData&quot;)\npublic class ConfigData {\n    ....\n    @PostConstruct\n    public void init() {\n        ....\n    }\n}\n\n@Component\n@DependsOn(&quot;configData&quot;)\npublic class ClassDependentOnConfigData extends BaseClass {\n    ....\n    @Override\n    @PostConstruct\n    public void init() {\n        super.init();\n        ....\n    }\n}\n</code></pre>\n<p>To reiterate, what I'm finding at runtime is that the <code>init()</code> method in <code>ClassDependentOnConfigData</code> is being called by Spring before the <code>init()</code> method in <code>ConfigData</code>.</p>\n<p>Note also that <code>BaseClass</code> has an <code>@Autowired</code> for <code>ConfigData</code>.</p>\n"},{"tags":["java","java-8","stream","functional-interface"],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1679473473,"post_id":75807654,"comment_id":133726510,"body_markdown":"Of course, you can also use `Comparator&lt;String&gt; comparator = (emp1, emp2) -&gt; emp2.compareTo(emp1);` to get a reverse comparison in the first place. Or just `Comparator&lt;String&gt; comparator = Comparator.reverseOrder();` instead of reinventing the wheel.","body":"Of course, you can also use <code>Comparator&lt;String&gt; comparator = (emp1, emp2) -&gt; emp2.compareTo(emp1);</code> to get a reverse comparison in the first place. Or just <code>Comparator&lt;String&gt; comparator = Comparator.reverseOrder();</code> instead of reinventing the wheel."},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1679562850,"post_id":75807654,"comment_id":133744872,"body_markdown":"Explicit lambda `(emp1,emp2)-&gt;emp1.compareTo(emp2)` could be replaced by reference to instance method `String::compareTo`","body":"Explicit lambda <code>(emp1,emp2)-&gt;emp1.compareTo(emp2)</code> could be replaced by reference to instance method <code>String::compareTo</code>"},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1679563896,"post_id":75807654,"comment_id":133745145,"body_markdown":"You may also just call `.sort(Comparator.reverseOrder())` to get the reversed natural ordering.","body":"You may also just call <code>.sort(Comparator.reverseOrder())</code> to get the reversed natural ordering."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679447531,"creation_date":1679447186,"answer_id":75807654,"question_id":75807635,"body_markdown":"A lambda is just a more concise way to generate an implementation of a functional interface. It can only be used where it&#39;s clear what type the lambda should be conforming to. In the context of the expression `((emp1, emp2) -&gt; emp1.compareTo(emp2)).reversed()`, the lambda is not immediately being assigned to a variable or being passed to a function (which would allow its type to be inferred), but is a subexpression of a larger expression. This causes the issue.\r\n\r\nYou can make the type explicit by casting:\r\n\r\n```java\r\nvar comparator = ((Comparator&lt;String&gt;)(emp1, emp2) -&gt; emp1.compareTo(emp2)).reversed();\r\n```\r\n\r\nFrom the [Java tutorial](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html#target-typing):\r\n\r\n&lt;blockquote&gt; To determine the type of a lambda expression, the Java compiler uses the target type of the context or situation in which the lambda expression was found. It follows that you can only use lambda expressions in situations in which the Java compiler can determine a target type:\r\n\r\n- Variable declarations\r\n- Assignments\r\n- Return statements\r\n- Array initializers\r\n- Method or constructor arguments\r\n- Lambda expression bodies\r\n- Conditional expressions, `?:`\r\n- Cast expressions\r\n&lt;/blockquote&gt;","title":"Comparator reverse string java 8 compilation error","body":"<p>A lambda is just a more concise way to generate an implementation of a functional interface. It can only be used where it's clear what type the lambda should be conforming to. In the context of the expression <code>((emp1, emp2) -&gt; emp1.compareTo(emp2)).reversed()</code>, the lambda is not immediately being assigned to a variable or being passed to a function (which would allow its type to be inferred), but is a subexpression of a larger expression. This causes the issue.</p>\n<p>You can make the type explicit by casting:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var comparator = ((Comparator&lt;String&gt;)(emp1, emp2) -&gt; emp1.compareTo(emp2)).reversed();\n</code></pre>\n<p>From the <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html#target-typing\" rel=\"nofollow noreferrer\">Java tutorial</a>:</p>\n<blockquote> To determine the type of a lambda expression, the Java compiler uses the target type of the context or situation in which the lambda expression was found. It follows that you can only use lambda expressions in situations in which the Java compiler can determine a target type:\n<ul>\n<li>Variable declarations</li>\n<li>Assignments</li>\n<li>Return statements</li>\n<li>Array initializers</li>\n<li>Method or constructor arguments</li>\n<li>Lambda expression bodies</li>\n<li>Conditional expressions, <code>?:</code></li>\n<li>Cast expressions</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":1262796,"reputation":2119,"user_id":1228301,"accept_rate":57,"display_name":"vicky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75807654,"answer_count":1,"score":0,"last_activity_date":1679447531,"creation_date":1679446852,"question_id":75807635,"body_markdown":"Here is the Code Snipped which is throwing an wired compilation error in java 8 at Line number 2. \r\n\r\n       List&lt;Employee&gt; employees = getEmployees();\r\n       /*Line no:2*/  Comparator&lt;String&gt; comparator = ((emp1, emp2) -&gt; emp1.compareTo(emp2)).reversed();   // ERROR  The target type of this expression must be a functional interface\r\n       return employees.stream().map(emp -&gt; emp.getName()).sorted(comparator)\r\n    \t\t\t\t.collect(Collectors.toList());\r\n\r\nbut the same code compile and runs correctly at line number 3\r\n      \t\r\n\r\n    List&lt;Employee&gt; employees = getEmployees();\r\n    Comparator&lt;String&gt; comparator = ((emp1, emp2) -&gt; emp1.compareTo(emp2));\r\n    /* Line no:3 */  comparator = comparator.reversed(); // NO ERROR GENERATED\r\n    return employees.stream().map(emp -&gt; emp.getName()).sorted(comparator)\r\n    \t\t\t\t.collect(Collectors.toList());\r\n\r\nCan some one explain me what&#39;s happening behind the scene and why this error occurs?","title":"Comparator reverse string java 8 compilation error","body":"<p>Here is the Code Snipped which is throwing an wired compilation error in java 8 at Line number 2.</p>\n<pre><code>   List&lt;Employee&gt; employees = getEmployees();\n   /*Line no:2*/  Comparator&lt;String&gt; comparator = ((emp1, emp2) -&gt; emp1.compareTo(emp2)).reversed();   // ERROR  The target type of this expression must be a functional interface\n   return employees.stream().map(emp -&gt; emp.getName()).sorted(comparator)\n                .collect(Collectors.toList());\n</code></pre>\n<p>but the same code compile and runs correctly at line number 3</p>\n<pre><code>List&lt;Employee&gt; employees = getEmployees();\nComparator&lt;String&gt; comparator = ((emp1, emp2) -&gt; emp1.compareTo(emp2));\n/* Line no:3 */  comparator = comparator.reversed(); // NO ERROR GENERATED\nreturn employees.stream().map(emp -&gt; emp.getName()).sorted(comparator)\n                .collect(Collectors.toList());\n</code></pre>\n<p>Can some one explain me what's happening behind the scene and why this error occurs?</p>\n"},{"tags":["java","apache-spark","apache-kafka","spark-structured-streaming"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1679444789,"post_id":75797241,"comment_id":133722949,"body_markdown":"You do need to use `spark-submit`, but with your **shaded** JAR, which should have Kafka... You should remove `spark.jars` if you are also trying to download the same with `spark.jars.packages` (these properties are only used if you use `spark-submit`)","body":"You do need to use <code>spark-submit</code>, but with your <b>shaded</b> JAR, which should have Kafka... You should remove <code>spark.jars</code> if you are also trying to download the same with <code>spark.jars.packages</code> (these properties are only used if you use <code>spark-submit</code>)"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1679444924,"post_id":75797241,"comment_id":133722967,"body_markdown":"Also, `mvnrepository` is only an index, not a valid Maven repo address","body":"Also, <code>mvnrepository</code> is only an index, not a valid Maven repo address"},{"owner":{"account_id":28071125,"reputation":1,"user_id":21443693,"display_name":"유연수"},"score":0,"creation_date":1679544861,"post_id":75797241,"comment_id":133741967,"body_markdown":"@OneCricketeer Thanks for commenting...  I don&#39;t think I understand Spark properly. Isn&#39;t Spark-submit a concept of distributing developed programs to Spark? I want to connect Spark on Java and stream, is this impossible?","body":"@OneCricketeer Thanks for commenting...  I don&#39;t think I understand Spark properly. Isn&#39;t Spark-submit a concept of distributing developed programs to Spark? I want to connect Spark on Java and stream, is this impossible?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1679761624,"post_id":75797241,"comment_id":133780382,"body_markdown":"`spark-submit` reads all the necessary Spark classpath libraries and properties to run the code. You can make Intellij run this for you, but using an IDE is not how you&#39;d run Spark in a production environment. You&#39;d create a JAR instead","body":"<code>spark-submit</code> reads all the necessary Spark classpath libraries and properties to run the code. You can make Intellij run this for you, but using an IDE is not how you&#39;d run Spark in a production environment. You&#39;d create a JAR instead"}],"owner":{"account_id":28071125,"reputation":1,"user_id":21443693,"display_name":"유연수"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679444934,"creation_date":1679371546,"question_id":75797241,"body_markdown":"[spark structured streaming kafka in java](https://i.stack.imgur.com/4LjhI.png)\r\n\r\nThis is the part that connects to Spark and receives data through streaming.\r\n\r\n```\r\n       &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;filters&gt;\r\n                                &lt;!-- This filter is to workaround the problem caused by included signed jars.\r\n                                     java.lang.SecurityException: Invalid signature file digest for Manifest main attributes\r\n                                --&gt;\r\n                                &lt;filter&gt;\r\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                                    &lt;excludes&gt;\r\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                                    &lt;/excludes&gt;\r\n                                &lt;/filter&gt;\r\n                            &lt;/filters&gt;\r\n                            &lt;transformers&gt;\r\n                                &lt;transformer\r\n                                        implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                                    &lt;mainClass&gt;com.clamos.io.collect.CollectApplication&lt;/mainClass&gt;\r\n                                &lt;/transformer&gt;\r\n                                &lt;transformer\r\n                                        implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                                    &lt;resource&gt;\r\n                                        META-INF/services/org.apache.spark.sql.sources.DataSourceRegister\r\n                                    &lt;/resource&gt;\r\n                                &lt;/transformer&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n                            &lt;/transformers&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\npom.xml\r\n\r\n[spark version](https://i.stack.imgur.com/GTx3h.png)\r\n\r\nspark version  : 3.3.0 \r\n\r\njava version  : 1.8\r\n\r\n\\*\\*\r\nWe are developing logic to receive and check data with spark streaming in kafka. Most people have been advised to use spark-submit. However, I would like it to be applied directly from the source.\r\nHow can I do it?\\*\\*","title":"org.apache.spark.sql.AnalysisException: Failed to find data source: kafka","body":"<p><a href=\"https://i.stack.imgur.com/4LjhI.png\" rel=\"nofollow noreferrer\">spark structured streaming kafka in java</a></p>\n<p>This is the part that connects to Spark and receives data through streaming.</p>\n<pre><code>       &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;filters&gt;\n                                &lt;!-- This filter is to workaround the problem caused by included signed jars.\n                                     java.lang.SecurityException: Invalid signature file digest for Manifest main attributes\n                                --&gt;\n                                &lt;filter&gt;\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/filter&gt;\n                            &lt;/filters&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                        implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;com.clamos.io.collect.CollectApplication&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                                &lt;transformer\n                                        implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                                    &lt;resource&gt;\n                                        META-INF/services/org.apache.spark.sql.sources.DataSourceRegister\n                                    &lt;/resource&gt;\n                                &lt;/transformer&gt;\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>pom.xml</p>\n<p><a href=\"https://i.stack.imgur.com/GTx3h.png\" rel=\"nofollow noreferrer\">spark version</a></p>\n<p>spark version  : 3.3.0</p>\n<p>java version  : 1.8</p>\n<p>**\nWe are developing logic to receive and check data with spark streaming in kafka. Most people have been advised to use spark-submit. However, I would like it to be applied directly from the source.\nHow can I do it?**</p>\n"},{"tags":["java","out-of-memory","threadpool","windows-server"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1534931628,"post_id":51963635,"comment_id":90878400,"body_markdown":"`pool-1-thread-1395` doesn&#39;t mean there&#39;s a limit of `1395` threads. All you know is that `thread-1395` in `pool-1` encountered that error. There may be more threads in the pool (or less), and there can be other pools too. If the code is careless with threads, then you might be fighting a losing battle, as increasing anything would just postpone the problem. You should be contacting the developers of that code and talking to them about it.","body":"<code>pool-1-thread-1395</code> doesn&#39;t mean there&#39;s a limit of <code>1395</code> threads. All you know is that <code>thread-1395</code> in <code>pool-1</code> encountered that error. There may be more threads in the pool (or less), and there can be other pools too. If the code is careless with threads, then you might be fighting a losing battle, as increasing anything would just postpone the problem. You should be contacting the developers of that code and talking to them about it."},{"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"score":0,"creation_date":1534937244,"post_id":51963635,"comment_id":90881382,"body_markdown":"Full error message is &quot;pool-1-thread-1395&quot; java.lang.OutOfMemoryError: unable to create new native thread. Yes, you are right. I still want to know how to increase limitation of thread on windows. Because the developer has disappear  for years. Thank you.","body":"Full error message is &quot;pool-1-thread-1395&quot; java.lang.OutOfMemoryError: unable to create new native thread. Yes, you are right. I still want to know how to increase limitation of thread on windows. Because the developer has disappear  for years. Thank you."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1534937550,"post_id":51963635,"comment_id":90881549,"body_markdown":"I think you&#39;re trying to solve the wrong problem. You can fit tens of thousands of threads in `10GB`, so that&#39;s not your problem. You should be analyzing the Java software and seeing what it&#39;s doing. What software are you running if I may ask?","body":"I think you&#39;re trying to solve the wrong problem. You can fit tens of thousands of threads in <code>10GB</code>, so that&#39;s not your problem. You should be analyzing the Java software and seeing what it&#39;s doing. What software are you running if I may ask?"},{"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"score":0,"creation_date":1535005073,"post_id":51963635,"comment_id":90908440,"body_markdown":"I&#39;m running a small game server. I found that I can see total running threads amount from task manager. It shows 1365 threads now. If I could increase thread limit to at lease 10k. That might temporary solve my problem.","body":"I&#39;m running a small game server. I found that I can see total running threads amount from task manager. It shows 1365 threads now. If I could increase thread limit to at lease 10k. That might temporary solve my problem."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1535006002,"post_id":51963635,"comment_id":90908844,"body_markdown":"I don&#39;t really think your problem is with thread limits, but I don&#39;t work with Windows servers often these days either, so I can&#39;t really help you on that account. My comments were from a Java point of view, but you don&#39;t seem to want to concentrate on that side. Also, if you see 1365 running threads in the task manager, that doesn&#39;t tell you anything about the max amount of threads. It sounds like you&#39;re jumping to conclusions based on numbers you see, thinking they mean more than they do (like the thread named `pool-1-thread-1395`). Anyway, good luck.","body":"I don&#39;t really think your problem is with thread limits, but I don&#39;t work with Windows servers often these days either, so I can&#39;t really help you on that account. My comments were from a Java point of view, but you don&#39;t seem to want to concentrate on that side. Also, if you see 1365 running threads in the task manager, that doesn&#39;t tell you anything about the max amount of threads. It sounds like you&#39;re jumping to conclusions based on numbers you see, thinking they mean more than they do (like the thread named <code>pool-1-thread-1395</code>). Anyway, good luck."},{"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"score":0,"creation_date":1535006187,"post_id":51963635,"comment_id":90908945,"body_markdown":"Before I moved the game server to GCP, I never encounter the issue like that. I think there are some limits on windows server 2012(was windows 7). I have tried to change windows server virtual memory from 1024mb to 2048mb, the error message hasn&#39;t been showing up almost 2 days. I will  keep watching the server log see if the error still happen. Before that, I just want to know what is the right way to increase thread limit for windows server 2012.","body":"Before I moved the game server to GCP, I never encounter the issue like that. I think there are some limits on windows server 2012(was windows 7). I have tried to change windows server virtual memory from 1024mb to 2048mb, the error message hasn&#39;t been showing up almost 2 days. I will  keep watching the server log see if the error still happen. Before that, I just want to know what is the right way to increase thread limit for windows server 2012."},{"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"score":0,"creation_date":1535006458,"post_id":51963635,"comment_id":90909072,"body_markdown":"Yes, rewrite source code is the best way to do, but I can&#39;t solve the problem from java side. What I have is only an executable file(game.exe). There is nothing I can do with source code.","body":"Yes, rewrite source code is the best way to do, but I can&#39;t solve the problem from java side. What I have is only an executable file(game.exe). There is nothing I can do with source code."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1535007700,"post_id":51963635,"comment_id":90909674,"body_markdown":"I wasn&#39;t suggesting rewriting the source code, don&#39;t be silly. I also don&#39;t understand what you&#39;re talking about. You said you &quot;changed the virtual memory from 1GB to 2GB&quot;? I thought you had 10GB of memory?","body":"I wasn&#39;t suggesting rewriting the source code, don&#39;t be silly. I also don&#39;t understand what you&#39;re talking about. You said you &quot;changed the virtual memory from 1GB to 2GB&quot;? I thought you had 10GB of memory?"},{"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"score":0,"creation_date":1535016628,"post_id":51963635,"comment_id":90914636,"body_markdown":"Sorry, English is not my native language. Maybe something misunderstood.You wanted my to concentrate on java. All I have known is something causes out of memory and can&#39;t create new native threads. I don&#39;t know what else I could do. I just need to solve the problem immediately.","body":"Sorry, English is not my native language. Maybe something misunderstood.You wanted my to concentrate on java. All I have known is something causes out of memory and can&#39;t create new native threads. I don&#39;t know what else I could do. I just need to solve the problem immediately."},{"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"score":0,"creation_date":1535016632,"post_id":51963635,"comment_id":90914640,"body_markdown":"I tried to do something from OS level, seems working. Increase thread limits might solve my problem, so I think I could work with it first. I&#39;m not familiar with virtual memory, I just simply choose &quot;Automatically manage....&quot;  let system decided for me. I don&#39;t know why it only gave me 2G(from default 1G to 2G) for virtual memory. On my local computer(win 7), it assigned like 16G for virtual memory, that equals to my physical memory.","body":"I tried to do something from OS level, seems working. Increase thread limits might solve my problem, so I think I could work with it first. I&#39;m not familiar with virtual memory, I just simply choose &quot;Automatically manage....&quot;  let system decided for me. I don&#39;t know why it only gave me 2G(from default 1G to 2G) for virtual memory. On my local computer(win 7), it assigned like 16G for virtual memory, that equals to my physical memory."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1535017510,"post_id":51963635,"comment_id":90915181,"body_markdown":"Are you sure you&#39;re not talking about the size of the [swap file](https://en.wikipedia.org/wiki/Paging) (Page File in windows terms)? Virtual memory is basically physical memory + swap, so in a server with `10GB` of physical memory, you would have *at least* `10GB` of virtual memory. If the server requires more memory, you&#39;ll need more memory or a bigger swap file.","body":"Are you sure you&#39;re not talking about the size of the <a href=\"https://en.wikipedia.org/wiki/Paging\" rel=\"nofollow noreferrer\">swap file</a> (Page File in windows terms)? Virtual memory is basically physical memory + swap, so in a server with <code>10GB</code> of physical memory, you would have <i>at least</i> <code>10GB</code> of virtual memory. If the server requires more memory, you&#39;ll need more memory or a bigger swap file."},{"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"score":0,"creation_date":1535020224,"post_id":51963635,"comment_id":90916761,"body_markdown":"Yes, it&#39;s swap file. There is &quot;Virtual memory&quot; on the setting window. According to https://www.geeksinphoenix.com/blog/post/2016/05/10/how-to-manage-windows-10-virtual-memory.aspx I thought 2G is virtual memory, RAM+Virtual memory = total memory? However, my game server seems not to occur the error anymore...that&#39;s weird. I did two changes for it. 1. Increased virtual memory from 1G to 2G. 2. Removed java starting up argument -xss. it was -xss1024k(But 64bit windows default stack size is 1MB, too). Thank you for your patience in helping a newbie.","body":"Yes, it&#39;s swap file. There is &quot;Virtual memory&quot; on the setting window. According to <a href=\"https://www.geeksinphoenix.com/blog/post/2016/05/10/how-to-manage-windows-10-virtual-memory.aspx\" rel=\"nofollow noreferrer\">geeksinphoenix.com/blog/post/2016/05/10/&hellip;</a> I thought 2G is virtual memory, RAM+Virtual memory = total memory? However, my game server seems not to occur the error anymore...that&#39;s weird. I did two changes for it. 1. Increased virtual memory from 1G to 2G. 2. Removed java starting up argument -xss. it was -xss1024k(But 64bit windows default stack size is 1MB, too). Thank you for your patience in helping a newbie."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1535021127,"post_id":51963635,"comment_id":90917272,"body_markdown":"You can safely increase the swap to more than `2GB`. Commonly the swap is the same size as the physical memory, so you could have `20GB` total memory. It just means that if your programs are using a lot of memory, they might end up &quot;thrashing&quot;, when memory gets paged in and out constantly. In that case you need more physical memory to keep up a good performance.","body":"You can safely increase the swap to more than <code>2GB</code>. Commonly the swap is the same size as the physical memory, so you could have <code>20GB</code> total memory. It just means that if your programs are using a lot of memory, they might end up &quot;thrashing&quot;, when memory gets paged in and out constantly. In that case you need more physical memory to keep up a good performance."},{"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"score":0,"creation_date":1535022289,"post_id":51963635,"comment_id":90917918,"body_markdown":"Alright, thanks a lot.","body":"Alright, thanks a lot."}],"owner":{"account_id":11274472,"reputation":103,"user_id":8268886,"accept_rate":67,"display_name":"david0116"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2527,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679444750,"creation_date":1534929796,"question_id":51963635,"body_markdown":"According to  https://stackoverflow.com/questions/51945268/how-to-solve-java-error-pool-1-thread-xxxx-java-lang-outofmemory. As far as I known, there are two directions to solve the problem. Either optimize source code or increase thread limitation. I don&#39;t have the source code. I think increase thread limitation is the only way that I could try. I&#39;ve been searching the answer for a while, but still can&#39;t find a correct way to do it. My OS is 64 bit windows server 2012. That means it has default of 1MB reserved for stack. After I read this https://blogs.technet.microsoft.com/markrussinovich/2009/07/05/pushing-the-limits-of-windows-processes-and-threads/, I&#39;m totally confused for the thread limitation. There are some points I don&#39;t understand:\r\n\r\n 1. The error message shows &quot;pool-1-thread-1395&quot;. Why is the limit amount only 1395 threads? I thought it should be a lot more than it.\r\n\r\n 2. I also read some information about virtual memory. That may affects thread limitation. I found that it has only 1024MB virtual memory for my OS, is that why thread limit so low? (1024MB VM/1MB stack size = 1024 threads)\r\n\r\n 3. There is a java executing argument -xss. It represents init size of stack. If I set it to 128k, would OS default 1M stack size be changed?\r\n\r\nAny suggestion would be greatly appreciated.\r\n\r\n\r\n\r\n\r\nMachine info:\r\n\r\n - OS: 64 bit Windows server 2012 R2\r\n - Java version : jre1.8.0_171\r\n - RAM: 10G\r\n - CPU: 2.5 GHz Intel Xeon(R)(Hyper Threaded)\r\n","title":"How do I increase thread limitation on windows server?","body":"<p>According to  <a href=\"https://stackoverflow.com/questions/51945268/how-to-solve-java-error-pool-1-thread-xxxx-java-lang-outofmemory\">How to solve Java error &quot;pool-1-thread-xxxx&quot; java.lang.OutOfMemory</a>. As far as I known, there are two directions to solve the problem. Either optimize source code or increase thread limitation. I don't have the source code. I think increase thread limitation is the only way that I could try. I've been searching the answer for a while, but still can't find a correct way to do it. My OS is 64 bit windows server 2012. That means it has default of 1MB reserved for stack. After I read this <a href=\"https://blogs.technet.microsoft.com/markrussinovich/2009/07/05/pushing-the-limits-of-windows-processes-and-threads/\" rel=\"nofollow noreferrer\">https://blogs.technet.microsoft.com/markrussinovich/2009/07/05/pushing-the-limits-of-windows-processes-and-threads/</a>, I'm totally confused for the thread limitation. There are some points I don't understand:</p>\n\n<ol>\n<li><p>The error message shows \"pool-1-thread-1395\". Why is the limit amount only 1395 threads? I thought it should be a lot more than it.</p></li>\n<li><p>I also read some information about virtual memory. That may affects thread limitation. I found that it has only 1024MB virtual memory for my OS, is that why thread limit so low? (1024MB VM/1MB stack size = 1024 threads)</p></li>\n<li><p>There is a java executing argument -xss. It represents init size of stack. If I set it to 128k, would OS default 1M stack size be changed?</p></li>\n</ol>\n\n<p>Any suggestion would be greatly appreciated.</p>\n\n<p>Machine info:</p>\n\n<ul>\n<li>OS: 64 bit Windows server 2012 R2</li>\n<li>Java version : jre1.8.0_171</li>\n<li>RAM: 10G</li>\n<li>CPU: 2.5 GHz Intel Xeon(R)(Hyper Threaded)</li>\n</ul>\n"},{"tags":["java","spring-boot","jpa","repository"],"owner":{"account_id":18808369,"reputation":13,"user_id":13717136,"display_name":"BMB08"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679444663,"creation_date":1679444663,"question_id":75807475,"body_markdown":"I have the following entity\r\n\r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;users_archivos&quot;)\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class UserArchivo {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \t\r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;id_usuario&quot;, nullable = false)\r\n        @JsonIgnore\r\n        private User usuario;\r\n        \r\n    \t@JoinColumn(name = &quot;id_archivo&quot;)\r\n        @OneToOne(fetch = FetchType.LAZY)\r\n    \t@JsonIgnoreProperties({ &quot;hibernateLazyInitializer&quot;, &quot;handler&quot; })\r\n    \tprivate ArchivoS3 archivo;\r\n    \t\r\n    \tprivate String nombreArchivo;\r\n    \t\r\n    \t@ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;id_tipo_archivo&quot;, nullable = false)\r\n    \t@JsonIgnoreProperties({ &quot;hibernateLazyInitializer&quot;, &quot;handler&quot; })\r\n        private CatalogoTipoArchivoUsuario tipoArchivo;\r\n    \t\r\n    \t@ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;id_usuario_subio&quot;, nullable = false)\r\n        @JsonIgnore\r\n        private User usuarioSubio;\r\n    \t\r\n    \t@CreationTimestamp\r\n    \tprivate Date creadoEn;\r\n    \t\r\n    \t@UpdateTimestamp\r\n    \tprivate Date actualizadoEn;\r\n    \r\n    }\r\n\r\nAnd I have the next native query\r\n\r\n    @Query(nativeQuery = true, value = &quot;SELECT ua.id as id, ua.nombre_archivo, ua.id_archivo, ua.id_usuario, &quot;\r\n    \t\t+ &quot;ua.id_usuario_subio, ctau.id as id_tipo_archivo, &quot;\r\n    \t\t+ &quot;ua.creado_en, ua.actualizado_en FROM users_archivos as ua &quot;\r\n    \t\t+ &quot;RIGHT JOIN catalogo_tipo_archivo_usuario as ctau ON ua.id_tipo_archivo = ctau.id &quot;\r\n    \t\t+ &quot;AND ua.id_usuario = ?1&quot;)\r\n    List&lt;UserArchivo&gt; construirArchivosParaUsuarioDelCatalogo(Long idUsuario);\r\n\r\nThe response that I get when I make the request in postman is:\r\n\r\n    [\r\n          null,\r\n          null,\r\n          {\r\n             &quot;id&quot;:1,\r\n             &quot;archivo&quot;:{\r\n                &quot;id&quot;:15,\r\n                &quot;keyS3&quot;:&quot;f1d05294-3707-413d-95fa-b5fa02c7684eSituacionFiscalBrayanMares.pdf&quot;,\r\n                &quot;creadoEn&quot;:&quot;2023-03-21T17:08:10.336+00:00&quot;,\r\n                &quot;actualizadoEn&quot;:&quot;2023-03-21T17:08:10.336+00:00&quot;\r\n             },\r\n             &quot;nombreArchivo&quot;:&quot;Test&quot;,\r\n             &quot;tipoArchivo&quot;:{\r\n                &quot;id&quot;:3,\r\n                &quot;tipo&quot;:&quot;Comprobante de domicilio&quot;\r\n             },\r\n             &quot;creadoEn&quot;:&quot;2023-03-21T17:18:41.000+00:00&quot;,\r\n             &quot;actualizadoEn&quot;:&quot;2023-03-21T17:18:42.000+00:00&quot;\r\n          },\r\n          null,\r\n          null,\r\n          null\r\n       ]\r\n\r\nOnly the data that is already in the database is structured. But I need to structure all as when I do it in sql:\r\n\r\n    [\r\n      {\r\n        &quot;id&quot;: null,\r\n        &quot;nombre_archivo&quot;: null,\r\n        &quot;id_archivo&quot;: null,\r\n        &quot;id_usuario&quot;: null,\r\n        &quot;id_usuario_subio&quot;: null,\r\n        &quot;id_tipo_archivo&quot;: 1,\r\n        &quot;creado_en&quot;: null,\r\n        &quot;actualizado_en&quot;: null\r\n      },\r\n      {\r\n        &quot;id&quot;: null,\r\n        &quot;nombre_archivo&quot;: null,\r\n        &quot;id_archivo&quot;: null,\r\n        &quot;id_usuario&quot;: null,\r\n        &quot;id_usuario_subio&quot;: null,\r\n        &quot;id_tipo_archivo&quot;: 2,\r\n        &quot;creado_en&quot;: null,\r\n        &quot;actualizado_en&quot;: null\r\n      },\r\n      {\r\n         &quot;id&quot;:1,\r\n         &quot;archivo&quot;:{\r\n            &quot;id&quot;:15,\r\n            &quot;keyS3&quot;:&quot;f1d05294-3707-413d-95fa-b5fa02c7684eSituacionFiscalBrayanMares.pdf&quot;,\r\n            &quot;creadoEn&quot;:&quot;2023-03-21T17:08:10.336+00:00&quot;,\r\n            &quot;actualizadoEn&quot;:&quot;2023-03-21T17:08:10.336+00:00&quot;\r\n         },\r\n         &quot;nombreArchivo&quot;:&quot;Test&quot;,\r\n         &quot;tipoArchivo&quot;:{\r\n            &quot;id&quot;:3,\r\n            &quot;tipo&quot;:&quot;Comprobante de domicilio&quot;\r\n         },\r\n         &quot;creadoEn&quot;:&quot;2023-03-21T17:18:41.000+00:00&quot;,\r\n         &quot;actualizadoEn&quot;:&quot;2023-03-21T17:18:42.000+00:00&quot;\r\n      },\r\n      {\r\n        &quot;id&quot;: null,\r\n        &quot;nombre_archivo&quot;: null,\r\n        &quot;id_archivo&quot;: null,\r\n        &quot;id_usuario&quot;: null,\r\n        &quot;id_usuario_subio&quot;: null,\r\n        &quot;id_tipo_archivo&quot;: 4,\r\n        &quot;creado_en&quot;: null,\r\n        &quot;actualizado_en&quot;: null\r\n      },\r\n      {\r\n        &quot;id&quot;: null,\r\n        &quot;nombre_archivo&quot;: null,\r\n        &quot;id_archivo&quot;: null,\r\n        &quot;id_usuario&quot;: null,\r\n        &quot;id_usuario_subio&quot;: null,\r\n        &quot;id_tipo_archivo&quot;: 5,\r\n        &quot;creado_en&quot;: null,\r\n        &quot;actualizado_en&quot;: null\r\n      },\r\n      {\r\n        &quot;id&quot;: null,\r\n        &quot;nombre_archivo&quot;: null,\r\n        &quot;id_archivo&quot;: null,\r\n        &quot;id_usuario&quot;: null,\r\n        &quot;id_usuario_subio&quot;: null,\r\n        &quot;id_tipo_archivo&quot;: 6,\r\n        &quot;creado_en&quot;: null,\r\n        &quot;actualizado_en&quot;: null\r\n      }\r\n    ]\r\n\r\nPlease if someone can help me to see what is wrong. What do I have to add or remove or if my query is wrong. I already tried with JPQL but the result was the same.\r\n\r\nRight now I have a solution where in my service layer I perform the logic but I want to know the reason for this problem.","title":"RIGH JOIN in JPA Repostiory Return Null","body":"<p>I have the following entity</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;users_archivos&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\npublic class UserArchivo {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;id_usuario&quot;, nullable = false)\n    @JsonIgnore\n    private User usuario;\n    \n    @JoinColumn(name = &quot;id_archivo&quot;)\n    @OneToOne(fetch = FetchType.LAZY)\n    @JsonIgnoreProperties({ &quot;hibernateLazyInitializer&quot;, &quot;handler&quot; })\n    private ArchivoS3 archivo;\n    \n    private String nombreArchivo;\n    \n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;id_tipo_archivo&quot;, nullable = false)\n    @JsonIgnoreProperties({ &quot;hibernateLazyInitializer&quot;, &quot;handler&quot; })\n    private CatalogoTipoArchivoUsuario tipoArchivo;\n    \n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;id_usuario_subio&quot;, nullable = false)\n    @JsonIgnore\n    private User usuarioSubio;\n    \n    @CreationTimestamp\n    private Date creadoEn;\n    \n    @UpdateTimestamp\n    private Date actualizadoEn;\n\n}\n</code></pre>\n<p>And I have the next native query</p>\n<pre><code>@Query(nativeQuery = true, value = &quot;SELECT ua.id as id, ua.nombre_archivo, ua.id_archivo, ua.id_usuario, &quot;\n        + &quot;ua.id_usuario_subio, ctau.id as id_tipo_archivo, &quot;\n        + &quot;ua.creado_en, ua.actualizado_en FROM users_archivos as ua &quot;\n        + &quot;RIGHT JOIN catalogo_tipo_archivo_usuario as ctau ON ua.id_tipo_archivo = ctau.id &quot;\n        + &quot;AND ua.id_usuario = ?1&quot;)\nList&lt;UserArchivo&gt; construirArchivosParaUsuarioDelCatalogo(Long idUsuario);\n</code></pre>\n<p>The response that I get when I make the request in postman is:</p>\n<pre><code>[\n      null,\n      null,\n      {\n         &quot;id&quot;:1,\n         &quot;archivo&quot;:{\n            &quot;id&quot;:15,\n            &quot;keyS3&quot;:&quot;f1d05294-3707-413d-95fa-b5fa02c7684eSituacionFiscalBrayanMares.pdf&quot;,\n            &quot;creadoEn&quot;:&quot;2023-03-21T17:08:10.336+00:00&quot;,\n            &quot;actualizadoEn&quot;:&quot;2023-03-21T17:08:10.336+00:00&quot;\n         },\n         &quot;nombreArchivo&quot;:&quot;Test&quot;,\n         &quot;tipoArchivo&quot;:{\n            &quot;id&quot;:3,\n            &quot;tipo&quot;:&quot;Comprobante de domicilio&quot;\n         },\n         &quot;creadoEn&quot;:&quot;2023-03-21T17:18:41.000+00:00&quot;,\n         &quot;actualizadoEn&quot;:&quot;2023-03-21T17:18:42.000+00:00&quot;\n      },\n      null,\n      null,\n      null\n   ]\n</code></pre>\n<p>Only the data that is already in the database is structured. But I need to structure all as when I do it in sql:</p>\n<pre><code>[\n  {\n    &quot;id&quot;: null,\n    &quot;nombre_archivo&quot;: null,\n    &quot;id_archivo&quot;: null,\n    &quot;id_usuario&quot;: null,\n    &quot;id_usuario_subio&quot;: null,\n    &quot;id_tipo_archivo&quot;: 1,\n    &quot;creado_en&quot;: null,\n    &quot;actualizado_en&quot;: null\n  },\n  {\n    &quot;id&quot;: null,\n    &quot;nombre_archivo&quot;: null,\n    &quot;id_archivo&quot;: null,\n    &quot;id_usuario&quot;: null,\n    &quot;id_usuario_subio&quot;: null,\n    &quot;id_tipo_archivo&quot;: 2,\n    &quot;creado_en&quot;: null,\n    &quot;actualizado_en&quot;: null\n  },\n  {\n     &quot;id&quot;:1,\n     &quot;archivo&quot;:{\n        &quot;id&quot;:15,\n        &quot;keyS3&quot;:&quot;f1d05294-3707-413d-95fa-b5fa02c7684eSituacionFiscalBrayanMares.pdf&quot;,\n        &quot;creadoEn&quot;:&quot;2023-03-21T17:08:10.336+00:00&quot;,\n        &quot;actualizadoEn&quot;:&quot;2023-03-21T17:08:10.336+00:00&quot;\n     },\n     &quot;nombreArchivo&quot;:&quot;Test&quot;,\n     &quot;tipoArchivo&quot;:{\n        &quot;id&quot;:3,\n        &quot;tipo&quot;:&quot;Comprobante de domicilio&quot;\n     },\n     &quot;creadoEn&quot;:&quot;2023-03-21T17:18:41.000+00:00&quot;,\n     &quot;actualizadoEn&quot;:&quot;2023-03-21T17:18:42.000+00:00&quot;\n  },\n  {\n    &quot;id&quot;: null,\n    &quot;nombre_archivo&quot;: null,\n    &quot;id_archivo&quot;: null,\n    &quot;id_usuario&quot;: null,\n    &quot;id_usuario_subio&quot;: null,\n    &quot;id_tipo_archivo&quot;: 4,\n    &quot;creado_en&quot;: null,\n    &quot;actualizado_en&quot;: null\n  },\n  {\n    &quot;id&quot;: null,\n    &quot;nombre_archivo&quot;: null,\n    &quot;id_archivo&quot;: null,\n    &quot;id_usuario&quot;: null,\n    &quot;id_usuario_subio&quot;: null,\n    &quot;id_tipo_archivo&quot;: 5,\n    &quot;creado_en&quot;: null,\n    &quot;actualizado_en&quot;: null\n  },\n  {\n    &quot;id&quot;: null,\n    &quot;nombre_archivo&quot;: null,\n    &quot;id_archivo&quot;: null,\n    &quot;id_usuario&quot;: null,\n    &quot;id_usuario_subio&quot;: null,\n    &quot;id_tipo_archivo&quot;: 6,\n    &quot;creado_en&quot;: null,\n    &quot;actualizado_en&quot;: null\n  }\n]\n</code></pre>\n<p>Please if someone can help me to see what is wrong. What do I have to add or remove or if my query is wrong. I already tried with JPQL but the result was the same.</p>\n<p>Right now I have a solution where in my service layer I perform the logic but I want to know the reason for this problem.</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1679426709,"post_id":75805557,"comment_id":133719690,"body_markdown":"Make `Employee` have a single `Map&lt;String, Object&gt; props` rather than &quot;100+ fields&quot;","body":"Make <code>Employee</code> have a single <code>Map&lt;String, Object&gt; props</code> rather than &quot;100+ fields&quot;"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1679426769,"post_id":75805557,"comment_id":133719705,"body_markdown":"Does this answer your question? [Parse a URI String into Name-Value Collection](https://stackoverflow.com/questions/13592236/parse-a-uri-string-into-name-value-collection)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13592236/parse-a-uri-string-into-name-value-collection\">Parse a URI String into Name-Value Collection</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1679427207,"post_id":75805557,"comment_id":133719783,"body_markdown":"It&#39;s &quot;url specific&quot;, but quite popular... top answer can be refactored to strings (with/-out decoding) + many (good) &quot;string based&quot; answers...","body":"It&#39;s &quot;url specific&quot;, but quite popular... top answer can be refactored to strings (with/-out decoding) + many (good) &quot;string based&quot; answers..."}],"answers":[{"tags":[],"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679439684,"creation_date":1679438575,"answer_id":75806975,"question_id":75805557,"body_markdown":"Assuming the normal getter/setter pairs are on the target class, recommend such as the Apache `commons-beanutils` library for simplicity:\r\n\r\n    BeanUtils.setProperty(emp, key, value);\r\n\r\nTo achieve the same without an external library, `java.beans.Introspector` will return an array of `PropertyDescriptor` for a class.  These would need sifting by name, for example:\r\n\r\n    PropertyDescriptor[] propertyDescriptors = Introspector\r\n        .getBeanInfo(Employee.class).getPropertyDescriptors();\r\n    PropertyDescriptor propertyDescriptor = Arrays\r\n        .stream(propertyDescriptors)\r\n        .filter(p -&gt; p.getName().equals(key)).findAny()\r\n        .orElseThrow(() -&gt; new IllegalArgumentException(\r\n            String.format(&quot;Property not found: %s&quot;, key)));\r\n    propertyDescriptor.getWriteMethod().invoke(emp, value);\r\n","title":"Map json containing a string array to Java class","body":"<p>Assuming the normal getter/setter pairs are on the target class, recommend such as the Apache <code>commons-beanutils</code> library for simplicity:</p>\n<pre><code>BeanUtils.setProperty(emp, key, value);\n</code></pre>\n<p>To achieve the same without an external library, <code>java.beans.Introspector</code> will return an array of <code>PropertyDescriptor</code> for a class.  These would need sifting by name, for example:</p>\n<pre><code>PropertyDescriptor[] propertyDescriptors = Introspector\n    .getBeanInfo(Employee.class).getPropertyDescriptors();\nPropertyDescriptor propertyDescriptor = Arrays\n    .stream(propertyDescriptors)\n    .filter(p -&gt; p.getName().equals(key)).findAny()\n    .orElseThrow(() -&gt; new IllegalArgumentException(\n        String.format(&quot;Property not found: %s&quot;, key)));\npropertyDescriptor.getWriteMethod().invoke(emp, value);\n</code></pre>\n"}],"owner":{"account_id":1069576,"reputation":775,"user_id":1069186,"accept_rate":63,"display_name":"Coder17"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1679444358,"creation_date":1679426475,"question_id":75805557,"body_markdown":"I have a json request which hits a post mapping call \r\n   \r\n\r\n    {   &quot;xyz&quot;:&quot;tyu&quot;,\r\n    \r\n        &quot;abc&quot;:&quot;test1=1&amp;test2=2&amp;.....test100=100&quot;\r\n    }\r\n\r\nThere are 100+ key value pairs in the field abc. How do I map it to a java class which contains these 100+ fields\r\n\r\nMy approach:\r\n\r\n    @PostMapping(&quot;/employee&quot;)\r\n        public Response someMethod(@RequestBody Employee emp) {\r\n               \r\n            String reqStream = emp.getAbc();\r\n            String[] reqStreamArray = reqStream.split(&quot;&amp;&quot;);\r\n    \r\n            for (String pair : reqStreamArray) {\r\n                String[] reqStreamKeyValue = pair.split(&quot;=&quot;);\r\n                String key = reqStreamKeyValue[0];\r\n                String value = reqStreamKeyValue[1];\r\n                switch (key) {\r\n                    case &quot;test1&quot;:\r\n                        emp.setTest1(value);\r\n                        break;\r\nSo the problem is I need to have 100+ switch stmts which is wrong. What is the better approach?","title":"Map json containing a string array to Java class","body":"<p>I have a json request which hits a post mapping call</p>\n<pre><code>{   &quot;xyz&quot;:&quot;tyu&quot;,\n\n    &quot;abc&quot;:&quot;test1=1&amp;test2=2&amp;.....test100=100&quot;\n}\n</code></pre>\n<p>There are 100+ key value pairs in the field abc. How do I map it to a java class which contains these 100+ fields</p>\n<p>My approach:</p>\n<pre><code>@PostMapping(&quot;/employee&quot;)\n    public Response someMethod(@RequestBody Employee emp) {\n           \n        String reqStream = emp.getAbc();\n        String[] reqStreamArray = reqStream.split(&quot;&amp;&quot;);\n\n        for (String pair : reqStreamArray) {\n            String[] reqStreamKeyValue = pair.split(&quot;=&quot;);\n            String key = reqStreamKeyValue[0];\n            String value = reqStreamKeyValue[1];\n            switch (key) {\n                case &quot;test1&quot;:\n                    emp.setTest1(value);\n                    break;\n</code></pre>\n<p>So the problem is I need to have 100+ switch stmts which is wrong. What is the better approach?</p>\n"},{"tags":["java","android","bufferedreader","filereader","stringbuilder"],"comments":[{"owner":{"account_id":12296955,"reputation":1434,"user_id":8972283,"display_name":"Francis Bartkowiak"},"score":0,"creation_date":1517323904,"post_id":48523769,"comment_id":84043215,"body_markdown":"Could post the input file? One thing that might be wrong is that you say &quot;_My app generates a text file wich contains data for one field in every line_&quot;, but you only perform one `readLine()` with your `BufferedReader`. I&#39;m assuming you&#39;ll need to read more than just one line, but I can&#39;t be sure without seeing your input.","body":"Could post the input file? One thing that might be wrong is that you say &quot;<i>My app generates a text file wich contains data for one field in every line</i>&quot;, but you only perform one <code>readLine()</code> with your <code>BufferedReader</code>. I&#39;m assuming you&#39;ll need to read more than just one line, but I can&#39;t be sure without seeing your input."},{"owner":{"account_id":12647524,"reputation":3,"user_id":9218889,"display_name":"Menalk"},"score":0,"creation_date":1517324082,"post_id":48523769,"comment_id":84043351,"body_markdown":"@FrancisBartkowiak isn&#39;t it supposed to load as much data as i define and close when i define to close?","body":"@FrancisBartkowiak isn&#39;t it supposed to load as much data as i define and close when i define to close?"},{"owner":{"account_id":12296955,"reputation":1434,"user_id":8972283,"display_name":"Francis Bartkowiak"},"score":0,"creation_date":1517324333,"post_id":48523769,"comment_id":84043553,"body_markdown":"Yes. But you only define it to load one line. If your input file has multiple lines in it (i.e. L1, L2, L3, ..., LN), you&#39;re only reading L1. All your `StringBuilder` does is get that first line added to it, and then a new line character (the &quot;\\n&quot;). I&#39;m assuming what you actually want to do to is obtain every line in the file and do something with each line. Again, I can&#39;t be sure without seeing your input.","body":"Yes. But you only define it to load one line. If your input file has multiple lines in it (i.e. L1, L2, L3, ..., LN), you&#39;re only reading L1. All your <code>StringBuilder</code> does is get that first line added to it, and then a new line character (the &quot;\\n&quot;). I&#39;m assuming what you actually want to do to is obtain every line in the file and do something with each line. Again, I can&#39;t be sure without seeing your input."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":1,"creation_date":1517325259,"post_id":48523769,"comment_id":84044145,"body_markdown":"`FileReader test = new FileReader(String.valueOf(wczytaj));`. Change to `FileReader test = new FileReader(Data.getData());`. And remove the Cursor stuff.","body":"<code>FileReader test = new FileReader(String.valueOf(wczytaj));</code>. Change to <code>FileReader test = new FileReader(Data.getData());</code>. And remove the Cursor stuff."},{"owner":{"account_id":12647524,"reputation":3,"user_id":9218889,"display_name":"Menalk"},"score":0,"creation_date":1517325616,"post_id":48523769,"comment_id":84044415,"body_markdown":"@greenapps Cannot resolve constructor &#39;FileReader(android.net.Uri)&#39; :(","body":"@greenapps Cannot resolve constructor &#39;FileReader(android.net.Uri)&#39; :("},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1517325649,"post_id":48523769,"comment_id":84044439,"body_markdown":"Sorry: `FileReader(Data.getData().toString());`. And hopefully FileReader can read from a content scheme and does not expect a file path only.","body":"Sorry: <code>FileReader(Data.getData().toString());</code>. And hopefully FileReader can read from a content scheme and does not expect a file path only."}],"answers":[{"comments":[{"owner":{"account_id":12647524,"reputation":3,"user_id":9218889,"display_name":"Menalk"},"score":0,"creation_date":1517325894,"post_id":48524841,"comment_id":84044619,"body_markdown":"will it work for loading a file from path contained in file?","body":"will it work for loading a file from path contained in file?"},{"owner":{"account_id":12296955,"reputation":1434,"user_id":8972283,"display_name":"Francis Bartkowiak"},"score":0,"creation_date":1517326092,"post_id":48524841,"comment_id":84044761,"body_markdown":"Once you get to that line (looks to be 13), you can do whatever you&#39;d like with that `String`. So if you wanted to read that line and then open the file that it points to, you could.","body":"Once you get to that line (looks to be 13), you can do whatever you&#39;d like with that <code>String</code>. So if you wanted to read that line and then open the file that it points to, you could."},{"owner":{"account_id":12647524,"reputation":3,"user_id":9218889,"display_name":"Menalk"},"score":0,"creation_date":1517407326,"post_id":48524841,"comment_id":84083139,"body_markdown":"Unfortunately still show error from catch. Android studio shows that toString can cause nullpointerexception","body":"Unfortunately still show error from catch. Android studio shows that toString can cause nullpointerexception"},{"owner":{"account_id":12647524,"reputation":3,"user_id":9218889,"display_name":"Menalk"},"score":0,"creation_date":1517408402,"post_id":48524841,"comment_id":84083886,"body_markdown":"01-31 14:19:42.402 1916-1916/? D/Documents: onFinished() [content://com.android.externalstorage.documents/document/primary%3ATest.txt]\n01-31 14:19:42.553 1916-1935/? D/OpenGLRenderer: endAllStagingAnimators on 0xb4bd9480 (ListView) with handle 0xb4b91cd0","body":"01-31 14:19:42.402 1916-1916/? D/Documents: onFinished() [content://com.android.externalstorage.documents/document/pr&zwnj;&#8203;imary%3ATest.txt] 01-31 14:19:42.553 1916-1935/? D/OpenGLRenderer: endAllStagingAnimators on 0xb4bd9480 (ListView) with handle 0xb4b91cd0"},{"owner":{"account_id":12647524,"reputation":3,"user_id":9218889,"display_name":"Menalk"},"score":0,"creation_date":1517828554,"post_id":48524841,"comment_id":84238572,"body_markdown":"I found that the problem is that BufferedReader is losing file i point him to load. FileNotFoundExpection is catched.","body":"I found that the problem is that BufferedReader is losing file i point him to load. FileNotFoundExpection is catched."}],"tags":[],"owner":{"account_id":12296955,"reputation":1434,"user_id":8972283,"display_name":"Francis Bartkowiak"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517325635,"creation_date":1517325635,"answer_id":48524841,"question_id":48523769,"body_markdown":"I don&#39;t think you want a `StringBuilder` at all. I think you want to read in each line of the file and assign each line to a different field depending on which line you&#39;re on in the file. If that is the case, one way you could read in the file would be like this:\r\n\r\n    FileReader test = new FileReader(Data.getData().toString());\r\n    BufferedReader bufor_w = new BufferedReader(test);\r\n    String line;\r\n    int counter = 0;\r\n    while((line = bufor_w.readLine()) != null){\r\n        switch(counter){\r\n            case 0:\r\n                i_e_magazyn.setText(line);\r\n                break;\r\n            case 1:\r\n                i_e_strefa.setText(line);\r\n                break;\r\n            case 2:\r\n                //etc.\r\n                break;\r\n        }\r\n        counter++;\r\n    }\r\n    bufor_w.close();\r\n    test.close();\r\n\r\nThis will read in each line of the file and depending on which line you&#39;re on, you can assign the value to whatever field you like.","title":"Loading text file data","body":"<p>I don't think you want a <code>StringBuilder</code> at all. I think you want to read in each line of the file and assign each line to a different field depending on which line you're on in the file. If that is the case, one way you could read in the file would be like this:</p>\n\n<pre><code>FileReader test = new FileReader(Data.getData().toString());\nBufferedReader bufor_w = new BufferedReader(test);\nString line;\nint counter = 0;\nwhile((line = bufor_w.readLine()) != null){\n    switch(counter){\n        case 0:\n            i_e_magazyn.setText(line);\n            break;\n        case 1:\n            i_e_strefa.setText(line);\n            break;\n        case 2:\n            //etc.\n            break;\n    }\n    counter++;\n}\nbufor_w.close();\ntest.close();\n</code></pre>\n\n<p>This will read in each line of the file and depending on which line you're on, you can assign the value to whatever field you like.</p>\n"}],"owner":{"account_id":12647524,"reputation":3,"user_id":9218889,"display_name":"Menalk"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679444174,"creation_date":1517322460,"question_id":48523769,"body_markdown":"I have a problem with reading from a text file created by my application. My app generates a text file which contains data for one field in every line but even with answers for BufferedReader and StringBuilder. I can&#39;t handle it well on many combinations. Load button is supposed to load name of the file (and does it) and to write data in specified fields (TextView). Why it does not work? At start I thought it was a problem with StringBuilder because it showed me kind of an error about not reading data from the file so I made that it doesn&#39;t produce this error anymore but still nothing.\r\n\r\nonActivityResult:\r\n\r\n    @Override\r\n    public void onActivityResult(int reqCode, int resCode, Intent Data) {\r\n\r\n        super.onActivityResult(reqCode, resCode, Data);\r\n\r\n        if (reqCode == reqGaleria) {\r\n\r\n            if (resCode == RESULT_OK) {\r\n\r\n                try {\r\n\r\n                    Uri imageUri = Data.getData();\r\n                    InputStream imageStream = getContentResolver().openInputStream(imageUri);\r\n                    Bitmap selectedImage = BitmapFactory.decodeStream(imageStream);\r\n                    ramka.setImageBitmap(selectedImage);\r\n                    sciezka = imageUri.getPath();\r\n\r\n                } catch (FileNotFoundException e) {\r\n\r\n                    e.printStackTrace();\r\n                    Toast.makeText(getApplicationContext(), &quot;Coś poszło nie tak&quot;, LENGTH_SHORT)\r\n                            .show();\r\n                }\r\n            } else {\r\n                Toast.makeText(getApplicationContext(), &quot;Nie wybrałeś obrazu&quot;, LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n        if (reqCode == reqLoad) {\r\n\r\n            if (resCode == RESULT_OK) {\r\n\r\n                try {\r\n\r\n                    Uri plik = Data.getData();\r\n                    @SuppressLint(&quot;Recycle&quot;) Cursor kursor = getContentResolver().query(plik, null, null, null, null);\r\n\r\n                    int nazwa_i = kursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);\r\n                    kursor.moveToFirst();//Musi zostać - bez tego nie wyskoczy nazwa pliku\r\n                    wczytaj.setText(kursor.getString(nazwa_i));\r\n\r\n                    FileReader test = new FileReader(String.valueOf(wczytaj));\r\n                    BufferedReader bufor_w = new BufferedReader(test);\r\n                    String line;\r\n                    line = bufor_w.readLine();\r\n                    StringBuilder bob = new StringBuilder(line);\r\n\r\n                    i_e_magazyn.setText(bob);\r\n\r\n                    bob.append(&#39;\\n&#39;);\r\n\r\n                    i_e_strefa.setText(bob);\r\n\r\n                    bufor_w.close();\r\n                    kursor.close();\r\n\r\n                } catch (Exception e) {\r\n\r\n                    e.printStackTrace();\r\n                    Toast.makeText(getApplicationContext(),&quot;Problem z uruchamianiem pliku&quot;,\r\n                            LENGTH_SHORT).show();\r\n                }\r\n            } else {\r\n                Toast.makeText(getApplicationContext(), &quot;Nie wybrałeś pliku&quot;, LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\t\r\nButton that is responsible for loading.\r\n\r\n     b2.setOnClickListener(new View.OnClickListener(){\r\n\r\n           @Override\r\n            public void onClick(View v){\r\n\r\n               Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\r\n               intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n               intent.setType(&quot;text/*&quot;);\r\n               startActivityForResult(intent,reqLoad);\r\n           }\r\n        });\r\n\t\t\r\nFile:\r\n\r\n\tMagazyn\r\n\tStrefa\r\n\tRząd\r\n\tRama\r\n\tSłup\r\n\tUszkodzenie\r\n\tWielkość Uszkodzenia\r\n\tLokalizacja\r\n\tZielony\r\n\tDalsze Działania\r\n\tPotrzebne Elementy\r\n\tTyp Elementu\r\n\t666\r\n\t/external/images/media/68\r\n\r\nLast line is path to image that is loaded\r\n\r\nEdit:\r\nProblem is not by just reading the file but to read the file that I choose.\r\nWhen I specify the file which has to be loaded, it loads perfectly. When I decide to show him from which file it have to load data, tells me that file doesn&#39;t exist.\r\n\r\nCode that works:\r\n\r\n    testowy.setOnClickListener(new View.OnClickListener(){\r\n\r\n           @Override\r\n            public void onClick(View v){\r\n\r\n               File pliczek = Environment.getExternalStorageDirectory();\r\n               File plik = new File(pliczek,&quot;/est.txt&quot;);\r\n               StringBuilder string;\r\n               string = new StringBuilder();\r\n\r\n               try{\r\n\r\n                   BufferedReader reader = new BufferedReader(new FileReader(plik));\r\n                   String linia;\r\n                   int licz = 0;\r\n\r\n                   while((linia = reader.readLine())!=null){\r\n\r\n                       switch(licz) {\r\n\r\n                           case 0:\r\n                                string.append(linia);\r\n                                i_e_magazyn.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                           case 1:\r\n                               string.append(linia);\r\n                               i_e_strefa.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 2:\r\n                               string.append(linia);\r\n                               i_e_rzad.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 3:\r\n                               string.append(linia);\r\n                               i_e_rama.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 4:\r\n                               string.append(linia);\r\n                               i_e_slup.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 5:\r\n                               string.append(linia);\r\n                               i_e_uszk.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 6:\r\n                               string.append(linia);\r\n                               i_e_w_uszk.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 7:\r\n                               string.append(linia);\r\n                               i_e_lok.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 8:\r\n                               string.append(linia);\r\n                               i_e_klasa.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 9:\r\n                               string.append(linia);\r\n                               i_e_dal_dzial.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 10:\r\n                               string.append(linia);\r\n                               i_e_pot_elem.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 11:\r\n                               string.append(linia);\r\n                               i_e_typ.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 12:\r\n                               string.append(linia);\r\n                               i_e_ilosc.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                           case 13:\r\n                               string.append(linia);\r\n                               wczytaj.setText(linia);\r\n                               string.append(&#39;\\n&#39;);\r\n                               break;\r\n\r\n                       }\r\n\r\n                       licz++;\r\n\r\n                   }\r\n\r\n               } catch(FileNotFoundException e){\r\n\r\n                   Toast.makeText(getApplicationContext(),&quot;Nie ma takiego pliku&quot;,LENGTH_SHORT)\r\n                           .show();\r\n\r\n               } catch(IOException e){\r\n\r\n                   Toast.makeText(getApplicationContext(),&quot;Nie zczytano pliku&quot;,LENGTH_SHORT).show();\r\n\r\n               }\r\n\r\n           }\r\n\r\n        });\r\n\r\nCode adapted to choose a file:\r\n\r\n    if (reqCode == reqLoad) {\r\n\r\n            if (resCode == RESULT_OK) {\r\n\r\n\r\n                Uri wskaznik = data.getData();\r\n\r\n                assert wskaznik != null;\r\n\r\n                //FileReader test = new FileReader(Data.getData().toString());\r\n                edytuj.setText(String.valueOf(wskaznik));\r\n                File pliczek = Environment.getExternalStorageDirectory();\r\n                File plik = new File(String.valueOf(wskaznik));\r\n                StringBuilder string;\r\n                string = new StringBuilder();\r\n\r\n                try {\r\n\r\n                    BufferedReader reader = new BufferedReader(new FileReader(plik));\r\n                    String linia;\r\n                    int licz = 0;\r\n\r\n                    while ((linia = reader.readLine()) != null) {\r\n\r\n                        switch (licz) {\r\n\r\n                            case 0:\r\n                                string.append(linia);\r\n                                i_e_magazyn.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 1:\r\n                                string.append(linia);\r\n                                i_e_strefa.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 2:\r\n                                string.append(linia);\r\n                                i_e_rzad.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 3:\r\n                                string.append(linia);\r\n                                i_e_rama.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 4:\r\n                                string.append(linia);\r\n                                i_e_slup.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 5:\r\n                                string.append(linia);\r\n                                i_e_uszk.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 6:\r\n                                string.append(linia);\r\n                                i_e_w_uszk.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 7:\r\n                                string.append(linia);\r\n                                i_e_lok.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 8:\r\n                                string.append(linia);\r\n                                i_e_klasa.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 9:\r\n                                string.append(linia);\r\n                                i_e_dal_dzial.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 10:\r\n                                string.append(linia);\r\n                                i_e_pot_elem.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 11:\r\n                                string.append(linia);\r\n                                i_e_typ.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 12:\r\n                                string.append(linia);\r\n                                i_e_ilosc.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                            case 13:\r\n                                string.append(linia);\r\n                                wczytaj.setText(linia);\r\n                                string.append(&#39;\\n&#39;);\r\n                                break;\r\n\r\n                        }\r\n\r\n                        licz++;\r\n\r\n                    }\r\n\r\n                } catch (FileNotFoundException e) {\r\n\r\n                    Toast.makeText(getApplicationContext(), &quot;Nie ma takiego pliku&quot;,\r\n                            LENGTH_SHORT)\r\n                            .show();\r\n\r\n                } catch (IOException e) {\r\n\r\n                    Toast.makeText(getApplicationContext(), &quot;Nie zczytano pliku&quot;, LENGTH_SHORT)\r\n                            .show();\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                Toast.makeText(getApplicationContext(), &quot;Nie wybrałeś pliku&quot;, LENGTH_SHORT).show();\r\n\r\n            }\r\n        }","title":"Loading text file data","body":"<p>I have a problem with reading from a text file created by my application. My app generates a text file which contains data for one field in every line but even with answers for BufferedReader and StringBuilder. I can't handle it well on many combinations. Load button is supposed to load name of the file (and does it) and to write data in specified fields (TextView). Why it does not work? At start I thought it was a problem with StringBuilder because it showed me kind of an error about not reading data from the file so I made that it doesn't produce this error anymore but still nothing.</p>\n<p>onActivityResult:</p>\n<pre><code>@Override\npublic void onActivityResult(int reqCode, int resCode, Intent Data) {\n\n    super.onActivityResult(reqCode, resCode, Data);\n\n    if (reqCode == reqGaleria) {\n\n        if (resCode == RESULT_OK) {\n\n            try {\n\n                Uri imageUri = Data.getData();\n                InputStream imageStream = getContentResolver().openInputStream(imageUri);\n                Bitmap selectedImage = BitmapFactory.decodeStream(imageStream);\n                ramka.setImageBitmap(selectedImage);\n                sciezka = imageUri.getPath();\n\n            } catch (FileNotFoundException e) {\n\n                e.printStackTrace();\n                Toast.makeText(getApplicationContext(), &quot;Coś poszło nie tak&quot;, LENGTH_SHORT)\n                        .show();\n            }\n        } else {\n            Toast.makeText(getApplicationContext(), &quot;Nie wybrałeś obrazu&quot;, LENGTH_SHORT).show();\n        }\n    }\n\n    if (reqCode == reqLoad) {\n\n        if (resCode == RESULT_OK) {\n\n            try {\n\n                Uri plik = Data.getData();\n                @SuppressLint(&quot;Recycle&quot;) Cursor kursor = getContentResolver().query(plik, null, null, null, null);\n\n                int nazwa_i = kursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);\n                kursor.moveToFirst();//Musi zostać - bez tego nie wyskoczy nazwa pliku\n                wczytaj.setText(kursor.getString(nazwa_i));\n\n                FileReader test = new FileReader(String.valueOf(wczytaj));\n                BufferedReader bufor_w = new BufferedReader(test);\n                String line;\n                line = bufor_w.readLine();\n                StringBuilder bob = new StringBuilder(line);\n\n                i_e_magazyn.setText(bob);\n\n                bob.append('\\n');\n\n                i_e_strefa.setText(bob);\n\n                bufor_w.close();\n                kursor.close();\n\n            } catch (Exception e) {\n\n                e.printStackTrace();\n                Toast.makeText(getApplicationContext(),&quot;Problem z uruchamianiem pliku&quot;,\n                        LENGTH_SHORT).show();\n            }\n        } else {\n            Toast.makeText(getApplicationContext(), &quot;Nie wybrałeś pliku&quot;, LENGTH_SHORT).show();\n        }\n    }\n}\n</code></pre>\n<p>Button that is responsible for loading.</p>\n<pre><code> b2.setOnClickListener(new View.OnClickListener(){\n\n       @Override\n        public void onClick(View v){\n\n           Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n           intent.addCategory(Intent.CATEGORY_OPENABLE);\n           intent.setType(&quot;text/*&quot;);\n           startActivityForResult(intent,reqLoad);\n       }\n    });\n    \n</code></pre>\n<p>File:</p>\n<pre><code>Magazyn\nStrefa\nRząd\nRama\nSłup\nUszkodzenie\nWielkość Uszkodzenia\nLokalizacja\nZielony\nDalsze Działania\nPotrzebne Elementy\nTyp Elementu\n666\n/external/images/media/68\n</code></pre>\n<p>Last line is path to image that is loaded</p>\n<p>Edit:\nProblem is not by just reading the file but to read the file that I choose.\nWhen I specify the file which has to be loaded, it loads perfectly. When I decide to show him from which file it have to load data, tells me that file doesn't exist.</p>\n<p>Code that works:</p>\n<pre><code>testowy.setOnClickListener(new View.OnClickListener(){\n\n       @Override\n        public void onClick(View v){\n\n           File pliczek = Environment.getExternalStorageDirectory();\n           File plik = new File(pliczek,&quot;/est.txt&quot;);\n           StringBuilder string;\n           string = new StringBuilder();\n\n           try{\n\n               BufferedReader reader = new BufferedReader(new FileReader(plik));\n               String linia;\n               int licz = 0;\n\n               while((linia = reader.readLine())!=null){\n\n                   switch(licz) {\n\n                       case 0:\n                            string.append(linia);\n                            i_e_magazyn.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                       case 1:\n                           string.append(linia);\n                           i_e_strefa.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 2:\n                           string.append(linia);\n                           i_e_rzad.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 3:\n                           string.append(linia);\n                           i_e_rama.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 4:\n                           string.append(linia);\n                           i_e_slup.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 5:\n                           string.append(linia);\n                           i_e_uszk.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 6:\n                           string.append(linia);\n                           i_e_w_uszk.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 7:\n                           string.append(linia);\n                           i_e_lok.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 8:\n                           string.append(linia);\n                           i_e_klasa.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 9:\n                           string.append(linia);\n                           i_e_dal_dzial.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 10:\n                           string.append(linia);\n                           i_e_pot_elem.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 11:\n                           string.append(linia);\n                           i_e_typ.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 12:\n                           string.append(linia);\n                           i_e_ilosc.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                       case 13:\n                           string.append(linia);\n                           wczytaj.setText(linia);\n                           string.append('\\n');\n                           break;\n\n                   }\n\n                   licz++;\n\n               }\n\n           } catch(FileNotFoundException e){\n\n               Toast.makeText(getApplicationContext(),&quot;Nie ma takiego pliku&quot;,LENGTH_SHORT)\n                       .show();\n\n           } catch(IOException e){\n\n               Toast.makeText(getApplicationContext(),&quot;Nie zczytano pliku&quot;,LENGTH_SHORT).show();\n\n           }\n\n       }\n\n    });\n</code></pre>\n<p>Code adapted to choose a file:</p>\n<pre><code>if (reqCode == reqLoad) {\n\n        if (resCode == RESULT_OK) {\n\n\n            Uri wskaznik = data.getData();\n\n            assert wskaznik != null;\n\n            //FileReader test = new FileReader(Data.getData().toString());\n            edytuj.setText(String.valueOf(wskaznik));\n            File pliczek = Environment.getExternalStorageDirectory();\n            File plik = new File(String.valueOf(wskaznik));\n            StringBuilder string;\n            string = new StringBuilder();\n\n            try {\n\n                BufferedReader reader = new BufferedReader(new FileReader(plik));\n                String linia;\n                int licz = 0;\n\n                while ((linia = reader.readLine()) != null) {\n\n                    switch (licz) {\n\n                        case 0:\n                            string.append(linia);\n                            i_e_magazyn.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 1:\n                            string.append(linia);\n                            i_e_strefa.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 2:\n                            string.append(linia);\n                            i_e_rzad.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 3:\n                            string.append(linia);\n                            i_e_rama.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 4:\n                            string.append(linia);\n                            i_e_slup.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 5:\n                            string.append(linia);\n                            i_e_uszk.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 6:\n                            string.append(linia);\n                            i_e_w_uszk.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 7:\n                            string.append(linia);\n                            i_e_lok.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 8:\n                            string.append(linia);\n                            i_e_klasa.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 9:\n                            string.append(linia);\n                            i_e_dal_dzial.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 10:\n                            string.append(linia);\n                            i_e_pot_elem.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 11:\n                            string.append(linia);\n                            i_e_typ.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 12:\n                            string.append(linia);\n                            i_e_ilosc.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                        case 13:\n                            string.append(linia);\n                            wczytaj.setText(linia);\n                            string.append('\\n');\n                            break;\n\n                    }\n\n                    licz++;\n\n                }\n\n            } catch (FileNotFoundException e) {\n\n                Toast.makeText(getApplicationContext(), &quot;Nie ma takiego pliku&quot;,\n                        LENGTH_SHORT)\n                        .show();\n\n            } catch (IOException e) {\n\n                Toast.makeText(getApplicationContext(), &quot;Nie zczytano pliku&quot;, LENGTH_SHORT)\n                        .show();\n\n            }\n\n        } else {\n\n            Toast.makeText(getApplicationContext(), &quot;Nie wybrałeś pliku&quot;, LENGTH_SHORT).show();\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":5559246,"reputation":3573,"user_id":4409319,"accept_rate":70,"display_name":"JSelser"},"score":0,"creation_date":1679423691,"post_id":75804605,"comment_id":133718897,"body_markdown":"interesting, there is no `ThreadID()` method in java tho. Im assuming you are creating two server objects by just doing `new Server()`?","body":"interesting, there is no <code>ThreadID()</code> method in java tho. Im assuming you are creating two server objects by just doing <code>new Server()</code>?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1679438383,"post_id":75804605,"comment_id":133722066,"body_markdown":"As JSelser pointed out, the code in the question doesn&#39;t compile. It&#39;s also missing the code that creates the `Server` objects. I tried to reproduce by changing `ThreadID` to `getId`, and added a `main` method to `Server` that creates two instances and runs them. That produced two different thread IDs. Please read [How to create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) and edit your question with a working reproduction.","body":"As JSelser pointed out, the code in the question doesn&#39;t compile. It&#39;s also missing the code that creates the <code>Server</code> objects. I tried to reproduce by changing <code>ThreadID</code> to <code>getId</code>, and added a <code>main</code> method to <code>Server</code> that creates two instances and runs them. That produced two different thread IDs. Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a> and edit your question with a working reproduction."},{"owner":{"account_id":18510547,"reputation":33,"user_id":13485856,"display_name":"PM25"},"score":0,"creation_date":1679443306,"post_id":75804605,"comment_id":133722757,"body_markdown":"Hey thanks for the helpful comments, I updated the question with more context that should hopefully make things more clear.","body":"Hey thanks for the helpful comments, I updated the question with more context that should hopefully make things more clear."}],"owner":{"account_id":18510547,"reputation":33,"user_id":13485856,"display_name":"PM25"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679443265,"creation_date":1679420145,"question_id":75804605,"body_markdown":"I have a Java program in which I am creating a distributed key-value store. For context, I have 2 objects, a Server and a ReplicaPoller, each of which are Runnable. In the Server object I have,\r\n```\r\npublic class Server implements Runnable {\r\n    boolean createdPoller = false;\r\n    // ...\r\n    \r\n    public void run() {\r\n        // ...\r\n        if (!createdPoller) {\r\n            ReplicaPoller replicaPoller = new ReplicaPoller();\r\n            Thread replicaPollerThread = new Thread(replicaPoller);\r\n            replicaPollerThread.start();\r\n            createdPoller = true;\r\n        }\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nAnd in ReplicaPoller I have, \r\n```\r\npublic class ReplicaPoller implements Runnable {\r\n    // ...\r\n\r\n    public void run() {\r\n        logger.info(hostServer.name + &quot; &quot; + Thread.currentThread().threadId());\r\n());\r\n        // hostServer is the server that created this instance of Replica Poller.\r\n        // ...\r\n    }\r\n}\r\n```\r\nHowever when I create 2 Server objects, their corresponding ReplicaPoller&#39;s log the same thread ID. Any intracasy I seem to be missing? I&#39;m creating new instances of the ReplicaPollers&#39; threads in the Server object, so I&#39;m not sure why they&#39;re using the same thread.\r\n\r\n**Edit:** For additional context, I have an external configuration service that will create the servers by executing, `Runtime.getRunTime().exec(&quot;java -jar server.jar -p port -n name&quot;)`. Where `-p` parameter is the port the server listens on and `-n` is a unique identifier for the server (serverAddress:port). Furthermore, I&#39;m using log4j for logging purposes, in which all created servers and ReplicaPollers share the same root logger and log to a file: server.log. It is in this file where I am seeing the same thread log the following:\r\n```\r\n2023-03-21 13:21:33,447 INFO  [Thread-2] 127.0.0.1:8029: 127.0.0.1:8029 25\r\n``` \r\nAND\r\n\r\n```\r\n2023-03-21 13:21:37,648 INFO  [Thread-2] 127.0.0.1:8062: 127.0.0.1:8062 25\r\n```\r\n\r\nFYI I&#39;m not sure why some are saying they are getting compiler errors with the `threadId()` method call because it works for me, and the reason why I don&#39;t use `getId()` is because my IDE (Idea) said it was deprecated ... (Using Java JDK 19).","title":"Distinct Child Threads not Being Created","body":"<p>I have a Java program in which I am creating a distributed key-value store. For context, I have 2 objects, a Server and a ReplicaPoller, each of which are Runnable. In the Server object I have,</p>\n<pre><code>public class Server implements Runnable {\n    boolean createdPoller = false;\n    // ...\n    \n    public void run() {\n        // ...\n        if (!createdPoller) {\n            ReplicaPoller replicaPoller = new ReplicaPoller();\n            Thread replicaPollerThread = new Thread(replicaPoller);\n            replicaPollerThread.start();\n            createdPoller = true;\n        }\n        // ...\n    }\n}\n</code></pre>\n<p>And in ReplicaPoller I have,</p>\n<pre><code>public class ReplicaPoller implements Runnable {\n    // ...\n\n    public void run() {\n        logger.info(hostServer.name + &quot; &quot; + Thread.currentThread().threadId());\n());\n        // hostServer is the server that created this instance of Replica Poller.\n        // ...\n    }\n}\n</code></pre>\n<p>However when I create 2 Server objects, their corresponding ReplicaPoller's log the same thread ID. Any intracasy I seem to be missing? I'm creating new instances of the ReplicaPollers' threads in the Server object, so I'm not sure why they're using the same thread.</p>\n<p><strong>Edit:</strong> For additional context, I have an external configuration service that will create the servers by executing, <code>Runtime.getRunTime().exec(&quot;java -jar server.jar -p port -n name&quot;)</code>. Where <code>-p</code> parameter is the port the server listens on and <code>-n</code> is a unique identifier for the server (serverAddress:port). Furthermore, I'm using log4j for logging purposes, in which all created servers and ReplicaPollers share the same root logger and log to a file: server.log. It is in this file where I am seeing the same thread log the following:</p>\n<pre><code>2023-03-21 13:21:33,447 INFO  [Thread-2] 127.0.0.1:8029: 127.0.0.1:8029 25\n</code></pre>\n<p>AND</p>\n<pre><code>2023-03-21 13:21:37,648 INFO  [Thread-2] 127.0.0.1:8062: 127.0.0.1:8062 25\n</code></pre>\n<p>FYI I'm not sure why some are saying they are getting compiler errors with the <code>threadId()</code> method call because it works for me, and the reason why I don't use <code>getId()</code> is because my IDE (Idea) said it was deprecated ... (Using Java JDK 19).</p>\n"},{"tags":["java","json","graphql","mocking","faker"],"owner":{"account_id":12965362,"reputation":1,"user_id":9373098,"display_name":"Rk12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679443001,"creation_date":1679440584,"question_id":75807174,"body_markdown":"Are there any open source libraries that I can use to generate meaningful fake data for internal testing?\r\nFor example Given the schema,\r\n```\r\ntype Actor {\r\n firstName: String\r\n Address: String\r\n blogUrl: String\r\n}\r\n```\r\n\r\nI want it to return meaningful data for above fields. I found some libraries which does it based on the types (i.e. String, Int etc) but it doesn&#39;t make sense when a String field could be name, address, url or something else.\r\n\r\n\r\n\r\n\r\nI have a huge graphql schema so solutions like below are ideal for me.\r\n1. Can categorize these fields and set some static value based on categories.\r\n2. Annotate these fields and based on it generate the data.","title":"Generate meaningful fake data based on graphql type or field names","body":"<p>Are there any open source libraries that I can use to generate meaningful fake data for internal testing?\nFor example Given the schema,</p>\n<pre><code>type Actor {\n firstName: String\n Address: String\n blogUrl: String\n}\n</code></pre>\n<p>I want it to return meaningful data for above fields. I found some libraries which does it based on the types (i.e. String, Int etc) but it doesn't make sense when a String field could be name, address, url or something else.</p>\n<p>I have a huge graphql schema so solutions like below are ideal for me.</p>\n<ol>\n<li>Can categorize these fields and set some static value based on categories.</li>\n<li>Annotate these fields and based on it generate the data.</li>\n</ol>\n"},{"tags":["java","spring","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1562352982,"post_id":56898864,"comment_id":100360680,"body_markdown":"you have several bad things in your code, you NEVER subscribe in a webflux application so all `subscribe` needs to be removed. And i have no idea what your question is. It when people call your service, or when your service calls another service?","body":"you have several bad things in your code, you NEVER subscribe in a webflux application so all <code>subscribe</code> needs to be removed. And i have no idea what your question is. It when people call your service, or when your service calls another service?"},{"owner":{"account_id":4750876,"reputation":1347,"user_id":3840940,"accept_rate":87,"display_name":"Joseph Hwang"},"score":0,"creation_date":1562360369,"post_id":56898864,"comment_id":100362813,"body_markdown":"Thank you for your reply.  You mean which part of my source has BAD thing? Router or WebClient? Kindly inform me the reference site as well as the my mistakes.","body":"Thank you for your reply.  You mean which part of my source has BAD thing? Router or WebClient? Kindly inform me the reference site as well as the my mistakes."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1562360746,"post_id":56898864,"comment_id":100362890,"body_markdown":"your service is a `publisher`, all clients calling it are `subscribers`. So you should not use `subscribe`","body":"your service is a <code>publisher</code>, all clients calling it are <code>subscribers</code>. So you should not use <code>subscribe</code>"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1562360856,"post_id":56898864,"comment_id":100362912,"body_markdown":"you should never `/route/user/login/{username}/{password}` this will send usernames and passwords over the internet free for everyone to see https://security.stackexchange.com/questions/142695/is-a-plain-password-in-the-url-a-potential-security-threat","body":"you should never <code>&#47;route&#47;user&#47;login&#47;{username}&#47;{password}</code> this will send usernames and passwords over the internet free for everyone to see <a href=\"https://security.stackexchange.com/questions/142695/is-a-plain-password-in-the-url-a-potential-security-threat\" title=\"is a plain password in the url a potential security threat\">security.stackexchange.com/questions/142695/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1712006,"reputation":2649,"user_id":8951344,"display_name":"MuratOzkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1562361514,"creation_date":1562361514,"answer_id":56909333,"question_id":56898864,"body_markdown":"HTTP Basic authentication expects the username and password encoded in Base64 format in `Authorization` header. Also, you don&#39;t need to have a login endpoint since this information should be sent with every request.\r\n\r\nAdd the Basic Auth header to each call in your client like the following:\r\n\r\n    String basicAuthHeader = &quot;basic &quot; + Base64Utils.encodeToString((username + &quot;:&quot; + password).getBytes())\r\n\r\n    client.get().uri(&quot;/route/user/all&quot;)\r\n          .accept(MediaType.APPLICATION_JSON)\r\n          .header(HttpHeaders.AUTHORIZATION, basicAuthHeader)\r\n          .exchange()\r\n          .flatMapMany(response -&gt; response.bodyToFlux(User.class))\r\n          .subscribe(u -&gt; System.out.println(&quot;All Users : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n","title":"Where to put username and password of WebClient of Spring Webflux?","body":"<p>HTTP Basic authentication expects the username and password encoded in Base64 format in <code>Authorization</code> header. Also, you don't need to have a login endpoint since this information should be sent with every request.</p>\n\n<p>Add the Basic Auth header to each call in your client like the following:</p>\n\n<pre><code>String basicAuthHeader = \"basic \" + Base64Utils.encodeToString((username + \":\" + password).getBytes())\n\nclient.get().uri(\"/route/user/all\")\n      .accept(MediaType.APPLICATION_JSON)\n      .header(HttpHeaders.AUTHORIZATION, basicAuthHeader)\n      .exchange()\n      .flatMapMany(response -&gt; response.bodyToFlux(User.class))\n      .subscribe(u -&gt; System.out.println(\"All Users : \" + u.getUsername() + \":\" + u.getEmail() + \":\" + u.getFullname()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2588244,"reputation":71,"user_id":2243444,"display_name":"Anton Bogdan"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1589025900,"creation_date":1589025900,"answer_id":61696434,"question_id":56898864,"body_markdown":"Spring provides API for supplying basic authentication parameters to your WebClient via [ClientFilters](https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-filter).\r\n\r\nYou can achieve the same result of having `Authorization` header set up with less custom coding.\r\n\r\nPlease see code snippet below from spring docs:\r\n\r\n   \r\n\r\n    import static org.springframework.web.reactive.function.client.ExchangeFilterFunctions.basicAuthentication;\r\n        \r\n        WebClient client = WebClient.builder()\r\n                .filter(basicAuthentication(&quot;user&quot;, &quot;password&quot;))\r\n                .build();","title":"Where to put username and password of WebClient of Spring Webflux?","body":"<p>Spring provides API for supplying basic authentication parameters to your WebClient via <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-filter\" rel=\"noreferrer\">ClientFilters</a>.</p>\n\n<p>You can achieve the same result of having <code>Authorization</code> header set up with less custom coding.</p>\n\n<p>Please see code snippet below from spring docs:</p>\n\n<pre><code>import static org.springframework.web.reactive.function.client.ExchangeFilterFunctions.basicAuthentication;\n\n    WebClient client = WebClient.builder()\n            .filter(basicAuthentication(\"user\", \"password\"))\n            .build();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1702340990,"post_id":62973691,"comment_id":136881933,"body_markdown":"This approach also works for the [RestClient](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestClient.html) which was introduced in [Spring 6.1](https://spring.io/blog/2023/07/13/new-in-spring-6-1-restclient).","body":"This approach also works for the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestClient.html\" rel=\"nofollow noreferrer\">RestClient</a> which was introduced in <a href=\"https://spring.io/blog/2023/07/13/new-in-spring-6-1-restclient\" rel=\"nofollow noreferrer\">Spring 6.1</a>."}],"tags":[],"owner":{"account_id":107251,"reputation":11864,"user_id":285288,"accept_rate":64,"display_name":"James"},"comment_count":1,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1601381692,"creation_date":1595105595,"answer_id":62973691,"question_id":56898864,"body_markdown":"Since spring 5.1 you should set basic authentication with [`HttpHeaders#setBasicAuth`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpHeaders.html#setBasicAuth-java.lang.String-java.lang.String-), like this:\r\n```\r\nwebClient\r\n    .get()\r\n    .uri(&quot;https://example.com&quot;)\r\n    .headers(headers -&gt; headers.setBasicAuth(&quot;username&quot;, &quot;password&quot;))\r\n    .exchange()\r\n    ....\r\n```\r\nthe previous approach, of using [`.filter(basicAuthentication(&quot;user&quot;, &quot;password&quot;)`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/client/ExchangeFilterFunctions.html#basicAuthentication-java.lang.String-java.lang.String-), is now deprecated.\r\n","title":"Where to put username and password of WebClient of Spring Webflux?","body":"<p>Since spring 5.1 you should set basic authentication with <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpHeaders.html#setBasicAuth-java.lang.String-java.lang.String-\" rel=\"noreferrer\"><code>HttpHeaders#setBasicAuth</code></a>, like this:</p>\n<pre><code>webClient\n    .get()\n    .uri(&quot;https://example.com&quot;)\n    .headers(headers -&gt; headers.setBasicAuth(&quot;username&quot;, &quot;password&quot;))\n    .exchange()\n    ....\n</code></pre>\n<p>the previous approach, of using <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/client/ExchangeFilterFunctions.html#basicAuthentication-java.lang.String-java.lang.String-\" rel=\"noreferrer\"><code>.filter(basicAuthentication(&quot;user&quot;, &quot;password&quot;)</code></a>, is now deprecated.</p>\n"}],"owner":{"account_id":4750876,"reputation":1347,"user_id":3840940,"accept_rate":87,"display_name":"Joseph Hwang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19868,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":56909333,"answer_count":3,"score":10,"last_activity_date":1679442899,"creation_date":1562313328,"question_id":56898864,"body_markdown":"I try to make Spring WebFlux security application with router and handler classes. First, below codes are the configuration codes of WebFlux security.\r\n\r\n```lang-java\r\n@Configuration\r\n@EnableWebFluxSecurity\r\npublic class BlogWebFluxSecurityConfig {\r\n\t\r\n\t@Bean\r\n\tpublic MapReactiveUserDetailsService userDetailsService() {\r\n\t\t\r\n\t\tUserDetails userWebFlux = User.withUsername(&quot;joseph&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;).build();\r\n\t\treturn new MapReactiveUserDetailsService(userWebFlux);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n\t\thttp\r\n\t\t.authorizeExchange()\r\n\t\t.pathMatchers(&quot;/route/user/all&quot;, &quot;/route/post/all&quot;).permitAll()\r\n\t    .pathMatchers(HttpMethod.GET, &quot;/route/user/**&quot;, &quot;/route/post/**&quot;).hasRole(&quot;USER&quot;)\r\n\t    .anyExchange().authenticated()\r\n\t    .and()\r\n\t    .httpBasic();\r\n\t\t\r\n\t\treturn http.build();\r\n\t} \r\n}\r\n```\r\n\r\nAnd the next codes are about the router class:\r\n\r\n```lang-java\r\n@Configuration\r\n@EnableWebFlux\r\npublic class BlogWebFluxEndpointRouter {\r\n\r\n\t@Bean\r\n\tpublic RouterFunction&lt;ServerResponse&gt; routesUser(UserHandler handler) {\r\n\t\t\r\n\t\treturn RouterFunctions.route(RequestPredicates.GET(&quot;/route/user/all&quot;), handler::findAll)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/user/id/{id}&quot;), handler::findById)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/user/username/{username}&quot;), handler::findByUsername)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/user/email/{email}&quot;), handler::findByEmail)\r\n\t\t\t\t\t.andRoute(RequestPredicates.POST(&quot;/route/user/create&quot;), handler::register)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/user/login/{username}/{password}&quot;), handler::authenticate);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic RouterFunction&lt;ServerResponse&gt; routesPost(PostHandler handler) {\r\n\t\t\r\n\t\treturn RouterFunctions.route(RequestPredicates.GET(&quot;/route/post/all&quot;), handler::findAll)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/post/id/{id}&quot;), handler::findById)\r\n\t\t\t\t\t.andRoute(RequestPredicates.GET(&quot;/route/post/delete/{id}&quot;), handler::deleteById)\r\n\t\t\t\t\t.andRoute(RequestPredicates.POST(&quot;/route/post/create&quot;), handler::create)\r\n\t\t\t\t\t.andRoute(RequestPredicates.PUT(&quot;/route/post/{id}/{content}&quot;), handler::edit);\r\n\t}\r\n}\r\n```\r\n\r\nEven the network is REST web service, But I use `WebClient` class of WebFlux.\r\n\r\n```lang-java\r\npublic void functionOnUserDocument() { \r\n\tclient.get().uri(&quot;/route/user/all&quot;).accept(MediaType.APPLICATION_JSON).exchange()\r\n\t\t\t.flatMapMany(response -&gt; response.bodyToFlux(User.class))\r\n\t\t\t.subscribe(u -&gt; System.out.println(&quot;All Users : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n\t\r\n\tclient.get().uri(&quot;/route/user/id/{id}&quot;, &quot;0002&quot;).accept(MediaType.APPLICATION_JSON).exchange()\r\n\t\t\t.flatMap(response -&gt; response.bodyToMono(User.class))\r\n\t\t\t.subscribe(u -&gt; System.out.println(&quot;GET by Id : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n\t\r\n\tclient.get().uri(&quot;/route/user/username/{username}&quot;, &quot;jina&quot;).accept(MediaType.APPLICATION_JSON).exchange()\r\n\t\t\t.flatMap(response -&gt; response.bodyToMono(User.class))\r\n\t\t\t.subscribe(u -&gt; System.out.println(&quot;Get by username : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n\r\n\tclient.get().uri(&quot;/route/user/email/{email}&quot;, &quot;myson@college.ac.kr&quot;).accept(MediaType.APPLICATION_JSON).exchange()\r\n\t\t\t.flatMap(response -&gt; response.bodyToMono(User.class))\r\n\t\t\t.subscribe(u -&gt; System.out.println(&quot;Get By Email : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\r\n\t\r\n\tclient.get().uri(&quot;/route/user/login/{username}/{password}&quot;, &quot;julian&quot;, &quot;password&quot;).exchange()\r\n\t\t\t.map(ClientResponse::statusCode).subscribe(response -&gt; System.out.println(&quot;Login : &quot; + response.getReasonPhrase()));\r\n\t\r\n\tUser user = new User(&quot;0005&quot;, 4L, &quot;jane&quot;, &quot;password&quot;, &quot;aaa@bbb.com&quot;, &quot;누나&quot;, &quot;USER&quot;);\r\n\r\n\tclient.post().uri(&quot;/route/user/create&quot;).body(Mono.just(user), User.class).exchange() \r\n\t\t\t.map(ClientResponse::statusCode).subscribe(response -&gt; System.out.println(&quot;User Creation: &quot; + response.getReasonPhrase()));\r\n}\r\n```\r\n\r\n \r\nBecause I make the WebFlux security configuration, definitely some `WebClient` can not be executed and forbidden like below:\r\n\r\n```lang-none\r\nLogin : Unauthorized\r\nUser Creation: Forbidden\r\n```\r\n\r\nI do not use cURL. So what I want to know is what my `WebClient` methods are to be, where username and password have to be located and transferred to `WebClient` class.\r\n","title":"Where to put username and password of WebClient of Spring Webflux?","body":"<p>I try to make Spring WebFlux security application with router and handler classes. First, below codes are the configuration codes of WebFlux security.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFluxSecurity\npublic class BlogWebFluxSecurityConfig {\n    \n    @Bean\n    public MapReactiveUserDetailsService userDetailsService() {\n        \n        UserDetails userWebFlux = User.withUsername(&quot;joseph&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;).build();\n        return new MapReactiveUserDetailsService(userWebFlux);\n    }\n    \n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n        http\n        .authorizeExchange()\n        .pathMatchers(&quot;/route/user/all&quot;, &quot;/route/post/all&quot;).permitAll()\n        .pathMatchers(HttpMethod.GET, &quot;/route/user/**&quot;, &quot;/route/post/**&quot;).hasRole(&quot;USER&quot;)\n        .anyExchange().authenticated()\n        .and()\n        .httpBasic();\n        \n        return http.build();\n    } \n}\n</code></pre>\n<p>And the next codes are about the router class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFlux\npublic class BlogWebFluxEndpointRouter {\n\n    @Bean\n    public RouterFunction&lt;ServerResponse&gt; routesUser(UserHandler handler) {\n        \n        return RouterFunctions.route(RequestPredicates.GET(&quot;/route/user/all&quot;), handler::findAll)\n                    .andRoute(RequestPredicates.GET(&quot;/route/user/id/{id}&quot;), handler::findById)\n                    .andRoute(RequestPredicates.GET(&quot;/route/user/username/{username}&quot;), handler::findByUsername)\n                    .andRoute(RequestPredicates.GET(&quot;/route/user/email/{email}&quot;), handler::findByEmail)\n                    .andRoute(RequestPredicates.POST(&quot;/route/user/create&quot;), handler::register)\n                    .andRoute(RequestPredicates.GET(&quot;/route/user/login/{username}/{password}&quot;), handler::authenticate);\n    }\n    \n    @Bean\n    public RouterFunction&lt;ServerResponse&gt; routesPost(PostHandler handler) {\n        \n        return RouterFunctions.route(RequestPredicates.GET(&quot;/route/post/all&quot;), handler::findAll)\n                    .andRoute(RequestPredicates.GET(&quot;/route/post/id/{id}&quot;), handler::findById)\n                    .andRoute(RequestPredicates.GET(&quot;/route/post/delete/{id}&quot;), handler::deleteById)\n                    .andRoute(RequestPredicates.POST(&quot;/route/post/create&quot;), handler::create)\n                    .andRoute(RequestPredicates.PUT(&quot;/route/post/{id}/{content}&quot;), handler::edit);\n    }\n}\n</code></pre>\n<p>Even the network is REST web service, But I use <code>WebClient</code> class of WebFlux.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void functionOnUserDocument() { \n    client.get().uri(&quot;/route/user/all&quot;).accept(MediaType.APPLICATION_JSON).exchange()\n            .flatMapMany(response -&gt; response.bodyToFlux(User.class))\n            .subscribe(u -&gt; System.out.println(&quot;All Users : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\n    \n    client.get().uri(&quot;/route/user/id/{id}&quot;, &quot;0002&quot;).accept(MediaType.APPLICATION_JSON).exchange()\n            .flatMap(response -&gt; response.bodyToMono(User.class))\n            .subscribe(u -&gt; System.out.println(&quot;GET by Id : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\n    \n    client.get().uri(&quot;/route/user/username/{username}&quot;, &quot;jina&quot;).accept(MediaType.APPLICATION_JSON).exchange()\n            .flatMap(response -&gt; response.bodyToMono(User.class))\n            .subscribe(u -&gt; System.out.println(&quot;Get by username : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\n\n    client.get().uri(&quot;/route/user/email/{email}&quot;, &quot;myson@college.ac.kr&quot;).accept(MediaType.APPLICATION_JSON).exchange()\n            .flatMap(response -&gt; response.bodyToMono(User.class))\n            .subscribe(u -&gt; System.out.println(&quot;Get By Email : &quot; + u.getUsername() + &quot;:&quot; + u.getEmail() + &quot;:&quot; + u.getFullname()));\n    \n    client.get().uri(&quot;/route/user/login/{username}/{password}&quot;, &quot;julian&quot;, &quot;password&quot;).exchange()\n            .map(ClientResponse::statusCode).subscribe(response -&gt; System.out.println(&quot;Login : &quot; + response.getReasonPhrase()));\n    \n    User user = new User(&quot;0005&quot;, 4L, &quot;jane&quot;, &quot;password&quot;, &quot;aaa@bbb.com&quot;, &quot;누나&quot;, &quot;USER&quot;);\n\n    client.post().uri(&quot;/route/user/create&quot;).body(Mono.just(user), User.class).exchange() \n            .map(ClientResponse::statusCode).subscribe(response -&gt; System.out.println(&quot;User Creation: &quot; + response.getReasonPhrase()));\n}\n</code></pre>\n<p>Because I make the WebFlux security configuration, definitely some <code>WebClient</code> can not be executed and forbidden like below:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Login : Unauthorized\nUser Creation: Forbidden\n</code></pre>\n<p>I do not use cURL. So what I want to know is what my <code>WebClient</code> methods are to be, where username and password have to be located and transferred to <code>WebClient</code> class.</p>\n"},{"tags":["java","java-8","java-stream","iterable"],"comments":[{"owner":{"account_id":1961505,"reputation":15729,"user_id":1762944,"accept_rate":68,"display_name":"Afzaal Ahmad Zeeshan"},"score":2,"creation_date":1401362294,"post_id":23932061,"comment_id":36859146,"body_markdown":"If you can iterate, why not simly use a loop to check its condition or value or what so ever?","body":"If you can iterate, why not simly use a loop to check its condition or value or what so ever?"},{"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"score":34,"creation_date":1401362347,"post_id":23932061,"comment_id":36859175,"body_markdown":"@AfzaalAhmadZeeshan because streams are much better","body":"@AfzaalAhmadZeeshan because streams are much better"},{"owner":{"account_id":95715,"reputation":20966,"user_id":260511,"accept_rate":81,"display_name":"rayman"},"score":2,"creation_date":1401362367,"post_id":23932061,"comment_id":36859193,"body_markdown":"As I said, I need to do some maniuplations on that list (filters, mapping). I would like to use the new Java 8 JDK API - &gt; Stream. but Iterable isnot &quot;SteamAble&quot;","body":"As I said, I need to do some maniuplations on that list (filters, mapping). I would like to use the new Java 8 JDK API - &gt; Stream. but Iterable isnot &quot;SteamAble&quot;"},{"owner":{"account_id":156734,"reputation":26707,"user_id":374198,"accept_rate":62,"display_name":"Josh M."},"score":1,"creation_date":1529072104,"post_id":23932061,"comment_id":88756684,"body_markdown":"Seems weird that `myIterable.stream()` does not exist!","body":"Seems weird that <code>myIterable.stream()</code> does not exist!"},{"owner":{"account_id":10694047,"reputation":1,"user_id":7871899,"display_name":"Guillaume"},"score":0,"creation_date":1530300288,"post_id":23932061,"comment_id":89207043,"body_markdown":"In 2018 we also have Stream.of(iterable)","body":"In 2018 we also have Stream.of(iterable)"},{"owner":{"account_id":406441,"reputation":32619,"user_id":775954,"accept_rate":85,"display_name":"Matthias Braun"},"score":14,"creation_date":1538669798,"post_id":23932061,"comment_id":92234308,"body_markdown":"@Guillaume: Yes, but `Stream.of(iterable)` produces `Stream&lt;Iterable&lt;Object&gt;&gt;`.","body":"@Guillaume: Yes, but <code>Stream.of(iterable)</code> produces <code>Stream&lt;Iterable&lt;Object&gt;&gt;</code>."}],"answers":[{"comments":[{"owner":{"account_id":1505025,"reputation":38875,"user_id":1408611,"accept_rate":73,"display_name":"gexicide"},"score":2,"creation_date":1401363766,"post_id":23932216,"comment_id":36859979,"body_markdown":"You have to write this function once and then just call it. Why does a call to `stream(...)` clutter your code?","body":"You have to write this function once and then just call it. Why does a call to <code>stream(...)</code> clutter your code?"},{"owner":{"account_id":95715,"reputation":20966,"user_id":260511,"accept_rate":81,"display_name":"rayman"},"score":1,"creation_date":1401363936,"post_id":23932216,"comment_id":36860073,"body_markdown":"Wanted to do it Inline short and elegant.. you right I can write this function once.. but I am into dropping code (and not adding code). anyway this answer is right because thats the way to convert this.","body":"Wanted to do it Inline short and elegant.. you right I can write this function once.. but I am into dropping code (and not adding code). anyway this answer is right because thats the way to convert this."},{"owner":{"account_id":53291,"reputation":1729,"user_id":159326,"accept_rate":87,"display_name":"aepurniet"},"score":0,"creation_date":1401364148,"post_id":23932216,"comment_id":36860194,"body_markdown":"static import said function. short and elegant. (though not necessarily transparent)","body":"static import said function. short and elegant. (though not necessarily transparent)"}],"tags":[],"owner":{"account_id":1370027,"reputation":49130,"user_id":1305501,"accept_rate":77,"display_name":"nosid"},"comment_count":3,"down_vote_count":5,"up_vote_count":29,"is_accepted":false,"score":24,"last_activity_date":1423403639,"creation_date":1401362762,"answer_id":23932216,"question_id":23932061,"body_markdown":"You can easily create a `Stream` out of an `Iterable` or `Iterator`:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\r\n        return StreamSupport.stream(\r\n\t\t\tSpliterators.spliteratorUnknownSize(\r\n\t\t\t\titerable.iterator(),\r\n\t\t\t\tSpliterator.ORDERED\r\n\t\t\t),\r\n\t\t\tfalse\r\n\t\t);\r\n    }","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>You can easily create a <code>Stream</code> out of an <code>Iterable</code> or <code>Iterator</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\n    return StreamSupport.stream(\n        Spliterators.spliteratorUnknownSize(\n            iterable.iterator(),\n            Spliterator.ORDERED\n        ),\n        false\n    );\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":116723,"reputation":30387,"user_id":305973,"accept_rate":67,"display_name":"robinst"},"score":139,"creation_date":1440653713,"post_id":23936723,"comment_id":52364127,"body_markdown":"A static method on `Stream` would have been nice, e.g. `Stream.ofIterable(iterable)`.","body":"A static method on <code>Stream</code> would have been nice, e.g. <code>Stream.ofIterable(iterable)</code>."},{"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"score":89,"creation_date":1472051001,"post_id":23936723,"comment_id":65599252,"body_markdown":"@robinst This wasn&#39;t an omission; it was a deliberate (and highly debated) choice.  The challenge is that were this to exist, it would just be too easy to reach for it without understanding the tradeoffs that come with it.  Because Iterable is so abstract, such a method would result in the worst-performing stream possible (no parallel support, no size information or characteristics (used to optimize execution choices)).  Forcing more thought results in better APIs across the entire ecosystem.  This was a tradeoff of &quot;what&#39;s best for XYZ code&quot; vs &quot;what&#39;s best for all Java code.&quot;","body":"@robinst This wasn&#39;t an omission; it was a deliberate (and highly debated) choice.  The challenge is that were this to exist, it would just be too easy to reach for it without understanding the tradeoffs that come with it.  Because Iterable is so abstract, such a method would result in the worst-performing stream possible (no parallel support, no size information or characteristics (used to optimize execution choices)).  Forcing more thought results in better APIs across the entire ecosystem.  This was a tradeoff of &quot;what&#39;s best for XYZ code&quot; vs &quot;what&#39;s best for all Java code.&quot;"},{"owner":{"account_id":7600,"reputation":6724,"user_id":13253,"accept_rate":100,"display_name":"qualidafial"},"score":3,"creation_date":1473020139,"post_id":23936723,"comment_id":65974092,"body_markdown":"Based on your explanation, I&#39;m curious why we got Collection.stream() but not Iterable.stream(). It seems like the reasoning to omit Iterable.stream() (or Stream.ofIterable()) applies equally to Collection.stream().","body":"Based on your explanation, I&#39;m curious why we got Collection.stream() but not Iterable.stream(). It seems like the reasoning to omit Iterable.stream() (or Stream.ofIterable()) applies equally to Collection.stream()."},{"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"score":6,"creation_date":1473020964,"post_id":23936723,"comment_id":65974294,"body_markdown":"@qualidafial See http://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods.","body":"@qualidafial See <a href=\"http://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods\" title=\"why does iterablet not provide stream and parallelstream methods\">stackoverflow.com/questions/23114015/&hellip;</a>."},{"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"score":14,"creation_date":1481070469,"post_id":23936723,"comment_id":69223138,"body_markdown":"@BrianGoetz It looks most of people are not in the level to understand you said above or don&#39;t care about. they only want to write the simple code by calling simple API. On the other hand, those things(parallel...) maybe not important to most of daily iterable operations.","body":"@BrianGoetz It looks most of people are not in the level to understand you said above or don&#39;t care about. they only want to write the simple code by calling simple API. On the other hand, those things(parallel...) maybe not important to most of daily iterable operations."},{"owner":{"account_id":3197637,"reputation":1437,"user_id":2700478,"accept_rate":29,"display_name":"St&#233;phane Appercel"},"score":2,"creation_date":1500097108,"post_id":23936723,"comment_id":77200979,"body_markdown":"Based on the explanations given so far, I would expect to have Stream.ofIterable(Iterable&lt;T&gt; iterable, boolean parallel), and Stream.ofIterable(Iterable&lt;T&gt; iterable), which defaults to a non-parallel stream of items. More generally speaking, StreamSupport helpers should be in the Stream class.","body":"Based on the explanations given so far, I would expect to have Stream.ofIterable(Iterable&lt;T&gt; iterable, boolean parallel), and Stream.ofIterable(Iterable&lt;T&gt; iterable), which defaults to a non-parallel stream of items. More generally speaking, StreamSupport helpers should be in the Stream class."},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":1,"creation_date":1543725543,"post_id":23936723,"comment_id":94018874,"body_markdown":"@St&#233;phaneAppercel Please read the comment above between Brian and Robin.","body":"@St&#233;phaneAppercel Please read the comment above between Brian and Robin."}],"tags":[],"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"comment_count":7,"down_vote_count":2,"up_vote_count":697,"is_accepted":true,"score":695,"last_activity_date":1538670206,"creation_date":1401376555,"answer_id":23936723,"question_id":23932061,"body_markdown":"There&#39;s a much better answer than using `spliteratorUnknownSize` directly, which is both easier and gets a better result.  `Iterable` has a `spliterator()` method, so you should just use that to get your spliterator.  In the worst case, it&#39;s the same code (the default implementation uses `spliteratorUnknownSize`), but in the more common case, where your `Iterable` is already a collection, you&#39;ll get a better spliterator, and therefore better stream performance (maybe even good parallelism).  It&#39;s also less code:\r\n\r\n    StreamSupport.stream(iterable.spliterator(), false)\r\n                 .filter(...)\r\n                 .moreStreamOps(...);\r\n\r\nAs you can see, getting a stream from an `Iterable` (see also [this question]( https://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods?rq=1)) is not very painful.\r\n","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>There's a much better answer than using <code>spliteratorUnknownSize</code> directly, which is both easier and gets a better result.  <code>Iterable</code> has a <code>spliterator()</code> method, so you should just use that to get your spliterator.  In the worst case, it's the same code (the default implementation uses <code>spliteratorUnknownSize</code>), but in the more common case, where your <code>Iterable</code> is already a collection, you'll get a better spliterator, and therefore better stream performance (maybe even good parallelism).  It's also less code:</p>\n\n<pre><code>StreamSupport.stream(iterable.spliterator(), false)\n             .filter(...)\n             .moreStreamOps(...);\n</code></pre>\n\n<p>As you can see, getting a stream from an <code>Iterable</code> (see also <a href=\"https://stackoverflow.com/questions/23114015/why-does-iterablet-not-provide-stream-and-parallelstream-methods?rq=1\">this question</a>) is not very painful.</p>\n"},{"comments":[{"owner":{"account_id":953817,"reputation":493,"user_id":979478,"display_name":"Pawel Zieminski"},"score":0,"creation_date":1682362700,"post_id":33549645,"comment_id":134200224,"body_markdown":"Wow there is a whole JOO* family. I was only familiar with JOOQ. Thanks!","body":"Wow there is a whole JOO* family. I was only familiar with JOOQ. Thanks!"}],"tags":[],"owner":{"account_id":1443877,"reputation":15264,"user_id":1363110,"display_name":"Shaggie"},"comment_count":1,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1594496367,"creation_date":1446740305,"answer_id":33549645,"question_id":23932061,"body_markdown":"I would like to suggest using [JOOL](https://github.com/jOOQ/jOOL) library, it hides spliterator magic behind the `Seq.seq(iterable)` call and also provides a whole bunch of additional useful functionality.","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>I would like to suggest using <a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow noreferrer\">JOOL</a> library, it hides spliterator magic behind the <code>Seq.seq(iterable)</code> call and also provides a whole bunch of additional useful functionality.</p>\n"},{"tags":[],"owner":{"account_id":1851947,"reputation":1465,"user_id":1678314,"display_name":"g-t"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1461234709,"creation_date":1461234709,"answer_id":36766889,"question_id":23932061,"body_markdown":"I&#39;ve created this class:\r\n\r\n    public class Streams {\r\n        /**\r\n         * Converts Iterable to stream\r\n         */\r\n        public static &lt;T&gt; Stream&lt;T&gt;  streamOf(final Iterable&lt;T&gt; iterable) {\r\n            return toStream(iterable, false);\r\n        }\r\n    \r\n        /**\r\n         * Converts Iterable to parallel stream\r\n         */\r\n        public static &lt;T&gt; Stream&lt;T&gt; parallelStreamOf(final Iterable&lt;T&gt; iterable) {\r\n            return toStream(iterable, true);\r\n        }\r\n    \r\n        private static &lt;T&gt; Stream&lt;T&gt; toStream(final Iterable&lt;T&gt; iterable, final boolean isParallel) {\r\n            return StreamSupport.stream(iterable.spliterator(), isParallel);\r\n        }\r\n    }\r\n\r\nI think it&#39;s perfectly readable because you don&#39;t have to think about spliterators and booleans (isParallel).","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>I've created this class:</p>\n\n<pre><code>public class Streams {\n    /**\n     * Converts Iterable to stream\n     */\n    public static &lt;T&gt; Stream&lt;T&gt;  streamOf(final Iterable&lt;T&gt; iterable) {\n        return toStream(iterable, false);\n    }\n\n    /**\n     * Converts Iterable to parallel stream\n     */\n    public static &lt;T&gt; Stream&lt;T&gt; parallelStreamOf(final Iterable&lt;T&gt; iterable) {\n        return toStream(iterable, true);\n    }\n\n    private static &lt;T&gt; Stream&lt;T&gt; toStream(final Iterable&lt;T&gt; iterable, final boolean isParallel) {\n        return StreamSupport.stream(iterable.spliterator(), isParallel);\n    }\n}\n</code></pre>\n\n<p>I think it's perfectly readable because you don't have to think about spliterators and booleans (isParallel).</p>\n"},{"comments":[{"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"score":3,"creation_date":1486130769,"post_id":41672801,"comment_id":71226096,"body_markdown":"Or, if you are stuck at an older version, use `Lists.newArrayList(Iterable)`.","body":"Or, if you are stuck at an older version, use <code>Lists.newArrayList(Iterable)</code>."},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1562757470,"post_id":41672801,"comment_id":100475648,"body_markdown":"Current Guava implementation is not worse than accepted answer: https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Streams.java#L60","body":"Current Guava implementation is not worse than accepted answer: <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Streams.java#L60\" rel=\"nofollow noreferrer\">github.com/google/guava/blob/master/guava/src/com/google/com&zwnj;&#8203;mon/&hellip;</a>"}],"tags":[],"owner":{"account_id":4243811,"reputation":4011,"user_id":3473046,"accept_rate":20,"display_name":"num&#233;ro6"},"comment_count":2,"down_vote_count":0,"up_vote_count":95,"is_accepted":false,"score":95,"last_activity_date":1484557878,"creation_date":1484557878,"answer_id":41672801,"question_id":23932061,"body_markdown":"If you can use Guava library, since version 21, you can use\r\n\r\n    Streams.stream(iterable)","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>If you can use Guava library, since version 21, you can use</p>\n\n<pre><code>Streams.stream(iterable)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1502274465,"creation_date":1491823912,"answer_id":43322051,"question_id":23932061,"body_markdown":"A very simple work-around for this issue is to create a `Streamable&lt;T&gt;` interface extending `Iterable&lt;T&gt;` that holds a `default &lt;T&gt; stream()` method.\r\n\r\n    interface Streamable&lt;T&gt; extends Iterable&lt;T&gt; {\r\n        default Stream&lt;T&gt; stream() {\r\n            return StreamSupport.stream(spliterator(), false);\r\n        }\r\n    }\r\n\r\nNow any of your `Iterable&lt;T&gt;`s can be trivially made streamable just by declaring them `implements Streamable&lt;T&gt;` instead of `Iterable&lt;T&gt;`.\r\n\r\n","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>A very simple work-around for this issue is to create a <code>Streamable&lt;T&gt;</code> interface extending <code>Iterable&lt;T&gt;</code> that holds a <code>default &lt;T&gt; stream()</code> method.</p>\n\n<pre><code>interface Streamable&lt;T&gt; extends Iterable&lt;T&gt; {\n    default Stream&lt;T&gt; stream() {\n        return StreamSupport.stream(spliterator(), false);\n    }\n}\n</code></pre>\n\n<p>Now any of your <code>Iterable&lt;T&gt;</code>s can be trivially made streamable just by declaring them <code>implements Streamable&lt;T&gt;</code> instead of <code>Iterable&lt;T&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501003853,"creation_date":1501003853,"answer_id":45310076,"question_id":23932061,"body_markdown":"If you happen to use Vavr(formerly known as Javaslang), this can be as easy as:\r\n\r\n    Iterable i = //...\r\n    Stream.ofAll(i);","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>If you happen to use Vavr(formerly known as Javaslang), this can be as easy as:</p>\n\n<pre><code>Iterable i = //...\nStream.ofAll(i);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":476761,"reputation":24593,"user_id":887836,"accept_rate":96,"display_name":"Alexander Oh"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1509710993,"creation_date":1509710574,"answer_id":47095341,"question_id":23932061,"body_markdown":"So as another answer mentioned Guava has support for this by using:\r\n\r\n    Streams.stream(iterable);\r\n\r\nI want to highlight that the implementation does something slightly different than other answers suggested. If the `Iterable` is of type `Collection` they cast it.\r\n\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\r\n      return (iterable instanceof Collection)\r\n        ? ((Collection&lt;T&gt;) iterable).stream()\r\n        : StreamSupport.stream(iterable.spliterator(), false);\r\n    }\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; stream(Iterator&lt;T&gt; iterator) {\r\n      return StreamSupport.stream(\r\n        Spliterators.spliteratorUnknownSize(iterator, 0),\r\n        false\r\n      );\r\n    }\r\n\r\n","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>So as another answer mentioned Guava has support for this by using:</p>\n\n<pre><code>Streams.stream(iterable);\n</code></pre>\n\n<p>I want to highlight that the implementation does something slightly different than other answers suggested. If the <code>Iterable</code> is of type <code>Collection</code> they cast it.</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; stream(Iterable&lt;T&gt; iterable) {\n  return (iterable instanceof Collection)\n    ? ((Collection&lt;T&gt;) iterable).stream()\n    : StreamSupport.stream(iterable.spliterator(), false);\n}\n\npublic static &lt;T&gt; Stream&lt;T&gt; stream(Iterator&lt;T&gt; iterator) {\n  return StreamSupport.stream(\n    Spliterators.spliteratorUnknownSize(iterator, 0),\n    false\n  );\n}\n</code></pre>\n"}],"owner":{"account_id":95715,"reputation":20966,"user_id":260511,"accept_rate":81,"display_name":"rayman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158920,"favorite_count":0,"down_vote_count":0,"up_vote_count":510,"accepted_answer_id":23936723,"answer_count":8,"score":510,"last_activity_date":1679442482,"creation_date":1401362188,"question_id":23932061,"body_markdown":"I have an interface which returns `java.lang.Iterable&lt;T&gt;`.\r\n\r\nI would like to manipulate that result using the Java 8 Stream API.\r\n\r\nHowever Iterable can&#39;t &quot;stream&quot;.\r\n\r\nAny idea how to use the Iterable as a Stream without converting it to List?\r\n","title":"Convert Iterable to Stream using Java 8 JDK","body":"<p>I have an interface which returns <code>java.lang.Iterable&lt;T&gt;</code>.</p>\n\n<p>I would like to manipulate that result using the Java 8 Stream API.</p>\n\n<p>However Iterable can't \"stream\".</p>\n\n<p>Any idea how to use the Iterable as a Stream without converting it to List?</p>\n"},{"tags":["python","java","android","sockets","p2p"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1678142272,"post_id":75656454,"comment_id":133473069,"body_markdown":"When you connect without internet it&#39;s called a LAN. https://www.techtarget.com/searchnetworking/feature/Whats-the-difference-between-internet-and-Ethernet","body":"When you connect without internet it&#39;s called a LAN. <a href=\"https://www.techtarget.com/searchnetworking/feature/Whats-the-difference-between-internet-and-Ethernet\" rel=\"nofollow noreferrer\">techtarget.com/searchnetworking/feature/&hellip;</a>"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1678142507,"post_id":75656454,"comment_id":133473104,"body_markdown":"Alternately, for a homebrew (and also still some industrial projects) serial communication might be an option.    https://www.seeedstudio.com/blog/2019/12/06/what-is-rs485-and-its-difference-between-rs232/ (And for even more homebrew, I&#39;ve also seen people connect op-amps directly to digital output to make their own serial bus. All depends on your requirements.)","body":"Alternately, for a homebrew (and also still some industrial projects) serial communication might be an option.    <a href=\"https://www.seeedstudio.com/blog/2019/12/06/what-is-rs485-and-its-difference-between-rs232/\" rel=\"nofollow noreferrer\">seeedstudio.com/blog/2019/12/06/&hellip;</a> (And for even more homebrew, I&#39;ve also seen people connect op-amps directly to digital output to make their own serial bus. All depends on your requirements.)"}],"owner":{"account_id":27951702,"reputation":1,"user_id":21345374,"display_name":"Amir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679442441,"creation_date":1678141985,"question_id":75656454,"body_markdown":"I currently have a python application running on a raspberry pi, that has a tablet connected running an android application. Neither of them have an internet connection, and I was wondering if I can use sockets to allow both of them to communicate (P2P) and how to go about it. Im currently trying to have the java program send out two message then wait for a variable number of responses from the python program.\r\n\r\nI haven&#39;t found any useful guides online about how to set up communication using the tablet as a USB accessory. This is a very small project, the messages being transferred would be just a line or two of text so if there are any other alternatives that would be easier would also be greatly beneficial.","title":"How can I set up communication between an android app and a python program?","body":"<p>I currently have a python application running on a raspberry pi, that has a tablet connected running an android application. Neither of them have an internet connection, and I was wondering if I can use sockets to allow both of them to communicate (P2P) and how to go about it. Im currently trying to have the java program send out two message then wait for a variable number of responses from the python program.</p>\n<p>I haven't found any useful guides online about how to set up communication using the tablet as a USB accessory. This is a very small project, the messages being transferred would be just a line or two of text so if there are any other alternatives that would be easier would also be greatly beneficial.</p>\n"},{"tags":["java","spring","lazy-initialization"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1592809089,"post_id":62508723,"comment_id":110545937,"body_markdown":"Annotate the method argument in the configuration with `@Lazy` not the `@Bean` method.","body":"Annotate the method argument in the configuration with <code>@Lazy</code> not the <code>@Bean</code> method."}],"answers":[{"tags":[],"owner":{"account_id":4103696,"reputation":129,"user_id":3368460,"display_name":"Getodac"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679441946,"creation_date":1592809505,"answer_id":62509073,"question_id":62508723,"body_markdown":"You must annotate your `PurchaseService` with `@Lazy` in both places - where you create them and when you autowire them. \r\n\r\nSee the [A Quick Guide to the Spring @Lazy Annotation](https://www.baeldung.com/spring-lazy-annotation) post, in the [2.2. With @Autowired](https://www.baeldung.com/spring-lazy-annotation#2-with-autowired) section exists the comment: \r\n\r\n&gt; **Note, that the @Lazy is mandatory in both places.**","title":"Spring lazy initialization in configuration with constructor","body":"<p>You must annotate your <code>PurchaseService</code> with <code>@Lazy</code> in both places - where you create them and when you autowire them.</p>\n<p>See the <a href=\"https://www.baeldung.com/spring-lazy-annotation\" rel=\"nofollow noreferrer\">A Quick Guide to the Spring @Lazy Annotation</a> post, in the <a href=\"https://www.baeldung.com/spring-lazy-annotation#2-with-autowired\" rel=\"nofollow noreferrer\">2.2. With @Autowired</a> section exists the comment:</p>\n<blockquote>\n<p><strong>Note, that the @Lazy is mandatory in both places.</strong></p>\n</blockquote>\n"}],"owner":{"account_id":4757124,"reputation":9055,"user_id":3845604,"accept_rate":95,"display_name":"Praveen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":771,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679441946,"creation_date":1592807977,"question_id":62508723,"body_markdown":"I have a component\r\n\r\n    @Component\r\n    public class ExpenseCalculator {\r\n    \t@Autowired\r\n    \tprivate TaxService taxService;\r\n    \r\n    \t@Autowired\r\n    \tprivate EmployeeService employeeService;\r\n    \r\n    \t@Autowired\r\n    \t@Lazy\r\n    \tprivate PurchaseService purchaseService;\r\n    }\r\n\r\nHere `PurchaseService` is initialized only when any part of the code that uses `purchaseService` is invoked (?).&lt;br&gt;\r\n\r\nNow I have to move`ExpenseCalculator` a configuration class (it doesn&#39;t have `@Component` annotation)\r\n\r\n    @Configuration\r\n    public class ExpenseConfig {\r\n    \t@Bean\r\n    \t@Lazy\r\n    \tpublic ExpenseCalculator getExpenseCalculator(\r\n    \t\tTaxService taxService, \r\n    \t\tEmployeeService employeeService,\r\n    \t\tPurchaseService purchaseService\r\n    \t) {\r\n    \t\treturn new ExpenseCalculator(taxService, employeeService, purchaseService);\r\n    \t}\r\n    } \r\n\r\nBut `purchaseService` is no more a `@Lazy` component when ever `ExpenseCalculator` is initialized, `purchaseService` get initialized.\r\n\r\nIs there any way to get lazy initialization of `purchaseService` using `configuration`?","title":"Spring lazy initialization in configuration with constructor","body":"<p>I have a component</p>\n<pre><code>@Component\npublic class ExpenseCalculator {\n    @Autowired\n    private TaxService taxService;\n\n    @Autowired\n    private EmployeeService employeeService;\n\n    @Autowired\n    @Lazy\n    private PurchaseService purchaseService;\n}\n</code></pre>\n<p>Here <code>PurchaseService</code> is initialized only when any part of the code that uses <code>purchaseService</code> is invoked (?).<br></p>\n<p>Now I have to move<code>ExpenseCalculator</code> a configuration class (it doesn't have <code>@Component</code> annotation)</p>\n<pre><code>@Configuration\npublic class ExpenseConfig {\n    @Bean\n    @Lazy\n    public ExpenseCalculator getExpenseCalculator(\n        TaxService taxService, \n        EmployeeService employeeService,\n        PurchaseService purchaseService\n    ) {\n        return new ExpenseCalculator(taxService, employeeService, purchaseService);\n    }\n} \n</code></pre>\n<p>But <code>purchaseService</code> is no more a <code>@Lazy</code> component when ever <code>ExpenseCalculator</code> is initialized, <code>purchaseService</code> get initialized.</p>\n<p>Is there any way to get lazy initialization of <code>purchaseService</code> using <code>configuration</code>?</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1679186689,"post_id":75776068,"comment_id":133676524,"body_markdown":"you can start by reading the spring security documentation and implement the handling of JWTs in accordance with the official documentation instead of implementing something custom from possibly some random bad blogpost. Spring has had built in support for JWTs since 2017 https://docs.spring.io/spring-security/reference/5.8/servlet/oauth2/resource-server/index.html its impossible for us to help you if havn&#39;t followed the official docs. So start by reading them","body":"you can start by reading the spring security documentation and implement the handling of JWTs in accordance with the official documentation instead of implementing something custom from possibly some random bad blogpost. Spring has had built in support for JWTs since 2017 <a href=\"https://docs.spring.io/spring-security/reference/5.8/servlet/oauth2/resource-server/index.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/5.8/servlet/oauth2/&zwnj;&#8203;&hellip;</a> its impossible for us to help you if havn&#39;t followed the official docs. So start by reading them"},{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679707424,"post_id":75776068,"comment_id":133774571,"body_markdown":"Hi @Toerktumlare if you need Spring Security in one of your future Spring Boot projects, I can confirm that Andrey&#39;s `AbstractHttpConfigurer`-based solution below works for me perfectly, he&#39;s been a true **life saver**!","body":"Hi @Toerktumlare if you need Spring Security in one of your future Spring Boot projects, I can confirm that Andrey&#39;s <code>AbstractHttpConfigurer</code>-based solution below works for me perfectly, he&#39;s been a true <b>life saver</b>!"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1679710805,"post_id":75776068,"comment_id":133774816,"body_markdown":"both of your solutions are overly complex and not following any of the rfc&#39;s for security. Custom security is bad practice, and just because something &quot;works&quot; does not mean it is correct. Good luck with your custom security solution.","body":"both of your solutions are overly complex and not following any of the rfc&#39;s for security. Custom security is bad practice, and just because something &quot;works&quot; does not mean it is correct. Good luck with your custom security solution."}],"answers":[{"comments":[{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679335592,"post_id":75792090,"comment_id":133700090,"body_markdown":"Thanks @Andrey B. Panfilov (+1) two followup questions for you if you don&#39;t mind! **(1)** Did you have to code it this way because you ran into the same issue that I am facing? And **(2)** I think your code looks great but your version of the `ApiAuthenticationFilter` is requiring an instance of an `AuthenticationManagerResolver`, _not_ an `AuthenticationManager`. Can I see what the code looks like inside your `ApiAuthenticationFilter` class that convert the resolver into a manager? Thanks again!","body":"Thanks @Andrey B. Panfilov (+1) two followup questions for you if you don&#39;t mind! <b>(1)</b> Did you have to code it this way because you ran into the same issue that I am facing? And <b>(2)</b> I think your code looks great but your version of the <code>ApiAuthenticationFilter</code> is requiring an instance of an <code>AuthenticationManagerResolver</code>, <i>not</i> an <code>AuthenticationManager</code>. Can I see what the code looks like inside your <code>ApiAuthenticationFilter</code> class that convert the resolver into a manager? Thanks again!"},{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679344897,"post_id":75792090,"comment_id":133702311,"body_markdown":"Also your code doesn&#39;t compile, at least with Spring 5.6, as the `passwordEncoder(...)` builder method returns a `DaoAuthenticationConfigurer` which cannot be assigned to an instance of `AuthenticationManager`.","body":"Also your code doesn&#39;t compile, at least with Spring 5.6, as the <code>passwordEncoder(...)</code> builder method returns a <code>DaoAuthenticationConfigurer</code> which cannot be assigned to an instance of <code>AuthenticationManager</code>."},{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679361447,"post_id":75792090,"comment_id":133704764,"body_markdown":"OK I played around with your code sample and got it working with a few notable exceptions. For one I don&#39;t assign the result of `httpSecurity.getSharedObject(AuthenticationManagerBuilder.class).userDetailsService(realmService).passwordEncoder(passwordEncoder);` to anything, I just let it configure. 2nd When passing in the lambda to the provider methods, I use `ctx -&gt; httpSecurity.getSharedObject(Authentication.class)` instead. With this configuration, it works! Thank you! If you are able/willing to update your code example and explain what is happening, I&#39;ll happily give you the bounty+check!","body":"OK I played around with your code sample and got it working with a few notable exceptions. For one I don&#39;t assign the result of <code>httpSecurity.getSharedObject(AuthenticationManagerBuilder.cl&zwnj;&#8203;ass).userDetailsServ&zwnj;&#8203;ice(realmService).pa&zwnj;&#8203;sswordEncoder(passwo&zwnj;&#8203;rdEncoder);</code> to anything, I just let it configure. 2nd When passing in the lambda to the provider methods, I use <code>ctx -&gt; httpSecurity.getSharedObject(Authentication.class)</code> instead. With this configuration, it works! Thank you! If you are able/willing to update your code example and explain what is happening, I&#39;ll happily give you the bounty+check!"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1679362791,"post_id":75792090,"comment_id":133704894,"body_markdown":"@hotmeatballsoup would you mind describing (update the Q) what classes are managed by you and what aren&#39;t, and what do you want to achieve. At first glance the problem is you are trying to mix together different security (and spring security) concepts and most probably filters could be moved to the more specific `SecurityConfigurer`, it looks like you are trying to build smth. pluggable (at least you seem to expect that `AuthenticationManager` is configured somewhere else), in that case I believe there is another option to make configuration clearer.","body":"@hotmeatballsoup would you mind describing (update the Q) what classes are managed by you and what aren&#39;t, and what do you want to achieve. At first glance the problem is you are trying to mix together different security (and spring security) concepts and most probably filters could be moved to the more specific <code>SecurityConfigurer</code>, it looks like you are trying to build smth. pluggable (at least you seem to expect that <code>AuthenticationManager</code> is configured somewhere else), in that case I believe there is another option to make configuration clearer."},{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679422423,"post_id":75792090,"comment_id":133718561,"body_markdown":"Thanks @Andrey (+1 again) I have added the 2 filters (1 for authentication and the other for authorization) if that helps you out any. I have full control/management over the source code, but like you say, it is entirely possible I&#39;m mixing together different security concepts. At the end of the day, I need my security configuration to: (1) disable CSRF, (2) define my CORS configuration as-is, (3) allow me to wire in my own authentication and authorization filters, (4) define which HTTP methods and paths are permitted vs authenticated and (5) configure a stateless security session...","body":"Thanks @Andrey (+1 again) I have added the 2 filters (1 for authentication and the other for authorization) if that helps you out any. I have full control/management over the source code, but like you say, it is entirely possible I&#39;m mixing together different security concepts. At the end of the day, I need my security configuration to: (1) disable CSRF, (2) define my CORS configuration as-is, (3) allow me to wire in my own authentication and authorization filters, (4) define which HTTP methods and paths are permitted vs authenticated and (5) configure a stateless security session..."},{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679422430,"post_id":75792090,"comment_id":133718562,"body_markdown":"...and I&#39;m good with whatever simple config achieves all of that! Thanks again!","body":"...and I&#39;m good with whatever simple config achieves all of that! Thanks again!"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1679441604,"post_id":75792090,"comment_id":133722560,"body_markdown":"@hotmeatballsoup I have updated the A with some possible options.","body":"@hotmeatballsoup I have updated the A with some possible options."},{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679578046,"post_id":75792090,"comment_id":133748843,"body_markdown":"Thanks again @Andrey B. Panfilov but I do need the custom `AuthorizationFilter`. I understand that for now `httpSecurity.httpBasic()` may cover my bases but I&#39;d like to see a working example with a custom authorization filter. And it looks like any `BasicAuthenticationFilter` impls **require** an up-front `AuthenticationManager` in its constructor, so your (**amazing!**) suggestion to use Suppliers doesn&#39;t work. Any other ideas?","body":"Thanks again @Andrey B. Panfilov but I do need the custom <code>AuthorizationFilter</code>. I understand that for now <code>httpSecurity.httpBasic()</code> may cover my bases but I&#39;d like to see a working example with a custom authorization filter. And it looks like any <code>BasicAuthenticationFilter</code> impls <b>require</b> an up-front <code>AuthenticationManager</code> in its constructor, so your (<b>amazing!</b>) suggestion to use Suppliers doesn&#39;t work. Any other ideas?"},{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679578390,"post_id":75792090,"comment_id":133748943,"body_markdown":"Is there a way to dynamically instantiate and add that filter _after_ `httpSecurity.build()` runs?","body":"Is there a way to dynamically instantiate and add that filter <i>after</i> <code>httpSecurity.build()</code> runs?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1679668321,"post_id":75792090,"comment_id":133767345,"body_markdown":"@hotmeatballsoup The &quot;Second option&quot; in my A demonstrates how to implement that.","body":"@hotmeatballsoup The &quot;Second option&quot; in my A demonstrates how to implement that."},{"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1679707332,"post_id":75792090,"comment_id":133774567,"body_markdown":"Boom! Got it working, thank you so much Andrey!","body":"Boom! Got it working, thank you so much Andrey!"}],"tags":[],"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"comment_count":11,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679441567,"creation_date":1679325392,"answer_id":75792090,"question_id":75776068,"body_markdown":"We are doing something like:\r\n\r\n\r\n```java\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n  AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\r\n    .userDetailsService(realmService)\r\n    .passwordEncoder(passwordEncoder);\r\n\r\n...\r\n\r\n  httpSecurity.addFilter(apiAuthenticationFilter(ctx -&gt; httpSecurity.getSharedObject(AuthenticationManager.class)));\r\n\r\n...\r\n\r\n}\r\n\r\npublic ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManagerResolver&lt;?&gt; authenticationManagerResolver) {\r\n  return new ApiAuthenticationFilter(\r\n    authenticationManagerResolver, \r\n    tokenService, \r\n    objectMapper, \r\n    authenticationFactory\r\n  );\r\n}\r\n```\r\n\r\nSince instance of `AuthenticationManager` is required in runtime only, that is enough to pass supplier to filter during configuration phase\r\n\r\n\r\n----------\r\n\r\nUPD.\r\n\r\nWell, now it is clear why you need a reference to `AuthenticationManager`.\r\n\r\n\r\n**First option**: \r\n\r\nIn case of `ApiAuthorizationFilter` you are actually do not need to extend `BasicAuthenticationFilter` - just let `spring-security` to do it&#39;s job and enable basic authentication via `httpSecurity.httpBasic()`. For `ApiAuthenticationFilter` it is possible to pass `AuthenticationManagerResolver` or `Supplier&lt;AuthenticationManager&gt;` to it:\r\n\r\n```java\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n  httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\r\n    .userDetailsService(realmService)\r\n    .passwordEncoder(passwordEncoder);\r\n\r\n...\r\n\r\n  httpSecurity.addFilter(apiAuthenticationFilter(() -&gt; httpSecurity.getSharedObject(AuthenticationManager.class)));\r\n\r\n...\r\n\r\n}\r\n\r\npublic ApiAuthenticationFilter apiAuthenticationFilter(Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier) {\r\n  return new ApiAuthenticationFilter(\r\n    authenticationManagerSupplier, \r\n    tokenService, \r\n    objectMapper, \r\n    authenticationFactory\r\n  );\r\n}\r\n\r\n```\r\n\r\n```java\r\npublic class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n    private AuthenticationManager authenticationManager;\r\n    private Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier;\r\n    private ObjectMapper objectMapper;\r\n    private ApiAuthenticationFactory authenticationFactory;\r\n    private TokenService tokenService;\r\n\r\n    public ApiAuthenticationFilter(\r\n            Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier,\r\n            TokenService tokenService,\r\n            ObjectMapper objectMapper,\r\n            ApiAuthenticationFactory authenticationFactory) {\r\n\r\n        super();\r\n        this.tokenService = tokenService;\r\n        this.objectMapper = objectMapper;\r\n        this.authenticationFactory = authenticationFactory;\r\n\r\n        init();\r\n\r\n    }\r\n\r\n    private void init() {\r\n        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);\r\n    }\r\n\r\n    @Override\r\n    public Authentication attemptAuthentication(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response) throws AuthenticationException {\r\n\r\n        try {\r\n\r\n            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);\r\n\r\n            Authentication authentication = authenticationFactory\r\n                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());\r\n\r\n            // perform authentication and -- if successful -- populate granted authorities\r\n            return getAuthenticationManager().authenticate(authentication);\r\n\r\n        } catch (IOException e) {\r\n            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void successfulAuthentication(\r\n            HttpServletRequest  request,\r\n            HttpServletResponse response,\r\n            FilterChain filterChain,\r\n            Authentication authentication) {\r\n\r\n        // called if-and-only-if the attemptAuthentication method above is successful\r\n\r\n        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;\r\n        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);\r\n        response.setStatus(HttpServletResponse.SC_OK);\r\n        try {\r\n            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));\r\n        } catch (IOException e) {\r\n            throw new ApiServiceException(e);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n\tprotected AuthenticationManager getAuthenticationManager() {\r\n\t\tif (this.authenticationManager == null) {\r\n            this.authenticationManager = authenticationManagerSupplier.get();\r\n        }\r\n        return this.authenticationManager;\r\n\t}\r\n\r\n}\r\n```\r\n\r\n**Second option**\r\n\r\nWrite your own implementation of `AbstractHttpConfigurer`, should look like:\r\n\r\n```java\r\npublic class ApiSecurityBuilderConfigurer&lt;H extends HttpSecurityBuilder&lt;H&gt;&gt;\r\n        extends AbstractHttpConfigurer&lt;ApiSecurityBuilderConfigurer&lt;H&gt;, H&gt; {\r\n\r\n    private TokenService tokenService;\r\n\r\n    private ObjectMapper objectMapper;\r\n\r\n    private ApiAuthenticationFactory apiAuthenticationFactory;\r\n    \r\n    public ApiSecurityBuilderConfigurer&lt;H&gt; tokenService(TokenService tokenService) {\r\n        this.tokenService = tokenService;\r\n        return this;\r\n    }\r\n\r\n    public ApiSecurityBuilderConfigurer&lt;H&gt; objectMapper(ObjectMapper objectMapper) {\r\n        this.objectMapper = objectMapper;\r\n        return this;\r\n    }\r\n\r\n    public ApiSecurityBuilderConfigurer&lt;H&gt; apiAuthenticationFactory(ApiAuthenticationFactory ApiAuthenticationFactory) {\r\n        this.ApiAuthenticationFactory = ApiAuthenticationFactory;\r\n        return this;\r\n    }\r\n\r\n    @Override\r\n    public void configure(H builder) throws Exception {\r\n        AuthenticationManager authenticationManager = builder.getSharedObject(AuthenticationManager.class);\r\n        builder.addFilter(apiAuthenticationFilter(authenticationManager));\r\n    }\r\n\r\n    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {\r\n        return new ApiAuthenticationFilter(authenticationManager, tokenService, objectMapper, authenticationFactory);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n  httpSecurity.apply(new ApiSecurityBuilderConfigurer())\r\n    .tokenService(tokenService)\r\n    .objectMapper(objectMapper)\r\n    .apiAuthenticationFactory(apiAuthenticationFactory);\r\n\r\n...\r\n\r\n}\r\n```","title":"Spring Security 5+: Obtaining an AuthenticationManager without having to build HttpSecurity","body":"<p>We are doing something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n  AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\n    .userDetailsService(realmService)\n    .passwordEncoder(passwordEncoder);\n\n...\n\n  httpSecurity.addFilter(apiAuthenticationFilter(ctx -&gt; httpSecurity.getSharedObject(AuthenticationManager.class)));\n\n...\n\n}\n\npublic ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManagerResolver&lt;?&gt; authenticationManagerResolver) {\n  return new ApiAuthenticationFilter(\n    authenticationManagerResolver, \n    tokenService, \n    objectMapper, \n    authenticationFactory\n  );\n}\n</code></pre>\n<p>Since instance of <code>AuthenticationManager</code> is required in runtime only, that is enough to pass supplier to filter during configuration phase</p>\n<hr />\n<p>UPD.</p>\n<p>Well, now it is clear why you need a reference to <code>AuthenticationManager</code>.</p>\n<p><strong>First option</strong>:</p>\n<p>In case of <code>ApiAuthorizationFilter</code> you are actually do not need to extend <code>BasicAuthenticationFilter</code> - just let <code>spring-security</code> to do it's job and enable basic authentication via <code>httpSecurity.httpBasic()</code>. For <code>ApiAuthenticationFilter</code> it is possible to pass <code>AuthenticationManagerResolver</code> or <code>Supplier&lt;AuthenticationManager&gt;</code> to it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n  httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\n    .userDetailsService(realmService)\n    .passwordEncoder(passwordEncoder);\n\n...\n\n  httpSecurity.addFilter(apiAuthenticationFilter(() -&gt; httpSecurity.getSharedObject(AuthenticationManager.class)));\n\n...\n\n}\n\npublic ApiAuthenticationFilter apiAuthenticationFilter(Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier) {\n  return new ApiAuthenticationFilter(\n    authenticationManagerSupplier, \n    tokenService, \n    objectMapper, \n    authenticationFactory\n  );\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    private AuthenticationManager authenticationManager;\n    private Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier;\n    private ObjectMapper objectMapper;\n    private ApiAuthenticationFactory authenticationFactory;\n    private TokenService tokenService;\n\n    public ApiAuthenticationFilter(\n            Supplier&lt;AuthenticationManager&gt; authenticationManagerSupplier,\n            TokenService tokenService,\n            ObjectMapper objectMapper,\n            ApiAuthenticationFactory authenticationFactory) {\n\n        super();\n        this.tokenService = tokenService;\n        this.objectMapper = objectMapper;\n        this.authenticationFactory = authenticationFactory;\n\n        init();\n\n    }\n\n    private void init() {\n        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);\n    }\n\n    @Override\n    public Authentication attemptAuthentication(\n            HttpServletRequest request,\n            HttpServletResponse response) throws AuthenticationException {\n\n        try {\n\n            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);\n\n            Authentication authentication = authenticationFactory\n                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());\n\n            // perform authentication and -- if successful -- populate granted authorities\n            return getAuthenticationManager().authenticate(authentication);\n\n        } catch (IOException e) {\n            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);\n        }\n\n    }\n\n    @Override\n    protected void successfulAuthentication(\n            HttpServletRequest  request,\n            HttpServletResponse response,\n            FilterChain filterChain,\n            Authentication authentication) {\n\n        // called if-and-only-if the attemptAuthentication method above is successful\n\n        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;\n        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);\n        response.setStatus(HttpServletResponse.SC_OK);\n        try {\n            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));\n        } catch (IOException e) {\n            throw new ApiServiceException(e);\n        }\n\n    }\n\n    @Override\n    protected AuthenticationManager getAuthenticationManager() {\n        if (this.authenticationManager == null) {\n            this.authenticationManager = authenticationManagerSupplier.get();\n        }\n        return this.authenticationManager;\n    }\n\n}\n</code></pre>\n<p><strong>Second option</strong></p>\n<p>Write your own implementation of <code>AbstractHttpConfigurer</code>, should look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ApiSecurityBuilderConfigurer&lt;H extends HttpSecurityBuilder&lt;H&gt;&gt;\n        extends AbstractHttpConfigurer&lt;ApiSecurityBuilderConfigurer&lt;H&gt;, H&gt; {\n\n    private TokenService tokenService;\n\n    private ObjectMapper objectMapper;\n\n    private ApiAuthenticationFactory apiAuthenticationFactory;\n    \n    public ApiSecurityBuilderConfigurer&lt;H&gt; tokenService(TokenService tokenService) {\n        this.tokenService = tokenService;\n        return this;\n    }\n\n    public ApiSecurityBuilderConfigurer&lt;H&gt; objectMapper(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n        return this;\n    }\n\n    public ApiSecurityBuilderConfigurer&lt;H&gt; apiAuthenticationFactory(ApiAuthenticationFactory ApiAuthenticationFactory) {\n        this.ApiAuthenticationFactory = ApiAuthenticationFactory;\n        return this;\n    }\n\n    @Override\n    public void configure(H builder) throws Exception {\n        AuthenticationManager authenticationManager = builder.getSharedObject(AuthenticationManager.class);\n        builder.addFilter(apiAuthenticationFilter(authenticationManager));\n    }\n\n    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {\n        return new ApiAuthenticationFilter(authenticationManager, tokenService, objectMapper, authenticationFactory);\n    }\n\n}\n</code></pre>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n  httpSecurity.apply(new ApiSecurityBuilderConfigurer())\n    .tokenService(tokenService)\n    .objectMapper(objectMapper)\n    .apiAuthenticationFactory(apiAuthenticationFactory);\n\n...\n\n}\n</code></pre>\n"}],"owner":{"account_id":6802882,"reputation":175,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":711,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":75792090,"answer_count":1,"score":6,"last_activity_date":1679441567,"creation_date":1679144583,"question_id":75776068,"body_markdown":"Java 11 and Spring Security 2.7.x here. I am trying to upgrade my config _away_ from the (deprecated) `WebSecurityConfigurerAdapter`-based implementation to one using `SecurityFilterChain`.\r\n\r\nWhat&#39;s important about my implementation is that I have the ability to define and configure/wire up my own:\r\n\r\n- Authentication Filter (`UsernamePasswordAuthenticationFilter` impl)\r\n- Authorization Filter (`BasicAuthenticationFilter` impl)\r\n- Custom authentication error handler (`AuthenticationEntryPoint` impl)\r\n- Custom authorization error handler (`AccessDeniedHandler` impl)\r\n\r\nHere&#39;s my current setup based on reading a bunch of blogs and articles:\r\n```\r\npublic class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n    private AuthenticationManager authenticationManager;\r\n    private ObjectMapper objectMapper;\r\n    private ApiAuthenticationFactory authenticationFactory;\r\n    private TokenService tokenService;\r\n\r\n    public ApiAuthenticationFilter(\r\n            AuthenticationManager authenticationManager,\r\n            TokenService tokenService,\r\n            ObjectMapper objectMapper,\r\n            ApiAuthenticationFactory authenticationFactory) {\r\n\r\n        super(authenticationManager);\r\n        this.tokenService = tokenService;\r\n        this.objectMapper = objectMapper;\r\n        this.authenticationFactory = authenticationFactory;\r\n\r\n        init();\r\n\r\n    }\r\n\r\n    private void init() {\r\n        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);\r\n    }\r\n\r\n    @Override\r\n    public Authentication attemptAuthentication(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response) throws AuthenticationException {\r\n\r\n        try {\r\n\r\n            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);\r\n\r\n            Authentication authentication = authenticationFactory\r\n                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());\r\n\r\n            // perform authentication and -- if successful -- populate granted authorities\r\n            return authenticationManager.authenticate(authentication);\r\n\r\n        } catch (IOException e) {\r\n            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void successfulAuthentication(\r\n            HttpServletRequest  request,\r\n            HttpServletResponse response,\r\n            FilterChain filterChain,\r\n            Authentication authentication) {\r\n\r\n        // called if-and-only-if the attemptAuthentication method above is successful\r\n\r\n        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;\r\n        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);\r\n        response.setStatus(HttpServletResponse.SC_OK);\r\n        try {\r\n            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));\r\n        } catch (IOException e) {\r\n            throw new ApiServiceException(e);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\npublic class ApiAuthorizationFilter extends BasicAuthenticationFilter implements SecurityConstants {\r\n\r\n    private ApiAuthenticationFactory authenticationFactory;\r\n    private AuthenticationService authenticationService;\r\n    private String jwtSecret;\r\n\r\n    public ApiAuthorizationFilter(\r\n            AuthenticationManager authenticationManager,\r\n            ApiAuthenticationFactory authenticationFactory,\r\n            AuthenticationService authenticationService,\r\n            @Value(&quot;${myapp.jwt-secret}&quot;) String jwtSecret) {\r\n\r\n        super(authenticationManager);\r\n        this.authenticationFactory = authenticationFactory;\r\n        this.authenticationService = authenticationService;\r\n        this.jwtSecret = jwtSecret;\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response,\r\n            FilterChain filterChain) throws IOException, ServletException {\r\n\r\n        String authHeader = request.getHeader(AUTHORIZATION_HEADER);\r\n\r\n        // allow the request through if no valid auth header is set; spring security\r\n        // will throw access denied exceptions downstream if the request is for an\r\n        // authenticated url\r\n        if (authHeader == null || !authHeader.startsWith(BEARER_TOKEN_PREFIX)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        // otherwise an auth header was specified so lets take a look at it and grant access based\r\n        // on what we find\r\n        try {\r\n\r\n            DecodedJWT decodedJWT = JwtUtils.verifyToken(authHeader.replace(BEARER_TOKEN_PREFIX, &quot;&quot;), jwtSecret);\r\n            String subject = decodedJWT.getSubject();\r\n            ApiAuthentication authentication = authenticationFactory.createAuthentication(subject, null);\r\n\r\n            // TODO: I believe I need to look up granted authorities here and set them\r\n\r\n            authenticationService.setCurrentAuthentication(authentication);\r\n            filterChain.doFilter(request, response);\r\n\r\n        } catch (JWTVerificationException jwtVerificationEx) {\r\n            throw new AccessDeniedException(&quot;access denied&quot;, jwtVerificationEx);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\r\npublic class SecurityConfigV2 {\r\n\r\n    private boolean securityDebug;\r\n\r\n    private ObjectMapper objectMapper;\r\n    private ApiAuthenticationFactory authenticationFactory;\r\n    private TokenService tokenService;\r\n\r\n    private AuthenticationService authenticationService;\r\n    private String jwtSecret;\r\n    private ApiUnauthorizedHandler unauthorizedHandler;\r\n    private ApiSignInFailureHandler signInFailureHandler;\r\n\r\n    private BCryptPasswordEncoder passwordEncoder;\r\n    private RealmService realmService;\r\n\r\n    @Autowired\r\n    public SecurityConfigV2(\r\n            @Value(&quot;${spring.security.debug:false}&quot;) boolean securityDebug,\r\n            ObjectMapper objectMapper,\r\n            ApiAuthenticationFactory authenticationFactory,\r\n            TokenService tokenService,\r\n            AuthenticationService authenticationService,\r\n            @Value(&quot;${myapp.authentication.jwt-secret}&quot;) String jwtSecret,\r\n            ApiUnauthorizedHandler unauthorizedHandler,\r\n            ApiSignInFailureHandler signInFailureHandler,\r\n            BCryptPasswordEncoder passwordEncoder,\r\n            RealmService realmService) {\r\n        this.securityDebug = securityDebug;\r\n        this.objectMapper = objectMapper;\r\n        this.authenticationFactory = authenticationFactory;\r\n        this.tokenService = tokenService;\r\n        this.authenticationService = authenticationService;\r\n        this.jwtSecret = jwtSecret;\r\n        this.unauthorizedHandler = unauthorizedHandler;\r\n        this.signInFailureHandler = signInFailureHandler;\r\n        this.passwordEncoder = passwordEncoder;\r\n        this.realmService = realmService;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n\r\n        // build authentication manager\r\n        AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\r\n            .userDetailsService(realmService)\r\n            .passwordEncoder(passwordEncoder)\r\n            .and()\r\n            .build();   // &lt;-- calling it once up here, to get an AuthenticationManager instance\r\n\r\n        // enable CSRF\r\n        // TODO: enable once you are ready to provide &#39;CSRF tokens&#39;\r\n        //  https://stackoverflow.com/a/75646727/5235665\r\n        httpSecurity.csrf().disable();\r\n\r\n        // add CORS filter\r\n        httpSecurity.cors();\r\n\r\n        // add anonoymous/permitted paths (that is: what paths are allowed to bypass authentication)\r\n        httpSecurity.authorizeRequests()\r\n            .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n            .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()\r\n            .antMatchers(HttpMethod.POST, &quot;/v*/tokens/refresh&quot;).permitAll();\r\n\r\n        // restrict all other paths and set them to authenticated\r\n        httpSecurity.authorizeRequests().anyRequest().authenticated();\r\n\r\n        // add authn + authz filters -- using AuthenticationManager instance here\r\n        httpSecurity.addFilter(apiAuthenticationFilter(authenticationManager));\r\n        httpSecurity.addFilter(apiAuthorizationFilter(authenticationManager));\r\n\r\n        // configure exception-handling for authn and authz\r\n        httpSecurity.exceptionHandling().accessDeniedHandler(unauthorizedHandler);\r\n        httpSecurity.exceptionHandling().authenticationEntryPoint(signInFailureHandler);\r\n\r\n        // configure stateless http sessions (appropriate for RESTful web services)\r\n        httpSecurity.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n        // and building it a 2nd time here, to complete the filter\r\n        // but I believe this is what causes the error\r\n        return httpSecurity.build();\r\n    }\r\n\r\n    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {\r\n\r\n        ApiAuthenticationFilter authenticationFilter = new ApiAuthenticationFilter(\r\n                authenticationManager, tokenService, objectMapper, authenticationFactory);\r\n        return authenticationFilter;\r\n\r\n    }\r\n\r\n    public ApiAuthorizationFilter apiAuthorizationFilter(AuthenticationManager authenticationManager) {\r\n\r\n        ApiAuthorizationFilter authorizationFilter = new ApiAuthorizationFilter(\r\n            authenticationManager,\r\n            authenticationFactory,\r\n            authenticationService,\r\n            jwtSecret);\r\n\r\n        return authorizationFilter;\r\n\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.debug(securityDebug)\r\n            .ignoring()\r\n            .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/img/**&quot;, &quot;/lib/**&quot;, &quot;/favicon.ico&quot;);\r\n    }\r\n\r\n    @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n\r\n        CorsConfiguration corsConfiguration = new CorsConfiguration();\r\n        corsConfiguration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n        corsConfiguration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-Type&quot;));\r\n\r\n        UrlBasedCorsConfigurationSource corsConfigurationSource = new UrlBasedCorsConfigurationSource();\r\n        corsConfigurationSource.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);\r\n\r\n        return corsConfigurationSource;\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen I start up my app I am getting:\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name \r\n&#39;org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration&#39;: \r\nUnsatisfied dependency expressed through method &#39;setFilterChains&#39; parameter 0; nested exception is \r\norg.springframework.beans.factory.BeanCreationException: \r\nError creating bean with name &#39;filterChain&#39; defined \r\nin class path resource [myapp/ws/security/v2/SecurityConfigV2.class]: \r\nBean instantiation via factory method failed; nested exception is \r\norg.springframework.beans.BeanInstantiationException: \r\nFailed to instantiate [org.springframework.security.web.SecurityFilterChain]: \r\nFactory method &#39;filterChain&#39; threw exception; \r\nnested exception is org.springframework.security.config.annotation.AlreadyBuiltException: \r\nThis object has already been built\r\n```\r\n\r\nThe Google Gods say this is because I&#39;m calling `httpSecurity.build()` **twice** which is not allowed. However:\r\n\r\n- My authn and authz filter require an `AuthenticationManager` instance; and\r\n- It seems that the only way (please tell me if I&#39;m wrong!) to get an `AuthenticationManager` instance is to run `httpSecurity.build()`; **but**\r\n- I need the authn/authz filter _before_ I can call `httpSecurity.build()`\r\n\r\nCan anyone help nudge me across the finish line here? Thanks for any and all help!","title":"Spring Security 5+: Obtaining an AuthenticationManager without having to build HttpSecurity","body":"<p>Java 11 and Spring Security 2.7.x here. I am trying to upgrade my config <em>away</em> from the (deprecated) <code>WebSecurityConfigurerAdapter</code>-based implementation to one using <code>SecurityFilterChain</code>.</p>\n<p>What's important about my implementation is that I have the ability to define and configure/wire up my own:</p>\n<ul>\n<li>Authentication Filter (<code>UsernamePasswordAuthenticationFilter</code> impl)</li>\n<li>Authorization Filter (<code>BasicAuthenticationFilter</code> impl)</li>\n<li>Custom authentication error handler (<code>AuthenticationEntryPoint</code> impl)</li>\n<li>Custom authorization error handler (<code>AccessDeniedHandler</code> impl)</li>\n</ul>\n<p>Here's my current setup based on reading a bunch of blogs and articles:</p>\n<pre><code>public class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    private AuthenticationManager authenticationManager;\n    private ObjectMapper objectMapper;\n    private ApiAuthenticationFactory authenticationFactory;\n    private TokenService tokenService;\n\n    public ApiAuthenticationFilter(\n            AuthenticationManager authenticationManager,\n            TokenService tokenService,\n            ObjectMapper objectMapper,\n            ApiAuthenticationFactory authenticationFactory) {\n\n        super(authenticationManager);\n        this.tokenService = tokenService;\n        this.objectMapper = objectMapper;\n        this.authenticationFactory = authenticationFactory;\n\n        init();\n\n    }\n\n    private void init() {\n        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);\n    }\n\n    @Override\n    public Authentication attemptAuthentication(\n            HttpServletRequest request,\n            HttpServletResponse response) throws AuthenticationException {\n\n        try {\n\n            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);\n\n            Authentication authentication = authenticationFactory\n                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());\n\n            // perform authentication and -- if successful -- populate granted authorities\n            return authenticationManager.authenticate(authentication);\n\n        } catch (IOException e) {\n            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);\n        }\n\n    }\n\n    @Override\n    protected void successfulAuthentication(\n            HttpServletRequest  request,\n            HttpServletResponse response,\n            FilterChain filterChain,\n            Authentication authentication) {\n\n        // called if-and-only-if the attemptAuthentication method above is successful\n\n        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;\n        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);\n        response.setStatus(HttpServletResponse.SC_OK);\n        try {\n            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));\n        } catch (IOException e) {\n            throw new ApiServiceException(e);\n        }\n\n    }\n\n}\n\npublic class ApiAuthorizationFilter extends BasicAuthenticationFilter implements SecurityConstants {\n\n    private ApiAuthenticationFactory authenticationFactory;\n    private AuthenticationService authenticationService;\n    private String jwtSecret;\n\n    public ApiAuthorizationFilter(\n            AuthenticationManager authenticationManager,\n            ApiAuthenticationFactory authenticationFactory,\n            AuthenticationService authenticationService,\n            @Value(&quot;${myapp.jwt-secret}&quot;) String jwtSecret) {\n\n        super(authenticationManager);\n        this.authenticationFactory = authenticationFactory;\n        this.authenticationService = authenticationService;\n        this.jwtSecret = jwtSecret;\n\n    }\n\n    @Override\n    protected void doFilterInternal(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            FilterChain filterChain) throws IOException, ServletException {\n\n        String authHeader = request.getHeader(AUTHORIZATION_HEADER);\n\n        // allow the request through if no valid auth header is set; spring security\n        // will throw access denied exceptions downstream if the request is for an\n        // authenticated url\n        if (authHeader == null || !authHeader.startsWith(BEARER_TOKEN_PREFIX)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        // otherwise an auth header was specified so lets take a look at it and grant access based\n        // on what we find\n        try {\n\n            DecodedJWT decodedJWT = JwtUtils.verifyToken(authHeader.replace(BEARER_TOKEN_PREFIX, &quot;&quot;), jwtSecret);\n            String subject = decodedJWT.getSubject();\n            ApiAuthentication authentication = authenticationFactory.createAuthentication(subject, null);\n\n            // TODO: I believe I need to look up granted authorities here and set them\n\n            authenticationService.setCurrentAuthentication(authentication);\n            filterChain.doFilter(request, response);\n\n        } catch (JWTVerificationException jwtVerificationEx) {\n            throw new AccessDeniedException(&quot;access denied&quot;, jwtVerificationEx);\n        }\n\n    }\n\n}\n\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\npublic class SecurityConfigV2 {\n\n    private boolean securityDebug;\n\n    private ObjectMapper objectMapper;\n    private ApiAuthenticationFactory authenticationFactory;\n    private TokenService tokenService;\n\n    private AuthenticationService authenticationService;\n    private String jwtSecret;\n    private ApiUnauthorizedHandler unauthorizedHandler;\n    private ApiSignInFailureHandler signInFailureHandler;\n\n    private BCryptPasswordEncoder passwordEncoder;\n    private RealmService realmService;\n\n    @Autowired\n    public SecurityConfigV2(\n            @Value(&quot;${spring.security.debug:false}&quot;) boolean securityDebug,\n            ObjectMapper objectMapper,\n            ApiAuthenticationFactory authenticationFactory,\n            TokenService tokenService,\n            AuthenticationService authenticationService,\n            @Value(&quot;${myapp.authentication.jwt-secret}&quot;) String jwtSecret,\n            ApiUnauthorizedHandler unauthorizedHandler,\n            ApiSignInFailureHandler signInFailureHandler,\n            BCryptPasswordEncoder passwordEncoder,\n            RealmService realmService) {\n        this.securityDebug = securityDebug;\n        this.objectMapper = objectMapper;\n        this.authenticationFactory = authenticationFactory;\n        this.tokenService = tokenService;\n        this.authenticationService = authenticationService;\n        this.jwtSecret = jwtSecret;\n        this.unauthorizedHandler = unauthorizedHandler;\n        this.signInFailureHandler = signInFailureHandler;\n        this.passwordEncoder = passwordEncoder;\n        this.realmService = realmService;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n\n        // build authentication manager\n        AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)\n            .userDetailsService(realmService)\n            .passwordEncoder(passwordEncoder)\n            .and()\n            .build();   // &lt;-- calling it once up here, to get an AuthenticationManager instance\n\n        // enable CSRF\n        // TODO: enable once you are ready to provide 'CSRF tokens'\n        //  https://stackoverflow.com/a/75646727/5235665\n        httpSecurity.csrf().disable();\n\n        // add CORS filter\n        httpSecurity.cors();\n\n        // add anonoymous/permitted paths (that is: what paths are allowed to bypass authentication)\n        httpSecurity.authorizeRequests()\n            .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\n            .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()\n            .antMatchers(HttpMethod.POST, &quot;/v*/tokens/refresh&quot;).permitAll();\n\n        // restrict all other paths and set them to authenticated\n        httpSecurity.authorizeRequests().anyRequest().authenticated();\n\n        // add authn + authz filters -- using AuthenticationManager instance here\n        httpSecurity.addFilter(apiAuthenticationFilter(authenticationManager));\n        httpSecurity.addFilter(apiAuthorizationFilter(authenticationManager));\n\n        // configure exception-handling for authn and authz\n        httpSecurity.exceptionHandling().accessDeniedHandler(unauthorizedHandler);\n        httpSecurity.exceptionHandling().authenticationEntryPoint(signInFailureHandler);\n\n        // configure stateless http sessions (appropriate for RESTful web services)\n        httpSecurity.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        // and building it a 2nd time here, to complete the filter\n        // but I believe this is what causes the error\n        return httpSecurity.build();\n    }\n\n    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {\n\n        ApiAuthenticationFilter authenticationFilter = new ApiAuthenticationFilter(\n                authenticationManager, tokenService, objectMapper, authenticationFactory);\n        return authenticationFilter;\n\n    }\n\n    public ApiAuthorizationFilter apiAuthorizationFilter(AuthenticationManager authenticationManager) {\n\n        ApiAuthorizationFilter authorizationFilter = new ApiAuthorizationFilter(\n            authenticationManager,\n            authenticationFactory,\n            authenticationService,\n            jwtSecret);\n\n        return authorizationFilter;\n\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.debug(securityDebug)\n            .ignoring()\n            .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/img/**&quot;, &quot;/lib/**&quot;, &quot;/favicon.ico&quot;);\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n\n        CorsConfiguration corsConfiguration = new CorsConfiguration();\n        corsConfiguration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n        corsConfiguration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-Type&quot;));\n\n        UrlBasedCorsConfigurationSource corsConfigurationSource = new UrlBasedCorsConfigurationSource();\n        corsConfigurationSource.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);\n\n        return corsConfigurationSource;\n\n    }\n\n}\n</code></pre>\n<p>When I start up my app I am getting:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name \n'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': \nUnsatisfied dependency expressed through method 'setFilterChains' parameter 0; nested exception is \norg.springframework.beans.factory.BeanCreationException: \nError creating bean with name 'filterChain' defined \nin class path resource [myapp/ws/security/v2/SecurityConfigV2.class]: \nBean instantiation via factory method failed; nested exception is \norg.springframework.beans.BeanInstantiationException: \nFailed to instantiate [org.springframework.security.web.SecurityFilterChain]: \nFactory method 'filterChain' threw exception; \nnested exception is org.springframework.security.config.annotation.AlreadyBuiltException: \nThis object has already been built\n</code></pre>\n<p>The Google Gods say this is because I'm calling <code>httpSecurity.build()</code> <strong>twice</strong> which is not allowed. However:</p>\n<ul>\n<li>My authn and authz filter require an <code>AuthenticationManager</code> instance; and</li>\n<li>It seems that the only way (please tell me if I'm wrong!) to get an <code>AuthenticationManager</code> instance is to run <code>httpSecurity.build()</code>; <strong>but</strong></li>\n<li>I need the authn/authz filter <em>before</em> I can call <code>httpSecurity.build()</code></li>\n</ul>\n<p>Can anyone help nudge me across the finish line here? Thanks for any and all help!</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"answers":[{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1679441426,"creation_date":1521738530,"answer_id":49434556,"question_id":49433935,"body_markdown":"Yes, this is equivalent.   \r\n\r\nThe [`@Lazy` javadoc][1] states :   \r\n\r\n&gt; In addition to its role for component initialization, this annotation\r\n&gt; may also be placed on injection points marked with\r\n&gt; `org.springframework.beans.factory.annotation.Autowired` or\r\n&gt; `javax.inject.Inject`: In that context, it leads to the creation of a\r\n&gt; lazy-resolution proxy for all affected dependencies, as an alternative\r\n&gt; to `using org.springframework.beans.factory.ObjectFactory` or\r\n&gt; `javax.inject.Provider`.\r\n\r\nThe important part is :\r\n\r\n&gt;  **it leads to the creation of a lazy-resolution proxy for all affected\r\n&gt; dependencies**\r\n\r\nin terms of dependencies your `DogService` bean has two of them autowired in any case : `CatService catService` and `MouseService mouseService`.  \r\nSo annotating the constructor or all parameters individually will produce the same result : the two dependencies will be lazy loaded.\r\n\r\n**Note**: I have tested them and the behavior is exactly the same in both cases.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Lazy.html","title":"Is using `@Lazy` on a component constructor equal to annotating every argument?","body":"<p>Yes, this is equivalent.</p>\n<p>The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Lazy.html\" rel=\"nofollow noreferrer\"><code>@Lazy</code> javadoc</a> states :</p>\n<blockquote>\n<p>In addition to its role for component initialization, this annotation\nmay also be placed on injection points marked with\n<code>org.springframework.beans.factory.annotation.Autowired</code> or\n<code>javax.inject.Inject</code>: In that context, it leads to the creation of a\nlazy-resolution proxy for all affected dependencies, as an alternative\nto <code>using org.springframework.beans.factory.ObjectFactory</code> or\n<code>javax.inject.Provider</code>.</p>\n</blockquote>\n<p>The important part is :</p>\n<blockquote>\n<p><strong>it leads to the creation of a lazy-resolution proxy for all affected\ndependencies</strong></p>\n</blockquote>\n<p>in terms of dependencies your <code>DogService</code> bean has two of them autowired in any case : <code>CatService catService</code> and <code>MouseService mouseService</code>.<br />\nSo annotating the constructor or all parameters individually will produce the same result : the two dependencies will be lazy loaded.</p>\n<p><strong>Note</strong>: I have tested them and the behavior is exactly the same in both cases.</p>\n"}],"owner":{"account_id":4154011,"reputation":826,"user_id":6113718,"accept_rate":75,"display_name":"Michiel Haisma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10199,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":49434556,"answer_count":1,"score":16,"last_activity_date":1679441426,"creation_date":1521736481,"question_id":49433935,"body_markdown":"In Spring, consider a `@Service` class, that has the following autowired constructor:\r\n\r\n    public DogService(@Lazy CatService catService, @Lazy MouseService mouseService) {\r\n      this.catService = catService;\r\n      this.mouseService = mouseService;\r\n    }\r\n\r\nis this equivalent to?\r\n\r\n    @Lazy\r\n    public DogService(CatService catService, MouseService mouseService) {\r\n      this.catService = catService;\r\n      this.mouseService = mouseService;\r\n    }","title":"Is using `@Lazy` on a component constructor equal to annotating every argument?","body":"<p>In Spring, consider a <code>@Service</code> class, that has the following autowired constructor:</p>\n\n<pre><code>public DogService(@Lazy CatService catService, @Lazy MouseService mouseService) {\n  this.catService = catService;\n  this.mouseService = mouseService;\n}\n</code></pre>\n\n<p>is this equivalent to?</p>\n\n<pre><code>@Lazy\npublic DogService(CatService catService, MouseService mouseService) {\n  this.catService = catService;\n  this.mouseService = mouseService;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","web","jetty"],"answers":[{"comments":[{"owner":{"account_id":4788690,"reputation":877,"user_id":3868454,"accept_rate":60,"display_name":"Nick Legend"},"score":0,"creation_date":1679392375,"post_id":75799251,"comment_id":133709374,"body_markdown":"This doesn&#39;t work. I&#39;m not using SB.","body":"This doesn&#39;t work. I&#39;m not using SB."},{"owner":{"account_id":2340029,"reputation":154,"user_id":2051532,"display_name":"Ramkumar Pillai"},"score":0,"creation_date":1679408953,"post_id":75799251,"comment_id":133714293,"body_markdown":"may i know which framework you are using.. based on the code snippet and log warning  org.springframework.web.servlet.DispatcherServlet i thought you are using SB","body":"may i know which framework you are using.. based on the code snippet and log warning  org.springframework.web.servlet.DispatcherServlet i thought you are using SB"},{"owner":{"account_id":4788690,"reputation":877,"user_id":3868454,"accept_rate":60,"display_name":"Nick Legend"},"score":0,"creation_date":1679423982,"post_id":75799251,"comment_id":133718999,"body_markdown":"Ramkumar, thanks for your help! I&#39;m using a plain old Java web project with a `web.xml` file that defines the Spring&#39;s dispatcher servlet. JSP processing is done by the Jetty `jsp` module as I can see. It&#39;s a study project with which I want to understand how the configuration may and must be done. Probably later will have a look at Spring Boot. As for now I wonder whether it&#39;s possible (and reasonable) for some controllers to return JSP pages and some to return plain HTML pages.","body":"Ramkumar, thanks for your help! I&#39;m using a plain old Java web project with a <code>web.xml</code> file that defines the Spring&#39;s dispatcher servlet. JSP processing is done by the Jetty <code>jsp</code> module as I can see. It&#39;s a study project with which I want to understand how the configuration may and must be done. Probably later will have a look at Spring Boot. As for now I wonder whether it&#39;s possible (and reasonable) for some controllers to return JSP pages and some to return plain HTML pages."}],"tags":[],"owner":{"account_id":2340029,"reputation":154,"user_id":2051532,"display_name":"Ramkumar Pillai"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679390199,"creation_date":1679390199,"answer_id":75799251,"question_id":75790960,"body_markdown":"add all your static files under resources/static/ as below\r\n\r\n[![SB-web folder Structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mweV1.png\r\n\r\nyou can access the files as below\r\n\r\nhttp://localhost:8080/ or http://localhost:8080/index.html\r\n\r\nhttp://localhost:8080/hello.html\r\n\r\nuse the below CURL to get the sample SB Project \r\n\r\n    curl https://start.spring.io/starter.tgz -d dependencies=web -d type=maven-project | tar -xzvf -","title":"Serve HTML files from inside WAR file with Jetty server and Spring MVC","body":"<p>add all your static files under resources/static/ as below</p>\n<p><a href=\"https://i.stack.imgur.com/mweV1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mweV1.png\" alt=\"SB-web folder Structure\" /></a></p>\n<p>you can access the files as below</p>\n<p>http://localhost:8080/ or http://localhost:8080/index.html</p>\n<p>http://localhost:8080/hello.html</p>\n<p>use the below CURL to get the sample SB Project</p>\n<pre><code>curl https://start.spring.io/starter.tgz -d dependencies=web -d type=maven-project | tar -xzvf -\n</code></pre>\n"},{"tags":[],"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679441162,"creation_date":1679441162,"answer_id":75807213,"question_id":75790960,"body_markdown":"You have to enable Spring to serve up static files. All you did was tell Spring to return a &quot;view&quot; called &quot;/html/htmlHello.html&quot;. \r\n\r\nYou don&#39;t say what version of Spring you&#39;re using, but for instance with the latest: https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-static-resources\r\n\r\nHere&#39;s the XML-based setup we use:\r\n\r\n```xml\r\n    &lt;!-- Allows for mapping the DispatcherServlet to &quot;/&quot; by forwarding static\r\n        resource requests to the container&#39;s default Servlet --&gt;\r\n    &lt;mvc:resources mapping=&quot;/resources/**&quot; location=&quot;/htdocs/&quot;/&gt;\r\n    &lt;mvc:default-servlet-handler /&gt;\r\n```","title":"Serve HTML files from inside WAR file with Jetty server and Spring MVC","body":"<p>You have to enable Spring to serve up static files. All you did was tell Spring to return a &quot;view&quot; called &quot;/html/htmlHello.html&quot;.</p>\n<p>You don't say what version of Spring you're using, but for instance with the latest: <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-static-resources\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-static-resources</a></p>\n<p>Here's the XML-based setup we use:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;!-- Allows for mapping the DispatcherServlet to &quot;/&quot; by forwarding static\n        resource requests to the container's default Servlet --&gt;\n    &lt;mvc:resources mapping=&quot;/resources/**&quot; location=&quot;/htdocs/&quot;/&gt;\n    &lt;mvc:default-servlet-handler /&gt;\n</code></pre>\n"}],"owner":{"account_id":4788690,"reputation":877,"user_id":3868454,"accept_rate":60,"display_name":"Nick Legend"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75807213,"answer_count":2,"score":1,"last_activity_date":1679441162,"creation_date":1679319483,"question_id":75790960,"body_markdown":"I have a simple Jetty server installation and run a WAR file compiled with Spring MVC. The WAR file is located in the `$JETTY_BASE` directory. `jsp` module is installed (`java -jar $JETTY_HOME/start.jar --add-to-start=jsp`) and JSP files are served well from inside the WAR file. But when I create a controller:\r\n\r\n````\r\n@Controller\r\n@RequestMapping(&quot;/html&quot;)\r\npublic class HtmlHelloController {\r\n\r\n    @RequestMapping(&quot;/hello&quot;)\r\n    public String getHtmlHello() {\r\n        return &quot;/html/htmlHello.html&quot;;\r\n    }\r\n}\r\n````\r\n\r\nAnd try to use it with `http://localhost:8080/web-app-spring/html/hello` I get:\r\n\r\n````\r\nMar 20, 2023 2:06:52 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound\r\nWARNING: No mapping for GET /web-app-spring/html/htmlHello.html\r\n````\r\n\r\nThe file `html/htmlHello.html` is present in my `webapp` directory.\r\n\r\nIs there a (preferably simple) way to serve this `html/htmlHello.html` file from inside my WAR file in Jetty?","title":"Serve HTML files from inside WAR file with Jetty server and Spring MVC","body":"<p>I have a simple Jetty server installation and run a WAR file compiled with Spring MVC. The WAR file is located in the <code>$JETTY_BASE</code> directory. <code>jsp</code> module is installed (<code>java -jar $JETTY_HOME/start.jar --add-to-start=jsp</code>) and JSP files are served well from inside the WAR file. But when I create a controller:</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/html&quot;)\npublic class HtmlHelloController {\n\n    @RequestMapping(&quot;/hello&quot;)\n    public String getHtmlHello() {\n        return &quot;/html/htmlHello.html&quot;;\n    }\n}\n</code></pre>\n<p>And try to use it with <code>http://localhost:8080/web-app-spring/html/hello</code> I get:</p>\n<pre><code>Mar 20, 2023 2:06:52 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound\nWARNING: No mapping for GET /web-app-spring/html/htmlHello.html\n</code></pre>\n<p>The file <code>html/htmlHello.html</code> is present in my <code>webapp</code> directory.</p>\n<p>Is there a (preferably simple) way to serve this <code>html/htmlHello.html</code> file from inside my WAR file in Jetty?</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"score":1,"creation_date":1679439171,"post_id":75806942,"comment_id":133722200,"body_markdown":"On Android 10+, no permission is allowed to public storage without making the user intentionally select those files","body":"On Android 10+, no permission is allowed to public storage without making the user intentionally select those files"}],"owner":{"account_id":11269956,"reputation":401,"user_id":10536551,"display_name":"OliverDamon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679441105,"creation_date":1679438268,"question_id":75806942,"body_markdown":"I&#39;m trying to implement some solutions to delete a screenshot I took on the device, but nothing works.\r\n\r\nThe last one I tried was this:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n     val file = File(&quot;/storage/emulated/0/DCIM/Screenshots/Screenshot_2023-03-21-19-26-23-933_com.mi.android.globallauncher.jpg&quot;)\r\n                    Uri.fromFile(file)\r\n                    file.setWritable(true)\r\n                    if (file.canWrite()) {\r\n                        file.delete()\r\n                    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How can I delete a screenshot from the device through the app(Android)","body":"<p>I'm trying to implement some solutions to delete a screenshot I took on the device, but nothing works.</p>\n<p>The last one I tried was this:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> val file = File(\"/storage/emulated/0/DCIM/Screenshots/Screenshot_2023-03-21-19-26-23-933_com.mi.android.globallauncher.jpg\")\n                Uri.fromFile(file)\n                file.setWritable(true)\n                if (file.canWrite()) {\n                    file.delete()\n                }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","object","casting","polymorphism","compareto"],"comments":[{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1679441041,"post_id":75807172,"comment_id":133722472,"body_markdown":"Welcome to Stack Overflow. In your own words, what should happen if you try to compare an Object to a Rational, and you ask the Object class for the code that explains the comparison? Do Objects know how to be compared to Rationals? In your own words, if you write `(r2).compareTo(r1)`, and the **variable** `r2` has the type `Object`, what class do you think will be used to find the `compareTo` code? Why?","body":"Welcome to Stack Overflow. In your own words, what should happen if you try to compare an Object to a Rational, and you ask the Object class for the code that explains the comparison? Do Objects know how to be compared to Rationals? In your own words, if you write <code>(r2).compareTo(r1)</code>, and the <b>variable</b> <code>r2</code> has the type <code>Object</code>, what class do you think will be used to find the <code>compareTo</code> code? Why?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1679442428,"post_id":75807172,"comment_id":133722647,"body_markdown":"Hello. For future reference, when the question is about an error message, please include, as text, a copy of the error message in the question body. When the question references line numbers in the code, the question body should indicate which are the line numbers being referred to.  It may help to include, as text, example input and output.","body":"Hello. For future reference, when the question is about an error message, please include, as text, a copy of the error message in the question body. When the question references line numbers in the code, the question body should indicate which are the line numbers being referred to.  It may help to include, as text, example input and output."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1679444436,"post_id":75807172,"comment_id":133722899,"body_markdown":"First and foremost, ***never*** try to run code that doesn&#39;t compile, as you are doing.","body":"First and foremost, <b><i>never</i></b> try to run code that doesn&#39;t compile, as you are doing."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679440694,"creation_date":1679440694,"answer_id":75807181,"question_id":75807172,"body_markdown":"`Object` does not declare a method with the name `compareTo`, thus you cannot call it. Typically, classes that provide a sorting order implement `Comparable`, so this is the type you should use for just a guarantee of being able to compare two objects.","title":"Why is compareTo() receiving runtime error when comparing two objects?","body":"<p><code>Object</code> does not declare a method with the name <code>compareTo</code>, thus you cannot call it. Typically, classes that provide a sorting order implement <code>Comparable</code>, so this is the type you should use for just a guarantee of being able to compare two objects.</p>\n"}],"owner":{"account_id":28069606,"reputation":21,"user_id":21442437,"display_name":"ProgrammingStudent"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75807181,"answer_count":1,"score":-2,"last_activity_date":1679440694,"creation_date":1679440568,"question_id":75807172,"body_markdown":"When referencing the object &quot;r2&quot; at line 12, there is a runtime error. Why is this?\r\n\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tRational r1 = new Rational(-2, 6);\r\n\t\tSystem.out.println(r1.getNumerator());\r\n\t\tSystem.out.println(r1.getDenominator());\r\n\t\tSystem.out.println(r1.intValue());\r\n\t\tSystem.out.println(r1.doubleValue() + &quot;\\n&quot;);\r\n\t\t\r\n\t\tObject r2 = new Rational(1,45);\r\n\t\tSystem.out.println((r2).compareTo(r1));\r\n\t\t\r\n\t}\r\n\r\n\r\nIn line 11, I changed the object class to Rational and the code works but it does not work with **Object r2**. I&#39;m just curious as to the underlying reason this doesn&#39;t work with **Object r2**.","title":"Why is compareTo() receiving runtime error when comparing two objects?","body":"<p>When referencing the object &quot;r2&quot; at line 12, there is a runtime error. Why is this?</p>\n<pre><code>public static void main(String[] args) {\n    \n    Rational r1 = new Rational(-2, 6);\n    System.out.println(r1.getNumerator());\n    System.out.println(r1.getDenominator());\n    System.out.println(r1.intValue());\n    System.out.println(r1.doubleValue() + &quot;\\n&quot;);\n    \n    Object r2 = new Rational(1,45);\n    System.out.println((r2).compareTo(r1));\n    \n}\n</code></pre>\n<p>In line 11, I changed the object class to Rational and the code works but it does not work with <strong>Object r2</strong>. I'm just curious as to the underlying reason this doesn't work with <strong>Object r2</strong>.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1679401521,"post_id":75801105,"comment_id":133711829,"body_markdown":"Refer this if it helps - https://stackoverflow.com/questions/18225997/stale-element-reference-element-is-not-attached-to-the-page-document","body":"Refer this if it helps - <a href=\"https://stackoverflow.com/questions/18225997/stale-element-reference-element-is-not-attached-to-the-page-document\" title=\"stale element reference element is not attached to the page document\">stackoverflow.com/questions/18225997/&hellip;</a>"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1679422175,"post_id":75801105,"comment_id":133718494,"body_markdown":"once you click the DOM is probably going to update which will make your &quot;listofItems&quot; element references all go stale.","body":"once you click the DOM is probably going to update which will make your &quot;listofItems&quot; element references all go stale."}],"answers":[{"comments":[{"owner":{"account_id":937336,"reputation":54163,"user_id":966023,"accept_rate":65,"display_name":"pguardiario"},"score":0,"creation_date":1679445896,"post_id":75807169,"comment_id":133723094,"body_markdown":"Make sure you understand what stale element reference means. It&#39;s when a reference no longer points to an element that&#39;s in DOM","body":"Make sure you understand what stale element reference means. It&#39;s when a reference no longer points to an element that&#39;s in DOM"},{"owner":{"account_id":28037235,"reputation":1,"user_id":21415402,"display_name":"joao victor"},"score":1,"creation_date":1679449576,"post_id":75807169,"comment_id":133723501,"body_markdown":"Users and password are on Howard&#39;s own site, I&#39;ll be grateful for the help","body":"Users and password are on Howard&#39;s own site, I&#39;ll be grateful for the help"},{"owner":{"account_id":28037235,"reputation":1,"user_id":21415402,"display_name":"joao victor"},"score":0,"creation_date":1679597653,"post_id":75807169,"comment_id":133754513,"body_markdown":"I tried in the ways indicated by you, but without success, either by ancestors or by explicit waiting :(","body":"I tried in the ways indicated by you, but without success, either by ancestors or by explicit waiting :("},{"owner":{"account_id":28037235,"reputation":1,"user_id":21415402,"display_name":"joao victor"},"score":0,"creation_date":1679743841,"post_id":75807169,"comment_id":133777781,"body_markdown":"I managed to solve the problem using the explicit wait, but throughout the loop, the list is only on one button, it does not click on others","body":"I managed to solve the problem using the explicit wait, but throughout the loop, the list is only on one button, it does not click on others"},{"owner":{"account_id":28049622,"reputation":460,"user_id":21425739,"display_name":"howard_9"},"score":0,"creation_date":1679761470,"post_id":75807169,"comment_id":133780364,"body_markdown":"Hi @joaovictor, you can create a minimum working setup of your project on https://stackblitz.com/, and I&#39;ll log in to join you to work through the issues.  (By the way, please upvote my answer if it was able to partially help you, thanks!)","body":"Hi @joaovictor, you can create a minimum working setup of your project on <a href=\"https://stackblitz.com/\" rel=\"nofollow noreferrer\">stackblitz.com</a>, and I&#39;ll log in to join you to work through the issues.  (By the way, please upvote my answer if it was able to partially help you, thanks!)"}],"tags":[],"owner":{"account_id":28049622,"reputation":460,"user_id":21425739,"display_name":"howard_9"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679440543,"creation_date":1679440543,"answer_id":75807169,"question_id":75801105,"body_markdown":"A few ideas:\r\n***\r\nFirst, try using an explicit wait instead of implicit wait.  Sometimes, that helps.\r\n\r\nIf an explicit wait of 20 seconds works, then you would gradually reduce the wait down to 15 seconds, 10 seconds, 5 seconds, ... until you find the shortest working wait time.\r\n***\r\nSecond, if the above doesn&#39;t work, what I would normally do is to locate the parent DOM element of the target, and work downward from there. (And, if the parent element doesn&#39;t work, try the grandparent element, etc). Target the descendant with css selector &quot;#idOfAncestor *&quot;.\r\n\r\nWebpages are built using dynamic Javascript nowadays, so there are many ways for an element to become &quot;hidden&quot; or &quot;removed&quot; (or, even worse, become &quot;visible but uninteractable&quot;.) Sometimes, it helps to locate the stale elements from the ancestor elements.\r\n***\r\nIf the above two appraoches don&#39;t work, sometimes it helps to use other Selenium methods to locate the element, such as:\r\n* [presenceOfElement](https://stackoverflow.com/questions/20903231/how-to-make-selenium-wait-until-an-element-is-present)\r\n* [visibilityOfElementLocated](https://stackoverflow.com/questions/10941184/equivalent-of-waitforvisible-waitforelementpresent-in-selenium-webdriver-tests-u)\r\n* [elementToBeClickable](https://stackoverflow.com/questions/38327049/check-if-element-is-clickable-in-selenium-java)\r\n***\r\nBy the way, do you have any username/password for your https://www.saucedemo.com website? (so that I can try to log in and help) Thanks!","title":"Error: org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document","body":"<p>A few ideas:</p>\n<hr />\n<p>First, try using an explicit wait instead of implicit wait.  Sometimes, that helps.</p>\n<p>If an explicit wait of 20 seconds works, then you would gradually reduce the wait down to 15 seconds, 10 seconds, 5 seconds, ... until you find the shortest working wait time.</p>\n<hr />\n<p>Second, if the above doesn't work, what I would normally do is to locate the parent DOM element of the target, and work downward from there. (And, if the parent element doesn't work, try the grandparent element, etc). Target the descendant with css selector &quot;#idOfAncestor *&quot;.</p>\n<p>Webpages are built using dynamic Javascript nowadays, so there are many ways for an element to become &quot;hidden&quot; or &quot;removed&quot; (or, even worse, become &quot;visible but uninteractable&quot;.) Sometimes, it helps to locate the stale elements from the ancestor elements.</p>\n<hr />\n<p>If the above two appraoches don't work, sometimes it helps to use other Selenium methods to locate the element, such as:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/20903231/how-to-make-selenium-wait-until-an-element-is-present\">presenceOfElement</a></li>\n<li><a href=\"https://stackoverflow.com/questions/10941184/equivalent-of-waitforvisible-waitforelementpresent-in-selenium-webdriver-tests-u\">visibilityOfElementLocated</a></li>\n<li><a href=\"https://stackoverflow.com/questions/38327049/check-if-element-is-clickable-in-selenium-java\">elementToBeClickable</a></li>\n</ul>\n<hr />\n<p>By the way, do you have any username/password for your <a href=\"https://www.saucedemo.com\" rel=\"nofollow noreferrer\">https://www.saucedemo.com</a> website? (so that I can try to log in and help) Thanks!</p>\n"}],"owner":{"account_id":28037235,"reputation":1,"user_id":21415402,"display_name":"joao victor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679440543,"creation_date":1679401069,"question_id":75801105,"body_markdown":"My code is giving the following error &quot;org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document&quot; .It runs once, but when it goes to the second item, the error happens.\r\n\r\n\r\n\r\n        /**\r\n         * CONSEGUI CAPTURAR OS ITENS A SER COMPRADOS ATRAVES DO PRIMEIRO WEBELEMENT\r\n         * que basicamente fez um elemento web com a div que contem os itens\r\n         * E DEPOIS FIZ UMA LISTA DESSE PRIMEIRO WEBELEMENT\r\n         * aonde filtrei pelo ids que continham a string &quot;add-to-cart-&quot;\r\n         */\r\n        WebElement prod=driver.findElement(By.id(&quot;inventory_container&quot;));\r\n        List &lt;WebElement&gt; listofItems = prod.findElements(By.xpath(&quot;//button[starts-with(@id,&#39;add-to-cart-&#39;)]&quot;));\r\n        for(WebElement product : listofItems){\r\n\r\n            prod=driver.findElement(By.id(&quot;inventory_container&quot;));\r\n            listofItems = prod.findElements(By.xpath(&quot;//button[starts-with(@id,&#39;add-to-cart-&#39;)]&quot;));\r\n            \r\n            \r\n            driver.findElement(By.xpath(&quot;//button[@id=&#39;add-to-cart-sauce-labs-fleece-jacket&#39;]&quot;)).click();\r\n            product.click();\r\n            driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n\r\n            driver.findElement(By.xpath(&quot;//*[contains(@class, &#39;shopping_cart_container&#39;)]&quot;)).click(); \r\n            driver.findElement(By.xpath(&quot;//button[@id=&#39;checkout&#39;]&quot;)).click(); \r\n            \r\n\r\n            CadastraComprador(&quot;joao&quot;, &quot;costa&quot;, &quot;35510&quot;);\r\n            driver.findElement(By.xpath(&quot;//*[contains(@class, &#39;submit-button btn btn_primary cart_button btn_action&#39;)]&quot;)).click();\r\n            \r\n\r\n            comparaPrecoTotal(&quot;Item total: $65.98&quot;);\r\n            buttonFinish.click();\r\n            driver.navigate().to(&quot;https://www.saucedemo.com/inventory.html&quot;);\r\n        \r\n\r\n\r\n        }\r\n   ","title":"Error: org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document","body":"<p>My code is giving the following error &quot;org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document&quot; .It runs once, but when it goes to the second item, the error happens.</p>\n<pre><code>    /**\n     * CONSEGUI CAPTURAR OS ITENS A SER COMPRADOS ATRAVES DO PRIMEIRO WEBELEMENT\n     * que basicamente fez um elemento web com a div que contem os itens\n     * E DEPOIS FIZ UMA LISTA DESSE PRIMEIRO WEBELEMENT\n     * aonde filtrei pelo ids que continham a string &quot;add-to-cart-&quot;\n     */\n    WebElement prod=driver.findElement(By.id(&quot;inventory_container&quot;));\n    List &lt;WebElement&gt; listofItems = prod.findElements(By.xpath(&quot;//button[starts-with(@id,'add-to-cart-')]&quot;));\n    for(WebElement product : listofItems){\n\n        prod=driver.findElement(By.id(&quot;inventory_container&quot;));\n        listofItems = prod.findElements(By.xpath(&quot;//button[starts-with(@id,'add-to-cart-')]&quot;));\n        \n        \n        driver.findElement(By.xpath(&quot;//button[@id='add-to-cart-sauce-labs-fleece-jacket']&quot;)).click();\n        product.click();\n        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n\n        driver.findElement(By.xpath(&quot;//*[contains(@class, 'shopping_cart_container')]&quot;)).click(); \n        driver.findElement(By.xpath(&quot;//button[@id='checkout']&quot;)).click(); \n        \n\n        CadastraComprador(&quot;joao&quot;, &quot;costa&quot;, &quot;35510&quot;);\n        driver.findElement(By.xpath(&quot;//*[contains(@class, 'submit-button btn btn_primary cart_button btn_action')]&quot;)).click();\n        \n\n        comparaPrecoTotal(&quot;Item total: $65.98&quot;);\n        buttonFinish.click();\n        driver.navigate().to(&quot;https://www.saucedemo.com/inventory.html&quot;);\n    \n\n\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","azure-form-recognizer"],"owner":{"account_id":26936763,"reputation":1,"user_id":20508281,"display_name":"Hallo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679439906,"creation_date":1678565311,"question_id":75709228,"body_markdown":"I&#39;m making a project that takes some information from a physical ID (ex. firstName, lastName, birthDate) and fills them into a form. It&#39;s a Spring Boot project and for the recognition feature, I&#39;m using Azure Form Recognition.\r\n\r\nThe question is, how can I implement Form Recognition in Spring? I didn&#39;t find that much information about this topic.\r\n\r\nI tried to find some repositories but all that I found was about receipt scanning or wasn&#39;t helping at all.","title":"Azure Form Recognition and Spring Boot Implementation","body":"<p>I'm making a project that takes some information from a physical ID (ex. firstName, lastName, birthDate) and fills them into a form. It's a Spring Boot project and for the recognition feature, I'm using Azure Form Recognition.</p>\n<p>The question is, how can I implement Form Recognition in Spring? I didn't find that much information about this topic.</p>\n<p>I tried to find some repositories but all that I found was about receipt scanning or wasn't helping at all.</p>\n"},{"tags":["java","security","ssl"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1411798562,"post_id":26071429,"comment_id":40849525,"body_markdown":"A KeyStore file is not a text file.","body":"A KeyStore file is not a text file."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1489719664,"post_id":26071429,"comment_id":72804953,"body_markdown":"In fact a key is not a key store; a text file is not a key store; and a key can&#39;t be stored in a text file.","body":"In fact a key is not a key store; a text file is not a key store; and a key can&#39;t be stored in a text file."}],"answers":[{"comments":[{"owner":{"account_id":111411,"reputation":1050,"user_id":294320,"accept_rate":38,"display_name":"VGe0rge"},"score":0,"creation_date":1411865400,"post_id":26071504,"comment_id":40865330,"body_markdown":"It depends on which file types your keys are stored. Examples can be found [here](http://alvinalexander.com/java/java-using-keytool-certificate-file-create). If you have any questions/problems, feel free to ask.","body":"It depends on which file types your keys are stored. Examples can be found <a href=\"http://alvinalexander.com/java/java-using-keytool-certificate-file-create\" rel=\"nofollow noreferrer\">here</a>. If you have any questions/problems, feel free to ask."},{"owner":{"account_id":111411,"reputation":1050,"user_id":294320,"accept_rate":38,"display_name":"VGe0rge"},"score":0,"creation_date":1411990669,"post_id":26071504,"comment_id":40898722,"body_markdown":"I am assuming that you have&#39;t added the certificate of the server to the client. Send the code for client connection.","body":"I am assuming that you have&#39;t added the certificate of the server to the client. Send the code for client connection."},{"owner":{"account_id":3934345,"reputation":552,"user_id":3251360,"accept_rate":80,"display_name":"Java Is Cool"},"score":0,"creation_date":1412129667,"post_id":26071504,"comment_id":40960838,"body_markdown":"I changed my client (and server) code and now get the following exception on the client: `javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No X509TrustManager implementation available` `Caused by: java.security.cert.CertificateException: No X509TrustManager implementation available`","body":"I changed my client (and server) code and now get the following exception on the client: <code>javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No X509TrustManager implementation available</code> <code>Caused by: java.security.cert.CertificateException: No X509TrustManager implementation available</code>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1412136426,"post_id":26071504,"comment_id":40962314,"body_markdown":"@JavaIsCool That&#39;s a new question, but you specified an empty array of `TrustManagers` when you initialized your `SSLContext,` didn&#39;t you, so of course there are no `TrustManagers` available.","body":"@JavaIsCool That&#39;s a new question, but you specified an empty array of <code>TrustManagers</code> when you initialized your <code>SSLContext,</code> didn&#39;t you, so of course there are no <code>TrustManagers</code> available."},{"owner":{"account_id":3934345,"reputation":552,"user_id":3251360,"accept_rate":80,"display_name":"Java Is Cool"},"score":0,"creation_date":1412213659,"post_id":26071504,"comment_id":40998115,"body_markdown":"@VGe0rge How do I make a chain of certificates with the keytool command?","body":"@VGe0rge How do I make a chain of certificates with the keytool command?"},{"owner":{"account_id":111411,"reputation":1050,"user_id":294320,"accept_rate":38,"display_name":"VGe0rge"},"score":0,"creation_date":1412262409,"post_id":26071504,"comment_id":41017743,"body_markdown":"You can check this link: http://docs.oracle.com/cd/E19798-01/821-1841/gjrgy/index.html\n\nOpenssl is tool that you can use to create the SSL certificates chain and then add them to a java keystore.","body":"You can check this link: <a href=\"http://docs.oracle.com/cd/E19798-01/821-1841/gjrgy/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19798-01/821-1841/gjrgy/index.html</a>  Openssl is tool that you can use to create the SSL certificates chain and then add them to a java keystore."}],"tags":[],"owner":{"account_id":111411,"reputation":1050,"user_id":294320,"accept_rate":38,"display_name":"VGe0rge"},"comment_count":6,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1411794445,"creation_date":1411794445,"answer_id":26071504,"question_id":26071429,"body_markdown":"Your file is invalid. You have to import a JKS keystore file and not a txt one. You have to use the [keytool](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html) to create your keystore file and then import this file.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>Your file is invalid. You have to import a JKS keystore file and not a txt one. You have to use the <a href=\"http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html\" rel=\"noreferrer\">keytool</a> to create your keystore file and then import this file.</p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1489719617,"post_id":42848413,"comment_id":72804946,"body_markdown":"There is no such issue. You changed something else. When I saw &#39;low version JDK&#39; I thought you meant 1.2.2. 1.8.0_66 is hardly &#39;low&#39;.","body":"There is no such issue. You changed something else. When I saw &#39;low version JDK&#39; I thought you meant 1.2.2. 1.8.0_66 is hardly &#39;low&#39;."},{"owner":{"account_id":8277997,"reputation":1415,"user_id":6223518,"accept_rate":58,"display_name":"Dave Pateral"},"score":1,"creation_date":1489722635,"post_id":42848413,"comment_id":72805779,"body_markdown":"Not 1.8.0_66, I made a mistake, it&#39;s my JDK version. It doesn&#39;t work on my colleague&#39;s  jre1.8.0_25, relatively lower than 66 or the latest, reinstall the JDK is ok, you can try.","body":"Not 1.8.0_66, I made a mistake, it&#39;s my JDK version. It doesn&#39;t work on my colleague&#39;s  jre1.8.0_25, relatively lower than 66 or the latest, reinstall the JDK is ok, you can try."},{"owner":{"account_id":5285623,"reputation":126,"user_id":4219745,"display_name":"William Helgeson"},"score":4,"creation_date":1510252417,"post_id":42848413,"comment_id":81367404,"body_markdown":"I encountered the same issue, fails with JDK 1.8.0_45, works fine with JDK 1.8.0_131","body":"I encountered the same issue, fails with JDK 1.8.0_45, works fine with JDK 1.8.0_131"},{"owner":{"account_id":3985474,"reputation":237,"user_id":3286178,"display_name":"rwenz3l"},"score":0,"creation_date":1548769730,"post_id":42848413,"comment_id":95654842,"body_markdown":"yep, same for me. It also appears when using the docker images of ibmjava vs the openjdk one. Not sure which version exactly causes the issue, but it&#39;s very likely that it is caused by the JDK version.","body":"yep, same for me. It also appears when using the docker images of ibmjava vs the openjdk one. Not sure which version exactly causes the issue, but it&#39;s very likely that it is caused by the JDK version."}],"tags":[],"owner":{"account_id":8277997,"reputation":1415,"user_id":6223518,"accept_rate":58,"display_name":"Dave Pateral"},"comment_count":4,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1489722404,"creation_date":1489719341,"answer_id":42848413,"question_id":26071429,"body_markdown":"I faced with the same problem when `load keystore` with the following code:\r\n\r\n    KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    Resource resource = new ClassPathResource(file);\r\n    trustStore.load(resource.getInputStream(), password.toCharArray());\r\n\r\nIt turned out to be the JDK issue, it doesn&#39;t work with  `jre1.8.0_25`. when I upgrade JDK version to the latest `jre1.8.0_121`, it works.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I faced with the same problem when <code>load keystore</code> with the following code:</p>\n\n<pre><code>KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());\nResource resource = new ClassPathResource(file);\ntrustStore.load(resource.getInputStream(), password.toCharArray());\n</code></pre>\n\n<p>It turned out to be the JDK issue, it doesn't work with  <code>jre1.8.0_25</code>. when I upgrade JDK version to the latest <code>jre1.8.0_121</code>, it works.</p>\n"},{"tags":[],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1524858161,"creation_date":1524858161,"answer_id":50069288,"question_id":26071429,"body_markdown":"I was seeing this exception:\r\n\r\nInvalid keystore format\r\n\r\nwhile running a java application using JRE-1.8.0_40 on CentOS 6.6 64-bit linux.\r\n\r\nOn using JRE-1.8.0_172, the exception went away.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I was seeing this exception:</p>\n\n<p>Invalid keystore format</p>\n\n<p>while running a java application using JRE-1.8.0_40 on CentOS 6.6 64-bit linux.</p>\n\n<p>On using JRE-1.8.0_172, the exception went away.</p>\n"},{"comments":[{"owner":{"account_id":3487753,"reputation":411,"user_id":2918190,"display_name":"DBK"},"score":1,"creation_date":1545279610,"post_id":53397146,"comment_id":94572629,"body_markdown":"Thank you! This wasn&#39;t my exact problem, but it helped me resolve mine. I was &quot;hot&quot; building with my IDE over and over (for days), and seemingly randomly this issue started to happen. Your answer made me think to do a legit maven build, which allowed the next deploy to work :).","body":"Thank you! This wasn&#39;t my exact problem, but it helped me resolve mine. I was &quot;hot&quot; building with my IDE over and over (for days), and seemingly randomly this issue started to happen. Your answer made me think to do a legit maven build, which allowed the next deploy to work :)."},{"owner":{"account_id":1351438,"reputation":175,"user_id":1290935,"accept_rate":50,"display_name":"zgillis"},"score":1,"creation_date":1554664314,"post_id":53397146,"comment_id":97825149,"body_markdown":"Thank you so much! I have spent a whole day stuck on this issue trying to get Kafka to work in my Spring app. You&#39;re a lifesaver.","body":"Thank you so much! I have spent a whole day stuck on this issue trying to get Kafka to work in my Spring app. You&#39;re a lifesaver."}],"tags":[],"owner":{"account_id":1999992,"reputation":879,"user_id":1791268,"display_name":"acaruci"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1542730475,"creation_date":1542730475,"answer_id":53397146,"question_id":26071429,"body_markdown":"I had exactly the same issue. Indeed, the keystore file was invalid and not related to the JDK//JRE version. The problem in my case was caused by Maven. I was using the following option in my pom file:\r\n\r\n    &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n                &lt;filtering&gt;true&lt;/filtering&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n\r\nThe &quot;true&quot; value in the filtering was messing with the key file. Therefore, the keyfile that was available in my classpath when Spring run was not exactly the same I had under my directory &quot;src/main/resources&quot; and that caused the Invalid Keystore Format exception. When I tested with keytool I was using the one under the &quot;resources&quot; folder so that was misleading the real issue. \r\n\r\nSolving the issue: in your pom.xml file, change the value for &quot;filtering&quot; to &quot;false&quot;.\r\nAnother way of solving the issue was to specify explicitly the location of the keystore in the application.properties file. So instead of:\r\n\r\n    server.ssl.key-store: classpath:keystore.jks\r\nI used\r\n\r\n    server.ssl.key-store: keystore/keystore.jks","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I had exactly the same issue. Indeed, the keystore file was invalid and not related to the JDK//JRE version. The problem in my case was caused by Maven. I was using the following option in my pom file:</p>\n\n<pre><code>&lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n</code></pre>\n\n<p>The \"true\" value in the filtering was messing with the key file. Therefore, the keyfile that was available in my classpath when Spring run was not exactly the same I had under my directory \"src/main/resources\" and that caused the Invalid Keystore Format exception. When I tested with keytool I was using the one under the \"resources\" folder so that was misleading the real issue. </p>\n\n<p>Solving the issue: in your pom.xml file, change the value for \"filtering\" to \"false\".\nAnother way of solving the issue was to specify explicitly the location of the keystore in the application.properties file. So instead of:</p>\n\n<pre><code>server.ssl.key-store: classpath:keystore.jks\n</code></pre>\n\n<p>I used</p>\n\n<pre><code>server.ssl.key-store: keystore/keystore.jks\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4999034,"reputation":1880,"user_id":6722075,"display_name":"Tohid Makari"},"score":0,"creation_date":1613491150,"post_id":59312913,"comment_id":117087883,"body_markdown":"you finally used KeyStore Explorer?","body":"you finally used KeyStore Explorer?"}],"tags":[],"owner":{"account_id":9484804,"reputation":31,"user_id":7051466,"display_name":"Zak Aroui"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576185744,"creation_date":1576185744,"answer_id":59312913,"question_id":26071429,"body_markdown":"How did you generate the JKS file? I tried all suggested solutions but none worked for me.  I was getting the same error when trying to read (in my code) a JKS file that I generated using OpenJDK Zulu 11&#39;s keytool. \r\n\r\nI fixed this by instead generating the JKS file using the &quot;KeyStore Explorer&quot; tool, which I believe uses oracle JDK internally. Using the tool, I basically created a JKS file and added my trusted certificate to it. \r\n\r\nI hope this helps.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>How did you generate the JKS file? I tried all suggested solutions but none worked for me.  I was getting the same error when trying to read (in my code) a JKS file that I generated using OpenJDK Zulu 11's keytool. </p>\n\n<p>I fixed this by instead generating the JKS file using the \"KeyStore Explorer\" tool, which I believe uses oracle JDK internally. Using the tool, I basically created a JKS file and added my trusted certificate to it. </p>\n\n<p>I hope this helps.</p>\n"},{"comments":[{"owner":{"account_id":7068399,"reputation":353,"user_id":5410934,"accept_rate":25,"display_name":"Sajjan Kumar"},"score":1,"creation_date":1645606442,"post_id":69270811,"comment_id":125913738,"body_markdown":"Its same for me. I was using java 11 to generate the certs file and using them in java 8 so got the error. Once on same version, it resolved.","body":"Its same for me. I was using java 11 to generate the certs file and using them in java 8 so got the error. Once on same version, it resolved."}],"tags":[],"owner":{"account_id":2869356,"reputation":770,"user_id":2463026,"accept_rate":22,"display_name":"CSR"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1632234877,"creation_date":1632234877,"answer_id":69270811,"question_id":26071429,"body_markdown":"For my case i have used different versions of keytool and java, once i switched to same jdk they got fixed.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>For my case i have used different versions of keytool and java, once i switched to same jdk they got fixed.</p>\n"},{"tags":[],"owner":{"account_id":24720472,"reputation":1,"user_id":18609643,"display_name":"UMehta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650904178,"creation_date":1650904178,"answer_id":72002803,"question_id":26071429,"body_markdown":"I recently had the same problem even though I was using a valid .jks file... the code used to work fine but suddenly it started giving &quot;Invalid keystore format&quot;\r\n\r\nThe answer given earlier to set the pom.xml resource filtering value to &quot;false&quot; worked for me too e.g.,\r\n\r\n     &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n                &lt;filtering&gt;false&lt;/filtering&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I recently had the same problem even though I was using a valid .jks file... the code used to work fine but suddenly it started giving &quot;Invalid keystore format&quot;</p>\n<p>The answer given earlier to set the pom.xml resource filtering value to &quot;false&quot; worked for me too e.g.,</p>\n<pre><code> &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;false&lt;/filtering&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4523377,"reputation":2744,"user_id":3675925,"display_name":"Hamid Zandi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655905583,"creation_date":1655905583,"answer_id":72716704,"question_id":26071429,"body_markdown":"**mac** users\r\n\r\nupdating **JDK** in `System Preferences -&gt; JAVA -&gt; JAVA Control Panel -&gt; Update tab`\r\n\r\nfrom java version **&quot;1.8.0_231&quot;** to **&quot;1.8.0_333&quot;** fixed the issue\r\n","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p><strong>mac</strong> users</p>\n<p>updating <strong>JDK</strong> in <code>System Preferences -&gt; JAVA -&gt; JAVA Control Panel -&gt; Update tab</code></p>\n<p>from java version <strong>&quot;1.8.0_231&quot;</strong> to <strong>&quot;1.8.0_333&quot;</strong> fixed the issue</p>\n"},{"tags":[],"owner":{"account_id":2635164,"reputation":1119,"user_id":2280067,"display_name":"SJX"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675350325,"creation_date":1675350325,"answer_id":75325110,"question_id":26071429,"body_markdown":"If you use openjdk:&lt;br&gt;\r\nUse openjdk version &quot;11.0.17&quot; or a newer one.","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>If you use openjdk:<br>\nUse openjdk version &quot;11.0.17&quot; or a newer one.</p>\n"},{"tags":[],"owner":{"account_id":14792752,"reputation":11,"user_id":10683169,"display_name":"Abusha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679439491,"creation_date":1679439491,"answer_id":75807074,"question_id":26071429,"body_markdown":"\r\nFor me i used the absolute path with the `file:` prefix to make it work. when I used only the name of the file it was giving me invalid keystore format error. \r\n\r\nI hope this helps.  \r\n```\r\n  KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n    ApplicationContext applicationContext = new ClassPathXmlApplicationContext();\r\n    Resource res = applicationContext.getResource(&quot;file:///Users/blibanos/Downloads/peoplefiles.jks&quot;);\r\n    try (InputStream in = res.getInputStream()) {\r\n        keyStore.load(in, password);\r\n    }\r\n    ```","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>For me i used the absolute path with the <code>file:</code> prefix to make it work. when I used only the name of the file it was giving me invalid keystore format error.</p>\n<p>I hope this helps.</p>\n<pre><code>  KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\n    ApplicationContext applicationContext = new ClassPathXmlApplicationContext();\n    Resource res = applicationContext.getResource(&quot;file:///Users/blibanos/Downloads/peoplefiles.jks&quot;);\n    try (InputStream in = res.getInputStream()) {\n        keyStore.load(in, password);\n    }\n    ```\n</code></pre>\n"}],"owner":{"account_id":3934345,"reputation":552,"user_id":3251360,"accept_rate":80,"display_name":"Java Is Cool"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121326,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":26071504,"answer_count":10,"score":16,"last_activity_date":1679439491,"creation_date":1411793635,"question_id":26071429,"body_markdown":"I am testing SSL in java with SSLServerSocket and other classes in the java.ssl package. When I run the following code, I get the exception java.io.IOException: Invalid keystore format. My code:\r\n\r\n    package testing;\r\n    import java.io.BufferedReader;\r\n    import java.io.FileInputStream;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PrintWriter;\r\n    import java.net.Socket;\r\n    import java.security.KeyStore;\r\n    \r\n    import javax.net.ServerSocketFactory;\r\n    import javax.net.ssl.KeyManagerFactory;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLServerSocket;\r\n    import javax.net.ssl.TrustManager;\r\n    \r\n    public class SSLServerTest {\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\t\tint port = 3000;\r\n    \t\t\tSSLContext sc = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n    \t\t\tKeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n    \t\t\tInputStream ksIs = new FileInputStream(&quot;key.txt&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\tks.load(ksIs, &quot;Bennett556&quot;.toCharArray());\r\n    \t\t\t} finally {\r\n    \t\t\t\tif (ksIs != null) {\r\n    \t\t\t\t\tksIs.close();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tKeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    \t\t\tkmf.init(ks, &quot;Bennett556&quot;.toCharArray());\r\n    \t\t\tsc.init(kmf.getKeyManagers(), new TrustManager[] {}, null);\r\n    \t\t\tServerSocketFactory ssocketFactory = sc.getServerSocketFactory();\r\n    \t\t\tSSLServerSocket ssocket = (SSLServerSocket) ssocketFactory\r\n    \t\t\t\t\t.createServerSocket(port);\r\n    \t\t\tssocket.setEnabledProtocols(new String[] { &quot;SSLv3&quot; });\r\n    \t\t\tSocket socket = ssocket.accept();\r\n    \t\t\tBufferedReader in = new BufferedReader(new InputStreamReader(\r\n    \t\t\t\t\tsocket.getInputStream()));\r\n    \t\t\tPrintWriter out = new PrintWriter(socket.getOutputStream());\r\n    \t\t\tout.println(&quot;Hello, Securly!&quot;);\r\n    \t\t\tout.close();\r\n    \t\t\tin.close();\r\n    \t\t\tout.close();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nFile key.txt:\r\n1268312345812304612348712634283427346\r\nI am guessing I should put something else in the key.txt file, but I do not know what to put in it. Probably a searilized object.\r\n\r\n**EDIT: Client Code:**\r\n\r\n    package testing;\r\n    import java.io.BufferedReader;\r\n    import java.io.FileInputStream;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.security.KeyStore;\r\n    \r\n    import javax.net.SocketFactory;\r\n    import javax.net.ssl.KeyManagerFactory;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLSocket;\r\n    import javax.net.ssl.TrustManager;\r\n    \r\n    public class SSLClientTest {\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tint port = 3000;\r\n    \t\tString host = &quot;localhost&quot;;\r\n    \r\n    \t\ttry {\r\n    \t\t\tSSLContext sc = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n    \t\t\tKeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n    \t\t\tInputStream ksIs = new FileInputStream(&quot;key.txt&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\tks.load(ksIs, &quot;Bennett556&quot;.toCharArray());\r\n    \t\t\t} finally {\r\n    \t\t\t\tif (ksIs != null) {\r\n    \t\t\t\t\tksIs.close();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tKeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    \t\t\tkmf.init(ks, &quot;Bennett556&quot;.toCharArray());\r\n    \t\t\tsc.init(kmf.getKeyManagers(), new TrustManager[] {}, null);\r\n    \t\t\tSocketFactory factory = sc.getSocketFactory();\r\n    \t\t\tSSLSocket socket = (SSLSocket) factory.createSocket(host, port);\r\n    \t\t\tsocket.startHandshake();\r\n    \t\t\tBufferedReader in = new BufferedReader(new InputStreamReader(\r\n    \t\t\t\t\tsocket.getInputStream()));\r\n    \t\t\tString str = &quot;&quot;;\r\n    \t\t\twhile ((str = in.readLine()) != null)\r\n    \t\t\t\tSystem.out.println(str);\r\n    \t\t\tin.close();\r\n    \t\t\tsocket.close();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }","title":"SSL Java java.io.IOException: Invalid keystore format","body":"<p>I am testing SSL in java with SSLServerSocket and other classes in the java.ssl package. When I run the following code, I get the exception java.io.IOException: Invalid keystore format. My code:</p>\n\n<pre><code>package testing;\nimport java.io.BufferedReader;\nimport java.io.FileInputStream;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\nimport java.security.KeyStore;\n\nimport javax.net.ServerSocketFactory;\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLServerSocket;\nimport javax.net.ssl.TrustManager;\n\npublic class SSLServerTest {\n    public static void main(String[] args) {\n        try {\n            int port = 3000;\n            SSLContext sc = SSLContext.getInstance(\"TLSv1.2\");\n            KeyStore ks = KeyStore.getInstance(\"JKS\");\n            InputStream ksIs = new FileInputStream(\"key.txt\");\n            try {\n                ks.load(ksIs, \"Bennett556\".toCharArray());\n            } finally {\n                if (ksIs != null) {\n                    ksIs.close();\n                }\n            }\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n            kmf.init(ks, \"Bennett556\".toCharArray());\n            sc.init(kmf.getKeyManagers(), new TrustManager[] {}, null);\n            ServerSocketFactory ssocketFactory = sc.getServerSocketFactory();\n            SSLServerSocket ssocket = (SSLServerSocket) ssocketFactory\n                    .createServerSocket(port);\n            ssocket.setEnabledProtocols(new String[] { \"SSLv3\" });\n            Socket socket = ssocket.accept();\n            BufferedReader in = new BufferedReader(new InputStreamReader(\n                    socket.getInputStream()));\n            PrintWriter out = new PrintWriter(socket.getOutputStream());\n            out.println(\"Hello, Securly!\");\n            out.close();\n            in.close();\n            out.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>File key.txt:\n1268312345812304612348712634283427346\nI am guessing I should put something else in the key.txt file, but I do not know what to put in it. Probably a searilized object.</p>\n\n<p><strong>EDIT: Client Code:</strong></p>\n\n<pre><code>package testing;\nimport java.io.BufferedReader;\nimport java.io.FileInputStream;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.security.KeyStore;\n\nimport javax.net.SocketFactory;\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLSocket;\nimport javax.net.ssl.TrustManager;\n\npublic class SSLClientTest {\n    public static void main(String[] args) {\n\n        int port = 3000;\n        String host = \"localhost\";\n\n        try {\n            SSLContext sc = SSLContext.getInstance(\"TLSv1.2\");\n            KeyStore ks = KeyStore.getInstance(\"JKS\");\n            InputStream ksIs = new FileInputStream(\"key.txt\");\n            try {\n                ks.load(ksIs, \"Bennett556\".toCharArray());\n            } finally {\n                if (ksIs != null) {\n                    ksIs.close();\n                }\n            }\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n            kmf.init(ks, \"Bennett556\".toCharArray());\n            sc.init(kmf.getKeyManagers(), new TrustManager[] {}, null);\n            SocketFactory factory = sc.getSocketFactory();\n            SSLSocket socket = (SSLSocket) factory.createSocket(host, port);\n            socket.startHandshake();\n            BufferedReader in = new BufferedReader(new InputStreamReader(\n                    socket.getInputStream()));\n            String str = \"\";\n            while ((str = in.readLine()) != null)\n                System.out.println(str);\n            in.close();\n            socket.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","runtime"],"comments":[{"owner":{"account_id":2153838,"reputation":1042,"user_id":1909501,"display_name":"janith1024"},"score":0,"creation_date":1679465230,"post_id":75807061,"comment_id":133725085,"body_markdown":"Too much codes and other things in this question. Please ask the specific problem that you face while do the coding. Then it is easy to give solution.","body":"Too much codes and other things in this question. Please ask the specific problem that you face while do the coding. Then it is easy to give solution."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1679465256,"post_id":75807061,"comment_id":133725094,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":24803683,"reputation":11,"user_id":18685873,"display_name":"cocojambo01"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679439310,"creation_date":1679439310,"question_id":75807061,"body_markdown":"so I am trying to pass data from one fragment to another.\r\nThe navigation would be the following:\r\nfragment1 -\\&gt; fragment2 -\\&gt; fragment1\r\nessentially I am sending some data from fragment1 to fragment2 and after the user completes the data I want to send back, I am sending the completed data from fragment2 back to fragment1.\r\n\r\nTo send data from fragment1 to fragment2 I am using(working code, data is recieved in fragment2):\r\n\r\n```\r\n                        //package image uri\r\n                        Bundle bundle = new Bundle();\r\n                        bundle.putString(&quot;imageURI&quot;, result.toString());\r\n\r\n                        //navigate to image display and set title with parceled uri\r\n                        NavController navController = Navigation.findNavController(view);\r\n                        navController.navigate(R.id.pickedImageFragment, bundle);\r\n```\r\n\r\nTo send data back from fragment2 to fragment1(not working code):\r\n\r\n```\r\n                //create the gotten image class\r\n                String photoName = binding.photoDescription.getText().toString().trim();\r\n                String imageID = UUID.randomUUID().toString();\r\n                Image myImage = new Image(imageID, photoName, imageUri);\r\n\r\n                //bundle it\r\n                Gson gson = new Gson();\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(&quot;IMAGE&quot;, gson.toJson(myImage));\r\n\r\n                //send the bundled image on it&#39;s way\r\n                NavController navController = Navigation.findNavController(view);\r\n                navController.navigate(R.id.ThirdFragment, bundle);\r\n```\r\n\r\nAnd on he recieving end I have:\r\n\r\n```\r\n                Gson gson = new Gson();\r\n            \r\n                if (gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class) != null) {\r\n                    Image myImage = gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class);\r\n                    Log.d(&quot;test&quot;, myImage.getImageName());\r\n                    Log.d(&quot;test&quot;, myImage.getId());\r\n                    Log.d(&quot;test&quot;, myImage.getPhoto().toString());\r\n                }\r\n```\r\n\r\nI have also tried to use serialiseble for the Image class, still no result.\r\n\r\ncomplete code:\r\n\r\nfragment1:\r\n\r\n```\r\npackage com.example.briefingaboutitapp;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\nimport androidx.navigation.fragment.NavHostFragment;\r\n\r\nimport com.example.briefingaboutitapp.databinding.FragmentThirdBinding;\r\nimport com.google.gson.Gson;\r\n\r\nimport Entities.Image;\r\n\r\npublic class ThirdFragment extends Fragment {\r\n\r\n    private FragmentThirdBinding binding;\r\n\r\n    private ActivityResultLauncher&lt;String&gt; galleryLauncher;\r\n\r\n    @Override\r\n    public View onCreateView(\r\n            @NonNull LayoutInflater inflater, ViewGroup container,\r\n            Bundle savedInstanceState\r\n    ) {\r\n\r\n        binding = FragmentThirdBinding.inflate(inflater, container, false);\r\n        return binding.getRoot();\r\n\r\n    }\r\n\r\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        try {\r\n            Gson gson = new Gson();\r\n\r\n                if (gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class) != null) {\r\n                    Image myImage = gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class);\r\n                    Log.d(&quot;test&quot;, myImage.getImageName());\r\n                    Log.d(&quot;test&quot;, myImage.getId());\r\n                    Log.d(&quot;test&quot;, myImage.getPhoto().toString());\r\n                }\r\n\r\n        }\r\n        catch (Exception e){\r\n            Log.d(&quot;test&quot;, &quot;image still null&quot;);\r\n        }\r\n\r\n        binding.returnToEditText.setOnClickListener(view1 -&gt; NavHostFragment.findNavController(ThirdFragment.this)\r\n                .navigate(R.id.action_ThirdFragment_to_SecondFragment));\r\n\r\n        Button photoPickerButton = view.findViewById(R.id.photo_picker_button);\r\n        galleryLauncher = registerForActivityResult(new ActivityResultContracts.GetContent(),\r\n                result -&gt; {\r\n                    if(result!= null){\r\n\r\n                        //package image uri\r\n                        Bundle bundle = new Bundle();\r\n                        bundle.putString(&quot;imageURI&quot;, result.toString());\r\n\r\n                        //navigate to image display and set title with parceled uri\r\n                        NavController navController = Navigation.findNavController(view);\r\n                        navController.navigate(R.id.pickedImageFragment, bundle);\r\n                    }\r\n                    else{\r\n                        Toast.makeText(getContext(), &quot;Please select an image!&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n        photoPickerButton.setOnClickListener(view12 -&gt; galleryLauncher.launch(&quot;image/*&quot;));\r\n\r\n        binding.submitForm.setOnClickListener(view1 -&gt; {\r\n            Intent goToMainActivity = new Intent(getContext(), MainActivity.class);\r\n            this.startActivity(goToMainActivity);\r\n            Toast.makeText(this.getContext(),&quot;Article submitted successfully!&quot;,Toast.LENGTH_SHORT).show();\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nfragment2:\r\n\r\n```\r\npackage com.example.briefingaboutitapp;\r\n\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\n\r\nimport com.example.briefingaboutitapp.databinding.FragmentPickedImageBinding;\r\nimport com.google.gson.Gson;\r\n\r\nimport java.util.UUID;\r\n\r\nimport Entities.Image;\r\n\r\npublic class PickedImageFragment extends Fragment {\r\n    private FragmentPickedImageBinding binding;\r\n    private Uri imageUri;\r\n\r\n    @Override\r\n    public View onCreateView(\r\n            @NonNull LayoutInflater inflater, ViewGroup container,\r\n            Bundle savedInstanceState\r\n    ) {\r\n\r\n        binding = FragmentPickedImageBinding.inflate(inflater, container, false);\r\n        return binding.getRoot();\r\n\r\n\r\n    }\r\n\r\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        this.imageUri = Uri.parse(requireArguments().getString(&quot;imageURI&quot;));\r\n\r\n        //get passed image\r\n        ImageView imageView = view.findViewById(R.id.image_view);\r\n        imageView.setImageURI(this.imageUri);\r\n\r\n\r\n        binding.submitMyPhotoButton.setOnClickListener(view1 -&gt; {\r\n            if(binding.photoDescription.getText().toString().trim().equals(&quot;&quot;)){\r\n                Toast.makeText(getContext(), &quot;Pick title/description for photo!&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n            else{\r\n                //create the gotten image class\r\n                String photoName = binding.photoDescription.getText().toString().trim();\r\n                String imageID = UUID.randomUUID().toString();\r\n                Image myImage = new Image(imageID, photoName, imageUri);\r\n\r\n                //bundle it\r\n                Gson gson = new Gson();\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(&quot;IMAGE&quot;, gson.toJson(myImage));\r\n\r\n                //send the bundled image on it&#39;s way\r\n                NavController navController = Navigation.findNavController(view);\r\n                navController.navigate(R.id.ThirdFragment, bundle);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n}\r\n```\r\n\r\nImage class\r\n\r\n```\r\npackage Entities;\r\n\r\nimport android.net.Uri;\r\n\r\nimport java.io.Serializable;\r\n\r\npublic class Image implements Serializable{\r\n    private final String id;\r\n    private final Uri photo;\r\n    private final String imageName;\r\n\r\n    public Image(String id, String imageName, Uri photo) {\r\n        this.id = id;\r\n        this.imageName = imageName;\r\n        this.photo = photo;\r\n    }\r\n\r\n    public Uri getPhoto() {\r\n        return photo;\r\n    }\r\n\r\n    public String getImageName() {\r\n        return imageName;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n}\r\n```","title":"How to send data to already existing fragment","body":"<p>so I am trying to pass data from one fragment to another.\nThe navigation would be the following:\nfragment1 -&gt; fragment2 -&gt; fragment1\nessentially I am sending some data from fragment1 to fragment2 and after the user completes the data I want to send back, I am sending the completed data from fragment2 back to fragment1.</p>\n<p>To send data from fragment1 to fragment2 I am using(working code, data is recieved in fragment2):</p>\n<pre><code>                        //package image uri\n                        Bundle bundle = new Bundle();\n                        bundle.putString(&quot;imageURI&quot;, result.toString());\n\n                        //navigate to image display and set title with parceled uri\n                        NavController navController = Navigation.findNavController(view);\n                        navController.navigate(R.id.pickedImageFragment, bundle);\n</code></pre>\n<p>To send data back from fragment2 to fragment1(not working code):</p>\n<pre><code>                //create the gotten image class\n                String photoName = binding.photoDescription.getText().toString().trim();\n                String imageID = UUID.randomUUID().toString();\n                Image myImage = new Image(imageID, photoName, imageUri);\n\n                //bundle it\n                Gson gson = new Gson();\n                Bundle bundle = new Bundle();\n                bundle.putString(&quot;IMAGE&quot;, gson.toJson(myImage));\n\n                //send the bundled image on it's way\n                NavController navController = Navigation.findNavController(view);\n                navController.navigate(R.id.ThirdFragment, bundle);\n</code></pre>\n<p>And on he recieving end I have:</p>\n<pre><code>                Gson gson = new Gson();\n            \n                if (gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class) != null) {\n                    Image myImage = gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class);\n                    Log.d(&quot;test&quot;, myImage.getImageName());\n                    Log.d(&quot;test&quot;, myImage.getId());\n                    Log.d(&quot;test&quot;, myImage.getPhoto().toString());\n                }\n</code></pre>\n<p>I have also tried to use serialiseble for the Image class, still no result.</p>\n<p>complete code:</p>\n<p>fragment1:</p>\n<pre><code>package com.example.briefingaboutitapp;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.contract.ActivityResultContracts;\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.Fragment;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\nimport androidx.navigation.fragment.NavHostFragment;\n\nimport com.example.briefingaboutitapp.databinding.FragmentThirdBinding;\nimport com.google.gson.Gson;\n\nimport Entities.Image;\n\npublic class ThirdFragment extends Fragment {\n\n    private FragmentThirdBinding binding;\n\n    private ActivityResultLauncher&lt;String&gt; galleryLauncher;\n\n    @Override\n    public View onCreateView(\n            @NonNull LayoutInflater inflater, ViewGroup container,\n            Bundle savedInstanceState\n    ) {\n\n        binding = FragmentThirdBinding.inflate(inflater, container, false);\n        return binding.getRoot();\n\n    }\n\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        try {\n            Gson gson = new Gson();\n\n                if (gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class) != null) {\n                    Image myImage = gson.fromJson(requireArguments().getString(&quot;IMAGE&quot;), Image.class);\n                    Log.d(&quot;test&quot;, myImage.getImageName());\n                    Log.d(&quot;test&quot;, myImage.getId());\n                    Log.d(&quot;test&quot;, myImage.getPhoto().toString());\n                }\n\n        }\n        catch (Exception e){\n            Log.d(&quot;test&quot;, &quot;image still null&quot;);\n        }\n\n        binding.returnToEditText.setOnClickListener(view1 -&gt; NavHostFragment.findNavController(ThirdFragment.this)\n                .navigate(R.id.action_ThirdFragment_to_SecondFragment));\n\n        Button photoPickerButton = view.findViewById(R.id.photo_picker_button);\n        galleryLauncher = registerForActivityResult(new ActivityResultContracts.GetContent(),\n                result -&gt; {\n                    if(result!= null){\n\n                        //package image uri\n                        Bundle bundle = new Bundle();\n                        bundle.putString(&quot;imageURI&quot;, result.toString());\n\n                        //navigate to image display and set title with parceled uri\n                        NavController navController = Navigation.findNavController(view);\n                        navController.navigate(R.id.pickedImageFragment, bundle);\n                    }\n                    else{\n                        Toast.makeText(getContext(), &quot;Please select an image!&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                });\n\n        photoPickerButton.setOnClickListener(view12 -&gt; galleryLauncher.launch(&quot;image/*&quot;));\n\n        binding.submitForm.setOnClickListener(view1 -&gt; {\n            Intent goToMainActivity = new Intent(getContext(), MainActivity.class);\n            this.startActivity(goToMainActivity);\n            Toast.makeText(this.getContext(),&quot;Article submitted successfully!&quot;,Toast.LENGTH_SHORT).show();\n\n        });\n    }\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n\n\n}\n</code></pre>\n<p>fragment2:</p>\n<pre><code>package com.example.briefingaboutitapp;\n\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.Fragment;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\n\nimport com.example.briefingaboutitapp.databinding.FragmentPickedImageBinding;\nimport com.google.gson.Gson;\n\nimport java.util.UUID;\n\nimport Entities.Image;\n\npublic class PickedImageFragment extends Fragment {\n    private FragmentPickedImageBinding binding;\n    private Uri imageUri;\n\n    @Override\n    public View onCreateView(\n            @NonNull LayoutInflater inflater, ViewGroup container,\n            Bundle savedInstanceState\n    ) {\n\n        binding = FragmentPickedImageBinding.inflate(inflater, container, false);\n        return binding.getRoot();\n\n\n    }\n\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        this.imageUri = Uri.parse(requireArguments().getString(&quot;imageURI&quot;));\n\n        //get passed image\n        ImageView imageView = view.findViewById(R.id.image_view);\n        imageView.setImageURI(this.imageUri);\n\n\n        binding.submitMyPhotoButton.setOnClickListener(view1 -&gt; {\n            if(binding.photoDescription.getText().toString().trim().equals(&quot;&quot;)){\n                Toast.makeText(getContext(), &quot;Pick title/description for photo!&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else{\n                //create the gotten image class\n                String photoName = binding.photoDescription.getText().toString().trim();\n                String imageID = UUID.randomUUID().toString();\n                Image myImage = new Image(imageID, photoName, imageUri);\n\n                //bundle it\n                Gson gson = new Gson();\n                Bundle bundle = new Bundle();\n                bundle.putString(&quot;IMAGE&quot;, gson.toJson(myImage));\n\n                //send the bundled image on it's way\n                NavController navController = Navigation.findNavController(view);\n                navController.navigate(R.id.ThirdFragment, bundle);\n            }\n        });\n    }\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n}\n</code></pre>\n<p>Image class</p>\n<pre><code>package Entities;\n\nimport android.net.Uri;\n\nimport java.io.Serializable;\n\npublic class Image implements Serializable{\n    private final String id;\n    private final Uri photo;\n    private final String imageName;\n\n    public Image(String id, String imageName, Uri photo) {\n        this.id = id;\n        this.imageName = imageName;\n        this.photo = photo;\n    }\n\n    public Uri getPhoto() {\n        return photo;\n    }\n\n    public String getImageName() {\n        return imageName;\n    }\n\n    public String getId() {\n        return id;\n    }\n}\n</code></pre>\n"},{"tags":["java","sorting","collections"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1355269189,"post_id":13830309,"comment_id":19034215,"body_markdown":"You don&#39;t have two threads; there&#39;s no concurrency (which is *really* what that exception was meant to guard). Even then ... *Note that the fail-fast behavior of an iterator cannot be guaranteed as it is, generally speaking, impossible to make any hard guarantees in the presence of unsynchronized concurrent modification. Fail-fast iterators throw ConcurrentModificationException on a best-effort basis. Therefore, it would be wrong to write a program that depended on this exception for its correctness: the fail-fast behavior of iterators should be used only to detect bugs.*","body":"You don&#39;t have two threads; there&#39;s no concurrency (which is <i>really</i> what that exception was meant to guard). Even then ... <i>Note that the fail-fast behavior of an iterator cannot be guaranteed as it is, generally speaking, impossible to make any hard guarantees in the presence of unsynchronized concurrent modification. Fail-fast iterators throw ConcurrentModificationException on a best-effort basis. Therefore, it would be wrong to write a program that depended on this exception for its correctness: the fail-fast behavior of iterators should be used only to detect bugs.</i>"},{"owner":{"account_id":951828,"reputation":2087,"user_id":977804,"accept_rate":80,"display_name":"Daniel"},"score":0,"creation_date":1355270098,"post_id":13830309,"comment_id":19034453,"body_markdown":"well you do get that Exception if you add an element to the list (in the same thread). It does not make sense to me why one would adding elements to the list an illegal operation, but chaning the list is not...","body":"well you do get that Exception if you add an element to the list (in the same thread). It does not make sense to me why one would adding elements to the list an illegal operation, but chaning the list is not..."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":0,"creation_date":1355270957,"post_id":13830309,"comment_id":19034683,"body_markdown":"Because it isn&#39;t *structurally modifying* the `List`, the nodes that make up the list are all still there and they haven&#39;t even changed order. Your iterator isn&#39;t affected by a value(s) contained in the nodes changing. In short, it&#39;s  really not meant to protect you from yourself.","body":"Because it isn&#39;t <i>structurally modifying</i> the <code>List</code>, the nodes that make up the list are all still there and they haven&#39;t even changed order. Your iterator isn&#39;t affected by a value(s) contained in the nodes changing. In short, it&#39;s  really not meant to protect you from yourself."},{"owner":{"account_id":7059566,"reputation":303,"user_id":5405434,"display_name":"Philippe Cloutier"},"score":0,"creation_date":1679436342,"post_id":13830309,"comment_id":133721670,"body_markdown":"The behavior you describe is implementation-specific. You should indicate the JRE you were using (probably Java 6).","body":"The behavior you describe is implementation-specific. You should indicate the JRE you were using (probably Java 6)."}],"answers":[{"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1355269915,"post_id":13830344,"comment_id":19034404,"body_markdown":"+1 - you can also point to the docs for `Collections.sort()` that state *This implementation dumps the specified list into an array, sorts the array, and iterates over the list resetting each element from the corresponding position in the array*","body":"+1 - you can also point to the docs for <code>Collections.sort()</code> that state <i>This implementation dumps the specified list into an array, sorts the array, and iterates over the list resetting each element from the corresponding position in the array</i>"},{"owner":{"account_id":951828,"reputation":2087,"user_id":977804,"accept_rate":80,"display_name":"Daniel"},"score":0,"creation_date":1355270176,"post_id":13830344,"comment_id":19034479,"body_markdown":"I know. I checked that code too. Still I find that there SHOULD be such a flag being set in `sort()`.","body":"I know. I checked that code too. Still I find that there SHOULD be such a flag being set in <code>sort()</code>."},{"owner":{"account_id":951828,"reputation":2087,"user_id":977804,"accept_rate":80,"display_name":"Daniel"},"score":0,"creation_date":1355272028,"post_id":13830344,"comment_id":19034935,"body_markdown":"fair point. so it the famous &quot;it&#39;s a feature, not a bug&quot;. One way to solve it... :-) Still I don&#39;t really see how adding is considered a structural change while mixing up its contents is not.","body":"fair point. so it the famous &quot;it&#39;s a feature, not a bug&quot;. One way to solve it... :-) Still I don&#39;t really see how adding is considered a structural change while mixing up its contents is not."},{"owner":{"account_id":1025295,"reputation":46067,"user_id":1034737,"accept_rate":80,"display_name":"PermGenError"},"score":0,"creation_date":1355272499,"post_id":13830344,"comment_id":19035044,"body_markdown":"@Daniel check here in the arraylist source for what **Structurally modified** means in the code prespective. http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java","body":"@Daniel check here in the arraylist source for what <b>Structurally modified</b> means in the code prespective. <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java\" rel=\"nofollow noreferrer\">grepcode.com/file/repository.grepcode.com/java/root/jdk/open&zwnj;&#8203;jdk/&hellip;</a>"}],"tags":[],"owner":{"account_id":1025295,"reputation":46067,"user_id":1034737,"accept_rate":80,"display_name":"PermGenError"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1679439190,"creation_date":1355269027,"answer_id":13830344,"question_id":13830309,"body_markdown":"**Update: This answer was written for Java 6. With [JDK 8u20&#39;s Collection.sort now deferring to List.sort][1], Java 8+ now *does* throw an exception, although as pointed out by Brian Roach, it still doesn&#39;t provide any guarantee to that effect.**\r\n\r\nWhy would it throw `ConcurrentModificationException` when you are not adding/removing elements from your collection while iterating?\r\n\r\nNote that `ConcurrentModificationException` would only occur when a new element is added in to your collection or remove from your collection while iterating. i.e., when your Collection is Structurally modified.\r\n\r\n&gt; (Structural modifications are those that change the size of this list,\r\n&gt; or otherwise perturb it in such a fashion that iterations in progress\r\n&gt; may yield incorrect results.)\r\n\r\nsort wouldn&#39;t structurally modify your Collection, all it does is modify the order.\r\nBelow code would throw `ConcurrentModificationException` as it add&#39;s an extra element into the collection while iterating.\r\n\r\n    for(Integer num : my_list) {\r\n        my_list.add(12);\r\n        }\r\n\r\nIf you look at the source of the `sort` method in the [Collections][2] class, it&#39;s not throwing `ConcurrentModificationException`.\r\n\r\n&gt; This implementation dumps the specified list into an array, sorts the\r\n&gt; array, and iterates over the list resetting each element from the\r\n&gt; corresponding position in the array. This avoids the n2 log(n)\r\n&gt; performance that would result from attempting to sort a linked list in\r\n&gt; place.\r\n\r\n    public static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list) {\r\n            Object[] a = list.toArray();\r\n            Arrays.sort(a);\r\n            ListIterator&lt;T&gt; i = list.listIterator();\r\n            for (int j=0; j&lt;a.length; j++) {\r\n                i.next();\r\n                i.set((T)a[j]);\r\n            }\r\n        }\r\n\r\nExtract from the book [java Generics and Collections][3]:\r\n----------------------------------------------------\r\n\r\n \r\n\r\n&gt; The policy of the iterators for the Java 2 collections is to fail\r\n&gt; fast, as described in Section 11.1: every time they access the backing\r\n&gt; collection, they check it for structural modification (which, in\r\n&gt; general, means that elements have been added or removed from the\r\n&gt; collection). If they detect structural modification, they fail\r\n&gt; immediately, throwing ConcurrentModificationException rather than\r\n&gt; continuing to attempt to iterate over the modified collection with\r\n&gt; unpredictable results.\r\n\r\n\r\n  [1]: https://medium.com/@edouard.kaiser/collections-sort-the-java8u20-modification-d6a9acf96861\r\n  [2]: https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/Collections.java#L153\r\n  [3]: http://shop.oreilly.com/product/9780596527754.do","title":"Java Collections.sort() missing ConcurrentModificationException","body":"<p><strong>Update: This answer was written for Java 6. With <a href=\"https://medium.com/@edouard.kaiser/collections-sort-the-java8u20-modification-d6a9acf96861\" rel=\"nofollow noreferrer\">JDK 8u20's Collection.sort now deferring to List.sort</a>, Java 8+ now <em>does</em> throw an exception, although as pointed out by Brian Roach, it still doesn't provide any guarantee to that effect.</strong></p>\n<p>Why would it throw <code>ConcurrentModificationException</code> when you are not adding/removing elements from your collection while iterating?</p>\n<p>Note that <code>ConcurrentModificationException</code> would only occur when a new element is added in to your collection or remove from your collection while iterating. i.e., when your Collection is Structurally modified.</p>\n<blockquote>\n<p>(Structural modifications are those that change the size of this list,\nor otherwise perturb it in such a fashion that iterations in progress\nmay yield incorrect results.)</p>\n</blockquote>\n<p>sort wouldn't structurally modify your Collection, all it does is modify the order.\nBelow code would throw <code>ConcurrentModificationException</code> as it add's an extra element into the collection while iterating.</p>\n<pre><code>for(Integer num : my_list) {\n    my_list.add(12);\n    }\n</code></pre>\n<p>If you look at the source of the <code>sort</code> method in the <a href=\"https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/Collections.java#L153\" rel=\"nofollow noreferrer\">Collections</a> class, it's not throwing <code>ConcurrentModificationException</code>.</p>\n<blockquote>\n<p>This implementation dumps the specified list into an array, sorts the\narray, and iterates over the list resetting each element from the\ncorresponding position in the array. This avoids the n2 log(n)\nperformance that would result from attempting to sort a linked list in\nplace.</p>\n</blockquote>\n<pre><code>public static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list) {\n        Object[] a = list.toArray();\n        Arrays.sort(a);\n        ListIterator&lt;T&gt; i = list.listIterator();\n        for (int j=0; j&lt;a.length; j++) {\n            i.next();\n            i.set((T)a[j]);\n        }\n    }\n</code></pre>\n<h2>Extract from the book <a href=\"http://shop.oreilly.com/product/9780596527754.do\" rel=\"nofollow noreferrer\">java Generics and Collections</a>:</h2>\n<blockquote>\n<p>The policy of the iterators for the Java 2 collections is to fail\nfast, as described in Section 11.1: every time they access the backing\ncollection, they check it for structural modification (which, in\ngeneral, means that elements have been added or removed from the\ncollection). If they detect structural modification, they fail\nimmediately, throwing ConcurrentModificationException rather than\ncontinuing to attempt to iterate over the modified collection with\nunpredictable results.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9943,"reputation":28532,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1355271875,"creation_date":1355271016,"answer_id":13830695,"question_id":13830309,"body_markdown":"Speaking of functionality I don&#39;t see why it should not throw `ConcurrentModificationException`. But according to documentation the iterator throws the exception when it notices structural modification and structural modification is [defined][1] as:\r\n\r\n&gt; Structural modifications are those that change the size of the list,\r\n&gt; or otherwise perturb it in such a fashion that iterations in progress\r\n&gt; may yield incorrect results.\r\n\r\nI think there is an argument for claiming that `sort` rearranging the elements causes the iterator to yield wrong results, but I haven&#39;t checked what are right results for iterator defined to be.\r\n\r\nSpeaking of implementation, it is easy to see why it does not: See the source for [ArrayList] [2] and [Collections][3]:\r\n\r\n- `ArrayList.modCount` changes with the so called structural modifications\r\n- `ListItr` methods make a copy of its value in `init` and check that it hasn&#39;t changed in its methods\r\n- `Collections.sort` calls `ListItr.set` which calls `ArratList.set`. This last method does not increment `modCount`\r\n\r\nSo `ListItr.next()` sees the same `modCount` and no exception is thrown. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html#modCount\r\n  [2]: http://www.docjar.com/html/api/java/util/ArrayList.java.html\r\n  [3]: http://www.docjar.com/html/api/java/util/Collections.java.html","title":"Java Collections.sort() missing ConcurrentModificationException","body":"<p>Speaking of functionality I don't see why it should not throw <code>ConcurrentModificationException</code>. But according to documentation the iterator throws the exception when it notices structural modification and structural modification is <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html#modCount\" rel=\"nofollow\">defined</a> as:</p>\n\n<blockquote>\n  <p>Structural modifications are those that change the size of the list,\n  or otherwise perturb it in such a fashion that iterations in progress\n  may yield incorrect results.</p>\n</blockquote>\n\n<p>I think there is an argument for claiming that <code>sort</code> rearranging the elements causes the iterator to yield wrong results, but I haven't checked what are right results for iterator defined to be.</p>\n\n<p>Speaking of implementation, it is easy to see why it does not: See the source for <a href=\"http://www.docjar.com/html/api/java/util/ArrayList.java.html\" rel=\"nofollow\">ArrayList</a> and <a href=\"http://www.docjar.com/html/api/java/util/Collections.java.html\" rel=\"nofollow\">Collections</a>:</p>\n\n<ul>\n<li><code>ArrayList.modCount</code> changes with the so called structural modifications</li>\n<li><code>ListItr</code> methods make a copy of its value in <code>init</code> and check that it hasn't changed in its methods</li>\n<li><code>Collections.sort</code> calls <code>ListItr.set</code> which calls <code>ArratList.set</code>. This last method does not increment <code>modCount</code></li>\n</ul>\n\n<p>So <code>ListItr.next()</code> sees the same <code>modCount</code> and no exception is thrown. </p>\n"},{"tags":[],"owner":{"account_id":5182587,"reputation":8980,"user_id":4147849,"accept_rate":50,"display_name":"Muntashir Akon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595236772,"creation_date":1595236772,"answer_id":62992301,"question_id":13830309,"body_markdown":"For Android, it depends on API versions. From API 26, `Collections#sort(List&lt;T&gt;, Comparator&lt;? super T&gt;)` actually calls `List#sort(Comparator&lt;? super E&gt;)`. So, if you sort `ArrayList`, you can get **ConcurrentModificationException** depending on whether you&#39;ve modified the list in another thread. Here&#39;s the source code from `java/util/ArrayList.java` that throws the exception:\r\n\r\n\r\n    public void sort(Comparator&lt;? super E&gt; c) {\r\n        final int expectedModCount = modCount;\r\n        Arrays.sort((E[]) elementData, 0, size, c);\r\n        if (modCount != expectedModCount) {\r\n            throw new ConcurrentModificationException();\r\n        }\r\n        modCount++;\r\n    }\r\n","title":"Java Collections.sort() missing ConcurrentModificationException","body":"<p>For Android, it depends on API versions. From API 26, <code>Collections#sort(List&lt;T&gt;, Comparator&lt;? super T&gt;)</code> actually calls <code>List#sort(Comparator&lt;? super E&gt;)</code>. So, if you sort <code>ArrayList</code>, you can get <strong>ConcurrentModificationException</strong> depending on whether you've modified the list in another thread. Here's the source code from <code>java/util/ArrayList.java</code> that throws the exception:</p>\n<pre><code>public void sort(Comparator&lt;? super E&gt; c) {\n    final int expectedModCount = modCount;\n    Arrays.sort((E[]) elementData, 0, size, c);\n    if (modCount != expectedModCount) {\n        throw new ConcurrentModificationException();\n    }\n    modCount++;\n}\n</code></pre>\n"}],"owner":{"account_id":951828,"reputation":2087,"user_id":977804,"accept_rate":80,"display_name":"Daniel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4672,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":13830344,"answer_count":3,"score":7,"last_activity_date":1679439190,"creation_date":1355268860,"question_id":13830309,"body_markdown":"I stumbled over this odd bug. Seems like `Collections.sort()` does not modify the sorted list in a way that enables a detection of concurrent modifications when also iterating over the same list. Example code:\r\n\r\n\t\tList&lt;Integer&gt; my_list = new ArrayList&lt;Integer&gt;();\r\n\r\n\t\tmy_list.add(2);\r\n\t\tmy_list.add(1);\r\n\r\n\t\tfor (Integer num : my_list) {\r\n\r\n\t\t\t/*\r\n\t\t\t * print list\r\n\t\t\t */\r\n\t\t\tStringBuilder sb = new StringBuilder();\r\n\t\t\tfor (Integer i : my_list)\r\n\t\t\t\tsb.append(i).append(&quot;,&quot;);\r\n\t\t\tSystem.out.println(&quot;List: &quot; + sb.toString());\r\n\r\n\t\t\t/*\r\n\t\t\t * sort list\r\n\t\t\t */\r\n\t\t\tSystem.out.println(&quot;CurrentElement: &quot; + num);\r\n\t\t\tCollections.sort(my_list);\r\n\t\t}\r\n\r\n\r\noutputs\r\n\r\n    List: 2,1,\r\n    CurrentElement: 2\r\n    List: 1,2,\r\n    CurrentElement: 2\r\n\r\nOne would expect a `ConcurrentModificationException`, but it is not being raised and the code works although it shouldn&#39;t.\r\n","title":"Java Collections.sort() missing ConcurrentModificationException","body":"<p>I stumbled over this odd bug. Seems like <code>Collections.sort()</code> does not modify the sorted list in a way that enables a detection of concurrent modifications when also iterating over the same list. Example code:</p>\n\n<pre><code>    List&lt;Integer&gt; my_list = new ArrayList&lt;Integer&gt;();\n\n    my_list.add(2);\n    my_list.add(1);\n\n    for (Integer num : my_list) {\n\n        /*\n         * print list\n         */\n        StringBuilder sb = new StringBuilder();\n        for (Integer i : my_list)\n            sb.append(i).append(\",\");\n        System.out.println(\"List: \" + sb.toString());\n\n        /*\n         * sort list\n         */\n        System.out.println(\"CurrentElement: \" + num);\n        Collections.sort(my_list);\n    }\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>List: 2,1,\nCurrentElement: 2\nList: 1,2,\nCurrentElement: 2\n</code></pre>\n\n<p>One would expect a <code>ConcurrentModificationException</code>, but it is not being raised and the code works although it shouldn't.</p>\n"},{"tags":["java","awaitility"],"answers":[{"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679440333,"post_id":75807022,"comment_id":133722383,"body_markdown":"Using `atMost`, I think the condition would need to change to `() -&gt; timer.count() == 1`.","body":"Using <code>atMost</code>, I think the condition would need to change to <code>() -&gt; timer.count() == 1</code>."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1679440608,"post_id":75807022,"comment_id":133722411,"body_markdown":"It’s not clear to me what the OP is trying to test, but I think they just want a sleep!","body":"It’s not clear to me what the OP is trying to test, but I think they just want a sleep!"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679441373,"post_id":75807022,"comment_id":133722523,"body_markdown":"I think they can save themselves 392ms :-)","body":"I think they can save themselves 392ms :-)"},{"owner":{"account_id":3383678,"reputation":4957,"user_id":2840178,"accept_rate":88,"display_name":"kar"},"score":0,"creation_date":1679482651,"post_id":75807022,"comment_id":133728799,"body_markdown":"I am looking to simply insert a 500ms pause, but using Awaitility.","body":"I am looking to simply insert a 500ms pause, but using Awaitility."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1679486224,"post_id":75807022,"comment_id":133729722,"body_markdown":"What’s wrong with `Thread.sleep`?","body":"What’s wrong with <code>Thread.sleep</code>?"}],"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679438990,"creation_date":1679438990,"answer_id":75807022,"question_id":75806721,"body_markdown":"This is a misunderstanding of the API.\r\n\r\nThe [documentation for `atLeast`](https://github.com/awaitility/awaitility/wiki/Usage#at-least) says:\r\n\r\n&gt; In case the condition is fulfilled before the duration specified by `atLeast` an exception is thrown indicating that the condition shouldn&#39;t be completed earlier than the specified duration.\r\n\r\nIn other words, this test asserts that the condition shouldn&#39;t return `true` before 500 milliseconds have passed — that it should take _more than_ half a second to run — but the condition returns `true` immediately.\r\n\r\nIf you&#39;re trying to assert that the condition returns true in _less than_ 500 milliseconds (the much more common case) you want to use `atMost` instead of `atLeast`.\r\n\r\nIf you&#39;re simply trying to insert a 500ms pause, `Thread.sleep` is a perfectly fine way to do it.","title":"Not waiting the minimum stipulated wait time","body":"<p>This is a misunderstanding of the API.</p>\n<p>The <a href=\"https://github.com/awaitility/awaitility/wiki/Usage#at-least\" rel=\"nofollow noreferrer\">documentation for <code>atLeast</code></a> says:</p>\n<blockquote>\n<p>In case the condition is fulfilled before the duration specified by <code>atLeast</code> an exception is thrown indicating that the condition shouldn't be completed earlier than the specified duration.</p>\n</blockquote>\n<p>In other words, this test asserts that the condition shouldn't return <code>true</code> before 500 milliseconds have passed — that it should take <em>more than</em> half a second to run — but the condition returns <code>true</code> immediately.</p>\n<p>If you're trying to assert that the condition returns true in <em>less than</em> 500 milliseconds (the much more common case) you want to use <code>atMost</code> instead of <code>atLeast</code>.</p>\n<p>If you're simply trying to insert a 500ms pause, <code>Thread.sleep</code> is a perfectly fine way to do it.</p>\n"}],"owner":{"account_id":3383678,"reputation":4957,"user_id":2840178,"accept_rate":88,"display_name":"kar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679438990,"creation_date":1679436221,"question_id":75806721,"body_markdown":"The following test works when I use `Thread.sleep()`.\r\n\r\n      @Test\r\n      public void closeableTimer() throws InterruptedException {\r\n        Timer timer = new DefaultTimer(TimeUnit.NANOSECONDS);\r\n        Assertions.assertThat(timer.count()).isEqualTo(0);\r\n        Assertions.assertThat(timer.totalDuration()).isEqualTo(Duration.ZERO);\r\n        try (Timer.Timed sample = timer.start()) {\r\n          Thread.sleep(500L);\r\n        }\r\n        Assertions.assertThat(timer.count()).isEqualTo(1);\r\n        Assertions.assertThat(timer.totalDuration()).isGreaterThan(Duration.ZERO);\r\n      } \r\n\r\nBut if I use `Awaitility` instead for same test, it throws following error. Why? The code using `Awaitility` is using `atLeast(500 ms)`.\r\n\r\n&gt;   Condition was evaluated in 108 milliseconds which is earlier than\r\n&gt; expected minimum timeout 500 milliseconds   \r\n&gt; org.awaitility.core.ConditionTimeoutException\r\n\r\n      @Test\r\n      public void closeableTimer() {\r\n        Timer timer = new DefaultTimer(TimeUnit.NANOSECONDS);\r\n        Assertions.assertThat(timer.count()).isEqualTo(0);\r\n        Assertions.assertThat(timer.totalDuration()).isEqualTo(Duration.ZERO);\r\n        try (Timer.Timed ignored = timer.start()) {\r\n          await().atLeast(Duration.ofMillis(500L)).until(() -&gt; true);\r\n        }\r\n        Assertions.assertThat(timer.count()).isEqualTo(1);\r\n        Assertions.assertThat(timer.totalDuration()).isGreaterThan(Duration.ZERO);\r\n      }","title":"Not waiting the minimum stipulated wait time","body":"<p>The following test works when I use <code>Thread.sleep()</code>.</p>\n<pre><code>  @Test\n  public void closeableTimer() throws InterruptedException {\n    Timer timer = new DefaultTimer(TimeUnit.NANOSECONDS);\n    Assertions.assertThat(timer.count()).isEqualTo(0);\n    Assertions.assertThat(timer.totalDuration()).isEqualTo(Duration.ZERO);\n    try (Timer.Timed sample = timer.start()) {\n      Thread.sleep(500L);\n    }\n    Assertions.assertThat(timer.count()).isEqualTo(1);\n    Assertions.assertThat(timer.totalDuration()).isGreaterThan(Duration.ZERO);\n  } \n</code></pre>\n<p>But if I use <code>Awaitility</code> instead for same test, it throws following error. Why? The code using <code>Awaitility</code> is using <code>atLeast(500 ms)</code>.</p>\n<blockquote>\n<p>Condition was evaluated in 108 milliseconds which is earlier than\nexpected minimum timeout 500 milliseconds<br />\norg.awaitility.core.ConditionTimeoutException</p>\n</blockquote>\n<pre><code>  @Test\n  public void closeableTimer() {\n    Timer timer = new DefaultTimer(TimeUnit.NANOSECONDS);\n    Assertions.assertThat(timer.count()).isEqualTo(0);\n    Assertions.assertThat(timer.totalDuration()).isEqualTo(Duration.ZERO);\n    try (Timer.Timed ignored = timer.start()) {\n      await().atLeast(Duration.ofMillis(500L)).until(() -&gt; true);\n    }\n    Assertions.assertThat(timer.count()).isEqualTo(1);\n    Assertions.assertThat(timer.totalDuration()).isGreaterThan(Duration.ZERO);\n  }\n</code></pre>\n"},{"tags":["java","chronicle-queue"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679438856,"creation_date":1679438856,"answer_id":75807009,"question_id":73931234,"body_markdown":"1. In simple cases, using a Chronicle Map is fine.\r\n\r\n2. You can periodically look at the last modified date or read the date in the file name to check if a file can be deleted. The listener is more useful if you want to act as soon as possible.\r\n\r\n3. You can remove excerpts from a file by copying the excerpts you want to keep and replacing the original file. You can remove write or read access from the file. \r\nIt is probably simpler to wait until you can delete it.","title":"Queries for chronical queues when used as audit log","body":"<ol>\n<li><p>In simple cases, using a Chronicle Map is fine.</p>\n</li>\n<li><p>You can periodically look at the last modified date or read the date in the file name to check if a file can be deleted. The listener is more useful if you want to act as soon as possible.</p>\n</li>\n<li><p>You can remove excerpts from a file by copying the excerpts you want to keep and replacing the original file. You can remove write or read access from the file.\nIt is probably simpler to wait until you can delete it.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":9563776,"reputation":145,"user_id":7103688,"accept_rate":17,"display_name":"RGoyal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679438856,"creation_date":1664772945,"question_id":73931234,"body_markdown":"I am evaluating option of using chronicle-queues for storing the audit events and  relaying events.\r\n\r\nApplication should have functionality to replay data from any random point with in a given file, and read relevant data and close he trailer itself.\r\n\r\nApplication can have multiple trailers at any given time depending on criteria.\r\n\r\n\r\n1) While writing the data to appender, we get index using \r\n\r\n       try (DocumentContext dc = appender.writingDocument()) {\r\n\r\n                    dc.wire().write(&quot;hello&quot;).text(&quot;world &quot; + (i++));\r\n\r\n                    long indexWritten = dc.index();\r\n\r\n                    System.out.println(&quot;indexWritten = &quot; + indexWritten);\r\n\r\n       }\r\n\r\n   I can store these indices in chronical map or some shared storage.\r\nIs there any better way to retrieve index for any data ?\r\n\r\n2) I wanted to delete files after certain duration, and we can use StoreListener or FileStore for calculating the file.\r\nCan someone please provide concrete example for the same or is there any better approach that can be used ?\r\n\r\n3) Instead of removing full file, is there any way to remove some data from file or mark it as unreadable \r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Queries for chronical queues when used as audit log","body":"<p>I am evaluating option of using chronicle-queues for storing the audit events and  relaying events.</p>\n<p>Application should have functionality to replay data from any random point with in a given file, and read relevant data and close he trailer itself.</p>\n<p>Application can have multiple trailers at any given time depending on criteria.</p>\n<ol>\n<li><p>While writing the data to appender, we get index using</p>\n<pre><code>try (DocumentContext dc = appender.writingDocument()) {\n\n             dc.wire().write(&quot;hello&quot;).text(&quot;world &quot; + (i++));\n\n             long indexWritten = dc.index();\n\n             System.out.println(&quot;indexWritten = &quot; + indexWritten);\n\n}\n</code></pre>\n<p>I can store these indices in chronical map or some shared storage.\nIs there any better way to retrieve index for any data ?</p>\n</li>\n<li><p>I wanted to delete files after certain duration, and we can use StoreListener or FileStore for calculating the file.\nCan someone please provide concrete example for the same or is there any better approach that can be used ?</p>\n</li>\n<li><p>Instead of removing full file, is there any way to remove some data from file or mark it as unreadable</p>\n</li>\n</ol>\n"},{"tags":["java","ssl","handshake","jsse","socketchannel"],"comments":[{"owner":{"account_id":2270349,"reputation":1219,"user_id":1997949,"accept_rate":83,"display_name":"Michael"},"score":0,"creation_date":1679590504,"post_id":75806996,"comment_id":133752712,"body_markdown":"Can you explain about why are you trying to implement this?","body":"Can you explain about why are you trying to implement this?"}],"owner":{"account_id":26169178,"reputation":21,"user_id":21033616,"display_name":"Theodore"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679438756,"creation_date":1679438756,"question_id":75806996,"body_markdown":"I&#39;m struggling to understand how to establish secure communication (the handshake) between a client and server using the JSSE library. \r\n\r\nI&#39;ve read the documentation and have understood the first few parts partially:\r\n\r\n1) create an SSLContext - understood\r\n\r\n2) use the SSLContext to construct an SSLEngine - also understood\r\n\r\n3) using the SSLEngine, begin handshake - this is where I am having problems.\r\n\r\nNow I understand that there are two variables whose cases we have to go through in order to go through the steps of the handshake (the SSLEngineResult.Status, and the SSLEngineResult.HandshakeStatus.)\r\n\r\nI understand how to handle the cases for SSLEngineResult.Status but I am having a hard time understanding how to handle the various cases for the Handshake status. \r\n\r\nFor example, when the handshake status case is NEED_WRAP, I understand that some data needs to be wrapped and sent over to the peer, however, what I am struggling to understand is what data needs to be wrapped to be sent over to the peer. \r\n\r\nHere is the code example that the documentation provides, \r\n\r\n```\r\ncase NEED_WRAP :\r\n// Empty the local network packet buffer.\r\nmyNetData.clear();\r\n\r\n// Generate handshaking data\r\nres = engine.wrap(myAppData, myNetData);\r\nhs = res.getHandshakeStatus();\r\n\r\n// Check status\r\nswitch (res.getStatus()) {\r\ncase OK :\r\nmyNetData.flip();\r\n\r\n// Send the handshaking data to peer\r\nwhile (myNetData.hasRemaining()) {\r\nsocketChannel.write(myNetData);\r\n}\r\nbreak;\r\n\r\n// Handle other status:  BUFFER_OVERFLOW, BUFFER_UNDERFLOW, CLOSED\r\n...\r\n}\r\nbreak;\r\n```\r\n\r\nMy question is, for the commented line &quot;//Generate handshaking data&quot; what data do I have to provide so that the handshake may continue?\r\n\r\nThe line engine.wrap(myAppData, myNetData); is essentially doing nothing in this particular snippet of code assuming the myAppData ByteBuffer is empty (which it is), so what do I need to populate the myAppData ByteBuffer with in order for the handshake to continue? \r\n\r\nMy intuition is telling me that running this code without having any data passed into the myAppData ByteBuffer will result in the handshake never completing. Is it possible that I don&#39;t need to pass any data at all and that the handshaking data is automatically passed even with an empty Byteb\\Buffer being used in the wrap method as a source? \r\n\r\n\r\n","title":"How to properly handshake in java using nonblocking socketchannels from the JSSE library?","body":"<p>I'm struggling to understand how to establish secure communication (the handshake) between a client and server using the JSSE library.</p>\n<p>I've read the documentation and have understood the first few parts partially:</p>\n<ol>\n<li><p>create an SSLContext - understood</p>\n</li>\n<li><p>use the SSLContext to construct an SSLEngine - also understood</p>\n</li>\n<li><p>using the SSLEngine, begin handshake - this is where I am having problems.</p>\n</li>\n</ol>\n<p>Now I understand that there are two variables whose cases we have to go through in order to go through the steps of the handshake (the SSLEngineResult.Status, and the SSLEngineResult.HandshakeStatus.)</p>\n<p>I understand how to handle the cases for SSLEngineResult.Status but I am having a hard time understanding how to handle the various cases for the Handshake status.</p>\n<p>For example, when the handshake status case is NEED_WRAP, I understand that some data needs to be wrapped and sent over to the peer, however, what I am struggling to understand is what data needs to be wrapped to be sent over to the peer.</p>\n<p>Here is the code example that the documentation provides,</p>\n<pre><code>case NEED_WRAP :\n// Empty the local network packet buffer.\nmyNetData.clear();\n\n// Generate handshaking data\nres = engine.wrap(myAppData, myNetData);\nhs = res.getHandshakeStatus();\n\n// Check status\nswitch (res.getStatus()) {\ncase OK :\nmyNetData.flip();\n\n// Send the handshaking data to peer\nwhile (myNetData.hasRemaining()) {\nsocketChannel.write(myNetData);\n}\nbreak;\n\n// Handle other status:  BUFFER_OVERFLOW, BUFFER_UNDERFLOW, CLOSED\n...\n}\nbreak;\n</code></pre>\n<p>My question is, for the commented line &quot;//Generate handshaking data&quot; what data do I have to provide so that the handshake may continue?</p>\n<p>The line engine.wrap(myAppData, myNetData); is essentially doing nothing in this particular snippet of code assuming the myAppData ByteBuffer is empty (which it is), so what do I need to populate the myAppData ByteBuffer with in order for the handshake to continue?</p>\n<p>My intuition is telling me that running this code without having any data passed into the myAppData ByteBuffer will result in the handshake never completing. Is it possible that I don't need to pass any data at all and that the handshaking data is automatically passed even with an empty Byteb\\Buffer being used in the wrap method as a source?</p>\n"},{"tags":["java","android","kotlin","button","modifier"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1679422211,"post_id":75804900,"comment_id":133718506,"body_markdown":"Can you post the exact error message you&#39;re getting and where?","body":"Can you post the exact error message you&#39;re getting and where?"},{"owner":{"account_id":28077146,"reputation":21,"user_id":21448802,"display_name":"Rinat"},"score":0,"creation_date":1679422336,"post_id":75804900,"comment_id":133718537,"body_markdown":"None of the following functions can be called with the arguments supplied.\nModifier.weight(Float, Boolean = ...) defined in androidx.compose.foundation.layout.ColumnScopeInstance\nModifier.weight(Float, Boolean = ...) defined in androidx.compose.foundation.layout.RowScopeInstance","body":"None of the following functions can be called with the arguments supplied. Modifier.weight(Float, Boolean = ...) defined in androidx.compose.foundation.layout.ColumnScopeInstance Modifier.weight(Float, Boolean = ...) defined in androidx.compose.foundation.layout.RowScopeInstance"},{"owner":{"account_id":28077146,"reputation":21,"user_id":21448802,"display_name":"Rinat"},"score":0,"creation_date":1679422515,"post_id":75804900,"comment_id":133718587,"body_markdown":"This error occurs in the ButtonMain() method. with the weight modifier","body":"This error occurs in the ButtonMain() method. with the weight modifier"}],"answers":[{"tags":[],"owner":{"account_id":17897467,"reputation":389,"user_id":13002482,"display_name":"Serge"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679437803,"creation_date":1679437803,"answer_id":75806902,"question_id":75804900,"body_markdown":"The weight modifier you&#39;re using in ButtonMain is only available in ColumnScope or RowScope. What you need to do is pass the scope to ButtonMain. You can do that easily by making it an extension function of the ColumnScope, like so:\r\n\r\n    @Composable\r\n    fun ColumnScope.ButtonMain() {\r\n        ...\r\n    }","title":"None of the following functions can be called with the arguments supplied. Compose","body":"<p>The weight modifier you're using in ButtonMain is only available in ColumnScope or RowScope. What you need to do is pass the scope to ButtonMain. You can do that easily by making it an extension function of the ColumnScope, like so:</p>\n<pre><code>@Composable\nfun ColumnScope.ButtonMain() {\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":28077146,"reputation":21,"user_id":21448802,"display_name":"Rinat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":214,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1679437803,"creation_date":1679422044,"question_id":75804900,"body_markdown":"I can&#39;t figure out what the problem is. I&#39;m trying to create a button, but one of the modifier attributes doesn&#39;t work, I tried wrapping it in a column, but it doesn&#39;t help.\r\n\r\n```\r\nclass MainActivity : ComponentActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContent {\r\n\r\n        }\r\n    }\r\n}\r\n\r\n@Preview\r\n@Composable\r\nfun Greeting() {\r\n    val context = LocalContext.current\r\n\r\n    Column(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.Blue)\r\n            .padding(0.dp, 0.dp, 0.dp, 28.dp),\r\n        verticalArrangement = Arrangement.SpaceEvenly\r\n    ) {\r\n\r\n        TextPlayList(str = R.string.main_text_Playlist_Maker)\r\n\r\n        Button(\r\n            onClick = { context.startActivity(Intent(context, SearchMain::class.java)) },\r\n            colors = ButtonDefaults\r\n                .outlinedButtonColors(backgroundColor = Color.White),\r\n            shape = RoundedCornerShape(16.dp),\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .weight(1f)\r\n                .padding(17.dp, 0.dp, 15.dp, 8.dp)\r\n        )\r\n\r\n        {\r\n            IconButton(R.drawable.ic_search_main)\r\n            TextButton(str = R.string.main_button_search)\r\n        }\r\n\r\n        Button(\r\n            onClick = { context.startActivity(Intent(context, MediaActivity::class.java)) },\r\n            colors = ButtonDefaults\r\n                .outlinedButtonColors(backgroundColor = Color.White),\r\n            shape = RoundedCornerShape(16.dp),\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .weight(1f)\r\n                .padding(17.dp, 8.dp, 15.dp, 8.dp)\r\n        )\r\n        {\r\n            IconButton(R.drawable.ic_media_main)\r\n            TextButton(str = R.string.main_button_media)\r\n        }\r\n\r\n        Button(\r\n            onClick = { context.startActivity(Intent(context, SettingMain::class.java)) },\r\n            colors = ButtonDefaults\r\n                .outlinedButtonColors(backgroundColor = Color.White),\r\n            shape = RoundedCornerShape(16.dp),\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .weight(1f)\r\n                .padding(17.dp, 8.dp, 15.dp, 0.dp)\r\n        )\r\n        {\r\n            IconButton(R.drawable.ic_setting_main)\r\n            TextButton(str = R.string.main_button_setting)\r\n\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n@Composable\r\nfun ButtonMain() {\r\n    val context = LocalContext.current\r\n        Button(\r\n            onClick = { context.startActivity(Intent(context, SettingMain::class.java)) },\r\n            colors = ButtonDefaults\r\n                .outlinedButtonColors(backgroundColor = Color.White),\r\n            shape = RoundedCornerShape(16.dp),\r\n            modifier = Modifier\r\n                .weight(1f, false)\r\n                .fillMaxWidth()\r\n                .padding(17.dp, 8.dp, 15.dp, 0.dp)\r\n        ) {\r\n            IconButton(draw = R.drawable.ic_setting_main)\r\n            TextButton(str = R.string.main_button_setting)\r\n        }\r\n\r\n}\r\n\r\n\r\n@Composable\r\nfun IconButton(draw: Int) {\r\n    Icon(\r\n        painter = painterResource(id = draw),\r\n        &quot;Setting&quot;,\r\n        Modifier.padding(10.dp),\r\n        tint = Color.Black\r\n    )\r\n}\r\n\r\n@Composable\r\nfun TextButton(str: Int) {\r\n    Text(\r\n        text = stringResource(id = str),\r\n        fontSize = 22.sp, color = Color.Black\r\n    )\r\n}\r\n\r\n@Composable\r\nfun TextPlayList(str: Int) {\r\n    Text(\r\n        text = stringResource(id = str),\r\n        fontSize = 22.sp,\r\n        color = Color.White,\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .padding(16.dp, 14.dp, 210.dp, 40.dp)\r\n    )\r\n}\r\n\r\n```\r\n\r\n\r\nI tried to solve the problem like this, but it turns out not what I need.\r\nhttps://stackoverflow.com/questions/73271265/modifier-weight-not-available-in-jetpack-compose-1-1-1","title":"None of the following functions can be called with the arguments supplied. Compose","body":"<p>I can't figure out what the problem is. I'm trying to create a button, but one of the modifier attributes doesn't work, I tried wrapping it in a column, but it doesn't help.</p>\n<pre><code>class MainActivity : ComponentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContent {\n\n        }\n    }\n}\n\n@Preview\n@Composable\nfun Greeting() {\n    val context = LocalContext.current\n\n    Column(\n        modifier = Modifier\n            .fillMaxSize()\n            .background(Color.Blue)\n            .padding(0.dp, 0.dp, 0.dp, 28.dp),\n        verticalArrangement = Arrangement.SpaceEvenly\n    ) {\n\n        TextPlayList(str = R.string.main_text_Playlist_Maker)\n\n        Button(\n            onClick = { context.startActivity(Intent(context, SearchMain::class.java)) },\n            colors = ButtonDefaults\n                .outlinedButtonColors(backgroundColor = Color.White),\n            shape = RoundedCornerShape(16.dp),\n            modifier = Modifier\n                .fillMaxWidth()\n                .weight(1f)\n                .padding(17.dp, 0.dp, 15.dp, 8.dp)\n        )\n\n        {\n            IconButton(R.drawable.ic_search_main)\n            TextButton(str = R.string.main_button_search)\n        }\n\n        Button(\n            onClick = { context.startActivity(Intent(context, MediaActivity::class.java)) },\n            colors = ButtonDefaults\n                .outlinedButtonColors(backgroundColor = Color.White),\n            shape = RoundedCornerShape(16.dp),\n            modifier = Modifier\n                .fillMaxWidth()\n                .weight(1f)\n                .padding(17.dp, 8.dp, 15.dp, 8.dp)\n        )\n        {\n            IconButton(R.drawable.ic_media_main)\n            TextButton(str = R.string.main_button_media)\n        }\n\n        Button(\n            onClick = { context.startActivity(Intent(context, SettingMain::class.java)) },\n            colors = ButtonDefaults\n                .outlinedButtonColors(backgroundColor = Color.White),\n            shape = RoundedCornerShape(16.dp),\n            modifier = Modifier\n                .fillMaxWidth()\n                .weight(1f)\n                .padding(17.dp, 8.dp, 15.dp, 0.dp)\n        )\n        {\n            IconButton(R.drawable.ic_setting_main)\n            TextButton(str = R.string.main_button_setting)\n\n        }\n    }\n\n}\n\n\n@Composable\nfun ButtonMain() {\n    val context = LocalContext.current\n        Button(\n            onClick = { context.startActivity(Intent(context, SettingMain::class.java)) },\n            colors = ButtonDefaults\n                .outlinedButtonColors(backgroundColor = Color.White),\n            shape = RoundedCornerShape(16.dp),\n            modifier = Modifier\n                .weight(1f, false)\n                .fillMaxWidth()\n                .padding(17.dp, 8.dp, 15.dp, 0.dp)\n        ) {\n            IconButton(draw = R.drawable.ic_setting_main)\n            TextButton(str = R.string.main_button_setting)\n        }\n\n}\n\n\n@Composable\nfun IconButton(draw: Int) {\n    Icon(\n        painter = painterResource(id = draw),\n        &quot;Setting&quot;,\n        Modifier.padding(10.dp),\n        tint = Color.Black\n    )\n}\n\n@Composable\nfun TextButton(str: Int) {\n    Text(\n        text = stringResource(id = str),\n        fontSize = 22.sp, color = Color.Black\n    )\n}\n\n@Composable\nfun TextPlayList(str: Int) {\n    Text(\n        text = stringResource(id = str),\n        fontSize = 22.sp,\n        color = Color.White,\n        modifier = Modifier\n            .fillMaxWidth()\n            .padding(16.dp, 14.dp, 210.dp, 40.dp)\n    )\n}\n\n</code></pre>\n<p>I tried to solve the problem like this, but it turns out not what I need.\n<a href=\"https://stackoverflow.com/questions/73271265/modifier-weight-not-available-in-jetpack-compose-1-1-1\">Modifier weight not available in jetpack compose 1.1.1</a></p>\n"},{"tags":["java","javafx","netbeans"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":3,"creation_date":1679409253,"post_id":75802500,"comment_id":133714376,"body_markdown":"have a look at the javafx tag wiki, it has a whole block of FAQs on how to deploy","body":"have a look at the javafx tag wiki, it has a whole block of FAQs on how to deploy"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1679425957,"post_id":75802500,"comment_id":133719536,"body_markdown":"Specifically see the [packaging section](https://stackoverflow.com/tags/javafx/info).","body":"Specifically see the <a href=\"https://stackoverflow.com/tags/javafx/info\">packaging section</a>."}],"owner":{"account_id":28076249,"reputation":1,"user_id":21448057,"display_name":"Andrea DWS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679437714,"creation_date":1679408933,"question_id":75802500,"body_markdown":"I&#39;ve been developing a JavaFX project ( version 15 ) with Maven inside Netbeans version 16.\r\nWhen I build my project a jar file is created in the target folder, but I cannot open the JAR file.\r\n\r\n[Result folder after build](https://i.stack.imgur.com/v0kpV.png)\r\n\r\nHere it is my pom.fxl file:\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.desktop&lt;/groupId&gt;\r\n    &lt;artifactId&gt;MyProject&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.release&gt;15&lt;/maven.compiler.release&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\r\n            &lt;version&gt;11.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.xerial&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;3.40.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n            &lt;version&gt;19-ea+8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.10.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;15&lt;/release&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.4&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.desktop.healtydesk.App&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Default configuration for running --&gt;\r\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Configuration for manual attach debugging --&gt;\r\n                        &lt;!-- Usage: mvn clean javafx:run@debug --&gt;\r\n                        &lt;id&gt;debug&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;options&gt;\r\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=localhost:8000&lt;/option&gt;\r\n                            &lt;/options&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Configuration for automatic IDE debugging --&gt;\r\n                        &lt;id&gt;ide-debug&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;options&gt;\r\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=n,address=${jpda.address}&lt;/option&gt;\r\n                            &lt;/options&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Configuration for automatic IDE profiling --&gt;\r\n                        &lt;id&gt;ide-profile&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;options&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg1}&lt;/option&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg2}&lt;/option&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg3}&lt;/option&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg4}&lt;/option&gt;\r\n                                &lt;option&gt;${profiler.jvmargs.arg5}&lt;/option&gt;\r\n                            &lt;/options&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;         \r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThe jar doesn&#39;t run no matter how I run it, I&#39;ve tried to build a &quot;fat jar&quot; but still, I have the same issue.","title":"How to build and release a JavaFX maven project inside NetBeans?","body":"<p>I've been developing a JavaFX project ( version 15 ) with Maven inside Netbeans version 16.\nWhen I build my project a jar file is created in the target folder, but I cannot open the JAR file.</p>\n<p><a href=\"https://i.stack.imgur.com/v0kpV.png\" rel=\"nofollow noreferrer\">Result folder after build</a></p>\n<p>Here it is my pom.fxl file:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.desktop&lt;/groupId&gt;\n    &lt;artifactId&gt;MyProject&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.release&gt;15&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\n            &lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\n            &lt;version&gt;11.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.xerial&lt;/groupId&gt;\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.40.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;19-ea+8&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;15&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.4&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.desktop.healtydesk.App&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for manual attach debugging --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run@debug --&gt;\n                        &lt;id&gt;debug&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=localhost:8000&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for automatic IDE debugging --&gt;\n                        &lt;id&gt;ide-debug&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=n,address=${jpda.address}&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for automatic IDE profiling --&gt;\n                        &lt;id&gt;ide-profile&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg1}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg2}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg3}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg4}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg5}&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;         \n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>The jar doesn't run no matter how I run it, I've tried to build a &quot;fat jar&quot; but still, I have the same issue.</p>\n"},{"tags":["java","querydsl"],"answers":[{"tags":[],"owner":{"account_id":27604979,"reputation":54,"user_id":21069312,"display_name":"Reza"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679437517,"creation_date":1679437517,"answer_id":75806870,"question_id":75806464,"body_markdown":"I am not an expert with QueryDSL but I believe something like this or similar using JPAQueryFactory could do it.\r\n\r\n    Map&lt;Long, Long&gt; entityMap = new JPAQueryFactory(entityManager)\r\n    .select(qE2.qE1.id, qE2.count())\r\n    .from(qE2)\r\n    .join(qE2.qE1)\r\n    .where(qE1_exp)\r\n    .groupBy(qE2.qE1.id)\r\n    .fetch()\r\n    .stream()\r\n    .collect(Collectors.toMap(\r\n        tuple -&gt; tuple.get(qE2.qE1.id),\r\n        tuple -&gt; tuple.get(qE2.count())\r\n    ));","title":"How with QueryDSL get the map of ids of one entity and the numbers of associated entities","body":"<p>I am not an expert with QueryDSL but I believe something like this or similar using JPAQueryFactory could do it.</p>\n<pre><code>Map&lt;Long, Long&gt; entityMap = new JPAQueryFactory(entityManager)\n.select(qE2.qE1.id, qE2.count())\n.from(qE2)\n.join(qE2.qE1)\n.where(qE1_exp)\n.groupBy(qE2.qE1.id)\n.fetch()\n.stream()\n.collect(Collectors.toMap(\n    tuple -&gt; tuple.get(qE2.qE1.id),\n    tuple -&gt; tuple.get(qE2.count())\n));\n</code></pre>\n"}],"owner":{"account_id":3362570,"reputation":421,"user_id":2824059,"accept_rate":79,"display_name":"slider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":395,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75806870,"answer_count":1,"score":0,"last_activity_date":1679437517,"creation_date":1679433819,"question_id":75806464,"body_markdown":"How to get the map of ids of one entity (key) and the numbers of associated entities (value). Without transfer entities. \r\nSomething like this:\r\n\r\n    from(qE1)\r\n       .join(qE2).on(qE2.qE1_id.eq(qE1.id))\r\n       .where(qE1_exp)\r\n       .transform(GroupBy.groupBy(qE2.id).as(qE1.count())) // ?\r\n\r\nQueryDSL-4.2.1.","title":"How with QueryDSL get the map of ids of one entity and the numbers of associated entities","body":"<p>How to get the map of ids of one entity (key) and the numbers of associated entities (value). Without transfer entities.\nSomething like this:</p>\n<pre><code>from(qE1)\n   .join(qE2).on(qE2.qE1_id.eq(qE1.id))\n   .where(qE1_exp)\n   .transform(GroupBy.groupBy(qE2.id).as(qE1.count())) // ?\n</code></pre>\n<p>QueryDSL-4.2.1.</p>\n"},{"tags":["java","rsyslog","logrotate","log-rotation"],"comments":[{"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"score":1,"creation_date":1651569325,"post_id":72095695,"comment_id":127388891,"body_markdown":"@Dan I have added it with my question.","body":"@Dan I have added it with my question."},{"owner":{"account_id":10241602,"reputation":626,"user_id":7558856,"display_name":"eDonkey"},"score":0,"creation_date":1651653110,"post_id":72095695,"comment_id":127411806,"body_markdown":"Please add the content of `/etc/log_rotation_script` to your question.","body":"Please add the content of <code>&#47;etc&#47;log_rotation_script</code> to your question."},{"owner":{"account_id":10241602,"reputation":626,"user_id":7558856,"display_name":"eDonkey"},"score":0,"creation_date":1651653529,"post_id":72095695,"comment_id":127411954,"body_markdown":"Also the file size (3000) inside your logrotation statement is defined in **bytes**. So it would rotate the file after the file size reaches **3000 Bytes** or **3 KB**.","body":"Also the file size (3000) inside your logrotation statement is defined in <b>bytes</b>. So it would rotate the file after the file size reaches <b>3000 Bytes</b> or <b>3 KB</b>."},{"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"score":0,"creation_date":1651735617,"post_id":72095695,"comment_id":127434827,"body_markdown":"@eDonkey the script added above is /etc/log_rotation_script. Also, the file is not getting rotated after 3kb size and more data is getting dumped into the same file.","body":"@eDonkey the script added above is /etc/log_rotation_script. Also, the file is not getting rotated after 3kb size and more data is getting dumped into the same file."},{"owner":{"account_id":8848072,"reputation":1900,"user_id":6608257,"accept_rate":96,"display_name":"dmx"},"score":0,"creation_date":1653339357,"post_id":72095695,"comment_id":127823743,"body_markdown":"@KumarRounak I have the exact issue, did you fine a working solution ?","body":"@KumarRounak I have the exact issue, did you fine a working solution ?"},{"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"score":0,"creation_date":1653478920,"post_id":72095695,"comment_id":127861174,"body_markdown":"@dmx no bro, the problem still persists","body":"@dmx no bro, the problem still persists"}],"answers":[{"comments":[{"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"score":0,"creation_date":1651747860,"post_id":72123943,"comment_id":127438811,"body_markdown":"Hey, I mistakenly told that thing about log rotation script. I have updated the question with the log rotation script. Also, one doubt: How does this line: *.* :omfile:$log_rotation, ensures that flogs are written to /logs/prismaudit.log location.","body":"Hey, I mistakenly told that thing about log rotation script. I have updated the question with the log rotation script. Also, one doubt: How does this line: <i>.</i> :omfile:$log_rotation, ensures that flogs are written to /logs/prismaudit.log location."}],"tags":[],"owner":{"account_id":10241602,"reputation":626,"user_id":7558856,"display_name":"eDonkey"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657694931,"creation_date":1651738175,"answer_id":72123943,"question_id":72095695,"body_markdown":"First of all, I think you misunderstood something there and should read the documentation again. \r\n\r\nThe log rotation is not working because the content you currently have in `/etc/log_rotation_script` should be in `/etc/rsyslog.conf` or `/etc/rsydlog.d/filename.conf`, as the configuration of rsyslog is handled in there. \r\n\r\nThe only purpose of the `/etc/log_rotation_script` is to move a &quot;full&quot; (when the limit of currently 3KB is hit) file to another file/location.\r\n\r\n\r\nThe **`/etc/rsyslog.conf`** (simplified) would then look something like the following:\r\n\r\n    # Load modules\r\n    module(load=&quot;imudp&quot;)\r\n\r\n    # Set the default permissions for all log files\r\n    module(load=&quot;builtin:omfile&quot;\r\n\t    fileOwner=&quot;root&quot;\r\n\t    fileGroup=&quot;adm&quot;\r\n\t    fileCreateMode=&quot;0777&quot;\r\n\t    dirCreateMode=&quot;0777&quot;)\r\n\r\n    # Receive logs over udp from somewhere\r\n    input(type=&quot;imudp&quot; address=&quot;127.0.0.1&quot; port=&quot;514&quot;)\r\n\r\n    # log everything to /logs/prismaudit.log by using the output channel\r\n    *.* :omfile:$log_rotation\r\n\r\n    # If max file size (50MB) is reached execute /path/to/log_rotation_script\r\n    $outchannel log_rotation,/logs/prismaudit.log, 52428800,/path/to/log_rotation_script\r\n\r\n\r\n----------\r\n\r\nThe script which is executed when the max file size is reached, could then just move the file: \r\n\r\n**`/path/to/log_rotation_script`**\r\n\r\n    # move original log to (a kind of) backup log file\r\n    mv -f /logs/prismaudit.log /logs/prismaudit.log.1","title":"Enable log rotation in rsyslog","body":"<p>First of all, I think you misunderstood something there and should read the documentation again.</p>\n<p>The log rotation is not working because the content you currently have in <code>/etc/log_rotation_script</code> should be in <code>/etc/rsyslog.conf</code> or <code>/etc/rsydlog.d/filename.conf</code>, as the configuration of rsyslog is handled in there.</p>\n<p>The only purpose of the <code>/etc/log_rotation_script</code> is to move a &quot;full&quot; (when the limit of currently 3KB is hit) file to another file/location.</p>\n<p>The <strong><code>/etc/rsyslog.conf</code></strong> (simplified) would then look something like the following:</p>\n<pre><code># Load modules\nmodule(load=&quot;imudp&quot;)\n\n# Set the default permissions for all log files\nmodule(load=&quot;builtin:omfile&quot;\n    fileOwner=&quot;root&quot;\n    fileGroup=&quot;adm&quot;\n    fileCreateMode=&quot;0777&quot;\n    dirCreateMode=&quot;0777&quot;)\n\n# Receive logs over udp from somewhere\ninput(type=&quot;imudp&quot; address=&quot;127.0.0.1&quot; port=&quot;514&quot;)\n\n# log everything to /logs/prismaudit.log by using the output channel\n*.* :omfile:$log_rotation\n\n# If max file size (50MB) is reached execute /path/to/log_rotation_script\n$outchannel log_rotation,/logs/prismaudit.log, 52428800,/path/to/log_rotation_script\n</code></pre>\n<hr />\n<p>The script which is executed when the max file size is reached, could then just move the file:</p>\n<p><strong><code>/path/to/log_rotation_script</code></strong></p>\n<pre><code># move original log to (a kind of) backup log file\nmv -f /logs/prismaudit.log /logs/prismaudit.log.1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4397955,"reputation":93,"user_id":3584447,"display_name":"CoDeC__"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679437207,"creation_date":1679437207,"answer_id":75806838,"question_id":72095695,"body_markdown":"currently I use *Template* feature for sort the different sources that RSyslog receives:\r\n\r\n    $template mylogs,&quot;/disk2/syslog/%$YEAR%%$MONTH%%$DAY%/%FROMHOST-IP%.log&quot;\r\n\r\nwith this I have my logs sorted. Like you see I use *RSyslog Propierties*.\r\n\r\nNow, I want apply the rotation by size. Currently, I use logrotate but I don&#39;t like and I&#39;ve found that RSyslog have the *Output Channels* feature. \r\n\r\nI have read that *RSyslog Propierties* only can be used in Templates and Conditional Statements and then seem that the field filename of *Output Channels* must to be static. \r\n\r\nDo you know if it is feasible to get the same that I have with Template with Output Channels?\r\n\r\nthanks","title":"Enable log rotation in rsyslog","body":"<p>currently I use <em>Template</em> feature for sort the different sources that RSyslog receives:</p>\n<pre><code>$template mylogs,&quot;/disk2/syslog/%$YEAR%%$MONTH%%$DAY%/%FROMHOST-IP%.log&quot;\n</code></pre>\n<p>with this I have my logs sorted. Like you see I use <em>RSyslog Propierties</em>.</p>\n<p>Now, I want apply the rotation by size. Currently, I use logrotate but I don't like and I've found that RSyslog have the <em>Output Channels</em> feature.</p>\n<p>I have read that <em>RSyslog Propierties</em> only can be used in Templates and Conditional Statements and then seem that the field filename of <em>Output Channels</em> must to be static.</p>\n<p>Do you know if it is feasible to get the same that I have with Template with Output Channels?</p>\n<p>thanks</p>\n"}],"owner":{"account_id":13088541,"reputation":59,"user_id":9456788,"display_name":"Kumar Rounak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9559,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1679437207,"creation_date":1651560495,"question_id":72095695,"body_markdown":"How to enable log rotation in rsyslog configuration. The method described in the official documentation of rsyslog using output channels is not working for me.\r\n\r\nThe script given in the official documentation of rsyslog for output channel is available here: https://www.rsyslog.com/doc/master/tutorials/log_rotation_fix_size.html\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    module(load=&quot;imudp&quot; TimeRequery=&quot;500&quot;)\r\n\r\n    module(load=&quot;omstdout&quot;)\r\n    module(load=&quot;omelasticsearch&quot;)\r\n\r\n    module(load=&quot;mmjsonparse&quot;)\r\n    module(load=&quot;mmutf8fix&quot;)\r\n\r\n    ruleset(name=&quot;prismaudit_rs&quot;) {\r\n          action(type=&quot;omfile&quot; dirCreateMode=&quot;0777&quot; fileCreateMode=&quot;0777&quot; file=&quot;/logs/prismaudit.log&quot;)\r\n    }\r\n\r\n    $outchannel log_rotation,/logs/prismaudit.log, 3000,/etc/log_rotation_script\r\n    *.* :omfile:$log_rotation\r\n\r\n    #input(type=&quot;imptcp&quot; port=&quot;514&quot;)\r\n    input(type=&quot;imudp&quot; port=&quot;514&quot; ruleset=&quot;prismaudit_rs&quot;)\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThis is the snippet of code I am using. I have also tried adding the outputchannel part of code inside the ruleset(after action statement).\r\n\r\n\r\nMy log rotation script:\r\nmv -f /logs/prismaudit.log /logs/log_rotation.log.1","title":"Enable log rotation in rsyslog","body":"<p>How to enable log rotation in rsyslog configuration. The method described in the official documentation of rsyslog using output channels is not working for me.</p>\n<p>The script given in the official documentation of rsyslog for output channel is available here: <a href=\"https://www.rsyslog.com/doc/master/tutorials/log_rotation_fix_size.html\" rel=\"noreferrer\">https://www.rsyslog.com/doc/master/tutorials/log_rotation_fix_size.html</a></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>module(load=\"imudp\" TimeRequery=\"500\")\n\nmodule(load=\"omstdout\")\nmodule(load=\"omelasticsearch\")\n\nmodule(load=\"mmjsonparse\")\nmodule(load=\"mmutf8fix\")\n\nruleset(name=\"prismaudit_rs\") {\n      action(type=\"omfile\" dirCreateMode=\"0777\" fileCreateMode=\"0777\" file=\"/logs/prismaudit.log\")\n}\n\n$outchannel log_rotation,/logs/prismaudit.log, 3000,/etc/log_rotation_script\n*.* :omfile:$log_rotation\n\n#input(type=\"imptcp\" port=\"514\")\ninput(type=\"imudp\" port=\"514\" ruleset=\"prismaudit_rs\")</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>This is the snippet of code I am using. I have also tried adding the outputchannel part of code inside the ruleset(after action statement).</p>\n<p>My log rotation script:\nmv -f /logs/prismaudit.log /logs/log_rotation.log.1</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":2,"creation_date":1533043852,"post_id":51614284,"comment_id":90194455,"body_markdown":"unfortunately this error is reported too many times in the wrong place","body":"unfortunately this error is reported too many times in the wrong place"},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533049258,"post_id":51614284,"comment_id":90198288,"body_markdown":"That&#39;s interesting point @Eugene.","body":"That&#39;s interesting point @Eugene."},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533049463,"post_id":51614284,"comment_id":90198416,"body_markdown":"Emdee, can you post full code?","body":"Emdee, can you post full code?"}],"answers":[{"comments":[{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533047397,"post_id":51614312,"comment_id":90196929,"body_markdown":"You are correct about second parameter but, the first parameter must be accessed through an object reference. Or, the `getFirstName` must be static.","body":"You are correct about second parameter but, the first parameter must be accessed through an object reference. Or, the <code>getFirstName</code> must be static."},{"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"score":0,"creation_date":1533047611,"post_id":51614312,"comment_id":90197090,"body_markdown":"@mnmopazem there&#39;s nothing wrong with `Student::getFirstName`, infact it&#39;s equivalent to `student -&gt; student.getFirstName()` which indeed is an object reference.","body":"@mnmopazem there&#39;s nothing wrong with <code>Student::getFirstName</code>, infact it&#39;s equivalent to <code>student -&gt; student.getFirstName()</code> which indeed is an object reference."},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533047793,"post_id":51614312,"comment_id":90197222,"body_markdown":"Static members are accessed using class name. In this case, class name is `Student`, note the case.","body":"Static members are accessed using class name. In this case, class name is <code>Student</code>, note the case."},{"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"score":0,"creation_date":1533048781,"post_id":51614312,"comment_id":90197988,"body_markdown":"@mnmopazem &quot;Or, the getFirstName must be static.&quot;  if `getFirstName` is defined as `static String getFirstName() {...}` it would yield a compilation error, first being that you cannot access instance fields in static methods and second in the `toMap` collector. the only case where the method can be `static` and still work is if you defined it as --&gt; `static String getFirstName(Student s) {\n        return s.getFirstName();\n    }` which I wouldn&#39;t recommend doing when you can simply define an instance getter method as `public String getFirstName() {\n        return firstName;\n    }`","body":"@mnmopazem &quot;Or, the getFirstName must be static.&quot;  if <code>getFirstName</code> is defined as <code>static String getFirstName() {...}</code> it would yield a compilation error, first being that you cannot access instance fields in static methods and second in the <code>toMap</code> collector. the only case where the method can be <code>static</code> and still work is if you defined it as --&gt; <code>static String getFirstName(Student s) {         return s.getFirstName();     }</code> which I wouldn&#39;t recommend doing when you can simply define an instance getter method as <code>public String getFirstName() {         return firstName;     }</code>"},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533048804,"post_id":51614312,"comment_id":90198011,"body_markdown":"That&#39;s interesting as compiler error contradicts method reference access type. May be, OP has error on different line?! What&#39;s your take?","body":"That&#39;s interesting as compiler error contradicts method reference access type. May be, OP has error on different line?! What&#39;s your take?"},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533049207,"post_id":51614312,"comment_id":90198260,"body_markdown":"Hm. I suppose both our answers are correct. Did you notice an interesting comment(on question) by Eugene? May be &#39;thats&#39; the answer. :)","body":"Hm. I suppose both our answers are correct. Did you notice an interesting comment(on question) by Eugene? May be &#39;thats&#39; the answer. :)"},{"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"score":0,"creation_date":1533049401,"post_id":51614312,"comment_id":90198376,"body_markdown":"@mnmopazem well both our answers are correct but you saying &quot; the correct statement is:&quot; `someStudents.stream().collect( Collectors.toMap( student -&gt; student.getFirstName(), student -&gt; 1) );` suggests that using `Student::getFirstName` as the key mapper function is incorrect which is not true.  Yes, I did realise what Eugene meant when i saw his comment earlier. you can read more here --&gt; https://stackoverflow.com/questions/42200958/non-static-method-cannot-be-referenced-from-a-static-context-in-java-8-streams","body":"@mnmopazem well both our answers are correct but you saying &quot; the correct statement is:&quot; <code>someStudents.stream().collect( Collectors.toMap( student -&gt; student.getFirstName(), student -&gt; 1) );</code> suggests that using <code>Student::getFirstName</code> as the key mapper function is incorrect which is not true.  Yes, I did realise what Eugene meant when i saw his comment earlier. you can read more here --&gt; <a href=\"https://stackoverflow.com/questions/42200958/non-static-method-cannot-be-referenced-from-a-static-context-in-java-8-streams\" title=\"non static method cannot be referenced from a static context in java 8 streams\">stackoverflow.com/questions/42200958/&hellip;</a>"},{"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"score":0,"creation_date":1533049479,"post_id":51614312,"comment_id":90198432,"body_markdown":"@mnmopazem another similar issue answer by Holger --&gt; https://stackoverflow.com/questions/40172551/static-context-cannot-access-non-static-in-collectors","body":"@mnmopazem another similar issue answer by Holger --&gt; <a href=\"https://stackoverflow.com/questions/40172551/static-context-cannot-access-non-static-in-collectors\" title=\"static context cannot access non static in collectors\">stackoverflow.com/questions/40172551/&hellip;</a>"}],"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"comment_count":8,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1533043629,"creation_date":1533042958,"answer_id":51614312,"question_id":51614284,"body_markdown":"[The value mapper should be a function][1], i.e.:\r\n\r\n\r\n    .collect(Collectors.toMap(Student::getFirstName, s -&gt; 1));\r\n\r\nThe function `s -&gt; 1` essentially takes a student as input and returns `1` in this specific case for the map values. \r\n\r\nThe below code is not valid as the literal value `1` is not a function.\r\n\r\n    .collect(Collectors.toMap(Student::getFirstName, 1));\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-","title":"Non-static method cannot be referenced from a static context inside Collectors.toMap","body":"<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"nofollow noreferrer\">The value mapper should be a function</a>, i.e.:</p>\n\n<pre><code>.collect(Collectors.toMap(Student::getFirstName, s -&gt; 1));\n</code></pre>\n\n<p>The function <code>s -&gt; 1</code> essentially takes a student as input and returns <code>1</code> in this specific case for the map values. </p>\n\n<p>The below code is not valid as the literal value <code>1</code> is not a function.</p>\n\n<pre><code>.collect(Collectors.toMap(Student::getFirstName, 1));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"score":1,"creation_date":1533047643,"post_id":51615733,"comment_id":90197111,"body_markdown":"`Student::getFirstName` _is the same thing_ as `student -&gt; student.getFirstName()`","body":"<code>Student::getFirstName</code> <i>is the same thing</i> as <code>student -&gt; student.getFirstName()</code>"},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1533047874,"post_id":51615733,"comment_id":90197280,"body_markdown":"No, its different. To keep it simple, lets the discussion be on your answer as it begin there...","body":"No, its different. To keep it simple, lets the discussion be on your answer as it begin there..."}],"tags":[],"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1533097640,"creation_date":1533047135,"answer_id":51615733,"question_id":51614284,"body_markdown":"Firstly, you are accessing `getFirstName` using a class name -`Student`(as if its a static memeber) rather than using object reference. [Java tutorial - Method Refrences][1].&lt;br&gt;\r\nSecondly, second parameter of `toMap` method must be a [`Function`][2] type.\r\n\r\nSo, the correct statement is:&lt;br&gt;\r\n`someStudents.stream().collect( Collectors.toMap( student -&gt; student.getFirstName(), student -&gt; 1 ) );`\r\n\r\n**Edit:**&lt;br&gt;\r\nOr, it can also be as posted by @Aomine. Both answers are correct. For more info, refer to comments on @Aomine&#39;s answers.\r\n\r\n**Edit 2:**&lt;br&gt;\r\nThough, @Aomine&#39;s and this answer give expected result, note difference in first parameter.\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-","title":"Non-static method cannot be referenced from a static context inside Collectors.toMap","body":"<p>Firstly, you are accessing <code>getFirstName</code> using a class name -<code>Student</code>(as if its a static memeber) rather than using object reference. <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">Java tutorial - Method Refrences</a>.<br>\nSecondly, second parameter of <code>toMap</code> method must be a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>Function</code></a> type.</p>\n\n<p>So, the correct statement is:<br>\n<code>someStudents.stream().collect( Collectors.toMap( student -&gt; student.getFirstName(), student -&gt; 1 ) );</code></p>\n\n<p><strong>Edit:</strong><br>\nOr, it can also be as posted by @Aomine. Both answers are correct. For more info, refer to comments on @Aomine's answers.</p>\n\n<p><strong>Edit 2:</strong><br>\nThough, @Aomine's and this answer give expected result, note difference in first parameter.</p>\n"},{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679437195,"creation_date":1679437195,"answer_id":75806837,"question_id":51614284,"body_markdown":"The issue here is that first of all, this message is very misleading and that seems to be a java bug.\r\nSecond, you are providing an int value in place of a function reference.\r\nCorrect is this:\r\n\r\n\r\n    final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\r\n            Collectors.toMap(Student::getFirstName, val -&gt; 1));\r\n\r\nHere `val -&gt; 1` is a function which for any `val` will always return 1.\r\n\r\nAnother situation where you would get the same error would be this:\r\n\r\n     final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\r\n                Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n\r\nIf `someStudents` is of type `Map&lt;String, String&gt;` but map is `Map&lt;String, Integer&gt;` you would get the same:\r\n\r\n`non-static method Map.Entry::getValue cannot be referenced from a static context`\r\n","title":"Non-static method cannot be referenced from a static context inside Collectors.toMap","body":"<p>The issue here is that first of all, this message is very misleading and that seems to be a java bug.\nSecond, you are providing an int value in place of a function reference.\nCorrect is this:</p>\n<pre><code>final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\n        Collectors.toMap(Student::getFirstName, val -&gt; 1));\n</code></pre>\n<p>Here <code>val -&gt; 1</code> is a function which for any <code>val</code> will always return 1.</p>\n<p>Another situation where you would get the same error would be this:</p>\n<pre><code> final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\n            Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n</code></pre>\n<p>If <code>someStudents</code> is of type <code>Map&lt;String, String&gt;</code> but map is <code>Map&lt;String, Integer&gt;</code> you would get the same:</p>\n<p><code>non-static method Map.Entry::getValue cannot be referenced from a static context</code></p>\n"}],"owner":{"account_id":6144018,"reputation":1699,"user_id":4790468,"accept_rate":48,"display_name":"Emdee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14255,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1679437195,"creation_date":1533042862,"question_id":51614284,"body_markdown":"I have a list of Students which I want to convert into a `Map&lt;String, Integer&gt;`, where the map key should be the first name of the student. To keep the code sample simple, I specified the map value as `1`:\r\n\r\n    final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\r\n            Collectors.toMap(Student::getFirstName, 1));\r\n\r\nThe compiler complains about:\r\n\r\n&gt; non-static method getFirstName() cannot be referenced from a static context\r\n\r\nAny idea? I am confused because many examples use the same approach of passing a reference to the non-static method. Why does the compiler see a static context here?","title":"Non-static method cannot be referenced from a static context inside Collectors.toMap","body":"<p>I have a list of Students which I want to convert into a <code>Map&lt;String, Integer&gt;</code>, where the map key should be the first name of the student. To keep the code sample simple, I specified the map value as <code>1</code>:</p>\n\n<pre><code>final Map&lt;String, Integer&gt; map = someStudents.stream().collect(\n        Collectors.toMap(Student::getFirstName, 1));\n</code></pre>\n\n<p>The compiler complains about:</p>\n\n<blockquote>\n  <p>non-static method getFirstName() cannot be referenced from a static context</p>\n</blockquote>\n\n<p>Any idea? I am confused because many examples use the same approach of passing a reference to the non-static method. Why does the compiler see a static context here?</p>\n"},{"tags":["java","spring"],"owner":{"account_id":26038502,"reputation":95,"user_id":19743660,"display_name":"programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679436996,"creation_date":1679427160,"question_id":75805643,"body_markdown":"I have a custom **example.json** in **/resources** folder, where I keep values of my POJOs, for example \r\n```\r\n[\r\n  {\r\n    &quot;name&quot;: &quot;Max&quot;,\r\n    &quot;lastname&quot;: &quot;Mad&quot;\r\n  },\r\n...\r\n]\r\n```\r\nAnd I want to get them in Spring&#39;s BeanFactoryPostProcessor. I can&#39;t use `@Value` or `@Autowired` there, I only have access to `Environment`. Now I am using **example.properties** and Spring&#39;s Binder to obtain my array of objects, but is there are an easier and more convinient way? ","title":"How to create a Java object from custom properites in json format using Spring Environment?","body":"<p>I have a custom <strong>example.json</strong> in <strong>/resources</strong> folder, where I keep values of my POJOs, for example</p>\n<pre><code>[\n  {\n    &quot;name&quot;: &quot;Max&quot;,\n    &quot;lastname&quot;: &quot;Mad&quot;\n  },\n...\n]\n</code></pre>\n<p>And I want to get them in Spring's BeanFactoryPostProcessor. I can't use <code>@Value</code> or <code>@Autowired</code> there, I only have access to <code>Environment</code>. Now I am using <strong>example.properties</strong> and Spring's Binder to obtain my array of objects, but is there are an easier and more convinient way?</p>\n"},{"tags":["java","swing","imageicon"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1679423508,"post_id":75805119,"comment_id":133718838,"body_markdown":"The path would be correct if your program ran from the src folder. It does not.","body":"The path would be correct if your program ran from the src folder. It does not."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679423558,"post_id":75805119,"comment_id":133718859,"body_markdown":"Images are *resources* : Better to load your files/images as resources:\n[Netbeans](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)\n[Eclipse](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"Images are <i>resources</i> : Better to load your files/images as resources: <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a> <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a>"},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679423652,"post_id":75805119,"comment_id":133718884,"body_markdown":"g00se When you mean source, are you talking about the directly decoded image?","body":"g00se When you mean source, are you talking about the directly decoded image?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1679423655,"post_id":75805119,"comment_id":133718886,"body_markdown":"The [current directory](https://technojeeves.com/index.php/aliasjava1/91-find-the-current-directory-in-java)\nis a concept you need to know","body":"The <a href=\"https://technojeeves.com/index.php/aliasjava1/91-find-the-current-directory-in-java\" rel=\"nofollow noreferrer\">current directory</a> is a concept you need to know"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679423755,"post_id":75805119,"comment_id":133718920,"body_markdown":"I didn&#39;t understand your comment question btw","body":"I didn&#39;t understand your comment question btw"},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679423830,"post_id":75805119,"comment_id":133718943,"body_markdown":"The current directory I found is: &quot;eclipse-workspace\\JavaLessons&quot; so I edited &quot;File imageFile = new File(&quot;src/icon.png&quot;);&quot; but still no picture. The error is still the same.","body":"The current directory I found is: &quot;eclipse-workspace\\JavaLessons&quot; so I edited &quot;File imageFile = new File(&quot;src/icon.png&quot;);&quot; but still no picture. The error is still the same."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1679423852,"post_id":75805119,"comment_id":133718950,"body_markdown":"See: [Loading Images Using getResource](https://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource). The file must then be found on your &quot;classpath&quot;.","body":"See: <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource\" rel=\"nofollow noreferrer\">Loading Images Using getResource</a>. The file must then be found on your &quot;classpath&quot;."},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679423927,"post_id":75805119,"comment_id":133718976,"body_markdown":"camickr I tried this before. &quot;getClass().getResorce(&quot;bla bla&quot;)&quot; didn&#39;t work, still gave the same error.","body":"camickr I tried this before. &quot;getClass().getResorce(&quot;bla bla&quot;)&quot; didn&#39;t work, still gave the same error."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679424005,"post_id":75805119,"comment_id":133719012,"body_markdown":"*so I edited &quot;File imageFile = new File(&quot;src/icon.png&quot;);* Well I wasn&#39;t actually suggesting that as a solution. It should be done with `getResource`. Real programs don&#39;t run from IDEs, for one thing","body":"<i>so I edited &quot;File imageFile = new File(&quot;src/icon.png&quot;);</i> Well I wasn&#39;t actually suggesting that as a solution. It should be done with <code>getResource</code>. Real programs don&#39;t run from IDEs, for one thing"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679424062,"post_id":75805119,"comment_id":133719034,"body_markdown":"`getClass().getResource(&quot;/icon.png&quot;);`","body":"<code>getClass().getResource(&quot;&#47;icon.png&quot;);</code>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1679424128,"post_id":75805119,"comment_id":133719053,"body_markdown":"Is your &quot;classpath&quot; set up correctly? You need to have your &quot;bin&quot; directory on the classpath. I don&#39;t use an IDE so I don&#39;t know how to do it in Eclipse","body":"Is your &quot;classpath&quot; set up correctly? You need to have your &quot;bin&quot; directory on the classpath. I don&#39;t use an IDE so I don&#39;t know how to do it in Eclipse"},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679424190,"post_id":75805119,"comment_id":133719068,"body_markdown":"camickr Correct, Thanks for the information, but I&#39;m not doing a serious project, I&#39;m testing.","body":"camickr Correct, Thanks for the information, but I&#39;m not doing a serious project, I&#39;m testing."},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679424348,"post_id":75805119,"comment_id":133719117,"body_markdown":"I&#39;ve been struggling for 2 days now and I just had a look and this time it happened. I don&#39;t know what caused it, but it&#39;s probably &quot;The path would be correct if your program ran from the src folder. It does not.&quot; i fixed my code based on this comment. So it worked, so solution: &quot; new File(&quot;src/icon.png&quot;);&quot; I didn&#39;t add src/ before.","body":"I&#39;ve been struggling for 2 days now and I just had a look and this time it happened. I don&#39;t know what caused it, but it&#39;s probably &quot;The path would be correct if your program ran from the src folder. It does not.&quot; i fixed my code based on this comment. So it worked, so solution: &quot; new File(&quot;src/icon.png&quot;);&quot; I didn&#39;t add src/ before."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1679424388,"post_id":75805119,"comment_id":133719133,"body_markdown":"Actually, just noticed your code is attempting to access &quot;icon.jpg&quot; but you questions shows the file name is &quot;icon.png&quot;.","body":"Actually, just noticed your code is attempting to access &quot;icon.jpg&quot; but you questions shows the file name is &quot;icon.png&quot;."},{"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"score":0,"creation_date":1679424475,"post_id":75805119,"comment_id":133719150,"body_markdown":"Yes, changing &quot;icon.jpg&quot; to &quot;src/icon.png&quot; fixed it. Thank you to everyone who replied.","body":"Yes, changing &quot;icon.jpg&quot; to &quot;src/icon.png&quot; fixed it. Thank you to everyone who replied."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1679424693,"post_id":75805119,"comment_id":133719211,"body_markdown":"(1-) No, you should not be using &quot;src&quot;. The image is also located in the &quot;bin&quot; director with all your other class files. Did you not read the tutorial link I provided? It shows common directory structures to use so you don&#39;t have a problem. The image belong in a directory structure with your class files.","body":"(1-) No, you should not be using &quot;src&quot;. The image is also located in the &quot;bin&quot; director with all your other class files. Did you not read the tutorial link I provided? It shows common directory structures to use so you don&#39;t have a problem. The image belong in a directory structure with your class files."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":4,"creation_date":1679425127,"post_id":75805119,"comment_id":133719322,"body_markdown":"**There is no guarantee that icon.png exists,** because you don’t know what the [current working directory](https://en.wikipedia.org/wiki/Working_directory) of your Java process will be.  Your code is broken because it relies on an unsafe assumption about the current directory.  The Class.getResource method is designed to address this safely and reliably.","body":"<b>There is no guarantee that icon.png exists,</b> because you don’t know what the <a href=\"https://en.wikipedia.org/wiki/Working_directory\" rel=\"nofollow noreferrer\">current working directory</a> of your Java process will be.  Your code is broken because it relies on an unsafe assumption about the current directory.  The Class.getResource method is designed to address this safely and reliably."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1679434250,"post_id":75805119,"comment_id":133721295,"body_markdown":"*&quot;Yes, changing &quot;icon.jpg&quot; to &quot;src/icon.png&quot; fixed it&quot;* - No, it&#39;s just masked the bigger problem.  Don&#39;t use `File`, in your context, it&#39;s looking for a file in the CURRENT WORKING DIRECTORY, which IS NOT you &quot;src&quot; directory AND your &quot;src&quot; directory will NOT exist when your export the program.  Your image is now an EMBEDDED image, you MUST use `Class#getResource` to load it.","body":"<i>&quot;Yes, changing &quot;icon.jpg&quot; to &quot;src/icon.png&quot; fixed it&quot;</i> - No, it&#39;s just masked the bigger problem.  Don&#39;t use <code>File</code>, in your context, it&#39;s looking for a file in the CURRENT WORKING DIRECTORY, which IS NOT you &quot;src&quot; directory AND your &quot;src&quot; directory will NOT exist when your export the program.  Your image is now an EMBEDDED image, you MUST use <code>Class#getResource</code> to load it."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1679434283,"post_id":75805119,"comment_id":133721303,"body_markdown":"When you post your next question about why you can&#39;t load your images when your program is exported out to a jar, we will point you back to this question","body":"When you post your next question about why you can&#39;t load your images when your program is exported out to a jar, we will point you back to this question"}],"answers":[{"tags":[],"owner":{"account_id":9779820,"reputation":9719,"user_id":7248342,"display_name":"Thomas Fritsch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679436405,"creation_date":1679435606,"answer_id":75806656,"question_id":75805119,"body_markdown":"First mistake:  \r\nYour screenshot shows the file name &quot;icon.**png**&quot;,\r\nbut in your Java code you try to load &quot;icon.**jpg**&quot;.\r\n\r\nSecond mistake:  \r\nWhen you specify\r\n\r\n    File imageFile = new File(&quot;icon.png&quot;)\r\n\r\nthen the file is assumed to be in the *current* directory,\r\nwhich in your case is your project directory\r\n(i.e. the directory also containing your `src` and `bin` folder).\r\nBut that is not where your image file actually is.\r\n\r\nA safe way to load the image file from the same directory\r\nwhere your `.class`file is (i.e. the `bin` folder), is like this: \r\n\r\n    URL imageUrl = main.class.getResource(&quot;icon.png&quot;);\r\n    BufferedImage image = ImageIO.read(imageUrl);\r\n\r\nAnd be aware calling `getResource(...)` will give `null`\r\nif the file is not found.","title":"Java SwingGUI is broken","body":"<p>First mistake:<br />\nYour screenshot shows the file name &quot;icon.<strong>png</strong>&quot;,\nbut in your Java code you try to load &quot;icon.<strong>jpg</strong>&quot;.</p>\n<p>Second mistake:<br />\nWhen you specify</p>\n<pre><code>File imageFile = new File(&quot;icon.png&quot;)\n</code></pre>\n<p>then the file is assumed to be in the <em>current</em> directory,\nwhich in your case is your project directory\n(i.e. the directory also containing your <code>src</code> and <code>bin</code> folder).\nBut that is not where your image file actually is.</p>\n<p>A safe way to load the image file from the same directory\nwhere your <code>.class</code>file is (i.e. the <code>bin</code> folder), is like this:</p>\n<pre><code>URL imageUrl = main.class.getResource(&quot;icon.png&quot;);\nBufferedImage image = ImageIO.read(imageUrl);\n</code></pre>\n<p>And be aware calling <code>getResource(...)</code> will give <code>null</code>\nif the file is not found.</p>\n"}],"owner":{"account_id":27567542,"reputation":5,"user_id":21039414,"display_name":"Bilal Akol"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"answer_count":1,"score":-5,"last_activity_date":1679436405,"creation_date":1679423444,"question_id":75805119,"body_markdown":"My code is very simple, really there is no problem in writing my code. I&#39;m getting the file not found error as an error, but I&#39;m 100% sure the file path is correct, I&#39;ve checked hundreds of times. There are no other errors. Some different image upload methods give no error but as a result, the image never appears.\r\n\r\nChatGPT: can&#39;t fix.\r\n\r\nImage: 16x16, .png, 1.72KB              \r\nCompiler IDE: Eclipse\r\n```\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport java.awt.Color;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.ImageIcon;\r\n\r\npublic class main {\r\n    public static void main(String[] args) {\r\n        JFrame window = new JFrame(&quot;JavaTests&quot;);\r\n        window.setVisible(true);\r\n        window.setResizable(true);\r\n        window.setSize(800,600);\r\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        window.getContentPane().setBackground(Color.PINK);\r\n\r\n        try {\r\n            File imageFile = new File(&quot;icon.jpg&quot;);\r\n            BufferedImage image = ImageIO.read(imageFile);\r\n            JLabel label = new JLabel(new ImageIcon(image));\r\n            label.setSize(image.getWidth(), image.getHeight());\r\n            label.setBackground(Color.BLACK);\r\n            label.setOpaque(false);\r\n            window.add(label);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;LOG: &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nPath File:\r\n[![PATH FILES][1]][1]\r\n\r\nError Code\r\n[![ERROR CODE][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QXFTY.png\r\n  [2]: https://i.stack.imgur.com/yXc66.png","title":"Java SwingGUI is broken","body":"<p>My code is very simple, really there is no problem in writing my code. I'm getting the file not found error as an error, but I'm 100% sure the file path is correct, I've checked hundreds of times. There are no other errors. Some different image upload methods give no error but as a result, the image never appears.</p>\n<p>ChatGPT: can't fix.</p>\n<p>Image: 16x16, .png, 1.72KB<br />\nCompiler IDE: Eclipse</p>\n<pre><code>import javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\n\npublic class main {\n    public static void main(String[] args) {\n        JFrame window = new JFrame(&quot;JavaTests&quot;);\n        window.setVisible(true);\n        window.setResizable(true);\n        window.setSize(800,600);\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        window.getContentPane().setBackground(Color.PINK);\n\n        try {\n            File imageFile = new File(&quot;icon.jpg&quot;);\n            BufferedImage image = ImageIO.read(imageFile);\n            JLabel label = new JLabel(new ImageIcon(image));\n            label.setSize(image.getWidth(), image.getHeight());\n            label.setBackground(Color.BLACK);\n            label.setOpaque(false);\n            window.add(label);\n        } catch (Exception e) {\n            System.out.println(&quot;LOG: &quot; + e.getMessage());\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Path File:\n<a href=\"https://i.stack.imgur.com/QXFTY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QXFTY.png\" alt=\"PATH FILES\" /></a></p>\n<p>Error Code\n<a href=\"https://i.stack.imgur.com/yXc66.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yXc66.png\" alt=\"ERROR CODE\" /></a></p>\n"},{"tags":["java","keycloak","keycloak-services"],"answers":[{"tags":[],"owner":{"account_id":1449510,"reputation":48192,"user_id":1366871,"accept_rate":100,"display_name":"dreamcrash"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1679435963,"creation_date":1616835175,"answer_id":66829548,"question_id":66822016,"body_markdown":"Typically, what you can do is to first look at [Rest API Documentation][1] and the [Keycloak API][2]. \r\n\r\nAlternatively, and this *almost* always work, you just create the protocol Mapper using the Keycloak Admin API, for instance:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThen before clicking `Save`, open your browser developer network console and look at the network requests. Then click `save`:\r\n\r\nYou will have two post request, one for the token, another for the creation of the mapper:\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\nLook at the request payload, you will see something as:\r\n\r\n```json\r\n{\r\n  &quot;protocol&quot;: &quot;openid-connect&quot;,\r\n  &quot;config&quot;: {\r\n    &quot;multivalued&quot;: &quot;true&quot;,\r\n    &quot;id.token.claim&quot;: &quot;true&quot;,\r\n    &quot;access.token.claim&quot;: &quot;true&quot;,\r\n    &quot;userinfo.token.claim&quot;: &quot;true&quot;,\r\n    &quot;claim.name&quot;: &quot;asdas&quot;\r\n  },\r\n  &quot;name&quot;: &quot;asdas&quot;,\r\n  &quot;protocolMapper&quot;: &quot;oidc-usermodel-realm-role-mapper&quot;\r\n}\r\n```\r\n\r\nNow you can infer the options from there. Not ideal I know.\r\n\r\n\r\n  [1]: https://www.keycloak.org/docs-api/21.0.1/rest-api/index.html#_protocol_mappers_resource\r\n  [2]: https://www.keycloak.org/docs-api/21.0.1/javadocs/org/keycloak/representations/idm/ProtocolMapperRepresentation.html\r\n  [3]: https://i.stack.imgur.com/PCnSy.png\r\n  [4]: https://i.stack.imgur.com/2bNM7.png\r\n  [5]: https://i.stack.imgur.com/RYlf7.png","title":"Where are all of the Keycloak Protocol Mapper Config Options documented?","body":"<p>Typically, what you can do is to first look at <a href=\"https://www.keycloak.org/docs-api/21.0.1/rest-api/index.html#_protocol_mappers_resource\" rel=\"nofollow noreferrer\">Rest API Documentation</a> and the <a href=\"https://www.keycloak.org/docs-api/21.0.1/javadocs/org/keycloak/representations/idm/ProtocolMapperRepresentation.html\" rel=\"nofollow noreferrer\">Keycloak API</a>.</p>\n<p>Alternatively, and this <em>almost</em> always work, you just create the protocol Mapper using the Keycloak Admin API, for instance:</p>\n<p><a href=\"https://i.stack.imgur.com/PCnSy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PCnSy.png\" alt=\"enter image description here\" /></a></p>\n<p>Then before clicking <code>Save</code>, open your browser developer network console and look at the network requests. Then click <code>save</code>:</p>\n<p>You will have two post request, one for the token, another for the creation of the mapper:</p>\n<p><a href=\"https://i.stack.imgur.com/2bNM7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2bNM7.png\" alt=\"enter image description here\" /></a></p>\n<p>Look at the request payload, you will see something as:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;protocol&quot;: &quot;openid-connect&quot;,\n  &quot;config&quot;: {\n    &quot;multivalued&quot;: &quot;true&quot;,\n    &quot;id.token.claim&quot;: &quot;true&quot;,\n    &quot;access.token.claim&quot;: &quot;true&quot;,\n    &quot;userinfo.token.claim&quot;: &quot;true&quot;,\n    &quot;claim.name&quot;: &quot;asdas&quot;\n  },\n  &quot;name&quot;: &quot;asdas&quot;,\n  &quot;protocolMapper&quot;: &quot;oidc-usermodel-realm-role-mapper&quot;\n}\n</code></pre>\n<p>Now you can infer the options from there. Not ideal I know.</p>\n"},{"comments":[{"owner":{"account_id":9732203,"reputation":141,"user_id":9645322,"display_name":"Polem"},"score":1,"creation_date":1655967708,"post_id":70606333,"comment_id":128458435,"body_markdown":"hey jeremie, source?","body":"hey jeremie, source?"}],"tags":[],"owner":{"account_id":267838,"reputation":368,"user_id":556252,"display_name":"J&#233;r&#233;mie"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1641467951,"creation_date":1641467951,"answer_id":70606333,"question_id":66822016,"body_markdown":"The list for Keycloak 15 is the following (missing only the Pairwise Subject Identifier):\r\n\r\n- oidc-usersessionmodel-note-mapper  \r\n- oidc-group-membership-mapper       \r\n- oidc-usermodel-attribute-mapper    \r\n- oidc-usermodel-realm-role-mapper   \r\n- oidc-audience-mapper               \r\n- oidc-usermodel-property-mapper     \r\n- oidc-hardcoded-claim-mapper        \r\n- oidc-hardcoded-role-mapper         \r\n- oidc-allowed-origins-mapper        \r\n- oidc-audience-resolve-mapper       \r\n- oidc-claims-param-token-mapper     \r\n- oidc-usermodel-client-role-mapper  \r\n- oidc-full-name-mapper              \r\n- oidc-address-mapper                \r\n- oidc-role-name-mapper              \r\n","title":"Where are all of the Keycloak Protocol Mapper Config Options documented?","body":"<p>The list for Keycloak 15 is the following (missing only the Pairwise Subject Identifier):</p>\n<ul>\n<li>oidc-usersessionmodel-note-mapper</li>\n<li>oidc-group-membership-mapper</li>\n<li>oidc-usermodel-attribute-mapper</li>\n<li>oidc-usermodel-realm-role-mapper</li>\n<li>oidc-audience-mapper</li>\n<li>oidc-usermodel-property-mapper</li>\n<li>oidc-hardcoded-claim-mapper</li>\n<li>oidc-hardcoded-role-mapper</li>\n<li>oidc-allowed-origins-mapper</li>\n<li>oidc-audience-resolve-mapper</li>\n<li>oidc-claims-param-token-mapper</li>\n<li>oidc-usermodel-client-role-mapper</li>\n<li>oidc-full-name-mapper</li>\n<li>oidc-address-mapper</li>\n<li>oidc-role-name-mapper</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":26202117,"reputation":33,"user_id":19882324,"display_name":"Cheryl Danner"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669042320,"creation_date":1669042320,"answer_id":74520778,"question_id":66822016,"body_markdown":"I found myself here as I was looking for documentation about the different Keycloak protocol mapper types, and for anyone else who is doing the same, I can confirm that it&#39;s difficult.\r\n\r\nThe [protocol mappers section][1] in the Keycloak Server Admin guide is pretty clear that it is not going to walk users through all of the details. See the excerpt below (emphasis mine).\r\n\r\n&gt; Protocol mappers map items (such as an email address, for example) to\r\n&gt; a specific claim in the identity and access token. **The function of a\r\n&gt; mapper should be self-explanatory from its name.** You add\r\n&gt; pre-configured mappers by clicking Add Builtin.\r\n&gt; \r\n&gt; Each mapper has a set of common settings. Additional settings are\r\n&gt; available, depending on the mapper type. Click Edit next to a mapper\r\n&gt; to access the configuration screen to adjust these settings.\r\n\r\n[This][2] is the closest thing I&#39;ve found to documentation of the different protocol mapper types. \r\n\r\nI like @dreamcrash&#39;s approach to the problem.\r\n\r\n  [1]: https://www.keycloak.org/docs/latest/server_admin/#_protocol-mappers\r\n  [2]: https://www.keycloak.org/docs-api/20.0.1/javadocs/org/keycloak/protocol/oidc/mappers/package-summary.html","title":"Where are all of the Keycloak Protocol Mapper Config Options documented?","body":"<p>I found myself here as I was looking for documentation about the different Keycloak protocol mapper types, and for anyone else who is doing the same, I can confirm that it's difficult.</p>\n<p>The <a href=\"https://www.keycloak.org/docs/latest/server_admin/#_protocol-mappers\" rel=\"nofollow noreferrer\">protocol mappers section</a> in the Keycloak Server Admin guide is pretty clear that it is not going to walk users through all of the details. See the excerpt below (emphasis mine).</p>\n<blockquote>\n<p>Protocol mappers map items (such as an email address, for example) to\na specific claim in the identity and access token. <strong>The function of a\nmapper should be self-explanatory from its name.</strong> You add\npre-configured mappers by clicking Add Builtin.</p>\n<p>Each mapper has a set of common settings. Additional settings are\navailable, depending on the mapper type. Click Edit next to a mapper\nto access the configuration screen to adjust these settings.</p>\n</blockquote>\n<p><a href=\"https://www.keycloak.org/docs-api/20.0.1/javadocs/org/keycloak/protocol/oidc/mappers/package-summary.html\" rel=\"nofollow noreferrer\">This</a> is the closest thing I've found to documentation of the different protocol mapper types.</p>\n<p>I like @dreamcrash's approach to the problem.</p>\n"}],"owner":{"account_id":7167552,"reputation":869,"user_id":5476186,"display_name":"Austin Brown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7263,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":66829548,"answer_count":3,"score":5,"last_activity_date":1679435963,"creation_date":1616781261,"question_id":66822016,"body_markdown":"I&#39;m using Keycloak&#39;s Java `keycloak-admin-client` and I&#39;m wanting to set up some protocol mappers for my realm&#39;s client.\r\n\r\nThe Java API exposes this class to create a protocol mapper and then the following method to set the config options:\r\n``` lang-java\r\n    ProtocolMapperRepresentation protocolMapperRep = new ProtocolMapperRepresentation();\r\n    protocolMapperRep.setConfig(Map.of(&quot;some.mapper.config.option&quot;, &quot;mapper-value&quot;));\r\n```\r\n\r\nI&#39;ve looked at the javadoc documentation and it&#39;s, well, completely useless unfortunately. :( I have not looked at the rest-api documentation, but I just looked at it and it doesn&#39;t do anything to enumerate the config options for the protocol mapper representation: https://www.keycloak.org/docs-api/12.0/rest-api/index.html#_protocolmapperrepresentation\r\n\r\nI saw a few options from another StackOverflow question here: https://stackoverflow.com/questions/47158634/add-protocol-mapper-to-keycloak-using-kcadm-sh\r\n\r\nHowever, there *has* to be a better place where these are documented.","title":"Where are all of the Keycloak Protocol Mapper Config Options documented?","body":"<p>I'm using Keycloak's Java <code>keycloak-admin-client</code> and I'm wanting to set up some protocol mappers for my realm's client.</p>\n<p>The Java API exposes this class to create a protocol mapper and then the following method to set the config options:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    ProtocolMapperRepresentation protocolMapperRep = new ProtocolMapperRepresentation();\n    protocolMapperRep.setConfig(Map.of(&quot;some.mapper.config.option&quot;, &quot;mapper-value&quot;));\n</code></pre>\n<p>I've looked at the javadoc documentation and it's, well, completely useless unfortunately. :( I have not looked at the rest-api documentation, but I just looked at it and it doesn't do anything to enumerate the config options for the protocol mapper representation: <a href=\"https://www.keycloak.org/docs-api/12.0/rest-api/index.html#_protocolmapperrepresentation\" rel=\"nofollow noreferrer\">https://www.keycloak.org/docs-api/12.0/rest-api/index.html#_protocolmapperrepresentation</a></p>\n<p>I saw a few options from another StackOverflow question here: <a href=\"https://stackoverflow.com/questions/47158634/add-protocol-mapper-to-keycloak-using-kcadm-sh\">Add protocol-mapper to keycloak using kcadm.sh</a></p>\n<p>However, there <em>has</em> to be a better place where these are documented.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"owner":{"account_id":28080291,"reputation":1,"user_id":21451488,"display_name":"Callum Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679435545,"creation_date":1679435501,"question_id":75806643,"body_markdown":"New to spring boot and having a go at building a REST API. Using a model - repository - service - controller pattern. I am currently getting only the &quot;id&quot; field returned in the response to the get request, but can see clearly in the debug that all fields are getting returned as a object. What am i missing in the UserModel?\r\n\r\nUser\r\n\r\n```\r\npackage com.example.models;\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n    private String firstName;\r\n    private String lastName;\r\n\r\n    public User() {\r\n    }\r\n\r\n    public User(int id, String firstName, String lastName) {\r\n        this.id = id;\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n}\r\n\r\n```\r\n\r\nUserController.java\r\n\r\n\r\n```\r\npackage com.example.controllers;\r\nimport com.example.models.User;\r\nimport com.example.services.UserService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\nimport java.util.NoSuchElementException;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/users&quot;)\r\npublic class UserController {\r\n    @Autowired\r\n    UserService userService;\r\n\r\n    @GetMapping(&quot;&quot;)\r\n    public List&lt;User&gt; list() {\r\n        List&lt;User&gt; test = userService.listAllUser();\r\n        return userService.listAllUser();\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;User&gt; get(@PathVariable Integer id) {\r\n        try {\r\n            User user = userService.getUser(id);\r\n            return new ResponseEntity&lt;User&gt;(user, HttpStatus.OK);\r\n        } catch (NoSuchElementException e) {\r\n            return new ResponseEntity&lt;User&gt;(HttpStatus.NOT_FOUND);\r\n        }\r\n    }\r\n    @PostMapping(&quot;/&quot;)\r\n    public void add(@RequestBody User user) {\r\n        userService.saveUser(user);\r\n    }\r\n    @PutMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;?&gt; update(@RequestBody User user, @PathVariable Integer id) {\r\n        try {\r\n            User existUser = userService.getUser(id);\r\n            userService.saveUser(user);\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n        } catch (NoSuchElementException e) {\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);\r\n        }\r\n    }\r\n    @DeleteMapping(&quot;/{id}&quot;)\r\n    public void delete(@PathVariable Integer id) {\r\n        userService.deleteUser(id);\r\n    }\r\n\r\n```\r\n\r\nUser Service\r\n\r\n\r\n```\r\npackage com.example.services;\r\nimport com.example.models.User;\r\nimport com.example.repositorys.UserRepository;\r\nimport jakarta.transaction.Transactional;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\n@Service\r\n@Transactional\r\npublic class UserService {\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    public List&lt;User&gt; listAllUser() {\r\n        return userRepository.findAll();\r\n    }\r\n\r\n    public void saveUser(User user) {\r\n        userRepository.save(user);\r\n    }\r\n\r\n    public User getUser(Integer id) {\r\n        return userRepository.findById(id).get();\r\n    }\r\n\r\n    public void deleteUser(Integer id) {\r\n        userRepository.deleteById(id);\r\n    }\r\n}\r\n```\r\n\r\n[intellij debug](https://i.stack.imgur.com/eeILh.png)\r\n[postman response](https://i.stack.imgur.com/mdFeQ.png)\r\n\r\n\r\n\r\n\r\nWas expecting all fields &quot;id, firstname, lastname&quot; to be returned","title":"JSON returned from controller only showing ID field","body":"<p>New to spring boot and having a go at building a REST API. Using a model - repository - service - controller pattern. I am currently getting only the &quot;id&quot; field returned in the response to the get request, but can see clearly in the debug that all fields are getting returned as a object. What am i missing in the UserModel?</p>\n<p>User</p>\n<pre><code>package com.example.models;\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String firstName;\n    private String lastName;\n\n    public User() {\n    }\n\n    public User(int id, String firstName, String lastName) {\n        this.id = id;\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n}\n\n</code></pre>\n<p>UserController.java</p>\n<pre><code>package com.example.controllers;\nimport com.example.models.User;\nimport com.example.services.UserService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.NoSuchElementException;\n\n@RestController\n@RequestMapping(&quot;/api/users&quot;)\npublic class UserController {\n    @Autowired\n    UserService userService;\n\n    @GetMapping(&quot;&quot;)\n    public List&lt;User&gt; list() {\n        List&lt;User&gt; test = userService.listAllUser();\n        return userService.listAllUser();\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;User&gt; get(@PathVariable Integer id) {\n        try {\n            User user = userService.getUser(id);\n            return new ResponseEntity&lt;User&gt;(user, HttpStatus.OK);\n        } catch (NoSuchElementException e) {\n            return new ResponseEntity&lt;User&gt;(HttpStatus.NOT_FOUND);\n        }\n    }\n    @PostMapping(&quot;/&quot;)\n    public void add(@RequestBody User user) {\n        userService.saveUser(user);\n    }\n    @PutMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;?&gt; update(@RequestBody User user, @PathVariable Integer id) {\n        try {\n            User existUser = userService.getUser(id);\n            userService.saveUser(user);\n            return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n        } catch (NoSuchElementException e) {\n            return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);\n        }\n    }\n    @DeleteMapping(&quot;/{id}&quot;)\n    public void delete(@PathVariable Integer id) {\n        userService.deleteUser(id);\n    }\n\n</code></pre>\n<p>User Service</p>\n<pre><code>package com.example.services;\nimport com.example.models.User;\nimport com.example.repositorys.UserRepository;\nimport jakarta.transaction.Transactional;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n@Service\n@Transactional\npublic class UserService {\n    @Autowired\n    private UserRepository userRepository;\n    public List&lt;User&gt; listAllUser() {\n        return userRepository.findAll();\n    }\n\n    public void saveUser(User user) {\n        userRepository.save(user);\n    }\n\n    public User getUser(Integer id) {\n        return userRepository.findById(id).get();\n    }\n\n    public void deleteUser(Integer id) {\n        userRepository.deleteById(id);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/eeILh.png\" rel=\"nofollow noreferrer\">intellij debug</a>\n<a href=\"https://i.stack.imgur.com/mdFeQ.png\" rel=\"nofollow noreferrer\">postman response</a></p>\n<p>Was expecting all fields &quot;id, firstname, lastname&quot; to be returned</p>\n"},{"tags":["java","testing","mockito","quarkus"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1679415464,"post_id":75802872,"comment_id":133716481,"body_markdown":"this call `when(service.get(anyString())` is missing the `anyInt()` parameters","body":"this call <code>when(service.get(anyString())</code> is missing the <code>anyInt()</code> parameters"},{"owner":{"account_id":9614104,"reputation":47,"user_id":10960565,"display_name":"Даниил "},"score":0,"creation_date":1679421654,"post_id":75802872,"comment_id":133718370,"body_markdown":"Yes. Changed. Just typo when created post","body":"Yes. Changed. Just typo when created post"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1679435464,"post_id":75802872,"comment_id":133721513,"body_markdown":"It should complain that you can&#39;t use `when()` on your service because that&#39;s not a mock in the first place, and shouldn&#39;t be because that&#39;s your subject under test.","body":"It should complain that you can&#39;t use <code>when()</code> on your service because that&#39;s not a mock in the first place, and shouldn&#39;t be because that&#39;s your subject under test."}],"answers":[{"tags":[],"owner":{"account_id":1642943,"reputation":19407,"user_id":1515052,"accept_rate":90,"display_name":"Simulant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679435093,"creation_date":1679435093,"answer_id":75806596,"question_id":75802872,"body_markdown":"A mock, which you are using for your service, overwrites per default all methods with an empty method body and returns a default value e.g. `null`. So the mock of your *get()*  method works, but your *sendRequest* method never calls it, as it is overwritten by an empty method. So this is what happens when you call `sendRequest` on your mock.\r\n\r\nWhat you can do to fix this is to configure the mock to call the actual implementation of your class: \r\n\r\n    when(service.sendRequest(1, &quot;name&quot;)).thenCallRealMethod()","title":"Quarkus. How to mock method inside the method","body":"<p>A mock, which you are using for your service, overwrites per default all methods with an empty method body and returns a default value e.g. <code>null</code>. So the mock of your <em>get()</em>  method works, but your <em>sendRequest</em> method never calls it, as it is overwritten by an empty method. So this is what happens when you call <code>sendRequest</code> on your mock.</p>\n<p>What you can do to fix this is to configure the mock to call the actual implementation of your class:</p>\n<pre><code>when(service.sendRequest(1, &quot;name&quot;)).thenCallRealMethod()\n</code></pre>\n"}],"owner":{"account_id":9614104,"reputation":47,"user_id":10960565,"display_name":"Даниил "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75806596,"answer_count":1,"score":1,"last_activity_date":1679435262,"creation_date":1679410923,"question_id":75802872,"body_markdown":"The question is how to mock the method inside another method in the class.  \r\nFor example I have service:\r\n\r\n    @Getter\r\n    @ApplicationScoped\r\n    public class Service{\r\n      public byte[] sendRequest(Integer id, String name){\r\n        try {\r\n          return get(id, name);\r\n        } catch (Exteption exception) {\r\n          throw new MyException(&quot;Error during get data &quot; + exception.getMEssage());\r\n        }  \r\n      }\r\n\r\n      public byte[] get(Integer id, String name){\r\n        ...some code...\r\n      }\r\n    }\r\n\r\nand test class\r\n\r\n    @QuakrusTest\r\n    public class ServiceTest{\r\n      \r\n      @InjectMock\r\n      Service service;\r\n    \r\n      @Test\r\n      void test(){\r\n        when(service.get(anyInt(), anyString())).thenThrow(new RuntimeException(&quot;MyError&quot;);\r\n        MyException myExpection = assertThrows(MyException .class, () -&gt; service.sendRequest(1, &quot;name&quot;));\r\n        assertEquals(&quot;Error during get data MyError&quot;, myExpection.getMessage());\r\n      }\r\n    }\r\n\r\nSo I need to mock the *get()* method to throw an expection to check if it is caught by my try/catch-block inside `sendRequest` and that the message of MyException is correct. \r\nBut my main problem is that *when(service.get(anyString())* doesn&#39;t work. \r\n\r\nThe ressult is \r\n\r\n&gt; Expected MyException to be thrown but nothing was thrown.","title":"Quarkus. How to mock method inside the method","body":"<p>The question is how to mock the method inside another method in the class.<br />\nFor example I have service:</p>\n<pre><code>@Getter\n@ApplicationScoped\npublic class Service{\n  public byte[] sendRequest(Integer id, String name){\n    try {\n      return get(id, name);\n    } catch (Exteption exception) {\n      throw new MyException(&quot;Error during get data &quot; + exception.getMEssage());\n    }  \n  }\n\n  public byte[] get(Integer id, String name){\n    ...some code...\n  }\n}\n</code></pre>\n<p>and test class</p>\n<pre><code>@QuakrusTest\npublic class ServiceTest{\n  \n  @InjectMock\n  Service service;\n\n  @Test\n  void test(){\n    when(service.get(anyInt(), anyString())).thenThrow(new RuntimeException(&quot;MyError&quot;);\n    MyException myExpection = assertThrows(MyException .class, () -&gt; service.sendRequest(1, &quot;name&quot;));\n    assertEquals(&quot;Error during get data MyError&quot;, myExpection.getMessage());\n  }\n}\n</code></pre>\n<p>So I need to mock the <em>get()</em> method to throw an expection to check if it is caught by my try/catch-block inside <code>sendRequest</code> and that the message of MyException is correct.\nBut my main problem is that <em>when(service.get(anyString())</em> doesn't work.</p>\n<p>The ressult is</p>\n<blockquote>\n<p>Expected MyException to be thrown but nothing was thrown.</p>\n</blockquote>\n"},{"tags":["java","list","object","return-type","object-type"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1679433827,"post_id":75806359,"comment_id":133721197,"body_markdown":"I think there&#39;s a problem with the definition of `tasks`.  Can you show us that variable definition?","body":"I think there&#39;s a problem with the definition of <code>tasks</code>.  Can you show us that variable definition?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1679433875,"post_id":75806359,"comment_id":133721214,"body_markdown":"Alternately, after the final brace of the `for` loop, you should return `null` if no object is found.","body":"Alternately, after the final brace of the <code>for</code> loop, you should return <code>null</code> if no object is found."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1679434569,"post_id":75806359,"comment_id":133721362,"body_markdown":"The problem is that your method **must** return something every time it is called. The way it is currently written it doesn&#39;t return anything if no task with the specific `taskID` that you pass as parameter is in the list - but even then your method **must** return something (or throw an exception).","body":"The problem is that your method <b>must</b> return something every time it is called. The way it is currently written it doesn&#39;t return anything if no task with the specific <code>taskID</code> that you pass as parameter is in the list - but even then your method <b>must</b> return something (or throw an exception)."}],"answers":[{"tags":[],"owner":{"account_id":28080092,"reputation":66,"user_id":21451316,"display_name":"Mitsuo Mori"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679434025,"creation_date":1679434025,"answer_id":75806483,"question_id":75806359,"body_markdown":"Instead of using &#39;==&#39; to compare strings, you can use the equals() method.\r\nThis is because &#39;==&#39; compares object references, not the contents of the strings themselves.\r\n\r\n    public Task getTask(String taskID) {\r\n        for (Task item : tasks) {\r\n            if (item.getTaskID().equals(taskID)) {\r\n                return item;\r\n            }\r\n        }\r\n        return null;\r\n    }","title":"How can I make a java method return an object found in a list of objects?","body":"<p>Instead of using '==' to compare strings, you can use the equals() method.\nThis is because '==' compares object references, not the contents of the strings themselves.</p>\n<pre><code>public Task getTask(String taskID) {\n    for (Task item : tasks) {\n        if (item.getTaskID().equals(taskID)) {\n            return item;\n        }\n    }\n    return null;\n}\n</code></pre>\n"}],"owner":{"account_id":10185517,"reputation":3,"user_id":16409542,"display_name":"Fooze666"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679434794,"accepted_answer_id":75806483,"answer_count":1,"score":0,"last_activity_date":1679434025,"creation_date":1679432851,"question_id":75806359,"body_markdown":"I have this code:\r\n\r\n\r\n```\r\n\tpublic Task getTask(String taskID) {\r\n\t\t\r\n\t\tfor (Task item : tasks) {\r\n\t\t\tif (item.getTaskID() == taskID) {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\nTask is an object type, and &quot;tasks&quot; is a list containting all objects of type Task.\r\n\r\nI want to iterate through the list and find the object where the taskID matches. This seems to work, but when I try to test or run, Eclipse tells me that this method &quot;must return an a result of type Task&quot;.\r\n\r\nI&#39;m not sure what I have wrong. If each &quot;item&quot; is an item in the list, shouldn&#39;t it be of type Task?\r\n\r\nI&#39;ve tried iterating through the list by index numbers as well and that doesn&#39;t seem to work either.","title":"How can I make a java method return an object found in a list of objects?","body":"<p>I have this code:</p>\n<pre><code>    public Task getTask(String taskID) {\n        \n        for (Task item : tasks) {\n            if (item.getTaskID() == taskID) {\n                return item;\n            }\n        }\n    }\n</code></pre>\n<p>Task is an object type, and &quot;tasks&quot; is a list containting all objects of type Task.</p>\n<p>I want to iterate through the list and find the object where the taskID matches. This seems to work, but when I try to test or run, Eclipse tells me that this method &quot;must return an a result of type Task&quot;.</p>\n<p>I'm not sure what I have wrong. If each &quot;item&quot; is an item in the list, shouldn't it be of type Task?</p>\n<p>I've tried iterating through the list by index numbers as well and that doesn't seem to work either.</p>\n"},{"tags":["java","maven","java-8","maven-3"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":6,"creation_date":1578312250,"post_id":59611777,"comment_id":105386587,"body_markdown":"Please show your pom file: `-parameters` this seemed to be an issue..?","body":"Please show your pom file: <code>-parameters</code> this seemed to be an issue..?"}],"answers":[{"comments":[{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":1,"creation_date":1578314427,"post_id":59612291,"comment_id":105387602,"body_markdown":"The source would not be compiled at all with no `JAVA_HOME`.","body":"The source would not be compiled at all with no <code>JAVA_HOME</code>."},{"owner":{"account_id":6850437,"reputation":1477,"user_id":5267773,"accept_rate":43,"display_name":"Shalika"},"score":0,"creation_date":1578315561,"post_id":59612291,"comment_id":105388176,"body_markdown":"I have set the JAVA_HOME to 1.8","body":"I have set the JAVA_HOME to 1.8"}],"tags":[],"owner":{"account_id":3504923,"reputation":377,"user_id":2930657,"display_name":"ARPAN CHAKARVARTY"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1578314354,"creation_date":1578314354,"answer_id":59612291,"question_id":59611777,"body_markdown":"You have not set the **JAVA_HOME**. Please set the **JAVA_HOME** first and than execute the same command. ","title":"mvn clean install failed","body":"<p>You have not set the <strong>JAVA_HOME</strong>. Please set the <strong>JAVA_HOME</strong> first and than execute the same command. </p>\n"},{"comments":[{"owner":{"account_id":6850437,"reputation":1477,"user_id":5267773,"accept_rate":43,"display_name":"Shalika"},"score":0,"creation_date":1578377373,"post_id":59613042,"comment_id":105408802,"body_markdown":"I have change the javac version in machine and inteljidea to 1.8.but it always get the javac version as 1.7 in inteljidea.Is there a way to change javac version in inteljidea to 1.8.","body":"I have change the javac version in machine and inteljidea to 1.8.but it always get the javac version as 1.7 in inteljidea.Is there a way to change javac version in inteljidea to 1.8."},{"owner":{"account_id":6850437,"reputation":1477,"user_id":5267773,"accept_rate":43,"display_name":"Shalika"},"score":0,"creation_date":1578420118,"post_id":59613042,"comment_id":105429650,"body_markdown":"Thank you very much !! It was the issue .","body":"Thank you very much !! It was the issue ."}],"tags":[],"owner":{"account_id":1511115,"reputation":2926,"user_id":1413222,"display_name":"devwebcl"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1578332913,"creation_date":1578317545,"answer_id":59613042,"question_id":59611777,"body_markdown":"All points to be something is wrong in your JDK 1.8. (it is being compiled with JDK7 or older)\r\n\r\nA simple test with JDK 7 &amp; 8 respectively:\r\n\r\n(look the output in version 7:  **javac: invalid flag: -parameters**)\r\n\r\n    $ javac -version\r\n    javac 1.7.0_201\r\n    $ javac -parameters\r\n    javac: invalid flag: -parameters\r\n    Usage: javac &lt;options&gt; &lt;source files&gt;\r\n    use -help for a list of possible options\r\n\r\n\r\n    $ javac -version\r\n    javac 1.8.0_191\r\n    $ javac -parameters\r\n    javac: no source files\r\n    Usage: javac &lt;options&gt; &lt;source files&gt;\r\n    use -help for a list of possible options\r\n\r\n\r\n\r\n","title":"mvn clean install failed","body":"<p>All points to be something is wrong in your JDK 1.8. (it is being compiled with JDK7 or older)</p>\n\n<p>A simple test with JDK 7 &amp; 8 respectively:</p>\n\n<p>(look the output in version 7:  <strong>javac: invalid flag: -parameters</strong>)</p>\n\n<pre><code>$ javac -version\njavac 1.7.0_201\n$ javac -parameters\njavac: invalid flag: -parameters\nUsage: javac &lt;options&gt; &lt;source files&gt;\nuse -help for a list of possible options\n\n\n$ javac -version\njavac 1.8.0_191\n$ javac -parameters\njavac: no source files\nUsage: javac &lt;options&gt; &lt;source files&gt;\nuse -help for a list of possible options\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":1,"creation_date":1679345342,"post_id":75794717,"comment_id":133702393,"body_markdown":"Please phrase this as an explained conditional answer, in order to avoid the impression of asking a clarification question instead of answering (for which a comment should be used instead of an answer, compare https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead ). For example like &quot;If your problem is ... then the solution is to .... because .... .&quot;","body":"Please phrase this as an explained conditional answer, in order to avoid the impression of asking a clarification question instead of answering (for which a comment should be used instead of an answer, compare <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\" title=\"why do i need 50 reputation to comment what can i do instead\">meta.stackexchange.com/questions/214173/&hellip;</a> ). For example like &quot;If your problem is ... then the solution is to .... because .... .&quot;"}],"tags":[],"owner":{"account_id":14543237,"reputation":49,"user_id":10504247,"display_name":"Apolinaire Nguemo"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1679433968,"creation_date":1679341953,"answer_id":75794717,"question_id":59611777,"body_markdown":"You must verify your java version and configuration\r\n\r\nin linux system execut this command : java --version","title":"mvn clean install failed","body":"<p>You must verify your java version and configuration</p>\n<p>in linux system execut this command : java --version</p>\n"}],"owner":{"account_id":6850437,"reputation":1477,"user_id":5267773,"accept_rate":43,"display_name":"Shalika"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2065,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59613042,"answer_count":3,"score":0,"last_activity_date":1679433968,"creation_date":1578312184,"question_id":59611777,"body_markdown":"This is the pom file.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.acs&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;acs2.0&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;acs2.0&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;java-jwt.version&gt;3.4.0&lt;/java-jwt.version&gt;\r\n    \t\t&lt;jackson.version&gt;2.9.7&lt;/jackson.version&gt;\r\n    \t\t&lt;gson.version&gt;2.8.5&lt;/gson.version&gt;\r\n    \t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    \t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.16.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.11&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.60&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${gson.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${java-jwt.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n                &lt;version&gt;4.3.11.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;9.0.10&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.5.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.4.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.7&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jasperreports-fonts&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n    \r\nThis is the error message.\r\n\r\n    [INFO] ---------------------------&lt; com.acs:acs2.0 &gt;---------------------------\r\n    [INFO] Building acs2.0 0.0.1-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO]\r\n    [INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ acs2.0 ---\r\n    [INFO] Deleting D:\\EPIC_Projects\\EPIC_ACS_2.0\\server\\target\r\n    [INFO]\r\n    [INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ acs2.0 ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Copying 1 resource\r\n    [INFO] Copying 3 resources\r\n    [INFO]\r\n    [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ acs2.0 ---\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] Compiling 139 source files to D:\\EPIC_Projects\\EPIC_ACS_2.0\\server\\target\\classes\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  3.477 s\r\n    [INFO] Finished at: 2020-01-06T17:23:09+05:30\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project acs2.0: Fatal error compiling: invalid flag: -parameters -&gt; [\r\n    Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n       \r\n\r\nIn above i added the pom.xml file and error message.\r\nI have use java 1.8 with maven 3.6.1 version.I have set the JAVA_HOME to 1.8 .The project build failed with following error.\r\nIs any one can describe how to fix this issue. it will be great helpful. Thanks in advance.\r\n","title":"mvn clean install failed","body":"<p>This is the pom file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.acs&lt;/groupId&gt;\n    &lt;artifactId&gt;acs2.0&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;acs2.0&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;java-jwt.version&gt;3.4.0&lt;/java-jwt.version&gt;\n        &lt;jackson.version&gt;2.9.7&lt;/jackson.version&gt;\n        &lt;gson.version&gt;2.8.5&lt;/gson.version&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;6.0.16.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n            &lt;version&gt;1.11&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.60&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;${gson.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n            &lt;version&gt;${java-jwt.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n            &lt;version&gt;4.3.11.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;9.0.10&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n            &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n            &lt;version&gt;5.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\n            &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\n            &lt;version&gt;6.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;3.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\n            &lt;artifactId&gt;jasperreports-fonts&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>This is the error message.</p>\n\n<pre><code>[INFO] ---------------------------&lt; com.acs:acs2.0 &gt;---------------------------\n[INFO] Building acs2.0 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ acs2.0 ---\n[INFO] Deleting D:\\EPIC_Projects\\EPIC_ACS_2.0\\server\\target\n[INFO]\n[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ acs2.0 ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 1 resource\n[INFO] Copying 3 resources\n[INFO]\n[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ acs2.0 ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 139 source files to D:\\EPIC_Projects\\EPIC_ACS_2.0\\server\\target\\classes\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  3.477 s\n[INFO] Finished at: 2020-01-06T17:23:09+05:30\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project acs2.0: Fatal error compiling: invalid flag: -parameters -&gt; [\nHelp 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n\n<p>In above i added the pom.xml file and error message.\nI have use java 1.8 with maven 3.6.1 version.I have set the JAVA_HOME to 1.8 .The project build failed with following error.\nIs any one can describe how to fix this issue. it will be great helpful. Thanks in advance.</p>\n"},{"tags":["java","spring-boot","heroku"],"owner":{"account_id":28079768,"reputation":1,"user_id":21451036,"display_name":"Grzechu7"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":736,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679432412,"creation_date":1679432412,"question_id":75806285,"body_markdown":"When I try load java kod from github to Heroku I have this error : Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project curtainRod: Fatal error compiling: invalid target release: 17.\r\n\r\nMy  mvn --version is\r\nApache Maven 3.8.6 (...)\r\nMaven home: C:\\\\A\\_\\\\Java\\\\Maven\\\\apache-maven-3.8.6\r\nJava version: 17.0.6, vendor: Oracle Corporation, runtime: C:\\\\Program Files\\\\Java\\\\jdk-17\r\n\r\nplase help to solve this problem\r\nGrzegorz :-)\r\n\r\nmy pom.xml\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\nI change my java version from 16 to 17 and add to pom.xml plugin  org.apache.maven.plugins\r\n\r\n Heroku support java version 17.0.6\r\n\r\nbut I still have this problem, place help to solve this","title":"Failed to execute goal org.apache.maven.plugins: invalid target release: 17","body":"<p>When I try load java kod from github to Heroku I have this error : Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project curtainRod: Fatal error compiling: invalid target release: 17.</p>\n<p>My  mvn --version is\nApache Maven 3.8.6 (...)\nMaven home: C:\\A_\\Java\\Maven\\apache-maven-3.8.6\nJava version: 17.0.6, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk-17</p>\n<p>plase help to solve this problem\nGrzegorz :-)</p>\n<p>my pom.xml</p>\n\n<p>I change my java version from 16 to 17 and add to pom.xml plugin  org.apache.maven.plugins</p>\n<p>Heroku support java version 17.0.6</p>\n<p>but I still have this problem, place help to solve this</p>\n"},{"tags":["java","gradle","mp3","mp3agic"],"answers":[{"tags":[],"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679432307,"creation_date":1679432307,"answer_id":75806274,"question_id":75771568,"body_markdown":"Fixed it:\r\n\r\n```\r\nimplementation &#39;org:jaudiotagger:2.0.3&#39;\r\n```\r\n\r\n```\r\n    public void upload(MultipartFile file){\r\n        // ....\r\n        String fileName = file.getOriginalFilename();\r\n        if (&quot;mp3&quot;.equals(extension)) {\r\n            try {\r\n                File tempFile = File.createTempFile(&quot;temp&quot;, &quot;.mp3&quot;);\r\n                file.transferTo(tempFile);\r\n                AudioFile audioFile = AudioFileIO.read(tempFile);\r\n                sampleRate = audioFile.getAudioHeader().getSampleRateAsNumber();\r\n                duration = audioFile.getAudioHeader().getTrackLength();\r\n            } catch (Exception e) {\r\n                throw new Mp3Exception(&quot;Couldn&#39;t get mp3 fields: &quot; + e.getMessage())\r\n            }\r\n        }\r\n        // ....\r\n    }\r\n```","title":"mp3agic library java.io.IOException: Cannot delete temporary mp3 file from \\Tomcat\\localhost\\ROOT\\file.tmp","body":"<p>Fixed it:</p>\n<pre><code>implementation 'org:jaudiotagger:2.0.3'\n</code></pre>\n<pre><code>    public void upload(MultipartFile file){\n        // ....\n        String fileName = file.getOriginalFilename();\n        if (&quot;mp3&quot;.equals(extension)) {\n            try {\n                File tempFile = File.createTempFile(&quot;temp&quot;, &quot;.mp3&quot;);\n                file.transferTo(tempFile);\n                AudioFile audioFile = AudioFileIO.read(tempFile);\n                sampleRate = audioFile.getAudioHeader().getSampleRateAsNumber();\n                duration = audioFile.getAudioHeader().getTrackLength();\n            } catch (Exception e) {\n                throw new Mp3Exception(&quot;Couldn't get mp3 fields: &quot; + e.getMessage())\n            }\n        }\n        // ....\n    }\n</code></pre>\n"}],"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":378,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75806274,"answer_count":1,"score":1,"last_activity_date":1679432307,"creation_date":1679081791,"question_id":75771568,"body_markdown":"The code **works completly fine** but I get this exception:\r\n\r\n```\r\nCaused by: java.io.IOException: Cannot delete \r\nC:\\Users\\noob234\\AppData\\Local\\Temp\\tomcat.8080.5659248991534133251\\work\\Tomcat\\localhost\\ROOT\\upload_1723fa92_3db6_497a_9bdc_ac298b991fc8_00000000.tmp\r\n```\r\n\r\nI tried to somehow delete it or just add a sleep for one second, but unfortunatley I can&#39;t get rid of it.\r\n\r\nI am trying to get some fields from a multipart file. That multipart file is a mp3 file.\r\nHere is a snippet of the code:\r\n\r\n```\r\npublic void upload (MultipartFile file){\r\n// ....\r\n\r\nString fileName = file.getOriginalFilename();\r\nif (&quot;mp3&quot;.equals(extension)) {\r\n            try {\r\n                Mp3File mp3file = new Mp3File(fileName);\r\n                sampleRate = mp3file.getSampleRate();\r\n            } catch (Exception e) {\r\n                throw new Mp3Exception(&quot;Couldn&#39;t get mp3 fields: &quot; + e.getMessage())\r\n            }\r\n    }\r\n\r\n// ....\r\n```\r\n\r\nPlease keep in mind that I use in this project Java 8 and Gradle. Here is the dependency that I use:\r\n\r\n```\r\n\timplementation &#39;com.mpatric:mp3agic:0.9.1&#39;\r\n```\r\n\r\n","title":"mp3agic library java.io.IOException: Cannot delete temporary mp3 file from \\Tomcat\\localhost\\ROOT\\file.tmp","body":"<p>The code <strong>works completly fine</strong> but I get this exception:</p>\n<pre><code>Caused by: java.io.IOException: Cannot delete \nC:\\Users\\noob234\\AppData\\Local\\Temp\\tomcat.8080.5659248991534133251\\work\\Tomcat\\localhost\\ROOT\\upload_1723fa92_3db6_497a_9bdc_ac298b991fc8_00000000.tmp\n</code></pre>\n<p>I tried to somehow delete it or just add a sleep for one second, but unfortunatley I can't get rid of it.</p>\n<p>I am trying to get some fields from a multipart file. That multipart file is a mp3 file.\nHere is a snippet of the code:</p>\n<pre><code>public void upload (MultipartFile file){\n// ....\n\nString fileName = file.getOriginalFilename();\nif (&quot;mp3&quot;.equals(extension)) {\n            try {\n                Mp3File mp3file = new Mp3File(fileName);\n                sampleRate = mp3file.getSampleRate();\n            } catch (Exception e) {\n                throw new Mp3Exception(&quot;Couldn't get mp3 fields: &quot; + e.getMessage())\n            }\n    }\n\n// ....\n</code></pre>\n<p>Please keep in mind that I use in this project Java 8 and Gradle. Here is the dependency that I use:</p>\n<pre><code>    implementation 'com.mpatric:mp3agic:0.9.1'\n</code></pre>\n"},{"tags":["java","concurrency","completable-future"],"comments":[{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":2,"creation_date":1426174294,"post_id":29013831,"comment_id":46272671,"body_markdown":"I wonder if we can implement something like its static method supplyAsync but with some additional logic that will check if its completed or cancled will interrupt the thread it was executing for this task...","body":"I wonder if we can implement something like its static method supplyAsync but with some additional logic that will check if its completed or cancled will interrupt the thread it was executing for this task..."},{"owner":{"account_id":7334204,"reputation":199,"user_id":5586158,"display_name":"Valery Silaev"},"score":0,"creation_date":1463665116,"post_id":29013831,"comment_id":111989477,"body_markdown":"Please see my answer to related question:\nhttps://stackoverflow.com/questions/23301598/transform-java-future-into-a-completablefuture/37324409#37324409 In the code mentioned there, the CompletionStage behavior is added to RunnableFuture subclass (used by ExecutorService implementations), so you may interrupt it in the right way.","body":"Please see my answer to related question: <a href=\"https://stackoverflow.com/questions/23301598/transform-java-future-into-a-completablefuture/37324409#37324409\" title=\"transform java future into a completablefuture\">stackoverflow.com/questions/23301598/&hellip;</a> In the code mentioned there, the CompletionStage behavior is added to RunnableFuture subclass (used by ExecutorService implementations), so you may interrupt it in the right way."}],"answers":[{"comments":[{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426175349,"post_id":29014156,"comment_id":46273410,"body_markdown":"well i knew that, but my question is about this logic to link them together... for example suppose i&#39;ll have my own static factory method used for this cases... instead of supplyAsync i&#39;ll use some custom factory method... dont you think its possible to link CF to thread that executes it...?","body":"well i knew that, but my question is about this logic to link them together... for example suppose i&#39;ll have my own static factory method used for this cases... instead of supplyAsync i&#39;ll use some custom factory method... dont you think its possible to link CF to thread that executes it...?"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1426175598,"post_id":29014156,"comment_id":46273569,"body_markdown":"@Vach You&#39;d have to guarantee that the only `Thread`s that get access to the `CompletableFuture` are the ones that go through your custom factory method. That&#39;s not very feasible, imo. The important thing here is that the CF is not related to any one `Thread`. If you need to cancel some thread&#39;s work, you should have submitted the work through an `ExecutorService`, retrieved the `Future` and cancelled that. The `Runnable` or `Callable` submitted can have a reference to the CF. You won&#39;t be cancelling the CF, you&#39;ll be cancelling the task through the `Future`.","body":"@Vach You&#39;d have to guarantee that the only <code>Thread</code>s that get access to the <code>CompletableFuture</code> are the ones that go through your custom factory method. That&#39;s not very feasible, imo. The important thing here is that the CF is not related to any one <code>Thread</code>. If you need to cancel some thread&#39;s work, you should have submitted the work through an <code>ExecutorService</code>, retrieved the <code>Future</code> and cancelled that. The <code>Runnable</code> or <code>Callable</code> submitted can have a reference to the CF. You won&#39;t be cancelling the CF, you&#39;ll be cancelling the task through the <code>Future</code>."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1426175635,"post_id":29014156,"comment_id":46273593,"body_markdown":"@Vach You can encapsulate the logic by joining the `Future` and `CompletableFuture` and cancelling both. Note that this won&#39;t be atomic.","body":"@Vach You can encapsulate the logic by joining the <code>Future</code> and <code>CompletableFuture</code> and cancelling both. Note that this won&#39;t be atomic."},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426175841,"post_id":29014156,"comment_id":46273739,"body_markdown":"Thing is that i need flexibility of chaining operations that completable futures provide, but i dont want them to let useless operations continue to waist my cpu cycles when i cancle them... thats pointless..","body":"Thing is that i need flexibility of chaining operations that completable futures provide, but i dont want them to let useless operations continue to waist my cpu cycles when i cancle them... thats pointless.."},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426175854,"post_id":29014156,"comment_id":46273749,"body_markdown":"so i can have CompletableFuture from future? and when CF is cancled, call the same cancle of Future? Could you please give a clue how to do that?","body":"so i can have CompletableFuture from future? and when CF is cancled, call the same cancle of Future? Could you please give a clue how to do that?"},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426175971,"post_id":29014156,"comment_id":46273830,"body_markdown":"I&#39;m even ready to extends CF and add dependency to F if thats only way :(","body":"I&#39;m even ready to extends CF and add dependency to F if thats only way :("},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426175995,"post_id":29014156,"comment_id":46273851,"body_markdown":"I thought that RxJava will deal with this problem normally but seems the same problem is there too...","body":"I thought that RxJava will deal with this problem normally but seems the same problem is there too..."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1426176146,"post_id":29014156,"comment_id":46273973,"body_markdown":"@Vach I imagine you&#39;re thinking of a case where you use `runAsync` and want to cancel that task? However, that&#39;s not the only use case for `CompletableFuture`. You can launch 10 threads which all work towards completing it. Interrupting those threads is up to you. The threads themselves can&#39;t know they have a reference to a CF and the CF definitely can&#39;t know. Only the developer can.","body":"@Vach I imagine you&#39;re thinking of a case where you use <code>runAsync</code> and want to cancel that task? However, that&#39;s not the only use case for <code>CompletableFuture</code>. You can launch 10 threads which all work towards completing it. Interrupting those threads is up to you. The threads themselves can&#39;t know they have a reference to a CF and the CF definitely can&#39;t know. Only the developer can."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1426176182,"post_id":29014156,"comment_id":46273990,"body_markdown":"@Vach Extending `Future` and `CompletableFuture` won&#39;t be very useful if you plan to use JDK libraries to submit the work (`ExecutorService`s and such).","body":"@Vach Extending <code>Future</code> and <code>CompletableFuture</code> won&#39;t be very useful if you plan to use JDK libraries to submit the work (<code>ExecutorService</code>s and such)."},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426176489,"post_id":29014156,"comment_id":46274198,"body_markdown":"I dont really see why using ExecutorService wont make it usefull... the specific problem is that code might run the same task 100 times in a second and i want those 99 to cancel if they didnt make it in time... anyway i think thats not reasonable to let some useless thread consume resources...","body":"I dont really see why using ExecutorService wont make it usefull... the specific problem is that code might run the same task 100 times in a second and i want those 99 to cancel if they didnt make it in time... anyway i think thats not reasonable to let some useless thread consume resources..."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1426176830,"post_id":29014156,"comment_id":46274427,"body_markdown":"@Vach I completely agree with you. Don&#39;t waste resources. But you won&#39;t be able to solve this with the existing CF. You can extend CF and wrap a `Future`, but I don&#39;t believe you&#39;ll have access to a lot of the components that handle completion (a lot of it is `private`) and I doubt you&#39;ll be able to perform the cancellation atomically.","body":"@Vach I completely agree with you. Don&#39;t waste resources. But you won&#39;t be able to solve this with the existing CF. You can extend CF and wrap a <code>Future</code>, but I don&#39;t believe you&#39;ll have access to a lot of the components that handle completion (a lot of it is <code>private</code>) and I doubt you&#39;ll be able to perform the cancellation atomically."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1426177059,"post_id":29014156,"comment_id":46274599,"body_markdown":"@Vach I&#39;ll write an example of what I mean. Give me a few.","body":"@Vach I&#39;ll write an example of what I mean. Give me a few."},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426177067,"post_id":29014156,"comment_id":46274604,"body_markdown":"thats what i was afraid of, \nwill have to digg this code and invent the wheel... i wonder how people didnt had this problem...  Ok waiting for it :)","body":"thats what i was afraid of,  will have to digg this code and invent the wheel... i wonder how people didnt had this problem...  Ok waiting for it :)"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1426178512,"post_id":29014156,"comment_id":46275655,"body_markdown":"@Vach Updated with an extremely simple example with only a single thread executing work that may set the `CompletableFuture`.","body":"@Vach Updated with an extremely simple example with only a single thread executing work that may set the <code>CompletableFuture</code>."},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426224264,"post_id":29014156,"comment_id":46293124,"body_markdown":"Thanks for the example, but you are cancling the future not the completable... my aim is to make completablefuture.cancel to interrupt underlying thread if its not finished... or did i misunderstood something?","body":"Thanks for the example, but you are cancling the future not the completable... my aim is to make completablefuture.cancel to interrupt underlying thread if its not finished... or did i misunderstood something?"},{"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"score":0,"creation_date":1426225035,"post_id":29014156,"comment_id":46293334,"body_markdown":"Eventutally i&#39;ll expose a factory method of my own that gives out CompletableFuture (but underlying implementation might be my own) that will interrupt the thread if there is one when it is cancled... this means i need to somehow make CF aware of its thread, or have some callback that will find that thread and call interrupt when CF is canceled...","body":"Eventutally i&#39;ll expose a factory method of my own that gives out CompletableFuture (but underlying implementation might be my own) that will interrupt the thread if there is one when it is cancled... this means i need to somehow make CF aware of its thread, or have some callback that will find that thread and call interrupt when CF is canceled..."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1426262406,"post_id":29014156,"comment_id":46314217,"body_markdown":"@Vach So your exact aim is unachievable since there are no underlying threads to a `CompletableFuture`. The association you&#39;re making between your threads and a `CompletableFuture` is yours alone. `CompletableFuture` was not intended that way. The closest you&#39;re going to get with a `Future` and a `CompletableFuture` is what I&#39;ve presented above. Cancel the `Future`. If it was successful, cancel the associated `CompletableFuture`. Obviously, you might be able to get the behavior you want by writing your own `CompletableFuture`, but that is not an easy task.","body":"@Vach So your exact aim is unachievable since there are no underlying threads to a <code>CompletableFuture</code>. The association you&#39;re making between your threads and a <code>CompletableFuture</code> is yours alone. <code>CompletableFuture</code> was not intended that way. The closest you&#39;re going to get with a <code>Future</code> and a <code>CompletableFuture</code> is what I&#39;ve presented above. Cancel the <code>Future</code>. If it was successful, cancel the associated <code>CompletableFuture</code>. Obviously, you might be able to get the behavior you want by writing your own <code>CompletableFuture</code>, but that is not an easy task."},{"owner":{"account_id":600204,"reputation":22212,"user_id":303914,"display_name":"DWilches"},"score":1,"creation_date":1493244470,"post_id":29014156,"comment_id":74339054,"body_markdown":"@SotiriosDelimanolis Thanks for your explanation. In your example you use `Thread.sleep()` which already checks for interruption, so using `Thread.sleep()` might not be the better way of explaining your point (though the explanation is correct). For example, comment `if (Thread.interrupted()) {..}` and the program will get interrupted just the same. I think instead of `Thread.sleep()`  the code should read `doIninterrumpibleComputation()`.","body":"@SotiriosDelimanolis Thanks for your explanation. In your example you use <code>Thread.sleep()</code> which already checks for interruption, so using <code>Thread.sleep()</code> might not be the better way of explaining your point (though the explanation is correct). For example, comment <code>if (Thread.interrupted()) {..}</code> and the program will get interrupted just the same. I think instead of <code>Thread.sleep()</code>  the code should read <code>doIninterrumpibleComputation()</code>."}],"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":18,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1485008284,"creation_date":1426174913,"answer_id":29014156,"question_id":29013831,"body_markdown":"A [`CompletableFuture`][1] is not related to the asynchronous action that may eventually complete it.\r\n\r\n&gt; Since (unlike `FutureTask`) this class has no direct control over the\r\n&gt; computation that causes it to be completed, cancellation is treated as\r\n&gt; just another form of exceptional completion. Method `cancel` has the\r\n&gt; same effect as `completeExceptionally(new CancellationException())`.\r\n\r\nThere may not even _be_ a separate thread working on completing it (there may even be _many_ threads working on it). Even if there is, there&#39;s no link from a `CompletableFuture` to any thread that has a reference to it.\r\n\r\nAs such, there&#39;s nothing you can do through `CompletableFuture` to interrupt any thread that may be running some task that will complete it. You&#39;ll have to write your own logic which tracks any `Thread` instances which acquire a reference to the `CompletableFuture` with the intention to complete it.\r\n\r\n\r\n----------\r\n\r\nHere&#39;s an example of the type of execution I think you could get away with.\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        ExecutorService service = Executors.newFixedThreadPool(1);\r\n        CompletableFuture&lt;String&gt; completable = new CompletableFuture&lt;&gt;();\r\n        Future&lt;?&gt; future = service.submit(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    if (Thread.interrupted()) {\r\n                        return; // remains uncompleted\r\n                    }\r\n                    try {\r\n                        Thread.sleep(1000);\r\n                    } catch (InterruptedException e) {\r\n                        return; // remains uncompleted\r\n                    }\r\n                }\r\n                completable.complete(&quot;done&quot;);\r\n            }\r\n        });\r\n\r\n        Thread.sleep(2000);\r\n\r\n        // not atomic across the two\r\n        boolean cancelled = future.cancel(true);\r\n        if (cancelled)\r\n            completable.cancel(true); // may not have been cancelled if execution has already completed\r\n        if (completable.isCancelled()) {\r\n            System.out.println(&quot;cancelled&quot;);\r\n        } else if (completable.isCompletedExceptionally()) {\r\n            System.out.println(&quot;exception&quot;);\r\n        } else {\r\n            System.out.println(&quot;success&quot;);\r\n        }\r\n        service.shutdown();\r\n    }\r\n\r\nThis assumes that the task being executed is setup to handle interruptions correctly.\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>A <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"noreferrer\"><code>CompletableFuture</code></a> is not related to the asynchronous action that may eventually complete it.</p>\n\n<blockquote>\n  <p>Since (unlike <code>FutureTask</code>) this class has no direct control over the\n  computation that causes it to be completed, cancellation is treated as\n  just another form of exceptional completion. Method <code>cancel</code> has the\n  same effect as <code>completeExceptionally(new CancellationException())</code>.</p>\n</blockquote>\n\n<p>There may not even <em>be</em> a separate thread working on completing it (there may even be <em>many</em> threads working on it). Even if there is, there's no link from a <code>CompletableFuture</code> to any thread that has a reference to it.</p>\n\n<p>As such, there's nothing you can do through <code>CompletableFuture</code> to interrupt any thread that may be running some task that will complete it. You'll have to write your own logic which tracks any <code>Thread</code> instances which acquire a reference to the <code>CompletableFuture</code> with the intention to complete it.</p>\n\n<hr>\n\n<p>Here's an example of the type of execution I think you could get away with.</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    ExecutorService service = Executors.newFixedThreadPool(1);\n    CompletableFuture&lt;String&gt; completable = new CompletableFuture&lt;&gt;();\n    Future&lt;?&gt; future = service.submit(new Runnable() {\n        @Override\n        public void run() {\n            for (int i = 0; i &lt; 10; i++) {\n                if (Thread.interrupted()) {\n                    return; // remains uncompleted\n                }\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    return; // remains uncompleted\n                }\n            }\n            completable.complete(\"done\");\n        }\n    });\n\n    Thread.sleep(2000);\n\n    // not atomic across the two\n    boolean cancelled = future.cancel(true);\n    if (cancelled)\n        completable.cancel(true); // may not have been cancelled if execution has already completed\n    if (completable.isCancelled()) {\n        System.out.println(\"cancelled\");\n    } else if (completable.isCompletedExceptionally()) {\n        System.out.println(\"exception\");\n    } else {\n        System.out.println(\"success\");\n    }\n    service.shutdown();\n}\n</code></pre>\n\n<p>This assumes that the task being executed is setup to handle interruptions correctly.</p>\n"},{"comments":[{"owner":{"account_id":2232407,"reputation":4006,"user_id":1969663,"display_name":"Ruben"},"score":1,"creation_date":1426347574,"post_id":29041496,"comment_id":46339481,"body_markdown":"Glad you find it useful. If what you are trying to achieve though can be implemented via a timeout mechanism, maybe you find this solution more interesting: http://stackoverflow.com/questions/23575067/timeout-with-default-value-in-java-8-completablefuture/24457111#24457111","body":"Glad you find it useful. If what you are trying to achieve though can be implemented via a timeout mechanism, maybe you find this solution more interesting: <a href=\"http://stackoverflow.com/questions/23575067/timeout-with-default-value-in-java-8-completablefuture/24457111#24457111\" title=\"timeout with default value in java 8 completablefuture\">stackoverflow.com/questions/23575067/&hellip;</a>"}],"tags":[],"owner":{"account_id":2232407,"reputation":4006,"user_id":1969663,"display_name":"Ruben"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1426278925,"creation_date":1426278925,"answer_id":29041496,"question_id":29013831,"body_markdown":"What about this?\r\n\r\n\tpublic static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsync(final Supplier&lt;T&gt; supplier) {\r\n\r\n\t\tfinal ExecutorService executorService = Executors.newFixedThreadPool(1);\r\n\r\n\t\tfinal CompletableFuture&lt;T&gt; cf = new CompletableFuture&lt;T&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic boolean complete(T value) {\r\n\t\t\t\tif (isDone()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\texecutorService.shutdownNow();\r\n\t\t\t\treturn super.complete(value);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean completeExceptionally(Throwable ex) {\r\n\t\t\t\tif (isDone()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\texecutorService.shutdownNow();\r\n\t\t\t\treturn super.completeExceptionally(ex);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// submit task\r\n\t\texecutorService.submit(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tcf.complete(supplier.get());\r\n\t\t\t} catch (Throwable ex) {\r\n\t\t\t\tcf.completeExceptionally(ex);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn cf;\r\n\t}\r\n\r\nSimple Test:\r\n\r\n\t\tCompletableFuture&lt;String&gt; cf = supplyAsync(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000L);\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tSystem.out.println(&quot;got interrupted&quot;);\r\n\t\t\t\treturn &quot;got interrupted&quot;;\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;normal complete&quot;);\r\n\t\t\treturn &quot;normal complete&quot;;\r\n\t\t});\r\n\r\n\t\tcf.complete(&quot;manual complete&quot;);\r\n\t\tSystem.out.println(cf.get());\r\n\r\nI don&#39;t like the idea of having to create an Executor service every time, but maybe you can find a way to reuse the ForkJoinPool.","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>What about this?</p>\n\n<pre><code>public static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsync(final Supplier&lt;T&gt; supplier) {\n\n    final ExecutorService executorService = Executors.newFixedThreadPool(1);\n\n    final CompletableFuture&lt;T&gt; cf = new CompletableFuture&lt;T&gt;() {\n        @Override\n        public boolean complete(T value) {\n            if (isDone()) {\n                return false;\n            }\n            executorService.shutdownNow();\n            return super.complete(value);\n        }\n\n        @Override\n        public boolean completeExceptionally(Throwable ex) {\n            if (isDone()) {\n                return false;\n            }\n            executorService.shutdownNow();\n            return super.completeExceptionally(ex);\n        }\n    };\n\n    // submit task\n    executorService.submit(() -&gt; {\n        try {\n            cf.complete(supplier.get());\n        } catch (Throwable ex) {\n            cf.completeExceptionally(ex);\n        }\n    });\n\n    return cf;\n}\n</code></pre>\n\n<p>Simple Test:</p>\n\n<pre><code>    CompletableFuture&lt;String&gt; cf = supplyAsync(() -&gt; {\n        try {\n            Thread.sleep(1000L);\n        } catch (Exception e) {\n            System.out.println(\"got interrupted\");\n            return \"got interrupted\";\n        }\n        System.out.println(\"normal complete\");\n        return \"normal complete\";\n    });\n\n    cf.complete(\"manual complete\");\n    System.out.println(cf.get());\n</code></pre>\n\n<p>I don't like the idea of having to create an Executor service every time, but maybe you can find a way to reuse the ForkJoinPool.</p>\n"},{"comments":[{"owner":{"account_id":10634197,"reputation":2037,"user_id":7831371,"accept_rate":86,"display_name":"xtra"},"score":0,"creation_date":1581076554,"post_id":53234266,"comment_id":106318326,"body_markdown":"How would you stop the underlying `ExecutorService` using the above code snippet?","body":"How would you stop the underlying <code>ExecutorService</code> using the above code snippet?"}],"tags":[],"owner":{"account_id":8713987,"reputation":169,"user_id":6519354,"display_name":"user6519354"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1541803819,"creation_date":1541803819,"answer_id":53234266,"question_id":29013831,"body_markdown":"What about?\r\n\r\n    /** @return {@link CompletableFuture} which when cancelled will interrupt the supplier\r\n     */\r\n    public static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsyncInterruptibly(Supplier&lt;T&gt; supplier, Executor executor) {\r\n        return produceInterruptibleCompletableFuture((s) -&gt; CompletableFuture.supplyAsync(s, executor), supplier);\r\n    }\r\n\r\n    // in case we want to do the same for similar methods later\r\n    private static &lt;T&gt; CompletableFuture&lt;T&gt; produceInterruptibleCompletableFuture(\r\n            Function&lt;Supplier&lt;T&gt;,CompletableFuture&lt;T&gt;&gt; completableFutureAsyncSupplier, Supplier&lt;T&gt; action) {\r\n        FutureTask&lt;T&gt; task = new FutureTask&lt;&gt;(action::get);\r\n        return addCancellationAction(completableFutureAsyncSupplier.apply(asSupplier(task)), () -&gt;\r\n                task.cancel(true));\r\n    }\r\n\r\n    /** Ensures the specified action is executed if the given {@link CompletableFuture} is cancelled.\r\n     */\r\n    public static &lt;T&gt; CompletableFuture&lt;T&gt; addCancellationAction(CompletableFuture&lt;T&gt; completableFuture,\r\n                                                                 @NonNull Runnable onCancellationAction) {\r\n        completableFuture.whenComplete((result, throwable) -&gt; {\r\n            if (completableFuture.isCancelled()) {\r\n                onCancellationAction.run();\r\n            }\r\n        });\r\n        return completableFuture;  // return original CompletableFuture\r\n    }\r\n\r\n    /** @return {@link Supplier} wrapper for the given {@link RunnableFuture} which calls {@link RunnableFuture#run()}\r\n     *          followed by {@link RunnableFuture#get()}.\r\n     */\r\n    public static &lt;T&gt; Supplier&lt;T&gt; asSupplier(RunnableFuture&lt;T&gt; futureTask) throws CompletionException {\r\n        return () -&gt; {\r\n            try {\r\n                futureTask.run();\r\n                try {\r\n                    return futureTask.get();\r\n                } catch (ExecutionException e) {  // unwrap ExecutionExceptions\r\n                    final Throwable cause = e.getCause();\r\n                    throw (cause != null) ? cause : e;\r\n                }\r\n            } catch (CompletionException e) {\r\n                throw e;\r\n            } catch (Throwable t) {\r\n                throw new CompletionException(t);\r\n            }\r\n        };\r\n    }\r\n","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>What about?</p>\n\n<pre><code>/** @return {@link CompletableFuture} which when cancelled will interrupt the supplier\n */\npublic static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsyncInterruptibly(Supplier&lt;T&gt; supplier, Executor executor) {\n    return produceInterruptibleCompletableFuture((s) -&gt; CompletableFuture.supplyAsync(s, executor), supplier);\n}\n\n// in case we want to do the same for similar methods later\nprivate static &lt;T&gt; CompletableFuture&lt;T&gt; produceInterruptibleCompletableFuture(\n        Function&lt;Supplier&lt;T&gt;,CompletableFuture&lt;T&gt;&gt; completableFutureAsyncSupplier, Supplier&lt;T&gt; action) {\n    FutureTask&lt;T&gt; task = new FutureTask&lt;&gt;(action::get);\n    return addCancellationAction(completableFutureAsyncSupplier.apply(asSupplier(task)), () -&gt;\n            task.cancel(true));\n}\n\n/** Ensures the specified action is executed if the given {@link CompletableFuture} is cancelled.\n */\npublic static &lt;T&gt; CompletableFuture&lt;T&gt; addCancellationAction(CompletableFuture&lt;T&gt; completableFuture,\n                                                             @NonNull Runnable onCancellationAction) {\n    completableFuture.whenComplete((result, throwable) -&gt; {\n        if (completableFuture.isCancelled()) {\n            onCancellationAction.run();\n        }\n    });\n    return completableFuture;  // return original CompletableFuture\n}\n\n/** @return {@link Supplier} wrapper for the given {@link RunnableFuture} which calls {@link RunnableFuture#run()}\n *          followed by {@link RunnableFuture#get()}.\n */\npublic static &lt;T&gt; Supplier&lt;T&gt; asSupplier(RunnableFuture&lt;T&gt; futureTask) throws CompletionException {\n    return () -&gt; {\n        try {\n            futureTask.run();\n            try {\n                return futureTask.get();\n            } catch (ExecutionException e) {  // unwrap ExecutionExceptions\n                final Throwable cause = e.getCause();\n                throw (cause != null) ? cause : e;\n            }\n        } catch (CompletionException e) {\n            throw e;\n        } catch (Throwable t) {\n            throw new CompletionException(t);\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":259109,"reputation":2800,"user_id":541755,"accept_rate":71,"display_name":"jontejj"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553000443,"creation_date":1553000443,"answer_id":55241692,"question_id":29013831,"body_markdown":"If you use\r\n\r\n    cf.get();\r\n\r\ninstead of\r\n\r\n    cf.join();\r\n\r\nThe thread waiting on the completion can be interrupted. This bit me in the a**, so I&#39;m just putting it out there. You&#39;d then need to propagate this interruption further / use cf.cancel(...) to really finish the execution.","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>If you use</p>\n\n<pre><code>cf.get();\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>cf.join();\n</code></pre>\n\n<p>The thread waiting on the completion can be interrupted. This bit me in the a**, so I'm just putting it out there. You'd then need to propagate this interruption further / use cf.cancel(...) to really finish the execution.</p>\n"},{"tags":[],"owner":{"account_id":417955,"reputation":18564,"user_id":794242,"accept_rate":80,"display_name":"Wand Maker"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611157973,"creation_date":1611157973,"answer_id":65812966,"question_id":29013831,"body_markdown":"I had similar issue wherein I needed to simulate a InterruptedException.\r\n\r\nI mocked the method call that is supposed to return the CompletetableFuture, and I put a spy on return value such that `CompletableFuture#get` will throw the exception.\r\n\r\nIt worked as I expected, and I was able to test that code handled the exception correctly.\r\n\r\n```\r\n        CompletableFuture spiedFuture = spy(CompletableFuture.completedFuture(null));\r\n        when(spiedFuture .get()).thenThrow(new InterruptedException());\r\n\r\n        when(servuce.getById(anyString())).thenReturn(spiedFuture );\r\n```\r\n","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>I had similar issue wherein I needed to simulate a InterruptedException.</p>\n<p>I mocked the method call that is supposed to return the CompletetableFuture, and I put a spy on return value such that <code>CompletableFuture#get</code> will throw the exception.</p>\n<p>It worked as I expected, and I was able to test that code handled the exception correctly.</p>\n<pre><code>        CompletableFuture spiedFuture = spy(CompletableFuture.completedFuture(null));\n        when(spiedFuture .get()).thenThrow(new InterruptedException());\n\n        when(servuce.getById(anyString())).thenReturn(spiedFuture );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4396854,"reputation":1866,"user_id":3583589,"display_name":"benez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616878994,"creation_date":1616878994,"answer_id":66836057,"question_id":29013831,"body_markdown":"Here is a ultra-short version to create a `Future` task that can be cancelled:\r\n\r\n    public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; operation) {\r\n    \tCompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;();\r\n    \treturn future.completeAsync(() -&gt; operation.apply(future));\r\n    }\r\n\r\nThe `CompletableFuture` is passed to the operation `Function` to be able to check the cancel status of the `Future`:\r\n\r\n    Future&lt;Result&gt; future = supplyAsync(task -&gt; {\r\n       while (!task.isCancelled()) {\r\n    \t   // computation\r\n       }\r\n       return result;\r\n    });\r\n    // later you may cancel\r\n    future.cancel(false);\r\n    // or retrieve the result\r\n    Result result = future.get(5, TimeUnit.SECONDS);\r\n\r\nThis however does not interrupt the `Thread` running the operation. If you also want to be able to interrupt the `Thread`, then you have to store a reference to it and override `Future.cancel(..)` to interrupt it.\r\n\r\n    public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; action) {\r\n    \treturn supplyAsync(action, r -&gt; new Thread(r).start());\r\n    }\r\n    \r\n    public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; action, Executor executor) {\r\n    \r\n    \tAtomicReference&lt;Thread&gt; interruptThread = new AtomicReference&lt;&gt;();\r\n    \tCompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;() {\r\n    \r\n    \t\t@Override\r\n    \t\tpublic boolean cancel(boolean mayInterruptIfRunning) {\r\n    \t\t\tif (!interruptThread.compareAndSet(null, Thread.currentThread()) \r\n                       &amp;&amp; mayInterruptIfRunning) {\r\n    \t\t\t\tinterruptThread.get().interrupt();\r\n    \t\t\t}\r\n    \t\t\treturn super.cancel(mayInterruptIfRunning);\r\n    \t\t}\r\n    \t};\r\n    \r\n    \texecutor.execute(() -&gt; {\r\n    \t\tif (interruptThread.compareAndSet(null, Thread.currentThread())) try {\r\n    \t\t\tfuture.complete(action.apply(future));\r\n    \t\t} catch (Throwable e) {\r\n    \t\t\tfuture.completeExceptionally(e);\r\n    \t\t}\r\n    \t});\r\n    \r\n    \treturn future;\r\n    }\r\n\r\nThe following test checks that the `Thread` executing our `Function` got interrupted:\r\n\r\n    @Test\r\n    void supplyAsyncWithCancelOnInterrupt() throws Exception {\r\n        Object lock = new Object();\r\n        CountDownLatch done = new CountDownLatch(1);\r\n        CountDownLatch started = new CountDownLatch(1);\r\n\r\n        Future&lt;Object&gt; future = supplyAsync(m -&gt; {\r\n            started.countDown();\r\n            synchronized (lock) {\r\n                try {\r\n                    lock.wait(); // let&#39;s get interrupted\r\n                } catch (InterruptedException e) {\r\n                    done.countDown();\r\n                }\r\n            }\r\n            return null;\r\n        });\r\n\r\n        assertFalse(future.isCancelled());\r\n        assertFalse(future.isDone());\r\n\r\n        assertTrue(started.await(5, TimeUnit.SECONDS));\r\n        assertTrue(future.cancel(true));\r\n\r\n        assertTrue(future.isCancelled());\r\n        assertTrue(future.isDone());\r\n        assertThrows(CancellationException.class, () -&gt; future.get());\r\n        assertTrue(done.await(5, TimeUnit.SECONDS));\r\n    }","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>Here is a ultra-short version to create a <code>Future</code> task that can be cancelled:</p>\n<pre><code>public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; operation) {\n    CompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;();\n    return future.completeAsync(() -&gt; operation.apply(future));\n}\n</code></pre>\n<p>The <code>CompletableFuture</code> is passed to the operation <code>Function</code> to be able to check the cancel status of the <code>Future</code>:</p>\n<pre><code>Future&lt;Result&gt; future = supplyAsync(task -&gt; {\n   while (!task.isCancelled()) {\n       // computation\n   }\n   return result;\n});\n// later you may cancel\nfuture.cancel(false);\n// or retrieve the result\nResult result = future.get(5, TimeUnit.SECONDS);\n</code></pre>\n<p>This however does not interrupt the <code>Thread</code> running the operation. If you also want to be able to interrupt the <code>Thread</code>, then you have to store a reference to it and override <code>Future.cancel(..)</code> to interrupt it.</p>\n<pre><code>public static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; action) {\n    return supplyAsync(action, r -&gt; new Thread(r).start());\n}\n\npublic static &lt;T&gt; Future&lt;T&gt; supplyAsync(Function&lt;Future&lt;T&gt;, T&gt; action, Executor executor) {\n\n    AtomicReference&lt;Thread&gt; interruptThread = new AtomicReference&lt;&gt;();\n    CompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;() {\n\n        @Override\n        public boolean cancel(boolean mayInterruptIfRunning) {\n            if (!interruptThread.compareAndSet(null, Thread.currentThread()) \n                   &amp;&amp; mayInterruptIfRunning) {\n                interruptThread.get().interrupt();\n            }\n            return super.cancel(mayInterruptIfRunning);\n        }\n    };\n\n    executor.execute(() -&gt; {\n        if (interruptThread.compareAndSet(null, Thread.currentThread())) try {\n            future.complete(action.apply(future));\n        } catch (Throwable e) {\n            future.completeExceptionally(e);\n        }\n    });\n\n    return future;\n}\n</code></pre>\n<p>The following test checks that the <code>Thread</code> executing our <code>Function</code> got interrupted:</p>\n<pre><code>@Test\nvoid supplyAsyncWithCancelOnInterrupt() throws Exception {\n    Object lock = new Object();\n    CountDownLatch done = new CountDownLatch(1);\n    CountDownLatch started = new CountDownLatch(1);\n\n    Future&lt;Object&gt; future = supplyAsync(m -&gt; {\n        started.countDown();\n        synchronized (lock) {\n            try {\n                lock.wait(); // let's get interrupted\n            } catch (InterruptedException e) {\n                done.countDown();\n            }\n        }\n        return null;\n    });\n\n    assertFalse(future.isCancelled());\n    assertFalse(future.isDone());\n\n    assertTrue(started.await(5, TimeUnit.SECONDS));\n    assertTrue(future.cancel(true));\n\n    assertTrue(future.isCancelled());\n    assertTrue(future.isDone());\n    assertThrows(CancellationException.class, () -&gt; future.get());\n    assertTrue(done.await(5, TimeUnit.SECONDS));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5686053,"reputation":41,"user_id":4495592,"display_name":"Arturo Bernal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679432188,"creation_date":1679432188,"answer_id":75806262,"question_id":29013831,"body_markdown":"If you want to interrupt the underlying execution of a CompletableFuture, you can use the completeExceptionally method to complete the future with an exception. When you do this, any dependent CompletableFuture will be notified with the same exception, and any callback that you have set up with the whenComplete method will be called with the exception.\r\n\r\nFor example, let&#39;s say you have a CompletableFuture that represents a long-running computation:\r\n\r\n    CompletableFuture&lt;String&gt; computation = CompletableFuture.supplyAsync(() -&gt; {\r\n    // long-running computation here\r\n    return &quot;result&quot;;});\r\n\r\nIf you want to interrupt this computation when the CompletableFuture is canceled, you can add a callback to the CompletableFuture like this:\r\n\r\n    computation.whenComplete((result, exception) -&gt; {\r\n    if (exception instanceof CancellationException) {\r\n        // interrupt the computation here\r\n   }});\r\n\r\nInside the callback, you can check if the exception is a CancellationException, which is thrown when the CompletableFuture is canceled. If it is, you can interrupt the computation in whatever way is appropriate.\r\n\r\nAlternatively, you can complete the CompletableFuture with an exception like this:\r\n\r\n    computation.completeExceptionally(new CancellationException());","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>If you want to interrupt the underlying execution of a CompletableFuture, you can use the completeExceptionally method to complete the future with an exception. When you do this, any dependent CompletableFuture will be notified with the same exception, and any callback that you have set up with the whenComplete method will be called with the exception.</p>\n<p>For example, let's say you have a CompletableFuture that represents a long-running computation:</p>\n<pre><code>CompletableFuture&lt;String&gt; computation = CompletableFuture.supplyAsync(() -&gt; {\n// long-running computation here\nreturn &quot;result&quot;;});\n</code></pre>\n<p>If you want to interrupt this computation when the CompletableFuture is canceled, you can add a callback to the CompletableFuture like this:</p>\n<pre><code>computation.whenComplete((result, exception) -&gt; {\nif (exception instanceof CancellationException) {\n    // interrupt the computation here\n</code></pre>\n<p>}});</p>\n<p>Inside the callback, you can check if the exception is a CancellationException, which is thrown when the CompletableFuture is canceled. If it is, you can interrupt the computation in whatever way is appropriate.</p>\n<p>Alternatively, you can complete the CompletableFuture with an exception like this:</p>\n<pre><code>computation.completeExceptionally(new CancellationException());\n</code></pre>\n"}],"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26267,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":29014156,"answer_count":7,"score":34,"last_activity_date":1679432188,"creation_date":1426174051,"question_id":29013831,"body_markdown":"I know that `CompletableFuture` design does not control its execution with interruptions, but I suppose some of you might have this problem. `CompletableFuture`s are very good way to compose async execution, but given the case when you want the underlying execution to be interrupted or stopped when future is canceled, how do we do that? Or we must just accept that any canceled or manually completed `CompletableFuture` will not impact the thread working out there to complete it?\r\n\r\nThat is, in my opinion, obviously a useless work that takes time of executor worker. I wonder what approach or design might help in this case?\r\n\r\n**UPDATE** \r\n\r\nHere is a simple test for this\r\n\r\n    public class SimpleTest {\r\n    \r\n      @Test\r\n      public void testCompletableFuture() throws Exception {\r\n        CompletableFuture&lt;Void&gt; cf = CompletableFuture.runAsync(()-&gt;longOperation());\r\n    \r\n        bearSleep(1);\r\n    \r\n        //cf.cancel(true);\r\n        cf.complete(null);\r\n        \r\n        System.out.println(&quot;it should die now already&quot;);\r\n        bearSleep(7);\r\n      }\r\n    \r\n      public static void longOperation(){\r\n        System.out.println(&quot;started&quot;);\r\n        bearSleep(5);\r\n        System.out.println(&quot;completed&quot;);\r\n      }\r\n    \r\n      private static void bearSleep(long seconds){\r\n        try {\r\n          TimeUnit.SECONDS.sleep(seconds);\r\n        } catch (InterruptedException e) {\r\n          System.out.println(&quot;OMG!!! Interrupt!!!&quot;);\r\n        }\r\n      }\r\n    }","title":"How to interrupt underlying execution of CompletableFuture","body":"<p>I know that <code>CompletableFuture</code> design does not control its execution with interruptions, but I suppose some of you might have this problem. <code>CompletableFuture</code>s are very good way to compose async execution, but given the case when you want the underlying execution to be interrupted or stopped when future is canceled, how do we do that? Or we must just accept that any canceled or manually completed <code>CompletableFuture</code> will not impact the thread working out there to complete it?</p>\n\n<p>That is, in my opinion, obviously a useless work that takes time of executor worker. I wonder what approach or design might help in this case?</p>\n\n<p><strong>UPDATE</strong> </p>\n\n<p>Here is a simple test for this</p>\n\n<pre><code>public class SimpleTest {\n\n  @Test\n  public void testCompletableFuture() throws Exception {\n    CompletableFuture&lt;Void&gt; cf = CompletableFuture.runAsync(()-&gt;longOperation());\n\n    bearSleep(1);\n\n    //cf.cancel(true);\n    cf.complete(null);\n\n    System.out.println(\"it should die now already\");\n    bearSleep(7);\n  }\n\n  public static void longOperation(){\n    System.out.println(\"started\");\n    bearSleep(5);\n    System.out.println(\"completed\");\n  }\n\n  private static void bearSleep(long seconds){\n    try {\n      TimeUnit.SECONDS.sleep(seconds);\n    } catch (InterruptedException e) {\n      System.out.println(\"OMG!!! Interrupt!!!\");\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","gradle","build.gradle","properties-file","system-properties"],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679431914,"creation_date":1679431914,"answer_id":75806242,"question_id":75806033,"body_markdown":"You can&#39;t use the `getResourceAsStream` method then.  This can&#39;t be overridden with system properties as you show in your example.\r\n\r\nIt&#39;s not clear what your overall environment is but systems like Quarkus include a [configuration subsystem](https://quarkus.io/guides/config) to help you do exactly this.  You can use system properties, environment variables, and files.\r\n\r\nFor smaller command line type applications I&#39;ve used [Apache Commons configuration](https://commons.apache.org/proper/commons-configuration/) that also can read from a variety of places.  It&#39;s simple and has a very large number of sources.","title":"How to update java project properties with gradle commandline","body":"<p>You can't use the <code>getResourceAsStream</code> method then.  This can't be overridden with system properties as you show in your example.</p>\n<p>It's not clear what your overall environment is but systems like Quarkus include a <a href=\"https://quarkus.io/guides/config\" rel=\"nofollow noreferrer\">configuration subsystem</a> to help you do exactly this.  You can use system properties, environment variables, and files.</p>\n<p>For smaller command line type applications I've used <a href=\"https://commons.apache.org/proper/commons-configuration/\" rel=\"nofollow noreferrer\">Apache Commons configuration</a> that also can read from a variety of places.  It's simple and has a very large number of sources.</p>\n"}],"owner":{"account_id":14310566,"reputation":15,"user_id":10336969,"display_name":"leblanc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75806242,"answer_count":1,"score":0,"last_activity_date":1679431914,"creation_date":1679430209,"question_id":75806033,"body_markdown":"I&#39;m working on a java project and currently loading properties by:\r\n\r\n```\r\n properties.load(ConfigProperty.class.getClassLoader().getResourceAsStream(&quot;project.properties&quot;));\r\n```\r\nBut sometimes I also need to run from command line and pass values to override the values in project.properties.\r\n\r\nI tried something like this(user is a key in properties), but doesn&#39;t really work. \r\n\r\n```\r\ngradle gatlingRun -Duser=1\r\n\r\n```\r\nWhat should be the proper way to do it?\r\n\r\nIs it the way properties.load limiting it to only read from file? Should change this part?","title":"How to update java project properties with gradle commandline","body":"<p>I'm working on a java project and currently loading properties by:</p>\n<pre><code> properties.load(ConfigProperty.class.getClassLoader().getResourceAsStream(&quot;project.properties&quot;));\n</code></pre>\n<p>But sometimes I also need to run from command line and pass values to override the values in project.properties.</p>\n<p>I tried something like this(user is a key in properties), but doesn't really work.</p>\n<pre><code>gradle gatlingRun -Duser=1\n\n</code></pre>\n<p>What should be the proper way to do it?</p>\n<p>Is it the way properties.load limiting it to only read from file? Should change this part?</p>\n"},{"tags":["java","ip","inetaddress"],"comments":[{"owner":{"account_id":356126,"reputation":2934,"user_id":695457,"accept_rate":84,"display_name":"rob"},"score":0,"creation_date":1302122619,"post_id":5571744,"comment_id":6339822,"body_markdown":"Didn&#39;t find this one, it is indeed the same problem.","body":"Didn&#39;t find this one, it is indeed the same problem."}],"answers":[{"comments":[{"owner":{"account_id":356126,"reputation":2934,"user_id":695457,"accept_rate":84,"display_name":"rob"},"score":0,"creation_date":1302119148,"post_id":5571816,"comment_id":6338893,"body_markdown":"thx! Looks like i skipped this part. sorry for that.","body":"thx! Looks like i skipped this part. sorry for that."},{"owner":{"account_id":2690355,"reputation":719,"user_id":2323831,"accept_rate":100,"display_name":"Flipbed"},"score":3,"creation_date":1418822380,"post_id":5571816,"comment_id":43481570,"body_markdown":"Those who use this please note that if the ip-adress are not valid the timeout for the lookup is long enough that when done repeatedly it causes the program to run slowly.","body":"Those who use this please note that if the ip-adress are not valid the timeout for the lookup is long enough that when done repeatedly it causes the program to run slowly."},{"owner":{"account_id":46333,"reputation":56186,"user_id":136829,"display_name":"Glenn Maynard"},"score":44,"creation_date":1427302819,"post_id":5571816,"comment_id":46725804,"body_markdown":"This is a bad idea if all you&#39;re intending to do is parse IP addresses, since getByName will also do hostname lookups.  If a hostname is passed to your function, you&#39;ll be doing synchronous network I/O where you didn&#39;t intend to be.","body":"This is a bad idea if all you&#39;re intending to do is parse IP addresses, since getByName will also do hostname lookups.  If a hostname is passed to your function, you&#39;ll be doing synchronous network I/O where you didn&#39;t intend to be."},{"owner":{"account_id":1209019,"reputation":385,"user_id":1177941,"display_name":"Andris Birkmanis"},"score":10,"creation_date":1476997058,"post_id":5571816,"comment_id":67597598,"body_markdown":"@GlennMaynard: the actual JDK code checks if the first character is a digit, and if yes, then just parses it using IPAddressUtil.","body":"@GlennMaynard: the actual JDK code checks if the first character is a digit, and if yes, then just parses it using IPAddressUtil."},{"owner":{"account_id":46333,"reputation":56186,"user_id":136829,"display_name":"Glenn Maynard"},"score":1,"creation_date":1478298503,"post_id":5571816,"comment_id":68113668,"body_markdown":"@AndrisBirkmanis But if someone passes in a hostname (eg. because you&#39;re parsing a configuration file or similar), that&#39;s not what will happen.  If you only intend to parse an IP address, then you should use a function that only parses IP addresses.","body":"@AndrisBirkmanis But if someone passes in a hostname (eg. because you&#39;re parsing a configuration file or similar), that&#39;s not what will happen.  If you only intend to parse an IP address, then you should use a function that only parses IP addresses."},{"owner":{"account_id":5458458,"reputation":169,"user_id":4341228,"accept_rate":0,"display_name":"pujan jain"},"score":0,"creation_date":1513676300,"post_id":5571816,"comment_id":82733515,"body_markdown":"But this is not giving me as expected one.","body":"But this is not giving me as expected one."},{"owner":{"account_id":208307,"reputation":4667,"user_id":458701,"accept_rate":80,"display_name":"arulraj.net"},"score":1,"creation_date":1595291684,"post_id":5571816,"comment_id":111417931,"body_markdown":"`IPAddressUtil` in sun.net.util is best alternative. But we should be aware of this https://www.oracle.com/java/technologies/faq-sun-packages.html","body":"<code>IPAddressUtil</code> in sun.net.util is best alternative. But we should be aware of this <a href=\"https://www.oracle.com/java/technologies/faq-sun-packages.html\" rel=\"nofollow noreferrer\">oracle.com/java/technologies/faq-sun-packages.html</a>"}],"tags":[],"owner":{"account_id":355051,"reputation":3995,"user_id":693765,"display_name":"Justin Waugh"},"comment_count":7,"down_vote_count":5,"up_vote_count":193,"is_accepted":true,"score":188,"last_activity_date":1679431805,"creation_date":1302117707,"answer_id":5571816,"question_id":5571744,"body_markdown":"Simply call [`InetAddress.getByName(String host)`][1] passing in your textual IP address.\r\n\r\nFrom the javadoc: The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)\r\n","title":"Java: Convert a String (representing an IP) to InetAddress","body":"<p>Simply call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)\" rel=\"nofollow noreferrer\"><code>InetAddress.getByName(String host)</code></a> passing in your textual IP address.</p>\n<p>From the javadoc: The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address.</p>\n"},{"tags":[],"owner":{"account_id":25166,"reputation":29119,"user_id":64495,"accept_rate":67,"display_name":"Bj&#246;rn"},"comment_count":0,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1679431739,"creation_date":1302117736,"answer_id":5571823,"question_id":5571744,"body_markdown":"From the documentation of [`InetAddress.getByName(String host)`][1]:\r\n\r\n&gt; The host name can either be a machine\r\n&gt; name, such as &quot;java.sun.com&quot;, or a\r\n&gt; textual representation of its IP\r\n&gt; address. If a literal IP address is\r\n&gt; supplied, only the validity of the\r\n&gt; address format is checked.\r\n\r\nSo you can use it.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)","title":"Java: Convert a String (representing an IP) to InetAddress","body":"<p>From the documentation of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)\" rel=\"nofollow noreferrer\"><code>InetAddress.getByName(String host)</code></a>:</p>\n<blockquote>\n<p>The host name can either be a machine\nname, such as &quot;java.sun.com&quot;, or a\ntextual representation of its IP\naddress. If a literal IP address is\nsupplied, only the validity of the\naddress format is checked.</p>\n</blockquote>\n<p>So you can use it.</p>\n"}],"owner":{"account_id":356126,"reputation":2934,"user_id":695457,"accept_rate":84,"display_name":"rob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181157,"favorite_count":0,"down_vote_count":0,"up_vote_count":99,"closed_date":1338001510,"accepted_answer_id":5571816,"answer_count":2,"score":99,"last_activity_date":1679431805,"creation_date":1302117343,"question_id":5571744,"body_markdown":"&gt; **Possible Duplicate:**  \n&gt; [Is there an easy way to convert String to Inetaddress in Java?](https://stackoverflow.com/questions/2309049/is-there-an-easy-way-to-convert-string-to-inetaddress-in-java)  \n\n&lt;!-- End of automatically inserted text --&gt;\n\nI&#39;m  trying to convert a string(representing an IP address, e.g. `10.0.2.50`) into an `InetAddress` obj. \r\n\r\nAccording to the API it is possible to create an Object providing a String representing a hostname (e.g. `www.google.ch`). This is not an option for me since I do not have the hostname for each InetAddress object I want to create(besides that it takes too long).\r\n\r\nIs it possible to convert a String (e.g. `10.0.2.50`) into an `InetAddress` obj.? (according to the api it is possible to do so if you have the IP as `byte[]`, but how do I convert a `String` containing an IP into `byte[]`?)","title":"Java: Convert a String (representing an IP) to InetAddress","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"https://stackoverflow.com/questions/2309049/is-there-an-easy-way-to-convert-string-to-inetaddress-in-java\">Is there an easy way to convert String to Inetaddress in Java?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm  trying to convert a string(representing an IP address, e.g. <code>10.0.2.50</code>) into an <code>InetAddress</code> obj. </p>\n\n<p>According to the API it is possible to create an Object providing a String representing a hostname (e.g. <code>www.google.ch</code>). This is not an option for me since I do not have the hostname for each InetAddress object I want to create(besides that it takes too long).</p>\n\n<p>Is it possible to convert a String (e.g. <code>10.0.2.50</code>) into an <code>InetAddress</code> obj.? (according to the api it is possible to do so if you have the IP as <code>byte[]</code>, but how do I convert a <code>String</code> containing an IP into <code>byte[]</code>?)</p>\n"},{"tags":["java","compilation","visual-studio-code"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1521758337,"post_id":49439522,"comment_id":85881122,"body_markdown":"Read the documentation for VSCode and the Java pack?  BTW,t he link you gave for the Java pack is invalid.","body":"Read the documentation for VSCode and the Java pack?  BTW,t he link you gave for the Java pack is invalid."}],"answers":[{"comments":[{"owner":{"account_id":5063932,"reputation":3400,"user_id":4441547,"accept_rate":86,"display_name":"Aaron Franke"},"score":0,"creation_date":1547169799,"post_id":49463190,"comment_id":95109848,"body_markdown":"What about if I have multiple files in my project?","body":"What about if I have multiple files in my project?"},{"owner":{"account_id":1886776,"reputation":2985,"user_id":1705829,"accept_rate":43,"display_name":"Timo"},"score":0,"creation_date":1688846880,"post_id":49463190,"comment_id":135129872,"body_markdown":"What is `debug viewlet` for running the program, is it `settings.json` in `.vscode`?","body":"What is <code>debug viewlet</code> for running the program, is it <code>settings.json</code> in <code>.vscode</code>?"}],"tags":[],"owner":{"account_id":6263340,"reputation":374,"user_id":4869825,"display_name":"Martin Aeschlimann"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1521883919,"creation_date":1521883919,"answer_id":49463190,"question_id":49439522,"body_markdown":"As a first step, try to compile your programm from te command line. E.g.\r\nhttps://stackoverflow.com/questions/16137713/how-do-i-run-a-java-program-from-the-command-line-on-windows is a good start. You can run the commands directly in VSCode&#39;s integrated terminal.\r\nOptionally, create a VS Code build task from that command to run builds with the build command.\r\n\r\n    {\r\n        &quot;version&quot;: &quot;2.0.0&quot;,\r\n        &quot;tasks&quot;: [\r\n            {\r\n                &quot;label&quot;: &quot;Build Foo&quot;,\r\n                &quot;type&quot;: &quot;shell&quot;,\r\n                &quot;command&quot;: &quot;javac foo.java&quot;,\r\n                &quot;problemMatcher&quot;: []\r\n            }\r\n        ]\r\n    }\r\n\r\n\r\nTo run/debug, create a launch config in the debug viewlet, for example:\r\n\r\n \r\n\r\n       // Use IntelliSense to learn about possible attributes.\r\n        // Hover to view descriptions of existing attributes.\r\n        // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\r\n        &quot;version&quot;: &quot;0.2.0&quot;,\r\n        &quot;configurations&quot;: [\r\n            {\r\n                &quot;type&quot;: &quot;java&quot;,\r\n                &quot;name&quot;: &quot;Debug (Launch)-Foo&quot;,\r\n                &quot;request&quot;: &quot;launch&quot;,\r\n                &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,\r\n                &quot;console&quot;: &quot;internalConsole&quot;,\r\n                &quot;stopOnEntry&quot;: false,\r\n                &quot;mainClass&quot;: &quot;Foo&quot;,\r\n                &quot;args&quot;: &quot;&quot;\r\n            },\r\n            {\r\n                &quot;type&quot;: &quot;java&quot;,\r\n                &quot;name&quot;: &quot;Debug (Attach)&quot;,\r\n                &quot;request&quot;: &quot;attach&quot;,\r\n                &quot;hostName&quot;: &quot;localhost&quot;,\r\n                &quot;port&quot;: 0\r\n            }\r\n        ]\r\n    }\r\n\r\n","title":"How to compile and run Java code in Visual Studio Code","body":"<p>As a first step, try to compile your programm from te command line. E.g.\n<a href=\"https://stackoverflow.com/questions/16137713/how-do-i-run-a-java-program-from-the-command-line-on-windows\">How do I run a Java program from the command line on Windows?</a> is a good start. You can run the commands directly in VSCode's integrated terminal.\nOptionally, create a VS Code build task from that command to run builds with the build command.</p>\n\n<pre><code>{\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"Build Foo\",\n            \"type\": \"shell\",\n            \"command\": \"javac foo.java\",\n            \"problemMatcher\": []\n        }\n    ]\n}\n</code></pre>\n\n<p>To run/debug, create a launch config in the debug viewlet, for example:</p>\n\n<pre><code>   // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"java\",\n            \"name\": \"Debug (Launch)-Foo\",\n            \"request\": \"launch\",\n            \"cwd\": \"${workspaceFolder}\",\n            \"console\": \"internalConsole\",\n            \"stopOnEntry\": false,\n            \"mainClass\": \"Foo\",\n            \"args\": \"\"\n        },\n        {\n            \"type\": \"java\",\n            \"name\": \"Debug (Attach)\",\n            \"request\": \"attach\",\n            \"hostName\": \"localhost\",\n            \"port\": 0\n        }\n    ]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":368965,"reputation":929,"user_id":716073,"display_name":"Fergara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658812591,"creation_date":1559602412,"answer_id":56435454,"question_id":49439522,"body_markdown":"Here are the overall steps:\r\n\r\n - Install the Java Extension Pack --&gt; you did this already\r\n - Create a Java project: `Ctrl + Shift + P` and type &quot;Java&quot;. Choose the option &quot;Java: Create Java Project&quot;\r\n - Modify the App.java class and save it: `Ctrl + S`\r\n \r\nWhen you save it, VS Code automatically compiles the java files for you. In the **bin/app** directory you&#39;ll see a file called &quot;App.class&quot;. That&#39;s the confirmation you need.\r\n\r\n**Edit**: Running the project:\r\nTo run the project, hit F5. VSCode will ask if you want to add a configuration. Choose &quot;Java: Launch Program&quot;. Make sure you have App.java opened and hit F5 one more time. That&#39;s it.\r\n\r\nI noticed that VSCode does not deal well with packages, but that is for another question.","title":"How to compile and run Java code in Visual Studio Code","body":"<p>Here are the overall steps:</p>\n<ul>\n<li>Install the Java Extension Pack --&gt; you did this already</li>\n<li>Create a Java project: <code>Ctrl + Shift + P</code> and type &quot;Java&quot;. Choose the option &quot;Java: Create Java Project&quot;</li>\n<li>Modify the App.java class and save it: <code>Ctrl + S</code></li>\n</ul>\n<p>When you save it, VS Code automatically compiles the java files for you. In the <strong>bin/app</strong> directory you'll see a file called &quot;App.class&quot;. That's the confirmation you need.</p>\n<p><strong>Edit</strong>: Running the project:\nTo run the project, hit F5. VSCode will ask if you want to add a configuration. Choose &quot;Java: Launch Program&quot;. Make sure you have App.java opened and hit F5 one more time. That's it.</p>\n<p>I noticed that VSCode does not deal well with packages, but that is for another question.</p>\n"}],"owner":{"account_id":13205515,"reputation":53,"user_id":9537405,"display_name":"hgd6o"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43638,"favorite_count":0,"down_vote_count":3,"up_vote_count":5,"accepted_answer_id":49463190,"answer_count":2,"score":2,"last_activity_date":1679431584,"creation_date":1521758042,"question_id":49439522,"body_markdown":"I downloaded Visual Studio Code and installed the &quot;[Java Extension Pack][1]&quot; by Microsoft.\r\n\r\nAfterwards I downloaded the jdk1.8.0_161 and created the required environment variables as described in the &quot;Java Extension Pack&quot; documentation.\r\n\r\nI then created a new file with .java ending and wrote a simple &quot;Hello World&quot; test program.\r\n\r\nBut how can I now compile and run the code?\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack","title":"How to compile and run Java code in Visual Studio Code","body":"<p>I downloaded Visual Studio Code and installed the \"<a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"noreferrer\">Java Extension Pack</a>\" by Microsoft.</p>\n\n<p>Afterwards I downloaded the jdk1.8.0_161 and created the required environment variables as described in the \"Java Extension Pack\" documentation.</p>\n\n<p>I then created a new file with .java ending and wrote a simple \"Hello World\" test program.</p>\n\n<p>But how can I now compile and run the code?</p>\n"},{"tags":["java","algorithm","exception","math","bigint"],"comments":[{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":2,"creation_date":1679405665,"post_id":75801139,"comment_id":133713170,"body_markdown":"You cannot gain precision from an existing value that is not *already there*, simply by changing the type. If you compute `int x = 1000000000 * 1000000000`, the result will overflow a 32-bit integer, and there is **no calculation you can do with** the resulting `int` that will give you the correct result, for the simple reason that there are **many other values** that would overflow to **the same result**. You can&#39;t turn a pile of hamburgers into a cow.","body":"You cannot gain precision from an existing value that is not <i>already there</i>, simply by changing the type. If you compute <code>int x = 1000000000 * 1000000000</code>, the result will overflow a 32-bit integer, and there is <b>no calculation you can do with</b> the resulting <code>int</code> that will give you the correct result, for the simple reason that there are <b>many other values</b> that would overflow to <b>the same result</b>. You can&#39;t turn a pile of hamburgers into a cow."},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1679406261,"post_id":75801139,"comment_id":133713370,"body_markdown":"@KarlKnechtel yes, I know and agree with you. The best would be some mathematical method to preserve the value in order of magnitude. I would be particularly interested to know what others do at such situations. Maybe they transform the input numbers somehow to get a similar result in order of magnitude. Would be great to know.","body":"@KarlKnechtel yes, I know and agree with you. The best would be some mathematical method to preserve the value in order of magnitude. I would be particularly interested to know what others do at such situations. Maybe they transform the input numbers somehow to get a similar result in order of magnitude. Would be great to know."},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1679406356,"post_id":75801139,"comment_id":133713400,"body_markdown":"Are you looking for the actual mathematical algorithm? Do you need an exact result? If so, exactly how is this a *programming* question, and not a *math* question?","body":"Are you looking for the actual mathematical algorithm? Do you need an exact result? If so, exactly how is this a <i>programming</i> question, and not a <i>math</i> question?"},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1679406819,"post_id":75801139,"comment_id":133713570,"body_markdown":"@KarlKnechtel I don&#39;t need the exact number, but I have to prepare the code to give similar magnitude of results when using different number pairs. For example, in some situations I have to calculate 3 choose 2, in another situation I have to calculate 3000 choose 20. The magnitude of the result should be considered.","body":"@KarlKnechtel I don&#39;t need the exact number, but I have to prepare the code to give similar magnitude of results when using different number pairs. For example, in some situations I have to calculate 3 choose 2, in another situation I have to calculate 3000 choose 20. The magnitude of the result should be considered."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":1,"creation_date":1679422378,"post_id":75801139,"comment_id":133718551,"body_markdown":"It sounds like you don&#39;t need an exact result. If so, you can write out the binomial as a ratio of factorials and use Stirling&#39;s approximation to approximate the factorials. Another approach is to work with the logarithm of the binomial coefficient -- look for a log-gamma function and compute log(binomial) in terms of that, or just compute log(binomial) in terms of a difference of summation over log(something) terms.","body":"It sounds like you don&#39;t need an exact result. If so, you can write out the binomial as a ratio of factorials and use Stirling&#39;s approximation to approximate the factorials. Another approach is to work with the logarithm of the binomial coefficient -- look for a log-gamma function and compute log(binomial) in terms of that, or just compute log(binomial) in terms of a difference of summation over log(something) terms."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":1,"creation_date":1679422476,"post_id":75801139,"comment_id":133718574,"body_markdown":"@KarlKnechtel I don&#39;t know if you&#39;re aware of it, but your comments have an antagonistic tone which is not moving the discussion towards a constructive conclusion.","body":"@KarlKnechtel I don&#39;t know if you&#39;re aware of it, but your comments have an antagonistic tone which is not moving the discussion towards a constructive conclusion."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":0,"creation_date":1679433653,"post_id":75801139,"comment_id":133721166,"body_markdown":"@Thend Looks like there are methods in that class which return a double instead of an integer and the logarithm of the binomial coefficient. Maybe you can make use of those instead of rolling your own, just a thought.","body":"@Thend Looks like there are methods in that class which return a double instead of an integer and the logarithm of the binomial coefficient. Maybe you can make use of those instead of rolling your own, just a thought."},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1679477697,"post_id":75801139,"comment_id":133727586,"body_markdown":"@RobertDodier I have tried log(binomial) and seems working :), I will try with my whole code let&#39;s see. Thank you for your comments, I really appreciate it.","body":"@RobertDodier I have tried log(binomial) and seems working :), I will try with my whole code let&#39;s see. Thank you for your comments, I really appreciate it."}],"answers":[{"comments":[{"owner":{"account_id":2326766,"reputation":8079,"user_id":2041077,"accept_rate":40,"display_name":"Dave"},"score":0,"creation_date":1679431421,"post_id":75802412,"comment_id":133720701,"body_markdown":"This will get you the leading digits and length for values where choose(n, k) is large.","body":"This will get you the leading digits and length for values where choose(n, k) is large."},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1679478311,"post_id":75802412,"comment_id":133727732,"body_markdown":"Hi Dave, why did you use log10, instead of natural log? Does it have any advantage over the natural log? Your approach seems a mix of RobertDodier, very interesting, I like it and give it a try. :)","body":"Hi Dave, why did you use log10, instead of natural log? Does it have any advantage over the natural log? Your approach seems a mix of RobertDodier, very interesting, I like it and give it a try. :)"},{"owner":{"account_id":2326766,"reputation":8079,"user_id":2041077,"accept_rate":40,"display_name":"Dave"},"score":0,"creation_date":1679488036,"post_id":75802412,"comment_id":133730204,"body_markdown":"It felt more natural! Sorry; forgive me. I used log10 for counting digits (logsum) because we want digits in base 10. I.e., this statement: &quot;ceiling(log(n)) is the number of digits in n &gt; 1&quot; is true for log base 10, not natural log.","body":"It felt more natural! Sorry; forgive me. I used log10 for counting digits (logsum) because we want digits in base 10. I.e., this statement: &quot;ceiling(log(n)) is the number of digits in n &gt; 1&quot; is true for log base 10, not natural log."},{"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"score":0,"creation_date":1679500803,"post_id":75802412,"comment_id":133734245,"body_markdown":"I was just curious, :) thank you very much for your help!","body":"I was just curious, :) thank you very much for your help!"}],"tags":[],"owner":{"account_id":2326766,"reputation":8079,"user_id":2041077,"accept_rate":40,"display_name":"Dave"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679431357,"creation_date":1679408437,"answer_id":75802412,"question_id":75801139,"body_markdown":"Since all you need is the magnitude, this might help.\r\n\r\nceiling(log(n)) is the number of digits in n &gt; 1\r\n\r\nSo the number of digits in n! is about ceiling(log(n) + log(n-1) + ...)\r\n\r\nSo for the number of digits in choose(n,k):\r\n\r\nI&#39;ll let r = n-k and assume k &gt;= r.\r\n\r\ndigits in choose(n, k) ~ ceiling(log(n) + log(n-1) + ... + log(k+1) - log(r) - log(r-1) - ... - log(2))\r\n\r\n^^ From n down to k+1 we have numbers that are only in the numerator of choose(n, k). From k down to r+1 we have numbers that are in the denominator once (so cancel with the numerator) and from r on down we have numbers in the denominator twice (so net division).\r\n\r\nHere&#39;s Ruby implementation:\r\n\r\n    def choose_est(n, k)\r\n      r = n - k\r\n      coefficient = 1.0\r\n      logsum = 0.0\r\n      n.downto(k+1) do |val|\r\n        logsum += Math.log(val, 10)\r\n        coefficient *= val\r\n        coefficient /= 10**(Math.log(coefficient,10).floor)\r\n      end\r\n      r.downto(2) do |val|\r\n        logsum -= Math.log(val, 10)\r\n        coefficient /= val\r\n        coefficient /= 10**(Math.log(coefficient,10).floor)\r\n      end\r\n      coefficient /= 10**(Math.log(coefficient, 10).floor)\r\n      puts &quot;coefficient = #{coefficient}, digits = #{logsum.ceil}, exact = #{choose(n, k)}&quot;\r\n    end\r\n\r\nA few example results:\r\n\r\n    &gt; choose_est(25, 10)\r\n    coefficient = 3.2687599999999963, digits = 7, exact = 3268760\r\n    \r\n    &gt; choose_est(334, 179)\r\n    coefficient = 6.457698552681728, digits = 99, exact = 645769855268174723155002700285292878609673825371233277541117250760336409272009018138269061870226976\r\n\r\n    &gt;choose_est(10000, 444)\r\n    coefficient = 2.1387299915901736, digits = 788\r\n\r\n\r\nJava code for the same:\r\n\r\n    import java.lang.Math;\r\n    \r\n    public class ChooseEstimator {\r\n        public static void chooseEst(int n, int k) {\r\n            int r = n - k;\r\n            double coefficient = 1.0;\r\n            double logsum = 0.0;\r\n            for (int val = n; val &gt; k; val--) {\r\n                logsum += Math.log10(val);\r\n                coefficient *= val;\r\n                coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\r\n            }\r\n            for (int val = r; val &gt;= 2; val--) {\r\n                logsum -= Math.log10(val);\r\n                coefficient /= val;\r\n                coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\r\n            }\r\n            coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\r\n            System.out.println(&quot;coefficient = &quot; + coefficient + &quot;, digits = &quot; + (int)Math.ceil(logsum));\r\n        }\r\n    \r\n        \r\n        public static void main(String[] args) {\r\n            chooseEst(25, 10);\r\n        }\r\n    }","title":"Java CombinatoricsUtils.binomialCoefficient() arithmetic error due to large numbers","body":"<p>Since all you need is the magnitude, this might help.</p>\n<p>ceiling(log(n)) is the number of digits in n &gt; 1</p>\n<p>So the number of digits in n! is about ceiling(log(n) + log(n-1) + ...)</p>\n<p>So for the number of digits in choose(n,k):</p>\n<p>I'll let r = n-k and assume k &gt;= r.</p>\n<p>digits in choose(n, k) ~ ceiling(log(n) + log(n-1) + ... + log(k+1) - log(r) - log(r-1) - ... - log(2))</p>\n<p>^^ From n down to k+1 we have numbers that are only in the numerator of choose(n, k). From k down to r+1 we have numbers that are in the denominator once (so cancel with the numerator) and from r on down we have numbers in the denominator twice (so net division).</p>\n<p>Here's Ruby implementation:</p>\n<pre><code>def choose_est(n, k)\n  r = n - k\n  coefficient = 1.0\n  logsum = 0.0\n  n.downto(k+1) do |val|\n    logsum += Math.log(val, 10)\n    coefficient *= val\n    coefficient /= 10**(Math.log(coefficient,10).floor)\n  end\n  r.downto(2) do |val|\n    logsum -= Math.log(val, 10)\n    coefficient /= val\n    coefficient /= 10**(Math.log(coefficient,10).floor)\n  end\n  coefficient /= 10**(Math.log(coefficient, 10).floor)\n  puts &quot;coefficient = #{coefficient}, digits = #{logsum.ceil}, exact = #{choose(n, k)}&quot;\nend\n</code></pre>\n<p>A few example results:</p>\n<pre><code>&gt; choose_est(25, 10)\ncoefficient = 3.2687599999999963, digits = 7, exact = 3268760\n\n&gt; choose_est(334, 179)\ncoefficient = 6.457698552681728, digits = 99, exact = 645769855268174723155002700285292878609673825371233277541117250760336409272009018138269061870226976\n\n&gt;choose_est(10000, 444)\ncoefficient = 2.1387299915901736, digits = 788\n</code></pre>\n<p>Java code for the same:</p>\n<pre><code>import java.lang.Math;\n\npublic class ChooseEstimator {\n    public static void chooseEst(int n, int k) {\n        int r = n - k;\n        double coefficient = 1.0;\n        double logsum = 0.0;\n        for (int val = n; val &gt; k; val--) {\n            logsum += Math.log10(val);\n            coefficient *= val;\n            coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\n        }\n        for (int val = r; val &gt;= 2; val--) {\n            logsum -= Math.log10(val);\n            coefficient /= val;\n            coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\n        }\n        coefficient /= Math.pow(10, Math.floor(Math.log10(coefficient)));\n        System.out.println(&quot;coefficient = &quot; + coefficient + &quot;, digits = &quot; + (int)Math.ceil(logsum));\n    }\n\n    \n    public static void main(String[] args) {\n        chooseEst(25, 10);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":286249,"reputation":43961,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679418944,"creation_date":1679418944,"answer_id":75804408,"question_id":75801139,"body_markdown":"Here is a simple approach that does the calculation while constantly multiplying and dividing to remain (hopefully) in the range of a `double`.\r\n\r\n    public static double binomialApproximation(int n, int m) {\r\n        double k = m;\r\n        if (n - m &lt; m) {\r\n            k = n - m;\r\n        }\r\n        \r\n        double answer = 1.0;\r\n        while (0 &lt; k) {\r\n            answer *= n / k;\r\n            n--;\r\n            k--;\r\n        }\r\n        return answer;\r\n    }\r\n\r\nNote that the maximum `double` is `1.79769313486231570e+308d`.  If you wind up needing bigger numbers than that, then you need to use something like `BigDouble` or `BigDecimal` and be careful about precision, etc.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html","title":"Java CombinatoricsUtils.binomialCoefficient() arithmetic error due to large numbers","body":"<p>Here is a simple approach that does the calculation while constantly multiplying and dividing to remain (hopefully) in the range of a <code>double</code>.</p>\n<pre><code>public static double binomialApproximation(int n, int m) {\n    double k = m;\n    if (n - m &lt; m) {\n        k = n - m;\n    }\n    \n    double answer = 1.0;\n    while (0 &lt; k) {\n        answer *= n / k;\n        n--;\n        k--;\n    }\n    return answer;\n}\n</code></pre>\n<p>Note that the maximum <code>double</code> is <code>1.79769313486231570e+308d</code>.  If you wind up needing bigger numbers than that, then you need to use something like <code>BigDouble</code> or <code>BigDecimal</code> and be careful about precision, etc.</p>\n"}],"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1679431357,"creation_date":1679401238,"question_id":75801139,"body_markdown":"When I try to calculate the combination of large numbers, **e.g. 334 choose 179**, using the Java Apache Math3 `CombinatoricsUtils.binomialCoefficient()` method, I receive an `Exception in thread &quot;main&quot; org.apache.commons.math3.exception.MathArithmeticException: arithmetic exception`\r\n\r\nI&#39;m aware that this is due to large numbers (most probably), so I have checked several StackOverflow post to fix it, however without success.\r\n\r\nMy original code:\r\n\r\n    public static void testCombinations(){\r\n        long test = CombinatoricsUtils.binomialCoefficient(334, 179);\r\n        System.out.println(test);\r\n    }\r\n\r\nI modified it to suit big numbers:\r\n\r\n    public static void testCombinations(){\r\n        BigInteger test = BigInteger.valueOf(CombinatoricsUtils.binomialCoefficient(334, 179));\r\n        System.out.println(test);\r\n    }\r\n\r\nHowever this doesn&#39;t solve the problem. I have checked the value of this example using a standard calculator, with &lt;sup&gt;n&lt;/sup&gt;C&lt;sub&gt;r&lt;/sub&gt;(334,179), and it is **6.45769855268175x10^98**. I don&#39;t need such a long number maybe the beginning of the number, maybe the first 5 or 10 character should be enough. But probably the error generated during the calculation. How should I deal with this issue?\r\n\r\n**UPDATE:**\r\n\r\nI further modified my code:\r\n\r\n&gt;     public static void testCombinations(){\r\n&gt;         int n = 344;\r\n&gt;         int k = 179;\r\n&gt;         double test;\r\n&gt;         test = (long) CombinatoricsUtils.binomialCoefficientDouble(n, k);\r\n&gt;         System.out.println(test);\r\n&gt;     }\r\n\r\nHowever, this only capable of not throwing the exception. The resulting value (**9.223372036854776E18**) is always the same, even with a similarly large number, e.g. 358 choose 179. I assume this value is the maximum of long. So, no solution yet.","title":"Java CombinatoricsUtils.binomialCoefficient() arithmetic error due to large numbers","body":"<p>When I try to calculate the combination of large numbers, <strong>e.g. 334 choose 179</strong>, using the Java Apache Math3 <code>CombinatoricsUtils.binomialCoefficient()</code> method, I receive an <code>Exception in thread &quot;main&quot; org.apache.commons.math3.exception.MathArithmeticException: arithmetic exception</code></p>\n<p>I'm aware that this is due to large numbers (most probably), so I have checked several StackOverflow post to fix it, however without success.</p>\n<p>My original code:</p>\n<pre><code>public static void testCombinations(){\n    long test = CombinatoricsUtils.binomialCoefficient(334, 179);\n    System.out.println(test);\n}\n</code></pre>\n<p>I modified it to suit big numbers:</p>\n<pre><code>public static void testCombinations(){\n    BigInteger test = BigInteger.valueOf(CombinatoricsUtils.binomialCoefficient(334, 179));\n    System.out.println(test);\n}\n</code></pre>\n<p>However this doesn't solve the problem. I have checked the value of this example using a standard calculator, with <sup>n</sup>C<sub>r</sub>(334,179), and it is <strong>6.45769855268175x10^98</strong>. I don't need such a long number maybe the beginning of the number, maybe the first 5 or 10 character should be enough. But probably the error generated during the calculation. How should I deal with this issue?</p>\n<p><strong>UPDATE:</strong></p>\n<p>I further modified my code:</p>\n<blockquote>\n<pre><code>public static void testCombinations(){\n    int n = 344;\n    int k = 179;\n    double test;\n    test = (long) CombinatoricsUtils.binomialCoefficientDouble(n, k);\n    System.out.println(test);\n}\n</code></pre>\n</blockquote>\n<p>However, this only capable of not throwing the exception. The resulting value (<strong>9.223372036854776E18</strong>) is always the same, even with a similarly large number, e.g. 358 choose 179. I assume this value is the maximum of long. So, no solution yet.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1679429947,"post_id":75805961,"comment_id":133720393,"body_markdown":"Because `finally` blocks **must** evaluate after their associated `try`s; regardless of exceptions - and no, it can&#39;t jump back to an enclosed `try` to do so, it&#39;s always in the local call stack. Here it should probably be using a `try-with-Resources`.","body":"Because <code>finally</code> blocks <b>must</b> evaluate after their associated <code>try</code>s; regardless of exceptions - and no, it can&#39;t jump back to an enclosed <code>try</code> to do so, it&#39;s always in the local call stack. Here it should probably be using a <code>try-with-Resources</code>."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1679429984,"post_id":75805961,"comment_id":133720399,"body_markdown":"By design. Why do you expect that the outer `catch` block is executed first and then goes back into the inner code block (it just left) to call its `finally` block?","body":"By design. Why do you expect that the outer <code>catch</code> block is executed first and then goes back into the inner code block (it just left) to call its <code>finally</code> block?"},{"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"score":0,"creation_date":1679430050,"post_id":75805961,"comment_id":133720417,"body_markdown":"Yes, that&#39;s what I expect. A &quot;finally&quot; is something that&#39;s *final* . I was always taught it happens at the very end, regardless of what comes before.","body":"Yes, that&#39;s what I expect. A &quot;finally&quot; is something that&#39;s <i>final</i> . I was always taught it happens at the very end, regardless of what comes before."},{"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"score":0,"creation_date":1679430414,"post_id":75805961,"comment_id":133720488,"body_markdown":"Correct. In my understanding a `finally` is something that&#39;s final and should execute after the appropriate catch handler.","body":"Correct. In my understanding a <code>finally</code> is something that&#39;s final and should execute after the appropriate catch handler."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1679430447,"post_id":75805961,"comment_id":133720497,"body_markdown":"yes, it is final in the called method, not in the calling method (since it is declared in the called method and not in the calling one) - also consider that the method chain can be much longer, varios methods being called,  and some `catch` block could (in your scenario) destroy (release resources, close connections, closing GUI, ....) something needed in the `finally` block of the called method","body":"yes, it is final in the called method, not in the calling method (since it is declared in the called method and not in the calling one) - also consider that the method chain can be much longer, varios methods being called,  and some <code>catch</code> block could (in your scenario) destroy (release resources, close connections, closing GUI, ....) something needed in the <code>finally</code> block of the called method"}],"answers":[{"comments":[{"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"score":0,"creation_date":1679430805,"post_id":75806064,"comment_id":133720576,"body_markdown":"This doesn&#39;t make sense to me. On exceptions, It&#39;s the `catch` block that is executed after the `try` block, not `finally`, isn&#39;t it? Even if you had a regular `try/catch/finally` sequence, and there was an exception, the flow wouldn&#39;t go to `finally` immediately, it would go to `catch`, wouldn&#39;t it?","body":"This doesn&#39;t make sense to me. On exceptions, It&#39;s the <code>catch</code> block that is executed after the <code>try</code> block, not <code>finally</code>, isn&#39;t it? Even if you had a regular <code>try&#47;catch&#47;finally</code> sequence, and there was an exception, the flow wouldn&#39;t go to <code>finally</code> immediately, it would go to <code>catch</code>, wouldn&#39;t it?"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1679431006,"post_id":75806064,"comment_id":133720621,"body_markdown":"@geneb.:  That&#39;s because everything happens in the same frame in the call stack.  First sequence - bang, try-catch-finally gets executed in that order.  In a nested call, you have a try that calls out to something else that has a try-finally, and then the try-finally either do or don&#39;t complete successfully - well, the `finally` still must fire.  Maybe the relevant parts I omitted from the spec for brevity are relevant after all...","body":"@geneb.:  That&#39;s because everything happens in the same frame in the call stack.  First sequence - bang, try-catch-finally gets executed in that order.  In a nested call, you have a try that calls out to something else that has a try-finally, and then the try-finally either do or don&#39;t complete successfully - well, the <code>finally</code> still must fire.  Maybe the relevant parts I omitted from the spec for brevity are relevant after all..."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1679431911,"post_id":75806064,"comment_id":133720803,"body_markdown":"It&#39;s &quot;the `catch` block that *belongs to the `try`*&quot; which is executed before `finally`. The called function doesn&#39;t even know whether the caller has a `catch`.","body":"It&#39;s &quot;the <code>catch</code> block that <i>belongs to the <code>try</code></i>&quot; which is executed before <code>finally</code>. The called function doesn&#39;t even know whether the caller has a <code>catch</code>."}],"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679431102,"creation_date":1679430481,"answer_id":75806064,"question_id":75805961,"body_markdown":"This makes sense because of how `finally` blocks are determined to be executed [by the language standard](https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.2).  For your example, this also happens in two separate calls, so semantics are typically `try-catch-finally` in each frame in the call stack.\r\n\r\nThe most relevant parts are here:\r\n\r\n&gt; A try statement with a finally block is executed by first executing\r\n&gt; the try block. Then there is a choice:\r\n&gt; \r\n&gt; - If execution of the try block completes normally, then the finally block is executed, and then there is a choice:\r\n&gt; \r\n&gt;   - If the finally block completes normally, then the try statement completes normally.\r\n&gt; \r\n&gt;   - If the finally block completes abruptly for reason S, then the try statement completes abruptly for reason S.\r\n&gt; \r\n&gt;\r\n&gt; ... (There&#39;s a part here about if the try block completes abnormally because you intentionally declared a `throw`, but that&#39;s not needed for this discussion.)\r\n&gt;\r\n&gt; - If execution of the try block completes abruptly for any other reason R, then the finally block is executed, and then there is a choice:\r\n&gt;\r\n&gt;   -  If the finally block completes normally, then the try statement completes abruptly for reason R.\r\n&gt; \r\n&gt;   - If the finally block completes abruptly for reason S, then the try statement completes abruptly for reason S (and reason R is discarded).\r\n\r\nIn **all** cases, the `finally` block is executed after the `try` block for which it is declared after.\r\n\r\nThis also means if your `finally` block encounters an exception, it will bubble up the exception through the call chain to a suitable `catch` block (or all the way up if no such `catch` exists).\r\n\r\nTo bring the example closer, the big thing to note is that your calls are as follows:\r\n\r\n - try\r\n   - try\r\n   - finally\r\n - catch\r\n\r\nYour nested try-finally statement will always conclude - either normally or abruptly for any given reason - before any exception is bubbled back to the previous call in the stack.","title":"Sub-method&#39;s finally{..} is performed before calling parent method&#39;s catch()","body":"<p>This makes sense because of how <code>finally</code> blocks are determined to be executed <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.2\" rel=\"nofollow noreferrer\">by the language standard</a>.  For your example, this also happens in two separate calls, so semantics are typically <code>try-catch-finally</code> in each frame in the call stack.</p>\n<p>The most relevant parts are here:</p>\n<blockquote>\n<p>A try statement with a finally block is executed by first executing\nthe try block. Then there is a choice:</p>\n<ul>\n<li><p>If execution of the try block completes normally, then the finally block is executed, and then there is a choice:</p>\n<ul>\n<li><p>If the finally block completes normally, then the try statement completes normally.</p>\n</li>\n<li><p>If the finally block completes abruptly for reason S, then the try statement completes abruptly for reason S.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>... (There's a part here about if the try block completes abnormally because you intentionally declared a <code>throw</code>, but that's not needed for this discussion.)</p>\n<ul>\n<li><p>If execution of the try block completes abruptly for any other reason R, then the finally block is executed, and then there is a choice:</p>\n<ul>\n<li><p>If the finally block completes normally, then the try statement completes abruptly for reason R.</p>\n</li>\n<li><p>If the finally block completes abruptly for reason S, then the try statement completes abruptly for reason S (and reason R is discarded).</p>\n</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p>In <strong>all</strong> cases, the <code>finally</code> block is executed after the <code>try</code> block for which it is declared after.</p>\n<p>This also means if your <code>finally</code> block encounters an exception, it will bubble up the exception through the call chain to a suitable <code>catch</code> block (or all the way up if no such <code>catch</code> exists).</p>\n<p>To bring the example closer, the big thing to note is that your calls are as follows:</p>\n<ul>\n<li>try\n<ul>\n<li>try</li>\n<li>finally</li>\n</ul>\n</li>\n<li>catch</li>\n</ul>\n<p>Your nested try-finally statement will always conclude - either normally or abruptly for any given reason - before any exception is bubbled back to the previous call in the stack.</p>\n"}],"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679431102,"creation_date":1679429603,"question_id":75805961,"body_markdown":"I have an outer method that tries and catches exceptions coming from an inner method,\r\n\r\n    try {\r\n       process();\r\n    } catch (Exception e) {\r\n      //...\r\n    }\r\n\r\nThe inner method `throws Exception` to the parent, but also has a `finally{..}` because it needs to close some connections. It does not have a `catch` block itself.\r\n\r\n        public void process() throws Exception {\r\n            try {\r\n               // Open connections, etc.\r\n            }\r\n            finally {  \r\n               // Method has no catch() but a finally{..} is required to close connections\r\n               if (ftpConn != null) {\r\n                   ftpConn.close();\r\n               }\r\n               // etc.\r\n            }\r\n        }\r\n\r\nI see in the debugger that if `process()` has an exception, its `finally` is executed **first** before getting to the outer caller&#39;s `catch`. This is counterintuitive to me because I expected the outer caller&#39;s `catch()` to be executed first, and then the inner method&#39;s `finally`. Just wanted to verify why this happens. In a regular try/catch/finally sequence, `catch` always happens first, and `finally` last.","title":"Sub-method&#39;s finally{..} is performed before calling parent method&#39;s catch()","body":"<p>I have an outer method that tries and catches exceptions coming from an inner method,</p>\n<pre><code>try {\n   process();\n} catch (Exception e) {\n  //...\n}\n</code></pre>\n<p>The inner method <code>throws Exception</code> to the parent, but also has a <code>finally{..}</code> because it needs to close some connections. It does not have a <code>catch</code> block itself.</p>\n<pre><code>    public void process() throws Exception {\n        try {\n           // Open connections, etc.\n        }\n        finally {  \n           // Method has no catch() but a finally{..} is required to close connections\n           if (ftpConn != null) {\n               ftpConn.close();\n           }\n           // etc.\n        }\n    }\n</code></pre>\n<p>I see in the debugger that if <code>process()</code> has an exception, its <code>finally</code> is executed <strong>first</strong> before getting to the outer caller's <code>catch</code>. This is counterintuitive to me because I expected the outer caller's <code>catch()</code> to be executed first, and then the inner method's <code>finally</code>. Just wanted to verify why this happens. In a regular try/catch/finally sequence, <code>catch</code> always happens first, and <code>finally</code> last.</p>\n"},{"tags":["java","jpa","jpql"],"comments":[{"owner":{"account_id":953294,"reputation":2389,"user_id":1090666,"display_name":"Mike Ryan"},"score":0,"creation_date":1532723160,"post_id":4378824,"comment_id":90097069,"body_markdown":"This is a duplicate of https://stackoverflow.com/questions/1557085/setting-a-parameter-as-a-list-for-an-in-expression#7967570 but this thread provides useful answers.","body":"This is a duplicate of <a href=\"https://stackoverflow.com/questions/1557085/setting-a-parameter-as-a-list-for-an-in-expression#7967570\" title=\"setting a parameter as a list for an in expression%237967570\">stackoverflow.com/questions/1557085/&hellip;</a> but this thread provides useful answers."}],"answers":[{"comments":[{"owner":{"account_id":262192,"reputation":5128,"user_id":546888,"accept_rate":68,"display_name":"Gunjan Shah"},"score":9,"creation_date":1353752873,"post_id":4379008,"comment_id":18542654,"body_markdown":"Nope ... I my case its opposite. If I use :inclList then its not working. If I use  IN (:inclList) then it works.","body":"Nope ... I my case its opposite. If I use :inclList then its not working. If I use  IN (:inclList) then it works."},{"owner":{"account_id":115937,"reputation":4910,"user_id":304179,"accept_rate":75,"display_name":"dube"},"score":2,"creation_date":1395398832,"post_id":4379008,"comment_id":34330661,"body_markdown":"Also note mentioning: the type of your param has to be an collection (not an array) of objects. The objects must match the type of the field. .toString() is no substitute for class String","body":"Also note mentioning: the type of your param has to be an collection (not an array) of objects. The objects must match the type of the field. .toString() is no substitute for class String"},{"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"score":2,"creation_date":1407939037,"post_id":4379008,"comment_id":39409640,"body_markdown":"I think this is something that has changed with the versions of Hibernate, as far as I can remember I have gotten an error when not having the paranthesis around the variable when using IN. Strange if it&#39;s not backwards compatible..","body":"I think this is something that has changed with the versions of Hibernate, as far as I can remember I have gotten an error when not having the paranthesis around the variable when using IN. Strange if it&#39;s not backwards compatible.."},{"owner":{"account_id":167796,"reputation":1319,"user_id":392831,"accept_rate":92,"display_name":"Mat"},"score":1,"creation_date":1457686822,"post_id":4379008,"comment_id":59528519,"body_markdown":"This was indeed an hibernate bug (the need of parenthesis) that&#39;s been fixed in 3.6.1","body":"This was indeed an hibernate bug (the need of parenthesis) that&#39;s been fixed in 3.6.1"},{"owner":{"account_id":3417653,"reputation":196,"user_id":2866069,"display_name":"Mahttias Schrebi&#233;r"},"score":2,"creation_date":1477382400,"post_id":4379008,"comment_id":67731217,"body_markdown":"For related question: In case of very large list there could be limitations for the in implementation. E.g. oracle 11g. max. 1000 list elements as parameter are possible. A workaround is to chop the list in subLists and collect the results. JPA itself does not restrict the list size.","body":"For related question: In case of very large list there could be limitations for the in implementation. E.g. oracle 11g. max. 1000 list elements as parameter are possible. A workaround is to chop the list in subLists and collect the results. JPA itself does not restrict the list size."},{"owner":{"account_id":5672288,"reputation":294,"user_id":4486592,"display_name":"Guilherme Taffarel Bergamin"},"score":0,"creation_date":1628876726,"post_id":4379008,"comment_id":121546912,"body_markdown":"It did work. Thanks for that. Now, how do I make this an optional filter? `:inclList IS NULL OR el.name IN : inclList` throws `QuerySyntaxException: unexpected AST node` because it concatenates the whole list in the first part as well.","body":"It did work. Thanks for that. Now, how do I make this an optional filter? <code>:inclList IS NULL OR el.name IN : inclList</code> throws <code>QuerySyntaxException: unexpected AST node</code> because it concatenates the whole list in the first part as well."}],"tags":[],"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"comment_count":6,"down_vote_count":0,"up_vote_count":219,"is_accepted":true,"score":219,"last_activity_date":1291739352,"creation_date":1291739352,"answer_id":4379008,"question_id":4378824,"body_markdown":"When using `IN` with a collection-valued parameter you  don&#39;t need `(...)`:\r\n\r\n    @NamedQuery(name = &quot;EventLog.viewDatesInclude&quot;, \r\n        query = &quot;SELECT el FROM EventLog el WHERE el.timeMark &gt;= :dateFrom AND &quot; \r\n        + &quot;el.timeMark &lt;= :dateTo AND &quot; \r\n        + &quot;el.name IN :inclList&quot;) \r\n","title":"Adding IN clause List to a JPA Query","body":"<p>When using <code>IN</code> with a collection-valued parameter you  don't need <code>(...)</code>:</p>\n\n<pre><code>@NamedQuery(name = \"EventLog.viewDatesInclude\", \n    query = \"SELECT el FROM EventLog el WHERE el.timeMark &gt;= :dateFrom AND \" \n    + \"el.timeMark &lt;= :dateTo AND \" \n    + \"el.name IN :inclList\") \n</code></pre>\n"},{"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1672147352,"post_id":8621706,"comment_id":132229131,"body_markdown":"Thank you for showing a brief but complete example.","body":"Thank you for showing a brief but complete example."}],"tags":[],"owner":{"account_id":915105,"reputation":598,"user_id":1114134,"display_name":"user1114134"},"comment_count":1,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1324691746,"creation_date":1324684967,"answer_id":8621706,"question_id":4378824,"body_markdown":"    public List&lt;DealInfo&gt; getDealInfos(List&lt;String&gt; dealIds) {\r\n    \t\tString queryStr = &quot;SELECT NEW com.admin.entity.DealInfo(deal.url, deal.url, deal.url, deal.url, deal.price, deal.value) &quot; + &quot;FROM Deal AS deal where deal.id in :inclList&quot;;\r\n    \t\tTypedQuery&lt;DealInfo&gt; query = em.createQuery(queryStr, DealInfo.class);\r\n    \t\tquery.setParameter(&quot;inclList&quot;, dealIds);\r\n    \t\treturn query.getResultList();\r\n    \t}\r\n\r\nWorks for me with JPA 2, Jboss 7.0.2\r\n","title":"Adding IN clause List to a JPA Query","body":"<pre><code>public List&lt;DealInfo&gt; getDealInfos(List&lt;String&gt; dealIds) {\n        String queryStr = \"SELECT NEW com.admin.entity.DealInfo(deal.url, deal.url, deal.url, deal.url, deal.price, deal.value) \" + \"FROM Deal AS deal where deal.id in :inclList\";\n        TypedQuery&lt;DealInfo&gt; query = em.createQuery(queryStr, DealInfo.class);\n        query.setParameter(\"inclList\", dealIds);\n        return query.getResultList();\n    }\n</code></pre>\n\n<p>Works for me with JPA 2, Jboss 7.0.2</p>\n"},{"comments":[{"owner":{"account_id":3161015,"reputation":3091,"user_id":2672137,"accept_rate":80,"display_name":"Rob L"},"score":6,"creation_date":1437757916,"post_id":21341663,"comment_id":51181795,"body_markdown":"Thank you for distinguishing the older versions of Hibernate use ()","body":"Thank you for distinguishing the older versions of Hibernate use ()"}],"tags":[],"owner":{"account_id":3907007,"reputation":1228,"user_id":3233440,"display_name":"Jose Ferrer"},"comment_count":1,"down_vote_count":0,"up_vote_count":106,"is_accepted":false,"score":106,"last_activity_date":1409126639,"creation_date":1390594445,"answer_id":21341663,"question_id":4378824,"body_markdown":"The proper JPA query format would be:\r\n\r\n    el.name IN :inclList\r\n\r\nIf you&#39;re using an older version of Hibernate as your provider you have to write:\r\n\r\n    el.name IN (:inclList)\r\n\r\nbut that is a bug ([HHH-5126](https://hibernate.atlassian.net/browse/HHH-5126)) (EDIT: which has been resolved by now).","title":"Adding IN clause List to a JPA Query","body":"<p>The proper JPA query format would be:</p>\n\n<pre><code>el.name IN :inclList\n</code></pre>\n\n<p>If you're using an older version of Hibernate as your provider you have to write:</p>\n\n<pre><code>el.name IN (:inclList)\n</code></pre>\n\n<p>but that is a bug (<a href=\"https://hibernate.atlassian.net/browse/HHH-5126\" rel=\"noreferrer\">HHH-5126</a>) (EDIT: which has been resolved by now).</p>\n"},{"comments":[{"owner":{"account_id":330384,"reputation":1345,"user_id":654471,"display_name":"cabaji99"},"score":0,"creation_date":1512159698,"post_id":34297903,"comment_id":82160427,"body_markdown":"Thx this answer helped me","body":"Thx this answer helped me"},{"owner":{"account_id":12328392,"reputation":879,"user_id":8995178,"display_name":"Sami Haroon"},"score":0,"creation_date":1604776210,"post_id":34297903,"comment_id":114452219,"body_markdown":"This is best answer.","body":"This is best answer."}],"tags":[],"owner":{"account_id":7477791,"reputation":311,"user_id":5683647,"display_name":"Wesley Rocha"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1679431093,"creation_date":1450208297,"answer_id":34297903,"question_id":4378824,"body_markdown":"You should convert to `List` as shown below:\r\n\r\n\t\tString[] valores = hierarquia.split(&quot;.&quot;);\t\t\r\n\t\tList&lt;String&gt; lista =  Arrays.asList(valores);\r\n\t\t\r\n\t\tString jpqlQuery = &quot;SELECT a &quot; +\r\n\t\t\t\t&quot;FROM AcessoScr a &quot; +\r\n\t\t\t\t&quot;WHERE a.scr IN :param &quot;;\r\n\t\t\r\n\t\tQuery query = getEntityManager().createQuery(jpqlQuery, AcessoScr.class);\t\t\t\t\t\r\n\t\tquery.setParameter(&quot;param&quot;, lista);\t\t\r\n\t\tList&lt;AcessoScr&gt; acessos = query.getResultList();","title":"Adding IN clause List to a JPA Query","body":"<p>You should convert to <code>List</code> as shown below:</p>\n<pre><code>    String[] valores = hierarquia.split(&quot;.&quot;);       \n    List&lt;String&gt; lista =  Arrays.asList(valores);\n    \n    String jpqlQuery = &quot;SELECT a &quot; +\n            &quot;FROM AcessoScr a &quot; +\n            &quot;WHERE a.scr IN :param &quot;;\n    \n    Query query = getEntityManager().createQuery(jpqlQuery, AcessoScr.class);                   \n    query.setParameter(&quot;param&quot;, lista);     \n    List&lt;AcessoScr&gt; acessos = query.getResultList();\n</code></pre>\n"}],"owner":{"account_id":250629,"reputation":9713,"user_id":527470,"accept_rate":76,"display_name":"AlanObject"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":372979,"favorite_count":0,"down_vote_count":0,"up_vote_count":161,"accepted_answer_id":4379008,"answer_count":4,"score":161,"last_activity_date":1679431093,"creation_date":1291738335,"question_id":4378824,"body_markdown":"I have built a NamedQuery that looks like this:\r\n\r\n    @NamedQuery(name = &quot;EventLog.viewDatesInclude&quot;,\r\n            query = &quot;SELECT el FROM EventLog el WHERE el.timeMark &gt;= :dateFrom AND &quot;\r\n            + &quot;el.timeMark &lt;= :dateTo AND &quot;\r\n            + &quot;el.name IN (:inclList)&quot;)\r\n\r\nWhat I want to do is fill in the parameter :inclList with a list of items instead of one item.  For example if I have a `new List&lt;String&gt;() { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; }` how do I get that in the :inclList parameter?  It only lets me codify one string.   For example:\r\n\r\n    setParameter(&quot;inclList&quot;, &quot;a&quot;) // works\r\n    \r\n    setParameter(&quot;inclList&quot;, &quot;a, b&quot;) // does not work\r\n    \r\n    setParameter(&quot;inclList&quot;, &quot;&#39;a&#39;, &#39;b&#39;&quot;) // does not work\r\n    \r\n    setParameter(&quot;inclList&quot;, list) // throws an exception\r\n\r\nI know I could just build a string and build the whole Query from that, but I wanted to avoid the overhead.   Is there a better way of doing this?\r\n\r\nRelated question: if the List is very large, is there any good way of building query like that? ","title":"Adding IN clause List to a JPA Query","body":"<p>I have built a NamedQuery that looks like this:</p>\n\n<pre><code>@NamedQuery(name = \"EventLog.viewDatesInclude\",\n        query = \"SELECT el FROM EventLog el WHERE el.timeMark &gt;= :dateFrom AND \"\n        + \"el.timeMark &lt;= :dateTo AND \"\n        + \"el.name IN (:inclList)\")\n</code></pre>\n\n<p>What I want to do is fill in the parameter :inclList with a list of items instead of one item.  For example if I have a <code>new List&lt;String&gt;() { \"a\", \"b\", \"c\" }</code> how do I get that in the :inclList parameter?  It only lets me codify one string.   For example:</p>\n\n<pre><code>setParameter(\"inclList\", \"a\") // works\n\nsetParameter(\"inclList\", \"a, b\") // does not work\n\nsetParameter(\"inclList\", \"'a', 'b'\") // does not work\n\nsetParameter(\"inclList\", list) // throws an exception\n</code></pre>\n\n<p>I know I could just build a string and build the whole Query from that, but I wanted to avoid the overhead.   Is there a better way of doing this?</p>\n\n<p>Related question: if the List is very large, is there any good way of building query like that? </p>\n"},{"tags":["java","windows","jna","advapi32"],"answers":[{"tags":[],"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679431012,"creation_date":1679431012,"answer_id":75806127,"question_id":75787339,"body_markdown":"The fact that you&#39;re using JNA to interact with the Windows API isn&#39;t really relevant here.  Ultimately you&#39;re just using the [LogonUserW][1] function.\r\n\r\nThe return value from that, `phToken`, is a pointer to a `HANDLE`.  This handle is just a 64-bit value which represents the actual user logon token, but you&#39;re only working with a process-local copy of it.  You also don&#39;t directly interact with the token, but only use a set of API methods using that handle (or a pointer to it) to manipulate it. \r\n\r\nThe API specifies that you should close the handle when you&#39;re done with it, otherwise you&#39;d leak resources.  And once it&#39;s closed, that 64-bit value has no meaning.  If you request another handle, it very well may be a different 64-bit number.\r\n\r\nOnce the current process ends, the handle would be automatically closed anyway.\r\n\r\nSo ultimately, if you want to store that 64-bit number in a database somewhere, you&#39;re welcome to do so.  It would only be usable by the same process that created it, as long as that handle wasn&#39;t closed, in which case there is likely no need for external storage.\r\n\r\nIf you do have such a use case, you would simply recreate the `HANDLE` (the token representation) which you could use to instantiate a `HANDLEByReference` if needed.  You can create the handle from a `Pointer` which you can set the peer value to the 64-bit number you retrieved earlier.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-logonuserw","title":"how to persist or re-use impersonate token in windows?","body":"<p>The fact that you're using JNA to interact with the Windows API isn't really relevant here.  Ultimately you're just using the <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-logonuserw\" rel=\"nofollow noreferrer\">LogonUserW</a> function.</p>\n<p>The return value from that, <code>phToken</code>, is a pointer to a <code>HANDLE</code>.  This handle is just a 64-bit value which represents the actual user logon token, but you're only working with a process-local copy of it.  You also don't directly interact with the token, but only use a set of API methods using that handle (or a pointer to it) to manipulate it.</p>\n<p>The API specifies that you should close the handle when you're done with it, otherwise you'd leak resources.  And once it's closed, that 64-bit value has no meaning.  If you request another handle, it very well may be a different 64-bit number.</p>\n<p>Once the current process ends, the handle would be automatically closed anyway.</p>\n<p>So ultimately, if you want to store that 64-bit number in a database somewhere, you're welcome to do so.  It would only be usable by the same process that created it, as long as that handle wasn't closed, in which case there is likely no need for external storage.</p>\n<p>If you do have such a use case, you would simply recreate the <code>HANDLE</code> (the token representation) which you could use to instantiate a <code>HANDLEByReference</code> if needed.  You can create the handle from a <code>Pointer</code> which you can set the peer value to the 64-bit number you retrieved earlier.</p>\n"}],"owner":{"account_id":5684060,"reputation":1093,"user_id":4494166,"accept_rate":0,"display_name":"Ravi Soni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679431012,"creation_date":1679295538,"question_id":75787339,"body_markdown":"I&#39;m using\r\n\r\nDependency: implementation group: &quot;net.java.dev.jna&quot;, name: &quot;jna&quot;\r\n\r\nCode:\r\n\r\n    PointerByReference phToken = new PointerByReference();\r\n    advapi32.LogonUserW(new WString(username), new WString(domain), new WString(password), 3, 0, phToken);\r\n\r\nNow i need to re-use the phToken, so that i don&#39;t need to login again. I was thinking to extract out the token, and persist that in db, and then re-use as per need. but, i was not able to extract out the token, hence facing difficulty in that. Please guide me, how to re-use the token. Also, this token i can&#39;t persist/save in windows, it will be another service, so will have to send this as json to another service.\r\n\r\n","title":"how to persist or re-use impersonate token in windows?","body":"<p>I'm using</p>\n<p>Dependency: implementation group: &quot;net.java.dev.jna&quot;, name: &quot;jna&quot;</p>\n<p>Code:</p>\n<pre><code>PointerByReference phToken = new PointerByReference();\nadvapi32.LogonUserW(new WString(username), new WString(domain), new WString(password), 3, 0, phToken);\n</code></pre>\n<p>Now i need to re-use the phToken, so that i don't need to login again. I was thinking to extract out the token, and persist that in db, and then re-use as per need. but, i was not able to extract out the token, hence facing difficulty in that. Please guide me, how to re-use the token. Also, this token i can't persist/save in windows, it will be another service, so will have to send this as json to another service.</p>\n"},{"tags":["java","url","syntax","uri","protocols"],"owner":{"account_id":25527246,"reputation":11,"user_id":19316063,"display_name":"Nevras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679430633,"creation_date":1679430633,"question_id":75806079,"body_markdown":"Let&#39;s say we have three URLs as Strings:\r\n```\r\nString urlString1 = &quot;https://syntaxsyntax&quot;;\r\nString urlString2 = &quot;https:/syntaxsyntax&quot;;\r\nString urlString3 = &quot;https:///////google.com/&quot;;\r\n```\r\n\r\nWhen we create a `new URL` based on each String above, after the \r\n```\r\nString host = url.getHost(); \r\n```\r\nwe will get `host == &quot;&quot;` (empty String). As a result, after next step\r\n```\r\nnew Inet(InetAdress.getByName(host).getHostAddress())\r\n```\r\nI get null or a local address.\r\n\r\nFor example, we know that the first two Strings are incorrect as URL and I should somehow be able to verify them before processing further code. But the third String is correct-ish - or at least the browser opens the page correctly when inserted into the address bar.\r\n\r\nI tried creating URL and URI, catch exceptions from them - yet all passed. \r\n\r\nI tried `uri.normalize()` - yet it doesn&#39;t change anything\r\n\r\nBy the way, can someone explain me, why `uri.normalize()` would change `https:////xyz` into `https:/xyz` instead of `https://xyz`? Why it wouldn&#39;t also add missing slash after protocol `https:/qwerty` ?\r\n\r\nIs there an option to verify URLs like above without using syntax patterns?","title":"Java - verify url with improper syntax, i.e. one leaving getHost == &quot;&quot;","body":"<p>Let's say we have three URLs as Strings:</p>\n<pre><code>String urlString1 = &quot;https://syntaxsyntax&quot;;\nString urlString2 = &quot;https:/syntaxsyntax&quot;;\nString urlString3 = &quot;https:///////google.com/&quot;;\n</code></pre>\n<p>When we create a <code>new URL</code> based on each String above, after the</p>\n<pre><code>String host = url.getHost(); \n</code></pre>\n<p>we will get <code>host == &quot;&quot;</code> (empty String). As a result, after next step</p>\n<pre><code>new Inet(InetAdress.getByName(host).getHostAddress())\n</code></pre>\n<p>I get null or a local address.</p>\n<p>For example, we know that the first two Strings are incorrect as URL and I should somehow be able to verify them before processing further code. But the third String is correct-ish - or at least the browser opens the page correctly when inserted into the address bar.</p>\n<p>I tried creating URL and URI, catch exceptions from them - yet all passed.</p>\n<p>I tried <code>uri.normalize()</code> - yet it doesn't change anything</p>\n<p>By the way, can someone explain me, why <code>uri.normalize()</code> would change <code>https:////xyz</code> into <code>https:/xyz</code> instead of <code>https://xyz</code>? Why it wouldn't also add missing slash after protocol <code>https:/qwerty</code> ?</p>\n<p>Is there an option to verify URLs like above without using syntax patterns?</p>\n"},{"tags":["java","docker","performance","tomcat","jvm-arguments"],"comments":[{"owner":{"account_id":8415430,"reputation":2566,"user_id":6316044,"display_name":"Emmanuel Collin"},"score":1,"creation_date":1679494172,"post_id":75806002,"comment_id":133732097,"body_markdown":"Take thread dumps to see where the time is spent. A jsp page is not a static resource. By default, a JSP is converted to a servlet and is compiled at the first invocation. This could explain your response time.","body":"Take thread dumps to see where the time is spent. A jsp page is not a static resource. By default, a JSP is converted to a servlet and is compiled at the first invocation. This could explain your response time."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679495060,"post_id":75806002,"comment_id":133732395,"body_markdown":"keyword: `pre-compiling JSPs` (https://tomcat.apache.org/tomcat-10.0-doc/jasper-howto.html)  / Web Application Compilation.","body":"keyword: <code>pre-compiling JSPs</code> (<a href=\"https://tomcat.apache.org/tomcat-10.0-doc/jasper-howto.html\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-10.0-doc/jasper-howto.html</a>)  / Web Application Compilation."},{"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1680195132,"post_id":75806002,"comment_id":133860916,"body_markdown":"DNS resolution (failure/timeout) is often the cause of unexplained delays such as this. Server and application startup are sometimes delayed by random-number seeding blocking on entropy. A thread dump will prove whether or not either of these is the true cause.","body":"DNS resolution (failure/timeout) is often the cause of unexplained delays such as this. Server and application startup are sometimes delayed by random-number seeding blocking on entropy. A thread dump will prove whether or not either of these is the true cause."}],"owner":{"account_id":19055538,"reputation":61,"user_id":13912797,"display_name":"Vienna"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679429981,"creation_date":1679429981,"question_id":75806002,"body_markdown":"When I run a tomcat docker container to serve a war file, initial load takes a lot of time, after the first load, if I load the page even from incognito it loads immediately. \r\n\r\nOn first load\r\n[![enter image description here](https://i.stack.imgur.com/VUTe6.png)](https://i.stack.imgur.com/VUTe6.png)\r\n\r\nAfter first load:\r\n[![enter image description here](https://i.stack.imgur.com/gTY6K.png)](https://i.stack.imgur.com/gTY6K.png)\r\n\r\ndocker stats output before first load:\r\n[![enter image description here](https://i.stack.imgur.com/kNMKR.png)](https://i.stack.imgur.com/kNMKR.png)\r\n\r\ndocker stats output after first load:\r\n[![enter image description here](https://i.stack.imgur.com/qYqcY.png)](https://i.stack.imgur.com/qYqcY.png)\r\n\r\n\r\n\r\nI searched for solutions, they suggest to tweak `initialHeapSize`, `initialRamPercentage`, tried everything but it doesn&#39;t work.","title":"tomcat + docker +java taking a lot of time to serve static page on initial load","body":"<p>When I run a tomcat docker container to serve a war file, initial load takes a lot of time, after the first load, if I load the page even from incognito it loads immediately.</p>\n<p>On first load\n<a href=\"https://i.stack.imgur.com/VUTe6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VUTe6.png\" alt=\"enter image description here\" /></a></p>\n<p>After first load:\n<a href=\"https://i.stack.imgur.com/gTY6K.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gTY6K.png\" alt=\"enter image description here\" /></a></p>\n<p>docker stats output before first load:\n<a href=\"https://i.stack.imgur.com/kNMKR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kNMKR.png\" alt=\"enter image description here\" /></a></p>\n<p>docker stats output after first load:\n<a href=\"https://i.stack.imgur.com/qYqcY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qYqcY.png\" alt=\"enter image description here\" /></a></p>\n<p>I searched for solutions, they suggest to tweak <code>initialHeapSize</code>, <code>initialRamPercentage</code>, tried everything but it doesn't work.</p>\n"},{"tags":["java","maven","swing","intellij-idea","fatjar"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1679252903,"post_id":75784143,"comment_id":133684068,"body_markdown":"Can you please add one of your `pom.xml ` experiments that didn&#39;t work? The one that looked &quot;most promising&quot; maybe? So we can give on-point hints. The key to your success will be the correct usage of the maven-assembly-plugin.","body":"Can you please add one of your <code>pom.xml </code> experiments that didn&#39;t work? The one that looked &quot;most promising&quot; maybe? So we can give on-point hints. The key to your success will be the correct usage of the maven-assembly-plugin."},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679262265,"post_id":75784143,"comment_id":133685411,"body_markdown":"Thanks so much cyberbrain, I am more than happy to do that....see code above. I am pretty sure there is some bs written, sorry for that...background is: with the help of Intellij I find java so nice, elegant and kind of straight-forward to programm, but as concerns a deeper understanding of maven, xml and Intellij configurations apart from the obvious I am kind of lost at the moment. Surely appreciate your help!!","body":"Thanks so much cyberbrain, I am more than happy to do that....see code above. I am pretty sure there is some bs written, sorry for that...background is: with the help of Intellij I find java so nice, elegant and kind of straight-forward to programm, but as concerns a deeper understanding of maven, xml and Intellij configurations apart from the obvious I am kind of lost at the moment. Surely appreciate your help!!"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679262590,"post_id":75784143,"comment_id":133685453,"body_markdown":"My Main-Class is currently under src/main/java/ dir, if that is of importance...for path adjustment or something","body":"My Main-Class is currently under src/main/java/ dir, if that is of importance...for path adjustment or something"},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1679282525,"post_id":75784143,"comment_id":133687551,"body_markdown":"After running the `mvn clean pacakge`, there should be a `my-project-name-jar-with-dependencies.jar` in your project target file. Can you find that jar in that folder?","body":"After running the <code>mvn clean pacakge</code>, there should be a <code>my-project-name-jar-with-dependencies.jar</code> in your project target file. Can you find that jar in that folder?"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679305205,"post_id":75784143,"comment_id":133691211,"body_markdown":"@LJ replica : Thanks for your question. Yes, I generate two jar files in the target folder named my-project-name.jar and my-project-name-jar-with-dependencies.jar when running the &quot;clean package&quot; command. Both of them just do nothing when double-clicking on them. So there is no error message, but the jars behave like they were empty. The my-project-name.jar has 18kb, the my-project-name-jar-with-dependencies.jar is 0kb.","body":"@LJ replica : Thanks for your question. Yes, I generate two jar files in the target folder named my-project-name.jar and my-project-name-jar-with-dependencies.jar when running the &quot;clean package&quot; command. Both of them just do nothing when double-clicking on them. So there is no error message, but the jars behave like they were empty. The my-project-name.jar has 18kb, the my-project-name-jar-with-dependencies.jar is 0kb."},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1679307323,"post_id":75784143,"comment_id":133691864,"body_markdown":"@Nose1 The 0kb is odd here as I use your pom.xml and it could generate a non 0kb jar. Try checking if any errors in output when running `mvn clean package`. If this does not help, you may try the IDEA artifact feature to package the flat jar: https://www.jetbrains.com/help/idea/working-with-artifacts.html#configure_artifact","body":"@Nose1 The 0kb is odd here as I use your pom.xml and it could generate a non 0kb jar. Try checking if any errors in output when running <code>mvn clean package</code>. If this does not help, you may try the IDEA artifact feature to package the flat jar: <a href=\"https://www.jetbrains.com/help/idea/working-with-artifacts.html#configure_artifact\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1679314702,"post_id":75784143,"comment_id":133693788,"body_markdown":"can you please try install your own version of maven (effectively its a download and unzip) and then use that from a commandline to execute the `mvn clean package` ? Just to be sure from which side the issue comes (maven config vs. IDEA config)","body":"can you please try install your own version of maven (effectively its a download and unzip) and then use that from a commandline to execute the <code>mvn clean package</code> ? Just to be sure from which side the issue comes (maven config vs. IDEA config)"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1679314819,"post_id":75784143,"comment_id":133693829,"body_markdown":"Also important: can you please show the edit screen of the &quot;Current File&quot; configuration of IDEA? We don&#39;t know of your `Main` class even contains the right `main` method and if it is the class that should be started. And what happens when you start the jar-with-dependencies with `java -jar my-project-name-jar-with-dependencies.jar` from the commandline? Any error messages there?","body":"Also important: can you please show the edit screen of the &quot;Current File&quot; configuration of IDEA? We don&#39;t know of your <code>Main</code> class even contains the right <code>main</code> method and if it is the class that should be started. And what happens when you start the jar-with-dependencies with <code>java -jar my-project-name-jar-with-dependencies.jar</code> from the commandline? Any error messages there?"},{"owner":{"account_id":1506530,"reputation":1001,"user_id":1409784,"display_name":"Nigel Savage"},"score":0,"creation_date":1679411660,"post_id":75784143,"comment_id":133715173,"body_markdown":"you have 2 builds here intelij and maven, suggest you get it to build with maven separate to intellij, suggest you add the debug output to the maven build see section 6.1.9 here https://books.sonatype.com/mvnref-book/reference/running-sect-options.html , suggest add the archive element to the configuration section of assembly plugin as outlined here https://maven.apache.org/plugins/maven-assembly-plugin/usage.html","body":"you have 2 builds here intelij and maven, suggest you get it to build with maven separate to intellij, suggest you add the debug output to the maven build see section 6.1.9 here <a href=\"https://books.sonatype.com/mvnref-book/reference/running-sect-options.html\" rel=\"nofollow noreferrer\">books.sonatype.com/mvnref-book/reference/&hellip;</a> , suggest add the archive element to the configuration section of assembly plugin as outlined here <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/usage.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-assembly-plugin/usage.html</a>"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679427592,"post_id":75784143,"comment_id":133719857,"body_markdown":"Sorry people, &lt;br/&gt;\ntook me a while to configure everything in the right way, I recognized a mvn-associated problem.  &lt;br/&gt;\nNow I can answer your questions: &lt;br/&gt;\nWhen I execute the &quot;mvn clean package&quot; command in the Intellij terminal, it gives me this: &lt;br/&gt;\n-&gt; see fig01 above &lt;br/&gt;\nThe jar-files are now of a &quot;more healthy size&quot;, but still not at all executable: &lt;br/&gt;\n-&gt; see fig02 above &lt;br/&gt;\nI am not sure if the following can even work, but just for completeness: &lt;br/&gt;\n-&gt; see fig03 above &lt;br/&gt;","body":"Sorry people, &lt;br/&gt; took me a while to configure everything in the right way, I recognized a mvn-associated problem.  &lt;br/&gt; Now I can answer your questions: &lt;br/&gt; When I execute the &quot;mvn clean package&quot; command in the Intellij terminal, it gives me this: &lt;br/&gt; -&gt; see fig01 above &lt;br/&gt; The jar-files are now of a &quot;more healthy size&quot;, but still not at all executable: &lt;br/&gt; -&gt; see fig02 above &lt;br/&gt; I am not sure if the following can even work, but just for completeness: &lt;br/&gt; -&gt; see fig03 above &lt;br/&gt;"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679428233,"post_id":75784143,"comment_id":133720005,"body_markdown":"As concerns die &quot;edit configurations&quot;-configuration of Intellij -&gt; see fig04 above","body":"As concerns die &quot;edit configurations&quot;-configuration of Intellij -&gt; see fig04 above"},{"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"score":0,"creation_date":1679430071,"post_id":75784143,"comment_id":133720423,"body_markdown":"@LJ replica: I have followed the instructions given by your link -&gt; see fig05 above. However, the Intellij terminal gives me this:        &quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; -Dfile.encoding=windows-1252 -Dsun.stdout.encoding=windows-1252 -Dsun.stderr.encoding=windows-1252 -jar ......\\target\\my-project-name.jar\nError: Unable to initialize main class Main\nCaused by: java.lang.NoClassDefFoundError: com/formdev/flatlaf/FlatDarkLaf\n\nProcess finished with exit code 1","body":"@LJ replica: I have followed the instructions given by your link -&gt; see fig05 above. However, the Intellij terminal gives me this:        &quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; -Dfile.encoding=windows-1252 -Dsun.stdout.encoding=windows-1252 -Dsun.stderr.encoding=windows-1252 -jar ......\\target\\my-project-name.jar Error: Unable to initialize main class Main Caused by: java.lang.NoClassDefFoundError: com/formdev/flatlaf/FlatDarkLaf  Process finished with exit code 1"},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1679453418,"post_id":75784143,"comment_id":133723941,"body_markdown":"@Nose1 Try this https://stackoverflow.com/a/45902851 to fix the `no main manifest attribute` issue and package it again to see if it helps.","body":"@Nose1 Try this <a href=\"https://stackoverflow.com/a/45902851\">stackoverflow.com/a/45902851</a> to fix the <code>no main manifest attribute</code> issue and package it again to see if it helps."},{"owner":{"account_id":1506530,"reputation":1001,"user_id":1409784,"display_name":"Nigel Savage"},"score":0,"creation_date":1680109360,"post_id":75784143,"comment_id":133843058,"body_markdown":"In the maven-jar-plugin you have declared the mainClass as  &quot;Main&quot; usually we use a package and then use the fully qualified class name like some.package.Main for the mainClass","body":"In the maven-jar-plugin you have declared the mainClass as  &quot;Main&quot; usually we use a package and then use the fully qualified class name like some.package.Main for the mainClass"}],"owner":{"account_id":28059073,"reputation":1,"user_id":21433582,"display_name":"Nose1"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679429906,"creation_date":1679250581,"question_id":75784143,"body_markdown":"I am relatively new in Java programming and try to set up a Swing-based GUI with some action buttons (including ActionListener and ActionPerformed sections) as a first project. So far, I managed to create some buttons and assign some functions to them. Applying the standard play button on the main.java, which is then supposed to be my &quot;current file&quot;, &lt;br&gt;\r\n\r\n[Intellij screenshot](https://i.stack.imgur.com/Uf9K2.png) &lt;br&gt;\r\nthe output is working perfectly well: &lt;br&gt;\r\n[Swingbutton-panel](https://i.stack.imgur.com/zwVTc.png) &lt;br&gt;\r\nThe functions are further defined using a spread sheet file.\r\n\r\nMy problem now is how to use the maven pom.xml file and the Intellij IDE properly in order to create a (fat) jar file, which by doupleclicking will give me the programmed interface shown above.\r\nI have tried many things and checked out a lot of websites and youtube tutorials. The most helpful was propably this one so far:\r\nhttps://jenkov.com/tutorials/maven/maven-build-fat-jar.html\r\n\r\nFurthermore, I use the Maven &quot;clean package&quot; command trying to build the file. The only things I could acchieve in this respect was to build non-functional jar files or &quot;slim&quot; jars on minimal examples, which just print a &quot;hello world&quot; in the shell when using &quot;java -jre test.jar&quot; command.\r\n\r\nCan anyone help? Please pay attention to the &quot;special combination&quot; of Maven, fat-jar-building, the Swing-package and Intellij. Thanks so much in advance, I am excited to take your comments!\r\n\r\n\r\n    &lt;!--&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;--&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\r\n       http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.jenkov.myprojectname&lt;/groupId&gt;\r\n        &lt;artifactId&gt;my-project-name&lt;/artifactId&gt;\r\n        &lt;version&gt;1.1.0&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n        &lt;name&gt;My Project Name&lt;/name&gt;\r\n        &lt;!--\r\n            &lt;properties&gt;\r\n                &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n                &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n                &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;/properties&gt;\r\n            --&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n                &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n                &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.19.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.19.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars.npm&lt;/groupId&gt;\r\n                &lt;artifactId&gt;rc&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.8&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/com.seaglasslookandfeel/seaglasslookandfeel --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.seaglasslookandfeel&lt;/groupId&gt;\r\n                &lt;artifactId&gt;seaglasslookandfeel&lt;/artifactId&gt;\r\n                &lt;version&gt;0.2.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.formdev&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flatlaf&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.formdev&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flatlaf-intellij-themes&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-assembly-plugin --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.5.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n        &lt;/dependencies&gt;\r\n        &lt;!-- Thanks for using https://jar-download.com --&gt;\r\n    \r\n        &lt;!-- https://jenkov.com/tutorials/maven/maven-build-fat-jar.html --&gt;\r\n        &lt;build&gt;\r\n            &lt;finalName&gt;my-project-name&lt;/finalName&gt;\r\n            &lt;plugins&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.6.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;archive&gt;\r\n                            &lt;manifest&gt;\r\n                                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                                &lt;mainClass&gt;Main&lt;/mainClass&gt;\r\n                            &lt;/manifest&gt;\r\n                        &lt;/archive&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.1&lt;/version&gt;\r\n    \r\n                    &lt;configuration&gt;\r\n                        &lt;descriptorRefs&gt;\r\n                            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                        &lt;/descriptorRefs&gt;\r\n                    &lt;/configuration&gt;\r\n    \r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;make-assembly&lt;/id&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;single&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n[fig01][1]\r\n\r\n[fig02][2]\r\n\r\n[fig03][3]\r\n\r\n[fig04][4]\r\n\r\n[fig05][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/m1bOa.png\r\n  [2]: https://i.stack.imgur.com/ka5cI.png\r\n  [3]: https://i.stack.imgur.com/WgMFE.png\r\n  [4]: https://i.stack.imgur.com/dvpdC.png\r\n  [5]: https://i.stack.imgur.com/g2HWa.png","title":"Building executable FatJar file using Maven, the Swing GUI Toolkit and Intellij as development IDE","body":"<p>I am relatively new in Java programming and try to set up a Swing-based GUI with some action buttons (including ActionListener and ActionPerformed sections) as a first project. So far, I managed to create some buttons and assign some functions to them. Applying the standard play button on the main.java, which is then supposed to be my &quot;current file&quot;, <br></p>\n<p><a href=\"https://i.stack.imgur.com/Uf9K2.png\" rel=\"nofollow noreferrer\">Intellij screenshot</a> <br>\nthe output is working perfectly well: <br>\n<a href=\"https://i.stack.imgur.com/zwVTc.png\" rel=\"nofollow noreferrer\">Swingbutton-panel</a> <br>\nThe functions are further defined using a spread sheet file.</p>\n<p>My problem now is how to use the maven pom.xml file and the Intellij IDE properly in order to create a (fat) jar file, which by doupleclicking will give me the programmed interface shown above.\nI have tried many things and checked out a lot of websites and youtube tutorials. The most helpful was propably this one so far:\n<a href=\"https://jenkov.com/tutorials/maven/maven-build-fat-jar.html\" rel=\"nofollow noreferrer\">https://jenkov.com/tutorials/maven/maven-build-fat-jar.html</a></p>\n<p>Furthermore, I use the Maven &quot;clean package&quot; command trying to build the file. The only things I could acchieve in this respect was to build non-functional jar files or &quot;slim&quot; jars on minimal examples, which just print a &quot;hello world&quot; in the shell when using &quot;java -jre test.jar&quot; command.</p>\n<p>Can anyone help? Please pay attention to the &quot;special combination&quot; of Maven, fat-jar-building, the Swing-package and Intellij. Thanks so much in advance, I am excited to take your comments!</p>\n<pre><code>&lt;!--&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;--&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\n   http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.jenkov.myprojectname&lt;/groupId&gt;\n    &lt;artifactId&gt;my-project-name&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;My Project Name&lt;/name&gt;\n    &lt;!--\n        &lt;properties&gt;\n            &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n            &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;/properties&gt;\n        --&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars.npm&lt;/groupId&gt;\n            &lt;artifactId&gt;rc&lt;/artifactId&gt;\n            &lt;version&gt;1.2.8&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.seaglasslookandfeel/seaglasslookandfeel --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.seaglasslookandfeel&lt;/groupId&gt;\n            &lt;artifactId&gt;seaglasslookandfeel&lt;/artifactId&gt;\n            &lt;version&gt;0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.formdev&lt;/groupId&gt;\n            &lt;artifactId&gt;flatlaf&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.formdev&lt;/groupId&gt;\n            &lt;artifactId&gt;flatlaf-intellij-themes&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-assembly-plugin --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n    &lt;!-- Thanks for using https://jar-download.com --&gt;\n\n    &lt;!-- https://jenkov.com/tutorials/maven/maven-build-fat-jar.html --&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;my-project-name&lt;/finalName&gt;\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.6.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;mainClass&gt;Main&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.1&lt;/version&gt;\n\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                &lt;/configuration&gt;\n\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-assembly&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/m1bOa.png\" rel=\"nofollow noreferrer\">fig01</a></p>\n<p><a href=\"https://i.stack.imgur.com/ka5cI.png\" rel=\"nofollow noreferrer\">fig02</a></p>\n<p><a href=\"https://i.stack.imgur.com/WgMFE.png\" rel=\"nofollow noreferrer\">fig03</a></p>\n<p><a href=\"https://i.stack.imgur.com/dvpdC.png\" rel=\"nofollow noreferrer\">fig04</a></p>\n<p><a href=\"https://i.stack.imgur.com/g2HWa.png\" rel=\"nofollow noreferrer\">fig05</a></p>\n"},{"tags":["java","clojure"],"answers":[{"tags":[],"owner":{"account_id":510727,"reputation":3230,"user_id":1062189,"display_name":"erdos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679429192,"creation_date":1679429192,"answer_id":75805911,"question_id":75805022,"body_markdown":"The problem with the approach in the question is that you want to using the same thread pool for multiple different tasks:\r\n\r\n1. querying the database with a blocking operation, and then\r\n2. waiting for 1. to finish and then combine the response\r\n\r\nSince you have recursion, the lifecycle of 2. is long and these tasks will eat up all the threads in your executor, until 1. can no longer be executed, thus starving 1. indefinitely.\r\n\r\nHowever, 2. does not actually need to be _blocking_ a thread. It can be implemented with lightweight processes using [core.async](https://clojure.org/guides/core_async_go) so waiting for the query results would be just _parking_ instead. Rewriting the code in the original question would look something like the following:\r\n\r\n1. First, make the functions that are using the database return a channel instead of lazy sequences.\r\n\r\n```\r\n(defn resolve-eids [ctx form]\r\n  (clojure.core.async/thread ....))\r\n\r\n(defn obj-node [ctx eid]\r\n  (clojure.core.async/thread (DO-BLOCKING-SQL-QUERY-HERE)))\r\n\r\n(defn query-one [ctx form]\r\n  (clojure.core.async/thread ...))\r\n```\r\n\r\nRemember that you should not use `go` blocks for blocking operations (IO) as these will bring you back to the original problem. Instead, just use `clojure.core.async/thread` or something similar to use a dedicated thread pool that can be blocked safely.\r\n\r\n2. Then your query function should return a channel that is implemented with the `go` block and is using `(&lt;!)` for parking the process while waiting for the queries to complete.\r\n\r\n(Go blocks are relatively cheap, so the bottleneck now is the thread pool used for the actually IO blocking operatitions.)\r\n\r\n```\r\n(defn- query [ctx form]\r\n  (go\r\n    (let [[where-view eids] (&lt;! (resolve-eids ctx form))\r\n          obj-nodes         (obj-node ctx eids)\r\n          child-form-nodes  (query-one ctx (child-forms forms eids))]\r\n      (-&gt; (make-node where-view)\r\n          (add-children (&lt;! obj-nodes))\r\n          (add-children (&lt;! child-form-nodes))))))\r\n```\r\n\r\nAnd since `query` returns a channel now, you will have to call it like the following to actually get the result of the call: `(&lt;!! (query ... ...))`","title":"Thread pool for recursive calls to JDBC in Clojure","body":"<p>The problem with the approach in the question is that you want to using the same thread pool for multiple different tasks:</p>\n<ol>\n<li>querying the database with a blocking operation, and then</li>\n<li>waiting for 1. to finish and then combine the response</li>\n</ol>\n<p>Since you have recursion, the lifecycle of 2. is long and these tasks will eat up all the threads in your executor, until 1. can no longer be executed, thus starving 1. indefinitely.</p>\n<p>However, 2. does not actually need to be <em>blocking</em> a thread. It can be implemented with lightweight processes using <a href=\"https://clojure.org/guides/core_async_go\" rel=\"nofollow noreferrer\">core.async</a> so waiting for the query results would be just <em>parking</em> instead. Rewriting the code in the original question would look something like the following:</p>\n<ol>\n<li>First, make the functions that are using the database return a channel instead of lazy sequences.</li>\n</ol>\n<pre><code>(defn resolve-eids [ctx form]\n  (clojure.core.async/thread ....))\n\n(defn obj-node [ctx eid]\n  (clojure.core.async/thread (DO-BLOCKING-SQL-QUERY-HERE)))\n\n(defn query-one [ctx form]\n  (clojure.core.async/thread ...))\n</code></pre>\n<p>Remember that you should not use <code>go</code> blocks for blocking operations (IO) as these will bring you back to the original problem. Instead, just use <code>clojure.core.async/thread</code> or something similar to use a dedicated thread pool that can be blocked safely.</p>\n<ol start=\"2\">\n<li>Then your query function should return a channel that is implemented with the <code>go</code> block and is using <code>(&lt;!)</code> for parking the process while waiting for the queries to complete.</li>\n</ol>\n<p>(Go blocks are relatively cheap, so the bottleneck now is the thread pool used for the actually IO blocking operatitions.)</p>\n<pre><code>(defn- query [ctx form]\n  (go\n    (let [[where-view eids] (&lt;! (resolve-eids ctx form))\n          obj-nodes         (obj-node ctx eids)\n          child-form-nodes  (query-one ctx (child-forms forms eids))]\n      (-&gt; (make-node where-view)\n          (add-children (&lt;! obj-nodes))\n          (add-children (&lt;! child-form-nodes))))))\n</code></pre>\n<p>And since <code>query</code> returns a channel now, you will have to call it like the following to actually get the result of the call: <code>(&lt;!! (query ... ...))</code></p>\n"}],"owner":{"account_id":1353857,"reputation":2637,"user_id":1292663,"accept_rate":98,"display_name":"Stepan Parunashvili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75805911,"answer_count":1,"score":0,"last_activity_date":1679429192,"creation_date":1679422863,"question_id":75805022,"body_markdown":"**Context**\r\n\r\nI have a database connection pool, of size 20. I am writing a function, which makes a bunch of queries to the database, in a recursive manner \r\n\r\n```\r\n  Node\r\n    - db query: get ids\r\n      - for each id: \r\n         - db query: get attributes\r\n         - recurse if there are subqueries\r\n\r\n(I am aware this is an N+1 query, but bear with me that this is required)\r\n```\r\n\r\n**Goal**\r\n\r\nI want to achieve as much parallelism as I can. \r\n\r\n**Plan**\r\n\r\nI initially thought I would use a fixed-sized thread pool, which is the same length as the connection-pool-size. (Since the parallelism here is bound by the jdbc connection pool). \r\n\r\nThen I could write a function like so:\r\n\r\n```\r\n(defn- query\r\n  [{:keys [pool] :as ctx} form]\r\n  (let [[where-view eids] (resolve-eids ctx form)\r\n        [obj-nodes child-form-nodes]\r\n        (cp/pvalues pool\r\n                    (cp/upmap pool (partial obj-node ctx) eids)\r\n                    (cp/upmap (partial query-one ctx) (child-forms forms eids)))]\r\n    (-&gt; (make-node where-view)\r\n        (add-children obj-nodes)\r\n        (add-children child-form-nodes))))\r\n```\r\n\r\n\r\n**Problem**\r\n\r\nThe recursion here could starve the thread-pool, and cause it to hang. \r\n\r\n**Potential solutions**\r\n\r\nFrom research I thought maybe I could use `Fork/Join` pools. But I see here https://stackoverflow.com/questions/8206318/is-javas-fork-and-join-thread-pool-is-good-for-executing-io-bound-task that these are not quite meant for IO-bound tasks. \r\n\r\nWhat would be the best way for me to achieve this?","title":"Thread pool for recursive calls to JDBC in Clojure","body":"<p><strong>Context</strong></p>\n<p>I have a database connection pool, of size 20. I am writing a function, which makes a bunch of queries to the database, in a recursive manner</p>\n<pre><code>  Node\n    - db query: get ids\n      - for each id: \n         - db query: get attributes\n         - recurse if there are subqueries\n\n(I am aware this is an N+1 query, but bear with me that this is required)\n</code></pre>\n<p><strong>Goal</strong></p>\n<p>I want to achieve as much parallelism as I can.</p>\n<p><strong>Plan</strong></p>\n<p>I initially thought I would use a fixed-sized thread pool, which is the same length as the connection-pool-size. (Since the parallelism here is bound by the jdbc connection pool).</p>\n<p>Then I could write a function like so:</p>\n<pre><code>(defn- query\n  [{:keys [pool] :as ctx} form]\n  (let [[where-view eids] (resolve-eids ctx form)\n        [obj-nodes child-form-nodes]\n        (cp/pvalues pool\n                    (cp/upmap pool (partial obj-node ctx) eids)\n                    (cp/upmap (partial query-one ctx) (child-forms forms eids)))]\n    (-&gt; (make-node where-view)\n        (add-children obj-nodes)\n        (add-children child-form-nodes))))\n</code></pre>\n<p><strong>Problem</strong></p>\n<p>The recursion here could starve the thread-pool, and cause it to hang.</p>\n<p><strong>Potential solutions</strong></p>\n<p>From research I thought maybe I could use <code>Fork/Join</code> pools. But I see here <a href=\"https://stackoverflow.com/questions/8206318/is-javas-fork-and-join-thread-pool-is-good-for-executing-io-bound-task\">Is Java&#39;s fork-and-join thread pool is good for executing IO bound task?</a> that these are not quite meant for IO-bound tasks.</p>\n<p>What would be the best way for me to achieve this?</p>\n"},{"tags":["java","android","android-studio","kotlin"],"answers":[{"tags":[],"owner":{"account_id":21708913,"reputation":355,"user_id":16020851,"display_name":"ToxicFlame427"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679429156,"creation_date":1679428465,"answer_id":75805816,"question_id":75805231,"body_markdown":"This is because your `VorlageTerif` activity class is attempted be be opened (via `Intent`) without passing both doubles (A and G) parameters that your activity requires.\r\n\r\nReplace this in MainActivity:...\r\n\r\n    val vor = Intent(this, VorlageTarif::class.java)\r\n    startActivity(Vor)\r\n\r\n...with this:\r\n\r\n    // Make sure your variable name does not start with an uppercase letter\r\n    val vor = Intent(this, VorlageTarif::class.java)\r\n    startActivity(vor)\r\n        .putExtra(VorlageTerif.A, A.toDouble()))\r\n        .putExtra(VorlageTerif.G, G.toDouble()))\r\n    // Pass the double variables you want in this case it would be A and G variables initialized in MainActivity, make sure to convert them to double instead of a string!\r\n\r\nWithout giving your second activity it&#39;s required data (in this case, a null parameter), the app will crash as a result when the null data is being used for calculations, even when there is no clear data present. This may not throw an error, just like in your case.","title":"Problem at changing the Activity, Android Studio","body":"<p>This is because your <code>VorlageTerif</code> activity class is attempted be be opened (via <code>Intent</code>) without passing both doubles (A and G) parameters that your activity requires.</p>\n<p>Replace this in MainActivity:...</p>\n<pre><code>val vor = Intent(this, VorlageTarif::class.java)\nstartActivity(Vor)\n</code></pre>\n<p>...with this:</p>\n<pre><code>// Make sure your variable name does not start with an uppercase letter\nval vor = Intent(this, VorlageTarif::class.java)\nstartActivity(vor)\n    .putExtra(VorlageTerif.A, A.toDouble()))\n    .putExtra(VorlageTerif.G, G.toDouble()))\n// Pass the double variables you want in this case it would be A and G variables initialized in MainActivity, make sure to convert them to double instead of a string!\n</code></pre>\n<p>Without giving your second activity it's required data (in this case, a null parameter), the app will crash as a result when the null data is being used for calculations, even when there is no clear data present. This may not throw an error, just like in your case.</p>\n"}],"owner":{"account_id":28079040,"reputation":13,"user_id":21450429,"display_name":"Benjamin Cisek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75805816,"answer_count":1,"score":1,"last_activity_date":1679429156,"creation_date":1679424124,"question_id":75805231,"body_markdown":"Hi Im coding an Math App for fun and have som problems with it in Kotlin, i treid search in the Internet but couldnt find anything,\r\n\r\nI have this two Activitys\r\n\r\n```\r\nclass VorlageTarif(var A: Double, var G: Double) : AppCompatActivity() ,  AdapterView.OnItemSelectedListener, OnClickListener {\r\n\r\n\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n\r\n\r\n        val spinner: Spinner = findViewById(R.id.Auswahl)\r\n        ArrayAdapter.createFromResource(\r\n            this,\r\n            R.array.planets_array,\r\n            android.R.layout.simple_spinner_item\r\n        ).also { adapter -&gt;\r\n            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\r\n            val spinner: Spinner = findViewById(R.id.Auswahl)\r\n            spinner.onItemSelectedListener = this\r\n            spinner.adapter = adapter\r\n        }\r\n\r\n        rbtn.setOnClickListener(this);\r\n        ChangeBTN.setOnClickListener(this)\r\n    }\r\n    \r\n\r\n    override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View?, pos: Int, id: Long) {\r\n\r\n        var Text: String = parent.getItemAtPosition(pos).toString();\r\n\r\n        if (Text == &quot;Starcong&quot;) {\r\n            A = 0.06\r\n            G = 6.0\r\n        }else if (Text == &quot;Basic&quot;) {\r\n            A = 0.09\r\n            G = 3.0\r\n        }else if (Text == &quot;Prepaid&quot;) {\r\n            A = 0.08\r\n            G= 0.0\r\n        } else if (Text == &quot;Sorglos&quot;) {\r\n            A = 1.0\r\n            G = 0.0\r\n        }\r\n    }\r\n\r\n    override fun onNothingSelected(p0: AdapterView&lt;*&gt;?) {\r\n\r\n    }\r\n\r\n    override fun onClick(p0: View?) {\r\n        when (p0?.id) {\r\n            R.id.rbtn -&gt; {\r\n\r\n\r\n\r\n                var X = XInput.text;\r\n                var X2 = X.toString()\r\n\r\n                var R: Double = X2.toDouble() * A + G\r\n                ET.text = R.toString()\r\n            }\r\n\r\n\r\n\r\n        }\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nand tahn this for the other Activity\r\n\r\n```\r\npackage com.example.handytarife\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.os.Debug\r\nimport android.text.Editable\r\nimport android.view.View\r\nimport android.view.View.OnClickListener\r\nimport kotlinx.android.synthetic.main.activity_main.*\r\n\r\nclass MainActivity : AppCompatActivity(), OnClickListener {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n        rbtn.setOnClickListener(this);\r\n        ChangeBTN.setOnClickListener(this)\r\n\r\n    }\r\n\r\n    override fun onClick(p0: View?) {\r\n        when (p0?.id) {\r\n            R.id.rbtn -&gt; {\r\n\r\n                var X = XInput.text;\r\n                 var X2 = X.toString()\r\n                 var A = KInput.text.toString();\r\n                 var G = GInput.text.toString();\r\n                 var R: Double = X2.toDouble() * A.toDouble() + G.toDouble()\r\n                 ET.text = R.toString()\r\n            }\r\n\r\n            R.id.ChangeBTN -&gt; {\r\n                val Vor = Intent(this, VorlageTarif::class.java)\r\n                startActivity(Vor)\r\n                finish()\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    }\r\n```\r\n\r\nthey dont show any error but then i start my Apllication and press the Button to switch my Activity then it closing itself. I tried to lock at the Internet but dont find an Answer, please help me.","title":"Problem at changing the Activity, Android Studio","body":"<p>Hi Im coding an Math App for fun and have som problems with it in Kotlin, i treid search in the Internet but couldnt find anything,</p>\n<p>I have this two Activitys</p>\n<pre><code>class VorlageTarif(var A: Double, var G: Double) : AppCompatActivity() ,  AdapterView.OnItemSelectedListener, OnClickListener {\n\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n\n\n        val spinner: Spinner = findViewById(R.id.Auswahl)\n        ArrayAdapter.createFromResource(\n            this,\n            R.array.planets_array,\n            android.R.layout.simple_spinner_item\n        ).also { adapter -&gt;\n            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n            val spinner: Spinner = findViewById(R.id.Auswahl)\n            spinner.onItemSelectedListener = this\n            spinner.adapter = adapter\n        }\n\n        rbtn.setOnClickListener(this);\n        ChangeBTN.setOnClickListener(this)\n    }\n    \n\n    override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View?, pos: Int, id: Long) {\n\n        var Text: String = parent.getItemAtPosition(pos).toString();\n\n        if (Text == &quot;Starcong&quot;) {\n            A = 0.06\n            G = 6.0\n        }else if (Text == &quot;Basic&quot;) {\n            A = 0.09\n            G = 3.0\n        }else if (Text == &quot;Prepaid&quot;) {\n            A = 0.08\n            G= 0.0\n        } else if (Text == &quot;Sorglos&quot;) {\n            A = 1.0\n            G = 0.0\n        }\n    }\n\n    override fun onNothingSelected(p0: AdapterView&lt;*&gt;?) {\n\n    }\n\n    override fun onClick(p0: View?) {\n        when (p0?.id) {\n            R.id.rbtn -&gt; {\n\n\n\n                var X = XInput.text;\n                var X2 = X.toString()\n\n                var R: Double = X2.toDouble() * A + G\n                ET.text = R.toString()\n            }\n\n\n\n        }\n    }\n\n\n}\n</code></pre>\n<p>and tahn this for the other Activity</p>\n<pre><code>package com.example.handytarife\n\nimport android.content.Intent\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.os.Debug\nimport android.text.Editable\nimport android.view.View\nimport android.view.View.OnClickListener\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity(), OnClickListener {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        rbtn.setOnClickListener(this);\n        ChangeBTN.setOnClickListener(this)\n\n    }\n\n    override fun onClick(p0: View?) {\n        when (p0?.id) {\n            R.id.rbtn -&gt; {\n\n                var X = XInput.text;\n                 var X2 = X.toString()\n                 var A = KInput.text.toString();\n                 var G = GInput.text.toString();\n                 var R: Double = X2.toDouble() * A.toDouble() + G.toDouble()\n                 ET.text = R.toString()\n            }\n\n            R.id.ChangeBTN -&gt; {\n                val Vor = Intent(this, VorlageTarif::class.java)\n                startActivity(Vor)\n                finish()\n            }\n\n        }\n\n    }\n\n\n\n\n    }\n</code></pre>\n<p>they dont show any error but then i start my Apllication and press the Button to switch my Activity then it closing itself. I tried to lock at the Internet but dont find an Answer, please help me.</p>\n"},{"tags":["java","github"],"answers":[{"comments":[{"owner":{"account_id":4608650,"reputation":1,"user_id":3737413,"display_name":"Prince Rachit"},"score":0,"creation_date":1520328145,"post_id":49127164,"comment_id":85259114,"body_markdown":"PR:Pull request. I am aware of the documentation. Wondering if any libraries can use it to cause changes in the repo.","body":"PR:Pull request. I am aware of the documentation. Wondering if any libraries can use it to cause changes in the repo."}],"tags":[],"owner":{"account_id":8539404,"reputation":86,"user_id":6400008,"display_name":"R. Daumann"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520327586,"creation_date":1520327586,"answer_id":49127164,"question_id":49127019,"body_markdown":"I am not aware of what you mean with PR but here is the documentation from github:\r\n\r\nhttps://developer.github.com/v3/guides/managing-deploy-keys/","title":"How to use deploy key of github in java git library","body":"<p>I am not aware of what you mean with PR but here is the documentation from github:</p>\n\n<p><a href=\"https://developer.github.com/v3/guides/managing-deploy-keys/\" rel=\"nofollow noreferrer\">https://developer.github.com/v3/guides/managing-deploy-keys/</a></p>\n"},{"tags":[],"owner":{"account_id":10941923,"reputation":6757,"user_id":8041461,"accept_rate":60,"display_name":"jrtapsell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520329832,"creation_date":1520329832,"answer_id":49127854,"question_id":49127019,"body_markdown":"According to this:\r\n\r\n  https://developer.github.com/v3/guides/managing-deploy-keys/\r\n \r\ndeploy keys cannot be used for the API (only OAUTH keys can)\r\n\r\nHowever, you can clone a repo with an OAUTH key according to this:\r\n\r\nhttps://developer.github.com/v3/guides/managing-deploy-keys/#https-cloning-with-oauth-tokens\r\n\r\nThe only issue with this would be that the scope would be less restricted.","title":"How to use deploy key of github in java git library","body":"<p>According to this:</p>\n\n<p><a href=\"https://developer.github.com/v3/guides/managing-deploy-keys/\" rel=\"nofollow noreferrer\">https://developer.github.com/v3/guides/managing-deploy-keys/</a></p>\n\n<p>deploy keys cannot be used for the API (only OAUTH keys can)</p>\n\n<p>However, you can clone a repo with an OAUTH key according to this:</p>\n\n<p><a href=\"https://developer.github.com/v3/guides/managing-deploy-keys/#https-cloning-with-oauth-tokens\" rel=\"nofollow noreferrer\">https://developer.github.com/v3/guides/managing-deploy-keys/#https-cloning-with-oauth-tokens</a></p>\n\n<p>The only issue with this would be that the scope would be less restricted.</p>\n"},{"tags":[],"owner":{"account_id":2439913,"reputation":139,"user_id":2128734,"display_name":"Anne van Leyden"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679428309,"creation_date":1679428309,"answer_id":75805793,"question_id":49127019,"body_markdown":"Note: I used a custom ssh dir `.ssh_github` to experiment freely without compromising my real ssh config.\r\n\r\n**ssh config**\r\n```\r\n$ mkdir ~/.ssh_github\r\n$ cp ~/.ssh/known_hosts ~/.ssh_github\r\n$ cp ~/.ssh/config ~/.ssh_github\r\n$ cd ~/.ssh_github\r\n$ ssh-keygen -t rsa -b 4096 -C whatever@email.com\r\nGenerating public/private rsa key pair.\r\nEnter file in which to save the key (/home/anne-ah/.ssh/id_rsa): id_rsa\r\n```\r\nIf you just enter just the file name, the public/private key files will be generated in the current dir. You can enter a passphrase if you like, but can also leave it empty.\r\n\r\nGet the public key...\r\n```\r\n$ cat id_rsa.pub\r\n```\r\n... and use it as the Github deploy key (you can leave the email address off, it doesn&#39;t matter)\r\n\r\nIt is important to have the github.com server key fingerprints in your `known_hosts` file. You can get them here: https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints . Simply append them all to the `known_hosts` file. \r\n\r\n**Libraries**\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;\r\n    &lt;artifactId&gt;org.eclipse.jgit&lt;/artifactId&gt;\r\n    &lt;version&gt;6.5.0.202303070854-r&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;\r\n    &lt;artifactId&gt;org.eclipse.jgit.ssh.apache&lt;/artifactId&gt;\r\n    &lt;version&gt;6.5.0.202303070854-r&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n**Java code**\r\n```\r\nimport org.eclipse.jgit.api.TransportConfigCallback;\r\nimport org.eclipse.jgit.transport.SshTransport;\r\nimport org.eclipse.jgit.transport.Transport;\r\nimport org.eclipse.jgit.transport.sshd.SshdSessionFactory;\r\nimport org.eclipse.jgit.transport.sshd.SshdSessionFactoryBuilder;\r\nimport java.io.File;\r\n\r\nclass SshTransportConfigCallback implements TransportConfigCallback {\r\n    SshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder()\r\n        .setHomeDirectory(new File(&quot;/home/johndoe/.ssh_github&quot;))\r\n        .setSshDirectory(new File(&quot;/home/johndoe/.ssh_github&quot;))\r\n        .build(null);\r\n\r\n    @Override\r\n    public void configure(Transport transport) {\r\n        SshTransport sshTransport = (SshTransport) transport;\r\n        sshTransport.setSshSessionFactory(sshSessionFactory);\r\n    }\r\n}\r\n```\r\nGet the ssh url for your repository and then you should be able to clone it:\r\n```\r\nGit.cloneRepository()\r\n    .setDirectory(Files.createTempDirectory(&quot;my-repo&quot;).toFile())\r\n    .setTransportConfigCallback(new SshTransportConfigCallback())\r\n    .setURI(&quot;org-28603984@github.com:MyCompany/my-repo.git&quot;)\r\n    .call();\r\n```\r\n\r\nIt is not that hard, but it can be fiddly. And the sometimes vague and/or generic error messages do not help troubleshooting.","title":"How to use deploy key of github in java git library","body":"<p>Note: I used a custom ssh dir <code>.ssh_github</code> to experiment freely without compromising my real ssh config.</p>\n<p><strong>ssh config</strong></p>\n<pre><code>$ mkdir ~/.ssh_github\n$ cp ~/.ssh/known_hosts ~/.ssh_github\n$ cp ~/.ssh/config ~/.ssh_github\n$ cd ~/.ssh_github\n$ ssh-keygen -t rsa -b 4096 -C whatever@email.com\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/anne-ah/.ssh/id_rsa): id_rsa\n</code></pre>\n<p>If you just enter just the file name, the public/private key files will be generated in the current dir. You can enter a passphrase if you like, but can also leave it empty.</p>\n<p>Get the public key...</p>\n<pre><code>$ cat id_rsa.pub\n</code></pre>\n<p>... and use it as the Github deploy key (you can leave the email address off, it doesn't matter)</p>\n<p>It is important to have the github.com server key fingerprints in your <code>known_hosts</code> file. You can get them here: <a href=\"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints\" rel=\"nofollow noreferrer\">https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints</a> . Simply append them all to the <code>known_hosts</code> file.</p>\n<p><strong>Libraries</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;\n    &lt;artifactId&gt;org.eclipse.jgit&lt;/artifactId&gt;\n    &lt;version&gt;6.5.0.202303070854-r&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.jgit&lt;/groupId&gt;\n    &lt;artifactId&gt;org.eclipse.jgit.ssh.apache&lt;/artifactId&gt;\n    &lt;version&gt;6.5.0.202303070854-r&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Java code</strong></p>\n<pre><code>import org.eclipse.jgit.api.TransportConfigCallback;\nimport org.eclipse.jgit.transport.SshTransport;\nimport org.eclipse.jgit.transport.Transport;\nimport org.eclipse.jgit.transport.sshd.SshdSessionFactory;\nimport org.eclipse.jgit.transport.sshd.SshdSessionFactoryBuilder;\nimport java.io.File;\n\nclass SshTransportConfigCallback implements TransportConfigCallback {\n    SshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder()\n        .setHomeDirectory(new File(&quot;/home/johndoe/.ssh_github&quot;))\n        .setSshDirectory(new File(&quot;/home/johndoe/.ssh_github&quot;))\n        .build(null);\n\n    @Override\n    public void configure(Transport transport) {\n        SshTransport sshTransport = (SshTransport) transport;\n        sshTransport.setSshSessionFactory(sshSessionFactory);\n    }\n}\n</code></pre>\n<p>Get the ssh url for your repository and then you should be able to clone it:</p>\n<pre><code>Git.cloneRepository()\n    .setDirectory(Files.createTempDirectory(&quot;my-repo&quot;).toFile())\n    .setTransportConfigCallback(new SshTransportConfigCallback())\n    .setURI(&quot;org-28603984@github.com:MyCompany/my-repo.git&quot;)\n    .call();\n</code></pre>\n<p>It is not that hard, but it can be fiddly. And the sometimes vague and/or generic error messages do not help troubleshooting.</p>\n"}],"owner":{"account_id":4608650,"reputation":1,"user_id":3737413,"display_name":"Prince Rachit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1679428309,"creation_date":1520327158,"question_id":49127019,"body_markdown":"I am trying Jgit and Egit to raise PR using deploy key on github.com but I am unable to find a way to do it. There are no relevant documents present.\r\nCan somebody point me to documentation or suggest some other java library to do it?","title":"How to use deploy key of github in java git library","body":"<p>I am trying Jgit and Egit to raise PR using deploy key on github.com but I am unable to find a way to do it. There are no relevant documents present.\nCan somebody point me to documentation or suggest some other java library to do it?</p>\n"},{"tags":["java","selenium-webdriver","testng"],"comments":[{"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"score":0,"creation_date":1679337134,"post_id":75784495,"comment_id":133700474,"body_markdown":"@JeffC I have updated the post with my question and I hope it&#39;s more clear now.\n\nUpdate: &quot;I wanted to know if there&#39;s a way for me to pass the value from the **selectDriver** method to the **browser** parameter that I am using within the **TestSuite.xml**&quot;","body":"@JeffC I have updated the post with my question and I hope it&#39;s more clear now.  Update: &quot;I wanted to know if there&#39;s a way for me to pass the value from the <b>selectDriver</b> method to the <b>browser</b> parameter that I am using within the <b>TestSuite.xml</b>&quot;"},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1679343132,"post_id":75784495,"comment_id":133701915,"body_markdown":"TestSuite.xml is just one way to pass in a driver. You can just write code that processes the input from Scanner(), creates a driver of that flavor, and runs the test/suite.","body":"TestSuite.xml is just one way to pass in a driver. You can just write code that processes the input from Scanner(), creates a driver of that flavor, and runs the test/suite."},{"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"score":0,"creation_date":1679426140,"post_id":75784495,"comment_id":133719573,"body_markdown":"@JeffC I have tried to implement the **selectDriver** method within my **webDriver** method that has the **@BeforeClass** annotation while also removing the **browser** parameter. However, I am given a read-only console when running the tests. Any idea of what the issue is or how should I proceed with the implementation?","body":"@JeffC I have tried to implement the <b>selectDriver</b> method within my <b>webDriver</b> method that has the <b>@BeforeClass</b> annotation while also removing the <b>browser</b> parameter. However, I am given a read-only console when running the tests. Any idea of what the issue is or how should I proceed with the implementation?"}],"answers":[{"comments":[{"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"score":0,"creation_date":1679605522,"post_id":75805770,"comment_id":133756316,"body_markdown":"Apologies for being difficult, but I&#39;m not that experienced neither with Java, nor with Selenium. Is there a chance for you to share a short code snippet on what I would need to implement in each method?","body":"Apologies for being difficult, but I&#39;m not that experienced neither with Java, nor with Selenium. Is there a chance for you to share a short code snippet on what I would need to implement in each method?"}],"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679428147,"creation_date":1679428147,"answer_id":75805770,"question_id":75784495,"body_markdown":"I think you&#39;re going about it the wrong way. I think the ideal way is to set up a release in whatever system you are using to trigger tests. Each release would specify all the expected settings... driver, resolutions, etc. and then if someone wants to start a run, they trigger the release corresponding to the driver/settings they want run.","title":"WebDriver chosen by user input for Selenium Tests using TestNG suites","body":"<p>I think you're going about it the wrong way. I think the ideal way is to set up a release in whatever system you are using to trigger tests. Each release would specify all the expected settings... driver, resolutions, etc. and then if someone wants to start a run, they trigger the release corresponding to the driver/settings they want run.</p>\n"}],"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1679428147,"creation_date":1679254438,"question_id":75784495,"body_markdown":"I am trying to integrate `Scanner()` class within my existing Selenium test cases so the users can choose the WebDriver to run the tests on and the value I believe would need to be passed to the TestNG suite.\r\n\r\nI wanted to know if there&#39;s a way for me to pass the value from the **selectDriver** Java method to the **browser** parameter that I am using within the **TestSuite.xml**\r\n\r\nBelow is what I already have in place and also what I have tried implementing:\r\n\r\n**selectDriver**\r\n\r\n    public static String selectDriver() {\r\n\r\n        Scanner reader = new Scanner(System.in);\r\n        System.out.println(&quot;Please select a platform and a device to run the tests on:\\n&quot; +\r\n                &quot;Windows\\n&quot; +\r\n                &quot;\\t1. Google Chrome\\n&quot; +\r\n                &quot;\\t2. Firefox\\n&quot; +\r\n                &quot;\\t3. Microsoft Edge\\n\\n&quot; +\r\n                &quot;Android\\n&quot; +\r\n                &quot;\\t4. Google Chrome&quot;);\r\n\r\n        int driverSelection = reader.nextInt();\r\n\r\n        if (driverSelection == 1) {\r\n            return &quot;chromeWindows&quot;;\r\n        } else if (driverSelection == 2) {\r\n            return &quot;firefoxWindows&quot;;\r\n        } else if (driverSelection == 3) {\r\n            return &quot;edgeWindows&quot;;\r\n        } else if (driverSelection == 4) {\r\n            return &quot;chromeAndroid&quot;;\r\n        }\r\n        reader.close();\r\n        return null;\r\n    }\r\n\r\n**webDriver**\r\n\r\n    @Parameters(&quot;browser&quot;)\r\n    @BeforeClass\r\n    public void webDriver(String browser) throws IOException {\r\n\r\n        if (browser.equalsIgnoreCase(&quot;chromeWindows&quot;)) {\r\n\r\n            List&lt;String&gt; driverArguments = List.of(&quot;start-maximized&quot;, &quot;remote-debugging-port=9222&quot;, &quot;disable-popup-blocking&quot;, &quot;disable-notifications&quot;, &quot;--remote-allow-origins=*&quot;); \r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, currentUserDirectory + Config.config(&quot;chromeDriverPath&quot;));\r\n            ChromeOptions options = new ChromeOptions();\r\n            options.setExperimentalOption(&quot;excludeSwitches&quot;, new String[]{&quot;enable-automation&quot;});\r\n            options.addArguments(driverArguments);\r\n            setWebDriver(new ChromeDriver(options));\r\n\r\n**TestSuite.xml**\r\n\r\n        !DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;\r\n    suite name=&quot;Desktop - Selenium Tests&quot;\r\n    \r\n        parameter name=&quot;browser&quot; value=&quot;chrome&quot;/\r\n    \r\n        &lt;test name=&quot;Test1&quot; &gt;\r\n            &lt;classes&gt;\r\n                &lt;class name=&quot;tests.desktop.homePageTest&quot;/&gt;\r\n            &lt;/classes&gt;\r\n        &lt;/test&gt;\r\n    &lt;/suite&gt;\r\n\r\n\r\nIf there&#39;s no easier way to achieve that, I&#39;ll have to take a look into editing an XML file based on the user&#39;s input to provide the **browser** value.","title":"WebDriver chosen by user input for Selenium Tests using TestNG suites","body":"<p>I am trying to integrate <code>Scanner()</code> class within my existing Selenium test cases so the users can choose the WebDriver to run the tests on and the value I believe would need to be passed to the TestNG suite.</p>\n<p>I wanted to know if there's a way for me to pass the value from the <strong>selectDriver</strong> Java method to the <strong>browser</strong> parameter that I am using within the <strong>TestSuite.xml</strong></p>\n<p>Below is what I already have in place and also what I have tried implementing:</p>\n<p><strong>selectDriver</strong></p>\n<pre><code>public static String selectDriver() {\n\n    Scanner reader = new Scanner(System.in);\n    System.out.println(&quot;Please select a platform and a device to run the tests on:\\n&quot; +\n            &quot;Windows\\n&quot; +\n            &quot;\\t1. Google Chrome\\n&quot; +\n            &quot;\\t2. Firefox\\n&quot; +\n            &quot;\\t3. Microsoft Edge\\n\\n&quot; +\n            &quot;Android\\n&quot; +\n            &quot;\\t4. Google Chrome&quot;);\n\n    int driverSelection = reader.nextInt();\n\n    if (driverSelection == 1) {\n        return &quot;chromeWindows&quot;;\n    } else if (driverSelection == 2) {\n        return &quot;firefoxWindows&quot;;\n    } else if (driverSelection == 3) {\n        return &quot;edgeWindows&quot;;\n    } else if (driverSelection == 4) {\n        return &quot;chromeAndroid&quot;;\n    }\n    reader.close();\n    return null;\n}\n</code></pre>\n<p><strong>webDriver</strong></p>\n<pre><code>@Parameters(&quot;browser&quot;)\n@BeforeClass\npublic void webDriver(String browser) throws IOException {\n\n    if (browser.equalsIgnoreCase(&quot;chromeWindows&quot;)) {\n\n        List&lt;String&gt; driverArguments = List.of(&quot;start-maximized&quot;, &quot;remote-debugging-port=9222&quot;, &quot;disable-popup-blocking&quot;, &quot;disable-notifications&quot;, &quot;--remote-allow-origins=*&quot;); \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, currentUserDirectory + Config.config(&quot;chromeDriverPath&quot;));\n        ChromeOptions options = new ChromeOptions();\n        options.setExperimentalOption(&quot;excludeSwitches&quot;, new String[]{&quot;enable-automation&quot;});\n        options.addArguments(driverArguments);\n        setWebDriver(new ChromeDriver(options));\n</code></pre>\n<p><strong>TestSuite.xml</strong></p>\n<pre><code>    !DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;\nsuite name=&quot;Desktop - Selenium Tests&quot;\n\n    parameter name=&quot;browser&quot; value=&quot;chrome&quot;/\n\n    &lt;test name=&quot;Test1&quot; &gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;tests.desktop.homePageTest&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p>If there's no easier way to achieve that, I'll have to take a look into editing an XML file based on the user's input to provide the <strong>browser</strong> value.</p>\n"},{"tags":["java","javafx","spinner"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1679426421,"post_id":75805024,"comment_id":133719630,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."}],"answers":[{"comments":[{"owner":{"account_id":23307629,"reputation":11,"user_id":17387377,"display_name":"AnonymousBoy"},"score":0,"creation_date":1679507527,"post_id":75805768,"comment_id":133736100,"body_markdown":"Thank you! Something new learned.","body":"Thank you! Something new learned."}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1679428124,"creation_date":1679428124,"answer_id":75805768,"question_id":75805024,"body_markdown":"Simply setting the repeat delay to `Duration.INDEFINITE` seems to work:\r\n\r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Spinner;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.Duration;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class HelloApplication extends Application {\r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(0,100,1);\r\n\r\n            spinner.setRepeatDelay(Duration.INDEFINITE);\r\n\r\n            BorderPane root = new BorderPane(spinner);\r\n            Scene scene = new Scene(root, 320, 180);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }","title":"JavaFX Spinner should only decrement/increment by one value when holding the mouse pressed","body":"<p>Simply setting the repeat delay to <code>Duration.INDEFINITE</code> seems to work:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Spinner;\nimport javafx.scene.layout.BorderPane;\nimport javafx.stage.Stage;\nimport javafx.util.Duration;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n    @Override\n    public void start(Stage stage) throws IOException {\n        Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(0,100,1);\n\n        spinner.setRepeatDelay(Duration.INDEFINITE);\n\n        BorderPane root = new BorderPane(spinner);\n        Scene scene = new Scene(root, 320, 180);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23307629,"reputation":11,"user_id":17387377,"display_name":"AnonymousBoy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1679444859,"answer_count":1,"score":0,"last_activity_date":1679428124,"creation_date":1679422888,"question_id":75805024,"body_markdown":"When I hold the increment/decrement buttons of the spinner, the value inside the Spinner is incrementing/decrementing very fast, but I only want it to increment/decrement one time (one Integer down/up) every time I hold the arrows of the Spinner.\r\n\r\nI want that holding the arrows should behave the same as clicking the arrows of the Spinner.\r\n\r\nIs there a solution to this?\r\n\r\nI already tried the &quot;On Mouse Clicked&quot; and the &quot;On Mouse Pressed&quot; Events.","title":"JavaFX Spinner should only decrement/increment by one value when holding the mouse pressed","body":"<p>When I hold the increment/decrement buttons of the spinner, the value inside the Spinner is incrementing/decrementing very fast, but I only want it to increment/decrement one time (one Integer down/up) every time I hold the arrows of the Spinner.</p>\n<p>I want that holding the arrows should behave the same as clicking the arrows of the Spinner.</p>\n<p>Is there a solution to this?</p>\n<p>I already tried the &quot;On Mouse Clicked&quot; and the &quot;On Mouse Pressed&quot; Events.</p>\n"},{"tags":["java","libreoffice","openoffice.org","odt","opendocument"],"answers":[{"comments":[{"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"score":0,"creation_date":1380624005,"post_id":4791419,"comment_id":28262425,"body_markdown":"Note that JOpenDocument is GPL licensed (commercial license available) while Apache ODFDOM is (as expected) Apache licensed.","body":"Note that JOpenDocument is GPL licensed (commercial license available) while Apache ODFDOM is (as expected) Apache licensed."},{"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"score":0,"creation_date":1380624472,"post_id":4791419,"comment_id":28262660,"body_markdown":"Hmm... [ODF Toolkit 0.6-incubating was released June 2013](http://incubator.apache.org/odftoolkit/downloads.html), but it&#39;s not available in Maven central repository","body":"Hmm... <a href=\"http://incubator.apache.org/odftoolkit/downloads.html\" rel=\"nofollow noreferrer\">ODF Toolkit 0.6-incubating was released June 2013</a>, but it&#39;s not available in Maven central repository"},{"owner":{"account_id":2509854,"reputation":641,"user_id":2207837,"display_name":"Jaap"},"score":1,"creation_date":1549529220,"post_id":4791419,"comment_id":95936644,"body_markdown":"The ODF Toolkit project has been retired from the Apache incubator on November 27th, 2018: http://incubator.apache.org/projects/odftoolkit.html","body":"The ODF Toolkit project has been retired from the Apache incubator on November 27th, 2018: <a href=\"http://incubator.apache.org/projects/odftoolkit.html\" rel=\"nofollow noreferrer\">incubator.apache.org/projects/odftoolkit.html</a>"}],"tags":[],"owner":{"account_id":77937,"reputation":25992,"user_id":222159,"accept_rate":94,"display_name":"Adnan"},"comment_count":3,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1675177504,"creation_date":1295945163,"answer_id":4791419,"question_id":4791389,"body_markdown":"Take a look at [ODFDOM - the OpenDocument API][1]\r\n\r\n&gt; ODFDOM is a free OpenDocument Format\r\n&gt; (ODF) library. Its purpose is to\r\n&gt; provide an easy common way to create,\r\n&gt; access and manipulate ODF files,\r\n&gt; without requiring detailed knowledge\r\n&gt; of the ODF specification. It is\r\n&gt; designed to provide the ODF developer\r\n&gt; community with an easy lightwork\r\n&gt; programming API portable to any\r\n&gt; object-oriented language.\r\n&gt; \r\n&gt; The current reference implementation\r\n&gt; is written in Java.\r\n\r\n    // Create a text document from a standard template (empty documents within the JAR)\r\n    OdfTextDocument odt = OdfTextDocument.newTextDocument();\r\n    \r\n    // Append text to the end of the document. \r\n    odt.addText(&quot;This is my very first ODF test&quot;);\r\n    \r\n    // Save document\r\n    odt.save(&quot;MyFilename.odt&quot;);\r\n\r\n***later***\r\n\r\nAs of this writing (2016-02), we are told that these classes are deprecated... big time, and the `OdfTextDocument` API documentation tells you:\r\n\r\n&gt; As of release 0.8.8, replaced by org.odftoolkit.simple.TextDocument in\r\n&gt; Simple API.\r\n\r\nThis means you still include the same active .jar file in your project, `simple-odf-0.8.1-incubating-jar-with-dependencies.jar`, but you want to be unpacking the following .jar to get the documentation: `simple-odf-0.8.1-incubating-javadoc.jar`, rather than `odfdom-java-0.8.10-incubating-javadoc.jar`.\r\n\r\nIncidentally, the documentation link downloads a bunch of jar files inside a .zip which says &quot;0.6.1&quot;... but most of the stuff inside appears to be more like 0.8.1.  I have no idea why they say &quot;as of 0.8.8&quot; in the documentation for the &quot;deprecated&quot; classes: just about everything is already marked deprecated.\r\n\r\nThe equivalent simple code to the above is then:\r\n\r\n    odt_doc = org.odftoolkit.simple.TextDocument.newTextDocument()\r\n    para = odt_doc.getParagraphByIndex( 0, False )\r\n    para.appendTextContent( &#39;stuff and nonsense&#39; )\r\n    odt_doc.save( &#39;mySpankingNewFile.odt&#39; )\r\n\r\nPS am using Jython, but the Java should be obvious.\r\n\r\n\r\n  [1]: https://odftoolkit.org/odfdom/\r\n","title":"how to create an odt file programmatically with java?","body":"<p>Take a look at <a href=\"https://odftoolkit.org/odfdom/\" rel=\"nofollow noreferrer\">ODFDOM - the OpenDocument API</a></p>\n<blockquote>\n<p>ODFDOM is a free OpenDocument Format\n(ODF) library. Its purpose is to\nprovide an easy common way to create,\naccess and manipulate ODF files,\nwithout requiring detailed knowledge\nof the ODF specification. It is\ndesigned to provide the ODF developer\ncommunity with an easy lightwork\nprogramming API portable to any\nobject-oriented language.</p>\n<p>The current reference implementation\nis written in Java.</p>\n</blockquote>\n<pre><code>// Create a text document from a standard template (empty documents within the JAR)\nOdfTextDocument odt = OdfTextDocument.newTextDocument();\n\n// Append text to the end of the document. \nodt.addText(&quot;This is my very first ODF test&quot;);\n\n// Save document\nodt.save(&quot;MyFilename.odt&quot;);\n</code></pre>\n<p><em><strong>later</strong></em></p>\n<p>As of this writing (2016-02), we are told that these classes are deprecated... big time, and the <code>OdfTextDocument</code> API documentation tells you:</p>\n<blockquote>\n<p>As of release 0.8.8, replaced by org.odftoolkit.simple.TextDocument in\nSimple API.</p>\n</blockquote>\n<p>This means you still include the same active .jar file in your project, <code>simple-odf-0.8.1-incubating-jar-with-dependencies.jar</code>, but you want to be unpacking the following .jar to get the documentation: <code>simple-odf-0.8.1-incubating-javadoc.jar</code>, rather than <code>odfdom-java-0.8.10-incubating-javadoc.jar</code>.</p>\n<p>Incidentally, the documentation link downloads a bunch of jar files inside a .zip which says &quot;0.6.1&quot;... but most of the stuff inside appears to be more like 0.8.1.  I have no idea why they say &quot;as of 0.8.8&quot; in the documentation for the &quot;deprecated&quot; classes: just about everything is already marked deprecated.</p>\n<p>The equivalent simple code to the above is then:</p>\n<pre><code>odt_doc = org.odftoolkit.simple.TextDocument.newTextDocument()\npara = odt_doc.getParagraphByIndex( 0, False )\npara.appendTextContent( 'stuff and nonsense' )\nodt_doc.save( 'mySpankingNewFile.odt' )\n</code></pre>\n<p>PS am using Jython, but the Java should be obvious.</p>\n"},{"comments":[{"owner":{"account_id":359788,"reputation":649,"user_id":701410,"accept_rate":86,"display_name":"Tango"},"score":0,"creation_date":1355638071,"post_id":4791423,"comment_id":19151330,"body_markdown":"The problem with JOpenDocument is that it still supports primarily spreadsheets and doesn&#39;t even have full support for text.","body":"The problem with JOpenDocument is that it still supports primarily spreadsheets and doesn&#39;t even have full support for text."},{"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"score":1,"creation_date":1380614064,"post_id":4791423,"comment_id":28257264,"body_markdown":"JOpenDocument&#39;s latest release is [1.3 from Jul 2013](http://search.maven.org/#search%7Cga%7C1%7Cjopendocument) so it seems to be well maintained. ODFDOM seems no longer maintained, latest &quot;release&quot; on Jan 2012 (it&#39;s not even visible from the website) is [0.8.8-incubating](http://search.maven.org/#artifactdetails%7Corg.apache.odftoolkit%7Codfdom-java%7C0.8.8-incubating%7Cjar).","body":"JOpenDocument&#39;s latest release is <a href=\"http://search.maven.org/#search%7Cga%7C1%7Cjopendocument\" rel=\"nofollow noreferrer\">1.3 from Jul 2013</a> so it seems to be well maintained. ODFDOM seems no longer maintained, latest &quot;release&quot; on Jan 2012 (it&#39;s not even visible from the website) is <a href=\"http://search.maven.org/#artifactdetails%7Corg.apache.odftoolkit%7Codfdom-java%7C0.8.8-incubating%7Cjar\" rel=\"nofollow noreferrer\">0.8.8-incubating</a>."},{"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"score":0,"creation_date":1380623796,"post_id":4791423,"comment_id":28262317,"body_markdown":"Note that JOpenDocument is GPL licensed (commercial license available) while Apache ODFDOM is (as expected) Apache licensed.","body":"Note that JOpenDocument is GPL licensed (commercial license available) while Apache ODFDOM is (as expected) Apache licensed."}],"tags":[],"owner":{"account_id":39267,"reputation":16578,"user_id":113158,"accept_rate":88,"display_name":"Jean Hominal"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1295945179,"creation_date":1295945179,"answer_id":4791423,"question_id":4791389,"body_markdown":"I have not tried it, but using [JOpenDocument](http://www.jopendocument.org/) may be an option. (It seems to be a pure Java library to generate OpenDocument files.)","title":"how to create an odt file programmatically with java?","body":"<p>I have not tried it, but using <a href=\"http://www.jopendocument.org/\" rel=\"noreferrer\">JOpenDocument</a> may be an option. (It seems to be a pure Java library to generate OpenDocument files.)</p>\n"},{"tags":[],"owner":{"account_id":544830,"reputation":2561,"user_id":914404,"accept_rate":100,"display_name":"Marc de Verdelhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1679428039,"creation_date":1354612958,"answer_id":13699578,"question_id":4791389,"body_markdown":"A complement of previously given solutions would be [JODReports][1], which allows creating office documents and reports in ODT format (from templates, composed using the LibreOffice/OpenOffice.org Writer word processor).\r\n\r\n    DocumentTemplateFactory templateFactory = new DocumentTemplateFactory();\r\n    DocumentTemplate template = templateFactory .getTemplate(new File(&quot;template.odt&quot;));\r\n    Map data = new HashMap();\r\n    data.put(&quot;title&quot;, &quot;Title of my doc&quot;);\r\n    data.put(&quot;picture&quot;, new RenderedImageSource(ImageIO.read(new File(&quot;/tmp/lena.png&quot;))));\r\n    data.put(&quot;answer&quot;, &quot;42&quot;);\r\n    //...\r\n    template.createDocument(data, new FileOutputStream(&quot;output.odt&quot;));\r\n\r\n\r\nOptionally the documents can then be converted to PDF, Word, RTF, etc. with [JODConverter][2].\r\n\r\nEdit/update\r\n-----------\r\nOn GitHub, [ansgarkonermann/jodreports-examples][3] is a sample project using JODReports (with non-trivial formatting cases).\r\n\r\n\r\n  [1]: http://jodreports.sourceforge.net/\r\n  [2]: http://code.google.com/p/jodconverter/\r\n  [3]: https://github.com/ansgarkonermann/jodreports-examples","title":"how to create an odt file programmatically with java?","body":"<p>A complement of previously given solutions would be <a href=\"http://jodreports.sourceforge.net/\" rel=\"nofollow noreferrer\">JODReports</a>, which allows creating office documents and reports in ODT format (from templates, composed using the LibreOffice/OpenOffice.org Writer word processor).</p>\n<pre><code>DocumentTemplateFactory templateFactory = new DocumentTemplateFactory();\nDocumentTemplate template = templateFactory .getTemplate(new File(&quot;template.odt&quot;));\nMap data = new HashMap();\ndata.put(&quot;title&quot;, &quot;Title of my doc&quot;);\ndata.put(&quot;picture&quot;, new RenderedImageSource(ImageIO.read(new File(&quot;/tmp/lena.png&quot;))));\ndata.put(&quot;answer&quot;, &quot;42&quot;);\n//...\ntemplate.createDocument(data, new FileOutputStream(&quot;output.odt&quot;));\n</code></pre>\n<p>Optionally the documents can then be converted to PDF, Word, RTF, etc. with <a href=\"http://code.google.com/p/jodconverter/\" rel=\"nofollow noreferrer\">JODConverter</a>.</p>\n<h2>Edit/update</h2>\n<p>On GitHub, <a href=\"https://github.com/ansgarkonermann/jodreports-examples\" rel=\"nofollow noreferrer\">ansgarkonermann/jodreports-examples</a> is a sample project using JODReports (with non-trivial formatting cases).</p>\n"},{"tags":[],"owner":{"display_name":"user67416"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1371838162,"creation_date":1371837756,"answer_id":17241582,"question_id":4791389,"body_markdown":"I have written a jruby DSL for programmatically manipulating ODF documents.\r\n\r\nhttps://github.com/noah/ocelot\r\n\r\nIt&#39;s not strictly java, but it aims to be much simpler to use than the ODFDOM.\r\n\r\nCreating a hello world document is as easy as:\r\n\r\n    % cat examples/hello.rb\r\n    include OCELOT\r\n\r\n    Text::create &quot;hello&quot; do\r\n      paragraph &quot;Hello, world!&quot;\r\n    end\r\n\r\nThere are a few more examples (including a spreadsheet example or two) [here][1].\r\n\r\n\r\n  [1]: https://github.com/noah/ocelot/tree/master/examples","title":"how to create an odt file programmatically with java?","body":"<p>I have written a jruby DSL for programmatically manipulating ODF documents.</p>\n\n<p><a href=\"https://github.com/noah/ocelot\" rel=\"nofollow\">https://github.com/noah/ocelot</a></p>\n\n<p>It's not strictly java, but it aims to be much simpler to use than the ODFDOM.</p>\n\n<p>Creating a hello world document is as easy as:</p>\n\n<pre><code>% cat examples/hello.rb\ninclude OCELOT\n\nText::create \"hello\" do\n  paragraph \"Hello, world!\"\nend\n</code></pre>\n\n<p>There are a few more examples (including a spreadsheet example or two) <a href=\"https://github.com/noah/ocelot/tree/master/examples\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380616617,"creation_date":1380616617,"answer_id":19111553,"question_id":4791389,"body_markdown":"You can try using **[JasperReports][1]** to generate your reports, then [**export it to ODS**](http://www.ramkitech.com/2011/11/jsf-jpa-jasperreports-ireport.html). The nice thing about this approach is \r\n\r\n 1. you get broad support for all JasperReports output formats, e.g. PDF, XLS, HTML, etc.\r\n 2. [**Jasper Studio**](jasperforge.org/projects/jaspersoftstudio) makes it easy to design your reports\r\n\r\n\r\n  [1]: http://jasperforge.org","title":"how to create an odt file programmatically with java?","body":"<p>You can try using <strong><a href=\"http://jasperforge.org\" rel=\"nofollow\">JasperReports</a></strong> to generate your reports, then <a href=\"http://www.ramkitech.com/2011/11/jsf-jpa-jasperreports-ireport.html\" rel=\"nofollow\"><strong>export it to ODS</strong></a>. The nice thing about this approach is </p>\n\n<ol>\n<li>you get broad support for all JasperReports output formats, e.g. PDF, XLS, HTML, etc.</li>\n<li><strong>Jasper Studio</strong> makes it easy to design your reports</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":2509854,"reputation":641,"user_id":2207837,"display_name":"Jaap"},"score":0,"creation_date":1549529227,"post_id":32523198,"comment_id":95936654,"body_markdown":"The ODF Toolkit project has been retired from the Apache incubator on November 27th, 2018: http://incubator.apache.org/projects/odftoolkit.html","body":"The ODF Toolkit project has been retired from the Apache incubator on November 27th, 2018: <a href=\"http://incubator.apache.org/projects/odftoolkit.html\" rel=\"nofollow noreferrer\">incubator.apache.org/projects/odftoolkit.html</a>"}],"tags":[],"owner":{"account_id":2621174,"reputation":229,"user_id":2971524,"display_name":"aibrahim"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442311451,"creation_date":1441973349,"answer_id":32523198,"question_id":4791389,"body_markdown":"I have been searching for an answer about this question for myself. I am working on a project for generating documents with different formats and I was in a bad need for library to generate ODT files.\r\nI finally can say the that ODFToolkit with the latest version of the simple-odf library is the answer for generating text documents. \r\nYou can find the the official page here :\r\n[Apache ODF Toolkit(Incubating) - Simple API ][1]\r\nHere is  [a page to download version 0.8.1 (the latest version of Simple API)][2] as I didn&#39;t find the latest version at the official page, only version 0.6.1\r\n\r\nAnd here you can find [Apache ODF Toolkit (incubating) cookbook][3]\r\n\r\n\r\n  [1]: https://incubator.apache.org/odftoolkit/simple/index.html\r\n  [2]: http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.odftoolkit/simple-odf/0.8.1-incubating\r\n  [3]: http://incubator.apache.org/odftoolkit/simple/document/cookbook/index.html","title":"how to create an odt file programmatically with java?","body":"<p>I have been searching for an answer about this question for myself. I am working on a project for generating documents with different formats and I was in a bad need for library to generate ODT files.\nI finally can say the that ODFToolkit with the latest version of the simple-odf library is the answer for generating text documents. \nYou can find the the official page here :\n<a href=\"https://incubator.apache.org/odftoolkit/simple/index.html\" rel=\"nofollow\">Apache ODF Toolkit(Incubating) - Simple API </a>\nHere is  <a href=\"http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.odftoolkit/simple-odf/0.8.1-incubating\" rel=\"nofollow\">a page to download version 0.8.1 (the latest version of Simple API)</a> as I didn't find the latest version at the official page, only version 0.6.1</p>\n\n<p>And here you can find <a href=\"http://incubator.apache.org/odftoolkit/simple/document/cookbook/index.html\" rel=\"nofollow\">Apache ODF Toolkit (incubating) cookbook</a></p>\n"},{"tags":[],"owner":{"account_id":16667817,"reputation":1,"user_id":12046056,"display_name":"DevVladan"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1568192922,"creation_date":1568109720,"answer_id":57868401,"question_id":4791389,"body_markdown":"the solution may be JODF Java API Independentsoft company.\r\nFor example, if we want to create an Open Document file using this Java API  we could do the following:\r\n\r\n```\r\nimport com.independentsoft.office.odf.Paragraph;\r\nimport com.independentsoft.office.odf.TextDocument;\r\n\r\npublic class Example {\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        try\r\n        {\r\n            TextDocument doc = new TextDocument();\r\n            \r\n            Paragraph p1 = new Paragraph();\r\n            p1.add(&quot;Hello World&quot;);\r\n\r\n            doc.getBody().add(p1);\r\n\r\n            doc.save(&quot;c:\\\\test\\\\output.odt&quot;, true);\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            System.out.println(e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n\r\n``` \r\nThere are also .NET solutions for this API.","title":"how to create an odt file programmatically with java?","body":"<p>the solution may be JODF Java API Independentsoft company.\nFor example, if we want to create an Open Document file using this Java API  we could do the following:</p>\n\n<pre><code>import com.independentsoft.office.odf.Paragraph;\nimport com.independentsoft.office.odf.TextDocument;\n\npublic class Example {\n\n    public static void main(String[] args)\n    {\n        try\n        {\n            TextDocument doc = new TextDocument();\n\n            Paragraph p1 = new Paragraph();\n            p1.add(\"Hello World\");\n\n            doc.getBody().add(p1);\n\n            doc.save(\"c:\\\\test\\\\output.odt\", true);\n        }\n        catch (Exception e)\n        {\n            System.out.println(e.getMessage());\n            e.printStackTrace();\n        }\n    }\n}\n\n</code></pre>\n\n<p>There are also .NET solutions for this API.</p>\n"},{"tags":[],"owner":{"account_id":98194,"reputation":4266,"user_id":265954,"display_name":"t0r0X"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647103995,"creation_date":1647103676,"answer_id":71451511,"question_id":4791389,"body_markdown":"[The ODF Toolkit][1] project (code hosted at [Github][2]) is the new home of the former ODFDOM project, which was until 2018-11-27 a [Apache Incubator project][3]. \r\n\r\n\r\n  [1]: https://odftoolkit.org/\r\n  [2]: https://github.com/tdf/odftoolkit\r\n  [3]: https://incubator.apache.org/projects/odftoolkit.html","title":"how to create an odt file programmatically with java?","body":"<p><a href=\"https://odftoolkit.org/\" rel=\"nofollow noreferrer\">The ODF Toolkit</a> project (code hosted at <a href=\"https://github.com/tdf/odftoolkit\" rel=\"nofollow noreferrer\">Github</a>) is the new home of the former ODFDOM project, which was until 2018-11-27 a <a href=\"https://incubator.apache.org/projects/odftoolkit.html\" rel=\"nofollow noreferrer\">Apache Incubator project</a>.</p>\n"}],"owner":{"account_id":700028,"reputation":261,"user_id":588719,"display_name":"baris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38207,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"answer_count":8,"score":26,"last_activity_date":1679428039,"creation_date":1295944864,"question_id":4791389,"body_markdown":"How can I create an odt (LibreOffice/OpenOffice Writer) file with Java programmatically? A &quot;hello world&quot; example will be sufficient. I looked at the OpenOffice website but the documentation wasn&#39;t clear.","title":"how to create an odt file programmatically with java?","body":"<p>How can I create an odt (LibreOffice/OpenOffice Writer) file with Java programmatically? A \"hello world\" example will be sufficient. I looked at the OpenOffice website but the documentation wasn't clear.</p>\n"},{"tags":["java","multithreading"],"answers":[{"comments":[{"owner":{"account_id":3815702,"reputation":131,"user_id":3165132,"accept_rate":36,"display_name":"Pengiuns"},"score":0,"creation_date":1468733271,"post_id":38418154,"comment_id":64243198,"body_markdown":"Thanks, just got it working. The not running part was just a test without doing proper debugging, will be removing that in the end.","body":"Thanks, just got it working. The not running part was just a test without doing proper debugging, will be removing that in the end."},{"owner":{"account_id":535619,"reputation":3374,"user_id":905033,"display_name":"Lew Bloch"},"score":0,"creation_date":1468737883,"post_id":38418154,"comment_id":64243976,"body_markdown":"The variable name `R1` does not conform to the Java naming conventions.","body":"The variable name <code>R1</code> does not conform to the Java naming conventions."}],"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1468732855,"creation_date":1468732855,"answer_id":38418154,"question_id":38418050,"body_markdown":"You can&#39;t call any methods of your `Threads` class, because you don&#39;t have a reference to the object of that type.\r\n\r\nChange your code to:\r\n\r\n    Threads R1 = new Threads(&quot;Thread 1&quot;);\r\n    Thread thread = new Thread(R1);\r\n    thread.start();\r\n\r\n    Thread.sleep(1000);\r\n    R1.setoff();\r\n\r\n---\r\n\r\nAlso, `if(this.running ==false)` should be written `if (! this.running)`.\r\n\r\nOr better yet, that line should be removed. The *only* way for that line to be executed, is for the preceding `while` loop to exit, which only happens when `this.running` is false, so the test in the `if` statement is redundant.","title":"Unable to access method of thread class?","body":"<p>You can't call any methods of your <code>Threads</code> class, because you don't have a reference to the object of that type.</p>\n\n<p>Change your code to:</p>\n\n<pre><code>Threads R1 = new Threads(\"Thread 1\");\nThread thread = new Thread(R1);\nthread.start();\n\nThread.sleep(1000);\nR1.setoff();\n</code></pre>\n\n<hr>\n\n<p>Also, <code>if(this.running ==false)</code> should be written <code>if (! this.running)</code>.</p>\n\n<p>Or better yet, that line should be removed. The <em>only</em> way for that line to be executed, is for the preceding <code>while</code> loop to exit, which only happens when <code>this.running</code> is false, so the test in the <code>if</code> statement is redundant.</p>\n"},{"tags":[],"owner":{"account_id":3815702,"reputation":131,"user_id":3165132,"accept_rate":36,"display_name":"Pengiuns"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468733167,"creation_date":1468733167,"answer_id":38418172,"question_id":38418050,"body_markdown":"Nevermind, got it working after;\r\n\r\n    Threads mythread = new Threads(&quot;222&quot;);\r\n    Thread R1 = new Thread(mythread);\r\n    mythread.seton();\r\n    R1.start();","title":"Unable to access method of thread class?","body":"<p>Nevermind, got it working after;</p>\n\n<pre><code>Threads mythread = new Threads(\"222\");\nThread R1 = new Thread(mythread);\nmythread.seton();\nR1.start();\n</code></pre>\n"}],"owner":{"account_id":3815702,"reputation":131,"user_id":3165132,"accept_rate":36,"display_name":"Pengiuns"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":38418154,"answer_count":2,"score":0,"last_activity_date":1679427948,"creation_date":1468731579,"question_id":38418050,"body_markdown":"I&#39;m unable to call any functions of R1 from my main class? (seton(), setoff(), etc.)\r\n\r\n    public class Threads implements Runnable {\r\n      public String threadName;\r\n      private volatile boolean running = true;\r\n    \r\n      public Threads( String name) {\r\n        threadName = name;\r\n      }\r\n    \r\n      public void setoff() {\r\n        running = false; //this.running = false;\r\n      }\r\n    \r\n      public void seton() {\r\n        running = true; //this.running = true;\r\n      }\r\n    \r\n      public void run() {\r\n        while(this.running) {\r\n          System.out.println(&quot;running&quot;);\r\n        }\r\n        if(this.running ==false) {\r\n          System.out.println(&quot;stopped&quot;);\r\n        }\r\n        System.out.println(&quot;Thread &quot; +  threadName + &quot; exiting.&quot;);\r\n      }\r\n    }\r\n\r\n    \r\n--end class\r\n\r\n    public class MainFrame extends javax.swing.JFrame {  \r\n      Thread R1 = null;\r\n    \r\n      public MainFrame() {\r\n        initComponents();\r\n      }\r\n\r\n      private void jbtnstartActionPerformed(java.awt.event.ActionEvent evt) {                                          \r\n        R1 = new Thread(new Threads(&quot;Thread 1&quot;));\r\n        R1.start();\r\n      }       \r\n    }\r\n\r\n\r\n","title":"Unable to access method of thread class?","body":"<p>I'm unable to call any functions of R1 from my main class? (seton(), setoff(), etc.)</p>\n<pre><code>public class Threads implements Runnable {\n  public String threadName;\n  private volatile boolean running = true;\n\n  public Threads( String name) {\n    threadName = name;\n  }\n\n  public void setoff() {\n    running = false; //this.running = false;\n  }\n\n  public void seton() {\n    running = true; //this.running = true;\n  }\n\n  public void run() {\n    while(this.running) {\n      System.out.println(&quot;running&quot;);\n    }\n    if(this.running ==false) {\n      System.out.println(&quot;stopped&quot;);\n    }\n    System.out.println(&quot;Thread &quot; +  threadName + &quot; exiting.&quot;);\n  }\n}\n</code></pre>\n<p>--end class</p>\n<pre><code>public class MainFrame extends javax.swing.JFrame {  \n  Thread R1 = null;\n\n  public MainFrame() {\n    initComponents();\n  }\n\n  private void jbtnstartActionPerformed(java.awt.event.ActionEvent evt) {                                          \n    R1 = new Thread(new Threads(&quot;Thread 1&quot;));\n    R1.start();\n  }       \n}\n</code></pre>\n"},{"tags":["java","double","bigdecimal"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1347480402,"post_id":12395281,"comment_id":16655346,"body_markdown":"Note: BigDecimal will also sometimes use the scientific notation (I believe for number &lt; 10^-6)","body":"Note: BigDecimal will also sometimes use the scientific notation (I believe for number &lt; 10^-6)"}],"answers":[{"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":19,"creation_date":1347480323,"post_id":12395405,"comment_id":16655314,"body_markdown":"Using the double constructor is not recommended.","body":"Using the double constructor is not recommended."},{"owner":{"account_id":281486,"reputation":8971,"user_id":577812,"accept_rate":86,"display_name":"omnomnom"},"score":1,"creation_date":1369659245,"post_id":12395405,"comment_id":24167563,"body_markdown":"http://stackoverflow.com/questions/1056722/why-is-the-bigdecimaldouble-d-construction-still-around","body":"<a href=\"http://stackoverflow.com/questions/1056722/why-is-the-bigdecimaldouble-d-construction-still-around\" title=\"why is the bigdecimaldouble d construction still around\">stackoverflow.com/questions/1056722/&hellip;</a>"},{"owner":{"account_id":1230894,"reputation":2364,"user_id":1195507,"accept_rate":100,"display_name":"rvazquezglez"},"score":56,"creation_date":1451508923,"post_id":12395405,"comment_id":56816119,"body_markdown":"BigDecimal b = BigDecimal.valueOf(d);","body":"BigDecimal b = BigDecimal.valueOf(d);"},{"owner":{"account_id":375203,"reputation":609,"user_id":725888,"accept_rate":33,"display_name":"Kurt Shaw"},"score":1,"creation_date":1543944736,"post_id":12395405,"comment_id":94097315,"body_markdown":"@ rvazquezglez like your solution","body":"@ rvazquezglez like your solution"},{"owner":{"account_id":9346423,"reputation":1452,"user_id":6937584,"display_name":"cdalxndr"},"score":1,"creation_date":1587661099,"post_id":12395405,"comment_id":108605771,"body_markdown":"Still flawed for other values. For example `new BigDecimal( 1E-11, MathContext.DECIMAL64).toPlainString()` prints `0.000000000009999999999999999`, but `BigDecimal.valueOf` works as expected.","body":"Still flawed for other values. For example <code>new BigDecimal( 1E-11, MathContext.DECIMAL64).toPlainString()</code> prints <code>0.000000000009999999999999999</code>, but <code>BigDecimal.valueOf</code> works as expected."}],"tags":[],"owner":{"account_id":997788,"reputation":5141,"user_id":1013327,"accept_rate":89,"display_name":"Gilberto Torrezan"},"comment_count":5,"down_vote_count":6,"up_vote_count":73,"is_accepted":true,"score":67,"last_activity_date":1347480172,"creation_date":1347479872,"answer_id":12395405,"question_id":12395281,"body_markdown":"It prints 47.48000 if you use another [MathContext][1]:\r\n\r\n    BigDecimal b = new BigDecimal(d, MathContext.DECIMAL64);\r\n\r\nJust pick the context you need.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/math/MathContext.html","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>It prints 47.48000 if you use another <a href=\"http://docs.oracle.com/javase/6/docs/api/java/math/MathContext.html\">MathContext</a>:</p>\n\n<pre><code>BigDecimal b = new BigDecimal(d, MathContext.DECIMAL64);\n</code></pre>\n\n<p>Just pick the context you need.</p>\n"},{"tags":[],"owner":{"account_id":1586829,"reputation":1048,"user_id":1470963,"display_name":"Jonathan Paulson"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1347480098,"creation_date":1347480022,"answer_id":12395430,"question_id":12395281,"body_markdown":"You want to try `String.format(&quot;%f&quot;, d)`, which will print your double in decimal notation. Don&#39;t use `BigDecimal` at all.\r\n\r\nRegarding the precision issue: You are first storing `47.48` in the `double c`, then making a new `BigDecimal` from that `double`. The loss of precision is in assigning to `c`. You could do\r\n\r\n    BigDecimal b = new BigDecimal(&quot;47.48&quot;)\r\n\r\n to avoid losing any precision.","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>You want to try <code>String.format(\"%f\", d)</code>, which will print your double in decimal notation. Don't use <code>BigDecimal</code> at all.</p>\n\n<p>Regarding the precision issue: You are first storing <code>47.48</code> in the <code>double c</code>, then making a new <code>BigDecimal</code> from that <code>double</code>. The loss of precision is in assigning to <code>c</code>. You could do</p>\n\n<pre><code>BigDecimal b = new BigDecimal(\"47.48\")\n</code></pre>\n\n<p>to avoid losing any precision.</p>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1347480464,"creation_date":1347480464,"answer_id":12395505,"question_id":12395281,"body_markdown":"It&#39;s printing out the actual, exact value of the `double`.\r\n\r\n`Double.toString()`, which converts `double`s to `String`s, does _not_ print the exact decimal value of the input -- if `x` is your double value, it prints out exactly enough digits that `x` is the closest `double` to the value it printed.\r\n\r\nThe point is that there _is no such `double`_ as 47.48 exactly.  Doubles store values as _binary_ fractions, not as decimals, so it can&#39;t store exact decimal values.  (That&#39;s what `BigDecimal` is for!)","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>It's printing out the actual, exact value of the <code>double</code>.</p>\n\n<p><code>Double.toString()</code>, which converts <code>double</code>s to <code>String</code>s, does <em>not</em> print the exact decimal value of the input -- if <code>x</code> is your double value, it prints out exactly enough digits that <code>x</code> is the closest <code>double</code> to the value it printed.</p>\n\n<p>The point is that there <em>is no such <code>double</code></em> as 47.48 exactly.  Doubles store values as <em>binary</em> fractions, not as decimals, so it can't store exact decimal values.  (That's what <code>BigDecimal</code> is for!)</p>\n"},{"tags":[],"owner":{"account_id":2329713,"reputation":45,"user_id":2043433,"display_name":"kk yadav"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1388950413,"creation_date":1362642653,"answer_id":15265817,"question_id":12395281,"body_markdown":"**The String.format syntax helps us convert doubles and BigDecimals to strings of whatever precision.**\r\n\r\nThis java code:\r\n\r\n    double dennis = 0.00000008880000d;\r\n    System.out.println(dennis);\r\n    System.out.println(String.format(&quot;%.7f&quot;, dennis));\r\n    System.out.println(String.format(&quot;%.9f&quot;, new BigDecimal(dennis)));\r\n    System.out.println(String.format(&quot;%.19f&quot;, new BigDecimal(dennis)));\r\n\r\nPrints:\r\n\r\n    8.88E-8\r\n    0.0000001\r\n    0.000000089\r\n    0.0000000888000000000\r\n\r\n","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p><strong>The String.format syntax helps us convert doubles and BigDecimals to strings of whatever precision.</strong></p>\n\n<p>This java code:</p>\n\n<pre><code>double dennis = 0.00000008880000d;\nSystem.out.println(dennis);\nSystem.out.println(String.format(\"%.7f\", dennis));\nSystem.out.println(String.format(\"%.9f\", new BigDecimal(dennis)));\nSystem.out.println(String.format(\"%.19f\", new BigDecimal(dennis)));\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>8.88E-8\n0.0000001\n0.000000089\n0.0000000888000000000\n</code></pre>\n"},{"comments":[{"owner":{"account_id":393883,"reputation":1315,"user_id":755977,"accept_rate":80,"display_name":"PhilDulac"},"score":3,"creation_date":1373654635,"post_id":16774279,"comment_id":25653326,"body_markdown":"Ran into the exact same problem today and this is IMHO the most suitable answer! Thanks!","body":"Ran into the exact same problem today and this is IMHO the most suitable answer! Thanks!"},{"owner":{"account_id":401324,"reputation":1590,"user_id":767823,"accept_rate":48,"display_name":"pierrefevrier"},"score":5,"creation_date":1442238508,"post_id":16774279,"comment_id":52988007,"body_markdown":"I suggest to add `.stripTrailingZeros()` after `BigDecimal.valueOf(val)` to ommit trailling zeros. exemple: `BigDecimal.valueOf(15.0).stripTrailingZeros();` -&gt; 15 (instead of 15.0 if you don&#39;t call `.stripTrailingZeros()`","body":"I suggest to add <code>.stripTrailingZeros()</code> after <code>BigDecimal.valueOf(val)</code> to ommit trailling zeros. exemple: <code>BigDecimal.valueOf(15.0).stripTrailingZeros();</code> -&gt; 15 (instead of 15.0 if you don&#39;t call <code>.stripTrailingZeros()</code>"},{"owner":{"account_id":6388932,"reputation":391,"user_id":4955822,"display_name":"Aayush Goyal"},"score":0,"creation_date":1647453438,"post_id":16774279,"comment_id":126377617,"body_markdown":"This should be the accepted answer.","body":"This should be the accepted answer."}],"tags":[],"owner":{"account_id":281486,"reputation":8971,"user_id":577812,"accept_rate":86,"display_name":"omnomnom"},"comment_count":3,"down_vote_count":0,"up_vote_count":160,"is_accepted":false,"score":160,"last_activity_date":1369661688,"creation_date":1369661074,"answer_id":16774279,"question_id":12395281,"body_markdown":"The reason of such behaviour is that the string that is printed is the exact value - probably not what you expected, but that&#39;s the real value stored in memory - it&#39;s just a limitation of floating point representation.\r\n\r\nAccording to javadoc, BigDecimal(double val) constructor behaviour can be unexpected if you don&#39;t take into consideration this limitation:\r\n\r\n&gt; The results of this constructor can be somewhat unpredictable. One\r\n&gt; might assume that writing new BigDecimal(0.1) in Java creates a\r\n&gt; BigDecimal which is exactly equal to 0.1 (an unscaled value of 1, with\r\n&gt; a scale of 1), but it is actually equal to\r\n&gt; 0.1000000000000000055511151231257827021181583404541015625. This is because 0.1 cannot be represented exactly as a double (or, for that\r\n&gt; matter, as a binary fraction of any finite length). Thus, the value\r\n&gt; that is being passed in to the constructor is not exactly equal to\r\n&gt; 0.1, appearances notwithstanding.\r\n\r\n\r\nSo in your case, instead of using\r\n\r\n    double val = 77.48;\r\n    new BigDecimal(val);\r\n\r\nuse\r\n\r\n    BigDecimal.valueOf(val);\r\n\r\nValue that is returned by BigDecimal.valueOf is equal to that resulting from invocation of `Double.toString(double)`.","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>The reason of such behaviour is that the string that is printed is the exact value - probably not what you expected, but that's the real value stored in memory - it's just a limitation of floating point representation.</p>\n\n<p>According to javadoc, BigDecimal(double val) constructor behaviour can be unexpected if you don't take into consideration this limitation:</p>\n\n<blockquote>\n  <p>The results of this constructor can be somewhat unpredictable. One\n  might assume that writing new BigDecimal(0.1) in Java creates a\n  BigDecimal which is exactly equal to 0.1 (an unscaled value of 1, with\n  a scale of 1), but it is actually equal to\n  0.1000000000000000055511151231257827021181583404541015625. This is because 0.1 cannot be represented exactly as a double (or, for that\n  matter, as a binary fraction of any finite length). Thus, the value\n  that is being passed in to the constructor is not exactly equal to\n  0.1, appearances notwithstanding.</p>\n</blockquote>\n\n<p>So in your case, instead of using</p>\n\n<pre><code>double val = 77.48;\nnew BigDecimal(val);\n</code></pre>\n\n<p>use</p>\n\n<pre><code>BigDecimal.valueOf(val);\n</code></pre>\n\n<p>Value that is returned by BigDecimal.valueOf is equal to that resulting from invocation of <code>Double.toString(double)</code>.</p>\n"},{"comments":[{"owner":{"account_id":2340745,"reputation":7243,"user_id":2052097,"accept_rate":85,"display_name":"z atef"},"score":0,"creation_date":1506053350,"post_id":40147944,"comment_id":79673182,"body_markdown":"why not BigDecimal b = new BigDecimal(c).setScale(2,BigDecimal.ROUND_HALF_UP);","body":"why not BigDecimal b = new BigDecimal(c).setScale(2,BigDecimal.ROUND_HALF_UP);"}],"tags":[],"owner":{"account_id":5468872,"reputation":1037,"user_id":4820675,"display_name":"urOutsourced"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1516131099,"creation_date":1476948109,"answer_id":40147944,"question_id":12395281,"body_markdown":"Why not :\r\n\r\n    b = b.setScale(2, RoundingMode.HALF_UP);","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>Why not :</p>\n\n<pre><code>b = b.setScale(2, RoundingMode.HALF_UP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10367771,"reputation":21,"user_id":7646317,"display_name":"Leaxus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493952137,"creation_date":1493950715,"answer_id":43795453,"question_id":12395281,"body_markdown":"\tBigDecimal b = new BigDecimal(c).setScale(2,BigDecimal.ROUND_HALF_UP);\r\n","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<pre><code>BigDecimal b = new BigDecimal(c).setScale(2,BigDecimal.ROUND_HALF_UP);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9787696,"reputation":621,"user_id":7253471,"display_name":"jbilander"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1512136795,"creation_date":1512136795,"answer_id":47595036,"question_id":12395281,"body_markdown":"In Java 9 the following is deprecated:\r\n\r\n`BigDecimal.valueOf(d).`&lt;strike&gt;setScale&lt;/strike&gt;`(2, BigDecimal.`&lt;strike&gt;ROUND_HALF_UP&lt;/strike&gt;`);`\r\n\r\ninstead use:\r\n\r\n    BigDecimal.valueOf(d).setScale(2, RoundingMode.HALF_UP);\r\n\r\nExample:\r\n\r\n        double d = 47.48111;\r\n\r\n        System.out.println(BigDecimal.valueOf(d)); //Prints: 47.48111\r\n\r\n        BigDecimal bigDecimal = BigDecimal.valueOf(d).setScale(2, RoundingMode.HALF_UP);\r\n        System.out.println(bigDecimal); //Prints: 47.48","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>In Java 9 the following is deprecated:</p>\n\n<p><code>BigDecimal.valueOf(d).</code><strike>setScale</strike><code>(2, BigDecimal.</code><strike>ROUND_HALF_UP</strike><code>);</code></p>\n\n<p>instead use:</p>\n\n<pre><code>BigDecimal.valueOf(d).setScale(2, RoundingMode.HALF_UP);\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>    double d = 47.48111;\n\n    System.out.println(BigDecimal.valueOf(d)); //Prints: 47.48111\n\n    BigDecimal bigDecimal = BigDecimal.valueOf(d).setScale(2, RoundingMode.HALF_UP);\n    System.out.println(bigDecimal); //Prints: 47.48\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7570973,"reputation":295,"user_id":5744897,"display_name":"paritosh mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679427893,"creation_date":1677382916,"answer_id":75569881,"question_id":12395281,"body_markdown":"Wrap using ```BigDecimal.valueOf()```:\r\n```Java\r\ndouble d = 47.48111;\r\nBigDecimal.valueOf(d)\r\n```","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>Wrap using <code>BigDecimal.valueOf()</code>:</p>\n<pre><code>double d = 47.48111;\nBigDecimal.valueOf(d)\n</code></pre>\n"}],"owner":{"account_id":284018,"reputation":9607,"user_id":581866,"accept_rate":89,"display_name":"c12"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":340508,"favorite_count":0,"down_vote_count":0,"up_vote_count":103,"accepted_answer_id":12395405,"answer_count":9,"score":103,"last_activity_date":1679427893,"creation_date":1347479405,"question_id":12395281,"body_markdown":"In Java, I want to take a double value and convert it to a `BigDecimal` and print out its String value to a certain precision.  \r\n\r\n    import java.math.BigDecimal;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            double d=-.00012;\r\n            System.out.println(d+&quot;&quot;); //This prints -1.2E-4\r\n           \r\n            double c=47.48000;\r\n            BigDecimal b = new BigDecimal(c);\r\n            System.out.println(b.toString()); \r\n            //This prints 47.47999999999999687361196265555918216705322265625 \r\n        }\r\n    }\r\n\r\nIt prints this huge thing:\r\n\r\n&gt; 47.47999999999999687361196265555918216705322265625\r\n\r\nand not\r\n\r\n&gt;47.48\r\n\r\nThe reason I&#39;m doing the `BigDecimal` conversion is sometimes the double value will contain a lot of decimal places (i.e. `-.000012`) and the when converting the double to a String will produce scientific notation `-1.2E-4`.  I want to store the String value in non-scientific notation. \r\n\r\nI want to have BigDecimal always have two units of precision like this: &quot;47.48&quot;.  Can BigDecimal restrict precision on conversion to string?\r\n","title":"Convert double to BigDecimal and set BigDecimal Precision","body":"<p>In Java, I want to take a double value and convert it to a <code>BigDecimal</code> and print out its String value to a certain precision.  </p>\n\n<pre><code>import java.math.BigDecimal;\npublic class Main {\n    public static void main(String[] args) {\n        double d=-.00012;\n        System.out.println(d+\"\"); //This prints -1.2E-4\n\n        double c=47.48000;\n        BigDecimal b = new BigDecimal(c);\n        System.out.println(b.toString()); \n        //This prints 47.47999999999999687361196265555918216705322265625 \n    }\n}\n</code></pre>\n\n<p>It prints this huge thing:</p>\n\n<blockquote>\n  <p>47.47999999999999687361196265555918216705322265625</p>\n</blockquote>\n\n<p>and not</p>\n\n<blockquote>\n  <p>47.48</p>\n</blockquote>\n\n<p>The reason I'm doing the <code>BigDecimal</code> conversion is sometimes the double value will contain a lot of decimal places (i.e. <code>-.000012</code>) and the when converting the double to a String will produce scientific notation <code>-1.2E-4</code>.  I want to store the String value in non-scientific notation. </p>\n\n<p>I want to have BigDecimal always have two units of precision like this: \"47.48\".  Can BigDecimal restrict precision on conversion to string?</p>\n"},{"tags":["java","spring-boot","spring-security","integration-testing"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1679095947,"post_id":75772262,"comment_id":133665881,"body_markdown":"A 404 _usually_ means that the credentials are good. Can you add the controller code to the question so we can see the paths?","body":"A 404 <i>usually</i> means that the credentials are good. Can you add the controller code to the question so we can see the paths?"},{"owner":{"account_id":1835763,"reputation":1908,"user_id":1666206,"accept_rate":67,"display_name":"tjholmes66"},"score":0,"creation_date":1679332156,"post_id":75772262,"comment_id":133699164,"body_markdown":"I did miss that part of the controller, where there was a base-mapping.  I have added that in now as part of the controller code and updated the previous code to reflect that.   I am now getting an HTTP 403 error.  I looked up this specific error, and I think I am on the right track.","body":"I did miss that part of the controller, where there was a base-mapping.  I have added that in now as part of the controller code and updated the previous code to reflect that.   I am now getting an HTTP 403 error.  I looked up this specific error, and I think I am on the right track."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1679333493,"post_id":75772262,"comment_id":133699556,"body_markdown":"Yes, you are on the right track. You are _probably_ finding the path. However, Spring can give a 403 when a path is not found to _hide_ the fact that the path exists. More likely the ROLE needed for access the controller method is not linked to the user - that is the natural meaning of 403.","body":"Yes, you are on the right track. You are <i>probably</i> finding the path. However, Spring can give a 403 when a path is not found to <i>hide</i> the fact that the path exists. More likely the ROLE needed for access the controller method is not linked to the user - that is the natural meaning of 403."},{"owner":{"account_id":1835763,"reputation":1908,"user_id":1666206,"accept_rate":67,"display_name":"tjholmes66"},"score":0,"creation_date":1679425273,"post_id":75772262,"comment_id":133719371,"body_markdown":"@JohnWilliams are you telling me I need a real username, I didn&#39;t think we did.  I think if I could just test with the role/authority, that would be fine.   Let me add more to the Okta Security Configuration we have.","body":"@JohnWilliams are you telling me I need a real username, I didn&#39;t think we did.  I think if I could just test with the role/authority, that would be fine.   Let me add more to the Okta Security Configuration we have."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1679427003,"post_id":75772262,"comment_id":133719739,"body_markdown":"I would expect that the 403 is because the authenticated user does not have a required AUTHORITY or ROLE.","body":"I would expect that the 403 is because the authenticated user does not have a required AUTHORITY or ROLE."}],"owner":{"account_id":1835763,"reputation":1908,"user_id":1666206,"accept_rate":67,"display_name":"tjholmes66"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":363,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1679426822,"creation_date":1679087491,"question_id":75772262,"body_markdown":"I am using a Spring Boot 2.3.7 application, and the application works, and it&#39;s deployed.  But, when it was built, no developer did any Unit Tests or Integration Tests with it.  So, now I am adding unit and integration tests.   I got the repository tests working, and then I decided to tackle the API endpoints which are definitely secured.\r\n\r\nSo, let me start showing you the Integration Test code:\r\n\r\n    @WebMvcTest(value = MyCountsController.class)\r\n    @AutoConfigureMockMvc\r\n    @ContextConfiguration(classes = \r\n           {ESITRequest.class, OktaWebSecurityConfig.class})\r\n    public class MyCountControllerIT {\r\n\r\n        @Autowired\r\n\t    private MockMvc mvc;\r\n\r\n        private String baseUrl = &quot;/my-link&quot;;\r\n\r\n\t    @Test\r\n\t    @WithMockUser(&quot;spring&quot;)\r\n\t    public void testGetCounts() throws Exception {\r\n\t\tint Id = 17;\r\n\t\tint siteId = 213;\r\n\t\tmvc.perform(\r\n    get(baseUrl + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId)\r\n    .with(csrf())\t\t\t\r\n    .contentType(&quot;application/json&quot;))\r\n    .andExpect(status().isOk());\r\n\t    }\r\n    }\r\n\r\nSo, I spent most of day traversing the internet and lots of StackOverflow posts to see if I could pull together a working unit test.  This unit test does work, but I always get a 403 error.   \r\n\r\nI have another test that is very similar, and it works as expected.\r\n\r\n    @Test\r\n\t@WithMockUser(username = &quot;user&quot;, password = &quot;password&quot;, roles = { &quot;somerole&quot; })\r\n\tpublic void testGetCounts() throws Exception {\r\n\t\tint Id = 17;\r\n\t\tint siteId = 213;\r\n\t\tmvc.perform(get(baseUrl \r\n    + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId)\t\r\n       .with(csrf())\t\t\t\r\n       .contentType(&quot;application/json&quot;))\r\n       .andExpect(status()\r\n       .is4xxClientError());\r\n\t}\r\n\r\nAs expected, yes, I want a 4xx error here so that works fine.\r\n\r\nThis test does NOT work, and I was hoping it would:\r\n\r\n    @Test\r\n\t@WithMockUser(roles = { &quot;admin&quot; })\r\n\tpublic void testGetCounts() throws Exception {\r\n\t\tint Id = 17;\r\n\t\tint siteId = 213;\r\n\t\tmvc.perform(get(baseUrl \r\n        + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId)\t\r\n        .with(csrf())\t\t\t \r\n        .contentType(&quot;application/json&quot;))\r\n        .andExpect(status().isOk());\r\n    }\r\n\r\nNow, this should work, but I am unsure, does the username and password have to be correct?  Because the role is a correct role, so I want this test to work.  Right now, I get an HTTP 403 Error.\r\n\r\nHere is the console output:\r\n\r\n    MockHttpServletRequest:\r\n      HTTP Method = GET\r\n      Request URI = /my-link/17/sites/213/my-counts\r\n       Parameters = {_csrf=[5f7524e3-ea9f-4a2a-8de0-e4d914d78b2f]}\r\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;]\r\n             Body = null\r\n    Session Attrs ={SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@766e80d2: \r\n    Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@766e80d2: \r\n    Principal: org.springframework.security.core.userdetails.User@36ebcb: \r\n    Username: user; \r\n    Password: [PROTECTED]; \r\n    Enabled: true; \r\n    AccountNonExpired: true; credentialsNonExpired: true; \r\n    AccountNonLocked: true; \r\n    Granted Authorities: ROLE_admin; \r\n    Credentials: [PROTECTED]; \r\n    Authenticated: true; \r\n    Details: null; \r\n    Granted Authorities: ROLE_admin}\r\n\r\n    Handler:\r\n             Type = null\r\n    \r\n    Async:\r\n        Async started = false\r\n        Async result = null\r\n    \r\n    Resolved Exception:\r\n             Type = null\r\n    \r\n    ModelAndView:\r\n        View name = null\r\n             View = null\r\n            Model = null\r\n    \r\n    FlashMap:\r\n       Attributes = null\r\n\r\n    MockHttpServletResponse:\r\n           Status = 403\r\n    Error message = null\r\n          Headers = [Vary:&quot;Origin&quot;, \r\n    &quot;Access-Control-Request-Method&quot;, \r\n    &quot;Access-Control-Request-Headers&quot;, \r\n    WWW-Authenticate:&quot;Bearer&quot;, \r\n    X-Content-Type-Options:&quot;nosniff&quot;, \r\n    X-XSS-Protection:&quot;1; mode=block&quot;, \r\n    Cache-Control:&quot;no-cache, no-store, \r\n    max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, \r\n    Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\r\n     Content type = null\r\n             Body = \r\n    Forwarded URL = null\r\n    Redirected URL = null\r\n          Cookies = []\r\n\r\nWithin my application, we do have a class:\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n    public class OktaWebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\nwith two methods:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n    http.authorizeRequests()\r\n        .antMatchers(\r\n            &quot;/my-link/{id}&quot;,\r\n            &quot;/my-link/**&quot;,\r\n            &quot;/my-link/{id}/**&quot;)\r\n        .access(&quot;hasAuthority(&#39;admin&#39;)&quot;)\r\n        .anyRequest()\r\n        .authenticated()\r\n        .and()\r\n        .oauth2ResourceServer()\r\n        .jwt();\r\n      http.cors();\r\n    }\r\n\r\nand:\r\n\r\n    @Override\r\n    // APIs to not secure\r\n    public void configure(WebSecurity web) {\r\n      web.ignoring()\r\n        .antMatchers(...\r\n\r\nI don&#39;t want to disable security altogether, I really do like the idea of testing out API&#39;s with different users and different roles.  If anyone can help me out, that would be great! \r\n\r\nUPDATE 1:\r\n\r\nAs requested, I am adding the part of the controller.  This made me fix the following tests and I have updated those above.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/my-link&quot;)\r\n    @Slf4j\r\n    public class MyCountsController {\r\n\r\n    @GetMapping(&quot;/{id}/sites/{siteId}/my-counts&quot;)\r\n    public ResponseEntity&lt;List&lt;MyCountData&gt;&gt; getMyCounts(\r\n\r\nUPDATE 2:\r\n\r\nAs you can see I added some more code to the &quot;antMatchers&quot; in the Security Configuration.\r\n\r\nMy question is how much do we have to match what is in the OktaConfig.  If we have a link we want to test as we saw:\r\n\r\n    /my-link/17/sites/213/my-counts\r\n\r\nDoesn&#39;t the &#39;antmatcher&#39; cover this with what we have like:\r\n\r\n    /my-link/** or\r\n    /my-link/{id}/**\r\n   \r\nI&#39;ve tried many more tests with this one link as follows:\r\n\r\n    @WithMockUser(roles = {&quot;admin&quot;})       // 403\r\n    @WithMockUser(roles = {&quot;ADMIN&quot;})       // 403, does case matter?\r\n    @WithMockUser(roles = {&quot;ROLE_admin&quot;})  // this is an error\r\n    @WithMockUser(roles = {&quot;ROLE_ADMIN&quot;})  // this is an error\r\n    @WithMockUser(authorities = {&quot;admin&quot;})       // 404 &lt;- odd\r\n    @WithMockUser(authorities = {&quot;ADMIN&quot;})       // 403\r\n    @WithMockUser(authorities = {&quot;ROLE_admin&quot;})  // 403\r\n    @WithMockUser(authorities = {&quot;ROLE_ADMIN&quot;})  // 403\r\n\r\nAnd this is just to test ONE api, and I have many more to test, so if I can get the first one working, then I have a template for the rest.\r\n","title":"Spring Boot Integration Test with Secured APIs","body":"<p>I am using a Spring Boot 2.3.7 application, and the application works, and it's deployed.  But, when it was built, no developer did any Unit Tests or Integration Tests with it.  So, now I am adding unit and integration tests.   I got the repository tests working, and then I decided to tackle the API endpoints which are definitely secured.</p>\n<p>So, let me start showing you the Integration Test code:</p>\n<pre><code>@WebMvcTest(value = MyCountsController.class)\n@AutoConfigureMockMvc\n@ContextConfiguration(classes = \n       {ESITRequest.class, OktaWebSecurityConfig.class})\npublic class MyCountControllerIT {\n\n    @Autowired\n    private MockMvc mvc;\n\n    private String baseUrl = &quot;/my-link&quot;;\n\n    @Test\n    @WithMockUser(&quot;spring&quot;)\n    public void testGetCounts() throws Exception {\n    int Id = 17;\n    int siteId = 213;\n    mvc.perform(\nget(baseUrl + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId)\n.with(csrf())           \n.contentType(&quot;application/json&quot;))\n.andExpect(status().isOk());\n    }\n}\n</code></pre>\n<p>So, I spent most of day traversing the internet and lots of StackOverflow posts to see if I could pull together a working unit test.  This unit test does work, but I always get a 403 error.</p>\n<p>I have another test that is very similar, and it works as expected.</p>\n<pre><code>@Test\n@WithMockUser(username = &quot;user&quot;, password = &quot;password&quot;, roles = { &quot;somerole&quot; })\npublic void testGetCounts() throws Exception {\n    int Id = 17;\n    int siteId = 213;\n    mvc.perform(get(baseUrl \n+ &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId) \n   .with(csrf())            \n   .contentType(&quot;application/json&quot;))\n   .andExpect(status()\n   .is4xxClientError());\n}\n</code></pre>\n<p>As expected, yes, I want a 4xx error here so that works fine.</p>\n<p>This test does NOT work, and I was hoping it would:</p>\n<pre><code>@Test\n@WithMockUser(roles = { &quot;admin&quot; })\npublic void testGetCounts() throws Exception {\n    int Id = 17;\n    int siteId = 213;\n    mvc.perform(get(baseUrl \n    + &quot;/{id}/sites/{siteId}/my-counts&quot;, id, siteId) \n    .with(csrf())            \n    .contentType(&quot;application/json&quot;))\n    .andExpect(status().isOk());\n}\n</code></pre>\n<p>Now, this should work, but I am unsure, does the username and password have to be correct?  Because the role is a correct role, so I want this test to work.  Right now, I get an HTTP 403 Error.</p>\n<p>Here is the console output:</p>\n<pre><code>MockHttpServletRequest:\n  HTTP Method = GET\n  Request URI = /my-link/17/sites/213/my-counts\n   Parameters = {_csrf=[5f7524e3-ea9f-4a2a-8de0-e4d914d78b2f]}\n      Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;]\n         Body = null\nSession Attrs ={SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@766e80d2: \nAuthentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@766e80d2: \nPrincipal: org.springframework.security.core.userdetails.User@36ebcb: \nUsername: user; \nPassword: [PROTECTED]; \nEnabled: true; \nAccountNonExpired: true; credentialsNonExpired: true; \nAccountNonLocked: true; \nGranted Authorities: ROLE_admin; \nCredentials: [PROTECTED]; \nAuthenticated: true; \nDetails: null; \nGranted Authorities: ROLE_admin}\n\nHandler:\n         Type = null\n\nAsync:\n    Async started = false\n    Async result = null\n\nResolved Exception:\n         Type = null\n\nModelAndView:\n    View name = null\n         View = null\n        Model = null\n\nFlashMap:\n   Attributes = null\n\nMockHttpServletResponse:\n       Status = 403\nError message = null\n      Headers = [Vary:&quot;Origin&quot;, \n&quot;Access-Control-Request-Method&quot;, \n&quot;Access-Control-Request-Headers&quot;, \nWWW-Authenticate:&quot;Bearer&quot;, \nX-Content-Type-Options:&quot;nosniff&quot;, \nX-XSS-Protection:&quot;1; mode=block&quot;, \nCache-Control:&quot;no-cache, no-store, \nmax-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, \nExpires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\n Content type = null\n         Body = \nForwarded URL = null\nRedirected URL = null\n      Cookies = []\n</code></pre>\n<p>Within my application, we do have a class:</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class OktaWebSecurityConfig extends WebSecurityConfigurerAdapter {\n</code></pre>\n<p>with two methods:</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\nhttp.authorizeRequests()\n    .antMatchers(\n        &quot;/my-link/{id}&quot;,\n        &quot;/my-link/**&quot;,\n        &quot;/my-link/{id}/**&quot;)\n    .access(&quot;hasAuthority('admin')&quot;)\n    .anyRequest()\n    .authenticated()\n    .and()\n    .oauth2ResourceServer()\n    .jwt();\n  http.cors();\n}\n</code></pre>\n<p>and:</p>\n<pre><code>@Override\n// APIs to not secure\npublic void configure(WebSecurity web) {\n  web.ignoring()\n    .antMatchers(...\n</code></pre>\n<p>I don't want to disable security altogether, I really do like the idea of testing out API's with different users and different roles.  If anyone can help me out, that would be great!</p>\n<p>UPDATE 1:</p>\n<p>As requested, I am adding the part of the controller.  This made me fix the following tests and I have updated those above.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/my-link&quot;)\n@Slf4j\npublic class MyCountsController {\n\n@GetMapping(&quot;/{id}/sites/{siteId}/my-counts&quot;)\npublic ResponseEntity&lt;List&lt;MyCountData&gt;&gt; getMyCounts(\n</code></pre>\n<p>UPDATE 2:</p>\n<p>As you can see I added some more code to the &quot;antMatchers&quot; in the Security Configuration.</p>\n<p>My question is how much do we have to match what is in the OktaConfig.  If we have a link we want to test as we saw:</p>\n<pre><code>/my-link/17/sites/213/my-counts\n</code></pre>\n<p>Doesn't the 'antmatcher' cover this with what we have like:</p>\n<pre><code>/my-link/** or\n/my-link/{id}/**\n</code></pre>\n<p>I've tried many more tests with this one link as follows:</p>\n<pre><code>@WithMockUser(roles = {&quot;admin&quot;})       // 403\n@WithMockUser(roles = {&quot;ADMIN&quot;})       // 403, does case matter?\n@WithMockUser(roles = {&quot;ROLE_admin&quot;})  // this is an error\n@WithMockUser(roles = {&quot;ROLE_ADMIN&quot;})  // this is an error\n@WithMockUser(authorities = {&quot;admin&quot;})       // 404 &lt;- odd\n@WithMockUser(authorities = {&quot;ADMIN&quot;})       // 403\n@WithMockUser(authorities = {&quot;ROLE_admin&quot;})  // 403\n@WithMockUser(authorities = {&quot;ROLE_ADMIN&quot;})  // 403\n</code></pre>\n<p>And this is just to test ONE api, and I have many more to test, so if I can get the first one working, then I have a template for the rest.</p>\n"},{"tags":["java","azure","junit","mockito"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661200925,"post_id":73448694,"comment_id":129711344,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":481006,"reputation":31216,"user_id":894565,"accept_rate":76,"display_name":"Jatin"},"score":0,"creation_date":1661430715,"post_id":73448694,"comment_id":129774055,"body_markdown":"Can you please share the code that you are using? Looks like the problem with `DefaultAzureCredentialBuilder`","body":"Can you please share the code that you are using? Looks like the problem with <code>DefaultAzureCredentialBuilder</code>"}],"answers":[{"tags":[],"owner":{"account_id":1096566,"reputation":152,"user_id":1090040,"display_name":"jptrue"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679426800,"creation_date":1679426800,"answer_id":75805605,"question_id":73448694,"body_markdown":"My guess would be that you are passing in the string &#39;tenant.id&#39; and not the actual Tenant ID, which is typically a GUID.","title":"How do I resolve this exception: com.microsoft.aad.msal4j.MsalServiceException: AADSTS90002: Tenant &#39;tenant.id&#39; not found?","body":"<p>My guess would be that you are passing in the string 'tenant.id' and not the actual Tenant ID, which is typically a GUID.</p>\n"}],"owner":{"account_id":16330942,"reputation":3,"user_id":11794298,"display_name":"Jermaine Tucker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":565,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679426800,"creation_date":1661187977,"question_id":73448694,"body_markdown":" - programming language:Java\r\n - Context: I writing a junit test for a method that uses BlobClient uploadWithResponse method, but the method keeps throwing this exception. And I don&#39;t know how to resolve it.\r\n - if anyone has resolved this problem, please help.\r\n\r\n**com.microsoft.aad.msal4j.MsalServiceException:** \r\nAADSTS90002: Tenant &#39;tenant.id&#39; not found. Check to make sure you have the correct tenant ID and are signing into the correct cloud. Check with your subscription administrator, this may happen if there are no active subscriptions for the tenant.","title":"How do I resolve this exception: com.microsoft.aad.msal4j.MsalServiceException: AADSTS90002: Tenant &#39;tenant.id&#39; not found?","body":"<ul>\n<li>programming language:Java</li>\n<li>Context: I writing a junit test for a method that uses BlobClient uploadWithResponse method, but the method keeps throwing this exception. And I don't know how to resolve it.</li>\n<li>if anyone has resolved this problem, please help.</li>\n</ul>\n<p><strong>com.microsoft.aad.msal4j.MsalServiceException:</strong>\nAADSTS90002: Tenant 'tenant.id' not found. Check to make sure you have the correct tenant ID and are signing into the correct cloud. Check with your subscription administrator, this may happen if there are no active subscriptions for the tenant.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":3537420,"reputation":400,"user_id":2955337,"display_name":"sleepyhead"},"score":0,"creation_date":1679430075,"post_id":75805589,"comment_id":133720424,"body_markdown":"In your IF statement you first have a check if it is a user. Assuming your admin has also the user role hat is the first match and you&#39;ll be always redirected to /user","body":"In your IF statement you first have a check if it is a user. Assuming your admin has also the user role hat is the first match and you&#39;ll be always redirected to /user"},{"owner":{"account_id":28079277,"reputation":1,"user_id":21450631,"display_name":"Sonya"},"score":0,"creation_date":1679430984,"post_id":75805589,"comment_id":133720613,"body_markdown":"didn&#39;t thought about this moment, thanks a lot!!","body":"didn&#39;t thought about this moment, thanks a lot!!"}],"owner":{"account_id":28079277,"reputation":1,"user_id":21450631,"display_name":"Sonya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679426666,"creation_date":1679426666,"question_id":75805589,"body_markdown":"I added two roles(ROLE_ADMIN, ROLE_USER) for one user and after succesful login I need it to redirect to /admin form, but keep getting /user form. \r\n\r\n\r\nI tried adding RoleHierarchy, but result stays the same.\r\n```\r\n@Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                .expressionHandler(expressionHandler())\r\n                .antMatchers(&quot;/&quot;).permitAll()\r\n                .antMatchers(&quot;/admin/**&quot;)\r\n                .hasRole(&quot;ADMIN&quot;)\r\n                .antMatchers(&quot;/user&quot;)\r\n                .hasAnyRole(&quot;ADMIN&quot;, &quot;USER&quot;)\r\n                .and()\r\n                .formLogin()\r\n                .successHandler(successUserHandler)\r\n                .permitAll()\r\n                .and()\r\n                .logout()\r\n                .logoutSuccessUrl(&quot;/&quot;);\r\n    }\r\n@Component\r\npublic class SuccessUserHandler implements AuthenticationSuccessHandler {\r\n    @Override\r\n    public void onAuthenticationSuccess(HttpServletRequest httpServletRequest,\r\n                                        HttpServletResponse httpServletResponse,\r\n                                        Authentication authentication) throws IOException {\r\n        Set&lt;String&gt; roles = AuthorityUtils\r\n                .authorityListToSet(authentication.getAuthorities());\r\n        if (roles.contains(&quot;ROLE_USER&quot;)) {\r\n            httpServletResponse.sendRedirect(&quot;/user&quot;);\r\n        } else if(roles.contains(&quot;ROLE_ADMIN&quot;)){\r\n            httpServletResponse.sendRedirect(&quot;/admin&quot;);\r\n        } else {\r\n            httpServletResponse.sendRedirect(&quot;/&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"one user has two roles, need to redirect to /admin, but redirects to /user","body":"<p>I added two roles(ROLE_ADMIN, ROLE_USER) for one user and after succesful login I need it to redirect to /admin form, but keep getting /user form.</p>\n<p>I tried adding RoleHierarchy, but result stays the same.</p>\n<pre><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                .expressionHandler(expressionHandler())\n                .antMatchers(&quot;/&quot;).permitAll()\n                .antMatchers(&quot;/admin/**&quot;)\n                .hasRole(&quot;ADMIN&quot;)\n                .antMatchers(&quot;/user&quot;)\n                .hasAnyRole(&quot;ADMIN&quot;, &quot;USER&quot;)\n                .and()\n                .formLogin()\n                .successHandler(successUserHandler)\n                .permitAll()\n                .and()\n                .logout()\n                .logoutSuccessUrl(&quot;/&quot;);\n    }\n@Component\npublic class SuccessUserHandler implements AuthenticationSuccessHandler {\n    @Override\n    public void onAuthenticationSuccess(HttpServletRequest httpServletRequest,\n                                        HttpServletResponse httpServletResponse,\n                                        Authentication authentication) throws IOException {\n        Set&lt;String&gt; roles = AuthorityUtils\n                .authorityListToSet(authentication.getAuthorities());\n        if (roles.contains(&quot;ROLE_USER&quot;)) {\n            httpServletResponse.sendRedirect(&quot;/user&quot;);\n        } else if(roles.contains(&quot;ROLE_ADMIN&quot;)){\n            httpServletResponse.sendRedirect(&quot;/admin&quot;);\n        } else {\n            httpServletResponse.sendRedirect(&quot;/&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"comments":[{"owner":{"account_id":15577223,"reputation":491,"user_id":11238034,"display_name":"Lucas"},"score":0,"creation_date":1680198552,"post_id":75805499,"comment_id":133861733,"body_markdown":"Does that mean that, if I need to add 100 endpoints to that, I&#39;ll need to repeat that 100 times? Isn&#39;t there a cleaner way of doing this?","body":"Does that mean that, if I need to add 100 endpoints to that, I&#39;ll need to repeat that 100 times? Isn&#39;t there a cleaner way of doing this?"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1680199089,"post_id":75805499,"comment_id":133861846,"body_markdown":"You can still use wildcards on the path variable. Very wild cards if you like.","body":"You can still use wildcards on the path variable. Very wild cards if you like."}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679426625,"creation_date":1679426106,"answer_id":75805499,"question_id":75805137,"body_markdown":"There is an overload of antMatcher that [takes the http method as first param][1], try:\r\n\r\n    antMatcher(HttpMethod.GET, &quot;/users&quot;).permitAll()\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/util/matcher/AntPathRequestMatcher.html#antMatcher(org.springframework.http.HttpMethod,java.lang.String)","title":"Allow unauthenticated access to a single endpoint without .antMatchers","body":"<p>There is an overload of antMatcher that <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/util/matcher/AntPathRequestMatcher.html#antMatcher(org.springframework.http.HttpMethod,java.lang.String)\" rel=\"nofollow noreferrer\">takes the http method as first param</a>, try:</p>\n<pre><code>antMatcher(HttpMethod.GET, &quot;/users&quot;).permitAll()\n</code></pre>\n"}],"owner":{"account_id":15577223,"reputation":491,"user_id":11238034,"display_name":"Lucas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75805499,"answer_count":1,"score":-1,"last_activity_date":1679426625,"creation_date":1679423539,"question_id":75805137,"body_markdown":"So, is there a way of allowing unauthenticated access to a single endpoint?\r\nI have a Spring Security Configuration class like this:\r\n```Java\r\npublic class WebSecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .httpBasic(withDefaults());\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nAnd a controller that looks like this:\r\n\r\n```Java\r\n@RestController\r\n@RequestMapping(path = &quot;/users&quot;)\r\npublic class ExampleController {\r\n\r\n    @GetMapping\r\n    public List&lt;Users&gt; getUserList(@PathVariable String userId) {\r\n        return this.userService.getUserList(userId);\r\n    }\r\n\r\n    @PostMapping\r\n    public void createUser(@RequestBody User user) {\r\n        this.userService.createUser(user);\r\n    }\r\n\r\n}\r\n```\r\n\r\nTherefore, using `antMatchers` inside my config probably won&#39;t do the job, as both my `GET` and `POST` have the same path... Is there a way I can disable security on a single endpoint, like a decorator on something like that?\r\n\r\nBtw, I&#39;m working with Java 19 and Spring&#39;s latest stable version as of March/2023","title":"Allow unauthenticated access to a single endpoint without .antMatchers","body":"<p>So, is there a way of allowing unauthenticated access to a single endpoint?\nI have a Spring Security Configuration class like this:</p>\n<pre><code>public class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                        .anyRequest().authenticated()\n                )\n                .httpBasic(withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p>And a controller that looks like this:</p>\n<pre><code>@RestController\n@RequestMapping(path = &quot;/users&quot;)\npublic class ExampleController {\n\n    @GetMapping\n    public List&lt;Users&gt; getUserList(@PathVariable String userId) {\n        return this.userService.getUserList(userId);\n    }\n\n    @PostMapping\n    public void createUser(@RequestBody User user) {\n        this.userService.createUser(user);\n    }\n\n}\n</code></pre>\n<p>Therefore, using <code>antMatchers</code> inside my config probably won't do the job, as both my <code>GET</code> and <code>POST</code> have the same path... Is there a way I can disable security on a single endpoint, like a decorator on something like that?</p>\n<p>Btw, I'm working with Java 19 and Spring's latest stable version as of March/2023</p>\n"},{"tags":["java","connection-pooling"],"answers":[{"tags":[],"owner":{"account_id":34011,"reputation":5855,"user_id":95674,"display_name":"Barett"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679426363,"creation_date":1679426363,"answer_id":75805540,"question_id":68835163,"body_markdown":"Try updating to the 19c drivers of ojdbc8. (19.18.0.0 or above)\r\n\r\nThere are many releases of ojdbc8 and many of the older ones will not support server v19c.\r\n\r\nLink (unfold section for 19c): https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html\r\n","title":"getting error when trying to use OracleDataSource to get connection in 19c DB","body":"<p>Try updating to the 19c drivers of ojdbc8. (19.18.0.0 or above)</p>\n<p>There are many releases of ojdbc8 and many of the older ones will not support server v19c.</p>\n<p>Link (unfold section for 19c): <a href=\"https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html</a></p>\n"}],"owner":{"account_id":5686216,"reputation":21,"user_id":4495705,"display_name":"Prakash Panchadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":581,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679426363,"creation_date":1629300165,"question_id":68835163,"body_markdown":"Can someone help me with the below code. It is working fine when i am connecting to Oracle 11g DB but it is failing with the error **Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException** when i switch to Oracle 19c DB. I am using ojdbc8.jar and  Java 8 for running the below code. In 19c database we are using the Technical account to connect to database instead of normal user account, i am not sure if that has something to do with the error as well.\r\n\r\n```\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.Statement;\r\n    import java.util.Properties;\r\n    \r\n    \r\n    import oracle.jdbc.pool.OracleDataSource;\r\n    \r\n    public class OracleDataSourceTest {\r\n    \r\n    \tfinal static String DB_URL = &quot;jdbc:oracle:thin:xxxxxxx&quot;;\r\n    \tfinal static String DB_USER = &quot;XXX&quot;;\r\n    \tfinal static String DB_PASSWORD = &quot;XXX&quot;;\r\n    \t\r\n    \r\n    \t/**\r\n    \t * @param args\r\n    \t * @throws Exception \r\n    \t */\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tOracleDataSource dataSource = new OracleDataSource();\r\n            dataSource.setConnectionCachingEnabled(true);\r\n    \r\n            dataSource.setUser(DB_USER);\r\n            dataSource.setPassword(DB_PASSWORD);\r\n            dataSource.setURL(DB_URL);\r\n            Properties jdbcProperties = new Properties();\r\n            jdbcProperties.setProperty(&quot;oracle.jdbc.thinLogonCapability&quot;, &quot;o3&quot;);\r\n            dataSource.setConnectionProperties(jdbcProperties);\r\n            Properties connectionProperties = new Properties();\r\n            connectionProperties.setProperty(&quot;MinLimit&quot;, &quot;1&quot;);\r\n            connectionProperties.setProperty(&quot;MaxLimit&quot;, &quot;50&quot;);\r\n            connectionProperties.setProperty(&quot;ConnectionWaitTimeout&quot;, &quot;0&quot;);\r\n            connectionProperties.setProperty(&quot;ValidateConnection&quot;, &quot;true&quot;);\r\n            dataSource.setConnectionCacheProperties(connectionProperties);\r\n    \r\n    \t\tConnection conn = dataSource.getConnection();\r\n            \r\n            System.out.println(&quot;Connection obtained&quot;);\r\n                    \r\n            //do some work with the connection.\r\n            Statement stmt = conn.createStatement();\r\n            System.out.println(&quot;Executed Stmt &quot; + stmt.execute(&quot;select * from dual&quot;));\r\n            \r\n            //Close the Connection.\r\n            \r\n            conn.close();\r\n    \t}\r\n    }\r\n\r\n```\r\n\r\nThe following is the full stacktrace of the error \r\n&lt;pre&gt;\r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException\r\n    \tat oracle.security.o3logon.a.a(Unknown Source)\r\n    \tat oracle.security.o3logon.b.g(Unknown Source)\r\n    \tat oracle.security.o3logon.O3LoginClientHelper.getEPasswd(Unknown Source)\r\n    \tat oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:1238)\r\n    \tat oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:1025)\r\n    \tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:743)\r\n    \tat oracle.jdbc.driver.PhysicalConnection.connect(PhysicalConnection.java:793)\r\n    \tat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:57)\r\n    \tat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:747)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getPhysicalConnection(OracleDataSource.java:406)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:291)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:206)\r\n    \tat oracle.jdbc.pool.OracleConnectionPoolDataSource.getPhysicalConnection(OracleConnectionPoolDataSource.java:148)\r\n    \tat oracle.jdbc.pool.OracleConnectionPoolDataSource.getPooledConnection(OracleConnectionPoolDataSource.java:91)\r\n    \tat oracle.jdbc.pool.OracleImplicitConnectionCache.makeCacheConnection(OracleImplicitConnectionCache.java:1610)\r\n    \tat oracle.jdbc.pool.OracleImplicitConnectionCache.makeOneConnection(OracleImplicitConnectionCache.java:517)\r\n    \tat oracle.jdbc.pool.OracleImplicitConnectionCache.getCacheConnection(OracleImplicitConnectionCache.java:477)\r\n    \tat oracle.jdbc.pool.OracleImplicitConnectionCache.getConnection(OracleImplicitConnectionCache.java:363)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:513)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:202)\r\n    \tat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:184)\r\n    \tat com.ubs.jdbc.connectionpool.test.OracleDataSourceTest.main(OracleDataSourceTest.java:37)\r\n    Caused by: java.lang.ArrayIndexOutOfBoundsException\r\n    \tat java.lang.System.arraycopy(Native Method)\r\n    \t... 22 more\r\n\r\n&lt;/pre&gt;","title":"getting error when trying to use OracleDataSource to get connection in 19c DB","body":"<p>Can someone help me with the below code. It is working fine when i am connecting to Oracle 11g DB but it is failing with the error <strong>Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException</strong> when i switch to Oracle 19c DB. I am using ojdbc8.jar and  Java 8 for running the below code. In 19c database we are using the Technical account to connect to database instead of normal user account, i am not sure if that has something to do with the error as well.</p>\n<pre><code>\n    import java.sql.Connection;\n    import java.sql.Statement;\n    import java.util.Properties;\n    \n    \n    import oracle.jdbc.pool.OracleDataSource;\n    \n    public class OracleDataSourceTest {\n    \n        final static String DB_URL = &quot;jdbc:oracle:thin:xxxxxxx&quot;;\n        final static String DB_USER = &quot;XXX&quot;;\n        final static String DB_PASSWORD = &quot;XXX&quot;;\n        \n    \n        /**\n         * @param args\n         * @throws Exception \n         */\n        public static void main(String[] args) throws Exception {\n            OracleDataSource dataSource = new OracleDataSource();\n            dataSource.setConnectionCachingEnabled(true);\n    \n            dataSource.setUser(DB_USER);\n            dataSource.setPassword(DB_PASSWORD);\n            dataSource.setURL(DB_URL);\n            Properties jdbcProperties = new Properties();\n            jdbcProperties.setProperty(&quot;oracle.jdbc.thinLogonCapability&quot;, &quot;o3&quot;);\n            dataSource.setConnectionProperties(jdbcProperties);\n            Properties connectionProperties = new Properties();\n            connectionProperties.setProperty(&quot;MinLimit&quot;, &quot;1&quot;);\n            connectionProperties.setProperty(&quot;MaxLimit&quot;, &quot;50&quot;);\n            connectionProperties.setProperty(&quot;ConnectionWaitTimeout&quot;, &quot;0&quot;);\n            connectionProperties.setProperty(&quot;ValidateConnection&quot;, &quot;true&quot;);\n            dataSource.setConnectionCacheProperties(connectionProperties);\n    \n            Connection conn = dataSource.getConnection();\n            \n            System.out.println(&quot;Connection obtained&quot;);\n                    \n            //do some work with the connection.\n            Statement stmt = conn.createStatement();\n            System.out.println(&quot;Executed Stmt &quot; + stmt.execute(&quot;select * from dual&quot;));\n            \n            //Close the Connection.\n            \n            conn.close();\n        }\n    }\n\n</code></pre>\n<p>The following is the full stacktrace of the error</p>\n<pre>\n\n    Exception in thread \"main\" java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException\n        at oracle.security.o3logon.a.a(Unknown Source)\n        at oracle.security.o3logon.b.g(Unknown Source)\n        at oracle.security.o3logon.O3LoginClientHelper.getEPasswd(Unknown Source)\n        at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:1238)\n        at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:1025)\n        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:743)\n        at oracle.jdbc.driver.PhysicalConnection.connect(PhysicalConnection.java:793)\n        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:57)\n        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:747)\n        at oracle.jdbc.pool.OracleDataSource.getPhysicalConnection(OracleDataSource.java:406)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:291)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:206)\n        at oracle.jdbc.pool.OracleConnectionPoolDataSource.getPhysicalConnection(OracleConnectionPoolDataSource.java:148)\n        at oracle.jdbc.pool.OracleConnectionPoolDataSource.getPooledConnection(OracleConnectionPoolDataSource.java:91)\n        at oracle.jdbc.pool.OracleImplicitConnectionCache.makeCacheConnection(OracleImplicitConnectionCache.java:1610)\n        at oracle.jdbc.pool.OracleImplicitConnectionCache.makeOneConnection(OracleImplicitConnectionCache.java:517)\n        at oracle.jdbc.pool.OracleImplicitConnectionCache.getCacheConnection(OracleImplicitConnectionCache.java:477)\n        at oracle.jdbc.pool.OracleImplicitConnectionCache.getConnection(OracleImplicitConnectionCache.java:363)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:513)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:202)\n        at oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:184)\n        at com.ubs.jdbc.connectionpool.test.OracleDataSourceTest.main(OracleDataSourceTest.java:37)\n    Caused by: java.lang.ArrayIndexOutOfBoundsException\n        at java.lang.System.arraycopy(Native Method)\n        ... 22 more\n\n</pre>\n"},{"tags":["java","c","kerberos"],"owner":{"account_id":7572082,"reputation":31,"user_id":5745618,"display_name":"Roxana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679425628,"creation_date":1679339738,"question_id":75794413,"body_markdown":"could you please help to figure out what is wrong in my code:\r\n\r\nSo I need to get the list of principals in KDC and I want to use [krb5](https://github.com/krb5/krb5) library. And in the beginning I need to initialize context and session with keytab and I use `kadm5_init_krb5_context` and `kadm5_init_with_skey` functions for this ([here](https://github.com/krb5/krb5/blob/849b7056e703bd3724d909263769ce190db59acc/src/lib/kadm5/srv/server_init.c)) And I&#39;m using jdk17 and jdk.incubator.foreign.\r\n\r\nMy code:\r\n\r\n```\r\nprivate static void kadminInitWithKeytab(MemorySegment segmentForkadm5ServerHandle) throws Throwable {\r\n    var linker = CLinker.getInstance();\r\n    System.load(&quot;/usr/local/opt/krb5/bin/kadmin&quot;);\r\n    var loaderLookup = SymbolLookup.loaderLookup();\r\n\r\n    ResourceScope scope = ResourceScope.newImplicitScope()\r\n    MemorySegment segmentForContext = MemorySegment.allocateNative(10000,\r\n      ResourceScope.newImplicitScope()); // segment for context\r\n    MemoryAddress addressSegmentForContext = segmentForContext.address();\r\n\r\n    initContext(addressSegmentForContext); // Initialize context\r\n\r\n    MemorySegment segmentForConfigParams = MemorySegment.allocateNative(10000,\r\n      ResourceScope.newImplicitScope());\r\n\r\n    MemorySegment segmentForDbArgs = MemorySegment.allocateNative(10000,\r\n      ResourceScope.newImplicitScope());\r\n\r\n    int kadmStructVersion1 = 0x01;\r\n    int apiVersion = 0x04;\r\n\r\n    String clientName = &quot;client/admin@SOME_REALM&quot;;\r\n    MemorySegment cClientName = CLinker.toCString(clientName, scope);\r\n\r\n    String keytabName = &quot;/some_path_to_keytab.keytab&quot;;\r\n    MemorySegment ckeytabName = CLinker.toCString(keytabName, scope);\r\n\r\n    String serviceName = &quot;some_service_name&quot;;\r\n    MemorySegment cServiceName = CLinker.toCString(serviceName, scope);\r\n\r\n    MemoryAddress kadminInitWithKeytabFunction = loaderLookup.lookup(&quot;kadm5_init_with_skey&quot;).get();\r\n    MethodHandle kadminInitWithKeytabHandle = linker.downcallHandle(kadminInitWithKeytabFunction,\r\n      MethodType.methodType(\r\n        long.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class,\r\n        int.class,\r\n        int.class,\r\n        MemoryAddress.class,\r\n        MemoryAddress.class),\r\n      FunctionDescriptor.of(\r\n        CLinker.C_LONG,          // return type\r\n        CLinker.C_POINTER,       // context\r\n        CLinker.C_POINTER,       // client_name argument\r\n        CLinker.C_POINTER,       // keytab argument\r\n        CLinker.C_POINTER,       // service_name argument\r\n        CLinker.C_POINTER,       // params argument\r\n        CLinker.C_INT,           // struct_version argument\r\n        CLinker.C_INT,           // api_version argument\r\n        CLinker.C_POINTER,      // db_args argument\r\n        CLinker.C_POINTER        // server_handle_out argument\r\n      ));\r\n\r\n      var result = kadminInitWithKeytabHandle.invoke( // this result is 43787552 instead of 0\r\n        addressSegmentForContext.address(),\r\n        cClientName.address(),\r\n        ckeytabName.address(),\r\n        cServiceName.address(),\r\n        segmentForConfigParams.address(),\r\n        kadmStructVersion1,\r\n        apiVersion,\r\n        segmentForDbArgs.address(),\r\n        segmentForkadm5ServerHandle.address());\r\n}\r\n\r\n private static void initContext(MemoryAddress addressForContext) throws Throwable {\r\n    var linker = CLinker.getInstance();\r\n    System.load(&quot;/usr/local/opt/krb5/bin/kadmin&quot;);\r\n    var loaderLookup  = SymbolLookup.loaderLookup();\r\n\r\n    MemoryAddress initContextFunction = loaderLookup.lookup(&quot;kadm5_init_krb5_context&quot;).get();\r\n    MethodHandle initContextHandle = linker.downcallHandle(initContextFunction,\r\n      MethodType.methodType(long.class, MemoryAddress.class),\r\n      FunctionDescriptor.of(CLinker.C_LONG, CLinker.C_POINTER)\r\n    );\r\n    var result = initContextHandle.invoke(addressForContext.address()); //here result is 0 as expected\r\n  }\r\n```\r\n\r\nSo the expected result of `kadminInitWithKeytabHandle.invoke` should be 0 but now it&#39;s 43787552 which means that some error occurred but seems that 43787552 is not kerberos error. Maybe someone knows what could be the reason or what I should pay attention at? And how I can figure out what kind of error it is? ","title":"Using jdk.incubator.foreign for krb5 library. Calling kadm5_init_with_skey returns 43787552 value","body":"<p>could you please help to figure out what is wrong in my code:</p>\n<p>So I need to get the list of principals in KDC and I want to use <a href=\"https://github.com/krb5/krb5\" rel=\"nofollow noreferrer\">krb5</a> library. And in the beginning I need to initialize context and session with keytab and I use <code>kadm5_init_krb5_context</code> and <code>kadm5_init_with_skey</code> functions for this (<a href=\"https://github.com/krb5/krb5/blob/849b7056e703bd3724d909263769ce190db59acc/src/lib/kadm5/srv/server_init.c\" rel=\"nofollow noreferrer\">here</a>) And I'm using jdk17 and jdk.incubator.foreign.</p>\n<p>My code:</p>\n<pre><code>private static void kadminInitWithKeytab(MemorySegment segmentForkadm5ServerHandle) throws Throwable {\n    var linker = CLinker.getInstance();\n    System.load(&quot;/usr/local/opt/krb5/bin/kadmin&quot;);\n    var loaderLookup = SymbolLookup.loaderLookup();\n\n    ResourceScope scope = ResourceScope.newImplicitScope()\n    MemorySegment segmentForContext = MemorySegment.allocateNative(10000,\n      ResourceScope.newImplicitScope()); // segment for context\n    MemoryAddress addressSegmentForContext = segmentForContext.address();\n\n    initContext(addressSegmentForContext); // Initialize context\n\n    MemorySegment segmentForConfigParams = MemorySegment.allocateNative(10000,\n      ResourceScope.newImplicitScope());\n\n    MemorySegment segmentForDbArgs = MemorySegment.allocateNative(10000,\n      ResourceScope.newImplicitScope());\n\n    int kadmStructVersion1 = 0x01;\n    int apiVersion = 0x04;\n\n    String clientName = &quot;client/admin@SOME_REALM&quot;;\n    MemorySegment cClientName = CLinker.toCString(clientName, scope);\n\n    String keytabName = &quot;/some_path_to_keytab.keytab&quot;;\n    MemorySegment ckeytabName = CLinker.toCString(keytabName, scope);\n\n    String serviceName = &quot;some_service_name&quot;;\n    MemorySegment cServiceName = CLinker.toCString(serviceName, scope);\n\n    MemoryAddress kadminInitWithKeytabFunction = loaderLookup.lookup(&quot;kadm5_init_with_skey&quot;).get();\n    MethodHandle kadminInitWithKeytabHandle = linker.downcallHandle(kadminInitWithKeytabFunction,\n      MethodType.methodType(\n        long.class,\n        MemoryAddress.class,\n        MemoryAddress.class,\n        MemoryAddress.class,\n        MemoryAddress.class,\n        MemoryAddress.class,\n        int.class,\n        int.class,\n        MemoryAddress.class,\n        MemoryAddress.class),\n      FunctionDescriptor.of(\n        CLinker.C_LONG,          // return type\n        CLinker.C_POINTER,       // context\n        CLinker.C_POINTER,       // client_name argument\n        CLinker.C_POINTER,       // keytab argument\n        CLinker.C_POINTER,       // service_name argument\n        CLinker.C_POINTER,       // params argument\n        CLinker.C_INT,           // struct_version argument\n        CLinker.C_INT,           // api_version argument\n        CLinker.C_POINTER,      // db_args argument\n        CLinker.C_POINTER        // server_handle_out argument\n      ));\n\n      var result = kadminInitWithKeytabHandle.invoke( // this result is 43787552 instead of 0\n        addressSegmentForContext.address(),\n        cClientName.address(),\n        ckeytabName.address(),\n        cServiceName.address(),\n        segmentForConfigParams.address(),\n        kadmStructVersion1,\n        apiVersion,\n        segmentForDbArgs.address(),\n        segmentForkadm5ServerHandle.address());\n}\n\n private static void initContext(MemoryAddress addressForContext) throws Throwable {\n    var linker = CLinker.getInstance();\n    System.load(&quot;/usr/local/opt/krb5/bin/kadmin&quot;);\n    var loaderLookup  = SymbolLookup.loaderLookup();\n\n    MemoryAddress initContextFunction = loaderLookup.lookup(&quot;kadm5_init_krb5_context&quot;).get();\n    MethodHandle initContextHandle = linker.downcallHandle(initContextFunction,\n      MethodType.methodType(long.class, MemoryAddress.class),\n      FunctionDescriptor.of(CLinker.C_LONG, CLinker.C_POINTER)\n    );\n    var result = initContextHandle.invoke(addressForContext.address()); //here result is 0 as expected\n  }\n</code></pre>\n<p>So the expected result of <code>kadminInitWithKeytabHandle.invoke</code> should be 0 but now it's 43787552 which means that some error occurred but seems that 43787552 is not kerberos error. Maybe someone knows what could be the reason or what I should pay attention at? And how I can figure out what kind of error it is?</p>\n"},{"tags":["java","tinylog"],"answers":[{"comments":[{"owner":{"account_id":7799092,"reputation":578,"user_id":5899171,"display_name":"Martin"},"score":0,"creation_date":1679932806,"post_id":75805404,"comment_id":133805812,"body_markdown":"Great solution! Feel free to submit your changes as pull request on https://github.com/tinylog-org/tinylog","body":"Great solution! Feel free to submit your changes as pull request on <a href=\"https://github.com/tinylog-org/tinylog\" rel=\"nofollow noreferrer\">github.com/tinylog-org/tinylog</a>"}],"tags":[],"owner":{"account_id":4886037,"reputation":119,"user_id":7340677,"display_name":"Betalord"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679425370,"creation_date":1679425370,"answer_id":75805404,"question_id":75776644,"body_markdown":"I solved the problem myself, not sure if my solution is the best, but anyway. I introduced these two methods:\r\n\r\n```java\r\n\t/** Redirects all writing to System.out stream to the logger (logging messages at INFO level). */\r\n    public static void redirectSystemOut() {\r\n    \tSystem.setOut(new PrintStream(new LineReadingOutputStream(Logger::info), true));\r\n    }\r\n    \r\n    /** Redirects all writing to System.err stream to the logger (logging messages at ERROR level). */\r\n    public static void redirectSystemErr() {\r\n    \tSystem.setErr(new PrintStream(new LineReadingOutputStream(Logger::error), true));\r\n    }\r\n```\r\n\r\nAs far as LineReadingOutputStream class goes, I found it here: [https://stackoverflow.com/questions/58468441/java-outputstream-reading-lines-of-strings][1]\r\n\r\nOne final element of this solution is creation of custom console writer, since the default one outputs everything to System.out / System.err, and that would create an infinite loop. The trick is to wrap the two streams and send strings to them. This is the code of my class that I call &quot;IsolatedConsoleWriter&quot; and has to be registered via META-INF (as described in the tinylog docs):\r\n\r\n```java\r\npackage com.betalord.sgx.core;\r\n\r\nimport org.tinylog.Level;\r\nimport org.tinylog.core.ConfigurationParser;\r\nimport org.tinylog.core.LogEntry;\r\nimport org.tinylog.core.LogEntryValue;\r\nimport org.tinylog.provider.InternalLogger;\r\nimport org.tinylog.writers.AbstractFormatPatternWriter;\r\n\r\nimport java.io.FileDescriptor;\r\nimport java.io.FileOutputStream;\r\nimport java.io.PrintStream;\r\nimport java.util.Collection;\r\nimport java.util.Collections;\r\nimport java.util.Map;\r\n\r\n/**\r\n * Console writer based on org.tinylog.writers.ConsoleWriter class, with one difference: this one\r\n * doesn&#39;t write logs to System.out/err but rather to our own streams, that output to the same system\r\n * streams but wrapped. This enables us to redirect System.out/err to the logger (if we were to use\r\n * normal console writer, we would create an infinite loop upon writing to System.out(err).\r\n *\r\n * Comes as a solution to this problem:\r\n * &lt;a href=&quot;https://stackoverflow.com/questions/75776644/how-to-redirect-system-out-and-system-err-to-tinylog-logger&quot;&gt;https://stackoverflow.com/questions/75776644/how-to-redirect-system-out-and-system-err-to-tinylog-logger&lt;/a&gt;\r\n *\r\n * @author Betalord\r\n */\r\npublic class IsolatedConsoleWriter extends AbstractFormatPatternWriter {\r\n\tprivate final Level errorLevel;\r\n\tprivate final PrintStream outStream, errStream;\r\n\t\r\n\tpublic IsolatedConsoleWriter() {\r\n\t\tthis(Collections.&lt;String, String&gt;emptyMap());\r\n\t}\r\n\t\r\n\tpublic IsolatedConsoleWriter(final Map&lt;String, String&gt; properties) {\r\n\t\tsuper(properties);\r\n\t\t\r\n\t\t// Set the default level for stderr logging\r\n\t\tLevel levelStream = Level.WARN;\r\n\t\t\r\n\t\t// Check stream property\r\n\t\tString stream = getStringValue(&quot;stream&quot;);\r\n\t\tif (stream != null) {\r\n\t\t\t// Check whether we have the err@LEVEL syntax\r\n\t\t\tString[] streams = stream.split(&quot;@&quot;, 2);\r\n\t\t\tif (streams.length == 2) {\r\n\t\t\t\tlevelStream = ConfigurationParser.parse(streams[1], levelStream);\r\n\t\t\t\tif (!streams[0].equals(&quot;err&quot;)) {\r\n\t\t\t\t\tInternalLogger.log(Level.ERROR, &quot;Stream with level must be \\&quot;err\\&quot;, \\&quot;&quot; + streams[0] + &quot;\\&quot; is an invalid name&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tstream = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (stream == null) {\r\n\t\t\terrorLevel = levelStream;\r\n\t\t} else if (&quot;err&quot;.equalsIgnoreCase(stream)) {\r\n\t\t\terrorLevel = Level.TRACE;\r\n\t\t} else if (&quot;out&quot;.equalsIgnoreCase(stream)) {\r\n\t\t\terrorLevel = Level.OFF;\r\n\t\t} else {\r\n\t\t\tInternalLogger.log(Level.ERROR, &quot;Stream must be \\&quot;out\\&quot; or \\&quot;err\\&quot;, \\&quot;&quot; + stream + &quot;\\&quot; is an invalid stream name&quot;);\r\n\t\t\terrorLevel = levelStream;\r\n\t\t}\r\n\t\t\r\n\t\toutStream = new PrintStream(new FileOutputStream(FileDescriptor.out), true);\r\n\t\terrStream = new PrintStream(new FileOutputStream(FileDescriptor.err), true);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic Collection&lt;LogEntryValue&gt; getRequiredLogEntryValues() {\r\n\t\tCollection&lt;LogEntryValue&gt; logEntryValues = super.getRequiredLogEntryValues();\r\n\t\tlogEntryValues.add(LogEntryValue.LEVEL);\r\n\t\treturn logEntryValues;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void write(final LogEntry logEntry) {\r\n\t\tif (logEntry.getLevel().ordinal() &lt; errorLevel.ordinal()) {\r\n\t\t\toutStream.print(render(logEntry));\r\n\t\t} else {\r\n\t\t\terrStream.print(render(logEntry));\r\n\t\t}\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void flush() {\r\n\t\toutStream.flush();\r\n\t\terrStream.flush();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void close() {\r\n\t\toutStream.close();\r\n\t\terrStream.close();\r\n\t}\r\n}\r\n```\r\n\r\nSo this writer is exact copy of ConsoleWriter, it add only two fields: errStream and outStream.\r\nSo, putting all of these elements together, I managed to achieve what I wanted - all System.out.println() and similar calls are rerouted to my logger, which formats all the data according to the defined rules (I actually use several writers - isolated console, as shown here, then the rolling file one, the &quot;normal&quot; file one, and also logcat, when I run my app under android).\r\n\r\nIf anyone comes up with a better solution, please let me know.\r\nHowever I believe that the functionality that achieves what I want should be part of the tinylog library itself (rather than using custom hacks like this one).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/58468441/java-outputstream-reading-lines-of-strings","title":"How to redirect System.out and System.err to tinylog logger?","body":"<p>I solved the problem myself, not sure if my solution is the best, but anyway. I introduced these two methods:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    /** Redirects all writing to System.out stream to the logger (logging messages at INFO level). */\n    public static void redirectSystemOut() {\n        System.setOut(new PrintStream(new LineReadingOutputStream(Logger::info), true));\n    }\n    \n    /** Redirects all writing to System.err stream to the logger (logging messages at ERROR level). */\n    public static void redirectSystemErr() {\n        System.setErr(new PrintStream(new LineReadingOutputStream(Logger::error), true));\n    }\n</code></pre>\n<p>As far as LineReadingOutputStream class goes, I found it here: <a href=\"https://stackoverflow.com/questions/58468441/java-outputstream-reading-lines-of-strings\">Java OutputStream reading lines of strings</a></p>\n<p>One final element of this solution is creation of custom console writer, since the default one outputs everything to System.out / System.err, and that would create an infinite loop. The trick is to wrap the two streams and send strings to them. This is the code of my class that I call &quot;IsolatedConsoleWriter&quot; and has to be registered via META-INF (as described in the tinylog docs):</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.betalord.sgx.core;\n\nimport org.tinylog.Level;\nimport org.tinylog.core.ConfigurationParser;\nimport org.tinylog.core.LogEntry;\nimport org.tinylog.core.LogEntryValue;\nimport org.tinylog.provider.InternalLogger;\nimport org.tinylog.writers.AbstractFormatPatternWriter;\n\nimport java.io.FileDescriptor;\nimport java.io.FileOutputStream;\nimport java.io.PrintStream;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.Map;\n\n/**\n * Console writer based on org.tinylog.writers.ConsoleWriter class, with one difference: this one\n * doesn't write logs to System.out/err but rather to our own streams, that output to the same system\n * streams but wrapped. This enables us to redirect System.out/err to the logger (if we were to use\n * normal console writer, we would create an infinite loop upon writing to System.out(err).\n *\n * Comes as a solution to this problem:\n * &lt;a href=&quot;https://stackoverflow.com/questions/75776644/how-to-redirect-system-out-and-system-err-to-tinylog-logger&quot;&gt;https://stackoverflow.com/questions/75776644/how-to-redirect-system-out-and-system-err-to-tinylog-logger&lt;/a&gt;\n *\n * @author Betalord\n */\npublic class IsolatedConsoleWriter extends AbstractFormatPatternWriter {\n    private final Level errorLevel;\n    private final PrintStream outStream, errStream;\n    \n    public IsolatedConsoleWriter() {\n        this(Collections.&lt;String, String&gt;emptyMap());\n    }\n    \n    public IsolatedConsoleWriter(final Map&lt;String, String&gt; properties) {\n        super(properties);\n        \n        // Set the default level for stderr logging\n        Level levelStream = Level.WARN;\n        \n        // Check stream property\n        String stream = getStringValue(&quot;stream&quot;);\n        if (stream != null) {\n            // Check whether we have the err@LEVEL syntax\n            String[] streams = stream.split(&quot;@&quot;, 2);\n            if (streams.length == 2) {\n                levelStream = ConfigurationParser.parse(streams[1], levelStream);\n                if (!streams[0].equals(&quot;err&quot;)) {\n                    InternalLogger.log(Level.ERROR, &quot;Stream with level must be \\&quot;err\\&quot;, \\&quot;&quot; + streams[0] + &quot;\\&quot; is an invalid name&quot;);\n                }\n                stream = null;\n            }\n        }\n        \n        if (stream == null) {\n            errorLevel = levelStream;\n        } else if (&quot;err&quot;.equalsIgnoreCase(stream)) {\n            errorLevel = Level.TRACE;\n        } else if (&quot;out&quot;.equalsIgnoreCase(stream)) {\n            errorLevel = Level.OFF;\n        } else {\n            InternalLogger.log(Level.ERROR, &quot;Stream must be \\&quot;out\\&quot; or \\&quot;err\\&quot;, \\&quot;&quot; + stream + &quot;\\&quot; is an invalid stream name&quot;);\n            errorLevel = levelStream;\n        }\n        \n        outStream = new PrintStream(new FileOutputStream(FileDescriptor.out), true);\n        errStream = new PrintStream(new FileOutputStream(FileDescriptor.err), true);\n    }\n    \n    @Override\n    public Collection&lt;LogEntryValue&gt; getRequiredLogEntryValues() {\n        Collection&lt;LogEntryValue&gt; logEntryValues = super.getRequiredLogEntryValues();\n        logEntryValues.add(LogEntryValue.LEVEL);\n        return logEntryValues;\n    }\n    \n    @Override\n    public void write(final LogEntry logEntry) {\n        if (logEntry.getLevel().ordinal() &lt; errorLevel.ordinal()) {\n            outStream.print(render(logEntry));\n        } else {\n            errStream.print(render(logEntry));\n        }\n    }\n    \n    @Override\n    public void flush() {\n        outStream.flush();\n        errStream.flush();\n    }\n    \n    @Override\n    public void close() {\n        outStream.close();\n        errStream.close();\n    }\n}\n</code></pre>\n<p>So this writer is exact copy of ConsoleWriter, it add only two fields: errStream and outStream.\nSo, putting all of these elements together, I managed to achieve what I wanted - all System.out.println() and similar calls are rerouted to my logger, which formats all the data according to the defined rules (I actually use several writers - isolated console, as shown here, then the rolling file one, the &quot;normal&quot; file one, and also logcat, when I run my app under android).</p>\n<p>If anyone comes up with a better solution, please let me know.\nHowever I believe that the functionality that achieves what I want should be part of the tinylog library itself (rather than using custom hacks like this one).</p>\n"}],"owner":{"account_id":4886037,"reputation":119,"user_id":7340677,"display_name":"Betalord"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679425370,"creation_date":1679151489,"question_id":75776644,"body_markdown":"I am trying to use [tinylog](https://tinylog.org/v2/) but can&#39;t figure out how to redirect System.out and System.err to the logger. With log4j2, I did it like this (from java code):\r\n\r\n```\r\nSystem.setErr(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.ERROR).buildPrintStream());\r\nSystem.setOut(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.INFO).buildPrintStream());\r\n```\r\nI assume I should use same mechanism (System.setOut and setErr), however I&#39;m not sure what is the right way to do it. I&#39;ve read the online documentation but could not find any answer to my question (which is strange, since this is such a basic functionality that any logger must support in my opinion).\r\n\r\nAny ideas?","title":"How to redirect System.out and System.err to tinylog logger?","body":"<p>I am trying to use <a href=\"https://tinylog.org/v2/\" rel=\"nofollow noreferrer\">tinylog</a> but can't figure out how to redirect System.out and System.err to the logger. With log4j2, I did it like this (from java code):</p>\n<pre><code>System.setErr(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.ERROR).buildPrintStream());\nSystem.setOut(IoBuilder.forLogger(LogManager.getRootLogger()).setLevel(Level.INFO).buildPrintStream());\n</code></pre>\n<p>I assume I should use same mechanism (System.setOut and setErr), however I'm not sure what is the right way to do it. I've read the online documentation but could not find any answer to my question (which is strange, since this is such a basic functionality that any logger must support in my opinion).</p>\n<p>Any ideas?</p>\n"},{"tags":["java","avro"],"comments":[{"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"score":0,"creation_date":1679412735,"post_id":75801609,"comment_id":133715580,"body_markdown":"So far, I can say that .withShardNameTemplate(&quot;ssss-of-nnnn&quot;) causes issues for name uniqueness. if I reduce the number of chards &amp; increase the window size, I can get files containing more than 1 avro object.","body":"So far, I can say that .withShardNameTemplate(&quot;ssss-of-nnnn&quot;) causes issues for name uniqueness. if I reduce the number of chards &amp; increase the window size, I can get files containing more than 1 avro object."},{"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"score":0,"creation_date":1679425048,"post_id":75801609,"comment_id":133719297,"body_markdown":"So, my recommendation, do not use\n.withNumShards(20) &amp;\n.withShardNameTemplate(&quot;ssss-of-nnnn&quot;));","body":"So, my recommendation, do not use .withNumShards(20) &amp; .withShardNameTemplate(&quot;ssss-of-nnnn&quot;));"}],"answers":[{"comments":[{"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"score":0,"creation_date":1679434455,"post_id":75805401,"comment_id":133721340,"body_markdown":"TL;DR: a lower num chards will create less files, containing more data.","body":"TL;DR: a lower num chards will create less files, containing more data."}],"tags":[],"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679425338,"creation_date":1679425338,"answer_id":75805401,"question_id":75801609,"body_markdown":"Avro will handle itself the amount of data created and sent to the bucket, along with appending data, as long as you don&#39;t mess with its file naming convention. Also you need enough data in order to do your tests.","title":"Is AvroIO.writeGenericRecords(schema) capable to append to existing files in java?","body":"<p>Avro will handle itself the amount of data created and sent to the bucket, along with appending data, as long as you don't mess with its file naming convention. Also you need enough data in order to do your tests.</p>\n"}],"owner":{"account_id":26809956,"reputation":1,"user_id":20400723,"display_name":"Carlos Gomez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679425338,"creation_date":1679403874,"question_id":75801609,"body_markdown":"I have been scratching my head around this question for a while, I&#39;m using java with Avro, writing files with windowed writes, shards, &amp; shard template &quot;W-P-sssss-of-nnnnn&quot;, but now the requirement ask for appending the content to the existing amount of shards.\r\n\r\n```\r\nPCollection&lt;GenericRecord&gt; collection = ...\r\ncollection.apply(&quot;write to bucket&quot;, \r\nAvroIO.writeGenericRecords(schema)\r\n.to(&quot;gs://my-bucket/folder&quot;)\r\n.withWindowedWrites()\r\n.withNumShards(20)\r\n.withShardNameTemplate(&quot;ssss-of-nnnn&quot;));\r\n```\r\nI understand that shard number will attempt to create 20 files, but those will increase if more data is present. I has been trying to append to existing content, but I only get files being overwritten.\r\n\r\nOf course, if we set a more unique shard template, like &quot;W-P-sssss-of-nnnnn&quot; we get more files, avoiding the files being overwritten, but, how to append data to existing 20 shards?\r\nIs that possible?\r\n\r\nI tried using with Dynamic Destinations, and Value providers, but that allowed me to manipulate the folder destination, or the file naming policy, but this don&#39;t put me closer to defining how to append instead of overwriting files.","title":"Is AvroIO.writeGenericRecords(schema) capable to append to existing files in java?","body":"<p>I have been scratching my head around this question for a while, I'm using java with Avro, writing files with windowed writes, shards, &amp; shard template &quot;W-P-sssss-of-nnnnn&quot;, but now the requirement ask for appending the content to the existing amount of shards.</p>\n<pre><code>PCollection&lt;GenericRecord&gt; collection = ...\ncollection.apply(&quot;write to bucket&quot;, \nAvroIO.writeGenericRecords(schema)\n.to(&quot;gs://my-bucket/folder&quot;)\n.withWindowedWrites()\n.withNumShards(20)\n.withShardNameTemplate(&quot;ssss-of-nnnn&quot;));\n</code></pre>\n<p>I understand that shard number will attempt to create 20 files, but those will increase if more data is present. I has been trying to append to existing content, but I only get files being overwritten.</p>\n<p>Of course, if we set a more unique shard template, like &quot;W-P-sssss-of-nnnnn&quot; we get more files, avoiding the files being overwritten, but, how to append data to existing 20 shards?\nIs that possible?</p>\n<p>I tried using with Dynamic Destinations, and Value providers, but that allowed me to manipulate the folder destination, or the file naming policy, but this don't put me closer to defining how to append instead of overwriting files.</p>\n"},{"tags":["java","pdf","text","hyperlink","pdfbox"],"answers":[{"comments":[{"owner":{"account_id":4335063,"reputation":181,"user_id":3539725,"accept_rate":69,"display_name":"Shiran S Ekanayake"},"score":0,"creation_date":1484289612,"post_id":38591541,"comment_id":70457757,"body_markdown":"This piece of code nicely extracting the external links on the pdf. But it seems like it does not extract links to internal pages. For an example, on 3rd page of my pdf it contains a link to page 10. I need to get that info as well. Any idea of how to do it?","body":"This piece of code nicely extracting the external links on the pdf. But it seems like it does not extract links to internal pages. For an example, on 3rd page of my pdf it contains a link to page 10. I need to get that info as well. Any idea of how to do it?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1484298806,"post_id":38591541,"comment_id":70461871,"body_markdown":"@ShiranSEkanayake please look at the other response. The bottom part (with PDPageDestination) should do what you want. I didn&#39;t test it, but it looks good to me.","body":"@ShiranSEkanayake please look at the other response. The bottom part (with PDPageDestination) should do what you want. I didn&#39;t test it, but it looks good to me."}],"tags":[],"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1514242951,"creation_date":1469540484,"answer_id":38591541,"question_id":38587567,"body_markdown":"Use this code from the [PrintURLs sample code][1] from the source code download:\r\n\r\n    for( PDPage page : doc.getPages() )\r\n    {\r\n        pageNum++;\r\n        PDFTextStripperByArea stripper = new PDFTextStripperByArea();\r\n        List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n        //first setup text extraction regions\r\n        for( int j=0; j&lt;annotations.size(); j++ )\r\n        {\r\n            PDAnnotation annot = annotations.get(j);\r\n            if( annot instanceof PDAnnotationLink )\r\n            {\r\n                PDAnnotationLink link = (PDAnnotationLink)annot;\r\n                PDRectangle rect = link.getRectangle();\r\n                //need to reposition link rectangle to match text space\r\n                float x = rect.getLowerLeftX();\r\n                float y = rect.getUpperRightY();\r\n                float width = rect.getWidth();\r\n                float height = rect.getHeight();\r\n                int rotation = page.getRotation();\r\n                if( rotation == 0 )\r\n                {\r\n                    PDRectangle pageSize = page.getMediaBox();\r\n                    y = pageSize.getHeight() - y;\r\n                }\r\n                else if( rotation == 90 )\r\n                {\r\n                    //do nothing\r\n                }\r\n\r\n                Rectangle2D.Float awtRect = new Rectangle2D.Float( x,y,width,height );\r\n                stripper.addRegion( &quot;&quot; + j, awtRect );\r\n            }\r\n        }\r\n\r\n        stripper.extractRegions( page );\r\n\r\n        for( int j=0; j&lt;annotations.size(); j++ )\r\n        {\r\n            PDAnnotation annot = annotations.get(j);\r\n            if( annot instanceof PDAnnotationLink )\r\n            {\r\n                PDAnnotationLink link = (PDAnnotationLink)annot;\r\n                PDAction action = link.getAction();\r\n                String urlText = stripper.getTextForRegion( &quot;&quot; + j );\r\n                if( action instanceof PDActionURI )\r\n                {\r\n                    PDActionURI uri = (PDActionURI)action;\r\n                    System.out.println( &quot;Page &quot; + pageNum +&quot;:&#39;&quot; + urlText.trim() + &quot;&#39;=&quot; + uri.getURI() );\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nIt works in two parts, one is getting the URL which is easy, the other is getting the URL text, which is done with a text extraction at the rectangle of the annotation.\r\n\r\n  [1]: https://svn.apache.org/repos/asf/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/pdmodel/PrintURLs.java","title":"How to extract hyperlink information PDFBox","body":"<p>Use this code from the <a href=\"https://svn.apache.org/repos/asf/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/pdmodel/PrintURLs.java\" rel=\"noreferrer\">PrintURLs sample code</a> from the source code download:</p>\n\n<pre><code>for( PDPage page : doc.getPages() )\n{\n    pageNum++;\n    PDFTextStripperByArea stripper = new PDFTextStripperByArea();\n    List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n    //first setup text extraction regions\n    for( int j=0; j&lt;annotations.size(); j++ )\n    {\n        PDAnnotation annot = annotations.get(j);\n        if( annot instanceof PDAnnotationLink )\n        {\n            PDAnnotationLink link = (PDAnnotationLink)annot;\n            PDRectangle rect = link.getRectangle();\n            //need to reposition link rectangle to match text space\n            float x = rect.getLowerLeftX();\n            float y = rect.getUpperRightY();\n            float width = rect.getWidth();\n            float height = rect.getHeight();\n            int rotation = page.getRotation();\n            if( rotation == 0 )\n            {\n                PDRectangle pageSize = page.getMediaBox();\n                y = pageSize.getHeight() - y;\n            }\n            else if( rotation == 90 )\n            {\n                //do nothing\n            }\n\n            Rectangle2D.Float awtRect = new Rectangle2D.Float( x,y,width,height );\n            stripper.addRegion( \"\" + j, awtRect );\n        }\n    }\n\n    stripper.extractRegions( page );\n\n    for( int j=0; j&lt;annotations.size(); j++ )\n    {\n        PDAnnotation annot = annotations.get(j);\n        if( annot instanceof PDAnnotationLink )\n        {\n            PDAnnotationLink link = (PDAnnotationLink)annot;\n            PDAction action = link.getAction();\n            String urlText = stripper.getTextForRegion( \"\" + j );\n            if( action instanceof PDActionURI )\n            {\n                PDActionURI uri = (PDActionURI)action;\n                System.out.println( \"Page \" + pageNum +\":'\" + urlText.trim() + \"'=\" + uri.getURI() );\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It works in two parts, one is getting the URL which is easy, the other is getting the URL text, which is done with a text extraction at the rectangle of the annotation.</p>\n"},{"tags":[],"owner":{"account_id":7493363,"reputation":1061,"user_id":5694338,"accept_rate":50,"display_name":"Adam"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1470734465,"creation_date":1470734465,"answer_id":38846776,"question_id":38587567,"body_markdown":"We must get hyperlink information and internal link(ex. move page....). I using code below:\r\n           \r\n\r\n \r\n\r\n    int pageNum = 0;\r\n                for (PDPage page : originalPDF.getPages()) {\r\n                    pageNum++;\r\n                    List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n                    for (PDAnnotation annot : annotations) {\r\n                        if (annot instanceof PDAnnotationLink) {\r\n                            // get dimension of annottations\r\n                            PDAnnotationLink link = (PDAnnotationLink) annot;\r\n                            // get link action include link url and internal link\r\n                            PDAction action = link.getAction();\r\n                            // get link internal some case specal\r\n                            PDDestination pDestination = link.getDestination();\r\n    \r\n                            if (action != null) {\r\n                                if (action instanceof PDActionURI || action instanceof PDActionGoTo) {\r\n                                    if (action instanceof PDActionURI) {\r\n                                        // get uri link\r\n                                        PDActionURI uri = (PDActionURI) action;\r\n                                        System.out.println(&quot;uri link:&quot; + uri.getURI());\r\n                                    } else {\r\n                                        if (action instanceof PDActionGoTo) {\r\n                                            // get internal link\r\n                                            PDDestination destination = ((PDActionGoTo) action).getDestination();\r\n                                            PDPageDestination pageDestination;\r\n                                            if (destination instanceof PDPageDestination) {\r\n                                                pageDestination = (PDPageDestination) destination;\r\n                                            } else {\r\n                                                if (destination instanceof PDNamedDestination) {\r\n                                                    pageDestination = originalPDF.getDocumentCatalog().findNamedDestinationPage((PDNamedDestination) destination);\r\n                                                } else {\r\n                                                    // error handling\r\n                                                    break;\r\n                                                }\r\n                                            }\r\n    \r\n                                            if (pageDestination != null) {\r\n                                                System.out.println(&quot;page move: &quot; + (pageDestination.retrievePageNumber() + 1));\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (pDestination != null) {\r\n                                    PDPageDestination pageDestination;\r\n                                    if (pDestination instanceof PDPageDestination) {\r\n                                        pageDestination = (PDPageDestination) pDestination;\r\n                                    } else {\r\n                                        if (pDestination instanceof PDNamedDestination) {\r\n                                            pageDestination = originalPDF.getDocumentCatalog().findNamedDestinationPage((PDNamedDestination) pDestination);\r\n                                        } else {\r\n                                            // error handling\r\n                                            break;\r\n                                        }\r\n                                    }\r\n    \r\n                                    if (pageDestination != null) {\r\n                                        System.out.println(&quot;page move: &quot; + (pageDestination.retrievePageNumber() + 1));\r\n                                    }\r\n                                } else {\r\n                                    //    \r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n    \r\n                }","title":"How to extract hyperlink information PDFBox","body":"<p>We must get hyperlink information and internal link(ex. move page....). I using code below:</p>\n\n<pre><code>int pageNum = 0;\n            for (PDPage page : originalPDF.getPages()) {\n                pageNum++;\n                List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n                for (PDAnnotation annot : annotations) {\n                    if (annot instanceof PDAnnotationLink) {\n                        // get dimension of annottations\n                        PDAnnotationLink link = (PDAnnotationLink) annot;\n                        // get link action include link url and internal link\n                        PDAction action = link.getAction();\n                        // get link internal some case specal\n                        PDDestination pDestination = link.getDestination();\n\n                        if (action != null) {\n                            if (action instanceof PDActionURI || action instanceof PDActionGoTo) {\n                                if (action instanceof PDActionURI) {\n                                    // get uri link\n                                    PDActionURI uri = (PDActionURI) action;\n                                    System.out.println(\"uri link:\" + uri.getURI());\n                                } else {\n                                    if (action instanceof PDActionGoTo) {\n                                        // get internal link\n                                        PDDestination destination = ((PDActionGoTo) action).getDestination();\n                                        PDPageDestination pageDestination;\n                                        if (destination instanceof PDPageDestination) {\n                                            pageDestination = (PDPageDestination) destination;\n                                        } else {\n                                            if (destination instanceof PDNamedDestination) {\n                                                pageDestination = originalPDF.getDocumentCatalog().findNamedDestinationPage((PDNamedDestination) destination);\n                                            } else {\n                                                // error handling\n                                                break;\n                                            }\n                                        }\n\n                                        if (pageDestination != null) {\n                                            System.out.println(\"page move: \" + (pageDestination.retrievePageNumber() + 1));\n                                        }\n                                    }\n                                }\n                            }\n                        } else {\n                            if (pDestination != null) {\n                                PDPageDestination pageDestination;\n                                if (pDestination instanceof PDPageDestination) {\n                                    pageDestination = (PDPageDestination) pDestination;\n                                } else {\n                                    if (pDestination instanceof PDNamedDestination) {\n                                        pageDestination = originalPDF.getDocumentCatalog().findNamedDestinationPage((PDNamedDestination) pDestination);\n                                    } else {\n                                        // error handling\n                                        break;\n                                    }\n                                }\n\n                                if (pageDestination != null) {\n                                    System.out.println(\"page move: \" + (pageDestination.retrievePageNumber() + 1));\n                                }\n                            } else {\n                                //    \n                            }\n                        }\n                    }\n                }\n\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25858612,"reputation":1,"user_id":19591426,"display_name":"Victor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679424707,"creation_date":1679424707,"answer_id":75805315,"question_id":38587567,"body_markdown":"    03/21/2023\r\n    I have Just tested today and it work. but there are couple of set up need to do. this is how i did it.\r\n    [dependency]\r\n        &lt;dependency&gt;\r\n    \t    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;2.0.27&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    Imports:-\r\n    import java.awt.geom.Rectangle2D;\r\n    import java.io.BufferedInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.net.URL;\r\n    import java.util.List;\r\n    \r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.pdmodel.PDPage;\r\n    import org.apache.pdfbox.pdmodel.common.PDRectangle;\r\n    import org.apache.pdfbox.pdmodel.interactive.action.PDAction;\r\n    import org.apache.pdfbox.pdmodel.interactive.action.PDActionURI;\r\n    import org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotation;\r\n    import org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotationLink;\r\n    import org.apache.pdfbox.text.PDFTextStripperByArea;\r\n    \r\n    public class Test_newSome {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    // File path = open pdf file on MSEdge and copy url \r\n    \t\tURL url = new URL(&quot;file:///C:/Users/PcuserName/Downloads/Credentials%20Email%20-%20Mar21FN%20Mar21094806LN.pdf&quot;);\r\n    \t\tInputStream is = url.openStream();\r\n    \t\tBufferedInputStream filePase = new BufferedInputStream(is);\r\n    \t\tPDDocument doc = null;\r\n    \r\n    \t\tdoc = PDDocument.load(filePase);\r\n    \r\n    \t\tfor (PDPage page : doc.getPages()) {\r\n    \t\t\tint pageNum = 0;\r\n    \t\t\tpageNum++;\r\n    \t\t\tPDFTextStripperByArea stripper = new PDFTextStripperByArea();\r\n    \t\t\tList&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n    \t\t\t// first setup text extraction regions\r\n    \t\t\tfor (int j = 0; j &lt; annotations.size(); j++) {\r\n    \t\t\t\tPDAnnotation annot = annotations.get(j);\r\n    \t\t\t\tif (annot instanceof PDAnnotationLink) {\r\n    \t\t\t\t\tPDAnnotationLink link = (PDAnnotationLink) annot;\r\n    \t\t\t\t\tPDRectangle rect = link.getRectangle();\r\n    \t\t\t\t\t// need to reposition link rectangle to match text space\r\n    \t\t\t\t\tfloat x = rect.getLowerLeftX();\r\n    \t\t\t\t\tfloat y = rect.getUpperRightY();\r\n    \t\t\t\t\tfloat width = rect.getWidth();\r\n    \t\t\t\t\tfloat height = rect.getHeight();\r\n    \t\t\t\t\tint rotation = page.getRotation();\r\n    \t\t\t\t\tif (rotation == 0) {\r\n    \t\t\t\t\t\tPDRectangle pageSize = page.getMediaBox();\r\n    \t\t\t\t\t\ty = pageSize.getHeight() - y;\r\n    \t\t\t\t\t} else if (rotation == 90) {\r\n    \t\t\t\t\t\t// do nothing\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\tRectangle2D.Float awtRect = new Rectangle2D.Float(x, y, width, height);\r\n    \t\t\t\t\tstripper.addRegion(&quot;&quot; + j, awtRect);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\tstripper.extractRegions(page);\r\n    \r\n    \t\t\tfor (int j = 0; j &lt; annotations.size(); j++) {\r\n    \t\t\t\tPDAnnotation annot = annotations.get(j);\r\n    \t\t\t\tif (annot instanceof PDAnnotationLink) {\r\n    \t\t\t\t\tPDAnnotationLink link = (PDAnnotationLink) annot;\r\n    \t\t\t\t\tPDAction action = link.getAction();\r\n    \t\t\t\t\tString urlText = stripper.getTextForRegion(&quot;&quot; + j);\r\n    \t\t\t\t\tif (action instanceof PDActionURI) {\r\n    \t\t\t\t\t\tPDActionURI uri = (PDActionURI) action;\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Page &quot; + pageNum + &quot;:&#39;&quot; + urlText.trim() + &quot;&#39;=&quot; + uri.getURI());\r\n    \r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"How to extract hyperlink information PDFBox","body":"<pre><code>03/21/2023\nI have Just tested today and it work. but there are couple of set up need to do. this is how i did it.\n[dependency]\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n        &lt;version&gt;2.0.27&lt;/version&gt;\n    &lt;/dependency&gt;\n\nImports:-\nimport java.awt.geom.Rectangle2D;\nimport java.io.BufferedInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.URL;\nimport java.util.List;\n\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPage;\nimport org.apache.pdfbox.pdmodel.common.PDRectangle;\nimport org.apache.pdfbox.pdmodel.interactive.action.PDAction;\nimport org.apache.pdfbox.pdmodel.interactive.action.PDActionURI;\nimport org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotation;\nimport org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotationLink;\nimport org.apache.pdfbox.text.PDFTextStripperByArea;\n\npublic class Test_newSome {\n\n    public static void main(String[] args) throws IOException {\n// File path = open pdf file on MSEdge and copy url \n        URL url = new URL(&quot;file:///C:/Users/PcuserName/Downloads/Credentials%20Email%20-%20Mar21FN%20Mar21094806LN.pdf&quot;);\n        InputStream is = url.openStream();\n        BufferedInputStream filePase = new BufferedInputStream(is);\n        PDDocument doc = null;\n\n        doc = PDDocument.load(filePase);\n\n        for (PDPage page : doc.getPages()) {\n            int pageNum = 0;\n            pageNum++;\n            PDFTextStripperByArea stripper = new PDFTextStripperByArea();\n            List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n            // first setup text extraction regions\n            for (int j = 0; j &lt; annotations.size(); j++) {\n                PDAnnotation annot = annotations.get(j);\n                if (annot instanceof PDAnnotationLink) {\n                    PDAnnotationLink link = (PDAnnotationLink) annot;\n                    PDRectangle rect = link.getRectangle();\n                    // need to reposition link rectangle to match text space\n                    float x = rect.getLowerLeftX();\n                    float y = rect.getUpperRightY();\n                    float width = rect.getWidth();\n                    float height = rect.getHeight();\n                    int rotation = page.getRotation();\n                    if (rotation == 0) {\n                        PDRectangle pageSize = page.getMediaBox();\n                        y = pageSize.getHeight() - y;\n                    } else if (rotation == 90) {\n                        // do nothing\n                    }\n\n                    Rectangle2D.Float awtRect = new Rectangle2D.Float(x, y, width, height);\n                    stripper.addRegion(&quot;&quot; + j, awtRect);\n                }\n            }\n\n            stripper.extractRegions(page);\n\n            for (int j = 0; j &lt; annotations.size(); j++) {\n                PDAnnotation annot = annotations.get(j);\n                if (annot instanceof PDAnnotationLink) {\n                    PDAnnotationLink link = (PDAnnotationLink) annot;\n                    PDAction action = link.getAction();\n                    String urlText = stripper.getTextForRegion(&quot;&quot; + j);\n                    if (action instanceof PDActionURI) {\n                        PDActionURI uri = (PDActionURI) action;\n                        System.out.println(&quot;Page &quot; + pageNum + &quot;:'&quot; + urlText.trim() + &quot;'=&quot; + uri.getURI());\n\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3592597,"reputation":1049,"user_id":2998265,"accept_rate":91,"display_name":"kabeersvohra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5604,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":38591541,"answer_count":3,"score":10,"last_activity_date":1679424707,"creation_date":1469529469,"question_id":38587567,"body_markdown":"I am trying to extract the hyperlink information from a PDF using PDFBox but I am unsure how to get \r\n\r\n    for( Object p : pages ) {\r\n        PDPage page = (PDPage)p;\r\n\r\n        List&lt;?&gt; annotations = page.getAnnotations();\r\n        for( Object a : annotations ) {\r\n            PDAnnotation annotation = (PDAnnotation)a;\r\n\r\n            if( annotation instanceof PDAnnotationLink ) {\r\n                PDAnnotationLink link = (PDAnnotationLink)annotation;\r\n                System.out.println(link.toString());\r\n                System.out.println(link.getDestination());\r\n                \r\n            }\r\n        }\r\n\r\n    }\r\n\r\nI want to extract the url of the hyperlink destination and the text of the hyperlink. How can one do this?\r\n\r\nThanks","title":"How to extract hyperlink information PDFBox","body":"<p>I am trying to extract the hyperlink information from a PDF using PDFBox but I am unsure how to get </p>\n\n<pre><code>for( Object p : pages ) {\n    PDPage page = (PDPage)p;\n\n    List&lt;?&gt; annotations = page.getAnnotations();\n    for( Object a : annotations ) {\n        PDAnnotation annotation = (PDAnnotation)a;\n\n        if( annotation instanceof PDAnnotationLink ) {\n            PDAnnotationLink link = (PDAnnotationLink)annotation;\n            System.out.println(link.toString());\n            System.out.println(link.getDestination());\n\n        }\n    }\n\n}\n</code></pre>\n\n<p>I want to extract the url of the hyperlink destination and the text of the hyperlink. How can one do this?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","android","push-notification","notifications","broadcastreceiver"],"owner":{"account_id":26014580,"reputation":1,"user_id":19723061,"display_name":"rcswanson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679424315,"creation_date":1679423967,"question_id":75805202,"body_markdown":"My android app stores Terms, Courses, and Assessments for those courses in a Room database structure. The Courses and Assessments each have getters for their start and end dates / due dates.\r\n\r\nThe app does not seem to run the OnReceive method as I&#39;ve checked the Logcat while running a log code.\r\n\r\nI have the correct user permissions and i have the broadcast receiver in the Manifest file.\r\n\r\nThis is my code that I have for notifications:\r\n\r\n\r\n```\r\n\r\npublic class NotificationReceiver extends BroadcastReceiver {\r\n\r\n    private static final String CHANNEL_ID = &quot;Alerts&quot;;\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n\r\n        // Retrieve the title and message from the intent extras\r\n        String title = intent.getStringExtra(&quot;title&quot;);\r\n        String message = intent.getStringExtra(&quot;message&quot;);\r\n\r\n        // Set the desired notification time\r\n        Calendar desiredCalendar = Calendar.getInstance();\r\n        desiredCalendar.set(Calendar.HOUR_OF_DAY, 13);\r\n        desiredCalendar.set(Calendar.MINUTE, 30);\r\n        desiredCalendar.set(Calendar.SECOND, 0);\r\n\r\n// Create the PendingIntent for the notification broadcast\r\n        Intent notificationIntent = new Intent(context, NotificationReceiver.class);\r\n        notificationIntent.putExtra(&quot;title&quot;, &quot;My Notification Title&quot;);\r\n        notificationIntent.putExtra(&quot;message&quot;, &quot;My Notification Message&quot;);\r\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n// Schedule the notification using AlarmManager\r\n        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\r\n        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, desiredCalendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);\r\n\r\n\r\n        // Check if the current time matches the desired time\r\n        Calendar calendar = Calendar.getInstance();\r\n        int currentHour = calendar.get(Calendar.HOUR_OF_DAY);\r\n        int currentMinute = calendar.get(Calendar.MINUTE);\r\n    if (currentHour != desiredCalendar.get(Calendar.HOUR_OF_DAY) || currentMinute != desiredCalendar.get(Calendar.MINUTE)) {\r\n            return; // Do not show notification if current time does not match desired time\r\n        }\r\n\r\n        // Retrieve all courses from the database\r\n        AppDatabase db = AppDatabase.getInstance(context);\r\n        CourseDAO courseDao = db.courseDAO();\r\n        AssessmentDAO assessmentDao = db.assessmentDAO();\r\n        List&lt;CourseTable&gt; courses = courseDao.getAllCourses();\r\n        List&lt;AssessmentTable&gt; assessments = assessmentDao.getAllAssessments();\r\n\r\n        // Iterate over each course to check start and end dates\r\n        for (CourseTable course : courses) {\r\n            Date currentDate = new Date();\r\n            String startDateString = course.getStartDate();\r\n            String endDateString = course.getEndDate();\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n            try {\r\n                Date startDate = dateFormat.parse(startDateString);\r\n                Date endDate = dateFormat.parse(endDateString);\r\n                if (!currentDate.equals(startDate) &amp;&amp; !currentDate.equals(endDate)) {\r\n                    continue; // If current date does not match start or end date of course, skip to next course\r\n                }\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n                continue; // If there is a parse exception, skip to next course\r\n            }\r\n            // If current date matches start or end date of course, show notification\r\n            showNotification(context, course.getCourseTitle(), &quot;Course &quot; + course.getCourseTitle() + &quot; starts or ends today&quot;);\r\n        }\r\n\r\n        for (AssessmentTable assessment : assessments) {\r\n            Date currentDate = new Date();\r\n            String dueDateString = assessment.getDueDate();\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n            try {\r\n                Date dueDate = dateFormat.parse(dueDateString);\r\n                if (!currentDate.equals(dueDate)) {\r\n                    continue; // If current date does not match start or end date of course, skip to next course\r\n                }\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n                continue; // If there is a parse exception, skip to next course\r\n            }\r\n            // If current date matches start or end date of course, show notification\r\n            showNotification(context, assessment.getTitle(), &quot;Assessment &quot; + assessment.getTitle() + &quot; is due today&quot;);\r\n        }\r\n    }\r\n\r\n\r\n    @SuppressLint(&quot;MissingPermission&quot;)\r\n    private void showNotification(Context context, String title, String message) {\r\n        // Create the notification\r\n        createNotificationChannel(context);\r\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(context, CHANNEL_ID)\r\n                .setSmallIcon(R.drawable.notification)\r\n                .setContentTitle(title)\r\n                .setContentText(message)\r\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT);\r\n        NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\r\n        notificationManager.notify(0, builder.build());\r\n    }\r\n\r\n    private void createNotificationChannel(Context context) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            CharSequence name = context.getString(R.string.channel_name);\r\n            String description = context.getString(R.string.channel_description);\r\n            int importance = NotificationManager.IMPORTANCE_DEFAULT;\r\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name, importance);\r\n            channel.setDescription(description);\r\n            NotificationManager notificationManager = context.getSystemService(NotificationManager.class);\r\n            notificationManager.createNotificationChannel(channel);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n","title":"How can I get my android app to send notifications from an app that works whether the app is closed or not?","body":"<p>My android app stores Terms, Courses, and Assessments for those courses in a Room database structure. The Courses and Assessments each have getters for their start and end dates / due dates.</p>\n<p>The app does not seem to run the OnReceive method as I've checked the Logcat while running a log code.</p>\n<p>I have the correct user permissions and i have the broadcast receiver in the Manifest file.</p>\n<p>This is my code that I have for notifications:</p>\n<pre><code>\npublic class NotificationReceiver extends BroadcastReceiver {\n\n    private static final String CHANNEL_ID = &quot;Alerts&quot;;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n\n        // Retrieve the title and message from the intent extras\n        String title = intent.getStringExtra(&quot;title&quot;);\n        String message = intent.getStringExtra(&quot;message&quot;);\n\n        // Set the desired notification time\n        Calendar desiredCalendar = Calendar.getInstance();\n        desiredCalendar.set(Calendar.HOUR_OF_DAY, 13);\n        desiredCalendar.set(Calendar.MINUTE, 30);\n        desiredCalendar.set(Calendar.SECOND, 0);\n\n// Create the PendingIntent for the notification broadcast\n        Intent notificationIntent = new Intent(context, NotificationReceiver.class);\n        notificationIntent.putExtra(&quot;title&quot;, &quot;My Notification Title&quot;);\n        notificationIntent.putExtra(&quot;message&quot;, &quot;My Notification Message&quot;);\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n// Schedule the notification using AlarmManager\n        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, desiredCalendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);\n\n\n        // Check if the current time matches the desired time\n        Calendar calendar = Calendar.getInstance();\n        int currentHour = calendar.get(Calendar.HOUR_OF_DAY);\n        int currentMinute = calendar.get(Calendar.MINUTE);\n    if (currentHour != desiredCalendar.get(Calendar.HOUR_OF_DAY) || currentMinute != desiredCalendar.get(Calendar.MINUTE)) {\n            return; // Do not show notification if current time does not match desired time\n        }\n\n        // Retrieve all courses from the database\n        AppDatabase db = AppDatabase.getInstance(context);\n        CourseDAO courseDao = db.courseDAO();\n        AssessmentDAO assessmentDao = db.assessmentDAO();\n        List&lt;CourseTable&gt; courses = courseDao.getAllCourses();\n        List&lt;AssessmentTable&gt; assessments = assessmentDao.getAllAssessments();\n\n        // Iterate over each course to check start and end dates\n        for (CourseTable course : courses) {\n            Date currentDate = new Date();\n            String startDateString = course.getStartDate();\n            String endDateString = course.getEndDate();\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n            try {\n                Date startDate = dateFormat.parse(startDateString);\n                Date endDate = dateFormat.parse(endDateString);\n                if (!currentDate.equals(startDate) &amp;&amp; !currentDate.equals(endDate)) {\n                    continue; // If current date does not match start or end date of course, skip to next course\n                }\n            } catch (ParseException e) {\n                e.printStackTrace();\n                continue; // If there is a parse exception, skip to next course\n            }\n            // If current date matches start or end date of course, show notification\n            showNotification(context, course.getCourseTitle(), &quot;Course &quot; + course.getCourseTitle() + &quot; starts or ends today&quot;);\n        }\n\n        for (AssessmentTable assessment : assessments) {\n            Date currentDate = new Date();\n            String dueDateString = assessment.getDueDate();\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n            try {\n                Date dueDate = dateFormat.parse(dueDateString);\n                if (!currentDate.equals(dueDate)) {\n                    continue; // If current date does not match start or end date of course, skip to next course\n                }\n            } catch (ParseException e) {\n                e.printStackTrace();\n                continue; // If there is a parse exception, skip to next course\n            }\n            // If current date matches start or end date of course, show notification\n            showNotification(context, assessment.getTitle(), &quot;Assessment &quot; + assessment.getTitle() + &quot; is due today&quot;);\n        }\n    }\n\n\n    @SuppressLint(&quot;MissingPermission&quot;)\n    private void showNotification(Context context, String title, String message) {\n        // Create the notification\n        createNotificationChannel(context);\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(context, CHANNEL_ID)\n                .setSmallIcon(R.drawable.notification)\n                .setContentTitle(title)\n                .setContentText(message)\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT);\n        NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\n        notificationManager.notify(0, builder.build());\n    }\n\n    private void createNotificationChannel(Context context) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            CharSequence name = context.getString(R.string.channel_name);\n            String description = context.getString(R.string.channel_description);\n            int importance = NotificationManager.IMPORTANCE_DEFAULT;\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name, importance);\n            channel.setDescription(description);\n            NotificationManager notificationManager = context.getSystemService(NotificationManager.class);\n            notificationManager.createNotificationChannel(channel);\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","eclipse","maven","pom.xml","junit5"],"comments":[{"owner":{"account_id":15361,"reputation":4976,"user_id":32352,"accept_rate":62,"display_name":"johanneslink"},"score":0,"creation_date":1679465189,"post_id":75805248,"comment_id":133725078,"body_markdown":"I recommend you go with the setup in https://github.com/junit-team/junit5-samples/blob/r5.9.2/junit5-jupiter-starter-maven/pom.xml. It’s simpler and using the latest versions.","body":"I recommend you go with the setup in <a href=\"https://github.com/junit-team/junit5-samples/blob/r5.9.2/junit5-jupiter-starter-maven/pom.xml\" rel=\"nofollow noreferrer\">github.com/junit-team/junit5-samples/blob/r5.9.2/&hellip;</a>. It’s simpler and using the latest versions."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1679469241,"post_id":75805248,"comment_id":133725641,"body_markdown":"Your cropped screenshot shows JUnit JARs that are not added via Maven but via Eclipse directly. Does right-clicking the project and choosing _Maven &gt; Update Project..._ fix your issue (there should be then a _Maven Dependencies_ node). Otherwise, show an uncropped screenshot and your full `pom.xml` and your `.classpath` file.","body":"Your cropped screenshot shows JUnit JARs that are not added via Maven but via Eclipse directly. Does right-clicking the project and choosing <i>Maven &gt; Update Project...</i> fix your issue (there should be then a <i>Maven Dependencies</i> node). Otherwise, show an uncropped screenshot and your full <code>pom.xml</code> and your <code>.classpath</code> file."},{"owner":{"account_id":27574219,"reputation":1,"user_id":21044784,"display_name":"Lucas"},"score":0,"creation_date":1679568590,"post_id":75805248,"comment_id":133746381,"body_markdown":"Ah I see! Thank you very much for both of your suggestions; I&#39;ll try later and see if I can get it working.","body":"Ah I see! Thank you very much for both of your suggestions; I&#39;ll try later and see if I can get it working."}],"owner":{"account_id":27574219,"reputation":1,"user_id":21044784,"display_name":"Lucas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679424207,"creation_date":1679424207,"question_id":75805248,"body_markdown":"For context, this is a Java project in Eclipse, using Maven and JUnit5.\r\n\r\nSo, I have the dependencies listed in my pom:\r\n```\r\n &lt;dependencies&gt;\r\n    &lt;!--  Junit5 --&gt; \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n      &lt;version&gt;5.7.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-platform-runner&lt;/artifactId&gt;\r\n      &lt;version&gt;1.7.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n      &lt;version&gt;5.7.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n  &lt;/dependencies&gt;\r\n  \r\n  &lt;build&gt;\r\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n    &lt;plugins&gt;\r\n    \r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.22.0&lt;/version&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n              &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n              &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\r\n              &lt;version&gt;1.2.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;configuration&gt;\r\n          &lt;additionalClasspathElements&gt;\r\n            &lt;additionalClasspathElement&gt;src/test/java/&lt;/additionalClasspathElement&gt;\r\n          &lt;/additionalClasspathElements&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    \r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;release&gt;14&lt;/release&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  \r\n  &lt;reporting&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.22.0&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/reporting&gt;\r\n```\r\n\r\nBut its still complaining that the API doesn&#39;t exist when I try running mvn test. My JUnit5 folder looks like:\r\n[JUnit5 Folder](https://i.stack.imgur.com/dAYcP.png)\r\n\r\nSo its definitely there, and I think the versions are all in order with what I have in the pom. Its not having any issues with the others, only with the API.\r\n\r\nAny help would be much appreciated.\r\nThank you very much.","title":"Maven &quot;package org.junit.jupiter.api does not exist&quot;","body":"<p>For context, this is a Java project in Eclipse, using Maven and JUnit5.</p>\n<p>So, I have the dependencies listed in my pom:</p>\n<pre><code> &lt;dependencies&gt;\n    &lt;!--  Junit5 --&gt; \n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n      &lt;version&gt;5.7.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-platform-runner&lt;/artifactId&gt;\n      &lt;version&gt;1.7.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n      &lt;version&gt;5.7.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n  &lt;/dependencies&gt;\n  \n  &lt;build&gt;\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;plugins&gt;\n    \n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.22.0&lt;/version&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n              &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n              &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\n              &lt;version&gt;1.2.0&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n        &lt;configuration&gt;\n          &lt;additionalClasspathElements&gt;\n            &lt;additionalClasspathElement&gt;src/test/java/&lt;/additionalClasspathElement&gt;\n          &lt;/additionalClasspathElements&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    \n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;release&gt;14&lt;/release&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  \n  &lt;reporting&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.22.0&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/reporting&gt;\n</code></pre>\n<p>But its still complaining that the API doesn't exist when I try running mvn test. My JUnit5 folder looks like:\n<a href=\"https://i.stack.imgur.com/dAYcP.png\" rel=\"nofollow noreferrer\">JUnit5 Folder</a></p>\n<p>So its definitely there, and I think the versions are all in order with what I have in the pom. Its not having any issues with the others, only with the API.</p>\n<p>Any help would be much appreciated.\nThank you very much.</p>\n"},{"tags":["java","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":14946817,"reputation":91,"user_id":10791845,"display_name":"atakansaltik"},"score":1,"creation_date":1656511003,"post_id":72789425,"comment_id":128591022,"body_markdown":"Take a look at this [link](https://stackoverflow.com/questions/4075991/post-request-via-resttemplate-in-json) I think this approach could work for your case","body":"Take a look at this <a href=\"https://stackoverflow.com/questions/4075991/post-request-via-resttemplate-in-json\">link</a> I think this approach could work for your case"}],"answers":[{"comments":[{"owner":{"account_id":1510734,"reputation":2131,"user_id":1412939,"display_name":"Philip Adler"},"score":1,"creation_date":1679393511,"post_id":75790212,"comment_id":133709745,"body_markdown":"Hi @RITICK SAINI; welcome to stack overflow. Please read &quot;[How to Answer](https://stackoverflow.com/help/how-to-answer)&quot; and &quot;[Explaining entirely code-based answers](https://meta.stackoverflow.com/questions/392712/explaining-entirely-code-based-answers)&quot;. It helps more if you supply an explanation why this is the preferred solution and explain how it works. We want to educate, not just provide code.","body":"Hi @RITICK SAINI; welcome to stack overflow. Please read &quot;<a href=\"https://stackoverflow.com/help/how-to-answer\">How to Answer</a>&quot; and &quot;<a href=\"https://meta.stackoverflow.com/questions/392712/explaining-entirely-code-based-answers\">Explaining entirely code-based answers</a>&quot;. It helps more if you supply an explanation why this is the preferred solution and explain how it works. We want to educate, not just provide code."}],"tags":[],"owner":{"account_id":28065380,"reputation":1,"user_id":21438846,"display_name":"RITICK SAINI"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679315578,"creation_date":1679314917,"answer_id":75790212,"question_id":72789425,"body_markdown":"    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n            \r\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(requestJson, \r\n    headers);\r\n    ResponseEntity&lt;String&gt; response = restTemplate.put(url, entity);","title":"How to wrap a String body and headers into a HttpEntity object for POST request in Spring Boot?","body":"<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.APPLICATION_JSON);\n        \nHttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(requestJson, \nheaders);\nResponseEntity&lt;String&gt; response = restTemplate.put(url, entity);\n</code></pre>\n"}],"owner":{"account_id":11493427,"reputation":147,"user_id":10156536,"display_name":"Aditi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":542,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679424094,"creation_date":1656430647,"question_id":72789425,"body_markdown":"Here , what I am trying to achieve is the following \r\n\r\n1. I have already got the body of the request to be made using the @RequestBody annotation .. which is in a String Format\r\n2. The body contains many nested parameters .. it is also pretty huge .. something like\r\n\r\n  \r\n```\r\n{\r\n  name : XYZ\r\n  age : 21 \r\n  education : {\r\n    primaryschool : XYZ-ABC\r\n    secondary school : ABC-123\r\n    SubjectsChosen : {Science,Maths}\r\n}}\r\n```\r\nthis is still an oversimplification , the whole request body contains many nested parameters too\r\n\r\nWhat I am trying to achieve is to wrap up the String body along with Headers into a HttpRequestEntity, that I can send along with PostForObject.\r\n\r\nIs there a way to achieve this to directly convert the String .. without creating an explicit java class for each of the variables in the body as the body is quite huge ?\r\n","title":"How to wrap a String body and headers into a HttpEntity object for POST request in Spring Boot?","body":"<p>Here , what I am trying to achieve is the following</p>\n<ol>\n<li>I have already got the body of the request to be made using the @RequestBody annotation .. which is in a String Format</li>\n<li>The body contains many nested parameters .. it is also pretty huge .. something like</li>\n</ol>\n<pre><code>{\n  name : XYZ\n  age : 21 \n  education : {\n    primaryschool : XYZ-ABC\n    secondary school : ABC-123\n    SubjectsChosen : {Science,Maths}\n}}\n</code></pre>\n<p>this is still an oversimplification , the whole request body contains many nested parameters too</p>\n<p>What I am trying to achieve is to wrap up the String body along with Headers into a HttpRequestEntity, that I can send along with PostForObject.</p>\n<p>Is there a way to achieve this to directly convert the String .. without creating an explicit java class for each of the variables in the body as the body is quite huge ?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9667,"page":558,"page_size":100}
