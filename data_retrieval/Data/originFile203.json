{"items":[{"tags":["java","spring","encoding","utf-8","spring-boot"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":2,"creation_date":1464181021,"post_id":37436927,"comment_id":62378307,"body_markdown":"I remember reading somewhere that Java expects that `*.properties` files are encoded in ISO-8859-1 and that&#39;s why Spring treats `application.properties` as if it&#39;s in ISO-8859-1. See this question: [Spring Boot default properties encoding change?](http://stackoverflow.com/questions/27882191/spring-boot-default-properties-encoding-change). Possible solution: Use YAML instead of properties files.","body":"I remember reading somewhere that Java expects that <code>*.properties</code> files are encoded in ISO-8859-1 and that&#39;s why Spring treats <code>application.properties</code> as if it&#39;s in ISO-8859-1. See this question: <a href=\"http://stackoverflow.com/questions/27882191/spring-boot-default-properties-encoding-change\">Spring Boot default properties encoding change?</a>. Possible solution: Use YAML instead of properties files."},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1464181759,"post_id":37436927,"comment_id":62378951,"body_markdown":"@Jesper yes, I checked this answer, too. Still hoping there is maybe another solution for properties files.","body":"@Jesper yes, I checked this answer, too. Still hoping there is maybe another solution for properties files."}],"answers":[{"tags":[],"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"down_vote_count":1,"up_vote_count":29,"is_accepted":true,"score":28,"last_activity_date":1681985223,"creation_date":1464182048,"answer_id":37438330,"question_id":37436927,"body_markdown":"As already mentioned in the comments .properties files are expected to be encoded in ISO 8859-1. One can use unicode escapes to specify other characters. There is also a [tool][1] available to do the conversion. This can for instance be used in the automatic build so that you still can use your favorite encoding in the source.\r\n\r\nBe sure to read also the other answers for some alternatives. There are ways to specify the encoding for properties.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/native2ascii.html","title":"UTF-8 encoding of application.properties attributes in Spring-Boot","body":"<p>As already mentioned in the comments .properties files are expected to be encoded in ISO 8859-1. One can use unicode escapes to specify other characters. There is also a <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/native2ascii.html\" rel=\"nofollow noreferrer\">tool</a> available to do the conversion. This can for instance be used in the automatic build so that you still can use your favorite encoding in the source.</p>\n<p>Be sure to read also the other answers for some alternatives. There are ways to specify the encoding for properties.</p>\n"},{"tags":[],"owner":{"account_id":2442097,"reputation":208,"user_id":2130300,"display_name":"merz"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1693856482,"creation_date":1465268085,"answer_id":37669777,"question_id":37436927,"body_markdown":"I&#39;ve faced with the same problem.\r\nIn Spring Boot there are 2 PropertySourceLoader which are used to load properties in application:\r\n\r\n - **PropertiesPropertySourceLoader** - supports UTF-8 only when load from XML\r\n - **YamlPropertySourceLoader** - supports UTF-8, but you have to change configuration format to use it\r\n\r\nThey&#39;re listed in the file https://github.com/spring-projects/spring-boot/blob/master/spring-boot/src/main/resources/META-INF/spring.factories\r\n\r\nSo we decided to write our own implementation of PropertySourceLoader which would be able to load properties from UTF-8 file correctly. The idea is from answer @BalusC - https://stackoverflow.com/questions/4659929/how-to-use-utf-8-in-resource-properties-with-resourcebundle/4660195#4660195\r\n\r\nOur PropertySourceLoader implementation:\r\n\r\n    import org.springframework.core.Ordered;\r\n    import org.springframework.core.annotation.Order;\r\n\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public class UnicodePropertiesPropertySourceLoader implements PropertySourceLoader {\r\n\r\n    @Override\r\n    public String[] getFileExtensions() {\r\n        return new String[]{&quot;properties&quot;};\r\n    }\r\n\r\n    @Override\r\n    public PropertySource&lt;?&gt; load(String name, Resource resource, String profile) throws IOException {\r\n        if (profile == null) {\r\n            Properties properties = new Properties();\r\n            PropertyResourceBundle bundle = new PropertyResourceBundle(new InputStreamReader(resource.getInputStream(), &quot;UTF-8&quot;));\r\n            Enumeration&lt;String&gt; keys = bundle.getKeys();\r\n            while (keys.hasMoreElements()) {\r\n                String key = keys.nextElement();\r\n                properties.setProperty(key, bundle.getString(key));\r\n            }\r\n            if (!properties.isEmpty()) {\r\n                return new PropertiesPropertySource(name, properties);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    }\r\n\r\nThen we created file **resources/META-INF/spring.factories** with content:\r\n\r\n    # Custom PropertySource Loaders\r\n    org.springframework.boot.env.PropertySourceLoader=\\\r\n    your.own.package.UnicodePropertiesPropertySourceLoader\r\n\r\nNow we have 3 PropertySourceLoader in our application in following order:\r\n\r\n - UnicodePropertiesPropertySourceLoader\r\n - PropertiesPropertySourceLoader\r\n - YamlPropertySourceLoader\r\n\r\nNOTES!\r\n\r\n 1. I&#39;m not sure that it is proper usage of PropertyResourceBundle\r\n 2. I&#39;m not sure that order of PropertySourceLoaders in Spring Boot will be the same if you make a dedicated library to reuse it in other projects.\r\n\r\nIn our project this solution works fine.\r\n\r\nUPDATE!\r\n\r\nIt&#39;s better to implement load method of UnicodePropertiesPropertySourceLoader without PropertyResourceBundle:\r\n\r\n    @Override\r\n    public PropertySource&lt;?&gt; load(String name, Resource resource, String profile) throws IOException {\r\n        if (profile == null) {\r\n            Properties properties = new Properties();\r\n            properties.load(new InputStreamReader(resource.getInputStream(), &quot;UTF-8&quot;));\r\n            if (!properties.isEmpty()) {\r\n                return new PropertiesPropertySource(name, properties);\r\n            }\r\n        }\r\n        return null;\r\n    }","title":"UTF-8 encoding of application.properties attributes in Spring-Boot","body":"<p>I've faced with the same problem.\nIn Spring Boot there are 2 PropertySourceLoader which are used to load properties in application:</p>\n<ul>\n<li><strong>PropertiesPropertySourceLoader</strong> - supports UTF-8 only when load from XML</li>\n<li><strong>YamlPropertySourceLoader</strong> - supports UTF-8, but you have to change configuration format to use it</li>\n</ul>\n<p>They're listed in the file <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot/src/main/resources/META-INF/spring.factories\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/blob/master/spring-boot/src/main/resources/META-INF/spring.factories</a></p>\n<p>So we decided to write our own implementation of PropertySourceLoader which would be able to load properties from UTF-8 file correctly. The idea is from answer @BalusC - <a href=\"https://stackoverflow.com/questions/4659929/how-to-use-utf-8-in-resource-properties-with-resourcebundle/4660195#4660195\">How to use UTF-8 in resource properties with ResourceBundle</a></p>\n<p>Our PropertySourceLoader implementation:</p>\n<pre><code>import org.springframework.core.Ordered;\nimport org.springframework.core.annotation.Order;\n\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class UnicodePropertiesPropertySourceLoader implements PropertySourceLoader {\n\n@Override\npublic String[] getFileExtensions() {\n    return new String[]{&quot;properties&quot;};\n}\n\n@Override\npublic PropertySource&lt;?&gt; load(String name, Resource resource, String profile) throws IOException {\n    if (profile == null) {\n        Properties properties = new Properties();\n        PropertyResourceBundle bundle = new PropertyResourceBundle(new InputStreamReader(resource.getInputStream(), &quot;UTF-8&quot;));\n        Enumeration&lt;String&gt; keys = bundle.getKeys();\n        while (keys.hasMoreElements()) {\n            String key = keys.nextElement();\n            properties.setProperty(key, bundle.getString(key));\n        }\n        if (!properties.isEmpty()) {\n            return new PropertiesPropertySource(name, properties);\n        }\n    }\n    return null;\n}\n\n}\n</code></pre>\n<p>Then we created file <strong>resources/META-INF/spring.factories</strong> with content:</p>\n<pre><code># Custom PropertySource Loaders\norg.springframework.boot.env.PropertySourceLoader=\\\nyour.own.package.UnicodePropertiesPropertySourceLoader\n</code></pre>\n<p>Now we have 3 PropertySourceLoader in our application in following order:</p>\n<ul>\n<li>UnicodePropertiesPropertySourceLoader</li>\n<li>PropertiesPropertySourceLoader</li>\n<li>YamlPropertySourceLoader</li>\n</ul>\n<p>NOTES!</p>\n<ol>\n<li>I'm not sure that it is proper usage of PropertyResourceBundle</li>\n<li>I'm not sure that order of PropertySourceLoaders in Spring Boot will be the same if you make a dedicated library to reuse it in other projects.</li>\n</ol>\n<p>In our project this solution works fine.</p>\n<p>UPDATE!</p>\n<p>It's better to implement load method of UnicodePropertiesPropertySourceLoader without PropertyResourceBundle:</p>\n<pre><code>@Override\npublic PropertySource&lt;?&gt; load(String name, Resource resource, String profile) throws IOException {\n    if (profile == null) {\n        Properties properties = new Properties();\n        properties.load(new InputStreamReader(resource.getInputStream(), &quot;UTF-8&quot;));\n        if (!properties.isEmpty()) {\n            return new PropertiesPropertySource(name, properties);\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1354333,"reputation":2440,"user_id":1293060,"accept_rate":49,"display_name":"May12"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1511172112,"creation_date":1511172112,"answer_id":47389354,"question_id":37436927,"body_markdown":"Please, try to add `PropertySource` annotation with encoding parameter into your Configuaration file: \r\n\r\n    @PropertySource(value = &quot;classpath:application-${env}.properties&quot;, encoding = &quot;UTF-8&quot;)\r\n\r\nHope it helps. ","title":"UTF-8 encoding of application.properties attributes in Spring-Boot","body":"<p>Please, try to add <code>PropertySource</code> annotation with encoding parameter into your Configuaration file: </p>\n\n<pre><code>@PropertySource(value = \"classpath:application-${env}.properties\", encoding = \"UTF-8\")\n</code></pre>\n\n<p>Hope it helps. </p>\n"},{"tags":[],"owner":{"account_id":14290121,"reputation":51,"user_id":10322362,"display_name":"Aleksey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1536563164,"creation_date":1536309495,"answer_id":52218631,"question_id":37436927,"body_markdown":"To set the UTF-8 encoding for the text in the application.properties (and any other Java properties as well as environment variables) add `-Dfile.encoding=UTF-8` to java command line agrs.","title":"UTF-8 encoding of application.properties attributes in Spring-Boot","body":"<p>To set the UTF-8 encoding for the text in the application.properties (and any other Java properties as well as environment variables) add <code>-Dfile.encoding=UTF-8</code> to java command line agrs.</p>\n"},{"tags":[],"owner":{"account_id":3427226,"reputation":154,"user_id":2872686,"display_name":"gischy"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1570824310,"creation_date":1570824310,"answer_id":58347813,"question_id":37436927,"body_markdown":"just converted the text with the special chars with https://native2ascii.net/ ","title":"UTF-8 encoding of application.properties attributes in Spring-Boot","body":"<p>just converted the text with the special chars with <a href=\"https://native2ascii.net/\" rel=\"noreferrer\">https://native2ascii.net/</a> </p>\n"}],"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83232,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":37438330,"answer_count":5,"score":38,"last_activity_date":1693856482,"creation_date":1464178777,"question_id":37436927,"body_markdown":"In my `application.properties` I add some custom attributes.\r\n\r\n    custom.mail.property.subject-message=This is a &#228; &#246; &#252; &#223; problem\r\n\r\nIn this class I have the representation of the custom attributes.\r\n\r\n    @Component\r\n    @ConfigurationProperties(prefix=&quot;custom.mail.property&quot;)\r\n    public class MailProperties {\r\n    \tprivate String subjectMessage;\r\n    \tpublic String getSubjectMessage() {\r\n    \t\treturn subjectMessage;\r\n    \t}\r\n    \tpublic void setSubjectMessage(String subjectMessage) {\r\n    \t\tthis.subjectMessage = subjectMessage;\r\n    \t}\r\n\r\nAnd here I use my `MailProperties`:\r\n\r\n    @Service\r\n    public class SimpleUnknownResponseMessage extends MailProperties implements UnknownResponseMessage{\r\n    \t\r\n    \tprivate JavaMailSender javaMailSender;\r\n    \t\r\n    \t@Autowired\r\n    \tpublic SimpleUnknownResponseMessage(JavaMailSender javaMailSender) {\r\n    \t\tthis.javaMailSender = javaMailSender;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void placeUnknownResponse(BookResponse bookResponse) {\r\n    \t\tMimeMessage message = javaMailSender.createMimeMessage();\r\n    \t\ttry {\r\n    \t\t\tMimeMessageHelper helper = new MimeMessageHelper(message, &quot;UTF-8&quot;);\r\n    \t\t\thelper.setSubject(this.getSubjectMessage()); \t\t\t\r\n    \t\t\tjavaMailSender.send(message);\r\n    \t\t\t\r\n    \t\t} catch (MessagingException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n\r\n**While debugging I can see that my `this.getSubjectMessage()` variable has this value inside: `This is a &#195;&#164; &#195;&#182; &#195;&#188; &#195; problem`. So before sending my mail I already have an UTF-8 encoding problem.** \r\n\r\nI already checked the encoding of the `application.properties` file and its UTF-8. \r\n\r\nMy IDE(STS/Eclipse) and the project properties are also set on UTF-8. \r\n\r\n**How can I set the UTF-8 encoding for the text of my custom attributes in the `application.properties` file?**\r\n","title":"UTF-8 encoding of application.properties attributes in Spring-Boot","body":"<p>In my <code>application.properties</code> I add some custom attributes.</p>\n\n<pre><code>custom.mail.property.subject-message=This is a ä ö ü ß problem\n</code></pre>\n\n<p>In this class I have the representation of the custom attributes.</p>\n\n<pre><code>@Component\n@ConfigurationProperties(prefix=\"custom.mail.property\")\npublic class MailProperties {\n    private String subjectMessage;\n    public String getSubjectMessage() {\n        return subjectMessage;\n    }\n    public void setSubjectMessage(String subjectMessage) {\n        this.subjectMessage = subjectMessage;\n    }\n</code></pre>\n\n<p>And here I use my <code>MailProperties</code>:</p>\n\n<pre><code>@Service\npublic class SimpleUnknownResponseMessage extends MailProperties implements UnknownResponseMessage{\n\n    private JavaMailSender javaMailSender;\n\n    @Autowired\n    public SimpleUnknownResponseMessage(JavaMailSender javaMailSender) {\n        this.javaMailSender = javaMailSender;\n    }\n\n    @Override\n    public void placeUnknownResponse(BookResponse bookResponse) {\n        MimeMessage message = javaMailSender.createMimeMessage();\n        try {\n            MimeMessageHelper helper = new MimeMessageHelper(message, \"UTF-8\");\n            helper.setSubject(this.getSubjectMessage());            \n            javaMailSender.send(message);\n\n        } catch (MessagingException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n\n<p><strong>While debugging I can see that my <code>this.getSubjectMessage()</code> variable has this value inside: <code>This is a Ã¤ Ã¶ Ã¼ Ã problem</code>. So before sending my mail I already have an UTF-8 encoding problem.</strong> </p>\n\n<p>I already checked the encoding of the <code>application.properties</code> file and its UTF-8. </p>\n\n<p>My IDE(STS/Eclipse) and the project properties are also set on UTF-8. </p>\n\n<p><strong>How can I set the UTF-8 encoding for the text of my custom attributes in the <code>application.properties</code> file?</strong></p>\n"},{"tags":["java","outputstream"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":3,"creation_date":1693734033,"post_id":77031706,"comment_id":135797187,"body_markdown":"What kind of stream are you writing to? Generally you can output as many bytes as you want.","body":"What kind of stream are you writing to? Generally you can output as many bytes as you want."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1693734795,"post_id":77031706,"comment_id":135797259,"body_markdown":"What is your motivation for asking?","body":"What is your motivation for asking?"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":6,"creation_date":1693734844,"post_id":77031706,"comment_id":135797261,"body_markdown":"If an output stream is closed, it will throw an exception. Otherwise, you can assume you can continue to write.","body":"If an output stream is closed, it will throw an exception. Otherwise, you can assume you can continue to write."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693736384,"post_id":77031706,"comment_id":135797405,"body_markdown":"@marcinj That is about sockets.","body":"@marcinj That is about sockets."},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":1,"creation_date":1693736933,"post_id":77031706,"comment_id":135797449,"body_markdown":"@MarkRotteveel right, that was wrong link. OutputStream implementation should throw exception if stream is closed, or any timeout for it is over (if it allows for timeouts).","body":"@MarkRotteveel right, that was wrong link. OutputStream implementation should throw exception if stream is closed, or any timeout for it is over (if it allows for timeouts)."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1693752773,"post_id":77031706,"comment_id":135799106,"body_markdown":"By definition, an InputStream reaches its end when there is no more data, and an OutputStream has no more data when the sender determines it has nothing left to send.  The receiver doesn’t decide that;  the sender decides it.","body":"By definition, an InputStream reaches its end when there is no more data, and an OutputStream has no more data when the sender determines it has nothing left to send.  The receiver doesn’t decide that;  the sender decides it."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1693762589,"post_id":77031706,"comment_id":135800289,"body_markdown":"You can use this function to determine if you can still write to an OutputStream: `return true`.  This may look like a silly function, but it is correct.","body":"You can use this function to determine if you can still write to an OutputStream: <code>return true</code>.  This may look like a silly function, but it is correct."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1693857530,"post_id":77031706,"comment_id":135812444,"body_markdown":"Like others have said: write and check for an exception. `ByteArrayOutputStream` lets you write until you&#39;re out of memory, and then throws a `java.lang.OutOfMemoryError`. A network output stream may have a buffer and may block until the network is ready to send the next packet. If you write your own buffer or byte array based stream you could manage the buffer and block when it&#39;s full (probably expected), or throw when the buffer is full. Guess it depends on your actual use case.","body":"Like others have said: write and check for an exception. <code>ByteArrayOutputStream</code> lets you write until you&#39;re out of memory, and then throws a <code>java.lang.OutOfMemoryError</code>. A network output stream may have a buffer and may block until the network is ready to send the next packet. If you write your own buffer or byte array based stream you could manage the buffer and block when it&#39;s full (probably expected), or throw when the buffer is full. Guess it depends on your actual use case."}],"owner":{"account_id":9149557,"reputation":1927,"user_id":6804605,"accept_rate":75,"display_name":"FredSuvn"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1693856272,"creation_date":1693733685,"question_id":77031706,"body_markdown":"How to know if an `OutputStream` can continue writing in Java?\r\n\r\nFor `InputStream`, we can check whether `return` equals `-1` to know if the input stream has ended, but how do I check for `OutputStream`?\r\n\r\n-------------------------------\r\n\r\nWhy do I ask this question? For example, I need to write data into a byte array or a buffer, but the methods provided by the API only have parameters of `OutputStream` type. How can I make my `OutputStream` implementation tell the API that the array/buffer has been full?","title":"How to know if an OutputStream can continue writing in Java?","body":"<p>How to know if an <code>OutputStream</code> can continue writing in Java?</p>\n<p>For <code>InputStream</code>, we can check whether <code>return</code> equals <code>-1</code> to know if the input stream has ended, but how do I check for <code>OutputStream</code>?</p>\n<hr />\n<p>Why do I ask this question? For example, I need to write data into a byte array or a buffer, but the methods provided by the API only have parameters of <code>OutputStream</code> type. How can I make my <code>OutputStream</code> implementation tell the API that the array/buffer has been full?</p>\n"},{"tags":["java","multithreading","threadpoolexecutor"],"comments":[{"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1693809137,"post_id":77035478,"comment_id":135804262,"body_markdown":"What syntax is `HashMap&lt;String,String&gt; packet = new HashMap&lt;String,String&gt; packetQueue.take();`? Is it compilable?","body":"What syntax is <code>HashMap&lt;String,String&gt; packet = new HashMap&lt;String,String&gt; packetQueue.take();</code>? Is it compilable?"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":2,"creation_date":1693809340,"post_id":77035478,"comment_id":135804284,"body_markdown":"Please provide an [mcve]. This doesn&#39;t compile (see @HonzaZidek&#39;s comment), and it&#39;s hard to tell where data is coming from or how you decide that you &quot;lose threads&quot; - not sure what you mean by that either.","body":"Please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This doesn&#39;t compile (see @HonzaZidek&#39;s comment), and it&#39;s hard to tell where data is coming from or how you decide that you &quot;lose threads&quot; - not sure what you mean by that either."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1693809594,"post_id":77035478,"comment_id":135804314,"body_markdown":"I wouldn&#39;t pass `Thread` to `execute`, rather just `exe.submit(() -&gt; myTask(packet));`.","body":"I wouldn&#39;t pass <code>Thread</code> to <code>execute</code>, rather just <code>exe.submit(() -&gt; myTask(packet));</code>."},{"owner":{"account_id":6931114,"reputation":1,"user_id":6108505,"display_name":"nguvi"},"score":0,"creation_date":1693809620,"post_id":77035478,"comment_id":135804316,"body_markdown":"@Honza Zidek, so sorry! Forgot to add that it comes from blocking queue.","body":"@Honza Zidek, so sorry! Forgot to add that it comes from blocking queue."},{"owner":{"account_id":6931114,"reputation":1,"user_id":6108505,"display_name":"nguvi"},"score":0,"creation_date":1693810002,"post_id":77035478,"comment_id":135804364,"body_markdown":"@daniu should I poste the whole code for the capture of the interface? I thought it may be too much. I edited how I noticed that some tasks where not executed.","body":"@daniu should I poste the whole code for the capture of the interface? I thought it may be too much. I edited how I noticed that some tasks where not executed."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1693810017,"post_id":77035478,"comment_id":135804372,"body_markdown":"Why do you create a `new HashMap` every time you take out a packet? Why do you put packets into a blocking queue in the first place, rather than immediately adding the processing task to the queue the executor service already provides? Are you only counting threads or keeping track of how many packets are processed as opposed to received?","body":"Why do you create a <code>new HashMap</code> every time you take out a packet? Why do you put packets into a blocking queue in the first place, rather than immediately adding the processing task to the queue the executor service already provides? Are you only counting threads or keeping track of how many packets are processed as opposed to received?"},{"owner":{"account_id":6931114,"reputation":1,"user_id":6108505,"display_name":"nguvi"},"score":0,"creation_date":1693810333,"post_id":77035478,"comment_id":135804421,"body_markdown":"@Kayaman omg! I sat with this problem for days! Thank you very very much! That was the key. Could you help me understand this further to why it made such a big difference? I saw some other questions here regarding sumit() and execute() (ie https://stackoverflow.com/questions/18730290/what-is-the-difference-between-executorservice-submit-and-executorservice-execut) but couldn&#39;t see the relevance to my issue.","body":"@Kayaman omg! I sat with this problem for days! Thank you very very much! That was the key. Could you help me understand this further to why it made such a big difference? I saw some other questions here regarding sumit() and execute() (ie <a href=\"https://stackoverflow.com/questions/18730290/what-is-the-difference-between-executorservice-submit-and-executorservice-execut\" title=\"what is the difference between executorservice submit and executorservice execut\">stackoverflow.com/questions/18730290/&hellip;</a>) but couldn&#39;t see the relevance to my issue."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693814747,"post_id":77035478,"comment_id":135805079,"body_markdown":"“i&#39;m loosing 15 Percent” — Losing 15% of *what*?","body":"“i&#39;m loosing 15 Percent” — Losing 15% of <i>what</i>?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1693830760,"post_id":77035478,"comment_id":135807911,"body_markdown":"It’s a huge historical design mistake that `Thread` implements the `Runnable` interface. I don’t know any place where a `Runnable` is expected and passing a `Thread` would be appropriate. The whole point of a `ThreadPoolExecutor` is that you should not deal with instances of `Thread` yourself.","body":"It’s a huge historical design mistake that <code>Thread</code> implements the <code>Runnable</code> interface. I don’t know any place where a <code>Runnable</code> is expected and passing a <code>Thread</code> would be appropriate. The whole point of a <code>ThreadPoolExecutor</code> is that you should not deal with instances of <code>Thread</code> yourself."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1693834058,"post_id":77035478,"comment_id":135808574,"body_markdown":"If you are monitoring by observing `count` and `countTh`, don’t expect those fields to be accurate unless you make them `volatile`.  See [the Java Language Specification](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.3) for an explanation.","body":"If you are monitoring by observing <code>count</code> and <code>countTh</code>, don’t expect those fields to be accurate unless you make them <code>volatile</code>.  See <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.3\" rel=\"nofollow noreferrer\">the Java Language Specification</a> for an explanation."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":2,"creation_date":1693843079,"post_id":77035478,"comment_id":135810312,"body_markdown":"You are conflating threads with _tasks._ A thread (represented by a `Thread` instance) is an entity that does work. A task (represented by anything that `implements Runnable`) is a piece of work that needs to be done. Don&#39;t mix them up. Like @Holger said, it&#39;s a minor tragedy that Java designers allowed you to use the same class `Thread` in either role, but if you keep those ideas separate—use `Runnable` for tasks, and only use `Thread` when you&#39;re going to call `t.start()`—then your code will be easier to read, and other developers will be more likely to want to help you with it.","body":"You are conflating threads with <i>tasks.</i> A thread (represented by a <code>Thread</code> instance) is an entity that does work. A task (represented by anything that <code>implements Runnable</code>) is a piece of work that needs to be done. Don&#39;t mix them up. Like @Holger said, it&#39;s a minor tragedy that Java designers allowed you to use the same class <code>Thread</code> in either role, but if you keep those ideas separate—use <code>Runnable</code> for tasks, and only use <code>Thread</code> when you&#39;re going to call <code>t.start()</code>—then your code will be easier to read, and other developers will be more likely to want to help you with it."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1693843094,"post_id":77035478,"comment_id":135810317,"body_markdown":"@VGR even declaring the counters `volatile` will not make the `++` operator atomic, hence, does not solve the problem.","body":"@VGR even declaring the counters <code>volatile</code> will not make the <code>++</code> operator atomic, hence, does not solve the problem."},{"owner":{"account_id":6931114,"reputation":1,"user_id":6108505,"display_name":"nguvi"},"score":0,"creation_date":1693901482,"post_id":77035478,"comment_id":135816938,"body_markdown":"Thank you all very much for your comments! A lot to learn for me!","body":"Thank you all very much for your comments! A lot to learn for me!"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693855927,"creation_date":1693815258,"answer_id":77036111,"question_id":77035478,"body_markdown":"## Limit your use of expensive platform threads\r\n\r\nWay too many threads. Generally, the rule of thumb is to limit all your active threads to less than the number of cores on the host machine. All threads used in Java 20 and earlier are “platform threads” meaning each is a wrapper around a host OS thread. Platform threads are expensive, and you should use few of them. \r\n\r\nDo not instantiate a thread for each task. Submit your tasks as [`Runnable`][1] or [`Callable`][2] to a `ExecutorService` that you instantiate once and then keep around. \r\n\r\n## Use `ExecutorService`\r\n\r\nWhy the cast to `ThreadPoolExecutor`? Just use [`ExecutorService`][3]. \r\n\r\nIn modern Java, we rarely need to deal explicitly with [`Thread`][4]. Instead of instantiating `Thread`, let an executor service manage threads on your behalf. See [Comment by Holger][5]. \r\n\r\n## Avoid `execute` if you want threading\r\n\r\nThe [`Executor#execute`][6] method is clearly documented saying the execution may or **may not** happen on another thread. To quote the Javadoc, my emphasis:\r\n\r\n&gt;Executes the given command at some time in the future. The command may execute in a new thread, in a pooled thread, *or in the calling thread*, at the discretion of the Executor implementation.\r\n\r\nSo, if you want threading, use the other methods such as `submit` or `invokeAll`.\r\n\r\n## Virtual threads\r\n\r\nSounds like your app is a good candidate to use the new [virtual threads][7] feature in Java 21. With virtual threads, you can reasonably run millions of threads at a time. They are vastly cheaper than platform threads. \r\n\r\n```Java\r\nBlockingQueue &lt; Map &lt; String , String &gt; &gt; packetQueue = … ;\r\ntry (\r\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor() ;\r\n) {\r\n    while ( someCondition ) \r\n    {\r\n        Map &lt; String , String &gt; map = packetQueue.take() ;\r\n        Runnable task = ()-&gt;{\r\n            myMapProcessor.process( map ) ;\r\n        };\r\n        executorService.submit( task ) ;\r\n    }\r\n}\r\n```\r\n\r\n## Thread-safe count of executions\r\n\r\nAs for “losing tasks”, you’ve not defined what you mean. Perhaps you mean counting each task execution. \r\n\r\nIf you want to count executions of your task method, establish an [`AtomicLong`][8] instance up front. [Increment][9] that count in your executing task code. Being atomic means the count will be accurate across threads. As Commented [by VGR][10] and [by Holger][11], your attempt to count executions was done incorrectly, in a manner not thread-safe. Your non-thread-safe counting may very well  account for your “losing tasks”. \r\n\r\n\r\n```java\r\nfinal AtomicLong countTaskExecutions = new AtomicLong( 0 ) ;\r\nBlockingQueue &lt; Map &lt; String , String &gt; &gt; packetQueue = … ;\r\ntry (\r\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor() ;\r\n) {\r\n    while ( someCondition ) \r\n    {\r\n        Map &lt; String , String &gt; map = packetQueue.take() ;\r\n        Runnable task = ()-&gt;{\r\n            countTaskExecutions.incrementAndGet() ;\r\n            myMapProcessor.process( map ) ;\r\n        };\r\n        executorService.submit( task ) ;\r\n    }\r\n}\r\nSystem.out.println( &quot;countTaskExecutions = &quot; + countTaskExecutions.get() ) ;\r\n```\r\n\r\n## Setting a flag across threads\r\n\r\nLikewise, if your `someCondition` is set and accessed across threads, make it an [`AtomicBoolean`][12]. \r\n\r\n```java\r\nfinal AtomicBoolean continueToProcessPackets = new AtomicBoolean( true ) ;\r\nfinal AtomicLong countTaskExecutions = new AtomicLong( 0 ) ;\r\nBlockingQueue &lt; Map &lt; String , String &gt; &gt; packetQueue = … ;\r\ntry (\r\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor() ;\r\n) {\r\n    while ( continueToProcessPackets.get() ) \r\n    {\r\n        Map &lt; String , String &gt; map = packetQueue.take() ;\r\n        Runnable task = ()-&gt;{\r\n            countTaskExecutions.incrementAndGet() ;\r\n            myMapProcessor.process( map ) ;\r\n        };\r\n        executorService.submit( task ) ;\r\n    }\r\n}\r\nSystem.out.println( &quot;countTaskExecutions = &quot; + countTaskExecutions.get() ) ;\r\n```\r\n\r\nNotice how we mark the atomic variables as\r\n`final` to ensure no other reference is substituted. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Runnable.html\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Callable.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html\r\n  [5]: https://stackoverflow.com/questions/77035478/java-multithreading-with-threadpools-loosing-tasks/77036111#comment135807911_77035478\r\n  [6]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Executor.html#execute(java.lang.Runnable)\r\n  [7]: https://openjdk.org/jeps/444\r\n  [8]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicLong.html\r\n  [9]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicLong.html#incrementAndGet()\r\n  [10]: https://stackoverflow.com/questions/77035478/java-multithreading-with-threadpools-loosing-tasks#comment135808574_77035478\r\n  [11]: https://stackoverflow.com/questions/77035478/java-multithreading-with-threadpools-loosing-tasks#comment135810317_77035478\r\n  [12]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html","title":"Java Multithreading with ThreadPools loosing Tasks","body":"<h2>Limit your use of expensive platform threads</h2>\n<p>Way too many threads. Generally, the rule of thumb is to limit all your active threads to less than the number of cores on the host machine. All threads used in Java 20 and earlier are “platform threads” meaning each is a wrapper around a host OS thread. Platform threads are expensive, and you should use few of them.</p>\n<p>Do not instantiate a thread for each task. Submit your tasks as <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Runnable.html\" rel=\"nofollow noreferrer\"><code>Runnable</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Callable.html\" rel=\"nofollow noreferrer\"><code>Callable</code></a> to a <code>ExecutorService</code> that you instantiate once and then keep around.</p>\n<h2>Use <code>ExecutorService</code></h2>\n<p>Why the cast to <code>ThreadPoolExecutor</code>? Just use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\"><code>ExecutorService</code></a>.</p>\n<p>In modern Java, we rarely need to deal explicitly with <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html\" rel=\"nofollow noreferrer\"><code>Thread</code></a>. Instead of instantiating <code>Thread</code>, let an executor service manage threads on your behalf. See <a href=\"https://stackoverflow.com/questions/77035478/java-multithreading-with-threadpools-loosing-tasks/77036111#comment135807911_77035478\">Comment by Holger</a>.</p>\n<h2>Avoid <code>execute</code> if you want threading</h2>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Executor.html#execute(java.lang.Runnable)\" rel=\"nofollow noreferrer\"><code>Executor#execute</code></a> method is clearly documented saying the execution may or <strong>may not</strong> happen on another thread. To quote the Javadoc, my emphasis:</p>\n<blockquote>\n<p>Executes the given command at some time in the future. The command may execute in a new thread, in a pooled thread, <em>or in the calling thread</em>, at the discretion of the Executor implementation.</p>\n</blockquote>\n<p>So, if you want threading, use the other methods such as <code>submit</code> or <code>invokeAll</code>.</p>\n<h2>Virtual threads</h2>\n<p>Sounds like your app is a good candidate to use the new <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">virtual threads</a> feature in Java 21. With virtual threads, you can reasonably run millions of threads at a time. They are vastly cheaper than platform threads.</p>\n<pre><code>BlockingQueue &lt; Map &lt; String , String &gt; &gt; packetQueue = … ;\ntry (\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor() ;\n) {\n    while ( someCondition ) \n    {\n        Map &lt; String , String &gt; map = packetQueue.take() ;\n        Runnable task = ()-&gt;{\n            myMapProcessor.process( map ) ;\n        };\n        executorService.submit( task ) ;\n    }\n}\n</code></pre>\n<h2>Thread-safe count of executions</h2>\n<p>As for “losing tasks”, you’ve not defined what you mean. Perhaps you mean counting each task execution.</p>\n<p>If you want to count executions of your task method, establish an <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicLong.html\" rel=\"nofollow noreferrer\"><code>AtomicLong</code></a> instance up front. <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicLong.html#incrementAndGet()\" rel=\"nofollow noreferrer\">Increment</a> that count in your executing task code. Being atomic means the count will be accurate across threads. As Commented <a href=\"https://stackoverflow.com/questions/77035478/java-multithreading-with-threadpools-loosing-tasks#comment135808574_77035478\">by VGR</a> and <a href=\"https://stackoverflow.com/questions/77035478/java-multithreading-with-threadpools-loosing-tasks#comment135810317_77035478\">by Holger</a>, your attempt to count executions was done incorrectly, in a manner not thread-safe. Your non-thread-safe counting may very well  account for your “losing tasks”.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final AtomicLong countTaskExecutions = new AtomicLong( 0 ) ;\nBlockingQueue &lt; Map &lt; String , String &gt; &gt; packetQueue = … ;\ntry (\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor() ;\n) {\n    while ( someCondition ) \n    {\n        Map &lt; String , String &gt; map = packetQueue.take() ;\n        Runnable task = ()-&gt;{\n            countTaskExecutions.incrementAndGet() ;\n            myMapProcessor.process( map ) ;\n        };\n        executorService.submit( task ) ;\n    }\n}\nSystem.out.println( &quot;countTaskExecutions = &quot; + countTaskExecutions.get() ) ;\n</code></pre>\n<h2>Setting a flag across threads</h2>\n<p>Likewise, if your <code>someCondition</code> is set and accessed across threads, make it an <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html\" rel=\"nofollow noreferrer\"><code>AtomicBoolean</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final AtomicBoolean continueToProcessPackets = new AtomicBoolean( true ) ;\nfinal AtomicLong countTaskExecutions = new AtomicLong( 0 ) ;\nBlockingQueue &lt; Map &lt; String , String &gt; &gt; packetQueue = … ;\ntry (\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor() ;\n) {\n    while ( continueToProcessPackets.get() ) \n    {\n        Map &lt; String , String &gt; map = packetQueue.take() ;\n        Runnable task = ()-&gt;{\n            countTaskExecutions.incrementAndGet() ;\n            myMapProcessor.process( map ) ;\n        };\n        executorService.submit( task ) ;\n    }\n}\nSystem.out.println( &quot;countTaskExecutions = &quot; + countTaskExecutions.get() ) ;\n</code></pre>\n<p>Notice how we mark the atomic variables as\n<code>final</code> to ensure no other reference is substituted.</p>\n"}],"owner":{"account_id":6931114,"reputation":1,"user_id":6108505,"display_name":"nguvi"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693855927,"creation_date":1693808698,"question_id":77035478,"body_markdown":"I&#39;m still new to the multithreading topic and am loosing tasks.\r\n\r\nI have an application which reads as an input packets from the network interface (6400 packts per seconds). On each packet a task shall be executed which takes in average of 0.00045s. The processing time is varies and can be sometime 0,001s. When im Monitoring how often the task is executed (comparing of the counts) I notice that i&#39;m loosing 15 Percent. \r\n\r\n\r\n```\r\nThreadPoolExecutor exe;\r\nBlockingQueue&lt;HashMap&lt;String,String&gt;&gt; packetQueue;\r\nint count, countTh;\r\n\r\npublic MyClass(){\r\n     this.exe = (ThreadPoolExecutor) Executors.newFixedThreadPool(4);\r\n     this.count = 0;\r\n     this.count = countTh;\r\n}\r\n\r\npublic void myFunction(){\r\n     while(true){\r\n          HashMap&lt;String,String&gt; packet = new HashMap&lt;String,String&gt; packetQueue.take();\r\n          count++;\r\n          Thread th = new Thread(){\r\n               @Override\r\n               public void run(){\r\n                  countTh++;\r\n                  myTask(packet);\r\n               }\r\n          };\r\n          this.exe.execute(th);                   \r\n}\r\n```\r\n\r\n\r\nWhat I tried to fix the issue:\r\n1. Did some simple Math to calculate how many Thread I would need and got 3 Threads. -&gt; Still loosing Threads\r\n2. Monitored the Threads in the ThreadPool with getActiveCount() and was very surprised that the threads were always active, never waiting\r\n3. Monitored the ThreadPool queue with getQueue() and found out that the Queue is sometimes ob to 10k high.\r\n4. I changed the ThreadPool to a Cached Thread Pool to monitor with how many Threads are used and it was up to 15k threads! Still it was no option to leave it like this, because it kind of destroyed the overall performance. I guess there were not enough threads left for other processes within the application\r\n\r\nDoes anyone have any suggestions how I can fix this issue? Or point me to where the issue may lay? \r\n\r\n","title":"Java Multithreading with ThreadPools loosing Tasks","body":"<p>I'm still new to the multithreading topic and am loosing tasks.</p>\n<p>I have an application which reads as an input packets from the network interface (6400 packts per seconds). On each packet a task shall be executed which takes in average of 0.00045s. The processing time is varies and can be sometime 0,001s. When im Monitoring how often the task is executed (comparing of the counts) I notice that i'm loosing 15 Percent.</p>\n<pre><code>ThreadPoolExecutor exe;\nBlockingQueue&lt;HashMap&lt;String,String&gt;&gt; packetQueue;\nint count, countTh;\n\npublic MyClass(){\n     this.exe = (ThreadPoolExecutor) Executors.newFixedThreadPool(4);\n     this.count = 0;\n     this.count = countTh;\n}\n\npublic void myFunction(){\n     while(true){\n          HashMap&lt;String,String&gt; packet = new HashMap&lt;String,String&gt; packetQueue.take();\n          count++;\n          Thread th = new Thread(){\n               @Override\n               public void run(){\n                  countTh++;\n                  myTask(packet);\n               }\n          };\n          this.exe.execute(th);                   \n}\n</code></pre>\n<p>What I tried to fix the issue:</p>\n<ol>\n<li>Did some simple Math to calculate how many Thread I would need and got 3 Threads. -&gt; Still loosing Threads</li>\n<li>Monitored the Threads in the ThreadPool with getActiveCount() and was very surprised that the threads were always active, never waiting</li>\n<li>Monitored the ThreadPool queue with getQueue() and found out that the Queue is sometimes ob to 10k high.</li>\n<li>I changed the ThreadPool to a Cached Thread Pool to monitor with how many Threads are used and it was up to 15k threads! Still it was no option to leave it like this, because it kind of destroyed the overall performance. I guess there were not enough threads left for other processes within the application</li>\n</ol>\n<p>Does anyone have any suggestions how I can fix this issue? Or point me to where the issue may lay?</p>\n"},{"tags":["java","maven","spring-boot","jpa"],"comments":[{"owner":{"account_id":2134379,"reputation":7299,"user_id":1894517,"accept_rate":79,"display_name":"Vinay Prajapati"},"score":0,"creation_date":1524371929,"post_id":49962364,"comment_id":86941113,"body_markdown":"please add other relevant classes as well. your POM works perfectly fine for me. Also, no need for explicit dependency for jackson that&#39;s included by default.","body":"please add other relevant classes as well. your POM works perfectly fine for me. Also, no need for explicit dependency for jackson that&#39;s included by default."},{"owner":{"account_id":8450263,"reputation":11,"user_id":6339305,"display_name":"Nandita Dube"},"score":0,"creation_date":1524372876,"post_id":49962364,"comment_id":86941242,"body_markdown":"@VinayPrajapati I have added other classes in the main post","body":"@VinayPrajapati I have added other classes in the main post"}],"answers":[{"tags":[],"owner":{"account_id":463588,"reputation":736,"user_id":866586,"accept_rate":62,"display_name":"Aravind R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524370184,"creation_date":1524370184,"answer_id":49962409,"question_id":49962364,"body_markdown":"Can you try adding the correct version of the below\r\n\r\n \r\n\r\n     &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.7.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;2.7.4&lt;/version&gt;","title":"Spring boot java.lang.IllegalStateException","body":"<p>Can you try adding the correct version of the below</p>\n\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.7.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.7.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.7.4&lt;/version&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16121117,"reputation":147,"user_id":11637083,"display_name":"Serhat Yıldırım"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638917753,"creation_date":1638917753,"answer_id":70267949,"question_id":49962364,"body_markdown":"Can you add the this config class ? \r\n\r\n    @Configuration\r\n    public class JacksonConfiguration {\r\n    \r\n        @Bean\r\n        public ObjectReader messageObjectReader(ObjectMapper objectMapper) {\r\n            return objectMapper.readerFor(ServerConfig.class);\r\n        }\r\n    }","title":"Spring boot java.lang.IllegalStateException","body":"<p>Can you add the this config class ?</p>\n<pre><code>@Configuration\npublic class JacksonConfiguration {\n\n    @Bean\n    public ObjectReader messageObjectReader(ObjectMapper objectMapper) {\n        return objectMapper.readerFor(ServerConfig.class);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8450263,"reputation":11,"user_id":6339305,"display_name":"Nandita Dube"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8742,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1693854280,"creation_date":1524369595,"question_id":49962364,"body_markdown":"I am making a Spring Boot app to fetch data from an Oracle Db and display as a String. Here is my pom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.mygit.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;sampleBoot&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;sampleBoot&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n   \t\t &lt;/dependency&gt;\r\n   \t\t &lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n   \t\t &lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- HTTP Core --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa --&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t    &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n\r\nCan someone help on this, please? ServerConfig is my Entity class and my Controller just calls the getAllConfigurationData() method and prints the returned list as a String.\r\n\r\n    package com.mygit.boot.dao.impl;\r\n    import java.util.List;\r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    import org.springframework.stereotype.Repository;\r\n    import org.springframework.transaction.annotation.Transactional;\r\n    import com.mygit.boot.dao.IFetchDao;\r\n    import com.mygit.boot.entity.ServerConfig;\r\n\r\n    @Repository\r\n    @Transactional\r\n    public class FetchDaoImpl implements IFetchDao {\r\n\r\n\t@PersistenceContext\r\n\tprivate EntityManager entityManger;\r\n\r\n\t@Override\r\n\tpublic List&lt;ServerConfig&gt; getAllConfigurationData() {\r\n\t\ttry {\r\n\t\t\treturn entityManger.createQuery(&quot;select c from ServerConfig c&quot;, ServerConfig.class).getResultList();\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(&quot;Exception while fetching server config !!!&quot;);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n    }\r\nHere is my error:\r\n\r\n    java.lang.IllegalStateException: Error processing condition on org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration.pageableCustomizer\r\n\r\n\r\n    Caused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ObjectMapper\r\n\r\nThe controller:\r\n\r\n    package com.mygit.boot.controller;\r\n\r\n    import java.util.List;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n\r\n    import com.mygit.boot.dao.IFetchDao;\r\n    import com.mygit.boot.entity.ServerConfig;\r\n\r\n    @RestController\r\n    public class TestController {\r\n\t\r\n\t@Autowired\r\n\tprivate IFetchDao fetchDao;\r\n\t\r\n\t@RequestMapping(&quot;/test&quot;)\r\n\tpublic String print() {\r\n\t\t\r\n\t\tList&lt;ServerConfig&gt; l=fetchDao.getAllConfigurationData();\r\n\t\treturn l.toString();\r\n\t}\r\n    }\r\n\r\nEntity class:\r\n     package com.mygit.boot.entity;\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.SequenceGenerator;\r\n    import javax.persistence.Table;\r\n\r\n    import org.hibernate.annotations.NamedNativeQueries;\r\n    import org.hibernate.annotations.NamedNativeQuery;\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;serverconfig&quot;)\r\n    @NamedNativeQueries({ @NamedNativeQuery(name = &quot;getMaxLoginAttemptsQuery&quot;, query = &quot;SELECT * FROM serverconfig sconfig where sconfig.confKey=? and sconfig.configuration=?&quot;, resultClass = ServerConfig.class),\r\n                      @NamedNativeQuery(name = &quot;getPwdConfigProperties&quot;, query = &quot;SELECT * FROM serverconfig sconfig WHERE sconfig.confKey IN (&#39;&quot;+Constants.NO_OF_UPPERCASES+&quot;&#39;,&#39;&quot;+Constants.NO_OF_LOWERCASES+&quot;&#39;,&#39;&quot;+Constants.NO_OF_DIGIT+&quot;&#39;,&#39;&quot;+Constants.NO_OF_SPECIALCHARS+&quot;&#39;,&#39;&quot;+Constants.PWD_MIN_LENGTH+&quot;&#39;,&#39;&quot;+Constants.PWD_MAX_LENGTH+&quot;&#39;)&quot;, resultClass = ServerConfig.class)})\r\n\r\n    public class ServerConfig implements java.io.Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n    @Column(name = &quot;ID&quot;)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;SEQ_SERVERCONFIG&quot;)\r\n    @SequenceGenerator(name = &quot;SEQ_SERVERCONFIG&quot;, sequenceName = &quot;SEQ_SERVERCONFIG&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;CONFIGURATION&quot;, length = 45)\r\n    private String configuration;\r\n\r\n    @Column(name = &quot;CONFKEY&quot;, length = 128)\r\n    private String confKey;\r\n\r\n    @Column(name = &quot;CONFVALUE&quot;, length = 4000)\r\n    private String confValue;\r\n\r\n    public ServerConfig() {\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getConfiguration() {\r\n        return configuration;\r\n    }\r\n\r\n    public void setConfiguration(String configuration) {\r\n        this.configuration = configuration;\r\n    }\r\n\r\n    public String getConfKey() {\r\n        return confKey;\r\n    }\r\n\r\n    public void setConfKey(String confKey) {\r\n        this.confKey = confKey;\r\n    }\r\n\r\n    public String getConfValue() {\r\n        return confValue;\r\n    }\r\n\r\n    public void setConfValue(String confValue) {\r\n        this.confValue = confValue;\r\n    }\r\n\r\n}\r\n\r\nMain application class:\r\n\r\n    package com.mygit.boot.main;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan({&quot;com.mygit.boot.controller&quot;, &quot;com.mygit.boot.dao&quot;, &quot;com.mygit.boot.dao.impl&quot;, &quot;com.mygit.boot.entity&quot;})\r\n    public class SampleBootApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(SampleBootApplication.class, args);\r\n\t}\r\n    }\r\n","title":"Spring boot java.lang.IllegalStateException","body":"<p>I am making a Spring Boot app to fetch data from an Oracle Db and display as a String. Here is my pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n</code></pre>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    4.0.0</p>\n\n<pre><code>&lt;groupId&gt;com.mygit.boot&lt;/groupId&gt;\n&lt;artifactId&gt;sampleBoot&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;sampleBoot&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n     &lt;/dependency&gt;\n     &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n     &lt;/dependency&gt;\n\n    &lt;!-- HTTP Core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n        &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<p>Can someone help on this, please? ServerConfig is my Entity class and my Controller just calls the getAllConfigurationData() method and prints the returned list as a String.</p>\n\n<pre><code>package com.mygit.boot.dao.impl;\nimport java.util.List;\nimport javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\nimport com.mygit.boot.dao.IFetchDao;\nimport com.mygit.boot.entity.ServerConfig;\n\n@Repository\n@Transactional\npublic class FetchDaoImpl implements IFetchDao {\n\n@PersistenceContext\nprivate EntityManager entityManger;\n\n@Override\npublic List&lt;ServerConfig&gt; getAllConfigurationData() {\n    try {\n        return entityManger.createQuery(\"select c from ServerConfig c\", ServerConfig.class).getResultList();\n\n    } catch (Exception e) {\n        System.out.println(\"Exception while fetching server config !!!\");\n    }\n    return null;\n}\n}\n</code></pre>\n\n<p>Here is my error:</p>\n\n<pre><code>java.lang.IllegalStateException: Error processing condition on org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration.pageableCustomizer\n\n\nCaused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ObjectMapper\n</code></pre>\n\n<p>The controller:</p>\n\n<pre><code>package com.mygit.boot.controller;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.mygit.boot.dao.IFetchDao;\nimport com.mygit.boot.entity.ServerConfig;\n\n@RestController\npublic class TestController {\n\n@Autowired\nprivate IFetchDao fetchDao;\n\n@RequestMapping(\"/test\")\npublic String print() {\n\n    List&lt;ServerConfig&gt; l=fetchDao.getAllConfigurationData();\n    return l.toString();\n}\n}\n</code></pre>\n\n<p>Entity class:\n     package com.mygit.boot.entity;</p>\n\n<pre><code>import javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.SequenceGenerator;\nimport javax.persistence.Table;\n\nimport org.hibernate.annotations.NamedNativeQueries;\nimport org.hibernate.annotations.NamedNativeQuery;\n\n\n@Entity\n@Table(name = \"serverconfig\")\n@NamedNativeQueries({ @NamedNativeQuery(name = \"getMaxLoginAttemptsQuery\", query = \"SELECT * FROM serverconfig sconfig where sconfig.confKey=? and sconfig.configuration=?\", resultClass = ServerConfig.class),\n                  @NamedNativeQuery(name = \"getPwdConfigProperties\", query = \"SELECT * FROM serverconfig sconfig WHERE sconfig.confKey IN ('\"+Constants.NO_OF_UPPERCASES+\"','\"+Constants.NO_OF_LOWERCASES+\"','\"+Constants.NO_OF_DIGIT+\"','\"+Constants.NO_OF_SPECIALCHARS+\"','\"+Constants.PWD_MIN_LENGTH+\"','\"+Constants.PWD_MAX_LENGTH+\"')\", resultClass = ServerConfig.class)})\n\npublic class ServerConfig implements java.io.Serializable {\n\nprivate static final long serialVersionUID = 1L;\n\n@Id\n@Column(name = \"ID\")\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"SEQ_SERVERCONFIG\")\n@SequenceGenerator(name = \"SEQ_SERVERCONFIG\", sequenceName = \"SEQ_SERVERCONFIG\")\nprivate Long id;\n\n@Column(name = \"CONFIGURATION\", length = 45)\nprivate String configuration;\n\n@Column(name = \"CONFKEY\", length = 128)\nprivate String confKey;\n\n@Column(name = \"CONFVALUE\", length = 4000)\nprivate String confValue;\n\npublic ServerConfig() {\n}\n\npublic Long getId() {\n    return id;\n}\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic String getConfiguration() {\n    return configuration;\n}\n\npublic void setConfiguration(String configuration) {\n    this.configuration = configuration;\n}\n\npublic String getConfKey() {\n    return confKey;\n}\n\npublic void setConfKey(String confKey) {\n    this.confKey = confKey;\n}\n\npublic String getConfValue() {\n    return confValue;\n}\n\npublic void setConfValue(String confValue) {\n    this.confValue = confValue;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Main application class:</p>\n\n<pre><code>package com.mygit.boot.main;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n@SpringBootApplication\n@ComponentScan({\"com.mygit.boot.controller\", \"com.mygit.boot.dao\", \"com.mygit.boot.dao.impl\", \"com.mygit.boot.entity\"})\npublic class SampleBootApplication {\n\npublic static void main(String[] args) {\n    SpringApplication.run(SampleBootApplication.class, args);\n}\n}\n</code></pre>\n"},{"tags":["java","algorithm","timezone","java-time","epoch"],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1693853886,"creation_date":1693774256,"answer_id":77034129,"question_id":77034059,"body_markdown":"Original answer\r\n---\r\n\r\nYou can get the start of the next day so that any time before that will be counted as the end of today.\r\n\r\n**Demo:**\r\n\r\n\tclass Main {\r\n\t    public static void main(String[] args) {\r\n\t        // A sample epoch\r\n\t        long epoch = 1693773531L;\r\n\r\n\t        // Note: Change the timezone as per your requirement\r\n\t        ZoneId userZone = ZoneId.of(&quot;America/New_York&quot;);\r\n\r\n\t        ZonedDateTime zdtGiven = Instant.ofEpochSecond(epoch).atZone(userZone);\r\n\r\n\t        // Today\r\n\t        LocalDate today = LocalDate.now(userZone);\r\n\r\n\t        // Get start of today\r\n\t        ZonedDateTime startOfToday = today.atStartOfDay(userZone);\r\n\r\n\t        // Get start of the next day\r\n\t        ZonedDateTime startOfNextDay = today.plusDays(1).atStartOfDay(userZone);\r\n\r\n\t        if (zdtGiven.isAfter(startOfToday) &amp;&amp; zdtGiven.isBefore(startOfNextDay))\r\n\t            // Do this e.g.\r\n\t            System.out.println(&quot;Before&quot;);\r\n\t    }\r\n\t}\r\n\r\n**Output:**\r\n\r\n    Before\r\n\r\n[Online Demo](https://ideone.com/UEnsTx)\r\n\r\nLearn about the modern date-time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**\r\n\r\nUpdate:\r\n---\r\n\r\nThe expression, `zdtGiven.isAfter(startOfToday) &amp;&amp; zdtGiven.isBefore(startOfNextDay)` can be reduced to `zdtGiven.toLocalDate().isEqual(today)`. This update also covers some more scenarios.\r\n\r\n\r\n**Demo:**\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            // A sample epoch\r\n            long epoch = 1693832142L;\r\n    \r\n            // Note: change the timezone as per your requirement\r\n            ZoneId userZone = ZoneId.of(&quot;America/New_York&quot;);\r\n    \r\n            // ZonedDateTime at the given epoch\r\n            ZonedDateTime zdtGiven = Instant.ofEpochSecond(epoch).atZone(userZone);\r\n    \r\n            // LocalDate at the given epoch\r\n            LocalDate localDateGiven = zdtGiven.toLocalDate();\r\n    \r\n            // Today\r\n            LocalDate today = LocalDate.now(userZone);\r\n    \r\n            // Get start of today\r\n            ZonedDateTime startOfToday = today.atStartOfDay(userZone);\r\n    \r\n            // Get start of the next day\r\n            ZonedDateTime startOfNextDay = today.plusDays(1).atStartOfDay(userZone);\r\n    \r\n            // Current ZonedDateTime\r\n            ZonedDateTime zdtNow = ZonedDateTime.now(userZone);\r\n    \r\n            // Anything happening before a given time e.g. 10 am today\r\n            if (zdtGiven.isAfter(startOfToday) &amp;&amp; zdtGiven.isBefore(zdtNow.with(LocalTime.of(10, 0))))\r\n                // Do this e.g.\r\n                System.out.println(&quot;Before 10 am today&quot;);\r\n    \r\n            // Alternatively\r\n            if (localDateGiven.isEqual(today) &amp;&amp; zdtGiven.isBefore(zdtNow.with(LocalTime.of(10, 0))))\r\n                // Do this e.g.\r\n                System.out.println(&quot;Before 10 am today&quot;);\r\n    \r\n            // Anything happening after a given time e.g. 10 am today\r\n            if (zdtGiven.isAfter(zdtNow.with(LocalTime.of(10, 0))) &amp;&amp; zdtGiven.isBefore(startOfNextDay))\r\n                // Do this e.g.\r\n                System.out.println(&quot;After 10 am today&quot;);\r\n    \r\n            // Alternatively\r\n            if (zdtGiven.isAfter(zdtNow.with(LocalTime.of(10, 0))) &amp;&amp; localDateGiven.isEqual(today))\r\n                // Do this e.g.\r\n                System.out.println(&quot;After 10 am today&quot;);\r\n    \r\n            // Anything happening today\r\n            if (localDateGiven.isEqual(today))\r\n                // Do this e.g.\r\n                System.out.println(&quot;Today&quot;);\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    Before 10 am today\r\n    Before 10 am today\r\n    Today\r\n\r\n[Online Demo](https://ideone.com/PuZ7vI)\r\n\r\n\r\n","title":"How to find end of the day using epoch time and zone in Java","body":"<h2>Original answer</h2>\n<p>You can get the start of the next day so that any time before that will be counted as the end of today.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        // A sample epoch\n        long epoch = 1693773531L;\n\n        // Note: Change the timezone as per your requirement\n        ZoneId userZone = ZoneId.of(&quot;America/New_York&quot;);\n\n        ZonedDateTime zdtGiven = Instant.ofEpochSecond(epoch).atZone(userZone);\n\n        // Today\n        LocalDate today = LocalDate.now(userZone);\n\n        // Get start of today\n        ZonedDateTime startOfToday = today.atStartOfDay(userZone);\n\n        // Get start of the next day\n        ZonedDateTime startOfNextDay = today.plusDays(1).atStartOfDay(userZone);\n\n        if (zdtGiven.isAfter(startOfToday) &amp;&amp; zdtGiven.isBefore(startOfNextDay))\n            // Do this e.g.\n            System.out.println(&quot;Before&quot;);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Before\n</code></pre>\n<p><a href=\"https://ideone.com/UEnsTx\" rel=\"nofollow noreferrer\">Online Demo</a></p>\n<p>Learn about the modern date-time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong></p>\n<h2>Update:</h2>\n<p>The expression, <code>zdtGiven.isAfter(startOfToday) &amp;&amp; zdtGiven.isBefore(startOfNextDay)</code> can be reduced to <code>zdtGiven.toLocalDate().isEqual(today)</code>. This update also covers some more scenarios.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        // A sample epoch\n        long epoch = 1693832142L;\n\n        // Note: change the timezone as per your requirement\n        ZoneId userZone = ZoneId.of(&quot;America/New_York&quot;);\n\n        // ZonedDateTime at the given epoch\n        ZonedDateTime zdtGiven = Instant.ofEpochSecond(epoch).atZone(userZone);\n\n        // LocalDate at the given epoch\n        LocalDate localDateGiven = zdtGiven.toLocalDate();\n\n        // Today\n        LocalDate today = LocalDate.now(userZone);\n\n        // Get start of today\n        ZonedDateTime startOfToday = today.atStartOfDay(userZone);\n\n        // Get start of the next day\n        ZonedDateTime startOfNextDay = today.plusDays(1).atStartOfDay(userZone);\n\n        // Current ZonedDateTime\n        ZonedDateTime zdtNow = ZonedDateTime.now(userZone);\n\n        // Anything happening before a given time e.g. 10 am today\n        if (zdtGiven.isAfter(startOfToday) &amp;&amp; zdtGiven.isBefore(zdtNow.with(LocalTime.of(10, 0))))\n            // Do this e.g.\n            System.out.println(&quot;Before 10 am today&quot;);\n\n        // Alternatively\n        if (localDateGiven.isEqual(today) &amp;&amp; zdtGiven.isBefore(zdtNow.with(LocalTime.of(10, 0))))\n            // Do this e.g.\n            System.out.println(&quot;Before 10 am today&quot;);\n\n        // Anything happening after a given time e.g. 10 am today\n        if (zdtGiven.isAfter(zdtNow.with(LocalTime.of(10, 0))) &amp;&amp; zdtGiven.isBefore(startOfNextDay))\n            // Do this e.g.\n            System.out.println(&quot;After 10 am today&quot;);\n\n        // Alternatively\n        if (zdtGiven.isAfter(zdtNow.with(LocalTime.of(10, 0))) &amp;&amp; localDateGiven.isEqual(today))\n            // Do this e.g.\n            System.out.println(&quot;After 10 am today&quot;);\n\n        // Anything happening today\n        if (localDateGiven.isEqual(today))\n            // Do this e.g.\n            System.out.println(&quot;Today&quot;);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Before 10 am today\nBefore 10 am today\nToday\n</code></pre>\n<p><a href=\"https://ideone.com/PuZ7vI\" rel=\"nofollow noreferrer\">Online Demo</a></p>\n"}],"owner":{"account_id":4309202,"reputation":441,"user_id":3520791,"display_name":"Alan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77034129,"answer_count":1,"score":1,"last_activity_date":1693853886,"creation_date":1693772796,"question_id":77034059,"body_markdown":"I have the epoch time of an event, as `eventTime` in seconds and the zone (location of the event) as `userZone`. \r\nI need to check if an event is eligible. An event is only eligible if it happens before the end of the day considering the zone of the user. \r\nSince epoch time is in UTC it needs to be converted to the zone time and then in that zone find the beginning and end of the day. There is a library in Java `ZonedDateTime`.\r\n\r\nWhat I need to implement is:\r\n       \r\n       - Get eventTime in epoch (UTC) =&gt; getEventTime(event)\r\n       - Get the userZone (for example CDT or EST) =&gt; getUserZone(user)\r\n       - Convert eventTime to the local time of the user  =&gt; getEventInLocalTime(eventTime, userZone)\r\n       - Get end of the day time for userZone =&gt; getEndOfToday(userZone)\r\n       - if (0 &lt;= eventLocalTime &lt;= endOfToday) return True\r\n\r\nHas anyone used `ZonedDateTime` to help with this logic? I implemented some logic but not sure about it as the object returned for `ZonedDateTime` for the end of the day is not clear to me. Basically, what I am trying to reach is if two users in two different time zones trigger an event at the same epoch time the user with an earlier time zone will be eligible for less amount of time, obviously.\r\n\r\n \r\n\r\n","title":"How to find end of the day using epoch time and zone in Java","body":"<p>I have the epoch time of an event, as <code>eventTime</code> in seconds and the zone (location of the event) as <code>userZone</code>.\nI need to check if an event is eligible. An event is only eligible if it happens before the end of the day considering the zone of the user.\nSince epoch time is in UTC it needs to be converted to the zone time and then in that zone find the beginning and end of the day. There is a library in Java <code>ZonedDateTime</code>.</p>\n<p>What I need to implement is:</p>\n<pre><code>   - Get eventTime in epoch (UTC) =&gt; getEventTime(event)\n   - Get the userZone (for example CDT or EST) =&gt; getUserZone(user)\n   - Convert eventTime to the local time of the user  =&gt; getEventInLocalTime(eventTime, userZone)\n   - Get end of the day time for userZone =&gt; getEndOfToday(userZone)\n   - if (0 &lt;= eventLocalTime &lt;= endOfToday) return True\n</code></pre>\n<p>Has anyone used <code>ZonedDateTime</code> to help with this logic? I implemented some logic but not sure about it as the object returned for <code>ZonedDateTime</code> for the end of the day is not clear to me. Basically, what I am trying to reach is if two users in two different time zones trigger an event at the same epoch time the user with an earlier time zone will be eligible for less amount of time, obviously.</p>\n"},{"tags":["javascript","java","android","ios","react-native"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1579526974,"post_id":59824310,"comment_id":105785524,"body_markdown":"Does this answer your question? [Detect power button long press](https://stackoverflow.com/questions/39064523/detect-power-button-long-press)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/39064523/detect-power-button-long-press\">Detect power button long press</a>"}],"answers":[{"tags":[],"owner":{"account_id":10511761,"reputation":2710,"user_id":12368797,"display_name":"William Brochensque junior"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1579531755,"creation_date":1579531246,"answer_id":59825565,"question_id":59824310,"body_markdown":"You can use this library to run a code when the home button is pressed\r\n\r\n[react-native-home-pressed][1]\r\n\r\n\r\nYou can change the keycode creating a fork of the [repository][2]\r\n\r\n\r\nand, check the long press with a timer.\r\n\r\nUPDATE:\r\n\r\nYou can use this [library][3] to get a keycode event of key up and key down event.\r\n\r\nExample:\r\n\r\n```javascript\r\ncomponentDidMount() {\r\n    KeyEvent.onKeyDownListener((keyEvent) =&gt; {\r\n        if (keyEvent.keyCode === &#39;Keycode of the power button&#39;){\r\n            this.timeout = setTimeout(() =&gt; {\r\n                //Your SOS Function here\r\n            }, 1000)\r\n        }\r\n    });\r\n\r\n    KeyEvent.onKeyUpListener((keyEvent) =&gt; {\r\n        if (keyEvent.keyCode === &#39;Keycode of the power button&#39;){\r\n            clearTimeout(this.timeout)\r\n        }\r\n    })\r\n}\r\n\r\ncomponentWillUnmount() {\r\n    KeyEvent.removeKeyDownListener();\r\n    KeyEvent.removeKeyUpListener();\r\n}\r\n```\r\n\r\n  [1]: https://www.npmjs.com/package/react-native-home-pressed\r\n  [2]: https://github.com/evanjmg/react-native-home-pressed\r\n  [3]: https://www.npmjs.com/package/react-native-keyevent","title":"React native power button long press listener when app is running in background","body":"<p>You can use this library to run a code when the home button is pressed</p>\n\n<p><a href=\"https://www.npmjs.com/package/react-native-home-pressed\" rel=\"nofollow noreferrer\">react-native-home-pressed</a></p>\n\n<p>You can change the keycode creating a fork of the <a href=\"https://github.com/evanjmg/react-native-home-pressed\" rel=\"nofollow noreferrer\">repository</a></p>\n\n<p>and, check the long press with a timer.</p>\n\n<p>UPDATE:</p>\n\n<p>You can use this <a href=\"https://www.npmjs.com/package/react-native-keyevent\" rel=\"nofollow noreferrer\">library</a> to get a keycode event of key up and key down event.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>componentDidMount() {\n    KeyEvent.onKeyDownListener((keyEvent) =&gt; {\n        if (keyEvent.keyCode === 'Keycode of the power button'){\n            this.timeout = setTimeout(() =&gt; {\n                //Your SOS Function here\n            }, 1000)\n        }\n    });\n\n    KeyEvent.onKeyUpListener((keyEvent) =&gt; {\n        if (keyEvent.keyCode === 'Keycode of the power button'){\n            clearTimeout(this.timeout)\n        }\n    })\n}\n\ncomponentWillUnmount() {\n    KeyEvent.removeKeyDownListener();\n    KeyEvent.removeKeyUpListener();\n}\n</code></pre>\n"}],"owner":{"display_name":"user12748196"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1707,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59825565,"answer_count":1,"score":1,"last_activity_date":1693853437,"creation_date":1579526840,"question_id":59824310,"body_markdown":"I want to call a SOS function when user long press the power button.\r\nIf there is no library to do this, is there any native method to do so?","title":"React native power button long press listener when app is running in background","body":"<p>I want to call a SOS function when user long press the power button.\nIf there is no library to do this, is there any native method to do so?</p>\n"},{"tags":["java","spring-security","spring-cloud-gateway"],"comments":[{"owner":{"account_id":9544054,"reputation":71,"user_id":7090887,"display_name":"user7090887"},"score":0,"creation_date":1696015747,"post_id":74408486,"comment_id":136104853,"body_markdown":"Hi, I am having the same issue. How you fixed it?","body":"Hi, I am having the same issue. How you fixed it?"},{"owner":{"account_id":17386179,"reputation":105,"user_id":12597444,"display_name":"benblan"},"score":0,"creation_date":1697893755,"post_id":74408486,"comment_id":136338209,"body_markdown":"Hi, I didn&#39;t fix it for the moment. I need to try ch4amp solution to see if it works","body":"Hi, I didn&#39;t fix it for the moment. I need to try ch4amp solution to see if it works"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693853060,"creation_date":1668214838,"answer_id":74409603,"question_id":74408486,"body_markdown":"#### EDIT\r\nMy original answer with references to Javascript based web apps (or mobile apps) configured as &quot;public&quot; OAuth2 client and `spring-cloud-gateway` transparent to security was going against [latest recommendations][1]. Here is a solution to return the status code from downstream resource servers, behind a gateway configured as an OAuth2 client with `TokenRelay` filter (as wisely done in the question).\r\n\r\nThe REST APIs behind your gateway should be configured as resource servers and implement their own access control, in which case it would return 401 for unauthorized request to protected resource.\r\n\r\nIn such case, just `permitAll()` on the gateway:\r\n- if the user session is authorized, the `TokenRelay` will set the `Authorization` header before forwarding the request and the resource server should answer with 2xx\r\n- if the user session is not authorized, then the `TokenRelay` won&#39;t set the `Authorization` header before forwarding the request and the resource server should answer with 401\r\n\r\nI have a [working sample][2] of a system with an Angular front-end, a Spring REST API configured as stateless resource server and a BFF in between (`spring-cloud-gateway` with `spring-boot-starter-oauth2-client`, `oauth2Login` and the `TokenRelay=` filter). The code source is in [this tutorial][3].\r\n\r\nIn this application, the redirection to login does not happen because an unauthorized request to a protected resource: Angular app explicitly triggers this redirection. All routes configured with `TokenRelay` filter are configured with `permitAll()`.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\r\n  [2]: https://bff.demo.c4-soft.com/ui/\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","title":"Spring security oauth2 login / spring cloud gateway sends 302 with XHR","body":"<h4>EDIT</h4>\n<p>My original answer with references to Javascript based web apps (or mobile apps) configured as &quot;public&quot; OAuth2 client and <code>spring-cloud-gateway</code> transparent to security was going against <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">latest recommendations</a>. Here is a solution to return the status code from downstream resource servers, behind a gateway configured as an OAuth2 client with <code>TokenRelay</code> filter (as wisely done in the question).</p>\n<p>The REST APIs behind your gateway should be configured as resource servers and implement their own access control, in which case it would return 401 for unauthorized request to protected resource.</p>\n<p>In such case, just <code>permitAll()</code> on the gateway:</p>\n<ul>\n<li>if the user session is authorized, the <code>TokenRelay</code> will set the <code>Authorization</code> header before forwarding the request and the resource server should answer with 2xx</li>\n<li>if the user session is not authorized, then the <code>TokenRelay</code> won't set the <code>Authorization</code> header before forwarding the request and the resource server should answer with 401</li>\n</ul>\n<p>I have a <a href=\"https://bff.demo.c4-soft.com/ui/\" rel=\"nofollow noreferrer\">working sample</a> of a system with an Angular front-end, a Spring REST API configured as stateless resource server and a BFF in between (<code>spring-cloud-gateway</code> with <code>spring-boot-starter-oauth2-client</code>, <code>oauth2Login</code> and the <code>TokenRelay=</code> filter). The code source is in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n<p>In this application, the redirection to login does not happen because an unauthorized request to a protected resource: Angular app explicitly triggers this redirection. All routes configured with <code>TokenRelay</code> filter are configured with <code>permitAll()</code>.</p>\n"}],"owner":{"account_id":17386179,"reputation":105,"user_id":12597444,"display_name":"benblan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1914,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693853060,"creation_date":1668203464,"question_id":74408486,"body_markdown":"I&#39;m developing a SPA application (angular) with a BFF using spring cloud gateway configured as an oauth2 client with spring security and a keycloak server as the authorization server.\r\nI&#39;ve made a classic configuration of spring security : \r\n\r\n    @Configuration\r\n    @EnableWebFluxSecurity\r\n    public class SecurityConfiguration {\r\n    \t@Bean\r\n    \tpublic SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n    \t\thttp.authorizeExchange(exchanges -&gt; exchanges.anyExchange().authenticated())\r\n    \t\t.oauth2Login(withDefaults())\r\n    \t\t\t.csrf().disable()\r\n    \t\t\t;\r\n    \t\treturn http.build();\r\n    \t}\r\n    }\r\n\r\nThe Gateway is configured with TokenRelay as a default filter. It works fine.\r\n\r\nThe problem I get is that when I make a XHR request, to call an API mainly, if no session exists or is expired, the gateway will respond with a redirect to the login page.\r\nThis is fine when the request is made using the browser but not with an ajax request as I can&#39;t distinguish a 302 because I&#39;m not authenticated from a regular 302.\r\n\r\nI know that it&#39;s the expected behavior from spring security (see https://github.com/spring-projects/spring-security/issues/9266). But how can I change this behavior to send at least a 401 for an non authenticated XHR?\r\n\r\nThanks!\r\n","title":"Spring security oauth2 login / spring cloud gateway sends 302 with XHR","body":"<p>I'm developing a SPA application (angular) with a BFF using spring cloud gateway configured as an oauth2 client with spring security and a keycloak server as the authorization server.\nI've made a classic configuration of spring security :</p>\n<pre><code>@Configuration\n@EnableWebFluxSecurity\npublic class SecurityConfiguration {\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n        http.authorizeExchange(exchanges -&gt; exchanges.anyExchange().authenticated())\n        .oauth2Login(withDefaults())\n            .csrf().disable()\n            ;\n        return http.build();\n    }\n}\n</code></pre>\n<p>The Gateway is configured with TokenRelay as a default filter. It works fine.</p>\n<p>The problem I get is that when I make a XHR request, to call an API mainly, if no session exists or is expired, the gateway will respond with a redirect to the login page.\nThis is fine when the request is made using the browser but not with an ajax request as I can't distinguish a 302 because I'm not authenticated from a regular 302.</p>\n<p>I know that it's the expected behavior from spring security (see <a href=\"https://github.com/spring-projects/spring-security/issues/9266\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-security/issues/9266</a>). But how can I change this behavior to send at least a 401 for an non authenticated XHR?</p>\n<p>Thanks!</p>\n"},{"tags":["java","database","mongodb","spring-boot","mongotemplate"],"answers":[{"tags":[],"owner":{"account_id":10179875,"reputation":452,"user_id":7517101,"display_name":"Waged"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693852257,"creation_date":1693834155,"answer_id":77038148,"question_id":77038106,"body_markdown":"Backups of MongoDB collections can be done in several ways, all depend on your specific requirements and how big the project is and the tools you prefer to use.\r\nHere&#39;s my approach to achieve this task:\r\n\r\nUse MongoDB Utilities:\r\n You can run it from the command line to create backups of specified collections or the entire database.\r\n\r\n    mongodump --db your_database_name --collection collectionX --out /path/to/backup/directory\r\n\r\nYou can write a script in your preferred language to automate this process by iterating over the list of collections to back up.\r\n\r\ni use python script like this : \r\n\r\n\r\n    from pymongo import MongoClient\r\n    \r\n    client = MongoClient(&#39;mongodb://localhost:27017&#39;)\r\n    db = client.your_database_name\r\n    \r\n    collections_to_backup = [&quot;collection1&quot;, &quot;collection2&quot;, &quot;collection3&quot;]\r\n    \r\n    for collection_name in collections_to_backup:\r\n        collection = db[collection_name]\r\n        cursor = collection.find()\r\n    \r\n        with open(f&quot;{collection_name}.txt&quot;, &quot;w&quot;) as file:\r\n            for document in cursor:\r\n                file.write(str(document) + &quot;\\n&quot;)","title":"What is the best way to take backups of mongo collections?","body":"<p>Backups of MongoDB collections can be done in several ways, all depend on your specific requirements and how big the project is and the tools you prefer to use.\nHere's my approach to achieve this task:</p>\n<p>Use MongoDB Utilities:\nYou can run it from the command line to create backups of specified collections or the entire database.</p>\n<pre><code>mongodump --db your_database_name --collection collectionX --out /path/to/backup/directory\n</code></pre>\n<p>You can write a script in your preferred language to automate this process by iterating over the list of collections to back up.</p>\n<p>i use python script like this :</p>\n<pre><code>from pymongo import MongoClient\n\nclient = MongoClient('mongodb://localhost:27017')\ndb = client.your_database_name\n\ncollections_to_backup = [&quot;collection1&quot;, &quot;collection2&quot;, &quot;collection3&quot;]\n\nfor collection_name in collections_to_backup:\n    collection = db[collection_name]\n    cursor = collection.find()\n\n    with open(f&quot;{collection_name}.txt&quot;, &quot;w&quot;) as file:\n        for document in cursor:\n            file.write(str(document) + &quot;\\n&quot;)\n</code></pre>\n"}],"owner":{"account_id":16489162,"reputation":69,"user_id":11913587,"display_name":"Kaushik Mahadevan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693852257,"creation_date":1693833853,"question_id":77038106,"body_markdown":"I need to write a function to take up a backup of mongo collections that would be in a configurable list. \r\n\r\n```String listOfCollectionsToBackup = &quot;collection1,collection2,collection3&quot;;```\r\n\r\nI need a way to fetch all the data from these tables and write it in a text file. The current way I am doing this is checking for the collection name and having a switch case to access various classes defined.\r\n\r\n```\r\n@Autowired\r\nMongoTemplate mongoTemplate;\r\n\r\n// some code\r\n\r\nfor(String collection : listOfCollectionsToBackup.split(&quot;,&quot;){\r\n   switch(collection){\r\n      case &quot;collection1&quot; : \r\n         mongoTemplate.findAll(Collection1.class); \r\n         //write data to file\r\n\r\n      case &quot;collection2&quot; : \r\n         mongoTemplate.findAll(Collection2.class); \r\n         //write data to file\r\n\r\n      case &quot;collection3&quot; : \r\n         mongoTemplate.findAll(Collection1.class); \r\n         //write data to file\r\n\r\n      case &quot;collection3&quot; : \r\n         //error message\r\n   }\r\n}\r\n```\r\nSince  I indend to have the `listOfCollectionsToBackup` is intended to be configurable and I plan to have new collections not yet created, I want a way to do it as generically as possible. \r\n\r\nI am using Springboot version 2.4.2\r\nAnd I am using spring-boot&#39;s MongoTemplate to access the DB.\r\n\r\nWhat is the most efficient way to do this? Any help is appreciated. Thanks! ","title":"What is the best way to take backups of mongo collections?","body":"<p>I need to write a function to take up a backup of mongo collections that would be in a configurable list.</p>\n<p><code>String listOfCollectionsToBackup = &quot;collection1,collection2,collection3&quot;;</code></p>\n<p>I need a way to fetch all the data from these tables and write it in a text file. The current way I am doing this is checking for the collection name and having a switch case to access various classes defined.</p>\n<pre><code>@Autowired\nMongoTemplate mongoTemplate;\n\n// some code\n\nfor(String collection : listOfCollectionsToBackup.split(&quot;,&quot;){\n   switch(collection){\n      case &quot;collection1&quot; : \n         mongoTemplate.findAll(Collection1.class); \n         //write data to file\n\n      case &quot;collection2&quot; : \n         mongoTemplate.findAll(Collection2.class); \n         //write data to file\n\n      case &quot;collection3&quot; : \n         mongoTemplate.findAll(Collection1.class); \n         //write data to file\n\n      case &quot;collection3&quot; : \n         //error message\n   }\n}\n</code></pre>\n<p>Since  I indend to have the <code>listOfCollectionsToBackup</code> is intended to be configurable and I plan to have new collections not yet created, I want a way to do it as generically as possible.</p>\n<p>I am using Springboot version 2.4.2\nAnd I am using spring-boot's MongoTemplate to access the DB.</p>\n<p>What is the most efficient way to do this? Any help is appreciated. Thanks!</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1693832809,"post_id":77037923,"comment_id":135808308,"body_markdown":"If this code is outside of the TableModel class, then you should not be calling `fireTableDataChanged()` directly. This should only be called from within the model itself.","body":"If this code is outside of the TableModel class, then you should not be calling <code>fireTableDataChanged()</code> directly. This should only be called from within the model itself."},{"owner":{"account_id":27566231,"reputation":27,"user_id":21038368,"display_name":"wydra__"},"score":0,"creation_date":1693832870,"post_id":77037923,"comment_id":135808321,"body_markdown":"It is in subclass of AbstractTableModel class","body":"It is in subclass of AbstractTableModel class"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1693835281,"post_id":77037923,"comment_id":135808801,"body_markdown":"Note that the answer to your question may have been generated by ChatGPT. Be wary of it.","body":"Note that the answer to your question may have been generated by ChatGPT. Be wary of it."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1693836707,"post_id":77037923,"comment_id":135809095,"body_markdown":"@wydra__ *It is in subclass of AbstractTableModel class * - then your subclass must be invoking the appropriate fireXXX(...) method.","body":"@wydra__ *It is in subclass of AbstractTableModel class * - then your subclass must be invoking the appropriate fireXXX(...) method."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693850722,"creation_date":1693850722,"answer_id":77039835,"question_id":77037923,"body_markdown":"A table model should always call the appropriate fire method (fireTableDataChanged, fireTableRowsUpdated, fireTableRowsInserted, etc.).  Doing so will tell the JTable to repaint the affected cells.\r\n\r\nHowever, JTable (and all Swing components) may repaint themselves for other reasons.  Mouse events, including just moving the mouse over the table, may trigger repainting.  Moving or deiconifying the window may cause it repaint.  Scrolling a JTable may cause it to repaint.\r\n\r\nWhile you have found a specific set of conditions where calling fireTableDataChanged was not needed, other users will not be so lucky.  If you call fireTableDataChanged, your table will update properly for everyone who runs your program.\r\n","title":"fireTableDataChanged() java","body":"<p>A table model should always call the appropriate fire method (fireTableDataChanged, fireTableRowsUpdated, fireTableRowsInserted, etc.).  Doing so will tell the JTable to repaint the affected cells.</p>\n<p>However, JTable (and all Swing components) may repaint themselves for other reasons.  Mouse events, including just moving the mouse over the table, may trigger repainting.  Moving or deiconifying the window may cause it repaint.  Scrolling a JTable may cause it to repaint.</p>\n<p>While you have found a specific set of conditions where calling fireTableDataChanged was not needed, other users will not be so lucky.  If you call fireTableDataChanged, your table will update properly for everyone who runs your program.</p>\n"}],"owner":{"account_id":27566231,"reputation":27,"user_id":21038368,"display_name":"wydra__"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77039835,"answer_count":1,"score":0,"last_activity_date":1693852142,"creation_date":1693832448,"question_id":77037923,"body_markdown":"Why does my model update the JTable view even if I do not call the fireTableDataChanged() ? Is this normal behaviour?\r\n\r\n    @Override\r\n    public void updateGUI(GUIUpdateEvent obj)\r\n    {\r\n        System.out.println(&quot;updategui&quot;);\r\n        for (int i = 0; i &lt; 8; i++)\r\n        {\r\n            for (int j = 0; j &lt; 8; j++)\r\n            {\r\n                data[i][j] = obj.getBoard()[i][j].getCurrentPawnOnField().getChessIcon();\r\n            }\r\n        }\r\n        //fireTableDataChanged();\r\n    }","title":"fireTableDataChanged() java","body":"<p>Why does my model update the JTable view even if I do not call the fireTableDataChanged() ? Is this normal behaviour?</p>\n<pre><code>@Override\npublic void updateGUI(GUIUpdateEvent obj)\n{\n    System.out.println(&quot;updategui&quot;);\n    for (int i = 0; i &lt; 8; i++)\n    {\n        for (int j = 0; j &lt; 8; j++)\n        {\n            data[i][j] = obj.getBoard()[i][j].getCurrentPawnOnField().getChessIcon();\n        }\n    }\n    //fireTableDataChanged();\n}\n</code></pre>\n"},{"tags":["java","appium","adb","emulation","bluestacks"],"owner":{"account_id":29356147,"reputation":3,"user_id":22492048,"display_name":"duta chaligava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693851673,"creation_date":1693851673,"question_id":77039898,"body_markdown":"I&#39;m trying to run my appium test on Bluestacks, but it does not runs, not by code not even appium inspector can connect,\r\n\r\nhere are my desired capcabilities\r\n\r\n```\r\n\r\n\t\tdc.setCapability(&quot;deviceName&quot;, &quot;ONEPLUS 10 PRO&quot;);\r\n\t\t\r\n\t\tdc.setCapability(&quot;udid&quot;, &quot;emulator-5554&quot;);\r\n\t\t\r\n\t\tdc.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n\r\n//\t\tdc.setCapability(&quot;androidVersion&quot;, &quot;14&quot;);\r\n\t\t\r\n\t\tdc.setCapability(&quot;appPackage&quot;, &quot;com.applisto.appcloner&quot;);\r\n\t\t\r\n\t\tdc.setCapability(&quot;appActivity&quot;, &quot;com.applisto.appcloner.activity.MainActivity&quot;);\t\r\n\t\t\r\n\t\tdc.setCapability(&quot;autoGrantPermissions&quot;, &quot;true&quot;);\r\n\t\t\r\n\t\t//dc.setCapability(&quot;noReset&quot;,true);\r\n\t\t\r\n\t\tCheck();\r\n\t\t\r\n\t\tdriver = new AndroidDriver(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;) , dc);\r\n```\r\n\r\nAndroid Debug Bridge is enabled in Bluestacks emulator.\r\n\r\n\r\nhere is log \r\n\r\n```\r\nFAILED CONFIGURATION: @BeforeTest appiumtests.appiumtest.setup\r\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: zipAlignApk failed. Original error: Command &#39;C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\33.0.1\\\\zipalign.exe -f 4 C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Programs\\\\Appium\\\\resources\\\\app\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-debug-androidTest.apk C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Temp\\\\202384-3480-1esyamz.mmuh\\\\appium.tmp&#39; exited with code 1. Stdout: &#39;&#39;; Stderr: &#39;Unable to open &#39;C:\\Users\\chali\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-debug-androidTest.apk&#39; as zip archive\r\n&#39; \r\nHost info: host: &#39;DESKTOP-UO09GDH&#39;, ip: &#39;172.20.10.5&#39;\r\nBuild info: version: &#39;4.11.0&#39;, revision: &#39;040bc5406b&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;19.0.2&#39;\r\nDriver info: io.appium.java_client.android.AndroidDriver\r\nCommand: [null, newSession {capabilities=[{appium:appActivity=com.applisto.appcloner.activity.MainActivity, appium:appPackage=com.applisto.appcloner, appium:autoGrantPermissions=true, appium:deviceName=ONEPLUS 10 PRO, platformName=ANDROID, appium:udid=localhost:5555}], desiredCapabilities=Capabilities {appActivity: com.applisto.appcloner.acti..., appPackage: com.applisto.appcloner, autoGrantPermissions: true, deviceName: ONEPLUS 10 PRO, platformName: ANDROID, udid: localhost:5555}}]\r\nCapabilities {appActivity: com.applisto.appcloner.acti..., appPackage: com.applisto.appcloner, autoGrantPermissions: true, deviceName: ONEPLUS 10 PRO, platformName: ANDROID, udid: localhost:5555}\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:140)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:133)\r\n\tat io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:102)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:182)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:250)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:518)\r\n\tat io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:274)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:159)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:89)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:101)\r\n\tat io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:113)\r\n\tat appiumtests.appiumtest.setup(appiumtest.java:53)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:139)\r\n\tat org.testng.internal.invokers.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:69)\r\n\tat org.testng.internal.invokers.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:390)\r\n\tat org.testng.internal.invokers.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:325)\r\n\tat org.testng.TestRunner.invokeTestConfigurations(TestRunner.java:663)\r\n\tat org.testng.TestRunner.beforeRun(TestRunner.java:652)\r\n\tat org.testng.TestRunner.run(TestRunner.java:614)\r\n\tat org.testng.SuiteRunner.runTest(SuiteRunner.java:443)\r\n\tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:437)\r\n\tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:397)\r\n\tat org.testng.SuiteRunner.run(SuiteRunner.java:336)\r\n\tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\r\n\tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:95)\r\n\tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1280)\r\n\tat org.testng.TestNG.runSuitesLocally(TestNG.java:1200)\r\n\tat org.testng.TestNG.runSuites(TestNG.java:1114)\r\n\tat org.testng.TestNG.run(TestNG.java:1082)\r\n\tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\r\n\tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\r\n\tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\r\n\r\nSKIPPED: appiumtests.appiumtest.testAppCloner\r\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: zipAlignApk failed. Original error: Command &#39;C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\33.0.1\\\\zipalign.exe -f 4 C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Programs\\\\Appium\\\\resources\\\\app\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-debug-androidTest.apk C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Temp\\\\202384-3480-1esyamz.mmuh\\\\appium.tmp&#39; exited with code 1. Stdout: &#39;&#39;; Stderr: &#39;Unable to open &#39;C:\\Users\\chali\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-debug-androidTest.apk&#39; as zip archive\r\n&#39; \r\nHost info: host: &#39;DESKTOP-UO09GDH&#39;, ip: &#39;172.20.10.5&#39;\r\nBuild info: version: &#39;4.11.0&#39;, revision: &#39;040bc5406b&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;19.0.2&#39;\r\nDriver info: io.appium.java_client.android.AndroidDriver\r\nCommand: [null, newSession {capabilities=[{appium:appActivity=com.applisto.appcloner.activity.MainActivity, appium:appPackage=com.applisto.appcloner, appium:autoGrantPermissions=true, appium:deviceName=ONEPLUS 10 PRO, platformName=ANDROID, appium:udid=localhost:5555}], desiredCapabilities=Capabilities {appActivity: com.applisto.appcloner.acti..., appPackage: com.applisto.appcloner, autoGrantPermissions: true, deviceName: ONEPLUS 10 PRO, platformName: ANDROID, udid: localhost:5555}}]\r\nCapabilities {appActivity: com.applisto.appcloner.acti..., appPackage: com.applisto.appcloner, autoGrantPermissions: true, deviceName: ONEPLUS 10 PRO, platformName: ANDROID, udid: localhost:5555}\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:140)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:133)\r\n\tat io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:102)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:182)\r\n\tat io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:250)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:518)\r\n\tat io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:274)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:159)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:89)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:101)\r\n\tat io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:113)\r\n\tat appiumtests.appiumtest.setup(appiumtest.java:53)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:139)\r\n\tat org.testng.internal.invokers.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:69)\r\n\tat org.testng.internal.invokers.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:390)\r\n\tat org.testng.internal.invokers.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:325)\r\n\tat org.testng.TestRunner.invokeTestConfigurations(TestRunner.java:663)\r\n\tat org.testng.TestRunner.beforeRun(TestRunner.java:652)\r\n\tat org.testng.TestRunner.run(TestRunner.java:614)\r\n\tat org.testng.SuiteRunner.runTest(SuiteRunner.java:443)\r\n\tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:437)\r\n\tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:397)\r\n\tat org.testng.SuiteRunner.run(SuiteRunner.java:336)\r\n\tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\r\n\tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:95)\r\n\tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1280)\r\n\tat org.testng.TestNG.runSuitesLocally(TestNG.java:1200)\r\n\tat org.testng.TestNG.runSuites(TestNG.java:1114)\r\n\tat org.testng.TestNG.run(TestNG.java:1082)\r\n\tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\r\n\tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\r\n\tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\r\n\r\n```\r\n\r\n\r\n\r\nI checked adb connect and it&#39;s working.\r\nadb devices shows bluestacks but still cannot connect","title":"Appium Java Test On BlueStacks 10","body":"<p>I'm trying to run my appium test on Bluestacks, but it does not runs, not by code not even appium inspector can connect,</p>\n<p>here are my desired capcabilities</p>\n<pre><code>\n        dc.setCapability(&quot;deviceName&quot;, &quot;ONEPLUS 10 PRO&quot;);\n        \n        dc.setCapability(&quot;udid&quot;, &quot;emulator-5554&quot;);\n        \n        dc.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\n\n//      dc.setCapability(&quot;androidVersion&quot;, &quot;14&quot;);\n        \n        dc.setCapability(&quot;appPackage&quot;, &quot;com.applisto.appcloner&quot;);\n        \n        dc.setCapability(&quot;appActivity&quot;, &quot;com.applisto.appcloner.activity.MainActivity&quot;);    \n        \n        dc.setCapability(&quot;autoGrantPermissions&quot;, &quot;true&quot;);\n        \n        //dc.setCapability(&quot;noReset&quot;,true);\n        \n        Check();\n        \n        driver = new AndroidDriver(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;) , dc);\n</code></pre>\n<p>Android Debug Bridge is enabled in Bluestacks emulator.</p>\n<p>here is log</p>\n<pre><code>FAILED CONFIGURATION: @BeforeTest appiumtests.appiumtest.setup\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: zipAlignApk failed. Original error: Command 'C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\33.0.1\\\\zipalign.exe -f 4 C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Programs\\\\Appium\\\\resources\\\\app\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-debug-androidTest.apk C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Temp\\\\202384-3480-1esyamz.mmuh\\\\appium.tmp' exited with code 1. Stdout: ''; Stderr: 'Unable to open 'C:\\Users\\chali\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-debug-androidTest.apk' as zip archive\n' \nHost info: host: 'DESKTOP-UO09GDH', ip: '172.20.10.5'\nBuild info: version: '4.11.0', revision: '040bc5406b'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '19.0.2'\nDriver info: io.appium.java_client.android.AndroidDriver\nCommand: [null, newSession {capabilities=[{appium:appActivity=com.applisto.appcloner.activity.MainActivity, appium:appPackage=com.applisto.appcloner, appium:autoGrantPermissions=true, appium:deviceName=ONEPLUS 10 PRO, platformName=ANDROID, appium:udid=localhost:5555}], desiredCapabilities=Capabilities {appActivity: com.applisto.appcloner.acti..., appPackage: com.applisto.appcloner, autoGrantPermissions: true, deviceName: ONEPLUS 10 PRO, platformName: ANDROID, udid: localhost:5555}}]\nCapabilities {appActivity: com.applisto.appcloner.acti..., appPackage: com.applisto.appcloner, autoGrantPermissions: true, deviceName: ONEPLUS 10 PRO, platformName: ANDROID, udid: localhost:5555}\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:140)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:133)\n    at io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:102)\n    at io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:182)\n    at io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:250)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:518)\n    at io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:274)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:159)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:89)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:101)\n    at io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:113)\n    at appiumtests.appiumtest.setup(appiumtest.java:53)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:139)\n    at org.testng.internal.invokers.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:69)\n    at org.testng.internal.invokers.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:390)\n    at org.testng.internal.invokers.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:325)\n    at org.testng.TestRunner.invokeTestConfigurations(TestRunner.java:663)\n    at org.testng.TestRunner.beforeRun(TestRunner.java:652)\n    at org.testng.TestRunner.run(TestRunner.java:614)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:443)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:437)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:397)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:336)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:95)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1280)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1200)\n    at org.testng.TestNG.runSuites(TestNG.java:1114)\n    at org.testng.TestNG.run(TestNG.java:1082)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\n\nSKIPPED: appiumtests.appiumtest.testAppCloner\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: zipAlignApk failed. Original error: Command 'C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\33.0.1\\\\zipalign.exe -f 4 C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Programs\\\\Appium\\\\resources\\\\app\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-debug-androidTest.apk C:\\\\Users\\\\chali\\\\AppData\\\\Local\\\\Temp\\\\202384-3480-1esyamz.mmuh\\\\appium.tmp' exited with code 1. Stdout: ''; Stderr: 'Unable to open 'C:\\Users\\chali\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-debug-androidTest.apk' as zip archive\n' \nHost info: host: 'DESKTOP-UO09GDH', ip: '172.20.10.5'\nBuild info: version: '4.11.0', revision: '040bc5406b'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '19.0.2'\nDriver info: io.appium.java_client.android.AndroidDriver\nCommand: [null, newSession {capabilities=[{appium:appActivity=com.applisto.appcloner.activity.MainActivity, appium:appPackage=com.applisto.appcloner, appium:autoGrantPermissions=true, appium:deviceName=ONEPLUS 10 PRO, platformName=ANDROID, appium:udid=localhost:5555}], desiredCapabilities=Capabilities {appActivity: com.applisto.appcloner.acti..., appPackage: com.applisto.appcloner, autoGrantPermissions: true, deviceName: ONEPLUS 10 PRO, platformName: ANDROID, udid: localhost:5555}}]\nCapabilities {appActivity: com.applisto.appcloner.acti..., appPackage: com.applisto.appcloner, autoGrantPermissions: true, deviceName: ONEPLUS 10 PRO, platformName: ANDROID, udid: localhost:5555}\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:140)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:133)\n    at io.appium.java_client.remote.AppiumProtocolHandshake.createSession(AppiumProtocolHandshake.java:102)\n    at io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:182)\n    at io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:250)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:518)\n    at io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:274)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:159)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:89)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:101)\n    at io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:113)\n    at appiumtests.appiumtest.setup(appiumtest.java:53)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:139)\n    at org.testng.internal.invokers.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:69)\n    at org.testng.internal.invokers.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:390)\n    at org.testng.internal.invokers.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:325)\n    at org.testng.TestRunner.invokeTestConfigurations(TestRunner.java:663)\n    at org.testng.TestRunner.beforeRun(TestRunner.java:652)\n    at org.testng.TestRunner.run(TestRunner.java:614)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:443)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:437)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:397)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:336)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:95)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1280)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1200)\n    at org.testng.TestNG.runSuites(TestNG.java:1114)\n    at org.testng.TestNG.run(TestNG.java:1082)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\n\n</code></pre>\n<p>I checked adb connect and it's working.\nadb devices shows bluestacks but still cannot connect</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":2,"creation_date":1693785144,"post_id":77034415,"comment_id":135802421,"body_markdown":"Why are you linking to Spring security Version 4 documentation, Spring Security 4 was released 2015, thats 8 years ago. Second, you clearly have no understanding of the purpose of the different classes, we cant teach you spring security so i suggest you actually read the official docs located on spring securitys webpage before asking here. Good luck, downvoted","body":"Why are you linking to Spring security Version 4 documentation, Spring Security 4 was released 2015, thats 8 years ago. Second, you clearly have no understanding of the purpose of the different classes, we cant teach you spring security so i suggest you actually read the official docs located on spring securitys webpage before asking here. Good luck, downvoted"},{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1693819024,"post_id":77034415,"comment_id":135805773,"body_markdown":"Don&#39;t try to do that. The principal should be the unique username for this style of authentication. Spring will create a `UserDetails` implementation for you. You may then inject an `Authentication` object as a parameter to your REST controller method and use the `getDetails()` method to get the `UserDetails` in your service code (it will need to be cast to `UserDetails` because the API returns an `Object`).","body":"Don&#39;t try to do that. The principal should be the unique username for this style of authentication. Spring will create a <code>UserDetails</code> implementation for you. You may then inject an <code>Authentication</code> object as a parameter to your REST controller method and use the <code>getDetails()</code> method to get the <code>UserDetails</code> in your service code (it will need to be cast to <code>UserDetails</code> because the API returns an <code>Object</code>)."},{"owner":{"account_id":3570177,"reputation":199,"user_id":3085387,"display_name":"Prabagaran Sellamuthu"},"score":0,"creation_date":1693824339,"post_id":77034415,"comment_id":135806700,"body_markdown":"In my tool for Authentication  and Authorization, I use this class UsernamePasswordAuthenticationToken now. using onceperfliter I use spring security as to set the authticaiotn object in secuirtycontext. its working fine. but how to send all user details and receive in tool to set the profile. like email, first name and last name","body":"In my tool for Authentication  and Authorization, I use this class UsernamePasswordAuthenticationToken now. using onceperfliter I use spring security as to set the authticaiotn object in secuirtycontext. its working fine. but how to send all user details and receive in tool to set the profile. like email, first name and last name"},{"owner":{"account_id":3570177,"reputation":199,"user_id":3085387,"display_name":"Prabagaran Sellamuthu"},"score":0,"creation_date":1693824620,"post_id":77034415,"comment_id":135806759,"body_markdown":"how to set email , lastnmae and first name to user pro\npublic TokenTransfer authenticate(@RequestParam(&quot;username&quot;) String username, @RequestParam(&quot;password&quot;) String password) {\n  UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(username, password);\n  Authentication authentication = authManager.authenticate(authenticationToken);\n  SecurityContextHolder.getContext().setAuthentication(authentication);\n  UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n  return new TokenTransfer(TokenUtils.createToken(userDetails));","body":"how to set email , lastnmae and first name to user pro public TokenTransfer authenticate(@RequestParam(&quot;username&quot;) String username, @RequestParam(&quot;password&quot;) String password) {   UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(username, password);   Authentication authentication = authManager.authenticate(authenticationToken);   SecurityContextHolder.getContext().setAuthentication(authent&zwnj;&#8203;ication);   UserDetails userDetails = userDetailsService.loadUserByUsername(username);   return new TokenTransfer(TokenUtils.createToken(userDetails));"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1693840642,"post_id":77034415,"comment_id":135809894,"body_markdown":"please do NOT post code in comments, cant you see that is unreadable? if you wish to post code, edit your question and use the code formatting tools.","body":"please do NOT post code in comments, cant you see that is unreadable? if you wish to post code, edit your question and use the code formatting tools."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1693840704,"post_id":77034415,"comment_id":135809907,"body_markdown":"Also you are aware that giving out JWTs to browsers is a huge security risk and should never be done?","body":"Also you are aware that giving out JWTs to browsers is a huge security risk and should never be done?"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693851240,"creation_date":1693851240,"answer_id":77039864,"question_id":77034415,"body_markdown":"I don&#39;t see any problem. Internally spring security also does the same as what you are doing in `DaoAuthenticationProvider`.\r\n\r\nTo verify , you can see the code details starting from [this][1]. The `principalToReturn` is actually a `UserDetails` object which will be finally used as the `principal` parameter to create a  `UsernamePasswordAuthenticationToken`\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/blob/1a45602dbb7b71ddb66bb975bd83a12ee1e1a4de/core/src/main/java/org/springframework/security/authentication/dao/AbstractUserDetailsAuthenticationProvider.java#L164C10-L164C27","title":"How to Send UserDetails Instead of Principal in UsernamePasswordAuthenticationToken","body":"<p>I don't see any problem. Internally spring security also does the same as what you are doing in <code>DaoAuthenticationProvider</code>.</p>\n<p>To verify , you can see the code details starting from <a href=\"https://github.com/spring-projects/spring-security/blob/1a45602dbb7b71ddb66bb975bd83a12ee1e1a4de/core/src/main/java/org/springframework/security/authentication/dao/AbstractUserDetailsAuthenticationProvider.java#L164C10-L164C27\" rel=\"nofollow noreferrer\">this</a>. The <code>principalToReturn</code> is actually a <code>UserDetails</code> object which will be finally used as the <code>principal</code> parameter to create a  <code>UsernamePasswordAuthenticationToken</code></p>\n"}],"owner":{"account_id":3570177,"reputation":199,"user_id":3085387,"display_name":"Prabagaran Sellamuthu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1693851240,"creation_date":1693781788,"question_id":77034415,"body_markdown":"I&#39;m currently working on implementing authentication in my application, and I&#39;m using the UsernamePasswordAuthenticationToken class to create an authentication object. However, I&#39;m wondering how I can send the UserDetails object instead of the principal parameter in the UsernamePasswordAuthenticationToken constructor.\r\nhttps://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html\r\n\r\n\r\n\r\npublic Authentication createAuthentication() {\r\n\r\n    public Authentication createAuthentication() {\r\n        UserDetails userDetails = // Get the UserDetails for the authenticated user\r\n        Object credentials = // Get the user&#39;s credentials\r\n    \r\n        Collection&lt;? extends GrantedAuthority&gt; authorities = // Get the user&#39;s authorities\r\n    \r\n        return new UsernamePasswordAuthenticationToken(userDetails, credentials, authorities);\r\n    }\r\n\r\n\r\nIn the code above, I&#39;m trying to pass the UserDetails object as the principal. Is this the correct way to send the user details, or should I be doing something differently? I want to make sure I&#39;m following best practices for authentication in my application.\r\n\r\nAny guidance or suggestions on how to properly send the UserDetails object in place of the principal would be greatly appreciated. Thank you!\r\n","title":"How to Send UserDetails Instead of Principal in UsernamePasswordAuthenticationToken","body":"<p>I'm currently working on implementing authentication in my application, and I'm using the UsernamePasswordAuthenticationToken class to create an authentication object. However, I'm wondering how I can send the UserDetails object instead of the principal parameter in the UsernamePasswordAuthenticationToken constructor.\n<a href=\"https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html</a></p>\n<p>public Authentication createAuthentication() {</p>\n<pre><code>public Authentication createAuthentication() {\n    UserDetails userDetails = // Get the UserDetails for the authenticated user\n    Object credentials = // Get the user's credentials\n\n    Collection&lt;? extends GrantedAuthority&gt; authorities = // Get the user's authorities\n\n    return new UsernamePasswordAuthenticationToken(userDetails, credentials, authorities);\n}\n</code></pre>\n<p>In the code above, I'm trying to pass the UserDetails object as the principal. Is this the correct way to send the user details, or should I be doing something differently? I want to make sure I'm following best practices for authentication in my application.</p>\n<p>Any guidance or suggestions on how to properly send the UserDetails object in place of the principal would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","amazon-web-services","aws-lambda"],"comments":[{"owner":{"account_id":5880135,"reputation":10324,"user_id":4629810,"accept_rate":88,"display_name":"Mircea"},"score":0,"creation_date":1454561586,"post_id":35192402,"comment_id":58102557,"body_markdown":"http://docs.aws.amazon.com/lambda/latest/dg/java-create-jar-pkg-maven-no-ide.html","body":"<a href=\"http://docs.aws.amazon.com/lambda/latest/dg/java-create-jar-pkg-maven-no-ide.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/&hellip;</a>"},{"owner":{"account_id":5880135,"reputation":10324,"user_id":4629810,"accept_rate":88,"display_name":"Mircea"},"score":1,"creation_date":1454561651,"post_id":35192402,"comment_id":58102586,"body_markdown":"http://docs.aws.amazon.com/lambda/latest/dg/create-deployment-pkg-zip-java.html","body":"<a href=\"http://docs.aws.amazon.com/lambda/latest/dg/create-deployment-pkg-zip-java.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/&hellip;</a>"},{"owner":{"account_id":5880135,"reputation":10324,"user_id":4629810,"accept_rate":88,"display_name":"Mircea"},"score":0,"creation_date":1454561682,"post_id":35192402,"comment_id":58102592,"body_markdown":"so basically you can either have a jar or a zip with a special structure","body":"so basically you can either have a jar or a zip with a special structure"},{"owner":{"account_id":3061137,"reputation":11230,"user_id":2593745,"accept_rate":58,"display_name":"Arafat Nalkhande"},"score":0,"creation_date":1454564574,"post_id":35192402,"comment_id":58103588,"body_markdown":"Thanks Mircea. I was exactly looking out for http://docs.aws.amazon.com/lambda/latest/dg/create-deployment-pkg-zip-java.html","body":"Thanks Mircea. I was exactly looking out for <a href=\"http://docs.aws.amazon.com/lambda/latest/dg/create-deployment-pkg-zip-java.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":64432,"reputation":65199,"user_id":190201,"accept_rate":83,"display_name":"ataylor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1454608550,"creation_date":1454608550,"answer_id":35208183,"question_id":35192402,"body_markdown":"You should include the dependency jars in a `lib` subdirectory.  If you have a class `mypackage.LambdaFunctionHandler`, the zip file should have this basic structure:\r\n\r\n    .\r\n    |-- mypackage\r\n    |   +-- LambdaFunctionHandler.class\r\n    +-- lib\r\n        |-- myjar1.jar\r\n        +-- myjar2.jar\r\n\r\n","title":"Building AWS Lambda jar","body":"<p>You should include the dependency jars in a <code>lib</code> subdirectory.  If you have a class <code>mypackage.LambdaFunctionHandler</code>, the zip file should have this basic structure:</p>\n\n<pre><code>.\n|-- mypackage\n|   +-- LambdaFunctionHandler.class\n+-- lib\n    |-- myjar1.jar\n    +-- myjar2.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26159163,"reputation":81,"user_id":19845996,"display_name":"The_Real_Epk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693849334,"creation_date":1693846485,"answer_id":77039494,"question_id":35192402,"body_markdown":"You can use the [maven shade plugin](https://maven.apache.org/plugins/maven-shade-plugin/) to build a shaded jar containing all your code and its external dependencies.\r\n\r\nSimply add the following to the build plugins to your pom.xml:\r\n\r\n```xml\r\n\r\n&lt;build&gt;\r\n    &lt;plugins&gt;\r\n        &lt;!-- Build. --&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${maven.shade.plugin.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n                &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n                &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n                &lt;filters&gt;\r\n                    &lt;filter&gt;\r\n                        &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                        &lt;excludes&gt;\r\n                            &lt;!-- Suppress module-info.class warning--&gt;\r\n                            &lt;exclude&gt;module-info.class&lt;/exclude&gt;\r\n                        &lt;/excludes&gt;\r\n                    &lt;/filter&gt;\r\n                &lt;/filters&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;phase&gt;package&lt;/phase&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;shade&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;minimizeJar&gt;true&lt;/minimizeJar&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;plugins&gt;\r\n&lt;build&gt;\r\n```\r\n\r\nIf you set &#39;minimizeJar = true&#39;, it will also filter out anything unnecessary for the jar execution, resulting in a smaller file size (which in theory, results in a shorter cold start time when the function is first invoked).","title":"Building AWS Lambda jar","body":"<p>You can use the <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">maven shade plugin</a> to build a shaded jar containing all your code and its external dependencies.</p>\n<p>Simply add the following to the build plugins to your pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;!-- Build. --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven.shade.plugin.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n                &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n                &lt;filters&gt;\n                    &lt;filter&gt;\n                        &lt;artifact&gt;*:*&lt;/artifact&gt;\n                        &lt;excludes&gt;\n                            &lt;!-- Suppress module-info.class warning--&gt;\n                            &lt;exclude&gt;module-info.class&lt;/exclude&gt;\n                        &lt;/excludes&gt;\n                    &lt;/filter&gt;\n                &lt;/filters&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;minimizeJar&gt;true&lt;/minimizeJar&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;plugins&gt;\n&lt;build&gt;\n</code></pre>\n<p>If you set 'minimizeJar = true', it will also filter out anything unnecessary for the jar execution, resulting in a smaller file size (which in theory, results in a shorter cold start time when the function is first invoked).</p>\n"}],"owner":{"account_id":3061137,"reputation":11230,"user_id":2593745,"accept_rate":58,"display_name":"Arafat Nalkhande"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2343,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":35208183,"answer_count":2,"score":3,"last_activity_date":1693849334,"creation_date":1454559351,"question_id":35192402,"body_markdown":"What is the standard practice for creating AWS Lambda jar.\r\n\r\nShould we bundle the dependencies as jars within the zip file or should the dependencies be unjarred and included as classes.\r\n\r\nAs far as I know it is the first option that holds true, but this doubt came to mind when I was following the AWS Tutorial of thumbnails and it eventually created a jar that had classes for dependencies (like Jackson) rather than bundling Jackson jar in the artifact.\r\n\r\nIs there a sample AWS Lambda zip file that I can download and try (the one that has dependencies bundled as .jar files and not as .class files)","title":"Building AWS Lambda jar","body":"<p>What is the standard practice for creating AWS Lambda jar.</p>\n\n<p>Should we bundle the dependencies as jars within the zip file or should the dependencies be unjarred and included as classes.</p>\n\n<p>As far as I know it is the first option that holds true, but this doubt came to mind when I was following the AWS Tutorial of thumbnails and it eventually created a jar that had classes for dependencies (like Jackson) rather than bundling Jackson jar in the artifact.</p>\n\n<p>Is there a sample AWS Lambda zip file that I can download and try (the one that has dependencies bundled as .jar files and not as .class files)</p>\n"},{"tags":["java","spring-boot","redis","spring-cloud-gateway"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1693849740,"post_id":77039703,"comment_id":135811383,"body_markdown":"Spring 2.5 was released in November 2007. I don&#39;t think it supported Java 8.","body":"Spring 2.5 was released in November 2007. I don&#39;t think it supported Java 8."},{"owner":{"account_id":3406665,"reputation":1692,"user_id":2857556,"accept_rate":11,"display_name":"Alpesh Jikadra"},"score":0,"creation_date":1693887150,"post_id":77039703,"comment_id":135814919,"body_markdown":"Yes it supports, because everything else is working with java8","body":"Yes it supports, because everything else is working with java8"}],"owner":{"account_id":3406665,"reputation":1692,"user_id":2857556,"accept_rate":11,"display_name":"Alpesh Jikadra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693848964,"creation_date":1693848964,"question_id":77039703,"body_markdown":"I am trying to implement Request rate limit using Springboot cloud gateway and Redis.\r\n\r\nMy Spring version is **2.5.12**\r\n\r\nspring-data-redis : 2.7.13\r\n\r\nHere is my keyResolver\r\n\r\n    @Override\r\n      public Mono&lt;String&gt; resolve(ServerWebExchange exchange) {\r\n        return Optional.ofNullable(exchange.getRequest().getRemoteAddress())\r\n            .map(InetSocketAddress::getAddress)\r\n            .map(InetAddress::getHostAddress)\r\n            .map(Mono::just)\r\n            .orElse(Mono.empty());\r\n      }\r\n \r\nReactiveStringRedisTemplate as \r\n\r\n    @Bean\r\n      public ReactiveStringRedisTemplate reactiveStringRedisTemplate(){\r\n        return new ReactiveStringRedisTemplate(lettuceConnectionFactory);\r\n      }\r\n\r\nRedisRateLimiter as \r\n\r\n    @Bean\r\n      public RedisRateLimiter redisRateLimiter() {\r\n        return new RedisRateLimiter(10,10,60);//defaultReplenishRate,defaultBurstCapacity,\r\n      }\r\n\r\nNow I am trying to understand what is RedisRateLimiter and how it&#39;s work.\r\n\r\nI want to achieve following things. I tried many things, but not able to understand how it calculate this requests.\r\n\r\n\r\n1. 5 request / minute\r\n2. 7 request / minute\r\n3. 20 request / minute\r\n\r\nCan someone please help me to understand this RedisRatelimiter with example in context of above 3 scenarios ?\r\n\r\nThanks,\r\nAlpesh ","title":"Spring Cloud Implement RateLimit using redis","body":"<p>I am trying to implement Request rate limit using Springboot cloud gateway and Redis.</p>\n<p>My Spring version is <strong>2.5.12</strong></p>\n<p>spring-data-redis : 2.7.13</p>\n<p>Here is my keyResolver</p>\n<pre><code>@Override\n  public Mono&lt;String&gt; resolve(ServerWebExchange exchange) {\n    return Optional.ofNullable(exchange.getRequest().getRemoteAddress())\n        .map(InetSocketAddress::getAddress)\n        .map(InetAddress::getHostAddress)\n        .map(Mono::just)\n        .orElse(Mono.empty());\n  }\n</code></pre>\n<p>ReactiveStringRedisTemplate as</p>\n<pre><code>@Bean\n  public ReactiveStringRedisTemplate reactiveStringRedisTemplate(){\n    return new ReactiveStringRedisTemplate(lettuceConnectionFactory);\n  }\n</code></pre>\n<p>RedisRateLimiter as</p>\n<pre><code>@Bean\n  public RedisRateLimiter redisRateLimiter() {\n    return new RedisRateLimiter(10,10,60);//defaultReplenishRate,defaultBurstCapacity,\n  }\n</code></pre>\n<p>Now I am trying to understand what is RedisRateLimiter and how it's work.</p>\n<p>I want to achieve following things. I tried many things, but not able to understand how it calculate this requests.</p>\n<ol>\n<li>5 request / minute</li>\n<li>7 request / minute</li>\n<li>20 request / minute</li>\n</ol>\n<p>Can someone please help me to understand this RedisRatelimiter with example in context of above 3 scenarios ?</p>\n<p>Thanks,\nAlpesh</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1554052777,"post_id":55443351,"comment_id":97602388,"body_markdown":"What command are you using to compile &amp; run with?","body":"What command are you using to compile &amp; run with?"}],"answers":[{"tags":[],"owner":{"account_id":15649173,"reputation":61,"user_id":11290896,"display_name":"mjuchi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1554123265,"creation_date":1554123265,"answer_id":55455633,"question_id":55443351,"body_markdown":"The issue is connected with Java Debugger extension. I had the same problem and it has been logged in issue log: https://github.com/Microsoft/vscode-java-debug/issues/555\r\n\r\nProblem is only with single file applications like HelloWorld. It is ok if you run maven project.\r\n\r\nMedsonk&#39;s instruction worked for me: https://github.com/Microsoft/vscode-java-debug/issues/555#issuecomment-478464496\r\n\r\n&gt;*summary:&lt;br&gt;\r\n&gt; 1. make sure uninstall jdk8 clean&lt;br&gt;\r\n&gt; 2. install jdk11&lt;br&gt;\r\n&gt; 3. add &quot;vmArgs&quot;: &quot;--enable-preview&quot; in launch.json&lt;br&gt;\r\n&gt; 4. F1, &quot;Java: Clean ……&quot; and &quot;Java: Force ……&quot;&lt;br&gt;\r\n&gt; 5. run standalone file again*&lt;br&gt;","title":"How to solve VScode UnsupportedClassVersionError?","body":"<p>The issue is connected with Java Debugger extension. I had the same problem and it has been logged in issue log: <a href=\"https://github.com/Microsoft/vscode-java-debug/issues/555\" rel=\"noreferrer\">https://github.com/Microsoft/vscode-java-debug/issues/555</a></p>\n\n<p>Problem is only with single file applications like HelloWorld. It is ok if you run maven project.</p>\n\n<p>Medsonk's instruction worked for me: <a href=\"https://github.com/Microsoft/vscode-java-debug/issues/555#issuecomment-478464496\" rel=\"noreferrer\">https://github.com/Microsoft/vscode-java-debug/issues/555#issuecomment-478464496</a></p>\n\n<blockquote>\n  <p><em>summary:<br>\n  1. make sure uninstall jdk8 clean<br>\n  2. install jdk11<br>\n  3. add \"vmArgs\": \"--enable-preview\" in launch.json<br>\n  4. F1, \"Java: Clean ……\" and \"Java: Force ……\"<br>\n  5. run standalone file again</em><br></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":139298,"reputation":25,"user_id":344814,"display_name":"beimuaihui"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1632115238,"creation_date":1632018326,"answer_id":69239837,"question_id":55443351,"body_markdown":"My situation is version conflict between java and javac on Ubuntu;  \r\njust run this code:\r\n```\r\nsudo update-alternatives --config javac\r\n```","title":"How to solve VScode UnsupportedClassVersionError?","body":"<p>My situation is version conflict between java and javac on Ubuntu;<br />\njust run this code:</p>\n<pre><code>sudo update-alternatives --config javac\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21390278,"reputation":1,"user_id":15754475,"display_name":"Kutanagi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693848608,"creation_date":1693848359,"answer_id":77039649,"question_id":55443351,"body_markdown":"1. Uninstall your old Java version. \r\n2. Update JDK Development Kit https://www.oracle.com/java/technologies/downloads\r\n3. Install the new Java version. \r\n\r\nIt&#39;s work for me (I&#39;m using Windows).","title":"How to solve VScode UnsupportedClassVersionError?","body":"<ol>\n<li>Uninstall your old Java version.</li>\n<li>Update JDK Development Kit <a href=\"https://www.oracle.com/java/technologies/downloads\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/downloads</a></li>\n<li>Install the new Java version.</li>\n</ol>\n<p>It's work for me (I'm using Windows).</p>\n"}],"owner":{"account_id":15643214,"reputation":81,"user_id":11286053,"display_name":"rui yang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9255,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1693848608,"creation_date":1554052130,"question_id":55443351,"body_markdown":"### Problem\r\n\r\nWhen i run my HelloWorld, it returns:\r\n\r\n&gt; &quot;java.lang.UnsupportedClassVersionError: HelloWorld has been compiled\r\n&gt; by a more recent version of the Java Runtime (class file version\r\n&gt; 52.65535), this version of the Java Runtime only recognizes class file versions up to 52.0 &quot;\r\n\r\nHow do I solve this problem?\r\n\r\n### Screenshot\r\n\r\n[![enter image description here][1]][1]\r\n\r\n### Code\r\n\r\n    public class HelloWorld{\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;123&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/E5L4B.png","title":"How to solve VScode UnsupportedClassVersionError?","body":"<h3>Problem</h3>\n\n<p>When i run my HelloWorld, it returns:</p>\n\n<blockquote>\n  <p>\"java.lang.UnsupportedClassVersionError: HelloWorld has been compiled\n  by a more recent version of the Java Runtime (class file version\n  52.65535), this version of the Java Runtime only recognizes class file versions up to 52.0 \"</p>\n</blockquote>\n\n<p>How do I solve this problem?</p>\n\n<h3>Screenshot</h3>\n\n<p><a href=\"https://i.stack.imgur.com/E5L4B.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/E5L4B.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Code</h3>\n\n<pre><code>public class HelloWorld{\n    public static void main(String[] args) {\n        System.out.println(\"123\");\n    }\n}\n</code></pre>\n"},{"tags":["java","date","datetime","jodatime","date-difference"],"comments":[{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":4,"creation_date":1505496691,"post_id":46244778,"comment_id":79453749,"body_markdown":"What you want is impossible for mathematical reasons. Months have different lengths. So if the addition of one month to either 2017-01-28 or to 2017-01-30 yields the same result 2017-02-28 then the way back is necessarily ambivalent.","body":"What you want is impossible for mathematical reasons. Months have different lengths. So if the addition of one month to either 2017-01-28 or to 2017-01-30 yields the same result 2017-02-28 then the way back is necessarily ambivalent."},{"owner":{"account_id":5730548,"reputation":45,"user_id":6427442,"display_name":"Jay Kelner"},"score":0,"creation_date":1505497452,"post_id":46244778,"comment_id":79454127,"body_markdown":"That&#39;s why the jodatime Interval doesn&#39;t work. A Duration, however, should at least be calculable as absolute time which can be added to any date.","body":"That&#39;s why the jodatime Interval doesn&#39;t work. A Duration, however, should at least be calculable as absolute time which can be added to any date."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":1,"creation_date":1505497757,"post_id":46244778,"comment_id":79454253,"body_markdown":"Yes, a duration only in precise units like seconds or minutes (I neglect here leap secs) should do the job. But you also use years and months (imprecise units) in your examples. The class `Period` is not a suitable choice for your requirement.","body":"Yes, a duration only in precise units like seconds or minutes (I neglect here leap secs) should do the job. But you also use years and months (imprecise units) in your examples. The class <code>Period</code> is not a suitable choice for your requirement."},{"owner":{"account_id":5730548,"reputation":45,"user_id":6427442,"display_name":"Jay Kelner"},"score":1,"creation_date":1505498070,"post_id":46244778,"comment_id":79454421,"body_markdown":"Right you are, Meno. I will try with joda.time.Duration instead of Period. I&#39;ll answer my question if it works. Thanks for your help.","body":"Right you are, Meno. I will try with joda.time.Duration instead of Period. I&#39;ll answer my question if it works. Thanks for your help."},{"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"score":0,"creation_date":1505499953,"post_id":46244778,"comment_id":79455243,"body_markdown":"&quot;I tried to use the solution from a similar StackOverflow question, subtracting one date&#39;s milliseconds from the other, but this can result in an incorrect difference between dates.&quot; Can you give an example?","body":"&quot;I tried to use the solution from a similar StackOverflow question, subtracting one date&#39;s milliseconds from the other, but this can result in an incorrect difference between dates.&quot; Can you give an example?"},{"owner":{"account_id":5730548,"reputation":45,"user_id":6427442,"display_name":"Jay Kelner"},"score":0,"creation_date":1505502702,"post_id":46244778,"comment_id":79456434,"body_markdown":"@RalfKleberhoff, my first code snippet is an example of this.","body":"@RalfKleberhoff, my first code snippet is an example of this."},{"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"score":0,"creation_date":1505589639,"post_id":46244778,"comment_id":79478695,"body_markdown":"As far as I see, all your code has in common that you try to express the delta in calendar units like year / month / day / hour and so on. I&#39;d leave the difference as linear seconds or similar, then things are MUCH easier.","body":"As far as I see, all your code has in common that you try to express the delta in calendar units like year / month / day / hour and so on. I&#39;d leave the difference as linear seconds or similar, then things are MUCH easier."}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1693848353,"creation_date":1505498100,"answer_id":46245197,"question_id":46244778,"body_markdown":"## ThreeTen Backport\r\n\r\nThere are a couple of possibilities using the modern Java date and time API known as JSR-310 or `java.time`. Can you use this with Java 7? Certainly! Get [ThreeTen Backport](http://www.threeten.org/threetenbp/) and start coding.\r\n\r\n## Difference between date-times\r\n\r\n**EDIT:** If you want to perceive your `a` and `b` as points in time, in other words, both dates and times of day, you may use either a suitably small time unit for the difference, or the `Duration` class. Both will work the same. Since `Instant`s have nanosecond precision, calculating a difference in nanos will make sure we don’t lose any precision:\r\n\r\n\t\tInstant a = Instant.parse(&quot;2015-08-29T00:00:00.000Z&quot;);\r\n\t\tInstant b = Instant.parse(&quot;2040-01-01T00:00:00.000Z&quot;);\r\n\t\tlong delta = ChronoUnit.NANOS.between(a, b);\r\n\t\ta = a.plusNanos(delta);\r\n\t\tSystem.out.println(&quot;a = &quot; + a);\r\n\t\tSystem.out.println(&quot;b = &quot; + b);\r\n\t\tSystem.out.println(&quot;delta = &quot; + delta);\r\n\t\tSystem.out.println(&quot;a.equals(b) = &quot; + a.equals(b));\r\n\r\nThis prints\r\n\r\n```none\r\na = 2040-01-01T00:00:00Z\r\nb = 2040-01-01T00:00:00Z\r\ndelta = 768182400000000000\r\na.equals(b) = true\r\n```\r\n\r\nThe `Duration` class is meant for durations in hours, minutes, seconds and fraction of second. You can use it for longer durations, but it doesn’t know about weeks, months or years.\r\n\r\n\t\tDuration delta = Duration.between(a, b);\r\n\t\ta = a.plus(delta);\r\n\r\nOtherwise as before. This time the output is\r\n\r\n```none\r\na = 2040-01-01T00:00:00Z\r\nb = 2040-01-01T00:00:00Z\r\ndelta = PT213384H\r\na.equals(b) = true\r\n```\r\n\r\nSo the difference is 213384 hours. Only because the minutes and seconds are 0 in this case, they are not printed, otherwise they would be; `Duration` too has nanosecond precision.\r\n\r\n## Difference between dates\r\n\r\nTaking your title more literally and noticing that your example dates fall on midnight UTC. If you don’t care about the time of day and only want to count days, months and years, you may use either the `Period` class or simply count days. The `Period` class is for periods of days, months and years and has 1 day precision (that means, cannot be used for hours and smaller units).\r\n\r\n\t\tLocalDate a = LocalDate.of(2015, Month.AUGUST, 29);\r\n\t\tLocalDate b = LocalDate.of(2040, Month.JANUARY, 1);\r\n\t\tPeriod delta = Period.between(a, b);\r\n\t\ta = a.plus(delta);\r\n\r\nThe printing goes as before, but now it prints\r\n\r\n```none\r\na = 2040-01-01\r\nb = 2040-01-01\r\ndelta = P24Y4M3D\r\na.equals(b) = true\r\n```\r\n\r\nCounting days goes just like nanoseconds above, only with days instead:\r\n\r\n\t\tlong delta = ChronoUnit.DAYS.between(a, b);\r\n\t\ta = a.plusDays(delta);\r\n\r\nThis time the output contains:\r\n\r\n```none\r\ndelta = 8891\r\na.equals(b) = true\r\n```\r\n\r\nPlease note that because months haven’t got the same length, even though 24 years 4 months 3 days seems to equal 8891 days, this will more often not be the exact case. This is explained in more detail in [@Meno Hochschild’s comment](https://stackoverflow.com/questions/46244778/finding-the-real-difference-between-dates-in-jdk7#comment79453749_46244778) and [Hugo’s answer](https://stackoverflow.com/a/46245454/5772882). So the choice between a `Period` and a number of days will make a difference, and you should choose based on your more exact requirements.\r\n\r\n## Combining Period and Duration\r\n\r\nIt’s a bit funny that Java doesn’t offer a class for a period or duration of years, months, days, hour, minutes and seconds. If you wanted, you might use a `Period` instance for the years, months and days, and then a `Duration` for the hours, minutes and seconds. It’s a little bit complicated but viable.\r\n\r\nThe [**ThreeTen-extra**](http://www.threeten.org/threeten-extra/) project includes a `PeriodDuration` class that combines the two. I haven’t got any experience with it myself.\r\n","title":"Finding the real difference between dates in JDK7","body":"<h2>ThreeTen Backport</h2>\n<p>There are a couple of possibilities using the modern Java date and time API known as JSR-310 or <code>java.time</code>. Can you use this with Java 7? Certainly! Get <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport</a> and start coding.</p>\n<h2>Difference between date-times</h2>\n<p><strong>EDIT:</strong> If you want to perceive your <code>a</code> and <code>b</code> as points in time, in other words, both dates and times of day, you may use either a suitably small time unit for the difference, or the <code>Duration</code> class. Both will work the same. Since <code>Instant</code>s have nanosecond precision, calculating a difference in nanos will make sure we don’t lose any precision:</p>\n<pre><code>    Instant a = Instant.parse(&quot;2015-08-29T00:00:00.000Z&quot;);\n    Instant b = Instant.parse(&quot;2040-01-01T00:00:00.000Z&quot;);\n    long delta = ChronoUnit.NANOS.between(a, b);\n    a = a.plusNanos(delta);\n    System.out.println(&quot;a = &quot; + a);\n    System.out.println(&quot;b = &quot; + b);\n    System.out.println(&quot;delta = &quot; + delta);\n    System.out.println(&quot;a.equals(b) = &quot; + a.equals(b));\n</code></pre>\n<p>This prints</p>\n<pre class=\"lang-none prettyprint-override\"><code>a = 2040-01-01T00:00:00Z\nb = 2040-01-01T00:00:00Z\ndelta = 768182400000000000\na.equals(b) = true\n</code></pre>\n<p>The <code>Duration</code> class is meant for durations in hours, minutes, seconds and fraction of second. You can use it for longer durations, but it doesn’t know about weeks, months or years.</p>\n<pre><code>    Duration delta = Duration.between(a, b);\n    a = a.plus(delta);\n</code></pre>\n<p>Otherwise as before. This time the output is</p>\n<pre class=\"lang-none prettyprint-override\"><code>a = 2040-01-01T00:00:00Z\nb = 2040-01-01T00:00:00Z\ndelta = PT213384H\na.equals(b) = true\n</code></pre>\n<p>So the difference is 213384 hours. Only because the minutes and seconds are 0 in this case, they are not printed, otherwise they would be; <code>Duration</code> too has nanosecond precision.</p>\n<h2>Difference between dates</h2>\n<p>Taking your title more literally and noticing that your example dates fall on midnight UTC. If you don’t care about the time of day and only want to count days, months and years, you may use either the <code>Period</code> class or simply count days. The <code>Period</code> class is for periods of days, months and years and has 1 day precision (that means, cannot be used for hours and smaller units).</p>\n<pre><code>    LocalDate a = LocalDate.of(2015, Month.AUGUST, 29);\n    LocalDate b = LocalDate.of(2040, Month.JANUARY, 1);\n    Period delta = Period.between(a, b);\n    a = a.plus(delta);\n</code></pre>\n<p>The printing goes as before, but now it prints</p>\n<pre class=\"lang-none prettyprint-override\"><code>a = 2040-01-01\nb = 2040-01-01\ndelta = P24Y4M3D\na.equals(b) = true\n</code></pre>\n<p>Counting days goes just like nanoseconds above, only with days instead:</p>\n<pre><code>    long delta = ChronoUnit.DAYS.between(a, b);\n    a = a.plusDays(delta);\n</code></pre>\n<p>This time the output contains:</p>\n<pre class=\"lang-none prettyprint-override\"><code>delta = 8891\na.equals(b) = true\n</code></pre>\n<p>Please note that because months haven’t got the same length, even though 24 years 4 months 3 days seems to equal 8891 days, this will more often not be the exact case. This is explained in more detail in <a href=\"https://stackoverflow.com/questions/46244778/finding-the-real-difference-between-dates-in-jdk7#comment79453749_46244778\">@Meno Hochschild’s comment</a> and <a href=\"https://stackoverflow.com/a/46245454/5772882\">Hugo’s answer</a>. So the choice between a <code>Period</code> and a number of days will make a difference, and you should choose based on your more exact requirements.</p>\n<h2>Combining Period and Duration</h2>\n<p>It’s a bit funny that Java doesn’t offer a class for a period or duration of years, months, days, hour, minutes and seconds. If you wanted, you might use a <code>Period</code> instance for the years, months and days, and then a <code>Duration</code> for the hours, minutes and seconds. It’s a little bit complicated but viable.</p>\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><strong>ThreeTen-extra</strong></a> project includes a <code>PeriodDuration</code> class that combines the two. I haven’t got any experience with it myself.</p>\n"},{"tags":[],"owner":{"display_name":"user7605325"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1505500928,"creation_date":1505499900,"answer_id":46245454,"question_id":46244778,"body_markdown":"As [@Meno explained in the comments][1], date arithmetic is weird, because months and years can have different lenghts. In our ISO calendar, a month can have 28, 29, 30 or 31 days, and a year can have 365 or 366 days.\r\n\r\nSo, a `Period` like `P24Y4M5D` (24 years, 4 months and 5 days) can represent a totally different number of days, depending on **when** you start counting it.\r\n\r\nIf I start at `2017-01-01T00:00Z`, for example. If I add 24 years, I get `2041-01-01`, then adding 4 months, I get `2041-05-01`, then adding 5 days I get `2041-05-06`. The total difference is equivalent to **8891** days.\r\n\r\nBut if I start at `2016-01-01T00:00Z` and add the same period (24 years, 4 months and 5 days): adding 24 years I get `2040-01-01`, then adding for 4 months I get `2040-05-01`, then adding 5 days I get `2040-05-06`. But if I add 8891 days, I get `2040-05-05`.\r\n\r\nThat&#39;s because a month and year don&#39;t have fixed lenghts, so the equivalent total in days will always depend on the dates involved (not to mention Daylight Saving Time and leap seconds effects, which also changes the total of hours, minutes, seconds and milliseconds).\r\n\r\nTo not rely on that, you must calculate using the duration in milliseconds (and not in non-fixed-length variables such as years and months). In Joda-Time, you can use the `org.joda.time.Duration` class:\r\n\r\n    public void makeTwoDatesEqual(GregorianCalendar a, GregorianCalendar b) {\r\n        DateTime date1 = new DateTime(a);\r\n        DateTime date2 = new DateTime(b);\r\n        System.out.println(&quot;date1=&quot; + date1);\r\n        System.out.println(&quot;date2=&quot; + date2);\r\n        \r\n        Duration duration = new Duration(date1, date2);\r\n        DateTime date3 = date1.plus(duration);\r\n        System.out.println(&quot;date3=&quot; + date3);\r\n        System.out.println(date3.equals(date2));\r\n    }\r\n\r\nAssuming that `a` is equivalent to `2015-08-29T00:00:00Z` and `b` is `2040-01-01T00:00:00Z`, this code will output:\r\n\r\n&gt; date1=2015-08-29T00:00:00.000Z&lt;br&gt;\r\ndate2=2040-01-01T00:00:00.000Z&lt;br&gt;\r\ndate3=2040-01-01T00:00:00.000Z&lt;br&gt;\r\ntrue\r\n\r\n---\r\n# ThreeTen Backport\r\n\r\nJoda-Time is in maintainance mode and is being replaced by the new APIs, so I don&#39;t recommend start a new project with it. Even in [joda&#39;s website](http://www.joda.org/joda-time) it says: **&quot;Note that Joda-Time is considered to be a largely “finished” project. No major enhancements are planned. If using Java SE 8, please migrate to java.time (JSR-310).&quot;**.\r\n\r\n*If you can&#39;t (or don&#39;t want to) migrate from Joda-Time to the new API, you can ignore this section.*\r\n\r\nIf you&#39;re using **Java 6 or 7**, you can use the [ThreeTen Backport](http://www.threeten.org/threetenbp), a great backport for Java 8&#39;s new date/time classes. And for **Android**, you&#39;ll also need the [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) (more on how to use it [here](https://stackoverflow.com/a/38922755/7605325)).\r\n\r\nYou can use the `org.threeten.bp.DateTimeUtils` class to convert the `GregorianCalendar` to `org.threeten.bp.Instant` and then calculate the difference between them, resulting in a `org.threeten.bp.Duration`:\r\n\r\n    public void makeTwoDatesEqual(GregorianCalendar a, GregorianCalendar b) {\r\n        Instant instantA = DateTimeUtils.toInstant(a);\r\n        Instant instantB = DateTimeUtils.toInstant(b);\r\n        System.out.println(instantA);\r\n        System.out.println(instantB);\r\n\r\n        Duration duration = Duration.between(instantA, instantB);\r\n\r\n        Instant instantC = instantA.plus(duration);\r\n        System.out.println(instantC);\r\n        System.out.println(instantC.equals(instantB)); // true\r\n    }\r\n\r\nAssuming that `a` is equivalent to `2015-08-29T00:00:00Z` and `b` is `2040-01-01T00:00:00Z`, this code will output:\r\n\r\n&gt; 2015-08-29T00:00:00Z&lt;br&gt;\r\n2040-01-01T00:00:00Z&lt;br&gt;\r\n2040-01-01T00:00:00Z&lt;br&gt;\r\ntrue\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/46244778/finding-the-real-difference-between-dates-in-jdk7#comment79453749_46244778","title":"Finding the real difference between dates in JDK7","body":"<p>As <a href=\"https://stackoverflow.com/questions/46244778/finding-the-real-difference-between-dates-in-jdk7#comment79453749_46244778\">@Meno explained in the comments</a>, date arithmetic is weird, because months and years can have different lenghts. In our ISO calendar, a month can have 28, 29, 30 or 31 days, and a year can have 365 or 366 days.</p>\n\n<p>So, a <code>Period</code> like <code>P24Y4M5D</code> (24 years, 4 months and 5 days) can represent a totally different number of days, depending on <strong>when</strong> you start counting it.</p>\n\n<p>If I start at <code>2017-01-01T00:00Z</code>, for example. If I add 24 years, I get <code>2041-01-01</code>, then adding 4 months, I get <code>2041-05-01</code>, then adding 5 days I get <code>2041-05-06</code>. The total difference is equivalent to <strong>8891</strong> days.</p>\n\n<p>But if I start at <code>2016-01-01T00:00Z</code> and add the same period (24 years, 4 months and 5 days): adding 24 years I get <code>2040-01-01</code>, then adding for 4 months I get <code>2040-05-01</code>, then adding 5 days I get <code>2040-05-06</code>. But if I add 8891 days, I get <code>2040-05-05</code>.</p>\n\n<p>That's because a month and year don't have fixed lenghts, so the equivalent total in days will always depend on the dates involved (not to mention Daylight Saving Time and leap seconds effects, which also changes the total of hours, minutes, seconds and milliseconds).</p>\n\n<p>To not rely on that, you must calculate using the duration in milliseconds (and not in non-fixed-length variables such as years and months). In Joda-Time, you can use the <code>org.joda.time.Duration</code> class:</p>\n\n<pre><code>public void makeTwoDatesEqual(GregorianCalendar a, GregorianCalendar b) {\n    DateTime date1 = new DateTime(a);\n    DateTime date2 = new DateTime(b);\n    System.out.println(\"date1=\" + date1);\n    System.out.println(\"date2=\" + date2);\n\n    Duration duration = new Duration(date1, date2);\n    DateTime date3 = date1.plus(duration);\n    System.out.println(\"date3=\" + date3);\n    System.out.println(date3.equals(date2));\n}\n</code></pre>\n\n<p>Assuming that <code>a</code> is equivalent to <code>2015-08-29T00:00:00Z</code> and <code>b</code> is <code>2040-01-01T00:00:00Z</code>, this code will output:</p>\n\n<blockquote>\n  <p>date1=2015-08-29T00:00:00.000Z<br>\n  date2=2040-01-01T00:00:00.000Z<br>\n  date3=2040-01-01T00:00:00.000Z<br>\n  true</p>\n</blockquote>\n\n<hr>\n\n<h1>ThreeTen Backport</h1>\n\n<p>Joda-Time is in maintainance mode and is being replaced by the new APIs, so I don't recommend start a new project with it. Even in <a href=\"http://www.joda.org/joda-time\" rel=\"nofollow noreferrer\">joda's website</a> it says: <strong>\"Note that Joda-Time is considered to be a largely “finished” project. No major enhancements are planned. If using Java SE 8, please migrate to java.time (JSR-310).\"</strong>.</p>\n\n<p><em>If you can't (or don't want to) migrate from Joda-Time to the new API, you can ignore this section.</em></p>\n\n<p>If you're using <strong>Java 6 or 7</strong>, you can use the <a href=\"http://www.threeten.org/threetenbp\" rel=\"nofollow noreferrer\">ThreeTen Backport</a>, a great backport for Java 8's new date/time classes. And for <strong>Android</strong>, you'll also need the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a> (more on how to use it <a href=\"https://stackoverflow.com/a/38922755/7605325\">here</a>).</p>\n\n<p>You can use the <code>org.threeten.bp.DateTimeUtils</code> class to convert the <code>GregorianCalendar</code> to <code>org.threeten.bp.Instant</code> and then calculate the difference between them, resulting in a <code>org.threeten.bp.Duration</code>:</p>\n\n<pre><code>public void makeTwoDatesEqual(GregorianCalendar a, GregorianCalendar b) {\n    Instant instantA = DateTimeUtils.toInstant(a);\n    Instant instantB = DateTimeUtils.toInstant(b);\n    System.out.println(instantA);\n    System.out.println(instantB);\n\n    Duration duration = Duration.between(instantA, instantB);\n\n    Instant instantC = instantA.plus(duration);\n    System.out.println(instantC);\n    System.out.println(instantC.equals(instantB)); // true\n}\n</code></pre>\n\n<p>Assuming that <code>a</code> is equivalent to <code>2015-08-29T00:00:00Z</code> and <code>b</code> is <code>2040-01-01T00:00:00Z</code>, this code will output:</p>\n\n<blockquote>\n  <p>2015-08-29T00:00:00Z<br>\n  2040-01-01T00:00:00Z<br>\n  2040-01-01T00:00:00Z<br>\n  true</p>\n</blockquote>\n"}],"owner":{"account_id":5730548,"reputation":45,"user_id":6427442,"display_name":"Jay Kelner"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":292,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":46245454,"answer_count":2,"score":3,"last_activity_date":1693848353,"creation_date":1505496323,"question_id":46244778,"body_markdown":"How can I find the difference between two dates in JDK7, **such that the difference can be added back to make the two dates equal?**\r\n\r\n\r\nI tried to use the solution from a [similar StackOverflow question][1], subtracting one date&#39;s milliseconds from the other, but this can result in an incorrect difference between dates.\r\n\r\nIn this example, I try to make `a` equal to `b` by setting `a = (b-a) + a`\r\n\r\n    private void makeTwoDatesEqual(GregorianCalendar a, GregorianCalendar b, DatatypeFactory datatypeFactory) {\r\n        long b_minus_a = b.getTimeInMillis() - a.getTimeInMillis();\r\n        Duration delta = datatypeFactory.newDuration(b_minus_a);\r\n        delta.addTo(a);\r\n    }\r\n\r\nBut the results are unexpected:\r\n\r\n**Before**\r\n\r\n    a = &quot;2015-08-29T00:00:00.000Z&quot;\r\n    b = &quot;2040-01-01T00:00:00.000Z&quot;\r\n    delta = &quot;P24Y4M5DT0H0M0.000S&quot; // 2 days longer than it should be.\r\n\r\n**After**\r\n\r\n    a = &quot;2040-01-03T00:00:00.000Z&quot;\r\n    b = &quot;2040-01-01T00:00:00.000Z&quot;\r\n    delta = &quot;P24Y4M5DT0H0M0.000S&quot;\r\n    a.equals(b) = false\r\n\r\nJoda-Time has this same issue:\r\n\r\n    private void makeTwoDatesEqual(GregorianCalendar a, GregorianCalendar b) {\r\n\t\tDateTime date1 = new DateTime(a);\r\n\t\tDateTime date2 = new DateTime(b);\r\n\t\tInterval interval = new Interval(a.getTimeInMillis(), b.getTimeInMillis());\r\n\t\tPeriod offsetPeriod = interval.toPeriod();\r\n\t\tdate1 = date1.plus(offsetPeriod);\r\n\t\tdate1.equals(date2); // false in my example\r\n    }\r\n\t\r\n**Before**\r\n\r\n    date1 = &quot;2015-08-29T00:00:00.000-05:00&quot;\r\n    date2 = &quot;2040-01-01T00:00:00.000-05:00&quot;\r\n    offsetPeriod = &quot;P24Y4M2DT23H&quot;\r\n    date1.equals(date2) = false\r\n\r\n**After**\r\n\r\n    date1 = &quot;2039-12-31T23:00:00.000-05:00&quot;\r\n    date2 = &quot;2040-01-01T00:00:00.000-05:00&quot;\r\n    offsetPeriod = &quot;P24Y4M2DT23H&quot;\r\n    date1.equals(date2) = false\r\n\r\nBefore it&#39;s asked, there should be no need to account for daylight savings or leap years because in each example I&#39;m adding the interval back over the exact same time period from which it was derived.\r\n\r\n  [1]: https://stackoverflow.com/questions/10654946/how-do-i-substract-two-xmlgregoriancalendar-to-create-one-duration-object\r\n\r\n\r\n","title":"Finding the real difference between dates in JDK7","body":"<p>How can I find the difference between two dates in JDK7, <strong>such that the difference can be added back to make the two dates equal?</strong></p>\n\n<p>I tried to use the solution from a <a href=\"https://stackoverflow.com/questions/10654946/how-do-i-substract-two-xmlgregoriancalendar-to-create-one-duration-object\">similar StackOverflow question</a>, subtracting one date's milliseconds from the other, but this can result in an incorrect difference between dates.</p>\n\n<p>In this example, I try to make <code>a</code> equal to <code>b</code> by setting <code>a = (b-a) + a</code></p>\n\n<pre><code>private void makeTwoDatesEqual(GregorianCalendar a, GregorianCalendar b, DatatypeFactory datatypeFactory) {\n    long b_minus_a = b.getTimeInMillis() - a.getTimeInMillis();\n    Duration delta = datatypeFactory.newDuration(b_minus_a);\n    delta.addTo(a);\n}\n</code></pre>\n\n<p>But the results are unexpected:</p>\n\n<p><strong>Before</strong></p>\n\n<pre><code>a = \"2015-08-29T00:00:00.000Z\"\nb = \"2040-01-01T00:00:00.000Z\"\ndelta = \"P24Y4M5DT0H0M0.000S\" // 2 days longer than it should be.\n</code></pre>\n\n<p><strong>After</strong></p>\n\n<pre><code>a = \"2040-01-03T00:00:00.000Z\"\nb = \"2040-01-01T00:00:00.000Z\"\ndelta = \"P24Y4M5DT0H0M0.000S\"\na.equals(b) = false\n</code></pre>\n\n<p>Joda-Time has this same issue:</p>\n\n<pre><code>private void makeTwoDatesEqual(GregorianCalendar a, GregorianCalendar b) {\n    DateTime date1 = new DateTime(a);\n    DateTime date2 = new DateTime(b);\n    Interval interval = new Interval(a.getTimeInMillis(), b.getTimeInMillis());\n    Period offsetPeriod = interval.toPeriod();\n    date1 = date1.plus(offsetPeriod);\n    date1.equals(date2); // false in my example\n}\n</code></pre>\n\n<p><strong>Before</strong></p>\n\n<pre><code>date1 = \"2015-08-29T00:00:00.000-05:00\"\ndate2 = \"2040-01-01T00:00:00.000-05:00\"\noffsetPeriod = \"P24Y4M2DT23H\"\ndate1.equals(date2) = false\n</code></pre>\n\n<p><strong>After</strong></p>\n\n<pre><code>date1 = \"2039-12-31T23:00:00.000-05:00\"\ndate2 = \"2040-01-01T00:00:00.000-05:00\"\noffsetPeriod = \"P24Y4M2DT23H\"\ndate1.equals(date2) = false\n</code></pre>\n\n<p>Before it's asked, there should be no need to account for daylight savings or leap years because in each example I'm adding the interval back over the exact same time period from which it was derived.</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693757081,"post_id":77032938,"comment_id":135799567,"body_markdown":"Is that backtick in front of `public` and `protected` a typo here or a typo in your code?","body":"Is that backtick in front of <code>public</code> and <code>protected</code> a typo here or a typo in your code?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693757671,"post_id":77032938,"comment_id":135799632,"body_markdown":"By the way, variable names begin with a lowercase letter. And, `Utilisateurs` should be singular, `Utilisateur`.","body":"By the way, variable names begin with a lowercase letter. And, <code>Utilisateurs</code> should be singular, <code>Utilisateur</code>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693757815,"post_id":77032938,"comment_id":135799655,"body_markdown":"Dump the contents of `Utilisateurs` object passed to `updateUser` method to verify you do indeed have changed data in hand.","body":"Dump the contents of <code>Utilisateurs</code> object passed to <code>updateUser</code> method to verify you do indeed have changed data in hand."},{"owner":{"account_id":29357353,"reputation":3,"user_id":22492953,"display_name":"mikasa akerman"},"score":0,"creation_date":1693759249,"post_id":77032938,"comment_id":135799847,"body_markdown":"that backtick is just a typo when i copied it to stackoverflow. it doest exist in my code,  and i didnt understand the third comment, how would i dupm the contents of `Utilisateurs` object ?","body":"that backtick is just a typo when i copied it to stackoverflow. it doest exist in my code,  and i didnt understand the third comment, how would i dupm the contents of <code>Utilisateurs</code> object ?"},{"owner":{"account_id":29357353,"reputation":3,"user_id":22492953,"display_name":"mikasa akerman"},"score":0,"creation_date":1693761069,"post_id":77032938,"comment_id":135800083,"body_markdown":"when i try dumping the contents of `Utilisateurs` object , i see on the console that all the informations are updated. but why arent it updated in the database ?","body":"when i try dumping the contents of <code>Utilisateurs</code> object , i see on the console that all the informations are updated. but why arent it updated in the database ?"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1693776078,"post_id":77032938,"comment_id":135801770,"body_markdown":"Your code isn&#39;t sufficient to just know it, it depends on what `Conx` does and your database engine. But, wild stab in dark? You have to `connection.commit()` or the transaction is aborted when the connection object is closed.","body":"Your code isn&#39;t sufficient to just know it, it depends on what <code>Conx</code> does and your database engine. But, wild stab in dark? You have to <code>connection.commit()</code> or the transaction is aborted when the connection object is closed."},{"owner":{"account_id":29357353,"reputation":3,"user_id":22492953,"display_name":"mikasa akerman"},"score":0,"creation_date":1693779970,"post_id":77032938,"comment_id":135802069,"body_markdown":"i&#39;ve added `connection.commit()` in the if block. And for the `conx` i&#39;m using mysql connector. Here is the code for the Conx : \tprotected static Connection Conx() {\n\t\tConnection connection = null;\n\t String jdbcURL = &quot;jdbc:mysql://localhost:3306/gestion_ecommerce&quot;;\n\t\tString username = &quot;root&quot;;\n\t String pw = &quot;&quot;;\n\t\t\n\t\ttry {\n\t\t\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); \n\t\t\t\tconnection  = DriverManager.getConnection(jdbcURL, username, pw);\n\t\t\tSystem.out.println(&quot;connection ok&quot;);\n\t\t}\n\t\tcatch(Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\t\n\t\treturn connection;\n\t}","body":"i&#39;ve added <code>connection.commit()</code> in the if block. And for the <code>conx</code> i&#39;m using mysql connector. Here is the code for the Conx : \tprotected static Connection Conx() { \t\tConnection connection = null; \t String jdbcURL = &quot;jdbc:mysql://localhost:3306/gestion_ecommerce&quot;; \t\tString username = &quot;root&quot;; \t String pw = &quot;&quot;; \t\t \t\ttry { \t\t\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);  \t\t\t\tconnection  = DriverManager.getConnection(jdbcURL, username, pw); \t\t\tSystem.out.println(&quot;connection ok&quot;); \t\t} \t\tcatch(Exception e) { \t\t\te.printStackTrace(); \t\t}\t \t\treturn connection; \t}"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693802366,"post_id":77032938,"comment_id":135803455,"body_markdown":"Method names start with a lowercase letter, per Java conventions.","body":"Method names start with a lowercase letter, per Java conventions."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693848591,"post_id":77032938,"comment_id":135811213,"body_markdown":"Column `idutilisateur` appears in both the SET clause and the WHERE clause of your UPDATE statement. This seems strange to me. I&#39;m only guessing but this may cause problems. I think you need to remove `idutilisateur` from the SET clause. Also, you wrote (in your question): _when i check my database i found that the same infos that i had before remained the same and nothing changed_ How did you check? Maybe your check is the wrong way to check. By the way, it is no longer required to call `Class.forName` in order to register the JDBC driver.","body":"Column <code>idutilisateur</code> appears in both the SET clause and the WHERE clause of your UPDATE statement. This seems strange to me. I&#39;m only guessing but this may cause problems. I think you need to remove <code>idutilisateur</code> from the SET clause. Also, you wrote (in your question): <i>when i check my database i found that the same infos that i had before remained the same and nothing changed</i> How did you check? Maybe your check is the wrong way to check. By the way, it is no longer required to call <code>Class.forName</code> in order to register the JDBC driver."}],"owner":{"account_id":29357353,"reputation":3,"user_id":22492953,"display_name":"mikasa akerman"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693848310,"creation_date":1693754240,"question_id":77032938,"body_markdown":"When i insert the datas in the form and submit it, no error is returned, but when i check my database i found that the same infos that i had before remained the same and nothing changed and the message &quot;No user was updated &quot; pops up on the console. \r\n\r\nI tried checking my database fields and servlet but i still can&#39;t find the problem.\r\nhere is what happens when i modify my form : \r\n    \r\n(ID 7  NOM doe PRENOM jhon AGE 25 PASSWORD jhon123 EMAIL jhon@gmail.com IDROLE 2 User updated successfully!)\r\n\r\nSo where is the problem please ? \r\n\r\nHere is the DAO : \r\n\r\n     private static final String Update_user = &quot;UPDATE utilisateur SET \r\n     idutilisateur = ? ,nom = ? ,prenom=?  , age = ?,email = ? , mot_de_pass = ? , idrole = ?&quot;\r\n    \t\t\t+ &quot; WHERE  idutilisateur = ?&quot;;\r\n    \t`public static void updateUser(Utilisateurs u) throws SQLException {\r\n    \t    try (Connection connection = Conx();\r\n    \t         PreparedStatement preparedStatement = connection.prepareStatement(Update_user)) {\r\n    \r\n    \t    \tpreparedStatement.setInt(1, u.getIdUtilisateurs());\r\n    \t        preparedStatement.setString(2, u.getNom());\r\n    \t        preparedStatement.setString(3, u.getPrenom());\r\n    \t        preparedStatement.setInt(4, u.getAge());\r\n    \t        preparedStatement.setString(5, u.getEmail());\r\n    \t        preparedStatement.setString(6, u.getPassword());\r\n    \t        preparedStatement.setInt(7, u.getRole().getIdRole());\r\n    \t        preparedStatement.setInt(8, u.getIdUtilisateurs());\r\n    \r\n    \t        int rowsUpdated = preparedStatement.executeUpdate();\r\n    \r\n    \t        if (rowsUpdated &gt; 0) {\r\n    \t            connection.commit(); \r\n    \t            System.out.println(&quot;User updated successfully!&quot;);\r\n    \t        } else {\r\n    \t            System.out.println(&quot;No user was updated.&quot;);\r\n    \t        }\r\n    \t    } catch (SQLException e) {\r\n    \t        e.printStackTrace();\r\n    \t    }\r\n    \t}\r\n\r\n--------------------\r\n```java\r\nprotected static Connection Conx() {\r\n    Connection connection = null;\r\n    String jdbcURL = &quot;jdbc:mysql://localhost:3306/gestion_ecommerce&quot;;\r\n    String username = &quot;root&quot;;\r\n    String pw = &quot;&quot;;\r\n    try {\r\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n        connection = DriverManager.getConnection(jdbcURL, username, pw);\r\n        System.out.println(&quot;connection ok&quot;);\r\n    } catch(Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n    return connection;\r\n}\r\n```\r\n","title":"preparedStatement.executeUpdate() did not return a value larger than 0","body":"<p>When i insert the datas in the form and submit it, no error is returned, but when i check my database i found that the same infos that i had before remained the same and nothing changed and the message &quot;No user was updated &quot; pops up on the console.</p>\n<p>I tried checking my database fields and servlet but i still can't find the problem.\nhere is what happens when i modify my form :</p>\n<p>(ID 7  NOM doe PRENOM jhon AGE 25 PASSWORD jhon123 EMAIL jhon@gmail.com IDROLE 2 User updated successfully!)</p>\n<p>So where is the problem please ?</p>\n<p>Here is the DAO :</p>\n<pre><code> private static final String Update_user = &quot;UPDATE utilisateur SET \n idutilisateur = ? ,nom = ? ,prenom=?  , age = ?,email = ? , mot_de_pass = ? , idrole = ?&quot;\n            + &quot; WHERE  idutilisateur = ?&quot;;\n    `public static void updateUser(Utilisateurs u) throws SQLException {\n        try (Connection connection = Conx();\n             PreparedStatement preparedStatement = connection.prepareStatement(Update_user)) {\n\n            preparedStatement.setInt(1, u.getIdUtilisateurs());\n            preparedStatement.setString(2, u.getNom());\n            preparedStatement.setString(3, u.getPrenom());\n            preparedStatement.setInt(4, u.getAge());\n            preparedStatement.setString(5, u.getEmail());\n            preparedStatement.setString(6, u.getPassword());\n            preparedStatement.setInt(7, u.getRole().getIdRole());\n            preparedStatement.setInt(8, u.getIdUtilisateurs());\n\n            int rowsUpdated = preparedStatement.executeUpdate();\n\n            if (rowsUpdated &gt; 0) {\n                connection.commit(); \n                System.out.println(&quot;User updated successfully!&quot;);\n            } else {\n                System.out.println(&quot;No user was updated.&quot;);\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>protected static Connection Conx() {\n    Connection connection = null;\n    String jdbcURL = &quot;jdbc:mysql://localhost:3306/gestion_ecommerce&quot;;\n    String username = &quot;root&quot;;\n    String pw = &quot;&quot;;\n    try {\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n        connection = DriverManager.getConnection(jdbcURL, username, pw);\n        System.out.println(&quot;connection ok&quot;);\n    } catch(Exception e) {\n        e.printStackTrace();\n    }\n    return connection;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693850279,"post_id":77039620,"comment_id":135811485,"body_markdown":"What database are you using?","body":"What database are you using?"},{"owner":{"account_id":23289673,"reputation":3,"user_id":17371944,"display_name":"FJ97"},"score":0,"creation_date":1693857973,"post_id":77039620,"comment_id":135812492,"body_markdown":"Postgres @Diego Borba","body":"Postgres @Diego Borba"}],"owner":{"account_id":23289673,"reputation":3,"user_id":17371944,"display_name":"FJ97"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693848061,"creation_date":1693848061,"question_id":77039620,"body_markdown":"I got the following structure: \r\n\r\n**SimpleSectionConfig.java**\r\n\r\nThis Entity contains\r\n\r\n    @OneToMany(mappedBy = &quot;layout&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n    private List&lt;SimpleSection&gt; sections;\r\n\r\n\r\n**SimpleSection.java**\r\n\r\nThe SimpleSection Entity then contains \r\n\r\n    @OneToMany(mappedBy = &quot;section&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n    private List&lt;Seat&gt; seats;\r\n\r\n\r\nWhen I delete by Id it seems like it tries to delete the sections which makes sense because of CascadeType.ALL.\r\n\r\nHowever there is also CascadeType.ALL for the attribute seats but the seats do not get removed\r\n\r\nI get the following Exception: \r\n\r\n&gt; Caused by: org.postgresql.util.PSQLException: FEHLER: Aktualisieren oder L&#246;schen in Tabelle &#187;simple_section&#171; verletzt Fremdschl&#252;ssel-Constraint &#187;fk_seat_section&#171; von Tabelle &#187;seat&#171;\r\n  Detail: Auf Schl&#252;ssel (id)=(1) wird noch aus Tabelle &#187;seat&#171; verwiesen.\r\n\r\nWhich translates to: \r\n\r\n&gt; Caused by: org.postgresql.util.PSQLException: ERROR: Refreshing or Removal in Table &#187;simple_section&#171; hurt foreign key constraint &#187;fk_seat_section&#171;  of Table &#187;seat&#171;\r\n  Detail: To Key(id)=(1) is still pointed from table &#187;seat&#171;\r\n\r\nHow can I get the seats removed as well?\r\n\r\nAny help will be appreciated","title":"CascadeType.ALL not deleting Children of Children","body":"<p>I got the following structure:</p>\n<p><strong>SimpleSectionConfig.java</strong></p>\n<p>This Entity contains</p>\n<pre><code>@OneToMany(mappedBy = &quot;layout&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\nprivate List&lt;SimpleSection&gt; sections;\n</code></pre>\n<p><strong>SimpleSection.java</strong></p>\n<p>The SimpleSection Entity then contains</p>\n<pre><code>@OneToMany(mappedBy = &quot;section&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\nprivate List&lt;Seat&gt; seats;\n</code></pre>\n<p>When I delete by Id it seems like it tries to delete the sections which makes sense because of CascadeType.ALL.</p>\n<p>However there is also CascadeType.ALL for the attribute seats but the seats do not get removed</p>\n<p>I get the following Exception:</p>\n<blockquote>\n<p>Caused by: org.postgresql.util.PSQLException: FEHLER: Aktualisieren oder Löschen in Tabelle »simple_section« verletzt Fremdschlüssel-Constraint »fk_seat_section« von Tabelle »seat«\nDetail: Auf Schlüssel (id)=(1) wird noch aus Tabelle »seat« verwiesen.</p>\n</blockquote>\n<p>Which translates to:</p>\n<blockquote>\n<p>Caused by: org.postgresql.util.PSQLException: ERROR: Refreshing or Removal in Table »simple_section« hurt foreign key constraint »fk_seat_section«  of Table »seat«\nDetail: To Key(id)=(1) is still pointed from table »seat«</p>\n</blockquote>\n<p>How can I get the seats removed as well?</p>\n<p>Any help will be appreciated</p>\n"},{"tags":["java","spring-boot","logging","logback"],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693848051,"creation_date":1693848051,"question_id":77039617,"body_markdown":"We have a simple spring boot 3.1 app.\r\n\r\nThe application.properties has:\r\n\r\n    logging.level.root=INFO\r\n\r\nStill, the following loggers are being logged at DEBUG level:\r\n\r\n    org.springframework.web.servlet.DispatcherServlet\r\n    org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor\r\n    com.events.debeziumconnectorservice.controllers.HealthCheckController\r\n    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping\r\n    org.springframework.boot.actuate.endpoint.web.servlet.WebMvcEndpointHandlerMapping\r\n\r\nAny ideas?\r\n\r\nThe dependency tree looks like:\r\n\r\n    [INFO] --- dependency:3.5.0:tree (default-cli) @ events-cdc-connector ---\r\n    [INFO] com.mycompany.myproject.events:events-cdc-connector:jar:0.0.1-SNAPSHOT\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.1.0:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter:jar:3.1.0:compile\r\n    [INFO] |  |  +- org.springframework.boot:spring-boot:jar:3.1.0:compile\r\n    [INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.1.0:compile\r\n    [INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.1.0:compile\r\n    [INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.4.7:compile\r\n    [INFO] |  |  |  |  \\- ch.qos.logback:logback-core:jar:1.4.7:compile\r\n    [INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.20.0:compile\r\n    [INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.20.0:compile\r\n    [INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.7:compile\r\n    [INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\r\n    [INFO] |  |  \\- org.yaml:snakeyaml:jar:1.33:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:3.1.0:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.0:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.0:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.0:compile\r\n    [INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.0:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.0:compile\r\n    [INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.8:compile\r\n    [INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.8:compile\r\n    [INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.8:compile\r\n    [INFO] |  +- org.springframework:spring-web:jar:6.0.9:compile\r\n    [INFO] |  |  \\- org.springframework:spring-beans:jar:6.0.9:compile\r\n    [INFO] |  \\- org.springframework:spring-webmvc:jar:6.0.9:compile\r\n    [INFO] |     +- org.springframework:spring-aop:jar:6.0.9:compile\r\n    [INFO] |     \\- org.springframework:spring-expression:jar:6.0.9:compile\r\n    [INFO] +- org.springframework.kafka:spring-kafka:jar:3.0.5:compile\r\n    [INFO] |  +- org.springframework:spring-context:jar:6.0.9:compile\r\n    [INFO] |  +- org.springframework:spring-messaging:jar:6.0.9:compile\r\n    [INFO] |  +- org.springframework:spring-tx:jar:6.0.9:compile\r\n    [INFO] |  +- org.springframework.retry:spring-retry:jar:2.0.1:compile\r\n    [INFO] |  +- org.apache.kafka:kafka-clients:jar:3.4.0:compile\r\n    [INFO] |  |  +- com.github.luben:zstd-jni:jar:1.5.2-1:compile\r\n    [INFO] |  |  +- org.lz4:lz4-java:jar:1.8.0:runtime\r\n    [INFO] |  |  \\- org.xerial.snappy:snappy-java:jar:1.1.8.4:runtime\r\n    [INFO] |  +- io.micrometer:micrometer-observation:jar:1.11.0:compile\r\n    [INFO] |  |  \\- io.micrometer:micrometer-commons:jar:1.11.0:compile\r\n    [INFO] |  \\- com.google.code.findbugs:jsr305:jar:3.0.2:runtime\r\n    [INFO] +- org.projectlombok:lombok:jar:1.18.24:provided\r\n    [INFO] +- com.mysql:mysql-connector-j:jar:8.0.32:compile\r\n    [INFO] +- org.antlr:antlr4-runtime:jar:4.8:compile\r\n    [INFO] +- io.debezium:debezium-api:jar:2.1.4.Final:compile\r\n    [INFO] |  \\- org.slf4j:slf4j-api:jar:2.0.7:compile\r\n    [INFO] +- io.debezium:debezium-embedded:jar:2.1.4.Final:compile\r\n    [INFO] |  +- io.debezium:debezium-core:jar:2.1.4.Final:compile\r\n    [INFO] |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.15.0:compile\r\n    [INFO] |  +- org.apache.kafka:connect-api:jar:3.4.0:compile\r\n    [INFO] |  |  \\- javax.ws.rs:javax.ws.rs-api:jar:2.1.1:runtime\r\n    [INFO] |  +- org.apache.kafka:connect-runtime:jar:3.4.0:compile\r\n    [INFO] |  |  +- org.apache.kafka:connect-transforms:jar:3.4.0:compile\r\n    [INFO] |  |  +- org.apache.kafka:kafka-tools:jar:3.4.0:runtime\r\n    [INFO] |  |  |  +- org.apache.kafka:kafka-server-common:jar:3.4.0:runtime\r\n    [INFO] |  |  |  |  \\- com.yammer.metrics:metrics-core:jar:2.2.0:runtime\r\n    [INFO] |  |  |  \\- net.sourceforge.argparse4j:argparse4j:jar:0.7.0:runtime\r\n    [INFO] |  |  +- ch.qos.reload4j:reload4j:jar:1.2.19:runtime\r\n    [INFO] |  |  +- org.bitbucket.b_c:jose4j:jar:0.7.9:runtime\r\n    [INFO] |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.0:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.15.0:runtime\r\n    [INFO] |  |  |  +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.15.0:runtime\r\n    [INFO] |  |  |  \\- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.15.0:runtime\r\n    [INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:3.1.1:runtime\r\n    [INFO] |  |  |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:3.1.1:runtime\r\n    [INFO] |  |  |  |  \\- jakarta.inject:jakarta.inject-api:jar:2.0.1:runtime\r\n    [INFO] |  |  |  +- org.glassfish.jersey.core:jersey-common:jar:3.1.1:runtime\r\n    [INFO] |  |  |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.3:runtime\r\n    [INFO] |  |  |  +- org.glassfish.jersey.core:jersey-server:jar:3.1.1:runtime\r\n    [INFO] |  |  |  |  \\- org.glassfish.jersey.core:jersey-client:jar:3.1.1:runtime\r\n    [INFO] |  |  |  \\- jakarta.ws.rs:jakarta.ws.rs-api:jar:3.1.0:runtime\r\n    [INFO] |  |  +- org.glassfish.jersey.inject:jersey-hk2:jar:3.1.1:runtime\r\n    [INFO] |  |  |  +- org.glassfish.hk2:hk2-locator:jar:3.0.3:runtime\r\n    [INFO] |  |  |  |  +- org.glassfish.hk2.external:aopalliance-repackaged:jar:3.0.3:runtime\r\n    [INFO] |  |  |  |  +- org.glassfish.hk2:hk2-api:jar:3.0.3:runtime\r\n    [INFO] |  |  |  |  \\- org.glassfish.hk2:hk2-utils:jar:3.0.3:runtime\r\n    [INFO] |  |  |  \\- org.javassist:javassist:jar:3.29.0-GA:runtime\r\n    [INFO] |  |  +- javax.xml.bind:jaxb-api:jar:2.3.0:runtime\r\n    [INFO] |  |  +- javax.activation:activation:jar:1.1.1:runtime\r\n    [INFO] |  |  +- org.eclipse.jetty:jetty-server:jar:11.0.15:runtime\r\n    [INFO] |  |  |  +- org.eclipse.jetty.toolchain:jetty-jakarta-servlet-api:jar:5.0.2:runtime\r\n    [INFO] |  |  |  +- org.eclipse.jetty:jetty-http:jar:11.0.15:runtime\r\n    [INFO] |  |  |  \\- org.eclipse.jetty:jetty-io:jar:11.0.15:runtime\r\n    [INFO] |  |  +- org.eclipse.jetty:jetty-servlet:jar:11.0.15:runtime\r\n    [INFO] |  |  |  \\- org.eclipse.jetty:jetty-security:jar:11.0.15:runtime\r\n    [INFO] |  |  +- org.eclipse.jetty:jetty-servlets:jar:11.0.15:runtime\r\n    [INFO] |  |  |  \\- org.eclipse.jetty:jetty-util:jar:11.0.15:runtime\r\n    [INFO] |  |  +- org.eclipse.jetty:jetty-client:jar:11.0.15:runtime\r\n    [INFO] |  |  |  \\- org.eclipse.jetty:jetty-alpn-client:jar:11.0.15:runtime\r\n    [INFO] |  |  +- org.reflections:reflections:jar:0.9.12:runtime\r\n    [INFO] |  |  +- org.apache.maven:maven-artifact:jar:3.8.4:runtime\r\n    [INFO] |  |  |  +- org.codehaus.plexus:plexus-utils:jar:3.3.0:runtime\r\n    [INFO] |  |  |  \\- org.apache.commons:commons-lang3:jar:3.12.0:runtime\r\n    [INFO] |  |  \\- io.swagger.core.v3:swagger-annotations:jar:2.2.0:runtime\r\n    [INFO] |  +- org.apache.kafka:connect-json:jar:3.4.0:compile\r\n    [INFO] |  \\- org.apache.kafka:connect-file:jar:3.4.0:compile\r\n    [INFO] +- io.debezium:debezium-connector-mysql:jar:2.1.4.Final:compile\r\n    [INFO] |  +- io.debezium:debezium-storage-kafka:jar:2.1.4.Final:compile\r\n    [INFO] |  +- io.debezium:debezium-storage-file:jar:2.1.4.Final:compile\r\n    [INFO] |  +- io.debezium:debezium-ddl-parser:jar:2.1.4.Final:compile\r\n    [INFO] |  \\- com.zendesk:mysql-binlog-connector-java:jar:0.27.2:compile\r\n    [INFO] +- org.hibernate.validator:hibernate-validator:jar:8.0.0.Final:compile\r\n    [INFO] |  +- jakarta.validation:jakarta.validation-api:jar:3.0.2:compile\r\n    [INFO] |  +- org.jboss.logging:jboss-logging:jar:3.5.0.Final:compile\r\n    [INFO] |  \\- com.fasterxml:classmate:jar:1.5.1:compile\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-test:jar:3.1.0:test\r\n    [INFO] |  +- org.springframework.boot:spring-boot-test:jar:3.1.0:test\r\n    [INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.1.0:test\r\n    [INFO] |  +- com.jayway.jsonpath:json-path:jar:2.8.0:test\r\n    [INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:runtime\r\n    [INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:2.1.2:runtime\r\n    [INFO] |  +- net.minidev:json-smart:jar:2.4.10:test\r\n    [INFO] |  |  \\- net.minidev:accessors-smart:jar:2.4.9:test\r\n    [INFO] |  |     \\- org.ow2.asm:asm:jar:9.3:compile\r\n    [INFO] |  +- org.assertj:assertj-core:jar:3.24.2:test\r\n    [INFO] |  |  \\- net.bytebuddy:byte-buddy:jar:1.14.4:test\r\n    [INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test\r\n    [INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.3:test\r\n    [INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:test\r\n    [INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test\r\n    [INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:test\r\n    [INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\r\n    [INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.3:test\r\n    [INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:test\r\n    [INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.9.3:test\r\n    [INFO] |  +- org.mockito:mockito-core:jar:5.3.1:test\r\n    [INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.4:test\r\n    [INFO] |  |  \\- org.objenesis:objenesis:jar:3.3:test\r\n    [INFO] |  +- org.mockito:mockito-junit-jupiter:jar:5.3.1:test\r\n    [INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test\r\n    [INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\r\n    [INFO] |  +- org.springframework:spring-core:jar:6.0.9:compile\r\n    [INFO] |  |  \\- org.springframework:spring-jcl:jar:6.0.9:compile\r\n    [INFO] |  +- org.springframework:spring-test:jar:6.0.9:test\r\n    [INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-actuator:jar:3.1.0:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-actuator-autoconfigure:jar:3.1.0:compile\r\n    [INFO] |  |  \\- org.springframework.boot:spring-boot-actuator:jar:3.1.0:compile\r\n    [INFO] |  \\- io.micrometer:micrometer-core:jar:1.11.0:compile\r\n    [INFO] |     +- org.hdrhistogram:HdrHistogram:jar:2.1.12:runtime\r\n    [INFO] |     \\- org.latencyutils:LatencyUtils:jar:2.0.3:runtime\r\n    [INFO] +- io.micrometer:micrometer-registry-datadog:jar:1.11.0:compile\r\n    [INFO] \\- com.datadoghq:java-dogstatsd-client:jar:4.2.0:compile\r\n    [INFO]    \\- com.github.jnr:jnr-unixsocket:jar:0.36:compile\r\n    [INFO]       +- com.github.jnr:jnr-ffi:jar:2.1.16:compile\r\n    [INFO]       |  +- com.github.jnr:jffi:jar:1.2.23:compile\r\n    [INFO]       |  +- com.github.jnr:jffi:jar:native:1.2.23:runtime\r\n    [INFO]       |  +- org.ow2.asm:asm-commons:jar:7.1:compile\r\n    [INFO]       |  +- org.ow2.asm:asm-analysis:jar:7.1:compile\r\n    [INFO]       |  +- org.ow2.asm:asm-tree:jar:7.1:compile\r\n    [INFO]       |  +- org.ow2.asm:asm-util:jar:7.1:compile\r\n    [INFO]       |  +- com.github.jnr:jnr-a64asm:jar:1.0.0:compile\r\n    [INFO]       |  \\- com.github.jnr:jnr-x86asm:jar:1.0.2:compile\r\n    [INFO]       +- com.github.jnr:jnr-constants:jar:0.9.17:compile\r\n    [INFO]       +- com.github.jnr:jnr-enxio:jar:0.30:compile\r\n    [INFO]       \\- com.github.jnr:jnr-posix:jar:3.0.61:compile\r\n","title":"spring boot logging some loggers at DEBUG even though root logger is at INFO","body":"<p>We have a simple spring boot 3.1 app.</p>\n<p>The application.properties has:</p>\n<pre><code>logging.level.root=INFO\n</code></pre>\n<p>Still, the following loggers are being logged at DEBUG level:</p>\n<pre><code>org.springframework.web.servlet.DispatcherServlet\norg.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor\ncom.events.debeziumconnectorservice.controllers.HealthCheckController\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping\norg.springframework.boot.actuate.endpoint.web.servlet.WebMvcEndpointHandlerMapping\n</code></pre>\n<p>Any ideas?</p>\n<p>The dependency tree looks like:</p>\n<pre><code>[INFO] --- dependency:3.5.0:tree (default-cli) @ events-cdc-connector ---\n[INFO] com.mycompany.myproject.events:events-cdc-connector:jar:0.0.1-SNAPSHOT\n[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.1.0:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter:jar:3.1.0:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot:jar:3.1.0:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.1.0:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.1.0:compile\n[INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.4.7:compile\n[INFO] |  |  |  |  \\- ch.qos.logback:logback-core:jar:1.4.7:compile\n[INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.20.0:compile\n[INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.20.0:compile\n[INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.7:compile\n[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\n[INFO] |  |  \\- org.yaml:snakeyaml:jar:1.33:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:3.1.0:compile\n[INFO] |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.0:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.0:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.0:compile\n[INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.0:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.0:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.8:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.8:compile\n[INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.8:compile\n[INFO] |  +- org.springframework:spring-web:jar:6.0.9:compile\n[INFO] |  |  \\- org.springframework:spring-beans:jar:6.0.9:compile\n[INFO] |  \\- org.springframework:spring-webmvc:jar:6.0.9:compile\n[INFO] |     +- org.springframework:spring-aop:jar:6.0.9:compile\n[INFO] |     \\- org.springframework:spring-expression:jar:6.0.9:compile\n[INFO] +- org.springframework.kafka:spring-kafka:jar:3.0.5:compile\n[INFO] |  +- org.springframework:spring-context:jar:6.0.9:compile\n[INFO] |  +- org.springframework:spring-messaging:jar:6.0.9:compile\n[INFO] |  +- org.springframework:spring-tx:jar:6.0.9:compile\n[INFO] |  +- org.springframework.retry:spring-retry:jar:2.0.1:compile\n[INFO] |  +- org.apache.kafka:kafka-clients:jar:3.4.0:compile\n[INFO] |  |  +- com.github.luben:zstd-jni:jar:1.5.2-1:compile\n[INFO] |  |  +- org.lz4:lz4-java:jar:1.8.0:runtime\n[INFO] |  |  \\- org.xerial.snappy:snappy-java:jar:1.1.8.4:runtime\n[INFO] |  +- io.micrometer:micrometer-observation:jar:1.11.0:compile\n[INFO] |  |  \\- io.micrometer:micrometer-commons:jar:1.11.0:compile\n[INFO] |  \\- com.google.code.findbugs:jsr305:jar:3.0.2:runtime\n[INFO] +- org.projectlombok:lombok:jar:1.18.24:provided\n[INFO] +- com.mysql:mysql-connector-j:jar:8.0.32:compile\n[INFO] +- org.antlr:antlr4-runtime:jar:4.8:compile\n[INFO] +- io.debezium:debezium-api:jar:2.1.4.Final:compile\n[INFO] |  \\- org.slf4j:slf4j-api:jar:2.0.7:compile\n[INFO] +- io.debezium:debezium-embedded:jar:2.1.4.Final:compile\n[INFO] |  +- io.debezium:debezium-core:jar:2.1.4.Final:compile\n[INFO] |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.15.0:compile\n[INFO] |  +- org.apache.kafka:connect-api:jar:3.4.0:compile\n[INFO] |  |  \\- javax.ws.rs:javax.ws.rs-api:jar:2.1.1:runtime\n[INFO] |  +- org.apache.kafka:connect-runtime:jar:3.4.0:compile\n[INFO] |  |  +- org.apache.kafka:connect-transforms:jar:3.4.0:compile\n[INFO] |  |  +- org.apache.kafka:kafka-tools:jar:3.4.0:runtime\n[INFO] |  |  |  +- org.apache.kafka:kafka-server-common:jar:3.4.0:runtime\n[INFO] |  |  |  |  \\- com.yammer.metrics:metrics-core:jar:2.2.0:runtime\n[INFO] |  |  |  \\- net.sourceforge.argparse4j:argparse4j:jar:0.7.0:runtime\n[INFO] |  |  +- ch.qos.reload4j:reload4j:jar:1.2.19:runtime\n[INFO] |  |  +- org.bitbucket.b_c:jose4j:jar:0.7.9:runtime\n[INFO] |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.0:compile\n[INFO] |  |  +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.15.0:runtime\n[INFO] |  |  |  +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.15.0:runtime\n[INFO] |  |  |  \\- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.15.0:runtime\n[INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:3.1.1:runtime\n[INFO] |  |  |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:3.1.1:runtime\n[INFO] |  |  |  |  \\- jakarta.inject:jakarta.inject-api:jar:2.0.1:runtime\n[INFO] |  |  |  +- org.glassfish.jersey.core:jersey-common:jar:3.1.1:runtime\n[INFO] |  |  |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.3:runtime\n[INFO] |  |  |  +- org.glassfish.jersey.core:jersey-server:jar:3.1.1:runtime\n[INFO] |  |  |  |  \\- org.glassfish.jersey.core:jersey-client:jar:3.1.1:runtime\n[INFO] |  |  |  \\- jakarta.ws.rs:jakarta.ws.rs-api:jar:3.1.0:runtime\n[INFO] |  |  +- org.glassfish.jersey.inject:jersey-hk2:jar:3.1.1:runtime\n[INFO] |  |  |  +- org.glassfish.hk2:hk2-locator:jar:3.0.3:runtime\n[INFO] |  |  |  |  +- org.glassfish.hk2.external:aopalliance-repackaged:jar:3.0.3:runtime\n[INFO] |  |  |  |  +- org.glassfish.hk2:hk2-api:jar:3.0.3:runtime\n[INFO] |  |  |  |  \\- org.glassfish.hk2:hk2-utils:jar:3.0.3:runtime\n[INFO] |  |  |  \\- org.javassist:javassist:jar:3.29.0-GA:runtime\n[INFO] |  |  +- javax.xml.bind:jaxb-api:jar:2.3.0:runtime\n[INFO] |  |  +- javax.activation:activation:jar:1.1.1:runtime\n[INFO] |  |  +- org.eclipse.jetty:jetty-server:jar:11.0.15:runtime\n[INFO] |  |  |  +- org.eclipse.jetty.toolchain:jetty-jakarta-servlet-api:jar:5.0.2:runtime\n[INFO] |  |  |  +- org.eclipse.jetty:jetty-http:jar:11.0.15:runtime\n[INFO] |  |  |  \\- org.eclipse.jetty:jetty-io:jar:11.0.15:runtime\n[INFO] |  |  +- org.eclipse.jetty:jetty-servlet:jar:11.0.15:runtime\n[INFO] |  |  |  \\- org.eclipse.jetty:jetty-security:jar:11.0.15:runtime\n[INFO] |  |  +- org.eclipse.jetty:jetty-servlets:jar:11.0.15:runtime\n[INFO] |  |  |  \\- org.eclipse.jetty:jetty-util:jar:11.0.15:runtime\n[INFO] |  |  +- org.eclipse.jetty:jetty-client:jar:11.0.15:runtime\n[INFO] |  |  |  \\- org.eclipse.jetty:jetty-alpn-client:jar:11.0.15:runtime\n[INFO] |  |  +- org.reflections:reflections:jar:0.9.12:runtime\n[INFO] |  |  +- org.apache.maven:maven-artifact:jar:3.8.4:runtime\n[INFO] |  |  |  +- org.codehaus.plexus:plexus-utils:jar:3.3.0:runtime\n[INFO] |  |  |  \\- org.apache.commons:commons-lang3:jar:3.12.0:runtime\n[INFO] |  |  \\- io.swagger.core.v3:swagger-annotations:jar:2.2.0:runtime\n[INFO] |  +- org.apache.kafka:connect-json:jar:3.4.0:compile\n[INFO] |  \\- org.apache.kafka:connect-file:jar:3.4.0:compile\n[INFO] +- io.debezium:debezium-connector-mysql:jar:2.1.4.Final:compile\n[INFO] |  +- io.debezium:debezium-storage-kafka:jar:2.1.4.Final:compile\n[INFO] |  +- io.debezium:debezium-storage-file:jar:2.1.4.Final:compile\n[INFO] |  +- io.debezium:debezium-ddl-parser:jar:2.1.4.Final:compile\n[INFO] |  \\- com.zendesk:mysql-binlog-connector-java:jar:0.27.2:compile\n[INFO] +- org.hibernate.validator:hibernate-validator:jar:8.0.0.Final:compile\n[INFO] |  +- jakarta.validation:jakarta.validation-api:jar:3.0.2:compile\n[INFO] |  +- org.jboss.logging:jboss-logging:jar:3.5.0.Final:compile\n[INFO] |  \\- com.fasterxml:classmate:jar:1.5.1:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:3.1.0:test\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:3.1.0:test\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.1.0:test\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.8.0:test\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:runtime\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:2.1.2:runtime\n[INFO] |  +- net.minidev:json-smart:jar:2.4.10:test\n[INFO] |  |  \\- net.minidev:accessors-smart:jar:2.4.9:test\n[INFO] |  |     \\- org.ow2.asm:asm:jar:9.3:compile\n[INFO] |  +- org.assertj:assertj-core:jar:3.24.2:test\n[INFO] |  |  \\- net.bytebuddy:byte-buddy:jar:1.14.4:test\n[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.3:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:test\n[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test\n[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:test\n[INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.3:test\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:test\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.9.3:test\n[INFO] |  +- org.mockito:mockito-core:jar:5.3.1:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.4:test\n[INFO] |  |  \\- org.objenesis:objenesis:jar:3.3:test\n[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:5.3.1:test\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\n[INFO] |  +- org.springframework:spring-core:jar:6.0.9:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:6.0.9:compile\n[INFO] |  +- org.springframework:spring-test:jar:6.0.9:test\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\n[INFO] +- org.springframework.boot:spring-boot-starter-actuator:jar:3.1.0:compile\n[INFO] |  +- org.springframework.boot:spring-boot-actuator-autoconfigure:jar:3.1.0:compile\n[INFO] |  |  \\- org.springframework.boot:spring-boot-actuator:jar:3.1.0:compile\n[INFO] |  \\- io.micrometer:micrometer-core:jar:1.11.0:compile\n[INFO] |     +- org.hdrhistogram:HdrHistogram:jar:2.1.12:runtime\n[INFO] |     \\- org.latencyutils:LatencyUtils:jar:2.0.3:runtime\n[INFO] +- io.micrometer:micrometer-registry-datadog:jar:1.11.0:compile\n[INFO] \\- com.datadoghq:java-dogstatsd-client:jar:4.2.0:compile\n[INFO]    \\- com.github.jnr:jnr-unixsocket:jar:0.36:compile\n[INFO]       +- com.github.jnr:jnr-ffi:jar:2.1.16:compile\n[INFO]       |  +- com.github.jnr:jffi:jar:1.2.23:compile\n[INFO]       |  +- com.github.jnr:jffi:jar:native:1.2.23:runtime\n[INFO]       |  +- org.ow2.asm:asm-commons:jar:7.1:compile\n[INFO]       |  +- org.ow2.asm:asm-analysis:jar:7.1:compile\n[INFO]       |  +- org.ow2.asm:asm-tree:jar:7.1:compile\n[INFO]       |  +- org.ow2.asm:asm-util:jar:7.1:compile\n[INFO]       |  +- com.github.jnr:jnr-a64asm:jar:1.0.0:compile\n[INFO]       |  \\- com.github.jnr:jnr-x86asm:jar:1.0.2:compile\n[INFO]       +- com.github.jnr:jnr-constants:jar:0.9.17:compile\n[INFO]       +- com.github.jnr:jnr-enxio:jar:0.30:compile\n[INFO]       \\- com.github.jnr:jnr-posix:jar:3.0.61:compile\n</code></pre>\n"},{"tags":["java","gzip","chunks"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1693819806,"post_id":77036447,"comment_id":135805902,"body_markdown":"Change your expectations?","body":"Change your expectations?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1693821657,"post_id":77036447,"comment_id":135806231,"body_markdown":"After `startTime = System.currentTimeMillis()` you are loading two inner classes (and their dependencies), initializing the backend for lambda expressions, starting a new thread, etc., all adding to the time. Further, you are using the single-byte write method no serious application should ever use. Btw, `FlushableGZIPOutputStream` is obsolete since Java&#160;7 and when you use `GZIPOutputStream` directly [you can specify the buffer size](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/zip/GZIPOutputStream.html#%3Cinit%3E(java.io.OutputStream,int,boolean)) without subclassing","body":"After <code>startTime = System.currentTimeMillis()</code> you are loading two inner classes (and their dependencies), initializing the backend for lambda expressions, starting a new thread, etc., all adding to the time. Further, you are using the single-byte write method no serious application should ever use. Btw, <code>FlushableGZIPOutputStream</code> is obsolete since Java 7 and when you use <code>GZIPOutputStream</code> directly <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/zip/GZIPOutputStream.html#%3Cinit%3E(java.io.OutputStream,int,boolean)\" rel=\"nofollow noreferrer\">you can specify the buffer size</a> without subclassing"},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1693825187,"post_id":77036447,"comment_id":135806847,"body_markdown":"@Holger Not jdk7 but coyote. Starting the new thread, initializing lambda, load inner clases and their dependencies, all of this took 0ms as you can see in the first line of output. The buffer-size can be ignored but helps in visiualizing as I wrote.","body":"@Holger Not jdk7 but coyote. Starting the new thread, initializing lambda, load inner clases and their dependencies, all of this took 0ms as you can see in the first line of output. The buffer-size can be ignored but helps in visiualizing as I wrote."},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1693825634,"post_id":77036447,"comment_id":135806913,"body_markdown":"Have you an absolute need for constant speed for your compression stream? If so what is it? It looks like an [XY problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem) to me, synchronizing things is an extremely hard problem, even if the data is uniform, that&#39;s why many systems use buffers. Can a buffer solve your primary need?","body":"Have you an absolute need for constant speed for your compression stream? If so what is it? It looks like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> to me, synchronizing things is an extremely hard problem, even if the data is uniform, that&#39;s why many systems use buffers. Can a buffer solve your primary need?"},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1693826332,"post_id":77036447,"comment_id":135807044,"body_markdown":"@Kaddath AFAIK a buffer is alreay used. It might matter for energy-efficiency because if I calculate correctly a 1.2kb file (throu a 64kb/s bandwidth) is transported 200ms without compression but 400ms with compression. So you loose speed and electricity if you use compression.","body":"@Kaddath AFAIK a buffer is alreay used. It might matter for energy-efficiency because if I calculate correctly a 1.2kb file (throu a 64kb/s bandwidth) is transported 200ms without compression but 400ms with compression. So you loose speed and electricity if you use compression."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693826760,"post_id":77036447,"comment_id":135807114,"body_markdown":"You are assuming that `System.currentTimeMillis()` was a reliable way to measure elapsed time which it is not. But even if we assume that the time is spent after the first milestone, the first time you’re doing a string concatenation and a `System.out.println` is between the first and second milestone. I don’t know what you want to tell me with “Not jdk7 but coyote”. I know that the class `FlushableGZIPOutputStream` is from a 3rd party library. Still, it’s only purpose is to work-around a limitation that doesn’t exist anymore in Java&#160;7, which makes this class obsolete.","body":"You are assuming that <code>System.currentTimeMillis()</code> was a reliable way to measure elapsed time which it is not. But even if we assume that the time is spent after the first milestone, the first time you’re doing a string concatenation and a <code>System.out.println</code> is between the first and second milestone. I don’t know what you want to tell me with “Not jdk7 but coyote”. I know that the class <code>FlushableGZIPOutputStream</code> is from a 3rd party library. Still, it’s only purpose is to work-around a limitation that doesn’t exist anymore in Java 7, which makes this class obsolete."},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1693826898,"post_id":77036447,"comment_id":135807140,"body_markdown":"Yes there is a threshold under which compression adds time, when I had to implement a compression tool we realized that it was better to disable it under a certain length, which you probably have to test yourself (and it won&#39;t be universally consistent, in our case it was not vital so an average threshold was fine). I fear constant timing will not be your solution, as you can only slow things down to enforce a certain rate","body":"Yes there is a threshold under which compression adds time, when I had to implement a compression tool we realized that it was better to disable it under a certain length, which you probably have to test yourself (and it won&#39;t be universally consistent, in our case it was not vital so an average threshold was fine). I fear constant timing will not be your solution, as you can only slow things down to enforce a certain rate"},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1693827222,"post_id":77036447,"comment_id":135807203,"body_markdown":"@Holger Ah, now I got your point. As the FlushableGZIPOutputStream documentation points out the reason are unsolved bugs, since all the bugs that justify the existence of the FlushableGZIPOutputStream-class are solved, I should not use FlushableGZIPOutputStream anymore. That is a perfect answer from my point of view. could you write this as an answer? Ill mark that as the solution. Oh, let me check if the problem is solved then first.","body":"@Holger Ah, now I got your point. As the FlushableGZIPOutputStream documentation points out the reason are unsolved bugs, since all the bugs that justify the existence of the FlushableGZIPOutputStream-class are solved, I should not use FlushableGZIPOutputStream anymore. That is a perfect answer from my point of view. could you write this as an answer? Ill mark that as the solution. Oh, let me check if the problem is solved then first."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693827924,"post_id":77036447,"comment_id":135807346,"body_markdown":"That doesn’t mean that it solves your timing problem. It just means you can simplify your code and eliminate one potential problem source. The actual issue seems to be that GZIP buffers far more than you think, so your loop is far ahead of what the `ByteArrayOutputStream` received, then, a large number of small write requests are issued. Add a `System.out.print(&quot;.&quot;);` at the `sleep` call (which is by the way a `static` method, so you can [and should] write `Thread.sleep(1)`) and you’ll see where the time is spent.","body":"That doesn’t mean that it solves your timing problem. It just means you can simplify your code and eliminate one potential problem source. The actual issue seems to be that GZIP buffers far more than you think, so your loop is far ahead of what the <code>ByteArrayOutputStream</code> received, then, a large number of small write requests are issued. Add a <code>System.out.print(&quot;.&quot;);</code> at the <code>sleep</code> call (which is by the way a <code>static</code> method, so you can [and should] write <code>Thread.sleep(1)</code>) and you’ll see where the time is spent."},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1693828310,"post_id":77036447,"comment_id":135807430,"body_markdown":"@Holger I changed the code according to your suggestions. It looks cleaner now, the problem might remain. I mean at some point, the deflator decide to extract a chunk from a couple of 2048-buffers and write multiple 2048-buffers in a bulk update.","body":"@Holger I changed the code according to your suggestions. It looks cleaner now, the problem might remain. I mean at some point, the deflator decide to extract a chunk from a couple of 2048-buffers and write multiple 2048-buffers in a bulk update."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693829073,"post_id":77036447,"comment_id":135807575,"body_markdown":"That’s close to what I said; the GZIP compression operates on a much larger buffer. If you specify a buffer size of, e.g. 13000 to `GZIPOutputStream`, you get a steady sequence of write requests at almost fixed rate. Well, if the data is large enough…","body":"That’s close to what I said; the GZIP compression operates on a much larger buffer. If you specify a buffer size of, e.g. 13000 to <code>GZIPOutputStream</code>, you get a steady sequence of write requests at almost fixed rate. Well, if the data is large enough…"},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1693829435,"post_id":77036447,"comment_id":135807647,"body_markdown":"@Holger Ok, and can we reduce that 13000?","body":"@Holger Ok, and can we reduce that 13000?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693830154,"post_id":77036447,"comment_id":135807783,"body_markdown":"I think, you are simply using the wrong tool for your job. The delays are caused by the `sleep` calls. If you want to reduce the bandwidth and can’t configure the socket to have a reduced bandwidth in the first place, implement a kind of `ThrottlingOutputStream` to operate between the `GZIPOutputStream` and the target `OutputStream` rather than trying to control the timing before passing data to the `GZIPOutputStream`.","body":"I think, you are simply using the wrong tool for your job. The delays are caused by the <code>sleep</code> calls. If you want to reduce the bandwidth and can’t configure the socket to have a reduced bandwidth in the first place, implement a kind of <code>ThrottlingOutputStream</code> to operate between the <code>GZIPOutputStream</code> and the target <code>OutputStream</code> rather than trying to control the timing before passing data to the <code>GZIPOutputStream</code>."},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1693832056,"post_id":77036447,"comment_id":135808162,"body_markdown":"@Holger If I remove the sleep I got: 1ms for the header, **8**ms for the first line of the first chunk and **9**ms for the first line of the second chunk. That might be constant for the chunks but is not constant for the first lines of every chunk. I introduced the sleep to have others - who may have a faster pc than me - be able to reproduce the problem. Others, having a faster pc than me, might have all-0-timings and downvote and close the question for not-reproducable.","body":"@Holger If I remove the sleep I got: 1ms for the header, <b>8</b>ms for the first line of the first chunk and <b>9</b>ms for the first line of the second chunk. That might be constant for the chunks but is not constant for the first lines of every chunk. I introduced the sleep to have others - who may have a faster pc than me - be able to reproduce the problem. Others, having a faster pc than me, might have all-0-timings and downvote and close the question for not-reproducable."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693847946,"creation_date":1693847946,"answer_id":77039606,"question_id":77036447,"body_markdown":"The jitter in the output timing is due to the fact that to compress the data the `GZIPOutputStream` (actually, the deflater code in [deflate.c](https://github.com/openjdk/jdk17u/blob/master/src/java.base/share/native/libzip/zlib/deflate.c)) needs to buffer the data written into it and only emits a block of compressed data when a certain amount of input data has been added to it.\r\n\r\nI&#39;ve modified your code to get a better understanding of this behaviour:\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.util.Random;\r\n    import java.util.zip.GZIPOutputStream;\r\n    \r\n    public class Snippet {\r\n    \r\n        private static long bytesUncompressed = 0;\r\n        private static long prevMilestone = 0;\r\n    \r\n        public static void main(final String[] args) throws Exception {\r\n            Random r = new Random();\r\n            long startTime = System.currentTimeMillis();\r\n            ByteArrayOutputStream verboseBAOS = new ByteArrayOutputStream() {\r\n                @Override\r\n                public synchronized void write(final byte[] b, final int off, final int len) {\r\n                    long milestone = System.currentTimeMillis() - startTime;\r\n                    System.out.printf(&quot;%n   Wrote (%d bytes, uncompressed: %d, timediff=%d) at ms: %d%n&quot;, len, bytesUncompressed, milestone- prevMilestone, milestone);\r\n                    prevMilestone = milestone;\r\n                    bytesUncompressed = 0;\r\n                }\r\n            };\r\n            GZIPOutputStream bigChunkOs = new GZIPOutputStream(verboseBAOS, 16384);\r\n            new Thread(() -&gt; {\r\n                try {\r\n                    for (int i = 0; i &lt; 2048000; i++) {\r\n                        bytesUncompressed++;\r\n                        bigChunkOs.write(r.nextInt(&#39;A&#39;, &#39;z&#39;));\r\n                        if (i % 100 == 0) {\r\n                            Thread.sleep(1);\r\n                        }\r\n                    }\r\n                    bigChunkOs.close();\r\n                } catch (Exception e) {\r\n                }\r\n            }).start();\r\n        }\r\n    }\r\n\r\nThis code produces on my machine the following output (only the first few lines):\r\n\r\n    Wrote (10 bytes, uncompressed: 0, timediff=1) at ms: 1\r\n    Wrote (12599 bytes, uncompressed: 17287, timediff=461) at ms: 462\r\n    Wrote (12776 bytes, uncompressed: 17251, timediff=475) at ms: 937\r\n    Wrote (12737 bytes, uncompressed: 17191, timediff=434) at ms: 1371\r\n    Wrote (12805 bytes, uncompressed: 17292, timediff=439) at ms: 1810\r\n    Wrote (12768 bytes, uncompressed: 17240, timediff=450) at ms: 2260\r\n    Wrote (12740 bytes, uncompressed: 17201, timediff=442) at ms: 2702\r\n    Wrote (12755 bytes, uncompressed: 17217, timediff=439) at ms: 3141\r\n    Wrote (12742 bytes, uncompressed: 17203, timediff=429) at ms: 3570\r\n    Wrote (12754 bytes, uncompressed: 17216, timediff=431) at ms: 4001\r\n\r\nFrom this it seems that you need to add about 17000 bytes until the deflater writes the first block of compressed data into the underlying OutputStream (the very first block of 10 bytes is the GZIP header) and continues to do so every time you add about 17000 more bytes.\r\n\r\nThe timing for each block is about 430ms - 460ms (this may be due to load on my machine and other factors).\r\n\r\nWhen I compare these numbers with your sample code then the timing your observe actually makes sense:\r\n\r\n- a first block is written into the OutputStream after 207ms, after you&#39;ve added about 17000 bytes of input data and this first block is about 12000 bytes (actually 6*2048 + 367 bytes of output data)\r\n- the second block is written into the OutputStream after 243ms when you close the GZIPOutputStream. This block is from about 3000 bytes of input data and is 2048+483 bytes of output data.","title":"How to have constant streamspeed of a GZIP compression?","body":"<p>The jitter in the output timing is due to the fact that to compress the data the <code>GZIPOutputStream</code> (actually, the deflater code in <a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.base/share/native/libzip/zlib/deflate.c\" rel=\"nofollow noreferrer\">deflate.c</a>) needs to buffer the data written into it and only emits a block of compressed data when a certain amount of input data has been added to it.</p>\n<p>I've modified your code to get a better understanding of this behaviour:</p>\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.util.Random;\nimport java.util.zip.GZIPOutputStream;\n\npublic class Snippet {\n\n    private static long bytesUncompressed = 0;\n    private static long prevMilestone = 0;\n\n    public static void main(final String[] args) throws Exception {\n        Random r = new Random();\n        long startTime = System.currentTimeMillis();\n        ByteArrayOutputStream verboseBAOS = new ByteArrayOutputStream() {\n            @Override\n            public synchronized void write(final byte[] b, final int off, final int len) {\n                long milestone = System.currentTimeMillis() - startTime;\n                System.out.printf(&quot;%n   Wrote (%d bytes, uncompressed: %d, timediff=%d) at ms: %d%n&quot;, len, bytesUncompressed, milestone- prevMilestone, milestone);\n                prevMilestone = milestone;\n                bytesUncompressed = 0;\n            }\n        };\n        GZIPOutputStream bigChunkOs = new GZIPOutputStream(verboseBAOS, 16384);\n        new Thread(() -&gt; {\n            try {\n                for (int i = 0; i &lt; 2048000; i++) {\n                    bytesUncompressed++;\n                    bigChunkOs.write(r.nextInt('A', 'z'));\n                    if (i % 100 == 0) {\n                        Thread.sleep(1);\n                    }\n                }\n                bigChunkOs.close();\n            } catch (Exception e) {\n            }\n        }).start();\n    }\n}\n</code></pre>\n<p>This code produces on my machine the following output (only the first few lines):</p>\n<pre><code>Wrote (10 bytes, uncompressed: 0, timediff=1) at ms: 1\nWrote (12599 bytes, uncompressed: 17287, timediff=461) at ms: 462\nWrote (12776 bytes, uncompressed: 17251, timediff=475) at ms: 937\nWrote (12737 bytes, uncompressed: 17191, timediff=434) at ms: 1371\nWrote (12805 bytes, uncompressed: 17292, timediff=439) at ms: 1810\nWrote (12768 bytes, uncompressed: 17240, timediff=450) at ms: 2260\nWrote (12740 bytes, uncompressed: 17201, timediff=442) at ms: 2702\nWrote (12755 bytes, uncompressed: 17217, timediff=439) at ms: 3141\nWrote (12742 bytes, uncompressed: 17203, timediff=429) at ms: 3570\nWrote (12754 bytes, uncompressed: 17216, timediff=431) at ms: 4001\n</code></pre>\n<p>From this it seems that you need to add about 17000 bytes until the deflater writes the first block of compressed data into the underlying OutputStream (the very first block of 10 bytes is the GZIP header) and continues to do so every time you add about 17000 more bytes.</p>\n<p>The timing for each block is about 430ms - 460ms (this may be due to load on my machine and other factors).</p>\n<p>When I compare these numbers with your sample code then the timing your observe actually makes sense:</p>\n<ul>\n<li>a first block is written into the OutputStream after 207ms, after you've added about 17000 bytes of input data and this first block is about 12000 bytes (actually 6*2048 + 367 bytes of output data)</li>\n<li>the second block is written into the OutputStream after 243ms when you close the GZIPOutputStream. This block is from about 3000 bytes of input data and is 2048+483 bytes of output data.</li>\n</ul>\n"}],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693847946,"creation_date":1693818676,"question_id":77036447,"body_markdown":"I try to compress-stream a long running process&#39;s output. The process is streaming by a constant speed. The compressed output is at a inconstant speed but I do not know why.\r\n\r\nExample: \r\n\r\n\t\r\n\timport java.io.ByteArrayOutputStream;\r\n\timport java.util.Random;\r\n\timport java.util.zip.GZIPOutputStream;\r\n\t\r\n\tpublic class Snippet {\r\n\t\r\n\t\tpublic static void main(final String[] args) throws Exception {\r\n\t\t\tlong startTime = System.currentTimeMillis();\r\n\t\t\tByteArrayOutputStream verboseBAOS = new ByteArrayOutputStream() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic synchronized void write(final byte[] b, final int off, final int len) {\r\n\t\t\t\t\tlong milestone = System.currentTimeMillis() - startTime;\r\n\t\t\t\t\tSystem.out.println(&quot;   Wrote (&quot; + len + &quot; bytes) at ms: &quot; + milestone);\r\n\t\t\t\t\tsuper.write(b, off, len);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tGZIPOutputStream bigChunkOs = new GZIPOutputStream(verboseBAOS, 2048);\r\n\t\t\tnew Thread(() -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfor (int i = 0; i &lt; 20480; i++) {\r\n\t\t\t\t\t\tbigChunkOs.write(new Random().nextInt(&#39;A&#39;, &#39;z&#39;));\r\n\t\t\t\t\t\tif (i % 100 == 0) {\r\n\t\t\t\t\t\t\tSystem.out.print(&quot;.&quot;);\r\n\t\t\t\t\t\t\tThread.sleep(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbigChunkOs.close();\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t}\r\n\t\t\t}).start();\r\n\t\t}\r\n\t}\r\n\r\nThis is my output:\r\n\r\n\t       Wrote (10 bytes) at ms: 1\r\n\t..............................................................................................................................................................................   Wrote (2048 bytes) at ms: 207\r\n\t      Wrote (2048 bytes) at ms: 207\r\n\t      Wrote (2048 bytes) at ms: 207\r\n\t      Wrote (2048 bytes) at ms: 207\r\n\t      Wrote (2048 bytes) at ms: 207\r\n\t      Wrote (2048 bytes) at ms: 207\r\n\t      Wrote (367 bytes) at ms: 207\r\n\t   ...............................   Wrote (2048 bytes) at ms: 243\r\n\t      Wrote (483 bytes) at ms: 243\r\n\r\nAs you can see, we have 3 steps.\r\n\r\n1. Header (~10ms)\r\n2. First block (~207ms)\r\n3. Second block (~243ms)\r\n\r\nBut I expect more balanced blocks without that ~203ms gap. \r\n\r\nWhat to do?","title":"How to have constant streamspeed of a GZIP compression?","body":"<p>I try to compress-stream a long running process's output. The process is streaming by a constant speed. The compressed output is at a inconstant speed but I do not know why.</p>\n<p>Example:</p>\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.util.Random;\nimport java.util.zip.GZIPOutputStream;\n\npublic class Snippet {\n\n    public static void main(final String[] args) throws Exception {\n        long startTime = System.currentTimeMillis();\n        ByteArrayOutputStream verboseBAOS = new ByteArrayOutputStream() {\n            @Override\n            public synchronized void write(final byte[] b, final int off, final int len) {\n                long milestone = System.currentTimeMillis() - startTime;\n                System.out.println(&quot;   Wrote (&quot; + len + &quot; bytes) at ms: &quot; + milestone);\n                super.write(b, off, len);\n            }\n        };\n        GZIPOutputStream bigChunkOs = new GZIPOutputStream(verboseBAOS, 2048);\n        new Thread(() -&gt; {\n            try {\n                for (int i = 0; i &lt; 20480; i++) {\n                    bigChunkOs.write(new Random().nextInt('A', 'z'));\n                    if (i % 100 == 0) {\n                        System.out.print(&quot;.&quot;);\n                        Thread.sleep(1);\n                    }\n                }\n                bigChunkOs.close();\n            } catch (Exception e) {\n            }\n        }).start();\n    }\n}\n</code></pre>\n<p>This is my output:</p>\n<pre><code>       Wrote (10 bytes) at ms: 1\n..............................................................................................................................................................................   Wrote (2048 bytes) at ms: 207\n      Wrote (2048 bytes) at ms: 207\n      Wrote (2048 bytes) at ms: 207\n      Wrote (2048 bytes) at ms: 207\n      Wrote (2048 bytes) at ms: 207\n      Wrote (2048 bytes) at ms: 207\n      Wrote (367 bytes) at ms: 207\n   ...............................   Wrote (2048 bytes) at ms: 243\n      Wrote (483 bytes) at ms: 243\n</code></pre>\n<p>As you can see, we have 3 steps.</p>\n<ol>\n<li>Header (~10ms)</li>\n<li>First block (~207ms)</li>\n<li>Second block (~243ms)</li>\n</ol>\n<p>But I expect more balanced blocks without that ~203ms gap.</p>\n<p>What to do?</p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1693847964,"post_id":77039545,"comment_id":135811114,"body_markdown":"You could use reflection or create an `ItemObject` class that holds an `Object` and a `Class`,  The application program would pass a `List` of `ItemObject` instances to your library.","body":"You could use reflection or create an <code>ItemObject</code> class that holds an <code>Object</code> and a <code>Class</code>,  The application program would pass a <code>List</code> of <code>ItemObject</code> instances to your library."},{"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"score":1,"creation_date":1693849637,"post_id":77039545,"comment_id":135811370,"body_markdown":"@GilbertLeBlanc - Considering creating a Interface in Library `Recordable` and a method inside it - `Recordable getObjectState()` and let the application code use the interface to provide an implementation of what needs to be recorded.","body":"@GilbertLeBlanc - Considering creating a Interface in Library <code>Recordable</code> and a method inside it - <code>Recordable getObjectState()</code> and let the application code use the interface to provide an implementation of what needs to be recorded."}],"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693847183,"creation_date":1693847183,"question_id":77039545,"body_markdown":"I am working on creating a library in Java for recording arguments of a method before and after the execution, as below:\r\n\r\nLibrary code:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.METHOD)\r\n    public @interface RecordArgs {\r\n    }\r\n\r\n    @Aspect\r\n    public class RecordMethodArgsAspect {\r\n    \r\n        @Before(&quot;@annotation(RecordArgs)&quot;)\r\n        public Object logMethod(ProceedingJoinPoint joinPoint) throws Throwable {\r\n             //record method arguments i.e. Item object in below example\r\n        }\r\n    }\r\n\r\n\r\nApplication code (client of library)\r\n\r\n    class Item {\r\n        private String name;\r\n        private String id;\r\n        // mutable private fields\r\n    \r\n        public Item(String name, String id) {\r\n            this.name=name;\r\n            this.id=id;\r\n        }\r\n    \r\n        // getter and setters\r\n    \r\n    }\r\n\r\n    class ItemVisitor {\r\n        @RecordArgs\r\n        public void visit(Item item) {\r\n            // export item object\r\n        \r\n            // business logic which mutates item\r\n    \r\n            // export item object\r\n        }\r\n    }\r\n\r\n**Question**: I want to provide a way to the application code i.e. class &#39;Item&#39; in this case to specify what field values or what data should be recorded when &#39;logMethod&#39; is invoked, the idea being that in future if the structure of &#39;Item&#39; class changes then there shouldn&#39;t be a need to change the library. How can I achieve this?","title":"Java - Building a contract between a library and its client","body":"<p>I am working on creating a library in Java for recording arguments of a method before and after the execution, as below:</p>\n<p>Library code:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface RecordArgs {\n}\n\n@Aspect\npublic class RecordMethodArgsAspect {\n\n    @Before(&quot;@annotation(RecordArgs)&quot;)\n    public Object logMethod(ProceedingJoinPoint joinPoint) throws Throwable {\n         //record method arguments i.e. Item object in below example\n    }\n}\n</code></pre>\n<p>Application code (client of library)</p>\n<pre><code>class Item {\n    private String name;\n    private String id;\n    // mutable private fields\n\n    public Item(String name, String id) {\n        this.name=name;\n        this.id=id;\n    }\n\n    // getter and setters\n\n}\n\nclass ItemVisitor {\n    @RecordArgs\n    public void visit(Item item) {\n        // export item object\n    \n        // business logic which mutates item\n\n        // export item object\n    }\n}\n</code></pre>\n<p><strong>Question</strong>: I want to provide a way to the application code i.e. class 'Item' in this case to specify what field values or what data should be recorded when 'logMethod' is invoked, the idea being that in future if the structure of 'Item' class changes then there shouldn't be a need to change the library. How can I achieve this?</p>\n"},{"tags":["java","apache","apache2","tomcat7"],"comments":[{"owner":{"account_id":3200341,"reputation":12790,"user_id":2702504,"accept_rate":68,"display_name":"Keerthivasan"},"score":0,"creation_date":1396014604,"post_id":22714650,"comment_id":34614084,"body_markdown":"Take a look at this - http://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request and http://stackoverflow.com/questions/2943477/is-there-a-max-size-for-post-parameter-content","body":"Take a look at this - <a href=\"http://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request\" title=\"maximum length of http get request\">stackoverflow.com/questions/2659952/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/2943477/is-there-a-max-size-for-post-parameter-content\" title=\"is there a max size for post parameter content\">stackoverflow.com/questions/2943477/&hellip;</a>"},{"owner":{"account_id":3370660,"reputation":69,"user_id":2829944,"accept_rate":14,"display_name":"Priya"},"score":0,"creation_date":1396016196,"post_id":22714650,"comment_id":34615192,"body_markdown":"@Octopus thanks for your link. i have tried it but still is not helpful. Can u provide some other soln???","body":"@Octopus thanks for your link. i have tried it but still is not helpful. Can u provide some other soln???"},{"owner":{"account_id":699650,"reputation":16447,"user_id":1299005,"display_name":"Mark Thomas"},"score":0,"creation_date":1396018569,"post_id":22714650,"comment_id":34616878,"body_markdown":"Since you are using the AJP connector you must have a reverse proxy such as Apache httpd. You&#39;ll need to raise the limits in httpd.conf as well.","body":"Since you are using the AJP connector you must have a reverse proxy such as Apache httpd. You&#39;ll need to raise the limits in httpd.conf as well."}],"answers":[{"tags":[],"owner":{"account_id":7764887,"reputation":111,"user_id":5876356,"display_name":"Mathew Augustine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1478782458,"creation_date":1475728205,"answer_id":39887549,"question_id":22714650,"body_markdown":"This may be a bit old thread, but just in case if anyone come across this one.\r\n\r\n&gt; 413 request entity too large\r\n\r\nIf your url encounter this error when trying to download large files, modify the configuration as below.\r\n\r\nEdit your **workers.properties** file for the site.\r\n\r\nOn Ubuntu, this could be typically at \r\n\r\n&gt; /etc/libapache2-mod-jk/workers.properties\r\n\r\nAdd\r\n\r\n&gt; worker.&amp;lt;yoursite&amp;gt;.max_packet_size=65536","title":"Request entity too large error","body":"<p>This may be a bit old thread, but just in case if anyone come across this one.</p>\n\n<blockquote>\n  <p>413 request entity too large</p>\n</blockquote>\n\n<p>If your url encounter this error when trying to download large files, modify the configuration as below.</p>\n\n<p>Edit your <strong>workers.properties</strong> file for the site.</p>\n\n<p>On Ubuntu, this could be typically at </p>\n\n<blockquote>\n  <p>/etc/libapache2-mod-jk/workers.properties</p>\n</blockquote>\n\n<p>Add</p>\n\n<blockquote>\n  <p>worker.&lt;yoursite&gt;.max_packet_size=65536</p>\n</blockquote>\n"}],"owner":{"account_id":3370660,"reputation":69,"user_id":2829944,"accept_rate":14,"display_name":"Priya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9523,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693847075,"creation_date":1396014431,"question_id":22714650,"body_markdown":"Currently in my project, I am getting the following errors \r\n\r\n    1) Request entity too large error, The requested resource does not allow request Data with GET Requests, or the amount of the data provided in the request exceeds the capacity limit\r\n    2) Request entity too large error, The requested resource does not allow request Data with POST Requests, or the amount of the data provided in the request exceeds the capacity limit**\r\n\r\nI get these error while I submit my pages at different modules. I use tomcat 7 and apache in my project. I have made changes in tomcats server.xml as \r\n\r\n    &lt;Connector port=&quot;8109&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; maxPostSize=&quot;-1&quot; packetSize=&quot;65536&quot;/&gt;\r\n\r\nBut I am still getting the same error. Can anyone guide me where else I need to make changes to avoid this problem?\r\n\r\n\r\n\r\n\r\n\r\n","title":"Request entity too large error","body":"<p>Currently in my project, I am getting the following errors </p>\n\n<pre><code>1) Request entity too large error, The requested resource does not allow request Data with GET Requests, or the amount of the data provided in the request exceeds the capacity limit\n2) Request entity too large error, The requested resource does not allow request Data with POST Requests, or the amount of the data provided in the request exceeds the capacity limit**\n</code></pre>\n\n<p>I get these error while I submit my pages at different modules. I use tomcat 7 and apache in my project. I have made changes in tomcats server.xml as </p>\n\n<pre><code>&lt;Connector port=\"8109\" protocol=\"AJP/1.3\" redirectPort=\"8443\" maxPostSize=\"-1\" packetSize=\"65536\"/&gt;\n</code></pre>\n\n<p>But I am still getting the same error. Can anyone guide me where else I need to make changes to avoid this problem?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":4,"creation_date":1693845140,"post_id":77039329,"comment_id":135810679,"body_markdown":"You say `customerList[]`, but I read that as an array of `customerList`. Posting real code examples instead of pseudo-code might help clarify that. That said, I would be remiss to mix the functionality of the `Customer` with the container that holds it. Unless there&#39;s a reason to have Customers linked to other customers, the container for them need not be involved at all. If you do keep those references, then there&#39;s no need for a separate container for the customers in the end, the `Customer` object can simply hold them.","body":"You say <code>customerList[]</code>, but I read that as an array of <code>customerList</code>. Posting real code examples instead of pseudo-code might help clarify that. That said, I would be remiss to mix the functionality of the <code>Customer</code> with the container that holds it. Unless there&#39;s a reason to have Customers linked to other customers, the container for them need not be involved at all. If you do keep those references, then there&#39;s no need for a separate container for the customers in the end, the <code>Customer</code> object can simply hold them."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":2,"creation_date":1693845178,"post_id":77039329,"comment_id":135810688,"body_markdown":"(It sounds like you&#39;re perhaps trying to implement a linked list, but I&#39;ll wait for more info)","body":"(It sounds like you&#39;re perhaps trying to implement a linked list, but I&#39;ll wait for more info)"},{"owner":{"account_id":26018579,"reputation":1,"user_id":19726583,"display_name":"fdhl"},"score":0,"creation_date":1693846280,"post_id":77039329,"comment_id":135810867,"body_markdown":"Hi rogue, tq for answering. Ive updated the code to be more nicely. I dont actually have a code, since this is only a theoritical question. That being said, i realize how to do this. instead of using a ref to another object, i can simply clone the object, thus creating a new copy. then if i need to identify them back, i can just use method customer.equal() to trace back which is which. doesnt feel like this is good practice however. tq regardless!","body":"Hi rogue, tq for answering. Ive updated the code to be more nicely. I dont actually have a code, since this is only a theoritical question. That being said, i realize how to do this. instead of using a ref to another object, i can simply clone the object, thus creating a new copy. then if i need to identify them back, i can just use method customer.equal() to trace back which is which. doesnt feel like this is good practice however. tq regardless!"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1693846412,"post_id":77039329,"comment_id":135810888,"body_markdown":"@fdhl Why does a customer reference another customer? What is the purpose of the `upline` field? Also, why is the phone number an `int` value? It should be something like a string instead (or maybe even a new class with &quot;local number&quot; and &quot;area code&quot;, if necessary...).","body":"@fdhl Why does a customer reference another customer? What is the purpose of the <code>upline</code> field? Also, why is the phone number an <code>int</code> value? It should be something like a string instead (or maybe even a new class with &quot;local number&quot; and &quot;area code&quot;, if necessary...)."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":3,"creation_date":1693847246,"post_id":77039329,"comment_id":135811004,"body_markdown":"Don&#39;t confuse ArrayLists for arrays, those are two _completely_ different things. Arrays are language primitives for fixed sized, typed slot lists that must be (pre)allocated to a specific number of slots, indexed using square brackets. ArrayLists are a datastructure _object_ that is not sized and allows arbitrary content (unless restricted via generics) and that you interact with using methods, just like any other object. If you show ArrayList code first, and then array code after, the only proper answer is &quot;if this is the level you&#39;re at right now, learn the rest of Java basics first&quot;.","body":"Don&#39;t confuse ArrayLists for arrays, those are two <i>completely</i> different things. Arrays are language primitives for fixed sized, typed slot lists that must be (pre)allocated to a specific number of slots, indexed using square brackets. ArrayLists are a datastructure <i>object</i> that is not sized and allows arbitrary content (unless restricted via generics) and that you interact with using methods, just like any other object. If you show ArrayList code first, and then array code after, the only proper answer is &quot;if this is the level you&#39;re at right now, learn the rest of Java basics first&quot;."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1693847424,"post_id":77039329,"comment_id":135811037,"body_markdown":"Short answers: `Do i need to reupdate everything?`: Probably, if you don&#39;t want customer 3 to refer to customer 2 anymore after it&#39;s removed from the list; but you know your requirements better than we do. — `Is there a smarter way of doing this?`: No","body":"Short answers: <code>Do i need to reupdate everything?</code>: Probably, if you don&#39;t want customer 3 to refer to customer 2 anymore after it&#39;s removed from the list; but you know your requirements better than we do. — <code>Is there a smarter way of doing this?</code>: No"},{"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"score":0,"creation_date":1693848091,"post_id":77039329,"comment_id":135811130,"body_markdown":"Tough to say without knowing the exact requirements but probably having some  abstraction on Customer class which provides the ability to specify if the customer is active or not in the list.","body":"Tough to say without knowing the exact requirements but probably having some  abstraction on Customer class which provides the ability to specify if the customer is active or not in the list."}],"owner":{"account_id":26018579,"reputation":1,"user_id":19726583,"display_name":"fdhl"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693847051,"creation_date":1693844568,"question_id":77039329,"body_markdown":"Lets say i have\r\n\r\n```java\r\nclass Customer{\r\n  int phone; //unique for each customer\r\n  Customer upline; //ref to another customer object\r\n}\r\n```\r\n\r\nand i have an arraylist of customer,\r\n\r\n```java\r\nArrayList&lt;Customer&gt; customerList = new ArrayList&lt;&gt;();\r\n```\r\n\r\nassume customerList[3] is the following\r\n\r\n```java\r\ncustomerList[3]{\r\n  //013-456789\r\n  //customerList[2]\r\n}\r\n```\r\n\r\nI understand on how to implement this. when registering customer, i will enter the uplineCustomer phone number and get the array number.\r\n\r\nAfter that, use `customerList[3].setUplineCustomer(customerList[2])`\r\n\r\nBut what if later im removing a object from customerList array? eg `customerList.remove(1)`\r\n\r\nDo i need to reupdate everything? Is there a smarter way of doing this?","title":"How do i link an object inside another object, assuming both are the same class and both are in an arraylist?","body":"<p>Lets say i have</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Customer{\n  int phone; //unique for each customer\n  Customer upline; //ref to another customer object\n}\n</code></pre>\n<p>and i have an arraylist of customer,</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Customer&gt; customerList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>assume customerList[3] is the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>customerList[3]{\n  //013-456789\n  //customerList[2]\n}\n</code></pre>\n<p>I understand on how to implement this. when registering customer, i will enter the uplineCustomer phone number and get the array number.</p>\n<p>After that, use <code>customerList[3].setUplineCustomer(customerList[2])</code></p>\n<p>But what if later im removing a object from customerList array? eg <code>customerList.remove(1)</code></p>\n<p>Do i need to reupdate everything? Is there a smarter way of doing this?</p>\n"},{"tags":["java","android","json","jackson"],"comments":[{"owner":{"account_id":4326511,"reputation":8441,"user_id":3533191,"accept_rate":62,"display_name":"Syam S"},"score":2,"creation_date":1406126404,"post_id":24912992,"comment_id":38707472,"body_markdown":"Why not use a similar approach as mentioned in this GSon solution with just one custom deserializer?","body":"Why not use a similar approach as mentioned in this GSon solution with just one custom deserializer?"},{"owner":{"account_id":2567170,"reputation":10683,"user_id":3537858,"display_name":"Alexey Gavrilov"},"score":1,"creation_date":1406129306,"post_id":24912992,"comment_id":38709849,"body_markdown":"http://wiki.fasterxml.com/JacksonFAQDateHandling","body":"<a href=\"http://wiki.fasterxml.com/JacksonFAQDateHandling\" rel=\"nofollow noreferrer\">wiki.fasterxml.com/JacksonFAQDateHandling</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1694667619,"post_id":24912992,"comment_id":135921939,"body_markdown":"For new readers to the answers below I recommend you use java.time, the modern Java date and time API, and not the outdated and poorly designed `Date` class used in most answers. There is [one answer using java.time](https://stackoverflow.com/a/77039528/5772882).","body":"For new readers to the answers below I recommend you use java.time, the modern Java date and time API, and not the outdated and poorly designed <code>Date</code> class used in most answers. There is <a href=\"https://stackoverflow.com/a/77039528/5772882\">one answer using java.time</a>."}],"answers":[{"tags":[],"owner":{"account_id":1022577,"reputation":307,"user_id":1032558,"accept_rate":100,"display_name":"Keno"},"down_vote_count":5,"up_vote_count":10,"is_accepted":false,"score":5,"last_activity_date":1443625250,"creation_date":1443625250,"answer_id":32869454,"question_id":24912992,"body_markdown":"In the meanwhile, an annotation became available for a much simpler solution: \r\n\r\n    public class DateStuff {\r\n        @JsonFormat(shape=JsonFormat.Shape.STRING, pattern=&quot;yyyy-MM-dd,HH:00&quot;, timezone=&quot;CET&quot;)\r\n        public Date creationTime;\r\n    }","title":"Configure Jackson to parse multiple date formats","body":"<p>In the meanwhile, an annotation became available for a much simpler solution: </p>\n\n<pre><code>public class DateStuff {\n    @JsonFormat(shape=JsonFormat.Shape.STRING, pattern=\"yyyy-MM-dd,HH:00\", timezone=\"CET\")\n    public Date creationTime;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":74948,"reputation":16753,"user_id":215120,"accept_rate":72,"display_name":"rouble"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1666296624,"creation_date":1488492939,"answer_id":42567051,"question_id":24912992,"body_markdown":"Here is a Jackson Multi Date Format Serializer. \r\n\r\n    import com.fasterxml.jackson.core.JsonParseException;\r\n    import com.fasterxml.jackson.core.JsonParser;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.DeserializationContext;\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.deser.std.StdDeserializer;\r\n    \r\n    import java.io.IOException;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.time.Instant;\r\n    import java.util.Arrays;\r\n    import java.util.stream.Collectors;\r\n    \r\n    /**\r\n     * https://stackoverflow.com/a/42567051/11152683\r\n     */\r\n    public class MultiDateDeserializer extends StdDeserializer&lt;Date&gt; {\r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        private static final SimpleDateFormat[] DATE_FORMATTERS = new SimpleDateFormat[]{\r\n                new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss Z&quot;),\r\n                new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm&#39; UTC&#39;&quot;)\r\n        };\r\n    \r\n        public MultiDateDeserializer() {\r\n            this(null);\r\n        }\r\n    \r\n        public MultiDateDeserializer(Class&lt;?&gt; vc) {\r\n            super(vc);\r\n        }\r\n    \r\n        @Override\r\n        public Date deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {\r\n            JsonNode node = jp.getCodec().readTree(jp);\r\n            final String date = node.textValue();\r\n    \r\n            for (SimpleDateFormat formatter : DATE_FORMATTERS) {\r\n                try {\r\n                    return formatter.parse(date); //.toInstant();\r\n                } catch (ParseException e) {\r\n                }\r\n            }\r\n            throw new JsonParseException(jp, &quot;Unparseable date: \\&quot;&quot; + date + &quot;\\&quot;. Supported formats: &quot; +\r\n                    Arrays.stream(DATE_FORMATTERS).map(SimpleDateFormat::toPattern).collect(Collectors.joining(&quot;; &quot;)));\r\n        }\r\n    }\r\n\r\nYou can use this simply by annotating a field as follows:\r\n\r\n    @JsonProperty(&quot;date&quot;) @JsonDeserialize(using = MultiDateDeserializer.class) final Date date,","title":"Configure Jackson to parse multiple date formats","body":"<p>Here is a Jackson Multi Date Format Serializer.</p>\n<pre><code>import com.fasterxml.jackson.core.JsonParseException;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n\nimport java.io.IOException;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.time.Instant;\nimport java.util.Arrays;\nimport java.util.stream.Collectors;\n\n/**\n * https://stackoverflow.com/a/42567051/11152683\n */\npublic class MultiDateDeserializer extends StdDeserializer&lt;Date&gt; {\n    private static final long serialVersionUID = 1L;\n\n    private static final SimpleDateFormat[] DATE_FORMATTERS = new SimpleDateFormat[]{\n            new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss Z&quot;),\n            new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm' UTC'&quot;)\n    };\n\n    public MultiDateDeserializer() {\n        this(null);\n    }\n\n    public MultiDateDeserializer(Class&lt;?&gt; vc) {\n        super(vc);\n    }\n\n    @Override\n    public Date deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {\n        JsonNode node = jp.getCodec().readTree(jp);\n        final String date = node.textValue();\n\n        for (SimpleDateFormat formatter : DATE_FORMATTERS) {\n            try {\n                return formatter.parse(date); //.toInstant();\n            } catch (ParseException e) {\n            }\n        }\n        throw new JsonParseException(jp, &quot;Unparseable date: \\&quot;&quot; + date + &quot;\\&quot;. Supported formats: &quot; +\n                Arrays.stream(DATE_FORMATTERS).map(SimpleDateFormat::toPattern).collect(Collectors.joining(&quot;; &quot;)));\n    }\n}\n</code></pre>\n<p>You can use this simply by annotating a field as follows:</p>\n<pre><code>@JsonProperty(&quot;date&quot;) @JsonDeserialize(using = MultiDateDeserializer.class) final Date date,\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4856729,"reputation":4150,"user_id":3917465,"accept_rate":29,"display_name":"Code_Worm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610901480,"creation_date":1610901480,"answer_id":65763247,"question_id":24912992,"body_markdown":"A better solution is to use `StdDateFormat` instead. It&#39;s Jackson&#39;s built-in Date formatter and supports most of the variations of Date formats. Use it like below\r\n\r\n    StdDateFormat isoDate = new StdDateFormat();\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.setDateFormat(isoDate);\r\n","title":"Configure Jackson to parse multiple date formats","body":"<p>A better solution is to use <code>StdDateFormat</code> instead. It's Jackson's built-in Date formatter and supports most of the variations of Date formats. Use it like below</p>\n<pre><code>StdDateFormat isoDate = new StdDateFormat();\nObjectMapper mapper = new ObjectMapper();\nmapper.setDateFormat(isoDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":83082,"reputation":666,"user_id":233163,"display_name":"SPee"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1663762232,"creation_date":1663762232,"answer_id":73800491,"question_id":24912992,"body_markdown":"You can use the optional section to define multiple formats:\r\n\r\n    public class DateStuff {\r\n        @JsonFormat(pattern=&quot;[MMM dd, yyyy HH:mm:ss][MMM dd, yyyy][yyyy-MM-dd&#39;T&#39;HH:mm:ssZ]&quot;)\r\n        public Date creationTime;\r\n        @JsonFormat(pattern=&quot;MMM dd, yyyy[ HH:mm:ss]&quot;)\r\n        public Date anotherCreationTime;\r\n    }\r\n\r\nThe first defines two completely different formats. The second where only a small portion is optional.","title":"Configure Jackson to parse multiple date formats","body":"<p>You can use the optional section to define multiple formats:</p>\n<pre><code>public class DateStuff {\n    @JsonFormat(pattern=&quot;[MMM dd, yyyy HH:mm:ss][MMM dd, yyyy][yyyy-MM-dd'T'HH:mm:ssZ]&quot;)\n    public Date creationTime;\n    @JsonFormat(pattern=&quot;MMM dd, yyyy[ HH:mm:ss]&quot;)\n    public Date anotherCreationTime;\n}\n</code></pre>\n<p>The first defines two completely different formats. The second where only a small portion is optional.</p>\n"},{"tags":[],"owner":{"account_id":1437465,"reputation":6412,"user_id":1358536,"accept_rate":90,"display_name":"kavai77"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693846950,"creation_date":1693846950,"answer_id":77039528,"question_id":24912992,"body_markdown":"If you want to deserialize `LocalDateTime`, here is a similar solution to `@rouble&#39;s`\r\n\r\n```\r\nimport com.fasterxml.jackson.core.JsonParseException;\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.core.TreeNode;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\r\nimport com.fasterxml.jackson.databind.node.TextNode;\r\n\r\nimport java.io.IOException;\r\nimport java.time.LocalDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.format.DateTimeParseException;\r\nimport java.util.Arrays;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class MultiDateDeserializer extends StdDeserializer&lt;LocalDateTime&gt; {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    private static final DateTimeFormatter[] DATE_FORMATTERS = new DateTimeFormatter[]{\r\n            DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;),\r\n            DateTimeFormatter.ofPattern(&quot;yyyy/MM/dd HH:mm&quot;)\r\n    };\r\n\r\n    public MultiDateDeserializer() {\r\n        this(null);\r\n    }\r\n\r\n    public MultiDateDeserializer(Class&lt;?&gt; vc) {\r\n        super(vc);\r\n    }\r\n\r\n    @Override\r\n    public LocalDateTime deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {\r\n        TreeNode treeNode = jp.getCodec().readTree(jp);\r\n        TextNode textNode = treeNode instanceof TextNode\r\n                ? (TextNode) treeNode\r\n                : ((TextNode) treeNode.get(&quot;&quot;));\r\n        final String date = textNode.textValue();\r\n\r\n        for (var formatter : DATE_FORMATTERS) {\r\n            try {\r\n                return LocalDateTime.parse(date, formatter);\r\n            } catch (DateTimeParseException e) {\r\n            }\r\n        }\r\n        throw new JsonParseException(jp, &quot;Unparseable date: \\&quot;&quot; + date + &quot;\\&quot;. Supported formats: &quot; +\r\n                Arrays.stream(DATE_FORMATTERS).map(DateTimeFormatter::toString).collect(Collectors.joining(&quot;; &quot;)));\r\n    }\r\n}\r\n```","title":"Configure Jackson to parse multiple date formats","body":"<p>If you want to deserialize <code>LocalDateTime</code>, here is a similar solution to <code>@rouble's</code></p>\n<pre><code>import com.fasterxml.jackson.core.JsonParseException;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.core.TreeNode;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\nimport com.fasterxml.jackson.databind.node.TextNode;\n\nimport java.io.IOException;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeParseException;\nimport java.util.Arrays;\nimport java.util.stream.Collectors;\n\npublic class MultiDateDeserializer extends StdDeserializer&lt;LocalDateTime&gt; {\n    private static final long serialVersionUID = 1L;\n\n    private static final DateTimeFormatter[] DATE_FORMATTERS = new DateTimeFormatter[]{\n            DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;),\n            DateTimeFormatter.ofPattern(&quot;yyyy/MM/dd HH:mm&quot;)\n    };\n\n    public MultiDateDeserializer() {\n        this(null);\n    }\n\n    public MultiDateDeserializer(Class&lt;?&gt; vc) {\n        super(vc);\n    }\n\n    @Override\n    public LocalDateTime deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {\n        TreeNode treeNode = jp.getCodec().readTree(jp);\n        TextNode textNode = treeNode instanceof TextNode\n                ? (TextNode) treeNode\n                : ((TextNode) treeNode.get(&quot;&quot;));\n        final String date = textNode.textValue();\n\n        for (var formatter : DATE_FORMATTERS) {\n            try {\n                return LocalDateTime.parse(date, formatter);\n            } catch (DateTimeParseException e) {\n            }\n        }\n        throw new JsonParseException(jp, &quot;Unparseable date: \\&quot;&quot; + date + &quot;\\&quot;. Supported formats: &quot; +\n                Arrays.stream(DATE_FORMATTERS).map(DateTimeFormatter::toString).collect(Collectors.joining(&quot;; &quot;)));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3436939,"reputation":807,"user_id":2879847,"accept_rate":50,"display_name":"Kurian Vithayathil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27690,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":5,"score":19,"last_activity_date":1693846950,"creation_date":1406125062,"question_id":24912992,"body_markdown":"I am working on a project where the date formats returned in JSON payloads aren&#39;t consistent (that&#39;s another issue all together). The project I&#39;m working on uses Jackson to parse the JSON responses. Right now I&#39;ve written a few de/serializers to handle it but it&#39;s not elegant.\r\n\r\nI want to know whether there&#39;s a way to configure Jackson with a set of possible date formats to parse for a particular response rather than writing several separate deserializers for each format. Similar to [how GSON handles the problem in this question][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/18337283","title":"Configure Jackson to parse multiple date formats","body":"<p>I am working on a project where the date formats returned in JSON payloads aren't consistent (that's another issue all together). The project I'm working on uses Jackson to parse the JSON responses. Right now I've written a few de/serializers to handle it but it's not elegant.</p>\n\n<p>I want to know whether there's a way to configure Jackson with a set of possible date formats to parse for a particular response rather than writing several separate deserializers for each format. Similar to <a href=\"https://stackoverflow.com/a/18337283\">how GSON handles the problem in this question</a></p>\n"},{"tags":["java","xml","xslt","solaris"],"answers":[{"tags":[],"owner":{"account_id":430557,"reputation":3444,"user_id":814074,"accept_rate":50,"display_name":"Sachin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1363349830,"creation_date":1363349830,"answer_id":15432253,"question_id":15432145,"body_markdown":"Try to execute below code:\r\n\r\n    DOMSource sourcexml = new DOMSource(doc);\r\n    StreamResult resultxml = new StreamResult(new File(&quot;file.xml&quot;).getAbsolutePath());\r\n    transformer.transform(sourcexml, resultxml); ","title":"XML Transform results in FileNotFoundException","body":"<p>Try to execute below code:</p>\n\n<pre><code>DOMSource sourcexml = new DOMSource(doc);\nStreamResult resultxml = new StreamResult(new File(\"file.xml\").getAbsolutePath());\ntransformer.transform(sourcexml, resultxml); \n</code></pre>\n"}],"owner":{"account_id":429903,"reputation":8152,"user_id":813040,"accept_rate":97,"display_name":"roymustang86"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2948,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":15432253,"answer_count":1,"score":3,"last_activity_date":1693846566,"creation_date":1363349495,"question_id":15432145,"body_markdown":"The earlier question I posted is closed because of lack of information.&lt;br/&gt; Please let me know if I am missing something here. The transformer seems to be adding file:/ to the beginning of my file path.\r\n\r\nI am working in a Solaris environment, and here is what happens when the transform gets applied:\r\n\r\n    DOMSource sourcexml = new DOMSource(doc);\r\n    StreamResult resultxml = new StreamResult(new File(&quot;file.xml&quot;));\r\n    transformer.transform(sourcexml, resultxml); \r\n\r\nThe exception I get is:\r\n\r\n    javax.xml.transform.TransformerException: java.io.FileNotFoundException: file:/opt/origenate/or_dev87/apps/documentarchive/file.xml (No such file or directory)\r\n\r\nNote, the file exists in /opt/origenate/or_dev87/apps/documentarchive/file.xml, but the transformer object is looking for file:/opt/origenate/or_dev87/apps/documentarchive/file.xml.\r\n\r\nWhy does it append the file:/? Is there anyway I can remove it?","title":"XML Transform results in FileNotFoundException","body":"<p>The earlier question I posted is closed because of lack of information.<br/> Please let me know if I am missing something here. The transformer seems to be adding file:/ to the beginning of my file path.</p>\n\n<p>I am working in a Solaris environment, and here is what happens when the transform gets applied:</p>\n\n<pre><code>DOMSource sourcexml = new DOMSource(doc);\nStreamResult resultxml = new StreamResult(new File(\"file.xml\"));\ntransformer.transform(sourcexml, resultxml); \n</code></pre>\n\n<p>The exception I get is:</p>\n\n<pre><code>javax.xml.transform.TransformerException: java.io.FileNotFoundException: file:/opt/origenate/or_dev87/apps/documentarchive/file.xml (No such file or directory)\n</code></pre>\n\n<p>Note, the file exists in /opt/origenate/or_dev87/apps/documentarchive/file.xml, but the transformer object is looking for file:/opt/origenate/or_dev87/apps/documentarchive/file.xml.</p>\n\n<p>Why does it append the file:/? Is there anyway I can remove it?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","entitymanager"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1693832074,"post_id":77037806,"comment_id":135808168,"body_markdown":"I wouldn&#39;t involve JPA at all if I were reading CSV data into a database.","body":"I wouldn&#39;t involve JPA at all if I were reading CSV data into a database."},{"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"score":0,"creation_date":1693832574,"post_id":77037806,"comment_id":135808267,"body_markdown":"@Kayaman what would be your preferred way to go in this case?","body":"@Kayaman what would be your preferred way to go in this case?"},{"owner":{"account_id":5363666,"reputation":1950,"user_id":4274223,"display_name":"Gregorio Palam&#224;"},"score":2,"creation_date":1693833350,"post_id":77037806,"comment_id":135808430,"body_markdown":"I would use jdbcTemplate for this use case","body":"I would use jdbcTemplate for this use case"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1693833570,"post_id":77037806,"comment_id":135808478,"body_markdown":"Exactly, there&#39;s no point in using an ORM framework since you won&#39;t have any classes to map to as the whole thing is dynamic.","body":"Exactly, there&#39;s no point in using an ORM framework since you won&#39;t have any classes to map to as the whole thing is dynamic."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693834989,"post_id":77037806,"comment_id":135808754,"body_markdown":"&quot;Exactly, there&#39;s no point in using an ORM framework&quot; would have been enough.","body":"&quot;Exactly, there&#39;s no point in using an ORM framework&quot; would have been enough."},{"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"score":0,"creation_date":1693846406,"post_id":77037806,"comment_id":135810885,"body_markdown":"Thank you, I was able to address this by using an appropriately configured `JdbcTemplate` instance.","body":"Thank you, I was able to address this by using an appropriately configured <code>JdbcTemplate</code> instance."}],"answers":[{"tags":[],"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693846468,"creation_date":1693846468,"answer_id":77039491,"question_id":77037806,"body_markdown":"As mentioned in the comments, this is best addressed without an ORM framework, since I don&#39;t a-priori know which class is mapped to which table. I was able to address this by using an appropriately configured `JdbcTemplate` instance.","title":"Automatically create db entities based on external list","body":"<p>As mentioned in the comments, this is best addressed without an ORM framework, since I don't a-priori know which class is mapped to which table. I was able to address this by using an appropriately configured <code>JdbcTemplate</code> instance.</p>\n"}],"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693846468,"creation_date":1693831376,"question_id":77037806,"body_markdown":"Relatively new to Spring Data JPA. I have a use case of a Spring app which, upon startup, reads CSVs from a directory:\r\n\r\n```text\r\nFile1.csv, File2.csv, ..., FileN.csv\r\n```\r\n\r\nAll the CSVs are guaranteed to have the same 3-column format consisting of a UNIX timestamp, a string and an integer.\r\n\r\nFor every one of those CSVs, the app needs to create a new table in a MySQL database and insert all the data that is in the CSV in the table. Since I do not know ahead of time how big `N` is, I can&#39;t go into my code and create `N` `@Entity` classes and map every CSV row into an instance of such a class. \r\n\r\nAdditionally, based on the top voted answer [here](https://stackoverflow.com/questions/40956013/how-to-replace-table-name-with-parameter-value-while-using-spring-data-jpa-nativ), it is NOT possible to have a `@Query` - annotated insertion method where I pass the table name as a parameter, so it doesn&#39;t _look_ like I can use the traditional pattern of a `JpaRepository` - implementing interface with a `@Query` annotated method like so:\r\n\r\n```java\r\npublic interface MyRepository extends JpaRepository&lt;MyEntity, Long&gt;{\r\n\r\n     @Modifying\r\n     @Query(value = \r\n           &quot;insert into SOME_TABLE (name, age, email, status) VALUES (:col1, :col2, \r\n                  :col3)&quot;, nativeQuery = true)\r\n      void insertRow(@Param(&quot;col1&quot;) Timestamp tstamp, @Param(&quot;col2&quot;) String name, @Param(&quot;col3&quot;) Integer status)\r\n```\r\nIn the example code above, and based on the linked answer, it doesn&#39;t look like I can pass `SOME_TABLE` as a parameter to my query.\r\n\r\nWhat other pattern can I use in this situation? Should I perhaps directly use an `EntityManager` field? I have only used JPARepositories so far in my Spring apps, and find myself stuck here.","title":"Automatically create db entities based on external list","body":"<p>Relatively new to Spring Data JPA. I have a use case of a Spring app which, upon startup, reads CSVs from a directory:</p>\n<pre><code>File1.csv, File2.csv, ..., FileN.csv\n</code></pre>\n<p>All the CSVs are guaranteed to have the same 3-column format consisting of a UNIX timestamp, a string and an integer.</p>\n<p>For every one of those CSVs, the app needs to create a new table in a MySQL database and insert all the data that is in the CSV in the table. Since I do not know ahead of time how big <code>N</code> is, I can't go into my code and create <code>N</code> <code>@Entity</code> classes and map every CSV row into an instance of such a class.</p>\n<p>Additionally, based on the top voted answer <a href=\"https://stackoverflow.com/questions/40956013/how-to-replace-table-name-with-parameter-value-while-using-spring-data-jpa-nativ\">here</a>, it is NOT possible to have a <code>@Query</code> - annotated insertion method where I pass the table name as a parameter, so it doesn't <em>look</em> like I can use the traditional pattern of a <code>JpaRepository</code> - implementing interface with a <code>@Query</code> annotated method like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MyRepository extends JpaRepository&lt;MyEntity, Long&gt;{\n\n     @Modifying\n     @Query(value = \n           &quot;insert into SOME_TABLE (name, age, email, status) VALUES (:col1, :col2, \n                  :col3)&quot;, nativeQuery = true)\n      void insertRow(@Param(&quot;col1&quot;) Timestamp tstamp, @Param(&quot;col2&quot;) String name, @Param(&quot;col3&quot;) Integer status)\n</code></pre>\n<p>In the example code above, and based on the linked answer, it doesn't look like I can pass <code>SOME_TABLE</code> as a parameter to my query.</p>\n<p>What other pattern can I use in this situation? Should I perhaps directly use an <code>EntityManager</code> field? I have only used JPARepositories so far in my Spring apps, and find myself stuck here.</p>\n"},{"tags":["java","htmlunit"],"comments":[{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1693893042,"post_id":77036409,"comment_id":135815456,"body_markdown":"To find the reason and fix it i need more details. Please one an issue at https://github.com/HtmlUnit/htmlunit/issues and i will try to help.","body":"To find the reason and fix it i need more details. Please one an issue at <a href=\"https://github.com/HtmlUnit/htmlunit/issues\" rel=\"nofollow noreferrer\">github.com/HtmlUnit/htmlunit/issues</a> and i will try to help."}],"owner":{"account_id":4546904,"reputation":152,"user_id":3693223,"display_name":"Lucho82"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693846171,"creation_date":1693818201,"question_id":77036409,"body_markdown":"I&#39;m using a htmlunit to scrapping a webpage.\r\n\r\n    HtmlPage p = webClient.getPage(URL);\r\n    HtmlElement b = p.getFirstByXPath(&quot;xpath selector1&quot;);\r\n    HtmlPage a = b.click();\r\n    a.executeJavaScript(&quot;window.scrollTo(0, 6000);&quot;);\r\n    webClient.waitForBackgroundJavaScript(2000);\r\n\r\nMy requirement is when open a page I have to do a click on a filtering button.\r\nThe data is updated but the page is lazy loading, so I need to simulate scrolling to the bottom of the page to get more items. When a scroll is done a background request is executed by the server and retrieve more data.\r\n\r\nI have a `WebConnectionWrapper` where catch the background request/response.\r\n\r\nBut an `400 Bad Request for URL` error appear when I add this line on my code because I need to wait for a javascript scroll execution.\r\n\r\n     webClient.waitForBackgroundJavaScript(2000);\r\n\r\nAnd without this line the request is done without any problem.\r\n\r\nWhat could be the problem when add a `waitForBackgroundJavaScript()` ?\r\n","title":"Bad Request Error when execute waitForBackgroundJavaScript() method with HtmlUnit","body":"<p>I'm using a htmlunit to scrapping a webpage.</p>\n<pre><code>HtmlPage p = webClient.getPage(URL);\nHtmlElement b = p.getFirstByXPath(&quot;xpath selector1&quot;);\nHtmlPage a = b.click();\na.executeJavaScript(&quot;window.scrollTo(0, 6000);&quot;);\nwebClient.waitForBackgroundJavaScript(2000);\n</code></pre>\n<p>My requirement is when open a page I have to do a click on a filtering button.\nThe data is updated but the page is lazy loading, so I need to simulate scrolling to the bottom of the page to get more items. When a scroll is done a background request is executed by the server and retrieve more data.</p>\n<p>I have a <code>WebConnectionWrapper</code> where catch the background request/response.</p>\n<p>But an <code>400 Bad Request for URL</code> error appear when I add this line on my code because I need to wait for a javascript scroll execution.</p>\n<pre><code> webClient.waitForBackgroundJavaScript(2000);\n</code></pre>\n<p>And without this line the request is done without any problem.</p>\n<p>What could be the problem when add a <code>waitForBackgroundJavaScript()</code> ?</p>\n"},{"tags":["java","final"],"comments":[{"owner":{"account_id":26048,"reputation":7945,"user_id":67476,"accept_rate":67,"display_name":"harshit"},"score":6,"creation_date":1343335316,"post_id":11677670,"comment_id":15480611,"body_markdown":"when defining string as constant ..","body":"when defining string as constant .."},{"owner":{"account_id":544301,"reputation":1209,"user_id":903904,"display_name":"Mavelo"},"score":0,"creation_date":1420031493,"post_id":11677670,"comment_id":43854870,"body_markdown":"Regarding the update, it&#39;s just good practice (IMO). If you come back later and need to reuse the same value, you don&#39;t then need to define it and update the previous code.","body":"Regarding the update, it&#39;s just good practice (IMO). If you come back later and need to reuse the same value, you don&#39;t then need to define it and update the previous code."},{"owner":{"account_id":4870650,"reputation":14032,"user_id":3927314,"accept_rate":100,"display_name":"kgf3JfUtW"},"score":2,"creation_date":1504038757,"post_id":11677670,"comment_id":78854246,"body_markdown":"Sure doing so has its benefits. But code such as `public static final String TILDE_EQUAL = &quot;~=&quot;;` really upsets me. When can &quot;tilde-equal&quot; be anything other than `~=`?","body":"Sure doing so has its benefits. But code such as <code>public static final String TILDE_EQUAL = &quot;~=&quot;;</code> really upsets me. When can &quot;tilde-equal&quot; be anything other than <code>~=</code>?"},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1633274172,"post_id":11677670,"comment_id":122710665,"body_markdown":"@kgf3JfUtW - any generally-good guideline can be misused by people who don&#39;t understand the rationale, or who follow rules blindly because someone cursed them by incanting the magic spell &quot;it&#39;s a best practice&quot;.","body":"@kgf3JfUtW - any generally-good guideline can be misused by people who don&#39;t understand the rationale, or who follow rules blindly because someone cursed them by incanting the magic spell &quot;it&#39;s a best practice&quot;."},{"owner":{"account_id":4616092,"reputation":111,"user_id":3946362,"display_name":"Trixie Wolf"},"score":0,"creation_date":1639442921,"post_id":11677670,"comment_id":124345105,"body_markdown":"@kgf3JfUtW Given how the JVM concatenates and optimizes String literals I&#39;m not sure it&#39;s necessary to use a String constant rather than a literal in the first place. That said, making something like BigInteger BIG_ONE = new BigInteger(1); isn&#39;t necessarily bad practice. It isn&#39;t necessary in Java for Strings due to how the language provides special support for them, but if every &quot;~=&quot; invocation created a separate String object and you did it in a bunch of loops, TILDE_EQUAL might be justified. In short, constants can have valid uses even when the identifier makes the value obvious.","body":"@kgf3JfUtW Given how the JVM concatenates and optimizes String literals I&#39;m not sure it&#39;s necessary to use a String constant rather than a literal in the first place. That said, making something like BigInteger BIG_ONE = new BigInteger(1); isn&#39;t necessarily bad practice. It isn&#39;t necessary in Java for Strings due to how the language provides special support for them, but if every &quot;~=&quot; invocation created a separate String object and you did it in a bunch of loops, TILDE_EQUAL might be justified. In short, constants can have valid uses even when the identifier makes the value obvious."}],"answers":[{"tags":[],"owner":{"account_id":102718,"reputation":59065,"user_id":275567,"display_name":"pb2q"},"down_vote_count":0,"up_vote_count":101,"is_accepted":true,"score":101,"last_activity_date":1686905241,"creation_date":1343335251,"answer_id":11677688,"question_id":11677670,"body_markdown":"`final` indicates that the value of the variable won&#39;t change - in other words, a *constant* whose value can&#39;t be modified after it is declared.\r\n\r\nUse `public final static String` when you want to create a `String` that:\r\n\r\n1. belongs to the class (`static`: no instance necessary to use it), that\r\n2. won&#39;t change (`final`), for instance when you want to define a `String` constant that will be available to all instances of the class, and to other objects using the class, and that\r\n3. will be a publicly accessible part of the interface that the class shows the world.\r\n\r\nExample:\r\n\r\n    public final static String MY_CONSTANT = &quot;SomeValue&quot;;\r\n\r\n    // ... in some other code, possibly in another object, use the constant:\r\n    if (input.equals(MyClass.MY_CONSTANT))\r\n\r\nSimilarly:\r\n\r\n    public static final int ERROR_CODE = 127;\r\n\r\nIt isn&#39;t _required_ to use `final`, but it keeps a constant from being changed inadvertently during program execution, and serves as an indicator that the variable is a constant.\r\n\r\nEven if the constant will only be used - read - in the current class and/or in only one place, it&#39;s good practice to declare all constants as `final`: it&#39;s clearer, and during the lifetime of the code the constant may end up being used in more than one place.\r\n\r\nFurthermore using `final` may allow the implementation to perform some optimization, e.g. by inlining an actual value where the constant is used. \r\n\r\nFinally note that `final` will only make truly constant values out of primitive types, `String` which is immutable, or other immutable types. Applying `final` to an object (for instance a `HashMap`) will make the *reference* immutable, but not the state of the object: for instance data members of the object can be changed, array elements can be changed, and collections can be manipulated and changed.","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p><code>final</code> indicates that the value of the variable won't change - in other words, a <em>constant</em> whose value can't be modified after it is declared.</p>\n<p>Use <code>public final static String</code> when you want to create a <code>String</code> that:</p>\n<ol>\n<li>belongs to the class (<code>static</code>: no instance necessary to use it), that</li>\n<li>won't change (<code>final</code>), for instance when you want to define a <code>String</code> constant that will be available to all instances of the class, and to other objects using the class, and that</li>\n<li>will be a publicly accessible part of the interface that the class shows the world.</li>\n</ol>\n<p>Example:</p>\n<pre><code>public final static String MY_CONSTANT = &quot;SomeValue&quot;;\n\n// ... in some other code, possibly in another object, use the constant:\nif (input.equals(MyClass.MY_CONSTANT))\n</code></pre>\n<p>Similarly:</p>\n<pre><code>public static final int ERROR_CODE = 127;\n</code></pre>\n<p>It isn't <em>required</em> to use <code>final</code>, but it keeps a constant from being changed inadvertently during program execution, and serves as an indicator that the variable is a constant.</p>\n<p>Even if the constant will only be used - read - in the current class and/or in only one place, it's good practice to declare all constants as <code>final</code>: it's clearer, and during the lifetime of the code the constant may end up being used in more than one place.</p>\n<p>Furthermore using <code>final</code> may allow the implementation to perform some optimization, e.g. by inlining an actual value where the constant is used.</p>\n<p>Finally note that <code>final</code> will only make truly constant values out of primitive types, <code>String</code> which is immutable, or other immutable types. Applying <code>final</code> to an object (for instance a <code>HashMap</code>) will make the <em>reference</em> immutable, but not the state of the object: for instance data members of the object can be changed, array elements can be changed, and collections can be manipulated and changed.</p>\n"},{"tags":[],"owner":{"account_id":59461,"reputation":19172,"user_id":177920,"accept_rate":77,"display_name":"Madbreaks"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1343335325,"creation_date":1343335325,"answer_id":11677703,"question_id":11677670,"body_markdown":"`final` indicates that the value cannot be changed once set.  `static` allows you to set the value, and that value will be the same for ALL instances of the class which utilize it.  Also, you may access the value of a `public static` string w/o having an instance of a class.","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p><code>final</code> indicates that the value cannot be changed once set.  <code>static</code> allows you to set the value, and that value will be the same for ALL instances of the class which utilize it.  Also, you may access the value of a <code>public static</code> string w/o having an instance of a class.</p>\n"},{"tags":[],"owner":{"account_id":1270084,"reputation":5416,"user_id":1226605,"accept_rate":86,"display_name":"devang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343335370,"creation_date":1343335370,"answer_id":11677716,"question_id":11677670,"body_markdown":"Usually for defining constants, that you reuse at many places making it single point for change, used within single class or shared across packages. Making a variable final avoid accidental changes.","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>Usually for defining constants, that you reuse at many places making it single point for change, used within single class or shared across packages. Making a variable final avoid accidental changes.</p>\n"},{"tags":[],"owner":{"account_id":430036,"reputation":905,"user_id":813240,"display_name":"Carl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1343335976,"creation_date":1343335414,"answer_id":11677725,"question_id":11677670,"body_markdown":"`static` means that the object will only be created once, and does not have an instance object containing it. The way you have written is best used when you have something that is common for all objects of the class and will never change. It even could be used without creating an object at all.\r\n\r\nUsually it&#39;s best to use final when you expect it to be `final` so that the compiler will enforce that rule and you know for sure. `static` ensures that you don&#39;t waste memory creating many of the same thing if it will be the same value for all objects.","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p><code>static</code> means that the object will only be created once, and does not have an instance object containing it. The way you have written is best used when you have something that is common for all objects of the class and will never change. It even could be used without creating an object at all.</p>\n\n<p>Usually it's best to use final when you expect it to be <code>final</code> so that the compiler will enforce that rule and you know for sure. <code>static</code> ensures that you don't waste memory creating many of the same thing if it will be the same value for all objects.</p>\n"},{"tags":[],"owner":{"account_id":1381345,"reputation":1170,"user_id":1314262,"accept_rate":83,"display_name":"Fyre"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1343336848,"creation_date":1343336848,"answer_id":11678064,"question_id":11677670,"body_markdown":"The keyword _final_ means that the value is constant(it cannot be changed). It is analogous to const in C.\r\n\r\n\r\nAnd you can treat _static_ as a global variable which has scope. It basically means if you change it for one object it will be changed for all just like a global variable(limited by scope).\r\n\r\nHope it helps.\r\n","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>The keyword <em>final</em> means that the value is constant(it cannot be changed). It is analogous to const in C.</p>\n\n<p>And you can treat <em>static</em> as a global variable which has scope. It basically means if you change it for one object it will be changed for all just like a global variable(limited by scope).</p>\n\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":3939784,"reputation":2549,"user_id":3254692,"accept_rate":83,"display_name":"Omar Faroque Anik"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1396738158,"creation_date":1396738158,"answer_id":22887865,"question_id":11677670,"body_markdown":"1. Static means..You can use it without instantiate of the class or using any object.\r\n2. final..It is a keyword which is used for make the string constant. You can not change the value of that string. Look at the example below:\r\n\r\n          public class StringTest { \r\n                   static final String str = &quot;Hello&quot;; \r\n          public static void main(String args[]) { \r\n                   // str = &quot;world&quot;; // gives error \r\n                   System.out.println(str); // called without the help of an object                       \r\n                   System.out.println(StringTest.str);// called with class name  \r\n                     } \r\n                 } \r\n\r\n\r\nThanks","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<ol>\n<li>Static means..You can use it without instantiate of the class or using any object.</li>\n<li><p>final..It is a keyword which is used for make the string constant. You can not change the value of that string. Look at the example below:</p>\n\n<pre><code>  public class StringTest { \n           static final String str = \"Hello\"; \n  public static void main(String args[]) { \n           // str = \"world\"; // gives error \n           System.out.println(str); // called without the help of an object                       \n           System.out.println(StringTest.str);// called with class name  \n             } \n         } \n</code></pre></li>\n</ol>\n\n<p>Thanks</p>\n"},{"tags":[],"owner":{"account_id":4684736,"reputation":150,"user_id":3792421,"display_name":"Sachin Tiwari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424201250,"creation_date":1424200055,"answer_id":28569205,"question_id":11677670,"body_markdown":"`public` makes it accessible across other classes.\r\n`static` makes it uniform value across all the class instances.\r\n`final` makes it non-modifiable value.\r\nSo basically it&#39;s a &quot;**constant**&quot; value which is same across all the class instances and which cannot be modified.\r\nWith respect to your concern &quot;What I don&#39;t understand is why people use that even if the constant will be used only in one place and only in the same class. Why declaring it? Why don&#39;t we just use the variable?&quot;\r\nI would say since it is a public field the constant value can also be used elsewhere in some other class using ClassName.value. eg: a class named Math may have PI as final static long value which can be accessed as Math.PI.","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p><code>public</code> makes it accessible across other classes.\n<code>static</code> makes it uniform value across all the class instances.\n<code>final</code> makes it non-modifiable value.\nSo basically it's a \"<strong>constant</strong>\" value which is same across all the class instances and which cannot be modified.\nWith respect to your concern \"What I don't understand is why people use that even if the constant will be used only in one place and only in the same class. Why declaring it? Why don't we just use the variable?\"\nI would say since it is a public field the constant value can also be used elsewhere in some other class using ClassName.value. eg: a class named Math may have PI as final static long value which can be accessed as Math.PI.</p>\n"},{"tags":[],"owner":{"account_id":5611329,"reputation":307,"user_id":4443948,"display_name":"Nikhil Kotak"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1540137692,"creation_date":1432792343,"answer_id":30498220,"question_id":11677670,"body_markdown":"\t**public** makes it accessible across the other classes. You can use it without instantiate of the class or using any object.\r\n\r\n\t**static** makes it uniform value across all the class instances.\r\nIt ensures that you don&#39;t waste memory creating many of the same thing if it will be the same value for all the objects.\r\n\r\n\t**final** makes it non-modifiable value. It&#39;s a &quot;constant&quot; value which is same across all the class instances and cannot be modified.\r\n","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>   <strong>public</strong> makes it accessible across the other classes. You can use it without instantiate of the class or using any object.</p>\n\n<p>   <strong>static</strong> makes it uniform value across all the class instances.\nIt ensures that you don't waste memory creating many of the same thing if it will be the same value for all the objects.</p>\n\n<p>   <strong>final</strong> makes it non-modifiable value. It's a \"constant\" value which is same across all the class instances and cannot be modified.</p>\n"},{"tags":[],"owner":{"account_id":2727238,"reputation":1563,"user_id":2351948,"accept_rate":65,"display_name":"kiwicomb123"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1474154785,"creation_date":1474154785,"answer_id":39552677,"question_id":11677670,"body_markdown":"Why do people use constants in classes instead of a variable?\r\n\r\nreadability and maintainability,  \r\n\r\nhaving some number like 40.023 in your code doesn&#39;t say much about what the number represents, so we replace it by a word in capitals like &quot;USER_AGE_YEARS&quot;. Later when we look at the code its clear what that number represents. \r\n\r\nWhy do we not just use a variable?  Well we would if we knew the number would change, but if its some number that wont change, like 3.14159.. we make it final.\r\n\r\nBut what if its not a number like a String?  In that case its mostly for maintainability, if you are using a String multiple times in your code, (and it wont be changing at runtime) it is convenient to have it as a final string at the top of the class.  That way when you want to change it, there is only one place to change it rather than many.  \r\n\r\nFor example if you have an error message that get printed many times in your code, having final String ERROR_MESSAGE = &quot;Something went bad.&quot; is easier to maintain,  if you want to change it from &quot;Something went bad.&quot; to &quot;It&#39;s too late jim he&#39;s already dead&quot;,  you would only need to change that one line, rather than all the places you would use that comment.","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>Why do people use constants in classes instead of a variable?</p>\n\n<p>readability and maintainability,  </p>\n\n<p>having some number like 40.023 in your code doesn't say much about what the number represents, so we replace it by a word in capitals like \"USER_AGE_YEARS\". Later when we look at the code its clear what that number represents. </p>\n\n<p>Why do we not just use a variable?  Well we would if we knew the number would change, but if its some number that wont change, like 3.14159.. we make it final.</p>\n\n<p>But what if its not a number like a String?  In that case its mostly for maintainability, if you are using a String multiple times in your code, (and it wont be changing at runtime) it is convenient to have it as a final string at the top of the class.  That way when you want to change it, there is only one place to change it rather than many.  </p>\n\n<p>For example if you have an error message that get printed many times in your code, having final String ERROR_MESSAGE = \"Something went bad.\" is easier to maintain,  if you want to change it from \"Something went bad.\" to \"It's too late jim he's already dead\",  you would only need to change that one line, rather than all the places you would use that comment.</p>\n"},{"tags":[],"owner":{"account_id":7220692,"reputation":723,"user_id":5511336,"display_name":"KumarAnkit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550643220,"creation_date":1550643220,"answer_id":54779930,"question_id":11677670,"body_markdown":"It is kind of standard/best practice.\r\nThere are already answers listing scenarios, but for your second question:\r\n\r\n&gt; Why do they have to do that? Why do they have to initialize the value as final prior to using it?\r\n\r\nPublic constants and fields initialized at declaration should be &quot;static final&quot; rather than merely &quot;final&quot;\r\n\r\nThese are some of the reasons why it should be like this:\r\n\r\n1. Making a public constant just final as opposed to static final leads to duplicating its value for every instance of the class, uselessly increasing the amount of memory required to execute the application.\r\n\r\n2. Further, when a non-public, final field isn&#39;t also static, it implies that different instances can have different values. However, initializing a non-static final field in its declaration forces every instance to have the same value owing to the behavior of the [final][1] field.\r\n\r\n  [1]: https://stackoverflow.com/a/15655032/5511336","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>It is kind of standard/best practice.\nThere are already answers listing scenarios, but for your second question:</p>\n\n<blockquote>\n  <p>Why do they have to do that? Why do they have to initialize the value as final prior to using it?</p>\n</blockquote>\n\n<p>Public constants and fields initialized at declaration should be \"static final\" rather than merely \"final\"</p>\n\n<p>These are some of the reasons why it should be like this:</p>\n\n<ol>\n<li><p>Making a public constant just final as opposed to static final leads to duplicating its value for every instance of the class, uselessly increasing the amount of memory required to execute the application.</p></li>\n<li><p>Further, when a non-public, final field isn't also static, it implies that different instances can have different values. However, initializing a non-static final field in its declaration forces every instance to have the same value owing to the behavior of the <a href=\"https://stackoverflow.com/a/15655032/5511336\">final</a> field.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":458201,"reputation":3678,"user_id":857958,"display_name":"nico gawenda"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1565605136,"creation_date":1565323307,"answer_id":57423344,"question_id":11677670,"body_markdown":"You do not *have to* use `final`, but the `final` is making clear to everyone else - including the compiler - that this is a constant, and that&#39;s the good practice in it.\r\n\r\nWhy people doe that *even if the constant will be used only in one place and only in the same class*: Because in many cases it still makes sense. If you for example know it will be final during program run, but you intend to change the value later and recompile (easier to find), and also might use it more often later-on. It is also informing other programmers about the core values in the program flow at a prominent and combined place.\r\n\r\n\r\nAn aspect the other answers are missing out unfortunately, is that using the combination of `public final` needs to be done **very carefully**, especially if other classes or packages will use your class (which can be assumed because it is `public`).\r\n\r\nHere&#39;s why:\r\n\r\n 1. Because it is declared as `final`, the compiler will inline this field during compile time into any compilation unit reading this field. So far, so good.\r\n 2. What people tend to forget is, because the field is also declared `public`, the compiler will also inline this value into any other compile unit. That means *other* classes using this field.\r\n\r\nWhat are the consequences?\r\n\r\nImagine you have this:\r\n\r\n    class Foo {\r\n      public static final String VERSION = &quot;1.0&quot;;\r\n    }\r\n\r\n    class Bar {\r\n      public static void main(String[] args) {\r\n        System.out.println(&quot;I am using version &quot; + Foo.VERSION);\r\n      }\r\n    }\r\n\r\nAfter compiling and running `Bar`, you&#39;ll get:\r\n\r\n    I am using version 1.0\r\n\r\nNow, you improve `Foo` and change the version to &quot;1.1&quot;.\r\nAfter recompiling `Foo`, you run `Bar` and get this wrong output:\r\n\r\n    I am using version 1.0\r\n\r\nThis happens, because `VERSION` is declared `final`, so the actual value of it was already in-lined in `Bar` during the first compile run. As a consequence, to let the example of a `public static final ...` field propagate properly after actually changing what was declared `final` (you lied!;), you&#39;d need to *recompile every class using it*.\r\n\r\nI&#39;ve seen this a couple of times and it is really hard to debug.\r\n\r\nIf by `final` you mean a constant that *might* change in later versions of your program, a better solution would be this:\r\n\r\n    class Foo {\r\n      private static String version = &quot;1.0&quot;;\r\n      public static final String getVersion() {\r\n        return version;\r\n      }\r\n    }\r\n\r\nThe performance penalty of this is negligible, since JIT code generator will inline it at run-time.\r\n\r\n","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>You do not <em>have to</em> use <code>final</code>, but the <code>final</code> is making clear to everyone else - including the compiler - that this is a constant, and that's the good practice in it.</p>\n\n<p>Why people doe that <em>even if the constant will be used only in one place and only in the same class</em>: Because in many cases it still makes sense. If you for example know it will be final during program run, but you intend to change the value later and recompile (easier to find), and also might use it more often later-on. It is also informing other programmers about the core values in the program flow at a prominent and combined place.</p>\n\n<p>An aspect the other answers are missing out unfortunately, is that using the combination of <code>public final</code> needs to be done <strong>very carefully</strong>, especially if other classes or packages will use your class (which can be assumed because it is <code>public</code>).</p>\n\n<p>Here's why:</p>\n\n<ol>\n<li>Because it is declared as <code>final</code>, the compiler will inline this field during compile time into any compilation unit reading this field. So far, so good.</li>\n<li>What people tend to forget is, because the field is also declared <code>public</code>, the compiler will also inline this value into any other compile unit. That means <em>other</em> classes using this field.</li>\n</ol>\n\n<p>What are the consequences?</p>\n\n<p>Imagine you have this:</p>\n\n<pre><code>class Foo {\n  public static final String VERSION = \"1.0\";\n}\n\nclass Bar {\n  public static void main(String[] args) {\n    System.out.println(\"I am using version \" + Foo.VERSION);\n  }\n}\n</code></pre>\n\n<p>After compiling and running <code>Bar</code>, you'll get:</p>\n\n<pre><code>I am using version 1.0\n</code></pre>\n\n<p>Now, you improve <code>Foo</code> and change the version to \"1.1\".\nAfter recompiling <code>Foo</code>, you run <code>Bar</code> and get this wrong output:</p>\n\n<pre><code>I am using version 1.0\n</code></pre>\n\n<p>This happens, because <code>VERSION</code> is declared <code>final</code>, so the actual value of it was already in-lined in <code>Bar</code> during the first compile run. As a consequence, to let the example of a <code>public static final ...</code> field propagate properly after actually changing what was declared <code>final</code> (you lied!;), you'd need to <em>recompile every class using it</em>.</p>\n\n<p>I've seen this a couple of times and it is really hard to debug.</p>\n\n<p>If by <code>final</code> you mean a constant that <em>might</em> change in later versions of your program, a better solution would be this:</p>\n\n<pre><code>class Foo {\n  private static String version = \"1.0\";\n  public static final String getVersion() {\n    return version;\n  }\n}\n</code></pre>\n\n<p>The performance penalty of this is negligible, since JIT code generator will inline it at run-time.</p>\n"},{"tags":[],"owner":{"account_id":7592041,"reputation":11,"user_id":5759410,"display_name":"Stefan K"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1610103104,"creation_date":1610103104,"answer_id":65627652,"question_id":11677670,"body_markdown":"This is related to the semantics of the code. By naming the value assigning it to a variable that has a meaningful name (even if it is used only at one place) you give it a meaning. When somebody is reading the code that person will know what that value means.\r\n\r\nIn general is not a good practice to use constant values across the code. Imagine a code full of string, integer, etc. values. After a time nobody will know what those constants are. Also a typo in a value can be a problem when the value is used on more than one place.","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>This is related to the semantics of the code. By naming the value assigning it to a variable that has a meaningful name (even if it is used only at one place) you give it a meaning. When somebody is reading the code that person will know what that value means.</p>\n<p>In general is not a good practice to use constant values across the code. Imagine a code full of string, integer, etc. values. After a time nobody will know what those constants are. Also a typo in a value can be a problem when the value is used on more than one place.</p>\n"},{"tags":[],"owner":{"account_id":9297761,"reputation":139,"user_id":6904202,"display_name":"Monu chandramohan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633273956,"creation_date":1633273956,"answer_id":69426146,"question_id":11677670,"body_markdown":"I think these are all clear explanations. But, Let me clarify it by giving a java inbuild example.\r\n\r\nIn java, most would have used System.out.println()\r\n\r\nThe **system** is a class and **out** is a PrintStream class.\r\n\r\nSo what java says is I will take care of the initialization of the out object(PrintStream) and keep the initialization private to myself in the System class.\r\n\r\n    public final class System {\r\n\r\n        public final static PrintStream out = null;\r\n\r\n        //Some initialization done by system class which cannot be changed as it is final.\r\n    }\r\n\r\nYou just access the **println** method statically without worrying about its initialization.\r\n\r\n","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>I think these are all clear explanations. But, Let me clarify it by giving a java inbuild example.</p>\n<p>In java, most would have used System.out.println()</p>\n<p>The <strong>system</strong> is a class and <strong>out</strong> is a PrintStream class.</p>\n<p>So what java says is I will take care of the initialization of the out object(PrintStream) and keep the initialization private to myself in the System class.</p>\n<pre><code>public final class System {\n\n    public final static PrintStream out = null;\n\n    //Some initialization done by system class which cannot be changed as it is final.\n}\n</code></pre>\n<p>You just access the <strong>println</strong> method statically without worrying about its initialization.</p>\n"},{"tags":[],"owner":{"account_id":12695956,"reputation":97,"user_id":9224380,"display_name":"greeneley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693845744,"creation_date":1693845744,"answer_id":77039428,"question_id":11677670,"body_markdown":"Besides all the above reason, `static final` use a naming convention: all uppercase letters with underscores between words.\r\n\r\nFor example:\r\n\r\n```java\r\nprivate static final int NUM_BRACKETS = 45;\r\nprivate static final String TEMPLATE = &quot;Hello&quot;;\r\n```\r\n","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>Besides all the above reason, <code>static final</code> use a naming convention: all uppercase letters with underscores between words.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final int NUM_BRACKETS = 45;\nprivate static final String TEMPLATE = &quot;Hello&quot;;\n</code></pre>\n"}],"owner":{"account_id":208183,"reputation":7392,"user_id":458509,"accept_rate":71,"display_name":"storm_buster"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202826,"favorite_count":0,"down_vote_count":1,"up_vote_count":63,"accepted_answer_id":11677688,"answer_count":14,"score":62,"last_activity_date":1693845744,"creation_date":1343335167,"question_id":11677670,"body_markdown":"I have seen much code where people write `public static final String mystring = ...`\r\nand then just use a value.\r\n\r\nWhy do they have to do that? Why do they have to initialize the value as `final` prior to using it?\r\n\r\n**UPDATE**\r\n\r\nOk, thanks all for all your answers, I understand the meaning of those key (public static final). What I dont understand is why people use that even if the constant will be used only in one place and only in the same class. why declaring it? why dont we just use the variable? \r\n","title":"when exactly are we supposed to use &quot;public static final String&quot;?","body":"<p>I have seen much code where people write <code>public static final String mystring = ...</code>\nand then just use a value.</p>\n\n<p>Why do they have to do that? Why do they have to initialize the value as <code>final</code> prior to using it?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Ok, thanks all for all your answers, I understand the meaning of those key (public static final). What I dont understand is why people use that even if the constant will be used only in one place and only in the same class. why declaring it? why dont we just use the variable? </p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":2005971,"reputation":536,"user_id":1795860,"accept_rate":91,"display_name":"TheNytangel"},"score":0,"creation_date":1693768760,"post_id":77033764,"comment_id":135800995,"body_markdown":"Have you tried `jakarta.servlet.Filter` instead? Spring Boot 3 made the switch from javax to the jakarta dependencies: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0.0-M1-Release-Notes","body":"Have you tried <code>jakarta.servlet.Filter</code> instead? Spring Boot 3 made the switch from javax to the jakarta dependencies: <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0.0-M1-Release-Notes\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/wiki/&hellip;</a>"},{"owner":{"account_id":11649558,"reputation":217,"user_id":14359173,"display_name":"Alexey"},"score":0,"creation_date":1693769110,"post_id":77033764,"comment_id":135801051,"body_markdown":"oh, that was the exact problem, You can write it as an anster if you want","body":"oh, that was the exact problem, You can write it as an anster if you want"}],"answers":[{"tags":[],"owner":{"account_id":2005971,"reputation":536,"user_id":1795860,"accept_rate":91,"display_name":"TheNytangel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693769176,"creation_date":1693769176,"answer_id":77033870,"question_id":77033764,"body_markdown":"Spring Boot 3 switched from using `javax` packages to `jakarta` packages and dependencies: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0.0-M1-Release-Notes\r\n\r\nSpring should be able to load the filter if you implement the `jakarta.servlet.Filter` class.","title":"Cannot add filter to SpringBootApplication","body":"<p>Spring Boot 3 switched from using <code>javax</code> packages to <code>jakarta</code> packages and dependencies: <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0.0-M1-Release-Notes\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0.0-M1-Release-Notes</a></p>\n<p>Spring should be able to load the filter if you implement the <code>jakarta.servlet.Filter</code> class.</p>\n"}],"owner":{"account_id":11649558,"reputation":217,"user_id":14359173,"display_name":"Alexey"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77033870,"answer_count":1,"score":1,"last_activity_date":1693845054,"creation_date":1693767160,"question_id":77033764,"body_markdown":"I&#39;ve read some answers on the internet, but nothing helps to me. Cannot add filter to my springbootapplication. The guides say that if I need a filter that worked for all endpoints, that I need to use the Filter interface. I used it, but nothing has changed. Is there something wrong with my dependencies?\r\n\r\n\r\n    ##### com.foo.core Main.java\r\n    package com.foo.core;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n    @SpringBootApplication\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Main.class, args);\r\n        }\r\n\r\n    }\r\n\r\n    ##### com.foo.core AuthorizationRequiredFilter.java\r\n    package com.foo.core;\r\n    \r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.core.annotation.Order;\r\n    import javax.servlet.*;\r\n    import javax.servlet.Filter;\r\n    import javax.servlet.http.Cookie;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import java.io.IOException;\r\n    import org.slf4j.Logger;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    @Order(0)\r\n    public class AuthorizationRequiredFilter implements Filter {\r\n    \r\n        private static final Logger log = LoggerFactory.getLogger(AuthorizationRequiredFilter.class);\r\n    \r\n        @Override\r\n        public void init(FilterConfig filterConfig) throws ServletException {\r\n    \r\n        }\r\n\r\n        @Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n            log.debug(&quot;doFilter() method is invoked&quot;);\r\n            HttpServletRequest httpRequest = (HttpServletRequest) request;\r\n            System.out.println(httpRequest.getHeader(&quot;Authorization&quot;));\r\n            chain.doFilter(request, response);\r\n        }\r\n    \r\n        @Override\r\n        public void destroy() {\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n\r\n    ##### com.foo.core PingController .java\r\n    package com.foo.core.controllers;\r\n    \r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    @RestController\r\n    public class PingController extends ResponseFormat {\r\n    \r\n        @RequestMapping(value = &quot;ping&quot;, method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        public String ping() throws JSONException {\r\n            JSONObject response = new JSONObject();\r\n            response.put(&quot;message&quot;, &quot;pong&quot;);\r\n            return this.ok(response);\r\n        }\r\n    \r\n    }\r\n\r\n \r\n    ####### pom.xml\r\n\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t\t&lt;parent&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t\t&lt;/parent&gt;\r\n\t\t&lt;groupId&gt;com.businessdynamics&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;core&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;name&gt;core&lt;/name&gt;\r\n\t\t&lt;description&gt;Businessdynamics core&lt;/description&gt;\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;java.version&gt;20&lt;/java.version&gt;\r\n\t\t&lt;/properties&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;20190722&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;4.13.2&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;persistence-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.0.2&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.18.8&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t\r\n\t\t&lt;build&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/build&gt;\r\n\t\r\n\t&lt;/project&gt;\r\n\r\nI use `@SpringBootApplication` so componentscan is not required as I understand. When I `POST /ping` - I get server response, but I have no logs in my terminal. What I do wrong, why filter is not working?","title":"Cannot add filter to SpringBootApplication","body":"<p>I've read some answers on the internet, but nothing helps to me. Cannot add filter to my springbootapplication. The guides say that if I need a filter that worked for all endpoints, that I need to use the Filter interface. I used it, but nothing has changed. Is there something wrong with my dependencies?</p>\n<pre><code>##### com.foo.core Main.java\npackage com.foo.core;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Main.class, args);\n    }\n\n}\n\n##### com.foo.core AuthorizationRequiredFilter.java\npackage com.foo.core;\n\nimport org.slf4j.LoggerFactory;\nimport org.springframework.core.annotation.Order;\nimport javax.servlet.*;\nimport javax.servlet.Filter;\nimport javax.servlet.http.Cookie;\nimport javax.servlet.http.HttpServletRequest;\nimport java.io.IOException;\nimport org.slf4j.Logger;\nimport org.springframework.stereotype.Component;\n\n@Component\n@Order(0)\npublic class AuthorizationRequiredFilter implements Filter {\n\n    private static final Logger log = LoggerFactory.getLogger(AuthorizationRequiredFilter.class);\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        log.debug(&quot;doFilter() method is invoked&quot;);\n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n        System.out.println(httpRequest.getHeader(&quot;Authorization&quot;));\n        chain.doFilter(request, response);\n    }\n\n    @Override\n    public void destroy() {\n\n    }\n\n}\n\n\n##### com.foo.core PingController .java\npackage com.foo.core.controllers;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\npublic class PingController extends ResponseFormat {\n\n    @RequestMapping(value = &quot;ping&quot;, method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_VALUE)\n    public String ping() throws JSONException {\n        JSONObject response = new JSONObject();\n        response.put(&quot;message&quot;, &quot;pong&quot;);\n        return this.ok(response);\n    }\n\n}\n\n\n####### pom.xml\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.businessdynamics&lt;/groupId&gt;\n    &lt;artifactId&gt;core&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;core&lt;/name&gt;\n    &lt;description&gt;Businessdynamics core&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;20&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20190722&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.2&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.8&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I use <code>@SpringBootApplication</code> so componentscan is not required as I understand. When I <code>POST /ping</code> - I get server response, but I have no logs in my terminal. What I do wrong, why filter is not working?</p>\n"},{"tags":["java","spring-boot","intellij-idea","telegram-bot"],"answers":[{"tags":[],"owner":{"account_id":16338499,"reputation":180,"user_id":11799970,"display_name":"Orfeas Magoulas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664560799,"creation_date":1664560799,"answer_id":73912399,"question_id":73912290,"body_markdown":"This article explains how to build an interactive web application using Web Sockets.\r\n\r\nhttps://spring.io/guides/gs/messaging-stomp-websocket/\r\n\r\nThis establishes a continuous 2-way connection allowing client-side javascript to recieve updates and dynamically update the webpage.\r\n\r\nEdit: \r\n\r\nHere is a link to a full example project.\r\n\r\nhttps://github.com/spring-guides/gs-messaging-stomp-websocket","title":"Is it possible to show dynamic data in real time in an html with spring boot?","body":"<p>This article explains how to build an interactive web application using Web Sockets.</p>\n<p><a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/messaging-stomp-websocket/</a></p>\n<p>This establishes a continuous 2-way connection allowing client-side javascript to recieve updates and dynamically update the webpage.</p>\n<p>Edit:</p>\n<p>Here is a link to a full example project.</p>\n<p><a href=\"https://github.com/spring-guides/gs-messaging-stomp-websocket\" rel=\"nofollow noreferrer\">https://github.com/spring-guides/gs-messaging-stomp-websocket</a></p>\n"}],"owner":{"account_id":26159616,"reputation":11,"user_id":20121848,"display_name":"Hipolito Matias Miguel Angel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":483,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693845045,"creation_date":1664559960,"question_id":73912290,"body_markdown":"\r\nI am developing with spring boot in Intellij, implement a service that is a class of the telegram api that receives messages through a bot, what I would like to do is show those messages that arrive in real time in a datatable and as they arrive the message is seen in the table.","title":"Is it possible to show dynamic data in real time in an html with spring boot?","body":"<p>I am developing with spring boot in Intellij, implement a service that is a class of the telegram api that receives messages through a bot, what I would like to do is show those messages that arrive in real time in a datatable and as they arrive the message is seen in the table.</p>\n"},{"tags":["java","spring","spring-data","spring-data-rest"],"answers":[{"tags":[],"owner":{"account_id":4025902,"reputation":1561,"user_id":3314194,"accept_rate":87,"display_name":"Kevin Vasko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1480956451,"creation_date":1480956451,"answer_id":40979194,"question_id":40942177,"body_markdown":"I found the solution. \r\n\r\nI was running into this bug. https://jira.spring.io/browse/DATAREST-906\r\n\r\nI was using Spring Boot 1.4.1, upgrading to 1.4.2 solves the problem. \r\n\r\n","title":"Spring @RepositoryRestController causes @PageableDefault to stop working","body":"<p>I found the solution. </p>\n\n<p>I was running into this bug. <a href=\"https://jira.spring.io/browse/DATAREST-906\" rel=\"nofollow noreferrer\">https://jira.spring.io/browse/DATAREST-906</a></p>\n\n<p>I was using Spring Boot 1.4.1, upgrading to 1.4.2 solves the problem. </p>\n"},{"tags":[],"owner":{"account_id":4564492,"reputation":2199,"user_id":3705861,"display_name":"Younes El Ouarti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693844656,"creation_date":1693844656,"answer_id":77039340,"question_id":40942177,"body_markdown":"For anyone who comes across `@PageableDefault` and is wondering why it is null (and thus doesn&#39;t work). Check whether you&#39;re also using `@RequestParam` for the same attribute; if you do, remove it.\r\n\r\nSo, this:\r\n```java\r\n@GetMapping(produces = { MimeTypes.HALJSON_VALUE, MediaType.APPLICATION_JSON_VALUE })\r\nResponseEntity&lt;PagedModel&lt;EntityModel&lt;Thing&gt;&gt;&gt; getAllThings(\r\n        @PageableDefault(size = 20, sort = { &quot;name&quot; })\r\n        @RequestParam(name = &quot;pageable&quot;, required = false) final Pageable pageable) {\r\n        ...\r\n}\r\n```\r\n\r\nbecomes this:\r\n\r\n```java\r\n@GetMapping(produces = { MimeTypes.HALJSON_VALUE, MediaType.APPLICATION_JSON_VALUE })\r\nResponseEntity&lt;PagedModel&lt;EntityModel&lt;Thing&gt;&gt;&gt; getAllThings(\r\n        @PageableDefault(size = 20, sort = { &quot;name&quot; }) final Pageable pageable) {\r\n        ...\r\n}\r\n```\r\n","title":"Spring @RepositoryRestController causes @PageableDefault to stop working","body":"<p>For anyone who comes across <code>@PageableDefault</code> and is wondering why it is null (and thus doesn't work). Check whether you're also using <code>@RequestParam</code> for the same attribute; if you do, remove it.</p>\n<p>So, this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(produces = { MimeTypes.HALJSON_VALUE, MediaType.APPLICATION_JSON_VALUE })\nResponseEntity&lt;PagedModel&lt;EntityModel&lt;Thing&gt;&gt;&gt; getAllThings(\n        @PageableDefault(size = 20, sort = { &quot;name&quot; })\n        @RequestParam(name = &quot;pageable&quot;, required = false) final Pageable pageable) {\n        ...\n}\n</code></pre>\n<p>becomes this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(produces = { MimeTypes.HALJSON_VALUE, MediaType.APPLICATION_JSON_VALUE })\nResponseEntity&lt;PagedModel&lt;EntityModel&lt;Thing&gt;&gt;&gt; getAllThings(\n        @PageableDefault(size = 20, sort = { &quot;name&quot; }) final Pageable pageable) {\n        ...\n}\n</code></pre>\n"}],"owner":{"account_id":4025902,"reputation":1561,"user_id":3314194,"accept_rate":87,"display_name":"Kevin Vasko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":651,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":40979194,"answer_count":2,"score":0,"last_activity_date":1693844656,"creation_date":1480719895,"question_id":40942177,"body_markdown":"I have a custom controller that is using the @PageableDefault annotation. I was using @Controller annotation on my class, however, I wanted to make this controller respond with the HATEOAS response. I added the @RepositoryRestController changed my method to \r\n\r\n```java\r\npublic HttpEntity&lt;PagedResources&lt;Resource&lt;Books&gt;&gt;&gt; search(\r\n                      @RequestParam(value = &quot;q&quot;, required = false) String query,\r\n                      @PageableDefault(page = 0, size = 20) Pageable pageable)\r\n```\r\n\r\n\r\nand then the return to \r\n\r\n```java\r\nreturn new ResponseEntity&lt;PagedResources&lt;Resource&lt;Books&gt;&gt;&gt; booksAssembler\r\n                                               .toResource(queryResult), HttpStatus.OK);\r\n```\r\n\r\nNow my @PageableDefault doesn&#39;t work. But when a client make a request (e.g. explicitly adding (or without) &amp;page=0&amp;size=20 to the URL) the endpoint from the controller, pageable is always null. I don&#39;t get why it stop working after changing the annotation? Is there any way to fix it other than changing back to @Controller?","title":"Spring @RepositoryRestController causes @PageableDefault to stop working","body":"<p>I have a custom controller that is using the @PageableDefault annotation. I was using @Controller annotation on my class, however, I wanted to make this controller respond with the HATEOAS response. I added the @RepositoryRestController changed my method to</p>\n<pre class=\"lang-java prettyprint-override\"><code>public HttpEntity&lt;PagedResources&lt;Resource&lt;Books&gt;&gt;&gt; search(\n                      @RequestParam(value = &quot;q&quot;, required = false) String query,\n                      @PageableDefault(page = 0, size = 20) Pageable pageable)\n</code></pre>\n<p>and then the return to</p>\n<pre class=\"lang-java prettyprint-override\"><code>return new ResponseEntity&lt;PagedResources&lt;Resource&lt;Books&gt;&gt;&gt; booksAssembler\n                                               .toResource(queryResult), HttpStatus.OK);\n</code></pre>\n<p>Now my @PageableDefault doesn't work. But when a client make a request (e.g. explicitly adding (or without) &amp;page=0&amp;size=20 to the URL) the endpoint from the controller, pageable is always null. I don't get why it stop working after changing the annotation? Is there any way to fix it other than changing back to @Controller?</p>\n"},{"tags":["java","spring-boot","xss","json-deserialization","html-escape-characters"],"owner":{"account_id":27683979,"reputation":11,"user_id":21132113,"display_name":"Rajoli Hemanth Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693844640,"creation_date":1693844640,"question_id":77039336,"body_markdown":"lets consider this scenario.&lt;br/&gt;\r\n1.I have created a deserializer class\r\n&lt;br/&gt;\r\n2.used JsonDeserilizer anotation in POJO class.\r\n&lt;br/&gt;\r\n----------up to now everything is going good----------\r\n\r\nwhen request come to controller which accepts POJO. &lt;br/&gt;\r\n          &amp;nbsp; &amp;nbsp; -- here one deserialization is happening &lt;br/&gt;\r\nAgain if we send this same POJO to another method then &lt;br/&gt;\r\n&amp;nbsp; &amp;nbsp; -- then here also deserialization is happening(which i don&#39;t want)\r\n\r\n&lt;br/&gt;\r\n&lt;br/&gt;\r\nAny Suggestion or help it would save my time.&lt;br/&gt;\r\n","title":"Trying to escapeHtml Characters with Jsondeserializer in spring boot, But when ever it is persisting html escaping is happening more than once","body":"<p>lets consider this scenario.<br/>\n1.I have created a deserializer class\n<br/>\n2.used JsonDeserilizer anotation in POJO class.\n<br/>\n----------up to now everything is going good----------</p>\n<p>when request come to controller which accepts POJO. <br/>\n    -- here one deserialization is happening <br/>\nAgain if we send this same POJO to another method then <br/>\n    -- then here also deserialization is happening(which i don't want)</p>\n<br/>\n<br/>\nAny Suggestion or help it would save my time.<br/>\n"},{"tags":["java","fxml","directory-structure"],"answers":[{"tags":[],"owner":{"account_id":29363814,"reputation":1,"user_id":22497968,"display_name":"flackode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693835205,"creation_date":1693835205,"answer_id":77038273,"question_id":77038081,"body_markdown":"I also had this problem when I started to approach java. I propose this solution (with me it worked) but I am convinced there is a solution that does not increase the complexity of the method. So try this\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VRzfa.png","title":"Intelij Idea - Loading fxml resource from nested directories","body":"<p>I also had this problem when I started to approach java. I propose this solution (with me it worked) but I am convinced there is a solution that does not increase the complexity of the method. So try this\n<a href=\"https://i.stack.imgur.com/VRzfa.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":28852866,"reputation":35,"user_id":22098389,"display_name":"vperse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693844401,"creation_date":1693844401,"answer_id":77039315,"question_id":77038081,"body_markdown":"I managed to make it work by excluding the &#39;/&#39; before views/...","title":"Intelij Idea - Loading fxml resource from nested directories","body":"<p>I managed to make it work by excluding the '/' before views/...</p>\n"}],"owner":{"account_id":28852866,"reputation":35,"user_id":22098389,"display_name":"vperse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693844401,"creation_date":1693833632,"question_id":77038081,"body_markdown":"I&#39;m having trouble loading the fxml files from my resource views directory.\r\n\r\nI can load it normally without the nested directories but would like to solve it this way for more structural organization.\r\n\r\nThis is the project structure I modified from Intelij&#39;s default.\r\n\r\n[![project_structure](https://i.stack.imgur.com/MYvPU.png)](https://i.stack.imgur.com/MYvPU.png)\r\n\r\nThis is the command I use to load the resource.\r\n\r\n``` Java\r\nFXMLLoader homeSceneFXMLLoader = new FXMLLoader(SASAApplication.class.getResource(&quot;/views/home-view.fxml&quot;));\r\n```\r\n\r\nThis command triggers InvocationTargetException and says Location is not set.\r\n\r\nI&#39;ve searched the web for some solutions but my project structure is different so they don&#39;t seem to solve my issue.\r\n\r\nI want to know how I can correctly access the paths within my project structures so I can have a smooth coding experience.\r\n\r\nThank you in advance!","title":"Intelij Idea - Loading fxml resource from nested directories","body":"<p>I'm having trouble loading the fxml files from my resource views directory.</p>\n<p>I can load it normally without the nested directories but would like to solve it this way for more structural organization.</p>\n<p>This is the project structure I modified from Intelij's default.</p>\n<p><a href=\"https://i.stack.imgur.com/MYvPU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MYvPU.png\" alt=\"project_structure\" /></a></p>\n<p>This is the command I use to load the resource.</p>\n<pre><code>FXMLLoader homeSceneFXMLLoader = new FXMLLoader(SASAApplication.class.getResource(&quot;/views/home-view.fxml&quot;));\n</code></pre>\n<p>This command triggers InvocationTargetException and says Location is not set.</p>\n<p>I've searched the web for some solutions but my project structure is different so they don't seem to solve my issue.</p>\n<p>I want to know how I can correctly access the paths within my project structures so I can have a smooth coding experience.</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","angular"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1693844382,"post_id":77037458,"comment_id":135810558,"body_markdown":"Welcome to stackoverflow. Your question has way too much code. Can you [edit] your question and reduce it to a [mcve]? You&#39;ll have better chances that someone takes a look when they don&#39;t have to dig through all that code.","body":"Welcome to stackoverflow. Your question has way too much code. Can you <a href=\"https://stackoverflow.com/posts/77037458/edit\">edit</a> your question and reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? You&#39;ll have better chances that someone takes a look when they don&#39;t have to dig through all that code."}],"owner":{"account_id":29361172,"reputation":1,"user_id":22495866,"display_name":"Akash Chauhan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693844304,"creation_date":1693828218,"question_id":77037458,"body_markdown":"Current Result - I am getting result on different page after applying filter like 2 result in page 1 and 3 result on page 2 and 1 result on page 3 so on.\r\n\r\nExpected result - All filtered result should come on page 1 as it can hold max 10 results and then if it increases it should go on page 2 and 3 so on.\r\n\r\n``` \r\npublic _onPageChange({ page, pageSizeOptions: { current } }: UxPageChangeEvent): void {\r\n        if (this._pagingModel.currentPage === page &amp;&amp; this._pagingModel.pageSizeOptions.current === current) {\r\n            return;\r\n        }\r\n\r\n        this._pagingModel.currentPage = page;\r\n        this._pagingModel.pageSizeOptions.current = current;\r\n\r\n        this._isLoading = true;\r\n        this._statusVisibleLoaders.clear();\r\n        this._failureReasonVisibleLoaders.clear();\r\n        this.loadTablePageData();\r\n    }\r\n\r\n    public _onStatusChange(event: UxValueChangeEvent&lt;UxDropdownListItem&gt;, id: string): void {\r\n        this._statusVisibleLoaders.add(id);\r\n        this.testRunService\r\n            .updateRamTestRun(id, { testingStatus: event.newValue.value })\r\n            .pipe(takeUntil(this.unsubscribe$))\r\n            .subscribe(() =&gt; {\r\n                this._statusVisibleLoaders.delete(id);\r\n                this.cdr.detectChanges();\r\n            });\r\n    }\r\n\r\n    public _onFailureReasonChange(\r\n        failureReason: RamRootCauseModel,\r\n        contentModel: FailureReasonDropDownContentModel\r\n    ): void {\r\n        const testRunId = contentModel.testRunId;\r\n        this._failureReasonVisibleLoaders.add(testRunId);\r\n        this._failurePopoverVisible = false;\r\n        this.testRunService\r\n            .setTestRunsFailureReason([testRunId], failureReason)\r\n            .pipe(takeUntil(this.unsubscribe$))\r\n            .subscribe(() =&gt; {\r\n                contentModel.selectedItem = { id: failureReason.id, label: failureReason.caption };\r\n                this.uxTable.update();\r\n                this._failureReasonVisibleLoaders.delete(testRunId);\r\n                this.cdr.detectChanges();\r\n            });\r\n    }\r\n\r\n    public _onFailureReasonDropdownFocus(contentModel: FailureReasonDropDownContentModel): void {\r\n        this._failurePopoverVisible = true;\r\n        this._failureReasonChangingModel = contentModel;\r\n        this._failureReasonChangingNode = {\r\n            id: contentModel.selectedItem &amp;&amp; contentModel.selectedItem.id,\r\n            caption: contentModel.selectedItem &amp;&amp; contentModel.selectedItem.label,\r\n        };\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    public updateTestRunComments(\r\n        { text, html }: RamTestCaseCommentContentEditedEvent,\r\n        contentModel: TestCaseCommentContentModel\r\n    ): void {\r\n        this._commentVisibleLoaders.add(contentModel.testRunId);\r\n        this.testRunService\r\n            .updateTestRunsComments(\r\n                {\r\n                    text,\r\n                    html,\r\n                },\r\n                [contentModel.testRunId]\r\n            )\r\n            .pipe(takeUntil(this.unsubscribe$))\r\n            .subscribe(\r\n                () =&gt; {\r\n                    contentModel.comment = html;\r\n                    this._commentVisibleLoaders.delete(contentModel.testRunId);\r\n                    this.cdr.detectChanges();\r\n                },\r\n                () =&gt; {\r\n                    this._commentVisibleLoaders.delete(contentModel.testRunId);\r\n                    this.cdr.detectChanges();\r\n                    this.notificationService.push(\r\n                        NotificationHelper.error(\r\n                            &#39;Unable to send comment. Please try again or contact your system administrator&#39;\r\n                        )\r\n                    );\r\n                }\r\n            );\r\n    }\r\n\r\n    public _onFilterClick(event: UxTableFilterEvent): void {\r\n        const columnName: RamAnalyzedSummaryTestCasesColumnName = event.column.value;\r\n        const filterNewParentElement = AtpTableFilterHelper.getFilterElement(&lt;HTMLElement&gt;event.originalEvent.target);\r\n\r\n        if (this._filterPopoverVisible &amp;&amp; this._filterParentElement === filterNewParentElement) {\r\n            this._filterParentElement = null;\r\n            this._filterPopoverVisible = false;\r\n            return;\r\n        }\r\n\r\n        this._selectedFilter = this._tableFilteringParams.get(columnName);\r\n        this._selectedColumnName = columnName;\r\n\r\n        this.lazyLoadItemsForFilter(columnName);\r\n\r\n        this._filterParentElement = filterNewParentElement;\r\n        this._filterPopoverVisible = true;\r\n    }\r\n\r\n    public _onFilterApplyOrClear(): void {\r\n        this._pagingModel.currentPage = 1;\r\n        // Update filtermodel\r\n        this._tableFilteringParams.set(this._selectedColumnName, this._selectedFilter);\r\n        this.loadTablePageData(true);\r\n        this._filterPopoverVisible = false;\r\n    }\r\n\r\n    private initTableFilteringParams(): void {\r\n        const filters: [RamAnalyzedSummaryTestCasesColumnName, FilterModelsType][] = [\r\n            [\r\n                RamAnalyzedSummaryTestCasesColumnName.TEST_CASE,\r\n                {\r\n                    type: FilterType.TEXT_FILTER,\r\n                    applied: false,\r\n                    caption: &#39;Filter by Name&#39;,\r\n                    filterTypeHidden: true,\r\n                    caseSensitiveHidden: true,\r\n                },\r\n            ],\r\n            [\r\n                RamAnalyzedSummaryTestCasesColumnName.LABEL,\r\n                {\r\n                    type: FilterType.REFERENCE_FILTER,\r\n                    applied: false,\r\n                    caption: &#39;Filter by Label&#39;,\r\n                    label: &#39;Label&#39;,\r\n                    existingItemsOnly: false,\r\n                    multiple: true,\r\n                    loading: true,\r\n                },\r\n            ],\r\n            [\r\n                RamAnalyzedSummaryTestCasesColumnName.STATUS,\r\n                {\r\n                    type: FilterType.CHECKBOX_FILTER,\r\n                    applied: true,\r\n                    caption: &#39;Filter by Status&#39;,\r\n                    items: [\r\n                        { id: RamTestingStatuses.PASSED, caption: RamTestingStatusesNames.PASSED },\r\n                        { id: RamTestingStatuses.FAILED, caption: RamTestingStatusesNames.FAILED },\r\n                        { id: RamTestingStatuses.WARNING, caption: RamTestingStatusesNames.WARNING },\r\n                        { id: RamTestingStatuses.STOPPED, caption: RamTestingStatusesNames.STOPPED },\r\n                        { id: RamTestingStatuses.SKIPPED, caption: RamTestingStatusesNames.SKIPPED },\r\n                        { id: RamTestingStatuses.BLOCKED, caption: RamTestingStatusesNames.BLOCKED },\r\n                        { id: RamTestingStatuses.UNKNOWN, caption: RamTestingStatusesNames.UNKNOWN },\r\n                        { id: RamTestingStatuses.NOT_STARTED, caption: RamTestingStatusesNames.NOT_STARTED },\r\n                    ],\r\n                    value: [\r\n                        { id: RamTestingStatuses.FAILED, caption: RamTestingStatusesNames.FAILED },\r\n                        { id: RamTestingStatuses.WARNING, caption: RamTestingStatusesNames.WARNING },\r\n                        { id: RamTestingStatuses.STOPPED, caption: RamTestingStatusesNames.STOPPED },\r\n                        { id: RamTestingStatuses.SKIPPED, caption: RamTestingStatusesNames.SKIPPED },\r\n                        { id: RamTestingStatuses.BLOCKED, caption: RamTestingStatusesNames.BLOCKED },\r\n                        { id: RamTestingStatuses.UNKNOWN, caption: RamTestingStatusesNames.UNKNOWN },\r\n                        { id: RamTestingStatuses.NOT_STARTED, caption: RamTestingStatusesNames.NOT_STARTED },\r\n                    ],\r\n                },\r\n            ],\r\n            [\r\n                RamAnalyzedSummaryTestCasesColumnName.FAILURE_REASON,\r\n                {\r\n                    type: FilterType.REFERENCE_FILTER,\r\n                    applied: false,\r\n                    caption: &#39;Filter by Fail Reason&#39;,\r\n                    label: &#39;Failure Reason&#39;,\r\n                    multiple: true,\r\n                    items: this.failureReasons.map(({ id, label }) =&gt; ({ id, caption: label })),\r\n                },\r\n            ],\r\n        ];\r\n\r\n        this._tableFilteringParams = new Map(filters);\r\n    }\r\n\r\n    private loadTablePageData(resetPage: boolean = true): void {\r\n        const sortType = this.currentSortingType;\r\n        const sortingColumnType = this.currentSortingColumn;\r\n    \r\n        if (resetPage) {\r\n            this._pagingModel.currentPage = 1;\r\n        }\r\n    \r\n        const {\r\n            currentPage: page,\r\n            pageSizeOptions: { current: size },\r\n        } = this._pagingModel;\r\n        const request: SearchTestRunsRequestFilters = this.getFiltersRequestModel();\r\n    \r\n        this.testRunService\r\n            .getRamTestRunsFilteredPage(page, size, sortType, sortingColumnType, request)\r\n            .pipe(takeUntil(this.unsubscribe$))\r\n            .subscribe(({ totalNumberOfEntities, testRuns: tablePageRows }) =&gt; {\r\n                this._testCasesUrls = [];\r\n                this._tableRowsTotalCount = totalNumberOfEntities;\r\n                this._tableModel.body.rows = tablePageRows.map(tableRowData =&gt; {\r\n                    return this.formTableRow(tableRowData);\r\n                });\r\n                this._tableModel = { ...this._tableModel };\r\n                this._isLoading = false;\r\n                this.updateFilterIcons();\r\n                this.cdr.detectChanges();\r\n                this.loaded.emit(this._tableRowsTotalCount);\r\n            });\r\n    }\r\n\r\n    private formTableRow(ramTestRun: RamTestRunAnalyzedDataModel): UxTableRow {\r\n        let jiraSystemUrl = this._jiraSystemUrl;\r\n        if (this._jiraSystemUrl &amp;&amp; this._jiraSystemUrl[this._jiraSystemUrl.length - 1] === &#39;/&#39;) {\r\n            jiraSystemUrl = this._jiraSystemUrl.slice(0, this._jiraSystemUrl.length - 1);\r\n        }\r\n        const editorLink = `/project/${ramTestRun.projectId}/plan/${ramTestRun.testPlanId}/case/${ramTestRun.testCaseId}/scenario/${ramTestRun.scenarioId}/editor`;\r\n        this._testCasesUrls.push({ id: ramTestRun.testCaseId, link: editorLink, testRunId: ramTestRun.uuid });\r\n\r\n        return {\r\n            id: ramTestRun.uuid,\r\n            columns: [\r\n                {\r\n                    type: &#39;checkbox&#39;,\r\n                    value: false,\r\n                },\r\n                {\r\n                    type: &#39;link&#39;,\r\n                    value: ramTestRun.name,\r\n                    url: editorLink,\r\n                    unclickable: true,\r\n                },\r\n                {\r\n                    type: &#39;content&#39;,\r\n                    contentModel: {\r\n                        tooltipData: ramTestRun.labels ? ramTestRun.labels.map(label =&gt; label.name).join(&#39;, &#39;) : &#39;&#39;,\r\n                        columnContent: ramTestRun.labels ? `${ramTestRun.labels.length} Label(s)` : &#39;No Labels&#39;,\r\n                    },\r\n                    value: this.testRunLabels,\r\n                    unclickable: true,\r\n                },\r\n                {\r\n                    type: &#39;content&#39;,\r\n                    contentModel: {\r\n                        selectedItem: this.testRunsStatuses.find((listItem: UxDropdownListItem) =&gt; {\r\n                            return listItem.value === ramTestRun.testingStatus;\r\n                        }),\r\n                        listItems: this.testRunsStatuses,\r\n                        testRunId: ramTestRun.uuid,\r\n                    },\r\n                    value: this.testRunStatusesDropdown,\r\n                    unclickable: true,\r\n                },\r\n                {\r\n                    type: &#39;content&#39;,\r\n                    contentModel: {\r\n                        selectedItem: this.failureReasons.find(\r\n                            failureReason =&gt; failureReason.id === ramTestRun.failureReasonId\r\n                        ),\r\n                        listItems: this.failureReasons,\r\n                        testRunId: ramTestRun.uuid,\r\n                    },\r\n                    value: this.testRunFailureReasonDropdown,\r\n                    unclickable: true,\r\n                },\r\n                {\r\n                    type: &#39;link&#39;,\r\n                    value: ramTestRun.jiraTicket,\r\n                    url: jiraSystemUrl ? `${jiraSystemUrl}/browse/${ramTestRun.jiraTicket}` : &#39;&#39;,\r\n                    unclickable: true,\r\n                },\r\n                {\r\n                    type: &#39;link&#39;,\r\n                    value: ramTestRun.testRunJiraTicket,\r\n                    url: jiraSystemUrl ? `${jiraSystemUrl}/browse/${ramTestRun.testRunJiraTicket}` : &#39;&#39;,\r\n                    unclickable: true,\r\n                },\r\n                {\r\n                    type: &#39;content&#39;,\r\n                    contentModel: {\r\n                        comment: ramTestRun.comment ? ramTestRun.comment.html : &#39;&#39;,\r\n                        jiraSystemUrl: jiraSystemUrl,\r\n                        testRunId: ramTestRun.uuid,\r\n                    },\r\n                    value: this.testCaseComment,\r\n                    unclickable: true,\r\n                },\r\n            ],\r\n        };\r\n    }\r\n\r\n    private getFiltersRequestModel(): SearchTestRunsRequestFilters {\r\n        const request: SearchTestRunsRequestFilters = { executionRequestId: this.executionRequestId };\r\n\r\n        Array.from(this._tableFilteringParams.entries())\r\n            .filter(([, filter]) =&gt; filter.applied)\r\n            .forEach(([columnName, filter]) =&gt; {\r\n                switch (columnName) {\r\n                    case RamAnalyzedSummaryTestCasesColumnName.TEST_CASE:\r\n                        request.testCaseName = (&lt;TextFilterModel&gt;filter).value;\r\n                        break;\r\n                    case RamAnalyzedSummaryTestCasesColumnName.LABEL:\r\n                        const selectedLabelsNames = (&lt;ReferenceFilterModel&gt;filter).values\r\n                            .filter(({ customData }: { customData?: { existed: boolean } }) =&gt; customData?.existed)\r\n                            .map(({ caption }: { caption: string }) =&gt; caption);\r\n\r\n                        const searchTexts = (&lt;ReferenceFilterModel&gt;filter).values\r\n                            .filter(({ customData }: { customData?: { existed: boolean } }) =&gt; !customData?.existed)\r\n                            .map(({ caption }: { caption: string }) =&gt; caption);\r\n\r\n                        if (selectedLabelsNames.length) {\r\n                            request.labelNames = selectedLabelsNames;\r\n                        }\r\n\r\n                        if (searchTexts.length) {\r\n                            request.labelNameContains = searchTexts;\r\n                        }\r\n                        break;\r\n                    case RamAnalyzedSummaryTestCasesColumnName.STATUS:\r\n                        request.inTestingStatuses = (&lt;CheckboxFilterModel&gt;filter).value.map(\r\n                            ({ id }) =&gt; &lt;RamTestingStatuses&gt;id\r\n                        );\r\n                        break;\r\n                    case RamAnalyzedSummaryTestCasesColumnName.FAILURE_REASON:\r\n                        request.failureReasons = (&lt;ReferenceFilterModel&gt;filter).values.map(({ id }) =&gt; id);\r\n                        break;\r\n                }\r\n            });\r\n\r\n        return request;\r\n    }\r\n\r\n    private updateFilterIcons(): void {\r\n        requestAnimationFrame(() =&gt; {\r\n            const filterElements = (&lt;HTMLElement&gt;this.uxTable.elementRef.nativeElement).querySelectorAll(\r\n                &#39;.ux-table__filter&#39;\r\n            );\r\n\r\n            this._tableModel.header.rows[0].columns.forEach((column, i) =&gt; {\r\n                if (\r\n                    this._tableFilteringParams.get(column.value) &amp;&amp;\r\n                    this._tableFilteringParams.get(column.value).applied\r\n                ) {\r\n                    filterElements[i - 1].classList.add(&#39;_filtered&#39;);\r\n                }\r\n            });\r\n        });\r\n    }\r\n```","title":"Filtered results are staying in their respective page not starting from page 1","body":"<p>Current Result - I am getting result on different page after applying filter like 2 result in page 1 and 3 result on page 2 and 1 result on page 3 so on.</p>\n<p>Expected result - All filtered result should come on page 1 as it can hold max 10 results and then if it increases it should go on page 2 and 3 so on.</p>\n<pre><code>public _onPageChange({ page, pageSizeOptions: { current } }: UxPageChangeEvent): void {\n        if (this._pagingModel.currentPage === page &amp;&amp; this._pagingModel.pageSizeOptions.current === current) {\n            return;\n        }\n\n        this._pagingModel.currentPage = page;\n        this._pagingModel.pageSizeOptions.current = current;\n\n        this._isLoading = true;\n        this._statusVisibleLoaders.clear();\n        this._failureReasonVisibleLoaders.clear();\n        this.loadTablePageData();\n    }\n\n    public _onStatusChange(event: UxValueChangeEvent&lt;UxDropdownListItem&gt;, id: string): void {\n        this._statusVisibleLoaders.add(id);\n        this.testRunService\n            .updateRamTestRun(id, { testingStatus: event.newValue.value })\n            .pipe(takeUntil(this.unsubscribe$))\n            .subscribe(() =&gt; {\n                this._statusVisibleLoaders.delete(id);\n                this.cdr.detectChanges();\n            });\n    }\n\n    public _onFailureReasonChange(\n        failureReason: RamRootCauseModel,\n        contentModel: FailureReasonDropDownContentModel\n    ): void {\n        const testRunId = contentModel.testRunId;\n        this._failureReasonVisibleLoaders.add(testRunId);\n        this._failurePopoverVisible = false;\n        this.testRunService\n            .setTestRunsFailureReason([testRunId], failureReason)\n            .pipe(takeUntil(this.unsubscribe$))\n            .subscribe(() =&gt; {\n                contentModel.selectedItem = { id: failureReason.id, label: failureReason.caption };\n                this.uxTable.update();\n                this._failureReasonVisibleLoaders.delete(testRunId);\n                this.cdr.detectChanges();\n            });\n    }\n\n    public _onFailureReasonDropdownFocus(contentModel: FailureReasonDropDownContentModel): void {\n        this._failurePopoverVisible = true;\n        this._failureReasonChangingModel = contentModel;\n        this._failureReasonChangingNode = {\n            id: contentModel.selectedItem &amp;&amp; contentModel.selectedItem.id,\n            caption: contentModel.selectedItem &amp;&amp; contentModel.selectedItem.label,\n        };\n        this.cdr.detectChanges();\n    }\n\n    public updateTestRunComments(\n        { text, html }: RamTestCaseCommentContentEditedEvent,\n        contentModel: TestCaseCommentContentModel\n    ): void {\n        this._commentVisibleLoaders.add(contentModel.testRunId);\n        this.testRunService\n            .updateTestRunsComments(\n                {\n                    text,\n                    html,\n                },\n                [contentModel.testRunId]\n            )\n            .pipe(takeUntil(this.unsubscribe$))\n            .subscribe(\n                () =&gt; {\n                    contentModel.comment = html;\n                    this._commentVisibleLoaders.delete(contentModel.testRunId);\n                    this.cdr.detectChanges();\n                },\n                () =&gt; {\n                    this._commentVisibleLoaders.delete(contentModel.testRunId);\n                    this.cdr.detectChanges();\n                    this.notificationService.push(\n                        NotificationHelper.error(\n                            'Unable to send comment. Please try again or contact your system administrator'\n                        )\n                    );\n                }\n            );\n    }\n\n    public _onFilterClick(event: UxTableFilterEvent): void {\n        const columnName: RamAnalyzedSummaryTestCasesColumnName = event.column.value;\n        const filterNewParentElement = AtpTableFilterHelper.getFilterElement(&lt;HTMLElement&gt;event.originalEvent.target);\n\n        if (this._filterPopoverVisible &amp;&amp; this._filterParentElement === filterNewParentElement) {\n            this._filterParentElement = null;\n            this._filterPopoverVisible = false;\n            return;\n        }\n\n        this._selectedFilter = this._tableFilteringParams.get(columnName);\n        this._selectedColumnName = columnName;\n\n        this.lazyLoadItemsForFilter(columnName);\n\n        this._filterParentElement = filterNewParentElement;\n        this._filterPopoverVisible = true;\n    }\n\n    public _onFilterApplyOrClear(): void {\n        this._pagingModel.currentPage = 1;\n        // Update filtermodel\n        this._tableFilteringParams.set(this._selectedColumnName, this._selectedFilter);\n        this.loadTablePageData(true);\n        this._filterPopoverVisible = false;\n    }\n\n    private initTableFilteringParams(): void {\n        const filters: [RamAnalyzedSummaryTestCasesColumnName, FilterModelsType][] = [\n            [\n                RamAnalyzedSummaryTestCasesColumnName.TEST_CASE,\n                {\n                    type: FilterType.TEXT_FILTER,\n                    applied: false,\n                    caption: 'Filter by Name',\n                    filterTypeHidden: true,\n                    caseSensitiveHidden: true,\n                },\n            ],\n            [\n                RamAnalyzedSummaryTestCasesColumnName.LABEL,\n                {\n                    type: FilterType.REFERENCE_FILTER,\n                    applied: false,\n                    caption: 'Filter by Label',\n                    label: 'Label',\n                    existingItemsOnly: false,\n                    multiple: true,\n                    loading: true,\n                },\n            ],\n            [\n                RamAnalyzedSummaryTestCasesColumnName.STATUS,\n                {\n                    type: FilterType.CHECKBOX_FILTER,\n                    applied: true,\n                    caption: 'Filter by Status',\n                    items: [\n                        { id: RamTestingStatuses.PASSED, caption: RamTestingStatusesNames.PASSED },\n                        { id: RamTestingStatuses.FAILED, caption: RamTestingStatusesNames.FAILED },\n                        { id: RamTestingStatuses.WARNING, caption: RamTestingStatusesNames.WARNING },\n                        { id: RamTestingStatuses.STOPPED, caption: RamTestingStatusesNames.STOPPED },\n                        { id: RamTestingStatuses.SKIPPED, caption: RamTestingStatusesNames.SKIPPED },\n                        { id: RamTestingStatuses.BLOCKED, caption: RamTestingStatusesNames.BLOCKED },\n                        { id: RamTestingStatuses.UNKNOWN, caption: RamTestingStatusesNames.UNKNOWN },\n                        { id: RamTestingStatuses.NOT_STARTED, caption: RamTestingStatusesNames.NOT_STARTED },\n                    ],\n                    value: [\n                        { id: RamTestingStatuses.FAILED, caption: RamTestingStatusesNames.FAILED },\n                        { id: RamTestingStatuses.WARNING, caption: RamTestingStatusesNames.WARNING },\n                        { id: RamTestingStatuses.STOPPED, caption: RamTestingStatusesNames.STOPPED },\n                        { id: RamTestingStatuses.SKIPPED, caption: RamTestingStatusesNames.SKIPPED },\n                        { id: RamTestingStatuses.BLOCKED, caption: RamTestingStatusesNames.BLOCKED },\n                        { id: RamTestingStatuses.UNKNOWN, caption: RamTestingStatusesNames.UNKNOWN },\n                        { id: RamTestingStatuses.NOT_STARTED, caption: RamTestingStatusesNames.NOT_STARTED },\n                    ],\n                },\n            ],\n            [\n                RamAnalyzedSummaryTestCasesColumnName.FAILURE_REASON,\n                {\n                    type: FilterType.REFERENCE_FILTER,\n                    applied: false,\n                    caption: 'Filter by Fail Reason',\n                    label: 'Failure Reason',\n                    multiple: true,\n                    items: this.failureReasons.map(({ id, label }) =&gt; ({ id, caption: label })),\n                },\n            ],\n        ];\n\n        this._tableFilteringParams = new Map(filters);\n    }\n\n    private loadTablePageData(resetPage: boolean = true): void {\n        const sortType = this.currentSortingType;\n        const sortingColumnType = this.currentSortingColumn;\n    \n        if (resetPage) {\n            this._pagingModel.currentPage = 1;\n        }\n    \n        const {\n            currentPage: page,\n            pageSizeOptions: { current: size },\n        } = this._pagingModel;\n        const request: SearchTestRunsRequestFilters = this.getFiltersRequestModel();\n    \n        this.testRunService\n            .getRamTestRunsFilteredPage(page, size, sortType, sortingColumnType, request)\n            .pipe(takeUntil(this.unsubscribe$))\n            .subscribe(({ totalNumberOfEntities, testRuns: tablePageRows }) =&gt; {\n                this._testCasesUrls = [];\n                this._tableRowsTotalCount = totalNumberOfEntities;\n                this._tableModel.body.rows = tablePageRows.map(tableRowData =&gt; {\n                    return this.formTableRow(tableRowData);\n                });\n                this._tableModel = { ...this._tableModel };\n                this._isLoading = false;\n                this.updateFilterIcons();\n                this.cdr.detectChanges();\n                this.loaded.emit(this._tableRowsTotalCount);\n            });\n    }\n\n    private formTableRow(ramTestRun: RamTestRunAnalyzedDataModel): UxTableRow {\n        let jiraSystemUrl = this._jiraSystemUrl;\n        if (this._jiraSystemUrl &amp;&amp; this._jiraSystemUrl[this._jiraSystemUrl.length - 1] === '/') {\n            jiraSystemUrl = this._jiraSystemUrl.slice(0, this._jiraSystemUrl.length - 1);\n        }\n        const editorLink = `/project/${ramTestRun.projectId}/plan/${ramTestRun.testPlanId}/case/${ramTestRun.testCaseId}/scenario/${ramTestRun.scenarioId}/editor`;\n        this._testCasesUrls.push({ id: ramTestRun.testCaseId, link: editorLink, testRunId: ramTestRun.uuid });\n\n        return {\n            id: ramTestRun.uuid,\n            columns: [\n                {\n                    type: 'checkbox',\n                    value: false,\n                },\n                {\n                    type: 'link',\n                    value: ramTestRun.name,\n                    url: editorLink,\n                    unclickable: true,\n                },\n                {\n                    type: 'content',\n                    contentModel: {\n                        tooltipData: ramTestRun.labels ? ramTestRun.labels.map(label =&gt; label.name).join(', ') : '',\n                        columnContent: ramTestRun.labels ? `${ramTestRun.labels.length} Label(s)` : 'No Labels',\n                    },\n                    value: this.testRunLabels,\n                    unclickable: true,\n                },\n                {\n                    type: 'content',\n                    contentModel: {\n                        selectedItem: this.testRunsStatuses.find((listItem: UxDropdownListItem) =&gt; {\n                            return listItem.value === ramTestRun.testingStatus;\n                        }),\n                        listItems: this.testRunsStatuses,\n                        testRunId: ramTestRun.uuid,\n                    },\n                    value: this.testRunStatusesDropdown,\n                    unclickable: true,\n                },\n                {\n                    type: 'content',\n                    contentModel: {\n                        selectedItem: this.failureReasons.find(\n                            failureReason =&gt; failureReason.id === ramTestRun.failureReasonId\n                        ),\n                        listItems: this.failureReasons,\n                        testRunId: ramTestRun.uuid,\n                    },\n                    value: this.testRunFailureReasonDropdown,\n                    unclickable: true,\n                },\n                {\n                    type: 'link',\n                    value: ramTestRun.jiraTicket,\n                    url: jiraSystemUrl ? `${jiraSystemUrl}/browse/${ramTestRun.jiraTicket}` : '',\n                    unclickable: true,\n                },\n                {\n                    type: 'link',\n                    value: ramTestRun.testRunJiraTicket,\n                    url: jiraSystemUrl ? `${jiraSystemUrl}/browse/${ramTestRun.testRunJiraTicket}` : '',\n                    unclickable: true,\n                },\n                {\n                    type: 'content',\n                    contentModel: {\n                        comment: ramTestRun.comment ? ramTestRun.comment.html : '',\n                        jiraSystemUrl: jiraSystemUrl,\n                        testRunId: ramTestRun.uuid,\n                    },\n                    value: this.testCaseComment,\n                    unclickable: true,\n                },\n            ],\n        };\n    }\n\n    private getFiltersRequestModel(): SearchTestRunsRequestFilters {\n        const request: SearchTestRunsRequestFilters = { executionRequestId: this.executionRequestId };\n\n        Array.from(this._tableFilteringParams.entries())\n            .filter(([, filter]) =&gt; filter.applied)\n            .forEach(([columnName, filter]) =&gt; {\n                switch (columnName) {\n                    case RamAnalyzedSummaryTestCasesColumnName.TEST_CASE:\n                        request.testCaseName = (&lt;TextFilterModel&gt;filter).value;\n                        break;\n                    case RamAnalyzedSummaryTestCasesColumnName.LABEL:\n                        const selectedLabelsNames = (&lt;ReferenceFilterModel&gt;filter).values\n                            .filter(({ customData }: { customData?: { existed: boolean } }) =&gt; customData?.existed)\n                            .map(({ caption }: { caption: string }) =&gt; caption);\n\n                        const searchTexts = (&lt;ReferenceFilterModel&gt;filter).values\n                            .filter(({ customData }: { customData?: { existed: boolean } }) =&gt; !customData?.existed)\n                            .map(({ caption }: { caption: string }) =&gt; caption);\n\n                        if (selectedLabelsNames.length) {\n                            request.labelNames = selectedLabelsNames;\n                        }\n\n                        if (searchTexts.length) {\n                            request.labelNameContains = searchTexts;\n                        }\n                        break;\n                    case RamAnalyzedSummaryTestCasesColumnName.STATUS:\n                        request.inTestingStatuses = (&lt;CheckboxFilterModel&gt;filter).value.map(\n                            ({ id }) =&gt; &lt;RamTestingStatuses&gt;id\n                        );\n                        break;\n                    case RamAnalyzedSummaryTestCasesColumnName.FAILURE_REASON:\n                        request.failureReasons = (&lt;ReferenceFilterModel&gt;filter).values.map(({ id }) =&gt; id);\n                        break;\n                }\n            });\n\n        return request;\n    }\n\n    private updateFilterIcons(): void {\n        requestAnimationFrame(() =&gt; {\n            const filterElements = (&lt;HTMLElement&gt;this.uxTable.elementRef.nativeElement).querySelectorAll(\n                '.ux-table__filter'\n            );\n\n            this._tableModel.header.rows[0].columns.forEach((column, i) =&gt; {\n                if (\n                    this._tableFilteringParams.get(column.value) &amp;&amp;\n                    this._tableFilteringParams.get(column.value).applied\n                ) {\n                    filterElements[i - 1].classList.add('_filtered');\n                }\n            });\n        });\n    }\n</code></pre>\n"},{"tags":["java","linked-list"],"comments":[{"owner":{"account_id":3983019,"reputation":513,"user_id":3284482,"display_name":"Mauricio"},"score":4,"creation_date":1693787296,"post_id":77034557,"comment_id":135802556,"body_markdown":"Take a look at &quot;Java Generics&quot;: https://www.baeldung.com/java-generics","body":"Take a look at &quot;Java Generics&quot;: <a href=\"https://www.baeldung.com/java-generics\" rel=\"nofollow noreferrer\">baeldung.com/java-generics</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1693788370,"post_id":77034557,"comment_id":135802632,"body_markdown":"You won&#39;t be able to use generics to create a linked list of `int`. You could, however, create a linked list of [`Integer`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html) using generics. You can use [Autoboxing and unboxing](https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html) of primitives.","body":"You won&#39;t be able to use generics to create a linked list of <code>int</code>. You could, however, create a linked list of <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html\" rel=\"nofollow noreferrer\"><code>Integer</code></a> using generics. You can use <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"nofollow noreferrer\">Autoboxing and unboxing</a> of primitives."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1693789048,"post_id":77034557,"comment_id":135802665,"body_markdown":"@OldDogProgrammer Once Valhalla gets here, that will finally change. I&#39;m hoping we can reach that point in the next 3-4 years.","body":"@OldDogProgrammer Once Valhalla gets here, that will finally change. I&#39;m hoping we can reach that point in the next 3-4 years."},{"owner":{"account_id":25109400,"reputation":3,"user_id":18959232,"display_name":"d1zyz"},"score":2,"creation_date":1693789467,"post_id":77034557,"comment_id":135802691,"body_markdown":"@Mauricio this link has opened an entire concept I did not know existed lol. Thank you","body":"@Mauricio this link has opened an entire concept I did not know existed lol. Thank you"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1693791017,"post_id":77034557,"comment_id":135802779,"body_markdown":"@d1zyz Java is a powerful language. Keep digging.","body":"@d1zyz Java is a powerful language. Keep digging."}],"answers":[{"tags":[],"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693843786,"creation_date":1693790611,"answer_id":77034685,"question_id":77034557,"body_markdown":"As I find the baeldung article nod sufficient enough for beginners, I quickly re-wrote your code to support generics.\r\n\r\nStep 1: Make the inner workings generic, in this case your Node class:\r\n-\r\nIn simple terms, instead of giving Node a fixed content like `BufferedImage`, we introduce our own type parameter. Usually that is simply called `&lt;T&gt;`, but here I go with `&lt;MyGenericType&gt;` to show that it can be handled like any other type.\r\n\r\nThe little downside is that we have to explicitly type `Node&lt;MyGenericType&gt;` wherever we use it, so this makes the code a bit longer.\r\n\r\n\r\n\r\n    package stackoverflow.linkedlist;\r\n    \r\n    public class Node&lt;MyGenericType&gt; {\r\n    \tprivate MyGenericType\t\tdata;\r\n    \tprivate Node&lt;MyGenericType&gt;\tlink;\r\n    \r\n    \tpublic Node&lt;MyGenericType&gt; getLink() {\r\n    \t\treturn link;\r\n    \t}\r\n    \r\n    \tpublic void setLink(final Node&lt;MyGenericType&gt; link) {\r\n    \t\tthis.link = link;\r\n    \t}\r\n    \r\n    \tpublic MyGenericType getData() {\r\n    \t\treturn data;\r\n    \t}\r\n    \r\n    \tpublic void setData(final MyGenericType data) {\r\n    \t\tthis.data = data;\r\n    \t}\r\n    \r\n    }\r\n\r\nStep 2: Make the main class generic, your LinkedList:\r\n-\r\nSame here, introduce generics\r\n\r\n    package stackoverflow.linkedlist;\r\n    \r\n    public class LinkedList&lt;MyGenericType&gt; {\r\n    \r\n    \tprivate Node&lt;MyGenericType&gt; root;\r\n    \tpublic Node&lt;MyGenericType&gt; getRoot() {\r\n    \t\treturn root;\r\n    \t}\r\n    \r\n    \tpublic void add(final MyGenericType data) {\r\n    \t\tif (root == null) {\r\n    \t\t\troot = new Node&lt;&gt;();\r\n    \t\t\troot.setData(data);\r\n    \t\t} else {\r\n    \t\t\tNode&lt;MyGenericType&gt; tmp = root;\r\n    \t\t\twhile (tmp.getLink() != null) {\r\n    \t\t\t\ttmp = tmp.getLink();\r\n    \t\t\t}\r\n    \t\t\tfinal Node&lt;MyGenericType&gt; n = new Node&lt;&gt;();\r\n    \t\t\tn.setData(data);\r\n    \t\t\ttmp.setLink(n);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic int size() {\r\n    \t\tif (root == null) {\r\n    \t\t\treturn 0;\r\n    \t\t}\r\n    \t\tint count = 0;\r\n    \t\tNode&lt;MyGenericType&gt; tmp = root;\r\n    \t\twhile (tmp != null) {\r\n    \t\t\tcount++;\r\n    \t\t\ttmp = tmp.getLink();\r\n    \t\t}\r\n    \t\treturn count;\r\n    \t}\r\n    \r\n    \tpublic MyGenericType get(final int pos) {\r\n    \t\tif (pos &lt; 0 || pos &gt;= size()) {\r\n    \t\t\tthrow new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\r\n    \t\t}\r\n    \r\n    \t\tNode&lt;MyGenericType&gt; tmp = root;\r\n    \t\tfor (int i = 0; i &lt; pos; i++) {\r\n    \t\t\ttmp = tmp.getLink();\r\n    \t\t}\r\n    \t\treturn tmp.getData();\r\n    \t}\r\n    \r\n    \tpublic void set(final int pos, final MyGenericType data) {\r\n    \t\tif (pos &lt; 0 || pos &gt;= size()) {\r\n    \t\t\tthrow new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\r\n    \t\t}\r\n    \t\tNode&lt;MyGenericType&gt; tmp = root;\r\n    \t\tfor (int i = 0; i &lt; pos; i++) {\r\n    \t\t\ttmp = tmp.getLink();\r\n    \t\t}\r\n    \t\ttmp.setData(data);\r\n    \t}\r\n    \r\n    \t//DELETES LAST DATA\r\n    \tpublic void delete() {\r\n    \t\tif (root != null) {\r\n    \t\t\tNode&lt;MyGenericType&gt; tmp = root;\r\n    \t\t\tfor (int i = 0; i &lt; size() - 2; i++) {\r\n    \t\t\t\ttmp = tmp.getLink();\r\n    \t\t\t}\r\n    \t\t\ttmp.setLink(null);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nStep 3: Showcase some examples\r\n-\r\nHere I show you how to use the list. As you can see, we now have to define/introduce the &#39;concept&#39; (aka Type) of BufferedImage from the outside, when we tell our list what type it should handle: `LinkedList&lt;BufferedImage&gt; imageList = new LinkedList&lt;&gt;();`\r\n\r\n    package stackoverflow.linkedlist;\r\n    \r\n    import java.awt.image.BufferedImage;\r\n    \r\n    \r\n    public class Usage {\r\n    \r\n    \r\n    \r\n    \tpublic static void main(final String[] args) {\r\n    \t\tfinal LinkedList&lt;BufferedImage&gt; imageList = new LinkedList&lt;&gt;();\r\n    \t\tfinal BufferedImage bi1 = new BufferedImage(640, 480, BufferedImage.TYPE_INT_ARGB);\r\n    \t\tfinal BufferedImage bi2 = new BufferedImage(640, 480, BufferedImage.TYPE_INT_ARGB);\r\n    \t\timageList.add(bi1);\r\n    \t\timageList.add(bi2);\r\n    \t\tSystem.out.println(&quot;Size of image list is now: &quot; + imageList.size());\r\n    \r\n    \r\n    \r\n    \t\tfinal LinkedList&lt;Integer&gt; intList = new LinkedList&lt;&gt;();\r\n    \t\tintList.add(Integer.valueOf(667));\r\n    \t\tintList.add(Integer.valueOf(668));\r\n    \t\tintList.add(Integer.valueOf(669));\r\n    \t\tSystem.out.println(&quot;Size of Integer is now: &quot; + intList.size());\r\n    \r\n    \r\n    \r\n    \t\tfinal LinkedList&lt;DemoCombo&gt; mixedList = new LinkedList&lt;&gt;();\r\n    \t\tmixedList.add(new DemoCombo(bi1, 667));\r\n    \t\tmixedList.add(new DemoCombo(bi2, 668));\r\n    \t\tSystem.out.println(&quot;Size of mixed list is now: &quot; + mixedList.size());\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tstatic private class DemoCombo {\r\n    \t\tpublic final BufferedImage\timage;\r\n    \t\tpublic final int\t\t\tvalue;\r\n    \t\tpublic DemoCombo(final BufferedImage pImage, final int pValue) {\r\n    \t\t\timage = pImage;\r\n    \t\t\tvalue = pValue;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    }\r\n\r\nI also included the DemoCombo class, because I was unsure why you wanted to have a list of BufferedImage and one of int.\r\nNormally, if you have data that is related, like BufferedImage has a direct relation to the int, you should not have 2 different lists to store them in. In this case, it&#39;s a lot better to write a simple wrapper class, DemoCombo, so all data that belongs to each other is always together, and you do not have the pitfalls of having to manage 2 lists independently.","title":"Efficient way to store different data types","body":"<p>As I find the baeldung article nod sufficient enough for beginners, I quickly re-wrote your code to support generics.</p>\n<h2>Step 1: Make the inner workings generic, in this case your Node class:</h2>\n<p>In simple terms, instead of giving Node a fixed content like <code>BufferedImage</code>, we introduce our own type parameter. Usually that is simply called <code>&lt;T&gt;</code>, but here I go with <code>&lt;MyGenericType&gt;</code> to show that it can be handled like any other type.</p>\n<p>The little downside is that we have to explicitly type <code>Node&lt;MyGenericType&gt;</code> wherever we use it, so this makes the code a bit longer.</p>\n<pre><code>package stackoverflow.linkedlist;\n\npublic class Node&lt;MyGenericType&gt; {\n    private MyGenericType       data;\n    private Node&lt;MyGenericType&gt; link;\n\n    public Node&lt;MyGenericType&gt; getLink() {\n        return link;\n    }\n\n    public void setLink(final Node&lt;MyGenericType&gt; link) {\n        this.link = link;\n    }\n\n    public MyGenericType getData() {\n        return data;\n    }\n\n    public void setData(final MyGenericType data) {\n        this.data = data;\n    }\n\n}\n</code></pre>\n<h2>Step 2: Make the main class generic, your LinkedList:</h2>\n<p>Same here, introduce generics</p>\n<pre><code>package stackoverflow.linkedlist;\n\npublic class LinkedList&lt;MyGenericType&gt; {\n\n    private Node&lt;MyGenericType&gt; root;\n    public Node&lt;MyGenericType&gt; getRoot() {\n        return root;\n    }\n\n    public void add(final MyGenericType data) {\n        if (root == null) {\n            root = new Node&lt;&gt;();\n            root.setData(data);\n        } else {\n            Node&lt;MyGenericType&gt; tmp = root;\n            while (tmp.getLink() != null) {\n                tmp = tmp.getLink();\n            }\n            final Node&lt;MyGenericType&gt; n = new Node&lt;&gt;();\n            n.setData(data);\n            tmp.setLink(n);\n        }\n    }\n\n    public int size() {\n        if (root == null) {\n            return 0;\n        }\n        int count = 0;\n        Node&lt;MyGenericType&gt; tmp = root;\n        while (tmp != null) {\n            count++;\n            tmp = tmp.getLink();\n        }\n        return count;\n    }\n\n    public MyGenericType get(final int pos) {\n        if (pos &lt; 0 || pos &gt;= size()) {\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\n        }\n\n        Node&lt;MyGenericType&gt; tmp = root;\n        for (int i = 0; i &lt; pos; i++) {\n            tmp = tmp.getLink();\n        }\n        return tmp.getData();\n    }\n\n    public void set(final int pos, final MyGenericType data) {\n        if (pos &lt; 0 || pos &gt;= size()) {\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\n        }\n        Node&lt;MyGenericType&gt; tmp = root;\n        for (int i = 0; i &lt; pos; i++) {\n            tmp = tmp.getLink();\n        }\n        tmp.setData(data);\n    }\n\n    //DELETES LAST DATA\n    public void delete() {\n        if (root != null) {\n            Node&lt;MyGenericType&gt; tmp = root;\n            for (int i = 0; i &lt; size() - 2; i++) {\n                tmp = tmp.getLink();\n            }\n            tmp.setLink(null);\n        }\n    }\n\n}\n</code></pre>\n<h2>Step 3: Showcase some examples</h2>\n<p>Here I show you how to use the list. As you can see, we now have to define/introduce the 'concept' (aka Type) of BufferedImage from the outside, when we tell our list what type it should handle: <code>LinkedList&lt;BufferedImage&gt; imageList = new LinkedList&lt;&gt;();</code></p>\n<pre><code>package stackoverflow.linkedlist;\n\nimport java.awt.image.BufferedImage;\n\n\npublic class Usage {\n\n\n\n    public static void main(final String[] args) {\n        final LinkedList&lt;BufferedImage&gt; imageList = new LinkedList&lt;&gt;();\n        final BufferedImage bi1 = new BufferedImage(640, 480, BufferedImage.TYPE_INT_ARGB);\n        final BufferedImage bi2 = new BufferedImage(640, 480, BufferedImage.TYPE_INT_ARGB);\n        imageList.add(bi1);\n        imageList.add(bi2);\n        System.out.println(&quot;Size of image list is now: &quot; + imageList.size());\n\n\n\n        final LinkedList&lt;Integer&gt; intList = new LinkedList&lt;&gt;();\n        intList.add(Integer.valueOf(667));\n        intList.add(Integer.valueOf(668));\n        intList.add(Integer.valueOf(669));\n        System.out.println(&quot;Size of Integer is now: &quot; + intList.size());\n\n\n\n        final LinkedList&lt;DemoCombo&gt; mixedList = new LinkedList&lt;&gt;();\n        mixedList.add(new DemoCombo(bi1, 667));\n        mixedList.add(new DemoCombo(bi2, 668));\n        System.out.println(&quot;Size of mixed list is now: &quot; + mixedList.size());\n    }\n\n\n\n    static private class DemoCombo {\n        public final BufferedImage  image;\n        public final int            value;\n        public DemoCombo(final BufferedImage pImage, final int pValue) {\n            image = pImage;\n            value = pValue;\n        }\n    }\n\n\n\n}\n</code></pre>\n<p>I also included the DemoCombo class, because I was unsure why you wanted to have a list of BufferedImage and one of int.\nNormally, if you have data that is related, like BufferedImage has a direct relation to the int, you should not have 2 different lists to store them in. In this case, it's a lot better to write a simple wrapper class, DemoCombo, so all data that belongs to each other is always together, and you do not have the pitfalls of having to manage 2 lists independently.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693794286,"creation_date":1693794286,"answer_id":77034792,"question_id":77034557,"body_markdown":"&gt; _&quot;... I can only create lists with a single data type, in this instance being BufferedImages, but I want to be able to create one LinkedList for a BufferedImage and another for an int. Is there a better way to do this than making separate Node and LinkedList classes for each data type or overloading each class? ...&quot;_\r\n\r\nYes, you can use a _generic type_.\r\n\r\n_[Lesson: Generics (Updated) (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language)](https://docs.oracle.com/javase/tutorial/java/generics/)_.\r\n\r\n```java\r\nLinkedList&lt;BufferedImage&gt; a = new LinkedList&lt;&gt;();\r\nLinkedList&lt;Integer&gt; b = new LinkedList&lt;&gt;();\r\n```\r\n\r\n```java\r\n//Node class:\r\npublic class Node&lt;T&gt; {\r\n    private T data;\r\n    private Node&lt;T&gt; link;\r\n\r\n    public Node&lt;T&gt; getLink() {\r\n        return link;\r\n    }\r\n\r\n    public void setLink(Node&lt;T&gt; link){\r\n        this.link = link;\r\n    }\r\n\r\n    public T getData(){\r\n        return data;\r\n    }\r\n\r\n    public void setData(T data) {\r\n        this.data = data;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\n//LinkedList class:\r\npublic class LinkedList&lt;T&gt; {\r\n\r\n    private Node&lt;T&gt; root;\r\n    public Node&lt;T&gt; getRoot(){\r\n        return root;\r\n    }\r\n\r\n    public void add(T data) {\r\n        if (root == null) {\r\n            root = new Node&lt;T&gt;();\r\n            root.setData(data);\r\n        } else {\r\n            Node&lt;T&gt; tmp = root;\r\n            while (tmp.getLink() != null) {\r\n                tmp = tmp.getLink();\r\n            }\r\n            Node&lt;T&gt; n = new Node&lt;T&gt;();\r\n            n.setData(data);\r\n            tmp.setLink(n);\r\n        }\r\n    }\r\n\r\n    public int size() {\r\n        if (root == null) {\r\n            return 0;\r\n        }\r\n        int count = 0;\r\n        Node&lt;T&gt; tmp = root;\r\n        while (tmp != null) {\r\n            count++;\r\n            tmp = tmp.getLink();\r\n        }\r\n        return count;\r\n    }\r\n\r\n    public T get(int pos) {\r\n        if (pos &lt; 0 || pos &gt;= size()) {\r\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\r\n        }\r\n\r\n        Node&lt;T&gt; tmp = root;\r\n        for (int i = 0; i &lt; pos; i++) {\r\n            tmp = tmp.getLink();\r\n        }\r\n        return tmp.getData();\r\n    }\r\n\r\n    public void set(int pos, T data) {\r\n        if (pos &lt; 0 || pos &gt;= size()) {\r\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\r\n        }\r\n        Node&lt;T&gt; tmp = root;\r\n        for (int i = 0; i &lt; pos; i++) {\r\n            tmp = tmp.getLink();\r\n        }\r\n        tmp.setData(data);\r\n    }\r\n\r\n    //DELETES LAST DATA\r\n    public void delete(){\r\n        if(root != null){\r\n            Node&lt;T&gt; tmp = root;\r\n            for(int i=0; i &lt; size()-2; i++){\r\n                tmp = tmp.getLink();\r\n            }\r\n            tmp.setLink(null);\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"Efficient way to store different data types","body":"<blockquote>\n<p><em>&quot;... I can only create lists with a single data type, in this instance being BufferedImages, but I want to be able to create one LinkedList for a BufferedImage and another for an int. Is there a better way to do this than making separate Node and LinkedList classes for each data type or overloading each class? ...&quot;</em></p>\n</blockquote>\n<p>Yes, you can use a <em>generic type</em>.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/\" rel=\"nofollow noreferrer\">Lesson: Generics (Updated) (The Java™ Tutorials &gt; Learning the Java Language)</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LinkedList&lt;BufferedImage&gt; a = new LinkedList&lt;&gt;();\nLinkedList&lt;Integer&gt; b = new LinkedList&lt;&gt;();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>//Node class:\npublic class Node&lt;T&gt; {\n    private T data;\n    private Node&lt;T&gt; link;\n\n    public Node&lt;T&gt; getLink() {\n        return link;\n    }\n\n    public void setLink(Node&lt;T&gt; link){\n        this.link = link;\n    }\n\n    public T getData(){\n        return data;\n    }\n\n    public void setData(T data) {\n        this.data = data;\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>//LinkedList class:\npublic class LinkedList&lt;T&gt; {\n\n    private Node&lt;T&gt; root;\n    public Node&lt;T&gt; getRoot(){\n        return root;\n    }\n\n    public void add(T data) {\n        if (root == null) {\n            root = new Node&lt;T&gt;();\n            root.setData(data);\n        } else {\n            Node&lt;T&gt; tmp = root;\n            while (tmp.getLink() != null) {\n                tmp = tmp.getLink();\n            }\n            Node&lt;T&gt; n = new Node&lt;T&gt;();\n            n.setData(data);\n            tmp.setLink(n);\n        }\n    }\n\n    public int size() {\n        if (root == null) {\n            return 0;\n        }\n        int count = 0;\n        Node&lt;T&gt; tmp = root;\n        while (tmp != null) {\n            count++;\n            tmp = tmp.getLink();\n        }\n        return count;\n    }\n\n    public T get(int pos) {\n        if (pos &lt; 0 || pos &gt;= size()) {\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\n        }\n\n        Node&lt;T&gt; tmp = root;\n        for (int i = 0; i &lt; pos; i++) {\n            tmp = tmp.getLink();\n        }\n        return tmp.getData();\n    }\n\n    public void set(int pos, T data) {\n        if (pos &lt; 0 || pos &gt;= size()) {\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\n        }\n        Node&lt;T&gt; tmp = root;\n        for (int i = 0; i &lt; pos; i++) {\n            tmp = tmp.getLink();\n        }\n        tmp.setData(data);\n    }\n\n    //DELETES LAST DATA\n    public void delete(){\n        if(root != null){\n            Node&lt;T&gt; tmp = root;\n            for(int i=0; i &lt; size()-2; i++){\n                tmp = tmp.getLink();\n            }\n            tmp.setLink(null);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":25109400,"reputation":3,"user_id":18959232,"display_name":"d1zyz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77034685,"answer_count":2,"score":0,"last_activity_date":1693843786,"creation_date":1693786669,"question_id":77034557,"body_markdown":"This is more of a conceptual question about how to most efficiently approach this issue, I&#39;m utilizing LinkedLists created in a form I recently learned in class. I&#39;ll paste in both the node class I created as well as the LinkedList class itself. As I have the code set up now, I can only create lists with a single data type, in this instance being BufferedImages, but I want to be able to create one LinkedList for a BufferedImage and another for an int. Is there a better way to do this than making separate Node and LinkedList classes for each data type or overloading each class?\r\n\r\nI want to be able to efficiently have two LinkedList objects storing different data types\r\n\r\n\r\n\r\n\r\n\r\n```\r\n//Node class:\r\nimport java.awt.image.BufferedImage;\r\n\r\npublic class Node {\r\n    private BufferedImage data;\r\n    private Node link;\r\n\r\n    public Node getLink() {\r\n        return link;\r\n    }\r\n\r\n    public void setLink(Node link){\r\n        this.link = link;\r\n    }\r\n\r\n    public BufferedImage getData(){\r\n        return data;\r\n    }\r\n\r\n    public void setData(BufferedImage data) {\r\n        this.data = data;\r\n    }\r\n\r\n}\r\n\r\n//LinkedList class:\r\nimport java.awt.image.BufferedImage;\r\n\r\npublic class LinkedList {\r\n\r\n    private Node root;\r\n    public Node getRoot(){\r\n        return root;\r\n    }\r\n\r\n    public void add(BufferedImage data) {\r\n        if (root == null) {\r\n            root = new Node();\r\n            root.setData(data);\r\n        } else {\r\n            Node tmp = root;\r\n            while (tmp.getLink() != null) {\r\n                tmp = tmp.getLink();\r\n            }\r\n            Node n = new Node();\r\n            n.setData(data);\r\n            tmp.setLink(n);\r\n        }\r\n    }\r\n\r\n    public int size() {\r\n        if (root == null) {\r\n            return 0;\r\n        }\r\n        int count = 0;\r\n        Node tmp = root;\r\n        while (tmp != null) {\r\n            count++;\r\n            tmp = tmp.getLink();\r\n        }\r\n        return count;\r\n    }\r\n\r\n    public BufferedImage get(int pos) {\r\n        if (pos &lt; 0 || pos &gt;= size()) {\r\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\r\n        }\r\n\r\n        Node tmp = root;\r\n        for (int i = 0; i &lt; pos; i++) {\r\n            tmp = tmp.getLink();\r\n        }\r\n        return tmp.getData();\r\n    }\r\n\r\n    public void set(int pos, BufferedImage data) {\r\n        if (pos &lt; 0 || pos &gt;= size()) {\r\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\r\n        }\r\n        Node tmp = root;\r\n        for (int i = 0; i &lt; pos; i++) {\r\n            tmp = tmp.getLink();\r\n        }\r\n        tmp.setData(data);\r\n    }\r\n\r\n    //DELETES LAST DATA\r\n    public void delete(){\r\n        if(root != null){\r\n            Node tmp = root;\r\n            for(int i=0; i &lt; size()-2; i++){\r\n                tmp = tmp.getLink();\r\n            }\r\n            tmp.setLink(null);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n","title":"Efficient way to store different data types","body":"<p>This is more of a conceptual question about how to most efficiently approach this issue, I'm utilizing LinkedLists created in a form I recently learned in class. I'll paste in both the node class I created as well as the LinkedList class itself. As I have the code set up now, I can only create lists with a single data type, in this instance being BufferedImages, but I want to be able to create one LinkedList for a BufferedImage and another for an int. Is there a better way to do this than making separate Node and LinkedList classes for each data type or overloading each class?</p>\n<p>I want to be able to efficiently have two LinkedList objects storing different data types</p>\n<pre><code>//Node class:\nimport java.awt.image.BufferedImage;\n\npublic class Node {\n    private BufferedImage data;\n    private Node link;\n\n    public Node getLink() {\n        return link;\n    }\n\n    public void setLink(Node link){\n        this.link = link;\n    }\n\n    public BufferedImage getData(){\n        return data;\n    }\n\n    public void setData(BufferedImage data) {\n        this.data = data;\n    }\n\n}\n\n//LinkedList class:\nimport java.awt.image.BufferedImage;\n\npublic class LinkedList {\n\n    private Node root;\n    public Node getRoot(){\n        return root;\n    }\n\n    public void add(BufferedImage data) {\n        if (root == null) {\n            root = new Node();\n            root.setData(data);\n        } else {\n            Node tmp = root;\n            while (tmp.getLink() != null) {\n                tmp = tmp.getLink();\n            }\n            Node n = new Node();\n            n.setData(data);\n            tmp.setLink(n);\n        }\n    }\n\n    public int size() {\n        if (root == null) {\n            return 0;\n        }\n        int count = 0;\n        Node tmp = root;\n        while (tmp != null) {\n            count++;\n            tmp = tmp.getLink();\n        }\n        return count;\n    }\n\n    public BufferedImage get(int pos) {\n        if (pos &lt; 0 || pos &gt;= size()) {\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\n        }\n\n        Node tmp = root;\n        for (int i = 0; i &lt; pos; i++) {\n            tmp = tmp.getLink();\n        }\n        return tmp.getData();\n    }\n\n    public void set(int pos, BufferedImage data) {\n        if (pos &lt; 0 || pos &gt;= size()) {\n            throw new IndexOutOfBoundsException(&quot;The index &quot; + pos + &quot; is out of bounds.&quot;);\n        }\n        Node tmp = root;\n        for (int i = 0; i &lt; pos; i++) {\n            tmp = tmp.getLink();\n        }\n        tmp.setData(data);\n    }\n\n    //DELETES LAST DATA\n    public void delete(){\n        if(root != null){\n            Node tmp = root;\n            for(int i=0; i &lt; size()-2; i++){\n                tmp = tmp.getLink();\n            }\n            tmp.setLink(null);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","java-6"],"comments":[{"owner":{"account_id":203758,"reputation":14587,"user_id":451600,"accept_rate":91,"display_name":"Captain Giraffe"},"score":2,"creation_date":1315482100,"post_id":7347442,"comment_id":8863309,"body_markdown":"If it is printing null you have a problem before this code is executed; hidden in the &quot;from source ...&quot;","body":"If it is printing null you have a problem before this code is executed; hidden in the &quot;from source ...&quot;"},{"owner":{"account_id":339468,"reputation":9236,"user_id":668970,"accept_rate":75,"display_name":"developer"},"score":0,"creation_date":1315482420,"post_id":7347442,"comment_id":8863382,"body_markdown":"what the error you are getting, to me its working fine. Also give more details, Object obj2 = from some source . . ;\nfor above obj2 what you are assiging","body":"what the error you are getting, to me its working fine. Also give more details, Object obj2 = from some source . . ; for above obj2 what you are assiging"},{"owner":{"account_id":339468,"reputation":9236,"user_id":668970,"accept_rate":75,"display_name":"developer"},"score":0,"creation_date":1315482466,"post_id":7347442,"comment_id":8863391,"body_markdown":"below is the code i tried, its working fine.ArrayList al11 = new ArrayList();\n\t\tal11.add(&quot;a&quot;);\n\t\tal11.add(&quot;b&quot;);\n\t\tObject obj2 =al11;\n        ArrayList al1 = new ArrayList();\n        al1 = (ArrayList) obj2;\n        System.out.println(&quot;List2 Value: &quot;+al1);","body":"below is the code i tried, its working fine.ArrayList al11 = new ArrayList(); \t\tal11.add(&quot;a&quot;); \t\tal11.add(&quot;b&quot;); \t\tObject obj2 =al11;         ArrayList al1 = new ArrayList();         al1 = (ArrayList) obj2;         System.out.println(&quot;List2 Value: &quot;+al1);"},{"owner":{"account_id":150901,"reputation":1675,"user_id":364414,"accept_rate":79,"display_name":"sjain"},"score":0,"creation_date":1315483486,"post_id":7347442,"comment_id":8863678,"body_markdown":"@Damodar Your second comment worked fine for me too. But my hidden method returns an String in form of Object, because of that i am getting following exception: Exception in thread &quot;main&quot; java.lang.ClassCastException: java.lang.String cannot be cast to java.util.ArrayList","body":"@Damodar Your second comment worked fine for me too. But my hidden method returns an String in form of Object, because of that i am getting following exception: Exception in thread &quot;main&quot; java.lang.ClassCastException: java.lang.String cannot be cast to java.util.ArrayList"},{"owner":{"account_id":11502933,"reputation":5909,"user_id":8430155,"display_name":"Harshal Parekh"},"score":0,"creation_date":1633454123,"post_id":7347442,"comment_id":122762332,"body_markdown":"[Answer updated for java 8+](https://stackoverflow.com/a/69454694/8430155)","body":"<a href=\"https://stackoverflow.com/a/69454694/8430155\">Answer updated for java 8+</a>"}],"answers":[{"tags":[],"owner":{"account_id":95151,"reputation":14008,"user_id":259310,"accept_rate":25,"display_name":"Kilian Foth"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1315482179,"creation_date":1315482179,"answer_id":7347487,"question_id":7347442,"body_markdown":"This only results in `null` if `obj2` was already `null` before the cast, so your problem is earlier than you think. (Also, you need not construct a new ArrayList to initialize `al1` if you&#39;re going to assign to it immediately. Just say `ArrayList al1 = (ArrayList) obj2;`.)","title":"How to convert java.lang.Object to ArrayList?","body":"<p>This only results in <code>null</code> if <code>obj2</code> was already <code>null</code> before the cast, so your problem is earlier than you think. (Also, you need not construct a new ArrayList to initialize <code>al1</code> if you're going to assign to it immediately. Just say <code>ArrayList al1 = (ArrayList) obj2;</code>.)</p>\n"},{"tags":[],"owner":{"account_id":1382722,"reputation":1111,"user_id":1315392,"accept_rate":50,"display_name":"vinay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404899785,"creation_date":1404899785,"answer_id":24650561,"question_id":7347442,"body_markdown":"Rather Cast It to an Object Array.\r\n\r\n    Object obj2 = from some source . . ;\r\n    Object[] objects=(Object[])obj2;","title":"How to convert java.lang.Object to ArrayList?","body":"<p>Rather Cast It to an Object Array.</p>\n\n<pre><code>Object obj2 = from some source . . ;\nObject[] objects=(Object[])obj2;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2510606,"reputation":73,"user_id":2183189,"display_name":"khadre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437560145,"creation_date":1437560145,"answer_id":31560260,"question_id":7347442,"body_markdown":"The conversion fails (*java.lang.ClassCastException: java.lang.String cannot be cast to java.util.ArrayList*) because you have surely some objects that are not ***ArrayList***. verify the types of your different objects.","title":"How to convert java.lang.Object to ArrayList?","body":"<p>The conversion fails (<em>java.lang.ClassCastException: java.lang.String cannot be cast to java.util.ArrayList</em>) because you have surely some objects that are not <strong><em>ArrayList</em></strong>. verify the types of your different objects.</p>\n"},{"tags":[],"owner":{"account_id":3335571,"reputation":3834,"user_id":2809294,"accept_rate":56,"display_name":"ARK"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1592320138,"creation_date":1501875020,"answer_id":45514210,"question_id":7347442,"body_markdown":"Converting from `java.lang.Object` directly to `ArrayList&lt;T&gt;` which has elements of T is not recommended as it can lead to casting Exceptions. The recommended way is to first convert to a primitive array of `T` and then use `Arrays.asList(T[])`\r\nOne of the ways how you get entity from a java `javax.ws.rs.core.Response` is as follows - \r\n```\r\n    T[] t_array = response.readEntity(object);\r\n    ArrayList&lt;T&gt; t_arraylist = Arrays.asList(t_array);\r\n```\r\nYou will still get *Unchecked cast* warnings.","title":"How to convert java.lang.Object to ArrayList?","body":"<p>Converting from <code>java.lang.Object</code> directly to <code>ArrayList&lt;T&gt;</code> which has elements of T is not recommended as it can lead to casting Exceptions. The recommended way is to first convert to a primitive array of <code>T</code> and then use <code>Arrays.asList(T[])</code>\nOne of the ways how you get entity from a java <code>javax.ws.rs.core.Response</code> is as follows - </p>\n\n<pre><code>    T[] t_array = response.readEntity(object);\n    ArrayList&lt;T&gt; t_arraylist = Arrays.asList(t_array);\n</code></pre>\n\n<p>You will still get <em>Unchecked cast</em> warnings.</p>\n"},{"tags":[],"owner":{"account_id":4539223,"reputation":1311,"user_id":3687575,"accept_rate":78,"display_name":"Lucas Pires"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1616179959,"creation_date":1539704709,"answer_id":52839327,"question_id":7347442,"body_markdown":"You can create a static util method that converts any collection to a Java **List**\r\n\r\n    public static List&lt;?&gt; convertObjectToList(Object obj) {\r\n        List&lt;?&gt; list = new ArrayList&lt;&gt;();\r\n        if (obj.getClass().isArray()) {\r\n            list = Arrays.asList((Object[])obj);\r\n        } else if (obj instanceof Collection) {\r\n            list = new ArrayList&lt;&gt;((Collection&lt;?&gt;)obj);\r\n        }\r\n        return list;\r\n    }\r\n\r\nyou can also mix the validation below:\r\n\r\n    public static boolean isCollection(Object obj) {\r\n      return obj.getClass().isArray() || obj instanceof Collection;\r\n    }","title":"How to convert java.lang.Object to ArrayList?","body":"<p>You can create a static util method that converts any collection to a Java <strong>List</strong></p>\n<pre><code>public static List&lt;?&gt; convertObjectToList(Object obj) {\n    List&lt;?&gt; list = new ArrayList&lt;&gt;();\n    if (obj.getClass().isArray()) {\n        list = Arrays.asList((Object[])obj);\n    } else if (obj instanceof Collection) {\n        list = new ArrayList&lt;&gt;((Collection&lt;?&gt;)obj);\n    }\n    return list;\n}\n</code></pre>\n<p>you can also mix the validation below:</p>\n<pre><code>public static boolean isCollection(Object obj) {\n  return obj.getClass().isArray() || obj instanceof Collection;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17984106,"reputation":193,"user_id":13069770,"display_name":"matt_frangakis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584442304,"creation_date":1584442304,"answer_id":60720851,"question_id":7347442,"body_markdown":"An interesting note: it appears that attempting to cast from an object to a list on the JavaFX Application thread always results in a ClassCastException.\r\n\r\nI had the same issue as you, and no answer helped. After playing around for a while, the only thing I could narrow it down to was the thread. Running the code to cast on any other thread other than the UI thread succeeds as expected, and as the other answers in this section suggest.\r\n\r\nThus, be careful that your source isn&#39;t running on the JavaFX application thread.","title":"How to convert java.lang.Object to ArrayList?","body":"<p>An interesting note: it appears that attempting to cast from an object to a list on the JavaFX Application thread always results in a ClassCastException.</p>\n\n<p>I had the same issue as you, and no answer helped. After playing around for a while, the only thing I could narrow it down to was the thread. Running the code to cast on any other thread other than the UI thread succeeds as expected, and as the other answers in this section suggest.</p>\n\n<p>Thus, be careful that your source isn't running on the JavaFX application thread.</p>\n"},{"tags":[],"owner":{"account_id":1197629,"reputation":875,"user_id":1169009,"display_name":"dimuthu"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1595397731,"creation_date":1595397376,"answer_id":63027801,"question_id":7347442,"body_markdown":"\n\r\n        Object object = new Object();\r\n\r\n        // First way\r\n        List objects1 = new ArrayList&lt;Object&gt;();\r\n        objects1.add(object);\r\n\r\n        // second way\r\n        List&lt;Object&gt; objects2 = Arrays.asList(object);\r\n\r\n        // Third way\r\n        List&lt;Object&gt; objects3 = Collections.singletonList(object);\r\n","title":"How to convert java.lang.Object to ArrayList?","body":"<pre><code>    Object object = new Object();\n\n    // First way\n    List objects1 = new ArrayList&lt;Object&gt;();\n    objects1.add(object);\n\n    // second way\n    List&lt;Object&gt; objects2 = Arrays.asList(object);\n\n    // Third way\n    List&lt;Object&gt; objects3 = Collections.singletonList(object);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19103689,"reputation":295,"user_id":13951359,"display_name":"Daham Akalanka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595432487,"creation_date":1595398695,"answer_id":63028054,"question_id":7347442,"body_markdown":"I hope this will be help you\r\n\r\n    import java.util.ArrayList; \r\n    public class Demo {\r\n\r\n     public static void main(String[] args) {\r\n        Object obj2 =null;\r\n        ArrayList al1 = (ArrayList) obj2;\r\n        al1 = (ArrayList) obj2;\r\n        System.out.println(&quot;List2 Value: &quot; + al1);\r\n        }\r\n     }\r\nobj2 Object is default null before you cast it to ArrayList. That&#39;s why print &#39;al1&#39; as null.","title":"How to convert java.lang.Object to ArrayList?","body":"<p>I hope this will be help you</p>\n<pre><code>import java.util.ArrayList; \npublic class Demo {\n\n public static void main(String[] args) {\n    Object obj2 =null;\n    ArrayList al1 = (ArrayList) obj2;\n    al1 = (ArrayList) obj2;\n    System.out.println(&quot;List2 Value: &quot; + al1);\n    }\n }\n</code></pre>\n<p>obj2 Object is default null before you cast it to ArrayList. That's why print 'al1' as null.</p>\n"},{"tags":[],"owner":{"account_id":22035053,"reputation":51,"user_id":16301715,"display_name":"Raghavendra Shruti Rao"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1627410931,"creation_date":1627410931,"answer_id":68550165,"question_id":7347442,"body_markdown":"You can also do something like this:\r\n\r\n  \r\n\r\n      new ObjectMapper().convertValue(sourceObject, new TypeReference&lt;List&lt;YourTargetClass&gt;&gt;() {});","title":"How to convert java.lang.Object to ArrayList?","body":"<p>You can also do something like this:</p>\n<pre><code>  new ObjectMapper().convertValue(sourceObject, new TypeReference&lt;List&lt;YourTargetClass&gt;&gt;() {});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11502933,"reputation":5909,"user_id":8430155,"display_name":"Harshal Parekh"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1657560869,"creation_date":1633454050,"answer_id":69454694,"question_id":7347442,"body_markdown":"#### Answer from 2021 (Java 8+)\r\n\r\nAssuming that your object is a valid List object and if you want it in a specific datatype, use [`Stream.of(object)`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#of-T-):\r\n\r\n    Object o = Arrays.asList(1, 2);\r\n    ((List&lt;Object&gt;) o).stream().map(String::valueOf).forEach(System.out::println);\r\n\r\nSimilarly, you can change the method in the map to convert to the datatype you need.\r\n\r\n----------\r\n\r\n**Note:** This will lead to `Type safety: Unchecked cast`. This happens because the cast is a runtime check and the type has been erased when you receive it from some source. You can use `@SuppressWarnings(&quot;unchecked&quot;)` and live with it.\r\n\r\n----------\r\n\r\nThis could be a good article on this topic: [Reified Generics for Java](http://gafter.blogspot.com/2006/11/reified-generics-for-java.html)","title":"How to convert java.lang.Object to ArrayList?","body":"<h4>Answer from 2021 (Java 8+)</h4>\n<p>Assuming that your object is a valid List object and if you want it in a specific datatype, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#of-T-\" rel=\"nofollow noreferrer\"><code>Stream.of(object)</code></a>:</p>\n<pre><code>Object o = Arrays.asList(1, 2);\n((List&lt;Object&gt;) o).stream().map(String::valueOf).forEach(System.out::println);\n</code></pre>\n<p>Similarly, you can change the method in the map to convert to the datatype you need.</p>\n<hr />\n<p><strong>Note:</strong> This will lead to <code>Type safety: Unchecked cast</code>. This happens because the cast is a runtime check and the type has been erased when you receive it from some source. You can use <code>@SuppressWarnings(&quot;unchecked&quot;)</code> and live with it.</p>\n<hr />\n<p>This could be a good article on this topic: <a href=\"http://gafter.blogspot.com/2006/11/reified-generics-for-java.html\" rel=\"nofollow noreferrer\">Reified Generics for Java</a></p>\n"},{"tags":[],"owner":{"account_id":7263023,"reputation":447,"user_id":5538923,"display_name":"marcor92"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659517393,"creation_date":1659517393,"answer_id":73219012,"question_id":7347442,"body_markdown":"To convert the object to an immutable list of strings, no matter if it is a String or a collection of String, I used the following method:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public static List&lt;String&gt; convertObjectToListOfStrings(Object obj) {\r\n        return obj == null ? null : (obj instanceof String ? List.of((String) obj)\r\n                : (obj.getClass().isArray() ? Arrays.asList((Object[])obj)\r\n                        : (obj instanceof Collection ? ((Collection&lt;?&gt;) obj) : List.of()))\r\n                .stream().map(String::valueOf).toList());\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nNote: This code was elaborated by combining two of the answers already posted: https://stackoverflow.com/a/52839327/5538923 and https://stackoverflow.com/a/69454694/5538923 .","title":"How to convert java.lang.Object to ArrayList?","body":"<p>To convert the object to an immutable list of strings, no matter if it is a String or a collection of String, I used the following method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;String&gt; convertObjectToListOfStrings(Object obj) {\n    return obj == null ? null : (obj instanceof String ? List.of((String) obj)\n            : (obj.getClass().isArray() ? Arrays.asList((Object[])obj)\n                    : (obj instanceof Collection ? ((Collection&lt;?&gt;) obj) : List.of()))\n            .stream().map(String::valueOf).toList());\n}\n</code></pre>\n<p>Note: This code was elaborated by combining two of the answers already posted: <a href=\"https://stackoverflow.com/a/52839327/5538923\">https://stackoverflow.com/a/52839327/5538923</a> and <a href=\"https://stackoverflow.com/a/69454694/5538923\">https://stackoverflow.com/a/69454694/5538923</a> .</p>\n"},{"tags":[],"owner":{"account_id":1744260,"reputation":14886,"user_id":1594823,"accept_rate":64,"display_name":"Saikat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693843504,"creation_date":1693843504,"answer_id":77039230,"question_id":7347442,"body_markdown":"Something simple like this should work:\r\n\r\n```java\r\nObject obj = new ArrayList&lt;&gt;(); // your object\r\n\r\nif (obj instanceof ArrayList&lt;?&gt; list) {\r\n  System.out.println(list.isEmpty()); // true\r\n} else {\r\n  System.out.println(&quot;Not a list!&quot;);\r\n}\r\n```","title":"How to convert java.lang.Object to ArrayList?","body":"<p>Something simple like this should work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object obj = new ArrayList&lt;&gt;(); // your object\n\nif (obj instanceof ArrayList&lt;?&gt; list) {\n  System.out.println(list.isEmpty()); // true\n} else {\n  System.out.println(&quot;Not a list!&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":150901,"reputation":1675,"user_id":364414,"accept_rate":79,"display_name":"sjain"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":269801,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"answer_count":12,"score":51,"last_activity_date":1693843504,"creation_date":1315481921,"question_id":7347442,"body_markdown":"I have a valid `ArrayList` object in the form of `java.lang.Object`. I have to again convert the `Object` to an `ArrayList`. I tried this:\r\n\r\n&lt;pre&gt;Object obj2 = from some source . . ;\r\nArrayList al1 = new ArrayList();\r\nal1 = (ArrayList) obj2;\r\nSystem.out.println(&quot;List2 Value: &quot;+al1);\r\n&lt;/pre&gt;\r\n\r\nBut it is printing `null`.\r\nHow can I do this? ","title":"How to convert java.lang.Object to ArrayList?","body":"<p>I have a valid <code>ArrayList</code> object in the form of <code>java.lang.Object</code>. I have to again convert the <code>Object</code> to an <code>ArrayList</code>. I tried this:</p>\n\n<pre>Object obj2 = from some source . . ;\nArrayList al1 = new ArrayList();\nal1 = (ArrayList) obj2;\nSystem.out.println(\"List2 Value: \"+al1);\n</pre>\n\n<p>But it is printing <code>null</code>.\nHow can I do this? </p>\n"},{"tags":["java","itext","pdfbox","adobe-sign","adobe-pdfservices"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1693349676,"post_id":77002400,"comment_id":135748472,"body_markdown":"When you say &quot;image&quot;, you appear to think only of *bitmap images*. But there also are other kinds of images, in particular *vector graphics images* which are very well suited to show signatures. What you found in that file are vector graphics instructions laying out a path and stroking it.","body":"When you say &quot;image&quot;, you appear to think only of <i>bitmap images</i>. But there also are other kinds of images, in particular <i>vector graphics images</i> which are very well suited to show signatures. What you found in that file are vector graphics instructions laying out a path and stroking it."},{"owner":{"account_id":6275061,"reputation":95,"user_id":4877969,"accept_rate":60,"display_name":"krillov"},"score":0,"creation_date":1693376777,"post_id":77002400,"comment_id":135750724,"body_markdown":"@mkl Yes, I came to the same conclusion. I understood they are vector graphics. Is it possible to extract and convert them to bitmap format?","body":"@mkl Yes, I came to the same conclusion. I understood they are vector graphics. Is it possible to extract and convert them to bitmap format?"},{"owner":{"account_id":6275061,"reputation":95,"user_id":4877969,"accept_rate":60,"display_name":"krillov"},"score":0,"creation_date":1693376958,"post_id":77002400,"comment_id":135750746,"body_markdown":"@KJ I would like to do all this in Java with PDFBox or iText.","body":"@KJ I would like to do all this in Java with PDFBox or iText."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1693378798,"post_id":77002400,"comment_id":135751023,"body_markdown":"Does the `AnnotationDrawer` for pdfbox from [this old answer](https://stackoverflow.com/a/17145649/1729265) help? It&#39;s being implemented based on pdfbox 1.8.2 but the concept should still be usable with the current pdfbox 3.","body":"Does the <code>AnnotationDrawer</code> for pdfbox from <a href=\"https://stackoverflow.com/a/17145649/1729265\">this old answer</a> help? It&#39;s being implemented based on pdfbox 1.8.2 but the concept should still be usable with the current pdfbox 3."},{"owner":{"account_id":6275061,"reputation":95,"user_id":4877969,"accept_rate":60,"display_name":"krillov"},"score":0,"creation_date":1693378934,"post_id":77002400,"comment_id":135751041,"body_markdown":"@mkl I have tried that but that code is really outdated. I can maybe test it again. I missed that they have released 3.0.","body":"@mkl I have tried that but that code is really outdated. I can maybe test it again. I missed that they have released 3.0."},{"owner":{"account_id":6275061,"reputation":95,"user_id":4877969,"accept_rate":60,"display_name":"krillov"},"score":0,"creation_date":1693389742,"post_id":77002400,"comment_id":135753291,"body_markdown":"@mkl I have tested with PDFBox version 1.82 just to see if it works at all but unfortunately no. `PDAppearanceDictionary appearDictionary = annotation.getAppearance();` is null.","body":"@mkl I have tested with PDFBox version 1.82 just to see if it works at all but unfortunately no. <code>PDAppearanceDictionary appearDictionary = annotation.getAppearance();</code> is null."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1693403774,"post_id":77002400,"comment_id":135756412,"body_markdown":"*&quot;I have tested with PDFBox version 1.82 just to see if it works at all but unfortunately no.&quot;* - Well, apparently the signature appearances you are after are not annotation appearances but generic XObjects. Thus, you&#39;ll have to change the code to work on XObject resources of the page (maybe even recursively) instead on annotation appearances. As you don&#39;t share an example file, this is a bit of guesswork for me...","body":"<i>&quot;I have tested with PDFBox version 1.82 just to see if it works at all but unfortunately no.&quot;</i> - Well, apparently the signature appearances you are after are not annotation appearances but generic XObjects. Thus, you&#39;ll have to change the code to work on XObject resources of the page (maybe even recursively) instead on annotation appearances. As you don&#39;t share an example file, this is a bit of guesswork for me..."},{"owner":{"account_id":6275061,"reputation":95,"user_id":4877969,"accept_rate":60,"display_name":"krillov"},"score":0,"creation_date":1693409534,"post_id":77002400,"comment_id":135757840,"body_markdown":"@mkl I have uploaded a test file here: https://file.io/5UQcJejlOWzQ","body":"@mkl I have uploaded a test file here: <a href=\"https://file.io/5UQcJejlOWzQ\" rel=\"nofollow noreferrer\">file.io/5UQcJejlOWzQ</a>"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1693414968,"post_id":77002400,"comment_id":135759033,"body_markdown":"Ok, nested XObjects, so recursing through page XObject Resources is necessary. I&#39;ll take a look later this week.","body":"Ok, nested XObjects, so recursing through page XObject Resources is necessary. I&#39;ll take a look later this week."},{"owner":{"account_id":6275061,"reputation":95,"user_id":4877969,"accept_rate":60,"display_name":"krillov"},"score":0,"creation_date":1693415888,"post_id":77002400,"comment_id":135759237,"body_markdown":"Thanks! They are nested but they always have the same id Xi3 and Xf2 so a really ugly solution is like: `COSDictionary t = (COSDictionary) document.getDocument().getObjectsByType(COSName.ANNOT).get(0).getDictionaryObject(COSName.P); COSDictionary resources = (COSDictionary) t.getItem(COSName.RESOURCES); COSDictionary xObject = (COSDictionary) resources.getItem(COSName.XOBJECT); COSObject xObjectXi3 = (COSObject) xObject.getItem(&quot;Xi3&quot;); COSDictionary resourcesXi3 = (COSDictionary) xObjectXi3.getItem(COSName.RESOURCES);...` But yes this would stop working if they change their implementation.","body":"Thanks! They are nested but they always have the same id Xi3 and Xf2 so a really ugly solution is like: <code>COSDictionary t = (COSDictionary) document.getDocument().getObjectsByType(COSName.ANNOT).get(0&zwnj;&#8203;).getDictionaryObjec&zwnj;&#8203;t(COSName.P); COSDictionary resources = (COSDictionary) t.getItem(COSName.RESOURCES); COSDictionary xObject = (COSDictionary) resources.getItem(COSName.XOBJECT); COSObject xObjectXi3 = (COSObject) xObject.getItem(&quot;Xi3&quot;); COSDictionary resourcesXi3 = (COSDictionary) xObjectXi3.getItem(COSName.RESOURCES);...</code> But yes this would stop working if they change their implementation."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1693547478,"post_id":77002400,"comment_id":135778052,"body_markdown":"*&quot;But yes this would stop working if they change their implementation&quot;* - These scribbles are not marked in a distinct, standardized manner. Thus, no matter how you extract them, it will always be possible that Adobe changes the implementation in a way that breaks your extraction. (Unless you train some AI to recognize where the signature scribbles are and render exactly those regions. But then the AI may sometimes err...)","body":"<i>&quot;But yes this would stop working if they change their implementation&quot;</i> - These scribbles are not marked in a distinct, standardized manner. Thus, no matter how you extract them, it will always be possible that Adobe changes the implementation in a way that breaks your extraction. (Unless you train some AI to recognize where the signature scribbles are and render exactly those regions. But then the AI may sometimes err...)"}],"answers":[{"tags":[],"owner":{"account_id":14313923,"reputation":8884,"user_id":10802527,"display_name":"K J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693535457,"creation_date":1693535078,"answer_id":77020167,"question_id":77002400,"body_markdown":"Your Question was can a signature squiggle (vector graphic) be extracted as an image?\r\n\r\nSo there are more unknows than answers, in such a question, like where do you need the extraction to be or converted into?\r\n\r\nHere on left we can see the multiple components of a signature annotation. and once we know what nested object is the artwork (here number 14 0 obj) we can copy the stream data into another PDF. As seen on the right.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nsince it is a screen graphic we can copy and paste to any graphics application and save in any image format you wish. However to maintain the simplicity of the source it is best copied into an SVG editor like Inkscape.\r\n\r\nOr simpler yet since it is now an isolated PDF object simply convert to SVG for forensic use in a web page, or on the bosses debit account,  etc. `mutool convert -o output.svg input.pdf`\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/b6hBB.png\r\n  [2]: https://i.stack.imgur.com/kgOGc.png","title":"Extract signature image from PDF signed with Adobe Sign","body":"<p>Your Question was can a signature squiggle (vector graphic) be extracted as an image?</p>\n<p>So there are more unknows than answers, in such a question, like where do you need the extraction to be or converted into?</p>\n<p>Here on left we can see the multiple components of a signature annotation. and once we know what nested object is the artwork (here number 14 0 obj) we can copy the stream data into another PDF. As seen on the right.</p>\n<p><a href=\"https://i.stack.imgur.com/b6hBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b6hBB.png\" alt=\"enter image description here\" /></a></p>\n<p>since it is a screen graphic we can copy and paste to any graphics application and save in any image format you wish. However to maintain the simplicity of the source it is best copied into an SVG editor like Inkscape.</p>\n<p>Or simpler yet since it is now an isolated PDF object simply convert to SVG for forensic use in a web page, or on the bosses debit account,  etc. <code>mutool convert -o output.svg input.pdf</code></p>\n<p><a href=\"https://i.stack.imgur.com/kgOGc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kgOGc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693843149,"creation_date":1693843149,"answer_id":77039195,"question_id":77002400,"body_markdown":"As discussed in the comments, the `AnnotationDrawer` from [this old answer][1], generalized to work for arbitrary form XObjects, could be used to render the pen signatures from Adobe Acrobat Sign signed documents to separate bitmap images.\r\n\r\nThat annotation drawer can be generalized (and ported to PDFBox 3) as follows:\r\n\r\n```lang-java\r\npublic class ContentStreamRenderer extends PDFRenderer {\r\n    public ContentStreamRenderer(PDDocument document) throws NoSuchFieldException, SecurityException {\r\n        super(document);\r\n        pageImageField = PDFRenderer.class.getDeclaredField(&quot;pageImage&quot;);\r\n        pageImageField.setAccessible(true);\r\n        pageDrawerParametersConstructor = (Constructor&lt;PageDrawerParameters&gt;) PageDrawerParameters.class.getDeclaredConstructors()[0];\r\n        pageDrawerParametersConstructor.setAccessible(true);\r\n    }\r\n\r\n    @Override\r\n    protected PageDrawer createPageDrawer(PageDrawerParameters parameters) throws IOException {\r\n        PageDrawer pageDrawer = new ContentStreamPageDrawer(parameters);\r\n        pageDrawer.setAnnotationFilter(getAnnotationsFilter());\r\n        return pageDrawer;\r\n    }\r\n\r\n    public BufferedImage renderImage(PDPage page, PDContentStream contentStream, float scale, ImageType imageType, RenderDestination destination) throws IOException, IllegalArgumentException, IllegalAccessException, InstantiationException, InvocationTargetException {\r\n        try {\r\n            PDRectangle bBox = contentStream.getBBox();\r\n            Rectangle2D bounds = bBox.transform(contentStream.getMatrix()).getBounds2D();\r\n            bBox = new PDRectangle((float)bounds.getMinX(), (float)bounds.getMinY(), (float)bounds.getWidth(), (float)bounds.getHeight());\r\n            \r\n            float widthPt = bBox.getWidth();\r\n            float heightPt = bBox.getHeight();\r\n\r\n            // PDFBOX-4306 avoid single blank pixel line on the right or on the bottom\r\n            int widthPx = (int) Math.max(Math.floor(widthPt * scale), 1);\r\n            int heightPx = (int) Math.max(Math.floor(heightPt * scale), 1);\r\n\r\n            BufferedImage image = new BufferedImage(widthPx, heightPx, BufferedImage.TYPE_INT_ARGB);\r\n            pageImageField.set(this, image);\r\n\r\n            // use a transparent background if the image type supports alpha\r\n            Graphics2D g = image.createGraphics();\r\n            g.setBackground(new Color(0, 0, 0, 0));\r\n            g.clearRect(0, 0, image.getWidth(), image.getHeight());\r\n            g.scale(scale, scale);\r\n\r\n            RenderingHints actualRenderingHints =\r\n                    getRenderingHints() == null ? createDefaultRenderingHints(g) : getRenderingHints();\r\n            PageDrawerParameters parameters =\r\n                    pageDrawerParametersConstructor.newInstance(this, page, isSubsamplingAllowed(), destination,\r\n                            actualRenderingHints, getImageDownscalingOptimizationThreshold());\r\n            PageDrawer drawer = createPageDrawer(parameters);\r\n            if (drawer instanceof ContentStreamPageDrawer) {\r\n                ((ContentStreamPageDrawer)drawer).setContentStream(contentStream);\r\n            }\r\n            drawer.drawPage(g, bBox);\r\n\r\n            g.dispose();\r\n\r\n            if (imageType != ImageType.ARGB)\r\n            {\r\n                int biType = -1;\r\n                switch (imageType) {\r\n                case ARGB:   biType = BufferedImage.TYPE_INT_ARGB; break;\r\n                case BGR:    biType = BufferedImage.TYPE_3BYTE_BGR; break;\r\n                case BINARY: biType = BufferedImage.TYPE_BYTE_BINARY; break;\r\n                case GRAY:   biType = BufferedImage.TYPE_BYTE_GRAY; break;\r\n                case RGB:    biType = BufferedImage.TYPE_INT_RGB; break;\r\n                }\r\n                BufferedImage newImage = \r\n                        new BufferedImage(image.getWidth(), image.getHeight(), biType);\r\n                Graphics2D dstGraphics = newImage.createGraphics();\r\n                dstGraphics.setBackground(Color.WHITE);\r\n                dstGraphics.clearRect(0, 0, image.getWidth(), image.getHeight());\r\n                dstGraphics.drawImage(image, 0, 0, null);\r\n                dstGraphics.dispose();\r\n                image = newImage;\r\n            }\r\n\r\n            return image;\r\n        } finally {\r\n            pageImageField.set(this, null);\r\n        }\r\n    }\r\n\r\n    private RenderingHints createDefaultRenderingHints(Graphics2D graphics)\r\n    {\r\n        RenderingHints r = new RenderingHints(null);\r\n        r.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n        r.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n        r.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n        return r;\r\n    }\r\n\r\n    final Field pageImageField;\r\n    final Constructor&lt;PageDrawerParameters&gt; pageDrawerParametersConstructor;\r\n}\r\n```\r\n*([ContentStreamRenderer][2] class derived from `PDFRenderer`)*\r\n\r\nwith this helper class\r\n\r\n```lang-java\r\npublic class ContentStreamPageDrawer extends PageDrawer {\r\n    public ContentStreamPageDrawer(PageDrawerParameters parameters) throws IOException {\r\n        super(parameters);\r\n    }\r\n\r\n    public PDContentStream getContentStream() {\r\n        return contentStream;\r\n    }\r\n\r\n    public void setContentStream(PDContentStream contentStream) {\r\n        this.contentStream = contentStream;\r\n    }\r\n\r\n    //\r\n    // Overrides that make drawPage only draw the set content stream\r\n    // if one is set. Otherwise, these overrides delegate to PageDrawer.\r\n    //\r\n    @Override\r\n    public void processPage(PDPage page) throws IOException {\r\n        if (contentStream == null) {\r\n            super.processPage(page);\r\n        } else {\r\n            processChildStream(contentStream, page);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void showAnnotation(PDAnnotation annotation) throws IOException {\r\n        if (contentStream == null) {\r\n            super.showAnnotation(annotation);\r\n        }\r\n    }\r\n\r\n    PDContentStream contentStream = null;\r\n}\r\n```\r\n*([ContentStreamPageDrawer][3] helper of `ContentStreamRenderer`)*\r\n\r\nThese classes constitute a customization of the standard PDFBox PDF renderer and page drawer, a generalization to render individual content streams of a PDF.\r\n\r\nUnfortunately PDFBox has made many member variables and methods private or at least package protected. As I didn&#39;t want to copy the whole classes, I, therefore, had to use reflection which will not work in some contexts. (Keeping members hidden away like that really is a PITA...)\r\n\r\nTo render the form XObjects in the example PDF signed using Adobe Acrobat Sign, you can use those classes like this:\r\n\r\n```lang-java\r\nPDDocument pdDocument = Loader.loadPDF(PDF_SOURCE)\r\nContentStreamRenderer renderer = new ContentStreamRenderer(pdDocument);\r\nPDPage pdPage = pdDocument.getPage(0);\r\nPDResources pdResources = pdPage.getResources();\r\n\r\nfor (COSName xObjectName : pdResources.getXObjectNames()) {\r\n    PDXObject pdXObject = pdResources.getXObject(xObjectName);\r\n    if (pdXObject instanceof PDFormXObject) {\r\n        PDFormXObject pdFormXObject = (PDFormXObject) pdXObject;\r\n        BufferedImage image = renderer.renderImage(pdPage, pdFormXObject, 4, ImageType.RGB, RenderDestination.VIEW);\r\n        ImageIO.write(image, &quot;png&quot;, new File(&quot;test_document_signed-1-&quot; + xObjectName.getName() + &quot;.png&quot;));\r\n\r\n        PDResources innerResources = pdFormXObject.getResources();\r\n        for (COSName innerXObjectName : innerResources.getXObjectNames()) {\r\n            PDXObject innerXObject = innerResources.getXObject(innerXObjectName);\r\n            if (innerXObject instanceof PDFormXObject) {\r\n                PDFormXObject innerFormXObject = (PDFormXObject) innerXObject;\r\n                image = renderer.renderImage(pdPage, innerFormXObject, 4, ImageType.RGB, RenderDestination.VIEW);\r\n                ImageIO.write(image, &quot;png&quot;, new File(&quot;test_document_signed-1-&quot; + xObjectName.getName() + &quot;-&quot; + innerXObjectName.getName() + &quot;.png&quot;));\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n*([RenderAcrobatSignSignatures][4] test `testRenderTestDocumentSigned`)*\r\n\r\nThe results:\r\n\r\n[![test_document_signed-1-Xi3.png][5]][5]\r\n\r\n[![test_document_signed-1-Xi3-Xf2.png][6]][6]\r\n\r\n[![test_document_signed-1-Xi4.png][7]][7]\r\n\r\n----\r\n\r\nIn your proof of concept you extract the form XObjects and draw them on pages of temporary PDFs. That approach has the advantage of not needing reflection (or copying the whole PDFBox rendering classes). It may have the disadvantage, though, of requiring more resources.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/17145649/1729265\r\n  [2]: https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/main/java/mkl/testarea/pdfbox3/render/ContentStreamRenderer.java#L33\r\n  [3]: https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/main/java/mkl/testarea/pdfbox3/render/ContentStreamPageDrawer.java#L23C1-L57C2\r\n  [4]: https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/test/java/mkl/testarea/pdfbox3/render/RenderAcrobatSignSignatures.java#L47\r\n  [5]: https://i.stack.imgur.com/gZkbA.png\r\n  [6]: https://i.stack.imgur.com/uC82h.png\r\n  [7]: https://i.stack.imgur.com/VJeP0.png","title":"Extract signature image from PDF signed with Adobe Sign","body":"<p>As discussed in the comments, the <code>AnnotationDrawer</code> from <a href=\"https://stackoverflow.com/a/17145649/1729265\">this old answer</a>, generalized to work for arbitrary form XObjects, could be used to render the pen signatures from Adobe Acrobat Sign signed documents to separate bitmap images.</p>\n<p>That annotation drawer can be generalized (and ported to PDFBox 3) as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ContentStreamRenderer extends PDFRenderer {\n    public ContentStreamRenderer(PDDocument document) throws NoSuchFieldException, SecurityException {\n        super(document);\n        pageImageField = PDFRenderer.class.getDeclaredField(&quot;pageImage&quot;);\n        pageImageField.setAccessible(true);\n        pageDrawerParametersConstructor = (Constructor&lt;PageDrawerParameters&gt;) PageDrawerParameters.class.getDeclaredConstructors()[0];\n        pageDrawerParametersConstructor.setAccessible(true);\n    }\n\n    @Override\n    protected PageDrawer createPageDrawer(PageDrawerParameters parameters) throws IOException {\n        PageDrawer pageDrawer = new ContentStreamPageDrawer(parameters);\n        pageDrawer.setAnnotationFilter(getAnnotationsFilter());\n        return pageDrawer;\n    }\n\n    public BufferedImage renderImage(PDPage page, PDContentStream contentStream, float scale, ImageType imageType, RenderDestination destination) throws IOException, IllegalArgumentException, IllegalAccessException, InstantiationException, InvocationTargetException {\n        try {\n            PDRectangle bBox = contentStream.getBBox();\n            Rectangle2D bounds = bBox.transform(contentStream.getMatrix()).getBounds2D();\n            bBox = new PDRectangle((float)bounds.getMinX(), (float)bounds.getMinY(), (float)bounds.getWidth(), (float)bounds.getHeight());\n            \n            float widthPt = bBox.getWidth();\n            float heightPt = bBox.getHeight();\n\n            // PDFBOX-4306 avoid single blank pixel line on the right or on the bottom\n            int widthPx = (int) Math.max(Math.floor(widthPt * scale), 1);\n            int heightPx = (int) Math.max(Math.floor(heightPt * scale), 1);\n\n            BufferedImage image = new BufferedImage(widthPx, heightPx, BufferedImage.TYPE_INT_ARGB);\n            pageImageField.set(this, image);\n\n            // use a transparent background if the image type supports alpha\n            Graphics2D g = image.createGraphics();\n            g.setBackground(new Color(0, 0, 0, 0));\n            g.clearRect(0, 0, image.getWidth(), image.getHeight());\n            g.scale(scale, scale);\n\n            RenderingHints actualRenderingHints =\n                    getRenderingHints() == null ? createDefaultRenderingHints(g) : getRenderingHints();\n            PageDrawerParameters parameters =\n                    pageDrawerParametersConstructor.newInstance(this, page, isSubsamplingAllowed(), destination,\n                            actualRenderingHints, getImageDownscalingOptimizationThreshold());\n            PageDrawer drawer = createPageDrawer(parameters);\n            if (drawer instanceof ContentStreamPageDrawer) {\n                ((ContentStreamPageDrawer)drawer).setContentStream(contentStream);\n            }\n            drawer.drawPage(g, bBox);\n\n            g.dispose();\n\n            if (imageType != ImageType.ARGB)\n            {\n                int biType = -1;\n                switch (imageType) {\n                case ARGB:   biType = BufferedImage.TYPE_INT_ARGB; break;\n                case BGR:    biType = BufferedImage.TYPE_3BYTE_BGR; break;\n                case BINARY: biType = BufferedImage.TYPE_BYTE_BINARY; break;\n                case GRAY:   biType = BufferedImage.TYPE_BYTE_GRAY; break;\n                case RGB:    biType = BufferedImage.TYPE_INT_RGB; break;\n                }\n                BufferedImage newImage = \n                        new BufferedImage(image.getWidth(), image.getHeight(), biType);\n                Graphics2D dstGraphics = newImage.createGraphics();\n                dstGraphics.setBackground(Color.WHITE);\n                dstGraphics.clearRect(0, 0, image.getWidth(), image.getHeight());\n                dstGraphics.drawImage(image, 0, 0, null);\n                dstGraphics.dispose();\n                image = newImage;\n            }\n\n            return image;\n        } finally {\n            pageImageField.set(this, null);\n        }\n    }\n\n    private RenderingHints createDefaultRenderingHints(Graphics2D graphics)\n    {\n        RenderingHints r = new RenderingHints(null);\n        r.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n        r.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n        r.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        return r;\n    }\n\n    final Field pageImageField;\n    final Constructor&lt;PageDrawerParameters&gt; pageDrawerParametersConstructor;\n}\n</code></pre>\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/main/java/mkl/testarea/pdfbox3/render/ContentStreamRenderer.java#L33\" rel=\"nofollow noreferrer\">ContentStreamRenderer</a> class derived from <code>PDFRenderer</code>)</em></p>\n<p>with this helper class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ContentStreamPageDrawer extends PageDrawer {\n    public ContentStreamPageDrawer(PageDrawerParameters parameters) throws IOException {\n        super(parameters);\n    }\n\n    public PDContentStream getContentStream() {\n        return contentStream;\n    }\n\n    public void setContentStream(PDContentStream contentStream) {\n        this.contentStream = contentStream;\n    }\n\n    //\n    // Overrides that make drawPage only draw the set content stream\n    // if one is set. Otherwise, these overrides delegate to PageDrawer.\n    //\n    @Override\n    public void processPage(PDPage page) throws IOException {\n        if (contentStream == null) {\n            super.processPage(page);\n        } else {\n            processChildStream(contentStream, page);\n        }\n    }\n\n    @Override\n    public void showAnnotation(PDAnnotation annotation) throws IOException {\n        if (contentStream == null) {\n            super.showAnnotation(annotation);\n        }\n    }\n\n    PDContentStream contentStream = null;\n}\n</code></pre>\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/main/java/mkl/testarea/pdfbox3/render/ContentStreamPageDrawer.java#L23C1-L57C2\" rel=\"nofollow noreferrer\">ContentStreamPageDrawer</a> helper of <code>ContentStreamRenderer</code>)</em></p>\n<p>These classes constitute a customization of the standard PDFBox PDF renderer and page drawer, a generalization to render individual content streams of a PDF.</p>\n<p>Unfortunately PDFBox has made many member variables and methods private or at least package protected. As I didn't want to copy the whole classes, I, therefore, had to use reflection which will not work in some contexts. (Keeping members hidden away like that really is a PITA...)</p>\n<p>To render the form XObjects in the example PDF signed using Adobe Acrobat Sign, you can use those classes like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>PDDocument pdDocument = Loader.loadPDF(PDF_SOURCE)\nContentStreamRenderer renderer = new ContentStreamRenderer(pdDocument);\nPDPage pdPage = pdDocument.getPage(0);\nPDResources pdResources = pdPage.getResources();\n\nfor (COSName xObjectName : pdResources.getXObjectNames()) {\n    PDXObject pdXObject = pdResources.getXObject(xObjectName);\n    if (pdXObject instanceof PDFormXObject) {\n        PDFormXObject pdFormXObject = (PDFormXObject) pdXObject;\n        BufferedImage image = renderer.renderImage(pdPage, pdFormXObject, 4, ImageType.RGB, RenderDestination.VIEW);\n        ImageIO.write(image, &quot;png&quot;, new File(&quot;test_document_signed-1-&quot; + xObjectName.getName() + &quot;.png&quot;));\n\n        PDResources innerResources = pdFormXObject.getResources();\n        for (COSName innerXObjectName : innerResources.getXObjectNames()) {\n            PDXObject innerXObject = innerResources.getXObject(innerXObjectName);\n            if (innerXObject instanceof PDFormXObject) {\n                PDFormXObject innerFormXObject = (PDFormXObject) innerXObject;\n                image = renderer.renderImage(pdPage, innerFormXObject, 4, ImageType.RGB, RenderDestination.VIEW);\n                ImageIO.write(image, &quot;png&quot;, new File(&quot;test_document_signed-1-&quot; + xObjectName.getName() + &quot;-&quot; + innerXObjectName.getName() + &quot;.png&quot;));\n            }\n        }\n    }\n}\n</code></pre>\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/test/java/mkl/testarea/pdfbox3/render/RenderAcrobatSignSignatures.java#L47\" rel=\"nofollow noreferrer\">RenderAcrobatSignSignatures</a> test <code>testRenderTestDocumentSigned</code>)</em></p>\n<p>The results:</p>\n<p><a href=\"https://i.stack.imgur.com/gZkbA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gZkbA.png\" alt=\"test_document_signed-1-Xi3.png\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/uC82h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uC82h.png\" alt=\"test_document_signed-1-Xi3-Xf2.png\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/VJeP0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VJeP0.png\" alt=\"test_document_signed-1-Xi4.png\" /></a></p>\n<hr />\n<p>In your proof of concept you extract the form XObjects and draw them on pages of temporary PDFs. That approach has the advantage of not needing reflection (or copying the whole PDFBox rendering classes). It may have the disadvantage, though, of requiring more resources.</p>\n"}],"owner":{"account_id":6275061,"reputation":95,"user_id":4877969,"accept_rate":60,"display_name":"krillov"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693843149,"creation_date":1693329729,"question_id":77002400,"body_markdown":"I&#39;m trying to extract the signature image from a PDF signed with Adobe Sign. Not sure how Adobe adds this image. \r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI have tested in Java with iText and PDFBox. Normally when you traverse through the PDF structure with some tools e.g iText RUPS you can find the images like the visible signature and even download it directly in the tool. I didn&#39;t find it in this case. I did find though the XObject what I think holds the signature image.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe stream looks like this:\r\n\r\n    q\r\n        q\r\n            0.07843 0.45098 0.90196 RG\r\n            0.07843 0.45098 0.90196 rg\r\n            1 w\r\n            q\r\n                BT\r\n                    1 0 0 1 0 1.78 Tm\r\n                    /F1 6 Tf\r\n                    0.07843 0.45098 0.90196 rg\r\n                    ({0009002000270027002a00010018002a002d0027001f00010497000200300022000104400443047600010441043f044104420001044004410477043f044300010008000e001506d404410498}) Tj\r\n                    0 g\r\n                ET\r\n            Q\r\n            0 8.28 m\r\n                103.55 8.28 l\r\n            S\r\n        Q\r\n        0 0 0 RG\r\n        0 0 0 rg\r\n        q\r\n            1 0 0 1 0 0 cm\r\n            /Xf2 Do\r\n        Q\r\n    Q\r\n\r\nAnd has a reference to Xf2 which looks like this:\r\n\r\n    1 J\r\n    1 j\r\n    1.000 w\r\n    30.315 10.580 m\r\n        30.315 10.580 30.315 10.580 30.315 10.587 c\r\n    S\r\n    1.000 w\r\n    30.315 10.587 m\r\n        30.315 10.594 30.315 10.608 30.315 10.627 c\r\n    S\r\n    1.000 w\r\n    30.315 10.627 m\r\n        30.315 10.646 30.315 10.670 30.315 10.683 c\r\n    S\r\n    ...\r\n\r\nCan this be extracted as an image?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8xTai.png\r\n  [2]: https://i.stack.imgur.com/mkYBu.png\r\n\r\n--------------------------------------------------------------------\r\n\r\nProof of concept with PDFBox:\r\n\r\n    try (PDDocument document = PDDocument.load(pdf)) {\r\n    \r\n                PDAnnotation annotation = document.getPage(0).getAnnotations().get(0);\r\n                PDResources resources = annotation.getPage().getResources();\r\n                Iterator&lt;COSName&gt; names = resources.getXObjectNames().iterator();\r\n                PDXObject xi3Object = resources.getXObject(names.next());\r\n                PDStream xi3Stream = xi3Object.getStream();\r\n    \r\n    // OR \r\n    \r\n                COSDictionary page = (COSDictionary) document.getDocument().getObjectsByType(COSName.ANNOT).get(0)\r\n                        .getDictionaryObject(COSName.P);\r\n                COSDictionary resources = (COSDictionary) page.getItem(COSName.RESOURCES);\r\n                COSDictionary xObject = (COSDictionary) resources.getItem(COSName.XOBJECT);\r\n                COSObject xi3Object = (COSObject) xObject.getItem(&quot;Xi3&quot;);\r\n                COSStream xi3Stream = (COSStream) xi3Object.getObject();\r\n    \r\n                PDFormXObject pdFormXObject = new PDFormXObject(xi3Stream);\r\n    \r\n                PDPage page = new PDPage(new PDRectangle(pdFormXObject.getBBox().getWidth(),\r\n                        pdFormXObject.getBBox().getHeight()));\r\n    \r\n                try (PDDocument tempDocument = new PDDocument()) {\r\n    \r\n                    PDPageContentStream contents = new PDPageContentStream(tempDocument, page);\r\n                    AffineTransform affineTransform = new AffineTransform();\r\n                    affineTransform.setToTranslation(0, 0);\r\n                    affineTransform.setToScale(0.75d, 0.75d);\r\n                    pdFormXObject.setMatrix(affineTransform);\r\n                    contents.drawForm(pdFormXObject);\r\n                    contents.restoreGraphicsState();\r\n                    contents.close();\r\n                    tempDocument.addPage(page);\r\n                    PDFRenderer renderer = new PDFRenderer(tempDocument);\r\n                    BufferedImage image = renderer.renderImageWithDPI(0, 600);\r\n                    try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\r\n                        ImageIO.write(image, &quot;png&quot;, baos);\r\n                        return baos.toByteArray();\r\n                    }\r\n                }\r\n            }","title":"Extract signature image from PDF signed with Adobe Sign","body":"<p>I'm trying to extract the signature image from a PDF signed with Adobe Sign. Not sure how Adobe adds this image.</p>\n<p><a href=\"https://i.stack.imgur.com/8xTai.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8xTai.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tested in Java with iText and PDFBox. Normally when you traverse through the PDF structure with some tools e.g iText RUPS you can find the images like the visible signature and even download it directly in the tool. I didn't find it in this case. I did find though the XObject what I think holds the signature image.</p>\n<p><a href=\"https://i.stack.imgur.com/mkYBu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mkYBu.png\" alt=\"enter image description here\" /></a></p>\n<p>The stream looks like this:</p>\n<pre><code>q\n    q\n        0.07843 0.45098 0.90196 RG\n        0.07843 0.45098 0.90196 rg\n        1 w\n        q\n            BT\n                1 0 0 1 0 1.78 Tm\n                /F1 6 Tf\n                0.07843 0.45098 0.90196 rg\n                ({0009002000270027002a00010018002a002d0027001f00010497000200300022000104400443047600010441043f044104420001044004410477043f044300010008000e001506d404410498}) Tj\n                0 g\n            ET\n        Q\n        0 8.28 m\n            103.55 8.28 l\n        S\n    Q\n    0 0 0 RG\n    0 0 0 rg\n    q\n        1 0 0 1 0 0 cm\n        /Xf2 Do\n    Q\nQ\n</code></pre>\n<p>And has a reference to Xf2 which looks like this:</p>\n<pre><code>1 J\n1 j\n1.000 w\n30.315 10.580 m\n    30.315 10.580 30.315 10.580 30.315 10.587 c\nS\n1.000 w\n30.315 10.587 m\n    30.315 10.594 30.315 10.608 30.315 10.627 c\nS\n1.000 w\n30.315 10.627 m\n    30.315 10.646 30.315 10.670 30.315 10.683 c\nS\n...\n</code></pre>\n<p>Can this be extracted as an image?</p>\n<hr />\n<p>Proof of concept with PDFBox:</p>\n<pre><code>try (PDDocument document = PDDocument.load(pdf)) {\n\n            PDAnnotation annotation = document.getPage(0).getAnnotations().get(0);\n            PDResources resources = annotation.getPage().getResources();\n            Iterator&lt;COSName&gt; names = resources.getXObjectNames().iterator();\n            PDXObject xi3Object = resources.getXObject(names.next());\n            PDStream xi3Stream = xi3Object.getStream();\n\n// OR \n\n            COSDictionary page = (COSDictionary) document.getDocument().getObjectsByType(COSName.ANNOT).get(0)\n                    .getDictionaryObject(COSName.P);\n            COSDictionary resources = (COSDictionary) page.getItem(COSName.RESOURCES);\n            COSDictionary xObject = (COSDictionary) resources.getItem(COSName.XOBJECT);\n            COSObject xi3Object = (COSObject) xObject.getItem(&quot;Xi3&quot;);\n            COSStream xi3Stream = (COSStream) xi3Object.getObject();\n\n            PDFormXObject pdFormXObject = new PDFormXObject(xi3Stream);\n\n            PDPage page = new PDPage(new PDRectangle(pdFormXObject.getBBox().getWidth(),\n                    pdFormXObject.getBBox().getHeight()));\n\n            try (PDDocument tempDocument = new PDDocument()) {\n\n                PDPageContentStream contents = new PDPageContentStream(tempDocument, page);\n                AffineTransform affineTransform = new AffineTransform();\n                affineTransform.setToTranslation(0, 0);\n                affineTransform.setToScale(0.75d, 0.75d);\n                pdFormXObject.setMatrix(affineTransform);\n                contents.drawForm(pdFormXObject);\n                contents.restoreGraphicsState();\n                contents.close();\n                tempDocument.addPage(page);\n                PDFRenderer renderer = new PDFRenderer(tempDocument);\n                BufferedImage image = renderer.renderImageWithDPI(0, 600);\n                try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\n                    ImageIO.write(image, &quot;png&quot;, baos);\n                    return baos.toByteArray();\n                }\n            }\n        }\n</code></pre>\n"},{"tags":["java","events","solidity","smartcontracts","web3-java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1630852962,"post_id":69025408,"comment_id":122062924,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":14983790,"reputation":1238,"user_id":11269158,"display_name":"MrFrenzoid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630615351,"creation_date":1630615351,"answer_id":69036786,"question_id":69025408,"body_markdown":"```\r\n// Our local test network.\r\nvar service = new BeaconNodeService(&quot;http://localhost:19601/&quot;);\r\nvar client = BeaconNodeClientFactory.build(service);\r\n\r\n// We want to receive at least one event\r\nvar latch = new CountDownLatch(1);\r\n\r\n// At the moment we are interested in any topic\r\nvar topics = EnumSet.allOf(BeaconEventType.class);\r\n\r\n// Then subscribe to each event\r\nclient.getEvents().onEvent(topics, event -&gt; {\r\n    System.out.println(&quot;Received event: &quot; + event);\r\n    latch.countDown();\r\n});\r\n\r\n// Wait for the event\r\nlatch.await();\r\n```\r\n\r\nMore info [here][1].\r\n\r\n\r\n  [1]: https://docs.web3j.io/4.8.7/web3j_eth2_client/#listen-for-events","title":"Listening to events emmited from smart contracts using web3j library","body":"<pre><code>// Our local test network.\nvar service = new BeaconNodeService(&quot;http://localhost:19601/&quot;);\nvar client = BeaconNodeClientFactory.build(service);\n\n// We want to receive at least one event\nvar latch = new CountDownLatch(1);\n\n// At the moment we are interested in any topic\nvar topics = EnumSet.allOf(BeaconEventType.class);\n\n// Then subscribe to each event\nclient.getEvents().onEvent(topics, event -&gt; {\n    System.out.println(&quot;Received event: &quot; + event);\n    latch.countDown();\n});\n\n// Wait for the event\nlatch.await();\n</code></pre>\n<p>More info <a href=\"https://docs.web3j.io/4.8.7/web3j_eth2_client/#listen-for-events\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":9424862,"reputation":41,"user_id":7010164,"accept_rate":0,"display_name":"Sravan Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639211535,"creation_date":1639211535,"answer_id":70313683,"question_id":69025408,"body_markdown":"Lets consider Contract name as &quot;SampleContract&quot;. It includes a method &quot;getSellerAddress()&quot;, at the end of the method an event is emitted, which is named as &quot;emitSellerAddress&quot;.\r\n \r\nAfter calling the method getSellerAddress, create a filter that provides latest block details and add a topic with the Event Name. This event will be registered in the filter, which is passed into logFlowable. Subscribing to this method will provide the event information and eventString in the below code will provide complete log information. Based on the event emitting either it will be in the topic or data section.  \r\n\r\n    TransactionReceipt transactionReceiptData = sampleContract.getSellerAddress().send();\r\n\r\n    EthFilter filter = new EthFilter(DefaultBlockParameterName.LATEST, DefaultBlockParameterName.LATEST, sampleContract.getContractAddress());\r\n\r\n\tString encodedEventSignature = EventEncoder.encode(sampleContract.EVENT_NAME);\r\n\r\n\tfilter.addSingleTopic(encodedEventSignature);\r\n\t\t\t\t\t\r\n    System.out.println(&quot;subscribing to event with filter&quot;);\r\n\t\t\t\t\t\r\n\tWeb3j.ethLogFlowable(filter).subscribe(eventString -&gt; eventString.toString());\r\n\t\t\t\t\t","title":"Listening to events emmited from smart contracts using web3j library","body":"<p>Lets consider Contract name as &quot;SampleContract&quot;. It includes a method &quot;getSellerAddress()&quot;, at the end of the method an event is emitted, which is named as &quot;emitSellerAddress&quot;.</p>\n<p>After calling the method getSellerAddress, create a filter that provides latest block details and add a topic with the Event Name. This event will be registered in the filter, which is passed into logFlowable. Subscribing to this method will provide the event information and eventString in the below code will provide complete log information. Based on the event emitting either it will be in the topic or data section.</p>\n<pre><code>TransactionReceipt transactionReceiptData = sampleContract.getSellerAddress().send();\n\nEthFilter filter = new EthFilter(DefaultBlockParameterName.LATEST, DefaultBlockParameterName.LATEST, sampleContract.getContractAddress());\n\nString encodedEventSignature = EventEncoder.encode(sampleContract.EVENT_NAME);\n\nfilter.addSingleTopic(encodedEventSignature);\n                \nSystem.out.println(&quot;subscribing to event with filter&quot;);\n                \nWeb3j.ethLogFlowable(filter).subscribe(eventString -&gt; eventString.toString());\n                \n</code></pre>\n"},{"tags":[],"owner":{"account_id":22650899,"reputation":355,"user_id":16825573,"display_name":"Lejdi Prifti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693842968,"creation_date":1693842968,"answer_id":77039172,"question_id":69025408,"body_markdown":"You could also implement a solution that listens and logs all types of events that occur using `web3j`.\r\n\r\nIn the code below, you pass the contract address and initialize the filter after the construction of the blockchainConfig bean. \r\n\r\nThe solution is implemented in Spring Boot, using web3j. \r\n\r\n    @Slf4j\r\n    @Configuration\r\n    public class BlockchainConfig {\r\n\r\n\t@Value(&quot;${blockchain.rpcnode.url}&quot;)\r\n\tprivate String blockchainUrl;\r\n\r\n\t@Value(&quot;${blockchain.smart.contract.address}&quot;)\r\n\tprivate String contractAddress;\r\n\r\n\t@PostConstruct\r\n\tpublic void postConstruct() {\r\n\t\tthis.initFilter(contractAddress);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic Web3j web3j() {\r\n\t\treturn Web3j.build(new HttpService(blockchainUrl));\r\n\t}\r\n\r\n\tprivate void initFilter(String contractAddress) {\r\n\t\tEthFilter filter = new EthFilter(DefaultBlockParameterName.LATEST, DefaultBlockParameterName.LATEST,\r\n\t\t\t\tcontractAddress);\r\n\t\tweb3j().ethLogFlowable(filter).subscribe(eventLog -&gt; {\r\n\t\t\tLogUtil.debug(log, &quot;event of type %s occured on contract %s with topics %s&quot;, eventLog.getType(),\r\n\t\t\t\t\teventLog.getAddress(), eventLog.getTopics());\r\n\t\t});\r\n\t  }\r\n    }","title":"Listening to events emmited from smart contracts using web3j library","body":"<p>You could also implement a solution that listens and logs all types of events that occur using <code>web3j</code>.</p>\n<p>In the code below, you pass the contract address and initialize the filter after the construction of the blockchainConfig bean.</p>\n<p>The solution is implemented in Spring Boot, using web3j.</p>\n<pre><code>@Slf4j\n@Configuration\npublic class BlockchainConfig {\n\n@Value(&quot;${blockchain.rpcnode.url}&quot;)\nprivate String blockchainUrl;\n\n@Value(&quot;${blockchain.smart.contract.address}&quot;)\nprivate String contractAddress;\n\n@PostConstruct\npublic void postConstruct() {\n    this.initFilter(contractAddress);\n}\n\n@Bean\npublic Web3j web3j() {\n    return Web3j.build(new HttpService(blockchainUrl));\n}\n\nprivate void initFilter(String contractAddress) {\n    EthFilter filter = new EthFilter(DefaultBlockParameterName.LATEST, DefaultBlockParameterName.LATEST,\n            contractAddress);\n    web3j().ethLogFlowable(filter).subscribe(eventLog -&gt; {\n        LogUtil.debug(log, &quot;event of type %s occured on contract %s with topics %s&quot;, eventLog.getType(),\n                eventLog.getAddress(), eventLog.getTopics());\n    });\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":22635132,"reputation":21,"user_id":16812023,"display_name":"shaikh47"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1118,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1693842968,"creation_date":1630565400,"question_id":69025408,"body_markdown":"How it is possible to listen to events emitted from smart contract using web3j library based on java?","title":"Listening to events emmited from smart contracts using web3j library","body":"<p>How it is possible to listen to events emitted from smart contract using web3j library based on java?</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":4881147,"reputation":340,"user_id":3934903,"display_name":"Joseph Sang"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693841755,"creation_date":1693841755,"answer_id":77039061,"question_id":75954769,"body_markdown":"Check your build.gradle (module-level) file, in my case (I was mixing Java &amp; Kotlin) I had  both\r\n\r\n    annotationProcessor &#39;androidx.room:room-compiler:2.5.2&#39;\r\nand\r\n\r\n    ksp &#39;androidx.room:room-compiler:2.5.2&#39;\r\nRemoving whichever I didn&#39;t need solved the problem for me. Refer to the accepted answer in this question\r\nhttps://stackoverflow.com/questions/68688349/trying-to-create-room-database-with-android-but-keep-getting-dependency-error\r\nfor more information.","title":"Java Android Room &#39;Attempt to recreate a file for type [Dao_Impl]&#39;","body":"<p>Check your build.gradle (module-level) file, in my case (I was mixing Java &amp; Kotlin) I had  both</p>\n<pre><code>annotationProcessor 'androidx.room:room-compiler:2.5.2'\n</code></pre>\n<p>and</p>\n<pre><code>ksp 'androidx.room:room-compiler:2.5.2'\n</code></pre>\n<p>Removing whichever I didn't need solved the problem for me. Refer to the accepted answer in this question\n<a href=\"https://stackoverflow.com/questions/68688349/trying-to-create-room-database-with-android-but-keep-getting-dependency-error\">Trying to create room database with android, but keep getting dependency error</a>\nfor more information.</p>\n"}],"owner":{"account_id":15775988,"reputation":41,"user_id":11383767,"display_name":"Alex Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1693841755,"creation_date":1680829266,"question_id":75954769,"body_markdown":"I am very much at a loss. I am simply trying to implement the Android Room tutorial found [here](https://developer.android.com/training/data-storage/room). I keep receiving this error:\r\n\r\n```\r\nExecution failed for task &#39;:app:compileDebugJavaWithJavac&#39;.\r\n&gt; javax.annotation.processing.FilerException: Attempt to recreate a file for type com.example...dao.UserDao_Impl\r\n```\r\n\r\nDespite retrying the tutorial three times. If it helps:  \r\nMy DAO:\r\n\r\n```\r\n@Dao\r\npublic interface UserDao {\r\n    // LiveData&lt;&gt; respects app lifecycle\r\n    @Query(&quot;SELECT * FROM user&quot;)\r\n    LiveData&lt;List&lt;User&gt;&gt; getAll();\r\n\r\n    @Query(&quot;SELECT * FROM user WHERE id IN (:userIds)&quot;)\r\n    List&lt;User&gt; loadAllByIds(int[] userIds);\r\n\r\n    @Query(&quot;SELECT * FROM user WHERE first_name LIKE :first AND &quot; +\r\n            &quot;last_name LIKE :last LIMIT 1&quot;)\r\n    User findByName(String first, String last);\r\n\r\n    @Insert\r\n    void insert(User planetEntity);\r\n\r\n    @Insert\r\n    void insertAll(User... users);\r\n\r\n    @Delete\r\n    void delete(User user);\r\n}\r\n```\r\n\r\nMy database:\r\n\r\n```\r\n@Database(entities = {User.class}, version = 1, exportSchema = false)\r\n@TypeConverters({Converters.class})\r\npublic abstract class AppRoomDatabase extends RoomDatabase {\r\n    private static final String DATABASE_NAME = &quot;climbing_app_database&quot;;\r\n    private static AppRoomDatabase INSTANCE;\r\n\r\n    public abstract UserDao userDao();\r\n\r\n    public static AppRoomDatabase getDatabase(final Context context) {\r\n        if (INSTANCE == null) {\r\n            synchronized (AppRoomDatabase.class) {\r\n                if (INSTANCE == null) {\r\n                    //Creates the DB here\r\n                    INSTANCE = Room.databaseBuilder(context.getApplicationContext(),\r\n                            AppRoomDatabase.class, DATABASE_NAME)\r\n                            .fallbackToDestructiveMigration()\r\n                            .addCallback(new AppRoomDatabase.Callback() {\r\n                                @Override\r\n                                public void onCreate(@NonNull SupportSQLiteDatabase db) {\r\n                                    super.onCreate(db);\r\n\r\n                                }\r\n                            })\r\n                            .build();\r\n                }\r\n            }\r\n        }\r\n        return INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\nWould really appreciate anyone able to tell me how much of a sausage I am being.\r\n\r\nI tried to repeat the tutorial 3 times, but I have to be skipping something on autopilot because I just want to curl into a ball","title":"Java Android Room &#39;Attempt to recreate a file for type [Dao_Impl]&#39;","body":"<p>I am very much at a loss. I am simply trying to implement the Android Room tutorial found <a href=\"https://developer.android.com/training/data-storage/room\" rel=\"nofollow noreferrer\">here</a>. I keep receiving this error:</p>\n<pre><code>Execution failed for task ':app:compileDebugJavaWithJavac'.\n&gt; javax.annotation.processing.FilerException: Attempt to recreate a file for type com.example...dao.UserDao_Impl\n</code></pre>\n<p>Despite retrying the tutorial three times. If it helps:<br />\nMy DAO:</p>\n<pre><code>@Dao\npublic interface UserDao {\n    // LiveData&lt;&gt; respects app lifecycle\n    @Query(&quot;SELECT * FROM user&quot;)\n    LiveData&lt;List&lt;User&gt;&gt; getAll();\n\n    @Query(&quot;SELECT * FROM user WHERE id IN (:userIds)&quot;)\n    List&lt;User&gt; loadAllByIds(int[] userIds);\n\n    @Query(&quot;SELECT * FROM user WHERE first_name LIKE :first AND &quot; +\n            &quot;last_name LIKE :last LIMIT 1&quot;)\n    User findByName(String first, String last);\n\n    @Insert\n    void insert(User planetEntity);\n\n    @Insert\n    void insertAll(User... users);\n\n    @Delete\n    void delete(User user);\n}\n</code></pre>\n<p>My database:</p>\n<pre><code>@Database(entities = {User.class}, version = 1, exportSchema = false)\n@TypeConverters({Converters.class})\npublic abstract class AppRoomDatabase extends RoomDatabase {\n    private static final String DATABASE_NAME = &quot;climbing_app_database&quot;;\n    private static AppRoomDatabase INSTANCE;\n\n    public abstract UserDao userDao();\n\n    public static AppRoomDatabase getDatabase(final Context context) {\n        if (INSTANCE == null) {\n            synchronized (AppRoomDatabase.class) {\n                if (INSTANCE == null) {\n                    //Creates the DB here\n                    INSTANCE = Room.databaseBuilder(context.getApplicationContext(),\n                            AppRoomDatabase.class, DATABASE_NAME)\n                            .fallbackToDestructiveMigration()\n                            .addCallback(new AppRoomDatabase.Callback() {\n                                @Override\n                                public void onCreate(@NonNull SupportSQLiteDatabase db) {\n                                    super.onCreate(db);\n\n                                }\n                            })\n                            .build();\n                }\n            }\n        }\n        return INSTANCE;\n    }\n}\n</code></pre>\n<p>Would really appreciate anyone able to tell me how much of a sausage I am being.</p>\n<p>I tried to repeat the tutorial 3 times, but I have to be skipping something on autopilot because I just want to curl into a ball</p>\n"},{"tags":["java","eclipse","maven","xtext"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1693841798,"post_id":77038957,"comment_id":135810092,"body_markdown":"You should not use `&lt;scope&gt;import&lt;/scope&gt;` you should remove that simply.","body":"You should not use <code>&lt;scope&gt;import&lt;&#47;scope&gt;</code> you should remove that simply."},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1693841893,"post_id":77038957,"comment_id":135810115,"body_markdown":"sorry I was just fooling around. Even after removing it I get the same error","body":"sorry I was just fooling around. Even after removing it I get the same error"},{"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"score":0,"creation_date":1693847896,"post_id":77038957,"comment_id":135811102,"body_markdown":"Am I right assuming the nature of your project is an OSGI bundle? My experiences with OSGI are limited and I never found out how Maven and OSGI go well together. I remember that besides adding a dependency to the MANIFEST the JAR itself has to be added to a specific directory. Check whether you find that directory and try adding your JAR to this directory. If this works maybe you&#39;ll find a mechanism that this happens automatically.","body":"Am I right assuming the nature of your project is an OSGI bundle? My experiences with OSGI are limited and I never found out how Maven and OSGI go well together. I remember that besides adding a dependency to the MANIFEST the JAR itself has to be added to a specific directory. Check whether you find that directory and try adding your JAR to this directory. If this works maybe you&#39;ll find a mechanism that this happens automatically."},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1693854536,"post_id":77038957,"comment_id":135812095,"body_markdown":"if you want to use maven artifacts in eclipse code you need to do this one:\nhttps://l&#228;ubisoft.gmbh/en/articles/using-maven-artifacts-in-pde-rcp-and-tycho-builds/","body":"if you want to use maven artifacts in eclipse code you need to do this one: <a href=\"https://l&#228;ubisoft.gmbh/en/articles/using-maven-artifacts-in-pde-rcp-and-tycho-builds/\" rel=\"nofollow noreferrer\">l&#228;ubisoft.gmbh/en/articles/&hellip;</a>"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":1,"creation_date":1693854646,"post_id":77038957,"comment_id":135812111,"body_markdown":"but as commons math is already there: https://download.eclipse.org/tools/orbit/simrel/orbit-aggregation/2023-09/ you can use that one in your target directly","body":"but as commons math is already there: <a href=\"https://download.eclipse.org/tools/orbit/simrel/orbit-aggregation/2023-09/\" rel=\"nofollow noreferrer\">download.eclipse.org/tools/orbit/simrel/orbit-aggregation/&hellip;</a> you can use that one in your target directly"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1693946591,"post_id":77038957,"comment_id":135826090,"body_markdown":"Thanks! &quot;nature of your project is an OSGI bundle&quot; where can I find that out? Are xtext projects by nature OSGi bundle?","body":"Thanks! &quot;nature of your project is an OSGI bundle&quot; where can I find that out? Are xtext projects by nature OSGi bundle?"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1693947880,"post_id":77038957,"comment_id":135826290,"body_markdown":"added the following in my xtext.target file \n```\n&lt;location includeAllPlatforms=&quot;false&quot; includeConfigurePhase=&quot;false&quot; includeMode=&quot;planner&quot; includeSource=&quot;true&quot; type=&quot;InstallableUnit&quot;&gt;\n\t\t\t&lt;unit id=&quot;org.apache.commons.math3&quot; version=&quot;3.6.1.v20221112-0806&quot;/&gt;\n\t\t\t&lt;repository location=&quot;https://download.eclipse.org/tools/orbit/simrel/orbit-aggregation/release/4.29.0&quot;/&gt;\n\t\t&lt;/location&gt;\n```","body":"added the following in my xtext.target file  ``` &lt;location includeAllPlatforms=&quot;false&quot; includeConfigurePhase=&quot;false&quot; includeMode=&quot;planner&quot; includeSource=&quot;true&quot; type=&quot;InstallableUnit&quot;&gt; \t\t\t&lt;unit id=&quot;org.apache.commons.math3&quot; version=&quot;3.6.1.v20221112-0806&quot;/&gt; \t\t\t&lt;repository location=&quot;<a href=\"https://download.eclipse.org/tools/orbit/simrel/orbit-aggregation/release/4.29.0&quot;/\" rel=\"nofollow noreferrer\">download.eclipse.org/tools/orbit/simrel/orbit-aggr&zwnj;&#8203;egation/&hellip;</a>&gt; \t\t&lt;/location&gt; ```"},{"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"score":0,"creation_date":1693951151,"post_id":77038957,"comment_id":135826760,"body_markdown":"finally works after adding the bundles to MANIFEST.mf as well and &lt;repository&gt; to pom.xml","body":"finally works after adding the bundles to MANIFEST.mf as well and &lt;repository&gt; to pom.xml"},{"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"score":0,"creation_date":1694027483,"post_id":77038957,"comment_id":135838865,"body_markdown":"if you use manifest then adding to target should be sufficient without adding anything in the pom. the nature of your project depends on what you select in the new xtext project wizard","body":"if you use manifest then adding to target should be sufficient without adding anything in the pom. the nature of your project depends on what you select in the new xtext project wizard"}],"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693841574,"creation_date":1693840733,"question_id":77038957,"body_markdown":"I have xtext language server project configured to build with maven. With the default dependencies, the project build is working fine with\r\n\r\n```bash\r\nmvn clean install -U -Dmaven.test.skip=true\r\n```\r\nBut now I need to add [commons-math3](https://mvnrepository.com/artifact/org.apache.commons/commons-math3) as a dependency. I have added the following to xtext&#39;s pom.xml\r\n```xml\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-math3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.6.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n```\r\nWhen I run the above maven command, I see that the jar files are downloaded in `~/.m2/repositories` folder\r\n```bash\r\n./org/apache/commons/commons-math3\r\n./org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.pom\r\n./org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar.sha1\r\n./org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.pom.sha1\r\n./org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar\r\n```\r\nBut when I try to use it in my code, the imports are not resolved:\r\n```java\r\nimport org.apache.commons.math3.geometry.euclidean.threed.Rotation;\r\nimport org.apache.commons.math3.geometry.euclidean.threed.RotationOrder;\r\nimport org.apache.commons.math3.geometry.euclidean.threed.Vector3D;\r\n```\r\nI need to &quot;search repositories &quot;org.apache.commons.math3.geometry.euclidean.threed&#39;&quot; and select the found artifact to the target platform (though I am not sure what does this actually do -- `git status` does not show changes in any of the files). \r\n[![enter image description here][1]][1]\r\n\r\nAfter this, I need to add the package to `MANIFEST.MF` file\r\n\r\n```\r\nRequire-Bundle: org.apache.commons.math3;bundle-version=&quot;3.6.1&quot;\r\n...\r\nImport-Package: org.apache.commons.math3;bundle-version=&quot;3.6.1&quot;\r\n```\r\nAfter this I am able to run the IDE project from Eclipse with &quot;run as Eclipse application&quot;, and everything works as expected. But at this stage if I run the maven command, I get the error:\r\n```bash\r\n[ERROR] Cannot resolve project dependencies:\r\n[ERROR]   Software being installed: com.example.xtext 1.0.0.qualifier\r\n[ERROR]   Missing requirement: org.example.xtext 1.0.0.qualifier requires &#39;osgi.bundle; org.apache.commons.math3 3.6.1&#39; but it could not be found\r\n```\r\nDo I need to add `&lt;repository&gt;` in pom.xml? But the jar is downloaded, meaning it has been properly located. Or am I missing something in the `&lt;build&gt;` stage in pom.xml? \r\n\r\n**Edit 1:** If I start with a clean maven project (without xtext), adding the dependency works without any additional steps. So some configuration in xtext is not allowing the dependency to be found.\r\n\r\n**Edit 2:** In some old project I found that the external dependencies have be installed in `~/.m2/repository/p2/osgi/bundle/` folder. Is that the only way for a dependency to be found?\r\n\r\n  [1]: https://i.stack.imgur.com/sWVqV.png","title":"Add commons-math3 dependency to xtext maven project","body":"<p>I have xtext language server project configured to build with maven. With the default dependencies, the project build is working fine with</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn clean install -U -Dmaven.test.skip=true\n</code></pre>\n<p>But now I need to add <a href=\"https://mvnrepository.com/artifact/org.apache.commons/commons-math3\" rel=\"nofollow noreferrer\">commons-math3</a> as a dependency. I have added the following to xtext's pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-math3&lt;/artifactId&gt;\n            &lt;version&gt;3.6.1&lt;/version&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>When I run the above maven command, I see that the jar files are downloaded in <code>~/.m2/repositories</code> folder</p>\n<pre class=\"lang-bash prettyprint-override\"><code>./org/apache/commons/commons-math3\n./org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.pom\n./org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar.sha1\n./org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.pom.sha1\n./org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar\n</code></pre>\n<p>But when I try to use it in my code, the imports are not resolved:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.commons.math3.geometry.euclidean.threed.Rotation;\nimport org.apache.commons.math3.geometry.euclidean.threed.RotationOrder;\nimport org.apache.commons.math3.geometry.euclidean.threed.Vector3D;\n</code></pre>\n<p>I need to &quot;search repositories &quot;org.apache.commons.math3.geometry.euclidean.threed'&quot; and select the found artifact to the target platform (though I am not sure what does this actually do -- <code>git status</code> does not show changes in any of the files).\n<a href=\"https://i.stack.imgur.com/sWVqV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sWVqV.png\" alt=\"enter image description here\" /></a></p>\n<p>After this, I need to add the package to <code>MANIFEST.MF</code> file</p>\n<pre><code>Require-Bundle: org.apache.commons.math3;bundle-version=&quot;3.6.1&quot;\n...\nImport-Package: org.apache.commons.math3;bundle-version=&quot;3.6.1&quot;\n</code></pre>\n<p>After this I am able to run the IDE project from Eclipse with &quot;run as Eclipse application&quot;, and everything works as expected. But at this stage if I run the maven command, I get the error:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>[ERROR] Cannot resolve project dependencies:\n[ERROR]   Software being installed: com.example.xtext 1.0.0.qualifier\n[ERROR]   Missing requirement: org.example.xtext 1.0.0.qualifier requires 'osgi.bundle; org.apache.commons.math3 3.6.1' but it could not be found\n</code></pre>\n<p>Do I need to add <code>&lt;repository&gt;</code> in pom.xml? But the jar is downloaded, meaning it has been properly located. Or am I missing something in the <code>&lt;build&gt;</code> stage in pom.xml?</p>\n<p><strong>Edit 1:</strong> If I start with a clean maven project (without xtext), adding the dependency works without any additional steps. So some configuration in xtext is not allowing the dependency to be found.</p>\n<p><strong>Edit 2:</strong> In some old project I found that the external dependencies have be installed in <code>~/.m2/repository/p2/osgi/bundle/</code> folder. Is that the only way for a dependency to be found?</p>\n"},{"tags":["java","spring-boot","logback","slf4j"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693086112,"post_id":76984804,"comment_id":135714308,"body_markdown":"It is very difficult to help you without any related information. Do you have a lot of dependencies in your build script? Can you try to find any .xml file in your project and dependencies to see the `line 43`?","body":"It is very difficult to help you without any related information. Do you have a lot of dependencies in your build script? Can you try to find any .xml file in your project and dependencies to see the <code>line 43</code>?"}],"answers":[{"tags":[],"owner":{"account_id":8149551,"reputation":11,"user_id":6137062,"display_name":"Alexander G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693841067,"creation_date":1693841054,"answer_id":77038991,"question_id":76984804,"body_markdown":"I had the same problem. To solve the problem, just set the &quot;name&quot;-Tag for your appender in the resources/logback.xml. (line 43) There might be something like \r\n\r\n    &lt;appender class=&quot;...&quot;&gt;\r\n\r\nI still don&#39;t understand what exactly changed in Spring and Logback making the name required","title":"logback error after upgrading springboot and java to latest version","body":"<p>I had the same problem. To solve the problem, just set the &quot;name&quot;-Tag for your appender in the resources/logback.xml. (line 43) There might be something like</p>\n<pre><code>&lt;appender class=&quot;...&quot;&gt;\n</code></pre>\n<p>I still don't understand what exactly changed in Spring and Logback making the name required</p>\n"}],"owner":{"account_id":15180363,"reputation":1087,"user_id":10953785,"display_name":"user190245"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693841067,"creation_date":1693083061,"question_id":76984804,"body_markdown":"After upgrading springboot to 3.0.7 version and java to 17 in the project, following error started appearing, though the project is working fine before the upgrade. \r\n\r\n```\r\nLogging system failed to initialize using configuration from &#39;null&#39;\r\njava.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in ch.qos.logback.core.joran.action.AppenderAction - Missing attribute [name] in element [appender] near line 43\r\nERROR in ch.qos.logback.classic.AsyncAppender[LOGSTASH] - No attached appenders found.\r\n```\r\n\r\nI tried many ways to include and exclude slf4j/log4j dependencies but the issue persists.","title":"logback error after upgrading springboot and java to latest version","body":"<p>After upgrading springboot to 3.0.7 version and java to 17 in the project, following error started appearing, though the project is working fine before the upgrade.</p>\n<pre><code>Logging system failed to initialize using configuration from 'null'\njava.lang.IllegalStateException: Logback configuration error detected: \nERROR in ch.qos.logback.core.joran.action.AppenderAction - Missing attribute [name] in element [appender] near line 43\nERROR in ch.qos.logback.classic.AsyncAppender[LOGSTASH] - No attached appenders found.\n</code></pre>\n<p>I tried many ways to include and exclude slf4j/log4j dependencies but the issue persists.</p>\n"},{"tags":["java","spotbugs"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693840094,"creation_date":1693840094,"answer_id":77038893,"question_id":77038859,"body_markdown":"Example 1: `connectAndBind` probably takes an `int`, not an `Integer`, so Spotbugs is correct.\r\n\r\nExample 2 &amp; 3: Spotbugs doesn&#39;t know that both `gateway.getPort()` invocations return the same value. Fix it by using `Integer port = gateway.getPort();`, a null check, then just `port` everywhere else, and the warning should go away. That&#39;s basically what you&#39;ve done in your last example.\r\n\r\n","title":"SpotBugs NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE triggers in strange cases","body":"<p>Example 1: <code>connectAndBind</code> probably takes an <code>int</code>, not an <code>Integer</code>, so Spotbugs is correct.</p>\n<p>Example 2 &amp; 3: Spotbugs doesn't know that both <code>gateway.getPort()</code> invocations return the same value. Fix it by using <code>Integer port = gateway.getPort();</code>, a null check, then just <code>port</code> everywhere else, and the warning should go away. That's basically what you've done in your last example.</p>\n"}],"owner":{"account_id":29359839,"reputation":13,"user_id":22494808,"display_name":"Ilia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77038893,"answer_count":1,"score":0,"last_activity_date":1693840094,"creation_date":1693839862,"question_id":77038859,"body_markdown":"Have a problem with SpotBugs &quot;Possible null pointer dereference due to return value of called method (NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE)&quot;.&lt;br&gt;\r\nWith Lombok getter:&lt;br&gt;\r\n```\r\n@Generated\r\npublic @Nullable Integer getPort() {\r\n    return this.port;\r\n}\r\n```\r\nWhen i try to get value from object using getPort() and produce it to another method where it can&#39;t be null spotbugs shows an error &quot;NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE&quot; in strange cases.&lt;br&gt;\r\n\r\nExample 1.&lt;br&gt;\r\nOk here a value possible null.\r\n```\r\nsession.connectAndBind(gateway.getHost(), gateway.getPort()); // &lt;--- Error\r\n```\r\nExample 2.&lt;br&gt;\r\nGet same error on unboxing.\r\n```\r\nint port = gateway.getPort() != null ? gateway.getPort() : 0; // &lt;--- Error\r\nsession.connectAndBind(gateway.getHost(), port);\r\n```\r\nExample 3.&lt;br&gt;\r\nStill get error on unboxing.\r\n```\r\nint port = 0;\r\nif (gateway.getPort() != null) { // &lt;--- Error\r\n    port = gateway.getPort();\r\n}\r\nsession.connectAndBind(gateway.getHost(), port);\r\n```\r\nSo why i getting the error?&lt;br&gt;\r\nFind one case when veryfi pass with no errors. Code below.\r\n```\r\n// Pass\r\nInteger port1 = gateway.getPort();\r\nint port = port1 != null ? port1 : 0;\r\nsession.connectAndBind(gateway.getHost(), port);\r\n```\r\n","title":"SpotBugs NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE triggers in strange cases","body":"<p>Have a problem with SpotBugs &quot;Possible null pointer dereference due to return value of called method (NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE)&quot;.<br>\nWith Lombok getter:<br></p>\n<pre><code>@Generated\npublic @Nullable Integer getPort() {\n    return this.port;\n}\n</code></pre>\n<p>When i try to get value from object using getPort() and produce it to another method where it can't be null spotbugs shows an error &quot;NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE&quot; in strange cases.<br></p>\n<p>Example 1.<br>\nOk here a value possible null.</p>\n<pre><code>session.connectAndBind(gateway.getHost(), gateway.getPort()); // &lt;--- Error\n</code></pre>\n<p>Example 2.<br>\nGet same error on unboxing.</p>\n<pre><code>int port = gateway.getPort() != null ? gateway.getPort() : 0; // &lt;--- Error\nsession.connectAndBind(gateway.getHost(), port);\n</code></pre>\n<p>Example 3.<br>\nStill get error on unboxing.</p>\n<pre><code>int port = 0;\nif (gateway.getPort() != null) { // &lt;--- Error\n    port = gateway.getPort();\n}\nsession.connectAndBind(gateway.getHost(), port);\n</code></pre>\n<p>So why i getting the error?<br>\nFind one case when veryfi pass with no errors. Code below.</p>\n<pre><code>// Pass\nInteger port1 = gateway.getPort();\nint port = port1 != null ? port1 : 0;\nsession.connectAndBind(gateway.getHost(), port);\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1693840262,"post_id":77038891,"comment_id":135809819,"body_markdown":"Typically the JDK compiler level of a maven project is set by the `pom` and the `maven.compiler.target` and `maven.compiler.source` properties.","body":"Typically the JDK compiler level of a maven project is set by the <code>pom</code> and the <code>maven.compiler.target</code> and <code>maven.compiler.source</code> properties."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1693841945,"post_id":77038891,"comment_id":135810123,"body_markdown":"Yes, I know what specifies it in the POM. (And in fact you are only half-right in your description of setting the JDK version in the POM; see https://stackoverflow.com/a/65655542). And I know what the JDK version _should_ be set to. This question is asking how to verify what the JDK version _actually is set to_ in Eclipse for a particular project.","body":"Yes, I know what specifies it in the POM. (And in fact you are only half-right in your description of setting the JDK version in the POM; see <a href=\"https://stackoverflow.com/a/65655542\">stackoverflow.com/a/65655542</a>). And I know what the JDK version <i>should</i> be set to. This question is asking how to verify what the JDK version <i>actually is set to</i> in Eclipse for a particular project."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1693842958,"post_id":77038891,"comment_id":135810290,"body_markdown":"`System.out.printf(&quot;Vendor: %s, Version: %s%n&quot;, System.getProperty(&quot;java.vendor&quot;), System.getProperty(&quot;java.version&quot;));`","body":"<code>System.out.printf(&quot;Vendor: %s, Version: %s%n&quot;, System.getProperty(&quot;java.vendor&quot;), System.getProperty(&quot;java.version&quot;));</code>"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1693860336,"post_id":77038891,"comment_id":135812750,"body_markdown":"The JRE that you&#39;re *compiling* against will be part of the Build Path, usually visible in the Package and Project Explorers if you start expanding the structure under the project. The one you&#39;re *running* with is going to vary with the Run Configuration. They don&#39;t have to be the same. Maybe you don&#39;t want them to be, who knows.","body":"The JRE that you&#39;re <i>compiling</i> against will be part of the Build Path, usually visible in the Package and Project Explorers if you start expanding the structure under the project. The one you&#39;re <i>running</i> with is going to vary with the Run Configuration. They don&#39;t have to be the same. Maybe you don&#39;t want them to be, who knows."}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693840066,"creation_date":1693840066,"question_id":77038891,"body_markdown":"I&#39;m using Eclipse EE 2023-09 RC1 on Windows 10 with a Maven project imported using m2e. How can I easily check to see what JDK version Eclipse+m2e is using for a particular project?\r\n\r\nI know that if I run a JUnit unit test e.g. `MyTest` using `Ctrl+F11`, Eclipse will create a run configuration for that unit test class. If I then edit that new run configuration, I can see under the &quot;JRE&quot; tab which JDK version the project is using by looking at the &quot;Project execution environment&quot;. But surely there is an easier way.\r\n\r\nI&#39;ve looked under the obvious project properties (`Alt+Enter` in Project Explorer, or right-click on the project and and select &quot;Properties&quot;), but I see nothing about the Java version the project is using. I don&#39;t necessarily want to change it—there are just times I want to quickly confirm what it is. Am I missing it somewhere?","title":"How to see project JDK version in Eclipse using m2e","body":"<p>I'm using Eclipse EE 2023-09 RC1 on Windows 10 with a Maven project imported using m2e. How can I easily check to see what JDK version Eclipse+m2e is using for a particular project?</p>\n<p>I know that if I run a JUnit unit test e.g. <code>MyTest</code> using <code>Ctrl+F11</code>, Eclipse will create a run configuration for that unit test class. If I then edit that new run configuration, I can see under the &quot;JRE&quot; tab which JDK version the project is using by looking at the &quot;Project execution environment&quot;. But surely there is an easier way.</p>\n<p>I've looked under the obvious project properties (<code>Alt+Enter</code> in Project Explorer, or right-click on the project and and select &quot;Properties&quot;), but I see nothing about the Java version the project is using. I don't necessarily want to change it—there are just times I want to quickly confirm what it is. Am I missing it somewhere?</p>\n"},{"tags":["java","jboss","wildfly"],"comments":[{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":0,"creation_date":1693841295,"post_id":77038886,"comment_id":135810010,"body_markdown":"Could you please define your versions ? You are talking about JavaEE 7 while WildFly has moved on to  Jakarta EE 10 and JBoss EAP 7 is Java EE 8.","body":"Could you please define your versions ? You are talking about JavaEE 7 while WildFly has moved on to  Jakarta EE 10 and JBoss EAP 7 is Java EE 8."},{"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"score":0,"creation_date":1693841695,"post_id":77038886,"comment_id":135810079,"body_markdown":"@ehsavoie sure, production uses Java8, JavaEE-api of version7,  WildFly 9/10. on my local I installed wildfly 16.","body":"@ehsavoie sure, production uses Java8, JavaEE-api of version7,  WildFly 9/10. on my local I installed wildfly 16."},{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":0,"creation_date":1693901084,"post_id":77038886,"comment_id":135816852,"body_markdown":"Your issue looks like https://issues.redhat.com/browse/RESTEASY-1238 Not sure if there is a workaround apart from upgrading which is something I can encourage you to do as the server is almost 10 years old","body":"Your issue looks like <a href=\"https://issues.redhat.com/browse/RESTEASY-1238\" rel=\"nofollow noreferrer\">issues.redhat.com/browse/RESTEASY-1238</a> Not sure if there is a workaround apart from upgrading which is something I can encourage you to do as the server is almost 10 years old"},{"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"score":0,"creation_date":1693919976,"post_id":77038886,"comment_id":135820782,"body_markdown":"@ehsavoie thank you very much for recommendations, but seems, that problem is in application, not in jboss. after restart errors disapeared, so it seems to be memory leak in application","body":"@ehsavoie thank you very much for recommendations, but seems, that problem is in application, not in jboss. after restart errors disapeared, so it seems to be memory leak in application"}],"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693840047,"creation_date":1693840047,"question_id":77038886,"body_markdown":" In my project(Wildfly and Jboss based) I started getting errors on requests. I took production database and branch and tried to reproduce it locally, but loally everything is fine. After googling I found that in similar cases people solve this problem by adding `provided` scope line in dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI already have this scope in javax dependency in my pom, so this does not work for me. I&#39;m confused - where do go and what to check. Maybe anybody will have idea?\r\nHere is typical stack-trace of request error now:\r\n\r\n       2023-09-04 16:35:31,438 ERROR [io.undertow.request] (Thread-66357) UT005023: Exception handling request to /api/invoices/1: org.jboss.resteasy.spi.UnhandledException: java.lang.InternalError: java.io.IOException: Stream closed\r\n        \tat org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:78)\r\n        \tat org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:222)\r\n        \tat org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:193)\r\n        \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:455)\r\n        \tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:229)\r\n        \tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:135)\r\n        \tat org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:355)\r\n        \tat org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:138)\r\n        \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:215)\r\n        \tat org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:227)\r\n        \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\r\n        \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)\r\n        \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:791)\r\n        \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\r\n        \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n        \tat io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\r\n        \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n        \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n        \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\r\n        \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n        \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n        \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n        \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n        \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n        \tat io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n        \tat io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n        \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n        \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        \tat org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\r\n        \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n        \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)\r\n        \tat io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)\r\n        \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)\r\n        \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\r\n        \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n        \tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n        \tat org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n        \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)\r\n        \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)\r\n        \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)\r\n        \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)\r\n        \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)\r\n        \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\r\n        \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)\r\n        \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:360)\r\n        \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)\r\n        \tat datadog.trace.instrumentation.undertow.UndertowRunnableWrapper.run(UndertowRunnableWrapper.java:26)\r\n        \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        \tat org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        \tat org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)\r\n        \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)\r\n        \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)\r\n        \tat java.lang.Thread.run(Thread.java:750)","title":"How to fix undertow error UT005023 on Jboss server?","body":"<p>In my project(Wildfly and Jboss based) I started getting errors on requests. I took production database and branch and tried to reproduce it locally, but loally everything is fine. After googling I found that in similar cases people solve this problem by adding <code>provided</code> scope line in dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax&lt;/groupId&gt;\n    &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n    &lt;version&gt;7.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I already have this scope in javax dependency in my pom, so this does not work for me. I'm confused - where do go and what to check. Maybe anybody will have idea?\nHere is typical stack-trace of request error now:</p>\n<pre><code>   2023-09-04 16:35:31,438 ERROR [io.undertow.request] (Thread-66357) UT005023: Exception handling request to /api/invoices/1: org.jboss.resteasy.spi.UnhandledException: java.lang.InternalError: java.io.IOException: Stream closed\n        at org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:78)\n        at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:222)\n        at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:193)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:455)\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:229)\n        at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:135)\n        at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:355)\n        at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:138)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:215)\n        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:227)\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:791)\n        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n        at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n        at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\n        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n        at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\n        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)\n        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\n        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n        at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)\n        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)\n        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)\n        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\n        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:360)\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)\n        at datadog.trace.instrumentation.undertow.UndertowRunnableWrapper.run(UndertowRunnableWrapper.java:26)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)\n        at java.lang.Thread.run(Thread.java:750)\n</code></pre>\n"},{"tags":["java","ssl","client","netty","server"],"answers":[{"tags":[],"owner":{"account_id":4963911,"reputation":726,"user_id":3993966,"display_name":"Scott Mitchell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415159104,"creation_date":1415159104,"answer_id":26749363,"question_id":26746332,"body_markdown":"Can you explain why you are initializing your server `SSLContext` with a trust factory but then not supplying any key factory to the client `SSLContext` initialization method?\r\n\r\nAre you attempting to do mutual authentication?  If so you will also need to call `SSLEngine.setNeedClientAuth(true)`.\r\n\r\nHave you seen [SslContext.java](https://github.com/netty/netty/blob/master/handler/src/main/java/io/netty/handler/ssl/SslContext.java)?  This may be able to simplify your initialization process and alleviate the need for you to build your own `SSLContext` objects.  If your certificates are X509 and your keys are in PKCS#8 format then you don&#39;t have to worry about trust manager or key managers because [SslContext](https://github.com/netty/netty/blob/master/handler/src/main/java/io/netty/handler/ssl/SslContext.java) can read these and initialize everything for you (via `newClientContext` and `newServerContext`).  These interfaces also support mutual authentication if needed.","title":"Netty SSL: Chat Client example with custom keystore is unable to accept multiple connections","body":"<p>Can you explain why you are initializing your server <code>SSLContext</code> with a trust factory but then not supplying any key factory to the client <code>SSLContext</code> initialization method?</p>\n\n<p>Are you attempting to do mutual authentication?  If so you will also need to call <code>SSLEngine.setNeedClientAuth(true)</code>.</p>\n\n<p>Have you seen <a href=\"https://github.com/netty/netty/blob/master/handler/src/main/java/io/netty/handler/ssl/SslContext.java\" rel=\"nofollow\">SslContext.java</a>?  This may be able to simplify your initialization process and alleviate the need for you to build your own <code>SSLContext</code> objects.  If your certificates are X509 and your keys are in PKCS#8 format then you don't have to worry about trust manager or key managers because <a href=\"https://github.com/netty/netty/blob/master/handler/src/main/java/io/netty/handler/ssl/SslContext.java\" rel=\"nofollow\">SslContext</a> can read these and initialize everything for you (via <code>newClientContext</code> and <code>newServerContext</code>).  These interfaces also support mutual authentication if needed.</p>\n"},{"tags":[],"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670405185,"creation_date":1670405185,"answer_id":74714347,"question_id":26746332,"body_markdown":"An `SSLEngine` object is a statefull object, it cannot be shared between multiple connections. Inside your server code, you are sharing this object between multiple connections, so the data the new client sends does not match the state on the server, causing weird cryptic errors.\r\n\r\nInside the initizer, change it to accept an SSLContext object, and call the create method manually","title":"Netty SSL: Chat Client example with custom keystore is unable to accept multiple connections","body":"<p>An <code>SSLEngine</code> object is a statefull object, it cannot be shared between multiple connections. Inside your server code, you are sharing this object between multiple connections, so the data the new client sends does not match the state on the server, causing weird cryptic errors.</p>\n<p>Inside the initizer, change it to accept an SSLContext object, and call the create method manually</p>\n"}],"owner":{"account_id":40156,"reputation":33,"user_id":116261,"display_name":"JDR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10876,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693839740,"creation_date":1415140389,"question_id":26746332,"body_markdown":"I&#39;ve been playing with Netty&#39;s (version 4.0.24) SecureChatServer examples and i&#39;ve plugged in my own keystore (based on the answers found on the following two posts [post 1](https://stackoverflow.com/questions/10509358/using-ssl-certificates-on-netty) and [post2](https://stackoverflow.com/questions/9573894/set-up-netty-with-2-way-ssl-handsake-client-and-server-certificate).  See code snippets below.\r\n\r\nThe issue i&#39;m seeing is that everything works as expected when I run one instance of the client, but when i try to launch more client instances i get exceptions on both the server and client (see below for exception text) and at that point the server stops responding.\r\n\r\nI&#39;m hoping someone here could shed some light into what i&#39;m doing wrong.\r\n\r\n\r\nThis is the class that handles loading my keyStore and creating SSLContext instances used by both client/server (for obvious reasons i&#39;ve omitted my keystore values):\r\n\r\n    package com.test.securechat;\r\n    \r\n    import java.io.ByteArrayInputStream;\r\n    import java.security.KeyStore;\r\n    import javax.net.ssl.KeyManagerFactory;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.TrustManagerFactory;\r\n    \r\n    import com.test.util.Key;\r\n    import com.pragmafs.util.encryption.Base64Coder;\r\n    \r\n    /**\r\n     * Creates SSLContext instances from a static (String representation) keystore\r\n     * See http://maxrohde.com/2013/09/07/setting-up-ssl-with-netty/\r\n     */\r\n    public class SslContextFactory {\r\n        private static final String PROTOCOL = &quot;TLS&quot;;\r\n        private static final SSLContext SERVER_CONTEXT;\r\n        private static final SSLContext CLIENT_CONTEXT;\r\n        private static final TrustManagerFactory trustManagerFactory;\r\n    \r\n        static {\r\n    \r\n            SSLContext serverContext = null;\r\n            SSLContext clientContext = null;\r\n    \r\n            try {\r\n    \r\n                KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n                ks.load(new ByteArrayInputStream(Base64Coder.decode(Key.SSL.getKey())), Base64Coder.decodeString(Key.SSL.getPwd()).toCharArray());\r\n    \r\n                // Set up key manager factory to use our key store\r\n                KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n                kmf.init(ks, Base64Coder.decodeString(Key.SSL.getPwd()).toCharArray());\r\n    \r\n                // truststore\r\n                KeyStore ts = KeyStore.getInstance(&quot;JKS&quot;);\r\n                ts.load(new ByteArrayInputStream(Base64Coder.decode(Key.SSL.getKey())), Base64Coder.decodeString(Key.SSL.getPwd()).toCharArray());\r\n    \r\n                // set up trust manager factory to use our trust store\r\n                trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n                trustManagerFactory.init(ts);\r\n    \r\n                // Initialize the SSLContext to work with our key managers.\r\n                serverContext = SSLContext.getInstance(PROTOCOL);\r\n                serverContext.init(kmf.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);\r\n    \r\n                clientContext = SSLContext.getInstance(PROTOCOL);\r\n                clientContext.init(null, trustManagerFactory.getTrustManagers(), null);\r\n            } catch (Exception e) {\r\n                throw new Error(&quot;Failed to initialize the SSLContext&quot;, e);\r\n            }\r\n    \r\n            SERVER_CONTEXT = serverContext;\r\n            CLIENT_CONTEXT = clientContext;\r\n        }\r\n    \r\n    \r\n        public static SSLContext getServerContext() {\r\n            return SERVER_CONTEXT;\r\n        }\r\n    \r\n        public static SSLContext getClientContext() {\r\n            return CLIENT_CONTEXT;\r\n        }\r\n    \r\n        public static TrustManagerFactory getTrustManagerFactory() {\r\n            return trustManagerFactory;\r\n        }\r\n    \r\n        private SslContextFactory() {\r\n            // Unused\r\n        }\r\n    }\r\n\r\n\r\nThis is the server code:\r\n\r\n    package com.test.securechat;\r\n    \r\n    import java.net.InetAddress;\r\n    import javax.net.ssl.SSLEngine;\r\n    \r\n    import io.netty.bootstrap.ServerBootstrap;\r\n    import io.netty.channel.Channel;\r\n    import io.netty.channel.ChannelHandlerContext;\r\n    import io.netty.channel.ChannelInitializer;\r\n    import io.netty.channel.ChannelPipeline;\r\n    import io.netty.channel.EventLoopGroup;\r\n    import io.netty.channel.SimpleChannelInboundHandler;\r\n    import io.netty.channel.group.ChannelGroup;\r\n    import io.netty.channel.group.DefaultChannelGroup;\r\n    import io.netty.channel.nio.NioEventLoopGroup;\r\n    import io.netty.channel.socket.SocketChannel;\r\n    import io.netty.channel.socket.nio.NioServerSocketChannel;\r\n    import io.netty.handler.codec.DelimiterBasedFrameDecoder;\r\n    import io.netty.handler.codec.Delimiters;\r\n    import io.netty.handler.codec.string.StringDecoder;\r\n    import io.netty.handler.codec.string.StringEncoder;\r\n    import io.netty.handler.logging.LogLevel;\r\n    import io.netty.handler.logging.LoggingHandler;\r\n    import io.netty.handler.ssl.SslHandler;\r\n    import io.netty.util.concurrent.Future;\r\n    import io.netty.util.concurrent.GenericFutureListener;\r\n    import io.netty.util.concurrent.GlobalEventExecutor;\r\n    \r\n    \r\n    /**\r\n     * Simple SSL chat server\r\n     */\r\n    public final class SecureChatServer {\r\n    \r\n        static final int PORT = Integer.parseInt(System.getProperty(&quot;port&quot;, &quot;8992&quot;));\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n    \r\n            SSLEngine sslEngine = SslContextFactory.getServerContext().createSSLEngine();\r\n            sslEngine.setUseClientMode(false);\r\n    \r\n            EventLoopGroup bossGroup = new NioEventLoopGroup(1);\r\n            EventLoopGroup workerGroup = new NioEventLoopGroup();\r\n    \r\n            try {\r\n                ServerBootstrap b = new ServerBootstrap();\r\n                b.group(bossGroup, workerGroup)\r\n                        .channel(NioServerSocketChannel.class)\r\n                        .handler(new LoggingHandler(LogLevel.INFO))\r\n                        .childHandler(new SecureChatServerInitializer(sslEngine));\r\n    \r\n                b.bind(PORT).sync().channel().closeFuture().sync();\r\n            } finally {\r\n                bossGroup.shutdownGracefully();\r\n                workerGroup.shutdownGracefully();\r\n            }\r\n        }\r\n    \r\n        private static class SecureChatServerInitializer extends ChannelInitializer&lt;SocketChannel&gt; {\r\n    \r\n            private final SSLEngine sslCtx;\r\n    \r\n            public SecureChatServerInitializer(SSLEngine sslCtx) {\r\n                this.sslCtx = sslCtx;\r\n            }\r\n    \r\n            @Override\r\n            public void initChannel(SocketChannel ch) throws Exception {\r\n                ChannelPipeline pipeline = ch.pipeline();\r\n    \r\n                pipeline.addLast(new SslHandler(sslCtx));\r\n                pipeline.addLast(new DelimiterBasedFrameDecoder(8192, Delimiters.lineDelimiter()));\r\n                pipeline.addLast(new StringDecoder());\r\n                pipeline.addLast(new StringEncoder());\r\n    \r\n                // and then business logic.\r\n                pipeline.addLast(new SecureChatServerHandler());\r\n            }\r\n        }\r\n    \r\n        private static class SecureChatServerHandler extends SimpleChannelInboundHandler&lt;String&gt; {\r\n    \r\n            static final ChannelGroup channels = new DefaultChannelGroup(GlobalEventExecutor.INSTANCE);\r\n    \r\n            @Override\r\n            public void channelActive(final ChannelHandlerContext ctx) {\r\n                // Once session is secured, send a greeting and register the channel to the global channel\r\n                // list so the channel received the messages from others.\r\n                ctx.pipeline().get(SslHandler.class).handshakeFuture().addListener(\r\n                        new GenericFutureListener&lt;Future&lt;Channel&gt;&gt;() {\r\n                            @Override\r\n                            public void operationComplete(Future&lt;Channel&gt; future) throws Exception {\r\n                                ctx.writeAndFlush(\r\n                                        &quot;Welcome to &quot; + InetAddress.getLocalHost().getHostName() + &quot; secure chat service!\\n&quot;);\r\n                                ctx.writeAndFlush(\r\n                                        &quot;Your session is protected by &quot; +\r\n                                                ctx.pipeline().get(SslHandler.class).engine().getSession().getCipherSuite() +\r\n                                                &quot; cipher suite.\\n&quot;);\r\n    \r\n                                channels.add(ctx.channel());\r\n                            }\r\n                        });\r\n            }\r\n    \r\n            @Override\r\n            public void channelRead0(ChannelHandlerContext ctx, String msg) throws Exception {\r\n                // Send the received message to all channels but the current one.\r\n                for (Channel c : channels) {\r\n                    if (c != ctx.channel()) {\r\n                        c.writeAndFlush(&quot;[&quot; + ctx.channel().remoteAddress() + &quot;] &quot; + msg + &#39;\\n&#39;);\r\n                    } else {\r\n                        c.writeAndFlush(&quot;[you] &quot; + msg + &#39;\\n&#39;);\r\n                    }\r\n                }\r\n    \r\n                // Close the connection if the client has sent &#39;bye&#39;.\r\n                if (&quot;bye&quot;.equals(msg.toLowerCase())) {\r\n                    ctx.close();\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\r\n                cause.printStackTrace();\r\n                ctx.close();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nClient code:\r\n\r\n    package com.test.securechat;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.InputStreamReader;\r\n    import javax.net.ssl.SSLEngine;\r\n    \r\n    import io.netty.bootstrap.Bootstrap;\r\n    import io.netty.channel.Channel;\r\n    import io.netty.channel.ChannelFuture;\r\n    import io.netty.channel.ChannelHandlerContext;\r\n    import io.netty.channel.ChannelInitializer;\r\n    import io.netty.channel.ChannelPipeline;\r\n    import io.netty.channel.EventLoopGroup;\r\n    import io.netty.channel.SimpleChannelInboundHandler;\r\n    import io.netty.channel.nio.NioEventLoopGroup;\r\n    import io.netty.channel.socket.SocketChannel;\r\n    import io.netty.channel.socket.nio.NioSocketChannel;\r\n    import io.netty.handler.codec.DelimiterBasedFrameDecoder;\r\n    import io.netty.handler.codec.Delimiters;\r\n    import io.netty.handler.codec.string.StringDecoder;\r\n    import io.netty.handler.codec.string.StringEncoder;\r\n    import io.netty.handler.ssl.SslHandler;\r\n    \r\n    /**\r\n     * Simple SSL chat client\r\n     */\r\n    public final class SecureChatClient {\r\n    \r\n        static final String HOST = System.getProperty(&quot;host&quot;, &quot;127.0.0.1&quot;);\r\n        static final int PORT = Integer.parseInt(System.getProperty(&quot;port&quot;, &quot;8992&quot;));\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n    \r\n            SSLEngine engine = SslContextFactory.getClientContext().createSSLEngine();\r\n            engine.setUseClientMode(true);\r\n    \r\n            EventLoopGroup group = new NioEventLoopGroup();\r\n            try {\r\n                Bootstrap b = new Bootstrap();\r\n                b.group(group)\r\n                        .channel(NioSocketChannel.class)\r\n                        .handler(new SecureChatClientInitializer(engine));\r\n    \r\n                // Start the connection attempt.\r\n                Channel ch = b.connect(HOST, PORT).sync().channel();\r\n    \r\n                // Read commands from the stdin.\r\n                ChannelFuture lastWriteFuture = null;\r\n                BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\r\n                for (; ; ) {\r\n                    String line = in.readLine();\r\n                    if (line == null) {\r\n                        break;\r\n                    }\r\n    \r\n                    // Sends the received line to the server.\r\n                    lastWriteFuture = ch.writeAndFlush(line + &quot;\\r\\n&quot;);\r\n    \r\n                    // If user typed the &#39;bye&#39; command, wait until the server closes\r\n                    // the connection.\r\n                    if (&quot;bye&quot;.equals(line.toLowerCase())) {\r\n                        ch.closeFuture().sync();\r\n                        break;\r\n                    }\r\n                }\r\n    \r\n                // Wait until all messages are flushed before closing the channel.\r\n                if (lastWriteFuture != null) {\r\n                    lastWriteFuture.sync();\r\n                }\r\n            } finally {\r\n                // The connection is closed automatically on shutdown.\r\n                group.shutdownGracefully();\r\n            }\r\n        }\r\n    \r\n        private static class SecureChatClientInitializer extends ChannelInitializer&lt;SocketChannel&gt; {\r\n    \r\n            private final SSLEngine sslCtx;\r\n    \r\n            public SecureChatClientInitializer(SSLEngine sslCtx) {\r\n                this.sslCtx = sslCtx;\r\n            }\r\n    \r\n            @Override\r\n            public void initChannel(SocketChannel ch) throws Exception {\r\n                ChannelPipeline pipeline = ch.pipeline();\r\n    \r\n                // Add SSL handler first to encrypt and decrypt everything.\r\n                // In this example, we use a bogus certificate in the server side\r\n                // and accept any invalid certificates in the client side.\r\n                // You will need something more complicated to identify both\r\n                // and server in the real world.\r\n                //pipeline.addLast(sslCtx.newHandler(ch.alloc(), SecureChatClient.HOST, SecureChatClient.PORT));\r\n                pipeline.addLast(new SslHandler(sslCtx));\r\n    \r\n                // On top of the SSL handler, add the text line codec.\r\n                pipeline.addLast(new DelimiterBasedFrameDecoder(8192, Delimiters.lineDelimiter()));\r\n                pipeline.addLast(new StringDecoder());\r\n                pipeline.addLast(new StringEncoder());\r\n                //pipeline.addLast(new LoggingHandler(LogLevel.INFO));\r\n    \r\n    \r\n                // and then business logic.\r\n                pipeline.addLast(new SecureChatClientHandler());\r\n            }\r\n        }\r\n    \r\n        private static class SecureChatClientHandler extends SimpleChannelInboundHandler&lt;String&gt; {\r\n    \r\n            @Override\r\n            public void channelRead0(ChannelHandlerContext ctx, String msg) throws Exception {\r\n                System.err.println(msg);\r\n            }\r\n    \r\n            @Override\r\n            public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\r\n                cause.printStackTrace();\r\n                ctx.close();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nServer Exception: \r\n\r\n    INFO: [id: 0x5eb2ac7a, /0:0:0:0:0:0:0:0:8992] RECEIVED: [id: 0x7d7a7dca, /127.0.0.1:55932 =&gt; /127.0.0.1:8992]\r\n    io.netty.handler.codec.DecoderException: javax.net.ssl.SSLHandshakeException: ciphertext sanity check failed\r\n        at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:278)\r\n        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:147)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:333)\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:319)\r\n        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:787)\r\n        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:130)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:511)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:468)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:382)\r\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:354)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)\r\n        at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:137)\r\n        at java.lang.Thread.run(Thread.java:744)\r\n    Caused by: javax.net.ssl.SSLHandshakeException: ciphertext sanity check failed\r\n        at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\r\n        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1683)\r\n        at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:959)\r\n        at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)\r\n        at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)\r\n        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\r\n        at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:995)\r\n        at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:921)\r\n        at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:867)\r\n        at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:247)\r\n        ... 12 more\r\n    Caused by: javax.crypto.BadPaddingException: ciphertext sanity check failed\r\n        at sun.security.ssl.InputRecord.decrypt(InputRecord.java:147)\r\n        at sun.security.ssl.EngineInputRecord.decrypt(EngineInputRecord.java:192)\r\n        at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:953)\r\n        ... 19 more\r\n\r\nClient exception:\r\n\r\n    io.netty.handler.codec.DecoderException: javax.net.ssl.SSLException: Received fatal alert: &lt;UNKNOWN ALERT: 170&gt;\r\n        at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:278)\r\n        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:147)\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:333)\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:319)\r\n        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:787)\r\n        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:130)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:511)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:468)\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:382)\r\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:354)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)\r\n        at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:137)\r\n        at java.lang.Thread.run(Thread.java:744)\r\n    Caused by: javax.net.ssl.SSLException: Received fatal alert: &lt;UNKNOWN ALERT: 170&gt;\r\n        at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)\r\n        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1619)\r\n        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1587)\r\n        at sun.security.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:1756)\r\n        at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1060)\r\n        at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)\r\n        at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)\r\n        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\r\n        at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:995)\r\n        at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:921)\r\n        at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:867)\r\n        at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:247)\r\n        ... 12 more","title":"Netty SSL: Chat Client example with custom keystore is unable to accept multiple connections","body":"<p>I've been playing with Netty's (version 4.0.24) SecureChatServer examples and i've plugged in my own keystore (based on the answers found on the following two posts <a href=\"https://stackoverflow.com/questions/10509358/using-ssl-certificates-on-netty\">post 1</a> and <a href=\"https://stackoverflow.com/questions/9573894/set-up-netty-with-2-way-ssl-handsake-client-and-server-certificate\">post2</a>.  See code snippets below.</p>\n\n<p>The issue i'm seeing is that everything works as expected when I run one instance of the client, but when i try to launch more client instances i get exceptions on both the server and client (see below for exception text) and at that point the server stops responding.</p>\n\n<p>I'm hoping someone here could shed some light into what i'm doing wrong.</p>\n\n<p>This is the class that handles loading my keyStore and creating SSLContext instances used by both client/server (for obvious reasons i've omitted my keystore values):</p>\n\n<pre><code>package com.test.securechat;\n\nimport java.io.ByteArrayInputStream;\nimport java.security.KeyStore;\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManagerFactory;\n\nimport com.test.util.Key;\nimport com.pragmafs.util.encryption.Base64Coder;\n\n/**\n * Creates SSLContext instances from a static (String representation) keystore\n * See http://maxrohde.com/2013/09/07/setting-up-ssl-with-netty/\n */\npublic class SslContextFactory {\n    private static final String PROTOCOL = \"TLS\";\n    private static final SSLContext SERVER_CONTEXT;\n    private static final SSLContext CLIENT_CONTEXT;\n    private static final TrustManagerFactory trustManagerFactory;\n\n    static {\n\n        SSLContext serverContext = null;\n        SSLContext clientContext = null;\n\n        try {\n\n            KeyStore ks = KeyStore.getInstance(\"JKS\");\n            ks.load(new ByteArrayInputStream(Base64Coder.decode(Key.SSL.getKey())), Base64Coder.decodeString(Key.SSL.getPwd()).toCharArray());\n\n            // Set up key manager factory to use our key store\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n            kmf.init(ks, Base64Coder.decodeString(Key.SSL.getPwd()).toCharArray());\n\n            // truststore\n            KeyStore ts = KeyStore.getInstance(\"JKS\");\n            ts.load(new ByteArrayInputStream(Base64Coder.decode(Key.SSL.getKey())), Base64Coder.decodeString(Key.SSL.getPwd()).toCharArray());\n\n            // set up trust manager factory to use our trust store\n            trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n            trustManagerFactory.init(ts);\n\n            // Initialize the SSLContext to work with our key managers.\n            serverContext = SSLContext.getInstance(PROTOCOL);\n            serverContext.init(kmf.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);\n\n            clientContext = SSLContext.getInstance(PROTOCOL);\n            clientContext.init(null, trustManagerFactory.getTrustManagers(), null);\n        } catch (Exception e) {\n            throw new Error(\"Failed to initialize the SSLContext\", e);\n        }\n\n        SERVER_CONTEXT = serverContext;\n        CLIENT_CONTEXT = clientContext;\n    }\n\n\n    public static SSLContext getServerContext() {\n        return SERVER_CONTEXT;\n    }\n\n    public static SSLContext getClientContext() {\n        return CLIENT_CONTEXT;\n    }\n\n    public static TrustManagerFactory getTrustManagerFactory() {\n        return trustManagerFactory;\n    }\n\n    private SslContextFactory() {\n        // Unused\n    }\n}\n</code></pre>\n\n<p>This is the server code:</p>\n\n<pre><code>package com.test.securechat;\n\nimport java.net.InetAddress;\nimport javax.net.ssl.SSLEngine;\n\nimport io.netty.bootstrap.ServerBootstrap;\nimport io.netty.channel.Channel;\nimport io.netty.channel.ChannelHandlerContext;\nimport io.netty.channel.ChannelInitializer;\nimport io.netty.channel.ChannelPipeline;\nimport io.netty.channel.EventLoopGroup;\nimport io.netty.channel.SimpleChannelInboundHandler;\nimport io.netty.channel.group.ChannelGroup;\nimport io.netty.channel.group.DefaultChannelGroup;\nimport io.netty.channel.nio.NioEventLoopGroup;\nimport io.netty.channel.socket.SocketChannel;\nimport io.netty.channel.socket.nio.NioServerSocketChannel;\nimport io.netty.handler.codec.DelimiterBasedFrameDecoder;\nimport io.netty.handler.codec.Delimiters;\nimport io.netty.handler.codec.string.StringDecoder;\nimport io.netty.handler.codec.string.StringEncoder;\nimport io.netty.handler.logging.LogLevel;\nimport io.netty.handler.logging.LoggingHandler;\nimport io.netty.handler.ssl.SslHandler;\nimport io.netty.util.concurrent.Future;\nimport io.netty.util.concurrent.GenericFutureListener;\nimport io.netty.util.concurrent.GlobalEventExecutor;\n\n\n/**\n * Simple SSL chat server\n */\npublic final class SecureChatServer {\n\n    static final int PORT = Integer.parseInt(System.getProperty(\"port\", \"8992\"));\n\n    public static void main(String[] args) throws Exception {\n\n        SSLEngine sslEngine = SslContextFactory.getServerContext().createSSLEngine();\n        sslEngine.setUseClientMode(false);\n\n        EventLoopGroup bossGroup = new NioEventLoopGroup(1);\n        EventLoopGroup workerGroup = new NioEventLoopGroup();\n\n        try {\n            ServerBootstrap b = new ServerBootstrap();\n            b.group(bossGroup, workerGroup)\n                    .channel(NioServerSocketChannel.class)\n                    .handler(new LoggingHandler(LogLevel.INFO))\n                    .childHandler(new SecureChatServerInitializer(sslEngine));\n\n            b.bind(PORT).sync().channel().closeFuture().sync();\n        } finally {\n            bossGroup.shutdownGracefully();\n            workerGroup.shutdownGracefully();\n        }\n    }\n\n    private static class SecureChatServerInitializer extends ChannelInitializer&lt;SocketChannel&gt; {\n\n        private final SSLEngine sslCtx;\n\n        public SecureChatServerInitializer(SSLEngine sslCtx) {\n            this.sslCtx = sslCtx;\n        }\n\n        @Override\n        public void initChannel(SocketChannel ch) throws Exception {\n            ChannelPipeline pipeline = ch.pipeline();\n\n            pipeline.addLast(new SslHandler(sslCtx));\n            pipeline.addLast(new DelimiterBasedFrameDecoder(8192, Delimiters.lineDelimiter()));\n            pipeline.addLast(new StringDecoder());\n            pipeline.addLast(new StringEncoder());\n\n            // and then business logic.\n            pipeline.addLast(new SecureChatServerHandler());\n        }\n    }\n\n    private static class SecureChatServerHandler extends SimpleChannelInboundHandler&lt;String&gt; {\n\n        static final ChannelGroup channels = new DefaultChannelGroup(GlobalEventExecutor.INSTANCE);\n\n        @Override\n        public void channelActive(final ChannelHandlerContext ctx) {\n            // Once session is secured, send a greeting and register the channel to the global channel\n            // list so the channel received the messages from others.\n            ctx.pipeline().get(SslHandler.class).handshakeFuture().addListener(\n                    new GenericFutureListener&lt;Future&lt;Channel&gt;&gt;() {\n                        @Override\n                        public void operationComplete(Future&lt;Channel&gt; future) throws Exception {\n                            ctx.writeAndFlush(\n                                    \"Welcome to \" + InetAddress.getLocalHost().getHostName() + \" secure chat service!\\n\");\n                            ctx.writeAndFlush(\n                                    \"Your session is protected by \" +\n                                            ctx.pipeline().get(SslHandler.class).engine().getSession().getCipherSuite() +\n                                            \" cipher suite.\\n\");\n\n                            channels.add(ctx.channel());\n                        }\n                    });\n        }\n\n        @Override\n        public void channelRead0(ChannelHandlerContext ctx, String msg) throws Exception {\n            // Send the received message to all channels but the current one.\n            for (Channel c : channels) {\n                if (c != ctx.channel()) {\n                    c.writeAndFlush(\"[\" + ctx.channel().remoteAddress() + \"] \" + msg + '\\n');\n                } else {\n                    c.writeAndFlush(\"[you] \" + msg + '\\n');\n                }\n            }\n\n            // Close the connection if the client has sent 'bye'.\n            if (\"bye\".equals(msg.toLowerCase())) {\n                ctx.close();\n            }\n        }\n\n        @Override\n        public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\n            cause.printStackTrace();\n            ctx.close();\n        }\n    }\n}\n</code></pre>\n\n<p>Client code:</p>\n\n<pre><code>package com.test.securechat;\n\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport javax.net.ssl.SSLEngine;\n\nimport io.netty.bootstrap.Bootstrap;\nimport io.netty.channel.Channel;\nimport io.netty.channel.ChannelFuture;\nimport io.netty.channel.ChannelHandlerContext;\nimport io.netty.channel.ChannelInitializer;\nimport io.netty.channel.ChannelPipeline;\nimport io.netty.channel.EventLoopGroup;\nimport io.netty.channel.SimpleChannelInboundHandler;\nimport io.netty.channel.nio.NioEventLoopGroup;\nimport io.netty.channel.socket.SocketChannel;\nimport io.netty.channel.socket.nio.NioSocketChannel;\nimport io.netty.handler.codec.DelimiterBasedFrameDecoder;\nimport io.netty.handler.codec.Delimiters;\nimport io.netty.handler.codec.string.StringDecoder;\nimport io.netty.handler.codec.string.StringEncoder;\nimport io.netty.handler.ssl.SslHandler;\n\n/**\n * Simple SSL chat client\n */\npublic final class SecureChatClient {\n\n    static final String HOST = System.getProperty(\"host\", \"127.0.0.1\");\n    static final int PORT = Integer.parseInt(System.getProperty(\"port\", \"8992\"));\n\n    public static void main(String[] args) throws Exception {\n\n        SSLEngine engine = SslContextFactory.getClientContext().createSSLEngine();\n        engine.setUseClientMode(true);\n\n        EventLoopGroup group = new NioEventLoopGroup();\n        try {\n            Bootstrap b = new Bootstrap();\n            b.group(group)\n                    .channel(NioSocketChannel.class)\n                    .handler(new SecureChatClientInitializer(engine));\n\n            // Start the connection attempt.\n            Channel ch = b.connect(HOST, PORT).sync().channel();\n\n            // Read commands from the stdin.\n            ChannelFuture lastWriteFuture = null;\n            BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n            for (; ; ) {\n                String line = in.readLine();\n                if (line == null) {\n                    break;\n                }\n\n                // Sends the received line to the server.\n                lastWriteFuture = ch.writeAndFlush(line + \"\\r\\n\");\n\n                // If user typed the 'bye' command, wait until the server closes\n                // the connection.\n                if (\"bye\".equals(line.toLowerCase())) {\n                    ch.closeFuture().sync();\n                    break;\n                }\n            }\n\n            // Wait until all messages are flushed before closing the channel.\n            if (lastWriteFuture != null) {\n                lastWriteFuture.sync();\n            }\n        } finally {\n            // The connection is closed automatically on shutdown.\n            group.shutdownGracefully();\n        }\n    }\n\n    private static class SecureChatClientInitializer extends ChannelInitializer&lt;SocketChannel&gt; {\n\n        private final SSLEngine sslCtx;\n\n        public SecureChatClientInitializer(SSLEngine sslCtx) {\n            this.sslCtx = sslCtx;\n        }\n\n        @Override\n        public void initChannel(SocketChannel ch) throws Exception {\n            ChannelPipeline pipeline = ch.pipeline();\n\n            // Add SSL handler first to encrypt and decrypt everything.\n            // In this example, we use a bogus certificate in the server side\n            // and accept any invalid certificates in the client side.\n            // You will need something more complicated to identify both\n            // and server in the real world.\n            //pipeline.addLast(sslCtx.newHandler(ch.alloc(), SecureChatClient.HOST, SecureChatClient.PORT));\n            pipeline.addLast(new SslHandler(sslCtx));\n\n            // On top of the SSL handler, add the text line codec.\n            pipeline.addLast(new DelimiterBasedFrameDecoder(8192, Delimiters.lineDelimiter()));\n            pipeline.addLast(new StringDecoder());\n            pipeline.addLast(new StringEncoder());\n            //pipeline.addLast(new LoggingHandler(LogLevel.INFO));\n\n\n            // and then business logic.\n            pipeline.addLast(new SecureChatClientHandler());\n        }\n    }\n\n    private static class SecureChatClientHandler extends SimpleChannelInboundHandler&lt;String&gt; {\n\n        @Override\n        public void channelRead0(ChannelHandlerContext ctx, String msg) throws Exception {\n            System.err.println(msg);\n        }\n\n        @Override\n        public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\n            cause.printStackTrace();\n            ctx.close();\n        }\n    }\n}\n</code></pre>\n\n<p>Server Exception: </p>\n\n<pre><code>INFO: [id: 0x5eb2ac7a, /0:0:0:0:0:0:0:0:8992] RECEIVED: [id: 0x7d7a7dca, /127.0.0.1:55932 =&gt; /127.0.0.1:8992]\nio.netty.handler.codec.DecoderException: javax.net.ssl.SSLHandshakeException: ciphertext sanity check failed\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:278)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:147)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:333)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:319)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:787)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:130)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:511)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:468)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:382)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:354)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)\n    at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:137)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: javax.net.ssl.SSLHandshakeException: ciphertext sanity check failed\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n    at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1683)\n    at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:959)\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)\n    at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)\n    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:995)\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:921)\n    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:867)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:247)\n    ... 12 more\nCaused by: javax.crypto.BadPaddingException: ciphertext sanity check failed\n    at sun.security.ssl.InputRecord.decrypt(InputRecord.java:147)\n    at sun.security.ssl.EngineInputRecord.decrypt(EngineInputRecord.java:192)\n    at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:953)\n    ... 19 more\n</code></pre>\n\n<p>Client exception:</p>\n\n<pre><code>io.netty.handler.codec.DecoderException: javax.net.ssl.SSLException: Received fatal alert: &lt;UNKNOWN ALERT: 170&gt;\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:278)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:147)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:333)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:319)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:787)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:130)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:511)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:468)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:382)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:354)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)\n    at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:137)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: javax.net.ssl.SSLException: Received fatal alert: &lt;UNKNOWN ALERT: 170&gt;\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)\n    at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1619)\n    at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1587)\n    at sun.security.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:1756)\n    at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1060)\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)\n    at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)\n    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:995)\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:921)\n    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:867)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:247)\n    ... 12 more\n</code></pre>\n"},{"tags":["java","html","fonts","jasper-reports","ireport"],"answers":[{"tags":[],"owner":{"account_id":371850,"reputation":91,"user_id":720605,"display_name":"Alex Chevelev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388238991,"creation_date":1388238991,"answer_id":20815378,"question_id":18660054,"body_markdown":"In iReport if you set up a repository for your JasperServer you will be able to get the effective production version of a report xml into iReport. Then you can edit your file and replace by the edited version production one.","title":"Could not load the following font","body":"<p>In iReport if you set up a repository for your JasperServer you will be able to get the effective production version of a report xml into iReport. Then you can edit your file and replace by the edited version production one.</p>\n"},{"tags":[],"owner":{"account_id":1042007,"reputation":901,"user_id":1047852,"display_name":"Kamil Mikolajczyk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1404818101,"creation_date":1404818101,"answer_id":24630372,"question_id":18660054,"body_markdown":"try setting up these system properties:\r\n\r\n    import net.sf.jasperreports.engine.util.JRProperties;\r\n    JRProperties.setProperty(&quot;net.sf.jasperreports.default.pdf.font.name&quot;, &quot;Helvetica&quot;)\r\n    JRProperties.setProperty(&quot;net.sf.jasperreports.default.pdf.encoding&quot;, &quot;UTF-8&quot;)\r\n    JRProperties.setProperty(&quot;net.sf.jasperreports.default.pdf.embedded&quot;, &quot;false&quot;)\r\n\r\nsee here for more: http://www.77dev.com/2014/07/could-not-load-following-font-solved.html","title":"Could not load the following font","body":"<p>try setting up these system properties:</p>\n\n<pre><code>import net.sf.jasperreports.engine.util.JRProperties;\nJRProperties.setProperty(\"net.sf.jasperreports.default.pdf.font.name\", \"Helvetica\")\nJRProperties.setProperty(\"net.sf.jasperreports.default.pdf.encoding\", \"UTF-8\")\nJRProperties.setProperty(\"net.sf.jasperreports.default.pdf.embedded\", \"false\")\n</code></pre>\n\n<p>see here for more: <a href=\"http://www.77dev.com/2014/07/could-not-load-following-font-solved.html\" rel=\"nofollow\">http://www.77dev.com/2014/07/could-not-load-following-font-solved.html</a></p>\n"},{"tags":[],"owner":{"account_id":1613078,"reputation":2792,"user_id":1491512,"accept_rate":80,"display_name":"atiruz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480629816,"creation_date":1480629816,"answer_id":40921224,"question_id":18660054,"body_markdown":"Copy the fonts files (*.ttf) into the folder:\r\n\r\n    /path/to/app/WEB-INF/classes/\r\n\r\nYou app will get the fonts from here :)","title":"Could not load the following font","body":"<p>Copy the fonts files (*.ttf) into the folder:</p>\n\n<pre><code>/path/to/app/WEB-INF/classes/\n</code></pre>\n\n<p>You app will get the fonts from here :)</p>\n"}],"owner":{"account_id":3267300,"reputation":11,"user_id":2751545,"display_name":"Jonathan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11263,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1693839740,"creation_date":1378477345,"question_id":18660054,"body_markdown":"I have a problem that have been already asked, but there are some specific differences in my case.\r\n\r\nI&#39;m supporting a web application (`EJB 2`, `PostgreSQL 9.2.4`, running on a `JBoss 4.2.3`) that have an issue.\r\nSometimes, when we try to generate a specific report, we get this error:\r\n\r\n    javax.servlet.ServletException: net.sf.jasperreports.engine.JRRuntimeException: Could not load the following font : \r\n    pdfFontName   : DejaVu Sans\r\n    pdfEncoding   : Cp1252\r\n    isPdfEmbedded : false\r\n\torg.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:523)\r\n\torg.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:421)\r\n\torg.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)\r\n\torg.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)\r\n\torg.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:690)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\r\n\tstirq.scan.util.NoCacheFilter.doFilter(NoCacheFilter.java:38)\r\n\tjcifs.http.NtlmHttpFilter.doFilter(NtlmHttpFilter.java:118)\r\n\tstirq.scan.util.TimeoutFilter.doFilter(TimeoutFilter.java:57)\r\n\tstirq.scan.util.SecurityFilter.doFilter(SecurityFilter.java:82)\r\n\torg.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\r\n\r\nI searched in many sites.\r\nhttp://community.jaspersoft.com/questions/525505/could-not-load-following-font\r\n\r\nhttps://stackoverflow.com/questions/3059680/could-not-load-the-following-font-issue-in-ireport\r\n\r\nhttps://stackoverflow.com/questions/14935914/jasperreports-font-extensions-does-not-work-cant-find-font-while-exporting\r\n\r\n(And others)\r\n\r\nAs suggested in many answers, I am using font extension jar but still got the issue.\r\n\r\nThere are two fields of a table in the application&#39;s database that can contains html code.\r\nI found that the bug occurs when there is a &quot;font&quot; tag in one of those two fields or the two.\r\nEven if the specified font in this &quot;font&quot; tag is Arial the message I got is still concerning the font DejaVu Sans.\r\n\r\nEvery textfield of all my jrxml files are in font DejaVu Sans.\r\nWhen I tested the preview mode of my report in IReport 4.1.1 every thing was fine.\r\n\r\nI deleted every &quot;font&quot; tags of the two database fields containing HTML code for an occurrence that got the issue and it worked.\r\n\r\nBut the application is in production.\r\nAs you can see I can&#39;t delete every &quot;font&quot; tags in the database.\r\n\r\nAny help would be appreciated.\r\n\r\nThanks.","title":"Could not load the following font","body":"<p>I have a problem that have been already asked, but there are some specific differences in my case.</p>\n\n<p>I'm supporting a web application (<code>EJB 2</code>, <code>PostgreSQL 9.2.4</code>, running on a <code>JBoss 4.2.3</code>) that have an issue.\nSometimes, when we try to generate a specific report, we get this error:</p>\n\n<pre><code>javax.servlet.ServletException: net.sf.jasperreports.engine.JRRuntimeException: Could not load the following font : \npdfFontName   : DejaVu Sans\npdfEncoding   : Cp1252\nisPdfEmbedded : false\norg.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:523)\norg.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:421)\norg.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)\norg.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)\norg.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:690)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\nstirq.scan.util.NoCacheFilter.doFilter(NoCacheFilter.java:38)\njcifs.http.NtlmHttpFilter.doFilter(NtlmHttpFilter.java:118)\nstirq.scan.util.TimeoutFilter.doFilter(TimeoutFilter.java:57)\nstirq.scan.util.SecurityFilter.doFilter(SecurityFilter.java:82)\norg.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)\n</code></pre>\n\n<p>I searched in many sites.\n<a href=\"http://community.jaspersoft.com/questions/525505/could-not-load-following-font\" rel=\"nofollow noreferrer\">http://community.jaspersoft.com/questions/525505/could-not-load-following-font</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3059680/could-not-load-the-following-font-issue-in-ireport\">Could not load the following font issue in iReport</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/14935914/jasperreports-font-extensions-does-not-work-cant-find-font-while-exporting\">JasperReports - font extensions does not work - can&#39;t find font while exporting to PDF</a></p>\n\n<p>(And others)</p>\n\n<p>As suggested in many answers, I am using font extension jar but still got the issue.</p>\n\n<p>There are two fields of a table in the application's database that can contains html code.\nI found that the bug occurs when there is a \"font\" tag in one of those two fields or the two.\nEven if the specified font in this \"font\" tag is Arial the message I got is still concerning the font DejaVu Sans.</p>\n\n<p>Every textfield of all my jrxml files are in font DejaVu Sans.\nWhen I tested the preview mode of my report in IReport 4.1.1 every thing was fine.</p>\n\n<p>I deleted every \"font\" tags of the two database fields containing HTML code for an occurrence that got the issue and it worked.</p>\n\n<p>But the application is in production.\nAs you can see I can't delete every \"font\" tags in the database.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","optaplanner","vehicle-routing","timefold"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693838575,"post_id":77038160,"comment_id":135809460,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693839731,"creation_date":1693839731,"answer_id":77038848,"question_id":77038160,"body_markdown":"No, at the moment, list variable can not be combined with any other variable.\r\nIn the future, Timefold Solver will likely fix that.\r\n\r\nChained variable already does support co-existence with a basic planning variable.","title":"Solving with multiple entities","body":"<p>No, at the moment, list variable can not be combined with any other variable.\nIn the future, Timefold Solver will likely fix that.</p>\n<p>Chained variable already does support co-existence with a basic planning variable.</p>\n"}],"owner":{"account_id":29314842,"reputation":1,"user_id":22459833,"display_name":"hc1k"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693839731,"creation_date":1693834240,"question_id":77038160,"body_markdown":"I&#39;m currently working on solving a routing problem using OptaPlanner, and I&#39;m facing a challenge regarding planning variables. For a specific planning entity, I&#39;d like to use both a basic planning variable and a planning list variable (a total of 2 planning variables). Is it possible to combine these two types of planning variables within one planning entity?\r\n\r\n\r\n\r\nSo far, I&#39;ve attempted to achieve this but encountered the following error message:\r\n\r\n&#39;The config (ValueSelectorConfig(null)) has no configured variableName for entityClass (class org.acme.routing.domain.T...) and because there are multiple variableNames ([assignedPosition, auftragsListe]), it cannot be deduced automatically.&#39;\r\n\r\nCould you please explain how I can resolve this issue or if there&#39;s a better approach?\r\n\r\nThank you in advance!!","title":"Solving with multiple entities","body":"<p>I'm currently working on solving a routing problem using OptaPlanner, and I'm facing a challenge regarding planning variables. For a specific planning entity, I'd like to use both a basic planning variable and a planning list variable (a total of 2 planning variables). Is it possible to combine these two types of planning variables within one planning entity?</p>\n<p>So far, I've attempted to achieve this but encountered the following error message:</p>\n<p>'The config (ValueSelectorConfig(null)) has no configured variableName for entityClass (class org.acme.routing.domain.T...) and because there are multiple variableNames ([assignedPosition, auftragsListe]), it cannot be deduced automatically.'</p>\n<p>Could you please explain how I can resolve this issue or if there's a better approach?</p>\n<p>Thank you in advance!!</p>\n"},{"tags":["java","spring-boot","junit","mockito"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1693838924,"post_id":77038711,"comment_id":135809552,"body_markdown":"Don&#39;t try to just start the app in your test. Use something like `@SpringBootTest` instead. More details [here](https://www.baeldung.com/spring-boot-testing) (and a ton of other Google-able articles)","body":"Don&#39;t try to just start the app in your test. Use something like <code>@SpringBootTest</code> instead. More details <a href=\"https://www.baeldung.com/spring-boot-testing\" rel=\"nofollow noreferrer\">here</a> (and a ton of other Google-able articles)"},{"owner":{"account_id":25422114,"reputation":1,"user_id":19227902,"display_name":"Arthur Borges"},"score":0,"creation_date":1693839356,"post_id":77038711,"comment_id":135809636,"body_markdown":"@Jorn I have edited the question with one of my attempts, can you please check if that&#39;s what you mentioned?","body":"@Jorn I have edited the question with one of my attempts, can you please check if that&#39;s what you mentioned?"}],"owner":{"account_id":25422114,"reputation":1,"user_id":19227902,"display_name":"Arthur Borges"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693839676,"creation_date":1693838639,"question_id":77038711,"body_markdown":"I have tried to mock this line\r\n\r\n    ConfigurableApplicationContext applicationContext = SpringApplication.run(MyApplication.class, args);\r\n\r\nthat is in my main class. However,every attempt I made ended up running the application, connecting to the database, etc. Is there a simple way to mock this execution so I can mock test the rest of my class?\r\nThe need for this is that I need to increase the coverage of my class because there is the following logic after\r\n\r\n    Integer processingType = ApplicationUtils.validateParameters(args);\r\n\r\n            Controller controller = applicationContext.getBean(Controller.class);\r\n\r\n            if (processingType == 1) {\r\n                log.info(&quot;executing parameter 1&quot;);\r\n                controller.loadFile();\r\n            }\r\n            if (processingType == 2) {\r\n                log.info(&quot;executing parameter 2&quot;);\r\n                controller.updateByDate();\r\n            }\r\n\r\nI am using SpringBoot 2.7.1, Mockito 4.5.1 and  Junit-jupter 5.8.2\r\n\r\n\r\nThats is one of my many tries\r\n\r\n        @SpringBootTest\r\n    public class ApplicationTests {\r\n    \r\n        @Mock\r\n        private ApplicationUtils utils;\r\n    \r\n        @Mock\r\n        private ApplicationContext context;\r\n    \r\n        @Mock\r\n        private Controller controller;\r\n    \r\n        @Mock\r\n        private SpringApplication springApplication;\r\n    \r\n        @Mock\r\n        private Environment env;\r\n    \r\n        @InjectMocks\r\n        private Application app;\r\n    \r\n        @BeforeEach\r\n        public void init() {\r\n            MockitoAnnotations.openMocks(this);\r\n        }\r\n    \r\n    \r\n        @Test\r\n        void applicationTestErroParametro3() throws Exception {\r\n            String[] args = {&quot;asd&quot;,&quot;asd&quot;,&quot;8&quot;};\r\n            int statusCode = catchSystemExit(() -&gt; {\r\n                app.main(args);\r\n                verify(utils, atLeast(1)).validateParameters(args);\r\n                doThrow(new BusinessException(&quot;invalid argmuents&quot;)).when(utils).validateParameters(args);\r\n            });\r\n            assertEquals(99, statusCode);\r\n        }\r\n        @Test\r\n        void applicationTestParameter1() throws Exception {\r\n            String[] args = {&quot;1&quot;,&quot;1&quot;,&quot;1&quot;};\r\n    \t\twhen(springApplication.run()).thenReturn(applicationContext);\r\n            when(context.getEnvironment()).thenReturn(env);\r\n            int statusCode = catchSystemExit(() -&gt; {\r\n                doNothing().when(controller).loadFile();\r\n                app.main(args);\r\n                verify(utils, atLeast(1)).validateParameters(args);\r\n            });\r\n            assertEquals(1, statusCode);\r\n        }\r\n    \r\n        }","title":"How can I mock SpringApplication.run with mockito","body":"<p>I have tried to mock this line</p>\n<pre><code>ConfigurableApplicationContext applicationContext = SpringApplication.run(MyApplication.class, args);\n</code></pre>\n<p>that is in my main class. However,every attempt I made ended up running the application, connecting to the database, etc. Is there a simple way to mock this execution so I can mock test the rest of my class?\nThe need for this is that I need to increase the coverage of my class because there is the following logic after</p>\n<pre><code>Integer processingType = ApplicationUtils.validateParameters(args);\n\n        Controller controller = applicationContext.getBean(Controller.class);\n\n        if (processingType == 1) {\n            log.info(&quot;executing parameter 1&quot;);\n            controller.loadFile();\n        }\n        if (processingType == 2) {\n            log.info(&quot;executing parameter 2&quot;);\n            controller.updateByDate();\n        }\n</code></pre>\n<p>I am using SpringBoot 2.7.1, Mockito 4.5.1 and  Junit-jupter 5.8.2</p>\n<p>Thats is one of my many tries</p>\n<pre><code>    @SpringBootTest\npublic class ApplicationTests {\n\n    @Mock\n    private ApplicationUtils utils;\n\n    @Mock\n    private ApplicationContext context;\n\n    @Mock\n    private Controller controller;\n\n    @Mock\n    private SpringApplication springApplication;\n\n    @Mock\n    private Environment env;\n\n    @InjectMocks\n    private Application app;\n\n    @BeforeEach\n    public void init() {\n        MockitoAnnotations.openMocks(this);\n    }\n\n\n    @Test\n    void applicationTestErroParametro3() throws Exception {\n        String[] args = {&quot;asd&quot;,&quot;asd&quot;,&quot;8&quot;};\n        int statusCode = catchSystemExit(() -&gt; {\n            app.main(args);\n            verify(utils, atLeast(1)).validateParameters(args);\n            doThrow(new BusinessException(&quot;invalid argmuents&quot;)).when(utils).validateParameters(args);\n        });\n        assertEquals(99, statusCode);\n    }\n    @Test\n    void applicationTestParameter1() throws Exception {\n        String[] args = {&quot;1&quot;,&quot;1&quot;,&quot;1&quot;};\n        when(springApplication.run()).thenReturn(applicationContext);\n        when(context.getEnvironment()).thenReturn(env);\n        int statusCode = catchSystemExit(() -&gt; {\n            doNothing().when(controller).loadFile();\n            app.main(args);\n            verify(utils, atLeast(1)).validateParameters(args);\n        });\n        assertEquals(1, statusCode);\n    }\n\n    }\n</code></pre>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":1322466,"reputation":793,"user_id":1267975,"display_name":"Ashish Mathew"},"score":0,"creation_date":1516008198,"post_id":48259808,"comment_id":83502667,"body_markdown":"https://stackoverflow.com/questions/11740618/is-there-a-way-to-use-maven-property-in-java-class-during-compilation","body":"<a href=\"https://stackoverflow.com/questions/11740618/is-there-a-way-to-use-maven-property-in-java-class-during-compilation\" title=\"is there a way to use maven property in java class during compilation\">stackoverflow.com/questions/11740618/&hellip;</a>"},{"owner":{"account_id":11295944,"reputation":2000,"user_id":8283469,"accept_rate":92,"display_name":"L. Guthardt"},"score":0,"creation_date":1516008730,"post_id":48259808,"comment_id":83502931,"body_markdown":"Possible duplicate of [Is there a way to use maven property in Java class during compilation](https://stackoverflow.com/questions/11740618/is-there-a-way-to-use-maven-property-in-java-class-during-compilation)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/11740618/is-there-a-way-to-use-maven-property-in-java-class-during-compilation\">Is there a way to use maven property in Java class during compilation</a>"}],"answers":[{"tags":[],"owner":{"account_id":213453,"reputation":752,"user_id":466842,"accept_rate":50,"display_name":"Keshava "},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1516007837,"creation_date":1516007837,"answer_id":48259944,"question_id":48259808,"body_markdown":"you could tryin using the maven replacer plugin\r\nSee https://code.google.com/archive/p/maven-replacer-plugin/\r\n\r\n\r\nSee an example [here][1]\r\n\r\n\r\n  [1]: https://crushedbeans.wordpress.com/2013/06/08/using-maver-replacer-plugin-to-replace-strings-from-a-properties-file/","title":"how to update a property file using maven or pom.xml","body":"<p>you could tryin using the maven replacer plugin\nSee <a href=\"https://code.google.com/archive/p/maven-replacer-plugin/\" rel=\"nofollow noreferrer\">https://code.google.com/archive/p/maven-replacer-plugin/</a></p>\n\n<p>See an example <a href=\"https://crushedbeans.wordpress.com/2013/06/08/using-maver-replacer-plugin-to-replace-strings-from-a-properties-file/\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":8044407,"reputation":136,"user_id":7500389,"display_name":"Florent Amaridon"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1516007952,"creation_date":1516007952,"answer_id":48259977,"question_id":48259808,"body_markdown":"Hello you can use the [maven resource plugin](https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html).\r\n\r\nThis plugin implement &quot;[Maven Filtering](https://maven.apache.org/shared/maven-filtering/)&quot;.\r\n\r\n    &lt;project&gt;\r\n      ...\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.2&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;selenium-profile-chrome&lt;/id&gt;\r\n                &lt;!-- here the phase you need --&gt;\r\n                &lt;phase&gt;validate&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;outputDirectory&gt;${basedir}/target/selenium&lt;/outputDirectory&gt;\r\n                  &lt;resources&gt;          \r\n                    &lt;resource&gt;\r\n                      &lt;directory&gt;src/non-packaged-resources&lt;/directory&gt;\r\n                      &lt;filtering&gt;true&lt;/filtering&gt;\r\n                    &lt;/resource&gt;\r\n                  &lt;/resources&gt;              \r\n                &lt;/configuration&gt;            \r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        ...\r\n      &lt;/build&gt;\r\n      ...\r\n    &lt;/project&gt;\r\n\r\n","title":"how to update a property file using maven or pom.xml","body":"<p>Hello you can use the <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html\" rel=\"noreferrer\">maven resource plugin</a>.</p>\n\n<p>This plugin implement \"<a href=\"https://maven.apache.org/shared/maven-filtering/\" rel=\"noreferrer\">Maven Filtering</a>\".</p>\n\n<pre><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;selenium-profile-chrome&lt;/id&gt;\n            &lt;!-- here the phase you need --&gt;\n            &lt;phase&gt;validate&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;copy-resources&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;outputDirectory&gt;${basedir}/target/selenium&lt;/outputDirectory&gt;\n              &lt;resources&gt;          \n                &lt;resource&gt;\n                  &lt;directory&gt;src/non-packaged-resources&lt;/directory&gt;\n                  &lt;filtering&gt;true&lt;/filtering&gt;\n                &lt;/resource&gt;\n              &lt;/resources&gt;              \n            &lt;/configuration&gt;            \n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    ...\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29364266,"reputation":1,"user_id":22498324,"display_name":"ozgur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693838954,"creation_date":1693838954,"answer_id":77038752,"question_id":48259808,"body_markdown":"maven also has a resolvable, inheritable, and also overrideable &lt;properties&gt; section in its nature. You can implement any possible solution using maven profiles together. Your keywords to search for could be &quot;managing maven properties using maven profiles&quot;","title":"how to update a property file using maven or pom.xml","body":"<p>maven also has a resolvable, inheritable, and also overrideable  section in its nature. You can implement any possible solution using maven profiles together. Your keywords to search for could be &quot;managing maven properties using maven profiles&quot;</p>\n"}],"owner":{"account_id":12687180,"reputation":23,"user_id":9218558,"display_name":"montu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8527,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":48259944,"answer_count":3,"score":2,"last_activity_date":1693838954,"creation_date":1516007277,"question_id":48259808,"body_markdown":"I have created an automation framework where I am reading values from a property file say &quot;config.properties&quot;.\r\n\r\nMy config.propertioes file contains following :\r\n\r\n    BrowserName=${browser}\r\n    Environment=${env}\r\n\r\nI am reading browser value from the property file and passing it to my selenium script to run it.\r\n\r\nNow I wants to replace &quot;`${browser}&quot;` &amp;&amp; &quot;`${env}&quot;` with value &quot;`ie`&quot;  &amp;&amp;  &quot;`IT&quot;` using pom.xml. Is there any way/plugin using which I can edit a property file using pom.xml.\r\n\r\nPlease suggest.\r\n\r\n@Keshava\r\nI am putting whole example below as suggested below :\r\n1.Have 2 property files: ◦project.properties: This is the file that we commit in the repository. It consists data as follows: ◾project.connection.username=@@DB_USERNAME@@\r\nproject.connection.password=@@DB_PASSWORD@@\r\n\r\n◦build.properties: This is the file that we do not commit in the repository and is maintained at each of the deployment environments, be it the developers env., UAT env or Production env. The contents of this file are as follows: ◾db.username=mydbuser\r\ndb.password=mydbpassword\r\n\r\n\r\n2.In the project’s pom.xml add the following plugin and a execution: \r\n\r\n    &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.google.code.maven-replacer-plugin&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-replacer-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.3.5&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;replaceTokens&lt;/id&gt;\r\n                            &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;replace&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;file&gt;target/classes/project.properties&lt;/file&gt;\r\n                        &lt;replacements&gt;\r\n                            &lt;replacement&gt;\r\n                                &lt;token&gt;@@DB_USERNAME@@&lt;/token&gt;\r\n                                &lt;value&gt;${db.username}&lt;/value&gt;\r\n                            &lt;/replacement&gt;\r\n                            &lt;replacement&gt;\r\n                                &lt;token&gt;@@DB_PASSWORD@@&lt;/token&gt;\r\n                                &lt;value&gt;${db.password}&lt;/value&gt;\r\n                            &lt;/replacement&gt;\r\n                        &lt;/replacements&gt;\r\n                    &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nfrom above, I understand that `&quot;@@DB_USERNAME@@&quot;` is from `&quot;project.properties&quot;`. But, from which properties file this `&quot;${db.username}&quot;` value will be taken?. how my pom will understand from where to take `&quot;${db.username}&quot;` .\r\n\r\nDo I need to pass this value in maven goal like below :\r\n\r\n    mvn clean install -Ddb.username=myuserid","title":"how to update a property file using maven or pom.xml","body":"<p>I have created an automation framework where I am reading values from a property file say \"config.properties\".</p>\n\n<p>My config.propertioes file contains following :</p>\n\n<pre><code>BrowserName=${browser}\nEnvironment=${env}\n</code></pre>\n\n<p>I am reading browser value from the property file and passing it to my selenium script to run it.</p>\n\n<p>Now I wants to replace \"<code>${browser}\"</code> &amp;&amp; \"<code>${env}\"</code> with value \"<code>ie</code>\"  &amp;&amp;  \"<code>IT\"</code> using pom.xml. Is there any way/plugin using which I can edit a property file using pom.xml.</p>\n\n<p>Please suggest.</p>\n\n<p>@Keshava\nI am putting whole example below as suggested below :\n1.Have 2 property files: ◦project.properties: This is the file that we commit in the repository. It consists data as follows: ◾project.connection.username=@@DB_USERNAME@@\nproject.connection.password=@@DB_PASSWORD@@</p>\n\n<p>◦build.properties: This is the file that we do not commit in the repository and is maintained at each of the deployment environments, be it the developers env., UAT env or Production env. The contents of this file are as follows: ◾db.username=mydbuser\ndb.password=mydbpassword</p>\n\n<p>2.In the project’s pom.xml add the following plugin and a execution: </p>\n\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;com.google.code.maven-replacer-plugin&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-replacer-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.3.5&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;replaceTokens&lt;/id&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;replace&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;file&gt;target/classes/project.properties&lt;/file&gt;\n                    &lt;replacements&gt;\n                        &lt;replacement&gt;\n                            &lt;token&gt;@@DB_USERNAME@@&lt;/token&gt;\n                            &lt;value&gt;${db.username}&lt;/value&gt;\n                        &lt;/replacement&gt;\n                        &lt;replacement&gt;\n                            &lt;token&gt;@@DB_PASSWORD@@&lt;/token&gt;\n                            &lt;value&gt;${db.password}&lt;/value&gt;\n                        &lt;/replacement&gt;\n                    &lt;/replacements&gt;\n                &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>from above, I understand that <code>\"@@DB_USERNAME@@\"</code> is from <code>\"project.properties\"</code>. But, from which properties file this <code>\"${db.username}\"</code> value will be taken?. how my pom will understand from where to take <code>\"${db.username}\"</code> .</p>\n\n<p>Do I need to pass this value in maven goal like below :</p>\n\n<pre><code>mvn clean install -Ddb.username=myuserid\n</code></pre>\n"},{"tags":["java","spring","spring-boot","kotlin","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693831339,"post_id":77036581,"comment_id":135808026,"body_markdown":"This wil not ever work. You cannot access request scoped beans from request x in request y.","body":"This wil not ever work. You cannot access request scoped beans from request x in request y."}],"answers":[{"tags":[],"owner":{"account_id":24070248,"reputation":151,"user_id":18046265,"display_name":"Ladislav Ksir"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693838801,"creation_date":1693838801,"answer_id":77038729,"question_id":77036581,"body_markdown":"I&#39;m not sure about accessing RequestScope beans directly using WebApplicationContext. There surely is workaround solution using bean lifecycle. My working example is:\r\n\r\n    @Service\r\n    class FutureService {\r\n        val futureManagers = mutableListOf&lt;FutureManager&gt;()\r\n    }\r\n\r\nRegister/Unregister each FutureManager:\r\n\r\n    @Service\r\n    @RequestScope\r\n    class FutureManager(private val futureService: FutureService) : DisposableBean, InitializingBean {\r\n    \r\n        private val future = CompletableFuture&lt;Boolean&gt;()\r\n    \r\n        fun complete(value: Boolean) = future.complete(value)\r\n    \r\n        fun get(): Boolean = future.get()\r\n    \r\n        override fun afterPropertiesSet() {\r\n            futureService.futureManagers.add(this)\r\n        }\r\n        \r\n        override fun destroy() {\r\n            futureService.futureManagers.remove(this)\r\n        }\r\n    }\r\n\r\nComplete them using:\r\n\r\n    @RestController\r\n    class CompleteFutureController(\r\n        private val futureService: FutureService\r\n    ) {\r\n        @GetMapping(&quot;/complete&quot;)\r\n        fun getFuture(@RequestParam value: Boolean) {\r\n            futureService.futureManagers.forEach {\r\n                println(it)\r\n                it.complete(value)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nWhile this is working, I don&#39;t think it is the best solution and suggestions are welcome. ","title":"Access all request-scoped beans at runtime in Spring Boot","body":"<p>I'm not sure about accessing RequestScope beans directly using WebApplicationContext. There surely is workaround solution using bean lifecycle. My working example is:</p>\n<pre><code>@Service\nclass FutureService {\n    val futureManagers = mutableListOf&lt;FutureManager&gt;()\n}\n</code></pre>\n<p>Register/Unregister each FutureManager:</p>\n<pre><code>@Service\n@RequestScope\nclass FutureManager(private val futureService: FutureService) : DisposableBean, InitializingBean {\n\n    private val future = CompletableFuture&lt;Boolean&gt;()\n\n    fun complete(value: Boolean) = future.complete(value)\n\n    fun get(): Boolean = future.get()\n\n    override fun afterPropertiesSet() {\n        futureService.futureManagers.add(this)\n    }\n    \n    override fun destroy() {\n        futureService.futureManagers.remove(this)\n    }\n}\n</code></pre>\n<p>Complete them using:</p>\n<pre><code>@RestController\nclass CompleteFutureController(\n    private val futureService: FutureService\n) {\n    @GetMapping(&quot;/complete&quot;)\n    fun getFuture(@RequestParam value: Boolean) {\n        futureService.futureManagers.forEach {\n            println(it)\n            it.complete(value)\n        }\n    }\n}\n</code></pre>\n<p>While this is working, I don't think it is the best solution and suggestions are welcome.</p>\n"}],"owner":{"account_id":7695446,"reputation":598,"user_id":5830152,"accept_rate":75,"display_name":" J.Kennsy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77038729,"answer_count":1,"score":0,"last_activity_date":1693838801,"creation_date":1693819794,"question_id":77036581,"body_markdown":"In my application I would like to propagate a value/message to multiple http clients. For that I have created an endpoint which returns a completable future of boolean type. For resolving this future I have created another endpoint which receives desired value. I want to use Spring&#39;s @RequestScope so I don&#39;t have to manage creating and destroying those instances by my own. However the following code won&#39;t work because I cannot retrieve all current request-scoped beans.\r\n***\r\n*Scenario*:\r\n 1. I call /future endpoint \r\n 2. I call /future endpoint again in different Postman tab\r\n 3. I call /complete endpoint with param value=true\r\n\r\n*Expected result*:  \r\nEach /future call receives `true` value\r\n\r\n*Actual result*:  \r\nEach /future call hangs till timeout w/o receiving any value\r\n\r\n*Logs*:  \r\n```\r\nManager in /future: com.example.demo.FutureManager@12c048e7\r\nManager in /future: com.example.demo.FutureManager@38586896\r\n{scopedTarget.futureManager=com.example.demo.FutureManager@209c5275, futureManager=com.example.demo.FutureManager@209c5275}\r\n```\r\n\r\nFrom the logs I can assume that indeed different instances of FutureManager were created for each endpoint call but upon /complete call there is only new, different instance available and those first two are gone? Or not seen by applicationContext?\r\n***\r\n\r\n**Controllers**\r\n```\r\n@RestController\r\nclass FutureController(\r\n    private val manager: FutureManager\r\n) {\r\n\r\n    @GetMapping(&quot;/future&quot;)\r\n    fun getFuture(): Boolean {\r\n        println(&quot;Manager in /future: $manager&quot;)\r\n        return manager.get()\r\n    }\r\n}\r\n\r\n@RestController\r\nclass CompleteFutureController(\r\n    private val applicationContext: WebApplicationContext\r\n) {\r\n\r\n    @GetMapping(&quot;/complete&quot;)\r\n    fun getFuture(@RequestParam value: Boolean) {\r\n        applicationContext.getBeansOfType(FutureManager::class.java)\r\n            .also { println(it) }\r\n            .values\r\n            .forEach { it.complete(value) }\r\n    }\r\n}\r\n```\r\n**Service**\r\n```\r\n@Service\r\n@RequestScope\r\nclass FutureManager {\r\n\r\n    private val future = CompletableFuture&lt;Boolean&gt;()\r\n\r\n    fun complete(value: Boolean) = future.complete(value)\r\n\r\n    fun get(): Boolean = future.get()\r\n}\r\n```\r\nAny help or explanation would be appreciated!\r\n","title":"Access all request-scoped beans at runtime in Spring Boot","body":"<p>In my application I would like to propagate a value/message to multiple http clients. For that I have created an endpoint which returns a completable future of boolean type. For resolving this future I have created another endpoint which receives desired value. I want to use Spring's @RequestScope so I don't have to manage creating and destroying those instances by my own. However the following code won't work because I cannot retrieve all current request-scoped beans.</p>\n<hr />\n<p><em>Scenario</em>:</p>\n<ol>\n<li>I call /future endpoint</li>\n<li>I call /future endpoint again in different Postman tab</li>\n<li>I call /complete endpoint with param value=true</li>\n</ol>\n<p><em>Expected result</em>:<br />\nEach /future call receives <code>true</code> value</p>\n<p><em>Actual result</em>:<br />\nEach /future call hangs till timeout w/o receiving any value</p>\n<p><em>Logs</em>:</p>\n<pre><code>Manager in /future: com.example.demo.FutureManager@12c048e7\nManager in /future: com.example.demo.FutureManager@38586896\n{scopedTarget.futureManager=com.example.demo.FutureManager@209c5275, futureManager=com.example.demo.FutureManager@209c5275}\n</code></pre>\n<p>From the logs I can assume that indeed different instances of FutureManager were created for each endpoint call but upon /complete call there is only new, different instance available and those first two are gone? Or not seen by applicationContext?</p>\n<hr />\n<p><strong>Controllers</strong></p>\n<pre><code>@RestController\nclass FutureController(\n    private val manager: FutureManager\n) {\n\n    @GetMapping(&quot;/future&quot;)\n    fun getFuture(): Boolean {\n        println(&quot;Manager in /future: $manager&quot;)\n        return manager.get()\n    }\n}\n\n@RestController\nclass CompleteFutureController(\n    private val applicationContext: WebApplicationContext\n) {\n\n    @GetMapping(&quot;/complete&quot;)\n    fun getFuture(@RequestParam value: Boolean) {\n        applicationContext.getBeansOfType(FutureManager::class.java)\n            .also { println(it) }\n            .values\n            .forEach { it.complete(value) }\n    }\n}\n</code></pre>\n<p><strong>Service</strong></p>\n<pre><code>@Service\n@RequestScope\nclass FutureManager {\n\n    private val future = CompletableFuture&lt;Boolean&gt;()\n\n    fun complete(value: Boolean) = future.complete(value)\n\n    fun get(): Boolean = future.get()\n}\n</code></pre>\n<p>Any help or explanation would be appreciated!</p>\n"},{"tags":["java","buildpack","paketo"],"comments":[{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":0,"creation_date":1692716476,"post_id":76953630,"comment_id":135660702,"body_markdown":"Please don&#39;t post images of text, but the text directly.","body":"Please don&#39;t post images of text, but the text directly."},{"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"score":0,"creation_date":1692792944,"post_id":76953630,"comment_id":135672050,"body_markdown":"First thing, the easiest way to set up bindings is with binding-tool. You tell it which buildpack, and it&#39;ll download the dependencies and make the bindings for you. Then all you need to do is mount the volume, which it can even help you do also. https://github.com/dmikusa/binding-tool. Even if you don&#39;t want to use this tool, it&#39;s a good example of what you need to do for bindings to work, you could start with what it generates and modify them as well.","body":"First thing, the easiest way to set up bindings is with binding-tool. You tell it which buildpack, and it&#39;ll download the dependencies and make the bindings for you. Then all you need to do is mount the volume, which it can even help you do also. <a href=\"https://github.com/dmikusa/binding-tool\" rel=\"nofollow noreferrer\">github.com/dmikusa/binding-tool</a>. Even if you don&#39;t want to use this tool, it&#39;s a good example of what you need to do for bindings to work, you could start with what it generates and modify them as well."},{"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"score":0,"creation_date":1692793086,"post_id":76953630,"comment_id":135672083,"body_markdown":"Second thing, if you want to troubleshoot your set up you need to post more info. Need to know what you&#39;re putting into the binding files, i.e `type` and `138f...`. Then we need to see the output of running the build with the dep mapping binding present. Lastly, I would suggest running the build a second time with these additional arguments `pack build -v -e BP_DEBUG=true ...` because it&#39;ll give some more helpful debug information.","body":"Second thing, if you want to troubleshoot your set up you need to post more info. Need to know what you&#39;re putting into the binding files, i.e <code>type</code> and <code>138f...</code>. Then we need to see the output of running the build with the dep mapping binding present. Lastly, I would suggest running the build a second time with these additional arguments <code>pack build -v -e BP_DEBUG=true ...</code> because it&#39;ll give some more helpful debug information."},{"owner":{"account_id":29182258,"reputation":1,"user_id":22356125,"display_name":"deepak bolisetti"},"score":0,"creation_date":1693413668,"post_id":76953630,"comment_id":135758743,"body_markdown":"added binding files content in the question and have also ran the build now adding DEBUG variable. No helpful info in the debug logs.","body":"added binding files content in the question and have also ran the build now adding DEBUG variable. No helpful info in the debug logs."},{"owner":{"account_id":29182258,"reputation":1,"user_id":22356125,"display_name":"deepak bolisetti"},"score":0,"creation_date":1693838765,"post_id":76953630,"comment_id":135809509,"body_markdown":"@DanielMikusa - have updated the new error am getting  while using the binding. Please help me where am going wrong","body":"@DanielMikusa - have updated the new error am getting  while using the binding. Please help me where am going wrong"},{"owner":{"account_id":1731647,"reputation":14046,"user_id":1585136,"display_name":"Daniel Mikusa"},"score":0,"creation_date":1693937773,"post_id":76953630,"comment_id":135824662,"body_markdown":"Try `--volume /home/ubuntu/binding_tool-v1.20.2-x86_64-unknown-linux-gnu/bindings:/bindings` and set `-e SERVICE_BINDING_ROOT=/bindings` with `pack build` also.","body":"Try <code>--volume &#47;home&#47;ubuntu&#47;binding_tool-v1.20.2-x86_64-unknown-linux-gnu&#47;b&zwnj;&#8203;indings:&#47;bindings</code> and set <code>-e SERVICE_BINDING_ROOT=&#47;bindings</code> with <code>pack build</code> also."}],"owner":{"account_id":29182258,"reputation":1,"user_id":22356125,"display_name":"deepak bolisetti"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693838693,"creation_date":1692709517,"question_id":76953630,"body_markdown":"**i want to use version 11.0.19 present locally instead of downloading from online. So am trying the [binding/Dependency Mapping](https://paketo.io/docs/howto/configuration/#dependency-mappings) to implement this\r\n**\r\n\r\n## getting below ERROR after executing command\r\n\r\n\r\n       ===&gt; DETECTING\r\n    ======== Output: paketo-buildpacks/git@1.0.6 ========\r\n    failed to load bindings from &#39;/platform/bindings&#39;: failed to read \r\n    binding &#39;dependency-mapping&#39;: missing &#39;type&#39;\r\n    err:  paketo-buildpacks/git@1.0.6 (1)\r\n    ======== Output: paketo-buildpacks/git@1.0.6 ========\r\n    failed to load bindings from &#39;/platform/bindings&#39;: failed to read \r\n    binding &#39;dependency-mapping&#39;: missing &#39;type&#39;\r\n    err:  paketo-buildpacks/git@1.0.6 (1)\r\n\r\n\r\n\r\n## Expecting ##\r\n\r\nwhile creating image from source code using buildpacks, by default it is downloading from internet, But i want to use version 11.0.19 in my local path instead. I have used **paketobuildpacks/builder:base** as a builder. And bt(binding-tool) for downloading all the dependencies.\r\n\r\n    **Bell Soft Liberica JDK 11.0.19: Contributing to layer**\r\n        Downloading from from https://github.com/bell-sw/Liberica/releases/download/11.0.19+7/bellsoft-jdk11.0.19+7-linux-amd64.tar.gz\r\n    Verifying checksum \r\n    Expanding to / layers/paketo-bu ildpacks_bellsoft-liberica/jdk \r\n    Adding 137 container CA certificates to JVM truststore \r\n    Writing env. build/ JAVA HOME.override \r\n    Writing env. build/ JDK HOME.override \r\n    **\r\n    **\r\n\r\n**executed below command**\r\n\r\n    pack build binding_test:sep4 --path . --volume /home/ubuntu/binding_tool-v1.20.2-x86_64-unknown-linux-gnu/bindings/dependency-mapping:/platform/bindings/dependency-mapping/binaries --env BP_JVM_VERSION=11.0.19 --builder paketobuildpacks/builder:base\r\n    \r\n\r\n\r\nsteps followed. as mentioned in [LINK](https://paketo.io/docs/howto/configuration/#dependency-mappings)\r\n\r\n    echo &quot;file:///bindings/dependency-mapping/binaries/bellsoft-jdk11.0.19+7-linux-amd64.tar.gz&quot; &gt;&gt; 138f8bd3801445391ff19d683ea7f3c4662dcd0e2cd0b8ab2a5d3966b05124f8\r\n\r\n\r\ncreated file **type** as below\r\n\r\n    echo &quot;dependency-mapping&quot; &gt;&gt; type\r\n\r\n\r\n\r\n\r\n\r\n\r\nPlease help me where am doing it wrong.","title":"unable to use Paketo-buildpacks/Bellsoft-liberica - JDK version11.0.19 - using Binding/Dependency Mapping - Cloud Native Buildpack","body":"<p>**i want to use version 11.0.19 present locally instead of downloading from online. So am trying the <a href=\"https://paketo.io/docs/howto/configuration/#dependency-mappings\" rel=\"nofollow noreferrer\">binding/Dependency Mapping</a> to implement this\n**</p>\n<h2>getting below ERROR after executing command</h2>\n<pre><code>   ===&gt; DETECTING\n======== Output: paketo-buildpacks/git@1.0.6 ========\nfailed to load bindings from '/platform/bindings': failed to read \nbinding 'dependency-mapping': missing 'type'\nerr:  paketo-buildpacks/git@1.0.6 (1)\n======== Output: paketo-buildpacks/git@1.0.6 ========\nfailed to load bindings from '/platform/bindings': failed to read \nbinding 'dependency-mapping': missing 'type'\nerr:  paketo-buildpacks/git@1.0.6 (1)\n</code></pre>\n<h2>Expecting</h2>\n<p>while creating image from source code using buildpacks, by default it is downloading from internet, But i want to use version 11.0.19 in my local path instead. I have used <strong>paketobuildpacks/builder:base</strong> as a builder. And bt(binding-tool) for downloading all the dependencies.</p>\n<pre><code>**Bell Soft Liberica JDK 11.0.19: Contributing to layer**\n    Downloading from from https://github.com/bell-sw/Liberica/releases/download/11.0.19+7/bellsoft-jdk11.0.19+7-linux-amd64.tar.gz\nVerifying checksum \nExpanding to / layers/paketo-bu ildpacks_bellsoft-liberica/jdk \nAdding 137 container CA certificates to JVM truststore \nWriting env. build/ JAVA HOME.override \nWriting env. build/ JDK HOME.override \n**\n**\n</code></pre>\n<p><strong>executed below command</strong></p>\n<pre><code>pack build binding_test:sep4 --path . --volume /home/ubuntu/binding_tool-v1.20.2-x86_64-unknown-linux-gnu/bindings/dependency-mapping:/platform/bindings/dependency-mapping/binaries --env BP_JVM_VERSION=11.0.19 --builder paketobuildpacks/builder:base\n</code></pre>\n<p>steps followed. as mentioned in <a href=\"https://paketo.io/docs/howto/configuration/#dependency-mappings\" rel=\"nofollow noreferrer\">LINK</a></p>\n<pre><code>echo &quot;file:///bindings/dependency-mapping/binaries/bellsoft-jdk11.0.19+7-linux-amd64.tar.gz&quot; &gt;&gt; 138f8bd3801445391ff19d683ea7f3c4662dcd0e2cd0b8ab2a5d3966b05124f8\n</code></pre>\n<p>created file <strong>type</strong> as below</p>\n<pre><code>echo &quot;dependency-mapping&quot; &gt;&gt; type\n</code></pre>\n<p>Please help me where am doing it wrong.</p>\n"},{"tags":["java","nginx","proxy","reverse-proxy","nginx-reverse-proxy"],"owner":{"account_id":4420950,"reputation":383,"user_id":3600935,"accept_rate":90,"display_name":"MrSalesi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693838514,"creation_date":1693838514,"question_id":77038690,"body_markdown":"I need a fast speed java code to create multiple proxy in one machine get all requests in port:xxxx and send it through an other upstream proxy in example.com:yyyy that needs authentication with username and passwor\r\n\r\nI have a proxy multi thread code but how to set Authentication for it ?\r\n\r\n\r\n```\r\n public void run() {\r\n        try {\r\n            final byte[] request = new byte[1024];\r\n            byte[] reply = new byte[4096];\r\n            final InputStream inFromClient = sClient.getInputStream();\r\n            final OutputStream outToClient = sClient.getOutputStream();\r\n            Socket client = null, server = null;\r\n            // connects a socket to the server\r\n            try {\r\n                server = new Socket(SERVER_URL, SERVER_PORT);\r\n            } catch (IOException e) {\r\n                PrintWriter out = new PrintWriter(new OutputStreamWriter(\r\n                        outToClient));\r\n                out.flush();\r\n                throw new RuntimeException(e);\r\n            }\r\n            // a new thread to manage streams from server to client (DOWNLOAD)\r\n            final InputStream inFromServer = server.getInputStream();\r\n            final OutputStream outToServer = server.getOutputStream();\r\n            // a new thread for uploading to the server\r\n            new Thread() {\r\n                public void run() {\r\n                    int bytes_read;\r\n                    try {\r\n                        while ((bytes_read = inFromClient.read(request)) != -1) {\r\n                            outToServer.write(request, 0, bytes_read);\r\n                            outToServer.flush();\r\n                            //TODO CREATE YOUR LOGIC HERE\r\n                        }\r\n                    } catch (IOException e) {\r\n                    }\r\n                    try {\r\n                        outToServer.close();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }.start();\r\n            // current thread manages streams from server to client (DOWNLOAD)\r\n            int bytes_read;\r\n            try {\r\n                while ((bytes_read = inFromServer.read(reply)) != -1) {\r\n                    outToClient.write(reply, 0, bytes_read);\r\n                    outToClient.flush();\r\n                    //TODO CREATE YOUR LOGIC HERE\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    if (server != null) {\r\n                        server.close();\r\n                    }\r\n                    if (client != null) {\r\n                        client.close();\r\n                    }\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            outToClient.close();\r\n            sClient.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\n\r\nI can not set system.proxy.host because it use with another program\r\n\r\nI need some new approach or code to do something like my code + ability to connect to upstream proxy with authentication, like this pseudo code :\r\n\r\n\r\n```\r\nfinal InputStream inFromClient = sClient.getInputStream(Proxy(host,post,username,password));\r\n```\r\n ","title":"Java proxy connect with another upstream authenticated proxy","body":"<p>I need a fast speed java code to create multiple proxy in one machine get all requests in port:xxxx and send it through an other upstream proxy in example.com:yyyy that needs authentication with username and passwor</p>\n<p>I have a proxy multi thread code but how to set Authentication for it ?</p>\n<pre><code> public void run() {\n        try {\n            final byte[] request = new byte[1024];\n            byte[] reply = new byte[4096];\n            final InputStream inFromClient = sClient.getInputStream();\n            final OutputStream outToClient = sClient.getOutputStream();\n            Socket client = null, server = null;\n            // connects a socket to the server\n            try {\n                server = new Socket(SERVER_URL, SERVER_PORT);\n            } catch (IOException e) {\n                PrintWriter out = new PrintWriter(new OutputStreamWriter(\n                        outToClient));\n                out.flush();\n                throw new RuntimeException(e);\n            }\n            // a new thread to manage streams from server to client (DOWNLOAD)\n            final InputStream inFromServer = server.getInputStream();\n            final OutputStream outToServer = server.getOutputStream();\n            // a new thread for uploading to the server\n            new Thread() {\n                public void run() {\n                    int bytes_read;\n                    try {\n                        while ((bytes_read = inFromClient.read(request)) != -1) {\n                            outToServer.write(request, 0, bytes_read);\n                            outToServer.flush();\n                            //TODO CREATE YOUR LOGIC HERE\n                        }\n                    } catch (IOException e) {\n                    }\n                    try {\n                        outToServer.close();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }.start();\n            // current thread manages streams from server to client (DOWNLOAD)\n            int bytes_read;\n            try {\n                while ((bytes_read = inFromServer.read(reply)) != -1) {\n                    outToClient.write(reply, 0, bytes_read);\n                    outToClient.flush();\n                    //TODO CREATE YOUR LOGIC HERE\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            } finally {\n                try {\n                    if (server != null) {\n                        server.close();\n                    }\n                    if (client != null) {\n                        client.close();\n                    }\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n            outToClient.close();\n            sClient.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>I can not set system.proxy.host because it use with another program</p>\n<p>I need some new approach or code to do something like my code + ability to connect to upstream proxy with authentication, like this pseudo code :</p>\n<pre><code>final InputStream inFromClient = sClient.getInputStream(Proxy(host,post,username,password));\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1693818688,"post_id":77036432,"comment_id":135805720,"body_markdown":"`rev = rev + rev.charAt(i);` should be `rev = rev + s.charAt(i);`","body":"<code>rev = rev + rev.charAt(i);</code> should be <code>rev = rev + s.charAt(i);</code>"}],"answers":[{"tags":[],"owner":{"account_id":24029930,"reputation":88,"user_id":18011018,"display_name":"jaragone"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693820454,"creation_date":1693819149,"answer_id":77036498,"question_id":77036432,"body_markdown":"The rev string starts as an empty string.\r\nYou are trying to access rev.charAt(i), where i starts from the last index of the original string s. Since rev is empty initially, trying to access any character from it using charAt will throw a StringIndexOutOfBoundsException.\r\nTo reverse the string s, you should be looking at the characters in s, not rev.\r\n   \r\n    package JAVA_Program;\r\n    public class String_reverse {\r\n    \r\n        public static void main(String[] args) {\r\n            String s = &quot;hello&quot;;\r\n            String rev = &quot;&quot;;\r\n            try {\r\n                for (int i = s.length() - 1; i &gt;= 0; i--) {\r\n                    rev = rev + s.charAt(i);  // Changed from rev.charAt(i) to s.charAt(i)\r\n                }\r\n            } catch (Exception e) {\r\n                System.out.println(e);\r\n            }\r\n            System.out.println(rev);\r\n        }\r\n    }\r\n","title":"How to solve the, &quot;java.lang.StringIndexOutOfBoundsException&quot; error","body":"<p>The rev string starts as an empty string.\nYou are trying to access rev.charAt(i), where i starts from the last index of the original string s. Since rev is empty initially, trying to access any character from it using charAt will throw a StringIndexOutOfBoundsException.\nTo reverse the string s, you should be looking at the characters in s, not rev.</p>\n<pre><code>package JAVA_Program;\npublic class String_reverse {\n\n    public static void main(String[] args) {\n        String s = &quot;hello&quot;;\n        String rev = &quot;&quot;;\n        try {\n            for (int i = s.length() - 1; i &gt;= 0; i--) {\n                rev = rev + s.charAt(i);  // Changed from rev.charAt(i) to s.charAt(i)\n            }\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n        System.out.println(rev);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29362038,"reputation":11,"user_id":22496582,"display_name":"yogesh lande"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693838509,"creation_date":1693818548,"question_id":77036432,"body_markdown":"Error:\r\n\r\n&gt; java.lang.StringIndexOutOfBoundsException: String index out of range: 4\r\n\r\nHow to solve this error?\r\n\r\n    package JAVA_Program;\r\n    \r\n    public class String_reverse {\r\n    \r\n        public static void main(String[] args) {\r\n        \t// TODO Auto-generated method stub\r\n        \r\n        \tString s=&quot;hello&quot;;\r\n         //   int n=s.length();\r\n            String rev=&quot;&quot;;\r\n          //  System.out.println(n);\r\n            // My length is 5 ,Hence I started from 5\r\n            try\r\n            {\r\n            for(int i=s.length()-1;i&gt;=0;i--)\r\n            {\r\n            \trev=rev+rev.charAt(i);\r\n            \t\r\n            }\r\n            }\r\n            catch(Exception e)\r\n            {\r\n            \tSystem.out.println(e);\r\n            }\r\n            System.out.println(rev);\r\n          \r\n        }\r\n    }\r\n\r\n","title":"How to solve the, &quot;java.lang.StringIndexOutOfBoundsException&quot; error","body":"<p>Error:</p>\n<blockquote>\n<p>java.lang.StringIndexOutOfBoundsException: String index out of range: 4</p>\n</blockquote>\n<p>How to solve this error?</p>\n<pre><code>package JAVA_Program;\n\npublic class String_reverse {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n    \n        String s=&quot;hello&quot;;\n     //   int n=s.length();\n        String rev=&quot;&quot;;\n      //  System.out.println(n);\n        // My length is 5 ,Hence I started from 5\n        try\n        {\n        for(int i=s.length()-1;i&gt;=0;i--)\n        {\n            rev=rev+rev.charAt(i);\n            \n        }\n        }\n        catch(Exception e)\n        {\n            System.out.println(e);\n        }\n        System.out.println(rev);\n      \n    }\n}\n</code></pre>\n"},{"tags":["java","dictionary","lambda","java-stream","collectors"],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1693838444,"creation_date":1693837795,"answer_id":77038590,"question_id":77038550,"body_markdown":"Your logic is a little bit complicted, a simple way is to use stream collect with [`Collectors::toMap`][1] like this:\r\n\r\n    Map&lt;String, Long&gt; vowelsMap = myStrings.stream()\r\n            .collect(Collectors.toMap(Function.identity(), \r\n                    str -&gt; str.chars().filter(c -&gt; &quot;aeiou&quot;.indexOf(c) &gt;= 0).count()));\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function)","title":"How to convert a List&lt;String&gt; to Map&lt;String, Long&gt; using Lambda, where the key is the String and the value is a count of the number of vowels?","body":"<p>Your logic is a little bit complicted, a simple way is to use stream collect with <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function)\" rel=\"noreferrer\"><code>Collectors::toMap</code></a> like this:</p>\n<pre><code>Map&lt;String, Long&gt; vowelsMap = myStrings.stream()\n        .collect(Collectors.toMap(Function.identity(), \n                str -&gt; str.chars().filter(c -&gt; &quot;aeiou&quot;.indexOf(c) &gt;= 0).count()));\n</code></pre>\n"}],"owner":{"account_id":5545338,"reputation":155,"user_id":4400293,"accept_rate":100,"display_name":"Raoul Duke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77038590,"answer_count":1,"score":0,"last_activity_date":1693838444,"creation_date":1693837418,"question_id":77038550,"body_markdown":"Given:\r\n\r\n    List&lt;String&gt; myStrings = Arrays.asList(&quot;broom&quot;, &quot;monsoon&quot;);\r\n\r\nReturn:\r\n\r\n    Map&lt;String, Long&gt; stringToNumberOfVowels = Map.of(&quot;broom&quot;, 2, &quot;monsoon&quot;, 3);\r\n\r\nThis is what i&#39;ve tried:\r\n\r\n    Map&lt;String, Long&gt; vowelsMap = Stream.of(&quot;broom&quot;).flatMapToInt(String::chars).filter(&quot;aeiou&quot;.indexOf(c) &gt;= 0).mapToObj(c -&gt; &quot;aeiou&quot;.indexOf(c)&gt;=0 ? &quot;broom&quot; : &quot;&quot;).collect(Collectors.groupingBy(Function.indenty(), Collectors.counting()));\r\n\r\n    for(Map.Entry&lt;String, Long&gt; a : vowelsMap.entrySet()) { System.out.println(a.getKey() + &quot;==&gt;&quot;); System.out.println(a.getValue()); }\r\n\r\nMy Output (which only works with 1 string being passed in the stream): \r\n\r\nbroom ==&gt; 2\r\n\r\nDesired Output: \r\n\r\nbroom ==&gt; 2\r\n\r\nmonsoon ==&gt; 3","title":"How to convert a List&lt;String&gt; to Map&lt;String, Long&gt; using Lambda, where the key is the String and the value is a count of the number of vowels?","body":"<p>Given:</p>\n<pre><code>List&lt;String&gt; myStrings = Arrays.asList(&quot;broom&quot;, &quot;monsoon&quot;);\n</code></pre>\n<p>Return:</p>\n<pre><code>Map&lt;String, Long&gt; stringToNumberOfVowels = Map.of(&quot;broom&quot;, 2, &quot;monsoon&quot;, 3);\n</code></pre>\n<p>This is what i've tried:</p>\n<pre><code>Map&lt;String, Long&gt; vowelsMap = Stream.of(&quot;broom&quot;).flatMapToInt(String::chars).filter(&quot;aeiou&quot;.indexOf(c) &gt;= 0).mapToObj(c -&gt; &quot;aeiou&quot;.indexOf(c)&gt;=0 ? &quot;broom&quot; : &quot;&quot;).collect(Collectors.groupingBy(Function.indenty(), Collectors.counting()));\n\nfor(Map.Entry&lt;String, Long&gt; a : vowelsMap.entrySet()) { System.out.println(a.getKey() + &quot;==&gt;&quot;); System.out.println(a.getValue()); }\n</code></pre>\n<p>My Output (which only works with 1 string being passed in the stream):</p>\n<p>broom ==&gt; 2</p>\n<p>Desired Output:</p>\n<p>broom ==&gt; 2</p>\n<p>monsoon ==&gt; 3</p>\n"},{"tags":["java","apache-flink","apache-commons","iceberg","apache-iceberg"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693838935,"post_id":77038677,"comment_id":135809557,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":10871425,"reputation":3,"user_id":7993212,"display_name":"Robert Ruska"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693838430,"creation_date":1693838430,"question_id":77038677,"body_markdown":"Im trying to do some rewriteDataFiles job with Iceberg and Flink. It was working for a while but suddenly there is some error related to gzip stream CRC failure. Ive tried to change write.parquet.compression-codec to zstd but it didn&#39;t helped.\r\n\r\n```\r\norg.apache.iceberg.shaded.org.apache.parquet.io.ParquetDecodingException: could not read page Page [bytes.size=561526, valueCount=20000, uncompressedSize=561526] in col [payload, vertex, value] optional binary value (STRING) = 10\r\n\tat org.apache.iceberg.parquet.BasePageIterator.initFromPage(BasePageIterator.java:129) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.BasePageIterator$1.visit(BasePageIterator.java:99) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.BasePageIterator$1.visit(BasePageIterator.java:96) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.shaded.org.apache.parquet.column.page.DataPageV1.accept(DataPageV1.java:120) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.BasePageIterator.setPage(BasePageIterator.java:95) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.PageIterator.setPage(PageIterator.java:109) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.BaseColumnIterator.advance(BaseColumnIterator.java:61) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.ColumnIterator.currentDefinitionLevel(ColumnIterator.java:100) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.ParquetValueReaders$OptionReader.read(ParquetValueReaders.java:418) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.ParquetValueReaders$StructReader.read(ParquetValueReaders.java:745) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.ParquetValueReaders$OptionReader.read(ParquetValueReaders.java:419) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.ParquetValueReaders$StructReader.read(ParquetValueReaders.java:745) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.ParquetValueReaders$OptionReader.read(ParquetValueReaders.java:419) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.ParquetValueReaders$StructReader.read(ParquetValueReaders.java:745) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.ParquetReader$FileIterator.next(ParquetReader.java:130) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.io.FilterIterator.advance(FilterIterator.java:65) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.io.FilterIterator.hasNext(FilterIterator.java:49) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.flink.source.DataIterator.updateCurrentIterator(DataIterator.java:127) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.flink.source.DataIterator.hasNext(DataIterator.java:109) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.flink.source.RowDataRewriter$RewriteMap.map(RowDataRewriter.java:145) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.flink.source.RowDataRewriter$RewriteMap.map(RowDataRewriter.java:100) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.flink.streaming.api.operators.StreamMap.processElement(StreamMap.java:38) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.streaming.runtime.tasks.OneInputStreamTask$StreamTaskNetworkOutput.emitRecord(OneInputStreamTask.java:237) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.streaming.runtime.io.AbstractStreamTaskNetworkInput.processElement(AbstractStreamTaskNetworkInput.java:146) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.streaming.runtime.io.AbstractStreamTaskNetworkInput.emitNext(AbstractStreamTaskNetworkInput.java:110) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.streaming.runtime.io.StreamOneInputProcessor.processInput(StreamOneInputProcessor.java:65) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.streaming.runtime.tasks.StreamTask.processInput(StreamTask.java:550) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.runMailboxLoop(MailboxProcessor.java:231) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.streaming.runtime.tasks.StreamTask.runMailboxLoop(StreamTask.java:839) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:788) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.runtime.taskmanager.Task.runWithSystemExitMonitoring(Task.java:952) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.runtime.taskmanager.Task.restoreAndInvoke(Task.java:931) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:745) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat org.apache.flink.runtime.taskmanager.Task.run(Task.java:562) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\r\n\tat java.lang.Thread.run(Thread.java:832) ~[?:?]\r\nCaused by: java.io.IOException: gzip stream CRC failure\r\n\tat org.apache.hadoop.io.compress.zlib.BuiltInGzipDecompressor.executeTrailerState(BuiltInGzipDecompressor.java:371) ~[hadoop-common-3.3.0.jar:?]\r\n\tat org.apache.hadoop.io.compress.zlib.BuiltInGzipDecompressor.decompress(BuiltInGzipDecompressor.java:227) ~[hadoop-common-3.3.0.jar:?]\r\n\tat org.apache.hadoop.io.compress.DecompressorStream.decompress(DecompressorStream.java:111) ~[hadoop-common-3.3.0.jar:?]\r\n\tat org.apache.hadoop.io.compress.DecompressorStream.read(DecompressorStream.java:105) ~[hadoop-common-3.3.0.jar:?]\r\n\tat java.io.DataInputStream.readFully(DataInputStream.java:199) ~[?:?]\r\n\tat java.io.DataInputStream.readFully(DataInputStream.java:169) ~[?:?]\r\n\tat org.apache.iceberg.shaded.org.apache.parquet.bytes.BytesInput$StreamBytesInput.toByteArray(BytesInput.java:286) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.shaded.org.apache.parquet.bytes.BytesInput.toByteBuffer(BytesInput.java:237) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.shaded.org.apache.parquet.bytes.BytesInput.toInputStream(BytesInput.java:246) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\tat org.apache.iceberg.parquet.BasePageIterator.initFromPage(BasePageIterator.java:122) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\r\n\t... 34 more\r\n```","title":"Apache Iceberg - gzip stream CRC failure","body":"<p>Im trying to do some rewriteDataFiles job with Iceberg and Flink. It was working for a while but suddenly there is some error related to gzip stream CRC failure. Ive tried to change write.parquet.compression-codec to zstd but it didn't helped.</p>\n<pre><code>org.apache.iceberg.shaded.org.apache.parquet.io.ParquetDecodingException: could not read page Page [bytes.size=561526, valueCount=20000, uncompressedSize=561526] in col [payload, vertex, value] optional binary value (STRING) = 10\n    at org.apache.iceberg.parquet.BasePageIterator.initFromPage(BasePageIterator.java:129) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.BasePageIterator$1.visit(BasePageIterator.java:99) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.BasePageIterator$1.visit(BasePageIterator.java:96) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.shaded.org.apache.parquet.column.page.DataPageV1.accept(DataPageV1.java:120) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.BasePageIterator.setPage(BasePageIterator.java:95) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.PageIterator.setPage(PageIterator.java:109) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.BaseColumnIterator.advance(BaseColumnIterator.java:61) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.ColumnIterator.currentDefinitionLevel(ColumnIterator.java:100) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.ParquetValueReaders$OptionReader.read(ParquetValueReaders.java:418) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.ParquetValueReaders$StructReader.read(ParquetValueReaders.java:745) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.ParquetValueReaders$OptionReader.read(ParquetValueReaders.java:419) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.ParquetValueReaders$StructReader.read(ParquetValueReaders.java:745) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.ParquetValueReaders$OptionReader.read(ParquetValueReaders.java:419) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.ParquetValueReaders$StructReader.read(ParquetValueReaders.java:745) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.ParquetReader$FileIterator.next(ParquetReader.java:130) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.io.FilterIterator.advance(FilterIterator.java:65) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.io.FilterIterator.hasNext(FilterIterator.java:49) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.flink.source.DataIterator.updateCurrentIterator(DataIterator.java:127) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.flink.source.DataIterator.hasNext(DataIterator.java:109) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.flink.source.RowDataRewriter$RewriteMap.map(RowDataRewriter.java:145) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.flink.source.RowDataRewriter$RewriteMap.map(RowDataRewriter.java:100) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.flink.streaming.api.operators.StreamMap.processElement(StreamMap.java:38) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.streaming.runtime.tasks.OneInputStreamTask$StreamTaskNetworkOutput.emitRecord(OneInputStreamTask.java:237) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.streaming.runtime.io.AbstractStreamTaskNetworkInput.processElement(AbstractStreamTaskNetworkInput.java:146) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.streaming.runtime.io.AbstractStreamTaskNetworkInput.emitNext(AbstractStreamTaskNetworkInput.java:110) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.streaming.runtime.io.StreamOneInputProcessor.processInput(StreamOneInputProcessor.java:65) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.streaming.runtime.tasks.StreamTask.processInput(StreamTask.java:550) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.streaming.runtime.tasks.mailbox.MailboxProcessor.runMailboxLoop(MailboxProcessor.java:231) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.streaming.runtime.tasks.StreamTask.runMailboxLoop(StreamTask.java:839) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:788) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.runtime.taskmanager.Task.runWithSystemExitMonitoring(Task.java:952) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.runtime.taskmanager.Task.restoreAndInvoke(Task.java:931) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:745) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at org.apache.flink.runtime.taskmanager.Task.run(Task.java:562) ~[flink-dist-1.17-8307969c-szn.jar:1.17-8307969c-szn]\n    at java.lang.Thread.run(Thread.java:832) ~[?:?]\nCaused by: java.io.IOException: gzip stream CRC failure\n    at org.apache.hadoop.io.compress.zlib.BuiltInGzipDecompressor.executeTrailerState(BuiltInGzipDecompressor.java:371) ~[hadoop-common-3.3.0.jar:?]\n    at org.apache.hadoop.io.compress.zlib.BuiltInGzipDecompressor.decompress(BuiltInGzipDecompressor.java:227) ~[hadoop-common-3.3.0.jar:?]\n    at org.apache.hadoop.io.compress.DecompressorStream.decompress(DecompressorStream.java:111) ~[hadoop-common-3.3.0.jar:?]\n    at org.apache.hadoop.io.compress.DecompressorStream.read(DecompressorStream.java:105) ~[hadoop-common-3.3.0.jar:?]\n    at java.io.DataInputStream.readFully(DataInputStream.java:199) ~[?:?]\n    at java.io.DataInputStream.readFully(DataInputStream.java:169) ~[?:?]\n    at org.apache.iceberg.shaded.org.apache.parquet.bytes.BytesInput$StreamBytesInput.toByteArray(BytesInput.java:286) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.shaded.org.apache.parquet.bytes.BytesInput.toByteBuffer(BytesInput.java:237) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.shaded.org.apache.parquet.bytes.BytesInput.toInputStream(BytesInput.java:246) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    at org.apache.iceberg.parquet.BasePageIterator.initFromPage(BasePageIterator.java:122) ~[iceberg-flink-runtime-1.16-1.2.1.jar:?]\n    ... 34 more\n</code></pre>\n"},{"tags":["java","wildfly-9","thread-dump","jstack"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1693875615,"post_id":77038668,"comment_id":135814060,"body_markdown":"Please add more details to the question. Why do you expect that it _would_ appear in the application logs? The simplest explanations would be that there isn’t any logging statement in that code path at whatever log level is configured. Another possibility is that the thread is logging, but the logging configuration doesn’t include the thread name. Without knowing anything about the logging behavior or configuration, all we can do is guess.","body":"Please add more details to the question. Why do you expect that it <i>would</i> appear in the application logs? The simplest explanations would be that there isn’t any logging statement in that code path at whatever log level is configured. Another possibility is that the thread is logging, but the logging configuration doesn’t include the thread name. Without knowing anything about the logging behavior or configuration, all we can do is guess."},{"owner":{"account_id":2919614,"reputation":79,"user_id":2502171,"display_name":"vishal patel"},"score":0,"creation_date":1694007251,"post_id":77038668,"comment_id":135834591,"body_markdown":"@TimMoore\nWhy do you expect that it would appear in the application logs?\n&gt;&gt;We are getting slowness in our application, so we are finding long running thread from multiple thread dump.","body":"@TimMoore Why do you expect that it would appear in the application logs? &gt;&gt;We are getting slowness in our application, so we are finding long running thread from multiple thread dump."},{"owner":{"account_id":2919614,"reputation":79,"user_id":2502171,"display_name":"vishal patel"},"score":0,"creation_date":1694007301,"post_id":77038668,"comment_id":135834606,"body_markdown":"@TimMoore\nlog level is enabled in our application and also printed thread id. our application logs printed like\n\n&#39;2023-09-05 02:09:17,596 INFO  [com.test.solr.webservice.SearchAppConnector] (default task-92) executeSearch  -&gt; ReqId :[995_22015091957945137] --&gt; Enter &#39;\n\nWe are getting some runnable threads of thread dump in application logs, but some runnable threads are not getting.","body":"@TimMoore log level is enabled in our application and also printed thread id. our application logs printed like  &#39;2023-09-05 02:09:17,596 INFO  [com.test.solr.webservice.SearchAppConnector] (default task-92) executeSearch  -&gt; ReqId :[995_22015091957945137] --&gt; Enter &#39;  We are getting some runnable threads of thread dump in application logs, but some runnable threads are not getting."}],"owner":{"account_id":2919614,"reputation":79,"user_id":2502171,"display_name":"vishal patel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693838376,"creation_date":1693838376,"question_id":77038668,"body_markdown":"Our application is running in wildfly 9.0.1. We had taken thread dump using command **jstack -l** while application was running.\r\nOne of thread (default task-201) from thread dump is here\r\n \r\n\r\n    &quot;default task-201&quot; #631 prio=5 os_prio=0 tid=0x00007efa502db000 nid=0x3a06a6 runnable [0x00007ef9f7d6b000]\r\n       java.lang.Thread.State: RUNNABLE\r\n    \tat java.net.SocketInputStream.socketRead0(Native Method)\r\n    \tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n    \tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n    \tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n    \tat java.io.BufferedInputStream.fill(BufferedInputStream.java:246)\r\n    \tat java.io.BufferedInputStream.read(BufferedInputStream.java:265)\r\n    \t- locked &lt;0x00007f0430b2fae8&gt; (a java.io.BufferedInputStream)\r\n    \tat org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)\r\n    \tat org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)\r\n    \tat org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)\r\n    \tat org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)\r\n    \tat org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)\r\n    \tat org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)\r\n    \tat com.test.common.util.GZIPAwarePostMethod.execute(GZIPAwarePostMethod.java:38)\r\n    \tat org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)\r\n    \tat org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\r\n    \tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\r\n    \tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\r\n    \tat com.test.solr.webservice.SearchAppConnector.executeSearch(SearchAppConnector.java:76)\r\n    \tat com.test.solr.webservice.SearchAppConnector.executeSearch(SearchAppConnector.java:49)\r\n    \tat com.test.adoddle.search.helper.FileIndexSearchHelper.searchFiles(FileIndexSearchHelper.java:284)\r\n    \tat com.test.adoddle.service.FilesService.serchFiles(FilesService.java:491)\r\n    \tat com.test.adoddle.service.FilesService.serchFiles(FilesService.java:451)\r\n    \tat com.test.adoddle.service.listing.FileListing.getListing(FileListing.java:73)\r\n    \tat com.test.adoddle.control.common.AdoddleListingController.actionController(AdoddleListingController.java:60)\r\n    \tat com.test.base.presentation.BaseController.doPost(BaseController.java:408)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\r\n    \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:86)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:130)\r\n    \tat com.test.adoddle.filter.main.CachingFilter.doFilter(CachingFilter.java:66)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:132)\r\n    \tat com.test.adoddle.filter.main.URLRewriteFilter.doFilter(URLRewriteFilter.java:106)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:132)\r\n    \tat com.test.adoddle.filter.main.MainFilter.doFilter(MainFilter.java:156)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:132)\r\n    \tat com.test.adoddle.security.filter.SecurityFilter.processRequest(SecurityFilter.java:141)\r\n    \tat com.test.adoddle.security.filter.SecurityFilter.processFilter(SecurityFilter.java:77)\r\n    \tat com.test.adoddle.security.filter.BaseFilter.doFilter(BaseFilter.java:82)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:132)\r\n    \tat io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:85)\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n    \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)\r\n    \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n    \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n    \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58)\r\n    \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:72)\r\n    \tat io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n    \tat io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:282)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:261)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:80)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:172)\r\n    \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:199)\r\n    \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:774)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    \r\n       Locked ownable synchronizers:\r\n    \t- &lt;0x00007efd8a524ce0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\r\n\r\n\r\nWhen we find the **default task-201** in application logs, we did not get that. Why are we not finding **default task-201** in application logs? ","title":"Thread id of thread dump not found in application logs","body":"<p>Our application is running in wildfly 9.0.1. We had taken thread dump using command <strong>jstack -l</strong> while application was running.\nOne of thread (default task-201) from thread dump is here</p>\n<pre><code>&quot;default task-201&quot; #631 prio=5 os_prio=0 tid=0x00007efa502db000 nid=0x3a06a6 runnable [0x00007ef9f7d6b000]\n   java.lang.Thread.State: RUNNABLE\n    at java.net.SocketInputStream.socketRead0(Native Method)\n    at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\n    at java.net.SocketInputStream.read(SocketInputStream.java:171)\n    at java.net.SocketInputStream.read(SocketInputStream.java:141)\n    at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)\n    at java.io.BufferedInputStream.read(BufferedInputStream.java:265)\n    - locked &lt;0x00007f0430b2fae8&gt; (a java.io.BufferedInputStream)\n    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)\n    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)\n    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)\n    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)\n    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)\n    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)\n    at com.test.common.util.GZIPAwarePostMethod.execute(GZIPAwarePostMethod.java:38)\n    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)\n    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\n    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\n    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\n    at com.test.solr.webservice.SearchAppConnector.executeSearch(SearchAppConnector.java:76)\n    at com.test.solr.webservice.SearchAppConnector.executeSearch(SearchAppConnector.java:49)\n    at com.test.adoddle.search.helper.FileIndexSearchHelper.searchFiles(FileIndexSearchHelper.java:284)\n    at com.test.adoddle.service.FilesService.serchFiles(FilesService.java:491)\n    at com.test.adoddle.service.FilesService.serchFiles(FilesService.java:451)\n    at com.test.adoddle.service.listing.FileListing.getListing(FileListing.java:73)\n    at com.test.adoddle.control.common.AdoddleListingController.actionController(AdoddleListingController.java:60)\n    at com.test.base.presentation.BaseController.doPost(BaseController.java:408)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:86)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:130)\n    at com.test.adoddle.filter.main.CachingFilter.doFilter(CachingFilter.java:66)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:132)\n    at com.test.adoddle.filter.main.URLRewriteFilter.doFilter(URLRewriteFilter.java:106)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:132)\n    at com.test.adoddle.filter.main.MainFilter.doFilter(MainFilter.java:156)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:132)\n    at com.test.adoddle.security.filter.SecurityFilter.processRequest(SecurityFilter.java:141)\n    at com.test.adoddle.security.filter.SecurityFilter.processFilter(SecurityFilter.java:77)\n    at com.test.adoddle.security.filter.BaseFilter.doFilter(BaseFilter.java:82)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:60)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:132)\n    at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:85)\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58)\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:72)\n    at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n    at io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:282)\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:261)\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:80)\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:172)\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:199)\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:774)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n\n   Locked ownable synchronizers:\n    - &lt;0x00007efd8a524ce0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)\n</code></pre>\n<p>When we find the <strong>default task-201</strong> in application logs, we did not get that. Why are we not finding <strong>default task-201</strong> in application logs?</p>\n"},{"tags":["java","android","sockets","client-server","dataoutputstream"],"comments":[{"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"score":0,"creation_date":1502903911,"post_id":45719211,"comment_id":78397291,"body_markdown":"10.0.0.2 seens to be your mask name, not you pc adress in the network","body":"10.0.0.2 seens to be your mask name, not you pc adress in the network"},{"owner":{"account_id":11525526,"reputation":3,"user_id":8446117,"display_name":"Gujju123"},"score":0,"creation_date":1502904105,"post_id":45719211,"comment_id":78397411,"body_markdown":"I&#39;ve changed the code to run using my ip address but still doesn&#39;t work","body":"I&#39;ve changed the code to run using my ip address but still doesn&#39;t work"},{"owner":{"account_id":11525526,"reputation":3,"user_id":8446117,"display_name":"Gujju123"},"score":0,"creation_date":1502904231,"post_id":45719211,"comment_id":78397494,"body_markdown":"where it says my ip address entered is where i put in my ip address, i got my ip from googling my ip, could it be an ipv4 or ipv6 issue ??","body":"where it says my ip address entered is where i put in my ip address, i got my ip from googling my ip, could it be an ipv4 or ipv6 issue ??"},{"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"score":0,"creation_date":1502906862,"post_id":45719211,"comment_id":78398914,"body_markdown":"Your google seen ip is your internet modem address, your network address can be seen into the terminal by typing &quot;ipconfig&quot;","body":"Your google seen ip is your internet modem address, your network address can be seen into the terminal by typing &quot;ipconfig&quot;"},{"owner":{"account_id":11525526,"reputation":3,"user_id":8446117,"display_name":"Gujju123"},"score":0,"creation_date":1502907241,"post_id":45719211,"comment_id":78399110,"body_markdown":"I&#39;ve done that and tried that ip still no luck","body":"I&#39;ve done that and tried that ip still no luck"},{"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"score":0,"creation_date":1502908885,"post_id":45719211,"comment_id":78399880,"body_markdown":"Are you PC port open for receiving on 8080? Not sure how to do this","body":"Are you PC port open for receiving on 8080? Not sure how to do this"}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502903528,"creation_date":1502903528,"answer_id":45719443,"question_id":45719211,"body_markdown":"Localhost is the phone itself, not your computer.  If on a simulator, localhost is the simulator, not your computer-  the simulator doesn&#39;t know its a simulator, it has its own IP address.  Fix the IP you&#39;re using.","title":"cannot get android app to connect to my server on my local computer","body":"<p>Localhost is the phone itself, not your computer.  If on a simulator, localhost is the simulator, not your computer-  the simulator doesn't know its a simulator, it has its own IP address.  Fix the IP you're using.</p>\n"},{"tags":[],"owner":{"account_id":7832894,"reputation":68,"user_id":5922166,"display_name":"atlantis.pd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1502989776,"creation_date":1502989776,"answer_id":45741242,"question_id":45719211,"body_markdown":"I believe this is definitely just an issue with your IP, you are obviously giving ti the wrong ip address because everything else is fine. I would recommend either accessing the terminal and using the ifconfig command to find your ip or access your network settings, if your using a mac like I am select network , advance options , select tcp/ip tab and use ipv4 address as the ip address. If that doesn&#39;t work try using a different port or checking your firewall setting on your local computer. Hope that helps.  ","title":"cannot get android app to connect to my server on my local computer","body":"<p>I believe this is definitely just an issue with your IP, you are obviously giving ti the wrong ip address because everything else is fine. I would recommend either accessing the terminal and using the ifconfig command to find your ip or access your network settings, if your using a mac like I am select network , advance options , select tcp/ip tab and use ipv4 address as the ip address. If that doesn't work try using a different port or checking your firewall setting on your local computer. Hope that helps.  </p>\n"}],"owner":{"account_id":11525526,"reputation":3,"user_id":8446117,"display_name":"Gujju123"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1024,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":45741242,"answer_count":2,"score":0,"last_activity_date":1693838276,"creation_date":1502902774,"question_id":45719211,"body_markdown":"Hi I&#39;m new to android and Im\r\nTrying to get my android app to connect to a my server that is running on my local computer. Im just trying to get the app to send a simple string message to the server first but keep getting an error. From the print out statements i can see that the app terminates as soon as it hits the line with the try in it so i believe there is an issue with creating the client connection. I have also enable Internet,ACCESS_NETWORK_STATE, ACCESS_WIFI_STATE,READ_EXTERNAL_STORAGE,WRITE_EXTERNAL_STORAGE permissions\r\n\r\ni tried changing the localhost to InetAddress.getLocalHost() but still wouldn&#39;t work \r\n\r\nheres my code :\r\n\r\n    import android.content.Intent;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.util.StringBuilderPrinter;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    \r\n    import java.io.DataOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.ObjectOutputStream;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    \r\n    import static java.net.InetAddress.getLocalHost;\r\n    \r\n    public class MainActivity extends AppCompatActivity{\r\n        private Button cam;\r\n        private Socket client;\r\n        DataOutputStream os;\r\n        private String IP = &quot;localhost&quot;;\r\n        private static final String TAG = &quot;testing&quot;;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n\r\n            if (android.os.Build.VERSION.SDK_INT &gt; 9)\r\n            {\r\n                StrictMode.ThreadPolicy policy = new                      \r\n                StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n                StrictMode.setThreadPolicy(policy);\r\n            }\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n    \r\n            cam = (Button) findViewById(R.id.Button_camera);\r\n            cam.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n    \r\n                    Log.v(TAG, &quot;trying to connect to server&quot;);\r\n                    try {\r\n                        client = new Socket(&quot;My IP address entered&quot;, 8080);\r\n                        Log.v(TAG, &quot;client socket initalised&quot;);\r\n                        String hey = &quot;hey&quot;;\r\n                        os = new DataOutputStream(client.getOutputStream());\r\n                        Log.v(TAG, &quot;outptu stream created&quot;);\r\n                        os.flush();\r\n                        Log.v(TAG, &quot;flush&quot;);\r\n                        os.writeBytes(hey);\r\n                        Log.v(TAG, &quot;written to server&quot;);\r\n                        os.close();\r\n    \r\n    \r\n                    } catch (UnknownHostException e) {\r\n                        Log.v(TAG, &quot;Unknown error&quot;);\r\n                        Log.v(TAG, e.toString());\r\n                    } catch (IOException e) {\r\n                        Log.v(TAG, &quot;IO exception u numpty&quot;);\r\n                        Log.v(TAG, e.toString());\r\n                    }\r\n                    Intent intent = new Intent(MainActivity.this, Main2Activity.class);\r\n                    startActivity(intent);\r\n    \r\n    \r\n    \r\n                }\r\n            });\r\n    \r\n        }\r\n    }\r\n\r\nmy code prints out the statement trying to connect to server but doesn&#39;t reach any of the other print out statements and my server is still not receiving anything \r\n\r\n     connect failed: ETIMEDOUT (Connection timed out)\r\n    ACTION_DOWN before UnsetPressedState. invoking mUnsetPressedState.run()\r\n    I/Choreographer: Skipped 3792 frames!  The application may be doing too much work on its main thread.","title":"cannot get android app to connect to my server on my local computer","body":"<p>Hi I'm new to android and Im\nTrying to get my android app to connect to a my server that is running on my local computer. Im just trying to get the app to send a simple string message to the server first but keep getting an error. From the print out statements i can see that the app terminates as soon as it hits the line with the try in it so i believe there is an issue with creating the client connection. I have also enable Internet,ACCESS_NETWORK_STATE, ACCESS_WIFI_STATE,READ_EXTERNAL_STORAGE,WRITE_EXTERNAL_STORAGE permissions</p>\n\n<p>i tried changing the localhost to InetAddress.getLocalHost() but still wouldn't work </p>\n\n<p>heres my code :</p>\n\n<pre><code>import android.content.Intent;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.util.StringBuilderPrinter;\nimport android.view.View;\nimport android.widget.Button;\n\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.io.ObjectOutputStream;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\n\nimport static java.net.InetAddress.getLocalHost;\n\npublic class MainActivity extends AppCompatActivity{\n    private Button cam;\n    private Socket client;\n    DataOutputStream os;\n    private String IP = \"localhost\";\n    private static final String TAG = \"testing\";\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        if (android.os.Build.VERSION.SDK_INT &gt; 9)\n        {\n            StrictMode.ThreadPolicy policy = new                      \n            StrictMode.ThreadPolicy.Builder().permitAll().build();\n            StrictMode.setThreadPolicy(policy);\n        }\n        setContentView(R.layout.activity_main);\n\n\n\n        cam = (Button) findViewById(R.id.Button_camera);\n        cam.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n\n                Log.v(TAG, \"trying to connect to server\");\n                try {\n                    client = new Socket(\"My IP address entered\", 8080);\n                    Log.v(TAG, \"client socket initalised\");\n                    String hey = \"hey\";\n                    os = new DataOutputStream(client.getOutputStream());\n                    Log.v(TAG, \"outptu stream created\");\n                    os.flush();\n                    Log.v(TAG, \"flush\");\n                    os.writeBytes(hey);\n                    Log.v(TAG, \"written to server\");\n                    os.close();\n\n\n                } catch (UnknownHostException e) {\n                    Log.v(TAG, \"Unknown error\");\n                    Log.v(TAG, e.toString());\n                } catch (IOException e) {\n                    Log.v(TAG, \"IO exception u numpty\");\n                    Log.v(TAG, e.toString());\n                }\n                Intent intent = new Intent(MainActivity.this, Main2Activity.class);\n                startActivity(intent);\n\n\n\n            }\n        });\n\n    }\n}\n</code></pre>\n\n<p>my code prints out the statement trying to connect to server but doesn't reach any of the other print out statements and my server is still not receiving anything </p>\n\n<pre><code> connect failed: ETIMEDOUT (Connection timed out)\nACTION_DOWN before UnsetPressedState. invoking mUnsetPressedState.run()\nI/Choreographer: Skipped 3792 frames!  The application may be doing too much work on its main thread.\n</code></pre>\n"},{"tags":["java","algorithm","3d","collision-detection","lwjgl"],"comments":[{"owner":{"account_id":4792116,"reputation":7079,"user_id":3871028,"display_name":"Ripi2"},"score":0,"creation_date":1693853983,"post_id":77038645,"comment_id":135812012,"body_markdown":"https://stackoverflow.com/search?q=AABB+collision","body":"<a href=\"https://stackoverflow.com/search?q=AABB+collision\">stackoverflow.com/search?q=AABB+collision</a>"}],"owner":{"account_id":28779521,"reputation":47,"user_id":22041411,"display_name":"notwhale"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1693838145,"creation_date":1693838145,"question_id":77038645,"body_markdown":"I am making a Java 3D project using lwjgl.\r\n\r\nI cannot implement a method that returns boolean when a shape collides with another shape.\r\nAABB does not work for spheres, cylinders and other complex shapes. \r\n\r\nI came up with an algorithm that checks each edge for intersection with an edge of another object, and for optimization I decided to start detection from the average of the positions.\r\nBut my knowledge was not enough.\r\n\r\nAABB collision detection algorithm:\r\n(does not work correctly for negative positions)\r\n```\r\npackage Engine;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport org.joml.Matrix4f;\r\nimport org.joml.Vector3f;\r\n\r\n\r\npublic abstract class Component {\r\n    private Vector3f pos = new Vector3f(0, 0, 0);\r\n    private Vector3f rotate = new Vector3f(0, 0, 0);\r\n    private Vector3f scale = new Vector3f(1, 1, 1);\r\n\r\n    public boolean checkColision(Component component) {\r\n        ArrayList&lt;Vector3f&gt; transformedVertices = transformVertices();\r\n        ArrayList&lt;Vector3f&gt; componentTransformedVertices = component.transformVertices();\r\n\r\n        Vector3f max = new Vector3f(Float.MIN_VALUE, Float.MIN_VALUE, Float.MIN_VALUE);\r\n        Vector3f min = new Vector3f(Float.MAX_VALUE, Float.MAX_VALUE, Float.MAX_VALUE);\r\n\r\n        for(Vector3f vertex : transformedVertices) {\r\n            if(vertex.x &gt; max.x) max.x = vertex.x;\r\n            if(vertex.y &gt; max.y) max.y = vertex.y;\r\n            if(vertex.z &gt; max.z) max.z = vertex.z;\r\n\r\n            if(vertex.x &lt; min.x) min.x = vertex.x;\r\n            if(vertex.y &lt; min.y) min.y = vertex.y;\r\n            if(vertex.z &lt; min.z) min.z = vertex.z;\r\n        }\r\n\r\n        Vector3f componentMax = new Vector3f(Float.MIN_VALUE, Float.MIN_VALUE, Float.MIN_VALUE);\r\n        Vector3f componentMin = new Vector3f(Float.MAX_VALUE, Float.MAX_VALUE, Float.MAX_VALUE);\r\n\r\n        for(Vector3f vertex : componentTransformedVertices) {\r\n            if(vertex.x &gt; componentMax.x) componentMax.x = vertex.x;\r\n            if(vertex.y &gt; componentMax.y) componentMax.y = vertex.y;\r\n            if(vertex.z &gt; componentMax.z) componentMax.z = vertex.z;\r\n\r\n            if(vertex.x &lt; componentMin.x) componentMin.x = vertex.x;\r\n            if(vertex.y &lt; componentMin.y) componentMin.y = vertex.y;\r\n            if(vertex.z &lt; componentMin.z) componentMin.z = vertex.z;\r\n        }\r\n\r\n        if (max.x &lt;= componentMin.x || min.x &gt;= componentMax.x) return false;\r\n        if (max.y &lt;= componentMin.y || min.y &gt;= componentMax.y) return false;\r\n        if (max.z &lt;= componentMin.z || min.z &gt;= componentMax.z) return false;\r\n        return true;\r\n    }\r\n\r\n    public abstract void render();\r\n    public abstract ArrayList&lt;Vector3f&gt; getVertices();\r\n\r\n    public ArrayList&lt;Vector3f&gt; transformVertices() {\r\n        ArrayList&lt;Vector3f&gt; transformedVertices = new ArrayList&lt;&gt;();\r\n        Matrix4f transformationMatrix = new Matrix4f()\r\n            .translate(pos)\r\n            .rotateX((float) Math.toRadians(rotate.x))\r\n            .rotateY((float) Math.toRadians(rotate.y))\r\n            .rotateZ((float) Math.toRadians(rotate.z))\r\n            .scale(scale);\r\n\r\n        for (Vector3f vertex : getVertices()) {\r\n            Vector3f transformedVertex = new Vector3f(vertex);\r\n            transformedVertex.mulPosition(transformationMatrix);\r\n            transformedVertices.add(transformedVertex);\r\n        }\r\n\r\n        return transformedVertices;\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"I can&#39;t find a good and understandable algorithm for detecting collisions of two figures","body":"<p>I am making a Java 3D project using lwjgl.</p>\n<p>I cannot implement a method that returns boolean when a shape collides with another shape.\nAABB does not work for spheres, cylinders and other complex shapes.</p>\n<p>I came up with an algorithm that checks each edge for intersection with an edge of another object, and for optimization I decided to start detection from the average of the positions.\nBut my knowledge was not enough.</p>\n<p>AABB collision detection algorithm:\n(does not work correctly for negative positions)</p>\n<pre><code>package Engine;\n\nimport java.util.ArrayList;\n\nimport org.joml.Matrix4f;\nimport org.joml.Vector3f;\n\n\npublic abstract class Component {\n    private Vector3f pos = new Vector3f(0, 0, 0);\n    private Vector3f rotate = new Vector3f(0, 0, 0);\n    private Vector3f scale = new Vector3f(1, 1, 1);\n\n    public boolean checkColision(Component component) {\n        ArrayList&lt;Vector3f&gt; transformedVertices = transformVertices();\n        ArrayList&lt;Vector3f&gt; componentTransformedVertices = component.transformVertices();\n\n        Vector3f max = new Vector3f(Float.MIN_VALUE, Float.MIN_VALUE, Float.MIN_VALUE);\n        Vector3f min = new Vector3f(Float.MAX_VALUE, Float.MAX_VALUE, Float.MAX_VALUE);\n\n        for(Vector3f vertex : transformedVertices) {\n            if(vertex.x &gt; max.x) max.x = vertex.x;\n            if(vertex.y &gt; max.y) max.y = vertex.y;\n            if(vertex.z &gt; max.z) max.z = vertex.z;\n\n            if(vertex.x &lt; min.x) min.x = vertex.x;\n            if(vertex.y &lt; min.y) min.y = vertex.y;\n            if(vertex.z &lt; min.z) min.z = vertex.z;\n        }\n\n        Vector3f componentMax = new Vector3f(Float.MIN_VALUE, Float.MIN_VALUE, Float.MIN_VALUE);\n        Vector3f componentMin = new Vector3f(Float.MAX_VALUE, Float.MAX_VALUE, Float.MAX_VALUE);\n\n        for(Vector3f vertex : componentTransformedVertices) {\n            if(vertex.x &gt; componentMax.x) componentMax.x = vertex.x;\n            if(vertex.y &gt; componentMax.y) componentMax.y = vertex.y;\n            if(vertex.z &gt; componentMax.z) componentMax.z = vertex.z;\n\n            if(vertex.x &lt; componentMin.x) componentMin.x = vertex.x;\n            if(vertex.y &lt; componentMin.y) componentMin.y = vertex.y;\n            if(vertex.z &lt; componentMin.z) componentMin.z = vertex.z;\n        }\n\n        if (max.x &lt;= componentMin.x || min.x &gt;= componentMax.x) return false;\n        if (max.y &lt;= componentMin.y || min.y &gt;= componentMax.y) return false;\n        if (max.z &lt;= componentMin.z || min.z &gt;= componentMax.z) return false;\n        return true;\n    }\n\n    public abstract void render();\n    public abstract ArrayList&lt;Vector3f&gt; getVertices();\n\n    public ArrayList&lt;Vector3f&gt; transformVertices() {\n        ArrayList&lt;Vector3f&gt; transformedVertices = new ArrayList&lt;&gt;();\n        Matrix4f transformationMatrix = new Matrix4f()\n            .translate(pos)\n            .rotateX((float) Math.toRadians(rotate.x))\n            .rotateY((float) Math.toRadians(rotate.y))\n            .rotateZ((float) Math.toRadians(rotate.z))\n            .scale(scale);\n\n        for (Vector3f vertex : getVertices()) {\n            Vector3f transformedVertex = new Vector3f(vertex);\n            transformedVertex.mulPosition(transformationMatrix);\n            transformedVertices.add(transformedVertex);\n        }\n\n        return transformedVertices;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1445276,"reputation":8644,"user_id":1364007,"display_name":"Wai Ha Lee"},"score":0,"creation_date":1429686830,"post_id":29790229,"comment_id":47709443,"body_markdown":"Can you elaborate on &quot;*did not worked out*&quot;?","body":"Can you elaborate on &quot;<i>did not worked out</i>&quot;?"},{"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1429690401,"post_id":29790229,"comment_id":47711730,"body_markdown":"So, you also want to insert a space right where `&gt;&lt;` are? Can we replace all `&gt;&lt;` with a space in arbitrary places? You cannot remove and insert at the same time, you&#39;ll need 2 regexes, or 1 regex and a simple replace.","body":"So, you also want to insert a space right where <code>&gt;&lt;</code> are? Can we replace all <code>&gt;&lt;</code> with a space in arbitrary places? You cannot remove and insert at the same time, you&#39;ll need 2 regexes, or 1 regex and a simple replace."},{"owner":{"account_id":5720487,"reputation":16685,"user_id":4519059,"accept_rate":44,"display_name":"shA.t"},"score":0,"creation_date":1693838093,"post_id":29790229,"comment_id":135809354,"body_markdown":"Please do not use regex to modify XML - HTH ;)","body":"Please do not use regex to modify XML - HTH ;)"}],"answers":[{"tags":[],"owner":{"account_id":2444936,"reputation":105529,"user_id":2867928,"accept_rate":90,"display_name":"Mazdak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429687124,"creation_date":1429687124,"answer_id":29790388,"question_id":29790229,"body_markdown":"You need to put `?` within the first group to make it none greedy, also you dont need `Answer=.*?`: \r\n\r\n    str1.replaceAll(&quot;&lt;([^&lt;]*?)&gt;&quot;, &quot;$1&quot;)\r\n\r\n[DEMO][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/tW6zC3/1","title":"Need java Regex to remove/replace the XML elements from specific string","body":"<p>You need to put <code>?</code> within the first group to make it none greedy, also you dont need <code>Answer=.*?</code>: </p>\n\n<pre><code>str1.replaceAll(\"&lt;([^&lt;]*?)&gt;\", \"$1\")\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/tW6zC3/1\" rel=\"nofollow\">DEMO</a></p>\n"},{"tags":[],"owner":{"account_id":5139153,"reputation":3351,"user_id":4117061,"accept_rate":93,"display_name":"Prasanna Kumar H A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429687214,"creation_date":1429687214,"answer_id":29790427,"question_id":29790229,"body_markdown":"`httpRequest.send(&quot;msg=&quot;+data+&quot;&amp;TC=&quot;+TC);` try like this","title":"Need java Regex to remove/replace the XML elements from specific string","body":"<p><code>httpRequest.send(\"msg=\"+data+\"&amp;TC=\"+TC);</code> try like this</p>\n"},{"tags":[],"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429690911,"creation_date":1429690911,"answer_id":29791654,"question_id":29790229,"body_markdown":"Although variable width look-behinds are not supported in Java, you can work around it with `.{0,1000}` that should suffice.\r\n\r\nPlease check out this approach using 2 regexes, or 1 regex and 1 `replace`. Choose the one that suits best (I removed the `\\n` line break from the first input string to show the flaw with using simple `replace`):\r\n\r\n    String input = &quot;&lt;user_input&gt;&lt;UserInput Question=\\&quot;test Q?\\&quot; Answer=&lt;value&gt;0&lt;/value&gt;&lt;sam@testmail.com&gt;\\&quot;\\n&lt;/user_input&gt;&quot;;\r\n    String st = input.replace(&quot;&gt;&lt;&quot;, &quot; &quot;).replaceAll(&quot;(?&lt;=Answer=.{0,1000})[&lt;&gt;/]+(?=[^\\&quot;]*\\&quot;)&quot;, &quot;&quot;);\r\n    String st1 = input.replaceAll(&quot;(?&lt;=Answer=.{0,1000})&gt;&lt;(?=[^\\&quot;]*\\&quot;)&quot;, &quot; &quot;).replaceAll(&quot;(?&lt;=Answer=.{0,1000})[&lt;&gt;/]+(?=[^\\&quot;]*\\&quot;)&quot;, &quot;&quot;);\r\n    System.out.println(st + &quot;\\n&quot; + st1);\r\n\r\nOutput of a [sample program][1]:\r\n\r\n    &lt;user_input UserInput Question=&quot;test Q?&quot; Answer=value0value sam@testmail.com&quot;                                                                                                                                                                          \r\n    &lt;/user_input&gt;  \r\n                                                                                                                                                                                                                                        \r\n    &lt;user_input&gt;&lt;UserInput Question=&quot;test Q?&quot; Answer=value0value sam@testmail.com&quot;                                                                                                                                                                         \r\n    &lt;/user_input&gt;  \r\n\r\n\r\n  [1]: http://www.tutorialspoint.com/compile_java_online.php?PID=0Bw_CjBb95KQMMEtfcjdiRjFIYjA","title":"Need java Regex to remove/replace the XML elements from specific string","body":"<p>Although variable width look-behinds are not supported in Java, you can work around it with <code>.{0,1000}</code> that should suffice.</p>\n\n<p>Please check out this approach using 2 regexes, or 1 regex and 1 <code>replace</code>. Choose the one that suits best (I removed the <code>\\n</code> line break from the first input string to show the flaw with using simple <code>replace</code>):</p>\n\n<pre><code>String input = \"&lt;user_input&gt;&lt;UserInput Question=\\\"test Q?\\\" Answer=&lt;value&gt;0&lt;/value&gt;&lt;sam@testmail.com&gt;\\\"\\n&lt;/user_input&gt;\";\nString st = input.replace(\"&gt;&lt;\", \" \").replaceAll(\"(?&lt;=Answer=.{0,1000})[&lt;&gt;/]+(?=[^\\\"]*\\\")\", \"\");\nString st1 = input.replaceAll(\"(?&lt;=Answer=.{0,1000})&gt;&lt;(?=[^\\\"]*\\\")\", \" \").replaceAll(\"(?&lt;=Answer=.{0,1000})[&lt;&gt;/]+(?=[^\\\"]*\\\")\", \"\");\nSystem.out.println(st + \"\\n\" + st1);\n</code></pre>\n\n<p>Output of a <a href=\"http://www.tutorialspoint.com/compile_java_online.php?PID=0Bw_CjBb95KQMMEtfcjdiRjFIYjA\" rel=\"nofollow\">sample program</a>:</p>\n\n<pre><code>&lt;user_input UserInput Question=\"test Q?\" Answer=value0value sam@testmail.com\"                                                                                                                                                                          \n&lt;/user_input&gt;  \n\n&lt;user_input&gt;&lt;UserInput Question=\"test Q?\" Answer=value0value sam@testmail.com\"                                                                                                                                                                         \n&lt;/user_input&gt;  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5018558,"reputation":71,"user_id":4032717,"display_name":"Phyln"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669816685,"creation_date":1669816685,"answer_id":74628982,"question_id":29790229,"body_markdown":"First off, in your sample above, there is a trailing `&quot;` after the email and `&gt;` which I do not know if it was placed by error.\r\n\r\nHowever, I will keep it there as according to your expected result, you need it to still be present.\r\n\r\nThis is my hack.\r\n\r\n`(Answer=)(&lt;)(value)(&gt;)(.+?([^&lt;]*))(&lt;/)(value)(&gt;&lt;)(.+?([^&gt;]*))(&gt;)` to replace it with\r\n\r\n    $1$3$5$8 $10\r\n\r\n**The explanation...**\r\n\r\n`(Answer=)(&lt;)(value)(&gt;)` matches from Answer to the start of the value 0\r\n\r\n`(.+?([^&lt;]*)` matches the result from 0 or more right to the beginning `&lt;` which starts the closing value tag\r\n\r\n`(&lt;/)` here, I still select this since it was dropped in the previous expression\r\n\r\n`(&gt;&lt;)` I will later replace this with a space\r\n\r\n`(.+?([^&gt;]*)` This matches from the start of the email and excludes the `&gt;` after the .com\r\n\r\n`(&gt;)` this one selects the last `&gt;` which I will later drop when replacing.\r\n\r\nThe trailing `&quot;` is not selected as I will rather not touch it as requested.\r\n","title":"Need java Regex to remove/replace the XML elements from specific string","body":"<p>First off, in your sample above, there is a trailing <code>&quot;</code> after the email and <code>&gt;</code> which I do not know if it was placed by error.</p>\n<p>However, I will keep it there as according to your expected result, you need it to still be present.</p>\n<p>This is my hack.</p>\n<p><code>(Answer=)(&lt;)(value)(&gt;)(.+?([^&lt;]*))(&lt;/)(value)(&gt;&lt;)(.+?([^&gt;]*))(&gt;)</code> to replace it with</p>\n<pre><code>$1$3$5$8 $10\n</code></pre>\n<p><strong>The explanation...</strong></p>\n<p><code>(Answer=)(&lt;)(value)(&gt;)</code> matches from Answer to the start of the value 0</p>\n<p><code>(.+?([^&lt;]*)</code> matches the result from 0 or more right to the beginning <code>&lt;</code> which starts the closing value tag</p>\n<p><code>(&lt;/)</code> here, I still select this since it was dropped in the previous expression</p>\n<p><code>(&gt;&lt;)</code> I will later replace this with a space</p>\n<p><code>(.+?([^&gt;]*)</code> This matches from the start of the email and excludes the <code>&gt;</code> after the .com</p>\n<p><code>(&gt;)</code> this one selects the last <code>&gt;</code> which I will later drop when replacing.</p>\n<p>The trailing <code>&quot;</code> is not selected as I will rather not touch it as requested.</p>\n"}],"owner":{"account_id":389165,"reputation":757,"user_id":748466,"accept_rate":48,"display_name":"samash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2084,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1693838056,"creation_date":1429686635,"question_id":29790229,"body_markdown":"I have a problem in getting the correct Regular expression.I have below xml as string\r\n```xml\r\n    &lt;user_input&gt;\r\n    &lt;UserInput Question=&quot;test Q?&quot; Answer=&lt;value&gt;0&lt;/value&gt;&lt;sam@testmail.com&gt;&quot;\r\n    &lt;/user_input&gt;\r\n```\r\nNow I need to remove the xml character from Answer attribute only.\r\nSo I need the below:-\r\n```xml\r\n    &lt;user_input&gt;\r\n    &lt;UserInput Question=&quot;test Q?&quot; Answer=value0value sam@testmail.com&quot;\r\n    &lt;/user_input&gt;\r\n```\r\nI have tried the below regex but did not worked out:-\r\n\r\n    str1.replaceAll(&quot;Answer=.*?&lt;([^&lt;]*)&gt;&quot;, &quot;$1&quot;);\r\n\r\nit&#39;s removing all the text before..\r\n\r\nCan anyone help please?","title":"Need java Regex to remove/replace the XML elements from specific string","body":"<p>I have a problem in getting the correct Regular expression.I have below xml as string</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;user_input&gt;\n    &lt;UserInput Question=&quot;test Q?&quot; Answer=&lt;value&gt;0&lt;/value&gt;&lt;sam@testmail.com&gt;&quot;\n    &lt;/user_input&gt;\n</code></pre>\n<p>Now I need to remove the xml character from Answer attribute only.\nSo I need the below:-</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;user_input&gt;\n    &lt;UserInput Question=&quot;test Q?&quot; Answer=value0value sam@testmail.com&quot;\n    &lt;/user_input&gt;\n</code></pre>\n<p>I have tried the below regex but did not worked out:-</p>\n<pre><code>str1.replaceAll(&quot;Answer=.*?&lt;([^&lt;]*)&gt;&quot;, &quot;$1&quot;);\n</code></pre>\n<p>it's removing all the text before..</p>\n<p>Can anyone help please?</p>\n"},{"tags":["java","apache-spark","amazon-emr"],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693837624,"creation_date":1693429305,"question_id":77011497,"body_markdown":"I&#39;m creating transient EMR cluster using following lambda code : \r\n\r\n  \r\n\r\n       List&lt;Configuration&gt; configurations = new ArrayList&lt;&gt;();\r\n                configurations.add(new Configuration()\r\n                    .withClassification(&quot;emrfs-site&quot;)\r\n                    .withProperties(Collections.singletonMap(&quot;fs.s3.consistent.retryPolicyType&quot;, &quot;fixed&quot;)));\r\n    \r\n                configurations.add(new Configuration()\r\n                    .withClassification(&quot;spark&quot;)\r\n                    .withProperties(Collections.singletonMap(&quot;maximizeResourceAllocation&quot;, &quot;true&quot;)));\r\n    \r\n                Map&lt;String,String&gt; config = new HashMap&lt;&gt;();\r\n                config.put(&quot;JAVA_HOME&quot;, &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;);\r\n                config.put(&quot;spark.driver.defaultJavaOptions&quot;, &quot;-XX:OnOutOfMemoryError=&#39;kill -9 %p&#39; -XX:MaxHeapFreeRatio=70&quot;);\r\n                config.put(&quot;spark.executor.defaultJavaOptions&quot;, &quot;-verbose:gc -Xlog:gc*::time -XX:+PrintGCDetails -XX:OnOutOfMemoryError=&#39;kill -9 %p&#39; -XX:MaxHeapFreeRatio=70 -XX:+IgnoreUnrecognizedVMOptions&quot;);\r\n    \r\n    \r\n                configurations.add(new Configuration()\r\n                    .withClassification(&quot;spark-env&quot;)\r\n                    .withConfigurations(Collections.singletonList(\r\n                        new Configuration()\r\n                            .withClassification(&quot;export&quot;)\r\n                            .withProperties(Collections.singletonMap(&quot;JAVA_HOME&quot;,&quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;))\r\n                    )));\r\n    \r\n                configurations.add(new Configuration()\r\n                    .withClassification(&quot;spark-defaults&quot;)\r\n                    .withProperties(config));\r\n    \r\n                //collect customer IDs\r\n                String customerIds = input.getCustomerIds();\r\n                if (customerIds == null || customerIds.trim().equals(&quot;&quot;)) {\r\n                      Set&lt;String&gt; results = new HashSet&lt;&gt;();\r\n                      final AmazonDynamoDB client = AmazonDynamoDBClientBuilder.defaultClient();\r\n                      Map&lt;String, AttributeValue&gt; lastKeyEvaluated = null;\r\n                      do {\r\n                            ScanRequest scanRequest = new ScanRequest()\r\n                                .withTableName(tableName)\r\n                                .withExclusiveStartKey(lastKeyEvaluated);\r\n                            ScanResult result = client.scan(scanRequest);\r\n                            for (Map&lt;String, AttributeValue&gt; item : result.getItems()) {\r\n                                  results.add(item.get(PARTITION_KEY).getS());\r\n                            }\r\n                            lastKeyEvaluated = result.getLastEvaluatedKey();\r\n                      } while (lastKeyEvaluated != null);\r\n                      customerIds = String.join(&quot;,&quot;, results);\r\n                }\r\n    \r\n                //send to EMR cluster\r\n                List&lt;String&gt; sparkSubmitArgs = new ArrayList&lt;&gt;();\r\n                sparkSubmitArgs.add(&quot;spark-submit&quot;);\r\n                sparkSubmitArgs.add(&quot;--master&quot;);\r\n                sparkSubmitArgs.add(&quot;yarn&quot;);\r\n                sparkSubmitArgs.add(&quot;--deploy-mode&quot;);\r\n                sparkSubmitArgs.add(&quot;cluster&quot;);\r\n                sparkSubmitArgs.add(&quot;--class&quot;);\r\n                sparkSubmitArgs.add(&quot;spark.sparkjob.CreateSitemapFile&quot;);\r\n                sparkSubmitArgs.add(backendCode);\r\n                sparkSubmitArgs.add(customerIds);\r\n                sparkSubmitArgs.add(s3FinalOutput);\r\n                sparkSubmitArgs.add(s3SparkIntermediate);\r\n                sparkSubmitArgs.add(tableName);\r\n                AmazonElasticMapReduce emr = AmazonElasticMapReduceClientBuilder.defaultClient();\r\n                emr.runJobFlow(\r\n                    new RunJobFlowRequest()\r\n                        .withName(&quot;sitemap_xml_generation&quot;)\r\n                        .withInstances(\r\n                            new JobFlowInstancesConfig()\r\n                                .withInstanceGroups(\r\n                                    new InstanceGroupConfig()\r\n                                        .withName(&quot;Master&quot;)\r\n                                        .withMarket(MarketType.ON_DEMAND)\r\n                                        .withInstanceRole(InstanceRoleType.MASTER)\r\n                                        .withInstanceType(&quot;m3.xlarge&quot;)\r\n                                        .withInstanceCount(1),\r\n                                    new InstanceGroupConfig()\r\n                                        .withName(&quot;Slave&quot;)\r\n                                        .withMarket(MarketType.ON_DEMAND)\r\n                                        .withInstanceRole(InstanceRoleType.CORE)\r\n                                        .withInstanceType(&quot;m3.xlarge&quot;)\r\n                                        .withInstanceCount(3)\r\n                                )\r\n                                .withKeepJobFlowAliveWhenNoSteps(false)\r\n                                .withTerminationProtected(false)\r\n                                .withEc2SubnetId(subnetId)\r\n    \r\n                        )\r\n                        .withLogUri(emrLogUri)\r\n                        .withReleaseLabel(EMR_VERSION)\r\n                        //.withBootstrapActions(bootstrapActions)\r\n                        .withSteps(\r\n                            new StepConfig()\r\n                                .withName(&quot;processFile&quot;)\r\n                                .withActionOnFailure(ActionOnFailure.CONTINUE)\r\n                                .withHadoopJarStep(\r\n                                    new HadoopJarStepConfig()\r\n                                        .withJar(&quot;command-runner.jar&quot;)\r\n                                        .withArgs(sparkSubmitArgs)\r\n                                )\r\n                        )\r\n                        .withVisibleToAllUsers(true)\r\n                        .withJobFlowRole(emrJobFlowRole)\r\n                        .withServiceRole(emrServiceRole)\r\n                        .withApplications(\r\n                            new Application()\r\n                                .withName(&quot;Spark&quot;),\r\n                            new Application()\r\n                                .withName(&quot;Hive&quot;)\r\n                        )\r\n                        .withConfigurations(configurations)\r\n                );\r\n\r\nI&#39;ve tried to follow instruction I found in [this answer][1] in order to run java 11 code for Spark, but I&#39;m still facing error : `&quot;Java Runtime only recognizes class file versions up to 52.0&quot;`\r\n\r\nAny help is appreciated.\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/70886684/how-to-use-java-runtime-11-in-emr-cluster-aws","title":"Set Java version 11 in transient EMR Cluster for Spark","body":"<p>I'm creating transient EMR cluster using following lambda code :</p>\n<pre><code>   List&lt;Configuration&gt; configurations = new ArrayList&lt;&gt;();\n            configurations.add(new Configuration()\n                .withClassification(&quot;emrfs-site&quot;)\n                .withProperties(Collections.singletonMap(&quot;fs.s3.consistent.retryPolicyType&quot;, &quot;fixed&quot;)));\n\n            configurations.add(new Configuration()\n                .withClassification(&quot;spark&quot;)\n                .withProperties(Collections.singletonMap(&quot;maximizeResourceAllocation&quot;, &quot;true&quot;)));\n\n            Map&lt;String,String&gt; config = new HashMap&lt;&gt;();\n            config.put(&quot;JAVA_HOME&quot;, &quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;);\n            config.put(&quot;spark.driver.defaultJavaOptions&quot;, &quot;-XX:OnOutOfMemoryError='kill -9 %p' -XX:MaxHeapFreeRatio=70&quot;);\n            config.put(&quot;spark.executor.defaultJavaOptions&quot;, &quot;-verbose:gc -Xlog:gc*::time -XX:+PrintGCDetails -XX:OnOutOfMemoryError='kill -9 %p' -XX:MaxHeapFreeRatio=70 -XX:+IgnoreUnrecognizedVMOptions&quot;);\n\n\n            configurations.add(new Configuration()\n                .withClassification(&quot;spark-env&quot;)\n                .withConfigurations(Collections.singletonList(\n                    new Configuration()\n                        .withClassification(&quot;export&quot;)\n                        .withProperties(Collections.singletonMap(&quot;JAVA_HOME&quot;,&quot;/usr/lib/jvm/java-11-amazon-corretto.x86_64&quot;))\n                )));\n\n            configurations.add(new Configuration()\n                .withClassification(&quot;spark-defaults&quot;)\n                .withProperties(config));\n\n            //collect customer IDs\n            String customerIds = input.getCustomerIds();\n            if (customerIds == null || customerIds.trim().equals(&quot;&quot;)) {\n                  Set&lt;String&gt; results = new HashSet&lt;&gt;();\n                  final AmazonDynamoDB client = AmazonDynamoDBClientBuilder.defaultClient();\n                  Map&lt;String, AttributeValue&gt; lastKeyEvaluated = null;\n                  do {\n                        ScanRequest scanRequest = new ScanRequest()\n                            .withTableName(tableName)\n                            .withExclusiveStartKey(lastKeyEvaluated);\n                        ScanResult result = client.scan(scanRequest);\n                        for (Map&lt;String, AttributeValue&gt; item : result.getItems()) {\n                              results.add(item.get(PARTITION_KEY).getS());\n                        }\n                        lastKeyEvaluated = result.getLastEvaluatedKey();\n                  } while (lastKeyEvaluated != null);\n                  customerIds = String.join(&quot;,&quot;, results);\n            }\n\n            //send to EMR cluster\n            List&lt;String&gt; sparkSubmitArgs = new ArrayList&lt;&gt;();\n            sparkSubmitArgs.add(&quot;spark-submit&quot;);\n            sparkSubmitArgs.add(&quot;--master&quot;);\n            sparkSubmitArgs.add(&quot;yarn&quot;);\n            sparkSubmitArgs.add(&quot;--deploy-mode&quot;);\n            sparkSubmitArgs.add(&quot;cluster&quot;);\n            sparkSubmitArgs.add(&quot;--class&quot;);\n            sparkSubmitArgs.add(&quot;spark.sparkjob.CreateSitemapFile&quot;);\n            sparkSubmitArgs.add(backendCode);\n            sparkSubmitArgs.add(customerIds);\n            sparkSubmitArgs.add(s3FinalOutput);\n            sparkSubmitArgs.add(s3SparkIntermediate);\n            sparkSubmitArgs.add(tableName);\n            AmazonElasticMapReduce emr = AmazonElasticMapReduceClientBuilder.defaultClient();\n            emr.runJobFlow(\n                new RunJobFlowRequest()\n                    .withName(&quot;sitemap_xml_generation&quot;)\n                    .withInstances(\n                        new JobFlowInstancesConfig()\n                            .withInstanceGroups(\n                                new InstanceGroupConfig()\n                                    .withName(&quot;Master&quot;)\n                                    .withMarket(MarketType.ON_DEMAND)\n                                    .withInstanceRole(InstanceRoleType.MASTER)\n                                    .withInstanceType(&quot;m3.xlarge&quot;)\n                                    .withInstanceCount(1),\n                                new InstanceGroupConfig()\n                                    .withName(&quot;Slave&quot;)\n                                    .withMarket(MarketType.ON_DEMAND)\n                                    .withInstanceRole(InstanceRoleType.CORE)\n                                    .withInstanceType(&quot;m3.xlarge&quot;)\n                                    .withInstanceCount(3)\n                            )\n                            .withKeepJobFlowAliveWhenNoSteps(false)\n                            .withTerminationProtected(false)\n                            .withEc2SubnetId(subnetId)\n\n                    )\n                    .withLogUri(emrLogUri)\n                    .withReleaseLabel(EMR_VERSION)\n                    //.withBootstrapActions(bootstrapActions)\n                    .withSteps(\n                        new StepConfig()\n                            .withName(&quot;processFile&quot;)\n                            .withActionOnFailure(ActionOnFailure.CONTINUE)\n                            .withHadoopJarStep(\n                                new HadoopJarStepConfig()\n                                    .withJar(&quot;command-runner.jar&quot;)\n                                    .withArgs(sparkSubmitArgs)\n                            )\n                    )\n                    .withVisibleToAllUsers(true)\n                    .withJobFlowRole(emrJobFlowRole)\n                    .withServiceRole(emrServiceRole)\n                    .withApplications(\n                        new Application()\n                            .withName(&quot;Spark&quot;),\n                        new Application()\n                            .withName(&quot;Hive&quot;)\n                    )\n                    .withConfigurations(configurations)\n            );\n</code></pre>\n<p>I've tried to follow instruction I found in <a href=\"https://stackoverflow.com/questions/70886684/how-to-use-java-runtime-11-in-emr-cluster-aws\">this answer</a> in order to run java 11 code for Spark, but I'm still facing error : <code>&quot;Java Runtime only recognizes class file versions up to 52.0&quot;</code></p>\n<p>Any help is appreciated.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","c#","python","c++","excel"],"comments":[{"owner":{"account_id":1026045,"reputation":4948,"user_id":1035345,"display_name":"twoleggedhorse"},"score":4,"creation_date":1506118661,"post_id":46373895,"comment_id":79707352,"body_markdown":"any reason why you&#39;re holding that much data in excel and not in a database?","body":"any reason why you&#39;re holding that much data in excel and not in a database?"},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":1,"creation_date":1506118733,"post_id":46373895,"comment_id":79707373,"body_markdown":"@twoleggedhorse this is provided to us by a client. We don&#39;t have control of the input(s).","body":"@twoleggedhorse this is provided to us by a client. We don&#39;t have control of the input(s)."},{"owner":{"account_id":7637185,"reputation":2467,"user_id":5790398,"display_name":"eg04lt3r"},"score":0,"creation_date":1506118802,"post_id":46373895,"comment_id":79707394,"body_markdown":"Please check this answer https://stackoverflow.com/a/13177797/5790398. It might be useful in your case. I don&#39;t know similar solution in Python.","body":"Please check this answer <a href=\"https://stackoverflow.com/a/13177797/5790398\">stackoverflow.com/a/13177797/5790398</a>. It might be useful in your case. I don&#39;t know similar solution in Python."},{"owner":{"account_id":1026045,"reputation":4948,"user_id":1035345,"display_name":"twoleggedhorse"},"score":1,"creation_date":1506118894,"post_id":46373895,"comment_id":79707417,"body_markdown":"I would set up an ssis package (import export wizard will create one) in sql server and automate the import into a database. It *should* be quicker to import to db than to open in excel. At this point the world&#39;s your oyster with the data.","body":"I would set up an ssis package (import export wizard will create one) in sql server and automate the import into a database. It <i>should</i> be quicker to import to db than to open in excel. At this point the world&#39;s your oyster with the data."},{"owner":{"account_id":6654128,"reputation":315,"user_id":5135450,"accept_rate":100,"display_name":"Telefonmann"},"score":0,"creation_date":1506119086,"post_id":46373895,"comment_id":79707460,"body_markdown":"Save yor Excel file as csv and a lot of options open up. Hadoop is fine, but uneccessary. Try Pandas for Python. If you only store homogeneous data types try HDF5 which uses NumPy in Python, dunno what other platforms use. Pandas can read Excel files, but I don&#39;t know how fast that method is. Last but not least you can convert csv files to sqlite databases and work with those. Edit: Does it have to be an acutal Excel file, or can you change the format?","body":"Save yor Excel file as csv and a lot of options open up. Hadoop is fine, but uneccessary. Try Pandas for Python. If you only store homogeneous data types try HDF5 which uses NumPy in Python, dunno what other platforms use. Pandas can read Excel files, but I don&#39;t know how fast that method is. Last but not least you can convert csv files to sqlite databases and work with those. Edit: Does it have to be an acutal Excel file, or can you change the format?"},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506120872,"post_id":46373895,"comment_id":79707881,"body_markdown":"@Telefonmann it&#39;s an excel file. It&#39;s not our file and we don&#39;t have any control over it.","body":"@Telefonmann it&#39;s an excel file. It&#39;s not our file and we don&#39;t have any control over it."},{"owner":{"account_id":6654128,"reputation":315,"user_id":5135450,"accept_rate":100,"display_name":"Telefonmann"},"score":0,"creation_date":1506122162,"post_id":46373895,"comment_id":79708154,"body_markdown":"@David542 Then try Pandas pandas.read_excel (http://pandas.pydata.org/pandas-docs/version/0.20/generated/pandas.read_excel.html). However, you might want to try to convince your client to save the files as CSV. CSV is supported by excel, so there is no real excuse to save it as XLSX.","body":"@David542 Then try Pandas pandas.read_excel (<a href=\"http://pandas.pydata.org/pandas-docs/version/0.20/generated/pandas.read_excel.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/version/0.20/generated/&hellip;</a>). However, you might want to try to convince your client to save the files as CSV. CSV is supported by excel, so there is no real excuse to save it as XLSX."},{"owner":{"account_id":31974,"reputation":23181,"user_id":88173,"accept_rate":83,"display_name":"Charles Williams"},"score":3,"creation_date":1506151065,"post_id":46373895,"comment_id":79712863,"body_markdown":"150 Mb XL workbook is not that large these days - to open efficiently in XL first set Calculation to Manual and ForceFullCalculation to True - then if you want to use Python follow the suggestion of saving it as CSV. Whole process should be a lot faster than 7 minutes on a powerful multi-core machine.","body":"150 Mb XL workbook is not that large these days - to open efficiently in XL first set Calculation to Manual and ForceFullCalculation to True - then if you want to use Python follow the suggestion of saving it as CSV. Whole process should be a lot faster than 7 minutes on a powerful multi-core machine."},{"owner":{"account_id":3650437,"reputation":9764,"user_id":3042759,"accept_rate":66,"display_name":"Tom"},"score":3,"creation_date":1506164789,"post_id":46373895,"comment_id":79716310,"body_markdown":"At the end of the day an Excel file is a folder containing a load of xml docs. You could extract the xml from the file and parse that instead? [link](http://professor-excel.com/xml-zip-excel-file-structure/)","body":"At the end of the day an Excel file is a folder containing a load of xml docs. You could extract the xml from the file and parse that instead? <a href=\"http://professor-excel.com/xml-zip-excel-file-structure/\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":317159,"reputation":8327,"user_id":633684,"display_name":"xiaofeng.li"},"score":2,"creation_date":1506388201,"post_id":46373895,"comment_id":79790473,"body_markdown":"How long does it take Excel to open it? Just for reference.","body":"How long does it take Excel to open it? Just for reference."},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506391809,"post_id":46373895,"comment_id":79791244,"body_markdown":"@LukeLee on mac, not able to open it. On PC, maybe about a minute, but it&#39;s quite sluggish to use.","body":"@LukeLee on mac, not able to open it. On PC, maybe about a minute, but it&#39;s quite sluggish to use."},{"owner":{"account_id":6619941,"reputation":531,"user_id":5112007,"accept_rate":88,"display_name":"Bluebird"},"score":0,"creation_date":1506413807,"post_id":46373895,"comment_id":79799509,"body_markdown":"@David542 Would you allow a VBA solution?","body":"@David542 Would you allow a VBA solution?"},{"owner":{"account_id":1233392,"reputation":214142,"user_id":1197518,"accept_rate":100,"display_name":"Steve"},"score":3,"creation_date":1506430827,"post_id":46373895,"comment_id":79811478,"body_markdown":"I think that it is also important to know what you want to do with the data loaded. The method used to load the file could be not the best in terms of raw disk performances but better in terms on how do you try to access that data after loading it.","body":"I think that it is also important to know what you want to do with the data loaded. The method used to load the file could be not the best in terms of raw disk performances but better in terms on how do you try to access that data after loading it."},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506454082,"post_id":46373895,"comment_id":79825973,"body_markdown":"@Steve let&#39;s say parse the file to load certain rows into a database.","body":"@Steve let&#39;s say parse the file to load certain rows into a database."},{"owner":{"account_id":5823909,"reputation":136952,"user_id":4593267,"accept_rate":62,"display_name":"chqrlie"},"score":1,"creation_date":1506456320,"post_id":46373895,"comment_id":79827067,"body_markdown":"@David542: could you be more precise: for example what rows of the 200MB excel file you provide would be inserted into the database?  what would be the criteria?  An efficient approach would be to implement the selection as a filter written in any fast language and the resulting selection in CSV format could be loader quickly and handled by your code.","body":"@David542: could you be more precise: for example what rows of the 200MB excel file you provide would be inserted into the database?  what would be the criteria?  An efficient approach would be to implement the selection as a filter written in any fast language and the resulting selection in CSV format could be loader quickly and handled by your code."},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506460697,"post_id":46373895,"comment_id":79829115,"body_markdown":"@chqrlie every single row would be inserted -- we would just be manipulating the data (e.g., type conversion) before inserting it into our database with the selected columns.","body":"@chqrlie every single row would be inserted -- we would just be manipulating the data (e.g., type conversion) before inserting it into our database with the selected columns."},{"owner":{"account_id":5823909,"reputation":136952,"user_id":4593267,"accept_rate":62,"display_name":"chqrlie"},"score":0,"creation_date":1506461096,"post_id":46373895,"comment_id":79829288,"body_markdown":"If you are going to insert all rows, the bottleneck is likely the database interface. The file is about 1GB of uncompressed data, how long does the insertion phase take?","body":"If you are going to insert all rows, the bottleneck is likely the database interface. The file is about 1GB of uncompressed data, how long does the insertion phase take?"},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506461417,"post_id":46373895,"comment_id":79829423,"body_markdown":"@chqrlie that&#39;s fine -- the main part here is optimizing the opening of the file, etc. It&#39;s possible we&#39;ll save it to a csv or something else after doing what we need with loading it and then doing some processing on the data.","body":"@chqrlie that&#39;s fine -- the main part here is optimizing the opening of the file, etc. It&#39;s possible we&#39;ll save it to a csv or something else after doing what we need with loading it and then doing some processing on the data."},{"owner":{"account_id":438122,"reputation":6172,"user_id":826203,"accept_rate":89,"display_name":"athos"},"score":0,"creation_date":1506486521,"post_id":46373895,"comment_id":79835316,"body_markdown":"xls files are binary, xlsx files are just a zip of xml files, as Tom mentioned. extract then parse xml might be fasted way.","body":"xls files are binary, xlsx files are just a zip of xml files, as Tom mentioned. extract then parse xml might be fasted way."},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506488239,"post_id":46373895,"comment_id":79835773,"body_markdown":"@athos want to test that in an answer?","body":"@athos want to test that in an answer?"},{"owner":{"account_id":438122,"reputation":6172,"user_id":826203,"accept_rate":89,"display_name":"athos"},"score":0,"creation_date":1506493363,"post_id":46373895,"comment_id":79837703,"body_markdown":"would like to do that after some solid result. need download the sample file after i walk around the firewall.","body":"would like to do that after some solid result. need download the sample file after i walk around the firewall."},{"owner":{"account_id":242725,"reputation":3621,"user_id":514449,"display_name":"ASpirin"},"score":0,"creation_date":1506501065,"post_id":46373895,"comment_id":79841991,"body_markdown":"Just curious, how long will it take to load text/csv file of the same size?","body":"Just curious, how long will it take to load text/csv file of the same size?"},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506564005,"post_id":46373895,"comment_id":79874811,"body_markdown":"@ASpirin what do you mean load? I would just iterate it line-by-line.","body":"@ASpirin what do you mean load? I would just iterate it line-by-line."},{"owner":{"account_id":1890692,"reputation":1693,"user_id":1708860,"accept_rate":79,"display_name":"user1708860"},"score":0,"creation_date":1506725298,"post_id":46373895,"comment_id":79950471,"body_markdown":"@David542, On my machine your python program runs in 3 minutes, and it&#39;s not a strong laptop... I&#39;m wondering - How long does it take you to convert the file to csv using either of these methods? xmodulo.com/how-to-convert-xlsx-files-to-xls-or-csv.html – user1708860","body":"@David542, On my machine your python program runs in 3 minutes, and it&#39;s not a strong laptop... I&#39;m wondering - How long does it take you to convert the file to csv using either of these methods? xmodulo.com/how-to-convert-xlsx-files-to-xls-or-csv.html – user1708860"},{"owner":{"account_id":9455293,"reputation":2437,"user_id":7030791,"accept_rate":74,"display_name":"Amiri"},"score":0,"creation_date":1506759535,"post_id":46373895,"comment_id":79956021,"body_markdown":"For this problem, I prefer to index it explicitly. Due to the performance requirements you can make nested tree and access the metadata instead of real data. Take a look at Google&#39;s bigtable concept (the theory not  the implementation). I hope it helps. ( I can Imagine it might be done in a second)","body":"For this problem, I prefer to index it explicitly. Due to the performance requirements you can make nested tree and access the metadata instead of real data. Take a look at Google&#39;s bigtable concept (the theory not  the implementation). I hope it helps. ( I can Imagine it might be done in a second)"},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506762649,"post_id":46373895,"comment_id":79956800,"body_markdown":"@Martin cool -- any interest in posting an answer showing how it would be done?","body":"@Martin cool -- any interest in posting an answer showing how it would be done?"},{"owner":{"account_id":9455293,"reputation":2437,"user_id":7030791,"accept_rate":74,"display_name":"Amiri"},"score":0,"creation_date":1506773121,"post_id":46373895,"comment_id":79959252,"body_markdown":"@David542, unfortunately I don&#39;t have a real experience but theoretically it might works. I hope some experts read my comment and provide a solution or correct it.","body":"@David542, unfortunately I don&#39;t have a real experience but theoretically it might works. I hope some experts read my comment and provide a solution or correct it."},{"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"score":0,"creation_date":1506796735,"post_id":46373895,"comment_id":79966128,"body_markdown":"@Martin if someone could open the file in 10s or under I would jump for joy -- and of course, select that as the answer. Want to look at your idea and see if it&#39;s possible for you to implement in an answer?","body":"@Martin if someone could open the file in 10s or under I would jump for joy -- and of course, select that as the answer. Want to look at your idea and see if it&#39;s possible for you to implement in an answer?"},{"owner":{"account_id":9455293,"reputation":2437,"user_id":7030791,"accept_rate":74,"display_name":"Amiri"},"score":0,"creation_date":1506805233,"post_id":46373895,"comment_id":79968355,"body_markdown":"Dear @David542, I only suggested a possible theoretical solution. My programming knowledge is not sufficient to implement it","body":"Dear @David542, I only suggested a possible theoretical solution. My programming knowledge is not sufficient to implement it"},{"owner":{"account_id":3371794,"reputation":143468,"user_id":2830850,"display_name":"Tarun Lalwani"},"score":0,"creation_date":1506967759,"post_id":46373895,"comment_id":80017091,"body_markdown":"@David542, what do you after opening the file? Because loading a file in less than 30 second, but then what needs to be done is important?","body":"@David542, what do you after opening the file? Because loading a file in less than 30 second, but then what needs to be done is important?"}],"answers":[{"tags":[],"owner":{"account_id":96180,"reputation":3556,"user_id":261542,"display_name":"mikek3332002"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1506401232,"creation_date":1506386476,"answer_id":46416145,"question_id":46373895,"body_markdown":"Have you tried loading the [worksheet on demand][1], which available since version 0.7.1 of xlrd?\r\n\r\nTo do this you need to pass `on_demand=True` to [`open_workbook()`.][2]\r\n\r\n&gt; xlrd.open_workbook(filename=None, logfile=&lt;_io.TextIOWrapper\r\n&gt; name=&#39;&lt;stdout&gt;&#39; mode=&#39;w&#39; encoding=&#39;UTF-8&#39;&gt;, verbosity=0, use_mmap=1,\r\n&gt; file_contents=None, encoding_override=None, formatting_info=False,\r\n&gt; on_demand=False, ragged_rows=False)\r\n\r\n\r\n----------\r\nOther potential python solutions I found for reading an xlsx file:\r\n\r\n - Read the [raw xml][3] in &#39;xl/sharedStrings.xml&#39; and &#39;xl/worksheets/sheet1.xml&#39;\r\n - Try the [openpyxl library&#39;s Read Only mode][4] which claims too be optimized in memory usage for large files.  \r\n\r\n        from openpyxl import load_workbook wb = load_workbook(filename=&#39;large_file.xlsx&#39;, read_only=True) ws = wb[&#39;big_data&#39;]\r\n    \r\n        for row in ws.rows:\r\n            for cell in row:\r\n                print(cell.value)\r\n - If you are running on Windows you could use [PyWin32 and &#39;Excel.Application&#39;][5]\r\n    \r\n\r\n        import time\r\n        import win32com.client as win32\r\n        def excel():\r\n           xl = win32.gencache.EnsureDispatch(&#39;Excel.Application&#39;)\r\n           ss = xl.Workbooks.Add()\r\n        ...\r\n\r\n\r\n  [1]: http://xlrd.readthedocs.io/en/latest/on_demand.html &quot;Loading worksheets on demand&quot;\r\n  [2]: http://xlrd.readthedocs.io/en/latest/api.html#xlrd.open_workbook\r\n  [3]: https://stackoverflow.com/a/22067980/261542\r\n  [4]: https://openpyxl.readthedocs.io/en/default/optimized.html\r\n  [5]: https://www.blog.pythonlibrary.org/2010/07/16/python-and-microsoft-office-using-pywin32/ &quot;Python and Microsoft Office – Using PyWin32&quot;","title":"How to open a huge excel file efficiently","body":"<p>Have you tried loading the <a href=\"http://xlrd.readthedocs.io/en/latest/on_demand.html\" rel=\"nofollow noreferrer\" title=\"Loading worksheets on demand\">worksheet on demand</a>, which available since version 0.7.1 of xlrd?</p>\n\n<p>To do this you need to pass <code>on_demand=True</code> to <a href=\"http://xlrd.readthedocs.io/en/latest/api.html#xlrd.open_workbook\" rel=\"nofollow noreferrer\"><code>open_workbook()</code>.</a></p>\n\n<blockquote>\n  <p>xlrd.open_workbook(filename=None, logfile=&lt;_io.TextIOWrapper\n  name='' mode='w' encoding='UTF-8'>, verbosity=0, use_mmap=1,\n  file_contents=None, encoding_override=None, formatting_info=False,\n  on_demand=False, ragged_rows=False)</p>\n</blockquote>\n\n<hr>\n\n<p>Other potential python solutions I found for reading an xlsx file:</p>\n\n<ul>\n<li>Read the <a href=\"https://stackoverflow.com/a/22067980/261542\">raw xml</a> in 'xl/sharedStrings.xml' and 'xl/worksheets/sheet1.xml'</li>\n<li><p>Try the <a href=\"https://openpyxl.readthedocs.io/en/default/optimized.html\" rel=\"nofollow noreferrer\">openpyxl library's Read Only mode</a> which claims too be optimized in memory usage for large files.  </p>\n\n<pre><code>from openpyxl import load_workbook wb = load_workbook(filename='large_file.xlsx', read_only=True) ws = wb['big_data']\n\nfor row in ws.rows:\n    for cell in row:\n        print(cell.value)\n</code></pre></li>\n<li><p>If you are running on Windows you could use <a href=\"https://www.blog.pythonlibrary.org/2010/07/16/python-and-microsoft-office-using-pywin32/\" rel=\"nofollow noreferrer\" title=\"Python and Microsoft Office – Using PyWin32\">PyWin32 and 'Excel.Application'</a></p>\n\n<pre><code>import time\nimport win32com.client as win32\ndef excel():\n   xl = win32.gencache.EnsureDispatch('Excel.Application')\n   ss = xl.Workbooks.Add()\n...\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":231305,"reputation":62840,"user_id":495455,"accept_rate":72,"display_name":"Jeremy Thompson"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1692807246,"creation_date":1506403451,"answer_id":46418403,"question_id":46373895,"body_markdown":"Most programming languages that work with Office products have some middle layer and this is usually where the bottleneck is, a good example is using PIA&#39;s/Interop or Open XML SDK. \r\n\r\nOne way to get the data at a lower level (bypassing the middle layer) is using a Driver.\r\n\r\n&gt; 150MB one-sheet excel file that takes about 7 minutes.\r\n\r\nThe best I could do is a 130MB file in 135 seconds, roughly 3 times faster:\r\n\r\n\r\n    Stopwatch sw = new Stopwatch();\r\n    sw.Start();\r\n\r\n    DataSet excelDataSet = new DataSet();\r\n    \r\n    string filePath = @&quot;c:\\temp\\BigBook.xlsx&quot;;\r\n    \r\n    // For .XLSXs we use =Microsoft.ACE.OLEDB.12.0;, for .XLS we&#39;d use Microsoft.Jet.OLEDB.4.0; with  &quot;&#39;;Extended Properties=\\&quot;Excel 8.0;HDR=YES;\\&quot;&quot;;\r\n    string connectionString = &quot;Provider=Microsoft.ACE.OLEDB.12.0;Data Source=&#39;&quot; + filePath + &quot;&#39;;Extended Properties=\\&quot;Excel 12.0;HDR=YES;\\&quot;&quot;;\r\n    \r\n    using (OleDbConnection conn = new OleDbConnection(connectionString))\r\n    {\r\n        conn.Open();\r\n        OleDbDataAdapter objDA = new System.Data.OleDb.OleDbDataAdapter\r\n        (&quot;select * from [Sheet1$]&quot;, conn);\r\n        objDA.Fill(excelDataSet);\r\n        //dataGridView1.DataSource = excelDataSet.Tables[0];\r\n    }\r\n    sw.Stop();\r\n    Debug.Print(&quot;Load XLSX tool: &quot; + sw.ElapsedMilliseconds + &quot; millisecs. Records = &quot;  + excelDataSet.Tables[0].Rows.Count);\r\n            \r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWin 7x64, Intel i5, 2.3ghz, 8GB ram, SSD250GB.\r\n\r\nIf I could recommend a hardware solution as well, try to resolve it with an SSD if you&#39;re using standard HDDs.\r\n\r\n&lt;sub&gt;Note: I can&#39;t download your Excel spreadsheet example as I&#39;m behind a corporate firewall.&lt;/sub&gt;\r\n\r\nPS. See [MSDN - Fastest Way to import xlsx files with 200 MB of Data](https://social.msdn.microsoft.com/Forums/en-US/afcb146e-f102-4738-8da7-17769e893d75/fastest-way-to-import-xlsx-to-datatable-7-files-with-200-mb-of-data?forum=vbgeneral), the *consensus* being OleDB is the fastest. \r\n\r\nPS 2. Here&#39;s how you can do it with Python: \r\n http://code.activestate.com/recipes/440661-read-tabular-data-from-excel-spreadsheets-the-fast/\r\n\r\n  [1]: https://i.stack.imgur.com/10iuT.png","title":"How to open a huge excel file efficiently","body":"<p>Most programming languages that work with Office products have some middle layer and this is usually where the bottleneck is, a good example is using PIA's/Interop or Open XML SDK.</p>\n<p>One way to get the data at a lower level (bypassing the middle layer) is using a Driver.</p>\n<blockquote>\n<p>150MB one-sheet excel file that takes about 7 minutes.</p>\n</blockquote>\n<p>The best I could do is a 130MB file in 135 seconds, roughly 3 times faster:</p>\n<pre><code>Stopwatch sw = new Stopwatch();\nsw.Start();\n\nDataSet excelDataSet = new DataSet();\n\nstring filePath = @&quot;c:\\temp\\BigBook.xlsx&quot;;\n\n// For .XLSXs we use =Microsoft.ACE.OLEDB.12.0;, for .XLS we'd use Microsoft.Jet.OLEDB.4.0; with  &quot;';Extended Properties=\\&quot;Excel 8.0;HDR=YES;\\&quot;&quot;;\nstring connectionString = &quot;Provider=Microsoft.ACE.OLEDB.12.0;Data Source='&quot; + filePath + &quot;';Extended Properties=\\&quot;Excel 12.0;HDR=YES;\\&quot;&quot;;\n\nusing (OleDbConnection conn = new OleDbConnection(connectionString))\n{\n    conn.Open();\n    OleDbDataAdapter objDA = new System.Data.OleDb.OleDbDataAdapter\n    (&quot;select * from [Sheet1$]&quot;, conn);\n    objDA.Fill(excelDataSet);\n    //dataGridView1.DataSource = excelDataSet.Tables[0];\n}\nsw.Stop();\nDebug.Print(&quot;Load XLSX tool: &quot; + sw.ElapsedMilliseconds + &quot; millisecs. Records = &quot;  + excelDataSet.Tables[0].Rows.Count);\n        \n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/10iuT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/10iuT.png\" alt=\"enter image description here\" /></a></p>\n<p>Win 7x64, Intel i5, 2.3ghz, 8GB ram, SSD250GB.</p>\n<p>If I could recommend a hardware solution as well, try to resolve it with an SSD if you're using standard HDDs.</p>\n<p><sub>Note: I can't download your Excel spreadsheet example as I'm behind a corporate firewall.</sub></p>\n<p>PS. See <a href=\"https://social.msdn.microsoft.com/Forums/en-US/afcb146e-f102-4738-8da7-17769e893d75/fastest-way-to-import-xlsx-to-datatable-7-files-with-200-mb-of-data?forum=vbgeneral\" rel=\"nofollow noreferrer\">MSDN - Fastest Way to import xlsx files with 200 MB of Data</a>, the <em>consensus</em> being OleDB is the fastest.</p>\n<p>PS 2. Here's how you can do it with Python:\n<a href=\"http://code.activestate.com/recipes/440661-read-tabular-data-from-excel-spreadsheets-the-fast/\" rel=\"nofollow noreferrer\">http://code.activestate.com/recipes/440661-read-tabular-data-from-excel-spreadsheets-the-fast/</a></p>\n"},{"tags":[],"owner":{"account_id":3162234,"reputation":14742,"user_id":2673029,"display_name":"Isma"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1506977009,"creation_date":1506419737,"answer_id":46423255,"question_id":46373895,"body_markdown":"I managed to read the file in about 30 seconds using .NET core and the Open XML SDK.\r\n\r\nThe following example returns a list of objects containing all rows and cells with the matching types, it supports date, numeric and text cells. The project is available here: https://github.com/xferaa/BigSpreadSheetExample/ (Should work on Windows, Linux and Mac OS and does not require Excel or any Excel component to be installed).\r\n\r\n    public List&lt;List&lt;object&gt;&gt; ParseSpreadSheet()\r\n    {\r\n        List&lt;List&lt;object&gt;&gt; rows = new List&lt;List&lt;object&gt;&gt;();\r\n    \r\n        using (SpreadsheetDocument spreadsheetDocument = SpreadsheetDocument.Open(filePath, false))\r\n        {\r\n            WorkbookPart workbookPart = spreadsheetDocument.WorkbookPart;\r\n            WorksheetPart worksheetPart = workbookPart.WorksheetParts.First();\r\n    \r\n            OpenXmlReader reader = OpenXmlReader.Create(worksheetPart);\r\n    \r\n            Dictionary&lt;int, string&gt; sharedStringCache = new Dictionary&lt;int, string&gt;();\r\n    \r\n            int i = 0;\r\n            foreach (var el in workbookPart.SharedStringTablePart.SharedStringTable.ChildElements)\r\n            {\r\n                sharedStringCache.Add(i++, el.InnerText);\r\n            }\r\n    \r\n            while (reader.Read())\r\n            {\r\n                if(reader.ElementType == typeof(Row))\r\n                {\r\n                    reader.ReadFirstChild();\r\n    \r\n                    List&lt;object&gt; cells = new List&lt;object&gt;();\r\n    \r\n                    do\r\n                    {\r\n                        if (reader.ElementType == typeof(Cell))\r\n                        {\r\n                            Cell c = (Cell)reader.LoadCurrentElement();\r\n    \r\n                            if (c == null || c.DataType == null || !c.DataType.HasValue)\r\n                                continue;\r\n    \r\n                            object value;\r\n    \r\n                            switch(c.DataType.Value)\r\n                            {\r\n                                case CellValues.Boolean:\r\n                                    value = bool.Parse(c.CellValue.InnerText);\r\n                                    break;\r\n                                case CellValues.Date:\r\n                                    value = DateTime.Parse(c.CellValue.InnerText);\r\n                                    break;\r\n                                case CellValues.Number:\r\n                                    value = double.Parse(c.CellValue.InnerText);\r\n                                    break;\r\n                                case CellValues.InlineString:\r\n                                case CellValues.String:\r\n                                    value = c.CellValue.InnerText;\r\n                                    break;\r\n                                case CellValues.SharedString:\r\n                                    value = sharedStringCache[int.Parse(c.CellValue.InnerText)];\r\n                                    break;\r\n                                default:\r\n                                    continue;\r\n                            }\r\n    \r\n                            if (value != null)\r\n                                cells.Add(value);\r\n                        }\r\n    \r\n                    } while (reader.ReadNextSibling());\r\n    \r\n                    if (cells.Any())\r\n                        rows.Add(cells);\r\n                }\r\n            }\r\n        }\r\n    \r\n        return rows;\r\n    }\r\n\r\nI ran the program in a three year old Laptop with a SSD drive, 8GB of RAM and an Intel Core i7-4710 CPU @ 2.50GHz (two cores) on Windows 10 64 bits.\r\n\r\nNote that although opening and parsing the whole file as strings takes a bit less than 30 seconds, when using objects as in the example of my last edit, the time goes up to almost 50 seconds with my crappy laptop. You will probably get closer to 30 seconds in your server with Linux.\r\n\r\nThe trick was to use the SAX approach as explained here: \r\n\r\nhttps://msdn.microsoft.com/en-us/library/office/gg575571.aspx\r\n","title":"How to open a huge excel file efficiently","body":"<p>I managed to read the file in about 30 seconds using .NET core and the Open XML SDK.</p>\n\n<p>The following example returns a list of objects containing all rows and cells with the matching types, it supports date, numeric and text cells. The project is available here: <a href=\"https://github.com/xferaa/BigSpreadSheetExample/\" rel=\"nofollow noreferrer\">https://github.com/xferaa/BigSpreadSheetExample/</a> (Should work on Windows, Linux and Mac OS and does not require Excel or any Excel component to be installed).</p>\n\n<pre><code>public List&lt;List&lt;object&gt;&gt; ParseSpreadSheet()\n{\n    List&lt;List&lt;object&gt;&gt; rows = new List&lt;List&lt;object&gt;&gt;();\n\n    using (SpreadsheetDocument spreadsheetDocument = SpreadsheetDocument.Open(filePath, false))\n    {\n        WorkbookPart workbookPart = spreadsheetDocument.WorkbookPart;\n        WorksheetPart worksheetPart = workbookPart.WorksheetParts.First();\n\n        OpenXmlReader reader = OpenXmlReader.Create(worksheetPart);\n\n        Dictionary&lt;int, string&gt; sharedStringCache = new Dictionary&lt;int, string&gt;();\n\n        int i = 0;\n        foreach (var el in workbookPart.SharedStringTablePart.SharedStringTable.ChildElements)\n        {\n            sharedStringCache.Add(i++, el.InnerText);\n        }\n\n        while (reader.Read())\n        {\n            if(reader.ElementType == typeof(Row))\n            {\n                reader.ReadFirstChild();\n\n                List&lt;object&gt; cells = new List&lt;object&gt;();\n\n                do\n                {\n                    if (reader.ElementType == typeof(Cell))\n                    {\n                        Cell c = (Cell)reader.LoadCurrentElement();\n\n                        if (c == null || c.DataType == null || !c.DataType.HasValue)\n                            continue;\n\n                        object value;\n\n                        switch(c.DataType.Value)\n                        {\n                            case CellValues.Boolean:\n                                value = bool.Parse(c.CellValue.InnerText);\n                                break;\n                            case CellValues.Date:\n                                value = DateTime.Parse(c.CellValue.InnerText);\n                                break;\n                            case CellValues.Number:\n                                value = double.Parse(c.CellValue.InnerText);\n                                break;\n                            case CellValues.InlineString:\n                            case CellValues.String:\n                                value = c.CellValue.InnerText;\n                                break;\n                            case CellValues.SharedString:\n                                value = sharedStringCache[int.Parse(c.CellValue.InnerText)];\n                                break;\n                            default:\n                                continue;\n                        }\n\n                        if (value != null)\n                            cells.Add(value);\n                    }\n\n                } while (reader.ReadNextSibling());\n\n                if (cells.Any())\n                    rows.Add(cells);\n            }\n        }\n    }\n\n    return rows;\n}\n</code></pre>\n\n<p>I ran the program in a three year old Laptop with a SSD drive, 8GB of RAM and an Intel Core i7-4710 CPU @ 2.50GHz (two cores) on Windows 10 64 bits.</p>\n\n<p>Note that although opening and parsing the whole file as strings takes a bit less than 30 seconds, when using objects as in the example of my last edit, the time goes up to almost 50 seconds with my crappy laptop. You will probably get closer to 30 seconds in your server with Linux.</p>\n\n<p>The trick was to use the SAX approach as explained here: </p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/office/gg575571.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/office/gg575571.aspx</a></p>\n"},{"tags":[],"owner":{"account_id":6433441,"reputation":46061,"user_id":4985733,"accept_rate":100,"display_name":"Martin Evans"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1506977752,"creation_date":1506426881,"answer_id":46425826,"question_id":46373895,"body_markdown":"Python&#39;s Pandas library could be used to hold and process your data, but using it to directly load the `.xlsx` file will be quite slow, e.g. using [`read_excel()`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_excel.html?highlight=read_excel#pandas-read-excel).\r\n\r\nOne approach would be to use Python to automate the conversion of your file into CSV using Excel itself and to then use Pandas to load the resulting CSV file using [`read_csv()`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html#pandas-read-csv). This will give you a good speed up, but not under 30 seconds:\r\n\r\n    import win32com.client as win32        \r\n    import pandas as pd    \r\n    from datetime import datetime    \r\n    \r\n    print (&quot;Starting&quot;)\r\n    start = datetime.now()\r\n    \r\n    # Use Excel to load the xlsx file and save it in csv format\r\n    excel = win32.gencache.EnsureDispatch(&#39;Excel.Application&#39;)\r\n    wb = excel.Workbooks.Open(r&#39;c:\\full path\\BigSpreadsheet.xlsx&#39;)\r\n    excel.DisplayAlerts = False\r\n    wb.DoNotPromptForConvert = True\r\n    wb.CheckCompatibility = False\r\n\r\n    print(&#39;Saving&#39;)\r\n    wb.SaveAs(r&#39;c:\\full path\\temp.csv&#39;, FileFormat=6, ConflictResolution=2) \r\n    excel.Application.Quit()\r\n\r\n    # Use Pandas to load the resulting CSV file\r\n    print(&#39;Loading CSV&#39;)\r\n    df = pd.read_csv(r&#39;c:\\full path\\temp.csv&#39;, dtype=str)\r\n\r\n    print(df.shape)\r\n    print(&quot;Done&quot;, datetime.now() - start)\r\n\r\n**Column types**  \r\nThe types for your columns can be specified by passing `dtype` and `converters` and `parse_dates`:\r\n\r\n    df = pd.read_csv(r&#39;c:\\full path\\temp.csv&#39;, dtype=str, converters={10:int}, parse_dates=[8], infer_datetime_format=True)\r\n\r\nYou should also specify `infer_datetime_format=True`, as this will greatly speed up the date conversion.\r\n\r\n&gt; `nfer_datetime_format` : boolean, default False\r\n&gt; \r\n&gt; If True and parse_dates is enabled, pandas will attempt to infer the format of the datetime strings in the columns, and if it can be\r\n&gt; inferred, switch to a faster method of parsing them. In some cases\r\n&gt; this can increase the parsing speed by 5-10x.\r\n\r\nAlso add `dayfirst=True` if dates are in the form `DD/MM/YYYY`.\r\n\r\n**Selective columns**  \r\nIf you actually only need to work on columns `1 9 11`, then you could further reduce resources by specifying `usecols=[0, 8, 10]` as follows:\r\n\r\n    df = pd.read_csv(r&#39;c:\\full path\\temp.csv&#39;, dtype=str, converters={10:int}, parse_dates=[1], dayfirst=True, infer_datetime_format=True, usecols=[0, 8, 10])\r\n\r\nThe resulting dataframe would then only contain those 3 columns of data.\r\n\r\n**RAM drive**  \r\nUsing a RAM drive to store the temporary CSV file to would further speed up the load time.\r\n\r\nNote: This does assume you are using a Windows PC with Excel available.","title":"How to open a huge excel file efficiently","body":"<p>Python's Pandas library could be used to hold and process your data, but using it to directly load the <code>.xlsx</code> file will be quite slow, e.g. using <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_excel.html?highlight=read_excel#pandas-read-excel\" rel=\"nofollow noreferrer\"><code>read_excel()</code></a>.</p>\n\n<p>One approach would be to use Python to automate the conversion of your file into CSV using Excel itself and to then use Pandas to load the resulting CSV file using <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html#pandas-read-csv\" rel=\"nofollow noreferrer\"><code>read_csv()</code></a>. This will give you a good speed up, but not under 30 seconds:</p>\n\n<pre><code>import win32com.client as win32        \nimport pandas as pd    \nfrom datetime import datetime    \n\nprint (\"Starting\")\nstart = datetime.now()\n\n# Use Excel to load the xlsx file and save it in csv format\nexcel = win32.gencache.EnsureDispatch('Excel.Application')\nwb = excel.Workbooks.Open(r'c:\\full path\\BigSpreadsheet.xlsx')\nexcel.DisplayAlerts = False\nwb.DoNotPromptForConvert = True\nwb.CheckCompatibility = False\n\nprint('Saving')\nwb.SaveAs(r'c:\\full path\\temp.csv', FileFormat=6, ConflictResolution=2) \nexcel.Application.Quit()\n\n# Use Pandas to load the resulting CSV file\nprint('Loading CSV')\ndf = pd.read_csv(r'c:\\full path\\temp.csv', dtype=str)\n\nprint(df.shape)\nprint(\"Done\", datetime.now() - start)\n</code></pre>\n\n<p><strong>Column types</strong><br>\nThe types for your columns can be specified by passing <code>dtype</code> and <code>converters</code> and <code>parse_dates</code>:</p>\n\n<pre><code>df = pd.read_csv(r'c:\\full path\\temp.csv', dtype=str, converters={10:int}, parse_dates=[8], infer_datetime_format=True)\n</code></pre>\n\n<p>You should also specify <code>infer_datetime_format=True</code>, as this will greatly speed up the date conversion.</p>\n\n<blockquote>\n  <p><code>nfer_datetime_format</code> : boolean, default False</p>\n  \n  <p>If True and parse_dates is enabled, pandas will attempt to infer the format of the datetime strings in the columns, and if it can be\n  inferred, switch to a faster method of parsing them. In some cases\n  this can increase the parsing speed by 5-10x.</p>\n</blockquote>\n\n<p>Also add <code>dayfirst=True</code> if dates are in the form <code>DD/MM/YYYY</code>.</p>\n\n<p><strong>Selective columns</strong><br>\nIf you actually only need to work on columns <code>1 9 11</code>, then you could further reduce resources by specifying <code>usecols=[0, 8, 10]</code> as follows:</p>\n\n<pre><code>df = pd.read_csv(r'c:\\full path\\temp.csv', dtype=str, converters={10:int}, parse_dates=[1], dayfirst=True, infer_datetime_format=True, usecols=[0, 8, 10])\n</code></pre>\n\n<p>The resulting dataframe would then only contain those 3 columns of data.</p>\n\n<p><strong>RAM drive</strong><br>\nUsing a RAM drive to store the temporary CSV file to would further speed up the load time.</p>\n\n<p>Note: This does assume you are using a Windows PC with Excel available.</p>\n"},{"tags":[],"owner":{"account_id":11822797,"reputation":751,"user_id":8651469,"display_name":"devsaki"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1506988439,"creation_date":1506452862,"answer_id":46434061,"question_id":46373895,"body_markdown":"Well, if your excel is going to be as simple as a CSV file like your example (https://drive.google.com/file/d/0B_CXvCTOo7_2UVZxbnpRaEVnaFk/view?usp=sharing), you can try to open the file as a zip file and read directly every xml:\r\n\r\nIntel i5 4460, 12 GB RAM, SSD Samsung EVO PRO.\r\n\r\n**If you have a lot of memory ram:**\r\nThis code needs a lot of ram, but it takes 20~25 seconds. (You need the parameter -Xmx7g)\r\n\r\n    package com.devsaki.opensimpleexcel;\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PrintWriter;\r\n    import java.nio.charset.Charset;\r\n    import java.time.LocalDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.Future;\r\n    import java.util.zip.ZipFile;\r\n\r\n    public class Multithread {\r\n\r\n        public static final char CHAR_END = (char) -1;\r\n\r\n        public static void main(String[] args) throws IOException, ExecutionException, InterruptedException {\r\n            String excelFile = &quot;C:/Downloads/BigSpreadsheetAllTypes.xlsx&quot;;\r\n            ZipFile zipFile = new ZipFile(excelFile);\r\n            long init = System.currentTimeMillis();\r\n            ExecutorService executor = Executors.newFixedThreadPool(4);\r\n            char[] sheet1 = readEntry(zipFile, &quot;xl/worksheets/sheet1.xml&quot;).toCharArray();\r\n            Future&lt;Object[][]&gt; futureSheet1 = executor.submit(() -&gt; processSheet1(new CharReader(sheet1), executor));\r\n            char[] sharedString = readEntry(zipFile, &quot;xl/sharedStrings.xml&quot;).toCharArray();\r\n            Future&lt;String[]&gt; futureWords = executor.submit(() -&gt; processSharedStrings(new CharReader(sharedString)));\r\n\r\n            Object[][] sheet = futureSheet1.get();\r\n            String[] words = futureWords.get();\r\n\r\n            executor.shutdown();\r\n\r\n            long end = System.currentTimeMillis();\r\n            System.out.println(&quot;only read: &quot; + (end - init) / 1000);\r\n\r\n            ///Doing somethin with the file::Saving as csv\r\n            init = System.currentTimeMillis();\r\n            try (PrintWriter writer = new PrintWriter(excelFile + &quot;.csv&quot;, &quot;UTF-8&quot;);) {\r\n                for (Object[] rows : sheet) {\r\n                    for (Object cell : rows) {\r\n                        if (cell != null) {\r\n                            if (cell instanceof Integer) {\r\n                                writer.append(words[(Integer) cell]);\r\n                            } else if (cell instanceof String) {\r\n                                writer.append(toDate(Double.parseDouble(cell.toString())));\r\n                            } else {\r\n                                writer.append(cell.toString()); //Probably a number\r\n                            }\r\n                        }\r\n                        writer.append(&quot;;&quot;);\r\n                    }\r\n                    writer.append(&quot;\\n&quot;);\r\n                }\r\n            }\r\n            end = System.currentTimeMillis();\r\n            System.out.println(&quot;Main saving to csv: &quot; + (end - init) / 1000);\r\n        }\r\n\r\n        private static final DateTimeFormatter formatter = DateTimeFormatter.ISO_DATE_TIME;\r\n        private static final LocalDateTime INIT_DATE = LocalDateTime.parse(&quot;1900-01-01T00:00:00+00:00&quot;, formatter).plusDays(-2);\r\n\r\n        //The number in excel is from 1900-jan-1, so every number time that you get, you have to sum to that date\r\n        public static String toDate(double s) {\r\n            return formatter.format(INIT_DATE.plusSeconds((long) ((s*24*3600))));\r\n        }\r\n\r\n        public static String readEntry(ZipFile zipFile, String entry) throws IOException {\r\n            System.out.println(&quot;Initialing readEntry &quot; + entry);\r\n            long init = System.currentTimeMillis();\r\n            String result = null;\r\n\r\n            try (BufferedReader br = new BufferedReader(new InputStreamReader(zipFile.getInputStream(zipFile.getEntry(entry)), Charset.forName(&quot;UTF-8&quot;)))) {\r\n                br.readLine();\r\n                result = br.readLine();\r\n            }\r\n\r\n            long end = System.currentTimeMillis();\r\n            System.out.println(&quot;readEntry &#39;&quot; + entry + &quot;&#39;: &quot; + (end - init) / 1000);\r\n            return result;\r\n        }\r\n\r\n\r\n        public static String[] processSharedStrings(CharReader br) throws IOException {\r\n            System.out.println(&quot;Initialing processSharedStrings&quot;);\r\n            long init = System.currentTimeMillis();\r\n            String[] words = null;\r\n            char[] wordCount = &quot;Count=\\&quot;&quot;.toCharArray();\r\n            char[] token = &quot;&lt;t&gt;&quot;.toCharArray();\r\n            String uniqueCount = extractNextValue(br, wordCount, &#39;&quot;&#39;);\r\n            words = new String[Integer.parseInt(uniqueCount)];\r\n            String nextWord;\r\n            int currentIndex = 0;\r\n            while ((nextWord = extractNextValue(br, token, &#39;&lt;&#39;)) != null) {\r\n                words[currentIndex++] = nextWord;\r\n                br.skip(11); //you can skip at least 11 chars &quot;/t&gt;&lt;/si&gt;&lt;si&gt;&quot;\r\n            }\r\n            long end = System.currentTimeMillis();\r\n            System.out.println(&quot;SharedStrings: &quot; + (end - init) / 1000);\r\n            return words;\r\n        }\r\n\r\n\r\n        public static Object[][] processSheet1(CharReader br, ExecutorService executorService) throws IOException, ExecutionException, InterruptedException {\r\n            System.out.println(&quot;Initialing processSheet1&quot;);\r\n            long init = System.currentTimeMillis();\r\n            char[] dimensionToken = &quot;dimension ref=\\&quot;&quot;.toCharArray();\r\n            String dimension = extractNextValue(br, dimensionToken, &#39;&quot;&#39;);\r\n            int[] sizes = extractSizeFromDimention(dimension.split(&quot;:&quot;)[1]);\r\n            br.skip(30); //Between dimension and next tag c exists more or less 30 chars\r\n            Object[][] result = new Object[sizes[0]][sizes[1]];\r\n\r\n            int parallelProcess = 8;\r\n            int currentIndex = br.currentIndex;\r\n            CharReader[] charReaders = new CharReader[parallelProcess];\r\n            int totalChars = Math.round(br.chars.length / parallelProcess);\r\n            for (int i = 0; i &lt; parallelProcess; i++) {\r\n                int endIndex = currentIndex + totalChars;\r\n                charReaders[i] = new CharReader(br.chars, currentIndex, endIndex, i);\r\n                currentIndex = endIndex;\r\n            }\r\n            Future[] futures = new Future[parallelProcess];\r\n            for (int i = charReaders.length - 1; i &gt;= 0; i--) {\r\n                final int j = i;\r\n                futures[i] = executorService.submit(() -&gt; inParallelProcess(charReaders[j], j == 0 ? null : charReaders[j - 1], result));\r\n            }\r\n            for (Future future : futures) {\r\n                future.get();\r\n            }\r\n\r\n            long end = System.currentTimeMillis();\r\n            System.out.println(&quot;Sheet1: &quot; + (end - init) / 1000);\r\n            return result;\r\n        }\r\n\r\n        public static void inParallelProcess(CharReader br, CharReader back, Object[][] result) {\r\n            System.out.println(&quot;Initialing inParallelProcess : &quot; + br.identifier);\r\n\r\n            char[] tokenOpenC = &quot;&lt;c r=\\&quot;&quot;.toCharArray();\r\n            char[] tokenOpenV = &quot;&lt;v&gt;&quot;.toCharArray();\r\n\r\n            char[] tokenAttributS = &quot; s=\\&quot;&quot;.toCharArray();\r\n            char[] tokenAttributT = &quot; t=\\&quot;&quot;.toCharArray();\r\n\r\n            String v;\r\n            int firstCurrentIndex = br.currentIndex;\r\n            boolean first = true;\r\n\r\n            while ((v = extractNextValue(br, tokenOpenC, &#39;&quot;&#39;)) != null) {\r\n                if (first &amp;&amp; back != null) {\r\n                    int sum = br.currentIndex - firstCurrentIndex - tokenOpenC.length - v.length() - 1;\r\n                    first = false;\r\n                    System.out.println(&quot;Adding to : &quot; + back.identifier + &quot; From : &quot; + br.identifier);\r\n                    back.plusLength(sum);\r\n                }\r\n                int[] indexes = extractSizeFromDimention(v);\r\n\r\n                int s = foundNextTokens(br, &#39;&gt;&#39;, tokenAttributS, tokenAttributT);\r\n                char type = &#39;s&#39;; //3 types: number (n), string (s) and date (d)\r\n                if (s == 0) { // Token S = number or date\r\n                    char read = br.read();\r\n                    if (read == &#39;1&#39;) {\r\n                        type = &#39;n&#39;;\r\n                    } else {\r\n                        type = &#39;d&#39;;\r\n                    }\r\n                } else if (s == -1) {\r\n                    type = &#39;n&#39;;\r\n                }\r\n                String c = extractNextValue(br, tokenOpenV, &#39;&lt;&#39;);\r\n                Object value = null;\r\n                switch (type) {\r\n                    case &#39;n&#39;:\r\n                        value = Double.parseDouble(c);\r\n                        break;\r\n                    case &#39;s&#39;:\r\n                        try {\r\n                            value = Integer.parseInt(c);\r\n                        } catch (Exception ex) {\r\n                            System.out.println(&quot;Identifier Error : &quot; + br.identifier);\r\n                        }\r\n                        break;\r\n                    case &#39;d&#39;:\r\n                        value = c.toString();\r\n                        break;\r\n                }\r\n                result[indexes[0] - 1][indexes[1] - 1] = value;\r\n                br.skip(7); ///v&gt;&lt;/c&gt;\r\n            }\r\n        }\r\n\r\n        static class CharReader {\r\n            char[] chars;\r\n            int currentIndex;\r\n            int length;\r\n\r\n            int identifier;\r\n\r\n            public CharReader(char[] chars) {\r\n                this.chars = chars;\r\n                this.length = chars.length;\r\n            }\r\n\r\n            public CharReader(char[] chars, int currentIndex, int length, int identifier) {\r\n                this.chars = chars;\r\n                this.currentIndex = currentIndex;\r\n                if (length &gt; chars.length) {\r\n                    this.length = chars.length;\r\n                } else {\r\n                    this.length = length;\r\n                }\r\n                this.identifier = identifier;\r\n            }\r\n\r\n            public void plusLength(int n) {\r\n                if (this.length + n &lt;= chars.length) {\r\n                    this.length += n;\r\n                }\r\n            }\r\n\r\n            public char read() {\r\n                if (currentIndex &gt;= length) {\r\n                    return CHAR_END;\r\n                }\r\n                return chars[currentIndex++];\r\n            }\r\n\r\n            public void skip(int n) {\r\n                currentIndex += n;\r\n            }\r\n        }\r\n\r\n\r\n        public static int[] extractSizeFromDimention(String dimention) {\r\n            StringBuilder sb = new StringBuilder();\r\n            int columns = 0;\r\n            int rows = 0;\r\n            for (char c : dimention.toCharArray()) {\r\n                if (columns == 0) {\r\n                    if (Character.isDigit(c)) {\r\n                        columns = convertExcelIndex(sb.toString());\r\n                        sb = new StringBuilder();\r\n                    }\r\n                }\r\n                sb.append(c);\r\n            }\r\n            rows = Integer.parseInt(sb.toString());\r\n            return new int[]{rows, columns};\r\n        }\r\n\r\n        public static int foundNextTokens(CharReader br, char until, char[]... tokens) {\r\n            char character;\r\n            int[] indexes = new int[tokens.length];\r\n            while ((character = br.read()) != CHAR_END) {\r\n                if (character == until) {\r\n                    break;\r\n                }\r\n                for (int i = 0; i &lt; indexes.length; i++) {\r\n                    if (tokens[i][indexes[i]] == character) {\r\n                        indexes[i]++;\r\n                        if (indexes[i] == tokens[i].length) {\r\n                            return i;\r\n                        }\r\n                    } else {\r\n                        indexes[i] = 0;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return -1;\r\n        }\r\n\r\n        public static String extractNextValue(CharReader br, char[] token, char until) {\r\n            char character;\r\n            StringBuilder sb = new StringBuilder();\r\n            int index = 0;\r\n\r\n            while ((character = br.read()) != CHAR_END) {\r\n                if (index == token.length) {\r\n                    if (character == until) {\r\n                        return sb.toString();\r\n                    } else {\r\n                        sb.append(character);\r\n                    }\r\n                } else {\r\n                    if (token[index] == character) {\r\n                        index++;\r\n                    } else {\r\n                        index = 0;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        public static int convertExcelIndex(String index) {\r\n            int result = 0;\r\n            for (char c : index.toCharArray()) {\r\n                result = result * 26 + ((int) c - (int) &#39;A&#39; + 1);\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n\r\n**Old answer (Not need the parameter Xms7g, so take less memory):**\r\nIt takes to open and read the example file about 35 seconds (200MB) with an HDD, with SDD takes a little less (30 seconds).\r\n\r\nHere the code:\r\nhttps://github.com/csaki/OpenSimpleExcelFast.git\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PrintWriter;\r\n    import java.nio.charset.Charset;\r\n    import java.time.LocalDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.Future;\r\n    import java.util.zip.ZipFile;\r\n\r\n    public class Launcher {\r\n\r\n        public static final char CHAR_END = (char) -1;\r\n\r\n        public static void main(String[] args) throws IOException, ExecutionException, InterruptedException {\r\n            long init = System.currentTimeMillis();\r\n            String excelFile = &quot;D:/Downloads/BigSpreadsheet.xlsx&quot;;\r\n            ZipFile zipFile = new ZipFile(excelFile);\r\n\r\n            ExecutorService executor = Executors.newFixedThreadPool(4);\r\n            Future&lt;String[]&gt; futureWords = executor.submit(() -&gt; processSharedStrings(zipFile));\r\n            Future&lt;Object[][]&gt; futureSheet1 = executor.submit(() -&gt; processSheet1(zipFile));\r\n            String[] words = futureWords.get();\r\n            Object[][] sheet1 = futureSheet1.get();\r\n            executor.shutdown();\r\n\r\n            long end = System.currentTimeMillis();\r\n            System.out.println(&quot;Main only open and read: &quot; + (end - init) / 1000);\r\n\r\n\r\n            ///Doing somethin with the file::Saving as csv\r\n            init = System.currentTimeMillis();\r\n            try (PrintWriter writer = new PrintWriter(excelFile + &quot;.csv&quot;, &quot;UTF-8&quot;);) {\r\n                for (Object[] rows : sheet1) {\r\n                    for (Object cell : rows) {\r\n                        if (cell != null) {\r\n                            if (cell instanceof Integer) {\r\n                                writer.append(words[(Integer) cell]);\r\n                            } else if (cell instanceof String) {\r\n                                writer.append(toDate(Double.parseDouble(cell.toString())));\r\n                            } else {\r\n                                writer.append(cell.toString()); //Probably a number\r\n                            }\r\n                        }\r\n                        writer.append(&quot;;&quot;);\r\n                    }\r\n                    writer.append(&quot;\\n&quot;);\r\n                }\r\n            }\r\n            end = System.currentTimeMillis();\r\n            System.out.println(&quot;Main saving to csv: &quot; + (end - init) / 1000);\r\n        }\r\n\r\n        private static final DateTimeFormatter formatter = DateTimeFormatter.ISO_DATE_TIME;\r\n        private static final LocalDateTime INIT_DATE = LocalDateTime.parse(&quot;1900-01-01T00:00:00+00:00&quot;, formatter).plusDays(-2);\r\n\r\n        //The number in excel is from 1900-jan-1, so every number time that you get, you have to sum to that date\r\n        public static String toDate(double s) {\r\n            return formatter.format(INIT_DATE.plusSeconds((long) ((s*24*3600))));\r\n        }\r\n\r\n        public static Object[][] processSheet1(ZipFile zipFile) throws IOException {\r\n            String entry = &quot;xl/worksheets/sheet1.xml&quot;;\r\n            Object[][] result = null;\r\n            char[] dimensionToken = &quot;dimension ref=\\&quot;&quot;.toCharArray();\r\n            char[] tokenOpenC = &quot;&lt;c r=\\&quot;&quot;.toCharArray();\r\n            char[] tokenOpenV = &quot;&lt;v&gt;&quot;.toCharArray();\r\n\r\n            char[] tokenAttributS = &quot; s=\\&quot;&quot;.toCharArray();\r\n            char[] tokenAttributT = &quot; t=\\&quot;&quot;.toCharArray();\r\n            try (BufferedReader br = new BufferedReader(new InputStreamReader(zipFile.getInputStream(zipFile.getEntry(entry)), Charset.forName(&quot;UTF-8&quot;)))) {\r\n                String dimension = extractNextValue(br, dimensionToken, &#39;&quot;&#39;);\r\n                int[] sizes = extractSizeFromDimention(dimension.split(&quot;:&quot;)[1]);\r\n                br.skip(30); //Between dimension and next tag c exists more or less 30 chars\r\n                result = new Object[sizes[0]][sizes[1]];\r\n                String v;\r\n                while ((v = extractNextValue(br, tokenOpenC, &#39;&quot;&#39;)) != null) {\r\n                    int[] indexes = extractSizeFromDimention(v);\r\n\r\n                    int s = foundNextTokens(br, &#39;&gt;&#39;, tokenAttributS, tokenAttributT);\r\n                    char type = &#39;s&#39;; //3 types: number (n), string (s) and date (d)\r\n                    if (s == 0) { // Token S = number or date\r\n                        char read = (char) br.read();\r\n                        if (read == &#39;1&#39;) {\r\n                            type = &#39;n&#39;;\r\n                        } else {\r\n                            type = &#39;d&#39;;\r\n                        }\r\n                    } else if (s == -1) {\r\n                        type = &#39;n&#39;;\r\n                    }\r\n                    String c = extractNextValue(br, tokenOpenV, &#39;&lt;&#39;);\r\n                    Object value = null;\r\n                    switch (type) {\r\n                        case &#39;n&#39;:\r\n                            value = Double.parseDouble(c);\r\n                            break;\r\n                        case &#39;s&#39;:\r\n                            value = Integer.parseInt(c);\r\n                            break;\r\n                        case &#39;d&#39;:\r\n                            value = c.toString();\r\n                            break;\r\n                    }\r\n                    result[indexes[0] - 1][indexes[1] - 1] = value;\r\n                    br.skip(7); ///v&gt;&lt;/c&gt;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n\r\n        public static int[] extractSizeFromDimention(String dimention) {\r\n            StringBuilder sb = new StringBuilder();\r\n            int columns = 0;\r\n            int rows = 0;\r\n            for (char c : dimention.toCharArray()) {\r\n                if (columns == 0) {\r\n                    if (Character.isDigit(c)) {\r\n                        columns = convertExcelIndex(sb.toString());\r\n                        sb = new StringBuilder();\r\n                    }\r\n                }\r\n                sb.append(c);\r\n            }\r\n            rows = Integer.parseInt(sb.toString());\r\n            return new int[]{rows, columns};\r\n        }\r\n\r\n        public static String[] processSharedStrings(ZipFile zipFile) throws IOException {\r\n            String entry = &quot;xl/sharedStrings.xml&quot;;\r\n            String[] words = null;\r\n            char[] wordCount = &quot;Count=\\&quot;&quot;.toCharArray();\r\n            char[] token = &quot;&lt;t&gt;&quot;.toCharArray();\r\n            try (BufferedReader br = new BufferedReader(new InputStreamReader(zipFile.getInputStream(zipFile.getEntry(entry)), Charset.forName(&quot;UTF-8&quot;)))) {\r\n                String uniqueCount = extractNextValue(br, wordCount, &#39;&quot;&#39;);\r\n                words = new String[Integer.parseInt(uniqueCount)];\r\n                String nextWord;\r\n                int currentIndex = 0;\r\n                while ((nextWord = extractNextValue(br, token, &#39;&lt;&#39;)) != null) {\r\n                    words[currentIndex++] = nextWord;\r\n                    br.skip(11); //you can skip at least 11 chars &quot;/t&gt;&lt;/si&gt;&lt;si&gt;&quot;\r\n                }\r\n            }\r\n            return words;\r\n        }\r\n\r\n        public static int foundNextTokens(BufferedReader br, char until, char[]... tokens) throws IOException {\r\n            char character;\r\n            int[] indexes = new int[tokens.length];\r\n            while ((character = (char) br.read()) != CHAR_END) {\r\n                if (character == until) {\r\n                    break;\r\n                }\r\n                for (int i = 0; i &lt; indexes.length; i++) {\r\n                    if (tokens[i][indexes[i]] == character) {\r\n                        indexes[i]++;\r\n                        if (indexes[i] == tokens[i].length) {\r\n                            return i;\r\n                        }\r\n                    } else {\r\n                        indexes[i] = 0;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return -1;\r\n        }\r\n\r\n        public static String extractNextValue(BufferedReader br, char[] token, char until) throws IOException {\r\n            char character;\r\n            StringBuilder sb = new StringBuilder();\r\n            int index = 0;\r\n\r\n            while ((character = (char) br.read()) != CHAR_END) {\r\n                if (index == token.length) {\r\n                    if (character == until) {\r\n                        return sb.toString();\r\n                    } else {\r\n                        sb.append(character);\r\n                    }\r\n                } else {\r\n                    if (token[index] == character) {\r\n                        index++;\r\n                    } else {\r\n                        index = 0;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        public static int convertExcelIndex(String index) {\r\n            int result = 0;\r\n            for (char c : index.toCharArray()) {\r\n                result = result * 26 + ((int) c - (int) &#39;A&#39; + 1);\r\n            }\r\n            return result;\r\n        }\r\n\r\n    }","title":"How to open a huge excel file efficiently","body":"<p>Well, if your excel is going to be as simple as a CSV file like your example (<a href=\"https://drive.google.com/file/d/0B_CXvCTOo7_2UVZxbnpRaEVnaFk/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/0B_CXvCTOo7_2UVZxbnpRaEVnaFk/view?usp=sharing</a>), you can try to open the file as a zip file and read directly every xml:</p>\n\n<p>Intel i5 4460, 12 GB RAM, SSD Samsung EVO PRO.</p>\n\n<p><strong>If you have a lot of memory ram:</strong>\nThis code needs a lot of ram, but it takes 20~25 seconds. (You need the parameter -Xmx7g)</p>\n\n<pre><code>package com.devsaki.opensimpleexcel;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.nio.charset.Charset;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\nimport java.util.zip.ZipFile;\n\npublic class Multithread {\n\n    public static final char CHAR_END = (char) -1;\n\n    public static void main(String[] args) throws IOException, ExecutionException, InterruptedException {\n        String excelFile = \"C:/Downloads/BigSpreadsheetAllTypes.xlsx\";\n        ZipFile zipFile = new ZipFile(excelFile);\n        long init = System.currentTimeMillis();\n        ExecutorService executor = Executors.newFixedThreadPool(4);\n        char[] sheet1 = readEntry(zipFile, \"xl/worksheets/sheet1.xml\").toCharArray();\n        Future&lt;Object[][]&gt; futureSheet1 = executor.submit(() -&gt; processSheet1(new CharReader(sheet1), executor));\n        char[] sharedString = readEntry(zipFile, \"xl/sharedStrings.xml\").toCharArray();\n        Future&lt;String[]&gt; futureWords = executor.submit(() -&gt; processSharedStrings(new CharReader(sharedString)));\n\n        Object[][] sheet = futureSheet1.get();\n        String[] words = futureWords.get();\n\n        executor.shutdown();\n\n        long end = System.currentTimeMillis();\n        System.out.println(\"only read: \" + (end - init) / 1000);\n\n        ///Doing somethin with the file::Saving as csv\n        init = System.currentTimeMillis();\n        try (PrintWriter writer = new PrintWriter(excelFile + \".csv\", \"UTF-8\");) {\n            for (Object[] rows : sheet) {\n                for (Object cell : rows) {\n                    if (cell != null) {\n                        if (cell instanceof Integer) {\n                            writer.append(words[(Integer) cell]);\n                        } else if (cell instanceof String) {\n                            writer.append(toDate(Double.parseDouble(cell.toString())));\n                        } else {\n                            writer.append(cell.toString()); //Probably a number\n                        }\n                    }\n                    writer.append(\";\");\n                }\n                writer.append(\"\\n\");\n            }\n        }\n        end = System.currentTimeMillis();\n        System.out.println(\"Main saving to csv: \" + (end - init) / 1000);\n    }\n\n    private static final DateTimeFormatter formatter = DateTimeFormatter.ISO_DATE_TIME;\n    private static final LocalDateTime INIT_DATE = LocalDateTime.parse(\"1900-01-01T00:00:00+00:00\", formatter).plusDays(-2);\n\n    //The number in excel is from 1900-jan-1, so every number time that you get, you have to sum to that date\n    public static String toDate(double s) {\n        return formatter.format(INIT_DATE.plusSeconds((long) ((s*24*3600))));\n    }\n\n    public static String readEntry(ZipFile zipFile, String entry) throws IOException {\n        System.out.println(\"Initialing readEntry \" + entry);\n        long init = System.currentTimeMillis();\n        String result = null;\n\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(zipFile.getInputStream(zipFile.getEntry(entry)), Charset.forName(\"UTF-8\")))) {\n            br.readLine();\n            result = br.readLine();\n        }\n\n        long end = System.currentTimeMillis();\n        System.out.println(\"readEntry '\" + entry + \"': \" + (end - init) / 1000);\n        return result;\n    }\n\n\n    public static String[] processSharedStrings(CharReader br) throws IOException {\n        System.out.println(\"Initialing processSharedStrings\");\n        long init = System.currentTimeMillis();\n        String[] words = null;\n        char[] wordCount = \"Count=\\\"\".toCharArray();\n        char[] token = \"&lt;t&gt;\".toCharArray();\n        String uniqueCount = extractNextValue(br, wordCount, '\"');\n        words = new String[Integer.parseInt(uniqueCount)];\n        String nextWord;\n        int currentIndex = 0;\n        while ((nextWord = extractNextValue(br, token, '&lt;')) != null) {\n            words[currentIndex++] = nextWord;\n            br.skip(11); //you can skip at least 11 chars \"/t&gt;&lt;/si&gt;&lt;si&gt;\"\n        }\n        long end = System.currentTimeMillis();\n        System.out.println(\"SharedStrings: \" + (end - init) / 1000);\n        return words;\n    }\n\n\n    public static Object[][] processSheet1(CharReader br, ExecutorService executorService) throws IOException, ExecutionException, InterruptedException {\n        System.out.println(\"Initialing processSheet1\");\n        long init = System.currentTimeMillis();\n        char[] dimensionToken = \"dimension ref=\\\"\".toCharArray();\n        String dimension = extractNextValue(br, dimensionToken, '\"');\n        int[] sizes = extractSizeFromDimention(dimension.split(\":\")[1]);\n        br.skip(30); //Between dimension and next tag c exists more or less 30 chars\n        Object[][] result = new Object[sizes[0]][sizes[1]];\n\n        int parallelProcess = 8;\n        int currentIndex = br.currentIndex;\n        CharReader[] charReaders = new CharReader[parallelProcess];\n        int totalChars = Math.round(br.chars.length / parallelProcess);\n        for (int i = 0; i &lt; parallelProcess; i++) {\n            int endIndex = currentIndex + totalChars;\n            charReaders[i] = new CharReader(br.chars, currentIndex, endIndex, i);\n            currentIndex = endIndex;\n        }\n        Future[] futures = new Future[parallelProcess];\n        for (int i = charReaders.length - 1; i &gt;= 0; i--) {\n            final int j = i;\n            futures[i] = executorService.submit(() -&gt; inParallelProcess(charReaders[j], j == 0 ? null : charReaders[j - 1], result));\n        }\n        for (Future future : futures) {\n            future.get();\n        }\n\n        long end = System.currentTimeMillis();\n        System.out.println(\"Sheet1: \" + (end - init) / 1000);\n        return result;\n    }\n\n    public static void inParallelProcess(CharReader br, CharReader back, Object[][] result) {\n        System.out.println(\"Initialing inParallelProcess : \" + br.identifier);\n\n        char[] tokenOpenC = \"&lt;c r=\\\"\".toCharArray();\n        char[] tokenOpenV = \"&lt;v&gt;\".toCharArray();\n\n        char[] tokenAttributS = \" s=\\\"\".toCharArray();\n        char[] tokenAttributT = \" t=\\\"\".toCharArray();\n\n        String v;\n        int firstCurrentIndex = br.currentIndex;\n        boolean first = true;\n\n        while ((v = extractNextValue(br, tokenOpenC, '\"')) != null) {\n            if (first &amp;&amp; back != null) {\n                int sum = br.currentIndex - firstCurrentIndex - tokenOpenC.length - v.length() - 1;\n                first = false;\n                System.out.println(\"Adding to : \" + back.identifier + \" From : \" + br.identifier);\n                back.plusLength(sum);\n            }\n            int[] indexes = extractSizeFromDimention(v);\n\n            int s = foundNextTokens(br, '&gt;', tokenAttributS, tokenAttributT);\n            char type = 's'; //3 types: number (n), string (s) and date (d)\n            if (s == 0) { // Token S = number or date\n                char read = br.read();\n                if (read == '1') {\n                    type = 'n';\n                } else {\n                    type = 'd';\n                }\n            } else if (s == -1) {\n                type = 'n';\n            }\n            String c = extractNextValue(br, tokenOpenV, '&lt;');\n            Object value = null;\n            switch (type) {\n                case 'n':\n                    value = Double.parseDouble(c);\n                    break;\n                case 's':\n                    try {\n                        value = Integer.parseInt(c);\n                    } catch (Exception ex) {\n                        System.out.println(\"Identifier Error : \" + br.identifier);\n                    }\n                    break;\n                case 'd':\n                    value = c.toString();\n                    break;\n            }\n            result[indexes[0] - 1][indexes[1] - 1] = value;\n            br.skip(7); ///v&gt;&lt;/c&gt;\n        }\n    }\n\n    static class CharReader {\n        char[] chars;\n        int currentIndex;\n        int length;\n\n        int identifier;\n\n        public CharReader(char[] chars) {\n            this.chars = chars;\n            this.length = chars.length;\n        }\n\n        public CharReader(char[] chars, int currentIndex, int length, int identifier) {\n            this.chars = chars;\n            this.currentIndex = currentIndex;\n            if (length &gt; chars.length) {\n                this.length = chars.length;\n            } else {\n                this.length = length;\n            }\n            this.identifier = identifier;\n        }\n\n        public void plusLength(int n) {\n            if (this.length + n &lt;= chars.length) {\n                this.length += n;\n            }\n        }\n\n        public char read() {\n            if (currentIndex &gt;= length) {\n                return CHAR_END;\n            }\n            return chars[currentIndex++];\n        }\n\n        public void skip(int n) {\n            currentIndex += n;\n        }\n    }\n\n\n    public static int[] extractSizeFromDimention(String dimention) {\n        StringBuilder sb = new StringBuilder();\n        int columns = 0;\n        int rows = 0;\n        for (char c : dimention.toCharArray()) {\n            if (columns == 0) {\n                if (Character.isDigit(c)) {\n                    columns = convertExcelIndex(sb.toString());\n                    sb = new StringBuilder();\n                }\n            }\n            sb.append(c);\n        }\n        rows = Integer.parseInt(sb.toString());\n        return new int[]{rows, columns};\n    }\n\n    public static int foundNextTokens(CharReader br, char until, char[]... tokens) {\n        char character;\n        int[] indexes = new int[tokens.length];\n        while ((character = br.read()) != CHAR_END) {\n            if (character == until) {\n                break;\n            }\n            for (int i = 0; i &lt; indexes.length; i++) {\n                if (tokens[i][indexes[i]] == character) {\n                    indexes[i]++;\n                    if (indexes[i] == tokens[i].length) {\n                        return i;\n                    }\n                } else {\n                    indexes[i] = 0;\n                }\n            }\n        }\n\n        return -1;\n    }\n\n    public static String extractNextValue(CharReader br, char[] token, char until) {\n        char character;\n        StringBuilder sb = new StringBuilder();\n        int index = 0;\n\n        while ((character = br.read()) != CHAR_END) {\n            if (index == token.length) {\n                if (character == until) {\n                    return sb.toString();\n                } else {\n                    sb.append(character);\n                }\n            } else {\n                if (token[index] == character) {\n                    index++;\n                } else {\n                    index = 0;\n                }\n            }\n        }\n        return null;\n    }\n\n    public static int convertExcelIndex(String index) {\n        int result = 0;\n        for (char c : index.toCharArray()) {\n            result = result * 26 + ((int) c - (int) 'A' + 1);\n        }\n        return result;\n    }\n}\n</code></pre>\n\n<p><strong>Old answer (Not need the parameter Xms7g, so take less memory):</strong>\nIt takes to open and read the example file about 35 seconds (200MB) with an HDD, with SDD takes a little less (30 seconds).</p>\n\n<p>Here the code:\n<a href=\"https://github.com/csaki/OpenSimpleExcelFast.git\" rel=\"nofollow noreferrer\">https://github.com/csaki/OpenSimpleExcelFast.git</a></p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.nio.charset.Charset;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\nimport java.util.zip.ZipFile;\n\npublic class Launcher {\n\n    public static final char CHAR_END = (char) -1;\n\n    public static void main(String[] args) throws IOException, ExecutionException, InterruptedException {\n        long init = System.currentTimeMillis();\n        String excelFile = \"D:/Downloads/BigSpreadsheet.xlsx\";\n        ZipFile zipFile = new ZipFile(excelFile);\n\n        ExecutorService executor = Executors.newFixedThreadPool(4);\n        Future&lt;String[]&gt; futureWords = executor.submit(() -&gt; processSharedStrings(zipFile));\n        Future&lt;Object[][]&gt; futureSheet1 = executor.submit(() -&gt; processSheet1(zipFile));\n        String[] words = futureWords.get();\n        Object[][] sheet1 = futureSheet1.get();\n        executor.shutdown();\n\n        long end = System.currentTimeMillis();\n        System.out.println(\"Main only open and read: \" + (end - init) / 1000);\n\n\n        ///Doing somethin with the file::Saving as csv\n        init = System.currentTimeMillis();\n        try (PrintWriter writer = new PrintWriter(excelFile + \".csv\", \"UTF-8\");) {\n            for (Object[] rows : sheet1) {\n                for (Object cell : rows) {\n                    if (cell != null) {\n                        if (cell instanceof Integer) {\n                            writer.append(words[(Integer) cell]);\n                        } else if (cell instanceof String) {\n                            writer.append(toDate(Double.parseDouble(cell.toString())));\n                        } else {\n                            writer.append(cell.toString()); //Probably a number\n                        }\n                    }\n                    writer.append(\";\");\n                }\n                writer.append(\"\\n\");\n            }\n        }\n        end = System.currentTimeMillis();\n        System.out.println(\"Main saving to csv: \" + (end - init) / 1000);\n    }\n\n    private static final DateTimeFormatter formatter = DateTimeFormatter.ISO_DATE_TIME;\n    private static final LocalDateTime INIT_DATE = LocalDateTime.parse(\"1900-01-01T00:00:00+00:00\", formatter).plusDays(-2);\n\n    //The number in excel is from 1900-jan-1, so every number time that you get, you have to sum to that date\n    public static String toDate(double s) {\n        return formatter.format(INIT_DATE.plusSeconds((long) ((s*24*3600))));\n    }\n\n    public static Object[][] processSheet1(ZipFile zipFile) throws IOException {\n        String entry = \"xl/worksheets/sheet1.xml\";\n        Object[][] result = null;\n        char[] dimensionToken = \"dimension ref=\\\"\".toCharArray();\n        char[] tokenOpenC = \"&lt;c r=\\\"\".toCharArray();\n        char[] tokenOpenV = \"&lt;v&gt;\".toCharArray();\n\n        char[] tokenAttributS = \" s=\\\"\".toCharArray();\n        char[] tokenAttributT = \" t=\\\"\".toCharArray();\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(zipFile.getInputStream(zipFile.getEntry(entry)), Charset.forName(\"UTF-8\")))) {\n            String dimension = extractNextValue(br, dimensionToken, '\"');\n            int[] sizes = extractSizeFromDimention(dimension.split(\":\")[1]);\n            br.skip(30); //Between dimension and next tag c exists more or less 30 chars\n            result = new Object[sizes[0]][sizes[1]];\n            String v;\n            while ((v = extractNextValue(br, tokenOpenC, '\"')) != null) {\n                int[] indexes = extractSizeFromDimention(v);\n\n                int s = foundNextTokens(br, '&gt;', tokenAttributS, tokenAttributT);\n                char type = 's'; //3 types: number (n), string (s) and date (d)\n                if (s == 0) { // Token S = number or date\n                    char read = (char) br.read();\n                    if (read == '1') {\n                        type = 'n';\n                    } else {\n                        type = 'd';\n                    }\n                } else if (s == -1) {\n                    type = 'n';\n                }\n                String c = extractNextValue(br, tokenOpenV, '&lt;');\n                Object value = null;\n                switch (type) {\n                    case 'n':\n                        value = Double.parseDouble(c);\n                        break;\n                    case 's':\n                        value = Integer.parseInt(c);\n                        break;\n                    case 'd':\n                        value = c.toString();\n                        break;\n                }\n                result[indexes[0] - 1][indexes[1] - 1] = value;\n                br.skip(7); ///v&gt;&lt;/c&gt;\n            }\n        }\n        return result;\n    }\n\n    public static int[] extractSizeFromDimention(String dimention) {\n        StringBuilder sb = new StringBuilder();\n        int columns = 0;\n        int rows = 0;\n        for (char c : dimention.toCharArray()) {\n            if (columns == 0) {\n                if (Character.isDigit(c)) {\n                    columns = convertExcelIndex(sb.toString());\n                    sb = new StringBuilder();\n                }\n            }\n            sb.append(c);\n        }\n        rows = Integer.parseInt(sb.toString());\n        return new int[]{rows, columns};\n    }\n\n    public static String[] processSharedStrings(ZipFile zipFile) throws IOException {\n        String entry = \"xl/sharedStrings.xml\";\n        String[] words = null;\n        char[] wordCount = \"Count=\\\"\".toCharArray();\n        char[] token = \"&lt;t&gt;\".toCharArray();\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(zipFile.getInputStream(zipFile.getEntry(entry)), Charset.forName(\"UTF-8\")))) {\n            String uniqueCount = extractNextValue(br, wordCount, '\"');\n            words = new String[Integer.parseInt(uniqueCount)];\n            String nextWord;\n            int currentIndex = 0;\n            while ((nextWord = extractNextValue(br, token, '&lt;')) != null) {\n                words[currentIndex++] = nextWord;\n                br.skip(11); //you can skip at least 11 chars \"/t&gt;&lt;/si&gt;&lt;si&gt;\"\n            }\n        }\n        return words;\n    }\n\n    public static int foundNextTokens(BufferedReader br, char until, char[]... tokens) throws IOException {\n        char character;\n        int[] indexes = new int[tokens.length];\n        while ((character = (char) br.read()) != CHAR_END) {\n            if (character == until) {\n                break;\n            }\n            for (int i = 0; i &lt; indexes.length; i++) {\n                if (tokens[i][indexes[i]] == character) {\n                    indexes[i]++;\n                    if (indexes[i] == tokens[i].length) {\n                        return i;\n                    }\n                } else {\n                    indexes[i] = 0;\n                }\n            }\n        }\n\n        return -1;\n    }\n\n    public static String extractNextValue(BufferedReader br, char[] token, char until) throws IOException {\n        char character;\n        StringBuilder sb = new StringBuilder();\n        int index = 0;\n\n        while ((character = (char) br.read()) != CHAR_END) {\n            if (index == token.length) {\n                if (character == until) {\n                    return sb.toString();\n                } else {\n                    sb.append(character);\n                }\n            } else {\n                if (token[index] == character) {\n                    index++;\n                } else {\n                    index = 0;\n                }\n            }\n        }\n        return null;\n    }\n\n    public static int convertExcelIndex(String index) {\n        int result = 0;\n        for (char c : index.toCharArray()) {\n            result = result * 26 + ((int) c - (int) 'A' + 1);\n        }\n        return result;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7655561,"reputation":2759,"user_id":5802606,"display_name":"void"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1506527387,"creation_date":1506527387,"answer_id":46452187,"question_id":46373895,"body_markdown":"Looks like it is hardly achievable in Python at all. If we unpack a sheet data file then it would take all required 30 seconds just to pass it through the C-based iterative SAX parser (using `lxml`, a very fast wrapper over `libxml2`):\r\n\r\n\r\n    from __future__ import print_function\r\n\r\n    from lxml import etree\r\n    import time\r\n\r\n\r\n    start_ts = time.time()\r\n\r\n    for data in etree.iterparse(open(&#39;xl/worksheets/sheet1.xml&#39;), events=(&#39;start&#39;,), \r\n                                collect_ids=False, resolve_entities=False,\r\n                                huge_tree=True):\r\n        pass\r\n\r\n    print(time.time() - start_ts)\r\n\r\nThe sample output: 27.2134890556\r\n\r\n\r\nBy the way, the Excel itself needs about 40 seconds to load the workbook.","title":"How to open a huge excel file efficiently","body":"<p>Looks like it is hardly achievable in Python at all. If we unpack a sheet data file then it would take all required 30 seconds just to pass it through the C-based iterative SAX parser (using <code>lxml</code>, a very fast wrapper over <code>libxml2</code>):</p>\n\n<pre><code>from __future__ import print_function\n\nfrom lxml import etree\nimport time\n\n\nstart_ts = time.time()\n\nfor data in etree.iterparse(open('xl/worksheets/sheet1.xml'), events=('start',), \n                            collect_ids=False, resolve_entities=False,\n                            huge_tree=True):\n    pass\n\nprint(time.time() - start_ts)\n</code></pre>\n\n<p>The sample output: 27.2134890556</p>\n\n<p>By the way, the Excel itself needs about 40 seconds to load the workbook.</p>\n"},{"tags":[],"owner":{"account_id":11535377,"reputation":609,"user_id":8453036,"display_name":"R. Roe"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1506724055,"creation_date":1506724055,"answer_id":46497699,"question_id":46373895,"body_markdown":"I&#39;m using a Dell Precision T1700 workstation and using c# I was able to open the file and read it&#39;s contents in about 24 seconds just using standard code to open a workbook using interop services.  Using references to the Microsoft Excel 15.0 Object Library here is my code.\r\n\r\nMy using statements:\r\n\r\n    using System.Runtime.InteropServices;\r\n    using Excel = Microsoft.Office.Interop.Excel;\r\n\r\nCode to open and read workbook:\r\n\r\n    public partial class MainWindow : Window {\r\n        public MainWindow() {\r\n            InitializeComponent();\r\n\r\n            Excel.Application xlApp;\r\n            Excel.Workbook wb;\r\n            Excel.Worksheet ws;\r\n\r\n            xlApp = new Excel.Application();\r\n            xlApp.Visible = false;\r\n            xlApp.ScreenUpdating = false;\r\n\r\n            wb = xlApp.Workbooks.Open(@&quot;Desired Path of workbook\\Copy of BigSpreadsheet.xlsx&quot;);\r\n\r\n            ws = wb.Sheets[&quot;Sheet1&quot;];\r\n\r\n            //string rng = ws.get_Range(&quot;A1&quot;).Value;\r\n            MessageBox.Show(ws.get_Range(&quot;A1&quot;).Value);\r\n\r\n            Marshal.FinalReleaseComObject(ws);\r\n\r\n            wb.Close();\r\n            Marshal.FinalReleaseComObject(wb);\r\n\r\n            xlApp.Quit();\r\n            Marshal.FinalReleaseComObject(xlApp);\r\n\r\n            GC.Collect();\r\n            GC.WaitForPendingFinalizers();\r\n        }\r\n    }\r\n","title":"How to open a huge excel file efficiently","body":"<p>I'm using a Dell Precision T1700 workstation and using c# I was able to open the file and read it's contents in about 24 seconds just using standard code to open a workbook using interop services.  Using references to the Microsoft Excel 15.0 Object Library here is my code.</p>\n\n<p>My using statements:</p>\n\n<pre><code>using System.Runtime.InteropServices;\nusing Excel = Microsoft.Office.Interop.Excel;\n</code></pre>\n\n<p>Code to open and read workbook:</p>\n\n<pre><code>public partial class MainWindow : Window {\n    public MainWindow() {\n        InitializeComponent();\n\n        Excel.Application xlApp;\n        Excel.Workbook wb;\n        Excel.Worksheet ws;\n\n        xlApp = new Excel.Application();\n        xlApp.Visible = false;\n        xlApp.ScreenUpdating = false;\n\n        wb = xlApp.Workbooks.Open(@\"Desired Path of workbook\\Copy of BigSpreadsheet.xlsx\");\n\n        ws = wb.Sheets[\"Sheet1\"];\n\n        //string rng = ws.get_Range(\"A1\").Value;\n        MessageBox.Show(ws.get_Range(\"A1\").Value);\n\n        Marshal.FinalReleaseComObject(ws);\n\n        wb.Close();\n        Marshal.FinalReleaseComObject(wb);\n\n        xlApp.Quit();\n        Marshal.FinalReleaseComObject(xlApp);\n\n        GC.Collect();\n        GC.WaitForPendingFinalizers();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10373874,"reputation":3027,"user_id":7650686,"display_name":"obgnaw"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1506764379,"creation_date":1506746474,"answer_id":46499641,"question_id":46373895,"body_markdown":"The c# and ole solution still have some bottleneck.So i test it by c++ and ado.\r\n\r\n    _bstr_t connStr(makeConnStr(excelFile, header).c_str());\r\n                \r\n    TESTHR(pRec.CreateInstance(__uuidof(Recordset)));       \r\n    TESTHR(pRec-&gt;Open(sqlSelectSheet(connStr, sheetIndex).c_str(), connStr, adOpenStatic, adLockOptimistic, adCmdText));\r\n                                   \r\n    while(!pRec-&gt;adoEOF)\r\n    {\r\n        for(long i = 0; i &lt; pRec-&gt;Fields-&gt;GetCount(); ++i)\r\n        {   \r\n            _variant_t v = pRec-&gt;Fields-&gt;GetItem(i)-&gt;Value;\r\n            if(v.vt == VT_R8)\r\n    \t\t\tnum[i] = v.dblVal;\r\n            if(v.vt == VT_BSTR)\r\n    \t\t\tstr[i] = v.bstrVal;          \r\n            ++cellCount;\r\n        }                                    \r\n        pRec-&gt;MoveNext();\r\n    }\r\n\r\nIn i5-4460 and HDD machine,i find 500 thousands of cell in xls will take 1.5s.But same data in xlsx will take 2.829s.so it&#39;s possible for manipulating your data under 30s.\r\n\r\nIf you really need under 30s,use RAM Drive to reduce file IO.It will significantly improve your process.\r\nI cannot download your data to test it,so please tell me the result.\r\n","title":"How to open a huge excel file efficiently","body":"<p>The c# and ole solution still have some bottleneck.So i test it by c++ and ado.</p>\n\n<pre><code>_bstr_t connStr(makeConnStr(excelFile, header).c_str());\n\nTESTHR(pRec.CreateInstance(__uuidof(Recordset)));       \nTESTHR(pRec-&gt;Open(sqlSelectSheet(connStr, sheetIndex).c_str(), connStr, adOpenStatic, adLockOptimistic, adCmdText));\n\nwhile(!pRec-&gt;adoEOF)\n{\n    for(long i = 0; i &lt; pRec-&gt;Fields-&gt;GetCount(); ++i)\n    {   \n        _variant_t v = pRec-&gt;Fields-&gt;GetItem(i)-&gt;Value;\n        if(v.vt == VT_R8)\n            num[i] = v.dblVal;\n        if(v.vt == VT_BSTR)\n            str[i] = v.bstrVal;          \n        ++cellCount;\n    }                                    \n    pRec-&gt;MoveNext();\n}\n</code></pre>\n\n<p>In i5-4460 and HDD machine,i find 500 thousands of cell in xls will take 1.5s.But same data in xlsx will take 2.829s.so it's possible for manipulating your data under 30s.</p>\n\n<p>If you really need under 30s,use RAM Drive to reduce file IO.It will significantly improve your process.\nI cannot download your data to test it,so please tell me the result.</p>\n"},{"tags":[],"owner":{"account_id":148887,"reputation":4330,"user_id":1700467,"display_name":"skadya"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1506977970,"creation_date":1506877637,"answer_id":46514774,"question_id":46373895,"body_markdown":"I have created an sample **Java** program which is able to load the file in ~40 seconds my laptop ( Intel i7 4 core, 16 GB RAM). \r\n\r\nhttps://github.com/skadyan/largefile \r\n\r\nThis program uses the [Apache POI library][1] to load the .xlsx file using the [XSSF SAX API][2].\r\n \r\nThe callback interface `com.stackoverlfow.largefile.RecordHandler` implementation can be used to process the data loaded from the excel. This interface define only one method which take three arguments\r\n\r\n - sheetname : String, excel sheet name\r\n - row number: int, row number of data \r\n - and `data map`: Map&lt;String,String&gt;: excel cell reference and excel formatted cell value\r\n\r\nThe class `com.stackoverlfow.largefile.Main` demonstrate one basic implementation of this interface which just print the row number on console.\r\n\r\n**Update**\r\n\r\n[woodstox][3] parser seems have better performance than standard `SAXReader`. (code updated in repo).\r\n\r\nAlso in order to meet the desired performance requirement, you may consider to re-implement the `org.apache.poi...XSSFSheetXMLHandler`. In the implementation, more optimized string/text value handling can be implemented and unnecessary text formatting operation may be skipped. \r\n\r\n\r\n\r\n\r\n  [1]: http://poi.apache.org/spreadsheet/index.html\r\n  [2]: http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api\r\n  [3]: https://github.com/FasterXML/woodstox","title":"How to open a huge excel file efficiently","body":"<p>I have created an sample <strong>Java</strong> program which is able to load the file in ~40 seconds my laptop ( Intel i7 4 core, 16 GB RAM). </p>\n\n<p><a href=\"https://github.com/skadyan/largefile\" rel=\"nofollow noreferrer\">https://github.com/skadyan/largefile</a> </p>\n\n<p>This program uses the <a href=\"http://poi.apache.org/spreadsheet/index.html\" rel=\"nofollow noreferrer\">Apache POI library</a> to load the .xlsx file using the <a href=\"http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api\" rel=\"nofollow noreferrer\">XSSF SAX API</a>.</p>\n\n<p>The callback interface <code>com.stackoverlfow.largefile.RecordHandler</code> implementation can be used to process the data loaded from the excel. This interface define only one method which take three arguments</p>\n\n<ul>\n<li>sheetname : String, excel sheet name</li>\n<li>row number: int, row number of data </li>\n<li>and <code>data map</code>: Map: excel cell reference and excel formatted cell value</li>\n</ul>\n\n<p>The class <code>com.stackoverlfow.largefile.Main</code> demonstrate one basic implementation of this interface which just print the row number on console.</p>\n\n<p><strong>Update</strong></p>\n\n<p><a href=\"https://github.com/FasterXML/woodstox\" rel=\"nofollow noreferrer\">woodstox</a> parser seems have better performance than standard <code>SAXReader</code>. (code updated in repo).</p>\n\n<p>Also in order to meet the desired performance requirement, you may consider to re-implement the <code>org.apache.poi...XSSFSheetXMLHandler</code>. In the implementation, more optimized string/text value handling can be implemented and unnecessary text formatting operation may be skipped. </p>\n"},{"tags":[],"owner":{"account_id":185868,"reputation":2971,"user_id":422855,"accept_rate":31,"display_name":"ZEE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506985858,"creation_date":1506985858,"answer_id":46534970,"question_id":46373895,"body_markdown":"I would like to have more info about the system where you\r\nare opening the file... anyway:\r\n\r\nlook in your system for a Windows update called&lt;br&gt; \r\n&quot;Office File Validation Add-In for Office ...&quot;&lt;br&gt;\r\n\r\nif you have it... uninstall it...&lt;br&gt;\r\nthe file should load much more quickly&lt;br&gt;\r\nspecially if is loaded froma share&lt;br&gt;\r\n","title":"How to open a huge excel file efficiently","body":"<p>I would like to have more info about the system where you\nare opening the file... anyway:</p>\n\n<p>look in your system for a Windows update called<br> \n\"Office File Validation Add-In for Office ...\"<br></p>\n\n<p>if you have it... uninstall it...<br>\nthe file should load much more quickly<br>\nspecially if is loaded froma share<br></p>\n"},{"tags":[],"owner":{"account_id":185868,"reputation":2971,"user_id":422855,"accept_rate":31,"display_name":"ZEE"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506986227,"creation_date":1506986227,"answer_id":46535014,"question_id":46373895,"body_markdown":"Another way that should improve largely the load/operation time is a RAMDrive&lt;br&gt;\r\n\r\ncreate a RAMDrive with enough space for your file and a 10%..20% extra space...&lt;br&gt;\r\ncopy the file for the RAMDrive...&lt;br&gt;\r\nLoad the file from there... depending on your drive and filesystem\r\nthe speed improvement should be huge...\r\n\r\nMy favourite is IMDisk toolkit&lt;br&gt; \r\n(https://sourceforge.net/projects/imdisk-toolkit/)\r\nhere you have a powerfull command line to script everything...\r\n\r\nI also recommend SoftPerfect ramdisk&lt;br&gt;\r\n(http://www.majorgeeks.com/files/details/softperfect_ram_disk.html)\r\n\r\nbut that also depends of your OS...\r\n\r\n\r\n","title":"How to open a huge excel file efficiently","body":"<p>Another way that should improve largely the load/operation time is a RAMDrive<br></p>\n\n<p>create a RAMDrive with enough space for your file and a 10%..20% extra space...<br>\ncopy the file for the RAMDrive...<br>\nLoad the file from there... depending on your drive and filesystem\nthe speed improvement should be huge...</p>\n\n<p>My favourite is IMDisk toolkit<br> \n(<a href=\"https://sourceforge.net/projects/imdisk-toolkit/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/imdisk-toolkit/</a>)\nhere you have a powerfull command line to script everything...</p>\n\n<p>I also recommend SoftPerfect ramdisk<br>\n(<a href=\"http://www.majorgeeks.com/files/details/softperfect_ram_disk.html\" rel=\"nofollow noreferrer\">http://www.majorgeeks.com/files/details/softperfect_ram_disk.html</a>)</p>\n\n<p>but that also depends of your OS...</p>\n"}],"owner":{"account_id":328297,"reputation":106386,"user_id":651174,"accept_rate":92,"display_name":"David542"},"comment_count":30,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23974,"favorite_count":0,"down_vote_count":1,"up_vote_count":38,"accepted_answer_id":46434061,"answer_count":11,"score":37,"last_activity_date":1693837397,"creation_date":1506118310,"question_id":46373895,"body_markdown":"I have a 150MB one-sheet excel file that takes about 7 minutes to open on a very powerful machine using the following:\r\n\r\n    # using python\r\n    import xlrd\r\n    wb = xlrd.open_workbook(file)\r\n    sh = wb.sheet_by_index(0)\r\n\r\nIs there any way to open the excel file quicker? I&#39;m open to even very outlandish suggestions (such as hadoop, spark, c, java, etc.). Ideally I&#39;m looking for a way to open the file in under 30 seconds if that&#39;s not a pipe dream. Also, the above example is using python, but it doesn&#39;t have to be python.\r\n\r\n---\r\n\r\n**Note: this is an Excel file from a client. It cannot be converted into any other format before we receive it. It is not our file**\r\n\r\n---\r\n\r\n**UPDATE:** Answer with a working example of code that will open the following 200MB excel file in under 30 seconds will be rewarded with bounty: https://drive.google.com/file/d/0B_CXvCTOo7_2VW9id2VXRWZrbzQ/view?usp=sharing. This file should have string (col 1), date (col 9), and number (col 11).","title":"How to open a huge excel file efficiently","body":"<p>I have a 150MB one-sheet excel file that takes about 7 minutes to open on a very powerful machine using the following:</p>\n\n<pre><code># using python\nimport xlrd\nwb = xlrd.open_workbook(file)\nsh = wb.sheet_by_index(0)\n</code></pre>\n\n<p>Is there any way to open the excel file quicker? I'm open to even very outlandish suggestions (such as hadoop, spark, c, java, etc.). Ideally I'm looking for a way to open the file in under 30 seconds if that's not a pipe dream. Also, the above example is using python, but it doesn't have to be python.</p>\n\n<hr>\n\n<p><strong>Note: this is an Excel file from a client. It cannot be converted into any other format before we receive it. It is not our file</strong></p>\n\n<hr>\n\n<p><strong>UPDATE:</strong> Answer with a working example of code that will open the following 200MB excel file in under 30 seconds will be rewarded with bounty: <a href=\"https://drive.google.com/file/d/0B_CXvCTOo7_2VW9id2VXRWZrbzQ/view?usp=sharing\" rel=\"noreferrer\">https://drive.google.com/file/d/0B_CXvCTOo7_2VW9id2VXRWZrbzQ/view?usp=sharing</a>. This file should have string (col 1), date (col 9), and number (col 11).</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":19900384,"reputation":81,"user_id":14580500,"display_name":"ash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693829818,"creation_date":1693829818,"answer_id":77037647,"question_id":77037558,"body_markdown":"It should be due to the hibernate version upgradation.\r\nI don&#39;t rememeber the determined version.\r\nIn order to be compliant with the JPA specifications, the names of identity generators need now be considered global, and no longer scoped to the entity in which they are declared. This means existing applications might now have a naming conflict which needs to be addressed to upgrade. Configuring two generators, even with different types but with the same name,may cause some exception in your project.\r\nSo you may have to check the object generated by @TableGenerator and @SequenceGenerator,ensure the different  generator has the different name.\r\n","title":"In java for When spring version upgraded to 5.3.29 and hibernate version to 5.3.29.final","body":"<p>It should be due to the hibernate version upgradation.\nI don't rememeber the determined version.\nIn order to be compliant with the JPA specifications, the names of identity generators need now be considered global, and no longer scoped to the entity in which they are declared. This means existing applications might now have a naming conflict which needs to be addressed to upgrade. Configuring two generators, even with different types but with the same name,may cause some exception in your project.\nSo you may have to check the object generated by @TableGenerator and @SequenceGenerator,ensure the different  generator has the different name.</p>\n"}],"owner":{"account_id":21982012,"reputation":103,"user_id":16256908,"display_name":"Kakashi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693837263,"creation_date":1693829216,"question_id":77037558,"body_markdown":"```\r\nThe extra log is generating as \r\nWARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) (1 HHH000069: Duplicate generator name seqGenerator WARN (org.hibernate.boot.internal. InFlightMetadataCollector Impl:501) [1 HHH000069: Duplicate generator name seqGenerator\r\n\r\nWARN (org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [] HHH000069: Duplicate generator name seqGenerator\r\n\r\nWARN (org.hibernate.boot.internal. InFlightMetadataCollector Imp1:501) [1 HHH000069: Duplicate generator name seqGenerator\r\n\r\nJ WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [] HHR000069: Duplicate generator name seqGenerator WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [] Hнн000069: Duplicate generator name seqGenerator\r\n\r\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) [] HHH000069: Duplicate generator name seqGenerator\r\n\r\nWARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) HHH000069: Duplicate generator name seqGenerator\r\n\r\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [1 HHн000069: Duplicate generator name seqGenerator\r\n\r\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollector Imp1:501) [1 HHR000069: Duplicate generator name seqGenerator\r\n\r\nWARN (org.hibernate.boot.internal. InFlightMetadataCollector Imp1:501) D HHH000069: Duplicate generator name seqGenerator\r\n\r\nWARN\r\n\r\n(org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [1 HHH000069: Duplicate generator name seqGenerator\r\n\r\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) [] HHн000069: Duplicate generator name seqGenerator\r\n\r\nWARN (org.hibernate.boot.internal. InFlightMetadataCollector Impl:501) [1 HHH000069: Duplicate generator name seqGenerator\r\n\r\nWARN (org.hibernate.boot.internal. InFlightMetadatacollectorImpl:501) [] HHH000069: Duplicate generator name seqGenerator\r\n\r\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) [] HHH000069: Duplicate generator name seqGenerator\r\n```\r\nhow can I solve this issue?","title":"In java for When spring version upgraded to 5.3.29 and hibernate version to 5.3.29.final","body":"<pre><code>The extra log is generating as \nWARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) (1 HHH000069: Duplicate generator name seqGenerator WARN (org.hibernate.boot.internal. InFlightMetadataCollector Impl:501) [1 HHH000069: Duplicate generator name seqGenerator\n\nWARN (org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [] HHH000069: Duplicate generator name seqGenerator\n\nWARN (org.hibernate.boot.internal. InFlightMetadataCollector Imp1:501) [1 HHH000069: Duplicate generator name seqGenerator\n\nJ WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [] HHR000069: Duplicate generator name seqGenerator WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [] Hнн000069: Duplicate generator name seqGenerator\n\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) [] HHH000069: Duplicate generator name seqGenerator\n\nWARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) HHH000069: Duplicate generator name seqGenerator\n\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [1 HHн000069: Duplicate generator name seqGenerator\n\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollector Imp1:501) [1 HHR000069: Duplicate generator name seqGenerator\n\nWARN (org.hibernate.boot.internal. InFlightMetadataCollector Imp1:501) D HHH000069: Duplicate generator name seqGenerator\n\nWARN\n\n(org.hibernate.boot.internal. InFlightMetadataCollectorImpl:501) [1 HHH000069: Duplicate generator name seqGenerator\n\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) [] HHн000069: Duplicate generator name seqGenerator\n\nWARN (org.hibernate.boot.internal. InFlightMetadataCollector Impl:501) [1 HHH000069: Duplicate generator name seqGenerator\n\nWARN (org.hibernate.boot.internal. InFlightMetadatacollectorImpl:501) [] HHH000069: Duplicate generator name seqGenerator\n\n1 WARN (org.hibernate.boot.internal. InFlightMetadataCollectorImp1:501) [] HHH000069: Duplicate generator name seqGenerator\n</code></pre>\n<p>how can I solve this issue?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":137166,"reputation":1740,"user_id":341170,"display_name":"Mohit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1448616892,"creation_date":1448449647,"answer_id":33914933,"question_id":33901724,"body_markdown":"Spring uses &lt;code&gt;StringToEnum&lt;/code&gt; for converting string values to enum. This class internally uses &lt;code&gt;java.lang.Enum#valueOf&lt;/code&gt; method to do the conversion. Enum class creates a map and then performs lookup on this map. Hence, the key must match the exact case for lookup to succeed.\r\n\r\nBelow test case will validate that:\r\n\r\n    enum SomeEnum{\r\n\t\tA, B\r\n    }\r\n\r\n    public class EnumTest {\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    SomeEnum e1 = Enum.valueOf(SomeEnum.class, &quot;A&quot;);\r\n\t\t    System.out.println(e1);\r\n\t\t    SomeEnum e2 = Enum.valueOf(SomeEnum.class, &quot;a&quot;); //throws exception\r\n\t    }\r\n    }\r\n\r\nHence, spring fall backs to value defined in your application.yml when it fails to convert value passed from command line.\r\n\r\n\r\n----------\r\n\r\nEDIT\r\n\r\nIf you try the following combinations:\r\n\r\n    foo.bar[A_VALUE]: from application.yml\r\n    foo.bar[A_VALUE]: from command line\r\n    {A_VALUE=from command line}\r\n\r\n    foo.bar[A_VALUE]: from application.yml\r\n    foo.bar[aValue]: from command line\r\n    {A_VALUE=from application.yml}\r\n\r\n    foo.bar[aValue]: from application.yml\r\n    foo.bar[A_VALUE]: from command line\r\n    {A_VALUE=from application.yml}\r\n\r\n    foo.bar[aValue]: from application.yml\r\n    foo.bar[aValue]: from command line\r\n    {A_VALUE=from command line}\r\n\r\n1st &amp; 4th Scenario - As key names are exactly same, first command line property is set. This property is added to processed list and thus YML property is ignored.\r\n\r\n2nd &amp; 3rd Scenario - As key names are different, both command line &amp; YML properties are processed. YML being processed second override the value set from command line.\r\n","title":"ConfigurationProperties with Enum values in different case","body":"<p>Spring uses <code>StringToEnum</code> for converting string values to enum. This class internally uses <code>java.lang.Enum#valueOf</code> method to do the conversion. Enum class creates a map and then performs lookup on this map. Hence, the key must match the exact case for lookup to succeed.</p>\n\n<p>Below test case will validate that:</p>\n\n<pre><code>enum SomeEnum{\n    A, B\n}\n\npublic class EnumTest {\n\n    public static void main(String[] args) {\n        SomeEnum e1 = Enum.valueOf(SomeEnum.class, \"A\");\n        System.out.println(e1);\n        SomeEnum e2 = Enum.valueOf(SomeEnum.class, \"a\"); //throws exception\n    }\n}\n</code></pre>\n\n<p>Hence, spring fall backs to value defined in your application.yml when it fails to convert value passed from command line.</p>\n\n<hr>\n\n<p>EDIT</p>\n\n<p>If you try the following combinations:</p>\n\n<pre><code>foo.bar[A_VALUE]: from application.yml\nfoo.bar[A_VALUE]: from command line\n{A_VALUE=from command line}\n\nfoo.bar[A_VALUE]: from application.yml\nfoo.bar[aValue]: from command line\n{A_VALUE=from application.yml}\n\nfoo.bar[aValue]: from application.yml\nfoo.bar[A_VALUE]: from command line\n{A_VALUE=from application.yml}\n\nfoo.bar[aValue]: from application.yml\nfoo.bar[aValue]: from command line\n{A_VALUE=from command line}\n</code></pre>\n\n<p>1st &amp; 4th Scenario - As key names are exactly same, first command line property is set. This property is added to processed list and thus YML property is ignored.</p>\n\n<p>2nd &amp; 3rd Scenario - As key names are different, both command line &amp; YML properties are processed. YML being processed second override the value set from command line.</p>\n"},{"tags":[],"owner":{"account_id":254135,"reputation":3720,"user_id":533317,"display_name":"btpka3"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693837153,"creation_date":1504259823,"answer_id":45997666,"question_id":33901724,"body_markdown":"In config properties, the last one wins:\r\n\r\n* application.yaml (1)\r\n\r\n        foo.bar.A_VALUE : 111  \r\n        foo.bar.aValue  : 222    # output &#39;222&#39;, overridden\r\n\r\n* application.yaml (2)\r\n\r\n        foo.bar.aValue  : 222   \r\n        foo.bar.A_VALUE : 111    # output &#39;111&#39;, overridden \r\n\r\n\r\nSo, when debug at [PropertiesConfigurationFactory#doBindPropertiesToTarget()](https://github.com/spring-projects/spring-boot/blob/v1.5.2.RELEASE/spring-boot/src/main/java/org/springframework/boot/bind/PropertiesConfigurationFactory.java#L272)  （I&#39;m using spring-boot 1.5.2）, with :\r\n\r\n* JVM options `-Dfoo.bar.B_VALUE=b11 -Dfoo.bar.cValue=c11`\r\n* application.yml :\r\n\r\n        foo.bar:\r\n          A_VALUE: aaa\r\n          B_VALUE: bbb\r\n          C_VALUE: ccc\r\n          D_VALUE: dddd\r\n          dValue: ddd\r\n        \r\n        logging.level:\r\n          org.springframework.boot.env: TRACE\r\n          org.springframework.boot.context.config: DEBUG\r\n\r\npropertyValues#propertyValues which is LinkedHashMap, with the following property key order : \r\n\r\n    // keys are unique, when the same key, systemProperties take first.\r\n    0. `foo.bar.B_VALUE`  from &#39;systemProperties&#39;\r\n    1. `foo.bar.cValue`   from &#39;systemProperties&#39;\r\n    2. `foo.bar.A_VALUE`  from &#39;applicationConfig: [classpath:/application.yml]&#39;\r\n    3. `foo.bar.C_VALUE`  from &#39;applicationConfig: [classpath:/application.yml]&#39;\r\n    4. `foo.bar.D_VALUE`  from &#39;applicationConfig: [classpath:/application.yml]&#39;\r\n    5. `foo.bar.dValue`   from &#39;applicationConfig: [classpath:/application.yml]&#39;\r\n\r\n\r\nThe console output is :\r\n\r\n    B_VALUE b11  // systemProperties first \r\n    A_VALUE aaa  \r\n    D_VALUE ddd  // the last one wins. (foo.bar.dValue) \r\n    C_VALUE ccc  //the last one wins. (foo.bar.C_VALUE)\r\n\r\nIn my test, with JSON notation : \r\n\r\n    PropertiesConfigurationFactory#propertySources = {\r\n        class : ConfigurationPropertiesBindingPostProcessor$FlatPropertySources\r\n        propertySources : [ { \r\n            class : PropertySourcesPlaceholderConfigurer$1\r\n            name  : &#39;environmentProperties&#39;,\r\n            source: {\r\n                class           : StandardServletEnvironment,\r\n                propertySource  : {\r\n                    class               : MutablePropertySources,\r\n                    propertySourceList  : [{\r\n                        class: PropertySource$StubPropertySource,\r\n                        name : &#39;servletConfigInitParams&#39;\r\n                    }, {\r\n                        class: MapPropertySource,\r\n                        name : &#39;systemProperties&#39;\r\n                    }, {\r\n                        class: SystemEnvironmentPropertySource,\r\n                        name : &#39;systemEnvironment&#39;\r\n                    }, {\r\n                        class: RandomValuePropertySource,\r\n                        name : &#39;random&#39;\r\n                    }, {\r\n                        class: MapPropertySource,\r\n                        name : &#39;applicationConfig: [classpath:/application.yml]&#39;\r\n                    }, {\r\n                        class: MapPropertySource,\r\n                        name : &#39;refresh&#39;\r\n                    }]\r\n                }\r\n            }\r\n        }, {\r\n            class : PropertiesPropertySource,\r\n            name  : &#39;localProperties&#39;,\r\n            source: &lt;Properties&gt;  // empty in my test\r\n        }]\r\n    }\r\n\r\nNOTICE: Class `PropertiesConfigurationFactory` has been removed in spring boot 2.x.\r\n\r\n--------------------------\r\nPS: When searching for this question, I wanted to figure out what notions Enum values (such A_VALUE) can be written in config properties. The answer is just as @Mohit said.\r\n\r\n\r\n    RelaxedDataBinder#bind()\r\n      RelaxedConversionService#convert()\r\n        1. try DefaultConvertionService#convert()\r\n           \r\n           # only support `A_VALUE`\r\n           StringToEnumConverterFactory#StringToEnum#convert()\r\n\r\n        2. then GenericConversionService#convert()\r\n           \r\n           # the config key can be :\r\n           # 0 = &quot;a-value&quot;\r\n           # 1 = &quot;a_value&quot;\r\n           # 2 = &quot;aValue&quot;\r\n           # 3 = &quot;avalue&quot;\r\n           # 4 = &quot;A-VALUE&quot;\r\n           # 5 = &quot;A_VALUE&quot;\r\n           # 6 = &quot;AVALUE&quot;\r\n           RelaxedConversionService$StringToEnumIgnoringCaseConverterFactory$StringToEnum#convert() \r\n","title":"ConfigurationProperties with Enum values in different case","body":"<p>In config properties, the last one wins:</p>\n<ul>\n<li><p>application.yaml (1)</p>\n<pre><code>  foo.bar.A_VALUE : 111  \n  foo.bar.aValue  : 222    # output '222', overridden\n</code></pre>\n</li>\n<li><p>application.yaml (2)</p>\n<pre><code>  foo.bar.aValue  : 222   \n  foo.bar.A_VALUE : 111    # output '111', overridden \n</code></pre>\n</li>\n</ul>\n<p>So, when debug at <a href=\"https://github.com/spring-projects/spring-boot/blob/v1.5.2.RELEASE/spring-boot/src/main/java/org/springframework/boot/bind/PropertiesConfigurationFactory.java#L272\" rel=\"nofollow noreferrer\">PropertiesConfigurationFactory#doBindPropertiesToTarget()</a>  （I'm using spring-boot 1.5.2）, with :</p>\n<ul>\n<li><p>JVM options <code>-Dfoo.bar.B_VALUE=b11 -Dfoo.bar.cValue=c11</code></p>\n</li>\n<li><p>application.yml :</p>\n<pre><code>  foo.bar:\n    A_VALUE: aaa\n    B_VALUE: bbb\n    C_VALUE: ccc\n    D_VALUE: dddd\n    dValue: ddd\n\n  logging.level:\n    org.springframework.boot.env: TRACE\n    org.springframework.boot.context.config: DEBUG\n</code></pre>\n</li>\n</ul>\n<p>propertyValues#propertyValues which is LinkedHashMap, with the following property key order :</p>\n<pre><code>// keys are unique, when the same key, systemProperties take first.\n0. `foo.bar.B_VALUE`  from 'systemProperties'\n1. `foo.bar.cValue`   from 'systemProperties'\n2. `foo.bar.A_VALUE`  from 'applicationConfig: [classpath:/application.yml]'\n3. `foo.bar.C_VALUE`  from 'applicationConfig: [classpath:/application.yml]'\n4. `foo.bar.D_VALUE`  from 'applicationConfig: [classpath:/application.yml]'\n5. `foo.bar.dValue`   from 'applicationConfig: [classpath:/application.yml]'\n</code></pre>\n<p>The console output is :</p>\n<pre><code>B_VALUE b11  // systemProperties first \nA_VALUE aaa  \nD_VALUE ddd  // the last one wins. (foo.bar.dValue) \nC_VALUE ccc  //the last one wins. (foo.bar.C_VALUE)\n</code></pre>\n<p>In my test, with JSON notation :</p>\n<pre><code>PropertiesConfigurationFactory#propertySources = {\n    class : ConfigurationPropertiesBindingPostProcessor$FlatPropertySources\n    propertySources : [ { \n        class : PropertySourcesPlaceholderConfigurer$1\n        name  : 'environmentProperties',\n        source: {\n            class           : StandardServletEnvironment,\n            propertySource  : {\n                class               : MutablePropertySources,\n                propertySourceList  : [{\n                    class: PropertySource$StubPropertySource,\n                    name : 'servletConfigInitParams'\n                }, {\n                    class: MapPropertySource,\n                    name : 'systemProperties'\n                }, {\n                    class: SystemEnvironmentPropertySource,\n                    name : 'systemEnvironment'\n                }, {\n                    class: RandomValuePropertySource,\n                    name : 'random'\n                }, {\n                    class: MapPropertySource,\n                    name : 'applicationConfig: [classpath:/application.yml]'\n                }, {\n                    class: MapPropertySource,\n                    name : 'refresh'\n                }]\n            }\n        }\n    }, {\n        class : PropertiesPropertySource,\n        name  : 'localProperties',\n        source: &lt;Properties&gt;  // empty in my test\n    }]\n}\n</code></pre>\n<p>NOTICE: Class <code>PropertiesConfigurationFactory</code> has been removed in spring boot 2.x.</p>\n<hr />\n<p>PS: When searching for this question, I wanted to figure out what notions Enum values (such A_VALUE) can be written in config properties. The answer is just as @Mohit said.</p>\n<pre><code>RelaxedDataBinder#bind()\n  RelaxedConversionService#convert()\n    1. try DefaultConvertionService#convert()\n       \n       # only support `A_VALUE`\n       StringToEnumConverterFactory#StringToEnum#convert()\n\n    2. then GenericConversionService#convert()\n       \n       # the config key can be :\n       # 0 = &quot;a-value&quot;\n       # 1 = &quot;a_value&quot;\n       # 2 = &quot;aValue&quot;\n       # 3 = &quot;avalue&quot;\n       # 4 = &quot;A-VALUE&quot;\n       # 5 = &quot;A_VALUE&quot;\n       # 6 = &quot;AVALUE&quot;\n       RelaxedConversionService$StringToEnumIgnoringCaseConverterFactory$StringToEnum#convert() \n</code></pre>\n"}],"owner":{"account_id":5760488,"reputation":53,"user_id":4547088,"display_name":"y.decoux"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22117,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1693837153,"creation_date":1448391679,"question_id":33901724,"body_markdown":"There&#39;s a behavior for which I can&#39;t find the related documentation.\r\nLet&#39;s assume the following code. It is supposed to display in the console what has been configured with the foo.bar property :\r\n\r\n    @SpringBootApplication\r\n    @Component\r\n    public class Test {\r\n        @Autowired\r\n        TestConfig testConfig;\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            ConfigurableApplicationContext run = new SpringApplication(Test.class).run(args);\r\n            Test test = run.getBean(Test.class);\r\n            test.run();\r\n        }\r\n    \r\n        public void run() throws Exception {\r\n            testConfig.getBar().entrySet().forEach(e -&gt; {\r\n                System.out.println(e.getKey() + &quot; &quot; + e.getValue());\r\n            });\r\n        }\r\n    \r\n        @Configuration\r\n        @ConfigurationProperties(ignoreUnknownFields = false, prefix = &quot;foo&quot;)\r\n        static class TestConfig {\r\n            private Map&lt;SomeEnum, String&gt; bar = new HashMap&lt;&gt;();\r\n    \r\n            public Map&lt;SomeEnum, String&gt; getBar() {\r\n                return bar;\r\n            }\r\n    \r\n            public void setBar(Map&lt;SomeEnum, String&gt; bar) {\r\n                this.bar = bar;\r\n            }\r\n        }\r\n    }\r\n\r\nIf you set the following property in application.yml (`foo.bar[A_VALUE]: from application.yml`), it will be correctly picked up and display &quot;from application.yml&quot; in the console, nothing fancy\r\n\r\n\r\nNow if you use the exact same code, but this time you want to override the property defined in application.yml with a command line argument and set --`foo.bar[aValue]=&quot;from command line&quot;` as a command line arg (note that this time I used camel case for the enum reference). It is still displayed &quot;from application.yml&quot; in the console and not the overridden property.\r\n\r\nIf I chose Uppercase enum in command line and camel case enum in the application.yml, it will still display the same thing to the console.\r\n\r\nIs it the expected behavior ?\r\nWhat is the rule in such situation ?\r\n\r\nFrom what I&#39;ve tested, it is the exact opposite of what is described in https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config\r\n\r\nI&#39;ve tested with spring boot 1.2.5.RELEASE and with 1.3.0.RELEASE\r\n\r\nThanks for your time","title":"ConfigurationProperties with Enum values in different case","body":"<p>There's a behavior for which I can't find the related documentation.\nLet's assume the following code. It is supposed to display in the console what has been configured with the foo.bar property :</p>\n\n<pre><code>@SpringBootApplication\n@Component\npublic class Test {\n    @Autowired\n    TestConfig testConfig;\n\n    public static void main(String[] args) throws Exception {\n        ConfigurableApplicationContext run = new SpringApplication(Test.class).run(args);\n        Test test = run.getBean(Test.class);\n        test.run();\n    }\n\n    public void run() throws Exception {\n        testConfig.getBar().entrySet().forEach(e -&gt; {\n            System.out.println(e.getKey() + \" \" + e.getValue());\n        });\n    }\n\n    @Configuration\n    @ConfigurationProperties(ignoreUnknownFields = false, prefix = \"foo\")\n    static class TestConfig {\n        private Map&lt;SomeEnum, String&gt; bar = new HashMap&lt;&gt;();\n\n        public Map&lt;SomeEnum, String&gt; getBar() {\n            return bar;\n        }\n\n        public void setBar(Map&lt;SomeEnum, String&gt; bar) {\n            this.bar = bar;\n        }\n    }\n}\n</code></pre>\n\n<p>If you set the following property in application.yml (<code>foo.bar[A_VALUE]: from application.yml</code>), it will be correctly picked up and display \"from application.yml\" in the console, nothing fancy</p>\n\n<p>Now if you use the exact same code, but this time you want to override the property defined in application.yml with a command line argument and set --<code>foo.bar[aValue]=\"from command line\"</code> as a command line arg (note that this time I used camel case for the enum reference). It is still displayed \"from application.yml\" in the console and not the overridden property.</p>\n\n<p>If I chose Uppercase enum in command line and camel case enum in the application.yml, it will still display the same thing to the console.</p>\n\n<p>Is it the expected behavior ?\nWhat is the rule in such situation ?</p>\n\n<p>From what I've tested, it is the exact opposite of what is described in <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config\" rel=\"nofollow\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config</a></p>\n\n<p>I've tested with spring boot 1.2.5.RELEASE and with 1.3.0.RELEASE</p>\n\n<p>Thanks for your time</p>\n"},{"tags":["java","android","file"],"owner":{"account_id":9694452,"reputation":11,"user_id":7191404,"display_name":"Yusuf_sust"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693836143,"creation_date":1693836143,"question_id":77038392,"body_markdown":"I want to save my mediaMuxer data in memory so I used ParcelFileDescriptor to save data in memory but given IllegalStateException and mediaMuxer did not start. I have tried several techniques like MemoryFile, Socket, ByteOutputStream but got the same exception. Bellow is my sample code\r\n\r\n```\r\ntry {\r\n            ParcelFileDescriptor[] pipe = ParcelFileDescriptor.createPipe();\r\n            outputParcelFileDescriptor = pipe[1];\r\n            FileDescriptor fd = outputParcelFileDescriptor.getFileDescriptor();\r\n\r\n            String text = &quot;MemoryFile Text&quot;;\r\n\r\n   \r\n\r\n            MediaMuxer mediaMuxer = new MediaMuxer(fd, MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4);\r\n\r\n            MediaFormat mediaFormat = MediaFormat.createVideoFormat(MediaFormat.MIMETYPE_VIDEO_AVC, 640, 480);\r\n\r\n            // Configure media format\r\n            mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatSurface);\r\n            mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, 2000000);\r\n            mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, FRAME_RATE);\r\n            mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, IFRAME_INTERVAL);\r\n\r\n            // Create the encoder and input surface\r\n            MediaCodec mediaCodec = MediaCodec.createEncoderByType(MediaFormat.MIMETYPE_VIDEO_AVC);\r\n            mediaCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);\r\n            Surface inputSurface = mediaCodec.createInputSurface();\r\n            mediaCodec.start();\r\n\r\n            // Render text frames onto the input surface\r\n            Canvas canvas = inputSurface.lockCanvas(null);\r\n            Paint paint = new Paint();\r\n            paint.setColor(Color.WHITE);\r\n            paint.setTextSize(40);\r\n            canvas.drawColor(Color.BLACK);\r\n            canvas.drawText(text, 100, 240, paint);\r\n            inputSurface.unlockCanvasAndPost(canvas);\r\n\r\n            // Encode and mux frames\r\n            MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();\r\n            ByteBuffer[] outputBuffers = mediaCodec.getOutputBuffers();\r\n            boolean muxing = true;\r\n\r\n            while (muxing) {\r\n                int encoderStatus = mediaCodec.dequeueOutputBuffer(bufferInfo, -1);\r\n                if (encoderStatus &gt;= 0) {\r\n                    ByteBuffer encodedData = outputBuffers[encoderStatus];\r\n\r\n                    if ((bufferInfo.flags &amp; MediaCodec.BUFFER_FLAG_CODEC_CONFIG) != 0) {\r\n                        bufferInfo.size = 0;\r\n                    }\r\n\r\n                    if (bufferInfo.size != 0) {\r\n                        encodedData.position(bufferInfo.offset);\r\n                        encodedData.limit(bufferInfo.offset + bufferInfo.size);\r\n                        mediaMuxer.writeSampleData(0, encodedData, bufferInfo);\r\n                    }\r\n\r\n                    mediaCodec.releaseOutputBuffer(encoderStatus, false);\r\n\r\n                    if ((bufferInfo.flags &amp; MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {\r\n                        break;\r\n                    }\r\n                } else if (encoderStatus == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {\r\n                    // Configure the media format for the muxer\r\n                    MediaFormat outputFormat = mediaCodec.getOutputFormat();\r\n                    mediaMuxer.addTrack(outputFormat);\r\n                    mediaMuxer.start();\r\n                }\r\n            }\r\n\r\n            mediaMuxer.stop();\r\n            mediaMuxer.release();\r\n            mediaCodec.stop();\r\n            mediaCodec.release();\r\n            outputParcelFileDescriptor.close();\r\n           \r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            Log.e(&quot;MainActivity&quot;, e.toString());\r\n\r\n        }\r\n```\r\n\r\nI have tried several methods to save data in memory but got the same IllegalStateException","title":"What is the actual format of filedescriptor that is used in mediamuxer?","body":"<p>I want to save my mediaMuxer data in memory so I used ParcelFileDescriptor to save data in memory but given IllegalStateException and mediaMuxer did not start. I have tried several techniques like MemoryFile, Socket, ByteOutputStream but got the same exception. Bellow is my sample code</p>\n<pre><code>try {\n            ParcelFileDescriptor[] pipe = ParcelFileDescriptor.createPipe();\n            outputParcelFileDescriptor = pipe[1];\n            FileDescriptor fd = outputParcelFileDescriptor.getFileDescriptor();\n\n            String text = &quot;MemoryFile Text&quot;;\n\n   \n\n            MediaMuxer mediaMuxer = new MediaMuxer(fd, MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4);\n\n            MediaFormat mediaFormat = MediaFormat.createVideoFormat(MediaFormat.MIMETYPE_VIDEO_AVC, 640, 480);\n\n            // Configure media format\n            mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatSurface);\n            mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, 2000000);\n            mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, FRAME_RATE);\n            mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, IFRAME_INTERVAL);\n\n            // Create the encoder and input surface\n            MediaCodec mediaCodec = MediaCodec.createEncoderByType(MediaFormat.MIMETYPE_VIDEO_AVC);\n            mediaCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);\n            Surface inputSurface = mediaCodec.createInputSurface();\n            mediaCodec.start();\n\n            // Render text frames onto the input surface\n            Canvas canvas = inputSurface.lockCanvas(null);\n            Paint paint = new Paint();\n            paint.setColor(Color.WHITE);\n            paint.setTextSize(40);\n            canvas.drawColor(Color.BLACK);\n            canvas.drawText(text, 100, 240, paint);\n            inputSurface.unlockCanvasAndPost(canvas);\n\n            // Encode and mux frames\n            MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();\n            ByteBuffer[] outputBuffers = mediaCodec.getOutputBuffers();\n            boolean muxing = true;\n\n            while (muxing) {\n                int encoderStatus = mediaCodec.dequeueOutputBuffer(bufferInfo, -1);\n                if (encoderStatus &gt;= 0) {\n                    ByteBuffer encodedData = outputBuffers[encoderStatus];\n\n                    if ((bufferInfo.flags &amp; MediaCodec.BUFFER_FLAG_CODEC_CONFIG) != 0) {\n                        bufferInfo.size = 0;\n                    }\n\n                    if (bufferInfo.size != 0) {\n                        encodedData.position(bufferInfo.offset);\n                        encodedData.limit(bufferInfo.offset + bufferInfo.size);\n                        mediaMuxer.writeSampleData(0, encodedData, bufferInfo);\n                    }\n\n                    mediaCodec.releaseOutputBuffer(encoderStatus, false);\n\n                    if ((bufferInfo.flags &amp; MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {\n                        break;\n                    }\n                } else if (encoderStatus == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {\n                    // Configure the media format for the muxer\n                    MediaFormat outputFormat = mediaCodec.getOutputFormat();\n                    mediaMuxer.addTrack(outputFormat);\n                    mediaMuxer.start();\n                }\n            }\n\n            mediaMuxer.stop();\n            mediaMuxer.release();\n            mediaCodec.stop();\n            mediaCodec.release();\n            outputParcelFileDescriptor.close();\n           \n        } catch (Exception e) {\n            e.printStackTrace();\n            Log.e(&quot;MainActivity&quot;, e.toString());\n\n        }\n</code></pre>\n<p>I have tried several methods to save data in memory but got the same IllegalStateException</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":972643,"reputation":2039,"user_id":994851,"accept_rate":59,"display_name":"Coen Damen"},"score":0,"creation_date":1476862894,"post_id":39922071,"comment_id":67520258,"body_markdown":"getting the same error here.","body":"getting the same error here."},{"owner":{"account_id":1728701,"reputation":681,"user_id":1582805,"accept_rate":20,"display_name":"sbolla"},"score":0,"creation_date":1476986556,"post_id":39922071,"comment_id":67591714,"body_markdown":"i am seeing this too","body":"i am seeing this too"},{"owner":{"account_id":2564616,"reputation":3507,"user_id":2225030,"accept_rate":86,"display_name":"Harshil Doshi"},"score":0,"creation_date":1524720703,"post_id":39922071,"comment_id":87086893,"body_markdown":"you can check here: https://stackoverflow.com/a/40201575/2225030","body":"you can check here: <a href=\"https://stackoverflow.com/a/40201575/2225030\">stackoverflow.com/a/40201575/2225030</a>"}],"answers":[{"tags":[],"owner":{"account_id":9511901,"reputation":61,"user_id":7069565,"display_name":"Omar N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477398827,"creation_date":1477398827,"answer_id":40240115,"question_id":39922071,"body_markdown":"Well, I had a simmilar error, due to SessionNotCreatedException, caused by DesiredCapabilities discrepancy.\r\n\r\nOn further research, I went back to https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver.  In the &quot;Required Configuration&quot; section was my solution:\r\n\r\n&quot;Additionally, &quot;Enhanced Protected Mode&quot; must be disabled for IE 10 and higher. This option is found in the Advanced tab of the Internet Options dialog.&quot;\r\n\r\nSo, I went to Tools -&gt; Internet Options -&gt; Advanced Settings -&gt; Security section.\r\n\r\nUnchecked &quot;Enable enhanced protected mode&quot;.  Bingo! \r\n\r\nI recommend you go through the &quot;Required Configuration&quot; section in the github link above.  There might be other settings you need to apply.","title":"Selenium getting error","body":"<p>Well, I had a simmilar error, due to SessionNotCreatedException, caused by DesiredCapabilities discrepancy.</p>\n\n<p>On further research, I went back to <a href=\"https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver\" rel=\"nofollow\">https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver</a>.  In the \"Required Configuration\" section was my solution:</p>\n\n<p>\"Additionally, \"Enhanced Protected Mode\" must be disabled for IE 10 and higher. This option is found in the Advanced tab of the Internet Options dialog.\"</p>\n\n<p>So, I went to Tools -> Internet Options -> Advanced Settings -> Security section.</p>\n\n<p>Unchecked \"Enable enhanced protected mode\".  Bingo! </p>\n\n<p>I recommend you go through the \"Required Configuration\" section in the github link above.  There might be other settings you need to apply.</p>\n"},{"tags":[],"owner":{"account_id":12396229,"reputation":1,"user_id":9035907,"display_name":"Karan Khot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544004509,"creation_date":1512073112,"answer_id":47581903,"question_id":39922071,"body_markdown":"I realized that **IE browser capabilities** had to be changed to support selenium. like zoom, protected mode, etc ... &lt;br&gt;\r\ntry changing IE settings and it should work.","title":"Selenium getting error","body":"<p>I realized that <strong>IE browser capabilities</strong> had to be changed to support selenium. like zoom, protected mode, etc ... <br>\ntry changing IE settings and it should work.</p>\n"}],"owner":{"account_id":9347487,"reputation":11,"user_id":6938316,"display_name":"abhinash gatta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11953,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1693836090,"creation_date":1475858107,"question_id":39922071,"body_markdown":"This is my selenium test script.\n\n\n    \r\n\n    import org.openqa.selenium.WebDriver;\n    import org.openqa.selenium.firefox.FirefoxDriver;\n    import org.openqa.selenium.ie.InternetExplorerDriver;\n    \n    public class Adminlogin {\n    \n    \tpublic static void main(String[] args) {\n    \t\t\n    \t\t//File file = new File(&quot;C:/Selenium/IEDriverServer_x64_2.53.1/IEDriverServer.exe&quot;);\n    \t\tSystem.setProperty(&quot;webdriver.ie.driver&quot;, &quot;C:/Selenium/IEDriverServer_x64_2.53.1/IEDriverServer.exe&quot;);\n    \t\tWebDriver driver = new InternetExplorerDriver();\n    \t\n    \t\t//driver.close(); //Closes the browser\n    \t}\n    \n    }\n\n    \r\nI am getting this error,\r\n\n\r\n\n    Started InternetExplorerDriver server (64-bit)\n    2.53.1.0\n    Listening on port 35197\n    Only local connections are allowed\n    Oct 07, 2016 9:54:51 PM org.openqa.selenium.remote.ProtocolHandshake           createSession\n    INFO: Attempting bi-dialect session, assuming Postel&#39;s Law holds true on the remote end\n    Oct 07, 2016 9:54:52 PM org.openqa.selenium.remote.ProtocolHandshake  createSession\n    INFO: Falling back to straight W3C remote end connection\n    Oct 07, 2016 9:54:52 PM org.openqa.selenium.remote.ProtocolHandshake createSession\n    INFO: Falling back to original OSS JSON Wire Protocol.\n    Exception in thread &quot;main&quot; org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\n    Build info: version: &#39;unknown&#39;, revision: &#39;c7b525d&#39;, time: &#39;2016-09-01 14:52:30 -0700&#39;\n    System info: host: &#39;user-PC&#39;, ip: &#39;192.168.2.113&#39;, os.name: &#39;Windows 7&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.1&#39;, java.version: &#39;1.8.0_31&#39;\n    Driver info: driver.version: InternetExplorerDriver\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:618)\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:242)\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:228)\n    \tat org.openqa.selenium.ie.InternetExplorerDriver.run(InternetExplorerDriver.java:180)\n    \tat org.openqa.selenium.ie.InternetExplorerDriver.&lt;init&gt;(InternetExplorerDriver.java:172)\n    \tat org.openqa.selenium.ie.InternetExplorerDriver.&lt;init&gt;(InternetExplorerDriver.java:144)\n    \tat Sanitytests.Adminlogin.main(Adminlogin.java:13)\n    Caused by: org.openqa.selenium.SessionNotCreatedException: Unable to create new remote session. desired capabilities = Capabilities [{ensureCleanSession=true, browserName=internet explorer, version=, platform=WINDOWS}], required capabilities = null\n    Build info: version: &#39;unknown&#39;, revision: &#39;c7b525d&#39;, time: &#39;2016-09-01 14:52:30 -0700&#39;\n    System info: host: &#39;user-PC&#39;, ip: &#39;192.168.2.113&#39;, os.name: &#39;Windows 7&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.1&#39;, java.version: &#39;1.8.0_31&#39;\n    Driver info: driver.version: InternetExplorerDriver\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:80)\n    \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:141)\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:82)\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:597)\n\n\n\r\n","title":"Selenium getting error","body":"<p>This is my selenium test script.</p>\n\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.ie.InternetExplorerDriver;\n\npublic class Adminlogin {\n\n    public static void main(String[] args) {\n\n        //File file = new File(\"C:/Selenium/IEDriverServer_x64_2.53.1/IEDriverServer.exe\");\n        System.setProperty(\"webdriver.ie.driver\", \"C:/Selenium/IEDriverServer_x64_2.53.1/IEDriverServer.exe\");\n        WebDriver driver = new InternetExplorerDriver();\n\n        //driver.close(); //Closes the browser\n    }\n\n}\n</code></pre>\n\n<p>I am getting this error,</p>\n\n<pre><code>Started InternetExplorerDriver server (64-bit)\n2.53.1.0\nListening on port 35197\nOnly local connections are allowed\nOct 07, 2016 9:54:51 PM org.openqa.selenium.remote.ProtocolHandshake           createSession\nINFO: Attempting bi-dialect session, assuming Postel's Law holds true on the remote end\nOct 07, 2016 9:54:52 PM org.openqa.selenium.remote.ProtocolHandshake  createSession\nINFO: Falling back to straight W3C remote end connection\nOct 07, 2016 9:54:52 PM org.openqa.selenium.remote.ProtocolHandshake createSession\nINFO: Falling back to original OSS JSON Wire Protocol.\nException in thread \"main\" org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\nBuild info: version: 'unknown', revision: 'c7b525d', time: '2016-09-01 14:52:30 -0700'\nSystem info: host: 'user-PC', ip: '192.168.2.113', os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.8.0_31'\nDriver info: driver.version: InternetExplorerDriver\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:618)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:242)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:228)\n    at org.openqa.selenium.ie.InternetExplorerDriver.run(InternetExplorerDriver.java:180)\n    at org.openqa.selenium.ie.InternetExplorerDriver.&lt;init&gt;(InternetExplorerDriver.java:172)\n    at org.openqa.selenium.ie.InternetExplorerDriver.&lt;init&gt;(InternetExplorerDriver.java:144)\n    at Sanitytests.Adminlogin.main(Adminlogin.java:13)\nCaused by: org.openqa.selenium.SessionNotCreatedException: Unable to create new remote session. desired capabilities = Capabilities [{ensureCleanSession=true, browserName=internet explorer, version=, platform=WINDOWS}], required capabilities = null\nBuild info: version: 'unknown', revision: 'c7b525d', time: '2016-09-01 14:52:30 -0700'\nSystem info: host: 'user-PC', ip: '192.168.2.113', os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.8.0_31'\nDriver info: driver.version: InternetExplorerDriver\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:80)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:141)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:82)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:597)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1693834073,"post_id":77038103,"comment_id":135808578,"body_markdown":"If this file is part of your project, the concept you might be looking for is &quot;resource files&quot;. Have a random tutorial: https://mkyong.com/java/java-read-a-file-from-resources-folder/","body":"If this file is part of your project, the concept you might be looking for is &quot;resource files&quot;. Have a random tutorial: <a href=\"https://mkyong.com/java/java-read-a-file-from-resources-folder/\" rel=\"nofollow noreferrer\">mkyong.com/java/java-read-a-file-from-resources-folder</a>"},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1693834094,"post_id":77038103,"comment_id":135808586,"body_markdown":"You can do `Path path = Paths.get(&quot;Rooms.txt&quot;)` when Room.txt is in the same folder where your Java file is (e.g. in the src folder in an IDE like IntelliJ).","body":"You can do <code>Path path = Paths.get(&quot;Rooms.txt&quot;)</code> when Room.txt is in the same folder where your Java file is (e.g. in the src folder in an IDE like IntelliJ)."},{"owner":{"account_id":24782675,"reputation":11,"user_id":22430057,"display_name":"Will Screwdriver"},"score":0,"creation_date":1693834292,"post_id":77038103,"comment_id":135808627,"body_markdown":"I&#39;ve tried this but I still get the file not found error if it is in the folder as well.","body":"I&#39;ve tried this but I still get the file not found error if it is in the folder as well."},{"owner":{"account_id":24782675,"reputation":11,"user_id":22430057,"display_name":"Will Screwdriver"},"score":0,"creation_date":1693834531,"post_id":77038103,"comment_id":135808661,"body_markdown":"I have also seen that exact link while trying to research unfortunately it all led me back to where I started with it not being found.","body":"I have also seen that exact link while trying to research unfortunately it all led me back to where I started with it not being found."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1693849159,"post_id":77038103,"comment_id":135811292,"body_markdown":"@ArvindKumarAvinash That is completely wrong.  There is no guarantee of what the current directory will be when the program is running.","body":"@ArvindKumarAvinash That is completely wrong.  There is no guarantee of what the current directory will be when the program is running."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1693849353,"post_id":77038103,"comment_id":135811324,"body_markdown":"Do not call Files.readAllLines(path) twice.  Reading files is a slow operation.  Do it only once.","body":"Do not call Files.readAllLines(path) twice.  Reading files is a slow operation.  Do it only once."},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1693854693,"post_id":77038103,"comment_id":135812117,"body_markdown":"@VGR You are right. What I have mentioned works only within the IDE.","body":"@VGR You are right. What I have mentioned works only within the IDE."}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693836006,"creation_date":1693834622,"answer_id":77038196,"question_id":77038103,"body_markdown":"It&#39;s best to include any resources alongside your class files so that they can be accessed via the [`ClassLoader`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ClassLoader.html). If building with Maven or Gradle you would store the file at `src/main/resources/Rooms.txt` which would then get packed inside the jar file alongside the class files.\r\n\r\nYou could then access via\r\n\r\n```java\r\ntry (InputStream in = getClass().getClassLoader().getResourceAsStream(&quot;Rooms.txt&quot;)) {\r\n  if (in == null) throw new RuntimeException(&quot;Could not find Rooms.txt on classpath&quot;);\r\n  BufferedReader reader = new BufferedReader(new InputStreamReader(in));\r\n  String[] lines = reader.lines().toArray(String[]:new);\r\n  String room1 = lines[1];\r\n  String room1Desc = lines[2];\r\n  ...\r\n}\r\n```\r\n\r\nIt&#39;s probably best if you change your `Rooms.txt` to `Rooms.json` and use a json parsing library to read/write the json. Then you could have complex/nested data structures in the file. Eg\r\n\r\n```json\r\n{\r\n  &quot;rooms&quot;: [\r\n      { &quot;name&quot;: &quot;room1&quot;, &quot;description&quot;: &quot;A red room&quot; },\r\n      { &quot;name&quot;: &quot;room2&quot;, &quot;description&quot;: &quot;A blue room&quot; }\r\n  ]\r\n}\r\n```","title":"Trying to read a file thats in the directory","body":"<p>It's best to include any resources alongside your class files so that they can be accessed via the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ClassLoader.html\" rel=\"nofollow noreferrer\"><code>ClassLoader</code></a>. If building with Maven or Gradle you would store the file at <code>src/main/resources/Rooms.txt</code> which would then get packed inside the jar file alongside the class files.</p>\n<p>You could then access via</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (InputStream in = getClass().getClassLoader().getResourceAsStream(&quot;Rooms.txt&quot;)) {\n  if (in == null) throw new RuntimeException(&quot;Could not find Rooms.txt on classpath&quot;);\n  BufferedReader reader = new BufferedReader(new InputStreamReader(in));\n  String[] lines = reader.lines().toArray(String[]:new);\n  String room1 = lines[1];\n  String room1Desc = lines[2];\n  ...\n}\n</code></pre>\n<p>It's probably best if you change your <code>Rooms.txt</code> to <code>Rooms.json</code> and use a json parsing library to read/write the json. Then you could have complex/nested data structures in the file. Eg</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;rooms&quot;: [\n      { &quot;name&quot;: &quot;room1&quot;, &quot;description&quot;: &quot;A red room&quot; },\n      { &quot;name&quot;: &quot;room2&quot;, &quot;description&quot;: &quot;A blue room&quot; }\n  ]\n}\n</code></pre>\n"}],"owner":{"account_id":24782675,"reputation":11,"user_id":22430057,"display_name":"Will Screwdriver"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693836006,"creation_date":1693833816,"question_id":77038103,"body_markdown":"```\r\nPath path = Paths.get(&quot;C:/Users/Benny/IdeaProjects/SoftDevProj/SoftDevGame/Rooms.txt&quot;);\r\n\r\n    public Game() throws IOException {\r\n        map = new ArrayList&lt;Room&gt;();\r\n        String room1 = Files.readAllLines(path).get(1);\r\n        String room1Desc = Files.readAllLines(path).get(2);\r\n```\r\n\r\nSorry if this is a little confusing I can only post so much, but Im trying to get rid of the &quot;C:/Users/Benny/IdeaProjects/SoftDevProj/SoftDevGame&quot;\r\nin my code by just looking at the Rooms.txt file.\r\nI&#39;m basically trying to do this:\r\nPath path = Paths.get(&quot;Rooms.txt&quot;)\r\nand have it work but I&#39;ve tried everything is there any way I can fix this, by having it not be a fixed file location?","title":"Trying to read a file thats in the directory","body":"<pre><code>Path path = Paths.get(&quot;C:/Users/Benny/IdeaProjects/SoftDevProj/SoftDevGame/Rooms.txt&quot;);\n\n    public Game() throws IOException {\n        map = new ArrayList&lt;Room&gt;();\n        String room1 = Files.readAllLines(path).get(1);\n        String room1Desc = Files.readAllLines(path).get(2);\n</code></pre>\n<p>Sorry if this is a little confusing I can only post so much, but Im trying to get rid of the &quot;C:/Users/Benny/IdeaProjects/SoftDevProj/SoftDevGame&quot;\nin my code by just looking at the Rooms.txt file.\nI'm basically trying to do this:\nPath path = Paths.get(&quot;Rooms.txt&quot;)\nand have it work but I've tried everything is there any way I can fix this, by having it not be a fixed file location?</p>\n"},{"tags":["java","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693835780,"creation_date":1638192751,"answer_id":70155534,"question_id":70117670,"body_markdown":"**UPDATE**\r\nThis answer is now out of date and is now superseded by the answer provided by @Alexey Kolesaev: https://stackoverflow.com/a/76271486/11543023\r\n\r\n------------\r\n\r\nThere are issues with openJDK 11+ being installed on alpine. Alpine Linux uses `musl-libc` for its `libc`, where most other flavours of Linux use `glibc`, GNU&#39;s C library. Standard Linux software is built on non-Alpine flavours, like ubuntu and centos, thus normally get linked against `glibc` and so cannot be executed successfully with Alpine as `libc` is not linking to the java installation. The only workaround is installing a `glibc` compatibility layer, which is not simple or using an alpine-openjdk11 container (which you may not be able to use as they are not official images, so have issues in maintainability)\r\n\r\nTry a debian (ubuntu) or fedora (centos) distribution and see if you can get it working","title":"sonar-scanner-cli-4.2 does not find jre/bin/java","body":"<p><strong>UPDATE</strong>\nThis answer is now out of date and is now superseded by the answer provided by @Alexey Kolesaev: <a href=\"https://stackoverflow.com/a/76271486/11543023\">https://stackoverflow.com/a/76271486/11543023</a></p>\n<hr />\n<p>There are issues with openJDK 11+ being installed on alpine. Alpine Linux uses <code>musl-libc</code> for its <code>libc</code>, where most other flavours of Linux use <code>glibc</code>, GNU's C library. Standard Linux software is built on non-Alpine flavours, like ubuntu and centos, thus normally get linked against <code>glibc</code> and so cannot be executed successfully with Alpine as <code>libc</code> is not linking to the java installation. The only workaround is installing a <code>glibc</code> compatibility layer, which is not simple or using an alpine-openjdk11 container (which you may not be able to use as they are not official images, so have issues in maintainability)</p>\n<p>Try a debian (ubuntu) or fedora (centos) distribution and see if you can get it working</p>\n"},{"tags":[],"owner":{"account_id":24912431,"reputation":76,"user_id":19205994,"display_name":"Alexey Kolesaev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684322174,"creation_date":1684322174,"answer_id":76271486,"question_id":70117670,"body_markdown":"if you need exactly alpine, then:\r\n\r\n```\r\nexport GLIBC_VERSION=2.34-r0\r\napk --no-cache add binutils curl\r\ncurl -sL https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub -o /etc/apk/keys/sgerrand.rsa.pub\r\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-${GLIBC_VERSION}.apk\r\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-bin-${GLIBC_VERSION}.apk\r\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-i18n-${GLIBC_VERSION}.apk\r\napk add --no-cache glibc-${GLIBC_VERSION}.apk glibc-bin-${GLIBC_VERSION}.apk glibc-i18n-${GLIBC_VERSION}.apk # you must be needed to add || true for alpine newer than 3.15\r\n```\r\n\r\nin my tests GLIBC_VERSION 2.34-r0 only working. I tried newer, but doesn&#39;t work","title":"sonar-scanner-cli-4.2 does not find jre/bin/java","body":"<p>if you need exactly alpine, then:</p>\n<pre><code>export GLIBC_VERSION=2.34-r0\napk --no-cache add binutils curl\ncurl -sL https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub -o /etc/apk/keys/sgerrand.rsa.pub\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-${GLIBC_VERSION}.apk\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-bin-${GLIBC_VERSION}.apk\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-i18n-${GLIBC_VERSION}.apk\napk add --no-cache glibc-${GLIBC_VERSION}.apk glibc-bin-${GLIBC_VERSION}.apk glibc-i18n-${GLIBC_VERSION}.apk # you must be needed to add || true for alpine newer than 3.15\n</code></pre>\n<p>in my tests GLIBC_VERSION 2.34-r0 only working. I tried newer, but doesn't work</p>\n"},{"tags":[],"owner":{"account_id":19554046,"reputation":311,"user_id":14308901,"display_name":"Thanachai Aktananan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685085231,"creation_date":1685085231,"answer_id":76338438,"question_id":70117670,"body_markdown":"Please check java file in the package sonar-scanner-{version}/jre/bin/java\r\nif it has not you must retry to download new sonar-scanner-{version} and recheck it I&#39;m found this problem because when my MACOS open java file it has no permission and can&#39;t open you **must set the privacy &amp; security to allow java**\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VA9LH.png","title":"sonar-scanner-cli-4.2 does not find jre/bin/java","body":"<p>Please check java file in the package sonar-scanner-{version}/jre/bin/java\nif it has not you must retry to download new sonar-scanner-{version} and recheck it I'm found this problem because when my MACOS open java file it has no permission and can't open you <strong>must set the privacy &amp; security to allow java</strong></p>\n<p><a href=\"https://i.stack.imgur.com/VA9LH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VA9LH.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9747919,"reputation":1731,"user_id":7227222,"display_name":"AlbertMunichMar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2840,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76271486,"answer_count":3,"score":0,"last_activity_date":1693835780,"creation_date":1637877390,"question_id":70117670,"body_markdown":"I am trying to run the `sonnarqube` scanner on a docker container on jenkins. I use following image:\r\n\r\n    FROM node:16-alpine\r\n\r\nI install `java` from here:\r\n\r\n    RUN apk --no-cache add openjdk11 --repository=http://dl-cdn.alpinelinux.org/alpine/edge/community\r\n\r\nI install `sonnarqube scanner` from here:\r\n\r\n    RUN wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.2.0.1873.zip\r\n\r\nWhen running the scanner, I get following error:\r\n\r\n    22:33:55 sonar-scanner-4.2.0.1873-linux/bin/sonar-scanner: exec: line 64: /e2e/sonar-scanner-4.2.0.1873-linux/jre/bin/java: not found\r\n\r\nI&#39;ve checked java path:\r\n\r\n    22:33:49 Step 39/44 : RUN which java\r\n    22:33:49  ---&gt; Running in 47df6c73c0b7\r\n    22:33:50 /usr/bin/java\r\n\r\nand append it to my `PATH` env variable (sonnarqube executable too):\r\n\r\n    22:50:57 /usr/bin/java/bin:/sonar-scanner-4.2.0.1873/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\r\n\r\nIn the [docs][1], they say that they provide a JRE for linux distribution. \r\n\r\nBut if I inspect the sonnarqube folder, I just see:\r\n\r\n    22:50:39 drwxr-xr-x    5 root     root          4096 Nov 25 21:50 .\r\n    22:50:39 drwxr-xr-x    1 root     root          4096 Nov 25 21:50 ..\r\n    22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 bin\r\n    22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 conf\r\n    22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 lib\r\n\r\nThere&#39;s no `sonar-scanner-4.2.0.1873/jre/java/bin`\r\n\r\nShould the `jre` be in the `sonar-scanner-4.2.0.1873` folder? is my `PATH` env var wrong? I can&#39;t figure out why java is not found.\r\n\r\n\r\n  [1]: https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/","title":"sonar-scanner-cli-4.2 does not find jre/bin/java","body":"<p>I am trying to run the <code>sonnarqube</code> scanner on a docker container on jenkins. I use following image:</p>\n<pre><code>FROM node:16-alpine\n</code></pre>\n<p>I install <code>java</code> from here:</p>\n<pre><code>RUN apk --no-cache add openjdk11 --repository=http://dl-cdn.alpinelinux.org/alpine/edge/community\n</code></pre>\n<p>I install <code>sonnarqube scanner</code> from here:</p>\n<pre><code>RUN wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.2.0.1873.zip\n</code></pre>\n<p>When running the scanner, I get following error:</p>\n<pre><code>22:33:55 sonar-scanner-4.2.0.1873-linux/bin/sonar-scanner: exec: line 64: /e2e/sonar-scanner-4.2.0.1873-linux/jre/bin/java: not found\n</code></pre>\n<p>I've checked java path:</p>\n<pre><code>22:33:49 Step 39/44 : RUN which java\n22:33:49  ---&gt; Running in 47df6c73c0b7\n22:33:50 /usr/bin/java\n</code></pre>\n<p>and append it to my <code>PATH</code> env variable (sonnarqube executable too):</p>\n<pre><code>22:50:57 /usr/bin/java/bin:/sonar-scanner-4.2.0.1873/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n</code></pre>\n<p>In the <a href=\"https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/\" rel=\"nofollow noreferrer\">docs</a>, they say that they provide a JRE for linux distribution.</p>\n<p>But if I inspect the sonnarqube folder, I just see:</p>\n<pre><code>22:50:39 drwxr-xr-x    5 root     root          4096 Nov 25 21:50 .\n22:50:39 drwxr-xr-x    1 root     root          4096 Nov 25 21:50 ..\n22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 bin\n22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 conf\n22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 lib\n</code></pre>\n<p>There's no <code>sonar-scanner-4.2.0.1873/jre/java/bin</code></p>\n<p>Should the <code>jre</code> be in the <code>sonar-scanner-4.2.0.1873</code> folder? is my <code>PATH</code> env var wrong? I can't figure out why java is not found.</p>\n"},{"tags":["java","macos","java-home"],"comments":[{"owner":{"account_id":2378108,"reputation":1354,"user_id":2080879,"accept_rate":100,"display_name":"Sql Surfer"},"score":6,"creation_date":1548630662,"post_id":14702702,"comment_id":95599209,"body_markdown":"Here we are in 2019 ( 6 years after original question ) - and this still only has a convoluted solution.  Try supporting macs in the field with this problem.  Is there no utility that will add   export JAVA_HOME=/Library/Java/Home   to the current user bash profile - or a machine level equivalent ?","body":"Here we are in 2019 ( 6 years after original question ) - and this still only has a convoluted solution.  Try supporting macs in the field with this problem.  Is there no utility that will add   export JAVA_HOME=/Library/Java/Home   to the current user bash profile - or a machine level equivalent ?"}],"answers":[{"tags":[],"owner":{"account_id":967990,"reputation":8481,"user_id":991065,"display_name":"Fathah Rehman P"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1360051731,"creation_date":1360051731,"answer_id":14702754,"question_id":14702702,"body_markdown":"add following\r\n\r\n    setenv JAVA_HOME /System/Library/Frameworks/JavaVM.framework/Home\r\n\r\nin your  ~/.login file:","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>add following</p>\n\n<pre><code>setenv JAVA_HOME /System/Library/Frameworks/JavaVM.framework/Home\n</code></pre>\n\n<p>in your  ~/.login file:</p>\n"},{"tags":[],"owner":{"account_id":261786,"reputation":13726,"user_id":546205,"accept_rate":60,"display_name":"Miguel Prz"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1579165968,"creation_date":1360051767,"answer_id":14702771,"question_id":14702702,"body_markdown":"This link may helps you: https://developer.apple.com/library/archive/qa/qa1067/_index.html\r\n\r\nAlso, you can put the environment variable in one of these files:\r\n\r\n    ~/.bashrc\r\n    ~/.bash_profile\r\n    ~/.profile","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>This link may helps you: <a href=\"https://developer.apple.com/library/archive/qa/qa1067/_index.html\" rel=\"nofollow noreferrer\">https://developer.apple.com/library/archive/qa/qa1067/_index.html</a></p>\n\n<p>Also, you can put the environment variable in one of these files:</p>\n\n<pre><code>~/.bashrc\n~/.bash_profile\n~/.profile\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1506610,"reputation":2205,"user_id":1409847,"display_name":"Jonas Rabbe"},"down_vote_count":3,"up_vote_count":136,"is_accepted":false,"score":133,"last_activity_date":1579080381,"creation_date":1383064204,"answer_id":19663996,"question_id":14702702,"body_markdown":"You can use `/usr/libexec/java_home -v &lt;version you want&gt;` to get the path you need for `JAVA_HOME`. For instance, to get the path to the 1.7 JDK you can run `/usr/libexec/java_home -v 1.7` and it will return the path to the JDK. In your `.profile` or `.bash_profile` just add\r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v &lt;version&gt;`\r\n\r\nand you should be good. Alternatively, try and convince the maintainers of java tools you use to make use of this method to get the version they need.\r\n\r\nTo open &#39;.bash_profile&#39; type the following in terminal :\r\n\r\n    nano ~/.bash_profile \r\n\r\nand add the following line to the file:\r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v &lt;version&gt;`\r\n\r\nPress CTRL+X to exit the bash. Press &#39;Y&#39; to save changes.\r\n\r\nTo check whether the path has been added, type following in terminal:\r\n\r\n    source ~/.bash_profile\r\n    echo $JAVA_HOME","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>You can use <code>/usr/libexec/java_home -v &lt;version you want&gt;</code> to get the path you need for <code>JAVA_HOME</code>. For instance, to get the path to the 1.7 JDK you can run <code>/usr/libexec/java_home -v 1.7</code> and it will return the path to the JDK. In your <code>.profile</code> or <code>.bash_profile</code> just add</p>\n\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v &lt;version&gt;`\n</code></pre>\n\n<p>and you should be good. Alternatively, try and convince the maintainers of java tools you use to make use of this method to get the version they need.</p>\n\n<p>To open '.bash_profile' type the following in terminal :</p>\n\n<pre><code>nano ~/.bash_profile \n</code></pre>\n\n<p>and add the following line to the file:</p>\n\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v &lt;version&gt;`\n</code></pre>\n\n<p>Press CTRL+X to exit the bash. Press 'Y' to save changes.</p>\n\n<p>To check whether the path has been added, type following in terminal:</p>\n\n<pre><code>source ~/.bash_profile\necho $JAVA_HOME\n</code></pre>\n"},{"tags":[],"owner":{"account_id":398826,"reputation":7026,"user_id":763747,"accept_rate":82,"display_name":"Dilip Rajkumar"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1447083876,"creation_date":1447083876,"answer_id":33612805,"question_id":14702702,"body_markdown":"Try this link \r\nhttp://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\r\n\r\nThis explains correctly, I did the following to make it work\r\n\r\n 1. Open Terminal\r\n 2. Type `vim .bash_profile`\r\n 3. Type your java instalation dir in my case `export JAVA_HOME=&quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home`\r\n 4. Click `ESC` then type `:wq` (save and quit in vim)\r\n 5. Then type `source .bash_profile`\r\n 6. `echo $JAVA_HOME` if you see the path you are all set.\r\n\r\nHope it helps.","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>Try this link \n<a href=\"http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\" rel=\"noreferrer\">http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/</a></p>\n\n<p>This explains correctly, I did the following to make it work</p>\n\n<ol>\n<li>Open Terminal</li>\n<li>Type <code>vim .bash_profile</code></li>\n<li>Type your java instalation dir in my case <code>export JAVA_HOME=\"/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home</code></li>\n<li>Click <code>ESC</code> then type <code>:wq</code> (save and quit in vim)</li>\n<li>Then type <code>source .bash_profile</code></li>\n<li><code>echo $JAVA_HOME</code> if you see the path you are all set.</li>\n</ol>\n\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":259035,"reputation":12666,"user_id":541624,"accept_rate":64,"display_name":"ericn"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1498118366,"creation_date":1497175582,"answer_id":44482585,"question_id":14702702,"body_markdown":"Besides the settings for bash/ zsh terminal which are well covered by the other answers, if you want a permanent system environment variable for terminal + GUI applications (works for macOS Sierra; should work for El Capitan too):\r\n\r\n    launchctl setenv JAVA_HOME $(/usr/libexec/java_home -v 1.8)\r\n\r\n(this will set JAVA_HOME to the latest 1.8 JDK, chances are you have gone through serveral updates e.g. javac 1.8.0_101, javac 1.8.0_131)\r\n\r\nOf course, change 1.8 to 1.7 or 1.6 (really?) to suit your need and your system","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>Besides the settings for bash/ zsh terminal which are well covered by the other answers, if you want a permanent system environment variable for terminal + GUI applications (works for macOS Sierra; should work for El Capitan too):</p>\n\n<pre><code>launchctl setenv JAVA_HOME $(/usr/libexec/java_home -v 1.8)\n</code></pre>\n\n<p>(this will set JAVA_HOME to the latest 1.8 JDK, chances are you have gone through serveral updates e.g. javac 1.8.0_101, javac 1.8.0_131)</p>\n\n<p>Of course, change 1.8 to 1.7 or 1.6 (really?) to suit your need and your system</p>\n"},{"tags":[],"owner":{"account_id":13093298,"reputation":31,"user_id":9459991,"display_name":"Sonu Gill"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1520517667,"creation_date":1520480331,"answer_id":49164991,"question_id":14702702,"body_markdown":"Adding to Dilips&#39;s answer, if you are working with JDK 9, use the following (my JDK version is 9.0.4) in Step # 3:\r\n\r\n    export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-9.0.4.jdk/Contents/Home","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>Adding to Dilips's answer, if you are working with JDK 9, use the following (my JDK version is 9.0.4) in Step # 3:</p>\n\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-9.0.4.jdk/Contents/Home\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9311626,"reputation":427,"user_id":6913222,"display_name":"Arv"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1538030255,"creation_date":1538030255,"answer_id":52530891,"question_id":14702702,"body_markdown":"To set your Java path on mac:\r\n\r\n 1. Open terminal on mac, change path to the root cd ~\r\n 2. vi .bash_profile (This opens the bash_profile file)\r\n 3. Click **I** to insert text and use the following text to set JAVA_HOME and PATH\r\n\r\n\r\n\r\n  - export JAVA_HOME=&#39;/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home&#39;\r\n - export PATH=$JAVA_HOME/bin:$PATH\r\n\r\n\r\n\r\n4. Type :wq to save and exit the file.\r\n5. Type source .bash_profile to execute the .bash_profile file.\r\n6. You can type echo $JAVA_HOME or echo $PATH","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>To set your Java path on mac:</p>\n\n<ol>\n<li>Open terminal on mac, change path to the root cd ~</li>\n<li>vi .bash_profile (This opens the bash_profile file)</li>\n<li><p>Click <strong>I</strong> to insert text and use the following text to set JAVA_HOME and PATH</p>\n\n<ul>\n<li>export JAVA_HOME='/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home'</li>\n<li><p>export PATH=$JAVA_HOME/bin:$PATH</p>\n\n<ol start=\"4\">\n<li>Type :wq to save and exit the file.</li>\n<li>Type source .bash_profile to execute the .bash_profile file.</li>\n<li>You can type echo $JAVA_HOME or echo $PATH</li>\n</ol></li>\n</ul></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15591751,"reputation":31,"user_id":11248574,"display_name":"user11248574"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1553445389,"creation_date":1553445389,"answer_id":55326039,"question_id":14702702,"body_markdown":"to set JAVA_HOME permenantly in mac make sure you have JDK installed in your system,\r\nif jdk is not installed you can download it from here\r\nhttps://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\r\n\r\nAfter installing jdk follow these steps :-\r\n\r\n1) Open Terminal\r\n\r\n2) Type &quot;vim .bash_profile&quot;\r\n\r\n3) press &quot;i&quot; to edit or enter the path\r\n\r\n4) Type your java instalation dir :- export JAVA_HOME=$(/usr/libexec/java_home)\r\n\r\n5) Click ESC then type &quot;:wq&quot; (save and quit in vim)\r\n\r\n6) Then type &quot;source .bash_profile&quot;\r\n\r\n7) type &quot;echo $JAVA_HOME&quot; if you see the path you are all set.\r\n\r\nTHANK YOU\r\n\r\n\r\n ","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>to set JAVA_HOME permenantly in mac make sure you have JDK installed in your system,\nif jdk is not installed you can download it from here\n<a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>\n\n<p>After installing jdk follow these steps :-</p>\n\n<p>1) Open Terminal</p>\n\n<p>2) Type \"vim .bash_profile\"</p>\n\n<p>3) press \"i\" to edit or enter the path</p>\n\n<p>4) Type your java instalation dir :- export JAVA_HOME=$(/usr/libexec/java_home)</p>\n\n<p>5) Click ESC then type \":wq\" (save and quit in vim)</p>\n\n<p>6) Then type \"source .bash_profile\"</p>\n\n<p>7) type \"echo $JAVA_HOME\" if you see the path you are all set.</p>\n\n<p>THANK YOU</p>\n"},{"tags":[],"owner":{"account_id":8711804,"reputation":31,"user_id":6517757,"display_name":"Wystoon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1556182116,"creation_date":1556180546,"answer_id":55844847,"question_id":14702702,"body_markdown":"[sql-surfer][1] and\r\n[MikroDel][2],\r\n\r\n  [1]: https://stackoverflow.com/users/2080879/sql-surfer\r\n[2]: https://stackoverflow.com/users/502950/mikrodel\r\n\r\nactually, the answer is not that complicated! You just need to add:\r\n```sh\r\nexport JAVA_HOME=(/usr/libexec/java_home)\r\n```\r\nto your shell profile/configuration file. The only question is - which shell are you using? If you&#39;re using for example FISH, then adding that line to `.profile` or `.bash_profile` will not work at all. Adding it to `config.fish` file though will do the trick. Permanently.","title":"How to set JAVA_HOME in Mac permanently?","body":"<p><a href=\"https://stackoverflow.com/users/2080879/sql-surfer\">sql-surfer</a> and\n<a href=\"https://stackoverflow.com/users/502950/mikrodel\">MikroDel</a>,</p>\n\n<p>actually, the answer is not that complicated! You just need to add:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>export JAVA_HOME=(/usr/libexec/java_home)\n</code></pre>\n\n<p>to your shell profile/configuration file. The only question is - which shell are you using? If you're using for example FISH, then adding that line to <code>.profile</code> or <code>.bash_profile</code> will not work at all. Adding it to <code>config.fish</code> file though will do the trick. Permanently.</p>\n"},{"tags":[],"owner":{"account_id":539436,"reputation":1289,"user_id":907277,"display_name":"AbdulBasit"},"down_vote_count":0,"up_vote_count":63,"is_accepted":false,"score":63,"last_activity_date":1574144543,"creation_date":1574144186,"answer_id":58927740,"question_id":14702702,"body_markdown":"I was facing the same issue in MAC Catalina, If I edit .bash_profile i found export JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_201.jdk/Contents/Home\r\nBut When I run terminal echo $JAVA_HOME it was returning empty, Later I found that the file .zshrc was missing I created this file with \r\n\r\n    touch .zshrc \r\n\r\n    \r\nThen edit it by `nano .zshrc` and wrote \r\n\r\n    source ~/.bash_profile\r\n\r\nWhich solves my issue permanently\r\n","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>I was facing the same issue in MAC Catalina, If I edit .bash_profile i found export JAVA_HOME=\"/Library/Java/JavaVirtualMachines/jdk1.8.0_201.jdk/Contents/Home\nBut When I run terminal echo $JAVA_HOME it was returning empty, Later I found that the file .zshrc was missing I created this file with </p>\n\n<pre><code>touch .zshrc \n</code></pre>\n\n<p>Then edit it by <code>nano .zshrc</code> and wrote </p>\n\n<pre><code>source ~/.bash_profile\n</code></pre>\n\n<p>Which solves my issue permanently</p>\n"},{"tags":[],"owner":{"account_id":1731104,"reputation":1809,"user_id":1584699,"accept_rate":94,"display_name":"Joffrey Hernandez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1579079190,"creation_date":1579078416,"answer_id":59747845,"question_id":14702702,"body_markdown":"Declare two export inside your .bashrc or .zshrc:\r\n\r\n    export JAVA_8_HOME=$(/usr/libexec/java_home -v1.8) \r\n    export JAVA_11_HOME=$(/usr/libexec/java_home -v11)\r\n\r\nAdd alias for quick change:\r\n\r\n    alias java8=&#39;export JAVA_HOME=$JAVA_8_HOME&#39;\r\n    alias java11=&#39;export JAVA_HOME=$JAVA_11_HOME&#39;\r\n\r\nset default to Java 11\r\n\r\n    java11\r\n\r\nexport PATH\r\n\r\n    export PATH=$JAVA_HOME/bin:$PATH\r\n\r\nyou could change java11 by java8 inside your .bashrc/zshrc file to change permanently your java version","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>Declare two export inside your .bashrc or .zshrc:</p>\n\n<pre><code>export JAVA_8_HOME=$(/usr/libexec/java_home -v1.8) \nexport JAVA_11_HOME=$(/usr/libexec/java_home -v11)\n</code></pre>\n\n<p>Add alias for quick change:</p>\n\n<pre><code>alias java8='export JAVA_HOME=$JAVA_8_HOME'\nalias java11='export JAVA_HOME=$JAVA_11_HOME'\n</code></pre>\n\n<p>set default to Java 11</p>\n\n<pre><code>java11\n</code></pre>\n\n<p>export PATH</p>\n\n<pre><code>export PATH=$JAVA_HOME/bin:$PATH\n</code></pre>\n\n<p>you could change java11 by java8 inside your .bashrc/zshrc file to change permanently your java version</p>\n"},{"tags":[],"owner":{"account_id":2100782,"reputation":101,"user_id":1868463,"display_name":"Ashish Vitthal Dalvi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1588988480,"creation_date":1581154857,"answer_id":60125587,"question_id":14702702,"body_markdown":"1) The first step is to if you have Java installed and running your system.\r\n\r\n    which java\r\nUsually, it should be /usr/bin/java.\r\n\r\n2) **JAVA_HOME** is essentially the full path of the directory that contains a sub-directory named **bin** which in turn contains the **java**.\r\n\r\n    cd /Library/Java/\r\n\r\n - You should have **bin** folder inside **/Java** folder and in turn it must contain the **[java]** executable package.\r\n\r\n[Folder structure for Mac OS][1]\r\n\r\n3.1) If you want to set the path only for the current session then execute this command in your terminal `export JAVA_HOME=/Library/Java`\r\n\r\n3.2) If you want it to persist, you will have to add the command to your `~/.bash_profile` file\r\n\r\n- Open up Terminal `vi ~/.bash_profile`\r\n- Add these lines to terminal `export JAVA_HOME=/Library/Java/Home` and save it\r\n- Execute below command `source ~/.bash_profile`\r\n\r\n4) Verify you have correctly added JAVA_HOME path. Below command should give you the proper Java version.\r\n\r\n\r\n\r\nThat&#39;s it and your ready to use!!\r\n\r\n  [1]: https://i.stack.imgur.com/JDSy3.png\r\n\r\n","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>1) The first step is to if you have Java installed and running your system.</p>\n\n<pre><code>which java\n</code></pre>\n\n<p>Usually, it should be /usr/bin/java.</p>\n\n<p>2) <strong>JAVA_HOME</strong> is essentially the full path of the directory that contains a sub-directory named <strong>bin</strong> which in turn contains the <strong>java</strong>.</p>\n\n<pre><code>cd /Library/Java/\n</code></pre>\n\n<ul>\n<li>You should have <strong>bin</strong> folder inside <strong>/Java</strong> folder and in turn it must contain the <strong>[java]</strong> executable package.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/JDSy3.png\" rel=\"nofollow noreferrer\">Folder structure for Mac OS</a></p>\n\n<p>3.1) If you want to set the path only for the current session then execute this command in your terminal <code>export JAVA_HOME=/Library/Java</code></p>\n\n<p>3.2) If you want it to persist, you will have to add the command to your <code>~/.bash_profile</code> file</p>\n\n<ul>\n<li>Open up Terminal <code>vi ~/.bash_profile</code></li>\n<li>Add these lines to terminal <code>export JAVA_HOME=/Library/Java/Home</code> and save it</li>\n<li>Execute below command <code>source ~/.bash_profile</code></li>\n</ul>\n\n<p>4) Verify you have correctly added JAVA_HOME path. Below command should give you the proper Java version.</p>\n\n<p>That's it and your ready to use!!</p>\n"},{"tags":[],"owner":{"account_id":16239576,"reputation":152,"user_id":11726273,"display_name":"Ilan Rosenbaum"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1598920695,"creation_date":1598920695,"answer_id":63679850,"question_id":14702702,"body_markdown":"First, figure out where your java home is by running the command `/usr/libexec/java_home -v &lt;version&gt;` replacing &lt;version&gt; with whatever version of OpenJDK your running. \r\n\r\nNext use `vim ~/.bash_profile` to edit your bash profile. Add `export JAVA_HOME=&quot;&lt;java path&gt;&quot;` replacing &lt;java path&gt; with the path to your java home found in the last step.\r\n\r\nFinally, run the command `source ~/.bash_profile`\r\n\r\nThis should permanently set your JAVA_HOME environment variable.\r\n\r\nTo make sure it worked run `echo $JAVA_HOME` and make sure it returns the path you set","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>First, figure out where your java home is by running the command <code>/usr/libexec/java_home -v &lt;version&gt;</code> replacing  with whatever version of OpenJDK your running.</p>\n<p>Next use <code>vim ~/.bash_profile</code> to edit your bash profile. Add <code>export JAVA_HOME=&quot;&lt;java path&gt;&quot;</code> replacing  with the path to your java home found in the last step.</p>\n<p>Finally, run the command <code>source ~/.bash_profile</code></p>\n<p>This should permanently set your JAVA_HOME environment variable.</p>\n<p>To make sure it worked run <code>echo $JAVA_HOME</code> and make sure it returns the path you set</p>\n"},{"tags":[],"owner":{"account_id":322917,"reputation":2355,"user_id":642616,"display_name":"Feuda"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1603786609,"creation_date":1603786609,"answer_id":64550451,"question_id":14702702,"body_markdown":"If you are using the latest versions of macOS, then you cannot use ~/.bash_profile to export your environment variable since the bash shell is deprecated in the latest version of macOS.\r\n\r\n - Run `/usr/libexec/java_home` in your terminal and you will get things like `/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home`\r\n - Add `export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home` to .zshrc","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>If you are using the latest versions of macOS, then you cannot use ~/.bash_profile to export your environment variable since the bash shell is deprecated in the latest version of macOS.</p>\n<ul>\n<li>Run <code>/usr/libexec/java_home</code> in your terminal and you will get things like <code>/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home</code></li>\n<li>Add <code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home</code> to .zshrc</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7612171,"reputation":327,"user_id":8413347,"display_name":"Shishir"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1605113141,"creation_date":1605113141,"answer_id":64790601,"question_id":14702702,"body_markdown":"If you are using fish shell. Then all the variables can be set in .config/fish/config.fish\r\n\r\n    vim .config/fish/config.fish\r\nAdd the following lines\r\n\r\n    set -g JAVA_HOME &quot;your_path_to_jdk&quot;\r\nsave and exit out of vim.\r\n\r\nThis should be setting your JAVA_HOME. Thanks\r\n\r\n","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>If you are using fish shell. Then all the variables can be set in .config/fish/config.fish</p>\n<pre><code>vim .config/fish/config.fish\n</code></pre>\n<p>Add the following lines</p>\n<pre><code>set -g JAVA_HOME &quot;your_path_to_jdk&quot;\n</code></pre>\n<p>save and exit out of vim.</p>\n<p>This should be setting your JAVA_HOME. Thanks</p>\n"},{"tags":[],"owner":{"account_id":18191185,"reputation":131,"user_id":13237005,"display_name":"poonam poonia"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1606483331,"creation_date":1606483331,"answer_id":65038101,"question_id":14702702,"body_markdown":"run this command on your terminal(here -v11 is for version 11(java11))-:\r\n\r\n    /usr/libexec/java_home -v11\r\n\r\nyou will get the path on your terminal something like this -:\r\n\r\n    /Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home\r\n\r\nnow you need to open your bash profile in any editor for eg VS Code \r\n\r\nif you want to edit your bash_profile in vs code then run this command -:\r\n\r\n    code ~/.bash_profile\r\n\r\nelse run this command and then press i to insert the path. -:\r\n\r\n    open ~/.bash_profile\r\n\r\n\r\n\r\nyou will get your .bash_profile now you need to add the path\r\nso add this in .bash_profile (path which you get from 1st command)-:\r\n\r\n    export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home\r\n\r\nif you were using code editor then now go to terminal and run this command to save the changes -:\r\n\r\n    source ~/.bash_profile\r\n\r\nelse press esc then :wq to exit from bash_profile then go to terminal and run the command given above.\r\nprocess completed.\r\nnow you can check using this command -:\r\n\r\n    echo $JAVA_HOME\r\nyou will get`/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home\r\n`\r\n\r\n\r\n","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>run this command on your terminal(here -v11 is for version 11(java11))-:</p>\n<pre><code>/usr/libexec/java_home -v11\n</code></pre>\n<p>you will get the path on your terminal something like this -:</p>\n<pre><code>/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home\n</code></pre>\n<p>now you need to open your bash profile in any editor for eg VS Code</p>\n<p>if you want to edit your bash_profile in vs code then run this command -:</p>\n<pre><code>code ~/.bash_profile\n</code></pre>\n<p>else run this command and then press i to insert the path. -:</p>\n<pre><code>open ~/.bash_profile\n</code></pre>\n<p>you will get your .bash_profile now you need to add the path\nso add this in .bash_profile (path which you get from 1st command)-:</p>\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home\n</code></pre>\n<p>if you were using code editor then now go to terminal and run this command to save the changes -:</p>\n<pre><code>source ~/.bash_profile\n</code></pre>\n<p>else press esc then :wq to exit from bash_profile then go to terminal and run the command given above.\nprocess completed.\nnow you can check using this command -:</p>\n<pre><code>echo $JAVA_HOME\n</code></pre>\n<p>you will get<code>/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home </code></p>\n"},{"tags":[],"owner":{"account_id":18096884,"reputation":7249,"user_id":13155046,"display_name":"Milovan Tomašević"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1691380914,"creation_date":1607204936,"answer_id":65162351,"question_id":14702702,"body_markdown":"Installing Java on `macOS 11 Big Sur`:\r\n- the easiest way is to select OpenJDK 11 (LTS), the HotSpot JVM, and macOS x64 is to get the latest release here: [adoptopenjdk.net][1]\r\n- Select macOS and x64 and download the `JDK` (about 190 MB), which will put the `OpenJDK11U-jdk_x64_mac_hotspot_11.0.9_11.pkg` file into your `~/Downloads folder`\r\n- Clicking on pkg file, will install into this location: `/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk`\r\n[![enter image description here][2]][2]\r\n- Almost done. After opening a terminal, the successful installation of the JDK can be confirmed like so: `java --version`\r\n   - output:\r\n```sh\r\nopenjdk 11.0.9.1 2020-11-04\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.9.1+1)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.9.1+1, mixed mode)\r\n```\r\n- `JAVA_HOME` is an important environment variable and it’s important to get it right. Here is a trick that allows me to keep the environment variable current, even after a Java Update was installed. In `~/.zshrc`, I set the variable like so:  \r\n`export JAVA_HOME=$(/usr/libexec/java_home)`\r\n- In previous macOS versions, this was done in `~/.bash_profile`. Anyway, open a new terminal and verify: `echo $JAVA_HOME`\r\n   - output: `/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home`\r\n\r\n***\r\nTEST: Compile and Run your Java Program\r\n\r\n- Open a text editor, copy the code from below and save the file as `HelloStackoverflow.java`. \r\n```java\r\npublic class HelloStackoverflow {\r\n  public static void main(String[] args){\r\n    System.out.println(&quot;Hello Stackoverflow !&quot;);\r\n  }//End of main\r\n}//End of HelloStackoverflow Class\r\n```\r\n\r\n- From a terminal set the working directory to the directory containing `HelloStackoverflow.java`, then type the command:\r\n```sh\r\njavac HelloStackoverflow.java\r\n```\r\n\r\n- If you&#39;re lucky, nothing will happen\r\n\r\n- Actually, a lot happened. `javac` is the name of the Java compiler. It translates Java into `Java Bytecode`, an assembly language for the Java Virtual Machine (JVM). The Java Bytecode is stored in a file called `HelloStackoverflow.class`.\r\n\r\n- Running: type the command:\r\n```sh\r\njava HelloStackoverflow\r\n\r\n# output:\r\n# Hello Stackoverflow !\r\n```\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://adoptopenjdk.net/archive.html?variant=openjdk11&amp;jvmVariant=hotspot\r\n  [2]: https://i.stack.imgur.com/EIi48.jpg\r\n  [3]: https://i.stack.imgur.com/dp640.png","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>Installing Java on <code>macOS 11 Big Sur</code>:</p>\n<ul>\n<li>the easiest way is to select OpenJDK 11 (LTS), the HotSpot JVM, and macOS x64 is to get the latest release here: <a href=\"https://adoptopenjdk.net/archive.html?variant=openjdk11&amp;jvmVariant=hotspot\" rel=\"nofollow noreferrer\">adoptopenjdk.net</a></li>\n<li>Select macOS and x64 and download the <code>JDK</code> (about 190 MB), which will put the <code>OpenJDK11U-jdk_x64_mac_hotspot_11.0.9_11.pkg</code> file into your <code>~/Downloads folder</code></li>\n<li>Clicking on pkg file, will install into this location: <code>/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk</code>\n<a href=\"https://i.stack.imgur.com/EIi48.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EIi48.jpg\" alt=\"enter image description here\" /></a></li>\n<li>Almost done. After opening a terminal, the successful installation of the JDK can be confirmed like so: <code>java --version</code>\n<ul>\n<li>output:</li>\n</ul>\n</li>\n</ul>\n<pre class=\"lang-bash prettyprint-override\"><code>openjdk 11.0.9.1 2020-11-04\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.9.1+1)\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.9.1+1, mixed mode)\n</code></pre>\n<ul>\n<li><code>JAVA_HOME</code> is an important environment variable and it’s important to get it right. Here is a trick that allows me to keep the environment variable current, even after a Java Update was installed. In <code>~/.zshrc</code>, I set the variable like so:<br />\n<code>export JAVA_HOME=$(/usr/libexec/java_home)</code></li>\n<li>In previous macOS versions, this was done in <code>~/.bash_profile</code>. Anyway, open a new terminal and verify: <code>echo $JAVA_HOME</code>\n<ul>\n<li>output: <code>/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home</code></li>\n</ul>\n</li>\n</ul>\n<hr />\n<p>TEST: Compile and Run your Java Program</p>\n<ul>\n<li>Open a text editor, copy the code from below and save the file as <code>HelloStackoverflow.java</code>.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public class HelloStackoverflow {\n  public static void main(String[] args){\n    System.out.println(&quot;Hello Stackoverflow !&quot;);\n  }//End of main\n}//End of HelloStackoverflow Class\n</code></pre>\n<ul>\n<li>From a terminal set the working directory to the directory containing <code>HelloStackoverflow.java</code>, then type the command:</li>\n</ul>\n<pre class=\"lang-bash prettyprint-override\"><code>javac HelloStackoverflow.java\n</code></pre>\n<ul>\n<li><p>If you're lucky, nothing will happen</p>\n</li>\n<li><p>Actually, a lot happened. <code>javac</code> is the name of the Java compiler. It translates Java into <code>Java Bytecode</code>, an assembly language for the Java Virtual Machine (JVM). The Java Bytecode is stored in a file called <code>HelloStackoverflow.class</code>.</p>\n</li>\n<li><p>Running: type the command:</p>\n</li>\n</ul>\n<pre class=\"lang-bash prettyprint-override\"><code>java HelloStackoverflow\n\n# output:\n# Hello Stackoverflow !\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/dp640.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dp640.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":16862831,"reputation":128,"user_id":12193227,"display_name":"Prabhashi"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1610869307,"creation_date":1610869307,"answer_id":65758319,"question_id":14702702,"body_markdown":"To set JAVA_HOME permanently in Mac, I tried following steps.\r\n1. Download and install Java JDK to your Mac. When you install a Java JDK version which will be installed in the following location by default in MAC.\r\n\r\n&gt; /Library/Java/JavaVirtualMachines\r\n\r\n2. Open the **.bash_profile** file (Here My Mac version is MacOS High Sierra. You may need to open **.zshrc** file in some different MacOS versions).\r\n\r\n```atom ~/.bash_profile```\r\n\r\n3. Add following to your bash_profile file.\r\n\r\n\r\nChange the JDK version accordingly\r\n\r\n\r\n\r\n\r\n\r\n    export JAVA_HOME=&quot;$(/usr/libexec/java_home -v 1.8)&quot;\r\n    export JAVA_HOME=&#39;/Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home&#39;\r\n    export PATH=$JAVA_HOME/bin:$PATH\r\n\r\n\r\n\r\n\r\n4. Open the Terminal and execute following.\r\n\r\n```source ~/.bash_profile```\r\n\r\nOpen a new terminal and check &#39;echo $JAVA_HOME&#39; \r\n\r\nThanks.\r\n","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>To set JAVA_HOME permanently in Mac, I tried following steps.</p>\n<ol>\n<li>Download and install Java JDK to your Mac. When you install a Java JDK version which will be installed in the following location by default in MAC.</li>\n</ol>\n<blockquote>\n<p>/Library/Java/JavaVirtualMachines</p>\n</blockquote>\n<ol start=\"2\">\n<li>Open the <strong>.bash_profile</strong> file (Here My Mac version is MacOS High Sierra. You may need to open <strong>.zshrc</strong> file in some different MacOS versions).</li>\n</ol>\n<p><code>atom ~/.bash_profile</code></p>\n<ol start=\"3\">\n<li>Add following to your bash_profile file.</li>\n</ol>\n<p>Change the JDK version accordingly</p>\n<pre><code>export JAVA_HOME=&quot;$(/usr/libexec/java_home -v 1.8)&quot;\nexport JAVA_HOME='/Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home'\nexport PATH=$JAVA_HOME/bin:$PATH\n</code></pre>\n<ol start=\"4\">\n<li>Open the Terminal and execute following.</li>\n</ol>\n<p><code>source ~/.bash_profile</code></p>\n<p>Open a new terminal and check 'echo $JAVA_HOME'</p>\n<p>Thanks.</p>\n"},{"tags":[],"owner":{"account_id":11479643,"reputation":11,"user_id":8414155,"display_name":"Luke Songling Yan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622581826,"creation_date":1622581826,"answer_id":67796030,"question_id":14702702,"body_markdown":"Find out the jenv will set the $JAVA_HOME a short version like &quot;/Users/*****/.jenv/versions/1.8&quot;.\r\n  \r\nHave to uninstall jenv to make the $JAVA_HOME setting works like &quot;JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home&quot;","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>Find out the jenv will set the $JAVA_HOME a short version like &quot;/Users/*****/.jenv/versions/1.8&quot;.</p>\n<p>Have to uninstall jenv to make the $JAVA_HOME setting works like &quot;JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_261.jdk/Contents/Home&quot;</p>\n"},{"tags":[],"owner":{"account_id":3982148,"reputation":389,"user_id":3283808,"display_name":"Elano Vasconcelos"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1636731497,"creation_date":1636731497,"answer_id":69945413,"question_id":14702702,"body_markdown":"the answers here are in general correct, but for me I didn&#39;t know that I need to do something like `source ~/.bash_profile` to be able to really make it work.\r\n\r\nso the full answer is:\r\n\r\n    nano ~/.zshenv // or\r\n    nano ~/.zshrc // or\r\n    nano ~/.bash_profile\r\n    //add this line to zshrc and bash_profile if you want to be 100% sure\r\n    export JAVA_HOME=$(/usr/libexec/java_home)\r\n    //save\r\n    source ~/.bash_profile //the KEY that generally isn&#39;t in the answers\r\n    source ~/.zshrc //I didn&#39;t do this one, but maybe you need it","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>the answers here are in general correct, but for me I didn't know that I need to do something like <code>source ~/.bash_profile</code> to be able to really make it work.</p>\n<p>so the full answer is:</p>\n<pre><code>nano ~/.zshenv // or\nnano ~/.zshrc // or\nnano ~/.bash_profile\n//add this line to zshrc and bash_profile if you want to be 100% sure\nexport JAVA_HOME=$(/usr/libexec/java_home)\n//save\nsource ~/.bash_profile //the KEY that generally isn't in the answers\nsource ~/.zshrc //I didn't do this one, but maybe you need it\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12468518,"reputation":1,"user_id":9077518,"display_name":"VIKRAM BARANWAL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679917134,"creation_date":1679395534,"answer_id":75800186,"question_id":14702702,"body_markdown":"If you want to set the java version permanently, \r\ni.e., If you have 2 or more Java versions in your local\r\n\r\nThen, follow these steps:\r\n\r\n**1.** Check the available java versions using\r\n&quot;/usr/libexec/java_home -V&quot; command\r\n\r\n[![enter image description here][1]][1]\r\n&lt;br&gt;\r\n\r\n**2.** Set the path inside the .bash_profile\r\n\r\n - Open your terminal\r\n - vi .bash_profile\r\n - export\r\n   JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home\r\n\r\nHere, &quot;*/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home*&quot; \r\n is the java11 version path from step 1\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PQ06A.png","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>If you want to set the java version permanently,\ni.e., If you have 2 or more Java versions in your local</p>\n<p>Then, follow these steps:</p>\n<p><strong>1.</strong> Check the available java versions using\n&quot;/usr/libexec/java_home -V&quot; command</p>\n<p><a href=\"https://i.stack.imgur.com/PQ06A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PQ06A.png\" alt=\"enter image description here\" /></a>\n<br></p>\n<p><strong>2.</strong> Set the path inside the .bash_profile</p>\n<ul>\n<li>Open your terminal</li>\n<li>vi .bash_profile</li>\n<li>export\nJAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home</li>\n</ul>\n<p>Here, &quot;<em>/Library/Java/JavaVirtualMachines/jdk-11.0.9.jdk/Contents/Home</em>&quot;\nis the java11 version path from step 1</p>\n"},{"tags":[],"owner":{"account_id":12827072,"reputation":2049,"user_id":9279682,"display_name":"Viraj Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693835598,"creation_date":1690284942,"answer_id":76762307,"question_id":14702702,"body_markdown":"Most of the answers were suggesting to source .bash_profile were outdated for me, I&#39;m using **macOS Ventura 13.4.1** which uses Zsh shell. Knowing which shell you are using helps you determine which configuration file to modify.\r\n\r\n**Step 1:**\r\n\r\n     echo $SHELL\r\n\r\n**Step 2:**\r\n\r\nif you see /bin/zsh then you need to update JAVA_HOME in ~/.zshrc, oterwise if you&#39;re seeing /bin/bash you need to update JAVA_HOME in ~/.bash_profile. Here ~/ is the home path. you can find .zshrc and .bash_profile in your home directory. you can go to you home directory by pressing return after `cd`  \r\n\r\n\r\n**Step 3**\r\n\r\n    /usr/libexec/java_home -V\r\nrun this command to see the jdks installed on your mac.\r\n\r\n**Step 4**\r\n\r\nI was using the Zsh shell, so I had to add this export in my .zshrc file. if you don&#39;t have this file in you `~/` home direcroy you need to create it.\r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v 11`\r\n\r\nreplace the version after -v to the version you want to permanently set and aready have installed.\r\n\r\n**Step 5**\r\n\r\nif you&#39;re using Zsh shell\r\n\r\n\r\n    source .zshrc\r\n\r\nelse\r\n\r\n    source .bash_profile\r\n\r\n\r\nmake sure you&#39;re running this command in your home directory if you&#39;re not in your home directory run `source ~/.zshrc` as ~/ is shorthand for home directory.\r\n\r\n\r\n\r\n","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>Most of the answers were suggesting to source .bash_profile were outdated for me, I'm using <strong>macOS Ventura 13.4.1</strong> which uses Zsh shell. Knowing which shell you are using helps you determine which configuration file to modify.</p>\n<p><strong>Step 1:</strong></p>\n<pre><code> echo $SHELL\n</code></pre>\n<p><strong>Step 2:</strong></p>\n<p>if you see /bin/zsh then you need to update JAVA_HOME in ~/.zshrc, oterwise if you're seeing /bin/bash you need to update JAVA_HOME in ~/.bash_profile. Here ~/ is the home path. you can find .zshrc and .bash_profile in your home directory. you can go to you home directory by pressing return after <code>cd</code></p>\n<p><strong>Step 3</strong></p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>run this command to see the jdks installed on your mac.</p>\n<p><strong>Step 4</strong></p>\n<p>I was using the Zsh shell, so I had to add this export in my .zshrc file. if you don't have this file in you <code>~/</code> home direcroy you need to create it.</p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 11`\n</code></pre>\n<p>replace the version after -v to the version you want to permanently set and aready have installed.</p>\n<p><strong>Step 5</strong></p>\n<p>if you're using Zsh shell</p>\n<pre><code>source .zshrc\n</code></pre>\n<p>else</p>\n<pre><code>source .bash_profile\n</code></pre>\n<p>make sure you're running this command in your home directory if you're not in your home directory run <code>source ~/.zshrc</code> as ~/ is shorthand for home directory.</p>\n"}],"owner":{"account_id":2285974,"reputation":1319,"user_id":2009908,"display_name":"Vishal Tavande"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":273981,"favorite_count":0,"down_vote_count":0,"up_vote_count":118,"answer_count":22,"score":118,"last_activity_date":1693835598,"creation_date":1360051503,"question_id":14702702,"body_markdown":"I am trying to set `JAVA_HOME` by entering `export JAVA_HOME=/Library/Java/Home` at terminal.\r\nIt sets the `JAVA_HOME` for current session. \r\n\r\nHow can I set it permanently?","title":"How to set JAVA_HOME in Mac permanently?","body":"<p>I am trying to set <code>JAVA_HOME</code> by entering <code>export JAVA_HOME=/Library/Java/Home</code> at terminal.\nIt sets the <code>JAVA_HOME</code> for current session. </p>\n\n<p>How can I set it permanently?</p>\n"},{"tags":["java","spring","redis","jedis","spring-data-redis"],"comments":[{"owner":{"account_id":2360824,"reputation":17691,"user_id":2067527,"display_name":"mp911de"},"score":0,"creation_date":1513149899,"post_id":47763245,"comment_id":82536154,"body_markdown":"Possible duplicate of [SocketTimeoutException: Read time out](https://stackoverflow.com/questions/26764252/sockettimeoutexception-read-time-out)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/26764252/sockettimeoutexception-read-time-out\">SocketTimeoutException: Read time out</a>"},{"owner":{"account_id":3146957,"reputation":462,"user_id":2661251,"accept_rate":25,"display_name":"gcpdev-guy"},"score":0,"creation_date":1513282545,"post_id":47763245,"comment_id":82605216,"body_markdown":"No, my issue is different because of the libs I used are different","body":"No, my issue is different because of the libs I used are different"}],"answers":[{"tags":[],"owner":{"account_id":1592336,"reputation":1170,"user_id":1475386,"accept_rate":100,"display_name":"donm"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1514490288,"creation_date":1514490288,"answer_id":48013461,"question_id":47763245,"body_markdown":"1.Try to use Jedis connection pool to get Jedis instance instead of using `new Jedis()`, for that you will have to configure JedisPool in config\r\nSince you are using it as bean, you should use JedisPool bean and then get Jedis from it wherever you are supposed to perform an operation and close it after finishing.\r\n\r\n2.Otherwise use spring&#39;s redisTemplate with config as below\r\n\r\n    @Bean\r\n\tpublic JedisConnectionFactory redisConnectionFactory() {\r\n\t\tJedisConnectionFactory factory = new JedisConnectionFactory();\r\n\t\tfactory.setHostName(redisHostName);\r\n\t\tfactory.setPort(redisPort);\r\n\t\tfactory.setUsePool(true);\r\n\r\n\t\treturn factory;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory cf) {\r\n\t\tRedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\r\n\t\tredisTemplate.setDefaultSerializer(new StringRedisSerializer());\r\n\t\tredisTemplate.setConnectionFactory(cf);\r\n\r\n\t\treturn redisTemplate;\r\n\t}","title":"Cannot get Jedis connection; Could not get a resource from the pool","body":"<p>1.Try to use Jedis connection pool to get Jedis instance instead of using <code>new Jedis()</code>, for that you will have to configure JedisPool in config\nSince you are using it as bean, you should use JedisPool bean and then get Jedis from it wherever you are supposed to perform an operation and close it after finishing.</p>\n\n<p>2.Otherwise use spring's redisTemplate with config as below</p>\n\n<pre><code>@Bean\npublic JedisConnectionFactory redisConnectionFactory() {\n    JedisConnectionFactory factory = new JedisConnectionFactory();\n    factory.setHostName(redisHostName);\n    factory.setPort(redisPort);\n    factory.setUsePool(true);\n\n    return factory;\n}\n\n@Bean\npublic RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory cf) {\n    RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();\n    redisTemplate.setDefaultSerializer(new StringRedisSerializer());\n    redisTemplate.setConnectionFactory(cf);\n\n    return redisTemplate;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1796566,"reputation":929,"user_id":1635855,"accept_rate":83,"display_name":"Wuaner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533030863,"creation_date":1533030863,"answer_id":51610569,"question_id":47763245,"body_markdown":"Fetch Jedis instance from spring-managed redis connection pool:\r\n\r\n    Jedis jedis = (Jedis) redisTemplate.getConnectionFactory().getConnection().getNativeConnection();\r\n\r\nThen u can use it to instantiate JedisLock.\r\n\r\n","title":"Cannot get Jedis connection; Could not get a resource from the pool","body":"<p>Fetch Jedis instance from spring-managed redis connection pool:</p>\n\n<pre><code>Jedis jedis = (Jedis) redisTemplate.getConnectionFactory().getConnection().getNativeConnection();\n</code></pre>\n\n<p>Then u can use it to instantiate JedisLock.</p>\n"},{"tags":[],"owner":{"account_id":2875754,"reputation":81,"user_id":2467866,"display_name":"Ranjan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553679484,"creation_date":1553679484,"answer_id":55373941,"question_id":47763245,"body_markdown":"Change `bind 127.0.0.1` to `bind {replace with machine ip}` in your redis.{os}.conf file of Redis","title":"Cannot get Jedis connection; Could not get a resource from the pool","body":"<p>Change <code>bind 127.0.0.1</code> to <code>bind {replace with machine ip}</code> in your redis.{os}.conf file of Redis</p>\n"},{"tags":[],"owner":{"account_id":1412555,"reputation":5701,"user_id":1338879,"accept_rate":69,"display_name":"rustylepord"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681049063,"creation_date":1681049063,"answer_id":75970989,"question_id":47763245,"body_markdown":"If the passed password empty when creating Jdeis pool pass null instead of of empty quotes. e.g. &quot;&quot;\r\n\r\n&gt; return new JedisPool(new JedisPoolConfig(), redisHost, redisPort,\r\n&gt; 600000,\r\n&gt; \t\t\t\tStringUtils.isEmpty(redisPassword) ? null : redisPassword);","title":"Cannot get Jedis connection; Could not get a resource from the pool","body":"<p>If the passed password empty when creating Jdeis pool pass null instead of of empty quotes. e.g. &quot;&quot;</p>\n<blockquote>\n<p>return new JedisPool(new JedisPoolConfig(), redisHost, redisPort,\n600000,\nStringUtils.isEmpty(redisPassword) ? null : redisPassword);</p>\n</blockquote>\n"}],"owner":{"account_id":3146957,"reputation":462,"user_id":2661251,"accept_rate":25,"display_name":"gcpdev-guy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30261,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1693835287,"creation_date":1513035737,"question_id":47763245,"body_markdown":"I am running a batch job for every 5 minutes and I don&#39;t wanna other nodes to run the same job hence I am using Jedis lock to lock an object for 5 minutes. So that other node won&#39;t get the lock if they try to run the same job. Job started after acquiring the lock and when I try to read it from Redis I am getting the following exception saying \r\n\r\n    &#39;Caused by: redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool\r\n    \tat redis.clients.util.Pool.getResource(Pool.java:53)\r\n    \tat redis.clients.jedis.JedisPool.getResource(JedisPool.java:226)\r\n    \tat redis.clients.jedis.JedisPool.getResource(JedisPool.java:16)\r\n    \tat org.springframework.data.redis.connection.jedis.JedisConnectionFactory.fetchJedisConnector(JedisConnectionFactory.java:194)\r\n    \t... 40 more\r\n    Caused by: redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: Read timed out\r\n    \tat redis.clients.jedis.Connection.disconnect(Connection.java:224)\r\n    \tat redis.clients.jedis.BinaryClient.disconnect(BinaryClient.java:941)\r\n    \tat redis.clients.jedis.Connection.close(Connection.java:214)\r\n    \tat redis.clients.jedis.BinaryClient.close(BinaryClient.java:947)\r\n    \tat redis.clients.jedis.Jedis.close(Jedis.java:3412)\r\n    \tat redis.clients.jedis.JedisFactory.makeObject(JedisFactory.java:117)\r\n    \tat org.apache.commons.pool2.impl.GenericObjectPool.create(GenericObjectPool.java:836)\r\n    \tat org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:434)\r\n    \tat org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:361)\r\n    \tat redis.clients.util.Pool.getResource(Pool.java:49)&#39;\r\n\r\nThis is what the code I have\r\n\r\n\r\n    @Bean\r\n    public Jedis getJedis()\r\n    {\r\n    \tJedis jedis = new Jedis(this.redisHost, nteger.valueOf(this.redisPort));\r\n    \tjedis.auth(this.redisPassword);\r\n    \treturn jedis;\r\n    }\r\n\r\nspring-boot Application.properties file\r\n\r\n    # DATA REDIS\r\n    spring.data.redis.repositories.enabled=true\r\n    # REDIS (RedisProperties)\r\n    spring.redis.host=10.160.49.22\r\n    spring.redis.password=qweqewqw\r\n    spring.redis.ssl=true \r\n    #spring.redis.pool.max-active=10\r\n    #spring.redis.pool.max-idle=10\r\n    # spring.redis.pool.max-wait=30000\r\n    spring.redis.port=6379\r\n\r\nJob executes the following code at the start to get the lock\r\n\r\n    JedisLock jedisLock = new JedisLock(jedis, getLockName(), getTimeInMillis());\r\n    jedisLoc.acquire()\r\n\r\n\r\nAfter that redis repository class is trying to read values for a particular pattern..\r\n\r\n    List&lt;String&gt; hotelCodes = redisTemplate.execute(new RedisCallback&lt;List&lt;String&gt;&gt;() {\r\n    \t\t\t/**\r\n    \t\t\t * Gets called by {@link RedisTemplate} with an active Redis connection. Does not need to care about activating or\r\n    \t\t\t * closing the connection or handling exceptions.\r\n    \t\t\t *\r\n    \t\t\t * @param connection active Redis connection\r\n    \t\t\t * @return a result object or {@code null} if none\r\n    \t\t\t * @throws DataAccessException\r\n    \t\t\t */\r\n    \t\t\t@Override\r\n    \t\t\tpublic List&lt;String&gt; doInRedis(RedisConnection connection) throws DataAccessException {\r\n    \t\t\t\tScanOptions options = ScanOptions.scanOptions().match(pattern).count(1).build();\r\n    \t\t\t\tCursor&lt;Map.Entry&lt;byte[], byte[]&gt;&gt; entries = connection.hScan(HASH_KEY.getBytes(), options);\r\n    \t\t\t\tList&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n    \t\t\t\tif (entries != null)\r\n    \t\t\t\t\twhile (entries.hasNext()) {\r\n    \t\t\t\t\t\tMap.Entry&lt;byte[], byte[]&gt; entry = entries.next();\r\n    \t\t\t\t\t\tbyte[] actualValue = entry.getValue();\r\n    \t\t\t\t\t\tresult.add(new String(actualValue));\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\treturn result;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\treturn hotelCodes;\r\n\r\n\r\nThen this is the complete exception I see in log.\r\n\r\n    org.springframework.data.redis.RedisConnectionFailureException: Cannot get Jedis connection; nested exception is redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool\r\n    \tat org.springframework.data.redis.connection.jedis.JedisConnectionFactory.fetchJedisConnector(JedisConnectionFactory.java:204)\r\n    \tat org.springframework.data.redis.connection.jedis.JedisConnectionFactory.getConnection(JedisConnectionFactory.java:348)\r\n    \tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:129)\r\n    \tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:92)\r\n    \tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:79)\r\n    \tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:194)\r\n    \tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:169)\r\n    \tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:157)\r\n    \tat com.hyatt.pms.jobs.dao.impl.HeartbeatRepositoryImpl.findAll(HeartbeatRepositoryImpl.java:62)\r\n    \tat com.hyatt.pms.jobs.dao.impl.HeartbeatRepositoryImpl$$FastClassBySpringCGLIB$$e3fe6169.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\r\n    \tat com.hyatt.pms.jobs.dao.impl.HeartbeatRepositoryImpl$$EnhancerBySpringCGLIB$$68719252.findAll(&lt;generated&gt;)\r\n    \tat com.hyatt.pms.jobs.processors.HeartbeatTestProcessor.processCluster(HeartbeatTestProcessor.java:54)\r\n    \tat com.hyatt.pms.jobs.processors.TestProcessor.process(TestProcessor.java:61)\r\n    \tat com.hyatt.pms.jobs.processors.HeartbeatTestProcessor.process(HeartbeatTestProcessor.java:39)\r\n    \tat com.hyatt.pms.jobs.processors.HeartbeatTestProcessor$$FastClassBySpringCGLIB$$99fdfbdc.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:669)\r\n    \tat com.hyatt.pms.jobs.processors.HeartbeatTestProcessor$$EnhancerBySpringCGLIB$$860eb7e4.process(&lt;generated&gt;)\r\n    \tat com.hyatt.pms.jobs.domain.jobs.HeartbeatJob.runHealthCheck(HeartbeatJob.java:34)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:65)\r\n    \tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n    \tat org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call$$$capture(Executors.java:511)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java)\r\n    \tat java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java)\r\n    \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n    \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Caused by: redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool\r\n    \tat redis.clients.util.Pool.getResource(Pool.java:53)\r\n    \tat redis.clients.jedis.JedisPool.getResource(JedisPool.java:226)\r\n    \tat redis.clients.jedis.JedisPool.getResource(JedisPool.java:16)\r\n    \tat org.springframework.data.redis.connection.jedis.JedisConnectionFactory.fetchJedisConnector(JedisConnectionFactory.java:194)\r\n    \t... 40 more\r\n    Caused by: redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: Read timed out\r\n    \tat redis.clients.jedis.Connection.disconnect(Connection.java:224)\r\n    \tat redis.clients.jedis.BinaryClient.disconnect(BinaryClient.java:941)\r\n    \tat redis.clients.jedis.Connection.close(Connection.java:214)\r\n    \tat redis.clients.jedis.BinaryClient.close(BinaryClient.java:947)\r\n    \tat redis.clients.jedis.Jedis.close(Jedis.java:3412)\r\n    \tat redis.clients.jedis.JedisFactory.makeObject(JedisFactory.java:117)\r\n    \tat org.apache.commons.pool2.impl.GenericObjectPool.create(GenericObjectPool.java:836)\r\n    \tat org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:434)\r\n    \tat org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:361)\r\n    \tat redis.clients.util.Pool.getResource(Pool.java:49)\r\n    \t... 43 more\r\n    Caused by: java.net.SocketTimeoutException: Read timed out\r\n    \tat java.net.SocketInputStream.socketRead0(Native Method)\r\n    \tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n    \tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n    \tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n    \tat sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\r\n    \tat sun.security.ssl.InputRecord.read(InputRecord.java:503)\r\n    \tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\r\n    \tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\r\n    \tat sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:757)\r\n    \tat sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\r\n    \tat redis.clients.util.RedisOutputStream.flushBuffer(RedisOutputStream.java:52)\r\n    \tat redis.clients.util.RedisOutputStream.flush(RedisOutputStream.java:216)\r\n    \tat redis.clients.jedis.Connection.disconnect(Connection.java:220)\r\n    \t... 52 more\r\n\r\nAnyone knows why I get this exception and how to fix it?","title":"Cannot get Jedis connection; Could not get a resource from the pool","body":"<p>I am running a batch job for every 5 minutes and I don't wanna other nodes to run the same job hence I am using Jedis lock to lock an object for 5 minutes. So that other node won't get the lock if they try to run the same job. Job started after acquiring the lock and when I try to read it from Redis I am getting the following exception saying </p>\n\n<pre><code>'Caused by: redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool\n    at redis.clients.util.Pool.getResource(Pool.java:53)\n    at redis.clients.jedis.JedisPool.getResource(JedisPool.java:226)\n    at redis.clients.jedis.JedisPool.getResource(JedisPool.java:16)\n    at org.springframework.data.redis.connection.jedis.JedisConnectionFactory.fetchJedisConnector(JedisConnectionFactory.java:194)\n    ... 40 more\nCaused by: redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: Read timed out\n    at redis.clients.jedis.Connection.disconnect(Connection.java:224)\n    at redis.clients.jedis.BinaryClient.disconnect(BinaryClient.java:941)\n    at redis.clients.jedis.Connection.close(Connection.java:214)\n    at redis.clients.jedis.BinaryClient.close(BinaryClient.java:947)\n    at redis.clients.jedis.Jedis.close(Jedis.java:3412)\n    at redis.clients.jedis.JedisFactory.makeObject(JedisFactory.java:117)\n    at org.apache.commons.pool2.impl.GenericObjectPool.create(GenericObjectPool.java:836)\n    at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:434)\n    at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:361)\n    at redis.clients.util.Pool.getResource(Pool.java:49)'\n</code></pre>\n\n<p>This is what the code I have</p>\n\n<pre><code>@Bean\npublic Jedis getJedis()\n{\n    Jedis jedis = new Jedis(this.redisHost, nteger.valueOf(this.redisPort));\n    jedis.auth(this.redisPassword);\n    return jedis;\n}\n</code></pre>\n\n<p>spring-boot Application.properties file</p>\n\n<pre><code># DATA REDIS\nspring.data.redis.repositories.enabled=true\n# REDIS (RedisProperties)\nspring.redis.host=10.160.49.22\nspring.redis.password=qweqewqw\nspring.redis.ssl=true \n#spring.redis.pool.max-active=10\n#spring.redis.pool.max-idle=10\n# spring.redis.pool.max-wait=30000\nspring.redis.port=6379\n</code></pre>\n\n<p>Job executes the following code at the start to get the lock</p>\n\n<pre><code>JedisLock jedisLock = new JedisLock(jedis, getLockName(), getTimeInMillis());\njedisLoc.acquire()\n</code></pre>\n\n<p>After that redis repository class is trying to read values for a particular pattern..</p>\n\n<pre><code>List&lt;String&gt; hotelCodes = redisTemplate.execute(new RedisCallback&lt;List&lt;String&gt;&gt;() {\n            /**\n             * Gets called by {@link RedisTemplate} with an active Redis connection. Does not need to care about activating or\n             * closing the connection or handling exceptions.\n             *\n             * @param connection active Redis connection\n             * @return a result object or {@code null} if none\n             * @throws DataAccessException\n             */\n            @Override\n            public List&lt;String&gt; doInRedis(RedisConnection connection) throws DataAccessException {\n                ScanOptions options = ScanOptions.scanOptions().match(pattern).count(1).build();\n                Cursor&lt;Map.Entry&lt;byte[], byte[]&gt;&gt; entries = connection.hScan(HASH_KEY.getBytes(), options);\n                List&lt;String&gt; result = new ArrayList&lt;&gt;();\n                if (entries != null)\n                    while (entries.hasNext()) {\n                        Map.Entry&lt;byte[], byte[]&gt; entry = entries.next();\n                        byte[] actualValue = entry.getValue();\n                        result.add(new String(actualValue));\n                    }\n\n                return result;\n            }\n        });\n        return hotelCodes;\n</code></pre>\n\n<p>Then this is the complete exception I see in log.</p>\n\n<pre><code>org.springframework.data.redis.RedisConnectionFailureException: Cannot get Jedis connection; nested exception is redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool\n    at org.springframework.data.redis.connection.jedis.JedisConnectionFactory.fetchJedisConnector(JedisConnectionFactory.java:204)\n    at org.springframework.data.redis.connection.jedis.JedisConnectionFactory.getConnection(JedisConnectionFactory.java:348)\n    at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:129)\n    at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:92)\n    at org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:79)\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:194)\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:169)\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:157)\n    at com.hyatt.pms.jobs.dao.impl.HeartbeatRepositoryImpl.findAll(HeartbeatRepositoryImpl.java:62)\n    at com.hyatt.pms.jobs.dao.impl.HeartbeatRepositoryImpl$$FastClassBySpringCGLIB$$e3fe6169.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\n    at com.hyatt.pms.jobs.dao.impl.HeartbeatRepositoryImpl$$EnhancerBySpringCGLIB$$68719252.findAll(&lt;generated&gt;)\n    at com.hyatt.pms.jobs.processors.HeartbeatTestProcessor.processCluster(HeartbeatTestProcessor.java:54)\n    at com.hyatt.pms.jobs.processors.TestProcessor.process(TestProcessor.java:61)\n    at com.hyatt.pms.jobs.processors.HeartbeatTestProcessor.process(HeartbeatTestProcessor.java:39)\n    at com.hyatt.pms.jobs.processors.HeartbeatTestProcessor$$FastClassBySpringCGLIB$$99fdfbdc.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:669)\n    at com.hyatt.pms.jobs.processors.HeartbeatTestProcessor$$EnhancerBySpringCGLIB$$860eb7e4.process(&lt;generated&gt;)\n    at com.hyatt.pms.jobs.domain.jobs.HeartbeatJob.runHealthCheck(HeartbeatJob.java:34)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:65)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)\n    at java.util.concurrent.Executors$RunnableAdapter.call$$$capture(Executors.java:511)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java)\n    at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)\n    at java.util.concurrent.FutureTask.run(FutureTask.java)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool\n    at redis.clients.util.Pool.getResource(Pool.java:53)\n    at redis.clients.jedis.JedisPool.getResource(JedisPool.java:226)\n    at redis.clients.jedis.JedisPool.getResource(JedisPool.java:16)\n    at org.springframework.data.redis.connection.jedis.JedisConnectionFactory.fetchJedisConnector(JedisConnectionFactory.java:194)\n    ... 40 more\nCaused by: redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: Read timed out\n    at redis.clients.jedis.Connection.disconnect(Connection.java:224)\n    at redis.clients.jedis.BinaryClient.disconnect(BinaryClient.java:941)\n    at redis.clients.jedis.Connection.close(Connection.java:214)\n    at redis.clients.jedis.BinaryClient.close(BinaryClient.java:947)\n    at redis.clients.jedis.Jedis.close(Jedis.java:3412)\n    at redis.clients.jedis.JedisFactory.makeObject(JedisFactory.java:117)\n    at org.apache.commons.pool2.impl.GenericObjectPool.create(GenericObjectPool.java:836)\n    at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:434)\n    at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:361)\n    at redis.clients.util.Pool.getResource(Pool.java:49)\n    ... 43 more\nCaused by: java.net.SocketTimeoutException: Read timed out\n    at java.net.SocketInputStream.socketRead0(Native Method)\n    at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\n    at java.net.SocketInputStream.read(SocketInputStream.java:171)\n    at java.net.SocketInputStream.read(SocketInputStream.java:141)\n    at sun.security.ssl.InputRecord.readFully(InputRecord.java:465)\n    at sun.security.ssl.InputRecord.read(InputRecord.java:503)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\n    at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:757)\n    at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\n    at redis.clients.util.RedisOutputStream.flushBuffer(RedisOutputStream.java:52)\n    at redis.clients.util.RedisOutputStream.flush(RedisOutputStream.java:216)\n    at redis.clients.jedis.Connection.disconnect(Connection.java:220)\n    ... 52 more\n</code></pre>\n\n<p>Anyone knows why I get this exception and how to fix it?</p>\n"},{"tags":["java","spring-boot","maven","junit"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693835001,"creation_date":1693820620,"answer_id":77036659,"question_id":77036584,"body_markdown":"`Class path contains multiple SLF4J bindings.` `StaticLoggerBinder` this is the root cause of the problem, to solve it you should to choice what library do you need to use for `SLF4J` `logback-classic` or `slf4j-reload4j`:\r\n\r\nTo set it can help you: \r\n\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt; or ch.qos.logback\r\n            &lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt; or logback-classic\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt; \r\n\r\n**UPDATE**\r\n\r\nOn `spring-boot-started` dependency exclude `spring-boot-starter-logging`, something like this.\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;exclusions&gt;\r\n\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t&lt;/exclusion&gt;\r\n\t\t&lt;/exclusions&gt;\r\n\t&lt;/dependency&gt;","title":"How to solve Maven clean install errors?","body":"<p><code>Class path contains multiple SLF4J bindings.</code> <code>StaticLoggerBinder</code> this is the root cause of the problem, to solve it you should to choice what library do you need to use for <code>SLF4J</code> <code>logback-classic</code> or <code>slf4j-reload4j</code>:</p>\n<p>To set it can help you:</p>\n<pre><code>&lt;exclusions&gt;\n    &lt;exclusion&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt; or ch.qos.logback\n        &lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt; or logback-classic\n    &lt;/exclusion&gt;\n&lt;/exclusions&gt; \n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>On <code>spring-boot-started</code> dependency exclude <code>spring-boot-starter-logging</code>, something like this.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":29313193,"reputation":11,"user_id":22458485,"display_name":"Jeet_dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77036659,"answer_count":1,"score":1,"last_activity_date":1693835001,"creation_date":1693819813,"question_id":77036584,"body_markdown":"The problem is the tests are running without any problem when only the tests are run. However, when I execute Maven clean install then the tests are failing and the below stack trace is generated. I have tried a few of the solutions in the stackoverflow especially related to the `multiple SLF4J bindings` but could not completely run it error free.\r\n\r\n```\r\n[INFO] -------------------------------------------------------\r\n[INFO]  T E S T S\r\n[INFO] -------------------------------------------------------\r\n[INFO] Running BatchTest\r\nSLF4J: Class path contains multiple SLF4J bindings.\r\nSLF4J: Found binding in [jar:file:/C:/Ablage/DEV/.m2/repository/ch/qos/logback/logback-classic/1.2.11/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/C:/Ablage/DEV/.m2/repository/org/slf4j/slf4j-reload4j/1.7.36/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\r\n10:12:50.390 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\r\n10:12:50.456 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\r\n10:12:50.609 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [BatchTest] from class [org.springframework.test.context.support.DefaultTestContextBootstrapper]\r\n10:12:50.761 [main] DEBUG org.springframework.test.context.support.AbstractDelegatingSmartContextLoader - Delegating to AnnotationConfigContextLoader to process context configuration [ContextConfigurationAttributes@703fa45 declaringClass = &#39;BatchTest&#39;, classes = &#39;{class xx.xx.xx.xxx.xx.xxxConfiguration, class xx.xxx.xxx.abcApp.steps.xxxConfig, class xx.xx.xx.xxx.xx.xxxConfig, class xx.xxx.xx.xxx.steps.xxxConfig, class xx.xx.xx.xxx.steps.xxConfig, class TestConfig}&#39;, locations = &#39;{}&#39;, inheritLocations = true, initializers = &#39;{}&#39;, inheritInitializers = true, name = [null], contextLoaderClass = &#39;org.springframework.test.context.ContextLoader&#39;].\r\n10:12:51.106 [main] DEBUG org.springframework.test.context.support.DefaultTestContextBootstrapper - Merging default listeners with listeners configured via @TestExecutionListeners for class [BatchTest].\r\n10:12:51.106 [main] INFO org.springframework.test.context.support.DefaultTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]\r\n10:12:51.141 [main] DEBUG org.springframework.test.context.support.DefaultTestContextBootstrapper - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom listener classes or make the default listener classes and their required dependencies available. Offending class: [org/springframework/web/context/request/RequestAttributes]\r\n10:12:51.199 [main] INFO org.springframework.test.context.support.DefaultTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@69ce14e6, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@699d96bc, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@b5de9ac, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4ecd8ab1, org.springframework.test.context.support.DirtiesContextTestExecutionListener@57bdceaa, org.springframework.test.context.transaction.TransactionalTestExecutionListener@52909a97, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@36e409e0, org.springframework.test.context.event.EventPublishingTestExecutionListener@145e958f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@2d2fc130, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@7bbdb220, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6d001fbe, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@d120d7c, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5ee77baf, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@485deee1, org.springframework.batch.test.StepScopeTestExecutionListener@25cde5bb, org.springframework.batch.test.JobScopeTestExecutionListener@38a96593]\r\n10:12:51.208 [main] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@3dfe59d7 testClass = BatchTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1be8c122 testClass = BatchTest, locations = &#39;{}&#39;, classes = &#39;{class xx.xxx.xx.xxxx.xx.xxxConfiguration, class xx.xxx.xxx.xxx.xxx.xxxConfig, class xx.xxx.xx.xxx.xx.xxxConfig, class xxConfig.class}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{localtest}&#39;, propertySourceLocations = &#39;{classpath:/src/test/resources/application-localtest.properties}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[[ImportsContextCustomizer@5d08976a key = [@org.springframework.batch.test.context.SpringBatchTest(), @org.springframework.test.context.junit.jupiter.SpringJUnitConfig(inheritInitializers=true, initializers={}, classes={}, name=&quot;&quot;, locations={}, value={xx.xxx.xx.xxx.xxx.xxxConfiguration.class}, inheritLocations=true), @org.springframework.test.context.TestExecutionListeners(inheritListeners=true, mergeMode=MERGE_WITH_DEFAULTS, listeners={org.springframework.batch.test.StepScopeTestExecutionListener.class, org.springframework.batch.test.JobScopeTestExecutionListener.class}, value={}), @org.springframework.test.context.ContextConfiguration(inheritInitializers=true, initializers={}, loader=org.springframework.test.context.ContextLoader.class, classes={}, name=&quot;&quot;, locations={}, value={}, inheritLocations=true), @org.springframework.test.context.TestPropertySource(locations={&quot;/src/test/resources/application-localtest.properties&quot;}, inheritProperties=true, value={}, properties={}, inheritLocations=true), @org.springframework.data.jpa.repository.config.EnableJpaRepositories(excludeFilters={}, enableDefaultTransactions=true, repositoryBaseClass=org.springframework.data.repository.config.DefaultRepositoryBaseClass.class, basePackageClasses={}, escapeCharacter=&#39;\\&#39;, includeFilters={}, bootstrapMode=DEFAULT, repositoryFactoryBeanClass=org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.class, entityManagerFactoryRef=&quot;entityManagerFactory&quot;, queryLookupStrategy=CREATE_IF_NOT_FOUND, namedQueriesLocation=&quot;&quot;, transactionManagerRef=&quot;transactionManager&quot;, basePackages={}, repositoryImplementationPostfix=&quot;Impl&quot;, considerNestedRepositories=false, value={&quot;de.xxx.xxx.xxx.db&quot;}), @org.springframework.test.context.ActiveProfiles(profiles={}, resolver=org.springframework.test.context.ActiveProfilesResolver.class, value={&quot;localtest&quot;}, inheritProfiles=true), @org.springframework.context.annotation.Import(value={org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar.class})]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@70091872, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2b441e56, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@c60ccbaf, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@6a7a1a0d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@766b6d02, org.springframework.batch.test.context.BatchTestContextCustomizer@5e98032e], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].\r\n10:12:51.261 [main] DEBUG org.springframework.test.context.support.AbstractDelegatingSmartContextLoader - Delegating to AnnotationConfigContextLoader to load context from [MergedContextConfiguration@1be8c122 testClass = BatchTest, locations = &#39;{}&#39;, classes = &#39;{class xxx.xxxConfiguration, class xx.xx.xxx.xxx.xxx.Config}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{localtest}&#39;, propertySourceLocations = &#39;{classpath:/src/test/resources/application-localtest.properties}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[[ImportsContextCustomizer@5d08976a key = [@org.springframework.batch.test.context.SpringBatchTest(), @org.springframework.test.context.junit.jupiter.SpringJUnitConfig(inheritInitializers=true, initializers={}, classes={}, name=&quot;&quot;, locations={}, value={xx.xxx.xx.xxx.xxx.Configuration.class}, inheritLocations=true), @org.springframework.test.context.TestExecutionListeners(inheritListeners=true, mergeMode=MERGE_WITH_DEFAULTS, listeners={org.springframework.batch.test.StepScopeTestExecutionListener.class, org.springframework.batch.test.JobScopeTestExecutionListener.class}, value={}), @org.springframework.test.context.ContextConfiguration(inheritInitializers=true, initializers={}, loader=org.springframework.test.context.ContextLoader.class, classes={}, name=&quot;&quot;, locations={}, value={}, inheritLocations=true), @org.springframework.test.context.TestPropertySource(locations={&quot;/src/test/resources/application-localtest.properties&quot;}, inheritProperties=true, value={}, properties={}, inheritLocations=true)\r\n\r\n```\r\nMy pom.xml looks like the following -\r\n\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;xx.xxx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent-pom&lt;/artifactId&gt;\r\n        &lt;version&gt;1.1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;xx.xxx.Appxx.xxxx&lt;/groupId&gt;\r\n    &lt;artifactId&gt;xxxx&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.2-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;AbcApplication&lt;/name&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;properties&gt;\r\n\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;version.maven.compiler&gt;3.8.1&lt;/version.maven.compiler&gt;\r\n        &lt;version.maven-assembly-plugin&gt;3.3.0&lt;/version.maven-assembly-plugin&gt;\r\n        &lt;version.spring-boot-maven-plugin&gt;2.6.4&lt;/version.spring-boot-maven-plugin&gt;\r\n        &lt;version.maven-jar-plugin&gt;3.2.2&lt;/version.maven-jar-plugin&gt;\r\n\r\n        &lt;spring-boot-dependencies.version&gt;2.7.9&lt;/spring-boot-dependencies.version&gt;\r\n        &lt;db2jcc4.version&gt;4.26.14&lt;/db2jcc4.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;hibernate.core.version&gt;5.6.7.Final&lt;/hibernate.core.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-boot-dependencies.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-settings&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.7&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.7&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n                &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;plexus-utils&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shared-utils&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n                &lt;version&gt;5.3.26&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.2&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.15.0-rc1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n            &lt;version&gt;20230227&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${hibernate.core.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.ibm.db2.jdbc.type4&lt;/groupId&gt;\r\n            &lt;artifactId&gt;db2jcc4&lt;/artifactId&gt;\r\n            &lt;version&gt;${db2jcc4.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.ibm.db2.jdbc.type4&lt;/groupId&gt;\r\n            &lt;artifactId&gt;db2jcc_license_cisuz&lt;/artifactId&gt;\r\n            &lt;version&gt;${db2jcc4.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-batch-test&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;5.8.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;5.8.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;!-- build plugins --&gt;\r\n\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${version.maven.compiler}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\r\n                    &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;attach-sources&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;jar&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${version.maven-assembly-plugin}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;descriptorRefs&gt;\r\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                    &lt;/descriptorRefs&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;make-dist&lt;/id&gt; &lt;!-- this is used for inheritance merges --&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt; &lt;!-- bind to the packaging phase --&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;!-- Configures the used assembly descriptor --&gt;\r\n                            &lt;descriptors&gt;\r\n                                &lt;descriptor&gt;xxxx/xxx.xml&lt;/descriptor&gt;\r\n                            &lt;/descriptors&gt;\r\n                            &lt;finalName&gt;distribution&lt;/finalName&gt;\r\n                            &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.6&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;!-- Configures the created archive --&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;!-- Configures the content of the created manifest --&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;!-- Adds the classpath to the created manifest --&gt;\r\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                            &lt;!-- Workaround for Maven bug #MJAR-15 --&gt;\r\n                            &lt;useUniqueVersions&gt;false&lt;/useUniqueVersions&gt;\r\n                            &lt;!-- Specifies that all dependencies of our application are found from\r\n                                the lib directory. --&gt;\r\n                            &lt;classpathPrefix&gt;../lib/&lt;/classpathPrefix&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;report&lt;/id&gt;\r\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\r\n        &lt;testSourceDirectory&gt;src/test/java&lt;/testSourceDirectory&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n        &lt;testResources&gt;\r\n            &lt;testResource&gt;\r\n                &lt;directory&gt;src/test/resources&lt;/directory&gt;\r\n            &lt;/testResource&gt;\r\n            &lt;testResource&gt;\r\n                &lt;directory&gt;P:/JavaBatch/properties&lt;/directory&gt;\r\n            &lt;/testResource&gt;\r\n        &lt;/testResources&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n\r\n```\r\n\r\nThe eror that I am getting is -\r\n\r\n&gt; java.lang.ExceptionInInitializerError\r\nCaused by: org.apache.logging.log4j.LoggingException: log4j-slf4j-impl cannot be present with log4j-to-slf4j\r\n\r\n","title":"How to solve Maven clean install errors?","body":"<p>The problem is the tests are running without any problem when only the tests are run. However, when I execute Maven clean install then the tests are failing and the below stack trace is generated. I have tried a few of the solutions in the stackoverflow especially related to the <code>multiple SLF4J bindings</code> but could not completely run it error free.</p>\n<pre><code>[INFO] -------------------------------------------------------\n[INFO]  T E S T S\n[INFO] -------------------------------------------------------\n[INFO] Running BatchTest\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/C:/Ablage/DEV/.m2/repository/ch/qos/logback/logback-classic/1.2.11/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/C:/Ablage/DEV/.m2/repository/org/slf4j/slf4j-reload4j/1.7.36/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\n10:12:50.390 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\n10:12:50.456 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\n10:12:50.609 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [BatchTest] from class [org.springframework.test.context.support.DefaultTestContextBootstrapper]\n10:12:50.761 [main] DEBUG org.springframework.test.context.support.AbstractDelegatingSmartContextLoader - Delegating to AnnotationConfigContextLoader to process context configuration [ContextConfigurationAttributes@703fa45 declaringClass = 'BatchTest', classes = '{class xx.xx.xx.xxx.xx.xxxConfiguration, class xx.xxx.xxx.abcApp.steps.xxxConfig, class xx.xx.xx.xxx.xx.xxxConfig, class xx.xxx.xx.xxx.steps.xxxConfig, class xx.xx.xx.xxx.steps.xxConfig, class TestConfig}', locations = '{}', inheritLocations = true, initializers = '{}', inheritInitializers = true, name = [null], contextLoaderClass = 'org.springframework.test.context.ContextLoader'].\n10:12:51.106 [main] DEBUG org.springframework.test.context.support.DefaultTestContextBootstrapper - Merging default listeners with listeners configured via @TestExecutionListeners for class [BatchTest].\n10:12:51.106 [main] INFO org.springframework.test.context.support.DefaultTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]\n10:12:51.141 [main] DEBUG org.springframework.test.context.support.DefaultTestContextBootstrapper - Skipping candidate TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] due to a missing dependency. Specify custom listener classes or make the default listener classes and their required dependencies available. Offending class: [org/springframework/web/context/request/RequestAttributes]\n10:12:51.199 [main] INFO org.springframework.test.context.support.DefaultTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@69ce14e6, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@699d96bc, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@b5de9ac, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4ecd8ab1, org.springframework.test.context.support.DirtiesContextTestExecutionListener@57bdceaa, org.springframework.test.context.transaction.TransactionalTestExecutionListener@52909a97, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@36e409e0, org.springframework.test.context.event.EventPublishingTestExecutionListener@145e958f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@2d2fc130, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@7bbdb220, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6d001fbe, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@d120d7c, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5ee77baf, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@485deee1, org.springframework.batch.test.StepScopeTestExecutionListener@25cde5bb, org.springframework.batch.test.JobScopeTestExecutionListener@38a96593]\n10:12:51.208 [main] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@3dfe59d7 testClass = BatchTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@1be8c122 testClass = BatchTest, locations = '{}', classes = '{class xx.xxx.xx.xxxx.xx.xxxConfiguration, class xx.xxx.xxx.xxx.xxx.xxxConfig, class xx.xxx.xx.xxx.xx.xxxConfig, class xxConfig.class}', contextInitializerClasses = '[]', activeProfiles = '{localtest}', propertySourceLocations = '{classpath:/src/test/resources/application-localtest.properties}', propertySourceProperties = '{}', contextCustomizers = set[[ImportsContextCustomizer@5d08976a key = [@org.springframework.batch.test.context.SpringBatchTest(), @org.springframework.test.context.junit.jupiter.SpringJUnitConfig(inheritInitializers=true, initializers={}, classes={}, name=&quot;&quot;, locations={}, value={xx.xxx.xx.xxx.xxx.xxxConfiguration.class}, inheritLocations=true), @org.springframework.test.context.TestExecutionListeners(inheritListeners=true, mergeMode=MERGE_WITH_DEFAULTS, listeners={org.springframework.batch.test.StepScopeTestExecutionListener.class, org.springframework.batch.test.JobScopeTestExecutionListener.class}, value={}), @org.springframework.test.context.ContextConfiguration(inheritInitializers=true, initializers={}, loader=org.springframework.test.context.ContextLoader.class, classes={}, name=&quot;&quot;, locations={}, value={}, inheritLocations=true), @org.springframework.test.context.TestPropertySource(locations={&quot;/src/test/resources/application-localtest.properties&quot;}, inheritProperties=true, value={}, properties={}, inheritLocations=true), @org.springframework.data.jpa.repository.config.EnableJpaRepositories(excludeFilters={}, enableDefaultTransactions=true, repositoryBaseClass=org.springframework.data.repository.config.DefaultRepositoryBaseClass.class, basePackageClasses={}, escapeCharacter='\\', includeFilters={}, bootstrapMode=DEFAULT, repositoryFactoryBeanClass=org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.class, entityManagerFactoryRef=&quot;entityManagerFactory&quot;, queryLookupStrategy=CREATE_IF_NOT_FOUND, namedQueriesLocation=&quot;&quot;, transactionManagerRef=&quot;transactionManager&quot;, basePackages={}, repositoryImplementationPostfix=&quot;Impl&quot;, considerNestedRepositories=false, value={&quot;de.xxx.xxx.xxx.db&quot;}), @org.springframework.test.context.ActiveProfiles(profiles={}, resolver=org.springframework.test.context.ActiveProfilesResolver.class, value={&quot;localtest&quot;}, inheritProfiles=true), @org.springframework.context.annotation.Import(value={org.springframework.data.jpa.repository.config.JpaRepositoriesRegistrar.class})]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@70091872, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2b441e56, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@c60ccbaf, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@6a7a1a0d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@766b6d02, org.springframework.batch.test.context.BatchTestContextCustomizer@5e98032e], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].\n10:12:51.261 [main] DEBUG org.springframework.test.context.support.AbstractDelegatingSmartContextLoader - Delegating to AnnotationConfigContextLoader to load context from [MergedContextConfiguration@1be8c122 testClass = BatchTest, locations = '{}', classes = '{class xxx.xxxConfiguration, class xx.xx.xxx.xxx.xxx.Config}', contextInitializerClasses = '[]', activeProfiles = '{localtest}', propertySourceLocations = '{classpath:/src/test/resources/application-localtest.properties}', propertySourceProperties = '{}', contextCustomizers = set[[ImportsContextCustomizer@5d08976a key = [@org.springframework.batch.test.context.SpringBatchTest(), @org.springframework.test.context.junit.jupiter.SpringJUnitConfig(inheritInitializers=true, initializers={}, classes={}, name=&quot;&quot;, locations={}, value={xx.xxx.xx.xxx.xxx.Configuration.class}, inheritLocations=true), @org.springframework.test.context.TestExecutionListeners(inheritListeners=true, mergeMode=MERGE_WITH_DEFAULTS, listeners={org.springframework.batch.test.StepScopeTestExecutionListener.class, org.springframework.batch.test.JobScopeTestExecutionListener.class}, value={}), @org.springframework.test.context.ContextConfiguration(inheritInitializers=true, initializers={}, loader=org.springframework.test.context.ContextLoader.class, classes={}, name=&quot;&quot;, locations={}, value={}, inheritLocations=true), @org.springframework.test.context.TestPropertySource(locations={&quot;/src/test/resources/application-localtest.properties&quot;}, inheritProperties=true, value={}, properties={}, inheritLocations=true)\n\n</code></pre>\n<p>My pom.xml looks like the following -</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;xx.xxx&lt;/groupId&gt;\n        &lt;artifactId&gt;parent-pom&lt;/artifactId&gt;\n        &lt;version&gt;1.1&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;xx.xxx.Appxx.xxxx&lt;/groupId&gt;\n    &lt;artifactId&gt;xxxx&lt;/artifactId&gt;\n    &lt;version&gt;2.0.2-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;AbcApplication&lt;/name&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;properties&gt;\n\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;version.maven.compiler&gt;3.8.1&lt;/version.maven.compiler&gt;\n        &lt;version.maven-assembly-plugin&gt;3.3.0&lt;/version.maven-assembly-plugin&gt;\n        &lt;version.spring-boot-maven-plugin&gt;2.6.4&lt;/version.spring-boot-maven-plugin&gt;\n        &lt;version.maven-jar-plugin&gt;3.2.2&lt;/version.maven-jar-plugin&gt;\n\n        &lt;spring-boot-dependencies.version&gt;2.7.9&lt;/spring-boot-dependencies.version&gt;\n        &lt;db2jcc4.version&gt;4.26.14&lt;/db2jcc4.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;hibernate.core.version&gt;5.6.7.Final&lt;/hibernate.core.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-boot-dependencies.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-settings&lt;/artifactId&gt;\n                &lt;version&gt;3.8.7&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\n                &lt;version&gt;3.8.7&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n                &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n                &lt;version&gt;2.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\n                &lt;artifactId&gt;plexus-utils&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shared-utils&lt;/artifactId&gt;\n                &lt;version&gt;3.3.3&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n                &lt;version&gt;5.3.26&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;5.2.2&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.15.0-rc1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20230227&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.core.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.ibm.db2.jdbc.type4&lt;/groupId&gt;\n            &lt;artifactId&gt;db2jcc4&lt;/artifactId&gt;\n            &lt;version&gt;${db2jcc4.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.ibm.db2.jdbc.type4&lt;/groupId&gt;\n            &lt;artifactId&gt;db2jcc_license_cisuz&lt;/artifactId&gt;\n            &lt;version&gt;${db2jcc4.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n            &lt;version&gt;RELEASE&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-batch-test&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;5.8.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;5.8.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;!-- build plugins --&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${version.maven.compiler}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\n                    &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;attach-sources&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;jar&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${version.maven-assembly-plugin}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-dist&lt;/id&gt; &lt;!-- this is used for inheritance merges --&gt;\n                        &lt;phase&gt;package&lt;/phase&gt; &lt;!-- bind to the packaging phase --&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;!-- Configures the used assembly descriptor --&gt;\n                            &lt;descriptors&gt;\n                                &lt;descriptor&gt;xxxx/xxx.xml&lt;/descriptor&gt;\n                            &lt;/descriptors&gt;\n                            &lt;finalName&gt;distribution&lt;/finalName&gt;\n                            &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!-- Configures the created archive --&gt;\n                    &lt;archive&gt;\n                        &lt;!-- Configures the content of the created manifest --&gt;\n                        &lt;manifest&gt;\n                            &lt;!-- Adds the classpath to the created manifest --&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;!-- Workaround for Maven bug #MJAR-15 --&gt;\n                            &lt;useUniqueVersions&gt;false&lt;/useUniqueVersions&gt;\n                            &lt;!-- Specifies that all dependencies of our application are found from\n                                the lib directory. --&gt;\n                            &lt;classpathPrefix&gt;../lib/&lt;/classpathPrefix&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0-M5&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;report&lt;/id&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\n        &lt;testSourceDirectory&gt;src/test/java&lt;/testSourceDirectory&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;testResources&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;src/test/resources&lt;/directory&gt;\n            &lt;/testResource&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;P:/JavaBatch/properties&lt;/directory&gt;\n            &lt;/testResource&gt;\n        &lt;/testResources&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n\n</code></pre>\n<p>The eror that I am getting is -</p>\n<blockquote>\n<p>java.lang.ExceptionInInitializerError\nCaused by: org.apache.logging.log4j.LoggingException: log4j-slf4j-impl cannot be present with log4j-to-slf4j</p>\n</blockquote>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1693828169,"post_id":77037391,"comment_id":135807395,"body_markdown":"Don&#39;t use db functions in jpql. Convert the values inside of your application to the correct type","body":"Don&#39;t use db functions in jpql. Convert the values inside of your application to the correct type"},{"owner":{"account_id":1055119,"reputation":414,"user_id":1058027,"accept_rate":80,"display_name":"Kevin"},"score":0,"creation_date":1693829690,"post_id":77037391,"comment_id":135807692,"body_markdown":"Hi @Jens, thanks for your reply. any particular reason for that ?","body":"Hi @Jens, thanks for your reply. any particular reason for that ?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1693830118,"post_id":77037391,"comment_id":135807772,"body_markdown":"As you can see in your example, it is much easier to control the conversation in java than in sql. Also I am not sure if this function is sql standard and works on all rdbms","body":"As you can see in your example, it is much easier to control the conversation in java than in sql. Also I am not sure if this function is sql standard and works on all rdbms"},{"owner":{"account_id":1055119,"reputation":414,"user_id":1058027,"accept_rate":80,"display_name":"Kevin"},"score":0,"creation_date":1693831124,"post_id":77037391,"comment_id":135807989,"body_markdown":"Yeah understand. We are using oracle DB, and this works in another project. Im not sure why it does not work in my project.","body":"Yeah understand. We are using oracle DB, and this works in another project. Im not sure why it does not work in my project."}],"answers":[{"tags":[],"owner":{"account_id":1055119,"reputation":414,"user_id":1058027,"accept_rate":80,"display_name":"Kevin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693834894,"creation_date":1693834894,"answer_id":77038231,"question_id":77037391,"body_markdown":"As @Jen mentioned, its better doing data conversion at java code level. However my issue was passing null instead of empty to TO_TIMESTAMP function. ","title":"ORA-00932: inconsistent datatypes: expected - got BINARY HIBERNATE","body":"<p>As @Jen mentioned, its better doing data conversion at java code level. However my issue was passing null instead of empty to TO_TIMESTAMP function.</p>\n"}],"owner":{"account_id":1055119,"reputation":414,"user_id":1058027,"accept_rate":80,"display_name":"Kevin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693834950,"creation_date":1693827453,"question_id":77037391,"body_markdown":"I get  ORA-00932: inconsistent datatypes: expected - got BINARY  when im trying to execute a JQPL which has TO_TIMESTAMP in the query.\r\n productDate is being passed as null to the menthod. ( This is not the\r\n complete query)\r\n\r\n    @Query(value = &quot;SELECT COUNT(ID) FROM Products products &quot; \r\n    \t\t+ &quot; AND (:productDate IS NULL OR header.productDate &lt;= TO_TIMESTAMP(:productDate, &#39;DD/MM/YYYY&#39;) )&quot; \r\n    int getProductsCountByDate(@Param(&quot;productDate&quot;) String productDate)\r\n\r\nWhen I replace `:productDate` inside `TO_TIMESTAMP` with a empty value(&#39;&#39;), it does not give the error. What I understand is when productDate is null, the application gives the above exception. Any clue to fix the error would be highly appreciated. \r\n\r\n","title":"ORA-00932: inconsistent datatypes: expected - got BINARY HIBERNATE","body":"<p>I get  ORA-00932: inconsistent datatypes: expected - got BINARY  when im trying to execute a JQPL which has TO_TIMESTAMP in the query.\nproductDate is being passed as null to the menthod. ( This is not the\ncomplete query)</p>\n<pre><code>@Query(value = &quot;SELECT COUNT(ID) FROM Products products &quot; \n        + &quot; AND (:productDate IS NULL OR header.productDate &lt;= TO_TIMESTAMP(:productDate, 'DD/MM/YYYY') )&quot; \nint getProductsCountByDate(@Param(&quot;productDate&quot;) String productDate)\n</code></pre>\n<p>When I replace <code>:productDate</code> inside <code>TO_TIMESTAMP</code> with a empty value(''), it does not give the error. What I understand is when productDate is null, the application gives the above exception. Any clue to fix the error would be highly appreciated.</p>\n"},{"tags":["java","spring-boot","junit5","spring-test"],"comments":[{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":0,"creation_date":1693835274,"post_id":77038197,"comment_id":135808800,"body_markdown":"[assertEquals](https://junit.org/junit5/docs/5.0.1/api/org/junit/jupiter/api/Assertions.html#assertEquals-byte-byte-java.lang.String-)","body":"<a href=\"https://junit.org/junit5/docs/5.0.1/api/org/junit/jupiter/api/Assertions.html#assertEquals-byte-byte-java.lang.String-\" rel=\"nofollow noreferrer\">assertEquals</a>"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1693836098,"post_id":77038197,"comment_id":135808963,"body_markdown":"How are you running these tests? In your IDE, the results will probably show up in a window somewhere. Command line or on CI? Then you&#39;ll probably need to look at JUnit&#39;s result XML file. CI tools like Jenkins have built-in options for that.","body":"How are you running these tests? In your IDE, the results will probably show up in a window somewhere. Command line or on CI? Then you&#39;ll probably need to look at JUnit&#39;s result XML file. CI tools like Jenkins have built-in options for that."},{"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"score":0,"creation_date":1693837606,"post_id":77038197,"comment_id":135809263,"body_markdown":"@Jorn I use cli from bash on linux, and use gradle configuration files. @jhamon i try use `withFailMessage` but the custom text is not show.","body":"@Jorn I use cli from bash on linux, and use gradle configuration files. @jhamon i try use <code>withFailMessage</code> but the custom text is not show."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1693837780,"post_id":77038197,"comment_id":135809292,"body_markdown":"Gradle will produce a file with the test results. You can configure which files and where they end up in the Gradle `test` task.","body":"Gradle will produce a file with the test results. You can configure which files and where they end up in the Gradle <code>test</code> task."},{"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"score":0,"creation_date":1693841020,"post_id":77038197,"comment_id":135809958,"body_markdown":"@Jorn yes, when add `showCauses`, `showExceptions` and `showStackTraces` in `build.gradle` appears the `expected` and `but was` values, but only in the xml report file. Is it possible for this to appear in the terminal as well? so you don&#39;t have to open multiple files every time errors are generated.","body":"@Jorn yes, when add <code>showCauses</code>, <code>showExceptions</code> and <code>showStackTraces</code> in <code>build.gradle</code> appears the <code>expected</code> and <code>but was</code> values, but only in the xml report file. Is it possible for this to appear in the terminal as well? so you don&#39;t have to open multiple files every time errors are generated."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1693841587,"post_id":77038197,"comment_id":135810057,"body_markdown":"I think Gradle is to blame here, not JUnit. See https://stackoverflow.com/questions/40954017/gradle-how-to-get-output-from-test-stderr-stdout-into-console","body":"I think Gradle is to blame here, not JUnit. See <a href=\"https://stackoverflow.com/questions/40954017/gradle-how-to-get-output-from-test-stderr-stdout-into-console\" title=\"gradle how to get output from test stderr stdout into console\">stackoverflow.com/questions/40954017/&hellip;</a>"},{"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"score":1,"creation_date":1693848845,"post_id":77038197,"comment_id":135811245,"body_markdown":"Thanks @Robert, i solve this using `outputs.upToDateWhen` and `showStandardStreams` :)","body":"Thanks @Robert, i solve this using <code>outputs.upToDateWhen</code> and <code>showStandardStreams</code> :)"}],"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1693841094,"answer_count":0,"score":0,"last_activity_date":1693834625,"creation_date":1693834625,"question_id":77038197,"body_markdown":"Have a Spring Boot project with Spring test, jUnit5 and 100 tests, but fails only one in a large flow, replicating the problem manually would be a very lengthy and tedious task. Is there a way to display the expected value and the failed value when using assertThat?, by example:\r\n\r\n```java\r\nassertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.CREATED);\r\n```\r\n\r\nIf it fails I would like to see in the command console the original response value from the http server.\r\n\r\nFrom my build.gradle configuration files I indicated that all the items that have been executed and their results should be shown:\r\n\r\n\r\n```gradle\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n\r\n\ttestLogging {\r\n\t\tevents(&quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;)\r\n\t}\r\n}\r\n```\r\n\r\nBut I would also like to see the content of what failed to correct where applicable only:\r\n\r\n```bash\r\n$ ./gradlew test\r\n&gt; Task :test\r\nDemoControllerTest &gt; test1() PASSED\r\nDemoControllerTest &gt; test2() PASSED\r\n...\r\nDemoControllerTest &gt; test88() PASSED\r\nDemoControllerTest &gt; test99() FAILED\r\n...\r\n```\r\n\r\nI want to see why test 99 failed, what was the response message from the server, if it was a 500 or 404 or 403 error, etc. I would like the same for the rest of the text type verifications, for example to evaluate the http response bodies.","title":"How to show failed values on test junit 5?","body":"<p>Have a Spring Boot project with Spring test, jUnit5 and 100 tests, but fails only one in a large flow, replicating the problem manually would be a very lengthy and tedious task. Is there a way to display the expected value and the failed value when using assertThat?, by example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.CREATED);\n</code></pre>\n<p>If it fails I would like to see in the command console the original response value from the http server.</p>\n<p>From my build.gradle configuration files I indicated that all the items that have been executed and their results should be shown:</p>\n<pre><code>tasks.named('test') {\n    useJUnitPlatform()\n\n    testLogging {\n        events(&quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;)\n    }\n}\n</code></pre>\n<p>But I would also like to see the content of what failed to correct where applicable only:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ ./gradlew test\n&gt; Task :test\nDemoControllerTest &gt; test1() PASSED\nDemoControllerTest &gt; test2() PASSED\n...\nDemoControllerTest &gt; test88() PASSED\nDemoControllerTest &gt; test99() FAILED\n...\n</code></pre>\n<p>I want to see why test 99 failed, what was the response message from the server, if it was a 500 or 404 or 403 error, etc. I would like the same for the rest of the text type verifications, for example to evaluate the http response bodies.</p>\n"},{"tags":["java","solr","nosql"],"owner":{"account_id":8286703,"reputation":1,"user_id":6231516,"display_name":"Alexander Tsukanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693834431,"creation_date":1693834234,"question_id":77038159,"body_markdown":"I&#39;m currently using SOLR 6.6 and encountering an issue. Whenever I use the !join operation in conjunction with facets, my SOLR server crashes. \r\n\r\nHere is a query:\r\n\r\n    {!join from=some_core_id to=this_core_id fromIndex=some_core}*:*\r\n\r\nHas anyone else experienced this problem or have any insights into why this might be happening? Any help would be greatly appreciated.\r\n\r\nAfter some time I have next error appears on some_core:\r\n\r\n\r\n```\r\n{\r\n  &quot;responseHeader&quot;:{\r\n    &quot;status&quot;:500,\r\n    &quot;QTime&quot;:1},\r\n  &quot;error&quot;:{\r\n    &quot;metadata&quot;:[\r\n      &quot;error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;,\r\n      &quot;root-error-class&quot;,&quot;org.apache.lucene.store.AlreadyClosedException&quot;],\r\n    &quot;msg&quot;:&quot;Error opening new searcher&quot;,\r\n    &quot;trace&quot;:&quot;org.apache.solr.common.SolrException: Error opening new searcher\\n\\tat org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:2069)\\n\\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:2189)\\n\\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1926)\\n\\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1826)\\n\\tat org.apache.solr.request.SolrQueryRequestBase.getSearcher(SolrQueryRequestBase.java:127)\\n\\tat org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:310)\\n\\tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:296)\\n\\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:173)\\n\\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:2477)\\n\\tat org.apache.solr.servlet.HttpSolrCall.execute(HttpSolrCall.java:724)\\n\\tat org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:530)\\n\\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:361)\\n\\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)\\n\\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1691)\\n\\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:582)\\n\\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\\n\\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\\n\\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\\n\\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)\\n\\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)\\n\\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\\n\\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)\\n\\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\\n\\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)\\n\\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)\\n\\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\\n\\tat org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:335)\\n\\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\\n\\tat org.eclipse.jetty.server.Server.handle(Server.java:534)\\n\\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\\n\\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\\n\\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\\n\\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\\n\\tat org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\\n\\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\\n\\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\\n\\tat java.lang.Thread.run(Thread.java:750)\\nCaused by: org.apache.lucene.store.AlreadyClosedException: Already closed\\n\\tat org.apache.solr.core.CachingDirectoryFactory.get(CachingDirectoryFactory.java:336)\\n\\tat org.apache.solr.core.SolrCore.getNewIndexDir(SolrCore.java:353)\\n\\tat org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1951)\\n\\t... 39 more\\n&quot;,\r\n    &quot;code&quot;:500}}\r\n```\r\nThe solution only is to restart SOLR server.\r\nThe **same query without Facets** works fine.\r\n\r\nThank you in advance!\r\n\r\n\r\n\r\n\r\nPut the join query to filter query. The result is the same.","title":"SOLR 6.6 crashes when using !join with facets","body":"<p>I'm currently using SOLR 6.6 and encountering an issue. Whenever I use the !join operation in conjunction with facets, my SOLR server crashes.</p>\n<p>Here is a query:</p>\n<pre><code>{!join from=some_core_id to=this_core_id fromIndex=some_core}*:*\n</code></pre>\n<p>Has anyone else experienced this problem or have any insights into why this might be happening? Any help would be greatly appreciated.</p>\n<p>After some time I have next error appears on some_core:</p>\n<pre><code>{\n  &quot;responseHeader&quot;:{\n    &quot;status&quot;:500,\n    &quot;QTime&quot;:1},\n  &quot;error&quot;:{\n    &quot;metadata&quot;:[\n      &quot;error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;,\n      &quot;root-error-class&quot;,&quot;org.apache.lucene.store.AlreadyClosedException&quot;],\n    &quot;msg&quot;:&quot;Error opening new searcher&quot;,\n    &quot;trace&quot;:&quot;org.apache.solr.common.SolrException: Error opening new searcher\\n\\tat org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:2069)\\n\\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:2189)\\n\\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1926)\\n\\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1826)\\n\\tat org.apache.solr.request.SolrQueryRequestBase.getSearcher(SolrQueryRequestBase.java:127)\\n\\tat org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:310)\\n\\tat org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:296)\\n\\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:173)\\n\\tat org.apache.solr.core.SolrCore.execute(SolrCore.java:2477)\\n\\tat org.apache.solr.servlet.HttpSolrCall.execute(HttpSolrCall.java:724)\\n\\tat org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:530)\\n\\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:361)\\n\\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)\\n\\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1691)\\n\\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:582)\\n\\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\\n\\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\\n\\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\\n\\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)\\n\\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)\\n\\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\\n\\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)\\n\\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\\n\\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)\\n\\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)\\n\\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\\n\\tat org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:335)\\n\\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\\n\\tat org.eclipse.jetty.server.Server.handle(Server.java:534)\\n\\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\\n\\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\\n\\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)\\n\\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)\\n\\tat org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\\n\\tat org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\\n\\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\\n\\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\\n\\tat java.lang.Thread.run(Thread.java:750)\\nCaused by: org.apache.lucene.store.AlreadyClosedException: Already closed\\n\\tat org.apache.solr.core.CachingDirectoryFactory.get(CachingDirectoryFactory.java:336)\\n\\tat org.apache.solr.core.SolrCore.getNewIndexDir(SolrCore.java:353)\\n\\tat org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1951)\\n\\t... 39 more\\n&quot;,\n    &quot;code&quot;:500}}\n</code></pre>\n<p>The solution only is to restart SOLR server.\nThe <strong>same query without Facets</strong> works fine.</p>\n<p>Thank you in advance!</p>\n<p>Put the join query to filter query. The result is the same.</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":24224809,"reputation":363,"user_id":18179479,"display_name":"Mircea Sirghi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693832699,"creation_date":1693813056,"answer_id":77035895,"question_id":77035237,"body_markdown":"Of course it is not working even with @Transactional because all you do is to add the reference of your entities to a model and return. Your transaction gets closed and your objects are accessed afterwards when constructing the View. In your case you need to fetch eagerly or map to a Dto inside `allCustomerInfo` this way it should work. ","title":"LazyInitializationException: failed to lazily initialize a collection of role despite using @Transactional","body":"<p>Of course it is not working even with @Transactional because all you do is to add the reference of your entities to a model and return. Your transaction gets closed and your objects are accessed afterwards when constructing the View. In your case you need to fetch eagerly or map to a Dto inside <code>allCustomerInfo</code> this way it should work.</p>\n"}],"owner":{"account_id":29360632,"reputation":1,"user_id":22495435,"display_name":"KimChung"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693834206,"creation_date":1693805023,"question_id":77035237,"body_markdown":"I declared @Transactional but still got the error failed to lazily initialize a collection of role:    fa.training.model.KhachHang.suDungMay, could not initialize proxy - no Session.\r\n\r\nSpecifically: in the AllCustomerInfoController class, I&#39;m looking to get a list of all customers that use SuDungMay and SuDungDichVu:\r\n\r\n    @Controller\r\n    public class AllCustomerInfoController {\r\n    \r\n    \t@Autowired\r\n    \tprivate KhachHangRepository khachHangRepository;\r\n    \r\n    \t@GetMapping(value = &quot;/&quot;)\r\n    \t@Transactional\r\n    \tpublic String allCustomerInfo(Model model) {\r\n    \t\tList&lt;KhachHang&gt; listKhachHang = khachHangRepository.findAll();\r\n    \t\tmodel.addAttribute(&quot;listAllCustomer&quot;, listKhachHang);\r\n    \t\treturn &quot;allcustomerinfo&quot;;\r\n    \t}\r\n    }\r\n\r\nMy Entity classes:\r\n\r\n    @Entity\r\n    public class KhachHang {\r\n    \r\n    \t@Id\r\n    \tprivate String maKh;\r\n    \tprivate String tenKh;\r\n    \tprivate String diaChi;\r\n    \tprivate String sdt;\r\n    \tprivate String email;\r\n    \t@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;khachHang&quot;)\r\n    \tprivate List&lt;SuDungMay&gt; suDungMay;\r\n    \t@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;khachHang&quot;)\r\n    \tprivate List&lt;SuDungDichVu&gt; suDungDichVu;\r\n    }\r\n    \r\n    @Entity\r\n    public class SuDungDichVu {\r\n    \t@Valid\r\n    \t@EmbeddedId\r\n    \tprivate SuDungDichVuId suDungDichVuId;\r\n    \tprivate int soLuong;\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;maKh&quot;)\r\n    \t@MapsId(value = &quot;maKh&quot;)\r\n    \tprivate KhachHang khachHang;\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;maDv&quot;)\r\n    \t@MapsId(value = &quot;maDv&quot;)\r\n    \tprivate DichVu dichVu;\r\n    }\r\n    \r\n    @Entity\r\n    public class SuDungMay {\r\n    \t@EmbeddedId\r\n    \t@Valid\r\n    \tprivate SuDungMayId suDungMayId;\r\n    \tprivate double thoiGianSd;\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;maKh&quot;)\r\n    \t@MapsId(value = &quot;maKh&quot;)\r\n    \tprivate KhachHang khachHang;\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;maMay&quot;)\r\n    \t@MapsId(value = &quot;maMay&quot;)\r\n    \tprivate May may;\r\n    }\r\n\r\n\r\nHow to get the customer list containing the list SuDungMay and SuDungDichVu without lazy error, thanks!\\`","title":"LazyInitializationException: failed to lazily initialize a collection of role despite using @Transactional","body":"<p>I declared @Transactional but still got the error failed to lazily initialize a collection of role:    fa.training.model.KhachHang.suDungMay, could not initialize proxy - no Session.</p>\n<p>Specifically: in the AllCustomerInfoController class, I'm looking to get a list of all customers that use SuDungMay and SuDungDichVu:</p>\n<pre><code>@Controller\npublic class AllCustomerInfoController {\n\n    @Autowired\n    private KhachHangRepository khachHangRepository;\n\n    @GetMapping(value = &quot;/&quot;)\n    @Transactional\n    public String allCustomerInfo(Model model) {\n        List&lt;KhachHang&gt; listKhachHang = khachHangRepository.findAll();\n        model.addAttribute(&quot;listAllCustomer&quot;, listKhachHang);\n        return &quot;allcustomerinfo&quot;;\n    }\n}\n</code></pre>\n<p>My Entity classes:</p>\n<pre><code>@Entity\npublic class KhachHang {\n\n    @Id\n    private String maKh;\n    private String tenKh;\n    private String diaChi;\n    private String sdt;\n    private String email;\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;khachHang&quot;)\n    private List&lt;SuDungMay&gt; suDungMay;\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;khachHang&quot;)\n    private List&lt;SuDungDichVu&gt; suDungDichVu;\n}\n\n@Entity\npublic class SuDungDichVu {\n    @Valid\n    @EmbeddedId\n    private SuDungDichVuId suDungDichVuId;\n    private int soLuong;\n    @ManyToOne\n    @JoinColumn(name = &quot;maKh&quot;)\n    @MapsId(value = &quot;maKh&quot;)\n    private KhachHang khachHang;\n    @ManyToOne\n    @JoinColumn(name = &quot;maDv&quot;)\n    @MapsId(value = &quot;maDv&quot;)\n    private DichVu dichVu;\n}\n\n@Entity\npublic class SuDungMay {\n    @EmbeddedId\n    @Valid\n    private SuDungMayId suDungMayId;\n    private double thoiGianSd;\n    @ManyToOne\n    @JoinColumn(name = &quot;maKh&quot;)\n    @MapsId(value = &quot;maKh&quot;)\n    private KhachHang khachHang;\n    @ManyToOne\n    @JoinColumn(name = &quot;maMay&quot;)\n    @MapsId(value = &quot;maMay&quot;)\n    private May may;\n}\n</code></pre>\n<p>How to get the customer list containing the list SuDungMay and SuDungDichVu without lazy error, thanks!`</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1693826506,"post_id":77037286,"comment_id":135807073,"body_markdown":"What have you tried so far?","body":"What have you tried so far?"},{"owner":{"account_id":25531475,"reputation":47,"user_id":19319419,"display_name":"JD_UA"},"score":0,"creation_date":1693826767,"post_id":77037286,"comment_id":135807118,"body_markdown":"a lot of regex and still stuck on it","body":"a lot of regex and still stuck on it"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1693832268,"post_id":77037286,"comment_id":135808204,"body_markdown":"Do you have to do this with a single regular expression?  What’s wrong with `if (line.startsWith(&quot;Received request with messageId:test, clientId:&quot;))`?","body":"Do you have to do this with a single regular expression?  What’s wrong with <code>if (line.startsWith(&quot;Received request with messageId:test, clientId:&quot;))</code>?"},{"owner":{"account_id":25531475,"reputation":47,"user_id":19319419,"display_name":"JD_UA"},"score":0,"creation_date":1693832765,"post_id":77037286,"comment_id":135808300,"body_markdown":"it is a log with huge text, so it does not work in my case","body":"it is a log with huge text, so it does not work in my case"}],"answers":[{"tags":[],"owner":{"account_id":24911937,"reputation":587,"user_id":18781392,"display_name":"Achraf Ben Salah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693827298,"creation_date":1693827298,"answer_id":77037375,"question_id":77037286,"body_markdown":"You can use this regex to match the specified string pattern\r\n\r\n    Received request with messageId:test, clientId:[\\\\w-]+ has been processed\r\n\r\nFull code for Java language :\r\n\r\n    import java.util.regex.*;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            // Your larger text\r\n            String largerText = &quot;Received request with messageId:test, clientId:7da6554c-e3ed-49ed-9a7f-f810f98ceb7f has been processed&quot;;\r\n    \r\n            // Define the regular expression pattern\r\n            String pattern = &quot;Received request with messageId:test, clientId:[\\\\w-]+ has been processed&quot;;\r\n    \r\n            // Create a Pattern object\r\n            Pattern regex = Pattern.compile(pattern);\r\n    \r\n            // Create a Matcher object\r\n            Matcher matcher = regex.matcher(largerText);\r\n    \r\n            // Check if a match was found\r\n            if (matcher.find()) {\r\n                String matchedText = matcher.group();\r\n                System.out.println(&quot;Match found: &quot; + matchedText);\r\n            } else {\r\n                System.out.println(&quot;No match found&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n**Output :**\r\n\r\n    Match found: Received request with messageId:test, clientId:7da6554c-e3ed-49ed-9a7f-f810f98ceb7f has been processed\r\n\r\n**Explanation:** \r\n\r\n**pattern :** is the regular expression pattern that looks for the fixed part &quot;Received request with messageId:test, clientId:&quot; followed by one or more word characters (\\\\w) and hyphens (-) for the UUID.","title":"Regex string match uuid beetwin the words","body":"<p>You can use this regex to match the specified string pattern</p>\n<pre><code>Received request with messageId:test, clientId:[\\\\w-]+ has been processed\n</code></pre>\n<p>Full code for Java language :</p>\n<pre><code>import java.util.regex.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Your larger text\n        String largerText = &quot;Received request with messageId:test, clientId:7da6554c-e3ed-49ed-9a7f-f810f98ceb7f has been processed&quot;;\n\n        // Define the regular expression pattern\n        String pattern = &quot;Received request with messageId:test, clientId:[\\\\w-]+ has been processed&quot;;\n\n        // Create a Pattern object\n        Pattern regex = Pattern.compile(pattern);\n\n        // Create a Matcher object\n        Matcher matcher = regex.matcher(largerText);\n\n        // Check if a match was found\n        if (matcher.find()) {\n            String matchedText = matcher.group();\n            System.out.println(&quot;Match found: &quot; + matchedText);\n        } else {\n            System.out.println(&quot;No match found&quot;);\n        }\n    }\n}\n</code></pre>\n<p><strong>Output :</strong></p>\n<pre><code>Match found: Received request with messageId:test, clientId:7da6554c-e3ed-49ed-9a7f-f810f98ceb7f has been processed\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<p><strong>pattern :</strong> is the regular expression pattern that looks for the fixed part &quot;Received request with messageId:test, clientId:&quot; followed by one or more word characters (\\w) and hyphens (-) for the UUID.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693833804,"creation_date":1693833804,"answer_id":77038100,"question_id":77037286,"body_markdown":"Instead of using regular expressions, I would just look for the message prefix.\r\n```   \r\nString message = &quot;Some other text here.  Received request with messageId:test, clientId:7da6554c-e3ed-49ed-9a7f-f810f98ceb7f has been processed&quot;;\r\n\r\nSystem.out.println(checkRequest(message) ? &quot;Received&quot; : &quot;Unknown request&quot;);\r\n         \r\n        \r\nstatic String MESSAGE_PREFIX = &quot;Received request with messageId:test, clientId:&quot;;\r\npublic static boolean checkRequest(String text) {\r\n    return text.indexOf(MESSAGE_PREFIX) &gt;= 0;\r\n}\r\n","title":"Regex string match uuid beetwin the words","body":"<p>Instead of using regular expressions, I would just look for the message prefix.</p>\n<pre><code>String message = &quot;Some other text here.  Received request with messageId:test, clientId:7da6554c-e3ed-49ed-9a7f-f810f98ceb7f has been processed&quot;;\n\nSystem.out.println(checkRequest(message) ? &quot;Received&quot; : &quot;Unknown request&quot;);\n         \n        \nstatic String MESSAGE_PREFIX = &quot;Received request with messageId:test, clientId:&quot;;\npublic static boolean checkRequest(String text) {\n    return text.indexOf(MESSAGE_PREFIX) &gt;= 0;\n}\n</code></pre>\n"}],"owner":{"account_id":25531475,"reputation":47,"user_id":19319419,"display_name":"JD_UA"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":9,"up_vote_count":1,"closed_date":1693832790,"accepted_answer_id":77037375,"answer_count":2,"score":-8,"last_activity_date":1693833804,"creation_date":1693826368,"question_id":77037286,"body_markdown":"How to write regex that will be matches to this string\r\n\r\nReceived request with messageId:test, clientId:7da6554c-e3ed-49ed-9a7f-f810f98ceb7f has been processed\r\n\r\nuuid will be always different \r\n\r\nso i want to check some big text and if it contains \r\n\r\nReceived request with messageId:test, clientId:*some uuid* has been processed\r\n\r\n    bigText.matches(regex) == true","title":"Regex string match uuid beetwin the words","body":"<p>How to write regex that will be matches to this string</p>\n<p>Received request with messageId:test, clientId:7da6554c-e3ed-49ed-9a7f-f810f98ceb7f has been processed</p>\n<p>uuid will be always different</p>\n<p>so i want to check some big text and if it contains</p>\n<p>Received request with messageId:test, clientId:<em>some uuid</em> has been processed</p>\n<pre><code>bigText.matches(regex) == true\n</code></pre>\n"},{"tags":["java","jackson","dropwizard","java-17","jackson-modules"],"owner":{"account_id":4237835,"reputation":11,"user_id":3468532,"display_name":"donnffd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693833710,"creation_date":1693833710,"question_id":77038091,"body_markdown":"I am running jackson blackbird module in my project with java 17 and recently updated dropwizard from 2.0.x to 4.0.1\r\n\r\nI also added this in my gradle run step\r\n\r\n\r\n```\r\ndoFirst {\r\n        // Add the --add-opens option to the JVM arguments\r\n        jvmArgs += &#39;--add-opens=java.base/javax.security.auth.x500=ALL-UNNAMED&#39;\r\n        jvmArgs += &#39;--add-opens=java.base/javax.crypto=ALL-UNNAMED&#39;\r\n    }\r\n```\r\n\r\n\r\nWhen running the project, i get this error\r\n\r\n```\r\njava.lang.InternalError: java.lang.NoClassDefFoundError: com/fasterxml/jackson/module/blackbird/ser/ToBooleanFunction\r\n\tat java.base/java.lang.invoke.InnerClassLambdaMetafactory.generateInnerClass(InnerClassLambdaMetafactory.java:413)\r\n\tat java.base/java.lang.invoke.InnerClassLambdaMetafactory.spinInnerClass(InnerClassLambdaMetafactory.java:315)\r\n\tat java.base/java.lang.invoke.InnerClassLambdaMetafactory.buildCallSite(InnerClassLambdaMetafactory.java:228)\r\n\tat java.base/java.lang.invoke.LambdaMetafactory.metafactory(LambdaMetafactory.java:341)\r\n\tat com.fasterxml.jackson.module.blackbird.ser.BBSerializerModifier.createProperty(BBSerializerModifier.java:133)\r\n\tat com.fasterxml.jackson.module.blackbird.ser.BBSerializerModifier.lambda$findProperties$0(BBSerializerModifier.java:67)\r\n\tat com.fasterxml.jackson.module.blackbird.util.Unchecked.lambda$runnable$0(Unchecked.java:31)\r\n\tat com.fasterxml.jackson.module.blackbird.ser.BBSerializerModifier.findProperties(BBSerializerModifier.java:68)\r\n\tat com.fasterxml.jackson.module.blackbird.ser.BBSerializerModifier.changeProperties(BBSerializerModifier.java:52)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory.constructBeanOrAddOnSerializer(BeanSerializerFactory.java:415)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory.findBeanOrAddOnSerializer(BeanSerializerFactory.java:295)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory._createSerializer2(BeanSerializerFactory.java:240)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:174)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider._createUntypedSerializer(SerializerProvider.java:1503)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider._createAndCacheUntypedSerializer(SerializerProvider.java:1471)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:597)\r\n```\r\n\r\nI am confused as to why this is happening and how to fix it\r\n\r\nI was able to make it work by overwriting blackbird using afterburner, but i don&#39;t want that, i would prefer to use blackbird","title":"Jackson blackbird module 2.15.2 always throws error at runtime for Java 17 and dropwizard","body":"<p>I am running jackson blackbird module in my project with java 17 and recently updated dropwizard from 2.0.x to 4.0.1</p>\n<p>I also added this in my gradle run step</p>\n<pre><code>doFirst {\n        // Add the --add-opens option to the JVM arguments\n        jvmArgs += '--add-opens=java.base/javax.security.auth.x500=ALL-UNNAMED'\n        jvmArgs += '--add-opens=java.base/javax.crypto=ALL-UNNAMED'\n    }\n</code></pre>\n<p>When running the project, i get this error</p>\n<pre><code>java.lang.InternalError: java.lang.NoClassDefFoundError: com/fasterxml/jackson/module/blackbird/ser/ToBooleanFunction\n    at java.base/java.lang.invoke.InnerClassLambdaMetafactory.generateInnerClass(InnerClassLambdaMetafactory.java:413)\n    at java.base/java.lang.invoke.InnerClassLambdaMetafactory.spinInnerClass(InnerClassLambdaMetafactory.java:315)\n    at java.base/java.lang.invoke.InnerClassLambdaMetafactory.buildCallSite(InnerClassLambdaMetafactory.java:228)\n    at java.base/java.lang.invoke.LambdaMetafactory.metafactory(LambdaMetafactory.java:341)\n    at com.fasterxml.jackson.module.blackbird.ser.BBSerializerModifier.createProperty(BBSerializerModifier.java:133)\n    at com.fasterxml.jackson.module.blackbird.ser.BBSerializerModifier.lambda$findProperties$0(BBSerializerModifier.java:67)\n    at com.fasterxml.jackson.module.blackbird.util.Unchecked.lambda$runnable$0(Unchecked.java:31)\n    at com.fasterxml.jackson.module.blackbird.ser.BBSerializerModifier.findProperties(BBSerializerModifier.java:68)\n    at com.fasterxml.jackson.module.blackbird.ser.BBSerializerModifier.changeProperties(BBSerializerModifier.java:52)\n    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.constructBeanOrAddOnSerializer(BeanSerializerFactory.java:415)\n    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.findBeanOrAddOnSerializer(BeanSerializerFactory.java:295)\n    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory._createSerializer2(BeanSerializerFactory.java:240)\n    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:174)\n    at com.fasterxml.jackson.databind.SerializerProvider._createUntypedSerializer(SerializerProvider.java:1503)\n    at com.fasterxml.jackson.databind.SerializerProvider._createAndCacheUntypedSerializer(SerializerProvider.java:1471)\n    at com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:597)\n</code></pre>\n<p>I am confused as to why this is happening and how to fix it</p>\n<p>I was able to make it work by overwriting blackbird using afterburner, but i don't want that, i would prefer to use blackbird</p>\n"},{"tags":["java","maven","netbeans"],"comments":[{"owner":{"account_id":7179246,"reputation":1369,"user_id":5483900,"display_name":"ankursingh1000"},"score":0,"creation_date":1617381083,"post_id":66920567,"comment_id":118295321,"body_markdown":"try deleting full .m2/repository and try again","body":"try deleting full .m2/repository and try again"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1617384463,"post_id":66920567,"comment_id":118296539,"body_markdown":"Update all plugin version you are using... See https://maven.apache.org/plugins/","body":"Update all plugin version you are using... See <a href=\"https://maven.apache.org/plugins/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins</a>"}],"answers":[{"tags":[],"owner":{"account_id":1692434,"reputation":87,"user_id":1554530,"accept_rate":40,"display_name":"Phillip"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618143753,"creation_date":1618143753,"answer_id":67044924,"question_id":66920567,"body_markdown":"You can fix it by changing the JDK in your projects to JDK 14. Left-click on your project and go to properties -&gt; build -&gt; compile . Change the JDK to version 14. If you don&#39;t have JDK 14, you can manage it there by clicking Manage Java Platforms. The download of the JDK is [here][1]. \r\n\r\n\r\n  [1]: https://jdk.java.net/archive/","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>You can fix it by changing the JDK in your projects to JDK 14. Left-click on your project and go to properties -&gt; build -&gt; compile . Change the JDK to version 14. If you don't have JDK 14, you can manage it there by clicking Manage Java Platforms. The download of the JDK is <a href=\"https://jdk.java.net/archive/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":22053824,"reputation":901,"user_id":16317691,"display_name":"Vikram"},"down_vote_count":0,"up_vote_count":88,"is_accepted":false,"score":88,"last_activity_date":1626020479,"creation_date":1626020479,"answer_id":68338017,"question_id":66920567,"body_markdown":"I had the same problem. I am using Eclipse Jun 2021 release. The problem got resolved after manually configuring one of the recent war plug-ins in POM.xml.\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.3.1&lt;/version&gt;\r\n    &lt;/plugin&gt;\r\n","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>I had the same problem. I am using Eclipse Jun 2021 release. The problem got resolved after manually configuring one of the recent war plug-ins in POM.xml.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.1&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18408008,"reputation":1,"user_id":13409132,"display_name":"Nirbhay Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626686696,"creation_date":1626590411,"answer_id":68426672,"question_id":66920567,"body_markdown":"I have solved this by simply going in the Jenkins global tool configuration and changing the path of JDK to `/usr/local/Cellar/openjdk@11/11.0.10`.\r\nPreviously it was `/usr/local/Cellar/openjdk/16.0.1` in my local machine MAC.\r\n\r\n[Click here to see][1]\r\n\r\nThis was the error :\r\n\r\n    Downloaded from central: https://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar (431 kB at 529 kB/s)\r\n    11:52:49 [WARNING] Error injecting: org.apache.maven.plugin.war.WarMojo\r\n    11:52:49 com.google.inject.ProvisionException: Unable to provision, see the following errors:\r\n    11:52:49 \r\n    11:52:49 1) Error injecting constructor, java.lang.ExceptionInInitializerError: Cannot access defaults field of Properties\r\n    11:52:49   at org.apache.maven.plugin.war.WarMojo.&lt;init&gt;(Unknown Source)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/y5Gmm.png","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>I have solved this by simply going in the Jenkins global tool configuration and changing the path of JDK to <code>/usr/local/Cellar/openjdk@11/11.0.10</code>.\nPreviously it was <code>/usr/local/Cellar/openjdk/16.0.1</code> in my local machine MAC.</p>\n<p><a href=\"https://i.stack.imgur.com/y5Gmm.png\" rel=\"nofollow noreferrer\">Click here to see</a></p>\n<p>This was the error :</p>\n<pre><code>Downloaded from central: https://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar (431 kB at 529 kB/s)\n11:52:49 [WARNING] Error injecting: org.apache.maven.plugin.war.WarMojo\n11:52:49 com.google.inject.ProvisionException: Unable to provision, see the following errors:\n11:52:49 \n11:52:49 1) Error injecting constructor, java.lang.ExceptionInInitializerError: Cannot access defaults field of Properties\n11:52:49   at org.apache.maven.plugin.war.WarMojo.&lt;init&gt;(Unknown Source)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10463916,"reputation":2786,"user_id":7713811,"accept_rate":35,"display_name":"Nɪsʜᴀɴᴛʜ ॐ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627753192,"creation_date":1627752888,"answer_id":68604452,"question_id":66920567,"body_markdown":"Eclipse 2021-06 release by default JDK will be set to 16. So changed to your preferred JDK version. or configure your default JDK to run\r\n [![enter image description here][1]][1]\r\n\r\n````\r\nmaven-war-plugin:3.0.0:war (default-war) @ projectname \r\n--- [WARNING] Error injecting: org.apache.maven.plugins.war.WarMojo \r\ncom.google.inject.ProvisionException: Unable to provision, \r\nsee the following errors: 1) Error injecting constructor,\r\njava.lang.ExceptionInInitializerError \r\nat org.apache.maven.plugins.war.WarMojo.&lt;init&gt;(Unknown Source)\r\n````\r\n  [1]: https://i.stack.imgur.com/1NKjn.png","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>Eclipse 2021-06 release by default JDK will be set to 16. So changed to your preferred JDK version. or configure your default JDK to run\n<a href=\"https://i.stack.imgur.com/1NKjn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1NKjn.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>maven-war-plugin:3.0.0:war (default-war) @ projectname \n--- [WARNING] Error injecting: org.apache.maven.plugins.war.WarMojo \ncom.google.inject.ProvisionException: Unable to provision, \nsee the following errors: 1) Error injecting constructor,\njava.lang.ExceptionInInitializerError \nat org.apache.maven.plugins.war.WarMojo.&lt;init&gt;(Unknown Source)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6852507,"reputation":402,"user_id":5269256,"display_name":"Ramdane Oualitsen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1629840647,"creation_date":1629840303,"answer_id":68914243,"question_id":66920567,"body_markdown":"if you want to deploy the war. what worked for me is both\r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\nand \r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;inherited&gt;true&lt;/inherited&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;16&lt;/source&gt;\r\n                    &lt;target&gt;16&lt;/target&gt;\r\n                    &lt;compilerArguments&gt;\r\n                        &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\r\n                    &lt;/compilerArguments&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\nPlease note the versions.","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>if you want to deploy the war. what worked for me is both</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>and</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;inherited&gt;true&lt;/inherited&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;16&lt;/source&gt;\n                &lt;target&gt;16&lt;/target&gt;\n                &lt;compilerArguments&gt;\n                    &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\n                &lt;/compilerArguments&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>Please note the versions.</p>\n"},{"tags":[],"owner":{"account_id":25336451,"reputation":1,"user_id":19155519,"display_name":"user19155519"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652979371,"creation_date":1652979258,"answer_id":72308382,"question_id":66920567,"body_markdown":"I had this exact same issue.  After updating the POM file, I needed to delete my `.m2/repository` folder before running `mvn install` for the project.","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>I had this exact same issue.  After updating the POM file, I needed to delete my <code>.m2/repository</code> folder before running <code>mvn install</code> for the project.</p>\n"},{"tags":[],"owner":{"account_id":17700086,"reputation":1,"user_id":16361679,"display_name":"Eduardo Guerra Alvarez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653691439,"creation_date":1653691280,"answer_id":72411687,"question_id":66920567,"body_markdown":"I had the same problems and I resolved changed the version 2.3 to 3.3.1\r\n\r\n```\r\n&lt;plugin&gt;\r\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n   &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n   &lt;version&gt;3.3.1&lt;/version&gt;\r\n   &lt;configuration&gt;\r\n      &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n   &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n[enter image description here][1]\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/n7CBy.png\r\n  [2]: https://i.stack.imgur.com/81nhk.png","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>I had the same problems and I resolved changed the version 2.3 to 3.3.1</p>\n<pre><code>&lt;plugin&gt;\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n   &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n   &lt;version&gt;3.3.1&lt;/version&gt;\n   &lt;configuration&gt;\n      &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n   &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/n7CBy.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/81nhk.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":8490250,"reputation":91,"user_id":6366818,"display_name":"SANGWA Emmanuel"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1655242062,"creation_date":1655106242,"answer_id":72599284,"question_id":66920567,"body_markdown":"I experienced the same issue after upgrading from JDK 1.8 to JDK 17 and I solved it by upgrading the plugin version. \r\n\r\nBefore:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3&lt;/version&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nAfter:\r\n\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.3.1&lt;/version&gt;\r\n&lt;/plugin&gt;\r\n```\r\n","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>I experienced the same issue after upgrading from JDK 1.8 to JDK 17 and I solved it by upgrading the plugin version.</p>\n<p>Before:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>After:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.1&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657719864,"creation_date":1657719864,"answer_id":72967381,"question_id":66920567,"body_markdown":"Your `pom.xml` like this will work.\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;vysample&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n    &lt;name&gt;vysample-1.0-SNAPSHOT&lt;/name&gt;\r\n    \r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n        &lt;jakartaee&gt;9.0.0&lt;/jakartaee&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${jakartaee}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;            \r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;compilerArguments&gt;\r\n                        &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\r\n                    &lt;/compilerArguments&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.6&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;validate&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\r\n                            &lt;silent&gt;true&lt;/silent&gt;\r\n                            &lt;artifactItems&gt;\r\n                                &lt;artifactItem&gt;\r\n                                    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n                                    &lt;version&gt;${jakartaee}&lt;/version&gt;\r\n                                    &lt;type&gt;jar&lt;/type&gt;\r\n                                &lt;/artifactItem&gt;\r\n                            &lt;/artifactItems&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nFocus at\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.3.2&lt;/version&gt;\r\n\t&lt;configuration&gt;\r\n\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n\t&lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>Your <code>pom.xml</code> like this will work.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;vysample&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;vysample-1.0-SNAPSHOT&lt;/name&gt;\n    \n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n        &lt;jakartaee&gt;9.0.0&lt;/jakartaee&gt;\n    &lt;/properties&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n            &lt;version&gt;${jakartaee}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;            \n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                    &lt;compilerArguments&gt;\n                        &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\n                    &lt;/compilerArguments&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;validate&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\n                            &lt;silent&gt;true&lt;/silent&gt;\n                            &lt;artifactItems&gt;\n                                &lt;artifactItem&gt;\n                                    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n                                    &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n                                    &lt;version&gt;${jakartaee}&lt;/version&gt;\n                                    &lt;type&gt;jar&lt;/type&gt;\n                                &lt;/artifactItem&gt;\n                            &lt;/artifactItems&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Focus at</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.2&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11442916,"reputation":1,"user_id":17278648,"display_name":"minc84"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1668382464,"creation_date":1668382464,"answer_id":74425607,"question_id":66920567,"body_markdown":"Problem has been resolved by stopping the Tomcat server\r\n `sudo systemctl stop tomcat`\r\n so as to allow Netbeans to run it. If the server is already running when Netbeans tries to deploy an app Netbeans will display the delopy failed message.","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>Problem has been resolved by stopping the Tomcat server\n<code>sudo systemctl stop tomcat</code>\nso as to allow Netbeans to run it. If the server is already running when Netbeans tries to deploy an app Netbeans will display the delopy failed message.</p>\n"},{"tags":[],"owner":{"account_id":6010289,"reputation":876,"user_id":4720950,"display_name":"Parameshwar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673506730,"creation_date":1673506730,"answer_id":75092615,"question_id":66920567,"body_markdown":"I resolved this error by adding following part in pom.xml\r\n\r\n     &lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.3.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\napart from that i added maven configuration properties \r\n\r\n    &lt;properties&gt;\r\n\t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\t&lt;/properties&gt;\r\n\r\nand here is my entire file as following \r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.groupId&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;com.artifactId&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\r\n\t\t\t&lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.3.0&lt;/version&gt;\r\n\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.3.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>I resolved this error by adding following part in pom.xml</p>\n<pre><code> &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n            &lt;/configuration&gt;\n\n        &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>apart from that i added maven configuration properties</p>\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>and here is my entire file as following</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;com.groupId&lt;/groupId&gt;\n&lt;artifactId&gt;com.artifactId&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\n    &lt;dependency&gt;\n    \n        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n        &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n        &lt;version&gt;5.3.0&lt;/version&gt;\n\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n            &lt;/configuration&gt;\n\n        &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n"},{"tags":[],"owner":{"account_id":3228029,"reputation":595,"user_id":2723886,"accept_rate":14,"display_name":"Vidz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1693833629,"creation_date":1693833629,"answer_id":77038080,"question_id":66920567,"body_markdown":"My problem got resolved after manually configuring war plug-in in POM.xml and then do clean install\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.3.1&lt;/version&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\nThen in the terminal, do a clean install, as:\r\n\r\n    mvn clean install\r\n    \r\nThis should give you the war file (javaj22ee.war) status like:\r\n\r\n    [INFO] Building war: /Users/my_proj/java/javaj2ee/target/javaj2ee.war\r\n    [INFO]\r\n    [INFO] --- install:3.1.1:install (default-install) @ javaj2ee ---\r\n    [INFO] Installing /Users/my_proj/java/javaj2ee/pom.xml to \r\n    /Users/.m2/repository/org/example/javaj2ee/1.0-SNAPSHOT/javaj2ee-1.0- \r\n    SNAPSHOT.pom\r\n    [INFO] Installing /Users/my_proj/java/javaj2ee/target/javaj2ee.war to \r\n    /Users/.m2/repository/org/example/javaj2ee/1.0-SNAPSHOT/javaj2ee-1.0- \r\n    SNAPSHOT.war\r\n    [INFO] -----------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n    [INFO] ----------------------------------------------------------------- \r\n    [INFO] Total time:  8.506 s\r\n    [INFO] Finished at: 2023-09-04T18:37:31+05:30\r\n    [INFO] ----------------------------------------------------------------- \r\n\r\n","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p>My problem got resolved after manually configuring war plug-in in POM.xml and then do clean install</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.1&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Then in the terminal, do a clean install, as:</p>\n<pre><code>mvn clean install\n</code></pre>\n<p>This should give you the war file (javaj22ee.war) status like:</p>\n<pre><code>[INFO] Building war: /Users/my_proj/java/javaj2ee/target/javaj2ee.war\n[INFO]\n[INFO] --- install:3.1.1:install (default-install) @ javaj2ee ---\n[INFO] Installing /Users/my_proj/java/javaj2ee/pom.xml to \n/Users/.m2/repository/org/example/javaj2ee/1.0-SNAPSHOT/javaj2ee-1.0- \nSNAPSHOT.pom\n[INFO] Installing /Users/my_proj/java/javaj2ee/target/javaj2ee.war to \n/Users/.m2/repository/org/example/javaj2ee/1.0-SNAPSHOT/javaj2ee-1.0- \nSNAPSHOT.war\n[INFO] -----------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ----------------------------------------------------------------- \n[INFO] Total time:  8.506 s\n[INFO] Finished at: 2023-09-04T18:37:31+05:30\n[INFO] ----------------------------------------------------------------- \n</code></pre>\n"}],"owner":{"account_id":20563755,"reputation":491,"user_id":15093936,"display_name":"Zarcor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73957,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"answer_count":12,"score":39,"last_activity_date":1693833629,"creation_date":1617372482,"question_id":66920567,"body_markdown":"**what the console prints**, I am trying to run a java web application on netbeans and I do not understand very well why it gives me that error.\r\n\r\n    Downloaded from central: https://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream/1.4.4/xstream-1.4.4.jar (483 kB at 33 kB/s)\r\n    Error injecting: org.apache.maven.plugin.war.WarMojo\r\n    com.google.inject.ProvisionException: Unable to provision, see the following errors:\r\n    \r\n    1) Error injecting constructor, java.lang.ExceptionInInitializerError\r\n      at org.apache.maven.plugin.war.WarMojo.&lt;init&gt;(Unknown Source)\r\n      while locating org.apache.maven.plugin.war.WarMojo\r\n    \r\n    1 error\r\n        at com.google.inject.internal.InternalProvisionException.toProvisionException (InternalProvisionException.java:226)\r\n        at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1053)\r\n        at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\r\n        at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\r\n        at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\r\n\r\n\r\nFailed to execute goal org.apache.maven.plugins:maven-war-plugin:2.3:war (default-war) on project primera_web: Execution default-war of goal org.apache.maven.plugins:maven-war-plugin:2.3:war failed: Unable to load the mojo &#39;war&#39; in the plugin &#39;org.apache.maven.plugins:maven-war-plugin:2.3&#39; due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: null\r\n\r\n\r\n\r\n    realm =    plugin&gt;org.apache.maven.plugins:maven-war-plugin:2.3\r\n    strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n    urls[0] = file:/C:/Users/HP/.m2/repository/org/apache/maven/plugins/maven-war-plugin/2.3/maven-war-plugin-2.3.jar\r\n    urls[1] = file:/C:/Users/HP/.m2/repository/org/apache/maven/reporting/maven-reporting-api/2.0.6/maven-reporting-api-2.0.6.jar\r\n    urls[2] = file:/C:/Users/HP/.m2/repository/org/apache/maven/doxia/doxia-sink-api/1.0-alpha-7/doxia-sink-api-1.0-alpha-7.jar\r\n    urls[3] = file:/C:/Users/HP/.m2/repository/commons-cli/commons-cli/1.0/commons-cli-1.0.jar\r\n    \r\n    Number of foreign imports: 1\r\n    import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n    \r\n    -----------------------------------------------------\r\n    : ExceptionInInitializerError: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @5c82031b\r\n    -&gt; [Help 1]\r\n    \r\n    To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    Re-run Maven using the -X switch to enable full debug logging.\r\n    \r\n    For more information about the errors and possible solutions, please read the following articles:\r\n    [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\r\n\r\n**file pom.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\r\n        &lt;artifactId&gt;primera_web&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n        &lt;name&gt;primera_web&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n        \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\r\n                &lt;version&gt;7.0&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.7&lt;/source&gt;\r\n                        &lt;target&gt;1.7&lt;/target&gt;\r\n                        &lt;compilerArguments&gt;\r\n                            &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\r\n                        &lt;/compilerArguments&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.6&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;validate&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;copy&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\r\n                                &lt;silent&gt;true&lt;/silent&gt;\r\n                                &lt;artifactItems&gt;\r\n                                    &lt;artifactItem&gt;\r\n                                        &lt;groupId&gt;javax&lt;/groupId&gt;\r\n                                        &lt;artifactId&gt;javaee-endorsed-api&lt;/artifactId&gt;\r\n                                        &lt;version&gt;7.0&lt;/version&gt;\r\n                                        &lt;type&gt;jar&lt;/type&gt;\r\n                                    &lt;/artifactItem&gt;\r\n                                &lt;/artifactItems&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nsuggestions to solve the problem ??\r\n","title":"Error injecting: org.apache.maven.plugin.war.WarMojo","body":"<p><strong>what the console prints</strong>, I am trying to run a java web application on netbeans and I do not understand very well why it gives me that error.</p>\n<pre><code>Downloaded from central: https://repo.maven.apache.org/maven2/com/thoughtworks/xstream/xstream/1.4.4/xstream-1.4.4.jar (483 kB at 33 kB/s)\nError injecting: org.apache.maven.plugin.war.WarMojo\ncom.google.inject.ProvisionException: Unable to provision, see the following errors:\n\n1) Error injecting constructor, java.lang.ExceptionInInitializerError\n  at org.apache.maven.plugin.war.WarMojo.&lt;init&gt;(Unknown Source)\n  while locating org.apache.maven.plugin.war.WarMojo\n\n1 error\n    at com.google.inject.internal.InternalProvisionException.toProvisionException (InternalProvisionException.java:226)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1053)\n    at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\n</code></pre>\n<p>Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.3:war (default-war) on project primera_web: Execution default-war of goal org.apache.maven.plugins:maven-war-plugin:2.3:war failed: Unable to load the mojo 'war' in the plugin 'org.apache.maven.plugins:maven-war-plugin:2.3' due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: null</p>\n<pre><code>realm =    plugin&gt;org.apache.maven.plugins:maven-war-plugin:2.3\nstrategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\nurls[0] = file:/C:/Users/HP/.m2/repository/org/apache/maven/plugins/maven-war-plugin/2.3/maven-war-plugin-2.3.jar\nurls[1] = file:/C:/Users/HP/.m2/repository/org/apache/maven/reporting/maven-reporting-api/2.0.6/maven-reporting-api-2.0.6.jar\nurls[2] = file:/C:/Users/HP/.m2/repository/org/apache/maven/doxia/doxia-sink-api/1.0-alpha-7/doxia-sink-api-1.0-alpha-7.jar\nurls[3] = file:/C:/Users/HP/.m2/repository/commons-cli/commons-cli/1.0/commons-cli-1.0.jar\n\nNumber of foreign imports: 1\nimport: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n\n-----------------------------------------------------\n: ExceptionInInitializerError: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @5c82031b\n-&gt; [Help 1]\n\nTo see the full stack trace of the errors, re-run Maven with the -e switch.\nRe-run Maven using the -X switch to enable full debug logging.\n\nFor more information about the errors and possible solutions, please read the following articles:\n[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\n</code></pre>\n<p><strong>file pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n    &lt;artifactId&gt;primera_web&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;primera_web&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\n            &lt;version&gt;7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.7&lt;/source&gt;\n                    &lt;target&gt;1.7&lt;/target&gt;\n                    &lt;compilerArguments&gt;\n                        &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\n                    &lt;/compilerArguments&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;validate&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\n                            &lt;silent&gt;true&lt;/silent&gt;\n                            &lt;artifactItems&gt;\n                                &lt;artifactItem&gt;\n                                    &lt;groupId&gt;javax&lt;/groupId&gt;\n                                    &lt;artifactId&gt;javaee-endorsed-api&lt;/artifactId&gt;\n                                    &lt;version&gt;7.0&lt;/version&gt;\n                                    &lt;type&gt;jar&lt;/type&gt;\n                                &lt;/artifactItem&gt;\n                            &lt;/artifactItems&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>suggestions to solve the problem ??</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":2,"creation_date":1274224409,"post_id":2861410,"comment_id":2906239,"body_markdown":"Weak references are not suitable for caches anyway - they can be cleared immediately, not waiting for the garbage collector (not that waiting for the garbage collector is a great strategy either).","body":"Weak references are not suitable for caches anyway - they can be cleared immediately, not waiting for the garbage collector (not that waiting for the garbage collector is a great strategy either)."}],"answers":[{"tags":[],"owner":{"account_id":36251,"reputation":10399,"user_id":103260,"accept_rate":56,"display_name":"Ricardo Marimon"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1274219878,"creation_date":1274219878,"answer_id":2861454,"question_id":2861410,"body_markdown":"The WeakHashMap is weak on the keys not the values so it is not appropriate for a cache of values if you want to release space when the value is not being used.  You might want to take a look at [MapMaker][1] from the [google collections][2].\r\n\r\n\r\n  [1]: http://google-collections.googlecode.com/svn/trunk/javadoc/index.html?com/google/common/collect/MapMaker.html\r\n  [2]: http://code.google.com/p/google-collections","title":"WeakHashMap iteration and garbage collection","body":"<p>The WeakHashMap is weak on the keys not the values so it is not appropriate for a cache of values if you want to release space when the value is not being used.  You might want to take a look at <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/index.html?com/google/common/collect/MapMaker.html\" rel=\"nofollow noreferrer\">MapMaker</a> from the <a href=\"http://code.google.com/p/google-collections\" rel=\"nofollow noreferrer\">google collections</a>.</p>\n"},{"tags":[],"owner":{"account_id":13018,"reputation":14568,"user_id":25920,"accept_rate":88,"display_name":"luke"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1274219887,"creation_date":1274219887,"answer_id":2861456,"question_id":2861410,"body_markdown":"The documentation is not exactly clear on this but it does say this:\r\n\r\n&gt; The behavior of the WeakHashMap class\r\n&gt; depends in part upon the actions of\r\n&gt; the garbage collector, so several\r\n&gt; familiar (though not required) Map\r\n&gt; invariants do not hold for this class.\r\n&gt; Because the garbage collector may\r\n&gt; discard keys at any time, a\r\n&gt; **WeakHashMap may behave as though an\r\n&gt; unknown thread is silently removing\r\n&gt; entries**. In particular, even if you\r\n&gt; synchronize on a WeakHashMap instance\r\n&gt; and invoke none of its mutator\r\n&gt; methods, it is possible for the size\r\n&gt; method to return smaller values over\r\n&gt; time, for the isEmpty method to return\r\n&gt; false and then true, for the\r\n&gt; containsKey method to return true and\r\n&gt; later false for a given key, for the\r\n&gt; get method to return a value for a\r\n&gt; given key but later return null, for\r\n&gt; the put method to return null and the\r\n&gt; remove method to return false for a\r\n&gt; key that previously appeared to be in\r\n&gt; the map, and for successive\r\n&gt; examinations of the key set, the value\r\n&gt; set, and the entry set to yield\r\n&gt; successively smaller numbers of\r\n&gt; elements. - [Java API][1]\r\n\r\n\r\nI think given that description you should expect to occasionally receive `ConcurrentModificationException`s while iterating the map.  I would design your cache so you do as little iterating as possible.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.4.2/docs/api/java/util/WeakHashMap.html","title":"WeakHashMap iteration and garbage collection","body":"<p>The documentation is not exactly clear on this but it does say this:</p>\n\n<blockquote>\n  <p>The behavior of the WeakHashMap class\n  depends in part upon the actions of\n  the garbage collector, so several\n  familiar (though not required) Map\n  invariants do not hold for this class.\n  Because the garbage collector may\n  discard keys at any time, a\n  <strong>WeakHashMap may behave as though an\n  unknown thread is silently removing\n  entries</strong>. In particular, even if you\n  synchronize on a WeakHashMap instance\n  and invoke none of its mutator\n  methods, it is possible for the size\n  method to return smaller values over\n  time, for the isEmpty method to return\n  false and then true, for the\n  containsKey method to return true and\n  later false for a given key, for the\n  get method to return a value for a\n  given key but later return null, for\n  the put method to return null and the\n  remove method to return false for a\n  key that previously appeared to be in\n  the map, and for successive\n  examinations of the key set, the value\n  set, and the entry set to yield\n  successively smaller numbers of\n  elements. - <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/util/WeakHashMap.html\" rel=\"nofollow noreferrer\">Java API</a></p>\n</blockquote>\n\n<p>I think given that description you should expect to occasionally receive <code>ConcurrentModificationException</code>s while iterating the map.  I would design your cache so you do as little iterating as possible.</p>\n"},{"tags":[],"owner":{"account_id":48020,"reputation":33723,"user_id":142446,"display_name":"Brett Kail"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1274227986,"creation_date":1274227986,"answer_id":2862048,"question_id":2861410,"body_markdown":"No, you will not receive ConcurrentModificationException.  WeakHashMap uses ReferenceQueue.poll when you call various operations.  In other words, each caller is silently responsible for clearing stale entries from the Map.  However, that does mean that it is not safe to call methods on a WeakHashMap from multiple threads that would otherwise seem to be &quot;read-only&quot; because any call to get() can destroy the entry linked list that another thread is attempting to iterate.","title":"WeakHashMap iteration and garbage collection","body":"<p>No, you will not receive ConcurrentModificationException.  WeakHashMap uses ReferenceQueue.poll when you call various operations.  In other words, each caller is silently responsible for clearing stale entries from the Map.  However, that does mean that it is not safe to call methods on a WeakHashMap from multiple threads that would otherwise seem to be \"read-only\" because any call to get() can destroy the entry linked list that another thread is attempting to iterate.</p>\n"},{"tags":[],"owner":{"account_id":76705,"reputation":8914,"user_id":219394,"display_name":"Kevin Brock"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1274230640,"creation_date":1274230279,"answer_id":2862174,"question_id":2861410,"body_markdown":"As bkail said, when GC &quot;removes&quot; an entry from a `WeakHashMap` it is not going to cause a concurrent modification. In reality the GC collects the underlying object by there is a hard reference to `WeakReference` object (that holds the real key) itself. Therefore, the real object (the reference object) that is directly referenced by the map is not collected so the map does not change until one of your threads calls a method in this map. At that time the map checks the reference queue from the GC and finds all keys that have been collected and removes them from the map - so the actual changes to the map structure occurs on one of your threads.\r\n\r\nIn thinking of this then there may be one case where you may get a concurrent modification in such a map that you would not get in another kind of map - if you put a key that already exists or call a getter method. But really, in a concurrent application you should be locking around these calls anyway so you would have a really concurrent access bug in your program.\r\n\r\nThat being said in answer to your question, you really **should not use** `WeakHashMap` for a cache (even if you were talking about caching keys). In a cache you don&#39;t want your values &#39;magically&#39; disappearing when the values are no longer referenced. Typically you want them to disappear when there is a certain maximum number (something like Apache collections [`LRUMap`][1]) or released on memory demand. \r\n\r\nFor the later, you can use a map with a `SoftReference` (Apache collections provides a [`ReferenceMap`][2] that allows you to specify the kind of reference for either the key or value). A soft reference is specified to only be released based on memory pressure - a weak reference on the other hand has to do more with GC recognizing that there are no hard reference remaining to the object and can release it at any time. Of course, how a soft reference really works is also dependent on the JVM implementation.\r\n\r\n**EDIT**: I reread your question and want to address one other point. Because the actual modifications occur to the `WeakHashMap` internal structures on your own thread, *if you only use this map in a single thread you do not need to synchronize any method calls*. This behavior is no different than any other `Map`.\r\n\r\n\r\n  [1]: http://commons.apache.org/collections/apidocs/org/apache/commons/collections/LRUMap.html\r\n  [2]: http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/ReferenceMap.html","title":"WeakHashMap iteration and garbage collection","body":"<p>As bkail said, when GC \"removes\" an entry from a <code>WeakHashMap</code> it is not going to cause a concurrent modification. In reality the GC collects the underlying object by there is a hard reference to <code>WeakReference</code> object (that holds the real key) itself. Therefore, the real object (the reference object) that is directly referenced by the map is not collected so the map does not change until one of your threads calls a method in this map. At that time the map checks the reference queue from the GC and finds all keys that have been collected and removes them from the map - so the actual changes to the map structure occurs on one of your threads.</p>\n\n<p>In thinking of this then there may be one case where you may get a concurrent modification in such a map that you would not get in another kind of map - if you put a key that already exists or call a getter method. But really, in a concurrent application you should be locking around these calls anyway so you would have a really concurrent access bug in your program.</p>\n\n<p>That being said in answer to your question, you really <strong>should not use</strong> <code>WeakHashMap</code> for a cache (even if you were talking about caching keys). In a cache you don't want your values 'magically' disappearing when the values are no longer referenced. Typically you want them to disappear when there is a certain maximum number (something like Apache collections <a href=\"http://commons.apache.org/collections/apidocs/org/apache/commons/collections/LRUMap.html\" rel=\"noreferrer\"><code>LRUMap</code></a>) or released on memory demand. </p>\n\n<p>For the later, you can use a map with a <code>SoftReference</code> (Apache collections provides a <a href=\"http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/ReferenceMap.html\" rel=\"noreferrer\"><code>ReferenceMap</code></a> that allows you to specify the kind of reference for either the key or value). A soft reference is specified to only be released based on memory pressure - a weak reference on the other hand has to do more with GC recognizing that there are no hard reference remaining to the object and can release it at any time. Of course, how a soft reference really works is also dependent on the JVM implementation.</p>\n\n<p><strong>EDIT</strong>: I reread your question and want to address one other point. Because the actual modifications occur to the <code>WeakHashMap</code> internal structures on your own thread, <em>if you only use this map in a single thread you do not need to synchronize any method calls</em>. This behavior is no different than any other <code>Map</code>.</p>\n"}],"owner":{"account_id":24198,"reputation":6978,"user_id":61395,"accept_rate":83,"display_name":"Shamik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4667,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":2862174,"answer_count":4,"score":16,"last_activity_date":1693833205,"creation_date":1274219505,"question_id":2861410,"body_markdown":"I am using a `WeakHashMap` to implement a Cache. I am wondering if I am iterating over the keys of this map, and at the same time garbage collector is actively removing keys from this map, would I receive a `ConcurrentModificationException` ?\r\nI do not think so, because as far as I understand, the concurrent modification exception happens because of bugs in the application code where the developer forgot to understand that the same map is shared/used by other threads and in this case, it should not happen. But wondering how would JVM handle this when `WeakHashMap` is not synchronized ?","title":"WeakHashMap iteration and garbage collection","body":"<p>I am using a <code>WeakHashMap</code> to implement a Cache. I am wondering if I am iterating over the keys of this map, and at the same time garbage collector is actively removing keys from this map, would I receive a <code>ConcurrentModificationException</code> ?\nI do not think so, because as far as I understand, the concurrent modification exception happens because of bugs in the application code where the developer forgot to understand that the same map is shared/used by other threads and in this case, it should not happen. But wondering how would JVM handle this when <code>WeakHashMap</code> is not synchronized ?</p>\n"},{"tags":["java","appium-ios"],"owner":{"account_id":29360321,"reputation":1,"user_id":22495172,"display_name":"Eliana Zamora Sanabria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693832748,"creation_date":1693799220,"question_id":77034964,"body_markdown":"`nameProduct` is the parameter that the actor has, this locator works for Android but I want to adapt it for iOS so that they work in the same project. \r\n\r\n    String locator = String.format(&quot;new UiScrollable(new UiSelector()\r\n                      .scrollable(true)\r\n                      .instance(0))\r\n                      .scrollIntoView(new UiSelector()\r\n                      .textContains(\\&quot;%s\\&quot;).instance(0))&quot;, nameProduct)\r\n                      .locatedForAndroid(AppiumBy.androidUIAutomator(locator));\r\n\r\n\r\n But I don&#39;t know if it works for iOS so for the moment it doesn&#39;t locate me. \r\n\r\n     String iosLocator = String.format(&quot;type == &#39;XCUIElementTypeStaticText&#39; AND label CONTAINS &#39;%s&#39;&quot;,\r\n                                                nameProduct);\r\n     .locatedForIOS(AppiumBy.iOSClassChain(iosLocator));\r\n\r\n\r\nI am using IntelliJ IDEA\r\n","title":"How to adapt this locator for iOS is for automated testing","body":"<p><code>nameProduct</code> is the parameter that the actor has, this locator works for Android but I want to adapt it for iOS so that they work in the same project.</p>\n<pre><code>String locator = String.format(&quot;new UiScrollable(new UiSelector()\n                  .scrollable(true)\n                  .instance(0))\n                  .scrollIntoView(new UiSelector()\n                  .textContains(\\&quot;%s\\&quot;).instance(0))&quot;, nameProduct)\n                  .locatedForAndroid(AppiumBy.androidUIAutomator(locator));\n</code></pre>\n<p>But I don't know if it works for iOS so for the moment it doesn't locate me.</p>\n<pre><code> String iosLocator = String.format(&quot;type == 'XCUIElementTypeStaticText' AND label CONTAINS '%s'&quot;,\n                                            nameProduct);\n .locatedForIOS(AppiumBy.iOSClassChain(iosLocator));\n</code></pre>\n<p>I am using IntelliJ IDEA</p>\n"},{"tags":["java","arrays","string","currency"],"answers":[{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693832503,"creation_date":1693312293,"answer_id":77000232,"question_id":76997743,"body_markdown":"Extracting currency values from strings and determining their locale can be a complex task due to the wide variety of formats and symbols used worldwide. There isn&#39;t a one-size-fits-all solution, but Java does provide the `java.util.Currency` and `java.text.NumberFormat` classes, which can assist in some aspects of this task.\r\n\r\nHowever, detecting a currency symbol and converting it to a locale or currency code is not straightforward, because multiple countries might share a single currency symbol. \r\n\r\nGiven your requirements, I can suggest a two-step approach:\r\n\r\n 1. Extract the numeric value from the string.\r\n 2. Try to match the currency symbol to a locale or currency code.However, if you are going to work with 180 currencies I guess you would have problems with some of them which do not follow ASCII codes. I suggest you to create a map as follows,supposing, as you mentioned you&#39;ve already managed to extract the numbers:\r\n \r\n\r\n         \r\n        public class CurrencyExtractor {\r\n            private static Map&lt;String, String&gt; symbolToCurrencyCodeMap = new HashMap&lt;&gt;();\r\n        \r\n            static {\r\n                // Manual mappings for specific symbols\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;د.إ&quot;), &quot;AED&quot;);   // United Arab Emirates Dirham\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ر.س&quot;), &quot;SAR&quot;);   // Saudi Riyal\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;د.ت&quot;), &quot;TND&quot;);   // Tunisian Dinar\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ل.د&quot;), &quot;LYD&quot;);   // Libyan Dinar\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ر.ع.&quot;), &quot;OMR&quot;);  // Omani Rial\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ج.م&quot;), &quot;EGP&quot;);   // Egyptian Pound\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;د.ك&quot;), &quot;KWD&quot;);   // Kuwaiti Dinar\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ر.ق&quot;), &quot;QAR&quot;);   // Qatari Riyal\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;د.ب&quot;), &quot;BHD&quot;);   // Bahraini Dinar\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ل.س&quot;), &quot;SYP&quot;);   // Syrian Pound\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ل.ل&quot;), &quot;LBP&quot;);   // Lebanese Pound\r\n                symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;₹&quot;), &quot;INR&quot;);     // Indian Rupee\r\n                \r\n            }\r\n            public static String toUnicodeEscapeSequence(String str) {\r\n                StringBuilder result = new StringBuilder();\r\n        \r\n                for (int i = 0; i &lt; str.length(); i++) {\r\n                    char ch = str.charAt(i);\r\n                    result.append(String.format(&quot;\\\\u%04x&quot;, (int) ch));\r\n                }\r\n        \r\n                return result.toString();\r\n            }\r\n            public static String extractCurrencyCode(String symbol) {\r\n                return symbolToCurrencyCodeMap.get(symbol);\r\n            }\r\n    \r\n        public static void main(String[] args) {\r\n             String textWithCurrency = &quot;د.ك&quot;;\r\n            \r\n            System.out.println(&quot;Currency code for symbol &#39;&quot; + toUnicodeEscapeSequence(textWithCurrency) + &quot;&#39;: &quot; + extractCurrencyCode(toUnicodeEscapeSequence(textWithCurrency)));\r\n        }\r\n    }\r\n\r\nThe result for the input textWithCurrency = &quot;د.ك&quot;, would be : \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7Z2Tn.png","title":"AutoDetect numbers with currency and extract the numbers( Using any library)","body":"<p>Extracting currency values from strings and determining their locale can be a complex task due to the wide variety of formats and symbols used worldwide. There isn't a one-size-fits-all solution, but Java does provide the <code>java.util.Currency</code> and <code>java.text.NumberFormat</code> classes, which can assist in some aspects of this task.</p>\n<p>However, detecting a currency symbol and converting it to a locale or currency code is not straightforward, because multiple countries might share a single currency symbol.</p>\n<p>Given your requirements, I can suggest a two-step approach:</p>\n<ol>\n<li><p>Extract the numeric value from the string.</p>\n</li>\n<li><p>Try to match the currency symbol to a locale or currency code.However, if you are going to work with 180 currencies I guess you would have problems with some of them which do not follow ASCII codes. I suggest you to create a map as follows,supposing, as you mentioned you've already managed to extract the numbers:</p>\n<pre><code>public class CurrencyExtractor {\n    private static Map&lt;String, String&gt; symbolToCurrencyCodeMap = new HashMap&lt;&gt;();\n\n    static {\n        // Manual mappings for specific symbols\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;د.إ&quot;), &quot;AED&quot;);   // United Arab Emirates Dirham\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ر.س&quot;), &quot;SAR&quot;);   // Saudi Riyal\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;د.ت&quot;), &quot;TND&quot;);   // Tunisian Dinar\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ل.د&quot;), &quot;LYD&quot;);   // Libyan Dinar\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ر.ع.&quot;), &quot;OMR&quot;);  // Omani Rial\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ج.م&quot;), &quot;EGP&quot;);   // Egyptian Pound\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;د.ك&quot;), &quot;KWD&quot;);   // Kuwaiti Dinar\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ر.ق&quot;), &quot;QAR&quot;);   // Qatari Riyal\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;د.ب&quot;), &quot;BHD&quot;);   // Bahraini Dinar\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ل.س&quot;), &quot;SYP&quot;);   // Syrian Pound\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;ل.ل&quot;), &quot;LBP&quot;);   // Lebanese Pound\n        symbolToCurrencyCodeMap.put(toUnicodeEscapeSequence(&quot;₹&quot;), &quot;INR&quot;);     // Indian Rupee\n\n    }\n    public static String toUnicodeEscapeSequence(String str) {\n        StringBuilder result = new StringBuilder();\n\n        for (int i = 0; i &lt; str.length(); i++) {\n            char ch = str.charAt(i);\n            result.append(String.format(&quot;\\\\u%04x&quot;, (int) ch));\n        }\n\n        return result.toString();\n    }\n    public static String extractCurrencyCode(String symbol) {\n        return symbolToCurrencyCodeMap.get(symbol);\n    }\n\npublic static void main(String[] args) {\n     String textWithCurrency = &quot;د.ك&quot;;\n\n    System.out.println(&quot;Currency code for symbol '&quot; + toUnicodeEscapeSequence(textWithCurrency) + &quot;': &quot; + extractCurrencyCode(toUnicodeEscapeSequence(textWithCurrency)));\n}\n</code></pre>\n<p>}</p>\n</li>\n</ol>\n<p>The result for the input textWithCurrency = &quot;د.ك&quot;, would be :</p>\n<p><a href=\"https://i.stack.imgur.com/7Z2Tn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Z2Tn.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":27983776,"reputation":51,"user_id":21371062,"display_name":"Riya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1693832503,"creation_date":1693289570,"question_id":76997743,"body_markdown":"I am trying to solve a problem where my input looks like this :\r\n\r\n```\r\nString textWithCurrency = &quot;د.ع.‏ 40,986.63&quot;;\r\n```\r\nIn here, the currency is Arabic, from this input the number should be autodetected and extracted (leaving the symbol). Or it would be helpful if we could find the locale from this currency which would help me to reconvert them too . Does java or anyother third parties have any libraries or functions regarding this? (Writing a program is also fine but needs to be a shorter one)\r\n\r\nI have tried some code, which I could extract numbers from it. But still need ideas like finding libraries which would make it efficient.  I have many currencies to convert, almost 180 so need a library","title":"AutoDetect numbers with currency and extract the numbers( Using any library)","body":"<p>I am trying to solve a problem where my input looks like this :</p>\n<pre><code>String textWithCurrency = &quot;د.ع.‏ 40,986.63&quot;;\n</code></pre>\n<p>In here, the currency is Arabic, from this input the number should be autodetected and extracted (leaving the symbol). Or it would be helpful if we could find the locale from this currency which would help me to reconvert them too . Does java or anyother third parties have any libraries or functions regarding this? (Writing a program is also fine but needs to be a shorter one)</p>\n<p>I have tried some code, which I could extract numbers from it. But still need ideas like finding libraries which would make it efficient.  I have many currencies to convert, almost 180 so need a library</p>\n"},{"tags":["java","docker","windows-subsystem-for-linux"],"owner":{"account_id":28825537,"reputation":1,"user_id":22077012,"display_name":"Marlon Pius Pamplona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693832251,"creation_date":1686814084,"question_id":76480092,"body_markdown":"I would really appreciate some help in launching EPI2ME. I have already installed WSL 2, Java and Docker desktop prior to downloading EPI2ME. I tried launching EPI2ME but it seems to not be able to detect WSL, Java and Docker. I have already tried disabling my firewall but to no avail. Thank you\r\nI tried updating, and disabling firewall but to no avail","title":"EPI2ME cannot detect my installed WSL, Java and Docker","body":"<p>I would really appreciate some help in launching EPI2ME. I have already installed WSL 2, Java and Docker desktop prior to downloading EPI2ME. I tried launching EPI2ME but it seems to not be able to detect WSL, Java and Docker. I have already tried disabling my firewall but to no avail. Thank you\nI tried updating, and disabling firewall but to no avail</p>\n"},{"tags":["java","spring-boot","azure","azure-application-insights"],"answers":[{"tags":[],"owner":{"account_id":26619036,"reputation":1003,"user_id":20238030,"display_name":"Suresh Chikkam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693832126,"creation_date":1693832126,"answer_id":77037894,"question_id":77024790,"body_markdown":"I had tried with the same configuration that which you tried in the above, and below is the result.\r\n\r\n![enter image description here](https://i.imgur.com/5iuanW4.png)\r\n\r\nHere, my application is able to access the database so I would see dependency telemetry for those interactions but not the trace data.\r\n\r\n![enter image description here](https://i.imgur.com/BOQd0d4.png)\r\n\r\nHere, I made some changes in the **configuration file**.\r\n\r\n```\r\n{\r\n  &quot;selfDiagnostics&quot;: {\r\n    &quot;destination&quot;: &quot;console&quot;,\r\n    &quot;level&quot;: &quot;TRACE&quot;\r\n  },\r\n  &quot;instrumentation&quot;: {\r\n    &quot;jdbc&quot;: {\r\n      &quot;masking&quot;: {\r\n        &quot;enabled&quot;: false\r\n      },\r\n      &quot;trackPreparedStatement&quot;: {\r\n        &quot;enabled&quot;: true\r\n      },\r\n\t  &quot;parameterCollectionEnabled&quot;: true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThen I am able get the Trace transaction with the dependency transaction with the SQL parameters.\r\n\r\n**Result:**\r\n\r\n![enter image description here](https://i.imgur.com/JqYHEiP.png)\r\n\r\n![enter image description here](https://i.imgur.com/X3Nr48e.png)\r\n","title":"Disabling of JDBC masking in Application Insights Agent","body":"<p>I had tried with the same configuration that which you tried in the above, and below is the result.</p>\n<p><img src=\"https://i.imgur.com/5iuanW4.png\" alt=\"enter image description here\" /></p>\n<p>Here, my application is able to access the database so I would see dependency telemetry for those interactions but not the trace data.</p>\n<p><img src=\"https://i.imgur.com/BOQd0d4.png\" alt=\"enter image description here\" /></p>\n<p>Here, I made some changes in the <strong>configuration file</strong>.</p>\n<pre><code>{\n  &quot;selfDiagnostics&quot;: {\n    &quot;destination&quot;: &quot;console&quot;,\n    &quot;level&quot;: &quot;TRACE&quot;\n  },\n  &quot;instrumentation&quot;: {\n    &quot;jdbc&quot;: {\n      &quot;masking&quot;: {\n        &quot;enabled&quot;: false\n      },\n      &quot;trackPreparedStatement&quot;: {\n        &quot;enabled&quot;: true\n      },\n      &quot;parameterCollectionEnabled&quot;: true\n    }\n  }\n}\n</code></pre>\n<p>Then I am able get the Trace transaction with the dependency transaction with the SQL parameters.</p>\n<p><strong>Result:</strong></p>\n<p><img src=\"https://i.imgur.com/JqYHEiP.png\" alt=\"enter image description here\" /></p>\n<p><img src=\"https://i.imgur.com/X3Nr48e.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":17605348,"reputation":1,"user_id":12774486,"display_name":"schabdo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693832126,"creation_date":1693586628,"question_id":77024790,"body_markdown":"I&#39;m attaching the latest Application Insight Java Agent (v3.4.16) programatically within my SpringBoot application (v3.1.3) as described [here](https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-spring-boot#enabling-programmatically).\r\n\r\nI do have `applicationinsights.json` with my configuration under `src/main/resources`. It looks like this (cf. [documentation](https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-standalone-config#jdbc-query-masking)):\r\n\r\n```json\r\n{\r\n  &quot;selfDiagnostics&quot;: {\r\n    &quot;destination&quot;: &quot;console&quot;,\r\n    &quot;level&quot;: &quot;TRACE&quot;\r\n  },\r\n  &quot;instrumentation&quot;: {\r\n    &quot;jdbc&quot;: {\r\n      &quot;masking&quot;: {\r\n        &quot;enabled&quot;: false\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe logging level is recognize correctly, so the agent picks up the config file. I can even see stuff reported from my local instance to Azure after providing a valid connection string.\r\n\r\nHowever I&#39;m still not getting any SQL parameter resolution in the traces. The statements are still masked like this (from my local client logs):\r\n\r\n```json\r\n...\r\n{&quot;ver&quot;:2,&quot;id&quot;:&quot;3ce417f010b210df&quot;,&quot;name&quot;:&quot;INSERT bubu.user_tbl&quot;,\r\n&quot;data&quot;:&quot;insert into user_tbl (age,name,id) values (?,?,?)&quot;,&quot;type&quot;:&quot;SQL&quot;,\r\n&quot;target&quot;:&quot;localhost | bubu&quot;,&quot;duration&quot;:&quot;00:00:00.005135&quot;,&quot;success&quot;:true}}}\r\n...\r\n```\r\n[On Azure it looks exactly same](https://i.stack.imgur.com/Taf3P.png). Any idea what I&#39;m missing in order to get SQL parameters in the trace? Any help or advice appreciated.","title":"Disabling of JDBC masking in Application Insights Agent","body":"<p>I'm attaching the latest Application Insight Java Agent (v3.4.16) programatically within my SpringBoot application (v3.1.3) as described <a href=\"https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-spring-boot#enabling-programmatically\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>I do have <code>applicationinsights.json</code> with my configuration under <code>src/main/resources</code>. It looks like this (cf. <a href=\"https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-standalone-config#jdbc-query-masking\" rel=\"nofollow noreferrer\">documentation</a>):</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;selfDiagnostics&quot;: {\n    &quot;destination&quot;: &quot;console&quot;,\n    &quot;level&quot;: &quot;TRACE&quot;\n  },\n  &quot;instrumentation&quot;: {\n    &quot;jdbc&quot;: {\n      &quot;masking&quot;: {\n        &quot;enabled&quot;: false\n      }\n    }\n  }\n}\n</code></pre>\n<p>The logging level is recognize correctly, so the agent picks up the config file. I can even see stuff reported from my local instance to Azure after providing a valid connection string.</p>\n<p>However I'm still not getting any SQL parameter resolution in the traces. The statements are still masked like this (from my local client logs):</p>\n<pre class=\"lang-json prettyprint-override\"><code>...\n{&quot;ver&quot;:2,&quot;id&quot;:&quot;3ce417f010b210df&quot;,&quot;name&quot;:&quot;INSERT bubu.user_tbl&quot;,\n&quot;data&quot;:&quot;insert into user_tbl (age,name,id) values (?,?,?)&quot;,&quot;type&quot;:&quot;SQL&quot;,\n&quot;target&quot;:&quot;localhost | bubu&quot;,&quot;duration&quot;:&quot;00:00:00.005135&quot;,&quot;success&quot;:true}}}\n...\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Taf3P.png\" rel=\"nofollow noreferrer\">On Azure it looks exactly same</a>. Any idea what I'm missing in order to get SQL parameters in the trace? Any help or advice appreciated.</p>\n"},{"tags":["java","soap","jaxb","marshalling"],"owner":{"account_id":20754912,"reputation":1,"user_id":15241552,"display_name":"CyberHatter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693831922,"creation_date":1688723539,"question_id":76635855,"body_markdown":"I&#39;m trying to marshal a new header to SOAP message, but JAXB only marshalls the root of the Java object. When I try to marshal it to System output the marshalling goes OK.\r\n\r\n*Note: namespaces are replaced with XXX/YYY/... due to stackoverflow spam checks*\r\n\r\nMarhsalling code:\r\n```Java\r\nimport javax.xml.bind.JAXBContext;\r\nimport javax.xml.bind.Marshaller;\r\nimport javax.xml.soap.SOAPHeader;\r\n\r\n// &lt;..&gt;\r\n\r\nprivate void marshal(RequestDestinationMetaDTO requestDestinationMetaDTO, SOAPHeader soapHeader) throws JAXBException {\r\n    final UserContextDTO userContextDTO = new UserContextDTO(...);\r\n    final Marshaller marshaller = JAXBContext.newInstance(UserContextDTO.class).createMarshaller();\r\n    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\r\n    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n    marshaller.marshal(userContextDTO, System.out);\r\n    marshaller.marshal(userContextDTO, soapHeader);\r\n}\r\n```\r\n\r\nObject to marhsal:\r\n```Java\r\npackage ru.solit.esb.apigate.header.manager.dto;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport ru.mos.emias.usercontext.UserContext;\r\n\r\nimport javax.xml.bind.annotation.*;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\n\r\n@XmlRootElement(namespace = UserContextDTO.NAMESPACE_URI, name = &quot;userContext&quot;)\r\n@XmlAccessorType(XmlAccessType.PROPERTY)\r\npublic class UserContextDTO extends UserContext {\r\n\r\n    public static final String NAMESPACE_URI = &quot;YYY&quot;;\r\n\r\n    /**\r\n     * Default constructor for xml marshalling\r\n     * @noinspection unused\r\n     */\r\n    public UserContextDTO() {\r\n        super(null, null, 0L, null, null, 0L, null, null);\r\n    }\r\n\r\n    public UserContextDTO(UserContext userContext) {\r\n        super(\r\n                userContext.getSystemName(),\r\n                userContext.getUserName(),\r\n                userContext.getUserRoleId(),\r\n                userContext.isUserRoleSystemWide(),\r\n                userContext.getUserRights(),\r\n                userContext.getJobExecutionId(),\r\n                userContext.getHostIp(),\r\n                userContext.getHostName()\r\n        );\r\n    }\r\n\r\n    @XmlElement(namespace = NAMESPACE_URI)\r\n    @Override\r\n    public String getSystemName() {\r\n        return super.getSystemName();\r\n    }\r\n\r\n    @XmlElement(namespace = NAMESPACE_URI)\r\n    @Override\r\n    public String getUserName() {\r\n        return super.getUserName();\r\n    }\r\n\r\n    @XmlElement(namespace = NAMESPACE_URI)\r\n    @Override\r\n    public long getUserRoleId() {\r\n        return super.getUserRoleId();\r\n    }\r\n\r\n    @XmlElement(namespace = NAMESPACE_URI)\r\n    @Override\r\n    public Boolean isUserRoleSystemWide() {\r\n        return super.isUserRoleSystemWide();\r\n    }\r\n\r\n    @XmlElement(namespace = NAMESPACE_URI, name = &quot;userRights&quot;)\r\n    public List&lt;UserRightDTO&gt; getUserRightDTOs() {\r\n        final List&lt;Long&gt; userRights = super.getUserRights();\r\n        if (userRights == null) {\r\n            return null;\r\n        } else {\r\n            return userRights.stream().map(UserRightDTO::new).collect(Collectors.toList());\r\n        }\r\n    }\r\n\r\n    @XmlElement(namespace = NAMESPACE_URI)\r\n    @Override\r\n    public long getJobExecutionId() {\r\n        return super.getJobExecutionId();\r\n    }\r\n\r\n    @XmlElement(namespace = NAMESPACE_URI)\r\n    @Override\r\n    public String getHostIp() {\r\n        return super.getHostIp();\r\n    }\r\n\r\n    @XmlElement(namespace = NAMESPACE_URI)\r\n    @Override\r\n    public String getHostName() {\r\n        return super.getHostName();\r\n    }\r\n\r\n    @XmlType(namespace = NAMESPACE_URI)\r\n    @Getter\r\n    @AllArgsConstructor\r\n    private static class UserRightDTO {\r\n\r\n        @XmlElement(namespace = NAMESPACE_URI)\r\n        private Long userRightId;\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nSource message:\r\n```xml\r\n&lt;soap:Envelope xmlns:soap=&quot;...&quot; xmlns:xsi=&quot;...&quot; xmlns:xsd=&quot;...&quot;&gt;\r\n  &lt;soap:Header/&gt;\r\n  &lt;soap:Body&gt;\r\n    &lt;GetSpeech xmlns=&quot;XXX&quot;&gt;\r\n      &lt;Request&gt;string&lt;/Request&gt;\r\n    &lt;/GetSpeech&gt;\r\n  &lt;/soap:Body&gt;\r\n&lt;/soap:Envelope&gt;\r\n```\r\n\r\nSystem.out result:\r\n```xml\r\n&lt;userContext xmlns=&quot;YYY&quot;&gt;\r\n    &lt;jobExecutionId&gt;0&lt;/jobExecutionId&gt;\r\n    &lt;systemName&gt;24cb7aeea4b1f5fcca336243f3b89ebb5131&lt;/systemName&gt;\r\n    &lt;userName&gt;0&lt;/userName&gt;\r\n    &lt;userRights&gt;\r\n        &lt;userRightId&gt;6206941629831905910&lt;/userRightId&gt;\r\n    &lt;/userRights&gt;\r\n    &lt;userRoleId&gt;-8952814757693617916&lt;/userRoleId&gt;\r\n    &lt;userRoleSystemWide&gt;true&lt;/userRoleSystemWide&gt;\r\n&lt;/userContext&gt;\r\n```\r\nMarshalling to header node result:\r\n```xml\r\n&lt;soap:Envelope xmlns:soap=&quot;...&quot; xmlns:xsi=&quot;...&quot; xmlns:xsd=&quot;...&quot;&gt;\r\n  &lt;soap:Header&gt;&lt;ns5:userContext xmlns:ns5=&quot;YYY&quot;/&gt;&lt;/soap:Header&gt;&lt;soap:Body&gt;\r\n    &lt;GetSpeech xmlns=&quot;XXX&quot;&gt;\r\n      &lt;Request&gt;string&lt;/Request&gt;\r\n    &lt;/GetSpeech&gt;\r\n  &lt;/soap:Body&gt;\r\n&lt;/soap:Envelope&gt;\r\n```\r\n\r\nExpecting result:\r\n```xml\r\n&lt;soap:Envelope xmlns:soap=&quot;...&quot; xmlns:xsi=&quot;...&quot; xmlns:xsd=&quot;...&quot;&gt;\r\n  &lt;soap:Header&gt;\r\n&lt;userContext xmlns=&quot;YYY&quot;&gt;\r\n    &lt;jobExecutionId&gt;0&lt;/jobExecutionId&gt;\r\n    &lt;systemName&gt;24cb7aeea4b1f5fcca336243f3b89ebb5131&lt;/systemName&gt;\r\n    &lt;userName&gt;0&lt;/userName&gt;\r\n    &lt;userRights&gt;\r\n        &lt;userRightId&gt;6206941629831905910&lt;/userRightId&gt;\r\n    &lt;/userRights&gt;\r\n    &lt;userRoleId&gt;-8952814757693617916&lt;/userRoleId&gt;\r\n    &lt;userRoleSystemWide&gt;true&lt;/userRoleSystemWide&gt;\r\n&lt;/userContext&gt;\r\n&lt;/soap:Header&gt;&lt;soap:Body&gt;\r\n    &lt;GetSpeech xmlns=&quot;XXX&quot;&gt;\r\n      &lt;Request&gt;string&lt;/Request&gt;\r\n    &lt;/GetSpeech&gt;\r\n  &lt;/soap:Body&gt;\r\n&lt;/soap:Envelope&gt;\r\n```\r\n\r\n---\r\n\r\n**I tried** removing @XmlRootElement(namespace = UserContextDTO.NAMESPACE_URI, name = &quot;userContext&quot;) and marshalling the object as JAXBElement, because I thought it might do the trick:\r\n```Java\r\nmarshaller.marshal(new JAXBElement&lt;&gt;(new QName(&quot;YYY&quot;, &quot;userContext&quot;, &quot;ctx&quot;), UserContextDTO.class, userContextDTO), soapHeader);\r\nmarshaller.marshal(new JAXBElement&lt;&gt;(new QName(&quot;YYY&quot;, &quot;userContext&quot;, &quot;ctx&quot;), UserContextDTO.class, userContextDTO), System.out);\r\n```\r\nBut it just didn&#39;t\r\n\r\n---\r\n\r\n**I tried** marshalling this node into another element - it worked. But if I try to move the node - it just clears its&#39; contents again:\r\n```Java\r\nprivate void marshal(RequestDestinationMetaDTO requestDestinationMetaDTO, SOAPHeader soapHeader) throws JAXBException, SOAPException {\r\n        final UserContextDTO userContextDTO = new UserContextDTO(new UserContextBuilder(\r\n                requestDestinationMetaDTO.getExternalSystemToken(),\r\n                &quot;0&quot;,\r\n                Collections.singletonList(requestDestinationMetaDTO.getPublicationMethodRight()))\r\n                .withUserRoleId(requestDestinationMetaDTO.getExternalSystemUserRoleId())\r\n                .withUserRoleSystemWide(true)\r\n                .withJobExecutionId(0)\r\n                .build());\r\n\r\n        final Marshaller marshaller = JAXBContext.newInstance(UserContextDTO.class).createMarshaller();\r\n        marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\r\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n\r\n        final QName userContextQName = headerManagerQNamesConfiguration.getUserContextQName();\r\n        soapHeader.addNamespaceDeclaration(userContextQName.getPrefix(), userContextQName.getNamespaceURI());\r\n        final SOAPHeaderElement soapHeaderElement = soapHeader.addHeaderElement(userContextQName);\r\n        marshaller.marshal(userContextDTO, soapHeaderElement);\r\n        final SOAPElement soapElement = (SOAPElement) soapHeaderElement.getFirstChild();\r\n        soapHeader.addChildElement(soapElement);\r\n\r\n        marshaller.marshal(userContextDTO, System.out);\r\n    }\r\n```\r\nResult:\r\n```xml\r\n&lt;soap:Envelope xmlns:soap=&quot;...&quot; xmlns:xsi=&quot;...&quot; xmlns:xsd=&quot;...&quot;&gt;\r\n  &lt;soap:Header xmlns:ctx=&quot;YYY&quot;&gt;\r\n    &lt;ctx:userContext&gt;\r\n      &lt;ctx:userContext&gt;\r\n        &lt;ctx:jobExecutionId&gt;0&lt;/ctx:jobExecutionId&gt;\r\n        &lt;ctx:systemName&gt;13b78475c82356f4e9&lt;/ctx:systemName&gt; \r\n        &lt;ctx:userName&gt;0&lt;/ctx:userName&gt;\r\n        &lt;ctx:userRights&gt; \r\n          &lt;ctx:userRightId&gt;-8110359214033630382&lt;/ctx:userRightId&gt; \r\n        &lt;/ctx:userRights&gt; \r\n        &lt;ctx:userRoleId&gt;7497095867686755286&lt;/ctx:userRoleId&gt;\r\n        &lt;ctx:userRoleSystemWide&gt;true&lt;/ctx:userRoleSystemWide&gt;\r\n      &lt;/ctx:userContext&gt;\r\n    &lt;/ctx:userContext&gt;\r\n    &lt;ctx:userContext/&gt;\r\n  &lt;/soap:Header&gt;\r\n  &lt;soap:Body&gt;\r\n    &lt;GetSpeech xmlns=&quot;XXX&quot;&gt;\r\n      &lt;Request&gt;string&lt;/Request&gt;\r\n    &lt;/GetSpeech&gt;\r\n  &lt;/soap:Body&gt;\r\n&lt;/soap:Envelope&gt;\r\n```\r\n\r\n---\r\n\r\n**My temp workaround** is to manually build the node:\r\n```Java\r\nfinal QName userContextQName = headerManagerQNamesConfiguration.getUserContextQName();\r\nsoapHeader.addNamespaceDeclaration(userContextQName.getPrefix(), userContextQName.getNamespaceURI());\r\nfinal SOAPHeaderElement soapHeaderElement = soapHeader.addHeaderElement(userContextQName);\r\nsoapHeaderElement.addChildElement(&quot;systemName&quot;).setTextContent(userContextDTO.getSystemName());\r\nsoapHeaderElement.addChildElement(&quot;userName&quot;).setTextContent(userContextDTO.getUserName());\r\nsoapHeaderElement.addChildElement(&quot;userRoleId&quot;).setTextContent(String.valueOf(userContextDTO.getUserRoleId()));\r\nsoapHeaderElement.addChildElement(&quot;isUserRoleSystemWide&quot;).setTextContent(String.valueOf(userContextDTO.isUserRoleSystemWide()));\r\nfinal SOAPElement soapElement = soapHeaderElement.addChildElement(&quot;userRights&quot;);\r\nfor (Long userRight : userContextDTO.getUserRights()) {\r\n    soapElement.addChildElement(&quot;userRightId&quot;).setTextContent(String.valueOf(userRight));\r\n}\r\nsoapHeaderElement.addChildElement(&quot;jobExecutionId&quot;).setTextContent(String.valueOf(userContextDTO.getJobExecutionId()));\r\n```\r\n","title":"JAXB marshalls only root when marshalling to node","body":"<p>I'm trying to marshal a new header to SOAP message, but JAXB only marshalls the root of the Java object. When I try to marshal it to System output the marshalling goes OK.</p>\n<p><em>Note: namespaces are replaced with XXX/YYY/... due to stackoverflow spam checks</em></p>\n<p>Marhsalling code:</p>\n<pre><code>import javax.xml.bind.JAXBContext;\nimport javax.xml.bind.Marshaller;\nimport javax.xml.soap.SOAPHeader;\n\n// &lt;..&gt;\n\nprivate void marshal(RequestDestinationMetaDTO requestDestinationMetaDTO, SOAPHeader soapHeader) throws JAXBException {\n    final UserContextDTO userContextDTO = new UserContextDTO(...);\n    final Marshaller marshaller = JAXBContext.newInstance(UserContextDTO.class).createMarshaller();\n    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\n    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n    marshaller.marshal(userContextDTO, System.out);\n    marshaller.marshal(userContextDTO, soapHeader);\n}\n</code></pre>\n<p>Object to marhsal:</p>\n<pre><code>package ru.solit.esb.apigate.header.manager.dto;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport ru.mos.emias.usercontext.UserContext;\n\nimport javax.xml.bind.annotation.*;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@XmlRootElement(namespace = UserContextDTO.NAMESPACE_URI, name = &quot;userContext&quot;)\n@XmlAccessorType(XmlAccessType.PROPERTY)\npublic class UserContextDTO extends UserContext {\n\n    public static final String NAMESPACE_URI = &quot;YYY&quot;;\n\n    /**\n     * Default constructor for xml marshalling\n     * @noinspection unused\n     */\n    public UserContextDTO() {\n        super(null, null, 0L, null, null, 0L, null, null);\n    }\n\n    public UserContextDTO(UserContext userContext) {\n        super(\n                userContext.getSystemName(),\n                userContext.getUserName(),\n                userContext.getUserRoleId(),\n                userContext.isUserRoleSystemWide(),\n                userContext.getUserRights(),\n                userContext.getJobExecutionId(),\n                userContext.getHostIp(),\n                userContext.getHostName()\n        );\n    }\n\n    @XmlElement(namespace = NAMESPACE_URI)\n    @Override\n    public String getSystemName() {\n        return super.getSystemName();\n    }\n\n    @XmlElement(namespace = NAMESPACE_URI)\n    @Override\n    public String getUserName() {\n        return super.getUserName();\n    }\n\n    @XmlElement(namespace = NAMESPACE_URI)\n    @Override\n    public long getUserRoleId() {\n        return super.getUserRoleId();\n    }\n\n    @XmlElement(namespace = NAMESPACE_URI)\n    @Override\n    public Boolean isUserRoleSystemWide() {\n        return super.isUserRoleSystemWide();\n    }\n\n    @XmlElement(namespace = NAMESPACE_URI, name = &quot;userRights&quot;)\n    public List&lt;UserRightDTO&gt; getUserRightDTOs() {\n        final List&lt;Long&gt; userRights = super.getUserRights();\n        if (userRights == null) {\n            return null;\n        } else {\n            return userRights.stream().map(UserRightDTO::new).collect(Collectors.toList());\n        }\n    }\n\n    @XmlElement(namespace = NAMESPACE_URI)\n    @Override\n    public long getJobExecutionId() {\n        return super.getJobExecutionId();\n    }\n\n    @XmlElement(namespace = NAMESPACE_URI)\n    @Override\n    public String getHostIp() {\n        return super.getHostIp();\n    }\n\n    @XmlElement(namespace = NAMESPACE_URI)\n    @Override\n    public String getHostName() {\n        return super.getHostName();\n    }\n\n    @XmlType(namespace = NAMESPACE_URI)\n    @Getter\n    @AllArgsConstructor\n    private static class UserRightDTO {\n\n        @XmlElement(namespace = NAMESPACE_URI)\n        private Long userRightId;\n\n    }\n\n}\n\n</code></pre>\n<p>Source message:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;soap:Envelope xmlns:soap=&quot;...&quot; xmlns:xsi=&quot;...&quot; xmlns:xsd=&quot;...&quot;&gt;\n  &lt;soap:Header/&gt;\n  &lt;soap:Body&gt;\n    &lt;GetSpeech xmlns=&quot;XXX&quot;&gt;\n      &lt;Request&gt;string&lt;/Request&gt;\n    &lt;/GetSpeech&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>System.out result:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;userContext xmlns=&quot;YYY&quot;&gt;\n    &lt;jobExecutionId&gt;0&lt;/jobExecutionId&gt;\n    &lt;systemName&gt;24cb7aeea4b1f5fcca336243f3b89ebb5131&lt;/systemName&gt;\n    &lt;userName&gt;0&lt;/userName&gt;\n    &lt;userRights&gt;\n        &lt;userRightId&gt;6206941629831905910&lt;/userRightId&gt;\n    &lt;/userRights&gt;\n    &lt;userRoleId&gt;-8952814757693617916&lt;/userRoleId&gt;\n    &lt;userRoleSystemWide&gt;true&lt;/userRoleSystemWide&gt;\n&lt;/userContext&gt;\n</code></pre>\n<p>Marshalling to header node result:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;soap:Envelope xmlns:soap=&quot;...&quot; xmlns:xsi=&quot;...&quot; xmlns:xsd=&quot;...&quot;&gt;\n  &lt;soap:Header&gt;&lt;ns5:userContext xmlns:ns5=&quot;YYY&quot;/&gt;&lt;/soap:Header&gt;&lt;soap:Body&gt;\n    &lt;GetSpeech xmlns=&quot;XXX&quot;&gt;\n      &lt;Request&gt;string&lt;/Request&gt;\n    &lt;/GetSpeech&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>Expecting result:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;soap:Envelope xmlns:soap=&quot;...&quot; xmlns:xsi=&quot;...&quot; xmlns:xsd=&quot;...&quot;&gt;\n  &lt;soap:Header&gt;\n&lt;userContext xmlns=&quot;YYY&quot;&gt;\n    &lt;jobExecutionId&gt;0&lt;/jobExecutionId&gt;\n    &lt;systemName&gt;24cb7aeea4b1f5fcca336243f3b89ebb5131&lt;/systemName&gt;\n    &lt;userName&gt;0&lt;/userName&gt;\n    &lt;userRights&gt;\n        &lt;userRightId&gt;6206941629831905910&lt;/userRightId&gt;\n    &lt;/userRights&gt;\n    &lt;userRoleId&gt;-8952814757693617916&lt;/userRoleId&gt;\n    &lt;userRoleSystemWide&gt;true&lt;/userRoleSystemWide&gt;\n&lt;/userContext&gt;\n&lt;/soap:Header&gt;&lt;soap:Body&gt;\n    &lt;GetSpeech xmlns=&quot;XXX&quot;&gt;\n      &lt;Request&gt;string&lt;/Request&gt;\n    &lt;/GetSpeech&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<hr />\n<p><strong>I tried</strong> removing @XmlRootElement(namespace = UserContextDTO.NAMESPACE_URI, name = &quot;userContext&quot;) and marshalling the object as JAXBElement, because I thought it might do the trick:</p>\n<pre><code>marshaller.marshal(new JAXBElement&lt;&gt;(new QName(&quot;YYY&quot;, &quot;userContext&quot;, &quot;ctx&quot;), UserContextDTO.class, userContextDTO), soapHeader);\nmarshaller.marshal(new JAXBElement&lt;&gt;(new QName(&quot;YYY&quot;, &quot;userContext&quot;, &quot;ctx&quot;), UserContextDTO.class, userContextDTO), System.out);\n</code></pre>\n<p>But it just didn't</p>\n<hr />\n<p><strong>I tried</strong> marshalling this node into another element - it worked. But if I try to move the node - it just clears its' contents again:</p>\n<pre><code>private void marshal(RequestDestinationMetaDTO requestDestinationMetaDTO, SOAPHeader soapHeader) throws JAXBException, SOAPException {\n        final UserContextDTO userContextDTO = new UserContextDTO(new UserContextBuilder(\n                requestDestinationMetaDTO.getExternalSystemToken(),\n                &quot;0&quot;,\n                Collections.singletonList(requestDestinationMetaDTO.getPublicationMethodRight()))\n                .withUserRoleId(requestDestinationMetaDTO.getExternalSystemUserRoleId())\n                .withUserRoleSystemWide(true)\n                .withJobExecutionId(0)\n                .build());\n\n        final Marshaller marshaller = JAXBContext.newInstance(UserContextDTO.class).createMarshaller();\n        marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n\n        final QName userContextQName = headerManagerQNamesConfiguration.getUserContextQName();\n        soapHeader.addNamespaceDeclaration(userContextQName.getPrefix(), userContextQName.getNamespaceURI());\n        final SOAPHeaderElement soapHeaderElement = soapHeader.addHeaderElement(userContextQName);\n        marshaller.marshal(userContextDTO, soapHeaderElement);\n        final SOAPElement soapElement = (SOAPElement) soapHeaderElement.getFirstChild();\n        soapHeader.addChildElement(soapElement);\n\n        marshaller.marshal(userContextDTO, System.out);\n    }\n</code></pre>\n<p>Result:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;soap:Envelope xmlns:soap=&quot;...&quot; xmlns:xsi=&quot;...&quot; xmlns:xsd=&quot;...&quot;&gt;\n  &lt;soap:Header xmlns:ctx=&quot;YYY&quot;&gt;\n    &lt;ctx:userContext&gt;\n      &lt;ctx:userContext&gt;\n        &lt;ctx:jobExecutionId&gt;0&lt;/ctx:jobExecutionId&gt;\n        &lt;ctx:systemName&gt;13b78475c82356f4e9&lt;/ctx:systemName&gt; \n        &lt;ctx:userName&gt;0&lt;/ctx:userName&gt;\n        &lt;ctx:userRights&gt; \n          &lt;ctx:userRightId&gt;-8110359214033630382&lt;/ctx:userRightId&gt; \n        &lt;/ctx:userRights&gt; \n        &lt;ctx:userRoleId&gt;7497095867686755286&lt;/ctx:userRoleId&gt;\n        &lt;ctx:userRoleSystemWide&gt;true&lt;/ctx:userRoleSystemWide&gt;\n      &lt;/ctx:userContext&gt;\n    &lt;/ctx:userContext&gt;\n    &lt;ctx:userContext/&gt;\n  &lt;/soap:Header&gt;\n  &lt;soap:Body&gt;\n    &lt;GetSpeech xmlns=&quot;XXX&quot;&gt;\n      &lt;Request&gt;string&lt;/Request&gt;\n    &lt;/GetSpeech&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<hr />\n<p><strong>My temp workaround</strong> is to manually build the node:</p>\n<pre><code>final QName userContextQName = headerManagerQNamesConfiguration.getUserContextQName();\nsoapHeader.addNamespaceDeclaration(userContextQName.getPrefix(), userContextQName.getNamespaceURI());\nfinal SOAPHeaderElement soapHeaderElement = soapHeader.addHeaderElement(userContextQName);\nsoapHeaderElement.addChildElement(&quot;systemName&quot;).setTextContent(userContextDTO.getSystemName());\nsoapHeaderElement.addChildElement(&quot;userName&quot;).setTextContent(userContextDTO.getUserName());\nsoapHeaderElement.addChildElement(&quot;userRoleId&quot;).setTextContent(String.valueOf(userContextDTO.getUserRoleId()));\nsoapHeaderElement.addChildElement(&quot;isUserRoleSystemWide&quot;).setTextContent(String.valueOf(userContextDTO.isUserRoleSystemWide()));\nfinal SOAPElement soapElement = soapHeaderElement.addChildElement(&quot;userRights&quot;);\nfor (Long userRight : userContextDTO.getUserRights()) {\n    soapElement.addChildElement(&quot;userRightId&quot;).setTextContent(String.valueOf(userRight));\n}\nsoapHeaderElement.addChildElement(&quot;jobExecutionId&quot;).setTextContent(String.valueOf(userContextDTO.getJobExecutionId()));\n</code></pre>\n"},{"tags":["java","maven","openapi","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":29298550,"reputation":9,"user_id":22447352,"display_name":"Adam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693831242,"creation_date":1693831242,"answer_id":77037794,"question_id":77022215,"body_markdown":"They were part of the openapigenerator-core package for me moving the packages to my main project was enough to fix it.","title":"Missing dependencies in the OpenAPI Generator source code","body":"<p>They were part of the openapigenerator-core package for me moving the packages to my main project was enough to fix it.</p>\n"}],"owner":{"account_id":29298550,"reputation":9,"user_id":22447352,"display_name":"Adam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77037794,"answer_count":1,"score":-1,"last_activity_date":1693831242,"creation_date":1693562877,"question_id":77022215,"body_markdown":"I have downloaded the OpenAPI Generator source code in order to change a few functionalities for my internship. \r\n\r\nBut in doing so I found that org.openapitools.codegen.meta and the org.openapitools.codegen.api are missing from the openapi-generator project. Is it a bug or problem on my part and how to fix it.","title":"Missing dependencies in the OpenAPI Generator source code","body":"<p>I have downloaded the OpenAPI Generator source code in order to change a few functionalities for my internship.</p>\n<p>But in doing so I found that org.openapitools.codegen.meta and the org.openapitools.codegen.api are missing from the openapi-generator project. Is it a bug or problem on my part and how to fix it.</p>\n"},{"tags":["java","log4j","log4j2"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1693830826,"post_id":77037685,"comment_id":135807930,"body_markdown":"How the log4j2.xml looks like after the change?","body":"How the log4j2.xml looks like after the change?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693838900,"post_id":77037685,"comment_id":135809545,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693831169,"creation_date":1693831169,"answer_id":77037787,"question_id":77037685,"body_markdown":"I am not 100% sure what do you want to archive. But from what I understand, you will filter the message in the different files.\r\n\r\nIf yes you can add a `ThresholdFilter` for the different Appender:\r\n\r\n    &lt;Configuration status=&quot;WARN&quot;&gt;\r\n        &lt;Appenders&gt;\r\n            &lt;!-- Define a File appender --&gt;\r\n            &lt;File name=&quot;LogHistoryFile&quot; fileName=&quot;logs\\history.${date:yyyy-MM-dd}.log&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\r\n                &lt;ThresholdFilter level=&quot;INFO&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n            &lt;/File&gt;\r\n            &lt;File name=&quot;LogDebugFile&quot; fileName=&quot;logs\\debug.${date:yyyy-MM-dd}.log&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\r\n                &lt;ThresholdFilter level=&quot;DEBUG&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;            \r\n            &lt;/File&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;!-- Reference a File appender --&gt;\r\n            &lt;Root level=&quot;debug&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;LogHistoryFile&quot; /&gt;\r\n                &lt;AppenderRef ref=&quot;LogDebugFile&quot; /&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;","title":"Log4j not working with multiple appenders","body":"<p>I am not 100% sure what do you want to archive. But from what I understand, you will filter the message in the different files.</p>\n<p>If yes you can add a <code>ThresholdFilter</code> for the different Appender:</p>\n<pre><code>&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;!-- Define a File appender --&gt;\n        &lt;File name=&quot;LogHistoryFile&quot; fileName=&quot;logs\\history.${date:yyyy-MM-dd}.log&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\n            &lt;ThresholdFilter level=&quot;INFO&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n        &lt;/File&gt;\n        &lt;File name=&quot;LogDebugFile&quot; fileName=&quot;logs\\debug.${date:yyyy-MM-dd}.log&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\n            &lt;ThresholdFilter level=&quot;DEBUG&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;            \n        &lt;/File&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;!-- Reference a File appender --&gt;\n        &lt;Root level=&quot;debug&quot;&gt;\n            &lt;AppenderRef ref=&quot;LogHistoryFile&quot; /&gt;\n            &lt;AppenderRef ref=&quot;LogDebugFile&quot; /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":25104242,"reputation":15,"user_id":18954580,"display_name":"qwhjrfbgeegbgwdv"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77037787,"answer_count":1,"score":-1,"last_activity_date":1693831169,"creation_date":1693830274,"question_id":77037685,"body_markdown":"I&#180;m trying to create a simple Login using Apache Tomcat and Java.\r\nFor this I want to log to two different files.\r\n\r\n\r\n```\r\n@WebServlet(&quot;/login&quot;)\r\npublic class ServletLogin extends HttpServlet {\r\n\r\n    private static final Logger logger = LogManager.getLogger(ServletLogin.class);\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n\r\n        String username = request.getParameter(&quot;username&quot;);\r\n        String password = request.getParameter(&quot;password&quot;);\r\n\r\n        if (username != null &amp;&amp; !username.isEmpty() &amp;&amp; password != null &amp;&amp; !password.isEmpty()) {\r\n            if (login(WebServletContextListener.db1, username, password)) {\r\n                HttpSession session = request.getSession();\r\n                session.setAttribute(&quot;username&quot;, username);\r\n                session.setAttribute(&quot;loggedIn&quot;, true);\r\n                logger.info(&quot;Login succeeded for user: {}&quot;, username);\r\n                logger.debug(&quot;Further information...&quot;);\r\n                response.sendRedirect(&quot;jsp/management.jsp&quot;);\r\n                return;\r\n            } else {\r\n                logger.info(&quot;Login failed for user: {}&quot;, username);\r\n                 logger.debug(&quot;Further information...&quot;);\r\n            }\r\n        }\r\n        response.sendRedirect(&quot;jsp/login.jsp?error=1&quot;);\r\n    }\r\n```\r\n\r\nThis is the corresponding log4j2.xml file:\r\n\r\n\r\n```\r\n&lt;Configuration status=&quot;WARN&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;!-- Define a File appender --&gt;\r\n        &lt;File name=&quot;LogHistoryFile&quot; fileName=&quot;logs\\history.${date:yyyy-MM-dd}.log&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\r\n        &lt;/File&gt;\r\n        &lt;File name=&quot;LogDebugFile&quot; fileName=&quot;logs\\debug.${date:yyyy-MM-dd}.log&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\r\n        &lt;/File&gt;\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;!-- Reference a File appender --&gt;\r\n        &lt;Root level=&quot;info&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;LogHistoryFile&quot; /&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nUnfortunately, when adding to the log4j2.xml a second appender, nothing at all gets logged anymore.\r\n\r\n\r\n```\r\n&lt;Root level=&quot;debug&quot;&gt;\r\n   &lt;AppenderRef ref=&quot;LogDebugFile&quot; /&gt;\r\n&lt;/Root&gt;\r\n```\r\n\r\n\r\n\r\n\r\nMaybe somebody of you have an idea what problem I&#180;m dealing with or even has a thread where this topic has been discussed before.\r\n\r\nThanks for your help!","title":"Log4j not working with multiple appenders","body":"<p>I´m trying to create a simple Login using Apache Tomcat and Java.\nFor this I want to log to two different files.</p>\n<pre><code>@WebServlet(&quot;/login&quot;)\npublic class ServletLogin extends HttpServlet {\n\n    private static final Logger logger = LogManager.getLogger(ServletLogin.class);\n\n    @Override\n    protected void doPost(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n\n        String username = request.getParameter(&quot;username&quot;);\n        String password = request.getParameter(&quot;password&quot;);\n\n        if (username != null &amp;&amp; !username.isEmpty() &amp;&amp; password != null &amp;&amp; !password.isEmpty()) {\n            if (login(WebServletContextListener.db1, username, password)) {\n                HttpSession session = request.getSession();\n                session.setAttribute(&quot;username&quot;, username);\n                session.setAttribute(&quot;loggedIn&quot;, true);\n                logger.info(&quot;Login succeeded for user: {}&quot;, username);\n                logger.debug(&quot;Further information...&quot;);\n                response.sendRedirect(&quot;jsp/management.jsp&quot;);\n                return;\n            } else {\n                logger.info(&quot;Login failed for user: {}&quot;, username);\n                 logger.debug(&quot;Further information...&quot;);\n            }\n        }\n        response.sendRedirect(&quot;jsp/login.jsp?error=1&quot;);\n    }\n</code></pre>\n<p>This is the corresponding log4j2.xml file:</p>\n<pre><code>&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;!-- Define a File appender --&gt;\n        &lt;File name=&quot;LogHistoryFile&quot; fileName=&quot;logs\\history.${date:yyyy-MM-dd}.log&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\n        &lt;/File&gt;\n        &lt;File name=&quot;LogDebugFile&quot; fileName=&quot;logs\\debug.${date:yyyy-MM-dd}.log&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot; /&gt;\n        &lt;/File&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;!-- Reference a File appender --&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;LogHistoryFile&quot; /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>Unfortunately, when adding to the log4j2.xml a second appender, nothing at all gets logged anymore.</p>\n<pre><code>&lt;Root level=&quot;debug&quot;&gt;\n   &lt;AppenderRef ref=&quot;LogDebugFile&quot; /&gt;\n&lt;/Root&gt;\n</code></pre>\n<p>Maybe somebody of you have an idea what problem I´m dealing with or even has a thread where this topic has been discussed before.</p>\n<p>Thanks for your help!</p>\n"},{"tags":["java","android","kotlin","android-relativelayout","android-configchanges"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1693829669,"post_id":77037450,"comment_id":135807685,"body_markdown":"&quot;let&#39;s say I have a simple Android app with one RelativeLayout&quot; -- `RelativeLayout` was replaced several years ago by `ConstraintLayout`. &quot;Is there any other way to handle the configuration changes with less efforts?&quot; -- use `ConstraintLayout` and change the constraints.","body":"&quot;let&#39;s say I have a simple Android app with one RelativeLayout&quot; -- <code>RelativeLayout</code> was replaced several years ago by <code>ConstraintLayout</code>. &quot;Is there any other way to handle the configuration changes with less efforts?&quot; -- use <code>ConstraintLayout</code> and change the constraints."},{"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"score":0,"creation_date":1693894119,"post_id":77037450,"comment_id":135815590,"body_markdown":"@CommonsWare, Even if I use a ConstraintLayout I would be changing the constraints for each view on config change. How does this solve the problem? I&#39;m not using ConstraintLayout as I&#39;m using absolute positioning i.e. button.x = 100F","body":"@CommonsWare, Even if I use a ConstraintLayout I would be changing the constraints for each view on config change. How does this solve the problem? I&#39;m not using ConstraintLayout as I&#39;m using absolute positioning i.e. button.x = 100F"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1693912447,"post_id":77037450,"comment_id":135819041,"body_markdown":"&quot;I&#39;m not using ConstraintLayout as I&#39;m using absolute positioning i.e. button.x = 100F&quot; -- that approach has not worked well in a long, long time. Regardless, if you are going to create your UI programmatically, you are going to need to deal with configuration changes programmatically.","body":"&quot;I&#39;m not using ConstraintLayout as I&#39;m using absolute positioning i.e. button.x = 100F&quot; -- that approach has not worked well in a long, long time. Regardless, if you are going to create your UI programmatically, you are going to need to deal with configuration changes programmatically."}],"answers":[{"tags":[],"owner":{"account_id":9001236,"reputation":21,"user_id":6709800,"display_name":"Rashid"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693828470,"creation_date":1693828470,"answer_id":77037477,"question_id":77037450,"body_markdown":"use following liberties\r\n\r\n      implementation &#39;com.intuit.sdp:sdp-android:1.1.0&#39;\r\n      implementation &#39;com.intuit.ssp:ssp-android:1.1.0&#39;\r\n\r\n ","title":"How to handle configuration changes (Screen orientation, App display size etc) in Android programatically","body":"<p>use following liberties</p>\n<pre><code>  implementation 'com.intuit.sdp:sdp-android:1.1.0'\n  implementation 'com.intuit.ssp:ssp-android:1.1.0'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16291299,"reputation":89,"user_id":11764718,"display_name":"Rameswar Tarai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693831026,"creation_date":1693828691,"answer_id":77037501,"question_id":77037450,"body_markdown":" \r\n - You need to have at least one root layout to create your activity.\r\nlet it be LinearLayout\r\n\r\n - add  your views (TextView, Button) programmatically to your LinearLayout\r\n\r\n - Add respective parameters(margin, padding, etc.)\r\n\r\n - add different parameters according to your requirement \r\n\r\n - in the end add the programmatically created views to your root view.\r\n\r\neg:-\r\n\r\n    private TextView getTextView(String text) {\r\n        TextView textView = new TextView(MyLeaveActivity.this);\r\n        textView.setText(text);\r\n        textView.setPadding(20, 20, 20, 20);\r\n        textView.setTextAlignment(TextView.TEXT_ALIGNMENT_CENTER);\r\n\r\n        return textView;\r\n    }\r\n\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_my_leave);\r\n        LinearLayout rootView=findViewById(R.id.maintable);\r\n        TextView l1 = getTextView(data.getSrNo());\r\n        final TableRow row = new TableRow(MyLeaveActivity.this);\r\n        row.addView(l1, new TableRow.LayoutParams());\r\n        rootView.addView(row, new TableLayout.LayoutParams());\r\n}\r\n\r\n\r\n","title":"How to handle configuration changes (Screen orientation, App display size etc) in Android programatically","body":"<ul>\n<li><p>You need to have at least one root layout to create your activity.\nlet it be LinearLayout</p>\n</li>\n<li><p>add  your views (TextView, Button) programmatically to your LinearLayout</p>\n</li>\n<li><p>Add respective parameters(margin, padding, etc.)</p>\n</li>\n<li><p>add different parameters according to your requirement</p>\n</li>\n<li><p>in the end add the programmatically created views to your root view.</p>\n</li>\n</ul>\n<p>eg:-</p>\n<pre><code>private TextView getTextView(String text) {\n    TextView textView = new TextView(MyLeaveActivity.this);\n    textView.setText(text);\n    textView.setPadding(20, 20, 20, 20);\n    textView.setTextAlignment(TextView.TEXT_ALIGNMENT_CENTER);\n\n    return textView;\n}\n\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_my_leave);\n    LinearLayout rootView=findViewById(R.id.maintable);\n    TextView l1 = getTextView(data.getSrNo());\n    final TableRow row = new TableRow(MyLeaveActivity.this);\n    row.addView(l1, new TableRow.LayoutParams());\n    rootView.addView(row, new TableLayout.LayoutParams());\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1693831026,"creation_date":1693828152,"question_id":77037450,"body_markdown":"Yes, there are already a lot of answers available on stack overflow on the same topic, most of them stating the following approach:\r\n\r\nManifest.xml:\r\n\r\n    &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:configChanges=&quot;orientation|screenSize|screenLayout|keyboardHidden&quot;\r\n    &lt;/activity&gt;\r\n\r\nManually handling config changes:\r\n\r\n    override fun onConfigurationChanged (newConfig: Configuration) {\r\n\r\n        super.onConfigurationChanged (newConfig)\r\n        \r\n        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {\r\n\r\n            // TODO block 1:\r\n            \r\n        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {\r\n\r\n            // TODO block 2:\r\n        }\r\n    }\r\n\r\nNow, let&#39;s say I have a simple Android app with one RelativeLayout that contains a button and a text field(EditView). The complete app has been programmatically designed.\r\n\r\nIn portrait mode: The text field and button are one below the other as shown,\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nIn landscape mode, I want the text field and button to be adjacent to each other, to do so I&#39;ll be changing the x, y, height, width, etc inside the TODO block 2 in above mentioned onConfigurationChanged method.\r\n\r\nsimilarly, to handle changes in the app display size (multi-window, multi-screen flip devices) I need to do something similar. (Right now, I don&#39;t know how to handle these changes). \r\n\r\nFow now there are just two views in my relative layout: a button and a text field (EditView), let&#39;s say when there are 50-60 views in my activity I need to change the x, y, height, and width for each of the view and for each of the scenarios (screen orientation, app display size, etc).\r\n\r\nThis seems very tedious to do and maintain for a long time, Is there any other way to handle the configuration changes with less efforts?\r\n\r\nNote: My whole application is design programmatically and without jetpack compose.\r\n\r\nPS: Android docs also does mention that above way isn&#39;t the prefered one\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nI also went through [this link][3], but didn&#39;t seem to be useful for the above scenarios. (correct me if I&#39;m wrong) \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r8bUcm.png\r\n  [2]: https://i.stack.imgur.com/HvTvl.png\r\n  [3]: https://developer.android.com/topic/libraries/architecture/saving-states","title":"How to handle configuration changes (Screen orientation, App display size etc) in Android programatically","body":"<p>Yes, there are already a lot of answers available on stack overflow on the same topic, most of them stating the following approach:</p>\n<p>Manifest.xml:</p>\n<pre><code>&lt;activity\n        android:name=&quot;.MainActivity&quot;\n        android:configChanges=&quot;orientation|screenSize|screenLayout|keyboardHidden&quot;\n&lt;/activity&gt;\n</code></pre>\n<p>Manually handling config changes:</p>\n<pre><code>override fun onConfigurationChanged (newConfig: Configuration) {\n\n    super.onConfigurationChanged (newConfig)\n    \n    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {\n\n        // TODO block 1:\n        \n    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {\n\n        // TODO block 2:\n    }\n}\n</code></pre>\n<p>Now, let's say I have a simple Android app with one RelativeLayout that contains a button and a text field(EditView). The complete app has been programmatically designed.</p>\n<p>In portrait mode: The text field and button are one below the other as shown,</p>\n<p><a href=\"https://i.stack.imgur.com/r8bUcm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r8bUcm.png\" alt=\"enter image description here\" /></a></p>\n<p>In landscape mode, I want the text field and button to be adjacent to each other, to do so I'll be changing the x, y, height, width, etc inside the TODO block 2 in above mentioned onConfigurationChanged method.</p>\n<p>similarly, to handle changes in the app display size (multi-window, multi-screen flip devices) I need to do something similar. (Right now, I don't know how to handle these changes).</p>\n<p>Fow now there are just two views in my relative layout: a button and a text field (EditView), let's say when there are 50-60 views in my activity I need to change the x, y, height, and width for each of the view and for each of the scenarios (screen orientation, app display size, etc).</p>\n<p>This seems very tedious to do and maintain for a long time, Is there any other way to handle the configuration changes with less efforts?</p>\n<p>Note: My whole application is design programmatically and without jetpack compose.</p>\n<p>PS: Android docs also does mention that above way isn't the prefered one</p>\n<p><a href=\"https://i.stack.imgur.com/HvTvl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HvTvl.png\" alt=\"enter image description here\" /></a></p>\n<p>I also went through <a href=\"https://developer.android.com/topic/libraries/architecture/saving-states\" rel=\"nofollow noreferrer\">this link</a>, but didn't seem to be useful for the above scenarios. (correct me if I'm wrong)</p>\n"},{"tags":["java","android","flutter","dart","build.gradle"],"comments":[{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":0,"creation_date":1693837823,"post_id":77036084,"comment_id":135809303,"body_markdown":"Did you run it with --stacktrace? What was the result?","body":"Did you run it with --stacktrace? What was the result?"}],"answers":[{"tags":[],"owner":{"account_id":9987229,"reputation":475,"user_id":9458132,"display_name":"Rajat Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693830447,"creation_date":1693830447,"answer_id":77037701,"question_id":77036084,"body_markdown":"You need to download build tools version 30.0.3 and platform-30 SDK if you&#39;re using it to compile. Check your File&gt;Project Structure and download the required one (30.0.3) using Tools&gt;SDK Manager. \r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iJHF1.png\r\n  [2]: https://i.stack.imgur.com/n4iLa.png","title":"Failed to find Build Tools revision 30.0.3 Facing this issue in flutter while running App in Android emulator","body":"<p>You need to download build tools version 30.0.3 and platform-30 SDK if you're using it to compile. Check your File&gt;Project Structure and download the required one (30.0.3) using Tools&gt;SDK Manager.\n<a href=\"https://i.stack.imgur.com/iJHF1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iJHF1.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/n4iLa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n4iLa.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29361550,"reputation":1,"user_id":22496169,"display_name":"Sher Ali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693830447,"creation_date":1693814976,"question_id":77036084,"body_markdown":"Launching lib\\main.dart on Android SDK built for x86 in debug mode...\r\nRunning Gradle task &#39;assembleDebug&#39;...\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nCould not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;.\r\n&gt; Failed to find Build Tools revision 30.0.3\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 5m 10s\r\nException: Gradle task assembleDebug failed with exit code 1\r\n\r\n\r\nI try everything. I means Youtube, ChatGpt , google , posts in groups, ask from others, but i can&#39;t find any solution of this. problem. The Problem is when i create the app in Android studio. I can run it every platform only it is not running in android Studio. I run it on web it is running but when i run the same app on android studio it issues me this error ","title":"Failed to find Build Tools revision 30.0.3 Facing this issue in flutter while running App in Android emulator","body":"<p>Launching lib\\main.dart on Android SDK built for x86 in debug mode...\nRunning Gradle task 'assembleDebug'...</p>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nCould not determine the dependencies of task ':app:compileDebugJavaWithJavac'.</li>\n</ul>\n<blockquote>\n<p>Failed to find Build Tools revision 30.0.3</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.</p>\n</blockquote>\n<ul>\n<li>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></li>\n</ul>\n<p>BUILD FAILED in 5m 10s\nException: Gradle task assembleDebug failed with exit code 1</p>\n<p>I try everything. I means Youtube, ChatGpt , google , posts in groups, ask from others, but i can't find any solution of this. problem. The Problem is when i create the app in Android studio. I can run it every platform only it is not running in android Studio. I run it on web it is running but when i run the same app on android studio it issues me this error</p>\n"},{"tags":["java","azure-active-directory","msal","spring-resource-server"],"comments":[{"owner":{"account_id":1826174,"reputation":55261,"user_id":1658906,"accept_rate":100,"display_name":"juunas"},"score":0,"creation_date":1693806376,"post_id":77034531,"comment_id":135803855,"body_markdown":"In the client app, you need to use a scope defined on the API app registration (Expose an API page). That should give you an access token that is valid for your API.","body":"In the client app, you need to use a scope defined on the API app registration (Expose an API page). That should give you an access token that is valid for your API."},{"owner":{"account_id":184943,"reputation":35,"user_id":421331,"display_name":"AMIT VISHWAKARMA"},"score":0,"creation_date":1693816579,"post_id":77034531,"comment_id":135805350,"body_markdown":"I have tried by adding API app registration in scope. Then I am not able to login into app after adding it because Spring web app automatically requesting for UserInfo endpoint. There it is getting failed to authentication using generated token.","body":"I have tried by adding API app registration in scope. Then I am not able to login into app after adding it because Spring web app automatically requesting for UserInfo endpoint. There it is getting failed to authentication using generated token."},{"owner":{"account_id":184943,"reputation":35,"user_id":421331,"display_name":"AMIT VISHWAKARMA"},"score":0,"creation_date":1693816625,"post_id":77034531,"comment_id":135805358,"body_markdown":"2023-09-04T13:57:15.090+05:30 DEBUG 5880 --- [ctor-http-nio-3] o.s.s.w.s.a.AuthenticationWebFilter      : Authentication failed: [invalid_user_info_response] An error occurred reading the UserInfo response: [invalid_user_info_response]","body":"2023-09-04T13:57:15.090+05:30 DEBUG 5880 --- [ctor-http-nio-3] o.s.s.w.s.a.AuthenticationWebFilter      : Authentication failed: [invalid_user_info_response] An error occurred reading the UserInfo response: [invalid_user_info_response]"}],"answers":[{"tags":[],"owner":{"account_id":24283882,"reputation":7637,"user_id":18229928,"display_name":"Rukmini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693830341,"creation_date":1693830341,"answer_id":77037694,"question_id":77034531,"body_markdown":"I created an **`BackendApp`** and Exposed an API like below:\r\n\r\n![enter image description here](https://i.imgur.com/wGwMkoR.png)\r\n\r\nIn **`FrontendApp`**, granted below API permissions:\r\n\r\n![enter image description here](https://i.imgur.com/Gk466TR.png)\r\n\r\nIn OBO flow, the web API is used as an identity and then it is used to call any other Web API.\r\n\r\nI generated authorization code by using below endpoint:\r\n\r\nMake sure to use **scope** as **`api://ClientID/.default`**\r\n\r\n ```json\r\nhttps://login.microsoftonline.com/TenantID/oauth2/v2.0/authorize?\r\n&amp;client_id=FrontendClientID\r\n&amp;response_type=code\r\n&amp;redirect_uri=https://jwt.ms\r\n&amp;response_mode=query\r\n&amp;scope=api://BackendID/.default\r\n&amp;state=12345\r\n```\r\n![enter image description here](https://i.imgur.com/t33BBEy.png)\r\n\r\nI generated **access token** using below parameters via Postman:\r\n```json\r\nhttps://login.microsoftonline.com/TenantID/oauth2/v2.0/token\r\n\r\nclient_id:ClientID\r\nscope:api://WebAPIID/.default\r\ncode:code\r\nredirect_uri:https://jwt.ms\r\ngrant_type:authorization_code\r\nclient_secret:ClientSecret\r\n```\r\n![enter image description here](https://i.imgur.com/chEL5TK.png)\r\n\r\n&gt; **Note** that: Using the OBO flow and passing the above access token as assertion you can call any API such as web API or Microsoft Graph.\r\n\r\nFor **sample**, I added API permissions in the `BackendApp` so I can call the Web API:\r\n\r\n![enter image description here](https://i.imgur.com/xRPSv4s.png)\r\n\r\nI used the **OBO flow** to generate access token for Web API:\r\n```json\r\nhttps://login.microsoftonline.com/TenantID/oauth2/v2.0/token\r\n\r\nclient_id:ClientID\r\nclient_secret:ClientSecret\r\ngrant_type:urn:ietf:params:oauth:grant-type:jwt-bearer\r\nassertion:access_token\r\nrequested_token_use:on_behalf_of\r\nscope:api://WebAPIClientID/.default\r\n```\r\n![enter image description here](https://i.imgur.com/8mvPvyl.png)\r\n\r\nWhen I decoded the access token the **aud** is ClientID:\r\n\r\n![enter image description here](https://i.imgur.com/6XsM0jF.png)\r\n\r\nIf you want to call **user endpoint,** then pass the scope as **`https://graph.microsoft.com/.defaut`** while generating the access token in OBO flow,\r\n\r\nTo do the same in Spring and Java, **refer** the below GitHub Blog:\r\n\r\n[ms-identity-java-webapi/README.md at master &#183; Azure-Samples/ms-identity-java-webapi &#183; GitHub](https://github.com/Azure-Samples/ms-identity-java-webapi/blob/master/README.md) by sangonzal\r\n","title":"Getting default aud claim value in access token. How can I get client ID/app ID uri in aud claim?","body":"<p>I created an <strong><code>BackendApp</code></strong> and Exposed an API like below:</p>\n<p><img src=\"https://i.imgur.com/wGwMkoR.png\" alt=\"enter image description here\" /></p>\n<p>In <strong><code>FrontendApp</code></strong>, granted below API permissions:</p>\n<p><img src=\"https://i.imgur.com/Gk466TR.png\" alt=\"enter image description here\" /></p>\n<p>In OBO flow, the web API is used as an identity and then it is used to call any other Web API.</p>\n<p>I generated authorization code by using below endpoint:</p>\n<p>Make sure to use <strong>scope</strong> as <strong><code>api://ClientID/.default</code></strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>https://login.microsoftonline.com/TenantID/oauth2/v2.0/authorize?\n&amp;client_id=FrontendClientID\n&amp;response_type=code\n&amp;redirect_uri=https://jwt.ms\n&amp;response_mode=query\n&amp;scope=api://BackendID/.default\n&amp;state=12345\n</code></pre>\n<p><img src=\"https://i.imgur.com/t33BBEy.png\" alt=\"enter image description here\" /></p>\n<p>I generated <strong>access token</strong> using below parameters via Postman:</p>\n<pre class=\"lang-json prettyprint-override\"><code>https://login.microsoftonline.com/TenantID/oauth2/v2.0/token\n\nclient_id:ClientID\nscope:api://WebAPIID/.default\ncode:code\nredirect_uri:https://jwt.ms\ngrant_type:authorization_code\nclient_secret:ClientSecret\n</code></pre>\n<p><img src=\"https://i.imgur.com/chEL5TK.png\" alt=\"enter image description here\" /></p>\n<blockquote>\n<p><strong>Note</strong> that: Using the OBO flow and passing the above access token as assertion you can call any API such as web API or Microsoft Graph.</p>\n</blockquote>\n<p>For <strong>sample</strong>, I added API permissions in the <code>BackendApp</code> so I can call the Web API:</p>\n<p><img src=\"https://i.imgur.com/xRPSv4s.png\" alt=\"enter image description here\" /></p>\n<p>I used the <strong>OBO flow</strong> to generate access token for Web API:</p>\n<pre class=\"lang-json prettyprint-override\"><code>https://login.microsoftonline.com/TenantID/oauth2/v2.0/token\n\nclient_id:ClientID\nclient_secret:ClientSecret\ngrant_type:urn:ietf:params:oauth:grant-type:jwt-bearer\nassertion:access_token\nrequested_token_use:on_behalf_of\nscope:api://WebAPIClientID/.default\n</code></pre>\n<p><img src=\"https://i.imgur.com/8mvPvyl.png\" alt=\"enter image description here\" /></p>\n<p>When I decoded the access token the <strong>aud</strong> is ClientID:</p>\n<p><img src=\"https://i.imgur.com/6XsM0jF.png\" alt=\"enter image description here\" /></p>\n<p>If you want to call <strong>user endpoint,</strong> then pass the scope as <strong><code>https://graph.microsoft.com/.defaut</code></strong> while generating the access token in OBO flow,</p>\n<p>To do the same in Spring and Java, <strong>refer</strong> the below GitHub Blog:</p>\n<p><a href=\"https://github.com/Azure-Samples/ms-identity-java-webapi/blob/master/README.md\" rel=\"nofollow noreferrer\">ms-identity-java-webapi/README.md at master · Azure-Samples/ms-identity-java-webapi · GitHub</a> by sangonzal</p>\n"}],"owner":{"account_id":184943,"reputation":35,"user_id":421331,"display_name":"AMIT VISHWAKARMA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693830341,"creation_date":1693785736,"question_id":77034531,"body_markdown":"I have created two app registration in azure ad identity service. First one as api ( for Web Rest API) and second one as client ( Web Application). Means generated secret key for client and generated app ID uri for api app registration. Then given access to api to client registration. I have used single tenant option and added client ID as known client in manifest of api registration.\r\n\r\n\r\n    https://login.microsoftonline.com/{tenant-id}/oauth2/v2.0/authorize?client_id=sample_client_id&amp;response_type=code&amp;redirect_uri=http://localhost/login/oauth2/code/azure&amp;response_mode=query&amp;scope=email openid offline_access\r\n\r\nWhen I am calling authorize endpoint (v2.0) with &quot;clientid&quot; and &quot;scope(email, openid, offline_access)&quot; then getting temporary Authorization code. Using that temporary  code I am requesting for access token using token endpoint using grant type &quot;Authorization_code&quot; and passing same scope and client ID.\r\n\r\nWhen I am debugging this access token then I am not getting client ID in aud claim. I want to use this token to generate on_behalf_of token for API by passing this access token as assertion to token endpoint. I am passing appiduri as scope to this obo request. So that I can use this newly generated access token to call API from client app.\r\n\r\n    ConfidentialClientApplication clientApp = ConfidentialClientApplication\r\n\t\t\t\t.builder(clientId, ClientCredentialFactory.createFromSecret(clientSecret)).authority(authority).build();\r\n\t\t\r\n\t\tSet&lt;String&gt; scopes = new HashSet&lt;&gt;();\r\n\t\tscopes.add(appIdUri + &quot;/.default&quot;);\r\n\t\tUserAssertion assertion = new UserAssertion(accessToken);\r\n\t\tOnBehalfOfParameters params = OnBehalfOfParameters.builder(scopes, assertion).build();\t\t\r\n\t\tCompletableFuture&lt;IAuthenticationResult&gt; result = clientApp.acquireToken(params);\r\n\t\tString userInfoAccessToken = result.get().accessToken();\r\n\r\nI am getting error from token endpoint.\r\n\r\nI am using spring and msal Java library for implementation.\r\n\r\n\r\n\r\nPlease help how can I get correct aud claim or can generate obo token for api.","title":"Getting default aud claim value in access token. How can I get client ID/app ID uri in aud claim?","body":"<p>I have created two app registration in azure ad identity service. First one as api ( for Web Rest API) and second one as client ( Web Application). Means generated secret key for client and generated app ID uri for api app registration. Then given access to api to client registration. I have used single tenant option and added client ID as known client in manifest of api registration.</p>\n<pre><code>https://login.microsoftonline.com/{tenant-id}/oauth2/v2.0/authorize?client_id=sample_client_id&amp;response_type=code&amp;redirect_uri=http://localhost/login/oauth2/code/azure&amp;response_mode=query&amp;scope=email openid offline_access\n</code></pre>\n<p>When I am calling authorize endpoint (v2.0) with &quot;clientid&quot; and &quot;scope(email, openid, offline_access)&quot; then getting temporary Authorization code. Using that temporary  code I am requesting for access token using token endpoint using grant type &quot;Authorization_code&quot; and passing same scope and client ID.</p>\n<p>When I am debugging this access token then I am not getting client ID in aud claim. I want to use this token to generate on_behalf_of token for API by passing this access token as assertion to token endpoint. I am passing appiduri as scope to this obo request. So that I can use this newly generated access token to call API from client app.</p>\n<pre><code>ConfidentialClientApplication clientApp = ConfidentialClientApplication\n            .builder(clientId, ClientCredentialFactory.createFromSecret(clientSecret)).authority(authority).build();\n    \n    Set&lt;String&gt; scopes = new HashSet&lt;&gt;();\n    scopes.add(appIdUri + &quot;/.default&quot;);\n    UserAssertion assertion = new UserAssertion(accessToken);\n    OnBehalfOfParameters params = OnBehalfOfParameters.builder(scopes, assertion).build();      \n    CompletableFuture&lt;IAuthenticationResult&gt; result = clientApp.acquireToken(params);\n    String userInfoAccessToken = result.get().accessToken();\n</code></pre>\n<p>I am getting error from token endpoint.</p>\n<p>I am using spring and msal Java library for implementation.</p>\n<p>Please help how can I get correct aud claim or can generate obo token for api.</p>\n"},{"tags":["java","optimization","jvm","jit"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1693796936,"post_id":77034867,"comment_id":135803103,"body_markdown":"If `spin` was declared as `volatile` that might be sufficient.  But check the native code emitted by the JIT compiler.  Another way would be to do a useless calculation in the loop and assign the result to a field.","body":"If <code>spin</code> was declared as <code>volatile</code> that might be sufficient.  But check the native code emitted by the JIT compiler.  Another way would be to do a useless calculation in the loop and assign the result to a field."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1693797798,"post_id":77034867,"comment_id":135803146,"body_markdown":"Perhaps [Thread.onSpinWait()](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html#onSpinWait())?","body":"Perhaps <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html#onSpinWait()\" rel=\"nofollow noreferrer\">Thread.onSpinWait()</a>?"},{"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"score":0,"creation_date":1693812343,"post_id":77034867,"comment_id":135804714,"body_markdown":"does this solve your issue? https://eclipse.dev/openj9/docs/jit/","body":"does this solve your issue? <a href=\"https://eclipse.dev/openj9/docs/jit/\" rel=\"nofollow noreferrer\">eclipse.dev/openj9/docs/jit</a>"},{"owner":{"account_id":5703111,"reputation":651,"user_id":12982817,"display_name":"Ymi"},"score":0,"creation_date":1693812623,"post_id":77034867,"comment_id":135804751,"body_markdown":"onSpinWait() seems to work. @VGR please put it as an answer.","body":"onSpinWait() seems to work. @VGR please put it as an answer."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693830324,"creation_date":1693830324,"answer_id":77037691,"question_id":77034867,"body_markdown":"`Thread.onSpinWait()` is made for this very purpose.  The [documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html#onSpinWait()) even shows an example:\r\n\r\n    volatile boolean eventNotificationNotReceived;\r\n\r\n    void waitForEventAndHandleIt() {\r\n        while (eventNotificationNotReceived) {\r\n            Thread.onSpinWait();\r\n        }\r\n        readAndProcessEvent();\r\n    }\r\n","title":"Busy Spin in Java: Prevent Compiler/JIT optimization","body":"<p><code>Thread.onSpinWait()</code> is made for this very purpose.  The <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html#onSpinWait()\" rel=\"nofollow noreferrer\">documentation</a> even shows an example:</p>\n<pre><code>volatile boolean eventNotificationNotReceived;\n\nvoid waitForEventAndHandleIt() {\n    while (eventNotificationNotReceived) {\n        Thread.onSpinWait();\n    }\n    readAndProcessEvent();\n}\n</code></pre>\n"}],"owner":{"account_id":5703111,"reputation":651,"user_id":12982817,"display_name":"Ymi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77037691,"answer_count":1,"score":0,"last_activity_date":1693830324,"creation_date":1693796627,"question_id":77034867,"body_markdown":"I am trying to perform busy spins in a Java program, and want to prevent the compiler or JIT from optimizing away the code. The code is a simple loop:\r\n\r\n```java\r\nfor (int i = 0; i &lt; spins; i++) {\r\n}\r\n```\r\nwhere spins is the input.\r\n\r\nHow can I prevent this piece of code from being optimized away?","title":"Busy Spin in Java: Prevent Compiler/JIT optimization","body":"<p>I am trying to perform busy spins in a Java program, and want to prevent the compiler or JIT from optimizing away the code. The code is a simple loop:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; spins; i++) {\n}\n</code></pre>\n<p>where spins is the input.</p>\n<p>How can I prevent this piece of code from being optimized away?</p>\n"},{"tags":["java","spring-boot","spring-integration","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":7700422,"reputation":362,"user_id":5833218,"accept_rate":100,"display_name":"Kavindu Gayan"},"score":0,"creation_date":1693824805,"post_id":77037000,"comment_id":135806793,"body_markdown":"The socket timeout, in particular, determines how long your application waits for data from the server before timing out. If you&#39;re experiencing an 8-second gap, it might be due to the setSocketTimeout(8000) configuration, and you can adjust it accordingly.","body":"The socket timeout, in particular, determines how long your application waits for data from the server before timing out. If you&#39;re experiencing an 8-second gap, it might be due to the setSocketTimeout(8000) configuration, and you can adjust it accordingly."},{"owner":{"account_id":25593085,"reputation":95,"user_id":19369457,"display_name":"Somnath Mukherjee"},"score":0,"creation_date":1693825249,"post_id":77037000,"comment_id":135806857,"body_markdown":"I&#39;m fine with the timeout occurring after 8 seconds, but if you examine the timestamps in the logs, you&#39;ll notice that it takes an additional 7-8 seconds to close the connection. This delay ends up causing the overall response time of the application to exceed 8 seconds.","body":"I&#39;m fine with the timeout occurring after 8 seconds, but if you examine the timestamps in the logs, you&#39;ll notice that it takes an additional 7-8 seconds to close the connection. This delay ends up causing the overall response time of the application to exceed 8 seconds."},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1693921964,"post_id":77037000,"comment_id":135821254,"body_markdown":"Any chances to have a simple project from you to play with and reproduce? According to your explanation, it looks like you&#39;d like to not have a delay between `Close connection` and `Shutdown connection` events.","body":"Any chances to have a simple project from you to play with and reproduce? According to your explanation, it looks like you&#39;d like to not have a delay between <code>Close connection</code> and <code>Shutdown connection</code> events."},{"owner":{"account_id":25593085,"reputation":95,"user_id":19369457,"display_name":"Somnath Mukherjee"},"score":0,"creation_date":1693933099,"post_id":77037000,"comment_id":135823795,"body_markdown":"Yes Artem, I&#39;d like to eliminate the additional delay that occurs after a read timeout before shutting down the connection, especially when operating in a high-load, multi-threaded environment.","body":"Yes Artem, I&#39;d like to eliminate the additional delay that occurs after a read timeout before shutting down the connection, especially when operating in a high-load, multi-threaded environment."},{"owner":{"account_id":25593085,"reputation":95,"user_id":19369457,"display_name":"Somnath Mukherjee"},"score":0,"creation_date":1693933303,"post_id":77037000,"comment_id":135823845,"body_markdown":"I didn&#39;t quite understand your request. Could you please clarify how I can send the project to you?","body":"I didn&#39;t quite understand your request. Could you please clarify how I can send the project to you?"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1694179709,"post_id":77037000,"comment_id":135861313,"body_markdown":"Via public GitHub repository. Then I&#39;ll pull it locally, build and run to see what is going on. Perhaps using debug on those Apache HTTP Client classes... Of course, you can debug it yourself and determine what takes some time in the connection pool between those two events on the connection.","body":"Via public GitHub repository. Then I&#39;ll pull it locally, build and run to see what is going on. Perhaps using debug on those Apache HTTP Client classes... Of course, you can debug it yourself and determine what takes some time in the connection pool between those two events on the connection."}],"owner":{"account_id":25593085,"reputation":95,"user_id":19369457,"display_name":"Somnath Mukherjee"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693829867,"creation_date":1693823650,"question_id":77037000,"body_markdown":"I&#39;m currently developing an application using Java 11 and Spring Boot. Within this application, I make calls to two external REST APIs using the RestTemplate library. Below, you&#39;ll find the configuration for my Apache HttpClient:\r\n\r\n```\r\n@Bean\r\n  public RestTemplate proxyRestTemplate() {\r\n    HttpHost proxy = new HttpHost(HTTP_PROXY_HOST, HTTP_PROXY_PORT);\r\n    RequestConfig requestConfig =\r\n        RequestConfig.custom()\r\n            .setProxy(proxy)\r\n            .setCircularRedirectsAllowed(false)\r\n            .setRedirectsEnabled(false)\r\n            .setConnectionRequestTimeout(2000)\r\n            .setConnectTimeout(2000)\r\n            .setSocketTimeout(8000)\r\n            .build();\r\n    PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager();\r\n    connectionManager.setMaxTotal(40);\r\n    connectionManager.setDefaultMaxPerRoute(20);\r\n    connectionManager.closeExpiredConnections();\r\n\r\n    CloseableHttpClient httpClient =\r\n        HttpClientBuilder.create()\r\n            .setConnectionManager(connectionManager)\r\n            .setDefaultRequestConfig(requestConfig)\r\n            .setConnectionManagerShared(true)\r\n            .disableAutomaticRetries()\r\n            .setConnectionTimeToLive(1, TimeUnit.MINUTES)\r\n            .build();\r\n\r\n    HttpComponentsClientHttpRequestFactory requestFactory =\r\n        new HttpComponentsClientHttpRequestFactory(httpClient);\r\n    return new RestTemplate(requestFactory);\r\n  }\r\n```\r\n\r\nWith this configuration, I make calls to two APIs using Spring Integration&#39;s `Http.outboundGateway()`\r\n\r\n```\r\n  public IntegrationFlow getDecision() {\r\n    return flow -&gt; {\r\n      flow.channel(c -&gt; c.executor(getAsyncExecutor()))\r\n          .handle(\r\n              Http.outboundGateway(myURL, restTemplateConfig.proxyRestTemplate())\r\n                  .mappedRequestHeaders(&quot;Authorization&quot;, &quot;Content-Type&quot;)\r\n                  .extractPayload(true)\r\n                  .httpMethod(HttpMethod.POST)\r\n                  .expectedResponseType(String.class));\r\n    };\r\n  }\r\n```\r\n\r\nAfter the read timeout occurs, there is an additional delay of 7-8 seconds before the connection is closed and released back to the connection pool. As a result, my application&#39;s total response time increases to 15-16 seconds, even though my read timeout is set to only 8 seconds. Here are the corresponding log entries for reference:\r\n\r\n```\r\nDEBUG 2023-09-03T21:00:50.646440127Z [resource.labels.containerName: my-service] http-outgoing-9 &gt;&gt; &quot;{&quot;request&quot;:{&quot;Demo request&quot;:&quot;&quot;}\r\nDEBUG 2023-09-03T21:00:58.651312241Z [resource.labels.containerName: my-service] http-outgoing-9 &lt;&lt; &quot;[read] I/O error: Read timed out&quot;\r\nDEBUG 2023-09-03T21:00:58.651390941Z [resource.labels.containerName: my-service] http-outgoing-9: Close connection\r\nDEBUG 2023-09-03T21:01:06.657634687Z [resource.labels.containerName: my-service] http-outgoing-9: Shutdown connection\r\nDEBUG 2023-09-03T21:01:06.657706848Z [resource.labels.containerName: my-service] Connection discarded\r\nDEBUG 2023-09-03T21:01:06.657729276Z [resource.labels.containerName: my-service] Connection released: [id: 9][route: {tls}-&gt;http://ep.threatpulse.net:80-&gt;https://api.xyz.com:443][total available: 3; route allocated: 3 of 20; total allocated: 4 of 40]\r\n```\r\n","title":"After a read timeout, it takes time to shut down the connection in Apache HttpClient","body":"<p>I'm currently developing an application using Java 11 and Spring Boot. Within this application, I make calls to two external REST APIs using the RestTemplate library. Below, you'll find the configuration for my Apache HttpClient:</p>\n<pre><code>@Bean\n  public RestTemplate proxyRestTemplate() {\n    HttpHost proxy = new HttpHost(HTTP_PROXY_HOST, HTTP_PROXY_PORT);\n    RequestConfig requestConfig =\n        RequestConfig.custom()\n            .setProxy(proxy)\n            .setCircularRedirectsAllowed(false)\n            .setRedirectsEnabled(false)\n            .setConnectionRequestTimeout(2000)\n            .setConnectTimeout(2000)\n            .setSocketTimeout(8000)\n            .build();\n    PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager();\n    connectionManager.setMaxTotal(40);\n    connectionManager.setDefaultMaxPerRoute(20);\n    connectionManager.closeExpiredConnections();\n\n    CloseableHttpClient httpClient =\n        HttpClientBuilder.create()\n            .setConnectionManager(connectionManager)\n            .setDefaultRequestConfig(requestConfig)\n            .setConnectionManagerShared(true)\n            .disableAutomaticRetries()\n            .setConnectionTimeToLive(1, TimeUnit.MINUTES)\n            .build();\n\n    HttpComponentsClientHttpRequestFactory requestFactory =\n        new HttpComponentsClientHttpRequestFactory(httpClient);\n    return new RestTemplate(requestFactory);\n  }\n</code></pre>\n<p>With this configuration, I make calls to two APIs using Spring Integration's <code>Http.outboundGateway()</code></p>\n<pre><code>  public IntegrationFlow getDecision() {\n    return flow -&gt; {\n      flow.channel(c -&gt; c.executor(getAsyncExecutor()))\n          .handle(\n              Http.outboundGateway(myURL, restTemplateConfig.proxyRestTemplate())\n                  .mappedRequestHeaders(&quot;Authorization&quot;, &quot;Content-Type&quot;)\n                  .extractPayload(true)\n                  .httpMethod(HttpMethod.POST)\n                  .expectedResponseType(String.class));\n    };\n  }\n</code></pre>\n<p>After the read timeout occurs, there is an additional delay of 7-8 seconds before the connection is closed and released back to the connection pool. As a result, my application's total response time increases to 15-16 seconds, even though my read timeout is set to only 8 seconds. Here are the corresponding log entries for reference:</p>\n<pre><code>DEBUG 2023-09-03T21:00:50.646440127Z [resource.labels.containerName: my-service] http-outgoing-9 &gt;&gt; &quot;{&quot;request&quot;:{&quot;Demo request&quot;:&quot;&quot;}\nDEBUG 2023-09-03T21:00:58.651312241Z [resource.labels.containerName: my-service] http-outgoing-9 &lt;&lt; &quot;[read] I/O error: Read timed out&quot;\nDEBUG 2023-09-03T21:00:58.651390941Z [resource.labels.containerName: my-service] http-outgoing-9: Close connection\nDEBUG 2023-09-03T21:01:06.657634687Z [resource.labels.containerName: my-service] http-outgoing-9: Shutdown connection\nDEBUG 2023-09-03T21:01:06.657706848Z [resource.labels.containerName: my-service] Connection discarded\nDEBUG 2023-09-03T21:01:06.657729276Z [resource.labels.containerName: my-service] Connection released: [id: 9][route: {tls}-&gt;http://ep.threatpulse.net:80-&gt;https://api.xyz.com:443][total available: 3; route allocated: 3 of 20; total allocated: 4 of 40]\n</code></pre>\n"},{"tags":["java","google-chrome","selenium-webdriver","memory-leaks"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1693831453,"post_id":77037555,"comment_id":135808041,"body_markdown":"Capture a head dump and use a heap dump analysis tool like eclipse MAT to find what is using the memory.","body":"Capture a head dump and use a heap dump analysis tool like eclipse MAT to find what is using the memory."},{"owner":{"account_id":295316,"reputation":736,"user_id":3324415,"accept_rate":74,"display_name":"BernardV"},"score":1,"creation_date":1693831648,"post_id":77037555,"comment_id":135808073,"body_markdown":"Just some general feedback, your code is a complete mess! I would honestly say you need to re-write all of it with a re-thought-out design. (Also in future perhaps state the Java version you have built an application in as the answers might differ based on your Java version.","body":"Just some general feedback, your code is a complete mess! I would honestly say you need to re-write all of it with a re-thought-out design. (Also in future perhaps state the Java version you have built an application in as the answers might differ based on your Java version."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1693833935,"post_id":77037555,"comment_id":135808553,"body_markdown":"You should not expect people here to review a big chunk of code and find some specific line of an issue that happens at execution time. Capture heap dumps at execution time when memory is high and analyze them first.","body":"You should not expect people here to review a big chunk of code and find some specific line of an issue that happens at execution time. Capture heap dumps at execution time when memory is high and analyze them first."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1693949649,"post_id":77037555,"comment_id":135826595,"body_markdown":"that first do/while loop looks bad to me...   sort of a mix of do-while and while... and probably infinite.  Then a while with no body afterwards...  hard to follow.  giris1ActionPerformed has some problems with switchTo calls...  but the main cause might be just what you said.. .infinitely repeating and some variable is always getting larger.  Not a leak... but maybe you should poke a hole in it...","body":"that first do/while loop looks bad to me...   sort of a mix of do-while and while... and probably infinite.  Then a while with no body afterwards...  hard to follow.  giris1ActionPerformed has some problems with switchTo calls...  but the main cause might be just what you said.. .infinitely repeating and some variable is always getting larger.  Not a leak... but maybe you should poke a hole in it..."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":1,"creation_date":1693950559,"post_id":77037555,"comment_id":135826706,"body_markdown":"probably need to dispose of things after you write the values.","body":"probably need to dispose of things after you write the values."}],"owner":{"account_id":5127945,"reputation":577,"user_id":4109266,"accept_rate":100,"display_name":"Michael"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693829678,"creation_date":1693829206,"question_id":77037555,"body_markdown":"I created a program that automates a job in my company. I open 3 Chrome tabs, I log into 3 different banks using the giris1ActionPerformed method. After I manually enter the OTPs that come to a phone in the company, I use the giris2ActionPerformed method to navigate to account activities pages for each bank.\r\n\r\nAfter this, I use the baslaActionPerformed method to start my infinitely repeating loop, where I go to each bank one by one, find the newly arrived payments, and write them to a Google e-sheet page. After I do this, I wait 30 seconds and repeat the process.\r\n\r\nThe program works, but there is a memory leak. In a laptop with 16 GB of memory, this program lasts 5 hours. It consumes more and more RAM as time goes on. And in the end, it crashes.\r\n\r\nI do have a thread in the basla method, but I don&#39;t think that is causing the memory leak. Because I don&#39;t keep creating new threads. I just have one thread. And inside that thread, I have an infinite loop.\r\n\r\nI am familiar with debugging but I am not familiar with profiling a software project. Would using the profile tool of Netbeans IDE help find the memory leak?\r\n\r\nI replaced bank passwords and google sheet IDs with &quot;XXX&quot; for privacy.\r\n\r\n```\r\npackage bankaotomasyonu;\r\n\r\nimport com.google.api.client.auth.oauth2.Credential;\r\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\r\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\nimport com.google.api.client.http.HttpTransport;\r\nimport com.google.api.client.json.JsonFactory;\r\nimport com.google.api.client.json.jackson2.JacksonFactory;\r\nimport com.google.api.client.util.store.FileDataStoreFactory;\r\nimport com.google.api.services.sheets.v4.Sheets;\r\nimport com.google.api.services.sheets.v4.SheetsScopes;\r\nimport com.google.api.services.sheets.v4.model.ValueRange;\r\nimport java.awt.Toolkit;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.security.GeneralSecurityException;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WindowType;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\n\r\npublic class ControlPanel extends javax.swing.JFrame\r\n{\r\n\tprivate WebDriver driver;\r\n\tprivate String ziraatHandle;\r\n\tprivate String isHandle;\r\n\tprivate String garantiHandle;\r\n\r\n\tprivate Sheets service;\r\n\tprivate float satisFiyatiDakika = 0.06667F;\r\n\tprivate float satisFiyati = 10;\r\n\tprivate float alisFiyati = 14;\r\n\r\n\tprivate final String APPLICATION_NAME = &quot;Bank Automation&quot;;\r\n\tprivate final String CREDENTIALS_FILE_PATH = &quot;/credentialsClient1.json&quot;;\r\n\tprivate final String TOKENS_DIRECTORY_PATH = &quot;tokens&quot;;\r\n\tprivate final JsonFactory JSON_FACTORY = JacksonFactory.getDefaultInstance();\r\n\tprivate final List&lt;String&gt; SCOPES = Collections.singletonList(SheetsScopes.SPREADSHEETS);\r\n\r\n\tpublic ControlPanel()\r\n\t{\r\n\t\tinitComponents();\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n   // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \r\n   private void initComponents()\r\n   {\r\n\r\n      giris1 = new javax.swing.JButton();\r\n      giris2 = new javax.swing.JButton();\r\n      basla = new javax.swing.JButton();\r\n      jScrollPane2 = new javax.swing.JScrollPane();\r\n      errorScreen = new javax.swing.JTextPane();\r\n\r\n      setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\r\n      setTitle(&quot;Ert&#252;rkler Banka&quot;);\r\n\r\n      giris1.setText(&quot;Giriş 1&quot;);\r\n      giris1.addActionListener(new java.awt.event.ActionListener()\r\n      {\r\n         public void actionPerformed(java.awt.event.ActionEvent evt)\r\n         {\r\n            giris1ActionPerformed(evt);\r\n         }\r\n      });\r\n\r\n      giris2.setText(&quot;Giriş 2&quot;);\r\n      giris2.addActionListener(new java.awt.event.ActionListener()\r\n      {\r\n         public void actionPerformed(java.awt.event.ActionEvent evt)\r\n         {\r\n            giris2ActionPerformed(evt);\r\n         }\r\n      });\r\n\r\n      basla.setText(&quot;Başla&quot;);\r\n      basla.addActionListener(new java.awt.event.ActionListener()\r\n      {\r\n         public void actionPerformed(java.awt.event.ActionEvent evt)\r\n         {\r\n            baslaActionPerformed(evt);\r\n         }\r\n      });\r\n\r\n      jScrollPane2.setViewportView(errorScreen);\r\n\r\n      javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\r\n      getContentPane().setLayout(layout);\r\n      layout.setHorizontalGroup(\r\n         layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n         .addGroup(layout.createSequentialGroup()\r\n            .addGap(20, 20, 20)\r\n            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)\r\n               .addComponent(jScrollPane2, javax.swing.GroupLayout.Alignment.LEADING)\r\n               .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()\r\n                  .addComponent(giris1)\r\n                  .addGap(18, 18, 18)\r\n                  .addComponent(giris2)\r\n                  .addGap(18, 18, 18)\r\n                  .addComponent(basla)\r\n                  .addGap(0, 335, Short.MAX_VALUE)))\r\n            .addGap(20, 20, 20))\r\n      );\r\n      layout.setVerticalGroup(\r\n         layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n         .addGroup(layout.createSequentialGroup()\r\n            .addGap(20, 20, 20)\r\n            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)\r\n               .addComponent(giris1)\r\n               .addComponent(basla)\r\n               .addComponent(giris2))\r\n            .addGap(20, 20, 20)\r\n            .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 204, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n            .addContainerGap(20, Short.MAX_VALUE))\r\n      );\r\n\r\n      pack();\r\n   }// &lt;/editor-fold&gt;                        \r\n\r\n   private void giris1ActionPerformed(java.awt.event.ActionEvent evt)                                       \r\n   {                                           \r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Banka Otomasyon\\\\chromedriver.exe&quot;);\r\n\r\n\t\tdriver = new ChromeDriver();\r\n\t\tdriver.manage().window().maximize();\r\n\r\n\t\t// Ziraat Bankası\r\n\t\tdriver.get(&quot;https://kurumsal.ziraatbank.com.tr/Transactions/Login/FirstLogin.aspx?customertype=crp&quot;);\r\n\t\tdriver.findElement(By.id(&quot;ctl00_c_CorporateIdentityTextBox&quot;)).sendKeys(&quot;XXX&quot;);\r\n\t\tdriver.findElement(By.id(&quot;ctl00_c_CorporatePinTextBox&quot;)).sendKeys(&quot;XXX&quot;); // 3/6 Ayda bir değişen\r\n\t\tdriver.findElement(By.id(&quot;ctl00_c_CorporateUserNameTextBox&quot;)).sendKeys(&quot;XXX&quot;);\r\n\t\tdriver.findElement(By.id(&quot;ctl00_c_CorporateLoginButton&quot;)).click();\r\n\t\tziraatHandle = driver.getWindowHandle();\r\n\r\n\t\t// İş Bankası\r\n\t\tdriver.switchTo().newWindow(WindowType.TAB);\r\n\t\tdriver.get(&quot;https://www.isbank.com.tr/TicariInternet/Transactions/Login/FirstLogin.aspx&quot;);\r\n\t\tdriver.findElement(By.id(&quot;CustomerNumberTextBox&quot;)).sendKeys(&quot;XXX&quot;);\r\n\t\tdriver.findElement(By.id(&quot;CorporateCustomerNumberTextbox&quot;)).sendKeys(&quot;XXX&quot;);\r\n\t\tdriver.findElement(By.id(&quot;PinTextBox&quot;)).sendKeys(&quot;XXX&quot;); // 3/6 Ayda bir değişen\r\n\t\tdriver.findElement(By.id(&quot;ctl00_t_NextButton&quot;)).click();\r\n\t\tisHandle = driver.getWindowHandle();\r\n\r\n\t\t// Garanti Bankası\r\n\t\tdriver.switchTo().newWindow(WindowType.TAB);\r\n\t\tdriver.get(&quot;https://sube.garantibbva.com.tr/isube/login/login/passwordentrycorporate-tr&quot;);\r\n\t\tdriver.findElement(By.id(&quot;custno&quot;)).sendKeys(&quot;XXX&quot;);\r\n\t\tdriver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;XXX&quot;); // 3/6 Ayda bir değişen\r\n\t\tdriver.findElement(By.id(&quot;userid&quot;)).sendKeys(&quot;XXX&quot;);\r\n\t\tdriver.findElement(By.id(&quot;formSubmit&quot;)).click();\r\n\t\tgarantiHandle = driver.getWindowHandle();\r\n   }                                      \r\n\r\n   private void giris2ActionPerformed(java.awt.event.ActionEvent evt)                                       \r\n   {                                           \r\n\t\ttry\r\n\t\t{\r\n\t\t\t// Ziraat Bankası - Vadesiz Hesaplarım\r\n\t\t\tdriver.switchTo().window(ziraatHandle);\r\n\t\t\tdriver.switchTo().frame(&quot;mainFrame&quot;);\r\n\t\t\tdriver.findElement(By.xpath(&quot;/html/body/form/div[3]/div[2]/div[1]/&quot;\r\n\t\t\t\t+ &quot;section[1]/div[2]/div[1]/div[1]/div/a&quot;)).click();\r\n\t\t\tThread.sleep(1000);\r\n\r\n\t\t\t// 5013 NOLU HESAP\r\n\t\t\tdriver.switchTo().frame(&quot;iframe1&quot;);\r\n\t\t\tdriver.findElement(By.id(&quot;ctl00_c_GridDemandDeposit_AccountListSelector&quot;\r\n\t\t\t\t+ &quot;_ctl11_ctl03_AccountName2Panel&quot;)).click();\r\n\t\t\tThread.sleep(1000);\r\n\r\n\t\t\t// Hesap hareketleri\r\n\t\t\tdriver.switchTo().frame(&quot;mainFrame&quot;);\r\n\t\t\tdriver.findElement(By.id(&quot;ctl00_c_AccountHistoryButton&quot;)).click();\r\n\r\n\t\t\t// İş Bankası - Hesaplar\r\n\t\t\tdriver.switchTo().window(isHandle);\r\n\t\t\tdriver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/div[3]/div[2]/&quot;\r\n\t\t\t\t+ &quot;div[1]/div[1]/div[1]&quot;)).click();\r\n\r\n\t\t\t// Hesaplarım\r\n\t\t\tdriver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/div[3]&quot;\r\n\t\t\t\t+ &quot;/div[2]/div[1]/div[1]/div[1]/div[2]/div[1]/div&quot;)).click();\r\n\t\t\tThread.sleep(1000);\r\n\r\n\t\t\t// Hesap Hareketleri\r\n\t\t\tdriver.findElement(By.cssSelector(&quot;#MenuEntityList_tutorialElement_actions&quot;\r\n\t\t\t\t+ &quot; &gt; div:nth-child(3) &gt; div&quot;)).click();\r\n\r\n\t\t\t// Garanti Bankası -\tHesap ve &#220;r&#252;n\r\n\t\t\tdriver.switchTo().window(garantiHandle);\r\n\t\t\tdriver.findElement(By.id(&quot;primary1&quot;)).click();\r\n\r\n\t\t\t// Hesap\r\n\t\t\tdriver.findElement(By.cssSelector(&quot;#primaryLi1 &gt; ul &gt; li:nth-child(1) &gt; a&quot;)).click();\r\n\t\t\tThread.sleep(1000);\r\n\r\n\t\t\t// D&#246;nem\r\n\t\t\tdriver.findElement(By.cssSelector(&quot;#dateRangeText &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div&quot;)).click();\r\n\t\t\tThread.sleep(1000);\r\n\r\n\t\t\t// Son 7 g&#252;n\r\n\t\t\tdriver.findElement(By.xpath(&quot;/html/body/div[2]/div[4]/div[4]/div/div/div/&quot;\r\n\t\t\t\t+ &quot;div/div[3]/div[2]/div[4]/div/div[2]/div/div[2]/div[2]/div[1]/div[2]/&quot;\r\n\t\t\t\t+ &quot;div/form/div[1]/div/div[1]/div[1]/div/div/div/div/div/ul/li[3]/a&quot;)).click();\r\n\t\t\tThread.sleep(1000);\r\n\r\n\t\t\t// G&#246;r&#252;nt&#252;le\r\n\t\t\tdriver.findElement(By.id(&quot;updateSubmitButton&quot;)).click();\r\n\t\t}\r\n\t\tcatch (Exception e)\r\n\t\t{\r\n\t\t\t//System.out.println(e);\r\n\t\t\t//e.printStackTrace();\r\n\r\n\t\t\tshowError(&quot;GIRIS 2&quot;, e.toString());\r\n\t\t}\r\n   }                                      \r\n\r\n   private void baslaActionPerformed(java.awt.event.ActionEvent evt)                                      \r\n   {                                          \r\n\t\ttry\r\n\t\t{\r\n\t\t\tfinal HttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();\r\n\t\t\tservice = new Sheets.Builder(httpTransport, JSON_FACTORY, getCredentials(httpTransport))\r\n\t\t\t\t.setApplicationName(APPLICATION_NAME).build();\r\n\r\n\t\t\tnew Thread(new Runnable()\r\n\t\t\t{\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run()\r\n\t\t\t\t{\r\n\t\t\t\t\twhile (true)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdriver.switchTo().window(ziraatHandle);\r\n\t\t\t\t\t\t\tziraatBank();\r\n\r\n\t\t\t\t\t\t\tdriver.switchTo().window(isHandle);\r\n\t\t\t\t\t\t\tisBank();\r\n\r\n\t\t\t\t\t\t\tdriver.switchTo().window(garantiHandle);\r\n\t\t\t\t\t\t\tgarantiBank();\r\n\r\n\t\t\t\t\t\t\tThread.sleep(30000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcatch (Exception e)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t//System.out.println(e);\r\n\t\t\t\t\t\t\t//e.printStackTrace();\r\n\r\n\t\t\t\t\t\t\tshowError(&quot;BASLA 2&quot;, e.toString());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).start();\r\n\t\t}\r\n\t\tcatch (Exception e)\r\n\t\t{\r\n\t\t\t//System.out.println(e);\r\n\t\t\t//e.printStackTrace();\r\n\r\n\t\t\tshowError(&quot;BASLA 1&quot;, e.toString());\r\n\t\t}\r\n   }                                     \r\n\r\n\tvoid ziraatBank() throws IOException, GeneralSecurityException, InterruptedException\r\n\t{\r\n\t\tList&lt;Object&gt; lastCustomer;\r\n\t\tString lastAciklama;\r\n\t\tString lastAmount;\r\n\t\tArrayList&lt;String&gt; aciklamaList = new ArrayList&lt;&gt;();\r\n\t\tString aciklama;\r\n\t\tString amountString = &quot;0&quot;;\r\n\t\tString customerName = &quot;&quot;;\r\n\t\tString dekontText;\r\n\t\tString[] dekontTextArray;\r\n\r\n\t\t// Hesap Hareketlerini G&#252;ncelle 1\r\n\t\tdriver.switchTo().frame(&quot;iframe1&quot;);\r\n\t\tboolean successfullRead = false;\r\n\t\twhile (!successfullRead)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tdriver.findElement(By.cssSelector(&quot;#ctl00_InnerContentWrapperPanel &gt; a&quot;)).click();\r\n\t\t\t\tsuccessfullRead = true;\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t}\r\n\t\t}\r\n\t\tsuccessfullRead = false;\r\n\r\n\t\t// Hesap Hareketlerini G&#252;ncelle 2\r\n\t\twhile (!successfullRead)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tdriver.switchTo().frame(&quot;mainFrame&quot;);\r\n\t\t\t\tsuccessfullRead = true;\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t}\r\n\t\t}\r\n\t\tsuccessfullRead = false;\r\n\r\n\t\tfor (short row = 1; row &lt;= 3; row++)\r\n\t\t{\r\n\t\t\tif (&quot;MALTEPE E5 - 5013&quot;.equals(driver.findElement(By.cssSelector(&quot;#ctl00_c_AccountBoxSelector_AccountListSelector_ctl11 &quot;\r\n\t\t\t\t+ &quot;&gt; tbody &gt; tr:nth-child(&quot; + row + &quot;) &gt; td.firstColumn &gt; div:nth-child(1)&quot;)).getText()))\r\n\t\t\t{\r\n\t\t\t\tdriver.findElement(By.cssSelector(&quot;#ctl00_c_AccountBoxSelector_AccountListSelector_ctl11 &quot;\r\n\t\t\t\t\t+ &quot;&gt; tbody &gt; tr:nth-child(&quot; + row + &quot;) &gt; td.firstColumn &gt; div:nth-child(1)&quot;)).click();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twhile (!successfullRead)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tdriver.switchTo().frame(&quot;iframe1&quot;);\r\n\t\t\t\tsuccessfullRead = true;\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Find which row is the last customer\r\n\t\tlastCustomer = readLastCustomer(&quot;A1:B1&quot;);\r\n\t\tlastAciklama = lastCustomer.get(0).toString();\r\n\t\tlastAmount = lastCustomer.get(1).toString();\r\n\t\tshort rowNumber = 0;\r\n\r\n\t\tdo\r\n\t\t{\r\n\t\t\trowNumber++;\r\n\t\t\tsuccessfullRead = false;\r\n\t\t\twhile (!successfullRead)\r\n\t\t\t{\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\taciklamaList.add(driver.findElement(By.cssSelector(&quot;#ctl00_c_GridAccountHistoryList&quot;\r\n\t\t\t\t\t\t+ &quot; &gt; tbody &gt; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td.description&quot;)).getText());\r\n\t\t\t\t\tamountString = driver.findElement(By.xpath(&quot;/html/body/form/&quot;\r\n\t\t\t\t\t\t+ &quot;div[3]/div[3]/div[3]/div[1]/div/div[3]/div[2]/div[2]/div/div/&quot;\r\n\t\t\t\t\t\t+ &quot;table/tbody/tr[&quot; + rowNumber + &quot;]/td[4]&quot;)).getText();\r\n\t\t\t\t\tsuccessfullRead = true;\r\n\t\t\t\t}\r\n\t\t\t\tcatch (Exception e)\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} while (!((lastAciklama.equals(aciklamaList.get(rowNumber - 1))) &amp;&amp; (lastAmount.equals(amountString))));\r\n\r\n\t\t// If last row is the last customer, quit\r\n\t\tif (rowNumber != 1)\r\n\t\t{\r\n\t\t\t// Process new customers (the ones after the last customer)\r\n\t\t\tdo\r\n\t\t\t{\r\n\t\t\t\trowNumber--;\r\n\r\n\t\t\t\taciklama = aciklamaList.get(rowNumber - 1);\r\n\r\n\t\t\t\t// Date\r\n\t\t\t\tString date = driver.findElement(By.cssSelector(&quot;#ctl00_c_GridAccountHistoryList &gt;&quot;\r\n\t\t\t\t\t+ &quot; tbody &gt; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td.firstColumn.nowrap.date&quot;)).\r\n\t\t\t\t\tgetText().replace(&quot;/&quot;, &quot;.&quot;);\r\n\r\n\t\t\t\t// Amount\r\n\t\t\t\tamountString = driver.findElement(By.xpath(&quot;/html/body/form/&quot;\r\n\t\t\t\t\t+ &quot;div[3]/div[3]/div[3]/div[1]/div/div[3]/div[2]/div[2]/div/div/&quot;\r\n\t\t\t\t\t+ &quot;table/tbody/tr[&quot; + rowNumber + &quot;]/td[4]&quot;)).getText();\r\n\t\t\t\tif (amountString.startsWith(&quot;-&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\twriteLastCustomer(&quot;A1:B1&quot;, aciklama, amountString);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tfloat amount = Float.parseFloat(amountString.replace(&quot;.&quot;, &quot;&quot;).\r\n\t\t\t\t\treplace(&quot;,&quot;, &quot;.&quot;).replace(&quot; TL&quot;, &quot;&quot;));\r\n\r\n\t\t\t\t// Dekontu a&#231;\r\n\t\t\t\tdriver.findElement(By.cssSelector(&quot;#ctl00_c_GridAccountHistoryList &gt; tbody &gt;&quot;\r\n\t\t\t\t\t+ &quot; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td:nth-child(6) &gt; a&quot;)).click();\r\n\r\n\t\t\t\t// Dekont isim\r\n\t\t\t\tdriver.switchTo().frame(&quot;GenericCustomModalFrame&quot;);\r\n\t\t\t\tdriver.switchTo().frame(&quot;mainFrame&quot;);\r\n\t\t\t\tdekontText = driver.findElement(By.xpath(&quot;/html/body/form/div[3]&quot;\r\n\t\t\t\t\t+ &quot;/div/div[2]/div/table[2]/tbody/tr/td/table[1]/tbody/tr[2]/td/div/&quot;\r\n\t\t\t\t\t+ &quot;table[2]/tbody/tr/td/table/tbody/tr/td[1]&quot;)).getText();\r\n\r\n\t\t\t\t// Dekontu kapat\r\n\t\t\t\tThread.sleep(250);\r\n\t\t\t\tdriver.switchTo().defaultContent();\r\n\t\t\t\tdriver.switchTo().frame(&quot;iframe1&quot;);\r\n\t\t\t\tdriver.findElement(By.xpath(&quot;/html/body/form/div[4]/div/div/div[1]/button&quot;)).click();\r\n\r\n\t\t\t\t// Customer name\r\n\t\t\t\tif (dekontText.contains(&quot;Bor&#231;lu Adı Soyadı : &quot;)) // Mobil havale\r\n\t\t\t\t\tcustomerName = dekontText.split(&quot;Bor&#231;lu Adı Soyadı : &quot;)[1].split(&quot;\\n&quot;)[0];\r\n\t\t\t\telse if (dekontText.contains(&quot;G&#246;nd: &quot;)) // Fast\r\n\t\t\t\t{\r\n\t\t\t\t\tdekontTextArray = dekontText.split(&quot;G&#246;nd: &quot;);\r\n\r\n\t\t\t\t\t// Aciklamada fast varsa VE ilk satır alt cizgi değilse bu kod &#231;alışacak\r\n\t\t\t\t\tif (aciklama.contains(&quot;FAST&quot;) &amp;&amp; !dekontText.startsWith(&quot;_&quot;) &amp;&amp; !dekontText.startsWith(&quot;.&quot;))\r\n\t\t\t\t\t\tcustomerName = dekontTextArray[1].split(dekontText.split(&quot;\\n&quot;)[0])[0];\r\n\t\t\t\t\t// 1- fast yoksa. 2- fast varsa VE ilk satır alt &#231;izgiyse. \r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdekontTextArray = dekontTextArray[1].split(&quot; &quot;);\r\n\t\t\t\t\t\tfor (byte counter = 0; counter &lt;= 2; counter++)\r\n\t\t\t\t\t\t\tif (Character.isUpperCase(dekontTextArray[counter].charAt(0)))\r\n\t\t\t\t\t\t\t\tcustomerName += dekontTextArray[counter] + &quot; &quot;;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcustomerName = customerName.trim().toUpperCase(Locale.forLanguageTag(&quot;TR&quot;));\r\n\t\t\t\t}\r\n\t\t\t\telse if (dekontText.contains(&quot;G&#246;nderen : &quot;)) // Referanslı Gelen Havale\r\n\t\t\t\t\tcustomerName = dekontText.split(&quot;G&#246;nderen : &quot;)[1].split(&quot;\\n&quot;)[0]; // Buranın toUpperCase e ihtiyacı varsa, toUpperCase i assagı at.\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\twriteLastCustomer(&quot;A1:B1&quot;, aciklama, amountString);\r\n\t\t\t\t\tshowError(&quot;ZİRAAT BANKASI&quot;, aciklama);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Google Sheets\r\n\t\t\t\tappendToGoogleSheets(date, amount, customerName, &quot;ZİRAAT BANKASI&quot;);\r\n\r\n\t\t\t\t// Last customer text file\r\n\t\t\t\twriteLastCustomer(&quot;A1:B1&quot;, aciklama, amountString);\r\n\r\n\t\t\t\tcustomerName = &quot;&quot;;\r\n\t\t\t} while (rowNumber &gt; 1);\r\n\t\t}\r\n\r\n\t\tdriver.switchTo().defaultContent();\r\n\t}\r\n\r\n\tvoid isBank() throws IOException, GeneralSecurityException\r\n\t{\r\n\t\tList&lt;Object&gt; lastCustomer;\r\n\t\tString lastAciklama;\r\n\t\tString lastAmount;\r\n\t\tArrayList&lt;String&gt; aciklamaList = new ArrayList&lt;&gt;();\r\n\t\tString aciklama;\r\n\t\tString amountString = &quot;0&quot;;\r\n\t\tString customerName = &quot;&quot;;\r\n\r\n\t\t// Hesap Hareketlerini G&#252;ncelle\r\n\t\tdriver.findElement(By.cssSelector(&quot; #UpdateActivitiesSubMenu_tutorialElement &quot;\r\n\t\t\t+ &quot;&gt; div.sub-menu-item-text&quot;)).click();\r\n\r\n\t\t// Find which row is the last customer\r\n\t\tlastCustomer = readLastCustomer(&quot;A2:B2&quot;);\r\n\t\tlastAciklama = lastCustomer.get(0).toString();\r\n\t\tlastAmount = lastCustomer.get(1).toString();\r\n\t\tshort rowNumber = 0;\r\n\r\n\t\tdo\r\n\t\t{\r\n\t\t\trowNumber++;\r\n\t\t\tboolean successfullRead = false;\r\n\t\t\twhile (!successfullRead)\r\n\t\t\t{\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\taciklamaList.add(driver.findElement(By.xpath(&quot;/html/body/form/div[4]/&quot;\r\n\t\t\t\t\t\t+ &quot;div[3]/div[2]/div/div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/&quot;\r\n\t\t\t\t\t\t+ &quot;div[&quot; + rowNumber + &quot;]/div/div/div[4]/div[2]/div/div&quot;)).getText());\r\n\t\t\t\t\tamountString = driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/&quot;\r\n\t\t\t\t\t\t+ &quot;div[2]/div/div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/div[&quot;\r\n\t\t\t\t\t\t+ rowNumber + &quot;]/div/div/div[6]/div[1]/div/div/div/div/div[1]&quot;)).getText().replace(&quot; &quot;, &quot;&quot;);\r\n\t\t\t\t\tsuccessfullRead = true;\r\n\t\t\t\t}\r\n\t\t\t\tcatch (Exception e)\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} while (!((lastAciklama.equals(aciklamaList.get(rowNumber - 1))) &amp;&amp; (lastAmount.equals(amountString))));\r\n\r\n\t\t// If last row is the last customer, quit\r\n\t\tif (rowNumber != 1)\r\n\t\t{\r\n\t\t\t// Process new customers (the ones after the last customer)\r\n\t\t\tdo\r\n\t\t\t{\r\n\t\t\t\trowNumber--;\r\n\r\n\t\t\t\taciklama = aciklamaList.get(rowNumber - 1);\r\n\r\n\t\t\t\t// Date\r\n\t\t\t\tString date = driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/div[2]/&quot;\r\n\t\t\t\t\t+ &quot;div/div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/div[&quot; + rowNumber\r\n\t\t\t\t\t+ &quot;]/div/div/div[2]/div[1]/div/div/div/div[1]&quot;)).getText().replace(&quot;/&quot;, &quot;.&quot;);\r\n\r\n\t\t\t\t// Amount\r\n\t\t\t\tamountString = driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/&quot;\r\n\t\t\t\t\t+ &quot;div[2]/div/div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/div[&quot;\r\n\t\t\t\t\t+ rowNumber + &quot;]/div/div/div[6]/div[1]/div/div/div/div/div[1]&quot;)).getText().replace(&quot; &quot;, &quot;&quot;);\r\n\t\t\t\tif (amountString.startsWith(&quot;-&quot;) || aciklama.contains(&quot;VODAFONE&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\twriteLastCustomer(&quot;A2:B2&quot;, aciklama, amountString);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tfloat amount = Float.parseFloat(amountString.substring(1).replace(&quot;,&quot;, &quot;&quot;));\r\n\r\n\t\t\t\t// Customer Name\r\n\t\t\t\tif (driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/div[2]/div/&quot;\r\n\t\t\t\t\t+ &quot;div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/div[&quot; + rowNumber\r\n\t\t\t\t\t+ &quot;]/div/div/div[2]/div[2]/div/div&quot;)).getText().equals(&quot;Bankamatik&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\tString[] arrOfAciklama = aciklama.split(&quot; &quot;);\r\n\t\t\t\t\tif (arrOfAciklama.length &gt; 1 &amp; arrOfAciklama.length &lt; 4)\r\n\t\t\t\t\t\tcustomerName = (arrOfAciklama.length == 2) ? arrOfAciklama[1] + &quot; &quot;\r\n\t\t\t\t\t\t\t+ arrOfAciklama[0] : arrOfAciklama[1] + arrOfAciklama[2] + arrOfAciklama[0];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twriteLastCustomer(&quot;A2:B2&quot;, aciklama, amountString);\r\n\t\t\t\t\t\tshowError(&quot;İŞ BANKASI&quot;, aciklama);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (aciklama.contains(&quot;tarafından&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\tcustomerName = aciklama.split(&quot;tarafından&quot;, 2)[0].trim();\r\n\t\t\t\t}\r\n\t\t\t\telse if (aciklama.contains(&quot;*&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\tif (Character.isDigit(aciklama.split(&quot;\\\\*&quot;)[1].charAt(0)))\r\n\t\t\t\t\t\tcustomerName = aciklama.split(&quot;\\\\*&quot;)[0];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tcustomerName = aciklama.split(&quot;\\\\*&quot;)[1];\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\twriteLastCustomer(&quot;A2:B2&quot;, aciklama, amountString);\r\n\t\t\t\t\tshowError(&quot;İŞ BANKASI&quot;, aciklama);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcustomerName = customerName.toUpperCase(Locale.forLanguageTag(&quot;TR&quot;));\r\n\r\n\t\t\t\t// Google Sheets\r\n\t\t\t\tappendToGoogleSheets(date, amount, customerName, &quot;İŞ BANKASI&quot;);\r\n\r\n\t\t\t\t// Save last customer\r\n\t\t\t\twriteLastCustomer(&quot;A2:B2&quot;, aciklama, amountString);\r\n\r\n\t\t\t} while (rowNumber &gt; 1);\r\n\t\t}\r\n\t}\r\n\r\n\tvoid garantiBank() throws IOException, GeneralSecurityException, InterruptedException\r\n\t{\r\n\t\tList&lt;Object&gt; lastCustomer;\r\n\t\tString lastAciklama;\r\n\t\tString lastAmount;\r\n\t\tArrayList&lt;String&gt; aciklamaList = new ArrayList&lt;&gt;();\r\n\t\tString aciklama;\r\n\t\tString amountString = &quot;0&quot;;\r\n\t\tString customerName = &quot;&quot;;\r\n\t\tString dekontText;\r\n\r\n\t\t// G&#246;r&#252;nt&#252;le\r\n\t\tdriver.findElement(By.id(&quot;updateSubmitButton&quot;)).click();\r\n\t\tThread.sleep(500);\r\n\r\n\t\t// Find which row is the last customer\r\n\t\tlastCustomer = readLastCustomer(&quot;A3:B3&quot;);\r\n\t\tlastAciklama = lastCustomer.get(0).toString();\r\n\t\tlastAmount = lastCustomer.get(1).toString();\r\n\t\tshort rowNumber = 0;\r\n\r\n\t\tdo\r\n\t\t{\r\n\t\t\trowNumber++;\r\n\t\t\tboolean successfullRead = false;\r\n\t\t\twhile (!successfullRead)\r\n\t\t\t{\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\taciklamaList.add(driver.findElement(By.cssSelector(&quot;#myAccountActivitiesGrid &gt; tbody &gt; tr:nth-child(&quot;\r\n\t\t\t\t\t\t+ rowNumber + &quot;) &gt; td.customHoverEnabled &gt; div &gt; div:nth-child(1)&quot;)).getText());\r\n\t\t\t\t\tamountString = driver.findElement(By.cssSelector(&quot;#myAccountActivitiesGrid &gt; &quot;\r\n\t\t\t\t\t\t+ &quot;tbody &gt; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td:nth-child(4) &gt; div&quot;)).getText();\r\n\t\t\t\t\tsuccessfullRead = true;\r\n\t\t\t\t}\r\n\t\t\t\tcatch (Exception e)\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} while (!((lastAciklama.equals(aciklamaList.get(rowNumber - 1))) &amp;&amp; (lastAmount.equals(amountString))));\r\n\r\n\t\t// If last row is the last customer, quit\r\n\t\tif (rowNumber != 1)\r\n\t\t{\r\n\t\t\t// Process new customers (the ones after the last customer)\r\n\t\t\tdo\r\n\t\t\t{\r\n\t\t\t\trowNumber--;\r\n\r\n\t\t\t\taciklama = aciklamaList.get(rowNumber - 1);\r\n\r\n\t\t\t\t// Amount\r\n\t\t\t\tamountString = driver.findElement(By.cssSelector(&quot;#myAccountActivitiesGrid &gt; &quot;\r\n\t\t\t\t\t+ &quot;tbody &gt; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td:nth-child(4) &gt; div&quot;)).getText();\r\n\t\t\t\tif (amountString.startsWith(&quot;-&quot;) || aciklama.startsWith(&quot;PK&quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\twriteLastCustomer(&quot;A3:B3&quot;, aciklama, amountString);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tfloat amount = Float.parseFloat(amountString.substring(1).\r\n\t\t\t\t\treplace(&quot;.&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;.&quot;).replace(&quot; TL&quot;, &quot;&quot;));\r\n\r\n\t\t\t\t// Dekontu a&#231;\r\n\t\t\t\tdriver.findElement(By.cssSelector(&quot;#myAccountActivitiesGrid &gt; tbody &gt; &quot;\r\n\t\t\t\t\t+ &quot;tr:nth-child(&quot; + rowNumber + &quot;) &gt; td:nth-child(3) &gt; a&quot;)).click();\r\n\t\t\t\tThread.sleep(1000);\r\n\r\n\t\t\t\t// Dekont date\r\n\t\t\t\tString date = driver.findElement(By.cssSelector(&quot; #receiptScroll &quot; // you can try putting this into an infinite loop like ziraat guncelleme\r\n\t\t\t\t\t+ &quot;&gt; div &gt; table.receiptContainerTable &gt; tbody &gt; tr:nth-child(1) &quot;\r\n\t\t\t\t\t+ &quot;&gt; td:nth-child(1) &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td &gt; pre&quot;)).\r\n\t\t\t\t\tgetText().split(&quot;İŞLEM TARİHİ     : &quot;)[1].split(&quot;\\n&quot;)[0].trim().\r\n\t\t\t\t\treplace(&quot;/&quot;, &quot;.&quot;); // substring(1).trim().replace(&quot;/&quot;, &quot;.&quot;);\r\n\r\n\t\t\t\t// Dekont isim\r\n\t\t\t\tdekontText = driver.findElement(By.xpath(&quot;/html/body/div[2]/div[4]/div[7]/div[1]/div/div/&quot;\r\n\t\t\t\t\t+ &quot;div[2]/form/div[2]/div/table[2]/tbody/tr[2]/td/table/tbody/tr[2]/td/pre&quot;)).getText();\r\n\r\n\t\t\t\t// Dekontu kapat\r\n\t\t\t\tdriver.findElement(By.xpath(&quot;/html/body/div[2]/div[4]/div[7]/div[1]/div/div/div[1]/a&quot;)).click();\r\n\r\n\t\t\t\t// Customer name                \r\n\t\t\t\tif (dekontText.contains(&quot;BOR&#199;LU HESAP&quot;)) // hesaptan hesaba havale\r\n\t\t\t\t\tcustomerName = dekontText.split(&quot;\\n&quot;)[3].substring(42).trim();\r\n\t\t\t\t// &quot;gelen fast&quot;, &quot;gelen eft&quot;, &quot;kredi kartindan hesaba havale&quot;, &quot;hesaba havale (kasadan)&quot; (atm)\r\n\t\t\t\telse if (dekontText.contains(&quot;G&#214;NDEREN  &quot;))\r\n\t\t\t\t{\r\n\t\t\t\t\tcustomerName = dekontText.split(&quot;G&#214;NDEREN  &quot;)[1].split(&quot;\\n&quot;)[0].trim().substring(2);\r\n\t\t\t\t\t//customerName = dekontText.split(&quot;\\n&quot;)[1].substring(21).trim();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\twriteLastCustomer(&quot;A3:B3&quot;, aciklama, amountString);\r\n\t\t\t\t\tshowError(&quot;GARANTİ BANKASI&quot;, aciklama);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Google Sheets\r\n\t\t\t\tappendToGoogleSheets(date, amount, customerName, &quot;GARANTİ BANKASI&quot;);\r\n\r\n\t\t\t\t// Last customer text file\r\n\t\t\t\twriteLastCustomer(&quot;A3:B3&quot;, aciklama, amountString);\r\n\r\n\t\t\t} while (rowNumber &gt; 1);\r\n\t\t}\r\n\t}\r\n\r\n\tvoid appendToGoogleSheets(String date, float amount, String customerName, String bankName) throws IOException, GeneralSecurityException\r\n\t{\r\n\t\tString spreadsheetId = &quot;XXX&quot;; //XXX\r\n\t\tString range = &quot;A:K&quot;;\r\n\t\tList&lt;List&lt;Object&gt;&gt; newValues = new ArrayList&lt;&gt;();\r\n\r\n\t\tfloat dakika = Math.round(amount / satisFiyatiDakika);\r\n\t\tfloat adet = Math.round((amount / satisFiyati) * 100.0F) / 100.0F;\r\n\t\tfloat maliyet = Math.round((adet * alisFiyati) * 100.0F) / 100.0F;\r\n\t\tfloat fark = Math.round((amount - maliyet) * 100.0F) / 100.0F;\r\n\r\n\t\tnewValues.add(Arrays.asList(date, amount, dakika, adet, maliyet, fark,\r\n\t\t\t&quot;&quot;, &quot;&quot;, customerName, bankName, &quot;X+&quot;));\r\n\r\n\t\t// Append the new data starting from the first empty row in column A\r\n\t\tValueRange valueRange = new ValueRange().setValues(newValues);\r\n\r\n\t\tservice.spreadsheets().values().append(spreadsheetId, range, valueRange)\r\n\t\t\t.setValueInputOption(&quot;RAW&quot;).execute();\r\n\t}\r\n\r\n\tList readLastCustomer(String range) throws IOException\r\n\t{\r\n\t\tString spreadsheetId = &quot;XXX&quot;;\r\n\t\tValueRange response = service.spreadsheets().values().get(spreadsheetId, range).execute();\r\n\t\tList&lt;List&lt;Object&gt;&gt; values = response.getValues();\r\n\t\treturn values.get(0);\r\n\t}\r\n\r\n\tvoid writeLastCustomer(String range, String aciklama, String amount) throws IOException\r\n\t{\r\n\t\tString spreadsheetId = &quot;XXX&quot;;\r\n\r\n\t\tValueRange valueRange = new ValueRange().setValues(Arrays.asList(\r\n\t\t\tArrays.asList((Object) aciklama, (Object) amount)));\r\n\r\n\t\tservice.spreadsheets().values().update(spreadsheetId, range, valueRange)\r\n\t\t\t.setValueInputOption(&quot;RAW&quot;).execute();\r\n\t}\r\n\r\n\tvoid showError(String banka, String aciklama)\r\n\t{\r\n\t\tToolkit.getDefaultToolkit().beep();\r\n\t\terrorScreen.setText(errorScreen.getText() + banka + &quot; &quot; + aciklama + &quot;\\n\\n&quot;);\r\n\t}\r\n\r\n\tprivate Credential getCredentials(final HttpTransport httpTransport) throws IOException\r\n\t{\r\n\t\tInputStream credentialsStream = ControlPanel.class\r\n\t\t\t.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n\t\tGoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY,\r\n\t\t\tnew InputStreamReader(credentialsStream));\r\n\r\n\t\tGoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n\t\t\thttpTransport, JSON_FACTORY, clientSecrets, SCOPES)\r\n\t\t\t.setDataStoreFactory(new FileDataStoreFactory(new java.io.File(TOKENS_DIRECTORY_PATH)))\r\n\t\t\t.setAccessType(&quot;offline&quot;).build();\r\n\r\n\t\treturn new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver.Builder().setPort(8888).build())\r\n\t\t\t.authorize(&quot;user&quot;);\r\n\t}\r\n\r\n\t/**\r\n\t * @param args the command line arguments\r\n\t */\r\n\tpublic static void main(String args[])\r\n\t{\r\n\t\t/* Set the Nimbus look and feel */\r\n\t\t//&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;\r\n\t\t/* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.\r\n         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html \r\n\t\t */\r\n\t\ttry\r\n\t\t{\r\n\t\t\tfor (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels())\r\n\t\t\t{\r\n\t\t\t\tif (&quot;Nimbus&quot;.equals(info.getName()))\r\n\t\t\t\t{\r\n\t\t\t\t\tjavax.swing.UIManager.setLookAndFeel(info.getClassName());\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (ClassNotFoundException ex)\r\n\t\t{\r\n\t\t\tjava.util.logging.Logger.getLogger(ControlPanel.class\r\n\t\t\t\t.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n\r\n\t\t}\r\n\t\tcatch (InstantiationException ex)\r\n\t\t{\r\n\t\t\tjava.util.logging.Logger.getLogger(ControlPanel.class\r\n\t\t\t\t.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n\r\n\t\t}\r\n\t\tcatch (IllegalAccessException ex)\r\n\t\t{\r\n\t\t\tjava.util.logging.Logger.getLogger(ControlPanel.class\r\n\t\t\t\t.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n\r\n\t\t}\r\n\t\tcatch (javax.swing.UnsupportedLookAndFeelException ex)\r\n\t\t{\r\n\t\t\tjava.util.logging.Logger.getLogger(ControlPanel.class\r\n\t\t\t\t.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n\t\t}\r\n\t\t//&lt;/editor-fold&gt;\r\n\r\n\t\t/* Create and display the form */\r\n\t\tjava.awt.EventQueue.invokeLater(new Runnable()\r\n\t\t{\r\n\t\t\tpublic void run()\r\n\t\t\t{\r\n\t\t\t\tnew ControlPanel().setVisible(true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n   // Variables declaration - do not modify                     \r\n   private javax.swing.JButton basla;\r\n   private javax.swing.JTextPane errorScreen;\r\n   private javax.swing.JButton giris1;\r\n   private javax.swing.JButton giris2;\r\n   private javax.swing.JScrollPane jScrollPane2;\r\n   // End of variables declaration                   \r\n}\r\n```","title":"Why does my infinitely repeating selenium java code have memory leak?","body":"<p>I created a program that automates a job in my company. I open 3 Chrome tabs, I log into 3 different banks using the giris1ActionPerformed method. After I manually enter the OTPs that come to a phone in the company, I use the giris2ActionPerformed method to navigate to account activities pages for each bank.</p>\n<p>After this, I use the baslaActionPerformed method to start my infinitely repeating loop, where I go to each bank one by one, find the newly arrived payments, and write them to a Google e-sheet page. After I do this, I wait 30 seconds and repeat the process.</p>\n<p>The program works, but there is a memory leak. In a laptop with 16 GB of memory, this program lasts 5 hours. It consumes more and more RAM as time goes on. And in the end, it crashes.</p>\n<p>I do have a thread in the basla method, but I don't think that is causing the memory leak. Because I don't keep creating new threads. I just have one thread. And inside that thread, I have an infinite loop.</p>\n<p>I am familiar with debugging but I am not familiar with profiling a software project. Would using the profile tool of Netbeans IDE help find the memory leak?</p>\n<p>I replaced bank passwords and google sheet IDs with &quot;XXX&quot; for privacy.</p>\n<pre><code>package bankaotomasyonu;\n\nimport com.google.api.client.auth.oauth2.Credential;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.jackson2.JacksonFactory;\nimport com.google.api.client.util.store.FileDataStoreFactory;\nimport com.google.api.services.sheets.v4.Sheets;\nimport com.google.api.services.sheets.v4.SheetsScopes;\nimport com.google.api.services.sheets.v4.model.ValueRange;\nimport java.awt.Toolkit;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.security.GeneralSecurityException;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Locale;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WindowType;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class ControlPanel extends javax.swing.JFrame\n{\n    private WebDriver driver;\n    private String ziraatHandle;\n    private String isHandle;\n    private String garantiHandle;\n\n    private Sheets service;\n    private float satisFiyatiDakika = 0.06667F;\n    private float satisFiyati = 10;\n    private float alisFiyati = 14;\n\n    private final String APPLICATION_NAME = &quot;Bank Automation&quot;;\n    private final String CREDENTIALS_FILE_PATH = &quot;/credentialsClient1.json&quot;;\n    private final String TOKENS_DIRECTORY_PATH = &quot;tokens&quot;;\n    private final JsonFactory JSON_FACTORY = JacksonFactory.getDefaultInstance();\n    private final List&lt;String&gt; SCOPES = Collections.singletonList(SheetsScopes.SPREADSHEETS);\n\n    public ControlPanel()\n    {\n        initComponents();\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n   // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \n   private void initComponents()\n   {\n\n      giris1 = new javax.swing.JButton();\n      giris2 = new javax.swing.JButton();\n      basla = new javax.swing.JButton();\n      jScrollPane2 = new javax.swing.JScrollPane();\n      errorScreen = new javax.swing.JTextPane();\n\n      setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\n      setTitle(&quot;Ertürkler Banka&quot;);\n\n      giris1.setText(&quot;Giriş 1&quot;);\n      giris1.addActionListener(new java.awt.event.ActionListener()\n      {\n         public void actionPerformed(java.awt.event.ActionEvent evt)\n         {\n            giris1ActionPerformed(evt);\n         }\n      });\n\n      giris2.setText(&quot;Giriş 2&quot;);\n      giris2.addActionListener(new java.awt.event.ActionListener()\n      {\n         public void actionPerformed(java.awt.event.ActionEvent evt)\n         {\n            giris2ActionPerformed(evt);\n         }\n      });\n\n      basla.setText(&quot;Başla&quot;);\n      basla.addActionListener(new java.awt.event.ActionListener()\n      {\n         public void actionPerformed(java.awt.event.ActionEvent evt)\n         {\n            baslaActionPerformed(evt);\n         }\n      });\n\n      jScrollPane2.setViewportView(errorScreen);\n\n      javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\n      getContentPane().setLayout(layout);\n      layout.setHorizontalGroup(\n         layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n         .addGroup(layout.createSequentialGroup()\n            .addGap(20, 20, 20)\n            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)\n               .addComponent(jScrollPane2, javax.swing.GroupLayout.Alignment.LEADING)\n               .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()\n                  .addComponent(giris1)\n                  .addGap(18, 18, 18)\n                  .addComponent(giris2)\n                  .addGap(18, 18, 18)\n                  .addComponent(basla)\n                  .addGap(0, 335, Short.MAX_VALUE)))\n            .addGap(20, 20, 20))\n      );\n      layout.setVerticalGroup(\n         layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n         .addGroup(layout.createSequentialGroup()\n            .addGap(20, 20, 20)\n            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)\n               .addComponent(giris1)\n               .addComponent(basla)\n               .addComponent(giris2))\n            .addGap(20, 20, 20)\n            .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 204, javax.swing.GroupLayout.PREFERRED_SIZE)\n            .addContainerGap(20, Short.MAX_VALUE))\n      );\n\n      pack();\n   }// &lt;/editor-fold&gt;                        \n\n   private void giris1ActionPerformed(java.awt.event.ActionEvent evt)                                       \n   {                                           \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Banka Otomasyon\\\\chromedriver.exe&quot;);\n\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n\n        // Ziraat Bankası\n        driver.get(&quot;https://kurumsal.ziraatbank.com.tr/Transactions/Login/FirstLogin.aspx?customertype=crp&quot;);\n        driver.findElement(By.id(&quot;ctl00_c_CorporateIdentityTextBox&quot;)).sendKeys(&quot;XXX&quot;);\n        driver.findElement(By.id(&quot;ctl00_c_CorporatePinTextBox&quot;)).sendKeys(&quot;XXX&quot;); // 3/6 Ayda bir değişen\n        driver.findElement(By.id(&quot;ctl00_c_CorporateUserNameTextBox&quot;)).sendKeys(&quot;XXX&quot;);\n        driver.findElement(By.id(&quot;ctl00_c_CorporateLoginButton&quot;)).click();\n        ziraatHandle = driver.getWindowHandle();\n\n        // İş Bankası\n        driver.switchTo().newWindow(WindowType.TAB);\n        driver.get(&quot;https://www.isbank.com.tr/TicariInternet/Transactions/Login/FirstLogin.aspx&quot;);\n        driver.findElement(By.id(&quot;CustomerNumberTextBox&quot;)).sendKeys(&quot;XXX&quot;);\n        driver.findElement(By.id(&quot;CorporateCustomerNumberTextbox&quot;)).sendKeys(&quot;XXX&quot;);\n        driver.findElement(By.id(&quot;PinTextBox&quot;)).sendKeys(&quot;XXX&quot;); // 3/6 Ayda bir değişen\n        driver.findElement(By.id(&quot;ctl00_t_NextButton&quot;)).click();\n        isHandle = driver.getWindowHandle();\n\n        // Garanti Bankası\n        driver.switchTo().newWindow(WindowType.TAB);\n        driver.get(&quot;https://sube.garantibbva.com.tr/isube/login/login/passwordentrycorporate-tr&quot;);\n        driver.findElement(By.id(&quot;custno&quot;)).sendKeys(&quot;XXX&quot;);\n        driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;XXX&quot;); // 3/6 Ayda bir değişen\n        driver.findElement(By.id(&quot;userid&quot;)).sendKeys(&quot;XXX&quot;);\n        driver.findElement(By.id(&quot;formSubmit&quot;)).click();\n        garantiHandle = driver.getWindowHandle();\n   }                                      \n\n   private void giris2ActionPerformed(java.awt.event.ActionEvent evt)                                       \n   {                                           \n        try\n        {\n            // Ziraat Bankası - Vadesiz Hesaplarım\n            driver.switchTo().window(ziraatHandle);\n            driver.switchTo().frame(&quot;mainFrame&quot;);\n            driver.findElement(By.xpath(&quot;/html/body/form/div[3]/div[2]/div[1]/&quot;\n                + &quot;section[1]/div[2]/div[1]/div[1]/div/a&quot;)).click();\n            Thread.sleep(1000);\n\n            // 5013 NOLU HESAP\n            driver.switchTo().frame(&quot;iframe1&quot;);\n            driver.findElement(By.id(&quot;ctl00_c_GridDemandDeposit_AccountListSelector&quot;\n                + &quot;_ctl11_ctl03_AccountName2Panel&quot;)).click();\n            Thread.sleep(1000);\n\n            // Hesap hareketleri\n            driver.switchTo().frame(&quot;mainFrame&quot;);\n            driver.findElement(By.id(&quot;ctl00_c_AccountHistoryButton&quot;)).click();\n\n            // İş Bankası - Hesaplar\n            driver.switchTo().window(isHandle);\n            driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/div[3]/div[2]/&quot;\n                + &quot;div[1]/div[1]/div[1]&quot;)).click();\n\n            // Hesaplarım\n            driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/div[3]&quot;\n                + &quot;/div[2]/div[1]/div[1]/div[1]/div[2]/div[1]/div&quot;)).click();\n            Thread.sleep(1000);\n\n            // Hesap Hareketleri\n            driver.findElement(By.cssSelector(&quot;#MenuEntityList_tutorialElement_actions&quot;\n                + &quot; &gt; div:nth-child(3) &gt; div&quot;)).click();\n\n            // Garanti Bankası -    Hesap ve Ürün\n            driver.switchTo().window(garantiHandle);\n            driver.findElement(By.id(&quot;primary1&quot;)).click();\n\n            // Hesap\n            driver.findElement(By.cssSelector(&quot;#primaryLi1 &gt; ul &gt; li:nth-child(1) &gt; a&quot;)).click();\n            Thread.sleep(1000);\n\n            // Dönem\n            driver.findElement(By.cssSelector(&quot;#dateRangeText &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div&quot;)).click();\n            Thread.sleep(1000);\n\n            // Son 7 gün\n            driver.findElement(By.xpath(&quot;/html/body/div[2]/div[4]/div[4]/div/div/div/&quot;\n                + &quot;div/div[3]/div[2]/div[4]/div/div[2]/div/div[2]/div[2]/div[1]/div[2]/&quot;\n                + &quot;div/form/div[1]/div/div[1]/div[1]/div/div/div/div/div/ul/li[3]/a&quot;)).click();\n            Thread.sleep(1000);\n\n            // Görüntüle\n            driver.findElement(By.id(&quot;updateSubmitButton&quot;)).click();\n        }\n        catch (Exception e)\n        {\n            //System.out.println(e);\n            //e.printStackTrace();\n\n            showError(&quot;GIRIS 2&quot;, e.toString());\n        }\n   }                                      \n\n   private void baslaActionPerformed(java.awt.event.ActionEvent evt)                                      \n   {                                          \n        try\n        {\n            final HttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();\n            service = new Sheets.Builder(httpTransport, JSON_FACTORY, getCredentials(httpTransport))\n                .setApplicationName(APPLICATION_NAME).build();\n\n            new Thread(new Runnable()\n            {\n                @Override\n                public void run()\n                {\n                    while (true)\n                    {\n                        try\n                        {\n                            driver.switchTo().window(ziraatHandle);\n                            ziraatBank();\n\n                            driver.switchTo().window(isHandle);\n                            isBank();\n\n                            driver.switchTo().window(garantiHandle);\n                            garantiBank();\n\n                            Thread.sleep(30000);\n                        }\n                        catch (Exception e)\n                        {\n                            //System.out.println(e);\n                            //e.printStackTrace();\n\n                            showError(&quot;BASLA 2&quot;, e.toString());\n                        }\n                    }\n                }\n            }).start();\n        }\n        catch (Exception e)\n        {\n            //System.out.println(e);\n            //e.printStackTrace();\n\n            showError(&quot;BASLA 1&quot;, e.toString());\n        }\n   }                                     \n\n    void ziraatBank() throws IOException, GeneralSecurityException, InterruptedException\n    {\n        List&lt;Object&gt; lastCustomer;\n        String lastAciklama;\n        String lastAmount;\n        ArrayList&lt;String&gt; aciklamaList = new ArrayList&lt;&gt;();\n        String aciklama;\n        String amountString = &quot;0&quot;;\n        String customerName = &quot;&quot;;\n        String dekontText;\n        String[] dekontTextArray;\n\n        // Hesap Hareketlerini Güncelle 1\n        driver.switchTo().frame(&quot;iframe1&quot;);\n        boolean successfullRead = false;\n        while (!successfullRead)\n        {\n            try\n            {\n                driver.findElement(By.cssSelector(&quot;#ctl00_InnerContentWrapperPanel &gt; a&quot;)).click();\n                successfullRead = true;\n            }\n            catch (Exception e)\n            {\n            }\n        }\n        successfullRead = false;\n\n        // Hesap Hareketlerini Güncelle 2\n        while (!successfullRead)\n        {\n            try\n            {\n                driver.switchTo().frame(&quot;mainFrame&quot;);\n                successfullRead = true;\n            }\n            catch (Exception e)\n            {\n            }\n        }\n        successfullRead = false;\n\n        for (short row = 1; row &lt;= 3; row++)\n        {\n            if (&quot;MALTEPE E5 - 5013&quot;.equals(driver.findElement(By.cssSelector(&quot;#ctl00_c_AccountBoxSelector_AccountListSelector_ctl11 &quot;\n                + &quot;&gt; tbody &gt; tr:nth-child(&quot; + row + &quot;) &gt; td.firstColumn &gt; div:nth-child(1)&quot;)).getText()))\n            {\n                driver.findElement(By.cssSelector(&quot;#ctl00_c_AccountBoxSelector_AccountListSelector_ctl11 &quot;\n                    + &quot;&gt; tbody &gt; tr:nth-child(&quot; + row + &quot;) &gt; td.firstColumn &gt; div:nth-child(1)&quot;)).click();\n                break;\n            }\n        }\n\n        while (!successfullRead)\n        {\n            try\n            {\n                driver.switchTo().frame(&quot;iframe1&quot;);\n                successfullRead = true;\n            }\n            catch (Exception e)\n            {\n            }\n        }\n\n        // Find which row is the last customer\n        lastCustomer = readLastCustomer(&quot;A1:B1&quot;);\n        lastAciklama = lastCustomer.get(0).toString();\n        lastAmount = lastCustomer.get(1).toString();\n        short rowNumber = 0;\n\n        do\n        {\n            rowNumber++;\n            successfullRead = false;\n            while (!successfullRead)\n            {\n                try\n                {\n                    aciklamaList.add(driver.findElement(By.cssSelector(&quot;#ctl00_c_GridAccountHistoryList&quot;\n                        + &quot; &gt; tbody &gt; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td.description&quot;)).getText());\n                    amountString = driver.findElement(By.xpath(&quot;/html/body/form/&quot;\n                        + &quot;div[3]/div[3]/div[3]/div[1]/div/div[3]/div[2]/div[2]/div/div/&quot;\n                        + &quot;table/tbody/tr[&quot; + rowNumber + &quot;]/td[4]&quot;)).getText();\n                    successfullRead = true;\n                }\n                catch (Exception e)\n                {\n                }\n            }\n        } while (!((lastAciklama.equals(aciklamaList.get(rowNumber - 1))) &amp;&amp; (lastAmount.equals(amountString))));\n\n        // If last row is the last customer, quit\n        if (rowNumber != 1)\n        {\n            // Process new customers (the ones after the last customer)\n            do\n            {\n                rowNumber--;\n\n                aciklama = aciklamaList.get(rowNumber - 1);\n\n                // Date\n                String date = driver.findElement(By.cssSelector(&quot;#ctl00_c_GridAccountHistoryList &gt;&quot;\n                    + &quot; tbody &gt; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td.firstColumn.nowrap.date&quot;)).\n                    getText().replace(&quot;/&quot;, &quot;.&quot;);\n\n                // Amount\n                amountString = driver.findElement(By.xpath(&quot;/html/body/form/&quot;\n                    + &quot;div[3]/div[3]/div[3]/div[1]/div/div[3]/div[2]/div[2]/div/div/&quot;\n                    + &quot;table/tbody/tr[&quot; + rowNumber + &quot;]/td[4]&quot;)).getText();\n                if (amountString.startsWith(&quot;-&quot;))\n                {\n                    writeLastCustomer(&quot;A1:B1&quot;, aciklama, amountString);\n                    continue;\n                }\n                float amount = Float.parseFloat(amountString.replace(&quot;.&quot;, &quot;&quot;).\n                    replace(&quot;,&quot;, &quot;.&quot;).replace(&quot; TL&quot;, &quot;&quot;));\n\n                // Dekontu aç\n                driver.findElement(By.cssSelector(&quot;#ctl00_c_GridAccountHistoryList &gt; tbody &gt;&quot;\n                    + &quot; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td:nth-child(6) &gt; a&quot;)).click();\n\n                // Dekont isim\n                driver.switchTo().frame(&quot;GenericCustomModalFrame&quot;);\n                driver.switchTo().frame(&quot;mainFrame&quot;);\n                dekontText = driver.findElement(By.xpath(&quot;/html/body/form/div[3]&quot;\n                    + &quot;/div/div[2]/div/table[2]/tbody/tr/td/table[1]/tbody/tr[2]/td/div/&quot;\n                    + &quot;table[2]/tbody/tr/td/table/tbody/tr/td[1]&quot;)).getText();\n\n                // Dekontu kapat\n                Thread.sleep(250);\n                driver.switchTo().defaultContent();\n                driver.switchTo().frame(&quot;iframe1&quot;);\n                driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div/div/div[1]/button&quot;)).click();\n\n                // Customer name\n                if (dekontText.contains(&quot;Borçlu Adı Soyadı : &quot;)) // Mobil havale\n                    customerName = dekontText.split(&quot;Borçlu Adı Soyadı : &quot;)[1].split(&quot;\\n&quot;)[0];\n                else if (dekontText.contains(&quot;Gönd: &quot;)) // Fast\n                {\n                    dekontTextArray = dekontText.split(&quot;Gönd: &quot;);\n\n                    // Aciklamada fast varsa VE ilk satır alt cizgi değilse bu kod çalışacak\n                    if (aciklama.contains(&quot;FAST&quot;) &amp;&amp; !dekontText.startsWith(&quot;_&quot;) &amp;&amp; !dekontText.startsWith(&quot;.&quot;))\n                        customerName = dekontTextArray[1].split(dekontText.split(&quot;\\n&quot;)[0])[0];\n                    // 1- fast yoksa. 2- fast varsa VE ilk satır alt çizgiyse. \n                    else\n                    {\n                        dekontTextArray = dekontTextArray[1].split(&quot; &quot;);\n                        for (byte counter = 0; counter &lt;= 2; counter++)\n                            if (Character.isUpperCase(dekontTextArray[counter].charAt(0)))\n                                customerName += dekontTextArray[counter] + &quot; &quot;;\n                    }\n\n                    customerName = customerName.trim().toUpperCase(Locale.forLanguageTag(&quot;TR&quot;));\n                }\n                else if (dekontText.contains(&quot;Gönderen : &quot;)) // Referanslı Gelen Havale\n                    customerName = dekontText.split(&quot;Gönderen : &quot;)[1].split(&quot;\\n&quot;)[0]; // Buranın toUpperCase e ihtiyacı varsa, toUpperCase i assagı at.\n                else\n                {\n                    writeLastCustomer(&quot;A1:B1&quot;, aciklama, amountString);\n                    showError(&quot;ZİRAAT BANKASI&quot;, aciklama);\n                    continue;\n                }\n\n                // Google Sheets\n                appendToGoogleSheets(date, amount, customerName, &quot;ZİRAAT BANKASI&quot;);\n\n                // Last customer text file\n                writeLastCustomer(&quot;A1:B1&quot;, aciklama, amountString);\n\n                customerName = &quot;&quot;;\n            } while (rowNumber &gt; 1);\n        }\n\n        driver.switchTo().defaultContent();\n    }\n\n    void isBank() throws IOException, GeneralSecurityException\n    {\n        List&lt;Object&gt; lastCustomer;\n        String lastAciklama;\n        String lastAmount;\n        ArrayList&lt;String&gt; aciklamaList = new ArrayList&lt;&gt;();\n        String aciklama;\n        String amountString = &quot;0&quot;;\n        String customerName = &quot;&quot;;\n\n        // Hesap Hareketlerini Güncelle\n        driver.findElement(By.cssSelector(&quot; #UpdateActivitiesSubMenu_tutorialElement &quot;\n            + &quot;&gt; div.sub-menu-item-text&quot;)).click();\n\n        // Find which row is the last customer\n        lastCustomer = readLastCustomer(&quot;A2:B2&quot;);\n        lastAciklama = lastCustomer.get(0).toString();\n        lastAmount = lastCustomer.get(1).toString();\n        short rowNumber = 0;\n\n        do\n        {\n            rowNumber++;\n            boolean successfullRead = false;\n            while (!successfullRead)\n            {\n                try\n                {\n                    aciklamaList.add(driver.findElement(By.xpath(&quot;/html/body/form/div[4]/&quot;\n                        + &quot;div[3]/div[2]/div/div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/&quot;\n                        + &quot;div[&quot; + rowNumber + &quot;]/div/div/div[4]/div[2]/div/div&quot;)).getText());\n                    amountString = driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/&quot;\n                        + &quot;div[2]/div/div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/div[&quot;\n                        + rowNumber + &quot;]/div/div/div[6]/div[1]/div/div/div/div/div[1]&quot;)).getText().replace(&quot; &quot;, &quot;&quot;);\n                    successfullRead = true;\n                }\n                catch (Exception e)\n                {\n                }\n            }\n        } while (!((lastAciklama.equals(aciklamaList.get(rowNumber - 1))) &amp;&amp; (lastAmount.equals(amountString))));\n\n        // If last row is the last customer, quit\n        if (rowNumber != 1)\n        {\n            // Process new customers (the ones after the last customer)\n            do\n            {\n                rowNumber--;\n\n                aciklama = aciklamaList.get(rowNumber - 1);\n\n                // Date\n                String date = driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/div[2]/&quot;\n                    + &quot;div/div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/div[&quot; + rowNumber\n                    + &quot;]/div/div/div[2]/div[1]/div/div/div/div[1]&quot;)).getText().replace(&quot;/&quot;, &quot;.&quot;);\n\n                // Amount\n                amountString = driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/&quot;\n                    + &quot;div[2]/div/div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/div[&quot;\n                    + rowNumber + &quot;]/div/div/div[6]/div[1]/div/div/div/div/div[1]&quot;)).getText().replace(&quot; &quot;, &quot;&quot;);\n                if (amountString.startsWith(&quot;-&quot;) || aciklama.contains(&quot;VODAFONE&quot;))\n                {\n                    writeLastCustomer(&quot;A2:B2&quot;, aciklama, amountString);\n                    continue;\n                }\n                float amount = Float.parseFloat(amountString.substring(1).replace(&quot;,&quot;, &quot;&quot;));\n\n                // Customer Name\n                if (driver.findElement(By.xpath(&quot;/html/body/form/div[4]/div[3]/div[2]/div/&quot;\n                    + &quot;div[1]/div[3]/div/div[9]/div/div[2]/div[3]/div[3]/div[&quot; + rowNumber\n                    + &quot;]/div/div/div[2]/div[2]/div/div&quot;)).getText().equals(&quot;Bankamatik&quot;))\n                {\n                    String[] arrOfAciklama = aciklama.split(&quot; &quot;);\n                    if (arrOfAciklama.length &gt; 1 &amp; arrOfAciklama.length &lt; 4)\n                        customerName = (arrOfAciklama.length == 2) ? arrOfAciklama[1] + &quot; &quot;\n                            + arrOfAciklama[0] : arrOfAciklama[1] + arrOfAciklama[2] + arrOfAciklama[0];\n                    else\n                    {\n                        writeLastCustomer(&quot;A2:B2&quot;, aciklama, amountString);\n                        showError(&quot;İŞ BANKASI&quot;, aciklama);\n                        continue;\n                    }\n                }\n                else if (aciklama.contains(&quot;tarafından&quot;))\n                {\n                    customerName = aciklama.split(&quot;tarafından&quot;, 2)[0].trim();\n                }\n                else if (aciklama.contains(&quot;*&quot;))\n                {\n                    if (Character.isDigit(aciklama.split(&quot;\\\\*&quot;)[1].charAt(0)))\n                        customerName = aciklama.split(&quot;\\\\*&quot;)[0];\n                    else\n                        customerName = aciklama.split(&quot;\\\\*&quot;)[1];\n                }\n                else\n                {\n                    writeLastCustomer(&quot;A2:B2&quot;, aciklama, amountString);\n                    showError(&quot;İŞ BANKASI&quot;, aciklama);\n                    continue;\n                }\n\n                customerName = customerName.toUpperCase(Locale.forLanguageTag(&quot;TR&quot;));\n\n                // Google Sheets\n                appendToGoogleSheets(date, amount, customerName, &quot;İŞ BANKASI&quot;);\n\n                // Save last customer\n                writeLastCustomer(&quot;A2:B2&quot;, aciklama, amountString);\n\n            } while (rowNumber &gt; 1);\n        }\n    }\n\n    void garantiBank() throws IOException, GeneralSecurityException, InterruptedException\n    {\n        List&lt;Object&gt; lastCustomer;\n        String lastAciklama;\n        String lastAmount;\n        ArrayList&lt;String&gt; aciklamaList = new ArrayList&lt;&gt;();\n        String aciklama;\n        String amountString = &quot;0&quot;;\n        String customerName = &quot;&quot;;\n        String dekontText;\n\n        // Görüntüle\n        driver.findElement(By.id(&quot;updateSubmitButton&quot;)).click();\n        Thread.sleep(500);\n\n        // Find which row is the last customer\n        lastCustomer = readLastCustomer(&quot;A3:B3&quot;);\n        lastAciklama = lastCustomer.get(0).toString();\n        lastAmount = lastCustomer.get(1).toString();\n        short rowNumber = 0;\n\n        do\n        {\n            rowNumber++;\n            boolean successfullRead = false;\n            while (!successfullRead)\n            {\n                try\n                {\n                    aciklamaList.add(driver.findElement(By.cssSelector(&quot;#myAccountActivitiesGrid &gt; tbody &gt; tr:nth-child(&quot;\n                        + rowNumber + &quot;) &gt; td.customHoverEnabled &gt; div &gt; div:nth-child(1)&quot;)).getText());\n                    amountString = driver.findElement(By.cssSelector(&quot;#myAccountActivitiesGrid &gt; &quot;\n                        + &quot;tbody &gt; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td:nth-child(4) &gt; div&quot;)).getText();\n                    successfullRead = true;\n                }\n                catch (Exception e)\n                {\n                }\n            }\n        } while (!((lastAciklama.equals(aciklamaList.get(rowNumber - 1))) &amp;&amp; (lastAmount.equals(amountString))));\n\n        // If last row is the last customer, quit\n        if (rowNumber != 1)\n        {\n            // Process new customers (the ones after the last customer)\n            do\n            {\n                rowNumber--;\n\n                aciklama = aciklamaList.get(rowNumber - 1);\n\n                // Amount\n                amountString = driver.findElement(By.cssSelector(&quot;#myAccountActivitiesGrid &gt; &quot;\n                    + &quot;tbody &gt; tr:nth-child(&quot; + rowNumber + &quot;) &gt; td:nth-child(4) &gt; div&quot;)).getText();\n                if (amountString.startsWith(&quot;-&quot;) || aciklama.startsWith(&quot;PK&quot;))\n                {\n                    writeLastCustomer(&quot;A3:B3&quot;, aciklama, amountString);\n                    continue;\n                }\n                float amount = Float.parseFloat(amountString.substring(1).\n                    replace(&quot;.&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;.&quot;).replace(&quot; TL&quot;, &quot;&quot;));\n\n                // Dekontu aç\n                driver.findElement(By.cssSelector(&quot;#myAccountActivitiesGrid &gt; tbody &gt; &quot;\n                    + &quot;tr:nth-child(&quot; + rowNumber + &quot;) &gt; td:nth-child(3) &gt; a&quot;)).click();\n                Thread.sleep(1000);\n\n                // Dekont date\n                String date = driver.findElement(By.cssSelector(&quot; #receiptScroll &quot; // you can try putting this into an infinite loop like ziraat guncelleme\n                    + &quot;&gt; div &gt; table.receiptContainerTable &gt; tbody &gt; tr:nth-child(1) &quot;\n                    + &quot;&gt; td:nth-child(1) &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td &gt; pre&quot;)).\n                    getText().split(&quot;İŞLEM TARİHİ     : &quot;)[1].split(&quot;\\n&quot;)[0].trim().\n                    replace(&quot;/&quot;, &quot;.&quot;); // substring(1).trim().replace(&quot;/&quot;, &quot;.&quot;);\n\n                // Dekont isim\n                dekontText = driver.findElement(By.xpath(&quot;/html/body/div[2]/div[4]/div[7]/div[1]/div/div/&quot;\n                    + &quot;div[2]/form/div[2]/div/table[2]/tbody/tr[2]/td/table/tbody/tr[2]/td/pre&quot;)).getText();\n\n                // Dekontu kapat\n                driver.findElement(By.xpath(&quot;/html/body/div[2]/div[4]/div[7]/div[1]/div/div/div[1]/a&quot;)).click();\n\n                // Customer name                \n                if (dekontText.contains(&quot;BORÇLU HESAP&quot;)) // hesaptan hesaba havale\n                    customerName = dekontText.split(&quot;\\n&quot;)[3].substring(42).trim();\n                // &quot;gelen fast&quot;, &quot;gelen eft&quot;, &quot;kredi kartindan hesaba havale&quot;, &quot;hesaba havale (kasadan)&quot; (atm)\n                else if (dekontText.contains(&quot;GÖNDEREN  &quot;))\n                {\n                    customerName = dekontText.split(&quot;GÖNDEREN  &quot;)[1].split(&quot;\\n&quot;)[0].trim().substring(2);\n                    //customerName = dekontText.split(&quot;\\n&quot;)[1].substring(21).trim();\n                }\n                else\n                {\n                    writeLastCustomer(&quot;A3:B3&quot;, aciklama, amountString);\n                    showError(&quot;GARANTİ BANKASI&quot;, aciklama);\n                    continue;\n                }\n\n                // Google Sheets\n                appendToGoogleSheets(date, amount, customerName, &quot;GARANTİ BANKASI&quot;);\n\n                // Last customer text file\n                writeLastCustomer(&quot;A3:B3&quot;, aciklama, amountString);\n\n            } while (rowNumber &gt; 1);\n        }\n    }\n\n    void appendToGoogleSheets(String date, float amount, String customerName, String bankName) throws IOException, GeneralSecurityException\n    {\n        String spreadsheetId = &quot;XXX&quot;; //XXX\n        String range = &quot;A:K&quot;;\n        List&lt;List&lt;Object&gt;&gt; newValues = new ArrayList&lt;&gt;();\n\n        float dakika = Math.round(amount / satisFiyatiDakika);\n        float adet = Math.round((amount / satisFiyati) * 100.0F) / 100.0F;\n        float maliyet = Math.round((adet * alisFiyati) * 100.0F) / 100.0F;\n        float fark = Math.round((amount - maliyet) * 100.0F) / 100.0F;\n\n        newValues.add(Arrays.asList(date, amount, dakika, adet, maliyet, fark,\n            &quot;&quot;, &quot;&quot;, customerName, bankName, &quot;X+&quot;));\n\n        // Append the new data starting from the first empty row in column A\n        ValueRange valueRange = new ValueRange().setValues(newValues);\n\n        service.spreadsheets().values().append(spreadsheetId, range, valueRange)\n            .setValueInputOption(&quot;RAW&quot;).execute();\n    }\n\n    List readLastCustomer(String range) throws IOException\n    {\n        String spreadsheetId = &quot;XXX&quot;;\n        ValueRange response = service.spreadsheets().values().get(spreadsheetId, range).execute();\n        List&lt;List&lt;Object&gt;&gt; values = response.getValues();\n        return values.get(0);\n    }\n\n    void writeLastCustomer(String range, String aciklama, String amount) throws IOException\n    {\n        String spreadsheetId = &quot;XXX&quot;;\n\n        ValueRange valueRange = new ValueRange().setValues(Arrays.asList(\n            Arrays.asList((Object) aciklama, (Object) amount)));\n\n        service.spreadsheets().values().update(spreadsheetId, range, valueRange)\n            .setValueInputOption(&quot;RAW&quot;).execute();\n    }\n\n    void showError(String banka, String aciklama)\n    {\n        Toolkit.getDefaultToolkit().beep();\n        errorScreen.setText(errorScreen.getText() + banka + &quot; &quot; + aciklama + &quot;\\n\\n&quot;);\n    }\n\n    private Credential getCredentials(final HttpTransport httpTransport) throws IOException\n    {\n        InputStream credentialsStream = ControlPanel.class\n            .getResourceAsStream(CREDENTIALS_FILE_PATH);\n        GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY,\n            new InputStreamReader(credentialsStream));\n\n        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n            httpTransport, JSON_FACTORY, clientSecrets, SCOPES)\n            .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(TOKENS_DIRECTORY_PATH)))\n            .setAccessType(&quot;offline&quot;).build();\n\n        return new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver.Builder().setPort(8888).build())\n            .authorize(&quot;user&quot;);\n    }\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String args[])\n    {\n        /* Set the Nimbus look and feel */\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;\n        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.\n         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html \n         */\n        try\n        {\n            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels())\n            {\n                if (&quot;Nimbus&quot;.equals(info.getName()))\n                {\n                    javax.swing.UIManager.setLookAndFeel(info.getClassName());\n                    break;\n\n                }\n            }\n        }\n        catch (ClassNotFoundException ex)\n        {\n            java.util.logging.Logger.getLogger(ControlPanel.class\n                .getName()).log(java.util.logging.Level.SEVERE, null, ex);\n\n        }\n        catch (InstantiationException ex)\n        {\n            java.util.logging.Logger.getLogger(ControlPanel.class\n                .getName()).log(java.util.logging.Level.SEVERE, null, ex);\n\n        }\n        catch (IllegalAccessException ex)\n        {\n            java.util.logging.Logger.getLogger(ControlPanel.class\n                .getName()).log(java.util.logging.Level.SEVERE, null, ex);\n\n        }\n        catch (javax.swing.UnsupportedLookAndFeelException ex)\n        {\n            java.util.logging.Logger.getLogger(ControlPanel.class\n                .getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        }\n        //&lt;/editor-fold&gt;\n\n        /* Create and display the form */\n        java.awt.EventQueue.invokeLater(new Runnable()\n        {\n            public void run()\n            {\n                new ControlPanel().setVisible(true);\n            }\n        });\n    }\n\n   // Variables declaration - do not modify                     \n   private javax.swing.JButton basla;\n   private javax.swing.JTextPane errorScreen;\n   private javax.swing.JButton giris1;\n   private javax.swing.JButton giris2;\n   private javax.swing.JScrollPane jScrollPane2;\n   // End of variables declaration                   \n}\n</code></pre>\n"},{"tags":["java","android","kotlin","datepicker","material-components-android"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1693829924,"post_id":77037582,"comment_id":135807734,"body_markdown":"&quot;*I still haven&#39;t tried anything yet*&quot;, so go ahead and try it! If you have any questions afer trying, you can explain them more clearly and with a focus.","body":"&quot;<i>I still haven&#39;t tried anything yet</i>&quot;, so go ahead and try it! If you have any questions afer trying, you can explain them more clearly and with a focus."}],"owner":{"account_id":29141309,"reputation":1,"user_id":22324209,"display_name":"Sanjay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693829646,"creation_date":1693829407,"question_id":77037582,"body_markdown":"I am trying to add a slash(/) when user type date in this format DD/MM/YYYY, I need to add slash automatically once user type DD and MM, I am thing of using text watcher here but how can I access DatePicker text input field?\r\n\r\nI still haven&#39;t tried anything yet, I am really confused, how to access that Text input field of material DatePicker dialog","title":"How to add textwatcher to material datepicker dialog&#39;s text field input in android?","body":"<p>I am trying to add a slash(/) when user type date in this format DD/MM/YYYY, I need to add slash automatically once user type DD and MM, I am thing of using text watcher here but how can I access DatePicker text input field?</p>\n<p>I still haven't tried anything yet, I am really confused, how to access that Text input field of material DatePicker dialog</p>\n"},{"tags":["java","selenium-webdriver","testing","automation","selenium-chromedriver"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692711318,"post_id":76951428,"comment_id":135659326,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692693797,"creation_date":1692693797,"answer_id":76951549,"question_id":76951428,"body_markdown":"Quick solution: Upgrade your selenium to `v4.11.0` in your POM.xml as below:\r\n````\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.11.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n````\r\n\r\nHaving said that, if you use latest selenium you don&#39;t need `webdrivermanager`. Selenium&#39;s inbuilt tool `SeleniumManager` will do what `WDM` used to do (i.e. download and management of `driver.exe`). If you use latest selenium, code can be as simple as:\r\n````\r\npublic static void main(String[] args) {\r\n    // TODO Auto-generated method stub\r\n    WebDriver driver = new ChromeDriver();\r\n    driver.get(&quot;https://www.google.com&quot;);        \r\n    System.out.println(driver.getTitle());\r\n}\r\n````","title":"Selenium Automation WebDriver Manager is not working for Chrome version 116","body":"<p>Quick solution: Upgrade your selenium to <code>v4.11.0</code> in your POM.xml as below:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Having said that, if you use latest selenium you don't need <code>webdrivermanager</code>. Selenium's inbuilt tool <code>SeleniumManager</code> will do what <code>WDM</code> used to do (i.e. download and management of <code>driver.exe</code>). If you use latest selenium, code can be as simple as:</p>\n<pre><code>public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    WebDriver driver = new ChromeDriver();\n    driver.get(&quot;https://www.google.com&quot;);        \n    System.out.println(driver.getTitle());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7979274,"reputation":57,"user_id":6021277,"accept_rate":0,"display_name":"monil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693221987,"creation_date":1693221987,"answer_id":76992382,"question_id":76951428,"body_markdown":"you need Java version 11 or higher to use WebDriverManager 5.4.1","title":"Selenium Automation WebDriver Manager is not working for Chrome version 116","body":"<p>you need Java version 11 or higher to use WebDriverManager 5.4.1</p>\n"},{"tags":[],"owner":{"account_id":24538904,"reputation":1,"user_id":18449546,"display_name":"Olcay &#199;etin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693829251,"creation_date":1693223912,"answer_id":76992594,"question_id":76951428,"body_markdown":"I have same problem. I upgraded to 4.11.0 but still have same issue which is \r\n&quot;java.lang.IllegalStateException: The path to the driver executable The path to the driver executable must be set by the webdriver.chrome.driver system property; for more information, see https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver. The latest version can be downloaded from https://chromedriver.storage.googleapis.com/index.html\r\n&quot;\r\n\r\nedit : my solution is to use that\r\n\t\r\n&lt;selenium.version&gt;4.11.0&lt;/selenium.version&gt; \r\nin properties\r\n\r\n\r\notherwise, older version of selenium was being used. ","title":"Selenium Automation WebDriver Manager is not working for Chrome version 116","body":"<p>I have same problem. I upgraded to 4.11.0 but still have same issue which is\n&quot;java.lang.IllegalStateException: The path to the driver executable The path to the driver executable must be set by the webdriver.chrome.driver system property; for more information, see <a href=\"https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver</a>. The latest version can be downloaded from <a href=\"https://chromedriver.storage.googleapis.com/index.html\" rel=\"nofollow noreferrer\">https://chromedriver.storage.googleapis.com/index.html</a>\n&quot;</p>\n<p>edit : my solution is to use that</p>\n<p>&lt;selenium.version&gt;4.11.0&lt;/selenium.version&gt;\nin properties</p>\n<p>otherwise, older version of selenium was being used.</p>\n"}],"owner":{"account_id":29273432,"reputation":11,"user_id":22427704,"display_name":"Akshay Gulhane"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":783,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1693829251,"creation_date":1692692890,"question_id":76951428,"body_markdown":"I have used this dependency in selenium framework.\r\nbut browser is not invoked because of chrome version is 116\r\n````\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n    &lt;version&gt;5.4.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n````\r\n\r\nChrome browser should invoke automatically","title":"Selenium Automation WebDriver Manager is not working for Chrome version 116","body":"<p>I have used this dependency in selenium framework.\nbut browser is not invoked because of chrome version is 116</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.4.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Chrome browser should invoke automatically</p>\n"},{"tags":["java","tomcat"],"comments":[{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":1,"creation_date":1693814837,"post_id":77035831,"comment_id":135805093,"body_markdown":"Please [don&#39;t upload text as image](https://meta.stackoverflow.com/a/285557/13447). Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. Also see [ask] and check if you&#39;ve declared `-Xms` twice.","body":"Please <a href=\"https://meta.stackoverflow.com/a/285557/13447\">don&#39;t upload text as image</a>. Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. Also see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and check if you&#39;ve declared <code>-Xms</code> twice."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":4,"creation_date":1693815239,"post_id":77035831,"comment_id":135805156,"body_markdown":"Memory allocation in an OS is generally more complicated than this. IIRC (but I&#39;m not 100% sure), the Memory column in Task Manager shows actual physical memory that is allocated to the process. When you started Java, it might have allocated 15GB of virtual memory, but it doesn&#39;t mean it is actively using it, so the OS might have swapped it out, or because of accounting of memory, as long as the program hasn&#39;t touched it yet, it is isn&#39;t counted towards its memory use.","body":"Memory allocation in an OS is generally more complicated than this. IIRC (but I&#39;m not 100% sure), the Memory column in Task Manager shows actual physical memory that is allocated to the process. When you started Java, it might have allocated 15GB of virtual memory, but it doesn&#39;t mean it is actively using it, so the OS might have swapped it out, or because of accounting of memory, as long as the program hasn&#39;t touched it yet, it is isn&#39;t counted towards its memory use."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1693817106,"post_id":77035831,"comment_id":135805452,"body_markdown":"In other words, Task manager is not a memory profiling tool. If you want to be confident about your measurements, use a tool that is actually made to make those measurements.","body":"In other words, Task manager is not a memory profiling tool. If you want to be confident about your measurements, use a tool that is actually made to make those measurements."}],"answers":[{"tags":[],"owner":{"account_id":3916497,"reputation":577,"user_id":3240206,"accept_rate":27,"display_name":"Chanky Mallick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693828988,"creation_date":1693828988,"answer_id":77037530,"question_id":77035831,"body_markdown":"Windows resource monitor show this memory data in a proper way , Task Manager only shows the Physical memory in use , Not the Reserved Virtual memory , Total -Xmx allocation comes under Reserved Virtual memory then it allocate to Physical as demanded by application. ","title":"Tomcat -Xms -Xmx not behaving as expected","body":"<p>Windows resource monitor show this memory data in a proper way , Task Manager only shows the Physical memory in use , Not the Reserved Virtual memory , Total -Xmx allocation comes under Reserved Virtual memory then it allocate to Physical as demanded by application.</p>\n"}],"owner":{"account_id":3916497,"reputation":577,"user_id":3240206,"accept_rate":27,"display_name":"Chanky Mallick"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693828988,"creation_date":1693812569,"question_id":77035831,"body_markdown":"I have 32GB Ram in my system, and I want to test the behavior of -Xms and -Xmx, so I have set \r\n```\r\nset CATALINA_OPTS=-Xms13312m -Xmx15360m\r\n```\r\nin setenv.bat file inside the Tomcat 10.1.10 bin folder to increase initial memory to 13Gb and maximum 15Gb. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter starting Tomcat, I never see the memory starting from 13Gb, it&#39;s using around 4Gb.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/43MJj.png\r\n  [2]: https://i.stack.imgur.com/chRMO.png\r\n\r\nI am not able to understand its behavior. Can we control exact minimum and maximum RAM allocation using this or some other settings irrespective of application demand?","title":"Tomcat -Xms -Xmx not behaving as expected","body":"<p>I have 32GB Ram in my system, and I want to test the behavior of -Xms and -Xmx, so I have set</p>\n<pre><code>set CATALINA_OPTS=-Xms13312m -Xmx15360m\n</code></pre>\n<p>in setenv.bat file inside the Tomcat 10.1.10 bin folder to increase initial memory to 13Gb and maximum 15Gb.</p>\n<p><a href=\"https://i.stack.imgur.com/43MJj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/43MJj.png\" alt=\"enter image description here\" /></a></p>\n<p>After starting Tomcat, I never see the memory starting from 13Gb, it's using around 4Gb.</p>\n<p><a href=\"https://i.stack.imgur.com/chRMO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/chRMO.png\" alt=\"enter image description here\" /></a></p>\n<p>I am not able to understand its behavior. Can we control exact minimum and maximum RAM allocation using this or some other settings irrespective of application demand?</p>\n"},{"tags":["java","algorithm","integer","reverse"],"comments":[{"owner":{"account_id":434266,"reputation":15464,"user_id":820127,"display_name":"rossum"},"score":0,"creation_date":1642256481,"post_id":70722143,"comment_id":125024980,"body_markdown":"You need to think about integer overflow and how to avoid it.  The expected answer of 0 tells you that a simple reversal falls out of range.","body":"You need to think about integer overflow and how to avoid it.  The expected answer of 0 tells you that a simple reversal falls out of range."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1642265804,"post_id":70722143,"comment_id":125027304,"body_markdown":"&quot;If reversing x causes the value to go outside the signed 32-bit integer range [-2^31, 2^31 - 1], then return 0.&quot;","body":"&quot;If reversing x causes the value to go outside the signed 32-bit integer range [-2^31, 2^31 - 1], then return 0.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642256593,"creation_date":1642256593,"answer_id":70722275,"question_id":70722143,"body_markdown":"The approach you&#39;ve chosen is not that far off.\r\n\r\n1. You currently check the input `x` to be in range of unsigned integer. But they ask to check x-reversed instead.\r\n2. You aggregate your answer in an integer, hence you might overflow unnoticed.\r\n\r\nBoth of your problems can be solved if you aggregate your result `num` in an variable of type long instead and reject/zero the answer if after reversing it is out of bounds of unsigned int.\r\n\r\nAlternative you can use Math.addExact(a, b), Math.multiplyExact(a,b) and a try-catch to exit immediately upon overflow.","title":"Reverse Integer (Leetcode)","body":"<p>The approach you've chosen is not that far off.</p>\n<ol>\n<li>You currently check the input <code>x</code> to be in range of unsigned integer. But they ask to check x-reversed instead.</li>\n<li>You aggregate your answer in an integer, hence you might overflow unnoticed.</li>\n</ol>\n<p>Both of your problems can be solved if you aggregate your result <code>num</code> in an variable of type long instead and reject/zero the answer if after reversing it is out of bounds of unsigned int.</p>\n<p>Alternative you can use Math.addExact(a, b), Math.multiplyExact(a,b) and a try-catch to exit immediately upon overflow.</p>\n"},{"tags":[],"owner":{"account_id":1789974,"reputation":151636,"user_id":1630618,"accept_rate":100,"display_name":"vacawama"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693828790,"creation_date":1642257541,"answer_id":70722381,"question_id":70722143,"body_markdown":"Your problem is that the overflow is in the `num` variable and you are not checking for that.  By adding a check to make sure the calculation will not overflow before performing `num = num * 10 + a`, you can return `0` when necessary.\r\n\r\nAlso, you weren&#39;t handling negative numbers properly.  A check for a negative up front can allow you to work with a positive number and then just negate the result.\r\n\r\n    class Solution {  \r\n        public int reverse(int x) {  \r\n            int num = 0;  \r\n            Boolean negative = false;\r\n            \r\n            if (x == Integer.MIN_VALUE) return 0;\r\n            if (x &lt; 0) {\r\n                x = -x;\r\n                negative = true;\r\n            }\r\n            while (x != 0) {  \r\n                int a = x % 10; \r\n                // Check if the next operation is going to cause an overflow\r\n                // and return 0 if it does\r\n                if (num &gt; (Integer.MAX_VALUE - a) / 10) return 0;\r\n                num = num * 10 + a;  \r\n                x = x / 10;  \r\n            }  \r\n            return negative ? -num : num;  \r\n        }  \r\n    } \r\n\r\n ","title":"Reverse Integer (Leetcode)","body":"<p>Your problem is that the overflow is in the <code>num</code> variable and you are not checking for that.  By adding a check to make sure the calculation will not overflow before performing <code>num = num * 10 + a</code>, you can return <code>0</code> when necessary.</p>\n<p>Also, you weren't handling negative numbers properly.  A check for a negative up front can allow you to work with a positive number and then just negate the result.</p>\n<pre><code>class Solution {  \n    public int reverse(int x) {  \n        int num = 0;  \n        Boolean negative = false;\n        \n        if (x == Integer.MIN_VALUE) return 0;\n        if (x &lt; 0) {\n            x = -x;\n            negative = true;\n        }\n        while (x != 0) {  \n            int a = x % 10; \n            // Check if the next operation is going to cause an overflow\n            // and return 0 if it does\n            if (num &gt; (Integer.MAX_VALUE - a) / 10) return 0;\n            num = num * 10 + a;  \n            x = x / 10;  \n        }  \n        return negative ? -num : num;  \n    }  \n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":17530901,"reputation":101,"user_id":12714940,"display_name":"JaNith RathNayaka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642258110,"creation_date":1642258110,"answer_id":70722472,"question_id":70722143,"body_markdown":"**Input: 123\r\nOutput: 321\r\nInput: -123\r\nOutput: -321\r\nInput: 120\r\nOutput: 2**\r\n\r\nclass Solution {\r\npublic:\r\n    int reverse(int x) {\r\n\r\n        int rev = 0;\r\n\r\n        constexpr int top_limit = INT_MAX/10;\r\n\r\n        constexpr int bottom_limit = INT_MIN/10;\r\n\r\n        while (x) {\r\n\r\n            if (rev &gt; top_limit || rev &lt; bottom_limit)\r\n\r\n                return 0;\r\n\r\n            rev = rev * 10 + x % 10;\r\n\r\n            x /= 10;\r\n        }\r\n        return rev;\r\n    }\r\n};","title":"Reverse Integer (Leetcode)","body":"<p><strong>Input: 123\nOutput: 321\nInput: -123\nOutput: -321\nInput: 120\nOutput: 2</strong></p>\n<p>class Solution {\npublic:\nint reverse(int x) {</p>\n<pre><code>    int rev = 0;\n\n    constexpr int top_limit = INT_MAX/10;\n\n    constexpr int bottom_limit = INT_MIN/10;\n\n    while (x) {\n\n        if (rev &gt; top_limit || rev &lt; bottom_limit)\n\n            return 0;\n\n        rev = rev * 10 + x % 10;\n\n        x /= 10;\n    }\n    return rev;\n}\n</code></pre>\n<p>};</p>\n"},{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642282648,"creation_date":1642278393,"answer_id":70725154,"question_id":70722143,"body_markdown":"You&#39;re not dealing with the theoretical signed 32-bit integer overflow that might occur in the loop, meaning you&#39;ll sometimes return a number outside of that range. Also, the logic will not work as expected with negative values. \r\n\r\nAnd to be really precise on the restriction of signed 32-bit, special care needs to be taken when the input is -2&lt;sup&gt;31&lt;/sup&gt;, as its absolute value does not represent a valid signed 32-bit integer.\r\n\r\n```\r\nclass Solution {\r\n    public int reverse(int x) {\r\n        if (x &lt; 0) return x == -2147483648 ? 0 : -reverse(-x);\r\n        int res = 0;\r\n        while (x &gt; 0 &amp;&amp; res &lt; 214748364) {\r\n            res = res * 10 + x % 10;\r\n            x /= 10;\r\n        }\r\n        return x == 0 ? res\r\n             : res &gt; 214748364 || x &gt; 7 ? 0\r\n             : res * 10 + x;\r\n    }\r\n}\r\n```","title":"Reverse Integer (Leetcode)","body":"<p>You're not dealing with the theoretical signed 32-bit integer overflow that might occur in the loop, meaning you'll sometimes return a number outside of that range. Also, the logic will not work as expected with negative values.</p>\n<p>And to be really precise on the restriction of signed 32-bit, special care needs to be taken when the input is -2<sup>31</sup>, as its absolute value does not represent a valid signed 32-bit integer.</p>\n<pre><code>class Solution {\n    public int reverse(int x) {\n        if (x &lt; 0) return x == -2147483648 ? 0 : -reverse(-x);\n        int res = 0;\n        while (x &gt; 0 &amp;&amp; res &lt; 214748364) {\n            res = res * 10 + x % 10;\n            x /= 10;\n        }\n        return x == 0 ? res\n             : res &gt; 214748364 || x &gt; 7 ? 0\n             : res * 10 + x;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21921677,"reputation":55,"user_id":16204842,"display_name":"Rohan Sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1693828790,"creation_date":1642255498,"question_id":70722143,"body_markdown":"I was trying to solve 7.Reverse Integer on leetcode &lt;https://leetcode.com/problems/reverse-integer/&gt;.  \r\n\r\n Given a signed 32-bit integer x, return x with its digits reversed. If reversing x causes the value to go outside the signed 32-bit integer range [-2^31, 2^31 - 1], then return 0.\r\n\r\n  **Example 1:**\r\n    \r\n    Input: x = 123  \r\n    Output: 321\r\n\r\nMy solution for the above problem is\r\n\r\n    class Solution {  \r\n        public int reverse(int x) {  \r\n            int num=0;  \r\n            if(x&gt;Integer.MAX_VALUE||x&lt;Integer.MIN_VALUE) return 0;  \r\n            while(x!=0){  \r\n                int a=x%10;  \r\n                num=num*10+a;  \r\n                x=x/10;  \r\n                \r\n                \r\n            }  \r\n            return num;  \r\n        }  \r\n    }  \r\n\r\nI&#39;m getting 4 test cases wrong. One of which is :\r\n\r\n**Example**  \r\n\r\n    Input: 1534236469  \r\n    Output : 1056389759  \r\n    Expected: 0  \r\n","title":"Reverse Integer (Leetcode)","body":"<p>I was trying to solve 7.Reverse Integer on leetcode <a href=\"https://leetcode.com/problems/reverse-integer/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/reverse-integer/</a>.</p>\n<p>Given a signed 32-bit integer x, return x with its digits reversed. If reversing x causes the value to go outside the signed 32-bit integer range [-2^31, 2^31 - 1], then return 0.</p>\n<p><strong>Example 1:</strong></p>\n<pre><code>Input: x = 123  \nOutput: 321\n</code></pre>\n<p>My solution for the above problem is</p>\n<pre><code>class Solution {  \n    public int reverse(int x) {  \n        int num=0;  \n        if(x&gt;Integer.MAX_VALUE||x&lt;Integer.MIN_VALUE) return 0;  \n        while(x!=0){  \n            int a=x%10;  \n            num=num*10+a;  \n            x=x/10;  \n            \n            \n        }  \n        return num;  \n    }  \n}  \n</code></pre>\n<p>I'm getting 4 test cases wrong. One of which is :</p>\n<p><strong>Example</strong></p>\n<pre><code>Input: 1534236469  \nOutput : 1056389759  \nExpected: 0  \n</code></pre>\n"},{"tags":["java","spring-boot","cron","scheduler"],"comments":[{"owner":{"account_id":14762278,"reputation":40,"user_id":10661250,"display_name":"prguptadev"},"score":0,"creation_date":1693828361,"post_id":77037453,"comment_id":135807441,"body_markdown":"I am using enable scheduling annotation and Task schedular to configure jobs in properties file, I can add multiple jobs if required , is there any way to reload cron jobs to task schedular","body":"I am using enable scheduling annotation and Task schedular to configure jobs in properties file, I can add multiple jobs if required , is there any way to reload cron jobs to task schedular"}],"owner":{"account_id":14762278,"reputation":40,"user_id":10661250,"display_name":"prguptadev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693828168,"creation_date":1693828168,"question_id":77037453,"body_markdown":"So I have multiple cron jobs scheduled based on properties with Task Schedular, now I want to move those properties to DB. When any properties or job got update from UI , I will send DirectExchange flag to my application to reload all job once again. \r\n\r\n      public void scheduleJobs() {\r\n       list.forEach(task -&gt;\r\n                taskScheduler.schedule(mytaskMethods(task), new CronTrigger(task.getSchedular()))\r\n        );\r\n    }\r\n\r\n`here am stuck to reload task schedular to cancel running job and update new one, dont want to restart my application.`","title":"Is there any way to reload multiple cron job Task Schedular","body":"<p>So I have multiple cron jobs scheduled based on properties with Task Schedular, now I want to move those properties to DB. When any properties or job got update from UI , I will send DirectExchange flag to my application to reload all job once again.</p>\n<pre><code>  public void scheduleJobs() {\n   list.forEach(task -&gt;\n            taskScheduler.schedule(mytaskMethods(task), new CronTrigger(task.getSchedular()))\n    );\n}\n</code></pre>\n<p><code>here am stuck to reload task schedular to cancel running job and update new one, dont want to restart my application.</code></p>\n"},{"tags":["java","android","canvas"],"owner":{"account_id":28779976,"reputation":25,"user_id":22041790,"display_name":"HGSu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693827221,"creation_date":1693826562,"question_id":77037299,"body_markdown":"I have layout and I want to draw specific part from it (not all layout) in PDF page\r\nfor example draw from layout0 position  y=150 to y=550\r\nHow I can do it?  \r\n\r\n    LinearLayout layout0 = new LinearLayout(getApplicationContext());\r\n                    parent.setOrientation(LinearLayout.VERTICAL);\r\n    if(temp1.getParent() != null) {\r\n                    ((ViewGroup)temp1.getParent()).removeView(temp1); \r\n                    layout0.addView(temp1);\r\n     }\r\n\r\n    temp1.measure(View.MeasureSpec.makeMeasureSpec(200, View.MeasureSpec.AT_MOST),\r\n                    View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));\r\n    \r\n    layout0.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,\r\n                    LinearLayout.LayoutParams.WRAP_CONTENT));\r\n    layout0.measure(View.MeasureSpec.makeMeasureSpec(200, View.MeasureSpec.AT_MOST),\r\n                    View.MeasureSpec.makeMeasureSpec(400, View.MeasureSpec.AT_MOST));\r\n    layout0.layout(0, 0, layout0.getMeasuredWidth(), layout0.getMeasuredHeight());\r\n    Canvas canvas = page.getCanvas();\r\n    \r\n    layout0.draw(canvas);","title":"Draw specific area from view to canvas","body":"<p>I have layout and I want to draw specific part from it (not all layout) in PDF page\nfor example draw from layout0 position  y=150 to y=550\nHow I can do it?</p>\n<pre><code>LinearLayout layout0 = new LinearLayout(getApplicationContext());\n                parent.setOrientation(LinearLayout.VERTICAL);\nif(temp1.getParent() != null) {\n                ((ViewGroup)temp1.getParent()).removeView(temp1); \n                layout0.addView(temp1);\n }\n\ntemp1.measure(View.MeasureSpec.makeMeasureSpec(200, View.MeasureSpec.AT_MOST),\n                View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));\n\nlayout0.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,\n                LinearLayout.LayoutParams.WRAP_CONTENT));\nlayout0.measure(View.MeasureSpec.makeMeasureSpec(200, View.MeasureSpec.AT_MOST),\n                View.MeasureSpec.makeMeasureSpec(400, View.MeasureSpec.AT_MOST));\nlayout0.layout(0, 0, layout0.getMeasuredWidth(), layout0.getMeasuredHeight());\nCanvas canvas = page.getCanvas();\n\nlayout0.draw(canvas);\n</code></pre>\n"},{"tags":["java","kotlin","twitter","twitter-api-v2"],"owner":{"account_id":1466525,"reputation":2186,"user_id":1379195,"accept_rate":45,"display_name":"Anthone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693826583,"creation_date":1693826583,"question_id":77037303,"body_markdown":"I am trying to post a tweet with an image. I can successfully post a tweet with just text using OAuth2 authentication PKCE. However, when I try to upload an image, I get a 403 error code without any additional information.\r\n\r\nI have tried both direct upload (https://developer.twitter.com/en/docs/twitter-api/v1/media/upload-media/api-reference/post-media-upload) and with the INIT method (https://developer.twitter.com/en/docs/twitter-api/v1/media/upload-media/api-reference/post-media-upload-init).\r\n\r\nHere is my Kotlin code:\r\n\r\n    fun uploadMediaToTwitter(accessToken: String, media: ByteArray) {\r\n        val client = OkHttpClient()\r\n    \r\n        val mediaBody = RequestBody.create(&quot;image/*&quot;.toMediaTypeOrNull(), media)\r\n    \r\n        val requestBody = MultipartBody.Builder()\r\n            .setType(MultipartBody.FORM)\r\n            .addFormDataPart(&quot;media&quot;, &quot;image.png&quot;, mediaBody)\r\n            .build()\r\n    \r\n        val request = Request.Builder()\r\n            .url(&quot;https://upload.twitter.com/1.1/media/upload.json&quot;)\r\n            .post(requestBody)\r\n            .addHeader(&quot;Authorization&quot;, &quot;Bearer $accessToken&quot;)\r\n            .addHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\r\n            .build()\r\n    \r\n        // Execute the request\r\n        client.newCall(request).execute().use { response -&gt;\r\n            println(&quot;Result : code=${response.code}\\nmessage=${response.message}\\nbody=${response.body.string()}&quot;)\r\n        }\r\n    }\r\n\r\nResult : code=403\r\nmessage=\r\nbody=\r\n\r\nAny help would be greatly appreciated. Thank you!","title":"Uploading an Image to Twitter Using OAuth2 Results in 403 Error","body":"<p>I am trying to post a tweet with an image. I can successfully post a tweet with just text using OAuth2 authentication PKCE. However, when I try to upload an image, I get a 403 error code without any additional information.</p>\n<p>I have tried both direct upload (<a href=\"https://developer.twitter.com/en/docs/twitter-api/v1/media/upload-media/api-reference/post-media-upload\" rel=\"nofollow noreferrer\">https://developer.twitter.com/en/docs/twitter-api/v1/media/upload-media/api-reference/post-media-upload</a>) and with the INIT method (<a href=\"https://developer.twitter.com/en/docs/twitter-api/v1/media/upload-media/api-reference/post-media-upload-init\" rel=\"nofollow noreferrer\">https://developer.twitter.com/en/docs/twitter-api/v1/media/upload-media/api-reference/post-media-upload-init</a>).</p>\n<p>Here is my Kotlin code:</p>\n<pre><code>fun uploadMediaToTwitter(accessToken: String, media: ByteArray) {\n    val client = OkHttpClient()\n\n    val mediaBody = RequestBody.create(&quot;image/*&quot;.toMediaTypeOrNull(), media)\n\n    val requestBody = MultipartBody.Builder()\n        .setType(MultipartBody.FORM)\n        .addFormDataPart(&quot;media&quot;, &quot;image.png&quot;, mediaBody)\n        .build()\n\n    val request = Request.Builder()\n        .url(&quot;https://upload.twitter.com/1.1/media/upload.json&quot;)\n        .post(requestBody)\n        .addHeader(&quot;Authorization&quot;, &quot;Bearer $accessToken&quot;)\n        .addHeader(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\n        .build()\n\n    // Execute the request\n    client.newCall(request).execute().use { response -&gt;\n        println(&quot;Result : code=${response.code}\\nmessage=${response.message}\\nbody=${response.body.string()}&quot;)\n    }\n}\n</code></pre>\n<p>Result : code=403\nmessage=\nbody=</p>\n<p>Any help would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693826518,"creation_date":1693826518,"answer_id":77037296,"question_id":77037242,"body_markdown":"All actuator endpoints from `spring-boot-3.x` also(metrics, health), are under `/actuator` path.\r\n\r\nFor example metrics = `/actuator/metrics` and health = `/actuator/health`","title":"Spring Boot : Missing Endpoints Exposed for Actuator","body":"<p>All actuator endpoints from <code>spring-boot-3.x</code> also(metrics, health), are under <code>/actuator</code> path.</p>\n<p>For example metrics = <code>/actuator/metrics</code> and health = <code>/actuator/health</code></p>\n"}],"owner":{"account_id":110000,"reputation":4107,"user_id":291253,"accept_rate":37,"display_name":"lm."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693826518,"creation_date":1693825975,"question_id":77037242,"body_markdown":"I know that the question is not new (similar asked [here][1] )\r\n\r\nI am trying to expose actuator endpoint for metrics\r\n\r\nhere are relevant definitions from application.properties : \r\n\r\n    management.endpoints.enabled-by-default=true\r\n    management.endpoints.web.exposure.include=health,metrics\r\n    management.endpoint.metrics.enabled=true\r\n    management.server.port=8090\r\n\r\nHere imports from Pom.xml \r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t&lt;exclusions&gt;\r\n    \t\t&lt;exclusion&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-dataformat-cbor&lt;/artifactId&gt;\r\n    \t\t&lt;/exclusion&gt;\r\n    \t\t&lt;exclusion&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n    \t\t&lt;/exclusion&gt;\r\n    \t&lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWhen starting app , I am getting \r\n\r\n    Exposing 1 endpoint(s) beneath base path &#39;/actuator\r\n\r\nwhile expected 2 ( health and metrics ) \r\nIs there missing something in definitions ? Thanks in advnance \r\n\r\n  [1]: https://stackoverflow.com/questions/72798403/spring-boot-actuator-exposing-0-endpoints","title":"Spring Boot : Missing Endpoints Exposed for Actuator","body":"<p>I know that the question is not new (similar asked <a href=\"https://stackoverflow.com/questions/72798403/spring-boot-actuator-exposing-0-endpoints\">here</a> )</p>\n<p>I am trying to expose actuator endpoint for metrics</p>\n<p>here are relevant definitions from application.properties :</p>\n<pre><code>management.endpoints.enabled-by-default=true\nmanagement.endpoints.web.exposure.include=health,metrics\nmanagement.endpoint.metrics.enabled=true\nmanagement.server.port=8090\n</code></pre>\n<p>Here imports from Pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-cbor&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>When starting app , I am getting</p>\n<pre><code>Exposing 1 endpoint(s) beneath base path '/actuator\n</code></pre>\n<p>while expected 2 ( health and metrics )\nIs there missing something in definitions ? Thanks in advnance</p>\n"},{"tags":["java","compilation","upgrade","lombok","mapstruct"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693817242,"post_id":77035768,"comment_id":135805481,"body_markdown":"Please provide a [mre].","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1693817660,"post_id":77035768,"comment_id":135805574,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693826125,"creation_date":1693826125,"answer_id":77037261,"question_id":77035768,"body_markdown":"NB: I&#39;m a lombok contributor.\r\n\r\nThis error is what you get when you run lombok 1.18.28 on JDK21. Not JDK17. Check your JDK version (and double-check your lombok version, as you&#39;d get that error very old lombok versions on JDK17). JDK21 support is on its way (and some steps to permanently solve the problem is going on in branch `maven-plugin` which hasn&#39;t been released in a downloadable version just yet.\r\n\r\n## Check java version\r\n\r\nYou can check your java version with `java --version` - if it&#39;s JDK21, downgrade your JDK, or use the `--add-opens` strategy\r\n\r\n## Check lombok version\r\n\r\nFind the lombok being used in your compilation process. `java -jar lombok.jar version` will tell you what version it is. If it&#39;s less than 1.18.28, upgade it.\r\n\r\n## Use `--add-opens`\r\n\r\nWhereever `javac` is being invoked, add the following switches:\r\n\r\n```\r\njavac \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED \\\r\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED \\\r\n  -cp classpath arguments *.java\r\n```\r\n\r\nThat last line are your usual arguments. If you use a build system it can be quite a bit of effort to figure out how to do that, which is why lombok normally takes care of this for you. However, due to either the JDK you use being too recent or the lombok version you have being too outdated, that part isn&#39;t working. These `--J-add-opens` lines do it manually.\r\n\r\n","title":"why compile error when upgrade lombok to 1.18.28 with jdk17?","body":"<p>NB: I'm a lombok contributor.</p>\n<p>This error is what you get when you run lombok 1.18.28 on JDK21. Not JDK17. Check your JDK version (and double-check your lombok version, as you'd get that error very old lombok versions on JDK17). JDK21 support is on its way (and some steps to permanently solve the problem is going on in branch <code>maven-plugin</code> which hasn't been released in a downloadable version just yet.</p>\n<h2>Check java version</h2>\n<p>You can check your java version with <code>java --version</code> - if it's JDK21, downgrade your JDK, or use the <code>--add-opens</code> strategy</p>\n<h2>Check lombok version</h2>\n<p>Find the lombok being used in your compilation process. <code>java -jar lombok.jar version</code> will tell you what version it is. If it's less than 1.18.28, upgade it.</p>\n<h2>Use <code>--add-opens</code></h2>\n<p>Whereever <code>javac</code> is being invoked, add the following switches:</p>\n<pre><code>javac \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED \\\n  -J--add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED \\\n  -cp classpath arguments *.java\n</code></pre>\n<p>That last line are your usual arguments. If you use a build system it can be quite a bit of effort to figure out how to do that, which is why lombok normally takes care of this for you. However, due to either the JDK you use being too recent or the lombok version you have being too outdated, that part isn't working. These <code>--J-add-opens</code> lines do it manually.</p>\n"}],"owner":{"account_id":10558541,"reputation":13,"user_id":7778957,"display_name":"tony"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":452,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77037261,"answer_count":1,"score":0,"last_activity_date":1693826125,"creation_date":1693811890,"question_id":77035768,"body_markdown":"I&#39;m upgrading the Java version to 17. Here is the stacktrace.\r\n```none\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors com.sun.tools.javac.processing.JavacProcessingEnvironment.discoveredProcs accessible: module jdk.compiler does not &quot;opens com.sun.tools.javac.processing&quot; to unnamed module @2eb9b035\r\n    at java.lang.reflect.AccessibleObject.checkCanSetAccessible (AccessibleObject.java:354)\r\n    at java.lang.reflect.AccessibleObject.checkCanSetAccessible (AccessibleObject.java:297)\r\n    at java.lang.reflect.Field.checkCanSetAccessible (Field.java:178)\r\n    at java.lang.reflect.Field.setAccessible (Field.java:172)\r\n    at lombok.permit.Permit.setAccessible (Permit.java:71)\r\n    at lombok.permit.Permit.getField (Permit.java:105)\r\n    at lombok.javac.apt.LombokProcessor.getFieldAccessor (LombokProcessor.java:115)\r\n    at lombok.javac.apt.LombokProcessor.&lt;clinit&gt; (LombokProcessor.java:109)\r\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0 (Native Method)\r\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance (NativeConstructorAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance (DelegatingConstructorAccessorImpl.java:45)\r\n    at java.lang.reflect.Constructor.newInstanceWithCaller (Constructor.java:499)\r\n    at java.lang.reflect.ReflectAccess.newInstance (ReflectAccess.java:128)\r\n    at jdk.internal.reflect.ReflectionFactory.newInstance (ReflectionFactory.java:347)\r\n    at java.lang.Class.newInstance (Class.java:645)\r\n    at lombok.core.AnnotationProcessor$JavacDescriptor.want (AnnotationProcessor.java:115)\r\n    at lombok.core.AnnotationProcessor.init (AnnotationProcessor.java:177)\r\n    at lombok.launch.AnnotationProcessorHider$AnnotationProcessor.init (AnnotationProcessor.java:73)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$ProcessorState.&lt;init&gt; (JavacProcessingEnvironment.java:701)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors$ProcessorStateIterator.next (JavacProcessingEnvironment.java:828)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs (JavacProcessingEnvironment.java:924)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run (JavacProcessingEnvironment.java:1267)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing (JavacProcessingEnvironment.java:1382)\r\n    at com.sun.tools.javac.main.JavaCompiler.processAnnotations (JavaCompiler.java:1234)\r\n    at com.sun.tools.javac.main.JavaCompiler.compile (JavaCompiler.java:916)\r\n    at com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0 (JavacTaskImpl.java:104)\r\n    at com.sun.tools.javac.api.JavacTaskImpl.invocationHelper (JavacTaskImpl.java:152)\r\n    at com.sun.tools.javac.api.JavacTaskImpl.doCall (JavacTaskImpl.java:100)\r\n    at com.sun.tools.javac.api.JavacTaskImpl.call (JavacTaskImpl.java:94)\r\n    at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:126)\r\n    at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:174)\r\n    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1134)\r\n    at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:187)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\r\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\n```\r\nI have checked the dependency with cmd: `mvn dependency:tree`, and found the Lombok version is up to 1.18.28, and also mapstruct:jar:1.5.2.Final\r\n\r\nPlease help me if you know how this happens.","title":"why compile error when upgrade lombok to 1.18.28 with jdk17?","body":"<p>I'm upgrading the Java version to 17. Here is the stacktrace.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors com.sun.tools.javac.processing.JavacProcessingEnvironment.discoveredProcs accessible: module jdk.compiler does not &quot;opens com.sun.tools.javac.processing&quot; to unnamed module @2eb9b035\n    at java.lang.reflect.AccessibleObject.checkCanSetAccessible (AccessibleObject.java:354)\n    at java.lang.reflect.AccessibleObject.checkCanSetAccessible (AccessibleObject.java:297)\n    at java.lang.reflect.Field.checkCanSetAccessible (Field.java:178)\n    at java.lang.reflect.Field.setAccessible (Field.java:172)\n    at lombok.permit.Permit.setAccessible (Permit.java:71)\n    at lombok.permit.Permit.getField (Permit.java:105)\n    at lombok.javac.apt.LombokProcessor.getFieldAccessor (LombokProcessor.java:115)\n    at lombok.javac.apt.LombokProcessor.&lt;clinit&gt; (LombokProcessor.java:109)\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0 (Native Method)\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance (NativeConstructorAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance (DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstanceWithCaller (Constructor.java:499)\n    at java.lang.reflect.ReflectAccess.newInstance (ReflectAccess.java:128)\n    at jdk.internal.reflect.ReflectionFactory.newInstance (ReflectionFactory.java:347)\n    at java.lang.Class.newInstance (Class.java:645)\n    at lombok.core.AnnotationProcessor$JavacDescriptor.want (AnnotationProcessor.java:115)\n    at lombok.core.AnnotationProcessor.init (AnnotationProcessor.java:177)\n    at lombok.launch.AnnotationProcessorHider$AnnotationProcessor.init (AnnotationProcessor.java:73)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$ProcessorState.&lt;init&gt; (JavacProcessingEnvironment.java:701)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors$ProcessorStateIterator.next (JavacProcessingEnvironment.java:828)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs (JavacProcessingEnvironment.java:924)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run (JavacProcessingEnvironment.java:1267)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing (JavacProcessingEnvironment.java:1382)\n    at com.sun.tools.javac.main.JavaCompiler.processAnnotations (JavaCompiler.java:1234)\n    at com.sun.tools.javac.main.JavaCompiler.compile (JavaCompiler.java:916)\n    at com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0 (JavacTaskImpl.java:104)\n    at com.sun.tools.javac.api.JavacTaskImpl.invocationHelper (JavacTaskImpl.java:152)\n    at com.sun.tools.javac.api.JavacTaskImpl.doCall (JavacTaskImpl.java:100)\n    at com.sun.tools.javac.api.JavacTaskImpl.call (JavacTaskImpl.java:94)\n    at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:126)\n    at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:174)\n    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1134)\n    at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:187)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\n</code></pre>\n<p>I have checked the dependency with cmd: <code>mvn dependency:tree</code>, and found the Lombok version is up to 1.18.28, and also mapstruct:jar:1.5.2.Final</p>\n<p>Please help me if you know how this happens.</p>\n"},{"tags":["java","rest","quarkus","quarkus-oidc"],"comments":[{"owner":{"account_id":14122292,"reputation":501,"user_id":10202496,"display_name":"iabughosh"},"score":1,"creation_date":1693741166,"post_id":77022416,"comment_id":135797877,"body_markdown":"Did you try setting &#39;quarkus.http.auth.proactive&#39; to false?","body":"Did you try setting &#39;quarkus.http.auth.proactive&#39; to false?"},{"owner":{"account_id":1152519,"reputation":733,"user_id":1133928,"display_name":"Sergey Beryozkin"},"score":0,"creation_date":1693817817,"post_id":77022416,"comment_id":135805601,"body_markdown":"Indeed, see https://quarkus.io/guides/security-proactive-authentication","body":"Indeed, see <a href=\"https://quarkus.io/guides/security-proactive-authentication\" rel=\"nofollow noreferrer\">quarkus.io/guides/security-proactive-authentication</a>"},{"owner":{"account_id":10872114,"reputation":41,"user_id":7993672,"display_name":"S&#246;ren"},"score":0,"creation_date":1693825675,"post_id":77022416,"comment_id":135806920,"body_markdown":"Thanks a lot, iabughosh and @SergeyBeryozkin - this solved my problem","body":"Thanks a lot, iabughosh and @SergeyBeryozkin - this solved my problem"}],"answers":[{"tags":[],"owner":{"account_id":10872114,"reputation":41,"user_id":7993672,"display_name":"S&#246;ren"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693825990,"creation_date":1693825990,"answer_id":77037246,"question_id":77022416,"body_markdown":"Problem was solved thanks to the help by @iabughosh and @SergeyBeryozkin\r\nBy setting the property: **quarkus.http.auth.proactive** to **false** my permitted paths were not rejected anymore - Thanks\r\n ","title":"Quarkus: 401 for permitted route when request contains Bearer token","body":"<p>Problem was solved thanks to the help by @iabughosh and @SergeyBeryozkin\nBy setting the property: <strong>quarkus.http.auth.proactive</strong> to <strong>false</strong> my permitted paths were not rejected anymore - Thanks</p>\n"}],"owner":{"account_id":10872114,"reputation":41,"user_id":7993672,"display_name":"S&#246;ren"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77037246,"answer_count":1,"score":1,"last_activity_date":1693825990,"creation_date":1693564741,"question_id":77022416,"body_markdown":"I got the following scenario:\r\n\r\nI&#39;m migrating a legacy application into a new Quarkus based application. For routes addressing the legacy API, Quarkus is dealing as a proxy.\r\n\r\nThe requirement is, that all routes that point to the legacy API, are permitted and not checked by OIDC check of Quarkus, since the legacy API has it&#39;s own auth mechanism.\r\n\r\nWhen making requests to that specific route they are correctly forwarded to the legacy API and are not rejected with 401.\r\n\r\n**BUT**: as soon as a request for that specific route contains a Bearer token like e.g.: &quot;Bearer eyJhb....&quot; in the &quot;Authorization&quot; header, Quarkus OIDC kicks in and rejects this request with 401.\r\n\r\nIf I omit the &quot;Bearer &quot; from the beginning of the header (since the legacy API can handle that as well), then the quarkus OIDC check does not happen and the request is forwarded.\r\n\r\nMy current solution is using a RouteFilter with high priority and remove the &quot;Beraer &quot; from the beginning of the Auth header. Which as a result does then not trigger OIDC check of Quarkus.\r\n\r\nBut I would prefer to have a more cleaner solution without header manipulation, that gives me the possibility to skip the Quarkus OIDC check for a certain route.\r\n\r\nI wonder if this is a bug in Quarkus, that it still checks the Bearer token, also for routes that are permitted in the application.properties like that:\r\n\r\n```\r\nquarkus.http.auth.permission.permit1.paths=/legacyapi/*\r\nquarkus.http.auth.permission.permit1.policy=permit\r\nquarkus.http.auth.permission.permit1.methods=GET,POST,PUT,DELETE,PATCH,HEAD\r\n```\r\n\r\nI tried so many ways to get around the OIDC check with filters and interceptors but didn&#39;t find a way to avoid OIDC check kicking in before my filters / interceptors where called.\r\n\r\nDoes somebody have a working hint how I get around the OIDC check for a specific path?\r\n\r\nI&#39;m currently on Quarkus version: 2.16.7.Final\r\n\r\nI&#39;m expecting that the permit configuration in the application.properties  file does not depend on whether a request contains Bearer token or not - but maybe I&#39;m wrong?","title":"Quarkus: 401 for permitted route when request contains Bearer token","body":"<p>I got the following scenario:</p>\n<p>I'm migrating a legacy application into a new Quarkus based application. For routes addressing the legacy API, Quarkus is dealing as a proxy.</p>\n<p>The requirement is, that all routes that point to the legacy API, are permitted and not checked by OIDC check of Quarkus, since the legacy API has it's own auth mechanism.</p>\n<p>When making requests to that specific route they are correctly forwarded to the legacy API and are not rejected with 401.</p>\n<p><strong>BUT</strong>: as soon as a request for that specific route contains a Bearer token like e.g.: &quot;Bearer eyJhb....&quot; in the &quot;Authorization&quot; header, Quarkus OIDC kicks in and rejects this request with 401.</p>\n<p>If I omit the &quot;Bearer &quot; from the beginning of the header (since the legacy API can handle that as well), then the quarkus OIDC check does not happen and the request is forwarded.</p>\n<p>My current solution is using a RouteFilter with high priority and remove the &quot;Beraer &quot; from the beginning of the Auth header. Which as a result does then not trigger OIDC check of Quarkus.</p>\n<p>But I would prefer to have a more cleaner solution without header manipulation, that gives me the possibility to skip the Quarkus OIDC check for a certain route.</p>\n<p>I wonder if this is a bug in Quarkus, that it still checks the Bearer token, also for routes that are permitted in the application.properties like that:</p>\n<pre><code>quarkus.http.auth.permission.permit1.paths=/legacyapi/*\nquarkus.http.auth.permission.permit1.policy=permit\nquarkus.http.auth.permission.permit1.methods=GET,POST,PUT,DELETE,PATCH,HEAD\n</code></pre>\n<p>I tried so many ways to get around the OIDC check with filters and interceptors but didn't find a way to avoid OIDC check kicking in before my filters / interceptors where called.</p>\n<p>Does somebody have a working hint how I get around the OIDC check for a specific path?</p>\n<p>I'm currently on Quarkus version: 2.16.7.Final</p>\n<p>I'm expecting that the permit configuration in the application.properties  file does not depend on whether a request contains Bearer token or not - but maybe I'm wrong?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9789,"page":203,"page_size":100}
